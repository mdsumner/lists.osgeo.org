From steven.spiegel at slu.edu  Fri Mar  1 11:20:31 2019
From: steven.spiegel at slu.edu (Steven Spiegel)
Date: Fri, 1 Mar 2019 19:20:31 +0000
Subject: [pdal] clustering without ground returns
Message-ID: <CY4PR11MB17172F50A61784D9C2B1AEA59A760@CY4PR11MB1717.namprd11.prod.outlook.com>

Good afternoon,

I am attempting to run a pipeline that will:

   1) Remove outliers
    2) Use a simple morphological filter to get ground returns
    3) Compute normal vectors and eigenvalues
    4) Use the filters.cluster to cluster points based on the Euclidean Cluster Extraction

The issue I am having is I would like to exclude ground returns from the cluster extraction. However, I am unsure of a way to get back the ground returns after I use a "filters.range", filtering out the ground classification. Is there a way to do this that I am missing? I know I can probably run 2 different pipelines but is there a way to do this all in one? Thank you so much in advance.

Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190301/cbfef881/attachment.html>

From brad.chambers at gmail.com  Fri Mar  1 13:02:01 2019
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 1 Mar 2019 16:02:01 -0500
Subject: [pdal] clustering without ground returns
In-Reply-To: <CY4PR11MB17172F50A61784D9C2B1AEA59A760@CY4PR11MB1717.namprd11.prod.outlook.com>
References: <CY4PR11MB17172F50A61784D9C2B1AEA59A760@CY4PR11MB1717.namprd11.prod.outlook.com>
Message-ID: <CAJyqqPziiXqqSBsnivGJ_A8orfJG71w5jwz-3T-cY5CScbJZng@mail.gmail.com>

There is not a way to do this out of the box, though we've discussed the
need from time to time [1].

You can probably get away with using tags and inputs as described in the
pipeline documentation and tests [2, 3]. This effectively creates two
pipelines under the hood though.

Would it help if the cluster filter simply added an ignore option similar
to SMRF [4]?

Brad

[1] https://github.com/PDAL/PDAL/issues/1957
[2] https://pdal.io/pipeline.html#stage-objects
[3] https://github.com/PDAL/PDAL/blob/master/test/data/pipeline/tags.json.in
[4] https://pdal.io/stages/filters.smrf.html#options


On Fri, Mar 1, 2019 at 3:40 PM Steven Spiegel <steven.spiegel at slu.edu>
wrote:

> Good afternoon,
>
> I am attempting to run a pipeline that will:
>
>    1) Remove outliers
>     2) Use a simple morphological filter to get ground returns
>     3) Compute normal vectors and eigenvalues
>     4) Use the filters.cluster to cluster points based on the Euclidean
> Cluster Extraction
>
> The issue I am having is I would like to exclude ground returns from the
> cluster extraction. However, I am unsure of a way to get back the ground
> returns after I use a "filters.range", filtering out the ground
> classification. Is there a way to do this that I am missing? I know I can
> probably run 2 different pipelines but is there a way to do this all in
> one? Thank you so much in advance.
>
> Steve
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190301/f6147e9e/attachment.html>

From newcomb.ttg at gmail.com  Mon Mar  4 17:47:30 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Mon, 4 Mar 2019 20:47:30 -0500
Subject: [pdal] filters reprojection problem
Message-ID: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>

Hi Folks,
This is probably something simple.  I am compiling pdal 1.8 from source and
i am running into a puzzling error.
Running this :
pdal translate -f filters.reprojection
--filters.reprojection.out_srs="EPSG:5070+5703"
4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz

Gives me:
(pdal translate Error) GDAL failure (6) Failed to initialize PROJ pipeline
from `+proj=longlat +datum=NAD83
+geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
+vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
+lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
+vunits=m +no_defs': failed to load datum shift file
PDAL: filters.reprojection: Could not construct coordinate transformation
object in createTransform

Any thoughts ?

Doug
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/b344a223/attachment.html>

From newcomb.ttg at gmail.com  Mon Mar  4 17:49:45 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Mon, 4 Mar 2019 20:49:45 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
Message-ID: <CADTwh60UB17nR8mqwsXvo=i5LUpXfyj_YZc3gdyoZcGHpmF1QQ@mail.gmail.com>

Sorry,
Forgot to add.
Platform: Ubuntu 18.04 64 bit
gdal: 2.3.3 ( get same error with 2.4.0) compiled with static proj and
proj5 api
proj: 5.2

Doug


On Mon, Mar 4, 2019 at 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> Hi Folks,
> This is probably something simple.  I am compiling pdal 1.8 from source
> and i am running into a puzzling error.
> Running this :
> pdal translate -f filters.reprojection
> --filters.reprojection.out_srs="EPSG:5070+5703"
> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>
> Gives me:
> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ pipeline
> from `+proj=longlat +datum=NAD83
> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
> +vunits=m +no_defs': failed to load datum shift file
> PDAL: filters.reprojection: Could not construct coordinate transformation
> object in createTransform
>
> Any thoughts ?
>
> Doug
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/9bfab457/attachment.html>

From andrew.bell.ia at gmail.com  Mon Mar  4 17:56:42 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 4 Mar 2019 20:56:42 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
Message-ID: <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>

Do you have the shift files installed with your GDAL install? If so, are
they in the standard location (/usr/share, I believe)?

On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> Hi Folks,
> This is probably something simple.  I am compiling pdal 1.8 from source
> and i am running into a puzzling error.
> Running this :
> pdal translate -f filters.reprojection
> --filters.reprojection.out_srs="EPSG:5070+5703"
> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>
> Gives me:
> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ pipeline
> from `+proj=longlat +datum=NAD83
> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
> +vunits=m +no_defs': failed to load datum shift file
> PDAL: filters.reprojection: Could not construct coordinate transformation
> object in createTransform
>
> Any thoughts ?
>
> Doug
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/e9591cd2/attachment.html>

From michael.smith.erdc at gmail.com  Mon Mar  4 17:57:43 2019
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Mon, 4 Mar 2019 20:57:43 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh60UB17nR8mqwsXvo=i5LUpXfyj_YZc3gdyoZcGHpmF1QQ@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CADTwh60UB17nR8mqwsXvo=i5LUpXfyj_YZc3gdyoZcGHpmF1QQ@mail.gmail.com>
Message-ID: <316CD964-432C-4236-853A-0E57E28BF229@gmail.com>

Doug, 
Have you tried with 4.x? It get no errors with that in the 4.x series, I haven’t yet compiled against 5.

Michael Smith

> On Mar 4, 2019, at 8:49 PM, Doug Newcomb <newcomb.ttg at gmail.com> wrote:
> 
> Sorry,
> Forgot to add.
> Platform: Ubuntu 18.04 64 bit
> gdal: 2.3.3 ( get same error with 2.4.0) compiled with static proj and proj5 api 
> proj: 5.2
> 
> Doug
> 
> 
>> On Mon, Mar 4, 2019 at 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>> Hi Folks,
>> This is probably something simple.  I am compiling pdal 1.8 from source and i am running into a puzzling error.
>> Running this :
>> pdal translate -f filters.reprojection --filters.reprojection.out_srs="EPSG:5070+5703" 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>> 
>> Gives me:
>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ pipeline from `+proj=longlat +datum=NAD83 +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx +vunits=m +no_defs': failed to load datum shift file
>> PDAL: filters.reprojection: Could not construct coordinate transformation object in createTransform
>> 
>> Any thoughts ?
>> 
>> Doug
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/06568c2a/attachment.html>

From newcomb.ttg at gmail.com  Mon Mar  4 18:10:43 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Mon, 4 Mar 2019 21:10:43 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
Message-ID: <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>

I had the shift files installed , but removed them when I started seeing
the problem.  No effect.

Doug

On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> Do you have the shift files installed with your GDAL install? If so, are
> they in the standard location (/usr/share, I believe)?
>
> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>
>> Hi Folks,
>> This is probably something simple.  I am compiling pdal 1.8 from source
>> and i am running into a puzzling error.
>> Running this :
>> pdal translate -f filters.reprojection
>> --filters.reprojection.out_srs="EPSG:5070+5703"
>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>
>> Gives me:
>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>> pipeline from `+proj=longlat +datum=NAD83
>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>> +vunits=m +no_defs': failed to load datum shift file
>> PDAL: filters.reprojection: Could not construct coordinate transformation
>> object in createTransform
>>
>> Any thoughts ?
>>
>> Doug
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/0110be86/attachment-0001.html>

From newcomb.ttg at gmail.com  Mon Mar  4 18:23:46 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Mon, 4 Mar 2019 21:23:46 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
Message-ID: <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>

Currently , /usr/share/proj has nothing.
/usr/local/share/proj  has:
CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world

Doug

On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> I had the shift files installed , but removed them when I started seeing
> the problem.  No effect.
>
> Doug
>
> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> Do you have the shift files installed with your GDAL install? If so, are
>> they in the standard location (/usr/share, I believe)?
>>
>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>>
>>> Hi Folks,
>>> This is probably something simple.  I am compiling pdal 1.8 from source
>>> and i am running into a puzzling error.
>>> Running this :
>>> pdal translate -f filters.reprojection
>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>
>>> Gives me:
>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>> pipeline from `+proj=longlat +datum=NAD83
>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>> +vunits=m +no_defs': failed to load datum shift file
>>> PDAL: filters.reprojection: Could not construct coordinate
>>> transformation object in createTransform
>>>
>>> Any thoughts ?
>>>
>>> Doug
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/1e5d7919/attachment.html>

From andrew.bell.ia at gmail.com  Mon Mar  4 18:46:34 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 4 Mar 2019 21:46:34 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
Message-ID: <CACJ51z2XtduBa75Hd-dYMoOokbhBPHq4jcKu5Lqbsjf48OOz6w@mail.gmail.com>

Does this work with reprojection to simple SRS like 4326?

On Mon, Mar 4, 2019, 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> Currently , /usr/share/proj has nothing.
> /usr/local/share/proj  has:
> CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
> nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world
>
> Doug
>
> On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>
>> I had the shift files installed , but removed them when I started seeing
>> the problem.  No effect.
>>
>> Doug
>>
>> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> Do you have the shift files installed with your GDAL install? If so, are
>>> they in the standard location (/usr/share, I believe)?
>>>
>>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>>>
>>>> Hi Folks,
>>>> This is probably something simple.  I am compiling pdal 1.8 from source
>>>> and i am running into a puzzling error.
>>>> Running this :
>>>> pdal translate -f filters.reprojection
>>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>>
>>>> Gives me:
>>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>>> pipeline from `+proj=longlat +datum=NAD83
>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>> +vunits=m +no_defs': failed to load datum shift file
>>>> PDAL: filters.reprojection: Could not construct coordinate
>>>> transformation object in createTransform
>>>>
>>>> Any thoughts ?
>>>>
>>>> Doug
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190304/92ef2c33/attachment.html>

From andrew.bell.ia at gmail.com  Tue Mar  5 05:40:48 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 5 Mar 2019 08:40:48 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
Message-ID: <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>

I remember having a bunch of trouble when using --with-static-proj.  I'd
suggest not setting that and using PROJSO env. var if you have libproj in a
non-standard location.

Howard, do you remember the issue with proj location in one of the
distros?  I know it was wrong and then got fixed, but I can't recall the
details.

On Mon, Mar 4, 2019 at 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> Currently , /usr/share/proj has nothing.
> /usr/local/share/proj  has:
> CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
> nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world
>
> Doug
>
> On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>
>> I had the shift files installed , but removed them when I started seeing
>> the problem.  No effect.
>>
>> Doug
>>
>> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> Do you have the shift files installed with your GDAL install? If so, are
>>> they in the standard location (/usr/share, I believe)?
>>>
>>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>>>
>>>> Hi Folks,
>>>> This is probably something simple.  I am compiling pdal 1.8 from source
>>>> and i am running into a puzzling error.
>>>> Running this :
>>>> pdal translate -f filters.reprojection
>>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>>
>>>> Gives me:
>>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>>> pipeline from `+proj=longlat +datum=NAD83
>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>> +vunits=m +no_defs': failed to load datum shift file
>>>> PDAL: filters.reprojection: Could not construct coordinate
>>>> transformation object in createTransform
>>>>
>>>> Any thoughts ?
>>>>
>>>> Doug
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190305/4f03a925/attachment.html>

From newcomb.ttg at gmail.com  Tue Mar  5 07:24:01 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Tue, 5 Mar 2019 10:24:01 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
 <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>
Message-ID: <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>

If I don't set it to static, I get another set of error messages

On Tue, Mar 5, 2019, 8:41 AM Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> I remember having a bunch of trouble when using --with-static-proj.  I'd
> suggest not setting that and using PROJSO env. var if you have libproj in a
> non-standard location.
>
> Howard, do you remember the issue with proj location in one of the
> distros?  I know it was wrong and then got fixed, but I can't recall the
> details.
>
> On Mon, Mar 4, 2019 at 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:
>
>> Currently , /usr/share/proj has nothing.
>> /usr/local/share/proj  has:
>> CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
>> nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world
>>
>> Doug
>>
>> On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com>
>> wrote:
>>
>>> I had the shift files installed , but removed them when I started seeing
>>> the problem.  No effect.
>>>
>>> Doug
>>>
>>> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
>>> wrote:
>>>
>>>> Do you have the shift files installed with your GDAL install? If so,
>>>> are they in the standard location (/usr/share, I believe)?
>>>>
>>>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com>
>>>> wrote:
>>>>
>>>>> Hi Folks,
>>>>> This is probably something simple.  I am compiling pdal 1.8 from
>>>>> source and i am running into a puzzling error.
>>>>> Running this :
>>>>> pdal translate -f filters.reprojection
>>>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>>>
>>>>> Gives me:
>>>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>>>> pipeline from `+proj=longlat +datum=NAD83
>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>> +vunits=m +no_defs': failed to load datum shift file
>>>>> PDAL: filters.reprojection: Could not construct coordinate
>>>>> transformation object in createTransform
>>>>>
>>>>> Any thoughts ?
>>>>>
>>>>> Doug
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190305/b220ff9b/attachment-0001.html>

From doug_newcomb at fws.gov  Tue Mar  5 07:31:17 2019
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Tue, 5 Mar 2019 10:31:17 -0500
Subject: [pdal] [EXTERNAL] Re:  filters reprojection problem
In-Reply-To: <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
 <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>
 <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>
Message-ID: <CALQGVr1A4RO4LoU=y2uA5rsp2DrKyod_=nsEJeuWH38JYrt1mw@mail.gmail.com>

I will set up a few virtual instances of ubuntu 18.04  at  home with
different options for proj over the next few days and see what happens.

Doug

On Tue, Mar 5, 2019 at 10:24 AM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> If I don't set it to static, I get another set of error messages
>
> On Tue, Mar 5, 2019, 8:41 AM Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>
>> I remember having a bunch of trouble when using --with-static-proj.  I'd
>> suggest not setting that and using PROJSO env. var if you have libproj in a
>> non-standard location.
>>
>> Howard, do you remember the issue with proj location in one of the
>> distros?  I know it was wrong and then got fixed, but I can't recall the
>> details.
>>
>> On Mon, Mar 4, 2019 at 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com>
>> wrote:
>>
>>> Currently , /usr/share/proj has nothing.
>>> /usr/local/share/proj  has:
>>> CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
>>> nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world
>>>
>>> Doug
>>>
>>> On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com>
>>> wrote:
>>>
>>>> I had the shift files installed , but removed them when I started
>>>> seeing the problem.  No effect.
>>>>
>>>> Doug
>>>>
>>>> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
>>>> wrote:
>>>>
>>>>> Do you have the shift files installed with your GDAL install? If so,
>>>>> are they in the standard location (/usr/share, I believe)?
>>>>>
>>>>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi Folks,
>>>>>> This is probably something simple.  I am compiling pdal 1.8 from
>>>>>> source and i am running into a puzzling error.
>>>>>> Running this :
>>>>>> pdal translate -f filters.reprojection
>>>>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>>>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>>>>
>>>>>> Gives me:
>>>>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>>>>> pipeline from `+proj=longlat +datum=NAD83
>>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>>>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>>> +vunits=m +no_defs': failed to load datum shift file
>>>>>> PDAL: filters.reprojection: Could not construct coordinate
>>>>>> transformation object in createTransform
>>>>>>
>>>>>> Any thoughts ?
>>>>>>
>>>>>> Doug
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Doug Newcomb - Cartographer
USFWS
551F Pylon Dr
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------

*NOTE: This email correspondence and any attachments to and from this
sender is subject to the Freedom of Information Act (FOIA) and may be
disclosed to third parties.*​
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190305/a3e85305/attachment.html>

From andrew.bell.ia at gmail.com  Tue Mar  5 07:32:50 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 5 Mar 2019 10:32:50 -0500
Subject: [pdal] filters reprojection problem
In-Reply-To: <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
 <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>
 <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>
Message-ID: <CACJ51z07X10Bw+TvUOwMtSc_wsWuEWGwr9Tmtgpm=nJnM_darg@mail.gmail.com>

I've been there.  Having spent way too much time on this, I still think
dynamic proj is the way to go.  Proj support in GDAL is painful.  Hopefully
the new release will cure that.

On Tue, Mar 5, 2019 at 10:24 AM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> If I don't set it to static, I get another set of error messages
>
> On Tue, Mar 5, 2019, 8:41 AM Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>
>> I remember having a bunch of trouble when using --with-static-proj.  I'd
>> suggest not setting that and using PROJSO env. var if you have libproj in a
>> non-standard location.
>>
>> Howard, do you remember the issue with proj location in one of the
>> distros?  I know it was wrong and then got fixed, but I can't recall the
>> details.
>>
>> On Mon, Mar 4, 2019 at 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com>
>> wrote:
>>
>>> Currently , /usr/share/proj has nothing.
>>> /usr/local/share/proj  has:
>>> CH  epsg  esri  esri.extra  GL27  IGNF  ITRF2000  ITRF2008  ITRF2014
>>> nad27  nad83  nad.lst  null  other.extra  proj_def.dat  world
>>>
>>> Doug
>>>
>>> On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com>
>>> wrote:
>>>
>>>> I had the shift files installed , but removed them when I started
>>>> seeing the problem.  No effect.
>>>>
>>>> Doug
>>>>
>>>> On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com>
>>>> wrote:
>>>>
>>>>> Do you have the shift files installed with your GDAL install? If so,
>>>>> are they in the standard location (/usr/share, I believe)?
>>>>>
>>>>> On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi Folks,
>>>>>> This is probably something simple.  I am compiling pdal 1.8 from
>>>>>> source and i am running into a puzzling error.
>>>>>> Running this :
>>>>>> pdal translate -f filters.reprojection
>>>>>> --filters.reprojection.out_srs="EPSG:5070+5703"
>>>>>> 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>>>>>>
>>>>>> Gives me:
>>>>>> (pdal translate Error) GDAL failure (6) Failed to initialize PROJ
>>>>>> pipeline from `+proj=longlat +datum=NAD83
>>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>>> +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23
>>>>>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
>>>>>> +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx
>>>>>> +vunits=m +no_defs': failed to load datum shift file
>>>>>> PDAL: filters.reprojection: Could not construct coordinate
>>>>>> transformation object in createTransform
>>>>>>
>>>>>> Any thoughts ?
>>>>>>
>>>>>> Doug
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190305/deefd508/attachment.html>

From klassen.js at gmail.com  Tue Mar  5 08:06:08 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Tue, 5 Mar 2019 10:06:08 -0600
Subject: [pdal] filters reprojection problem
In-Reply-To: <CACJ51z07X10Bw+TvUOwMtSc_wsWuEWGwr9Tmtgpm=nJnM_darg@mail.gmail.com>
References: <CADTwh62_QdxHHZxaDjovjLfxUh3X7mNjF+=pa3N8pQvssCYEzQ@mail.gmail.com>
 <CACJ51z0d_TRrt2uKCyS74VSX=ad91S_CAUhp6cpMDvHQOW8TyA@mail.gmail.com>
 <CADTwh60cfK71a2wBwWxEU8Sg7rewidk5_opgLgvURuDj9yq_Zg@mail.gmail.com>
 <CADTwh62pJx3gNBHLhmL0Bujk42KxNrzhHZnWKi-u6JXAbjG8mg@mail.gmail.com>
 <CACJ51z08fesirYeRF9++2PRg7YhLUUZmGi3HDtepCvbLbjpVYg@mail.gmail.com>
 <CADTwh63eqe92E7qDGGPm7n81j9FTFfsyu_ENqHv7A1k+OoPG=A@mail.gmail.com>
 <CACJ51z07X10Bw+TvUOwMtSc_wsWuEWGwr9Tmtgpm=nJnM_darg@mail.gmail.com>
Message-ID: <26a38a97-aba6-b8c1-2a9f-f1393163047a@gmail.com>

I'm not sure the "right" answer, but I got around that (first) error by specifying the full path to the geoidgrid file.  This required specifying the proj string (instead of the EPSG string) in the reprojection "out_srs" field.

I also specified the equivalent EPSG string in the "a_srs" field of the writer to make sure I got the standard metadata.  I'm not 100% sure this step is necessary.

On 3/5/19 9:32 AM, Andrew Bell wrote:
> I've been there.  Having spent way too much time on this, I still think dynamic proj is the way to go.  Proj support in GDAL is painful.  Hopefully the new release will cure that.
>
> On Tue, Mar 5, 2019 at 10:24 AM Doug Newcomb <newcomb.ttg at gmail.com <mailto:newcomb.ttg at gmail.com>> wrote:
>
>     If I don't set it to static, I get another set of error messages
>
>     On Tue, Mar 5, 2019, 8:41 AM Andrew Bell <andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>> wrote:
>
>         I remember having a bunch of trouble when using --with-static-proj.  I'd suggest not setting that and using PROJSO env. var if you have libproj in a non-standard location.
>
>         Howard, do you remember the issue with proj location in one of the distros?  I know it was wrong and then got fixed, but I can't recall the details.
>
>         On Mon, Mar 4, 2019 at 9:23 PM Doug Newcomb <newcomb.ttg at gmail.com <mailto:newcomb.ttg at gmail.com>> wrote:
>
>             Currently , /usr/share/proj has nothing.
>             /usr/local/share/proj  has:
>             CH  epsg  esri  esri.extra  GL27  IGNF ITRF2000  ITRF2008  ITRF2014  nad27  nad83 nad.lst  null  other.extra  proj_def.dat  world
>
>             Doug
>
>             On Mon, Mar 4, 2019 at 9:10 PM Doug Newcomb <newcomb.ttg at gmail.com <mailto:newcomb.ttg at gmail.com>> wrote:
>
>                 I had the shift files installed , but removed them when I started seeing the problem.  No effect.
>
>                 Doug
>
>                 On Mon, Mar 4, 2019 at 8:56 PM Andrew Bell <andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>> wrote:
>
>                     Do you have the shift files installed with your GDAL install? If so, are they in the standard location (/usr/share, I believe)?
>
>                     On Mon, Mar 4, 2019, 8:47 PM Doug Newcomb <newcomb.ttg at gmail.com <mailto:newcomb.ttg at gmail.com>> wrote:
>
>                         Hi Folks,
>                         This is probably something simple.  I am compiling pdal 1.8 from source and i am running into a puzzling error.
>                         Running this :
>                         pdal translate -f filters.reprojection --filters.reprojection.out_srs="EPSG:5070+5703" 4699/20130405_las_s23_2510_40.laz 4699_alb/20130405_las_s23_2510_40.laz
>
>                         Gives me:
>                         (pdal translate Error) GDAL failure (6) Failed to initialize PROJ pipeline from `+proj=longlat +datum=NAD83 +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx +vunits=m +no_defs' to `+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +geoidgrids=g2012a_conus.gtx,g2012a_alaska.gtx,g2012a_guam.gtx,g2012a_hawaii.gtx,g2012a_puertorico.gtx,g2012a_samoa.gtx +vunits=m +no_defs': failed to load datum shift file
>                         PDAL: filters.reprojection: Could not construct coordinate transformation object in createTransform
>
>                         Any thoughts ?
>
>                         Doug
>                         _______________________________________________
>                         pdal mailing list
>                         pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
>                         https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
>         -- 
>         Andrew Bell
>         andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
>
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190305/5301a292/attachment-0001.html>

From jedfrechette at gmail.com  Tue Mar  5 10:00:18 2019
From: jedfrechette at gmail.com (Jed Frechette)
Date: Tue, 5 Mar 2019 11:00:18 -0700
Subject: [pdal] filters reprojection problem
In-Reply-To: <mailman.15960.1551801973.17185.pdal@lists.osgeo.org>
References: <mailman.15960.1551801973.17185.pdal@lists.osgeo.org>
Message-ID: <CAACeADZEt77qg958TjZB5147HEMyja9C7o=OUxw4JweS7vrucQ@mail.gmail.com>

On Tue, 5 Mar 2019 10:06:08 -0600 Jim Klassen <klassen.js at gmail.com> wrote:
> ...clip...
> I'm not sure the "right" answer, but I got around that (first) error by specifying the full path to the geoidgrid file.  This required specifying the proj string (instead of the EPSG string) in the reprojection "out_srs" field.
>...clip...

Not to derail this thread, but since I just ran in to this with the
Windows version installed via conda-forge as well: Is the
filters.reprojection usage shown in Example 2 of the docs expected to
work? I was not able to combine +init +geogrids strings as shown in
that example and needed to specify the full proj string.

Best,

-- 
Jed Frechette

From howard at hobu.co  Fri Mar  8 11:33:48 2019
From: howard at hobu.co (Howard Butler)
Date: Fri, 8 Mar 2019 13:33:48 -0600
Subject: [pdal] PDAL User Survey
Message-ID: <1EB48352-62D6-4CCB-8489-F0C9770B0277@hobu.co>

All,

The PDAL team wishes to get some of your feedback on the project via Google Form. If you have a few moments to fill in or provide some answers, we'd greatly appreciate it.

https://goo.gl/forms/AlmMUvSOeCqNly8d2 <https://goo.gl/forms/AlmMUvSOeCqNly8d2>

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190308/caf5d577/attachment.html>

From steven.spiegel at slu.edu  Mon Mar 18 06:12:55 2019
From: steven.spiegel at slu.edu (Steven Spiegel)
Date: Mon, 18 Mar 2019 13:12:55 +0000
Subject: [pdal] ignoring dimensions
Message-ID: <MN2PR11MB391885639968BD5B3469C0BF9A470@MN2PR11MB3918.namprd11.prod.outlook.com>

Good morning,

Is there a way  to ignore certain dimensions when running a pipeline?  I'm not currently using GPS time or RGB values so I wouldn't mind not having to consider those when processing.  Thanks!

Steven
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190318/d5db4832/attachment.html>

From andrew.bell.ia at gmail.com  Mon Mar 18 07:18:45 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 18 Mar 2019 10:18:45 -0400
Subject: [pdal] ignoring dimensions
In-Reply-To: <MN2PR11MB391885639968BD5B3469C0BF9A470@MN2PR11MB3918.namprd11.prod.outlook.com>
References: <MN2PR11MB391885639968BD5B3469C0BF9A470@MN2PR11MB3918.namprd11.prod.outlook.com>
Message-ID: <CACJ51z2PEM5HXvvNZgvYD8iCGYSR9swCRzLpDtF6v4N6r8WOFA@mail.gmail.com>

Hi Steven,

It's not clear what you're asking.  If you're trying to avoid loading data
other than certain dimensions from a LAS file to save memory, no you can't
do that unless you're writing code at the API level.

Some PDAL commands use stream mode (https://pdal.io/pipeline.html#id2) when
possible to reduce memory use.

If you have another concern, you'll have to be more explicit in your
question.


On Mon, Mar 18, 2019 at 9:43 AM Steven Spiegel <steven.spiegel at slu.edu>
wrote:

> Good morning,
>
> Is there a way  to ignore certain dimensions when running a pipeline?  I'm
> not currently using GPS time or RGB values so I wouldn't mind not having to
> consider those when processing.  Thanks!
>
> Steven
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190318/abc89f21/attachment.html>

From klassen.js at gmail.com  Tue Mar 19 09:27:23 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Tue, 19 Mar 2019 11:27:23 -0500
Subject: [pdal] writers.gdal off by half a pixel?
Message-ID: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>

I noticed when round tripping a DEM through readers.gdal to LAS (or CSV) and then back to writers.gdal that the output was shifted from the input by about half a pixel.

I created a small 10x10 pixel test DEM and a simple pipelines to convert it to CSV via writers.text.  The X,Y coordinates in the CSV file match the center of the pixels of the source DEM as shown by QGIS, so I suspect that readers.gdal is correct.  I have another pipeline that is a readers.gdal into writers.gdal and QGIS shows the output DEM is shifted.

I would be happy to share the 10x10 DEM and the pipelines if there is an appropriate place for them.

I have attempted at a patch to writers.gdal that appears to fix this shift.

https://github.com/klassenjs/PDAL/commit/c80963e938853ebd63aebe4e8a6ce7e1d5d53cbf

I'm not sure I went about it the right way (vs redefining what m_offset means), but making the changes this way seemed like the least invasive way to make the code behave in a self consistent fashion.


From andrew.bell.ia at gmail.com  Tue Mar 19 09:31:13 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 19 Mar 2019 12:31:13 -0400
Subject: [pdal] writers.gdal off by half a pixel?
In-Reply-To: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>
References: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>
Message-ID: <CACJ51z3t9hQvVLu8KUWz4gfg9BoHjb0gzWgQ=K2PP1U9QEx-XA@mail.gmail.com>

Please open a ticket and attach all relevant information.

Thanks,

On Tue, Mar 19, 2019 at 12:27 PM Jim Klassen <klassen.js at gmail.com> wrote:

> I noticed when round tripping a DEM through readers.gdal to LAS (or CSV)
> and then back to writers.gdal that the output was shifted from the input by
> about half a pixel.
>
> I created a small 10x10 pixel test DEM and a simple pipelines to convert
> it to CSV via writers.text.  The X,Y coordinates in the CSV file match the
> center of the pixels of the source DEM as shown by QGIS, so I suspect that
> readers.gdal is correct.  I have another pipeline that is a readers.gdal
> into writers.gdal and QGIS shows the output DEM is shifted.
>
> I would be happy to share the 10x10 DEM and the pipelines if there is an
> appropriate place for them.
>
> I have attempted at a patch to writers.gdal that appears to fix this shift.
>
>
> https://github.com/klassenjs/PDAL/commit/c80963e938853ebd63aebe4e8a6ce7e1d5d53cbf
>
> I'm not sure I went about it the right way (vs redefining what m_offset
> means), but making the changes this way seemed like the least invasive way
> to make the code behave in a self consistent fashion.
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190319/a8833acd/attachment.html>

From howard at hobu.co  Tue Mar 19 09:38:28 2019
From: howard at hobu.co (Howard Butler)
Date: Tue, 19 Mar 2019 11:38:28 -0500
Subject: [pdal] writers.gdal off by half a pixel?
In-Reply-To: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>
References: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>
Message-ID: <0A564A61-EFD4-4DDD-A96E-89473313D667@hobu.co>



> On Mar 19, 2019, at 11:27 AM, Jim Klassen <klassen.js at gmail.com> wrote:
> 
> I noticed when round tripping a DEM through readers.gdal to LAS (or CSV) and then back to writers.gdal that the output was shifted from the input by about half a pixel.
> 
> I created a small 10x10 pixel test DEM and a simple pipelines to convert it to CSV via writers.text.  The X,Y coordinates in the CSV file match the center of the pixels of the source DEM as shown by QGIS, so I suspect that readers.gdal is correct.  I have another pipeline that is a readers.gdal into writers.gdal and QGIS shows the output DEM is shifted.
> 
> I would be happy to share the 10x10 DEM and the pipelines if there is an appropriate place for them.
> 
> I have attempted at a patch to writers.gdal that appears to fix this shift.
> 
> https://github.com/klassenjs/PDAL/commit/c80963e938853ebd63aebe4e8a6ce7e1d5d53cbf
> 
> I'm not sure I went about it the right way (vs redefining what m_offset means), but making the changes this way seemed like the least invasive way to make the code behave in a self consistent fashion.


Jim,

Are you sure it is the writer? Could it perhaps be the reader doing a pixel-is-area vs. pixel-is-point thing incorrectly?

Howard

From klassen.js at gmail.com  Tue Mar 19 09:52:19 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Tue, 19 Mar 2019 11:52:19 -0500
Subject: [pdal] writers.gdal off by half a pixel?
In-Reply-To: <0A564A61-EFD4-4DDD-A96E-89473313D667@hobu.co>
References: <4935d19c-06de-1bb9-1e4e-4c49b2ae6891@gmail.com>
 <0A564A61-EFD4-4DDD-A96E-89473313D667@hobu.co>
Message-ID: <e79d6688-e3ac-5161-8603-e15c255d0e01@gmail.com>


On 3/19/19 11:38 AM, Howard Butler wrote:
>
>> On Mar 19, 2019, at 11:27 AM, Jim Klassen <klassen.js at gmail.com> wrote:
>>
>> I noticed when round tripping a DEM through readers.gdal to LAS (or CSV) and then back to writers.gdal that the output was shifted from the input by about half a pixel.
>>
>> I created a small 10x10 pixel test DEM and a simple pipelines to convert it to CSV via writers.text.  The X,Y coordinates in the CSV file match the center of the pixels of the source DEM as shown by QGIS, so I suspect that readers.gdal is correct.  I have another pipeline that is a readers.gdal into writers.gdal and QGIS shows the output DEM is shifted.
>>
>> I would be happy to share the 10x10 DEM and the pipelines if there is an appropriate place for them.
>>
>> I have attempted at a patch to writers.gdal that appears to fix this shift.
>>
>> https://github.com/klassenjs/PDAL/commit/c80963e938853ebd63aebe4e8a6ce7e1d5d53cbf
>>
>> I'm not sure I went about it the right way (vs redefining what m_offset means), but making the changes this way seemed like the least invasive way to make the code behave in a self consistent fashion.
>
> Jim,
>
> Are you sure it is the writer? Could it perhaps be the reader doing a pixel-is-area vs. pixel-is-point thing incorrectly?
>
> Howard

My evidence for readers.gdal being correct:

gdalinfo shows AREA_OR_POINT=AREA.  I'm not sure that PDAL takes this into account, but "area" seems to be the default.  The writers.gdal output also sets AREA_OR_POINT=AREA.  It might be that the writer should be setting AREA_OR_POINT=POINT, but personally I prefer to be able to round trip the DEMs losslessly.

Running readers.gdal -> writers.csv matches the coordinates output by gdal2xyz.py.

The values in the CSV match the center of the pixel coordinate as shown in QGIS (as I would expect for AREA_OR_POINT=AREA).




From howard at hobu.co  Wed Mar 20 14:18:48 2019
From: howard at hobu.co (Howard Butler)
Date: Wed, 20 Mar 2019 16:18:48 -0500
Subject: [pdal] PDAL User Survey
In-Reply-To: <1EB48352-62D6-4CCB-8489-F0C9770B0277@hobu.co>
References: <1EB48352-62D6-4CCB-8489-F0C9770B0277@hobu.co>
Message-ID: <8BD3F6C3-4B0C-4AC2-9AA7-7FD4568154A2@hobu.co>

A reminder that we're hoping to get some feedback about the PDAL project to guide which areas might need attention. If you have a few moments, please fill out the form.

Thanks so much!

Howard


> On Mar 8, 2019, at 1:33 PM, Howard Butler <howard at hobu.co> wrote:
> 
> All,
> 
> The PDAL team wishes to get some of your feedback on the project via Google Form. If you have a few moments to fill in or provide some answers, we'd greatly appreciate it.
> 
> https://goo.gl/forms/AlmMUvSOeCqNly8d2 <https://goo.gl/forms/AlmMUvSOeCqNly8d2>
> 
> Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190320/9b2b5160/attachment.html>

From newcomb.ttg at gmail.com  Fri Mar 22 18:37:21 2019
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Fri, 22 Mar 2019 21:37:21 -0400
Subject: [pdal] filters reprojection problem
In-Reply-To: <CAACeADZEt77qg958TjZB5147HEMyja9C7o=OUxw4JweS7vrucQ@mail.gmail.com>
References: <mailman.15960.1551801973.17185.pdal@lists.osgeo.org>
 <CAACeADZEt77qg958TjZB5147HEMyja9C7o=OUxw4JweS7vrucQ@mail.gmail.com>
Message-ID: <CADTwh62PmLmFkY_V1uCprSSXf-c6CPaZm7rm_XRgqwKaE+XCwQ@mail.gmail.com>

Well, I have gotten a little further in my adventures on the home computer.
I found another instance of proj , removed it and cleaned all references
out. Just using proj 5.2 now
compiled libgeotiff from source
recompiled gdal 2.4.0 - (dynamic link to proj)
using pdal 1.8
The following command does a horizontal reprojection but scrubs out the
NAVD88 vertical projection and units  in the metadata ( as expected), but
leaves ( at least the max) vertical values unchanged
pdal translate 4699/20130405_las_s23_2510_40.laz 4699/alb_20130405_l
as_s23_2510_40.laz -f filters.reprojection
--filters.reprojection.in_srs="EPSG:4269"
--filters.reprojection.out_srs="EPSG:5070"

Removing the input projection assignment repeatedly gives:
(pdal translate filters.reprojection Error) GDAL failure (1) failed to load
datum shift file

Trying pdal translate 4699/20130405_las_s23_2510_40.laz 4699/alb_20130405_l
as_s23_2510_40.laz -f filters.reprojection
--filters.reprojection.in_srs="EPSG:4269"
--filters.reprojection.out_srs="EPSG:5070+5
703"

Gives the same error. In an effort to find the right vertical gtx file
/usr/local/share/proj now has :

alaska        epsg          GL           IGNF      nad27         null
               README.DATUMGRID     TN            WO
BETA2007.gsb  esri          GL27         ITRF2000  nad83
        nzgd2kgrid0005.gsb  README.NORTHAMERICA  vertconc.gtx  world
CH            esri.extra    gvr2000.gtx  ITRF2008  nad.lst
      other.extra         stgeorge             vertcone.gtx
conus         FL            gvr2016.gtx  ITRF2014  ntf_r93.gsb
  proj_def.dat        stlrnc               vertconw.gtx
egm96_15.gtx  g2012ba0.gtx  hawaii       MD        ntv1_can.dat  prvi
               stpaul               WI

not quite stuffing every datum grid into the directory.

Still get the same error even with the above projection information in the
/usr/local/share/proj directory
googling around, I found
https://www.gadom.ski/2017/05/31/vdatum-with-pdal.html

So I tried

pdal translate 4699/20130405_las_s23_2510_40.laz
4699/alb_20130405_las_s23_2510_40.laz -f filters.reprojection
--filters.reprojection.in_srs="EPSG:4269"
--filters.reprojection.out_srs="init=EPSG:5070
+geoidgrids=/usr/localshare/proj/g2012ba0.gtx"
--writers.las.a_srs=EPSG:5070+5703

and got PDAL: Could not import coordinate system 'init=EPSG:5070
+geoidgrids=/usr/localshare/proj/g2012ba0.gtx': (unknown reason).


So now, having thoroughly displayed my ignorance on how to handle gtx
files, does anyone have any suggestions?

Doug







On Tue, Mar 5, 2019 at 12:59 PM Jed Frechette <jedfrechette at gmail.com>
wrote:

> On Tue, 5 Mar 2019 10:06:08 -0600 Jim Klassen <klassen.js at gmail.com>
> wrote:
> > ...clip...
> > I'm not sure the "right" answer, but I got around that (first) error by
> specifying the full path to the geoidgrid file.  This required specifying
> the proj string (instead of the EPSG string) in the reprojection "out_srs"
> field.
> >...clip...
>
> Not to derail this thread, but since I just ran in to this with the
> Windows version installed via conda-forge as well: Is the
> filters.reprojection usage shown in Example 2 of the docs expected to
> work? I was not able to combine +init +geogrids strings as shown in
> that example and needed to specify the full proj string.
>
> Best,
>
> --
> Jed Frechette
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190322/1e7a1b9e/attachment.html>

From beckley at unavco.org  Mon Mar 25 11:48:45 2019
From: beckley at unavco.org (Matt Beckley)
Date: Mon, 25 Mar 2019 12:48:45 -0600
Subject: [pdal] "resolution" keyword in
Message-ID: <CACrek76RUUEM+FgvNatDMCSkGcPkCw2NuwoZzu_MXakX+ftbCg@mail.gmail.com>

Is there more information available regarding how the 'resolution' keyword
works for the latest version of readers.ept?  Is it "gridding" the data at
a specified cell size?  If so, how does it handle nominal class data such
as lidar classifications?  Is it taking the first, last, or a random sample
to assign as the classification for each cell(assuming a scenario where
there are multiple classifications that fall within a given cell).  In
other words, how is the defining classification assigned for each cell
given a sample of points with varied classification values?

https://github.com/PDAL/PDAL/blob/master/doc/stages/readers.ept.rst

Thanks!

matt.

---------------------------
Matthew Beckley
Data Engineer
UNAVCO/OpenTopography
beckley at unavco.org
303-381-7487
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190325/990a0641/attachment.html>

From klassen.js at gmail.com  Mon Mar 25 12:29:57 2019
From: klassen.js at gmail.com (Jim Klassen)
Date: Mon, 25 Mar 2019 14:29:57 -0500
Subject: [pdal] "resolution" keyword in
In-Reply-To: <CACrek76RUUEM+FgvNatDMCSkGcPkCw2NuwoZzu_MXakX+ftbCg@mail.gmail.com>
References: <CACrek76RUUEM+FgvNatDMCSkGcPkCw2NuwoZzu_MXakX+ftbCg@mail.gmail.com>
Message-ID: <e275737f-f90c-559f-3501-576eca971b46@gmail.com>

My understanding is that it isn't griding or making up new points or aggregating points or anything like that.  It returns a subset of the original points.  Which points it returns depends on what level of the ept tree that each of the original points was placed into when the tree was created.  The resolution parameter determines how many levels of the tree PDAL pulls points from.

As far as I can tell it takes no regard for non-spatial dimensions such as classification.  So, there isn't a direct way to for example query for only ground points at a certain resolution.  You have to query for all points and then filter out the ones that aren't ground (which will likely leave you with a lower resolution than you initially queried for in your final result).

On 3/25/19 1:48 PM, Matt Beckley wrote:
> Is there more information available regarding how the 'resolution' keyword works for the latest version of readers.ept?  Is it "gridding" the data at a specified cell size?  If so, how does it handle nominal class data such as lidar classifications?  Is it taking the first, last, or a random sample to assign as the classification for each cell(assuming a scenario where there are multiple classifications that fall within a given cell).  In other words, how is the defining classification assigned for each cell given a sample of points with varied classification values?
>
> https://github.com/PDAL/PDAL/blob/master/doc/stages/readers.ept.rst
>
> Thanks!
>
> matt.
>
> ---------------------------
> Matthew Beckley
> Data Engineer
> UNAVCO/OpenTopography
> beckley at unavco.org <mailto:beckley at unavco.org>
> 303-381-7487
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190325/ae7f368e/attachment.html>

From andrew.bell.ia at gmail.com  Mon Mar 25 12:30:04 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 25 Mar 2019 15:30:04 -0400
Subject: [pdal] "resolution" keyword in
In-Reply-To: <CACrek76RUUEM+FgvNatDMCSkGcPkCw2NuwoZzu_MXakX+ftbCg@mail.gmail.com>
References: <CACrek76RUUEM+FgvNatDMCSkGcPkCw2NuwoZzu_MXakX+ftbCg@mail.gmail.com>
Message-ID: <CACJ51z0tRngS_gmKpZ_KBtu_59eijmnnYMnY2_h02UmjwSeGCA@mail.gmail.com>

On Mon, Mar 25, 2019 at 2:49 PM Matt Beckley <beckley at unavco.org> wrote:

> Is there more information available regarding how the 'resolution' keyword
> works for the latest version of readers.ept?  Is it "gridding" the data at
> a specified cell size?
>

The EPT format is essentially an octree of point data.  The resolution
options essentially tells the reader how far to descend the tree when
fetching data.


>   If so, how does it handle nominal class data such as lidar
> classifications?  Is it taking the first, last, or a random sample to
> assign as the classification for each cell(assuming a scenario where there
> are multiple classifications that fall within a given cell).  In other
> words, how is the defining classification assigned for each cell given a
> sample of points with varied classification values?
>

The resolution option is unrelated to point classification, so I'm not sure
that I understand your question.  Perhaps you can provide some more detail
or an example.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190325/7f221bcb/attachment.html>

From doug_newcomb at fws.gov  Wed Mar 27 07:19:19 2019
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 27 Mar 2019 10:19:19 -0400
Subject: [pdal] [EXTERNAL] Re:  filters reprojection problem
In-Reply-To: <CADTwh62PmLmFkY_V1uCprSSXf-c6CPaZm7rm_XRgqwKaE+XCwQ@mail.gmail.com>
References: <mailman.15960.1551801973.17185.pdal@lists.osgeo.org>
 <CAACeADZEt77qg958TjZB5147HEMyja9C7o=OUxw4JweS7vrucQ@mail.gmail.com>
 <CADTwh62PmLmFkY_V1uCprSSXf-c6CPaZm7rm_XRgqwKaE+XCwQ@mail.gmail.com>
Message-ID: <CALQGVr2cmKic1_=dTEAFXdr4L=YkSogS08QXn+zDebS-miLdPw@mail.gmail.com>

And, when I correct the typo in the path name ( seen after I had coffee
this morning) I get the same result.

Essentially, it seems I can work with the data without explicitly
specifying the vertical datum  ( in this specific case.)





On Fri, Mar 22, 2019 at 9:37 PM Doug Newcomb <newcomb.ttg at gmail.com> wrote:

> Well, I have gotten a little further in my adventures on the home computer.
> I found another instance of proj , removed it and cleaned all references
> out. Just using proj 5.2 now
> compiled libgeotiff from source
> recompiled gdal 2.4.0 - (dynamic link to proj)
> using pdal 1.8
> The following command does a horizontal reprojection but scrubs out the
> NAVD88 vertical projection and units  in the metadata ( as expected), but
> leaves ( at least the max) vertical values unchanged
> pdal translate 4699/20130405_las_s23_2510_40.laz 4699/alb_20130405_l
> as_s23_2510_40.laz -f filters.reprojection
> --filters.reprojection.in_srs="EPSG:4269"
> --filters.reprojection.out_srs="EPSG:5070"
>
> Removing the input projection assignment repeatedly gives:
> (pdal translate filters.reprojection Error) GDAL failure (1) failed to
> load datum shift file
>
> Trying pdal translate 4699/20130405_las_s23_2510_40.laz
> 4699/alb_20130405_l
> as_s23_2510_40.laz -f filters.reprojection
> --filters.reprojection.in_srs="EPSG:4269"
> --filters.reprojection.out_srs="EPSG:5070+5
> 703"
>
> Gives the same error. In an effort to find the right vertical gtx file
> /usr/local/share/proj now has :
>
> alaska        epsg          GL           IGNF      nad27         null
>                README.DATUMGRID     TN            WO
> BETA2007.gsb  esri          GL27         ITRF2000  nad83
>         nzgd2kgrid0005.gsb  README.NORTHAMERICA  vertconc.gtx  world
> CH            esri.extra    gvr2000.gtx  ITRF2008  nad.lst
>       other.extra         stgeorge             vertcone.gtx
> conus         FL            gvr2016.gtx  ITRF2014  ntf_r93.gsb
>   proj_def.dat        stlrnc               vertconw.gtx
> egm96_15.gtx  g2012ba0.gtx  hawaii       MD        ntv1_can.dat  prvi
>                stpaul               WI
>
> not quite stuffing every datum grid into the directory.
>
> Still get the same error even with the above projection information in the
> /usr/local/share/proj directory
> googling around, I found
> https://www.gadom.ski/2017/05/31/vdatum-with-pdal.html
>
> So I tried
>
> pdal translate 4699/20130405_las_s23_2510_40.laz
> 4699/alb_20130405_las_s23_2510_40.laz -f filters.reprojection
> --filters.reprojection.in_srs="EPSG:4269"
> --filters.reprojection.out_srs="init=EPSG:5070
> +geoidgrids=/usr/localshare/proj/g2012ba0.gtx"
> --writers.las.a_srs=EPSG:5070+5703
>
> and got PDAL: Could not import coordinate system 'init=EPSG:5070
> +geoidgrids=/usr/localshare/proj/g2012ba0.gtx': (unknown reason).
>
>
> So now, having thoroughly displayed my ignorance on how to handle gtx
> files, does anyone have any suggestions?
>
> Doug
>
>
>
>
>
>
>
> On Tue, Mar 5, 2019 at 12:59 PM Jed Frechette <jedfrechette at gmail.com>
> wrote:
>
>> On Tue, 5 Mar 2019 10:06:08 -0600 Jim Klassen <klassen.js at gmail.com>
>> wrote:
>> > ...clip...
>> > I'm not sure the "right" answer, but I got around that (first) error by
>> specifying the full path to the geoidgrid file.  This required specifying
>> the proj string (instead of the EPSG string) in the reprojection "out_srs"
>> field.
>> >...clip...
>>
>> Not to derail this thread, but since I just ran in to this with the
>> Windows version installed via conda-forge as well: Is the
>> filters.reprojection usage shown in Example 2 of the docs expected to
>> work? I was not able to combine +init +geogrids strings as shown in
>> that example and needed to specify the full proj string.
>>
>> Best,
>>
>> --
>> Jed Frechette
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
Doug Newcomb - Cartographer
USFWS
551F Pylon Dr
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------

*NOTE: This email correspondence and any attachments to and from this
sender is subject to the Freedom of Information Act (FOIA) and may be
disclosed to third parties.*​
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190327/cb7205f4/attachment.html>

From dlewi146 at gmail.com  Wed Mar 27 20:49:19 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Wed, 27 Mar 2019 23:49:19 -0400
Subject: [pdal]  readers.slpk: Failed to fetch info
Message-ID: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>

Hi,

I'm trying to run the SLPK reader in a pipeline I've written using the
Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
https://github.com/PDAL/PDAL/tree/master/test/data/i3s .

Whenever I attempt to run this via the Python script, I get an error
message :
"RuntimeError: readers.slpk: Failed to fetch info: Could not read file
/tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"

After looking at the code on Github, this appears to be something that is
called no matter when the SLPK extraction process throws an error, though
this could be wrong.

I'm not trying to do anything with filters yet, I'm simply trying to read
in the SLPK using readers.slpk. Is this a known issue that occurs?

Thanks!

David Lewis
Undergraduate Imaging Science
Rochester Institute of Technology
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190327/27f37af4/attachment.html>

From andrew.bell.ia at gmail.com  Thu Mar 28 03:52:01 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 28 Mar 2019 06:52:01 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
Message-ID: <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>

It would help if you would post the program that is generating the error.

On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:

> Hi,
>
> I'm trying to run the SLPK reader in a pipeline I've written using the
> Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>
> Whenever I attempt to run this via the Python script, I get an error
> message :
> "RuntimeError: readers.slpk: Failed to fetch info: Could not read file
> /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>
> After looking at the code on Github, this appears to be something that is
> called no matter when the SLPK extraction process throws an error, though
> this could be wrong.
>
> I'm not trying to do anything with filters yet, I'm simply trying to read
> in the SLPK using readers.slpk. Is this a known issue that occurs?
>
> Thanks!
>
> David Lewis
> Undergraduate Imaging Science
> Rochester Institute of Technology
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/69e1a011/attachment.html>

From dlewi146 at gmail.com  Thu Mar 28 06:31:55 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Thu, 28 Mar 2019 09:31:55 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
Message-ID: <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>

Attached is the relevant lines of code.

On Thu, Mar 28, 2019 at 6:52 AM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> It would help if you would post the program that is generating the error.
>
> On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:
>
>> Hi,
>>
>> I'm trying to run the SLPK reader in a pipeline I've written using the
>> Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
>> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>>
>> Whenever I attempt to run this via the Python script, I get an error
>> message :
>> "RuntimeError: readers.slpk: Failed to fetch info: Could not read file
>> /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>>
>> After looking at the code on Github, this appears to be something that is
>> called no matter when the SLPK extraction process throws an error, though
>> this could be wrong.
>>
>> I'm not trying to do anything with filters yet, I'm simply trying to read
>> in the SLPK using readers.slpk. Is this a known issue that occurs?
>>
>> Thanks!
>>
>> David Lewis
>> Undergraduate Imaging Science
>> Rochester Institute of Technology
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/799931b5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: toZip.zip
Type: application/zip
Size: 8356 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/799931b5/attachment.zip>

From andrew.bell.ia at gmail.com  Thu Mar 28 09:15:11 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 28 Mar 2019 12:15:11 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
Message-ID: <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>

What platform are you using?

On Thu, Mar 28, 2019 at 9:32 AM David Lewis <dlewi146 at gmail.com> wrote:

> Attached is the relevant lines of code.
>
> On Thu, Mar 28, 2019 at 6:52 AM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> It would help if you would post the program that is generating the error.
>>
>> On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> I'm trying to run the SLPK reader in a pipeline I've written using the
>>> Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
>>> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>>>
>>> Whenever I attempt to run this via the Python script, I get an error
>>> message :
>>> "RuntimeError: readers.slpk: Failed to fetch info: Could not read file
>>> /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>>>
>>> After looking at the code on Github, this appears to be something that
>>> is called no matter when the SLPK extraction process throws an error,
>>> though this could be wrong.
>>>
>>> I'm not trying to do anything with filters yet, I'm simply trying to
>>> read in the SLPK using readers.slpk. Is this a known issue that occurs?
>>>
>>> Thanks!
>>>
>>> David Lewis
>>> Undergraduate Imaging Science
>>> Rochester Institute of Technology
>>>
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/b700fbef/attachment-0001.html>

From dlewi146 at gmail.com  Thu Mar 28 09:16:32 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Thu, 28 Mar 2019 12:16:32 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
Message-ID: <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>

I'm running this from a Bash terminal on an Ubuntu operating system.

On Thu, Mar 28, 2019, 12:15 PM Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> What platform are you using?
>
> On Thu, Mar 28, 2019 at 9:32 AM David Lewis <dlewi146 at gmail.com> wrote:
>
>> Attached is the relevant lines of code.
>>
>> On Thu, Mar 28, 2019 at 6:52 AM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> It would help if you would post the program that is generating the error.
>>>
>>> On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:
>>>
>>>> Hi,
>>>>
>>>> I'm trying to run the SLPK reader in a pipeline I've written using the
>>>> Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
>>>> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>>>>
>>>> Whenever I attempt to run this via the Python script, I get an error
>>>> message :
>>>> "RuntimeError: readers.slpk: Failed to fetch info: Could not read file
>>>> /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>>>>
>>>> After looking at the code on Github, this appears to be something that
>>>> is called no matter when the SLPK extraction process throws an error,
>>>> though this could be wrong.
>>>>
>>>> I'm not trying to do anything with filters yet, I'm simply trying to
>>>> read in the SLPK using readers.slpk. Is this a known issue that occurs?
>>>>
>>>> Thanks!
>>>>
>>>> David Lewis
>>>> Undergraduate Imaging Science
>>>> Rochester Institute of Technology
>>>>
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/c97bd9c5/attachment.html>

From andrew.bell.ia at gmail.com  Thu Mar 28 09:26:32 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 28 Mar 2019 12:26:32 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
Message-ID: <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>

I have no trouble with this using a conda install of pdal and the
python-pdal extension.  SLPK files are unzipped to temp space before
they're actually read.  If you have no temp space, I could see a failure
like this.  Make sure you have /tmp that has sufficient space to hold the
slpk file (it's not compressed) or the TMP environment variable is set to a
location that has sufficient space.

Here's the script I used, which is yours, slightly modified:

import pdal
import numpy as np
import sys
import getopt


## TEST HARNESS
## TODO: begin placing some components of the test harness into functions
## TODO: Clean up the code in general
## TODO: Make sure to clean up pipeline options specifically and make it
all more flexible and ready for various input
if __name__ == "__main__":

    filepath = "autzen.slpk"

    print("Using {0}".format(filepath))

    pipeline_convert_tif = """
    {{
        "pipeline":[
            {{
                "type":"readers.slpk",
                "filename":"{0}"
            }},
            {{
                "type":"filters.info"
            }}
        ]
    }}""".format(filepath)

    # Start the pipeline work
    pipeline = pdal.Pipeline(pipeline_convert_tif)
    pipeline.validate() # Validate that defined pipeline is OK
    pipeline.loglevel = 8
    count = pipeline.execute()
    arrays = pipeline.arrays
    metadata = pipeline.metadata
    print (metadata)
    log = pipeline.log

Here's the start of the output:

$ python test.py

Using autzen.slpk
{
  "metadata":
  {
    "":
    [
      {
      },
      {
      }
    ],
    "filters.info":
    [
      {
        "bbox":
        {
          "maxx": -123.0628514,
          "maxy": 44.06225365,
          "maxz": 163.62028,
          "minx": -123.0749718,
          "miny": 44.050197,
          "minz": 124.16028
        },
        "dimensions": "X, Y, Z, Intensity, ClassFlags, Flag,
NumberOfReturns, ReturnNumber, UserData, PointSourceId, GpsTime,
ScanAngleRank",
        "num_points": 106,
        "schema":
        {
          "dimensions":
          [
            {
              "name": "X",
              "size": 8,
              "type": "floating"
            },
            {
              "name": "Y",
              "size": 8,
              "type": "floating"
            },
...


On Thu, Mar 28, 2019 at 12:16 PM David Lewis <dlewi146 at gmail.com> wrote:

> I'm running this from a Bash terminal on an Ubuntu operating system.
>
> On Thu, Mar 28, 2019, 12:15 PM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> What platform are you using?
>>
>> On Thu, Mar 28, 2019 at 9:32 AM David Lewis <dlewi146 at gmail.com> wrote:
>>
>>> Attached is the relevant lines of code.
>>>
>>> On Thu, Mar 28, 2019 at 6:52 AM Andrew Bell <andrew.bell.ia at gmail.com>
>>> wrote:
>>>
>>>> It would help if you would post the program that is generating the
>>>> error.
>>>>
>>>> On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I'm trying to run the SLPK reader in a pipeline I've written using the
>>>>> Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
>>>>> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>>>>>
>>>>> Whenever I attempt to run this via the Python script, I get an error
>>>>> message :
>>>>> "RuntimeError: readers.slpk: Failed to fetch info: Could not read file
>>>>> /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>>>>>
>>>>> After looking at the code on Github, this appears to be something that
>>>>> is called no matter when the SLPK extraction process throws an error,
>>>>> though this could be wrong.
>>>>>
>>>>> I'm not trying to do anything with filters yet, I'm simply trying to
>>>>> read in the SLPK using readers.slpk. Is this a known issue that occurs?
>>>>>
>>>>> Thanks!
>>>>>
>>>>> David Lewis
>>>>> Undergraduate Imaging Science
>>>>> Rochester Institute of Technology
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/61ca9a35/attachment.html>

From dlewi146 at gmail.com  Thu Mar 28 15:26:15 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Thu, 28 Mar 2019 18:26:15 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
 <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
Message-ID: <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>

I've modified my code to use "filters.info" like yours and it still is
giving me that error. I have also verified that the directory I am
extracting the file into has sufficient space and write permissions. Are
you using the same file that I sent in the .zip file or is that a different
SLPK file?

Thanks,
David

On Thu, Mar 28, 2019 at 12:26 PM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> I have no trouble with this using a conda install of pdal and the
> python-pdal extension.  SLPK files are unzipped to temp space before
> they're actually read.  If you have no temp space, I could see a failure
> like this.  Make sure you have /tmp that has sufficient space to hold the
> slpk file (it's not compressed) or the TMP environment variable is set to a
> location that has sufficient space.
>
> Here's the script I used, which is yours, slightly modified:
>
> import pdal
> import numpy as np
> import sys
> import getopt
>
>
> ## TEST HARNESS
> ## TODO: begin placing some components of the test harness into functions
> ## TODO: Clean up the code in general
> ## TODO: Make sure to clean up pipeline options specifically and make it
> all more flexible and ready for various input
> if __name__ == "__main__":
>
>     filepath = "autzen.slpk"
>
>     print("Using {0}".format(filepath))
>
>     pipeline_convert_tif = """
>     {{
>         "pipeline":[
>             {{
>                 "type":"readers.slpk",
>                 "filename":"{0}"
>             }},
>             {{
>                 "type":"filters.info"
>             }}
>         ]
>     }}""".format(filepath)
>
>     # Start the pipeline work
>     pipeline = pdal.Pipeline(pipeline_convert_tif)
>     pipeline.validate() # Validate that defined pipeline is OK
>     pipeline.loglevel = 8
>     count = pipeline.execute()
>     arrays = pipeline.arrays
>     metadata = pipeline.metadata
>     print (metadata)
>     log = pipeline.log
>
> Here's the start of the output:
>
> $ python test.py
>
> Using autzen.slpk
> {
>   "metadata":
>   {
>     "":
>     [
>       {
>       },
>       {
>       }
>     ],
>     "filters.info":
>     [
>       {
>         "bbox":
>         {
>           "maxx": -123.0628514,
>           "maxy": 44.06225365,
>           "maxz": 163.62028,
>           "minx": -123.0749718,
>           "miny": 44.050197,
>           "minz": 124.16028
>         },
>         "dimensions": "X, Y, Z, Intensity, ClassFlags, Flag,
> NumberOfReturns, ReturnNumber, UserData, PointSourceId, GpsTime,
> ScanAngleRank",
>         "num_points": 106,
>         "schema":
>         {
>           "dimensions":
>           [
>             {
>               "name": "X",
>               "size": 8,
>               "type": "floating"
>             },
>             {
>               "name": "Y",
>               "size": 8,
>               "type": "floating"
>             },
> ...
>
>
> On Thu, Mar 28, 2019 at 12:16 PM David Lewis <dlewi146 at gmail.com> wrote:
>
>> I'm running this from a Bash terminal on an Ubuntu operating system.
>>
>> On Thu, Mar 28, 2019, 12:15 PM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> What platform are you using?
>>>
>>> On Thu, Mar 28, 2019 at 9:32 AM David Lewis <dlewi146 at gmail.com> wrote:
>>>
>>>> Attached is the relevant lines of code.
>>>>
>>>> On Thu, Mar 28, 2019 at 6:52 AM Andrew Bell <andrew.bell.ia at gmail.com>
>>>> wrote:
>>>>
>>>>> It would help if you would post the program that is generating the
>>>>> error.
>>>>>
>>>>> On Wed, Mar 27, 2019, 11:49 PM David Lewis <dlewi146 at gmail.com> wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I'm trying to run the SLPK reader in a pipeline I've written using
>>>>>> the Python API. I'm using the SMALL_AUTZEN_LAS_ALL.slpk file found at
>>>>>> https://github.com/PDAL/PDAL/tree/master/test/data/i3s .
>>>>>>
>>>>>> Whenever I attempt to run this via the Python script, I get an error
>>>>>> message :
>>>>>> "RuntimeError: readers.slpk: Failed to fetch info: Could not read
>>>>>> file /tmp/SMALL_AUTZEN_LAS_ALL/3dSceneLayer.json.gz"
>>>>>>
>>>>>> After looking at the code on Github, this appears to be something
>>>>>> that is called no matter when the SLPK extraction process throws an error,
>>>>>> though this could be wrong.
>>>>>>
>>>>>> I'm not trying to do anything with filters yet, I'm simply trying to
>>>>>> read in the SLPK using readers.slpk. Is this a known issue that occurs?
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> David Lewis
>>>>>> Undergraduate Imaging Science
>>>>>> Rochester Institute of Technology
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>>
>>> --
>>> Andrew Bell
>>> andrew.bell.ia at gmail.com
>>>
>>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190328/f7c2dbf2/attachment.html>

From andrew.bell.ia at gmail.com  Fri Mar 29 07:24:39 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 29 Mar 2019 10:24:39 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
 <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
 <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>
Message-ID: <CACJ51z3j8t4n9z47o1vEHGhEdD_vTi+-ej6D9+AKgkwFhC1eUg@mail.gmail.com>

On Thu, Mar 28, 2019 at 6:26 PM David Lewis <dlewi146 at gmail.com> wrote:

> I've modified my code to use "filters.info" like yours and it still is
> giving me that error.
>

I wouldn't have expected that to make any difference.  It just provided
some feedback that the data was actually loaded.


> I have also verified that the directory I am extracting the file into has
> sufficient space and write permissions. Are you using the same file that I
> sent in the .zip file or is that a different SLPK file?
>

Yes.

I don't know what the problem might be.  I suppose you have run `pdal info
SMALL_AUTZEN_LAS_All.slpk` with the same result?

Have you tried providing an absolute path when loading
SMALL_AUTZEN_LAS_ALL.slpk?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190329/dfaa49fc/attachment.html>

From dlewi146 at gmail.com  Fri Mar 29 11:25:02 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Fri, 29 Mar 2019 14:25:02 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CACJ51z3j8t4n9z47o1vEHGhEdD_vTi+-ej6D9+AKgkwFhC1eUg@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
 <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
 <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>
 <CACJ51z3j8t4n9z47o1vEHGhEdD_vTi+-ej6D9+AKgkwFhC1eUg@mail.gmail.com>
Message-ID: <CADD7pkP+mg=7wa4A1+Kzqa1n0pqzQKd2GSrt4wL3c+FRBpa2bw@mail.gmail.com>

The script still returns the same error when run with either an absolute or
relative path.

Interestingly enough, running `pdal info filename` from the command line
seems to work fine. I can likely modify my top level program to call it
from the command line from now on.

Should I just attempt to transition to using the command line from now on
or is this an error we should continue to pursue?

David



On Fri, Mar 29, 2019 at 10:24 AM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> On Thu, Mar 28, 2019 at 6:26 PM David Lewis <dlewi146 at gmail.com> wrote:
>
>> I've modified my code to use "filters.info" like yours and it still is
>> giving me that error.
>>
>
> I wouldn't have expected that to make any difference.  It just provided
> some feedback that the data was actually loaded.
>
>
>> I have also verified that the directory I am extracting the file into has
>> sufficient space and write permissions. Are you using the same file that I
>> sent in the .zip file or is that a different SLPK file?
>>
>
> Yes.
>
> I don't know what the problem might be.  I suppose you have run `pdal
> info  SMALL_AUTZEN_LAS_All.slpk` with the same result?
>
> Have you tried providing an absolute path when loading
> SMALL_AUTZEN_LAS_ALL.slpk?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190329/87501787/attachment-0001.html>

From andrew.bell.ia at gmail.com  Fri Mar 29 11:51:43 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 29 Mar 2019 14:51:43 -0400
Subject: [pdal] PDAL Release 1.9 RC1
Message-ID: <CACJ51z3uYqeKDz_=W+VNHOH7v7JGwUijrXdA5aZTn6iy2TaNjg@mail.gmail.com>

We're pleased to announce the release of PDAL 1.9 RC1.  This is a test
release which will become the 1.9 release if no significant problems are
reported.

Notable additions are support for TileDB, a writer for EPT sidecar data,
and default spatial reference support.

Note that if you build PDAL from source, you'll now need GDAL version 2.2
or greater and it should have GEOS support built-in.

You can review the release notes and download source code here:
https://github.com/PDAL/PDAL/releases/tag/1.9rc1

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190329/c1f15ba1/attachment.html>

From andrew.bell.ia at gmail.com  Fri Mar 29 11:52:35 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 29 Mar 2019 14:52:35 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CADD7pkP+mg=7wa4A1+Kzqa1n0pqzQKd2GSrt4wL3c+FRBpa2bw@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
 <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
 <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>
 <CACJ51z3j8t4n9z47o1vEHGhEdD_vTi+-ej6D9+AKgkwFhC1eUg@mail.gmail.com>
 <CADD7pkP+mg=7wa4A1+Kzqa1n0pqzQKd2GSrt4wL3c+FRBpa2bw@mail.gmail.com>
Message-ID: <CACJ51z1G3AeGKrEk9FUTTZBoAH6aro47XBC7fgQ_KV1Tjuei+g@mail.gmail.com>

It would be nice to know what's wrong.  What is the source of your PDAL
installation?

On Fri, Mar 29, 2019 at 2:25 PM David Lewis <dlewi146 at gmail.com> wrote:

> The script still returns the same error when run with either an absolute
> or relative path.
>
> Interestingly enough, running `pdal info filename` from the command line
> seems to work fine. I can likely modify my top level program to call it
> from the command line from now on.
>
> Should I just attempt to transition to using the command line from now on
> or is this an error we should continue to pursue?
>
> David
>
>
>
> On Fri, Mar 29, 2019 at 10:24 AM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> On Thu, Mar 28, 2019 at 6:26 PM David Lewis <dlewi146 at gmail.com> wrote:
>>
>>> I've modified my code to use "filters.info" like yours and it still is
>>> giving me that error.
>>>
>>
>> I wouldn't have expected that to make any difference.  It just provided
>> some feedback that the data was actually loaded.
>>
>>
>>> I have also verified that the directory I am extracting the file into
>>> has sufficient space and write permissions. Are you using the same file
>>> that I sent in the .zip file or is that a different SLPK file?
>>>
>>
>> Yes.
>>
>> I don't know what the problem might be.  I suppose you have run `pdal
>> info  SMALL_AUTZEN_LAS_All.slpk` with the same result?
>>
>> Have you tried providing an absolute path when loading
>> SMALL_AUTZEN_LAS_ALL.slpk?
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190329/93cd8358/attachment.html>

From dlewi146 at gmail.com  Fri Mar 29 13:32:00 2019
From: dlewi146 at gmail.com (David Lewis)
Date: Fri, 29 Mar 2019 16:32:00 -0400
Subject: [pdal] readers.slpk: Failed to fetch info
In-Reply-To: <CACJ51z1G3AeGKrEk9FUTTZBoAH6aro47XBC7fgQ_KV1Tjuei+g@mail.gmail.com>
References: <CADD7pkPqLEZLoBRFD+fZYPxyaseZe9n+B8ZrRW3Z27603nuzkQ@mail.gmail.com>
 <CACJ51z11XCGUvdr9_wo1KFf0NAi5eVHVed1cVTfXfEzgrQW06g@mail.gmail.com>
 <CADD7pkPv6+Ufz1zk80zrC0siaAPd_yky_5jtn6e2AmwqY-8kMg@mail.gmail.com>
 <CACJ51z2E3+g0XtibbNiHWbNWeR_Z2BETOiEjnyrjCVcV5Cv0pg@mail.gmail.com>
 <CADD7pkNbJnh7fw6Ehezh3XUuKj+wRE=Mvjnzh0QodV+kJ0vmzQ@mail.gmail.com>
 <CACJ51z0DLmgC7EYYQn3NnugZgm=KfYNDHL0wEeR88Cx=EwH7YA@mail.gmail.com>
 <CADD7pkOo+Vno4KFh8A8OhOqJjsQownT0fce8pkL1JiVMxWabPw@mail.gmail.com>
 <CACJ51z3j8t4n9z47o1vEHGhEdD_vTi+-ej6D9+AKgkwFhC1eUg@mail.gmail.com>
 <CADD7pkP+mg=7wa4A1+Kzqa1n0pqzQKd2GSrt4wL3c+FRBpa2bw@mail.gmail.com>
 <CACJ51z1G3AeGKrEk9FUTTZBoAH6aro47XBC7fgQ_KV1Tjuei+g@mail.gmail.com>
Message-ID: <CADD7pkPx+iWibqcRXBVp0St545T9EjrLufdqD0ZUW0tYPjBQpA@mail.gmail.com>

I installed PDAL through conda. I used the command "conda install
python-pdal -c conda-forge" .

On Fri, Mar 29, 2019 at 2:52 PM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> It would be nice to know what's wrong.  What is the source of your PDAL
> installation?
>
> On Fri, Mar 29, 2019 at 2:25 PM David Lewis <dlewi146 at gmail.com> wrote:
>
>> The script still returns the same error when run with either an absolute
>> or relative path.
>>
>> Interestingly enough, running `pdal info filename` from the command line
>> seems to work fine. I can likely modify my top level program to call it
>> from the command line from now on.
>>
>> Should I just attempt to transition to using the command line from now on
>> or is this an error we should continue to pursue?
>>
>> David
>>
>>
>>
>> On Fri, Mar 29, 2019 at 10:24 AM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> On Thu, Mar 28, 2019 at 6:26 PM David Lewis <dlewi146 at gmail.com> wrote:
>>>
>>>> I've modified my code to use "filters.info" like yours and it still is
>>>> giving me that error.
>>>>
>>>
>>> I wouldn't have expected that to make any difference.  It just provided
>>> some feedback that the data was actually loaded.
>>>
>>>
>>>> I have also verified that the directory I am extracting the file into
>>>> has sufficient space and write permissions. Are you using the same file
>>>> that I sent in the .zip file or is that a different SLPK file?
>>>>
>>>
>>> Yes.
>>>
>>> I don't know what the problem might be.  I suppose you have run `pdal
>>> info  SMALL_AUTZEN_LAS_All.slpk` with the same result?
>>>
>>> Have you tried providing an absolute path when loading
>>> SMALL_AUTZEN_LAS_ALL.slpk?
>>>
>>> --
>>> Andrew Bell
>>> andrew.bell.ia at gmail.com
>>>
>>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190329/e70d72cb/attachment.html>

