From thejus.kambi at gmail.com  Thu May  9 05:25:45 2019
From: thejus.kambi at gmail.com (thejus kambi)
Date: Thu, 9 May 2019 07:25:45 -0500
Subject: [pdal] Modify the resolution
Message-ID: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>

Hello,

Is there a way to modify the resolution of coordinates stored in the
LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
there a way to increase or decrease it?

Wwarm Rgards,
Thejus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190509/135cf7ce/attachment.html>

From howard at hobu.co  Thu May  9 05:41:44 2019
From: howard at hobu.co (Howard Butler)
Date: Thu, 9 May 2019 07:41:44 -0500
Subject: [pdal] Modify the resolution
In-Reply-To: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
Message-ID: <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>



> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com> wrote:
> 
> Hello,
> 
> Is there a way to modify the resolution of coordinates stored in the LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is there a way to increase or decrease it?
> 

Thejus,

You control these with the writers.las.scale_{x|y|z} options of writers.las https://pdal.io/stages/writers.las.html <https://pdal.io/stages/writers.las.html> Additionally, if you are working exclusively with LAS data, you might also issue the --writers.las.forward=all option to carry forward all metadata, including scale/offset from a single file transformation.

> pdal translate in.las out.las --writers.las.scale_x=0.001 --writers.las.scale_y=0.001 --writers.las.scale_z=0.001 --writers.las.offset_x=auto --writers.las.offset_y=auto --writers.las.offset_z=auto

> pdal translate in.las out.las --writers.las.forward=all

There are a couple of reasons why we do not default these options to always being set:

* What are we to do if the translation includes multiple files at once?
* Ambiguities that result from changing the LAS version
* What are we to do in situations where multiple LAS files are being written?

It is a surprise, but users have to be explicit about their LAS metadata settings with PDAL. Once they are, they should be able to achieve most everything they need.

Additionally, I wrote a tutorial of these issues on the website at https://pdal.io/tutorial/las.html <https://pdal.io/tutorial/las.html>

Hope this helps,

Howard


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190509/861cd1e0/attachment.html>

From thejus.kambi at gmail.com  Thu May  9 06:15:34 2019
From: thejus.kambi at gmail.com (thejus kambi)
Date: Thu, 9 May 2019 08:15:34 -0500
Subject: [pdal] Modify the resolution
In-Reply-To: <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
Message-ID: <CAN9Cm=mfJ_w6x-31ONwn2sEih25b8xT3caEjsFQmee00h82gcg@mail.gmail.com>

Hello Howard,

I apologize for the stupid question.

How is the scale value dependent on the resolution of the coordinates.
Isn't the data type for coordinates double?
I see in the help file "written value = (nominal value - offset) / scale".
so does this mean the written value is changed from double to integer when
it is being written to file?
Also, Is it limited to PDAL or LAS files in general.

Warm Regards,
Thejus






On Thu, May 9, 2019 at 7:41 AM Howard Butler <howard at hobu.co> wrote:

>
>
> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com> wrote:
>
> Hello,
>
> Is there a way to modify the resolution of coordinates stored in the
> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
> there a way to increase or decrease it?
>
>
> Thejus,
>
> You control these with the writers.las.scale_{x|y|z} options of
> writers.las https://pdal.io/stages/writers.las.html Additionally, if you
> are working exclusively with LAS data, you might also issue the
> --writers.las.forward=all option to carry forward all metadata, including
> scale/offset from a single file transformation.
>
> pdal translate in.las out.las --writers.las.scale_x=0.001
> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
> --writers.las.offset_x=auto --writers.las.offset_y=auto
> --writers.las.offset_z=auto
>
>
> pdal translate in.las out.las --writers.las.forward=all
>
>
> There are a couple of reasons why we do not default these options to
> always being set:
>
> * What are we to do if the translation includes multiple files at once?
> * Ambiguities that result from changing the LAS version
> * What are we to do in situations where multiple LAS files are being
> written?
>
> It is a surprise, but users have to be explicit about their LAS metadata
> settings with PDAL. Once they are, they should be able to achieve most
> everything they need.
>
> Additionally, I wrote a tutorial of these issues on the website at
> https://pdal.io/tutorial/las.html
>
> Hope this helps,
>
> Howard
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190509/5800600a/attachment.html>

From andrew.bell.ia at gmail.com  Thu May  9 06:36:09 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 9 May 2019 09:36:09 -0400
Subject: [pdal] Modify the resolution
In-Reply-To: <CAN9Cm=mfJ_w6x-31ONwn2sEih25b8xT3caEjsFQmee00h82gcg@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CAN9Cm=mfJ_w6x-31ONwn2sEih25b8xT3caEjsFQmee00h82gcg@mail.gmail.com>
Message-ID: <CACJ51z2cVqZ9f2Lao05WvQPN_K9Dtb2iNNEfKjNXFveza1FkAg@mail.gmail.com>

On Thu, May 9, 2019 at 9:15 AM thejus kambi <thejus.kambi at gmail.com> wrote:

> Hello Howard,
>
> I apologize for the stupid question.
>
> How is the scale value dependent on the resolution of the coordinates.
> Isn't the data type for coordinates double?
> I see in the help file "written value = (nominal value - offset) / scale".
> so does this mean the written value is changed from double to integer when
> it is being written to file?
>

Yes.  This is how the LAS file format is designed. See the specification
for details:

http://www.asprs.org/wp-content/uploads/2010/12/LAS_1_4_r13.pdf
>



> Also, Is it limited to PDAL or LAS files in general.
>

PDAL stores X/Y/Z as doubles internally.  The file representation depends
on the particular format.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190509/0b23db71/attachment.html>

From andrew.bell.ia at gmail.com  Thu May  9 10:58:53 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 9 May 2019 13:58:53 -0400
Subject: [pdal] PDAL Version 1.9.1 Release
Message-ID: <CACJ51z22aK5tTTiBnFthd-c5B5PYREyqmSr-tkQsd=yiM+ywDA@mail.gmail.com>

All,

PDAL version 1.9.1 is not available for download:

https://github.com/PDAL/PDAL/releases/tag/1.9.1

This is a bug fix release.  If you are having no issues with PDAL 1.9, you
likely do not to install version 1.9.1, but look over the release notes to
confirm.

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190509/a7a476f7/attachment.html>

From silvia.franceschi at gmail.com  Fri May 10 00:27:00 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Fri, 10 May 2019 09:27:00 +0200
Subject: [pdal] PDAL Version 1.9.1 Release
In-Reply-To: <CACJ51z22aK5tTTiBnFthd-c5B5PYREyqmSr-tkQsd=yiM+ywDA@mail.gmail.com>
References: <CACJ51z22aK5tTTiBnFthd-c5B5PYREyqmSr-tkQsd=yiM+ywDA@mail.gmail.com>
Message-ID: <CABCykqJ6ZoT59V94-2QmnJdrzg5QAF85hpJLpv9b7an0xad9fg@mail.gmail.com>

Hi Andrew,
are you planning to update also the version in Conda?
I just tried to update my PDAL environment in windows using Conda but there
are no updates available and my version is stille 1.8.

Thanks

Silvia


On Thu, May 9, 2019 at 7:59 PM Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> All,
>
> PDAL version 1.9.1 is not available for download:
>
> https://github.com/PDAL/PDAL/releases/tag/1.9.1
>
> This is a bug fix release.  If you are having no issues with PDAL 1.9, you
> likely do not to install version 1.9.1, but look over the release notes to
> confirm.
>
> Thanks,
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190510/223480ab/attachment.html>

From brad.chambers at gmail.com  Fri May 10 02:55:33 2019
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 10 May 2019 05:55:33 -0400
Subject: [pdal] PDAL Version 1.9.1 Release
In-Reply-To: <CABCykqJ6ZoT59V94-2QmnJdrzg5QAF85hpJLpv9b7an0xad9fg@mail.gmail.com>
References: <CACJ51z22aK5tTTiBnFthd-c5B5PYREyqmSr-tkQsd=yiM+ywDA@mail.gmail.com>
 <CABCykqJ6ZoT59V94-2QmnJdrzg5QAF85hpJLpv9b7an0xad9fg@mail.gmail.com>
Message-ID: <CAJyqqPz-KZaKMTvLkXi4FW4z=tbMqjr974nHERweZoZ_YxFo7Q@mail.gmail.com>

Silvia,

It has been updated already. See https://anaconda.org/conda-forge/pdal.

If you are having trouble updating, you can file a ticket at
https://github.com/conda-forge/pdal-feedstock/issues/new. Follow the
instructions, providing `conda info` and `conda list` outputs as well as
the command you were using to try to update.

Brad

On Fri, May 10, 2019 at 3:27 AM Silvia Franceschi <
silvia.franceschi at gmail.com> wrote:

> Hi Andrew,
> are you planning to update also the version in Conda?
> I just tried to update my PDAL environment in windows using Conda but
> there are no updates available and my version is stille 1.8.
>
> Thanks
>
> Silvia
>
>
> On Thu, May 9, 2019 at 7:59 PM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> All,
>>
>> PDAL version 1.9.1 is not available for download:
>>
>> https://github.com/PDAL/PDAL/releases/tag/1.9.1
>>
>> This is a bug fix release.  If you are having no issues with PDAL 1.9,
>> you likely do not to install version 1.9.1, but look over the release notes
>> to confirm.
>>
>> Thanks,
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190510/0b88675c/attachment.html>

From silvia.franceschi at gmail.com  Fri May 10 03:05:43 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Fri, 10 May 2019 12:05:43 +0200
Subject: [pdal] PDAL Version 1.9.1 Release
In-Reply-To: <CAJyqqPz-KZaKMTvLkXi4FW4z=tbMqjr974nHERweZoZ_YxFo7Q@mail.gmail.com>
References: <CACJ51z22aK5tTTiBnFthd-c5B5PYREyqmSr-tkQsd=yiM+ywDA@mail.gmail.com>
 <CABCykqJ6ZoT59V94-2QmnJdrzg5QAF85hpJLpv9b7an0xad9fg@mail.gmail.com>
 <CAJyqqPz-KZaKMTvLkXi4FW4z=tbMqjr974nHERweZoZ_YxFo7Q@mail.gmail.com>
Message-ID: <CABCykqKH2TgeHi574ZPESgmdG2MYJ6VNzTiy5u1rd6CnbcjmnQ@mail.gmail.com>

Hi Bradley,
I just opened the link you sent to me, I didn't know that I should have
done a new install for he PDAL.
For the update I usually use the command:

conda update pdal

as explained in the quickstart (https://pdal.io/quickstart.html)

I will try to do the new install even if I am a bit scared with Conda since
I am absolutely new with it... and now I am working on a windows machine...

Hear you soon!

Silvia



On Fri, May 10, 2019 at 11:55 AM Bradley Chambers <brad.chambers at gmail.com>
wrote:

> Silvia,
>
> It has been updated already. See https://anaconda.org/conda-forge/pdal.
>
> If you are having trouble updating, you can file a ticket at
> https://github.com/conda-forge/pdal-feedstock/issues/new. Follow the
> instructions, providing `conda info` and `conda list` outputs as well as
> the command you were using to try to update.
>
> Brad
>
> On Fri, May 10, 2019 at 3:27 AM Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
>> Hi Andrew,
>> are you planning to update also the version in Conda?
>> I just tried to update my PDAL environment in windows using Conda but
>> there are no updates available and my version is stille 1.8.
>>
>> Thanks
>>
>> Silvia
>>
>>
>> On Thu, May 9, 2019 at 7:59 PM Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> All,
>>>
>>> PDAL version 1.9.1 is not available for download:
>>>
>>> https://github.com/PDAL/PDAL/releases/tag/1.9.1
>>>
>>> This is a bug fix release.  If you are having no issues with PDAL 1.9,
>>> you likely do not to install version 1.9.1, but look over the release notes
>>> to confirm.
>>>
>>> Thanks,
>>>
>>> --
>>> Andrew Bell
>>> andrew.bell.ia at gmail.com
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190510/f2893b1b/attachment.html>

From silvia.franceschi at gmail.com  Sat May 11 01:01:13 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 11 May 2019 10:01:13 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
Message-ID: <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>

Dear all,
I am trying to extract the ground points from a point cloud of a
terrestrial laser scanner (TLS) in a forestry environment, but the result
is not so good as the one I got using data from ALS.
What I did is:
1. denoise the dataset using the filter.outlier and a filter.range for Z
ranges:
            "type": "filters.outlier",
            "method": "statistical",
            "multiplier": 3,
            "mean_k": 8
2. apply a filter.elm and a filter.smrf to the cleaned dataset
For the SMRF filter I used these parameters:
            "type": "filters.smrf",
            "slope":0.2,
            "window":16,
            "threshold":0.45,
            "scalar":1.2

Unfortunately the resulting ground points contain also the first part of of
the trunks of the trees, how is it possible?

I am doing some testing changing the values of the SMRF parameters but the
results are almost the same.

Do some of you have experience with such kind of data? Am I missing some
operation for filtering? Could you please help me understanding at least
where to focus the attention to try to obtain something...

Thank you in advance.

Silvia


-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/cb10f80a/attachment.html>

From silvia.franceschi at gmail.com  Sat May 11 06:27:10 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 11 May 2019 15:27:10 +0200
Subject: [pdal] Modify the resolution
In-Reply-To: <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
Message-ID: <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>

Hi Howard,
thanks for the useful information, I tried to follow your tutorial to
assign a CRS and some real world coordinates to my point cloud using these
parameters:
 "type":"writers.las",
            "a_srs": "EPSG:25832",
    "offset_x": "676686.38353",
    "offset_y": "5144012.94443",
            "filename":"output.las"

The program seems to work but if I then run an info, it seems that nothing
has changed.
Am I missing something?

Any suggestion is welcome! :-D

Silvia


On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:

>
>
> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com> wrote:
>
> Hello,
>
> Is there a way to modify the resolution of coordinates stored in the
> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
> there a way to increase or decrease it?
>
>
> Thejus,
>
> You control these with the writers.las.scale_{x|y|z} options of
> writers.las https://pdal.io/stages/writers.las.html Additionally, if you
> are working exclusively with LAS data, you might also issue the
> --writers.las.forward=all option to carry forward all metadata, including
> scale/offset from a single file transformation.
>
> pdal translate in.las out.las --writers.las.scale_x=0.001
> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
> --writers.las.offset_x=auto --writers.las.offset_y=auto
> --writers.las.offset_z=auto
>
>
> pdal translate in.las out.las --writers.las.forward=all
>
>
> There are a couple of reasons why we do not default these options to
> always being set:
>
> * What are we to do if the translation includes multiple files at once?
> * Ambiguities that result from changing the LAS version
> * What are we to do in situations where multiple LAS files are being
> written?
>
> It is a surprise, but users have to be explicit about their LAS metadata
> settings with PDAL. Once they are, they should be able to achieve most
> everything they need.
>
> Additionally, I wrote a tutorial of these issues on the website at
> https://pdal.io/tutorial/las.html
>
> Hope this helps,
>
> Howard
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/3f5d6ba9/attachment.html>

From klassen.js at gmail.com  Sat May 11 06:47:30 2019
From: klassen.js at gmail.com (James Klassen)
Date: Sat, 11 May 2019 08:47:30 -0500
Subject: [pdal] Modify the resolution
In-Reply-To: <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
Message-ID: <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>

You need to set scale_x, scale_y, and scale_z

On Sat, May 11, 2019, 08:27 Silvia Franceschi <silvia.franceschi at gmail.com>
wrote:

> Hi Howard,
> thanks for the useful information, I tried to follow your tutorial to
> assign a CRS and some real world coordinates to my point cloud using these
> parameters:
>  "type":"writers.las",
>             "a_srs": "EPSG:25832",
>     "offset_x": "676686.38353",
>     "offset_y": "5144012.94443",
>             "filename":"output.las"
>
> The program seems to work but if I then run an info, it seems that nothing
> has changed.
> Am I missing something?
>
> Any suggestion is welcome! :-D
>
> Silvia
>
>
> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>
>>
>>
>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com> wrote:
>>
>> Hello,
>>
>> Is there a way to modify the resolution of coordinates stored in the
>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>> there a way to increase or decrease it?
>>
>>
>> Thejus,
>>
>> You control these with the writers.las.scale_{x|y|z} options of
>> writers.las https://pdal.io/stages/writers.las.html Additionally, if you
>> are working exclusively with LAS data, you might also issue the
>> --writers.las.forward=all option to carry forward all metadata, including
>> scale/offset from a single file transformation.
>>
>> pdal translate in.las out.las --writers.las.scale_x=0.001
>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>> --writers.las.offset_z=auto
>>
>>
>> pdal translate in.las out.las --writers.las.forward=all
>>
>>
>> There are a couple of reasons why we do not default these options to
>> always being set:
>>
>> * What are we to do if the translation includes multiple files at once?
>> * Ambiguities that result from changing the LAS version
>> * What are we to do in situations where multiple LAS files are being
>> written?
>>
>> It is a surprise, but users have to be explicit about their LAS metadata
>> settings with PDAL. Once they are, they should be able to achieve most
>> everything they need.
>>
>> Additionally, I wrote a tutorial of these issues on the website at
>> https://pdal.io/tutorial/las.html
>>
>> Hope this helps,
>>
>> Howard
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/54dc8088/attachment.html>

From silvia.franceschi at gmail.com  Sat May 11 06:53:07 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 11 May 2019 15:53:07 +0200
Subject: [pdal] Modify the resolution
In-Reply-To: <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
 <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
Message-ID: <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>

Ok, I was just trying to do this...
just an additional question: do I have to specify also offset_z and scale_z
even if  I don't want to change z values?
So I will put
offset_z 0
scale_z 1

Thanks!

Silvia


On Sat, May 11, 2019 at 3:47 PM James Klassen <klassen.js at gmail.com> wrote:

> You need to set scale_x, scale_y, and scale_z
>
> On Sat, May 11, 2019, 08:27 Silvia Franceschi <silvia.franceschi at gmail.com>
> wrote:
>
>> Hi Howard,
>> thanks for the useful information, I tried to follow your tutorial to
>> assign a CRS and some real world coordinates to my point cloud using these
>> parameters:
>>  "type":"writers.las",
>>             "a_srs": "EPSG:25832",
>>     "offset_x": "676686.38353",
>>     "offset_y": "5144012.94443",
>>             "filename":"output.las"
>>
>> The program seems to work but if I then run an info, it seems that
>> nothing has changed.
>> Am I missing something?
>>
>> Any suggestion is welcome! :-D
>>
>> Silvia
>>
>>
>> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>>
>>>
>>>
>>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com> wrote:
>>>
>>> Hello,
>>>
>>> Is there a way to modify the resolution of coordinates stored in the
>>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>>> there a way to increase or decrease it?
>>>
>>>
>>> Thejus,
>>>
>>> You control these with the writers.las.scale_{x|y|z} options of
>>> writers.las https://pdal.io/stages/writers.las.html Additionally, if
>>> you are working exclusively with LAS data, you might also issue the
>>> --writers.las.forward=all option to carry forward all metadata, including
>>> scale/offset from a single file transformation.
>>>
>>> pdal translate in.las out.las --writers.las.scale_x=0.001
>>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>>> --writers.las.offset_z=auto
>>>
>>>
>>> pdal translate in.las out.las --writers.las.forward=all
>>>
>>>
>>> There are a couple of reasons why we do not default these options to
>>> always being set:
>>>
>>> * What are we to do if the translation includes multiple files at once?
>>> * Ambiguities that result from changing the LAS version
>>> * What are we to do in situations where multiple LAS files are being
>>> written?
>>>
>>> It is a surprise, but users have to be explicit about their LAS metadata
>>> settings with PDAL. Once they are, they should be able to achieve most
>>> everything they need.
>>>
>>> Additionally, I wrote a tutorial of these issues on the website at
>>> https://pdal.io/tutorial/las.html
>>>
>>> Hope this helps,
>>>
>>> Howard
>>>
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/54795a6d/attachment-0001.html>

From silvia.franceschi at gmail.com  Sat May 11 07:04:24 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 11 May 2019 16:04:24 +0200
Subject: [pdal] Modify the resolution
In-Reply-To: <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
 <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
 <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
Message-ID: <CABCykqLCtt1tgNvFbC0mkumOY1qSe-Nb7U8RsTSnMsqN0ZZjnA@mail.gmail.com>

So, I tried to set or not to set the z values but the problem
still persists.
In the info message of the las I can read:
offset x y z:               -676686.38352999999 -5144012.9444300001 0
min x y z:                  -80.5 -83.700000000000003 543.98000000000002
max x y z:                  82.799999999999997 84.850000000000009
591.76999999999998

So definitely the writer changed the offset to the right values but didn't
change the single coordinates... is this correct?
Any idea on what should I do to change all the coordinates?

Thanks again for your help!

Silvia





On Sat, May 11, 2019 at 3:53 PM Silvia Franceschi <
silvia.franceschi at gmail.com> wrote:

> Ok, I was just trying to do this...
> just an additional question: do I have to specify also offset_z and
> scale_z even if  I don't want to change z values?
> So I will put
> offset_z 0
> scale_z 1
>
> Thanks!
>
> Silvia
>
>
> On Sat, May 11, 2019 at 3:47 PM James Klassen <klassen.js at gmail.com>
> wrote:
>
>> You need to set scale_x, scale_y, and scale_z
>>
>> On Sat, May 11, 2019, 08:27 Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Hi Howard,
>>> thanks for the useful information, I tried to follow your tutorial to
>>> assign a CRS and some real world coordinates to my point cloud using these
>>> parameters:
>>>  "type":"writers.las",
>>>             "a_srs": "EPSG:25832",
>>>     "offset_x": "676686.38353",
>>>     "offset_y": "5144012.94443",
>>>             "filename":"output.las"
>>>
>>> The program seems to work but if I then run an info, it seems that
>>> nothing has changed.
>>> Am I missing something?
>>>
>>> Any suggestion is welcome! :-D
>>>
>>> Silvia
>>>
>>>
>>> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>>>
>>>>
>>>>
>>>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com>
>>>> wrote:
>>>>
>>>> Hello,
>>>>
>>>> Is there a way to modify the resolution of coordinates stored in the
>>>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>>>> there a way to increase or decrease it?
>>>>
>>>>
>>>> Thejus,
>>>>
>>>> You control these with the writers.las.scale_{x|y|z} options of
>>>> writers.las https://pdal.io/stages/writers.las.html Additionally, if
>>>> you are working exclusively with LAS data, you might also issue the
>>>> --writers.las.forward=all option to carry forward all metadata, including
>>>> scale/offset from a single file transformation.
>>>>
>>>> pdal translate in.las out.las --writers.las.scale_x=0.001
>>>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>>>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>>>> --writers.las.offset_z=auto
>>>>
>>>>
>>>> pdal translate in.las out.las --writers.las.forward=all
>>>>
>>>>
>>>> There are a couple of reasons why we do not default these options to
>>>> always being set:
>>>>
>>>> * What are we to do if the translation includes multiple files at once?
>>>> * Ambiguities that result from changing the LAS version
>>>> * What are we to do in situations where multiple LAS files are being
>>>> written?
>>>>
>>>> It is a surprise, but users have to be explicit about their LAS
>>>> metadata settings with PDAL. Once they are, they should be able to achieve
>>>> most everything they need.
>>>>
>>>> Additionally, I wrote a tutorial of these issues on the website at
>>>> https://pdal.io/tutorial/las.html
>>>>
>>>> Hope this helps,
>>>>
>>>> Howard
>>>>
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
>


-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/84279bad/attachment.html>

From klassen.js at gmail.com  Sat May 11 13:01:03 2019
From: klassen.js at gmail.com (James Klassen)
Date: Sat, 11 May 2019 15:01:03 -0500
Subject: [pdal] Modify the resolution
In-Reply-To: <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
 <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
 <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
Message-ID: <CAHqX794W=t+DeDhC4eLTra1M7QqC8hDUMQ2-+6g+h5NhdHiynQ@mail.gmail.com>

If you don't set Z, I believe it will use the defaults/automatically
determined values for Z.

Personally, if I like to set all 6 (x/y/z both offset and scale) if I set
any of them.  It probably doesn't make any difference, but it seems like
less room for surprises later.

On Sat, May 11, 2019, 08:53 Silvia Franceschi <silvia.franceschi at gmail.com>
wrote:

> Ok, I was just trying to do this...
> just an additional question: do I have to specify also offset_z and
> scale_z even if  I don't want to change z values?
> So I will put
> offset_z 0
> scale_z 1
>
> Thanks!
>
> Silvia
>
>
> On Sat, May 11, 2019 at 3:47 PM James Klassen <klassen.js at gmail.com>
> wrote:
>
>> You need to set scale_x, scale_y, and scale_z
>>
>> On Sat, May 11, 2019, 08:27 Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Hi Howard,
>>> thanks for the useful information, I tried to follow your tutorial to
>>> assign a CRS and some real world coordinates to my point cloud using these
>>> parameters:
>>>  "type":"writers.las",
>>>             "a_srs": "EPSG:25832",
>>>     "offset_x": "676686.38353",
>>>     "offset_y": "5144012.94443",
>>>             "filename":"output.las"
>>>
>>> The program seems to work but if I then run an info, it seems that
>>> nothing has changed.
>>> Am I missing something?
>>>
>>> Any suggestion is welcome! :-D
>>>
>>> Silvia
>>>
>>>
>>> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>>>
>>>>
>>>>
>>>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com>
>>>> wrote:
>>>>
>>>> Hello,
>>>>
>>>> Is there a way to modify the resolution of coordinates stored in the
>>>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>>>> there a way to increase or decrease it?
>>>>
>>>>
>>>> Thejus,
>>>>
>>>> You control these with the writers.las.scale_{x|y|z} options of
>>>> writers.las https://pdal.io/stages/writers.las.html Additionally, if
>>>> you are working exclusively with LAS data, you might also issue the
>>>> --writers.las.forward=all option to carry forward all metadata, including
>>>> scale/offset from a single file transformation.
>>>>
>>>> pdal translate in.las out.las --writers.las.scale_x=0.001
>>>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>>>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>>>> --writers.las.offset_z=auto
>>>>
>>>>
>>>> pdal translate in.las out.las --writers.las.forward=all
>>>>
>>>>
>>>> There are a couple of reasons why we do not default these options to
>>>> always being set:
>>>>
>>>> * What are we to do if the translation includes multiple files at once?
>>>> * Ambiguities that result from changing the LAS version
>>>> * What are we to do in situations where multiple LAS files are being
>>>> written?
>>>>
>>>> It is a surprise, but users have to be explicit about their LAS
>>>> metadata settings with PDAL. Once they are, they should be able to achieve
>>>> most everything they need.
>>>>
>>>> Additionally, I wrote a tutorial of these issues on the website at
>>>> https://pdal.io/tutorial/las.html
>>>>
>>>> Hope this helps,
>>>>
>>>> Howard
>>>>
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/0c871c6c/attachment.html>

From andrew.bell.ia at gmail.com  Sat May 11 13:13:33 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Sat, 11 May 2019 16:13:33 -0400
Subject: [pdal] Modify the resolution
In-Reply-To: <CAHqX794W=t+DeDhC4eLTra1M7QqC8hDUMQ2-+6g+h5NhdHiynQ@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
 <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
 <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
 <CAHqX794W=t+DeDhC4eLTra1M7QqC8hDUMQ2-+6g+h5NhdHiynQ@mail.gmail.com>
Message-ID: <CACJ51z0DWH0spv9jK3+DHJuS5_+mhAH7i-_uDu828gkkNEeyDQ@mail.gmail.com>

If you don't want the defaults, you need need to specify values. See the
documentation for details about default values.

On Sat, May 11, 2019, 4:01 PM James Klassen <klassen.js at gmail.com> wrote:

> If you don't set Z, I believe it will use the defaults/automatically
> determined values for Z.
>
> Personally, if I like to set all 6 (x/y/z both offset and scale) if I set
> any of them.  It probably doesn't make any difference, but it seems like
> less room for surprises later.
>
> On Sat, May 11, 2019, 08:53 Silvia Franceschi <silvia.franceschi at gmail.com>
> wrote:
>
>> Ok, I was just trying to do this...
>> just an additional question: do I have to specify also offset_z and
>> scale_z even if  I don't want to change z values?
>> So I will put
>> offset_z 0
>> scale_z 1
>>
>> Thanks!
>>
>> Silvia
>>
>>
>> On Sat, May 11, 2019 at 3:47 PM James Klassen <klassen.js at gmail.com>
>> wrote:
>>
>>> You need to set scale_x, scale_y, and scale_z
>>>
>>> On Sat, May 11, 2019, 08:27 Silvia Franceschi <
>>> silvia.franceschi at gmail.com> wrote:
>>>
>>>> Hi Howard,
>>>> thanks for the useful information, I tried to follow your tutorial to
>>>> assign a CRS and some real world coordinates to my point cloud using these
>>>> parameters:
>>>>  "type":"writers.las",
>>>>             "a_srs": "EPSG:25832",
>>>>     "offset_x": "676686.38353",
>>>>     "offset_y": "5144012.94443",
>>>>             "filename":"output.las"
>>>>
>>>> The program seems to work but if I then run an info, it seems that
>>>> nothing has changed.
>>>> Am I missing something?
>>>>
>>>> Any suggestion is welcome! :-D
>>>>
>>>> Silvia
>>>>
>>>>
>>>> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>>>>
>>>>>
>>>>>
>>>>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com>
>>>>> wrote:
>>>>>
>>>>> Hello,
>>>>>
>>>>> Is there a way to modify the resolution of coordinates stored in the
>>>>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>>>>> there a way to increase or decrease it?
>>>>>
>>>>>
>>>>> Thejus,
>>>>>
>>>>> You control these with the writers.las.scale_{x|y|z} options of
>>>>> writers.las https://pdal.io/stages/writers.las.html Additionally, if
>>>>> you are working exclusively with LAS data, you might also issue the
>>>>> --writers.las.forward=all option to carry forward all metadata, including
>>>>> scale/offset from a single file transformation.
>>>>>
>>>>> pdal translate in.las out.las --writers.las.scale_x=0.001
>>>>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>>>>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>>>>> --writers.las.offset_z=auto
>>>>>
>>>>>
>>>>> pdal translate in.las out.las --writers.las.forward=all
>>>>>
>>>>>
>>>>> There are a couple of reasons why we do not default these options to
>>>>> always being set:
>>>>>
>>>>> * What are we to do if the translation includes multiple files at once?
>>>>> * Ambiguities that result from changing the LAS version
>>>>> * What are we to do in situations where multiple LAS files are being
>>>>> written?
>>>>>
>>>>> It is a surprise, but users have to be explicit about their LAS
>>>>> metadata settings with PDAL. Once they are, they should be able to achieve
>>>>> most everything they need.
>>>>>
>>>>> Additionally, I wrote a tutorial of these issues on the website at
>>>>> https://pdal.io/tutorial/las.html
>>>>>
>>>>> Hope this helps,
>>>>>
>>>>> Howard
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>>
>>>> --
>>>> ing. Silvia Franceschi
>>>> Via Roma, 64
>>>> 38030 Castello di Fiemme (TN)
>>>>
>>>> tel: 0039 -3384501332
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190511/9cf9e19a/attachment-0001.html>

From silvia.franceschi at gmail.com  Mon May 13 00:01:50 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Mon, 13 May 2019 09:01:50 +0200
Subject: [pdal] Modify the resolution
In-Reply-To: <CACJ51z0DWH0spv9jK3+DHJuS5_+mhAH7i-_uDu828gkkNEeyDQ@mail.gmail.com>
References: <CAN9Cm=n8dz+z_vwBpoOdca5fuGgRT8POxhh5MueS7kLPZQwf6A@mail.gmail.com>
 <7DB93482-3079-4958-B160-E0691130C65B@hobu.co>
 <CABCykq+ZN-KNnAH=JGie+hoknY-v06jNGJBgf4bo1UP7cxt=xg@mail.gmail.com>
 <CAHqX794Z2JaQKMxGOP1t1Go-6zh4ZKCuifvteiqraqQbwTHemA@mail.gmail.com>
 <CABCykqK-n+X3c3s2se8R+5M5Z8rnO6rQWHWd9bvz-4VcZOCKBQ@mail.gmail.com>
 <CAHqX794W=t+DeDhC4eLTra1M7QqC8hDUMQ2-+6g+h5NhdHiynQ@mail.gmail.com>
 <CACJ51z0DWH0spv9jK3+DHJuS5_+mhAH7i-_uDu828gkkNEeyDQ@mail.gmail.com>
Message-ID: <CABCykqJ9CDrpVjLh0z8x=0KPLHJ-y+L8QTghYD4saCFhOAF5PA@mail.gmail.com>

Yess,
thanks Andrew, I tried and specified the value of scale_z to 1 to preserve
my heights.

Silvia


On Sat, May 11, 2019 at 10:13 PM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> If you don't want the defaults, you need need to specify values. See the
> documentation for details about default values.
>
> On Sat, May 11, 2019, 4:01 PM James Klassen <klassen.js at gmail.com> wrote:
>
>> If you don't set Z, I believe it will use the defaults/automatically
>> determined values for Z.
>>
>> Personally, if I like to set all 6 (x/y/z both offset and scale) if I set
>> any of them.  It probably doesn't make any difference, but it seems like
>> less room for surprises later.
>>
>> On Sat, May 11, 2019, 08:53 Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Ok, I was just trying to do this...
>>> just an additional question: do I have to specify also offset_z and
>>> scale_z even if  I don't want to change z values?
>>> So I will put
>>> offset_z 0
>>> scale_z 1
>>>
>>> Thanks!
>>>
>>> Silvia
>>>
>>>
>>> On Sat, May 11, 2019 at 3:47 PM James Klassen <klassen.js at gmail.com>
>>> wrote:
>>>
>>>> You need to set scale_x, scale_y, and scale_z
>>>>
>>>> On Sat, May 11, 2019, 08:27 Silvia Franceschi <
>>>> silvia.franceschi at gmail.com> wrote:
>>>>
>>>>> Hi Howard,
>>>>> thanks for the useful information, I tried to follow your tutorial to
>>>>> assign a CRS and some real world coordinates to my point cloud using these
>>>>> parameters:
>>>>>  "type":"writers.las",
>>>>>             "a_srs": "EPSG:25832",
>>>>>     "offset_x": "676686.38353",
>>>>>     "offset_y": "5144012.94443",
>>>>>             "filename":"output.las"
>>>>>
>>>>> The program seems to work but if I then run an info, it seems that
>>>>> nothing has changed.
>>>>> Am I missing something?
>>>>>
>>>>> Any suggestion is welcome! :-D
>>>>>
>>>>> Silvia
>>>>>
>>>>>
>>>>> On Thu, May 9, 2019 at 2:41 PM Howard Butler <howard at hobu.co> wrote:
>>>>>
>>>>>>
>>>>>>
>>>>>> On May 9, 2019, at 7:25 AM, thejus kambi <thejus.kambi at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> Is there a way to modify the resolution of coordinates stored in the
>>>>>> LAS/LAZ files. I find currently the file stores upto 2 decimal places. Is
>>>>>> there a way to increase or decrease it?
>>>>>>
>>>>>>
>>>>>> Thejus,
>>>>>>
>>>>>> You control these with the writers.las.scale_{x|y|z} options of
>>>>>> writers.las https://pdal.io/stages/writers.las.html Additionally, if
>>>>>> you are working exclusively with LAS data, you might also issue the
>>>>>> --writers.las.forward=all option to carry forward all metadata, including
>>>>>> scale/offset from a single file transformation.
>>>>>>
>>>>>> pdal translate in.las out.las --writers.las.scale_x=0.001
>>>>>> --writers.las.scale_y=0.001 --writers.las.scale_z=0.001
>>>>>> --writers.las.offset_x=auto --writers.las.offset_y=auto
>>>>>> --writers.las.offset_z=auto
>>>>>>
>>>>>>
>>>>>> pdal translate in.las out.las --writers.las.forward=all
>>>>>>
>>>>>>
>>>>>> There are a couple of reasons why we do not default these options to
>>>>>> always being set:
>>>>>>
>>>>>> * What are we to do if the translation includes multiple files at
>>>>>> once?
>>>>>> * Ambiguities that result from changing the LAS version
>>>>>> * What are we to do in situations where multiple LAS files are being
>>>>>> written?
>>>>>>
>>>>>> It is a surprise, but users have to be explicit about their LAS
>>>>>> metadata settings with PDAL. Once they are, they should be able to achieve
>>>>>> most everything they need.
>>>>>>
>>>>>> Additionally, I wrote a tutorial of these issues on the website at
>>>>>> https://pdal.io/tutorial/las.html
>>>>>>
>>>>>> Hope this helps,
>>>>>>
>>>>>> Howard
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> ing. Silvia Franceschi
>>>>> Via Roma, 64
>>>>> 38030 Castello di Fiemme (TN)
>>>>>
>>>>> tel: 0039 -3384501332
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/b976fc24/attachment.html>

From luipir at gmail.com  Mon May 13 00:23:48 2019
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 13 May 2019 09:23:48 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
Message-ID: <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>

we had similar problems with TLS in urban context regarding first part pf
the cars
you can see our strategy to clean the first PMF effect in slides from
http://slides.com/darango/deck-10-11-12-11-12#/11
to
http://slides.com/darango/deck-10-11-12-11-12#/1
<http://slides.com/darango/deck-10-11-12-11-12#/11>5

the main idea is to do noise cleaning, PMF, filter on normal, filter on
kdistance, PMF again

not clear to me if you can have a good discrimination of the ground part of
the threes using normals due to nature of these surfaces.

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Sat, 11 May 2019 at 10:01, Silvia Franceschi <silvia.franceschi at gmail.com>
wrote:

> Dear all,
> I am trying to extract the ground points from a point cloud of a
> terrestrial laser scanner (TLS) in a forestry environment, but the result
> is not so good as the one I got using data from ALS.
> What I did is:
> 1. denoise the dataset using the filter.outlier and a filter.range for Z
> ranges:
>             "type": "filters.outlier",
>             "method": "statistical",
>             "multiplier": 3,
>             "mean_k": 8
> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
> For the SMRF filter I used these parameters:
>             "type": "filters.smrf",
>             "slope":0.2,
>             "window":16,
>             "threshold":0.45,
>             "scalar":1.2
>
> Unfortunately the resulting ground points contain also the first part of
> of the trunks of the trees, how is it possible?
>
> I am doing some testing changing the values of the SMRF parameters but the
> results are almost the same.
>
> Do some of you have experience with such kind of data? Am I missing some
> operation for filtering? Could you please help me understanding at least
> where to focus the attention to try to obtain something...
>
> Thank you in advance.
>
> Silvia
>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/390d7d85/attachment.html>

From silvia.franceschi at gmail.com  Mon May 13 00:48:37 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Mon, 13 May 2019 09:48:37 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
Message-ID: <CABCykqKeOorptmqxyz466WC93c=bTs9Y_iaq6u+FNtOm2ssGDg@mail.gmail.com>

Thank you Luigi!
I will follow you suggestions, "just" have to understand clearly the
commands you referres to in the slides.
Unfortunately I didn't know that there where also commands for normal and
so on, so what I did until now is more or less what there is in slide 12.
Regarding slide 13-14, didn't even know about the existence of the
command filters.normal and filters.kdistance. I will read them carefully
and then try to apply to my dataset.
I think that I will for sure sure ask for more help, but in any case I will
let you know how it works.

Many many thanks again!!!

Silvia


On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:

> we had similar problems with TLS in urban context regarding first part pf
> the cars
> you can see our strategy to clean the first PMF effect in slides from
> http://slides.com/darango/deck-10-11-12-11-12#/11
> to
> http://slides.com/darango/deck-10-11-12-11-12#/1
> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>
> the main idea is to do noise cleaning, PMF, filter on normal, filter on
> kdistance, PMF again
>
> not clear to me if you can have a good discrimination of the ground part
> of the threes using normals due to nature of these surfaces.
>
> cheers
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Mastering QGIS 2nd Edition:
> *
> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
> * Hire me: http://goo.gl/BYRQKg
>
> **************************************************************************************************
>
>
> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
>> Dear all,
>> I am trying to extract the ground points from a point cloud of a
>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>> is not so good as the one I got using data from ALS.
>> What I did is:
>> 1. denoise the dataset using the filter.outlier and a filter.range for Z
>> ranges:
>>             "type": "filters.outlier",
>>             "method": "statistical",
>>             "multiplier": 3,
>>             "mean_k": 8
>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>> For the SMRF filter I used these parameters:
>>             "type": "filters.smrf",
>>             "slope":0.2,
>>             "window":16,
>>             "threshold":0.45,
>>             "scalar":1.2
>>
>> Unfortunately the resulting ground points contain also the first part of
>> of the trunks of the trees, how is it possible?
>>
>> I am doing some testing changing the values of the SMRF parameters but
>> the results are almost the same.
>>
>> Do some of you have experience with such kind of data? Am I missing some
>> operation for filtering? Could you please help me understanding at least
>> where to focus the attention to try to obtain something...
>>
>> Thank you in advance.
>>
>> Silvia
>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/a73ea52a/attachment-0001.html>

From andrewmcunliffe at gmail.com  Mon May 13 05:21:00 2019
From: andrewmcunliffe at gmail.com (Andrew Cunliffe)
Date: Mon, 13 May 2019 13:21:00 +0100
Subject: [pdal]  filtering duplicate points
Message-ID: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>

Dear all,

I am hoping someone might be able to help me to use PDAL to filter for
duplicate points in a point cloud.

By duplicate, I mean points that are less than a threshold distance (e.g.
0.001 m) from other points in the cloud. I'm working with
photogrammetrically-generated point clouds, in some cases ca. 20-30% of the
points are 'duplicates' so removing these has some big benefits later in
the pipeline.

I'm looking for a filter that functions like 'Remove duplicate points
<https://www.cloudcompare.org/doc/wiki/index.php?title=Remove_duplicate_points>'
in CloudCompare. I wasn't able to see anything suitable under the filters >
cull documentation, unless filters.voxelcenternearestneighbor would achieve
this with cell set to 0.001?

If anyone else thinks that a filter.duplicate function might be helpful,
I'm happy to submit a feature request via Github.

Thanks
Andy

-- 
Dr Andrew Cunliffe

Research Fellow
School of Geography
University of Exeter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/a9a3ade5/attachment.html>

From michael.smith.erdc at gmail.com  Mon May 13 05:26:28 2019
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Mon, 13 May 2019 08:26:28 -0400
Subject: [pdal] filtering duplicate points
In-Reply-To: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>
References: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>
Message-ID: <F76D3F4F-79F4-4CDE-9FD4-278FB4302A84@gmail.com>

Andrew,

 

You can use filters.sample and just set a small radius.

 

Mike

 

 

-- 

Michael Smith

Remote Sensing/GIS Center

US Army Corps of Engineers

 

 

From: pdal <pdal-bounces at lists.osgeo.org> on behalf of Andrew Cunliffe <andrewmcunliffe at gmail.com>
Date: Monday, May 13, 2019 at 8:21 AM
To: PDAL Mailing List <pdal at lists.osgeo.org>
Subject: [pdal] filtering duplicate points

 

Dear all,

 

I am hoping someone might be able to help me to use PDAL to filter for duplicate points in a point cloud. 

 

By duplicate, I mean points that are less than a threshold distance (e.g. 0.001 m) from other points in the cloud. I'm working with photogrammetrically-generated point clouds, in some cases ca. 20-30% of the points are 'duplicates' so removing these has some big benefits later in the pipeline.

 

I'm looking for a filter that functions like 'Remove duplicate points' in CloudCompare. I wasn't able to see anything suitable under the filters > cull documentation, unless filters.voxelcenternearestneighbor would achieve this with cell set to 0.001?

 

If anyone else thinks that a filter.duplicate function might be helpful, I'm happy to submit a feature request via Github.

 

Thanks

Andy


-- 

Dr Andrew Cunliffe

Research Fellow
School of Geography
University of Exeter

 

_______________________________________________ pdal mailing list pdal at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/3a2a885f/attachment.html>

From andrewmcunliffe at gmail.com  Mon May 13 05:55:20 2019
From: andrewmcunliffe at gmail.com (Andrew Cunliffe)
Date: Mon, 13 May 2019 13:55:20 +0100
Subject: [pdal] filtering duplicate points
In-Reply-To: <F76D3F4F-79F4-4CDE-9FD4-278FB4302A84@gmail.com>
References: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>
 <F76D3F4F-79F4-4CDE-9FD4-278FB4302A84@gmail.com>
Message-ID: <CAM1p0+H1sULgKu2V18GD9db2TZgnGt_C0rXh2QJjXCsvFEaZUA@mail.gmail.com>

Thanks for the suggestion Mike,

I just tried running
                        {
                            "type": "filters.sample",
                            "radius": 0.001
                        },
on a test cloud with n = 6650 points. With a 0.001 m threshold CloudCompare
removes 1782 as duplicates (ca. 27%), and makes no visible difference to
the displayed cloud, so the points removed appear genuine. However, with
the above parameters, this PDAL pipeline only removes 6 duplicates.

I wondered whether filters.sample perhaps only considers proximity in XY
space? (this isn't currently specified in the documentation
<https://pdal.io/stages/filters.sample.html>). Apologies if I have missed
something simple, I'm still learning PDAL, but I like it.

Thanks,
Andy



On Mon, 13 May 2019 at 13:26, Michael Smith <michael.smith.erdc at gmail.com>
wrote:

> Andrew,
>
>
>
> You can use filters.sample and just set a small radius.
>
>
>
> Mike
>
>
>
>
>
> --
>
> Michael Smith
>
> Remote Sensing/GIS Center
>
> US Army Corps of Engineers
>
>
>
>
>
> *From: *pdal <pdal-bounces at lists.osgeo.org> on behalf of Andrew Cunliffe <
> andrewmcunliffe at gmail.com>
> *Date: *Monday, May 13, 2019 at 8:21 AM
> *To: *PDAL Mailing List <pdal at lists.osgeo.org>
> *Subject: *[pdal] filtering duplicate points
>
>
>
> Dear all,
>
>
>
> I am hoping someone might be able to help me to use PDAL to filter for
> duplicate points in a point cloud.
>
>
>
> By duplicate, I mean points that are less than a threshold distance (e.g.
> 0.001 m) from other points in the cloud. I'm working with
> photogrammetrically-generated point clouds, in some cases ca. 20-30% of the
> points are 'duplicates' so removing these has some big benefits later in
> the pipeline.
>
>
>
> I'm looking for a filter that functions like 'Remove duplicate points
> <https://www.cloudcompare.org/doc/wiki/index.php?title=Remove_duplicate_points>'
> in CloudCompare. I wasn't able to see anything suitable under the filters >
> cull documentation, unless filters.voxelcenternearestneighbor would
> achieve this with cell set to 0.001?
>
>
>
> If anyone else thinks that a filter.duplicate function might be helpful,
> I'm happy to submit a feature request via Github.
>
>
>
> Thanks
>
> Andy
>
>
> --
>
> Dr Andrew Cunliffe
>
> Research Fellow
> School of Geography
> University of Exeter
>
>
>
> _______________________________________________ pdal mailing list
> pdal at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/pdal
>


-- 
Dr Andrew Cunliffe

Research Fellow in Dryland Carbon Dynamics
School of Geography, College of Life and Environmental Science,
University of Exeter

UoEx Profile
<http://geography.exeter.ac.uk/staff/index.php?web_id=Andy_cunliffe>
Google Scholar
<https://scholar.google.co.uk/citations?user=GEfm3PIAAAAJ&hl=en>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/b6b47da4/attachment-0001.html>

From andrew.bell.ia at gmail.com  Mon May 13 05:59:44 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 13 May 2019 08:59:44 -0400
Subject: [pdal] filtering duplicate points
In-Reply-To: <CAM1p0+H1sULgKu2V18GD9db2TZgnGt_C0rXh2QJjXCsvFEaZUA@mail.gmail.com>
References: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>
 <F76D3F4F-79F4-4CDE-9FD4-278FB4302A84@gmail.com>
 <CAM1p0+H1sULgKu2V18GD9db2TZgnGt_C0rXh2QJjXCsvFEaZUA@mail.gmail.com>
Message-ID: <CACJ51z28=DutU8B2-eA7t2mQRB2-2AFuVbdXNTFNGiJ5fKUN+w@mail.gmail.com>

filters.sample works in 3D.  I'm not sure about the difference you're
seeing.  I don't know what cloud compare is doing.  You're welcome to
submit a bug report if you have some data that you think isn't being
handled properly.

On Mon, May 13, 2019 at 8:56 AM Andrew Cunliffe <andrewmcunliffe at gmail.com>
wrote:

> Thanks for the suggestion Mike,
>
> I just tried running
>                         {
>                             "type": "filters.sample",
>                             "radius": 0.001
>                         },
> on a test cloud with n = 6650 points. With a 0.001 m threshold
> CloudCompare removes 1782 as duplicates (ca. 27%), and makes no visible
> difference to the displayed cloud, so the points removed appear genuine.
> However, with the above parameters, this PDAL pipeline only removes 6
> duplicates.
>
> I wondered whether filters.sample perhaps only considers proximity in XY
> space? (this isn't currently specified in the documentation
> <https://pdal.io/stages/filters.sample.html>). Apologies if I have missed
> something simple, I'm still learning PDAL, but I like it.
>
> Thanks,
> Andy
>
>
>
> On Mon, 13 May 2019 at 13:26, Michael Smith <michael.smith.erdc at gmail.com>
> wrote:
>
>> Andrew,
>>
>>
>>
>> You can use filters.sample and just set a small radius.
>>
>>
>>
>> Mike
>>
>>
>>
>>
>>
>> --
>>
>> Michael Smith
>>
>> Remote Sensing/GIS Center
>>
>> US Army Corps of Engineers
>>
>>
>>
>>
>>
>> *From: *pdal <pdal-bounces at lists.osgeo.org> on behalf of Andrew Cunliffe
>> <andrewmcunliffe at gmail.com>
>> *Date: *Monday, May 13, 2019 at 8:21 AM
>> *To: *PDAL Mailing List <pdal at lists.osgeo.org>
>> *Subject: *[pdal] filtering duplicate points
>>
>>
>>
>> Dear all,
>>
>>
>>
>> I am hoping someone might be able to help me to use PDAL to filter for
>> duplicate points in a point cloud.
>>
>>
>>
>> By duplicate, I mean points that are less than a threshold distance (e.g.
>> 0.001 m) from other points in the cloud. I'm working with
>> photogrammetrically-generated point clouds, in some cases ca. 20-30% of the
>> points are 'duplicates' so removing these has some big benefits later in
>> the pipeline.
>>
>>
>>
>> I'm looking for a filter that functions like 'Remove duplicate points
>> <https://www.cloudcompare.org/doc/wiki/index.php?title=Remove_duplicate_points>'
>> in CloudCompare. I wasn't able to see anything suitable under the filters >
>> cull documentation, unless filters.voxelcenternearestneighbor would
>> achieve this with cell set to 0.001?
>>
>>
>>
>> If anyone else thinks that a filter.duplicate function might be helpful,
>> I'm happy to submit a feature request via Github.
>>
>>
>>
>> Thanks
>>
>> Andy
>>
>>
>> --
>>
>> Dr Andrew Cunliffe
>>
>> Research Fellow
>> School of Geography
>> University of Exeter
>>
>>
>>
>> _______________________________________________ pdal mailing list
>> pdal at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
> --
> Dr Andrew Cunliffe
>
> Research Fellow in Dryland Carbon Dynamics
> School of Geography, College of Life and Environmental Science,
> University of Exeter
>
> UoEx Profile
> <http://geography.exeter.ac.uk/staff/index.php?web_id=Andy_cunliffe>
> Google Scholar
> <https://scholar.google.co.uk/citations?user=GEfm3PIAAAAJ&hl=en>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/8db6db95/attachment.html>

From andrew.bell.ia at gmail.com  Mon May 13 06:16:57 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 13 May 2019 09:16:57 -0400
Subject: [pdal] filtering duplicate points
In-Reply-To: <CACJ51z28=DutU8B2-eA7t2mQRB2-2AFuVbdXNTFNGiJ5fKUN+w@mail.gmail.com>
References: <CAM1p0+GeppPNyB=4MhBORJDwGOmENqQTwD9moV2CShBaBezVYQ@mail.gmail.com>
 <F76D3F4F-79F4-4CDE-9FD4-278FB4302A84@gmail.com>
 <CAM1p0+H1sULgKu2V18GD9db2TZgnGt_C0rXh2QJjXCsvFEaZUA@mail.gmail.com>
 <CACJ51z28=DutU8B2-eA7t2mQRB2-2AFuVbdXNTFNGiJ5fKUN+w@mail.gmail.com>
Message-ID: <CACJ51z1ooGCUBMCrtWQgy68zvs4+ghpuDqphF_hrqpg5Dkq-Pg@mail.gmail.com>

Andrew,

A look at the cloud compare code suggests it works very differently from
PDAL filters.sample and depends on the way that points are distributed in
an octree.  Rather than checking actual distance, CC tries to remove points
in octree cells, that may be closer than the specified distance, depending
on the octree organization.  You might try setting the distance smaller in
PDAL to see if you get results more to your liking.  (This is based on a
very cursory look at the CC code, so take it with a grain of salt.)

On Mon, May 13, 2019 at 8:59 AM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

>
> filters.sample works in 3D.  I'm not sure about the difference you're
> seeing.  I don't know what cloud compare is doing.  You're welcome to
> submit a bug report if you have some data that you think isn't being
> handled properly.
>
> On Mon, May 13, 2019 at 8:56 AM Andrew Cunliffe <andrewmcunliffe at gmail.com>
> wrote:
>
>> Thanks for the suggestion Mike,
>>
>> I just tried running
>>                         {
>>                             "type": "filters.sample",
>>                             "radius": 0.001
>>                         },
>> on a test cloud with n = 6650 points. With a 0.001 m threshold
>> CloudCompare removes 1782 as duplicates (ca. 27%), and makes no visible
>> difference to the displayed cloud, so the points removed appear genuine.
>> However, with the above parameters, this PDAL pipeline only removes 6
>> duplicates.
>>
>> I wondered whether filters.sample perhaps only considers proximity in XY
>> space? (this isn't currently specified in the documentation
>> <https://pdal.io/stages/filters.sample.html>). Apologies if I have
>> missed something simple, I'm still learning PDAL, but I like it.
>>
>> Thanks,
>> Andy
>>
>>
>>
>> On Mon, 13 May 2019 at 13:26, Michael Smith <michael.smith.erdc at gmail.com>
>> wrote:
>>
>>> Andrew,
>>>
>>>
>>>
>>> You can use filters.sample and just set a small radius.
>>>
>>>
>>>
>>> Mike
>>>
>>>
>>>
>>>
>>>
>>> --
>>>
>>> Michael Smith
>>>
>>> Remote Sensing/GIS Center
>>>
>>> US Army Corps of Engineers
>>>
>>>
>>>
>>>
>>>
>>> *From: *pdal <pdal-bounces at lists.osgeo.org> on behalf of Andrew
>>> Cunliffe <andrewmcunliffe at gmail.com>
>>> *Date: *Monday, May 13, 2019 at 8:21 AM
>>> *To: *PDAL Mailing List <pdal at lists.osgeo.org>
>>> *Subject: *[pdal] filtering duplicate points
>>>
>>>
>>>
>>> Dear all,
>>>
>>>
>>>
>>> I am hoping someone might be able to help me to use PDAL to filter for
>>> duplicate points in a point cloud.
>>>
>>>
>>>
>>> By duplicate, I mean points that are less than a threshold distance
>>> (e.g. 0.001 m) from other points in the cloud. I'm working with
>>> photogrammetrically-generated point clouds, in some cases ca. 20-30% of the
>>> points are 'duplicates' so removing these has some big benefits later in
>>> the pipeline.
>>>
>>>
>>>
>>> I'm looking for a filter that functions like 'Remove duplicate points
>>> <https://www.cloudcompare.org/doc/wiki/index.php?title=Remove_duplicate_points>'
>>> in CloudCompare. I wasn't able to see anything suitable under the filters >
>>> cull documentation, unless filters.voxelcenternearestneighbor would
>>> achieve this with cell set to 0.001?
>>>
>>>
>>>
>>> If anyone else thinks that a filter.duplicate function might be helpful,
>>> I'm happy to submit a feature request via Github.
>>>
>>>
>>>
>>> Thanks
>>>
>>> Andy
>>>
>>>
>>> --
>>>
>>> Dr Andrew Cunliffe
>>>
>>> Research Fellow
>>> School of Geography
>>> University of Exeter
>>>
>>>
>>>
>>> _______________________________________________ pdal mailing list
>>> pdal at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>
>>
>> --
>> Dr Andrew Cunliffe
>>
>> Research Fellow in Dryland Carbon Dynamics
>> School of Geography, College of Life and Environmental Science,
>> University of Exeter
>>
>> UoEx Profile
>> <http://geography.exeter.ac.uk/staff/index.php?web_id=Andy_cunliffe>
>> Google Scholar
>> <https://scholar.google.co.uk/citations?user=GEfm3PIAAAAJ&hl=en>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190513/1a1a6290/attachment-0001.html>

From 3d at kbvis.com  Thu May 16 12:40:40 2019
From: 3d at kbvis.com (KB-Vis Technologies Pvt. Ltd.)
Date: Fri, 17 May 2019 01:10:40 +0530
Subject: [pdal] Streaming versus non-streaming LAS read perfromance
Message-ID: <3827c36ef86a90a8150693d26e014f88.squirrel@mail4india.com>




Greetings,
I have a huge performance issue with reading LAS
points on large files.
I initially implemented a non-streaming read
usingPointViewSet as in the examples, and this worked fine. However
on larger LAS files e.g. a 1GB file with 150 million points, the memory
usage would go up to 15GB, and the load would take around 3-5
minutes.
Then, I switched to a streaming read
usingFixedPointTable and StreamCallbackFilter. This uses much less
memory but is VERY slow. The 150 million points take 15+ minutes to
load..The issue seems to be that memory is being allocated in increments
of 3MB, and this takes forever. tried various values for the
FixedPointTable size, but this seems to have no effect.
I would
prefer to use the streaming approach to do fast low-res partial reads etc.
and to keep the memory usage down, if only I could improve the loading
time.
I am using PDAL 1.7.2. I was wondering if I am doing something
very wrong, or whether I should just update to 1.9
Any advice would
be hugely appreciated!
many thanks,
Karthik
Bala

My code:
Original Non-Streaming
reader (FAST but memory-intensive)

	pdal::Option las_opt("filename", sFilenames[f]);

	pdal::Options las_opts;

	las_opts.add(las_opt);

	LasReader *sLasReader = new LasReader();

	sLasReader->setOptions(las_opts);

	PointTable *sTable = new PointTable();

	sLasReader->prepare(*sTable);

	PointViewSet sPointViewSet = sLasReader->execute(*sTable);

	PointViewPtr sPointView = *sPointViewSet.begin();

	Dimension::IdList sDims = sPointView->dims();

	

	int pointCount = sLasReader->getNumPoints();

	int chunkSize = pointCount / threadCount;

	

	parallel_for(0, threadCount, [&](int i) {

	

	pdal::PointId start = i*chunkSize;

	pdal::PointId end = (i == 0 || i < threadCount - 1) ? (i +
1)*chunkSize : pointCount;

	

	for (pdal::PointId idx = start; idx < end; ++idx) {

	double x = sPointView->getFieldAs<double>(Id::X, idx) -
spOffsetpunkt.x;

	double y = sPointView->getFieldAs<double>(Id::Y, idx) -
spOffsetpunkt.y;

	double z = sPointView->getFieldAs<double>(Id::Z, idx) -
spOffsetpunkt.z;

	int red = sPointView->getFieldAs<int>(Id::Red, idx);

	int green = sPointView->getFieldAs<int>(Id::Green, idx);

	int blue = sPointView->getFieldAs<int>(Id::Blue, idx);

	
		
	
		//... process point


	

	}

	});



	
Streaming Callback reader (Low memory footprint, but
SLOW):
	
		pdal::Option las_opt("filename", string(filename));
	
		pdal::Options las_opts;
	
		las_opts.add(las_opt);
	
		LasReader sLasReader;
	
		sLasReader.setOptions(las_opts);
	
		PointTable sTable;
	
		sLasReader.prepare(sTable);
	
		
	
		int pointCount = sLasReader->getNumPoints();
	
		
	
		auto cb = [&](PointRef& point) {
	
		
	
		double x = point.getFieldAs<double>(Id::X) - spOffsetpunkt.x;
	
		double y = point.getFieldAs<double>(Id::Y) - spOffsetpunkt.y;
	
		double z = point.getFieldAs<double>(Id::Z) - spOffsetpunkt.z;
	
		
	
		int red = point.getFieldAs<int>(Id::Red);
	
		int green = point.getFieldAs<int>(Id::Green);
	
		int blue = point.getFieldAs<int>(Id::Blue);
	
		
	
		//... process point
	
		
	
		return true;
	
		};
	
		
	
		pdal::Option las_opt("filename", sFilename);
	
		pdal::Options las_opts;
	
		las_opts.add(las_opt);
	
		LasReader sLasReader;
	
		sLasReader.setOptions(las_opts);
	
		
	
		FixedPointTable t(1000);
	
		StreamCallbackFilter scf;
	
		scf.setCallback(cb);
	
		scf.setInput(sLasReader);
	
		scf.prepare(t);
	
		scf.execute(t);
	
		
	
		


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190517/439474cd/attachment.html>

From andrew.bell.ia at gmail.com  Thu May 16 13:32:48 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 16 May 2019 16:32:48 -0400
Subject: [pdal] Streaming versus non-streaming LAS read perfromance
In-Reply-To: <3827c36ef86a90a8150693d26e014f88.squirrel@mail4india.com>
References: <3827c36ef86a90a8150693d26e014f88.squirrel@mail4india.com>
Message-ID: <CACJ51z3kDYX7N8XMv=GQgWUagwWQk2Rg9LruH0ET6aapNmk7xA@mail.gmail.com>

Hi,

I don't know what your problem might be.  In the past I have done timing of
stream/standard mode and they've been comparable.  I don't think we've
changed anything recently that would impact LAS reading performance unless
there's more to your code than you've shown.  I don't know what memory
would be allocated in 3MB chunks.  Generally, PDAL doesn't allocate heap
memory during the read process.

A couple of thoughts:

1) Rather than call prepare() on the stage, you can call preview().  This
returns a structure that contains the point count.  I don't think this
should have any impact on performance.
2) In order to debug, I would eliminate your processing code, whatever that
might be, just to simplify.  There are suggestions in the non-streaming
code that you are threading things in a way that we simply can't see or
analyze.

If you can pin things down better, please let me know and I can take a look.


On Thu, May 16, 2019 at 3:58 PM KB-Vis Technologies Pvt. Ltd. <3d at kbvis.com>
wrote:

> Greetings,
>
> I have a huge performance issue with reading LAS points on large files.
>
> I initially implemented a non-streaming read using PointViewSet as in the
> examples, and this worked fine. However on larger LAS files e.g. a 1GB file
> with 150 million points, the memory usage would go up to 15GB, and the load
> would take around 3-5 minutes.
>
> Then, I switched to a streaming read using FixedPointTable and
> StreamCallbackFilter. This uses much less memory but is VERY slow. The 150
> million points take 15+ minutes to load..The issue seems to be that memory
> is being allocated in increments of 3MB, and this takes forever. tried
> various values for the FixedPointTable size, but this seems to have no
> effect.
>
> I would prefer to use the streaming approach to do fast low-res partial
> reads etc. and to keep the memory usage down, if only I could improve the
> loading time.
>
> I am using PDAL 1.7.2. I was wondering if I am doing something very wrong,
> or whether I should just update to 1.9
>
> Any advice would be hugely appreciated!
>
> many thanks,
>
> Karthik Bala
>
>
>
> My code:
>
> *Original Non-Streaming reader (FAST but memory-intensive)*
> pdal::Option las_opt("filename", sFilenames[f]);
> pdal::Options las_opts;
> las_opts.add(las_opt);
> LasReader *sLasReader = new LasReader();
> sLasReader->setOptions(las_opts);
> PointTable *sTable = new PointTable();
> sLasReader->prepare(*sTable);
> PointViewSet sPointViewSet = sLasReader->execute(*sTable);
> PointViewPtr sPointView = *sPointViewSet.begin();
> Dimension::IdList sDims = sPointView->dims();
>
> int pointCount = sLasReader->getNumPoints();
> int chunkSize = pointCount / threadCount;
>
> parallel_for(0, threadCount, [&](int i) {
>
> pdal::PointId start = i*chunkSize;
> pdal::PointId end = (i == 0 || i < threadCount - 1) ? (i + 1)*chunkSize :
> pointCount;
>
> for (pdal::PointId idx = start; idx < end; ++idx) {
> double x = sPointView->getFieldAs<double>(Id::X, idx) - spOffsetpunkt.x;
> double y = sPointView->getFieldAs<double>(Id::Y, idx) - spOffsetpunkt.y;
> double z = sPointView->getFieldAs<double>(Id::Z, idx) - spOffsetpunkt.z;
> int red = sPointView->getFieldAs<int>(Id::Red, idx);
> int green = sPointView->getFieldAs<int>(Id::Green, idx);
> int blue = sPointView->getFieldAs<int>(Id::Blue, idx);
>
> //... process point
>
> }
> });
>
>
>
> *Streaming Callback reader (Low memory footprint, but SLOW):*
> pdal::Option las_opt("filename", string(filename));
> pdal::Options las_opts;
> las_opts.add(las_opt);
> LasReader sLasReader;
> sLasReader.setOptions(las_opts);
> PointTable sTable;
> sLasReader.prepare(sTable);
>
> int pointCount = sLasReader->getNumPoints();
>
> auto cb = [&](PointRef& point) {
>
> double x = point.getFieldAs<double>(Id::X) - spOffsetpunkt.x;
> double y = point.getFieldAs<double>(Id::Y) - spOffsetpunkt.y;
> double z = point.getFieldAs<double>(Id::Z) - spOffsetpunkt.z;
>
> int red = point.getFieldAs<int>(Id::Red);
> int green = point.getFieldAs<int>(Id::Green);
> int blue = point.getFieldAs<int>(Id::Blue);
>
> //... process point
>
> return true;
> };
>
> pdal::Option las_opt("filename", sFilename);
> pdal::Options las_opts;
> las_opts.add(las_opt);
> LasReader sLasReader;
> sLasReader.setOptions(las_opts);
>
> FixedPointTable t(1000);
> StreamCallbackFilter scf;
> scf.setCallback(cb);
> scf.setInput(sLasReader);
> scf.prepare(t);
> scf.execute(t);
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190516/8559255e/attachment.html>

From howard at hobu.co  Mon May 20 09:25:36 2019
From: howard at hobu.co (Howard Butler)
Date: Mon, 20 May 2019 11:25:36 -0500
Subject: [pdal] OSGeo Community Sprint Recap for PDAL
Message-ID: <BE14A347-6049-4EEB-B807-4164D580065D@hobu.co>

All,

The OSGeo Community Sprint saw a fury of activity by new and experienced developers alike to PDAL. I would like to thank everyone for attending and contributing activity to the PDAL codebase, and I thought I would highlight that activity here.

James McClain (new contributor!) added TIN'ing features to filters.hag https://github.com/PDAL/PDAL/pull/2520 <https://github.com/PDAL/PDAL/pull/2520> to make it more accurate 

Kirk McKelvey (reactivated contributor!) worked to eliminate PDAL's PCL dependency by starting development of native PCD read/write support https://github.com/PDAL/PDAL/pull/2526 <https://github.com/PDAL/PDAL/pull/2526>

Jim Klassen worked a number of E57 issues related to normal information and omitted/hidden points. https://github.com/PDAL/PDAL/pull/2530 <https://github.com/PDAL/PDAL/pull/2530> https://github.com/PDAL/PDAL/issues/2529 <https://github.com/PDAL/PDAL/issues/2529> 

Andrew Bell worked on GDAL 3.0 / PROJ 6 SRS issues that have surfaced due to PDAL's usage of coordinate system handling in those tools. He also closed a number of bugs and and pull requests.

Vaclav Petras enhanced GRASS's PDAL ingestion routines to support stream ingestion and investigated supporting pipeline operations. 

Grigory Pomadachin investigated emitting Apache Arrow data structures via the Java bindings from PDAL for use in those environments.

Brad Chambers documented the new covariancefeatures filter, removed the deprecated filters.mongus filter, and enhanced eigen operations for PDAL filters that use them.

Peter Limkilde Svendsen worked on PDAL's delaunay filter.

Thank you again for these wonderful contributions to the PDAL codebase. We had fun in Minneapolis sprinting with you. Till next time!

Howard

https://www.flickr.com/photos/jodygarnett/sets/72157708583937584/ <https://www.flickr.com/photos/jodygarnett/sets/72157708583937584/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/3a26705f/attachment.html>

From himatsumoto at ucsd.edu  Mon May 20 12:18:46 2019
From: himatsumoto at ucsd.edu (Hironori Matsumoto)
Date: Mon, 20 May 2019 12:18:46 -0700
Subject: [pdal] Readers.rxp
Message-ID: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>

Hello,

I have recently installed pdal (1.9.1) using Conda to use 'readers.rxp'.
However, I encountered an error ("Couldn't create reader stage of type...
") when I tried to use it. I also found no driver installed for
'readers.rxp'. Do I miss anything? I'd appreciate any comment/suggestion.

Regards,
Hiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/829b6240/attachment.html>

From howard at hobu.co  Mon May 20 12:20:55 2019
From: howard at hobu.co (Howard Butler)
Date: Mon, 20 May 2019 14:20:55 -0500
Subject: [pdal] Readers.rxp
In-Reply-To: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
References: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
Message-ID: <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>



> On May 20, 2019, at 2:18 PM, Hironori Matsumoto <himatsumoto at ucsd.edu> wrote:
> 
> Hello,
> 
> I have recently installed pdal (1.9.1) using Conda to use 'readers.rxp'. However, I encountered an error ("Couldn't create reader stage of type... ") when I tried to use it. I also found no driver installed for 'readers.rxp'. Do I miss anything? I'd appreciate any comment/suggestion.

Hiro,

The RXP driver is not installable via Conda. You will have to build it yourself with your own access to the RIEGL SDK.

Howard


From brad.chambers at gmail.com  Mon May 20 12:22:03 2019
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon, 20 May 2019 15:22:03 -0400
Subject: [pdal] Readers.rxp
In-Reply-To: <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>
References: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
 <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>
Message-ID: <CAJyqqPyRekB4s7b+f-F5RHBOxp43LQZq_E7C5u+5KwPX-8nuCQ@mail.gmail.com>

https://pdal.io/stages/readers.rxp.html#installation has a little more info
on the install process.

On Mon, May 20, 2019 at 3:20 PM Howard Butler <howard at hobu.co> wrote:

>
>
> > On May 20, 2019, at 2:18 PM, Hironori Matsumoto <himatsumoto at ucsd.edu>
> wrote:
> >
> > Hello,
> >
> > I have recently installed pdal (1.9.1) using Conda to use 'readers.rxp'.
> However, I encountered an error ("Couldn't create reader stage of type...
> ") when I tried to use it. I also found no driver installed for
> 'readers.rxp'. Do I miss anything? I'd appreciate any comment/suggestion.
>
> Hiro,
>
> The RXP driver is not installable via Conda. You will have to build it
> yourself with your own access to the RIEGL SDK.
>
> Howard
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/e66c09fb/attachment.html>

From himatsumoto at ucsd.edu  Mon May 20 12:33:24 2019
From: himatsumoto at ucsd.edu (Hironori Matsumoto)
Date: Mon, 20 May 2019 12:33:24 -0700
Subject: [pdal] Readers.rxp
In-Reply-To: <CAJyqqPyRekB4s7b+f-F5RHBOxp43LQZq_E7C5u+5KwPX-8nuCQ@mail.gmail.com>
References: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
 <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>
 <CAJyqqPyRekB4s7b+f-F5RHBOxp43LQZq_E7C5u+5KwPX-8nuCQ@mail.gmail.com>
Message-ID: <CAMwWkikccqCSeo1CspXRAH+j-NWrTtfCVY9RSLg7r8kchoDwdw@mail.gmail.com>

Thank you Howard and Bradley. I guess I do not understand how you build
PDAL with RiVLiB library. Can I somehow see the link here (
https://pdal.io/compilation/unix.html#configure-your-optional-libraries)? I
cannot see the page because of an unknown error...

Thanks,
Hiro

On Mon, May 20, 2019 at 12:22 PM Bradley Chambers <brad.chambers at gmail.com>
wrote:

> https://pdal.io/stages/readers.rxp.html#installation has a little more
> info on the install process.
>
> On Mon, May 20, 2019 at 3:20 PM Howard Butler <howard at hobu.co> wrote:
>
>>
>>
>> > On May 20, 2019, at 2:18 PM, Hironori Matsumoto <himatsumoto at ucsd.edu>
>> wrote:
>> >
>> > Hello,
>> >
>> > I have recently installed pdal (1.9.1) using Conda to use
>> 'readers.rxp'. However, I encountered an error ("Couldn't create reader
>> stage of type... ") when I tried to use it. I also found no driver
>> installed for 'readers.rxp'. Do I miss anything? I'd appreciate any
>> comment/suggestion.
>>
>> Hiro,
>>
>> The RXP driver is not installable via Conda. You will have to build it
>> yourself with your own access to the RIEGL SDK.
>>
>> Howard
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/3dd4b0b9/attachment.html>

From michael.smith.erdc at gmail.com  Mon May 20 12:35:53 2019
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Mon, 20 May 2019 15:35:53 -0400
Subject: [pdal] Readers.rxp
In-Reply-To: <CAMwWkikccqCSeo1CspXRAH+j-NWrTtfCVY9RSLg7r8kchoDwdw@mail.gmail.com>
References: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
 <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>
 <CAJyqqPyRekB4s7b+f-F5RHBOxp43LQZq_E7C5u+5KwPX-8nuCQ@mail.gmail.com>
 <CAMwWkikccqCSeo1CspXRAH+j-NWrTtfCVY9RSLg7r8kchoDwdw@mail.gmail.com>
Message-ID: <CC1CFA31-ED65-4DEB-9C3B-5E60C3CD58DA@gmail.com>

Hiro,

 

Use this link https://pdal.io/development/compilation/unix.html#dependencies

 

 

-- 

Michael Smith

Remote Sensing/GIS Center

US Army Corps of Engineers

 

 

 

From: pdal <pdal-bounces at lists.osgeo.org> on behalf of Hironori Matsumoto <himatsumoto at ucsd.edu>
Date: Monday, May 20, 2019 at 3:33 PM
To: Bradley Chambers <brad.chambers at gmail.com>
Cc: pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Readers.rxp

 

Thank you Howard and Bradley. I guess I do not understand how you build PDAL with RiVLiB library. Can I somehow see the link here (https://pdal.io/compilation/unix.html#configure-your-optional-libraries)? I cannot see the page because of an unknown error...

 

Thanks,
Hiro

 

On Mon, May 20, 2019 at 12:22 PM Bradley Chambers <brad.chambers at gmail.com> wrote:

https://pdal.io/stages/readers.rxp.html#installation has a little more info on the install process.

 

On Mon, May 20, 2019 at 3:20 PM Howard Butler <howard at hobu.co> wrote:



> On May 20, 2019, at 2:18 PM, Hironori Matsumoto <himatsumoto at ucsd.edu> wrote:
> 
> Hello,
> 
> I have recently installed pdal (1.9.1) using Conda to use 'readers.rxp'. However, I encountered an error ("Couldn't create reader stage of type... ") when I tried to use it. I also found no driver installed for 'readers.rxp'. Do I miss anything? I'd appreciate any comment/suggestion.

Hiro,

The RXP driver is not installable via Conda. You will have to build it yourself with your own access to the RIEGL SDK.

Howard

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal

_______________________________________________ pdal mailing list pdal at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/3bf8e9fb/attachment-0001.html>

From andrew.bell.ia at gmail.com  Mon May 20 12:35:55 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 20 May 2019 15:35:55 -0400
Subject: [pdal] Readers.rxp
In-Reply-To: <CAMwWkikccqCSeo1CspXRAH+j-NWrTtfCVY9RSLg7r8kchoDwdw@mail.gmail.com>
References: <CAMwWki=SvVn25rW8Gq=tMmAzdMSgYq+O2+E2hXG3yDCqs0BLHw@mail.gmail.com>
 <A7CCB08F-AB3B-4B42-97CA-AA9B02EC484E@hobu.co>
 <CAJyqqPyRekB4s7b+f-F5RHBOxp43LQZq_E7C5u+5KwPX-8nuCQ@mail.gmail.com>
 <CAMwWkikccqCSeo1CspXRAH+j-NWrTtfCVY9RSLg7r8kchoDwdw@mail.gmail.com>
Message-ID: <CACJ51z3y5hczwTOup=ogcA+Q9cA++XEdHsuM=AXAM75h_r6MLQ@mail.gmail.com>

Try: https://pdal.io/development/compilation/unix.html

On Mon, May 20, 2019 at 3:33 PM Hironori Matsumoto <himatsumoto at ucsd.edu>
wrote:

> Thank you Howard and Bradley. I guess I do not understand how you build
> PDAL with RiVLiB library. Can I somehow see the link here (
> https://pdal.io/compilation/unix.html#configure-your-optional-libraries)?
> I cannot see the page because of an unknown error...
>
> Thanks,
> Hiro
>
> On Mon, May 20, 2019 at 12:22 PM Bradley Chambers <brad.chambers at gmail.com>
> wrote:
>
>> https://pdal.io/stages/readers.rxp.html#installation has a little more
>> info on the install process.
>>
>> On Mon, May 20, 2019 at 3:20 PM Howard Butler <howard at hobu.co> wrote:
>>
>>>
>>>
>>> > On May 20, 2019, at 2:18 PM, Hironori Matsumoto <himatsumoto at ucsd.edu>
>>> wrote:
>>> >
>>> > Hello,
>>> >
>>> > I have recently installed pdal (1.9.1) using Conda to use
>>> 'readers.rxp'. However, I encountered an error ("Couldn't create reader
>>> stage of type... ") when I tried to use it. I also found no driver
>>> installed for 'readers.rxp'. Do I miss anything? I'd appreciate any
>>> comment/suggestion.
>>>
>>> Hiro,
>>>
>>> The RXP driver is not installable via Conda. You will have to build it
>>> yourself with your own access to the RIEGL SDK.
>>>
>>> Howard
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/12c5ada4/attachment.html>

From thejus.kambi at gmail.com  Mon May 20 15:52:44 2019
From: thejus.kambi at gmail.com (thejus kambi)
Date: Mon, 20 May 2019 17:52:44 -0500
Subject: [pdal] write eigenvalues to las
Message-ID: <CAN9Cm=nCeOFBESPdSVLoR48+ur-JryxwQL4cm_q5rO9VhjKn1w@mail.gmail.com>

Hello,

Can anyone direct me, how to add eigenvalues in las files. I tried
following json file and it did not work.

[
{
"type":"filters.eigenvalues",
"knn":10
},
{
"type":"writers.las",
"extra_dims":"Eigenvalue0=double_t,Eigenvalue1=double_t,Eigenvalue2=double_t"
}
]

Warm Regards,
Thejus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190520/7a2e206c/attachment.html>

From silvia.franceschi at gmail.com  Sat May 25 13:16:54 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 25 May 2019 22:16:54 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
Message-ID: <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>

Dear Luigi,
finally I could start to work again on the DTM extraction and I was trying
to apply the same commands as in your slides.
Unfortunately I am not so smart to understand how to do this kind of
assignment in a PDAL pipeline:

- normalZ [0:0.6] : Classification ->1
- normalZ ! [0:0.6] : Classification ->2
- merge soil / no soil

I tried using the filter.assign but it seems that I can not assign values
of a field while filtering on an other field.
And also I can not understand what you mean with merge soil/no soil...

The pipeline I did is like this:

{
    "pipeline": [
{
            "type": "readers.las",
            "filename":"aaa.las"
        },
{
            "type":"filters.range",
            "limits":"Classification[2:2]"
        },
{
            "type":"filters.normal",
            "knn": 30
    },
{
            "type":"filters.assign",
            "assignment" : "normalZ[0:6]=Classification[2]",
            "assignment" : "normalZ[0:6]!=Classification[1]"
    },
        {
            "type": "writers.las",
            "filename":"bbb.las"
        }
    ]
}

Could you please address me to the right commands to use to finalize the
pipeline?

Thank you for the big help!

Best regards

Silvia




On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:

> we had similar problems with TLS in urban context regarding first part pf
> the cars
> you can see our strategy to clean the first PMF effect in slides from
> http://slides.com/darango/deck-10-11-12-11-12#/11
> to
> http://slides.com/darango/deck-10-11-12-11-12#/1
> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>
> the main idea is to do noise cleaning, PMF, filter on normal, filter on
> kdistance, PMF again
>
> not clear to me if you can have a good discrimination of the ground part
> of the threes using normals due to nature of these surfaces.
>
> cheers
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Mastering QGIS 2nd Edition:
> *
> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
> * Hire me: http://goo.gl/BYRQKg
>
> **************************************************************************************************
>
>
> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
>> Dear all,
>> I am trying to extract the ground points from a point cloud of a
>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>> is not so good as the one I got using data from ALS.
>> What I did is:
>> 1. denoise the dataset using the filter.outlier and a filter.range for Z
>> ranges:
>>             "type": "filters.outlier",
>>             "method": "statistical",
>>             "multiplier": 3,
>>             "mean_k": 8
>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>> For the SMRF filter I used these parameters:
>>             "type": "filters.smrf",
>>             "slope":0.2,
>>             "window":16,
>>             "threshold":0.45,
>>             "scalar":1.2
>>
>> Unfortunately the resulting ground points contain also the first part of
>> of the trunks of the trees, how is it possible?
>>
>> I am doing some testing changing the values of the SMRF parameters but
>> the results are almost the same.
>>
>> Do some of you have experience with such kind of data? Am I missing some
>> operation for filtering? Could you please help me understanding at least
>> where to focus the attention to try to obtain something...
>>
>> Thank you in advance.
>>
>> Silvia
>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190525/7dfdf685/attachment.html>

From silvia.franceschi at gmail.com  Sat May 25 13:39:55 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sat, 25 May 2019 22:39:55 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
Message-ID: <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>

Sorry Luigi...
I realized that the filter to use is the filter.ferry with a pipeline like
this:
 {
            "type":"filters.ferry",
            "dimensions":"NormalZ[0:6]=>Classification[2]"
    },
or at least, I guess because now I have the problem that the NormalZ field
do not exist. So my question is: should I write the file after
filter.normal to have this field or is it possible to use it in the same
pipeline? from the documentation it seems that it should be possible but I
can not find an example or something which could help...
If I have to write the file, should I specify also to insert the NormalZ
field or is it automatic?

Thank you in advance for the help!

Best regards

Silvia




On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
silvia.franceschi at gmail.com> wrote:

> Dear Luigi,
> finally I could start to work again on the DTM extraction and I was trying
> to apply the same commands as in your slides.
> Unfortunately I am not so smart to understand how to do this kind of
> assignment in a PDAL pipeline:
>
> - normalZ [0:0.6] : Classification ->1
> - normalZ ! [0:0.6] : Classification ->2
> - merge soil / no soil
>
> I tried using the filter.assign but it seems that I can not assign values
> of a field while filtering on an other field.
> And also I can not understand what you mean with merge soil/no soil...
>
> The pipeline I did is like this:
>
> {
>     "pipeline": [
> {
>             "type": "readers.las",
>             "filename":"aaa.las"
>         },
> {
>             "type":"filters.range",
>             "limits":"Classification[2:2]"
>         },
> {
>             "type":"filters.normal",
>             "knn": 30
>     },
> {
>             "type":"filters.assign",
>             "assignment" : "normalZ[0:6]=Classification[2]",
>             "assignment" : "normalZ[0:6]!=Classification[1]"
>     },
>         {
>             "type": "writers.las",
>             "filename":"bbb.las"
>         }
>     ]
> }
>
> Could you please address me to the right commands to use to finalize the
> pipeline?
>
> Thank you for the big help!
>
> Best regards
>
> Silvia
>
>
>
>
> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:
>
>> we had similar problems with TLS in urban context regarding first part pf
>> the cars
>> you can see our strategy to clean the first PMF effect in slides from
>> http://slides.com/darango/deck-10-11-12-11-12#/11
>> to
>> http://slides.com/darango/deck-10-11-12-11-12#/1
>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>
>> the main idea is to do noise cleaning, PMF, filter on normal, filter on
>> kdistance, PMF again
>>
>> not clear to me if you can have a good discrimination of the ground part
>> of the threes using normals due to nature of these surfaces.
>>
>> cheers
>>
>> Luigi Pirelli
>>
>>
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Mastering QGIS 2nd Edition:
>> *
>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>> * Hire me: http://goo.gl/BYRQKg
>>
>> **************************************************************************************************
>>
>>
>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Dear all,
>>> I am trying to extract the ground points from a point cloud of a
>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>> is not so good as the one I got using data from ALS.
>>> What I did is:
>>> 1. denoise the dataset using the filter.outlier and a filter.range for Z
>>> ranges:
>>>             "type": "filters.outlier",
>>>             "method": "statistical",
>>>             "multiplier": 3,
>>>             "mean_k": 8
>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>> For the SMRF filter I used these parameters:
>>>             "type": "filters.smrf",
>>>             "slope":0.2,
>>>             "window":16,
>>>             "threshold":0.45,
>>>             "scalar":1.2
>>>
>>> Unfortunately the resulting ground points contain also the first part of
>>> of the trunks of the trees, how is it possible?
>>>
>>> I am doing some testing changing the values of the SMRF parameters but
>>> the results are almost the same.
>>>
>>> Do some of you have experience with such kind of data? Am I missing some
>>> operation for filtering? Could you please help me understanding at least
>>> where to focus the attention to try to obtain something...
>>>
>>> Thank you in advance.
>>>
>>> Silvia
>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
>


-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190525/5fc664a0/attachment-0001.html>

From luipir at gmail.com  Sun May 26 01:38:29 2019
From: luipir at gmail.com (Luigi Pirelli)
Date: Sun, 26 May 2019 10:38:29 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
Message-ID: <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>

writer LAS does not write automatically any field that is not specified by
LAS format => extra_dims option of writers.las have to be set... eg.
"extra_dims":"all"

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Sat, 25 May 2019 at 22:40, Silvia Franceschi <silvia.franceschi at gmail.com>
wrote:

> Sorry Luigi...
> I realized that the filter to use is the filter.ferry with a pipeline like
> this:
>  {
>             "type":"filters.ferry",
>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>     },
> or at least, I guess because now I have the problem that the NormalZ field
> do not exist. So my question is: should I write the file after
> filter.normal to have this field or is it possible to use it in the same
> pipeline? from the documentation it seems that it should be possible but I
> can not find an example or something which could help...
> If I have to write the file, should I specify also to insert the NormalZ
> field or is it automatic?
>
> Thank you in advance for the help!
>
> Best regards
>
> Silvia
>
>
>
>
> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
>> Dear Luigi,
>> finally I could start to work again on the DTM extraction and I was
>> trying to apply the same commands as in your slides.
>> Unfortunately I am not so smart to understand how to do this kind of
>> assignment in a PDAL pipeline:
>>
>> - normalZ [0:0.6] : Classification ->1
>> - normalZ ! [0:0.6] : Classification ->2
>> - merge soil / no soil
>>
>> I tried using the filter.assign but it seems that I can not assign values
>> of a field while filtering on an other field.
>> And also I can not understand what you mean with merge soil/no soil...
>>
>> The pipeline I did is like this:
>>
>> {
>>     "pipeline": [
>> {
>>             "type": "readers.las",
>>             "filename":"aaa.las"
>>         },
>> {
>>             "type":"filters.range",
>>             "limits":"Classification[2:2]"
>>         },
>> {
>>             "type":"filters.normal",
>>             "knn": 30
>>     },
>> {
>>             "type":"filters.assign",
>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>     },
>>         {
>>             "type": "writers.las",
>>             "filename":"bbb.las"
>>         }
>>     ]
>> }
>>
>> Could you please address me to the right commands to use to finalize the
>> pipeline?
>>
>> Thank you for the big help!
>>
>> Best regards
>>
>> Silvia
>>
>>
>>
>>
>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>
>>> we had similar problems with TLS in urban context regarding first part
>>> pf the cars
>>> you can see our strategy to clean the first PMF effect in slides from
>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>> to
>>> http://slides.com/darango/deck-10-11-12-11-12#/1
>>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>>
>>> the main idea is to do noise cleaning, PMF, filter on normal, filter on
>>> kdistance, PMF again
>>>
>>> not clear to me if you can have a good discrimination of the ground part
>>> of the threes using normals due to nature of these surfaces.
>>>
>>> cheers
>>>
>>> Luigi Pirelli
>>>
>>>
>>> **************************************************************************************************
>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>>> * GitHub: https://github.com/luipir
>>> * Mastering QGIS 2nd Edition:
>>> *
>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>> * Hire me: http://goo.gl/BYRQKg
>>>
>>> **************************************************************************************************
>>>
>>>
>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>>> silvia.franceschi at gmail.com> wrote:
>>>
>>>> Dear all,
>>>> I am trying to extract the ground points from a point cloud of a
>>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>>> is not so good as the one I got using data from ALS.
>>>> What I did is:
>>>> 1. denoise the dataset using the filter.outlier and a filter.range for
>>>> Z ranges:
>>>>             "type": "filters.outlier",
>>>>             "method": "statistical",
>>>>             "multiplier": 3,
>>>>             "mean_k": 8
>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>> For the SMRF filter I used these parameters:
>>>>             "type": "filters.smrf",
>>>>             "slope":0.2,
>>>>             "window":16,
>>>>             "threshold":0.45,
>>>>             "scalar":1.2
>>>>
>>>> Unfortunately the resulting ground points contain also the first part
>>>> of of the trunks of the trees, how is it possible?
>>>>
>>>> I am doing some testing changing the values of the SMRF parameters but
>>>> the results are almost the same.
>>>>
>>>> Do some of you have experience with such kind of data? Am I missing
>>>> some operation for filtering? Could you please help me understanding at
>>>> least where to focus the attention to try to obtain something...
>>>>
>>>> Thank you in advance.
>>>>
>>>> Silvia
>>>>
>>>>
>>>> --
>>>> ing. Silvia Franceschi
>>>> Via Roma, 64
>>>> 38030 Castello di Fiemme (TN)
>>>>
>>>> tel: 0039 -3384501332
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>>
>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190526/ea00259a/attachment.html>

From silvia.franceschi at gmail.com  Sun May 26 06:46:18 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sun, 26 May 2019 15:46:18 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
 <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
Message-ID: <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>

Thank you Luigi,
so the only possibility to access to the values of NormalZ is by writing
them into the LAS?
The documentation says: "The filter produces four new dimensions (NormalX,
NormalY, NormalZ, and Curvature), which can be analyzed directly, or
consumed by downstream stages for more advanced filtering."

Is it possible to access these new variables via pipeline without writing
and reading them from LAS?

Thanks

Silvia




On Sun, May 26, 2019 at 10:38 AM Luigi Pirelli <luipir at gmail.com> wrote:

> writer LAS does not write automatically any field that is not specified by
> LAS format => extra_dims option of writers.las have to be set... eg.
> "extra_dims":"all"
>
> cheers
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Mastering QGIS 2nd Edition:
> *
> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
> * Hire me: http://goo.gl/BYRQKg
>
> **************************************************************************************************
>
>
> On Sat, 25 May 2019 at 22:40, Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
>> Sorry Luigi...
>> I realized that the filter to use is the filter.ferry with a pipeline
>> like this:
>>  {
>>             "type":"filters.ferry",
>>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>>     },
>> or at least, I guess because now I have the problem that the NormalZ
>> field do not exist. So my question is: should I write the file after
>> filter.normal to have this field or is it possible to use it in the same
>> pipeline? from the documentation it seems that it should be possible but I
>> can not find an example or something which could help...
>> If I have to write the file, should I specify also to insert the NormalZ
>> field or is it automatic?
>>
>> Thank you in advance for the help!
>>
>> Best regards
>>
>> Silvia
>>
>>
>>
>>
>> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Dear Luigi,
>>> finally I could start to work again on the DTM extraction and I was
>>> trying to apply the same commands as in your slides.
>>> Unfortunately I am not so smart to understand how to do this kind of
>>> assignment in a PDAL pipeline:
>>>
>>> - normalZ [0:0.6] : Classification ->1
>>> - normalZ ! [0:0.6] : Classification ->2
>>> - merge soil / no soil
>>>
>>> I tried using the filter.assign but it seems that I can not assign
>>> values of a field while filtering on an other field.
>>> And also I can not understand what you mean with merge soil/no soil...
>>>
>>> The pipeline I did is like this:
>>>
>>> {
>>>     "pipeline": [
>>> {
>>>             "type": "readers.las",
>>>             "filename":"aaa.las"
>>>         },
>>> {
>>>             "type":"filters.range",
>>>             "limits":"Classification[2:2]"
>>>         },
>>> {
>>>             "type":"filters.normal",
>>>             "knn": 30
>>>     },
>>> {
>>>             "type":"filters.assign",
>>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>>     },
>>>         {
>>>             "type": "writers.las",
>>>             "filename":"bbb.las"
>>>         }
>>>     ]
>>> }
>>>
>>> Could you please address me to the right commands to use to finalize the
>>> pipeline?
>>>
>>> Thank you for the big help!
>>>
>>> Best regards
>>>
>>> Silvia
>>>
>>>
>>>
>>>
>>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>>
>>>> we had similar problems with TLS in urban context regarding first part
>>>> pf the cars
>>>> you can see our strategy to clean the first PMF effect in slides from
>>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>>> to
>>>> http://slides.com/darango/deck-10-11-12-11-12#/1
>>>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>>>
>>>> the main idea is to do noise cleaning, PMF, filter on normal, filter on
>>>> kdistance, PMF again
>>>>
>>>> not clear to me if you can have a good discrimination of the ground
>>>> part of the threes using normals due to nature of these surfaces.
>>>>
>>>> cheers
>>>>
>>>> Luigi Pirelli
>>>>
>>>>
>>>> **************************************************************************************************
>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>> * GitHub: https://github.com/luipir
>>>> * Mastering QGIS 2nd Edition:
>>>> *
>>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>> * Hire me: http://goo.gl/BYRQKg
>>>>
>>>> **************************************************************************************************
>>>>
>>>>
>>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>>>> silvia.franceschi at gmail.com> wrote:
>>>>
>>>>> Dear all,
>>>>> I am trying to extract the ground points from a point cloud of a
>>>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>>>> is not so good as the one I got using data from ALS.
>>>>> What I did is:
>>>>> 1. denoise the dataset using the filter.outlier and a filter.range for
>>>>> Z ranges:
>>>>>             "type": "filters.outlier",
>>>>>             "method": "statistical",
>>>>>             "multiplier": 3,
>>>>>             "mean_k": 8
>>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>>> For the SMRF filter I used these parameters:
>>>>>             "type": "filters.smrf",
>>>>>             "slope":0.2,
>>>>>             "window":16,
>>>>>             "threshold":0.45,
>>>>>             "scalar":1.2
>>>>>
>>>>> Unfortunately the resulting ground points contain also the first part
>>>>> of of the trunks of the trees, how is it possible?
>>>>>
>>>>> I am doing some testing changing the values of the SMRF parameters but
>>>>> the results are almost the same.
>>>>>
>>>>> Do some of you have experience with such kind of data? Am I missing
>>>>> some operation for filtering? Could you please help me understanding at
>>>>> least where to focus the attention to try to obtain something...
>>>>>
>>>>> Thank you in advance.
>>>>>
>>>>> Silvia
>>>>>
>>>>>
>>>>> --
>>>>> ing. Silvia Franceschi
>>>>> Via Roma, 64
>>>>> 38030 Castello di Fiemme (TN)
>>>>>
>>>>> tel: 0039 -3384501332
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>>
>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190526/a0d34c57/attachment-0001.html>

From michael.smith.erdc at gmail.com  Sun May 26 07:06:22 2019
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Sun, 26 May 2019 10:06:22 -0400
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
 <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
 <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>
Message-ID: <07F70681-8077-4F51-A72C-A6CB0D0B712E@gmail.com>

Yes, you can use the new dimensions in filters after the ferry filter. You just cant persist them in the output file without the extra dims parameter as they are not standard las dimensions. 

Michael Smith
RSGIS center
US Army Corps 

> On May 26, 2019, at 9:46 AM, Silvia Franceschi <silvia.franceschi at gmail.com> wrote:
> 
> Thank you Luigi,
> so the only possibility to access to the values of NormalZ is by writing them into the LAS?
> The documentation says: "The filter produces four new dimensions (NormalX, NormalY, NormalZ, and Curvature), which can be analyzed directly, or consumed by downstream stages for more advanced filtering."
> 
> Is it possible to access these new variables via pipeline without writing and reading them from LAS?
> 
> Thanks
> 
> Silvia
> 
> 
> 
> 
>> On Sun, May 26, 2019 at 10:38 AM Luigi Pirelli <luipir at gmail.com> wrote:
>> writer LAS does not write automatically any field that is not specified by LAS format => extra_dims option of writers.las have to be set... eg. "extra_dims":"all"
>> 
>> cheers
>> 
>> Luigi Pirelli
>> 
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Mastering QGIS 2nd Edition:
>> * https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>> * Hire me: http://goo.gl/BYRQKg
>> **************************************************************************************************
>> 
>> 
>>> On Sat, 25 May 2019 at 22:40, Silvia Franceschi <silvia.franceschi at gmail.com> wrote:
>>> Sorry Luigi...
>>> I realized that the filter to use is the filter.ferry with a pipeline like this:
>>>  {
>>>             "type":"filters.ferry",
>>>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>>>     },
>>> or at least, I guess because now I have the problem that the NormalZ field do not exist. So my question is: should I write the file after filter.normal to have this field or is it possible to use it in the same pipeline? from the documentation it seems that it should be possible but I can not find an example or something which could help...
>>> If I have to write the file, should I specify also to insert the NormalZ field or is it automatic?
>>> 
>>> Thank you in advance for the help!
>>> 
>>> Best regards
>>> 
>>> Silvia
>>> 
>>> 
>>> 
>>> 
>>>> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <silvia.franceschi at gmail.com> wrote:
>>>> Dear Luigi,
>>>> finally I could start to work again on the DTM extraction and I was trying to apply the same commands as in your slides.
>>>> Unfortunately I am not so smart to understand how to do this kind of assignment in a PDAL pipeline:
>>>> 
>>>> - normalZ [0:0.6] : Classification ->1
>>>> - normalZ ! [0:0.6] : Classification ->2
>>>> - merge soil / no soil
>>>> 
>>>> I tried using the filter.assign but it seems that I can not assign values of a field while filtering on an other field.
>>>> And also I can not understand what you mean with merge soil/no soil... 
>>>> 
>>>> The pipeline I did is like this:
>>>> 
>>>> {
>>>>     "pipeline": [
>>>> {
>>>>             "type": "readers.las",
>>>>             "filename":"aaa.las"
>>>>         },
>>>> {
>>>>             "type":"filters.range",
>>>>             "limits":"Classification[2:2]"
>>>>         },
>>>> {
>>>>             "type":"filters.normal",
>>>>             "knn": 30
>>>>     },
>>>> {
>>>>             "type":"filters.assign",
>>>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>>>     },
>>>>         {
>>>>             "type": "writers.las",
>>>>             "filename":"bbb.las"
>>>>         }
>>>>     ]
>>>> }
>>>> 
>>>> Could you please address me to the right commands to use to finalize the pipeline?
>>>> 
>>>> Thank you for the big help!
>>>> 
>>>> Best regards
>>>> 
>>>> Silvia
>>>> 
>>>> 
>>>> 
>>>> 
>>>>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>>>> we had similar problems with TLS in urban context regarding first part pf the cars
>>>>> you can see our strategy to clean the first PMF effect in slides from
>>>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>>>> to
>>>>> http://slides.com/darango/deck-10-11-12-11-12#/15
>>>>> 
>>>>> the main idea is to do noise cleaning, PMF, filter on normal, filter on kdistance, PMF again
>>>>> 
>>>>> not clear to me if you can have a good discrimination of the ground part of the threes using normals due to nature of these surfaces.
>>>>> 
>>>>> cheers
>>>>> 
>>>>> Luigi Pirelli
>>>>> 
>>>>> **************************************************************************************************
>>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>>> * GitHub: https://github.com/luipir
>>>>> * Mastering QGIS 2nd Edition:
>>>>> * https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>>> * Hire me: http://goo.gl/BYRQKg
>>>>> **************************************************************************************************
>>>>> 
>>>>> 
>>>>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <silvia.franceschi at gmail.com> wrote:
>>>>>> Dear all,
>>>>>> I am trying to extract the ground points from a point cloud of a terrestrial laser scanner (TLS) in a forestry environment, but the result is not so good as the one I got using data from ALS.
>>>>>> What I did is:
>>>>>> 1. denoise the dataset using the filter.outlier and a filter.range for Z ranges:
>>>>>>             "type": "filters.outlier",
>>>>>>             "method": "statistical",
>>>>>>             "multiplier": 3,
>>>>>>             "mean_k": 8
>>>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>>>> For the SMRF filter I used these parameters:
>>>>>>             "type": "filters.smrf",
>>>>>>             "slope":0.2,
>>>>>>             "window":16,
>>>>>>             "threshold":0.45,
>>>>>>             "scalar":1.2
>>>>>> 
>>>>>> Unfortunately the resulting ground points contain also the first part of of the trunks of the trees, how is it possible? 
>>>>>> 
>>>>>> I am doing some testing changing the values of the SMRF parameters but the results are almost the same. 
>>>>>> 
>>>>>> Do some of you have experience with such kind of data? Am I missing some operation for filtering? Could you please help me understanding at least where to focus the attention to try to obtain something...
>>>>>> 
>>>>>> Thank you in advance.
>>>>>> 
>>>>>> Silvia
>>>>>> 
>>>>>> 
>>>>>> -- 
>>>>>> ing. Silvia Franceschi
>>>>>> Via Roma, 64
>>>>>> 38030 Castello di Fiemme (TN)
>>>>>> 
>>>>>> tel: 0039 -3384501332
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>> 
>>>> 
>>>> -- 
>>>> ing. Silvia Franceschi
>>>> Via Roma, 64
>>>> 38030 Castello di Fiemme (TN)
>>>> 
>>>> tel: 0039 -3384501332
>>> 
>>> 
>>> -- 
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>> 
>>> tel: 0039 -3384501332
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
> 
> 
> -- 
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
> 
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190526/771d602a/attachment.html>

From brad.chambers at gmail.com  Sun May 26 07:16:29 2019
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Sun, 26 May 2019 10:16:29 -0400
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <07F70681-8077-4F51-A72C-A6CB0D0B712E@gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
 <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
 <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>
 <07F70681-8077-4F51-A72C-A6CB0D0B712E@gmail.com>
Message-ID: <CAJyqqPzKOKoMpO4EOQve7HMDLH8Pc-1g8j-=oEmhr8icSYqaHA@mail.gmail.com>

You are also not going to be able to do the conditional assignment and
ferry approaches you are attempting. Please read the documentation
carefully for each of these filters. Ferry can either create a new
dimension or copy one dimension to another. Assignment can assign a static
value to a range in a single dimension, but cannot mix dimensions (i.e.,
assign classification = 2 where normalZ = whatever). Luigi's pipelines have
solved this problem using either Python filters are through using the tag
and inputs options to create more complex pipelines.

On Sun, May 26, 2019 at 10:06 AM <michael.smith.erdc at gmail.com> wrote:

> Yes, you can use the new dimensions in filters after the ferry filter. You
> just cant persist them in the output file without the extra dims parameter
> as they are not standard las dimensions.
>
> Michael Smith
> RSGIS center
> US Army Corps
>
> On May 26, 2019, at 9:46 AM, Silvia Franceschi <
> silvia.franceschi at gmail.com> wrote:
>
> Thank you Luigi,
> so the only possibility to access to the values of NormalZ is by writing
> them into the LAS?
> The documentation says: "The filter produces four new dimensions (NormalX,
> NormalY, NormalZ, and Curvature), which can be analyzed directly, or
> consumed by downstream stages for more advanced filtering."
>
> Is it possible to access these new variables via pipeline without writing
> and reading them from LAS?
>
> Thanks
>
> Silvia
>
>
>
>
> On Sun, May 26, 2019 at 10:38 AM Luigi Pirelli <luipir at gmail.com> wrote:
>
>> writer LAS does not write automatically any field that is not specified
>> by LAS format => extra_dims option of writers.las have to be set... eg.
>> "extra_dims":"all"
>>
>> cheers
>>
>> Luigi Pirelli
>>
>>
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Mastering QGIS 2nd Edition:
>> *
>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>> * Hire me: http://goo.gl/BYRQKg
>>
>> **************************************************************************************************
>>
>>
>> On Sat, 25 May 2019 at 22:40, Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>>> Sorry Luigi...
>>> I realized that the filter to use is the filter.ferry with a pipeline
>>> like this:
>>>  {
>>>             "type":"filters.ferry",
>>>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>>>     },
>>> or at least, I guess because now I have the problem that the NormalZ
>>> field do not exist. So my question is: should I write the file after
>>> filter.normal to have this field or is it possible to use it in the same
>>> pipeline? from the documentation it seems that it should be possible but I
>>> can not find an example or something which could help...
>>> If I have to write the file, should I specify also to insert the NormalZ
>>> field or is it automatic?
>>>
>>> Thank you in advance for the help!
>>>
>>> Best regards
>>>
>>> Silvia
>>>
>>>
>>>
>>>
>>> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
>>> silvia.franceschi at gmail.com> wrote:
>>>
>>>> Dear Luigi,
>>>> finally I could start to work again on the DTM extraction and I was
>>>> trying to apply the same commands as in your slides.
>>>> Unfortunately I am not so smart to understand how to do this kind of
>>>> assignment in a PDAL pipeline:
>>>>
>>>> - normalZ [0:0.6] : Classification ->1
>>>> - normalZ ! [0:0.6] : Classification ->2
>>>> - merge soil / no soil
>>>>
>>>> I tried using the filter.assign but it seems that I can not assign
>>>> values of a field while filtering on an other field.
>>>> And also I can not understand what you mean with merge soil/no soil...
>>>>
>>>> The pipeline I did is like this:
>>>>
>>>> {
>>>>     "pipeline": [
>>>> {
>>>>             "type": "readers.las",
>>>>             "filename":"aaa.las"
>>>>         },
>>>> {
>>>>             "type":"filters.range",
>>>>             "limits":"Classification[2:2]"
>>>>         },
>>>> {
>>>>             "type":"filters.normal",
>>>>             "knn": 30
>>>>     },
>>>> {
>>>>             "type":"filters.assign",
>>>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>>>     },
>>>>         {
>>>>             "type": "writers.las",
>>>>             "filename":"bbb.las"
>>>>         }
>>>>     ]
>>>> }
>>>>
>>>> Could you please address me to the right commands to use to finalize
>>>> the pipeline?
>>>>
>>>> Thank you for the big help!
>>>>
>>>> Best regards
>>>>
>>>> Silvia
>>>>
>>>>
>>>>
>>>>
>>>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>>>
>>>>> we had similar problems with TLS in urban context regarding first part
>>>>> pf the cars
>>>>> you can see our strategy to clean the first PMF effect in slides from
>>>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>>>> to
>>>>> http://slides.com/darango/deck-10-11-12-11-12#/1
>>>>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>>>>
>>>>> the main idea is to do noise cleaning, PMF, filter on normal, filter
>>>>> on kdistance, PMF again
>>>>>
>>>>> not clear to me if you can have a good discrimination of the ground
>>>>> part of the threes using normals due to nature of these surfaces.
>>>>>
>>>>> cheers
>>>>>
>>>>> Luigi Pirelli
>>>>>
>>>>>
>>>>> **************************************************************************************************
>>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>>> * Stackexchange:
>>>>> http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>>> * GitHub: https://github.com/luipir
>>>>> * Mastering QGIS 2nd Edition:
>>>>> *
>>>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>>> * Hire me: http://goo.gl/BYRQKg
>>>>>
>>>>> **************************************************************************************************
>>>>>
>>>>>
>>>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>>>>> silvia.franceschi at gmail.com> wrote:
>>>>>
>>>>>> Dear all,
>>>>>> I am trying to extract the ground points from a point cloud of a
>>>>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>>>>> is not so good as the one I got using data from ALS.
>>>>>> What I did is:
>>>>>> 1. denoise the dataset using the filter.outlier and a filter.range
>>>>>> for Z ranges:
>>>>>>             "type": "filters.outlier",
>>>>>>             "method": "statistical",
>>>>>>             "multiplier": 3,
>>>>>>             "mean_k": 8
>>>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>>>> For the SMRF filter I used these parameters:
>>>>>>             "type": "filters.smrf",
>>>>>>             "slope":0.2,
>>>>>>             "window":16,
>>>>>>             "threshold":0.45,
>>>>>>             "scalar":1.2
>>>>>>
>>>>>> Unfortunately the resulting ground points contain also the first part
>>>>>> of of the trunks of the trees, how is it possible?
>>>>>>
>>>>>> I am doing some testing changing the values of the SMRF parameters
>>>>>> but the results are almost the same.
>>>>>>
>>>>>> Do some of you have experience with such kind of data? Am I missing
>>>>>> some operation for filtering? Could you please help me understanding at
>>>>>> least where to focus the attention to try to obtain something...
>>>>>>
>>>>>> Thank you in advance.
>>>>>>
>>>>>> Silvia
>>>>>>
>>>>>>
>>>>>> --
>>>>>> ing. Silvia Franceschi
>>>>>> Via Roma, 64
>>>>>> 38030 Castello di Fiemme (TN)
>>>>>>
>>>>>> tel: 0039 -3384501332
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>>>
>>>> --
>>>> ing. Silvia Franceschi
>>>> Via Roma, 64
>>>> 38030 Castello di Fiemme (TN)
>>>>
>>>> tel: 0039 -3384501332
>>>>
>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190526/b7042847/attachment-0001.html>

From silvia.franceschi at gmail.com  Sun May 26 08:05:19 2019
From: silvia.franceschi at gmail.com (Silvia Franceschi)
Date: Sun, 26 May 2019 17:05:19 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CAJyqqPzKOKoMpO4EOQve7HMDLH8Pc-1g8j-=oEmhr8icSYqaHA@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
 <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
 <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>
 <07F70681-8077-4F51-A72C-A6CB0D0B712E@gmail.com>
 <CAJyqqPzKOKoMpO4EOQve7HMDLH8Pc-1g8j-=oEmhr8icSYqaHA@mail.gmail.com>
Message-ID: <CABCykqJD51DoF0oB58-aa9GMYEvTumnOo4zULW2JdMWVcjB0ZQ@mail.gmail.com>

Thank you all for the clarifications,
I guessed that mixing different variables with conditions was not possible
wth the ferry and assign filters, I definitely tried but no success... and
you confirmed me this.

So the best way to do this is finally to write the variables to a new LAS,
then work with an externa program on the assignments between one variable
and the other and then come back to PDAL with the modified LAS to do the
final operations?

Really thanks for the help!

Silvia



On Sun, May 26, 2019 at 4:16 PM Bradley Chambers <brad.chambers at gmail.com>
wrote:

> You are also not going to be able to do the conditional assignment and
> ferry approaches you are attempting. Please read the documentation
> carefully for each of these filters. Ferry can either create a new
> dimension or copy one dimension to another. Assignment can assign a static
> value to a range in a single dimension, but cannot mix dimensions (i.e.,
> assign classification = 2 where normalZ = whatever). Luigi's pipelines have
> solved this problem using either Python filters are through using the tag
> and inputs options to create more complex pipelines.
>
> On Sun, May 26, 2019 at 10:06 AM <michael.smith.erdc at gmail.com> wrote:
>
>> Yes, you can use the new dimensions in filters after the ferry filter.
>> You just cant persist them in the output file without the extra dims
>> parameter as they are not standard las dimensions.
>>
>> Michael Smith
>> RSGIS center
>> US Army Corps
>>
>> On May 26, 2019, at 9:46 AM, Silvia Franceschi <
>> silvia.franceschi at gmail.com> wrote:
>>
>> Thank you Luigi,
>> so the only possibility to access to the values of NormalZ is by writing
>> them into the LAS?
>> The documentation says: "The filter produces four new dimensions
>> (NormalX, NormalY, NormalZ, and Curvature), which can be analyzed directly,
>> or consumed by downstream stages for more advanced filtering."
>>
>> Is it possible to access these new variables via pipeline without writing
>> and reading them from LAS?
>>
>> Thanks
>>
>> Silvia
>>
>>
>>
>>
>> On Sun, May 26, 2019 at 10:38 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>
>>> writer LAS does not write automatically any field that is not specified
>>> by LAS format => extra_dims option of writers.las have to be set... eg.
>>> "extra_dims":"all"
>>>
>>> cheers
>>>
>>> Luigi Pirelli
>>>
>>>
>>> **************************************************************************************************
>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>>> * GitHub: https://github.com/luipir
>>> * Mastering QGIS 2nd Edition:
>>> *
>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>> * Hire me: http://goo.gl/BYRQKg
>>>
>>> **************************************************************************************************
>>>
>>>
>>> On Sat, 25 May 2019 at 22:40, Silvia Franceschi <
>>> silvia.franceschi at gmail.com> wrote:
>>>
>>>> Sorry Luigi...
>>>> I realized that the filter to use is the filter.ferry with a pipeline
>>>> like this:
>>>>  {
>>>>             "type":"filters.ferry",
>>>>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>>>>     },
>>>> or at least, I guess because now I have the problem that the NormalZ
>>>> field do not exist. So my question is: should I write the file after
>>>> filter.normal to have this field or is it possible to use it in the same
>>>> pipeline? from the documentation it seems that it should be possible but I
>>>> can not find an example or something which could help...
>>>> If I have to write the file, should I specify also to insert the
>>>> NormalZ field or is it automatic?
>>>>
>>>> Thank you in advance for the help!
>>>>
>>>> Best regards
>>>>
>>>> Silvia
>>>>
>>>>
>>>>
>>>>
>>>> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
>>>> silvia.franceschi at gmail.com> wrote:
>>>>
>>>>> Dear Luigi,
>>>>> finally I could start to work again on the DTM extraction and I was
>>>>> trying to apply the same commands as in your slides.
>>>>> Unfortunately I am not so smart to understand how to do this kind of
>>>>> assignment in a PDAL pipeline:
>>>>>
>>>>> - normalZ [0:0.6] : Classification ->1
>>>>> - normalZ ! [0:0.6] : Classification ->2
>>>>> - merge soil / no soil
>>>>>
>>>>> I tried using the filter.assign but it seems that I can not assign
>>>>> values of a field while filtering on an other field.
>>>>> And also I can not understand what you mean with merge soil/no soil...
>>>>>
>>>>> The pipeline I did is like this:
>>>>>
>>>>> {
>>>>>     "pipeline": [
>>>>> {
>>>>>             "type": "readers.las",
>>>>>             "filename":"aaa.las"
>>>>>         },
>>>>> {
>>>>>             "type":"filters.range",
>>>>>             "limits":"Classification[2:2]"
>>>>>         },
>>>>> {
>>>>>             "type":"filters.normal",
>>>>>             "knn": 30
>>>>>     },
>>>>> {
>>>>>             "type":"filters.assign",
>>>>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>>>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>>>>     },
>>>>>         {
>>>>>             "type": "writers.las",
>>>>>             "filename":"bbb.las"
>>>>>         }
>>>>>     ]
>>>>> }
>>>>>
>>>>> Could you please address me to the right commands to use to finalize
>>>>> the pipeline?
>>>>>
>>>>> Thank you for the big help!
>>>>>
>>>>> Best regards
>>>>>
>>>>> Silvia
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> we had similar problems with TLS in urban context regarding first
>>>>>> part pf the cars
>>>>>> you can see our strategy to clean the first PMF effect in slides from
>>>>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>>>>> to
>>>>>> http://slides.com/darango/deck-10-11-12-11-12#/1
>>>>>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>>>>>
>>>>>> the main idea is to do noise cleaning, PMF, filter on normal, filter
>>>>>> on kdistance, PMF again
>>>>>>
>>>>>> not clear to me if you can have a good discrimination of the ground
>>>>>> part of the threes using normals due to nature of these surfaces.
>>>>>>
>>>>>> cheers
>>>>>>
>>>>>> Luigi Pirelli
>>>>>>
>>>>>>
>>>>>> **************************************************************************************************
>>>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>>>> * Stackexchange:
>>>>>> http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>>>> * GitHub: https://github.com/luipir
>>>>>> * Mastering QGIS 2nd Edition:
>>>>>> *
>>>>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>>>> * Hire me: http://goo.gl/BYRQKg
>>>>>>
>>>>>> **************************************************************************************************
>>>>>>
>>>>>>
>>>>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>>>>>> silvia.franceschi at gmail.com> wrote:
>>>>>>
>>>>>>> Dear all,
>>>>>>> I am trying to extract the ground points from a point cloud of a
>>>>>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>>>>>> is not so good as the one I got using data from ALS.
>>>>>>> What I did is:
>>>>>>> 1. denoise the dataset using the filter.outlier and a filter.range
>>>>>>> for Z ranges:
>>>>>>>             "type": "filters.outlier",
>>>>>>>             "method": "statistical",
>>>>>>>             "multiplier": 3,
>>>>>>>             "mean_k": 8
>>>>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>>>>> For the SMRF filter I used these parameters:
>>>>>>>             "type": "filters.smrf",
>>>>>>>             "slope":0.2,
>>>>>>>             "window":16,
>>>>>>>             "threshold":0.45,
>>>>>>>             "scalar":1.2
>>>>>>>
>>>>>>> Unfortunately the resulting ground points contain also the first
>>>>>>> part of of the trunks of the trees, how is it possible?
>>>>>>>
>>>>>>> I am doing some testing changing the values of the SMRF parameters
>>>>>>> but the results are almost the same.
>>>>>>>
>>>>>>> Do some of you have experience with such kind of data? Am I missing
>>>>>>> some operation for filtering? Could you please help me understanding at
>>>>>>> least where to focus the attention to try to obtain something...
>>>>>>>
>>>>>>> Thank you in advance.
>>>>>>>
>>>>>>> Silvia
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> ing. Silvia Franceschi
>>>>>>> Via Roma, 64
>>>>>>> 38030 Castello di Fiemme (TN)
>>>>>>>
>>>>>>> tel: 0039 -3384501332
>>>>>>> _______________________________________________
>>>>>>> pdal mailing list
>>>>>>> pdal at lists.osgeo.org
>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>
>>>>>>
>>>>>
>>>>> --
>>>>> ing. Silvia Franceschi
>>>>> Via Roma, 64
>>>>> 38030 Castello di Fiemme (TN)
>>>>>
>>>>> tel: 0039 -3384501332
>>>>>
>>>>
>>>>
>>>> --
>>>> ing. Silvia Franceschi
>>>> Via Roma, 64
>>>> 38030 Castello di Fiemme (TN)
>>>>
>>>> tel: 0039 -3384501332
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>> --
>> ing. Silvia Franceschi
>> Via Roma, 64
>> 38030 Castello di Fiemme (TN)
>>
>> tel: 0039 -3384501332
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>

-- 
ing. Silvia Franceschi
Via Roma, 64
38030 Castello di Fiemme (TN)

tel: 0039 -3384501332
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190526/d8f821ef/attachment-0001.html>

From luipir at gmail.com  Mon May 27 00:25:39 2019
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 27 May 2019 09:25:39 +0200
Subject: [pdal] Extract terrain from TLS point cloud
In-Reply-To: <CABCykqJD51DoF0oB58-aa9GMYEvTumnOo4zULW2JdMWVcjB0ZQ@mail.gmail.com>
References: <CABCykq+UZgQf51ZPdz5tq5kjDMhHZ8dJL93XooAVoJeXvG4iOg@mail.gmail.com>
 <CABCykq+1HGxRKURwuvAjaH6HHPiZVN+d8K45mLnfKsnd7dm6vg@mail.gmail.com>
 <CABCykqLE-QdhGL1bf=Mk-St1sCCB63DvGZVY2fAedpCHrHM-Lw@mail.gmail.com>
 <CAFO80_oOm4pYjcz_xSY-KwZZg5HAr0FjS_MACjbnaESMfMu9BA@mail.gmail.com>
 <CABCykqJRJJtiQfj1yX8Jn8p_UQqWhTnjyERy1PVknoRELjag3Q@mail.gmail.com>
 <CABCykqJA3Cwv3p7h9OUNEHWeFc2JvsYz2emppyODLLHmBivR7Q@mail.gmail.com>
 <CAFO80_rKL6=uK8CAP0z+2Yd4SZHS8_yDNEiiW2P5T-po+m5zPQ@mail.gmail.com>
 <CABCykqLKJWLonvBGU-H_yNbwK_adaq8SWkvkwbW_OfzFBEErZQ@mail.gmail.com>
 <07F70681-8077-4F51-A72C-A6CB0D0B712E@gmail.com>
 <CAJyqqPzKOKoMpO4EOQve7HMDLH8Pc-1g8j-=oEmhr8icSYqaHA@mail.gmail.com>
 <CABCykqJD51DoF0oB58-aa9GMYEvTumnOo4zULW2JdMWVcjB0ZQ@mail.gmail.com>
Message-ID: <CAFO80_o59fJR+-DLrEM3RRx2mkjppa279zNnvPxrdXi2Vca+sg@mail.gmail.com>

python (or whatever language) filter is the answer for conditional
assignment (I didn't explored mongo filter yet)

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Sun, 26 May 2019 at 17:05, Silvia Franceschi <silvia.franceschi at gmail.com>
wrote:

> Thank you all for the clarifications,
> I guessed that mixing different variables with conditions was not possible
> wth the ferry and assign filters, I definitely tried but no success... and
> you confirmed me this.
>
> So the best way to do this is finally to write the variables to a new LAS,
> then work with an externa program on the assignments between one variable
> and the other and then come back to PDAL with the modified LAS to do the
> final operations?
>
> Really thanks for the help!
>
> Silvia
>
>
>
> On Sun, May 26, 2019 at 4:16 PM Bradley Chambers <brad.chambers at gmail.com>
> wrote:
>
>> You are also not going to be able to do the conditional assignment and
>> ferry approaches you are attempting. Please read the documentation
>> carefully for each of these filters. Ferry can either create a new
>> dimension or copy one dimension to another. Assignment can assign a static
>> value to a range in a single dimension, but cannot mix dimensions (i.e.,
>> assign classification = 2 where normalZ = whatever). Luigi's pipelines have
>> solved this problem using either Python filters are through using the tag
>> and inputs options to create more complex pipelines.
>>
>> On Sun, May 26, 2019 at 10:06 AM <michael.smith.erdc at gmail.com> wrote:
>>
>>> Yes, you can use the new dimensions in filters after the ferry filter.
>>> You just cant persist them in the output file without the extra dims
>>> parameter as they are not standard las dimensions.
>>>
>>> Michael Smith
>>> RSGIS center
>>> US Army Corps
>>>
>>> On May 26, 2019, at 9:46 AM, Silvia Franceschi <
>>> silvia.franceschi at gmail.com> wrote:
>>>
>>> Thank you Luigi,
>>> so the only possibility to access to the values of NormalZ is by writing
>>> them into the LAS?
>>> The documentation says: "The filter produces four new dimensions
>>> (NormalX, NormalY, NormalZ, and Curvature), which can be analyzed directly,
>>> or consumed by downstream stages for more advanced filtering."
>>>
>>> Is it possible to access these new variables via pipeline without
>>> writing and reading them from LAS?
>>>
>>> Thanks
>>>
>>> Silvia
>>>
>>>
>>>
>>>
>>> On Sun, May 26, 2019 at 10:38 AM Luigi Pirelli <luipir at gmail.com> wrote:
>>>
>>>> writer LAS does not write automatically any field that is not specified
>>>> by LAS format => extra_dims option of writers.las have to be set... eg.
>>>> "extra_dims":"all"
>>>>
>>>> cheers
>>>>
>>>> Luigi Pirelli
>>>>
>>>>
>>>> **************************************************************************************************
>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>> * GitHub: https://github.com/luipir
>>>> * Mastering QGIS 2nd Edition:
>>>> *
>>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>> * Hire me: http://goo.gl/BYRQKg
>>>>
>>>> **************************************************************************************************
>>>>
>>>>
>>>> On Sat, 25 May 2019 at 22:40, Silvia Franceschi <
>>>> silvia.franceschi at gmail.com> wrote:
>>>>
>>>>> Sorry Luigi...
>>>>> I realized that the filter to use is the filter.ferry with a pipeline
>>>>> like this:
>>>>>  {
>>>>>             "type":"filters.ferry",
>>>>>             "dimensions":"NormalZ[0:6]=>Classification[2]"
>>>>>     },
>>>>> or at least, I guess because now I have the problem that the NormalZ
>>>>> field do not exist. So my question is: should I write the file after
>>>>> filter.normal to have this field or is it possible to use it in the same
>>>>> pipeline? from the documentation it seems that it should be possible but I
>>>>> can not find an example or something which could help...
>>>>> If I have to write the file, should I specify also to insert the
>>>>> NormalZ field or is it automatic?
>>>>>
>>>>> Thank you in advance for the help!
>>>>>
>>>>> Best regards
>>>>>
>>>>> Silvia
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On Sat, May 25, 2019 at 10:16 PM Silvia Franceschi <
>>>>> silvia.franceschi at gmail.com> wrote:
>>>>>
>>>>>> Dear Luigi,
>>>>>> finally I could start to work again on the DTM extraction and I was
>>>>>> trying to apply the same commands as in your slides.
>>>>>> Unfortunately I am not so smart to understand how to do this kind of
>>>>>> assignment in a PDAL pipeline:
>>>>>>
>>>>>> - normalZ [0:0.6] : Classification ->1
>>>>>> - normalZ ! [0:0.6] : Classification ->2
>>>>>> - merge soil / no soil
>>>>>>
>>>>>> I tried using the filter.assign but it seems that I can not assign
>>>>>> values of a field while filtering on an other field.
>>>>>> And also I can not understand what you mean with merge soil/no
>>>>>> soil...
>>>>>>
>>>>>> The pipeline I did is like this:
>>>>>>
>>>>>> {
>>>>>>     "pipeline": [
>>>>>> {
>>>>>>             "type": "readers.las",
>>>>>>             "filename":"aaa.las"
>>>>>>         },
>>>>>> {
>>>>>>             "type":"filters.range",
>>>>>>             "limits":"Classification[2:2]"
>>>>>>         },
>>>>>> {
>>>>>>             "type":"filters.normal",
>>>>>>             "knn": 30
>>>>>>     },
>>>>>> {
>>>>>>             "type":"filters.assign",
>>>>>>             "assignment" : "normalZ[0:6]=Classification[2]",
>>>>>>             "assignment" : "normalZ[0:6]!=Classification[1]"
>>>>>>     },
>>>>>>         {
>>>>>>             "type": "writers.las",
>>>>>>             "filename":"bbb.las"
>>>>>>         }
>>>>>>     ]
>>>>>> }
>>>>>>
>>>>>> Could you please address me to the right commands to use to finalize
>>>>>> the pipeline?
>>>>>>
>>>>>> Thank you for the big help!
>>>>>>
>>>>>> Best regards
>>>>>>
>>>>>> Silvia
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Mon, May 13, 2019 at 9:24 AM Luigi Pirelli <luipir at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>> we had similar problems with TLS in urban context regarding first
>>>>>>> part pf the cars
>>>>>>> you can see our strategy to clean the first PMF effect in slides from
>>>>>>> http://slides.com/darango/deck-10-11-12-11-12#/11
>>>>>>> to
>>>>>>> http://slides.com/darango/deck-10-11-12-11-12#/1
>>>>>>> <http://slides.com/darango/deck-10-11-12-11-12#/11>5
>>>>>>>
>>>>>>> the main idea is to do noise cleaning, PMF, filter on normal, filter
>>>>>>> on kdistance, PMF again
>>>>>>>
>>>>>>> not clear to me if you can have a good discrimination of the ground
>>>>>>> part of the threes using normals due to nature of these surfaces.
>>>>>>>
>>>>>>> cheers
>>>>>>>
>>>>>>> Luigi Pirelli
>>>>>>>
>>>>>>>
>>>>>>> **************************************************************************************************
>>>>>>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>>>>>>> * Stackexchange:
>>>>>>> http://gis.stackexchange.com/users/19667/luigi-pirelli
>>>>>>> * GitHub: https://github.com/luipir
>>>>>>> * Mastering QGIS 2nd Edition:
>>>>>>> *
>>>>>>> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
>>>>>>> * Hire me: http://goo.gl/BYRQKg
>>>>>>>
>>>>>>> **************************************************************************************************
>>>>>>>
>>>>>>>
>>>>>>> On Sat, 11 May 2019 at 10:01, Silvia Franceschi <
>>>>>>> silvia.franceschi at gmail.com> wrote:
>>>>>>>
>>>>>>>> Dear all,
>>>>>>>> I am trying to extract the ground points from a point cloud of a
>>>>>>>> terrestrial laser scanner (TLS) in a forestry environment, but the result
>>>>>>>> is not so good as the one I got using data from ALS.
>>>>>>>> What I did is:
>>>>>>>> 1. denoise the dataset using the filter.outlier and a filter.range
>>>>>>>> for Z ranges:
>>>>>>>>             "type": "filters.outlier",
>>>>>>>>             "method": "statistical",
>>>>>>>>             "multiplier": 3,
>>>>>>>>             "mean_k": 8
>>>>>>>> 2. apply a filter.elm and a filter.smrf to the cleaned dataset
>>>>>>>> For the SMRF filter I used these parameters:
>>>>>>>>             "type": "filters.smrf",
>>>>>>>>             "slope":0.2,
>>>>>>>>             "window":16,
>>>>>>>>             "threshold":0.45,
>>>>>>>>             "scalar":1.2
>>>>>>>>
>>>>>>>> Unfortunately the resulting ground points contain also the first
>>>>>>>> part of of the trunks of the trees, how is it possible?
>>>>>>>>
>>>>>>>> I am doing some testing changing the values of the SMRF parameters
>>>>>>>> but the results are almost the same.
>>>>>>>>
>>>>>>>> Do some of you have experience with such kind of data? Am I missing
>>>>>>>> some operation for filtering? Could you please help me understanding at
>>>>>>>> least where to focus the attention to try to obtain something...
>>>>>>>>
>>>>>>>> Thank you in advance.
>>>>>>>>
>>>>>>>> Silvia
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> ing. Silvia Franceschi
>>>>>>>> Via Roma, 64
>>>>>>>> 38030 Castello di Fiemme (TN)
>>>>>>>>
>>>>>>>> tel: 0039 -3384501332
>>>>>>>> _______________________________________________
>>>>>>>> pdal mailing list
>>>>>>>> pdal at lists.osgeo.org
>>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --
>>>>>> ing. Silvia Franceschi
>>>>>> Via Roma, 64
>>>>>> 38030 Castello di Fiemme (TN)
>>>>>>
>>>>>> tel: 0039 -3384501332
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> ing. Silvia Franceschi
>>>>> Via Roma, 64
>>>>> 38030 Castello di Fiemme (TN)
>>>>>
>>>>> tel: 0039 -3384501332
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>
>>> --
>>> ing. Silvia Franceschi
>>> Via Roma, 64
>>> 38030 Castello di Fiemme (TN)
>>>
>>> tel: 0039 -3384501332
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
> --
> ing. Silvia Franceschi
> Via Roma, 64
> 38030 Castello di Fiemme (TN)
>
> tel: 0039 -3384501332
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190527/bf894b37/attachment-0001.html>

From doug_newcomb at fws.gov  Wed May 29 05:11:26 2019
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 29 May 2019 08:11:26 -0400
Subject: [pdal] Fwd: [EXTERNAL] New data sets released: Multiple ICESat-2
 data sets are now available at the NSIDC DAAC
In-Reply-To: <CANNEDyj0DA41OaLRRKOHjOFcqthXVRkLYH5ALsEQ2XH764G15A@mail.gmail.com>
References: <3eed3adeb8ad0950624ae61f0.26589b6ed2.20190528172633.1c5a5f1bbc.a7972209@mail183.atl21.rsgsv.net>
 <CANNEDyj0DA41OaLRRKOHjOFcqthXVRkLYH5ALsEQ2XH764G15A@mail.gmail.com>
Message-ID: <CALQGVr3BVfBoC7Z5ZS=GALi-JmbKpCQs49OKgnyoN4R9m3griw@mail.gmail.com>

---------- Forwarded message ---------
From: NSIDC User Services <nsidc at nsidc.org>
Date: Tue, May 28, 2019 at 11:27 AM
Subject: [EXTERNAL] New data sets released: Multiple ICESat-2 data sets are
now available at the NSIDC DAAC
To: <jstoker at usgs.gov>


Dear Colleague,

Multiple Level-1B, Level-2, and Level-3A data sets from the Ice, Cloud, and
land Elevation Satellite-2 (ICESat-2) mission are now available at the NASA
National Snow and Ice Data Center Distributed Active Archive Center (NSIDC
DAAC). These data sets provide backscatter profiles; geolocated photon
data; atmospheric layer characteristics; and geolocated surface elevations
for land ice, sea ice, vegetation and land, and inland water. The data are
available beginning 13 October 2018 and may have gaps in coverage due to
processing lag times. These temporal and spatial data gaps are expected to
be filled in the coming weeks. Additional Level-3A and Level-3B data sets
will be released as the data become available, including higher level
gridded data sets.

For information about the ICESat-2 mission and data sets please visit the
ICESat-2 mission web page at the NSIDC DAAC: https://nsidc.org/data/icesat-2
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=b27c87a57c&e=26589b6ed2>

Access to the data and documentation is provided on the data set web pages
at the NSIDC DAAC:

ATLAS/ICESat-2 L1B Converted Telemetry Data, Version 1 (ATL02)
Data authors: Martino, A. J., M. R. Bock, R. L. Jones III, T. A. Neumann,
D. Hancock, P. W. Dabney, and C. E. Webb
Data set DOI: https://doi.org/10.5067/ATLAS/ATL02.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=aa1528f3d6&e=26589b6ed2>

ATLAS/ICESat-2 L2A Global Geolocated Photon Data, Version 1 (ATL03)
Data authors: Neumann, T. A., A. Brenner, D. Hancock, J. Robbins, J. Saba,
K. Harbeck, and A. Gibbons.
Data set DOI: https://doi.org/10.5067/ATLAS/ATL03.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=0c69d294b9&e=26589b6ed2>

ATLAS/ICESat-2 L2A Normalized Relative Backscatter Profiles, Version 1
(ATL04)
Data authors: Palm, S., U. C. Herzfeld, and Y. Yang.
Data set DOI: https://doi.org/10.5067/ATLAS/ATL04.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=6a0953bc0f&e=26589b6ed2>

ATLAS/ICESat-2 L3A Land Ice Height, Version 1 (ATL06)
Data authors: Smith, B. and A. Gardner.
Data set DOI: https://doi.org/10.5067/ATLAS/ATL06.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=b2580359cf&e=26589b6ed2>

ATLAS/ICESat-2 L3A Sea Ice Height, Version 1 (ATL07)
Data authors: Kwok, R., G. Cunningham, D. Hancock, A. Ivanoff, and J. Wimert
Data set DOI: https://doi.org/10.5067/ATLAS/ATL07.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=0dc7d89f4b&e=26589b6ed2>

ATLAS/ICESat-2 L3A Land and Vegetation Height, Version 1 (ATL08)
Data authors: Neuenschwander, A. L., S. C. Popescu, R. F. Nelson, D.
Harding, K. L. Pitts, and J. Robbins
Data set DOI: https://doi.org/10.5067/ATLAS/ATL08.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=00b311b2c1&e=26589b6ed2>

ATLAS/ICESat-2 L3A Calibrated Backscatter Profiles and Atmospheric Layer
Characteristics, Version 1 (ATL09)
Data authors: Palm, S., U. C. Herzfeld, and Y. Yang.
Data set DOI: https://doi.org/10.5067/ATLAS/ATL09.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=bfba88cec5&e=26589b6ed2>

ATLAS/ICESat-2 L3A Sea Ice Freeboard, Version 1 (ATL10)
Data authors: Kwok, R., G. Cunningham, D. Hancock, A. Ivanoff, and J. Wimert
Data set DOI: https://doi.org/10.5067/ATLAS/ATL10.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=7b56657202&e=26589b6ed2>

ATLAS/ICESat-2 L3A Inland Water Surface Height, Version 1 (ATL13)*
Data authors: Jasinski, M. F. and J. D. Stoll
Data set DOI: https://doi.org/10.5067/ATLAS/ATL13.001
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=8285ab8bc2&e=26589b6ed2>

Data Acknowledgements
Data center: NSIDC DAAC (https://nsidc.org/daac
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=fca89e828a&e=26589b6ed2>
)
Sponsor: NASA EOSDIS (https://earthdata.nasa.gov
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=faece4bcd0&e=26589b6ed2>
)

*Note: The ATL13 data set is available as part of an early release with
limited documentation. Complete documentation will be available for this
data set in the near future.

If you have questions, please contact the User Services Office at
nsidc at nsidc.org.

Best regards,
NSIDC DAAC
User Services
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=1285772e67&e=26589b6ed2>
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=e18c813158&e=26589b6ed2>
<https://nsidc.us12.list-manage.com/track/click?u=3eed3adeb8ad0950624ae61f0&id=387819c01d&e=26589b6ed2>
*Copyright  2019 National Snow and Ice Data Center, All rights reserved.*
You are receiving this email because you are a member of the ICESat-2
Applications and Early Adopters mailing list or you have expressed interest
in ICESat-2 data.

*Our mailing address is:*
National Snow and Ice Data Center
449 University of Colorado
Boulder, CO 80309-5004

Add us to your address book
<https://nsidc.us12.list-manage.com/vcard?u=3eed3adeb8ad0950624ae61f0&id=de4617d06e>


Want to change how you receive these emails?
You can update your preferences
<https://nsidc.us12.list-manage.com/profile?u=3eed3adeb8ad0950624ae61f0&id=de4617d06e&e=26589b6ed2>
or unsubscribe from this list
<https://nsidc.us12.list-manage.com/unsubscribe?u=3eed3adeb8ad0950624ae61f0&id=de4617d06e&e=26589b6ed2&c=1c5a5f1bbc>



-- 
Doug Newcomb - Cartographer
USFWS
551F Pylon Dr
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------

*NOTE: This email correspondence and any attachments to and from this
sender is subject to the Freedom of Information Act (FOIA) and may be
disclosed to third parties.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20190529/b455cb1b/attachment-0001.html>

