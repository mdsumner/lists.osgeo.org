From gerald.evenden at verizon.net  Mon Mar  3 17:01:58 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 03 Mar 2003 20:01:58 -0500
Subject: [OSRS-PROJ] The "almost" Lamber Conformal Conic Projection
In-Reply-To: <1046183500.1318.7.camel@localhost.localdomain>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>
	<3E4D47B5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk> 
	<1046183500.1318.7.camel@localhost.localdomain>
Message-ID: <1046739720.3298.8.camel@localhost.localdomain>

The almost Lambert Conformal Projection, +proj=lcca, source code,
test script and documentation are available at:

http://members.bellatlantic.net/~vze2hc4d/proj4/

The procedure only services the truncated series form of LCC to
satisfy conversions of some French, North African and near Eastern
interests.  It has only been tested for the northern hemisphere but
if anyone knows of any usage in the southern hemisphere, let me
know.

Please DO NOT use this projection for new applications.  It is
only for handling existing usage.

Please let me know of any problems or have any suggestions.

Thank-you.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Mar  3 17:52:07 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 03 Mar 2003 20:52:07 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: <3E50FEC4.2010805@pobox.com>
References: <41CC46B3925E384BA64B1FB5041C38FA3308@www.novacell.com> 
	<3E50FEC4.2010805@pobox.com>
Message-ID: <1046742728.3395.13.camel@localhost.localdomain>

Is the non-Snyder Oblique/Equitorial (EPSG 9809) done yet?  I noted
some discussion in mid-Feb about it but have not heard of any
results.

If nobody is working on it I may as well give it a whack as
two projections in the last three weeks has me on a roll.

BTW, EPSG is somewhat sloppy in their math and elide a good
deal of information.  Secondly, to discuss and refer to their
work I wish they would use equation numbers.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar  3 18:54:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 03 Mar 2003 21:54:04 -0500
Subject: [OSRS-PROJ] The "almost" Lamber Conformal Conic Projection
In-Reply-To: <1046739720.3298.8.camel@localhost.localdomain>
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk> 	<1046183500.1318.7.camel@localhost.localdomain> <1046739720.3298.8.camel@localhost.localdomain>
Message-ID: <3E64154C.3040802@pobox.com>

Gerald I. Evenden wrote:
> The almost Lambert Conformal Projection, +proj=lcca, source code,
> test script and documentation are available at:
> 
> http://members.bellatlantic.net/~vze2hc4d/proj4/
> 
> The procedure only services the truncated series form of LCC to
> satisfy conversions of some French, North African and near Eastern
> interests.  It has only been tested for the northern hemisphere but
> if anyone knows of any usage in the southern hemisphere, let me
> know.
> 
> Please DO NOT use this projection for new applications.  It is
> only for handling existing usage.
> 
> Please let me know of any problems or have any suggestions.

Gerald,

I am incorporating the lcca into the remotesensing.org version of PROJ.4
but when I run the test script I don't get a close match to the EPSG values
you list.  Should I?

warmerda at gdal2200[60]% sh ~/lcca.tst
forward projection of:

34d08'11.291 37d31'17.625
15713.70        623182.75
EPSG guide 7, pdf p. 22 gives values of: 15707.96 623165.96

inverse check of forward

34d08'11.29100"E        37d31'17.62500"N


If I run the first step of the test script with -V I get:

warmerda at gdal2200[162]% ./proj temp -V +proj=lcca +a=6378249.2 +b=6356515.0 +nea
rly +lon_0=37d21 +lat_0=34d39 +k_0=0.99962560 +x_0=300000 +y_0=300000
#Lambert Conformal Conic Alternative
#       Conic, Sph&Ell
#       lat_0=
# +proj=lcca +a=6378249.2 +lon_0=37d21 +lat_0=34d39 +k_0=0.99962560
# +x_0=300000 +y_0=300000 +ellps=WGS84
#--- following specified but NOT used
# +b=6356515.0 +nearly
#Final Earth figure: ellipsoid
#  Major axis (a): 6378249.200
#  1/flattening: 298.257224
#  squared eccentricity: 0.006694379990
Longitude: 34d8'11.291"E [ 34.136469722 ]
Latitude:  37d31'17.625"N [ 37.5215625 ]
Easting (x):   15713.70
Northing (y):  623182.75
Meridian scale (h) : 1.00087594  ( 0.08759 % error )
Parallel scale (k) : 1.00089192  ( 0.08919 % error )
Areal scale (s):     1.00176864  ( 0.1769 % error )
Angular distortion (w): 0.001
Meridian/Parallel angle: 90.00000
Convergence : -1d49'37.527" [ -1.82709072 ]
Max-min (Tissot axis a-b) scale error: 1.00089 1.00088

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Mar  3 19:40:15 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 03 Mar 2003 22:40:15 -0500
Subject: [OSRS-PROJ] The "almost" Lamber Conformal Conic Projection
In-Reply-To: <3E64154C.3040802@pobox.com>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B
	 5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>
	<1046183500.1318.7.camel@localhost.localdomain>
	<1046739720.3298.8.camel@localhost.localdomain> 
	<3E64154C.3040802@pobox.com>
Message-ID: <1046749217.3547.11.camel@localhost.localdomain>

Very interesting.  The results at this end from the script are:

[gie at localhost src]$ ./lcca
forward projection of:

34d08'11.291 37d31'17.625
15707.96        623165.96
EPSG guide 7, pdf p. 22 gives values of: 15707.96 623165.96

inverse check of forward

34d08'11.29100"E        37d31'17.62500"N
[gie at localhost src]$

Ahhhhhh---I see it. PUT "no_defs" in the script. "Spec'd but
not used".   <<------------------------

I will correct the lcca.txt script.

Your local datum overrode the +b facor.  Look carefully at the
beginning of the -V output.

As you will note, my machine matches exactly to the cm.
On Mon, 2003-03-03 at 21:54, Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > The almost Lambert Conformal Projection, +proj=lcca, source code,
> > test script and documentation are available at:
> > 
> > http://members.bellatlantic.net/~vze2hc4d/proj4/
> > 
> > The procedure only services the truncated series form of LCC to
> > satisfy conversions of some French, North African and near Eastern
> > interests.  It has only been tested for the northern hemisphere but
> > if anyone knows of any usage in the southern hemisphere, let me
> > know.
> > 
> > Please DO NOT use this projection for new applications.  It is
> > only for handling existing usage.
> > 
> > Please let me know of any problems or have any suggestions.
> 
> Gerald,
> 
> I am incorporating the lcca into the remotesensing.org version of PROJ.4
> but when I run the test script I don't get a close match to the EPSG values
> you list.  Should I?
> 
> warmerda at gdal2200[60]% sh ~/lcca.tst
> forward projection of:
> 
> 34d08'11.291 37d31'17.625
> 15713.70        623182.75
> EPSG guide 7, pdf p. 22 gives values of: 15707.96 623165.96
> 
> inverse check of forward
> 
> 34d08'11.29100"E        37d31'17.62500"N
> 
> 
> If I run the first step of the test script with -V I get:
> 
> warmerda at gdal2200[162]% ./proj temp -V +proj=lcca +a=6378249.2 +b=6356515.0 +nea
> rly +lon_0=37d21 +lat_0=34d39 +k_0=0.99962560 +x_0=300000 +y_0=300000
> #Lambert Conformal Conic Alternative
> #       Conic, Sph&Ell
> #       lat_0=
> # +proj=lcca +a=6378249.2 +lon_0=37d21 +lat_0=34d39 +k_0=0.99962560
> # +x_0=300000 +y_0=300000 +ellps=WGS84
> #--- following specified but NOT used
> # +b=6356515.0 +nearly
> #Final Earth figure: ellipsoid
> #  Major axis (a): 6378249.200
> #  1/flattening: 298.257224
> #  squared eccentricity: 0.006694379990
> Longitude: 34d8'11.291"E [ 34.136469722 ]
> Latitude:  37d31'17.625"N [ 37.5215625 ]
> Easting (x):   15713.70
> Northing (y):  623182.75
> Meridian scale (h) : 1.00087594  ( 0.08759 % error )
> Parallel scale (k) : 1.00089192  ( 0.08919 % error )
> Areal scale (s):     1.00176864  ( 0.1769 % error )
> Angular distortion (w): 0.001
> Meridian/Parallel angle: 90.00000
> Convergence : -1d49'37.527" [ -1.82709072 ]
> Max-min (Tissot axis a-b) scale error: 1.00089 1.00088
> 
> Best regards,
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar  3 20:15:46 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 03 Mar 2003 23:15:46 -0500
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
Message-ID: <3E642872.7020609@pobox.com>

Folks,

I have decided to kick out a PROJ 4.4.6 release.  A tentative attempt at this
is now available for download from the PROJ.4 page at:

   http://www.remotesensing.org/proj

The NEWS file reports:

4.4.6 Release Notes
-------------------

  o Incorporated new lcca (Lambert Conformal Conic Alternate) projection from
    Gerald.

  o Updated 'espg' translation file for EPSG 6.2.2 with better support for
    prime meridians.

  o Added Prime Meridians via +pm command switch to cs2cs (and pj_transform).

  o Fixed bug with 7 parameter transforms.

  o Added 'esri' pseudo-epsg coordinate system file.

  o Cleanup so that PROJ.4 compiles clean as C++ code.

  o Added pj_get_def() to expand definitions of stuff like +init clauses.

  o Added a Krovak implementation (proj=krov).  Note this may change again
    in the next release.

Although not noted, this release also attempts to work well on Cygwin, and
includes more recent versions of the automake, and libtool files.   If no
problems are encountered I will announce the release more widely on the
freegis mailing list, and freshmeat.net.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar  3 20:46:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 03 Mar 2003 23:46:01 -0500
Subject: [OSRS-PROJ] The "almost" Lamber Conformal Conic Projection
In-Reply-To: <1046749217.3547.11.camel@localhost.localdomain>
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B	 5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>	<1046183500.1318.7.camel@localhost.localdomain>	<1046739720.3298.8.camel@localhost.localdomain> 	<3E64154C.3040802@pobox.com> <1046749217.3547.11.camel@localhost.localdomain>
Message-ID: <3E642F89.5060108@pobox.com>

Gerald I. Evenden wrote:
> Very interesting.  The results at this end from the script are:
> 
> [gie at localhost src]$ ./lcca
> forward projection of:
> 
> 34d08'11.291 37d31'17.625
> 15707.96        623165.96
> EPSG guide 7, pdf p. 22 gives values of: 15707.96 623165.96
> 
> inverse check of forward
> 
> 34d08'11.29100"E        37d31'17.62500"N
> [gie at localhost src]$
> 
> Ahhhhhh---I see it. PUT "no_defs" in the script. "Spec'd but
> not used".   <<------------------------
> 
> I will correct the lcca.txt script.
> 
> Your local datum overrode the +b facor.  Look carefully at the
> beginning of the -V output.

Gerald,

Of course you are right.  I get matching results to the cm with the
no_defs as well.

The lcca projection has been committed to CVS and is in the 4.4.6 release.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar  3 20:46:28 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 03 Mar 2003 23:46:28 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: <1046742728.3395.13.camel@localhost.localdomain>
References: <41CC46B3925E384BA64B1FB5041C38FA3308@www.novacell.com> 	<3E50FEC4.2010805@pobox.com> <1046742728.3395.13.camel@localhost.localdomain>
Message-ID: <3E642FA4.4090908@pobox.com>

Gerald I. Evenden wrote:
> Is the non-Snyder Oblique/Equitorial (EPSG 9809) done yet?  I noted
> some discussion in mid-Feb about it but have not heard of any
> results.
> 
> If nobody is working on it I may as well give it a whack as
> two projections in the last three weeks has me on a roll.
> 
> BTW, EPSG is somewhat sloppy in their math and elide a good
> deal of information.  Secondly, to discuss and refer to their
> work I wish they would use equation numbers.

Gerald,

I don't believe anyone is working on it, and I for one would be very grateful
to have it added.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jnovak at novacell.com  Mon Mar  3 21:54:56 2003
From: jnovak at novacell.com (Administrator)
Date: Mon, 3 Mar 2003 21:54:56 -0800
Subject: [OSRS-PROJ] Oblique Stereographic
Message-ID: <41CC46B3925E384BA64B1FB5041C38FA3334@max.novacell.com>

I have been trying to get through the math and have made little
progress, so if you want to take a whack at it, please do.

John Novak
Novacell Technologies
www.novacell.com

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam at pobox.com] 
Sent: Monday, March 03, 2003 8:46 PM
To: osrs-proj at remotesensing.org
Subject: Re: [OSRS-PROJ] Oblique Stereographic


Gerald I. Evenden wrote:
> Is the non-Snyder Oblique/Equitorial (EPSG 9809) done yet?  I noted 
> some discussion in mid-Feb about it but have not heard of any results.
> 
> If nobody is working on it I may as well give it a whack as two 
> projections in the last three weeks has me on a roll.
> 
> BTW, EPSG is somewhat sloppy in their math and elide a good deal of 
> information.  Secondly, to discuss and refer to their work I wish they

> would use equation numbers.

Gerald,

I don't believe anyone is working on it, and I for one would be very
grateful to have it added.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Tue Mar  4 00:48:19 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Tue, 4 Mar 2003 17:48:19 +0900
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
References: <3E642872.7020609@pobox.com>
Message-ID: <001601c2e22a$d32f4730$700201c0@MAPQUEST.local>

Hello Frank,
Thanks for the effort. I have being waiting for this update. I will now
continue my work on the Proj4 and the COM wrapper.

Again, thanks.

Best regards,
Paul.

----- Original Message -----
From: "Frank Warmerdam" <warmerdam at pobox.com>
To: "PROJ.4 Discussion" <osrs-proj at remotesensing.org>
Sent: Tuesday, March 04, 2003 1:15 PM
Subject: [OSRS-PROJ] PROJ 4.4.6 Release


> Folks,
>
> I have decided to kick out a PROJ 4.4.6 release.  A tentative attempt at
this
> is now available for download from the PROJ.4 page at:
>
>    http://www.remotesensing.org/proj
>
> The NEWS file reports:
>
> 4.4.6 Release Notes
> -------------------
>
>   o Incorporated new lcca (Lambert Conformal Conic Alternate) projection
from
>     Gerald.
>
>   o Updated 'espg' translation file for EPSG 6.2.2 with better support for
>     prime meridians.
>
>   o Added Prime Meridians via +pm command switch to cs2cs (and
pj_transform).
>
>   o Fixed bug with 7 parameter transforms.
>
>   o Added 'esri' pseudo-epsg coordinate system file.
>
>   o Cleanup so that PROJ.4 compiles clean as C++ code.
>
>   o Added pj_get_def() to expand definitions of stuff like +init clauses.
>
>   o Added a Krovak implementation (proj=krov).  Note this may change again
>     in the next release.
>
> Although not noted, this release also attempts to work well on Cygwin, and
> includes more recent versions of the automake, and libtool files.   If no
> problems are encountered I will announce the release more widely on the
> freegis mailing list, and freshmeat.net.
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Tue Mar  4 07:37:22 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 04 Mar 2003 10:37:22 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: <41CC46B3925E384BA64B1FB5041C38FA3334@max.novacell.com>
References: <41CC46B3925E384BA64B1FB5041C38FA3334@max.novacell.com>
Message-ID: <1046792247.1200.50.camel@localhost.localdomain>

Unfortunately, the math presentation in the EPSG Guide 7 is a
horror story.  First, be sure to get the pdf version as my browser,
and I suspect others also, make a mess of the html math. 
I do use the Guide as a reference when dealing with other sources
and in trying to determine which "version" to use.  Unlike 
Snyder-like sources, many are not suitable for program development.
This is the reason I now make sure I have a LaTeX document file
that I work from when doing the coding.

I hope that the readers of my pdf files find the math clear,
complete and unambiguous---something from which you can code a
procedure.  I limit the math to the kernel of the projection
and omit all claptrap associated with cadestral usage such
as false eastings, etc.. This is taken care of by the outer
layer of proj.  Also, the kernel is written for the unit
sphere or ellipsoid (a=1) so it ends up that the only thing
of concern is the eccentricity factor.

On Tue, 2003-03-04 at 00:54, Administrator wrote:
> I have been trying to get through the math and have made little
> progress, so if you want to take a whack at it, please do.
> 
> John Novak
> Novacell Technologies
> www.novacell.com
> 
> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam at pobox.com] 
> Sent: Monday, March 03, 2003 8:46 PM
> To: osrs-proj at remotesensing.org
> Subject: Re: [OSRS-PROJ] Oblique Stereographic
> 
> 
> Gerald I. Evenden wrote:
> > Is the non-Snyder Oblique/Equitorial (EPSG 9809) done yet?  I noted 
> > some discussion in mid-Feb about it but have not heard of any results.
> > 
> > If nobody is working on it I may as well give it a whack as two 
> > projections in the last three weeks has me on a roll.
> > 
> > BTW, EPSG is somewhat sloppy in their math and elide a good deal of 
> > information.  Secondly, to discuss and refer to their work I wish they
> 
> > would use equation numbers.
> 
> Gerald,
> 
> I don't believe anyone is working on it, and I for one would be very
> grateful to have it added.
> 
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From alex.weidauer at huckfinn.de  Tue Mar  4 09:02:39 2003
From: alex.weidauer at huckfinn.de (Alexander Weidauer)
Date: Tue, 04 Mar 2003 18:02:39 +0100
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
References: <3E642872.7020609@pobox.com>
Message-ID: <3E64DC2F.6030404@huckfinn.de>

Hi Frank,

I've recompiled the files for Borland C environment for the
4.4.6 version. The code is now synchron with yours to set the
path I've implemented a new source file call pj_init1.c it is
very short and contains our discussed code to set the nad search
path via the "setfinder" function. I've have to do so, because
you can't  set a function prototype through a DLL.

For the library I've to add only the function

PJ * pj_init_plus_path( const char *definition, const char *aDataPath )

to the proj_api.h and the proj.def file.

But I lost the feature to set the absolut path in the tools proj, nad 
etc. May be it is usefull for this tool to establish a path switch ?

Bye Alex

The new library is initial tested for the Booland C++wrapper class and 
the Delphi API. I' will send a mail if the files are downloadable.

Here the code for pj_init1.c

//-------------------------------------------------------------------------
// proj_init_plus_path for the BWin32 Borland Environment
// ..written by A. Weidauer alex.weidauer at huckfinn.de
//-------------------------------------------------------------------------
#include <string.h>.h"
#include "projects.h"

//---------------------------------------------------------------------------
static char *ProjDataPath = NULL;
//---------------------------------------------------------------------------
static const char *ProjFileFinder( const char *aFile )
{
      static char *aLastPath = NULL;

      if( ProjDataPath == NULL )
          return aFile;

      if( aLastPath != NULL )
         free( aLastPath );
      aLastPath = (char *) malloc(strlen(ProjDataPath)+strlen(aFile)+2);
      strcpy( aLastPath, ProjDataPath );
      strcat( aLastPath, "\\" );
      strcat( aLastPath, aFile );
      return aLastPath;
}
//---------------------------------------------------------------------------
PJ * pj_init_plus_path( const char *definition, const char *aDataPath )
{
    if( aDataPath != NULL )   {
       if( ProjDataPath != NULL )
           free( ProjDataPath );
       ProjDataPath = strdup(aDataPath);
    }
    pj_set_finder( ProjFileFinder );
    return pj_init_plus(definition);
}
//---------------------------------------------------------------------------
// EndOf
//---------------------------------------------------------------------------


Frank Warmerdam schrieb:
> Folks,
> 
> I have decided to kick out a PROJ 4.4.6 release.  A tentative attempt at 
> this
> is now available for download from the PROJ.4 page at:
> 
>   http://www.remotesensing.org/proj
> 
> The NEWS file reports:
> 
> 4.4.6 Release Notes
> -------------------
> 
>  o Incorporated new lcca (Lambert Conformal Conic Alternate) projection 
> from
>    Gerald.
> 
>  o Updated 'espg' translation file for EPSG 6.2.2 with better support for
>    prime meridians.
> 
>  o Added Prime Meridians via +pm command switch to cs2cs (and 
> pj_transform).
> 
>  o Fixed bug with 7 parameter transforms.
> 
>  o Added 'esri' pseudo-epsg coordinate system file.
> 
>  o Cleanup so that PROJ.4 compiles clean as C++ code.
> 
>  o Added pj_get_def() to expand definitions of stuff like +init clauses.
> 
>  o Added a Krovak implementation (proj=krov).  Note this may change again
>    in the next release.
> 
> Although not noted, this release also attempts to work well on Cygwin, and
> includes more recent versions of the automake, and libtool files.   If no
> problems are encountered I will announce the release more widely on the
> freegis mailing list, and freshmeat.net.
> 
> Best regards,
> 


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From alex.weidauer at huckfinn.de  Tue Mar  4 09:59:37 2003
From: alex.weidauer at huckfinn.de (Alexander Weidauer)
Date: Tue, 04 Mar 2003 18:59:37 +0100
Subject: [OSRS-PROJ] ANN: Proj 4.4.6 Borland Environment
Message-ID: <3E64E989.2050809@huckfinn.de>

Hi, Folks

My Borland Environment for the 4.4.6 Version is now
"up to date"

BYe Alex

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From morissette at dmsolutions.ca  Tue Mar  4 10:39:01 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Tue, 04 Mar 2003 13:39:01 -0500
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
References: <3E642872.7020609@pobox.com>
Message-ID: <3E64F2C5.34C0C6E2@dmsolutions.ca>

Frank Warmerdam wrote:
> 
>   o Updated 'espg' translation file for EPSG 6.2.2 with better support for
>     prime meridians.
> 
...
>   o Added 'esri' pseudo-epsg coordinate system file.
> 

Frank,

Do you know the difference between the contents of the epsg file and the
esri file?  It seems to me that the esri file contains most if not all
of the epsg codes, plus about a dozen ESRI-specific codes.

Can you, or someone else confirm that the esri file is just an older
version of the epsg file to which these 12 ESRI-specific codes have been
added at the end?  If that's the case then should we update the esri
file in the distribution to be based on the latest epsg file?

Thanks

Daniel 
-- 
------------------------------------------------------------
 Daniel Morissette               morissette at dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Tue Mar  4 10:45:36 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 04 Mar 2003 13:45:36 -0500
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
In-Reply-To: <3E64F2C5.34C0C6E2@dmsolutions.ca>
References: <3E642872.7020609@pobox.com> <3E64F2C5.34C0C6E2@dmsolutions.ca>
Message-ID: <3E64F450.8040608@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
> 
>>  o Updated 'espg' translation file for EPSG 6.2.2 with better support for
>>    prime meridians.
>>
> 
> ...
> 
>>  o Added 'esri' pseudo-epsg coordinate system file.
>>
> 
> 
> Frank,
> 
> Do you know the difference between the contents of the epsg file and the
> esri file?  It seems to me that the esri file contains most if not all
> of the epsg codes, plus about a dozen ESRI-specific codes.
> 
> Can you, or someone else confirm that the esri file is just an older
> version of the epsg file to which these 12 ESRI-specific codes have been
> added at the end?  If that's the case then should we update the esri
> file in the distribution to be based on the latest epsg file?

Daniel,

I think it was the guys at Refractions who contributed the esri file.  I
thought it had more than 12 extra coordinate systems but I think that was
due to my not realizing that most of the ESRI coordinate system difference
were due to ESRI using a more recent epsg database than I used to.

I don't know how Refractions derived the 'esri' file ... it may have been
generated from the actual ESRI .prj files for each system in which case it
may differ in meaningful ways from the values derived directly from EPSG.

I am hesitant to change the esri file myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Tue Mar  4 10:54:03 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 04 Mar 2003 13:54:03 -0500
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
In-Reply-To: <3E642872.7020609@pobox.com>
References: <3E642872.7020609@pobox.com>
Message-ID: <1046804050.1200.98.camel@localhost.localdomain>

When and if I finish up the alternate Oblique Stereographic I
will probably also release a new version of the *pristine* PROJ.4.
The naming obviously needs some difference so I will call my
release: PROJ.4_e.x.y.  The e suffix has an obvious source.

I have to do it this way as I am uncompromisingly against some
of the material in libproj because it has *nothing* to do with
cartographic projections.  For example, datum and geocentric
related code.  Also, the new _e releases will be clear of geodesic
and nad2nad material.  I may release a replacement for geod
using Vincente's method---slightly more accurate.  But for
nad2nad, I am not in a position (also read: not interested)
to properly maintain the tables.

There are a couple of items in OSRS's release that could be
considered legitimate additions to PROJ.4. One of them is the
alternate meridian option.  This is mainly a matter of lazyness
in altering +lon_0 but lot's of things cater to the lazy although
is is nice to have a list of alternate prime meridians.  There
may be other added projection options I am unaware of that may be
useful so I would appreciate being reminded of them.

Another item is making sure the code will compile under C++.
My problem here is I am totally ignorant of C++ so when I once
tried to force gcc C++ with all warning-complaint flags on to
compile a PJ_*.c file I got a warning I am total in the dark about.
If these test compiles kick something up that is documented in
Harbison and Steele. I'll try and fix it.

Lastly, distribution will have the sources divided among sub-
directories as per my working environment.  Putting all the
C files in one directory is overwhelming.  The subdirectories
are support, conic, cylinder, azimuthal, etc..  Pretty obvious.

Respond with complaints, barbs and criticisms.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Tue Mar  4 11:35:50 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Tue, 04 Mar 2003 11:35:50 -0800
Subject: [OSRS-PROJ] PROJ 4.4.6 Release
In-Reply-To: <3E64F2C5.34C0C6E2@dmsolutions.ca>
References: <3E642872.7020609@pobox.com> <3E64F2C5.34C0C6E2@dmsolutions.ca>
Message-ID: <3E650016.7010204@refractions.net>

I'd like to give you an improved ESRI file, Frank which *only* includes 
codes used by ESRI. Note that ESRI included most (but not all) of the 
EPSG codes in their coding scheme. They also seem to have tried to avoid 
collisions. There were somem problems in the last file I gave you with 
Stateplane projections in feet.

Paul

Daniel Morissette wrote:
> Frank Warmerdam wrote:
> 
>>  o Updated 'espg' translation file for EPSG 6.2.2 with better support for
>>    prime meridians.
>>
> 
> ...
> 
>>  o Added 'esri' pseudo-epsg coordinate system file.
>>
> 
> 
> Frank,
> 
> Do you know the difference between the contents of the epsg file and the
> esri file?  It seems to me that the esri file contains most if not all
> of the epsg codes, plus about a dozen ESRI-specific codes.
> 
> Can you, or someone else confirm that the esri file is just an older
> version of the epsg file to which these 12 ESRI-specific codes have been
> added at the end?  If that's the case then should we update the esri
> file in the distribution to be based on the latest epsg file?
> 
> Thanks
> 
> Daniel 


-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey at refractions.net
      | Phone: (250) 885-0632
      \_

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Tue Mar  4 11:39:09 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Tue, 04 Mar 2003 11:39:09 -0800
Subject: [OSRS-PROJ] ESRI File
Message-ID: <3E6500DD.5040108@refractions.net>

Attached.
Derived by: downloading all projections from ESRI's ArcXML reference
site, parsing out of HTML, and then applying the OGR coordinate system
functions to turn the WKT into Proj4.
Paul

-- 
        __
       /
       | Paul Ramsey
       | Refractions Research
       | Email: pramsey at refractions.net
       | Phone: (250) 885-0632
       \_

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: esri
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030304/af013c54/attachment.ksh>

From morissette at dmsolutions.ca  Tue Mar  4 12:42:04 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Tue, 04 Mar 2003 15:42:04 -0500
Subject: [OSRS-PROJ] ESRI File
References: <3E6500DD.5040108@refractions.net>
Message-ID: <3E650F9C.E9E8FDE1@dmsolutions.ca>

Paul Ramsey wrote:
> 
> Attached.
> Derived by: downloading all projections from ESRI's ArcXML reference
> site, parsing out of HTML, and then applying the OGR coordinate system
> functions to turn the WKT into Proj4.
> Paul
> 

Thanks for this Paul.  Unfortunately I think I didn't formulate my
question properly earlier today.  What I'm trying to do is come up with
is a epsg file that will contain all the regular epsg definitions and
all the esri-specific projections.  This is so that our WMS clients can
talk to ESRI WMS servers which advertize custom EPSG codes like
EPSG:102009.

Looking more closely at the file you sent I notice that there are a
bunch of definitions outside of the 0-32767 range.  Do you know if it
would be safe to assume that any definitions inside the 0-32767 range in
the esri file are a subset of the ones in the epsg file, so to produce
my merged file for my WMS client I could use the latest epsg file from
PROJ 4.4.6 and append to it all definitions from the esri file with ids
above 32767?

I guess I could walk through the file and find out myself, but if you
know the answer to that question already then that would save me some
time.  :)

Thanks 

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette at dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Tue Mar  4 12:54:04 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Tue, 04 Mar 2003 12:54:04 -0800
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E650F9C.E9E8FDE1@dmsolutions.ca>
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca>
Message-ID: <3E65126C.9060003@refractions.net>

As I recall, there are ESRI numbers sprinkled around a bunch of places, 
not necessarily all outside the 32767 range. I made a superset file 
once, and can do it again if needed. Frank wanted the domains completely 
separate though.

Daniel Morissette wrote:
> Paul Ramsey wrote:
> 
>>Attached.
>>Derived by: downloading all projections from ESRI's ArcXML reference
>>site, parsing out of HTML, and then applying the OGR coordinate system
>>functions to turn the WKT into Proj4.
>>Paul
>>
> 
> 
> Thanks for this Paul.  Unfortunately I think I didn't formulate my
> question properly earlier today.  What I'm trying to do is come up with
> is a epsg file that will contain all the regular epsg definitions and
> all the esri-specific projections.  This is so that our WMS clients can
> talk to ESRI WMS servers which advertize custom EPSG codes like
> EPSG:102009.
> 
> Looking more closely at the file you sent I notice that there are a
> bunch of definitions outside of the 0-32767 range.  Do you know if it
> would be safe to assume that any definitions inside the 0-32767 range in
> the esri file are a subset of the ones in the epsg file, so to produce
> my merged file for my WMS client I could use the latest epsg file from
> PROJ 4.4.6 and append to it all definitions from the esri file with ids
> above 32767?
> 
> I guess I could walk through the file and find out myself, but if you
> know the answer to that question already then that would save me some
> time.  :)
> 
> Thanks 
> 
> Daniel


-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey at refractions.net
      | Phone: (250) 885-0632
      \_

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Tue Mar  4 13:06:06 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Tue, 04 Mar 2003 13:06:06 -0800
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E650F9C.E9E8FDE1@dmsolutions.ca>
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca>
Message-ID: <3E65153E.1050402@refractions.net>

Here's all the codes which appear in the ESRI file but not in the EPSG file.

Daniel Morissette wrote:
> 
> Thanks for this Paul.  Unfortunately I think I didn't formulate my
> question properly earlier today.  What I'm trying to do is come up with
> is a epsg file that will contain all the regular epsg definitions and
> all the esri-specific projections.  This is so that our WMS clients can
> talk to ESRI WMS servers which advertize custom EPSG codes like
> EPSG:102009.


-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey at refractions.net
      | Phone: (250) 885-0632
      \_
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: esri_extra
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030304/a934e71c/attachment.ksh>

From warmerdam at pobox.com  Tue Mar  4 13:42:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 04 Mar 2003 16:42:50 -0500
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E65153E.1050402@refractions.net>
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca> <3E65153E.1050402@refractions.net>
Message-ID: <3E651DDA.9040806@pobox.com>

Paul Ramsey wrote:
> Here's all the codes which appear in the ESRI file but not in the EPSG 
> file.

Paul,

I think you diffed against the old epsg file.  The one in PROJ 4.4.6 includes
a bunch of these codes (eg 2000) which are in EPSG 6.2.2 but not in the EPSG
4.3 from which the last releases epsg file was derived.

In short, if that was an automated process you raw, perhaps you could run
it against the new file (from the release or CVS).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Tue Mar  4 13:55:32 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Tue, 04 Mar 2003 13:55:32 -0800
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E651DDA.9040806@pobox.com>
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca> <3E65153E.1050402@refractions.net> <3E651DDA.9040806@pobox.com>
Message-ID: <3E6520D4.3030504@refractions.net>

OK, here's the diff against the CVS epsg. :)
P.

Frank Warmerdam wrote
> 
> I think you diffed against the old epsg file.  The one in PROJ 4.4.6 
> includes
> a bunch of these codes (eg 2000) which are in EPSG 6.2.2 but not in the 
> EPSG
> 4.3 from which the last releases epsg file was derived.
> 
> In short, if that was an automated process you raw, perhaps you could run
> it against the new file (from the release or CVS).

-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey at refractions.net
      | Phone: (250) 885-0632
      \_
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: esri_extra
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030304/af8b1f08/attachment.ksh>

From gerald.evenden at verizon.net  Tue Mar  4 19:44:58 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 04 Mar 2003 22:44:58 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: <41CC46B3925E384BA64B1FB5041C38FA3334@max.novacell.com>
References: <41CC46B3925E384BA64B1FB5041C38FA3334@max.novacell.com>
Message-ID: <1046835912.11376.10.camel@localhost.localdomain>

I think I make a statement earlier today that I was on a roll.
Well as of this evening the forward for the alternate
Oblique Stereographic checks with the EPSG bench mark.

After checking with the general description from EPSG and one
of Snyder's books, the projection looked like another variation
on the work I did on Krovak.  So being a good thief I copied
the Krovak over, replaced the conic with the spherical 
oblique stereographic from Snyder and ... .

I think there might be a general routine here, like the oblique
stuff in libproj that will do the conformal sphere transform and
then call the spherical projection of your choice.  Hey, you folks
can cook up a bunch of new projections and give them names of
your choice.

Time to pull the switch and get ready for the "Daily Show."

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Tue Mar  4 19:55:22 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 4 Mar 2003 21:55:22 -0600
Subject: [OSRS-PROJ] Oblique Stereographic
Message-ID: <OF96ED4203.BE2FAE58-ON86256CE0.00158C5F-86256CE0.00158CC7@lsu.edu>


That mathematical routine only applies to the Oblique Stereographic Double
(per the Canadian Maritime Provinces, such as Prince Edward Island).  I
believe the French Navy Roussilhe Oblique Stereographic is different, and I
know the Bulgarian Hristow Oblique Stereographic is quite different.  A
particular truncation of the Hristow is used for the "Romanian Stereo 70."
Others exist.

See "Zeitschriff fur Vermessungswessen," circa 1930s-1940s.

In regard to the "new" projections, the "double" technique with the
Gaussian (conformal) Sphere is about 100 years old ...

Cliff Mugnier
LOUISIANA STATE UNIVERSITY

---------------------------------------

I think I make a statement earlier today that I was on a roll.
Well as of this evening the forward for the alternate
Oblique Stereographic checks with the EPSG bench mark.

After checking with the general description from EPSG and one
of Snyder's books, the projection looked like another variation
on the work I did on Krovak.  So being a good thief I copied
the Krovak over, replaced the conic with the spherical
oblique stereographic from Snyder and ... .

I think there might be a general routine here, like the oblique
stuff in libproj that will do the conformal sphere transform and
then call the spherical projection of your choice.  Hey, you folks
can cook up a bunch of new projections and give them names of
your choice.

Time to pull the switch and get ready for the "Daily Show."

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jnovak at novacell.com  Tue Mar  4 20:08:35 2003
From: jnovak at novacell.com (Administrator)
Date: Tue, 4 Mar 2003 20:08:35 -0800
Subject: [OSRS-PROJ] Oblique Stereographic
Message-ID: <41CC46B3925E384BA64B1FB5041C38FA333B@max.novacell.com>

Sweet...

-----Original Message-----
From: Gerald I. Evenden [mailto:gerald.evenden at verizon.net] 
Sent: Tuesday, March 04, 2003 7:45 PM
To: osrs-proj at remotesensing.org
Subject: RE: [OSRS-PROJ] Oblique Stereographic


I think I make a statement earlier today that I was on a roll. Well as
of this evening the forward for the alternate Oblique Stereographic
checks with the EPSG bench mark.

After checking with the general description from EPSG and one of
Snyder's books, the projection looked like another variation on the work
I did on Krovak.  So being a good thief I copied the Krovak over,
replaced the conic with the spherical 
oblique stereographic from Snyder and ... .

I think there might be a general routine here, like the oblique stuff in
libproj that will do the conformal sphere transform and then call the
spherical projection of your choice.  Hey, you folks can cook up a bunch
of new projections and give them names of your choice.

Time to pull the switch and get ready for the "Daily Show."

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Mar  5 07:43:11 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 05 Mar 2003 10:43:11 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: 	<OF96ED4203.BE2FAE58-ON86256CE0.00158C5F-86256CE0.00158CC7@lsu.edu>
References: 	<OF96ED4203.BE2FAE58-ON86256CE0.00158C5F-86256CE0.00158CC7@lsu.edu>
Message-ID: <1046878992.1199.71.camel@localhost.localdomain>

Like I said, there's are an infinite set of conformal solutions for
any basic type.  The request here was to solve the EPSG spec and that
one only.  As for Roussilhe and others, we'll cross those creeks when
we get there.  At least I have source equations for Roussilhe.

Point me to source material on the Bulgarian/Romanian projections and
I'll be glad to consider them.  So far none of my material even
whispers those names.  BTW: Hristow is Germanization of V.K. Khristov
a Bulgarian geodesist. (from Snyder).  Romania remains the home
of the equally mysterious Transylvanian Alps.

Of course, the Gauss transformation is aged.  What is amazing to me
is that outside of brief mention of it, its application is *not* well
discussed in any of the well known cartographic projection books.
Oft criticized Pearson was the only source of basic info on this
method and even his was not complete.

If the EPSG people would do just a modicum of work on these
projections they would recognize the similarities between Krovak
and the stereographic and thus make documentation similar.  As it
stands now, Guide 7 again presents a muddled set of equations
probably stripped from some obscure bureaucratic memorandum written
by someone reinventing the wheel.  I'm at least trying to put
some shiny hub caps on the wheels.

On Tue, 2003-03-04 at 22:55, Clifford J Mugnier wrote:
> 
> That mathematical routine only applies to the Oblique Stereographic Double
> (per the Canadian Maritime Provinces, such as Prince Edward Island).  I
> believe the French Navy Roussilhe Oblique Stereographic is different, and I
> know the Bulgarian Hristow Oblique Stereographic is quite different.  A
> particular truncation of the Hristow is used for the "Romanian Stereo 70."
> Others exist.
> 
> See "Zeitschriff fur Vermessungswessen," circa 1930s-1940s.
> 
> In regard to the "new" projections, the "double" technique with the
> Gaussian (conformal) Sphere is about 100 years old ...
> 
> Cliff Mugnier
> LOUISIANA STATE UNIVERSITY
> 
> ---------------------------------------
> 
> I think I make a statement earlier today that I was on a roll.
> Well as of this evening the forward for the alternate
> Oblique Stereographic checks with the EPSG bench mark.
> 
> After checking with the general description from EPSG and one
> of Snyder's books, the projection looked like another variation
> on the work I did on Krovak.  So being a good thief I copied
> the Krovak over, replaced the conic with the spherical
> oblique stereographic from Snyder and ... .
> 
> I think there might be a general routine here, like the oblique
> stuff in libproj that will do the conformal sphere transform and
> then call the spherical projection of your choice.  Hey, you folks
> can cook up a bunch of new projections and give them names of
> your choice.
> 
> Time to pull the switch and get ready for the "Daily Show."


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jidanni at dman.ddts.net  Wed Mar  5 11:28:46 2003
From: jidanni at dman.ddts.net (Dan Jacobson)
Date: Thu, 06 Mar 2003 03:28:46 +0800
Subject: [OSRS-PROJ] Re: Maidenhead grids fair game for proj?
In-Reply-To: <3E6513E8.70905@pobox.com> (Frank Warmerdam's message of "Tue,
 04 Mar 2003 16:00:24 -0500")
References: <87el5nknop.fsf@jidanni.org> <3E6513E8.70905@pobox.com>
Message-ID: <87fzq1fw9d.fsf@jidanni.org>

>>>>> "F" == Frank Warmerdam <warmerdam at pobox.com> writes:

F> Dan Jacobson wrote:
>> Say, are the Maidenhead ham radio grids fair game for a wishlist item
>> for proj? http://www.arrl.org/files/contests/ln9404.pdf
>> Yes, there are lots of programs already...

F> Dan,

F> Am I correct in stating that the maidenhead grid system just divides the
F> earth into 1x2 degree grid squares, but is not a complete coordinate
F> system (or least not a detailed one) in itself?   Just a way of assigning

http://www.colorado.edu/geography/gcraft/notes/coordsys/coordsys.html#MAIDEN
doesn't mention that all one need to do is just keep adding pairs to
the back to get all the precision one needs.

F> names to chunks of the sperehical (lat/long) coordinate system?  If so,

Yes, just a different way of saying one's lat/long, it seems.

F> I don't see that it fits smoothly into PROJ.4 but you are welcome to take
F> your suggestion to the list and see what others say.

OK, List, what about it.  The main thing that spurred me on was that
proj wouldn't set an arbitrary limit of 6 characters, e.g. I live in
PL04KE, when outputting, like so many programs do, e.g. qgrid (which
is up for adoption) on debian.

Naturally, I don't have any burning need in mind, other than adding
another method to make sure the Martians can find me to
http://jidanni.org/location/coordinates_en.html
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From agnew at bilby.ucsd.edu  Wed Mar  5 15:22:44 2003
From: agnew at bilby.ucsd.edu (Duncan Agnew)
Date: Wed, 5 Mar 2003 15:22:44 -0800 (PST)
Subject: [OSRS-PROJ] Re: Maidenhead grids fair game for proj?
Message-ID: <200303052322.PAA01861@bilby.ucsd.edu>


I would argue strongly against adding Maidenhead references to PROJ: it
really is apples and oranges. PROJ takes, as input and output, pairs
of real numbers: lat/long and x/y. The Maidenhead system encodes lat/long
into a (limited-precision) alphanumeric string, referring to a region,
not a point (the precision is extensible, I admit). There are very many
such regionalizations: Marsden squares, Flinn-Engdahl regions, the Military
Grid Reference System [based on UTM], the new US National Grid Reference
system, and on and on.

This is not to deny the value of having such routines, but they should
be kept separate from the proj and cs2cs routines, since their output is
a different kind of thing (and not invertible).

Duncan Agnew
dagnew at ucsd.edu
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Mar  5 18:06:05 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 05 Mar 2003 21:06:05 -0500
Subject: [OSRS-PROJ] Re: Maidenhead grids fair game for proj?
In-Reply-To: <200303052322.PAA01861@bilby.ucsd.edu>
References: <200303052322.PAA01861@bilby.ucsd.edu>
Message-ID: <1046916374.2472.0.camel@localhost.localdomain>

Well said and I second!

On Wed, 2003-03-05 at 18:22, Duncan Agnew wrote:
> 
> I would argue strongly against adding Maidenhead references to PROJ: it
> really is apples and oranges. PROJ takes, as input and output, pairs
> of real numbers: lat/long and x/y. The Maidenhead system encodes lat/long
> into a (limited-precision) alphanumeric string, referring to a region,
> not a point (the precision is extensible, I admit). There are very many
> such regionalizations: Marsden squares, Flinn-Engdahl regions, the Military
> Grid Reference System [based on UTM], the new US National Grid Reference
> system, and on and on.
> 
> This is not to deny the value of having such routines, but they should
> be kept separate from the proj and cs2cs routines, since their output is
> a different kind of thing (and not invertible).
> 
> Duncan Agnew
> dagnew at ucsd.edu

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Mar  5 19:56:26 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 05 Mar 2003 22:56:26 -0500
Subject: [OSRS-PROJ] The alternate Oblique Stereographic Projection
In-Reply-To: <1046749217.3547.11.camel@localhost.localdomain>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B
	 5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>
	<1046183500.1318.7.camel@localhost.localdomain>
	<1046739720.3298.8.camel@localhost.localdomain> 
	<3E64154C.3040802@pobox.com> 
	<1046749217.3547.11.camel@localhost.localdomain>
Message-ID: <1046922986.3045.4.camel@localhost.localdomain>

The alternate Oblique Stereographic projection, +proj=sterea, source code,
test script and documentation are available at:
 
http://members.bellatlantic.net/~vze2hc4d/proj4/

As usual, let me know if there are any problems.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Wed Mar  5 20:23:42 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Thu, 6 Mar 2003 13:23:42 +0900
Subject: [OSRS-PROJ] The alternate Oblique Stereographic Projection
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B 5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk><1046183500.1318.7.camel@localhost.localdomain><1046739720.3298.8.camel@localhost.localdomain> <3E64154C.3040802@pobox.com> <1046749217.3547.11.camel@localhost.localdomain> <1046922986.3045.4.camel@localhost.localdomain>
Message-ID: <000901c2e398$2dbfe4c0$700201c0@MAPQUEST.local>

Hello Gerald,
Thanks for the updates and the great work.
I have just visited your site for the first time.

I must say that I am personally not impressed by your "Basic Concern"
section. You have expressed your views on this forum, but making it
a public compaign message seems a bit out of the way.

Frank could have renamed the library, in which case the original version
will continue to exist. In fact, there is no reason why you should not
maintain the original version and distribute it for anyone interested.

You or the Proj4 project may have some target, but Frank definitely also
have
some target like anyone here.
Modifications to satisfy the target is a natural thing and we should all
respect it.
If current Proj4 does not meet my target, I think I will fork it to get what
I needed.

I personally respect and admire you a lot for the great work done,
but reading the stuff there was not encouraging at all.
Please consider getting ride of it - this is my personal view.

Best regards,
Paul.

----- Original Message -----
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: <osrs-proj at remotesensing.org>
Sent: Thursday, March 06, 2003 12:56 PM
Subject: [OSRS-PROJ] The alternate Oblique Stereographic Projection


> The alternate Oblique Stereographic projection, +proj=sterea, source code,
> test script and documentation are available at:
>
> http://members.bellatlantic.net/~vze2hc4d/proj4/
>
> As usual, let me know if there are any problems.
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Mar  6 09:36:13 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 06 Mar 2003 12:36:13 -0500
Subject: [OSRS-PROJ] The alternate Oblique Stereographic Projection
In-Reply-To: <000901c2e398$2dbfe4c0$700201c0@MAPQUEST.local>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B
	 5.9000709@pobox.com> 
	<3E50C118.1B096A1B@lsl.co.uk><1046183500.1318.7.camel@localhost.localdomain>
	 <1046739720.3298.8.camel@localhost.localdomain>
	<3E64154C.3040802@pobox.com>
	<1046749217.3547.11.camel@localhost.localdomain>
	<1046922986.3045.4.camel@localhost.localdomain> 
	<000901c2e398$2dbfe4c0$700201c0@MAPQUEST.local>
Message-ID: <1046972177.1196.142.camel@localhost.localdomain>

First, I do not consider the my web site very public as this mail
group is the only place it has be advertised.  I don't think Google
has picked it up yet.

I probably should rehack the comments on the index page as they are
not quite as clear as I would like.  My major concern is the lack
of structure of the software data base and the misconception that
cartographic projections, geodesy and datum applications are all
one item.

I would dearly like to see a good site for public distribution
of detailed information on cartographic projections; both
descriptive and computational.  I can understand and be equally
sympathetic to this attitude on the subject of geodesy and datums.
Again, and I can't emphasize this enough, the subject areas need
to be kept in their own pigeon holes so that the user need not be
confronted with a mass of unrelated information in his/her retrieval.

If proj4 does not satisfy your needs, then perhaps you are looking
in the wrong place.  If the need is not projection related then
why look in a projection library.  For example, translation of
geographic coordinates to geocentric x-y-z coordinates is not a
projection so why look in a projection library?

Lastly, I cannot run a proj.4 source by myself because of a lack of
resources.  Most importantly, I need a collection of critics who will
look at and use the material and subject it to critical tests for
accuracy and readability.  Secondly, being retired I do not have
a library card to get at potential sources.  Even if I did, it is
over 60 miles to Boston and would cost over $25US per trip---
public transportation or private car to say nothing of lost personal
time.  And even then a trip up there is not likely to yield an obscure
paper from the Czech Republic.

Going back to the web site and the editorial comments.  Remove it?
Change it?  I dunno.  It is still an issue I have not heard a
clear response to.

On Wed, 2003-03-05 at 23:23, Paul Selormey wrote:
> Hello Gerald,
> Thanks for the updates and the great work.
> I have just visited your site for the first time.
> 
> I must say that I am personally not impressed by your "Basic Concern"
> section. You have expressed your views on this forum, but making it
> a public compaign message seems a bit out of the way.
> 
> Frank could have renamed the library, in which case the original version
> will continue to exist. In fact, there is no reason why you should not
> maintain the original version and distribute it for anyone interested.
> 
> You or the Proj4 project may have some target, but Frank definitely also
> have
> some target like anyone here.
> Modifications to satisfy the target is a natural thing and we should all
> respect it.
> If current Proj4 does not meet my target, I think I will fork it to get what
> I needed.
> 
> I personally respect and admire you a lot for the great work done,
> but reading the stuff there was not encouraging at all.
> Please consider getting ride of it - this is my personal view.
> 
> Best regards,
> Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Mar  6 13:21:19 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 06 Mar 2003 16:21:19 -0500
Subject: [OSRS-PROJ] win32 build
Message-ID: <3E67BBCF.5040007@pobox.com>

Folks,

At the request of the MapServer community I have prepared a ready-to-use
binary build of PROJ.4 for Windows with the full set of NAD27 grid shift files.
The info is on the PROJ.4 page.

   http://www.remotesensing.org/proj

Let me know if you encounter any problems with this.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jidanni at dman.ddts.net  Thu Mar  6 10:41:08 2003
From: jidanni at dman.ddts.net (Dan Jacobson)
Date: Fri, 07 Mar 2003 02:41:08 +0800
Subject: [OSRS-PROJ] Re: Maidenhead grids fair game for proj?
In-Reply-To: <1046916374.2472.0.camel@localhost.localdomain> ("Gerald I.
 Evenden"'s message of "05 Mar 2003 21:06:05 -0500")
References: <200303052322.PAA01861@bilby.ucsd.edu>
	<1046916374.2472.0.camel@localhost.localdomain>
Message-ID: <87isuwuym3.fsf@jidanni.org>

Gerald> Well said and I second!
>> I would argue strongly against adding Maidenhead references to PROJ: it

Ok Ok, I don't suppose you want my midi tunes upon success proposal
either then, sniff.  Over and out.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From morissette at dmsolutions.ca  Thu Mar  6 15:17:14 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Thu, 06 Mar 2003 18:17:14 -0500
Subject: [OSRS-PROJ] ESRI File
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca> <3E65153E.1050402@refractions.net> <3E651DDA.9040806@pobox.com> <3E6520D4.3030504@refractions.net>
Message-ID: <3E67D6FA.51072198@dmsolutions.ca>

Paul Ramsey wrote:
> 
> OK, here's the diff against the CVS epsg. :)
> P.
> 

Thanks Paul, that did the trick for what I needed.

Frank: should this esri file be committed to CVS to replace the previous
one?

-- 
------------------------------------------------------------
 Daniel Morissette               morissette at dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From pramsey at refractions.net  Thu Mar  6 16:14:06 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Thu, 06 Mar 2003 16:14:06 -0800
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E67D6FA.51072198@dmsolutions.ca>
Message-ID: <B617ABD5-5031-11D7-94D0-000393D33C2E@refractions.net>


On Thursday, March 6, 2003, at 03:17 PM, Daniel Morissette wrote:

> Paul Ramsey wrote:
>>
>> OK, here's the diff against the CVS epsg. :)
>
> Frank: should this esri file be committed to CVS to replace the 
> previous
> one?

I don't think so. The epsg file gives all the definitions of ids within 
the epsg domain. The esri file gives all the definitions of ids within 
the esri domain.  The fact that the esri and epsg domains overlap does 
not make the individual domains any less distinct.

The ugrly compromise would be to just pretend the esri domain does not 
exist at all and dump their spare ids into the epsg file. Also dump all 
the half-assed temporary ids in there too, like the canadian lambert 
and the bc albers ids.  The way it would be one stop shopping, no line, 
no waiting.

P.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From morissette at dmsolutions.ca  Thu Mar  6 16:49:06 2003
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Thu, 06 Mar 2003 19:49:06 -0500
Subject: [OSRS-PROJ] ESRI File
References: <B617ABD5-5031-11D7-94D0-000393D33C2E@refractions.net>
Message-ID: <3E67EC82.C50526F3@dmsolutions.ca>

Paul Ramsey wrote:
> 
> The ugrly compromise would be to just pretend the esri domain does not
> exist at all and dump their spare ids into the epsg file. Also dump all
> the half-assed temporary ids in there too, like the canadian lambert
> and the bc albers ids.  The way it would be one stop shopping, no line,
> no waiting.
> 

I know it's bad in theory to do so, but we do distribute those flavours
of combined files on our download site for those who want their
MapServer-based WMS clients to talk to other canadian WMS servers, or to
ESRI WMS servers.  

If anyone needs them, the following files can be used as replacements
for the default 'epsg' file:

Base EPSG + a few custom canadian codes (42101, 42304, ...):
http://www2.dmsolutions.ca/mapserver/dl/proj4-epsg-with-42xxx.zip

Same as above plus the list of ESRI codes that you sent earlier:
http://www2.dmsolutions.ca/mapserver/dl/proj4-epsg-with-42xxx-and-esri.zip

Note that we do not want to encourage use of those canadian and ESRI
EPSG codes in WMS servers, we just provide them to allow WMS clients to
talk to servers that use those codes.

Daniel
-- 
------------------------------------------------------------
 Daniel Morissette               morissette at dmsolutions.ca
 DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From agnew at bilby.ucsd.edu  Fri Mar  7 07:08:42 2003
From: agnew at bilby.ucsd.edu (Duncan Agnew)
Date: Fri, 7 Mar 2003 07:08:42 -0800 (PST)
Subject: [OSRS-PROJ] PROJ tasks and routines
Message-ID: <200303071508.HAA06429@bilby.ucsd.edu>


Prompted by some recent comments, especially those by Gerald Evenden,
I'd like to offer one view of what PROJ does, and how those functions
might be embodied in software--recognizing that what may be easiest to use,
is not always easiest to learn. I hope this will provoke reactions, and
perhaps some ideas that can be used in any future documentation (the ones
here are available for use, if anyone likes them).

	First, definitions: PROJ is the package, proj and cs2cs are
the routines in it.

I would say that there are three different, though related, activities
covered by PROJ:

A. Projections

	This looks like:

                      ______________________
	             |                      |
	lat/long <===|  projection routine  |====> x/y
	             |______________________|

where the box can go either way. What is inside the box is software 
implementing a set of equations: the important point is that these are
nothing but mathematics, 99% devoid of empirical content about the Earth
(the 1% is that the 1/flattening is << 1).

B. Grids

	This looks like:

                      ______________________
	             |                      |
	lat/long <===|  projection routine  |====> x/y
	             |______________________|

where what is inside the box is software implementing a set of equations. If
this sounds a lot like (A), that is because it is, and with the same
equations (almost always). But there is a crucial difference, which Cliff
Mugnier has pointed out on a number of occasions: the parameters in
these equations (and sometimes the equations themselves) are set "by
definition" either by a government or a commercial firm. There is a
bit more empirical information here (specifically, ellipsoid parameters),
but mostly a lot of semi-arbitrary constants.

(And, there is also the difference that in (A) the x/y are usually in units
to be plotted (eventually), in (B) the x/y is, by design, close to actual
distance on the ellipsoid).

What is also set by legal definition is the *kind* of lat/long that
is legitimate to feed into the box: that is, the datum. This leads to
confusion with the next item:


C. Datums

	This looks like:

                      ________________________________
	             |                                |
	lat/long <===|  datum-transformation routine  |====> lat/long
	             |________________________________|

where now the software implements a quite different set of equations--in most
cases pretty simple ones (a rotation and translation, aka "7-parameter
Helmert") but occasionally more complicated (NAD27 <=> NAD83).  But the
parameters used are *very* empirical: somebody had to go out and make
measurements for each datum transformation, though once these measurements
are made it may also be the case that certain datum transformations are
taken as being defined. In thinking about the amount of empirical information
involved, it might help to realize that the parameters for
a datum transformation can be wrong, while a grid or projection can't
be: they are what they are. I happen to live in a place where the
datum transformations become wrong over time, because of plate tectonics.
(Of course the implementation of a grid can be wrong, but not the definition).

	Because grid definitions include a statement that the lat/long
should be "XXX Datum" I think there is a tendency to mix up (B) and (C),
and hence (A) (B) and (C), even though (C) is quite different from (A) and
(B). I think this tendency has influenced the evolution of the package--and
it has to be said that being able to do (B) and (C) fills a real need not
covered by other free projection software (eg, the Generic Mapping Tools).

	It would keep these distinctions cleaner if proj (the routine)
did (A) [and hence (B), depending on the parameters set] while there
was a program called (say) datumtr for doing (C): then one could use
pipes to get any transformations needed: eg, SPCS on NAD27 to SPCS on NAD83
would be (schematically)

    cat SPCS27 | proj -inverse | datumtr -NAD27to83 | proj -forward > SPCS83

What has happened instead is the cs2cs has combined both (B) and (C); certainly
having both is valuable, and I appreciate that what has been done is done,
but I would urge that whatever is done to cs2cs to allow it specifically
to perform the combined (B) and (C), not be added to proj, which is thus
left simpler for the people who just want to do (A). Mission creep can be
insidious.

	I would also argue that proj should continue to implement only
lat/long <==> x/y, leaving the various 3-d transformations out.
Since cs2cs handles triples, this could go there--but really, it might
be better to make this a separate routine, since it is a function of 3
variables rather than 2. Again, it's a choice between ease of use and
separate routines for separate activities. (I'd also note that the
XYZ-to-ellipsoid transform, done accurately over a wide range of ellipsoid
heights, is something that has attracted a lot of attention in the geodetic
literature recently, so some thought would be needed about the appropriate
algorithm).

	Hope this seems right, or at least worth discussing, to others.

Duncan Agnew
dagnew at ucsd.edu

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Mar  7 07:52:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 07 Mar 2003 10:52:03 -0500
Subject: [OSRS-PROJ] PROJ tasks and routines
In-Reply-To: <200303071508.HAA06429@bilby.ucsd.edu>
References: <200303071508.HAA06429@bilby.ucsd.edu>
Message-ID: <3E68C023.2030609@pobox.com>

Duncan Agnew wrote:
> What has happened instead is the cs2cs has combined both (B) and (C); certainly
> having both is valuable, and I appreciate that what has been done is done,
> but I would urge that whatever is done to cs2cs to allow it specifically
> to perform the combined (B) and (C), not be added to proj, which is thus
> left simpler for the people who just want to do (A). Mission creep can be
> insidious.

Duncan,

My view has been to reserve the commandline program "proj", and the pj_fwd()
and pj_inv() functions for the task of doing "projections".

The cs2cs and pj_transform() function are conceived of as more general
"coordinate system to coordinate system" converters including datum shifts
and potentially more esoteric stuff.

Within the API there is some "mess" in that the PJ structure, and pj_init()
are used for both sets of functionality.  The PJ structure carries around
a bunch of stuff that is related to datums even when only the projections
capabilities are being used.

In my ideal world the source code of the PROJ tree would be segregated in
such a way that Gerald could work off the same source tree as me, but releasing
a pure PROJ.4 from the traditional subset of code related to projection without
all the datum, and "geod" cruft that goes beyond it.  I would add all the
datum code, and other cruft to produce a "CS-PROJ" (CoordinateSystems-PROJ)
release corresponding to me current PROJ releases.  I do still believe that
many applications and end users want to view things at the coordinate systems
level and that a unified api for that is valuable.

In any event, I would like to stress that I am very pleased to have Gerald
back writing projections code and I hope we can work out a close cooperative
agreement.  Not to fret folks, life is good.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Fri Mar  7 08:19:51 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 8 Mar 2003 01:19:51 +0900
Subject: [OSRS-PROJ] PROJ tasks and routines
References: <200303071508.HAA06429@bilby.ucsd.edu>
Message-ID: <000b01c2e4c5$63f472d0$700201c0@MAPQUEST.local>

Hello Duncan,
Thanks for the summary. It is very informative, just took a print and
will add it to my Proj4 file :-)

Best regards,
Paul.

----- Original Message -----
From: "Duncan Agnew" <agnew at bilby.ucsd.edu>
To: <osrs-proj at remotesensing.org>
Cc: <agnew at bilby.ucsd.edu>
Sent: Saturday, March 08, 2003 12:08 AM
Subject: [OSRS-PROJ] PROJ tasks and routines


>
> Prompted by some recent comments, especially those by Gerald Evenden,
> I'd like to offer one view of what PROJ does, and how those functions
> might be embodied in software--recognizing that what may be easiest to
use,
> is not always easiest to learn. I hope this will provoke reactions, and
> perhaps some ideas that can be used in any future documentation (the ones
> here are available for use, if anyone likes them).
>
> First, definitions: PROJ is the package, proj and cs2cs are
> the routines in it.
>
> I would say that there are three different, though related, activities
> covered by PROJ:
>
> A. Projections
>
> This looks like:
>
>                       ______________________
>              |                      |
> lat/long <===|  projection routine  |====> x/y
>              |______________________|
>
> where the box can go either way. What is inside the box is software
> implementing a set of equations: the important point is that these are
> nothing but mathematics, 99% devoid of empirical content about the Earth
> (the 1% is that the 1/flattening is << 1).
>
> B. Grids
>
> This looks like:
>
>                       ______________________
>              |                      |
> lat/long <===|  projection routine  |====> x/y
>              |______________________|
>
> where what is inside the box is software implementing a set of equations.
If
> this sounds a lot like (A), that is because it is, and with the same
> equations (almost always). But there is a crucial difference, which Cliff
> Mugnier has pointed out on a number of occasions: the parameters in
> these equations (and sometimes the equations themselves) are set "by
> definition" either by a government or a commercial firm. There is a
> bit more empirical information here (specifically, ellipsoid parameters),
> but mostly a lot of semi-arbitrary constants.
>
> (And, there is also the difference that in (A) the x/y are usually in
units
> to be plotted (eventually), in (B) the x/y is, by design, close to actual
> distance on the ellipsoid).
>
> What is also set by legal definition is the *kind* of lat/long that
> is legitimate to feed into the box: that is, the datum. This leads to
> confusion with the next item:
>
>
> C. Datums
>
> This looks like:
>
>                       ________________________________
>              |                                |
> lat/long <===|  datum-transformation routine  |====> lat/long
>              |________________________________|
>
> where now the software implements a quite different set of equations--in
most
> cases pretty simple ones (a rotation and translation, aka "7-parameter
> Helmert") but occasionally more complicated (NAD27 <=> NAD83).  But the
> parameters used are *very* empirical: somebody had to go out and make
> measurements for each datum transformation, though once these measurements
> are made it may also be the case that certain datum transformations are
> taken as being defined. In thinking about the amount of empirical
information
> involved, it might help to realize that the parameters for
> a datum transformation can be wrong, while a grid or projection can't
> be: they are what they are. I happen to live in a place where the
> datum transformations become wrong over time, because of plate tectonics.
> (Of course the implementation of a grid can be wrong, but not the
definition).
>
> Because grid definitions include a statement that the lat/long
> should be "XXX Datum" I think there is a tendency to mix up (B) and (C),
> and hence (A) (B) and (C), even though (C) is quite different from (A) and
> (B). I think this tendency has influenced the evolution of the
package--and
> it has to be said that being able to do (B) and (C) fills a real need not
> covered by other free projection software (eg, the Generic Mapping Tools).
>
> It would keep these distinctions cleaner if proj (the routine)
> did (A) [and hence (B), depending on the parameters set] while there
> was a program called (say) datumtr for doing (C): then one could use
> pipes to get any transformations needed: eg, SPCS on NAD27 to SPCS on
NAD83
> would be (schematically)
>
>     cat SPCS27 | proj -inverse | datumtr -NAD27to83 | proj -forward >
SPCS83
>
> What has happened instead is the cs2cs has combined both (B) and (C);
certainly
> having both is valuable, and I appreciate that what has been done is done,
> but I would urge that whatever is done to cs2cs to allow it specifically
> to perform the combined (B) and (C), not be added to proj, which is thus
> left simpler for the people who just want to do (A). Mission creep can be
> insidious.
>
> I would also argue that proj should continue to implement only
> lat/long <==> x/y, leaving the various 3-d transformations out.
> Since cs2cs handles triples, this could go there--but really, it might
> be better to make this a separate routine, since it is a function of 3
> variables rather than 2. Again, it's a choice between ease of use and
> separate routines for separate activities. (I'd also note that the
> XYZ-to-ellipsoid transform, done accurately over a wide range of ellipsoid
> heights, is something that has attracted a lot of attention in the
geodetic
> literature recently, so some thought would be needed about the appropriate
> algorithm).
>
> Hope this seems right, or at least worth discussing, to others.
>
> Duncan Agnew
> dagnew at ucsd.edu
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Mar  7 11:30:49 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 07 Mar 2003 14:30:49 -0500
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <3E68C023.2030609@pobox.com>
References: <200303071508.HAA06429@bilby.ucsd.edu> 
	<3E68C023.2030609@pobox.com>
Message-ID: <1047065450.1765.167.camel@localhost.localdomain>

To the best of my knowledge, I am caught up on OSRS's *projection*
needs.  If not, please queue up your requests.

In the mean time, I am working on few problems here: 1) review figure
generation using GNUplot, 2) finishing documentation on a couple of
minor projections and 3) considerations on general documentation.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Fri Mar  7 18:21:40 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 8 Mar 2003 11:21:40 +0900
Subject: [OSRS-PROJ] New projection routines??
References: <200303071508.HAA06429@bilby.ucsd.edu> <3E68C023.2030609@pobox.com> <1047065450.1765.167.camel@localhost.localdomain>
Message-ID: <002901c2e519$75f07070$700201c0@MAPQUEST.local>

Hello Gerald,
Thanks for the commitment to the development of the Proj4.
Were the original figures generated with GNUPlot?

On the documentation, someone here started a similar effort,
do not know the state though. You might wish to contact him
for a discussion.

Best regards,
Paul.

----- Original Message ----- 
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: <osrs-proj at remotesensing.org>
Sent: Saturday, March 08, 2003 4:30 AM
Subject: [OSRS-PROJ] New projection routines??


> To the best of my knowledge, I am caught up on OSRS's *projection*
> needs.  If not, please queue up your requests.
> 
> In the mean time, I am working on few problems here: 1) review figure
> generation using GNUplot, 2) finishing documentation on a couple of
> minor projections and 3) considerations on general documentation.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Mar  7 19:53:04 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 07 Mar 2003 22:53:04 -0500
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <002901c2e519$75f07070$700201c0@MAPQUEST.local>
References: <200303071508.HAA06429@bilby.ucsd.edu>
	<3E68C023.2030609@pobox.com>
	<1047065450.1765.167.camel@localhost.localdomain> 
	<002901c2e519$75f07070$700201c0@MAPQUEST.local>
Message-ID: <1047095586.3550.10.camel@localhost.localdomain>

The original figures in the pdf distributions came from two
sources: MAPGEN and PLOTGEN and my device independent plotting
routine.  I have dropped doing anything with both projects as
they are pretty much out of date and I don't know anyone using
them.  Since gnuplot has been around a while and I figure I might
as well use it in any new effort.

Mike Schmidt has started on redoing the documentation but
the last I checked he had been stalled with other duties.
At the moment, my concerns are documenting new material
and not duplicating anything he does although I am interested
in getting the illustrations up to date.

On Fri, 2003-03-07 at 21:21, Paul Selormey wrote:
> Hello Gerald,
> Thanks for the commitment to the development of the Proj4.
> Were the original figures generated with GNUPlot?
> 
> On the documentation, someone here started a similar effort,
> do not know the state though. You might wish to contact him
> for a discussion.
> 
> Best regards,
> Paul.
> 
> ----- Original Message ----- 
> From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
> To: <osrs-proj at remotesensing.org>
> Sent: Saturday, March 08, 2003 4:30 AM
> Subject: [OSRS-PROJ] New projection routines??
> 
> 
> > To the best of my knowledge, I am caught up on OSRS's *projection*
> > needs.  If not, please queue up your requests.
> > 
> > In the mean time, I am working on few problems here: 1) review figure
> > generation using GNUplot, 2) finishing documentation on a couple of
> > minor projections and 3) considerations on general documentation.
> > 
> > ----------------------------------------
> > PROJ.4 Discussion List
> > See http://www.remotesensing.org/proj for subscription, unsubscription
> > and other information.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Fri Mar  7 20:06:23 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 8 Mar 2003 13:06:23 +0900
Subject: [OSRS-PROJ] New projection routines??
References: <200303071508.HAA06429@bilby.ucsd.edu><3E68C023.2030609@pobox.com><1047065450.1765.167.camel@localhost.localdomain> <002901c2e519$75f07070$700201c0@MAPQUEST.local> <1047095586.3550.10.camel@localhost.localdomain>
Message-ID: <000701c2e528$17484520$700201c0@MAPQUEST.local>

Hello Gerald,
Thanks for the response and the information.


> The original figures in the pdf distributions came from two
> sources: MAPGEN and PLOTGEN and my device independent plotting
> routine.  I have dropped doing anything with both projects as
> they are pretty much out of date and I don't know anyone using
> them.  Since gnuplot has been around a while and I figure I might
> as well use it in any new effort.

Hmmm...never heard of MAPGEN and PLOTGEN, have used GNUPlot a
lot in the past.
I hope you will do the plotting routine in C to make it portable to other
platforms too :-)

> Mike Schmidt has started on redoing the documentation but
> the last I checked he had been stalled with other duties.
> At the moment, my concerns are documenting new material
> and not duplicating anything he does although I am interested
> in getting the illustrations up to date.

Yes, he is the one I was refering to. He had some initial problems with
the format, do not know if he is able to resolve it.
I was suggesting LaTeX, since it can be compiled to DVI, PDF, PS etc.

What is the format of the original documentations (before converted to
the pdf)? Can this be released to the public?

Best regards,
Paul.

> On Fri, 2003-03-07 at 21:21, Paul Selormey wrote:
> > Hello Gerald,
> > Thanks for the commitment to the development of the Proj4.
> > Were the original figures generated with GNUPlot?
> >
> > On the documentation, someone here started a similar effort,
> > do not know the state though. You might wish to contact him
> > for a discussion.
> >
> > Best regards,
> > Paul.
> >
> > ----- Original Message -----
> > From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
> > To: <osrs-proj at remotesensing.org>
> > Sent: Saturday, March 08, 2003 4:30 AM
> > Subject: [OSRS-PROJ] New projection routines??
> >
> >
> > > To the best of my knowledge, I am caught up on OSRS's *projection*
> > > needs.  If not, please queue up your requests.
> > >
> > > In the mean time, I am working on few problems here: 1) review figure
> > > generation using GNUplot, 2) finishing documentation on a couple of
> > > minor projections and 3) considerations on general documentation.
> > >
> > > ----------------------------------------
> > > PROJ.4 Discussion List
> > > See http://www.remotesensing.org/proj for subscription, unsubscription
> > > and other information.
> >
> > ----------------------------------------
> > PROJ.4 Discussion List
> > See http://www.remotesensing.org/proj for subscription, unsubscription
> > and other information.
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Mar  8 06:53:19 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 08 Mar 2003 09:53:19 -0500
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <000701c2e528$17484520$700201c0@MAPQUEST.local>
References: 	<200303071508.HAA06429@bilby.ucsd.edu><3E68C023.2030609@pobox.com><104706545
	 0.1765.167.camel@localhost.localdomain>
	<002901c2e519$75f07070$700201c0@MAPQUEST.local>
	<1047095586.3550.10.camel@localhost.localdomain> 
	<000701c2e528$17484520$700201c0@MAPQUEST.local>
Message-ID: <1047135200.1202.17.camel@localhost.localdomain>

On Fri, 2003-03-07 at 23:06, Paul Selormey wrote:
> Hello Gerald,
	...
> Hmmm...never heard of MAPGEN and PLOTGEN, have used GNUPlot a
> lot in the past.
> I hope you will do the plotting routine in C to make it portable to other
> platforms too :-)

I'm too old to use C++ and not old enough to have a second childhood
with FORTRAN, so I do everything is in C.  As for the routines that
do the figure plotting, they are what I call "ad hoc programs."
Something that stays in my desk drawer and is definitely unsuitable
for underage viewing.  This is a family news group.
...
> What is the format of the original documentations (before converted to
> the pdf)? Can this be released to the public?

The man files were necessarily in [r|t]roff but all other documentation
is in LaTeX.

As for their release...Mike knows it was like pulling teeth to
get them out of me.  The whole setup is very chaotic and not
suitable for public distribution.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From karl at kls2.com  Sun Mar  9 01:37:49 2003
From: karl at kls2.com (Karl Swartz)
Date: Sun, 9 Mar 2003 01:37:49 -0800 (PST)
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <1047095586.3550.10.camel@localhost.localdomain> from "Gerald I.
 Evenden" at "Mar 7, 2003 10:53:04 pm"
Message-ID: <200303090937.h299bnNM083072@orion.kls2.com>

> Since gnuplot has been around a while and I figure I might
> as well use it in any new effort.

I can hardly imagine using gnuplot to draw maps.  You could, but it
would be pretty painful -- gnuplot is a tool for plotting/graphing
tabular data.  It's not a general-purpose plotting tool.

 -- Karl
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Mar  9 07:14:29 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 09 Mar 2003 10:14:29 -0500
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <200303090937.h299bnNM083072@orion.kls2.com>
References: <200303090937.h299bnNM083072@orion.kls2.com>
Message-ID: <1047222870.1243.6.camel@localhost.localdomain>

I won't argue.

But tell me of an alternative with a GNU license or equivalence.

I'm just trying to use what's available in the Linux environment.

But the bottom line is this: it replicates the ps files that
are in the PROJ.4 pdfs and the ps files are only about 70% larger
that the ps files generated by my old 'plotter' program.  Gnuplot
has a lot more flexibility than 'plotter'.

On Sun, 2003-03-09 at 04:37, Karl Swartz wrote:
> > Since gnuplot has been around a while and I figure I might
> > as well use it in any new effort.
> 
> I can hardly imagine using gnuplot to draw maps.  You could, but it
> would be pretty painful -- gnuplot is a tool for plotting/graphing
> tabular data.  It's not a general-purpose plotting tool.
> 
>  -- Karl
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From karl at kls2.com  Sun Mar  9 10:47:39 2003
From: karl at kls2.com (Karl Swartz)
Date: Sun, 9 Mar 2003 10:47:39 -0800 (PST)
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <1047222870.1243.6.camel@localhost.localdomain> from "Gerald I.
 Evenden" at "Mar 9, 2003 10:14:29 am"
Message-ID: <200303091847.h29Ild6x013815@orion.kls2.com>

> But tell me of an alternative with a GNU license or equivalence.

Good question.  I don't really know of any, though I don't do much with
PostScript.

> But the bottom line is this: it replicates the ps files that
> are in the PROJ.4 pdfs and the ps files are only about 70% larger
> that the ps files generated by my old 'plotter' program.  Gnuplot
> has a lot more flexibility than 'plotter'.

Fascinating.  I would have expected gnuplot to do a crude and cumbersome
job at best.  Would you mind sharing the commands you're using (and a
bit of sample data) so this old dog can learn some new tricks?  Thanks!

 -- Karl
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Mar  9 13:44:47 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 09 Mar 2003 16:44:47 -0500
Subject: [OSRS-PROJ] New projection routines??
In-Reply-To: <200303091847.h29Ild6x013815@orion.kls2.com>
References: <200303091847.h29Ild6x013815@orion.kls2.com>
Message-ID: <1047246289.2826.47.camel@localhost.localdomain>

The following is the bash script I use to generate most of the
pseudo cylindrical illustrations.  The last bit is the control
string for 'gnuplot'.  Procedure coast reads world coast line data,
passes it through a call to the PJ library and transfers the
resultant xy vectors to the scratch file.  Procedure graticule
generates a graticule of constant lat-lon lines, passes ll data
though a call to PJ lib and concatinates the xy output to the
scratch file.  Finally, the scratch file is passed to gnuplot which
outputs an eps.

Execute as:
  proto eck4
First arg is projection name. A second arg contains any added
+operation details.  None In this case.

Process is pretty speedy:

[gie at localhost figs]$ time ./proto times
+proj=times

real    0m0.390s
user    0m0.156s
sys     0m0.018s

# prototype for generating illustration
BASE=/home/gie/MAPGEN
BIN=PROJ.4/graphics
COAST=$BASE
proj="+proj=$1 $2"
echo $proj
coastarg=.3,-180,180,-90,90
gratarg=.001,15,,-180,180,90,-90,90

$BASE/$BIN/graticule $gratarg $proj +R=1 >data.dat
echo -e "\n" >>data.dat
zcat $COAST/world | \
$BASE/$BIN/coast $coastarg $proj +R=1 >>data.dat
gnuplot <<EOF
set output "$1.eps"
set terminal postscript eps
set data style lines
set bmargin 0
set rmargin 0
set tmargin 0
set lmargin 0
set nolabel
set noxtics
set noytics
set nokey
set noborder
plot 'data.dat'
EOF

The main reason that gnuplot files are longer than 'plotter'
output is each output vector element in gnuplot looks like

-36 224 V
-25 215 V
-18 416 V

whereas plotter would generate something like:

-36 224 -25 215 -18 416 V

That is, a long string of delta pairs before doing a plot command.
Gnuplot also has an overhead of spec'ing characters in the
preample that plotter did not but that is only a 1 or 2k
overhead.

<blank>V per line takes a lot of bytes.

Gnuplot is fairly sophisticated, this job is pretty crude and
does not exercise the program.  I'm mostly turning off options.

On Sun, 2003-03-09 at 13:47, Karl Swartz wrote:
> > But tell me of an alternative with a GNU license or equivalence.
> 
> Good question.  I don't really know of any, though I don't do much with
> PostScript.
> 
> > But the bottom line is this: it replicates the ps files that
> > are in the PROJ.4 pdfs and the ps files are only about 70% larger
> > that the ps files generated by my old 'plotter' program.  Gnuplot
> > has a lot more flexibility than 'plotter'.
> 
> Fascinating.  I would have expected gnuplot to do a crude and cumbersome
> job at best.  Would you mind sharing the commands you're using (and a
> bit of sample data) so this old dog can learn some new tricks?  Thanks!
> 
>  -- Karl

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Wed Mar 12 11:57:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 12 Mar 2003 14:57:03 -0500
Subject: [OSRS-PROJ] Re: [GRASS5] Fixing up projection related code...
In-Reply-To: <Pine.LNX.4.53.0303121437040.7775@agrippa.ukshells.co.uk>
References: <20020826081905.GA14173@calico.local> <Pine.LNX.4.50.0302022137040.25078-100000@agrippa.ukshells.co.uk> <3E3D994E.8070703@pobox.com> <Pine.LNX.4.53.0303121437040.7775@agrippa.ukshells.co.uk>
Message-ID: <3E6F910F.7080004@pobox.com>

Paul Kelly wrote:
> This is what I have chosen to go for, implementing a new file
> ('datumtransform.table') which can contain multiple entries for each
> datum. There are 4 fields: datum name, transformation parameters in PROJ.4
> syntax, "Where Used" and "Comment". The last two fields should be
> descriptive and help the user to pick the appropriate parameters.
> 
> It doesn't really make sense the way it is partially currently implemented
> in GRASS, to look up a 3-parameter transform from the datum.table and
> just use it, because as Frank said each datum may have many different
> tranformations associated with it and GRASS shouldn't pretend to be able to
> choose the best one for the user when really it needs a human making the
> decision. E.g. someone might want to use an old or custom set of parameters
> simply for compatibility with existing data.
> 
> So after selection, the datum transformation parameters will be stored in
> the PROJ_INFO file under the new key 'datumparams'.
> E.g. 'datumparams: towgs84=a,b,c' will be equivalent to the old
> 'dx: a' 'dy: b' and 'dz: c'. The pj_get_kv() wrapper function will still
> interpret the old style properly but g.setproj will only write new-style
> PROJ_INFO files.

Paul,

Do correctly understand then that each named datum in the datumtransform
table will have a *default* transformation to use with the datum, but that
by explicitly including the transformation in the PROJ_INFO file it is
intended to be easy for users to alter what transformation values are used?

> Regarding passing ellipsoid and datum names onto PROJ.4, this will only be
> done if GRASS doesn't recognise the names from its own ellipse.table and
> datum.table files. Otherwise the underlying parameters will be passed on
> but not the names. This will probably solve bug 1047 with the problem with
> the PROJ_INFO files r.in.gdal automatically creates but I will have a look
> at it soon as well.

Right.  I would add that there is a pj_get_def() function in PROJ.4 which can
be used to get an "expanded" definition of a PROJ.4 coordinate system string.
For instance, it will expand a +datum= into the actual transformation values
that would be used with it.  This is intended to be useful for applications
that want to find out the magic in certain coordinate system definitions.
This also could be used to fetch back details from lookups from the various
"cookbook" coordinate system files, like the state plane ones, and the EPSG
database.

>>I do think that import programs that report projection information, or
>>offer to setup new locations (like r.in.gdal) should offer the transformation
>>used if possible.
>
> I don't really think that programs that import data should try to
> reproject it. This is getting too complicated and then there would be too
> many modules to try to keep up to date. The conventional GRASS way seems
> to be to import the data into a location with the correct projection, then
> reproject it to your target location using [rsv].proj.

I meant that an import program like r.in.gdal should be able to associate
particular datum shift transformation information with the dataset.  That is
if it knows that a non-default datum shift should be used it could populate
the PROJ_INFO file with it.  This would seem to be very easy with your
approach.

> Some points I would appreciate if people could comment on:
> As far as I can make out a datum has a one-to-many relationship with datum
> transformations, and one-to-one with ellipsoid and prime meridian. Neither
> the datum lists in GRASS nor PROJ.4 include space for an associated prime
> meridian so I'm wondering is this correct. I would like to make the GRASS
> format as correct as possible. Probably I should investigate how PROJ.4
> uses prime meridians but I don't really have that much spare time at the
> minute and would appreciate a hint.

I don't see the prime meridian as an attribute of the datum, though it is
an attribute of a geographic coordinate system based on the datum.  That is,
I think the prime meridian handling is orthagonal to the datum shift info.

>>That info should be in the PROJ_INFO file, IMHO.  Anyway, I thought
>>we could have a Coordinate_System directory that g.setproj could
>>use.  So far, with my state plane files, I have something like:
>>
>>Coordinate_Systems/
>>   Projected/
>>      North_American/
>>         State_Plane_1927/
>>            State_Plane_Alabama_East
>>            State_Plane_Alabama_West
>>            ...
>>            State_Plane_Wyoming_West_Central
>>         State_Plane_1983/
>>            ...
>>
>>This kind of thing is easy enough to add to, and g.setproj could
>>just use directory traversals until the user selects a file, then
>>just copy the file to the new location...
> 
> 
> This sounds like a good idea but what are directory traversals and how
> should they be implemented in g.setproj? There should be a GUI version as
> well to make it look user-friendly and nice as g.setproj is a lot of
> people's first encounter with a GRASS command (mine anyway and I spent
> days over it) and it is really a terrible piece of software and very
> off-putting. Is it all right to use Tcl/Tk in GRASS 5.1 or will there be
> a different GUI?

I agree that some degree of categorization of coordinate system definitions
would be desirable.  In many systems I have looked at there is really just
one level of categorization, but each pre-defined coordinate system can be
part of more than one group.  So the groups might include:

   Common
   NAD27 State Plane
   NAD83 State Plane
   European
   North American
   EPSG Projected Coordinate Systems
   EPSG Geographic Coordinate Systems

and so on.

Some coordinate systems might appear in several groupings.  If something like
this is built, I would ideally like to see it implemented within PROJ.4, so
that other systems could easily take advantage of it.  If done within PROJ.4,
one approach would be to use each "initialization" file as a group, and add
a mechanism to supply some of the auxilary information with each coordinate
system.  The existing EPSG, and state plane files would be a good start.

I am cc:ing this to the PROJ.4 list for possible additional comment.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Mar 13 13:53:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 13 Mar 2003 16:53:34 -0500
Subject: [OSRS-PROJ] Datum Shifts 
Message-ID: <3E70FDDE.2070209@pobox.com>

Folks,

I am working on implementation of NTv2 support, and as part of that effort
I am trying to add a small test script for the existing datum support ... try
to make sure I don't break anything while improving things.

In doing so, I have started looking at the files for datum shifting and
realized I am confused about them.

The files conus.lla, alaska.lla, hawaii.lla, prvi.lla, stgeorge.lla,
stlrnc.lla, and stpaul.lla are all apparently files with grid shifts from
NAD27 to NAD83, right?

The files FL.lla, MD.lla, TN.lla, WI.lla and WD.lla are listed in the
README as being for "high precision conversion of geographic coordinates
from NAD83 to NAD83".  What does that mean?  I presume this relates to
HPGN, which I gather is a higher precision form of NAD83, is that right?
Do these files shift from "old NAD83" to "HPGN NAD83" or the other way?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Thu Mar 13 14:59:13 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Thu, 13 Mar 2003 16:59:13 -0600
Subject: [OSRS-PROJ] Datum Shifts
Message-ID: <OF04A82D1B.2DDE36AE-ON86256CE8.007E4437-86256CE8.007E45BF@lsu.edu>


Frank,

You are correct regarding the HARN interpolation files.  They may be used
to go in either direction with the original NAD83.  Note that NTv2 has a
variable mesh grid because of the great expanses of Canada that had zero
control points.  NADCON on the other hand, has a constant mesh grid.  I
have not compared the bi-linear interpolation code between NADCON and NTv2,
so I don't know if "one size fits all."

I would guess that one can convert in either direction for Canada also.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
------------------------------------
Folks,

I am working on implementation of NTv2 support, and as part of that effort
I am trying to add a small test script for the existing datum support ...
try
to make sure I don't break anything while improving things.

In doing so, I have started looking at the files for datum shifting and
realized I am confused about them.

The files conus.lla, alaska.lla, hawaii.lla, prvi.lla, stgeorge.lla,
stlrnc.lla, and stpaul.lla are all apparently files with grid shifts from
NAD27 to NAD83, right?

The files FL.lla, MD.lla, TN.lla, WI.lla and WD.lla are listed in the
README as being for "high precision conversion of geographic coordinates
from NAD83 to NAD83".  What does that mean?  I presume this relates to
HPGN, which I gather is a higher precision form of NAD83, is that right?
Do these files shift from "old NAD83" to "HPGN NAD83" or the other way?

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ed at topozone.com  Thu Mar 13 15:25:40 2003
From: ed at topozone.com (Ed McNierney)
Date: Thu, 13 Mar 2003 18:25:40 -0500
Subject: [OSRS-PROJ] Datum Shifts 
Message-ID: <13858AA1A74F30419F319ACB66A9D122019639@mercator.topozone.com>

Frank -

Yes, the conus, Alaska, Hawaii, prvi, stgeorge, stlrnc, and stpaul files
make up the NAD27 grid shift set; as far as I'm aware they are the only
files used for NAD27 definitions in PROJ.  The HARN files are used in
bidirectional conversions in NAD83.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed at topozone.com


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam at pobox.com] 
Sent: Thursday, March 13, 2003 4:54 PM
To: PROJ.4 Discussion
Subject: [OSRS-PROJ] Datum Shifts 

Folks,

I am working on implementation of NTv2 support, and as part of that
effort
I am trying to add a small test script for the existing datum support
... try
to make sure I don't break anything while improving things.

In doing so, I have started looking at the files for datum shifting and
realized I am confused about them.

The files conus.lla, alaska.lla, hawaii.lla, prvi.lla, stgeorge.lla,
stlrnc.lla, and stpaul.lla are all apparently files with grid shifts
from
NAD27 to NAD83, right?

The files FL.lla, MD.lla, TN.lla, WI.lla and WD.lla are listed in the
README as being for "high precision conversion of geographic coordinates
from NAD83 to NAD83".  What does that mean?  I presume this relates to
HPGN, which I gather is a higher precision form of NAD83, is that right?
Do these files shift from "old NAD83" to "HPGN NAD83" or the other way?

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Mar 13 16:45:42 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 13 Mar 2003 19:45:42 -0500
Subject: [OSRS-PROJ] Datum Shifts 
In-Reply-To: <3E70FDDE.2070209@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAIECJCNAA.nhv@cape.com>

Frank Warmerdam writes:
>
> I am working on implementation of NTv2 support, and as part of that effort
> I am trying to add a small test script for the existing datum  support ...
try
> to make sure I don't break anything while improving things.
>
> In doing so, I have started looking at the files for datum shifting and
> realized I am confused about them.
>
> The files conus.lla, alaska.lla, hawaii.lla, prvi.lla, stgeorge.lla,
> stlrnc.lla, and stpaul.lla are all apparently files with grid shifts from
> NAD27 to NAD83, right?
>
> The files FL.lla, MD.lla, TN.lla, WI.lla and WD.lla are listed in the
> README as being for "high precision conversion of geographic coordinates
> from NAD83 to NAD83".  What does that mean?  I presume this relates to
> HPGN, which I gather is a higher precision form of NAD83, is that right?
> Do these files shift from "old NAD83" to "HPGN NAD83" or the other way?


See

http://www.ngs.noaa.gov/faq.shtml#WhatHARN
http://www.ngs.noaa.gov/TOOLS/Nadcon/Nadcon.html
ftp://ftp.ngs.noaa.gov/pub/pcsoft/nadcon/Readme.txt
http://www.ngs.noaa.gov/PUBS_LIB/NGS50.pdf

HTH

Norman



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From elrod at oaktownunderground.com  Thu Mar 13 22:53:08 2003
From: elrod at oaktownunderground.com (Leah Roderman)
Date: Thu, 13 Mar 2003 22:53:08 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
Message-ID: <14839805.1047624788422.JavaMail.root@homer.codemagi.com>

Hello, I'm running into a problem with proj-4.4.6 not finding the epsg file. I am using proj4 with MapServer 3.6.4 on RedHat8.0, and compiled proj4 (using gcc 3.2) first with default option, and then MapServer (using gcc 2.95). From what I've read, everything is located where it should be, so I'm wondering what I missed.

The error is produced by using the term "init=espg:102003" in a MapServer projection layer. This epsg code corresponds to Albers NAD83 in the epsg file. Output to browser is "msProcessProjection(): Projection library error. no system list, errno: 2"

MapServer says it recognizes proj4: 

# cgi-bin/mapserv -v
MapServer version 3.6.4 OUTPUT=PNG OUTPUT=JPEG OUTPUT=WBMP SUPPORTS=PROJ SUPPORTS=TTF SUPPORTS=WMS_SERVER INPUT=TIFF INPUT=EPPL7 INPUT=JPEG INPUT=POSTGIS INPUT=GDAL INPUT=SHAPEFILE

system knows proj:

# which proj
/usr/local/bin/proj
# /usr/local/bin/proj -v
Rel. 4.4.6, 3 March 2003
<proj>: 
projection initialization failure
cause: no arguments in initialization list
program abnormally terminated

nad dir exists where supposed to:

# ls /usr/local/share/proj/
epsg  GL27   nad83    pj_out27.dist  proj_def.dat  test83
esri  nad27  nad.lst  pj_out83.dist  test27        world

Perhaps permissions? all owned by root, 644. Hmmmm, what else. No mention of epsg in config.log

Thanks for the help, hope this sparks some recognition for someone...

- Leah
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Mar 13 23:27:29 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Mar 2003 02:27:29 -0500
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <14839805.1047624788422.JavaMail.root@homer.codemagi.com>
References: <14839805.1047624788422.JavaMail.root@homer.codemagi.com>
Message-ID: <3E718461.6000802@pobox.com>

Leah Roderman wrote:
> Hello, I'm running into a problem with proj-4.4.6 not finding the epsg file.
> I am using proj4 with MapServer 3.6.4 on RedHat8.0, and compiled proj4 (using
> gcc 3.2) first with default option, and then MapServer (using gcc 2.95). From
> what I've read, everything is located where it should be, so I'm wondering
> what I missed.
> 
> The error is produced by using the term "init=espg:102003" in a MapServer
> projection layer. This epsg code corresponds to Albers NAD83 in the epsg
> file. Output to browser is "msProcessProjection(): Projection library error.
> no system list, errno: 2"
> 
> MapServer says it recognizes proj4:
> 
> # cgi-bin/mapserv -v MapServer version 3.6.4 OUTPUT=PNG OUTPUT=JPEG
> OUTPUT=WBMP SUPPORTS=PROJ SUPPORTS=TTF SUPPORTS=WMS_SERVER INPUT=TIFF
> INPUT=EPPL7 INPUT=JPEG INPUT=POSTGIS INPUT=GDAL INPUT=SHAPEFILE
> 
> system knows proj:
> 
> # which proj /usr/local/bin/proj # /usr/local/bin/proj -v Rel. 4.4.6, 3 March
> 2003 <proj>: projection initialization failure cause: no arguments in
> initialization list program abnormally terminated
> 
> nad dir exists where supposed to:
> 
> # ls /usr/local/share/proj/ epsg  GL27   nad83    pj_out27.dist  proj_def.dat
> test83 esri  nad27  nad.lst  pj_out83.dist  test27        world
> 
> Perhaps permissions? all owned by root, 644. Hmmmm, what else. No mention of
> epsg in config.log

Hi,

I would suggest:

  o trying to see if "proj -V +init=epsg:102003" works properly.
  o Does you mapserver running under apache have read permissions
    down into /usr/local/share/proj?
  o set the PROJ_DEBUG environment variable and see what it reports
    about opening supporting files.  (just set it to anything).
  o Set the PROJ_LIB environment variable to /usr/local/share/proj

I think the mostly likely problem is not having read permission to
the file for the user under which your mapserver runs.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Mar 14 06:28:42 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Mar 2003 09:28:42 -0500
Subject: [OSRS-PROJ] Datum Shifts
In-Reply-To: <3EA3B2F7.9050305@huckfinn.de>
References: <3E70FDDE.2070209@pobox.com> <3EA3B2F7.9050305@huckfinn.de>
Message-ID: <3E71E71A.7060908@pobox.com>

Alexander Weidauer wrote:
> Hi Folks,
> 
> I've implemented the code for the nad2bin tool but I can't find
> the files
> 
>      MD.lla
>      TN.lla
>      WI.lla
>      WO.lla
>      alaska.lla
>      hawaii.lla
>      prvi.lla
>      stgeorge.lla
>      stlrnc.lla
>      stpaul.lla    .
> 
> Now I ask how to integrate them.

Alexander,

They are in ftp://ftp.remotesensing.org/pub/proj/proj-nad27-1.1.tar.gz

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Mar 14 08:51:30 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Mar 2003 11:51:30 -0500
Subject: [OSRS-PROJ] projection precision
Message-ID: <1047660691.1812.35.camel@localhost.localdomain>

Because there was a discussion about projection precision
related to the truncated conformal conic I wanted to know what
the reaction would be to increased projection precision in general.

Case in point: the routine to compute the distance along a
meridian to a specified latitude has always be "truncated"
and limited in precision.  Original GCTP wasn't much better
than a few millimeters and later PROJ has a 1x10^-5 meter
version.  In my closet for a number of years is a 1x10^-9
meter version (limit of Intel 64 bit double).  Now I have
an adaptable precision version good for any size double.

"Get to the point Evenden."

Ok, what is going to be the
reaction if a new release of UTM produced different numbers
in the sub-millimeter range than the previous versions?
Is this going to cause panic?

For the moment, initialization, forward and inverse calls
are the same as the old pj_enfn, pj_mlfn and pj_inv_mlfn
except that the returned double pointer of pj_enfn is now
a void structure pointer.

Note: the dumb names are carry overs from GCTP.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Mar 14 10:59:19 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Mar 2003 13:59:19 -0500
Subject: [OSRS-PROJ] Datum Shifts
In-Reply-To: <3EA42C48.5000401@huckfinn.de>
References: <3E70FDDE.2070209@pobox.com> <3EA3B2F7.9050305@huckfinn.de> <3E71E71A.7060908@pobox.com> <3EA42C48.5000401@huckfinn.de>
Message-ID: <3E722687.7090604@pobox.com>

Alexander Weidauer wrote:

> Hi Frank,
> 
> I've integrated them into the Makefile for the Borland-C 5.5 all runs 
> fine. Shall I integrate into my downloadable library ..I think not
> you should maintain the code.
> 
> A second question.
> 
> We want startup writing a free spatial library for Delphi/Kylix 
> programmers. Can we apply the PROJ and the ShapeLib code in this
> project. Here the link to the source forge:
> 
> http://dspatial.sourceforge.net/

Alex,

Cool!  Have you announced this effort on the freegis list?  I think it would
be a good idea.

Of course you are welcome to use shapelib and PROJ.

I would like to encourage you to build on GDAL and OGR for raster and
vector format access.  Of course use of GDAL and OGR might be against your
lean and mean motto, but it would give you a bunch of capabilities in short
order rather than tying to a bunch of ideosyncratic C libraries for different
formats.

OGR also contains a higher level coordinate system abstraction built on PROJ.4.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Mar 14 22:06:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 15 Mar 2003 01:06:03 -0500
Subject: [OSRS-PROJ] NTv2 (.gsb) grid shifting support
Message-ID: <3E72C2CB.1020009@pobox.com>


Folks,

I have preliminary support for Canadian NTv2 grid shift files incorporated
into PROJ.4 with some major flaws still (it does not pick the most refined
grid).  This is the same .gsb format used by some other organizations,
notably in Australia.

I write this to warn people that the structural changes in PROJ.4 (in the
datum shifting area) were substantial and are not really quite complete
so take care using PROJ.4 from CVS for a week or so.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Fri Mar 14 22:44:29 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 15 Mar 2003 15:44:29 +0900
Subject: [OSRS-PROJ] NTv2 (.gsb) grid shifting support
References: <3E72C2CB.1020009@pobox.com>
Message-ID: <000701c2eabe$56ad29b0$700201c0@MAPQUEST.local>

Hello Frank,
Since Proj4 is a working code being used in many applications,
I think it will be better to commit only working codes.

Not everyone will read this, and some may even join the list
later. In fact, you do not have to join the list to use the Proj4 :((

Best regards,
Paul.

----- Original Message -----
From: "Frank Warmerdam" <warmerdam at pobox.com>
To: "PROJ.4 Discussion" <osrs-proj at remotesensing.org>
Sent: Saturday, March 15, 2003 3:06 PM
Subject: [OSRS-PROJ] NTv2 (.gsb) grid shifting support


>
> Folks,
>
> I have preliminary support for Canadian NTv2 grid shift files incorporated
> into PROJ.4 with some major flaws still (it does not pick the most refined
> grid).  This is the same .gsb format used by some other organizations,
> notably in Australia.
>
> I write this to warn people that the structural changes in PROJ.4 (in the
> datum shifting area) were substantial and are not really quite complete
> so take care using PROJ.4 from CVS for a week or so.
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From carl.anderson at vadose.org  Sat Mar 15 20:59:06 2003
From: carl.anderson at vadose.org (Carl Anderson)
Date: Sat, 15 Mar 2003 23:59:06 -0500
Subject: [OSRS-PROJ] Re: Proj Bug #298 solaris bld
Message-ID: <20030316045906.GA32080@vadose.dvg>


for Solaris 2.7 Sparc

I had similar problems compiling proj-4.4.6 when I was in a
csh or tcsh shell.

changing the shell to bash or sh both result in a clean working compile.


C.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From elrod at oaktownunderground.com  Sun Mar 16 14:00:37 2003
From: elrod at oaktownunderground.com (Leah Roderman)
Date: Sun, 16 Mar 2003 14:00:37 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <3E718461.6000802@pobox.com>
Message-ID: <1142953.1047852037902.JavaMail.root@homer.codemagi.com>

Thanks for the debug tips Frank -- it does appear to be a permissions problem since passing the epsg code from the command line works just fine. I neglected to mention that my MapServer is being invoked by an Apache virtual host -- still some tweaking to do.

- L

>Leah Roderman wrote:
>> Hello, I'm running into a problem with proj-4.4.6 not finding the epsg file.
>> I am using proj4 with MapServer 3.6.4 on RedHat8.0, and compiled proj4 (using
>> gcc 3.2) first with default option, and then MapServer (using gcc 2.95). From
>> what I've read, everything is located where it should be, so I'm wondering
>> what I missed.
>> 
>> The error is produced by using the term "init=espg:102003" in a MapServer
>> projection layer. This epsg code corresponds to Albers NAD83 in the epsg
>> file. Output to browser is "msProcessProjection(): Projection library error.
>> no system list, errno: 2"
>> 
>> MapServer says it recognizes proj4:
>> 
>> # cgi-bin/mapserv -v MapServer version 3.6.4 OUTPUT=PNG OUTPUT=JPEG
>> OUTPUT=WBMP SUPPORTS=PROJ SUPPORTS=TTF SUPPORTS=WMS_SERVER INPUT=TIFF
>> INPUT=EPPL7 INPUT=JPEG INPUT=POSTGIS INPUT=GDAL INPUT=SHAPEFILE
>> 
>> system knows proj:
>> 
>> # which proj /usr/local/bin/proj # /usr/local/bin/proj -v Rel. 4.4.6, 3 March
>> 2003 <proj>: projection initialization failure cause: no arguments in
>> initialization list program abnormally terminated
>> 
>> nad dir exists where supposed to:
>> 
>> # ls /usr/local/share/proj/ epsg  GL27   nad83    pj_out27.dist  proj_def.dat
>> test83 esri  nad27  nad.lst  pj_out83.dist  test27        world
>> 
>> Perhaps permissions? all owned by root, 644. Hmmmm, what else. No mention of
>> epsg in config.log
>
>Hi,
>
>I would suggest:
>
>  o trying to see if "proj -V +init=epsg:102003" works properly.
>  o Does you mapserver running under apache have read permissions
>    down into /usr/local/share/proj?
>  o set the PROJ_DEBUG environment variable and see what it reports
>    about opening supporting files.  (just set it to anything).
>  o Set the PROJ_LIB environment variable to /usr/local/share/proj
>
>I think the mostly likely problem is not having read permission to
>the file for the user under which your mapserver runs.
>
>Good luck,
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>----------------------------------------
>PROJ.4 Discussion List
>See http://www.remotesensing.org/proj for subscription, unsubscription
>and other information.
>
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From elrod at oaktownunderground.com  Tue Mar 18 15:49:50 2003
From: elrod at oaktownunderground.com (Leah Roderman)
Date: Tue, 18 Mar 2003 15:49:50 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <3E718461.6000802@pobox.com>
Message-ID: <8469194.1048031390932.JavaMail.root@homer.codemagi.com>

Hello, I'm seeing the following error in my Apache error log after setting PROJ_DEBUG. This from MapServer 3.4.6 on RedHat 8.0 with proj-4.4.6...

[Tue Mar 18 15:06:44 2003] [error] [client 63.204.130.104] pj_open_lib(proj_def.dat): call fopen(/usr/local/share/proj/proj_def.dat).

I was expecting a permissions error on the file, but this looks as if pj_open_lib() is producing an error from unsucessfully calling fopen(). The path and file are correct, so my next step was going to be examining PHP version details.

thanks much!

- Leah
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Tue Mar 18 20:05:25 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 18 Mar 2003 23:05:25 -0500
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <8469194.1048031390932.JavaMail.root@homer.codemagi.com>
References: <8469194.1048031390932.JavaMail.root@homer.codemagi.com>
Message-ID: <3E77EC85.6060406@pobox.com>

Leah Roderman wrote:
> Hello, I'm seeing the following error in my Apache error log after 
 > setting PROJ_DEBUG. This from MapServer 3.4.6 on RedHat 8.0 with
 > proj-4.4.6...
> 
> [Tue Mar 18 15:06:44 2003] [error] [client 63.204.130.104] pj_open_lib(proj_def.dat): call fopen(/usr/local/share/proj/proj_def.dat).
> 
> I was expecting a permissions error on the file, but this looks as if 
 > pj_open_lib() is producing an error from unsucessfully calling fopen().
 >  The path and file are correct, so my next step was going to be examining
 > PHP version details.

Leah,

When PROJ_DEBUG is defined, libproj produces a variety of output to stderr,
but that isn't meant to imply an actual error has occured.  With the current
code (in CVS) the word "failed" or "succeeded" comes after the above message.
Perhaps it doesn't do that in 4.4.6?  I am surprised.

Note that the normal problem people encounter is that the "nobody" user
doesn't have read access on /usr/local/share/proj/* for some reason.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From elrod at oaktownunderground.com  Wed Mar 19 10:22:00 2003
From: elrod at oaktownunderground.com (Leah Roderman)
Date: Wed, 19 Mar 2003 10:22:00 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <3E77EC85.6060406@pobox.com>
Message-ID: <13787741.1048098120395.JavaMail.root@homer.codemagi.com>

No, I haven't seen any output of "failed" or "succeeded" in my log. When I use "init=espg:2163" in my projection, Apache logs an error and MapServer outputs to browser the projection library error; using "proj=aea" I only see the error in the Apache log.

I've done quite a bit of tinkering with the access, such as setting all permissions on for /usr/local/share/proj, changing Apache user to one with broad privileges, setting PROJ_LIB to a distinct directory owned by Apache user, testing /usr/local/bin/proj_def.dat as an option...etc. Nothing seems to make a difference. But to safely eliminate access to system libs as a problem, it seems unlikely that I could run proj from the command line if it couldn't access stdio.h. So, back to the access investigation...

(ignore mention of PHP earlier, just me getting my fopen() confused.)

>Leah Roderman wrote:
>> Hello, I'm seeing the following error in my Apache error log after 
> > setting PROJ_DEBUG. This from MapServer 3.4.6 on RedHat 8.0 with
> > proj-4.4.6...
>> 
>> [Tue Mar 18 15:06:44 2003] [error] [client 63.204.130.104] pj_open_lib(proj_def.dat): call fopen(/usr/local/share/proj/proj_def.dat).
>> 
>> I was expecting a permissions error on the file, but this looks as if 
> > pj_open_lib() is producing an error from unsucessfully calling fopen().
> >  The path and file are correct, so my next step was going to be examining
> > PHP version details.
>
>Leah,
>
>When PROJ_DEBUG is defined, libproj produces a variety of output to stderr,
>but that isn't meant to imply an actual error has occured.  With the current
>code (in CVS) the word "failed" or "succeeded" comes after the above message.
>Perhaps it doesn't do that in 4.4.6?  I am surprised.
>
>Note that the normal problem people encounter is that the "nobody" user
>doesn't have read access on /usr/local/share/proj/* for some reason.
>
>Best regards,
>
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>----------------------------------------
>PROJ.4 Discussion List
>See http://www.remotesensing.org/proj for subscription, unsubscription
>and other information.
>
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jbinpg at shaw.ca  Wed Mar 19 18:59:31 2003
From: jbinpg at shaw.ca (Jack Bowling)
Date: Wed, 19 Mar 2003 18:59:31 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <13787741.1048098120395.JavaMail.root@homer.codemagi.com>
References: <3E77EC85.6060406@pobox.com> <13787741.1048098120395.JavaMail.root@homer.codemagi.com>
Message-ID: <20030320025931.GD15118@nonesuch>

On Wed, Mar 19, 2003 at 10:22:00AM -0800, Leah Roderman wrote:
> No, I haven't seen any output of "failed" or "succeeded" in my log. When I use "init=espg:2163" in my projection, Apache logs an error and MapServer outputs to browser the projection library error; using "proj=aea" I only see the error in the Apache log.
> 
> I've done quite a bit of tinkering with the access, such as setting all permissions on for /usr/local/share/proj, changing Apache user to one with broad privileges, setting PROJ_LIB to a distinct directory owned by Apache user, testing /usr/local/bin/proj_def.dat as an option...etc. Nothing seems to make a difference. But to safely eliminate access to system libs as a problem, it seems unlikely that I could run proj from the command line if it couldn't access stdio.h. So, back to the access investigation...

Leah - Have you tried adding the proj library directory to
/etc/ld.so.conf and then running /sbin/ldconfig?

-- 
Jack Bowling
mailto: jbinpg at shaw.ca
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From elrod at oaktownunderground.com  Thu Mar 20 09:04:58 2003
From: elrod at oaktownunderground.com (Leah Roderman)
Date: Thu, 20 Mar 2003 09:04:58 -0800
Subject: [OSRS-PROJ] proj-4.4.6 can't find epsg
In-Reply-To: <20030320025931.GD15118@nonesuch>
Message-ID: <3224421.1048179898941.JavaMail.root@homer.codemagi.com>


>On Wed, Mar 19, 2003 at 10:22:00AM -0800, Leah Roderman wrote:
>> No, I haven't seen any output of "failed" or "succeeded" in my log. When I use "init=espg:2163" in my projection, Apache logs an error and MapServer outputs to browser the projection library error; using "proj=aea" I only see the error in the Apache log.
>> 
>> I've done quite a bit of tinkering with the access, such as setting all permissions on for /usr/local/share/proj, changing Apache user to one with broad privileges, setting PROJ_LIB to a distinct directory owned by Apache user, testing /usr/local/bin/proj_def.dat as an option...etc. Nothing seems to make a difference. But to safely eliminate access to system libs as a problem, it seems unlikely that I could run proj from the command line if it couldn't access stdio.h. So, back to the access investigation...
>
>Leah - Have you tried adding the proj library directory to
>/etc/ld.so.conf and then running /sbin/ldconfig?

Yup, no luck there either. Another possibility I am considering is my MapServer build.

My immediate workaround has been to run my latlong data as a batch file through proj (works like a charm) and just update my database accordingly. So, no projection on the fly for the time being, but I'll build MapServer again once I confirm that it's playing nice with other components.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From planke at vbpr.no  Fri Mar 21 09:16:02 2003
From: planke at vbpr.no (Sverre Planke)
Date: Fri, 21 Mar 2003 18:16:02 +0100
Subject: [OSRS-PROJ] Problems with cs2cs...
Message-ID: <3E7B48D2.6090901@vbpr.no>


Hello:

I have downloaded proj-4.4.6 and installed it
on a Linux box today. But I can not get
cs2cs to reproduce the test results... (se below)
Any suggestions on what could be wrong...

Thankx.

s.

#!/bin/csh
set CC=(/usr/local/PROJ4/proj-4.4.6/bin/cs2cs)

$CC +proj=latlong +datum=NAD83 +to +proj=utm +zone=10 +datum=NAD27 -r  <<EOF
45d15'33.1"     111.5W
45d15.551666667N        -111d30
+45.25919444444 111d30'000w
EOF
*       * 0.000
53329298.26     0.00 0.000
53329298.26     0.00 0.000


-- 
Sverre Planke
   Daglig leder (CEO)
   Volcanic Basin Petroleum Research AS
   Forskningsparken, Gaustadalleen 21
   0349 Oslo, Norway
Phone : +47-2295 8924
Mobile: +47-9575 6097
Email : planke at vbpr.no
Web   : vbpr.no


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Mar 21 10:01:11 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 21 Mar 2003 13:01:11 -0500
Subject: [OSRS-PROJ] Problems with cs2cs...
In-Reply-To: <3E7B48D2.6090901@vbpr.no>
References: <3E7B48D2.6090901@vbpr.no>
Message-ID: <3E7B5367.6010700@pobox.com>

Sverre Planke wrote:
> 
> Hello:
> 
> I have downloaded proj-4.4.6 and installed it
> on a Linux box today. But I can not get
> cs2cs to reproduce the test results... (se below)
> Any suggestions on what could be wrong...

Sverre,

I think you likely haven't included the datum shift files before
building and installing.  There is more info on this near the top of
the FAQ:

   http://www.remotesensing.org/proj/faq.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From planke at vbpr.no  Sun Mar 23 01:30:06 2003
From: planke at vbpr.no (Sverre Planke)
Date: Sun, 23 Mar 2003 10:30:06 +0100
Subject: [OSRS-PROJ] Datum transformation - more Sphere to WGS84...
References: <20030321202723.44868.qmail@web12201.mail.yahoo.com>
Message-ID: <3E7D7E9E.2070205@vbpr.no>

Hello GMT and PROJ.4 users:

Thank you for help and comments.

I need to convert the coordinates on a Spherical earth
(GMT ELLIPSOID: "Sphere", 1980, 6371008.7714, 6371008.7714, 0.0)
(e.g. Sandwell/Smith v.9.1 gravity data) to WGS84, but I
have problems finding the right transformation parameters.

* I have installed the USGS software PROJ.4 from
   http://www.remotesensing.org/proj/
   Program cs2cs supports tranformations between
   different datums if you have the right paramters (towgs84)

* A comprehensive list of "towgs84" paramters is found
   on http://mapserver.gis.umn.edu/doc36/proj.html
   However, not Sphere to WGS84 can not be fond on this site
   or other places I have looked on the internet.

Question:
Can anybody supply me with the right towgs84 paramters for
a translation from Sphere to WGS84?


Sincerely,

Sverre Planke
  Volcanic Basin Petroleum Research AS
  Forskningsparken, Gaustadalleen 21
  0349 Oslo, Norway

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sun Mar 23 08:33:02 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 23 Mar 2003 10:33:02 -0600
Subject: [OSRS-PROJ] Datum transformation - more Sphere to WGS84...
Message-ID: <OFE0F9F0A5.93C19AE6-ON86256CF2.005AE9CA-86256CF2.005AEA45@lsu.edu>


Sverre,

The solution to your problem is essentially an exercise in algebra.  There
is little practical value (that I can think of) for geodetic applications
in this case, but "cartographic license" can be always be invoked with a
bit of tongue-in-cheek ...

I suggest that you use the conversion from "geocentric latitude" to
"geodetic latitude" with whatever ellipsoid you choose.  There is no need
to "play" with the longitude values you have since the ellipsoid is a solid
of revolution and therefore already is a "spherical" function.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY

--------------------------------------------

Hello GMT and PROJ.4 users:

Thank you for help and comments.

I need to convert the coordinates on a Spherical earth
(GMT ELLIPSOID: "Sphere", 1980, 6371008.7714, 6371008.7714, 0.0)
(e.g. Sandwell/Smith v.9.1 gravity data) to WGS84, but I
have problems finding the right transformation parameters.

* I have installed the USGS software PROJ.4 from
http://www.remotesensing.org/proj/
Program cs2cs supports tranformations between
different datums if you have the right paramters (towgs84)

* A comprehensive list of "towgs84" paramters is found
on http://mapserver.gis.umn.edu/doc36/proj.html
However, not Sphere to WGS84 can not be fond on this site
or other places I have looked on the internet.

Question:
Can anybody supply me with the right towgs84 paramters for
a translation from Sphere to WGS84?

Sincerely,

Sverre Planke
Volcanic Basin Petroleum Research AS
Forskningsparken, Gaustadalleen 21
0349 Oslo, Norway


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sun Mar 23 09:49:02 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 23 Mar 2003 12:49:02 -0500
Subject: [OSRS-PROJ] Datum transformation - more Sphere to WGS84...
In-Reply-To: <3E7D7E9E.2070205@vbpr.no>
References: <20030321202723.44868.qmail@web12201.mail.yahoo.com> <3E7D7E9E.2070205@vbpr.no>
Message-ID: <3E7DF38E.1020609@pobox.com>

Sverre Planke wrote:
> Hello GMT and PROJ.4 users:
> 
> Thank you for help and comments.
> 
> I need to convert the coordinates on a Spherical earth
> (GMT ELLIPSOID: "Sphere", 1980, 6371008.7714, 6371008.7714, 0.0)
> (e.g. Sandwell/Smith v.9.1 gravity data) to WGS84, but I
> have problems finding the right transformation parameters.
> 
> * I have installed the USGS software PROJ.4 from
>   http://www.remotesensing.org/proj/
>   Program cs2cs supports tranformations between
>   different datums if you have the right paramters (towgs84)
> 
> * A comprehensive list of "towgs84" paramters is found
>   on http://mapserver.gis.umn.edu/doc36/proj.html
>   However, not Sphere to WGS84 can not be fond on this site
>   or other places I have looked on the internet.
> 
> Question:
> Can anybody supply me with the right towgs84 paramters for
> a translation from Sphere to WGS84?

Sverre,

First, you are talking about converting from spherical coordinates.
In this case there is no real "datum" in effect, so you are just
converting fro spherical coodinates to ellpisoidal coordiantes on the
target ellipsoid (WGS84).  Currently PROJ only supports this sort of
transformation if you fake it into thinking you know the datum shift
required, but you can safely give a 0,0,0 shift.   I would do this like
this:

% cs2cs -v +proj=latlong +a=6371008.7714 +b=6371008.7714 +towgs84=0,0,0 +no_defs \
        +to +proj=latlong +datum=WGS84 << EOF
? -114 44
? 0 0
? 0 90
? EOF
# ---- From Coordinate System ----
#Lat/long (Geodetic)
#
# +proj=latlong +a=6371008.7714 +b=6371008.7714 +towgs84=0,0,0 +no_defs
# ---- To Coordinate System ----
#Lat/long (Geodetic)
#
# +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
114dW   44d11'32.033"N 3217.845
0dE     0dN -7128.229
0dE     90dN 14256.457

While I have specified your particular spherical size, it doesn't really
matter if you only want 2D coordinates.   In this case it suggests that
converting from (114W, 44N) on your sphere would put you at (114W,44d11'32"N)
but 3218m below the surface of the sphere.  I have also converted an
equatoral and pole location to show the extreme effects on elevation at
those locations.

I would also add that the +no_defs on the spherical coordinate system
is very important in this case, otherwise somehow the +ellps=WGS84 default
from proj_def.dat will override the +b setting.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From agnew at bilby.ucsd.edu  Mon Mar 24 10:32:56 2003
From: agnew at bilby.ucsd.edu (Duncan Agnew)
Date: Mon, 24 Mar 2003 10:32:56 -0800 (PST)
Subject: [OSRS-PROJ] Datum transformation - more Sphere to WGS84...
Message-ID: <200303241832.KAA02219@bilby.ucsd.edu>


Sverre:

	You do not need PROJ. The Sandwell-Smith gravity data are on a
Mercator grid, the Mercator projection being for a spherical Earth. If
you use the program img2xyz that comes with the grid it will convert the
x-y grid coordinates back to geographical lat and long--not, despite
the name, to spherical XYZ (perhaps the source of confusion). So there
is no need to transform to any other latitude.

	As far as datums go, this is all marine data, so the sources for the
positions are:

	1. Satellite radar-ranging to the sea surface: this will be on a DoD
global datum (different ones at different times), the same as WGS84 to the 
relevant precision.

	2. Shipboard gravity:
		A) Celestial navigation: astronomical lat and long
		B) Satellite naviagation: same as (1)
		C) Loran--may use a regional datum
	Most of the high-seas data will be (B).

Since the grid is averaged to 1-minute spacing, none of the differences
matter anyway.

Duncan Agnew
Scripps Institution of Oceanography
dagnew at ucsd.edu

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Mar 24 11:06:15 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 24 Mar 2003 14:06:15 -0500
Subject: [OSRS-PROJ] Swiss projections
Message-ID: <1048532776.2804.9.camel@localhost.localdomain>

I finally have scrounged enough info from the net that pretty
well verifies that the projection known on the PROJ system
as somerc will do the CH1903 and CH1903+ grid systems. It also
appears that this projection was originally done by Rosenmund
with inferences that it may be what is called the "Rosenmund
Projection."

This latter interpretation is still not verified.  The projection
uses our old friend from the Krovak and alternate stereographic:
conformal projection to the sphere now known as pj_gauss in the
modern libproj library.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jpozdom at ribera.tel.uva.es  Sat Mar 29 16:57:17 2003
From: jpozdom at ribera.tel.uva.es (Jesus Angel del Pozo)
Date: Sun, 30 Mar 2003 01:57:17 +0100
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <20030330005716.GB13496@sol.linux.bogus>

Hello.

What are the main advantages of Proj.4 vs Geotrans?

I think Geotrans has a more complete doc. Does exist a up to date doc of
Proj.4?

I'll use the conversion routines in a GUI program (not in a script).

Thanks.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sat Mar 29 18:59:53 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sat, 29 Mar 2003 20:59:53 -0600
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <OF2D6BA02C.F1459618-ON86256CF9.001077E9-86256CF9.0010783A@lsu.edu>


Jesus,

Proj4 has a far more comprehensive suite of projection formulae, and also
utilizes the EPSG database.  Although there are numerous errata in that
EPSG database, GeoTrans ONLY supports the current U.S. Dept. of Defense
unclassified data for local datums to WGS84 datum.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY


Hello.

What are the main advantages of Proj.4 vs Geotrans?

I think Geotrans has a more complete doc. Does exist a up to date doc of
Proj.4?

I'll use the conversion routines in a GUI program (not in a script).

Thanks.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Mar 29 19:18:57 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 29 Mar 2003 22:18:57 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
In-Reply-To: <20030330005716.GB13496@sol.linux.bogus>
References: <20030330005716.GB13496@sol.linux.bogus>
Message-ID: <1048994338.3056.22.camel@localhost.localdomain>

Anything I say here is going to be interpreted as being catty but
I can't help it.  Also it is only from a projection standpoint
and with no concern for datums.  Also, it is a programmer's view.

I dragged down a copy of Geotrans to take a look at it.

1) it looks like it was written by a COBOL instructor. VERY
	verbose and full of VERY long identifiers.
	For the Mercator projection Geotrans took 373 lines while
	PJ_merc.c takes 80.
2) coding is not written by a math programmer
	For example: has no idea about nested polynomials among
	other things.
3) on plus side there is a transverse equal area cylindrical
	for the ellipse that I have not heard of.
	But I have not heard of anyone who needs one either.
4) not very many projections
5) usage from a programmers stand point is messy and complex
	with far too many globals.  Very difficult to read.

I would translate the teac into libproj but I don't know if I
can figure out the code.  As I say, it is VERY unreadable and
that is from someone used to writing inscrutable code.

>From a user's view it may be OK but from my viewpoint I would
only rate it 1.5 stars out of 5.

Anyway, meow.

On Sat, 2003-03-29 at 19:57, Jesus Angel del Pozo wrote:
> Hello.
> 
> What are the main advantages of Proj.4 vs Geotrans?
> 
> I think Geotrans has a more complete doc. Does exist a up to date doc of
> Proj.4?
> 
> I'll use the conversion routines in a GUI program (not in a script).
> 
> Thanks.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Mar 29 19:28:12 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 29 Mar 2003 22:28:12 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
In-Reply-To: <20030330005716.GB13496@sol.linux.bogus>
References: <20030330005716.GB13496@sol.linux.bogus>
Message-ID: <1048994893.3224.3.camel@localhost.localdomain>

A followup note: reading the Mercator code realized the fact that
although you could spec the scale factor at the equator
(equivalent to +k_0=) there was no latitude of true scale
(+lat_ts=) that, from my experience, is the most common usage
for Mercator (look at the bottom of navigation charts).

On Sat, 2003-03-29 at 19:57, Jesus Angel del Pozo wrote:
> Hello.
> 
> What are the main advantages of Proj.4 vs Geotrans?
> 
> I think Geotrans has a more complete doc. Does exist a up to date doc of
> Proj.4?
> 
> I'll use the conversion routines in a GUI program (not in a script).
> 
> Thanks.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Sat Mar 29 20:29:36 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sun, 30 Mar 2003 13:29:36 +0900
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
References: <20030330005716.GB13496@sol.linux.bogus> <1048994338.3056.22.camel@localhost.localdomain>
Message-ID: <000f01c2f674$fd7b9850$700201c0@MAPQUEST.local>

Hello Gerald,
I found your comments on the codes very interesting.
I am particularly interested in the first one...

> 1) it looks like it was written by a COBOL instructor. VERY
> verbose and full of VERY long identifiers.

I do not know if there is any rule on identifiers but using readable
identifiers is quite useful in open sources, especially where documentation
is minimum.
On the other hand, the single and double letter identifiers in the Proj.4
makes it very cryptic.

I do not think many will have problem with method names like

  void Get_Mercator_Parameters(double *a,
                               double *b,
                               double *Origin_Latitude,
                               double *Central_Meridian,
                               double *False_Easting,
                               double *False_Northing,
                               double *Scale_Factor);

as found in the GeoTrans codes.

> For the Mercator projection Geotrans took 373 lines while
> PJ_merc.c takes 80.

My copies of both libraries read GeoTrans: 380 vrs Proj4: 148, with
more than half of the 380 lines being COMMENTS which is hardly found
in the Proj4 files.
Typically, you find the comment for the above method as:

/*
 * The function Get_Mercator_Parameters returns the current ellipsoid
 * parameters, Mercator projection parameters, and scale factor.
 *
 *    a                 : Semi-major axis of ellipsoid, in meters   (output)
 *    b                 : Semi-minor axis of ellipsoid, in meters   (output)
 *    Origin_Latitude   : Latitude in radians at which the          (output)
 *                          point scale factor is 1.0
 *    Central_Meridian  : Longitude in radians at the center of     (output)
 *                          the projection
 *    False_Easting     : A coordinate value in meters assigned to the
 *                          central meridian of the projection.     (output)
 *    False_Northing    : A coordinate value in meters assigned to the
 *                          origin latitude of the projection       (output)
 *    Scale_Factor      : Multiplier which reduces distances in the
 *                          projection to the actual distance on the
 *                          ellipsoid                               (output)
 */

I do not know why someone will not prefer this to the macros stuff in the
Proj4.

Best regards,
Paul.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Mar 30 07:45:24 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 30 Mar 2003 10:45:24 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
In-Reply-To: <000f01c2f674$fd7b9850$700201c0@MAPQUEST.local>
References: <20030330005716.GB13496@sol.linux.bogus>
	<1048994338.3056.22.camel@localhost.localdomain> 
	<000f01c2f674$fd7b9850$700201c0@MAPQUEST.local>
Message-ID: <1049039125.1196.63.camel@localhost.localdomain>

Sorry, I could not disagree more.  It may be fine for verbosity
in COBOL procedures designed for accountants and others not trained
in mathematics and not used to the concept of abstract symbols
but is has no place in mathematical code---which is what the
details of cartographic projections are all about.

If you want to know what is going on inside a projection you must
refer to the source document such as Snyder's "Map Projections---A
Working Manual."  Coding follows fairly closely the symbols in
the published equations.  Secondly, the code is written by a
mathematical programmer for a mathematical programmer,
one who is used to abstract symbols.

One important point I failed to mention is the ability for a
program to use multiple instances of an individual projection
executing at the same time in the same program.  For example,
two UTMs could be processing two different ellipsoids when
transfering one datum to another.  PROJ.4/libproj4 will do
that but Geotrans?  I doubt it.

A few more comments below.

On Sat, 2003-03-29 at 23:29, Paul Selormey wrote:
> Hello Gerald,
> I found your comments on the codes very interesting.
> I am particularly interested in the first one...
> 
> > 1) it looks like it was written by a COBOL instructor. VERY
> > verbose and full of VERY long identifiers.
> 
> I do not know if there is any rule on identifiers but using readable
> identifiers is quite useful in open sources, especially where documentation
> is minimum.

Again, readable to whom?  Certainly not to me

> On the other hand, the single and double letter identifiers in the Proj.4
> makes it very cryptic.

Again, are you familiar with the mathematics of a projection?  If you
were I think you would find the symbols understandable.

> I do not think many will have problem with method names like
> 
>   void Get_Mercator_Parameters(double *a,
>                                double *b,
>                                double *Origin_Latitude,
>                                double *Central_Meridian,
>                                double *False_Easting,
>                                double *False_Northing,
>                                double *Scale_Factor);
> 
> as found in the GeoTrans codes.

You failed your own philosophy.  The first two factors should read:

double *major_axis,
double *minor_axis,
 
> > For the Mercator projection Geotrans took 373 lines while
> > PJ_merc.c takes 80.
> 
> My copies of both libraries read GeoTrans: 380 vrs Proj4: 148, with
> more than half of the 380 lines being COMMENTS which is hardly found
> in the Proj4 files.

If you want comments, look up the equations.  You'll see what is going
on then.

BTW, about 27 of the 80 lines in PJ_merc.c are boilerplate comments
so the meaningful lines are only about 53 lines.  Libproj4 version.

> Typically, you find the comment for the above method as:
> 
> /*
>  * The function Get_Mercator_Parameters returns the current ellipsoid
>  * parameters, Mercator projection parameters, and scale factor.
>  *
>  *    a                 : Semi-major axis of ellipsoid, in meters   (output)
>  *    b                 : Semi-minor axis of ellipsoid, in meters   (output)
>  *    Origin_Latitude   : Latitude in radians at which the          (output)
>  *                          point scale factor is 1.0
>  *    Central_Meridian  : Longitude in radians at the center of     (output)
>  *                          the projection
>  *    False_Easting     : A coordinate value in meters assigned to the
>  *                          central meridian of the projection.     (output)
>  *    False_Northing    : A coordinate value in meters assigned to the
>  *                          origin latitude of the projection       (output)
>  *    Scale_Factor      : Multiplier which reduces distances in the
>  *                          projection to the actual distance on the
>  *                          ellipsoid                               (output)
>  */
> 
All the above stuff should be in the manual and there is no point in
duplicating it in the code.

Another point here: why do we repeat this information over and over
in each projection when it is common to ALL projections.  PROJ.4 and
libproj4 recognize this and there is one common procedure that takes
care of these parameters prior to making an initialization call to 
the individual projection.

> I do not know why someone will not prefer this to the macros stuff in the
> Proj4.

First of all, to each his own.  Secondly there are plenty of macros in
the Geotrans stuff---some pretty inane.

> Best regards,
> Paul.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ed at topozone.com  Sun Mar 30 07:41:49 2003
From: ed at topozone.com (Ed McNierney)
Date: Sun, 30 Mar 2003 10:41:49 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <13858AA1A74F30419F319ACB66A9D12201965D@mercator.topozone.com>

Gerald et al. -

"If you want comments, look up the equations.  You'll see what is going
on then."

"All the above stuff should be in the manual and there is no point in
duplicating it in the code."

I've managed software developers for over 20 years, and anyone making
those claims to me would get a stern rebuke, and if made in an
employment interview, would guarantee the speaker to NOT get a job
offer.

It appears that the PROJ code is written in a style very much to
Gerald's liking.  This is hardly surprising.  It would be much more
helpful if relatively OBJECTIVE observers made comments on the value of
each body of code, particularly as it pertains to how it met their
needs.

Turning this into a belly-bumping contest does not help solve anyone's
problems.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed at topozone.com


-----Original Message-----
From: Gerald I. Evenden [mailto:gerald.evenden at verizon.net] 
Sent: Sunday, March 30, 2003 10:45 AM
To: [OSRS-PROJ]
Subject: Re: [OSRS-PROJ] Proj.4 vs Geotrans

Sorry, I could not disagree more.  It may be fine for verbosity
in COBOL procedures designed for accountants and others not trained
in mathematics and not used to the concept of abstract symbols
but is has no place in mathematical code---which is what the
details of cartographic projections are all about.

If you want to know what is going on inside a projection you must
refer to the source document such as Snyder's "Map Projections---A
Working Manual."  Coding follows fairly closely the symbols in
the published equations.  Secondly, the code is written by a
mathematical programmer for a mathematical programmer,
one who is used to abstract symbols.

One important point I failed to mention is the ability for a
program to use multiple instances of an individual projection
executing at the same time in the same program.  For example,
two UTMs could be processing two different ellipsoids when
transfering one datum to another.  PROJ.4/libproj4 will do
that but Geotrans?  I doubt it.

A few more comments below.

On Sat, 2003-03-29 at 23:29, Paul Selormey wrote:
> Hello Gerald,
> I found your comments on the codes very interesting.
> I am particularly interested in the first one...
> 
> > 1) it looks like it was written by a COBOL instructor. VERY
> > verbose and full of VERY long identifiers.
> 
> I do not know if there is any rule on identifiers but using readable
> identifiers is quite useful in open sources, especially where
documentation
> is minimum.

Again, readable to whom?  Certainly not to me

> On the other hand, the single and double letter identifiers in the
Proj.4
> makes it very cryptic.

Again, are you familiar with the mathematics of a projection?  If you
were I think you would find the symbols understandable.

> I do not think many will have problem with method names like
> 
>   void Get_Mercator_Parameters(double *a,
>                                double *b,
>                                double *Origin_Latitude,
>                                double *Central_Meridian,
>                                double *False_Easting,
>                                double *False_Northing,
>                                double *Scale_Factor);
> 
> as found in the GeoTrans codes.

You failed your own philosophy.  The first two factors should read:

double *major_axis,
double *minor_axis,
 
> > For the Mercator projection Geotrans took 373 lines while
> > PJ_merc.c takes 80.
> 
> My copies of both libraries read GeoTrans: 380 vrs Proj4: 148, with
> more than half of the 380 lines being COMMENTS which is hardly found
> in the Proj4 files.

If you want comments, look up the equations.  You'll see what is going
on then.

BTW, about 27 of the 80 lines in PJ_merc.c are boilerplate comments
so the meaningful lines are only about 53 lines.  Libproj4 version.

> Typically, you find the comment for the above method as:
> 
> /*
>  * The function Get_Mercator_Parameters returns the current ellipsoid
>  * parameters, Mercator projection parameters, and scale factor.
>  *
>  *    a                 : Semi-major axis of ellipsoid, in meters
(output)
>  *    b                 : Semi-minor axis of ellipsoid, in meters
(output)
>  *    Origin_Latitude   : Latitude in radians at which the
(output)
>  *                          point scale factor is 1.0
>  *    Central_Meridian  : Longitude in radians at the center of
(output)
>  *                          the projection
>  *    False_Easting     : A coordinate value in meters assigned to the
>  *                          central meridian of the projection.
(output)
>  *    False_Northing    : A coordinate value in meters assigned to the
>  *                          origin latitude of the projection
(output)
>  *    Scale_Factor      : Multiplier which reduces distances in the
>  *                          projection to the actual distance on the
>  *                          ellipsoid
(output)
>  */
> 
All the above stuff should be in the manual and there is no point in
duplicating it in the code.

Another point here: why do we repeat this information over and over
in each projection when it is common to ALL projections.  PROJ.4 and
libproj4 recognize this and there is one common procedure that takes
care of these parameters prior to making an initialization call to 
the individual projection.

> I do not know why someone will not prefer this to the macros stuff in
the
> Proj4.

First of all, to each his own.  Secondly there are plenty of macros in
the Geotrans stuff---some pretty inane.

> Best regards,
> Paul.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sun Mar 30 08:06:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 30 Mar 2003 11:06:15 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <3E8715F7.9020601@pobox.com>

Folks,

I would agree with the all the non-code style related statements so far
about the differences between Geotrans and PROJ.4.  I would like to add a
couple of additional points in favour of PROJ.4

   1) PROJ.4 has a well defined syntax for describing projections and
      coordinate systems for the end user, while Geotrans just has the API
      arguments. (I have a similar issue with GCTP)

   2) PROJ.4 has an active accessable public user community for help and
      feedback.

On the whole issue of source code style, and commenting.  I extracted the
3/7 parameter datum shifting support in PROJ.4 from Geotrans and I found the
Geotrans code very understandable to a layman such as myself.  I have never
felt comfortable pointing folks to the PROJ.4 code as a reference due to it's
relative inscrutibility.

In fact, I feel the good (if somewhat verbose) style of Geotrans speaks well
of the hard lessons learned by the military about development of software
systems.  Some of the pendantic rules they apply to development projects
these days are worthwhile.

I am also embarrassed to admit I don't own *any* texts, journals, or papers
on projections, or geodesy.  This is partly pathetic on my part, but should
also highlight that lots of people who may end up needing to understand the
code base may be ill equiped by background or references to deal with it
properly.  It isn't necessarily Gerald's problem to document everything for
me but this sort of situation will arise.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sun Mar 30 08:24:05 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 30 Mar 2003 11:24:05 -0500
Subject: [OSRS-PROJ] Future Directions for PROJ.4
Message-ID: <3E871A25.1040805@pobox.com>

Folks,

We are all pleased to see Gerald actively working on the projections code
in PROJ.4 again; however, as he feel strongly about keeping projections code
separate from some of the other "coordinate systems" related services he has
released a stripped down version of PROJ that just does projections.

It is my intention, as time permits, to prepare a new PROJ 4.5.x release based
on Geralds' projections library.  Due to Geralds' concerns about keeping
things distinct this will involve some dislocations to applications.  Some
entry points, and include files will change names.

I don't have a schedule for this work being completed.  It may take a several
months.  In the meantime I plan to release a 4.4.7 release with NTv2 support
in a day or two and another release or two of the 4.4.x series may take
place before the new generation is available.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jpozdom at ribera.tel.uva.es  Sun Mar 30 08:50:46 2003
From: jpozdom at ribera.tel.uva.es (Jesus Angel del Pozo)
Date: Sun, 30 Mar 2003 18:50:46 +0200
Subject: [OSRS-PROJ] Datums supported by Proj.4
Message-ID: <20030330165046.GA10420@sol.linux.bogus>

Hello.

Thanks for your answers about the comparation between Geotrans and
Proj.4. I like the identifiers and comments of Geotrans, but I'll just
use the API so the source code is not very important to me. Nevertheless
I think its better to have a clear source code.

Now I have another question about datums shifts. I have seen that Proj.4
works with lots of proyections and ellipsoids, but there are only a
few datums:

__datum_id__ __ellipse___ __definition/comments______________________________
       WGS84 WGS84        towgs84=0,0,0                 
      GGRS87 GRS80        towgs84=-199.87,74.79,246.62  
                          Greek_Geodetic_Reference_System_1987
       NAD83 GRS80        towgs84=0,0,0                 
                          North_American_Datum_1983
       NAD27 clrk66       nadgrids=conus,ntv1_can.dat   
                          North_American_Datum_1927


Does Proj.4 support other datums?


Bye
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Mar 30 10:06:42 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 30 Mar 2003 13:06:42 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
In-Reply-To: <13858AA1A74F30419F319ACB66A9D12201965D@mercator.topozone.com>
References: <13858AA1A74F30419F319ACB66A9D12201965D@mercator.topozone.com>
Message-ID: <1049047603.1200.99.camel@localhost.localdomain>

Well as long as we are putting experience on the line I have been
writing code for 44 years and about 38 of those years I have had some
association with cartographic projections.  So that's my belly bump.

Secondly, I wrote an opinion, not a job application.  You certainly
may have your own opinion about how code should be written but until
you make your view of coding public there is nothing to comment on.

I am sure I would have an appropriate response to your threatened
"stern rebuke."

On Sun, 2003-03-30 at 10:41, Ed McNierney wrote:
> Gerald et al. -
> 
> "If you want comments, look up the equations.  You'll see what is going
> on then."
> 
> "All the above stuff should be in the manual and there is no point in
> duplicating it in the code."
> 
> I've managed software developers for over 20 years, and anyone making
> those claims to me would get a stern rebuke, and if made in an
> employment interview, would guarantee the speaker to NOT get a job
> offer.
> 
> It appears that the PROJ code is written in a style very much to
> Gerald's liking.  This is hardly surprising.  It would be much more
> helpful if relatively OBJECTIVE observers made comments on the value of
> each body of code, particularly as it pertains to how it met their
> needs.
> 
> Turning this into a belly-bumping contest does not help solve anyone's
> problems.
> 
> 	- Ed
> 
> Ed McNierney


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar 31 10:49:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Mar 2003 13:49:50 -0500
Subject: [OSRS-PROJ] Datums supported by Proj.4
References: <20030330165046.GA10420@sol.linux.bogus>
Message-ID: <3E888DCE.1030803@pobox.com>

Jesus Angel del Pozo wrote:
> Hello.
> 
> Thanks for your answers about the comparation between Geotrans and
> Proj.4. I like the identifiers and comments of Geotrans, but I'll just
> use the API so the source code is not very important to me. Nevertheless
> I think its better to have a clear source code.
> 
> Now I have another question about datums shifts. I have seen that Proj.4
> works with lots of proyections and ellipsoids, but there are only a
> few datums:
> 
> __datum_id__ __ellipse___ __definition/comments______________________________
>        WGS84 WGS84        towgs84=0,0,0                 
>       GGRS87 GRS80        towgs84=-199.87,74.79,246.62  
>                           Greek_Geodetic_Reference_System_1987
>        NAD83 GRS80        towgs84=0,0,0                 
>                           North_American_Datum_1983
>        NAD27 clrk66       nadgrids=conus,ntv1_can.dat   
>                           North_American_Datum_1927

Jesus,

I like to this of these more as examples than anything just now.  Since I
don't have an obvious naming system to apply, and because for many datums
folks have different wgs84 shift parameters they like to use depending on
their area of work and so forth, I have avoided populating a large list
of datums.  You can provide you own datum definition in a definition by
supplying the +towgs84= parameter yourself (and the ellipsoid def).

There are some examples of this in the epsg file, though for EPSG datums
with more than one available transformation to WGS84 I did not produce any.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ed at topozone.com  Sun Mar 30 11:35:48 2003
From: ed at topozone.com (Ed McNierney)
Date: Sun, 30 Mar 2003 14:35:48 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <13858AA1A74F30419F319ACB66A9D12201965E@mercator.topozone.com>

Gerald -

I do not think your responses have really been very focused on the
question put by Jesus.  I don't agree that your opinions of software
commenting and coding style are really intended to help answer him, and
help him to make a good decision about what software tools to use.  He
can see the code quite easily and he can develop his own opinions about
whether he finds the coding, commenting, and variable naming conventions
helpful or unhelpful.

Continuing to spout opinions that basically say "that's the way I do it,
and I've been doing it for a long time, and I have to say I really think
it's the right way to do things" adds nothing.  I *might* be interested
in hearing from the people who have picked up your code over the last 44
years and had to work on it, but even that's not relevant to this
discussion.

If you are interested in helping to answer Jesus' question, it would
great if you could offer comments on the various features and benefits
of PROJ.  You don't seem to be very familiar with GeoTrans - you said so
yourself - so you might simply note that point and leave it to others
who might know it better, rather than "drag[ging] it down", as you put
it, and opining on it.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed at topozone.com


-----Original Message-----
From: Gerald I. Evenden [mailto:gerald.evenden at verizon.net] 
Sent: Sunday, March 30, 2003 1:07 PM
To: [OSRS-PROJ]
Subject: RE: [OSRS-PROJ] Proj.4 vs Geotrans

Well as long as we are putting experience on the line I have been
writing code for 44 years and about 38 of those years I have had some
association with cartographic projections.  So that's my belly bump.

Secondly, I wrote an opinion, not a job application.  You certainly
may have your own opinion about how code should be written but until
you make your view of coding public there is nothing to comment on.

I am sure I would have an appropriate response to your threatened
"stern rebuke."

On Sun, 2003-03-30 at 10:41, Ed McNierney wrote:
> Gerald et al. -
> 
> "If you want comments, look up the equations.  You'll see what is
going
> on then."
> 
> "All the above stuff should be in the manual and there is no point in
> duplicating it in the code."
> 
> I've managed software developers for over 20 years, and anyone making
> those claims to me would get a stern rebuke, and if made in an
> employment interview, would guarantee the speaker to NOT get a job
> offer.
> 
> It appears that the PROJ code is written in a style very much to
> Gerald's liking.  This is hardly surprising.  It would be much more
> helpful if relatively OBJECTIVE observers made comments on the value
of
> each body of code, particularly as it pertains to how it met their
> needs.
> 
> Turning this into a belly-bumping contest does not help solve anyone's
> problems.
> 
> 	- Ed
> 
> Ed McNierney


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ed at topozone.com  Sun Mar 30 11:41:55 2003
From: ed at topozone.com (Ed McNierney)
Date: Sun, 30 Mar 2003 14:41:55 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans
Message-ID: <13858AA1A74F30419F319ACB66A9D1221F4070@mercator.topozone.com>

Folks -

Sorry - that last message was MEANT to be off-list to Gerald privately.
I didn't mean to keep adding fuel to the on-list debate.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed at topozone.com

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From miketh at brisbane.paradigmgeo.com  Sun Mar 30 16:59:15 2003
From: miketh at brisbane.paradigmgeo.com (Mike Thomas)
Date: Mon, 31 Mar 2003 10:59:15 +1000
Subject: [OSRS-PROJ] NTv2 (.gsb) grid shifting support
In-Reply-To: <000701c2eabe$56ad29b0$700201c0@MAPQUEST.local>
Message-ID: <MFEIIPBIPCKFPICNGIJNEEHACOAA.miketh@brisbane.paradigmgeo.com>

Hi there.

Paul wrote:

| Hello Frank,
| Since Proj4 is a working code being used in many applications,
| I think it will be better to commit only working codes.
|
| Not everyone will read this, and some may even join the list
| later. In fact, you do not have to join the list to use the Proj4 :((
|
| Best regards,
| Paul.

Working users should always stick with stable released versions of code (in
this case the current source release marked as such) on:

  http://www.remotesensing.org/proj/

Possibly a note could be added to emphasize that fact on the web page.

CVS is meant to be used by developers as code goes through possibly major
and difficult changes.  The general understanding on every project I have
ever worked on is that HEAD CVS code is by definition unstable and to be
treated with caution.

Consequently, I think that Frank is entitled to use CVS in this way,
especially as he took the trouble to warn others of potential difficulties.

I know of three open source projects where insufficient use of CVS by
developers has contributed to major problems.  In one case, a hard disk
crash caused the loss of the entire Windows port of the Rosegarden MIDI
sequencer - that project has never been revived.  In the other two projects
(Maxima and Gnu Common Lisp) the unfortunate and unexpected death of the
maintainer (without having committed vital files to CVS) meant that many
people have worked long hours over an entire year to put the projects back
on track.  (Naturally, I hope Frank won't be negotiating the latter event in
his life for some time!)

Cheers

Mike Thomas.


Frank wrote:

| > Folks,
| >
| > I have preliminary support for Canadian NTv2 grid shift files
| incorporated
| > into PROJ.4 with some major flaws still (it does not pick the
| most refined
| > grid).  This is the same .gsb format used by some other organizations,
| > notably in Australia.
| >
| > I write this to warn people that the structural changes in
| PROJ.4 (in the
| > datum shifting area) were substantial and are not really quite complete
| > so take care using PROJ.4 from CVS for a week or so.
| >
| > Best regards,
| >
| > --


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar 31 07:02:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Mar 2003 10:02:01 -0500
Subject: [OSRS-PROJ] ESRI File
In-Reply-To: <3E6520D4.3030504@refractions.net>
References: <3E6500DD.5040108@refractions.net> <3E650F9C.E9E8FDE1@dmsolutions.ca> <3E65153E.1050402@refractions.net> <3E651DDA.9040806@pobox.com> <3E6520D4.3030504@refractions.net>
Message-ID: <3E885869.2010609@pobox.com>

Paul Ramsey wrote:
> OK, here's the diff against the CVS epsg. :)
> P.

Paul,

I just wanted to let you know that I have committed your file of extra
ESRI coordinate systems as osrs/proj/nad/esri.extra, and the osrs/proj/nad/esri
file is a merger of the current epsg file and the esri.extra.

This will go out in the 4.4.7 release today.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From GalbraithP at dfo-mpo.gc.ca  Mon Mar 31 07:01:52 2003
From: GalbraithP at dfo-mpo.gc.ca (Peter S Galbraith)
Date: Mon, 31 Mar 2003 10:01:52 -0500
Subject: [OSRS-PROJ] Proj.4 vs Geotrans 
In-Reply-To: Your message of "Sun, 30 Mar 2003 14:41:55 EST."
             <13858AA1A74F30419F319ACB66A9D1221F4070@mercator.topozone.com> 
References: <13858AA1A74F30419F319ACB66A9D1221F4070@mercator.topozone.com> 
Message-ID: <20030331150152.58BFE2950C@mixing.qc.dfo.ca>

Ed McNierney <ed at topozone.com> wrote:

> Folks -
> 
> Sorry - that last message was MEANT to be off-list to Gerald privately.
> I didn't mean to keep adding fuel to the on-list debate.
> 
> 	- Ed

That surely happenned because of the unfortunate use of the header field

 Reply-To: osrs-proj at remotesensing.org

that is generated by the mailing list and included in every post.

See "Principle of Least Damage" in

 http://www.unicom.com/pw/reply-to-harmful.html

Peter
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar 31 07:28:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Mar 2003 10:28:40 -0500
Subject: [OSRS-PROJ] PROJ 4.4.7 Released
Message-ID: <3E885EA8.8090106@pobox.com>


Folks,

PROJ 4.4.7 is now released, and available for download from the PROJ.4 web
site.

   http://www.remotesensing.org/proj

 From the NEWS file:

4.4.7 Release Notes
-------------------

  o Added NTv2 (.gsb) grid shift file support.

  o Modified datum shift support so that data file data is only loaded if
    needed.  Also added 'null' grid as a fallback option, and support for
    making grids optional (prefix with '@' in +nadgrids).

  o Regenerated nad/epsg file with towgs84 parameters for non-greenwich prime
    meridians.

  o Updated nad/esri file with better generated form from Paul Ramsey.

  o Various bug fixes.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jpozdom at ribera.tel.uva.es  Mon Mar 31 12:10:02 2003
From: jpozdom at ribera.tel.uva.es (Jesus Angel del Pozo)
Date: Mon, 31 Mar 2003 22:10:02 +0200
Subject: [OSRS-PROJ] Datums supported by Proj.4
In-Reply-To: <3E888DCE.1030803@pobox.com>
References: <20030330165046.GA10420@sol.linux.bogus>
 <3E888DCE.1030803@pobox.com>
Message-ID: <20030331201002.GA3266@sol.linux.bogus>

Frank Warmerdam(warmerdam at pobox.com)@31.03.2003 13:49:50 -0500:
> I like to this of these more as examples than anything just now.  Since I
> don't have an obvious naming system to apply, and because for many datums
> folks have different wgs84 shift parameters they like to use depending on
> their area of work and so forth, I have avoided populating a large list
> of datums.  You can provide you own datum definition in a definition by
> supplying the +towgs84= parameter yourself (and the ellipsoid def).

Do you know if there are some list ready to use with Proj.4?
I have downloaded the EPSG database (Access) but maybe somebody already have
a list of datums ready to download :-)

Thanks

-- 
 Jess ngel del Pozo Domnguez
 Valladolid                         __
 GnuPG key-id: 0x17FB6CCE         _ \<_
 http://www.tel.uva.es/~jpozdom  (_)/(_)
           _                                      _
      ~0  (_|  . - ' - . _ . - ' - . _ . - ' - . |_)  O
     |(_~|^~~|                                  |~~^|~_)|
     TT/_ T"T                                    T"T _\HH
jgs^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Mar 31 12:14:41 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Mar 2003 15:14:41 -0500
Subject: [OSRS-PROJ] Datums supported by Proj.4
In-Reply-To: <20030331201002.GA3266@sol.linux.bogus>
References: <20030330165046.GA10420@sol.linux.bogus> <3E888DCE.1030803@pobox.com> <20030331201002.GA3266@sol.linux.bogus>
Message-ID: <3E88A1B1.0@pobox.com>

Jesus Angel del Pozo wrote:
> Frank Warmerdam(warmerdam at pobox.com)@31.03.2003 13:49:50 -0500:
> 
>>I like to this of these more as examples than anything just now.  Since I
>>don't have an obvious naming system to apply, and because for many datums
>>folks have different wgs84 shift parameters they like to use depending on
>>their area of work and so forth, I have avoided populating a large list
>>of datums.  You can provide you own datum definition in a definition by
>>supplying the +towgs84= parameter yourself (and the ellipsoid def).
> 
> 
> Do you know if there are some list ready to use with Proj.4?
> I have downloaded the EPSG database (Access) but maybe somebody already have
> a list of datums ready to download :-)

Jesus,

The proj/nad/epsg file contains definitions for most/all 2D projected and
geographic coordinate systems.  Some do not have towgs84 parameters either
because I could not deduce one from the EPSG database, or because it offered
more than one so I couldn't be sure which was "best".

You can use the epsg file with the +init mechanism. For instance, the
following "cs2cs" commandline would be for converting from EPSG 27700 (British
National Grid) to WGS84 lat/long.

eg.
cs2cs +init=epsg:27700 +to +proj=latlong +datum=WGS84

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


