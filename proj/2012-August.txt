From gravesricharde at yahoo.com  Thu Aug  2 06:44:32 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Thu, 2 Aug 2012 06:44:32 -0700 (PDT)
Subject: [Proj] request help with proj
Message-ID: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>

Hey,

My northing numbers are way off, so I must be doing something wrong.

I want to convert lat/long to the following coordinate system:

PROJCS["NAD_1983_StatePlane_New_Hampshire_FIPS_2800_Feet",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",984250.0],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-71.66666666666667],
PARAMETER["Scale_Factor",0.9999666666666667],
PARAMETER["Latitude_Of_Origin",42.5],
UNIT["Foot_US",0.3048006096012192]]

I am initializing proj as follows:

proj +proj=tmerc +lat_0=42.5 +lon_0=-71.66666666666667 +k=0.9999666666666667 +x_0=984250.0 +y_0=0 +Units=Foot_US

I have a spot in SE New Hampshire, along the southern border with Massachusetts, close to the SE corner:

-71.32228851666666 42.69722980277778

If you give 42.69722980277778, -71.32228851666666 to http://maps.google.com/, it will show you a spot in New Hampshire (but gives a closest address in Massachusetts just across the border, no big deal).

>From a shape file that I got from New Hampshire, the bounding box is as follows:

745473.8751627404, 72029.90624999696, 1242053.0000937672, 1023283.999999998

(The coordinate system info above is from the prj file.)

So for a spot near the southern border, I am expecting a northing close to 72030 (72,030), but I am getting 21966.03 (21,966).

My easting numbers are closer but not right on.

(I am using proj rel. 4.7.1, 23 September 2009, which came with ubuntu 12.04.)

If someone can see what I am doing wrong, I would appreciate some guidance.

Thanks,

Rick Graves
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120802/6f1e3535/attachment.html>

From ndzinn at comcast.net  Thu Aug  2 07:23:34 2012
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Thu, 2 Aug 2012 09:23:34 -0500
Subject: [Proj] request help with proj
In-Reply-To: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>
References: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>
Message-ID: <E1DFBB6E334B4F729B6180752A9AE5F6@NoelHmPC>

Foot/meter problem maybe?  72030/21966.03 ~= 3.279 ~= number of feet in a meter

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Rick Graves 
Sent: Thursday, August 02, 2012 8:44 AM
To: PROJ.4 Projections Discussions 
Subject: [Proj] request help with proj

Hey,


My northing numbers are way off, so I must be doing something wrong.


I want to convert lat/long to the following coordinate system:


PROJCS["NAD_1983_StatePlane_New_Hampshire_FIPS_2800_Feet",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",984250.0],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-71.66666666666667],
PARAMETER["Scale_Factor",0.9999666666666667],
PARAMETER["Latitude_Of_Origin",42.5],
UNIT["Foot_US",0.3048006096012192]]


I am initializing proj as follows:


proj +proj=tmerc +lat_0=42.5 +lon_0=-71.66666666666667 +k=0.9999666666666667 +x_0=984250.0 +y_0=0 +Units=Foot_US


I have a spot in SE New Hampshire, along the southern border with Massachusetts, close to the SE corner:


-71.32228851666666 42.69722980277778


If you give 42.69722980277778, -71.32228851666666 to http://maps.google.com/, it will show you a spot in New Hampshire (but gives a closest address in Massachusetts just across the border, no big deal).


>From a shape file that I got from New Hampshire, the bounding box is as follows:


745473.8751627404, 72029.90624999696, 1242053.0000937672, 1023283.999999998


(The coordinate system info above is from the prj file.)


So for a spot near the southern border, I am expecting a northing close to 72030 (72,030), but I am getting 21966.03 (21,966).


My easting numbers are closer but not right on.


(I am using proj rel. 4.7.1, 23 September 2009, which came with ubuntu 12.04.)


If someone can see what I am doing wrong, I would appreciate some guidance.


Thanks,


Rick Graves



--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120802/84e28528/attachment.html>

From EMiller at dfg.ca.gov  Thu Aug  2 08:44:37 2012
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 2 Aug 2012 08:44:37 -0700
Subject: [Proj] request help with proj
In-Reply-To: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>
References: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>
Message-ID: <501A3DF6.95FD.00E4.1@dfg.ca.gov>

Try +units=us-ft.

See, proj -lu
-- 

Eric G. Miller
Team Lead
Natural Resources Management Applications
California Department of Fish and Game


>>> On 8/2/2012 at  6:44 AM, Rick Graves <gravesricharde at yahoo.com> wrote:
> Hey,
> 
> My northing numbers are way off, so I must be doing something wrong.
> 
> I want to convert lat/long to the following coordinate system:
> 
> PROJCS["NAD_1983_StatePlane_New_Hampshire_FIPS_2800_Feet",
> GEOGCS["GCS_North_American_1983",
> DATUM["D_North_American_1983",
> SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",984250.0],
> PARAMETER["False_Northing",0.0],
> PARAMETER["Central_Meridian",-71.66666666666667],
> PARAMETER["Scale_Factor",0.9999666666666667],
> PARAMETER["Latitude_Of_Origin",42.5],
> UNIT["Foot_US",0.3048006096012192]]
> 
> I am initializing proj as follows:
> 
> proj +proj=tmerc +lat_0=42.5 +lon_0=-71.66666666666667 +k=0.9999666666666667 
> +x_0=984250.0 +y_0=0 +Units=Foot_US
> 
> I have a spot in SE New Hampshire, along the southern border with 
> Massachusetts, close to the SE corner:
> 
> -71.32228851666666 42.69722980277778
> 
> If you give 42.69722980277778, -71.32228851666666 to http://maps.google.com/, 
> it will show you a spot in New Hampshire (but gives a closest address in 
> Massachusetts just across the border, no big deal).
> 
> From a shape file that I got from New Hampshire, the bounding box is as 
> follows:
> 
> 745473.8751627404, 72029.90624999696, 1242053.0000937672, 1023283.999999998
> 
> (The coordinate system info above is from the prj file.)
> 
> So for a spot near the southern border, I am expecting a northing close to 
> 72030 (72,030), but I am getting 21966.03 (21,966).
> 
> My easting numbers are closer but not right on.
> 
> (I am using proj rel. 4.7.1, 23 September 2009, which came with ubuntu 
> 12.04.)
> 
> If someone can see what I am doing wrong, I would appreciate some guidance.
> 
> Thanks,
> 
> Rick Graves




From gravesricharde at yahoo.com  Thu Aug  2 15:00:38 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Thu, 2 Aug 2012 15:00:38 -0700 (PDT)
Subject: [Proj] request help with proj
In-Reply-To: <501A3DF6.95FD.00E4.1@dfg.ca.gov>
References: <1343915072.64486.YahooMailNeo@web162302.mail.bf1.yahoo.com>
	<501A3DF6.95FD.00E4.1@dfg.ca.gov>
Message-ID: <1343944838.86352.YahooMailNeo@web162306.mail.bf1.yahoo.com>

Eric,

> Try +units=us-ft.


That fixes it!

Thanks,


________________________________
 From: Eric Miller <EMiller at dfg.ca.gov>
To: PROJ.4 Projections Discussions <proj at lists.maptools.org> 
Sent: Thursday, August 2, 2012 11:44 PM
Subject: Re: [Proj] request help with proj
 
Try +units=us-ft.

See, proj -lu
-- 

Eric G. Miller
Team Lead
Natural Resources Management Applications
California Department of Fish and Game


>>> On 8/2/2012 at  6:44 AM, Rick Graves <gravesricharde at yahoo.com> wrote:
> Hey,
> 
> My northing numbers are way off, so I must be doing something wrong.
> 
> I want to convert lat/long to the following coordinate system:
> 
> PROJCS["NAD_1983_StatePlane_New_Hampshire_FIPS_2800_Feet",
> GEOGCS["GCS_North_American_1983",
> DATUM["D_North_American_1983",
> SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",984250.0],
> PARAMETER["False_Northing",0.0],
> PARAMETER["Central_Meridian",-71.66666666666667],
> PARAMETER["Scale_Factor",0.9999666666666667],
> PARAMETER["Latitude_Of_Origin",42.5],
> UNIT["Foot_US",0.3048006096012192]]
> 
> I am initializing proj as follows:
> 
> proj +proj=tmerc +lat_0=42.5 +lon_0=-71.66666666666667 +k=0.9999666666666667 
> +x_0=984250.0 +y_0=0 +Units=Foot_US
> 
> I have a spot in SE New Hampshire, along the southern border with 
> Massachusetts, close to the SE corner:
> 
> -71.32228851666666 42.69722980277778
> 
> If you give 42.69722980277778, -71.32228851666666 to http://maps.google.com/, 
> it will show you a spot in New Hampshire (but gives a closest address in 
> Massachusetts just across the border, no big deal).
> 
> From a shape file that I got from New Hampshire, the bounding box is as 
> follows:
> 
> 745473.8751627404, 72029.90624999696, 1242053.0000937672, 1023283.999999998
> 
> (The coordinate system info above is from the prj file.)
> 
> So for a spot near the southern border, I am expecting a northing close to 
> 72030 (72,030), but I am getting 21966.03 (21,966).
> 
> My easting numbers are closer but not right on.
> 
> (I am using proj rel. 4.7.1, 23 September 2009, which came with ubuntu 
> 12.04.)
> 
> If someone can see what I am doing wrong, I would appreciate some guidance.
> 
> Thanks,
> 
> Rick Graves


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120802/e0c8b927/attachment.html>

From gravesricharde at yahoo.com  Sun Aug 12 18:41:57 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Sun, 12 Aug 2012 18:41:57 -0700 (PDT)
Subject: [Proj] request help with Transverse_Mercator in proj
Message-ID: <1344822117.58130.YahooMailNeo@web162301.mail.bf1.yahoo.com>

Hey,

Sorry to trouble you, but I still have a couple of states for which I need to get proj.4 working.  This time, it is Wisconsin.

I am starting with the Western most point in the state.  If you plug the following into maps.google.com, you will see it:

45.64120292600006, -92.88943290699996 

I downloaded the shapefiles from the state web site.  In the shapefile, the minimum X point is this:

294822.7664999999, 578184.1052999999

Here is the metadata from the prj file:

PROJCS["NAD_1983_HARN_Wisconsin_TM",
GEOGCS["GCS_North_American_1983_HARN",
DATUM["D_North_American_1983_HARN",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",520000.0],
PARAMETER["False_Northing",-4480000.0],
PARAMETER["Central_Meridian",-90.0],
PARAMETER["Scale_Factor",0.9996],
PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]

I initialized proj as follows:

proj +proj=tmerc +lat_0=0.0 +lon_0=-90.0 +k=0.9996 +x_0=-4480000.0 +y_0=520000.0

When give proj this: 

-92.88943290699996 45.64120292600006

I get this:

-4705175.18     5578245.14

But I am expecting this:

294822.7664999999, 578184.1052999999

I assume I am not initializing proj correctly.  

If someone could spot my mistake, I would appreciate it.

Thanks,

Rick Graves
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120812/61d17717/attachment.html>

From Mikael.Rittri at carmenta.com  Mon Aug 13 07:29:41 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 13 Aug 2012 14:29:41 +0000
Subject: [Proj] request help with Transverse_Mercator in proj
In-Reply-To: <1344822117.58130.YahooMailNeo@web162301.mail.bf1.yahoo.com>
References: <1344822117.58130.YahooMailNeo@web162301.mail.bf1.yahoo.com>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4939208B7B@SETHNWS023.carmenta.se>

Hello Rick,
I think you have just switched the values of x_0 and y_0, since x_0 should be False_Easting and y_0 should be False_Northing.

With Proj 4.8.0, I get

C:\Windows\System32>proj +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +y_0=-4480000.0 +x_0=520000.0 -v

#Transverse Mercator
#       Cyl, Sph&Ell
# +proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +y_0=-4480000.0 +x_0=520000.0
# +ellps=WGS84

-92.88943290699996 45.64120292600006

294824.82       578245.14

which is at least near your expected result. (Maybe I made some other mistake.)

I would prefer to give the +ellps explicitly, but the default seems to be what you need, or nearly so.
(Not much difference between the WGS84 and the GRS_1980 ellipsoid.)

And I think +k_0 is now the recommended parameter name instead of +k, but it seems that +k still works.

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

________________________________
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Rick Graves
Sent: Monday, August 13, 2012 3:42 AM
To: PROJ.4 Projections Discussions
Subject: [Proj] request help with Transverse_Mercator in proj

Hey,

Sorry to trouble you, but I still have a couple of states for which I need to get proj.4 working.  This time, it is Wisconsin.

I am starting with the Western most point in the state.  If you plug the following into maps.google.com, you will see it:

45.64120292600006, -92.88943290699996

I downloaded the shapefiles from the state web site.  In the shapefile, the minimum X point is this:

294822.7664999999, 578184.1052999999

Here is the metadata from the prj file:

PROJCS["NAD_1983_HARN_Wisconsin_TM",
GEOGCS["GCS_North_American_1983_HARN",
DATUM["D_North_American_1983_HARN",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",520000.0],
PARAMETER["False_Northing",-4480000.0],
PARAMETER["Central_Meridian",-90.0],
PARAMETER["Scale_Factor",0.9996],
PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]

I initialized proj as follows:

proj +proj=tmerc +lat_0=0.0 +lon_0=-90.0 +k=0.9996 +x_0=-4480000.0 +y_0=520000.0

When give proj this:

-92.88943290699996 45.64120292600006

I get this:

-4705175.18     5578245.14

But I am expecting this:

294822.7664999999, 578184.1052999999

I assume I am not initializing proj correctly.

If someone could spot my mistake, I would appreciate it.

Thanks,

Rick Graves

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120813/90f4e336/attachment.html>

From martin.ivanov at ifg.uni-tuebingen.de  Mon Aug 13 08:19:17 2012
From: martin.ivanov at ifg.uni-tuebingen.de (Martin Ivanov)
Date: Mon, 13 Aug 2012 17:19:17 +0200
Subject: [Proj] proj4 specifications for a rotated latlon grid on a sphere?
Message-ID: <50291AF5.6090207@ifg.uni-tuebingen.de>

Dear PROJ4 users,

I have a rotated latitude-longitude grid with coordinates of the north 
pole POLE_LAT=39.25 and POLE_LON=-162.
The data are on a sphere with radius 6371 km. Is it possible to define 
proj4 specifications for this grid, so that I can make
coordinate transformations? Most interesting for me would be how to 
specify the towgs84 parameter.

Any suggestions will be appreciated.

Best regards,

-- 
Dr. Martin Ivanov
Eberhard-Karls-Universität Tübingen
Mathematisch-Naturwissenschaftliche Fakultät
Fachbereich Geowissenschaften
Water & Earth System Science (WESS)
Hölderlinstraße 12, 72074 Tübingen, Deutschland
Tel. +4970712974213



From martin.ivanov at ifg.uni-tuebingen.de  Fri Aug 10 05:48:32 2012
From: martin.ivanov at ifg.uni-tuebingen.de (Martin Ivanov)
Date: Fri, 10 Aug 2012 12:48:32 +0000 (UTC)
Subject: [Proj] a simple coordinate conversion problem
Message-ID: <loom.20120810T143801-411@post.gmane.org>

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to transform the coordinates of the points in my data set from the sphere
to WGS84. For that purpose I need the +towgs84 parameters for my sphere, which I
do not know. Does someone have a clue how to get these parameters?

Any suggestions will be appreciated.

Best regards,

Martin



From martin.ivanov at ifg.uni-tuebingen.de  Fri Aug 10 06:16:31 2012
From: martin.ivanov at ifg.uni-tuebingen.de (Martin Ivanov)
Date: Fri, 10 Aug 2012 13:16:31 +0000 (UTC)
Subject: [Proj] another simple coordinate conversion problem
Message-ID: <loom.20120810T151538-636@post.gmane.org>

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to convert the coordinates of the points in my data set from this
latlon projection to another latlon projection of the same sphere. The target
latlon projection is rotated, it has its north pole at 39.25 latitude and -162
longitude. Is there a way to make the conversion with proj?

Any suggestions will be appreciated.

Best regards,

Martin



From Mikael.Rittri at carmenta.com  Mon Aug 13 13:40:10 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 13 Aug 2012 20:40:10 +0000
Subject: [Proj] proj4 specifications for a rotated latlon grid on a
 sphere?
In-Reply-To: <50291AF5.6090207@ifg.uni-tuebingen.de>
References: <50291AF5.6090207@ifg.uni-tuebingen.de>
Message-ID: <841F7CA4-A8A3-439C-93B6-B9E696835B59@carmenta.com>

Hello Martin. 
In some GIS software, it would indeed be possible to rotate
a graticule via +towgs84 parameters with huge rotations.
But I think Proj.4 (like most GIS software) uses a simplified,
linearized implementation of the rotations, assuming they
are small (up to 5 or perhaps 10 arc seconds).

But you can rotate a graticule on a sphere by using Proj.4
twice. Let's try it for the point lat = 80, lon = 0 on the rotated
grid. First, project to an auxiliary stereographic grid:

>proj +proj=stere +lon_0=0 +lat_0=90 +a=6371000 +b=6371000

0    80

0.00    -1114780.55

Next, inverse project back to long/lat using a _different_
instance of stereographic:

>proj +proj=stere -I +lon_0=-162 +lat_0=39.25 +a=6371000 +b=6371000

0.00    -1114780.55

162dW    29d15'N

That's the corresponding long/lat on the plain graticule. 
(I haven't tested if this works on or near the south poles
 of the graticules.)

I have assumed that the prime meridian (zero longitude) of
the rotated graticule goes south from the rotated north pole.
If it doesn't, you can model its direction by changing the
value of lon_0 to something non-zero in the first definition. 

It may be possible to chain the forward and inverse
projection together into a single command line by using
a pipe, but I don't remember the syntax for that. 

Best regards

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

13 aug 2012 kl. 17:19 skrev "Martin Ivanov" <martin.ivanov at ifg.uni-tuebingen.de>:

> Dear PROJ4 users,
> 
> I have a rotated latitude-longitude grid with coordinates of the north 
> pole POLE_LAT=39.25 and POLE_LON=-162.
> The data are on a sphere with radius 6371 km. Is it possible to define 
> proj4 specifications for this grid, so that I can make
> coordinate transformations? Most interesting for me would be how to 
> specify the towgs84 parameter.
> 
> Any suggestions will be appreciated.
> 
> Best regards,
> 
> -- 
> Dr. Martin Ivanov
> Eberhard-Karls-Universität Tübingen
> Mathematisch-Naturwissenschaftliche Fakultät
> Fachbereich Geowissenschaften
> Water & Earth System Science (WESS)
> Hölderlinstraße 12, 72074 Tübingen, Deutschland
> Tel. +4970712974213
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Mon Aug 13 13:52:31 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 13 Aug 2012 20:52:31 +0000
Subject: [Proj] a simple coordinate conversion problem
In-Reply-To: <loom.20120810T143801-411@post.gmane.org>
References: <loom.20120810T143801-411@post.gmane.org>
Message-ID: <FB1ED045-F6F6-495F-9D9A-5592AA65EFAE@carmenta.com>


Martin,
I am sorry, but the best you can do is to ask the data provider, not us. 

However, if the data is meteorological, I am pretty sure that
you should do nothing at all to convert to WGS84 long/lat. 

For other kinds of data, some transformation may be needed,
perhaps converting from geocentric to geodetic latitude. But
only your own data provider can tell you what you must do. 

Regards

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

13 aug 2012 kl. 21:38 skrev "Martin Ivanov" <martin.ivanov at ifg.uni-tuebingen.de>:

> Dear users of PROJ,
> 
> I have a data set on a perfect sphere with radius 6371 km. The "projection"
> is latitude-longitude, so the data practically are unprojected.
> 
> I need to transform the coordinates of the points in my data set from the sphere
> to WGS84. For that purpose I need the +towgs84 parameters for my sphere, which I
> do not know. Does someone have a clue how to get these parameters?
> 
> Any suggestions will be appreciated.
> 
> Best regards,
> 
> Martin
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From gravesricharde at yahoo.com  Mon Aug 13 14:46:33 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Mon, 13 Aug 2012 14:46:33 -0700 (PDT)
Subject: [Proj] request help with Transverse_Mercator in proj SOLVED
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4939208B7B@SETHNWS023.carmenta.se>
References: <1344822117.58130.YahooMailNeo@web162301.mail.bf1.yahoo.com>
	<E4AB3DD44D22854B819908379DE4AD4939208B7B@SETHNWS023.carmenta.se>
Message-ID: <1344894393.57326.YahooMailNeo@web162305.mail.bf1.yahoo.com>



Mikael,

> I think you have just switched the values of x_0 and y_0, since x_0 should be False_Easting and y_0 should be False_Northing.

How could I make such a mistake!

I appreciate your help.

Also, I will go with +k_0.

Thanks,

Rick


________________________________
 From: Mikael Rittri <Mikael.Rittri at carmenta.com>
To: Rick Graves <gravesricharde at yahoo.com>; PROJ.4 and general Projections Discussions <proj at lists.maptools.org> 
Sent: Monday, August 13, 2012 10:29 PM
Subject: RE: [Proj] request help with Transverse_Mercator in proj
 

 
Hello Rick,
I think you have just switched
the values of x_0 and y_0, since x_0 should be False_Easting and y_0 should be
False_Northing.
 
With Proj 4.8.0, I get
 
C:\Windows\System32>proj
+proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +y_0=-4480000.0 +x_0=520000.0 -v
 
#Transverse
Mercator
#      
Cyl, Sph&Ell
#
+proj=tmerc +lat_0=0 +lon_0=-90 +k=0.9996 +y_0=-4480000.0 +x_0=520000.0
#
+ellps=WGS84
 
-92.88943290699996
45.64120292600006
 
294824.82      
578245.14
 
which is at least near
your expected result. (Maybe I made some other mistake.) 
 
I would prefer to give
the +ellps explicitly, but the default seems to be what you need, or nearly so. 
(Not much difference
between the WGS84 and the GRS_1980 ellipsoid.) 
 
And I think +k_0 is now
the recommended parameter name instead of +k, but it seems that +k still works.
 
Best regards,
 
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com
 

________________________________
 
From:proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Rick Graves
Sent: Monday, August 13, 2012 3:42
AM
To: PROJ.4 Projections Discussions
Subject: [Proj] request help with
Transverse_Mercator in proj
 
Hey,
 
Sorry
to trouble you, but I still have a couple of states for which I need to get
proj.4 working.  This time, it is Wisconsin.
 
I am
starting with the Western most point in the state.  If you plug the
following into maps.google.com, you will see it:
 
45.64120292600006,
-92.88943290699996 
 
I
downloaded the shapefiles from the state web site.  In the shapefile, the
minimum X point is this:
 
294822.7664999999,
578184.1052999999
 
Here is
the metadata from the prj file:
 
PROJCS["NAD_1983_HARN_Wisconsin_TM",
GEOGCS["GCS_North_American_1983_HARN",
DATUM["D_North_American_1983_HARN",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",520000.0],
PARAMETER["False_Northing",-4480000.0],
PARAMETER["Central_Meridian",-90.0],
PARAMETER["Scale_Factor",0.9996],
PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]
 
I
initialized proj as follows:
 
proj
+proj=tmerc +lat_0=0.0 +lon_0=-90.0 +k=0.9996 +x_0=-4480000.0 +y_0=520000.0
 
When
give proj this: 
 
-92.88943290699996
45.64120292600006
 
I get
this:
 
-4705175.18
    5578245.14
 
But I
am expecting this:
 
294822.7664999999,
578184.1052999999
 
I
assume I am not initializing proj correctly.  
 
If
someone could spot my mistake, I would appreciate it.
 
Thanks,
 
Rick
Graves
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120813/2c2a7f9c/attachment.html>

From peifer at gmx.eu  Mon Aug 13 16:50:06 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon, 13 Aug 2012 20:50:06 -0300
Subject: [Proj] proj4 specifications for a rotated latlon grid on a
	sphere?
In-Reply-To: <50291AF5.6090207@ifg.uni-tuebingen.de>
References: <50291AF5.6090207@ifg.uni-tuebingen.de>
Message-ID: <502992AE.6000109@gmx.eu>

On 2012-08-13 12:19, Martin Ivanov wrote:
> Dear PROJ4 users,
>
> I have a rotated latitude-longitude grid with coordinates of the north
> pole POLE_LAT=39.25 and POLE_LON=-162.
> The data are on a sphere with radius 6371 km. Is it possible to define
> proj4 specifications for this grid...

You could try:
+proj=ob_tran +o_proj=latlon +o_lon_p=-162 +o_lat_p=39.25 +lon_0=180

Hermann


From robert.p.fischer-1 at nasa.gov  Mon Aug 13 19:06:58 2012
From: robert.p.fischer-1 at nasa.gov (Fischer, Robert P  (GISS-6110)[COLUMBIA UNIVERSITY])
Date: Mon, 13 Aug 2012 21:06:58 -0500
Subject: [Proj] another simple coordinate conversion problem
In-Reply-To: <loom.20120810T151538-636@post.gmane.org>
References: <loom.20120810T151538-636@post.gmane.org>
Message-ID: <B236CA9710FCCF4EAB144418A4E47F9A8AAE933C58@NDMSSCC06.ndc.nasa.gov>

Suppose you have a point A on the sphere, in regular (lat,lon) coordinates.  Let point N be your north pole, and P be your "new" north pole.

Compute the azimuthal distance from P to A.  This is your new latitude.  Look up the Haversine formula.

To get your new longitude: you will need to measure the angle between your line from P to A, versus some reference great circle.  I do not have the time to figure that one out right now.  But I'm sure a little research on Wikipedia can do it.  Remember that a great circle can be specified by the vector (point on the sphere) perpindicular to it.  For example, the equator is specified by the point at the north pole.

Proj.4 isn't really the appropriate tool for what you want.

-- Bob


________________________________________
From: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] On Behalf Of Martin Ivanov [martin.ivanov at ifg.uni-tuebingen.de]
Sent: Friday, August 10, 2012 9:16 AM
To: proj at lists.maptools.org
Subject: [Proj] another simple coordinate conversion problem

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to convert the coordinates of the points in my data set from this
latlon projection to another latlon projection of the same sphere. The target
latlon projection is rotated, it has its north pole at 39.25 latitude and -162
longitude. Is there a way to make the conversion with proj?

Any suggestions will be appreciated.

Best regards,

Martin

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Tue Aug 14 01:51:40 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 14 Aug 2012 08:51:40 +0000
Subject: [Proj] proj4 specifications for a rotated latlon grid on
	a	sphere?
In-Reply-To: <502992AE.6000109@gmx.eu>
References: <50291AF5.6090207@ifg.uni-tuebingen.de> <502992AE.6000109@gmx.eu>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4939209004@SETHNWS023.carmenta.se>

That's interesting, Hermann, I didn't know about ob_tran. 

After some googling, I found an older post, also by you, where
you also used the flag

    -m 57.2957795130823

which seems to be needed to get degrees instead of radians.

See 

http://lists.maptools.org/pipermail/proj/2011-October/005906.html

and

http://lists.maptools.org/pipermail/proj/2011-October/005913.html

and also

http://lists.maptools.org/pipermail/proj/2010-June/005234.html


On the related topic, here is a reference saying that meteorological
long/lat data on a sphere needs no datum shift to WGS84:

http://www.ie.unc.edu/cempd/projects/mims/spatial/grids_ellipsoids_map_proj.html


Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Hermann Peifer
Sent: Tuesday, August 14, 2012 1:50 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] proj4 specifications for a rotated latlon grid on a sphere?

On 2012-08-13 12:19, Martin Ivanov wrote:
> Dear PROJ4 users,
>
> I have a rotated latitude-longitude grid with coordinates of the north
> pole POLE_LAT=39.25 and POLE_LON=-162.
> The data are on a sphere with radius 6371 km. Is it possible to define
> proj4 specifications for this grid...

You could try:
+proj=ob_tran +o_proj=latlon +o_lon_p=-162 +o_lat_p=39.25 +lon_0=180

Hermann
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From dcesari at arpa.emr.it  Tue Aug 14 02:49:15 2012
From: dcesari at arpa.emr.it (Davide Cesari)
Date: Tue, 14 Aug 2012 11:49:15 +0200
Subject: [Proj] proj4 specifications for a rotated latlon grid on a
 sphere?
In-Reply-To: <841F7CA4-A8A3-439C-93B6-B9E696835B59@carmenta.com>
References: <50291AF5.6090207@ifg.uni-tuebingen.de>
	<841F7CA4-A8A3-439C-93B6-B9E696835B59@carmenta.com>
Message-ID: <502A1F1B.6050604@arpa.emr.it>

Hello Martin, in principle this should be a job for proj's ob_tran 
transformation

ob_tran : General Oblique Transformation
         Misc Sph
         o_proj= plus parameters for projection
         o_lat_p= o_lon_p= (new pole) or
         o_alpha= o_lon_c= o_lat_c= or
         o_lon_1= o_lat_1= o_lon_2= o_lat_2=

but I am afraid that the way the parameters are to be fed to proj is 
different from the convention used in meteorological gridded data that I 
suppose you are using, there was some past discussion here:

http://lists.maptools.org/pipermail/proj/2010-June/005234.html
http://lists.maptools.org/pipermail/proj/2011-October/005913.html

please report on any success. Anyway the idea proposed by Mikael may be 
a good workaround which is worth tesating,
	Best regards, Davide

-- 
============================= Davide Cesari ============================
Servizio IdroMeteoClima - ARPA Emilia Romagna
NWP modelling - Modellistica numerica previsionale
  Home page: http://www.webalice.it/o.drofa/davide/
  Address:   ARPA-SIM, Viale Silvani 6, 40122 Bologna, Italy
========================================================================

On 13/08/2012 22:40, Mikael Rittri wrote:
> Hello Martin.
> In some GIS software, it would indeed be possible to rotate
> a graticule via +towgs84 parameters with huge rotations.
> But I think Proj.4 (like most GIS software) uses a simplified,
> linearized implementation of the rotations, assuming they
> are small (up to 5 or perhaps 10 arc seconds).
>
> But you can rotate a graticule on a sphere by using Proj.4
> twice. Let's try it for the point lat =0, lon = 0 on the rotated
> grid. First, project to an auxiliary stereographic grid:
...
>
> Best regards
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
> 13 aug 2012 kl. 17:19 skrev "Martin Ivanov" <martin.ivanov at ifg.uni-tuebingen.de>:
>
>> Dear PROJ4 users,
>>
>> I have a rotated latitude-longitude grid with coordinates of the north
>> pole POLE_LAT9.25 and POLE_LON=-162.
>> The data are on a sphere with radius 6371 km. Is it possible to define
>> proj4 specifications for this grid, so that I can make
>> coordinate transformations? Most interesting for me would be how to
>> specify the towgs84 parameter.
>>
>> Any suggestions will be appreciated.
>>
>> Best regards,
>>
>> --
>> Dr. Martin Ivanov
>> Eberhard-Karls-Universität Tübingen
>> Mathematisch-Naturwissenschaftliche Fakultät
>> Fachbereich Geowissenschaften
>> Water & Earth System Science (WESS)
>> Hölderlinstraße 12, 72074 Tübingen, Deutschland
>> Tel. +4970712974213
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>




From ovv at hetnet.nl  Tue Aug 14 05:03:57 2012
From: ovv at hetnet.nl (OvV_HN)
Date: Tue, 14 Aug 2012 14:03:57 +0200
Subject: [Proj]  a simple coordinate conversion problem
Message-ID: <286F6B11B477441883401C42C36BBDE9@PCHP>

In reply to:

[Proj] a simple coordinate conversion problem
Martin Ivanov martin.ivanov at ifg.uni-tuebingen.de
Fri Aug 10 07:48:32 EST 2012

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to transform the coordinates of the points in my data set from the 
sphere
to WGS84. For that purpose I need the +towgs84 parameters for my sphere, 
which I
do not know. Does someone have a clue how to get these parameters?

Any suggestions will be appreciated.

Best regards,

Martin



Reply:

A decent datum transformation program should be able to transform from 
ellipsoid-ellipsoid, ellipsoid-sphere, sphere-ellipsoid, sphere-sphere. I 
don't know if PROJ.4 can do this, but it should not be too difficult to 
implement this in the code.

A transform from spherical to ellipsoidal coordinates is not necessary for 
some kinds of data, like meteorological data?

Hmm..... let's take a test point, say lat=50d; lon=10d; h=120m; on the 
Normal Sphere with a (rounded) radius of 6371000 meters. If I transform this 
to the WGS84 ellipsoid with translations 0, rotations 0, scaling factor 0, 
then I get the coordinates:
lat'=50.1892244; lon'=10; h'=5558.1 m.
I should say that about 5.4 km height difference and around 21 km difference 
in northerly direction (with respect to the WGS84 ellipsoid) is quite 
significant.
Possibly a bit too much to ignore, even for meteo applications.


Oscar van Vlijmen







From ndzinn at comcast.net  Tue Aug 14 06:11:43 2012
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 14 Aug 2012 08:11:43 -0500
Subject: [Proj] a simple coordinate conversion problem
In-Reply-To: <286F6B11B477441883401C42C36BBDE9@PCHP>
References: <286F6B11B477441883401C42C36BBDE9@PCHP>
Message-ID: <916FB1C07B1440E88F87C9225BF43269@NoelHmPC>

I'd argue a "transform from spherical to ellipsoidal coordinates is not 
necessary for some kinds of data, like meteorological data" because a 
spherical earth is a fiction.  A spherical model may be used for databases 
or processing simplicity (ignorantly, IMHO), but it's impossible that 
meteorological (or any other) data finding its way into the database is 
based upon a sphere.  Where would that spherical data come from?  Not GPS. 
So, the way to undo this ignorance is to treat (so-called) spherical data as 
ellipsoidal and not apply any datum shift.  Two wrongs in this case make a 
right (well, almost, because the audit trail suffers).  -Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: OvV_HN
Sent: Tuesday, August 14, 2012 7:03 AM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] a simple coordinate conversion problem

In reply to:

[Proj] a simple coordinate conversion problem
Martin Ivanov martin.ivanov at ifg.uni-tuebingen.de
Fri Aug 10 07:48:32 EST 2012

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to transform the coordinates of the points in my data set from the
sphere
to WGS84. For that purpose I need the +towgs84 parameters for my sphere,
which I
do not know. Does someone have a clue how to get these parameters?

Any suggestions will be appreciated.

Best regards,

Martin



Reply:

A decent datum transformation program should be able to transform from
ellipsoid-ellipsoid, ellipsoid-sphere, sphere-ellipsoid, sphere-sphere. I
don't know if PROJ.4 can do this, but it should not be too difficult to
implement this in the code.

A transform from spherical to ellipsoidal coordinates is not necessary for
some kinds of data, like meteorological data?

Hmm..... let's take a test point, say lat=50d; lon=10d; h=120m; on the
Normal Sphere with a (rounded) radius of 6371000 meters. If I transform this
to the WGS84 ellipsoid with translations 0, rotations 0, scaling factor 0,
then I get the coordinates:
lat'=50.1892244; lon'=10; h'=5558.1 m.
I should say that about 5.4 km height difference and around 21 km difference
in northerly direction (with respect to the WGS84 ellipsoid) is quite
significant.
Possibly a bit too much to ignore, even for meteo applications.


Oscar van Vlijmen





_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From Mikael.Rittri at carmenta.com  Tue Aug 14 06:17:43 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 14 Aug 2012 13:17:43 +0000
Subject: [Proj] a simple coordinate conversion problem
In-Reply-To: <286F6B11B477441883401C42C36BBDE9@PCHP>
References: <286F6B11B477441883401C42C36BBDE9@PCHP>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4939209079@SETHNWS023.carmenta.se>

Oscar, you wrote:

> I should say that about 5.4 km height difference and around 21 km
> difference in northerly direction (with respect to the WGS84 
> ellipsoid) is quite significant.
> Possibly a bit too much to ignore, even for meteo applications.

Well, I could be wrong, but I think that meteorologists locate their 
sensors, and thus the sensor data, by ordinary WGS84 long/lat (not
sure about the kind of height).  Then, what they say is roughly, 

"Okay, let's all pretend that these long/lat (and height) 
 values refer to a perfect sphere with radius = 6371 km." 

Then, they can use spherical projections (like Web Mercator) and
do whatever computations they want on a sphere. Distances computed
on this sphere will vary by up to +/- 0.5 percent from true distances
on Earth, but I don't think they care. 

The 21 km displacement you mention is what the meteorologists 
would get if they their long/lat values really did refer to a
true sphere of radius 6371 km, georeferenced by GPS for example,
but I don't think that's what they do. 

Reference: http://www.ie.unc.edu/cempd/projects/mims/spatial/grids_ellipsoids_map_proj.html

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of OvV_HN
Sent: Tuesday, August 14, 2012 2:04 PM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] a simple coordinate conversion problem

In reply to:

[Proj] a simple coordinate conversion problem
Martin Ivanov martin.ivanov at ifg.uni-tuebingen.de
Fri Aug 10 07:48:32 EST 2012

Dear users of PROJ,

I have a data set on a perfect sphere with radius 6371 km. The "projection"
is latitude-longitude, so the data practically are unprojected.

I need to transform the coordinates of the points in my data set from the 
sphere
to WGS84. For that purpose I need the +towgs84 parameters for my sphere, 
which I
do not know. Does someone have a clue how to get these parameters?

Any suggestions will be appreciated.

Best regards,

Martin



Reply:

A decent datum transformation program should be able to transform from 
ellipsoid-ellipsoid, ellipsoid-sphere, sphere-ellipsoid, sphere-sphere. I 
don't know if PROJ.4 can do this, but it should not be too difficult to 
implement this in the code.

A transform from spherical to ellipsoidal coordinates is not necessary for 
some kinds of data, like meteorological data?

Hmm..... let's take a test point, say lat=50d; lon=10d; h=120m; on the 
Normal Sphere with a (rounded) radius of 6371000 meters. If I transform this 
to the WGS84 ellipsoid with translations 0, rotations 0, scaling factor 0, 
then I get the coordinates:
lat'=50.1892244; lon'=10; h'=5558.1 m.
I should say that about 5.4 km height difference and around 21 km difference 
in northerly direction (with respect to the WGS84 ellipsoid) is quite 
significant.
Possibly a bit too much to ignore, even for meteo applications.


Oscar van Vlijmen





_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From zoltans at geograph.co.za  Tue Aug 14 09:06:21 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 14 Aug 2012 18:06:21 +0200
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
 UTM36S - NTv2 file needed.
In-Reply-To: <18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
Message-ID: <502A777D.3070806@geograph.co.za>

Hi Again,

I am struggling to locate a copy of the NTv2 file for Clarke 1880 Cape 
Datum to WGS84

I have not had any luck with either Google, or the contacts mentioned in 
the article pointed to (below) by Mikael, so please could someone give 
me a link to download from, or perhaps send it to me via 
transferbigfiles.com or similar method.

I have no idea how big, or what extents are in these NTv2 grid files, as 
I have never used them before.

To this end, my area of interest is in Maputo (Mozambique), and 
Mozambique apparently uses Clarke 1866 (not 1880) - but the surveyor 
"swears blind" that the coords are on "1880" and not "1866".

This begs the question:
Do the extents of this Clarke 1880 NTv2 grid stop at the South African 
border (some 50Km west of my area of interest), or do they cover Maputo 
sufficiently?


Thanks & kind regards,
Zoltan




On 2012/07/26 21:42, Mikael Rittri wrote:
> Hello Zoltan.
> Yes, as you say, the traditional transverse mercator projections for Southern Africa have
> axes positive west and south. This can be handled in Proj 4.8.0 (see http://trac.osgeo.org/proj/wiki/TMSO ).
> However, since both your example coordinates are negative, I think you have data in a less traditional
> but more GIS-friendly variant, where the axes go east and north and the traditional coordinate values
> have been negated.
>
> Another problem is caused by the Cape datum having distortions that are not handled well
> by a simple Helmert datum shift ( +towgs84 in Proj.4). Such a datum shift will have errors up to 15 meters,
> perhaps more. You can get much better accuracy from a grid shift file. So I think your source CRS
> is best constructed as
>
> +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +nadgrids=SA.gsb
>
> where SA.gsb is an NTv2 grid shift file from Cape to Hartebeesthoek94 (or to WGS84),
> covering South Africa. To find out where you can download it, see
>
> http://eepublishers.co.za/article/datum-transformations-using-the-ntv2-grid.html
>
> About your target CRS, I don't think there is an EPSG code for the combination of Hartebeesthoek94 and
> a UTM projection. But since H94 is the same as WGS84 except for tectonic motion, I think you
> can use WGS84 / UTM zone 36S, which can be defined as
>
>     +init=epsg:32736
>
> Hope this helps,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
> 26 jul 2012 kl. 17:14 skrev "Zoltan Szecsei" <zoltans at geograph.co.za>:
>
>> Hi Everyone,
>> I have some orthos and some 3D vector data that I need to reproject from
>> Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 36S.
>>
>> I'm hoping to use gdalwarp (with VRT) and ogr2ogr, but I cannot find the
>> input projection codes.
>>
>> Please can someone provide some guidance on this?
>> Maybe I have to define them? How?
>>
>> The jpw files for the orthos are typically:
>> 0.0500000000000000030
>> 0.0
>> 0.0
>> -0.0500000000000000030
>> -50999.974999999999
>> -2872000.0249999999
>> and you'll probably notice that it is not the usual Gauss Conformal
>> projection, as that would be +ve South and West for this area.
>>
>> Once the orthos are done I will be needing to transform (as above) a 3D
>> DGN file and an ASCII DEM file as well. Typical DEM values are:
>> -50400.000,-2872481.000,-2.74
>> -50399.000,-2872481.000,-2.84
>>
>> I'd be grateful for some help specifying the input and output projection
>> details (epsg codes??)
>>
>> Thanks & regards,
>> Zoltan
>>
>>
>>
>> -- 
>>
>> ===========================================
>> Zoltan Szecsei PrGISc [PGP0031]
>> Geograph (Pty) Ltd.
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> 65 Main Road, Muizenberg 7945
>> Western Cape, South Africa.
>>
>> 34° 6'16.35"S 18°28'5.62"E
>>
>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>> Fax: +27-86-6115323     www.geograph.co.za
>> ===========================================
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34° 6'16.35"S 18°28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



From peifer at gmx.eu  Tue Aug 14 11:38:24 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue, 14 Aug 2012 15:38:24 -0300
Subject: [Proj] proj4 specifications for a rotated latlon grid on a
	sphere?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4939209004@SETHNWS023.carmenta.se>
References: <50291AF5.6090207@ifg.uni-tuebingen.de> <502992AE.6000109@gmx.eu>
	<E4AB3DD44D22854B819908379DE4AD4939209004@SETHNWS023.carmenta.se>
Message-ID: <502A9B20.4000700@gmx.eu>


Indeed, I forgot to mention this switch. Sorry.

 From my .bash_history, I see that I have also been using: 
+to_meter=.0174532925199 (which has the same effect, if I remember 
correctly).

Hermann


On 2012-08-14 5:51, Mikael Rittri wrote:
> That's interesting, Hermann, I didn't know about ob_tran.
>
> After some googling, I found an older post, also by you, where
> you also used the flag
>
>      -m 57.2957795130823
>
> which seems to be needed to get degrees instead of radians.
>
> See
>
> http://lists.maptools.org/pipermail/proj/2011-October/005906.html
>
> and
>
> http://lists.maptools.org/pipermail/proj/2011-October/005913.html
>
> and also
>
> http://lists.maptools.org/pipermail/proj/2010-June/005234.html
>
>
> On the related topic, here is a reference saying that meteorological
> long/lat data on a sphere needs no datum shift to WGS84:
>
> http://www.ie.unc.edu/cempd/projects/mims/spatial/grids_ellipsoids_map_proj.html
>
>
> Regards,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
> -----Original Message-----
> From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Hermann Peifer
> Sent: Tuesday, August 14, 2012 1:50 AM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] proj4 specifications for a rotated latlon grid on a sphere?
>
> On 2012-08-13 12:19, Martin Ivanov wrote:
>> Dear PROJ4 users,
>>
>> I have a rotated latitude-longitude grid with coordinates of the north
>> pole POLE_LAT=39.25 and POLE_LON=-162.
>> The data are on a sphere with radius 6371 km. Is it possible to define
>> proj4 specifications for this grid...
>
> You could try:
> +proj=ob_tran +o_proj=latlon +o_lon_p=-162 +o_lat_p=39.25 +lon_0=180
>
> Hermann
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From cjmce at lsu.edu  Tue Aug 14 13:08:44 2012
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 14 Aug 2012 20:08:44 +0000
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
 UTM36S - NTv2 file needed.
In-Reply-To: <502A777D.3070806@geograph.co.za>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>,
	<502A777D.3070806@geograph.co.za>
Message-ID: <0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>

Zoltan,



All of the Moçambican borders were surveyed by British Royal Engineers in the early 1900's and therefore ONLY the borders are on the Cape Datum, Clarke 1880 ellipsoid.  In regards to the interior of the of the country, all native classical triangulation was indeed referenced to the Clarke 1866 ellipsoid for the Tete Datum of 1960, the Madzansua Datum of 1904, and the Observatorio Campo Rodriques Datum of 1907.



The "Arc of the 30th Meridian Survey" did not touch the country.



In 1995, Norway Mapping did a comprehensive readjustment of the country called MOZNET/ITRF94.



As of September 1999 when I wrote my Grids & Datums column on the country, no geoid had been computed for the country.  Your best bet is likely EGM96 or a variant thereof for a guess of the geoid there.



Clifford J. Mugnier, c.p., c.m.s.

Chief of Geodesy

LSU Center for GeoInformatics (ERAD 266)

Dept. of Civil Engineering (P.F. Taylor 3531)

LOUISIANA STATE UNIVERSITY

Baton Rouge, LA  70803

Academic: (225) 578-8536

Research: (225) 578-4578

Cell:             (225) 328-8975

honorary lifetime member, lsps

fellow emeritus, asprs

member, apsg

________________________________________
From: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] on behalf of Zoltan Szecsei [zoltans at geograph.co.za]
Sent: Tuesday, August 14, 2012 11:06 AM
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84 UTM36S - NTv2 file needed.

Hi Again,

I am struggling to locate a copy of the NTv2 file for Clarke 1880 Cape
Datum to WGS84

I have not had any luck with either Google, or the contacts mentioned in
the article pointed to (below) by Mikael, so please could someone give
me a link to download from, or perhaps send it to me via
transferbigfiles.com or similar method.

I have no idea how big, or what extents are in these NTv2 grid files, as
I have never used them before.

To this end, my area of interest is in Maputo (Mozambique), and
Mozambique apparently uses Clarke 1866 (not 1880) - but the surveyor
"swears blind" that the coords are on "1880" and not "1866".

This begs the question:
Do the extents of this Clarke 1880 NTv2 grid stop at the South African
border (some 50Km west of my area of interest), or do they cover Maputo
sufficiently?


Thanks & kind regards,
Zoltan




On 2012/07/26 21:42, Mikael Rittri wrote:
> Hello Zoltan.
> Yes, as you say, the traditional transverse mercator projections for Southern Africa have
> axes positive west and south. This can be handled in Proj 4.8.0 (see http://trac.osgeo.org/proj/wiki/TMSO ).
> However, since both your example coordinates are negative, I think you have data in a less traditional
> but more GIS-friendly variant, where the axes go east and north and the traditional coordinate values
> have been negated.
>
> Another problem is caused by the Cape datum having distortions that are not handled well
> by a simple Helmert datum shift ( +towgs84 in Proj.4). Such a datum shift will have errors up to 15 meters,
> perhaps more. You can get much better accuracy from a grid shift file. So I think your source CRS
> is best constructed as
>
> +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +nadgrids=SA.gsb
>
> where SA.gsb is an NTv2 grid shift file from Cape to Hartebeesthoek94 (or to WGS84),
> covering South Africa. To find out where you can download it, see
>
> http://eepublishers.co.za/article/datum-transformations-using-the-ntv2-grid.html
>
> About your target CRS, I don't think there is an EPSG code for the combination of Hartebeesthoek94 and
> a UTM projection. But since H94 is the same as WGS84 except for tectonic motion, I think you
> can use WGS84 / UTM zone 36S, which can be defined as
>
>     +init=epsg:32736
>
> Hope this helps,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
> 26 jul 2012 kl. 17:14 skrev "Zoltan Szecsei" <zoltans at geograph.co.za>:
>
>> Hi Everyone,
>> I have some orthos and some 3D vector data that I need to reproject from
>> Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 36S.
>>
>> I'm hoping to use gdalwarp (with VRT) and ogr2ogr, but I cannot find the
>> input projection codes.
>>
>> Please can someone provide some guidance on this?
>> Maybe I have to define them? How?
>>
>> The jpw files for the orthos are typically:
>> 0.0500000000000000030
>> 0.0
>> 0.0
>> -0.0500000000000000030
>> -50999.974999999999
>> -2872000.0249999999
>> and you'll probably notice that it is not the usual Gauss Conformal
>> projection, as that would be +ve South and West for this area.
>>
>> Once the orthos are done I will be needing to transform (as above) a 3D
>> DGN file and an ASCII DEM file as well. Typical DEM values are:
>> -50400.000,-2872481.000,-2.74
>> -50399.000,-2872481.000,-2.84
>>
>> I'd be grateful for some help specifying the input and output projection
>> details (epsg codes??)
>>
>> Thanks & regards,
>> Zoltan
>>
>>
>>
>> --
>>
>> ===========================================
>> Zoltan Szecsei PrGISc [PGP0031]
>> Geograph (Pty) Ltd.
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> 65 Main Road, Muizenberg 7945
>> Western Cape, South Africa.
>>
>> 34° 6'16.35"S 18°28'5.62"E
>>
>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>> Fax: +27-86-6115323     www.geograph.co.za
>> ===========================================
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj


--

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34° 6'16.35"S 18°28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120814/f8252d13/attachment.html>

From jmfluis at gmail.com  Tue Aug 14 13:49:51 2012
From: jmfluis at gmail.com (Joaquim Luis)
Date: Tue, 14 Aug 2012 21:49:51 +0100
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
	UTM36S - NTv2 file needed.
In-Reply-To: <0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
	<502A777D.3070806@geograph.co.za>
	<0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>
Message-ID: <0F348F23-3D73-4611-8C34-B731E69BCEF2@gmail.com>



Sent from my iPadiola

On 14/08/2012, at 21:08, Clifford J Mugnier <cjmce at lsu.edu> wrote:

> Zoltan,
>  
> All of the Moçambican borders were surveyed by British Royal Engineers in the early 1900's and therefore ONLY the borders are on the Cape Datum, Clarke 1880 ellipsoid.  In regards to the interior of the of the country, all native classical triangulation was indeed referenced to the Clarke 1866 ellipsoid for the Tete Datum of 1960, the Madzansua Datum of 1904, and the Observatorio Campo Rodriques Datum of 1907.
>  
> The "Arc of the 30th Meridian Survey" did not touch the country.


> In 1995, Norway Mapping did a comprehensive readjustment of the country called MOZNET/ITRF94.

... which was re-observed in 2011  by a Moçambique/Portuguese mission (I participated on it) but don't know if the results are already available.

>  
> As of September 1999 when I wrote my Grids & Datums column on the country, no geoid had been computed for the country.  Your best bet is likely EGM96 or a variant thereof for a guess of the geoid there.

Be aware that there are large differences (~1 meter) between EGM96 and EGM2008 solutions in the central part of Moçambique. I had a paper where that is clearly shown but don't find it anymore.

Joaquim


> 
> 
> Clifford J. Mugnier, c.p., c.m.s.
> Chief of Geodesy
> LSU Center for GeoInformatics (ERAD 266)
> Dept. of Civil Engineering (P.F. Taylor 3531)
> LOUISIANA STATE UNIVERSITY
> Baton Rouge, LA  70803
> Academic: (225) 578-8536
> Research: (225) 578-4578
> Cell:             (225) 328-8975
> honorary lifetime member, lsps
> fellow emeritus, asprs
> member, apsg
> ________________________________________
> From: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] on behalf of Zoltan Szecsei [zoltans at geograph.co.za]
> Sent: Tuesday, August 14, 2012 11:06 AM
> To: Mikael Rittri
> Cc: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84 UTM36S - NTv2 file needed.
> 
> Hi Again,
> 
> I am struggling to locate a copy of the NTv2 file for Clarke 1880 Cape
> Datum to WGS84
> 
> I have not had any luck with either Google, or the contacts mentioned in
> the article pointed to (below) by Mikael, so please could someone give
> me a link to download from, or perhaps send it to me via
> transferbigfiles.com or similar method.
> 
> I have no idea how big, or what extents are in these NTv2 grid files, as
> I have never used them before.
> 
> To this end, my area of interest is in Maputo (Mozambique), and
> Mozambique apparently uses Clarke 1866 (not 1880) - but the surveyor
> "swears blind" that the coords are on "1880" and not "1866".
> 
> This begs the question:
> Do the extents of this Clarke 1880 NTv2 grid stop at the South African
> border (some 50Km west of my area of interest), or do they cover Maputo
> sufficiently?
> 
> 
> Thanks & kind regards,
> Zoltan
> 
> 
> 
> 
> On 2012/07/26 21:42, Mikael Rittri wrote:
> > Hello Zoltan.
> > Yes, as you say, the traditional transverse mercator projections for Southern Africa have
> > axes positive west and south. This can be handled in Proj 4.8.0 (see http://trac.osgeo.org/proj/wiki/TMSO ).
> > However, since both your example coordinates are negative, I think you have data in a less traditional
> > but more GIS-friendly variant, where the axes go east and north and the traditional coordinate values
> > have been negated.
> >
> > Another problem is caused by the Cape datum having distortions that are not handled well
> > by a simple Helmert datum shift ( +towgs84 in Proj.4). Such a datum shift will have errors up to 15 meters,
> > perhaps more. You can get much better accuracy from a grid shift file. So I think your source CRS
> > is best constructed as
> >
> > +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +nadgrids=SA.gsb
> >
> > where SA.gsb is an NTv2 grid shift file from Cape to Hartebeesthoek94 (or to WGS84),
> > covering South Africa. To find out where you can download it, see
> >
> > http://eepublishers.co.za/article/datum-transformations-using-the-ntv2-grid.html
> >
> > About your target CRS, I don't think there is an EPSG code for the combination of Hartebeesthoek94 and
> > a UTM projection. But since H94 is the same as WGS84 except for tectonic motion, I think you
> > can use WGS84 / UTM zone 36S, which can be defined as
> >
> >     +init=epsg:32736
> >
> > Hope this helps,
> >
> > Mikael Rittri
> > Carmenta
> > Sweden
> > http://www.carmenta.com
> >
> > 26 jul 2012 kl. 17:14 skrev "Zoltan Szecsei" <zoltans at geograph.co.za>:
> >
> >> Hi Everyone,
> >> I have some orthos and some 3D vector data that I need to reproject from
> >> Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 36S.
> >>
> >> I'm hoping to use gdalwarp (with VRT) and ogr2ogr, but I cannot find the
> >> input projection codes.
> >>
> >> Please can someone provide some guidance on this?
> >> Maybe I have to define them? How?
> >>
> >> The jpw files for the orthos are typically:
> >> 0.0500000000000000030
> >> 0.0
> >> 0.0
> >> -0.0500000000000000030
> >> -50999.974999999999
> >> -2872000.0249999999
> >> and you'll probably notice that it is not the usual Gauss Conformal
> >> projection, as that would be +ve South and West for this area.
> >>
> >> Once the orthos are done I will be needing to transform (as above) a 3D
> >> DGN file and an ASCII DEM file as well. Typical DEM values are:
> >> -50400.000,-2872481.000,-2.74
> >> -50399.000,-2872481.000,-2.84
> >>
> >> I'd be grateful for some help specifying the input and output projection
> >> details (epsg codes??)
> >>
> >> Thanks & regards,
> >> Zoltan
> >>
> >>
> >>
> >> --
> >>
> >> ===========================================
> >> Zoltan Szecsei PrGISc [PGP0031]
> >> Geograph (Pty) Ltd.
> >> P.O. Box 7, Muizenberg 7950, South Africa.
> >>
> >> 65 Main Road, Muizenberg 7945
> >> Western Cape, South Africa.
> >>
> >> 34° 6'16.35"S 18°28'5.62"E
> >>
> >> Tel: +27-21-7884897  Mobile: +27-83-6004028
> >> Fax: +27-86-6115323     www.geograph.co.za
> >> ===========================================
> >>
> >> _______________________________________________
> >> Proj mailing list
> >> Proj at lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> --
> 
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
> 
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
> 
> 34° 6'16.35"S 18°28'5.62"E
> 
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120814/9e853a75/attachment.html>

From martin.ivanov at ifg.uni-tuebingen.de  Wed Aug 15 03:57:17 2012
From: martin.ivanov at ifg.uni-tuebingen.de (Martin Ivanov)
Date: Wed, 15 Aug 2012 12:57:17 +0200
Subject: [Proj] proj4 specifications for a rotated latlon grid on a
	sphere?
In-Reply-To: <502A9B20.4000700@gmx.eu>
References: <50291AF5.6090207@ifg.uni-tuebingen.de> <502992AE.6000109@gmx.eu>
	<E4AB3DD44D22854B819908379DE4AD4939209004@SETHNWS023.carmenta.se>
	<502A9B20.4000700@gmx.eu>
Message-ID: <502B808D.90300@ifg.uni-tuebingen.de>

Thank you all very much for your replies. I tried the suggestion of 
Herman Peifer and it worked perfectly.
The only thing is, as Herman has already noted, that to get get the 
coordinates in the rotated grid one has to use
invproj, and to get the coordinates back to longlat one has to use proj.

Best regards

-- 
Dr. Martin Ivanov
Eberhard-Karls-Universität Tübingen
Mathematisch-Naturwissenschaftliche Fakultät
Fachbereich Geowissenschaften
Water & Earth System Science (WESS)
Hölderlinstraße 12, 72074 Tübingen, Deutschland
Tel. +4970712974213



From gravesricharde at yahoo.com  Wed Aug 15 20:00:12 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Wed, 15 Aug 2012 20:00:12 -0700 (PDT)
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
Message-ID: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>

Hey,

The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.

Here is the metadata from the .prj that I got from the state:

PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Lambert_Conformal_Conic"],
PARAMETER["False_Easting",1312335.958005249],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-120.5],
PARAMETER["Standard_Parallel_1",43.0],
PARAMETER["Standard_Parallel_2",45.5],
PARAMETER["Latitude_Of_Origin",41.75],
UNIT["Foot",0.3048]],
VERTCS["NAD_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PARAMETER["Vertical_Shift",0.0],
PARAMETER["Direction",1.0],

I initialized proj as follows:

proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft

I assume something is not right.

In http://www.findlatitudeandlongitude.com/, I picked the Eastern most point in the state, 45.614818, -116.463726, and verified in maps.goole.com.

From the state's shape file, I picked the point touching the bounding box on the Eastern side, 1005007.55709, 1323046.51837 (1,005,007, 1,323,046), so these are the numbers I am expecting from proj.

When I give this to proj, 

-116.463726 45.614818

I get:

5338087.78 1434192.31 (5,338,087 1,434,192)

As you can see, my numbers are not close.

I would be grateful if someone would help me initialize proj correctly.

Thanks,

Rick Graves
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120815/5b330ea4/attachment.html>

From cgodkin at gmail.com  Wed Aug 15 20:29:50 2012
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 15 Aug 2012 20:29:50 -0700
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
In-Reply-To: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
Message-ID: <CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>

On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <gravesricharde at yahoo.com>wrote:

> Hey,
>
> The good news is that Oregon is the last one I need to get working.  The
> bad news is I do not have it working yet.
>
> Here is the metadata from the .prj that I got from the state:
>
> PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
> GEOGCS["GCS_North_American_1983",
> DATUM["D_North_American_1983",
> SPHEROID["GRS_1980",6378137.0,298.257222101]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Lambert_Conformal_Conic"],
> PARAMETER["False_Easting",1312335.958005249],
> PARAMETER["False_Northing",0.0],
> PARAMETER["Central_Meridian",-120.5],
> PARAMETER["Standard_Parallel_1",43.0],
> PARAMETER["Standard_Parallel_2",45.5],
> PARAMETER["Latitude_Of_Origin",41.75],
> UNIT["Foot",0.3048]],
> VERTCS["NAD_1983",
> DATUM["D_North_American_1983",
> SPHEROID["GRS_1980",6378137.0,298.257222101]],
> PARAMETER["Vertical_Shift",0.0],
> PARAMETER["Direction",1.0],
>
> I initialized proj as follows:
>
> proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5
> +x_0=1312335.958005249 +y_0=0.0 +units=ft
>
> I assume something is not right.
>
>
>
I think there are two things wrong:
1. Your false easting is here given in feet while I believe proj always
wants meters.  The number is about 400000m.  (See
http://trac.osgeo.org/proj/wiki/GenParms).
2. You didn't include an ellipsoid or datum so I'm surprised that proj
worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.

However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft,
which isn't what you want either.

Now I want to know what I am missing!  Let's hope someone cleverer than me
answers.

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120815/f591e3cd/attachment.html>

From Mikael.Rittri at carmenta.com  Thu Aug 16 03:42:31 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 16 Aug 2012 10:42:31 +0000
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
In-Reply-To: <CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
	<CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
Message-ID: <C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>

Carl,
In fact, I don't think you are missing anything.

I made a quick back-of-an-envelope calculation - not using
proj, just a plain calculator - starting with the projection
origin, assuming 111120 meters per degree of latitude,
and 111120 * cos(lat) meters per degree of longitude.

For the test point, I got

Easting = 1408985 ft
Northing = 2341613 ft.

That's close enough to your (Carl's) result, with my simple method.

I may have made a mistake, but Rick: could you double-check your expected coordinates - I am pretty sure they are wrong.

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 05:30 skrev "Carl Godkin" <cgodkin at gmail.com<mailto:cgodkin at gmail.com>>:



On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <<mailto:gravesricharde at yahoo.com>gravesricharde at yahoo.com<mailto:gravesricharde at yahoo.com>> wrote:
Hey,

The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.

Here is the metadata from the .prj that I got from the state:

PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Lambert_Conformal_Conic"],
PARAMETER["False_Easting",1312335.958005249],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-120.5],
PARAMETER["Standard_Parallel_1",43.0],
PARAMETER["Standard_Parallel_2",45.5],
PARAMETER["Latitude_Of_Origin",41.75],
UNIT["Foot",0.3048]],
VERTCS["NAD_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PARAMETER["Vertical_Shift",0.0],
PARAMETER["Direction",1.0],

I initialized proj as follows:

proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft

I assume something is not right.



I think there are two things wrong:
1. Your false easting is here given in feet while I believe proj always wants meters.  The number is about 400000m.  (See <http://trac.osgeo.org/proj/wiki/GenParms> http://trac.osgeo.org/proj/wiki/GenParms).
2. You didn't include an ellipsoid or datum so I'm surprised that proj worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.

However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft, which isn't what you want either.

Now I want to know what I am missing!  Let's hope someone cleverer than me answers.

carl
_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120816/2b5f9b91/attachment.html>

From gravesricharde at yahoo.com  Thu Aug 16 05:43:28 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Thu, 16 Aug 2012 05:43:28 -0700 (PDT)
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
In-Reply-To: <C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
	<CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
	<C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
Message-ID: <1345121008.26481.YahooMailNeo@web162304.mail.bf1.yahoo.com>

Mikael and Carl,

Maybe there is a problem with the Oregon shape files, or maybe I made an incorrect assumption about the contents.

The Oregon redistricting web site is down for me at the moment:

www.leg.state.or.us/redistricting/

But the Oregon shape files are available here:

http://www.srrproject.org/resources/redistricting-shapefiles/


(Click on Oregon to get the link.  If you do not instantly know which one is Oregon, you can hover the mouse and a tip will display telling which state is under the pointer.  Oregon is on the West coast just North of California.)

The zip for Oregon includes two sets of files, Congressional_Districts.* and Congressional_Area_Changes.*. 

I assumed that I should go with the latter file.

I ran diff against the two .prj files, and there is no difference.

However, I just now discovered that the contents of the shapefiles are radically different.  Here are the bounding boxes:

Congressional_Districts

(183987.16863517463, 88653.9580052495, 2345137.542322829, 1677526.0958005222)


Congressional_Area_Changes

(427663.998031497, 172986.72867454588, 1005007.5570866163, 1488902.549212602)


Sorry for being a beginner, but is there something I should know to do with these two files?  Or should I be asking Oregon what is the deal?

Thanks,

Rick



________________________________
 From: Mikael Rittri <Mikael.Rittri at carmenta.com>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org> 
Sent: Thursday, August 16, 2012 6:42 PM
Subject: Re: [Proj] request help with Lambert Conic Conformal (2SP)
 

Carl,
In fact, I don't think you are missing anything. 

I made a quick back-of-an-envelope calculation - not using
proj, just a plain calculator - starting with the projection
origin, assuming 111120 meters per degree of latitude,
and 111120 * cos(lat) meters per degree of longitude.  

For the test point, I got 

Easting = 1408985 ft
Northing = 2341613 ft. 

That's close enough to your (Carl's) result, with my simple method. 

I may have made a mistake, but Rick: could you double-check your expected coordinates - I am pretty sure they are wrong. 

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 05:30 skrev "Carl Godkin" <cgodkin at gmail.com>:



>
>
>On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <gravesricharde at yahoo.com> wrote:
>
>Hey,
>>
>>
>>The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.
>>
>>
>>Here is the metadata from the .prj that I got from the state:
>>
>>
>>PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
>>GEOGCS["GCS_North_American_1983",
>>DATUM["D_North_American_1983",
>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>PRIMEM["Greenwich",0.0],
>>UNIT["Degree",0.0174532925199433]],
>>PROJECTION["Lambert_Conformal_Conic"],
>>PARAMETER["False_Easting",1312335.958005249],
>>PARAMETER["False_Northing",0.0],
>>PARAMETER["Central_Meridian",-120.5],
>>PARAMETER["Standard_Parallel_1",43.0],
>>PARAMETER["Standard_Parallel_2",45.5],
>>PARAMETER["Latitude_Of_Origin",41.75],
>>UNIT["Foot",0.3048]],
>>VERTCS["NAD_1983",
>>DATUM["D_North_American_1983",
>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>PARAMETER["Vertical_Shift",0.0],
>>PARAMETER["Direction",1.0],
>>
>>
>>I initialized proj as follows:
>>
>>
>>proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft
>>
>>
>>I assume something is not right.
>>
>>
>>
>>
>
>
>I think there are two things wrong:  
>1. Your false easting is here given in feet while I believe proj always wants meters.  The number is about 400000m.  (See http://trac.osgeo.org/proj/wiki/GenParms).
>2. You didn't include an ellipsoid or datum so I'm surprised that proj worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.
>
>
>However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft, which isn't what you want either.  
>
>
>Now I want to know what I am missing!  Let's hope someone cleverer than me answers.
>
>
>carl
_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120816/bf8f9a46/attachment.html>

From Mikael.Rittri at carmenta.com  Thu Aug 16 06:52:43 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 16 Aug 2012 13:52:43 +0000
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
In-Reply-To: <1345121008.26481.YahooMailNeo@web162304.mail.bf1.yahoo.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
	<CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
	<C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
	<1345121008.26481.YahooMailNeo@web162304.mail.bf1.yahoo.com>
Message-ID: <C9F0C948-3AB0-472E-BBCB-9E532FB1E21A@carmenta.com>

Rick,
I don't know about the shapefiles, but you could try this Proj.4 definition

  +init=epsg:2992

which I think will be equivalent to Carl's definition.

(I'm not sure how you can verify that it works, but maybe you
can compare the Oregon data location with other data sources.)

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 14:44 skrev "Rick Graves" <gravesricharde at yahoo.com<mailto:gravesricharde at yahoo.com>>:

Mikael and Carl,

Maybe there is a problem with the Oregon shape files, or maybe I made an incorrect assumption about the contents.

The Oregon redistricting web site is down for me at the moment:

www.leg.state.or.us/redistricting/<http://www.leg.state.or.us/redistricting/>

But the Oregon shape files are available here:

http://www.srrproject.org/resources/redistricting-shapefiles/

(Click on Oregon to get the link.  If you do not instantly know which one is Oregon, you can hover the mouse and a tip will display telling which state is under the pointer.  Oregon is on the West coast just North of California.)

The zip for Oregon includes two sets of files, Congressional_Districts.* and Congressional_Area_Changes.*.

I assumed that I should go with the latter file.

I ran diff against the two .prj files, and there is no difference.

However, I just now discovered that the contents of the shapefiles are radically different.  Here are the bounding boxes:

Congressional_Districts
(183987.16863517463, 88653.9580052495, 2345137.542322829, 1677526.0958005222)

Congressional_Area_Changes
(427663.998031497, 172986.72867454588, 1005007.5570866163, 1488902.549212602)

Sorry for being a beginner, but is there something I should know to do with these two files?  Or should I be asking Oregon what is the deal?

Thanks,

Rick


________________________________
From: Mikael Rittri <Mikael.Rittri at carmenta.com<mailto:Mikael.Rittri at carmenta.com>>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org<mailto:proj at lists.maptools.org>>
Sent: Thursday, August 16, 2012 6:42 PM
Subject: Re: [Proj] request help with Lambert Conic Conformal (2SP)

Carl,
In fact, I don't think you are missing anything.

I made a quick back-of-an-envelope calculation - not using
proj, just a plain calculator - starting with the projection
origin, assuming 111120 meters per degree of latitude,
and 111120 * cos(lat) meters per degree of longitude.

For the test point, I got

Easting = 1408985 ft
Northing = 2341613 ft.

That's close enough to your (Carl's) result, with my simple method.

I may have made a mistake, but Rick: could you double-check your expected coordinates - I am pretty sure they are wrong.

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 05:30 skrev "Carl Godkin" <<mailto:cgodkin at gmail.com>cgodkin at gmail.com<mailto:cgodkin at gmail.com>>:



On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <<mailto:gravesricharde at yahoo.com><mailto:gravesricharde at yahoo.com>gravesricharde at yahoo.com<mailto:gravesricharde at yahoo.com>> wrote:
Hey,

The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.

Here is the metadata from the .prj that I got from the state:

PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Lambert_Conformal_Conic"],
PARAMETER["False_Easting",1312335.958005249],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-120.5],
PARAMETER["Standard_Parallel_1",43.0],
PARAMETER["Standard_Parallel_2",45.5],
PARAMETER["Latitude_Of_Origin",41.75],
UNIT["Foot",0.3048]],
VERTCS["NAD_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PARAMETER["Vertical_Shift",0.0],
PARAMETER["Direction",1.0],

I initialized proj as follows:

proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft

I assume something is not right.



I think there are two things wrong:
1. Your false easting is here given in feet while I believe proj always wants meters.  The number is about 400000m.  (See <http://trac.osgeo.org/proj/wiki/GenParms> http://trac.osgeo.org/proj/wiki/GenParms).
2. You didn't include an ellipsoid or datum so I'm surprised that proj worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.

However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft, which isn't what you want either.

Now I want to know what I am missing!  Let's hope someone cleverer than me answers.

carl
_______________________________________________
Proj mailing list
<mailto:Proj at lists.maptools.org>Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
<mailto:Proj at lists.maptools.org>Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
<http://lists.maptools.org/mailman/listinfo/proj>http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120816/698907ae/attachment.html>

From gravesricharde at yahoo.com  Thu Aug 16 14:54:04 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Thu, 16 Aug 2012 14:54:04 -0700 (PDT)
Subject: [Proj] request help with Lambert Conic Conformal (2SP) SOLVED
In-Reply-To: <C9F0C948-3AB0-472E-BBCB-9E532FB1E21A@carmenta.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
	<CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
	<C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
	<1345121008.26481.YahooMailNeo@web162304.mail.bf1.yahoo.com>
	<C9F0C948-3AB0-472E-BBCB-9E532FB1E21A@carmenta.com>
Message-ID: <1345154044.8159.YahooMailNeo@web162304.mail.bf1.yahoo.com>

Mikael and Carl,

From the correct shape file, the point touching the bounding box on the Eastern side is 2345137.5423228294, 1430204.1095800549.  Comparing these with numbers from proj with the lat/long inputs, the easting is within 0.1%, and the northing is within 1%, which I believe is close enough (for points picked from on line maps).


Mikael wrote:

> you could try this Proj.4 definition: +init=epsg:2992

The following two return the exactly same numbers when I input -116.463726 45.614818:

proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=400000 +y_0=0.0 +units=ft


proj +init=epsg:2992


Now I have to figure out how to merge the change file coordinates into the original file!

Thanks for solving the problem!

Rick



________________________________
 From: Mikael Rittri <Mikael.Rittri at carmenta.com>
To: Rick Graves <gravesricharde at yahoo.com>; PROJ.4 and generalProjections Discussions <proj at lists.maptools.org> 
Sent: Thursday, August 16, 2012 9:52 PM
Subject: Re: [Proj] request help with Lambert Conic Conformal (2SP)
 

Rick,
I don't know about the shapefiles, but you could try this Proj.4 definition

  +init=epsg:2992

which I think will be equivalent to Carl's definition. 

(I'm not sure how you can verify that it works, but maybe you
can compare the Oregon data location with other data sources.)

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 14:44 skrev "Rick Graves" <gravesricharde at yahoo.com>:


Mikael and Carl,
>
>
>Maybe there is a problem with the Oregon shape files, or maybe I made an incorrect assumption about the contents.
>
>
>The Oregon redistricting web site is down for me at the moment:
>
>
>www.leg.state.or.us/redistricting/
>
>
>But the Oregon shape files are available here:
>
>
>http://www.srrproject.org/resources/redistricting-shapefiles/
>
>
>
>(Click on Oregon to get the link.  If you do not instantly know which one is Oregon, you can hover the mouse and a tip will display telling which state is under the pointer.  Oregon is on the West coast just North of California.)
>
>
>The zip for Oregon includes two sets of files, Congressional_Districts.* and Congressional_Area_Changes.*. 
>
>
>I assumed that I should go with the latter file.
>
>
>I ran diff against the two .prj files, and there is no difference.
>
>
>However, I just now discovered that the contents of the shapefiles are radically different.  Here are the bounding boxes:
>
>
>Congressional_Districts
>
>(183987.16863517463, 88653.9580052495, 2345137.542322829, 1677526.0958005222)
>
>
>
>Congressional_Area_Changes
>
>(427663.998031497, 172986.72867454588, 1005007.5570866163, 1488902.549212602)
>
>
>
>Sorry for being a beginner, but is there something I should know to do with these two files?  Or should I be asking Oregon what is the deal?
>
>
>Thanks,
>
>
>Rick
>
>
>
>
>
>________________________________
> From: Mikael Rittri <Mikael.Rittri at carmenta.com>
>To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org> 
>Sent: Thursday, August 16, 2012 6:42 PM
>Subject: Re: [Proj] request help with Lambert Conic Conformal (2SP)
> 
>
>Carl,
>In fact, I don't think you are missing anything. 
>
>
>I made a quick back-of-an-envelope calculation - not using
>proj, just a plain calculator - starting with the projection
>origin, assuming 111120 meters per degree of latitude,
>and 111120 * cos(lat) meters per degree of longitude.  
>
>
>For the test point, I got 
>
>
>Easting = 1408985 ft
>Northing = 2341613 ft. 
>
>
>That's close enough to your (Carl's) result, with my simple method. 
>
>
>I may have made a mistake, but Rick: could you double-check your expected coordinates - I am pretty sure they are wrong. 
>
>
>Regards,
>
>
>Mikael Rittri
>Carmenta
>Sweden
>http://www.carmenta.com
>
>16 aug 2012 kl. 05:30 skrev "Carl Godkin" <cgodkin at gmail.com>:
>
>
>
>>
>>
>>On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <gravesricharde at yahoo.com> wrote:
>>
>>Hey,
>>>
>>>
>>>The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.
>>>
>>>
>>>Here is the metadata from the .prj that I got from the state:
>>>
>>>
>>>PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
>>>GEOGCS["GCS_North_American_1983",
>>>DATUM["D_North_American_1983",
>>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>>PRIMEM["Greenwich",0.0],
>>>UNIT["Degree",0.0174532925199433]],
>>>PROJECTION["Lambert_Conformal_Conic"],
>>>PARAMETER["False_Easting",1312335.958005249],
>>>PARAMETER["False_Northing",0.0],
>>>PARAMETER["Central_Meridian",-120.5],
>>>PARAMETER["Standard_Parallel_1",43.0],
>>>PARAMETER["Standard_Parallel_2",45.5],
>>>PARAMETER["Latitude_Of_Origin",41.75],
>>>UNIT["Foot",0.3048]],
>>>VERTCS["NAD_1983",
>>>DATUM["D_North_American_1983",
>>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>>PARAMETER["Vertical_Shift",0.0],
>>>PARAMETER["Direction",1.0],
>>>
>>>
>>>I initialized proj as follows:
>>>
>>>
>>>proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft
>>>
>>>
>>>I assume something is not right.
>>>
>>>
>>>
>>>
>>
>>
>>I think there are two things wrong:  
>>1. Your false easting is here given in feet while I believe proj always wants meters.  The number is about 400000m.  (See http://trac.osgeo.org/proj/wiki/GenParms).
>>2. You didn't include an ellipsoid or datum so I'm surprised that proj worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.
>>
>>
>>However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft, which isn't what you want either.  
>>
>>
>>Now I want to know what I am missing!  Let's hope someone cleverer than me answers.
>>
>>
>>carl
>_______________________________________________
>>Proj mailing list
>>Proj at lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/proj
>_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
>
>
_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120816/1071cb5e/attachment.html>

From gravesricharde at yahoo.com  Thu Aug 16 19:40:11 2012
From: gravesricharde at yahoo.com (Rick Graves)
Date: Thu, 16 Aug 2012 19:40:11 -0700 (PDT)
Subject: [Proj] request help with Lambert Conic Conformal (2SP)
In-Reply-To: <C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
References: <1345086012.70361.YahooMailNeo@web162306.mail.bf1.yahoo.com>
	<CAE=8kmmLkyA4WjB-N3dfVO5o4Cd5kDCZRNBJXwk+arMgm3ADQw@mail.gmail.com>
	<C7DBCA2E-CB22-48F6-9436-0549B8F50C5F@carmenta.com>
Message-ID: <1345171211.49515.YahooMailNeo@web162304.mail.bf1.yahoo.com>

Mikael and Carl,

From the correct shape file, the point touching the bounding box on the Eastern side is 2345137.5423228294, 1430204.1095800549.  Comparing these with numbers from proj with the lat/long inputs, the easting is within 0.1%, and the northing is within 1%, which I believe is close enough (for points picked from on line maps).

Mikael wrote:

> you could try this Proj.4 definition: +init=epsg:2992

The following two return the exactly same numbers when I input -116.463726 45.614818:

proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=400000 +y_0=0.0 +units=ft

proj +init=epsg:2992

Now I have to figure out how to merge the change file coordinates into the original file!

Thanks for solving the Lambert Conic Conformal (2SP) problem!

Rick



________________________________
 From: Mikael Rittri <Mikael.Rittri at carmenta.com>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org> 
Sent: Thursday, August 16, 2012 6:42 PM
Subject: Re: [Proj] request help with Lambert Conic Conformal (2SP)
 

Carl,
In fact, I don't think you are missing anything. 

I made a quick back-of-an-envelope calculation - not using
proj, just a plain calculator - starting with the projection
origin, assuming 111120 meters per degree of latitude,
and 111120 * cos(lat) meters per degree of longitude.  

For the test point, I got 

Easting = 1408985 ft
Northing = 2341613 ft. 

That's close enough to your (Carl's) result, with my simple method. 

I may have made a mistake, but Rick: could you double-check your expected coordinates - I am pretty sure they are wrong. 

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

16 aug 2012 kl. 05:30 skrev "Carl Godkin" <cgodkin at gmail.com>:



>
>
>On Wed, Aug 15, 2012 at 8:00 PM, Rick Graves <gravesricharde at yahoo.com> wrote:
>
>Hey,
>>
>>
>>The good news is that Oregon is the last one I need to get working.  The bad news is I do not have it working yet.
>>
>>
>>Here is the metadata from the .prj that I got from the state:
>>
>>
>>PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",
>>GEOGCS["GCS_North_American_1983",
>>DATUM["D_North_American_1983",
>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>PRIMEM["Greenwich",0.0],
>>UNIT["Degree",0.0174532925199433]],
>>PROJECTION["Lambert_Conformal_Conic"],
>>PARAMETER["False_Easting",1312335.958005249],
>>PARAMETER["False_Northing",0.0],
>>PARAMETER["Central_Meridian",-120.5],
>>PARAMETER["Standard_Parallel_1",43.0],
>>PARAMETER["Standard_Parallel_2",45.5],
>>PARAMETER["Latitude_Of_Origin",41.75],
>>UNIT["Foot",0.3048]],
>>VERTCS["NAD_1983",
>>DATUM["D_North_American_1983",
>>SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>PARAMETER["Vertical_Shift",0.0],
>>PARAMETER["Direction",1.0],
>>
>>
>>I initialized proj as follows:
>>
>>
>>proj +proj=lcc +lon_0=-120.5 +lat_0=41.75 +lat_1=43.0 +lat_2=45.5 +x_0=1312335.958005249 +y_0=0.0 +units=ft
>>
>>
>>I assume something is not right.
>>
>>
>>
>>
>
>
>I think there are two things wrong:  
>1. Your false easting is here given in feet while I believe proj always wants meters.  The number is about 400000m.  (See http://trac.osgeo.org/proj/wiki/GenParms).
>2. You didn't include an ellipsoid or datum so I'm surprised that proj worked at all since I get an error without +datum=NAD83 or +ellps=GRS80.
>
>
>However, correcting both of those, I get  X=2344859.57 ft, Y=1434192.31 ft, which isn't what you want either.  
>
>
>Now I want to know what I am missing!  Let's hope someone cleverer than me answers.
>
>
>carl
_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120816/ff943e11/attachment.html>

From zoltans at geograph.co.za  Tue Aug 28 01:46:02 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue, 28 Aug 2012 10:46:02 +0200
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
 UTM36S - NTv2 file needed.
In-Reply-To: <0F348F23-3D73-4611-8C34-B731E69BCEF2@gmail.com>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
	<502A777D.3070806@geograph.co.za>
	<0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>
	<0F348F23-3D73-4611-8C34-B731E69BCEF2@gmail.com>
Message-ID: <503C854A.2030501@geograph.co.za>

Hi All,
This issue goes on, slower than a snail.
I have finally managed to get some source and target points from the 
original surveyor.

BM1

	

2872274.540m

	

49717.410m

	

7128571.659m

	

450273.237m

	

4275103.524m


I load my source image that is on Lo33 Clarke 1880 into QGIS and hover 
the mouse over BM1, a nicely painted white target.
I get:    -49717.33   -2872272.46  which is good on the eastings, but my 
source image is 2m north of this value from the surveyor. For the 
moment, so what.

I then run:
ogr2ogr -f "DGN" -dsco "3D=YES" -s_srs "+proj=tmerc +lon_0=33 
+a=6378249.145 +b=6356514.966398753 +nadgrids=./SA.gsb" -t_srs 
"+init=epsg:32736" Cl_Revised_v7_36s.dgn   Cl_Revised_v7.dgn
gdalwarp                        -s_srs "+proj=tmerc +lon_0=33 
+a=6378249.145 +b=6356514.966398753 +nadgrids=./SA.gsb" -t_srs 
"+init=epsg:32736" images.vrt              images_36s.tif

My UTM 36S WGS84 coordinate for BM1 is now:
450288.88   and   7128578.76    and this puts my transformed image 15m 
to the east and 7m to the north of the Surveyors value.

My question is:
Did I specify the s_srs and t_srs parameters correctly
Can I be certain that the SA.gsb grid was used?

I have no idea how the original surveyor got his source and target 
values for BM1, as I have no access to this person.
Regards,
Zoltan



>>
>> I have no idea how big, or what extents are in these NTv2 grid files, as
>> I have never used them before.
>>
>> To this end, my area of interest is in Maputo (Mozambique), and
>> Mozambique apparently uses Clarke 1866 (not 1880) - but the surveyor
>> "swears blind" that the coords are on "1880" and not "1866".
>>
>> This begs the question:
>> Do the extents of this Clarke 1880 NTv2 grid stop at the South African
>> border (some 50Km west of my area of interest), or do they cover Maputo
>> sufficiently?
>>
Yes, they go up to 33E which just covers Maputo, and when I load the 
grid plus my data into QGIS, my data is inside the grid extents.
>>
>>
>>
>> On 2012/07/26 21:42, Mikael Rittri wrote:
>> > Hello Zoltan.
>> > Yes, as you say, the traditional transverse mercator projections 
>> for Southern Africa have
>> > axes positive west and south. This can be handled in Proj 4.8.0 
>> (see http://trac.osgeo.org/proj/wiki/TMSO ).
>> > However, since both your example coordinates are negative, I think 
>> you have data in a less traditional
>> > but more GIS-friendly variant, where the axes go east and north and 
>> the traditional coordinate values
>> > have been negated.
>> >
>> > Another problem is caused by the Cape datum having distortions that 
>> are not handled well
>> > by a simple Helmert datum shift ( +towgs84 in Proj.4). Such a datum 
>> shift will have errors up to 15 meters,
>> > perhaps more. You can get much better accuracy from a grid shift 
>> file. So I think your source CRS
>> > is best constructed as
>> >
>> > +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 
>> +nadgrids=SA.gsb
>> >
>> > where SA.gsb is an NTv2 grid shift file from Cape to 
>> Hartebeesthoek94 (or to WGS84),
>> > covering South Africa. To find out where you can download it, see
>> >
>> > 
>> http://eepublishers.co.za/article/datum-transformations-using-the-ntv2-grid.html
>> >
>> > About your target CRS, I don't think there is an EPSG code for the 
>> combination of Hartebeesthoek94 and
>> > a UTM projection. But since H94 is the same as WGS84 except for 
>> tectonic motion, I think you
>> > can use WGS84 / UTM zone 36S, which can be defined as
>> >
>> >     +init=epsg:32736
>> >
>> > Hope this helps,
>> >
>> > Mikael Rittri
>> > Carmenta
>> > Sweden
>> > http://www.carmenta.com
>> >
>> > 26 jul 2012 kl. 17:14 skrev "Zoltan Szecsei" 
>> <zoltans at geograph.co.za <mailto:zoltans at geograph.co.za>>:
>> >
>> >> Hi Everyone,
>> >> I have some orthos and some 3D vector data that I need to 
>> reproject from
>> >> Clarke 1880 Cape Datum, Lo33 to WGS84 Hartebeeshoek94 datum UTM 36S.
>> >>
>> >>
>>
>

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34° 6'16.35"S 18°28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120828/17c9858a/attachment.html>

From Mikael.Rittri at carmenta.com  Tue Aug 28 07:19:37 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 28 Aug 2012 14:19:37 +0000
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
 UTM36S - NTv2 file needed.
In-Reply-To: <503C854A.2030501@geograph.co.za>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
	<502A777D.3070806@geograph.co.za>
	<0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>
	<0F348F23-3D73-4611-8C34-B731E69BCEF2@gmail.com>
	<503C854A.2030501@geograph.co.za>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493920CC97@SETHNWS023.carmenta.se>

Hello Zoltan,
You wrote:

> My question is:
> Did I specify the s_srs and t_srs parameters correctly

As far as I can see, yes (for what it's worth).

> Can I be certain that the SA.gsb grid was used?

I don't know if there is some tracing or debugging mode of ogr2ogr or gdalwarp that says
whether an NTv2 grid was used, since points outside the grid are silently non-datumshifted
(at least in Proj 4.8.0, I think).

However, for your point, I can verify that it was used:

With cs2cs, I get

> cs2cs +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +nadgrids=SA.gsb +to +init=epsg:32736

-49717.33 -2872272.46

450288.90 7128578.77 0.00

(when I have SA.gsb in the right directory), which is just a few centimeters from your results.
If I remove the +nadgrids parameter, or use the alaska.gsb instead, I get the result

450303.95 7128642.46 0.00

It is hard to know what's wrong, but maybe the SA.gsb grid shift file is not very accurate outside
South Africa, even though it extends outside the borders. The corrections outside South Africa
may have been computed from extrapolation rather than measurements.

(For example, I have noticed this for the conus grid shift file for NAD27: it has been extrapolated
to cover Cuba but is quite bad there.

So if I use +datum=NAD27, I get the default datum shift +nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat, and

> cs2cs +proj=longlat +datum=NAD27 +to +proj=longlat +datum=WGS84

-75 20

74d59'57.145"W 20d0'1.783"N 0.000

But if I use a datum shift that is more accurate on Cuba ("NAD27 to WGS 84 (88)", EPSG:15978), I get

> cs2cs +proj=longlat +ellps=clrk66 +towgs84=2.478,149.752,197.726,0.526,0.498,-0.501,0.685 +to +proj=longlat +datum=WGS84

-75 20

74d59'58.961"W 20d0'2.043"N -21.720

Horizontally, these differ by 53.4 meters.)

Anyway, back to Africa. If we don't trust the SA.gsb, we can try with the datum shift "Cape to WGS 84 (2)", EPSG:1129,
from the Directorate of Surveys and Land Information, Cape Town. "Residuals should not exceed 15 metres", says EPSG,
but I think they do.

> cs2cs +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +towgs84=-134.73,-110.92,-292.66 +to +init=epsg:32736

-49717.33 -2872272.46

450283.06 7128577.97 17.72

Or we can try with the datum shift "Cape to WGS 84 (1)", EPGS:1128, from U.S. Defense Mapping Agency TR8350.2,
September 1987, with accuracy 9 metres (confidence 67 percent, I think).

> cs2cs +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +towgs84=-136,-108,-292 +to +init=epsg:32736

-49717.33 -2872272.46

450286.20 7128578.80 17.88

Unfortunately, it seems that neither of these would make you very much happier.

As a last resort, if you have more examples of source and target points that are representative for your area of interest,
one could use the SEVENPAR program from Killetsoft to compute a local 3-parameter or 7-parameter transform.

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

________________________________
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Zoltan Szecsei
Sent: Tuesday, August 28, 2012 10:46 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84 UTM36S - NTv2 file needed.

Hi All,
This issue goes on, slower than a snail.
[ --   Text deleted. See http://lists.maptools.org/pipermail/proj/2012-August/006407.html   -- ]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120828/4728eea5/attachment.html>

From Mikael.Rittri at carmenta.com  Thu Aug 30 02:16:55 2012
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 30 Aug 2012 09:16:55 +0000
Subject: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84
 UTM36S - NTv2 file needed.
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493920CC97@SETHNWS023.carmenta.se>
References: <50115E83.2060506@geograph.co.za>
	<18E2A919-2218-4922-9C69-9FAB5A7F829D@carmenta.com>
	<502A777D.3070806@geograph.co.za>
	<0DA58EB5D84A2744B1229C32174A8D522B75DF72@BY2PRD0610MB352.namprd06.prod.outlook.com>
	<0F348F23-3D73-4611-8C34-B731E69BCEF2@gmail.com>
	<503C854A.2030501@geograph.co.za>
	<E4AB3DD44D22854B819908379DE4AD493920CC97@SETHNWS023.carmenta.se>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493920D28C@SETHNWS023.carmenta.se>

Hello again Zoltan.

I wrote:

> As a last resort, if you have more examples of source and target points that are representative for your area of interest,
> one could use the SEVENPAR program from Killetsoft to compute a local 3-parameter or 7-parameter transform.

Actually, it is possible to use Proj.4 to compute a local 3-parameter transformation from
your single test point, but I have no idea how accurate it would be for the rest of your data.
By assuming the same height above the ellipsoids for your test point, I get the 3-parameter
transform

    +towgs84=-144.47,-128.70,-288.68

which is tailor-made for your single test point, so:

 > cs2cs +proj=tmerc +lon_0=33 +a=6378249.145 +b=6356514.966398753 +towgs84=-144.47,-128.70,-288.68 +to +init=epsg:32736

 -49717.410    -2872274.540

 450273.23     7128571.66    0.00


Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

________________________________
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: Tuesday, August 28, 2012 4:20 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Gauss conformal Lo33 on Clarke 1880 Cape Datum to WGS84 UTM36S - NTv2 file needed.

Hello Zoltan,

[-- text deleted, see http://lists.maptools.org/pipermail/proj/2012-August/006408.html --]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20120830/d905c149/attachment.html>

