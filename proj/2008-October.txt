From Mikael.Rittri at carmenta.com  Wed Oct  1 04:22:08 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 1 Oct 2008 13:22:08 +0200
Subject: [Proj] Some typos in the libproj4 manual
Message-ID: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se>

I think I have found some typos in the libproj4 manual.

Page 96, under the headline "Oblique Stereographic using intermediate sphere":

* Equation (7.36) says "k)0", but the parenthesis does not match anything.  I think it should have been "k_0" in the LaTeX source, so that the text would be "k0", with the zero as a subscript. 
* Equation (7.37) reads

   chi = ( cos c ... )
 
but something is missing.  I looked in Snyder's book, and I think it should be

   chi = asin( cos c ...) 

(chi is that Greek letter that looks like a tall and narrow x, but isn't an x.) 


Page 78, table 6.1: Lambert Conformal Conic, in the general formula for rho, there is a numerator 

         tan^n( pi/4 + phi1/2)

but in the case phi1 = phi2, the analoguous numerator is written as 

         tan^n( pi/4 + phi1) / 2

Should not these numerators be identical?  They differ only in the placement of the ending parenthesis.  

Gerald Evenden wrote:
> Please, please, please.  Anyone finding errors in the previously reference
> manual please notify this group.  Thank-you.

You are welcome,
--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com



From support.mn at elisanet.fi  Wed Oct  1 07:08:12 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 1 Oct 2008 17:08:12 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <31529349.2298091222870092564.JavaMail.support.mn@elisanet.fi>

Hello,

There is no general rule how to map GeoTiff GeoKeys to proj.4
parameters (or is there?) Every projection has it's own mapping?

Can I write "lat_ts" instead of "lat_0" ??

Is there "lon_ts"?

Here I have those keys I have found some mapping,
but how about the others. Must be different for each
projection?

----------

ProjLinearUnitSizeGeoKey	3077 in meters                 

ProjStdParallelGeoKey		3078 in GeogAngularUnit -> lat_1
ProjStdParallel2GeoKey	3079 in GeogAngularUnit -> lat_2
ProjOriginLongGeoKey		3080 in GeogAngularUnit  -> lon_0
ProjOriginLatGeoKey		3081 in GeogAngularUnit  -> lat_0
ProjFalseOriginLongGeoKey	3084 in GeogAngularUnit 
ProjFalseOriginLatGeoKey	3085 in GeogAngularUnit 
ProjCenterLongGeoKey	3088 in GeogAngularUnit 
ProjCenterLatGeoKey		3089 in GeogAngularUnit 

ProjFalseEastingGeoKey	3082 in ProjLinearUnits -> x_0
ProjFalseNorthingGeoKey	3083 in ProjLinearUnits -> y_0
ProjFalseOriginEastingGeoKey	3086 in ProjLinearUnits 
ProjFalseOriginNorthingGeoKey	3087 in ProjLinearUnits 
ProjCenterEastingGeoKey	3090 in ProjLinearUnits 
ProjCenterNorthingGeoKey	3091 in ProjLinearUnits 

ProjScaleAtOriginGeoKey	3092 in ratio   -> k_0
ProjScaleAtCenterGeoKey	3093 in ratio   

ProjAzimuthAngleGeoKey	3094 in GeogAzimuthUnit -> alpha
ProjStraightVertPoleLongGeoKey	3095 in GeogAngularUnit 
ProjRectifiedGridAngleGeoKey	3096 in GeogAngularUnit 

-------------

Regards: Janne.



From support.mn at elisanet.fi  Wed Oct  1 07:20:41 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 1 Oct 2008 17:20:41 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <23663189.2300201222870841938.JavaMail.support.mn@elisanet.fi>

I resend the list:

ProjLinearUnitSizeGeoKey 3077 in meters

Angulars:

ProjStdParallelGeoKey 3078 in GeogAngularUnit -> lat_1
ProjStdParallel2GeoKey 3079 in GeogAngularUnit -> lat_2
ProjOriginLongGeoKey 3080 in GeogAngularUnit -> lon_0
ProjOriginLatGeoKey 3081 in GeogAngularUnit -> lat_0
ProjFalseOriginLongGeoKey 3084 in GeogAngularUnit -> ?
ProjFalseOriginLatGeoKey 3085 in GeogAngularUnit -> ?
ProjCenterLongGeoKey 3088 in GeogAngularUnit -> ?
ProjCenterLatGeoKey 3089 in GeogAngularUnit -> ?

Linears:

ProjFalseEastingGeoKey 3082 in ProjLinearUnits -> x_0
ProjFalseNorthingGeoKey 3083 in ProjLinearUnits -> y_0
ProjFalseOriginEastingGeoKey 3086 in ProjLinearUnits -> ?
ProjFalseOriginNorthingGeoKey 3087 in ProjLinearUnits -> ?
ProjCenterEastingGeoKey 3090 in ProjLinearUnits -> ?
ProjCenterNorthingGeoKey 3091 in ProjLinearUnits -> ?

Ratios:

ProjScaleAtOriginGeoKey 3092 in ratio -> k_0
ProjScaleAtCenterGeoKey 3093 in ratio -> ?

Others:

ProjAzimuthAngleGeoKey 3094 in GeogAzimuthUnit -> alpha
ProjStraightVertPoleLongGeoKey 3095 in GeogAngularUnit -> ?
ProjRectifiedGridAngleGeoKey 3096 in GeogAngularUnit -> ?

Janne.



From geraldi.evenden at gmail.com  Wed Oct  1 08:40:06 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 1 Oct 2008 11:40:06 -0400
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <31529349.2298091222870092564.JavaMail.support.mn@elisanet.fi>
References: <31529349.2298091222870092564.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810011140.06843.geraldi.evenden@gmail.com>

On Wednesday 01 October 2008 10:08:12 am support.mn at elisanet.fi wrote:
> Hello,
>
> There is no general rule how to map GeoTiff GeoKeys to proj.4
> parameters (or is there?) Every projection has it's own mapping?
>
> Can I write "lat_ts" instead of "lat_0" ??

lat_ts denotes latitude of true scale while lat_0 generally refers to latitude 
of origin.  One should *never* assume that they create the same value.

> Is there "lon_ts"?

I have never used it. "Longitude of true scale" is a meaningless term.

> Here I have those keys I have found some mapping,
> but how about the others. Must be different for each
> projection?
>
> ----------
>
> ProjLinearUnitSizeGeoKey	3077 in meters
>
> ProjStdParallelGeoKey		3078 in GeogAngularUnit -> lat_1
> ProjStdParallel2GeoKey	3079 in GeogAngularUnit -> lat_2
> ProjOriginLongGeoKey		3080 in GeogAngularUnit  -> lon_0
> ProjOriginLatGeoKey		3081 in GeogAngularUnit  -> lat_0
> ProjFalseOriginLongGeoKey	3084 in GeogAngularUnit
> ProjFalseOriginLatGeoKey	3085 in GeogAngularUnit
> ProjCenterLongGeoKey	3088 in GeogAngularUnit
> ProjCenterLatGeoKey		3089 in GeogAngularUnit
>
> ProjFalseEastingGeoKey	3082 in ProjLinearUnits -> x_0
> ProjFalseNorthingGeoKey	3083 in ProjLinearUnits -> y_0
> ProjFalseOriginEastingGeoKey	3086 in ProjLinearUnits
> ProjFalseOriginNorthingGeoKey	3087 in ProjLinearUnits
> ProjCenterEastingGeoKey	3090 in ProjLinearUnits
> ProjCenterNorthingGeoKey	3091 in ProjLinearUnits
>
> ProjScaleAtOriginGeoKey	3092 in ratio   -> k_0
> ProjScaleAtCenterGeoKey	3093 in ratio
>
> ProjAzimuthAngleGeoKey	3094 in GeogAzimuthUnit -> alpha
> ProjStraightVertPoleLongGeoKey	3095 in GeogAngularUnit
> ProjRectifiedGridAngleGeoKey	3096 in GeogAngularUnit

What a mish-mash of terminology.  That is why I believe that the equations for 
the projection should be mandated as part of any projection description 
because they resolve the usage and meaning of control contants.

And I suspect that the above often have different "flavors" of description in 
French, German, Italian, Russian, Chinese, etc..  Again, the mathematical 
description is the only lingua franca of the definition.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Wed Oct  1 09:54:10 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 1 Oct 2008 12:54:10 -0400
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <23663189.2300201222870841938.JavaMail.support.mn@elisanet.fi>
References: <23663189.2300201222870841938.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810011254.10543.geraldi.evenden@gmail.com>

On Wednesday 01 October 2008 10:20:41 am support.mn at elisanet.fi wrote:
> I resend the list:
>
> ProjLinearUnitSizeGeoKey 3077 in meters
>
> Angulars:
>
> ProjStdParallelGeoKey 3078 in GeogAngularUnit -> lat_1
> ProjStdParallel2GeoKey 3079 in GeogAngularUnit -> lat_2
> ProjOriginLongGeoKey 3080 in GeogAngularUnit -> lon_0
> ProjOriginLatGeoKey 3081 in GeogAngularUnit -> lat_0
> ProjFalseOriginLongGeoKey 3084 in GeogAngularUnit -> ?
> ProjFalseOriginLatGeoKey 3085 in GeogAngularUnit -> ?
> ProjCenterLongGeoKey 3088 in GeogAngularUnit -> ?
> ProjCenterLatGeoKey 3089 in GeogAngularUnit -> ?
>
> Linears:
>
> ProjFalseEastingGeoKey 3082 in ProjLinearUnits -> x_0
> ProjFalseNorthingGeoKey 3083 in ProjLinearUnits -> y_0
> ProjFalseOriginEastingGeoKey 3086 in ProjLinearUnits -> ?
> ProjFalseOriginNorthingGeoKey 3087 in ProjLinearUnits -> ?
> ProjCenterEastingGeoKey 3090 in ProjLinearUnits -> ?
> ProjCenterNorthingGeoKey 3091 in ProjLinearUnits -> ?
>
> Ratios:
>
> ProjScaleAtOriginGeoKey 3092 in ratio -> k_0
> ProjScaleAtCenterGeoKey 3093 in ratio -> ?
>
> Others:
>
> ProjAzimuthAngleGeoKey 3094 in GeogAzimuthUnit -> alpha
> ProjStraightVertPoleLongGeoKey 3095 in GeogAngularUnit -> ?
> ProjRectifiedGridAngleGeoKey 3096 in GeogAngularUnit -> ?

?? I'm sorry, this is ridiculous.  Not the email but the above nomenclature.

Yes, I agree: "?"

A question: is the "Proj" part of the above list referring to the proj we all 
know and love?

As an aside, the problems of linear units in proj, proj4, libproj4 is probably 
forgotten so I will make a reminder: units are established by the unit that 
is used to define the Earth's radius, R=, or semi-major axis, a=.  If R=1 
then the units are an Earth with a radius=1 so an easting of 100,000 would be 
a ridiculous value.  If a is in US surveyor's feet then easting and northing 
must be in US surveyor's feet.  If one uses the internal ellipsoid figure 
table, ellps=, then because all a= entries in the table are in meters the 
user must refer to the other linear unit items in meters.

BTW: using lproj without specifying a radius or semi-major axis will cause a 
default R=1.

The bottom line is that the user is responsible for both defining the linear 
units as well as ensuring parameter unit consistency.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Wed Oct  1 10:13:40 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 1 Oct 2008 13:13:40 -0400
Subject: [Proj] Some typos in the libproj4 manual
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se>
Message-ID: <200810011313.40991.geraldi.evenden@gmail.com>

On Wednesday 01 October 2008 7:22:08 am Mikael Rittri wrote:
> I think I have found some typos in the libproj4 manual.
>
> Page 96, under the headline "Oblique Stereographic using intermediate
> sphere":
>
> * Equation (7.36) says "k)0", but the parenthesis does not match anything. 
> I think it should have been "k_0" in the LaTeX source, so that the text
> would be "k0", with the zero as a subscript. * Equation (7.37) reads
>
>    chi = ( cos c ... )
>
> but something is missing.  I looked in Snyder's book, and I think it should
> be
>
>    chi = asin( cos c ...)
>
> (chi is that Greek letter that looks like a tall and narrow x, but isn't an
> x.)
>
>
> Page 78, table 6.1: Lambert Conformal Conic, in the general formula for
> rho, there is a numerator
>
>          tan^n( pi/4 + phi1/2)
>
> but in the case phi1 = phi2, the analoguous numerator is written as
>
>          tan^n( pi/4 + phi1) / 2
>
> Should not these numerators be identical?  They differ only in the
> placement of the ending parenthesis.
>
> Gerald Evenden wrote:
> > Please, please, please.  Anyone finding errors in the previously
> > reference manual please notify this group.  Thank-you.
>
> You are welcome,
> --
> Mikael Rittri
> Carmenta AB
> Box 11354
> SE-404 28 Göteborg
> Visitors: Sankt Eriksgatan 5
> SWEDEN
> Tel: +46-31-775 57 37
> Mob: +46-703-60 34 07
> mikael.rittri at carmenta.com
> www.carmenta.com
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Noted and changed.

Thanks.

I'm glad someone is doing this detailed reading.  Again, thanks.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From ovv at hetnet.nl  Wed Oct  1 12:55:15 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Wed, 1 Oct 2008 21:55:15 +0200
Subject: [Proj] Some typos in the libproj4 manual
In-Reply-To: <200810011313.40991.geraldi.evenden@gmail.com>
References: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se>
	<200810011313.40991.geraldi.evenden@gmail.com>
Message-ID: <BBFC52EA21A1495D8248E262C156B5F1@PCHP>


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
Sent: Wednesday, October 01, 2008 7:13 PM
Subject: Re: [Proj] Some typos in the libproj4 manual


> On Wednesday 01 October 2008 7:22:08 am Mikael Rittri wrote:
>> I think I have found some typos in the libproj4 manual.

....

>> Gerald Evenden wrote:
>> > Please, please, please.  Anyone finding errors in the previously
>> > reference manual please notify this group.  Thank-you.

...

> Noted and changed.
>
> Thanks.
>
> I'm glad someone is doing this detailed reading.  Again, thanks.


I found some time ago several more errors (typos), omissions,
inconsistencies between the formulae and the actual code, and other
problems in the manual.
They were rather numerous and there wasn't any progress visible beyond the
"Preliminary Draft" version of March 2005.
So I chose to wait until a "real" version of the libproj4 manual would
appear.....

If the math will be perfected, then the manual will become a valuable
reference for cartographic projections in general.

Another suggestion: give a numerical example with at least 5 decimals plus
the exact command line code for each and every function.

I would like to repeat the same suggestion for projs cs2cs. Give a complete
command line solution for every problem that can be solved with cs2cs. The
current man page is way too meagre.
Proof of the last statement: the number of questions to this list revolving
around the proper use of cs2cs.

Oscar van Vlijmen





From geraldi.evenden at gmail.com  Wed Oct  1 13:55:51 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 1 Oct 2008 16:55:51 -0400
Subject: [Proj] Some typos in the libproj4 manual
In-Reply-To: <BBFC52EA21A1495D8248E262C156B5F1@PCHP>
References: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se>
	<200810011313.40991.geraldi.evenden@gmail.com>
	<BBFC52EA21A1495D8248E262C156B5F1@PCHP>
Message-ID: <200810011655.52017.geraldi.evenden@gmail.com>

On Wednesday 01 October 2008 3:55:15 pm OvV_HN wrote:
> ----- Original Message -----
> From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
	...
> I found some time ago several more errors (typos), omissions,
> inconsistencies between the formulae and the actual code, and other
> problems in the manual.
> They were rather numerous and there wasn't any progress visible beyond the
> "Preliminary Draft" version of March 2005.
> So I chose to wait until a "real" version of the libproj4 manual would
> appear.....

I will put the current version on my site by this weekend.  Some corrections 
may have escaped due to my occasional  sloth.  My apologies in advance.

> If the math will be perfected, then the manual will become a valuable
> reference for cartographic projections in general.
>
> Another suggestion: give a numerical example with at least 5 decimals plus
> the exact command line code for each and every function.

What do you mean by "every function."  In term of precision of functions that 
depends upon what the function is returning.

What would be nice is for certified sample computations for all known grid 
systems.  Now that would be a *great* contribution.

In terms of forward projection precision, many sources only publish to the 
centimeter and I think someone on the list claimed that 100nm was sufficient 
for some applications.  Anyway ... .

On occasion, I think some get a little carried away with precision.  ;-)
	...
> Oscar van Vlijmen

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Wed Oct  1 22:29:15 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 2 Oct 2008 08:29:15 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <21638476.2367291222925355795.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 

> A question: is the "Proj" part of the above list referring to the proj we all 
> know and love?

These names are from the GeoTiff definition. Version 1.8.2 year 2000 is
probably the most recent. It defines the geoinformation tags for TIF files.
See

http://www.remotesensing.org/geotiff/spec/geotiffhome.html

> > Angulars:
> >
> > ProjStdParallelGeoKey 3078 in GeogAngularUnit -> lat_1
> > ProjStdParallel2GeoKey 3079 in GeogAngularUnit -> lat_2
> > ProjOriginLongGeoKey 3080 in GeogAngularUnit -> lon_0
> > ProjOriginLatGeoKey 3081 in GeogAngularUnit -> lat_0
> > ProjFalseOriginLongGeoKey 3084 in GeogAngularUnit -> ? 
> > ProjFalseOriginLatGeoKey 3085 in GeogAngularUnit -> ?
> > ProjCenterLongGeoKey 3088 in GeogAngularUnit -> ?
> > ProjCenterLatGeoKey 3089 in GeogAngularUnit -> ?

Do you have any idea what is the difference betwen "Origin"
"FalseOrigin" or "Center", or are they all the same?

> > Linears:
> >
> > ProjFalseEastingGeoKey 3082 in ProjLinearUnits -> x_0
> > ProjFalseNorthingGeoKey 3083 in ProjLinearUnits -> y_0
> > ProjFalseOriginEastingGeoKey 3086 in ProjLinearUnits -> ? (if used, maybe also x_0)
> > ProjFalseOriginNorthingGeoKey 3087 in ProjLinearUnits -> ? (if used, maybe also y_0)
> > ProjCenterEastingGeoKey 3090 in ProjLinearUnits -> ? (if used, maybe also x_0)
> > ProjCenterNorthingGeoKey 3091 in ProjLinearUnits -> ? (if used, maybe also y_0)
> >

Here are almost the same names: "False" "FalseOrigin" "Center". They must be
all the same??

> > Ratios:
> >
> > ProjScaleAtOriginGeoKey 3092 in ratio -> k_0
> > ProjScaleAtCenterGeoKey 3093 in ratio -> ? (maybe k_0)
> >
> > Others:
> >
> > ProjAzimuthAngleGeoKey 3094 in GeogAzimuthUnit -> alpha
> > ProjStraightVertPoleLongGeoKey 3095 in GeogAngularUnit -> ?
> > ProjRectifiedGridAngleGeoKey 3096 in GeogAngularUnit -> ?
> 
> Yes, I agree: "?"
> 

Why they couldn't just say "put all angulars in degrees and linears
in meters" and convert if needed, what ever you might have internally.
The life would be much easier...

> 
> As an aside, the problems of linear units in proj, proj4, libproj4 is probably 
> forgotten so I will make a reminder: units are established by the unit that 
> is used to define the Earth's radius, R=, or semi-major axis, a=.  If R=1 
> then the units are an Earth with a radius=1 so an easting of 100,000 would be 
> a ridiculous value.  If a is in US surveyor's feet then easting and northing 
> must be in US surveyor's feet.  If one uses the internal ellipsoid figure 
> table, ellps=, then because all a= entries in the table are in meters the 
> user must refer to the other linear unit items in meters.
> 
> BTW: using lproj without specifying a radius or semi-major axis will cause a 
> default R=1.
> 
> The bottom line is that the user is responsible for both defining the linear 
> units as well as ensuring parameter unit consistency.

Yes, the only problem is that they want to import files from other systems
without any "problems" and I am standing in a swamp here...

:)

Regards: Janne.



From warmerdam at pobox.com  Wed Oct  1 23:05:19 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 2 Oct 2008 08:05:19 +0200
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <31529349.2298091222870092564.JavaMail.support.mn@elisanet.fi>
References: <31529349.2298091222870092564.JavaMail.support.mn@elisanet.fi>
Message-ID: <931f8ea90810012305h24a56aebube08d059edebec6@mail.gmail.com>

On Wed, Oct 1, 2008 at 4:08 PM,  <support.mn at elisanet.fi> wrote:
> Hello,
>
> There is no general rule how to map GeoTiff GeoKeys to proj.4
> parameters (or is there?) Every projection has it's own mapping?

Janne,

The page at:

  http://geotiff.maptools.org/proj_list/

represents a "best effort" attempt to document the
correlation between geotiff definitions and proj.4
(as well as EPSG and OGC WKT).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ovv at hetnet.nl  Thu Oct  2 02:09:33 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 2 Oct 2008 11:09:33 +0200
Subject: [Proj] Some typos in the libproj4 manual
In-Reply-To: <200810011655.52017.geraldi.evenden@gmail.com>
References: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se><200810011313.40991.geraldi.evenden@gmail.com><BBFC52EA21A1495D8248E262C156B5F1@PCHP>
	<200810011655.52017.geraldi.evenden@gmail.com>
Message-ID: <B6B4FE7D7F534500BB8AF9CB1D2D2670@PCHP>

----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
Sent: Wednesday, October 01, 2008 10:55 PM
Subject: Re: [Proj] Some typos in the libproj4 manual

....
>> problems in the manual.
....
> I will put the current version on my site by this weekend.  Some
> corrections
> may have escaped due to my occasional  sloth.  My apologies in advance.

Thanks!


>> Another suggestion: give a numerical example with at least 5 decimals
>> plus
>> the exact command line code for each and every function.
> What do you mean by "every function."  In term of precision of functions
> that depends upon what the function is returning.
....
> On occasion, I think some get a little carried away with precision.  ;-)

Working at the nanometer level has absolutely no significance for geodesy.
That part we do agree upon.
But look for instance at the test files in the GNU GSL distribution.
One has to be able to check the correct functioning of all available
functions in all relevant or in all supported regions.

It would be nice to give some real world examples, using parameters of
actually used projections, but exactly at that moment some people will drift
off from the intents of a test example.
How? By stating that 2 decimals are more than enough, because we don't do
nothing below the centimeter level.

What is needed are abstract examples or real world examples, just examples,
with a lot of decimals, so that the user can check whether his compile, his
microprocessor, his porting, his whatever, are done perfectly.

Please allow me to repeat:
One has to be able to check the correct functioning of all available
functions in all relevant or in all supported regions.


Oscar van Vlijmen




From support.mn at elisanet.fi  Thu Oct  2 06:14:13 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 2 Oct 2008 16:14:13 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>

Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> The page at:
> 
>   http://geotiff.maptools.org/proj_list/
> 
> represents a "best effort" attempt to document the
> correlation between geotiff definitions and proj.4
> (as well as EPSG and OGC WKT).

Yes, I have been reading that. There seem to be several
problematic projecions. "Omerc" number 3, 4 and 5 in
GeoTiff does not import to Proj4 at all, or does it?

Geotiff number 6, "merc" is not used at all? Or should not
be used?

Geotiff number 15, "stere" uses "lat_0=CenterLat", not
mentioned? Or is it only intergraph?

Geotiff number 27, "tmerc" soth oriented can not be used
directly, unless you turn all signs somewhere using extra
 "ifs"? Isn't that forbidden, to have a south orientated map?
How the people know where the north is if that is upside
down?

And Intergraph is using mostly different fields instead of
those given in your link?

---------

Linear names are easy: whatever given ->x_0 and y_0

Ratio names also easy: whatever given -> k_0

Angular names are most difficult and all are not using same
names? There is no general rule? Ok. I make a mapping
table for the names then.

----------

BTW: There is couble of typos. Lcc(1) and Lcc(2) are entered
both as number 9. I am assuming that Lcc(2) is number 8 and
Lcc(1) is number 9?

Regards: Janne.



From cjmce at lsu.edu  Thu Oct  2 07:17:25 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Thu, 2 Oct 2008 09:17:25 -0500
Subject: [Proj] Some typos in the libproj4 manual
References: <FAF6E56B26D2044696772EBE89B1535101272FB0@posty.carmenta.se><200810011313.40991.geraldi.evenden@gmail.com><BBFC52EA21A1495D8248E262C156B5F1@PCHP><200810011655.52017.geraldi.evenden@gmail.com>
	<B6B4FE7D7F534500BB8AF9CB1D2D2670@PCHP>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC245B@email002.lsu.edu>

The statement, "By stating that 2 decimals are more than enough, because we don't do
nothing below the centimeter level" is incorrect.
 
In the United States, for the legally-defined State Plane Coordinate Systems, the controlling document for algorithms and computational precision is NOAA Manual NOS NGS 5 by James E. Stem.  That is the official document.  It can be downloaded in a pdf file from http://www.ngs.noaa.gov/PUBS_LIB/ManualNOSNGS5.pdf  
 
In that document, the requirement is for computational accuracy to the tenth of a millimeter (0.0001 meters).
 
That is not getting carried away, it is complying with a National Specification.
 
Cliff Mugnier
LOUISIANA STATE UNIVERSITY


________________________________

From: proj-bounces at lists.maptools.org on behalf of OvV_HN
Sent: Thu 02-Oct-08 04:09
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Some typos in the libproj4 manual



----- Original Message -----
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
Sent: Wednesday, October 01, 2008 10:55 PM
Subject: Re: [Proj] Some typos in the libproj4 manual

....
>> problems in the manual.
....
> I will put the current version on my site by this weekend.  Some
> corrections
> may have escaped due to my occasional  sloth.  My apologies in advance.

Thanks!


>> Another suggestion: give a numerical example with at least 5 decimals
>> plus
>> the exact command line code for each and every function.
> What do you mean by "every function."  In term of precision of functions
> that depends upon what the function is returning.
....
> On occasion, I think some get a little carried away with precision.  ;-)

Working at the nanometer level has absolutely no significance for geodesy.
That part we do agree upon.
But look for instance at the test files in the GNU GSL distribution.
One has to be able to check the correct functioning of all available
functions in all relevant or in all supported regions.

It would be nice to give some real world examples, using parameters of
actually used projections, but exactly at that moment some people will drift
off from the intents of a test example.
How? By stating that 2 decimals are more than enough, because we don't do
nothing below the centimeter level.

What is needed are abstract examples or real world examples, just examples,
with a lot of decimals, so that the user can check whether his compile, his
microprocessor, his porting, his whatever, are done perfectly.

Please allow me to repeat:
One has to be able to check the correct functioning of all available
functions in all relevant or in all supported regions.


Oscar van Vlijmen



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081002/a054d65a/attachment.html>

From geraldi.evenden at gmail.com  Thu Oct  2 08:32:21 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 2 Oct 2008 11:32:21 -0400
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810021132.21639.geraldi.evenden@gmail.com>

On Thursday 02 October 2008 9:14:13 am support.mn at elisanet.fi wrote:
> Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> > The page at:
> >
> >   http://geotiff.maptools.org/proj_list/
> >
> > represents a "best effort" attempt to document the
> > correlation between geotiff definitions and proj.4
> > (as well as EPSG and OGC WKT).

I have already added some comments (probably unwelcome) about the contents of 
the above web site although I do issue kudos for the thought and effort 
behind it.

First, I detest the term "natural origin."  It seems to be synonymous with the 
basic mathematical origin.  "Natural" is an unnecessary adjective and just 
the term origin should suffice.

The projection origin can be "shifted" in either geographic or Cartesian space 
by respective use of lon_0 and sometimes lat_0 and false easting and northing 
(x_0 and y_0).  Use of lon_0 is ubiquitous among all types of projection 
usage and false easting/northing are universal among grid system 
specifications.

lat_0 is sometimes ambiguous because it may actually specify the principle 
origin as in the case of many oblique projections.  But this may also be 
viewed as a simple shift like lon_0.

But use of lat_0 in normal cylindrical projections is exactly equivalent to 
using false northing.  In most grid system cases that I am aware of, false 
northing is used rather than lat_0.

Lastly, I cannot understand why it was necessary to include all the formulas 
for determining shift of the Cartesian coordinates when it is such a simple 
operation using [l]proj.  For example:

Mercator projection with origin for a map centered at CM 90w and with false 
origin located at 92W,33N.  First:

gie at charon:~$ lproj +proj=merc +ellps=WGS84 +lon_0=-90 -f '%.4f'
-92 33
-222638.9816    3872033.7329
^D

>From the above numbers:

gie at charon:~$ lproj +proj=merc +ellps=WGS84 +lon_0=-90 \
     +x_0=222638.9816 +y_0=-3872033.7329
-92 33
0.00    -0.00
-90 35
222638.98       267339.03
^D

The only thing "tricky" was to expand the output precision of the first pass 
to ensure that short precision would not show up in the cm precision of the 
final operations.  They still did with the -0.00 but ... .

Is that not simpler than the material in the mercator_2sp.html page?

When designing a grid system one only needs the easting and northing to be 
positive so the above numbers would probably be altered to:



> Yes, I have been reading that. There seem to be several
> problematic projecions. "Omerc" number 3, 4 and 5 in
> GeoTiff does not import to Proj4 at all, or does it?
>
> Geotiff number 6, "merc" is not used at all? Or should not
> be used?
>
> Geotiff number 15, "stere" uses "lat_0=CenterLat", not
> mentioned? Or is it only intergraph?
>
> Geotiff number 27, "tmerc" soth oriented can not be used
> directly, unless you turn all signs somewhere using extra
>  "ifs"? Isn't that forbidden, to have a south orientated map?
> How the people know where the north is if that is upside
> down?
>
> And Intergraph is using mostly different fields instead of
> those given in your link?
>
> ---------
>
> Linear names are easy: whatever given ->x_0 and y_0
>
> Ratio names also easy: whatever given -> k_0
>
> Angular names are most difficult and all are not using same
> names? There is no general rule? Ok. I make a mapping
> table for the names then.
>
> ----------
>
> BTW: There is couble of typos. Lcc(1) and Lcc(2) are entered
> both as number 9. I am assuming that Lcc(2) is number 8 and
> Lcc(1) is number 9?
>
> Regards: Janne.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From geraldi.evenden at gmail.com  Thu Oct  2 11:15:50 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 2 Oct 2008 14:15:50 -0400
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810021415.50564.geraldi.evenden@gmail.com>

On Thursday 02 October 2008 9:14:13 am support.mn at elisanet.fi wrote:
> Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> > The page at:
> >
> >   http://geotiff.maptools.org/proj_list/

'''

Sorry about the truncated earlier reply to this email as I was interupted by 
the phone and accidentally hit "send."

Sorry but the terminology of Mercator(1sp)---(2sp) freaks me out.  And the 
need for two entries.

> Geotiff number 15, "stere" uses "lat_0=CenterLat", not
> mentioned? Or is it only intergraph?

That usage of lat_0 was mentioned before.

> Geotiff number 27, "tmerc" soth oriented can not be used
> directly, unless you turn all signs somewhere using extra
>  "ifs"? Isn't that forbidden, to have a south orientated map?
> How the people know where the north is if that is upside
> down?

I spent two weeks in Australia almost 40 years ago and don't remember everyone 
standing on their heads.  Unfortunately, I do not remember seeing a map at 
the time so do not know if they plot them upside down.  ;-)  But I had a good 
time and even managed to survive driving on the wrong side.

At the moment, the only place a south option is used is for UTM where a false 
northing of 10,000,000 meters is added when the +south option is spec'd. The 
issue of a 180 rotated Cartesian system for southern hemisphere usage has 
only come up recently and I am not sure how widespread this usage is nor, 
since a minus scale handles the problem, whether an added option is truly 
needed.  Also is this upside down coordinates system part of a grid system?  
Are the maps printed with south up?

> And Intergraph is using mostly different fields instead of
> those given in your link?
>
> ---------
>
> Linear names are easy: whatever given ->x_0 and y_0
>
> Ratio names also easy: whatever given -> k_0

Is the term "ratio" proper.  I simply look at it as a unitless multiplier.

> Angular names are most difficult and all are not using same
> names? There is no general rule? Ok. I make a mapping
> table for the names then.
>
> ----------
>
> BTW: There is couble of typos. Lcc(1) and Lcc(2) are entered
> both as number 9. I am assuming that Lcc(2) is number 8 and
> Lcc(1) is number 9?
...

I would like to add: where did this Laborde Oblique Mercator come from?  Are 
there any spec for it?  From Mugnier, it is basically the same operations in 
the general case as previously discussed in the special case of 
Gauss-Schreiber (Laborde) projection.  From the above web site entry for
Laborde Oblique Mercator:

EPSG Notes
 Can be accomodated by Oblique Mercator method (code 9815).

9815 make the statement: 
Notes
 The formula is exactly the same as for Hotine Oblique Mercator. I consider 
this to be an alias for that projection. See it for details on formula.

WRONG.

The problem is that this erroneous position is pandemic with Transverse 
Mercator.

This issue of Swiss "oblique mercator" is the most universally screwed up 
problem.  The only site I have seen that seems to have a handle on it is the 
Swiss and as they portray it is simply a Mercator rotated such that the axis 
of the pole of the projection is in the merdianal plane of the projection and 
that the equator of the projection passes through the central parallel.  And 
it uses the Gauss conformal transformation to a sphere as an intermediate 
step.  *THUS* it is *NOT* a Hotine projection.  Somewhere, someone came along 
and also established a Hotine projection for Swiss imaging applications.  
WHY?  Probably because they did not have a clue as to the original Swiss 
projection and then just assumed that because "oblique" was in its name it 
must be Hotine.

WE ARE IN DESPERATE NEED OF A COMPREHENSIVE, ACCURATE AND RELIABLE REFERENCE 
OF CARTOGRAPHIC PROJECTIONS.

Yes, I am yelling.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Thu Oct  2 14:40:43 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 2 Oct 2008 17:40:43 -0400
Subject: [Proj] Latest copy of manual up
Message-ID: <200810021740.43123.geraldi.evenden@gmail.com>

Check out:

http://members.verizon.net/~gerald.evenden/proj4/manual.pdf

See!  I did upload if by this weekend.  :-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Fri Oct  3 01:34:36 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 3 Oct 2008 10:34:36 +0200
Subject: [Proj] Terminology for origins
In-Reply-To: <200810021132.21639.geraldi.evenden@gmail.com>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
	<200810021132.21639.geraldi.evenden@gmail.com>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se>

Is there a simple and accepted standard terminology for the various kinds of projection origins?  

Gerald wrote:
> First, I detest the term "natural origin."  

Me too. 

> It seems to be synonymous with the basic mathematical origin. "Natural" is an unnecessary adjective 

I agree that it is the wrong adjective. 

> and just the term origin should suffice.

Should suffice, but doesn't, since the point with Easting and Northing both zero is also a kind of origin. 
I think there used to be a simple and wide-spread terminology before EPSG became so influential, like this:

  * False Origin: the point whose projected coordinates are both zero.  
  * True Origin: the point whose projected coordinates are False Easting and False Northing.

The words "True" and "False" are perhaps somewhat strange, but this terminology is used, for example, by:
  - http://www.mered.org.uk/mike/gps/gps_usergrid_more.htm
  - http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidecontents/guide7.html
  - http://www.colorado.edu/geography/gcraft/notes/coordsys/coordsys.html
  - http://home.clear.net.nz/pages/paulcatc/nzgrid1.htm
  - http://www.dartmouth.edu/~remsense/1-10%20Projections.htm

On the other hand, we have a single but influential source, 

  - http://www.epsg.org/guides/docs/G7-2.pdf (EPSG (or OGP) Guidance Note 7.2)

which makes subtle (I say hair-splitting) distinctions. It defines (section 1.2)

  * Grid Origin: the point whose projected coordinates are both zero.

which I can accept, but also that 

  * The point whose projected coordinates are False Easting and False Northing should be called 
    o "Natural Origin" if it is natural enough in an undefined way, or 
    o "False Origin" if it is less natural, or 
    o "Projection Centre", if it is not very natural, but not very false either,
    o "Grid Origin", but in a different meaning from the usual EPSG Grid Origin, 
         if the other alternatives are not sufficiently confusing ;-) 

In practice, it seems that this point is called 

    o "Natural Origin" in most projections, but 
    o "False Origin" in a Lambert Conformal Conic (2SP) and in a Polar Stereographic Variant C,
    o "Projection Centre" in an Oblique Mercator (plain or non-Hotine variant),
    o "Grid Origin" in a Krovak Oblique Conformal Conic. 

The first three lines above follows mostly from Table 3 on page 14. 
Krovak is forgotten in Table 3, but in section 1.3.2 on Krovak names the parameters
    FE = Easting at grid origin,
    FN = Northing at grid origin,
even though according to section 1.2, the Easting and Northing at a Grid Origin 
have to be zero and are not free to vary.  (In earlier versions of Guidance Note 7.2,
these parameters for Krovak were called Easting/Northing at Projection Centre, but this was 
wrong.  In the usual instance of projection, the Projection Centre is east of Slovakia, 
but the point with coordinates FE and FN is the oblique cone apex near Helsinki.)

Personally, I prefer the old, simple terminology, but since EPSG has hijacked the 
old term "False Origin" to mean "True Origin" now and then, the old terminology 
can be misunderstood.  

Grid Origin is OK by me, since it cannot be misunderstood (except for Krovak!).  
For the point with coordinates (FE, FN), I don't know a really good name.  
However, the site http://www.sco.wisc.edu/pubs/wiscoord/summary.php uses 
the term 

    "Actual Origin" 

for this point, which does not conflict with any EPSG term.  

Does anyone agree that Grid Origin and Actual Origin are good names?  

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com



From roger at opq.se  Fri Oct  3 01:16:26 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Fri, 03 Oct 2008 10:16:26 +0200
Subject: [Proj] Latest copy of manual up
In-Reply-To: <200810021740.43123.geraldi.evenden@gmail.com>
References: <200810021740.43123.geraldi.evenden@gmail.com>
Message-ID: <1223021787.23311.149.camel@acme.pacific>

On Thu, 2008-10-02 at 17:40 -0400, Gerald I. Evenden wrote:
> Check out:
> 
> http://members.verizon.net/~gerald.evenden/proj4/manual.pdf
> 
> See!  I did upload if by this weekend.  :-)
> 

I am not sure of the statements on page 46 about ktmerc being used in
Sweden. The current official method used in Sweden in SWEREF99, which is
described here:
http://www.lantmateriet.se/templates/LMV_Page.aspx?id=4219

I use:

	"+proj=tmerc +ellps=GRS80 "
	 "+k=0.9996 +x_0=500000 +y_0=0 +lon_0=15.0 +lat_0=0.0 "
	"+towgs84=0,0,0,0,0,0,0 "
	"+no_defs"

I have tested this with the control points provided in the link above.
The 'Ref.' line is what the northing easting should be. The Calc line is
what I get with the library. Looks really good.

SWEREF99 TM Test:

        WGS84:  Latitude: 55°00’N       Longitude: 12°45’E
Altitude: 0.00000000
        Ref.    Easting: 356083.438     Northing: 6097106.672
        Calc.   Easting: 356083.438     Northing: 6097106.672   0.000
meters from ref.

        WGS84:  Latitude: 55°00’N       Longitude: 14°15’E
Altitude: 0.00000000
        Ref.    Easting: 452024.069     Northing: 6095048.642
        Calc.   Easting: 452024.069     Northing: 6095048.642   0.000
meters from ref.

        WGS84:  Latitude: 57°00’N       Longitude: 12°45’E
Altitude: 0.00000000
        Ref.    Easting: 363331.554     Northing: 6319636.937
        Calc.   Easting: 363331.554     Northing: 6319636.937   0.000
meters from ref.

        WGS84:  Latitude: 57°00’N       Longitude: 19°30’E
Altitude: 0.00000000
        Ref.    Easting: 773251.054     Northing: 6326392.707
        Calc.   Easting: 773251.054     Northing: 6326392.707   0.000
meters from ref.

        WGS84:  Latitude: 59°00’N       Longitude: 11°15’E
Altitude: 0.00000000
        Ref.    Easting: 284626.066     Northing: 6546096.724
        Calc.   Easting: 284626.066     Northing: 6546096.724   0.000
meters from ref.

        WGS84:  Latitude: 59°00’N       Longitude: 19°30’E
Altitude: 0.00000000
        Ref.    Easting: 758410.519     Northing: 6548757.206
        Calc.   Easting: 758410.519     Northing: 6548757.206   0.000
meters from ref.

        WGS84:  Latitude: 61°00’N       Longitude: 12°45’E
Altitude: 0.00000000
        Ref.    Easting: 378323.440     Northing: 6764877.311
        Calc.   Easting: 378323.440     Northing: 6764877.311   0.001
meters from ref.

        WGS84:  Latitude: 61°00’N       Longitude: 18°45’E
Altitude: 0.00000000
        Ref.    Easting: 702745.127     Northing: 6768593.345
        Calc.   Easting: 702745.127     Northing: 6768593.345   0.000
meters from ref.

        WGS84:  Latitude: 63°00’N       Longitude: 12°00’E
Altitude: 0.00000000
        Ref.    Easting: 348083.148     Northing: 6989134.048
        Calc.   Easting: 348083.148     Northing: 6989134.048   0.001
meters from ref.

        WGS84:  Latitude: 63°00’N       Longitude: 19°30’E
Altitude: 0.00000000
        Ref.    Easting: 727798.671     Northing: 6993565.630
        Calc.   Easting: 727798.671     Northing: 6993565.630   0.000
meters from ref.

        WGS84:  Latitude: 65°00’N       Longitude: 13°30’E
Altitude: 0.00000000
        Ref.    Easting: 429270.201     Northing: 7209293.753
        Calc.   Easting: 429270.201     Northing: 7209293.753   0.000
meters from ref.

        WGS84:  Latitude: 65°00’N       Longitude: 21°45’E
Altitude: 0.00000000
        Ref.    Easting: 817833.405     Northing: 7225449.115
        Calc.   Easting: 817833.405     Northing: 7225449.115   0.000
meters from ref.

        WGS84:  Latitude: 67°00’N       Longitude: 16°30’E
Altitude: 0.00000000
        Ref.    Easting: 565398.458     Northing: 7432168.174
        Calc.   Easting: 565398.458     Northing: 7432168.174   0.000
meters from ref.

        WGS84:  Latitude: 67°00’N       Longitude: 24°00’E
Altitude: 0.00000000
        Ref.    Easting: 891298.142     Northing: 7459745.672
        Calc.   Easting: 891298.142     Northing: 7459745.673   0.001
meters from ref.

        WGS84:  Latitude: 69°00’N       Longitude: 21°00’E
Altitude: 0.00000000
        Ref.    Easting: 739639.195     Northing: 7666089.698
        Calc.   Easting: 739639.195     Northing: 7666089.698   0.000
meters from ref.

According to http://www.lantmateriet.se/templates/LMV_Page.aspx?id=4766,
the older RT90 also used Transverse Mercator.

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction. 
It is like talking about large city with all constructions finished. 
Not impossible, but very unlikely.




From warmerdam at pobox.com  Fri Oct  3 05:49:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 3 Oct 2008 14:49:54 +0200
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <200810021132.21639.geraldi.evenden@gmail.com>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
	<200810021132.21639.geraldi.evenden@gmail.com>
Message-ID: <931f8ea90810030549g4837d624naa3ef4b1d100e601@mail.gmail.com>

On Thu, Oct 2, 2008 at 5:32 PM, Gerald I. Evenden
<geraldi.evenden at gmail.com> wrote:
> On Thursday 02 October 2008 9:14:13 am support.mn at elisanet.fi wrote:
>> Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
>> > The page at:
>> >
>> >   http://geotiff.maptools.org/proj_list/
>> >
>> > represents a "best effort" attempt to document the
>> > correlation between geotiff definitions and proj.4
>> > (as well as EPSG and OGC WKT).
>
> I have already added some comments (probably unwelcome) about the contents of
> the above web site although I do issue kudos for the thought and effort
> behind it.

Gerald,

I would stress that the size terminology is based on EPSG
terms, and EPSG is the basis of GeoTIFF (for better or worse).

I shall mark your and Janne's email for future reiew, but
even if I am able to correct a few things I won't be attempting
to address the terminology question.


> WE ARE IN DESPERATE NEED OF A COMPREHENSIVE, ACCURATE
> AND RELIABLE REFERENCE OF CARTOGRAPHIC PROJECTIONS.

I would love for such a thing to exist in a form that can be easily related
to various software systems and file formats. I would love to see such
an effort attacked as a "MetaCRS" effort - that is collaboratively amoung
the various experts here, the CS-Map community and some of the other
OSGeo coordinate system efforts (ie. GeoTools).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cjmce at lsu.edu  Fri Oct  3 08:18:48 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 3 Oct 2008 10:18:48 -0500
Subject: [Proj] Terminology for origins
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><200810021132.21639.geraldi.evenden@gmail.com>
	<FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>

In North Africa, several of the Grids also have a False Northing at the False Origin in order to avoid negative northings.
 
Really!
 
:-)
 
Snyder's terminology explicitly referred to Grids only in the United States and used by the U.S. Geological Survey.  Others have adopted his terms and mistakenly applied them to other countries and regions.  For the most part, the old British General Staff, Geographic Section from WWII really defined practically all of the components of existing Grids.  When Snyder had questions about large-scale coordinate systems, he commonly referenced me.  For the proper terminology in English, I'd defer to the current British Military Survey as the final authoritative source.  The U.S. Military has really cobbled up an awful collection of erroneous terms.
 
Lord help you for the equivalent terms in other languages ... French is a particular zinger because their terms seem to have zero relation to the English terms.  Castilian Spanish would likely be a similar enigma.
 
For instance, the original uses for the following terms were:
 
Grid - Aphylactic projections ( Cassini-Soldner, Polyhedric, Polyconic)
Zone - Lambert Conformal Conic & Ellipsoidal Bonne
Belt - Transverse Mercator
 
Cartesian systems for the Oblique Mercator, the Krovak, the Rosenmund, the Hatt did not have explicit terms.
 
Since then, such things have eventually been considered to be synonomous.  Once upon a time, they were not.
 
Cliff Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Mikael Rittri
Sent: Fri 03-Oct-08 03:34
To: geraldi.evenden at gmail.com; PROJ.4 and general Projections Discussions
Subject: [Proj] Terminology for origins



Is there a simple and accepted standard terminology for the various kinds of projection origins? 

Gerald wrote:
> First, I detest the term "natural origin." 

Me too.

> It seems to be synonymous with the basic mathematical origin. "Natural" is an unnecessary adjective

I agree that it is the wrong adjective.

> and just the term origin should suffice.

Should suffice, but doesn't, since the point with Easting and Northing both zero is also a kind of origin.
I think there used to be a simple and wide-spread terminology before EPSG became so influential, like this:

  * False Origin: the point whose projected coordinates are both zero. 
  * True Origin: the point whose projected coordinates are False Easting and False Northing.

The words "True" and "False" are perhaps somewhat strange, but this terminology is used, for example, by:
  - http://www.mered.org.uk/mike/gps/gps_usergrid_more.htm
  - http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidecontents/guide7.html
  - http://www.colorado.edu/geography/gcraft/notes/coordsys/coordsys.html
  - http://home.clear.net.nz/pages/paulcatc/nzgrid1.htm
  - http://www.dartmouth.edu/~remsense/1-10%20Projections.htm

On the other hand, we have a single but influential source,

  - http://www.epsg.org/guides/docs/G7-2.pdf (EPSG (or OGP) Guidance Note 7.2)

which makes subtle (I say hair-splitting) distinctions. It defines (section 1.2)

  * Grid Origin: the point whose projected coordinates are both zero.

which I can accept, but also that

  * The point whose projected coordinates are False Easting and False Northing should be called
    o "Natural Origin" if it is natural enough in an undefined way, or
    o "False Origin" if it is less natural, or
    o "Projection Centre", if it is not very natural, but not very false either,
    o "Grid Origin", but in a different meaning from the usual EPSG Grid Origin,
         if the other alternatives are not sufficiently confusing ;-)

In practice, it seems that this point is called

    o "Natural Origin" in most projections, but
    o "False Origin" in a Lambert Conformal Conic (2SP) and in a Polar Stereographic Variant C,
    o "Projection Centre" in an Oblique Mercator (plain or non-Hotine variant),
    o "Grid Origin" in a Krovak Oblique Conformal Conic.

The first three lines above follows mostly from Table 3 on page 14.
Krovak is forgotten in Table 3, but in section 1.3.2 on Krovak names the parameters
    FE = Easting at grid origin,
    FN = Northing at grid origin,
even though according to section 1.2, the Easting and Northing at a Grid Origin
have to be zero and are not free to vary.  (In earlier versions of Guidance Note 7.2,
these parameters for Krovak were called Easting/Northing at Projection Centre, but this was
wrong.  In the usual instance of projection, the Projection Centre is east of Slovakia,
but the point with coordinates FE and FN is the oblique cone apex near Helsinki.)

Personally, I prefer the old, simple terminology, but since EPSG has hijacked the
old term "False Origin" to mean "True Origin" now and then, the old terminology
can be misunderstood. 

Grid Origin is OK by me, since it cannot be misunderstood (except for Krovak!). 
For the point with coordinates (FE, FN), I don't know a really good name. 
However, the site http://www.sco.wisc.edu/pubs/wiscoord/summary.php uses
the term

    "Actual Origin"

for this point, which does not conflict with any EPSG term. 

Does anyone agree that Grid Origin and Actual Origin are good names? 

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081003/5cf0136b/attachment.html>

From support.mn at elisanet.fi  Fri Oct  3 08:25:47 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 3 Oct 2008 18:25:47 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <600630.2624821223047548111.JavaMail.support.mn@elisanet.fi>

Hello,

I am still asking if it is totally not possible to use omerc to decode GeoTiff
projections 3,4 and 5. The problem seems to be wha to do with the
"rectified grid angle" ? Proj.4 does not support such angle?

"Alpha" must be the "azimuth angle"?

Frank Warmerdam <warmerdam at pobox.com> kirjoitti: 
> > WE ARE IN DESPERATE NEED OF A COMPREHENSIVE, ACCURATE
> > AND RELIABLE REFERENCE OF CARTOGRAPHIC PROJECTIONS.
> 
> I would love for such a thing to exist in a form that can be easily related
> to various software systems and file formats. I would love to see such
> an effort attacked as a "MetaCRS" effort - that is collaboratively amoung
> the various experts here, the CS-Map community and some of the other
> OSGeo coordinate system efforts (ie. GeoTools).

Someone just have to send a message to the ANSI and ask them to fix
the problem with the terminology.

http://en.wikipedia.org/wiki/American_National_Standards_Institute

More about Geotiff <-> Proj.4:

Ref 1:
http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_2sp.html

Ref 2:
http://www.remotesensing.org/geotiff/spec/geotiff3.html#3.1.3.

Ref 1 gives:

+proj=lcc
              +lat_1=Latitude of first standard parallel
              +lat_2=Latitude of second standard parallel
              +lat_0=Latitude of false origin 
              +lon_0=Longitude of false origin
              +x_0=False Origin Easting
              +y_0=False Origin Northing

Ref 2 gives:

+proj=lcc
              +lat_1=Latitude of first standard parallel
              +lat_2=Latitude of second standard parallel
              +lat_0=Latitude of natural origin (ProjNatOriginLatGeoKey)
              +lon_0=Longitude of projection center (ProjCenterLongGeoKey)
              +x_0=False Origin Easting
              +y_0=False Origin Northing

I am starting to belive that best way to deal with the problem is to first allocate
lat_1, lat2, lat_ts and then start to look after any lat or lon and put them
to lat_0 and lon_0. Since every creator of GeoTiff files puts them randomly
somwhere what is left.

Regards Janne.



From geraldi.evenden at gmail.com  Fri Oct  3 10:58:17 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 3 Oct 2008 13:58:17 -0400
Subject: [Proj] Terminology for origins, and everything
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
	<FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se>
	<B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
Message-ID: <200810031358.17457.geraldi.evenden@gmail.com>

The problems with the variety of nomenclatures is going to persist until some 
lingua franca of cartography is established.  If I recall correctly, if you 
are a pilot that flies internationally, all you need to know is English to 
communicate with any airport control tower.  Similarly we need something 
similar restriction for describing cartographic projections.

In the case of origins I feel the case is simply:

1. Designate the names of the two coordinate systems involved such as 
geographic and Cartesian.  A "projection" transforms information in one 
coordinate system to and from the alternate system.  For this case the 
coordinate systems axis are called latitude and longitude for the geographic 
system and easting and northing for the Cartesian system.

2. If "base" geographic coordinates, lat_0 or lon_0, are specified then they 
represent the location in geographic space of the Cartesian system origin.  
When either lat_0 or lon_0 are not specified then they are respectively 
assumed to have a 0 value unless otherwise specified.  Other projection 
conditions that may be caused by their usage require additional description.  

3. "False" eastings and northings are values that are added to the respective 
easting and northing coordinates and thus offset the coordinates from their 
origin.  Usage is normally restricted to grid systems in order to maintain 
positive Cartesian values over the region of application.  Omission denotes 0 
values.

This is a suggested starter.  Something for heated debate and resolution.

I, for one, wish to refine item 1. into parts that refine the use of the 
term "projection" so as to ensure that it does not expand to include other 
issues.  A strict use of the meaning of "cartographic projection."  This is 
obviously reminiscent of much earlier debates of including datum shifts into 
proj, etc..   ;-)

An interesting factor about item 2. is that one projection prohibits (or 
ignores in proj's case) the specification of lat_0:  UTM.

My terminology for geographic and Cartesian are certainly open.

Etc., etc..

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Fri Oct  3 11:26:37 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 3 Oct 2008 14:26:37 -0400
Subject: [Proj] GeoTiff <-> Proj.4
In-Reply-To: <600630.2624821223047548111.JavaMail.support.mn@elisanet.fi>
References: <600630.2624821223047548111.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810031426.37097.geraldi.evenden@gmail.com>

On Friday 03 October 2008 11:25:47 am support.mn at elisanet.fi wrote:
> Hello,
>
> I am still asking if it is totally not possible to use omerc to decode
> GeoTiff projections 3,4 and 5. The problem seems to be wha to do with the
	...
> http://en.wikipedia.org/wiki/American_National_Standards_Institute

I first thought was: "what a good idea," but skimming on to ISO reference the 
criticism section brought up the cost involved and that reminded me of a long 
ago experience.  I thought it would be a good idea to get a copy of the ANSI 
C standards but suddenly ran into the $$$  for a copy.

> More about Geotiff <-> Proj.4:
>
> Ref 1:
> http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_2sp.
>html
>
> Ref 2:
> http://www.remotesensing.org/geotiff/spec/geotiff3.html#3.1.3.
>
> Ref 1 gives:
>
> +proj=lcc
>               +lat_1=Latitude of first standard parallel
>               +lat_2=Latitude of second standard parallel

They should really be called the secant parallels.  There is 
nothing "standard" about them.

The alternate lcc is to specify the parallel of tangency and then k_0 which 
does the same thing.

>               +lat_0=Latitude of false origin
>               +lon_0=Longitude of false origin

Oh, please! "of false origin" good grief.

>               +x_0=False Origin Easting
>               +y_0=False Origin Northing
>
> Ref 2 gives:
>
> +proj=lcc
>               +lat_1=Latitude of first standard parallel
>               +lat_2=Latitude of second standard parallel
>               +lat_0=Latitude of natural origin (ProjNatOriginLatGeoKey)
>               +lon_0=Longitude of projection center (ProjCenterLongGeoKey)
>               +x_0=False Origin Easting
>               +y_0=False Origin Northing

Terrible, terrible.  Proj may have also been guilty of the "standard" part.

> I am starting to belive that best way to deal with the problem is to first
> allocate lat_1, lat2, lat_ts and then start to look after any lat or lon
> and put them to lat_0 and lon_0. Since every creator of GeoTiff files puts
> them randomly somwhere what is left.

lat_ts is not involved with conics.

Is there an editor or editing group associated with these sites?

> Regards Janne.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sat Oct  4 00:56:08 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 4 Oct 2008 10:56:08 +0300 (EEST)
Subject: [Proj] GeoTiff <-> Proj.4
Message-ID: <16555969.1469951223106968194.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> On Friday 03 October 2008 11:25:47 am support.mn at elisanet.fi wrote:
> > Hello,
> >
> > I am still asking if it is totally not possible to use omerc to decode
> > GeoTiff projections 3,4 and 5. The problem seems to be wha to do with the
> 	...
> > http://en.wikipedia.org/wiki/American_National_Standards_Institute
> 
> I first thought was: "what a good idea," but skimming on to ISO reference the 
> criticism section brought up the cost involved and that reminded me of a long 
> ago experience.  I thought it would be a good idea to get a copy of the ANSI 
> C standards but suddenly ran into the $$$  for a copy.
> 

If not ANSI, why not CEN?

http://www.cen.eu/cenorm/homepage.htm

"CEN, the European Committee for Standardization, was founded in 1961 by the
national standards bodies in the European Economic Community and EFTA countries."

> > More about Geotiff <-> Proj.4:
> >
> > Ref 1:
> > http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_2sp.
> >html
> >
> > Ref 2:
> > http://www.remotesensing.org/geotiff/spec/geotiff3.html#3.1.3.
> >
> > Ref 1 gives:
> >
> > +proj=lcc
> >               +lat_1=Latitude of first standard parallel
> >               +lat_2=Latitude of second standard parallel
> 
> They should really be called the secant parallels.  There is 
> nothing "standard" about them.
> 
> The alternate lcc is to specify the parallel of tangency and then k_0 which 
> does the same thing.
> 
> >               +lat_0=Latitude of false origin
> >               +lon_0=Longitude of false origin
> 
> Oh, please! "of false origin" good grief.
> 
> >               +x_0=False Origin Easting
> >               +y_0=False Origin Northing
> >
> > Ref 2 gives:
> >
> > +proj=lcc
> >               +lat_1=Latitude of first standard parallel
> >               +lat_2=Latitude of second standard parallel
> >               +lat_0=Latitude of natural origin (ProjNatOriginLatGeoKey)
> >               +lon_0=Longitude of projection center (ProjCenterLongGeoKey)
> >               +x_0=False Origin Easting
> >               +y_0=False Origin Northing
> 
> Terrible, terrible.  Proj may have also been guilty of the "standard" part.
> 
> > I am starting to belive that best way to deal with the problem is to first
> > allocate lat_1, lat2, lat_ts and then start to look after any lat or lon
> > and put them to lat_0 and lon_0. Since every creator of GeoTiff files puts
> > them randomly somwhere what is left.
> 
> lat_ts is not involved with conics.
> 

Yes, I was more thinking a general method to connect parameters regardless
of the specific projection.

> Is there an editor or editing group associated with these sites?

I don't know, LibGeoTiff or remotesensing?

Janne.



From support.mn at elisanet.fi  Sat Oct  4 04:30:41 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 4 Oct 2008 14:30:41 +0300 (EEST)
Subject: [Proj] General Inverse Transformation
Message-ID: <17640861.2687041223119842740.JavaMail.support.mn@elisanet.fi>

An interesting paper about a general inverse transformation:

http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf

Here is the conclusion:

""
4.  CONCLUSION

For the projections handled in this article forward projection functions are complex. To
derive the inverse projections fuctions, a specific method is required. The algorithm presented
here is  Newton-Rapson iteration with Jacobian matrices. It is applied to three world
projections. It can also be adapted for all cartographic projections in order to derive inverse
equations.
Since the manual calculation using this algortihm is not easy, a computer program is
needed. With such a program, data capture from analog maps produced using the projections
above can be possible. So captured data can also be easily integrated into any GIS system.
""

Janne.



From burstain at gmail.com  Sun Oct  5 22:25:01 2008
From: burstain at gmail.com (Eran Burstain)
Date: Mon, 6 Oct 2008 07:25:01 +0200
Subject: [Proj] Geocentric Coordinates
Message-ID: <817db2970810052225r257697f0v1aca70949a0d3c37@mail.gmail.com>

Hi !
How can I convert geocentric ECEF coordinates to UTM and vice versa ?
tnx.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/c778aec8/attachment.html>

From Mikael.Rittri at carmenta.com  Mon Oct  6 00:03:31 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 6 Oct 2008 09:03:31 +0200
Subject: [Proj] Terminology for origins
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><200810021132.21639.geraldi.evenden@gmail.com><FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se>
	<B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101273211@posty.carmenta.se>

Clifford J Mugnier wrote ( http://lists.maptools.org/pipermail/proj/2008-October/003865.html ):
 
> In North Africa, several of the Grids also have a False Northing at the False Origin in order to avoid negative northings.
> Really!
> :-) 
 
Sorry, I don't understand.  In what sense are you using the term "False Origin" here?  
 
If you are using it as EPSG does (at least for Lambert Conformal Conic 2SP 
and Polar Stereographic Variant C), then your statement is not surprising, since 
that's how such a False Origin works: it does have a False Northing and a 
False Easting. 
 
If you are using it in the other sense, as the point where False Easting and False Northing
are both zero, then your statement is contradictory (that's a little too surprising). 
 
So, you must be using the term "False Origin" in some third, more general way.  
Could you give a concrete numerical example? 
 
Best regards,
 
--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/7d758cc2/attachment.html>

From paul-grass at stjohnspoint.co.uk  Mon Oct  6 02:19:21 2008
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Mon, 6 Oct 2008 10:19:21 +0100 (BST)
Subject: [Proj] Geocentric Coordinates
In-Reply-To: <817db2970810052225r257697f0v1aca70949a0d3c37@mail.gmail.com>
References: <817db2970810052225r257697f0v1aca70949a0d3c37@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0810061015490.16574@vortex.ukshells.co.uk>

On Mon, 6 Oct 2008, Eran Burstain wrote:

> Hi !
> How can I convert geocentric ECEF coordinates to UTM and vice versa ?

Something like
cs2cs +proj=geocent +ellps=XXXX +to +proj=utm +zone=XX +ellps=XXXX
should do it. You might want some datum transformation parameters too 
(+towgs84=X,X,X) depending on your application.

Paul



From burstain at gmail.com  Mon Oct  6 04:10:31 2008
From: burstain at gmail.com (Eran Burstain)
Date: Mon, 6 Oct 2008 13:10:31 +0200
Subject: [Proj] Geocentric Coordinates
In-Reply-To: <Pine.LNX.4.62.0810061015490.16574@vortex.ukshells.co.uk>
References: <817db2970810052225r257697f0v1aca70949a0d3c37@mail.gmail.com>
	<Pine.LNX.4.62.0810061015490.16574@vortex.ukshells.co.uk>
Message-ID: <817db2970810060410s3663a1a6yc81e847bcb85f4a9@mail.gmail.com>

Tnx, but how do i do it from code ?
I understand that I should initialize two projections with the
"+proj=geocent +ellps=XXXX" and "+proj=utm +zone=XX +ellps=XXXX" strings,
but then what ?
(Transformation should have 3 points for each input and 3 for each output
with height above ellipsoid, isn't it ?)

On Mon, Oct 6, 2008 at 11:19 AM, Paul Kelly
<paul-grass at stjohnspoint.co.uk>wrote:

> On Mon, 6 Oct 2008, Eran Burstain wrote:
>
>  Hi !
>> How can I convert geocentric ECEF coordinates to UTM and vice versa ?
>>
>
> Something like
> cs2cs +proj=geocent +ellps=XXXX +to +proj=utm +zone=XX +ellps=XXXX
> should do it. You might want some datum transformation parameters too
> (+towgs84=X,X,X) depending on your application.
>
> Paul
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/e8d36047/attachment.html>

From cjmce at lsu.edu  Mon Oct  6 06:32:47 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 6 Oct 2008 08:32:47 -0500
Subject: [Proj] Terminology for origins
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><200810021132.21639.geraldi.evenden@gmail.com><FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se><B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
	<FAF6E56B26D2044696772EBE89B1535101273211@posty.carmenta.se>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu>

Sorry you find it contradictory, but it remains a fact.  When you get to zero and still need to go further south to use the same grid system, they add an additional number to that zero for a significant "jump."  I have not ever seen it used for False Easting; just for False Northing.  
 
The French Lambert Sud Algerie Grid has a False Northing of 300 km at the origin of 33º 18' North.  ("South of the False Origin add 1,000,000 meters to the northings").  The original grid tables are Tables de Projeciton Systeme Lambert Nort Maroc.  The EPSG has an interesting database for such things, however I consider my personal holdings as authoritative in most cases that differ.  This is one of those common cases.  
 
Regards,
 
Clifford J. Mugnier, C.P., C.M.S.
Past National Director (2006-2008),
Photogrammetric Applications Division
American Society for Photogrammetry and Remote Sensing 
and 
Chief of Geodesy,
CENTER FOR GEOINFORMATICS 
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4474 [Research] 
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Member Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group
======================================================
http://www.asprs.org/resources/GRIDS/
======================================================

________________________________

From: proj-bounces at lists.maptools.org on behalf of Mikael Rittri
Sent: Mon 06-Oct-08 02:03
To: PROJ.4 and general Projections Discussions
Subject: RE: [Proj] Terminology for origins


Clifford J Mugnier wrote ( http://lists.maptools.org/pipermail/proj/2008-October/003865.html ):
 
> In North Africa, several of the Grids also have a False Northing at the False Origin in order to avoid negative northings.
> Really!
> :-) 
 
Sorry, I don't understand.  In what sense are you using the term "False Origin" here?  
 
If you are using it as EPSG does (at least for Lambert Conformal Conic 2SP 
and Polar Stereographic Variant C), then your statement is not surprising, since 
that's how such a False Origin works: it does have a False Northing and a 
False Easting. 
 
If you are using it in the other sense, as the point where False Easting and False Northing
are both zero, then your statement is contradictory (that's a little too surprising). 
 
So, you must be using the term "False Origin" in some third, more general way.  
Could you give a concrete numerical example? 
 
Best regards,
 
--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/d725c9b0/attachment.html>

From Mikael.Rittri at carmenta.com  Mon Oct  6 07:05:06 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 6 Oct 2008 16:05:06 +0200
Subject: [Proj] Terminology for origins
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><200810021132.21639.geraldi.evenden@gmail.com><FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se><B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu>
	<FAF6E56B26D2044696772EBE89B1535101273211@posty.carmenta.se>
	<B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>

Thanks for explaining.  I did not understand that the extra False Northing should be added only south of the False Origin. 
Let me see if I got it right.
 
So, in the Lambert Sud Algerie Grid, there is one False Northing that is 300 km, and an extra False Northing that is 1000 km?  
As one goes south from the northmost part of the map grid, the Northing value would decrease until it reaches 300 km at the Origin, 
but there the Northing would wrap around and become 1300 km? And then it would decrease again, if one would go further south. 
 
Tricky.  Reminds me of UTM.  I can see that it works on a paper map, but I suppose most GIS systems would have 
to implement such a map grid as two separate projections.   
 
Regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com 


________________________________

From: Clifford J Mugnier [mailto:cjmce at lsu.edu] 
Sent: den 6 oktober 2008 15:33
To: PROJ.4 and general Projections Discussions
Cc: Mikael Rittri
Subject: RE: [Proj] Terminology for origins


Sorry you find it contradictory, but it remains a fact.  When you get to zero and still need to go further south to use the same grid system, they add an additional number to that zero for a significant "jump."  I have not ever seen it used for False Easting; just for False Northing.  
 
The French Lambert Sud Algerie Grid has a False Northing of 300 km at the origin of 33º 18' North.  ("South of the False Origin add 1,000,000 meters to the northings").  The original grid tables are Tables de Projeciton Systeme Lambert Nort Maroc.  The EPSG has an interesting database for such things, however I consider my personal holdings as authoritative in most cases that differ.  This is one of those common cases.  
 
Regards,
 
Clifford J. Mugnier, C.P., C.M.S.
Past National Director (2006-2008),
Photogrammetric Applications Division
American Society for Photogrammetry and Remote Sensing 
and 
Chief of Geodesy,
CENTER FOR GEOINFORMATICS 
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4474 [Research] 
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Member Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group
======================================================
http://www.asprs.org/resources/GRIDS/
======================================================

________________________________

From: proj-bounces at lists.maptools.org on behalf of Mikael Rittri
Sent: Mon 06-Oct-08 02:03
To: PROJ.4 and general Projections Discussions
Subject: RE: [Proj] Terminology for origins


Clifford J Mugnier wrote ( http://lists.maptools.org/pipermail/proj/2008-October/003865.html ):
 
> In North Africa, several of the Grids also have a False Northing at the False Origin in order to avoid negative northings.
> Really!
> :-) 
 
Sorry, I don't understand.  In what sense are you using the term "False Origin" here?  
 
If you are using it as EPSG does (at least for Lambert Conformal Conic 2SP 
and Polar Stereographic Variant C), then your statement is not surprising, since 
that's how such a False Origin works: it does have a False Northing and a 
False Easting. 
 
If you are using it in the other sense, as the point where False Easting and False Northing
are both zero, then your statement is contradictory (that's a little too surprising). 
 
So, you must be using the term "False Origin" in some third, more general way.  
Could you give a concrete numerical example? 
 
Best regards,
 
--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/646344ef/attachment.html>

From geraldi.evenden at gmail.com  Mon Oct  6 08:20:48 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 6 Oct 2008 11:20:48 -0400
Subject: [Proj] Terminology for origins
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi>
	<B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu>
	<FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>
Message-ID: <200810061120.48693.geraldi.evenden@gmail.com>

On Monday 06 October 2008 10:05:06 am Mikael Rittri wrote:
> Thanks for explaining.  I did not understand that the extra False Northing
> should be added only south of the False Origin. Let me see if I got it
> right.
>
> So, in the Lambert Sud Algerie Grid, there is one False Northing that is
> 300 km, and an extra False Northing that is 1000 km? As one goes south from
> the northmost part of the map grid, the Northing value would decrease until
> it reaches 300 km at the Origin, but there the Northing would wrap around
> and become 1300 km? And then it would decrease again, if one would go
> further south.
>
> Tricky.  Reminds me of UTM.  I can see that it works on a paper map, but I
> suppose most GIS systems would have to implement such a map grid as two
> separate projections.

You are confused?  You have my head spinning.  :-)

A far as the Algerian system(s) you are discussing, I finally guessed that you 
are referring to the transition from one grid system to another as one treks 
southward.  So?  What is new about that?  In a little postage stamp size 
state like Massachusetts we have two grid systems: one for the mainland and 
another that covers the islands of Marthasvinyard and Nantucket.  California 
has 6 grid systems with irregular boundaries determined by county borders.  
At least the Algerians and UTM have regular grid boundaries.

The situation in Algeria is the rule not the exception.

Welcome to the world of grid systems.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From cjmce at lsu.edu  Mon Oct  6 09:34:50 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 6 Oct 2008 11:34:50 -0500
Subject: [Proj] Terminology for origins
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu><FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>
	<200810061120.48693.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC246F@email002.lsu.edu>

Not a separate Grid system but a "work around" when working South of the False Origin.  No other parameters change, and this is considered the SAME ZONE, SAME GRID.  Grid boundaries in North Africa use boundaries defined either by certain Ellipsoidal Bonne Grid Coordinates (for Lambert Zones) and/or Ellipsoidal Loxodromes.  Quite different from UTM.
 
The Lambert math models use the French Army Truncated Cubic and NOT the fully conformal Lambert Conformal Conic up through the middle 1950s.  Then the equations change with the date legislated by the individual former French Colonies.  After some encouragement, the EPSG now reflects this curiosity for the equations, but I suspect no recognition on the exotic Grid boundaries ...
 
Same also goes for Morrocco (for False Northing at False Origin), as well as Algeria  (of course not for Tunisia).
 
C. Mugnier

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Mon 06-Oct-08 10:20
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Terminology for origins



On Monday 06 October 2008 10:05:06 am Mikael Rittri wrote:
> Thanks for explaining.  I did not understand that the extra False Northing
> should be added only south of the False Origin. Let me see if I got it
> right.
>
> So, in the Lambert Sud Algerie Grid, there is one False Northing that is
> 300 km, and an extra False Northing that is 1000 km? As one goes south from
> the northmost part of the map grid, the Northing value would decrease until
> it reaches 300 km at the Origin, but there the Northing would wrap around
> and become 1300 km? And then it would decrease again, if one would go
> further south.
>
> Tricky.  Reminds me of UTM.  I can see that it works on a paper map, but I
> suppose most GIS systems would have to implement such a map grid as two
> separate projections.

You are confused?  You have my head spinning.  :-)

A far as the Algerian system(s) you are discussing, I finally guessed that you
are referring to the transition from one grid system to another as one treks
southward.  So?  What is new about that?  In a little postage stamp size
state like Massachusetts we have two grid systems: one for the mainland and
another that covers the islands of Marthasvinyard and Nantucket.  California
has 6 grid systems with irregular boundaries determined by county borders. 
At least the Algerians and UTM have regular grid boundaries.

The situation in Algeria is the rule not the exception.

Welcome to the world of grid systems.

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081006/2bbcb317/attachment.html>

From al001 at uni-koeln.de  Mon Oct  6 11:55:42 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Mon, 06 Oct 2008 20:55:42 +0200
Subject: [Proj] Grid Systems
In-Reply-To: <200810061601.m96G1dS2014212@duke.maptools.org>
References: <200810061601.m96G1dS2014212@duke.maptools.org>
Message-ID: <200810061855.m96ItjJ7016609@smtp-auth.uni-koeln.de>

Gerald I. Evenden wrote:

>A far as the Algerian system(s) you are discussing, I finally 
>guessed that you
>are referring to the transition from one grid system to another as one treks
>southward.  So?  What is new about that?  In a little postage stamp size
>state like Massachusetts we have two grid systems: one for the mainland and
>another that covers the islands of Marthasvinyard and Nantucket.  California
>has 6 grid systems with irregular boundaries determined by county borders.
>At least the Algerians and UTM have regular grid boundaries.
>
>The situation in Algeria is the rule not the exception.
>
>Welcome to the world of grid systems.

At least the above-mentioned are documented.  In the course of 
implementing the Old Egyptian grid (1907) which has four documented 
(EPSG) areas called Belts, I calculated the grid values at for the 
lat/lons at the corners of each "Belt" to set range checks for user 
data entry and thus discovered that the main "Red Belt" which 
straddles the Nile valley has negative coordinates in the south near 
the border with Sudan, and the "Purple Belt" has one much further 
north and west.

Ragab Hafiez of DASCO in Cairo investigated this at the Egyptian 
Survey Authority at my request and discovered that the most recent 
1:50000 maps have an undocumented False Northing whereby 1,000,000 
was added to the published FN of 810,000 used north of the area in 
question. That has led me to invent my own "Red Extended Belt" south 
of 22 deg 45 min which is not documented in EPSG (but perhaps should be?).

California is in "good" (sic) company with the other side of the 
Pacific.  The Japan grid follows the boundaries of prefectures in 
places cutting across islands and has 19 zones stretching across a 
vast area, not to mention having grids with Bessel and GRS80 
ellipsoid datums as well.  Further entertainment is provided by the 
old Austrian and the old Japan Bessel grids which  have negative E-W 
coordinates as well.

Can anyone suggest a solution or reference to the apparently trivial question:

Given a lat/lon value, in which zone or area does the point fall so 
that the FN, FE and origins  can be determined automatically by 
either table lookup or a point in polygon search?  The first thing 
which comes to mind suggests using the Euler solution to the "point 
in polygon" problem, or more subtly employing data structures like 
KD, BSP or BAR trees but in most cases one doesn't have data for 
boundaries in machine readable form.

Irwin Scollar 



From Mikael.Rittri at carmenta.com  Tue Oct  7 02:43:53 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 7 Oct 2008 11:43:53 +0200
Subject: [Proj] Terminology for origins
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>
References: <14622645.1375841222953253519.JavaMail.support.mn@elisanet.fi><200810021132.21639.geraldi.evenden@gmail.com><FAF6E56B26D2044696772EBE89B1535101273141@posty.carmenta.se><B597ADFC46B67741B18EA6AA13613FF7EC2463@email002.lsu.edu><FAF6E56B26D2044696772EBE89B1535101273211@posty.carmenta.se><B597ADFC46B67741B18EA6AA13613FF7EC246D@email002.lsu.edu>
	<FAF6E56B26D2044696772EBE89B1535101314665@posty.carmenta.se>
Message-ID: <FAF6E56B26D2044696772EBE89B153510131471E@posty.carmenta.se>

There is a picture of the Sud Algerie Grid on page 4-25 in
 
http://www1.nga.mil/ProductsServices/GeodesyGeophysics/WorldGeodeticSystem/Related%20Documents/8358_1a.pdf
 
but the resolution is bad.  One can see that the grid extends farther south than the zero Northing line, though. 
 
I wrote: 
 
> Let me see if I got it right.
 
but I didn't; the wrap-around occurs where the Northing becomes zero.  
Clifford Mugnier wrote (to me): 
 
________________________________

From: Clifford J Mugnier [mailto:cjmce at lsu.edu] 
Sent: den 6 oktober 2008 16:13
To: Mikael Rittri
Subject: RE: [Proj] Terminology for origins


No.  From the Northing being 300 km at the Latitude of Origin, 33º 18' North, going South from there the ordinate would decrease to zero.  At that point, it would then have a "jump" value of 1,000 km and then decrease South from there.  Such things require a logical "IF" to work properly in GIS software.  With most of GIS software being programmed by programmers and not Cartographers or Geodesists, it remains a conundrum.
 
Likewise, using ellipsoidal Loxodromes for boundaries between various Grids ...  :-)
 
C. Mugnier

________________________________

From: Mikael Rittri [mailto:Mikael.Rittri at carmenta.com]
Sent: Mon 06-Oct-08 09:05
To: Clifford J Mugnier; PROJ.4 and general Projections Discussions
Subject: RE: [Proj] Terminology for origins


Thanks for explaining.  I did not understand that the extra False Northing should be added only south of the False Origin. 
Let me see if I got it right.
 
[ the rest of my post can be found at http://lists.maptools.org/pipermail/proj/2008-October/003876.html ] 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081007/aef7a38d/attachment.html>

From bartvde at osgis.nl  Wed Oct  8 07:24:11 2008
From: bartvde at osgis.nl (bartvde at osgis.nl)
Date: Wed, 8 Oct 2008 16:24:11 +0200 (CEST)
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
Message-ID: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>

Hi list,

when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
national grid) and UTM zone 31 ED50 I get:

cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
+lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
+units=m
+towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812
+no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
19465 394814
530108.861080788        5708613.329898705 -150.818087836

If I use the coordinate calculator (Windows only sorry,
http://www.rdnap.nl/download/setup%20cc41.exe) which is an official tool
in The Netherlands, I get:

Northing 5708615,754
Easting 530199,479

so especially the difference in easting is too large.

Is there a logical explanation for this difference? TIA.

Best regards,
Bart



From jrepetto at free.fr  Wed Oct  8 07:59:33 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 08 Oct 2008 16:59:33 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <48ECCAD5.7040402@free.fr>

bartvde at osgis.nl wrote :

> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
> national grid) and UTM zone 31 ED50 I get:
> 
> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
> +units=m
> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812
> +no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
> 19465 394814
> 530108.861080788        5708613.329898705 -150.818087836
> 
> 
> Northing 5708615,754
> Easting 530199,479
> 
> so especially the difference in easting is too large.
> 
> Is there a logical explanation for this difference? TIA.

Hi Bart,

I think you have forgotten the +towgs84 parameters to do the WGS84 -> 
ED50 transformation.

Jean-Claude



From bartvde at osgis.nl  Wed Oct  8 09:16:34 2008
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed, 08 Oct 2008 18:16:34 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <48ECCAD5.7040402@free.fr>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
	<48ECCAD5.7040402@free.fr>
Message-ID: <48ECDCE2.6070609@osgis.nl>

Hi Jean-Claude,

I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?

Best regards,
Bart

Jean-Claude Repetto wrote:
> bartvde at osgis.nl wrote :
>
>> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
>> national grid) and UTM zone 31 ED50 I get:
>>
>> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
>> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 
>> +ellps=bessel
>> +units=m
>> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 
>>
>> +no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>> 19465 394814
>> 530108.861080788        5708613.329898705 -150.818087836
>>
>>
>> Northing 5708615,754
>> Easting 530199,479
>>
>> so especially the difference in easting is too large.
>>
>> Is there a logical explanation for this difference? TIA.
>
> Hi Bart,
>
> I think you have forgotten the +towgs84 parameters to do the WGS84 -> 
> ED50 transformation.
>
> Jean-Claude
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde at osgis.nl
http://www.osgis.nl



From warmerdam at pobox.com  Wed Oct  8 09:51:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 08 Oct 2008 12:51:15 -0400
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <48ECDCE2.6070609@osgis.nl>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
	<48ECCAD5.7040402@free.fr> <48ECDCE2.6070609@osgis.nl>
Message-ID: <48ECE503.2030100@pobox.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi Jean-Claude,
> 
> I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?

Bart,

It is necessary if ED50 is non-trivially different from WGS84 though my
understanding was that the differences were small.  I personally suspect
the problem is either the sterea projection method (there are several
variations of this I believe) or your towgs84 parameters are not ideal.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul-grass at stjohnspoint.co.uk  Wed Oct  8 14:32:39 2008
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed, 8 Oct 2008 22:32:39 +0100 (BST)
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <48ECDCE2.6070609@osgis.nl>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
	<48ECCAD5.7040402@free.fr> <48ECDCE2.6070609@osgis.nl>
Message-ID: <Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>

On Wed, 8 Oct 2008, Bart van den Eijnden (OSGIS) wrote:

> Hi Jean-Claude,
>
> I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?

I think you are mistaken, but would be interested if you could explain 
your reasoning behind that understanding. There seems to be a lot of 
confusion about the differences in this area in PROJ 4.4.9 and it might 
help to understand what is causing this confusion.

Jean-Claude is indeed correct about the second transformation lacking 
datum transformation paramters. If I use +towgs84=-87,-98,-121 (a general 
solution for ED 1950 across Europe) with your command-line I get the 
output:
530201.420293435        5708616.572244617 1.595183260
which is much closer to the official results. I suspect if you found a 
datum tranformation set for ED 1950 specifically covering the Netherlands 
rather than Europe as a whole you could get very close. (The NIMA TR8350.2 
document might perhaps be useful here; I haven't looked.)

Best regards,

Paul

>
> Best regards,
> Bart
>
> Jean-Claude Repetto wrote:
>> bartvde at osgis.nl wrote :
>> 
>>> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
>>> national grid) and UTM zone 31 ED50 I get:
>>> 
>>> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
>>> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
>>> +units=m
>>> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 
>>> +no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>> 19465 394814
>>> 530108.861080788        5708613.329898705 -150.818087836
>>> 
>>> 
>>> Northing 5708615,754
>>> Easting 530199,479
>>> 
>>> so especially the difference in easting is too large.
>>> 
>>> Is there a logical explanation for this difference? TIA.
>> 
>> Hi Bart,
>> 
>> I think you have forgotten the +towgs84 parameters to do the WGS84 -> ED50 
>> transformation.
>> 
>> Jean-Claude
>> 
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>> 
>> 
>
>
> -- 
> Bart van den Eijnden
> OSGIS, Open Source GIS
> bartvde at osgis.nl
> http://www.osgis.nl
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>


From jrepetto at free.fr  Wed Oct  8 14:41:49 2008
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed, 08 Oct 2008 23:41:49 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <48ECE503.2030100@pobox.com>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>	<48ECCAD5.7040402@free.fr>
	<48ECDCE2.6070609@osgis.nl> <48ECE503.2030100@pobox.com>
Message-ID: <48ED291D.4080402@free.fr>

Frank Warmerdam a écrit :
> Bart van den Eijnden (OSGIS) wrote:
>> Hi Jean-Claude,
>>
>> I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?
> 
> Bart,
> 
> It is necessary if ED50 is non-trivially different from WGS84 though my
> understanding was that the differences were small.  I personally suspect
> the problem is either the sterea projection method (there are several
> variations of this I believe) or your towgs84 parameters are not ideal.
> 

Differences between ED50 and WGS84 can be large. For example, in Spain :
+towgs84=-131.0320,-100.2510,-163.3540,-1.2438,-0.0195,-1.1436,9.3900


From cjmce at lsu.edu  Wed Oct  8 19:28:04 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 8 Oct 2008 21:28:04 -0500
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl><48ECCAD5.7040402@free.fr>
	<48ECDCE2.6070609@osgis.nl>
	<Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC247E@email002.lsu.edu>

I find these sorts of discussions disconcerting in that TR8350.2 is a military publication that offers crude relations that are sufficient for indirect artillery fire control.  That means it's good enough for shooting cannon shells over the horizon to hit military targets with an accuracy good enough for the blast radius of a 155mm high explosive Howitzer round!
 
GIS applications are not the same venue, and one should recognize the differences.
 
The Dutch government publishes software that will provide the MAXIMUM possible accuracy for a generalized datum shift within their Kingdom.  Nothing else will be superior, muchless its equal.
 
Even with such superb accuracy, one must realize that a "datum shift" will DEGRADE the accuracy of ANYTHING submitted for processing as a "datum shift" and it is a best guess.  The only "perfect" way to change datums is to re-compute the original field observations with new starting and ending survey point coordinates.
 
Short of that, it's a guess, the quality of the guess dependant on the quality of the algorithm - the official nationally-published version being the absolute best guess of them all.
 
Wanna invade a country and provide indirect cannon fire to support your infantry?  Then use TR8350.2.  However, don't consider it the first choice - it should be the last choice.  I quote it often in my columns when there's nothing better available.  It's better than nothing, but don't compare it to a national geodetic organization's offering!
 
Cliff Mugnier
LOUISIANA STATE UNIVERSITY
 
P.S.  ED50 was computed by the U.S. Army Map Service in the 1950s to provide a good unified system for future indirect artillery fire control ... if needed.  It is NOT the "last" word in geodetic elegance - it was the best guess for the ARMY ... because WE won the war.

________________________________

From: proj-bounces at lists.maptools.org on behalf of Paul Kelly
Sent: Wed 08-Oct-08 16:32
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] EPSG:28992 to EPSG:23031 conversion



On Wed, 8 Oct 2008, Bart van den Eijnden (OSGIS) wrote:

> Hi Jean-Claude,
>
> I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?

I think you are mistaken, but would be interested if you could explain
your reasoning behind that understanding. There seems to be a lot of
confusion about the differences in this area in PROJ 4.4.9 and it might
help to understand what is causing this confusion.

Jean-Claude is indeed correct about the second transformation lacking
datum transformation paramters. If I use +towgs84=-87,-98,-121 (a general
solution for ED 1950 across Europe) with your command-line I get the
output:
530201.420293435        5708616.572244617 1.595183260
which is much closer to the official results. I suspect if you found a
datum tranformation set for ED 1950 specifically covering the Netherlands
rather than Europe as a whole you could get very close. (The NIMA TR8350.2
document might perhaps be useful here; I haven't looked.)

Best regards,

Paul

>
> Best regards,
> Bart
>
> Jean-Claude Repetto wrote:
>> bartvde at osgis.nl wrote :
>>
>>> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
>>> national grid) and UTM zone 31 ED50 I get:
>>>
>>> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
>>> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
>>> +units=m
>>> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812
>>> +no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
>>> 19465 394814
>>> 530108.861080788        5708613.329898705 -150.818087836
>>>
>>>
>>> Northing 5708615,754
>>> Easting 530199,479
>>>
>>> so especially the difference in easting is too large.
>>>
>>> Is there a logical explanation for this difference? TIA.
>>
>> Hi Bart,
>>
>> I think you have forgotten the +towgs84 parameters to do the WGS84 -> ED50
>> transformation.
>>
>> Jean-Claude
>>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081008/70cacb7b/attachment.html>

From ovv at hetnet.nl  Wed Oct  8 23:26:11 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 9 Oct 2008 08:26:11 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <1AF9D82F043C4CAD9431C219D9D26EE1@PCHP>


----- Original Message ----- 
From: <bartvde at osgis.nl>
To: <proj at lists.maptools.org>
Sent: Wednesday, October 08, 2008 4:24 PM
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion


> Hi list,
>
> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch
> national grid) and UTM zone 31 ED50 I get:
>
> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
> +units=m
> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812
> +no_defs +to +proj=utm +zone=31 +ellps=intl +units=m +no_defs
> 19465 394814
> 530108.861080788        5708613.329898705 -150.818087836
>
> If I use the coordinate calculator (Windows only sorry,
> http://www.rdnap.nl/download/setup%20cc41.exe) which is an official tool
> in The Netherlands, I get:
>
> Northing 5708615,754
> Easting 530199,479
>
> so especially the difference in easting is too large.
>
> Is there a logical explanation for this difference? TIA.
>
> Best regards,
> Bart



If there is a difference of some tens to around one hundred meters and 
everything else (such as the command line instruction) seems to be ok, then 
there are two usual suspects:
* The rotation model is wrong - coordinate frame vs. position vector; try 
changing the signs.
* The units of the rotation angles are wrong - microradians vs. arcseconds.

Oscar van Vlijmen




From Mikael.Rittri at carmenta.com  Thu Oct  9 01:17:33 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 9 Oct 2008 10:17:33 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>
References: <27465.145.50.39.11.1223475851.squirrel@webmail.hostingdiscounter.nl><48ECCAD5.7040402@free.fr>
	<48ECDCE2.6070609@osgis.nl>
	<Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>
Message-ID: <FAF6E56B26D2044696772EBE89B15351013148BE@posty.carmenta.se>

I looked in the EPSG database and found three transformations that could be useful. 

Name               | Code | Accuracy | Parameters for cs2cs 	
ED50 to WGS 84 (1) | 1133 |   10 m   | +towgs84=-87,-98,-121
ED50 to WGS 84 (2) | 1134 |    6 m   | +towgs84=-87,-96,-120
ED50 to WGS 84 (32)| 1999 |    3 m   | +towgs84=-83.11,-97.38,-117.22,0.005693,-0.04469,0.04428,1.218

(I am not sure what EPSG means by "Accuracy".)

The transform (1) is the same as Paul Kelly used. The Area of Use seems to be all 
countries in Europe where ED50 is defined except Great Britain and Ireland 
(namely "Austria; Belgium; Denmark; Finland; Faroe islands; France; Germany (west); 
Gibraltar; Greece; Italy; Luxembourg; Netherlands; Norway; Portugal; Spain; Sweden; 
Switzerland.") I could reproduce Paul's result, which gave a horizontal error 
of 2.11 m compared to your official result.  

The transform (2) has an Area of Use given as "Austria; Denmark; France; Germany (west); Netherlands; Switzerland."
When I tried it on your example, I got the result 

530199.428   5708616.032   0.738

with a horizontal error of 0.28 m. 

The transform (32) has an Area of Use given as "Netherlands - offshore North Sea."
When I tried it, I got the result 

530200.258   5708615.921   -11.560

with a horizontal error of 0.80 m. 

The source for (1) and (2) is given as "U.S. Defense Mapping Agency TR8350.2 September 1987," 
and the source for (32) is given as "Nederlandse Aardolie Maatschappij (NAM)."

Best regards,

Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Paul Kelly
Sent: den 8 oktober 2008 23:33
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] EPSG:28992 to EPSG:23031 conversion

On Wed, 8 Oct 2008, Bart van den Eijnden (OSGIS) wrote:

> Hi Jean-Claude,
>
> I am using PROJ 4.4.9 so that should not be necessary or am I mistaken?

I think you are mistaken, but would be interested if you could explain your reasoning behind that understanding. There seems to be a lot of confusion about the differences in this area in PROJ 4.4.9 and it might help to understand what is causing this confusion.

Jean-Claude is indeed correct about the second transformation lacking datum transformation paramters. If I use +towgs84=-87,-98,-121 (a general solution for ED 1950 across Europe) with your command-line I get the
output:
530201.420293435        5708616.572244617 1.595183260
which is much closer to the official results. I suspect if you found a datum tranformation set for ED 1950 specifically covering the Netherlands rather than Europe as a whole you could get very close. (The NIMA TR8350.2 document might perhaps be useful here; I haven't looked.)

Best regards,

Paul

>
> Best regards,
> Bart
>
> Jean-Claude Repetto wrote:
>> bartvde at osgis.nl wrote :
>> 
>>> when I use PROJ.4 to do a conversion between EPSG:28992 (the Dutch 
>>> national grid) and UTM zone 31 ED50 I get:
>>> 
>>> cs2cs -f %.9f +proj=sterea +lat_0=52.15616055555555
>>> +lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 
>>> ++ellps=bessel units=m
>>> +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.3507326765425
>>> +63,-1.8703473836068,4.0812 no_defs +to +proj=utm +zone=31 
>>> ++ellps=intl +units=m +no_defs
>>> 19465 394814
>>> 530108.861080788        5708613.329898705 -150.818087836
>>> 
>>> 
>>> Northing 5708615,754
>>> Easting 530199,479
>>> 
>>> so especially the difference in easting is too large.
>>> 
>>> Is there a logical explanation for this difference? TIA.
>> 
>> Hi Bart,
>> 
>> I think you have forgotten the +towgs84 parameters to do the WGS84 -> 
>> ED50 transformation.
>> 
>> Jean-Claude
>> 
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>> 
>> 
>
>
> --
> Bart van den Eijnden
> OSGIS, Open Source GIS
> bartvde at osgis.nl
> http://www.osgis.nl
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From hamish_b at yahoo.com  Sun Oct 12 23:04:33 2008
From: hamish_b at yahoo.com (Hamish)
Date: Mon, 13 Oct 2008 19:04:33 +1300
Subject: [Proj] wgs72 ellipsoid coeffs?
Message-ID: <20081013190433.63630c9f.hamish_b@yahoo.com>

Hello,

I wonder if I could tap the braintrust for a moment,

We are trying to verify a great circle distance calculation but I am
stuck on finding a reference for the formula.

Given in the code is:    (MBSystem's mbio/mb_coor_scale.c; GPL)

/* ellipsoid coefficients from World Geodetic System Ellipsoid of 1972 
 * - see Bowditch (H.O. 9 -- American Practical Navigator). */
#define C1 111412.84
#define C2 -93.5
#define C3 0.118
#define C4 111132.92
#define C5 -559.82
#define C6 1.175
#define C7 0.0023

[...]

radlat = DTR*latitude;    // degree2radians
*mtodeglon = 1./fabs(C1*cos(radlat) + C2*cos(3*radlat) 
              + C3*cos(5*radlat));
*mtodeglat = 1./fabs(C4 + C5*cos(2*radlat) 
              + C6*cos(4*radlat) + C7*cos(6*radlat));

[...] then given those multipliers the pythagorean theorem is used to
obtain distance for small values of dx,dy.


should C7 be negative?

I have obtained a recent edition of Bowditch's American Practical
Navigator from  http://www.nga.mil/portal/site/maritime/
but searching through the document I couldn't find that. (Ch 24 deals
with great circle distance calcs via table; close but no cigar)

with pen and paper and an old geometry textbook I could only figure
out how to reproduce C4.

Also, if I can find/derive the coefficients, I'd like to update WGS72
->84 to match the gps. (even though the practical difference is probably
nil it is nice to be consistent)

note that MBSys links against proj, so internal libproj functions
could be available for this if there's an easier way.


thanks,
Hamish


From thy at 42.dk  Sat Oct 11 05:18:45 2008
From: thy at 42.dk (Kristian Thy)
Date: Sat, 11 Oct 2008 14:18:45 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351013148BE@posty.carmenta.se>
References: <48ECDCE2.6070609@osgis.nl>
	<Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>
	<FAF6E56B26D2044696772EBE89B15351013148BE@posty.carmenta.se>
Message-ID: <20081011121845.GC22531@42.dk>

On Thu, Oct 09, Mikael Rittri wrote:
> I looked in the EPSG database and found three transformations that could be useful. 
> 
> Name               | Code | Accuracy | Parameters for cs2cs 	
> ED50 to WGS 84 (1) | 1133 |   10 m   | +towgs84=-87,-98,-121
> ED50 to WGS 84 (2) | 1134 |    6 m   | +towgs84=-87,-96,-120
> ED50 to WGS 84 (32)| 1999 |    3 m   | +towgs84=-83.11,-97.38,-117.22,0.005693,-0.04469,0.04428,1.218

Newbie question - where would one look to find these numbers? I am aware
of the EPSG file that ships with for instance mapserver, but where can I
find the database you used here?

\\kristian
-- 
... et nemo ex vobis interrogat me: »Quo vadis?«


From jhollingsworth at houston.oilfield.slb.com  Tue Oct 14 10:15:25 2008
From: jhollingsworth at houston.oilfield.slb.com (Jay Hollingsworth)
Date: Tue, 14 Oct 2008 12:15:25 -0500
Subject: [Proj] Re: Proj Digest, Vol 53, Issue 12
In-Reply-To: <200810141600.m9EG0SEl004427@duke.maptools.org>
References: <200810141600.m9EG0SEl004427@duke.maptools.org>
Message-ID: <0K8Q0095PNXNHH90@gb0135mbx01.mail.slb.com>

The EPSG online registry is at http://www.epsg-registry.org/




Jay

At 11:00 AM 10/14/2008, you wrote:
>Date: Sat, 11 Oct 2008 14:18:45 +0200
>From: Kristian Thy <thy at 42.dk>
>Subject: Re: [Proj] EPSG:28992 to EPSG:23031 conversion
>To: proj at lists.maptools.org
>Message-ID: <20081011121845.GC22531 at 42.dk>
>Content-Type: text/plain; charset=iso-8859-1
>
>On Thu, Oct 09, Mikael Rittri wrote:
> > I looked in the EPSG database and found three 
> transformations that could be useful.
> >
> > Name               | Code | Accuracy | Parameters for cs2cs
> > ED50 to WGS 84 (1) | 1133 |   10 m   | +towgs84=-87,-98,-121
> > ED50 to WGS 84 (2) | 1134 |    6 m   | +towgs84=-87,-96,-120
> > ED50 to WGS 84 (32)| 1999 |    3 m   | 
> +towgs84=-83.11,-97.38,-117.22,0.005693,-0.04469,0.04428,1.218
>
>Newbie question - where would one look to find these numbers? I am aware
>of the EPSG file that ships with for instance mapserver, but where can I
>find the database you used here?
>
>\\kristian
>--
>... et nemo ex vobis interrogat me: »Quo vadis?«


Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093




From jrepetto at free.fr  Tue Oct 14 10:25:26 2008
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 14 Oct 2008 19:25:26 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <20081011121845.GC22531@42.dk>
References: <48ECDCE2.6070609@osgis.nl>	<Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>	<FAF6E56B26D2044696772EBE89B15351013148BE@posty.carmenta.se>
	<20081011121845.GC22531@42.dk>
Message-ID: <48F4D606.5070309@free.fr>

Kristian Thy a écrit :
> On Thu, Oct 09, Mikael Rittri wrote:
>> I looked in the EPSG database and found three transformations that could be useful. 
>>
>> Name               | Code | Accuracy | Parameters for cs2cs 	
>> ED50 to WGS 84 (1) | 1133 |   10 m   | +towgs84=-87,-98,-121
>> ED50 to WGS 84 (2) | 1134 |    6 m   | +towgs84=-87,-96,-120
>> ED50 to WGS 84 (32)| 1999 |    3 m   | +towgs84=-83.11,-97.38,-117.22,0.005693,-0.04469,0.04428,1.218
> 
> Newbie question - where would one look to find these numbers? I am aware
> of the EPSG file that ships with for instance mapserver, but where can I
> find the database you used here?
> 

www.epsg.org



From al001 at uni-koeln.de  Tue Oct 14 11:36:15 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Tue, 14 Oct 2008 20:36:15 +0200
Subject: [Proj] Distance calculation
In-Reply-To: <200810141600.m9EG0SEm004427@duke.maptools.org>
References: <200810141600.m9EG0SEm004427@duke.maptools.org>
Message-ID: <200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de>

Try:

Zhang Xue-Lian (1985) The nested coefficient method for accurate 
solutions of direct and inverse geodetic problems with any length. 
Proceedings of the 7th International Symposium on Geodetic 
Computations,  Direct and inverse distance 
functions.              Cracow, June 18-21, 1985. Institute of 
Geodesy and Cartography. Wasaw, Poland, ul. Jasna 2/4 pp 747-763

since it's more accurate than the classical method due to Gauss for 
long distances.

Irwin Scollar



From roger at opq.se  Tue Oct 14 12:54:29 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 14 Oct 2008 21:54:29 +0200
Subject: [Proj] Google maps of various flavors,
	and countries all over the place.
Message-ID: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>

I have been asked by a colleague about the possibility of providing  
our data using coordinates that can be displayed over a google map. I  
recall a short discussion about this a while back, but do not recall  
if any potential method was discovered. I see on the proj4 trac site  
that there is a reference in the context of a guess about google maps.

BTW, our data starts life as WGS85 from a Trimble receiver. So that  
would be our starting point.

I do not know if Google's MyMap uses the same system as maps and  
satellites used elsewhere in the Google mapping suite. At this time, I  
think getting started with any Google map API would be enough.

Perhaps in the user's manual, there could be a section on using proj4  
with Google maps? Whatever else it is, it is common. I can offer to  
add info to the tracs site on this if I get anywhere.

While on the subject of the tracs site, how about a page for each  
country where the various concerns of providing national coordinates  
can be discussed and documented? There is a wealth of information in  
all this e-mail that should not get lost. Perhaps a good start is a  
start page with all countries listed. Then, as needed, the country- 
specific pages can be developed? I can offer to help set that up. I  
await the consensus. I do know that these sorts of things start ok.  
And then they peter out. I have seen other sites that have similar  
information for proj4, and that has happened to them. But these sites  
are not really 'connected' to proj4. The trac site, however, is. So  
maybe it would fare better over time.

--
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction.
It is like talking about large city with all constructions finished.
Not impossible, but very unlikely.




From karl at kls2.com  Tue Oct 14 13:04:48 2008
From: karl at kls2.com (Karl Swartz)
Date: Tue, 14 Oct 2008 13:04:48 -0700
Subject: [Proj] Distance calculation
In-Reply-To: <200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de>
References: <200810141600.m9EG0SEm004427@duke.maptools.org>
	<200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de>
Message-ID: <20081014200448.GA72616@orion.kls2.com>

> Zhang Xue-Lian (1985) The nested coefficient method for accurate 
> solutions of direct and inverse geodetic problems with any length. 
> Proceedings of the 7th International Symposium on Geodetic 
> Computations,  Direct and inverse distance 
> functions.              Cracow, June 18-21, 1985. Institute of 
> Geodesy and Cartography. Wasaw, Poland, ul. Jasna 2/4 pp 747-763
> 
> since it's more accurate than the classical method due to Gauss for 
> long distances.

How does this compare to Thomas Vincenty's algorithm (which can be found
at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?

 -- Karl


From geraldi.evenden at gmail.com  Tue Oct 14 13:14:44 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 14 Oct 2008 16:14:44 -0400
Subject: [Proj] Distance calculation
In-Reply-To: <20081014200448.GA72616@orion.kls2.com>
References: <200810141600.m9EG0SEm004427@duke.maptools.org>
	<200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de>
	<20081014200448.GA72616@orion.kls2.com>
Message-ID: <200810141614.44443.geraldi.evenden@gmail.com>

On Tuesday 14 October 2008 4:04:48 pm Karl Swartz wrote:
> > Zhang Xue-Lian (1985) The nested coefficient method for accurate
> > solutions of direct and inverse geodetic problems with any length.
> > Proceedings of the 7th International Symposium on Geodetic
> > Computations,  Direct and inverse distance
> > functions.              Cracow, June 18-21, 1985. Institute of
> > Geodesy and Cartography. Wasaw, Poland, ul. Jasna 2/4 pp 747-763
> >
> > since it's more accurate than the classical method due to Gauss for
> > long distances.
>
> How does this compare to Thomas Vincenty's algorithm (which can be found
> at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?
>
>  -- Karl

I second the request as I considered it the gold standard and besides full 
documentation and source code are available at NGS as well as online 
computational services.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Tue Oct 14 13:22:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 14 Oct 2008 16:22:58 -0400
Subject: [Proj] Google maps of various flavors, and countries all over
	the place.
In-Reply-To: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
References: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
Message-ID: <48F4FFA2.2070008@pobox.com>

Roger Oberholtzer wrote:
> While on the subject of the tracs site, how about a page for each 
> country where the various concerns of providing national coordinates can 
> be discussed and documented? There is a wealth of information in all 
> this e-mail that should not get lost. Perhaps a good start is a start 
> page with all countries listed. Then, as needed, the country-specific 
> pages can be developed? I can offer to help set that up. I await the 
> consensus. I do know that these sorts of things start ok. And then they 
> peter out. I have seen other sites that have similar information for 
> proj4, and that has happened to them. But these sites are not really 
> 'connected' to proj4. The trac site, however, is. So maybe it would fare 
> better over time.


Roger,

I encourage you to start a listing of trac pages with hints and tips for
particular countries / national mapping systems, and then add pages off
that where applicable.  I would discourage starting with a list of many
countries where only a few have actual content as that discourages people
from digging through.

Keep in mind that some information belongs instead in the FAQ:

   http://trac.osgeo.org/proj/wiki/FAQ

and some information on general PROJ parameters belongs in:

   http://trac.osgeo.org/proj/wiki/GenParms

We also have the geotiff projection list which I hope will become part of
a more general MetaCRS resource which will apply to PROJ.4, proj4js, CS-Map
and other packages.

I would note that a "national info registry" that only ended up with 4-5
nations listed could still be pretty useful, so don't get hung up on whether
the material is comprehensive.  And part of the rationale for moving to Trac
for PROJ.4 was to encourage user community updates to the web site.  So just
dive in!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From cjmce at lsu.edu  Tue Oct 14 13:28:11 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 14 Oct 2008 15:28:11 -0500
Subject: [Proj] Distance calculation
References: <200810141600.m9EG0SEm004427@duke.maptools.org><200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de><20081014200448.GA72616@orion.kls2.com>
	<200810141614.44443.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC248A@email002.lsu.edu>

It was Thaddeus Vincenty, not Thomas.
 
The "exact" solution was published by Dr. Michael E. Pittman in Surveying and Mapping in the early 1980s with Fortran code.  Vincenty agreed it was more accurate and pointed out a couple singularities that Pittman later fixed.  Pittman's geodesic was adopted by the USAF as the absolute "standard" in which any disagreement with Pittman's inverse showed what error the other method had.
 
Pittman's direct and inverse geodesic was later reviewed and extensively examined by academics "down under" earlier this year.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Tue 14-Oct-08 15:14
To: proj at lists.maptools.org
Subject: Re: [Proj] Distance calculation



On Tuesday 14 October 2008 4:04:48 pm Karl Swartz wrote:
> > Zhang Xue-Lian (1985) The nested coefficient method for accurate
> > solutions of direct and inverse geodetic problems with any length.
> > Proceedings of the 7th International Symposium on Geodetic
> > Computations,  Direct and inverse distance
> > functions.              Cracow, June 18-21, 1985. Institute of
> > Geodesy and Cartography. Wasaw, Poland, ul. Jasna 2/4 pp 747-763
> >
> > since it's more accurate than the classical method due to Gauss for
> > long distances.
>
> How does this compare to Thomas Vincenty's algorithm (which can be found
> at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?
>
>  -- Karl

I second the request as I considered it the gold standard and besides full
documentation and source code are available at NGS as well as online
computational services.

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081014/d976c20a/attachment.html>

From cjmce at lsu.edu  Tue Oct 14 13:28:17 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 14 Oct 2008 15:28:17 -0500
Subject: [Proj] Google maps of various flavors,
	and countries all overthe place.
References: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
	<48F4FFA2.2070008@pobox.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC248B@email002.lsu.edu>

Isn't what is being proposed a duplication of the EPSG database?
 
What would such a "compilation" offer that EPSG does not?
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Frank Warmerdam
Sent: Tue 14-Oct-08 15:22
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Google maps of various flavors, and countries all overthe place.



Roger Oberholtzer wrote:
> While on the subject of the tracs site, how about a page for each
> country where the various concerns of providing national coordinates can
> be discussed and documented? There is a wealth of information in all
> this e-mail that should not get lost. Perhaps a good start is a start
> page with all countries listed. Then, as needed, the country-specific
> pages can be developed? I can offer to help set that up. I await the
> consensus. I do know that these sorts of things start ok. And then they
> peter out. I have seen other sites that have similar information for
> proj4, and that has happened to them. But these sites are not really
> 'connected' to proj4. The trac site, however, is. So maybe it would fare
> better over time.


Roger,

I encourage you to start a listing of trac pages with hints and tips for
particular countries / national mapping systems, and then add pages off
that where applicable.  I would discourage starting with a list of many
countries where only a few have actual content as that discourages people
from digging through.

Keep in mind that some information belongs instead in the FAQ:

   http://trac.osgeo.org/proj/wiki/FAQ

and some information on general PROJ parameters belongs in:

   http://trac.osgeo.org/proj/wiki/GenParms

We also have the geotiff projection list which I hope will become part of
a more general MetaCRS resource which will apply to PROJ.4, proj4js, CS-Map
and other packages.

I would note that a "national info registry" that only ended up with 4-5
nations listed could still be pretty useful, so don't get hung up on whether
the material is comprehensive.  And part of the rationale for moving to Trac
for PROJ.4 was to encourage user community updates to the web site.  So just
dive in!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081014/1e9e6495/attachment.html>

From warmerdam at pobox.com  Tue Oct 14 14:04:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 14 Oct 2008 17:04:29 -0400
Subject: [Proj] Google maps of various flavors, and countries all overthe
	place.
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC248B@email002.lsu.edu>
References: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
	<48F4FFA2.2070008@pobox.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC248B@email002.lsu.edu>
Message-ID: <48F5095D.6060707@pobox.com>

Clifford J Mugnier wrote:
> Isn't what is being proposed a duplication of the EPSG database?
>  
> What would such a "compilation" offer that EPSG does not?

Cliff,

I imagine it would contain suggested PROJ.4 strings for national
coordinate systems (including some suggested towgs84 parameters
for datums).  The PROJ.4 strings are not a duplication of EPSG,
but it is true that the datum shift parameters might be.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From hamish_b at yahoo.com  Tue Oct 14 17:22:14 2008
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 14 Oct 2008 17:22:14 -0700 (PDT)
Subject: [Proj] Google maps of various flavors,
	and countries all over the place.
In-Reply-To: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
Message-ID: <428919.63125.qm@web110013.mail.gq1.yahoo.com>

Roger Oberholtzer wrote:
> I have been asked by a colleague about the possibility of providing  
> our data using coordinates that can be displayed over a google map. I  
> recall a short discussion about this a while back, but do not recall  
> if any potential method was discovered. I see on the proj4 trac site  
> that there is a reference in the context of a guess about google maps.
> 
> BTW, our data starts life as WGS85 from a Trimble receiver.
> So that  would be our starting point.

my understanding is that google uses mercator-on-sphere for their maps,
but user supplied point coords to their software should be in WGS84
lat/lon.

http://trac.osgeo.org/proj/wiki/FAQ#ChangingEllipsoidWhycantIconvertfromWGS84toVirtualEarthMercator


$ tail -n 4  /usr/share/proj/esri.extra 
#
#  Chris' funny epsgish code for the google mercator
#
<900913> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs <>



Hamish



      



From roger at opq.se  Wed Oct 15 01:22:18 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 15 Oct 2008 10:22:18 +0200
Subject: [Proj] Google maps of various flavors, and countries all
	overthe place.
In-Reply-To: <48F5095D.6060707@pobox.com>
References: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
	<48F4FFA2.2070008@pobox.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC248B@email002.lsu.edu>
	<48F5095D.6060707@pobox.com>
Message-ID: <1224058939.12696.20.camel@acme.pacific>

On Tue, 2008-10-14 at 17:04 -0400, Frank Warmerdam wrote:
> Clifford J Mugnier wrote:
> > Isn't what is being proposed a duplication of the EPSG database?
> >  
> > What would such a "compilation" offer that EPSG does not?
> 
> Cliff,
> 
> I imagine it would contain suggested PROJ.4 strings for national
> coordinate systems (including some suggested towgs84 parameters
> for datums).  The PROJ.4 strings are not a duplication of EPSG,
> but it is true that the datum shift parameters might be.

That is it in a nutshell. It is fine to have a database that describes
the proper values for parameters according to some 'standard'. But
getting it into the EXACT form required for a specific country, in
practice, and verified against some reference data set, is what I seem
to miss. This includes command line, as well as C API parameter
specifications. And, where possible, verification data. This is what I
am suggesting.

Also, the parameters suggested in the EPSG database are often not the
only ones used in a country. I would suggest that the tracs discussion
allows variations on the official parameters to be discussed. For
example, one odd government department may do things different from the
norm. Such is the way of things.

Perhaps part of the process should be that the tracs pages may
occassionally indicate a need for a change, addition or clarification in
the EPSG database. It would be nice to have a place where the reasoning
for such an alteration is kept.

JM2CW.

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction. 
It is like talking about large city with all constructions finished. 
Not impossible, but very unlikely.




From roger at opq.se  Wed Oct 15 01:52:32 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 15 Oct 2008 10:52:32 +0200
Subject: [Proj] Google maps of various flavors, and countries all
	overthe place.
In-Reply-To: <1224058939.12696.20.camel@acme.pacific>
References: <B00D8DF6-23D6-490E-9DF3-095041ED0C51@opq.se>
	<48F4FFA2.2070008@pobox.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC248B@email002.lsu.edu>
	<48F5095D.6060707@pobox.com> <1224058939.12696.20.camel@acme.pacific>
Message-ID: <1224060753.12696.24.camel@acme.pacific>

On Wed, 2008-10-15 at 10:22 +0200, Roger Oberholtzer wrote:
> On Tue, 2008-10-14 at 17:04 -0400, Frank Warmerdam wrote:
> > Clifford J Mugnier wrote:
> > > Isn't what is being proposed a duplication of the EPSG database?
> > >  
> > > What would such a "compilation" offer that EPSG does not?
> > 
> > Cliff,
> > 
> > I imagine it would contain suggested PROJ.4 strings for national
> > coordinate systems (including some suggested towgs84 parameters
> > for datums).  The PROJ.4 strings are not a duplication of EPSG,
> > but it is true that the datum shift parameters might be.
> 
> That is it in a nutshell. It is fine to have a database that describes
> the proper values for parameters according to some 'standard'. But
> getting it into the EXACT form required for a specific country, in
> practice, and verified against some reference data set, is what I seem
> to miss. This includes command line, as well as C API parameter
> specifications. And, where possible, verification data. This is what I
> am suggesting.

Also, read
http://trac.osgeo.org/proj/wiki/FAQ#HowdoIuseEPSGcoordinatesystemcodeswithPROJ.4

I experience this issue regularly and as a result do not use the codes.
I set all the parameter strings. Often starting with the strings in the
database, but seldom ending up the same when eventually working as
needed.

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction. 
It is like talking about large city with all constructions finished. 
Not impossible, but very unlikely.




From support.mn at elisanet.fi  Wed Oct 15 04:11:34 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 15 Oct 2008 14:11:34 +0300 (EEST)
Subject: [Proj] Distance calculation
Message-ID: <14562372.1259221224069094469.JavaMail.support.mn@elisanet.fi>

Hello,

There is a windows program that can calculate distances on a sphere.
You enter two point coordinates and get the distance in meters (also
the course at the first point). The program assumes that the earth is
a sphere with a circumference of 360 x 60 x nm

where nm = 1852.000000 m (one nauticle mile)

It can be downloaded here

http://www.elisanet.fi/master.navigator/xCalc/

It is free and can also calculate other expressions and functions.

It is very close to truth on small distances wher the flattening of the
earth does not start to affect the calculations too much. Remember,
there is no straight line on a sphere.

Regards: Janne.



From jrepetto at free.fr  Wed Oct 15 04:32:05 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 15 Oct 2008 13:32:05 +0200
Subject: [Proj] Distance calculation
In-Reply-To: <14562372.1259221224069094469.JavaMail.support.mn@elisanet.fi>
References: <14562372.1259221224069094469.JavaMail.support.mn@elisanet.fi>
Message-ID: <48F5D4B5.8010002@free.fr>

support.mn at elisanet.fi a écrit :
>
> There is a windows program that can calculate distances on a sphere.
> It can be downloaded here
> http://www.elisanet.fi/master.navigator/xCalc/
> 
> It is free and can also calculate other expressions and functions.

It is not free :
- There is a button "Order now"
- I couldn't find the source code



From pbander at cavtel.net  Wed Oct 15 05:06:39 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Wed, 15 Oct 2008 08:06:39 -0400
Subject: [Proj] Distance calculation
In-Reply-To: <20081014200448.GA72616@orion.kls2.com>
References: <200810141600.m9EG0SEm004427@duke.maptools.org>
	<200810141836.m9EIaEk7021819@smtp-auth.uni-koeln.de>
	<20081014200448.GA72616@orion.kls2.com>
Message-ID: <22d795600810150506y245a5e4eo7f630b16314095e1@mail.gmail.com>

- Hi Everyone,

Not exactly on topic, but, I thought I would toss this out as another
distance calculation resource.

In the early 1990s I worked as a Visual Basic programmer for a government
contractor on a Pentagon War Gaming contract. My task was to develop a
'digital' sand table. One of the capabilities I was asked to put into the
program was the ability to measure distances between two points. Sol Katz
pointed me toward the 'Aviation Formulary' [
http://williams.best.vwh.net/avform.htm ] when I asked him for help. The
formulas there may not have the accuracy you are discussing, but they worked
well for the application I developed.

Take Care,
Paul

Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA
My Map Projection web site:
http://www.csiss.org/map-projections/index.html

On Tue, Oct 14, 2008 at 4:04 PM, Karl Swartz <karl at kls2.com> wrote:

> > Zhang Xue-Lian (1985) The nested coefficient method for accurate
> > solutions of direct and inverse geodetic problems with any length.
> > Proceedings of the 7th International Symposium on Geodetic
> > Computations,  Direct and inverse distance
> > functions.              Cracow, June 18-21, 1985. Institute of
> > Geodesy and Cartography. Wasaw, Poland, ul. Jasna 2/4 pp 747-763
> >
> > since it's more accurate than the classical method due to Gauss for
> > long distances.
>
> How does this compare to Thomas Vincenty's algorithm (which can be found
> at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?
>
>  -- Karl
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081015/d75164ea/attachment.html>

From al001 at uni-koeln.de  Wed Oct 15 06:10:25 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Wed, 15 Oct 2008 15:10:25 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <200810141930.m9EJUalX011506@duke.maptools.org>
References: <200810141930.m9EJUalX011506@duke.maptools.org>
Message-ID: <200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>

Karl Swartz wrote:

How does this compare to Thomas Vincenty's algorithm (which can be found
at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?

and Gerald Evenden wrote:

I second the request as I considered it the gold standard and besides full
documentation and source code are available at NGS as well as online
computational services.

An on-line source with a derivation of the Zhang Xue-Lian distance 
calculations can be found in

http://kom.aau.dk/~borre/masters/frames/notes.pdf

pages 18 ff.

I have not found  on-line sources for the Pittman paper or critiques 
noted by Cliff Mugnier.

It would indeed be helpful if the three methods can be compared for accuracy.

Irwin Scollar



From dagnew at ucsd.edu  Wed Oct 15 09:40:39 2008
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Wed, 15 Oct 2008 09:40:39 -0700
Subject: [Proj] Distance calculations
In-Reply-To: <200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
References: <200810141930.m9EJUalX011506@duke.maptools.org>
	<200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
Message-ID: <a742ef28fac218c124d5b2c9059d2c47@ucsd.edu>

The "down-under" paper that Cliff Mugnier refers to is available at

http://www.cage.curtin.edu.au/~will/thomas-featherstone.pdf

(At least I assume this is the one). The abstract states:

Vincenty’s (1975) formulas for the direct and inverse geodetic problems 
(i.e., in relation to the geodesic) have been verified by comparing 
them with a new formula developed by adapting a fourth-order 
Runge-Kutta scheme for the numerical solution of ordinary differential 
equations, advancing the work presented by Kivioja in 1971. A total of 
3,801 lines of varying distances 10 to 18,000 km and azimuths (0 to 
90°, because of symmetry) were used to compare these two very different 
techniques for computing geodesics. In every case, the geodesic 
distances agreed to within 0.115 mm, and the forward and reverse 
azimuths agreed to within 5 microarcsec, thus verifying Vincenty’s 
formula.

They reference Pittman but don't make any comparisons with his work. 
The reference for that work is

Pittman, M. E. (1986). Precision direct and inverse solutions of the
geodesic, Surveying and Mapping 46(1), 47-54.

(which I wish Cliff Mugnier had cited) and for Kivioja is

Kivioja, L. A. (1971). Computation of geodetic direct and indirect prob-
lems by computers accumulating increments from geodetic line elements.
Bull. Geod. 99, 55-63.

This result would seem to settle the question for all practical (and 
impractical) purposes, though a further comparison might be warranted.





From support.mn at elisanet.fi  Wed Oct 15 10:26:49 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 15 Oct 2008 20:26:49 +0300 (EEST)
Subject: [Proj] Distance calculation
Message-ID: <13193108.4222231224091610003.JavaMail.support.mn@elisanet.fi>

Jean-Claude Repetto <jrepetto at free.fr> kirjoitti: 
> support.mn at elisanet.fi a écrit :
> >
> > There is a windows program that can calculate distances on a sphere.
> > It can be downloaded here
> > http://www.elisanet.fi/master.navigator/xCalc/
> > 
> > It is free and can also calculate other expressions and functions.
> 
> It is not free :

It is practically free. After a while it asks you to order, but there is
the "Later" button. You can cointinue to push "Later" for ever and
it does not stop to calculate.

> - I couldn't find the source code

Source code is not free. The executable is.

Regards: Janne.




From bartvde at osgis.nl  Wed Oct 15 11:09:26 2008
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed, 15 Oct 2008 20:09:26 +0200
Subject: [Proj] EPSG:28992 to EPSG:23031 conversion
In-Reply-To: <48F4D606.5070309@free.fr>
References: <48ECDCE2.6070609@osgis.nl>	<Pine.LNX.4.62.0810082226530.5984@vortex.ukshells.co.uk>	<FAF6E56B26D2044696772EBE89B15351013148BE@posty.carmenta.se>	<20081011121845.GC22531@42.dk>
	<48F4D606.5070309@free.fr>
Message-ID: <48F631D6.5040302@osgis.nl>

Thanks for all the great replies on this thread!

Best regards,
Bart


From cjmce at lsu.edu  Wed Oct 15 11:35:12 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 15 Oct 2008 13:35:12 -0500
Subject: [Proj] Distance calculations
References: <200810141930.m9EJUalX011506@duke.maptools.org><200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
	<a742ef28fac218c124d5b2c9059d2c47@ucsd.edu>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2492@email002.lsu.edu>

The "down-under" paper I was referring to is:
 
Geodesics on an Ellipsoid, 
by R.E.Deakin and M.N.Hunter, 
School of Mathematical and Geospatial Sciences, 
RMIT University, 
GPO Box 2476V, 
Melbourne, VIC 3001.
 
Cliff Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Duncan Agnew
Sent: Wed 15-Oct-08 11:40
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Distance calculations



The "down-under" paper that Cliff Mugnier refers to is available at

http://www.cage.curtin.edu.au/~will/thomas-featherstone.pdf

(At least I assume this is the one). The abstract states:

Vincenty's (1975) formulas for the direct and inverse geodetic problems
(i.e., in relation to the geodesic) have been verified by comparing
them with a new formula developed by adapting a fourth-order
Runge-Kutta scheme for the numerical solution of ordinary differential
equations, advancing the work presented by Kivioja in 1971. A total of
3,801 lines of varying distances 10 to 18,000 km and azimuths (0 to
90°, because of symmetry) were used to compare these two very different
techniques for computing geodesics. In every case, the geodesic
distances agreed to within 0.115 mm, and the forward and reverse
azimuths agreed to within 5 microarcsec, thus verifying Vincenty's
formula.

They reference Pittman but don't make any comparisons with his work.
The reference for that work is

Pittman, M. E. (1986). Precision direct and inverse solutions of the
geodesic, Surveying and Mapping 46(1), 47-54.

(which I wish Cliff Mugnier had cited) and for Kivioja is

Kivioja, L. A. (1971). Computation of geodetic direct and indirect prob-
lems by computers accumulating increments from geodetic line elements.
Bull. Geod. 99, 55-63.

This result would seem to settle the question for all practical (and
impractical) purposes, though a further comparison might be warranted.



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081015/39a473c1/attachment.html>

From hamish_b at yahoo.com  Wed Oct 15 19:30:50 2008
From: hamish_b at yahoo.com (Hamish)
Date: Wed, 15 Oct 2008 19:30:50 -0700 (PDT)
Subject: [Proj] Distance calculation
In-Reply-To: <13193108.4222231224091610003.JavaMail.support.mn@elisanet.fi>
Message-ID: <884039.33726.qm@web110014.mail.gq1.yahoo.com>

support.mn at elisanet.fi a écrit:
> > > There is a windows program that can calculate distances on a sphere.
> > > It can be downloaded here
> > > http://www.elisanet.fi/master.navigator/xCalc/
> > > 
> > > It is free and can also calculate other expressions and functions.

Jean-Claude Repetto kirjoitti: 
> > It is not free :

lisanet.fi writes:
> It is practically free. After a while it asks you to order,
> but there is the "Later" button. You can cointinue to push
> "Later" for ever and it does not stop to calculate.

cue libre vs. gratis "debate". I will try to short circuit that with
two lines of code and a small png image...


> > - I couldn't find the source code
> 
> Source code is not free. The executable is.

great circle distance calcs on a sphere is no problem -- I've attached
a small Matlab (or GNU/Octave...) script that I wrote some time ago which
does that (formula gleaned from MathWorld). Adjust +a to taste.


I was more concerned with distance along the WGS84 ellipsoid; a big thanks
to all for the interesting tips & references in that regard.


regards,
Hamish



      
-------------- next part --------------
A non-text attachment was scrubbed...
Name: great_circle_distance.png
Type: image/png
Size: 3335 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081015/6999a331/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gcircle_fn.m
Type: application/octet-stream
Size: 1274 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081015/6999a331/attachment.obj>

From ovv at hetnet.nl  Thu Oct 16 00:07:13 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 16 Oct 2008 09:07:13 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
References: <200810141930.m9EJUalX011506@duke.maptools.org>
	<200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
Message-ID: <2CDC7A0DE79146F7A057E151BF708CC8@PCHP>

Let's throw in Saito.
He investigated this matter rather thoroughly in two papers. Sadly his first 
paper contains subtle but serious errors, but his second paper is nearly a 
dream. He sets up the integrals leading to distance and azimuth of the 
geodesic and he solves them with Gaussian quadrature. This can be done with 
nearly arbitrary precision. However, he gives several procedures - 
especially in his first paper - to get more accuracy in difficult regions if 
you've got only a handful of bits computer precision, like IEEE 754.

Tsutomu Saito, The computation of long geodesics on the ellipsoid through 
Gaussian quadrature, Bull. Geod. 53 (1979), pp. 165-177

First paper: The computation of long geodesics on the ellipsoid by 
non-series expanding procedure, Journal of geodesy, vol. 44, no. 4, Dec. 
1970.

Sadly, these papers are not on-line for free.
Somebody has put a probably not legal copy on an educational web site. Let's 
not publish the url...

Oscar van Vlijmen


----- Original Message ----- 
From: "Irwin Scollar" <al001 at uni-koeln.de>
To: <proj at lists.maptools.org>
Sent: Wednesday, October 15, 2008 3:10 PM
Subject: [Proj] Distance calculations


> Karl Swartz wrote:
>
> How does this compare to Thomas Vincenty's algorithm (which can be found
> at http://www.ngs.noaa.gov/PUBS_LIB/inverse.pdf)?
>
> and Gerald Evenden wrote:
>
> I second the request as I considered it the gold standard and besides full
> documentation and source code are available at NGS as well as online
> computational services.
>
> An on-line source with a derivation of the Zhang Xue-Lian distance 
> calculations can be found in
>
> http://kom.aau.dk/~borre/masters/frames/notes.pdf
>
> pages 18 ff.
>
> I have not found  on-line sources for the Pittman paper or critiques noted 
> by Cliff Mugnier.
>
> It would indeed be helpful if the three methods can be compared for 
> accuracy.
>
> Irwin Scollar
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




From jrepetto at free.fr  Thu Oct 16 07:04:48 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 16 Oct 2008 16:04:48 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
References: <200810141930.m9EJUalX011506@duke.maptools.org>
	<200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
Message-ID: <48F74A00.8070201@free.fr>

What do you think about the formulas and code source published on this 
page :
<http://www.codeguru.com/Cpp/Cpp/algorithms/article.php/c5115/> ?


From ovv at hetnet.nl  Thu Oct 16 08:29:27 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 16 Oct 2008 17:29:27 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <48F74A00.8070201@free.fr>
References: <200810141930.m9EJUalX011506@duke.maptools.org><200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
	<48F74A00.8070201@free.fr>
Message-ID: <84E439666C564C40AB1183EC61FA34FB@PCHP>

What do I think?
His numerical integration method is way too simple to be practical and he 
doesn't address all difficulties like the correct azimuth quadrant and 
problems with numerical precision of transcendental functions.
For all geodetic purposes the Vincenty method has proved to be accurate 
enough and very efficient.
Note that although a _good_ numerical method can give near arbitrary 
precision for the geodesic, the actual earth' dimensions are not known with 
greater accuracy than some centimeters, even if a tidal-free model is 
assumed.

Oscar van Vlijmen


----- Original Message ----- 
From: "Jean-Claude Repetto" <jrepetto at free.fr>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Thursday, October 16, 2008 4:04 PM
Subject: Re: [Proj] Distance calculations


> What do you think about the formulas and code source published on this 
> page :
> <http://www.codeguru.com/Cpp/Cpp/algorithms/article.php/c5115/> ?
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




From Chris.Barker at noaa.gov  Thu Oct 16 09:04:30 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu, 16 Oct 2008 09:04:30 -0700
Subject: [Proj] Distance calculations
In-Reply-To: <2CDC7A0DE79146F7A057E151BF708CC8@PCHP>
References: <200810141930.m9EJUalX011506@duke.maptools.org>
	<200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de>
	<2CDC7A0DE79146F7A057E151BF708CC8@PCHP>
Message-ID: <48F7660E.60602@noaa.gov>

I've got a question:

I understand how these issues can be academically interesting, but is 
there any practical difference?

Surely the ellipsoidal model of the earth is an approximation anyway -- 
how accurate is it, and are the difference between the various 
algorithms under discussion really larger than the error inherent in the 
ellipsoidal approximation?

Just wondering, it's the engineer in me.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From strebe at aol.com  Thu Oct 16 11:24:29 2008
From: strebe at aol.com (strebe at aol.com)
Date: Thu, 16 Oct 2008 14:24:29 -0400
Subject: [Proj] Re: Distance calculations
In-Reply-To: <48F7660E.60602@noaa.gov>
References: <200810141930.m9EJUalX011506@duke.maptools.org><200810151310.m9FDAUxV027411@smtp-auth.uni-koeln.de><2CDC7A0DE79146F7A057E151BF708CC8@PCHP>
	<48F7660E.60602@noaa.gov>
Message-ID: <8CAFDD390404BF7-17D8-E61@WEBMAIL-DC16.sysops.aol.com>


 
In solving the second problem of geodesy (= the inverse problem = geodesic segment length and azimuth given two points) in the most general cases, one must determine whether the two endpoints straddle a "node" or not. (A node is the highest or lowest latitude a complete geodesic reaches along its travel.) Whether it straddles a node or nodes determines how one sets up the limits of integration (and indeed how many instances of the integral come into play.) Since you have no information about the geodesic a priori, this can be quite difficult. Computations of elliptic integrals of the third kind also come into play, and, in the general case, these can be problematic. Bulirsch's algorithm, for example, does not come with the same accuracy guarantees of his solutions for elliptic integrals of the first and second kinds, and is known to deteriorate with certain ranges of parameters.

Helmert formulated an iterative solution to the second problem which, as far as I know, is the basis of all published solutions. In pursuit of computational efficiency, the published solutions truncate series, rearrange terms, fold together steps, and otherwise cut corners. In the absence of rigorous analysis, there is no guarantee that these operations were even correctly formulated, let alone that they carry "sufficient" accuracy. Since benchmarks are so few and come themselves with unknown errors, the question of accuracy is hardly just academic.

Lastly, one question I've never seen addressed is the suitability and accuracy of any of these methods for spheroids that are not earthlike. If we have not a single published solution to the second problem that we can apply to ellipsoids of (relatively) high eccentricity, are we not restricted in planetary research?



 Regards,
-- daan Strebe



 

-----Original Message-----
From: Christopher Barker <Chris.Barker at noaa.gov>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Sent: Thu, 16 Oct 2008 9:04 am
Subject: Re: [Proj] Distance calculations









I've got a question:?
?

I understand how these issues can be academically interesting, but is 
there any practical difference??
?

Surely the ellipsoidal model of the earth is an approximation anyway -- 
how accurate is it, and are the difference between the various 
algorithms under discussion really larger than the error inherent in the 
ellipsoidal approximation??
?

Just wondering, it's the engineer in me.?
?

-Chris?
?


-- 
Christopher Barker, Ph.D.?

Oceanographer?
?

Emergency Response Division?

NOAA/NOS/OR&R            (206) 526-6959   voice?

7600 Sand Point Way NE   (206) 526-6329   fax?

Seattle, WA  98115       (206) 526-6317   main reception?
?

Chris.Barker at noaa.gov?

_______________________________________________?

Proj mailing list?

Proj at lists.maptools.org?

http://lists.maptools.org/mailman/listinfo/proj?



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081016/241132f9/attachment.html>

From hamish_b at yahoo.com  Fri Oct 17 02:08:01 2008
From: hamish_b at yahoo.com (Hamish)
Date: Fri, 17 Oct 2008 02:08:01 -0700 (PDT)
Subject: [Proj] Distance calculations
In-Reply-To: <2CDC7A0DE79146F7A057E151BF708CC8@PCHP>
Message-ID: <238757.85305.qm@web110011.mail.gq1.yahoo.com>

OvV_HN wrote:
> Let's throw in Saito.
....
> Tsutomu Saito, The computation of long geodesics on the ellipsoid through 
> Gaussian quadrature, Bull. Geod. 53 (1979), pp. 165-177


As long as we are throwing things in, I might as well point to the code
that GRASS is currently using:

http://trac.osgeo.org/grass/browser/grass/trunk/lib/gis/geodist.c
http://trac.osgeo.org/grass/browser/grass/trunk/lib/gis/geodesic.c

 Distance from point to point along a geodesic code from Paul
 D. Thomas, 1970 "Spheroidal Geodesics, Reference Systems, and
 Local Geometry" U.S. Naval Oceanographic Office, p. 162
 Engineering Library 526.3 T36s
http://stinet.dtic.mil/oai/oai?&verb=getRecord&metadataPrefix=html&identifier=AD0703541


at least that one is easy to test :)
https://trac.osgeo.org/grass/browser/grass/trunk/swig/python/examples/m.distance


I am wondering if someone did set up a horse race between all these
various solutions, what would be the criteria to judge them on?
-computational time and difference from the "gold standard"?


Hamish


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 



From al001 at uni-koeln.de  Fri Oct 17 12:34:13 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Fri, 17 Oct 2008 21:34:13 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <200810171602.m9HG2RXu026072@duke.maptools.org>
References: <200810171602.m9HG2RXu026072@duke.maptools.org>
Message-ID: <200810171934.m9HJYEGB018745@smtp-auth.uni-koeln.de>

Oscar van Vlijmen wrote with respect to:

Tsutomu Saito, The computation of long geodesics on the ellipsoid through
Gaussian quadrature, Bull. Geod. 53 (1979), pp. 165-177

Sadly, these papers are not on-line for free.

I have a scanned copy of Saito 1979 in PDF 
format.  If anyone wants one, just ask off-line.

Although Bessel-Helmert is the basis for most 
things we have been discussing, implementations 
differ considerably and hence questions of 
numerical accuracy and speed enter.

The Borre reference I cited in an earlier reply 
has a matlab version called bessel_1.m which can 
be downloaded from Borre's web site.or as 
http://read.pudn.com/downloads85/sourcecode/comm/326312/BESSEL_2.M__.htm

There is also a fairly short method due to 
Sjöberg:  Sjöberg LE (2006) Direct solutions to 
the direct and indirect geodetic
problems on the ellipsoid. Zeitschrift f 
Vermessungswesen 131:3539 which may be of more than academic interest.

Irwin Scollar







From al001 at uni-koeln.de  Sat Oct 18 01:46:16 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Sat, 18 Oct 2008 10:46:16 +0200
Subject: [Proj] Distance calculations
Message-ID: <200810180847.m9I8lDmK017931@smtp-auth.uni-koeln.de>

The Zhang Xue-Lian method of distance calculation was implemented in 
C in the NIMA/MUSE DTCC4 program for the forward and inverse cases as 
distazm.h and distazm.c.  I converted the inverse implementation to 
Pascal for use in a dll which is freely available

The DTCC4 suite and the web links are no longer available. If anyone 
needs help with this, please ask off-line.

Irwin Scollar





From geraldi.evenden at gmail.com  Sat Oct 18 08:48:39 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 18 Oct 2008 11:48:39 -0400
Subject: [Proj] Troubles with Newton-Raphson inverse projections
Message-ID: <200810181148.39662.geraldi.evenden@gmail.com>

I finished the basics of the Newton-Raphson general inverse projection method 
(as described in the Turkish paper) about a week ago.

One additional problem with the Turkish paper is that they understated the 
problem of making an appropriate initial estimation of the lon/lat solution.  
If the estimate is sufficiently poor, the looping process can follow the 
wrong path to a solution or simply fail to converge.  Also, the poorer the 
estimation, more loops are required to converge to a solution.  At the moment 
I am pursuing developing a low degree polynomial estimation function which 
will hopefully improve the initial estimate process. 

Secondly, finding the root may also be difficult when the precision of the 
derivatives start to fail.  This is the case near the poles of both the 
Hammer and Aitoff projections.  At a latitude greater than 89° the method 
fails for both these projections.  One also gets suspicious that this will 
occur when the nature of the curve flattens out like the top of a sine curve.  
I have not tried the flat pole Winkel Triplel yet.

This is just an alert to the readership that the Turkish method *is not* a 
cureall for determining the inverse projection.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From warmerdam at pobox.com  Sat Oct 18 10:07:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 18 Oct 2008 13:07:40 -0400
Subject: [Proj] Migrated CVS to Subversion
Message-ID: <48FA17DC.1050001@pobox.com>

Folks,

I have migrated the CVS repository contents for PROJ.4 from Maptools to
a subversion server at OSGeo. The new source control location is:

   http://svn.osgeo.org/metacrs/proj

Let me know if anyone sees anything screwed up in the transition.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ovv at hetnet.nl  Sat Oct 18 10:49:59 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 18 Oct 2008 19:49:59 +0200
Subject: [Proj] Distance calculations
Message-ID: <6ED6B4AA4E0F44C1988BAA1E33E578F4@PCHP>

This method is still used in Simgear.
http://www.simgear.org/doxygen/sg__geodesy_8cxx-source.html
Is there any significant difference with the Vincenty method?

Oscar van Vlijmen

> ----- Original Message ----- 
> From: "Irwin Scollar" <al001 at uni-koeln.de>
> To: <proj at lists.maptools.org>
> Sent: Saturday, October 18, 2008 10:46 AM
> Subject: [Proj] Distance calculations
> 
> 
>> The Zhang Xue-Lian method of distance calculation was implemented in 
>> C in the NIMA/MUSE DTCC4 program for the forward and inverse cases as 
>> distazm.h and distazm.c.  I converted the inverse implementation to 
>> Pascal for use in a dll which is freely available
> .......
>



From ovv at hetnet.nl  Sat Oct 18 11:10:18 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 18 Oct 2008 20:10:18 +0200
Subject: [Proj] Troubles with Newton-Raphson inverse projections
In-Reply-To: <200810181148.39662.geraldi.evenden@gmail.com>
References: <200810181148.39662.geraldi.evenden@gmail.com>
Message-ID: <DDEBDBED182147C89280F2FFEB3E6FA3@PCHP>

Some time ago I programmed the inverse of the Winkel-Tripel according to the
Turkish paper.
I found no serious difficulties apart from the following.
The lat_0 must be smaller than for instance 80d absolute and larger than say
1e-6 deg.
In these circumstances the maximum number of iterations in the inverse
should be smaller than 150 or so.
If a larger value of lat_0 must be used: in one test I came up with 579 
iterations at a
lat_0 of 89.9d.
For even larger values, the correct value of the longitude could not be
obtained from the x, y.
I tested some values with lat(itude) running from -89.99 to +89.99 d.
Note that the Winkel-Tripel works with a fixed value of lat_0 = 50d28m, so 
difficulties with lat_0 at extreme latitudes could be ignored.

It is possible that Aitoff and Hammer will pose more difficulties, I dunno,
merely used the algorithm for inverse Winkel-Tripel.

Oscar van Vlijmen




----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, October 18, 2008 5:48 PM
Subject: [Proj] Troubles with Newton-Raphson inverse projections


>I finished the basics of the Newton-Raphson general inverse projection
>method
> (as described in the Turkish paper) about a week ago.
>
> One additional problem with the Turkish paper is that they understated the
> problem of making an appropriate initial estimation of the lon/lat
> solution.
> If the estimate is sufficiently poor, the looping process can follow the
> wrong path to a solution or simply fail to converge.  Also, the poorer the
> estimation, more loops are required to converge to a solution.  At the
> moment
> I am pursuing developing a low degree polynomial estimation function which
> will hopefully improve the initial estimate process.
>
> Secondly, finding the root may also be difficult when the precision of the
> derivatives start to fail.  This is the case near the poles of both the
> Hammer and Aitoff projections.  At a latitude greater than 89° the method
> fails for both these projections.  One also gets suspicious that this will
> occur when the nature of the curve flattens out like the top of a sine
> curve.
> I have not tried the flat pole Winkel Triplel yet.
>
> This is just an alert to the readership that the Turkish method *is not* a
> cureall for determining the inverse projection.

>




From geraldi.evenden at gmail.com  Sat Oct 18 12:17:57 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 18 Oct 2008 15:17:57 -0400
Subject: [Proj] Troubles with Newton-Raphson inverse projections
In-Reply-To: <DDEBDBED182147C89280F2FFEB3E6FA3@PCHP>
References: <200810181148.39662.geraldi.evenden@gmail.com>
	<DDEBDBED182147C89280F2FFEB3E6FA3@PCHP>
Message-ID: <200810181517.57380.geraldi.evenden@gmail.com>

On Saturday 18 October 2008 2:10:18 pm OvV_HN wrote:
> Some time ago I programmed the inverse of the Winkel-Tripel according to
> the Turkish paper.
> I found no serious difficulties apart from the following.
> The lat_0 must be smaller than for instance 80d absolute and larger than
> say 1e-6 deg.
> In these circumstances the maximum number of iterations in the inverse
> should be smaller than 150 or so.
> If a larger value of lat_0 must be used: in one test I came up with 579
> iterations at a
> lat_0 of 89.9d.

LOL, wow!!  I cutoff at 10 iterations and running at a moderately loose 
tolerance of 10^-8 radians.

> For even larger values, the correct value of the longitude could not be
> obtained from the x, y.

With limited adjustment of the initial estimates I can go out to 180 lon.
But as lat increases so do the problems.

> I tested some values with lat(itude) running from -89.99 to +89.99 d.
> Note that the Winkel-Tripel works with a fixed value of lat_0 = 50d28m, so
> difficulties with lat_0 at extreme latitudes could be ignored.
>
> It is possible that Aitoff and Hammer will pose more difficulties, I dunno,
> merely used the algorithm for inverse Winkel-Tripel.

Just visual examination suggests that Winkel Tripel should have fewer 
problems.  But I'm going to bash the tough ones first.

> Oscar van Vlijmen
>
	...
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sat Oct 18 22:25:43 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 19 Oct 2008 08:25:43 +0300 (EEST)
Subject: [Proj] Troubles with Newton-Raphson inverse projections
Message-ID: <312427.16041224393943699.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
>
> Secondly, finding the root may also be difficult when the precision of the 
> derivatives start to fail.  This is the case near the poles of both the 
> Hammer and Aitoff projections.  At a latitude greater than 89° the method 
> fails for both these projections.  One also gets suspicious that this will 
> occur when the nature of the curve flattens out like the top of a sine curve.  
> I have not tried the flat pole Winkel Triplel yet.
> 

Can't you just switch the method near poles? Something like:

if (lat > 88) use_special_derivatives();
else use_normal_derivatives();

And figure out from the formulas (code) what is causing the problem near poles
and then eliminate that by using something that is more efficient near poles.

Regards: Janne.




From ovv at hetnet.nl  Sun Oct 19 00:48:28 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sun, 19 Oct 2008 09:48:28 +0200
Subject: [Proj] Troubles with Newton-Raphson inverse projections
In-Reply-To: <200810181517.57380.geraldi.evenden@gmail.com>
References: <200810181148.39662.geraldi.evenden@gmail.com><DDEBDBED182147C89280F2FFEB3E6FA3@PCHP>
	<200810181517.57380.geraldi.evenden@gmail.com>
Message-ID: <D192C0474A214065A77AC2225E2FA8B8@PCHP>

One shouldn't laugh too soon.
With Winkel-Tripel on a sphere with a radius, equal to the major axis of the 
WGS84 ellipsoid, I got the following results.

Starting with: lat = 0.1 deg;  lon = 14 deg (east); lat_0 = 89.9 deg;
Full round trip forward - inverse needed 286 iterations to get lat/lon back 
within an error of 1e-8 in the iteration loop. The loop needed 579 
iterations for an error of 1e-14.
So it really needed that lot of iterations.

Two things are rather stupid though.
1) How silly is this type of projection with a lat_0 near the pole, being 
interested in locations near the equator? Locations near the equator are not 
extremely silly, because the Winkel-Tripel will be probably used for 
thematic maps of the whole world. But a lat_0 near the pole is a bit 
strange.

2) The Newton-Raphson method fails miserably in the known mathematical 
areas. We've already seen this happening in the Transverse Mercator 
projection, performed with complex elliptic functions, and near the 
mathematical boundaries.
One should use another method in the difficult areas or restrict or warn the 
user for these areas.

Oscar van Vlijmen


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, October 18, 2008 9:17 PM
Subject: Re: [Proj] Troubles with Newton-Raphson inverse projections


> On Saturday 18 October 2008 2:10:18 pm OvV_HN wrote:
>> Some time ago I programmed the inverse of the Winkel-Tripel according to
>> the Turkish paper.
>> I found no serious difficulties apart from the following.
>> The lat_0 must be smaller than for instance 80d absolute and larger than
>> say 1e-6 deg.
>> In these circumstances the maximum number of iterations in the inverse
>> should be smaller than 150 or so.
>> If a larger value of lat_0 must be used: in one test I came up with 579
>> iterations at a
>> lat_0 of 89.9d.
>
> LOL, wow!!  I cutoff at 10 iterations and running at a moderately loose
> tolerance of 10^-8 radians.
....






From ovv at hetnet.nl  Sun Oct 19 04:46:20 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sun, 19 Oct 2008 13:46:20 +0200
Subject: [Proj] Distance calculations
In-Reply-To: <200810180847.m9I8lDmK017931@smtp-auth.uni-koeln.de>
References: <200810180847.m9I8lDmK017931@smtp-auth.uni-koeln.de>
Message-ID: <427CBB06170D45D48D3B7258606E849C@PCHP>


----- Original Message ----- 
From: "Irwin Scollar" <al001 at uni-koeln.de>
To: <proj at lists.maptools.org>
Sent: Saturday, October 18, 2008 10:46 AM
Subject: [Proj] Distance calculations


> The Zhang Xue-Lian method of distance calculation was implemented in C in 
> the NIMA/MUSE DTCC4 program for the forward and inverse cases as distazm.h 
> and distazm.c.  I converted the inverse implementation to Pascal for use 
> in a dll which is freely available
>
> The DTCC4 suite and the web links are no longer available. If anyone needs 
> help with this, please ask off-line.
>
> Irwin Scollar

Recently I obtained a copy of the DTCC4 code from mr. Scollar (thanks!).
I compared the inverse (this is from two lat/lons to dist/azi) with the NGS 
Vincenty version and the Saito 1979 examples.
References:
* NGS Vincenty: http://www.ngs.noaa.gov/PC_PROD/Inv_Fwd/
* Saito 1979: Tsutomu Saito, The computation of long geodesics on the 
ellipsoid through
Gaussian quadrature, Bull. Geod. 53 (1979), pp. 165-177
* DTCC4 ask Irwin Scollar

Superficially the DTCC4 method looks the same as the Simgear method, 
mentioned earlier 
(http://www.simgear.org/doxygen/sg__geodesy_8cxx-source.html).

There are hardly any differences in the results from the DTCC4 method or the 
Vincenty method. As long as the lat/lons do not lie in difficult regions.
In difficult regions (see for instance the Saito paper, Examples 7,8,9) the 
DTCC4 code does not always converge and is pretty useless.
The Vincenty method gives a distance which is off, and completely wrong 
azimuths.
For the difficult regions Saito gives separate algorithms. The 'regular' 
code is excellent, but the 'special' algorithms seem to suffer from errors 
in the paper - for instance perhaps the sin(sigma) for beta1.beta2>0, on 
page 173.

How silly are the 'difficult regions'? See for yourself.
For instance, Saito Example 7:

Ellipsoid: axis_a = 6378388 m; flattening = 1/297;
lat1 = 30d 19m 54.95367s; lon1 = 0;
lat2 = -30d 11m 50.15681s; lon2 = 179d 58m 17.84244s;
Saito paper: dist = 19989590.5480 m, azi1 = 2d 23m 52.108130s, azi2 = 177d 
36m 19.670109s
-> DTCC4 geo_inverse: no convergence
-> Vincenty NGS:
dist = 19934085.484195, azi1 = 288d 06m 04.5934s, azi2 = 71d 39m 40.3207s

Oscar van Vlijmen






From geraldi.evenden at gmail.com  Sun Oct 19 07:47:09 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 19 Oct 2008 10:47:09 -0400
Subject: [Proj] Additional up coming mods to libproj4
Message-ID: <200810191047.09333.geraldi.evenden@gmail.com>

Besides the inverse material for some projections I took a couple of minutes 
to add the proj_initstr(chr *) entry to the library as an alternative to 
proj_init(int, char **);  In addition, each string field of the later entry 
may have multiple white-space separated projection options in the string.  
The net result of this is that one can use lproj in the following manner:

lproj "+proj=poly ellps=intl lon_0=90w" +lat_0=40 infile

where the ellps= and lon_0= options are processed properly along with proj= 
and lat_0=.  Remember that the "+" part of the options is only necessary for 
[l]proj to identify the runline parameter as a libproj option and not a 
filename.

For those who use the library directly:

P=proj_initstr("proj=poly ellps=intl lon_0=90w lat_0=40");

may be used as an alternative to proj_init and is processed the same as the 
lproj example.

I believe that Warmerdam has done something similar with his value added 
releases.

The change is simple as the rcsdiff listing of proj_init.c shows: (note: there 
is the prototype

PROJ *proj_initstr(char *);

added to lib_proj.h)

7c7
< LIBPROJ_ID[] = "$Id: proj_init.c,v 3.1 2006/01/11 01:38:18 gie Exp $";
---
> LIBPROJ_ID[] = "$Id: proj_init.c,v 3.2 2008/10/19 02:33:51 gie Exp $";
37c37
< proj_init(int argc, char **argv) {
---
> proj_init(int argc, char *argv[]) {
41c41
< 	int i;
---
> 	int i, first = 1;
47,51c47,55
< 	for (i = 0; i < argc; ++i)
< 		if (i)
< 			curr = curr->next = proj_mkparam(argv[i]);
< 		else
< 			start = curr = proj_mkparam(argv[i]);
---
> 	for (i = 0; i < argc; ++i) {
> 		char *ss;
> 		for (ss = argv[i]; (ss = strtok(ss, " \t")) != NULL; ss = NULL)
> 			if (first) {
> 				start = curr = proj_mkparam(ss);
> 				first = 0;
> 			} else
> 				curr = curr->next = proj_mkparam(ss);
> 	}
134a139,144
> 	PROJ *
> proj_initstr(char *str) {
> 	char * plist[1];
> 	plist[0] = str;
> 	return(proj_init(1, plist));
> }
136a147,151
> ** Revision 3.2  2008/10/19 02:33:51  gie
> ** added proj_initstr(char *str) entry as well as allowing
> ** multiple control entries per argv[] elements.
> ** Thus "proj=xxx ellps=xxx lon_0=xxx" are allowed.
> **

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sun Oct 19 08:15:05 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 19 Oct 2008 11:15:05 -0400
Subject: [Proj] Troubles with Newton-Raphson inverse projections
In-Reply-To: <D192C0474A214065A77AC2225E2FA8B8@PCHP>
References: <200810181148.39662.geraldi.evenden@gmail.com>
	<200810181517.57380.geraldi.evenden@gmail.com>
	<D192C0474A214065A77AC2225E2FA8B8@PCHP>
Message-ID: <200810191115.05290.geraldi.evenden@gmail.com>

On Sunday 19 October 2008 3:48:28 am OvV_HN wrote:
> One shouldn't laugh too soon.
> With Winkel-Tripel on a sphere with a radius, equal to the major axis of
> the WGS84 ellipsoid, I got the following results.
>
> Starting with: lat = 0.1 deg;  lon = 14 deg (east); lat_0 = 89.9 deg;
> Full round trip forward - inverse needed 286 iterations to get lat/lon back
> within an error of 1e-8 in the iteration loop. The loop needed 579
> iterations for an error of 1e-14.
> So it really needed that lot of iterations.
>
> Two things are rather stupid though.
> 1) How silly is this type of projection with a lat_0 near the pole, being
> interested in locations near the equator? Locations near the equator are
> not extremely silly, because the Winkel-Tripel will be probably used for
> thematic maps of the whole world. But a lat_0 near the pole is a bit
> strange.

I agree but someone always comes along and gets bent out of shape because 
their precious data does not process well in certain areas and explaining the 
problem can be difficult.

Take the case where data contains lat=90, lon=50 and they expect that when 
retrieving the information from a Cartesian system like Hammer that will get 
lon=50 back.  The idea that longitude at the pole is a meaningless item can 
sometime be a difficult concept for some to grasp.  ;-)
It is kinda like trying to retrieve the essence of something that has passed 
the event horizon of a black hole.

> 2) The Newton-Raphson method fails miserably in the known mathematical
> areas. We've already seen this happening in the Transverse Mercator
> projection, performed with complex elliptic functions, and near the
> mathematical boundaries.
> One should use another method in the difficult areas or restrict or warn
> the user for these areas.

Those who develop procedures to evaluate functions like cosine. sine etc. run 
into the same problems.  Arccosine behaves miserably as the argument nears 0 
and that is why Snyder developed the alternative inverse spherical geodesic 
formula to replace the arccosine version with an arcsine version in order to 
retain significant figures for closely spaced points.

This is why I was not surprised when these troubles arose because the shape of 
the projection near the poles indicated potential problems.  If the poles 
were cusp shape the we would probably not have a problem.

The results are not likely to be 8 digit precision near the poles but if we 
can keep the lid on runaway looping and get at least 3 or 4 digits I will 
consider it a success.

I fear those in this group that will expect type double machine 
precision.  :-(
 
> Oscar van Vlijmen
>
>
> ----- Original Message -----
> From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
> To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Sent: Saturday, October 18, 2008 9:17 PM
> Subject: Re: [Proj] Troubles with Newton-Raphson inverse projections
>
> > On Saturday 18 October 2008 2:10:18 pm OvV_HN wrote:
> >> Some time ago I programmed the inverse of the Winkel-Tripel according to
> >> the Turkish paper.
> >> I found no serious difficulties apart from the following.
> >> The lat_0 must be smaller than for instance 80d absolute and larger than
> >> say 1e-6 deg.
> >> In these circumstances the maximum number of iterations in the inverse
> >> should be smaller than 150 or so.
> >> If a larger value of lat_0 must be used: in one test I came up with 579
> >> iterations at a
> >> lat_0 of 89.9d.
> >
> > LOL, wow!!  I cutoff at 10 iterations and running at a moderately loose
> > tolerance of 10^-8 radians.
>
> ....
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sun Oct 19 15:45:20 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 20 Oct 2008 01:45:20 +0300 (EEST)
Subject: [Proj] Troubles with Newton-Raphson inverse projections
Message-ID: <33233088.2553231224456321250.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> I fear those in this group that will expect type double machine
> precision. :-(

Something is always better than nothing. Why not implement
the "accepted level of error" parameter? And give some message
if that can not be achieved. At least they knew that they were not
getting double precision. Then it is their problem and no more
our problem. Hiding it is not a good idea, better to tell
somehow. They can tell the end users and it is then their problem
to know.

Or if that is difficult to implement, maybe some kind of zone system?
Near equator it would be the zone 1 and near poles maybe zone n
or something similar? Where the zone is a predefined area and the
numbering indicates precision achieved with that projection. There
could be some pictures, maybe with colors, that would indicate
the problem zones? Users should then know what are the limits.

Janne.



From support.mn at elisanet.fi  Sun Oct 19 15:57:14 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 20 Oct 2008 01:57:14 +0300 (EEST)
Subject: [Proj] Additional up coming mods to libproj4
Message-ID: <10892457.2553291224457034887.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> Besides the inverse material for some projections I took a couple of minutes 
> to add the proj_initstr(chr *) entry to the library as an alternative to 
> proj_init(int, char **);  In addition, each string field of the later entry 
> may have multiple white-space separated projection options in the string.  
> The net result of this is that one can use lproj in the following manner:
> 
> lproj "+proj=poly ellps=intl lon_0=90w" +lat_0=40 infile
> 
> where the ellps= and lon_0= options are processed properly along with proj= 
> and lat_0=.  Remember that the "+" part of the options is only necessary for 
> [l]proj to identify the runline parameter as a libproj option and not a 
> filename.
> 
> For those who use the library directly:
> 
> P=proj_initstr("proj=poly ellps=intl lon_0=90w lat_0=40");
> 
> may be used as an alternative to proj_init and is processed the same as the 
> lproj example.
> 
> I believe that Warmerdam has done something similar with his value added 
> releases.
> 

I have seen a French initialization file with

+title=is something with white spaces

This problematic for me, since I am used to the habbit to never have any
white space in proj.4 statements. Example of the french file follows:

<FANGA84> +title=MOP84 (Fangataufa 1984) +proj=geocent +towgs84=150.5700,158.3300,118.3200 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs <>

Better would maybe be to put it like:

+title=<something between some markers with white spaces in it> +etc.....

Regards: Janne.



From Mikael.Rittri at carmenta.com  Mon Oct 20 00:36:56 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 20 Oct 2008 09:36:56 +0200
Subject: [Proj] Locate a point from distance and backwards azimuth? 
Message-ID: <FAF6E56B26D2044696772EBE89B1535101315036@posty.carmenta.se>

Hello,
Here is a variation of the first/principal/forward geodetic problem:

Known: 
   Position of point C.
   Distance from point C to an unknown point A. 
   Azimuth, at A, of the great-circle arc between A and C. 
Where is A?  

Note the difference from the first/principal/forward problem: 
the azimuth is known at the unknown point A, instead of at the 
known point C.  

I am not really sure when this is useful, but I have been asked 
about it twice by different people, so I feel I ought to solve it 
some day. 

Does this problem has a name, and are there detailed published solutions
anywhere? 

Actually, I should say that I am not completely lost:  
   For ellipsoid accuracy, I would use Vincenty's formulas for the 
forward problem starting from C, and then use some numerical root-finding 
algorithm to find the azimuth at C that gives the desired azimuth at A.  
   For spherical accuracy, one can add the north pole as a third point B, 
and then ABC is a spherical triangle where two sides (a and b) and one 
angle (A) is known. For this case, textbooks usually suggest that one uses 
the spherical law of sines to find sin(B) (where B is the difference in 
longitude between point A and point C), and then one of Napier's analogies to 
find the angle C and the side c.  The most detailed formulas that I have found
are at http://encarta.msn.com/encyclopedia_761572350_2/Trigonometry.html#s7 , 
but the formula font makes it impossible to distinguish the upper case C 
from the lower case c.  I think it must be a lower case c in the 2nd formula
and a an upper case C in the 3rd formula, though.  I also think there is a 
typo in the 3rd formula: (a+b) and (a-b) should both be multiplied by 1/2, 
before the sine is taken.

But I am not quite sure about the fine details. If I know sin(B), 
I still don't known whether the angle B is acute or obtuse, or if both 
are possible solutions.  I think that if the distance between A and C is 
larger than the distance from C to the nearest pole, there would be either 
two solutions or none. (Well, of course, if C is the north pole and the 
azimuth at A should be zero, there would be infinitely many solutions.)
   
So, if anyone recognizes this problem, I'd be grateful for any advice 
or literature references. 

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com



From warmerdam at pobox.com  Mon Oct 20 12:49:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 20 Oct 2008 15:49:39 -0400
Subject: [Proj] Additional up coming mods to libproj4
In-Reply-To: <200810191047.09333.geraldi.evenden@gmail.com>
References: <200810191047.09333.geraldi.evenden@gmail.com>
Message-ID: <48FCE0D3.3070808@pobox.com>

Gerald I. Evenden wrote:
> For those who use the library directly:
> 
> P=proj_initstr("proj=poly ellps=intl lon_0=90w lat_0=40");

Gerald,

I wonder if you would be willing to call this "proj_init_plus()" for
similarity with the existing pj_init_plus() which works similarly
in PROJ.4.  Also, do you allow '+' signs in the initstr argument?  The
pj_init_plus() requires them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From support.mn at elisanet.fi  Mon Oct 20 12:58:40 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 20 Oct 2008 22:58:40 +0300 (EEST)
Subject: [Proj] White space rules?
Message-ID: <22290725.4816371224532720795.JavaMail.support.mn@elisanet.fi>

So do I interpret correctly that white space is not allowed inside proj.4 (or libproj)??
statemets except in comments. And if seen, it will end the statement and start a
new one (except comment lines). Or is the + character new statement separator?

I have understood that the white space (space, including tab and new line) are the
only legal statement separators and the + character only continues the command
line (and also is a separator, but not used outside command lines?)

Regards: Janne.



From support.mn at elisanet.fi  Mon Oct 20 13:14:58 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 20 Oct 2008 23:14:58 +0300 (EEST)
Subject: [Proj] proj.4 BNF
Message-ID: <21446834.4817631224533699362.JavaMail.support.mn@elisanet.fi>

Maybe should define the correct BNF (BackusNaur Form) for proj.4?

http://en.wikipedia.org/wiki/Backus-Naur_form

That would help people to write correct proj.4 inits. I am still wondering
that if sombody enters wrong proj.4 attributes, the library takes them in, but does
something else and never informs the user that something he was entering
was totally ignored. Not a very nice situation.

There might be some kind of a stand alone pre scanner, that could be called
on demand and that checked the user entry and gave full information about
typos. errors and similar matters. It could be bypassed by those who do not
need it. But I don't see why anybody wanted to bypass checking of his input.

Or that maybe is there already?

Regards: Janne.




From warmerdam at pobox.com  Mon Oct 20 13:53:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 20 Oct 2008 16:53:32 -0400
Subject: [Proj] proj.4 BNF
In-Reply-To: <21446834.4817631224533699362.JavaMail.support.mn@elisanet.fi>
References: <21446834.4817631224533699362.JavaMail.support.mn@elisanet.fi>
Message-ID: <48FCEFCC.6090907@pobox.com>

support.mn at elisanet.fi wrote:
> Maybe should define the correct BNF (Backus–Naur Form) for proj.4?
> 
> http://en.wikipedia.org/wiki/Backus-Naur_form
> 
> That would help people to write correct proj.4 inits. I am still wondering
> that if sombody enters wrong proj.4 attributes, the library takes them 
> in, but does
> something else and never informs the user that something he was entering
> was totally ignored. Not a very nice situation.
> 
> There might be some kind of a stand alone pre scanner, that could be called
> on demand and that checked the user entry and gave full information about
> typos. errors and similar matters. It could be bypassed by those who do not
> need it. But I don't see why anybody wanted to bypass checking of his 
> input.

Janne,

While this seems like a reasonable idea, I am doubtful that it will occur
due to the challenges in implementing and keeping it up to date.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From strebe at aol.com  Mon Oct 20 16:59:34 2008
From: strebe at aol.com (strebe)
Date: Mon, 20 Oct 2008 16:59:34 -0700
Subject: [Proj] Re: Locate a point from distance and backwards azimuth?
In-Reply-To: <7B65D56F-1F0C-43C2-94D6-A547E1F3F939@codeweavers.com>
Message-ID: <6A4A039F.B93E.49A3.8C55.DE23FBA50F2B@aol.com>


Mikæl:

The usual spherical formulæ for computing a point at a known distance and azimuth are:

φ₂ = arcsin (sin φ₁ cos c + cos φ₁ sin c cos Az)
λ₂ = λ₁ + atan2 [sin c sin Az, (cos φ₁ cos c - sin φ₁ sin c cos Az)]

where the start point is subscripted with 1, the end point is subscripted with 2, and the arc distance is c. We know φ₂, λ₂, Az, and c. Therefore these reduce to

(1) n₄ = n₁ sin φ₁ + n₂ cos φ₁
(2) λ₂ = λ₁ + atan2 [n₃, (n₁ cos φ₁ - n₂ sin φ₁)]

where we have made substitutions for symbolic clarity:

n₁ = cos c
n₂ = sin c cos Az
n₃ = sin c sin Az
n₄ = sin φ₂

Since equation 1 has only φ₁ unknown, we solve with trigonometric and algebraic manipulations:

tan φ₁ = A / B

with φ₁ resolvable using the usual atan2 function in order to preserve quadrants. Here

    n₄ - n₂ B
A = _________
        n₁

    n₂ n₄ ± √(n₂² n₁² + n₁⁴ - n₁² n₄²)
B = ----------------------------------
                n₁² + n₂²


yielding two solutions, depending on the sign chosen for the radical in B. Both are valid solutions.

Thus armed with φ₁, we can easily compute λ₁ as

λ₁ = λ₂ - atan2 [n₃, (n₁ cos φ₁ - n₂ sin φ₁)]

The ellipsoidal case is much harder. Your iterative process will work, of course, though it will be terribly inefficient and likely comes with problematic regions. In principle it seems like the problem you are trying to solve is intermediate between the forward and the inverse problems. The reason it is not as simple as the forward problem is that, in the forward case, you know both the starting point and the azimuth. This wholly characterizes which geodesic you are dealing with, since a geodesic is completely characterized by its constant and any point along it:

      cos φ sin Az
K = ________________
    √(1 - e² sin² φ)

In your case, you cannot compute the geodesic's constant because you don't know both the latitude and azimuth from any known point; instead you know the azimuth from an unknown point. On the other hand, you already know the distance, the calculation of which is what makes the inverse problem so difficult.

Warning: Do NOT use Pearson's analysis of geodesics (Frederick Pearson II 1984: "Map Projection Methods", pp. 81–82, and 1990: "Map Projections: Theory and Applications", pp. 80–81). He makes an error early on in the derivation, making the final, easily computed integral nothing but a fiction. Sadly, Donald Fenna has repeated this error in his 2007 volume, "A Compendium of Map Projections, with Derivations", pp. 394–395. 

Regards,
-- daan Strebe


On Oct 20, 2008, at 12:36:56 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:
From:   "Mikael Rittri" <Mikael.Rittri at carmenta.com>
Subject:    [Proj] Locate a point from distance and backwards azimuth?
Date:   October 20, 2008 12:36:56 AM PDT
To: proj at lists.maptools.org
Hello,
Here is a variation of the first/principal/forward geodetic problem:

Known: 
Position of point C.
Distance from point C to an unknown point A. 
Azimuth, at A, of the great-circle arc between A and C. 
Where is A? 

Note the difference from the first/principal/forward problem: 
the azimuth is known at the unknown point A, instead of at the 
known point C. 

I am not really sure when this is useful, but I have been asked 
about it twice by different people, so I feel I ought to solve it 
some day. 

Does this problem has a name, and are there detailed published solutions
anywhere? 

Actually, I should say that I am not completely lost: 
For ellipsoid accuracy, I would use Vincenty's formulas for the 
forward problem starting from C, and then use some numerical root-finding 
algorithm to find the azimuth at C that gives the desired azimuth at A. 
For spherical accuracy, one can add the north pole as a third point B, 
and then ABC is a spherical triangle where two sides (a and b) and one 
angle (A) is known. For this case, textbooks usually suggest that one uses 
the spherical law of sines to find sin(B) (where B is the difference in 
longitude between point A and point C), and then one of Napier's analogies to 
find the angle C and the side c. The most detailed formulas that I have found
are at http://encarta.msn.com/encyclopedia_761572350_2/Trigonometry.html#s7 , 
but the formula font makes it impossible to distinguish the upper case C 
from the lower case c. I think it must be a lower case c in the 2nd formula
and a an upper case C in the 3rd formula, though. I also think there is a 
typo in the 3rd formula: (a+b) and (a-b) should both be multiplied by 1/2, 
before the sine is taken.

But I am not quite sure about the fine details. If I know sin(B), 
I still don't known whether the angle B is acute or obtuse, or if both 
are possible solutions. I think that if the distance between A and C is 
larger than the distance from C to the nearest pole, there would be either 
two solutions or none. (Well, of course, if C is the north pole and the 
azimuth at A should be zero, there would be infinitely many solutions.)

So, if anyone recognizes this problem, I'd be grateful for any advice 
or literature references. 

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081020/956612ff/attachment.html>

From support.mn at elisanet.fi  Mon Oct 20 19:45:50 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 21 Oct 2008 05:45:50 +0300 (EEST)
Subject: [Proj] proj.4 BNF
Message-ID: <19482336.1221571224557151298.JavaMail.support.mn@elisanet.fi>

Frank Warmerdam <warmerdam at pobox.com> kirjoitti: 
> support.mn at elisanet.fi wrote:
> > Maybe should define the correct BNF (BackusNaur Form) for proj.4?
> > 
> > http://en.wikipedia.org/wiki/Backus-Naur_form
> > 
> > That would help people to write correct proj.4 inits. I am still wondering
> > that if sombody enters wrong proj.4 attributes, the library takes them 
> > in, but does
> > something else and never informs the user that something he was entering
> > was totally ignored. Not a very nice situation.
> > 
> > There might be some kind of a stand alone pre scanner, that could be called
> > on demand and that checked the user entry and gave full information about
> > typos. errors and similar matters. It could be bypassed by those who do not
> > need it. But I don't see why anybody wanted to bypass checking of his 
> > input.
> 
> Janne,
> 
> While this seems like a reasonable idea, I am doubtful that it will occur
> due to the challenges in implementing and keeping it up to date.
> 

Well, I can start with it. Here is an example, maybe full of errors, but something
to start with.

------------------

<proj.4 definition> ::= <statement list>

<statement list> ::= <statement> {<SEP> <statement list> }

<statement> ::= <empty> | <comment line> | <assignment statement> | <identifier>

<empty ::=

<comment line> ::= # <anything but EOL> <EOL>

<assignment statement> ::= <identifier> = <right side>

<right side> ::= <identifier> | <identifier list> | <number> | <number list>

........

<EOL> ::= <CR> <LF> | <CR> | <LF>

<SEP> ::= <SPACE>  | <TAB> | <EOL> | "+"

<SPACE>  :: = " "

<TAB>  ::= chr(09)


etc. etc.



regards: Janne.




From support.mn at elisanet.fi  Mon Oct 20 20:05:41 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 21 Oct 2008 06:05:41 +0300 (EEST)
Subject: [Proj] proj.4 BNF
Message-ID: <11152824.1221951224558342773.JavaMail.support.mn@elisanet.fi>

The problem using + alone as a staement separator is obvious,
since it can be mixed with positive number sign. One way is to forbid
to use "+" as a positive number sgn. But then it would trop all
future expressions also. Maybe best is to agree, that if "+" is
used as statement separator (and continuation mark) it should
be preceded by <SEP>, which is usually the case.

So it would be more like:


<SEP> ::= (<SPACE>  | <TAB> | <EOL>) {<SEP>}

<continuation> ::= <SEP> "+"


That would require some white space before + and would make it
most clear?

----

Janne.

-----------------------------------------

support.mn at elisanet.fi kirjoitti: 
> Frank Warmerdam <warmerdam at pobox.com> kirjoitti: 
> > support.mn at elisanet.fi wrote:
> > > Maybe should define the correct BNF (BackusNaur Form) for proj.4?
> > > 
> > > http://en.wikipedia.org/wiki/Backus-Naur_form
> > > 
> > > That would help people to write correct proj.4 inits. I am still wondering
> > > that if sombody enters wrong proj.4 attributes, the library takes them 
> > > in, but does
> > > something else and never informs the user that something he was entering
> > > was totally ignored. Not a very nice situation.
> > > 
> > > There might be some kind of a stand alone pre scanner, that could be called
> > > on demand and that checked the user entry and gave full information about
> > > typos. errors and similar matters. It could be bypassed by those who do not
> > > need it. But I don't see why anybody wanted to bypass checking of his 
> > > input.
> > 
> > Janne,
> > 
> > While this seems like a reasonable idea, I am doubtful that it will occur
> > due to the challenges in implementing and keeping it up to date.
> > 
> 
> Well, I can start with it. Here is an example, maybe full of errors, but something
> to start with.
> 
> ------------------
> 
> <proj.4 definition> ::= <statement list>
> 
> <statement list> ::= <statement> {<SEP> <statement list> }
> 
> <statement> ::= <empty> | <comment line> | <assignment statement> | <identifier>
> 
> <empty ::=
> 
> <comment line> ::= # <anything but EOL> <EOL>
> 
> <assignment statement> ::= <identifier> = <right side>
> 
> <right side> ::= <identifier> | <identifier list> | <number> | <number list>
> 
> ........
> 
> <EOL> ::= <CR> <LF> | <CR> | <LF>
> 
> <SEP> ::= <SPACE>  | <TAB> | <EOL> | "+"
> 
> <SPACE>  :: = " "
> 
> <TAB>  ::= chr(09)
> 
> 
> etc. etc.
> 
> 
> 
> regards: Janne.




From strebe at aol.com  Mon Oct 20 21:13:24 2008
From: strebe at aol.com (strebe)
Date: Mon, 20 Oct 2008 21:13:24 -0700
Subject: [Proj] Re: Locate a point from distance and backwards azimuth?
In-Reply-To: <6A4A039F.B93E.49A3.8C55.DE23FBA50F2B@aol.com>
Message-ID: <03783788.0DB0.48AF.887C.B1FE63291D4D@aol.com>


I wote:

> yielding two solutions, depending on the sign chosen for the radical in B. Both are valid solutions.

Which is not correct. Only one of the two solutions will produce a legal value of φ₁, the other being outside the range of ±90°. Hence, choose the one within range. There is probably some analytic way of deciding which it will be, but I haven't tried to work it out.

Regards,
-- daan Strebe


On Oct 20, 2008, at 4:59:34 PM, strebe <strebe at aol.com> wrote:

Mikæl:

The usual spherical formulæ for computing a point at a known distance and azimuth are:

φ₂ = arcsin (sin φ₁ cos c + cos φ₁ sin c cos Az)
λ₂ = λ₁ + atan2 [sin c sin Az, (cos φ₁ cos c - sin φ₁ sin c cos Az)]

where the start point is subscripted with 1, the end point is subscripted with 2, and the arc distance is c. We know φ₂, λ₂, Az, and c. Therefore these reduce to

(1) n₄ = n₁ sin φ₁ + n₂ cos φ₁
(2) λ₂ = λ₁ + atan2 [n₃, (n₁ cos φ₁ - n₂ sin φ₁)]

where we have made substitutions for symbolic clarity:

n₁ = cos c
n₂ = sin c cos Az
n₃ = sin c sin Az
n₄ = sin φ₂

Since equation 1 has only φ₁ unknown, we solve with trigonometric and algebraic manipulations:

tan φ₁ = A / B

with φ₁ resolvable using the usual atan2 function in order to preserve quadrants. Here

    n₄ - n₂ B
A = _________
        n₁

    n₂ n₄ ± √(n₂² n₁² + n₁⁴ - n₁² n₄²)
B = ----------------------------------
                n₁² + n₂²


yielding two solutions, depending on the sign chosen for the radical in B. Both are valid solutions.

Thus armed with φ₁, we can easily compute λ₁ as

λ₁ = λ₂ - atan2 [n₃, (n₁ cos φ₁ - n₂ sin φ₁)]

The ellipsoidal case is much harder. Your iterative process will work, of course, though it will be terribly inefficient and likely comes with problematic regions. In principle it seems like the problem you are trying to solve is intermediate between the forward and the inverse problems. The reason it is not as simple as the forward problem is that, in the forward case, you know both the starting point and the azimuth. This wholly characterizes which geodesic you are dealing with, since a geodesic is completely characterized by its constant and any point along it:

      cos φ sin Az
K = ________________
    √(1 - e² sin² φ)

In your case, you cannot compute the geodesic's constant because you don't know both the latitude and azimuth from any known point; instead you know the azimuth from an unknown point. On the other hand, you already know the distance, the calculation of which is what makes the inverse problem so difficult.

Warning: Do NOT use Pearson's analysis of geodesics (Frederick Pearson II 1984: "Map Projection Methods", pp. 81–82, and 1990: "Map Projections: Theory and Applications", pp. 80–81). He makes an error early on in the derivation, making the final, easily computed integral nothing but a fiction. Sadly, Donald Fenna has repeated this error in his 2007 volume, "A Compendium of Map Projections, with Derivations", pp. 394–395. 

Regards,
-- daan Strebe



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081020/2d16bc1e/attachment.html>

From geraldi.evenden at gmail.com  Tue Oct 21 11:36:57 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 21 Oct 2008 14:36:57 -0400
Subject: [Proj] proj.4 BNF
In-Reply-To: <11152824.1221951224558342773.JavaMail.support.mn@elisanet.fi>
References: <11152824.1221951224558342773.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810211436.57918.geraldi.evenden@gmail.com>

On Monday 20 October 2008 11:05:41 pm support.mn at elisanet.fi wrote:
> The problem using + alone as a staement separator is obvious,
> since it can be mixed with positive number sign. One way is to forbid
> to use "+" as a positive number sgn. But then it would trop all
> future expressions also. Maybe best is to agree, that if "+" is
> used as statement separator (and continuation mark) it should
> be preceded by <SEP>, which is usually the case.
>
> So it would be more like:
>
>
> <SEP> ::= (<SPACE>  | <TAB> | <EOL>) {<SEP>}
>
> <continuation> ::= <SEP> "+"
>
>
> That would require some white space before + and would make it
> most clear?
>
> ----
>
> Janne.

I should stay out of this thread other than to discourage it because it is making a grand mountain out of a 
mole hill.

Regarding the "+": it has nothing to do as a separator and if bothering to use BNF, use something like:

<proj_key>::= "+"<id> | <id>

where id is your typical identifier definition.  Treating "+" as a delimiter only confuses the issue.  In fact, treating 
it like white space could cause a failure---"+proj=poly+ellps=intl" would fail becaue the second + would be 
treated as part of the projection name and there is no projection called "+ellps=intl",

<proJ_option> ::= <proj_key> | <proj_key>"="<proj_value>

<proj_option_list> ::=  <proj_option> | <proj_option_list><white_space><proj_option>

<white_space> ::= <white_space_char> | <white_space><white_space_char>

<white_space_char> ::= " " | <tab> | <new_line>

I do not think the above (given it's possible BNF warts and incompleteness> is really necessary as it is a 
common scenario for keyword control entry.  Users may get confused as to what and how of the <proj_key>s 
but I do not think entering the values is that confusing because it is virtually identical to entering runline 
control options.

Alas.

As a final note: it we really want to get serious about BNF and such descriptions of control entry then we may 
have to install a lexical analyzer designed with programs lex or flex and possibly a parsing machine designed 
with yacc or bison.  Do programmers, installers of libproj4 want to get involved with these beasts?

> -----------------------------------------
>
> support.mn at elisanet.fi kirjoitti:
> > Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> > > support.mn at elisanet.fi wrote:
> > > > Maybe should define the correct BNF (BackusNaur Form) for proj.4?
> > > >
> > > > http://en.wikipedia.org/wiki/Backus-Naur_form
> > > >
> > > > That would help people to write correct proj.4 inits. I am still
> > > > wondering that if sombody enters wrong proj.4 attributes, the library
> > > > takes them in, but does
> > > > something else and never informs the user that something he was
> > > > entering was totally ignored. Not a very nice situation.
> > > >
> > > > There might be some kind of a stand alone pre scanner, that could be
> > > > called on demand and that checked the user entry and gave full
> > > > information about typos. errors and similar matters. It could be
> > > > bypassed by those who do not need it. But I don't see why anybody
> > > > wanted to bypass checking of his input.
> > >
> > > Janne,
> > >
> > > While this seems like a reasonable idea, I am doubtful that it will
> > > occur due to the challenges in implementing and keeping it up to date.
> >
> > Well, I can start with it. Here is an example, maybe full of errors, but
> > something to start with.
> >
> > ------------------
> >
> > <proj.4 definition> ::= <statement list>
> >
> > <statement list> ::= <statement> {<SEP> <statement list> }
> >
> > <statement> ::= <empty> | <comment line> | <assignment statement> |
> > <identifier>
> >
> > <empty ::=
> >
> > <comment line> ::= # <anything but EOL> <EOL>
> >
> > <assignment statement> ::= <identifier> = <right side>
> >
> > <right side> ::= <identifier> | <identifier list> | <number> | <number
> > list>
> >
> > ........
> >
> > <EOL> ::= <CR> <LF> | <CR> | <LF>
> >
> > <SEP> ::= <SPACE>  | <TAB> | <EOL> | "+"
> >
> > <SPACE>  :: = " "
> >
> > <TAB>  ::= chr(09)
> >
> >
> > etc. etc.
> >
> >
> >
> > regards: Janne.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From roger at opq.se  Tue Oct 21 12:14:59 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 21 Oct 2008 21:14:59 +0200
Subject: [Proj] proj.4 BNF
In-Reply-To: <200810211436.57918.geraldi.evenden@gmail.com>
References: <11152824.1221951224558342773.JavaMail.support.mn@elisanet.fi>
	<200810211436.57918.geraldi.evenden@gmail.com>
Message-ID: <A17DFA9E-7A3F-47D3-9E8F-CEDD5CCDC010@opq.se>


On Oct 21, 2008, at 8:36 PM, Gerald I. Evenden wrote:

> On Monday 20 October 2008 11:05:41 pm support.mn at elisanet.fi wrote:
>> The problem using + alone as a staement separator is obvious,
>> since it can be mixed with positive number sign. One way is to forbid
>> to use "+" as a positive number sgn. But then it would trop all
>> future expressions also. Maybe best is to agree, that if "+" is
>> used as statement separator (and continuation mark) it should
>> be preceded by <SEP>, which is usually the case.
>>
>> So it would be more like:
>>
>>
>> <SEP> ::= (<SPACE>  | <TAB> | <EOL>) {<SEP>}
>>
>> <continuation> ::= <SEP> "+"
>>
>>
>> That would require some white space before + and would make it
>> most clear?
>>
>> ----
>>
>> Janne.
>
> I should stay out of this thread other than to discourage it because  
> it is making a grand mountain out of a
> mole hill.
>
> Regarding the "+": it has nothing to do as a separator and if  
> bothering to use BNF, use something like:
>
> <proj_key>::= "+"<id> | <id>
>
> where id is your typical identifier definition.  Treating "+" as a  
> delimiter only confuses the issue.  In fact, treating
> it like white space could cause a failure---"+proj=poly+ellps=intl"  
> would fail becaue the second + would be
> treated as part of the projection name and there is no projection  
> called "+ellps=intl",
>
> <proJ_option> ::= <proj_key> | <proj_key>"="<proj_value>
>
> <proj_option_list> ::=  <proj_option> |  
> <proj_option_list><white_space><proj_option>
>
> <white_space> ::= <white_space_char> | <white_space><white_space_char>
>
> <white_space_char> ::= " " | <tab> | <new_line>
>
> I do not think the above (given it's possible BNF warts and  
> incompleteness> is really necessary as it is a
> common scenario for keyword control entry.  Users may get confused  
> as to what and how of the <proj_key>s
> but I do not think entering the values is that confusing because it  
> is virtually identical to entering runline
> control options.
>
> Alas.
>
> As a final note: it we really want to get serious about BNF and such  
> descriptions of control entry then we may
> have to install a lexical analyzer designed with programs lex or  
> flex and possibly a parsing machine designed
> with yacc or bison.  Do programmers, installers of libproj4 want to  
> get involved with these beasts?

Not really. I think it would lead to more complex syntax over time,  
because these systems would allow it. Having said that, in a large  
syntax (which this is not), simply making the spec helps identify  
weaknesses in the syntax. Even if the spec is never used beyond a  
paper and pencil proof that the syntax is consistent, the spec could  
be useful. But I see no need to implement it in the programs.

On the other hand, I think it would be great if one could enter a  
series of strings, as is done today, and then, based on how everything  
ultimately gets parsed, list it back with all settings expanded. It  
often seems to be to be a little too "blackboxish". Documenting what  
one's strings really parse into is not really possible, making any  
serious regression testing across releases next to impossible. ESRI,  
for example, list the settings that it decides to use based on  
whatever the user specified, like a code or whatever. The analysis  
lists what all the important settings wind up being. More than once  
this has helped to clarify some seemingly odd thing to me.

--
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction.
It is like talking about large city with all constructions finished.
Not impossible, but very unlikely.




From support.mn at elisanet.fi  Wed Oct 22 14:32:02 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 23 Oct 2008 00:32:02 +0300 (EEST)
Subject: [Proj] proj.4 BNF
Message-ID: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>

My concern  is originated from those initialization files proj.4 has. Here
is some examples:

----------------file 1-------------
# Kalianpur 1962
<4145> +proj=longlat +a=6377301.243 +b=6356100.230165384 +no_defs  <>
# Kalianpur 1975
<4146> +proj=longlat +a=6377299.151 +b=6356098.145120132 +towgs84=295,736,257,0,0,0,0 +no_defs  <>
# Hanoi 1972
<4147> +proj=longlat +ellps=krass +towgs84=-17.51,-108.32,-62.39,0,0,0,0 +no_defs  <>
# Hartebeesthoek94
<4148> +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs  <>
# CH1903
<4149> +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs  <>
-------------------------------

----------------file 2-------------
# W [HIVA67]
<IGN63> +title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs <>
--------------------------------

and how to parse those. "+" is used as separator and I am assuming that the reason is the
"+title=something with white spaces in it". That should pass the scanner somehow.

The second file will never pass? The only way to get that to pass, is to use

<white_space> "+"

as the separator, since <white_space> alone is used also in the title key value.

The file 2 will split as:

+title=IGN
1963
(Hiva Oa,
Tahuata, Mohotani)
+proj=geocent
+towgs84=410.7210,55.0490,80.7460,-2.5779,-
etc....

when is should be:

+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani)
+proj=geocent
+towgs84=410.7210,55.0490,80.7460,-2.5779,-
etc....

If I would use  <proj_key>::= "+"<id> | <id>, that would not work, since
there is no way to know if "Tahuata" is key word or not using just a
dump scanner. And since all the proj.4 identifiers are not known
(and continue to change) listing them will also not work and is not
rational.. since that would require to edit the list all the time there
comes some new key wods.

The only way is to use <white_space>"+" or <white_space> as
separators. Since that way one does not need to know all the key
words and the scanner gets smaller and will work for ever.

Regards: Janne.

------------------------------

 
"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> On Monday 20 October 2008 11:05:41 pm support.mn at elisanet.fi wrote:
> > The problem using + alone as a staement separator is obvious,
> > since it can be mixed with positive number sign. One way is to forbid
> > to use "+" as a positive number sgn. But then it would trop all
> > future expressions also. Maybe best is to agree, that if "+" is
> > used as statement separator (and continuation mark) it should
> > be preceded by <SEP>, which is usually the case.
> >
> > So it would be more like:
> >
> >
> > <SEP> ::= (<SPACE>  | <TAB> | <EOL>) {<SEP>}
> >
> > <continuation> ::= <SEP> "+"
> >
> >
> > That would require some white space before + and would make it
> > most clear?
> >
> > ----
> >
> > Janne.
> 
> I should stay out of this thread other than to discourage it because it is making a grand mountain out of a 
> mole hill.
> 
> Regarding the "+": it has nothing to do as a separator and if bothering to use BNF, use something like:
> 
> <proj_key>::= "+"<id> | <id>
> 
> where id is your typical identifier definition.  Treating "+" as a delimiter only confuses the issue.  In fact, treating 
> it like white space could cause a failure---"+proj=poly+ellps=intl" would fail becaue the second + would be 
> treated as part of the projection name and there is no projection called "+ellps=intl",
> 
> <proJ_option> ::= <proj_key> | <proj_key>"="<proj_value>
> 
> <proj_option_list> ::=  <proj_option> | <proj_option_list><white_space><proj_option>
> 
> <white_space> ::= <white_space_char> | <white_space><white_space_char>
> 
> <white_space_char> ::= " " | <tab> | <new_line>
> 
> I do not think the above (given it's possible BNF warts and incompleteness> is really necessary as it is a 
> common scenario for keyword control entry.  Users may get confused as to what and how of the <proj_key>s 
> but I do not think entering the values is that confusing because it is virtually identical to entering runline 
> control options.
> 
> Alas.
> 
> As a final note: it we really want to get serious about BNF and such descriptions of control entry then we may 
> have to install a lexical analyzer designed with programs lex or flex and possibly a parsing machine designed 
> with yacc or bison.  Do programmers, installers of libproj4 want to get involved with these beasts?
> 
> > -----------------------------------------
> >
> > support.mn at elisanet.fi kirjoitti:
> > > Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> > > > support.mn at elisanet.fi wrote:
> > > > > Maybe should define the correct BNF (BackusNaur Form) for proj4?
> > > > >
> > > > > http://en.wikipedia.org/wiki/Backus-Naur_form
> > > > >
> > > > > That would help people to write correct proj.4 inits. I am still
> > > > > wondering that if sombody enters wrong proj.4 attributes, the library
> > > > > takes them in, but does
> > > > > something else and never informs the user that something he was
> > > > > entering was totally ignored. Not a very nice situation.
> > > > >
> > > > > There might be some kind of a stand alone pre scanner, that could be
> > > > > called on demand and that checked the user entry and gave full
> > > > > information about typos. errors and similar matters. It could be
> > > > > bypassed by those who do not need it. But I don't see why anybody
> > > > > wanted to bypass checking of his input.
> > > >
> > > > Janne,
> > > >
> > > > While this seems like a reasonable idea, I am doubtful that it will
> > > > occur due to the challenges in implementing and keeping it up to date.
> > >
> > > Well, I can start with it. Here is an example, maybe full of errors, but
> > > something to start with.
> > >
> > > ------------------
> > >
> > > <proj.4 definition> ::= <statement list>
> > >
> > > <statement list> ::= <statement> {<SEP> <statement list> }
> > >
> > > <statement> ::= <empty> | <comment line> | <assignment statement> |
> > > <identifier>
> > >
> > > <empty ::=
> > >
> > > <comment line> ::= # <anything but EOL> <EOL>
> > >
> > > <assignment statement> ::= <identifier> = <right side>
> > >
> > > <right side> ::= <identifier> | <identifier list> | <number> | <number
> > > list>
> > >
> > > ........
> > >
> > > <EOL> ::= <CR> <LF> | <CR> | <LF>
> > >
> > > <SEP> ::= <SPACE>  | <TAB> | <EOL> | "+"
> > >
> > > <SPACE>  :: = " "
> > >
> > > <TAB>  ::= chr(09)
> > >
> > >
> > > etc. etc.
> > >
> > >
> > >
> > > regards: Janne.
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> 
> -- 
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




From geraldi.evenden at gmail.com  Wed Oct 22 14:52:18 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 22 Oct 2008 17:52:18 -0400
Subject: [Proj] proj.4 BNF
In-Reply-To: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
References: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810221752.18799.geraldi.evenden@gmail.com>

On Wednesday 22 October 2008 5:32:02 pm support.mn at elisanet.fi wrote:
> My concern  is originated from those initialization files proj.4 has. Here
> is some examples:
>
> ----------------file 1-------------
> # Kalianpur 1962
> <4145> +proj=longlat +a=6377301.243 +b=6356100.230165384 +no_defs  <>
> # Kalianpur 1975
> <4146> +proj=longlat +a=6377299.151 +b=6356098.145120132
> +towgs84=295,736,257,0,0,0,0 +no_defs  <> # Hanoi 1972
> <4147> +proj=longlat +ellps=krass +towgs84=-17.51,-108.32,-62.39,0,0,0,0
> +no_defs  <> # Hartebeesthoek94
> <4148> +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs  <>
> # CH1903
> <4149> +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0
> +no_defs  <> -------------------------------
>
> ----------------file 2-------------
> # W [HIVA67]
> <IGN63> +title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent
> +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100
> +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs <>
> --------------------------------
>
> and how to parse those. "+" is used as separator and I am assuming that the
> reason is the "+title=something with white spaces in it". That should pass
> the scanner somehow.

I do not know how often I can repeat this: the "+" is part of the keyword.  IT 
IS NOT A SEPARATOR, delimiter or anything other than an optional prefix to 
the proj keyword.

As for the "title" stuff, I have absolutely no idea.  It is not part of the 
current proj4 system nor do I recall it ever having been used that way 
(although I admit it may have been my idea in the long defunct system).

However, the parsing of the control lines could have been done if everything 
after the +title= was treated as a comment until the first occurrence of a 
+keyword.

But in no situation should the + be considered a delimiter.


     ...


Again:

> > where id is your typical identifier definition.  Treating "+" as a
> > delimiter only confuses the issue.  In fact, treating it like white space
> > could cause a failure---"+proj=poly+ellps=intl" would fail because the
> > second + would be treated as part of the projection name and there is no
> > projection called "+ellps=intl",

That is why + as a delimiter DOES NOT WORK!!!!!!!
...

Sorry to be testy, but I am tiring of this issue.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Wed Oct 22 16:15:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 22 Oct 2008 19:15:15 -0400
Subject: [Proj] proj.4 BNF
In-Reply-To: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
References: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
Message-ID: <48FFB403.9090005@pobox.com>

support.mn at elisanet.fi wrote:
>
> and how to parse those. "+" is used as separator and I am assuming that 
> the reason is the
> "+title=something with white spaces in it". That should pass the scanner 
> somehow.

Janne,

I would note the +title stuff seems to only appear in IGN generated
PROJ.4 init files.  I'm not sure if it plays a particular role in
some software of theirs but it isn't handled in any particular way
by PROJ.4 as far as I know.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From didier.richard at ign.fr  Thu Oct 23 00:48:48 2008
From: didier.richard at ign.fr (Richard didier)
Date: Thu, 23 Oct 2008 09:48:48 +0200
Subject: [Proj] proj.4 BNF
In-Reply-To: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
References: <12024031.2856131224711122216.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810230948.48630.didier.richard@ign.fr>

Le Mercredi 22 Octobre 2008 23:32, support.mn at elisanet.fi a écrit :
> My concern  is originated from those initialization files proj.4 has. Here
> is some examples:
>
> ----------------file 1-------------
> # Kalianpur 1962
> <4145> +proj=longlat +a=6377301.243 +b=6356100.230165384 +no_defs  <>
> # Kalianpur 1975
> <4146> +proj=longlat +a=6377299.151 +b=6356098.145120132
> +towgs84=295,736,257,0,0,0,0 +no_defs  <> # Hanoi 1972
> <4147> +proj=longlat +ellps=krass +towgs84=-17.51,-108.32,-62.39,0,0,0,0
> +no_defs  <> # Hartebeesthoek94
> <4148> +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs  <>
> # CH1903
> <4149> +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0
> +no_defs  <> -------------------------------
>
> ----------------file 2-------------
> # W [HIVA67]
> <IGN63> +title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent
> +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100
> +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs <>
> --------------------------------
>
> and how to parse those. "+" is used as separator and I am assuming that the
> reason is the "+title=something with white spaces in it". That should pass
> the scanner somehow.
>
> The second file will never pass? The only way to get that to pass, is to
> use
>
> <white_space> "+"
>
> as the separator, since <white_space> alone is used also in the title key
> value.
>
> The file 2 will split as:
>
> +title=IGN
> 1963
> (Hiva Oa,
> Tahuata, Mohotani)
> +proj=geocent
> +towgs84=410.7210,55.0490,80.7460,-2.5779,-
> etc....
>
> when is should be:
>
> +title=IGN 1963 (Hiva Oa, Tahuata, Mohotani)
> +proj=geocent
> +towgs84=410.7210,55.0490,80.7460,-2.5779,-
> etc....
>
> If I would use  <proj_key>::= "+"<id> | <id>, that would not work, since
> there is no way to know if "Tahuata" is key word or not using just a
> dump scanner. And since all the proj.4 identifiers are not known
> (and continue to change) listing them will also not work and is not
> rational.. since that would require to edit the list all the time there
> comes some new key wods.
>
> The only way is to use <white_space>"+" or <white_space> as
> separators. Since that way one does not need to know all the key
> words and the scanner gets smaller and will work for ever.
>

There is no problem at all handling +title in catalogue. I have submitted a 
ticket to prevent some parsing error when the string after +title= contains 
keywords. See http://trac.osgeo.org/proj/ticket/17 for better explanations.

Regards,

didier

> Regards: Janne.
>
> ------------------------------
>
> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> > On Monday 20 October 2008 11:05:41 pm support.mn at elisanet.fi wrote:
> > > The problem using + alone as a staement separator is obvious,
> > > since it can be mixed with positive number sign. One way is to forbid
> > > to use "+" as a positive number sgn. But then it would trop all
> > > future expressions also. Maybe best is to agree, that if "+" is
> > > used as statement separator (and continuation mark) it should
> > > be preceded by <SEP>, which is usually the case.
> > >
> > > So it would be more like:
> > >
> > >
> > > <SEP> ::= (<SPACE>  | <TAB> | <EOL>) {<SEP>}
> > >
> > > <continuation> ::= <SEP> "+"
> > >
> > >
> > > That would require some white space before + and would make it
> > > most clear?
> > >
> > > ----
> > >
> > > Janne.
> >
> > I should stay out of this thread other than to discourage it because it
> > is making a grand mountain out of a mole hill.
> >
> > Regarding the "+": it has nothing to do as a separator and if bothering
> > to use BNF, use something like:
> >
> > <proj_key>::= "+"<id> | <id>
> >
> > where id is your typical identifier definition.  Treating "+" as a
> > delimiter only confuses the issue.  In fact, treating it like white space
> > could cause a failure---"+proj=poly+ellps=intl" would fail becaue the
> > second + would be treated as part of the projection name and there is no
> > projection called "+ellps=intl",
> >
> > <proJ_option> ::= <proj_key> | <proj_key>"="<proj_value>
> >
> > <proj_option_list> ::=  <proj_option> |
> > <proj_option_list><white_space><proj_option>
> >
> > <white_space> ::= <white_space_char> | <white_space><white_space_char>
> >
> > <white_space_char> ::= " " | <tab> | <new_line>
> >
> > I do not think the above (given it's possible BNF warts and
> > incompleteness> is really necessary as it is a common scenario for
> > keyword control entry.  Users may get confused as to what and how of the
> > <proj_key>s but I do not think entering the values is that confusing
> > because it is virtually identical to entering runline control options.
> >
> > Alas.
> >
> > As a final note: it we really want to get serious about BNF and such
> > descriptions of control entry then we may have to install a lexical
> > analyzer designed with programs lex or flex and possibly a parsing
> > machine designed with yacc or bison.  Do programmers, installers of
> > libproj4 want to get involved with these beasts?
> >
> > > -----------------------------------------
> > >
> > > support.mn at elisanet.fi kirjoitti:
> > > > Frank Warmerdam <warmerdam at pobox.com> kirjoitti:
> > > > > support.mn at elisanet.fi wrote:
> > > > > > Maybe should define the correct BNF (BackusNaur Form) for proj4?
> > > > > >
> > > > > > http://en.wikipedia.org/wiki/Backus-Naur_form
> > > > > >
> > > > > > That would help people to write correct proj.4 inits. I am still
> > > > > > wondering that if sombody enters wrong proj.4 attributes, the
> > > > > > library takes them in, but does
> > > > > > something else and never informs the user that something he was
> > > > > > entering was totally ignored. Not a very nice situation.
> > > > > >
> > > > > > There might be some kind of a stand alone pre scanner, that could
> > > > > > be called on demand and that checked the user entry and gave full
> > > > > > information about typos. errors and similar matters. It could be
> > > > > > bypassed by those who do not need it. But I don't see why anybody
> > > > > > wanted to bypass checking of his input.
> > > > >
> > > > > Janne,
> > > > >
> > > > > While this seems like a reasonable idea, I am doubtful that it will
> > > > > occur due to the challenges in implementing and keeping it up to
> > > > > date.
> > > >
> > > > Well, I can start with it. Here is an example, maybe full of errors,
> > > > but something to start with.
> > > >
> > > > ------------------
> > > >
> > > > <proj.4 definition> ::= <statement list>
> > > >
> > > > <statement list> ::= <statement> {<SEP> <statement list> }
> > > >
> > > > <statement> ::= <empty> | <comment line> | <assignment statement> |
> > > > <identifier>
> > > >
> > > > <empty ::=
> > > >
> > > > <comment line> ::= # <anything but EOL> <EOL>
> > > >
> > > > <assignment statement> ::= <identifier> = <right side>
> > > >
> > > > <right side> ::= <identifier> | <identifier list> | <number> |
> > > > <number list>
> > > >
> > > > ........
> > > >
> > > > <EOL> ::= <CR> <LF> | <CR> | <LF>
> > > >
> > > > <SEP> ::= <SPACE>  | <TAB> | <EOL> | "+"
> > > >
> > > > <SPACE>  :: = " "
> > > >
> > > > <TAB>  ::= chr(09)
> > > >
> > > >
> > > > etc. etc.
> > > >
> > > >
> > > >
> > > > regards: Janne.
> > >
> > > _______________________________________________
> > > Proj mailing list
> > > Proj at lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/proj
> >
> > --
> > The whole religious complexion of the modern world is due
> > to the absence from Jerusalem of a lunatic asylum.
> > -- Havelock Ellis (1859-1939) British psychologist
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Didier RICHARD, chef du pôle technique Géoportail pour l'IGN
Institut Geographique National           tel: +33/0 1.43.98.83.23
2/4 Avenue Pasteur                       fax: +33/0 1.43.98.80.88
F-94165 St-Mande Cedex                e-mail: Didier.Richard at ign.fr




From burstain at gmail.com  Thu Oct 23 02:55:09 2008
From: burstain at gmail.com (Eran Burstain)
Date: Thu, 23 Oct 2008 11:55:09 +0200
Subject: [Proj] Local Level
Message-ID: <817db2970810230255j1a654896wa01ed1f5e22aab8a@mail.gmail.com>

Hi !
Can I convert a point from geocentric to Local Level Projection (also called
Local Tangent Plane) ?
It's only Rotation and Shift from the geocentric representation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081023/7a5b98ee/attachment.html>

From ndzinn at comcast.net  Thu Oct 23 04:30:26 2008
From: ndzinn at comcast.net (Noel Zinn)
Date: Thu, 23 Oct 2008 06:30:26 -0500
Subject: [Proj] Local Level
In-Reply-To: <817db2970810230255j1a654896wa01ed1f5e22aab8a@mail.gmail.com>
References: <817db2970810230255j1a654896wa01ed1f5e22aab8a@mail.gmail.com>
Message-ID: <0A8D74375AFB468D966DFDA7C979EB95@nz>

FYI, the current version of the EPSG Guidance Note 7-2 presents the
algorithm to do this (called topocentric coordinates by the EPSG).  If this
is not in proj4 already, I would support its inclusion.  Also FYI, if the
vertical dimension of topocentric coordinates is ignored, the remaining
horizontal coordinates define the ellipsoidal orthographic projection.
-Noel Zinn

 

  _____  

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eran Burstain
Sent: Thursday, October 23, 2008 4:55 AM
To: proj at lists.maptools.org
Subject: [Proj] Local Level

 

Hi !
Can I convert a point from geocentric to Local Level Projection (also called
Local Tangent Plane) ?
It's only Rotation and Shift from the geocentric representation.

No virus found in this incoming message.
Checked by AVG - http://www.avg.com
Version: 8.0.175 / Virus Database: 270.8.2/1740 - Release Date: 10/22/2008
7:24 PM

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081023/c87c3f6d/attachment.html>

From gdt at ir.bbn.com  Thu Oct 23 04:48:32 2008
From: gdt at ir.bbn.com (Greg Troxel)
Date: Thu, 23 Oct 2008 07:48:32 -0400
Subject: [Proj] Local Level
In-Reply-To: <817db2970810230255j1a654896wa01ed1f5e22aab8a@mail.gmail.com>
	(Eran Burstain's message of "Thu, 23 Oct 2008 11:55:09 +0200")
References: <817db2970810230255j1a654896wa01ed1f5e22aab8a@mail.gmail.com>
Message-ID: <rmiod1bcz1r.fsf@fnord.ir.bbn.com>


  Can I convert a point from geocentric to Local Level Projection (also called
  Local Tangent Plane) ?
  It's only Rotation and Shift from the geocentric representation.

I tried to do that earlier, and found that it was somewhat difficult.
First, wheter you are coming from ECEF XYZ (assuming that's what you
mean by geocentric) or geodetic shouldn't matter much.  In my case I
started with WGS84 geodetic coordinates.

I had a local coordinate system in a parking lot used for testing a
radio system, defined by survey nails.  One nail was the origin at 0,0,
and another nail defined the angle to 100,0.  But my 'easting' (first
coordinate) was close to north, but not quite.

I felt that my options were to define my local coordinate system as a
proj string or to convert to something planar and then transform.  I
didn't figure out the first option, so what I did was

  transform to UTM zone 19
  subtract UTM coordinates of my reference station (at (40,30) it so happens)
  rotate from MSP north to my grid y axis
  add back in my (40,30) reference station coordinates

This was not a lot of code, and it's here:

  http://acert.ir.bbn.com/viewvc/adroit/mrp/src/share/grid.py?revision=1.12&view=markup

Also, search for PROJ in:

  http://acert.ir.bbn.com/viewvc/acert-geospatial/xplot/xplot.c?revision=1.9&view=markup

for C code to take "ADROIT grid" and transform to Mass State Plane
(because that's what my orthophotos were in).


I think it would be nice for proj to be able to do these kinds of
transformations (offset/rotate/offset) from projected coordinates, but
representing is probably a bit messy.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 193 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081023/f3972596/attachment.sig>

From geraldi.evenden at gmail.com  Sat Oct 25 19:43:04 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 25 Oct 2008 22:43:04 -0400
Subject: [Proj] Status of projection inverses
Message-ID: <200810252243.04089.geraldi.evenden@gmail.com>

Several days have gone by without any comments on the subject but that does 
not mean that I am not working on it.

1. trying to get a better initial  guess process via some rough polynomial 
method pretty well went up in flames.

2. but using the gsl library of multidimensional root finding shows a great 
deal of progress and converges faster than the simple Newton-Raphson and is 
more tolerant of poor initial conditions.

3. gsl can also do the same job without a Jacobian requiring derivatives.  For 
those who have not already noticed, there are many inverseless projections 
where the derivatives would be impossible or nearly so---even with help from 
maxima.

Conclusions here are that I am going to finish up this project with the gsl 
methodology in order to preserve my own sanity.  ;-)

The gsl library already requires gsl for one projection so there is nothing 
new in the gsl option.

For those who cannot abide by the gsl license I will continue to use the 
switches in the Makefile to eliminate code that uses that library.  The 
bottom line is that some inverse projections will not be available to non-gsl 
users.  Sorry.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From paulselormey at gmail.com  Sat Oct 25 21:00:24 2008
From: paulselormey at gmail.com (Paul Selormey)
Date: Sun, 26 Oct 2008 13:00:24 +0900
Subject: [Proj] Status of projection inverses
In-Reply-To: <200810252243.04089.geraldi.evenden@gmail.com>
References: <200810252243.04089.geraldi.evenden@gmail.com>
Message-ID: <c67bb03d0810252100w5841c63dg293cc176ce9e72db@mail.gmail.com>

> Conclusions here are that I am going to finish up this project with the gsl
> methodology in order to preserve my own sanity.  ;-)

You mean putting the proj4 under GPL? Good luck.

Best regards,
Paul.


From ovv at hetnet.nl  Sun Oct 26 03:19:26 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sun, 26 Oct 2008 11:19:26 +0100
Subject: [Proj] Status of projection inverses
In-Reply-To: <200810252243.04089.geraldi.evenden@gmail.com>
References: <200810252243.04089.geraldi.evenden@gmail.com>
Message-ID: <5DB709FBA4CD49A8A737690E5FDD85C6@PCHP>

I can't see why it is necessary to go through all the computational overhead 
of GNU GSL.
The inverse of the Winkel-Tripel as outlined in the Ipbucker-Bildirici paper 
didn't give much problems, apart from some extreme regions which should be 
forbidden.
The inverse of the Aitoff-Hammer was even less problematic. Only for a 
latitude of +/-90d the longitude couldn't be restored from the inverse, but 
this situation can probably be cured in another way.
The Aitoff-Hammer needed only a couple of iterations (less than 11 for a 
loop-break error of 1e-14). For starting values in the iteration I simply 
used lat=0, lon=0.
So, please enlighten me and tell us where the actual problems can be found.

Oscar van Vlijmen


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Sunday, October 26, 2008 3:43 AM
Subject: [Proj] Status of projection inverses


> Several days have gone by without any comments on the subject but that 
> does
> not mean that I am not working on it.
>
> 1. trying to get a better initial  guess process via some rough polynomial
> method pretty well went up in flames.
>
> 2. but using the gsl library of multidimensional root finding shows a 
> great
> deal of progress and converges faster than the simple Newton-Raphson and 
> is
> more tolerant of poor initial conditions.
>
> 3. gsl can also do the same job without a Jacobian requiring derivatives. 
> For
> those who have not already noticed, there are many inverseless projections
> where the derivatives would be impossible or nearly so---even with help 
> from
> maxima.
>
> Conclusions here are that I am going to finish up this project with the 
> gsl
> methodology in order to preserve my own sanity.  ;-)





From geraldi.evenden at gmail.com  Sun Oct 26 09:52:45 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 26 Oct 2008 12:52:45 -0400
Subject: [Proj] Status of projection inverses
In-Reply-To: <c67bb03d0810252100w5841c63dg293cc176ce9e72db@mail.gmail.com>
References: <200810252243.04089.geraldi.evenden@gmail.com>
	<c67bb03d0810252100w5841c63dg293cc176ce9e72db@mail.gmail.com>
Message-ID: <200810261252.46067.geraldi.evenden@gmail.com>

On Sunday 26 October 2008 12:00:24 am Paul Selormey wrote:
> > Conclusions here are that I am going to finish up this project with the
> > gsl methodology in order to preserve my own sanity.  ;-)
>
> You mean putting the proj4 under GPL? Good luck.

COMMENT #1: libproj4 is already a user of gsl.  If you do not have gsl you do not get the +proj=mayr projection.

Note:

ifdef GSL
gsll = -lgsl -lgslcblas
gslf = -DPROJ_HAVE_GSL=1
endif

is part of the Makefile.  Comment it out if you do not want to use gsl.

As for not using gsl the only additional effect will be not getting inverse operations on certain projections.

COMMENT #2: The root finding system described in the Ipbucker-Bildirici paper is a simplistic solution; one that is much better solved with additional techniques that do better job in terms of fewer iterations as well as recovering from poor initial estimates.  I would be remiss in my attempts to provide quality software by not taking advantage of freely available libraries.

In addition, use of the gsl library offers methods allowing solving inverse projections for which there are no derivatives.

COMMENT #3: In terms of the usage of the gsl library and application of its licensing, *I do not distribute gsl* nor any modification of gsl.  The use of the libproj4 *and* its reference to gsl entry points requires the end user to secure the gsl library and follow GPL.  If you use libproj4 without gsl then there is only the liberal libproj4 license applies.

If anyone believes my logic of the last paragraph is in error, please let me know.

COMMENT #4: For anyone using libproj4 with gsl in their own shop I do not see what the problem is.  If someone is doing a value added piece of softwere for sale using both libproj4 and gsl then there may be a problem.  But I have no experience with such problems and can do nothing but acknowledge that they may exist.

LAST COMMENT: If gsl is untenable but the services it supplies are needed then develop your own code to replace it or find a supplier of a library with tolerable licensing.  My usage of gsl and the services it provides are fairly standard fare. 

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20081026/3b809c67/attachment.html>

From geraldi.evenden at gmail.com  Sun Oct 26 10:23:05 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 26 Oct 2008 13:23:05 -0400
Subject: [Proj] Why?
Message-ID: <200810261323.05298.geraldi.evenden@gmail.com>

One burning question has come up in my mind about the need for inverse 
solutions for non-grid-system projections like Aitoff, Hammer, etc.: why?

It is easy to understand the need in cadastral work to be able to freely 
interchange between Cartesian and Geographical space because the source of 
information is in either system.

But Aitoff or Winkel Tripel.  What source information is in either projection.  
Are people now going to digitize NGS maps?  Certainly nobody uses Winkel 
Tripel for cadastral application---do they?

Just very curious.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Mon Oct 27 06:48:36 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 27 Oct 2008 15:48:36 +0200 (EET)
Subject: [Proj] Why?
Message-ID: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> One burning question has come up in my mind about the need for inverse 
> solutions for non-grid-system projections like Aitoff, Hammer, etc.: why?
> 

For our part we need the inverse for every projection, since the users want to
get their coordinates and other information just by clicking on the maps. For
us those projections without forward and inveres are not usable at all. We
currently simply discard all projections which do not have inverses. So we
need them both all the time. And of course in the view point of having a
general projection package there could be all the inverses also defined
as far as it is practical.

Regards: Janne.

-------------------------------


From geraldi.evenden at gmail.com  Mon Oct 27 08:08:01 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 27 Oct 2008 11:08:01 -0400
Subject: [Proj] Why?
In-Reply-To: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
References: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
Message-ID: <200810271108.01393.geraldi.evenden@gmail.com>

On Monday 27 October 2008 9:48:36 am support.mn at elisanet.fi wrote:
> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> > One burning question has come up in my mind about the need for inverse
> > solutions for non-grid-system projections like Aitoff, Hammer, etc.: why?
>
> For our part we need the inverse for every projection, since the users want
> to get their coordinates and other information just by clicking on the
> maps. For us those projections without forward and inveres are not usable
> at all. We currently simply discard all projections which do not have
> inverses. So we need them both all the time. And of course in the view
> point of having a general projection package there could be all the
> inverses also defined as far as it is practical.
>
> Regards: Janne.

I cannot say that I understand your practices but outside of cadastral 
operations I do not see the usefulness of more than a four or five 
projections---even less for screen display.

Really, for point and click operations one only needs equidistant cylindrical 
and polar.

For publication use anything that suits the purpose because you do not need to 
retrieve data from such output.

As I said before, I do not comprehend the why of the "needs" of your users 
and/or the item you are selling.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Oct 27 08:30:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 27 Oct 2008 11:30:16 -0400
Subject: [Proj] Why?
In-Reply-To: <200810271108.01393.geraldi.evenden@gmail.com>
References: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
	<200810271108.01393.geraldi.evenden@gmail.com>
Message-ID: <4905DE88.10904@pobox.com>

Gerald I. Evenden wrote:
> On Monday 27 October 2008 9:48:36 am support.mn at elisanet.fi wrote:
>> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
>>> One burning question has come up in my mind about the need for inverse
>>> solutions for non-grid-system projections like Aitoff, Hammer, etc.: why?
>> For our part we need the inverse for every projection, since the users want
>> to get their coordinates and other information just by clicking on the
>> maps. For us those projections without forward and inveres are not usable
>> at all. We currently simply discard all projections which do not have
>> inverses. So we need them both all the time. And of course in the view
>> point of having a general projection package there could be all the
>> inverses also defined as far as it is practical.
>>
>> Regards: Janne.
> 
> I cannot say that I understand your practices but outside of cadastral 
> operations I do not see the usefulness of more than a four or five 
> projections---even less for screen display.
> 
> Really, for point and click operations one only needs equidistant cylindrical 
> and polar.
> 
> For publication use anything that suits the purpose because you do not need to 
> retrieve data from such output.
> 
> As I said before, I do not comprehend the why of the "needs" of your users 
> and/or the item you are selling.

Gerald,

I'm with Janne on this.  In typical GIS applications (I am often dealing
with users of UMN MapServer) it is necessary for the projections to be
invertable in order to use them systematically.   From a practical point of
view there is little point in asking why folks use a particular projection
in a particular way.  If the projection exists it will get used in a
variety of ways - some of which are objectively somewhat silly.

But to be well behaved for applications built on it, it is very helpful
for the library to support inverses for all projections that might get
used.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Oct 27 10:14:03 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 27 Oct 2008 13:14:03 -0400
Subject: [Proj] Why?
In-Reply-To: <4905DE88.10904@pobox.com>
References: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
	<200810271108.01393.geraldi.evenden@gmail.com>
	<4905DE88.10904@pobox.com>
Message-ID: <200810271314.03499.geraldi.evenden@gmail.com>

On Monday 27 October 2008 11:30:16 am Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > On Monday 27 October 2008 9:48:36 am support.mn at elisanet.fi wrote:
> >> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> >>> One burning question has come up in my mind about the need for inverse
> >>> solutions for non-grid-system projections like Aitoff, Hammer, etc.:
> >>> why?
> >>
> >> For our part we need the inverse for every projection, since the users
> >> want to get their coordinates and other information just by clicking on
> >> the maps. For us those projections without forward and inveres are not
> >> usable at all. We currently simply discard all projections which do not
> >> have inverses. So we need them both all the time. And of course in the
> >> view point of having a general projection package there could be all the
> >> inverses also defined as far as it is practical.
> >>
> >> Regards: Janne.
> >
> > I cannot say that I understand your practices but outside of cadastral
> > operations I do not see the usefulness of more than a four or five
> > projections---even less for screen display.
> >
> > Really, for point and click operations one only needs equidistant
> > cylindrical and polar.
> >
> > For publication use anything that suits the purpose because you do not
> > need to retrieve data from such output.
> >
> > As I said before, I do not comprehend the why of the "needs" of your
> > users and/or the item you are selling.
>
> Gerald,
>
> I'm with Janne on this.  In typical GIS applications (I am often dealing
> with users of UMN MapServer) it is necessary for the projections to be
> invertable in order to use them systematically.   From a practical point of
> view there is little point in asking why folks use a particular projection
> in a particular way.  If the projection exists it will get used in a
> variety of ways - some of which are objectively somewhat silly.
>
> But to be well behaved for applications built on it, it is very helpful
> for the library to support inverses for all projections that might get
> used.
>
> Best regards,

Let's go back to basics: I have not restricted or deminished the use of 
libproj4 from the level of its current distribution.  It is still free and 
very open software and does everything that the old version does.

The only problem is that if someone wants to use some new features they may 
run into another license such as GPL.  To the best of my interpretation, 
using the GPL material does not cost anything and has no restriction on 
personal usage.  Again, if I am wrong in my interpretation of GPL please 
correct me.

Remember, there hase been a current gsl/GPL requirement with libproj4 if you 
want to use all the projections in the library.  This does not seem to have 
been the end of the World.

Where I suspect we are getting into conflict is with commercial use of 
libproj4 and the monkey wrench that GPL introduces into the sale of a product 
that may contain material with GPL.  To answer this problem I suggest that 
there are probably many suppliers of similar libraries which will do the same 
thing and are readily patchable as a replacement.  This may add some license 
fee expense  to the product but, alas, that is a business problem.

Lastly, to reemphasize my reason for using gsl is that the gsl procedures 
involved do a better job and are more robust than simple application of 
Newton-Raphson.  Secondly, there is the ability to find inverses of 
projections where practical determination of derivatives is impossible.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Oct 27 10:47:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 27 Oct 2008 13:47:32 -0400
Subject: [Proj] Why?
In-Reply-To: <200810271314.03499.geraldi.evenden@gmail.com>
References: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
	<200810271108.01393.geraldi.evenden@gmail.com>
	<4905DE88.10904@pobox.com>
	<200810271314.03499.geraldi.evenden@gmail.com>
Message-ID: <4905FEB4.9010606@pobox.com>

Gerald I. Evenden wrote:
> Lastly, to reemphasize my reason for using gsl is that the gsl procedures 
> involved do a better job and are more robust than simple application of 
> Newton-Raphson.  Secondly, there is the ability to find inverses of 
> projections where practical determination of derivatives is impossible.

Gerald,

As long as use of the GPL licensed gsl is optional at build time (at the
cost of somewhat reduced functionality) I see no problem with this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Oct 27 11:16:34 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 27 Oct 2008 14:16:34 -0400
Subject: [Proj] Why?
In-Reply-To: <4905FEB4.9010606@pobox.com>
References: <25668206.325321225115317798.JavaMail.support.mn@elisanet.fi>
	<200810271314.03499.geraldi.evenden@gmail.com>
	<4905FEB4.9010606@pobox.com>
Message-ID: <200810271416.34245.geraldi.evenden@gmail.com>

On Monday 27 October 2008 1:47:32 pm Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > Lastly, to reemphasize my reason for using gsl is that the gsl procedures
> > involved do a better job and are more robust than simple application of
> > Newton-Raphson.  Secondly, there is the ability to find inverses of
> > projections where practical determination of derivatives is impossible.
>
> Gerald,
>
> As long as use of the GPL licensed gsl is optional at build time (at the
> cost of somewhat reduced functionality) I see no problem with this.
>
> Best regards,

For some time there has been the 2 lines near the beginning of the Makefile:

# select to use GSL library
GSL=1

Just put a '#' at the beginning of the second line.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From mkennedy2 at earthlink.net  Wed Oct 29 12:39:45 2008
From: mkennedy2 at earthlink.net (Melita Kennedy)
Date: Wed, 29 Oct 2008 12:39:45 -0700 (GMT-07:00)
Subject: [Proj] Having all projection inverses was Re: Why
Message-ID: <14223448.1225309185769.JavaMail.root@mswamui-chipeau.atl.sa.earthlink.net>

>Date: Sun, 26 Oct 2008 13:23:05 -0400
>From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
>Subject: [Proj] Why?
>To: "PROJ.4 and general Projections Discussions"
>	<proj at lists.maptools.org>
>
>One burning question has come up in my mind about the need for inverse 
>solutions for non-grid-system projections like Aitoff, Hammer, etc.: why?
>
>It is easy to understand the need in cadastral work to be able to freely 
>interchange between Cartesian and Geographical space because the source of 
>information is in either system.
>
>But Aitoff or Winkel Tripel.  What source information is in either projection.  
>Are people now going to digitize NGS maps?  Certainly nobody uses Winkel 
>Tripel for cadastral application---do they?
>
>Just very curious.

ESRI has worked out inverses for a few projections because a customer 
had put data into them years before and now wanted to use the data 
again. They didn't have the data in any other format. Other techniques, 
like rubbersheeting or transforming the data, just didn't work that 
well.

At least how we used to do it, you also must have an inverse to project imagery 
(once the output cells are defined, unproject to figure out the cell values). 

Melita



From Robert.B.Schmunk at nasa.gov  Wed Oct 29 13:46:55 2008
From: Robert.B.Schmunk at nasa.gov (Robert B. Schmunk)
Date: Wed, 29 Oct 2008 16:46:55 -0400
Subject: [Proj] Having all projection inverses was Re: Why
Message-ID: <C1A961C8-684B-4F81-889B-F9EE31B16561@nasa.gov>


Others have stated these points, but I'll reiterate...

In my own case, I have a couple applications which make map plots
on screen and which the user can then save to disk. Since the on-
screen map is a raster image, I need the inverse formulas for a
projection in order to determine from a pixel's coordinates the
corresponding lon-lat pair and therefore the appropriate data value
or color for that pixel. Further, users are able to click on a pixel
and have the application display a box with the lon-lat values and
the data values.

I must admit that I use neither PROJ or libproj for any of this,
and I'm only posting this msg because I check in on the PROJ mailing
list now and again because of a general interest in cartography. The
discussion about inverses and the Winkel Tripel caught my eye.

The code that I am using in the above mentioned applications is all in
Java and is all of my own writing. These applications allow for use
of any one of about 80 projections. Of course, many of the projections
are almost useless for practical purposes, but coding them up was a
fun academic exercise. Interestingly, though, of those 80 projections,
only five have so far required using the scheme described by Ipbuker
and Bildirici to get the inverse. These are the Winkel Tripel (of
course), two of Raisz's orthoapsidals, the Larrivee, and a Canters
polyconic. For a couple of these, picking the initial guesstimate
for the inverse was indeed a bit tricky; IIRC, Raisz's Armadillo was
the most troublesome.

Unfortunately, my code is not yet generally available for download.
I've been meaning to release it as open source for some time, but
have just not been a hurry to do the necessary organizational
paperwork. But anyone can feel free to e-mail me if you want to see
my code for a particular projection.

The applications I referred to above include the Panoply netCDF
viewer and the G.Projector projection explorer.
http://www.giss.nasa.gov/tools/panoply/
http://www.giss.nasa.gov/tools/gprojector/


--
Robert B. Schmunk
NASA Goddard Institute for Space Studies, 2880 Broadway, New York, NY  
10025



From woklist at kyngchaos.com  Wed Oct 29 13:54:30 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 29 Oct 2008 15:54:30 -0500
Subject: [Proj] Having all projection inverses was Re: Why
In-Reply-To: <14223448.1225309185769.JavaMail.root@mswamui-chipeau.atl.sa.earthlink.net>
References: <14223448.1225309185769.JavaMail.root@mswamui-chipeau.atl.sa.earthlink.net>
Message-ID: <CF50CDF0-014B-4EB3-A307-E28D183E6DDB@kyngchaos.com>

On Oct 29, 2008, at 2:39 PM, Melita Kennedy wrote:

>> But Aitoff or Winkel Tripel.  What source information is in either  
>> projection.
>> Are people now going to digitize NGS maps?  Certainly nobody uses  
>> Winkel
>> Tripel for cadastral application---do they?
>>
>> Just very curious.
>
> At least how we used to do it, you also must have an inverse to  
> project imagery
> (once the output cells are defined, unproject to figure out the cell  
> values).
>
Ah, there's a point - GRASS uses inverse-projecting to project rasters  
(for speed, I think).  I once had to revert to Arc to project the  
GLOBE data to Winkel Tripel to generate shaded relief for a client.   
Bleh.  (the gdalwarp tool didn't work at the time on this huge  
dataset, I haven't tried since)


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy




