From kristianevers at gmail.com  Sun Dec  1 02:56:54 2024
From: kristianevers at gmail.com (Kristian Evers)
Date: Sun, 1 Dec 2024 11:56:54 +0100
Subject: [PROJ] PROJ 9.5.1RC1 & PROJ-data 1.20RC1
In-Reply-To: <CAGybdFSNT1iL9-UPOwJg1jNHAWV=ducuLuK7HcpZOWxgxFsEdQ@mail.gmail.com>
References: <96B9AE34-9BD5-4BE0-9BEA-A7BD81CED207@gmail.com>
 <CADRrdKtpQNmLps6+2TcNCq_RwNL5GDm=pkWSaPsDUX_9_LM9-g@mail.gmail.com>
 <6E4D5D89-0EDF-4518-95D3-CFC088675CD8@gmail.com>
 <CALECs+edk-LWfhGbXvczELBkyA4AqXj1Wm6oxL=1mr5GjHLhwA@mail.gmail.com>
 <CAGybdFSNT1iL9-UPOwJg1jNHAWV=ducuLuK7HcpZOWxgxFsEdQ@mail.gmail.com>
Message-ID: <556902E0-A5F9-4B56-A9B0-BCCE76585901@gmail.com>

With +1s from

Kristian
Javier
Even
Charles
Howard
Alan

I declare the motion passed. Expect a release announcement within the next couple of hours.

/Kristian

> On 29 Nov 2024, at 14.29, Alan Snow via PROJ <proj at lists.osgeo.org> wrote:
> 
> +1 Alan
> 
> On Fri, Nov 29, 2024, 3:31 AM Kristian Evers via PROJ <proj at lists.osgeo.org <mailto:proj at lists.osgeo.org>> wrote:
>> PSC Members,
>> 
>> No problems (apart from a NEWS-detail) has been reported with PROJ 9.5.1.RC2. The same is true for PROJ-data 1.20RC1,
>> so I motion that they be promoted to final releases.
>> 
>> I'll start with my +1.
>> 
>> /Kristian
>> 
>> 
>> 
>> On Wed, 27 Nov 2024 at 19:37, Kristian Evers <kristianevers at gmail.com <mailto:kristianevers at gmail.com>> wrote:
>>> 
>>>>> 
>>>>> * Database: update to EPSG v11.021 (#4254, #4275, #4297)
>>>> I think we are already in 11.022 https://github.com/OSGeo/PROJ/commit/6ab8ec8ee
>>> 
>>> Indeed we are. Good catch. I?ll update the NEWS and include it in the final release.
>>> 
>>> /Kristian
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org <mailto:PROJ at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/proj
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241201/d4973f37/attachment.htm>

From kristianevers at gmail.com  Sun Dec  1 04:08:56 2024
From: kristianevers at gmail.com (Kristian Evers)
Date: Sun, 1 Dec 2024 13:08:56 +0100
Subject: [PROJ] PROJ 9.5.1 & PROJ-data 1.20
Message-ID: <88DBB126-F44A-4044-99F9-BBA788212A0B@gmail.com>

It?s my pleasure to announce the release of PROJ 9.5.1 and PROJ-data 1.20.

The PROJ release includes updates to the the database contents, as well as
a number of bug fixes. See the release notes below.

The PROJ-data release now includes grids for use in Hungary and Th?ringen, Germany.

Download the archives here:

http://download.osgeo.org/proj/proj-9.5.1.tar.gz
http://download.osgeo.org/proj/proj-9.5.1.zip

http://download.osgeo.org/proj/proj-data-1.20.tar.gz
http://download.osgeo.org/proj/proj-data-1.20.zip

/Kristian
??????????


# PROJ Release Notes

## 9.5.1

### Updates

* Database: update to EPSG v11.022 (#4254, #4275, #4297, #4312)

* Speed-up dramatically proj.db build time (#4280)

* Database: ingest deprecated ESRI names to be able to better import old WKT ESRI (#4282)

### Bug fixes

* `findsOpsInRegistryWithIntermediate()`: Restrict to using known source/target CRS that have the same originating authority (#4252)

* `isTimeDependent()`: Do not mark "static" Coordinate Frame helmert transformations as time-dependent, only time-dependent ones (#4259)

* Fix clang-19 "warning: empty paragraph passed to '@throw' command [-Wdocumentation]" (#4263)

* WKT importer: fix `nullptr` dereference on invalid `VERTCS[]` (#4266)

* Fixed `sql_filelist.cmake` relative path issue (#4296)

* Fail consistently on network error and grid transformations (#4302)

* Fix `-Wshadow` warnings between `parammappings.cpp` and `singleoperation.cpp` with unity builds (#4304)

* Removed leftover setting of `CMAKE_REQUIRED_FLAGS` (#4322)

* WKT1 ESRI export: fix wrong mapping of Lambert Cylindrical Equal Area to Behrmann (#4328)

* Numerous documentation fixes (#4248, #4267, #4291, #4293)



From peter.townsend at maplarge.com  Tue Dec  3 08:38:42 2024
From: peter.townsend at maplarge.com (Peter Townsend)
Date: Tue, 3 Dec 2024 10:38:42 -0600
Subject: [PROJ] Custom PROJ_DATA_PATH Output Directory
Message-ID: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>

Greetings,

9.5 added the PROJ_OUTPUT_NAME cmake parameter to change the name of the
output lib /DLL files, which is absolutely great and I love it. But I also
want to customize the output directory for the proj.db file and its friends.

I've found that I can change this line here I can change it from
/usr/local/share/proj to /usr/local/share/somethingElse

/CMakeLists.txt
set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/proj")
to
set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/somethingElse")

Is there a better way to do this? Or could we add a new cmake parameter to
override either the end piece or the whole thing if it's set? Call it
PROJ_DATA_OUTPUT_PATH or PROJ_DATA_PATH_OVERRIDE?

if(DEFINED PROJ_DATA_PATH_OVERRIDE)
  set(PROJ_DATA_PATH
"${CMAKE_INSTALL_FULL_DATADIR}/${PROJ_DATA_PATH_OVERRIDE}")
  message(WARNING "PROJ_DATA_PATH option has been modified to the new value
of '${PROJ_DATA_PATH_OVERRIDE}'")
else()
  set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/proj")
endif()

-- 
Peter Townsend
Senior Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241203/09121f4c/attachment.htm>

From even.rouault at spatialys.com  Tue Dec  3 08:48:13 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Dec 2024 17:48:13 +0100
Subject: [PROJ] Custom PROJ_DATA_PATH Output Directory
In-Reply-To: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>
References: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>
Message-ID: <27fe1dd6-cb00-40cf-bf97-f0a7a942f401@spatialys.com>

>
> /CMakeLists.txt
> set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/proj")
> to
> set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/somethingElse")
>
> Is there a better way to do this? Or could we add a new cmake 
> parameter to override either the end piece or the whole thing if it's 
> set? Call it PROJ_DATA_OUTPUT_PATH or PROJ_DATA_PATH_OVERRIDE?

Make PROJ_DATA_PATH a CACHE variable with a default value to 
"${CMAKE_INSTALL_FULL_DATADIR}/proj"

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241203/179d4fb0/attachment.htm>

From gdt at lexort.com  Tue Dec  3 09:35:05 2024
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 03 Dec 2024 12:35:05 -0500
Subject: [PROJ] Custom PROJ_DATA_PATH Output Directory
In-Reply-To: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>
 (Peter Townsend via PROJ's message of "Tue, 3 Dec 2024 10:38:42
 -0600")
References: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>
Message-ID: <rmijzcgzn3q.fsf@s1.lexort.com>

Why do people want to install proj to non-standard names?    Most
packages do not support renaming, so I find it strange that this is
desirable.   The standard approach if you need two versions of anything
is to use different prefixes.  Can you explain the need?

From peter.townsend at maplarge.com  Tue Dec  3 11:24:17 2024
From: peter.townsend at maplarge.com (Peter Townsend)
Date: Tue, 3 Dec 2024 13:24:17 -0600
Subject: [PROJ] Custom PROJ_DATA_PATH Output Directory
In-Reply-To: <rmijzcgzn3q.fsf@s1.lexort.com>
References: <CAMQBGmVnJGcOJdHarUHSktR7Ux=Z+UT8m8uYB=hVQNfEC1H0cg@mail.gmail.com>
 <rmijzcgzn3q.fsf@s1.lexort.com>
Message-ID: <CAMQBGmXrrS++iRqRhsphsa=wy77sT-q9U1ASaqDPbj5cdz3tKQ@mail.gmail.com>

Thanks, the cache variable worked too, changed the line to look like this:
set(PROJ_DATA_PATH "${CMAKE_INSTALL_FULL_DATADIR}/proj" CACHE STRING
"proj.db installation path")

I've created a (slightly) customized build of proj, and we're also going to
be compiling our own GDAL for a docker image which itself requires PROJ.
Both will need to be installed. In order to keep the two libraries totally
separate, I'm renaming my custom proj to have a different filename/prefix
than proj usually generates. This way we can potentially update GDAL at a
different cadence than the customized proj library. Maybe one day we'll
have the custom library still on 9.5 but update GDAL later and use proj but
not 9.5. If both the custom proj and the system proj for GDAL go to read
proj.db from the default location, there will be a version mismatch and one
will fail. Thus, I want to build the custom proj.db file into a different
directory and it'd be nice to just have it part of the already existing
cmake install infrastructure instead of having to fuss with redirections
after the build.

As for prefixing/renaming proj.db, it seems easier to just put it in a
different install path. And then what if CONUS or one of those other loose
files got updated after all these years and caused a version mismatch
issue? Though unlikely, I don't want to have to prefix everything in there.
Plus API-wise it's easier to just call set_search_paths with this
particular location.

On Tue, Dec 3, 2024 at 11:35?AM Greg Troxel via PROJ <proj at lists.osgeo.org>
wrote:

> Why do people want to install proj to non-standard names?    Most
> packages do not support renaming, so I find it strange that this is
> desirable.   The standard approach if you need two versions of anything
> is to use different prefixes.  Can you explain the need?
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>


-- 
Peter Townsend
Senior Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241203/ff696d9a/attachment.htm>

From even.rouault at spatialys.com  Thu Dec  5 06:36:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Dec 2024 15:36:05 +0100
Subject: [PROJ] Adding a service provider page to our doc?
Message-ID: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>

Hi,

I believe we lack a page such as 
https://gdal.org/en/stable/community/service_providers.html for PROJ. Do 
we want to create one? For GDAL, it is governed by 
https://gdal.org/en/stable/development/rfc/rfc79_listing_service_providers.html 
. I guess a sed "s/GDAL/PROJ/" could make it relevant for PROJ too.

Anyone who would want to appear on a PROJ service provider page?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From ulisesmartinibarra at gmail.com  Fri Dec  6 12:28:57 2024
From: ulisesmartinibarra at gmail.com (Ulises Ibarra)
Date: Fri, 6 Dec 2024 14:28:57 -0600
Subject: [PROJ] Syntax to change projection from UTM to TM
Message-ID: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>

Hello, I would like you to please guide me with my following couple of
questions:

I have a list of coordinates in a UTM Zone 14 North projection, in the
ITRF2008 datum, I would like to change them to a Transverse Mercator
projection, in which the central meridian lon_0 coincides in longitude with
one of the points on my list, point 1: UTM(1, East=479969.231,
North=2143791.499, Elevation=2274.949) and or in geographic coordinates (1,
lat=19.388187333, lon=-99.190762728, Elevation=2274.949)

Question: Would it be correct to use the following syntax and parameters?
Because I am not getting the expected result.:

echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
+proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
+lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231 +y_0=2143791.499
+ellps=GRS80 +k=1

I get the output: 480037.2841   2143783.7685     2271.2940           inf

The correct result should be:   480037.3001 2143783.6901 2271.294

Best regards

Ulises
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241206/b282dcb4/attachment.htm>

From j1 at jimenezshaw.com  Fri Dec  6 12:41:09 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 6 Dec 2024 21:41:09 +0100
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
Message-ID: <CADRrdKt_DSvxahZ+QFdqcq064eJza_EMUHLADzbkuwdXHh8LuA@mail.gmail.com>

Why +k=0.9996439573 for UTM?
It should be 0.9996, right?

On Fri, 6 Dec 2024, 21:29 Ulises Ibarra via PROJ, <proj at lists.osgeo.org>
wrote:

> Hello, I would like you to please guide me with my following couple of
> questions:
>
> I have a list of coordinates in a UTM Zone 14 North projection, in the
> ITRF2008 datum, I would like to change them to a Transverse Mercator
> projection, in which the central meridian lon_0 coincides in longitude with
> one of the points on my list, point 1: UTM(1, East=479969.231,
> North=2143791.499, Elevation=2274.949) and or in geographic coordinates (1,
> lat=19.388187333, lon=-99.190762728, Elevation=2274.949)
>
> Question: Would it be correct to use the following syntax and parameters?
> Because I am not getting the expected result.:
>
> echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
> +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
> +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231 +y_0=2143791.499
> +ellps=GRS80 +k=1
>
> I get the output: 480037.2841   2143783.7685     2271.2940           inf
>
> The correct result should be:   480037.3001 2143783.6901 2271.294
>
> Best regards
>
> Ulises
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241206/3bbec14a/attachment.htm>

From ulisesmartinibarra at gmail.com  Fri Dec  6 13:19:30 2024
From: ulisesmartinibarra at gmail.com (Ulises Ibarra)
Date: Fri, 6 Dec 2024 15:19:30 -0600
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6jJwRK4dHe2Ydx+nCrBWHW8LB7e8YeC78HW=GPxmAxt6g@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <CADRrdKt_DSvxahZ+QFdqcq064eJza_EMUHLADzbkuwdXHh8LuA@mail.gmail.com>
 <CAP=Ak6jJwRK4dHe2Ydx+nCrBWHW8LB7e8YeC78HW=GPxmAxt6g@mail.gmail.com>
Message-ID: <CAP=Ak6j3WtPAuq-73FFPHLSym0GRHWooXewZUpjsdCogKS5hBA@mail.gmail.com>

El vie, 6 de dic de 2024, 2:50 p. m., Ulises Ibarra <
ulisesmartinibarra at gmail.com> escribi?:

> I put it like this because the GNSS point processing report shows that
> precision:
>
> *ID*
>
>
> *Este (Metro)*
>
>
> *Norte (Metro)*
>
>
> *Elevaci?n (Metro)*
>
> *C?digo de caracter?stica*
>
> *Factor de escala de proyecci?n*
>
> *Factor de escala de altura*
>
> *Factor de escala combinada*
>
> *?ngulo de convergencia de meridiano*
>
> 1
> <http://localhost:62166/?Project=517934e2-64fe-458c-8f31-01d1e5466692&SerialNumber=1225>
>
> 479969.231
>
> 2143791.499
>
> 2274.949
>
>
> 0.9996049594
>
> 0.9996433833
>
> 0.9992484835
>
> -0?03'48"
>
> 2
> <http://localhost:62166/?Project=517934e2-64fe-458c-8f31-01d1e5466692&SerialNumber=1221>
>
> 480037.249
>
> 2143783.696
>
> 2271.294
>
> vert
>
> 0.9996049258
>
> 0.9996439573
>
> 0.9992490237
>
> -0?03'47"
>
> ICMX
> <http://localhost:62166/?Project=517934e2-64fe-458c-8f31-01d1e5466692&SerialNumber=1246>
>
> 482061.740
>
> 2145720.665
>
> 2272.977
>
>
> 0.9996039773
>
> 0.9996436929
>
> 0.9992478113
>
> -0?03'24"
>
> El vie, 6 dic 2024 a las 14:41, Javier Jimenez Shaw (<j1 at jimenezshaw.com>)
> escribi?:
>
>> Why +k=0.9996439573 for UTM?
>> It should be 0.9996, right?
>>
>> On Fri, 6 Dec 2024, 21:29 Ulises Ibarra via PROJ, <proj at lists.osgeo.org>
>> wrote:
>>
>>> Hello, I would like you to please guide me with my following couple of
>>> questions:
>>>
>>> I have a list of coordinates in a UTM Zone 14 North projection, in the
>>> ITRF2008 datum, I would like to change them to a Transverse Mercator
>>> projection, in which the central meridian lon_0 coincides in longitude with
>>> one of the points on my list, point 1: UTM(1, East=479969.231,
>>> North=2143791.499, Elevation=2274.949) and or in geographic coordinates (1,
>>> lat=19.388187333, lon=-99.190762728, Elevation=2274.949)
>>>
>>> Question: Would it be correct to use the following syntax and
>>> parameters? Because I am not getting the expected result.:
>>>
>>> echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
>>> +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
>>> +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231 +y_0=2143791.499
>>> +ellps=GRS80 +k=1
>>>
>>> I get the output: 480037.2841   2143783.7685     2271.2940           inf
>>>
>>> The correct result should be:   480037.3001 2143783.6901 2271.294
>>>
>>> Best regards
>>>
>>> Ulises
>>> _______________________________________________
>>> PROJ mailing list
>>> PROJ at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/proj
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241206/3776533d/attachment-0001.htm>

From gdt at lexort.com  Fri Dec  6 15:58:55 2024
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 06 Dec 2024 18:58:55 -0500
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 (Ulises Ibarra via PROJ's message of "Fri, 6 Dec 2024 14:28:57 -0600")
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
Message-ID: <rmiikrwl5xc.fsf@s1.lexort.com>

Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:

> echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
> +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
> +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231 +y_0=2143791.499
> +ellps=GRS80 +k=1

I am far from an expert here, but "UTM zone 14" defines everything about
the projection, so I don't understand why you are needing to specify the
k.  Also sort of the ellipse, but people use UTM with both NAD83 and
WGS84, and you are using it with ITRF2008.

https://www.oc.nps.edu/oc2902w/maps/utmups.pdf

may be useful

From ulisesmartinibarra at gmail.com  Fri Dec  6 16:09:42 2024
From: ulisesmartinibarra at gmail.com (Ulises Ibarra)
Date: Fri, 6 Dec 2024 18:09:42 -0600
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <rmiikrwl5xc.fsf@s1.lexort.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
Message-ID: <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>

El vie, 6 dic 2024 a las 17:59, Greg Troxel via PROJ (<proj at lists.osgeo.org>)
escribi?:

> Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:
>
> > echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
> > +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
> > +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231 +y_0=2143791.499
> > +ellps=GRS80 +k=1
>
> I am far from an expert here, but "UTM zone 14" defines everything about
> the projection, so I don't understand why you are needing to specify the
> k.  Also sort of the ellipse, but people use UTM with both NAD83 and
> WGS84, and you are using it with ITRF2008.
>

* I need to specify in detail because I think I have no idea what I'm doing
:P.
* So I understand that the k is not necessary to use in the command. Is
this correct?
* I don't understand what you said about there being people who use both
NAD83 and WGS84 and I am using  ITRF2008, could you explain it better?
Maybe I shouldn't specify the ellipsoid?

>
> https://www.oc.nps.edu/oc2902w/maps/utmups.pdf
>
> may be useful
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241206/7ca560b2/attachment.htm>

From gdt at lexort.com  Fri Dec  6 17:44:32 2024
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 06 Dec 2024 20:44:32 -0500
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
 (Ulises Ibarra via PROJ's message of "Fri, 6 Dec 2024 18:09:42 -0600")
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
Message-ID: <rmittbgjmgv.fsf@s1.lexort.com>

Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:

> * I need to specify in detail because I think I have no idea what I'm doing
> :P.

> * So I understand that the k is not necessary to use in the command. Is
> this correct?

Javier said you had the wrong value.  UTM is a particular instance of
TM.  Besides a defined central meridian scale factor, there are 60 zones
each with their central meridian.  So try it with no +k at all.

> * I don't understand what you said about there being people who use both
> NAD83 and WGS84 and I am using  ITRF2008, could you explain it better?
> Maybe I shouldn't specify the ellipsoid?

I guessed from the zone that you are in North America; maybe that was
wrong.

Each datum has an associated ellipsoid.  Many (large majority?) use
GRS80.  WGS84, used in GPS and by the US DoD, but not really of interest
for precise positioning, uses an ellipsoid which is almost GRS80,
arguably because of rounding and a different approach to specifying it.
But it is simply different.  The effect of this is tiny; my memory is
that it's about 1 mm at the earth's surface for coordinates.

When you ask proj to transform from some projected coordinate system
like UTM to geodetic (lat/lon) coordinates, you need to specify an
ellipsoid.  Unless the coordinates are in a CRS which specifies both UTM
and a base datum, in which case it's implicit.

But you have data in ITRF2008, and you aren't telling proj that.  You
are just doing projections.  That's totally ok -- that's how proj used
to be.  But you need to be aware of the datum and ellipsoid yourself.  I
think you are getting it right.

From j1 at jimenezshaw.com  Sat Dec  7 00:04:37 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 7 Dec 2024 09:04:37 +0100
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
Message-ID: <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>

On Sat, 7 Dec 2024, 01:10 Ulises Ibarra via PROJ, <proj at lists.osgeo.org>
wrote:

>
> El vie, 6 dic 2024 a las 17:59, Greg Troxel via PROJ (<
> proj at lists.osgeo.org>) escribi?:
>
>> Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:
>>
>> > echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
>> > +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
>> > +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231
>> +y_0=2143791.499
>> > +ellps=GRS80 +k=1
>>
>> I am far from an expert here, but "UTM zone 14" defines everything about
>> the projection, so I don't understand why you are needing to specify the
>> k.  Also sort of the ellipse, but people use UTM with both NAD83 and
>> WGS84, and you are using it with ITRF2008.
>>
>
> * I need to specify in detail because I think I have no idea what I'm
> doing :P
>
If you explain all the inputs in detail, including those k and why you
expect that output, I can try to guess it.
The PROJ pipeline I think is correct, except for the values themselves (k,
false easting and northing)

> .
> * So I understand that the k is not necessary to use in the command. Is
> this correct?
> * I don't understand what you said about there being people who use both
> NAD83 and WGS84 and I am using  ITRF2008, could you explain it better?
> Maybe I shouldn't specify the ellipsoid?
>
>>
>> https://www.oc.nps.edu/oc2902w/maps/utmups.pdf
>>
>> may be useful
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241207/bb1116fb/attachment.htm>

From howard at hobu.co  Mon Dec  9 10:27:59 2024
From: howard at hobu.co (Howard Butler)
Date: Mon, 9 Dec 2024 12:27:59 -0600
Subject: [PROJ] Adding a service provider page to our doc?
In-Reply-To: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>
References: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>
Message-ID: <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>



> On Dec 5, 2024, at 8:36?AM, Even Rouault via PROJ <proj at lists.osgeo.org> wrote:
> 
> Hi,
> 
> I believe we lack a page such as https://gdal.org/en/stable/community/service_providers.html for PROJ. Do we want to create one? For GDAL, it is governed by https://gdal.org/en/stable/development/rfc/rfc79_listing_service_providers.html . I guess a sed "s/GDAL/PROJ/" could make it relevant for PROJ too.
> 
> Anyone who would want to appear on a PROJ service provider page?

Is there any other viable commercial service provider for PROJ besides Spatialys? ;) 

I totally support adding a page and adding your company to it so people know where to go.

Howard

From knudsen.thomas at gmail.com  Mon Dec  9 10:32:33 2024
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Mon, 9 Dec 2024 19:32:33 +0100
Subject: [PROJ] Adding a service provider page to our doc?
In-Reply-To: <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>
References: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>
 <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>
Message-ID: <CAH0YoEO-+xnN0aW_0gYE+4250x9WBt13udMFFO2pveA=L4jLpg@mail.gmail.com>

Totally agree with Howard!

/Thomas

Den man. 9. dec. 2024 kl. 19.28 skrev Howard Butler via PROJ <
proj at lists.osgeo.org>:

>
>
> > On Dec 5, 2024, at 8:36?AM, Even Rouault via PROJ <proj at lists.osgeo.org>
> wrote:
> >
> > Hi,
> >
> > I believe we lack a page such as
> https://gdal.org/en/stable/community/service_providers.html for PROJ. Do
> we want to create one? For GDAL, it is governed by
> https://gdal.org/en/stable/development/rfc/rfc79_listing_service_providers.html
> . I guess a sed "s/GDAL/PROJ/" could make it relevant for PROJ too.
> >
> > Anyone who would want to appear on a PROJ service provider page?
>
> Is there any other viable commercial service provider for PROJ besides
> Spatialys? ;)
>
> I totally support adding a page and adding your company to it so people
> know where to go.
>
> Howard
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241209/99ae151b/attachment.htm>

From ulisesmartinibarra at gmail.com  Mon Dec  9 11:22:02 2024
From: ulisesmartinibarra at gmail.com (Ulises Ibarra)
Date: Mon, 9 Dec 2024 13:22:02 -0600
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
 <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>
Message-ID: <CAP=Ak6gV2XL25mQD7kqR4gT43eQV8fEDLEXV6-K+NGSzMqd7BA@mail.gmail.com>

Thanks Greg and Javier
I'm putting below what I wanted to do according to the syntax I used.
But I want to clarify my purpose again: Change UTM projection coordinates
to a terrain projection, to use with topography, that is, with a scale
factor of 1.

El s?b, 7 dic 2024 a las 2:04, Javier Jimenez Shaw (<j1 at jimenezshaw.com>)
escribi?:

>
>
> On Sat, 7 Dec 2024, 01:10 Ulises Ibarra via PROJ, <proj at lists.osgeo.org>
> wrote:
>
>>
>> El vie, 6 dic 2024 a las 17:59, Greg Troxel via PROJ (<
>> proj at lists.osgeo.org>) escribi?:
>>
>>> Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:
>>>
>>> > echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
>>> > +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
>>> > +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231
>>> +y_0=2143791.499
>>> > +ellps=GRS80 +k=1
>>>
>>> I am far from an expert here, but "UTM zone 14" defines everything about
>>> the projection, so I don't understand why you are needing to specify the
>>> k.  Also sort of the ellipse, but people use UTM with both NAD83 and
>>> WGS84, and you are using it with ITRF2008.
>>>
>>
>> * I need to specify in detail because I think I have no idea what I'm
>> doing :P
>>
> If you explain all the inputs in detail, including those k and why you
> expect that output, I can try to guess it.
>

Now, I think I'm not understanding well how PROJ syntax works, but I'll
explain what I want to do step by step:

A) Enter a coordinate (East, North, Elevation) and send it to the cct
command to reproject it:
echo 480037.249 2143783.696 2271.294 | cct

B) Define a "pipeline" projection
+proj=pipeline

C) I really don't know why to use "+inv" but if I don't use it, it just
produces an error.
+step +inv

D) Tell PROJ the characteristics of the source cartographic projection:
+proj=utm (projection=utm)
+zone=14 (zone 14 _North (I see that I did not specify that it should be in
the Northern hemisphere))
+ellipse=GRS80 (I assumed that if the GNSS processing software gave me the
results of the ground control points in the ITRF2008 Datum, I should use
the GRS80 ellipse)
+k=0.9996439573 (I also tell PROJ the scale factor that the GNSS processing
software told me that these points have)

E) I try to tell PROJ the characteristics of the target cartographic
projection:
+step
+proj=tmerc (the target cartographic projection)
+lat_0=19.388187333 +lon_0=-99.190762728 (the latitude and longitude of the
point through which I want the meridian to pass where the transverse
cylinder would make tangency)
+x_0=479969.231 +y_0=2143791.499 (the coordinates of the point that would
be the false origin of the local coordinate system)
+ellps=GRS80 (I tell PROJ to use the ellipsoid that the ITRF2008 Datum uses)
+k=1 (and finally, that the scale factor is equal to 1, because I cannot
tell it, or perhaps I do not know how to tell it, that the radius of the
transverse cylinder is tangent to the point I have been talking about, the
point that coincides with the longitude lon_0)

Now that I am reading a little more, I am wondering if the syntax of PROJ,
or of the pipelines, is to tell it the source and the target, and that
instead of that it would be necessary to tell it exactly what operations to
do.

The PROJ pipeline I think is correct, except for the values themselves (k,
> false easting and northing)
>
>> .
>> * So I understand that the k is not necessary to use in the command. Is
>> this correct?
>> * I don't understand what you said about there being people who use both
>> NAD83 and WGS84 and I am using  ITRF2008, could you explain it better?
>> Maybe I shouldn't specify the ellipsoid?
>>
>>>
>>> https://www.oc.nps.edu/oc2902w/maps/utmups.pdf
>>>
>>> may be useful
>>> _______________________________________________
>>> PROJ mailing list
>>> PROJ at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/proj
>>>
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241209/7194ebca/attachment.htm>

From j1 at jimenezshaw.com  Mon Dec  9 12:06:57 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 9 Dec 2024 21:06:57 +0100
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CAP=Ak6gV2XL25mQD7kqR4gT43eQV8fEDLEXV6-K+NGSzMqd7BA@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
 <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>
 <CAP=Ak6gV2XL25mQD7kqR4gT43eQV8fEDLEXV6-K+NGSzMqd7BA@mail.gmail.com>
Message-ID: <CADRrdKs3FtAwkqPbA0EY0iAr-5jUQhUaKy8pDkdJegy7rXPFdg@mail.gmail.com>

Hi Ulises.

I think you are misunderstanding some concepts.
This presentation about the American reference systems may help you
https://geodesy.noaa.gov/web/science_edu/webinar_series/changes-afoot-after-2022.shtml
or this paper
https://www.fig.net/resources/proceedings/fig_proceedings/fig2023/papers/cinema03/CINEMA03_dennis_12044.pdf

You should have clear the difference of the k used in a projection (what is
a value used in the formula trying to adjust the distortion) and the scale
factor of your measurements (that is the ratio between a distance in the
map and a distance in the RealWorld(tm)). They are somehow connected, but
you are mixing them.

UTM, as Greg mentioned, has a fixed k=0.9996. Why? Because the projections
distort, with a k=1 there is no distortion at the tangent point and 0
ellipsoidal elevation. But that distortion grows when you move apart from
the center. For that purpose k is smaller than 1, distorting in the center,
but reducing the maximum distortion near the borders. The k of that
projection is always 0.9996. The scale factor depends on where you are,
because the distortion is not constant.
You cannot change it for UTM (actually it does not affect the results. It
is ignored in PROJ if my checks were correct).

When you measure a distance in the ellipsoid and you compare with the
distance in the projection there is a difference. That is what you have in
your table. In the center of the UTM zone is 0.9996, and grows when you
move appart. It is about 1 near 300km from the central line. Your points
are near the center of the UTM zone (lon 99 deg), that is why 0.9996049594
is near 0.9996.

When you center your transverse Mercator in your (small) area of work
(setting lon_0 and lat_0), you want to use something near k=1. Because you
do not want to cover the wide range of 6 degrees of the UTM zone.

There is an effect due to the elevation (factor de escala de altura). The
higher you are, the more apart are points with same lat-lon, just because
the radius at this point is not the radius of the ellipsoid, but something
a bit bigger.
You are in Mexico City (that is high ;), so the custom TM should have a k >
1 to compensate the elevation respect to the ellipsoid.

See that those factors can be multiplying of dividing. Depending on the use
case, and I have it never clear, I rethink again every time.

What always make me nuts is the false easting and northing. They are just
to have positive numbers in your coordinates (it is just adding an offset
to the final numbers). I am never sure if they are "real" meters or
"distorted" meters (I think the latter).

Cheers
Javier

On Mon, 9 Dec 2024 at 20:22, Ulises Ibarra via PROJ <proj at lists.osgeo.org>
wrote:

> Thanks Greg and Javier
> I'm putting below what I wanted to do according to the syntax I used.
> But I want to clarify my purpose again: Change UTM projection coordinates
> to a terrain projection, to use with topography, that is, with a scale
> factor of 1.
>
> El s?b, 7 dic 2024 a las 2:04, Javier Jimenez Shaw (<j1 at jimenezshaw.com>)
> escribi?:
>
>>
>>
>> On Sat, 7 Dec 2024, 01:10 Ulises Ibarra via PROJ, <proj at lists.osgeo.org>
>> wrote:
>>
>>>
>>> El vie, 6 dic 2024 a las 17:59, Greg Troxel via PROJ (<
>>> proj at lists.osgeo.org>) escribi?:
>>>
>>>> Ulises Ibarra via PROJ <proj at lists.osgeo.org> writes:
>>>>
>>>> > echo 480037.249 2143783.696 2271.294 | cct +proj=pipeline +step +inv
>>>> > +proj=utm +zone=14 +ellps=GRS80 +k=0.9996439573 +step +proj=tmerc
>>>> > +lat_0=19.388187333 +lon_0=-99.190762728 +x_0=479969.231
>>>> +y_0=2143791.499
>>>> > +ellps=GRS80 +k=1
>>>>
>>>> I am far from an expert here, but "UTM zone 14" defines everything about
>>>> the projection, so I don't understand why you are needing to specify the
>>>> k.  Also sort of the ellipse, but people use UTM with both NAD83 and
>>>> WGS84, and you are using it with ITRF2008.
>>>>
>>>
>>> * I need to specify in detail because I think I have no idea what I'm
>>> doing :P
>>>
>> If you explain all the inputs in detail, including those k and why you
>> expect that output, I can try to guess it.
>>
>
> Now, I think I'm not understanding well how PROJ syntax works, but I'll
> explain what I want to do step by step:
>
> A) Enter a coordinate (East, North, Elevation) and send it to the cct
> command to reproject it:
> echo 480037.249 2143783.696 2271.294 | cct
>
> B) Define a "pipeline" projection
> +proj=pipeline
>
> C) I really don't know why to use "+inv" but if I don't use it, it just
> produces an error.
> +step +inv
>
> D) Tell PROJ the characteristics of the source cartographic projection:
> +proj=utm (projection=utm)
> +zone=14 (zone 14 _North (I see that I did not specify that it should be
> in the Northern hemisphere))
> +ellipse=GRS80 (I assumed that if the GNSS processing software gave me the
> results of the ground control points in the ITRF2008 Datum, I should use
> the GRS80 ellipse)
> +k=0.9996439573 (I also tell PROJ the scale factor that the GNSS
> processing software told me that these points have)
>
> E) I try to tell PROJ the characteristics of the target cartographic
> projection:
> +step
> +proj=tmerc (the target cartographic projection)
> +lat_0=19.388187333 +lon_0=-99.190762728 (the latitude and longitude of
> the point through which I want the meridian to pass where the transverse
> cylinder would make tangency)
> +x_0=479969.231 +y_0=2143791.499 (the coordinates of the point that would
> be the false origin of the local coordinate system)
> +ellps=GRS80 (I tell PROJ to use the ellipsoid that the ITRF2008 Datum
> uses)
> +k=1 (and finally, that the scale factor is equal to 1, because I cannot
> tell it, or perhaps I do not know how to tell it, that the radius of the
> transverse cylinder is tangent to the point I have been talking about, the
> point that coincides with the longitude lon_0)
>
> Now that I am reading a little more, I am wondering if the syntax of PROJ,
> or of the pipelines, is to tell it the source and the target, and that
> instead of that it would be necessary to tell it exactly what operations to
> do.
>
> The PROJ pipeline I think is correct, except for the values themselves (k,
>> false easting and northing)
>>
>>> .
>>> * So I understand that the k is not necessary to use in the command. Is
>>> this correct?
>>> * I don't understand what you said about there being people who use both
>>> NAD83 and WGS84 and I am using  ITRF2008, could you explain it better?
>>> Maybe I shouldn't specify the ellipsoid?
>>>
>>>>
>>>> https://www.oc.nps.edu/oc2902w/maps/utmups.pdf
>>>>
>>>> may be useful
>>>> _______________________________________________
>>>> PROJ mailing list
>>>> PROJ at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/proj
>>>>
>>> _______________________________________________
>>> PROJ mailing list
>>> PROJ at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/proj
>>>
>> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241209/84e162ae/attachment.htm>

From gdt at lexort.com  Mon Dec  9 12:28:03 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 09 Dec 2024 15:28:03 -0500
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CADRrdKs3FtAwkqPbA0EY0iAr-5jUQhUaKy8pDkdJegy7rXPFdg@mail.gmail.com>
 (Javier Jimenez Shaw via PROJ's message of "Mon, 9 Dec 2024 21:06:57
 +0100")
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
 <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>
 <CAP=Ak6gV2XL25mQD7kqR4gT43eQV8fEDLEXV6-K+NGSzMqd7BA@mail.gmail.com>
 <CADRrdKs3FtAwkqPbA0EY0iAr-5jUQhUaKy8pDkdJegy7rXPFdg@mail.gmail.com>
Message-ID: <rmibjxklhyk.fsf@s1.lexort.com>

Javier Jimenez Shaw via PROJ <proj at lists.osgeo.org> writes:

> I think you are misunderstanding some concepts.
> This presentation about the American reference systems may help you
> https://geodesy.noaa.gov/web/science_edu/webinar_series/changes-afoot-after-2022.shtml

I hope Ulises is working in meters.  But, regardless of claimed
deprecations, sometimes people use UTM in survey feet, sometimes in
international feet, and these days more in meters.

> or this paper
> https://www.fig.net/resources/proceedings/fig_proceedings/fig2023/papers/cinema03/CINEMA03_dennis_12044.pdf

I think that is still in the future, because it is about NATRF2022 which
is not yet released.    So far I am unaware of any actual use of
SPCS2022.

But this is an awesome reference for understanding.

> You cannot change it for UTM (actually it does not affect the results. It
> is ignored in PROJ if my checks were correct).

Interesting.  probably proj should throw an error.

> When you center your transverse Mercator in your (small) area of work
> (setting lon_0 and lat_0), you want to use something near k=1. Because you
> do not want to cover the wide range of 6 degrees of the UTM zone.

Agreed.  Arguably you want something so that the average distortion over
your area is zero, but for 10s of km and probably  even  100km, 0 is
good enough and simpler.

> There is an effect due to the elevation (factor de escala de altura). The
> higher you are, the more apart are points with same lat-lon, just because
> the radius at this point is not the radius of the ellipsoid, but something
> a bit bigger.
> You are in Mexico City (that is high ;), so the custom TM should have a k >
> 1 to compensate the elevation respect to the ellipsoid.

I have long wondered about this.  My impression is that in surveying,
the actual horizonal distance is measured and then this distance is
reduced to the geoid/ellipsoid.  That is, one is intending to measure
the distance not between two points, but the distance between their
projections along the plumb line to the geoid.  I may be confused about
this; the SPCS2022 paper makes me lean that way.  But maybe they want
the SPCS distance to match EDM even if you reduce both?

But it really depends on what  you want, and if you want the property
that distances in UTM are one thing or the other.

> What always make me nuts is the false easting and northing. They are just
> to have positive numbers in your coordinates (it is just adding an offset
> to the final numbers). I am never sure if they are "real" meters or
> "distorted" meters (I think the latter).

I'm pretty sure they are just added after projecting.   With UTM this
lets easting be positive even W of the central meridian, and northing be
positive in the southern hemisphere.

Really, the only thing that's meaningful with UTM is

  - transform back to geodetic

  - do cartesian distance from E1,N1 to E2,N2 (same zone only!) and
    treat that as a linear horizontal distance, generally not worrying
    about the scale factor

From charles.karney at gmail.com  Mon Dec  9 14:14:43 2024
From: charles.karney at gmail.com (Charles Karney)
Date: Mon, 9 Dec 2024 17:14:43 -0500
Subject: [PROJ] Syntax to change projection from UTM to TM
In-Reply-To: <CADRrdKs3FtAwkqPbA0EY0iAr-5jUQhUaKy8pDkdJegy7rXPFdg@mail.gmail.com>
References: <CAP=Ak6ii8AGLux2P2-nNSH7eyRRRDNLDi29-xO_98Eri0TY3Pw@mail.gmail.com>
 <rmiikrwl5xc.fsf@s1.lexort.com>
 <CAP=Ak6gqoaDER6mBZp-hAa-vWpsHWf7fsApM_zv9neuPVrxgZw@mail.gmail.com>
 <CADRrdKu5_ZT-xmRUU6t2L7J+vHV5aZO_=yqSBDFFMQEmuw1A3Q@mail.gmail.com>
 <CAP=Ak6gV2XL25mQD7kqR4gT43eQV8fEDLEXV6-K+NGSzMqd7BA@mail.gmail.com>
 <CADRrdKs3FtAwkqPbA0EY0iAr-5jUQhUaKy8pDkdJegy7rXPFdg@mail.gmail.com>
Message-ID: <faa62d19-5c0a-4cee-9e27-ebf77bb04cde@alum.mit.edu>

On 12/9/24 3:06 PM, Javier Jimenez Shaw via PROJ wrote:
> What always make me nuts is the false easting and northing. They are 
> just to have positive numbers in your coordinates (it is just adding an 
> offset to the final numbers). I am never sure if they are "real" meters 
> or "distorted" meters (I think the latter).

I sympathize!  However there's a sound reason for having all the
coordinates positive, namely computing their differences is more
systematic.  If one of the numbers is negative you have to switch to the
rules for addition.  (We're talking about hand calculations here, of
course.)

I'm old enough to have used log tables and there was a similar
notational trick here.  Thus log(2) = 0.3 (these are common logs) and so
log(0.2) = 0.3 - 1 = -0.7.  But when multiplying a bunch of numbers,
i.e., adding a bunch of logs, you don't want a few of them to be
negative.  So log(0.2) was written either as

   bar1 . 3  (bar1 means -1 only in the units place), or
   9 . 3 (10 added to negative logs)

[Yes, the false easting and northing are distorted meters.]

-- 
Charles Karney <karney at alum.mit.edu>
702 Prospect Ave
Princeton, NJ 08540-4037


From luis.de.sousa at protonmail.ch  Tue Dec 10 03:07:38 2024
From: luis.de.sousa at protonmail.ch (=?utf-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Dec 2024 11:07:38 +0000
Subject: [PROJ] Adding a service provider page to our doc?
In-Reply-To: <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>
References: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>
 <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>
Message-ID: <hWYfBSgmIoEEVMdTsLKMluQkmSdaTrrUwNzpT7LcFmHntod2TVr6P4Uj6f-0re4Rmvis02R3FlTZlvWrZDswg8qexIUSpEh2y0p5WnT7uTE=@protonmail.ch>

Hi all,

indeed such a page would be very welcome. Also consider adding new providers to the OSGeo page:
https://www.osgeo.org/service-providers/

Regards.

--
Lu?s Moreira de Sousa
Mastodon:?https://mastodon.social/@luis_de_sousa
URL: https://ldesousa.codeberg.page

Sent with Proton Mail secure email.

On Monday, 9 December 2024 at 18:27, Howard Butler via PROJ <proj at lists.osgeo.org> wrote:

> > On Dec 5, 2024, at 8:36?AM, Even Rouault via PROJ proj at lists.osgeo.org wrote:
> > 
> > Hi,
> > 
> > I believe we lack a page such as https://gdal.org/en/stable/community/service_providers.html for PROJ. Do we want to create one? For GDAL, it is governed by https://gdal.org/en/stable/development/rfc/rfc79_listing_service_providers.html . I guess a sed "s/GDAL/PROJ/" could make it relevant for PROJ too.
> > 
> > Anyone who would want to appear on a PROJ service provider page?
> 
> 
> Is there any other viable commercial service provider for PROJ besides Spatialys? ;)
> 
> I totally support adding a page and adding your company to it so people know where to go.
> 
> Howard
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From j1 at jimenezshaw.com  Tue Dec 10 03:23:33 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 10 Dec 2024 12:23:33 +0100
Subject: [PROJ] Adding a service provider page to our doc?
In-Reply-To: <hWYfBSgmIoEEVMdTsLKMluQkmSdaTrrUwNzpT7LcFmHntod2TVr6P4Uj6f-0re4Rmvis02R3FlTZlvWrZDswg8qexIUSpEh2y0p5WnT7uTE=@protonmail.ch>
References: <ef25c411-6cc2-4c22-839e-7991e94ab0af@spatialys.com>
 <ED49ED6C-E2A4-4548-B494-6A25BE004E0A@hobu.co>
 <hWYfBSgmIoEEVMdTsLKMluQkmSdaTrrUwNzpT7LcFmHntod2TVr6P4Uj6f-0re4Rmvis02R3FlTZlvWrZDswg8qexIUSpEh2y0p5WnT7uTE=@protonmail.ch>
Message-ID: <CADRrdKv_-AOuOjnWH2r5Ojrvs49TZu9m=9QoRhM61EvtWt84Ww@mail.gmail.com>

On Tue, 10 Dec 2024 at 12:14, Lu??s Moreira de Sousa via PROJ <
proj at lists.osgeo.org> wrote:

> Hi all,
>
> indeed such a page would be very welcome. Also consider adding new
> providers to the OSGeo page:
> https://www.osgeo.org/service-providers/


They appear in alphabetical order. That is the reason why many companies
are called "ACME" (it's not a joke), not only the one from the roadrunner ;)


>
>
> Regards.
>
> --
> Lu?s Moreira de Sousa
> Mastodon: https://mastodon.social/@luis_de_sousa
> URL: https://ldesousa.codeberg.page
>
> Sent with Proton Mail secure email.
>
> On Monday, 9 December 2024 at 18:27, Howard Butler via PROJ <
> proj at lists.osgeo.org> wrote:
>
> > > On Dec 5, 2024, at 8:36?AM, Even Rouault via PROJ proj at lists.osgeo.org
> wrote:
> > >
> > > Hi,
> > >
> > > I believe we lack a page such as
> https://gdal.org/en/stable/community/service_providers.html for PROJ. Do
> we want to create one? For GDAL, it is governed by
> https://gdal.org/en/stable/development/rfc/rfc79_listing_service_providers.html
> . I guess a sed "s/GDAL/PROJ/" could make it relevant for PROJ too.
> > >
> > > Anyone who would want to appear on a PROJ service provider page?
> >
> >
> > Is there any other viable commercial service provider for PROJ besides
> Spatialys? ;)
> >
> > I totally support adding a page and adding your company to it so people
> know where to go.
> >
> > Howard
> > _______________________________________________
> > PROJ mailing list
> > PROJ at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/proj
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241210/01be6227/attachment.htm>

From Jochem.Lesparre at kadaster.nl  Wed Dec 11 02:46:49 2024
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 11 Dec 2024 10:46:49 +0000
Subject: [PROJ] Unexpected error in +proj=horner +inv
Message-ID: <DU2P192MB223568B95A3738509BE34E6FEF3E2@DU2P192MB2235.EURP192.PROD.OUTLOOK.COM>

Hi list,

I tried a polynomial transformation published in 1925 and it works fine for the forward transformation:

(echo 30000.00 100000.00 & echo 30000.00 120000.00) | cct -d 2 -z 0 +proj=horner +deg=3 +fwd_origin=0,0 +fwd_u=+120025.8705,+0.999986846,-0.0250515e-8,+0.1471965e-14,+0.006918172,-0.0860518e-8,-0.0398590e-14,+0.0011249e-8,+0.4556545e-14,+0.1991105e-14 +fwd_v=+390181.7849,+0.999993024,-0.0338879e-8,+0.1184845e-14,-0.006907254,-0.0492600e-8,-0.1945916e-14,+0.0222878e-8,+0.9244571e-14,-0.1091684e-14 +inv_tolerance=0.001
    150717.96      489970.61          0.00           inf
    150857.90      509969.45          0.00           inf

However, it gives an error for any input with a Northing greater than 500000 for the inverse transformation:

(echo 150717.96 489970.61 & echo 150857.90 509969.45) | cct -d 2 -z 0 +proj=horner +deg=3 +fwd_origin=0,0 +fwd_u=+120025.8705,+0.999986846,-0.0250515e-8,+0.1471965e-14,+0.006918172,-0.0860518e-8,-0.0398590e-14,+0.0011249e-8,+0.4556545e-14,+0.1991105e-14 +fwd_v=+390181.7849,+0.999993024,-0.0338879e-8,+0.1184845e-14,-0.006907254,-0.0492600e-8,-0.1945916e-14,+0.0222878e-8,+0.9244571e-14,-0.1091684e-14 +inv_tolerance=0.001 +inv
     30000.00      100000.00          0.00           inf
# Record 1 TRANSFORMATION ERROR: 150857.90 509969.45
(Point outside of projection domain)

Is this a problem with the original polynomial transformation or a bug in PROJ?

Regards, Jochem



Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241211/f0e7e0e4/attachment.htm>

From j1 at jimenezshaw.com  Wed Dec 11 06:02:56 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 11 Dec 2024 15:02:56 +0100
Subject: [PROJ] Unexpected error in +proj=horner +inv
In-Reply-To: <DU2P192MB223568B95A3738509BE34E6FEF3E2@DU2P192MB2235.EURP192.PROD.OUTLOOK.COM>
References: <DU2P192MB223568B95A3738509BE34E6FEF3E2@DU2P192MB2235.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CADRrdKuRgCsEaj7Pa_8CNW8zKP7S59aHht_CjNfSqzuBazaAbQ@mail.gmail.com>

Hi Jochem

After looking at the code, this error happens when the coordinates are out
of range. The default value for that range is 500000
You can change it with
https://proj.org/en/stable/operations/transformations/horner.html#cmdoption-arg-range

I hope it helps

On Wed, 11 Dec 2024 at 11:54, Lesparre, Jochem via PROJ <
proj at lists.osgeo.org> wrote:

> Hi list,
>
>
>
> I tried a polynomial transformation published in 1925 and it works fine
> for the forward transformation:
>
>
>
> (echo 30000.00 100000.00 & echo 30000.00 120000.00) | cct -d 2 -z 0
> +proj=horner +deg=3 +fwd_origin=0,0
> +fwd_u=+120025.8705,+0.999986846,-0.0250515e-8,+0.1471965e-14,+0.006918172,-0.0860518e-8,-0.0398590e-14,+0.0011249e-8,+0.4556545e-14,+0.1991105e-14
> +fwd_v=+390181.7849,+0.999993024,-0.0338879e-8,+0.1184845e-14,-0.006907254,-0.0492600e-8,-0.1945916e-14,+0.0222878e-8,+0.9244571e-14,-0.1091684e-14
> +inv_tolerance=0.001
>
>     150717.96      489970.61          0.00           inf
>
>     150857.90      509969.45          0.00           inf
>
>
>
> However, it gives an error for any input with a Northing greater than
> 500000 for the inverse transformation:
>
>
>
> (echo 150717.96 489970.61 & echo 150857.90 509969.45) | cct -d 2 -z 0
> +proj=horner +deg=3 +fwd_origin=0,0
> +fwd_u=+120025.8705,+0.999986846,-0.0250515e-8,+0.1471965e-14,+0.006918172,-0.0860518e-8,-0.0398590e-14,+0.0011249e-8,+0.4556545e-14,+0.1991105e-14
> +fwd_v=+390181.7849,+0.999993024,-0.0338879e-8,+0.1184845e-14,-0.006907254,-0.0492600e-8,-0.1945916e-14,+0.0222878e-8,+0.9244571e-14,-0.1091684e-14
> +inv_tolerance=0.001 +inv
>
>      30000.00      100000.00          0.00           inf
>
> # Record 1 TRANSFORMATION ERROR: 150857.90 509969.45
>
> (Point outside of projection domain)
>
>
>
> Is this a problem with the original polynomial transformation or a bug in
> PROJ?
>
>
>
> Regards, Jochem
>
>
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de
> geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden
> van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and intended
> solely for the use of the individual or entity to whom they are addressed.
> If you are not the intended recipient, you are notified that disclosing,
> copying, distributing or taking any action in reliance on the contents of
> this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products and
> services
> [https://www.kadaster.com/general-terms-and-conditions].
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241211/1374b1c3/attachment.htm>

From Jochem.Lesparre at kadaster.nl  Wed Dec 11 06:48:47 2024
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 11 Dec 2024 14:48:47 +0000
Subject: [PROJ] Unexpected error in +proj=horner +inv
In-Reply-To: <CADRrdKuRgCsEaj7Pa_8CNW8zKP7S59aHht_CjNfSqzuBazaAbQ@mail.gmail.com>
References: <DU2P192MB223568B95A3738509BE34E6FEF3E2@DU2P192MB2235.EURP192.PROD.OUTLOOK.COM>
 <CADRrdKuRgCsEaj7Pa_8CNW8zKP7S59aHht_CjNfSqzuBazaAbQ@mail.gmail.com>
Message-ID: <DU2P192MB223532131152300C02D25FBFEF3E2@DU2P192MB2235.EURP192.PROD.OUTLOOK.COM>

Hi Javier,

Thanks! That helps:

(echo 150717.96 489970.61 & echo 150857.90 509969.45) | cct -d 2 -z 0 +proj=horner +deg=3 +fwd_origin=0,0 +fwd_u=+120025.8705,+0.999986846,-0.0250515e-8,+0.1471965e-14,+0.006918172,-0.0860518e-8,-0.0398590e-14,+0.0011249e-8,+0.4556545e-14,+0.1991105e-14 +fwd_v=+390181.7849,+0.999993024,-0.0338879e-8,+0.1184845e-14,-0.006907254,-0.0492600e-8,-0.1945916e-14,+0.0222878e-8,+0.9244571e-14,-0.1091684e-14 +inv_tolerance=0.001 +inv +range=600000
     30000.00      100000.00          0.00           inf
     30000.00      120000.00          0.00           inf

I did try specifying the range before, but I did not try such a large value. Due to the word ?radius? in the description at https://proj.org/en/stable/operations/transformations/horner.html#cmdoption-arg-range I expected the range value to specify a circle instead of a box. More importantly, I expected it to apply on the input coordinates in the forward transformation and the output coordinates in the inverse transformation. I think the latter would make more sense, as that would mean one can use the same +range for the forward and inverse transformation. Therefore I would like to suggest a change in the code instead of only making the documentation more comprehensive.

Jochem


Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241211/6277ae85/attachment-0001.htm>

From wwcohen at gmail.com  Wed Dec 11 16:43:57 2024
From: wwcohen at gmail.com (Will Cohen)
Date: Wed, 11 Dec 2024 19:43:57 -0500
Subject: [PROJ] PROJ on JVM/JS via Native, WebAssembly, and Graal Interop
Message-ID: <CAB26zV2L6scbtVUoDLjEHP0V0OVxbjsPzX2jxyhhQoDQ3h1HqA@mail.gmail.com>

Hello,

I am very pleased to announce clj-proj (
https://github.com/willcohen/clj-proj/), a project which provides a native
(or transpiled) version of PROJ for both the JVM and JS ecosystems.

The goal of this project is to provide a long-missing component of
geospatial analysis for these platforms: a performant version of PROJ that
can closely follow upstream development. This should dramatically improve
the suitability of the JVM and JS ecosystems for advanced open-source
geospatial uses.

This currently provides bindings to the JVM via Clojure using a package
that will eventually be published to Maven Central, and to pure Javascript
via an ES6 wrapper module over a transpiled module that will both
eventually be published on NPM. By unifying the API for all of this under a
single Clojure/Clojurescript namespace, it will be easier to maintain
parity with upstream, expand the reach of platforms to other hosted
runtimes, as well as make it easier to quickly assess in the longterm where
in the chain of interop -- actual interaction with PROJ's API, compilation
issues, webassembly issues, or other javascript or java issue -- the
wrapper mechanisms are running into difficulty during project maintenance.

Presently, this is very much a work in progress and in some ways only a
proof of concept. Clojure bindings exist on the JVM, and work on both
natively compiled PROJ and a transpiled WebAssembly version via GraalWasm.

Much work remains to be done. I've been working on this off and on for a
few years, and my native javascript work-in-progress module broke at some
point, so the project is still a bit off from being ready to publish either
to Maven Central or NPM. That said, I just learned today about the new
ability to embed the sqlite db into the library itself, which may provide a
good workaround pending better handling of WASM and additional files across
node and the web.

I welcome any and all feedback and/or contributions, and am happy to answer
any questions you may have here or on the project repository. I look
forward to getting this over the finish line for an initial release, and am
excited to continue to build it out so it can more fully represent the full
functionality of what PROJ has to offer, and to provide it to a large
portion of the computing landscape where the lack of PROJ remains a
substantial pain point for GIS.

Will
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241211/38c5d65c/attachment.htm>

From martin.desruisseaux at geomatys.com  Thu Dec 12 01:34:39 2024
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Thu, 12 Dec 2024 10:34:39 +0100
Subject: [PROJ] PROJ on JVM/JS via Native, WebAssembly, and Graal Interop
In-Reply-To: <CAB26zV2L6scbtVUoDLjEHP0V0OVxbjsPzX2jxyhhQoDQ3h1HqA@mail.gmail.com>
References: <CAB26zV2L6scbtVUoDLjEHP0V0OVxbjsPzX2jxyhhQoDQ3h1HqA@mail.gmail.com>
Message-ID: <620b71dc-583a-4b5b-ba6d-2ad1f73f817e@geomatys.com>

Hello

Le 2024-12-12 ? 01 h 43, Will Cohen via PROJ a ?crit?:

> I am very pleased to announce clj-proj 
> (https://github.com/willcohen/clj-proj/), a project which provides a 
> native (or transpiled) version of PROJ for both the JVM and JS ecosystems.
>
> The goal of this project is to provide a long-missing component of 
> geospatial analysis for these platforms: a performant version of PROJ 
> that can closely follow upstream development. This should dramatically 
> improve the suitability of the JVM and JS ecosystems for advanced 
> open-source geospatial uses.

This is a great effort and this project will surely meet some users. It 
may also replace PROJ-JNI <https://github.com/OSGeo/PROJ-JNI>. But just 
for avoiding to give an inexact impression to the readers, this project 
indeed fills a hole on the JS side (as far as I know), but not really on 
the JVM side where alternatives comparable to PROJ exist for 20 years, 
in particular GeoTools (the oldest) and Apache SIS. They have their 
advantages and inconvenient. For example, PROJ supports more projection 
methods but Apache SIS has more extensive support of any-dimensional 
transforms. PROJ is more up-to-date on WKT 2 but Apache SIS has better 
GML support. All those projects can use an embedded EPSG database 
(GeoTools was 10 years in advance over PROJ in that aspect). So there is 
of course reasons why some peoples will want to use PROJ on the JVM, but 
it is inexact to say that they couldn't do advanced open-source 
geospatial on that platform.

 ??? Regards,

 ??? ??? Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/0a17927e/attachment.htm>

From j1 at jimenezshaw.com  Thu Dec 12 01:57:56 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 12 Dec 2024 10:57:56 +0100
Subject: [PROJ] PROJ on JVM/JS via Native, WebAssembly, and Graal Interop
In-Reply-To: <620b71dc-583a-4b5b-ba6d-2ad1f73f817e@geomatys.com>
References: <CAB26zV2L6scbtVUoDLjEHP0V0OVxbjsPzX2jxyhhQoDQ3h1HqA@mail.gmail.com>
 <620b71dc-583a-4b5b-ba6d-2ad1f73f817e@geomatys.com>
Message-ID: <CADRrdKupvhivnVoTK_=sHHGAKwUsTFV94nr2qX4sGd9w=Nf_AA@mail.gmail.com>

About the JavaScript issues, maybe this project may help you
https://github.com/bugra9/gdal3.js
It is about GDAL, that has to compile PROJ of course.

One thing that maybe is interesting about the CLI programs in PROJ, is to
move the code into another cpp file, to let WASM call it like it is done
from the CLI (if it cannot be used directly as it is). Something like
"cs2cs.cpp" just with a small main function, and "cs2cs_impl.cpp" with the
actual implementation, that is not small. Then WASM could call
cs2cs_impl.cpp. (I think that GDAL is doing that). But maybe I am
misunderstanding the usage of WASM calling C functions and programs.

On Thu, 12 Dec 2024 at 10:34, Martin Desruisseaux via PROJ <
proj at lists.osgeo.org> wrote:

> Hello
>
> Le 2024-12-12 ? 01 h 43, Will Cohen via PROJ a ?crit :
>
> I am very pleased to announce clj-proj (
> https://github.com/willcohen/clj-proj/), a project which provides a
> native (or transpiled) version of PROJ for both the JVM and JS ecosystems.
>
> The goal of this project is to provide a long-missing component of
> geospatial analysis for these platforms: a performant version of PROJ that
> can closely follow upstream development. This should dramatically improve
> the suitability of the JVM and JS ecosystems for advanced open-source
> geospatial uses.
>
> This is a great effort and this project will surely meet some users. It
> may also replace PROJ-JNI <https://github.com/OSGeo/PROJ-JNI>. But just
> for avoiding to give an inexact impression to the readers, this project
> indeed fills a hole on the JS side (as far as I know), but not really on
> the JVM side where alternatives comparable to PROJ exist for 20 years, in
> particular GeoTools (the oldest) and Apache SIS. They have their advantages
> and inconvenient. For example, PROJ supports more projection methods but
> Apache SIS has more extensive support of any-dimensional transforms. PROJ
> is more up-to-date on WKT 2 but Apache SIS has better GML support. All
> those projects can use an embedded EPSG database (GeoTools was 10 years in
> advance over PROJ in that aspect). So there is of course reasons why some
> peoples will want to use PROJ on the JVM, but it is inexact to say that
> they couldn't do advanced open-source geospatial on that platform.
>
>     Regards,
>
>         Martin
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/856c0cb6/attachment.htm>

From wwcohen at gmail.com  Thu Dec 12 03:31:17 2024
From: wwcohen at gmail.com (Will Cohen)
Date: Thu, 12 Dec 2024 06:31:17 -0500
Subject: [PROJ] PROJ on JVM/JS via Native, WebAssembly, and Graal Interop
In-Reply-To: <620b71dc-583a-4b5b-ba6d-2ad1f73f817e@geomatys.com>
References: <CAB26zV2L6scbtVUoDLjEHP0V0OVxbjsPzX2jxyhhQoDQ3h1HqA@mail.gmail.com>
 <620b71dc-583a-4b5b-ba6d-2ad1f73f817e@geomatys.com>
Message-ID: <CAB26zV0y9QQfXPhCPC-Cvyvb5sAaVPWrUJLnzZRXjOuQQ-DZLg@mail.gmail.com>

Thank you, Martin, and yes, you are of course right. Geotools and SIS serve
many, many users on the JVM and have for longer than my entire career! The
much smaller hole, then, this serves on the JVM is, as you say, for users
who still seek to use PROJ proper. I?ll adjust the project description
accordingly.

On Thu, Dec 12, 2024 at 4:34?AM Martin Desruisseaux via PROJ <
proj at lists.osgeo.org> wrote:

> Hello
>
> Le 2024-12-12 ? 01 h 43, Will Cohen via PROJ a ?crit :
>
> I am very pleased to announce clj-proj (
> https://github.com/willcohen/clj-proj/), a project which provides a
> native (or transpiled) version of PROJ for both the JVM and JS ecosystems.
>
> The goal of this project is to provide a long-missing component of
> geospatial analysis for these platforms: a performant version of PROJ that
> can closely follow upstream development. This should dramatically improve
> the suitability of the JVM and JS ecosystems for advanced open-source
> geospatial uses.
>
> This is a great effort and this project will surely meet some users. It
> may also replace PROJ-JNI <https://github.com/OSGeo/PROJ-JNI>. But just
> for avoiding to give an inexact impression to the readers, this project
> indeed fills a hole on the JS side (as far as I know), but not really on
> the JVM side where alternatives comparable to PROJ exist for 20 years, in
> particular GeoTools (the oldest) and Apache SIS. They have their advantages
> and inconvenient. For example, PROJ supports more projection methods but
> Apache SIS has more extensive support of any-dimensional transforms. PROJ
> is more up-to-date on WKT 2 but Apache SIS has better GML support. All
> those projects can use an embedded EPSG database (GeoTools was 10 years in
> advance over PROJ in that aspect). So there is of course reasons why some
> peoples will want to use PROJ on the JVM, but it is inexact to say that
> they couldn't do advanced open-source geospatial on that platform.
>
>     Regards,
>
>         Martin
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/cccc5bf6/attachment-0001.htm>

From peter.townsend at maplarge.com  Thu Dec 12 14:23:40 2024
From: peter.townsend at maplarge.com (Peter Townsend)
Date: Thu, 12 Dec 2024 16:23:40 -0600
Subject: [PROJ] About the existence of the misc data files
Message-ID: <CAMQBGmXwboFkdTdzRe8hW7AEXc3Mwa8LfSaKZAXrqtkD_q=Hrg@mail.gmail.com>

I was curious about something regarding the loose data files that are built
alongside proj.db:

alaska
BETA2007.gsb
conus
egm96_15.gtx
GL27
ITRF2000
MD
nad27
nad83
ntf_r93.gsb
ntv1_can.dat
ntv2_0.gsb

What exactly wouldn't work if these particular files weren't available? Are
these superseded by something in the new and improved geotiffs in
proj-data? Or would the average user not even notice they were gone?

-- 
Peter Townsend
Senior Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/d37daa63/attachment.htm>

From even.rouault at spatialys.com  Thu Dec 12 14:44:01 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Dec 2024 23:44:01 +0100
Subject: [PROJ] About the existence of the misc data files
In-Reply-To: <CAMQBGmXwboFkdTdzRe8hW7AEXc3Mwa8LfSaKZAXrqtkD_q=Hrg@mail.gmail.com>
References: <CAMQBGmXwboFkdTdzRe8hW7AEXc3Mwa8LfSaKZAXrqtkD_q=Hrg@mail.gmail.com>
Message-ID: <dbea8efc-8101-41dc-86e2-992e4bef8b97@spatialys.com>

Peter,

> I was curious about something regarding the loose data files that are 
> built alongside proj.db:
Nitpicking: they aren't "built", at most just present & installed.? 
Details below:
>
> alaska? ??? ??? ??? ??? ??? ==> no longer shipped with PROJ since a 
> long time. Some binary distributions might still ship it as part of 
> nostalgia/inertia, but no longer at 
> https://github.com/OSGeo/PROJ/tree/master/data. It is in the?proj-data 
> as a GeoTIFF grid now
> BETA2007.gsb??? ???? ==> same as above
> conus??? ??? ??? ??? ????? ==> same as above
> egm96_15.gtx??? ???? ==> same as above
> GL27??? ??? ??? ?????????? ==> still shipped with PROJ. Mostly/only legacy
> ITRF2000??? ??? ??? ??? ==> still shipped with PROJ. Can be used in 
> some cases for advanced users creating PROJ pipelines referencing ITRF 
> transformations, like "+proj=pipeline ... +step +init=ITRF2000:ITRF96 
> ...."
> MD??? ??? ??? ??? ??? ????? ==> same as above about grids
> nad27??? ??? ??? ??? ???? ==> still shipped with PROJ. Mostly/only legacy
> nad83??? ??? ??? ??? ??? ==> still shipped with PROJ. Mostly/only legacy
> ntf_r93.gsb??? ??? ??? ==> same as above about grids
> ntv1_can.dat??? ??? ==> same as above about grids
> ntv2_0.gsb??? ??? ??? ==> same as above about grids
>
> What exactly wouldn't work if these particular files weren't 
> available? Are these superseded by something in the new and improved 
> geotiffs in proj-data?
For the grids, yes they are all deprecated by the GeoTIFFs of proj-data
> Or would the average user not even notice they were gone?

For the other parts, only the most enlightened minds would notice.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/57ab055a/attachment.htm>

From peter.townsend at maplarge.com  Thu Dec 12 14:47:27 2024
From: peter.townsend at maplarge.com (Peter Townsend)
Date: Thu, 12 Dec 2024 16:47:27 -0600
Subject: [PROJ] About the existence of the misc data files
In-Reply-To: <dbea8efc-8101-41dc-86e2-992e4bef8b97@spatialys.com>
References: <CAMQBGmXwboFkdTdzRe8hW7AEXc3Mwa8LfSaKZAXrqtkD_q=Hrg@mail.gmail.com>
 <dbea8efc-8101-41dc-86e2-992e4bef8b97@spatialys.com>
Message-ID: <CAMQBGmX534zO3GM+4Kc3MGsZ8ZcYsvfhJ1ywxWs7S0XJu927iA@mail.gmail.com>

Thanks, that's very helpful info!

On Thu, Dec 12, 2024 at 4:44?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Peter,
>
> I was curious about something regarding the loose data files that are
> built alongside proj.db:
>
> Nitpicking: they aren't "built", at most just present & installed.
> Details below:
>
>
> alaska                      ==> no longer shipped with PROJ since a long
> time. Some binary distributions might still ship it as part of
> nostalgia/inertia, but no longer at
> https://github.com/OSGeo/PROJ/tree/master/data. It is in the proj-data as
> a GeoTIFF grid now
> BETA2007.gsb         ==> same as above
> conus                      ==> same as above
> egm96_15.gtx         ==> same as above
> GL27                       ==> still shipped with PROJ. Mostly/only legacy
> ITRF2000                ==> still shipped with PROJ. Can be used in some
> cases for advanced users creating PROJ pipelines referencing ITRF
> transformations, like "+proj=pipeline ...  +step +init=ITRF2000:ITRF96 ...."
> MD                          ==> same as above about grids
> nad27                     ==> still shipped with PROJ. Mostly/only legacy
> nad83                    ==> still shipped with PROJ. Mostly/only legacy
> ntf_r93.gsb            ==> same as above about grids
> ntv1_can.dat        ==> same as above about grids
> ntv2_0.gsb            ==> same as above about grids
>
> What exactly wouldn't work if these particular files weren't available?
> Are these superseded by something in the new and improved geotiffs in
> proj-data?
>
> For the grids, yes they are all deprecated by the GeoTIFFs of proj-data
>
> Or would the average user not even notice they were gone?
>
> For the other parts, only the most enlightened minds would notice.
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
>

-- 
Peter Townsend
Senior Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20241212/157cfd37/attachment.htm>

From even.rouault at spatialys.com  Fri Dec 13 06:48:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Dec 2024 15:48:51 +0100
Subject: [PROJ] Anybody dreaming of a 890 MB large libproj ? (a.k.a
 embedding grids)
Message-ID: <dda9a12e-7859-4faf-b405-9dfe43c02da1@spatialys.com>

Hi,

I've a pull request sitting at https://github.com/OSGeo/PROJ/pull/4349 
enabling users to embed the grids they want into libproj.so itself (or 
potentially a transpiled build of it - I didn't try), with:

cmake .. -DEMBED_RESOURCE_FILES=ON 
-DEMBED_GRIDS_DIRECTORY=/directory/with/grids

and build.

As the clickbait email subject suggests, you can potentially point at 
the full proj-data directory. To build the resulting libproj, you'll 
need like 6 GB of free disk space for the various temporary files and 
about 16 GB RAM to build it with gcc (you may need to limit build 
parallelism and not go to full -j$(nproc)), but after that, the usage 
requirements of the library are normal (at least for regular library builds)

Usages mixing embedded grids, grids on the local file system, and remote 
ones are possible.

Fun experiment to conclude:

# Get the offset of the us_nga_egm08_25.tif file within the shared library:
$ export GRID_OFFSET=$(printf "%d" $(echo "0x$(objdump -t lib/libproj.so 
| grep us_nga_egm08_25_tif_data | awk '{print $1}' )"))

$ echo 2 49 | gdallocation -wgs84 
/vsisubfile/${GRID_OFFSET}_-1,lib/libproj.so
Report:
 ? Location: (4368P,984L)
 ? Band 1:
 ??? Value: 44.6771507263184

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


