From szekerest at gmail.com  Tue Apr  1 06:27:33 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr  1 06:27:35 2008
Subject: [gdal-dev] GDAL C# bindings and TIFF read projection trouble
In-Reply-To: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
References: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
Message-ID: <f3b73b7d0804010327h49a160a7ncecad447d45d3cae@mail.gmail.com>

Hi,

Here is a similar code what gdalinfo is doing right now, and you
should get the same results with that:

Dataset ds = Gdal.Open(infile, Access.GA_ReadOnly);
  // get the projection
 string proj = ds.GetProjection();

SpatialReference sr = new SpatialReference(proj);
string prettywkt;
sr.ExportToPrettyWkt(out prettywkt, 0);

Console.WriteLine(prettywkt);

Best regards,

Tamas



2008/4/1, Kerry Halligan <halligan.kerry@gmail.com>:
> Can anyone help me out with problems reading the correct projection
> information from a TIFF image?
>
> I am using GDAL C# bindings from FWTools (1.3.9) and am getting unexpected
> results for projection information of TIFF files.  If I use the gdalinfo
> utility I get the correct information, but if I use the gdal_csharp bindings
> I get "unnamed" as the projection.  This is causing difficulty when
> comparing projections before processing multiple files.  I am assuming this
> is a data and/or operator error, rather than a bug, but can anyone tell me
> what I might be doing wrong?  I also tried this with the most recent version
> of FWTools and received the same results.
>
> Sample outputs are listed below:
>
> gdalinfo results:
>
> C:\Program Files\FWTools1.3.9>gdalinfo
> E:\Imagery\ortho\drcog\3130375_1610645.tif
> Driver: GTiff/GeoTIFF
> Files: E:\Imagery\ortho\drcog\3130375_1610645.tif
>  Size is 5000, 5000
> Coordinate System is:
> PROJCS["NAD83 / Colorado Central",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                  AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4269"]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",39.75],
>     PARAMETER["standard_parallel_2",38.45],
>      PARAMETER["latitude_of_origin",37.83333333333334],
>     PARAMETER["central_meridian",-105.5],
>     PARAMETER["false_easting",3000000.000316083],
>     PARAMETER["false_northing",999999.999996],
>      UNIT["US survey foot",0.3048006096012192,
>         AUTHORITY["EPSG","9003"]],
>     AUTHORITY["EPSG","26954"]]
> Origin = (3130375.000000000000000,1615645.000000000000000)
>  Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
>   TIFFTAG_SOFTWARE=Adobe Photoshop 7.0
>   TIFFTAG_DATETIME=2006:10:27 09:33:52
>   TIFFTAG_XRESOLUTION=72
>   TIFFTAG_YRESOLUTION=72
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Corner Coordinates:
> Upper Left  ( 3130375.000, 1615645.000) (105d 2'16.18"W, 39d31'22.13"N)
> Lower Left  ( 3130375.000, 1610645.000) (105d 2'16.50"W, 39d30'32.71"N)
>  Upper Right ( 3135375.000, 1615645.000) (105d 1'12.37"W, 39d31'21.87"N)
> Lower Right ( 3135375.000, 1610645.000) (105d 1'12.71"W, 39d30'32.45"N)
> Center      ( 3132875.000, 1613145.000) (105d 1'44.44"W, 39d30'57.29"N)
>  Band 1 Block=5000x1 Type=Byte, ColorInterp=Red
> Band 2 Block=5000x1 Type=Byte, ColorInterp=Green
> Band 3 Block=5000x1 Type=Byte, ColorInterp=Blue
>
> csharp code:
>
> Gdal.AllRegister();
> Dataset ds = Gdal.Open(infile, Access.GA_ReadOnly);
>  // get the projection
> string proj = ds.GetProjection();
>
> printing 'proj' produces:
>
> "PROJCS[\"unnamed\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4269\"]],UNIT[\"US
> survey
> foot\",0.3048006096012192,AUTHORITY[\"EPSG\",\"9003\"]],AUTHORITY[\"EPSG\",\"26954\"]]"
>
> _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Tue Apr  1 11:16:22 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  1 11:16:53 2008
Subject: [gdal-dev] GDAL C# bindings and TIFF read projection trouble
In-Reply-To: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
References: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
Message-ID: <47F251C6.3050706@pobox.com>

Kerry Halligan wrote:
> Can anyone help me out with problems reading the correct projection
> information from a TIFF image?
> 
> I am using GDAL C# bindings from FWTools (1.3.9) and am getting unexpected
> results for projection information of TIFF files.  If I use the gdalinfo
> utility I get the correct information, but if I use the gdal_csharp bindings
> I get "unnamed" as the projection.  This is causing difficulty when
> comparing projections before processing multiple files.  I am assuming this
> is a data and/or operator error, rather than a bug, but can anyone tell me
> what I might be doing wrong?  I also tried this with the most recent version
> of FWTools and received the same results.
> 
...
> *csharp code:
> 
> Gdal.AllRegister();
> Dataset ds = Gdal.Open(infile, Access.GA_ReadOnly);
> // get the projection
> string proj = ds.GetProjection();
> 
> printing 'proj' produces:
> *
> "PROJCS[\"unnamed\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010002
> ,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",
> 0.0174532925199433],AUTHORITY[\"EPSG\",\"4269\"]],UNIT[\"US survey foot\",
> 0.3048006096012192
> ,AUTHORITY[\"EPSG\",\"9003\"]],AUTHORITY[\"EPSG\",\"26954\"]]"

Kerry,

I imagine this is due to either the GDAL_DATA or perhaps the GEOTIFF_CSV
environment variable not pointing to the proper .csv files.  The GeoTIFF
driver uses these to expand some coordinate systems in GeoTIFF defined
based on only an EPSG code.  For some such common coordinate systems
there is logic to expand them without the .csv files but some info
(such as the projection name) may be lost.  I presume this is what is
happening to you.

Note the FWTools Shell takes some effort to setup the environment
carefully.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From halligan.kerry at gmail.com  Tue Apr  1 13:27:25 2008
From: halligan.kerry at gmail.com (Kerry Halligan)
Date: Tue Apr  1 13:27:28 2008
Subject: [gdal-dev] GDAL C# bindings and TIFF read projection trouble
In-Reply-To: <47F251C6.3050706@pobox.com>
References: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
	<47F251C6.3050706@pobox.com>
Message-ID: <63c145660804011027v337d67e1j3765a35ce9f4a33e@mail.gmail.com>

Tamas and Frank,

Thank you both for your replies.  I tried Tamas' suggestion and found the
same problem.  I suspect that my problem is that it is not finding the
correct CSV files as Frank suggested.  Because I am using the prebuilt
binaries from FWTools, I have been copying the DLL files (e.g., gdal_csharp)
into my c# application directories (debug/release) but linking to support
files by simply including the appropriate directories (in my case:
C:\Program Files\FWTools1.3.9\bin\;C:\Program Files\FWTools1.3.9) in the
PATH environment variable.  I am guessing that this works fine for libraries
but does not help it locate the CSV files, is that correct?  What is the
right way to tell a C# application where/how to find these files?  My
apologies if this is a super basic question or has been answered repeated on
this list - I am obviously new to this...

Any insights would be greatly appreciated.

- Kerry

On Tue, Apr 1, 2008 at 8:16 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Kerry Halligan wrote:
> > Can anyone help me out with problems reading the correct projection
> > information from a TIFF image?
> >
> > I am using GDAL C# bindings from FWTools (1.3.9) and am getting
> unexpected
> > results for projection information of TIFF files.  If I use the gdalinfo
> > utility I get the correct information, but if I use the gdal_csharp
> bindings
> > I get "unnamed" as the projection.  This is causing difficulty when
> > comparing projections before processing multiple files.  I am assuming
> this
> > is a data and/or operator error, rather than a bug, but can anyone tell
> me
> > what I might be doing wrong?  I also tried this with the most recent
> version
> > of FWTools and received the same results.
> >
> ...
> > *csharp code:
> >
> > Gdal.AllRegister();
> > Dataset ds = Gdal.Open(infile, Access.GA_ReadOnly);
> > // get the projection
> > string proj = ds.GetProjection();
> >
> > printing 'proj' produces:
> > *
> >
> "PROJCS[\"unnamed\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
> > 1980\",6378137,298.2572221010002
> >
> ,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",
> > 0.0174532925199433],AUTHORITY[\"EPSG\",\"4269\"]],UNIT[\"US survey
> foot\",
> > 0.3048006096012192
> > ,AUTHORITY[\"EPSG\",\"9003\"]],AUTHORITY[\"EPSG\",\"26954\"]]"
>
> Kerry,
>
> I imagine this is due to either the GDAL_DATA or perhaps the GEOTIFF_CSV
> environment variable not pointing to the proper .csv files.  The GeoTIFF
> driver uses these to expand some coordinate systems in GeoTIFF defined
> based on only an EPSG code.  For some such common coordinate systems
> there is logic to expand them without the .csv files but some info
> (such as the projection name) may be lost.  I presume this is what is
> happening to you.
>
> Note the FWTools Shell takes some effort to setup the environment
> carefully.
>
> Best regards,
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080401/c20c6fd0/attachment.html
From warmerdam at pobox.com  Tue Apr  1 14:04:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  1 14:05:01 2008
Subject: [gdal-dev] GDAL C# bindings and TIFF read projection trouble
In-Reply-To: <63c145660804011027v337d67e1j3765a35ce9f4a33e@mail.gmail.com>
References: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>
	<47F251C6.3050706@pobox.com>
	<63c145660804011027v337d67e1j3765a35ce9f4a33e@mail.gmail.com>
Message-ID: <47F27933.8030104@pobox.com>

Kerry Halligan wrote:
> Tamas and Frank,
> 
> Thank you both for your replies.  I tried Tamas' suggestion and found the
> same problem.  I suspect that my problem is that it is not finding the
> correct CSV files as Frank suggested.  Because I am using the prebuilt
> binaries from FWTools, I have been copying the DLL files (e.g., gdal_csharp)
> into my c# application directories (debug/release) but linking to support
> files by simply including the appropriate directories (in my case:
> C:\Program Files\FWTools1.3.9\bin\;C:\Program Files\FWTools1.3.9) in the
> PATH environment variable.  I am guessing that this works fine for libraries
> but does not help it locate the CSV files, is that correct?  

Kerry,

That is correct.

> What is the
> right way to tell a C# application where/how to find these files?  My
> apologies if this is a super basic question or has been answered repeated on
> this list - I am obviously new to this...

You could define them in the system environment (using the GDAL_DATA
and perhaps the GEOTIFF_CSV environment variables).  It should also
be possible to call the GDALSetConfigOption() function (I'm not sure
what the C# binding is called) to set these values.  This should be
one of the first things you do with GDAL - before the first GDALOpen()
at least.

In C/C++:

   CPLSetConfigOption( "GDAL_DATA", "C:\\gdal\\data" );

The GDAL plugin loader also automatically searches for plugins in
a directory relative to the .exe.  This same sort of .exe relative
searching might make sense for GDAL_DATA, at least on win32 where it
is easy to find the .exe path.  I'm not sure if this sort of thing
works smoothly in .net applications or not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Apr  1 14:11:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  1 14:11:38 2008
Subject: [gdal-dev] Motion to adopt RFC 22: 
Message-ID: <47F27AC2.2030502@pobox.com>

Folks,

Motion: To adopt RFC 22: RPC Georeferencing.

   http://trac.osgeo.org/gdal/wiki/rfc22_rpc

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Tue Apr  1 14:12:43 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Apr  1 14:15:31 2008
Subject: [gdal-dev] Motion to adopt RFC 22: 
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <FA967A3F-9A82-4655-A9A8-93DED74EF216@gmail.com>

+1

On Apr 1, 2008, at 1:11 PM, Frank Warmerdam wrote:
> Folks,
>
> Motion: To adopt RFC 22: RPC Georeferencing.
>
>  http://trac.osgeo.org/gdal/wiki/rfc22_rpc
>
> Best regards,
> --  
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Apr  1 14:21:06 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr  1 14:21:18 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <200804012021.07386.even.rouault@mines-paris.org>

+1

Le Tuesday 01 April 2008 20:11:14 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> Motion: To adopt RFC 22: RPC Georeferencing.
>
>    http://trac.osgeo.org/gdal/wiki/rfc22_rpc
>
> Best regards,


From lran at unc.edu  Tue Apr  1 14:56:41 2008
From: lran at unc.edu (Limei Ran)
Date: Tue Apr  1 14:57:06 2008
Subject: [gdal-dev] updating a HFA image
Message-ID: <47F28568.6010301@unc.edu>

Hi:

I opened an HFA image and got a band from it (only 1 band image).  I 
read a region from the band and update the band with the updated array. 

But, for somehow, I can not view the updated HFA image in arcGIS due to 
building pyramids failed.  Could you give me some ideas about what may 
go wrong?  Here are codes related:
======================
 
     //open the new copied data set for the following updating
     poRDataset = (GDALDataset *) GDALOpen( newFileName.c_str(), 
GA_Update );
     if( poRDataset == NULL )
     {       
         printf( "Open raster file failed: %s.\n", newFileName.c_str() );
         exit( 1 );
     }    

        poBand = poRDataset->GetRasterBand( 1 );  // band 1
        GByte *poImage = (GByte *) 
CPLCalloc(sizeof(GByte),c_nXSize*c_nYSize);
        if ( (poBand->RasterIO(GF_Read, c_col1-1,c_row1-1,c_nXSize,c_nYSize,
               poImage,c_nXSize,c_nYSize,GDT_Byte,0,0)) == CE_Failure)
           { 
              printf( "Error: reading band 1 data error from image i: 
%s.\n", newFileName.c_str() );
              CPLFree (poImage);
              exit( 1 );
           }
        for (int k=0; k<c_nXSize; k++)
           {
               if (poImage[k] == 127)
               {
                  poImage[k] = 0;
               }
           }

           //write back to the current image i
           if ( (poBand->RasterIO(GF_Write, 
c_col1-1,c_row1-1,c_nXSize,c_nYSize,
                 poImage,c_nXSize,c_nYSize,GDT_Byte,0,0)) == CE_Failure)
           {
              printf( "Error: Writing band 1 data error to image i: 
%s.\n", newFileName.c_str() );
              CPLFree (poImage);
              exit( 1 );
           }
          
           poRDataset->FlushCache();
           GDALClose( (GDALDatasetH) poRDataset );         
           CPLFree (poImage);
   ==========================================

Thanks,

Limei
From dmorissette at mapgears.com  Tue Apr  1 14:51:52 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Apr  1 15:05:35 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <47F28448.3000709@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: To adopt RFC 22: RPC Georeferencing.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc22_rpc
> 

+0 (nothing against this RFC, just because this is out of my area of 
expertise)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From warmerdam at pobox.com  Tue Apr  1 15:16:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  1 15:16:40 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F28568.6010301@unc.edu>
References: <47F28568.6010301@unc.edu>
Message-ID: <47F289FE.4050508@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I opened an HFA image and got a band from it (only 1 band image).  I 
> read a region from the band and update the band with the updated array.
> But, for somehow, I can not view the updated HFA image in arcGIS due to 
> building pyramids failed.  Could you give me some ideas about what may 
> go wrong?  Here are codes related:
...

Limei,

I don't see any problem in your code.

Is the original imagine file created with GDAL or with imagine or arcgis?
In place update of anything other than uncompressed image data may not work
well for imagine files not created with GDAL.

If you can isolate this to a small file then you could file a ticket,
attaching the before and after .img files and explaining as best as possible
what goes wrong in ArcGIS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Tue Apr  1 15:32:31 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr  1 15:32:33 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <f3b73b7d0804011232m26421abah186e2410bcd6a12d@mail.gmail.com>

+1

Tamas



2008/4/1, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
>  Motion: To adopt RFC 22: RPC Georeferencing.
>
>    http://trac.osgeo.org/gdal/wiki/rfc22_rpc
>
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ari.jolma at tkk.fi  Tue Apr  1 15:46:45 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue Apr  1 15:46:05 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <47F29125.3060902@tkk.fi>

Frank Warmerdam kirjoitti:
> Folks,
>
> Motion: To adopt RFC 22: RPC Georeferencing.
>
>   http://trac.osgeo.org/gdal/wiki/rfc22_rpc

In SWIG Bindings issues:

> ends up returning a (bSuccess, (x, y, z)) result which is somewhat 
> ackward. Is there a better way of doing this?

Raise an exception through CPLError?

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Tue Apr  1 17:41:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  1 17:41:36 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F29125.3060902@tkk.fi>
References: <47F27AC2.2030502@pobox.com> <47F29125.3060902@tkk.fi>
Message-ID: <47F2ABF1.2000408@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>> Folks,
>>
>> Motion: To adopt RFC 22: RPC Georeferencing.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc22_rpc
> 
> In SWIG Bindings issues:
> 
>> ends up returning a (bSuccess, (x, y, z)) result which is somewhat 
>> ackward. Is there a better way of doing this?
> 
> Raise an exception through CPLError?

Ari,

I normally think of CPLError as being for "serious" errors, rather
than expected failures.  Transformers are expected to fail when
the input is outside the bounds of validity and I'd hesitate to
have them calling CPLError() ever time that occurs.  Amoung other
things, it would in some circumstances cause a flood of error messages
to stderr.

I was wondering if at the swig level it might make sense to throw some
particular sort of exception without actually calling CPLError().  But
I wasn't able to wrap my mind around how exceptions are handled in all
the bindings.

I'd add in the Python case what I'd *really* like is to return None
if success is false.  But I'm not convinced this concept translates
well to some of the other bindings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mattia.parigiani at gmail.com  Tue Apr  1 19:44:40 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Tue Apr  1 19:44:42 2008
Subject: [gdal-dev] gdal_merge.py -separate failing to create RGB
Message-ID: <6b6f1c810804011644x733104a1ueb7d4df05d6e6ad8@mail.gmail.com>

Hi folks,

I have a problem trying to create RGBs with the gdal_merge.py utility...

Mainly I have some images that I have extracted from HDF4 SDSs and processed
in TIFF format using ImageMagick...

Now a sample image as the following gdalinfo output:

*mattia@mattia-laptop:~/Desktop/rgb$ gdalinfo t2.tif
Driver: GTiff/GeoTIFF
Files: t2.tif
Size is 2708, 9340
Coordinate System is `'
Metadata:
 TIFFTAG_DOCUMENTNAME=AMOD02HKM20070104021601_0_1_band_2_out.tif
 TIFFTAG_SOFTWARE=ImageMagick 6.3.8 02/18/08 Q16 http://www.imagemagick.org
 TIFFTAG_XRESOLUTION=72
 TIFFTAG_YRESOLUTION=72
 TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 9340.0)
Upper Right ( 2708.0,    0.0)
Lower Right ( 2708.0, 9340.0)
Center      ( 1354.0, 4670.0)
Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray*

The file size (for the three images I am trying to merge) is about 50MB..
As you can see its a 16 bit image..

if I run something like:

* gdal_merge.py -separate t1.tif t2.tif t3.tif -o out.tif*

The output image out.tif is still a greyscale where 2 of the bands are
somehow "not recognized"...
The gdalinfo on the output tif is:

*Driver: GTiff/GeoTIFF
Files: out.tif
Size is 2708, 9340
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 9340.0)
Upper Right ( 2708.0,    0.0)
Lower Right ( 2708.0, 9340.0)
Center      ( 1354.0, 4670.0)
Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray
Band 2 Block=2708x1 Type=UInt16, ColorInterp=Undefined
Band 3 Block=2708x1 Type=UInt16, ColorInterp=Undefined
*

Does it have to do with the fact that its a 16 bit image and gdal_merge.py
doesn't support it?
With the fact that ImageMagick has corrupted something ?
Or what exactly is the issue?

Thanks in advance


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080401/9a49daa8/attachment.html
From ari.jolma at tkk.fi  Wed Apr  2 01:52:03 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Apr  2 01:51:00 2008
Subject: [gdal-dev] Motion to adopt RFC 22:
In-Reply-To: <47F2ABF1.2000408@pobox.com>
References: <47F27AC2.2030502@pobox.com> <47F29125.3060902@tkk.fi>
	<47F2ABF1.2000408@pobox.com>
Message-ID: <47F31F03.3030909@tkk.fi>

Frank Warmerdam kirjoitti:
>>> ends up returning a (bSuccess, (x, y, z)) result which is somewhat 
>>> ackward. Is there a better way of doing this?
>>
>> Raise an exception through CPLError?
>
> Ari,
>
> I normally think of CPLError as being for "serious" errors, rather
> than expected failures.  Transformers are expected to fail when
> the input is outside the bounds of validity and I'd hesitate to
> have them calling CPLError() ever time that occurs.  Amoung other
> things, it would in some circumstances cause a flood of error messages
> to stderr.
>
> I was wondering if at the swig level it might make sense to throw some
> particular sort of exception without actually calling CPLError().  But
> I wasn't able to wrap my mind around how exceptions are handled in all
> the bindings.

The code in cpl_exceptions.i wraps calls in such a way that errors set 
by CPLError become SWIG exceptions. If UseExceptions() is called in 
wrapper initialization (as AFAIK is the default for all wrappers), the 
wrappers set a very quiet (the CPL default) handler, i.e., nothing is 
printed to stderr.

The error class defines whether SWIG exception is raised - that happens 
for failures and fatal errors. In Perl there is an additional check for 
warnings, which raise a Perl warning.

If the non-success is not really an error - or we want to leave it as 
the headache of the programmer, the method might return an empty list 
and document the behavior. This might be ok if the cause of the failure 
is always because of "input is outside the bounds" -- but as a design 
principle I think an exception (be it warning, error etc) should be 
raised as close to the place where it is detected as possible (I hate 
error messages "something went wrong in the method"), the programmer 
then should be able to choose to ignore it.

>
> I'd add in the Python case what I'd *really* like is to return None
> if success is false.  But I'm not convinced this concept translates
> well to some of the other bindings.

That's the problem with me also. I don't know the capabilities of all 
the languages. In Perl it would be possible to just return a list with 3 
elements in the case of a success and 0 if the transformation failed. 
But I think I'd vote for setting an error condition unless it is trivial 
to check whether transform will fail before it is called. An example is 
a pixel, line to x,y transformation where negative or too large pixel, 
line values are not allowed.

Anyway, I don't mind, I can always "fix" the return value in Perl 
specific parts of the wrappers ;)

Regards,

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From monshi at home.se  Wed Apr  2 04:26:28 2008
From: monshi at home.se (Tomas R)
Date: Wed Apr  2 04:26:43 2008
Subject: [gdal-dev] C#: SpatialReference from EPSG failure (1.5,
	1.5.1 not 1.6 dev)
Message-ID: <fsvfvl$8hp$1@ger.gmane.org>

Making use of the EPSG codes in the proj4-file epgs found in the FWTools 
distribution of GDAL (proj_lib/epsg).

Stepping through them reveals some of them fails when trying to setup a 
spatialreference and a transform to WGS84. When instead using the Proj4 
string some works but most of them still fail.
(short code-snippet:
spatialReference = new SpatialReference("");
spatialReference.ImportFromEPSG(data.EPSG);
SpatialReference wgs84 = new SpatialReference("");
wgs84.SetWellKnownGeogCS("WGS84");
gpsToReference = new CoordinateTransformation(wgs84, refererence);
referenceToGps = new CoordinateTransformation(refererence, wgs84);

This in version 1.5/1.5.1 of GDAL. (own compilation)
Do a try with GDAL 1.6dev instead  (from FWTools) and all works with the 
EPSG code (or Proj4)
Do I miss something in my own compilation? Or an error in GDAL C#?

OSB1936 works when setting up via Proj4 but not EPSG.

The ones who fail on both  EPSG-codes and Proj4 are.
Amersfoort / RD New
Amersfoort / RD Old
ATS77 / New Brunswick Stereographic (ATS77)
ATS77 / Prince Edward Isl. Stereographic (ATS77)
Dealul Piscului 1933/ Stereo 33
Dealul Piscului 1970/ Stereo 70
Deir ez Zor / Levant Stereographic
NAD83(CSRS) / New Brunswick Stereo
NAD83(CSRS) / Prince Edward Isl. Stereographic (NAD83)
NAD83(CSRS98) / New Brunswick Stereo (deprecated)
NAD83(CSRS98) / Prince Edward Isl. Stereographic (NAD83) (deprecated)
NAD83(CSRS98) / Prince Edward Isl. Stereographic (NAD83) (deprecated)
NZGD49
NZGD49 / Amuri Circuit
NZGD49 / Bay of Plenty Circuit
NZGD49 / Bluff Circuit
NZGD49 / Buller Circuit
NZGD49 / Collingwood Circuit
NZGD49 / Gawler Circuit
NZGD49 / Grey Circuit
NZGD49 / Hawkes Bay Circuit
NZGD49 / Hokitika Circuit
NZGD49 / Jacksons Bay Circuit
NZGD49 / Karamea Circuit
NZGD49 / Lindis Peak Circuit
NZGD49 / Marlborough Circuit
NZGD49 / Mount Eden Circuit
NZGD49 / Mount Nicholas Circuit
NZGD49 / Mount Pleasant Circuit
NZGD49 / Mount York Circuit
NZGD49 / Nelson Circuit
NZGD49 / New Zealand Map Grid
NZGD49 / North Island Grid
NZGD49 / North Taieri Circuit
NZGD49 / Observation Point Circuit
NZGD49 / Okarito Circuit
NZGD49 / Poverty Bay Circuit
NZGD49 / South Island Grid
NZGD49 / Taranaki Circuit
NZGD49 / Timaru Circuit
NZGD49 / Tuhirangi Circuit
NZGD49 / UTM zone 58S
NZGD49 / UTM zone 59S
NZGD49 / UTM zone 60S
NZGD49 / Wairarapa Circuit
NZGD49 / Wanganui Circuit
NZGD49 / Wellington Circuit
Pulkovo 1942(58) / GUGiK-80
Pulkovo 1942(58) / Poland zone I
Pulkovo 1942(58) / Poland zone I (deprecated)
Pulkovo 1942(58) / Poland zone II
Pulkovo 1942(58) / Poland zone III
Pulkovo 1942(58) / Poland zone IV


And YES, I know - many of the EPSG-initiated, and Proj4, references lack 
correct toWGS coefficients so the transforms my not be accurate but that 
is a problem to be handled later (or is there as source with correct 
toWGS coefficients that I may use?)

Yours
Tomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080402/f67b0646/attachment-0001.html
From monshi at home.se  Wed Apr  2 04:37:29 2008
From: monshi at home.se (Tomas R)
Date: Wed Apr  2 04:37:43 2008
Subject: [gdal-dev] Re: GDAL C# bindings and TIFF read projection trouble
In-Reply-To: <47F27933.8030104@pobox.com>
References: <63c145660803311711icbc6ae4l381d45d3b25c8896@mail.gmail.com>	<47F251C6.3050706@pobox.com>	<63c145660804011027v337d67e1j3765a35ce9f4a33e@mail.gmail.com>
	<47F27933.8030104@pobox.com>
Message-ID: <fsvgka$akj$1@ger.gmane.org>

Setting up GDAL to work in C# requires two settings:
1: Path to the GDAL libraries if those NOT are in the same folder as the 
calling libraries. If same folder, this step can be ignored. I use:
path = Environment.GetEnvironmentVariable("PATH");
installPath = 
Path.Combine(Path.GetDirectoryName(this.GetType().Assembly.Location),"Gdalbin") 
;
path = installPath + ";" + path;
Environment.SetEnvironmentVariable("PATH", path);

2: Setting up GDAL so that it can find its supporting files, data file:
OSGeo.GDAL.Gdal.SetConfigOption("GDAL_DATA", Path.Combine(installPath, 
"data"));

After this GDAL should be available to all calling functions in the 
running program. The setting of the path is only valid for the running 
process, it do not change the global path as it appears to other processes


Ohh, it feels nice to post as solution instead of a question :)

/Tomas

From ivan.lucena at pmldnet.com  Wed Apr  2 08:25:57 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Apr  2 08:25:57 2008
Subject: [gdal-dev] gdal_merge.py -separate failing to create RGB
In-Reply-To: <6b6f1c810804011644x733104a1ueb7d4df05d6e6ad8@mail.gmail.com>
References: <6b6f1c810804011644x733104a1ueb7d4df05d6e6ad8@mail.gmail.com>
Message-ID: <47F37B55.6040903@pmldnet.com>

Hi Mattia,

 > * gdal_merge.py -separate t1.tif t2.tif t3.tif -o out.tif*

Have you tried to use [-ot datatype] to enforce changing the data type 
to byte?

Just a thought.

Ivan

mattia wrote:
> Hi folks,
> 
> I have a problem trying to create RGBs with the gdal_merge.py utility...
> 
> Mainly I have some images that I have extracted from HDF4 SDSs and processed
> in TIFF format using ImageMagick...
> 
> Now a sample image as the following gdalinfo output:
> 
> *mattia@mattia-laptop:~/Desktop/rgb$ gdalinfo t2.tif
> Driver: GTiff/GeoTIFF
> Files: t2.tif
> Size is 2708, 9340
> Coordinate System is `'
> Metadata:
>  TIFFTAG_DOCUMENTNAME=AMOD02HKM20070104021601_0_1_band_2_out.tif
>  TIFFTAG_SOFTWARE=ImageMagick 6.3.8 02/18/08 Q16 http://www.imagemagick.org
>  TIFFTAG_XRESOLUTION=72
>  TIFFTAG_YRESOLUTION=72
>  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 9340.0)
> Upper Right ( 2708.0,    0.0)
> Lower Right ( 2708.0, 9340.0)
> Center      ( 1354.0, 4670.0)
> Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray*
> 
> The file size (for the three images I am trying to merge) is about 50MB..
> As you can see its a 16 bit image..
> 
> if I run something like:
> 
> * gdal_merge.py -separate t1.tif t2.tif t3.tif -o out.tif*
> 
> The output image out.tif is still a greyscale where 2 of the bands are
> somehow "not recognized"...
> The gdalinfo on the output tif is:
> 
> *Driver: GTiff/GeoTIFF
> Files: out.tif
> Size is 2708, 9340
> Coordinate System is `'
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 9340.0)
> Upper Right ( 2708.0,    0.0)
> Lower Right ( 2708.0, 9340.0)
> Center      ( 1354.0, 4670.0)
> Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray
> Band 2 Block=2708x1 Type=UInt16, ColorInterp=Undefined
> Band 3 Block=2708x1 Type=UInt16, ColorInterp=Undefined
> *
> 
> Does it have to do with the fact that its a 16 bit image and gdal_merge.py
> doesn't support it?
> With the fact that ImageMagick has corrupted something ?
> Or what exactly is the issue?
> 
> Thanks in advance
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From lran at unc.edu  Wed Apr  2 09:38:28 2008
From: lran at unc.edu (Limei Ran)
Date: Wed Apr  2 09:39:04 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F289FE.4050508@pobox.com>
References: <47F28568.6010301@unc.edu> <47F289FE.4050508@pobox.com>
Message-ID: <47F38C54.7030302@unc.edu>

Hi Frank:

The original image file was a USGS NLCD landuse image (I think it was 
created in the IMAGINE package).   I used 
poRDataset->GetDriver()->CopyFiles made a copy.  Then, I updated the 
copied file.  I will file a ticket with a small area result. 

For a quick solution, could I translate the image into an EHdr format 
image using gdal_translate and then update it with EHdr format or other 
better format you may suggest for reading a region from the image?

Thank you very much,

Limei

Frank Warmerdam wrote:

> Limei Ran wrote:
>
>> Hi:
>>
>> I opened an HFA image and got a band from it (only 1 band image).  I 
>> read a region from the band and update the band with the updated array.
>> But, for somehow, I can not view the updated HFA image in arcGIS due 
>> to building pyramids failed.  Could you give me some ideas about what 
>> may go wrong?  Here are codes related:
>
> ...
>
> Limei,
>
> I don't see any problem in your code.
>
> Is the original imagine file created with GDAL or with imagine or arcgis?
> In place update of anything other than uncompressed image data may not 
> work
> well for imagine files not created with GDAL.
>
> If you can isolate this to a small file then you could file a ticket,
> attaching the before and after .img files and explaining as best as 
> possible
> what goes wrong in ArcGIS.
>
> Best regards,


From mattia.parigiani at gmail.com  Wed Apr  2 10:04:46 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Apr  2 10:05:54 2008
Subject: [gdal-dev] gdal_merge.py -separate failing to create RGB
In-Reply-To: <47F37B55.6040903@pmldnet.com>
References: <6b6f1c810804011644x733104a1ueb7d4df05d6e6ad8@mail.gmail.com>
	<47F37B55.6040903@pmldnet.com>
Message-ID: <6b6f1c810804020704n5de5387qe757793aa74e0347@mail.gmail.com>

I do get something now and the bands are geting filled but the output image
looses way too much detail...
It is all white basically with some blue, yellow and red patterns here and
there.. very strange ...

here is the gdalinfo:

Driver: GTiff/GeoTIFF
Files: out2.tif
Size is 2708, 9340
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 9340.0)
Upper Right ( 2708.0,    0.0)
Lower Right ( 2708.0, 9340.0)
Center      ( 1354.0, 4670.0)
Band 1 Block=2708x1 Type=Byte, ColorInterp=Red
Band 2 Block=2708x1 Type=Byte, ColorInterp=Green
Band 3 Block=2708x1 Type=Byte, ColorInterp=Blue


I have a feeling that it is actually the gdal_merge.py utility that does not
work with 16 bit integer images

The following explains my conclusion; if I extract my band greyscale images
with the following command:

*gdal_translate -ot Byte -scale -co "INTERLEAVE=BAND" -b 1
HDF4_SDS:UNKNOWN:"AMOD02HKM20070104021601.hdf":0 b1.tif

*And the same for bands 2 and 3 for example

I get a downscale from 16 bit to 8 bit integers...

If I now call gdal_merge.py on these 3 bands, I get a proper RGB image


But,

If I do the band extraction with :

*gdal_translate -co "INTERLEAVE=BAND" -b 1
HDF4_SDS:UNKNOWN:"AMOD02HKM20070104021601.hdf":0 b1.tif*


ie: not downscaling and leaving the pixel sizes as 16 bit integers.. Then I
try merging, I dont get any RGB image...

Is my conclusion right?










On Wed, Apr 2, 2008 at 9:25 AM, Lucena, Ivan <ivan.lucena@pmldnet.com>
wrote:

> Hi Mattia,
>
> > * gdal_merge.py -separate t1.tif t2.tif t3.tif -o out.tif*
>
> Have you tried to use [-ot datatype] to enforce changing the data type to
> byte?
>
> Just a thought.
>
> Ivan
>
> mattia wrote:
>
> > Hi folks,
> >
> > I have a problem trying to create RGBs with the gdal_merge.py utility...
> >
> > Mainly I have some images that I have extracted from HDF4 SDSs and
> > processed
> > in TIFF format using ImageMagick...
> >
> > Now a sample image as the following gdalinfo output:
> >
> > *mattia@mattia-laptop:~/Desktop/rgb$ gdalinfo t2.tif
> > Driver: GTiff/GeoTIFF
> > Files: t2.tif
> > Size is 2708, 9340
> > Coordinate System is `'
> > Metadata:
> >  TIFFTAG_DOCUMENTNAME=AMOD02HKM20070104021601_0_1_band_2_out.tif
> >  TIFFTAG_SOFTWARE=ImageMagick 6.3.8 02/18/08 Q16
> > http://www.imagemagick.org
> >  TIFFTAG_XRESOLUTION=72
> >  TIFFTAG_YRESOLUTION=72
> >  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> > Image Structure Metadata:
> >  INTERLEAVE=BAND
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0, 9340.0)
> > Upper Right ( 2708.0,    0.0)
> > Lower Right ( 2708.0, 9340.0)
> > Center      ( 1354.0, 4670.0)
> > Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray*
> >
> > The file size (for the three images I am trying to merge) is about
> > 50MB..
> > As you can see its a 16 bit image..
> >
> > if I run something like:
> >
> > * gdal_merge.py -separate t1.tif t2.tif t3.tif -o out.tif*
> >
> > The output image out.tif is still a greyscale where 2 of the bands are
> > somehow "not recognized"...
> > The gdalinfo on the output tif is:
> >
> > *Driver: GTiff/GeoTIFF
> > Files: out.tif
> > Size is 2708, 9340
> > Coordinate System is `'
> > Image Structure Metadata:
> >  INTERLEAVE=PIXEL
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0, 9340.0)
> > Upper Right ( 2708.0,    0.0)
> > Lower Right ( 2708.0, 9340.0)
> > Center      ( 1354.0, 4670.0)
> > Band 1 Block=2708x1 Type=UInt16, ColorInterp=Gray
> > Band 2 Block=2708x1 Type=UInt16, ColorInterp=Undefined
> > Band 3 Block=2708x1 Type=UInt16, ColorInterp=Undefined
> > *
> >
> > Does it have to do with the fact that its a 16 bit image and
> > gdal_merge.py
> > doesn't support it?
> > With the fact that ImageMagick has corrupted something ?
> > Or what exactly is the issue?
> >
> > Thanks in advance
> >
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080402/b21bd1dc/attachment.html
From warmerdam at pobox.com  Wed Apr  2 10:22:43 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  2 10:23:05 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F38C54.7030302@unc.edu>
References: <47F28568.6010301@unc.edu> <47F289FE.4050508@pobox.com>
	<47F38C54.7030302@unc.edu>
Message-ID: <47F396B3.8080506@pobox.com>

Limei Ran wrote:
> Hi Frank:
> 
> The original image file was a USGS NLCD landuse image (I think it was 
> created in the IMAGINE package).   I used 
> poRDataset->GetDriver()->CopyFiles made a copy.  Then, I updated the 
> copied file.  I will file a ticket with a small area result.

Cool, thanks

> For a quick solution, could I translate the image into an EHdr format 
> image using gdal_translate and then update it with EHdr format or other 
> better format you may suggest for reading a region from the image?

That should work, or I presume you could even use the Driver CreateCopy()
method to copy the image contents, instead of literally copying all the
component files.  This would give you a GDAL generated .img file that
should hopefully be more safely updated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Wed Apr  2 11:02:19 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Apr  2 11:02:13 2008
Subject: [gdal-dev] ogr_OCI plugin can't find OCI.dll
Message-ID: <47F39FFB.6070805@pmldnet.com>

Hi there,

I am getting a "...OCI.dll was not found..." message when trying to use 
the OCI plugin.

That is what I did:

I downloaded the GDAL 1.5.0 binary distribution for win32 and the OCI 
plugin:

gdalwin32exe150.zip
gdalwin32oci150.zip

And I extracted it to:

E:\gdalwin32-1.5\bin
E:\gdalwin32-1.5\bin\data
E:\gdalwin32-1.5\bin\gdalplugins

I reset all other GDAL related environment variables to:

set path=%path%;E:\gdalwin32-1.5\bin
set GDAL_DRIVER_PATH=E:\gdalwin32-1.5\bin\gdalplugins
set GDAL_DATA=E:\gdalwin32-1.5\bin\data

The OCI.dll is on the windows path. I can run executable from the the 
same folder, like sqlplus.exe for example. BTW, the version I am using 
is 10.2.0.1.0.

When I run gdalinfo I've got the windows dialog box error message 
"...OCI.dll was not found..." and GDAL error report:

% ogrinfo
ERROR 1: Can't load requested DLL: 
E:\gdalwin32-1.5\bin\gdalplugins\ogr_OCI.dll
193: %1 is not a valid Win32 application.

I can see on the Process Monitor that OCI.dll was found and successfully 
loaded. So, I don't know that is happening.

Does anybody has a clue?

Thanks in advance,

Ivan

From lran at unc.edu  Wed Apr  2 13:27:22 2008
From: lran at unc.edu (Limei Ran)
Date: Wed Apr  2 13:28:03 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F396B3.8080506@pobox.com>
References: <47F28568.6010301@unc.edu> <47F289FE.4050508@pobox.com>
	<47F38C54.7030302@unc.edu> <47F396B3.8080506@pobox.com>
Message-ID: <47F3C1FA.4050602@unc.edu>

Hi Frank:

Thank you for your help.  I worked on the image created by 
CreateCopy().  It worked.  But, when I looked at the updated file in 
arcGIS.    It appears to be not updated.

I used:
=============
poBand->RasterIO(GF_Write, 
c_col1-1,c_row1-1,c_nXSize,c_nYSize,poImage,c_nXSize,c_nYSize,GDT_Byte,0,0)
poRDataset->FlushCache();
GDALClose( (GDALDatasetH) poRDataset );
CPLFree (poImage);
=============

Do I need to write the updated band to poRDataset after I use 
poBand->RasterIO or do something else?  The images are HFA format.

Thanks,

Limei

Frank Warmerdam wrote:

> Limei Ran wrote:
>
>> Hi Frank:
>>
>> The original image file was a USGS NLCD landuse image (I think it was 
>> created in the IMAGINE package).   I used 
>> poRDataset->GetDriver()->CopyFiles made a copy.  Then, I updated the 
>> copied file.  I will file a ticket with a small area result.
>
>
> Cool, thanks
>
>> For a quick solution, could I translate the image into an EHdr format 
>> image using gdal_translate and then update it with EHdr format or 
>> other better format you may suggest for reading a region from the image?
>
>
> That should work, or I presume you could even use the Driver CreateCopy()
> method to copy the image contents, instead of literally copying all the
> component files.  This would give you a GDAL generated .img file that
> should hopefully be more safely updated.
>
> Best regards,


From ivan.lucena at pmldnet.com  Wed Apr  2 13:41:10 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Apr  2 13:41:14 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F3C1FA.4050602@unc.edu>
References: <47F28568.6010301@unc.edu>
	<47F289FE.4050508@pobox.com>	<47F38C54.7030302@unc.edu>
	<47F396B3.8080506@pobox.com> <47F3C1FA.4050602@unc.edu>
Message-ID: <47F3C536.9030300@pmldnet.com>

Limei,

When you do anything to a image file outside ArcGIS and you keep using 
the same file name, remember to delete the .aux files.

Ivan


Limei Ran wrote:
> Hi Frank:
> 
> Thank you for your help.  I worked on the image created by 
> CreateCopy().  It worked.  But, when I looked at the updated file in 
> arcGIS.    It appears to be not updated.
> 
> I used:
> =============
> poBand->RasterIO(GF_Write, 
> c_col1-1,c_row1-1,c_nXSize,c_nYSize,poImage,c_nXSize,c_nYSize,GDT_Byte,0,0)
> poRDataset->FlushCache();
> GDALClose( (GDALDatasetH) poRDataset );
> CPLFree (poImage);
> =============
> 
> Do I need to write the updated band to poRDataset after I use 
> poBand->RasterIO or do something else?  The images are HFA format.
> 
> Thanks,
> 
> Limei
> 
> Frank Warmerdam wrote:
> 
>> Limei Ran wrote:
>>
>>> Hi Frank:
>>>
>>> The original image file was a USGS NLCD landuse image (I think it was 
>>> created in the IMAGINE package).   I used 
>>> poRDataset->GetDriver()->CopyFiles made a copy.  Then, I updated the 
>>> copied file.  I will file a ticket with a small area result.
>>
>>
>> Cool, thanks
>>
>>> For a quick solution, could I translate the image into an EHdr format 
>>> image using gdal_translate and then update it with EHdr format or 
>>> other better format you may suggest for reading a region from the image?
>>
>>
>> That should work, or I presume you could even use the Driver CreateCopy()
>> method to copy the image contents, instead of literally copying all the
>> component files.  This would give you a GDAL generated .img file that
>> should hopefully be more safely updated.
>>
>> Best regards,
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From lran at unc.edu  Wed Apr  2 14:31:07 2008
From: lran at unc.edu (Limei Ran)
Date: Wed Apr  2 14:32:04 2008
Subject: [gdal-dev] updating a HFA image
In-Reply-To: <47F3C536.9030300@pmldnet.com>
References: <47F28568.6010301@unc.edu>
	<47F289FE.4050508@pobox.com>	<47F38C54.7030302@unc.edu>
	<47F396B3.8080506@pobox.com> <47F3C1FA.4050602@unc.edu>
	<47F3C536.9030300@pmldnet.com>
Message-ID: <47F3D0EB.7070202@unc.edu>

Hi Ivan:

I got rid of .aux and it worked right.

Thanks for all your help.

Limei

Lucena, Ivan wrote:

> Limei,
>
> When you do anything to a image file outside ArcGIS and you keep using 
> the same file name, remember to delete the .aux files.
>
> Ivan
>
>
> Limei Ran wrote:
>
>> Hi Frank:
>>
>> Thank you for your help.  I worked on the image created by 
>> CreateCopy().  It worked.  But, when I looked at the updated file in 
>> arcGIS.    It appears to be not updated.
>>
>> I used:
>> =============
>> poBand->RasterIO(GF_Write, 
>> c_col1-1,c_row1-1,c_nXSize,c_nYSize,poImage,c_nXSize,c_nYSize,GDT_Byte,0,0) 
>>
>> poRDataset->FlushCache();
>> GDALClose( (GDALDatasetH) poRDataset );
>> CPLFree (poImage);
>> =============
>>
>> Do I need to write the updated band to poRDataset after I use 
>> poBand->RasterIO or do something else?  The images are HFA format.
>>
>> Thanks,
>>
>> Limei
>>
>> Frank Warmerdam wrote:
>>
>>> Limei Ran wrote:
>>>
>>>> Hi Frank:
>>>>
>>>> The original image file was a USGS NLCD landuse image (I think it 
>>>> was created in the IMAGINE package).   I used 
>>>> poRDataset->GetDriver()->CopyFiles made a copy.  Then, I updated 
>>>> the copied file.  I will file a ticket with a small area result.
>>>
>>>
>>>
>>> Cool, thanks
>>>
>>>> For a quick solution, could I translate the image into an EHdr 
>>>> format image using gdal_translate and then update it with EHdr 
>>>> format or other better format you may suggest for reading a region 
>>>> from the image?
>>>
>>>
>>>
>>> That should work, or I presume you could even use the Driver 
>>> CreateCopy()
>>> method to copy the image contents, instead of literally copying all the
>>> component files.  This would give you a GDAL generated .img file that
>>> should hopefully be more safely updated.
>>>
>>> Best regards,
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>

From marcello_ferrero at yahoo.com  Wed Apr  2 17:07:31 2008
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Wed Apr  2 17:07:33 2008
Subject: [gdal-dev] Cannot read tiff in gdal 1.5.1 for WinCE
Message-ID: <604510.63265.qm@web65608.mail.ac4.yahoo.com>

I was able to open tiff files on WinCE with gdal 1.4.2, but now that I
ricompiled gdal 1.5.1 for WinCE, I cannot read tiff files anymore. 
I suspect the problem is due to the libtiff changes introduced with gdal
1.5.0.

In gdal 1.5.1 when bsearch is called within TIFFFindField the value of
tif->tif_nfields is initially 0. This causes bsearch to fail as the num
parameter is 0. The bsearch used on WinCE is the one provided for the
WinCe port (wcelibcex library).

I also tried to change the bsearch code of wcelibcex to return NULL when
num is 0. The result is that now bsearch does not fail but I still have
other errors returned from libtiff later in the code.
The same file opened with the same code compiled for Windows XP works
correctly.

Any idea?

Regards,
Marcello Ferrero


      ____________________________________________________________________________________
You rock. That's why Blockbuster's offering you one month of Blockbuster Total Access, No Cost.  
http://tc.deals.yahoo.com/tc/blockbuster/text5.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080402/7f6a3198/attachment.html
From mateusz at loskot.net  Wed Apr  2 17:23:14 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  2 17:23:21 2008
Subject: [gdal-dev] Cannot read tiff in gdal 1.5.1 for WinCE
In-Reply-To: <604510.63265.qm@web65608.mail.ac4.yahoo.com>
References: <604510.63265.qm@web65608.mail.ac4.yahoo.com>
Message-ID: <47F3F942.2010306@loskot.net>

marcello ferrero wrote:
> I was able to open tiff files on WinCE with gdal 1.4.2, but now that I
> ricompiled gdal 1.5.1 for WinCE, I cannot read tiff files anymore. 
> I suspect the problem is due to the libtiff changes introduced with gdal
> 1.5.0.
> 
> In gdal 1.5.1 when bsearch is called within TIFFFindField the value of
> tif->tif_nfields is initially 0. This causes bsearch to fail as the num
> parameter is 0. The bsearch used on WinCE is the one provided for the
> WinCe port (wcelibcex library).
> 
> I also tried to change the bsearch code of wcelibcex to return NULL when
> num is 0. The result is that now bsearch does not fail but I still have
> other errors returned from libtiff later in the code.
> The same file opened with the same code compiled for Windows XP works
> correctly.
> 
> Any idea?

This is known issue and already reported:

http://trac.osgeo.org/gdal/ticket/2133

As I see, you've also reported it as ticket #2307.
I'm going to close your report marked as duplicate.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mslinn at mslinn.com  Wed Apr  2 19:10:18 2008
From: mslinn at mslinn.com (Michael Slinn)
Date: Wed Apr  2 19:32:06 2008
Subject: [gdal-dev] Drawing on OpenEV Layer
Message-ID: <47F4125A.3090007@mslinn.com>

In the OpenEV Python shell, I can type:

view=gview.app.sel_manager.get_active_view()
view.get_named_layer("whatever")
view.get_color()

That works great, but I'd like to do more:

1) After the user draws a polyline using the Edit Toolbar line tool,
I'd like to read the coordinates back.

2) Erase the most recently drawn entity (so I can erase the user's
polyline once the coordinates have been extracted.)

Thanks in advance,

Mike
From gu.rong.bin at gmail.com  Wed Apr  2 23:04:57 2008
From: gu.rong.bin at gmail.com (=?GB2312?B?ucXI2bHy?=)
Date: Wed Apr  2 23:04:58 2008
Subject: [gdal-dev] How to set an OGRLayer's OGRSpatialReference?
Message-ID: <390d64000804022004q2e0e618cycd57aa882ce0246e@mail.gmail.com>

Hi,

We can get the OGRSpatialReference from OGRLayer,but can't set
OGRSpatialReference to OGRLayer.

When I changed the OGRSpatialReference of an OGRLayer, what should I do to
save that?

I'm a new here.

Thanks in advance,

Gu Rongbin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080403/12151f9f/attachment.html
From warmerdam at pobox.com  Wed Apr  2 23:12:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  2 23:13:11 2008
Subject: [gdal-dev] How to set an OGRLayer's OGRSpatialReference?
In-Reply-To: <390d64000804022004q2e0e618cycd57aa882ce0246e@mail.gmail.com>
References: <390d64000804022004q2e0e618cycd57aa882ce0246e@mail.gmail.com>
Message-ID: <47F44B34.7000106@pobox.com>

??? wrote:
> Hi,
>  
> We can get the OGRSpatialReference from OGRLayer,but can't set 
> OGRSpatialReference to OGRLayer.
>  
> When I changed the OGRSpatialReference of an OGRLayer, what should I do 
> to save that?

Gu Rongbin,

Currently the OGR model does not provide for changing the spatial
reference of an existing layer. It can only be established at
layer creation time (and is passed into the CreateLayer() function).

So, if you really want to change it through OGR you basically need
to copy the whole layer to a newly created layer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mitchelljj98 at gmail.com  Thu Apr  3 09:48:51 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Thu Apr  3 09:48:53 2008
Subject: [gdal-dev] geoPDF to geotif conversion
Message-ID: <fa2ac0580804030648u6a2cb80cxc9b312512c9223cd@mail.gmail.com>

Hi,

One of our customers would like to have us convert geoPDF to geotif format,
and I have looked within all the 80+ formats that gdal can convert to and I
noticed that geoPDF was not listed.
In the future is geoPDF going to be a format that gdal will be supporting?
Does anyone know of any open source application that currently converts
geoPDF into geotiff?

Thanks,



-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080403/86cecbaf/attachment.html
From nbarker at ittvis.com  Thu Apr  3 10:59:04 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Apr  3 11:26:42 2008
Subject: [gdal-dev] geoPDF to geotif conversion
References: <fa2ac0580804030648u6a2cb80cxc9b312512c9223cd@mail.gmail.com>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B22E@gemini.rsinc.com>

John,

 

geoPDF is a closed format - http://en.wikipedia.org/wiki/GeoPDF - but if
I am wrong please correct me as it is an interesting way to distribute
product.

 

That is not to say that you couldn't take the image out of a geopdf, I
am sure libraries such as iText, FOP (Java) could do this for you.

 

Norman

 

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of John Mitchell
Sent: Thursday, April 03, 2008 7:49 AM
To: gdal-dev@lists.osgeo.org
Cc: mitchelljj98@gmail.com; Mark Hollis
Subject: [gdal-dev] geoPDF to geotif conversion

 

Hi,

One of our customers would like to have us convert geoPDF to geotif
format, and I have looked within all the 80+ formats that gdal can
convert to and I noticed that geoPDF was not listed.  
In the future is geoPDF going to be a format that gdal will be
supporting?
Does anyone know of any open source application that currently converts
geoPDF into geotiff?

Thanks,



-- 
John J. Mitchell 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080403/e1f69147/attachment-0001.html
From Tom.Kralidis at ec.gc.ca  Fri Apr  4 12:01:22 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Fri Apr  4 12:02:25 2008
Subject: [gdal-dev] build error on latest svn trunk
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1C0@ecburexch1.ontario.int.ec.gc.ca>


On fc7, with:

./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no
--with-pg=/usr/local/pgsql/bin/pg_config
--with-mysql=/usr/bin/mysql_config --with-sqlite --with-curl=/usr/bi
n/curl-config --with-python --with-expat --with-perl

...



ogrpgtablelayer.cpp: In member function 'virtual OGRErr
OGRPGTableLayer::DeleteFeature(long int)':
ogrpgtablelayer.cpp:706: warning: format '%d' expects type 'int', but
argument 4 has type 'long int'
ogrpgtablelayer.cpp: In static member function 'static CPLString
OGRPGTableLayer::EscapeString(PGconn*, const char*, int, const char*)':
ogrpgtablelayer.cpp:839: error: 'PQescapeStringConn' was not declared in
this scope
make[3]: *** [../o/ogrpgtablelayer.o] Error 1
make[3]: Leaving directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts/pg'
make[2]: *** [pg-target] Error 2
make[2]: Leaving directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr'
make: *** [ogr-target] Error 2
From even.rouault at mines-paris.org  Fri Apr  4 13:59:51 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  4 13:59:57 2008
Subject: [gdal-dev] build error on latest svn trunk
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1C0@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1C0@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <200804041959.51971.even.rouault@mines-paris.org>

Tom,

Could you tell me which version of Postgres (client API) you are using ? I've 
looked in Postgres documentation and it seems that 'PQescapeStringConn' was 
introduced in versions >= 7.3. So apparently you're using a version <= 7.2, 
which is very surprising on a recent distribution like FC7.

Even

Le Friday 04 April 2008 18:01:22 Kralidis,Tom [Burlington], vous avez ?crit?:
> On fc7, with:
>
> ./configure --with-png --with-libtiff=internal --with-geotiff=internal
> --with-jpeg --with-xerces --with-geos=no
> --with-pg=/usr/local/pgsql/bin/pg_config
> --with-mysql=/usr/bin/mysql_config --with-sqlite --with-curl=/usr/bi
> n/curl-config --with-python --with-expat --with-perl
>
> ...
>
>
>
> ogrpgtablelayer.cpp: In member function 'virtual OGRErr
> OGRPGTableLayer::DeleteFeature(long int)':
> ogrpgtablelayer.cpp:706: warning: format '%d' expects type 'int', but
> argument 4 has type 'long int'
> ogrpgtablelayer.cpp: In static member function 'static CPLString
> OGRPGTableLayer::EscapeString(PGconn*, const char*, int, const char*)':
> ogrpgtablelayer.cpp:839: error: 'PQescapeStringConn' was not declared in
> this scope
> make[3]: *** [../o/ogrpgtablelayer.o] Error 1
> make[3]: Leaving directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts/pg'
> make[2]: *** [pg-target] Error 2
> make[2]: Leaving directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts'
> make[1]: *** [sublibs] Error 2
> make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr'
> make: *** [ogr-target] Error 2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Tom.Kralidis at ec.gc.ca  Fri Apr  4 14:08:34 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Fri Apr  4 14:08:35 2008
Subject: [gdal-dev] build error on latest svn trunk
In-Reply-To: <200804041959.51971.even.rouault@mines-paris.org>
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1C4@ecburexch1.ontario.int.ec.gc.ca>


Even,

I have a locally installed PostgreSQL, but it looks like I'm using 8.1.2:

postgres=# select version();
                                              version                                              
---------------------------------------------------------------------------------------------------
 PostgreSQL 8.1.2 on i686-pc-linux-gnu, compiled by GCC gcc (GCC) 4.0.2 20051125 (Red Hat 4.0.2-8)
(1 row) 

..Tom




> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: 04 April, 2008 2:00 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Kralidis,Tom [Burlington]
> Subject: Re: [gdal-dev] build error on latest svn trunk
> 
> Tom,
> 
> Could you tell me which version of Postgres (client API) you 
> are using ? I've looked in Postgres documentation and it 
> seems that 'PQescapeStringConn' was introduced in versions >= 
> 7.3. So apparently you're using a version <= 7.2, which is 
> very surprising on a recent distribution like FC7.
> 
> Even
> 
> Le Friday 04 April 2008 18:01:22 Kralidis,Tom [Burlington], 
> vous avez ?crit?:
> > On fc7, with:
> >
> > ./configure --with-png --with-libtiff=internal 
> --with-geotiff=internal 
> > --with-jpeg --with-xerces --with-geos=no 
> > --with-pg=/usr/local/pgsql/bin/pg_config
> > --with-mysql=/usr/bin/mysql_config --with-sqlite 
> --with-curl=/usr/bi 
> > n/curl-config --with-python --with-expat --with-perl
> >
> > ...
> >
> >
> >
> > ogrpgtablelayer.cpp: In member function 'virtual OGRErr 
> > OGRPGTableLayer::DeleteFeature(long int)':
> > ogrpgtablelayer.cpp:706: warning: format '%d' expects type 
> 'int', but 
> > argument 4 has type 'long int'
> > ogrpgtablelayer.cpp: In static member function 'static CPLString 
> > OGRPGTableLayer::EscapeString(PGconn*, const char*, int, 
> const char*)':
> > ogrpgtablelayer.cpp:839: error: 'PQescapeStringConn' was 
> not declared 
> > in this scope
> > make[3]: *** [../o/ogrpgtablelayer.o] Error 1
> > make[3]: Leaving directory
> > `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts/pg'
> > make[2]: *** [pg-target] Error 2
> > make[2]: Leaving directory
> > `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts'
> > make[1]: *** [sublibs] Error 2
> > make[1]: Leaving directory 
> `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr'
> > make: *** [ogr-target] Error 2
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
From plists at prometheus.org.yu  Sun Apr  6 12:49:36 2008
From: plists at prometheus.org.yu (Attila Csipa)
Date: Sun Apr  6 12:49:40 2008
Subject: [gdal-dev] GML, MySQL data sources and preserve_fid
Message-ID: <200804061849.36327.plists@prometheus.org.yu>

I'm just experimenting with having some of my data in MySQL, but I'm getting 
strange results regarding the FID - losing it, that is. It might be just that 
I have overlooked something obvious, but google and the ogr wiki pages turned 
up nothing that caught my eye...

If I dump my data to gml from mysql like this:

ogr2ogr -preserve_fid -f GML test.gml MySQL:test,user=root

the GML will have the correct FID-s, however, if I try to load back that same 
GML into mysql with:

ogr2ogr -preserve_fid -f MySQL MySQL:test,user=root test.gml -overwrite

the features in the tables will have a sequential OGR_FID starting with 1, 
regardless of what the GML contains in the fid attribute of the features. 
This messes things up a bit as one of the feature fields is actually a 
reference to the parent features' FID. I'm using GDAL 1.4.4 on Gutsy (sadly 
no official 1.5.x packages in backports for Ubuntu yet). Any ideas ?
From jluis at ualg.pt  Sun Apr  6 12:57:14 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Apr  6 12:57:19 2008
Subject: [gdal-dev] A nodatavalue crashing problem with MEXs
Message-ID: <47F900EA.1000207@ualg.pt>


Hi,

I have MEXified (a Matlab wrap) a kind of gdal_warp using virtual 
datasets. It seams to be working more or less fine (some of problems are 
due to the gdal warping itself as mentioned in ticket #2305) but I'm 
having a serious problem when trying to set a nodatavalue. Having the 
following code active simply crash the Matlab session.

        double nan = 0;
        psWarpOptions->padfDstNoDataReal = (double 
*)CPLMalloc(nBands*sizeof(double));
        for (i = 0; i < nBands; i++) {
            psWarpOptions->padfDstNoDataReal[i] = nan;
            GDALSetRasterNoDataValue( GDALGetRasterBand(hDstDS, i+1),
                        psWarpOptions->padfDstNoDataReal[i] );
        }

Am I doing something obviously idiot?

Thanks
Joaquim Luis
From even.rouault at mines-paris.org  Sun Apr  6 13:54:02 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr  6 13:54:07 2008
Subject: [gdal-dev] GML, MySQL data sources and preserve_fid
In-Reply-To: <200804061849.36327.plists@prometheus.org.yu>
References: <200804061849.36327.plists@prometheus.org.yu>
Message-ID: <200804061954.02694.even.rouault@mines-paris.org>

Attila,

You're not doing anything wrong. In fact, the problem is not with the mysql 
driver, but with the GML one. The GML driver cannot currently read correctly 
the FIDs written. This is a known bug : see 
http://trac.osgeo.org/gdal/ticket/1017

Le Sunday 06 April 2008 18:49:36 Attila Csipa, vous avez ?crit?:
> I'm just experimenting with having some of my data in MySQL, but I'm
> getting strange results regarding the FID - losing it, that is. It might be
> just that I have overlooked something obvious, but google and the ogr wiki
> pages turned up nothing that caught my eye...
>
> If I dump my data to gml from mysql like this:
>
> ogr2ogr -preserve_fid -f GML test.gml MySQL:test,user=root
>
> the GML will have the correct FID-s, however, if I try to load back that
> same GML into mysql with:
>
> ogr2ogr -preserve_fid -f MySQL MySQL:test,user=root test.gml -overwrite
>
> the features in the tables will have a sequential OGR_FID starting with 1,
> regardless of what the GML contains in the fid attribute of the features.
> This messes things up a bit as one of the feature fields is actually a
> reference to the parent features' FID. I'm using GDAL 1.4.4 on Gutsy (sadly
> no official 1.5.x packages in backports for Ubuntu yet). Any ideas ?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Sun Apr  6 15:56:25 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Apr  6 15:56:29 2008
Subject: [gdal-dev] Definitely GDAL don't like NaNs
Message-ID: <47F92AE9.8090003@ualg.pt>

Hello again

With the same gdalwarp_mex that I mentioned in the mail before, if I 
send in an array which has NaNs I witness a new type of Matlab crashing. 
E.G, it crashes while trying to crash. Only the Task Manager can put an 
end to its endless crashing existence.

I guess this is related to the fact that I'm using virtual datasets 
because with the other couple of GDAL MEXs that I have no such effect is 
observed (that is, they work well).

Joaquim Luis
From plists at prometheus.org.yu  Sun Apr  6 16:55:20 2008
From: plists at prometheus.org.yu (Attila Csipa)
Date: Sun Apr  6 16:55:26 2008
Subject: [gdal-dev] GML, MySQL data sources and preserve_fid
In-Reply-To: <200804061954.02694.even.rouault@mines-paris.org>
References: <200804061849.36327.plists@prometheus.org.yu>
	<200804061954.02694.even.rouault@mines-paris.org>
Message-ID: <200804062255.21522.plists@prometheus.org.yu>

On Sunday 06 April 2008 19:54:02 you wrote:
> Le Sunday 06 April 2008 18:49:36 Attila Csipa, vous avez ?crit :
> > I'm just experimenting with having some of my data in MySQL, but I'm
> > getting strange results regarding the FID - losing it, that is. It might
> > be just that I have overlooked something obvious, but google and the ogr
> > wiki pages turned up nothing that caught my eye...
>
> You're not doing anything wrong. In fact, the problem is not with the mysql
> driver, but with the GML one. The GML driver cannot currently read
> correctly the FIDs written. This is a known bug : see
> http://trac.osgeo.org/gdal/ticket/1017

Ah. I'm thinking that perhaps the preserve_fid switch can address the 
concerns ? If the switch is not present, we use our own FIDs, if it is, we 
take over the GML one (our best guess of it, at least), with a caveat emptor 
note ? That's roughly how the other direction worked, I think it would be the 
most intuitive way to do it. If the main concern is data integrity, I don't 
really see why the mysql driver respect this either - if the table was not 
created/maintained by OGR, the FID values could be just as misleading.

From Tom.Kralidis at ec.gc.ca  Mon Apr  7 08:28:46 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Mon Apr  7 08:28:51 2008
Subject: [gdal-dev] build error on latest svn trunk
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1C0@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1CC@ecburexch1.ontario.int.ec.gc.ca>



> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of 
> Kralidis,Tom [Burlington]
> Sent: 04 April, 2008 12:01 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] build error on latest svn trunk
> 
> 
> On fc7, with:
> 
> ./configure --with-png --with-libtiff=internal 
> --with-geotiff=internal --with-jpeg --with-xerces 
> --with-geos=no --with-pg=/usr/local/pgsql/bin/pg_config
> --with-mysql=/usr/bin/mysql_config --with-sqlite 
> --with-curl=/usr/bi n/curl-config --with-python --with-expat 
> --with-perl
> 
> ...
> 
> 
> 
> ogrpgtablelayer.cpp: In member function 'virtual OGRErr 
> OGRPGTableLayer::DeleteFeature(long int)':
> ogrpgtablelayer.cpp:706: warning: format '%d' expects type 
> 'int', but argument 4 has type 'long int'
> ogrpgtablelayer.cpp: In static member function 'static 
> CPLString OGRPGTableLayer::EscapeString(PGconn*, const char*, 
> int, const char*)':
> ogrpgtablelayer.cpp:839: error: 'PQescapeStringConn' was not 
> declared in this scope
> make[3]: *** [../o/ogrpgtablelayer.o] Error 1
> make[3]: Leaving directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts/pg'
> make[2]: *** [pg-target] Error 2
> make[2]: Leaving directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts'
> make[1]: *** [sublibs] Error 2
> make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr'
> make: *** [ogr-target] Error 2
> _______________________________________________

Turns out there were some inconsistencies between postgresql libraries,
so I did a clean install, which worked.  Thanks to Even for the help via
email.

..Tom
From estrada.adam at gmail.com  Mon Apr  7 09:06:35 2008
From: estrada.adam at gmail.com (aestrada)
Date: Mon Apr  7 09:06:38 2008
Subject: [gdal-dev] Using GDAL to process embedded JPEG2000 images within a
	NITF file
Message-ID: <2aa11890-d1c6-4fd8-ae38-35a21ba6aaee@e39g2000hsf.googlegroups.com>

All,

I recently downloaded the GDAL1.5 source code and built my own DLL (on
the Windows platform), adding support for OGDI and MrSID by obtaining
the necessary libraries and modifying the NMAKE.OPT file (uncommenting
some lines) - I also converted the necessary projects over to Visual
Studio 2005 (8.0). I was successful in this and got GDAL to process
the files I needed.

Now for the problem I'm having. Using another dataset, I was trying to
process embedded JPEG2000 images within a NITF file and received the
following errors:

ERROR 4: 'J2K_SUBFILE:3884,542714864,D:\xxxxxx.NTF' does not exist in
the file system,

and is not recognised as a supported dataset name.

ERROR 1: Unable to open JPEG2000 image within NITF file.

Is the JP2KAK driver available?

So I tried to add support for embedded JPEG2000 images within a NITF
file by following the same type of procedure. First I tried to build
in support for JASPER, thinking that this would be the "free" way to
get JPEG2000 support (JP2KAK costs too much!!!). I was able to build
this support in, but I still get the same error messages from GDAL as
shown above. Then I tried building in support for ECW, thinking it
could possibly be used to uncompress the JPEG2000. However, I can't
get the ECW component to build - mainly because of compatibility
problems with its source code and the version of Visual Studio I'm
using (8 vs. 7.1). My question is: if I can get libecwj2.lib to build
(or ncsecw.dll, ncsutil.dll and ncsnet.dll), will this help solve my
problem (of getting GDAL to convert the embedded JPEG2000 images
within NITF)?

Please let me know if this is the right path to go down and, if it is,
can you provide any help in getting ECW to build in my environment?

In search of another solution, I tried the following... I used the
FWTOOLS version of GDAL and was able to successfully process the
embedded JPEG2000 images within NITF, although I 'm not sure
specifically which driver(s) it used to do the processing. As a
possible solution to my problem, I wanted to know if I could use these
DLLs and freely distribute them. If so, is there anything in addition
to what's in your LICENSE.TXT file that I would need to display to an
end user?

Thanks in advance for any help you can give,

AWE
From hobu.inc at gmail.com  Mon Apr  7 10:08:54 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Apr  7 10:12:04 2008
Subject: [gdal-dev] Re: GDAL/OGR Python bindings and threads
In-Reply-To: <bea9869d0804061812v7d6791cei6e87baa1ee79af6a@mail.gmail.com>
References: <bea9869d0804061812v7d6791cei6e87baa1ee79af6a@mail.gmail.com>
Message-ID: <AF37174A-E9CB-4B20-A78F-08AB576A5001@gmail.com>


On Apr 6, 2008, at 8:12 PM, Allen Bierbaum wrote:
> First, is this a reasonable place to post questions about the python
> bindings for GDAL/OGR or is there another list that is more
> appropriate?
>

gdal-dev would be more appropriate, but I would be the one who would  
take the first crack at answering the question there as well :)  http://lists.osgeo.org/mailman/listinfo/gdal-dev/ 
   Frank would then chime in with corrections to all of the  
information I got wrong ;)

> Second, assuming that this list works, does anyone have any experience
> trying to extend the OGR bindings to release the GIL during queries.
> I see that this is not enabled, but was there a specific reason for
> this? (ex: does OGR crash horribly when it is tried)

OGR is generally not thread safe (GDAL has more thread safety, but  
there are areas of the code that have not be vetted there as well),  
and I would expect that releasing the GIL inside of the bindings would  
produce awful, painful results in most cases.  Thread safety in GDAL/ 
OGR is now mostly a function of which driver you are using and whether  
or not it has been vetted to be thread safe.  The FAQ entry about  
GDAL's thread safety should apply to OGR with respect to the "core"  
stuff it talks about <http://www.gdal.org/faq.html>, but as a rule,  
OGR is less thread safe than GDAL, and for the most part, not thread  
safe at all.  Not the answer you're probably looking for, I know.

Which driver are you using that you want to do multithreaded access  
with?  If it were just PostGIS from Python, maybe psycopg2 is thread  
safe and you could query the wkb/wkt out with that and generate your  
geometries with Shapely?  That's mostly what OGR is doing in the  
background in PG's case anyway.

Howard



From olitour at gmail.com  Mon Apr  7 15:51:24 2008
From: olitour at gmail.com (Olivier Tournaire)
Date: Mon Apr  7 15:51:27 2008
Subject: [gdal-dev] Multiple layers in OGRDataSource
Message-ID: <4cbd7b750804071251u75e2aa77v1763bd58967b07ef@mail.gmail.com>

I read the OGR documentation OGR API Tutorial, and I found this sentence :

" An OGRDataSource <http://www.gdal.org/ogr/classOGRDataSource.html> can
potentially have many layers associated with it"

However, I cannot find the way to add multiple layers in one instance of
OGRDataSource. What I would like to do is to read a set of shapefiles,
create a layer for each of them and store them in an OGRDataSource object.
Note I also want to be able to create an OGRDataSource object and add layers
(from shapefiles) in a second time. Could you please give me the way to do
such a task ?

Regards,

Olivier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080407/b4c2a117/attachment.html
From jrepetto at free.fr  Tue Apr  8 05:55:13 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Apr  8 05:55:21 2008
Subject: [gdal-dev] Map calibration
Message-ID: <47FB4101.7050405@free.fr>

Hello,

Is there a How-To that explains step by step how to calibrate a map with 
  the GDAL tools (GCPs, gdaltransform, gdalwarp, ...) ?

Thanks,
Jean-Claude
From DCarreira at edia.pt  Tue Apr  8 11:14:33 2008
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue Apr  8 11:46:39 2008
Subject: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins
Message-ID: <94C0F903807262438796839A98A9BA50021066BE@beja001.edia.pt>

Hello.
 
I'm trying to use FWTools 2.1.0 with OCI and SDE plugins and get errors
related to wrong versions conflicts. OGR says gdal14.dll is not found,
and GDAL complains about SDE driver being compiled against GDAL 1.5 and
current version is 1.6.
 
Are new plugins expected soon? And is there a workaround?
 
Thanks everyone for your help.
 
Regards,
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080408/57b4d653/attachment.html
From neteler at osgeo.org  Wed Apr  9 06:23:11 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Apr  9 06:23:13 2008
Subject: [gdal-dev] Updated OGR/SHAPELIB based DBF driver crashing with
	GRASS SVN
Message-ID: <86782b610804090323n7e89eb43w90cf20112b79459b@mail.gmail.com>

Frank,

after syncing (as regularly) the DBF driver from SHAPELIB embedded
in OGR, we face the problem that it no longer works with older GDAL
versions than current SVN:

http://trac.osgeo.org/grass/ticket/110

I don't know what to do. In essence, I don't want to fork our version
from yours.

Any ideas?

thanks
Markus

On Wed, Apr 9, 2008 at 11:31 AM, Maris Nartiss <maris.gis@gmail.com> wrote:
> It's known as issue 110 [1].
>
>
>  Maris.
>
>  1. http://trac.osgeo.org/grass/ticket/110
>
>  2008/4/9, benjamin.ducke@ufg.uni-kiel.de <benjamin.ducke@ufg.uni-kiel.de>:
>
>
> > FWIW, the DBF driver still does not seem to be usable.
>  > On Ubuntu 7.10, GDAL 1.5.1, with a version compiled from SVN (did make
>  > distclean), I cannot access attribute data stored in a DBF file.
>  >
>  > v.info -c simply results in a segfault.
>  >
>  > GRASS 6.3.RC6 works fine on the same system and with the same GDAL.
>  >
>  > Best,
>  >
>  > Benjamin
>  >
>  >
>  > _______________________________________________
>  > grass-dev mailing list
>  > grass-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/grass-dev
From a.neumann at carto.net  Wed Apr  9 09:08:07 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Apr  9 09:08:11 2008
Subject: [gdal-dev] Problem with dgn files and MSLINK attribute
Message-ID: <22042.193.246.86.39.1207746487.squirrel@webmail.customers.iirc.at>

Hello,

I am trying to convert dgn files to something readable in a GIS software
(like ESRI shapefile, Postgis, etc.)

The geometry part seems to convert fine, however, the MSLINK values aren't
unique at all. For the two layers I am interested in, containing >3000
point features, I only get two different MSLink values. I expected them to
be unique so I can link to the oracle tables containing the non-graphical
attributes.

Googling for ogr and mslink reveals that in some cases there are several
MSLINK values per feature? Maybe this is the case in my example as well?

Here is the command I use:
ogr2ogr -nlt POINT -skipfailures -f "ESRI Shapefile" kandelaber elewp.dgn

Are there any other tools to display my dgn files so I can make sure the
MSLink values are ok?

Thank you if you have any hints or experience regarding dgn conversion.

Andreas

-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From hobu.inc at gmail.com  Wed Apr  9 12:13:36 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Apr  9 12:16:10 2008
Subject: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins
In-Reply-To: <94C0F903807262438796839A98A9BA50021066BE@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA50021066BE@beja001.edia.pt>
Message-ID: <75C89ECF-A59F-4B17-AADC-FA79FADEA7DB@gmail.com>


On Apr 8, 2008, at 10:14 AM, Duarte Carreira wrote:
> Hello.
>
> I'm trying to use FWTools 2.1.0 with OCI and SDE plugins and get  
> errors related to wrong versions conflicts. OGR says gdal14.dll is  
> not found, and GDAL complains about SDE driver being compiled  
> against GDAL 1.5 and current version is 1.6.
>
> Are new plugins expected soon? And is there a workaround?
>
> Thanks everyone for your help.
>

Duarte,

Our stable windows release located at http://download.osgeo.org/gdal/win32/1.5/ 
  provides a full complement of current plugins for ArcSDE and OCI  
(along with some others like MrSID and ECW).  I have found it quite  
taxing to keep up building plugins for both FWTools and our stable  
releases, and with the new OSGeo4W effort, I have focused my effort on  
these because they should work in OSGeo4W as well.

If you need to track GDAL trunk for a bug fix or new feature, I'm  
afraid you'll have to invest some effort in building your own plugins  
(or linking in what you need directly for even easier usage).

Howard
From glynn at gclements.plus.com  Wed Apr  9 12:52:14 2008
From: glynn at gclements.plus.com (Glynn Clements)
Date: Wed Apr  9 12:52:16 2008
Subject: [gdal-dev] Re: [GRASS-dev] Updated OGR/SHAPELIB based DBF driver
	crashing with GRASS SVN
In-Reply-To: <86782b610804090323n7e89eb43w90cf20112b79459b@mail.gmail.com>
References: <86782b610804090323n7e89eb43w90cf20112b79459b@mail.gmail.com>
Message-ID: <18428.62526.913142.579039@cerise.gclements.plus.com>


Markus Neteler wrote:

> after syncing (as regularly) the DBF driver from SHAPELIB embedded
> in OGR, we face the problem that it no longer works with older GDAL
> versions than current SVN:
> 
> http://trac.osgeo.org/grass/ticket/110
> 
> I don't know what to do. In essence, I don't want to fork our version
> from yours.
> 
> Any ideas?

I suggest using a "stub" implementation of the I/O hooks. E.g.:

typedef struct {
    FILE*     (*FOpen) ( const char *filename, const char *path);
    size_t    (*FRead) ( void *p, size_t size, size_t nmemb, FILE* file);
    size_t    (*FWrite)( void *p, size_t size, size_t nmemb, FILE* file);
    long      (*FSeek) ( FILE* file, long offset, int whence );
    long      (*FTell) ( FILE* file );
    int       (*FFlush)( FILE* file );
    int       (*FClose)( FILE* file );
    void      (*Error) ( const char *message );
} SAHooks;

static void error_fn( const char *message )
{
    G_fatal_error("%s", message);
}

static void SASetupDefaultHooks( SAHooks *psHooks )
{
    psHooks->FOpen  = fopen;
    psHooks->FRead  = fread;
    psHooks->FWrite = fwrite;
    psHooks->FSeek  = fseek;
    psHooks->FTell  = ftell;
    psHooks->FFlush = fflush;
    psHooks->FClose = fclose;
    psHooks->Error  = error_fn;
}

-- 
Glynn Clements <glynn@gclements.plus.com>
From warmerdam at pobox.com  Wed Apr  9 13:01:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  9 13:02:27 2008
Subject: [gdal-dev] Re: [GRASS-dev] Updated OGR/SHAPELIB based DBF driver
 crashing with GRASS SVN
In-Reply-To: <18428.62526.913142.579039@cerise.gclements.plus.com>
References: <86782b610804090323n7e89eb43w90cf20112b79459b@mail.gmail.com>
	<18428.62526.913142.579039@cerise.gclements.plus.com>
Message-ID: <47FCF678.1070500@pobox.com>

Glynn Clements wrote:
> Markus Neteler wrote:
> 
>> after syncing (as regularly) the DBF driver from SHAPELIB embedded
>> in OGR, we face the problem that it no longer works with older GDAL
>> versions than current SVN:
>>
>> http://trac.osgeo.org/grass/ticket/110
>>
>> I don't know what to do. In essence, I don't want to fork our version
>> from yours.
>>
>> Any ideas?
> 
> I suggest using a "stub" implementation of the I/O hooks. E.g.:
> 
> typedef struct {
>     FILE*     (*FOpen) ( const char *filename, const char *path);
>     size_t    (*FRead) ( void *p, size_t size, size_t nmemb, FILE* file);
>     size_t    (*FWrite)( void *p, size_t size, size_t nmemb, FILE* file);
>     long      (*FSeek) ( FILE* file, long offset, int whence );
>     long      (*FTell) ( FILE* file );
>     int       (*FFlush)( FILE* file );
>     int       (*FClose)( FILE* file );
>     void      (*Error) ( const char *message );
> } SAHooks;
> 
> static void error_fn( const char *message )
> {
>     G_fatal_error("%s", message);
> }
> 
> static void SASetupDefaultHooks( SAHooks *psHooks )
> {
>     psHooks->FOpen  = fopen;
>     psHooks->FRead  = fread;
>     psHooks->FWrite = fwrite;
>     psHooks->FSeek  = fseek;
>     psHooks->FTell  = ftell;
>     psHooks->FFlush = fflush;
>     psHooks->FClose = fclose;
>     psHooks->Error  = error_fn;
> }
>

Folks,

I'm just trying to catch up on this topic.  There is already a stdio
based implementation in shapelib itself.  I have attached it,and it is
normally in a file called safileio.c.

I'm afraid I'm uncertain of the implications of mixing the Shapelib 1.3
code with GDAL's using Shapelib 1.2.  It seems potentially like it could
be a problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
A non-text attachment was scrubbed...
Name: safileio.c
Type: text/x-csrc
Size: 9678 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080409/f91cd506/safileio.bin
From neteler at osgeo.org  Wed Apr  9 15:34:44 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Apr  9 15:41:32 2008
Subject: [gdal-dev] Re: [GRASS-dev] Updated OGR/SHAPELIB based DBF driver
	crashing with GRASS SVN
In-Reply-To: <47FCF678.1070500@pobox.com>
References: <86782b610804090323n7e89eb43w90cf20112b79459b@mail.gmail.com>
	<18428.62526.913142.579039@cerise.gclements.plus.com>
	<47FCF678.1070500@pobox.com>
Message-ID: <86782b610804091234s5826190ew1c053e2fff3753b3@mail.gmail.com>

Frank,

On Wed, Apr 9, 2008 at 7:01 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
...
>  I'm afraid I'm uncertain of the implications of mixing the Shapelib 1.3
>  code with GDAL's using Shapelib 1.2.  It seems potentially like it could
>  be a problem.

This is unclear to me since I took the code from GDAL itself.

Markus
From warmerdam at pobox.com  Wed Apr  9 15:55:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  9 15:56:17 2008
Subject: [gdal-dev] SoC: Application Review
Message-ID: <47FD1F4A.2010202@pobox.com>

Potential GDAL Mentors,

It looks like we have three project applications for GDAL/OGR:

     * SoCTMSDriver: Read/Write driver for TMS tiles
           o Student: V?clav Klus?k

     * SoCGDAL2Tiles: GDAL2Tiles Improvements
           o Student: Klokan Petr Pr(idal

     * (app@google): Openstreetmap OGR Driver
           o Student: Olga Mardar

I am aware of the following folks willing to mentor:

  FrankW, HowardB, MateuszL, DanielM, TamasS

This information is summarized at:
   http://trac.osgeo.org/gdal/wiki/SoCProjects

We will need to get together soon to prioritize the project applications
and decide who wants to mentor what.  I'd also appreciate anyone missing
form the mentor list to add themselves (and let me know), and if anyone
sees other applications suitable for GDAL to let me know.  I only skimmed
the projects that were not apparently GDAL related.

I see we till April 22nd to work this out, so no big rush.  Perhaps we could
have an irc meeting on the morning of Friday April 18th to work it out, and
then pass a formal motion by email.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mateusz at loskot.net  Wed Apr  9 16:12:00 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 16:12:13 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD1F4A.2010202@pobox.com>
References: <47FD1F4A.2010202@pobox.com>
Message-ID: <47FD2310.60101@loskot.net>

Frank Warmerdam wrote:
> 
> I see we till April 22nd to work this out, so no big rush.  Perhaps
> we could have an irc meeting on the morning of Friday April 18th to
> work it out, and then pass a formal motion by email.

The meeting on Friday works for me.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From szekerest at gmail.com  Wed Apr  9 17:37:56 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Apr  9 17:37:58 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD1F4A.2010202@pobox.com>
References: <47FD1F4A.2010202@pobox.com>
Message-ID: <f3b73b7d0804091437g7700749ayc353757c54b64b28@mail.gmail.com>

Frank,

I think we have no compelling reason to wait until 18th in this topic.


Best regards,

Tamas


2008/4/9, Frank Warmerdam <warmerdam@pobox.com>:
> Potential GDAL Mentors,
>
>  It looks like we have three project applications for GDAL/OGR:
>
>     * SoCTMSDriver: Read/Write driver for TMS tiles
>           o Student: V?clav Klus?k
>
>     * SoCGDAL2Tiles: GDAL2Tiles Improvements
>           o Student: Klokan Petr Pr(idal
>
>     * (app@google): Openstreetmap OGR Driver
>           o Student: Olga Mardar
>
>  I am aware of the following folks willing to mentor:
>
>   FrankW, HowardB, MateuszL, DanielM, TamasS
>
>  This information is summarized at:
>   http://trac.osgeo.org/gdal/wiki/SoCProjects
>
>  We will need to get together soon to prioritize the project applications
>  and decide who wants to mentor what.  I'd also appreciate anyone missing
>  form the mentor list to add themselves (and let me know), and if anyone
>  sees other applications suitable for GDAL to let me know.  I only skimmed
>  the projects that were not apparently GDAL related.
>
>  I see we till April 22nd to work this out, so no big rush.  Perhaps we
> could
>  have an irc meeting on the morning of Friday April 18th to work it out, and
>  then pass a formal motion by email.
>
>  Best regards,
>  --
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From nikos.alexandris at felis.uni-freiburg.de  Wed Apr  9 17:52:47 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Apr  9 17:52:49 2008
Subject: [gdal-dev] Is there a (secret) fwtools-python tutorial for
	beginners?
Message-ID: <1207777967.15632.0.camel@vertical>

Thank you,

Nikos

From nikos.alexandris at felis.uni-freiburg.de  Wed Apr  9 18:10:51 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Apr  9 18:10:53 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
Message-ID: <1207779051.16614.5.camel@vertical>

As far as I can understand while scanning the gdal-dev list messages,
there is no access to the 2nd (or 3rd) layer of gridded MODIS data (L2G)
using GDAL, is that correct?

Is there an alternative to the "read_l2g" LDOPE utility?

How can I select for instance observations from the same orbit for a
MOD09 product?

Thank you in advance,

Nikos

From matt.wilkie at gov.yk.ca  Wed Apr  9 18:17:34 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Apr  9 18:17:42 2008
Subject: [gdal-dev] off-topic: recommend canadian ftp host?
Message-ID: <47FD407E.5030805@gov.yk.ca>

Hello World,

I'm looking for a Canadian based ftp-hosting service. Any recommendations?

I need to be able to create/delete private ftp accounts at will as well 
as support anonymous access (for downloads). Initial size will be a ~5gb 
but I imagine that will grow at a rate of ~1gb per yr (wild guess).

Reliability and speed is more important that price, though of course 
dollars are significant.

thanks,

-matt

(please reply off list to keep the noise down. If there is interest I'll 
summarise the results)


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From warmerdam at pobox.com  Wed Apr  9 18:23:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  9 18:23:37 2008
Subject: [gdal-dev] Is there a (secret) fwtools-python tutorial for
	beginners?
In-Reply-To: <1207777967.15632.0.camel@vertical>
References: <1207777967.15632.0.camel@vertical>
Message-ID: <47FD41D1.4020802@pobox.com>

Nikos Alexandris wrote:
> Thank you,
> 

Nikos,

There is this for OpenEV:

   http://openev.sourceforge.net/app/developer_info/DEVCOURSE.html

There is this for GDAL (includes Python examples):

   http://www.gdal.org/gdal_tutorial.html

Unfortunately the OGR API Tutorial does not include Python examples.

There is also some gdal/ogr information in the wiki at:

   http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Apr  9 18:27:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  9 18:28:24 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
In-Reply-To: <1207779051.16614.5.camel@vertical>
References: <1207779051.16614.5.camel@vertical>
Message-ID: <47FD42CC.5090503@pobox.com>

Nikos Alexandris wrote:
> As far as I can understand while scanning the gdal-dev list messages,
> there is no access to the 2nd (or 3rd) layer of gridded MODIS data (L2G)
> using GDAL, is that correct?
> 
> Is there an alternative to the "read_l2g" LDOPE utility?
> 
> How can I select for instance observations from the same orbit for a
> MOD09 product?

Nikos,

I think you might need to explain further what you mean by 2nd and
3rd layers.  None of your terminology is familiar to me.  Most gridded
(2D) products in an HDF formatted file should be accessable through GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From halset at pvv.ntnu.no  Wed Apr  9 17:58:25 2008
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Apr  9 18:29:34 2008
Subject: [gdal-dev] s-57 and srs
Message-ID: <BDCCECE4-AB86-480D-B1CE-174CF3DAB55C@pvv.ntnu.no>

Hello.

I am importing some s-57 data into postgis, but do not know how to  
include the srs.

ogr2ogr -f PostgreSQL PG:"user=myuser dbname=mydb password=mypass" - 
a_srs "EPSG:4326" -s_srs "EPSG:4326" MYCELL.000 DEPARE

The import works well, but the inserted geometries does not have any  
srs. What am I doing wrong? This is with postgresql-8.3.1 and  
postgis-1.3.2. PostGIS is compiled with geos and proj.

Regards,
  - Tore.
From nikos.alexandris at felis.uni-freiburg.de  Wed Apr  9 18:35:17 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Apr  9 18:35:21 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
In-Reply-To: <47FD42CC.5090503@pobox.com>
References: <1207779051.16614.5.camel@vertical> <47FD42CC.5090503@pobox.com>
Message-ID: <1207780517.16614.14.camel@vertical>


On Wed, 2008-04-09 at 18:27 -0400, Frank Warmerdam wrote:
> Nikos Alexandris wrote:
> > As far as I can understand while scanning the gdal-dev list messages,
> > there is no access to the 2nd (or 3rd) layer of gridded MODIS data (L2G)
> > using GDAL, is that correct?
> > 
> > Is there an alternative to the "read_l2g" LDOPE utility?
> > 
> > How can I select for instance observations from the same orbit for a
> > MOD09 product?
> 
> Nikos,
> 
> I think you might need to explain further what you mean by 2nd and
> 3rd layers.  None of your terminology is familiar to me.  Most gridded
> (2D) products in an HDF formatted file should be accessable through GDAL.
> 
> Best regards,

MOD09 L2G products store more than one observations in each grid cell.
With OpenEV for instance I see all bands and the Data Quality Layers. I
export with gdalwarp for example (extract/convert/reproject) in
GeoTiff(s) all bands and quality flag layers.

But the pixel values that I see (after importing in GRASS) are the best
observations based on some criteria (observation coverage and other).
How can I "see" the other observations?

(I think I am correct. In a L2G are all swath pixels that correspond to
a grid cell.)

Thank you.

From nikos.alexandris at felis.uni-freiburg.de  Wed Apr  9 18:44:14 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Apr  9 18:44:17 2008
Subject: [gdal-dev] Is there a (secret) fwtools-python tutorial for
	beginners?
In-Reply-To: <47FD41D1.4020802@pobox.com>
References: <1207777967.15632.0.camel@vertical> <47FD41D1.4020802@pobox.com>
Message-ID: <1207781054.16614.23.camel@vertical>


On Wed, 2008-04-09 at 18:23 -0400, Frank Warmerdam wrote:
> Nikos Alexandris wrote:
> > Thank you,
> > 
> 
> Nikos,
> 
> There is this for OpenEV:
> 
>    http://openev.sourceforge.net/app/developer_info/DEVCOURSE.html
> 
> There is this for GDAL (includes Python examples):
> 
>    http://www.gdal.org/gdal_tutorial.html
> 
> Unfortunately the OGR API Tutorial does not include Python examples.
> 
> There is also some gdal/ogr information in the wiki at:
> 
>    http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
> 
> Best regards,

GDAL/OGR newbies unite!

This guides are what I was hoping to find!

I have to do my homework... ;-)

Thanks Frank.

From matt.wilkie at gov.yk.ca  Wed Apr  9 19:09:37 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Apr  9 19:09:45 2008
Subject: [gdal-dev] demtools patch.
In-Reply-To: <38130.212.93.154.48.1206726372.squirrel@email.rdsor.ro>
References: <38130.212.93.154.48.1206726372.squirrel@email.rdsor.ro>
Message-ID: <47FD4CB1.2050103@gov.yk.ca>

Hi rezso,

 >   Matt, I recall over demtools a bit, ... talking with gdal Folks
 > to see that there is a way to make demtools part of gdal.

I didn't see any chatter go by after your message. The best thing to do 
so that your contribution isn't lost in the shuffle is to create a 
feature proposal ticket at http://trac.osgeo.org/gdal/ to include demtools

I see from a comment to http://www.perrygeo.net/wordpress/?p=7 that MS4W 
is including demtools by default now, so it probably is a good idea to 
put this in with the rest of the utilities.

cheers,

(another) matt

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


rezso@rdsor.ro wrote:
> Hello Matt, Folks,
> 
> 
>   Matt, I recall over demtools a bit, i mailed you few weeks ago
> with license issue and thanks for that, and talking with gdal Folks
> to see that there is a way to make demtools part of gdal.
> 
>   This would imply license change in favor of gdal and small
> re-work over the code, so you can further comment here.
> 
>   For preliminary i would like to offer a small patch wich get
> demtools closer to gdal.
> 
> patch does:
> 
>   - fix gcc43 complie issue and warnings (olso do VC2008)
>   - get rid of stingtoken.h and use gdal internals for this
>   - add progressbar as gdal tools does using gdal API
>   - use more gdal internals for for some fopen/fclose handling
> 
>  Patch attached, plus a smal example.sh script for better see
> what this tool can do. It uses ImageMagick to merge two tiles
> and listgeo to restore spatial data.
> 
>  Let me know how can i further polish to be more gdal compliant, if Matt
> accept the proposal.
> 
>   For those who don't know anything about subject i re-post the link:
>   http://perrygeo.googlecode.com/svn/trunk/demtools/
>   http://www.perrygeo.net/wordpress/?p=7
> 
> Best Regards,
> Cristian.
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Wed Apr  9 19:46:13 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 19:46:21 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD1F4A.2010202@pobox.com>
References: <47FD1F4A.2010202@pobox.com>
Message-ID: <47FD5545.7020503@loskot.net>

Frank Warmerdam wrote:
> 
> * (app@google): Openstreetmap OGR Driver o Student: Olga Mardar
> 

If there isn't any other mentor who is well experienced with OSM and who
would like to mentor Olga's project, then I'm willing to do it.

I'm not OSM guru at all. I've just read their specifications and
documents on the OSM Wiki while considering to implement such driver
myself, but I believe I can offer enough experience with OGR and leave
hacking the OSM part to Olga :-)

p.s. Olga, are you monitoring this list?

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From JohnB.Visser at ga-asi.com  Wed Apr  9 20:00:31 2008
From: JohnB.Visser at ga-asi.com (Visser, John B.)
Date: Wed Apr  9 20:00:35 2008
Subject: [gdal-dev] Getting CGM from NITF file 
Message-ID: <5209E3CBD360A5439026631196FC9756018B01EA@RSG-EVS1.rsg.ga-asi.com>

I apologize if there's an online resource that already answers my
question.

I have a NITF file with several annotations saved into it.  I've
discovered how to get at them by accessing the "CGM" metadata, but
things don't look quite right.  What are all the escaped zeroes in
there?  Is there some way to convert them back to their native byte
representation or access them directly that way?

Best,
jv
From mateusz at loskot.net  Wed Apr  9 20:14:52 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 20:14:58 2008
Subject: [gdal-dev] Multiple layers in OGRDataSource
In-Reply-To: <4cbd7b750804071251u75e2aa77v1763bd58967b07ef@mail.gmail.com>
References: <4cbd7b750804071251u75e2aa77v1763bd58967b07ef@mail.gmail.com>
Message-ID: <47FD5BFC.4030200@loskot.net>

Olivier Tournaire wrote:
> I read the OGR documentation OGR API Tutorial, and I found this sentence :
> 
> " An OGRDataSource <http://www.gdal.org/ogr/classOGRDataSource.html> can
> potentially have many layers associated with it"
> 
> However, I cannot find the way to add multiple layers in one instance of
> OGRDataSource.

There are two situations possible:

1. Open multi-layer datasource, ie. a directory with number of 
shapefiles. After you instantiate OGRDataSource object and open the 
directory, you will have access to N number of layers.

2. Create new layer what means that new shapefile or new PostGIS table 
is physically created, see:

http://gdal.org/ogr/classOGRDataSource.html#39cfc6e0ee790506d7638b0dce03c7da

There is no way to add a layer to OGRDataSource object in term of 
attaching it to the datasource, like:

OGRDataSource* ds = ...
ds->GetLayerCount()  // let's say 5 is returned

OGRLayer* someLayer = ...
ds->AddLayer(someLayer)

ds->GetLayerCount()  // 6 is returned



> What I would like to do is to read a set of shapefiles,
> create a layer for each of them and store them in an OGRDataSource object.

You do not need to open/read every shapefile separately.
In order to read a set of shapefiles as a set of layers, just open the 
directory consisting of those shapefiles all of them will be accessible
through the OGRDataSource object, automagicallly.

> Note I also want to be able to create an OGRDataSource object and add layers
> (from shapefiles) in a second time. Could you please give me the way to do
> such a task ?

You can't, see above.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From crschmidt at metacarta.com  Wed Apr  9 20:45:44 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Wed Apr  9 20:45:47 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD5545.7020503@loskot.net>
References: <47FD1F4A.2010202@pobox.com> <47FD5545.7020503@loskot.net>
Message-ID: <20080410004544.GB2510@metacarta.com>

On Thu, Apr 10, 2008 at 01:46:13AM +0200, Mateusz Loskot wrote:
> Frank Warmerdam wrote:
> >
> >* (app@google): Openstreetmap OGR Driver o Student: Olga Mardar
> >
> 
> If there isn't any other mentor who is well experienced with OSM and who
> would like to mentor Olga's project, then I'm willing to do it.
> 
> I'm not OSM guru at all. I've just read their specifications and
> documents on the OSM Wiki while considering to implement such driver
> myself, but I believe I can offer enough experience with OGR and leave
> hacking the OSM part to Olga :-)

I will gladly help support Mateusz with the OpenStreetMap portions of
this task...

Regards,
-- 
Christopher Schmidt
MetaCarta
From warmerdam at pobox.com  Wed Apr  9 22:04:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  9 22:04:33 2008
Subject: [gdal-dev] Getting CGM from NITF file
In-Reply-To: <5209E3CBD360A5439026631196FC9756018B01EA@RSG-EVS1.rsg.ga-asi.com>
References: <5209E3CBD360A5439026631196FC9756018B01EA@RSG-EVS1.rsg.ga-asi.com>
Message-ID: <47FD759D.3040901@pobox.com>

Visser, John B. wrote:
> I apologize if there's an online resource that already answers my
> question.
> 
> I have a NITF file with several annotations saved into it.  I've
> discovered how to get at them by accessing the "CGM" metadata, but
> things don't look quite right.  What are all the escaped zeroes in
> there?  Is there some way to convert them back to their native byte
> representation or access them directly that way?

JV,

The raw data is escaped using CPLEscapeString(), and can be converted
back to the original form using CPLUnescapeString().

   http://www.gdal.org/cpl__string_8h.html#74938e1e92b5847af925600af609f8d3

Also page up to CPLEscapeString() for additional details.

I doubt the escape/unescape functions are exposed through swig, but they
are readily available in c/c++.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From pssmaniam at hotmail.com  Thu Apr 10 02:11:25 2008
From: pssmaniam at hotmail.com (Sundaram Subramaniam)
Date: Thu Apr 10 02:12:28 2008
Subject: [gdal-dev] mutiple data sets usage with GDAL OPen
Message-ID: <BAY144-W142C92C7856C2256A5B1C2B8EC0@phx.gbl>


Hi all,
 I have use multiple data files in remote sensing Data analysis for muti-temporal data sets & for Auxillary data sets like DEM. Can any one help me how open mutiple data file using GDAL Open() function ot its equivalent in GDAL 
With warm regards
S.Subramaniam 
Scientist ,Land Resources Group,
 RS&GIS_Applications Area, National Remote Sensing Agency 
Hyderabad - 500 037 INDIA
_________________________________________________________________
Video: Get a glimpse of the latest in Cricket, Bollywood, News and Fashion. Only on MSN videos.
http://video.msn.com/?mkt=en-in
From mateusz at loskot.net  Thu Apr 10 03:02:04 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr 10 03:02:11 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <20080410004544.GB2510@metacarta.com>
References: <47FD1F4A.2010202@pobox.com> <47FD5545.7020503@loskot.net>
	<20080410004544.GB2510@metacarta.com>
Message-ID: <47FDBB6C.1080507@loskot.net>

Christopher Schmidt wrote:
> On Thu, Apr 10, 2008 at 01:46:13AM +0200, Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> * (app@google): Openstreetmap OGR Driver o Student: Olga Mardar
>>>
>> If there isn't any other mentor who is well experienced with OSM and who
>> would like to mentor Olga's project, then I'm willing to do it.
>>
>> I'm not OSM guru at all. I've just read their specifications and
>> documents on the OSM Wiki while considering to implement such driver
>> myself, but I believe I can offer enough experience with OGR and leave
>> hacking the OSM part to Olga :-)
> 
> I will gladly help support Mateusz with the OpenStreetMap portions of
> this task...

Great! I've been silently counting on you Chris ;-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From szekerest at gmail.com  Thu Apr 10 04:25:18 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 10 04:25:22 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD1F4A.2010202@pobox.com>
References: <47FD1F4A.2010202@pobox.com>
Message-ID: <f3b73b7d0804100125w2f6dabal27d3ece45b879eee@mail.gmail.com>

>
>     * SoCTMSDriver: Read/Write driver for TMS tiles
>           o Student: V?clav Klus?k
>

I've expressed my interest in mentoring the TMS driver.

Best regards,

Tamas
From DCarreira at edia.pt  Wed Apr  9 13:16:36 2008
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu Apr 10 04:53:00 2008
Subject: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins
Message-ID: <94C0F903807262438796839A98A9BA5002106955@beja001.edia.pt>

Howard,

What is the simplest way you know of to have FWTools work with these
plugins? I'm afraid I didn't quite understand your suggestion at the end
of your message. Should I start using gdal releases instead of fwtools
if I need oci and sde?

Thanks,
Duarte 

-----Mensagem original-----
De: Howard Butler [mailto:hobu.inc@gmail.com] 
Enviada: quarta-feira, 9 de Abril de 2008 17:14
Para: Duarte Carreira
Cc: gdal-dev@lists.osgeo.org
Assunto: Re: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins


On Apr 8, 2008, at 10:14 AM, Duarte Carreira wrote:
> Hello.
>
> I'm trying to use FWTools 2.1.0 with OCI and SDE plugins and get 
> errors related to wrong versions conflicts. OGR says gdal14.dll is not

> found, and GDAL complains about SDE driver being compiled against GDAL

> 1.5 and current version is 1.6.
>
> Are new plugins expected soon? And is there a workaround?
>
> Thanks everyone for your help.
>

Duarte,

Our stable windows release located at
http://download.osgeo.org/gdal/win32/1.5/
  provides a full complement of current plugins for ArcSDE and OCI
(along with some others like MrSID and ECW).  I have found it quite
taxing to keep up building plugins for both FWTools and our stable
releases, and with the new OSGeo4W effort, I have focused my effort on
these because they should work in OSGeo4W as well.

If you need to track GDAL trunk for a bug fix or new feature, I'm afraid
you'll have to invest some effort in building your own plugins (or
linking in what you need directly for even easier usage).

Howard
From hobu.inc at gmail.com  Thu Apr 10 12:49:52 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Apr 10 12:52:29 2008
Subject: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins
In-Reply-To: <94C0F903807262438796839A98A9BA5002106955@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA5002106955@beja001.edia.pt>
Message-ID: <65561807-F2A4-402A-9D66-DB2866F0E41B@gmail.com>

Yes, if you need OCI and SDE plugins, the only binaries I am going to  
support going forward with builds are the official release binaries.   
These plugins are not compatible with FWTools except by accident,  
because FWTools tracks the trunk version of GDAL and is changing all  
of the time.  This is also the reason why it is so laborious to  
continually make new plugin builds -- plugins are sensitive to the  
kinds of changes we allow (and expect) to happen in trunk.

Howard


On Apr 9, 2008, at 12:16 PM, Duarte Carreira wrote:
> Howard,
>
> What is the simplest way you know of to have FWTools work with these
> plugins? I'm afraid I didn't quite understand your suggestion at the  
> end
> of your message. Should I start using gdal releases instead of fwtools
> if I need oci and sde?
>
> Thanks,
> Duarte
>
> -----Mensagem original-----
> De: Howard Butler [mailto:hobu.inc@gmail.com]
> Enviada: quarta-feira, 9 de Abril de 2008 17:14
> Para: Duarte Carreira
> Cc: gdal-dev@lists.osgeo.org
> Assunto: Re: [gdal-dev] fwtools 2.1.0, gdal1.6 and oci, sde plugins
>
>
> On Apr 8, 2008, at 10:14 AM, Duarte Carreira wrote:
>> Hello.
>>
>> I'm trying to use FWTools 2.1.0 with OCI and SDE plugins and get
>> errors related to wrong versions conflicts. OGR says gdal14.dll is  
>> not
>
>> found, and GDAL complains about SDE driver being compiled against  
>> GDAL
>
>> 1.5 and current version is 1.6.
>>
>> Are new plugins expected soon? And is there a workaround?
>>
>> Thanks everyone for your help.
>>
>
> Duarte,
>
> Our stable windows release located at
> http://download.osgeo.org/gdal/win32/1.5/
>  provides a full complement of current plugins for ArcSDE and OCI
> (along with some others like MrSID and ECW).  I have found it quite
> taxing to keep up building plugins for both FWTools and our stable
> releases, and with the new OSGeo4W effort, I have focused my effort on
> these because they should work in OSGeo4W as well.
>
> If you need to track GDAL trunk for a bug fix or new feature, I'm  
> afraid
> you'll have to invest some effort in building your own plugins (or
> linking in what you need directly for even easier usage).
>
> Howard

From mattia.parigiani at gmail.com  Thu Apr 10 13:00:54 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Thu Apr 10 13:00:57 2008
Subject: [gdal-dev] Copying GeoTIFF metadata header information from one
	TIFF to another
Message-ID: <6b6f1c810804101000s49b4743j5ca6d83c39b44292@mail.gmail.com>

Hi folks,

I have some Geotiff files that I process using GDAL, FWTOOLs generally
speaking and other libraries like IPW and ImageMagick...

I need to know if there is a way in GDAL to extract/dump all TIFF header
data relating image metadata and copy it into the header of another GEOTIFF
(or Tiff image) overwriting the contents of this lastly mentioned file..

It would be great to have any suggestions regarding how I could do this if
not possible in GDAL

Thanks in advance

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080410/19d6d568/attachment.html
From nhv at cape.com  Thu Apr 10 13:05:38 2008
From: nhv at cape.com (Norman Vine)
Date: Thu Apr 10 13:12:25 2008
Subject: [gdal-dev] Copying GeoTIFF metadata header information from
	oneTIFF to another
In-Reply-To: <6b6f1c810804101000s49b4743j5ca6d83c39b44292@mail.gmail.com>
Message-ID: <20080410170302.8E3AC30E7E6@mrelay1.cape.com>

Mattia writes:
> 
> I have some Geotiff files that I process using GDAL, FWTOOLs 
> generally speaking and other libraries like IPW and ImageMagick...
> 
> I need to know if there is a way in GDAL to extract/dump all 
> TIFF header data relating image metadata and copy it into the 
> header of another GEOTIFF (or Tiff image) overwriting the 
> contents of this lastly mentioned file..
> 
> It would be great to have any suggestions regarding how I 
> could do this if not possible in GDAL

http://www.remotesensing.org/geotiff/geotifcp.html
http://www.remotesensing.org/geotiff/listgeo.html

Norman

From dickeya at gmail.com  Thu Apr 10 13:18:12 2008
From: dickeya at gmail.com (Jamie Adams)
Date: Thu Apr 10 13:18:15 2008
Subject: [gdal-dev] Copying GeoTIFF metadata header information from
	oneTIFF to another
In-Reply-To: <20080410170302.8E3AC30E7E6@mrelay1.cape.com>
References: <6b6f1c810804101000s49b4743j5ca6d83c39b44292@mail.gmail.com>
	<20080410170302.8E3AC30E7E6@mrelay1.cape.com>
Message-ID: <f4339510804101018s60d2af40wba15b4943a02996d@mail.gmail.com>

Or if you like Python:

https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/gdalcopyproj.py

On Thu, Apr 10, 2008 at 10:05 AM, Norman Vine <nhv@cape.com> wrote:

> Mattia writes:
> >
> > I have some Geotiff files that I process using GDAL, FWTOOLs
> > generally speaking and other libraries like IPW and ImageMagick...
> >
> > I need to know if there is a way in GDAL to extract/dump all
> > TIFF header data relating image metadata and copy it into the
> > header of another GEOTIFF (or Tiff image) overwriting the
> > contents of this lastly mentioned file..
> >
> > It would be great to have any suggestions regarding how I
> > could do this if not possible in GDAL
>
> http://www.remotesensing.org/geotiff/geotifcp.html
> http://www.remotesensing.org/geotiff/listgeo.html
>
> Norman
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080410/c2f7faef/attachment.html
From josegomez at gmx.net  Fri Apr 11 06:24:36 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Apr 11 06:24:39 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
In-Reply-To: <1207779051.16614.5.camel@vertical>
References: <1207779051.16614.5.camel@vertical>
Message-ID: <20080411102436.305760@gmx.net>

Hi,

> As far as I can understand while scanning the gdal-dev list messages,
> there is no access to the 2nd (or 3rd) layer of gridded MODIS data (L2G)
> using GDAL, is that correct?
> 
> Is there an alternative to the "read_l2g" LDOPE utility?

I think this is correct. The other observations (which may add up to a lot for high latitudes) are not in a gridded format, so you need to use something like PyHDF to read them and convert them to grids. It's fairly easy to do, but dealing with the angular pointers (1km data) is messier. 

read_l2g might actually be the easiest way!

Jose
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser
From even.rouault at mines-paris.org  Fri Apr 11 10:12:56 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 11 10:13:00 2008
Subject: [gdal-dev] build error on latest svn trunk
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1CC@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F036CF1CC@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <200804111612.56490.even.rouault@mines-paris.org>

Tom,

In fact, your install was probably OK at the beginning. I finally discovered 
that the PQescapeStringConn was an API added to the PostgreSQL client library 
in version 8.1.4 as a security release. This was backported to 8.0.8, 7.4.13 
and 7.3.15. So, that explains why I saw this call in all those older releases 
when downloading them and believed that it had existed for a long time...
Current GDAL trunk has now a configure test that looks for the presence of 
PQescapeStringConn and use it if available, or fallback to PQescapeString 
otherwise.
So, despite the annoyance, now you have a safer PostgreSQL release 
installed ;-)

Thanks for the testing and reporting !

Even

Le Monday 07 April 2008 14:28:46 Kralidis,Tom [Burlington], vous avez ?crit?:
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
> > Kralidis,Tom [Burlington]
> > Sent: 04 April, 2008 12:01 PM
> > To: gdal-dev@lists.osgeo.org
> > Subject: [gdal-dev] build error on latest svn trunk
> >
> >
> > On fc7, with:
> >
> > ./configure --with-png --with-libtiff=internal
> > --with-geotiff=internal --with-jpeg --with-xerces
> > --with-geos=no --with-pg=/usr/local/pgsql/bin/pg_config
> > --with-mysql=/usr/bin/mysql_config --with-sqlite
> > --with-curl=/usr/bi n/curl-config --with-python --with-expat
> > --with-perl
> >
> > ...
> >
> >
> >
> > ogrpgtablelayer.cpp: In member function 'virtual OGRErr
> > OGRPGTableLayer::DeleteFeature(long int)':
> > ogrpgtablelayer.cpp:706: warning: format '%d' expects type
> > 'int', but argument 4 has type 'long int'
> > ogrpgtablelayer.cpp: In static member function 'static
> > CPLString OGRPGTableLayer::EscapeString(PGconn*, const char*,
> > int, const char*)':
> > ogrpgtablelayer.cpp:839: error: 'PQescapeStringConn' was not
> > declared in this scope
> > make[3]: *** [../o/ogrpgtablelayer.o] Error 1
> > make[3]: Leaving directory
> > `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts/pg'
> > make[2]: *** [pg-target] Error 2
> > make[2]: Leaving directory
> > `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts'
> > make[1]: *** [sublibs] Error 2
> > make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/ogr'
> > make: *** [ogr-target] Error 2
> > _______________________________________________
>
> Turns out there were some inconsistencies between postgresql libraries,
> so I did a clean install, which worked.  Thanks to Even for the help via
> email.
>
> ..Tom
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at pmldnet.com  Fri Apr 11 10:58:39 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Fri Apr 11 10:58:45 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
In-Reply-To: <20080411102436.305760@gmx.net>
References: <1207779051.16614.5.camel@vertical> <20080411102436.305760@gmx.net>
Message-ID: <47FF7C9F.3040206@pmldnet.com>

MODIS Reprojection Tool: 
http://lpdaac.usgs.gov/landdaac/tools/modis/index.asp

Supports MODIS Level-2G: 
http://lpdaac.usgs.gov/landdaac/tools/modis/about.asp


Jose Luis Gomez Dans wrote:
> Hi,
> 
>> As far as I can understand while scanning the gdal-dev list messages,
>> there is no access to the 2nd (or 3rd) layer of gridded MODIS data (L2G)
>> using GDAL, is that correct?
>>
>> Is there an alternative to the "read_l2g" LDOPE utility?
> 
> I think this is correct. The other observations (which may add up to a lot for high latitudes) are not in a gridded format, so you need to use something like PyHDF to read them and convert them to grids. It's fairly easy to do, but dealing with the angular pointers (1km data) is messier. 
> 
> read_l2g might actually be the easiest way!
> 
> Jose
From warmerdam at pobox.com  Fri Apr 11 15:07:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 11 15:07:28 2008
Subject: [gdal-dev] Re: Motion to adopt RFC 22:
In-Reply-To: <47F27AC2.2030502@pobox.com>
References: <47F27AC2.2030502@pobox.com>
Message-ID: <47FFB6D6.5010501@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> Motion: To adopt RFC 22: RPC Georeferencing.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc22_rpc
> 
> Best regards,

Folks,

I see I neglected to follow up on this vote.  I declare the motion
passed, and RFC 22: RPC Georeferencing adopted.  The voting was:

   +1: HowardB, EvenR, TamasS, FrankW
   +0: DanielM

I'm going to go ahead and commit the swig bindings, but I think there is
still lack of consensus on them, so I'm open to some adjustments in how
they are setup as long as it is done before 1.6 release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Sun Apr 13 16:26:34 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 13 16:26:40 2008
Subject: [gdal-dev] GDAL code coverage
Message-ID: <200804132226.35749.even.rouault@mines-paris.org>

Hi,

I experimented a bit gcov on GDAL to see the code coverage of the python 
autotest suite.

The result on my own GDAL tree (roughly latest trunk with some personnal 
changes) is available at : http://home.gdal.org/tmp/coverage.zip.

The output is not as nice as I would have wished as it was tricky to make the 
coverage report generator find the source files.

Here's the procedure I followed to generate the report :

1) Rebuild your GDAL tree with the GCC coverage options :
	CC="gcc --coverage" CXX="g++ --coverage" ./configure 'your_usual_options'
	make clean
	make
2) Run the autotest suite. This will generate .gcda files in the object 
directories of GDAL tree
3)  In $(GDAL_ROOT) : create a 'coverage' subdirectory
4)  In $(GDAL_ROOT) :
		lcov --directory . --capture --output-file ./coverage/gdal.info

	This will fail as lcov doesn't manage to find the source files. I had to add
	various symbolic links. The main steps are :
		cd $(GDAL_ROOT)/ogr/ogrsf_frmts/o
		for i in `find ../../.. -name "*.c*" | grep -v svn`; do ln -s $i; done
		for i in `find ../../.. -name "*.h*" | grep -v svn`; do ln -s $i; done
		ln -s ../geojson/jsonc .
		cd ..
		ln -s ili/iom
		cd $(GDAL_ROOT)/frmts/o
		for i in `find .. -name "*.c*" | grep -v svn`; do ln -s $i; done
		for i in `find .. -name "*.h*" | grep -v svn`; do ln -s $i; done
		ln -s ../pcraster/libcsf .
		ln -s ../gtiff/libtiff .
		ln -s ../gtiff/libgeotiff .
		ln -s ../grib/degrib18 .

Try 'lcov --directory . --capture --output-file ./coverage/gdal.info' and add 
all necessary symbolic links until this finally works

5) In $(GDAL_ROOT) : genhtml -o ./coverage --num-spaces 2 ./coverage/gdal.info

6) Enjoy ./coverage/index.html

If someone knows how to tell lcov how to find the source files where they 
really are instead of creating all those symbolic links that would be great !


Even

From la_cipola at yahoo.de  Tue Apr 15 07:48:32 2008
From: la_cipola at yahoo.de (la cipola)
Date: Tue Apr 15 07:48:34 2008
Subject: [Gdal-dev] special case occurs at reprojection with gdalwarp
Message-ID: <16700106.post@talk.nabble.com>


Hi List!

I am warping images using gdalwarp (lat/lon into mercator projection).

There are two cases

Case 1: source image 257x257 --> result image 257x257 (OK)
Case 2: source image 256x257 --> result image 256x257 (not OK, having a
Black Stripe on the right instead of Imageinformation)

I know, that ratios change in warping process but in Case 2
there is missing some imageinformation in spite of correct
dimensions.

Does anybody know why there is missing Imageinformation in
Case 2??

Thanks!

Mike http://www.nabble.com/file/p16700106/257x257px_correct.jpg 
http://www.nabble.com/file/p16700106/256x257px_incorrect.jpg 
-- 
View this message in context: http://www.nabble.com/special-case-occurs-at-reprojection-with-gdalwarp-tp16700106p16700106.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Tue Apr 15 08:44:00 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 15 08:44:02 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <47FD1F4A.2010202@pobox.com>
References: <47FD1F4A.2010202@pobox.com>
Message-ID: <f3b73b7d0804150544t240f8670s97b1dc607347da74@mail.gmail.com>

2008/4/9, Frank Warmerdam <warmerdam@pobox.com>:
>  We will need to get together soon to prioritize the project applications
>  and decide who wants to mentor what.  I'd also appreciate anyone missing
>  form the mentor list to add themselves (and let me know), and if anyone
>  sees other applications suitable for GDAL to let me know.  I only skimmed
>  the projects that were not apparently GDAL related.
>
>  I see we till April 22nd to work this out, so no big rush.  Perhaps we
> could
>  have an irc meeting on the morning of Friday April 18th to work it out, and
>  then pass a formal motion by email.
>

Frank,

During the gsoc meeting at #osgeo today, I've been asked to speed the
things up in this topic to be able to create the final application
list for all of the osgeo projects in time.
The results per project will be submitted to this page:
http://wiki.osgeo.org/wiki/SoC_Application_Rankings_by_Project_2008

According to http://code.google.com/opensource/gsoc/2008/faqs.html#0.1_timeline
we'll have to make this decision at least one day before April 18th.

I'm aware of only a few volunteers out there to mentor the 3 GDAL
related projects so I don't think if it'll be a difficult task to work
the things out.

Best regards,

Tamas
From mateusz at loskot.net  Tue Apr 15 10:13:58 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 15 10:14:24 2008
Subject: [gdal-dev] SoC: Application Review
In-Reply-To: <f3b73b7d0804150544t240f8670s97b1dc607347da74@mail.gmail.com>
References: <47FD1F4A.2010202@pobox.com>
	<f3b73b7d0804150544t240f8670s97b1dc607347da74@mail.gmail.com>
Message-ID: <56110.89.78.240.123.1208268838.squirrel@loskot.net>

Tamas Szekeres wrote:
> 2008/4/9, Frank Warmerdam <warmerdam@pobox.com>:
>>  We will need to get together soon to prioritize the project
>> applications
>>  and decide who wants to mentor what.  I'd also appreciate anyone
>> missing
>>  form the mentor list to add themselves (and let me know), and if anyone
>>  sees other applications suitable for GDAL to let me know.  I only
>> skimmed
>>  the projects that were not apparently GDAL related.
>>
>>  I see we till April 22nd to work this out, so no big rush.  Perhaps we
>> could
>>  have an irc meeting on the morning of Friday April 18th to work it out,
>> and
>>  then pass a formal motion by email.
>>
>
> Frank,
>
> During the gsoc meeting at #osgeo today, I've been asked to speed the
> things up in this topic to be able to create the final application
> list for all of the osgeo projects in time.
> The results per project will be submitted to this page:
> http://wiki.osgeo.org/wiki/SoC_Application_Rankings_by_Project_2008
>
> According to
> http://code.google.com/opensource/gsoc/2008/faqs.html#0.1_timeline
> we'll have to make this decision at least one day before April 18th.
>
> I'm aware of only a few volunteers out there to mentor the 3 GDAL
> related projects so I don't think if it'll be a difficult task to work
> the things out.

Tamas, Folks,

Unfortunately, I probably won't be able to mentor the OSM project (and any
other projects) during the GSoC this year. Please, consider me as a spare
mentor but I'd prefer if someone else could take over mentoring of the OSM
project.

I'd like to appologize for my disappearance from the GSoC.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Shawn.Gong at drdc-rddc.gc.ca  Tue Apr 15 10:38:09 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Apr 15 11:24:59 2008
Subject: [gdal-dev] gdal 1.5.1 make error on Solaris
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E11FFFB@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi gdal-dev list,

I have previously built gdal 1.4 on the same Solaris platform.

This time I would like to build gdal 1.5.1 so large images can be
processed.
 1) 'config' went smoothly.
 2) I got this error almost at end of fmake:
ggrep: /usr/local/lib/libintl.la: No such file or directory
/opt/sfw/bin/gsed: can't read /usr/local/lib/libintl.la: No such file or
dlibtool: link: `/usr/local/lib/libintl.la' is not a valid libtool
archive
gmake[1]: *** [libgdal.la] Error 1
gmake[1]: Leaving directory `/home/.....'gmake: *** [check-lib] Error 2

There is no libintl.la anywhere in PATH or LD_LIBRARY_PATH to be found.
There is libintl.a under /usr/lib/ that -> ./null.a

what is this libintl.la and how to solve the error?

thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080415/16c0a219/attachment.html
From nikos.alexandris at felis.uni-freiburg.de  Tue Apr 15 12:09:31 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Tue Apr 15 12:09:38 2008
Subject: [gdal-dev] There is no option to read "underneath" observation
	layers from L2G MODIS data, right?
In-Reply-To: <47FF7C9F.3040206@pmldnet.com>
References: <1207779051.16614.5.camel@vertical>
	<20080411102436.305760@gmx.net>  <47FF7C9F.3040206@pmldnet.com>
Message-ID: <1208275771.13401.7.camel@vertical>

On Fri, 2008-04-11 at 10:58 -0400, Lucena, Ivan wrote:
> MODIS Reprojection Tool: 
> http://lpdaac.usgs.gov/landdaac/tools/modis/index.asp

JFYI,

I tested under SlaxGIS the MRT version 4 but I can't find any layers
other than the "*_1", meaning: one can only see the layers that
OpenEV(gdal) accesses directly.

Using the LDOPE tools one can access the *_c" layers in a MOD09 product
for instance


> Supports MODIS Level-2G: 
> http://lpdaac.usgs.gov/landdaac/tools/modis/about.asp

From Shawn.Gong at drdc-rddc.gc.ca  Tue Apr 15 16:03:01 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Apr 15 16:03:04 2008
Subject: [gdal-dev] gdal 1.5.1 make error on Solaris
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E11FFFB@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E11FFFB@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E11FFFF@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thanks list.

Problem solved after installing the missing libintl.la

Shawn

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gong, Shawn (Contractor)
Sent: Tuesday, April 15, 2008 10:38 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal 1.5.1 make error on Solaris

hi gdal-dev list,
I have previously built gdal 1.4 on the same Solaris platform.
This time I would like to build gdal 1.5.1 so large images can be processed.
?1) 'config' went smoothly.
?2) I got this error almost at end of fmake:
ggrep: /usr/local/lib/libintl.la: No such file or directory
/opt/sfw/bin/gsed: can't read /usr/local/lib/libintl.la: No such file or dlibtool: link: `/usr/local/lib/libintl.la' is not a valid libtool archive
gmake[1]: *** [libgdal.la] Error 1
gmake[1]: Leaving directory `/home/.....'gmake: *** [check-lib] Error 2
There is no libintl.la anywhere in PATH or LD_LIBRARY_PATH to be found.
There is libintl.a under /usr/lib/ that -> ./null.a
what is this libintl.la and how to solve the error?
thanks,
Shawn
From matt.wilkie at gov.yk.ca  Tue Apr 15 17:49:03 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Apr 15 17:49:13 2008
Subject: [gdal-dev] Web Developers: Take Control of Your Maps
Message-ID: <480522CF.50406@gov.yk.ca>

Dear GDAL,

Pass this on to your friends who may have web design chops but haven't 
gone beyond basic map mashups. It's a good balanced overview of the web 
mapp stack and highlights a couple of open source projects we're 
familiar with.

http://www.alistapart.com/articles/takecontrolofyourmaps

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From ivan.lucena at pmldnet.com  Tue Apr 15 21:56:32 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Apr 15 21:56:38 2008
Subject: [gdal-dev] GDAL on HDF-EOS Public Domains Tools list
Message-ID: <48055CD0.3060900@pmldnet.com>

All,

Suggestion: Add GDAL to the list of HDF-EOS Software Tools

http://lpdaac.usgs.gov/landdaac/tools/hdf/tools_table.asp

Best regards,

Ivan


From nikos.alexandris at felis.uni-freiburg.de  Wed Apr 16 07:56:13 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Apr 16 07:56:22 2008
Subject: [gdal-dev] GDAL on HDF-EOS Public Domains Tools list
In-Reply-To: <48055CD0.3060900@pmldnet.com>
References: <48055CD0.3060900@pmldnet.com>
Message-ID: <1208346973.9865.6.camel@vertical>


On Tue, 2008-04-15 at 21:56 -0400, Lucena, Ivan wrote:
> All,
> 
> Suggestion: Add GDAL to the list of HDF-EOS Software Tools
> 
> http://lpdaac.usgs.gov/landdaac/tools/hdf/tools_table.asp
> 
> Best regards,
> 
> Ivan

It's something that I was thinking about... but then again, my "vote"
wouldn't count so much as a developer's one, at least it wont make the
same "impression".

From mslinn at mslinn.com  Wed Apr 16 20:04:01 2008
From: mslinn at mslinn.com (Mike Slinn)
Date: Wed Apr 16 20:13:28 2008
Subject: [gdal-dev] Reading S57 Extents from Python
Message-ID: <480693F1.6070203@mslinn.com>

Below is a heavily modified version of Frank's get_soundg.py sample 
program.  It dumps out rather more information than the original. A few 
questions:

   1. layer.GetExtent() does not seem to return anything useful (lines
      58-61).  Is GetExtent() not implemented?  Is there another way to
      efficiently obtain the extents of the visible entities on a layer?
   2. Do Points and Features need to be Destroy()'d (line 74-76)?  Those
      Python classes have no Destroy() methods.

Mike

------------------------------------------------------------------------

try:
    from osgeo import osr, ogr
except ImportError:
    import osr, ogr
import string, sys

def usage():
    print 'Usage: read_s57.py <s57file>\n'
    sys.exit(1)

def dumpFields(layerDefn):
	"""Dump all fields in layer"""	
	field_count = layerDefn.GetFieldCount()
	for fld_index in range(field_count):
		fd = layerDefn.GetFieldDefn(fld_index)
		print "      Field %s; type %d" % (fd.GetName(), fd.GetType())

def dumpS57(s57filename):
	ds = ogr.Open(s57filename)
	print str(ds.GetLayerCount()) + " layers found:"
	for index in range(ds.GetLayerCount()):
		layer = ds.GetLayer(index)
		extents = layer.GetExtent()
		layerDefn = layer.GetLayerDefn()
		print "   Layer %s is of type %d and has %d fields:" % \
			(layerDefn.GetName(), layerDefn.GetGeomType(), layerDefn.GetFieldCount())
		dumpFields(layerDefn)
		#print dir(extents) # doesn't show any methods ... is GetExtent() not implemented?
		#print "      Extents: (" + \
			#extents.MinX + ", " + extents.MinY + ") to (" + \
			#extents.MaxX + ", " + extents.MaxY + ") " #+ "; " + layer.GetLayerDefn()

	layer_soundg = ds.GetLayerByName('SOUNDG')
	print "=== Layer SOUNDG features ==="
	field_count = layer_soundg.GetLayerDefn().GetFieldCount()
	feat = layer_soundg.GetNextFeature()
	while feat is not None:
		multi_geom = feat.GetGeometryRef()
		for iPnt in range(multi_geom.GetGeometryCount()):
		    pnt = multi_geom.GetGeometryRef(iPnt)
		    print "   Lat, long: (%.3f, %.3f); depth: %.0f (units?)" % (pnt.GetX(), pnt.GetY(), pnt.GetZ())
		    for fld_index in range(field_count):
		        print "      Field #%d: %s" % (fld_index, feat.GetField(fld_index))
		    #if pnt is not None:
		    #    pnt.Destroy()  # causes error: about to Destroy unowned geometry
		#feat.Destroy()  # causes error: about to Destroy unowned geometry
		feat = layer_soundg.GetNextFeature()
	ds.Destroy()


if __name__ == '__main__':
	if len(sys.argv) != 2:
		usage()
	dumpS57(sys.argv[1])


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080416/e69681e7/attachment.html
From ari.jolma at tkk.fi  Thu Apr 17 02:26:32 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Apr 17 02:25:12 2008
Subject: [gdal-dev] OGR Feature Style Specification
Message-ID: <4806ED98.5070206@tkk.fi>

People,

As discussed in the OSGeo-Discuss list, there might be an interest, 
need, etc. to rethink feature styles. My suggestion would be to look 
into the SVG specification and refer to it as much as possible. Also 
something meta to that would be useful, i.e., saying that this feature 
is to be rendered using this symbol, and the symbol would be presented 
as a SVG snippet. I'd also like to render raster cells using symbols, 
the best known example being perhaps the flow direction arrow of raster 
DEMs.

The issue of rules - which symbols to use and tieing symbols and their 
properties into feature attributes - is perhaps unavoidable. It could be 
handled using the OGC symbology encoding spec (which also uses SVG 
styles), but does the whole thing get too big or out of scope for GDAL? 
One easily gets carried away. For example once we have SVG style and the 
geometry available, we could spit out SVG paths... which brings up the 
idea of having line simplification in OGR, etc...

If thought sensible in the first place I could try writing down this as 
a RFC.

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From szekerest at gmail.com  Thu Apr 17 05:18:18 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 17 05:18:23 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <4806ED98.5070206@tkk.fi>
References: <4806ED98.5070206@tkk.fi>
Message-ID: <f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>

Ari,

This sounds interesting, however I cannot imagine the actual
implementation of that. There's a couple of questions I have in my
mind related to the feature styles, some of these may be due to the
lack of my knowledge about the SVG feature styles.

1. Do we have an exact mapping between the OGR and the SVG style
parameters. Is OGR currently have a subset of the SVG style set?
2. The OGR style string is fairly compact and easy to parse. How about
the SVG style representation from this aspect? Note that we might want
to store the style strings in a separate field per feature even if the
data source has no built in style support.
3. Will this change affect the OGR Support Classes described in
http://www.gdal.org/ogr/ogr_feature_style.html
4. Can someone consider which drivers have built in style support and
what are their requirements to incorporate? The current approach seems
to be a mapinfo-ish implementation but in the meantime there might be
other drivers have been added to the pool with different requirements.
5. How about the compatibility issues with the existing applications?
Would it be easy to migrate their existing scripts. For example if the
application use the WHERE OGR_STYLE LIKE 'BRUSH' according to
http://www.gdal.org/rfc6_sqlgeom.html ?

Further issues:

6. Can we support the dataset/layer level default styles as described
in the OGR Feature Style specification but haven't been implemented
yet?


Best regards,

Tamas


2008/4/17, Ari Jolma <ari.jolma@tkk.fi>:
> People,
>
>  As discussed in the OSGeo-Discuss list, there might be an interest, need,
> etc. to rethink feature styles. My suggestion would be to look into the SVG
> specification and refer to it as much as possible. Also something meta to
> that would be useful, i.e., saying that this feature is to be rendered using
> this symbol, and the symbol would be presented as a SVG snippet. I'd also
> like to render raster cells using symbols, the best known example being
> perhaps the flow direction arrow of raster DEMs.
>
>  The issue of rules - which symbols to use and tieing symbols and their
> properties into feature attributes - is perhaps unavoidable. It could be
> handled using the OGC symbology encoding spec (which also uses SVG styles),
> but does the whole thing get too big or out of scope for GDAL? One easily
> gets carried away. For example once we have SVG style and the geometry
> available, we could spit out SVG paths... which brings up the idea of having
> line simplification in OGR, etc...
>
>  If thought sensible in the first place I could try writing down this as a
> RFC.
>
>  Regards,
>
>  Ari
>
>  --
>  Prof. Ari Jolma
>  Geoinformatiikka / Geoinformatics
>  Teknillinen Korkeakoulu / Helsinki University of Technology
>  tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
>  Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ari.jolma at tkk.fi  Thu Apr 17 06:23:09 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Apr 17 06:21:51 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
References: <4806ED98.5070206@tkk.fi>
	<f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
Message-ID: <4807250D.2060403@tkk.fi>

Tamas Szekeres kirjoitti:
> Ari,
>
> This sounds interesting, however I cannot imagine the actual
> implementation of that. There's a couple of questions I have in my
> mind related to the feature styles, some of these may be due to the
> lack of my knowledge about the SVG feature styles.
>
> 1. Do we have an exact mapping between the OGR and the SVG style
> parameters. Is OGR currently have a subset of the SVG style set?
>   

That I leave for later research. I believe the current OGR is a subset 
of SVG styles.

> 2. The OGR style string is fairly compact and easy to parse. How about
> the SVG style representation from this aspect? Note that we might want
> to store the style strings in a separate field per feature even if the
> data source has no built in style support.
>   

SVG is XML but styles are encoded into elements, for example: 
style="font-size:12;fill:url(#linearGradient578);fill-opacity:1;fill-rule:evenodd;stroke:#000000;stroke-width:0.920943pt;"

i.e. a string of key:value;key:value;... but this is not the whole story 
since as in this example the fill is a reference to gradient described, 
which needs more explaining than a simple value, elsewhere in the document

> 3. Will this change affect the OGR Support Classes described in
> http://www.gdal.org/ogr/ogr_feature_style.html
>   

No. :)

> 4. Can someone consider which drivers have built in style support and
> what are their requirements to incorporate? The current approach seems
> to be a mapinfo-ish implementation but in the meantime there might be
> other drivers have been added to the pool with different requirements.
>   

Since SVG is a pretty general it should be able to handle all styles and 
mapping to it is then just a technical problem?

> 5. How about the compatibility issues with the existing applications?
> Would it be easy to migrate their existing scripts. For example if the
> application use the WHERE OGR_STYLE LIKE 'BRUSH' according to
> http://www.gdal.org/rfc6_sqlgeom.html ?
>   

That kind of statement assumes quite much and I'm not sure if such 
constraints should be encouraged. There is no "brush" in SVG styles 
AFAIK. Maybe SVG styles should be implemented as a "new styles" and 
deprecate the old styles eventually?

> Further issues:
>
> 6. Can we support the dataset/layer level default styles as described
> in the OGR Feature Style specification but haven't been implemented
> yet?
>   

Isn't that the matter of just adding a style member into the 
dataset/layer class? Do features have knowledge of the layer they belong 
to? Then they can return the default style if they do not have a style 
of their own.

Ari

>
> Best regards,
>
> Tamas
>
>
> 2008/4/17, Ari Jolma <ari.jolma@tkk.fi>:
>   
>> People,
>>
>>  As discussed in the OSGeo-Discuss list, there might be an interest, need,
>> etc. to rethink feature styles. My suggestion would be to look into the SVG
>> specification and refer to it as much as possible. Also something meta to
>> that would be useful, i.e., saying that this feature is to be rendered using
>> this symbol, and the symbol would be presented as a SVG snippet. I'd also
>> like to render raster cells using symbols, the best known example being
>> perhaps the flow direction arrow of raster DEMs.
>>
>>  The issue of rules - which symbols to use and tieing symbols and their
>> properties into feature attributes - is perhaps unavoidable. It could be
>> handled using the OGC symbology encoding spec (which also uses SVG styles),
>> but does the whole thing get too big or out of scope for GDAL? One easily
>> gets carried away. For example once we have SVG style and the geometry
>> available, we could spit out SVG paths... which brings up the idea of having
>> line simplification in OGR, etc...
>>
>>  If thought sensible in the first place I could try writing down this as a
>> RFC.
>>
>>  Regards,
>>
>>  Ari
>>
>>  --
>>  Prof. Ari Jolma
>>  Geoinformatiikka / Geoinformatics
>>  Teknillinen Korkeakoulu / Helsinki University of Technology
>>  tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
>>  Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>>
>>
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Thu Apr 17 06:52:18 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Apr 17 06:50:59 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
References: <4806ED98.5070206@tkk.fi>
	<f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
Message-ID: <48072BE2.4000907@tkk.fi>

Tamas Szekeres kirjoitti:
> Further issues:
>
> 6. Can we support the dataset/layer level default styles as described
> in the OGR Feature Style specification but haven't been implemented
> yet?
>   

Sorry for flooding but this brings into my mind another issue related to 
styles.

Color table can also be thought of as a style table, where an attribute 
value of a feature (the value of the raster cell) is linked to a style 
(color). Similarly we might have a dataset of cities and capitals would 
have different styles (symbols) than normal cities.

Thus I think the dataset level styles (style tables) should be 
addressable through attribute values. I don't find this concept in the 
OGR feature style specification.

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From szekerest at gmail.com  Thu Apr 17 08:29:33 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 17 08:29:35 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <48072BE2.4000907@tkk.fi>
References: <4806ED98.5070206@tkk.fi>
	<f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
	<48072BE2.4000907@tkk.fi>
Message-ID: <f3b73b7d0804170529l1892caa2pa43634537eb567fe@mail.gmail.com>

2008/4/17, Ari Jolma <ari.jolma@tkk.fi>:
> Tamas Szekeres kirjoitti:
>
> > Further issues:
> >
> > 6. Can we support the dataset/layer level default styles as described
> > in the OGR Feature Style specification but haven't been implemented
> > yet?
> >
> >
>
>  Sorry for flooding but this brings into my mind another issue related to
> styles.
>
>  Color table can also be thought of as a style table, where an attribute
> value of a feature (the value of the raster cell) is linked to a style
> (color). Similarly we might have a dataset of cities and capitals would have
> different styles (symbols) than normal cities.
>
>  Thus I think the dataset level styles (style tables) should be addressable
> through attribute values. I don't find this concept in the OGR feature style
> specification.
>
>

Yes, because it haven't been implemented yet, but the option of
referring to the style table have been mentioned there.
With regards to the rasters, I don't see which of the formats would
support considering the styles this way? The indexed color
representation is generally used and implemented by the drivers, but I
don't see how the indexed styles are taken into account by the
existing applications?

Tamas
From piklas at gmail.com  Thu Apr 17 08:32:54 2008
From: piklas at gmail.com (PikoBoZ)
Date: Thu Apr 17 08:32:55 2008
Subject: [Gdal-dev] Problems with gdal_grid
Message-ID: <16743955.post@talk.nabble.com>


Hi List !

I've got troubles experimenting gdal_grid interpolation algoritms
I want to interpolate ponctual values contained in a point .shp (or csv),
and to write the result as GTiff
I use the following command yet:

[code]
gdal_grid -a invdist:power=2.0smooting=1.0 -txe 679285 681415 -tye 1837728
1840022 -of GTiff -ot Float32 -l vectorial_plume vectorial_plume.shp
testwrite.tiff
[/code]

testwrite.tiff is created but corrupted:
- It is mono band greyscaled, and i'd like to get a RGB, in the aim to apply
style
- It is all black (NoData). I think that gdal doesn't know on which field to
work on (in the dbf) so it can't interpolate any values !

So, a few questions is persiting in my mind:
Is it simpler to interpolate from .shp or to use a .vrt / .csv couple ?
How can I specify to gdal_grid a data field to interpolate?  
Is it possible to get a RGB GTiff from gdal_grid and to apply style (killing
nodata, Min/Max colors...)

Many thanks by advance

Nicolas BOZON
Maths/GIS PhD student





-- 
View this message in context: http://www.nabble.com/Problems-with-gdal_grid-tp16743955p16743955.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From wiesmann at gamma-rs.ch  Thu Apr 17 09:08:33 2008
From: wiesmann at gamma-rs.ch (Andreas Wiesmann)
Date: Thu Apr 17 09:15:18 2008
Subject: [gdal-dev] hdf5 and metadata
Message-ID: <1208437714.22814.40.camel@localhost.localdomain>

Hi,
on http://www.gdal.org/frmt_hdf5.html it says that no Metadata are read
at this time from the HDF5 files. 

However, when I run gdalinfo on the dataset or a subdataset I get some
corresponding meta information (see below). But using the API I found no
way to get the metadata from the root, the h5group "/". 
However, I can read this metadata with h5dump (see below). Is there a
way to access this meta information through gdal or do I have to dig
into the hdf5 API?

h5dump:
HDF5 "test.h5" {
GROUP "/" {
   ATTRIBUTE "a1" {
      DATATYPE  H5T_STD_I16LE
      DATASPACE  SCALAR
      DATA {
      (0): 0
      }
   }
 etc...
   }
   GROUP "SUBDIR" {
      ATTRIBUTE "AAPG" {
         DATATYPE  H5T_IEEE_F64LE
         DATASPACE  SIMPLE { ( 81 ) / ( 81 ) } 
         etc...

gdalinfo:
Driver: HDF5/Hierarchical Data Format Release 5
Size is 512, 512
Coordinate System is `'
Metadata:
  etc...
  SUBDIR:AAPG=-29.91
  etc...


Thanks for any hints.
Andreas





From szekerest at gmail.com  Thu Apr 17 09:22:59 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 17 09:23:01 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <4807250D.2060403@tkk.fi>
References: <4806ED98.5070206@tkk.fi>
	<f3b73b7d0804170218x21205107ua406f6829a936ade@mail.gmail.com>
	<4807250D.2060403@tkk.fi>
Message-ID: <f3b73b7d0804170622x665c151dt47cb9886e2ad445d@mail.gmail.com>

2008/4/17, Ari Jolma <ari.jolma@tkk.fi>:

>  Since SVG is a pretty general it should be able to handle all styles and
> mapping to it is then just a technical problem?
>

I don't know

>
> > 5. How about the compatibility issues with the existing applications?
> > Would it be easy to migrate their existing scripts. For example if the
> > application use the WHERE OGR_STYLE LIKE 'BRUSH' according to
> > http://www.gdal.org/rfc6_sqlgeom.html ?
> >
> >
>
>  That kind of statement assumes quite much and I'm not sure if such
> constraints should be encouraged. There is no "brush" in SVG styles AFAIK.
> Maybe SVG styles should be implemented as a "new styles" and deprecate the
> old styles eventually?
>

One of the use cases I'm aware of is when a mapinfo layer contains
features with different styles and we would like to distinguish
between those features. For example if I want to select all of the
labels from that layer and represent the labels as a separate layer in
mapserver.

>
> > Further issues:
> >
> > 6. Can we support the dataset/layer level default styles as described
> > in the OGR Feature Style specification but haven't been implemented
> > yet?
> >
> >
>
>  Isn't that the matter of just adding a style member into the dataset/layer
> class? Do features have knowledge of the layer they belong to? Then they can
> return the default style if they do not have a style of their own.
>

The features don't have back references to their layers at the moment.

Tamas
From dron at ak4719.spb.edu  Thu Apr 17 09:03:28 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu Apr 17 09:24:37 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <4806ED98.5070206@tkk.fi>
References: <4806ED98.5070206@tkk.fi>
Message-ID: <20080417130327.GA27044@ak4719.spb.edu>

Ari,

On Thu, Apr 17, 2008 at 09:26:32AM +0300, Ari Jolma wrote:
> As discussed in the OSGeo-Discuss list, there might be an interest,
> need, etc. to rethink feature styles. My suggestion would be to look
> into the SVG specification and refer to it as much as possible. Also
> something meta to that would be useful, i.e., saying that this feature
> is to be rendered using this symbol, and the symbol would be presented
> as a SVG snippet. I'd also like to render raster cells using symbols,
> the best known example being perhaps the flow direction arrow of
> raster DEMs.

I am the one who like to see more powerful and flexible style
implementation in OGR. OGC adopted the style specification not that long
ago:

 http://www.opengeospatial.org/standards/symbol

and it is quite suitable for my needs at the moment. Also I do not think
that the old OFS spec and implementation should be obsoleted in any way,
these two can co-exist together. It can be done just like the coordinate
system support: internal style handling model (based on OGC spec) and
number of import/export functions for particular style formats. Old
style will be one of the possible formats. The old API remains untouched
and complemented of the new style handling API, I am sure we can do that
without sacrificing backward compatibility.

I think we should go with the OGC specification, because I do not see
how pure SVG styles will suite our needs (needs of geography mapping).

The only question remains: who has enough time and manpower to do this
work?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From dron at ak4719.spb.edu  Thu Apr 17 09:24:53 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu Apr 17 09:39:40 2008
Subject: [Gdal-dev] Problems with gdal_grid
In-Reply-To: <16743955.post@talk.nabble.com>
References: <16743955.post@talk.nabble.com>
Message-ID: <20080417132453.GB27044@ak4719.spb.edu>

Nicolas,

On Thu, Apr 17, 2008 at 05:32:54AM -0700, PikoBoZ wrote:
> I've got troubles experimenting gdal_grid interpolation algoritms
> I want to interpolate ponctual values contained in a point .shp (or csv),
> and to write the result as GTiff
> I use the following command yet:
> 
> [code]
> gdal_grid -a invdist:power=2.0smooting=1.0 -txe 679285 681415 -tye 1837728
> 1840022 -of GTiff -ot Float32 -l vectorial_plume vectorial_plume.shp
> testwrite.tiff
> [/code]
> 
> testwrite.tiff is created but corrupted:
> - It is mono band greyscaled, and i'd like to get a RGB, in the aim to
> apply style
> - It is all black (NoData). I think that gdal doesn't know on which
> field to work on (in the dbf) so it can't interpolate any values !
> 
> So, a few questions is persiting in my mind:
> Is it simpler to interpolate from .shp or to use a .vrt / .csv couple ?
> How can I specify to gdal_grid a data field to interpolate?  

gdal_grid does not support getting Z value from the field (though it can
be extended for that). It should be 2.5D geometry for gdal_grid to work.

> Is it possible to get a RGB GTiff from gdal_grid and to apply style
> (killing nodata, Min/Max colors...)

I am not getting your point about RGB image. You will get the
multichannel raster, one channel for each input layer (and you can
combine multiple layers in one chunk and render them in single channel
using -sql option). It is better to get the default double precision
floating point raster, because gdal_grid does not scale values very
well. And you can do with that raster anything you want: scale it for
your needs, apply some colour encoding, etc. If you are supplying single
input layer then you will get grayscale output raster.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From szekerest at gmail.com  Thu Apr 17 09:57:49 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 17 09:57:54 2008
Subject: [Gdal-dev] Problems with gdal_grid
In-Reply-To: <16743955.post@talk.nabble.com>
References: <16743955.post@talk.nabble.com>
Message-ID: <f3b73b7d0804170657m3e1270e5wbda11417f19b0912@mail.gmail.com>

2008/4/17, PikoBoZ <piklas@gmail.com>:

>  Is it simpler to interpolate from .shp or to use a .vrt / .csv couple ?
>  How can I specify to gdal_grid a data field to interpolate?

You'll have to use a vrt something like:

<OGRVRTDataSource>
    <OGRVRTLayer name="sample">
        <SrcDataSource>sample.csv</SrcDataSource>
	<GeometryType>wkbPoint25D</GeometryType>
	<GeometryField encoding="PointFromColumns" x="xfield" y="yfield"
z="myzvaluetointerpolate"/>
    </OGRVRTLayer>
</OGRVRTDataSource>


>  Is it possible to get a RGB GTiff from gdal_grid and to apply style (killing
>  nodata, Min/Max colors...)
>

If you can use the latest SVN trunk, you could possibly define a .vrt
and include a lookup table to map between grid values to the color
values. Here's an example:

<VRTDataset rasterXSize="500" rasterYSize="500">
  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Red</ColorInterp>
    <ComplexSource>
      <LUT>4567.12:0,123434.23:128,1234567.34:255</LUT>
      <SourceFilename>mygrid.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <ColorInterp>Green</ColorInterp>
    <ComplexSource>
      <LUT>4567.12:0,123434.23:128,1234567.34:255</LUT>
      <SourceFilename>mygrid.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <ColorInterp>Blue</ColorInterp>
    <ComplexSource>
      <LUT>4567.12:0,123434.23:128,1234567.34:255</LUT>
      <SourceFilename>mygrid.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <ColorInterp>Alpha</ColorInterp>
    <ComplexSource>
      <LUT>4567.12:0,123434.23:128,1234567.34:255</LUT>
      <SourceFilename>mygrid.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>

for more information see:  http://www.gdal.org/gdal_vrttut.html


Best regards,

Tamas
From woodbri at swoodbridge.com  Thu Apr 17 11:13:48 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Apr 17 10:29:56 2008
Subject: [gdal-dev] Design/Re-Design consideration
Message-ID: <4807692C.7090808@swoodbridge.com>

Hi all,

I really like gdal and ogr. I can't say I use them all the time, but 
they work and do the job when I need them and I would be lost without 
them on some jobs. So Thanks and keep up the good work.

I want to toss out an idea that I think would make gdal/ogr better. This 
comes from my frustration with the fact that as more formats are 
supported, the more system library dependencies that are required to 
install it. I was horrified when I went to build mapserver with wfs 
support and I only use shapefiles on postgis layers that I had to 
install gdal and that pulled in some 20-30 other system packages!!!!

This is insane from my perspective. I don't need any of those packages 
for the work I'm doing, maybe mapserver should not require gdal for wfs, 
but I'm sure there is a good reason for that choice.

Regardless, The idea that I want to offer is that I think it would be 
very cool from a packaging point of view if gdal/ogr could take a page 
from the PHP book and configure a directory of runtime loadable modules. 
There would be a base package and then each format or group of formats 
would be loaded at runtime if it existed in the modules directory. In 
your ./configure script you could select what optional modules you want 
to build like --with-mod=all or --with-mod=gtif or these might be 
automatically figured out from the libraries installed or requested.

Then packaging would be based on the base package and and any optional 
format packages you want to install and each format package would have 
its own library dependencies. This would greatly simplify the growing 
tangle of system library and packaging dependencies and make things more 
modular from the users perspective.

Its an idea, maybe not well thought out, it probably involves a lot of 
work on someones part. It is offered in the hopes of making gdal/ogr 
better and more accessible from users and sysadmin's perspective.

Discuss amongst yourselves.

Thanks,
   -Steve W

From warmerdam at pobox.com  Thu Apr 17 10:41:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 17 10:41:52 2008
Subject: [gdal-dev] Re: [mapserver-dev] Design/Re-Design consideration
In-Reply-To: <4807692C.7090808@swoodbridge.com>
References: <4807692C.7090808@swoodbridge.com>
Message-ID: <4807619B.9040804@pobox.com>

Stephen Woodbridge wrote:
> Hi all,
> 
> I really like gdal and ogr. I can't say I use them all the time, but 
> they work and do the job when I need them and I would be lost without 
> them on some jobs. So Thanks and keep up the good work.
> 
> I want to toss out an idea that I think would make gdal/ogr better. This 
> comes from my frustration with the fact that as more formats are 
> supported, the more system library dependencies that are required to 
> install it. I was horrified when I went to build mapserver with wfs 
> support and I only use shapefiles on postgis layers that I had to 
> install gdal and that pulled in some 20-30 other system packages!!!!
> 
> This is insane from my perspective. I don't need any of those packages 
> for the work I'm doing, maybe mapserver should not require gdal for wfs, 
> but I'm sure there is a good reason for that choice.

Stephen,

Note, that you can build a minimalist GDAL if you want. I do it all the
time to keep size and complexity down.

Also, GDAL already supports runtime loadable plugins for formats, so this
can be used in packaging systems to reduce the number of dependencies of
the core libgdal.  This plugin mechanism is often used for stuff like
SDE, Oracle, MrSID and ECW dependencies.  It could be applied more widely.

PS. rather than a config.ini, we normally just determine which plugins
to load based on which ones are in the gdalplugins directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Apr 17 11:00:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 17 11:02:35 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <4806ED98.5070206@tkk.fi>
References: <4806ED98.5070206@tkk.fi>
Message-ID: <48076629.4070501@pobox.com>

Ari Jolma wrote:
> If thought sensible in the first place I could try writing down this as 
> a RFC.

Ari, Andrey, etc,

I'm afraid I've not followed this feature styling discussion all that
closely.

I'm interested in a more standards based feature styling approach for OGR,
whether that is SVG, SLD or some combination.

An RFC process would clearly be needed, but to me this seems like a large
effort.  So I think Andrey's question about who has the expertise, time
and need sufficient to drive such an effort is important.  I don't and would
at best be a tangential contributor.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mslinn at mslinn.com  Thu Apr 17 11:19:02 2008
From: mslinn at mslinn.com (Mike Slinn)
Date: Thu Apr 17 11:19:05 2008
Subject: [gdal-dev] Reading S57 Extents from Python
In-Reply-To: <480693F1.6070203@mslinn.com>
References: <480693F1.6070203@mslinn.com>
Message-ID: <48076A66.7010602@mslinn.com>

I realized after looking at the C++ code that entity extents are 
returned as a tuple and not as a method call. In Python this means that 
the extent coordinates can be accessed as slices:

print extents[:2], extents[2:]

Printing them out in Python is a bit tricky due to character encoding 
issues, so here is an example that builds on my previous posting, in 
case anyone ever has need of it:

def degreesNS(deg):
	hemi = "N"
	if deg<0:
		hemi = "S"
	return "%.3f%c%s" % (abs(deg), u'\N{DEGREE SIGN}', hemi)

def degreesEW(deg):
	hemi = "E"
	if deg<0:
		hemi = "W"
	return "%.3f%c%s" % (abs(deg), u'\N{DEGREE SIGN}', hemi)

extentStr = "      Extents: (%s, %s) to (%s, %s)" % \
            (degreesNS(extents[0]), degreesEW(extents[1]), \
             degreesNS(extents[2]), degreesEW(extents[3]))
print extentStr.encode('utf-8')

Unfortunately, it looks like the layer extents are computed on every 
call to layer.GetExtent() by reading every coordinate on that layer.  If 
one wants to know the extents of the entire data file, the call must be 
made on every layer that has data.  This doesn't scale well.

Section 7.4.1 of the S-57 spec (IHO Transfer Standard for Digital 
Hydrographic Data, Edition 3.1, November 2000 - Main Document - 
http://www.iho.shom.fr/publicat/free/files/31Main.pdf) discusses 
Catalogue directory record structure.  CATD(12) is the Catalogue 
directory field, and it contains the extents for the entire chart, 
referenced by subfields with labels (SLAT, WLON) to (NLAT, ELON).  How 
can this information be retrieved from Python?

Mike
From mslinn at mslinn.com  Thu Apr 17 11:50:46 2008
From: mslinn at mslinn.com (Mike Slinn)
Date: Thu Apr 17 11:50:49 2008
Subject: [gdal-dev] Reading S57 Extents from Python
In-Reply-To: <48076A66.7010602@mslinn.com>
References: <480693F1.6070203@mslinn.com> <48076A66.7010602@mslinn.com>
Message-ID: <480771D6.7010500@mslinn.com>

Hmm, looks like the ordering of the coordinate components isn't what I 
had expected.  This is a correction and further optimization to my 
previous posting.  Apologies for the flurry of postings:

def degreesNS(deg):
	"""Formats degrees and decimal minutes of latitude"""
	return degreesFormatter(deg, "N", "S")

def degreesEW(deg):
	"""Formats degrees and decimal minutes of longitude"""
	return degreesFormatter(deg, "E", "W")

def degreesFormatter(deg, hemiPos, hemiNeg):
	"""Formats degrees and decimal minutes"""
	adeg = deg
	hemi = hemiPos
	if deg<0:
		hemi = hemiNeg
		adeg = -deg
	return "%d%c%.3f'%s" % (int(adeg), u'\N{DEGREE SIGN}', (adeg%1)*60, hemi)

extentStr = "      Extents: (%s, %s) to (%s, %s)" % \
            (degreesNS(extents[2]), degreesEW(extents[0]), degreesNS(extents[3]), degreesEW(extents[1]))

Hopefully someone can shed some light on how to access the S-57 
Catalogue directory field.

Mike
From woklist at kyngchaos.com  Thu Apr 17 11:52:50 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Apr 17 11:52:55 2008
Subject: [gdal-dev] Re: [mapserver-dev] Design/Re-Design consideration
In-Reply-To: <4807619B.9040804@pobox.com>
References: <4807692C.7090808@swoodbridge.com> <4807619B.9040804@pobox.com>
Message-ID: <7367BFCB-C933-4D0E-BE9E-CA4A3803B8DA@kyngchaos.com>

On Apr 17, 2008, at 9:41 AM, Frank Warmerdam wrote:

> Stephen Woodbridge wrote:
>> Hi all,
>> I really like gdal and ogr. I can't say I use them all the time,  
>> but they work and do the job when I need them and I would be lost  
>> without them on some jobs. So Thanks and keep up the good work.
>> I want to toss out an idea that I think would make gdal/ogr better.  
>> This comes from my frustration with the fact that as more formats  
>> are supported, the more system library dependencies that are  
>> required to install it. I was horrified when I went to build  
>> mapserver with wfs support and I only use shapefiles on postgis  
>> layers that I had to install gdal and that pulled in some 20-30  
>> other system packages!!!!
>> This is insane from my perspective. I don't need any of those  
>> packages for the work I'm doing, maybe mapserver should not require  
>> gdal for wfs, but I'm sure there is a good reason for that choice.
>
> Stephen,
>
> Note, that you can build a minimalist GDAL if you want. I do it all  
> the
> time to keep size and complexity down.
>
> Also, GDAL already supports runtime loadable plugins for formats, so  
> this
> can be used in packaging systems to reduce the number of  
> dependencies of
> the core libgdal.  This plugin mechanism is often used for stuff like
> SDE, Oracle, MrSID and ECW dependencies.  It could be applied more  
> widely.
>
> PS. rather than a config.ini, we normally just determine which plugins
> to load based on which ones are in the gdalplugins directory.


Indeed, I use GDAL plugins on my OSX binaries for MrSID, ECW and  
Kakadu (SDE and Oracle not possible on OSX).  And the occassional new  
format driver from SVN, for testing.

One thing that would need work if more formats are built as plugins is  
load order, there are some formats that are sensitive to this (don't  
remember which).

And for the formats (currently just JP2) that have multiple drivers  
for them there needs to be a better way to choose which to use.  Easy  
when used from CLI programs, using GDAL_SKIP and '-of', but some other  
programs don't do this, like Qgis (yet).


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From woodbri at swoodbridge.com  Thu Apr 17 13:48:32 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Apr 17 12:47:45 2008
Subject: [gdal-dev] Re: [mapserver-dev] Design/Re-Design consideration
In-Reply-To: <4807619B.9040804@pobox.com>
References: <4807692C.7090808@swoodbridge.com> <4807619B.9040804@pobox.com>
Message-ID: <48078D70.3010001@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi all,
>>
>> I really like gdal and ogr. I can't say I use them all the time, but 
>> they work and do the job when I need them and I would be lost without 
>> them on some jobs. So Thanks and keep up the good work.
>>
>> I want to toss out an idea that I think would make gdal/ogr better. 
>> This comes from my frustration with the fact that as more formats are 
>> supported, the more system library dependencies that are required to 
>> install it. I was horrified when I went to build mapserver with wfs 
>> support and I only use shapefiles on postgis layers that I had to 
>> install gdal and that pulled in some 20-30 other system packages!!!!
>>
>> This is insane from my perspective. I don't need any of those packages 
>> for the work I'm doing, maybe mapserver should not require gdal for 
>> wfs, but I'm sure there is a good reason for that choice.
> 
> Stephen,
> 
> Note, that you can build a minimalist GDAL if you want. I do it all the
> time to keep size and complexity down.
> 
> Also, GDAL already supports runtime loadable plugins for formats, so this
> can be used in packaging systems to reduce the number of dependencies of
> the core libgdal.  This plugin mechanism is often used for stuff like
> SDE, Oracle, MrSID and ECW dependencies.  It could be applied more widely.
> 
> PS. rather than a config.ini, we normally just determine which plugins
> to load based on which ones are in the gdalplugins directory.
> 
> Best regards,

OK, cool! then it sounds like the only thing needed is better education 
of the package builders. Fedora packages pulled in a huge number of 
packages, and Debian was a little better IIRC but still a lot.

I can build from source and often do on my own systems because I want 
more recent software for testing or to work with, but deployment across 
a bunch of production servers really needs to be done with binary 
packages. Ideally I do not want to have to learn 4-6 different package 
build environments and tools sets. ;)

I hope some of the package builders are on this list and are listening.

Thank you for the feedback,
   -Steve

From ari.jolma at tkk.fi  Thu Apr 17 12:50:20 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Apr 17 12:49:01 2008
Subject: [gdal-dev] OGR Feature Style Specification
In-Reply-To: <20080417130327.GA27044@ak4719.spb.edu>
References: <4806ED98.5070206@tkk.fi> <20080417130327.GA27044@ak4719.spb.edu>
Message-ID: <48077FCC.1050300@tkk.fi>

Andrey Kiselev kirjoitti:
> I am the one who like to see more powerful and flexible style
> implementation in OGR. OGC adopted the style specification not that long
> ago:
>
>  http://www.opengeospatial.org/standards/symbol
>
> and it is quite suitable for my needs at the moment.

I also agree that this is definitely the spec to start. I does not do 
all that I want but almost.

> Also I do not think
> that the old OFS spec and implementation should be obsoleted in any way,
> these two can co-exist together. It can be done just like the coordinate
> system support: internal style handling model (based on OGC spec) and
> number of import/export functions for particular style formats.

Yes.

> Old
> style will be one of the possible formats. The old API remains untouched
> and complemented of the new style handling API, I am sure we can do that
> without sacrificing backward compatibility.
>   

After looking some time at the symbology encoding it seems to me that 
the new API would connect to the existing API in a couple of places:

- CoverageStyle object is associated with GDALDataset and OGRLayer 
objects (need get and set methods). I.e. if a driver produces either 
object, it should also produce a CoverageStyle object, if there is style 
information available. Also a CoverageStyle object can be created and 
associated with Dataset or Layer objects. If a driver saves those, it 
should also save the style information in its native format. 
CoverageStyle can also be independently stored/read from symbology XML
- CoverageStyle objects contain rules, which should be supported in 
OGRLayer as a new SetRuleFilter method

This might be all that's needed. I currently don't see the point of 
having a top level FeatureStyle class since we more or less always deal 
with coverages in programs and real data exist as coverages.

The drivers and others then of course need an API to construct or query 
CoverageStyle objects, but this is separate from existing GDAL API.

For applications that use GDAL for accessing data that is to be 
rendered, CoverageStyle objects need to provide some services to know 
how a particular feature is to be rendered. These are also separate from 
the existing API. Generally, the style to be used is defined by the 
rule, which is known, if it is used as a filter, or there should be a 
method to test whether a given feature matches the rule. Additional 
information (for rules that apply to specific scales) that is needed is 
scale.

Things that I'd like to add to the OGC spec are:

- render raster cells with symbols (the flow direction arrow!)
- render polygons as symbols or as labels (eliminate the need for point 
features; placement algorithms needed!)
- scale rules should be usable also when rendering to SVG, PS or such

BTW, this might be what Markus was looking for in the first place. This 
could be a separate library also.

> I think we should go with the OGC specification, because I do not see
> how pure SVG styles will suite our needs (needs of geography mapping).
>   

I agree.

> The only question remains: who has enough time and manpower to do this
> work?
>   

The third option would be of course money (which is sometimes tradeable 
with university credit points). But I would ask, can we afford not to 
begin it? :)

Cheers,

Ari

> Best regards,
> Andrey
>
>   


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dmorissette at mapgears.com  Thu Apr 17 13:20:01 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Apr 17 13:20:03 2008
Subject: [gdal-dev] Re: [mapserver-dev] Design/Re-Design consideration
In-Reply-To: <48078D70.3010001@swoodbridge.com>
References: <4807692C.7090808@swoodbridge.com> <4807619B.9040804@pobox.com>
	<48078D70.3010001@swoodbridge.com>
Message-ID: <480786C1.4090504@mapgears.com>

Stephen Woodbridge wrote:
> 
> I can build from source and often do on my own systems because I want 
> more recent software for testing or to work with, but deployment across 
> a bunch of production servers really needs to be done with binary 
> packages. Ideally I do not want to have to learn 4-6 different package 
> build environments and tools sets. ;)
> 
> I hope some of the package builders are on this list and are listening.
> 

Have you heard of FGS?   http://maptools.org/fgs/

The current official release is awfully out of date, but we've started 
putting some more time on it recently and a 1.0 release should be 
available soon with up to date components. We have also been using it a 
lot internally to deploy on client sites and it works great once you get 
used to it.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From rsignell at usgs.gov  Thu Apr 17 13:35:15 2008
From: rsignell at usgs.gov (Rich Signell)
Date: Thu Apr 17 13:35:18 2008
Subject: [gdal-dev] SRTM30+ Version 3.0 as GeoTIF?
Message-ID: <61033b870804171035i7b2a11d0mc39a0cb5a2f58db6@mail.gmail.com>

GDAL folks,

Does anyone have the SRTM30+ Version 3.0 global topography as a single
GeoTIF, or even better, a script for taking the *.strm files at:
ftp://topex.ucsd.edu/pub/srtm30_plus/data
and producing such a global GeoTIF?

This 30 arc second global topography combines SRTM30 land topographhy
with Smith & Sandwell  + NOAA Coastal Relief Model + a growing number
of high resolution coastal ocean bathymetry to create one of the best
worldwide bathymetric grids available.  Details are at:
http://topex.ucsd.edu/WWW_html/srtm30_plus.html

Nearly two years ago, I got Version 1.0 of this dataset as a GeoTIFF
via geotorrent.org (which seems to no longer be functioning, BTW), and
I'm assuming it was made using GDAL.   But I am having a hard time
finding a GeoTIF version of Version 3.0.

They will soon be coming out with a version 4.0, so it would be great
to have the script for doing the conversion available.

If someone has the script, I volunteer to work with the UCSD guys so
that they can provide GeoTIFFs as new versions of SRTM30+ become
available.

-Rich

-- 
Dr. Richard P. Signell (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598
From warmerdam at pobox.com  Thu Apr 17 14:26:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 17 14:26:36 2008
Subject: [gdal-dev] SRTM30+ Version 3.0 as GeoTIF?
In-Reply-To: <61033b870804171035i7b2a11d0mc39a0cb5a2f58db6@mail.gmail.com>
References: <61033b870804171035i7b2a11d0mc39a0cb5a2f58db6@mail.gmail.com>
Message-ID: <48079640.7000804@pobox.com>

Rich Signell wrote:
> GDAL folks,
> 
> Does anyone have the SRTM30+ Version 3.0 global topography as a single
> GeoTIF, or even better, a script for taking the *.strm files at:
> ftp://topex.ucsd.edu/pub/srtm30_plus/data
> and producing such a global GeoTIF?
> 
> This 30 arc second global topography combines SRTM30 land topographhy
> with Smith & Sandwell  + NOAA Coastal Relief Model + a growing number
> of high resolution coastal ocean bathymetry to create one of the best
> worldwide bathymetric grids available.  Details are at:
> http://topex.ucsd.edu/WWW_html/srtm30_plus.html
> 
> Nearly two years ago, I got Version 1.0 of this dataset as a GeoTIFF
> via geotorrent.org (which seems to no longer be functioning, BTW), and
> I'm assuming it was made using GDAL.   But I am having a hard time
> finding a GeoTIF version of Version 3.0.
> 
> They will soon be coming out with a version 4.0, so it would be great
> to have the script for doing the conversion available.
> 
> If someone has the script, I volunteer to work with the UCSD guys so
> that they can provide GeoTIFFs as new versions of SRTM30+ become
> available.

Rich,

I produced the merged SRTM30+ geotiff that was on geotorrent.org.  I
believe I recently scrubbed the directory where I did this work.  I
had implemented it by writing a small python script to create a .hdr
or something similar for each file.

It is my understanding that the relatively new SRTM driver in GDAL
should support srtm files directly, so I think you could use it with
gdal_merge.py to create an SRTM mosaic directly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rsignell at usgs.gov  Thu Apr 17 16:41:34 2008
From: rsignell at usgs.gov (Rich Signell)
Date: Thu Apr 17 16:41:36 2008
Subject: [gdal-dev] SRTM30+ Version 3.0 as GeoTIF?
In-Reply-To: <48079640.7000804@pobox.com>
References: <61033b870804171035i7b2a11d0mc39a0cb5a2f58db6@mail.gmail.com>
	<48079640.7000804@pobox.com>
Message-ID: <61033b870804171341x14bc992paad162d01dbb0afe@mail.gmail.com>

Frank,

>  I produced the merged SRTM30+ geotiff that was on geotorrent.org.  I
>  believe I recently scrubbed the directory where I did this work.  I
>  had implemented it by writing a small python script to create a .hdr
>  or something similar for each file.
>
>  It is my understanding that the relatively new SRTM driver in GDAL
>  should support srtm files directly, so I think you could use it with
>  gdal_merge.py to create an SRTM mosaic directly.

The new SRTM driver in GDAL reads the 1 and 3 sec SRTM, but not the
30sec format, I believe.  But not a problem -- I didn't notice before
that there is another directory at the SRTM30+ site with ERMapper
headers, which combined with the raw data files works just fine with
GDAL.   So it will be easy to make the tiles and assemble with
gdal_merge.py.

Thanks,
Rich

-- 
Dr. Richard P. Signell (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598
From patrick.hartling at priority5.com  Thu Apr 17 18:14:49 2008
From: patrick.hartling at priority5.com (Patrick Hartling)
Date: Thu Apr 17 18:22:50 2008
Subject: [gdal-dev] ogr2ogr crash on Windows with trunk r14310
Message-ID: <C06808AB-FDB1-4689-962C-7F9B40B36D04@priority5.com>

I am trying to test the bug fix applied to the GDAL SVN trunk in  
r14213, but I get a crash from ogr2ogr in the call to PQconnectdb()  
made by OGRPGDataSource::Open(). The org2ogr command line I am using  
is the following:

ogr2ogr -f PostgreSQL PG:"host=localhost dbname=testdb user=patrick" - 
overwrite input.mdb -lco LAUNDER=NO -lco GEOMETRY_NAME=the_geom

This is happening on Windows XP SP2 with PostgreSQL 8.2.5 and PostGIS  
1.3.1. The above ogr2ogr command works fine with GDAL 1.5.0.

I am using r14310 of the source from the SVN trunk. Before building  
GDAL, I modified nmake.opt to include the following two lines:

PG_INC_DIR = "C:\Program Files (x86)\PostgreSQL\8.2\include"
PG_LIB = "C:\Program Files (x86)\PostgreSQL\8.2\lib\libpq.lib"  
wsock32.lib

I compiled the code using Visual C++ 7.1 with this command:

nmake /f makefile.vc PYDIR=C:\Python25 NODEBUG=

I have verified that the string processing being done by  
OGRPGDataSource::Open() produces "host=localhost dbname=testdb  
user=patrick" as the input to PQconnectdb(). The named database  
exists, and the PostgreSQL server is listening on the default port. Is  
there anything else that could cause PQconnectdb() to fail, or should  
I go ahead and make a build of PostgreSQL with debug symbols to see  
what is happening in PQconnectdb()?

Thanks.

  -Patrick


--
Patrick L. Hartling
Senior Software Engineer, Priority 5
http://www.priority5.com/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 186 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080417/dd37df00/PGP.bin
From luizmottanet at hotmail.com  Thu Apr 17 21:50:15 2008
From: luizmottanet at hotmail.com (Luiz Motta)
Date: Thu Apr 17 21:51:22 2008
Subject: [gdal-dev] Gdal to Tiles C#
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFE16@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFE16@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <BAY113-DS35EEF0F885D6B6533AD35D9E40@phx.gbl>

Folks,

I post the program (binary and source coude) GdalToTiles C#  in
http://www.codeplex.com/gdal2tilescsharp

It?s make tiles images for Google Earth with KML Superoverlay methods.


Cheers,
Luiz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080417/f82dc22a/attachment-0001.html
From piklas at gmail.com  Fri Apr 18 08:12:35 2008
From: piklas at gmail.com (PikoBoZ)
Date: Fri Apr 18 08:12:36 2008
Subject: [Gdal-dev] Problems with gdal_grid
In-Reply-To: <16743955.post@talk.nabble.com>
References: <16743955.post@talk.nabble.com>
Message-ID: <16763384.post@talk.nabble.com>


Hi List
Thanks to Andrey and Tamas for their useful answers about .vrt
I managed to write a simple .vrt and to interpolate my point values using -a
invdist.
I'm now trying to control my layer style and nodata
I understood that i must use the ComplexSource to perform such tasks, as
Tamas show me an example.
Is the ComplexSource must be embedded into the
<OGRVRTDataSource></OGRVRTDataSource>, or must it comes after, or may be in
a different file ?
In fact i don't get the solution to link the VRTDataSource and the
ComplexSource
Any hints appreciated

Nicolas B.


PikoBoZ wrote:
> 
> Hi List !
> 
> I've got troubles experimenting gdal_grid interpolation algoritms
> I want to interpolate ponctual values contained in a point .shp (or csv),
> and to write the result as GTiff
> I use the following command yet:
> 
> [code]
> gdal_grid -a invdist:power=2.0smooting=1.0 -txe 679285 681415 -tye 1837728
> 1840022 -of GTiff -ot Float32 -l vectorial_plume vectorial_plume.shp
> testwrite.tiff
> [/code]
> 
> testwrite.tiff is created but corrupted:
> - It is mono band greyscaled, and i'd like to get a RGB, in the aim to
> apply style
> - It is all black (NoData). I think that gdal doesn't know on which field
> to work on (in the dbf) so it can't interpolate any values !
> 
> So, a few questions is persiting in my mind:
> Is it simpler to interpolate from .shp or to use a .vrt / .csv couple ?
> How can I specify to gdal_grid a data field to interpolate?  
> Is it possible to get a RGB GTiff from gdal_grid and to apply style
> (killing nodata, Min/Max colors...)
> 
> Many thanks by advance
> 
> Nicolas BOZON
> Maths/GIS PhD student
> 
> 
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Problems-with-gdal_grid-tp16743955p16763384.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Fri Apr 18 10:50:06 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Apr 18 10:50:09 2008
Subject: [Gdal-dev] Problems with gdal_grid
In-Reply-To: <16763384.post@talk.nabble.com>
References: <16743955.post@talk.nabble.com> <16763384.post@talk.nabble.com>
Message-ID: <f3b73b7d0804180750k76b0d170obd8c5e6fba343010@mail.gmail.com>

Nicolas,

I'm afraid I don't see the problem exactly. You should create a
similar vrt file as I've included in my previous post. Then you should
probably use CreateCopy to copy the virtual raster to a "real" raster
format png/jpg whatever. Or use an application like gdal_translate to
accomplish this task.

Best regards,

Tamas


2008/4/18, PikoBoZ <piklas@gmail.com>:
>
>  Hi List
>  Thanks to Andrey and Tamas for their useful answers about .vrt
>  I managed to write a simple .vrt and to interpolate my point values using -a
>  invdist.
>  I'm now trying to control my layer style and nodata
>  I understood that i must use the ComplexSource to perform such tasks, as
>  Tamas show me an example.
>  Is the ComplexSource must be embedded into the
>  <OGRVRTDataSource></OGRVRTDataSource>, or must it comes after, or may be in
>  a different file ?
>  In fact i don't get the solution to link the VRTDataSource and the
>  ComplexSource
>  Any hints appreciated
>
>  Nicolas B.
>
>
>
>  PikoBoZ wrote:
>  >
>  > Hi List !
>  >
>  > I've got troubles experimenting gdal_grid interpolation algoritms
>  > I want to interpolate ponctual values contained in a point .shp (or csv),
>  > and to write the result as GTiff
>  > I use the following command yet:
>  >
>  > [code]
>  > gdal_grid -a invdist:power=2.0smooting=1.0 -txe 679285 681415 -tye 1837728
>  > 1840022 -of GTiff -ot Float32 -l vectorial_plume vectorial_plume.shp
>  > testwrite.tiff
>  > [/code]
>  >
>  > testwrite.tiff is created but corrupted:
>  > - It is mono band greyscaled, and i'd like to get a RGB, in the aim to
>  > apply style
>  > - It is all black (NoData). I think that gdal doesn't know on which field
>  > to work on (in the dbf) so it can't interpolate any values !
>  >
>  > So, a few questions is persiting in my mind:
>  > Is it simpler to interpolate from .shp or to use a .vrt / .csv couple ?
>  > How can I specify to gdal_grid a data field to interpolate?
>  > Is it possible to get a RGB GTiff from gdal_grid and to apply style
>  > (killing nodata, Min/Max colors...)
>  >
>  > Many thanks by advance
>  >
>  > Nicolas BOZON
>  > Maths/GIS PhD student
>  >
>  >
>  >
>  >
>  >
>  >
>
>  --
>
> View this message in context: http://www.nabble.com/Problems-with-gdal_grid-tp16743955p16763384.html
>
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From waharvey at gmail.com  Fri Apr 18 14:15:54 2008
From: waharvey at gmail.com (W. A. Harvey)
Date: Fri Apr 18 14:16:03 2008
Subject: [gdal-dev] How to improve image access performance using libGDAL1.5?
Message-ID: <4720d1ec0804181115y697ab4d6oa66f6fdf06ade10c@mail.gmail.com>

I have a few questions about how I can improve performance when using the
GDAL image libraries.

Background: I have a tiled image format that was developed back when the
earth was cooling. I also have a large number of applications that use this
format, ranging from basic computer vision tasks to display of
large-scale textures for visualization applications. The format has an
API that supports efficient pixel, row/col, and block access to byte,
multi-byte and floating-point image data. I'm attempting to re-implement
this API using calls to GDAL so that, with just a recompile/re-link,
the existing applications can ingest and operate on all the image formats
supported by GDAL.

After writing some of the primary API functions, I compiled several of
the simpler applications so that I could test both the correctness and
the performance of my implementation. The performance numbers I've
collected so far show that the GDAL-based version is 3-4 times slower
when reading/writing "blocks" (rows, cols, blocks) of data, and about
100 times slower when reading/writing pixel data. These numbers are
about the same regardless of the type of input image -- jpeg, tiff, gif,
nitf -- or image size.

I need to improve the pixel-based access performance to make this
implementation viable, though I'd certainly like to improve the
performance of the block-based access, too. I've tried several different
modifications to improve the speed, including:
 a. Increasing the cache size via GDALSetCacheMax(), including
   increasing the size to be larger than the size of the test image.
 b. Compiling the libraries with optimization;
 c. Instead of using RasterIO(), implementing pixel access using
   "blocks" obtained with GetLockedBlockRef() and sub-indexed using
   SRCVAL().
Profiling the applications shows that they're spending the most time
(>80%) in the primary GDAL access routines: GDALRasterBand::RasterIO()
and GDALRasterBand::GetLockedBlockRef(). This is expected because the
test applications are relatively simple -- inverting an image,
flipping/rotating an image, sub-sampling an image, etc.

Environment: WindowsXP Pro SP2, Visual Studio 6 (I know, I know ...), Dual
3.4GHz Xeon processors, 2GB memory, libGDAL1.5.1.

My questions: Can anyone suggest other specific things I can do to try
to improve the performance of the GDAL-based library?  Should I consider
implementing my own caching mechanism that would sit between my API
functions and the GDAL calls? Though I thought that that was the purpose
of GDAL's internal caching mechanism. If there are other ways to "tune"
the cache, I overlooked them in the GDAL documentation and wiki.

It appears to me that most people use GDAL to convert their data between
various image formats, but I'm not aware of people using it as a basis
for their image access APIs. Am I "abusing" GDAL by using it this way?

Thanks in advance for your thoughts/suggestions. -Wilson
From punk.kish at gmail.com  Fri Apr 18 16:30:26 2008
From: punk.kish at gmail.com (P Kishor)
Date: Fri Apr 18 16:30:30 2008
Subject: [gdal-dev] Investigating OpenLayers -> MapServer (WMS) -> OGR -> db
Message-ID: <cdf6db500804181330y2e1cdfc8j3f7a84e93f90319d@mail.gmail.com>

I am experimenting with OpenLayers calling MapServer (WMS) using OGR
to extract data from a database. I am now able to log the following --

[Fri Apr 18 08:46:54 2008].505608
msOGRLayerClose(/Users/punkish/Data/sqlitegis/wi.db).
[Fri Apr 18 08:46:54 2008].505626
msOGRFileClose(/Users/punkish/Data/sqlitegis/wi.db,-1).
[Fri Apr 18 08:46:54 2008].505647
msConnPoolRelease(sg_zip,/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)
[Fri Apr 18 08:46:54 2008].505654
msConnPoolClose(/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)
[Fri Apr 18 08:46:54 2008].506741 msDrawMap(): Layer 0 (sg_zip), 0.257s
[Fri Apr 18 08:46:54 2008].216458
msOGRFileOpen(/Users/punkish/Data/sqlitegis/wi.db)...
[Fri Apr 18 08:46:54 2008].228475 OGROPen(/Users/punkish/Data/sqlitegis/wi.db)
[Fri Apr 18 08:46:54 2008].231712
msConnPoolRegister(sg_zip,/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)

but I want the exact SQL statement being executed. See, in my mapfile, I ask for

DATA "SELECT wkt_geometry FROM <table>"

But, OpenLayers sends a BBOX, so each SELECT should actually be something like

SELECT wkt_geometry FROM <table> WHERE <extent of features is in the BBOX>

That is what I want to investigate. What exactly is OGR/MapServer
executing? What is the form of "WHERE <extent of features in the
BBOX>"? How can I log this level of detail?

-- 
Puneet Kishor http://punkish.eidesis.org/
Nelson Institute for Environmental Studies http://www.nelson.wisc.edu/
Open Source Geospatial Foundation (OSGeo) http://www.osgeo.org/
From mchapman at texelinc.com  Fri Apr 18 16:44:26 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Apr 18 16:44:40 2008
Subject: [gdal-dev] Investigating OpenLayers -> MapServer (WMS) -> OGR ->
	db
In-Reply-To: <cdf6db500804181330y2e1cdfc8j3f7a84e93f90319d@mail.gmail.com>
References: <cdf6db500804181330y2e1cdfc8j3f7a84e93f90319d@mail.gmail.com>
Message-ID: <002f01c8a194$fef8a940$fce9fbc0$@com>

Puneet,

I think there is a sql trace option in SQLite that allows you to see all sql
statements executed to database.  I'm not sure how you might enable that in
MapServer but maybe that would show you what is going on.  See the sqlite
api docs for the trace statement.

Best regards,
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P Kishor
Sent: Friday, April 18, 2008 2:30 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Investigating OpenLayers -> MapServer (WMS) -> OGR -> db

I am experimenting with OpenLayers calling MapServer (WMS) using OGR
to extract data from a database. I am now able to log the following --

[Fri Apr 18 08:46:54 2008].505608
msOGRLayerClose(/Users/punkish/Data/sqlitegis/wi.db).
[Fri Apr 18 08:46:54 2008].505626
msOGRFileClose(/Users/punkish/Data/sqlitegis/wi.db,-1).
[Fri Apr 18 08:46:54 2008].505647
msConnPoolRelease(sg_zip,/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)
[Fri Apr 18 08:46:54 2008].505654
msConnPoolClose(/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)
[Fri Apr 18 08:46:54 2008].506741 msDrawMap(): Layer 0 (sg_zip), 0.257s
[Fri Apr 18 08:46:54 2008].216458
msOGRFileOpen(/Users/punkish/Data/sqlitegis/wi.db)...
[Fri Apr 18 08:46:54 2008].228475
OGROPen(/Users/punkish/Data/sqlitegis/wi.db)
[Fri Apr 18 08:46:54 2008].231712
msConnPoolRegister(sg_zip,/Users/punkish/Data/sqlitegis/wi.db,0x1126de0)

but I want the exact SQL statement being executed. See, in my mapfile, I ask
for

DATA "SELECT wkt_geometry FROM <table>"

But, OpenLayers sends a BBOX, so each SELECT should actually be something
like

SELECT wkt_geometry FROM <table> WHERE <extent of features is in the BBOX>

That is what I want to investigate. What exactly is OGR/MapServer
executing? What is the form of "WHERE <extent of features in the
BBOX>"? How can I log this level of detail?

-- 
Puneet Kishor http://punkish.eidesis.org/
Nelson Institute for Environmental Studies http://www.nelson.wisc.edu/
Open Source Geospatial Foundation (OSGeo) http://www.osgeo.org/
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From xiaodong.zhang2 at und.edu  Fri Apr 18 17:45:25 2008
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Fri Apr 18 18:09:14 2008
Subject: [gdal-dev] gdal_rasterize does not burn the polygon
Message-ID: <48091675.4040502@und.edu>

Skipped content of type multipart/related-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2003_Yield_03.zip
Type: application/octet-stream
Size: 4355 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080418/a1f0ee39/2003_Yield_03-0001.obj
From windwxc at sina.com  Sat Apr 19 04:18:52 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Sat Apr 19 04:28:30 2008
Subject: [gdal-dev] how to use ogr to change the postgis file to shape file
Message-ID: <20080419081852.E81871EE93E@mail3-145.sinamail.sina.com.cn>

&nbsp;hi ,everyone. I am a newer and meet a question about how to use ogr. I build a postgresql database and store spatial data in it. now i need to access the spatial data in database and show the result by the programm writen with C# and arcengin. So someone tell me i can use ogr to transform the data from postgis to shape by code but now i cannot find a good example how to it .I want to someone give an example to use org to transform data by code and C#&nbsp; may as well.please help me&nbsp; and i need resolve this problem soon.
thank you!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow

-------------------------------------------------------------------
( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080414.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080419/fd72b7b1/attachment.html
From mateusz at loskot.net  Sat Apr 19 04:59:31 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 19 04:59:37 2008
Subject: [gdal-dev] how to use ogr to change the postgis file to shape file
In-Reply-To: <20080419081852.E81871EE93E@mail3-145.sinamail.sina.com.cn>
References: <20080419081852.E81871EE93E@mail3-145.sinamail.sina.com.cn>
Message-ID: <4809B473.6030603@loskot.net>

windwxc@sina.com wrote:
> So someone tell me i can
> use ogr to transform the data from postgis to shape by code but now i
> cannot find a good example how to it .

Have you read the OGR Tutorial?

http://gdal.org/ogr/ogr_apitut.html

Also, you should complete it with reading the docs about Shapefile
and PostgreSQL providers:

http://gdal.org/ogr/drv_shapefile.html
http://gdal.org/ogr/drv_pg.html

Next, check the CSharp Wiki:

http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp

where you will find links to C# apps examples at

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps

Now, combine the exmaple of OGR reading/writing presented in the OGR 
Tutorial
with CSharp interface, leveraging information about how to connect to 
Shapefile/PostgreSQL
datasets to in read and write modes.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From windwxc at sina.com  Sat Apr 19 09:37:51 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Sat Apr 19 09:38:00 2008
Subject: [gdal-dev] question about ogr
Message-ID: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>

&nbsp;hi,everyone. i meet a question about org. i use VisualStudio2005 with windows XP and i have copy some ogr dll file to bin of my application project.but when i run my project and throw a error, it fails at the first line: Ogr.RegisterAll(). Error is "The type initializer for 'OSGeo.OGR.Ogr' threw an exception."&nbsp; I find someone meet same question but his method cannot well run and i still cannot find the reason. The following is my codes and i add "using OSGeo.OGR;".
&nbsp;public void GetGeometry(string sqltext)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogr.RegisterAll();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show("regesiter failor:" + e.Message); }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //OSGeo.OGR.Geometry myGeom;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource conn = Ogr.Open("PG:host=locatal dbname=stdb user=stuser password=123", 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myLay = conn.ExecuteSQL(sqltext, null, "tt");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show("open file failor:" + e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
please help me.
thank you!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow

-------------------------------------------------------------------
( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080414.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080419/7f1a8a15/attachment.html
From mateusz at loskot.net  Sat Apr 19 10:51:24 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 19 10:51:33 2008
Subject: [gdal-dev] question about ogr
In-Reply-To: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
References: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
Message-ID: <480A06EC.30106@loskot.net>

windwxc@sina.com wrote:
> &nbsp;hi,everyone. i meet a question about org. i use VisualStudio2005 with windows XP and i have copy some ogr dll file to bin of my application project.but when i run my project and throw a error, it fails at the first line: Ogr.RegisterAll(). Error is "The type initializer for 'OSGeo.OGR.Ogr' threw an exception."&nbsp; I find someone meet same question but his method cannot well run and i still cannot find the reason. The following is my codes and i add "using OSGeo.OGR;".
> &nbsp;public void GetGeometry(string sqltext)
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogr.RegisterAll();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show("regesiter failor:" + e.Message); }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //OSGeo.OGR.Geometry myGeom;
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource conn = Ogr.Open("PG:host=locatal dbname=stdb user=stuser password=123", 1);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myLay = conn.ExecuteSQL(sqltext, null, "tt");
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conn.Dispose();
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show("open file failor:" + e.Message);
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
> please help me.
> thank you!
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow



If you don't mind, I'd have two requests:

1. Please, use meaningful subject. It will help people to read your posts
as well as search through the archives.

2. Please DO NOT send your posts in HTML (http://asciiribbon.org/). As 
you can see above, your post is completely unreadable as messed with 
XML/HTML entities.

Thank you!

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From szekerest at gmail.com  Sat Apr 19 11:41:03 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Apr 19 11:41:05 2008
Subject: [gdal-dev] question about ogr
In-Reply-To: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
References: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
Message-ID: <f3b73b7d0804190841x75be3fd0t887ef6425e54a6f1@mail.gmail.com>

Q291bGQgeW91IHBvc3QgdGhlIGVudGlyZSBlcnJvciBtZXNzYWdlIGhlcmU/IE15IGJlc3QgZ3Vl
c3MgYXQgdGhpcwpwb2ludCBpcyB0aGF0IHNvbWUgb2YgdGhlIHJlcXVpcmVkIGRsbC1zIGNvdWxk
bid0IGJlIGxvYWRlZCBhdApydW4tdGltZS4KCkJlc3QgcmVnYXJkcywKClRhbWFzCgoKMjAwOC80
LzE5LCB3aW5kd3hjQHNpbmEuY29tIDx3aW5kd3hjQHNpbmEuY29tPjoKPgo+Cj4gIGhpLGV2ZXJ5
b25lLiBpIG1lZXQgYSBxdWVzdGlvbiBhYm91dCBvcmcuIGkgdXNlIFZpc3VhbFN0dWRpbzIwMDUg
d2l0aAo+IHdpbmRvd3MgWFAgYW5kIGkgaGF2ZSBjb3B5IHNvbWUgb2dyIGRsbCBmaWxlIHRvIGJp
biBvZiBteSBhcHBsaWNhdGlvbgo+IHByb2plY3QuYnV0IHdoZW4gaSBydW4gbXkgcHJvamVjdCBh
bmQgdGhyb3cgYSBlcnJvciwgaXQgZmFpbHMgYXQgdGhlIGZpcnN0Cj4gbGluZTogT2dyLlJlZ2lz
dGVyQWxsKCkuIEVycm9yIGlzICJUaGUgdHlwZSBpbml0aWFsaXplciBmb3IgJ09TR2VvLk9HUi5P
Z3InCj4gdGhyZXcgYW4gZXhjZXB0aW9uLiIgIEkgZmluZCBzb21lb25lIG1lZXQgc2FtZSBxdWVz
dGlvbiBidXQgaGlzIG1ldGhvZAo+IGNhbm5vdCB3ZWxsIHJ1biBhbmQgaSBzdGlsbCBjYW5ub3Qg
ZmluZCB0aGUgcmVhc29uLiBUaGUgZm9sbG93aW5nIGlzIG15Cj4gY29kZXMgYW5kIGkgYWRkICJ1
c2luZyBPU0dlby5PR1I7Ii4KPgo+ICBwdWJsaWMgdm9pZCBHZXRHZW9tZXRyeShzdHJpbmcgc3Fs
dGV4dCkKPiAgICAgICAgIHsKPiAgICAgICAgICAgICB0cnkKPiAgICAgICAgICAgICB7Cj4gICAg
ICAgICAgICAgICAgIE9nci5SZWdpc3RlckFsbCgpOwo+ICAgICAgICAgICAgICAgIH0KPiAgICAg
ICAgICAgICBjYXRjaCAoRXhjZXB0aW9uIGUpCj4gICAgICAgICAgICAgeyBNZXNzYWdlQm94LlNo
b3coInJlZ2VzaXRlciBmYWlsb3I6IiArIGUuTWVzc2FnZSk7IH0KPiAgICAgICAgICAgICAvL09T
R2VvLk9HUi5HZW9tZXRyeSBteUdlb207Cj4gICAgICAgICAgICAgICAgdHJ5Cj4gICAgICAgICAg
ICAgICAgewo+ICAgICAgICAgICAgICAgICAgICBPU0dlby5PR1IuRGF0YVNvdXJjZSBjb25uID0g
T2dyLk9wZW4oIlBHOmhvc3Q9bG9jYXRhbAo+IGRibmFtZT1zdGRiIHVzZXI9c3R1c2VyIHBhc3N3
b3JkPTEyMyIsIDEpOwo+ICAgICAgICAgICAgICAgICAgICBPU0dlby5PR1IuTGF5ZXIgbXlMYXkg
PSBjb25uLkV4ZWN1dGVTUUwoc3FsdGV4dCwgbnVsbCwKPiAidHQiKTsKPiAgICAgICAgICAgICAg
ICAgICAgY29ubi5EaXNwb3NlKCk7Cj4gICAgICAgICAgICAgICAgfQo+ICAgICAgICAgICAgICAg
IGNhdGNoIChFeGNlcHRpb24gZSkKPiAgICAgICAgICAgICAgICB7IE1lc3NhZ2VCb3guU2hvdygi
b3BlbiBmaWxlIGZhaWxvcjoiICsgZS5NZXNzYWdlKTsKPiAgICAgICAgICAgICAgIH0KPgo+ICAg
ICAgICAgICAgICAgIH0KPgo+IHBsZWFzZSBoZWxwIG1lLgo+Cj4gdGhhbmsgeW91IQo+Cj4KPiB3
aW5kc25vdwo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICC73cbVtLq8vrTZz/rLzbTzwPGjrNaxvbXO5cen08W7
3cGswawoCj4gaHR0cDovL2QxLnNpbmEuY29tLmNuL3NpbmEvbGltZW5nMy9tYWlsX3podWl5dS8y
MDA4L21haWxfemh1aXl1XzIwMDgwNDE0Lmh0bWwKPiApCj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gINeisuHQ
wsDLMkfD4rfR08rP5KOoaHR0cDovL21haWwuc2luYS5jb20uY24vo6kKPiBfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwo+ICBnZGFsLWRldiBtYWlsaW5nIGxp
c3QKPiAgZ2RhbC1kZXZAbGlzdHMub3NnZW8ub3JnCj4gIGh0dHA6Ly9saXN0cy5vc2dlby5vcmcv
bWFpbG1hbi9saXN0aW5mby9nZGFsLWRldgo+Cg==
From xiaodong.zhang2 at und.edu  Sat Apr 19 12:15:10 2008
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Sat Apr 19 12:14:28 2008
Subject: [gdal-dev] gdal_rasterize does not burn the polygon]
Message-ID: <480A1A8E.20904@und.edu>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2003_Yield_03.zip
Type: application/octet-stream
Size: 4355 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080419/a8e356de/2003_Yield_03.obj
-------------- next part --------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Sat Apr 19 12:22:19 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 19 12:22:24 2008
Subject: [gdal-dev] question about ogr
In-Reply-To: <f3b73b7d0804190841x75be3fd0t887ef6425e54a6f1@mail.gmail.com>
References: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
	<f3b73b7d0804190841x75be3fd0t887ef6425e54a6f1@mail.gmail.com>
Message-ID: <480A1C3B.7040809@loskot.net>

Tamas Szekeres wrote:
> Could you post the entire error message here? My best guess at this
> point is that some of the required dll-s couldn't be loaded at
> run-time.

Tamas,

AFAIR, it should be also feasible to use Dependency Walker to test if 
all C# dependencies are findable. Am I correct?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From szekerest at gmail.com  Sat Apr 19 12:42:20 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Apr 19 12:42:22 2008
Subject: [gdal-dev] question about ogr
In-Reply-To: <480A1C3B.7040809@loskot.net>
References: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>
	<f3b73b7d0804190841x75be3fd0t887ef6425e54a6f1@mail.gmail.com>
	<480A1C3B.7040809@loskot.net>
Message-ID: <f3b73b7d0804190942k76002fdcv8172064a503ebe67@mail.gmail.com>

Mateusz,

The dependencies of the gdal dll cannot be identified very well using
the Walker, since many of the dependent libaries are linked at
run-time. I'd rather use a file monitoring tool (like SysInternals
filemon) to see the expected locations of the files. But in this
particular case I'm not totally sure if this is the problem without
having the complete exception message.


Best regards,

Tamas


2008/4/19, Mateusz Loskot <mateusz@loskot.net>:
> Tamas Szekeres wrote:
>
> > Could you post the entire error message here? My best guess at this
> > point is that some of the required dll-s couldn't be loaded at
> > run-time.
> >
>
>  Tamas,
>
>  AFAIR, it should be also feasible to use Dependency Walker to test if all
> C# dependencies are findable. Am I correct?
>
>  Cheers
>  --
>  Mateusz Loskot
>  http://mateusz.loskot.net
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mateusz at loskot.net  Sat Apr 19 13:14:07 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 19 13:14:20 2008
Subject: [gdal-dev] question about ogr
In-Reply-To: <f3b73b7d0804190942k76002fdcv8172064a503ebe67@mail.gmail.com>
References: <20080419133751.C4CD41EE939@mail3-145.sinamail.sina.com.cn>	
	<f3b73b7d0804190841x75be3fd0t887ef6425e54a6f1@mail.gmail.com>	
	<480A1C3B.7040809@loskot.net>
	<f3b73b7d0804190942k76002fdcv8172064a503ebe67@mail.gmail.com>
Message-ID: <480A285F.9000608@loskot.net>

Tamas Szekeres wrote:
> Mateusz,
> 
> The dependencies of the gdal dll cannot be identified very well using
> the Walker, since many of the dependent libaries are linked at
> run-time. I'd rather use a file monitoring tool (like SysInternals
> filemon) to see the expected locations of the files. But in this
> particular case I'm not totally sure if this is the problem without
> having the complete exception message.

Tamas,

Got it. Thanks.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From windwxc at sina.com  Sat Apr 19 20:43:26 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Sat Apr 19 20:43:31 2008
Subject: [gdal-dev] the type initiallizer for'OSGeo.OGR.ogr
Message-ID: <20080420004326.DC2461EE989@mail3-145.sinamail.sina.com.cn>

&nbsp;i am sorry for the trouble brought by my last letter .
my question is my programm throw a error"the type initiallizer for'OSGeo.OGR.ogr' threw an exception' when it run first line:Ogr.RegisterAll(); but i have add 'using OSGeo.ogr' at the begining of my code.
my code is:
&nbsp;public void GetGeometry(string sqltext)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogr.RegisterAll();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show( e.Message); }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //OSGeo.OGR.Geometry myGeom;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource conn = Ogr.Open("PG:host=locatal dbname=stdb user=stuser password=123", 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myLay = conn.ExecuteSQL(sqltext, null, "tt");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; conn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show( e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // conn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
my system is windowXP and application programm is VisualStudio.NET 2005 .I use C# .
wish this letter you can read and understand. thank you!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow

-------------------------------------------------------------------
( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080414.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080420/41f2a0ad/attachment-0001.html
From punk.kish at gmail.com  Sun Apr 20 08:51:02 2008
From: punk.kish at gmail.com (P Kishor)
Date: Sun Apr 20 08:51:06 2008
Subject: [gdal-dev] Re: [mapserver-users] Investigating OpenLayers ->
	MapServer (WMS) -> OGR -> db
In-Reply-To: <20080420124042.GB20097@metacarta.com>
References: <cdf6db500804181031o863b07fy8e8d9d4caf7ddd4b@mail.gmail.com>
	<20080418175600.GA20589@metacarta.com>
	<2a955f950804191359p51233ba7u5ba44c52e2f9134a@mail.gmail.com>
	<20080420124042.GB20097@metacarta.com>
Message-ID: <cdf6db500804200551r212620cdnc89ef0b97b77354@mail.gmail.com>

On 4/20/08, Christopher Schmidt <crschmidt@metacarta.com> wrote:
> On Sat, Apr 19, 2008 at 09:59:56PM +0100, Rob wrote:
>  > Or you could turn tracing on at the database side to see what SQL requests
>  > it receives?  I'm only familiar with oracle, but you could do this in Oracle
>  > using the 'alter system set sql_trace=true' command and checking the udump
>  > directoty for logs.
>  >
>
>
> As I said:
>
>  """
>  In general, this type of logging is done by the 'server' in DB
>  environments: Since SQLIte doesn't *have* a server,
>  """
>


Well, even if true, that answer is not particularly helpful to me,
unfortunately. Fwiw, SQLite *is* the server in the view of many.

My issue is simple -- OpenLayers is sending a CGI query (whether
asking mapserv to respond via CGI or via WMS, I am calling it a CGI
query as it is a query via http). That query string has a param called
BBOX (in the case of OpenLayers.Layer.WMS) or mapext (in the case of
OpenLayers.Layer.MapServer). All I am interested is in the bit of code
that MapServer runs via its OGR driver to extract the data. Since my
DATA string says "SELECT wkt_geometry FROM database", it seems to me
that MapServer is extracting all the rows for every tile that
OpenLayers is requesting. If that is true, that would be very
inefficient. If that is not true, what exactly is MapServer
extracting?

This must be specified somewhere in the code for MapServer/OGR
connection, because, I am assuming, OpenLayers doesn't directly query
the database -- after it hands the right query to MapServer, it simply
waits for whatever data it gets back.

--
Puneet Kishor
From warmerdam at pobox.com  Sun Apr 20 08:58:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 20 08:59:09 2008
Subject: [gdal-dev] Re: [mapserver-users] Investigating OpenLayers ->
	MapServer (WMS) -> OGR -> db
In-Reply-To: <cdf6db500804200551r212620cdnc89ef0b97b77354@mail.gmail.com>
References: <cdf6db500804181031o863b07fy8e8d9d4caf7ddd4b@mail.gmail.com>
	<20080418175600.GA20589@metacarta.com>
	<2a955f950804191359p51233ba7u5ba44c52e2f9134a@mail.gmail.com>
	<20080420124042.GB20097@metacarta.com>
	<cdf6db500804200551r212620cdnc89ef0b97b77354@mail.gmail.com>
Message-ID: <480B3DFD.7010901@pobox.com>

P Kishor wrote:
> My issue is simple -- OpenLayers is sending a CGI query (whether
> asking mapserv to respond via CGI or via WMS, I am calling it a CGI
> query as it is a query via http). That query string has a param called
> BBOX (in the case of OpenLayers.Layer.WMS) or mapext (in the case of
> OpenLayers.Layer.MapServer). All I am interested is in the bit of code
> that MapServer runs via its OGR driver to extract the data. Since my
> DATA string says "SELECT wkt_geometry FROM database", it seems to me
> that MapServer is extracting all the rows for every tile that
> OpenLayers is requesting. If that is true, that would be very
> inefficient. If that is not true, what exactly is MapServer
> extracting?

Puneet,

That is true.  OGR does not use any spatial indexing for sqlite at this
time.  It just reads all the rows and discards those that don't match the
current spatial query.

> This must be specified somewhere in the code for MapServer/OGR
> connection, because, I am assuming, OpenLayers doesn't directly query
> the database -- after it hands the right query to MapServer, it simply
> waits for whatever data it gets back.

Right, it is up to the SQLite OGR driver to manage construction of the SQL.

It would be nice if the OGR SQLite driver recognised when it was working
with a SpatialLite database, and knew how to load the spatiallite extension
and could then take advantage of whatever spatial indexing spatiallite offers.

In the meantime, sqlite + ogr + mapserver is not a suitable arrangement for
really large volumes of spatial data from which you want to full small spatial
regions frequently.  Us a format with spatial indexing that we can take
advantage of.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From punk.kish at gmail.com  Sun Apr 20 09:06:54 2008
From: punk.kish at gmail.com (P Kishor)
Date: Sun Apr 20 09:06:57 2008
Subject: [gdal-dev] Re: [mapserver-users] Investigating OpenLayers ->
	MapServer (WMS) -> OGR -> db
In-Reply-To: <480B3DFD.7010901@pobox.com>
References: <cdf6db500804181031o863b07fy8e8d9d4caf7ddd4b@mail.gmail.com>
	<20080418175600.GA20589@metacarta.com>
	<2a955f950804191359p51233ba7u5ba44c52e2f9134a@mail.gmail.com>
	<20080420124042.GB20097@metacarta.com>
	<cdf6db500804200551r212620cdnc89ef0b97b77354@mail.gmail.com>
	<480B3DFD.7010901@pobox.com>
Message-ID: <cdf6db500804200606w297425c3sd0b31edc237ca262@mail.gmail.com>

On 4/20/08, Frank Warmerdam <warmerdam@pobox.com> wrote:
> P Kishor wrote:
>
> > My issue is simple -- OpenLayers is sending a CGI query (whether
> > asking mapserv to respond via CGI or via WMS, I am calling it a CGI
> > query as it is a query via http). That query string has a param called
> > BBOX (in the case of OpenLayers.Layer.WMS) or mapext (in the case of
> > OpenLayers.Layer.MapServer). All I am interested is in the bit of code
> > that MapServer runs via its OGR driver to extract the data. Since my
> > DATA string says "SELECT wkt_geometry FROM database", it seems to me
> > that MapServer is extracting all the rows for every tile that
> > OpenLayers is requesting. If that is true, that would be very
> > inefficient. If that is not true, what exactly is MapServer
> > extracting?
> >
>
>  Puneet,
>
>  That is true.  OGR does not use any spatial indexing for sqlite at this
>  time.  It just reads all the rows and discards those that don't match the
>  current spatial query.
>
>
> > This must be specified somewhere in the code for MapServer/OGR
> > connection, because, I am assuming, OpenLayers doesn't directly query
> > the database -- after it hands the right query to MapServer, it simply
> > waits for whatever data it gets back.
> >
>
>  Right, it is up to the SQLite OGR driver to manage construction of the SQL.
>
>  It would be nice if the OGR SQLite driver recognised when it was working
>  with a SpatialLite database, and knew how to load the spatiallite extension
>  and could then take advantage of whatever spatial indexing spatiallite
> offers.
>
>  In the meantime, sqlite + ogr + mapserver is not a suitable arrangement for
>  really large volumes of spatial data from which you want to full small
> spatial
>  regions frequently.  Us a format with spatial indexing that we can take
>  advantage of.
>
>


Thanks Frank. That was precisely the answer I was looking for. Even
though it is disappointing in that it confirms that the OGR/SQLite
driver is no really throttling the queries based on the querystring
params, at least I won't be spending my time wondering about what
exactly was going on in that black box.

One suggestion and one question follow (assuming that you are the
person who either wrote the OGR/SQLite driver or are knowledgeable
enough about its details) --

Suggestion: would be nice for the OGR/<whatever> driver to log all its
queries to a log file. This would make life really easy for the
database types who may want to know more.

Question: would you (or someone on this list) happen to know which C
file in the source code actually implements the OGR/SQLite driver?

Puneet.
From warmerdam at pobox.com  Sun Apr 20 09:46:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 20 09:47:17 2008
Subject: [gdal-dev] Re: [mapserver-users] Investigating OpenLayers ->
	MapServer (WMS) -> OGR -> db
In-Reply-To: <cdf6db500804200606w297425c3sd0b31edc237ca262@mail.gmail.com>
References: <cdf6db500804181031o863b07fy8e8d9d4caf7ddd4b@mail.gmail.com>
	<20080418175600.GA20589@metacarta.com>
	<2a955f950804191359p51233ba7u5ba44c52e2f9134a@mail.gmail.com>
	<20080420124042.GB20097@metacarta.com>
	<cdf6db500804200551r212620cdnc89ef0b97b77354@mail.gmail.com>
	<480B3DFD.7010901@pobox.com>
	<cdf6db500804200606w297425c3sd0b31edc237ca262@mail.gmail.com>
Message-ID: <480B4950.4050601@pobox.com>

P Kishor wrote:
> Suggestion: would be nice for the OGR/<whatever> driver to log all its
> queries to a log file. This would make life really easy for the
> database types who may want to know more.

Puneet,

Many of the OGR RDBMS drivers will report SQL commands to the debug
output when debug output is enabled.  I notice the SQLite driver does
not do this.

> Question: would you (or someone on this list) happen to know which C
> file in the source code actually implements the OGR/SQLite driver?

gdal/ogr/ogrsf_frmts/sqlite/*.*

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Sun Apr 20 10:10:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 20 10:10:36 2008
Subject: [gdal-dev] gdal_rasterize does not burn the polygon]
In-Reply-To: <480A1A8E.20904@und.edu>
References: <480A1A8E.20904@und.edu>
Message-ID: <480B4EBD.4000806@pobox.com>

Xiaodong Zhang wrote:
> Hi there,
> 
> I tried to use "gdal_rasterize -burn 0 -l test test/test.shp 
> 2003_Yield_03.tif" to highlight the area covered by the polygon, but it 
> does not seem to work. The figure below shows the polygon is inside the 
> extension of the image. The problem is that the area inside the polygon 
> was not highlighted (or burned). Could anybody please tell me where I 
> did wrong. The test data is attached.
> 
> The image and the shape file are not in the same projection, but I'm not 
> sure if this could be the cause. As both of them showed nicely in ENVI. 
> I used ogr2ogr to convert a few points into a polygon using WKT format. 
> Do I need to some fancier thing to make polygons?

Xiaodong,

The problem is indeed the incompatible coordinate systems.  I copied
the gdalinfo report of the .tif projection to a file called target.prj
(these contents):

PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.2572235630016,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",45],
     PARAMETER["longitude_of_center",-100],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]

Then reprojected the vectors like this:

  ogr2ogr out.shp test -t_srs ./target.prj

Then did the rasterize:

  gdal_rasterize -burn 0 -l out out.shp 2003_Yield_03.tif

And the expected effect was achieved.

The lesson is that gdal_rasterize will not reproject your vector
input for you.  You need to do this yourself.  If you wish you could
file a ticket requesting that gdal_rasterize be improved, or at least
issue a warning in a case like this.

In the meantime, reproject your inputs manually.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Sun Apr 20 11:17:47 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 20 11:17:54 2008
Subject: [gdal-dev] GDAL code coverage
In-Reply-To: <200804132226.35749.even.rouault@mines-paris.org>
References: <200804132226.35749.even.rouault@mines-paris.org>
Message-ID: <200804201717.48974.even.rouault@mines-paris.org>

Hi,

I've improved the output of the coverage report so that it reflects the 
directory structure of the GDAL source tree, which makes it more usefull to 
identify the coverage for each driver.

The archive http://home.gdal.org/tmp/coverage.zip has been updated with the 
new result.

However, the way to achieve that is a bit hackish since I had to patch both 
GCOV utility (from GCC sources) and the geninfo perl script that is used by 
the lcov perl script.

The new procedure is then :

1) Rebuild your GDAL tree with the GCC coverage options :
	CC="gcc --coverage" CXX="g++ --coverage" ./configure 'your_usual_options'
	make clean
	make
2) Run the autotest suite. This will generate .gcda files in the object 
directories of GDAL tree
3) In $(GDAL_ROOT) : create a 'coverage' subdirectory
4) In $(GDAL_ROOT) : lcov -g 
~/gcc-4.1/gcc-4.1.2/host-i686-pc-linux-gnu/gcc/gcov --directory . --capture --output-file ./gdal.info

(Replace ~/gcc-4.1/gcc-4.1.2/host-i686-pc-linux-gnu/gcc/gcov by the full path 
to the patched version of gcov) 
The patched version of geninfo is supposed to be in /usr/bin too

5) In $(GDAL_ROOT) : genhtml -o ./coverage --num-spaces 2 ./coverage/gdal.info
6) Enjoy ./coverage/index.html

Below, the 2 patches.

even@pc-amd64:~/gcc-4.1/gcc-4.1.2$ diff -u gcc/gcov.c.ori gcc/gcov.c
--- gcc/gcov.c.ori      2006-01-21 19:29:08.000000000 +0100
+++ gcc/gcov.c  2008-04-19 15:17:58.000000000 +0200
@@ -538,6 +538,33 @@
          char *gcov_file_name = make_gcov_file_name (file_name, src->name);
          FILE *gcov_file = fopen (gcov_file_name, "w");

+
+
+            struct stat status;
+            if (stat(src->name, &status) != 0)
+            {
+                char* base_name = xstrdup(basename(src->name));
+                char command[256];
+                sprintf(command, "find 
PUT_HERE_THE_PATH_TO_THE_ROOT_DIRECTORY_OF_YOUR_GDAL_SOURCE_TREE -name \"%s\" 
> /tmp/gcov.tmp", base_name);
+                system(command);
+                FILE* f = fopen("/tmp/gcov.tmp", "rt");
+                char filename[256];
+                fgets(filename, 256, f);
+                fclose(f);
+                free(base_name);
+                if (strchr(filename, '\n'))
+                {
+                    *strchr(filename, '\n') = 0;
+                    fprintf(stderr, "%s -> %s\n", src->name, filename);
+                    free(src->name);
+                    src->name = xstrdup(filename);
+                }
+                else
+                {
+                    fprintf(stderr, "cannot find %s in %s\n", src->name, 
getcwd(filename, 256));
+                }
+            }
+
          if (gcov_file)
            {
              fnotice (stdout, "%s:creating '%s'\n",

---------------------------------------------------------------------------------------------------------------------------------------------------------------------

even@pc-amd64:/usr/bin$ diff -u /usr/bin/geninfo.backup  /usr/bin/geninfo
--- /usr/bin/geninfo.backup     2008-04-19 15:08:59.000000000 +0200
+++ /usr/bin/geninfo    2008-04-19 15:31:59.000000000 +0200
@@ -625,8 +625,8 @@
                        warn("WARNING: cannot find an entry for ".$gcov_file.
                             " in $graph_file_extension file, skipping ".
                             "file!\n");
-                       unlink($gcov_file);
-                       next;
+#unlink($gcov_file);
+#next;
                }

                # Read in contents of gcov file
@@ -642,17 +642,19 @@
                        next;
                }

-               if (scalar(@matches) == 1)
-               {
-                       # Just one match
-                       $source_filename = $matches[0];
-               }
-               else
-               {
-                       # Try to solve the ambiguity
-                       $source_filename = solve_ambiguous_match($gcov_file,
-                                               \@matches, \@gcov_content);
-               }
+#              if (scalar(@matches) == 1)
+#              {
+#                      # Just one match
+#                      $source_filename = $matches[0];
+#              }
+#              else
+#              {
+#                      # Try to solve the ambiguity
+#                      $source_filename = solve_ambiguous_match($gcov_file,
+#                                              \@matches, \@gcov_content);
+#              }
+
+                $source_filename = $source;

                # Remove processed file from list
                for ($index = scalar(@unprocessed) - 1; $index >= 0; $index--)




Le Sunday 13 April 2008 22:26:34 Even Rouault, vous avez ?crit?:
> Hi,
>
> I experimented a bit gcov on GDAL to see the code coverage of the python
> autotest suite.
>
> The result on my own GDAL tree (roughly latest trunk with some personnal
> changes) is available at : http://home.gdal.org/tmp/coverage.zip.
>
> The output is not as nice as I would have wished as it was tricky to make
> the coverage report generator find the source files.
>
> Here's the procedure I followed to generate the report :
>
> 1) Rebuild your GDAL tree with the GCC coverage options :
> 	CC="gcc --coverage" CXX="g++ --coverage" ./configure 'your_usual_options'
> 	make clean
> 	make
> 2) Run the autotest suite. This will generate .gcda files in the object
> directories of GDAL tree
> 3)  In $(GDAL_ROOT) : create a 'coverage' subdirectory
> 4)  In $(GDAL_ROOT) :
> 		lcov --directory . --capture --output-file ./coverage/gdal.info
>
> 	This will fail as lcov doesn't manage to find the source files. I had to
> add various symbolic links. The main steps are :
> 		cd $(GDAL_ROOT)/ogr/ogrsf_frmts/o
> 		for i in `find ../../.. -name "*.c*" | grep -v svn`; do ln -s $i; done
> 		for i in `find ../../.. -name "*.h*" | grep -v svn`; do ln -s $i; done
> 		ln -s ../geojson/jsonc .
> 		cd ..
> 		ln -s ili/iom
> 		cd $(GDAL_ROOT)/frmts/o
> 		for i in `find .. -name "*.c*" | grep -v svn`; do ln -s $i; done
> 		for i in `find .. -name "*.h*" | grep -v svn`; do ln -s $i; done
> 		ln -s ../pcraster/libcsf .
> 		ln -s ../gtiff/libtiff .
> 		ln -s ../gtiff/libgeotiff .
> 		ln -s ../grib/degrib18 .
>
> Try 'lcov --directory . --capture --output-file ./coverage/gdal.info' and
> add all necessary symbolic links until this finally works
>
> 5) In $(GDAL_ROOT) : genhtml -o ./coverage --num-spaces 2
> ./coverage/gdal.info
>
> 6) Enjoy ./coverage/index.html
>
> If someone knows how to tell lcov how to find the source files where they
> really are instead of creating all those symbolic links that would be great
> !
>
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From armin.burger at gmx.net  Sun Apr 20 15:47:38 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Sun Apr 20 15:47:50 2008
Subject: [gdal-dev] VRT image definition and LUT stretch
Message-ID: <480B9DDA.10302@gmx.net>

Hello
Mapserver has the nice functionality for a histogram stretch of images 
using the tag PROCESSING "SCALE=x,y". I would like know to predefine 
TIFF images as a Virtual Format (VRT) and define the parameters for the 
linear stretch in the VRT file instead of the layer definition via 
PROCESSING SCALE=...

Is this possible? There is the <LUT> tag but I have not understood how 
to convert from the PROCESSING definition to the required values there. 
What would I need for example in the LUT that corresponds to
   PROCESSING "SCALE_1=117,339"
for an image of type UInt16?

Thanks for any help

Armin
From ke7fxl at gmail.com  Sun Apr 20 15:50:41 2008
From: ke7fxl at gmail.com (Tod Haren)
Date: Sun Apr 20 15:50:47 2008
Subject: [gdal-dev] Connect to PostGIS with Python
Message-ID: <6f5b2c4e0804201250m3da8ef18mef0ee48d0fe2b8a@mail.gmail.com>

I've installed gdalwin32-1.5 and the PostGIS plugin, but can't connect
to a remote PostGIS database using python.  I've tried installing the
python bindings with the windows installer from the Python CheeseShop
and through easy_install.  I can open shapefiles with OGR and rasters
with GDAL just fine.  The PostgreSQL driver isn't getting registered
for Python.  I've checked that gdalwin32-1.5\bin is in my PATH and
gdalwin32-1.5\data is in GDAL_DATA.  What else could be missing?
Using ogrinfo opens the PostGIS database just fine, so my guess is
that there is something I've missed in the install for python.  Any
ideas?  Is there some documentation that I'm missing?  Google, etc
hasn't been much help.

Using a seperate install of FWTools 2.02 I can open the database with
Python using the same connection string.

Thanks,

Tod
From mslinn at mslinn.com  Sun Apr 20 15:52:17 2008
From: mslinn at mslinn.com (Michael Slinn)
Date: Sun Apr 20 15:52:19 2008
Subject: [gdal-dev] Outline of world land masses
In-Reply-To: <480B9DDA.10302@gmx.net>
References: <480B9DDA.10302@gmx.net>
Message-ID: <480B9EF1.90502@mslinn.com>

Does anyone have an outline of the world's land masses, preferably in a 
neutral vector format like KML or GPX?  Polylines with Lat/long 
coordinates would be preferred.

Mike
From hobu.inc at gmail.com  Sun Apr 20 16:29:17 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun Apr 20 16:29:21 2008
Subject: [gdal-dev] Connect to PostGIS with Python
In-Reply-To: <6f5b2c4e0804201250m3da8ef18mef0ee48d0fe2b8a@mail.gmail.com>
References: <6f5b2c4e0804201250m3da8ef18mef0ee48d0fe2b8a@mail.gmail.com>
Message-ID: <AAB026E7-9183-43AB-94DE-A44D9FF5C654@gmail.com>


On Apr 20, 2008, at 2:50 PM, Tod Haren wrote:
> I've installed gdalwin32-1.5 and the PostGIS plugin, but can't connect
> to a remote PostGIS database using python.  I've tried installing the
> python bindings with the windows installer from the Python CheeseShop
> and through easy_install.  I can open shapefiles with OGR and rasters
> with GDAL just fine.  The PostgreSQL driver isn't getting registered
> for Python.  I've checked that gdalwin32-1.5\bin is in my PATH and
> gdalwin32-1.5\data is in GDAL_DATA.  What else could be missing?
> Using ogrinfo opens the PostGIS database just fine, so my guess is
> that there is something I've missed in the install for python.  Any
> ideas?  Is there some documentation that I'm missing?  Google, etc
> hasn't been much help.
>
> Using a seperate install of FWTools 2.02 I can open the database with
> Python using the same connection string.
>
> Thanks,
>
> Tod

Tod,

The PostGIS driver is not enabled by default and must be switched on  
manually by downloading the PostGIS plugin from http://download.osgeo.org/gdal/win32/1.5/gdalwin32pg150.zip 
  and unzipping it and then setting GDAL_DRIVER_PATH to the directory  
where it exists.

The FAQ has a small note about this that might provide a little more  
detail.

HTH,

Howard
From szekerest at gmail.com  Sun Apr 20 16:45:25 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Apr 20 16:45:27 2008
Subject: [gdal-dev] VRT image definition and LUT stretch
In-Reply-To: <480B9DDA.10302@gmx.net>
References: <480B9DDA.10302@gmx.net>
Message-ID: <f3b73b7d0804201345i7eaa8dc3qc460cb2f8e147c89@mail.gmail.com>

Armin,

As far as I know mapserver transforms the scale min/max values to the
0-255 range of the values. So by using the VRT ComplexSource the
following 2 options can possibly be used:

Option 1:

  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Red</ColorInterp>
    <ComplexSource>
      <LUT>117:0,339:255</LUT>
      <SourceFilename>src.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>

Option 2:

<VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Red</ColorInterp>
    <ComplexSource>
      <ScaleOffset>-134.919</ScaleOffset>
      <ScaleRatio>1.153</ScaleRatio>
      <SourceFilename>src.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </ComplexSource>
  </VRTRasterBand>

Where:

ScaleRatio = 256/(scaleMax-scaleMin)
ScaleOffset = -ScaleRatio*scaleMin

Best regards,

Tamas



2008/4/20, Armin Burger <armin.burger@gmx.net>:
> Hello
>  Mapserver has the nice functionality for a histogram stretch of images
> using the tag PROCESSING "SCALE=x,y". I would like know to predefine TIFF
> images as a Virtual Format (VRT) and define the parameters for the linear
> stretch in the VRT file instead of the layer definition via PROCESSING
> SCALE=...
>
>  Is this possible? There is the <LUT> tag but I have not understood how to
> convert from the PROCESSING definition to the required values there. What
> would I need for example in the LUT that corresponds to
>   PROCESSING "SCALE_1=117,339"
>  for an image of type UInt16?
>
>  Thanks for any help
>
>  Armin
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ke7fxl at gmail.com  Sun Apr 20 16:52:51 2008
From: ke7fxl at gmail.com (Tod Haren)
Date: Sun Apr 20 16:52:54 2008
Subject: [gdal-dev] Connect to PostGIS with Python
In-Reply-To: <AAB026E7-9183-43AB-94DE-A44D9FF5C654@gmail.com>
References: <6f5b2c4e0804201250m3da8ef18mef0ee48d0fe2b8a@mail.gmail.com>
	<AAB026E7-9183-43AB-94DE-A44D9FF5C654@gmail.com>
Message-ID: <6f5b2c4e0804201352m5e56dd0mf444a8b1687f23e4@mail.gmail.com>

Setting GDAL_DRIVER_PATH to the plugins directory did the trick.

Thanks a lot.

Tod

On Sun, Apr 20, 2008 at 1:29 PM, Howard Butler <hobu.inc@gmail.com> wrote:
>
>
>  On Apr 20, 2008, at 2:50 PM, Tod Haren wrote:
>
> > I've installed gdalwin32-1.5 and the PostGIS plugin, but can't connect
> > to a remote PostGIS database using python.  I've tried installing the
> > python bindings with the windows installer from the Python CheeseShop
> > and through easy_install.  I can open shapefiles with OGR and rasters
> > with GDAL just fine.  The PostgreSQL driver isn't getting registered
> > for Python.  I've checked that gdalwin32-1.5\bin is in my PATH and
> > gdalwin32-1.5\data is in GDAL_DATA.  What else could be missing?
> > Using ogrinfo opens the PostGIS database just fine, so my guess is
> > that there is something I've missed in the install for python.  Any
> > ideas?  Is there some documentation that I'm missing?  Google, etc
> > hasn't been much help.
> >
> > Using a seperate install of FWTools 2.02 I can open the database with
> > Python using the same connection string.
> >
> > Thanks,
> >
> > Tod
> >
>
>  Tod,
>
>  The PostGIS driver is not enabled by default and must be switched on
> manually by downloading the PostGIS plugin from
> http://download.osgeo.org/gdal/win32/1.5/gdalwin32pg150.zip and unzipping it
> and then setting GDAL_DRIVER_PATH to the directory where it exists.
>
>  The FAQ has a small note about this that might provide a little more
> detail.
>
>  HTH,
>
>  Howard
>
From armin.burger at gmx.net  Sun Apr 20 17:03:32 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Sun Apr 20 17:03:49 2008
Subject: [gdal-dev] VRT image definition and LUT stretch
In-Reply-To: <f3b73b7d0804201345i7eaa8dc3qc460cb2f8e147c89@mail.gmail.com>
References: <480B9DDA.10302@gmx.net>
	<f3b73b7d0804201345i7eaa8dc3qc460cb2f8e147c89@mail.gmail.com>
Message-ID: <480BAFA4.6020901@gmx.net>

Tamas

thanks a lot for the quick help. The first option was the one I had 
tried before and it had no effect (so I thought the range definition has 
probably to be different). But the second option using ScaleRatio/Offset 
works well.

Armin

On 20/04/2008 22:45, Tamas Szekeres wrote:
> Armin,
> 
> As far as I know mapserver transforms the scale min/max values to the
> 0-255 range of the values. So by using the VRT ComplexSource the
> following 2 options can possibly be used:
> 
> Option 1:
> 
>   <VRTRasterBand dataType="Byte" band="1">
>     <ColorInterp>Red</ColorInterp>
>     <ComplexSource>
>       <LUT>117:0,339:255</LUT>
>       <SourceFilename>src.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>     </ComplexSource>
>   </VRTRasterBand>
> 
> Option 2:
> 
> <VRTRasterBand dataType="Byte" band="1">
>     <ColorInterp>Red</ColorInterp>
>     <ComplexSource>
>       <ScaleOffset>-134.919</ScaleOffset>
>       <ScaleRatio>1.153</ScaleRatio>
>       <SourceFilename>src.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>     </ComplexSource>
>   </VRTRasterBand>
> 
> Where:
> 
> ScaleRatio = 256/(scaleMax-scaleMin)
> ScaleOffset = -ScaleRatio*scaleMin
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2008/4/20, Armin Burger <armin.burger@gmx.net>:
>> Hello
>>  Mapserver has the nice functionality for a histogram stretch of images
>> using the tag PROCESSING "SCALE=x,y". I would like know to predefine TIFF
>> images as a Virtual Format (VRT) and define the parameters for the linear
>> stretch in the VRT file instead of the layer definition via PROCESSING
>> SCALE=...
>>
>>  Is this possible? There is the <LUT> tag but I have not understood how to
>> convert from the PROCESSING definition to the required values there. What
>> would I need for example in the LUT that corresponds to
>>   PROCESSING "SCALE_1=117,339"
>>  for an image of type UInt16?
>>
>>  Thanks for any help
>>
>>  Armin
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
From jluis at ualg.pt  Sun Apr 20 17:17:48 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Apr 20 17:17:52 2008
Subject: [gdal-dev] Outline of world land masses
In-Reply-To: <480B9EF1.90502@mslinn.com>
References: <480B9DDA.10302@gmx.net> <480B9EF1.90502@mslinn.com>
Message-ID: <480BB2FC.8000804@ualg.pt>

Michael Slinn wrote:
> Does anyone have an outline of the world's land masses, preferably in 
> a neutral vector format like KML or GPX?  Polylines with Lat/long 
> coordinates would be preferred.
>

Do you mean the coastlines as provided by GMT, or the lower resolution 
DCW (www.maproom.psu.edu/dcw)?

Joaquim Luis
From szekerest at gmail.com  Sun Apr 20 17:22:10 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Apr 20 17:22:12 2008
Subject: [gdal-dev] VRT image definition and LUT stretch
In-Reply-To: <480BAFA4.6020901@gmx.net>
References: <480B9DDA.10302@gmx.net>
	<f3b73b7d0804201345i7eaa8dc3qc460cb2f8e147c89@mail.gmail.com>
	<480BAFA4.6020901@gmx.net>
Message-ID: <f3b73b7d0804201422v8d88b75of74945618ab72a2e@mail.gmail.com>

Armin,

The LUT capability in the VRT driver have been added a couple of weeks
ago, so you'll have to checkout and compile the latest SVN trunk to
get it work.

Best regards,

Tamas



2008/4/20, Armin Burger <armin.burger@gmx.net>:
> Tamas
>
>  thanks a lot for the quick help. The first option was the one I had tried
> before and it had no effect (so I thought the range definition has probably
> to be different). But the second option using ScaleRatio/Offset works well.
>
>  Armin
>
>
>  On 20/04/2008 22:45, Tamas Szekeres wrote:
>
> > Armin,
> >
> > As far as I know mapserver transforms the scale min/max values to the
> > 0-255 range of the values. So by using the VRT ComplexSource the
> > following 2 options can possibly be used:
> >
> > Option 1:
> >
> >  <VRTRasterBand dataType="Byte" band="1">
> >    <ColorInterp>Red</ColorInterp>
> >    <ComplexSource>
> >      <LUT>117:0,339:255</LUT>
> >      <SourceFilename>src.tif</SourceFilename>
> >      <SourceBand>1</SourceBand>
> >    </ComplexSource>
> >  </VRTRasterBand>
> >
> > Option 2:
> >
> > <VRTRasterBand dataType="Byte" band="1">
> >    <ColorInterp>Red</ColorInterp>
> >    <ComplexSource>
> >      <ScaleOffset>-134.919</ScaleOffset>
> >      <ScaleRatio>1.153</ScaleRatio>
> >      <SourceFilename>src.tif</SourceFilename>
> >      <SourceBand>1</SourceBand>
> >    </ComplexSource>
> >  </VRTRasterBand>
> >
> > Where:
> >
> > ScaleRatio = 256/(scaleMax-scaleMin)
> > ScaleOffset = -ScaleRatio*scaleMin
> >
> > Best regards,
> >
> > Tamas
> >
> >
> >
> > 2008/4/20, Armin Burger <armin.burger@gmx.net>:
> >
> > > Hello
> > >  Mapserver has the nice functionality for a histogram stretch of images
> > > using the tag PROCESSING "SCALE=x,y". I would like know to predefine
> TIFF
> > > images as a Virtual Format (VRT) and define the parameters for the
> linear
> > > stretch in the VRT file instead of the layer definition via PROCESSING
> > > SCALE=...
> > >
> > >  Is this possible? There is the <LUT> tag but I have not understood how
> to
> > > convert from the PROCESSING definition to the required values there.
> What
> > > would I need for example in the LUT that corresponds to
> > >  PROCESSING "SCALE_1=117,339"
> > >  for an image of type UInt16?
> > >
> > >  Thanks for any help
> > >
> > >  Armin
> > >  _______________________________________________
> > >  gdal-dev mailing list
> > >  gdal-dev@lists.osgeo.org
> > >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > >
> >
> >
>
From mslinn at mslinn.com  Sun Apr 20 18:37:47 2008
From: mslinn at mslinn.com (Michael Slinn)
Date: Sun Apr 20 18:37:49 2008
Subject: [gdal-dev] Outline of world land masses
In-Reply-To: <480BB2FC.8000804@ualg.pt>
References: <480B9DDA.10302@gmx.net> <480B9EF1.90502@mslinn.com>
	<480BB2FC.8000804@ualg.pt>
Message-ID: <480BC5BB.4090807@mslinn.com>

Joaquim,

Thanks for letting me know about DCW.  I need coastal outlines for an 
open source nautical charting program that I am developing.  Low 
resolution is all that I need, so users can get a sense of what the 
world looks like when they zoom all the way out.  Political boundaries 
are not required, but I would not erase them if they came along for free.

The DCW layers that seem interesting are:
 - Political/Ocean
 - Ocean Features

For my immediate need, the above is overkill, but in the future it might 
well be useful.

I looked through the links and found ONC boundaries 
(http://geoengine.nga.mil/geospatial/SW_TOOLS/NIMAMUSE/webinter/onc_legend.html) 
which looks great.  I could not find VPVIEWER but I found vpfviewer 
(http://www.ivtools.org/vhclmaps/vpfviewer.html) which seems similar.

Mike
From gregor at hostgis.com  Sun Apr 20 19:23:38 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Sun Apr 20 19:23:39 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these NOAA
	NRCs
Message-ID: <480BD07A.5000002@hostgis.com>

I asked the GDAL list about this some weeks back, but we only explored a 
few ideas and then forgot about it for a few days.

URL   http://ms2.geowake.com/
These were KAP files downloaded from NOAA's Raster Nautical Charts 
(NRCs), converted to TIFF with gdalwarp.

The image quality there stiiiinks! A second map (no longer available) 
made of the raw images sliced into PNGs and not run via MapServer, looks 
very nice. You can make out text in 1 zoom, the high-level maps are less 
grainy, the quality once you zoom in is better...

Any thoughts on why it'd be so ugly? The images almost look as if 
they've been downsized, don't they?

Factors which we've tried and seem to have eliminated:

* The KAPs themselves aren't damaged, and GDAL isn't creating crummy 
TIFFs. I can gdalwarp them to TIFF or PNG, and back and forth, and the 
output image looks great -- if I download it and view it on my PC.

* Reprojection: If I request a WMS image in a browser, using plain 
latlong (the KAPs are georef'd in latlong) the image quality doesn't 
improve. Also, if I project the KAP to EPSG:54004 and request there, it 
makes no difference. That seems to eliminate reprojection as a likely cause.

* Output image format. Requesting PNG, JPEG, or GIF from MapServer WMS 
makes no difference. I can share the IMAGEFORMAT blocks if requested.

Items still not entirely eliminated:

* Resampling: If I add PROCESSING "RESAMPLE=BILINEAR" it makes a small 
difference in the quality, but not a lot. Same goes for bicubic as well: 
a visible difference, but not significant. The other two didn't make any 
difference at all.

* Color depth: gdalwarp on the KAPs generates 8-bit palleted TIFFs. That 
may not be the best for quality.


Any thoughts?

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From JARED.RUBIN at saic.com  Sun Apr 20 21:14:51 2008
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Sun Apr 20 21:15:26 2008
Subject: [gdal-dev] gdal file size stat test GDALOpen
Message-ID: <200804201914.51503.rubinj@nemesis.tucson.saic.com>

Dear support group,
  Some of the drivers within GDAL (e.g. NITF) return success with the GDALOpen 
and GDALOpenShared calls event hough not all of the bytes of an image are on 
disk.  Is there a test to make sure that an input image is completely on disk 
before GDALOpen comes back true (some stat test?)

For example, if I am ftping a NITF image from one location to another and 
running gdalinfo on the image, gdalinfo will come back with success 
eventhough not all of the bytes are really there.

thanks
Jared
From mchapman at texelinc.com  Sun Apr 20 21:39:48 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Sun Apr 20 21:44:57 2008
Subject: [gdal-dev] gdal file size stat test GDALOpen
In-Reply-To: <200804201914.51503.rubinj@nemesis.tucson.saic.com>
References: <200804201914.51503.rubinj@nemesis.tucson.saic.com>
Message-ID: <670582801-1208742231-cardhu_decombobulator_blackberry.rim.net-883272172-@bxe144.bisx.prod.on.blackberry>

Jared,

This is a tricky issue.  First of all as I understand it most drivers only read parts for the header and there for can succeed before the entire file is written.  This is really an issue outside of gdal.  

I dealt with this issue once and here is what I came up with.

1. Checking to see if the file is locked doesn't work if the ftp is asynchronous.  

2. I made a service that recursively monitored the ftp directory.

3. When a new file was detected I would check the file size, wait twenty seconds and then check the size again.  If the size was different I would wait another twenty and check again until it was the same.  Once it was the same I would process the file. 

4. Don't delete/move the original file until the process is complete in case the process fails. If it does fail it will get picked up again later and processed again.

Other that you would have to do a rasterio() call on the full source rect I imagine to unsure the entire image was there. If you do this though I would set the dest rect to be something small so you don't run out of memory.

If you think of a better way to do it please let me know your solution.

Martin


Sent via BlackBerry by AT&T

-----Original Message-----
From: Jared Rubin <JARED.RUBIN@saic.com>

Date: Sun, 20 Apr 2008 19:14:51 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal file size stat test GDALOpen


Dear support group,
  Some of the drivers within GDAL (e.g. NITF) return success with the GDALOpen 
and GDALOpenShared calls event hough not all of the bytes of an image are on 
disk.  Is there a test to make sure that an input image is completely on disk 
before GDALOpen comes back true (some stat test?)

For example, if I am ftping a NITF image from one location to another and 
running gdalinfo on the image, gdalinfo will come back with success 
eventhough not all of the bytes are really there.

thanks
Jared
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sun Apr 20 22:03:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 20 22:03:22 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480BD07A.5000002@hostgis.com>
References: <480BD07A.5000002@hostgis.com>
Message-ID: <480BF5D9.4000801@pobox.com>

Gregor Mosheh wrote:
> I asked the GDAL list about this some weeks back, but we only explored a 
> few ideas and then forgot about it for a few days.
...
> Any thoughts?

Gregor,

If you can prepare a simple map+data demonstrating the problem (ideally
filed as a ticket) I would be willing to dig a bit deeper to see if something
is being done wrong in the code.

But it is really hard to comment intelligently without getting my hands on
all the bits.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From schut at sarvision.nl  Mon Apr 21 04:19:54 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Apr 21 04:21:48 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480BF5D9.4000801@pobox.com>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
Message-ID: <480C4E2A.1010606@sarvision.nl>

Frank Warmerdam wrote:
> Gregor Mosheh wrote:

 >> * Color depth: gdalwarp on the KAPs generates 8-bit palleted TIFFs. 
 >> That may not be the best for quality.

^^This point might be your main issue.
As Frank mentioned it's a bit hard for us to guess about the source of 
your problem without actually seeing those images, but my first guess 
would be: don't use palette images, use rgb or rgba. You can control 
this with a mapserver output file format parameter, ('OUTPUTTYPE'? don't 
know anymore exactly what it's called, but it should state that you want 
something like PNG24 (24bit png's) or the like, not png8 or gif or 
whatever image that uses colortables/palettes internally). Otherwise, 
mapserver will semi-intelligently (read: bluntly) map your nice rgb 
input colors to some more-or-less fitting palette, thus greatly reducing 
output image quality (but also reducing file size, thus image loading 
times). If your output map is tiled (which it usually is if you use an 
interface like OpenLayers), mapserver will even use different palettes 
for each tile, which will make the overall output image look even 
stranger. So I'd say: first make sure you have mapserver to output rgb 
images, like jpg or 24bit png's. If image quality is still crap then, 
come back and call again :-)

Good luck!
Vincent.
From sschantz at bfs.de  Mon Apr 21 07:58:19 2008
From: sschantz at bfs.de (shortyII)
Date: Mon Apr 21 07:58:21 2008
Subject: [Gdal-dev] Change EXTENT of a shapefile
Message-ID: <16807475.post@talk.nabble.com>


Hi,
i am trying to change the EXTENT parameters of a shapefile with ogr2ogr:

ogr2ogr -update -spat 3500000 5300000 3540000 5400000 rastervorlage.shp
rastervorlage.shp
FAILED: Layer rastervorlage already exists, and -append not specified.
        Consider using -append, or -overwrite.
ERROR 1: Terminating translation prematurely after failed
translation of layer rastervorlage

but it doesn't work. (-append and -overwrite also don't work)
Is it in principal possible to change the extent and how can i do it?
Thank you!

Stefan 
-- 
View this message in context: http://www.nabble.com/Change-EXTENT-of-a-shapefile-tp16807475p16807475.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Mon Apr 21 09:46:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 21 09:46:52 2008
Subject: [Gdal-dev] Change EXTENT of a shapefile
In-Reply-To: <16807475.post@talk.nabble.com>
References: <16807475.post@talk.nabble.com>
Message-ID: <480C9AB5.9010001@pobox.com>

shortyII wrote:
> Hi,
> i am trying to change the EXTENT parameters of a shapefile with ogr2ogr:
> 
> ogr2ogr -update -spat 3500000 5300000 3540000 5400000 rastervorlage.shp
> rastervorlage.shp
> FAILED: Layer rastervorlage already exists, and -append not specified.
>         Consider using -append, or -overwrite.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer rastervorlage
> 
> but it doesn't work. (-append and -overwrite also don't work)
> Is it in principal possible to change the extent and how can i do it?
> Thank you!

Stefan,

You cannot subset the features within a shapefile with ogr2ogr, you need
to copy the subset to a new shapefile.

So instead use:

  ogr2ogr -spat 3500000 5300000 3540000 5400000 out.shp rastervorlage.shp

Once complete you can delete the original, and rename the new to the
original if you want.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From gis at vanbooth.com  Mon Apr 21 09:51:11 2008
From: gis at vanbooth.com (Rob)
Date: Mon Apr 21 09:51:14 2008
Subject: [gdal-dev] Problematic TIFs
Message-ID: <2a955f950804210651k1e96703aye245e32756a16578@mail.gmail.com>

I'm currently supporting a system that has some performance issues.  It
seems like the overviewed rasters have been replaced by some non over-viewed
rasters, so I want to try and add some overviews to improve performance.
However, disk space is at a premium, so I am trying to do it in a space
efficient way as well.

The TIFs at the moment average around 5-7Mb each.  I currently have a total
of 100Gb of files.  I'm using them in a system powered by MapServer, and
whilst they all display, the performance is poor.

A GDALINFO report gives the following kind of information -

>gdalinfo TQ00.TIF
Driver: GTiff/GeoTIFF
Size is 4000, 4000
Coordinate System is `'
Metadata:
  TIFFTAG_XRESOLUTION=254
  TIFFTAG_YRESOLUTION=254
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 4000.0)
Upper Right ( 4000.0,    0.0)
Lower Right ( 4000.0, 4000.0)
Center      ( 2000.0, 2000.0)
Band 1 Block=4000x8 Type=Byte, ColorInterp=Red
Band 2 Block=4000x8 Type=Byte, ColorInterp=Green
Band 3 Block=4000x8 Type=Byte, ColorInterp=Blue
Band 4 Block=4000x8 Type=Byte, ColorInterp=Alpha

If I try and add an overview to these files (file copied to maintain the
original), I get screens of error messages

gdaladdo TQ00ov.TIF 2 4 8 16
0.ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
ERROR 1: MissingRequired:TQ00ov.TIF: TIFF directory is missing required
"Colormap" field
etc..

If I try and translate the original first, I get the following error
messages

gdal_translate -ot Byte -of GTiff -co "TILED=YES" TQ00tif.TIF TQ00tiled.TIF
Input file size is 4000, 4000
0...10...20...30...ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at
scanline 3072
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3072
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3328
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3328
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3584
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3584
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3840
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3840
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 0
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 0
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 256
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 256
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 512
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 512
ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 768
etc...

I've got this to work on one or two of the files, but the resultant TIF is
now averaging 90Mb, rather than 7Mb, and thats without adding overviews on
top of that.

An example tile and worldfile can be found here
http://sites.google.com/a/vanbooth.com/transfer/Home

I'm currently using GDAL 1.2.0.0 (released 2004/03/01) on AIX.

Has anybody got any idea of how I can convert these rasters to something
useable and performant?

MTIA

Rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080421/582cb02a/attachment-0001.html
From gis at vanbooth.com  Mon Apr 21 10:50:11 2008
From: gis at vanbooth.com (Rob)
Date: Mon Apr 21 10:50:14 2008
Subject: [gdal-dev] Problematic TIFs
In-Reply-To: <0CCC83CC4130499D8BC6C1B5468087F8@Yoda>
References: <2a955f950804210651k1e96703aye245e32756a16578@mail.gmail.com>
	<0CCC83CC4130499D8BC6C1B5468087F8@Yoda>
Message-ID: <2a955f950804210750i21d2b33em32ddf5bcb044f879@mail.gmail.com>

Thanks for the reply Cristian - out of curiousity, how big was that
overviewed raster?

On 21/04/2008, Balint Cristian <cristian.balint@oradea.rdsnet.ro> wrote:
>
>  Hello Rob,
>
>
> >gdalinfo TQ00.TIF
> Band 1 Block=4000x8 Type=Byte, ColorInterp=Red
> Band 2 Block=4000x8 Type=Byte, ColorInterp=Green
> Band 3 Block=4000x8 Type=Byte, ColorInterp=Blue
> Band 4 Block=4000x8 Type=Byte, ColorInterp=Alpha
>
> I'm currently using GDAL 1.2.0.0 (released 2004/03/01) on AIX.
>
>
> I think you use a very old gdal, these days gdal hitted version 1.5.1
> mainstream.
>
> I guess older gdal cannot handle custom bit-depth, look at my gdalinfo
> using 1.5.1
> its says we have an unusual 4bit depth:
>
> $ gdalinfo.exe TQ00.tiff
> Driver: GTiff/GeoTIFF
> Files: TQ00.tiff
> Size is 4000, 4000
> Coordinate System is `'
> Metadata:
>   TIFFTAG_XRESOLUTION=254
>   TIFFTAG_YRESOLUTION=254
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 4000.0)
> Upper Right ( 4000.0,    0.0)
> Lower Right ( 4000.0, 4000.0)
> Center      ( 2000.0, 2000.0)
> Band 1 Block=4000x8 Type=Byte, ColorInterp=Palette
>   Overviews: 2000x2000, 1000x1000, 500x500, 250x250
>   Image Structure Metadata:
>     NBITS=4
>   Color Table (RGB with 16 entries)
>     0: 4,4,4,255
>     1: 16,16,16,255
>     2: 45,45,45,255
>     3: 78,78,78,255
>     4: 111,111,111,255
>     5: 140,140,140,255
>     6: 156,156,156,255
>     7: 173,173,173,255
>     8: 181,181,181,255
>     9: 197,197,197,255
>    10: 214,214,214,255
>    11: 222,222,222,255
>    12: 231,231,231,255
>    13: 239,239,239,255
>    14: 247,247,247,255
>    15: 255,255,255,255
> I had no problem running gdaladdo over your sample:
>
>  gdaladdo TQ00.tiff 2 4 8 16
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>   I think you should try build for yourself a newer gdal (i suggest 1.5.1
> latest), i am pretty sure that is doable fine on AIX,
> it should compile and work at all,  i've used it to pack it on
> linux-powerpc but never tryed for for AIX platform.
>
>
> ~cristian
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080421/f825c749/attachment.html
From geep999 at yahoo.co.uk  Mon Apr 21 10:52:57 2008
From: geep999 at yahoo.co.uk (geep999)
Date: Mon Apr 21 10:52:58 2008
Subject: [Gdal-dev] /usr/local/share/gdal - OK in 1.4.1, gone from 1.5.1 ?!
Message-ID: <16807964.post@talk.nabble.com>


Hi,

On Slackware 12.0 Linux.
"./configure make make install" of gdal-1.4.1 puts data into
/usr/local/share/gdal
With gdal-1.5.1 all the data is put into /usr/local/share

I can see that configure.in has the comment:
"dnl
---------------------------------------------------------------------------
dnl If datadir is set to @prefix@/share, the modify it to be 
dnl @prefix@/share/gdal.  I wish we could default this.
dnl
---------------------------------------------------------------------------"

Is the different behaviour of 1.5.1 compared with 1.4.1 a bug or a feature ?
What ./configure option should I give to 1.5.1 to have all data put into
/usr/local/share/gdal ?

Cheers,

Peter

-- 
View this message in context: http://www.nabble.com/-usr-local-share-gdal---OK-in-1.4.1%2C-gone-from-1.5.1--%21-tp16807964p16807964.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jeffmckenna at gmail.com  Mon Apr 21 11:03:21 2008
From: jeffmckenna at gmail.com (Jeff McKenna)
Date: Mon Apr 21 11:03:25 2008
Subject: [gdal-dev] Problematic TIFs
In-Reply-To: <2a955f950804210651k1e96703aye245e32756a16578@mail.gmail.com>
References: <2a955f950804210651k1e96703aye245e32756a16578@mail.gmail.com>
Message-ID: <F3F60AFC-CB7F-437A-814C-B12C1E76F74E@gmail.com>

With respect to your 'write error at scanline' messages, I have seen  
this error on tifs with older gdal versions...but not with newer  
versions (1.5.x).

-jeff




>
> If I try and translate the original first, I get the following error  
> messages
>
> gdal_translate -ot Byte -of GTiff -co "TILED=YES" TQ00tif.TIF  
> TQ00tiled.TIF
> Input file size is 4000, 4000
> 0...10...20...30...ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write  
> error at scanline 3072
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3072
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3328
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3328
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3584
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3584
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3840
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 3840
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 0
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 0
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 256
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 256
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 512
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 512
> ERROR 1: TIFFAppendToStrip:TQ00tiled.TIF: Write error at scanline 768
> etc...
>
>
From Chris.Barker at noaa.gov  Mon Apr 21 12:40:01 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Apr 21 12:35:17 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these NOAA
	NRCs
In-Reply-To: <480C4E2A.1010606@sarvision.nl>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl>
Message-ID: <480CC361.4030507@noaa.gov>

Vincent Schut wrote:
> but my first guess 
> would be: don't use palette images, use rgb or rgba.

Yes, I think this is the issue too. If you re-scale or warp or 
interpolate palleted images, GDAL uses nearest neighbor interpolation, 
which gets pretty ugly with images like the RNCs.

> You can control 
> this with a mapserver output file format parameter,

I don't know what your rendering stack looks like, but it may not be 
that simple. What you need to do is make sure that the RNCs are 
converted to RBG BEFORE they are altered in any other way -- then all 
warping, re-scaling, etc can be done with a better interpolation scheme. 
I suspect you'll need to convert them, store them on disk that way, so 
that what MapServer is seeing is the RGB versions.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From gregor at hostgis.com  Mon Apr 21 14:21:07 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Mon Apr 21 14:21:11 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480C4E2A.1010606@sarvision.nl>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl>
Message-ID: <480CDB13.8070605@hostgis.com>

Vincent Schut wrote:
>  >> * Color depth: gdalwarp on the KAPs generates 8-bit palleted TIFFs. 
>  >> That may not be the best for quality.
> ^^This point might be your main issue.

Right, but HOW do I change it? Converting KAP to TIFF is done with 
gdalwarp. Is there a command-line flag I give gdalwarp to specify 
conversion to RGB? I'm handy with ImageMagick, but that doesn't read 
KAPs, so a solution within GDAL would be nice.

The output, I love AGG/PNG and RGBA; that's my formula for nice output.


-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From JohnB.Visser at ga-asi.com  Mon Apr 21 15:18:17 2008
From: JohnB.Visser at ga-asi.com (Visser, John B.)
Date: Mon Apr 21 15:18:44 2008
Subject: [gdal-dev] Make not using nmake.opt options?
In-Reply-To: <20080421160007.A8761E017D8@lists.osgeo.org>
References: <20080421160007.A8761E017D8@lists.osgeo.org>
Message-ID: <5209E3CBD360A5439026631196FC975601934825@RSG-EVS1.rsg.ga-asi.com>

I'm building GDAL 1.5.1 on Visual Studio .NET 2008 (Visual Studio 9.0).
I've changed the nmake.opt file to output the files to a particular
location and to build a release version rather than debug, but the files
are not going where I specified in the nmake.opt file.  This makes me
concerned that nmake might not be using my other specified options.

Any thoughts?

Thanks,
John Visser
From cjanssen at iavo-rs.com  Mon Apr 21 19:58:18 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon Apr 21 20:28:23 2008
Subject: [gdal-dev] Libtiff advantages?
Message-ID: <20080421235818.2a6d7ced@smtp.iavo-rs.com>

I noticed in the make files for GDAL that you could optionally compile in libTIFF to be used versus the builtin tiff handler code. Can anyone explain what the advantages of using the library over the builtin code, for instance are there performance benefits. Just curios, thanks.  
   
Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080421/d0456f3d/attachment.html
From warmerdam at pobox.com  Mon Apr 21 21:02:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 21 21:02:57 2008
Subject: [gdal-dev] Libtiff advantages?
In-Reply-To: <20080421235818.2a6d7ced@smtp.iavo-rs.com>
References: <20080421235818.2a6d7ced@smtp.iavo-rs.com>
Message-ID: <480D392C.4030507@pobox.com>

Christiaan Janssen wrote:
> I noticed in the make files for GDAL that you could optionally compile 
> in libTIFF to be used versus the builtin tiff handler code. Can anyone 
> explain what the advantages of using the library over the builtin code, 
> for instance are there performance benefits. Just curios, thanks.

Christiaan,

The built-in copy of libtiff is present to make building GDAL easier out of
the box.  But folks often like to build against an external libtiff for a
few reasons:

1) If libtiff is being used by other parts of the application or software
suite it avoids duplication.

2) If libtiff is being used by other parts of the application, then on
unix systems there can be problems with linking in two different versions
of the same library (this isn't so much a problem on win32).

3) It makes it easier to upgrade libtiff by itself.

There are no meaningful performance differences.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Apr 21 23:38:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 21 23:39:05 2008
Subject: [gdal-dev] Make not using nmake.opt options?
In-Reply-To: <5209E3CBD360A5439026631196FC975601934825@RSG-EVS1.rsg.ga-asi.com>
References: <20080421160007.A8761E017D8@lists.osgeo.org>
	<5209E3CBD360A5439026631196FC975601934825@RSG-EVS1.rsg.ga-asi.com>
Message-ID: <480D5DC8.5030807@pobox.com>

Visser, John B. wrote:
> I'm building GDAL 1.5.1 on Visual Studio .NET 2008 (Visual Studio 9.0).
> I've changed the nmake.opt file to output the files to a particular
> location and to build a release version rather than debug, but the files
> are not going where I specified in the nmake.opt file.  This makes me
> concerned that nmake might not be using my other specified options.
> 
> Any thoughts?

John,

You haven't been very specific about what you changed, so I'm just guessing
that you modified GDAL_HOME (and by implication BINDIR, etc).  These are
*install* directories.  The build creates dlls and .exes in the source tree.
You need to do "nmake /f makefile.vc install" to copy stuff to the install
directories.

Or I may be guessing wrong, in which case you need to be more specific.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From karthik3186 at gmail.com  Tue Apr 22 02:21:18 2008
From: karthik3186 at gmail.com (Karthik Krishnamurthy)
Date: Tue Apr 22 02:21:20 2008
Subject: [gdal-dev] SDTS Elevation Values
Message-ID: <ff5a67bf0804212321s1add32e8r232d6c82c257c6fe@mail.gmail.com>

      I am trying to read SDTS Elevation values from XXXCEL0.DDF and have
been successful enought (thanks to GDAL and
http://www.3dartist.com/WP/sdts/sdtsnotes.htm/ ). There are a bunch of other
DDF files in the fileset XREF, IREF and many more each describing some
details about the transfer. I tried to find information about them online,
but not much was available. Where can I find these information. Also, I am
new to this domain, so things like 30m and 10m DEM files or UTM looks jargon
to me. Are there resources explaining these terms in simple english ?

-- 
Karthik
check my blog @ http://talk-more.blogspot.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080422/9a6031a7/attachment.html
From neteler at osgeo.org  Tue Apr 22 04:10:15 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Apr 22 04:10:19 2008
Subject: [gdal-dev] Outline of world land masses
In-Reply-To: <480BC5BB.4090807@mslinn.com>
References: <480B9DDA.10302@gmx.net> <480B9EF1.90502@mslinn.com>
	<480BB2FC.8000804@ualg.pt> <480BC5BB.4090807@mslinn.com>
Message-ID: <86782b610804220110u8e5f8ccs67752c1626a3d1c8@mail.gmail.com>

Michael,

you may check GSHHS (from Dortmund FTP as SHAPE files):
 ftp://ftp.ihg.uni-duisburg.de/GIS/GISData/GSHHS/

Markus

On Mon, Apr 21, 2008 at 12:37 AM, Michael Slinn <mslinn@mslinn.com> wrote:
> Joaquim,
>
>  Thanks for letting me know about DCW.  I need coastal outlines for an open
> source nautical charting program that I am developing.  Low resolution is
> all that I need, so users can get a sense of what the world looks like when
> they zoom all the way out.  Political boundaries are not required, but I
> would not erase them if they came along for free.
...
From schut at sarvision.nl  Tue Apr 22 04:56:48 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Apr 22 04:58:56 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480CDB13.8070605@hostgis.com>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl> <480CDB13.8070605@hostgis.com>
Message-ID: <480DA850.8010506@sarvision.nl>

Gregor Mosheh wrote:
> Vincent Schut wrote:
>>  >> * Color depth: gdalwarp on the KAPs generates 8-bit palleted 
>> TIFFs.  >> That may not be the best for quality.
>> ^^This point might be your main issue.
> 
> Right, but HOW do I change it? Converting KAP to TIFF is done with 
> gdalwarp. Is there a command-line flag I give gdalwarp to specify 
> conversion to RGB? I'm handy with ImageMagick, but that doesn't read 
> KAPs, so a solution within GDAL would be nice.

I think you can use gdal's pct2rgb.py utility for that. Probably it will 
ingest any file that gdal supports, so if gdalwarp supports KAP, pct2rgb 
  will also read those. pct2rgb.py comes with standard gdal, but as it 
is python I guess you must have python bindings enabled when building gdal.
See http://www.gdal.org/pct2rgb.html
From windwxc at sina.com  Tue Apr 22 05:55:43 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Tue Apr 22 05:55:49 2008
Subject: [gdal-dev] how use OGR c++ header file in C# 
Message-ID: <20080422095543.14B691EE97C@mail3-145.sinamail.sina.com.cn>

&nbsp;hi, every one. I am writing a project with C# and want use OGR to read postgis and then change data to shape, Now i find i need some functions included in C++header file, such as "ogrsf_frmts.h".I want to know if i must change c++ file to dll file and then add it to my project?&nbsp;&nbsp;Ifind some header file&nbsp;often quotes&nbsp;other header files&nbsp;&nbsp;so this way is very complex&nbsp;.&nbsp;Now I want to&nbsp;know if there are another method i can use.&nbsp;
thank you!
best regard!
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow


-------------------------------------------------------------------
" "( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080421.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080422/a0c4d750/attachment-0001.html
From mateusz at loskot.net  Tue Apr 22 07:05:19 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 22 07:05:26 2008
Subject: [gdal-dev] how use OGR c++ header file in C#
In-Reply-To: <20080422095543.14B691EE97C@mail3-145.sinamail.sina.com.cn>
References: <20080422095543.14B691EE97C@mail3-145.sinamail.sina.com.cn>
Message-ID: <480DC66F.9000207@loskot.net>

windwxc@sina.com wrote:
> &nbsp;hi, every one. I am writing a project with C# and want use OGR
> to read postgis and then change data to shape, Now i find i need some
> functions included in C++header file, such as "ogrsf_frmts.h".I want
> to know if i must change c++ file to dll file and then add it to my
> project?&nbsp;&nbsp;Ifind some header file&nbsp;often
> quotes&nbsp;other header files&nbsp;&nbsp;so this way is very
> complex&nbsp;.&nbsp;Now I want to&nbsp;know if there are another
> method i can use.&nbsp; thank you! best regard! 
> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> windsnow


This is a general question about using native code with managed code based
on .NET Framework and C# language. It's not directly related to GDAL/OGR.
So, I'd suggest you to post your question to MSDN Forums

http://forums.microsoft.com/msdn/default.aspx?siteid=1

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From warmerdam at pobox.com  Tue Apr 22 09:52:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 22 09:53:05 2008
Subject: [gdal-dev] Summer of Code Projects
Message-ID: <480DED9C.5060701@pobox.com>

Folks,

Two projects have been selected for GDAL for the Google Summer of Code:

     * SoCTMSDriver: Read/Write driver for TMS tiles
           o Student: V?clav Klus?k
           o Mentor: Frank Warmerdam

     * SoCGDAL2Tiles: GDAL2Tiles Improvements
           o Student: Klokan Petr P?idal
           o Mentor: Howard Butler

   http://trac.osgeo.org/gdal/wiki/SoCProjects

Welcome to the students!

Unfortunately Olga's OSM project did not quite make the cut due to a large
number of projects being involved in SoC under the OSGeo umbrella this year.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Tue Apr 22 10:03:10 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 22 10:03:15 2008
Subject: [gdal-dev] how use OGR c++ header file in C#
In-Reply-To: <20080422095543.14B691EE97C@mail3-145.sinamail.sina.com.cn>
References: <20080422095543.14B691EE97C@mail3-145.sinamail.sina.com.cn>
Message-ID: <f3b73b7d0804220703g5eb70729qf0b46ed4da44b578@mail.gmail.com>

SGksCgpJZiB5b3UnZCBsaWtlIHRvIGNyZWF0ZSBhIGN1c3RvbSBDIy9DKysgaW50ZXJmYWNlIGZv
ciBPR1IgdGhlIHlvdSdsbApoYXZlIGEgbG90IG9mIHN1ZmZlcmluZyBhbmQgcGFpbi4gQXQgbGVh
c3QgeW91IHByb2JhYmx5IGhhdmUgdG8gd3JpdGUKY3VzdG9tIG1hcmhhbGluZyBjb2RlIGZvciB2
YXJpb3VzIGtpbmQgb2YgdGhlIGRhdGEgdHlwZXMgYW5kIHNvbHZlCnNvbWUgdHlwaWNhbCBwcm9i
bGVtcyBsaWtlIHRoZSBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb24gaXNzdWVzIHJlbGF0ZWQKdG8g
dGhlIC5ORVQgcnVudGltZSBhbmQgdGhlIHBsYXRmb3JtIGludm9rZXMuCgpJIHRoaW5rIHlvdSdk
IGJldHRlciB0dXJuIHRvIHRoZSBleGlzdGluZyBDIyBpbnRlcmZhY2Ugb2YgT0dSIGFuZCB0cnkK
dG8gZ2V0IGl0IHdvcmsuIFlvdSBjYW4gdGFrZSBhIGxvb2sgYXQgb3V0IHdvcmtpbmcgZXhhbXBs
ZXMgdG8gc2VlIGhvdwp0aGUgdGhpbmdzIGFyZSB3b3JraW5nOgoKaHR0cDovL3RyYWMub3NnZW8u
b3JnL2dkYWwvYnJvd3Nlci90cnVuay9nZGFsL3N3aWcvY3NoYXJwL2FwcHMvb2dyaW5mby5jcwpo
dHRwOi8vdHJhYy5vc2dlby5vcmcvZ2RhbC9icm93c2VyL3RydW5rL2dkYWwvc3dpZy9jc2hhcnAv
YXBwcy9PR1JHRU9TLmNzCmh0dHA6Ly90cmFjLm9zZ2VvLm9yZy9nZGFsL2Jyb3dzZXIvdHJ1bmsv
Z2RhbC9zd2lnL2NzaGFycC9hcHBzL09TUlRyYW5zZm9ybS5jcwoKCkluIGNhc2UgeW91IGZpbmQg
YSBtaXNzaW5nIGZlYXR1cmUgaW4gdGhlIGludGVyZmFjZSBpdCdzIGJldHRlciB0byBhZGQKaXQg
aGVyZSwgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBpbnRlcmZhY2UgZnJvbSBzY3JhdGNoLgoK
QmVzdCByZWdhcmRzLAoKVGFtYXMKCgoKMjAwOC80LzIyLCB3aW5kd3hjQHNpbmEuY29tIDx3aW5k
d3hjQHNpbmEuY29tPjoKPgo+Cj4gIGhpLCBldmVyeSBvbmUuIEkgYW0gd3JpdGluZyBhIHByb2pl
Y3Qgd2l0aCBDIyBhbmQgd2FudCB1c2UgT0dSIHRvIHJlYWQKPiBwb3N0Z2lzIGFuZCB0aGVuIGNo
YW5nZSBkYXRhIHRvIHNoYXBlLCBOb3cgaSBmaW5kIGkgbmVlZCBzb21lIGZ1bmN0aW9ucwo+IGlu
Y2x1ZGVkIGluIEMrK2hlYWRlciBmaWxlLCBzdWNoIGFzICJvZ3JzZl9mcm10cy5oIi5JIHdhbnQg
dG8ga25vdyBpZiBpIG11c3QKPiBjaGFuZ2UgYysrIGZpbGUgdG8gZGxsIGZpbGUgYW5kIHRoZW4g
YWRkIGl0IHRvIG15IHByb2plY3Q/ICBJZmluZCBzb21lCj4gaGVhZGVyIGZpbGUgb2Z0ZW4gcXVv
dGVzIG90aGVyIGhlYWRlciBmaWxlcyAgc28gdGhpcyB3YXkgaXMgdmVyeSBjb21wbGV4IC4KPiBO
b3cgSSB3YW50IHRvIGtub3cgaWYgdGhlcmUgYXJlIGFub3RoZXIgbWV0aG9kIGkgY2FuIHVzZS4K
Pgo+IHRoYW5rIHlvdSEKPgo+IGJlc3QgcmVnYXJkIQo+Cj4KPgo+IHdpbmRzbm93Cj4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0KPiAgz+vN5rXDvquyyqO/v+zAtLvdxtUiztK1xLXnxNQgztK1xM7ozKgiKAo+IGh0
dHA6Ly9kMS5zaW5hLmNvbS5jbi9zaW5hL2xpbWVuZzMvbWFpbF96aHVpeXUvMjAwOC9tYWlsX3po
dWl5dV8yMDA4MDQyMS5odG1sCj4gKQo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ICDXorLh0MLAyzJHw+K30dPK
z+SjqGh0dHA6Ly9tYWlsLnNpbmEuY29tLmNuL6OpCj4gX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KPiAgZ2RhbC1kZXYgbWFpbGluZyBsaXN0Cj4gIGdkYWwt
ZGV2QGxpc3RzLm9zZ2VvLm9yZwo+ICBodHRwOi8vbGlzdHMub3NnZW8ub3JnL21haWxtYW4vbGlz
dGluZm8vZ2RhbC1kZXYKPgo=
From Martin.Spott at mgras.net  Tue Apr 22 10:09:23 2008
From: Martin.Spott at mgras.net (Martin Spott)
Date: Tue Apr 22 10:19:29 2008
Subject: [gdal-dev] Outline of world land masses
References: <480B9DDA.10302@gmx.net> <480B9EF1.90502@mslinn.com>
	<86782b610804220110u8e5f8ccs67752c1626a3d1c8@mail.gmail.com>
Message-ID: <fukrij$oeq$1@osprey.mgras.de>

"Markus Neteler" wrote:

> you may check GSHHS (from Dortmund FTP as SHAPE files):
>  ftp://ftp.ihg.uni-duisburg.de/GIS/GISData/GSHHS/

BTW, these Shapefiles had been created as part of the FlightGear Custom
Scenery project effort (http://www.custom-scenery.org/ as well as
http://mapserver.flightgear.org/).

We also have the NIMA VMap0 landmass layer available as Shapefile here:

  ftp://ftp.ihg.uni-duisburg.de/FlightGear/TGShapes/v0_landmass.tar.bz2

So, if you're desperately looking for some (coarse) landuse data
(available at the same location) that exactly matches the coastline,
then VMap0 is for you. The GSHHS coastline is much more accurate, and
having closed polygons might be an advantage, but for its accuracy it
does not match the VMap0 landuse,

	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From Volker.Wichmann at uibk.ac.at  Tue Apr 22 10:10:32 2008
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Tue Apr 22 10:24:29 2008
Subject: [gdal-dev] problems with gdal_merge.py
Message-ID: <480DF1D8.6050700@uibk.ac.at>

Hi,

I'm checking gdal_merge.py for generating subsets and mosaics from one 
or more input rasters. I found the following problem using esri ascii 
grids as input:

gdal_merge.py -o clip.tif -ul_lr 672898.75 5125166.25 674323.75 
5123911.25 -v dtm_utm01111.ascii

Filename: dtm_utm01111.ascii
File Size: 1281x1121x1
Pixel Size: 2.500000 x -2.500000
UL:(672198.750000,5125601.250000)   LR:(675401.250000,5122798.750000)
Copy 280,174,571,503 to 0,0,570,502.


using the same file in geotiff format I get:

Filename: utm01111.tif
File Size: 1281x1121x1
Pixel Size: 2.500000 x -2.500000
UL:(672200.000000,5125600.000000)   LR:(675402.500000,5122797.500000)
Copy 280,174,570,502 to 0,0,570,502.


In case of the ascii, the file is resampled (and thus the values in the 
output subset differ from the original). This doesn't happen with a 
geotiff as input (see the "Copy" lines above).
It's also strange, that in both cases the reported UL and LR don't match 
the input coordinates and the extent of the output files (the latter 
match the coordinates passed with -ul_lr).

I'm still using GDAL 1.4.2.0 but haven't found any major changes in trac 
regarding gdal_merge.py. It would be nice if somebody could try to 
reproduce this with GDAL 1.5 to see if any of the underlying functions 
have changed.

Thanks,
Volker

From Shawn.Gong at drdc-rddc.gc.ca  Tue Apr 22 12:16:18 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Apr 22 12:16:25 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120020@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,
I got make errors on gdalhttp.cpp:209. The following is the last part of
the make log.
Platform: RedHat Enterprise Linux version 4, and gcc compiler version
3.2.3.

Any help is appreciated.
thanks,
Shawn


make[2]: Entering directory `/home/sgong/dev18/gdal-1.5.1/frmts/adrg'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include  -I../iso8211 -c -o ../o/adrgdataset.o
adrgdataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -I../iso8211 -c adrgdataset.cpp  -fPIC
-DPIC -o ../o/.libs/adrgdataset.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -I../iso8211 -c adrgdataset.cpp -o
../o/adrgdataset.o >/dev/null 2>&1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/adrg'
make -C coasp install-obj
make[2]: Entering directory `/home/sgong/dev18/gdal-1.5.1/frmts/coasp'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/coasp_dataset.o
coasp_dataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c coasp_dataset.cpp  -fPIC -DPIC -o
../o/.libs/coasp_dataset.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c coasp_dataset.cpp -o
../o/coasp_dataset.o >/dev/null 2>&1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/coasp'
make -C tsx install-obj
make[2]: Entering directory `/home/sgong/dev18/gdal-1.5.1/frmts/tsx'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include  -c -o ../o/tsxdataset.o tsxdataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c tsxdataset.cpp  -fPIC -DPIC -o
../o/.libs/tsxdataset.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c tsxdataset.cpp -o ../o/tsxdataset.o
>/dev/null 2>&1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/tsx'
make -C terragen install-obj
make[2]: Entering directory
`/home/sgong/dev18/gdal-1.5.1/frmts/terragen'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include  -c -o ../o/terragendataset.o
terragendataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c terragendataset.cpp  -fPIC -DPIC -o
../o/.libs/terragendataset.o
terragendataset.cpp: In member function `bool
TerragenDataset::write_header()':
terragendataset.cpp:626: warning: `int bh' might be used uninitialized
in this
   function
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c terragendataset.cpp -o
../o/terragendataset.o >/dev/null 2>&1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/terragen'
make -C wcs install-obj
make[2]: Entering directory `/home/sgong/dev18/gdal-1.5.1/frmts/wcs'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/wcsdataset.o
wcsdataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c wcsdataset.cpp  -fPIC -DPIC -o
../o/.libs/wcsdataset.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c wcsdataset.cpp -o ../o/wcsdataset.o
>/dev/null 2>&1
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/httpdriver.o
httpdriver.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c httpdriver.cpp  -fPIC -DPIC -o
../o/.libs/httpdriver.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c httpdriver.cpp -o ../o/httpdriver.o
>/dev/null 2>&1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/wcs'
make -C wms install-obj
make[2]: Entering directory `/home/sgong/dev18/gdal-1.5.1/frmts/wms'
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/cache.o cache.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c cache.cpp  -fPIC -DPIC -o
../o/.libs/cache.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c cache.cpp -o ../o/cache.o >/dev/null
2>&1
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/dataset.o dataset.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c dataset.cpp  -fPIC -DPIC -o
../o/.libs/dataset.o
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c dataset.cpp -o ../o/dataset.o
>/dev/null 2>&1
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include   -c -o ../o/gdalhttp.o gdalhttp.cpp
libtool: compile:  g++ -g -O2 -Wall -I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c gdalhttp.cpp  -fPIC -DPIC -o
../o/.libs/gdalhttp.o
gdalhttp.cpp: In function `CPLErr CPLHTTPFetchMulti(CPLHTTPRequest*,
int, const
   char* const*)':
gdalhttp.cpp:209: `CURLINFO_RESPONSE_CODE' undeclared (first use this
function)
gdalhttp.cpp:209: (Each undeclared identifier is reported only once for
each
   function it appears in.)
make[2]: *** [../o/gdalhttp.o] Error 1
make[2]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts/wms'
make[1]: *** [wms-install-obj] Error 2
make[1]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/frmts'
make: *** [frmts-target] Error 2

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080422/794d8e95/attachment-0001.html
From warmerdam at pobox.com  Tue Apr 22 13:11:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 22 13:11:34 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120020@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120020@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <480E1C29.8050204@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I got make errors on gdalhttp.cpp:209. The following is the last part of 
> the make log.
> 
> Platform: RedHat Enterprise Linux version 4, and gcc compiler version 3.2.3.
> 
> Any help is appreciated.

Shawn,

I would guess you have an older version of libcurl that lacks a particular
capability GDAL now uses.  Either upgrade libcurl or drop it from your build
if you don't need it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Shawn.Gong at drdc-rddc.gc.ca  Tue Apr 22 13:37:02 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Apr 22 13:37:05 2008
Subject: [gdal-dev] gdal 1.5.1 make error on Solaris 9
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,
I am trying to make gdal 1.5.1 on Solaris 9.
make went fine, but I got error message when "make install". please see
the following message, which is the last part of the make install log.

does it mean that I have an old (incompatible) libz?  I use zlib-1.2.1

thanks,
Shawn


--------------------------------------
gmake -C rec
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/rec'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/rec'
gmake -C s57
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/s57'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/s57'
gmake -C sdts
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/sdts'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/sdts'
gmake -C shape
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/shape'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/shape'
gmake -C tiger
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/tiger'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/tiger'
gmake -C vrt
gmake[3]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/vrt'
gmake[3]: Nothing to be done for `default'.
gmake[3]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts/vrt'
gmake[2]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr/ogrsf_frmts'
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr'
gmake libgdal.la
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1'
gmake[1]: `libgdal.la' is up to date.
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1'
(cd pymod; gmake)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/pymod'
GNUmakefile:40: warning: overriding commands for target `_gdalmodule.la'
GNUmakefile:34: warning: ignoring old commands for target
`_gdalmodule.la'
gmake[1]: Nothing to be done for `default'.
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/pymod'
(cd apps; gmake)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/apps'
gmake[1]: Nothing to be done for `default'.
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/apps'
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -d
/home/sgong/devel/openev_gdal.151/dist/lib
for f in libgdal.la ; do /bin/sh
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/libtool --mode=install
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c $f
/home/sgong/devel/openev_gdal.151/dist/lib ; done
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/libgdal.so.1.12.1
/home/sgong/devel/openev_gdal.151/dist/lib/libgdal.so.1.12.1
libtool: install: (cd /home/sgong/devel/openev_gdal.151/dist/lib && { ln
-s -f libgdal.so.1.12.1 libgdal.so.1 || { rm -f libgdal.so.1 && ln -s
libgdal.so.1.12.1 libgdal.so.1; }; })
ln: cannot create libgdal.so.1: File exists
libtool: install: (cd /home/sgong/devel/openev_gdal.151/dist/lib && { ln
-s -f libgdal.so.1.12.1 libgdal.so || { rm -f libgdal.so && ln -s
libgdal.so.1.12.1 libgdal.so; }; })
ln: cannot create libgdal.so: File exists
libtool: install: chmod +x
/home/sgong/devel/openev_gdal.151/dist/lib/libgdal.so.1.12.1
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/libgdal.lai /home/sgong/devel/openev_gdal.151/dist/lib/libgdal.la
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/libgdal.a /home/sgong/devel/openev_gdal.151/dist/lib/libgdal.a
libtool: install: chmod 644
/home/sgong/devel/openev_gdal.151/dist/lib/libgdal.a
libtool: install: ranlib
/home/sgong/devel/openev_gdal.151/dist/lib/libgdal.a
----------------------------------------------------------------------
Libraries have been installed in:
   /home/sgong/devel/openev_gdal.151/dist/lib

If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the `-LLIBDIR'
flag during linking and do at least one of the following:
   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable
     during execution
   - use the `-RLIBDIR' linker flag

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
----------------------------------------------------------------------
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -d
/home/sgong/devel/openev_gdal.151/dist/bin
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -d
/home/sgong/devel/openev_gdal.151/dist/share
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -d
/home/sgong/devel/openev_gdal.151/dist/include
(cd port; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/port'
for f in *.h ; do
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644 $f
/home/sgong/devel/openev_gdal.151/dist/include ; done
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/port'
(cd gcore; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/gcore'
for f in *.h ; do
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644 $f
/home/sgong/devel/openev_gdal.151/dist/include ; done
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/gcore'
(cd frmts; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts'
gmake -C vrt install
gmake[2]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/vrt'
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644
vrtdataset.h /home/sgong/devel/openev_gdal.151/dist/include
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644
gdal_vrt.h /home/sgong/devel/openev_gdal.151/dist/include
gmake[2]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/vrt'
gmake -C mem install
gmake[2]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/mem'
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644
memdataset.h /home/sgong/devel/openev_gdal.151/dist/include
gmake[2]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/mem'
gmake -C raw install
gmake[2]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/raw'
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644
rawdataset.h /home/sgong/devel/openev_gdal.151/dist/include
gmake[2]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts/raw'
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/frmts'
(cd alg; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/alg'
for f in *.h ; do
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m 0644 $f
/home/sgong/devel/openev_gdal.151/dist/include ; done
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/alg'
(cd ogr; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr'
for f in ogr_core.h ogr_feature.h ogr_geometry.h ogr_p.h
ogr_spatialref.h ogr_srs_api.h ogrsf_frmts/ogrsf_frmts.h
ogr_featurestyle.h ogr_api.h ; \
    do /home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c -m
0644 $f /home/sgong/devel/openev_gdal.151/dist/include ; \
done
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/ogr'
(cd apps; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/apps'
for f in gdalinfo gdal_translate gdaladdo gdalwarp nearblack gdalmanage
gdalenhance gdaltransform gdal_contour gdaltindex gdal_rasterize
gdal_grid ogrinfo ogr2ogr ogrtindex ; do /bin/sh
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/libtool --mode=install
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c $f
/home/sgong/devel/openev_gdal.151/dist/bin ; done
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdalinfo /home/sgong/devel/openev_gdal.151/dist/bin/gdalinfo
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdal_translate
/home/sgong/devel/openev_gdal.151/dist/bin/gdal_translate
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdaladdo /home/sgong/devel/openev_gdal.151/dist/bin/gdaladdo
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdalwarp /home/sgong/devel/openev_gdal.151/dist/bin/gdalwarp
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/nearblack /home/sgong/devel/openev_gdal.151/dist/bin/nearblack
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdalmanage /home/sgong/devel/openev_gdal.151/dist/bin/gdalmanage
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdalenhance /home/sgong/devel/openev_gdal.151/dist/bin/gdalenhance
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdaltransform
/home/sgong/devel/openev_gdal.151/dist/bin/gdaltransform
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdal_contour
/home/sgong/devel/openev_gdal.151/dist/bin/gdal_contour
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdaltindex /home/sgong/devel/openev_gdal.151/dist/bin/gdaltindex
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdal_rasterize
/home/sgong/devel/openev_gdal.151/dist/bin/gdal_rasterize
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/gdal_grid /home/sgong/devel/openev_gdal.151/dist/bin/gdal_grid
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c .libs/ogrinfo
/home/sgong/devel/openev_gdal.151/dist/bin/ogrinfo
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c .libs/ogr2ogr
/home/sgong/devel/openev_gdal.151/dist/bin/ogr2ogr
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
.libs/ogrtindex /home/sgong/devel/openev_gdal.151/dist/bin/ogrtindex
/bin/sh /home/sgong/devel/openev_gdal.151/gdal-1.5.1/libtool
--mode=install /home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh
-c gdal-config-inst
/home/sgong/devel/openev_gdal.151/dist/bin/gdal-config
libtool: install:
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -c
gdal-config-inst /home/sgong/devel/openev_gdal.151/dist/bin/gdal-config
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/apps'
(cd pymod; gmake install)
gmake[1]: Entering directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/pymod'
GNUmakefile:40: warning: overriding commands for target `_gdalmodule.la'
GNUmakefile:34: warning: ignoring old commands for target
`_gdalmodule.la'
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh -d
/home/sgong/devel/openev_gdal.151/dist/lib/python2.3/site-packages
/bin/sh /home/sgong/devel/openev_gdal.151/gdal-1.5.1/libtool
--mode=install /home/sgong/devel/openev_gdal.151/gdal-1.5.1/install-sh
-c _gdalmodule.la
/home/sgong/devel/openev_gdal.151/dist/lib/python2.3/site-packages
libtool: install: warning: relinking `_gdalmodule.la'
libtool: install: (cd
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/pymod; /bin/bash
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/libtool  --mode=relink g++
gdal_wrap.lo numpydataset.lo gdalnumeric.lo
/home/sgong/devel/openev_gdal.151/gdal-1.5.1/libgdal.la -o
_gdalmodule.la -rpath
/home/sgong/devel/openev_gdal.151/dist/lib/python2.3/site-packages
-no-undefined -avoid-version -module )
libtool: relink: warning:
`/home/sgong/devel/openev_gdal.151/dist/lib/libhdf5.la' seems to be
moved
libtool: relink: g++ -shared -nostdlib
/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/crti.o
/usr/ccs/lib/values-Xa.o
/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/crtbegin.o
.libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o   -Wl,-R
-Wl,/home/sgong/devel/openev_gdal.151/dist/lib -Wl,-R -Wl,/usr/local/lib
-Wl,-R -Wl,/rde/software/solaris9/local/lib -Wl,-R -Wl,/usr/lib -Wl,-R
-Wl,/usr/openwin/lib -Wl,-R -Wl,/usr/local/ssl/lib -Wl,-R
-Wl,/usr/local/BerkeleyDB.4.2/lib
-L/home/sgong/devel/openev_gdal.151/dist/lib -lgdal -L/usr/local/lib
-L/usr/lib -L/usr/openwin/lib -L/usr/local/ssl/lib
-L/usr/local/BerkeleyDB.4.2/lib -L/rde/software/solaris9/local/lib
-L/home/sgong/devel/openev_gdal.151/dist
-L/sol10/SOURCES/S9/gcc-3.4.6/objdir/sparc-sun-solaris2.9/libstdc++-v3/s
rc
-L/sol10/SOURCES/S9/gcc-3.4.6/objdir/sparc-sun-solaris2.9/libstdc++-v3/s
rc/.libs -L/sol10/SOURCES/S9/gcc-3.4.6/objdir/gcc -lexpat -lhdf5 -lsz
-ljpeg -lpthread -lrt -ldl -lcurl -lidn -lintl -lsec -lc -liconv -lssl
-lcrypto -lsocket -lnsl -lz
-L/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6
-L/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/../../../../sparc-sun-so
laris2.9/lib -L/usr/ccs/bin -L/usr/ccs/lib
-L/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/../../.. -lstdc++ -lm
-lgcc_s /usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/crtend.o
/usr/local/lib/gcc/sparc-sun-solaris2.9/3.4.6/crtn.o              -Wl,-h
-Wl,_gdalmodule.so -o .libs/_gdalmodule.so
Text relocation remains                 	referenced
    against symbol		    offset	in file
<unknown>                           0x10
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
<unknown>                           0x18
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
inflate                             0x48
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
inflateEnd                          0x60
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
inflateEnd                          0xa0
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
inflateInit_                        0x2c
/home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
ld: fatal: relocations remain against allocatable but non-writable
sections
collect2: ld returned 1 exit status
libtool: install: error: relink `_gdalmodule.la' with the above command
before installing it
gmake[1]: *** [install] Error 1
gmake[1]: Leaving directory
`/home/sgong/devel/openev_gdal.151/gdal-1.5.1/pymod'
gmake: *** [install-actions] Error 2
From mslinn at mslinn.com  Tue Apr 22 13:38:43 2008
From: mslinn at mslinn.com (Mike Slinn)
Date: Tue Apr 22 13:38:45 2008
Subject: [gdal-dev] Outline of world land masses
In-Reply-To: <fukrij$oeq$1@osprey.mgras.de>
References: <480B9DDA.10302@gmx.net>
	<480B9EF1.90502@mslinn.com>	<86782b610804220110u8e5f8ccs67752c1626a3d1c8@mail.gmail.com>
	<fukrij$oeq$1@osprey.mgras.de>
Message-ID: <480E22A3.3070008@mslinn.com>

Martin,

You've got some interesting data.

Currently the program I'm working on is just for nautical navigation, so 
I'm more interested in the water side of the coastline ... however I 
would like to render the land as a filled region, and for that closed 
polylines are needed.

The details of the coastline are provided by S-57 charts (when loaded) 
however I'd like to have a low resolution image of the entire world for 
orientation purposes.

I'm going to try these images out later this week and will solicit 
feedback from my users:
http://en.wikipedia.org/wiki/Image:BlankMap-World-large.png
http://en.wikipedia.org/wiki/Image:BlankMap-World6-Equirectangular.svg

Mike

> So, if you're desperately looking for some (coarse) landuse data
> (available at the same location) that exactly matches the coastline,
> then VMap0 is for you. The GSHHS coastline is much more accurate, and
> having closed polygons might be an advantage, but for its accuracy it
> does not match the VMap0 landuse,
>
> 	Martin.
>   
From warmerdam at pobox.com  Tue Apr 22 13:47:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 22 13:47:41 2008
Subject: [gdal-dev] gdal 1.5.1 make error on Solaris 9
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <480E24A6.9090505@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> I am trying to make gdal 1.5.1 on Solaris 9.
> make went fine, but I got error message when "make install". please see
> the following message, which is the last part of the make install log.
> 
> does it mean that I have an old (incompatible) libz?  I use zlib-1.2.1
...
> Text relocation remains                 	referenced
>     against symbol		    offset	in file
> <unknown>                           0x10
> /home/sgong/devel/openev_gdal.151/dist/lib/libz.a(uncompr.o)
> <unknown>                           0x18

Shawn,

I'd guess your libz.a was built without -fPIC.   The same issue came
up with something else, and there was a similar error, right?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Apr 22 13:50:42 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 22 13:50:59 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480DF1D8.6050700@uibk.ac.at>
References: <480DF1D8.6050700@uibk.ac.at>
Message-ID: <480E2572.8050505@pobox.com>

Volker Wichmann wrote:
> Hi,
> 
> I'm checking gdal_merge.py for generating subsets and mosaics from one 
> or more input rasters. I found the following problem using esri ascii 
> grids as input:
...
> In case of the ascii, the file is resampled (and thus the values in the 
> output subset differ from the original). This doesn't happen with a 
> geotiff as input (see the "Copy" lines above).
> It's also strange, that in both cases the reported UL and LR don't match 
> the input coordinates and the extent of the output files (the latter 
> match the coordinates passed with -ul_lr).
> 
> I'm still using GDAL 1.4.2.0 but haven't found any major changes in trac 
> regarding gdal_merge.py. It would be nice if somebody could try to 
> reproduce this with GDAL 1.5 to see if any of the underlying functions 
> have changed.

Volker,

I believe there have been some problems with "off by a half pixel" issues
in the ESRI ASCII Grid driver since 1.4.2.  I would suggest upgrading to
1.5.1 if you can.   If the issue persists file a detailed ticket on it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From JohnB.Visser at ga-asi.com  Tue Apr 22 14:39:22 2008
From: JohnB.Visser at ga-asi.com (Visser, John B.)
Date: Tue Apr 22 14:39:33 2008
Subject: [gdal-dev] Metadata supported by NITF Driver
In-Reply-To: <20080422161627.D5A9BE018DC@lists.osgeo.org>
References: <20080422161627.D5A9BE018DC@lists.osgeo.org>
Message-ID: <5209E3CBD360A5439026631196FC975601934EBD@RSG-EVS1.rsg.ga-asi.com>

Experimenting with GDALINFO, I've discovered that I can extract the
annotations through the "CGM" domain and the TREs through the "TRE"
domain.  Are there other metadata domains supported by the NITF driver?
Is there some way to explore the available domains?  (If not, that would
be a useful feature, I think.)

Finally, I notice the NITF file header is broken up into name/value
pairs, but is there some way to access it directly in its non-broken up
state?

Thanks,
John Visser
From warmerdam at pobox.com  Tue Apr 22 15:22:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 22 15:22:56 2008
Subject: [gdal-dev] Metadata supported by NITF Driver
In-Reply-To: <5209E3CBD360A5439026631196FC975601934EBD@RSG-EVS1.rsg.ga-asi.com>
References: <20080422161627.D5A9BE018DC@lists.osgeo.org>
	<5209E3CBD360A5439026631196FC975601934EBD@RSG-EVS1.rsg.ga-asi.com>
Message-ID: <480E3AF1.4010901@pobox.com>

Visser, John B. wrote:
> Experimenting with GDALINFO, I've discovered that I can extract the
> annotations through the "CGM" domain and the TREs through the "TRE"
> domain.  Are there other metadata domains supported by the NITF driver?
> Is there some way to explore the available domains?  (If not, that would
> be a useful feature, I think.)

John,

Generally speaking the driver documents are the place to find out details
like this:

   http://www.gdal.org/frmt_nitf.html
   http://www.gdal.org/frmt_nitf_advanced.html

Of note, there is also support for capturing text segements which
are encoded in the TEXT metadata domain.  It is also possible to grep
on "Metadata" in the source code for the driver in question to get a sense
of any that weren't documented.  When I do that I notice that RPCs are
also returned in the RPC domain, and ICHIP data in main metadata domain.

> Finally, I notice the NITF file header is broken up into name/value
> pairs, but is there some way to access it directly in its non-broken up
> state?

Well, you can open the file yourself.  GDAL does not try and present the
raw header data through metadata.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From cermak at sfos.uaf.edu  Tue Apr 22 18:31:05 2008
From: cermak at sfos.uaf.edu (Rob Cermak)
Date: Tue Apr 22 18:52:55 2008
Subject: [gdal-dev] gdal 1.5.1 fixes for DODS and OGR/DODS drivers if you
 plan to upgrade to libdap 3.8.0
Message-ID: <52743.137.229.40.103.1208903465.squirrel@www.sfos.uaf.edu>

Namespace upgrades required if upgrading
from libdap-3.7.10 to libdap-3.8.0:

Small patch to frmts/dods/dodsdataset2.cpp:

--- dodsdataset2.cpp.orig       2008-04-22 14:16:58.000000000 -0800
+++ dodsdataset2.cpp    2008-04-22 14:13:11.000000000 -0800
@@ -67,6 +67,8 @@
 void GDALRegister_DODS(void);
 CPL_C_END

+using namespace libdap ;
+
 /** Attribute names used to encode geo-referencing information. Note that
     these are not C++ objects to avoid problems with static global
     constructors.

Small patch for ogr/ogrsf_frmts/dods/ogr_dods.h:

--- ogr_dods.h.orig     2008-04-22 14:34:10.000000000 -0800
+++ ogr_dods.h  2008-04-22 14:34:24.000000000 -0800
@@ -68,6 +68,8 @@
 #include <Error.h>
 #include <escaping.h>

+using namespace libdap ;
+
 /************************************************************************/
 /*                           OGRDODSFieldDefn                           */
 /************************************************************************/


Adding the namespace to ogrdodsdriver.cpp did not work.

Rob

From mateusz at loskot.net  Tue Apr 22 19:23:57 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 22 19:24:04 2008
Subject: [gdal-dev] gdal 1.5.1 fixes for DODS and OGR/DODS drivers if
	you plan to upgrade to libdap 3.8.0
In-Reply-To: <52743.137.229.40.103.1208903465.squirrel@www.sfos.uaf.edu>
References: <52743.137.229.40.103.1208903465.squirrel@www.sfos.uaf.edu>
Message-ID: <480E738D.10908@loskot.net>

Rob Cermak wrote:
> Small patch for ogr/ogrsf_frmts/dods/ogr_dods.h:
> 
> --- ogr_dods.h.orig     2008-04-22 14:34:10.000000000 -0800
> +++ ogr_dods.h  2008-04-22 14:34:24.000000000 -0800
> @@ -68,6 +68,8 @@
>  #include <Error.h>
>  #include <escaping.h>
> 
> +using namespace libdap ;
> +
>  /************************************************************************/
>  /*                           OGRDODSFieldDefn                           */
>  /************************************************************************/

As a word of review, I'd suggest to not to open any namespace in header
files but use fully qualified names instead. It keep global
scope less polluted.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From karthik3186 at gmail.com  Tue Apr 22 23:11:51 2008
From: karthik3186 at gmail.com (Karthik Krishnamurthy)
Date: Tue Apr 22 23:11:54 2008
Subject: [gdal-dev] SDTS Coordinate System
Message-ID: <ff5a67bf0804222011q77d709eaue84c201f2a9d748d@mail.gmail.com>

Hi list,

     I am trying to find the elevation values from a given SDTS Fileset.
Although I am able to extract the elevation values for a given X,Y I am not
sure as how one could extract them for a given Latitude , Longitude. A
typical grand canyon SDTS transfer contains the following metadata

UPPER LEFT X=387335.000
UPPER LEFT Y=3998335.500
LOWER RIGHT X=398735.000
LOWER RIGHT Y=3984385.500
WEST LONGITUDE=112? 15' 07.12" W
NORTH LATITUDE=36? 07' 34.45" N
EAST LONGITUDE=112? 07' 24.71" W
SOUTH LATITUDE=35? 59' 57.24" N
COVERED AREA=61.4 sq mi
NUM COLUMNS=381
NUM ROWS=466
PIXEL WIDTH=30 meters
PIXEL HEIGHT=30 meters

      The other thing that I am unable to understand is the UPPER LEFT X,
UPPER LEFT Y. What kind of coordinate system is this ?

-- 
Karthik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/b6b91032/attachment.html
From Olof.Landahl at carmenta.com  Wed Apr 23 03:38:50 2008
From: Olof.Landahl at carmenta.com (Olof Landahl)
Date: Wed Apr 23 03:51:08 2008
Subject: [gdal-dev] Ogr2ogr, shp-dgn conversion
Message-ID: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>

Hi,
> I'm using ogr2ogr (included in gdal) to convert a shapefile to
> Microstation DGN format. The conversion does the job, except that
> polygons and line strings with too many (38) vertices are converted
> into complex shapes. What is the reason for this?
> When I open the DGN-file in Microstation the complex shapes are
> visible but not possible to select or edit without a lot of work with
> special tools. Can I do something in the conversion with ogr2ogr to
> prevent it from creating complex shapes or to make the complex shapes
> selectable?
> 
> 
> /Olof Landahl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/e21dae76/attachment.html
From skmcbride at gmail.com  Wed Apr 23 05:45:10 2008
From: skmcbride at gmail.com (simonm1234)
Date: Wed Apr 23 05:45:12 2008
Subject: [Gdal-dev] Geotransform (Rotate Image 270 degrees)
Message-ID: <16833575.post@talk.nabble.com>


Hi,

How do you rotate an image 270 degrees using SetGeoTransform? 

What values should I use for  adfGeoTransform[2] and adfGeoTransform[4]?

Thanks,
Simon.

// Set Bounds/Pixel size: {}
//adfGeoTransform[0] /* top left x */
//adfGeoTransform[1] /* w-e pixel resolution */
//adfGeoTransform[2] /* rotation, 0 if image is "north up" */
//adfGeoTransform[3] /* top left y */
//adfGeoTransform[4] /* rotation, 0 if image is "north up" */
//adfGeoTransform[5] /* n-s pixel resolution */

double[] trans = new double[] {325000.0, 10, 0.0, 1010000.0, 0.0, -10}
ds.SetGeoTransform(trans);

-- 
View this message in context: http://www.nabble.com/Geotransform-%28Rotate-Image-270-degrees%29-tp16833575p16833575.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Volker.Wichmann at uibk.ac.at  Wed Apr 23 06:20:26 2008
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Wed Apr 23 06:23:13 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480E2572.8050505@pobox.com>
References: <480DF1D8.6050700@uibk.ac.at> <480E2572.8050505@pobox.com>
Message-ID: <480F0D6A.4050903@uibk.ac.at>

Frank,

I've updated to 1.5.1: my former problem disappeared, but  NOW the ersi 
ascii is off by half a pixel. I think the georeferencing is handled 
incorrectly by the driver.
Patching the driver with the following lines works for me:

in file aaigriddataset.cpp:

line 447
- poDS->adfGeoTransform[0] = atof( papszTokens[i + 1] );
+ poDS->adfGeoTransform[0] = atof( papszTokens[i + 1] ) + 0.5 * dfCellDX;


line 450
- poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
            + poDS->nRasterYSize * dfCellDY;
+ poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] ) - 0.5 * dfCellDX
            + poDS->nRasterYSize * dfCellDY;


line 460
- poDS->adfGeoTransform[0] = atof(papszTokens[i + 1]) - 0.5 * dfCellDX;
+ poDS->adfGeoTransform[0] = atof(papszTokens[i + 1]);


line 463
- poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
            - 0.5 * dfCellDY
            + poDS->nRasterYSize * dfCellDY;
+ poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
            - dfCellDY
            + poDS->nRasterYSize * dfCellDY;


I've cross-checked the results with Arc/Info and SAGA GIS and it works 
fine now.

Other issues I'd like to see mentioned on the gdal_merge.py page 
(http://www.gdal.org/gdal_merge.html):
- if the output file is already existing, the behaviour of the module is 
indetermined as it tries to append to the file (?)
- the -ul_lr arguments reference the cell CENTERS

best regards,
Volker


Frank Warmerdam wrote:
> Volker Wichmann wrote:
>> Hi,
>>
>> I'm checking gdal_merge.py for generating subsets and mosaics from 
>> one or more input rasters. I found the following problem using esri 
>> ascii grids as input:
> ...
>> In case of the ascii, the file is resampled (and thus the values in 
>> the output subset differ from the original). This doesn't happen with 
>> a geotiff as input (see the "Copy" lines above).
>> It's also strange, that in both cases the reported UL and LR don't 
>> match the input coordinates and the extent of the output files (the 
>> latter match the coordinates passed with -ul_lr).
>>
>> I'm still using GDAL 1.4.2.0 but haven't found any major changes in 
>> trac regarding gdal_merge.py. It would be nice if somebody could try 
>> to reproduce this with GDAL 1.5 to see if any of the underlying 
>> functions have changed.
>
> Volker,
>
> I believe there have been some problems with "off by a half pixel" issues
> in the ESRI ASCII Grid driver since 1.4.2.  I would suggest upgrading to
> 1.5.1 if you can.   If the issue persists file a detailed ticket on it.
>
> Best regards,

From warmerdam at pobox.com  Wed Apr 23 08:25:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 08:25:49 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480F0D6A.4050903@uibk.ac.at>
References: <480DF1D8.6050700@uibk.ac.at> <480E2572.8050505@pobox.com>
	<480F0D6A.4050903@uibk.ac.at>
Message-ID: <480F2AB1.4000807@pobox.com>

Volker Wichmann wrote:
> Frank,
> 
> I've updated to 1.5.1: my former problem disappeared, but  NOW the ersi 
> ascii is off by half a pixel. I think the georeferencing is handled 
> incorrectly by the driver.
> Patching the driver with the following lines works for me:
> 
> in file aaigriddataset.cpp:
> 
> line 447
> - poDS->adfGeoTransform[0] = atof( papszTokens[i + 1] );
> + poDS->adfGeoTransform[0] = atof( papszTokens[i + 1] ) + 0.5 * dfCellDX;
> 
> 
> line 450
> - poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
>            + poDS->nRasterYSize * dfCellDY;
> + poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] ) - 0.5 * dfCellDX
>            + poDS->nRasterYSize * dfCellDY;
> 
> 
> line 460
> - poDS->adfGeoTransform[0] = atof(papszTokens[i + 1]) - 0.5 * dfCellDX;
> + poDS->adfGeoTransform[0] = atof(papszTokens[i + 1]);
> 
> 
> line 463
> - poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
>            - 0.5 * dfCellDY
>            + poDS->nRasterYSize * dfCellDY;
> + poDS->adfGeoTransform[3] = atof( papszTokens[j + 1] )
>            - dfCellDY
>            + poDS->nRasterYSize * dfCellDY;
> 
> 
> I've cross-checked the results with Arc/Info and SAGA GIS and it works 
> fine now.

Volker,

You will need to file a ticket on this, and provide as much supporting
information (ie. .HDR files) as you can.

I'm pretty sure we have already gone through several iterations on this
so there is clearly something that isn't being properly understood.  I'm
not going to take your fix on faith, I need to know I'm actually fixing
things, not just stirring the pot again.

> Other issues I'd like to see mentioned on the gdal_merge.py page 
> (http://www.gdal.org/gdal_merge.html):
> - if the output file is already existing, the behaviour of the module is 
> indetermined as it tries to append to the file (?)

I don't know why you say this. If the output already exists, then the
script attempts to mosaic into it.

> - the -ul_lr arguments reference the cell CENTERS

The -ul_lr arguments are (to the best of my knowledge) outer pixel edges,
not cell centers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Apr 23 08:54:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 08:55:11 2008
Subject: [Gdal-dev] Geotransform (Rotate Image 270 degrees)
In-Reply-To: <16833575.post@talk.nabble.com>
References: <16833575.post@talk.nabble.com>
Message-ID: <480F319D.3000309@pobox.com>

simonm1234 wrote:
> Hi,
> 
> How do you rotate an image 270 degrees using SetGeoTransform? 
> 
> What values should I use for  adfGeoTransform[2] and adfGeoTransform[4]?
> 
> Thanks,
> Simon.
> 
> // Set Bounds/Pixel size: {}
> //adfGeoTransform[0] /* top left x */
> //adfGeoTransform[1] /* w-e pixel resolution */
> //adfGeoTransform[2] /* rotation, 0 if image is "north up" */
> //adfGeoTransform[3] /* top left y */
> //adfGeoTransform[4] /* rotation, 0 if image is "north up" */
> //adfGeoTransform[5] /* n-s pixel resolution */
> 
> double[] trans = new double[] {325000.0, 10, 0.0, 1010000.0, 0.0, -10}
> ds.SetGeoTransform(trans);

Simon,

First, lets be clear, SetGeoTransform() does not rotate anything.  It
just records a transformation between pixel/line and georef space.  You
can set a geotransform that describes an image that is "west-up" as
opposed to the normal "north-up".

An image with the first (top left pixel not accounting for georeferencing)
actually appearing at the bottom left (west up) might look like:

  { 325000, 0, -10.0, 1010000, 10.0, 0.0 }

This basically means that each step along a scanline is a step 10m north,
and each step down an image column is a 10m step east.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Apr 23 09:06:03 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 09:06:34 2008
Subject: [gdal-dev] Ogr2ogr, shp-dgn conversion
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>
Message-ID: <480F343B.50104@pobox.com>

Olof Landahl wrote:
> Hi,
> I'm using ogr2ogr (included in gdal) to convert a shapefile to 
> Microstation DGN format. The conversion does the job, except that 
> polygons and line strings with too many (38) vertices are converted into 
> complex shapes. What is the reason for this?
> 
> When I open the DGN-file in Microstation the complex shapes are visible 
> but not possible to select or edit without a lot of work with special 
> tools. Can I do something in the conversion with ogr2ogr to prevent it 
> from creating complex shapes or to make the complex shapes selectable?

Olof,

I don't recall the exact details any more, but I presumably did this
because there was a limit on the length of regular lines in Microstation.

I'm not aware of anything you can do about this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From sschantz at bfs.de  Wed Apr 23 11:49:29 2008
From: sschantz at bfs.de (shortyII)
Date: Wed Apr 23 11:49:30 2008
Subject: [Gdal-dev] Change EXTENT of a shapefile
In-Reply-To: <480C9AB5.9010001@pobox.com>
References: <16807475.post@talk.nabble.com> <480C9AB5.9010001@pobox.com>
Message-ID: <16834680.post@talk.nabble.com>


Hi Frank
thank you. Now I don't get an error, but it still doesn't work.
The extent parameters have their old values. Is this a principal problem of
shapefiles?
Best regards,
Stefan



> So instead use:
> 
>   ogr2ogr -spat 3500000 5300000 3540000 5400000 out.shp rastervorlage.shp
> 
> Once complete you can delete the original, and rename the new to the
> original if you want.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Change-EXTENT-of-a-shapefile-tp16807475p16834680.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From blake at hailmail.net  Wed Apr 23 11:50:23 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Apr 23 11:55:59 2008
Subject: [gdal-dev] Ogr2ogr Pgeo to SQL?
In-Reply-To: <480F343B.50104@pobox.com>
References: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>
	<480F343B.50104@pobox.com>
Message-ID: <91D737BC-083A-4080-BA01-2FA10BA67707@hailmail.net>

Hi,

I've been using the PGeo driver on a windows machine to convert ESRI  
geodatabases/Access Databases (.mdb) to shapefiles (I have not got the  
driver working yet on linux). Now, I'd like to send directly to  
PostgreSQL (so all of my column names are not truncated), but I run my  
Postgres Server on a separate, non networked linux machine. As such,  
I'd like to use Ogr2ogr to create intermediate output, ideally a sql  
insert statement like shp2pgsql does.

My sense is that the ogr2ogr utility is not built this way (there is  
no SQL format specifically) and I'd be best off to actually spend the  
time to network my machines. Anyone have suggestions about other  
approaches? Perhaps there is a crafty way to capture the insert  
statement ogr2ogr is making and write it to a file?

Thanks,

Dane


From warmerdam at pobox.com  Wed Apr 23 12:09:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 12:09:39 2008
Subject: [Gdal-dev] Change EXTENT of a shapefile
In-Reply-To: <16834680.post@talk.nabble.com>
References: <16807475.post@talk.nabble.com> <480C9AB5.9010001@pobox.com>
	<16834680.post@talk.nabble.com>
Message-ID: <480F5F20.9090202@pobox.com>

shortyII wrote:
> Hi Frank
> thank you. Now I don't get an error, but it still doesn't work.
> The extent parameters have their old values. Is this a principal problem of
> shapefiles?

Stefan,

Note that the -spat switch does not set the spatial extent of the new
shapefile - that is established by the cumulative bounds of all features
written to it.  The -spat switch just requests only features which
intersect the indicated region should be transferred.  If, for instance,
you have a "universe polygon" in your source file, then it will impact
the area, and will be copied to the output file, and you will get the
same output file bounds.

That is to say, -spat will *not* clip feature geometries.

There is no mechanism through OGR (or Shapelib for that matter) to
directly set the spatial extents in the shapefile header.  It is always
computed as side effect of writing features.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Apr 23 12:11:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 12:12:22 2008
Subject: [gdal-dev] Ogr2ogr Pgeo to SQL?
In-Reply-To: <91D737BC-083A-4080-BA01-2FA10BA67707@hailmail.net>
References: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>
	<480F343B.50104@pobox.com>
	<91D737BC-083A-4080-BA01-2FA10BA67707@hailmail.net>
Message-ID: <480F5FC9.1040102@pobox.com>

Dane Springmeyer wrote:
> Hi,
> 
> I've been using the PGeo driver on a windows machine to convert ESRI 
> geodatabases/Access Databases (.mdb) to shapefiles (I have not got the 
> driver working yet on linux). Now, I'd like to send directly to 
> PostgreSQL (so all of my column names are not truncated), but I run my 
> Postgres Server on a separate, non networked linux machine. As such, I'd 
> like to use Ogr2ogr to create intermediate output, ideally a sql insert 
> statement like shp2pgsql does.
> 
> My sense is that the ogr2ogr utility is not built this way (there is no 
> SQL format specifically) and I'd be best off to actually spend the time 
> to network my machines. Anyone have suggestions about other approaches? 
> Perhaps there is a crafty way to capture the insert statement ogr2ogr is 
> making and write it to a file?

Dane,

There is no mechanism provided for capturing the Postgres insert statements.

I would suggest solving the networking problem.

But if that is impractical, you could also look at using more expressive
intermediate file formats like GML, SQLite for the intermediate files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Matthew.Foster at noaa.gov  Wed Apr 23 12:21:03 2008
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Apr 23 12:21:14 2008
Subject: [gdal-dev] Problem getting projection info from NetCDF
Message-ID: <480F61EF.2060702@noaa.gov>

My apologies if this shows up twice...

Somewhere between version 1.3.0 and 1.5.1 something changed in gdal such
that I can no longer get the projection info from some NetCDF datasets
that I have.  I believe my data are CF-compliant, so I'm having trouble
figuring out what gdal doesn't like.

I can supply the NetCDF header info, if that would help...or perhaps
someone will know something that became more 'strict' in gdal.

TIA

Matt

-- 
The cosmos is all that is or ever was or ever will be.
-- Carl Sagan


-------------- next part --------------
A non-text attachment was scrubbed...
Name: matthew_foster.vcf
Type: text/x-vcard
Size: 229 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/a90ff8be/matthew_foster.vcf
From Matthew.Foster at noaa.gov  Wed Apr 23 12:01:04 2008
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Apr 23 13:01:11 2008
Subject: [gdal-dev] Problem getting projection info from NetCDF
Message-ID: <480F5D40.8060008@noaa.gov>

Somewhere between version 1.3.0 and 1.5.1 something changed in gdal such 
that I can no longer get the projection info from some NetCDF datasets 
that I have.  I believe my data are CF-compliant, so I'm having trouble 
figuring out what gdal doesn't like.

I can supply the NetCDF header info, if that would help...or perhaps 
someone will know something that became more 'strict' in gdal.

TIA

Matt

-- 
The cosmos is all that is or ever was or ever will be.
-- Carl Sagan

-------------- next part --------------
A non-text attachment was scrubbed...
Name: matthew_foster.vcf
Type: text/x-vcard
Size: 229 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/1b887b61/matthew_foster.vcf
From c.schitka at gmail.com  Wed Apr 23 13:12:23 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Wed Apr 23 13:12:24 2008
Subject: [gdal-dev] VMAP data sources reporting 0 Features.
Message-ID: <e66a4dbf0804231012l3ab07dbamc6ad2d1e03f31033@mail.gmail.com>

Hi List,

This is my first posting, so my apologies if it's been answered prior. I
have a VMAP data source, I am trying to open with Gdal-OGDI. I have rebuilt
Gdal 1.5.1 with OGDI enabled and everything is linking and opening fine.
When I open my data source the GDAL code goes through the OGDI hoops, and
opens the data source, giving me back an OGRLayer, which I got by doing
something like this

 OGRDS->GetLayByName(LayerName)

I get back a physical layer, however this layer reports 0 features and when
I try and get a feature or iterate over them, I never seem to get a feature.


I would think it's my datasource however when I open the same VMAP data
source with the same layer using ogrinfo, I get all the feature in the data
source listed.

Please Help!

Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/89ade4c0/attachment.html
From gregor at hostgis.com  Wed Apr 23 13:45:27 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Wed Apr 23 13:45:31 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480DA850.8010506@sarvision.nl>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl> <480CDB13.8070605@hostgis.com>
	<480DA850.8010506@sarvision.nl>
Message-ID: <480F75B7.8040703@hostgis.com>

Vincent Schut wrote:
>>> Color depth: gdalwarp on the KAPs generates 8-bit palleted 
>>> TIFFs. That may not be the best for quality.

>>> ^^This point might be your main issue.
> I think you can use gdal's pct2rgb.py utility for that.

Sounds good; I've given that a try.
My procedure from NOAA NRCs to GeoTIFFs is as follows:

gdalwarp -tps -rb -t_srs EPSG:4326 $kap $tif0
pct2rgb.py $tif0 $tif1
gdal_translate -quiet -co TILED=YES -srcwin $x $y $w $h $tif1 $tif2
gdaladdo -r average $tif2 2 4 8 16 32

I think it looks pretty good. It's not as good as their hand-groomed 
PNGs, but it's a significant improvement!

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From Shawn.Gong at drdc-rddc.gc.ca  Wed Apr 23 13:54:47 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Apr 23 13:54:50 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <480E1C29.8050204@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E120020@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<480E1C29.8050204@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi Frank and list,

After upgrading libcurl, make went further. There were other errors (see
below). Does this look like a problem caused by other older version of
lib?

thanks,
Shawn

=================================
...
libtool: link: ranlib .libs/libgdal.a
libtool: link: creating libgdal.la
libtool: link: ( cd ".libs" && rm -f "libgdal.la" && ln -s
"../libgdal.la" "libgdal.la" )
make[1]: Leaving directory `/home/sgong/dev18/gdal-1.5.1'
(cd apps; make)
make[1]: Entering directory `/home/sgong/dev18/gdal-1.5.1/apps'
rm -f gdal-config-inst
echo '#!/bin/sh' > gdal-config-inst
echo 'CONFIG_LIBS="-L/home/sgong/dev18/dist/lib -lgdal"' >>
gdal-config-inst
echo 'CONFIG_DEP_LIBS=" -L/usr/local/lib -lgeos_c
-L/home/sgong/dev18/dist/lib missing -logdi31 -L/home/sgo ng/dev18/dist
-L/home/sgong/dev18/dist/lib -ljpeg -L/usr/lib -lpq -lz
-L/home/sgong/dev18/dist -L/home/sgon g/dev18/dist/lib -lpthread -lm
-lrt -ldl    -lcurl -L/usr/kerberos/lib -lssl -lcrypto -lgssapi_krb5
-lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz -L/usr/kerberos/lib -lz
-lssl -lcrypto -lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto
-lresolv -ldl -lz -lz "' >> gdal-config-inst
echo 'CONFIG_PREFIX="/home/sgong/dev18/dist"' >> gdal-config-inst
echo 'CONFIG_CFLAGS="-I/home/sgong/dev18/dist/include"' >>
gdal-config-inst
echo 'CONFIG_DATA="/home/sgong/dev18/dist/share"' >> gdal-config-inst
echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config-inst
echo 'CONFIG_OGR_ENABLED=yes' >> gdal-config-inst
echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211
xpm sdts raw dted mem jdem envisat el as fit vrt usgsdem l1b nitf bmp
pcidsk airsar rs2 ilwis rmf rik leveller sgi srtmhgt idrisi gsg ingr ers
ja xapalsar dimap gff cosar pds adrg coasp tsx terragen wcs wms bsb hdf5
ogdi gif jpeg png pcraster "' >> gdal -config-inst
cat gdal-config.in >> gdal-config-inst
chmod a+x gdal-config-inst
rm -f gdal-config
echo '#!/bin/sh' > gdal-config
echo 'CONFIG_LIBS="/home/sgong/dev18/gdal-1.5.1/libgdal.la"' >>
gdal-config
echo 'CONFIG_DEP_LIBS=" -L/usr/local/lib -lgeos_c
-L/home/sgong/dev18/dist/lib missing -logdi31 -L/home/sgo ng/dev18/dist
-L/home/sgong/dev18/dist/lib -ljpeg -L/usr/lib -lpq -lz
-L/home/sgong/dev18/dist -L/home/sgon g/dev18/dist/lib -lpthread -lm
-lrt -ldl    -lcurl -L/usr/kerberos/lib -lssl -lcrypto -lgssapi_krb5
-lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz -L/usr/kerberos/lib -lz
-lssl -lcrypto -lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto
-lresolv -ldl -lz -lz "' >> gdal-config
echo 'CONFIG_PREFIX="/home/sgong/dev18/gdal-1.5.1"' >> gdal-config
echo 'CONFIG_CFLAGS="-I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong /dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts"' > > gdal-config
echo 'CONFIG_DATA="/home/sgong/dev18/gdal-1.5.1/data"' >> gdal-config
echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config
echo 'CONFIG_OGR_ENABLED=yes' >> gdal-config
echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211
xpm sdts raw dted mem jdem envisat el as fit vrt usgsdem l1b nitf bmp
pcidsk airsar rs2 ilwis rmf rik leveller sgi srtmhgt idrisi gsg ingr ers
ja xapalsar dimap gff cosar pds adrg coasp tsx terragen wcs wms bsb hdf5
ogdi gif jpeg png pcraster "' >> gdal -config
cat gdal-config.in >> gdal-config
chmod a+x gdal-config
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CC gcc
-g -O2  -Wall -Wdeclaration-after- statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/gdal-1.5.1/gcore
-I/home/sgong/dev18/gda l-1.5.1/alg -I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts -I/home/sgong
/dev18/gdal-1.5.1/frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist -I/home/
sgong/dev18/dist/include  -c -o gdalinfo.o gdalinfo.c
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/ho
me/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr -I/ho
me/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts
-I/home/sgong/dev18/gdal-1.5.1/frmts -DOGR_ENABLED -I/home/sgong/
dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c gdalinfo.c  -fPIC -DPIC -o
.libs/gdalinfo.o
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/ho
me/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr -I/ho
me/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts
-I/home/sgong/dev18/gdal-1.5.1/frmts -DOGR_ENABLED -I/home/sgong/
dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c gdalinfo.c -o gdalinfo.o  >/dev/null
2>&1
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=link        g++
gdalinfo.o  \
        /home/sgong/dev18/gdal-1.5.1/libgdal.la -o gdalinfo
libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so -L/usr/local /lib
-L/home/sgong/dev18/dist/lib -L/home/sgong/dev18/dist -L/usr/lib
-L/usr/kerberos/lib -L/home/marinier/
gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libst
dc++-v3/src/.libs -L/home/marinier/gcc-4.2.2-build/./gcc
/usr/local/lib/libgeos_c.so /usr/local/lib/libgeos .so -logdi31
/usr/lib/libjpeg.so -lpq -lpthread -lrt /usr/local/lib/libcurl.so -lldap
-lssl -lcrypto -lgssa pi_krb5 -lkrb5 -lcom_err -lk5crypto -lresolv -ldl
-lz /usr/local/lib/libstdc++.so -lm -lc -lgcc_s -Wl,-rpat h
-Wl,/home/sgong/dev18/dist/lib -Wl,-rpath -Wl,/usr/local/lib
/usr/bin/ld: warning: libstdc++.so.5, needed by
/usr/local/lib/libgeos_c.so, may conflict with libstdc++.so .6
/usr/bin/ld: warning: libcom_err.so.3, needed by /usr/lib/libssl.so, may
conflict with libcom_err.so.2
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_UCHAR_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Fclose'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_SHORT_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dclose'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5check_version'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Gopen'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_ULLONG_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_DOUBLE_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dread'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Fis_hdf5'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_FLOAT_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aiterate'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aopen_name'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5open'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aget_num_attrs'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Screate_simple'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Gclose'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_USHORT_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Gget_num_objs'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_LLONG_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Tget_size'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Tget_class'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dopen'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_ULONG_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Sselect_hyperslab'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dget_space'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_UINT_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_LONG_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Giterate'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dget_type'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Gget_objinfo'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aget_space'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Dget_offset'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Tequal'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aclose'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Sget_simple_extent_ndims'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_INT_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aread'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Fopen'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5T_NATIVE_SCHAR_g'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Tget_native_type'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Sget_simple_extent_dims'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`H5Aget_type'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/apps'
make: *** [apps-target] Error 2




-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, April 22, 2008 1:11 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal1.5.1 make error on RedHat Linux

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I got make errors on gdalhttp.cpp:209. The following is the last part
of 
> the make log.
> 
> Platform: RedHat Enterprise Linux version 4, and gcc compiler version
3.2.3.
> 
> Any help is appreciated.

Shawn,

I would guess you have an older version of libcurl that lacks a
particular
capability GDAL now uses.  Either upgrade libcurl or drop it from your
build
if you don't need it.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Wed Apr 23 14:07:19 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 14:07:47 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120020@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<480E1C29.8050204@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <480F7AD7.5020005@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi Frank and list,
> 
> After upgrading libcurl, make went further. There were other errors (see
> below). Does this look like a problem caused by other older version of
> lib?

Shawn,

The problem about libstdc++ 5 vs. 6 in libgeos likely indicates
libgeos needs to be rebuilt.

The main problem is HDF5 support.  For whatever reason you have
compiled and built with it, but the libraries aren't being found
at link time.  If you don't need it, just configure --without-hdf5.
If you do need it, review your hdf5 settings.  I normally have -lhdf5
in my LIBS variable when building with HDF5.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Apr 23 14:27:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 14:27:30 2008
Subject: [gdal-dev] RFC 23: OGR Unicode 
Message-ID: <480F7F75.6030201@pobox.com>

Folks,

I'm looking to fix reading of NVARCHAR fields via ODBC and in an effort
to solve this problem in a reasonably general way, I am proposing to
add some mechanisms for encoding changes in CPLString.  This is essentially
taking a small bite out of the things that RFC 5 was attempting to address
to keep things managable.

   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

I'm *not* really interested in expanding the scope a lot at this point, but
I would appreciate feedback on the proposed approach before I bring it to a
vote.  Note also that my approach to CPLString changes is somewhat different
than Andrey proposed in RFC 5.  In particular, I do not require that CPLStrings
always be UTF-8.  Also I use iconv() style names for encodings instead of an
enumerated list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From blake at hailmail.net  Wed Apr 23 14:55:46 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Apr 23 14:55:44 2008
Subject: [gdal-dev] Ogr2ogr Pgeo to SQL?
In-Reply-To: <480F5FC9.1040102@pobox.com>
References: <FAF6E56B26D2044696772EBE89B15351E79AA7@posty.carmenta.se>
	<480F343B.50104@pobox.com>
	<91D737BC-083A-4080-BA01-2FA10BA67707@hailmail.net>
	<480F5FC9.1040102@pobox.com>
Message-ID: <B710AC08-D2AA-4A99-8169-21AE29B1681E@hailmail.net>

Hi Frank,

Thanks for the feedback. I am ultimately importing the data with  
Geodjango python bindings to OGR and have not gotten them to work with  
GML yet, but did try that.

I had not considered SQLite, which is a great idea since Django  
supports that format as an alternative to PostgreSQL.

Thanks!

Dane



On Apr 23, 2008, at 9:11 AM, Frank Warmerdam wrote:

> Dane Springmeyer wrote:
>> Hi,
>> I've been using the PGeo driver on a windows machine to convert  
>> ESRI geodatabases/Access Databases (.mdb) to shapefiles (I have not  
>> got the driver working yet on linux). Now, I'd like to send  
>> directly to PostgreSQL (so all of my column names are not  
>> truncated), but I run my Postgres Server on a separate, non  
>> networked linux machine. As such, I'd like to use Ogr2ogr to create  
>> intermediate output, ideally a sql insert statement like shp2pgsql  
>> does.
>> My sense is that the ogr2ogr utility is not built this way (there  
>> is no SQL format specifically) and I'd be best off to actually  
>> spend the time to network my machines. Anyone have suggestions  
>> about other approaches? Perhaps there is a crafty way to capture  
>> the insert statement ogr2ogr is making and write it to a file?
>
> Dane,
>
> There is no mechanism provided for capturing the Postgres insert  
> statements.
>
> I would suggest solving the networking problem.
>
> But if that is impractical, you could also look at using more  
> expressive
> intermediate file formats like GML, SQLite for the intermediate files.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>

From Volker.Wichmann at uibk.ac.at  Wed Apr 23 14:59:11 2008
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Wed Apr 23 15:02:06 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480F2AB1.4000807@pobox.com>
References: <480DF1D8.6050700@uibk.ac.at> <480E2572.8050505@pobox.com>
	<480F0D6A.4050903@uibk.ac.at> <480F2AB1.4000807@pobox.com>
Message-ID: <480F86FF.6020003@uibk.ac.at>

Frank Warmerdam wrote:
> Volker,
>
> You will need to file a ticket on this, and provide as much supporting
> information (ie. .HDR files) as you can.
>
> I'm pretty sure we have already gone through several iterations on this
> so there is clearly something that isn't being properly understood.  I'm
> not going to take your fix on faith, I need to know I'm actually fixing
> things, not just stirring the pot again.
>
Frank,

I will do so, and started to build up a test case. But first of all I 
may need some advice, I'm a little surprised by my first tests.
I build a simple 4 by 4 grid, geotiff format. Running gdalinfo on the 
file I get:

gdalinfo 4by4.tif
Driver: GTiff/GeoTIFF
Files: 4by4.tif
Size is 4, 4
Coordinate System is `'
Origin = (10.500000000000000,13.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  10.5000000,  13.5000000)
Lower Left  (  10.5000000,   9.5000000)
Upper Right (  14.5000000,  13.5000000)
Lower Right (  14.5000000,   9.5000000)
Center      (  12.5000000,  11.5000000)
Band 1 Block=4x4 Type=Byte, ColorInterp=Gray

The Origin / Upper Left matches with what I expected (the grid BOUNDARY 
is: N 14  S 10  W 10  E 14). I'm not sure to understand the values 
reported for the Lower Right - isn't this off by 1 cell in x and -1 cell 
in y??
I don't think it makes sense to go on before I get this ...
>> Other issues I'd like to see mentioned on the gdal_merge.py page 
>> (http://www.gdal.org/gdal_merge.html):
>> - if the output file is already existing, the behaviour of the module 
>> is indetermined as it tries to append to the file (?)
>
> I don't know why you say this. If the output already exists, then the
> script attempts to mosaic into it.
>
ok, I see it's a feature. But I think it should be mentioned in the docs
>> - the -ul_lr arguments reference the cell CENTERS
>
> The -ul_lr arguments are (to the best of my knowledge) outer pixel edges,
> not cell centers.
not for me, but as written above: first of all I need to get that right 
to build a proper test case.

your help is really appreciated,
Volker

From warmerdam at pobox.com  Wed Apr 23 15:12:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 15:12:29 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480F86FF.6020003@uibk.ac.at>
References: <480DF1D8.6050700@uibk.ac.at> <480E2572.8050505@pobox.com>
	<480F0D6A.4050903@uibk.ac.at> <480F2AB1.4000807@pobox.com>
	<480F86FF.6020003@uibk.ac.at>
Message-ID: <480F8A04.2070902@pobox.com>

Volker Wichmann wrote:
> Frank Warmerdam wrote:
>> Volker,
>>
>> You will need to file a ticket on this, and provide as much supporting
>> information (ie. .HDR files) as you can.
>>
>> I'm pretty sure we have already gone through several iterations on this
>> so there is clearly something that isn't being properly understood.  I'm
>> not going to take your fix on faith, I need to know I'm actually fixing
>> things, not just stirring the pot again.
>>
> Frank,
> 
> I will do so, and started to build up a test case. But first of all I 
> may need some advice, I'm a little surprised by my first tests.
> I build a simple 4 by 4 grid, geotiff format. Running gdalinfo on the 
> file I get:
...
> The Origin / Upper Left matches with what I expected (the grid BOUNDARY 
> is: N 14  S 10  W 10  E 14). I'm not sure to understand the values 
> reported for the Lower Right - isn't this off by 1 cell in x and -1 cell 
> in y??
> I don't think it makes sense to go on before I get this ...

Volker,

I think I would need to see a listgeo report on the file to comment.
I suspect it is using PixelAsPoint and assuming that a pixel/line value
of 0,0 refers to the center of the top left pixel.

There is an outstanding dispute on how PixelAsPoint GeoTIFF files ought
to be interpreted.  There is an open ticket on the issue, if you cared
to dig for it.  Suffice it to say that you are best off avoiding
ambiguity by working with pixel-as-area files when possible.

>>> Other issues I'd like to see mentioned on the gdal_merge.py page 
>>> (http://www.gdal.org/gdal_merge.html):
>>> - if the output file is already existing, the behaviour of the module 
>>> is indetermined as it tries to append to the file (?)
>>
>> I don't know why you say this. If the output already exists, then the
>> script attempts to mosaic into it.
>>
> ok, I see it's a feature. But I think it should be mentioned in the docs

I have modified the -o switch docs to read:

<dt> <b>-o</b> <i>out_filename</i>:</dt><dd> The name of the output file,
which will be created if it does not already exist (defaults to "out.tif").</dd>

>>> - the -ul_lr arguments reference the cell CENTERS
>>
>> The -ul_lr arguments are (to the best of my knowledge) outer pixel edges,
>> not cell centers.
 >
> not for me, but as written above: first of all I need to get that right 
> to build a proper test case.

I tried creating a file with gdal_merge.py and confirmed my understanding:

  gdal_merge.py -o out.tif utm.tif -ul_lr 5 10 10 5 -ps 1 1

gdalinfo out.tif
...
Corner Coordinates:
Upper Left  (   5.0000000,  10.0000000) (121d29'19.14"W,  0d 0'0.32"N)
Lower Left  (   5.0000000,   5.0000000) (121d29'19.14"W,  0d 0'0.16"N)
Upper Right (  10.0000000,  10.0000000) (121d29'18.98"W,  0d 0'0.32"N)
Lower Right (  10.0000000,   5.0000000) (121d29'18.98"W,  0d 0'0.16"N)
Center      (   7.5000000,   7.5000000) (121d29'19.06"W,  0d 0'0.24"N)
...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Volker.Wichmann at uibk.ac.at  Wed Apr 23 15:21:23 2008
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Wed Apr 23 15:24:15 2008
Subject: [gdal-dev] problems with gdal_merge.py
In-Reply-To: <480F8A04.2070902@pobox.com>
References: <480DF1D8.6050700@uibk.ac.at> <480E2572.8050505@pobox.com>
	<480F0D6A.4050903@uibk.ac.at> <480F2AB1.4000807@pobox.com>
	<480F86FF.6020003@uibk.ac.at> <480F8A04.2070902@pobox.com>
Message-ID: <480F8C33.4040901@uibk.ac.at>

Thanks for your help Frank,
seems I stumbled across a bug in the GDAL Import/Export Module of SAGA 
GIS. Using OpenEV the file gets interpreted as reported by gdalinfo ...

sorry for the mess,
Volker


Frank Warmerdam wrote:
> Volker Wichmann wrote:
>> Frank Warmerdam wrote:
>>> Volker,
>>>
>>> You will need to file a ticket on this, and provide as much supporting
>>> information (ie. .HDR files) as you can.
>>>
>>> I'm pretty sure we have already gone through several iterations on this
>>> so there is clearly something that isn't being properly understood.  
>>> I'm
>>> not going to take your fix on faith, I need to know I'm actually fixing
>>> things, not just stirring the pot again.
>>>
>> Frank,
>>
>> I will do so, and started to build up a test case. But first of all I 
>> may need some advice, I'm a little surprised by my first tests.
>> I build a simple 4 by 4 grid, geotiff format. Running gdalinfo on the 
>> file I get:
> ...
>> The Origin / Upper Left matches with what I expected (the grid 
>> BOUNDARY is: N 14  S 10  W 10  E 14). I'm not sure to understand the 
>> values reported for the Lower Right - isn't this off by 1 cell in x 
>> and -1 cell in y??
>> I don't think it makes sense to go on before I get this ...
>
> Volker,
>
> I think I would need to see a listgeo report on the file to comment.
> I suspect it is using PixelAsPoint and assuming that a pixel/line value
> of 0,0 refers to the center of the top left pixel.
>
> There is an outstanding dispute on how PixelAsPoint GeoTIFF files ought
> to be interpreted.  There is an open ticket on the issue, if you cared
> to dig for it.  Suffice it to say that you are best off avoiding
> ambiguity by working with pixel-as-area files when possible.
>
>>>> Other issues I'd like to see mentioned on the gdal_merge.py page 
>>>> (http://www.gdal.org/gdal_merge.html):
>>>> - if the output file is already existing, the behaviour of the 
>>>> module is indetermined as it tries to append to the file (?)
>>>
>>> I don't know why you say this. If the output already exists, then the
>>> script attempts to mosaic into it.
>>>
>> ok, I see it's a feature. But I think it should be mentioned in the docs
>
> I have modified the -o switch docs to read:
>
> <dt> <b>-o</b> <i>out_filename</i>:</dt><dd> The name of the output file,
> which will be created if it does not already exist (defaults to 
> "out.tif").</dd>
>
>>>> - the -ul_lr arguments reference the cell CENTERS
>>>
>>> The -ul_lr arguments are (to the best of my knowledge) outer pixel 
>>> edges,
>>> not cell centers.
> >
>> not for me, but as written above: first of all I need to get that 
>> right to build a proper test case.
>
> I tried creating a file with gdal_merge.py and confirmed my 
> understanding:
>
>  gdal_merge.py -o out.tif utm.tif -ul_lr 5 10 10 5 -ps 1 1
>
> gdalinfo out.tif
> ...
> Corner Coordinates:
> Upper Left  (   5.0000000,  10.0000000) (121d29'19.14"W,  0d 0'0.32"N)
> Lower Left  (   5.0000000,   5.0000000) (121d29'19.14"W,  0d 0'0.16"N)
> Upper Right (  10.0000000,  10.0000000) (121d29'18.98"W,  0d 0'0.32"N)
> Lower Right (  10.0000000,   5.0000000) (121d29'18.98"W,  0d 0'0.16"N)
> Center      (   7.5000000,   7.5000000) (121d29'19.06"W,  0d 0'0.24"N)
> ...
>
> Best regards,

From dmorissette at mapgears.com  Wed Apr 23 15:37:00 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Apr 23 15:37:00 2008
Subject: [gdal-dev] RFC 23: OGR Unicode
In-Reply-To: <480F7F75.6030201@pobox.com>
References: <480F7F75.6030201@pobox.com>
Message-ID: <480F8FDC.1090608@mapgears.com>

This RFC looks like a good plan to me... for what I know of dealing with 
encodings.

Daniel


Frank Warmerdam wrote:
> Folks,
> 
> I'm looking to fix reading of NVARCHAR fields via ODBC and in an effort
> to solve this problem in a reasonably general way, I am proposing to
> add some mechanisms for encoding changes in CPLString.  This is essentially
> taking a small bite out of the things that RFC 5 was attempting to address
> to keep things managable.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
> 
> I'm *not* really interested in expanding the scope a lot at this point, but
> I would appreciate feedback on the proposed approach before I bring it to a
> vote.  Note also that my approach to CPLString changes is somewhat 
> different
> than Andrey proposed in RFC 5.  In particular, I do not require that 
> CPLStrings
> always be UTF-8.  Also I use iconv() style names for encodings instead 
> of an
> enumerated list.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
From szekerest at gmail.com  Wed Apr 23 16:09:35 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Apr 23 16:09:38 2008
Subject: [gdal-dev] RFC 23: OGR Unicode
In-Reply-To: <480F7F75.6030201@pobox.com>
References: <480F7F75.6030201@pobox.com>
Message-ID: <f3b73b7d0804231309v1e3c995fq90cd627370deeb75@mail.gmail.com>

Frank,

In the recent days we've also experienced similar problems with the
OGR OCI driver. I suppose it might be related to the NCHAR or
NVARCHAR2 columns, where the driver cannot figure out the proper
length of the buffer to retrieve the field values. Therefore the OCI
library always reports the following error:

ERROR 1: ORA-01406: fetched column value was truncated
in OCIStmtFetch

Was this issue also addressed by this RFC or some additional changes
should be made inside the driver? I couldn't find out how the driver
will figure out the length of the buffers in these cases.

Here is a  description of the OCI client libraries, that may also be related:

<quote>
If a database column containing character data is defined to be an
NCHAR or NVARCHAR2 column, then a bind or define involving that column
must take into account special considerations for dealing with
character set specifications.

These considerations are necessary in case the width of the client
character set is different from the server character set, and also for
proper character conversion. During conversion of data between
different character sets, the size of the data may increase or
decrease by a factor of four. Insure that buffers provided to hold the
data are of sufficient size.

In some cases, it may also be easier for an application to deal with
NCHAR or NVARCHAR2 data in terms of numbers of characters, rather than
numbers of bytes, which is the usual case.
</quote>

However I'm not sure I totally understand this statement.


Best regards,

Tamas



2008/4/23, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
>  I'm looking to fix reading of NVARCHAR fields via ODBC and in an effort
>  to solve this problem in a reasonably general way, I am proposing to
>  add some mechanisms for encoding changes in CPLString.  This is essentially
>  taking a small bite out of the things that RFC 5 was attempting to address
>  to keep things managable.
>
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
>  I'm *not* really interested in expanding the scope a lot at this point, but
>  I would appreciate feedback on the proposed approach before I bring it to a
>  vote.  Note also that my approach to CPLString changes is somewhat
> different
>  than Andrey proposed in RFC 5.  In particular, I do not require that
> CPLStrings
>  always be UTF-8.  Also I use iconv() style names for encodings instead of
> an
>  enumerated list.
>
>  Best regards,
>  --
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Wed Apr 23 16:17:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 23 16:17:47 2008
Subject: [gdal-dev] RFC 23: OGR Unicode
In-Reply-To: <f3b73b7d0804231309v1e3c995fq90cd627370deeb75@mail.gmail.com>
References: <480F7F75.6030201@pobox.com>
	<f3b73b7d0804231309v1e3c995fq90cd627370deeb75@mail.gmail.com>
Message-ID: <480F994B.4090600@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> In the recent days we've also experienced similar problems with the
> OGR OCI driver. I suppose it might be related to the NCHAR or
> NVARCHAR2 columns, where the driver cannot figure out the proper
> length of the buffer to retrieve the field values. Therefore the OCI
> library always reports the following error:
> 
> ERROR 1: ORA-01406: fetched column value was truncated
> in OCIStmtFetch
> 
> Was this issue also addressed by this RFC or some additional changes
> should be made inside the driver? I couldn't find out how the driver
> will figure out the length of the buffers in these cases.

Tamas,

This RFC does not attempt to address multi-byte string parsing, or
manipulation issues.  I imagine we will need to deal with this
at some point in the future.

I imagine the OCI problem with sizing could be resolved by binding to
buffers 4x the stated column width.  Also, potentially some translation
would be required for NVARCHAR fields depending on what oracle does
by default.  I am *not* offering to address all these OGR drivers as
part of this RFC, but hopefully once the core services are supplied,
and OGR string fields are defined as UTF-8 it will be fairly straight
forward to fix these problems on a driver by driver basis.

If you don't want to fix this, file a ticket. Someone will be making
a pass through addressing Oracle issues in the coming months.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bclay at ball.com  Wed Apr 23 17:45:37 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Apr 23 17:45:41 2008
Subject: [gdal-dev] how to INSERT INTO USER_SDO_GEOM_METADATA with OGR
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFE5A@daytonmsg2k3.AERO.BALL.COM>

I am working on a program that uses GDAL / OGR to copy data from an ESRI
/ SDE database table stored on ORACLE into an SDO_GEOMETRY supported
table.  The program will also load CSV and shapefiles into SDO_GEOMETRY
supported tables.  It looks like I need to add a table to the
USER_SDO_GEOM_METADATA before I can register the SDO_GEOMETRY enabled
table with SDE to make it usable in ArcMap.

 

The SQL command I need to execute starts with "INSERT INTO
USER_SDO_GEOM_METADATA".  It looks like ogrDataSource ExecuteSql only
supports "CREATE INDEX", "DROP INDEX" and select functions and blocks
any INSERT or UPDATE calls.

 

Interestingly OGROCIDataSource::DeleteLayer sends a "DELETE FROM
USER_SDO_GEOM_METADATA" but I down't see anyplace that it calls the
insert.

 

The data appears to be copied from the SDE table to the OCI table but
ArcCatalog crashes trying to register the table.

 

Is there any way to get other SQL functions to pass through ExecuteSql
to support this insertion?

 

Is there a way to reach directly into the OCI data source driver
ExecuteSql?

 

 

Bruce

 

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080423/988f8b75/attachment.html
From Martin.Spott at mgras.net  Wed Apr 23 18:21:41 2008
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Apr 23 18:22:30 2008
Subject: [gdal-dev] VMAP data sources reporting 0 Features.
References: <e66a4dbf0804231012l3ab07dbamc6ad2d1e03f31033@mail.gmail.com>
Message-ID: <fuocpl$plg$1@osprey.mgras.de>

"Courtney Schitka" wrote:

> I get back a physical layer, however this layer reports 0 features and when
> I try and get a feature or iterate over them, I never seem to get a feature.

To me this sounds a bit like the "usual VPF issue": Strip every
trailing dot from the filenames and convert every upper case letter in
the directory tree to lower case.

I hope this helps,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From sfkeller at gmail.com  Wed Apr 23 19:33:53 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Apr 23 19:33:54 2008
Subject: [gdal-dev] Parameter for run-time substitution of values in
	mapfiles (e.g. for highlighting)?
Message-ID: <25bc040b0804231633p587a860dj318c7a0e588da1d9@mail.gmail.com>

 Dear Frank, dear all,

I need to highlight a single or a group of POIs and found that MapServer CGI
has run-time substitution since version 4.0.

Does anyone know about the usage of this in mapserver?
Can this feature be made available also for shp2img?

This would allow to alter portions of a mapfile based on data passed via a
command line parameter (or a CGI request in the case of MapServer). Below
you find an explanation of this feature taken from *
http://mapserver.gis.umn.edu/docs/howto/runsub*<http://mapserver.gis.umn.edu/docs/howto/runsub>
 :

Let's say you'd like the user to dynamically set a portion of an expression
so they could highlight a certain land cover class, and you have a form
element (called ctype) that allows them to choose between: forest, water,
wetland and developed. You could then set up a layer like so:

LAYER
  NAME 'covertypes'
  ...
  CLASSITEM 'type'
  CLASS # highlighted presentation
    EXPRESSION '%ctype%'
    ...
  END
  CLASS # default presentation
    ...
  END
END

When a request is processed the value for ctype is substituted for the
string %ctype% and the mapfile is processed as normal (...).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080424/c24d5bb0/attachment.html
From warmerdam at pobox.com  Thu Apr 24 00:41:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 24 00:41:24 2008
Subject: [gdal-dev] Parameter for run-time substitution of values in
	mapfiles (e.g. for highlighting)?
In-Reply-To: <25bc040b0804231633p587a860dj318c7a0e588da1d9@mail.gmail.com>
References: <25bc040b0804231633p587a860dj318c7a0e588da1d9@mail.gmail.com>
Message-ID: <48100F5C.9030703@pobox.com>

Stefan Keller wrote:
> Dear Frank, dear all,
>  
> I need to highlight a single or a group of POIs and found that MapServer 
> CGI has run-time substitution since version 4.0.
>  
> Does anyone know about the usage of this in mapserver?
> Can this feature be made available also for shp2img?

Stefan,

This topic would be better addressed on the mapserver-users or perhaps
the mapserver-dev mailing list.

I'm sure that shp2img could be extended to do the url override function.
I have no idea how complex that would be, nor do I have any particular
interest in implementing it.

If you wanted to do it, I'm sure you could file a ticket with a patch
implementing the support.  If you want it, but don't want to do it you
could file an enhancement ticket but I'm dubious will generate action.
You could also contract someone to implement it of course.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From schut at sarvision.nl  Thu Apr 24 02:54:59 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Apr 24 02:57:14 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <480F75B7.8040703@hostgis.com>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl> <480CDB13.8070605@hostgis.com>
	<480DA850.8010506@sarvision.nl> <480F75B7.8040703@hostgis.com>
Message-ID: <48102EC3.70307@sarvision.nl>

Gregor,

Glad it worked!
Those kap files are single-band colortable images, right? I'd use 
nearest neighbour interpolation than, for gdalwarp, instead of bilinear. 
Simple removing the '-rb' switch from your gdalwarp command should do 
the trick, as nn is the default. Imho it usually makes not much sense to 
interpolate colortable indices, except when this colortable is some 
representation of a more or less continuous gradient.


Gregor Mosheh wrote:
> Vincent Schut wrote:
>>>> Color depth: gdalwarp on the KAPs generates 8-bit palleted TIFFs. 
>>>> That may not be the best for quality.
> 
>>>> ^^This point might be your main issue.
>> I think you can use gdal's pct2rgb.py utility for that.
> 
> Sounds good; I've given that a try.
> My procedure from NOAA NRCs to GeoTIFFs is as follows:
> 
> gdalwarp -tps -rb -t_srs EPSG:4326 $kap $tif0
> pct2rgb.py $tif0 $tif1
> gdal_translate -quiet -co TILED=YES -srcwin $x $y $w $h $tif1 $tif2
> gdaladdo -r average $tif2 2 4 8 16 32
> 
> I think it looks pretty good. It's not as good as their hand-groomed 
> PNGs, but it's a significant improvement!
> 

From tutey at o2.pl  Thu Apr 24 03:48:36 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Thu Apr 24 03:48:48 2008
Subject: [gdal-dev] SRS stuff broken in GDAL and PROJ
In-Reply-To: <480F84F0.2030108@pobox.com>
References: <47F69506.3010207@o2.pl> <47FF8049.3050201@duif.net>
	<4800B7D9.6030307@duif.net>
	<200804131343.01414.marco.hugentobler@karto.baug.ethz.ch>
	<d368056f0804140538k1298c472m57ddcc08c7a8a6ce@mail.gmail.com>
	<48079C6E.1060508@o2.pl> <4807A225.1000404@pobox.com>
	<4807AD5B.1080409@o2.pl> <480F8167.7080908@o2.pl>
	<480F84F0.2030108@pobox.com>
Message-ID: <48103B54.3020101@o2.pl>

Frank Warmerdam pisze:
> Maciej Sieczka wrote:

>> I'm affraid PROJ.4 4.6.0 uses wrong (AFAICT) values for many 
>> coordinate systems. Compare the PROJ.4's epsg file in version 4.5.0 
>> and 4.6.0, and see how parameters differ (in terms of real numbers, 
>> not only number of extra zeros) in many SRS definitions, eg. EPSG 
>> 26794-26798, 2180, 2255-2262, 2057, 2000-2007 and more. Looks like 
>> some rounding errors (?). Eg.:
>>
>> 4.5.0:
>> <4009> +proj=longlat +a=6378450.047548896 +b=6356826.621488444 
>> +no_defs <>
>>
>> 4.6.0:
>> <4009> +proj=longlat +a=6378450.047548897 +b=6356826.621488445 
>> +no_defs  <>

> I believe these problems are due to a change in GDAL/OGR to use CPLAtof()
> which gives slightly different results than atof() in some cases.
> 
>   http://trac.osgeo.org/gdal/ticket/2036

Ouch. So SRS stuff is pretty much broken in GDAL and PROJ. I subscribed 
to the ticket and I'd be happy to help with testing.

> Perhaps you could work with Andrey on this problem and then I could
> regenerate things.

Please do. Can you say what is the latest safe GDAL version? As for PROJ 
- is it necessary to revert to 4.5.0 or is copying the epsg file from 
4.5.0 to 4.6.0 installation enough?

> BTW, we use a custom CPLAtof() so that coordinate systems with non "C"
> locale numbers can be parsed, and so that "C" locale numbers can be
> parsed in non "C" locales.

If that's not too much offtopic, can you explain why GDAL/OGR supports 
non-C locale numbers in SRS stuff? I never saw an SRS definition with 
comma instead of dot as a decimal separator (though I've been living in 
a non-C country). Are they common?

Maciek
From gregor.fikoczek at wheregroup.com  Thu Apr 24 08:00:26 2008
From: gregor.fikoczek at wheregroup.com (Gregor Fikoczek)
Date: Thu Apr 24 08:01:39 2008
Subject: [gdal-dev] Add and register a driver to OGR - How to ?
Message-ID: <200804241400.26599.gregor.fikoczek@wheregroup.com>


Hallo @ all, 

i am a newbie and trying to add and register a driver to OGR, but it fails. 
Can anyone post me a short how to?

What i've done:

1. I copied the directory with sources (called 'nas'), 
to 'gdal-1.5.1/ogr/ogrsf_frmts/'

Now I don't konow how I can register the driver, I tried the following:

2.  Eding the line 'void CPL_DLL RegisterOGRNAS();' to the 
file 'gdal-1.5.1/ogr/ogrsf_frmts/ogrsf_frmts.h'
(Maybe I have to register the driver anywhere else???)

In the end i tested the formats 
with: 'gdal-1.5.1/ogr/ogrsf_frmts/apps/ogrinfo --formats' but there was no 
supported format called 'nas'

Regards, 
Greg

-- 
---------------------------------------
WhereGroup GmbH & Co. KG
Siemensstra?e 8
53121 Bonn
Germany

Gregor Fikoczek
Email: gregor.fikoczek@wheregroup.com
Fon: +49 (0)228 / 90 90 38 - 25
Fax: +49 (0)228 / 90 90 38 - 11

info@wheregroup.com
www.wheregroup.com
Amtsgericht Bonn, HRA 6788
-------------------------------
Komplement?rin:
WhereGroup Verwaltungs GmbH
vertreten durch:
Arnulf Christl, Olaf Knopp, Peter Stamm
---------------------------------------
From mateusz at loskot.net  Thu Apr 24 08:09:34 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr 24 08:09:41 2008
Subject: [gdal-dev] Add and register a driver to OGR - How to ?
In-Reply-To: <200804241400.26599.gregor.fikoczek@wheregroup.com>
References: <200804241400.26599.gregor.fikoczek@wheregroup.com>
Message-ID: <4810787E.1090404@loskot.net>

Gregor Fikoczek wrote:
> Hallo @ all, 
> 
> i am a newbie and trying to add and register a driver to OGR, but it fails. 
> Can anyone post me a short how to?
> 
> What i've done:
> 
> 1. I copied the directory with sources (called 'nas'), 
> to 'gdal-1.5.1/ogr/ogrsf_frmts/'
> 
> Now I don't konow how I can register the driver, I tried the following:
> 
> 2.  Eding the line 'void CPL_DLL RegisterOGRNAS();' to the 
> file 'gdal-1.5.1/ogr/ogrsf_frmts/ogrsf_frmts.h'
> (Maybe I have to register the driver anywhere else???)
> 
> In the end i tested the formats 
> with: 'gdal-1.5.1/ogr/ogrsf_frmts/apps/ogrinfo --formats' but there was no 
> supported format called 'nas'

Greg,

AFAIK, the NAS driver depends on Xerces. Check the ./configure output if 
Xerces is detected properly.

The NAS driver is automatically enabled when GDAL is built with Xerces.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Shawn.Gong at drdc-rddc.gc.ca  Thu Apr 24 09:33:32 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Apr 24 09:33:40 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <480E1C29.8050204@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120033@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi Frank and list,

gdal1.5.1 make error on RedHat Linux, please see below.
I tracked down to ticket #1866 - "KML driver needs very new expat", but
don't know how to fix it.


thanks,
Shawn

=================================
libtool: compile:  g++ -g -O2 -Wall -I.. -I../..
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include -c ogrmemlayer.cpp  -fPIC -DPIC -o
../o/.libs/ogrmemlayer.o
libtool: compile:  g++ -g -O2 -Wall -I.. -I../..
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include -c ogrmemlayer.cpp -o
../o/ogrmemlayer.o >/dev/null 2>&1
make[3]: Leaving directory
`/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts/mem'
make -C kml
make[3]: Entering directory
`/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts/kml'
/bin/sh /home/sgong/dev171/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I.. -I../.. -I/usr/include
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts  -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include  -DHAVE_EXPAT -c -o
../o/ogr2kmlgeometry.o ogr2kmlgeometry.cpp
libtool: compile:  g++ -g -O2 -Wall -I.. -I../.. -I/usr/include
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include -DHAVE_EXPAT -c ogr2kmlgeometry.cpp
-fPIC -DPIC -o ../o/.libs/ogr2kmlgeometry.o
libtool: compile:  g++ -g -O2 -Wall -I.. -I../.. -I/usr/include
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include -DHAVE_EXPAT -c ogr2kmlgeometry.cpp -o
../o/ogr2kmlgeometry.o >/dev/null 2>&1
/bin/sh /home/sgong/dev171/gdal-1.5.1/libtool --mode=compile --tag=CXX
g++ -g -O2  -Wall  -I.. -I../.. -I/usr/include
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts  -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include  -DHAVE_EXPAT -c -o
../o/ogrkmldriver.o ogrkmldriver.cpp
libtool: compile:  g++ -g -O2 -Wall -I.. -I../.. -I/usr/include
-I/home/sgong/dev171/gdal-1.5.1/port
-I/home/sgong/dev171/gdal-1.5.1/gcore
-I/home/sgong/dev171/gdal-1.5.1/alg -I/home/sgong/dev171/gdal-1.5.1/ogr
-I/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/sgong/dev171/gdal-1.5.1/port -I/home/sgong/dev171/dist
-I/home/sgong/dev171/dist/include -DHAVE_EXPAT -c ogrkmldriver.cpp
-fPIC -DPIC -o ../o/.libs/ogrkmldriver.o
In file included from kmlvector.h:32,
                 from ogr_kml.h:38,
                 from ogrkmldriver.cpp:31:
kml.h:41:2: #error "Old version of expat, please upgrade to expat 2.x"
In file included from kmlvector.h:32,
                 from ogr_kml.h:38,
                 from ogrkmldriver.cpp:31:
kml.h:77: variable or field `XMLCALL' declared void
kml.h:77: syntax error before `(' token
kml.h:78: variable or field `XMLCALL' declared void
kml.h:78: syntax error before `(' token
kml.h:79: variable or field `XMLCALL' declared void
kml.h:79: syntax error before `(' token
kml.h:80: variable or field `XMLCALL' declared void
kml.h:80: syntax error before `(' token
kml.h:78: duplicate member `KML::XMLCALL'
kml.h:79: duplicate member `KML::XMLCALL'
kml.h:80: duplicate member `KML::XMLCALL'
make[3]: *** [../o/ogrkmldriver.o] Error 1
make[3]: Leaving directory
`/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts/kml'
make[2]: *** [kml-target] Error 2
make[2]: Leaving directory
`/home/sgong/dev171/gdal-1.5.1/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/home/sgong/dev171/gdal-1.5.1/ogr'
make: *** [ogr-target] Error 2

From ivan.lucena at pmldnet.com  Thu Apr 24 09:44:28 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Apr 24 09:44:33 2008
Subject: [Gdal-dev] Geotransform (Rotate Image 270 degrees)
In-Reply-To: <480F319D.3000309@pobox.com>
References: <16833575.post@talk.nabble.com> <480F319D.3000309@pobox.com>
Message-ID: <48108EBC.9000906@pmldnet.com>

Frank,

I totally agree with you that SetGeoTransform() does not rotate but for 
your a user point of view it gives the impression that it does because 
when they open the changed image on a rotation-sensible viewer it shows 
it as if it was rotated. Same thing think if you translate or warp it, no?

Best regards,

Ivan


Frank Warmerdam wrote:
> simonm1234 wrote:
>> Hi,
>>
>> How do you rotate an image 270 degrees using SetGeoTransform?
>> What values should I use for  adfGeoTransform[2] and adfGeoTransform[4]?
>>
>> Thanks,
>> Simon.
>>
>> // Set Bounds/Pixel size: {}
>> //adfGeoTransform[0] /* top left x */
>> //adfGeoTransform[1] /* w-e pixel resolution */
>> //adfGeoTransform[2] /* rotation, 0 if image is "north up" */
>> //adfGeoTransform[3] /* top left y */
>> //adfGeoTransform[4] /* rotation, 0 if image is "north up" */
>> //adfGeoTransform[5] /* n-s pixel resolution */
>>
>> double[] trans = new double[] {325000.0, 10, 0.0, 1010000.0, 0.0, -10}
>> ds.SetGeoTransform(trans);
> 
> Simon,
> 
> First, lets be clear, SetGeoTransform() does not rotate anything.  It
> just records a transformation between pixel/line and georef space.  You
> can set a geotransform that describes an image that is "west-up" as
> opposed to the normal "north-up".
> 
> An image with the first (top left pixel not accounting for georeferencing)
> actually appearing at the bottom left (west up) might look like:
> 
>  { 325000, 0, -10.0, 1010000, 10.0, 0.0 }
> 
> This basically means that each step along a scanline is a step 10m north,
> and each step down an image column is a 10m step east.
> 
> Best regards,
From warmerdam at pobox.com  Thu Apr 24 09:59:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 24 10:00:02 2008
Subject: [Gdal-dev] Geotransform (Rotate Image 270 degrees)
In-Reply-To: <48108EBC.9000906@pmldnet.com>
References: <16833575.post@talk.nabble.com> <480F319D.3000309@pobox.com>
	<48108EBC.9000906@pmldnet.com>
Message-ID: <4810923F.5010600@pobox.com>

Lucena, Ivan wrote:
> Frank,
> 
> I totally agree with you that SetGeoTransform() does not rotate but for 
> your a user point of view it gives the impression that it does because 
> when they open the changed image on a rotation-sensible viewer it shows 
> it as if it was rotated. 

Ivan,

That is true, but it is important (IMHO) for developers to know the
distinction which is why I stressed it.  Otherwise it would be easy to
make lots of mistakes.

 > Same thing think if you translate or warp it, no?

A gdal_translate (or CreateCopy()) will carry over the geotransform to
the new file if it can, but it won't reorganize the image data to account
for rotation or anything like that.

Gdalwarp will resample the image and produce a north up result.  This then
is where the rotation of the geotransform is applied "for real".

Note that lots of geospatial viewers cannot properly display non-northup
images.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From umn-ms at hydrotec.de  Thu Apr 24 10:47:54 2008
From: umn-ms at hydrotec.de (umn-ms@hydrotec.de)
Date: Thu Apr 24 11:21:29 2008
Subject: [gdal-dev] Problems with libecwj2-ms.dll 
Message-ID: <OFC454F07A.08EA3073-ONC1257435.004FD235-C1257435.00514A75@hydrotec.de>

Hello

I'd like to build gdal 1.5.1 with ECW-Support (ECW-SDK 3.3) and MS-VC 8.0.
I get a linker-error:
u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: invalid 
or corrupt file: cannot read at 0x290

I tried 
http://download.osgeo.org/gdal/win32/1.5/gdalwin32exe150.zip 
and 
http://trac.osgeo.org/gdal/attachment/ticket/2200/libecwj2.zip?format=raw
with the same result.

Any advise?
Benedikt Rothe


      lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib 
vb6\vb6_support.obj
ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols found; 
archive member will be inaccessible

        link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller 
/INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods 
/INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll 
/INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48 
/INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28 
/INCLUDE:_OCTNewCoordinateTransformation@8 /INCLUDE:_vbSafeArrayToPtr@16 
port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj 
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj odbc32.lib 
odbccp32.lib user32.lib  u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll 
gcore\Version.res  /out:gdal15.dll /implib:gdal_i.lib
u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: invalid 
or corrupt file: cannot read at 0x290
NMAKE : fatal error U1077: '"C:\Programme\Microsoft Visual Studio 
8\VC\BIN\link.EXE"' : return code '0x453'
Stop.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080424/98320da7/attachment.html
From mateusz at loskot.net  Thu Apr 24 11:22:37 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr 24 11:22:43 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120033@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <480E1C29.8050204@pobox.com>	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E120033@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4810A5BD.6040005@loskot.net>

Gong, Shawn (Contractor) wrote:
> hi Frank and list,
> 
> gdal1.5.1 make error on RedHat Linux, please see below.
> I tracked down to ticket #1866 - "KML driver needs very new expat", but
> don't know how to fix it.

Shawn,

What version of Expat to you have on this Linux distribution?

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From warmerdam at pobox.com  Thu Apr 24 12:21:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 24 12:22:16 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
Message-ID: <4810B39C.1090704@pobox.com>

Motion: To approve RFC 23: Unicode Support in OGR

  http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

Folks,

We have been discussing this quite a bit the last few days in IRC and the
consensus seems to be that this RFC is a positive step towards broader
unicode/character set support with the understanding that there are lots of
other details that will need to be addressed one day.

One thing that Andrey mentioned is the ICU project as a possible alternate
back end instead of iconv():

   http://www.icu-project.org/

On review it seems to support (at least most) iconv() character set names
so it seems like it would be pretty easy to switch iconv() out for ICU in the
future if we wanted to.

I'll open voting with a +1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Thu Apr 24 12:24:06 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Apr 24 12:23:25 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these NOAA
	NRCs
In-Reply-To: <48102EC3.70307@sarvision.nl>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl> <480CDB13.8070605@hostgis.com>
	<480DA850.8010506@sarvision.nl> <480F75B7.8040703@hostgis.com>
	<48102EC3.70307@sarvision.nl>
Message-ID: <4810B426.4090506@noaa.gov>

Vincent Schut wrote:
> Those kap files are single-band colortable images, right?

yes.

> I'd use 
> nearest neighbour interpolation than, for gdalwarp, instead of bilinear. 
> Simple removing the '-rb' switch from your gdalwarp command should do 
> the trick, as nn is the default.

Will GDAL even try to do bilinear with colortable images? I think it may 
only do NN anyway.

Which is why I suggested that converting to RBG should be the first 
step, before any warping or rescaling.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From gregor at hostgis.com  Thu Apr 24 12:28:43 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Thu Apr 24 12:28:50 2008
Subject: [gdal-dev] MapServer's image quality stinks serving up these
	NOAA NRCs
In-Reply-To: <48102EC3.70307@sarvision.nl>
References: <480BD07A.5000002@hostgis.com> <480BF5D9.4000801@pobox.com>
	<480C4E2A.1010606@sarvision.nl> <480CDB13.8070605@hostgis.com>
	<480DA850.8010506@sarvision.nl> <480F75B7.8040703@hostgis.com>
	<48102EC3.70307@sarvision.nl>
Message-ID: <4810B53B.9060205@hostgis.com>

Vincent Schut wrote:
> Gregor, Glad it worked!

M hm. It's a big improvement, not quite to par with hand-groomed PNGs 
but still nice. Now to see what the client thinks.


> Those kap files are single-band colortable images, right? I'd use 
> nearest neighbour interpolation than, for gdalwarp, instead of bilinear.

Okay; I've done this. I must say, there's no noticeable change in the 
quality as far as I can tell. Just FYI in this case.

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From warmerdam at pobox.com  Thu Apr 24 14:59:50 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 24 15:00:14 2008
Subject: [gdal-dev] Re: SRS stuff broken in GDAL and PROJ
In-Reply-To: <48103B54.3020101@o2.pl>
References: <47F69506.3010207@o2.pl> <47FF8049.3050201@duif.net>
	<4800B7D9.6030307@duif.net>
	<200804131343.01414.marco.hugentobler@karto.baug.ethz.ch>
	<d368056f0804140538k1298c472m57ddcc08c7a8a6ce@mail.gmail.com>
	<48079C6E.1060508@o2.pl> <4807A225.1000404@pobox.com>
	<4807AD5B.1080409@o2.pl> <480F8167.7080908@o2.pl>
	<480F84F0.2030108@pobox.com> <48103B54.3020101@o2.pl>
Message-ID: <4810D8A6.8070705@pobox.com>

Maciej Sieczka wrote:
>> I believe these problems are due to a change in GDAL/OGR to use CPLAtof()
>> which gives slightly different results than atof() in some cases.
>>
>>   http://trac.osgeo.org/gdal/ticket/2036
> 
> Ouch. So SRS stuff is pretty much broken in GDAL and PROJ. I subscribed 
> to the ticket and I'd be happy to help with testing.

Maciej,

I disagree with the assessment that things are broken.  They are just
a little bent. Numerically the differences are insignificant.  The
issue is with comparing string representations of coordinate systems.

>> Perhaps you could work with Andrey on this problem and then I could
>> regenerate things.
> 
> Please do. Can you say what is the latest safe GDAL version? As for PROJ 
> - is it necessary to revert to 4.5.0 or is copying the epsg file from 
> 4.5.0 to 4.6.0 installation enough?

Generally using the older epsg file is sufficient.

>> BTW, we use a custom CPLAtof() so that coordinate systems with non "C"
>> locale numbers can be parsed, and so that "C" locale numbers can be
>> parsed in non "C" locales.
> 
> If that's not too much offtopic, can you explain why GDAL/OGR supports 
> non-C locale numbers in SRS stuff? I never saw an SRS definition with 
> comma instead of dot as a decimal separator (though I've been living in 
> a non-C country). Are they common?

They are not common, but they do occur and I was asked to make them work.

Best Regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dmorissette at mapgears.com  Thu Apr 24 15:22:48 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Apr 24 15:22:48 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <4810B39C.1090704@pobox.com>
References: <4810B39C.1090704@pobox.com>
Message-ID: <4810DE08.8090306@mapgears.com>

Frank Warmerdam wrote:
> Motion: To approve RFC 23: Unicode Support in OGR
> 
>  http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From Shawn.Gong at drdc-rddc.gc.ca  Thu Apr 24 16:07:27 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu Apr 24 16:07:36 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <4810A5BD.6040005@loskot.net>
References: <480E1C29.8050204@pobox.com>	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca><DF1471B5C308B346BF5A2AEA00C5615E120033@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4810A5BD.6040005@loskot.net>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12003B@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi List,
I updated to version 2.2.3 of libexpat and got these errors instead:
Is it because of the conflict of libcom_err.so.3, needed by
/usr/lib/libssl.so, with libcom_err.so.2

Do I need to rebuild /usr/lib/libssl.so ?

thanks,
Shawn



==================================
/bin/sh /home/sgong/dev171/gdal-1.5.1/libtool --mode=link       g++
gdalinfo.o  \
        /home/sgong/dev171/gdal-1.5.1/libgdal.la -o gdalinfo
libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so -L/usr/local/lib
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src/.lib
s -L/home/marinier/gcc-4.2.2-build/./gcc -L/home/sgong/dev171/dist/lib
-L/home/sgong/dev171/dist -L/usr/lib -L/usr/kerberos/lib
/usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so
/usr/local/lib/libexpat.so /home/sgong/dev171/dist/lib/libhdf5.so
/home/sgong/dev171/dist/lib/libsz.so -lmfhdf -ldf
/usr/local/lib/libsz.so -logdi31 /usr/lib/libjpeg.so -lpq -lpthread -lrt
/usr/local/lib/libcurl.so -lldap -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_err -lk5crypto -lresolv -ldl -lz /usr/local/lib/libstdc++.so -lm
-lc -lgcc_s -Wl,-rpath -Wl,/home/sgong/dev171/dist/lib -Wl,-rpath
-Wl,/usr/local/lib
/usr/bin/ld: warning: libcom_err.so.3, needed by /usr/lib/libssl.so, may
conflict with libcom_err.so.2
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::allocate(unsigned int)'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_free_list'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::~_Lock()'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_force_new'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::_Lock()'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_Rep::_S_create(unsigned int, std::allocator<char> const&)'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_refill(unsigned
int)'/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference
to `std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_S_empty_rep_storage'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_node_allocator_lock'
/home/sgong/dev171/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::deallocate(void*, unsigned
int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/sgong/dev171/gdal-1.5.1/apps'
make: *** [apps-target] Error 2

From hobu.inc at gmail.com  Thu Apr 24 16:20:55 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Apr 24 16:21:01 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <4810DE08.8090306@mapgears.com>
References: <4810B39C.1090704@pobox.com> <4810DE08.8090306@mapgears.com>
Message-ID: <2C1B4BC3-8D19-48F7-BE6E-A5AB208B49BB@gmail.com>


On Apr 24, 2008, at 2:22 PM, Daniel Morissette wrote:
> Frank Warmerdam wrote:
>> Motion: To approve RFC 23: Unicode Support in OGR
>> http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
> +1

+1.  I'll take care of the ArcSDE driver.
From szekerest at gmail.com  Thu Apr 24 18:14:40 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr 24 18:14:43 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <4810B39C.1090704@pobox.com>
References: <4810B39C.1090704@pobox.com>
Message-ID: <f3b73b7d0804241514n74541d21o8fdc3b31d075c243@mail.gmail.com>

+1

Tamas


2008/4/24, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To approve RFC 23: Unicode Support in OGR
>
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
>  Folks,
>
>  We have been discussing this quite a bit the last few days in IRC and the
>  consensus seems to be that this RFC is a positive step towards broader
>  unicode/character set support with the understanding that there are lots of
>  other details that will need to be addressed one day.
>
>  One thing that Andrey mentioned is the ICU project as a possible alternate
>  back end instead of iconv():
>
>   http://www.icu-project.org/
>
>  On review it seems to support (at least most) iconv() character set names
>  so it seems like it would be pretty easy to switch iconv() out for ICU in
> the
>  future if we wanted to.
>
>  I'll open voting with a +1.
>
>  Best regards,
>  --
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From windwxc at sina.com  Thu Apr 24 22:43:02 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Thu Apr 24 22:43:09 2008
Subject: [gdal-dev] please help me check my code about transforming pg data
	to shape
Message-ID: <20080425024302.D14E51EE99D@mail3-145.sinamail.sina.com.cn>

&nbsp;hi,every one. I need read the spatial data in postgresql and transform it to shape file and show it by axmapcontrol in my project. My code can run but when i use arcmap open the new shape file i find it cannot show any graphics and the attribute table is empty. the size of the shape isnot 0k. I run same code but only once the shape file can show graphic and can be seen the arrtibute. The following is code and i wish you can help me find where is error.
public void GetGeometry(string sqltext)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;open the postgis and read data&nbsp;according&nbsp;&nbsp;sqltext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogr.RegisterAll();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show(e.Message); }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource pgconn = OSGeo.OGR.Ogr.Open ("PG:host=localhost dbname='stdb' user='stuser' password=123", 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myOGRLay = pgconn.ExecuteSQL(sqltext,null, "tt");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FeatureDefn myDef = myOGRLay.GetLayerDefn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int TT = myDef.GetFieldCount();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ftcount = myOGRLay.GetFeatureCount(1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource shpconn;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Driver shpdriver;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shpdriver=Ogr.GetDriverByName("ESRI Shapefile");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string path = Application.StartupPath + "\\database\\yantian2005.shp";
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.SpatialReference myspatial = new SpatialReference("");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myspatial.ImportFromProj4("+proj=Transverse_Mercator +zone=48N+datum=GCS_WGS_1984");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shpconn = shpdriver.CreateDataSource(path, null);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myshplay = shpconn.CreateLayer("yantian2005", null , OSGeo.OGR.wkbGeometryType.wkbPolygon, null);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myshplay == null)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox.Show("create layer failor!");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Feature myOGRFeat = null;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i < TT; i++)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FieldDefn fdef = myDef.GetFieldDefn(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myshplay.CreateField(fdef, 1) == OSGeo.OGR.Ogr.OGRERR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int count = 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.FeatureDefn myFDefn = myOGRLay.GetLayerDefn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ((myOGRFeat = myOGRLay.GetNextFeature()) != null)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Feature myOGRft = null;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft = myOGRLay.GetFeature(count);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Geometry myGeom = myOGRFeat.GetGeometryRef();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetGeometry(myGeom);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i < myFDefn.GetFieldCount(); i++)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.FieldDefn myFieD = myFDefn.GetFieldDefn(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTString)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsString(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTInteger)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsDouble(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTInteger)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsInteger(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft = myOGRFeat.Clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetFrom(myOGRFeat, 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myshplay.CreateFeature(myOGRft);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count = count + 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; axMapControl1.ActiveView.FocusMap.ClearLayers();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axMapControl1.AddLayerFromFile(Application.StartupPath + "\\database\\yantian2005.shp",0);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axMapControl1.ActiveView.Refresh();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //pgconn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show( e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // conn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Application.Exit();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox.Show( e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
i know some my code is rudundant and wish you can point out.
thank you 
best regard.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow

-------------------------------------------------------------------
" "( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080421.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/5a11b8fd/attachment-0001.html
From umn-ms at hydrotec.de  Fri Apr 25 03:32:08 2008
From: umn-ms at hydrotec.de (umn-ms@hydrotec.de)
Date: Fri Apr 25 03:34:04 2008
Subject: Antwort: [gdal-dev] Problems with libecwj2-ms.dll
In-Reply-To: <OFC454F07A.08EA3073-ONC1257435.004FD235-C1257435.00514A75@hydrotec.de>
Message-ID: <OFFD97CB0B.C41A328B-ONC1257436.0028FD77-C1257436.00296504@hydrotec.de>

Ups! I tried to link a DLL!
Well, obviously I need a "libecwj2.lib".

But I'm still confused, where/how to get this.
Do I have to compile the ECW-SDK on my own? 
I'd really like to avoid this ...

Benedikt

gdal-dev-bounces@lists.osgeo.org schrieb am 24.04.2008 16:47:54:

> 
> Hello 
> 
> I'd like to build gdal 1.5.1 with ECW-Support (ECW-SDK 3.3) and MS-VC 
8.0. 
> I get a linker-error: 
> u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: 
> invalid or corrupt file: cannot read at 0x290 
> 
> I tried 
> http://download.osgeo.org/gdal/win32/1.5/gdalwin32exe150.zip 
> and 
> 
http://trac.osgeo.org/gdal/attachment/ticket/2200/libecwj2.zip?format=raw 
> with the same result. 
> 
> Any advise? 
> Benedikt Rothe 
> 
> 
>       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
> frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib 
vb6\vb6_support.obj
> ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols 
> found; archive member will be inaccessible 
> 
>         link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller 
> /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:
> _OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /INCLUDE:
> _GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /INCLUDE:
> _GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28 
> /INCLUDE:_OCTNewCoordinateTransformation@8 /INCLUDE:
> _vbSafeArrayToPtr@16 port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj 
> ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj 
> odbc32.lib odbccp32.lib user32.lib  u:\ws\mapserver\gdal-1.5.
> 1\ecw\libecwj2.dll    gcore\Version.res  /out:gdal15.dll 
/implib:gdal_i.lib 
> u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: 
> invalid or corrupt file: cannot read at 0x290 
> NMAKE : fatal error U1077: '"C:\Programme\Microsoft Visual Studio 
> 8\VC\BIN\link.EXE"' : return code '0x453' 
> Stop. 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/54b97934/attachment.html
From umn-ms at hydrotec.de  Fri Apr 25 06:15:08 2008
From: umn-ms at hydrotec.de (umn-ms@hydrotec.de)
Date: Fri Apr 25 06:17:08 2008
Subject: Antwort: [gdal-dev] Problems with libecwj2-ms.dll
In-Reply-To: <OFFD97CB0B.C41A328B-ONC1257436.0028FD77-C1257436.00296504@hydrotec.de>
Message-ID: <OF2D9AD02E.242DE0A5-ONC1257436.0037D097-C1257436.00385166@hydrotec.de>

> Well, obviously I need a "libecwj2.lib". 
> But I'm still confused, where/how to get this. 
> Do I have to compile the ECW-SDK on my own? 

Finally I succeed.

I did compile the ECW-SDK.
And for this one I needed "Microsoft Platform SDK for Windows Server 2003 
R2" ...

I don't know about the legal issues. Would it be possible to distribute 
libecwj2.lib
in http://download.osgeo.org/gdal/win32/1.5/gdalwin32ecw150.zip?

Ain't easy
Benedikt


gdal-dev-bounces@lists.osgeo.org schrieb am 25.04.2008 09:32:08:

> 
> Ups! I tried to link a DLL! 
> Well, obviously I need a "libecwj2.lib". 
> 
> But I'm still confused, where/how to get this. 
> Do I have to compile the ECW-SDK on my own? 
> I'd really like to avoid this ... 
> 
> Benedikt 
> 
> gdal-dev-bounces@lists.osgeo.org schrieb am 24.04.2008 16:47:54:
> 
> > 
> > Hello 
> > 
> > I'd like to build gdal 1.5.1 with ECW-Support (ECW-SDK 3.3) and MS-VC 
8.0. 
> > I get a linker-error: 
> > u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: 
> > invalid or corrupt file: cannot read at 0x290 
> > 
> > I tried 
> > http://download.osgeo.org/gdal/win32/1.5/gdalwin32exe150.zip 
> > and 
> > 
http://trac.osgeo.org/gdal/attachment/ticket/2200/libecwj2.zip?format=raw 
> > with the same result. 
> > 
> > Any advise? 
> > Benedikt Rothe 
> > 
> > 
> >       lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
> > frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib 
> vb6\vb6_support.obj
> > ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols 
> > found; archive member will be inaccessible 
> > 
> >         link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller 
> > /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:
> > _OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /INCLUDE:
> > _GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /INCLUDE:
> > _GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28 
> > /INCLUDE:_OCTNewCoordinateTransformation@8 /INCLUDE:
> > _vbSafeArrayToPtr@16 port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj 
> > ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj 
> > odbc32.lib odbccp32.lib user32.lib  u:\ws\mapserver\gdal-1.5.
> > 1\ecw\libecwj2.dll    gcore\Version.res  /out:gdal15.dll 
/implib:gdal_i.lib 
> > u:\ws\mapserver\gdal-1.5.1\ecw\libecwj2.dll : fatal error LNK1107: 
> > invalid or corrupt file: cannot read at 0x290 
> > NMAKE : fatal error U1077: '"C:\Programme\Microsoft Visual Studio 
> > 8\VC\BIN\link.EXE"' : return code '0x453' 
> > Stop. 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/c5f16c94/attachment.html
From dron at ak4719.spb.edu  Fri Apr 25 08:27:46 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Fri Apr 25 08:40:00 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <4810B39C.1090704@pobox.com>
References: <4810B39C.1090704@pobox.com>
Message-ID: <20080425122746.GA32492@ak4719.spb.edu>

On Thu, Apr 24, 2008 at 12:21:48PM -0400, Frank Warmerdam wrote:
> Motion: To approve RFC 23: Unicode Support in OGR
> 
>  http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

Frank,

I have read the proposal once again and should say that I dislake the
interface suggested. With this API the character encoding is not a
property of the string object but an external knowlege. Imagine that you
are initializing two CPLString objects from the same const char* string,
but for one of them you are calling recode() method later. How do you
know what object was changed? You should keep track of encodings
yourself. So the encoding should be a property of string object, but
then the recode() method should have single argument and constructor
taking encoding value is also required.

But this way of modifying CPLString is also bad and adds unnecessary
complication. What I finally suggesting is to assume that the internal
encoding either UTF-8 when you are constructing string specifying
encoding or unknown (as it is now) and then you are keeping encoding of
the string somwhere else.

// Constructor taking the 8-bit string and its encoding. If input
// encoding is set, convert string from that encoding to UTF-8 for
// internal representation. If pszEncoding is NULL, then do nothing and
// store 8-bit string as is (and that is the way how it works now, so we
// are not breaking existing code and do not introducing additional
// recoding). If pszEncoding is "" then take encoding from current
// locale.
//
// Later we can declare that if pszEncoding is NULL then input string is
// in UTF-8 and again, store it as is without recoding.
CPLString( const char *pszString, const char *pszEncoding = NULL );

// The same cons for wchar_t, no difference with suggested in RFC-23
CPLString::CPLString( const wchar_t*pszInput, const char *pszEncoding =
"UCS-2" );

// Now the getter for 8-bit recoded strings. Take encoding from locale
// by default.
char *CPLString::GetAs( const char *pszDstEncoding = "" );

// Getter for wchar_t strings, the same as in RFC-23.
wchar_t *CPLString::GetAsWChar( const char *pszDstEncoding = "UCS-2" );

With this API I think we are doing pretty much the same as with
suggested in RFC-23, but with much less ambiguity.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From warmerdam at pobox.com  Fri Apr 25 08:59:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 25 08:59:46 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <20080425122746.GA32492@ak4719.spb.edu>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu>
Message-ID: <4811D5A4.5040203@pobox.com>

Andrey Kiselev wrote:
> But this way of modifying CPLString is also bad and adds unnecessary
> complication. What I finally suggesting is to assume that the internal
> encoding either UTF-8 when you are constructing string specifying
> encoding or unknown (as it is now) and then you are keeping encoding of
> the string somwhere else.

Andrey,

I'm -1 on suddenly having CPLString do automatic recoding from the
current locale to UTF-8, or from UTF-8 back to the current locale
on removal.  This adds a hard to predict amount of extra work and
it is likely to break lots of pieces of existing code that use CPLString
on text that is not necessarily in the current locale.

I deliberately avoiding making the RFC 5 assumption that CPLString
is UTF-8 internally at all times to avoid what could be a lot of
risky and expensive transformations.

I also think it might be hard to get all CPLString methods to honour
the same rules that you imply for the constructors.  For instance,
you do not address the assignment operator but it would be perverse
(to me) if CPLString X("abc") gave me a different string than assigning
"abc" to an existing CPLString.

I do understand that my proposed changes to CPLString leave the onus on
higher level code to keep track of the encoding that applies to different
strings.  But - really - they still need to be quite aware of this for
values being assigned to CPLString.

I wouldn't be adverse to adding a CPLUTF8String class derived from
CPLString at some point that offered carefully thought out semantics
somewhat similar to what you want.  But I (after some initial consideration)
decided not to pursue this idea for now since I don't have the time and
expertise to do it justice, and it really does not seem important to
what I want to do.

Does my rationale make sense?  I'm particularly wanting to avoid any
changes in the behavior of existing CPLString use without careful
consideration.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Apr 25 09:13:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 25 09:13:27 2008
Subject: Antwort: [gdal-dev] Problems with libecwj2-ms.dll
In-Reply-To: <OF2D9AD02E.242DE0A5-ONC1257436.0037D097-C1257436.00385166@hydrotec.de>
References: <OF2D9AD02E.242DE0A5-ONC1257436.0037D097-C1257436.00385166@hydrotec.de>
Message-ID: <4811D8DD.8020309@pobox.com>

umn-ms@hydrotec.de wrote:
> 
>  > Well, obviously I need a "libecwj2.lib".
>  > But I'm still confused, where/how to get this.
>  > Do I have to compile the ECW-SDK on my own?
> 
> Finally I succeed.
> 
> I did compile the ECW-SDK.
> And for this one I needed "Microsoft Platform SDK for Windows Server 
> 2003 R2" ...
> 
> I don't know about the legal issues. Would it be possible to distribute 
> libecwj2.lib
> in http://download.osgeo.org/gdal/win32/1.5/gdalwin32ecw150.zip?
> 
> Ain't easy
> Benedikt

Benedikt,

I'm quite leery of distributing ecw sdk libraries under the auspices of
OSGeo.  In order to keep things legally legitimate I believe it is best
for users of the ECW SDK to get it from ERMapper/Leica/Erdas directly, and
to agree to their click through license.

If I agree to their click through license, then upload it to
download.osgeo.org for distributions, and someone who grabs it violates
the license it would be on my head (at least to some extent) since I made
no reasonable effort to get them to agree to the requirements that I am
bound to enforce.

I have spoken to folks at ERMapper/Leica/Erdas about this recently, and they
are reviewing licensing terms, and have expressed a willingness to help
vette techniques for including ECW support in OSGeo4W.  But our basic
conclusion in that discussion was that for folks building ECW support into
GDAL themselves, they really ought to be going to ERMapper/Leica/Erdas for
the SDK so they are the one directly bound by the click-through.

Doesn't all this make real open source look so much more pleasant!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From c.schitka at gmail.com  Fri Apr 25 09:42:24 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Fri Apr 25 09:42:26 2008
Subject: [gdal-dev] VMAP Problems...
Message-ID: <e66a4dbf0804250642j50ee37a8n9af7c1dcef94e316@mail.gmail.com>

InboxX

Reply to all
Forward
Reply by chat
Filter messages like this
Print
Add to Contacts list
Delete this message
Report phishing
Report not phishing
Show original
Show in fixed width font
Show in variable width font
Message text garbled?
Why is this spam/nonspam?
Courtney Schitka to gdal-dev
show details Apr 23 (2 days ago) Reply


Hi List,

This is my first posting, so my apologies if it's been answered prior. I
have a VMAP data source, I am trying to open with Gdal-OGDI. I have rebuilt
Gdal 1.5.1 with OGDI enabled and everything is linking and opening fine.
When I open my data source the GDAL code goes through the OGDI hoops, and
opens the data source, giving me back an OGRLayer, which I got by doing
something like this

 OGRDS->GetLayByName(LayerName)

I get back a physical layer, however this layer reports 0 features and when
I try and get a feature or iterate over them, I never seem to get a feature.


I would think it's my datasource however when I open the same VMAP data
source with the same layer using ogrinfo, I get all the feature in the data
source listed.

Please Help!

Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/9d6affd5/attachment-0001.html
From dron at ak4719.spb.edu  Fri Apr 25 10:33:04 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Fri Apr 25 10:55:04 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <4811D5A4.5040203@pobox.com>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu>
	<4811D5A4.5040203@pobox.com>
Message-ID: <20080425143304.GA356@ak4719.spb.edu>

On Fri, Apr 25, 2008 at 08:59:16AM -0400, Frank Warmerdam wrote:
> I'm -1 on suddenly having CPLString do automatic recoding from the
> current locale to UTF-8, or from UTF-8 back to the current locale
> on removal.  This adds a hard to predict amount of extra work and
> it is likely to break lots of pieces of existing code that use CPLString
> on text that is not necessarily in the current locale.
> 
> I deliberately avoiding making the RFC 5 assumption that CPLString
> is UTF-8 internally at all times to avoid what could be a lot of
> risky and expensive transformations.
> 
> I also think it might be hard to get all CPLString methods to honour
> the same rules that you imply for the constructors.  For instance,
> you do not address the assignment operator but it would be perverse
> (to me) if CPLString X("abc") gave me a different string than assigning
> "abc" to an existing CPLString.

Frank,

There are no sudden recodings and all inherited methods will work
without changes. Recoding happens when you are calling constructor with
encoding specified. Everything that already worked will work exactly in
the same way, nothing changed and there will be no recoding in the old
code. For the code that requires recoding you just set the encoding name
in constructor and this is the only case when recoding happens (and in
GetAs() method, if you need string in some encoding other that UTF-8).
And you should not use assignment in case when you need recoding. But I
do not think it is a big deal, because usage of inherited operations is
limited and you need to be careful with that anyway. For example, []
operator has no good for multibyte encodings.

And do we want to move to UTF-8 internal representation? If yes then we
should not be afraid of transformations from/to UTF-8, because it will
be so at some point in the future anyway, it is unavoidable.

Also my API does not add more transformations than your API.

Your API:

"string in native encoding"->CPLString()->recode(to UTF-8)->c_str()->OGR field
OGR field->CPLString()->recode(to native)->c_str()->"string in native encoding"

My API:

"string in native encoding"->CPLString(to UTF-8)->c_str()->OGR field
OGR field->CPLString(UTF-8)->GetAs(to native)->"string in native encoding"

> Does my rationale make sense?  I'm particularly wanting to avoid any
> changes in the behavior of existing CPLString use without careful
> consideration.

Yes, I see your point. But my willing is to prepare ground for further
internationalization of GDAL. And tracking encodings separately from the
strings certainly is not a way in that direction!

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From Martin.Spott at mgras.net  Fri Apr 25 11:07:41 2008
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Apr 25 11:08:28 2008
Subject: [gdal-dev] VMAP Problems...
References: <e66a4dbf0804250642j50ee37a8n9af7c1dcef94e316@mail.gmail.com>
Message-ID: <fuss3t$ubc$1@osprey.mgras.de>

"Courtney Schitka" wrote:

> This is my first posting, [...]

No, this is a copy of your first posting, and an answer had already
been sent to the list,

	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From c.schitka at gmail.com  Fri Apr 25 11:58:11 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Fri Apr 25 11:58:18 2008
Subject: [gdal-dev] VMAP Problems - Correct Posting.
Message-ID: <e66a4dbf0804250858y6328578agb553dc9540b2bc33@mail.gmail.com>

Hi List,

Sorry about my last posting, this was the one I meant.

Thanks for your response, I am still having difficulties however.

This is what the URI I am trying to open looks like

gltp:/vrf/c:/data/v1001/noamer/lib_001:treesa@veg(*)_area:area
Unfortunately I am trying to work in windows.

This format is as per the OGDI Layer in GDAL specifies.

gltp://<hostname>/<format>/<path_to_dataset>[:<layer_name>:<Family>]
As I said in my previous E-mail this datasource opens as specified above,
and I can get an OGRLayer when I ask the data source for the layer. However
when I try and read features from this layer I always end up with error 2
End Of Selection. I thought that I might be at an EOF, so I reset reading
before trying to extract a feature, however same behavour. Can you see
anything that I am doing incredibly wrong ?
Also I was curious to know if you konw why when I try and open a data source
with the following URI
gltp:/vrf/c:/data/v1001/noamer/lib_001

The XML parser in the OGDI blows my heap ?

Thanks
Courtney.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/581c0564/attachment.html
From warmerdam at pobox.com  Fri Apr 25 12:38:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 25 12:38:56 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <20080425143304.GA356@ak4719.spb.edu>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu> <4811D5A4.5040203@pobox.com>
	<20080425143304.GA356@ak4719.spb.edu>
Message-ID: <48120900.1000407@pobox.com>

Andrey Kiselev wrote:

> There are no sudden recodings and all inherited methods will work
> without changes. Recoding happens when you are calling constructor with
> encoding specified.

Andrey,

My mistake.  I saw:

CPLString( const char *pszString, const char *pszEncoding = NULL );

and thought that when pszEncoding was NULL it was going to treat it
as being in the current locale, but on closer reading of your original
post I see that was only true when pszEncoding was "".

You also wrote "What I finally suggesting is to assume that the
internal encoding either UTF-8 when you are constructing string
specifying encoding or unknown (as it is now) and then you are
keeping encoding of the string somwhere else."  But I disagree
with assuming that values of CPLString are always UTF-8.  There
are lots of places where I construct CPLStrings from text without
having any idea what the encoding is.  As you note, normal assigment
with "=" or CPLString constructors with no encoding argument will
not result in any conversion to UTF-8. So how have we achieved
your goal of having CPLString always be UTF-8?

I think we have not, we are only fooling ourselves then to make
an assertion that CPLString contents are UTF-8.

> And do we want to move to UTF-8 internal representation? If yes then we
> should not be afraid of transformations from/to UTF-8, because it will
> be so at some point in the future anyway, it is unavoidable.

I do not mind doing recoding where needed, but one way or the other
the application code needs to be keeping track of where it is needed.

> Yes, I see your point. But my willing is to prepare ground for further
> internationalization of GDAL. And tracking encodings separately from the
> strings certainly is not a way in that direction!

As I mentioned before, I would not mind a CPLString subclass that is
intentionally always UTF-8, or perhaps that even carries it's encoding
along.  I just don't think we can apply this logic to CPLString and
ensure that CPLString contents are always UTF-8 without careful review
of all existing code.

If you feel strongly enough about this you can -1 the RFC, but I
am not willing to modify it to be based on the assumption that CPLString
is always in UTF-8.

I claim that the proposed CPLString changes I propose do not in any way
prevent more sophisticated internationalization support in the future.
And they give us a portable mechanism to do recoding when needed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dron at ak4719.spb.edu  Fri Apr 25 14:01:18 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Fri Apr 25 14:16:00 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <48120900.1000407@pobox.com>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu>
	<4811D5A4.5040203@pobox.com> <20080425143304.GA356@ak4719.spb.edu>
	<48120900.1000407@pobox.com>
Message-ID: <20080425180118.GB1248@ak4719.spb.edu>

On Fri, Apr 25, 2008 at 12:38:24PM -0400, Frank Warmerdam wrote:
> You also wrote "What I finally suggesting is to assume that the
> internal encoding either UTF-8 when you are constructing string
> specifying encoding or unknown (as it is now) and then you are
> keeping encoding of the string somwhere else."  But I disagree
> with assuming that values of CPLString are always UTF-8.  There
> are lots of places where I construct CPLStrings from text without
> having any idea what the encoding is.

Ok, I would like to make it clear. CPLString can contain strings in any
8-bit encoding if being constructed without encoding specified. So

  oStr = CPLString("abc");

is equavalent to

  oStr = CPLString("abc", NULL);

and equvalent to

  CPLString oStr = "abc";

and it works exactly as it is now. No recoding here and string is stored
internally in native encoding whatever it is. You should not use GetAs()
method for this object, because it will produce undefined results. That
is what you should keep track of: do not use recoding on old CPLString
objects.

But

  oStr = CPLString("abc", "iso-8859-3");

will do recoding from "iso-8859-3" to UTF-8, the string will be stored
in UTF-8 internally and you should use GetAs() method to get it in some
other encoding (other from UTF-8).

  oStr = CPLString("abc", "UTF-8");

will do nothing and store "abc" directly, because it is already comes in
right encoding.

> As you note, normal assigment with "=" or CPLString constructors with
> no encoding argument will not result in any conversion to UTF-8. So
> how have we achieved your goal of having CPLString always be UTF-8?

It is not always in UTF-8. Actually I am suggesting the same approach as
you suggested, but with different API.

> As I mentioned before, I would not mind a CPLString subclass that is
> intentionally always UTF-8, or perhaps that even carries it's encoding
> along.  I just don't think we can apply this logic to CPLString and
> ensure that CPLString contents are always UTF-8 without careful review
> of all existing code.

Thinking on the issue even more it seems that it is much easier and
cleaner to just define a derived class (CPLUString?) utilizing interface
that I proposed. The new string object will be UTF-8 internally and does
not support dangerous and meaningless operations. That way we can
precisely separate encoding aware strings from the old ones and there
will be no ambiguity. I am ready to write specification on that!

> If you feel strongly enough about this you can -1 the RFC, but I am
> not willing to modify it to be based on the assumption that CPLString
> is always in UTF-8.

I don't want to put a veto on something not being sure that we are
understood each other proposals. Now I am agree with you that CPLString
is not a good place for this new functionality. A new class then?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From warmerdam at pobox.com  Fri Apr 25 15:23:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 25 15:23:48 2008
Subject: [gdal-dev] Motion: To adopt RFC 23: Unicode Support in OGR
In-Reply-To: <20080425180118.GB1248@ak4719.spb.edu>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu> <4811D5A4.5040203@pobox.com>
	<20080425143304.GA356@ak4719.spb.edu> <48120900.1000407@pobox.com>
	<20080425180118.GB1248@ak4719.spb.edu>
Message-ID: <48122FAB.2090408@pobox.com>


Folks,

I have made a small amendment to the RFC, adding a new layer level
capability test for whether the string attributes are clearly in UTF-8.

"""
OLCStringsAsUTF8 Capability Flag

Some drivers (ie. CSV) can effectively not know the encoding of their inputs. 
Therefore, it isn't always practical to turn things into UTF-8 in a guaranteed 
way. So, the new layer level capability called "StringsAsUTF8" represented with 
the macro "OLCStringsAsUTF8" will be testable at the layer level with 
TestCapability?(). Drivers which are certain to return string attributes as 
UTF-8 should return TRUE, while drivers that do not know the encoding they 
return should return FALSE. Any driver which knows it's encoding should convert 
to UTF-8.
"""

I'll extend the voting till Tuesday to account for this mid-vote edit though
I don't think it should be very contentious.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Apr 25 15:46:43 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 25 15:46:57 2008
Subject: [gdal-dev] Motion: To adopt RFC 23.1: Unicode Support in OGR 
In-Reply-To: <20080425180118.GB1248@ak4719.spb.edu>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu> <4811D5A4.5040203@pobox.com>
	<20080425143304.GA356@ak4719.spb.edu> <48120900.1000407@pobox.com>
	<20080425180118.GB1248@ak4719.spb.edu>
Message-ID: <48123523.4060209@pobox.com>

Andrey, PSC Members,

On further consideration I think expressing the recoding features via the
CPLString is not such a great idea since it is not externally accessable as
part of the C API, and it is getting us all bound up in particulars about
the CPLString.

I am withdrawing my initial version of RFC 23, and calling for a new vote
on a new form (RFC 23.1) replacing the CPLString recoding stuff with a
C API version.

We can choose to extend the CPLString with recoding options, or derive
subclasses of CPLString in the future without an RFC as long as it doesn't
affect existing implementation, and base it on the C API for the underlying
work.

Motion: To adopt RFC 23.1: Unicode Support in OGR

   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

Starting the vote over again with a +1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Martin.Spott at mgras.net  Fri Apr 25 17:33:41 2008
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Apr 25 17:34:28 2008
Subject: [gdal-dev] VMAP Problems - Correct Posting.
References: <e66a4dbf0804250858y6328578agb553dc9540b2bc33@mail.gmail.com>
Message-ID: <futinl$e62$1@osprey.mgras.de>

"Courtney Schitka" wrote:

> This is what the URI I am trying to open looks like
> 
> gltp:/vrf/c:/data/v1001/noamer/lib_001:treesa@veg(*)_area:area

You should separate and trim this URL - and don't forget to put quotes
around special characters. To put an example, the command I'm using to
populate the deciduous tree layer in my Landcover-DB [1] looks like
this:

  # ~> ogr2ogr [...] gltp:/vrf/<absolute path>/v0eur/vmaplv0/eurnasia -where veg=24 -nln <layername> 'treesa@veg(*)_area'

....  at least I think so  :-)

Cheers,
	Martin.
[1]: http://mapserver.flightgear.org/
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From Martin.Spott at mgras.net  Fri Apr 25 17:38:33 2008
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Apr 25 17:39:19 2008
Subject: [gdal-dev] VMAP Problems - Correct Posting.
References: <e66a4dbf0804250858y6328578agb553dc9540b2bc33@mail.gmail.com>
	<futinl$e62$1@osprey.mgras.de>
Message-ID: <futj0p$ugo$1@osprey.mgras.de>

Martin Spott wrote:

> [...] and don't forget to put quotes around special characters.

Sorry, I presume this counts only when running on the command line,

Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From c.schitka at gmail.com  Fri Apr 25 18:18:23 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Fri Apr 25 18:18:26 2008
Subject: [gdal-dev] VMAP Problems - Correct Posting.
In-Reply-To: <futj0p$ugo$1@osprey.mgras.de>
References: <e66a4dbf0804250858y6328578agb553dc9540b2bc33@mail.gmail.com>
	<futinl$e62$1@osprey.mgras.de> <futj0p$ugo$1@osprey.mgras.de>
Message-ID: <e66a4dbf0804251518q754ad37ckc063ae9c4dd027dd@mail.gmail.com>

That's the problem. is that using ogrinfo or ogr2ogr I can open the
datasource on the command line just as was described.

 However trying to open the data source. in an application I am working on
using syntax like this.


Driver* pDriver = OGRSFDriverRegistrar::Open(  path to datasource ).

OGRLayer* pLayer = pDriver->GetOgrLayer(0) //Could have gotten one by name
but for simplicity.

pLayer is != 0 //So I assume I am getting a valid layer back.

However when I try and get the features for this layer I always get the
error 2 end of selection message. The reason my URI was in the format it was
in my last post is that.

ogrdogdidatasource.cpp in gdal. Specifies when opening a vmap data source it
needs to be in the format

gltp://<hostname>/<format>/<path_to_dataset>[:<layer_name>:<Family>] ln 93

If open the URI in the format Martin suggested from the command line then it
work and I get features out. But trying to do it progmatically as shown
above I can't get any features out, which infact is the blocking issue here
for me.

Thanks for any kind help.

Court









 I get an opened data source and a pointer to the driver, from which I can
then as for a layer. However when I try and


On Fri, Apr 25, 2008 at 5:38 PM, Martin Spott <Martin.Spott@mgras.net>
wrote:

> Martin Spott wrote:
>
> > [...] and don't forget to put quotes around special characters.
>
> Sorry, I presume this counts only when running on the command line,
>
> Martin.
>  --
>  Unix _IS_ user friendly - it's just selective about who its friends are !
> --------------------------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080425/0d0c18f8/attachment.html
From windwxc at sina.com  Fri Apr 25 20:45:44 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Fri Apr 25 20:45:50 2008
Subject: [gdal-dev] please help me check my code about transforming pg data
	to shape
Message-ID: <20080426004544.384801EE979@mail3-145.sinamail.sina.com.cn>

&nbsp;hi,every one. I need read the spatial data in postgresql and transform it to shape file and show it by axmapcontrol in my project. My code can run but when i use arcmap open the new shape file i find it cannot show any graphics and the attribute table is empty. the size of the shape isnot 0k. I run same code but only once the shape file can show graphic and can be seen the arrtibute. The following is code and i wish you can help me find where is error.
public void GetGeometry(string sqltext)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp;open the postgis and read data&nbsp;according&nbsp;&nbsp;sqltext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogr.RegisterAll();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show(e.Message); }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource pgconn = OSGeo.OGR.Ogr.Open ("PG:host=localhost dbname='stdb' user='stuser' password=123", 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myOGRLay = pgconn.ExecuteSQL(sqltext,null, "tt");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FeatureDefn myDef = myOGRLay.GetLayerDefn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int TT = myDef.GetFieldCount();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int ftcount = myOGRLay.GetFeatureCount(1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.DataSource shpconn;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Driver shpdriver;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shpdriver=Ogr.GetDriverByName("ESRI Shapefile");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string path = Application.StartupPath + "\\database\\yantian2005.shp";
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.SpatialReference myspatial = new SpatialReference("");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myspatial.ImportFromProj4("+proj=Transverse_Mercator +zone=48N+datum=GCS_WGS_1984");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; shpconn = shpdriver.CreateDataSource(path, null);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Layer myshplay = shpconn.CreateLayer("yantian2005", null , OSGeo.OGR.wkbGeometryType.wkbPolygon, null);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myshplay == null)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox.Show("create layer failor!");
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Feature myOGRFeat = null;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i < TT; i++)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FieldDefn fdef = myDef.GetFieldDefn(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myshplay.CreateField(fdef, 1) == OSGeo.OGR.Ogr.OGRERR_NONE)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int count = 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.FeatureDefn myFDefn = myOGRLay.GetLayerDefn();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ((myOGRFeat = myOGRLay.GetNextFeature()) != null)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Feature myOGRft = null;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft = myOGRLay.GetFeature(count);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.Geometry myGeom = myOGRFeat.GetGeometryRef();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetGeometry(myGeom);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int i = 0; i < myFDefn.GetFieldCount(); i++)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OSGeo.OGR.FieldDefn myFieD = myFDefn.GetFieldDefn(i);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTString)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsString(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTInteger)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsDouble(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (myFieD.GetFieldType() == OSGeo.OGR.FieldType.OFTInteger)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetField(i, myOGRFeat.GetFieldAsInteger(i));
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft = myOGRFeat.Clone();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.SetFrom(myOGRFeat, 1);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myshplay.CreateFeature(myOGRft);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; count = count + 1;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; myOGRft.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; axMapControl1.ActiveView.FocusMap.ClearLayers();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axMapControl1.AddLayerFromFile(Application.StartupPath + "\\database\\yantian2005.shp",0);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;axMapControl1.ActiveView.Refresh();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //pgconn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; { MessageBox.Show( e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // conn.Dispose();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Application.Exit();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch (Exception e)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox.Show( e.Message);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
i know some my code is rudundant and wish you can point out.
thank you 
best regard.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; windsnow

-------------------------------------------------------------------
" "( http://d1.sina.com.cn/sina/limeng3/mail_zhuiyu/2008/mail_zhuiyu_20080421.html )

-------------------------------------------------------------------
2Ghttp://mail.sina.com.cn/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080426/d383b789/attachment-0001.html
From dron at ak4719.spb.edu  Sat Apr 26 01:49:41 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sat Apr 26 02:01:02 2008
Subject: [gdal-dev] Motion: To adopt RFC 23.1: Unicode Support in OGR
In-Reply-To: <48123523.4060209@pobox.com>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu>
	<4811D5A4.5040203@pobox.com> <20080425143304.GA356@ak4719.spb.edu>
	<48120900.1000407@pobox.com> <20080425180118.GB1248@ak4719.spb.edu>
	<48123523.4060209@pobox.com>
Message-ID: <20080426054941.GA3437@ak4719.spb.edu>

On Fri, Apr 25, 2008 at 03:46:43PM -0400, Frank Warmerdam wrote:
> Motion: To adopt RFC 23.1: Unicode Support in OGR
> 
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

+1 on that with just a small addition to the section "CPLRecode API":
"In case the source character cannot be translated in target encoding it
is replaced with '?' character".

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From windwxc at sina.com  Sat Apr 26 04:39:26 2008
From: windwxc at sina.com (windwxc@sina.com)
Date: Sat Apr 26 04:39:31 2008
Subject: [gdal-dev] please help me check my code about transforming pg data
	to shape
Message-ID: <20080426083926.A847F1EE8A9@mail3-145.sinamail.sina.com.cn>

IGhpLGV2ZXJ5IG9uZS4gSSBuZWVkIHJlYWQgdGhlIHNwYXRpYWwgZGF0YSBpbiBwb3N0Z3Jlc3Fs
IGFuZCB0cmFuc2Zvcm0gaXQgdG8gc2hhcGUgZmlsZSBhbmQgc2hvdyBpdCBieSBheG1hcGNvbnRy
b2wgaW4gbXkgcHJvamVjdC4gTXkgY29kZSBjYW4gcnVuIGJ1dCB3aGVuIGkgdXNlIGFyY21hcCBv
cGVuIHRoZSBuZXcgc2hhcGUgZmlsZSBpIGZpbmQgaXQgY2Fubm90IHNob3cgYW55IGdyYXBoaWNz
IGFuZCB0aGUgYXR0cmlidXRlIHRhYmxlIGlzIGVtcHR5LiB0aGUgc2l6ZSBvZiB0aGUgc2hhcGUg
aXNub3QgMGsuIEkgcnVuIHNhbWUgY29kZSBidXQgb25seSBvbmNlIHRoZSBzaGFwZSBmaWxlIGNh
biBzaG93IGdyYXBoaWMgYW5kIGNhbiBiZSBzZWVuIHRoZSBhcnJ0aWJ1dGUuIFRoZSBmb2xsb3dp
bmcgaXMgY29kZSBhbmQgaSB3aXNoIHlvdSBjYW4gaGVscCBtZSBmaW5kIHdoZXJlIGlzIGVycm9y
Lg0KcHVibGljIHZvaWQgR2V0R2VvbWV0cnkoc3RyaW5nIHNxbHRleHQpDQogICAgICAgIHsNCiAg
ICAgICAgICAvLyAgb3BlbiB0aGUgcG9zdGdpcyBhbmQgcmVhZCBkYXRhIGFjY29yZGluZyAgc3Fs
dGV4dCAgICAgIA0KICAgICAgICAgIHRyeSAgICAgICAgICAgICAgeyANCiAgICAgICAgICAgICAg
IA0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAg
ICAgICAgT2dyLlJlZ2lzdGVyQWxsKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgIGNhdGNoIChFeGNlcHRpb24gZSkNCiAgICAgICAgICAgICAgICB7IE1lc3NhZ2VCb3guU2hv
dyhlLk1lc3NhZ2UpOyB9DQogICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICAgew0K
ICAgICAgICAgICAgICAgICAgIE9TR2VvLk9HUi5EYXRhU291cmNlIHBnY29ubiA9IE9TR2VvLk9H
Ui5PZ3IuT3BlbiAoIlBHOmhvc3Q9bG9jYWxob3N0IGRibmFtZT0nc3RkYicgdXNlcj0nc3R1c2Vy
JyBwYXNzd29yZD0xMjMiLCAxKTsNCiAgICAgICAgICAgICAgICAgICBPU0dlby5PR1IuTGF5ZXIg
bXlPR1JMYXkgPSBwZ2Nvbm4uRXhlY3V0ZVNRTChzcWx0ZXh0LG51bGwsICJ0dCIpOw0KICAgICAg
ICAgICAgICAgICAgIEZlYXR1cmVEZWZuIG15RGVmID0gbXlPR1JMYXkuR2V0TGF5ZXJEZWZuKCk7
DQogICAgICAgICAgICAgICAgICAgaW50IFRUID0gbXlEZWYuR2V0RmllbGRDb3VudCgpOw0KICAg
ICAgICAgICAgICAgICAgIGludCBmdGNvdW50ID0gbXlPR1JMYXkuR2V0RmVhdHVyZUNvdW50KDEp
Ow0KICAgICAgICAgICAgICAgICAgIE9TR2VvLk9HUi5EYXRhU291cmNlIHNocGNvbm47DQogICAg
ICAgICAgICAgICAgICAgT1NHZW8uT0dSLkRyaXZlciBzaHBkcml2ZXI7DQogICAgICAgICAgICAg
ICAgICAgc2hwZHJpdmVyPU9nci5HZXREcml2ZXJCeU5hbWUoIkVTUkkgU2hhcGVmaWxlIik7DQog
ICAgICAgICAgICAgICAgICAgc3RyaW5nIHBhdGggPSBBcHBsaWNhdGlvbi5TdGFydHVwUGF0aCAr
ICJcXGRhdGFiYXNlXFx5YW50aWFuMjAwNS5zaHAiOw0KICAgICAgICAgICAgICAgICAgDQogICAg
ICAgICAgICAgICAgICAgT1NHZW8uT0dSLlNwYXRpYWxSZWZlcmVuY2UgbXlzcGF0aWFsID0gbmV3
IFNwYXRpYWxSZWZlcmVuY2UoIiIpOw0KICAgICAgICAgICAgICAgICAgIG15c3BhdGlhbC5JbXBv
cnRGcm9tUHJvajQoIitwcm9qPVRyYW5zdmVyc2VfTWVyY2F0b3IgK3pvbmU9NDhOK2RhdHVtPUdD
U19XR1NfMTk4NCIpOw0KICAgICAgICAgICAgICAgICAgIHNocGNvbm4gPSBzaHBkcml2ZXIuQ3Jl
YXRlRGF0YVNvdXJjZShwYXRoLCBudWxsKTsNCiAgICAgICAgICAgICAgICAgICBPU0dlby5PR1Iu
TGF5ZXIgbXlzaHBsYXkgPSBzaHBjb25uLkNyZWF0ZUxheWVyKCJ5YW50aWFuMjAwNSIsIG51bGwg
LCBPU0dlby5PR1Iud2tiR2VvbWV0cnlUeXBlLndrYlBvbHlnb24sIG51bGwpOw0KICAgICAgICAg
ICAgICAgICAgIGlmIChteXNocGxheSA9PSBudWxsKQ0KICAgICAgICAgICAgICAgICAgIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZUJveC5TaG93KCJjcmVhdGUgbGF5ZXIgZmFpbG9y
ISIpOw0KICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAg
ICAgICAgIE9TR2VvLk9HUi5GZWF0dXJlIG15T0dSRmVhdCA9IG51bGw7DQogICAgICAgICAgICAg
ICAgICAgZm9yIChpbnQgaSA9IDA7IGkgDQogICAgICAgICAgICAgICAgICAgICAgIE9TR2VvLk9H
Ui5HZW9tZXRyeSBteUdlb20gPSBteU9HUkZlYXQuR2V0R2VvbWV0cnlSZWYoKTsNCiAgICAgICAg
ICAgICAgICAgICAgICAgbXlPR1JmdC5TZXRHZW9tZXRyeShteUdlb20pOw0KICAgICAgICAgICAg
ICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSANCiAgICAgICAgICAgICAgICAgICAgICAgICAg
IGlmIChteUZpZUQuR2V0RmllbGRUeXBlKCkgPT0gT1NHZW8uT0dSLkZpZWxkVHlwZS5PRlRTdHJp
bmcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbXlPR1JmdC5TZXRGaWVsZChpLCBteU9HUkZlYXQuR2V0RmllbGRBc1N0cmluZyhp
KSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAg
ICAgICBlbHNlIGlmIChteUZpZUQuR2V0RmllbGRUeXBlKCkgPT0gT1NHZW8uT0dSLkZpZWxkVHlw
ZS5PRlRJbnRlZ2VyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIG15T0dSZnQuU2V0RmllbGQoaSwgbXlPR1JGZWF0LkdldEZpZWxk
QXNEb3VibGUoaSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZWxzZSBpZiAobXlGaWVELkdldEZpZWxkVHlwZSgpID09IE9TR2VvLk9H
Ui5GaWVsZFR5cGUuT0ZUSW50ZWdlcikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU9HUmZ0LlNldEZpZWxkKGksIG15T0dSRmVh
dC5HZXRGaWVsZEFzSW50ZWdlcihpKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICB9DQog
ICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgbXlPR1JmdCA9
IG15T0dSRmVhdC5DbG9uZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICBteU9HUmZ0LlNldEZy
b20obXlPR1JGZWF0LCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAg
ICAgICAgICAgbXlzaHBsYXkuQ3JlYXRlRmVhdHVyZShteU9HUmZ0KTsNCiAgICAgICAgICAgICAg
ICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxOw0KICAgICAg
ICAgICAgICAgICAgICAgICBteU9HUmZ0LkRpc3Bvc2UoKTsNCiAgICAgICAgICAgICAgICAgICB9
IA0KICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgIGF4TWFwQ29udHJvbDEu
QWN0aXZlVmlldy5Gb2N1c01hcC5DbGVhckxheWVycygpOw0KICAgICAgICAgICAgICAgICAgIGF4
TWFwQ29udHJvbDEuQWRkTGF5ZXJGcm9tRmlsZShBcHBsaWNhdGlvbi5TdGFydHVwUGF0aCArICJc
XGRhdGFiYXNlXFx5YW50aWFuMjAwNS5zaHAiLDApOw0KICAgICAgICAgICAgICAgICAgICBheE1h
cENvbnRyb2wxLkFjdGl2ZVZpZXcuUmVmcmVzaCgpOw0KICAgICAgICAgICAgICAgICAgIC8vcGdj
b25uLkRpc3Bvc2UoKTsNCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgY2F0Y2gg
KEV4Y2VwdGlvbiBlKQ0KICAgICAgICAgICAgICAgeyBNZXNzYWdlQm94LlNob3coIGUuTWVzc2Fn
ZSk7DQogICAgICAgICAgICAgIC8vIGNvbm4uRGlzcG9zZSgpOw0KICAgICAgICAgICAgICAgQXBw
bGljYXRpb24uRXhpdCgpOw0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAg
ICAgICAgY2F0Y2ggKEV4Y2VwdGlvbiBlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAg
IE1lc3NhZ2VCb3guU2hvdyggZS5NZXNzYWdlKTsNCiAgICAgICAgICAgIH0gICAgIA0KICAgICAg
ICAgfQ0KaSBrbm93IHNvbWUgbXkgY29kZSBpcyBydWR1bmRhbnQgYW5kIHdpc2ggeW91IGNhbiBw
b2ludCBvdXQuDQp0aGFuayB5b3UgDQpiZXN0IHJlZ2FyZC4NCnBzOiB3aXNoIHRoaXMgbXkgZW1h
aWwgaXMgcmlnaHQgLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRzbm93CgotLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCs/r
zea1w76rssqjv7/swLS73cbVIs7StcS158TUIM7StcTO6MyoIiggaHR0cDovL2QxLnNpbmEuY29t
LmNuL3NpbmEvbGltZW5nMy9tYWlsX3podWl5dS8yMDA4L21haWxfemh1aXl1XzIwMDgwNDIxLmh0
bWwgKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQrXorLh0MLAyzJHw+K30dPKz+SjqGh0dHA6Ly9tYWlsLnNpbmEuY29t
LmNuL6Op
From abhay.menon at gmail.com  Sat Apr 26 05:13:08 2008
From: abhay.menon at gmail.com (abhay menon)
Date: Sat Apr 26 05:13:11 2008
Subject: [gdal-dev] please help me check my code about transforming pg
	data to shape
In-Reply-To: <20080426083926.A847F1EE8A9@mail3-145.sinamail.sina.com.cn>
References: <20080426083926.A847F1EE8A9@mail3-145.sinamail.sina.com.cn>
Message-ID: <7a30cd70804260213k465f1f4fx4e150c462604122a@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Data;
using OSGeo.OGR;

namespace DataExtract
{
    class AppUtils
    {
        public int CreateLayer(String dataSource, String ExecSQL, String LayerName, String fShpFile)
        {
            Ogr.RegisterAll();
            DataSource ds = Ogr.Open(dataSource, 0);
            if (ds == null)
            {
                Console.WriteLine("Can't open " + 0);
                return -1;
            }

            Driver drv = Ogr.GetDriverByName("ESRI Shapefile");
            if (drv == null)
            {
                Console.WriteLine("Can't get driver.");
                return -1;
            }

            Layer layer = ds.ExecuteSQL(ExecSQL, null, "PostGIS");
            if (layer == null)
            {
                Console.WriteLine("FAILURE: Couldn't fetch advertised layer : " + LayerName);
                return -1;
            }

            if (File.Exists(fShpFile))
                drv.DeleteDataSource(fShpFile);
            DataSource dsDec = drv.CreateDataSource(fShpFile, new string[] { });
            if (dsDec == null)
            {
                Console.WriteLine("Can't open " + 0);
                return -1;
            }

            Layer layerDec;
            FeatureDefn def = layer.GetLayerDefn();
            layerDec = dsDec.CreateLayer(LayerName, null, def.GetGeomType(), new string[] { });
            if (layerDec == null)
            {
                Console.WriteLine("Layer creation failed.");
                return -1;
            }

            SpatialReference sr = layer.GetSpatialRef();
            string srs_wkt;
            if (sr != null)
            {
                sr.ExportToPrettyWkt(out srs_wkt, 1);
                String prjDesc = dsDec.name;
                prjDesc = prjDesc.Replace(".shp", ".prj");
                using (TextWriter tx = new StreamWriter(prjDesc))
                {
                    tx.Write(srs_wkt);
                }
            }

            for (int iAttr = 0; iAttr < def.GetFieldCount(); iAttr++)
            {
                FieldDefn fdef = def.GetFieldDefn(iAttr);
                layerDec.CreateField(fdef, 1);
            }

            OSGeo.OGR.Feature feat;
            while ((feat = layer.GetNextFeature()) != null)
            {
                layerDec.CreateFeature(feat);
                feat.Dispose();
            }
            layerDec.Dispose();
            dsDec.Dispose();
            return 0;
        }
    }
}
From rkgeorge at cadmaps.com  Sat Apr 26 10:54:22 2008
From: rkgeorge at cadmaps.com (Randy George)
Date: Sat Apr 26 11:17:57 2008
Subject: [gdal-dev] RE: ogr2ogr PostgreSQL to shp
Message-ID: <007d01c8a7ad$6a469310$3ed3b930$@com>

Hi,

 

I'm attempting to extract a subset of a PostGIS table to shp using this
windows command line:

 

"C:\Program Files\FWTools2.1.0\bin\ogr2ogr" --debug on -where " fips =
'08041' " -f "ESRI Shapefile" out.shp PG:"user=user dbname=db host=localhost
password=pass port=5432" gnis

 

Here is the debug output:

OGR_PG: DBName="db"

OGR_PG: PostSIS version string: '1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' ->
'1.3'

 

OGR_PG: POSTGIS_VERSION=1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1

ERROR 1: PG:user=user dbname=db host=localhost password=pass port=54

32 is neither a file or directory, Geoconcept access failed.

 

FAILURE:

Unable to open datasource `PG:user=user dbname=db host=localhost
password=pass port=5432' with the following drivers.

 

Where am I going wrong?

 

thanks

randy

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080426/271b9075/attachment.html
From warmerdam at pobox.com  Sat Apr 26 12:14:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 26 12:15:21 2008
Subject: [gdal-dev] RE: ogr2ogr PostgreSQL to shp
In-Reply-To: <007d01c8a7ad$6a469310$3ed3b930$@com>
References: <007d01c8a7ad$6a469310$3ed3b930$@com>
Message-ID: <48135503.5080004@pobox.com>

Randy George wrote:
> Hi,
> 
>  
> 
> I?m attempting to extract a subset of a PostGIS table to shp using this 
> windows command line:
> 
>  
> 
> "C:\Program Files\FWTools2.1.0\bin\ogr2ogr" --debug on -where " fips = 
> '08041' " -f "ESRI Shapefile" out.shp PG:"user=user dbname=db 
> host=localhost password=pass port=5432" gnis
> 
>  
> 
> Here is the debug output:
> 
> OGR_PG: DBName="db"
> 
> OGR_PG: PostSIS version string: '1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' 
> -> '1.3'
> 
>  
> 
> OGR_PG: POSTGIS_VERSION=1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
> 
> ERROR 1: PG:user=user dbname=db host=localhost password=pass port=54

Randy,

Does ogrinfo on this postgres database work?  The fact that you got the
postgis version info back indicates that the database was successfully
connected to.

Skimming the Postgres driver code, I suspect it failed to identify any
layers in your postgres database.  This can happen if you have a
geometry_columns table but no entries in it.  I'm not sure why else it
might happen.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From maplabs at light42.com  Sat Apr 26 14:22:09 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Sat Apr 26 14:20:58 2008
Subject: [gdal-dev] RE: ogr2ogr PostgreSQL to shp
In-Reply-To: <007d01c8a7ad$6a469310$3ed3b930$@com>
References: <007d01c8a7ad$6a469310$3ed3b930$@com>
Message-ID: <AEA1788B-13BD-11DD-8D00-000A277A733C@light42.com>


On Apr 26, 2008, at 7:54 AM, Randy George wrote:
> "C:\Program Files\FWTools2.1.0\bin\ogr2ogr" --debug on -where " fips = 
> '08041' " -f "ESRI Shapefile" out.shp PG:"user=user dbname=db 
> host=localhost password=pass port=5432" gnis
>
> ?...

> ERROR 1: PG:user=user dbname=db host=localhost password=pass port=54
> 32 is neither a file or directory, Geoconcept access failed.
>
> FAILURE:
>
> Unable to open datasource `PG:user=user dbname=db host=localhost 
> password=pass port=5432' with the following drivers.

Randy-
   I find that I forget to set permissions on the two special tables
, Geometry_Columns and Spatial_ref_sys and get odd errors as a result 
of the particular permutation.

However, Geoconcept access failed sounds specific to something outside 
of PostGIS/OGR

Ogrinfo is a good debug step, as FrankW pointed out...
Also a small perl or python script, using the same connection string, 
might give some additional info

hth
   -Brian

From rkgeorge at cadmaps.com  Sat Apr 26 15:38:23 2008
From: rkgeorge at cadmaps.com (Randy George)
Date: Sat Apr 26 15:42:47 2008
Subject: FW: [gdal-dev] RE: ogr2ogr PostgreSQL to shp
Message-ID: <00b401c8a7d5$17437a70$45ca6f50$@com>

Hi Frank,

> This can happen if you have a geometry_columns table but no entries in it.


Yes, that was the problem. I've been burned on that before so I should have
noticed. It's too easy to use backup/restore when moving from system to
system and forget the geometry_columns update.

Thanks
randy

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Saturday, April 26, 2008 10:15 AM
To: rkgeorge@cadmaps.com
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: ogr2ogr PostgreSQL to shp

Randy George wrote:
> Hi,
> 
>  
> 
> I'm attempting to extract a subset of a PostGIS table to shp using this 
> windows command line:
> 
>  
> 
> "C:\Program Files\FWTools2.1.0\bin\ogr2ogr" --debug on -where " fips = 
> '08041' " -f "ESRI Shapefile" out.shp PG:"user=user dbname=db 
> host=localhost password=pass port=5432" gnis
> 
>  
> 
> Here is the debug output:
> 
> OGR_PG: DBName="db"
> 
> OGR_PG: PostSIS version string: '1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' 
> -> '1.3'
> 
>  
> 
> OGR_PG: POSTGIS_VERSION=1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
> 
> ERROR 1: PG:user=user dbname=db host=localhost password=pass port=54

Randy,

Does ogrinfo on this postgres database work?  The fact that you got the
postgis version info back indicates that the database was successfully
connected to.

Skimming the Postgres driver code, I suspect it failed to identify any
layers in your postgres database.  This can happen if you have a
geometry_columns table but no entries in it.  I'm not sure why else it
might happen.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gis at vanbooth.com  Sun Apr 27 12:33:25 2008
From: gis at vanbooth.com (Rob)
Date: Sun Apr 27 12:33:28 2008
Subject: [gdal-dev] Convert a transparent PNG to TIF
Message-ID: <2a955f950804270933h137ac403s28717ed68a4da542@mail.gmail.com>

Hi

Another noobie question for you.  I have a set of transparent PNGs (link to
an example one below as its too big to attach) that I want to view via my
antique GDAL 1.2.2/MapServer 4.8.6 setup.  I have had no success with any of
the conversions I have attempted as yet!

How do I convert this image so that it can be read by MapServer and retain
its transparency?

MTIA

Rob

http://sites.google.com/a/vanbooth.com/transfer/Home/SD.png?attredirects=0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080427/df073070/attachment.html
From szekerest at gmail.com  Sun Apr 27 16:43:18 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Apr 27 16:43:20 2008
Subject: [gdal-dev] Separate the debug and the optimized windows builds
Message-ID: <f3b73b7d0804271343x222e087va5296ea892d92e68@mail.gmail.com>

Folks,

I've made an attempt to separate the debug builds from the optimized
configurations for the windows compilations.
Currently we had to make several changes manually to make a consistent
build since we had to change between the OPTFLAGS
settings in makefile.vc as well as change the /debug linker option in
a number of the subsequent makefiles. (It should also be noted that
many of these have used predefinied /debug settings regardless of that
we do optimized builds)

I've made a change in the makefiles that this switch depends on a
common DEBUG setting that can be definied at the command line, like

nmake -f makefile.vc DEBUG=YES

Let me know if you have issues related to this change, though it seems
a trivial addition.

Best regards,

Tamas
From umn-ms at hydrotec.de  Mon Apr 28 03:06:46 2008
From: umn-ms at hydrotec.de (umn-ms@hydrotec.de)
Date: Mon Apr 28 03:08:48 2008
Subject: Antwort: [gdal-dev] Problems with libecwj2-ms.dll
In-Reply-To: <4811D8DD.8020309@pobox.com>
Message-ID: <OF4A7A2BED.6388F384-ONC1257439.0025DC65-C1257439.00271269@hydrotec.de>

> ...  I believe it is best
> for users of the ECW SDK to get it from ERMapper/Leica/Erdas directly, 
and
> to agree to their click through license.

Just for the case anybody else will stumble about this:

ERMapper offers two different downloads: "Image Compression SDK 3.3" and 
"Image Compression SDK Source Code 3.3". The prebuild SDK does not contain 
libecwj2.*. It's
only made with the Source-distribution.

Anyway. I'm fine ...
Benedikt

Frank Warmerdam <warmerdam@pobox.com> schrieb am 25.04.2008 15:13:01:

> umn-ms@hydrotec.de wrote:
> > 
> >  > Well, obviously I need a "libecwj2.lib".
> >  > But I'm still confused, where/how to get this.
> >  > Do I have to compile the ECW-SDK on my own?
> > 
> > Finally I succeed.
> > 
> > I did compile the ECW-SDK.
> > And for this one I needed "Microsoft Platform SDK for Windows Server 
> > 2003 R2" ...
> > 
> > I don't know about the legal issues. Would it be possible to 
distribute 
> > libecwj2.lib
> > in http://download.osgeo.org/gdal/win32/1.5/gdalwin32ecw150.zip?
> > 
> > Ain't easy
> > Benedikt
> 
> Benedikt,
> 
> I'm quite leery of distributing ecw sdk libraries under the auspices of
> OSGeo.  In order to keep things legally legitimate I believe it is best
> for users of the ECW SDK to get it from ERMapper/Leica/Erdas directly, 
and
> to agree to their click through license.
> 
> If I agree to their click through license, then upload it to
> download.osgeo.org for distributions, and someone who grabs it violates
> the license it would be on my head (at least to some extent) since I 
made
> no reasonable effort to get them to agree to the requirements that I am
> bound to enforce.
> 
> I have spoken to folks at ERMapper/Leica/Erdas about this recently, and 
they
> are reviewing licensing terms, and have expressed a willingness to help
> vette techniques for including ECW support in OSGeo4W.  But our basic
> conclusion in that discussion was that for folks building ECW support 
into
> GDAL themselves, they really ought to be going to ERMapper/Leica/Erdas 
for
> the SDK so they are the one directly bound by the click-through.
> 
> Doesn't all this make real open source look so much more pleasant!
> 
> Best regards,
> -- 
> 
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
http://osgeo.org
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080428/1fbcc60e/attachment.html
From dmorissette at mapgears.com  Mon Apr 28 09:04:47 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Apr 28 09:04:52 2008
Subject: [gdal-dev] Motion: To adopt RFC 23.1: Unicode Support in OGR
In-Reply-To: <48123523.4060209@pobox.com>
References: <4810B39C.1090704@pobox.com>	<20080425122746.GA32492@ak4719.spb.edu>
	<4811D5A4.5040203@pobox.com>	<20080425143304.GA356@ak4719.spb.edu>
	<48120900.1000407@pobox.com>	<20080425180118.GB1248@ak4719.spb.edu>
	<48123523.4060209@pobox.com>
Message-ID: <4815CB6F.8000404@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: To adopt RFC 23.1: Unicode Support in OGR
> 
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From szekerest at gmail.com  Mon Apr 28 10:25:36 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Apr 28 10:25:44 2008
Subject: [gdal-dev] Motion: To adopt RFC 23.1: Unicode Support in OGR
In-Reply-To: <48123523.4060209@pobox.com>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu> <4811D5A4.5040203@pobox.com>
	<20080425143304.GA356@ak4719.spb.edu> <48120900.1000407@pobox.com>
	<20080425180118.GB1248@ak4719.spb.edu> <48123523.4060209@pobox.com>
Message-ID: <f3b73b7d0804280725y28575c32r8260838da8c2b5a2@mail.gmail.com>

+1

Tamas


2008/4/25 Frank Warmerdam <warmerdam@pobox.com>:
> Andrey, PSC Members,
>
>  On further consideration I think expressing the recoding features via the
>  CPLString is not such a great idea since it is not externally accessable as
>  part of the C API, and it is getting us all bound up in particulars about
>  the CPLString.
>
>  I am withdrawing my initial version of RFC 23, and calling for a new vote
>  on a new form (RFC 23.1) replacing the CPLString recoding stuff with a
>  C API version.
>
>  We can choose to extend the CPLString with recoding options, or derive
>  subclasses of CPLString in the future without an RFC as long as it doesn't
>  affect existing implementation, and base it on the C API for the underlying
>  work.
>
>  Motion: To adopt RFC 23.1: Unicode Support in OGR
>
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
>  Starting the vote over again with a +1 from me.
>
>  Best regards,
>  --
>
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jeshua at openosx.com  Tue Apr 29 10:15:21 2008
From: jeshua at openosx.com (Jeshua Lacock)
Date: Tue Apr 29 10:15:28 2008
Subject: [gdal-dev] netcdf option build error
Message-ID: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>


Greetings,

I am having difficulty building GDAL 1.5.1 on Mac OS X 10.5.2 with the  
netcdf format enabled. If I disable the netcdf option, GDAL builds  
without incident.

I have netcdf 3.6.2 installed and have specified the installation  
location with the --with-netcdf flag.

It seems like it is not parsing netcdf.h.  In GDALmake.opt  
NETCDF_SETTING is set to 'yes'.

Any pointers would be greatly appreciated.

Here are the error messages:

netcdfdataset.h:151: error: 'NC_MAX_NAME' was not declared in this scope
netcdfdataset.cpp: In member function 'CPLErr  
netCDFRasterBand::CreateBandMetadata()':
netcdfdataset.cpp:144: error: 'NC_MAX_NAME' was not declared in this  
scope
netcdfdataset.cpp:145: error: size of array 'szMetaName' has non- 
integral type '<type error>'
netcdfdataset.cpp:157: error: size of array 'szTemp' has non-integral  
type '<type error>'
netcdfdataset.cpp:167: error: 'szVarName' was not declared in this scope
netcdfdataset.cpp:167: error: 'nc_inq_varname' was not declared in  
this scope
netcdfdataset.cpp:168: error: 'nc_inq_varndims' was not declared in  
this scope
netcdfdataset.cpp:198: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:205: error: 'nc_inq_varid' was not declared in this  
scope
netcdfdataset.cpp:218: error: 'nc_inq_vartype' was not declared in  
this scope
netcdfdataset.cpp:231: error: 'nc_get_vara_short' was not declared in  
this scope
netcdfdataset.cpp:234: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:238: error: 'nc_get_vara_int' was not declared in  
this scope
netcdfdataset.cpp:245: error: 'nc_get_vara_float' was not declared in  
this scope
netcdfdataset.cpp:252: error: 'nc_get_vara_double' was not declared in  
this scope
netcdfdataset.cpp: In constructor  
'netCDFRasterBand::netCDFRasterBand(netCDFDataset*, int, int, int,  
int*, int*, int)':
netcdfdataset.cpp:311: error: 'NC_NAT' was not declared in this scope
netcdfdataset.cpp:353: error: 'nc_inq_var' was not declared in this  
scope
netcdfdataset.cpp:363: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:382: error: 'nc_inq_att' was not declared in this  
scope
netcdfdataset.cpp:400: error: 'nc_inq_vartype' was not declared in  
this scope
netcdfdataset.cpp:408: error: 'nc_get_att_text' was not declared in  
this scope
netcdfdataset.cpp:415: error: 'nc_get_att_short' was not declared in  
this scope
netcdfdataset.cpp:418: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:421: error: 'nc_get_att_int' was not declared in  
this scope
netcdfdataset.cpp:427: error: 'nc_get_att_float' was not declared in  
this scope
netcdfdataset.cpp:432: error: 'nc_get_att_double' was not declared in  
this scope
netcdfdataset.cpp:438: error: 'nc_get_att_double' was not declared in  
this scope
netcdfdataset.cpp:447: error: 'NC_FILL_CHAR' was not declared in this  
scope
netcdfdataset.cpp:450: error: 'NC_FILL_SHORT' was not declared in this  
scope
netcdfdataset.cpp:452: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:453: error: 'NC_FILL_INT' was not declared in this  
scope
netcdfdataset.cpp:456: error: 'NC_FILL_FLOAT' was not declared in this  
scope
netcdfdataset.cpp:459: error: 'NC_FILL_DOUBLE' was not declared in  
this scope
netcdfdataset.cpp: In member function 'virtual CPLErr  
netCDFRasterBand::IReadBlock(int, int, void*)':
netcdfdataset.cpp:492: error: 'nc_inq_varndims' was not declared in  
this scope
netcdfdataset.cpp:538: error: 'nc_get_vara_uchar' was not declared in  
this scope
netcdfdataset.cpp:541: error: 'nc_get_vara_short' was not declared in  
this scope
netcdfdataset.cpp:546: error: 'nc_get_vara_long' was not declared in  
this scope
netcdfdataset.cpp:549: error: 'nc_get_vara_int' was not declared in  
this scope
netcdfdataset.cpp:553: error: 'nc_get_vara_float' was not declared in  
this scope
netcdfdataset.cpp:561: error: 'nc_get_vara_double' was not declared in  
this scope
netcdfdataset.cpp:573: error: 'nc_strerror' was not declared in this  
scope
netcdfdataset.cpp: In destructor 'virtual  
netCDFDataset::~netCDFDataset()':
netcdfdataset.cpp:621: error: 'nc_close' was not declared in this scope
netcdfdataset.cpp: In member function 'void  
netCDFDataset::SetProjection(int)':
netcdfdataset.cpp:714: error: 'nc_inq_varname' was not declared in  
this scope
netcdfdataset.cpp:727: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:729: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:738: error: 'nc_inq_varid' was not declared in this  
scope
netcdfdataset.cpp:831: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:831: error: 'nc_inq_varid' was not declared in this  
scope
netcdfdataset.cpp:832: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:845: error: 'nc_get_vara_double' was not declared in  
this scope
netcdfdataset.cpp:915: error: 'nc_get_att_int' was not declared in  
this scope
netcdfdataset.cpp:917: error: 'nc_get_att_double' was not declared in  
this scope
netcdfdataset.cpp:927: error: 'nc_get_att_double' was not declared in  
this scope
netcdfdataset.cpp: In member function 'CPLErr  
netCDFDataset::ReadAttributes(int, int)':
netcdfdataset.cpp:1131: error: 'NC_MAX_NAME' was not declared in this  
scope
netcdfdataset.cpp:1132: error: size of array 'szVarName' has non- 
integral type '<type error>'
netcdfdataset.cpp:1141: error: 'nc_inq_varnatts' was not declared in  
this scope
netcdfdataset.cpp:1146: error: 'nc_inq_varname' was not declared in  
this scope
netcdfdataset.cpp:1151: error: 'szAttrName' was not declared in this  
scope
netcdfdataset.cpp:1151: error: 'nc_inq_attname' was not declared in  
this scope
netcdfdataset.cpp:1152: error: 'szMetaName' was not declared in this  
scope
netcdfdataset.cpp:1153: error: 'nc_inq_att' was not declared in this  
scope
netcdfdataset.cpp:1162: error: 'nc_get_att_text' was not declared in  
this scope
netcdfdataset.cpp:1168: error: 'nc_get_att_short' was not declared in  
this scope
netcdfdataset.cpp:1177: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:1180: error: 'nc_get_att_int' was not declared in  
this scope
netcdfdataset.cpp:1192: error: 'nc_get_att_float' was not declared in  
this scope
netcdfdataset.cpp:1204: error: 'nc_get_att_double' was not declared in  
this scope
netcdfdataset.cpp: In member function 'void  
netCDFDataset::CreateSubDatasetList()':
netcdfdataset.cpp:1255: error: 'nc_inq_nvars' was not declared in this  
scope
netcdfdataset.cpp:1258: error: 'nc_inq_varndims' was not declared in  
this scope
netcdfdataset.cpp:1261: error: 'nc_inq_vardimid' was not declared in  
this scope
netcdfdataset.cpp:1268: error: 'nc_inq_dimlen' was not declared in  
this scope
netcdfdataset.cpp:1274: error: 'nc_inq_vartype' was not declared in  
this scope
netcdfdataset.cpp:1287: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:1299: error: 'nc_inq_varname' was not declared in  
this scope
netcdfdataset.cpp:1300: error: 'nc_inq_att' was not declared in this  
scope
netcdfdataset.cpp:1302: error: 'nc_get_att_text' was not declared in  
this scope
netcdfdataset.cpp: In static member function 'static GDALDataset*  
netCDFDataset::Open(GDALOpenInfo*)':
netcdfdataset.cpp:1348: error: 'NC_MAX_NAME' was not declared in this  
scope
netcdfdataset.cpp:1384: error: 'nc_open' was not declared in this scope
netcdfdataset.cpp:1391: error: 'nc_inq' was not declared in this scope
netcdfdataset.cpp:1402: error: 'nc_inq_varid' was not declared in this  
scope
netcdfdataset.cpp:1409: error: 'nc_close' was not declared in this scope
netcdfdataset.cpp:1414: error: 'nc_inq_ndims' was not declared in this  
scope
netcdfdataset.cpp:1420: error: 'nc_close' was not declared in this scope
netcdfdataset.cpp:1427: error: 'attname' was not declared in this scope
netcdfdataset.cpp:1427: error: 'nc_get_att_text' was not declared in  
this scope
netcdfdataset.cpp:1437: error: 'nc_inq_nvars' was not declared in this  
scope
netcdfdataset.cpp:1456: error: 'nc_inq_varndims' was not declared in  
this scope
netcdfdataset.cpp:1479: error: size of array 'pszNETCDFFilename' has  
non-integral type '<type error>'
netcdfdataset.cpp:1480: error: size of array 'szVarName' has non- 
integral type '<type error>'
netcdfdataset.cpp:1482: error: 'nc_inq_varname' was not declared in  
this scope
netcdfdataset.cpp:1504: error: 'nc_inq_varid' was not declared in this  
scope
netcdfdataset.cpp:1505: error: 'nc_inq_varndims' was not declared in  
this scope
netcdfdataset.cpp:1510: error: 'nc_inq_vardimid' was not declared in  
this scope
netcdfdataset.cpp:1535: error: 'nc_inq_dimlen' was not declared in  
this scope
netcdfdataset.cpp:1575: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp:1575: error: 'nc_inq_dimname' was not declared in  
this scope
netcdfdataset.cpp:1576: error: 'class netCDFDataset' has no member  
named 'papszDimName'
netcdfdataset.cpp: In function 'void CopyMetadata(void*, int, int)':
netcdfdataset.cpp:1667: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp:1697: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp: In function 'GDALDataset* NCDFCreateCopy(const  
char*, GDALDataset*, int, char**, int (*)(double, const char*, void*),  
void*)':
netcdfdataset.cpp:1721: error: 'NC_MAX_DIMS' was not declared in this  
scope
netcdfdataset.cpp:1722: error: size of array 'anBandMap' has non- 
integral type '<type error>'
netcdfdataset.cpp:1725: error: 'NC_MAX_NAME' was not declared in this  
scope
netcdfdataset.cpp:1742: error: 'nc_create' was not declared in this  
scope
netcdfdataset.cpp:1754: error: 'nc_def_dim' was not declared in this  
scope
netcdfdataset.cpp:1807: error: 'pszNetcdfProjection' was not declared  
in this scope
netcdfdataset.cpp:1812: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:1824: error: 'nc_put_att_double' was not declared in  
this scope
netcdfdataset.cpp:1849: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp:1904: error: 'pszNetcdfProjection' was not declared  
in this scope
netcdfdataset.cpp:1913: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:1925: error: 'nc_put_att_double' was not declared in  
this scope
netcdfdataset.cpp:1950: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp:1961: error: 'pszNetcdfProjection' was not declared  
in this scope
netcdfdataset.cpp:2000: error: 'nc_put_att_float' was not declared in  
this scope
netcdfdataset.cpp:2020: error: size of array 'szBandName' has non- 
integral type '<type error>'
netcdfdataset.cpp:2043: error: 'anBandDims' was not declared in this  
scope
netcdfdataset.cpp:2053: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:2081: error: 'nc_put_att_uchar' was not declared in  
this scope
netcdfdataset.cpp:2094: error: 'nc_enddef' was not declared in this  
scope
netcdfdataset.cpp:2096: error: 'nc_put_vara_uchar' was not declared in  
this scope
netcdfdataset.cpp:2102: error: 'nc_redef' was not declared in this scope
netcdfdataset.cpp:2113: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:2126: error: 'nc_put_att_short' was not declared in  
this scope
netcdfdataset.cpp:2139: error: 'nc_enddef' was not declared in this  
scope
netcdfdataset.cpp:2141: error: 'nc_put_vara_short' was not declared in  
this scope
netcdfdataset.cpp:2142: error: 'nc_redef' was not declared in this scope
netcdfdataset.cpp:2151: error: 'NC_INT' was not declared in this scope
netcdfdataset.cpp:2152: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:2166: error: 'nc_put_att_int' was not declared in  
this scope
netcdfdataset.cpp:2181: error: 'nc_enddef' was not declared in this  
scope
netcdfdataset.cpp:2183: error: 'nc_put_vara_int' was not declared in  
this scope
netcdfdataset.cpp:2184: error: 'nc_redef' was not declared in this scope
netcdfdataset.cpp:2193: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:2207: error: 'nc_put_att_float' was not declared in  
this scope
netcdfdataset.cpp:2222: error: 'nc_enddef' was not declared in this  
scope
netcdfdataset.cpp:2224: error: 'nc_put_vara_float' was not declared in  
this scope
netcdfdataset.cpp:2225: error: 'nc_redef' was not declared in this scope
netcdfdataset.cpp:2234: error: 'nc_def_var' was not declared in this  
scope
netcdfdataset.cpp:2247: error: 'nc_put_att_double' was not declared in  
this scope
netcdfdataset.cpp:2262: error: 'nc_enddef' was not declared in this  
scope
netcdfdataset.cpp:2264: error: 'nc_put_vara_double' was not declared  
in this scope
netcdfdataset.cpp:2265: error: 'nc_redef' was not declared in this scope
netcdfdataset.cpp:2281: error: 'pszNetcdfProjection' was not declared  
in this scope
netcdfdataset.cpp:2282: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp:2291: error: 'nc_put_att_text' was not declared in  
this scope
netcdfdataset.cpp:2309: error: 'nc_close' was not declared in this scope
make[3]: *** [../o/netcdfdataset.o] Error 1
make[2]: *** [netcdf-install-obj] Error 2
make[1]: *** [frmts-target] Error 2
make: *** [gdal] Error 2



Thank you,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From warmerdam at pobox.com  Tue Apr 29 10:32:55 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 29 10:33:19 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
Message-ID: <48173197.5040906@pobox.com>

Jeshua Lacock wrote:
> 
> Greetings,
> 
> I am having difficulty building GDAL 1.5.1 on Mac OS X 10.5.2 with the 
> netcdf format enabled. If I disable the netcdf option, GDAL builds 
> without incident.
> 
> I have netcdf 3.6.2 installed and have specified the installation 
> location with the --with-netcdf flag.
> 
> It seems like it is not parsing netcdf.h.  In GDALmake.opt 
> NETCDF_SETTING is set to 'yes'.
> 
> Any pointers would be greatly appreciated.
> 
> Here are the error messages:
> 
> netcdfdataset.h:151: error: 'NC_MAX_NAME' was not declared in this scope

Jeshua,

I *suspect* you have an HDF4 library built with the netcdf interface.  It
will provide an alternate netcdf.h that lacks defines like NC_MAX_NAME.

The simplest approach may be to find the netcdf.h in the hdf4 install and
remove it.  A more sophisticated approach is to dig into the hdf4 build
and disable the netcdf interface.  There is some discussion about this at:

   http://trac.osgeo.org/gdal/wiki/HDF

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From woklist at kyngchaos.com  Tue Apr 29 10:45:26 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 10:45:31 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
Message-ID: <12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>

Are you using an SDK?  Even though Xcode 3.0 now adds a symlink to / 
usr/local/lib in the SDKs, it doesn't add /usr/local/include, which  
can cause random include errors (especially not saying a header file  
is missing, but giving errors as if it was missing).  If you have  
netcdf installed in some other location, you need to add a symlink to  
it in the SDK.

If not using and SDK, dunno.  Works for me.

What about HDF4?  If you are compiling GDAL with that as well, make  
sure to use the --disable-netcdf option in HDF4.

On Apr 29, 2008, at 9:15 AM, Jeshua Lacock wrote:

>
> Greetings,
>
> I am having difficulty building GDAL 1.5.1 on Mac OS X 10.5.2 with  
> the netcdf format enabled. If I disable the netcdf option, GDAL  
> builds without incident.
>
> I have netcdf 3.6.2 installed and have specified the installation  
> location with the --with-netcdf flag.
>
> It seems like it is not parsing netcdf.h.  In GDALmake.opt  
> NETCDF_SETTING is set to 'yes'.
>
> Any pointers would be greatly appreciated.
>
> Here are the error messages:

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From jeshua at OpenOSX.com  Tue Apr 29 11:04:27 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 11:04:31 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
Message-ID: <7FCD3F1D-D21E-48AC-BE37-EBBBDB3CB916@OpenOSX.com>


On Apr 29, 2008, at 8:45 AM, William Kyngesburye wrote:

> Are you using an SDK?  Even though Xcode 3.0 now adds a symlink to / 
> usr/local/lib in the SDKs, it doesn't add /usr/local/include, which  
> can cause random include errors (especially not saying a header file  
> is missing, but giving errors as if it was missing).  If you have  
> netcdf installed in some other location, you need to add a symlink  
> to it in the SDK.

I am using Xcode 3 and just building for the native platform, and I am  
not building to /usr/local, everything is built in /Library/OpenOSX/ 
grass.

> If not using and SDK, dunno.  Works for me.
>
> What about HDF4?  If you are compiling GDAL with that as well, make  
> sure to use the --disable-netcdf option in HDF4.


Yes, I am compiling GDAL with HDF4 and hdf5 as well, so I will look at  
disabling it in HDF - although I did not enable it in HDF4 or hdf5  
(maybe it was enabled by default).

Based on Frank's response, HDF seems to be the culprit.

I will post when I have a better idea what's going on.


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From Shawn.Gong at drdc-rddc.gc.ca  Tue Apr 29 11:33:54 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Apr 29 11:34:01 2008
Subject: [gdal-dev] HDF5 make error on Solaris 9
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120047@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I am building HDF5 for gdal 1.5.1 on Solaris 9.

I am following Frank's advice by adding -fPIC in all Makefiles.

"make check >& check.out" gave the following errors.
	Testing message deletion      *FAILED*
	HDF5: infinite loop closing library


Help is appreciated.

thanks,
Shawn


-------------------------------------------
Testing testhdf5 
============================

For help use: testhdf5 -help
Linked with hdf5 version 1.6 release 5
Testing  -- Configure definitions (config) 
Testing  -- Encode/decode metadata code (metadata) 
Testing  -- Ternary Search Trees (tst) 
Testing  -- Memory Heaps (heap) 
Testing  -- Skip Lists (skiplist) 
Testing  -- Reference Counted Strings (refstr) 
Testing  -- Low-Level File I/O (file) 
Testing  -- Dataspaces (h5s) 
Testing  -- Attributes (attr) 
Testing  -- Selections (select) 
Testing  -- Time Datatypes (time) 
Testing  -- References (reference) 
Testing  -- Variable-Length Datatypes (vltypes) 
Testing  -- Variable-Length Strings (vlstrings) 
Testing  -- Group & Attribute Iteration (iterate) 
Testing  -- Array Datatypes (array) 
Testing  -- Generic Properties (genprop) 
Testing  -- Miscellaneous (misc) 


All tests were successful. 


Cleaning Up temp files...

real       21.2
user       17.4
sys         0.5

============================
Testing lheap 
============================
Testing local heap write
PASSED
Testing local heap read
PASSED
All local heap tests passed.

real        0.0
user        0.0
sys         0.0

============================
Testing ohdr 
============================
Testing object header creation
PASSED
Testing message creation
PASSED
Testing message modification
PASSED
Testing duplicate message creation
PASSED
Testing duplicate message modification
PASSED
Testing object header overflow in memory
PASSED
Testing object header overflow on disk
PASSED
Testing message deletion
*FAILED*
HDF5: infinite loop closing library
 
D,G,T,G,F,FD,P,D,F,FD,P,FD,P,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,F
D,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,F
D,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,F
D,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,FD,F
D,FD,FD,FD,FD,FD,FD
HDF5-DIAG: Error detected in HDF5 library version: 1.6.5 thread 0.  Back
trace follows.
  #000: H5O.c line 2535 in H5O_remove(): unable to remove object header
message
    major(12): Object header layer
    minor(59): Can't delete message
  #001: H5O.c line 2718 in H5O_remove_real(): error iterating over
messages
    major(10): Symbol table layer
    minor(48): Object not found
  #002: H5O.c line 3749 in H5O_iterate_real(): unable to decode message
    major(12): Object header layer
    minor(51): Unable to decode value
  #003: H5Omtime.c line 270 in H5O_mtime_decode(): unable to obtain
local timezone information
    major(12): Object header layer
    minor(29): Unable to initialize object
*** TESTS FAILED ***

real        0.0
user        0.0
sys         0.0
make[2]: *** [_check-s] Error 255
make[2]: Leaving directory `/home/sgong/devel/opensource/hdf5/test'
make[1]: *** [check] Error 2
make[1]: Leaving directory `/home/sgong/devel/opensource/hdf5/test'
make: *** [check] Error 1
From jeshua at OpenOSX.com  Tue Apr 29 11:44:27 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 11:44:31 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
Message-ID: <99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>


On Apr 29, 2008, at 8:45 AM, William Kyngesburye wrote:

> What about HDF4?  If you are compiling GDAL with that as well, make  
> sure to use the --disable-netcdf option in HDF4.

That seems to help some, as now I only get one error:

GDapi.c: In function 'GDsdid':
GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
function)
GDapi.c:10873: error: (Each undeclared identifier is reported only once
GDapi.c:10873: error: for each function it appears in.)
GDapi.c:10873: warning: unused variable 'dims'
make[4]: *** [../../o/GDapi.o] Error 1
make[3]: *** [lib-hdfeos] Error 2
make[2]: *** [hdf4-install-obj] Error 2
make[1]: *** [frmts-target] Error 2
make: *** [gdal] Error 2


Any ideas?


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From jeshua at OpenOSX.com  Tue Apr 29 13:31:21 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 13:38:04 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
Message-ID: <91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>


On Apr 29, 2008, at 9:44 AM, Jeshua Lacock wrote:

> That seems to help some, as now I only get one error:
>
> GDapi.c: In function 'GDsdid':
> GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
> function)
> GDapi.c:10873: error: (Each undeclared identifier is reported only  
> once
> GDapi.c:10873: error: for each function it appears in.)
> GDapi.c:10873: warning: unused variable 'dims'
> make[4]: *** [../../o/GDapi.o] Error 1
> make[3]: *** [lib-hdfeos] Error 2
> make[2]: *** [hdf4-install-obj] Error 2
> make[1]: *** [frmts-target] Error 2
> make: *** [gdal] Error 2

Note that I removed my entire HDF4 installation, followed the  
instructions at http://trac.osgeo.org/gdal/wiki/HDF, disabled the  
netcdf option for HDF4 and reinstalled HDF4, did a make clean in gdal,  
and I am still stuck. Cleary it must be using the wrong netcdf.h file,  
and if I manually #include netcdf.h with the full path in the source  
file it is ignored (so it must be parsed somewhere else).

If I manually define MAX_VAR_DIMS it compiles GDapi.c, then gets stuck  
on hdf4dataset.cpp.

If I manually define MAX_NC_NAME and MAX_VAR_DIMS, I get this error:

hdf4dataset.cpp: In static member function 'static GDALDataset*  
HDF4Dataset::Open(GDALOpenInfo*)':
hdf4dataset.cpp:744: error: cannot convert 'hdf_vartype_t' to  
'HDF4SubdatasetType' in assignment

I would really like to have netcdf and HDF capabilities. I suspect  
that it is a simple #include problem, but I cannot figure it out.

Any further tips would really be great.


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From woklist at kyngchaos.com  Tue Apr 29 14:00:45 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 14:00:49 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
Message-ID: <2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>

On Apr 29, 2008, at 12:31 PM, Jeshua Lacock wrote:

>
> On Apr 29, 2008, at 9:44 AM, Jeshua Lacock wrote:
>
>> That seems to help some, as now I only get one error:
>>
>> GDapi.c: In function 'GDsdid':
>> GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
>> function)
>> GDapi.c:10873: error: (Each undeclared identifier is reported only  
>> once
>> GDapi.c:10873: error: for each function it appears in.)
>> GDapi.c:10873: warning: unused variable 'dims'
>> make[4]: *** [../../o/GDapi.o] Error 1
>> make[3]: *** [lib-hdfeos] Error 2
>> make[2]: *** [hdf4-install-obj] Error 2
>> make[1]: *** [frmts-target] Error 2
>> make: *** [gdal] Error 2
>
> Note that I removed my entire HDF4 installation, followed the  
> instructions at http://trac.osgeo.org/gdal/wiki/HDF, disabled the  
> netcdf option for HDF4 and reinstalled HDF4, did a make clean in  
> gdal, and I am still stuck.

The current HDF4.2r2 has that --disable-netcdf configure flag I  
mentioned, there is no need for the -DHAVE_NETCDF mentioned on the  
wiki, and I don't know if the current HDF4 works with that old manual  
method.  Or the -fPIC (default on OSX already) or -lm (will be found  
in the automatically linked libSystem).

>

Other than that, that's about all I can offer.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From jeshua at openosx.com  Tue Apr 29 14:19:10 2008
From: jeshua at openosx.com (Jeshua Lacock)
Date: Tue Apr 29 14:19:12 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
Message-ID: <DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>


On Apr 29, 2008, at 12:00 PM, William Kyngesburye wrote:

> The current HDF4.2r2 has that --disable-netcdf configure flag I  
> mentioned, there is no need for the -DHAVE_NETCDF mentioned on the  
> wiki, and I don't know if the current HDF4 works with that old  
> manual method.  Or the -fPIC (default on OSX already) or -lm (will  
> be found in the automatically linked libSystem).


Thats what I figured, but I tried them both anyways. I would hate to  
ignore advice...

Buggers! I guess I am stumped without really hacking things up...


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From woklist at kyngchaos.com  Tue Apr 29 15:23:03 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 15:23:12 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
Message-ID: <029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>

I looked thru my notes on HDF4 to see if there was anything else.  Are  
you compiling on Intel OSX?  There is a small endian issue in HDF4 for  
Intel OSX where it will define the constants as bigendian, but only  
for 32bit OSX.  In hconv.h, line 66, none of the tested machine values  
match OSX Intel (__i386 or __i386__), so OSX Intel gets caught as  
bigendian.

I don't know if this is enough to affect the definition of  
MAX_VAR_DIMS or not.  I do see that MAX_VAR_DIMS is a backward- 
compatibility define for Netcdf v2 - netcdf.h lines 912+.  The modern  
version is NC_MAX_VAR_DIMS.  Did you use --disable-v2 when configuring  
netcdf?

On Apr 29, 2008, at 1:19 PM, Jeshua Lacock wrote:

>
> On Apr 29, 2008, at 12:00 PM, William Kyngesburye wrote:
>
>> The current HDF4.2r2 has that --disable-netcdf configure flag I  
>> mentioned, there is no need for the -DHAVE_NETCDF mentioned on the  
>> wiki, and I don't know if the current HDF4 works with that old  
>> manual method.  Or the -fPIC (default on OSX already) or -lm (will  
>> be found in the automatically linked libSystem).
>
>
> Thats what I figured, but I tried them both anyways. I would hate to  
> ignore advice...
>
> Buggers! I guess I am stumped without really hacking things up...
>
>
> Thanks,
>
> Jeshua Lacock, Owner
> <http://OpenOSX.com>
> phone: 877.240.1364
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From jeshua at OpenOSX.com  Tue Apr 29 15:36:01 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 15:41:00 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
Message-ID: <2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>


On Apr 29, 2008, at 1:23 PM, William Kyngesburye wrote:

> I looked thru my notes on HDF4 to see if there was anything else.   
> Are you compiling on Intel OSX?  There is a small endian issue in  
> HDF4 for Intel OSX where it will define the constants as bigendian,  
> but only for 32bit OSX.  In hconv.h, line 66, none of the tested  
> machine values match OSX Intel (__i386 or __i386__), so OSX Intel  
> gets caught as bigendian.

Yes; I am currently doing our Intel build.

> I don't know if this is enough to affect the definition of  
> MAX_VAR_DIMS or not.  I do see that MAX_VAR_DIMS is a backward- 
> compatibility define for Netcdf v2 - netcdf.h lines 912+.  The  
> modern version is NC_MAX_VAR_DIMS.  Did you use --disable-v2 when  
> configuring netcdf?

No I did not try disable-v2, do you think I should?

Thanks for your help - if you are interested, I would be happy to pay  
you to SSH in and take a look...


Best,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From jeshua at OpenOSX.com  Tue Apr 29 16:23:47 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 16:23:50 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
Message-ID: <99DCC105-A178-40BF-8693-D3A91F595ABB@OpenOSX.com>


On Apr 29, 2008, at 1:23 PM, William Kyngesburye wrote:

> I don't know if this is enough to affect the definition of  
> MAX_VAR_DIMS or not.  I do see that MAX_VAR_DIMS is a backward- 
> compatibility define for Netcdf v2 - netcdf.h lines 912+.  The  
> modern version is NC_MAX_VAR_DIMS.  Did you use --disable-v2 when  
> configuring netcdf?


I tried --disable-v2; same thing.

GDapi.c: In function 'GDsdid':
GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
function)
GDapi.c:10873: error: (Each undeclared identifier is reported only once
GDapi.c:10873: error: for each function it appears in.)
GDapi.c:10873: warning: unused variable 'dims'
make[4]: *** [../../o/GDapi.o] Error 1
make[3]: *** [lib-hdfeos] Error 2
make[2]: *** [hdf4-install-obj] Error 2
make[1]: *** [frmts-target] Error 2
make: *** [gdal] Error 2

Trying to figure out how netcdf is being found...

I don't understand it, frmts/netcdf/netcdfdataset.h includes #include  
"netcdf.h" (not <netcdf.h>) but there is not a netcdf.h file anywhere  
in my gdal source. And changing "netcdf.h" to the full path of my  
netcdf installation does not help...


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From woklist at kyngchaos.com  Tue Apr 29 16:39:14 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 16:39:18 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
Message-ID: <9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>

On Apr 29, 2008, at 2:36 PM, Jeshua Lacock wrote:

>
> On Apr 29, 2008, at 1:23 PM, William Kyngesburye wrote:
>
>> I looked thru my notes on HDF4 to see if there was anything else.   
>> Are you compiling on Intel OSX?  There is a small endian issue in  
>> HDF4 for Intel OSX where it will define the constants as bigendian,  
>> but only for 32bit OSX.  In hconv.h, line 66, none of the tested  
>> machine values match OSX Intel (__i386 or __i386__), so OSX Intel  
>> gets caught as bigendian.
>
> Yes; I am currently doing our Intel build.
>
You should probably add __i386__ to the define tests here.

>> I don't know if this is enough to affect the definition of  
>> MAX_VAR_DIMS or not.  I do see that MAX_VAR_DIMS is a backward- 
>> compatibility define for Netcdf v2 - netcdf.h lines 912+.  The  
>> modern version is NC_MAX_VAR_DIMS.  Did you use --disable-v2 when  
>> configuring netcdf?
>
> No I did not try disable-v2, do you think I should?
>
No - the GDAL HDF4 driver is expecting the v2 name.

> Thanks for your help - if you are interested, I would be happy to  
> pay you to SSH in and take a look...


It's a hobby for me.  And all I can offer is what I've found that  
works for me, I don't know if poking around in your setup will help.

Note: I've been *slowly* updating my build instructions on my site,  
but I haven't gotten to the GIS stuff yet.  Here's a quick-n-dirty  
summary of the relevant bits to your problem (assuming everything  
needed in /usr/local, otherwise a lot of --with options needed):

- netcdf

./configure --disable-f77 --disable-cxx --disable-examples --disable- 
dependency-tracking --disable-utilities

- HDF4 4.2r2

hconv.h: apply the endian patch

./configure --disable-fortran --disable-dependency-tracking --disable- 
netcdf

- GDAL (fill in other options you need):

./configure --with-threads --without-grass --with-netcdf=/usr/local -- 
with-hdf4=/usr/local


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From jeshua at OpenOSX.com  Tue Apr 29 17:20:58 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 17:21:01 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
Message-ID: <C97EA310-0342-4F82-9775-2E412DEFBBBE@OpenOSX.com>


On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:

> You should probably add __i386__ to the define tests here.

I am not sure if I fully understand, should I add to line 66:

	&& !defined(__i386__)

Or if that is not correct, can you email me a patch?

>>> I don't know if this is enough to affect the definition of  
>>> MAX_VAR_DIMS or not.  I do see that MAX_VAR_DIMS is a backward- 
>>> compatibility define for Netcdf v2 - netcdf.h lines 912+.  The  
>>> modern version is NC_MAX_VAR_DIMS.  Did you use --disable-v2 when  
>>> configuring netcdf?
>>
>> No I did not try disable-v2, do you think I should?
>>
> No - the GDAL HDF4 driver is expecting the v2 name.

Ah; I see, thanks!

>> Thanks for your help - if you are interested, I would be happy to  
>> pay you to SSH in and take a look...
>
>
> It's a hobby for me.  And all I can offer is what I've found that  
> works for me, I don't know if poking around in your setup will help.
>
> Note: I've been *slowly* updating my build instructions on my site,  
> but I haven't gotten to the GIS stuff yet.  Here's a quick-n-dirty  
> summary of the relevant bits to your problem (assuming everything  
> needed in /usr/local, otherwise a lot of --with options needed):
>
> - netcdf
>
> ./configure --disable-f77 --disable-cxx --disable-examples --disable- 
> dependency-tracking --disable-utilities
>
> - HDF4 4.2r2
>
> hconv.h: apply the endian patch
>
> ./configure --disable-fortran --disable-dependency-tracking -- 
> disable-netcdf
>
> - GDAL (fill in other options you need):
>
> ./configure --with-threads --without-grass --with-netcdf=/usr/local  
> --with-hdf4=/usr/local


Thanks, I was not disabling most of those options, so I will try now...


Thanks again,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From woklist at kyngchaos.com  Tue Apr 29 17:48:59 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 17:49:05 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <C97EA310-0342-4F82-9775-2E412DEFBBBE@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
	<C97EA310-0342-4F82-9775-2E412DEFBBBE@OpenOSX.com>
Message-ID: <99D8FF86-1E3F-4FEB-B314-05ED68440FA8@kyngchaos.com>

On Apr 29, 2008, at 4:20 PM, Jeshua Lacock wrote:

>
> On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:
>
>> You should probably add __i386__ to the define tests here.
>
> I am not sure if I fully understand, should I add to line 66:
>
> 	&& !defined(__i386__)
>
> Or if that is not correct, can you email me a patch?
>
That's it.

And it's an odd one too, since the HDF4 configure detects endianess  
and adds a -DSWAP, if needed, to all makefiles.  Must be leftovers  
from the previous version ;)
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of  
the allied nations devoted an entire year exclusively to hating the  
____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From jeshua at OpenOSX.com  Tue Apr 29 17:50:01 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Apr 29 17:50:04 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
Message-ID: <A4B2DD1C-0D63-4DF5-88E0-C80887F724BE@OpenOSX.com>


On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:

> - HDF4 4.2r2

I am using 4.2r3, I wonder if I should build r2?


Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From woklist at kyngchaos.com  Tue Apr 29 18:10:10 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 18:10:15 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <A4B2DD1C-0D63-4DF5-88E0-C80887F724BE@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
	<A4B2DD1C-0D63-4DF5-88E0-C80887F724BE@OpenOSX.com>
Message-ID: <97952FB8-26D1-4C09-AF62-C4EB3478D33A@kyngchaos.com>

Oh!  Despite my periodically checking for various updates, I somehow  
missed this one.  Looks like I have something to look at this evening...

On Apr 29, 2008, at 4:50 PM, Jeshua Lacock wrote:

>
> On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:
>
>> - HDF4 4.2r2
>
> I am using 4.2r3, I wonder if I should build r2?
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From woklist at kyngchaos.com  Tue Apr 29 21:34:22 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 29 21:34:26 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <97952FB8-26D1-4C09-AF62-C4EB3478D33A@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
	<A4B2DD1C-0D63-4DF5-88E0-C80887F724BE@OpenOSX.com>
	<97952FB8-26D1-4C09-AF62-C4EB3478D33A@kyngchaos.com>
Message-ID: <94ECE792-1EEA-47D3-AE2F-B8A3AEC10C34@kyngchaos.com>

For now, maybe 4.2r2 is best.  Just poking around, I see that there  
are a bunch of new HDF4 toggles to include either netcdf.h or  
hdf4_netcdf.h, so maybe the GDAL compilation isn't aware of this yet  
and something is getting confused along the way.

Just a sloppy guess for now, I can't seem to get focused on this right  
now.

On Apr 29, 2008, at 5:10 PM, William Kyngesburye wrote:

> Oh!  Despite my periodically checking for various updates, I somehow  
> missed this one.  Looks like I have something to look at this  
> evening...
>
> On Apr 29, 2008, at 4:50 PM, Jeshua Lacock wrote:
>
>>
>> On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:
>>
>>> - HDF4 4.2r2
>>
>> I am using 4.2r3, I wonder if I should build r2?
>>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From warmerdam at pobox.com  Tue Apr 29 23:58:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 29 23:59:00 2008
Subject: [gdal-dev] Re: Motion: To adopt RFC 23.1: Unicode Support in OGR
In-Reply-To: <48123523.4060209@pobox.com>
References: <4810B39C.1090704@pobox.com>
	<20080425122746.GA32492@ak4719.spb.edu> <4811D5A4.5040203@pobox.com>
	<20080425143304.GA356@ak4719.spb.edu> <48120900.1000407@pobox.com>
	<20080425180118.GB1248@ak4719.spb.edu> <48123523.4060209@pobox.com>
Message-ID: <4817EE6F.5020300@pobox.com>

Frank Warmerdam wrote:
> Motion: To adopt RFC 23.1: Unicode Support in OGR
> 
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
> 
> Starting the vote over again with a +1 from me.

Folks,

I declare this motion passed with support from FrankW, AndreyK, DanielM,
and TamasS.  I have started to commit an implementation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From c.schitka at gmail.com  Wed Apr 30 10:39:38 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Wed Apr 30 10:39:41 2008
Subject: [gdal-dev] VMAP Issues.
Message-ID: <e66a4dbf0804300739odf4c8bdp3b3e393ff7cc642@mail.gmail.com>

Hi All,

As you probably know. I am trying to read. Features from a VMAP data source
via code I am developing using GDAL 1.5.1 with OGDI built in.

I can get an OGRLayer* pLayer  back when I ask the driver to open the data
source, so I am assuming the driver is opening the file and the layer is a
good layer since the pointer is Not null. HOWEVER
when I ask the layer to get the Extents I try to execute this loop
in   ogrlayer.cpp.

Method:

OGRErr OGRLayer::GetExtent(OGREnvelope *psExtent, int bForce )

while( (poFeature = GetNextFeature()) != NULL )

{

}

The call to GetNextFeature ALWAYS returns me a NULL ptr. Which is the SAME
problem I am having in other areas of my code where I try to actually read
the features. I would expect this to work because I as I said earlier the
driver seems to open the data source and I can get a layer via the data
source, the layer is good because I can get the layer Defn etc. This Method
does return OGRErr 6. When I debug into GetNextFeature. OGDI seems to give
me a Error 2 "End of Selection" - I thought this was because I was at an EOF
or something. However even if I do a reset reading before trying to get the
next feature. I still get the same problem.

This lead me to the assumption that the code was right and the data was bad.
HOWVER when I open the data source + layer via ogrinfo. Everything works
like a charm.

Plz help.

Courtney.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080430/77e1bdb4/attachment.html
From matt.wilkie at gov.yk.ca  Wed Apr 30 12:42:25 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Apr 30 12:42:33 2008
Subject: [gdal-dev] read/write ungenerate files?
Message-ID: <4818A171.2090203@gov.yk.ca>

Hello,

Does anyone know of any read/write code for ArcInfo UNGENERATE files?

I know GRASS does, but I need to find or write a command line script to 
change elevation values so using GRASS is not really an option here.

thanks in advance,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From jeshua at OpenOSX.com  Wed Apr 30 13:38:07 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Apr 30 13:39:47 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <94ECE792-1EEA-47D3-AE2F-B8A3AEC10C34@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
	<A4B2DD1C-0D63-4DF5-88E0-C80887F724BE@OpenOSX.com>
	<97952FB8-26D1-4C09-AF62-C4EB3478D33A@kyngchaos.com>
	<94ECE792-1EEA-47D3-AE2F-B8A3AEC10C34@kyngchaos.com>
Message-ID: <EE37CD60-ED37-4202-AD85-71436F67269E@OpenOSX.com>


On Apr 29, 2008, at 7:34 PM, William Kyngesburye wrote:

> For now, maybe 4.2r2 is best.  Just poking around, I see that there  
> are a bunch of new HDF4 toggles to include either netcdf.h or  
> hdf4_netcdf.h, so maybe the GDAL compilation isn't aware of this yet  
> and something is getting confused along the way.
>
> Just a sloppy guess for now, I can't seem to get focused on this  
> right now.

Thanks for looking into it, but I am afraid I am still having the same  
issue.


Best,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From jeshua at OpenOSX.com  Wed Apr 30 13:41:10 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Apr 30 13:41:13 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<2E553AAF-9083-48C7-B41A-E2FCE7E1C611@OpenOSX.com>
	<9A86D125-D14C-4A1B-9391-2B48B937CD34@kyngchaos.com>
Message-ID: <3DBDBAC0-4B29-4ED8-A3F1-11E7D5CAE520@OpenOSX.com>


On Apr 29, 2008, at 2:39 PM, William Kyngesburye wrote:

> Note: I've been *slowly* updating my build instructions on my site,  
> but I haven't gotten to the GIS stuff yet.  Here's a quick-n-dirty  
> summary of the relevant bits to your problem (assuming everything  
> needed in /usr/local, otherwise a lot of --with options needed):
>
> - netcdf
>
> ./configure --disable-f77 --disable-cxx --disable-examples --disable- 
> dependency-tracking --disable-utilities
>
> - HDF4 4.2r2
>
> hconv.h: apply the endian patch
>
> ./configure --disable-fortran --disable-dependency-tracking -- 
> disable-netcdf
>
> - GDAL (fill in other options you need):
>
> ./configure --with-threads --without-grass --with-netcdf=/usr/local  
> --with-hdf4=/usr/local


Thanks for the information, but disabling all of these features does  
not fix my issue.


Thanks again,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From jeshua at OpenOSX.com  Wed Apr 30 13:46:57 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Apr 30 13:47:00 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <99DCC105-A178-40BF-8693-D3A91F595ABB@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<99DCC105-A178-40BF-8693-D3A91F595ABB@OpenOSX.com>
Message-ID: <F3EE7F9C-DEBC-4CA1-9FCC-60D890414253@OpenOSX.com>


On Apr 29, 2008, at 2:23 PM, Jeshua Lacock wrote:

> GDapi.c: In function 'GDsdid':
> GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
> function)
> GDapi.c:10873: error: (Each undeclared identifier is reported only  
> once
> GDapi.c:10873: error: for each function it appears in.)
> GDapi.c:10873: warning: unused variable 'dims'
> make[4]: *** [../../o/GDapi.o] Error 1
> make[3]: *** [lib-hdfeos] Error 2
> make[2]: *** [hdf4-install-obj] Error 2
> make[1]: *** [frmts-target] Error 2
> make: *** [gdal] Error 2

Can anyone inform me where MAX_VAR_DIMS is expected to be? I cannot  
make sense of it.

GDapi.c includes "mfhdf.h" (opposed to <mfhdf.h>), however, there is  
not any "mfhdf.h" in the GDAL branch. Copying "mfhdf.h" to /frmts/hdf4/ 
hdf-eos does not help either, nor does including "hdf4_netcdf.h".

This would help me figure out what is going on a great deal.


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From craig.miller at spatialminds.com  Wed Apr 30 13:52:25 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Apr 30 13:53:27 2008
Subject: [gdal-dev] read/write ungenerate files?
In-Reply-To: <4818A171.2090203@gov.yk.ca>
References: <4818A171.2090203@gov.yk.ca>
Message-ID: <0ed201c8aaea$f2ed0d30$d8c72790$@miller@spatialminds.com>

Back in the day Sol Katz had some code up on his FTP site.  If I remember
correctly there is some in the AVCBin OGR driver.  

I have this extremely vague recollection of there once being a "generate" or
"arc export" OGR driver that used to contain both the code for reading E00
files and Arc Coverages.  Maybe poke around the OGR source tree?

Craig
  

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Wilkie
Sent: Wednesday, April 30, 2008 9:42 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] read/write ungenerate files?

Hello,

Does anyone know of any read/write code for ArcInfo UNGENERATE files?

I know GRASS does, but I need to find or write a command line script to 
change elevation values so using GRASS is not really an option here.

thanks in advance,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

No virus found in this incoming message.
Checked by AVG. 
Version: 7.5.524 / Virus Database: 269.23.6/1407 - Release Date: 4/30/2008
11:35 AM
 

No virus found in this outgoing message.
Checked by AVG. 
Version: 7.5.524 / Virus Database: 269.23.6/1407 - Release Date: 4/30/2008
11:35 AM
 

From jeshua at OpenOSX.com  Wed Apr 30 14:22:15 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Apr 30 14:22:18 2008
Subject: [gdal-dev] read/write ungenerate files?
In-Reply-To: <0ed201c8aaea$f2ed0d30$d8c72790$@miller@spatialminds.com>
References: <4818A171.2090203@gov.yk.ca>
	<0ed201c8aaea$f2ed0d30$d8c72790$@miller@spatialminds.com>
Message-ID: <1DC0AC41-C567-4FF6-B884-8CA68D899C17@OpenOSX.com>


On Apr 30, 2008, at 11:52 AM, Craig Miller wrote:

> Back in the day Sol Katz had some code up on his FTP site.  If I  
> remember
> correctly there is some in the AVCBin OGR driver.


Hi Craig,

For reference, tou may or may not be aware that all of Katz's source  
code is still online at:

	ftp://ftp.blm.gov/pub/gis


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From jctoney at yahoo.com  Wed Apr 30 14:23:37 2008
From: jctoney at yahoo.com (Chris Toney)
Date: Wed Apr 30 14:30:19 2008
Subject: [gdal-dev] nodata handling in gdalwarp with ArcInfo binary Grid
	input
Message-ID: <403338.49668.qm@web32906.mail.mud.yahoo.com>

Hi,
I get a pattern of internal nodata pixels after
projecting an ArcInfo binary Grid with the following
command (GDAL 1.5.1):

gdalwarp -t_srs "+proj=utm +zone=12 +datum=NAD83" -tr
30 30 -rn -srcnodata "-9999" -dstnodata "-9999" -of
HFA C:\data\fm40_A\fbfm40_1 C:\data\fbfm40_utm.img

The output file is written as 8-bit and the
destination nodata value is 0 instead of -9999. A
graphic showing the pattern of nodata is at:

http://www.spatialsimulation.org/images/gdalwarp_ArcGrid_nodata.gif

and a sample ArcInfo Grid for input is at:

http://www.spatialsimulation.org/images/fm40_A.zip

The same command using an Erdas Imagine file as input
works correctly. The output is 16-bit with -9999
nodata value, and there are no internal nodata pixels.

I can specify "-ot Int16", and the command works
correctly with ArcInfo Grid input, but I'm calling
this from an application and it would be nice to let
gdalwarp handle the data type.

Also, at GDAL 1.4.2 the command seems to work fine
with ArcInfo Grid as input,except that the output is
8-bit and the nodata value is 0. But there is no
pattern of internal nodata with GDAL 1.4.2.

Should this be considered a bug, or do I need to
handle the data type explicitly?

Thanks.

Chris Toney



      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
From c.schitka at gmail.com  Wed Apr 30 14:42:29 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Wed Apr 30 14:42:32 2008
Subject: [gdal-dev] VMAP Issues.
In-Reply-To: <481887D8.6030002@pobox.com>
References: <e66a4dbf0804300739odf4c8bdp3b3e393ff7cc642@mail.gmail.com>
	<481887D8.6030002@pobox.com>
Message-ID: <e66a4dbf0804301142o4b3323e3x8f8a783fcac55682@mail.gmail.com>

Hi Frank,

I suspect that what is happening is that the VMAP data source is being
opened for writing instead of for reading. After debugging here is why I've
come to this conclusion.


OGRDataSource* pOGRDataSource = OGRSFDriverRegistrar::Open(char
*ptrDataSrc);

This in turn goes through all the drivers until it comes to.

int OGROGDIDataSource::Open

So as I step through this code, with the debugger everything works like I
would expect it to work.

Then I come to this

/* -------------------------------------------------------------------- */

/* If an explicit layer was selected, just create that layer. */

/* -------------------------------------------------------------------- */

m_poCurrentLayer = NULL;

I am selecting an explicit layer so I am bewildered at why this is set to
NULL (On a side note I suspect this being null is the root of my problems).

Then after a bunch of else ifs

We call this method

IAddLayer( pszLyrName, eFamily );

in ogrogdidatasource.cpp

where we create a new OGRLayer and add it to an array of layers. Now I would
think that if we were opening the data source for read we should be fetching
the layer as opposed to creating a new one. Creating this new layer would
also explain to me why my layer has no features in it.

Thoughts comments Help ?



Courtney




On Wed, Apr 30, 2008 at 10:53 AM, Frank Warmerdam <warmerdam@pobox.com>
wrote:

> Courtney Schitka wrote:
>
> > Hi All,
> >  As you probably know. I am trying to read. Features from a VMAP data
> > source via code I am developing using GDAL 1.5.1 with OGDI built in.
> >
> ...
>
> > This lead me to the assumption that the code was right and the data was
> > bad. HOWVER when I open the data source + layer via ogrinfo. Everything
> > works like a charm.
> >
>
> Courtney,
>
> Honestly, I cannot think of any reason this might be happening other than
> perhaps that you are using different versions of OGR+OGDI in ogrinfo vs.
> in your program.  I assume that is not the case?
>
> Are you confident it is the same layer you are getting no features from
> programmatically as you are getting features from with ogrinfo?
>
> I'm sorry to ask rather basic questions, but I don't know where else to
> start given the problems you are seeing.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080430/53517883/attachment.html
From matt.wilkie at gov.yk.ca  Wed Apr 30 14:50:18 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Apr 30 14:50:27 2008
Subject: [gdal-dev] read/write ungenerate files?
In-Reply-To: <0ed201c8aaea$f2ed0d30$d8c72790$@miller@spatialminds.com>
References: <4818A171.2090203@gov.yk.ca>
	<0ed201c8aaea$f2ed0d30$d8c72790$@miller@spatialminds.com>
Message-ID: <4818BF6A.2050408@gov.yk.ca>

Hi Craig,

> I have this extremely vague recollection of there once being a 
> "generate" or "arc export" OGR driver that used to contain both the 
> code for reading E00 files and Arc Coverages.

That is still there but e00 and coverages are not the same thing as
generate. 
(http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/avc)

> For reference, tou may or may not be aware that all of Katz's source
> code is still online at:
> 
> ftp://ftp.blm.gov/pub/gis

Thanks Jeshua, I'd forgotten about that.


/matt off scrounging ftp.blm and boning up on "Text processing with python"


From warmerdam at pobox.com  Wed Apr 30 14:59:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 30 15:00:26 2008
Subject: [gdal-dev] VMAP Issues.
In-Reply-To: <e66a4dbf0804301142o4b3323e3x8f8a783fcac55682@mail.gmail.com>
References: <e66a4dbf0804300739odf4c8bdp3b3e393ff7cc642@mail.gmail.com>
	<481887D8.6030002@pobox.com>
	<e66a4dbf0804301142o4b3323e3x8f8a783fcac55682@mail.gmail.com>
Message-ID: <4818C1A7.4090600@pobox.com>

Courtney Schitka wrote:
> Hi Frank,
>  
> I suspect that what is happening is that the VMAP data source is being 
> opened for writing instead of for reading. After debugging here is why 
> I've come to this conclusion.
>  
> 
> OGRDataSource* pOGRDataSource = OGRSFDriverRegistrar::Open(char 
> *ptrDataSrc);
> 
> This in turn goes through all the drivers until it comes to.
> 
> int
> 
> OGROGDIDataSource::Open
> 
> So as I step through this code, with the debugger everything works like 
> I would expect it to work.
> 
> Then I come to this
> 
> /* -------------------------------------------------------------------- */
> 
> /* If an explicit layer was selected, just create that layer. */
> 
> /* -------------------------------------------------------------------- */
> 
> m_poCurrentLayer = NULL;
> 
> I am selecting an explicit layer so I am bewildered at why this is set 
> to NULL (On a side note I suspect this being null is the root of my 
> problems).

Courtney,

Are you are specifying a layer name in the datasource name in
your program, and not doing the same when using ogrinfo?  That
is certainly a significant difference!  I didn't even know that
this layer name selection in the datasource name logic existed,
though I must have written it some 8-9 years ago.

Is there a reason you are doing this?  Why not just open the same
datasource name you use with ogrinfo, and then use GetLayer() or
GetLayerByName() to fetch the layer handle?

I see the explicitly named layer logic does not use cln_GetLayerCapabilities().
Perhaps there is a side effect of this difference.  The
cln_GetLayerCapabilities() in the OGDI API is actually a relatively recent
addition to the API.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From vishal at geologicsystems.com  Wed Apr 30 15:11:24 2008
From: vishal at geologicsystems.com (Vishal Ashok Singh)
Date: Wed Apr 30 15:16:31 2008
Subject: [gdal-dev] Scale factor and bias of BIL file
Message-ID: <4818C45C.4040400@geologicsystems.com>

Hello,
          I have a BIL file and i want to know what is the scaling 
factor and bias associated with it. The hdr. file does not contain this 
information. Here is the header file:
BYTEORDER      I
LAYOUT       BIL
NROWS         87
NCOLS         148
NBANDS        1
NBITS         16
BANDROWBYTES         296
TOTALROWBYTES        296
BANDGAPBYTES         0

Thank you,
Vishal Ashok Singh

From warmerdam at pobox.com  Wed Apr 30 15:22:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 30 15:22:48 2008
Subject: [gdal-dev] Scale factor and bias of BIL file
In-Reply-To: <4818C45C.4040400@geologicsystems.com>
References: <4818C45C.4040400@geologicsystems.com>
Message-ID: <4818C6EC.7030506@pobox.com>

Vishal Ashok Singh wrote:
> Hello,
>          I have a BIL file and i want to know what is the scaling factor 
> and bias associated with it. The hdr. file does not contain this 
> information. Here is the header file:
> BYTEORDER      I
> LAYOUT       BIL
> NROWS         87
> NCOLS         148
> NBANDS        1
> NBITS         16
> BANDROWBYTES         296
> TOTALROWBYTES        296
> BANDGAPBYTES         0

Vishal,

There isn't one.  It is up to the application to pick scaling values
for display (assuming that is what you are getting at by scaling factor
and bias).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jeshua at openosx.com  Wed Apr 30 17:46:21 2008
From: jeshua at openosx.com (Jeshua Lacock)
Date: Wed Apr 30 17:46:27 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <F3EE7F9C-DEBC-4CA1-9FCC-60D890414253@OpenOSX.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<99DCC105-A178-40BF-8693-D3A91F595ABB@OpenOSX.com>
	<F3EE7F9C-DEBC-4CA1-9FCC-60D890414253@OpenOSX.com>
Message-ID: <BDFB87C6-1EF0-4162-A986-AE78EA437C57@openosx.com>


On Apr 30, 2008, at 11:46 AM, Jeshua Lacock wrote:

> On Apr 29, 2008, at 2:23 PM, Jeshua Lacock wrote:
>
>> GDapi.c: In function 'GDsdid':
>> GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
>> function)
>> GDapi.c:10873: error: (Each undeclared identifier is reported only  
>> once
>> GDapi.c:10873: error: for each function it appears in.)
>> GDapi.c:10873: warning: unused variable 'dims'
>> make[4]: *** [../../o/GDapi.o] Error 1
>> make[3]: *** [lib-hdfeos] Error 2
>> make[2]: *** [hdf4-install-obj] Error 2
>> make[1]: *** [frmts-target] Error 2
>> make: *** [gdal] Error 2
>
> Can anyone inform me where MAX_VAR_DIMS is expected to be? I cannot  
> make sense of it.
>
> GDapi.c includes "mfhdf.h" (opposed to <mfhdf.h>), however, there is  
> not any "mfhdf.h" in the GDAL branch. Copying "mfhdf.h" to /frmts/ 
> hdf4/hdf-eos does not help either, nor does including "hdf4_netcdf.h".
>
> This would help me figure out what is going on a great deal.


Greetings,

I figured the issue out and I apologize for all my noise. I am almost  
embarrassed to say what was causing the issue.

My CFLAGS and CPPFLAGS were set to include both my HDF4 and HDF5  
include directories. I unset them and it builds beautifully.

Thanks for all of your help Frank and William!


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

