From guillaume.huby.lists at gmail.com  Wed Aug  1 03:00:09 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Problem with MODIS imagery
In-Reply-To: <46AF250A.6040901@geosys.com>
References: <46AF250A.6040901@geosys.com>
Message-ID: <ddc797c30708010000m13b4bfa6wb2c0edebc710e957@mail.gmail.com>

>
> -------- Message original --------
> Sujet:  [Gdal-dev] Problem with MODIS imagery
> Date:   Tue, 31 Jul 2007 10:14:52 +0100
> De:     Hugo Martins <hfpmartins@gmail.com>
> Pour ::         gdal <gdal-dev@lists.maptools.org >
>
> My first problem is that i can only extract different bands if i use
> gdal_translate -sds command. Well, i don?t need them all and so i have
> tried gdal_translate HDF4_EOS:EOS_GRID:"
> MOD13Q1.A2007.h17v04.005.2007204181956.hdf":MODIS_Grid_16DAY_250m_500m_VI!
> Unfortunately i get error message saying the file size is zero and that
> it has no bands. Any suggestions?


try (be careful to respect the exact and full subset name with the " and
spaces) gdal_translate "HDF4_EOS:EOS_GRID:"""
MOD13Q1.A2007177.h17v04.005.2007204181956.hdf""":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days NDVI"

The second problem: after extracting all bands without reprojecting, the
> coordinates come with shifts when compared to extracted bands from mrt
> tools



> The third problem is with gdalwarp but i suppose it is originated by the
> shifts occurred when extracting the bands (made previously). I want to
> reproject images to WGS84 and so picked up esri prj files for sinusoidal
> and wgs84 projections. Then i've changed the sinusoidal file by changing
> the semimajor axis from 6371000 to 6371007.181 and by changing the
> degree. After applied gdalwarp and shifts are maintained.


2nd and third problem have already been discussed in this list. For example
you should read :
http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482

There is also a ticket that looks very close to this ticket :
http://trac.osgeo.org/gdal/ticket/1239

Good luck,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070801/ed13edd2/attachment.html
From delphet at excite.com  Wed Aug  1 08:29:12 2007
From: delphet at excite.com (Marvin)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a
	specificschema in PostgreSQL
Message-ID: <20070801122912.6B3B18B34C@xprdmxin.myway.com>


Hi, Dean,

Thanks for the info. I tried your command but got the following error message:

ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser mySchema host=localhost password=somepass" .
ERROR 1: PQconnectdb failed.
missing "=" after "mySchema" in connection info string

ERROR 1: PostgreSQL driver doesn't currently support database creation.
Please create database with the `createdb' command.
PostgreSQL driver failed to create PG:dbname=test user=someuser mySchema host=localhost password=somepass

Do I need to insert anything between "mySchema" and the user name? BTW, I use TWTools 1.3.3. Is it the version you use?




 --- On Tue 07/31, Dean C. Mikkelsen < dcmikkelsen@shaw.ca > wrote:
From: Dean C. Mikkelsen [mailto: dcmikkelsen@shaw.ca]
To: gdal-dev@lists.maptools.org
Date: Tue, 31 Jul 2007 19:18:54 -0700
Subject: RE: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a	specificschema in PostgreSQL

Hi there.Have you tried:ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser myschemahost=localhost password=somepass"I've added the "myschema".When I first started working with PostGIS last week, I found I had to do theusername and schema one after the other in order place the data in thecorrect schema.Let me know if this works.Cheers,Dean-----Original Message-----From: gdal-dev-bounces@lists.maptools.org[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of MarvinSent: Tuesday, July 31, 2007 1:11 PMTo: gdal-dev@lists.maptools.orgSubject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into aspecificschema in PostgreSQLHi, All,I'm trying to import TIGER data into a PostgreSQL database. The command Iuse is:ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhostpassword=somepass" .This command put the data into the "public" schema. I'm wondering if thereis a way to import the data into a specific schema such as "mySchema". Itried to use the option "-dsco" 
as:ogr2ogr -f "PostgreSQL" PG:"dbname=test user=someuser host=localhostpassword=somepass" -dsco schema=mySchema .But it still put the data into the "public" schema. Could anyone please giveany suggestion? Thanks._______________________________________________Join Excite! - http://www.excite.comThe most personalized portal on the Web!_______________________________________________Gdal-dev mailing listGdal-dev@lists.maptools.orghttp://lists.maptools.org/mailman/listinfo/gdal-dev_______________________________________________Gdal-dev mailing listGdal-dev@lists.maptools.orghttp://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Join Excite! - http://www.excite.com
The most personalized portal on the Web!



From warmerdam at pobox.com  Wed Aug  1 09:43:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] gdal_translate question
In-Reply-To: <845AADAC1106E44996327D62097E4C6BDE660B@et.ad.sdsc.edu>
References: <20070731201125.4FE6591FCE@xprdmxin.myway.com>
	<845AADAC1106E44996327D62097E4C6BDE660B@et.ad.sdsc.edu>
Message-ID: <46B08DFC.4030804@pobox.com>

Christopher Condit wrote:
> I'm trying to translate from an EHdr dataset to a GeoTIFF, but want to
> incorporate the correct min/max values from the EHdr statistics file.
> I'm currently using: gdal_translate -ot Int32 -scale 0 65535 -415 5778
> input.DEM output.tiff
> Is there any way to do this automatically since the statistics will vary
> from DEM to DEM?

Chris,

If you omit the min/max values to the -scale option, gdal_translate will
pick min/max values itself.  I *think* it uses the metadata min/max.

eg.

gdal_translate -ot Int32 -scale 0 65535 input.DEM output.tiff

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From delphet at excite.com  Wed Aug  1 11:40:52 2007
From: delphet at excite.com (Marvin)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a specific
	schema in PostgreSQL
Message-ID: <20070801154052.047BD8B318@xprdmxin.myway.com>


Hi, Tim,

It worked. Thank you so much. BTW, was it mentioned in any documentation?




 --- On Tue 07/31, Tim Keitt < tkeitt@gmail.com > wrote:
From: Tim Keitt [mailto: tkeitt@gmail.com]
To: gdal-dev@lists.maptools.org
Date: Tue, 31 Jul 2007 23:35:00 +0000 (UTC)
Subject: [Gdal-dev] Re: [FWTools] org2org: import TIGER data into a	specific	schema in PostgreSQL

Marvin <delphet <at> excite.com> writes:> But it still put the data into the "public" schema. Could anyone please giveany suggestion? Thanks.Yes. I was just doing that 5 minutes ago.Use the -lco option eg -lco SCHEMA=<schema-name>One catch though -- only lowercase schema names are accepted!THK> > _______________________________________________> Join Excite! - http://www.excite.com> The most personalized portal on the Web!> _______________________________________________Gdal-dev mailing listGdal-dev@lists.maptools.orghttp://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Join Excite! - http://www.excite.com
The most personalized portal on the Web!



From matt.wilkie at gov.yk.ca  Wed Aug  1 14:25:08 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <469D1588.1050002@pobox.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>	<4697DFE3.9050101@pobox.com>	<1bcf78d0707171146n3138c44aq45f902cbcfe1537e@mail.gmail.com>
	<469D1588.1050002@pobox.com>
Message-ID: <46B0D004.3040600@gov.yk.ca>

Thank you Frank & Ed for clearing up some long held confusion on my 
part, and of course to John Mitchell for asking the question which 
prompted the elucidation in the first place!

I've added the info from this thread to 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp for posterity and 
further refinement.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Solomon_Gibbs at sra.com  Wed Aug  1 14:49:15 2007
From: Solomon_Gibbs at sra.com (Gibbs, Solomon)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Building GDAL + JNI bindings using MinGW
Message-ID: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>

Hi, 

I am trying to build the GDAL Java bindings using MingGW on Windows.
Everything appears to be compiling okay, although for whatever reason
the java wrappers need to be built with mingw32-make and not the MSYS
make, while the main GDAL library builds with MSYS make and not
mingw32-make.

The problem is that as near as I can tell, the JNI dlls are failing to
load correctly into the Java runtime. At the first reference to any
method in gdalJNI or gdalConstJNI, the JVM throws an unsatisfied link
error (e.g.):

java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.AllRegister()V
	at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
	at org.gdal.gdal.gdal.AllRegister(gdal.java:198)

I've copied all the JNI dlls and libgdal-1 to a single directory and the
JVM appears to be picking them up when System.loadLibrary is called. My
only guess is that some symbols may being mangled somewhere and the
method names in the dll are inconsistent with those in the java class.
I'm not too sure how to check this.

I'd like to stick with MinGW if at all possible. I'm much more
comfortable with gcc and friends than Visual Studio.

My questions are:

1. Does anyone have any recent experience building the JNI libraries for
Windows? I notice that they appear to be in sort of a limbo state -- not
part of the main build or the binary distribution.

2. Is using MinGW a problem? The GDAL website says that it works, but is
not supported and that libtool is a problem. The new version of the
MinGW binutils includes libtool 1.5.2 and appears to work okay (or at
least without producing error messages...)

3. Any suggestions for diagnosing the problem? I ran the Visual Studio
"depends" tool and it appears that all the dependent dlls are in place.


Thanks,

Solomon 
 
    


From Solomon_Gibbs at sra.com  Wed Aug  1 15:42:23 2007
From: Solomon_Gibbs at sra.com (Gibbs, Solomon)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Building GDAL + JNI bindings using MinGW
In-Reply-To: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>
References: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>
Message-ID: <BC953654349FDE4A9CEFE5879F268A12017EAFFE@dayex.sra.com>

 The answer is apparently that you need to make sure to pass the linker
either --kill-at or --add-stdcall-alias for the JNI libraries. This is
not done in the existing makefile.

It just figures that I would spend days working on the issue and then
figure it out minutes after I post to the list. :(


As a side note, the makefile for the JNI libs builds dlls with names
like "lib*jni.dll" but the Swig-written Java classes attempt to load
"*jni.dll". Since the Windows loader does not ignore the "lib" prefix, I
also had to update the makefile with the unprefixed library names as
well.


I would still appreciate any clarification on what the development
status of the JNI bindings is, per my previous post, though.



Thanks,

Solomon


From philippe.suray at market-ip.com  Wed Aug  1 16:39:40 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
References: <loom.20070731T145627-77@post.gmane.org>
Message-ID: <loom.20070801T223558-934@post.gmane.org>

Hello,

Am i the alone with this kind of problem?

Why gdal_translate modify the output colors to gray?

Thank you for your responses.
Regards

Philippe


From warmerdam at pobox.com  Wed Aug  1 18:24:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] gdal_translsate color problem
In-Reply-To: <loom.20070731T145627-77@post.gmane.org>
References: <loom.20070731T145627-77@post.gmane.org>
Message-ID: <46B10803.1050008@pobox.com>

Suray Ph wrote:
> Hello,
> 
> I have several color ortho-photo's of 4000x4000px, i would like to create tiles
> of 400x400px. In order to do that, I tried gdal_translate, but I have problems
> with the output file: the image is in gray scale, pixels are streched to the
> left with a big black band to the right.
...
> What is going wrong?
> Why the output file is in gray?
> 
> Could someone help me?

Suray,

What application are you viewing the output file with?  I would suggest
adding the "-co INTERLEAVE=PIXEL" option on the commandline for gdal_translate
to create a more vanilla geotiff file as output.

eg.
gdal_translate -of GTiff -co INTERLEAVE=PIXEL
     -projwin 228000 22200 228200 22000
     B228022_P72_Y2005_S71.tif .\tiles200\228000-22200-228200-22000.tif

Let me know if this resolves your issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug  1 18:42:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Changing Default for GeoTIFF driver to INTERLEAVE=PIXEL
Message-ID: <46B10C52.9040008@pobox.com>

Folks,

For nearly ten years now I have had GDAL defaulting to BAND interleaving
for TIFF files.  I did this because I felt it gave the best performance for
TIFF access from the fairly band oriented GDAL.  However, despite my fondest
wishes the world is still full of applications with half-assed TIFF support
that cannot read band interleaved TIFF files.  In the interest of removing
a lot of user frustration and pain I have modified the GeoTIFF driver to
default to INTERLEAVE=PIXEL instead of INTERLEAVE=BAND.

I haven't done any performance tests, but I believe for some applications
this will have somewhat worse performance.  To get the old behavior just
specify INTERLEAVE=BAND when creating geotiff files.

This change will first appear in the GDAL 1.5 release.

On this point, my spirit has been crushed.  Who knows what will happen next?
Perhaps I'll give up on my 15 year long crusade to pretend that PixelIsPoint
does not existing in GeoTIFF!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Thu Aug  2 06:45:00 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Building GDAL + JNI bindings using MinGW
In-Reply-To: <BC953654349FDE4A9CEFE5879F268A12017EAFFE@dayex.sra.com>
References: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>
	<BC953654349FDE4A9CEFE5879F268A12017EAFFE@dayex.sra.com>
Message-ID: <46B1B5AC.2060209@openplans.org>

Gibbs, Solomon ha scritto:
>  The answer is apparently that you need to make sure to pass the linker
> either --kill-at or --add-stdcall-alias for the JNI libraries. This is
> not done in the existing makefile.
> 
> It just figures that I would spend days working on the issue and then
> figure it out minutes after I post to the list. :(
> 
> 
> As a side note, the makefile for the JNI libs builds dlls with names
> like "lib*jni.dll" but the Swig-written Java classes attempt to load
> "*jni.dll". Since the Windows loader does not ignore the "lib" prefix, I
> also had to update the makefile with the unprefixed library names as
> well.
> 
> 
> I would still appreciate any clarification on what the development
> status of the JNI bindings is, per my previous post, though.

Abandoned. I have been a "weekend mantainer" for some time, but in
the end grow frustrated and decided my spare time deserved something
more satisfactory to fill it in.
I guess no one is maintaining the java bindings at the moment :(
Yet, please grab up your patches and attach them to a Trac ticket
so that they are more visible and someone with commit rights can
check them in.

Cheers
Andrea


From Christian.Strobl at dlr.de  Thu Aug  2 07:42:48 2007
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] problem translating  ilwis-files and georeference
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF79A6CD7C@exbe04.intra.dlr.de>



hi list,

has anbody experiences with gdal_translate and ilwis? if i am using the
following command

gdal_translate.exe -of ILWIS file1.tif file2

the resulting ILWIS-file has no georeference (no grf-file). what i am
doing wrong.

thanks for your help and greetings from munich
christian

p.s. file1 has the complete georeference imformation, for example:

gdalinfo d:\user\file1.tiff

Driver: GTiff/GeoTIFF
Files: d:\user\file1.tiff
       d:\user\file1.aux
Size is 10620, 4555
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-2.963477713768138,52.460865560873835)
Pixel Size = (0.000219419566860,-0.000219419566860)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  -2.9634777,  52.4608656) (  2d57'48.52"W, 52d27'39.12"N)
Lower Left  (  -2.9634777,  51.4614094) (  2d57'48.52"W, 51d27'41.07"N)
Upper Right (  -0.6332419,  52.4608656) (  0d37'59.67"W, 52d27'39.12"N)
Lower Right (  -0.6332419,  51.4614094) (  0d37'59.67"W, 51d27'41.07"N)
Center      (  -1.7983598,  51.9611375) (  1d47'54.10"W, 51d57'40.09"N)
Band 1 Block=10620x1 Type=Byte, ColorInterp=Red
Band 2 Block=10620x1 Type=Byte, ColorInterp=Green
Band 3 Block=10620x1 Type=Byte, ColorInterp=Blue




From warmerdam at pobox.com  Thu Aug  2 10:51:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Building GDAL + JNI bindings using MinGW
In-Reply-To: <46B1B5AC.2060209@openplans.org>
References: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>
	<BC953654349FDE4A9CEFE5879F268A12017EAFFE@dayex.sra.com>
	<46B1B5AC.2060209@openplans.org>
Message-ID: <46B1EF71.2010509@pobox.com>

Andrea Aime wrote:
>> I would still appreciate any clarification on what the development
>> status of the JNI bindings is, per my previous post, though.
> 
> Abandoned. 

Andrea,

OK, this is good to know.  It seems to be difficult to keep anyone
interested in being GDAL/OGR Java Bindings Person for any extended
period of time!

I have updated the Python, Ruby, Perl and C# Trac pages to list a primary
maintainer (Howard, Charles, Ari and Tamas respectively) and updated the
Java page to note there is no maintainer, and so the GDAL Java bindings
should be considered unsupported.

If there are any developers using the Java bindings and willing to learn
a bunch about SWIG, do testing, etc. I'd appreciate hearing from you.

Regarding the original post, MingW is still not a supported GDAL platform,
and so we don't make much effort to handle builds there.  We had discussed
adding it a while ago but with Mateusz having less time than planned for
general maintenance I think this is a bad time to add to his load.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From philippe.suray at market-ip.com  Thu Aug  2 12:07:48 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
References: <loom.20070731T145627-77@post.gmane.org>
	<46B10803.1050008@pobox.com>
Message-ID: <loom.20070802T180414-757@post.gmane.org>

Frank,

Thank you for this response, this OK now.
But if i add ... -co INTERLEAVE=TRUE TFW=TRUE ..., the output is also wrong!!
The result image is grey.

Could you give me an explanation?

Thank you.

Philippe.




From warmerdam at pobox.com  Thu Aug  2 13:28:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
In-Reply-To: <loom.20070802T180414-757@post.gmane.org>
References: <loom.20070731T145627-77@post.gmane.org>
	<46B10803.1050008@pobox.com>
	<loom.20070802T180414-757@post.gmane.org>
Message-ID: <46B2145B.9020402@pobox.com>

Suray Ph wrote:
> Frank,
> 
> Thank you for this response, this OK now.
> But if i add ... -co INTERLEAVE=TRUE TFW=TRUE ..., the output is also wrong!!
> The result image is grey.
> 
> Could you give me an explanation?

Phillipe,

I'm afraid I will need access to the input file to test this myself.
Also, what viewer application are you using to determine the file is grey?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug  2 13:35:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] problem translating  ilwis-files and georeference
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF79A6CD7C@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF79A6CD7C@exbe04.intra.dlr.de>
Message-ID: <46B215EF.60303@pobox.com>

Christian.Strobl@dlr.de wrote:
> 
> hi list,
> 
> has anbody experiences with gdal_translate and ilwis? if i am using the
> following command
> 
> gdal_translate.exe -of ILWIS file1.tif file2
> 
> the resulting ILWIS-file has no georeference (no grf-file). what i am
> doing wrong.
> 
> thanks for your help and greetings from munich
> christian
> 
> p.s. file1 has the complete georeference imformation, for example:

Christian,

I just tried a similar translation on linux with a WGS84 georeferenced
file, and the .grf file was produced without any problem.  I'm a bit at
a loss as to why it isn't working at your end.

I have put my input file at:

http://download.osgeo.org/gdal/data/gtiff/small_world.tif

Hmm, interesting.  I tried the same translation on windows using FWTools
1.3.4 and it had the same problem (no grf file).  Well, this appears to be
a windows related problem.  I'd appreciate it if you could file a bug
report on this in Trac and I'll follow up with the ILWIS driver maintainer
and/or fix this myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From philippe.suray at market-ip.com  Fri Aug  3 07:21:04 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
References: <loom.20070731T145627-77@post.gmane.org>
	<46B10803.1050008@pobox.com>
	<loom.20070802T180414-757@post.gmane.org>
	<46B2145B.9020402@pobox.com>
Message-ID: <loom.20070803T131730-819@post.gmane.org>

Frank,

Thank you for your help, you can download the files at:

http://dev.market-ip.com/B250048_P72_Y2005_S68.tif
http://dev.market-ip.com/out.tif

I used this command line:
gdal_translate -of GTiff -co "TFW=TRUE INTERLEAVE=PIXEL"
B250048_P72_Y2005_S68.tif out.tif

Hope this can help to point the problem.

Regards.

Philippe


From philippe.suray at market-ip.com  Fri Aug  3 09:51:29 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
References: <loom.20070731T145627-77@post.gmane.org>
	<46B10803.1050008@pobox.com>
	<loom.20070802T180414-757@post.gmane.org>
	<46B2145B.9020402@pobox.com>
	<loom.20070803T131730-819@post.gmane.org>
Message-ID: <loom.20070803T154841-991@post.gmane.org>

Suray Ph <philippe.suray <at> market-ip.com> writes:

> 
> Frank,
> 
> Thank you for your help, you can download the files at:
> 
> http://dev.market-ip.com/B250048_P72_Y2005_S68.tif
> http://dev.market-ip.com/out.tif
> 
> I used this command line:
> gdal_translate -of GTiff -co "TFW=TRUE INTERLEAVE=PIXEL"
> B250048_P72_Y2005_S68.tif out.tif
> 
> Hope this can help to point the problem.
> 
> Regards.
> 
> Philippe
> 

Frank,

I think i found the problem. I open out.tif with this stupid MS Office Document
Imaging, if i open this file with OpenEV, everything is right.

Apologize for this question, thank you for your help.

Philippe.



From warmerdam at pobox.com  Fri Aug  3 11:54:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: gdal_translsate color problem
In-Reply-To: <loom.20070803T154841-991@post.gmane.org>
References: <loom.20070731T145627-77@post.gmane.org>
	<46B10803.1050008@pobox.com>
	<loom.20070802T180414-757@post.gmane.org>
	<46B2145B.9020402@pobox.com>
	<loom.20070803T131730-819@post.gmane.org>
	<loom.20070803T154841-991@post.gmane.org>
Message-ID: <46B34FB9.70703@pobox.com>

Suray Ph wrote:
> Suray Ph <philippe.suray <at> market-ip.com> writes:
> 
>> Frank,
>>
>> Thank you for your help, you can download the files at:
>>
>> http://dev.market-ip.com/B250048_P72_Y2005_S68.tif
>> http://dev.market-ip.com/out.tif
>>
>> I used this command line:
>> gdal_translate -of GTiff -co "TFW=TRUE INTERLEAVE=PIXEL"
>> B250048_P72_Y2005_S68.tif out.tif
>>
>> Hope this can help to point the problem.
>>
>> Regards.
>>
>> Philippe
>>
> 
> Frank,
> 
> I think i found the problem. I open out.tif with this stupid MS Office Document
> Imaging, if i open this file with OpenEV, everything is right.
> 
> Apologize for this question, thank you for your help.

Philippe,

The other problem is that you need a new -co for each creation option.
So your command should be:

gdal_translate -of GTiff -co TFW=TRUE -co INTERLEAVE=PIXEL in.tif out.tif

The INTERLEAVE=PIXEL was having no effect as you had applied it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Fri Aug  3 11:13:46 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Building GDAL + JNI bindings using MinGW
In-Reply-To: <46B1EF71.2010509@pobox.com>
References: <BC953654349FDE4A9CEFE5879F268A12017EAFDF@dayex.sra.com>
	<BC953654349FDE4A9CEFE5879F268A12017EAFFE@dayex.sra.com>
	<46B1B5AC.2060209@openplans.org> <46B1EF71.2010509@pobox.com>
Message-ID: <46B3462A.5060507@tkk.fi>

Frank Warmerdam kirjoitti:
>
> Regarding the original post, MingW is still not a supported GDAL 
> platform,
> and so we don't make much effort to handle builds there.  We had 
> discussed
> adding it a while ago but with Mateusz having less time than planned for
> general maintenance I think this is a bad time to add to his load.
>

I'm actively using GDAL that I compile with MinGW (MSYS in fact) so I'm 
interested in keeping the build working in that environment also. I also 
compile the Perl bindings in MinGW. However, I'm not including any other 
drivers than the deafult ones - for example I've tried to include 
JPEG2000 but failed.

Ari


From jduckles at purdue.edu  Fri Aug  3 11:35:42 2007
From: jduckles at purdue.edu (Jonah Duckles)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Problem with python-gdal on ia64 Unbuntu Feisty
Message-ID: <cc32b9a50708030835m11298953id8c34a2493e725f6@mail.gmail.com>

I am using Ubuntu fesity 64-bit and having problems with using python
bindings.  Specifically when I try to us "ReadAsArray():

raster_file = sys.argv[1]
raster = gdal.Open(raster_file,GA_ReadOnly)
myarray = raster.ReadAsArray()

Traceback (most recent call last):
  File "gdal-test.py", line 12, in <module>
    myarray = inraster.ReadAsArray()
  File "/usr/lib/python2.5/site-packages/gdal.py", line 747, in ReadAsArray
    return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize, ysize )
  File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 133, in
DatasetReadAsArray
    return BandReadAsArray( ds.GetRasterBand(1), xoff, yoff, xsize, ysize)
  File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 181, in
BandReadAsArray
    buf_xsize, buf_ysize, datatype, buf_obj )
TypeError: Unaligned buffer

I am guessing this is some sort of datatype mismatch on 64-bit systems as
this works splendidly on 32-bit debian machines, but fails on my 64-bit
machine.

I am using the default python-gdal package and its dependents as installed
in Feisty 7.04

Any idea what it might be?

Thanks,
Jonah

-- 
Jonah Duckles
Graduate Research Assistant
Purdue University
Forestry and Natural Resources
195 Marsteller Street
West Lafayette, IN 47907
(765)532-1126
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070803/349d0b52/attachment.html
From hobu.inc at gmail.com  Fri Aug  3 12:44:29 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Problem with python-gdal on ia64 Unbuntu Feisty
In-Reply-To: <cc32b9a50708030835m11298953id8c34a2493e725f6@mail.gmail.com>
References: <cc32b9a50708030835m11298953id8c34a2493e725f6@mail.gmail.com>
Message-ID: <E4105072-F227-45E0-9794-62B7B4DCC301@gmail.com>

Jonah,

This bug has been reported <http://trac.osgeo.org/gdal/ticket/1712>,  
which is a re-opening of <http://trac.osgeo.org/gdal/ticket/1379>,  
which we thought we fixed.   The proposed patch in 1712 will work,  
but it isn't universal, and we need something that can be applied in  
the SWIG interface file instead of being applied to the output.

Howard


On Aug 3, 2007, at 10:35 AM, Jonah Duckles wrote:

> I am using Ubuntu fesity 64-bit and having problems with using  
> python bindings.  Specifically when I try to us "ReadAsArray():
>
> raster_file = sys.argv[1]
> raster = gdal.Open(raster_file,GA_ReadOnly)
> myarray = raster.ReadAsArray()
>
> Traceback (most recent call last):
>   File "gdal-test.py", line 12, in <module>
>     myarray = inraster.ReadAsArray ()
>   File "/usr/lib/python2.5/site-packages/gdal.py", line 747, in  
> ReadAsArray
>     return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize,  
> ysize )
>   File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 133,  
> in DatasetReadAsArray
>     return BandReadAsArray( ds.GetRasterBand(1), xoff, yoff, xsize,  
> ysize)
>   File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 181,  
> in BandReadAsArray
>     buf_xsize, buf_ysize, datatype, buf_obj )
> TypeError: Unaligned buffer
>
> I am guessing this is some sort of datatype mismatch on 64-bit  
> systems as this works splendidly on 32-bit debian machines, but  
> fails on my 64-bit machine.
>
> I am using the default python-gdal package and its dependents as  
> installed in Feisty 7.04
>
> Any idea what it might be?
>
> Thanks,
> Jonah
>
> -- 
> Jonah Duckles
> Graduate Research Assistant
> Purdue University
> Forestry and Natural Resources
> 195 Marsteller Street
> West Lafayette, IN 47907
> (765)532-1126
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Sat Aug  4 13:06:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
Message-ID: <46B4B1FC.1030609@pobox.com>

Folks,

Currently GDAL supports two mechanisms for identifying nodata/transparent
areas in a raster.  One is use of a particular pixel value as a nodata
value (returned by the GDALRasterBand::GetNodataValue() method) and the other
is by specifying an alpha band with alpha=0 marking transparent areas.

However, a number of file formats support a concept of "nodata masks" -
essentially bitmasks marking areas of the raster that are nodata areas.  But
this is accomplished without having to reserve a special marker value to be
the nodata value.

This is the case with GRASS for instance, and the GDAL GRASS driver actually
jumps through hoops to promote byte data to int16 and overlay a nodata value.
However, this is cumbersome and violates the underlying data model of the
format.

This issue also arises with other formats, including a new JPEG variation
with a nodata bitmask appended to the file.  I also feel that nodata masks
can offer a better

A client has requested support for nodata bitmasking be incorporated into
GDAL in some appropriate fashion.  I can see a few approaches:

1) Pseudo-Alpha

In this approach the nodata mask is treated as a sort of alpha band with
values of 0 and 255.  One downside to this is that alpha bands are not
clearly associated with a particular band, so if you wanted to have
distinct nodata bitmasks for each band in a dataset there would be
no explicit association between particular alpha bands and particular
original bands.

2) Data Promotion and NODATA pixel value creation

This is the approached used now in the GDAL GRASS driver.  A nodata value
outside the current valid range is created within the driver, and if
necessary the pixel data type is promoted to a larger type to make space
for this "extra value" value.  For instance Byte pixel type would be
promoted to UInt16 so we could use 256 as our nodata value.

3) Introduce Explicit Nodata Bitmap API

Extend the GDAL API to include an option for reading a validity bitmask
in the RasterIO() call - or perhaps a new BitmaskIO() method paralleling
the RasterIO() method.

Potentially the default implementation of this method could generate a
bitmask based on the raster data and nodata pixel values if they are
present so that applications could use this one method for both models.

In one sense this is the cleanest solution, but it is also by far the
most disruptive.  It requires new support in applications that want
to take advantage of it, further complicates the GDAL API and worst, it
may be very hard to implement properly for formats without bitmasks, but
with complicated resampling or blocking logic.

I am looking for some feedback from the community.  In particular I'm
interested in examples of file formats that include bit masking.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Sat Aug  4 13:27:58 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B4B1FC.1030609@pobox.com>
References: <46B4B1FC.1030609@pobox.com>
Message-ID: <46B4B71E.9090500@perkins.net>

To throw in my two cents, I would prefer to see something like option 3. 
Option 2 just sounds horrible and inefficient (and I guess you don't 
like it). And if we're going to the trouble of adding an extra special 
alpha band for images with NODATA masks, then why not go just a little 
further and make it an explicit nodata mask?

Seems to me that this extra API could be tacked on fairly neatly to the 
existing NODATA mechanism, without that much disruption. Existing apps 
can continue to use the old NODATA mechanism, while newer apps can use 
this one, with the default implementation you suggest, which means that 
we don't need to modify any format drivers initially. I'm not sure I 
understand your concerns about how it might be complicated to implement 
for some formats with complicated blocking schemes - if you can write a 
RasterIO() method for these formats and you can specify a NODATA value, 
are there any new problems that weren't there before?

It is of course essential that the existing NODATA API continues to be 
supported.

Cheers,

Simon


Frank Warmerdam wrote:
> Folks,
>
> Currently GDAL supports two mechanisms for identifying nodata/transparent
> areas in a raster.  One is use of a particular pixel value as a nodata
> value (returned by the GDALRasterBand::GetNodataValue() method) and 
> the other
> is by specifying an alpha band with alpha=0 marking transparent areas.
>
> However, a number of file formats support a concept of "nodata masks" -
> essentially bitmasks marking areas of the raster that are nodata 
> areas.  But
> this is accomplished without having to reserve a special marker value 
> to be
> the nodata value.
>
> This is the case with GRASS for instance, and the GDAL GRASS driver 
> actually
> jumps through hoops to promote byte data to int16 and overlay a nodata 
> value.
> However, this is cumbersome and violates the underlying data model of the
> format.
>
> This issue also arises with other formats, including a new JPEG variation
> with a nodata bitmask appended to the file.  I also feel that nodata 
> masks
> can offer a better
>
> A client has requested support for nodata bitmasking be incorporated into
> GDAL in some appropriate fashion.  I can see a few approaches:
>
> 1) Pseudo-Alpha
>
> In this approach the nodata mask is treated as a sort of alpha band with
> values of 0 and 255.  One downside to this is that alpha bands are not
> clearly associated with a particular band, so if you wanted to have
> distinct nodata bitmasks for each band in a dataset there would be
> no explicit association between particular alpha bands and particular
> original bands.
>
> 2) Data Promotion and NODATA pixel value creation
>
> This is the approached used now in the GDAL GRASS driver.  A nodata value
> outside the current valid range is created within the driver, and if
> necessary the pixel data type is promoted to a larger type to make space
> for this "extra value" value.  For instance Byte pixel type would be
> promoted to UInt16 so we could use 256 as our nodata value.
>
> 3) Introduce Explicit Nodata Bitmap API
>
> Extend the GDAL API to include an option for reading a validity bitmask
> in the RasterIO() call - or perhaps a new BitmaskIO() method paralleling
> the RasterIO() method.
>
> Potentially the default implementation of this method could generate a
> bitmask based on the raster data and nodata pixel values if they are
> present so that applications could use this one method for both models.
>
> In one sense this is the cleanest solution, but it is also by far the
> most disruptive.  It requires new support in applications that want
> to take advantage of it, further complicates the GDAL API and worst, it
> may be very hard to implement properly for formats without bitmasks, but
> with complicated resampling or blocking logic.
>
> I am looking for some feedback from the community.  In particular I'm
> interested in examples of file formats that include bit masking.
>
> Best regards,


From lijian.shi at und.nodak.edu  Sun Aug  5 02:09:49 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] geotiff 2 png with c++
Message-ID: <0JMA00C3FEGD6F20@mailmx1.und.nodak.edu>

Hi, all,

 

I want to convert data with geotiff format into png format and I know i can
do it with gdal_translate. Now I want to write a c++ code to do this job
because I need do some change on the raw data from geotiff file before I
write into png file.  The code is as followed but there seems to be some
wrong with it. Anyone could help me to figure out the mistake? Thanks in
advance!

 

Lijian

 

.............

float *srcdata = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);

 

...// the data has been read into srcdata from geotiff file

 

 

    //Creating PNG Files

    const char *dstFormat = "PNG";    

    GDALDriver *dstDriver;

    char **dstMetadata;

 

    dstDriver = GetGDALDriverManager()->GetDriverByName(dstFormat);

 

    if( dstDriver == NULL )

      exit(1);

 

    dstMetadata = dstDriver->GetMetadata();

    if( CSLFetchBoolean( dstMetadata, GDAL_DCAP_CREATE, FALSE ) )

      cout <<"Driver " <<dstFormat <<" supports Create() method.\n";

    if( CSLFetchBoolean( dstMetadata, GDAL_DCAP_CREATECOPY, FALSE ) )

      cout <<"Driver " <<dstFormat <<" supports CreateCopy() method.\n";

 

    

    GDALDataset *dstDS;

 

dstDS = dstDriver->CreateCopy(dstFilename, srcDataset, FALSE, NULL, NULL,
NULL); //srcDataset is from geotiff file. Is this step right?

//GDALDataset *srcDS = (GDALDataset *) GDALOpen(srcFilename, GA_ReadOnly);

 

            

    if( dstDS != NULL )

      delete dstDS;

 

    GDALRasterBand *dstBand;

    dstBand = dstDS->GetRasterBand(1);

    int i, j;

    unsigned *dstdata = (unsigned *)
CPLMalloc(sizeof(unsigned)*nXSize*nYSize);

    for (i=0; i<nXSize; i++)

            for (j=0; j<nYSize; j++)

            {

                        dstdata[j+i*nYSize] = unsigned
(srcdata[j+i*nYSize]); // here i just convert the data from float into
uint16

            }

  //          cout<< dstdata[0] << dstdata[4]<<"test\n";

dstBand->RasterIO(GF_Write, 0, 0, nXSize, nYSize, dstdata, nXSize, nYSize,
GDT_UInt16, 0, 0);

 

......

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070805/4493a75c/attachment.html
From warmerdam at pobox.com  Sun Aug  5 13:11:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] geotiff 2 png with c++
In-Reply-To: <0JMA00C3FEGD6F20@mailmx1.und.nodak.edu>
References: <0JMA00C3FEGD6F20@mailmx1.und.nodak.edu>
Message-ID: <46B604DD.2010709@pobox.com>

Lijian Shi wrote:
> Hi, all,
> 
>  
> 
> I want to convert data with geotiff format into png format and I know i 
> can do it with gdal_translate. Now I want to write a c++ code to do this 
> job because I need do some change on the raw data from geotiff file 
> before I write into png file.  The code is as followed but there seems 
> to be some wrong with it. Anyone could help me to figure out the 
> mistake? Thanks in advance!

Lijian,

I'm afraid I can't follow the code you supply.

1) you close dstDS (by deleting it) but then still try to write to it.

2) You don't seem load load data into srcData anywhere.

In any event, the process you want to do (geotiff to png with processing
in between) is tricky because the PNG driver only supports CreateCopy(),
not Create().  That means you can't use RasterIO() to write to PNG - you
have to have a pre-prepared input image to give as input to CreateCopy().

Depending on file size, you could use an intermediate MEM format dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rayg at daylongraphics.com  Sun Aug  5 15:26:09 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B4B1FC.1030609@pobox.com>
References: <46B4B1FC.1030609@pobox.com>
Message-ID: <46B62451.4070801@daylongraphics.com>

I think option 3 is good, it's similar in design to the boolean array 
returned when projecting a list of coordinates and invalid projections 
have to be individually identified. I'm partial to a new band method to 
read/write void masks.

Option 2 could work too. Writing is a little funky... you'd set an 8-bit 
band type but a nodata value of 256, and the driver would see if it 
could write void masks. But the amount of extra coding doesn't seem great.

Reading is the bigger problem. e.g., caller-side code to tell what bit 
depth an image is would likely fail. It's not symmetrical with writing. 
You'd need an extra band method indicating what the real physical bit 
depth was. Since callers have to account for possible differences in 
physical and logical depth, may as well cut to the chase and do option 
3. It might still be tempting since a logical depth method is less work, 
but it feels like a hack.

My two cents,
Ray

From tkeitt at gmail.com  Sun Aug  5 16:59:13 2007
From: tkeitt at gmail.com (Tim Keitt)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: Nodata bitmasks / null processing
References: <46B4B1FC.1030609@pobox.com>
Message-ID: <loom.20070805T223605-273@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 1) Pseudo-Alpha
> 

I assume alpha bands are sometimes used to represent alpha values,
so this seems to mix concepts in the same interface.

> 
> 2) Data Promotion and NODATA pixel value creation
> 

This is my least favorite. This logic should not occur hidden
in the driver layer. If the client needs to specify a nodata value,
it should be responsible for choosing a suitable storage depth to
include a flag value. (I see it does make sense if you need to
_read_ a masked data layer and have no means within GDAL to
represent the mask.)

> 
> 3) Introduce Explicit Nodata Bitmap API
> 

Why not reuse the current raster band API?

flag_t hasMask(this_band)
success_t setMask(this_band, mask_band)
band_t getMask(this_band)

The latter returns a raster band with zero indicating no data.
How the driver stores the mask is its concern (bit packed, etc.).

I would require that a band with a mask must not have a nodata
value (make them orthogonal).

Drivers for formats that do not support explicit masks could
either not allow setting the nodata mask or write the mask
as an ordinary band and use metadata to connect the two.

THK


From rayg at daylongraphics.com  Sun Aug  5 18:41:35 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Re: Nodata bitmasks / null processing
In-Reply-To: <loom.20070805T223605-273@post.gmane.org>
References: <46B4B1FC.1030609@pobox.com>
	<loom.20070805T223605-273@post.gmane.org>
Message-ID: <46B6521F.1000501@daylongraphics.com>

Tim Keitt wrote:

> I would require that a band with a mask must not have a nodata
> value (make them orthogonal).

If the goal is abstraction, why not move to the masking API since it is 
more scaleable? This makes it possible to also upgrade to confidence 
values, e.g., values indicating how likely a pixel is to have the 
assigned value (or error tolerance indicators). For now, use a zero mask 
value to indicate 100% void (0% confidence).

Ray

From michaelhuggins at gmail.com  Sun Aug  5 23:35:22 2007
From: michaelhuggins at gmail.com (Michael Huggins)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Watershed delineation etc...
Message-ID: <5728f38b0708052035s510a6301u5fec07582bbd064e@mail.gmail.com>

I'm somewhat new to the use of gdal.  Could anyone tell me if there are any
existing tools for watershed delineation or  finding steepest gradients in
gdal or openEV?

michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070805/a280da8a/attachment.html
From guillaume.huby.lists at gmail.com  Mon Aug  6 03:48:54 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:58 2007
Subject: [Fwd: [Gdal-dev] Nodata bitmasks / null processing]
In-Reply-To: <46B6CB2A.4060207@geosys.com>
References: <46B6CB2A.4060207@geosys.com>
Message-ID: <ddc797c30708060048u39359a9fy83dcd2af97090613@mail.gmail.com>

> -------- Message original --------
> Sujet: [Gdal-dev] Nodata bitmasks / null processing
> Date: Sat, 04 Aug 2007 13:06:04 -0400
> De: Frank Warmerdam <warmerdam@pobox.com>
> Pour :: gdal-dev <gdal-dev@lists.maptools.org>
>
> Folks,
>
> Currently GDAL supports two mechanisms for identifying nodata/transparent
> areas in a raster.  One is use of a particular pixel value as a nodata
> value (returned by the GDALRasterBand::GetNodataValue() method) and the
> other
> is by specifying an alpha band with alpha=0 marking transparent areas.
>
> However, a number of file formats support a concept of "nodata masks" -
> essentially bitmasks marking areas of the raster that are nodata
> areas.  But
> this is accomplished without having to reserve a special marker value to
> be
> the nodata value.
>


> I am looking for some feedback from the community.  In particular I'm
> interested in examples of file formats that include bit masking.


Frank,

I'm not sure being able to say you what is the best way to implement this.
But I can say that this is an interesting project. I can provide you a
sample I would like to see implemented. MODIS HDF files are all provided
with a Quality Assurance bit mask. For exemple you can take surface
reflectance files (http://edcdaac.usgs.gov/modis/myd09gqv5.asp, there is
download links in this page). These files have two datasets for surface
reflectance (http://edcdaac.usgs.gov/modis/myd09gqv5_sds.asp) and one for
Quality Assurance (http://edcdaac.usgs.gov/modis/qa/myd09gq_qa_v5.asp). I
think that your project can be very usefull in this case.

I hope this will help you !

Best regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070806/29150f31/attachment.html
From vali.system at free.fr  Mon Aug  6 07:02:37 2007
From: vali.system at free.fr (ValiSystem)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Problem with python-gdal on ia64 Unbuntu Feisty
In-Reply-To: <cc32b9a50708030835m11298953id8c34a2493e725f6@mail.gmail.com>
References: <cc32b9a50708030835m11298953id8c34a2493e725f6@mail.gmail.com>
Message-ID: <3C063995-3537-48E2-B6B6-89CB573D5078@free.fr>


On 3 ao?t 07, at 17:35, Jonah Duckles wrote:

> I am using Ubuntu fesity 64-bit and having problems with using python
> bindings.  Specifically when I try to us "ReadAsArray():
>
> raster_file = sys.argv[1]
> raster = gdal.Open(raster_file,GA_ReadOnly)
> myarray = raster.ReadAsArray()
>
> Traceback (most recent call last):
>   File "gdal-test.py", line 12, in <module>
>     myarray = inraster.ReadAsArray()
>   File "/usr/lib/python2.5/site-packages/gdal.py", line 747, in  
> ReadAsArray
>     return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize,  
> ysize )
>   File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 133, in
> DatasetReadAsArray
>     return BandReadAsArray( ds.GetRasterBand(1), xoff, yoff, xsize,  
> ysize)
>   File "/usr/lib/python2.5/site-packages/gdalnumeric.py", line 181, in
> BandReadAsArray
>     buf_xsize, buf_ysize, datatype, buf_obj )
> TypeError: Unaligned buffer
>
> I am guessing this is some sort of datatype mismatch on 64-bit  
> systems as
> this works splendidly on 32-bit debian machines, but fails on my 64- 
> bit
> machine.
>
> I am using the default python-gdal package and its dependents as  
> installed
> in Feisty 7.04
>
> Any idea what it might be?
>
> Thanks,
> Jonah

This is a known issue, Frank is aware (i've exactly the same problem  
- Feisty AMD64). If you are running an itanium (since you said ia64),  
you might give it as a precision on the trac ticket.

  http://trac.osgeo.org/gdal/ticket/1709

Cheers





From pgao at esri.com  Mon Aug  6 11:51:59 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B4B1FC.1030609@pobox.com>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC7037683D1@twistedwire.esri.com>

> 
> 1) Pseudo-Alpha
> 
> In this approach the nodata mask is treated as a sort of 
> alpha band with values of 0 and 255.  One downside to this is 
> that alpha bands are not clearly associated with a particular 
> band, so if you wanted to have distinct nodata bitmasks for 
> each band in a dataset there would be no explicit association 
> between particular alpha bands and particular original bands.
> 
> 2) Data Promotion and NODATA pixel value creation
> 
> This is the approached used now in the GDAL GRASS driver.  A 
> nodata value outside the current valid range is created 
> within the driver, and if necessary the pixel data type is 
> promoted to a larger type to make space for this "extra 
> value" value.  For instance Byte pixel type would be promoted 
> to UInt16 so we could use 256 as our nodata value.
> 
> 3) Introduce Explicit Nodata Bitmap API
> 
> Extend the GDAL API to include an option for reading a 
> validity bitmask in the RasterIO() call - or perhaps a new 
> BitmaskIO() method paralleling the RasterIO() method.
> 
> Potentially the default implementation of this method could 
> generate a bitmask based on the raster data and nodata pixel 
> values if they are present so that applications could use 
> this one method for both models.
> 
> In one sense this is the cleanest solution, but it is also by 
> far the most disruptive.  It requires new support in 
> applications that want to take advantage of it, further 
> complicates the GDAL API and worst, it may be very hard to 
> implement properly for formats without bitmasks, but with 
> complicated resampling or blocking logic.
> 
> I am looking for some feedback from the community.  In 
> particular I'm interested in examples of file formats that 
> include bit masking.
> 

ESRI GeoDatabase Raster, both ArcSDE and FileGDB, uses NoData bitmask.
It has one mask per band (vs.
one mask for all bands). ArcGIS Raster IO is based on NoData bitmask. A
Pixel Block
contains both pixel values, and NoData bitmap.

I think Option 3 is better. Also, I think bitmask access at BlockIO
level will be very useful.

One issue is not covered is the storage of the NoData bitmap for known
formats, e.g. jpeg, bmp, and etc
that do not
support mask. Is there going to be a native GDAL bitmap support, sort of
like "PAM" file 
for NoData bitmask?

Gao, Peng




From warmerdam at pobox.com  Mon Aug  6 13:39:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC7037683D1@twistedwire.esri.com>
References: <A383B271E8D0DF47B51972FCEB438DC7037683D1@twistedwire.esri.com>
Message-ID: <46B75CC3.2090309@pobox.com>

Peng Gao wrote:
> One issue is not covered is the storage of the NoData bitmap for known
> formats, e.g. jpeg, bmp, and etc
> that do not
> support mask. Is there going to be a native GDAL bitmap support, sort of
> like "PAM" file for NoData bitmask?

Gao,

That is a possibility though I hadn't actually considered it previously.
A whole bitmask won't go in the .aux.xml file though, so it does make
things substantially more involved as some sort of additional data file
would be required.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From d.favis-mortlock at qub.ac.uk  Mon Aug  6 12:52:57 2007
From: d.favis-mortlock at qub.ac.uk (Dave Favis-Mortlock)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] DOS crlf in GDAL create() ?
Message-ID: <200708061752.57566.d.favis-mortlock@qub.ac.uk>

Hi -- is it possible to force DOS crlf end-of-lines when GDAL create() writes 
ascii metadata files? 

I ask because I'm writing Idrisi output on Linux (where end-of-lines are, of 
course, lf only). Idrisi (running under WINE) expects DOS crlf end-of-lines 
in its .rdc metadata files. 

OK, I can write my .fdc files then convert 'em using unix2dos, but it would be 
nice to avoid this step. I see that OGR uses a LINEFORMAT switch for .csv 
files. Anything similar for GDAL?

Dave F-M
-- 
Dr David Favis-Mortlock
Queen's University Belfast (School of Geography, Archaeology & Palaeoecology), 
Belfast BT7 1NN, Northern Ireland, UK. Phone: +44 (0)2890 335283. Fax: +44 
(0)2890 321280. Email: d.favis-mortlock@qub.ac.uk & 
d.favis-mortlock@dial.pipex.com. Web: http://www.qub.ac.uk/geog & 
http://soilerosion.net & http://www.d.favis-mortlock.dial.pipex.com/

From Chris.Barker at noaa.gov  Mon Aug  6 13:36:04 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] Watershed delineation etc...
In-Reply-To: <5728f38b0708052035s510a6301u5fec07582bbd064e@mail.gmail.com>
References: <5728f38b0708052035s510a6301u5fec07582bbd064e@mail.gmail.com>
Message-ID: <46B75C04.5040005@noaa.gov>

Michael Huggins wrote:
> I'm somewhat new to the use of gdal.  Could anyone tell me if there are 
> any existing tools for watershed delineation or  finding steepest 
> gradients in gdal

Nope.

> or openEV?

Maybe. You might also want to take a look at SAGA:

http://www.saga-gis.uni-goettingen.de

It looks like there is some good stuff in it for that.

-CHB




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From tfagin at coordinatesolutions.com  Mon Aug  6 13:59:58 2007
From: tfagin at coordinatesolutions.com (Todd Fagin)
Date: Wed Nov 21 11:50:58 2007
Subject: [Gdal-dev] FCC to gray scale
Message-ID: <000001c7d853$9aba1500$650fa8c0@TFD620>

Does anyone know of if there is a GDAL utility (such as gdal_translate) that
will allow you to go from a multi-band false color composite to a grayscale?

 

Thanks,

 

Todd Fagin

 

Coordinate Solutions, Inc.

501 N.E. 15th St.

Oklahoma City, OK 73104

405.740.4324 (voice)

904.471.5548 (fax)

www.coordinatesolutions.com

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070806/c8ec9056/attachment.html
From ealpert at digitalglobe.com  Mon Aug  6 14:28:03 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] FCC to gray scale
In-Reply-To: <000001c7d853$9aba1500$650fa8c0@TFD620>
References: <000001c7d853$9aba1500$650fa8c0@TFD620>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233014ABAC4@COMAIL01.digitalglobe.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_bw.pl
Type: application/octet-stream
Size: 1299 bytes
Desc: test_bw.pl
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070806/37b0bc00/test_bw.obj
From ealpert at digitalglobe.com  Mon Aug  6 14:34:10 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] FCC to gray scale
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233014ABAC4@COMAIL01.digitalglobe.com>
References: <000001c7d853$9aba1500$650fa8c0@TFD620>
	<8B319E5A30FF4A48BE7EEAAF609DB233014ABAC4@COMAIL01.digitalglobe.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233014ABACA@COMAIL01.digitalglobe.com>

One more thing you may want to use the luminance formula instead of .33
to convert your imagery to grayscale. This is based on how humans
perceive color:

 

Y=0.3RED+0.59GREEN+0.11Blue

 

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Monday, August 06, 2007 12:28 PM
To: Todd Fagin; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] FCC to gray scale

 

I just went through this process. You'll need to use the GDAL api. I
used the perl bindings. Attached is my script.

 

 

Hope this helps,

 

-e

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Todd Fagin
Sent: Monday, August 06, 2007 12:00 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] FCC to gray scale

 

Does anyone know of if there is a GDAL utility (such as gdal_translate)
that will allow you to go from a multi-band false color composite to a
grayscale?

 

Thanks,

 

Todd Fagin

 

Coordinate Solutions, Inc.

501 N.E. 15th St.

Oklahoma City, OK 73104

405.740.4324 (voice)

904.471.5548 (fax)

www.coordinatesolutions.com

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070806/1b767f27/attachment.html
From warmerdam at pobox.com  Mon Aug  6 15:55:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] DOS crlf in GDAL create() ?
In-Reply-To: <200708061752.57566.d.favis-mortlock@qub.ac.uk>
References: <200708061752.57566.d.favis-mortlock@qub.ac.uk>
Message-ID: <46B77C9B.5040600@pobox.com>

Dave Favis-Mortlock wrote:
> Hi -- is it possible to force DOS crlf end-of-lines when GDAL create() writes 
> ascii metadata files? 
> 
> I ask because I'm writing Idrisi output on Linux (where end-of-lines are, of 
> course, lf only). Idrisi (running under WINE) expects DOS crlf end-of-lines 
> in its .rdc metadata files. 
> 
> OK, I can write my .fdc files then convert 'em using unix2dos, but it would be 
> nice to avoid this step. I see that OGR uses a LINEFORMAT switch for .csv 
> files. Anything similar for GDAL?

Dave,

There is no generic support for this, but it could potentially be addressed
on a driver by driver basis - or if IDRISI doesn't exist on Linux, perhaps
we should just always be writing these files with DOS text format?  I'd
encourage you to file a bug on it, and we will see what Ivan says about it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Mon Aug  6 15:20:44 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Quickly generating Google Earth files
Message-ID: <20070806192044.254880@gmx.net>

Hi,
I know there's a GSoC project dealing with a full-fledged GDAL KML driver. I take it that this will enable to quickly publish things like the datasets shown in <http://www.kcl.ac.uk/schools/sspp/geography/research/emm/geodata/>.

We have heaps of raster-based information, and it would be interesting to see if we can serve it through a kmz file, as in the examples above. While I understand the new driver will allow that sort of thing, I was wondering whether it is possible to do something similar as of today, with a current version of GDAL.

Any hints or comments?
Cheers!

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

From rayg at daylongraphics.com  Mon Aug  6 16:34:05 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B75CC3.2090309@pobox.com>
References: <A383B271E8D0DF47B51972FCEB438DC7037683D1@twistedwire.esri.com>
	<46B75CC3.2090309@pobox.com>
Message-ID: <46B785BD.10505@daylongraphics.com>

Frank Warmerdam wrote:
> That is a possibility though I hadn't actually considered it previously.
> A whole bitmask won't go in the .aux.xml file though, so it does make
> things substantially more involved as some sort of additional data file
> would be required.

Would you make an exception for highly compressible nodata masks? A 
common situation is that a slightly rotated sampling leaves thin 
triangular perimeter nodata areas of which a compressed textual 
description is under a kilobyte. E.g., have a flag saying if the mask is 
in the xml file or outside.

Ray

From cavicchi at ferrara.linux.it  Mon Aug  6 17:31:18 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] RGB and Band...
Message-ID: <20070806213118.GA1950@ferrara.linux.it>

Hi list,  
I have a little problem with imagery.tif in the dimap archive.
I must to split multi-layer tiff (imagery.tif) into four files, 
but the sequence of bands it's not same that i see with ENVI. 
The sequence is this:

  GDAL(band)	ENVI(band)
- 0		2
- 1		1
- 2		0
- 3		3

So, the RGB sequence is upside down, but why?

I hope that you understand my problem because i know that my english is
horrible.

Tnx for all.

-- 
Ciao,
        Mario
        
[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From warmerdam at pobox.com  Mon Aug  6 21:52:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] RGB and Band...
In-Reply-To: <20070806213118.GA1950@ferrara.linux.it>
References: <20070806213118.GA1950@ferrara.linux.it>
Message-ID: <46B7D064.4090708@pobox.com>

Mario Cavicchi wrote:
> Hi list,  
> I have a little problem with imagery.tif in the dimap archive.
> I must to split multi-layer tiff (imagery.tif) into four files, 
> but the sequence of bands it's not same that i see with ENVI. 
> The sequence is this:
> 
>   GDAL(band)	ENVI(band)
> - 0		2
> - 1		1
> - 2		0
> - 3		3
> 
> So, the RGB sequence is upside down, but why?
> 
> I hope that you understand my problem because i know that my english is
> horrible.

Mario,

I have reviewed a four band DIMAP sample data product, and GDAL maps
the band order the same as they appear in the TIFF file, and this seems
to be supported by my reading of the DIMAP metadata file.

I'm not sure why ENVI is remapping the band order.  Perhaps it is offering
them in what it hopes is more like a true color arrangement?  Do you have
some reason other than the behavior of ENVI that you think the band order
should be different?

It might be helpful if you could make the dataset, or even just the
METADATA.DIM file, available.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Aug  6 22:22:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B785BD.10505@daylongraphics.com>
References: <A383B271E8D0DF47B51972FCEB438DC7037683D1@twistedwire.esri.com>
	<46B75CC3.2090309@pobox.com> <46B785BD.10505@daylongraphics.com>
Message-ID: <46B7D74A.4000204@pobox.com>

Ray Gardener wrote:
> Frank Warmerdam wrote:
>> That is a possibility though I hadn't actually considered it previously.
>> A whole bitmask won't go in the .aux.xml file though, so it does make
>> things substantially more involved as some sort of additional data file
>> would be required.
> 
> Would you make an exception for highly compressible nodata masks? A 
> common situation is that a slightly rotated sampling leaves thin 
> triangular perimeter nodata areas of which a compressed textual 
> description is under a kilobyte. E.g., have a flag saying if the mask is 
> in the xml file or outside.

Ray,

To be honest, later today I was thinking the same thing.  Bitmasks
are almost always very highly compressable, so Deflate compressing them
and 6bit ascii encoding them would likely produce data that could be
embedded into an XML file though it still might not scale so well for
multi-gigapixel images.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Mon Aug  6 21:42:34 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B4B1FC.1030609@pobox.com>
References: <46B4B1FC.1030609@pobox.com>
Message-ID: <DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>

Frank,

I prefer Option 4, which is to treat bitmasks as just another  
RasterBand for each "data" RasterBand.  Something like

bitmask = GetBand(1).GetBitmask()

Why I like this approach:
  - Familiarity to mentally challenged raster coders like myself.  I  
know how to work with a RasterBand.  I can make the mental leap to  
the bitmasks being a RasterBand with just on/off booleans.
- Support for other language bindings with this approach is simple.
- It would limit API additions.
- Would it lessen some of the downsides of Option 3 (BitmaskIO)?

I'll let others chime in on the downsides...

Howard

On Aug 4, 2007, at 12:06 PM, Frank Warmerdam wrote:

> Folks,
>
> Currently GDAL supports two mechanisms for identifying nodata/ 
> transparent
> areas in a raster.  One is use of a particular pixel value as a nodata
> value (returned by the GDALRasterBand::GetNodataValue() method) and  
> the other
> is by specifying an alpha band with alpha=0 marking transparent areas.
>
> However, a number of file formats support a concept of "nodata  
> masks" -
> essentially bitmasks marking areas of the raster that are nodata  
> areas.  But
> this is accomplished without having to reserve a special marker  
> value to be
> the nodata value.
>
> This is the case with GRASS for instance, and the GDAL GRASS driver  
> actually
> jumps through hoops to promote byte data to int16 and overlay a  
> nodata value.
> However, this is cumbersome and violates the underlying data model  
> of the
> format.
>
> This issue also arises with other formats, including a new JPEG  
> variation
> with a nodata bitmask appended to the file.  I also feel that  
> nodata masks
> can offer a better
>
> A client has requested support for nodata bitmasking be  
> incorporated into
> GDAL in some appropriate fashion.  I can see a few approaches:
>
> 1) Pseudo-Alpha
>
> In this approach the nodata mask is treated as a sort of alpha band  
> with
> values of 0 and 255.  One downside to this is that alpha bands are not
> clearly associated with a particular band, so if you wanted to have
> distinct nodata bitmasks for each band in a dataset there would be
> no explicit association between particular alpha bands and particular
> original bands.
>
> 2) Data Promotion and NODATA pixel value creation
>
> This is the approached used now in the GDAL GRASS driver.  A nodata  
> value
> outside the current valid range is created within the driver, and if
> necessary the pixel data type is promoted to a larger type to make  
> space
> for this "extra value" value.  For instance Byte pixel type would be
> promoted to UInt16 so we could use 256 as our nodata value.
>
> 3) Introduce Explicit Nodata Bitmap API
>
> Extend the GDAL API to include an option for reading a validity  
> bitmask
> in the RasterIO() call - or perhaps a new BitmaskIO() method  
> paralleling
> the RasterIO() method.
>
> Potentially the default implementation of this method could generate a
> bitmask based on the raster data and nodata pixel values if they are
> present so that applications could use this one method for both  
> models.
>
> In one sense this is the cleanest solution, but it is also by far the
> most disruptive.  It requires new support in applications that want
> to take advantage of it, further complicates the GDAL API and  
> worst, it
> may be very hard to implement properly for formats without  
> bitmasks, but
> with complicated resampling or blocking logic.
>
> I am looking for some feedback from the community.  In particular I'm
> interested in examples of file formats that include bit masking.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From Laurent.Saez at equipement.gouv.fr  Tue Aug  7 02:56:44 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Clip shapefile into a polygon
Message-ID: <5F827424D35BD311BBA300902798C054053728DA@ct13-mel.cete-mediterranee.i2>

Hi,

First, I would like to apologise for my English... I hope someone will understand me.
I have many shapefiles representing contours of French departements.
I want to clip each of them using a polygon from another shapefile (the departemental borders).
I've tried to do that with ESRI products. Sometimes it's OK, but sometimes not.
Is there an utility program that allows to clip a shapefile with another one ?

Regards

From jukka.rahkonen at mmmtike.fi  Tue Aug  7 04:30:52 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Binaries for BigTIFF
Message-ID: <loom.20070807T102904-934@post.gmane.org>

Hi,

Are there ready mady Windows binaries supporting BigTIFF available yet? 

-Jukka Rahkonen-


From wollez at gmx.net  Tue Aug  7 07:31:40 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] error 1: JPEGSetupEncode:RowsPerStrip must be multiple
	of 8 for JPEG
Message-ID: <f99l6b$245$1@sea.gmane.org>

Hello,

I'm trying to convert some TIFFS so that the compression is JPEG.
The source image was a tiff with a color palette. I used pct2rgb to 
convert it first.

D:\todonew>gdal_translate -of GTIFF -co "COMPRESS=JPEG" E48-104.tif 
E48-104j.tif
Input file size is 8000, 5778
0ERROR 1: JPEGSetupEncode:RowsPerStrip must be multiple of 8 for JPEG
ERROR 1: TIFFWriteScanline failed.

I'm using the FWTools 1.3.5 on WinXP.

Thanks for any help
Wolfgang

PS: gdalinfo on the input file gives:
D:\todonew>gdalinfo E48-104.tif
Driver: GTiff/GeoTIFF
Files: E48-104.tif
Size is 8000, 5778
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235630016,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (105.450000000000000,17.383333333333301)
Pixel Size = (0.000075000000000,-0.000075000000000)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( 105.4500000,  17.3833333) (105d27'0.00"E, 17d23'0.00"N)
Lower Left  ( 105.4500000,  16.9499833) (105d27'0.00"E, 16d56'59.94"N)
Upper Right ( 106.0500000,  17.3833333) (106d 3'0.00"E, 17d23'0.00"N)
Lower Right ( 106.0500000,  16.9499833) (106d 3'0.00"E, 16d56'59.94"N)
Center      ( 105.7500000,  17.1666583) (105d45'0.00"E, 17d 9'59.97"N)
Band 1 Block=8000x1 Type=Byte, ColorInterp=Red
Band 2 Block=8000x1 Type=Byte, ColorInterp=Green
Band 3 Block=8000x1 Type=Byte, ColorInterp=Blue


From warmerdam at pobox.com  Tue Aug  7 09:45:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] error 1: JPEGSetupEncode:RowsPerStrip must be multiple
	of 8 for JPEG
In-Reply-To: <f99l6b$245$1@sea.gmane.org>
References: <f99l6b$245$1@sea.gmane.org>
Message-ID: <46B8775E.3020409@pobox.com>

WolfgangZ wrote:
> Hello,
> 
> I'm trying to convert some TIFFS so that the compression is JPEG.
> The source image was a tiff with a color palette. I used pct2rgb to 
> convert it first.
> 
> D:\todonew>gdal_translate -of GTIFF -co "COMPRESS=JPEG" E48-104.tif 
> E48-104j.tif
> Input file size is 8000, 5778
> 0ERROR 1: JPEGSetupEncode:RowsPerStrip must be multiple of 8 for JPEG
> ERROR 1: TIFFWriteScanline failed.
> 
> I'm using the FWTools 1.3.5 on WinXP.
> 
> Thanks for any help
> Wolfgang
>
Wolfgang,

I think the quick workaround is to set the rows per strip explicitly:

   gdal_translate -of GTIFF -co "COMPRESS=JPEG" -co BLOCKYSIZE=8 \
            E48-104.tif E48-104j.tif

But the driver should really be picking an appropriate default
strip size. So I'd appreciate your filing a detailed bug report in
Trac on the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From lijian.shi at und.nodak.edu  Tue Aug  7 10:05:10 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] add colortable into UInt16 png file
Message-ID: <0JME002H7PSN8I40@mailmx1.und.nodak.edu>

Hi, all

 

I have added a colortable into Byte png file. Can I add a colortable into
UInt16 png file with an intermediate MEM format dataset? There is an error
reported as:

 

libpng error invalid color type/bit depth combination in IHDR.

 

Thanks in advance,

 

Lijian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070807/eae68411/attachment.html
From warmerdam at pobox.com  Tue Aug  7 10:14:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Binaries for BigTIFF
In-Reply-To: <loom.20070807T102904-934@post.gmane.org>
References: <loom.20070807T102904-934@post.gmane.org>
Message-ID: <46B87E47.4090204@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> Are there ready mady Windows binaries supporting BigTIFF available yet? 

Jukka,

As far as I can tell, there are still issues with the GDAL pyramid building
support and the bigtiff enabled libtiff4 which need to be worked out.  So
I haven't prepared any bigtiff enabled binaries yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Aug  7 10:20:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Clip shapefile into a polygon
In-Reply-To: <5F827424D35BD311BBA300902798C054053728DA@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C054053728DA@ct13-mel.cete-mediterranee.i2>
Message-ID: <46B87F96.1090007@pobox.com>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> First, I would like to apologise for my English... I hope someone will understand me.
> I have many shapefiles representing contours of French departements.
> I want to clip each of them using a polygon from another shapefile (the departemental borders).
> I've tried to do that with ESRI products. Sometimes it's OK, but sometimes not.
> Is there an utility program that allows to clip a shapefile with another one ?

Laurent,

There is no gdal/ogr utility that will clip polygons based on other ones.
But it is possible to write a script or program to do so using the OGRGeometry
Intersection() method.

http://www.gdal.org/ogr/classOGRGeometry.html#202ad4c29487ca046c4a2b055042cb6a

But, of course, this is a somewhat involved process.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jukka.rahkonen at mmmtike.fi  Tue Aug  7 10:30:51 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Binaries for BigTIFF
References: <loom.20070807T102904-934@post.gmane.org>
	<46B87E47.4090204@pobox.com>
Message-ID: <loom.20070807T162614-582@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Jukka Rahkonen wrote:
> > Hi,
> > 
> > Are there ready mady Windows binaries supporting BigTIFF available yet? 
> 
> Jukka,
> 
> As far as I can tell, there are still issues with the GDAL pyramid building
> support and the bigtiff enabled libtiff4 which need to be worked out.  So
> I haven't prepared any bigtiff enabled binaries yet.

So I keep awaiting for those with my 20 GB sized 8-channel test image.  Thank
you for the information.

-Jukka-


From philippe.suray at market-ip.com  Tue Aug  7 10:35:42 2007
From: philippe.suray at market-ip.com (Suray Ph)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] gdal_merge.py in c#
Message-ID: <loom.20070807T162730-519@post.gmane.org>

Hello,

I try to convert some commandline utilities, written in python, in c#.

I need help for gdal_merge.py. I found in this file a 'function' called
'raster_copy_with_nodata', could some one explain me how to convert this one,
especialy band.ReadAsArray(...), Numeric.equal(...), Numeric.choose(...),
band.WriteArray(...).

I searched for documentation about python, but didn't find the right one.

The final goal is to be able to merge different reprojected GTiff files, with
black area, into one without black area.

Thank you for your help.

Best regards.

Philippe.


From warmerdam at pobox.com  Tue Aug  7 10:37:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] add colortable into UInt16 png file
In-Reply-To: <0JME002H7PSN8I40@mailmx1.und.nodak.edu>
References: <0JME002H7PSN8I40@mailmx1.und.nodak.edu>
Message-ID: <46B8838D.6070808@pobox.com>

Lijian Shi wrote:
> Hi, all
> 
>  
> 
> I have added a colortable into Byte png file. Can I add a colortable 
> into UInt16 png file with an intermediate MEM format dataset? There is 
> an error reported as:
> 
>  
> 
> libpng error invalid color type/bit depth combination in IHDR.

Lijian,

 From the message it seems that libpng does not permit color tables with
16bit files.  But if the png driver supported this, a MEM intermediate
dataset would be an appropriate way to associate the color table with the
data.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Aug  7 11:20:07 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
Message-ID: <46B88DA7.8030108@perkins.net>

So, would the default implementation return a universal RasterBand 
derived class that implements IReadBlock() and IWriteBlock() in terms of 
the underlying format RasterIO() method in conjunction with NODATA values?

There's a certain elegance to not duplicating a bunch of code that's 
already in RasterBand. I guess the only drawback I can see would be if 
RasterBand includes methods that don't really make any sense for 
bitmasks. However, looking down the list of methods, I can't see 
anything that's obviously out of place.

One thing though - if the GetBitmask() method is a RasterBand method, 
then presumably invoking that method on a RasterBand returned by 
GetBitmask() wouldn't make sense. Either this could just raise some kind 
of error. Or we could make GetBitmask() a method of the Dataset instead.

Sy


Howard Butler wrote:
> Frank,
>
> I prefer Option 4, which is to treat bitmasks as just another 
> RasterBand for each "data" RasterBand.  Something like
>
> bitmask = GetBand(1).GetBitmask()
>
> Why I like this approach:
>  - Familiarity to mentally challenged raster coders like myself.  I 
> know how to work with a RasterBand.  I can make the mental leap to the 
> bitmasks being a RasterBand with just on/off booleans.
> - Support for other language bindings with this approach is simple.
> - It would limit API additions.
> - Would it lessen some of the downsides of Option 3 (BitmaskIO)?
>
> I'll let others chime in on the downsides...
>
> Howard
>
> On Aug 4, 2007, at 12:06 PM, Frank Warmerdam wrote:
>
>> Folks,
>>
>> Currently GDAL supports two mechanisms for identifying 
>> nodata/transparent
>> areas in a raster.  One is use of a particular pixel value as a nodata
>> value (returned by the GDALRasterBand::GetNodataValue() method) and 
>> the other
>> is by specifying an alpha band with alpha=0 marking transparent areas.
>>
>> However, a number of file formats support a concept of "nodata masks" -
>> essentially bitmasks marking areas of the raster that are nodata 
>> areas.  But
>> this is accomplished without having to reserve a special marker value 
>> to be
>> the nodata value.
>>
>> This is the case with GRASS for instance, and the GDAL GRASS driver 
>> actually
>> jumps through hoops to promote byte data to int16 and overlay a 
>> nodata value.
>> However, this is cumbersome and violates the underlying data model of 
>> the
>> format.
>>
>> This issue also arises with other formats, including a new JPEG 
>> variation
>> with a nodata bitmask appended to the file.  I also feel that nodata 
>> masks
>> can offer a better
>>
>> A client has requested support for nodata bitmasking be incorporated 
>> into
>> GDAL in some appropriate fashion.  I can see a few approaches:
>>
>> 1) Pseudo-Alpha
>>
>> In this approach the nodata mask is treated as a sort of alpha band with
>> values of 0 and 255.  One downside to this is that alpha bands are not
>> clearly associated with a particular band, so if you wanted to have
>> distinct nodata bitmasks for each band in a dataset there would be
>> no explicit association between particular alpha bands and particular
>> original bands.
>>
>> 2) Data Promotion and NODATA pixel value creation
>>
>> This is the approached used now in the GDAL GRASS driver.  A nodata 
>> value
>> outside the current valid range is created within the driver, and if
>> necessary the pixel data type is promoted to a larger type to make space
>> for this "extra value" value.  For instance Byte pixel type would be
>> promoted to UInt16 so we could use 256 as our nodata value.
>>
>> 3) Introduce Explicit Nodata Bitmap API
>>
>> Extend the GDAL API to include an option for reading a validity bitmask
>> in the RasterIO() call - or perhaps a new BitmaskIO() method paralleling
>> the RasterIO() method.
>>
>> Potentially the default implementation of this method could generate a
>> bitmask based on the raster data and nodata pixel values if they are
>> present so that applications could use this one method for both models.
>>
>> In one sense this is the cleanest solution, but it is also by far the
>> most disruptive.  It requires new support in applications that want
>> to take advantage of it, further complicates the GDAL API and worst, it
>> may be very hard to implement properly for formats without bitmasks, but
>> with complicated resampling or blocking logic.
>>
>> I am looking for some feedback from the community.  In particular I'm
>> interested in examples of file formats that include bit masking.
>>
>> Best regards,
>> -----------------------------------------+-------------------------------------- 
>>
>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, 
>> http://osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Aug  7 11:33:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] gdal_merge.py in c#
In-Reply-To: <loom.20070807T162730-519@post.gmane.org>
References: <loom.20070807T162730-519@post.gmane.org>
Message-ID: <46B890CF.5080401@pobox.com>

Suray Ph wrote:
> Hello,
> 
> I try to convert some commandline utilities, written in python, in c#.
> 
> I need help for gdal_merge.py. I found in this file a 'function' called
> 'raster_copy_with_nodata', could some one explain me how to convert this one,
> especialy band.ReadAsArray(...), Numeric.equal(...), Numeric.choose(...),
> band.WriteArray(...).
> 
> I searched for documentation about python, but didn't find the right one.
> 
> The final goal is to be able to merge different reprojected GTiff files, with
> black area, into one without black area.

Philippe,

These are Numeric Python methods and as such there is unlikely to be a
direct C# analog.  But if you can read back the image as an array in
C# you can just loop over the array, doing comparisons to the nodata
value, and overlaying where appropriate.

Basically, this script code:

     data_src = s_band.ReadAsArray( s_xoff, s_yoff, s_xsize, s_ysize,
                                    t_xsize, t_ysize )
     data_dst = t_band.ReadAsArray( t_xoff, t_yoff, t_xsize, t_ysize )

     nodata_test = Numeric.equal(data_src,nodata)
     to_write = Numeric.choose( nodata_test, (data_src, data_dst) )

     t_band.WriteArray( to_write, t_xoff, t_yoff )

means:

1) read the source and destination image data.

2) Where source image pixel is *not* equal to the nodata value, copy
    it into the destination image.

3) write the destination image back.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Aug  7 11:54:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B88DA7.8030108@perkins.net>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net>
Message-ID: <46B895AC.2080909@pobox.com>

Simon Perkins wrote:
> So, would the default implementation return a universal RasterBand 
> derived class that implements IReadBlock() and IWriteBlock() in terms of 
> the underlying format RasterIO() method in conjunction with NODATA values?

Simon,

I think this is quite plausible, with the default implementation of
GetBitmask() returning NULL if there is no nodata value set.

> One thing though - if the GetBitmask() method is a RasterBand method, 
> then presumably invoking that method on a RasterBand returned by 
> GetBitmask() wouldn't make sense. Either this could just raise some kind 
> of error. Or we could make GetBitmask() a method of the Dataset instead.

It is up to the drivers creating custom classes for their GetBitmask()
result to ensure those don't in turn return bitmasks, and don't have
a nodata value set on them.

I think GetBitmask() being a method on GDALRasterBand, instead of
the dataset is important as it clearly establishes the association.

I am wondering, a bit how we would represent the case where there is
one nodata bitmask for a whole dataset.  That it, one mask applying
to all bands.  Perhaps all bands just return the same object?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Aug  7 14:01:22 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B895AC.2080909@pobox.com>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net> <46B895AC.2080909@pobox.com>
Message-ID: <46B8B372.5000308@perkins.net>

Frank Warmerdam wrote:
> Simon Perkins wrote:
>> So, would the default implementation return a universal RasterBand 
>> derived class that implements IReadBlock() and IWriteBlock() in terms 
>> of the underlying format RasterIO() method in conjunction with NODATA 
>> values?
>
> Simon,
>
> I think this is quite plausible, with the default implementation of
> GetBitmask() returning NULL if there is no nodata value set.

That's reasonable. It could also just return a bitmask containing all 
ones so that code doesn't have to handle this special case. Then we 
could have a separate method "HasBitmask()" (or the BitmaskType() method 
mentioned below) so that code that wants to optimize this case out can 
do so. Don't have a strong feeling.


>> One thing though - if the GetBitmask() method is a RasterBand method, 
>> then presumably invoking that method on a RasterBand returned by 
>> GetBitmask() wouldn't make sense. Either this could just raise some 
>> kind of error. Or we could make GetBitmask() a method of the Dataset 
>> instead.
>
> It is up to the drivers creating custom classes for their GetBitmask()
> result to ensure those don't in turn return bitmasks, and don't have
> a nodata value set on them.
>
> I think GetBitmask() being a method on GDALRasterBand, instead of
> the dataset is important as it clearly establishes the association.

That's reasonable.


> I am wondering, a bit how we would represent the case where there is
> one nodata bitmask for a whole dataset.  That it, one mask applying
> to all bands.  Perhaps all bands just return the same object?

Since users might be deleting the Bitmask RasterBand when they're done 
with it, it probably shouldn't be _exactly_ the same object, but it 
could be a copy of a stub that shares a lot of the underlying state / 
cache, etc. Might be worth adding a method  "BitmaskType()" method 
returning NONE, ONE_PER_DATASET, or ONE_PER_BAND , or similar. This 
would also subsume the "HasBitmask()" method.

Cheers,

Simon


From hobu.inc at gmail.com  Tue Aug  7 14:58:41 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B8B372.5000308@perkins.net>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net> <46B895AC.2080909@pobox.com>
	<46B8B372.5000308@perkins.net>
Message-ID: <1AE58499-F326-4C8F-BBA2-50DF4BF44466@gmail.com>


On Aug 7, 2007, at 1:01 PM, Simon Perkins wrote:

> Frank Warmerdam wrote:
>> Simon Perkins wrote:
>>> One thing though - if the GetBitmask() method is a RasterBand  
>>> method, then presumably invoking that method on a RasterBand  
>>> returned by GetBitmask() wouldn't make sense. Either this could  
>>> just raise some kind of error. Or we could make GetBitmask() a  
>>> method of the Dataset instead.
>>
>> It is up to the drivers creating custom classes for their  
>> GetBitmask()
>> result to ensure those don't in turn return bitmasks, and don't have
>> a nodata value set on them.
>>
>> I think GetBitmask() being a method on GDALRasterBand, instead of
>> the dataset is important as it clearly establishes the association.
>
> That's reasonable.

Conceivably, there could be some driver that has/needs multi- 
dimensional bitmasks, ie, GetBand(1).GetBimask().GetBitmask().  I  
have no idea what they would be used for, but are the consequences  
that dire if we support things that way?  I'm worried that we'll  
otherwise end up with a GDALBitmaskBand that still has to be treated  
specially.  Maybe this is unavoidable though.

>
>
>> I am wondering, a bit how we would represent the case where there is
>> one nodata bitmask for a whole dataset.  That it, one mask applying
>> to all bands.  Perhaps all bands just return the same object?
>
> Since users might be deleting the Bitmask RasterBand when they're  
> done with it, it probably shouldn't be _exactly_ the same object,  
> but it could be a copy of a stub that shares a lot of the  
> underlying state / cache, etc. Might be worth adding a method   
> "BitmaskType()" method returning NONE, ONE_PER_DATASET, or  
> ONE_PER_BAND , or similar. This would also subsume the "HasBitmask 
> ()" method.
>

What would a generic GDALDataset return by default, ONE_PER_BAND?   
N_PER_BAND?  I'm of the opinion that we have drivers virtualize in  
some way the case were we have ONE_PER_DATASET to be ONE_PER_BAND (or  
N_PER_BAND if were to go down that crazy route).  This is attractive  
to me because client code doesn't have to care.  Bitmasks are not  
going to be highly performant regardless, and I'd like them to be at  
least simple to deal with.

I'd like to achieve parallelism with Overviews for Bitmasks.  Maybe  
this is an unreachable ideal, but I think it is attractive.

Howard

From warmerdam at pobox.com  Tue Aug  7 15:11:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B8B372.5000308@perkins.net>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net> <46B895AC.2080909@pobox.com>
	<46B8B372.5000308@perkins.net>
Message-ID: <46B8C3C6.30200@pobox.com>

Simon Perkins wrote:
>> I am wondering, a bit how we would represent the case where there is
>> one nodata bitmask for a whole dataset.  That it, one mask applying
>> to all bands.  Perhaps all bands just return the same object?
> 
> Since users might be deleting the Bitmask RasterBand when they're done 
> with it, it probably shouldn't be _exactly_ the same object, but it 
> could be a copy of a stub that shares a lot of the underlying state / 
> cache, etc. Might be worth adding a method  "BitmaskType()" method 
> returning NONE, ONE_PER_DATASET, or ONE_PER_BAND , or similar. This 
> would also subsume the "HasBitmask()" method.

Simon,

Just as a datasource "owns" it's bands, and a band "owns" it's overviews,
I believe the band should "own" it's bitmask band object.  So the
application should never try to delete the bitmask band object.

Nevertheless, the BitmaskType() might still be worthwhile.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Aug  7 15:33:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Motion: Committer Status for Bas Retsios
Message-ID: <46B8C8EE.7070209@pobox.com>

Folks,

I motion to extend committer status to Bas Retsios of ITC for the GDAL/OGR
project.

---

Bas has read and agreed to the RFC 3 guidelines and has already contributed
the MSG driver for GDAL as well as doing some work on the ILWIS driver.  Bas
is currently working on the GRIB driver.

I'll start with +1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Aug  7 15:47:17 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B8C3C6.30200@pobox.com>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net> <46B895AC.2080909@pobox.com>
	<46B8B372.5000308@perkins.net> <46B8C3C6.30200@pobox.com>
Message-ID: <46B8CC45.6070301@perkins.net>

Frank Warmerdam wrote:
> Simon Perkins wrote:
>>> I am wondering, a bit how we would represent the case where there is
>>> one nodata bitmask for a whole dataset.  That it, one mask applying
>>> to all bands.  Perhaps all bands just return the same object?
>>
>> Since users might be deleting the Bitmask RasterBand when they're 
>> done with it, it probably shouldn't be _exactly_ the same object, but 
>> it could be a copy of a stub that shares a lot of the underlying 
>> state / cache, etc. Might be worth adding a method  "BitmaskType()" 
>> method returning NONE, ONE_PER_DATASET, or ONE_PER_BAND , or similar. 
>> This would also subsume the "HasBitmask()" method.
>
> Simon,
>
> Just as a datasource "owns" it's bands, and a band "owns" it's overviews,
> I believe the band should "own" it's bitmask band object.  So the
> application should never try to delete the bitmask band object.

Ah yes -  forgot that one doesn't delete GDALRasterBand objects 
explicitly, only the GDALDataset...

Oops,

Simon



From rayg at daylongraphics.com  Tue Aug  7 15:59:30 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <46B88DA7.8030108@perkins.net>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net>
Message-ID: <46B8CF22.6030005@daylongraphics.com>

fwiw I lean towards not deriving a nodata mask from RasterBand, because 
RasterBand contains things that don't apply, and as others have noted 
lead to odd situations.

Rather, have this hierarchy:

         raster_tile
         /          \
   RasterBand       NoDataMask



i.e., make a general-purpose 2D raster bitmap class which is then the 
base of specialized bitmaps.

Ray

From ASP at blominfo.dk  Wed Aug  8 07:47:54 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] VRTKernelFilteredSource and nodata
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A477974@posthus.blominfo.dk>

Hi all,

Guess my previous post about the subject was too messy to make sense, so I have sharpened up ?

Is there any reason why the VRTKernelFilteredSource doesn?t respect nodata values? I have found it very easy to implement (even with my c++ skills), and that makes me wonder why it wasn?t done when the driver was written.

I will of course share the code I have written if it has any interest.

Best regards
Asger


From Laurent.Saez at equipement.gouv.fr  Wed Aug  8 08:05:25 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Clip shapefile into a polygon
Message-ID: <5F827424D35BD311BBA300902798C054053728DF@ct13-mel.cete-mediterranee.i2>

Frank,

Thanks for your quick answer.
I'm not a programmer...
I've wrote anyway a script in Python using Geometry.Intersection method. That was my first script in Python.
I've taken your script vec_tr.py as sample.
Miracle, my first script works good !
However, I've noted some strange things :
- Feature.SetFrom doesn't copy field values,
- Geometry.Intersection can return empty geometries : In my case, it creates plines with 0 nodes. The generated shapefile can't be open with MapInfo? 7.8.
I try to convert it with ogr2ogr in MIF/MID format. MapInfo? can't open it as well.

Thanks a lot for all. I hope that in a few months I will be able to help somebody.

Best regards.

Here is my script : test_clip.py
"
import osr
import ogr
import string
import sys
import os

#############################################################################
def Usage():
    print 'Usage: test_clip.py infile outfile clipfile'
    print
    sys.exit(1)

#############################################################################
# Argument processing.

infile = None
outfile = None
clipfile = None

i = 1
while i < len(sys.argv):
    arg = sys.argv[i]

    if infile is None:
        infile = arg

    elif outfile is None:
        outfile = arg

    elif clipfile is None:
        clipfile = arg

    else:
        Usage()

    i = i + 1

if outfile is None:
    Usage()
if clipfile is None:
    Usage()

#############################################################################
# Open the datasource to operate on.

in_ds = ogr.Open( infile, update = 0 )

in_layer = in_ds.GetLayer( 0 )

in_defn = in_layer.GetLayerDefn()

clip_ds = ogr.Open( clipfile, update = 0 )

clip_layer = clip_ds.GetLayer( 0 )
#############################################################################
#    Create output file with similar information.

shp_driver = ogr.GetDriverByName( 'ESRI Shapefile' )
if os.path.isfile(outfile) is True:
    shp_driver.DeleteDataSource( outfile )

shp_ds = shp_driver.CreateDataSource( outfile )

shp_layer = shp_ds.CreateLayer( in_defn.GetName(),
                                geom_type = in_defn.GetGeomType(),
                                srs = in_layer.GetSpatialRef() )

in_field_count = in_defn.GetFieldCount()

for fld_index in range(in_field_count):
    src_fd = in_defn.GetFieldDefn( fld_index )
    
    fd = ogr.FieldDefn( src_fd.GetName(), src_fd.GetType() )
    fd.SetWidth( src_fd.GetWidth() )
    fd.SetPrecision( src_fd.GetPrecision() )
    shp_layer.CreateField( fd )

#############################################################################
# Process all features in input layer.
# I suppose my clipfile contains only one feature !! (departemental borders)
clip_feat = clip_layer.GetNextFeature()
clip_geom = clip_feat.GetGeometryRef().Clone()
    
in_feat = in_layer.GetNextFeature()
while in_feat is not None:

    geom = in_feat.GetGeometryRef().Clone()

    geom = in_feat.GetGeometryRef().Clone().Intersection(clip_geom)
# I want to know if the geometry is empty. So, I count points;
# If the geometry is a multiline, GetPointCount return 0.
# So, I count objects.
# I know this is not rigorous
    if (geom.GetGeometryCount() + geom.GetPointCount())!=0:
        out_feat = ogr.Feature( feature_def = shp_layer.GetLayerDefn() )
        out_feat.SetFrom( in_feat )
        out_feat.SetGeometryDirectly( geom )
#=====================================================
# I copy attribute values...
        for fld_index2 in range(out_feat.GetFieldCount()):
            src_field = in_feat.GetField(fld_index2)
            out_feat.SetField(fld_index2, src_field)
#=====================================================    
        shp_layer.CreateFeature( out_feat )
        out_feat.Destroy()

    in_feat.Destroy()
    in_feat = in_layer.GetNextFeature()

#############################################################################
# Cleanup

clip_feat.Destroy()
clip_ds.Destroy()
shp_ds.Destroy()
in_ds.Destroy()

"


From dron at ak4719.spb.edu  Wed Aug  8 08:50:02 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Motion: Committer Status for Bas Retsios
In-Reply-To: <46B8C8EE.7070209@pobox.com>
References: <46B8C8EE.7070209@pobox.com>
Message-ID: <20070808125002.GA30475@ak4719.spb.edu>

On Tue, Aug 07, 2007 at 03:33:02PM -0400, Frank Warmerdam wrote:
> I motion to extend committer status to Bas Retsios of ITC for the
> GDAL/OGR project.

+1

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From condit at sdsc.edu  Wed Aug  8 09:45:38 2007
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Quickly generating Google Earth files
In-Reply-To: <20070806192044.254880@gmx.net>
References: <20070806192044.254880@gmx.net>
Message-ID: <845AADAC1106E44996327D62097E4C6BDE6A3E@et.ad.sdsc.edu>

Hi Jose-
There isn't anything that I know of to accomplish this presently, but you could probably cook something up fairly easily to parse a world file and generate a simple KML file pointing to the raster. Just remember that Google Earth wants EPSG:4326 so if your raster is in some other projection you'll have to warp the coordinates accordingly...

-Chris

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jose Luis Gomez Dans
Sent: Monday, August 06, 2007 12:21
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Quickly generating Google Earth files

Hi,
I know there's a GSoC project dealing with a full-fledged GDAL KML driver. I take it that this will enable to quickly publish things like the datasets shown in <http://www.kcl.ac.uk/schools/sspp/geography/research/emm/geodata/>.

We have heaps of raster-based information, and it would be interesting to see if we can serve it through a kmz file, as in the examples above. While I understand the new driver will allow that sort of thing, I was wondering whether it is possible to do something similar as of today, with a current version of GDAL.

Any hints or comments?
Cheers!

-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Aug  8 09:54:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] VRTKernelFilteredSource and nodata
In-Reply-To: <25BE68A4D83DD4438F701DF0311F3F4A477974@posthus.blominfo.dk>
References: <25BE68A4D83DD4438F701DF0311F3F4A477974@posthus.blominfo.dk>
Message-ID: <46B9CB22.7000504@pobox.com>

Asger Sigurd Petersen wrote:
> Hi all,
> 
> Guess my previous post about the subject was too messy to make sense, so I
> have sharpened up ?
> 
> Is there any reason why the VRTKernelFilteredSource doesn?t respect nodata
> values? I have found it very easy to implement (even with my c++ skills),
> and that makes me wonder why it wasn?t done when the driver was written.
> 
> I will of course share the code I have written if it has any interest.

Asger,

The earlier email was quite sensible, but I felt that responding required
a careful review of the existing code which would take a while.  When I
didn't get to it immediately I soon lost track of the issue.

The original client who funded the VRTKernelFilteredSource work didn't care
about nodata values, so I didn't address it at the time.  But I agree it is
desirable that it should be supported.  If you prepare patches, please file
the changes as a ticket in Trac.  If you don't, it would still be helpful
for you to file the issue in Trac with details from your earlier email.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Aug  8 10:43:13 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Motion: Committer Status for Bas Retsios
In-Reply-To: <46B8C8EE.7070209@pobox.com>
References: <46B8C8EE.7070209@pobox.com>
Message-ID: <f3b73b7d0708080743l3ddfdd44n4946d4f1562f143b@mail.gmail.com>

+1

Best regards,

Tamas


2007/8/7, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> I motion to extend committer status to Bas Retsios of ITC for the GDAL/OGR
> project.
>
> ---
>
> Bas has read and agreed to the RFC 3 guidelines and has already contributed
> the MSG driver for GDAL as well as doing some work on the ILWIS driver.  Bas
> is currently working on the GRIB driver.
>
> I'll start with +1 from me.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ASP at blominfo.dk  Wed Aug  8 11:36:52 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] VRTKernelFilteredSource and nodata
In-Reply-To: <46B9CB22.7000504@pobox.com>
References: <25BE68A4D83DD4438F701DF0311F3F4A477974@posthus.blominfo.dk>
	<46B9CB22.7000504@pobox.com>
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A4779AF@posthus.blominfo.dk>

> The original client who funded the VRTKernelFilteredSource work didn't care
> about nodata values, so I didn't address it at the time.  But I agree it is
> desirable that it should be supported.  If you prepare patches, please file
> the changes as a ticket in Trac.  If you don't, it would still be helpful
> for you to file the issue in Trac with details from your earlier email.

I have filed a ticket (http://trac.osgeo.org/gdal/ticket/1739) with my version of vrtfilters.cpp attached as I didn't manage to make a real patch.

Another thing I mentioned in my previous mail was that I find the attribute "normalized" on the kernel counter intuitive. From the name of the attribute and from the documentation I would expect the attribute to say something about the state of the given kernel but it doesn't. Actually it determines if the kernel is normalized during the later processing. So, if you have a kernel that you know is normalized or you don't want to be normalized, you should set "normalized" to false. Otherwise it will be re-normalized for every output pixel. On the other hand, if you kernel is not normalized on input and you want it to be normalized during the processing, you should set normalized to true.

The way the code works now, I think a more appropriate name for the attribute would be "normalize". You could of course change the code to normalize kernels which have "normalized" set to false, but this is probably not what one would expect either.

Best regards
Asger


From ivan.lucena at pmldnet.com  Wed Aug  8 11:38:17 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] DOS crlf in GDAL create() ?
In-Reply-To: <46B77C9B.5040600@pobox.com>
References: <200708061752.57566.d.favis-mortlock@qub.ac.uk>
	<46B77C9B.5040600@pobox.com>
Message-ID: <46B9E369.4080107@pmldnet.com>

Hi Dave, Frank,

> Dave Favis-Mortlock wrote:
>> I ask because I'm writing Idrisi output on Linux (where end-of-lines 
>> are, of course, lf only). Idrisi (running under WINE) expects DOS crlf 
>> end-of-lines in its .rdc metadata files.

The RST driver uses the CPL/StringList functions to handle the Idrisi 
.rdc (Raster Documentation) file. What happens is that CPL uses the 
default OS end-of-line preference and Idrisi can't read the file 
termination properly if it is not DOS format.

>> OK, I can write my .fdc files then convert 'em using unix2dos, but it 
>> would be nice to avoid this step. I see that OGR uses a LINEFORMAT 
>> switch for .csv files. Anything similar for GDAL?

The .rdc file is not a GDAL supported Metadata. Therefore, the 
end-of-line in that case is not subjected to any command line option.

> There is no generic support for this, but it could potentially be addressed
> on a driver by driver basis - or if IDRISI doesn't exist on Linux, perhaps
> we should just always be writing these files with DOS text format?  I'd
> encourage you to file a bug on it, and we will see what Ivan says about it.

Frank is right. I need to either tell CPL to always save the .rdc file 
in DOS format or do my own code to reformat it.

So Dave, Please go ahead and file a bug so we can keep track of that issue.

Best regards,

Ivan

From warmerdam at pobox.com  Wed Aug  8 16:51:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Motion: Committer Status for Even Rouault
Message-ID: <46BA2CC4.80800@pobox.com>

PSC Members,

I motion to extend committer status to Even Roualt for the GDAL/OGR
project.

---

Even has been responsible for a variety of recent patches submitted
via Trac, including a new OGR driver for the BNA file format:

http://trac.osgeo.org/gdal/search?q=rouault&noquickjump=1&ticket=on

I've been quite impressed with his depth of understanding of GDAL/OGR
as demonstrated in the patches and the new driver and I think he would
be an asset to the team.  It would also allow me to get out of the loop
on some of the patching. :-)

Even has reviewed RFC 3 and has agreed to comply with it, with the
understanding that his activity level will vary over time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Aug  8 17:26:27 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Motion: Committer Status for Even Rouault
In-Reply-To: <46BA2CC4.80800@pobox.com>
References: <46BA2CC4.80800@pobox.com>
Message-ID: <f3b73b7d0708081426n59004e62vcc298aec6501b18b@mail.gmail.com>

+1

Best regards,

Tamas



2007/8/8, Frank Warmerdam <warmerdam@pobox.com>:
> PSC Members,
>
> I motion to extend committer status to Even Roualt for the GDAL/OGR
> project.
>
> ---
>
> Even has been responsible for a variety of recent patches submitted
> via Trac, including a new OGR driver for the BNA file format:
>
> http://trac.osgeo.org/gdal/search?q=rouault&noquickjump=1&ticket=on
>
> I've been quite impressed with his depth of understanding of GDAL/OGR
> as demonstrated in the patches and the new driver and I think he would
> be an asset to the team.  It would also allow me to get out of the loop
> on some of the patching. :-)
>
> Even has reviewed RFC 3 and has agreed to comply with it, with the
> understanding that his activity level will vary over time.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From dave at cs.otago.ac.nz  Wed Aug  8 19:59:15 2007
From: dave at cs.otago.ac.nz (Dave Robertson)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
In-Reply-To: <4656F24B.3050800@pobox.com>
References: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
	<464C5847.7030009@loskot.net>
	<40BE9064-8692-4FFE-AABC-BB83CDA812F7@cs.otago.ac.nz>
	<4656F24B.3050800@pobox.com>
Message-ID: <A0D95E57-AEB7-48B6-9AB1-5D8F45C2C0A7@cs.otago.ac.nz>

Frank,

I realised I hadn't replied to this, so belatedly and for the record:

Changing the PG: driver to PGB: gives me an immediate 4x speed  
improvement. Thats a fantastic return for the trouble of adding one  
character to the code!
Thanks for the information.

-Dave Robertson




On 26/05/2007, at 2:27 AM, Frank Warmerdam wrote:

>
> Dave,
>
> The OGR PostGIS read support is not well optimized, so I'm not  
> surprised
> at a difference, though this is more dramatic than I would have
> expected.  It makes me wonder if perhaps spatial querying is not being
> used for something.
>
> You might try replacing PG: with PGB: in your datasource name for  
> postgis
> access.  This uses alternate postgis driver code in OGR with binary
> fetching for geometries.  This code path is not very well  
> maintained, but
> is reportedly significantly faster than fetching geometries in text  
> format.
>

From dave at cs.otago.ac.nz  Wed Aug  8 20:50:55 2007
From: dave at cs.otago.ac.nz (Dave Robertson)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] OGR Sqlite driver
Message-ID: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>

Hi,

There have been numerous  comments over the last few years about the  
desirability of improving the SQLite OGR driver.

On 10 Nov 2005 Frank Warmerdam wrote (on the GeoWanking list ):

> The OGR SQLite driver is pretty simplistic currently. It only  
> supports geometries if they are in a column named WKT_GEOMETRY and  
> they have to be in WKT format. It also does not currently support  
> any spatial indexing.
>
> The OGR SQLite driver also does not currently preserve spatial  
> reference information.
	...
> We could extend the driver to support OGC style GEOMETRY_COLUMNS  
> tables, spatial reference tables and indexing by bounding box. As  
> well we likely ought to switch to WKB (at least optionally) for the  
> geometry column.

These seem to be very useful goals, and I wonder whether anyone is  
working on implementing this?
If not, then how much demand is there, and should a feature request be  
submitted?

Looking forward to hearing people's thoughts.

Cheers,
Dave Robertson.






From mtj.ashbridge at gmail.com  Thu Aug  9 02:40:31 2007
From: mtj.ashbridge at gmail.com (Michael Ashbridge)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Quickly generating Google Earth files
In-Reply-To: <20070806192044.254880@gmx.net>
References: <20070806192044.254880@gmx.net>
Message-ID: <1ed805e50708082340w6a330407pc96f34f50b49a64b@mail.gmail.com>

On 8/6/07, Jose Luis Gomez Dans <josegomez@gmx.net> wrote:
> Hi,
> I know there's a GSoC project dealing with a full-fledged GDAL KML driver. I take it that this will enable to quickly publish things like the datasets shown in <http://www.kcl.ac.uk/schools/sspp/geography/research/emm/geodata/>.
>
> We have heaps of raster-based information, and it would be interesting to see if we can serve it through a kmz file, as in the examples above. While I understand the new driver will allow that sort of thing, I was wondering whether it is possible to do something similar as of today, with a current version of GDAL.
>
> Any hints or comments?

http://code.google.com/p/regionator/

Some sample code there showing how to generate Region-based KML files
to publish large amounts of data. As Christopher notes, you'll need to
reproject anything that isn't 4326.

From hulst at argoss.nl  Thu Aug  9 04:28:43 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] netcdf add_offset and scale_factor
In-Reply-To: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>
References: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>
Message-ID: <200708091028.43474.hulst@argoss.nl>

Hello,

not that I'm an impatient man, but I filed an update for the netCDF driver two 
months ago and haven't heard from it since. I know you guys are busy, but I'd 
like to tap a shoulder or two ;)

http://trac.osgeo.org/gdal/ticket/1660

I really really feel that this would be a feature that simply is obligatory 
for any library that handles netCDF.

Could Dennis or Frank please take a look at it?

Sander


From ivan.mjartan at geovap.cz  Thu Aug  9 05:42:59 2007
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] How to correct use GDALGCPTransform
References: <008001c7ce8d$bb74e7e0$1a01a8c0@pc24> <46A7541C.3010405@pobox.com>
Message-ID: <003601c7da69$ac4a24f0$1a01a8c0@pc24>

Hi, Frank and all .

Thanks for previous reply. It helps me very much.

So I was little bit testing and I found solution for me, I am using 
GDALGenImgProjTransform and virtual dataset like you said.

It works fine but I have question Is it true when I use virtual datatset 
that whole raster is loading in to memory? Maybe I have to save input raster 
into intermediate tiff file (to set GCP into input raster, it can be jpg or 
other), because my input can by very large, just when raster is loading 
whole.

Thanks very much.



If someone will need to solve similar problem my code looks like follow.

BTW: Maybe sorry I really don't know how to correct reply into my thread.


GDALDatasetH CreateVirtualDatasetFromSourceFile(GDAL_GCP *pasGCPList,int 
numPoints,char *pszSrcFilename,const char *pszFormat){
 GDALDriverH hDriver;
 GDALDatasetH hSrcDS,hVDS;
 double adfDstGeoTransform[6];
 hDriver = GDALGetDriverByName( "VRT" );

 hSrcDS = GDALOpen( pszSrcFilename, GA_ReadOnly );

 if( hSrcDS == NULL ){
  return NULL;
 }

 hVDS = GDALCreateCopy( hDriver,"", hSrcDS,FALSE, NULL, NULL, NULL );

 GDALClose( hSrcDS );


 //nastavim GCPs body
 GDALSetGCPs(hVDS,numPoints,pasGCPList,"");
 GDALSetProjection( hVDS, "");

 GDALGCPsToGeoTransform(numPoints,pasGCPList,adfDstGeoTransform,TRUE);
 GDALSetGeoTransform( hVDS, adfDstGeoTransform );
 return hVDS;
}


GDALDatasetH GDALWarpCreateOutput(GDALDatasetH hSrcDS, const char 
*papszDesFile, const char *pszFormat,int nOrder)
{
    GDALDriverH hDriver;
    GDALDatasetH hDstDS;
    void *hTransformArg;
    GDALColorTableH hCT = NULL;
    int nDstBandCount = 0;
 int nPixels, nLines;
 double adfDstGeoTransform[6];
 GDALDataType eDT;
 char **papszCreateOptions = NULL;
    hDriver = GDALGetDriverByName( pszFormat );


 if( hSrcDS == NULL )
        return NULL;

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));


    nDstBandCount = GDALGetRasterCount(hSrcDS);
    hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );

    if( hCT != NULL )
    {
        hCT = GDALCloneColorTable( hCT );
    }

    hTransformArg = GDALCreateGenImgProjTransformer( hSrcDS, "",NULL, 
"",TRUE, 1000.0, nOrder );

    if( hTransformArg == NULL )
        return NULL;

 GDALSuggestedWarpOutput( hSrcDS,GDALGenImgProjTransform, 
hTransformArg,adfDstGeoTransform, &nPixels, &nLines );

 GDALDestroyGenImgProjTransformer( hTransformArg );
 papszCreateOptions = CSLSetNameValue(papszCreateOptions,"TFW", "YES");

    hDstDS = GDALCreate( hDriver, papszDesFile, nPixels, 
nLines,nDstBandCount, eDT,papszCreateOptions);

    if( hDstDS == NULL )
        return NULL;

    GDALSetProjection( hDstDS, "" );
    GDALSetGeoTransform( hDstDS, adfDstGeoTransform );

    if( hCT != NULL )
    {
        GDALSetRasterColorTable( GDALGetRasterBand(hDstDS,1), hCT );
        GDALDestroyColorTable( hCT );
    }

    return hDstDS;
}

C_GDAL4_API int warpImage(double* rasterXArray,double* rasterYArray,double* 
realXArray,double* realYArray, int numPoints,char *pszSrcFilename,char 
*pszDstFilename)
{
    GDALDatasetH hDstDS;
 GDALDatasetH hSrcDS;
    const char         *pszFormat = "GTiff";

    int                 i,j;
    void               *hTransformArg;
    GDALTransformerFunc pfnTransformer = NULL;
    GDALDataType        eOutputType = GDT_Unknown, eWorkingType = 
GDT_Unknown;
    GDALResampleAlg     eResampleAlg = GRA_NearestNeighbour;
 GDAL_GCP *pasGCPList = NULL;


 //create gcp list
 pasGCPList = (GDAL_GCP *) malloc((numPoints)*sizeof(GDAL_GCP) );

 for(j=0 ; j<numPoints;j++ )
 {
    pasGCPList[j].dfGCPPixel = rasterXArray[j];
    pasGCPList[j].dfGCPLine  = rasterYArray[j];
    pasGCPList[j].dfGCPX = realXArray[j];
    pasGCPList[j].dfGCPY = realYArray[j];
    pasGCPList[j].pszId = (char *) malloc( 10*sizeof(char) );
   pasGCPList[j].pszInfo = (char *) malloc( 10*sizeof(char) );
    sprintf(pasGCPList[j].pszId,"");
   sprintf(pasGCPList[j].pszInfo,"");
 }



    GDALAllRegister();

 hSrcDS = 
CreateVirtualDatasetFromSourceFile(pasGCPList,numPoints,pszSrcFilename,pszFormat);
 hDstDS = GDALWarpCreateOutput(hSrcDS, pszDstFilename,pszFormat,0);

    if( hSrcDS == NULL )
        return 1;

 if( hDstDS == NULL )
        return 1;

/* -------------------------------------------------------------------- */
/*      Create a transformation object from the source to               */
/*      destination coordinate system.                                  */
/* -------------------------------------------------------------------- */
    hTransformArg = GDALCreateGenImgProjTransformer( hSrcDS, "",hDstDS, 
"",TRUE, 1000.0,0);

    if( hTransformArg == NULL )
         return 1;

    pfnTransformer = GDALGenImgProjTransform;
    GDALWarpOptions *psWO = GDALCreateWarpOptions();

    psWO->eWorkingDataType = eWorkingType;
    psWO->eResampleAlg = eResampleAlg;

    psWO->hSrcDS = hSrcDS;
    psWO->hDstDS = hDstDS;

    psWO->pfnTransformer = pfnTransformer;
    psWO->pTransformerArg = hTransformArg;

/* -------------------------------------------------------------------- */
/*      Setup band mapping.                                             */
/* -------------------------------------------------------------------- */

 psWO->nBandCount = GDALGetRasterCount(hSrcDS);

    psWO->panSrcBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));
    psWO->panDstBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));

    for( i = 0; i < psWO->nBandCount; i++ )
    {
        psWO->panSrcBands[i] = i+1;
        psWO->panDstBands[i] = i+1;
    }

    GDALWarpOperation oWO;

    if( oWO.Initialize( psWO ) == CE_None )
    {
  oWO.ChunkAndWarpImage( 0, 0, GDALGetRasterXSize( 
hDstDS ),GDALGetRasterYSize( hDstDS ) );
    }

/* -------------------------------------------------------------------- */
/*      Cleanup                                                         */
/* -------------------------------------------------------------------- */

    if( hTransformArg != NULL )
        GDALDestroyGenImgProjTransformer( hTransformArg );

    GDALDestroyWarpOptions( psWO );


 //for ( j=0; i<numPoints;++j ) {
 // free( pasGCPList[j].pszId );
 // free( pasGCPList[j].pszInfo );
 //}
 //free( pasGCPList );

  GDALClose( hSrcDS );
    GDALClose( hDstDS );

    GDALDestroyDriverManager();

    return 0;
}



----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Ivan Mjartan" <ivan.mjartan@geovap.cz>
Cc: <gdal-dev@lists.maptools.org>
Sent: Wednesday, July 25, 2007 3:46 PM
Subject: Re: [Gdal-dev] How to correct use GDALGCPTransform


> Ivan Mjartan wrote:
>> I thing that I am wrong using GCPTransformer I thing that I have to set 
>> something in GDALWarpOptions but what? This is for me big mystery. I was 
>> looking on internet but there is nothing L
>>
>> Can I see some sample of using GCPTransformer ?
>>
>> May be I can use GenImgProjTransformer but I don't know how to set GCPs 
>> with out prior transform to Gtiff set GCPs and saving to Disk. (Input 
>> rasters can be jpg bitmap .)
>
> Ivan,
>
> I believe your problem is that the warper needs a transformer that goes
> from input pixel/line coordinates to destination pixel/line coordinates 
> (and
> the reverse).  But the GDALGCPTransformer only does source pixel/line to
> source georeferenced coordinates.  If you look at GenImgProjTransform() in
> gdal/alg/gdaltransformer.cpp you may note it actually performs several 
> steps.
> One from source pixel/line to source georef.  Then potentially reproject
> to destination pixel/line.  Then dest georef to dest pixel/line.
>
> You could implement your own similar transformer somewhat similar to
> GDALGenImgProjTransform, but I think the easier way is just to associate
> the GCPs with the source image.  If it is impractical to write the image
> to a new TIFF file with gdal_translate, and with the GCPs associated, then
> another approach without intermediate files would be to create an 
> in-memory
> VRT dataset using GDALCreateCopy() from the source image, and then call
> SetGCPs() on that VRT dataset.
>
> Then use the VRT as an input with the GenImgProj transformer.
>
> BTW, to avoid having a VRT written to disk, just use the filename "" for
> it when calling CreateCopy().
>
> BTW, the way you included your code (tab expansion, extra blank lines)
> made it nearly unreadable.
>
> Good work on all you have already learned about the warper!
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
> 




From warmerdam at pobox.com  Thu Aug  9 07:42:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] How to correct use GDALGCPTransform
In-Reply-To: <003601c7da69$ac4a24f0$1a01a8c0@pc24>
References: <008001c7ce8d$bb74e7e0$1a01a8c0@pc24> <46A7541C.3010405@pobox.com>
	<003601c7da69$ac4a24f0$1a01a8c0@pc24>
Message-ID: <46BAFDB6.5070306@pobox.com>

Ivan Mjartan wrote:
> Hi, Frank and all .
> 
> Thanks for previous reply. It helps me very much.
> 
> So I was little bit testing and I found solution for me, I am using 
> GDALGenImgProjTransform and virtual dataset like you said.
> 
> It works fine but I have question Is it true when I use virtual datatset 
> that whole raster is loading in to memory? 

Ivan,

VRT rasters are not loaded all into memory.  Instead the VRT rasters
keeps a reference to the source raster and loads raster data from it
as it is requested from the VRT raster.

Best regards,

 > Maybe I have to save input
> raster into intermediate tiff file (to set GCP into input raster, it can 
> be jpg or other), because my input can by very large, just when raster 
> is loading whole.



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug  9 07:50:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] netcdf add_offset and scale_factor
In-Reply-To: <200708091028.43474.hulst@argoss.nl>
References: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>
	<200708091028.43474.hulst@argoss.nl>
Message-ID: <46BAFF97.5050308@pobox.com>

A.Th.C. Hulst wrote:
> Hello,
> 
> not that I'm an impatient man, but I filed an update for the netCDF driver two 
> months ago and haven't heard from it since. I know you guys are busy, but I'd 
> like to tap a shoulder or two ;)
> 
> http://trac.osgeo.org/gdal/ticket/1660
> 
> I really really feel that this would be a feature that simply is obligatory 
> for any library that handles netCDF.
> 
> Could Dennis or Frank please take a look at it?

Sander,

I've been leaving anything to do with the netcdf driver to Denis as he has
time and interest for fear of messing it up.  I have added a note in the bug
report though, suggesting that I think applying the scale/offset on the fly
is not a good idea.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Thu Aug  9 06:33:21 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] [whatever] toWGS defintions
Message-ID: <f9eqhl$n3o$1@sea.gmane.org>

Do there exist any general source for correct [whatever] to WGS definitions?

I have an application which by use of GDAL translates WGS coordinates to 
and from [whatever] projection. I have it working with a few fully 
defined WKTs but it is no fun searching the web after all WKTs I 
possibly would need.

So I tried instead to define the Spatialreferences with EPSG-codes 
instead of WKT. And as suspected the result wasn't what I had hoped for 
since the EPSG lacked the toWGS information. The result in the 
projection I tried (RT90 2.5 gon V, EPSG 3020) the transformation was 
offset by approximately 200 meters west and 50 meters north.

Am I correct in that the error occurs because the EPSG-code do not 
specify the toWGS? 
If I am correct - what approach do you suggest?

The goal of the application, which is written in C#, is to be able to 
take any map the user provides, with or without geodata in it, and serve 
it to another application which internally works with WGS84. That is my 
application is to be able to set up and translate from a projection the 
user selects to and from WGS84.

The Q is simple - any source for correct definitions of [whatever] toWGS 
that I can use?
Or can I make the EPSG-codes work? Or do they work but I have made an error?

Yours
Tomas


From warmerdam at pobox.com  Thu Aug  9 08:17:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] OGR Sqlite driver
In-Reply-To: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>
References: <613710D2-6C20-4FA3-B65F-76460D6E208D@cs.otago.ac.nz>
Message-ID: <46BB05D2.7040202@pobox.com>

Dave Robertson wrote:
> Hi,
> 
> There have been numerous  comments over the last few years about the 
> desirability of improving the SQLite OGR driver.
> 
> On 10 Nov 2005 Frank Warmerdam wrote (on the GeoWanking list ):
> 
>> The OGR SQLite driver is pretty simplistic currently. It only supports 
>> geometries if they are in a column named WKT_GEOMETRY and they have to 
>> be in WKT format. It also does not currently support any spatial 
>> indexing.
>>
>> The OGR SQLite driver also does not currently preserve spatial 
>> reference information.
>     ...
>> We could extend the driver to support OGC style GEOMETRY_COLUMNS 
>> tables, spatial reference tables and indexing by bounding box. As well 
>> we likely ought to switch to WKB (at least optionally) for the 
>> geometry column.
> 
> These seem to be very useful goals, and I wonder whether anyone is 
> working on implementing this?
> If not, then how much demand is there, and should a feature request be 
> submitted?

Dave,

I am not aware of work on the SQLite driver other than a recent patch to
ensure that features have the fid set after a call to CreateFeature().

You could file an enhancement request as way of organizing suggested
improvements, but generally I find that enhancement requests just fill
up the bug system with stuff that is likely to never get done, so I'm
not that fond of them. (unless they come with patches!)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Thu Aug  9 06:47:12 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] [whatever] to WGS  definitions?
Message-ID: <f9erbk$pcp$2@sea.gmane.org>

Do there exist any general source for correct [whatever] to WGS 
definitions?

I have an application which by use of GDAL translates WGS coordinates to 
and from [whatever] projection. I have it working with a few fully 
defined WKTs but it is no fun searching the web after all WKTs I 
possibly would need.

So I tried instead to define the Spatialreferences with EPSG-codes 
instead of WKT. And as suspected the result wasn't what I had hoped for 
since the EPSG lacked the toWGS information. The result in the 
projection I tried (RT90 2.5 gon V, EPSG 3021) the transformation was 
offset by approximately 200 meters west and 50 meters north.

Am I correct in that the error occurs because the EPSG-code do not 
specify the toWGS? If I am correct - what approach do you suggest?

The goal of the application, which is written in C#, is to be able to 
take any map the user provides, with or without geodata in it, and serve 
it to another application which internally works with WGS84. That is my 
application is to be able to set up and translate from a projection the 
user selects to and from WGS84.

The Q is simple - any source for correct definitions of [whatever] toWGS 
that I can use?
Or can I make the EPSG-codes work? Or do they work but I have made an 
error?

Yours
Tomas

(repost - wrong EPSG-code in original post)


From warmerdam at pobox.com  Thu Aug  9 08:51:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] [whatever] toWGS defintions
In-Reply-To: <f9eqhl$n3o$1@sea.gmane.org>
References: <f9eqhl$n3o$1@sea.gmane.org>
Message-ID: <46BB0DE4.1060301@pobox.com>

Tomas R wrote:
> Do there exist any general source for correct [whatever] to WGS 
> definitions?
> 
> I have an application which by use of GDAL translates WGS coordinates to 
> and from [whatever] projection. I have it working with a few fully 
> defined WKTs but it is no fun searching the web after all WKTs I 
> possibly would need.
> 
> So I tried instead to define the Spatialreferences with EPSG-codes 
> instead of WKT. And as suspected the result wasn't what I had hoped for 
> since the EPSG lacked the toWGS information. The result in the 
> projection I tried (RT90 2.5 gon V, EPSG 3020) the transformation was 
> offset by approximately 200 meters west and 50 meters north.
> 
> Am I correct in that the error occurs because the EPSG-code do not 
> specify the toWGS? If I am correct - what approach do you suggest?
> 
> The goal of the application, which is written in C#, is to be able to 
> take any map the user provides, with or without geodata in it, and serve 
> it to another application which internally works with WGS84. That is my 
> application is to be able to set up and translate from a projection the 
> user selects to and from WGS84.
> 
> The Q is simple - any source for correct definitions of [whatever] toWGS 
> that I can use?
> Or can I make the EPSG-codes work? Or do they work but I have made an 
> error?

Tomas,

Some EPSG datum definitions do not have mappings to EPSG, but many do.
If EPSG has exactly one transformation to get to WGS84 for a datum, then
it should be incorporated into the WKT generated by OGRSpatialReference.
However, if there are more than one possibility the initialize-from-epsg
code chooses to play it safe, and use none of them rather than risk
picking one that is inappropriate to the situation and hide the fact that
it is guessing.

This is a questionable choice on my part.

Libraries like GeoTools take the approach of picking one of the available
transformations with some jiffy rules that they hope will pick better
ones.

But the core of the problem is that every TOWGS84 transformation for a
datum is at best an approximation.  Often several transformations
exist, and are applicable to particular regions, minimizing error in
that region.

Think that I *ought* to do:
  o Implement methods to get a list of all known transformations for
    a given datum with the descriptive name so that applications could
    offer the choice to the user.
  o Pick one by default when generating WKT for an EPSG coordinate system,
    ideally with some sort of hint that the towgs84 value is just one of
    several possibilities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Thu Aug  9 08:07:30 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: [whatever] toWGS defintions
In-Reply-To: <46BB0DE4.1060301@pobox.com>
References: <f9eqhl$n3o$1@sea.gmane.org> <46BB0DE4.1060301@pobox.com>
Message-ID: <f9f025$91b$1@sea.gmane.org>

So for now I need to find a WKT for every projections I wish to support?

To bad, for me, but hopefully I can get a big set of users to help me 
getting the correct WKT with a toWGS for their maps. I have two working 
now, RT90 and CH1903+. Working really good with no visible offset when 
drawing a GPS-track on the map.

or wait for you to do what you *ought* to do :)
No, that will not do.

No tip on a source for WKT-strings? Perhaps one with all UTM-zones? Or 
one with the different projections used in Europe?


Big thanks
Tomas

Frank Warmerdam skrev:
> Tomas R wrote:
>> Do there exist any general source for correct [whatever] to WGS 
>> definitions?
>>
>> I have an application which by use of GDAL translates WGS coordinates 
>> to and from [whatever] projection. I have it working with a few fully 
>> defined WKTs but it is no fun searching the web after all WKTs I 
>> possibly would need.
>>
>> So I tried instead to define the Spatialreferences with EPSG-codes 
>> instead of WKT. And as suspected the result wasn't what I had hoped 
>> for since the EPSG lacked the toWGS information. The result in the 
>> projection I tried (RT90 2.5 gon V, EPSG 3020) the transformation was 
>> offset by approximately 200 meters west and 50 meters north.
>>
>> Am I correct in that the error occurs because the EPSG-code do not 
>> specify the toWGS? If I am correct - what approach do you suggest?
>>
>> The goal of the application, which is written in C#, is to be able to 
>> take any map the user provides, with or without geodata in it, and 
>> serve it to another application which internally works with WGS84. 
>> That is my application is to be able to set up and translate from a 
>> projection the user selects to and from WGS84.
>>
>> The Q is simple - any source for correct definitions of [whatever] 
>> toWGS that I can use?
>> Or can I make the EPSG-codes work? Or do they work but I have made an 
>> error?
>
> Tomas,
>
> Some EPSG datum definitions do not have mappings to EPSG, but many do.
> If EPSG has exactly one transformation to get to WGS84 for a datum, then
> it should be incorporated into the WKT generated by OGRSpatialReference.
> However, if there are more than one possibility the initialize-from-epsg
> code chooses to play it safe, and use none of them rather than risk
> picking one that is inappropriate to the situation and hide the fact that
> it is guessing.
>
> This is a questionable choice on my part.
>
> Libraries like GeoTools take the approach of picking one of the available
> transformations with some jiffy rules that they hope will pick better
> ones.
>
> But the core of the problem is that every TOWGS84 transformation for a
> datum is at best an approximation.  Often several transformations
> exist, and are applicable to particular regions, minimizing error in
> that region.
>
> Think that I *ought* to do:
>  o Implement methods to get a list of all known transformations for
>    a given datum with the descriptive name so that applications could
>    offer the choice to the user.
>  o Pick one by default when generating WKT for an EPSG coordinate system,
>    ideally with some sort of hint that the towgs84 value is just one of
>    several possibilities.
>
> Best regards,


From warmerdam at pobox.com  Thu Aug  9 10:23:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: [whatever] toWGS defintions
In-Reply-To: <f9f025$91b$1@sea.gmane.org>
References: <f9eqhl$n3o$1@sea.gmane.org> <46BB0DE4.1060301@pobox.com>
	<f9f025$91b$1@sea.gmane.org>
Message-ID: <46BB2365.5040003@pobox.com>

Tomas R wrote:
> So for now I need to find a WKT for every projections I wish to support?
> 
> To bad, for me, but hopefully I can get a big set of users to help me 
> getting the correct WKT with a toWGS for their maps. I have two working 
> now, RT90 and CH1903+. Working really good with no visible offset when 
> drawing a GPS-track on the map.
> 
> or wait for you to do what you *ought* to do :)
> No, that will not do.
> 
> No tip on a source for WKT-strings? Perhaps one with all UTM-zones? Or 
> one with the different projections used in Europe?

Tomas,

I mentioned geotools, right?  You should be able to use geotools to
build a set of WKT definitions for the EPSG coordinate systems though
whether they are the *best* TOWGS84 values would be questionable.
Some Java programming would likely be required.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sschantz at bfs.de  Thu Aug  9 11:14:16 2007
From: sschantz at bfs.de (shortyII)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Transformation from UTM32 WGS84 (EPSG:32632) to latlong
	(EPSG:4326)
Message-ID: <12068685.post@talk.nabble.com>


Hello,
it my first time using gdalwarp for transformation a GTIFF UTM32 WGS84
(EPSG:32632) to latlong (EPSG:4326). I read a lot and tried it several times
with different parameters, but it still doesn't work:

here the info from gdalinfo form my sourcefile
Driver: GTiff/GeoTIFF
Files: l0.tif
Size is 21354, 28920
Coordinate System is:
LOCAL_CS["unnamed",
    UNIT["unknown",1]]
Origin = (32270953.125000000000000,6114921.875000000000000)
Pixel Size = (31.250000000000000,-31.250000000000000)
Metadata:
  TIFFTAG_XRESOLUTION=320
  TIFFTAG_YRESOLUTION=320
  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
Image Structure Metadata:
  COMPRESSION=LZW
Corner Coordinates:
Upper Left  (32270953.125, 6114921.875)
Lower Left  (32270953.125, 5211171.875)
Upper Right (32938265.625, 6114921.875)
Lower Right (32938265.625, 5211171.875)
Center      (32604609.375, 5663046.875)
Band 1 Block=21354x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)...

1st try:
gdalwarp -s_srs EPSG:32632 -t_srs EPSG:4326 -srcnodata "-9999" l0.tif
l0_geo.tif
Copying color table from l0.tif to new file.
Creating output file that is 1P x 47502L.
Processing input file l0.tif.
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.
100 - done.

2nd try:
E:\Stefan\Test>gdalwarp -t_srs "EPSG:4326" -srcnodata "-9999" -co "TFW=YES"
-co "COMPRESS=LZW" l0.tif l0_geo.tif
Copying color table from l0.tif to new file.
ERROR 1: No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.
Creating output file that is 21354P x 28920L.
Processing input file l0.tif.
ERROR 1: No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.
:0...10...20...30...40...50...60...70...80...90...100 - done.

The result was:
gdalinfo l0_geo.tif

Driver: GTiff/GeoTIFF
Files: l0_geo.tif
Size is 21354, 28920
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (32270953.125000000000000,6114921.875000000000000)
Pixel Size = (31.249999999999996,-31.249999999999996)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
Corner Coordinates:
Upper Left  (32270953.125, 6114921.875) (32270953d 7'115964117022.00"E,
6114921d52'21474836510.00"N)
Lower Left  (32270953.125, 5211171.875) (32270953d 7'115964117022.00"E,
5211171d52'17179869214.00"N)
Upper Right (32938265.625, 6114921.875) (32938265d37'120259084318.00"E,
6114921d52'21474836510.00"N)
Lower Right (32938265.625, 5211171.875) (32938265d37'120259084318.00"E,
5211171d52'17179869214.00"N)
Center      (32604609.375, 5663046.875)
(32604609d22'115964117022.00"E,5663046d52'21474836510.00"N)
Band 1 Block=21354x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)

The issue is now, that the coordinates are false??

Could anybody help me??? Thanks!
-- 
View this message in context: http://www.nabble.com/Transformation-from-UTM32-WGS84-%28EPSG%3A32632%29-to-latlong-%28EPSG%3A4326%29-tf4241391.html#a12068685
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From sschantz at bfs.de  Thu Aug  9 11:15:07 2007
From: sschantz at bfs.de (shortyII)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Reproject from UTM 32N (EPSG:25832) to WGS 86
	(EPSG:4326)
In-Reply-To: <a1c514bf0701310602t295262a1vdcd9e5a30c830e63@mail.gmail.com>
References: <a1c514bf0701310602t295262a1vdcd9e5a30c830e63@mail.gmail.com>
Message-ID: <12068998.post@talk.nabble.com>


Hello Johannes,
did you get a solution for your problem? I have a similar on.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
View this message in context: http://www.nabble.com/Reproject-from-UTM-32N-%28EPSG%3A25832%29-to-WGS-86-%28EPSG%3A4326%29-tf3148959.html#a12068998
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Thu Aug  9 15:12:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Transformation from UTM32 WGS84 (EPSG:32632) to latlong
	(EPSG:4326)
In-Reply-To: <12068685.post@talk.nabble.com>
References: <12068685.post@talk.nabble.com>
Message-ID: <46BB6718.7050905@pobox.com>

shortyII wrote:
> Hello,
> it my first time using gdalwarp for transformation a GTIFF UTM32 WGS84
> (EPSG:32632) to latlong (EPSG:4326). I read a lot and tried it several times
> with different parameters, but it still doesn't work:
> 
> here the info from gdalinfo form my sourcefile
> Driver: GTiff/GeoTIFF
> Files: l0.tif
> Size is 21354, 28920
> Coordinate System is:
> LOCAL_CS["unnamed",
>     UNIT["unknown",1]]
> Origin = (32270953.125000000000000,6114921.875000000000000)
> Pixel Size = (31.250000000000000,-31.250000000000000)
> Metadata:
>   TIFFTAG_XRESOLUTION=320
>   TIFFTAG_YRESOLUTION=320
>   TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
> Image Structure Metadata:
>   COMPRESSION=LZW
> Corner Coordinates:
> Upper Left  (32270953.125, 6114921.875)
> Lower Left  (32270953.125, 5211171.875)
> Upper Right (32938265.625, 6114921.875)
> Lower Right (32938265.625, 5211171.875)
> Center      (32604609.375, 5663046.875)

Hi,

The above coordinates are not UTM 32 meter values.  The earth is only
roughly 40 million meters around at the equator, so an x offset of
32 million meters is crazy.  Transverse Mercator rapidly degrees past about
10 degrees off the central meridian.

So, I think the problem is that the input coordinate system is not UTM 32
*or* you have the units wrong or the file was essentially screwed up by
some previous attempt to convert it to utm 32.

Best regards,


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From support at satshot.com  Thu Aug  9 14:49:42 2007
From: support at satshot.com (Avi A Blackmore)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Indexing with non-square boundary
Message-ID: <200708091349.42101.support@satshot.com>

Hi there,

	I've run into a thorny issue with gdaltindex, when indexing our satellite 
imagery set.  The imagery taken by the satellites is, of course, shot on 
an angle: the satellites' paths around the Earth are not vertical, but 
skewed on an angle of about 12-13 degrees.  The actual image files, of 
course, are rectangular, which results in large black "null" areas in the 
image.  We use UMN Mapserver to display the imagery, and make the black 
null areas transparent, so that they don't cause a display problem.

	The problem is, these null areas, while invisible when the image is 
displayed, are still considered "part" of the image as far as gdaltindex 
is concerned.  The bounding box is calculated from the corners of the 
image file, not from the actual corners of the "non-null" parts of the 
image.  

	The result is that, when our site does a query on the image index layer, 
we get a lot of spurious "hits" in our imagery list: images whose bounding 
box intersects the current extents of the map even though the actual 
"live" image data is well outside those extents.

	So my question is, using GDAL/OGR, how would I create a tile index whose 
bounding boxes are polygons that reflect the actual image path, and omit 
the black null areas?  I haven't found a way to do this using gdaltindex.
-- 
Avi Blackmore
System Administrator/Programmer
Agri ImaGIS Technologies, Inc.


From dylan.beaudette at gmail.com  Thu Aug  9 15:11:42 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Indexing with non-square boundary
In-Reply-To: <200708091349.42101.support@satshot.com>
References: <200708091349.42101.support@satshot.com>
Message-ID: <200708091211.42978.dylan.beaudette@gmail.com>

On Thursday 09 August 2007 11:49, Avi A Blackmore wrote:
> Hi there,
>
> 	I've run into a thorny issue with gdaltindex, when indexing our satellite
> imagery set.  The imagery taken by the satellites is, of course, shot on
> an angle: the satellites' paths around the Earth are not vertical, but
> skewed on an angle of about 12-13 degrees.  The actual image files, of
> course, are rectangular, which results in large black "null" areas in the
> image.  We use UMN Mapserver to display the imagery, and make the black
> null areas transparent, so that they don't cause a display problem.
>
> 	The problem is, these null areas, while invisible when the image is
> displayed, are still considered "part" of the image as far as gdaltindex
> is concerned.  The bounding box is calculated from the corners of the
> image file, not from the actual corners of the "non-null" parts of the
> image.
>
> 	The result is that, when our site does a query on the image index layer,
> we get a lot of spurious "hits" in our imagery list: images whose bounding
> box intersects the current extents of the map even though the actual
> "live" image data is well outside those extents.
>
> 	So my question is, using GDAL/OGR, how would I create a tile index whose
> bounding boxes are polygons that reflect the actual image path, and omit
> the black null areas?  I haven't found a way to do this using gdaltindex.

I have run into this same type of problem with projected DOQQ files. Since we 
are not performing any time of raster query, we don't have any problems with 
the square tileindex polys... however it would be more efficient (i think) if 
the index used real bounding polygons. 

It might be possible to run through a list of files and using a customized 
python-GDAL script, locate the "corners" of non-null data, use these corners 
to build a polygon geometry, and finally append the polygon to some 
shapefile. Although I have never done this, it shouldn't be all that hard..

Cheers,

Dylan


From ed at topozone.com  Thu Aug  9 15:13:55 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Indexing with non-square boundary
In-Reply-To: <200708091349.42101.support@satshot.com>
Message-ID: <C2E0DFB3.37732%ed@topozone.com>

Avi -

I do not think you can do that with GDAL and I could probably make a case
that it's not really what gdaltindex is meant to do.  The modification to
allow polygonal tiles instead of rectangular ones would have serious
implications to any tileindex client software.

I have addressed a similar problem by simply loading my imagery metadata
into a PostGIS table.  I can then do a very simple point-in-polygon query
against PostGIS to determine exactly which source image is being used for a
particular location.

     - Ed
  
-- 
Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com


> From: Avi A Blackmore <support@satshot.com>
> Organization: Agri ImaGIS Technologies
> Reply-To: <sysadmin@satshot.com>
> Date: Thu, 9 Aug 2007 13:49:42 -0500
> To: <gdal-dev@lists.maptools.org>
> Subject: [Gdal-dev] Indexing with non-square boundary
> 
> Hi there,
> 
> I've run into a thorny issue with gdaltindex, when indexing our satellite
> imagery set.  The imagery taken by the satellites is, of course, shot on
> an angle: the satellites' paths around the Earth are not vertical, but
> skewed on an angle of about 12-13 degrees.  The actual image files, of
> course, are rectangular, which results in large black "null" areas in the
> image.  We use UMN Mapserver to display the imagery, and make the black
> null areas transparent, so that they don't cause a display problem.
> 
> The problem is, these null areas, while invisible when the image is
> displayed, are still considered "part" of the image as far as gdaltindex
> is concerned.  The bounding box is calculated from the corners of the
> image file, not from the actual corners of the "non-null" parts of the
> image.  
> 
> The result is that, when our site does a query on the image index layer,
> we get a lot of spurious "hits" in our imagery list: images whose bounding
> box intersects the current extents of the map even though the actual
> "live" image data is well outside those extents.
> 
> So my question is, using GDAL/OGR, how would I create a tile index whose
> bounding boxes are polygons that reflect the actual image path, and omit
> the black null areas?  I haven't found a way to do this using gdaltindex.
> -- 
> Avi Blackmore
> System Administrator/Programmer
> Agri ImaGIS Technologies, Inc.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Aug  9 15:24:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Indexing with non-square boundary
In-Reply-To: <200708091349.42101.support@satshot.com>
References: <200708091349.42101.support@satshot.com>
Message-ID: <46BB69ED.5060906@pobox.com>

Avi A Blackmore wrote:
> 	So my question is, using GDAL/OGR, how would I create a tile index whose 
> bounding boxes are polygons that reflect the actual image path, and omit 
> the black null areas?  I haven't found a way to do this using gdaltindex.

Avi,

Assuming you have some sort of image metadata to compute the real footprint,
you could write a python script, or other custom program to generate the
tileindex instead of using gdaltindex.  Inspecting the gdaltindex code
should be instructive.

The distinction in your program would be that you would pass a polygon more
complex (or at least more accurate) than the axis aligned rectangle it
currently creates for boundaries of the image.

 > 	The result is that, when our site does a query on the image index layer,
 > we get a lot of spurious "hits" in our imagery list: images whose bounding
 > box intersects the current extents of the map even though the actual
 > "live" image data is well outside those extents.

Are you referring to raster queryies in the mapserver sense described at:

   http://mapserver.gis.umn.edu/docs/howto/raster_data/#raster-query

If so, perhaps we should be looking at a mechanism to make MapServer
exclude offsite results from query results.

If you mean the query done against the tile index to determine which
raster files to render, I'm afraid this query is done based on the bounding
box of the geometries in the tileindex, not the actual polygon.  So making
a very accurate footprint will not help optimize that at all unless the
bounding box of the footprint happens to be smaller than the whole file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug  9 15:34:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Motion: Committer Status for Bas Retsios
In-Reply-To: <46B8C8EE.7070209@pobox.com>
References: <46B8C8EE.7070209@pobox.com>
Message-ID: <46BB6C60.4050000@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> I motion to extend committer status to Bas Retsios of ITC for the GDAL/OGR
> project.

Folks,

This motion passes with support from myself, Andrey and Tamas.  Welcome aboard
Bas!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ed at topozone.com  Thu Aug  9 15:44:54 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Indexing with non-square boundary
In-Reply-To: <C2E0DFB3.37732%ed@topozone.com>
Message-ID: <C2E0E6F6.3776B%ed@topozone.com>

Avi -

Well, "serious" is probably too strong a word <g>.  But the tileindex
mechanism is intended to be a very fast test that is expected to produce
some false positives.  The intent is, of course, to eliminate the large
majority of possible data sources so only a very small number of candidates
need to be inspected in more detail.

While your situation requires support for relatively simple polygons, the
simplest generalized point-in-polygon test is quite a bit more complex than
a point-in-rectangle test.  We might not think we need to protect users from
themselves all the time, it would be easy to let a polygonal tileindex
scheme get out of hand, with excessively-complex index shapefiles.

The polygonal tileindex is a risky way to solve your problem.  You're
depending on the query function to use that information to provide the
result.  The tileindex is supposed to be an optimization tool, and the
output you get should be identical (except for performance) whether the
tileindex is present or not.  A polygonal tileindex would create situations
in which you would get one result if the index were used and a different one
if there were no index, and I think that's not a good situation.

     - Ed
  
-- 
Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com


> From: Ed McNierney <ed@topozone.com>
> Date: Thu, 09 Aug 2007 15:13:55 -0400
> To: <sysadmin@satshot.com>, <gdal-dev@lists.maptools.org>
> Conversation: [Gdal-dev] Indexing with non-square boundary
> Subject: Re: [Gdal-dev] Indexing with non-square boundary
> 
> Avi -
> 
> I do not think you can do that with GDAL and I could probably make a case
> that it's not really what gdaltindex is meant to do.  The modification to
> allow polygonal tiles instead of rectangular ones would have serious
> implications to any tileindex client software.
> 
> I have addressed a similar problem by simply loading my imagery metadata
> into a PostGIS table.  I can then do a very simple point-in-polygon query
> against PostGIS to determine exactly which source image is being used for a
> particular location.
> 
>      - Ed
>   
> -- 
> Ed McNierney
> Chief Mapmaker
> Demand Media / TopoZone.com
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: (978) 251-4242
> Fax: (978) 251-1396
> ed@topozone.com
> 
> 
>> From: Avi A Blackmore <support@satshot.com>
>> Organization: Agri ImaGIS Technologies
>> Reply-To: <sysadmin@satshot.com>
>> Date: Thu, 9 Aug 2007 13:49:42 -0500
>> To: <gdal-dev@lists.maptools.org>
>> Subject: [Gdal-dev] Indexing with non-square boundary
>> 
>> Hi there,
>> 
>> I've run into a thorny issue with gdaltindex, when indexing our satellite
>> imagery set.  The imagery taken by the satellites is, of course, shot on
>> an angle: the satellites' paths around the Earth are not vertical, but
>> skewed on an angle of about 12-13 degrees.  The actual image files, of
>> course, are rectangular, which results in large black "null" areas in the
>> image.  We use UMN Mapserver to display the imagery, and make the black
>> null areas transparent, so that they don't cause a display problem.
>> 
>> The problem is, these null areas, while invisible when the image is
>> displayed, are still considered "part" of the image as far as gdaltindex
>> is concerned.  The bounding box is calculated from the corners of the
>> image file, not from the actual corners of the "non-null" parts of the
>> image.  
>> 
>> The result is that, when our site does a query on the image index layer,
>> we get a lot of spurious "hits" in our imagery list: images whose bounding
>> box intersects the current extents of the map even though the actual
>> "live" image data is well outside those extents.
>> 
>> So my question is, using GDAL/OGR, how would I create a tile index whose
>> bounding boxes are polygons that reflect the actual image path, and omit
>> the black null areas?  I haven't found a way to do this using gdaltindex.
>> -- 
>> Avi Blackmore
>> System Administrator/Programmer
>> Agri ImaGIS Technologies, Inc.
>> 
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Aug  9 15:47:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Clip shapefile into a polygon
In-Reply-To: <5F827424D35BD311BBA300902798C054053728DF@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C054053728DF@ct13-mel.cete-mediterranee.i2>
Message-ID: <46BB6F54.5010402@pobox.com>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Frank,
> 
> Thanks for your quick answer.
> I'm not a programmer...
> I've wrote anyway a script in Python using Geometry.Intersection method. That was my first script in Python.
> I've taken your script vec_tr.py as sample.
> Miracle, my first script works good !
> However, I've noted some strange things :
> - Feature.SetFrom doesn't copy field values,
> - Geometry.Intersection can return empty geometries : In my case, it creates plines with 0 nodes. The generated shapefile can't be open with MapInfo? 7.8.
> I try to convert it with ogr2ogr in MIF/MID format. MapInfo? can't open it as well.
> 
> Thanks a lot for all. I hope that in a few months I will be able to help somebody.

Laurent,

I haven't dug really deeply, but it isn't clear to me why SetFrom() would
not copy the attribute values.

I'd appreciate it if you could file a bug on the issue with empty geometries
not being properly written out to mid/mif.  Ideally you would provide an
input file and the ogr2ogr commandline to demonstrate the issue.  I think
the mapinfo driver ought to error out for those features or something similar
if they won't work in mapinfo.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug  9 16:16:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Nodata bitmasks / null processing
In-Reply-To: <1AE58499-F326-4C8F-BBA2-50DF4BF44466@gmail.com>
References: <46B4B1FC.1030609@pobox.com>
	<DFF2EFDE-9407-4AED-A6DA-9DFEB44C7E6A@gmail.com>
	<46B88DA7.8030108@perkins.net> <46B895AC.2080909@pobox.com>
	<46B8B372.5000308@perkins.net>
	<1AE58499-F326-4C8F-BBA2-50DF4BF44466@gmail.com>
Message-ID: <46BB7604.9030801@pobox.com>


Folks,

I've written up a partial RFC proposal based on what we have been saying
at:

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

I'm heading off for six days of camping and travelling in the morning,
so I won't be able to participate in discussion for a bit.  But when I
get back, I'd like to polish the RFC up and bring it up for vote.  I'll
try and review anything said in this thread then.

I'm quite pleased at the input I've received here.  It has been an asset
and shows that group input can improve a technical proposal.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Aug  9 18:48:08 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] host for 20gb+ free data?
Message-ID: <46BB99A8.5060208@gov.yk.ca>

Hello,

I've a growing collection of spatial raster data for which there is no 
restriction on public use and re-use, but which we will not host 
ourselves as it is not something we wish to support or answer questions 
about. There is no reason for it not to be generally available though. 
Anyone know a place to host it?

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From hobu.inc at gmail.com  Thu Aug  9 19:01:07 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] host for 20gb+ free data?
In-Reply-To: <46BB99A8.5060208@gov.yk.ca>
References: <46BB99A8.5060208@gov.yk.ca>
Message-ID: <BD2F60BA-1814-47C6-9C92-51C456C346E7@gmail.com>

Matt,

Ping these guys.  I'm sure they can find a home :)
<http://lists.osgeo.org/mailman/listinfo/geodata>

Howard

On Aug 9, 2007, at 5:48 PM, Matt Wilkie wrote:

> Hello,
>
> I've a growing collection of spatial raster data for which there is  
> no restriction on public use and re-use, but which we will not host  
> ourselves as it is not something we wish to support or answer  
> questions about. There is no reason for it not to be generally  
> available though. Anyone know a place to host it?
>
> thanks,
>
> -- 
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From awilliams at rapidmap.com  Thu Aug  9 19:25:47 2007
From: awilliams at rapidmap.com (Andrew Williams)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] host for 20gb+ free data?
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC648E1F4A@rmg-server03.rmg.local>

Matt,
I'm not sure if this will suit but I use box.net as a sort of client
sharing and pseudo FTP site. It's purpose is as an online repository for
any kind of file. You access the data through HTML links and you can
even password protect shared directories.

1gb is free
5gb USD$7.95/month
15gb USD$19.95/month

There are some restrictions on file size. No individual file may be
greater than 1gb (at least on the 5Gb plan that I'm on)

So it fits your purpose as an online repository that's not under your
jurisdiction, but somebody has to pay somewhere.
 

-----Original Message-----
From: Matt Wilkie [mailto:matt.wilkie@gov.yk.ca] 
Sent: Friday, August 10, 2007 8:48 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] host for 20gb+ free data?

Hello,

I've a growing collection of spatial raster data for which there is no
restriction on public use and re-use, but which we will not host
ourselves as it is not something we wish to support or answer questions
about. There is no reason for it not to be generally available though. 
Anyone know a place to host it?

thanks,

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev




From sschantz at bfs.de  Fri Aug 10 03:09:00 2007
From: sschantz at bfs.de (shortyII)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Transformation from UTM32 WGS84 (EPSG:32632) to
	latlong (EPSG:4326)
In-Reply-To: <46BB6718.7050905@pobox.com>
References: <12068685.post@talk.nabble.com> <46BB6718.7050905@pobox.com>
Message-ID: <12086391.post@talk.nabble.com>



Frank Warmerdam-2 wrote:
> 
> Hi,
> 
> The above coordinates are not UTM 32 meter values.  The earth is only
> roughly 40 million meters around at the equator, so an x offset of
> 32 million meters is crazy.  Transverse Mercator rapidly degrees past
> about
> 10 degrees off the central meridian.
> 
> So, I think the problem is that the input coordinate system is not UTM 32
> *or* you have the units wrong or the file was essentially screwed up by
> some previous attempt to convert it to utm 32.
> 
> 

Hi,
This coordinates are UTM 32. The first 2 numbers of the easting describe the
UTM strip (32). This notation is quite common (at least at  german federal
agency for cartography and geodesie). 
I could read about this problem quite often here in the mailing-archive, but
I couldn't find any solution. Is there a possibility to correct the gtiff .
The federal agenceny explains:
"As download text files are offered that contain a definition of the
georeferencing for use in the PROJECT command of ArcInfo Workstation. For
the UTM projections the indication "xshift 3..." applies to a use of the
parameters under OUTPUT. For a use under INPUT "xshift -3..." has to be
applied or the accurate definition of your UTM coordinates has to be
considered, respectively."
Can gdalwarp do any "xshifts" ?
Thanks for helping!

-- 
View this message in context: http://www.nabble.com/Transformation-from-UTM32-WGS84-%28EPSG%3A32632%29-to-latlong-%28EPSG%3A4326%29-tf4241391.html#a12086391
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Fri Aug 10 05:23:43 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Transformation from UTM32 WGS84 (EPSG:32632) to
	latlong (EPSG:4326)
In-Reply-To: <12086391.post@talk.nabble.com>
References: <12068685.post@talk.nabble.com> <46BB6718.7050905@pobox.com>
	<12086391.post@talk.nabble.com>
Message-ID: <f9har3$7pr$1@sea.gmane.org>

shortyII schrieb:
> 
> Frank Warmerdam-2 wrote:
>> Hi,
>>
>> The above coordinates are not UTM 32 meter values.  The earth is only
>> roughly 40 million meters around at the equator, so an x offset of
>> 32 million meters is crazy.  Transverse Mercator rapidly degrees past
>> about
>> 10 degrees off the central meridian.
>>
>> So, I think the problem is that the input coordinate system is not UTM 32
>> *or* you have the units wrong or the file was essentially screwed up by
>> some previous attempt to convert it to utm 32.
>>
>>
> 
> Hi,
> This coordinates are UTM 32. The first 2 numbers of the easting describe the
> UTM strip (32). This notation is quite common (at least at  german federal
> agency for cartography and geodesie). 
> I could read about this problem quite often here in the mailing-archive, but
> I couldn't find any solution. Is there a possibility to correct the gtiff .
> The federal agenceny explains:
> "As download text files are offered that contain a definition of the
> georeferencing for use in the PROJECT command of ArcInfo Workstation. For
> the UTM projections the indication "xshift 3..." applies to a use of the
> parameters under OUTPUT. For a use under INPUT "xshift -3..." has to be
> applied or the accurate definition of your UTM coordinates has to be
> considered, respectively."
> Can gdalwarp do any "xshifts" ?
> Thanks for helping!
> 

I don't know if there is a more elegant way to do it but you can try the 
  following approach:

1. create a Virtual Raster File for your input map
gdal_translate -of VRT map.tif map.vrt
2. the vrt file is just a ascii file:
edit the lines
"<DstRect xOff="0" yOff="0" xSize="5000" ySize="5000"/>"
to
"<DstRect xOff="-32000000" yOff="0" xSize="5000" ySize="5000"/>"
(you have to do it for all bands in your input map)
3. use the vrt as input for gdal_warp (or for gdal_translate if you just 
want a corrected input map).

Regards
Wolfgang




From zhonghaiw at gmail.com  Fri Aug 10 05:37:26 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Transformation from UTM32 WGS84 (EPSG:32632) to
	latlong (EPSG:4326)
In-Reply-To: <12086391.post@talk.nabble.com>
References: <12068685.post@talk.nabble.com> <46BB6718.7050905@pobox.com>
	<12086391.post@talk.nabble.com>
Message-ID: <2534c4120708100237p60de343pc0f18d84d04b1e4a@mail.gmail.com>

Hi there,

I am always using the FWTools to do some raster transformation from NUTM32
to WGS84, i didn't get any problems. Normally i do like this:

gdalwarp -s_srs "EPSG:32632" -t_srs "EPSG:4326" -of GTIFF -co TFW=YES
UTM32N_20.tif  WGS84_20.tif

I am using the version FWTools-1.3.4.

hope this helps.

Zhonghai

On 8/10/07, shortyII <sschantz@bfs.de> wrote:
>
>
>
> Frank Warmerdam-2 wrote:
> >
> > Hi,
> >
> > The above coordinates are not UTM 32 meter values.  The earth is only
> > roughly 40 million meters around at the equator, so an x offset of
> > 32 million meters is crazy.  Transverse Mercator rapidly degrees past
> > about
> > 10 degrees off the central meridian.
> >
> > So, I think the problem is that the input coordinate system is not UTM
> 32
> > *or* you have the units wrong or the file was essentially screwed up by
> > some previous attempt to convert it to utm 32.
> >
> >
>
> Hi,
> This coordinates are UTM 32. The first 2 numbers of the easting describe
> the
> UTM strip (32). This notation is quite common (at least at  german federal
> agency for cartography and geodesie).
> I could read about this problem quite often here in the mailing-archive,
> but
> I couldn't find any solution. Is there a possibility to correct the gtiff
> .
> The federal agenceny explains:
> "As download text files are offered that contain a definition of the
> georeferencing for use in the PROJECT command of ArcInfo Workstation. For
> the UTM projections the indication "xshift 3..." applies to a use of the
> parameters under OUTPUT. For a use under INPUT "xshift -3..." has to be
> applied or the accurate definition of your UTM coordinates has to be
> considered, respectively."
> Can gdalwarp do any "xshifts" ?
> Thanks for helping!
>
> --
> View this message in context:
> http://www.nabble.com/Transformation-from-UTM32-WGS84-%28EPSG%3A32632%29-to-latlong-%28EPSG%3A4326%29-tf4241391.html#a12086391
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070810/66b87331/attachment.html
From schut at sarvision.nl  Fri Aug 10 07:16:45 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] int64 support?
Message-ID: <46BC491D.5010203@sarvision.nl>

Not really necessary, but it would be convenient if gdal supported
(u)int64 data... Using numpy on my amd64 linux pc, when I create a numpy
array without specifying the datatype it defaults to int64, which gdal
refuses to save. Usually an 'astype(int32)' suffices, but still it is a
bit annoying sometimes. So I wondered, would it be an idea to add int64
support to gdal?

VS.

From josegomez at gmx.net  Fri Aug 10 08:56:00 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Best way to load a color palette
Message-ID: <20070810125600.36690@gmx.net>

Hi,
I have processed a number of single band GeoTIFF images into GIFs (using -scale and -ot Byte to ensure that I have 255 grey levels in the output image, as the original GeoTIFFs are floats). I have another PNG file with a colour map I like (8 bit and so on), and I would like to stick it to my original GIF files. From what I read, the only way to do this (in Python) is to create a copy of my original file, apply the new palette (open the PNG file, read in the palette) to the new file, read the data in. As I understand it, there is no way to just stick said colour table to a given image without creating a copy using GDAL. 

I have also tried using Image Magick's convert -map, but the images have funny colours.

Any hints on the best recommended practice? :)
Thanks!
Jose
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

From hobu.inc at gmail.com  Fri Aug 10 10:39:51 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] int64 support?
In-Reply-To: <46BC491D.5010203@sarvision.nl>
References: <46BC491D.5010203@sarvision.nl>
Message-ID: <93449235-1D37-449C-A309-059189163C22@gmail.com>

Vincent,

I was just discussing this with Frank yesterday.  I was looking for  
something that mapped to ArcSDE's SE_INT64_TYPE for OGR, but alas, we  
don't have one.

I think the main reason we don't currently have one is that its  
inclusion has the potential to be very disruptive.  Its inclusion  
would likely require an RFC.  It definitely won't be happening in the  
1.5 release...

Howard

On Aug 10, 2007, at 6:16 AM, Vincent Schut wrote:

> Not really necessary, but it would be convenient if gdal supported
> (u)int64 data... Using numpy on my amd64 linux pc, when I create a  
> numpy
> array without specifying the datatype it defaults to int64, which gdal
> refuses to save. Usually an 'astype(int32)' suffices, but still it  
> is a
> bit annoying sometimes. So I wondered, would it be an idea to add  
> int64
> support to gdal?
>
> VS.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From Chris.Barker at noaa.gov  Fri Aug 10 12:26:55 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] int64 support?
In-Reply-To: <46BC491D.5010203@sarvision.nl>
References: <46BC491D.5010203@sarvision.nl>
Message-ID: <46BC91CF.9040209@noaa.gov>

Vincent Schut wrote:
> Not really necessary, but it would be convenient if gdal supported
> (u)int64 data... Using numpy on my amd64 linux pc, when I create a numpy
> array without specifying the datatype it defaults to int64, which gdal
> refuses to save. Usually an 'astype(int32)' suffices, but still it is a
> bit annoying sometimes.

hmm this isn't a very compelling argument to me.

The question is: Do you have a need to create/read (u)int64 data?

If there is a need for that, then it may be worth supporting, but if 
it's only about the defaults of numpy -- that should be addressed 
elsewhere: either in your code or in numpy itself, which brings me to:

 > Using numpy on my amd64 linux pc, when I create a numpy
 > array without specifying the datatype it defaults to int64.

First, that's int64, not uint64 -- is there any need for uint64?

Second -- how are you creating your arrays? Many of the array 
constructors default to float64 now. However, what I suspect is that you 
are creating arrays from python integers, in which case numpy will (or 
should!) default to the same datatype as a python integer, which is 
apparently int64 on amd64 Linux.

Anyway, it's always a good practice to specify the data type when 
creating an array that's going to interact with any outside package. The 
numpy developers have made a substantial effort to keep accidental 
upcasts from happening with operations with python numbers:

 >>> import numpy as N
 >>> a = N.ones((3,3), dtype=N.int16)
 >>> a.dtype
dtype('int16')
 >>> b = a * 5
 >>> b.dtype
dtype('int16')

(I'm on a 32bit machine, so I used int16 as my example)

So you should be OK if you create them as int32 to start with.

When writing a function that requires a particular data type, it's very 
handy to start it out with something like:

def CreateGDALSomething(InputArray):
     InputArray = N.asarray(InputArray, dtype=N.int32)
     ...
     ...

asarray() will be a no-op if the input array is already the right type.

As a rule, whenever you are creating GDAL object, you should know what 
kind of file you're creating, and that includes the datatype.

In short -- if you follow numpy and GDAL best practices you shouldn't 
have a problem.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Fri Aug 10 15:05:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] mexgdal - mex-file interface to GDAL
Message-ID: <51061.84.10.81.30.1186772700.squirrel@loskot.net>

Folks,

In case anyone is interested, I just encountered GDAL related project
on the code.google.com, named mexgdal.

http://code.google.com/p/mexgdal/

I have no idea about status of this project but as I see
there was some [1] interest of such a beast, so may be someone
will find it useful.

[1] http://lists.maptools.org/pipermail/gdal-dev/2004-April/002375.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Aug 11 13:34:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [GDAL-dev] GEOS with GDAL
In-Reply-To: <7a30cd70707270153j5dbac31bv7f555bedca6a9d60@mail.gmail.com>
References: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>	<46A8AE0A.303@pobox.com>
	<7a30cd70707270153j5dbac31bv7f555bedca6a9d60@mail.gmail.com>
Message-ID: <46BDF32B.7060303@loskot.net>

abhay menon wrote:
> I use the build for msvc80 in GEOS trunk to create the MSVC 8 compatible
> version which I am able to call in VC++6.
> I will let know on the problem that is being created on VC7.1. once I get
> time for that. And let you know what happened within.

FYI, I'm the author of the 'msvc80' project/solution for GEOS.
If you will notice any problems with that, please report it to me.
I'd like to keep this solution up to date and well working.
Thanks in advance.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From abhay.menon at gmail.com  Sat Aug 11 13:54:58 2007
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Nov 21 11:50:59 2007
Subject: [GDAL-dev] GEOS with GDAL
In-Reply-To: <46BDF32B.7060303@loskot.net>
References: <7a30cd70707260000y4e81678epd7eb48e221b720e9@mail.gmail.com>
	<46A8AE0A.303@pobox.com>
	<7a30cd70707270153j5dbac31bv7f555bedca6a9d60@mail.gmail.com>
	<46BDF32B.7060303@loskot.net>
Message-ID: <7a30cd70708111054q61615dffn4f1cc163c2320118@mail.gmail.com>

Hi Mateusz,

On 8/11/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> abhay menon wrote:
> > I use the build for msvc80 in GEOS trunk to create the MSVC 8 compatible
> > version which I am able to call in VC++6.
> > I will let know on the problem that is being created on VC7.1. once I
> get
> > time for that. And let you know what happened within.
>
> FYI, I'm the author of the 'msvc80' project/solution for GEOS.


I read the comment section ... :)

If you will notice any problems with that, please report it to me.


VC80 GEOS work well and no problem in that .... the rip I created for VC71
from your VC80 ed.. seem to create everything well in VC71 Debug but fails
the unit test that executes in VC71 Release. Also the use of the VC71
compiled GEOS in GDAL compilation seem does not to invoke GEOS methods when
I use it in my application the same.

I posted the VC71 project/Solution in geos-dev if you want look at it.

I'd like to keep this solution up to date and well working.
> Thanks in advance.
>
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>


-- 
Best Regards

Abhay Menon
http://abhaymenon.info
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070811/3c696b07/attachment.html
From mateusz at loskot.net  Sat Aug 11 14:01:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] OGRMySQL Connection
In-Reply-To: <785780.62208.qm@web54507.mail.re2.yahoo.com>
References: <785780.62208.qm@web54507.mail.re2.yahoo.com>
Message-ID: <46BDF962.8050802@loskot.net>

yohanes setiawan wrote:
> Hi,
> 
> I have read the documentation about ogrmysql connection in
> http://mapserver.gis.umn.edu/docs/howto/ogrmysql, which is define
> point data. I want to know if ogrmysql connections also available to
> define a polygon data? If the answer is yes, can you give me guidance
> to do it? is there anything that I must provide, or maybe there's
> anything that you consider important related with the subject?

First, you should be aware of the idea behind the example you're
referring to.
The tutorial takes two important assumptions:
1) geometry data is of type of point
2) geometry data is not stored in single field (using GIS capabilities
offered by MySQL) but point coordinates are stored in
separate columns: x, y

These assumptions imply that OGR generates points on-fly from
data fetched from two separate columns.

Now, if you want to work with more complex data, line or polygon
then you likely will need to use GIS features of MySQL (or PostGIS, etc.).

This means, your polygons will be stored in single column
and you will be able to retrieve them as data encoded in WKT or WKB
formats. For instance:

1) fetch polygons as Well-Known-Text

SELCT AsText(geom) FROM mytable

2) fetch polygons as Well-Known-Binary

SELCT AsBinary(geom) FROM mytable

Now, compare these SQL queries to the one used in the tutorial.
You see, now we have geometry data stored in single column.

It results in next assumption that you don't have to tell OGR to compose
geometry object with data fetched from separate columns, but you have to
tell OGR to only fetch geometry data from geometry column.

Here, you can learn how to do it, especially section "GeometryField":

http://www.gdal.org/ogr/drv_vrt.html


Roughly, your VRT file will look like this:

...
   <SrcSQL>SELECT AsBinary(geom) FROM testdata</SrcSQL>
   <GeometryType>wkbPolygon</GeometryType>
   <GeometryField encoding="WKB" field="geom"/>
...

In the drv_vrt.html document, you can read why encoding is WKB and
how it works.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From monshi at home.se  Sun Aug 12 08:11:25 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Move gdal-DLLs? (C#)
Message-ID: <f9mtdc$cdb$1@sea.gmane.org>

Currently using the DLLs and the C# binaries that comes with latest FWtools.
Is there any possibility, or can you add the possibility, in the C# 
binaries to set the path to the DLLs it depends on? It would certainly 
clean up my project and the installation quite a bit.

Currently two options I know of
1: Have the DLLs in the root of the installation of the project.
2: Set system PATH to the DLLs.

Missed any?

Yours
Tomas



From mateusz at loskot.net  Sun Aug 12 11:52:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Move gdal-DLLs? (C#)
In-Reply-To: <f9mtdc$cdb$1@sea.gmane.org>
References: <f9mtdc$cdb$1@sea.gmane.org>
Message-ID: <46BF2CAB.1000201@loskot.net>

Tomas R wrote:
> Currently using the DLLs and the C# binaries that comes with latest
> FWtools.
> Is there any possibility, or can you add the possibility, in the C#
> binaries to set the path to the DLLs it depends on? It would certainly
> clean up my project and the installation quite a bit.
> 
> Currently two options I know of
> 1: Have the DLLs in the root of the installation of the project.
> 2: Set system PATH to the DLLs.

Under Windows, there are 6-steps algorithm for searching DLLs:

http://msdn2.microsoft.com/en-us/library/ms682586.aspx

I'm sorry, but I don't understand what's your problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From monshi at home.se  Sun Aug 12 15:17:05 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Move gdal-DLLs? (C#)
In-Reply-To: <46BF2CAB.1000201@loskot.net>
References: <f9mtdc$cdb$1@sea.gmane.org> <46BF2CAB.1000201@loskot.net>
Message-ID: <f9nmbh$ukt$1@sea.gmane.org>

Thanks for the link, perhaps I have missed some information.

Can I set a system path from C# that will be searched (of course I can 
but how) that will not interfere with possible other processes  search path?

Perhaps I find the answer myself - Google knows much :)

/Tomas


Mateusz Loskot skrev:
> Tomas R wrote:
>   
>> Currently using the DLLs and the C# binaries that comes with latest
>> FWtools.
>> Is there any possibility, or can you add the possibility, in the C#
>> binaries to set the path to the DLLs it depends on? It would certainly
>> clean up my project and the installation quite a bit.
>>
>> Currently two options I know of
>> 1: Have the DLLs in the root of the installation of the project.
>> 2: Set system PATH to the DLLs.
>>     
>
> Under Windows, there are 6-steps algorithm for searching DLLs:
>
> http://msdn2.microsoft.com/en-us/library/ms682586.aspx
>
> I'm sorry, but I don't understand what's your problem.
>
> Cheers
>   


From mateusz at loskot.net  Sun Aug 12 16:15:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Move gdal-DLLs? (C#)
In-Reply-To: <f9nmbh$ukt$1@sea.gmane.org>
References: <f9mtdc$cdb$1@sea.gmane.org> <46BF2CAB.1000201@loskot.net>
	<f9nmbh$ukt$1@sea.gmane.org>
Message-ID: <46BF6A68.8030702@loskot.net>

Tomas R wrote:
> Thanks for the link, perhaps I have missed some information.
> 
> Can I set a system path from C# that will be searched (of course I can
> but how) that will not interfere with possible other processes  search
> path?


If you want to add FWTools bin folder to PATH during run-time,
so you don't have to pollute system PATH permanently,
you can do it this way, in C#

DllImport("kernel32.dll", CharSet=CharSet.Auto, SetLastError=true)]
public static extern bool
   SetEnvironmentVariable(string lpName, string lpValue);

string path = Environment.GetEnvironmentVariable("PATH");
path += @";C:\Program Files\FWTools\bin";
SetEnvironmentVariable("PATH", path);

Now, for current process, all DLLs from FWTools package are accessible.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From monshi at home.se  Sun Aug 12 16:37:09 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Move gdal-DLLs? (C#)
In-Reply-To: <46BF6A68.8030702@loskot.net>
References: <f9mtdc$cdb$1@sea.gmane.org>
	<46BF2CAB.1000201@loskot.net>	<f9nmbh$ukt$1@sea.gmane.org>
	<46BF6A68.8030702@loskot.net>
Message-ID: <f9nr1m$bnk$1@sea.gmane.org>

Mateusz Loskot skrev:
> Tomas R wrote:
>   
>> Thanks for the link, perhaps I have missed some information.
>>
>> Can I set a system path from C# that will be searched (of course I can
>> but how) that will not interfere with possible other processes  search
>> path?
>>     
>
>
> If you want to add FWTools bin folder to PATH during run-time,
> so you don't have to pollute system PATH permanently,
> you can do it this way, in C#
>
> DllImport("kernel32.dll", CharSet=CharSet.Auto, SetLastError=true)]
> public static extern bool
>    SetEnvironmentVariable(string lpName, string lpValue);
>
> string path = Environment.GetEnvironmentVariable("PATH");
> path += @";C:\Program Files\FWTools\bin";
> SetEnvironmentVariable("PATH", path);
>
> Now, for current process, all DLLs from FWTools package are accessible.
>
> Cheers
>   
Ohh, as simple as that  ;-)
If we then to this problem add that there is a possibility two plugins, 
two dll packages,  are active in SportTracks (one is the one I am 
developing) that both depends on GDAL but on different installations 
(possibly different versions). Will the path I set pollute the second 
plugins path? If we say that both plugins use the same method as in the 
example above and not have the DLLs in their local directory.
Should not be a problem I think, but without asking I can't know for sure.


Thanks!
Tomas


From mateusz at loskot.net  Sun Aug 12 17:04:57 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Move gdal-DLLs? (C#)
In-Reply-To: <f9nr1m$bnk$1@sea.gmane.org>
References: <f9mtdc$cdb$1@sea.gmane.org>	<46BF2CAB.1000201@loskot.net>	<f9nmbh$ukt$1@sea.gmane.org>	<46BF6A68.8030702@loskot.net>
	<f9nr1m$bnk$1@sea.gmane.org>
Message-ID: <46BF75F9.30802@loskot.net>

Tomas R wrote:
> Will the path I set pollute the second plugins path? If we say that
> both plugins use the same method as in the example above and not have
> the DLLs in their local directory. Should not be a problem I think,
> but without asking I can't know for sure.

As you can read in the MSDN documentation, no,
it won't pollute anything:

http://msdn2.microsoft.com/en-us/library/ms686206.aspx

or

http://msdn2.microsoft.com/en-us/library/system.environment.setenvironmentvariable.aspx

BTW, instead of the P/Invoke call to SetEnvironmentVariable, you
can use C# native method Environment.SetEnvironmentVariable (AFAIR,
available from .NET >= 2.0).
Read the doc carefully, because there are two versions of this method.
Unlike the Win32 API call accessed through P/Invoke, the method
Environment.SetEnvironmentVariable has overloaded version that *may*
change environment permanently, across processes.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sschantz at bfs.de  Mon Aug 13 02:16:29 2007
From: sschantz at bfs.de (shortyII)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Transformation from UTM32 WGS84 (EPSG:32632) to
	latlong (EPSG:4326)
In-Reply-To: <f9har3$7pr$1@sea.gmane.org>
References: <12068685.post@talk.nabble.com> <46BB6718.7050905@pobox.com>
	<12086391.post@talk.nabble.com> <f9har3$7pr$1@sea.gmane.org>
Message-ID: <12121371.post@talk.nabble.com>


Hi,
thank you Wolfgang. Your solution works, but I had to edit the line
<GeoTransform> 3.2256531250000000e+007...
to
<GeoTransform> 2.56531250000000e+005...

Changing the line <DstRect xOff="-32000000" ... had no effect.

Kind regards,
Stefan


WolfgangZ wrote:
> 
> 
> I don't know if there is a more elegant way to do it but you can try the 
>   following approach:
> 
> 1. create a Virtual Raster File for your input map
> gdal_translate -of VRT map.tif map.vrt
> 2. the vrt file is just a ascii file:
> edit the lines
> "<DstRect xOff="0" yOff="0" xSize="5000" ySize="5000"/>"
> to
> "<DstRect xOff="-32000000" yOff="0" xSize="5000" ySize="5000"/>"
> (you have to do it for all bands in your input map)
> 3. use the vrt as input for gdal_warp (or for gdal_translate if you just 
> want a corrected input map).
> 
> Regards
> Wolfgang
> 
> 

-- 
View this message in context: http://www.nabble.com/Transformation-from-UTM32-WGS84-%28EPSG%3A32632%29-to-latlong-%28EPSG%3A4326%29-tf4241391.html#a12121371
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From schut at sarvision.nl  Mon Aug 13 03:47:04 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] int64 support?
In-Reply-To: <46BC91CF.9040209@noaa.gov>
References: <46BC491D.5010203@sarvision.nl> <46BC91CF.9040209@noaa.gov>
Message-ID: <46C00C78.2050908@sarvision.nl>



Christopher Barker wrote:
> Vincent Schut wrote:
>> Not really necessary, but it would be convenient if gdal supported
>> (u)int64 data... Using numpy on my amd64 linux pc, when I create a numpy
>> array without specifying the datatype it defaults to int64, which gdal
>> refuses to save. Usually an 'astype(int32)' suffices, but still it is a
>> bit annoying sometimes.
>
> hmm this isn't a very compelling argument to me.
>
> The question is: Do you have a need to create/read (u)int64 data?
>
> If there is a need for that, then it may be worth supporting, but if
> it's only about the defaults of numpy -- that should be addressed
> elsewhere: either in your code or in numpy itself, which brings me to:
>
> <large snip>
> In short -- if you follow numpy and GDAL best practices you shouldn't
> have a problem.
Hey, point taken :) I think I made it pretty clear, but here's again: it
isn't even close to a *problem* for me. It's just a convenience issue,
and certainly not more than that, and probably just comes forth from my
lazyness of not always following best practices when I need to shortly
(and under time pressure) create some numpy/gdal based image processing
thingy. But definitely not worth a lot of effort. Even writing all these
mails might have been too much already... ;-)

>
> -Chris
>
>

From wollez at gmx.net  Mon Aug 13 04:30:39 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Transformation from UTM32 WGS84 (EPSG:32632) to
	latlong (EPSG:4326)
In-Reply-To: <12121371.post@talk.nabble.com>
References: <12068685.post@talk.nabble.com>
	<46BB6718.7050905@pobox.com>	<12086391.post@talk.nabble.com>
	<f9har3$7pr$1@sea.gmane.org> <12121371.post@talk.nabble.com>
Message-ID: <f9p4rb$d35$1@sea.gmane.org>

shortyII schrieb:
> Hi,
> thank you Wolfgang. Your solution works, but I had to edit the line
> <GeoTransform> 3.2256531250000000e+007...
> to
> <GeoTransform> 2.56531250000000e+005...
> 
> Changing the line <DstRect xOff="-32000000" ... had no effect.
> 
> Kind regards,
> Stefan
> 
> 

Sorry, you're right! It should have worked for creating a corrected UTM 
file but not directly for warping.

Regards
Wolfgang


From monshi at home.se  Mon Aug 13 04:35:28 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: Move gdal-DLLs? (C#)
In-Reply-To: <46BF75F9.30802@loskot.net>
References: <f9mtdc$cdb$1@sea.gmane.org>	<46BF2CAB.1000201@loskot.net>	<f9nmbh$ukt$1@sea.gmane.org>	<46BF6A68.8030702@loskot.net>	<f9nr1m$bnk$1@sea.gmane.org>
	<46BF75F9.30802@loskot.net>
Message-ID: <f9p54h$dif$1@sea.gmane.org>

Mateusz Loskot skrev:
> Tomas R wrote:
>   
>> Will the path I set pollute the second plugins path? If we say that
>> both plugins use the same method as in the example above and not have
>> the DLLs in their local directory. Should not be a problem I think,
>> but without asking I can't know for sure.
>>     
>
> As you can read in the MSDN documentation, no,
> it won't pollute anything:
>
> http://msdn2.microsoft.com/en-us/library/ms686206.aspx
>
> or
>
> http://msdn2.microsoft.com/en-us/library/system.environment.setenvironmentvariable.aspx
>
> BTW, instead of the P/Invoke call to SetEnvironmentVariable, you
> can use C# native method Environment.SetEnvironmentVariable (AFAIR,
> available from .NET >= 2.0).
> Read the doc carefully, because there are two versions of this method.
> Unlike the Win32 API call accessed through P/Invoke, the method
> Environment.SetEnvironmentVariable has overloaded version that *may*
> change environment permanently, across processes.
>
> Cheers
>   
Works perfectly!

dzi?kuj?

/Tomas


From dany.geotools at gmail.com  Mon Aug 13 06:35:34 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL Java Binding on Linux
Message-ID: <7221db410708130335u3743500eoad76bc2eaed1dac9@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: error.log
Type: application/octet-stream
Size: 21764 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070813/99bb4f13/error.obj
From dmitry.kan at gmail.com  Mon Aug 13 09:28:34 2007
From: dmitry.kan at gmail.com (Dmitry Kan)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] ECW->VRT->ECW
Message-ID: <9a4d1d60708130628g419e06b9wc9dfb389c309f2ed@mail.gmail.com>

Hello, list!

I have a lot of ECW 10000x10000 rasters to be processed. I use VRT for
intermediate representation. After all things are done, I get an updated ECW
raster through CreateCopy().

When I try to process all the files at once I get:

ERROR 1: An error has occurred: Error 46 "Could not allocate enough memory"
file "" line 0
ERROR 1: IReadBlock failed at X offset 0, Y offset 2687
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2687

I saw similar issue dated back to beginning of August (if correct). Was it
solved yet?

-- 
best wishes,
Dmitry Kan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070813/23fd0364/attachment.html
From collinsb at mitre.org  Mon Aug 13 09:34:20 2007
From: collinsb at mitre.org (Collins, Benjamin)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL Java Binding on Linux
In-Reply-To: <7221db410708130335u3743500eoad76bc2eaed1dac9@mail.gmail.com>
References: <7221db410708130335u3743500eoad76bc2eaed1dac9@mail.gmail.com>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C01F34B7D@IMCSRV1.MITRE.ORG>

Because of the GCC version mismatch between the MrSID DSDK and modern
Linux distros, I have not had the chance to get MrSID going either.  I
would note, however, that generally one should add a parameter to the
jvm like:
  -Djava.library.path=<relative path to libs>
instead of copying the libraries to a shared location.

On Windows, the MrSID DSDK requires an additional library (DLL) be
present at runtime.  Since the GDAL binding is the one that 'loads' it,
the -D flag will generally not help finding it, unless you artificially
load it yourself in java before GDAL tries to.  This can be
accomplished with a call like:
  System.loadLibrary("lti_dsdk_dll"); //FOR WINDOWS, pre-load the DSDK
  gdal.AllRegister();			//then start GDAL
This works on Windows, something like it may be necessary on Linux.

Sorry I could not provide more specifics.  If you got MrSID compiled in
at all, you're probably close to success.
--
Ben

>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org 
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
>Daniele Romagnoli
>Sent: Monday, August 13, 2007 6:36 AM
>To: gdal-dev@lists.maptools.org
>Subject: [Gdal-dev] GDAL Java Binding on Linux
>
>Hi guys. 
>I have some problems using GDAL java bindings on linux.
>
>I'm using Fedora Core 6.
>I downloaded GDAL from SVN, TAG 1.4.2.
>I added MrSID support and I built GDAL. (I downloaded the 
>GeoDSDK from Lizardtech, version 6.0.7.1047, for linux x86.gcc34)
>
>It works fine... I can successfully use gdalinfo with a MrSID 
>file sample.
>
>The GDAL/.libs folder contains 3 files: libgdal.so.1.11.2, 
>libgdal.so and libgdal.so.1 (last 2 are symbolic links) 
>Next step is building Java Binding through SWIG.
>
>I launched:
>cd swig
>gmake
>cd java
>gmake
>
>I built the 4 .so (libgdaljni.so, libgdalconstjni.so, 
>libogrjni.so and libosrjni.so) without any error. 
>
>Then, I put all .SO and Lizardtech lib in 
>java/JDKversion/jre/lib/i386 and launched eclipse.
>I written a little section of code which uses GDAL and I 
>received the error in the attached file.
>
>Since I'm not an expert Linux user, I'm surely doing some wrong
things.
>
>Somewhere, I read that I would have to build GDAL with the 
>same version of GCC used to build the MrSID lib provided by 
>lizardtech. 
>Fedoracore6 uses GCC 4.1.1 but, checking some forums, I think 
>that this error is unrelated with the gcc version but is 
>simply an error due to a wrong use of the .so.
>
>As my last recent attempt, I built GDAL without MrSID support 
>and tried the GDALTest java application available in 
>gdal/swig/java but I received the same error.
>The strange thing is that GDALTest successfully call 
>gdal.AllRegister() as well as gdal.getDriverCount() and 
>similar things. 
>Furthermore, I open a BMP file and I successfully obtain a 
>Dataset instance (Not null). 
>The error occurs when the code does: dataset.getDriver ()
>
>So, I'm pretty sure I'm wrong in the use of the .SO. 
>Any suggestion/question to help me solving my problems?
>
>Thank you very much.
>
>
>-- 
>Best Regards,
>Daniele Romagnoli 
>


From dany.geotools at gmail.com  Mon Aug 13 09:43:17 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL Java Binding on Linux
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C01F34B7D@IMCSRV1.MITRE.ORG>
References: <7221db410708130335u3743500eoad76bc2eaed1dac9@mail.gmail.com>
	<8D27E2CDAF11D34F97E7445BCCCDB92C01F34B7D@IMCSRV1.MITRE.ORG>
Message-ID: <7221db410708130643k6ddca1bdpb93dbf8b6dc06def@mail.gmail.com>

Thx a lot for your suggestions.

In my previous attempts, I already tried your solution by setting (under
eclipse) the VM arguments with the java library path variable, properly
linking to a shared folder.
However, even without MrSID support, I have the same problem.

So, my first objective is understanding how to make GDAL working without
MrSID from java.
Then, I will add again MrSID support.;)

Thx for your help.

Regards,
Daniele


On 8/13/07, Collins, Benjamin <collinsb@mitre.org> wrote:
>
> Because of the GCC version mismatch between the MrSID DSDK and modern
> Linux distros, I have not had the chance to get MrSID going either.  I
> would note, however, that generally one should add a parameter to the
> jvm like:
>   -Djava.library.path=<relative path to libs>
> instead of copying the libraries to a shared location.
>
> On Windows, the MrSID DSDK requires an additional library (DLL) be
> present at runtime.  Since the GDAL binding is the one that 'loads' it,
> the -D flag will generally not help finding it, unless you artificially
> load it yourself in java before GDAL tries to.  This can be
> accomplished with a call like:
>   System.loadLibrary("lti_dsdk_dll"); //FOR WINDOWS, pre-load the DSDK
>   gdal.AllRegister();                   //then start GDAL
> This works on Windows, something like it may be necessary on Linux.
>
> Sorry I could not provide more specifics.  If you got MrSID compiled in
> at all, you're probably close to success.
> --
> Ben
>
> >-----Original Message-----
> >From: gdal-dev-bounces@lists.maptools.org
> >[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
> >Daniele Romagnoli
> >Sent: Monday, August 13, 2007 6:36 AM
> >To: gdal-dev@lists.maptools.org
> >Subject: [Gdal-dev] GDAL Java Binding on Linux
> >
> >Hi guys.
> >I have some problems using GDAL java bindings on linux.
> >
> >I'm using Fedora Core 6.
> >I downloaded GDAL from SVN, TAG 1.4.2.
> >I added MrSID support and I built GDAL. (I downloaded the
> >GeoDSDK from Lizardtech, version 6.0.7.1047, for linux x86.gcc34)
> >
> >It works fine... I can successfully use gdalinfo with a MrSID
> >file sample.
> >
> >The GDAL/.libs folder contains 3 files: libgdal.so.1.11.2,
> >libgdal.so and libgdal.so.1 (last 2 are symbolic links)
> >Next step is building Java Binding through SWIG.
> >
> >I launched:
> >cd swig
> >gmake
> >cd java
> >gmake
> >
> >I built the 4 .so (libgdaljni.so, libgdalconstjni.so,
> >libogrjni.so and libosrjni.so) without any error.
> >
> >Then, I put all .SO and Lizardtech lib in
> >java/JDKversion/jre/lib/i386 and launched eclipse.
> >I written a little section of code which uses GDAL and I
> >received the error in the attached file.
> >
> >Since I'm not an expert Linux user, I'm surely doing some wrong
> things.
> >
> >Somewhere, I read that I would have to build GDAL with the
> >same version of GCC used to build the MrSID lib provided by
> >lizardtech.
> >Fedoracore6 uses GCC 4.1.1 but, checking some forums, I think
> >that this error is unrelated with the gcc version but is
> >simply an error due to a wrong use of the .so.
> >
> >As my last recent attempt, I built GDAL without MrSID support
> >and tried the GDALTest java application available in
> >gdal/swig/java but I received the same error.
> >The strange thing is that GDALTest successfully call
> >gdal.AllRegister() as well as gdal.getDriverCount() and
> >similar things.
> >Furthermore, I open a BMP file and I successfully obtain a
> >Dataset instance (Not null).
> >The error occurs when the code does: dataset.getDriver ()
> >
> >So, I'm pretty sure I'm wrong in the use of the .SO.
> >Any suggestion/question to help me solving my problems?
> >
> >Thank you very much.
> >
> >
> >--
> >Best Regards,
> >Daniele Romagnoli
> >
>



-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070813/46129525/attachment.html
From wollez at gmx.net  Mon Aug 13 10:50:10 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDALOpen failed on Tiff file
Message-ID: <f9pr32$qon$1@sea.gmane.org>

Hello,

I tried to gdal_translate and gdalinfo on a file which was created by a 
Mapserver but I only get the following error message:

GDALOpen failed - 1
0_0.tif:Cannot handle different per-sample values for field "SampleFormat"

What does this mean? Is the tiff corrupt or only in a format that is not 
supported by gdal?

Kind regards
Wolfgang


From dmitry.kan at gmail.com  Mon Aug 13 10:51:16 2007
From: dmitry.kan at gmail.com (Dmitry Kan)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Re: ECW->VRT->ECW
In-Reply-To: <9a4d1d60708130628g419e06b9wc9dfb389c309f2ed@mail.gmail.com>
References: <9a4d1d60708130628g419e06b9wc9dfb389c309f2ed@mail.gmail.com>
Message-ID: <9a4d1d60708130751k144fa107r9f66b2e4da89ea73@mail.gmail.com>

I should have attached also this information:

Language: Python 2.3.4
GDAL: VERSION_NUM=1500,
           RELEASE_DATE=20070515,
           RELEASE_NAME=1.5dev, FWTools 1.3.1

ECW image size up to 24 MB

On 13/08/07, Dmitry Kan <dmitry.kan@gmail.com> wrote:
>
>
> Hello, list!
>
> I have a lot of ECW 10000x10000 rasters to be processed. I use VRT for
> intermediate representation. After all things are done, I get an updated ECW
> raster through CreateCopy().
>
> When I try to process all the files at once I get:
>
> ERROR 1: An error has occurred: Error 46 "Could not allocate enough
> memory"  file "" line 0
> ERROR 1: IReadBlock failed at X offset 0, Y offset 2687
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2687
>
> I saw similar issue dated back to beginning of August (if correct). Was it
> solved yet?
>
> --
> best wishes,
> Dmitry Kan




-- 
best wishes,
Dmitry Kan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070813/e2db2740/attachment.html
From ivan.lucena at pmldnet.com  Mon Aug 13 23:34:51 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] DOS crlf in GDAL create() ?
In-Reply-To: <46B77C9B.5040600@pobox.com>
References: <200708061752.57566.d.favis-mortlock@qub.ac.uk>
	<46B77C9B.5040600@pobox.com>
Message-ID: <46C122DB.1030207@pmldnet.com>

Dave,

I just committed the fix so that the in UNIX the RST driver will 
generate the .RDC files in DOS text format.

Let me know if it works for you.

Best regards,

Ivan

Frank Warmerdam wrote:
> Dave Favis-Mortlock wrote:
>> Hi -- is it possible to force DOS crlf end-of-lines when GDAL create() 
>> writes ascii metadata files?
>> I ask because I'm writing Idrisi output on Linux (where end-of-lines 
>> are, of course, lf only). Idrisi (running under WINE) expects DOS crlf 
>> end-of-lines in its .rdc metadata files.
>> OK, I can write my .fdc files then convert 'em using unix2dos, but it 
>> would be nice to avoid this step. I see that OGR uses a LINEFORMAT 
>> switch for .csv files. Anything similar for GDAL?
> 
> Dave,
> 
> There is no generic support for this, but it could potentially be addressed
> on a driver by driver basis - or if IDRISI doesn't exist on Linux, perhaps
> we should just always be writing these files with DOS text format?  I'd
> encourage you to file a bug on it, and we will see what Ivan says about it.
> 
> Best regards,

From lifang589 at yahoo.com.cn  Tue Aug 14 00:44:56 2007
From: lifang589 at yahoo.com.cn (=?gb2312?q?=B7=BC=20=C0=EE?=)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL java binding on windowsXP
Message-ID: <207808.22092.qm@web15307.mail.cnb.yahoo.com>

hi list:
   
      Can you give some detailed information about GDAL java binding on windowsXP?
     By the way, I want to load raster data into oracle10g spatial georaster,can I use GDAL to achieve it?
  Thanks!
   
   
                                                                             Shmily

       
---------------------------------
3.5G20M 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070814/2f77d27d/attachment.html
From hobu.inc at gmail.com  Tue Aug 14 00:56:08 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL java binding on windowsXP
In-Reply-To: <207808.22092.qm@web15307.mail.cnb.yahoo.com>
References: <207808.22092.qm@web15307.mail.cnb.yahoo.com>
Message-ID: <32943681-4177-49FA-93FF-5054BF540BB1@gmail.com>

GDAL does not support Oracle GeoRaster at this time.

On Aug 13, 2007, at 11:44 PM, ? ? wrote:

> hi list:
>
>     Can you give some detailed information about GDAL java binding  
> on windowsXP?
>    By the way, I want to load raster data into oracle10g spatial  
> georaster,can I use GDAL to achieve it?
> Thanks!
>
>
>                                                                        
>      Shmily
>
> ????????3.5G???20M???
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Tue Aug 14 08:01:58 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Error opening tiff B/N (1 band) under WinCE with GDAL
	1.4.0
In-Reply-To: <663758.43447.qm@web23105.mail.ird.yahoo.com>
References: <663758.43447.qm@web23105.mail.ird.yahoo.com>
Message-ID: <46C199B6.1050507@loskot.net>

Daniel Luna wrote:
> Has anybody problems opening tiff B/N (1 band) under WinCE with GDAL
> 1.4.0? I've compiled GDAL for Windows, Linux and Windows Mobile 2005
> and POcket PC 2003 Under Windows and Linux Platforms i have no
> problem using tiffs F4 B/N, Packbits 1 band and depth = 8, Packbits 3
> bands and depth = 8, but compilation under Windows Mobile 5 and
> Pocket PC 2003 give me error opening tiffs F4 B/N with the same tiff
> file that is opened under Windows platform. Has anybody the same
> problem? Thanks in advance

Daniel,

I think I've not tried any images like that under Windows CE.
There is a bug possible.
Could you provide me with your image and some notes/code
about how do you open your file under Windows CE?

This will help me to investigate the problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 14 08:07:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Typo error
In-Reply-To: <200707151946.54969.yjacolin@free.fr>
References: <200707151946.54969.yjacolin@free.fr>
Message-ID: <46C19B02.1050303@loskot.net>

Yves Jacolin wrote:
> Hi,
> 
> There is a typo error in http://www.gdal.org/frmt_various.html#PNG
> "Georeferencing .wld files are written if option WORLFFILE setted. All pixel 
> types other than 16bit unsigned will be written as eight bit."
> 
> WORLFFILE -> WORLDFILE

Yves,

Thanks for pointing this typo.
As I see, Frank fixed it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 14 09:09:26 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Problems building with mysql under mingw
In-Reply-To: <BAY110-W12A50927A04940073753CCB2000@phx.gbl>
References: <BAY110-W12A50927A04940073753CCB2000@phx.gbl>
Message-ID: <46C1A986.1050303@loskot.net>

godofredo contreras wrote:
> Hi:
> 
> I?m trying to build gdal with mysql support, I?m using mysql lib and
> headers from a dev-cpp package  but the compilation fails with
> several warnings but no one error, also I tested the library and
> headers with a small program there are also several warnings but it
> compiles and executes with no problem.
> 
> What could be wrong? I'm missing something?, any help will be
> appreciated.

I've never used MinGW to build GDAL so I have no idea what's wrong here.
However, these are warnings only, so I assume compilation finishes
without any error and binaries are produced correctly.

Also, you should know that GDAL is not officially
tested with MinGW (yet):
http://trac.osgeo.org/gdal/wiki/SupportedCompilers

May be you will find some helpful notes in the list archives.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 14 09:24:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] GDAL Code Reviews - SoC and beyond
In-Reply-To: <468AB291.2060709@mapgears.com>
References: <468A5B7A.60608@pobox.com> <468AB291.2060709@mapgears.com>
Message-ID: <46C1ACFB.1080105@loskot.net>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> A decade ago when I worked in an office, we had developed a practice of
>> regular code reviews.  These were, I found, an excellent educational
>> tool for sharing best practice, and also helpful in identifying problems
>> in the reviewed code.
>>
>> As part of our commitment to our Summer of Code students, I'd like to
>> introduce this practice to GDAL.  While my initial aim is to give our
>> SoC students an opportunity to review other code, and to be reviewed,
>> I also am hopeful that we could continue the practice after this point.
>>
> 
> Frank,
> 
> I like the idea. I'd even volunteer to participate in the first one if
> it's after the MapServer code freeze date planned for July 9th.

What's the state of this call?

As a GSoC project mentor, i'm reviewing code created in frame of the
project, but I'm trying to not to overwhelm Jens with fixing and
rewriting his code according some style, but keep him focused on
implementation.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sophia.parafina at ionicenterprise.com  Tue Aug 14 12:35:23 2007
From: sophia.parafina at ionicenterprise.com (Sophia Parafina)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] bbox coordinates are not correctly read in CADRG files
Message-ID: <46C1D9CB.3080403@ionicenterprise.com>

Hi,

I'm using gdal to read CADRG files, but the bbox that gdalinfo outputs
don't seem to match what is in the file header.  I also found  the
following bugL http://trac.osgeo.org/gdal/ticket/913 .  Has this been
addressed in recent builds of gdal?

ophia



From mateusz at loskot.net  Tue Aug 14 12:48:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] bbox coordinates are not correctly read in CADRG files
In-Reply-To: <46C1D9CB.3080403@ionicenterprise.com>
References: <46C1D9CB.3080403@ionicenterprise.com>
Message-ID: <46C1DCDB.2020800@loskot.net>

Sophia Parafina wrote:
> Hi,
> 
> I'm using gdal to read CADRG files, but the bbox that gdalinfo outputs
> don't seem to match what is in the file header.  I also found  the
> following bugL http://trac.osgeo.org/gdal/ticket/913 .  Has this been
> addressed in recent builds of gdal?

Sophia,

According to my knowledge and the state of this Ticket,
I'm inclined to say it hasn't been addressed yet.

Frank is on holidays until the end of the week,
so we have to wait for confirmation and some decision
about this issue.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Thu Aug 16 14:30:57 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] ELAS not mentioned among GDAL Raster Formats?
Message-ID: <46C497E1.4040608@o2.pl>

Hi

Is there a reason why ELAS format is not mentioned on the GDAL Raster
Formats site [1]? Or maybe just some other name is used which I don't
know...

[1]http://www.gdal.org/formats_list.html

Cheers
Maciek

From nickblack1 at gmail.com  Thu Aug 16 15:50:54 2007
From: nickblack1 at gmail.com (Nick Black)
Date: Wed Nov 21 11:50:59 2007
Subject: [Gdal-dev] Error when converting a csv to shp using ogr2ogr
Message-ID: <223020e60708161250m79adce2q8a35659b77f4521e@mail.gmail.com>

Hello,

I am trying to convert a CSV file to a shape file using ogr2ogr.  The
csv is here:

http://www.blacksworld.net/ogr2ogr/london_tubes.csv

The vrt is here:

http://www.blacksworld.net/ogr2ogr/london_tubes.vrt

The shapefile produced is here:

http://www.blacksworld.net/ogr2ogr/london_tubes.shp

I am doing this:

$ /usr/local/bin/ogr2ogr -f "ESRI Shapefile" london_tubes london_tubes.csv
$ /usr/local/bin/ogr2ogr -f "ESRI Shapefile" london_tubes london_tubes.vrt

ERROR 4: Unable to open london_tubes/london_tubes.shp or
london_tubes/london_tubes.SHP.
ERROR 4: Unable to open london_tubes/london_tubes.shp or
london_tubes/london_tubes.SHP.
fread(241) failed on DBF file.
fread(241) failed on DBF file.
...
...


If i run ogrinfo on the shapefile that is produced, I can see that
there are 15 successful records, and then all of the remaining records
seem to be null.  If I delete a chunk of the CSV - the first 50 lines
for example, I get the same outcome - only the first 15 records are
successfully converted:

Here is the output of ogrinfo:

http://www.blacksworld.net/ogr2ogr/ogrinfo_out.txt

I am not sure where to go from here, any help would be much
appreciated.  I am using gdal 1.4.1 on OSX.

Cheers,






-- 
Nick Black
--------------------------------
http://www.blacksworld.net

From dany.geotools at gmail.com  Fri Aug 17 08:32:44 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL Java Binding on Linux
In-Reply-To: <7221db410708130643k6ddca1bdpb93dbf8b6dc06def@mail.gmail.com>
References: <7221db410708130335u3743500eoad76bc2eaed1dac9@mail.gmail.com>
	<8D27E2CDAF11D34F97E7445BCCCDB92C01F34B7D@IMCSRV1.MITRE.ORG>
	<7221db410708130643k6ddca1bdpb93dbf8b6dc06def@mail.gmail.com>
Message-ID: <7221db410708170532y79f2140cwa5165ceb9dc92816@mail.gmail.com>

Hi list.

I tried to build and use GDAL with the Slackware distribution from another
laptop.
I firstly configured GDAL, then I built it.
Finally, I produced SWIG bindings and I launched a java test application
similar to GDALInfo with a BMP file.
Everything works fine... No strange JVM errors occurred.

Then, I configured GDAL to support MrSID and I built it again (after a
CLEAN). I generated swig bindings and I launched a similar java test
application with a MrSID file and everything works fine again.

So, I think my problem could be related to Fedora Core 6 distribution and
its libs.
Prior to add MrSID support, I would like to be able of using GDAL from java
without errors. (adding MrSID support will be done in a second moment).

Could someone give me a little help?
There is someone here which successfully built GDAL and used it from Java
with FedoraCore6?

Thx a lot for your attention.
Best Regards,
Daniele Romagnoli


On 8/13/07, Daniele Romagnoli <dany.geotools@gmail.com> wrote:
>
> Thx a lot for your suggestions.
>
> In my previous attempts, I already tried your solution by setting (under
> eclipse) the VM arguments with the java library path variable, properly
> linking to a shared folder.
> However, even without MrSID support, I have the same problem.
>
> So, my first objective is understanding how to make GDAL working without
> MrSID from java.
> Then, I will add again MrSID support.;)
>
> Thx for your help.
>
> Regards,
> Daniele
>
>
> On 8/13/07, Collins, Benjamin <collinsb@mitre.org> wrote:
> >
> > Because of the GCC version mismatch between the MrSID DSDK and modern
> > Linux distros, I have not had the chance to get MrSID going either.  I
> > would note, however, that generally one should add a parameter to the
> > jvm like:
> >   -Djava.library.path=<relative path to libs>
> > instead of copying the libraries to a shared location.
> >
> > On Windows, the MrSID DSDK requires an additional library (DLL) be
> > present at runtime.  Since the GDAL binding is the one that 'loads' it,
> > the -D flag will generally not help finding it, unless you artificially
> > load it yourself in java before GDAL tries to.  This can be
> > accomplished with a call like:
> >   System.loadLibrary("lti_dsdk_dll"); //FOR WINDOWS, pre-load the DSDK
> >   gdal.AllRegister();                   //then start GDAL
> > This works on Windows, something like it may be necessary on Linux.
> >
> > Sorry I could not provide more specifics.  If you got MrSID compiled in
> > at all, you're probably close to success.
> > --
> > Ben
> >
> > >-----Original Message-----
> > >From: gdal-dev-bounces@lists.maptools.org
> > >[mailto: gdal-dev-bounces@lists.maptools.org] On Behalf Of
> > >Daniele Romagnoli
> > >Sent: Monday, August 13, 2007 6:36 AM
> > >To: gdal-dev@lists.maptools.org
> > >Subject: [Gdal-dev] GDAL Java Binding on Linux
> > >
> > >Hi guys.
> > >I have some problems using GDAL java bindings on linux.
> > >
> > >I'm using Fedora Core 6.
> > >I downloaded GDAL from SVN, TAG 1.4.2.
> > >I added MrSID support and I built GDAL. (I downloaded the
> > >GeoDSDK from Lizardtech, version 6.0.7.1047, for linux x86.gcc34)
> > >
> > >It works fine... I can successfully use gdalinfo with a MrSID
> > >file sample.
> > >
> > >The GDAL/.libs folder contains 3 files: libgdal.so.1.11.2,
> > >libgdal.so and libgdal.so.1 (last 2 are symbolic links)
> > >Next step is building Java Binding through SWIG.
> > >
> > >I launched:
> > >cd swig
> > >gmake
> > >cd java
> > >gmake
> > >
> > >I built the 4 .so (libgdaljni.so, libgdalconstjni.so,
> > >libogrjni.so and libosrjni.so) without any error.
> > >
> > >Then, I put all .SO and Lizardtech lib in
> > >java/JDKversion/jre/lib/i386 and launched eclipse.
> > >I written a little section of code which uses GDAL and I
> > >received the error in the attached file.
> > >
> > >Since I'm not an expert Linux user, I'm surely doing some wrong
> > things.
> > >
> > >Somewhere, I read that I would have to build GDAL with the
> > >same version of GCC used to build the MrSID lib provided by
> > >lizardtech.
> > >Fedoracore6 uses GCC 4.1.1 but, checking some forums, I think
> > >that this error is unrelated with the gcc version but is
> > >simply an error due to a wrong use of the .so.
> > >
> > >As my last recent attempt, I built GDAL without MrSID support
> > >and tried the GDALTest java application available in
> > >gdal/swig/java but I received the same error.
> > >The strange thing is that GDALTest successfully call
> > >gdal.AllRegister() as well as gdal.getDriverCount() and
> > >similar things.
> > >Furthermore, I open a BMP file and I successfully obtain a
> > >Dataset instance (Not null).
> > >The error occurs when the code does: dataset.getDriver ()
> > >
> > >So, I'm pretty sure I'm wrong in the use of the .SO.
> > >Any suggestion/question to help me solving my problems?
> > >
> > >Thank you very much.
> > >
> > >
> > >--
> > >Best Regards,
> > >Daniele Romagnoli
> > >
> >
>
>
>
> --
> Best Regards,
> Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070817/ca229f1a/attachment.html
From warmerdam at pobox.com  Fri Aug 17 14:16:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Motion: Committer Status for Even Rouault
In-Reply-To: <46BA2CC4.80800@pobox.com>
References: <46BA2CC4.80800@pobox.com>
Message-ID: <46C5E5EF.3060302@pobox.com>

Frank Warmerdam wrote:
> PSC Members,
> 
> I motion to extend committer status to Even Roualt for the GDAL/OGR
> project.

Folks,

Following up on this, the motion passes with support from Tamas and I.
Welcome aboard Even!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From xuex_chen at 126.com  Sun Aug 19 06:14:38 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] terchnical query
Message-ID: <27104927.188691187518478430.JavaMail.coremail@bj126app69.126.com>

    hello,gdal teams.   Now i begin to  use gdal to develop a plugg-in for reading ArcGIS data. There's a field value showing like "2.3565E-06", and the field type  is displayed as float in ArcCatologalso displayed as figure while export to dBase. But when i reading it in gdal, the field type is "OFTIntegerList", i wanna know :1.  how and why do you store this "2.3565E-06" as an IntegerList?2.  how can i reading field of this type into a CString object?3.  which types can be readed  by GetFieldAsString() function?  ////////////////////////////////// //Codes below are mine:   if( FieldType == OFTIntegerList || FieldType == OFTRealList )
   {// how to put a OFTIntegerList object like "5.26521E-06"into a CString object? 
    strField.Format("%e",poFeature->GetFieldAsString(j));  //ERROR!
   }
   else
    strFiled = (CString)poFeature->GetFieldAsString(j); 
   strFeatAttrib.push_back(strFiled);//strFeatAttrib is CString array //////////////////////////////////////   thanks a lot!   Best regards,                                                                  chenchen,                                                            8-19-2007,Lanzhou,China
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070819/a33a01b7/attachment.html
From xuex_chen at 126.com  Sun Aug 19 07:55:19 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] ask for technique help
Message-ID: <4078232.211691187524519345.JavaMail.coremail@bj126app69.126.com>

     hello,gdal teams.   Now i begin to  use gdal to develop a plugg-in for reading ArcGIS data. There's a field value showing like "2.3565E-06", and the field type  is displayed as float in ArcCatologalso displayed as figure while export to dBase. But when i reading it in gdal, the field type is "OFTIntegerList", i wanna know :1.  how and why do you store this "2.3565E-06" as an IntegerList?2.  how can i reading field of this type into a CString object?3.  which types can be readed  by GetFieldAsString() function?  ////////////////////////////////// //Codes below are mine:   if( FieldType == OFTIntegerList || FieldType == OFTRealList )
   {// how to put a OFTIntegerList object like "5.26521E-06"into a CString object? 
    strField.Format("%e",poFeature->GetFieldAsString(j));  //ERROR!
   }
   else
    strFiled = (CString)poFeature->GetFieldAsString(j); 
   strFeatAttrib.push_back(strFiled);//strFeatAttrib is CString array //////////////////////////////////////   thanks a lot!   Best regards,                                                                  chenchen,                                                            8-19-2007,Lanzhou,China
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070819/ecd0f7f3/attachment.html
From mateusz at loskot.net  Sun Aug 19 14:20:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] ask for technique help
In-Reply-To: <4078232.211691187524519345.JavaMail.coremail@bj126app69.126.com>
References: <4078232.211691187524519345.JavaMail.coremail@bj126app69.126.com>
Message-ID: <46C889D4.6080801@loskot.net>

chenxuexia wrote:
> hello,gdal teams.   Now i begin to  use gdal to develop a plugg-in
> for reading ArcGIS data. There's a field value showing like
> "2.3565E-06", and the field type  is displayed as float in
> ArcCatolo.

What datasource do you read?
What does the "There's" mean here - there means where,
in a database, in a shapefile?

> also displayed as figure while export to dBase. But when i
> reading it in gdal, the field type is "OFTIntegerList", 

I don't know.
Perhaps there is some bug, perhaps type is translated incorrectly.
Anyway, to be sure, more details are needed about what datasource do you
use.

> :1.  how and why do you store this "2.3565E-06" as an IntegerList?2.
> how can i reading field of this type into a CString object?3.

Where does the CString come from?
What is that?

Personally, I know 2 similar classes , ATL::CString, WTL::CString,
I bet there is one for MFC.

> which types can be readed  by GetFieldAsString() function?

Check the manual:

http://www.gdal.org/ogr/classOGRFeature.html#c7a0224e13dce1f9479a6bf2111ea766

> ////////////////////////////////// //Codes below are mine:   if(
> FieldType == OFTIntegerList || FieldType == OFTRealList ) {// how to
> put a OFTIntegerList object like "5.26521E-06"into a CString object?
>  strField.Format("%e",poFeature->GetFieldAsString(j));  //ERROR! } 

What does the %e formatter do here?

I suppose it should read %s.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sun Aug 19 19:49:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] terchnical query
In-Reply-To: <27104927.188691187518478430.JavaMail.coremail@bj126app69.126.com>
References: <27104927.188691187518478430.JavaMail.coremail@bj126app69.126.com>
Message-ID: <46C8D718.3010604@pobox.com>

chenxuexia wrote:
>  
>    hello,gdal teams.
>    Now i begin to  use gdal to develop a plugg-in for reading ArcGIS 
> data. There's a field value showing like "2.3565E-06", and the field 
> type  is displayed as float in ArcCatologalso displayed as figure 
> while export to dBase. But when i reading it in gdal, the field type is 
> "OFTIntegerList", i wanna know :
> 1.  how and why do you store this "2.3565E-06" as an IntegerList?

Chenchen,

I cannot think of any reason an attribute on a shapefile
should be treated as an integer list.  Is this a shapefile
dataset?  Or perhaps SDE? E00? Arc/Info Binary Coverage?

> 2.  how can i reading field of this type into a CString object?

GetFieldAsString() should be suitable, though for integer lists
it may be truncated if the list is long.

> 3.  which types can be readed  by GetFieldAsString() function?

GetFieldAsString() should do something reasonable for all field
types, though in some cases the result is truncated.

I think you will need to provide a sample dataset demonstrating
the issue.  It might also be helpful to verify ogrinfo is
getting the same results you are finding.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From nowak at xpam.de  Sun Aug 19 21:30:49 2007
From: nowak at xpam.de (Adam Nowacki)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Status Reports
In-Reply-To: <46C8B168.1040004@pobox.com>
References: <46C8B168.1040004@pobox.com>
Message-ID: <46C8EEC9.7050706@xpam.de>

Frank Warmerdam wrote:
> Petr / Jens / Adam,
> 
> I'd appreciate if you could send an email summarizing your project status
> to the gdal-dev list in the next day or two.  This will hopefully summarize
> things for your mentor, but also lets the rest of the community catch up on
> the status of work.
> 
> I'm afraid I dropped the ball on code reviews, so I think we will just file
> that as an idea for next summer.
> 
> Best regards,


I thought I still have like a month to finish the project ;) I woke up 
on 16th and managed to write http://147.28.0.58/wms.patch (sample xml 
file http://147.28.0.58/wmstest1.xml). Its not finished but its working.


From jukka.rahkonen at mmmtike.fi  Mon Aug 20 11:42:03 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] LUT colour correction to GDAL
Message-ID: <loom.20070820T172404-659@post.gmane.org>

Hi,

After struggling quite a bit with simple LUT stretch operations on multi-channel
images by using some high-end software I concluded that LUT colour correction in
MapServer might do the job faster and more reliable.  However, the work flow is
somehow complicated, especially with multi-channel images.  Would it be very
hard to add LUT colour correction feature to GDAL? 
Another thing is that I would like to see the NoData values respected so I could
run mosaic process afterwards :(
Starting 70-hour computing from beginning,

-Jukka Rahkonen-


From warmerdam at pobox.com  Mon Aug 20 13:53:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] LUT colour correction to GDAL
In-Reply-To: <loom.20070820T172404-659@post.gmane.org>
References: <loom.20070820T172404-659@post.gmane.org>
Message-ID: <46C9D532.2040603@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> After struggling quite a bit with simple LUT stretch operations on multi-channel
> images by using some high-end software I concluded that LUT colour correction in
> MapServer might do the job faster and more reliable.  However, the work flow is
> somehow complicated, especially with multi-channel images.  Would it be very
> hard to add LUT colour correction feature to GDAL? 
> Another thing is that I would like to see the NoData values respected so I could
> run mosaic process afterwards :(
> Starting 70-hour computing from beginning,

Jukka,

What sort of lut color correction are you wanting?  I have recently
introduced a new "gdalenhance" utility but for now it is really mostly
useful for applying histogram equalization to images - including as part
of a 16 to 8 bit conversion.

Are you wanting to create enhancement definitions in an external tool like
gimp?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From j.obi at troja.net  Mon Aug 20 14:06:43 2007
From: j.obi at troja.net (Jens Oberender)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Status Report KML Driver
Message-ID: <200708202006.47130.j.obi@troja.net>

Hi

As requested a status report for the kml driver as of today.

Working:
- reading and parsing the kml file works
- the vector part decides about what elements are layers and what features
- exporting simple Point layers/features (test with ogr2ogr into a shapefile, 
only names are converted to fields yet)

Not yet implemented:
- exporting LineString and Polygon
- export with filters
- exporting more tags as fields
- get the layer extend
- special case handling (GeometryCollections)

Summary:
The base work is done, now the data can be handled and special cases need to 
be detected and shipped around. I would guess about one week of work to 
finish that.

Future:
The base (KML class) is written, so writing a child for rasters (analog to the 
KMLvector class) shouldn't be too hard.

Bye
	Jens
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070820/ddfffaab/attachment.bin
From warmerdam at pobox.com  Mon Aug 20 14:35:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDALOpen failed on Tiff file
In-Reply-To: <f9pr32$qon$1@sea.gmane.org>
References: <f9pr32$qon$1@sea.gmane.org>
Message-ID: <46C9DEF5.7070605@pobox.com>

WolfgangZ wrote:
> Hello,
> 
> I tried to gdal_translate and gdalinfo on a file which was created by a 
> Mapserver but I only get the following error message:
> 
> GDALOpen failed - 1
> 0_0.tif:Cannot handle different per-sample values for field "SampleFormat"
> 
> What does this mean? Is the tiff corrupt or only in a format that is not 
> supported by gdal?

Wolfgang,

Did you get any response on this issue?  TIFF files produced by MapServer
are generated with GDAL and should always have the same sample type for all
samples.  So I suspect the file was somehow corrupted.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Tue Aug 21 06:36:07 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Different projection results between gdalwarp and gdal
	python bindings
Message-ID: <20070821103607.290980@gmx.net>

Hi, 
I am finding some inconsistencies between the gdalwarp utility and the gdal Python bindings (old generation). The aim is to project a raster from UTM30N/ED50 to WGS84 (the projection WKTs are at the end of this message). Using gdalwarp (GDAL 1.4.2.0, released 2007/06/27) works fine, and I get reasonable results. If I then use gdal.CreateAndReprojectImage(), the image has a different GeoTransform. Here are the extents reported by gdalinfo:

* ORIGINAL IMAGE (UTM 30N/ED50)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Upper Left  (   77000.000, 4309000.000) (  7d52'18.12"W, 38d49'39.10"N)
Lower Left  (   77000.000, 3937000.000) (  7d39'40.95"W, 35d29'9.44"N)
Upper Right (  644000.000, 4309000.000) (  1d20'20.68"W, 38d55'2.82"N)
Lower Right (  644000.000, 3937000.000) (  1d24'39.85"W, 35d33'56.38"N)
Center      (  360500.000, 4123000.000) (  4d34'21.80"W, 37d14'32.98"N)

* GDALWARP OUTPUT IMAGE (WGS84) (this one if fine)
Pixel Size = (0.010672374453967,-0.010672374453967)
Upper Left  (  -7.8716995,  38.9284612) (  7d52'18.12"W, 38d55'42.46"N)
Lower Left  (  -7.8716995,  35.4812842) (  7d52'18.12"W, 35d28'52.62"N)
Upper Right (  -1.3402064,  38.9284612) (  1d20'24.74"W, 38d55'42.46"N)
Lower Right (  -1.3402064,  35.4812842) (  1d20'24.74"W, 35d28'52.62"N)
Center      (  -4.6059529,  37.2048727) (  4d36'21.43"W, 37d12'17.54"N)

* PYTHON OUTPUT IMAGE (WGS84) (this one is shifted/skewed)
Pixel Size = (0.010672660892937,-0.010672660892937)
Upper Left  (  -7.8730950,  38.9280489) (  7d52'23.14"W, 38d55'40.98"N)
Lower Left  (  -7.8730950,  35.4807795) (  7d52'23.14"W, 35d28'50.81"N)
Upper Right (  -1.3414265,  38.9280489) (  1d20'29.14"W, 38d55'40.98"N)
Lower Right (  -1.3414265,  35.4807795) (  1d20'29.14"W, 35d28'50.81"N)
Center      (  -4.6072608,  37.2044142) (  4d36'26.14"W, 37d12'15.89"N)


As you can see, there's a slight displacement. I am using exactly the same WKT string for the gdalwarp and the Python conversions, with explicity +towgs84 parameters. The gdalwarp command was simply:
gdalwarp -s_srs utm30N_ED50_spain.wkt -t_srs wgs84.wkt input.tif output.tif

The Python code looks like this:
g = gdal.OpenShared ("input.tif")
error = gdal.CreateAndReprojectImage ( g, "output.tif", \
		src_wkt=utm30,	dst_wkt= wgs84 )

Any clues?
Many thanks!
Jose




The offending projections:
'''PROJCS["ED50 / UTM zone 30N",GEOGCS["ED50",DATUM["European_Datum_1950",SPHEROID
["International 1924",6378388,297,AUTHORITY["EPSG","7022"]],AUTHORITY["EPSG","62
30"],TOWGS84[-131,-100.3,-163.4,-1.244,-0.020,-1.144,9.39]],PRIMEM["Greenwich",0
,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9
122"]],AUTHORITY["EPSG","4230"]],PROJECTION["Transverse_Mercator"],PARAMETER["la
titude_of_origin",0],PARAMETER["central_meridian",-3],PARAMETER["scale_factor",0
.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["met
re",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","23030"]]'''

'''GEOGCS["WGS 84",
DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.2572235629972,AUTHORITY["EPSG","7030"]], AUTHORITY["EPSG","6326"]],    PRIMEM["Greenwich",0],    UNIT["degree",0.0174532925199433],    AUTHORITY["EPSG","4326"]]'''

-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

From Jukka.Rahkonen at mmmtike.fi  Tue Aug 21 06:48:05 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] LUT colour correction to GDAL
In-Reply-To: <46C9D532.2040603@pobox.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B866E73E0@tikka.haapa.mmm.fi>

> Jukka,
> 
> What sort of lut color correction are you wanting?  I have 
> recently introduced a new "gdalenhance" utility but for now 
> it is really mostly useful for applying histogram 
> equalization to images - including as part of a 16 to 8 bit 
> conversion.
> 
> Are you wanting to create enhancement definitions in an 
> external tool like gimp?

Hi Frank,

Well, I experimented by creating a mosaic out of 159 GeoCover Landsat
scenes without performing any enhancements.  My aim is to make a
reasonable large 7-channel jpeg2000 image so that there will be some
multichannel image of realistic size to be used in further play  with
both JPIP image server and MapServer. But the image I got is so ugly
that I won't show it to anybody.

The original images have very low and uneven contrast and they need to
be adjusted before mosaicing. However, I am not aiming to visually
seamless result nor am I willing to do a lot of hand work.  Bare linear
stretch between max and min values does not give satisfactory result
because scenes with even small snowy areas or clouds gets too dark, but
I tested that at least most images would be good enough if pushed
through linear standard deviation stretch with two std. dev. widths.  I
made my test by taking the mean and deviation values from another tool
and feeding those to Open EV viewer.  Result is otherwise OK but I
cannot save it to disk because I have 7 channels and Open EV keeps only
three open at the same time, and it does not remember the setting I have
made to other channels.

What I might want to do is to colour correct the original images by
creating just external LUT tables for them in text format. Next I would
like to mosaic the original images directly to the final, colour
corrected target file with just nominal computional extra cost by
runnign them through gdalwarp with '-wo LUT_COLOR_CORRECTION=YES' option
set :)

In my case I could create LUT tables manually. Perhaps some clever
programmer could even integrate the creation on LUT tables for usual
tasks, like linear or standard deviation stretch, into some program that
counts histograms?  For more sophisticated adjustments an external tool
like GIMP showing preview of the result would be nice.

Regards,

-Jukka Rahkonen-


From mateusz at loskot.net  Tue Aug 21 08:29:40 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Status Report KML Driver
In-Reply-To: <200708202006.47130.j.obi@troja.net>
References: <200708202006.47130.j.obi@troja.net>
Message-ID: <46CADAB4.10106@loskot.net>

Jens Oberender wrote:
> As requested a status report for the kml driver as of today.
>
> Working:
> - reading and parsing the kml file works
> - the vector part decides about what elements are layers and what features

I tested it and confirm it works well.

> - exporting simple Point layers/features (test with ogr2ogr into a shapefile, 
> only names are converted to fields yet)

There are two issues:

1. The features count is not set (0 is reported) but features are listed
correctly:

http://mateusz.loskot.net/tmp/kml/

2. There is some problem with read-only/write-only mode reported from
ogrinfo (see files linked above)

> Not yet implemented:
> - exporting LineString and Polygon

I think this is of priority 1 (highest).

> - export with filters

IMO, this one is of priority 3.

> - exporting more tags as fields

and here I'd set priority 2.

> - get the layer extend

I think you mean spatial extent.
This should be quite easy to implement.

> - special case handling (GeometryCollections)

Priority 4

> Summary:
> The base work is done,

Great!

> now the data can be handled and special cases need to 
> be detected and shipped around. I would guess about one week of work to 
> finish that.

OK.
>From my point of view, there is no problem to continue the work
in next weeks if you need.

> Future:
> The base (KML class) is written, so writing a child for rasters (analog to the 
> KMLvector class) shouldn't be too hard.

OK.


Jens, this all looks great.
Thank you very much for your hard work!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Aug 21 08:34:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] LUT colour correction to GDAL
In-Reply-To: <CC197224AC75CE4DB23F739B16891B866E73E0@tikka.haapa.mmm.fi>
References: <CC197224AC75CE4DB23F739B16891B866E73E0@tikka.haapa.mmm.fi>
Message-ID: <46CADBE2.8090903@pobox.com>

Rahkonen Jukka wrote:
> What I might want to do is to colour correct the original images by
> creating just external LUT tables for them in text format. Next I would
> like to mosaic the original images directly to the final, colour
> corrected target file with just nominal computional extra cost by
> runnign them through gdalwarp with '-wo LUT_COLOR_CORRECTION=YES' option
> set :)
> 
> In my case I could create LUT tables manually. Perhaps some clever
> programmer could even integrate the creation on LUT tables for usual
> tasks, like linear or standard deviation stretch, into some program that
> counts histograms?  For more sophisticated adjustments an external tool
> like GIMP showing preview of the result would be nice.

Jukka,

The gdalenhance can scale and apply a LUT.  It supports a LUT configuration
file that looks like this:

1:Band -0.5:ScaleMin 255.5:ScaleMax 0 0 0 0 0 0 0 0 2 4 4 4 ... 255

I have attached the literal config file example.  The config file may
contain multiple bands (each on their own line) though this example is
for a single band.  It can be applied like:

  gdalenhance -config x.config -ot Byte in.tif out.tif

The gdalenhance utility currently only exists in GDAL trunk (aka 1.5)
and is far from doing everything I had intended for it.  But with some
scripting to prepare the LUTs it should be suitable to preprocess your
imagery.

I'm not too inclined to incorporate application of LUT files in gdalwarp.

I would also like to mention that GRASS includes a variety of tools for this
sort of application.  And that OSSIM also apparently includes an excellent
color balancing and mosaicing capability that might be ideal for this sort of
use though I don't have personal experience with it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
1:Band -0.5:ScaleMin 255.5:ScaleMax 0 0 0 0 0 0 0 0 2 4 4 4 4 4 4 4 8 11 11 11 11 11 11 11 11 16 20 20 20 20 20 20 20 25 29 29 29 29 29 29 29 34 38 38 38 38 38 38 38 43 48 48 48 48 48 48 48 48 54 60 60 60 60 60 60 60 66 73 73 73 73 73 73 73 80 88 88 88 88 88 88 88 95 102 102 102 102 102 102 102 109 116 116 116 116 116 116 116 116 124 132 132 132 132 132 132 132 140 148 148 148 148 148 148 148 155 162 162 162 162 162 162 162 169 176 176 176 176 176 176 176 176 182 188 188 188 188 188 188 188 194 200 200 200 200 200 200 200 205 210 210 210 210 210 210 210 214 219 219 219 219 219 219 219 219 222 226 226 226 226 226 226 226 229 232 232 232 232 232 232 232 234 237 237 237 237 237 237 237 239 241 241 241 241 241 241 241 242 244 244 244 244 244 244 244 244 246 247 247 247 247 247 247 247 248 249 249 249 249 249 249 249 250 251 251 251 251 251 251 251 252 253 253 253 253 253 253 253 253 254 254 254 254 254 254 254 254 255 255 255 255 255 255 255 255 255 
From Jukka.Rahkonen at mmmtike.fi  Tue Aug 21 09:13:16 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:51:00 2007
Subject: VS: [Gdal-dev] LUT colour correction to GDAL
In-Reply-To: <46CADBE2.8090903@pobox.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B866E73E1@tikka.haapa.mmm.fi>

> L?hett?j?: Frank Warmerdam 

> Jukka,
> 
> The gdalenhance can scale and apply a LUT.  It supports a LUT 
> configuration file that looks like this:
> 
> 1:Band -0.5:ScaleMin 255.5:ScaleMax 0 0 0 0 0 0 0 0 2 4 4 4 ... 255
.... 
> I would also like to mention that GRASS includes a variety of 
> tools for this sort of application.  And that OSSIM also 
> apparently includes an excellent color balancing and 
> mosaicing capability that might be ideal for this sort of use 
> though I don't have personal experience with it.

Thank you, Frank.  I will try OSSIM and see if it is too difficult for me, and gdalenhance once it is available as Windows binaries.  I am sure I can make far better mosaic with those tools.

-Jukka-


From warmerdam at pobox.com  Tue Aug 21 09:50:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Different projection results between gdalwarp and
	gdal python bindings
In-Reply-To: <20070821103607.290980@gmx.net>
References: <20070821103607.290980@gmx.net>
Message-ID: <46CAED99.6050102@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi, 
> I am finding some inconsistencies between the gdalwarp utility and the gdal Python bindings (old generation). The aim is to project a raster from UTM30N/ED50 to WGS84 (the projection WKTs are at the end of this message). Using gdalwarp (GDAL 1.4.2.0, released 2007/06/27) works fine, and I get reasonable results. If I then use gdal.CreateAndReprojectImage(), the image has a different GeoTransform. Here are the extents reported by gdalinfo:
...
> As you can see, there's a slight displacement. I am using exactly the same WKT string for the gdalwarp and the Python conversions, with explicity +towgs84 parameters. The gdalwarp command was simply:
> gdalwarp -s_srs utm30N_ED50_spain.wkt -t_srs wgs84.wkt input.tif output.tif
> 
> The Python code looks like this:
> g = gdal.OpenShared ("input.tif")
> error = gdal.CreateAndReprojectImage ( g, "output.tif", \
> 		src_wkt=utm30,	dst_wkt= wgs84 )
> 
> Any clues?

Jose,

I have reviewed the code used in gdalwarp, and in CreateAndReprojectImage()
and while their internal implementation is slightly different it isn't clear
to me why they would come up with different results.

I've tried reproducing your problem with FWTools 1.3.4 on linux but the
results match exactly.

I suspect some sort of subtle difference in the environment
variables or GDAL library version between the gdalwarp and
python case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Tue Aug 21 11:02:43 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Different projection results between gdalwarp and gdal
	python bindings
In-Reply-To: <46CAED99.6050102@pobox.com>
References: <20070821103607.290980@gmx.net> <46CAED99.6050102@pobox.com>
Message-ID: <20070821150243.116980@gmx.net>

Frank,
> Jose Luis Gomez Dans wrote:

> > I am finding some inconsistencies between the gdalwarp utility and the
[...] 
> I've tried reproducing your problem with FWTools 1.3.4 on linux but the
> results match exactly.

Mine is self-compiled, but due to dependencies and so on, I might have ended up with different sets of GDAL-related stuff on my machine. I will have a deep inspection to see whether this is the case or not. 

Many thanks for your time,
Jose
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

From warmerdam at pobox.com  Tue Aug 21 11:41:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] RFC 15: Band Masks
Message-ID: <46CB079D.3020603@pobox.com>

Folks,

After some thinking, and discussions with Howard, I have revised RFC 15
a bunch.  Highlights:

  o Now I plan to return alpha bands as the mask if they apply.
  o I have changed the name of the methods to just GetMaskBand() and
    get GetMaskFlags() to avoid confusion.
  o I have written in more detail about the default implementation.
  o I have changed the GetMaskType() to GetMaskFlags() with flags bitwise
    or'ed together for expandability and so multiple conditions can apply at
    once.

I have also explicitly indicated that the API is not being extended at this
time for the creation of masks.  Driver CreateCopy() implementations can
capture masks from the source dataset if applicable, but that is the only
mechanism GDAL can use to create them for now.  Related to this, I'm
avoiding addressing band masks in PAM (the persistant auxilary metadata
mechanism).  I'm doing this mostly to keep things managable for now, and
because I think some careful thinking needs to be applied before trying
to provide explicit creation.

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

I'm very pleased with the move to expressing nodata, alpha bands and
explicit bitmasks all through the mask model.  I hope others will feel
the same!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Aug 21 12:30:00 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] RFC 15: Band Masks
In-Reply-To: <46CB079D.3020603@pobox.com>
References: <46CB079D.3020603@pobox.com>
Message-ID: <46CB1308.3080003@perkins.net>

This all seems reasonable to me. Just to clarify: in the case where 
there is a genuine binary valued bitmaks per raster band, will 
GetMaskFlags() return 0? i.e. is it intended that there is no specific 
flag for GMF_PER_BAND?

Cheers,

Sy

Frank Warmerdam wrote:
> Folks,
>
> After some thinking, and discussions with Howard, I have revised RFC 15
> a bunch.  Highlights:
>
>  o Now I plan to return alpha bands as the mask if they apply.
>  o I have changed the name of the methods to just GetMaskBand() and
>    get GetMaskFlags() to avoid confusion.
>  o I have written in more detail about the default implementation.
>  o I have changed the GetMaskType() to GetMaskFlags() with flags bitwise
>    or'ed together for expandability and so multiple conditions can 
> apply at
>    once.
>
> I have also explicitly indicated that the API is not being extended at 
> this
> time for the creation of masks.  Driver CreateCopy() implementations can
> capture masks from the source dataset if applicable, but that is the only
> mechanism GDAL can use to create them for now.  Related to this, I'm
> avoiding addressing band masks in PAM (the persistant auxilary metadata
> mechanism).  I'm doing this mostly to keep things managable for now, and
> because I think some careful thinking needs to be applied before trying
> to provide explicit creation.
>
>   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>
> I'm very pleased with the move to expressing nodata, alpha bands and
> explicit bitmasks all through the mask model.  I hope others will feel
> the same!
>
> Best regards,


From warmerdam at pobox.com  Tue Aug 21 13:04:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] RFC 15: Band Masks
In-Reply-To: <46CB1308.3080003@perkins.net>
References: <46CB079D.3020603@pobox.com> <46CB1308.3080003@perkins.net>
Message-ID: <46CB1B05.5040208@pobox.com>

Simon Perkins wrote:
> This all seems reasonable to me. Just to clarify: in the case where 
> there is a genuine binary valued bitmaks per raster band, will 
> GetMaskFlags() return 0? i.e. is it intended that there is no specific 
> flag for GMF_PER_BAND?

Sy,

PER_BAND is now the assumption unless PER_DATASET is set.

So yes, GetMaskFlags() would normally return zero when there is a
"real" band specific mask not derived from nodata, and not just the alpha.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Aug 21 18:59:06 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NITF fixes
Message-ID: <46CB6E3A.4040309@perkins.net>

Just in case anybody else is also having problems with this, I just 
checked in some fixes to the GDAL NITF format directory to get it to 
compile under visual studio again.

One of the problems was that some new code added earlier today in 
nitffile.c used the strcasecmp() function, which is not available in 
windows. I added a define that translates this to the equivalent 
_stricmp() windows function if _MSC_VER is defined, but I wonder if 
there's a more standard GDAL way to do this? Are these kinds of 
incompatibilities handled by some cpl_ header file somewhere?

Cheers,

Sy


From warmerdam at pobox.com  Tue Aug 21 19:57:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NITF fixes
In-Reply-To: <46CB6E3A.4040309@perkins.net>
References: <46CB6E3A.4040309@perkins.net>
Message-ID: <46CB7BCD.5030403@pobox.com>

Simon Perkins wrote:
> Just in case anybody else is also having problems with this, I just 
> checked in some fixes to the GDAL NITF format directory to get it to 
> compile under visual studio again.
> 
> One of the problems was that some new code added earlier today in 
> nitffile.c used the strcasecmp() function, which is not available in 
> windows. I added a define that translates this to the equivalent 
> _stricmp() windows function if _MSC_VER is defined, but I wonder if 
> there's a more standard GDAL way to do this? Are these kinds of 
> incompatibilities handled by some cpl_ header file somewhere?

Sy,

The more common approach is to use the EQUAL() macro (which returns true
if the strings are equal in a case insensitive way).

Even, perhaps you could switch this? (assuming it was Even't recent work)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Aug 22 04:29:51 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NITF fixes
In-Reply-To: <46CB7BCD.5030403@pobox.com>
References: <46CB6E3A.4040309@perkins.net> <46CB7BCD.5030403@pobox.com>
Message-ID: <f3b73b7d0708220129s6076ede1hd8bcf69c2ec8bf26@mail.gmail.com>

FYI Currently the autotest hangs on the nitf_1  test on any platform as of
Sat Aug 18 15:00 PDT

This problem causes the python.exe gets frozen on the windows builders
http://buildbot.osgeo.org:8500/

Best regards,

Tamas



2007/8/22, Frank Warmerdam <warmerdam@pobox.com>:
> Simon Perkins wrote:
> > Just in case anybody else is also having problems with this, I just
> > checked in some fixes to the GDAL NITF format directory to get it to
> > compile under visual studio again.
> >
> > One of the problems was that some new code added earlier today in
> > nitffile.c used the strcasecmp() function, which is not available in
> > windows. I added a define that translates this to the equivalent
> > _stricmp() windows function if _MSC_VER is defined, but I wonder if
> > there's a more standard GDAL way to do this? Are these kinds of
> > incompatibilities handled by some cpl_ header file somewhere?
>
> Sy,
>
> The more common approach is to use the EQUAL() macro (which returns true
> if the strings are equal in a case insensitive way).
>
> Even, perhaps you could switch this? (assuming it was Even't recent work)
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From dany.geotools at gmail.com  Wed Aug 22 05:23:50 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL 1.4.2 jp2kakadu, optimized RasterIO question
Message-ID: <7221db410708220223x5b87e420v9371bd8258b78b7d@mail.gmail.com>

Hi list.

Some months ago (in March 2007) we slightly modified the
jp2kakdataset.cppcode from GDAL Trunk repo to meet our needs.

Actually, I will align my code to the last tagged version of GDAL (1.4.2).
In the context of the Jp2Kakadu format, I noticed that the
jp2kakdataset.cppof the tagged version of GDAL does not contain some
parts of code available
in the trunk, such as DirectRasterIO and TestUseBlockIO methods (added in
February).

Will these new optimized IRasterIO sections be added in the next tag of GDAL
or they are experimental code and need to be more deeply tested prior to go
stable?

Thank you very much for your attention.

-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070822/89068ae3/attachment.html
From josegomez at gmx.net  Wed Aug 22 07:17:23 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Different projection results between gdalwarp and gdal
	python bindings
Message-ID: <20070822111723.117120@gmx.net>

Frank,
> > Jose Luis Gomez Dans wrote:
> 
> > > I am finding some inconsistencies between the gdalwarp utility and the
> [...] 
> > I've tried reproducing your problem with FWTools 1.3.4 on linux but the
> > results match exactly.
> 
> Mine is self-compiled, but due to dependencies and so on, I might have
> ended up with different sets of GDAL-related stuff on my machine. I will have
> a deep inspection to see whether this is the case or not. 

After checking whether everything was in order, I decided to install FWTools (1.3.5, the latest and greatest). The problem is still there. I have also tried the same on a clean FWTools  installation on win32 (it's an old install I have around, with GDAL 1.3.2), and I get the same results I reported yesterday. 

Converting a Shapefile results in no problems, but converting this GeoTIFF files is problematic. Given this, I guess that the CSV files with projection parameters are OK (otherwise, ogr2ogr reprojections should fail).

I also notice that the pixel size is slightly different (see my original post), so could the problem stem from estimating where the data are grid or corner referenced? Wild guessing on my side here :) 

I have put a sample GeoTIFF file in <http://simanctel.110mb.com/tmp/MOD15A2.A2007217.h17v05.005.2007230234148.tif>, if anyone wants to give it a go (it's only 119kb).

Many thanks for your help,
Jose



-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

From warmerdam at pobox.com  Wed Aug 22 10:18:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NITF fixes
In-Reply-To: <f3b73b7d0708220129s6076ede1hd8bcf69c2ec8bf26@mail.gmail.com>
References: <46CB6E3A.4040309@perkins.net> <46CB7BCD.5030403@pobox.com>
	<f3b73b7d0708220129s6076ede1hd8bcf69c2ec8bf26@mail.gmail.com>
Message-ID: <46CC45D2.5050105@pobox.com>

Tamas Szekeres wrote:
> FYI Currently the autotest hangs on the nitf_1  test on any platform as of
> Sat Aug 18 15:00 PDT
> 
> This problem causes the python.exe gets frozen on the windows builders
> http://buildbot.osgeo.org:8500/

Tamas,

Thanks - I have applied r11923 which should resolve this issue in the work
for ticket #1751.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dadiu at ornl.gov  Wed Aug 22 17:25:17 2007
From: dadiu at ornl.gov (Dadi, Upendra)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NAD27 to WGS84
In-Reply-To: <200704020333.l323X6VD008860@duke.maptools.org>
References: <200704020333.l323X6VD008860@duke.maptools.org>
Message-ID: <BAFDB9D3D9C1DC4DAB42016A163ED23702A592F4@ORNLEXCHANGE.ornl.gov>

Hi,
  I am converting a dataset which has NAD27 as the datum to WGS84 using
gdalwarp. The dataset has the following coordinate system:

   PROJCS["Albers Conical Equal Area",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",29.5],
    PARAMETER["standard_parallel_2",45.5],
    PARAMETER["latitude_of_center",23],
    PARAMETER["longitude_of_center",-96],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]


 I issued the following command:

gdalwarp -s_srs <the above string> -t_srs EPSG:4326 conus.tif output.tif

And it worked fine.

My question is how does GDAL handle coordinate system transformation
from NAD27 to WGS84? You can see that there is no towgs84 parameter in
the projection above. I am guessing it handles NAD27 as a special case
and uses a more complex algorithm for transformation. What happens if I
add towgs84 parameter in the string? Will it overide the internal
algorithm used? Hope I am clear. 
Any insight on this is appreciated. 

Upendra


From rsignell at usgs.gov  Wed Aug 22 17:45:19 2007
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Reducing GeoTIFF color depth from 24 bit to 8 bit
Message-ID: <61033b870708221445j2d4fa176n57b7c7422bc0a2fc@mail.gmail.com>

GDAL folk,

Is is possible to use GDAL to reduce the color depth of a GeoTIFF from
24 to 8 bit?

I've looked at doc and e-mail archives for 20 minutes and haven't
found it yet - hoping someone can spend 30 seconds on the answer!

My work around is to reduce the colordepth in Irfanview, but then I
need to add the georeferencing info back in again with gdal_translate.
 This works, but there must be an easier way.   This is all because
our ship's navigation software (HYPACK) doesn't seem to like 24 bit
GeoTIFF, but 8 bit is fine.

Thanks,
Rich

-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From perrygeo at gmail.com  Wed Aug 22 17:55:35 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Reducing GeoTIFF color depth from 24 bit to 8 bit
In-Reply-To: <61033b870708221445j2d4fa176n57b7c7422bc0a2fc@mail.gmail.com>
References: <61033b870708221445j2d4fa176n57b7c7422bc0a2fc@mail.gmail.com>
Message-ID: <5383fa5e0708221455n3bc7f83dof7aab2ff9a9b8b7d@mail.gmail.com>

On 8/22/07, Rich Signell <rsignell@usgs.gov> wrote:
> Is is possible to use GDAL to reduce the color depth of a GeoTIFF from
> 24 to 8 bit?

Check out the rgb2pct.py utility.
-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From warmerdam at pobox.com  Wed Aug 22 18:25:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Reducing GeoTIFF color depth from 24 bit to 8 bit
In-Reply-To: <61033b870708221445j2d4fa176n57b7c7422bc0a2fc@mail.gmail.com>
References: <61033b870708221445j2d4fa176n57b7c7422bc0a2fc@mail.gmail.com>
Message-ID: <46CCB7E6.5070009@pobox.com>

Rich Signell wrote:
> GDAL folk,
> 
> Is is possible to use GDAL to reduce the color depth of a GeoTIFF from
> 24 to 8 bit?
> 
> I've looked at doc and e-mail archives for 20 minutes and haven't
> found it yet - hoping someone can spend 30 seconds on the answer!
> 
> My work around is to reduce the colordepth in Irfanview, but then I
> need to add the georeferencing info back in again with gdal_translate.
>  This works, but there must be an easier way.   This is all because
> our ship's navigation software (HYPACK) doesn't seem to like 24 bit
> GeoTIFF, but 8 bit is fine.

Rich,

The rgb2pct.py python script (available in FWTools builds for instance)
can be used to convert 24bit images to paletted 8bit images.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 22 18:35:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NAD27 to WGS84
In-Reply-To: <BAFDB9D3D9C1DC4DAB42016A163ED23702A592F4@ORNLEXCHANGE.ornl.gov>
References: <200704020333.l323X6VD008860@duke.maptools.org>
	<BAFDB9D3D9C1DC4DAB42016A163ED23702A592F4@ORNLEXCHANGE.ornl.gov>
Message-ID: <46CCBA37.7070706@pobox.com>

Dadi, Upendra wrote:
> My question is how does GDAL handle coordinate system transformation
> from NAD27 to WGS84? You can see that there is no towgs84 parameter in
> the projection above. I am guessing it handles NAD27 as a special case
> and uses a more complex algorithm for transformation. What happens if I
> add towgs84 parameter in the string? Will it overide the internal
> algorithm used? Hope I am clear. 
> Any insight on this is appreciated. 

Upendra,

You are correct, NAD27 is handled as a special case, and datum
shift grid files are applied.  I suspect supplying a towgs84
parameter would not be enough to stop this from happening, you would
need to completely obscure the fact that it is nad27 (but you should
still declare it as Clark 1866 ellipsoid)

Changing the GEOGCS portion to something like the following should
do the trick.

     GEOGCS["custom",
         DATUM["custom",
             SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                 AUTHORITY["EPSG","7008"]]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Wed Aug 22 18:45:00 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] NITF fixes
In-Reply-To: <46CB7BCD.5030403@pobox.com>
References: <46CB6E3A.4040309@perkins.net> <46CB7BCD.5030403@pobox.com>
Message-ID: <200708230045.01580.even.rouault@mines-paris.org>

On Wednesday 22 August 2007 01:57:01 Frank Warmerdam wrote:
> Simon Perkins wrote:
> > Just in case anybody else is also having problems with this, I just
> > checked in some fixes to the GDAL NITF format directory to get it to
> > compile under visual studio again.
> >
> > One of the problems was that some new code added earlier today in
> > nitffile.c used the strcasecmp() function, which is not available in
> > windows. I added a define that translates this to the equivalent
> > _stricmp() windows function if _MSC_VER is defined, but I wonder if
> > there's a more standard GDAL way to do this? Are these kinds of
> > incompatibilities handled by some cpl_ header file somewhere?
>
> Sy,
>
> The more common approach is to use the EQUAL() macro (which returns true
> if the strings are equal in a case insensitive way).
>
> Even, perhaps you could switch this? (assuming it was Even't recent work)
>
> Best regards,

Yes, it was in my work. It uses EQUAL now (fixed in r11930).

Best regards

From theevilpenguin at gmail.com  Wed Aug 22 19:28:45 2007
From: theevilpenguin at gmail.com (Ben Greene)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Symbian OS Port
Message-ID: <f9883380708221628o3dfd77a9l1ef5c8ad039f999e@mail.gmail.com>

I'm interested in using some of the core GDAL functionality on Symbian OS
9+, but I haven't had much experience porting c++ projects.

Can anyone recommend some good resources on the subject, or a good starting
point (possibly the Windows CE port)?
And is there anyone else that might be interested in helping with such a
project? (I will only be able to spend a few nights a week on the project).

The initial functionality I'm interested in is mainly coordinate
transformations/warping of vector data.

Thanks all,
Ben Greene
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070823/e746d99d/attachment.html
From mateusz at loskot.net  Wed Aug 22 19:57:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Symbian OS Port
In-Reply-To: <f9883380708221628o3dfd77a9l1ef5c8ad039f999e@mail.gmail.com>
References: <f9883380708221628o3dfd77a9l1ef5c8ad039f999e@mail.gmail.com>
Message-ID: <46CCCD4E.9050305@loskot.net>

Ben Greene wrote:
> I'm interested in using some of the core GDAL functionality on Symbian OS
> 9+, but I haven't had much experience porting c++ projects.

Ben,

This is an interesting idea.
This is on my TODO list, though somewhere near the end.
Anyway, I'd be interested in testing and contributing (mostly with
concepts) if time permits.

> Can anyone recommend some good resources on the subject,
> or a good starting point (possibly the Windows CE port)?

I started porting GDAL to Windows CE from CPL sub-library.
CPL is a kind of "standard multiplatform library" used inside GDAL.
So, I'd suggest to grab code from trunk/gdal/port and try to compile for
Symbian OS.

> The initial functionality I'm interested in is mainly coordinate
> transformations/warping of vector data.

I'd start with:
- CPL
- OGR (trunk/gdal/ogr excluding ogrsf_frmts)

What development platform do you use? What compiler, IDE, etc.?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Aug 22 20:58:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Symbian OS Port
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC64932BB0@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC64932BB0@rmg-server03.rmg.local>
Message-ID: <46CCDBA6.10300@loskot.net>

Ben Greene wrote:
> Mateusz Loskot wrote: 
>> Ben Greene wrote:
>>>
>>> The initial functionality I'm interested in is mainly coordinate
>>> transformations/warping of vector data.
>> I'd start with:
>> - CPL
>> - OGR (trunk/gdal/ogr excluding ogrsf_frmts)
>>
>> What development platform do you use? What compiler, IDE, etc.?
> 
> I'm currently developing for UIQ3 using Carbide C/C++ (eclipse based).
> I'm using the UIQ3 SDK compilers, which I believe are gcc based.
> I'm also interested in developing for the S60 platforms eventually, just
> my test device is UIQ3 so that's my starting point.

Ben,

Is the Carbide C/C++ free?
I may be wrong, but I've seen it's commercial software.

I have Nokia E50 with Symbian OS 3rd Edition.
Do you know if if there is any free development platform I could use?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From bgreene at rapidmap.com.au  Wed Aug 22 21:38:06 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Symbian OS Port
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64885727@rmg-server03.rmg.local>

>
>Ben Greene wrote:
>> Mateusz Loskot wrote: 
>>> Ben Greene wrote:
>>>>
>>>> The initial functionality I'm interested in is mainly coordinate
>>>> transformations/warping of vector data.
>>> I'd start with:
>>> - CPL
>>> - OGR (trunk/gdal/ogr excluding ogrsf_frmts)
>>>
>>> What development platform do you use? What compiler, IDE, etc.?
>> 
>> I'm currently developing for UIQ3 using Carbide C/C++ (eclipse
based).
>> I'm using the UIQ3 SDK compilers, which I believe are gcc based.
>> I'm also interested in developing for the S60 platforms eventually,
just
>> my test device is UIQ3 so that's my starting point.
>
>Ben,
>
>Is the Carbide C/C++ free?
>I may be wrong, but I've seen it's commercial software.
>
>I have Nokia E50 with Symbian OS 3rd Edition.
>Do you know if if there is any free development platform I could use?

Mateusz,

There are commercial versions of Carbide.c++, which provide advanced UI 
design/on-device debugging tools, but there is a free version available,
and 
the compilers are also free.

The free version of the IDE seems to have all the tools needed
(especially
for UIQ, as none of the non-free features seem to work for the platform
yet).

There should be a way to configure regular eclipse to work with the
compilers
and tools, and there are also tools for Visual Studio 2003 (no longer in
development however).

Cheers,
Ben



From monshi at home.se  Thu Aug 23 03:36:58 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Coordinate to pixel space?
Message-ID: <fajdet$lu3$1@sea.gmane.org>

This I should have asked a long time ago.

Can GDal give me a translation from the maps coordinate space to/from 
pixel space? That is if I Gdal has a dataset of a map with known 
projection and known edge coordinates.

As simple as that.

/Tomas


From k.dejong at geo.uu.nl  Thu Aug 23 06:06:35 2007
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Issues with gdal_translate / ASCII grid
Message-ID: <200708231206.35804.k.dejong@geo.uu.nl>

Hi all,

I am creating some raster files using the gdal_translate command. I
create an ASCII grid file and translate them into the PCRaster raster
format. Depending on the actual values in the ASCII grid gdal_translate
succeeds or fails. In short, an input grid with 1's fails and one with
1.0's and 10's succeeds.

Below are the inputs, the commands and the messages.
Also, reading an ASCII grid file fails if the cell size does not contain
a decimal point.

I can work around this by using different values, or adding a decimal
point to the values. Just wanted to let you know about it.

Best regards,
Kor



$ cat values.col
NCOLS 2
NROWS 3
XLLCORNER 100000.0
YLLCORNER 199850.0
CELLSIZE 50.0
NODATA_VALUE 1e31
10 10
10 10
10 10
$ gdal_translate -ot Float32 -mo "PCRASTER_VALUESCALE=VS_SCALAR" -of PCRaster 
values.col values.map
Input file size is 2, 3
3366100 - done.
$



$ cat values.col
NCOLS 2
NROWS 3
XLLCORNER 100000.0
YLLCORNER 199850.0
CELLSIZE 50.0
NODATA_VALUE 1e31
1 1
1 1
1 1
$ gdal_translate -ot Float32 -mo "PCRASTER_VALUESCALE=VS_SCALAR" -of PCRaster 
values.col values.map
ERROR 4: `values.col' not recognised as a supported file format.

GDALOpen failed - 4
`values.col' not recognised as a supported file format.
$



$ cat values.col
NCOLS 2
NROWS 3
XLLCORNER 100000
YLLCORNER 199850
CELLSIZE 50.0
NODATA_VALUE 1e31
1.0 1.0
1.0 1.0
1.0 1.0
$ gdal_translate -ot Float32 -mo "PCRASTER_VALUESCALE=VS_SCALAR" -of PCRaster 
values.col values.map
Input file size is 2, 3
3366100 - done.


-- 
Kor de Jong, k.dejong@geo.uu.nl
Fysische Geografie, Geowetenschappen, Universiteit Utrecht


From tutey at o2.pl  Thu Aug 23 06:36:00 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] ELAS not mentioned among GDAL Raster Formats?
In-Reply-To: <46C497E1.4040608@o2.pl>
References: <46C497E1.4040608@o2.pl>
Message-ID: <46CD6310.90801@o2.pl>

Maciej Sieczka wrote:

> Is there a reason why ELAS format is not mentioned on the GDAL Raster
> Formats site [1]? Or maybe just some other name is used which I don't
> know...

I'm aksing teh question again. gdalinfo claims ELAS is supported [1]
while it is not mentioned on GDAL Raster Formats site [2].

[1] $ gdalinfo --formats | grep ELAS
  ELAS (rw+): ELAS

[2]http://www.gdal.org/formats_list.html

Maciek

From monshi at home.se  Thu Aug 23 06:46:06 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Coordinate to pixel space? (C#)
In-Reply-To: <fajdet$lu3$1@sea.gmane.org>
References: <fajdet$lu3$1@sea.gmane.org>
Message-ID: <fajohh$onu$1@sea.gmane.org>

Tomas R skrev:
> This I should have asked a long time ago.
>
> Can GDal give me a translation from the maps coordinate space to/from 
> pixel space? That is if I Gdal has a dataset of a map with known 
> projection and known edge coordinates.
>
> As simple as that.
>
> /Tomas
I missed a bit of data above. The real question is if it is possible to 
get the the pixel coordinate given a projection and map data (edge 
coordinates, resolution) of a given coordinate in projection space when 
using Gdal with the C# bindings? If there exists  a function which can 
do this?

And vice versa. If I have a pixel in the map, can I call a function 
which gives me the coordinates in projection space for that pixel?


Ok, perhaps not so hard to implement myself but still, why do it if Gdal 
can?

Yours
Tomas


From warmerdam at pobox.com  Thu Aug 23 10:19:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FWTools 1.3.6 Released
Message-ID: <46CD9755.209@pobox.com>

Folks,

I have cut a new FWTools release.  This release includes a mapserver roughly
corresponding with MapServer 5.0beta5.  On Linux this includes AGG though I
still haven't gotten around to that on windows.

On windows I have now included the C# mapscript support in the build.  The
dll's are with GDAL's csharp interface dlls in the FWTools\csharp directory.

The GDAL includes the new WMS driver by Adam Nowacki and the new BNA OGR
driver by Even Rouault.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug 23 09:42:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Issues with gdal_translate / ASCII grid
In-Reply-To: <200708231206.35804.k.dejong@geo.uu.nl>
References: <200708231206.35804.k.dejong@geo.uu.nl>
Message-ID: <46CD8EBF.40701@pobox.com>

Kor de Jong wrote:
> Hi all,
> 
> I am creating some raster files using the gdal_translate command. I
> create an ASCII grid file and translate them into the PCRaster raster
> format. Depending on the actual values in the ASCII grid gdal_translate
> succeeds or fails. In short, an input grid with 1's fails and one with
> 1.0's and 10's succeeds.
> 
> Below are the inputs, the commands and the messages.
> Also, reading an ASCII grid file fails if the cell size does not contain
> a decimal point.
> 
> I can work around this by using different values, or adding a decimal
> point to the values. Just wanted to let you know about it.

Kor,

The AAIGDataset::Open() method has a check that the passed in header chunk
is at least 100 characters.   I suspect that your test files with integers
are slightly smaller than this ... is that possible?

I don't think there is any particular reason for this test and I imagine
it could be removed or reduced.  Feel free to make careful adjustments in:

  gdal/frmts/aaigrid/aaigriddataset.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug 23 09:26:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Coordinate to pixel space? (C#)
In-Reply-To: <fajohh$onu$1@sea.gmane.org>
References: <fajdet$lu3$1@sea.gmane.org> <fajohh$onu$1@sea.gmane.org>
Message-ID: <46CD8B1C.1030301@pobox.com>

Tomas R wrote:
> Tomas R skrev:
>> This I should have asked a long time ago.
>>
>> Can GDal give me a translation from the maps coordinate space to/from 
>> pixel space? That is if I Gdal has a dataset of a map with known 
>> projection and known edge coordinates.
>>
>> As simple as that.
>>
>> /Tomas
> I missed a bit of data above. The real question is if it is possible to 
> get the the pixel coordinate given a projection and map data (edge 
> coordinates, resolution) of a given coordinate in projection space when 
> using Gdal with the C# bindings? If there exists  a function which can 
> do this?
> 
> And vice versa. If I have a pixel in the map, can I call a function 
> which gives me the coordinates in projection space for that pixel?
> 
> 
> Ok, perhaps not so hard to implement myself but still, why do it if Gdal 
> can?

Tomas,

Pixel locations and georeferenced coordinates are normally related by the
affine "GeoTransform" that can be fetched using the GetGeotransform()
method on a GDALDataset.

It's use is discussed briefly in the section labelled "Affine GeoTransform"
in the data model document:

   http://www.gdal.org/gdal_datamodel.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Thu Aug 23 08:13:35 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Coordinate to pixel space? (C#)
In-Reply-To: <fajohh$onu$1@sea.gmane.org>
References: <fajdet$lu3$1@sea.gmane.org> <fajohh$onu$1@sea.gmane.org>
Message-ID: <f3b73b7d0708230513y652b238fy61ea899ec8fc0c5d@mail.gmail.com>

Tomas,

If I understand correctly your request might be the same as described in
http://trac.osgeo.org/gdal/ticket/1531

Currently you should perhaps do the affine transformation manually
using the coefficients retrieved by GetGeoTransform.

Best regards,

Tamas


2007/8/23, Tomas R <monshi@home.se>:
> Tomas R skrev:
> > This I should have asked a long time ago.
> >
> > Can GDal give me a translation from the maps coordinate space to/from
> > pixel space? That is if I Gdal has a dataset of a map with known
> > projection and known edge coordinates.
> >
> > As simple as that.
> >
> > /Tomas
> I missed a bit of data above. The real question is if it is possible to
> get the the pixel coordinate given a projection and map data (edge
> coordinates, resolution) of a given coordinate in projection space when
> using Gdal with the C# bindings? If there exists  a function which can
> do this?
>
> And vice versa. If I have a pixel in the map, can I call a function
> which gives me the coordinates in projection space for that pixel?
>
>
> Ok, perhaps not so hard to implement myself but still, why do it if Gdal
> can?
>
> Yours
> Tomas
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ron_despain at hotmail.com  Fri Aug 24 14:46:49 2007
From: ron_despain at hotmail.com (Ron DeSpain)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] gdal compile
Message-ID: <BAY117-F35F4CA5D0309C3F0090F8E87D70@phx.gbl>

I need to compile gdal 1.3.2 with Kakadu 5.2.6 on an SGI running IRIX.  Are 
there any compiling instructions that I can follow(for unix maybe?).

_________________________________________________________________
Learn.Laugh.Share. Reallivemoms is right place! 
http://www.reallivemoms.com?ocid=TXT_TAGHM&loc=us


From mauricio at open3dgis.org  Fri Aug 24 15:42:29 2007
From: mauricio at open3dgis.org (Mauricio de Paulo)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: Coordinate to pixel space?
Message-ID: <1187984549.13199.7.camel@gvatto>

Gdal gives an affine transformation of a dataset. 


//C++ gdal code to get affine transformation:
double *padfTransform = new double[6];
GDALDataset poDataset;
poDataset.Open("cbers.tif");
poDataset.GetGeoTransform (padfTransform) 
//Transforming to projection coordinates from pixel coordinates:
Xp = padfTransform[0] + P*padfTransform[1] + L*padfTransform[2];
Yp = padfTransform[3] + P*padfTransform[4] + L*padfTransform[5];


	The parameters must be set in a double[6]
	I once used the inverse affine in a program. I can get you the code but
the transformation need some recalculations and the equation is a little
too big for me to remember at the moment.

	I hope i could help
	Maur?cio de Paulo
	Cartography Engineer (In a few months :D).




From warmerdam at pobox.com  Fri Aug 24 17:08:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] A few libtiff4 changes 
Message-ID: <46CF48E4.3070306@pobox.com>

Joris / Andrey,

I made a few changes in libtiff4 to get GDAL overview and multi-directory
support working smoothly again.  These changes are now all in CVS.

This change just added a runtime check for a check that was
only an assertion before.  I don't know if it is strictly useful,
but it seemed prudent.

Index: tif_dirread.c
===================================================================
RCS file: /cvs/maptools/cvsroot/libtiff/libtiff/tif_dirread.c,v
retrieving revision 1.129
diff -r1.129 tif_dirread.c
4504a4505,4511
 >         if( fii == 0xFFFFFFFF )
 >         {
 >             TIFFErrorExt(tif->tif_clientdata, "TIFFFetchNormalTag",
 >                          "No definition found for tag %d",
 >                          dp->tdir_tag);
 >             return 0;
 >         }

This change, in _TIFFMergeFields() handled the case where a field
is defined that was already defined.  Previously an error was issued
and no fields were defined in the call.  This change only merges in
field definitions for which a definition does not already exist.
Duplicates are silently ignored.  Without this it seemed that any
multi-directory file was resulting in terrible redefinition warnings
even just with tiffinfo.

diff -r1.94 tif_dirinfo.c
333,344d332
<       for (i = 0; i < n; i++) {
<               const TIFFField *fip =
<                       TIFFFindField(tif, info[i].field_tag, TIFF_ANY);
<               if (fip) {
<       for (i = 0; i < n; i++) {
<               const TIFFField *fip =
<                       TIFFFindField(tif, info[i].field_tag, TIFF_ANY);
<               if (fip) {
<                       TIFFErrorExt(tif->tif_clientdata, module,
<                       "Field with tag %lu is already registered as \"%s\"",
<                                    (unsigned int) info[i].field_tag,
<                                    fip->field_name);
<                       return 0;
<               }
<       }
<
361a350
 >
363,364c352,361
<       for (i = 0; i < n; i++)
<               *tp++ = (TIFFField *) (info + i);       /* XXX */
---
 >       for (i = 0; i < n; i++) {
 >               const TIFFField *fip =
 >                       TIFFFindField(tif, info[i].field_tag, TIFF_ANY);
 >
 >                 /* only add definitions that aren't already present */
 >               if (!fip) {
 >                         tif->tif_fields[tif->tif_nfields] = (TIFFField *) (inf
o+i);
 >                         tif->tif_nfields++;
 >                 }
 >       }
367c364
<       qsort(tif->tif_fields, tif->tif_nfields += n,
---
 >       qsort(tif->tif_fields, tif->tif_nfields,

This change is the "real beef" I needed for GDAL.  GDAL's overview writer
creates directories for several directories for overviews, then goes back
and generates the imagery and updates the strip/tile pointers and rewrites
the directory.  The TIFFWriteDirectory() function was always writing a
"zero" next pointer instead of writing an existing valid next pointer back.
This change makes it possible to read a directory in the middle of the
chain, change something (hopefully not changing the size of the directory!)
and then write it back without disrupting the chain.

diff -r1.56 tif_dirwrite.c
784c784
<               *(uint32*)n=0;
---
 >               *(uint32*)n = tif->tif_nextdiroff;
814c814
<               *(uint64*)n=0;
---
 >               *(uint64*)n = tif->tif_nextdiroff;

With these changes GDAL overview generation seems to work fine, and in
fact the full GDAL test suite passes.  I am now inclined to migrate
libtiff4 into GDAL as it's primary working version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From klokan at klokan.cz  Fri Aug 24 18:37:34 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL2Tiles - Raster Maps Tile Publishing and KML
	Generation
Message-ID: <6e41d95b0708241537p486f9913kdbc1af0132682998@mail.gmail.com>

Hello folks,

results of my SoC project are published. Look at:

http://www.klokan.cz/projects/gdal2tiles/

Abstract:

Main issue of this project is to allow easy publishing of raster maps
on the Internet. Your raster file (like TIFF/GeoTIFF, MrSID, ECW,
JPEG2000, JPEG, PNG) is converted into a directory structure of small
PNG tiles (TMS compatible), which you can just copy to the webserver.
Simple webpages with viewers based on Google Maps and OpenLayers are
generated as well - so anybody can comfortably explore your maps
on-line and you do not need to install or configure any special
software (like mapserver) and the map displays very fast in the
webbrowser.

GDAL2Tiles generates also necessary metadata for Google Earth (KML
SuperOverlay), in case the supplied map uses EPSG:4326 projection.
Usage of gdalwarp utility is recommended for converting a raster maps
with another projection.

World files and embeded georeference is used during tile and KML
generation, but you can publish a picture without proper georeference
too.

Tile structure follows recommendation from OSGeo Tile Map Service
Specification (http://wiki.osgeo.org/index.php/Tile_Map_Service_Specification).

Now, generated tiles supports only local-profile from TMS, so they can
not be used as overlay on top of Google Maps yet, this feature is on
the TODO list.

Original idea of this project was to implement a Raster Driver for
GDAL with the same functionality, but for the purpose of SoC project
stable utility was preferred in the end. Utility prototypes the future
raster driver.

Manual page for utility is part of the solution, as well as a document
describing several existing tile structures with links to further
documentation. Analyse of rotated SuperOverlay KML is done as well.

Utility gdal2tiles.py was accepted by GDAL community (trac ticket
#1763). It is directly usable with existing stable versions of tools
(GDAL, FWTools) and it is going to be distributed as part of GDAL
tools.

Keywords: KML, generator, generate, TMS, tile map service, static
tiles, pyramid tile structure, gdal, utility, maps, raster files, web,
publish
--

Any comments/suggestions/discussion?

Klokan Petr Pridal

From wollez at gmx.net  Sat Aug 25 16:45:48 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] defragment files with gdal_translate in parallel
Message-ID: <faq4df$rtr$1@sea.gmane.org>

Hi,

I'm using gdal_translate to convert a remote dataset to a local one ;-) 
Therefore I use several tiles in parallel. The local files are heavily 
defragmented. I'm not sure if this is a WindowsXP problem or from gdal. 
I'm using FWTools 1.3.5; had anybody the same experience?

Thanks
Wolfgang


From paar at lenne3d.com  Sun Aug 26 06:38:56 2007
From: paar at lenne3d.com (Philip Paar)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] KML driver
Message-ID: <3B72483A-6DD3-49F4-AC04-03A91D871E33@lenne3d.com>

This is a summary of an email thread of Arnulf Christl, Frank  
Warmerdam, and me:
Mateusz Loskot encouraged me to discuss the following technical  
questions about KML driver on the gdal-dev list.

I wonder how KML driver support could be improved and speeded up?

Thanks to Google "Summer of Code" student, there already is a  
prototype KML feature reader support in OGR:
http://trac.osgeo.org/gdal/wiki/SoCKMLRead

The student working on it was Jens Oberender, reporting to Mateusz  
Loskot as mentor. KML feature reading has been recently implemented  
but is still in fairly rough shape.

Google has been supporting GeoServer. http://google-code- 
updates.blogspot.com/2007/08/plant-seed-watch-it-grow- 
improvements.html : "(...) The GeoServer team is very excited about  
KML becoming an OGC open standard, as GeoServer already implements  
the main OGC standards. For the testbed TOPP will build support for  
the new version of KML in to GeoServer and OpenLayers, an excellent  
AJAX mapping client. To follow and participate in the work being done  
on the next version of KML, subscribe and contribute to the ogckml  
page on del.icio.us (...)"

Should we wait for an OGC KML ("3.0") to fully support KML in OGR,  
propose another testbed (GDAL/OGR) to Google, and/ or try to push the  
KML 2.x driver?
Regards,
Philip

Lenne3D GmbH
paar@lenne3d.com
http://www.lenne3d.com

VAT ID: DE814547174
Commercial Registry: 99518B
Registration Office: Amtsgericht Berlin-Charlottenburg
Managing Director: Philip Paar





From warmerdam at pobox.com  Sun Aug 26 22:41:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] RFC 15: More Band Masks
Message-ID: <46D239BC.2090107@pobox.com>

Folks,

I've revised RFC 15 to include a CreateMaskBand() method, and a very
brief discussion of how this will be (by default) handled by a special
.msk TIFF file holding the mask.  The RFC is a bit brief on the internals
of how this will be implemented, but perhaps there is enough detail to
understand the application level implications.

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

I have the previous read-only rules and the jpeg driver code implemented,
and if there are no immediate concerns about the added CreateMaskBand()
method I'll call for a vote on the RFC late tomorrow as I'd like to get
the changes in fairly soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Mon Aug 27 05:45:55 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] osgeo.org down ?
Message-ID: <200708271145.56322.even.rouault@mines-paris.org>

Hi,

osgeo.org was painfully slow a few hours ago and now it seems completely 
down...

Best regards

From patrice.canonici at gmail.com  Mon Aug 27 07:43:34 2007
From: patrice.canonici at gmail.com (patrice canonici)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000 support
Message-ID: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>

I'm  trying to compile gdal 1.4.2 with kakadu 5.2.6 in order to use it
into mapserver.

I build kakadu successfully as it is explain in the documentation.
But, when I try to compile gdal, it fails.

I get the following error :

/bin/sh /home/pcanonici/work/MapServer/gdal-1.4.2/libtool --mode=link
 g++  ogrinfo.o /home/pcanonici/work/MapServer/gdal-1.4.2/libgdal.la
-o ogrinfo
g++ ogrinfo.o -o .libs/ogrinfo
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so
-L/usr/local/lib -lpng -L/home/pcanonici/build/cots/postgresql-gis/lib
-lpq -lrt -L/home/pcanonici/build/cots/kakadu/lib -lkdu -L/usr/lib
-lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lkrb5support -lresolv -ldl
-lnsl -lz -Wl,--rpath -Wl,/home/pcanonici/build/cots/lib -Wl,--rpath
-Wl,/usr/local/lib
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_source::access_channels()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_source::jp2_source()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::jp2_target()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_family_src::open(kdu_compressed_source*)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_source::access_palette()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_palette::get_lut(int, float*)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::~jp2_target()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `kdu_roi_rect::kdu_roi_rect(kdu_codestream, kdu_dims)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::open(jp2_family_tgt*)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::access_colour()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_family_src::close()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::access_palette()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_colour::init(jp2_colour_space)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::get_num_colours()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::write_header()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::get_colour_mapping(int, int&, int&, int&)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_output_box::close()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::set_opacity_mapping(int, int, int, int)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::open_codestream(bool)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::access_channels()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_family_tgt::open(char const*)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_palette::init(int, int)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::init(int)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_palette::get_num_luts()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_family_src::open(char const*, bool)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::get_premult_mapping(int, int&, int&,
int&)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_dimensions::init(siz_params*, bool)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_palette::get_num_entries()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_family_tgt::close()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_palette::set_lut(int, int*, int, bool)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::set_colour_mapping(int, int, int, int)'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_source::read_header()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_target::access_dimensions()'
/home/pcanonici/work/MapServer/gdal-1.4.2/.libs/libgdal.so: undefined
reference to `jp2_channels::get_opacity_mapping(int, int&, int&,
int&)'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Erreur 1
make[1]: quittant le r?pertoire ?
/home/pcanonici/work/MapServer/gdal-1.4.2/ogr ?
make: *** [ogr-apps] Erreur 2

is there a compatibility problem with gdal 1.4.2 and kakadu 5.2.6 ?
if not, what can be wrong ? what can I try ?

I configure gdal  with the following command (into another script
where $PREFIX is  set) :
./configure --prefix=$PREFIX
--with-kakadu=/home/pcanonici/build/cots/kakadu
--with-pg=/home/pcanonici/build/cots/postgresql-gis/bin/pg_config

kakadu libs are into the folder /home/pcanonici/build/cots/kakadu/lib

Note that  build without kakadu support is a success.

if you need more informations to help me, I can give it.

thx for your  help
Patrice


From dmorissette at mapgears.com  Mon Aug 27 08:41:03 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] osgeo.org down ?
In-Reply-To: <200708271145.56322.even.rouault@mines-paris.org>
References: <200708271145.56322.even.rouault@mines-paris.org>
Message-ID: <46D2C65F.3080307@mapgears.com>

Even Rouault wrote:
> Hi,
> 
> osgeo.org was painfully slow a few hours ago and now it seems completely 
> down...
> 

Even,

Note that osgeo.org is the domain and there are multiple machines and 
services in multiple locations so you need to be more specific on your 
report as to which machine/service is down.

It seems to be the main servers hosting trac and svn which are under 
very heavy load. I just did a SVN update of my MapServer source tree and 
it seemed to not be responding, but it eventually finished after +/-15 
minutes, so the machine is not completely down, just very heavily 
loaded, possibly some bots or stupid misconfigured download accelerators 
hitting it (the same happened to the dl.maptools.org server last week 
and I had to block the unfriendly address completely).

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From tutey at o2.pl  Mon Aug 27 16:53:37 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] ELAS not mentioned among GDAL Raster Formats?
In-Reply-To: <46C497E1.4040608@o2.pl>
References: <46C497E1.4040608@o2.pl>
Message-ID: <46D339D1.8030601@o2.pl>

Hi

Sorry for being a pain, but I'm asking again:

Is there a reason why ELAS format is not mentioned on the GDAL Raster
Formats site [1]? Or maybe just some other name is used which I don't
know...

[1] $ gdalinfo --formats | grep ELAS
  ELAS (rw+): ELAS

[2]http://www.gdal.org/formats_list.html

Maciek

From warmerdam at pobox.com  Mon Aug 27 17:09:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
Message-ID: <46D33D8C.7000802@pobox.com>

PSC Members,

I have slightly adapted RFC 15 and would now like to start a vote
for it's adoption.

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

+1 from me

I have a preliminary working implementation of pretty much everything in
the RFC except for gdalwarp changes, and the GRASS driver changes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rsignell at usgs.gov  Mon Aug 27 17:53:35 2007
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Proper way to load a NETCDF file in OpenEV
Message-ID: <61033b870708271453p66f7ae39n9b4f125a2aaeaef2@mail.gmail.com>

GDAL folks,

I'm having trouble figuring out the proper way to load a NetCDF file
made with GMT using OpenEV on a Windows machine.

I have a small NetCDF file "test36.grd" that I made with GMT:

       http://stellwagen.er.usgs.gov/rps/share/test36.grd

This is the "new" style GMT NetCDF file that writes a 2D
array for the "z" values.

On Linux, I just do "openev -h test36.grd", using 1.3.6 and the grid
just pops right up (sadly, upside down, but this is another issue that
has been previously discussed on this list, see:
http://tinyurl.com/2wl84j).

When I type in Open=>"c:\downloads\test36.grd" OpenEV on my PC, I get
varying behavior depending on the OpenEV version:

Version 1.1.2:  prompts me for a "subdataset selection".   I click on
"z" and the file loads and displays (although it displays upside
down).

Version 1.3.6: says "Error: Unable to open c:\downloads\test36.grd"
and I never get the prompt for the subdataset selection.

But I first use Version 1.1.2, then use Version 1.3.6, I see

NETCDF:"c:\downloads\test36.grd":z

listed under the File menu as previously opened.  And if I click on
that, the file loads and displays.

I tried to type this into the file box, but that didn't work.

Can anyone explain this behavior and the proper way to open a NetCDF
file on Windows?

Thanks,
Rich
-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From szekerest at gmail.com  Mon Aug 27 18:13:16 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
In-Reply-To: <46D33D8C.7000802@pobox.com>
References: <46D33D8C.7000802@pobox.com>
Message-ID: <f3b73b7d0708271513v454244b1rf6d8400a2bb09637@mail.gmail.com>

+1

That sounds really compelling.

Best regards,

Tamas


2007/8/27, Frank Warmerdam <warmerdam@pobox.com>:
> PSC Members,
>
> I have slightly adapted RFC 15 and would now like to start a vote
> for it's adoption.
>
>    http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>
> +1 from me
>
> I have a preliminary working implementation of pretty much everything in
> the RFC except for gdalwarp changes, and the GRASS driver changes.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu.inc at gmail.com  Mon Aug 27 18:54:32 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
In-Reply-To: <f3b73b7d0708271513v454244b1rf6d8400a2bb09637@mail.gmail.com>
References: <46D33D8C.7000802@pobox.com>
	<f3b73b7d0708271513v454244b1rf6d8400a2bb09637@mail.gmail.com>
Message-ID: <91F54E9C-E850-470A-9AB4-574110E52FD6@gmail.com>

+1  This is a great parallel extension to existing mechanisms  
(overviews), and I think ti will give us a lot of flexibility in the  
future.  If someone has some masked data that can be loaded into  
ArcSDE, please contact me and I will try to implement support for  
that driver by the 1.5 release.

Howard

On Aug 27, 2007, at 5:13 PM, Tamas Szekeres wrote:

> +1
>
> That sounds really compelling.
>
> Best regards,
>
> Tamas
>
>
> 2007/8/27, Frank Warmerdam <warmerdam@pobox.com>:
>> PSC Members,
>>
>> I have slightly adapted RFC 15 and would now like to start a vote
>> for it's adoption.
>>
>>    http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>>
>> +1 from me
>>
>> I have a preliminary working implementation of pretty much  
>> everything in
>> the RFC except for gdalwarp changes, and the GRASS driver changes.
>>
>> Best regards,
>> --
>> --------------------------------------- 
>> +--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,  
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, http:// 
>> osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Aug 27 19:03:07 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: [GDAL] #913: NITF driver fails for some CADRG tiles
In-Reply-To: <46D30F55.1090606@ionicenterprise.com>
References: <200708181907.28117.even.rouault@mines-paris.org>
	<46D30F55.1090606@ionicenterprise.com>
Message-ID: <200708280103.08890.even.rouault@mines-paris.org>

Sophia,

thanks for testing the fix for bug #913.
What's annoying is that I've just tested your file and it works fine with the 
svn version of GDAL trunk (as well as a version of GDAL 1.4.2 that I've 
patched). Just out of curiosity, I've removed the fix for bug #913 and 
another CADRG bug I've fixed, and your file is still working fine...
Even more, it is still working fine with the official GDAL 1.4.2 release. Are 
you really sure you're linking with the good GDAL library ?
I can't see other explanations for the moment.

Your first message said that the bbox displayed was not correct. I get the 
following results with GDAL svn trunk :

Corner Coordinates:
Upper Left  ( 160.3951807,  59.5397891) (160d23'42.65"E, 59d32'23.24"N)
Lower Left  ( 160.3951807,  59.0220518) (160d23'42.65"E, 59d 1'19.39"N)
Upper Right ( 161.4361446,  59.5397891) (161d26'10.12"E, 59d32'23.24"N)
Lower Right ( 161.4361446,  59.0220518) (161d26'10.12"E, 59d 1'19.39"N)
Center      ( 160.9156627,  59.2809204) (160d54'56.39"E, 59d16'51.31"N)

Best regards

On Monday 27 August 2007 19:52:21 you wrote:
> Even,
>
> I rebuilt gdal with the patch but I get an error with the attached
> file.  Here is the error I get:
>
> ERROR 3: Unable to read 6144 byte block from -16705196.
> ERROR 1: IReadBlock failed at X offset 1, Y offset 3
>
>
> I've attached the file, it is a tile from a CADRG cd.
>
> Thanks,
>
> sophia
>
> Even Rouault wrote:
> > Sophia,
> >
> > I don't know what your exact problem was, but bug #913 has just been
> > fixed in GDAL trunk subversion repository and will be available in GDAL
> > 1.5.
> >
> > See http://trac.osgeo.org/gdal/ticket/913.
> >
> > Could you check if it also solves your problem ? Thank you.
> >
> > Best regards,



From warmerdam at pobox.com  Mon Aug 27 20:20:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Proper way to load a NETCDF file in OpenEV
In-Reply-To: <61033b870708271453p66f7ae39n9b4f125a2aaeaef2@mail.gmail.com>
References: <61033b870708271453p66f7ae39n9b4f125a2aaeaef2@mail.gmail.com>
Message-ID: <46D36A35.7060702@pobox.com>

Rich Signell wrote:
> GDAL folks,
> 
> I'm having trouble figuring out the proper way to load a NetCDF file
> made with GMT using OpenEV on a Windows machine.
> 
> I have a small NetCDF file "test36.grd" that I made with GMT:
> 
>        http://stellwagen.er.usgs.gov/rps/share/test36.grd
> 
> This is the "new" style GMT NetCDF file that writes a 2D
> array for the "z" values.
> 
> On Linux, I just do "openev -h test36.grd", using 1.3.6 and the grid
> just pops right up (sadly, upside down, but this is another issue that
> has been previously discussed on this list, see:
> http://tinyurl.com/2wl84j).
> 
> When I type in Open=>"c:\downloads\test36.grd" OpenEV on my PC, I get
> varying behavior depending on the OpenEV version:
> 
> Version 1.1.2:  prompts me for a "subdataset selection".   I click on
> "z" and the file loads and displays (although it displays upside
> down).
> 
> Version 1.3.6: says "Error: Unable to open c:\downloads\test36.grd"
> and I never get the prompt for the subdataset selection.
> 
> But I first use Version 1.1.2, then use Version 1.3.6, I see
> 
> NETCDF:"c:\downloads\test36.grd":z
> 
> listed under the File menu as previously opened.  And if I click on
> that, the file loads and displays.
> 
> I tried to type this into the file box, but that didn't work.
> 
> Can anyone explain this behavior and the proper way to open a NetCDF
> file on Windows?

Rich,

The problem was introduced in an effort to support 'direct access' without
the subdataset business when there is only one subdataset.  I have fixed
this now in SVN trunk and the next FWTools release should include the
fix.  In the meantime, from the FWTools command shell you can do:

openev NETCDF:"C:\downloads\test36.grd":z

The problem is that internally the driver was not adding the quotes
around the filename, and so the drive letter confused it's effort
to parse things into sections.

Alternatively, if you can avoid using drive letters you should be
fine too.

I filed a bug at:

   http://trac.osgeo.org/gdal/ticket/1767

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Mon Aug 27 21:31:47 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
In-Reply-To: <46D33D8C.7000802@pobox.com>
References: <46D33D8C.7000802@pobox.com>
Message-ID: <46D37B03.5020509@mapgears.com>

Frank Warmerdam wrote:
> PSC Members,
> 
> I have slightly adapted RFC 15 and would now like to start a vote
> for it's adoption.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
> 

Sounds like great stuff, but I'll abstain (+0) since I live on the 
vector side of the Universe (i.e. OGR) and don't feel that I'm familiar 
enough with the raster APIs to vote on this one.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From guillaume.huby.lists at gmail.com  Tue Aug 28 03:05:49 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:51:00 2007
Subject: [Fwd: [Gdal-dev] RFC 15: More Band Masks]
In-Reply-To: <46D3C769.7090406@geosys.com>
References: <46D3C769.7090406@geosys.com>
Message-ID: <ddc797c30708280005t725850d4sc265cd2362a944b9@mail.gmail.com>

Hi Frank,

   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask


If I do not misunderstood, you wrote that mask should be of type GDT_Byte.
Why limit to GDT_Byte ? For exemple MODIS QA bands can be of type GDT_UInt16
(http://edcdaac.usgs.gov/modis/qa/mod09gq_qa_v5.asp). I know that you are
not implementing HDF yet, but if you do it in a future, you might have to
make changes to allow this. I recognize that this is a very specific case
and is not necessary for the first purposes of your project.

Thanks for your great work,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070828/563a242f/attachment.html
From christian.schaffer at muenchen.de  Tue Aug 28 07:50:37 2007
From: christian.schaffer at muenchen.de (Christian Schaffer)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
Message-ID: <46D40C0D.3090601@muenchen.de>

Hello list,

I just tried to build GDAL 1.4.2 with the --with-xerces option.
The system is x86_64
OS: Solaris 10
Xerces 2.5.0 from www.blastwave.org
# pkg-get compare xerces_c
# (From site http://mirrors.sunsite.dk/csw/unstable )
       software                    localrev                   remoterev
       xerces_c        2.5.0,REV=2004.09.12                        SAME

my configure scripts looks like this:
./configure \
--with-gif=internal     \
--with-jpeg=internal    \
--with-geotiff=internal \
--with-libtiff=internal \
--with-libz=internal    \
--with-perl \
--with-xerces \
--with-xerces-inc=/opt/csw/include \
--with-oci=/opt/oracle

The error message reads:
checking for Xerces C++... requested, but compile or link fails!

g++ -I/opt/csw/include -I/opt/csw/include/xercesc -o conftest
conftest.cpp -L/usr/lib -lxerces-c -lpthread -lpng -lpq -L/usr/lib -lpq
-lm -lrt -ldl

/opt/csw/bin/ld: warning: libm.so.1, needed by
/opt/csw/gcc3/lib/gcc/i386-pc-solaris2.8/3.4.5/../../../libstdc++.so,
may conflict with libm.so.2
/var/tmp//cckTAZ8O.o: In function `main':
conftest.cpp:(.text+0x23): undefined reference to
`xercesc_2_5::XMLUni::fgXercescDefaultLocale'
conftest.cpp:(.text+0x28): undefined reference to
`xercesc_2_5::XMLPlatformUtils::Initialize(char const*, char const*,
xercesc_2_5::PanicHandler*, xercesc_2_5::MemoryManager*)'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunHex_skip6F_b_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunIex_throw6Fpvpkn0AQstatic_type_info_pF1_v_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunIex_alloc6FI_pv_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunKex_rethrow6F_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunSregister_exit_code6FpG_v_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to `__1c2K6Fpv_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunKpure_error6F_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to `__1c2k6Fpv_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunGex_get6F_pv_'
/opt/csw/lib/libxerces-c.so: undefined reference to `c::c(n6,  (int0_t))'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunKvector_del6FpvIpF1_v_1_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunIex_clean6F_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to
`__1cG__CrunMex_rethrow_q6F_v_'
/opt/csw/lib/libxerces-c.so: undefined reference to `c::c(N6,  (int0_t))'
collect2: ld returned 1 exit status

cat conftest.cpp
#include <util/XercesDefs.hpp>
#include <util/PlatformUtils.hpp>
#if (_XERCES_VERSION >= 20200)
    XERCES_CPP_NAMESPACE_USE
#endif
int main() {  XMLPlatformUtils::Initialize(); }
configure: error: Please correct Xerces options, or don't enable Xerces.

Any help is greatly appreciated.
Thanks in advance and best regards,
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070828/c0947069/attachment.html
From ari.jolma at tkk.fi  Tue Aug 28 09:06:46 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
Message-ID: <46D41DE6.1030905@tkk.fi>

This relates to ticket #1602 (http://trac.osgeo.org/gdal/ticket/1602), 
which I opened a while ago since I'm concerned about programs (including 
interactive programs) failing with segfault since undefined variables 
are mapped to NULLs in the swig bindings and GDAL is not always prepared 
to receive NULLs as arguments. This happens at least in the case of Perl.

Mateusz has implemented object pointer checks into the C API, which 
takes care of many of these problems but not all and it is perhaps not 
sensible to make the C API bullet-proof in this sense.

I'd like to continue this work, and add more checks, probably into the 
swig bindings. I'd like to know, if other swig binding developers have 
ideas or concerns regarding this?

Cheers,

Ari



From warmerdam at pobox.com  Tue Aug 28 10:21:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Fwd: [Gdal-dev] RFC 15: More Band Masks]
In-Reply-To: <ddc797c30708280005t725850d4sc265cd2362a944b9@mail.gmail.com>
References: <46D3C769.7090406@geosys.com>
	<ddc797c30708280005t725850d4sc265cd2362a944b9@mail.gmail.com>
Message-ID: <46D42F5C.9060204@pobox.com>

guillaume huby wrote:
> Hi Frank,
> 
>        http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>     <http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask>
> 
> 
> If I do not misunderstood, you wrote that mask should be of type 
> GDT_Byte. Why limit to GDT_Byte ? For exemple MODIS QA bands can be of 
> type GDT_UInt16 ( http://edcdaac.usgs.gov/modis/qa/mod09gq_qa_v5.asp). I 
> know that you are not implementing HDF yet, but if you do it in a 
> future, you might have to make changes to allow this. I recognize that 
> this is a very specific case and is not necessary for the first purposes 
> of your project.

Guillaume,

I choose to limit the mask bands to GDT_Byte so that the applications
can depend on this.  Skimming the QA layer information I do not believe
that it would be suitable to treat *directly* as a mask band, though I
believe the HDF driver could, in theory, derive a mask band from it.
For instance, I think a mask band could be derived from the QA layer
such that QA bits of 00 or 01 mapping to 255 (valid), and 10 or 11
mapping to mask value 0 (nodata).  The QA band can of course appear as
a regular 16 bit band on the dataset (as it does now I think) and
MODIS aware application can work with the full set of bits.

In order to make mask bands reasonably easy for applications to use it
is important (I think) that they have fairly straight forward semantics.
Currently the rule is that a value of zero in the mask band means "nodata"
and any other value means "valid".  Intermediate values may have some
additional transparency or quality semantics in some cases but for simplistic
applications it is basically one bit of information per pixel.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Aug 28 10:29:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
In-Reply-To: <46D41DE6.1030905@tkk.fi>
References: <46D41DE6.1030905@tkk.fi>
Message-ID: <46D43149.2060605@pobox.com>

Ari Jolma wrote:
> This relates to ticket #1602 (http://trac.osgeo.org/gdal/ticket/1602), 
> which I opened a while ago since I'm concerned about programs (including 
> interactive programs) failing with segfault since undefined variables 
> are mapped to NULLs in the swig bindings and GDAL is not always prepared 
> to receive NULLs as arguments. This happens at least in the case of Perl.
> 
> Mateusz has implemented object pointer checks into the C API, which 
> takes care of many of these problems but not all and it is perhaps not 
> sensible to make the C API bullet-proof in this sense.
> 
> I'd like to continue this work, and add more checks, probably into the 
> swig bindings. I'd like to know, if other swig binding developers have 
> ideas or concerns regarding this?

Ari,

Can you provide more information on the kinds of input validation you
would like to see added, and the rationale?  I think one of the examples
you gave was passing in NULL strings where they are required.

Some kind of argument checking, for instance passing in an unsupported
resampling type when building overviews, would seem to be best checked
in the appropriate C++ methods and a runtime error reported.

NULL objects seemed to me to be best checked for the C wrappers which
we have done.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Tue Aug 28 10:16:34 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
In-Reply-To: <46D33D8C.7000802@pobox.com>
References: <46D33D8C.7000802@pobox.com>
Message-ID: <20070828141634.GA26415@ak4719.spb.edu>

On Mon, Aug 27, 2007 at 05:09:32PM -0400, Frank Warmerdam wrote:
> I have slightly adapted RFC 15 and would now like to start a vote
> for it's adoption.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Tue Aug 28 11:39:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Adopt RFC 15 (Band Masks)
In-Reply-To: <20070828141634.GA26415@ak4719.spb.edu>
References: <46D33D8C.7000802@pobox.com>
	<20070828141634.GA26415@ak4719.spb.edu>
Message-ID: <46D441AC.8050409@pobox.com>

Andrey Kiselev wrote:
> On Mon, Aug 27, 2007 at 05:09:32PM -0400, Frank Warmerdam wrote:
>> I have slightly adapted RFC 15 and would now like to start a vote
>> for it's adoption.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
> 
> +1

Folks,

OK, with votes from all PSC members, and +1's from Andrey, Tamas,
Howard and myself this motion passes.  I shall commence committing!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Tue Aug 28 12:32:17 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
In-Reply-To: <46D43149.2060605@pobox.com>
References: <46D41DE6.1030905@tkk.fi> <46D43149.2060605@pobox.com>
Message-ID: <46D44E11.6050505@tkk.fi>

Frank Warmerdam kirjoitti:
> Can you provide more information on the kinds of input validation you
> would like to see added, and the rationale?  I think one of the examples
> you gave was passing in NULL strings where they are required.

Here's a list. The NULL strings and object pointers cause problems. The 
rationale is that an interpreted language should never segfault.

Regards,

Ari

-- MajorObject.SetDescription

If  pszNewDesc == NULL the application terminates (in Windows) with:

"This application has requested the Runtime to terminate it in an 
unusual way.
Please contact the application's support team for more information."

i.e. it does issue a normal error

-- Band.ComputeBandStats

setting nSampleStep == 0 causes an eternal loop

-- OGR::Datasource.TestCapability

segfault if pszCap == NULL

-- OGR::Datasource.ExecuteSQL

segfault if pszStatement == NULL

-- OGR::Layer.CreateFeature (separate for each driver, I'm testing MEM)

segfault if poFeature == NULL

-- OGR::Layer.TestCapability

segfault if pszCap == NULL

-- OGR::Layer.CreateField

segfault if poField == NULL

-- OGR::FeatureDefn.AddFieldDefn

segfault if poNewDefn == NULL

-- OGR::Geometry.* GEOS methods (at least Intersection, Disjoint, Overlaps)

segfault if poOtherGeom == NULL

-- OGR::Geometry.Transform

segfault if hTransform == NULL

-- OSR.GetWellKnownGeogCSAsWKT (OSRSetWellKnownGeogCS)

segfault if pszName == NULL

-- OSRSetFromUserInput

segfault if pszDefinition == NULL

-- OSR.GetProjectionMethodParameterList
-- OSR.GetProjectionMethodParamInfo

segfault if pszProjectionMethod == NULL

-- OSR::SpatialReference.GetAttrValue, SetAttrValue, GetProjParm, 
SetNormProjParm, GetNormProjParm, SetWellKnownGeogCS, SetFromUserInput

segfault if pszNodeName == NULL

-- OSR::SpatialReference.ExportToUSGS

segfault is piProjSys == NULL

>
> Some kind of argument checking, for instance passing in an unsupported
> resampling type when building overviews, would seem to be best checked
> in the appropriate C++ methods and a runtime error reported.
>
> NULL objects seemed to me to be best checked for the C wrappers which
> we have done.
>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ron_despain at hotmail.com  Tue Aug 28 12:32:40 2007
From: ron_despain at hotmail.com (Ron DeSpain)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] gdal and Kakadu on SGI
Message-ID: <BAY117-F24B733DB262C12EA20890B87D30@phx.gbl>

I can't figure out how to link kakadu (4.5) to gdal (1.4.2) when compiling 
them on an SGI running IRIX

Ron DeSpain

_________________________________________________________________
Puzzles, trivia teasers, word scrambles and more. Play for your chance to 
win! http://club.live.com/home.aspx?icid=CLUB_hotmailtextlink


From warmerdam at pobox.com  Tue Aug 28 13:30:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
In-Reply-To: <46D44E11.6050505@tkk.fi>
References: <46D41DE6.1030905@tkk.fi> <46D43149.2060605@pobox.com>
	<46D44E11.6050505@tkk.fi>
Message-ID: <46D45BA3.4070005@pobox.com>

Ari Jolma wrote:
> -- MajorObject.SetDescription

Ari,

For the many string arguments that are required to be non-NULL,
can we have a swig typemap for "non-null-string" arguments
to catch this?

> -- Band.ComputeBandStats
> 
> setting nSampleStep == 0 causes an eternal loop

The C++ ComputeBandStats() code should validate this
parameter and issue a runtime error for dangerous values.

> -- OGR::Layer.CreateField
> 
> segfault if poField == NULL

Isn't this sort of problem handled by the object-null testing
that was put in place?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue Aug 28 14:07:25 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Different projection results between gdalwarp and
	gdal python bindings
In-Reply-To: <46CAED99.6050102@pobox.com>
References: <20070821103607.290980@gmx.net> <46CAED99.6050102@pobox.com>
Message-ID: <46D4645D.5020209@gov.yk.ca>

Frank said:
> I have reviewed the code used in gdalwarp, and in
> CreateAndReprojectImage() and while their internal implementation is
> slightly different it isn't clear to me why they would come up with
> different results.
> 
> I've tried reproducing your problem with FWTools 1.3.4 on linux but
> the results match exactly.
> 
> I suspect some sort of subtle difference in the environment variables
> or GDAL library version between the gdalwarp and python case.

I wonder if there might be some strange connection between Jose's bug 
and the one I fell over where win32 fwtools' gdalwarp does not maintain 
source projection info? http://trac.osgeo.org/gdal/ticket/1471

Jose: please try using win32 fwtools 1.06 or earlier. That is the last 
known version where gdalwarp retains the projection info (for me).


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From wef1 at cec.wustl.edu  Tue Aug 28 14:40:14 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] problems compiling gdal with xerces
Message-ID: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>

Hi List, I'm having some problems compiling gdal with xerces support.

Using xerces veresion 2.7.0 on Redhat.

I compile xerces from notes at:
http://xml.apache.org/xerces-c/build-winunix.html#UNIX

set environment variable
runConfigure -plinux -cgcc -xg++ -minmem -nsocket -tnative -rpthread
gmake

Then I go to gdal version 1.4.2 and compile with:
./configure CFLAGS=-fPIC CPPFLAGS=-fPIC CXXFLAGS=-fPIC --with-ogr
--without-python --with-xerces
make

Eventually I get:
 g++ -Wall -fPIC -I/usr/local/include/xercesc
-I/usr/local/include/xercesc/xercesc -DOGR_ENABLED -fPIC
-I/usr/local/src/gdal-1.4.2/port -I.. -c iom_attr.cpp  -fPIC -DPIC -o
../../o/.libs/iom_attr.o
In file included from iom_attr.cpp:26:
../iom/iom_p.h:43:55: xercesc/framework/LocalFileFormatTarget.hpp: No such
file or directory
In file included from iom_attr.cpp:26:
../iom/iom_p.h:68: error: expected constructor, destructor, or type
conversion before "class"
../iom/iom_p.h:89: error: `XmlWrtAttr' has not been declared
../iom/iom_p.h:89: error: ISO C++ forbids declaration of `attrv' with no
type
../iom/iom_p.h: In destructor `StrX::~StrX()':
../iom/iom_p.h:732: error: `release' is not a member of `XMLString'
../iom/iom_p.h: In destructor `XStr::~XStr()':
../iom/iom_p.h:777: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `const char* iom_getattrname(iom_object*, int)':
iom_attr.cpp:44: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getattrvalue(iom_object*, const
char*)':
iom_attr.cpp:67: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getattrvalueUTF8(iom_object*, const
char*)':
iom_attr.cpp:85: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `void iom_setattrvalueUTF8(iom_object*, const
char*, const char*)':
iom_attr.cpp:114: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getattrprim(iom_object*, const char*,
int)':
iom_attr.cpp:135: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getattrprimUTF8(iom_object*, const
char*, int)':
iom_attr.cpp:151: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `const char* iom_getxmleleattrname(iom_object*,
int)':
iom_attr.cpp:225: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getxmleleprim(iom_object*, int)':
iom_attr.cpp:249: error: `release' is not a member of `XMLString'
iom_attr.cpp: In function `char* iom_getxmleleprimUTF8(iom_object*, int)':
iom_attr.cpp:266: error: `release' is not a member of `XMLString'
make[4]: *** [../../o/iom_attr.o] Error 1
make[4]: Leaving directory `/usr/local/src/gdal-1.4.2
/ogr/ogrsf_frmts/ili/iom'
make[3]: *** [iom-target] Error 2
make[3]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr/ogrsf_frmts/ili'
make[2]: *** [ili-target] Error 2
make[2]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr'
make: *** [ogr-target] Error 2
[root@niceguy gdal-1.4.2]# ls /usr/local/include/xercesc


I have tried with XERCESCROOT="/usr/local/src/xerces-c-src_2_7_0/src"
and XERCESCROOT="/usr/local/src/xerces-c-src_2_7_0/"
as with various configuration options on gdal for include directory, etc.
but no idea what they should be set to.

The first missing file: xercesc/framework/LocalFileFormatTarget.hpp is
indeed located at:
/usr/local/src/xerces-c-src_2_7_0/src/xercesc/framework

I'm so close to finishing what I need!  does anyone have any ideas what's
causing this or how to get around it?

Thanks!
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070828/d0e95390/attachment.html
From ari.jolma at tkk.fi  Tue Aug 28 15:37:21 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
In-Reply-To: <46D45BA3.4070005@pobox.com>
References: <46D41DE6.1030905@tkk.fi> <46D43149.2060605@pobox.com>
	<46D44E11.6050505@tkk.fi> <46D45BA3.4070005@pobox.com>
Message-ID: <46D47971.40603@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> -- MajorObject.SetDescription
>
> Ari,
>
> For the many string arguments that are required to be non-NULL,
> can we have a swig typemap for "non-null-string" arguments
> to catch this?

hmm, probably yes

>
>> -- Band.ComputeBandStats
>>
>> setting nSampleStep == 0 causes an eternal loop
>
> The C++ ComputeBandStats() code should validate this
> parameter and issue a runtime error for dangerous values.

I'll post a ticket of this

>
>> -- OGR::Layer.CreateField
>>
>> segfault if poField == NULL
>
> Isn't this sort of problem handled by the object-null testing
> that was put in place?

apparently not, ogrlayer.cpp:454 would need a VALIDATE_POINTER, I'll 
make a ticket of that too

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Tue Aug 28 17:20:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] gdal and Kakadu on SGI
In-Reply-To: <BAY117-F24B733DB262C12EA20890B87D30@phx.gbl>
References: <BAY117-F24B733DB262C12EA20890B87D30@phx.gbl>
Message-ID: <46D491AB.7040403@pobox.com>

Ron DeSpain wrote:
> I can't figure out how to link kakadu (4.5) to gdal (1.4.2) when 
> compiling them on an SGI running IRIX

Ron,

I'm working on instructions to use Kakadu 6 on the wiki:

   http://trac.osgeo.org/gdal/wiki/JP2KAK

It is currently not accurate but I'm working on it today.  That
may provide some guideance, but of course I'm sure there are IRIX and
Kakadu 5.2 specific issues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Wed Aug 29 06:18:28 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Testing arguments in the swig-bindings
In-Reply-To: <46D45BA3.4070005@pobox.com>
References: <46D41DE6.1030905@tkk.fi> <46D43149.2060605@pobox.com>
	<46D44E11.6050505@tkk.fi> <46D45BA3.4070005@pobox.com>
Message-ID: <46D547F4.5020607@tkk.fi>

Frank Warmerdam wrote:
>
> For the many string arguments that are required to be non-NULL,
> can we have a swig typemap for "non-null-string" arguments
> to catch this?

For example for MajorObject.SetDescription this would be (the %apply and 
%clear):

  %apply (char *non_null_input) {const char *pszNewDesc};
  void SetDescription( const char *pszNewDesc ) {
    GDALSetDescription( self, pszNewDesc );
  }
  %clear const char *pszNewDesc;

and the actual typemap in the Perl case would be

%typemap(in) (char *non_null_input)
{
  /* %typemap(in) (char *non_null_input) */
  if (!$1) {
    croak("argument must not be null");
    SWIG_fail; 
  }
}

This simple typemap could perhaps be language-independent, I don't know.

Since introduction of new typemaps need to be done in concert for all 
bindings, we need some kind of procedure. Any ideas for this? Two things 
need to be agreed: 1) do we need this typemap 2) where we will apply it.

Ari



From jbeiko at pyxisinnovation.com  Wed Aug 29 10:53:19 2007
From: jbeiko at pyxisinnovation.com (Jeff Beiko)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL WCS Driver
Message-ID: <loom.20070829T164220-613@post.gmane.org>

Hello, 

I'm having problems getting the WCS functionality working in GDAL under C++. 
Are there any good tutorials?

I have downloaded GDAL and CURL and have successfully built them and have 
included the WCS functionality by having the following lines in nmake.opt:

# Uncomment to use libcurl (for WCS)
CURL_DIR=C:\libcurl-7.15.1
CURL_INC = -I$(CURL_DIR)/include 
CURL_LIB = $(CURL_DIR)/libcurl_imp.lib


I have set up my includes and lib paths in my MSVC project. I can confirm that 
the WCS Driver is in fact being loaded; a valid object is returned from:

GDALDriverH driverIsLoaded = GDALGetDriverByName( "WCS" );


However, when I try to retrieve WCS Data using a command like:

poDataset = (GDALDataset *) GDALOpen(fileName.c_str(), GA_ReadOnly);

...Where the file contains xml similar to the xml below, I always get a null 
pointer back and the error message:

ERROR 4: (the full xml...) does not exist in the file system, and is not 
recognized as a supported dataset name.

<?xml version="1.0" encoding="UTF-8"?> 
<WCS_GDAL>
<ServiceURL>http://geodata.telascience.org/cgi-bin/mapserv_dem?</ServiceURL>
<CoverageName>srtmplus_raw</CoverageName>
<Timeout>75</Timeout>
</WCS_GDAL>

I also try just passing GDALOpen the straight XML also.

Any help would be enormously appreciated.
Thank you,
~Jeff



From warmerdam at pobox.com  Wed Aug 29 12:35:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FOSS4G Bug Squash
Message-ID: <46D5A038.4080700@pobox.com>

Folks,

Friday September 28th in Victoria (the day after FOSS4G 2007 closing events)
there will be a big room with tables, chairs and internet connectivity provided
by the committee for a "code sprint day" for interested projects.

A code sprint is a fairly specific technique to implement software in an
intense, focused and planned way by a team of developers in one place.  I'm
not sure I am up to planning an effective code sprint for the GDAL project
for that day, so instead I'd like to propose a less formal event - a
"Bug Squash".

That is, all interested developers and users would assemble and through the
day we would try to fix as many open bugs (and perhaps even some news bugs
discovered during the event) as we can.

The GDAL 1.5.0 release is coming up (a bit later than my original plan),
and my thinking is that I would arrange a first 1.5 beta before FOSS4G,
and that we would have another beta released at the end of our bug squash
day leading up to a final GDAL 1.5 release in early October.

The FOSS4G 2007 Code Sprint page can be found at:

   http://wiki.osgeo.org/index.php/FOSS4G2007_CodeSprint

I'm proposing to create a GDAL specific bug squash page at:

   http://trac.osgeo.org/gdal/wiki/BugSquash2007

I'd appreciate people adding themselves to that Trac wiki page if they are
interested in attending.  I'll try and fill in more details as well.

A few other notes:

  o I think it would be good to have some people not in the room participating
    to some degree via IRC, though obviously being there is better.

  o I'd like to produce a set of "GDAL Team" t-shirts which we could give
    to participants that day (another email to follow) and I'd also like to
    provide food for participants (pizza?, lunch out?).

  o A number of other projects will also be doing activities in the same big
    room.  While that may be a bit chaotic, I think it will be a great
    opportunity for some cross-project efforts.

A day of hacking and fun, uninterrupted by presentations or speeches - the
perfect un-conference!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From cavicchi at ferrara.linux.it  Wed Aug 29 13:05:22 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] HFD support?
Message-ID: <46D5A752.6060703@ferrara.linux.it>

Hi to all,
In this days i must to work with some HDF4/5 images from Modis. 
Unfortunately, GDAL don't supports this format.
So i must to ask if, sooner or later, GDAL will support HDF.

Tnx.

PS: i'm always so sorry for my english.
-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From szekerest at gmail.com  Wed Aug 29 13:10:47 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FOSS4G Bug Squash
In-Reply-To: <46D5A038.4080700@pobox.com>
References: <46D5A038.4080700@pobox.com>
Message-ID: <f3b73b7d0708291010y75cba16m5410fd550c17c589@mail.gmail.com>

Frank,

We've already a session planned with Ari mainly for discovering the
discepancies among the various SWIG bindings and trying to push the
wagon into the same directions as much as it possible. From this
aspect we might want to collect the other areas where some conceptual
decisions should also be made interactively.

It seems I'm interested is more than one session but unfortunately I
can be only in one place at the same time ;-)

Best regards,

Tamas



2007/8/29, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> Friday September 28th in Victoria (the day after FOSS4G 2007 closing events)
> there will be a big room with tables, chairs and internet connectivity provided
> by the committee for a "code sprint day" for interested projects.
>
> A code sprint is a fairly specific technique to implement software in an
> intense, focused and planned way by a team of developers in one place.  I'm
> not sure I am up to planning an effective code sprint for the GDAL project
> for that day, so instead I'd like to propose a less formal event - a
> "Bug Squash".
>
> That is, all interested developers and users would assemble and through the
> day we would try to fix as many open bugs (and perhaps even some news bugs
> discovered during the event) as we can.
>
> The GDAL 1.5.0 release is coming up (a bit later than my original plan),
> and my thinking is that I would arrange a first 1.5 beta before FOSS4G,
> and that we would have another beta released at the end of our bug squash
> day leading up to a final GDAL 1.5 release in early October.
>
> The FOSS4G 2007 Code Sprint page can be found at:
>
>    http://wiki.osgeo.org/index.php/FOSS4G2007_CodeSprint
>
> I'm proposing to create a GDAL specific bug squash page at:
>
>    http://trac.osgeo.org/gdal/wiki/BugSquash2007
>
> I'd appreciate people adding themselves to that Trac wiki page if they are
> interested in attending.  I'll try and fill in more details as well.
>
> A few other notes:
>
>   o I think it would be good to have some people not in the room participating
>     to some degree via IRC, though obviously being there is better.
>
>   o I'd like to produce a set of "GDAL Team" t-shirts which we could give
>     to participants that day (another email to follow) and I'd also like to
>     provide food for participants (pizza?, lunch out?).
>
>   o A number of other projects will also be doing activities in the same big
>     room.  While that may be a bit chaotic, I think it will be a great
>     opportunity for some cross-project efforts.
>
> A day of hacking and fun, uninterrupted by presentations or speeches - the
> perfect un-conference!
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ivan.lucena at pmldnet.com  Wed Aug 29 13:51:04 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] HFD support?
In-Reply-To: <46D5A752.6060703@ferrara.linux.it>
References: <46D5A752.6060703@ferrara.linux.it>
Message-ID: <46D5B208.8030501@pmldnet.com>

Hi Mario,

GDAL does support Hdf 4 and 5. See:

http://www.gdal.org/formats_list.html
http://www.gdal.org/frmt_hdf4.html
http://www.gdal.org/frmt_hdf5.html

If you can't see it by running:

gdalinfo --formats

Is because the way your GDAL package was build.

HDF support is optional and requires the HDF4/5 dynamic libraries from 
hdfgroup.org.

I think you should try the FWTools from maptools.org. It comes with a 
pre-compiled GDAL distribution that support HDF4 and HDF5.

Ciao,

Ivan

Mario Cavicchi wrote:
> Hi to all,
> In this days i must to work with some HDF4/5 images from Modis. 
> Unfortunately, GDAL don't supports this format.
> So i must to ask if, sooner or later, GDAL will support HDF.
> 
> Tnx.
> 
> PS: i'm always so sorry for my english.

From wef1 at cec.wustl.edu  Wed Aug 29 14:45:12 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: problems compiling gdal with xerces
In-Reply-To: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>
References: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>
Message-ID: <f4c7e92f0708291145s6bf0dd5bu6ea45327193bb1fd@mail.gmail.com>

Bit of an update, i found one combination of options to pass this error, but
now I move right onto:

using configuration:
./configure CFLAGS=-fPIC CPPFLAGS=-fPIC CXXFLAGS=-fPIC --with-ogr
--without-python --with-xerces=/usr/local/src/xerces-c-src_2_7_0


I get:
g++ ogrinfo.o -o .libs/ogrinfo  /usr/local/src/gdal-1.4.2/.libs/libgdal.so
-L/usr/local/lib -L/usr/local/src/xerces-c-src_2_7_0/lib -lxerces-c
-lpthread -lrt -L/usr/lib64 -lcurl -L/usr/kerberos/lib -L/usr/kerberos/lib64
-lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz
-Wl,--rpath -Wl,/usr/lib64
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to `typeinfo
for XMLEntityDecl'
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to
`XMLString::transcode(char const*)'
/usr/local/src/gdal- 1.4.2/.libs/libgdal.so: undefined reference to
`SAX2XMLReaderImpl::SAX2XMLReaderImpl()'
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to `typeinfo
for SAXParseException'
/usr/local/src/gdal- 1.4.2/.libs/libgdal.so: undefined reference to
`SAXParseException::SAXParseException(SAXParseException const&)'
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to `typeinfo
for XMLException'
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to
`XMLEntityDecl::~XMLEntityDecl()'
/usr/local/src/gdal-1.4.2/.libs/libgdal.so: undefined reference to
`XMLPlatformUtils::Initialize()'
/usr/local/src/gdal- 1.4.2/.libs/libgdal.so: undefined reference to
`SAXParseException::~SAXParseException()'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/usr/local/src/gdal-1.4.2 /ogr'
make: *** [ogr-apps] Error 2


:( I'm so close! Any ideas?

-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070829/66da4204/attachment.html
From warmerdam at pobox.com  Wed Aug 29 14:59:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FOSS4G Bug Squash
In-Reply-To: <f3b73b7d0708291010y75cba16m5410fd550c17c589@mail.gmail.com>
References: <46D5A038.4080700@pobox.com>
	<f3b73b7d0708291010y75cba16m5410fd550c17c589@mail.gmail.com>
Message-ID: <46D5C223.9020004@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> We've already a session planned with Ari mainly for discovering the
> discepancies among the various SWIG bindings and trying to push the
> wagon into the same directions as much as it possible. From this
> aspect we might want to collect the other areas where some conceptual
> decisions should also be made interactively.
> 
> It seems I'm interested is more than one session but unfortunately I
> can be only in one place at the same time ;-)

Tamas,

The good thing is that with the various sprint activities in the same
room, and with the GDAL "bug squash" being relatively informal, things
should remain fairly flexible.  Was the planned activity specifically for
GDAL bindings, or also Mapserver, GEOS, etc?

In any event, I don't think these are incompatible activities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 29 15:01:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] HFD support?
In-Reply-To: <46D5A752.6060703@ferrara.linux.it>
References: <46D5A752.6060703@ferrara.linux.it>
Message-ID: <46D5C27E.7030400@pobox.com>

Mario Cavicchi wrote:
> Hi to all,
> In this days i must to work with some HDF4/5 images from Modis. 
> Unfortunately, GDAL don't supports this format.
> So i must to ask if, sooner or later, GDAL will support HDF.

Mario,

GDAL does support HDF4 and HDF5 including some (many?) MODIS products.
However, HDF format is complicated and there are various caveats, including
the fact that HDF support in GDAL is optional since it depends on external
libraries.

The FWTools builds of GDAL do include HDF4 and (I think) HDF5.  Perhaps
you could check your files with that?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 29 15:17:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL WCS Driver
In-Reply-To: <loom.20070829T164220-613@post.gmane.org>
References: <loom.20070829T164220-613@post.gmane.org>
Message-ID: <46D5C63C.1080903@pobox.com>

Jeff Beiko wrote:
> Hello, 
> 
> I'm having problems getting the WCS functionality working in GDAL under C++. 
> Are there any good tutorials?
> 
> I have downloaded GDAL and CURL and have successfully built them and have 
> included the WCS functionality by having the following lines in nmake.opt:
> 
> # Uncomment to use libcurl (for WCS)
> CURL_DIR=C:\libcurl-7.15.1
> CURL_INC = -I$(CURL_DIR)/include 
> CURL_LIB = $(CURL_DIR)/libcurl_imp.lib
> 
> 
> I have set up my includes and lib paths in my MSVC project. I can confirm that 
> the WCS Driver is in fact being loaded; a valid object is returned from:
> 
> GDALDriverH driverIsLoaded = GDALGetDriverByName( "WCS" );
> 
> 
> However, when I try to retrieve WCS Data using a command like:
> 
> poDataset = (GDALDataset *) GDALOpen(fileName.c_str(), GA_ReadOnly);
> 
> ...Where the file contains xml similar to the xml below, I always get a null 
> pointer back and the error message:
> 
> ERROR 4: (the full xml...) does not exist in the file system, and is not 
> recognized as a supported dataset name.
> 
> <?xml version="1.0" encoding="UTF-8"?> 
> <WCS_GDAL>
> <ServiceURL>http://geodata.telascience.org/cgi-bin/mapserv_dem?</ServiceURL>
> <CoverageName>srtmplus_raw</CoverageName>
> <Timeout>75</Timeout>
> </WCS_GDAL>
> 
> I also try just passing GDALOpen the straight XML also.

Jeff,

As stated in http://www.gdal.org/frmt_wcs.html it is important that
*nothing* appear before the <WCS_GDAL> tag, including an xml version
element. I suspect that is what is messing you up.

I'd add that the srtmplus server is not running now as
geodata.telascience.org seems to be down, so I hope you aren't
testing against it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 29 15:38:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Funding for TShirts and Bug Squash 
Message-ID: <46D5CB2C.6030609@pobox.com>

Motion: To authorize Frank Warmerdam to spend up to $650USD on purchasing
50 "Team GDAL" tshirts, and to authorize Frank Warmerdam to spend up to
$350 on food and refreshments for "GDAL FOSS4G Bug Squash" event.

--

I would like use sponsorship funds to support our bug squash with food and
refreshments.

I'd also like to use some of it to purchase T-shirts for participants in
the bug squash, and to give to other developers, supporters, opinion
leaders and cronies.  I'll send another email with more detailed thoughts
on the shirts.

I think of both as "high leverage" uses of the funds to support fun
community type stuff around GDAL/OGR.

By my computations this expenditure fits in our budget.  By the way,
we have (contrary to my incorrect "from memory" estimate on mapserver-dev)
collected $29500 in sponsorship so far, giving us $22125 to spend - a
modest portion of which has been spent on the first development
contract with Matuesz (final invoice not yet in).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Wed Aug 29 15:41:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Funding for TShirts and Bug Squash 
In-Reply-To: <46D5CB2C.6030609@pobox.com>
References: <46D5CB2C.6030609@pobox.com>
Message-ID: <6247876F-D9A5-473F-BA77-A0CE8183B6A9@gmail.com>

+1.

On Aug 29, 2007, at 2:38 PM, Frank Warmerdam wrote:

> Motion: To authorize Frank Warmerdam to spend up to $650USD on  
> purchasing
> 50 "Team GDAL" tshirts, and to authorize Frank Warmerdam to spend  
> up to
> $350 on food and refreshments for "GDAL FOSS4G Bug Squash" event.
>
> --
>
> I would like use sponsorship funds to support our bug squash with  
> food and
> refreshments.
>
> I'd also like to use some of it to purchase T-shirts for  
> participants in
> the bug squash, and to give to other developers, supporters, opinion
> leaders and cronies.  I'll send another email with more detailed  
> thoughts
> on the shirts.
>
> I think of both as "high leverage" uses of the funds to support fun
> community type stuff around GDAL/OGR.
>
> By my computations this expenditure fits in our budget.  By the way,
> we have (contrary to my incorrect "from memory" estimate on  
> mapserver-dev)
> collected $29500 in sponsorship so far, giving us $22125 to spend - a
> modest portion of which has been spent on the first development
> contract with Matuesz (final invoice not yet in).
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Aug 29 16:17:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
Message-ID: <46D5D452.5000504@pobox.com>

Folks,

So as mentioned in another email, I'd like to produce a set of "GDAL Team"
t-shirts, some of which could be distributed at FOSS4G.  I'm thinking
along the lines of:

Front
-----

Fairly small on the left breast:

Team GDAL
<GDAL logo>


Back
----

GDAL/OGR 1.5.0
September 2007

<osgeo logo>

An OSGeo Project

---

Of course, I'm not very creative, as you can see.

I also think it would be cool to have a code name for the 1.5.0 release.
Sort of like the latest Ubuntu is Feisty Faun or the latest FME was the
"Go Bananas" release.  My ideas have run to bush-life - "Blackfly" or
"Lumberjack". :-)  Perhaps a bad idea...

Thoughts, ideas?  Anyone want to be "shirts person" getting the graphics
together and working with a shirt producer?  We have rather a short
timeline to get them produced cheaply.  I'm hoping for roughly $10/shirt.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed Aug 29 16:02:07 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Funding for TShirts and Bug Squash
In-Reply-To: <46D5CB2C.6030609@pobox.com>
References: <46D5CB2C.6030609@pobox.com>
Message-ID: <46D5D0BF.4020603@mapgears.com>

Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to spend up to $650USD on purchasing
> 50 "Team GDAL" tshirts, and to authorize Frank Warmerdam to spend up to
> $350 on food and refreshments for "GDAL FOSS4G Bug Squash" event.
> 

+1

... and the next logical question is design.... is there already a 
design for the shirts? You won't simply put "Team GDAL" in large black 
characters on the shirt, right?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From szekerest at gmail.com  Wed Aug 29 17:45:54 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Funding for TShirts and Bug Squash
In-Reply-To: <46D5D0BF.4020603@mapgears.com>
References: <46D5CB2C.6030609@pobox.com> <46D5D0BF.4020603@mapgears.com>
Message-ID: <f3b73b7d0708291445i5e63a9b0n35463205587a0eee@mail.gmail.com>

+1




2007/8/29, Daniel Morissette <dmorissette@mapgears.com>:

> ... and the next logical question is design.... is there already a
> design for the shirts? You won't simply put "Team GDAL" in large black
> characters on the shirt, right?
>

I think we have a logo out there that should also be included.

Best regards,

Tamas

From list67 at netscape.net  Wed Aug 29 18:27:15 2007
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL SRTM hgt code
Message-ID: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>

Has anyone added code to GDAL so that a SRTM (1 or 3 arcsecond) hgt 
file can be passed to GDALOpen(...) for use?

I did some searching and noticed that there are some format conversion 
workarounds for using the SRTM files with GDAL, but I didn't find any 
info about wether or not a more direct open capability had been 
implemented?

Thank you.

    Mike
________________________________________________________________________
Check Out the new free AIM(R) Mail -- Unlimited storage and 
industry-leading spam and email virus protection.

From ari.jolma at tkk.fi  Thu Aug 30 02:00:42 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FOSS4G Bug Squash
In-Reply-To: <46D5C223.9020004@pobox.com>
References: <46D5A038.4080700@pobox.com>
	<f3b73b7d0708291010y75cba16m5410fd550c17c589@mail.gmail.com>
	<46D5C223.9020004@pobox.com>
Message-ID: <46D65D0A.8070907@tkk.fi>

I don't mind thinking the SWIG bindings session a part of the GDAL bug 
squash, especially if it includes free t-shirts and free food :)

I've not directly worked with other SWIG bindings than GDAL's but I 
guess it would be useful to share experiences and information.

 From this I gather that you're coming to Victoria, Tamas?

Ari

Frank Warmerdam kirjoitti:
> Tamas Szekeres wrote:
>> Frank,
>>
>> We've already a session planned with Ari mainly for discovering the
>> discepancies among the various SWIG bindings and trying to push the
>> wagon into the same directions as much as it possible. From this
>> aspect we might want to collect the other areas where some conceptual
>> decisions should also be made interactively.
>>
>> It seems I'm interested is more than one session but unfortunately I
>> can be only in one place at the same time ;-)
>
> Tamas,
>
> The good thing is that with the various sprint activities in the same
> room, and with the GDAL "bug squash" being relatively informal, things
> should remain fairly flexible.  Was the planned activity specifically for
> GDAL bindings, or also Mapserver, GEOS, etc?
>
> In any event, I don't think these are incompatible activities.
>
> Best regards,



From wollez at gmx.net  Thu Aug 30 03:26:59 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Re: GDAL SRTM hgt code
In-Reply-To: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
References: <8C9B8A2E33A46FF-788-6756@WEBMAIL-MA08.sysops.aol.com>
Message-ID: <fb5rfq$iq6$1@sea.gmane.org>

list67@netscape.net schrieb:
> Has anyone added code to GDAL so that a SRTM (1 or 3 arcsecond) hgt file 
> can be passed to GDALOpen(...) for use?
> 
> I did some searching and noticed that there are some format conversion 
> workarounds for using the SRTM files with GDAL, but I didn't find any 
> info about wether or not a more direct open capability had been 
> implemented?
> 
> Thank you.
> 
>    Mike

hi Mike,

you can have a look at the grass r.in.srtm script. It basically unzips 
and renames the file to .bil and furthermore you need to create a 
textfile with the same file name and the fiel ending .hdr with the 
following content:
For 3arcsec data:
	BYTEORDER M
	LAYOUT BIL
	NROWS 1201
	NCOLS 1201
	NBANDS 1
	NBITS 16
	BANDROWBYTES 2402
	TOTALROWBYTES 2402
	BANDGAPBYTES 0
	NODATA -32768
	ULXMAP $ULXMAP
	ULYMAP $ULYMAP
	XDIM 0.000833333333333
	YDIM 0.000833333333333

of for 1arcsec data:
	BYTEORDER M
	LAYOUT BIL
	NROWS 3601
	NCOLS 3601
	NBANDS 1
	NBITS 16
	BANDROWBYTES 7202
	TOTALROWBYTES 7202
	BANDGAPBYTES 0
	NODATA -32768
	ULXMAP $ULXMAP
	ULYMAP $ULYMAP
	XDIM 0.000277777777777778
	YDIM 0.000277777777777778

You need to replace $ULXMAP and $ULYMAP with the upper left coordinates 
of that tile. As s_srs you can use EPSG:4326.

Greetings
Wolfgang



From dron at ak4719.spb.edu  Thu Aug 30 06:39:22 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Funding for TShirts and Bug Squash
In-Reply-To: <46D5CB2C.6030609@pobox.com>
References: <46D5CB2C.6030609@pobox.com>
Message-ID: <20070830103921.GA6800@ak4719.spb.edu>

On Wed, Aug 29, 2007 at 03:38:20PM -0400, Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to spend up to $650USD on purchasing
> 50 "Team GDAL" tshirts, and to authorize Frank Warmerdam to spend up to
> $350 on food and refreshments for "GDAL FOSS4G Bug Squash" event.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From Doug_Newcomb at fws.gov  Thu Aug 30 08:21:56 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <46D5D452.5000504@pobox.com>
Message-ID: <OFE87280FB.EDA5A311-ON85257347.00430027-85257347.0043ED6B@fws.gov>

Frank,
      With regards to release names, I suggest a simple formula .
Endangered species name + absurd adjective.  ( i.e., Caffinated Civet,
Red-cockaded Woodpecker Remix, Mondo Manatee, etc.)
List of species at :  http://ecos.fws.gov/tess_public/StartTESS.do  ,
http://www.nmfs.noaa.gov/pr/species/esa/



Doug


Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             Frank Warmerdam                                               
             <warmerdam@pobox.                                             
             com>                                                       To 
             Sent by:                  gdal-dev                            
             gdal-dev-bounces@         <gdal-dev@lists.maptools.org>       
             lists.maptools.or                                          cc 
             g                                                             
                                                                   Subject 
                                       [Gdal-dev] T-Shirts                 
             08/29/2007 04:17                                              
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




Folks,

So as mentioned in another email, I'd like to produce a set of "GDAL Team"
t-shirts, some of which could be distributed at FOSS4G.  I'm thinking
along the lines of:

Front
-----

Fairly small on the left breast:

Team GDAL
<GDAL logo>


Back
----

GDAL/OGR 1.5.0
September 2007

<osgeo logo>

An OSGeo Project

---

Of course, I'm not very creative, as you can see.

I also think it would be cool to have a code name for the 1.5.0 release.
Sort of like the latest Ubuntu is Feisty Faun or the latest FME was the
"Go Bananas" release.  My ideas have run to bush-life - "Blackfly" or
"Lumberjack". :-)  Perhaps a bad idea...

Thoughts, ideas?  Anyone want to be "shirts person" getting the graphics
together and working with a shirt producer?  We have rather a short
timeline to get them produced cheaply.  I'm hoping for roughly $10/shirt.

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From cavicchi at ferrara.linux.it  Thu Aug 30 09:04:54 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] gdal_translate from GeoTIFF to ENVI
Message-ID: <46D6C076.8030204@ferrara.linux.it>

Hi list,
i have a little problem with gdal_translate, when i try to convert a 
GeoTIFF image with rotation angle to ENVI format, in the header file 
(.hdr) don't appear the rotation information in map info keyword. I try 
to conveter image with ENVI program and the keyword appears. Someone can 
help me?

thanks to all.

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From warmerdam at pobox.com  Thu Aug 30 09:30:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] gdal_translate from GeoTIFF to ENVI
In-Reply-To: <46D6C076.8030204@ferrara.linux.it>
References: <46D6C076.8030204@ferrara.linux.it>
Message-ID: <46D6C66E.5030205@pobox.com>

Mario Cavicchi wrote:
> Hi list,
> i have a little problem with gdal_translate, when i try to convert a 
> GeoTIFF image with rotation angle to ENVI format, in the header file 
> (.hdr) don't appear the rotation information in map info keyword. I try 
> to conveter image with ENVI program and the keyword appears. Someone can 
> help me?

Mario,

I believe this is a bug in the ENVI driver.  What version of GDAL are you
using? There has been substantial work on this driver since the 1.4
release.  If you are using a recent build (from FWTools for instance) then
please file a bug on the issue and we will look into fixing it.  Please
include the header produced by ENVI and by GDAL for the file so we can
compare.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Thu Aug 30 12:21:49 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <4697DFE3.9050101@pobox.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
	<4697DFE3.9050101@pobox.com>
Message-ID: <fa2ac0580708300921g1b6ce2coaffa71439adeca13@mail.gmail.com>

Frank,

Thanks for the recommendation of adding --config GDAL_CACHEMAX 500 -wm 500
to the gdalwarp command.

With --config GDAL_CACHEMAX 500 -wm 500 added to gdalwarp the speed of
mosaicing 6 tiles creating a mosaic of 3 gb on a server with 4 gb of RAM
increased the gdalwarp speed by 25%.

I then tried --config GDAL_CACHEMAX 625 -wm 625 instead of --config
GDAL_CACHEMAX 500 -wm 500 and I got the following error:
Out of memory allocatint 400042260 byte destination buffer

If the RAM was increased beyond 4 GB then I would be able to increase to
GDAL_CACHEMAX 625 -wm 625 and beyond, but you don't believe that above 500
will have any effect on gdalwarp performance.  Correct?

Thanks,

John Mitchell

On 7/13/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> John Mitchell wrote:
> > Hi,
> >
> > Will increasing the RAM on a server increase the speed of gdalwarp?
> >
> > If I have a server that currently has 4 gigs of RAM and I increase the
> > RAM to say 75 gigs will I notice a difference in the speed of processing
> > a 75 gig image via gdalwarp?
>
> John,
>
> What commandline options are you using with gdalwarp?  By default
> gdalwarp won't take much advantage of your 4GB of existing RAM.
>
> You might want to try setting the -wm flag. For example "-wm 500" will
> operate on 500MB chunks at a time which is better than the default.
> Increasing the io block cache size may also help.  This can be done
> on the command like:
>
> gdalwarp --config GDAL_CACHEMAX 500 -wm 500 ...
>
> This uses 500MB of RAM for read/write caching, and 500MB of RAM for
> working buffers during the warp.  Beyond that I'm doubtful more
> memory will make a substantial difference.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070830/7069e0d8/attachment.html
From warmerdam at pobox.com  Thu Aug 30 12:44:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Will increasing the RAM on a server increase the speed
	of gdalwarp?
In-Reply-To: <fa2ac0580708300921g1b6ce2coaffa71439adeca13@mail.gmail.com>
References: <fa2ac0580707131100l59201fc9hc9a96aae597a5817@mail.gmail.com>
	<4697DFE3.9050101@pobox.com>
	<fa2ac0580708300921g1b6ce2coaffa71439adeca13@mail.gmail.com>
Message-ID: <46D6F3E6.8080305@pobox.com>

John Mitchell wrote:
> Frank,
> 
> Thanks for the recommendation of adding --config GDAL_CACHEMAX 500 -wm 
> 500 to the gdalwarp command.
> 
> With --config GDAL_CACHEMAX 500 -wm 500 added to gdalwarp the speed of 
> mosaicing 6 tiles creating a mosaic of 3 gb on a server with 4 gb of RAM 
> increased the gdalwarp speed by 25%.
> 
> I then tried --config GDAL_CACHEMAX 625 -wm 625 instead of --config 
> GDAL_CACHEMAX 500 -wm 500 and I got the following error:
> Out of memory allocatint 400042260 byte destination buffer
> 
> If the RAM was increased beyond 4 GB then I would be able to increase to 
> GDAL_CACHEMAX 625 -wm 625 and beyond, but you don't believe that above 
> 500 will have any effect on gdalwarp performance.  Correct?

John,

I believe you are well into the law of diminishing returns.  But to
verify this, try comparing performance with 500 and with 400MB, to see
if going from 400 to 500 actually is helping noticably.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Thu Aug 30 12:43:37 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <OFE87280FB.EDA5A311-ON85257347.00430027-85257347.0043ED6B@fws.gov>
References: <OFE87280FB.EDA5A311-ON85257347.00430027-85257347.0043ED6B@fws.gov>
Message-ID: <46D6F3B9.6080608@noaa.gov>

Doug_Newcomb@fws.gov wrote:

> Endangered species name 

Do we want to imply that GDAL is endangered? Maybe an invasive species 
would be more apropos, like zebra mussel or something.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Doug_Newcomb at fws.gov  Thu Aug 30 12:59:00 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <46D6F3B9.6080608@noaa.gov>
Message-ID: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>


>Do we want to imply that GDAL is endangered? Maybe an invasive species
>would be more apropos, like zebra mussel or something.

Hmmm,..Good Point.  How about these lists?
http://www.answers.com/topic/list-of-invasive-species, or
http://invasivespecies.nbii.gov/projects.html

      Generally,invasive species are generally things people don't want.
And invasives are only invasives outside of their native habitat.

      Adding invasives does however, add to the pool of unusual names :-).
Kudzu, spurge, chengu,.... etc.


Doug


Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             Christopher                                                   
             Barker                                                        
             <Chris.Barker@noa                                          To 
             a.gov>                    Doug_Newcomb@fws.gov                
                                                                        cc 
             08/30/2007 12:43          gdal-dev                            
             PM                        <gdal-dev@lists.maptools.org>       
                                                                   Subject 
                                       Re: [Gdal-dev] T-Shirts             
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




Doug_Newcomb@fws.gov wrote:

> Endangered species name

Do we want to imply that GDAL is endangered? Maybe an invasive species
would be more apropos, like zebra mussel or something.

-Chris

--
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov



From szekerest at gmail.com  Thu Aug 30 13:02:44 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] FOSS4G Bug Squash
In-Reply-To: <46D65D0A.8070907@tkk.fi>
References: <46D5A038.4080700@pobox.com>
	<f3b73b7d0708291010y75cba16m5410fd550c17c589@mail.gmail.com>
	<46D5C223.9020004@pobox.com> <46D65D0A.8070907@tkk.fi>
Message-ID: <f3b73b7d0708301002o3c7f23d6l3d2c5cc000f9ed8e@mail.gmail.com>

2007/8/30, Ari Jolma <ari.jolma@tkk.fi>:

>
>  From this I gather that you're coming to Victoria, Tamas?
>

Yes, I've arranged everything around that.

Tamas

From warmerdam at pobox.com  Thu Aug 30 16:01:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
Message-ID: <46D72207.8090206@pobox.com>

Motion: To authorize Frank Warmerdam to negotiate a maintainer contract with
Mateusz Loskot for September to December for up to 600 hours at $17USD/hr plus
up to $2500USD for travel related expenses for Mateusz to attend FOSS4G.  The
contract would be in accordance with RFC 9: GDAL Paid Maintainer Guidelines.

---

This contract, if Mateusz were able to bill for all of the time and used all
the travel expenses would be $12700 USD which remains within our sponsorship
cash on hand.  It is Mateusz' and my expection that he will be able to work
pretty much full time on GDAL maintenance in the October to December period
and perhaps somewhat less intensely in September.

I've been very pleased with Mateusz' work so far this year, and all I really
want is more of his time. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Aug 30 16:17:00 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>
References: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>
Message-ID: <46D725BC.7020700@gov.yk.ca>

Doug_Newcomb@fws.gov wrote:
>> Do we want to imply that GDAL is endangered? Maybe an invasive species
>> would be more apropos, like zebra mussel or something.
...
>       Generally,invasive species are generally things people don't want.
> And invasives are only invasives outside of their native habitat.

I've not found a long list yet, but I think Pioneer Species is apropos:

"A pioneer species ... colonizes previously uncolonized land, usually 
leading to ecological succession. Since uncolonised land usually has 
thin, poor quality soils with few nutrients, pioneer species are 
typically very hardy ..." http://en.wikipedia.org/wiki/Pioneer_species

Sounds a lot like gdal to me!

  Most of the names on that page don't roll off the tongue so well 
though. Although "Flexuosa" has a certain Hogwarts ring to it that could 
be entertaining: "GDAL 1.5, Factotum Flexuosa!" -- a spell which turns 
brackish marine(ated) data into green hollow tubes (data processing 
chains) summoning lackeys ready to work for you.

Resources used for this fun bit of absurdity:

[1] http://www.sms.si.edu/irlspec/Entero_flexuo.htm
[2] http://phrontistery.info/f.html - list of unusual words beginning 
with F (or G or...)



-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From hobu.inc at gmail.com  Thu Aug 30 16:35:06 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <E443E358-9217-4028-AF19-6D58A59AD562@gmail.com>

+1.  Mateusz rocks.


On Aug 30, 2007, at 3:01 PM, Frank Warmerdam wrote:

> Motion: To authorize Frank Warmerdam to negotiate a maintainer  
> contract with
> Mateusz Loskot for September to December for up to 600 hours at  
> $17USD/hr plus
> up to $2500USD for travel related expenses for Mateusz to attend  
> FOSS4G.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer  
> Guidelines.
>
> ---
>
> This contract, if Mateusz were able to bill for all of the time and  
> used all
> the travel expenses would be $12700 USD which remains within our  
> sponsorship
> cash on hand.  It is Mateusz' and my expection that he will be able  
> to work
> pretty much full time on GDAL maintenance in the October to  
> December period
> and perhaps somewhat less intensely in September.
>
> I've been very pleased with Mateusz' work so far this year, and all  
> I really
> want is more of his time. :-)
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Thu Aug 30 16:38:01 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <46D72AA9.3070709@mapgears.com>

+1

Daniel

Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract 
> with
> Mateusz Loskot for September to December for up to 600 hours at 
> $17USD/hr plus
> up to $2500USD for travel related expenses for Mateusz to attend 
> FOSS4G.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer 
> Guidelines.
> 
> ---
> 
> This contract, if Mateusz were able to bill for all of the time and used 
> all
> the travel expenses would be $12700 USD which remains within our 
> sponsorship
> cash on hand.  It is Mateusz' and my expection that he will be able to work
> pretty much full time on GDAL maintenance in the October to December period
> and perhaps somewhat less intensely in September.
> 
> I've been very pleased with Mateusz' work so far this year, and all I 
> really
> want is more of his time. :-)
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From szekerest at gmail.com  Thu Aug 30 16:52:50 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <f3b73b7d0708301352l54fc0dacn2f832c8d3dc7a540@mail.gmail.com>

+1

Best regards,

Tamas


2007/8/30, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract with
> Mateusz Loskot for September to December for up to 600 hours at $17USD/hr plus
> up to $2500USD for travel related expenses for Mateusz to attend FOSS4G.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer Guidelines.
>
> ---
>
> This contract, if Mateusz were able to bill for all of the time and used all
> the travel expenses would be $12700 USD which remains within our sponsorship
> cash on hand.  It is Mateusz' and my expection that he will be able to work
> pretty much full time on GDAL maintenance in the October to December period
> and perhaps somewhat less intensely in September.
>
> I've been very pleased with Mateusz' work so far this year, and all I really
> want is more of his time. :-)
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu.inc at gmail.com  Thu Aug 30 17:12:26 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL 1.5 release
Message-ID: <A34AA103-D2EE-4199-8E16-EFD2A596E8F9@gmail.com>

All,

When are we thinking our 1.5 release would happen?  I don't recall  
exactly, but I thought we might have been thinking of cutting a beta  
right before FOSS4G, but I'm concerned there will still be features,  
refactoring (I wish :), and significant bug work flowing in after  
that time.  What's the feeling on this?

Also, is there a chance we would look at following a modified  
MapServer's Release Manager model with this release? <http:// 
mapserver.gis.umn.edu/development/rfc/ms-rfc-34>

Howard

From pagameba at gmail.com  Thu Aug 30 17:12:08 2007
From: pagameba at gmail.com (Paul Spencer)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <46D725BC.7020700@gov.yk.ca>
References: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>
	<46D725BC.7020700@gov.yk.ca>
Message-ID: <142992B0-C321-409C-906A-F2431806F8E4@gmail.com>

I figured Frank would want to go with some sort of ascii art, or  
perhaps a hand-written XBM graphic.

On 30-Aug-07, at 4:17 PM, Matt Wilkie wrote:

> Doug_Newcomb@fws.gov wrote:
>>> Do we want to imply that GDAL is endangered? Maybe an invasive  
>>> species
>>> would be more apropos, like zebra mussel or something.
> ...
>>       Generally,invasive species are generally things people don't  
>> want.
>> And invasives are only invasives outside of their native habitat.
>
> I've not found a long list yet, but I think Pioneer Species is  
> apropos:
>
> "A pioneer species ... colonizes previously uncolonized land,  
> usually leading to ecological succession. Since uncolonised land  
> usually has thin, poor quality soils with few nutrients, pioneer  
> species are typically very hardy ..." http://en.wikipedia.org/wiki/ 
> Pioneer_species
>
> Sounds a lot like gdal to me!
>
>  Most of the names on that page don't roll off the tongue so well  
> though. Although "Flexuosa" has a certain Hogwarts ring to it that  
> could be entertaining: "GDAL 1.5, Factotum Flexuosa!" -- a spell  
> which turns brackish marine(ated) data into green hollow tubes  
> (data processing chains) summoning lackeys ready to work for you.
>
> Resources used for this fun bit of absurdity:
>
> [1] http://www.sms.si.edu/irlspec/Entero_flexuo.htm
> [2] http://phrontistery.info/f.html - list of unusual words  
> beginning with F (or G or...)
>
>
>
> -- 
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

+-----------------------------------------------------------------+
|Paul Spencer                          pspencer@dmsolutions.ca    |
+-----------------------------------------------------------------+
|Chief Technology Officer                                         |
|DM Solutions Group Inc                http://www.dmsolutions.ca/ |
+-----------------------------------------------------------------+






From JARED.RUBIN at saic.com  Thu Aug 30 18:23:34 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] question on RawRasterBand constructor
Message-ID: <200708301523.34535.rubinj@nemesis.tucson.saic.com>

what exactly are nPixelOffset and nLineOffset? I am using the RawRasterBand 
class and I have an internally developed image file type from work that is 
scan line orientated, not tiled.  It would seem that the offsets are if you 
want to skip over image pixels. Our image file type is stored contigously  in 
memory where the 1st row of image pixels is followed by the 2nd row, followed 
by the 3rd row, etc.. So I thought that the RawRasterBand would be used to 
just read in a row of pixels at a time. 


RawRasterBand::RawRasterBand( FILE * fpRaw, vsi_l_offset nImgOffset,
                              int nPixelOffset, int nLineOffset,
                              GDALDataType eDataType, int bNativeOrder,
                              int nXSize, int nYSize, int bIsVSIL )

thanks
Jared

From dron at ak4719.spb.edu  Fri Aug 31 05:04:44 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <20070831090444.GA12773@ak4719.spb.edu>

On Thu, Aug 30, 2007 at 04:01:11PM -0400, Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer
> contract with Mateusz Loskot for September to December for up to 600
> hours at $17USD/hr plus up to $2500USD for travel related expenses for
> Mateusz to attend FOSS4G.  The contract would be in accordance with
> RFC 9: GDAL Paid Maintainer Guidelines.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From sjahputerao at missouri.edu  Fri Aug 31 10:33:27 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] HFA Driver behavior when spill file is present
Message-ID: <46D826B7.8070705@missouri.edu>

Hi All,

I just noticed a strange behavior of GDAL HFA driver.  Suppose you have 
an HFA file that is over 2GB in size.  This causes the creation of the 
spill (.ige) file. When you try to use Create() in GDALDriver class 
using the same name of the existing HFA file, instead of overwriting the 
pre-existing file GDAL simply appends more data to the spill file.  So 
you will end up with larger .ige file.  If I have a repeat process that 
uses the same filename, the .ige grows along with the process and it 
eats up the disk space unnecessarily, unless I specifically remove the 
old HFA file before creating a new one.

Is there a way for me to just overwrite the old HFA image file when I 
create a new one? 

Thanks.


Ozy

From warmerdam at pobox.com  Fri Aug 31 11:03:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] HFA Driver behavior when spill file is present
In-Reply-To: <46D826B7.8070705@missouri.edu>
References: <46D826B7.8070705@missouri.edu>
Message-ID: <46D82DCE.2040607@pobox.com>

Ozy Sjahputera wrote:
> Hi All,
> 
> I just noticed a strange behavior of GDAL HFA driver.  Suppose you have 
> an HFA file that is over 2GB in size.  This causes the creation of the 
> spill (.ige) file. When you try to use Create() in GDALDriver class 
> using the same name of the existing HFA file, instead of overwriting the 
> pre-existing file GDAL simply appends more data to the spill file.  So 
> you will end up with larger .ige file.  If I have a repeat process that 
> uses the same filename, the .ige grows along with the process and it 
> eats up the disk space unnecessarily, unless I specifically remove the 
> old HFA file before creating a new one.
> 
> Is there a way for me to just overwrite the old HFA image file when I 
> create a new one?
> Thanks.

Ozy,

This is a bug - please file a bug report on it.  The HFA driver Create()
method really ought to delete the .ige file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Aug 31 12:58:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] question on RawRasterBand constructor
In-Reply-To: <200708301523.34535.rubinj@nemesis.tucson.saic.com>
References: <200708301523.34535.rubinj@nemesis.tucson.saic.com>
Message-ID: <46D848CF.3030806@pobox.com>

Jared Rubin wrote:
> what exactly are nPixelOffset and nLineOffset? I am using the RawRasterBand 
> class and I have an internally developed image file type from work that is 
> scan line orientated, not tiled.  It would seem that the offsets are if you 
> want to skip over image pixels. Our image file type is stored contigously  in 
> memory where the 1st row of image pixels is followed by the 2nd row, followed 
> by the 3rd row, etc.. So I thought that the RawRasterBand would be used to 
> just read in a row of pixels at a time. 
> 
> 
> RawRasterBand::RawRasterBand( FILE * fpRaw, vsi_l_offset nImgOffset,
>                               int nPixelOffset, int nLineOffset,
>                               GDALDataType eDataType, int bNativeOrder,
>                               int nXSize, int nYSize, int bIsVSIL )

Jared,

The arguments to the RawRasterBand are intended to describe the layout
of the data on the disk file referenced by fpRaw.

nPixelOffset is the byte offset from the start of one pixel to the start
of the next on the same scanline.

nLineOffset is the byte offset from the start of one scanline to the
start of the next.

With appropriate values these can be used to described a variety of
interleaving schemes.

For a single band image 8bit image on disk with tight packing, the
nPixelOffset would be 1, and nLineOffset would be the width of the
image.  But if you have a 3 band 16bit pixel intereleaved file,
nPixelOffset would be 6 and LineOffset would be nXSize * 6.  If
the same data was line interleaved nPixelOffset would be 2, and
nLineOffset would be nXSize * 6.

I hope that helps a bit.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Aug 31 13:04:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] GDAL 1.5 release
In-Reply-To: <A34AA103-D2EE-4199-8E16-EFD2A596E8F9@gmail.com>
References: <A34AA103-D2EE-4199-8E16-EFD2A596E8F9@gmail.com>
Message-ID: <46D84A18.2090000@pobox.com>

Howard Butler wrote:
> All,
> 
> When are we thinking our 1.5 release would happen?  I don't recall 
> exactly, but I thought we might have been thinking of cutting a beta 
> right before FOSS4G, but I'm concerned there will still be features, 
> refactoring (I wish :), and significant bug work flowing in after that 
> time.  What's the feeling on this?

Howard,

It is my intention to hold a first 1.5 beta shortly before FOSS4G,
and then - with luck - a beta at the end of our bug squash day
and perhaps a release candidate after that depending on how things
go.  I'm partly suggesting this timeline so that it lines up well
with the bug squash and partly so I can wedge in various work I
need to get done for 1.5 release for clients.

> Also, is there a chance we would look at following a modified 
> MapServer's Release Manager model with this release? 
> <http://mapserver.gis.umn.edu/development/rfc/ms-rfc-34>

To be honest I'd be inclined to streamline things a bit from that, but
I would like to see a more formalized release model.   I especially like
the "MapServer Release Process" section explaining the different phases
like general development, rfc freeze, feature freeze and stable releases.

Would you like to propose a version of that for GDAL/OGR?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Aug 31 13:22:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:00 2007
Subject: [Gdal-dev] T-Shirts
In-Reply-To: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>
References: <OF5029C458.8E57E186-ON85257347.005C2E7C-85257347.005D4B03@fws.gov>
Message-ID: <46D84E47.9040304@pobox.com>

Doug_Newcomb@fws.gov wrote:
>> Do we want to imply that GDAL is endangered? Maybe an invasive species
>> would be more apropos, like zebra mussel or something.
> 
> Hmmm,..Good Point.  How about these lists?
> http://www.answers.com/topic/list-of-invasive-species, or
> http://invasivespecies.nbii.gov/projects.html
> 
>       Generally,invasive species are generally things people don't want.
> And invasives are only invasives outside of their native habitat.
> 
>       Adding invasives does however, add to the pool of unusual names :-).
> Kudzu, spurge, chengu,.... etc.

Folks,

OK, as I feared, I'm a bit overwhelmed by our options for a catchy version
name, so I suggest we leave this off the tshirts and leave it as a decision
to make at the bug squash event.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From weller at andreas-weller.de  Fri Aug 31 15:07:39 2007
From: weller at andreas-weller.de (Andreas Weller)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Convert PNG map / Mercator -> equirectangular projection
Message-ID: <46D866FB.5010903@andreas-weller.de>

Hi!
I used the attached Perl script for grabbing maps from
http://maps.google.com
The tiles are automatically stitched together to one big file -> now
I've got a 12000x12000 px PNG file  :-)

I wish to use it with Xastir - an amateur radio mapping program.

Google Maps seems to use mercator projection - for working
correctly the file to needs to match equirectangular projection, also
called the equidistant cylindrical projection.

Any hint how to do it? I think gdalwarp might do it but I don't know how...

Thank you!


Regards,
  Andreas Weller, DF1PAW


Here the Perl file:
#!/usr/bin/perl

# download a bunch of google map tiles and stitch them together
# Shifty Death Effect Done by Noah Vawter in May, 2005.
# Computing Culture Groop, MIT Media Lab.
# Modified for compatibility with maps.7.js -> Mmaps.10.js by Ian (June
2005)
# Modified for currently URL format used by google
# and PNG support (instead GIF) by Andreas Weller, DF1PAW (Aug. 2007)

# with width 12
$sx = 2137;$sy = 1375;   # DF1PAW home

$w=10; # Width
$h=10; # Hight

open(PEDG,">pedg.html");

for($yd=0;$yd<$h;$yd++)
{
    for($xd=0;$xd<$w;$xd++)
    {
	$x=int($sx+$xd-$w/2);
	$y=int($sy+$yd-$h/2);
	$localnem = "tile$x,$y.png";

	# do we already have it locally?
	$val = open(CHECK,$localnem);
	if($val == 0){
	    # http://mt.google.com/mt?v=w2.4&x=4190&y=6012&zoom=3
	    #   523  wget "http://mt.google.com/mt?v=.38&x=5376&y=-730&zoom=2"
	    # have a look at the Url and modify these lines:
	    $req="http://mt.google.com/";
	    $nem="mt?v=w2.60&x=$x&y=$y&zoom=5";
	    $url = $req . $nem;
	    print "$url\n";
	    $cmd1="wget \"$url\" ";
	    print "$cmd1\n";
	    system($cmd1);
	    # $nem =~ s/\?/@/;
	    $cmd2="mv \"$nem\" $localnem";
	    print "$cmd2\n";
	    system($cmd2);
	}

	print PEDG "<img src=$localnem>\n";
    }
}

# concatenate horizontal maps
# convert  tile005000.png  -page +129+0 tile006000.png -page +258+0
tile007000.png -mosaic o.png

for($yd=0;$yd<$h;$yd++)
{
    $cmd3 = "convert ";

    for($xd=0;$xd<$w;$xd++)
    {
	$x=int($sx+$xd-$w/2);
	$y=int($sy+$yd-$h/2);
	$localnem = "tile$x,$y.png";
	
	$xsh = $xd*128;
	$ysh = $yd*128;
	$cmd3 .= "$localnem ";
    }

    $cmd3 .= "+append tmp$yd.png";
    print "$cmd3\n";
    system($cmd3);
}

# concatenate horizontal strips
$cmd4 = "convert ";

for($yd=0;$yd<$h;$yd++)
{
    $localnem = "tmp$yd.png";
    $cmd4 .= "$localnem ";
}

$cmd4 .= "-append output.png";
print "$cmd4\n";
system($cmd4);

From JARED.RUBIN at saic.com  Fri Aug 31 19:51:40 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
Message-ID: <200708311651.41074.rubinj@nemesis.tucson.saic.com>

I am inheriting from the RawDataset because it is scan line orientated and 
would like to stuff metadata like sensor zenith, sun azimuth, etc.. that are 
well defined metadata items in NITF and TIFF so that I can convert an 
internal image format to NITF or TIFF. Is there a specific domain that I need 
to use for NITF or TIFF for stuffing the metadata. If so can someone provide 
an example?
   In addition, if i was to stuff the metadata to NITF, would it carry over to 
TIFF?

Basically if run gdal_translate from my internal format to NITF and then run 
gdal_translate from NITF to TIFF would the metadata carry over to TIFF?

Thanks
Jared

From sophia.parafina at ionicenterprise.com  Fri Aug 31 20:30:53 2007
From: sophia.parafina at ionicenterprise.com (Sophia Parafina)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
In-Reply-To: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
References: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
Message-ID: <46D8B2BD.4010605@ionicenterprise.com>

Jared,

The NITF specs are available here: 
http://www.gwg.nga.mil/ntb/baseline/format.html, they list the defined 
tags for metadata in the header.  I'm not sure what you mean by domain, 
but I don't think there are nitf tags for sensor zenith or sun azimuth.  
However, using gdal_translate use the -mo "tag=value" option to insert 
the metadata. Yes, gdal_translate will write the metadata from a nitf to 
a geotiff.

Cheers,
sophia

Jared Rubin wrote:
> I am inheriting from the RawDataset because it is scan line orientated and 
> would like to stuff metadata like sensor zenith, sun azimuth, etc.. that are 
> well defined metadata items in NITF and TIFF so that I can convert an 
> internal image format to NITF or TIFF. Is there a specific domain that I need 
> to use for NITF or TIFF for stuffing the metadata. If so can someone provide 
> an example?
>    In addition, if i was to stuff the metadata to NITF, would it carry over to 
> TIFF?
>
> Basically if run gdal_translate from my internal format to NITF and then run 
> gdal_translate from NITF to TIFF would the metadata carry over to TIFF?
>
> Thanks
> Jared
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>   


