From even.rouault at mines-paris.org  Thu Apr  1 02:27:06 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr  1 02:27:31 2010
Subject: Fwd: [gdal-dev] GDAL and JAVA
In-Reply-To: <u2w3804b9911003311831x3223d348n61f580a07e9929a4@mail.gmail.com>
References: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
	<g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
	<u2w3804b9911003311831x3223d348n61f580a07e9929a4@mail.gmail.com>
Message-ID: <201004010827.08488.even.rouault@mines-paris.org>

GongYing Hsu,

you can copy&paste the text content of a windows console (in the contextual 
menu opened by clicking in the top-left icon of the windows console), no need 
to take a picture snapshot. And as the picture is truncated, it is difficult 
to tell exactly what is wrong...

My guess is you should check your java.opt

By default, it is written for Linux builds :
JAVA_INCLUDE=-I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/linux

So, if you've not already done it, for a windows build, you should take care 
of changing this line to :
JAVA_INCLUDE=-I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/win32

Best regards,

Even

Le Thursday 01 April 2010 03:31:59 GongYing Hsu, vous avez ?crit?:
> Thank you,but I have a problem when I do the step 7 of
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
>
> *7. Compile GDAL's Java bindings*
>
> a. Run MSVC's vcvars32.bat
>
> b. In *<gdal-dir>*\swig\java, edit the java.opt file pointing it to your
> correct JDK and ant locations.
>
> c. In *<gdal-dir>*\swig, run "nmake -f makefile.vc java".
>
> It got some error,and I took the error as a picture in the attachment.
>
> Could you teach me how to solve it???
>
> Thank you very much.
>
>
>
>
> zeng <xiaoxxcool@163.com> ? 2010?3?31???11:06 ???
>
> if you are using windows, put all the *.dll files to $JAVA_HOME/bin/,
>
> > gdal.jar to $JAVA_HOME/jre/lib/ext/, and add $JAVA_HOME/bin to your
> > system path. It will work.
> >
> > ?2010-03-31 14:25:31?"GongYing Hsu" <gongyinghsu@gmail.com> ???
> >
> >  Excuse me!
> > Is there has any tutorial about GDAL for JAVA?
> > What I use is JDK 1.6 and gdal1.7.1. So how do I set up the GDAL for
> > JAVA?? Thank you very much.


From weixj2003ld at 163.com  Thu Apr  1 04:26:19 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Thu Apr  1 04:41:33 2010
Subject: [gdal-dev] get the x and y coordinate of geotiff
In-Reply-To: <20100330091350.A858DE016DC@lists.osgeo.org>
References: <20100330091350.A858DE016DC@lists.osgeo.org>
Message-ID: <dad3f76.c680.127b87a5eab.Coremail.weixj2003ld@163.com>

1. How could I get the x and y of world coordinate ,or the longitude and the latitude of it by GDAL?

2. How could get the height of it with GDAL?

Thk u in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/2ec08e93/attachment.html
From szekerest at gmail.com  Thu Apr  1 05:27:48 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr  1 05:27:51 2010
Subject: [gdal-dev] Memory corruption in PNG driver with Microsoft 
	DebugDLLs?
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF70244898B@AZ25EXM03.gddsi.com>
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
	<64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
	<0873B50412231C47AFF7ECE2B4226CF702448945@AZ25EXM03.gddsi.com>
	<0873B50412231C47AFF7ECE2B4226CF70244898B@AZ25EXM03.gddsi.com>
Message-ID: <q2if3b73b7d1004010227s5d75ef8elcfdc306f9e9af783@mail.gmail.com>

2010/4/1 Shaw, Jonathan-P29740 <Jonathan.Shaw@gdc4s.com>

> Upon further browsing of the open tickets, I'm wondering if I'm
> experiencing the crashes, heap corruption, etc. described by
> http://trac.osgeo.org/gdal/ticket/3346.
>
>
Jonathan,

You probably use GDAL along with one or more dependencies loaded dynamically
(like proj, libpng, libjpeg etc.) which may have been compiled against
different CRT dependencies. This may happen either by using different CRT
settings or different compiler versions when compiling the various
libraries. Having different CRT settings for the various libraries is not
necessarily a problems when the authors of the libraries follow careful
design considerations and coding practice (like making memory
allocations/deallocations within the dll boundaries etc.), but it's rarely
the case with the libraries we use. Using inhomogeneous CRT dependecies in
dependent libraries is unsupported by Microsoft either, and I've also
submitted a blogpost related to this topic here:
http://szekerest.blogspot.com/2010/02/redistribution-of-shared-c-runtime.html

To avoid this situation you might want to recompile all the dependencies
with the same compiler and CRT setting which could be a nightmare in many
cases. You could alternatively use the pre-compiled binary packages / SDKs
from this location http://vbkto.dyndns.org/sdk/ which are guaranteed to
compiled satisfying with the requirements above (by using the /MD settings
for all, and the same compiler used).


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/a319dbaf/attachment.html
From Jonathan.Shaw at gdc4s.com  Thu Apr  1 11:35:41 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Thu Apr  1 11:35:47 2010
Subject: [gdal-dev] Memory corruption in PNG driver with Microsoft
	DebugDLLs?
In-Reply-To: <q2if3b73b7d1004010227s5d75ef8elcfdc306f9e9af783@mail.gmail.com>
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
	<64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
	<0873B50412231C47AFF7ECE2B4226CF702448945@AZ25EXM03.gddsi.com>
	<0873B50412231C47AFF7ECE2B4226CF70244898B@AZ25EXM03.gddsi.com>
	<q2if3b73b7d1004010227s5d75ef8elcfdc306f9e9af783@mail.gmail.com>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF702448A10@AZ25EXM03.gddsi.com>

Thanks, Tamas. Your blog posting is helpful in explaining the potential
problems and the care that must be taken. I already paid careful
attention to the memory allocation/deallocation DLL boundary concerns,
but somehow I was clueless on the issues related to compiling against
mixtures of Microsoft's debug and non-debug runtime DLLs. The recent
ticket 3346 woke me up to this issue, and your post helps explain it
further.

 

Thanks,

Jonathan

 

 

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Thursday, April 01, 2010 2:28 AM
To: Shaw, Jonathan-P29740
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Memory corruption in PNG driver with Microsoft
DebugDLLs?

 

 

 

2010/4/1 Shaw, Jonathan-P29740 <Jonathan.Shaw@gdc4s.com>

Upon further browsing of the open tickets, I'm wondering if I'm
experiencing the crashes, heap corruption, etc. described by
http://trac.osgeo.org/gdal/ticket/3346.


Jonathan,

You probably use GDAL along with one or more dependencies loaded
dynamically (like proj, libpng, libjpeg etc.) which may have been
compiled against different CRT dependencies. This may happen either by
using different CRT settings or different compiler versions when
compiling the various libraries. Having different CRT settings for the
various libraries is not necessarily a problems when the authors of the
libraries follow careful design considerations and coding practice (like
making memory allocations/deallocations within the dll boundaries etc.),
but it's rarely the case with the libraries we use. Using inhomogeneous
CRT dependecies in dependent libraries is unsupported by Microsoft
either, and I've also submitted a blogpost related to this topic here:
http://szekerest.blogspot.com/2010/02/redistribution-of-shared-c-runtime
.html

To avoid this situation you might want to recompile all the dependencies
with the same compiler and CRT setting which could be a nightmare in
many cases. You could alternatively use the pre-compiled binary packages
/ SDKs from this location http://vbkto.dyndns.org/sdk/ which are
guaranteed to compiled satisfying with the requirements above (by using
the /MD settings for all, and the same compiler used).


Best regards,

Tamas



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/403aac5e/attachment.html
From warmerdam at pobox.com  Thu Apr  1 16:28:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr  1 16:29:03 2010
Subject: [gdal-dev] Setting ENVI .hdr band names
In-Reply-To: <4BB40F2D.1070605@wmich.edu>
References: <4BB40F2D.1070605@wmich.edu>
Message-ID: <4BB50208.7010200@pobox.com>

Benjamin Welton wrote:
> Hey all,
> 
>    Im wondering if its possible to set the band names that appear in the 
> ENVI header file instead of having the default band 1, band 2,.... 
> (which looks kinda messy)


Ben,

Reviewing the current envidataset.cpp code, it seems that either band_names
and wavelength fields are used for the band descriptions if they are available.
Are you using GDAL 1.7+?  If so, perhaps you could file a ticket on the
issue and attach your envi header file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From keith.olsen at oregonstate.edu  Thu Apr  1 20:06:14 2010
From: keith.olsen at oregonstate.edu (Olsen, Keith)
Date: Thu Apr  1 20:17:07 2010
Subject: [gdal-dev] Unable to set GDAL_merge NODATA or calculate statistics
Message-ID: <1D673F86DDA00841A1216F04D1CE70D641834950FB@EXCH2.nws.oregonstate.edu>

Hey,

I have two questions.


1.       I have 32bit float rasters that I'm trying to merge.  GDAL_merge does not seem to set the output nodata to the first input raster nodata value.  There is a -n option, but the nodata value for a 32bit float is -3.4028235e+038.  Entering in this value with -n does not set the nodata value in the output tif.  Is there another way to express this value that gdal_merge understands?

2.       Is there a way for gdal_merge to automatically calculate the statistics on the output tif?  I have had issues with this before when writing out tif rasters with GDAL (c++).

Thanks,
--Keith Olsen


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/bcc8a27a/attachment.html
From weixj2003ld at 163.com  Thu Apr  1 22:40:32 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Thu Apr  1 22:55:40 2010
Subject: [gdal-dev] convert geotiff to jpg
Message-ID: <cf4196.160f.127bc642722.Coremail.weixj2003ld@163.com>

Hi,how to convert a geotiff file to a jpg file?
BTW,I read two .tif files.and to get the count of raster through  getRastercount().one is 3 and the other is 6,what is means of 3 and 6?
Thk u in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100402/f239b058/attachment.html
From weixj2003ld at 163.com  Thu Apr  1 22:58:48 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Thu Apr  1 22:58:46 2010
Subject: [gdal-dev] software can display geotiff file in 3D viewer.
Message-ID: <1643016.18ee.127bc74df77.Coremail.weixj2003ld@163.com>

Hi
Could you tell me some open source softwares(base on windows) that can display geotiff files in 3D mode not in 2D mode? 
wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100402/1b516a0b/attachment.html
From warmerdam at pobox.com  Thu Apr  1 23:52:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr  1 23:52:05 2010
Subject: [gdal-dev] convert geotiff to jpg
In-Reply-To: <cf4196.160f.127bc642722.Coremail.weixj2003ld@163.com>
References: <cf4196.160f.127bc642722.Coremail.weixj2003ld@163.com>
Message-ID: <4BB569E2.8050905@pobox.com>

weixj2003ld wrote:
> Hi,how to convert a geotiff file to a jpg file?
> BTW,I read two .tif files.and to get the count of raster through 
>  getRastercount().one is 3 and the other is 6,what is means of 3 and 6?
> Thk u in advance.

Wei,

The eat-your-own-tail answer is that 3 and 6 are the number of bands .

It is likely that the 3 band image has red, green and blue bands.

The six band image is presumably some sort of multispectral sensor
like Landsat, and the bands do not have obvious color gun assignments.

However, the final answer is that knowing the number of bands isn't enough
to tell us what they are.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Apr  1 23:52:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr  1 23:52:48 2010
Subject: [gdal-dev] convert geotiff to jpg
In-Reply-To: <cf4196.160f.127bc642722.Coremail.weixj2003ld@163.com>
References: <cf4196.160f.127bc642722.Coremail.weixj2003ld@163.com>
Message-ID: <4BB56A0D.8040907@pobox.com>

weixj2003ld wrote:
> Hi,how to convert a geotiff file to a jpg file?

Wei,

Sorry, I neglected this part.

gdal_translate -of JPEG in.tif out.jpg

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From weixj2003ld at 163.com  Fri Apr  2 04:14:11 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Fri Apr  2 04:29:29 2010
Subject: [gdal-dev] display picture in colorful mode
Message-ID: <10f4070.1de81.127bd959f15.Coremail.weixj2003ld@163.com>

Hi,
I open two files,and they have the same bands number(that is ,6),one is .img ,the other is .tif.Now,I find that the .img file is almost red,and the .tif file is grey.
I want to display it in colorful, for example,grass is green,water is blue,etc.What should I do with GDAL?
Kind regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100402/e331a2ed/attachment.html
From jctull at gmail.com  Fri Apr  2 12:03:00 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Apr  2 12:03:09 2010
Subject: [gdal-dev] display picture in colorful mode
In-Reply-To: <10f4070.1de81.127bd959f15.Coremail.weixj2003ld@163.com>
References: <10f4070.1de81.127bd959f15.Coremail.weixj2003ld@163.com>
Message-ID: <70A77928-4FB8-4FC6-8799-07639868808D@gmail.com>

On Apr 2, 2010, at 1:14 AM, weixj2003ld wrote:

> Hi,
> I open two files,and they have the same bands number(that is ,6),one is .img ,the other is .tif.Now,I find that the .img file is almost red,and the .tif file is grey.
> I want to display it in colorful, for example,grass is green,water is blue,etc.What should I do with GDAL?
> Kind regards.

Wei,

This sounds similar to the other post you had. As Frank said, little can be offered without more information about the data source and what is stored in each band. Also, what are you using to view the files. More details are needed to provide a useful response.

Regards,
John
From benjamin.r.welton at wmich.edu  Fri Apr  2 16:50:21 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Fri Apr  2 16:47:14 2010
Subject: [gdal-dev] Setting ENVI .hdr band names
In-Reply-To: <4BB50208.7010200@pobox.com>
References: <4BB40F2D.1070605@wmich.edu> <4BB50208.7010200@pobox.com>
Message-ID: <4BB6588D.4060307@wmich.edu>

Hey Frank,

    Im currently not running 1.7+ (still on the 1.6 line). It doesnt 
appear to be working in 1.5/1.6 for me. I looked at the source code real 
quick for envidataset.cpp and it looks like
someone might have already addressed this issue between 1.6->1.7.

Ill put 1.7 on a VM and run my code to see if it works in the next day 
or so.

Thanks for the response,
Ben


Frank Warmerdam wrote:
> Benjamin Welton wrote:
>> Hey all,
>>
>>    Im wondering if its possible to set the band names that appear in 
>> the ENVI header file instead of having the default band 1, band 
>> 2,.... (which looks kinda messy)
>
>
> Ben,
>
> Reviewing the current envidataset.cpp code, it seems that either 
> band_names
> and wavelength fields are used for the band descriptions if they are 
> available.
> Are you using GDAL 1.7+?  If so, perhaps you could file a ticket on the
> issue and attach your envi header file.
>
> Best regards,

From yanmenglong at gmail.com  Fri Apr  2 20:44:55 2010
From: yanmenglong at gmail.com (menglong yan)
Date: Fri Apr  2 20:50:51 2010
Subject: [gdal-dev] read envisat with gdal
Message-ID: <i2x54dbc1e41004021744nc0378edajc85770269e8a343b@mail.gmail.com>

Hi, I want to read envisat with gdal, and I can read the data
successfully. However I can not get the header information such as
"FIRST_MID_LAT"(this item could be
found with  NEST(Next ESA SAR toolbox)) with
GDALDataset::GetMetadataItem("FIRST_MID_LAT"). I have read the souce
code in /frmts/envisat/, and I am sure it is
right to call this function. I turn to Anybody who once did this job
for some advice. Thank you!
Kind regards.
From weixj2003ld at 163.com  Sat Apr  3 00:24:38 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Sat Apr  3 00:40:00 2010
Subject: [gdal-dev] read DEM
Message-ID: <1b83964.281a.127c1e9d12f.Coremail.weixj2003ld@163.com>

Hi,
Now I have a dem file (.img),I want to read it with gdal,how to do?I find that gdal only read ascii dem,what is means?
Thk u in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100403/db7ac16d/attachment.html
From neteler at osgeo.org  Sat Apr  3 03:15:49 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Sat Apr  3 03:16:12 2010
Subject: [gdal-dev] software can display geotiff file in 3D viewer.
In-Reply-To: <1643016.18ee.127bc74df77.Coremail.weixj2003ld@163.com>
References: <1643016.18ee.127bc74df77.Coremail.weixj2003ld@163.com>
Message-ID: <p2v86782b611004030015kc88a389cub047e45cb542f31e@mail.gmail.com>

2010/4/2 weixj2003ld <weixj2003ld@163.com>:
> Hi
> Could you tell me some open source softwares(base?on?windows)?that can
> display?geotiff?files in 3D mode not in 2D mode?

GRASS GIS has the NVIZ 3D viewer included:
http://grass.osgeo.org/screenshots/viz.php

Download at:
http://grass.osgeo.org/download/

Markus
From xiaoxxcool at 163.com  Sat Apr  3 05:43:52 2010
From: xiaoxxcool at 163.com (zeng)
Date: Sat Apr  3 05:44:03 2010
Subject: [gdal-dev] GDAL and JAVA
In-Reply-To: <g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
References: <g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
	<r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
	<a3d365.bf30.127b4c2d1a6.Coremail.xiaoxxcool@163.com>
Message-ID: <16dcfb6.66ab.127c30e13fe.Coremail.xiaoxxcool@163.com>

Sorry, I didn't get the problem. if you want to use java and gdal lib, here is a link to download
http://download.csdn.net/source/2188920


在2010-03-31 23:28:51，"GongYing Hsu" <gongyinghsu@gmail.com> 写道：

Thank you,but I have a problem when I do the step 7 of http://trac.osgeo.org/gdal/wiki/GdalOgrInJava

7. Compile GDAL's Java bindings

a. Run MSVC's vcvars32.bat 

b. In <gdal-dir>\swig\java, edit the java.opt file pointing it to your correct JDK and ant locations. 

c. In <gdal-dir>\swig, run "nmake -f makefile.vc java". 

It got some error,and I took the error as a picture in the attachment.

Could you teach me how to solve it???

Thank you very much.



 

zeng <xiaoxxcool@163.com> 於 2010年3月31日下午11:06 道：
if you are using windows, put all the *.dll files to $JAVA_HOME/bin/, gdal.jar to $JAVA_HOME/jre/lib/ext/, and add $JAVA_HOME/bin to your system path. It will work.


在2010-03-31 14:25:31，"GongYing Hsu" <gongyinghsu@gmail.com> 写道： 


Excuse me! 
Is there has any tutorial about GDAL for JAVA?
What I use is JDK 1.6 and gdal1.7.1. So how do I set up the GDAL for JAVA??
Thank you very much.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100403/d902a2c1/attachment.html
From chaitanya.ch at gmail.com  Sat Apr  3 07:09:47 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Apr  3 07:09:49 2010
Subject: [gdal-dev] read DEM
In-Reply-To: <bf4f07.3f1d.127c3444fc1.Coremail.weixj2003ld@163.com>
References: <1b83964.281a.127c1e9d12f.Coremail.weixj2003ld@163.com>
	<t2keb502d881004030015nacfddc0bs4ccab351d7af3b7e@mail.gmail.com>
	<bf4f07.3f1d.127c3444fc1.Coremail.weixj2003ld@163.com>
Message-ID: <j2neb502d881004030409id7530854p4d019266405577@mail.gmail.com>

weixj2003ld,

Did you try a different Y offset? May be the data really is zero in the
first line.
Please give the output of gdalinfo with this file.

On Sat, Apr 3, 2010 at 4:13 PM, weixj2003ld <weixj2003ld@163.com> wrote:

> Thk u for your reply.
> Yes,it is Erdas imagine format.
> I use the following code to read the data of it,but I find that the value
> of it is always 0,I do not know why.
>
>
>   float *pafScanline;
>   int nXSize=poBand->GetXSize();
>   pafScanline=(float *)CPLMalloc(sizeof(float)*nXSize);
>
>  poBand->RasterIO(GF_Read,0,0,nXSize,1,pafScanline,nXSize,1,GDT_Float32,0,0);
>
> Wei
>
>
>
>
> The file you have is probably in Erdas Imagine format.
> Try the command "gdalinfo -stats <dem_file.img>". This will show if you can
> open it with GDAL.
>
> If you want to know how to read the data, refer to
> http://www.gdal.org/gdal_tutorial.html
>
>  2010/4/3 weixj2003ld <weixj2003ld@163.com>
>
>> Hi,
>> Now I have a dem file (.img),I want to read it with gdal,how to do?I find
>> that gdal only read ascii dem,what is means?
>> Thk u in advance.
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.2416N 80.1426E
>
>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100403/b0b16a68/attachment.html
From Volker.Wichmann at uibk.ac.at  Sun Apr  4 20:23:55 2010
From: Volker.Wichmann at uibk.ac.at (Volker Wichmann)
Date: Sun Apr  4 20:35:53 2010
Subject: [gdal-dev] software can display geotiff file in 3D viewer.
In-Reply-To: <p2v86782b611004030015kc88a389cub047e45cb542f31e@mail.gmail.com>
References: <1643016.18ee.127bc74df77.Coremail.weixj2003ld@163.com>
	<p2v86782b611004030015kc88a389cub047e45cb542f31e@mail.gmail.com>
Message-ID: <4BB92D9B.1060402@uibk.ac.at>

Markus Neteler schrieb:
> 2010/4/2 weixj2003ld <weixj2003ld@163.com>:
>   
>> Hi
>> Could you tell me some open source softwares(base on windows) that can
>> display geotiff files in 3D mode not in 2D mode?
>>     
>
> GRASS GIS has the NVIZ 3D viewer included:
> http://grass.osgeo.org/screenshots/viz.php
>
> Download at:
> http://grass.osgeo.org/download/
>
> Markus
>   
An alternative is SAGA GIS:
http://www.saga-gis.org
http://sourceforge.net/projects/saga-gis/

Have a look at
http://sourceforge.net/apps/trac/saga-gis/wiki/Climbing%20Mount%20St.%20Helens
on how to create a 3D View. To import a geotif to SAGA, have a look at 
the Import/Export - GDAL/OGR module library.

Volker

From weixj2003ld at 163.com  Sun Apr  4 21:18:54 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Sun Apr  4 21:34:09 2010
Subject: [gdal-dev] max y is less than min y
Message-ID: <3c6ead.6bf.127cb8c7ffd.Coremail.weixj2003ld@163.com>

I read a .tif file ,and use the following code to get the MinX,MinY,MaxX and MaxY of the coordation of the tif image.
...
double *m_AdGeoTransform=new double[6];
poDataset->GetGeoTransform(AdGeoTransform);
nX=poDataset->GetReasXsize();
nY=poDataset->GetReasYsize();
 
MinX=AdGeoTransform[0];
MinY=AdGeoTransform[3];
 
MaxX =AdGeoTransform[0]+nX*AdGeoTransform[1]+nY*AdGeoTransform[2];
MaxY=AdGeoTransform[3]+nX*AdGeoTransform[4]+nY*AdGeoTransform[5];
...
 
I find that MaxY is less than MinY ,why?
Thk u in advance.
 
 
to get min x, max x,min y and max y .
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/c9b86aa7/attachment.html
From warmerdam at pobox.com  Sun Apr  4 23:06:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr  4 23:06:47 2010
Subject: [gdal-dev] max y is less than min y
In-Reply-To: <3c6ead.6bf.127cb8c7ffd.Coremail.weixj2003ld@163.com>
References: <3c6ead.6bf.127cb8c7ffd.Coremail.weixj2003ld@163.com>
Message-ID: <4BB953C1.5030401@pobox.com>

weixj2003ld wrote:
> I read a .tif file ,and use the following code to get the MinX,MinY,MaxX 
> and MaxY of the coordation of the tif image.
> ...
> double *m_AdGeoTransform=new double[6];
> poDataset->GetGeoTransform(AdGeoTransform);
> nX=poDataset->GetReasXsize();
> nY=poDataset->GetReasYsize();
>  
> MinX=AdGeoTransform[0];
> MinY=AdGeoTransform[3];
>  
> MaxX =AdGeoTransform[0]+nX*AdGeoTransform[1]+nY*AdGeoTransform[2];
> MaxY=AdGeoTransform[3]+nX*AdGeoTransform[4]+nY*AdGeoTransform[5];
> ...
>  
> I find that MaxY is less than MinY ,why?
> Thk u in advance.

Wei,

GeoTransform[3] is the the Y origin, that is the Y value of the top left
corner of the top left pixel.    In a normal georeferenced image this is
the north west corner, and since "northing" (Y) increases as you move
to the north the GeoTransform[3] value will generally be the maximum Y
for the image.

So I think you just need to compute:

   MaxY = AdGeoTransform[3];
   MinY = AdGeoTransform[3] + nX*AdGeoTransform[4]+nY*AdGeoTransform[5];

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From weixj2003ld at 163.com  Mon Apr  5 04:12:40 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Mon Apr  5 04:27:50 2010
Subject: [gdal-dev] create a png file
Message-ID: <1fd7fa1.2189.127cd074ef1.Coremail.weixj2003ld@163.com>

Now,I can read data from a DEM file into an array,but I do not know how to use it to create a png file?
Thk u.
BTW,Some one tell me that freeimage can do it,but  I do not know.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/ace0e3f2/attachment.html
From enigma2006.kishore at gmail.com  Mon Apr  5 14:30:59 2010
From: enigma2006.kishore at gmail.com (Kishore Reddy)
Date: Mon Apr  5 14:31:21 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <201003272307.24152.even.rouault@mines-paris.org>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com> 
	<201003272307.24152.even.rouault@mines-paris.org>
Message-ID: <q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>

Hi,

I tried the above procedure. Its working. I am giving input as Shapefile and
taking geotiff file as output. But the output file is loosing many details
as it has been converted at high resolution. Is there any way  that I can
convert Shapefles into tiles at appropriate resolution so that I can produce
many geotiff files for the same Shapefile?

--
Kishore


On Sun, Mar 28, 2010 at 3:37 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Kishore,
>
> Here is a process you could try:
>
> 1) Prepare an output GDAL file for gdal_rasterize.
>
> You can take care inspiration of
>
> http://trac.osgeo.org/gdal/wiki/FAQRaster#HowcanIcreateablankrasterbasedonavectorfilesextentsforusewithgdal_rasterizeGDAL1.8.0
>
> Modify it to create 1 band (instead of 4) and for step 3) to work, you
> should
> take care of setting a nodata value on the output file and initialize the
> raster with it:
>
> dst_ds.GetRasterBand(1).SetRasterNoDataValue(0)
> dst_ds.GetRasterBand(1).Fill(0)
>
> (if you can compile GDAL from source, you can avoid this step by grabbing
> the
> latest sources that have an enhanced version of gdal_rasterize, directly
> able
> to create the output file . See http://trac.osgeo.org/gdal/ticket/3505)
>
> 2) Use gdal_rasterize to burn the contour lines.
>
> See http://gdal.org/gdal_rasterize.html
>
> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>
> See http://gdal.org/gdal_fillnodata.html
>
> Now, the result should be usable with gdaldem.
>
> Best regards,
>
> Even
>
> Le Saturday 27 March 2010 19:09:06 Kishore Reddy, vous avez ?crit :
> > Hi everyone,
> >
> > I am planing to use gdaldem to create relief shaded maps. But the
> > problem is gdaldem takes only DEM files as input. Unfortunately I have
> > contour lines (in the form of Shape files). So is there any way
> > (command line) to convert these shape files into DEM files?
> >
> > --
> > Kishore
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/0ff6f1d5/attachment.html
From woklist at kyngchaos.com  Mon Apr  5 15:20:00 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr  5 15:20:07 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
Message-ID: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>

I thinking of creating a vrt for approx 19000 geotiff DEM tiles (SRTM).  Any comments on the performance or practicality of this?  Is there a difference in performance between Geotiff and GRASS as the tile format?

Mainly it's so I can easily extract regions for projects, so it would be one-shot gdal_translate runs.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From matt at klaric.com  Mon Apr  5 15:33:59 2010
From: matt at klaric.com (Matt Klaric)
Date: Mon Apr  5 15:41:59 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
Message-ID: <i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>

On Mon, Apr 5, 2010 at 2:20 PM, William Kyngesburye
<woklist@kyngchaos.com>wrote:

> I thinking of creating a vrt for approx 19000 geotiff DEM tiles (SRTM).
>  Any comments on the performance or practicality of this?  Is there a
> difference in performance between Geotiff and GRASS as the tile format?
>
> Mainly it's so I can easily extract regions for projects, so it would be
> one-shot gdal_translate runs.
>
>
I've done something similar.

Check out the SourceProperties tag in http://www.gdal.org/gdal_vrttut.html.
If you specify that for each source image, then GDAL doesn't have to open
all 19000 images at runtime.  The performance is quite good.

--Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/0b8362dd/attachment.html
From jctull at gmail.com  Mon Apr  5 15:48:01 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Apr  5 15:48:08 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
Message-ID: <DD2DBD8F-489C-48F6-8AFE-4019DAFB81EC@gmail.com>

I would be interested in your success or failure. I have a directory of 500 usgs drg map images, and I cannot get them to tile successfully with gdalbuildvrt. I end up with a black image when I load it in visualization software. I tried to find a discussion I had on the gdal irc channel some time ago about this issue in an attempt to troubleshoot and resolve it, but it appears to not have been logged. In short, I was unable to track it to a specific cause nor find a solution. All files are the same projection, bands, etc. The directory of images occupies about 2.5 GB of disk space. There are also gaps in the region being covered, but none of this seems like it should lead to a failure.

John

On Apr 5, 2010, at 12:20 PM, William Kyngesburye wrote:

> I thinking of creating a vrt for approx 19000 geotiff DEM tiles (SRTM).  Any comments on the performance or practicality of this?  Is there a difference in performance between Geotiff and GRASS as the tile format?
> 
> Mainly it's so I can easily extract regions for projects, so it would be one-shot gdal_translate runs.
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
> 
> - the wisdom of Tarzan
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jctull at gmail.com  Mon Apr  5 15:52:53 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Apr  5 15:53:03 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
	<i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
Message-ID: <684445BE-45DC-4E2A-9D5F-27248B70B92A@gmail.com>

On Apr 5, 2010, at 12:33 PM, Matt Klaric wrote:

> 
> On Mon, Apr 5, 2010 at 2:20 PM, William Kyngesburye <woklist@kyngchaos.com> wrote:
> I thinking of creating a vrt for approx 19000 geotiff DEM tiles (SRTM).  Any comments on the performance or practicality of this?  Is there a difference in performance between Geotiff and GRASS as the tile format?
> 
> Mainly it's so I can easily extract regions for projects, so it would be one-shot gdal_translate runs.
> 
> 
> I've done something similar.  
> 
> Check out the SourceProperties tag in http://www.gdal.org/gdal_vrttut.html. If you specify that for each source image, then GDAL doesn't have to open all 19000 images at runtime.  The performance is quite good.  

Looking at the vrt from the file I built with my drg images, I have this:

    <SimpleSource>
      <SourceFilename relativeToVRT="1">./barrett_canyon/o39117a4.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="4463" RasterYSize="5710" DataType="Byte" BlockXSize="4463" BlockYSize="1"/>
      <SrcRect xOff="0" yOff="0" xSize="4463" ySize="5710"/>
      <DstRect xOff="92733" yOff="134498" xSize="4473" ySize="5723"/>
    </SimpleSource>

So, presumably, gdalbuildvrt generates this for you. Is there something missing here to achieve what you are talking about, Matt?

Thanks,
John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/51accf6d/attachment.html
From woklist at kyngchaos.com  Mon Apr  5 16:11:23 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr  5 16:11:27 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
	<i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
Message-ID: <52464530-4DE7-419C-9E49-FA728E2AC394@kyngchaos.com>

On Apr 5, 2010, at 2:33 PM, Matt Klaric wrote:

> Check out the SourceProperties tag in http://www.gdal.org/gdal_vrttut.html. If you specify that for each source image, then GDAL doesn't have to open all 19000 images at runtime.  The performance is quite good.  

That would definitely help, and it looks like gdalbuildvrt does that automatically.  I guess I should just try it ;)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From matt at klaric.com  Mon Apr  5 16:29:34 2010
From: matt at klaric.com (Matt Klaric)
Date: Mon Apr  5 16:34:53 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <684445BE-45DC-4E2A-9D5F-27248B70B92A@gmail.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
	<i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
	<684445BE-45DC-4E2A-9D5F-27248B70B92A@gmail.com>
Message-ID: <v2ieba00f2b1004051329t90eddc90h237f211dfc2788c3@mail.gmail.com>

On Mon, Apr 5, 2010 at 2:52 PM, John C. Tull <jctull@gmail.com> wrote:

>
> Looking at the vrt from the file I built with my drg images, I have this:
>
>     <SimpleSource>
>       <SourceFilename
> relativeToVRT="1">./barrett_canyon/o39117a4.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="4463" RasterYSize="5710"
> DataType="Byte" BlockXSize="4463" BlockYSize="1"/>
>       <SrcRect xOff="0" yOff="0" xSize="4463" ySize="5710"/>
>       <DstRect xOff="92733" yOff="134498" xSize="4473" ySize="5723"/>
>     </SimpleSource>
>
> So, presumably, gdalbuildvrt generates this for you. Is there something
> missing here to achieve what you are talking about, Matt?
>
>
That looks very similar to what I have with only one exception.  I'm using
an absolute path.  Could it be the case that you created this VRT and have
since moved it?  Or the data that it's referring to?  If so, the VRT file
may not be able to find the TIFF files that it's pointing to.

I'd suggest testing this by using gdal_translate to extract a piece of the
VRT where you expect there to exist data.  Run gdal_translate with
CPL_DEBUG=ON in your environment so that you can see debug info to
understand what files it's trying to open.  You should be able to see it
opening one of your TIFF files.....and verbose info if it's failing to.

--Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/cdd02a6c/attachment-0001.html
From jctull at gmail.com  Mon Apr  5 17:41:37 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Apr  5 17:47:07 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <v2ieba00f2b1004051329t90eddc90h237f211dfc2788c3@mail.gmail.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
	<i2neba00f2b1004051233y346abffftf3098246b91285d2@mail.gmail.com>
	<684445BE-45DC-4E2A-9D5F-27248B70B92A@gmail.com>
	<v2ieba00f2b1004051329t90eddc90h237f211dfc2788c3@mail.gmail.com>
Message-ID: <ACBD648A-9A4C-4D58-B117-44F54F9F125C@gmail.com>

On Apr 5, 2010, at 1:29 PM, Matt Klaric wrote:

> 
> 
> On Mon, Apr 5, 2010 at 2:52 PM, John C. Tull <jctull@gmail.com> wrote:
> 
> Looking at the vrt from the file I built with my drg images, I have this:
> 
>     <SimpleSource>
>       <SourceFilename relativeToVRT="1">./barrett_canyon/o39117a4.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="4463" RasterYSize="5710" DataType="Byte" BlockXSize="4463" BlockYSize="1"/>
>       <SrcRect xOff="0" yOff="0" xSize="4463" ySize="5710"/>
>       <DstRect xOff="92733" yOff="134498" xSize="4473" ySize="5723"/>
>     </SimpleSource>
> 
> So, presumably, gdalbuildvrt generates this for you. Is there something missing here to achieve what you are talking about, Matt?
> 
> 
> That looks very similar to what I have with only one exception.  I'm using an absolute path.  Could it be the case that you created this VRT and have since moved it?  Or the data that it's referring to?  If so, the VRT file may not be able to find the TIFF files that it's pointing to.  
> 
> I'd suggest testing this by using gdal_translate to extract a piece of the VRT where you expect there to exist data.  Run gdal_translate with CPL_DEBUG=ON in your environment so that you can see debug info to understand what files it's trying to open.  You should be able to see it opening one of your TIFF files.....and verbose info if it's failing to.  
> 

It's been a little while since I've revisited this issue. Returning to it, things appear to be working with gdal-1.7.1 for me. The only issue appears to be qgis not rendering it when the view is at a really large scale. This is ok for me because I really only want to see the data at fairly low scales anyway, say 50k and lower.

Thanks for the tips, though, Matt. Relative or full paths both work for me, for the record.

Cheers,
John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100405/f143858a/attachment.html
From weixj2003ld at 163.com  Tue Apr  6 00:11:16 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Tue Apr  6 00:26:34 2010
Subject: [gdal-dev] create  a png file
Message-ID: <c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com>

I read data from a DEM file, and want to create a .png .Now I have read data, but I do not know how to create a png file that contains the height map value of each point from the DEM file.
Thk u.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/becdac11/attachment.html
From Luke.Pinner at environment.gov.au  Tue Apr  6 01:32:26 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Tue Apr  6 01:32:31 2010
Subject: [gdal-dev] NetCDF geotransform - pixel centre/upper-left issue
Message-ID: <64102B2FB850C345B04D09C82018F45F0273EC48@ACT01VEXCCL04.internal.govt>

The NetCDF driver computes the pixel centre from lat/lon variables (see
http://trac.osgeo.org/gdal/ticket/1506).  

Is this correct or should it compute pixel upper-left?

Using the example NetCDF dataset attached to the above ticket
(http://trac.osgeo.org/gdal/attachment/ticket/1506/out.nc), gdalinfo
reports the min longitude value to be -1.40625 which is not a valid
longitude (it's 1/2 a pixel less than 0 which is the min value in the
NetCDF lon variable).

gdalinfo out.nc
$ gdalinfo -nomd out.nc
Warning 1: Latitude grid not spaced evenly.
Seting projection for grid spacing is within 0.1 degrees threshold.

Driver: netCDF/Network Common Data Format
Files: out.nc
Size is 128, 64
Coordinate System is `'
Origin = (-1.406250000000000,89.258462312871046)
Pixel Size = (2.812500000000000,-2.789326947277220)
Corner Coordinates:
Upper Left  (  -1.4062500,  89.2584623) 
Lower Left  (  -1.4062500, -89.2584623) 
Upper Right (     358.594,      89.258) 
Lower Right (     358.594,     -89.258) 
Center      ( 178.5937500,   0.0000000) 
Band 1 Block=128x1 Type=Float32, ColorInterp=Undefined
  NoData Value=9.96920996838686905e+36

Regards
Luke


------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From mdsumner at gmail.com  Tue Apr  6 02:26:35 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue Apr  6 02:34:33 2010
Subject: [gdal-dev] NetCDF geotransform - pixel centre/upper-left issue
In-Reply-To: <64102B2FB850C345B04D09C82018F45F0273EC48@ACT01VEXCCL04.internal.govt>
References: <64102B2FB850C345B04D09C82018F45F0273EC48@ACT01VEXCCL04.internal.govt>
Message-ID: <s2o522664f81004052326sc87bcc4dj6bafbd64363fe01@mail.gmail.com>

I believe that NetCDF generally uses cell centres to specify pixel
coordinates, and there is no way to specify cell corners except by
adding metadata about the actual dimensions boundaries (this is more
problematic again if coordinates are not regular since you cannot
assume a regular half cell).

My understanding is that GDAL assumes cell centres for NetCDF, and
from the data I've seen this is reasonable. The data model in NetCDF
is more general than GDAL in some ways and it's simply not possible to
answer this issue completely.  The unhappy news is that there is no
easy answer but IMO GDAL is not incorrect here.

In that example file the first longitude is 0 and all subsequent
values are regularly spaced from there up to one cell less than 360,
so the cell bounds at [0,360] are obvious - but this is not always the
case. The latitudes are not regular and what was intended cannot
always be determined in many cases (although in this file the
boundaries are fairly obviously at [-90,90] offset from the min/max
values of -87.8638  87.8638 )

For some more background there was a discussion about the possible
need for a distinction in NetCDF between cell and corner registration
here:

http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2009/002721.html

In particular this statement is one confirmation I found of the lack
of cell/corner distinction apart from boundary metadata.

"Coordinate bounds allow edges to be explicit, and you could ask the
application developer to look
for those. When not specified, I put the edges halfway between the
coordinates."

Cheers, Mike.

On Tue, Apr 6, 2010 at 3:32 PM, Pinner, Luke
<Luke.Pinner@environment.gov.au> wrote:
> The NetCDF driver computes the pixel centre from lat/lon variables (see
> http://trac.osgeo.org/gdal/ticket/1506).
>
> Is this correct or should it compute pixel upper-left?
>
> Using the example NetCDF dataset attached to the above ticket
> (http://trac.osgeo.org/gdal/attachment/ticket/1506/out.nc), gdalinfo
> reports the min longitude value to be -1.40625 which is not a valid
> longitude (it's 1/2 a pixel less than 0 which is the min value in the
> NetCDF lon variable).
>
> gdalinfo out.nc
> $ gdalinfo -nomd out.nc
> Warning 1: Latitude grid not spaced evenly.
> Seting projection for grid spacing is within 0.1 degrees threshold.
>
> Driver: netCDF/Network Common Data Format
> Files: out.nc
> Size is 128, 64
> Coordinate System is `'
> Origin = (-1.406250000000000,89.258462312871046)
> Pixel Size = (2.812500000000000,-2.789326947277220)
> Corner Coordinates:
> Upper Left ?( ?-1.4062500, ?89.2584623)
> Lower Left ?( ?-1.4062500, -89.2584623)
> Upper Right ( ? ? 358.594, ? ? ?89.258)
> Lower Right ( ? ? 358.594, ? ? -89.258)
> Center ? ? ?( 178.5937500, ? 0.0000000)
> Band 1 Block=128x1 Type=Float32, ColorInterp=Undefined
> ?NoData Value=9.96920996838686905e+36
>
> Regards
> Luke
>
>
> ------
> If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.
>
>
>
> Please consider the environment before printing this email.
>
> ------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From schut at sarvision.nl  Tue Apr  6 03:36:14 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Apr  6 03:44:07 2010
Subject: [gdal-dev] vrt performance with 1000's of tiles?
In-Reply-To: <DD2DBD8F-489C-48F6-8AFE-4019DAFB81EC@gmail.com>
References: <CA6DBF4C-8EB0-47AA-824B-8F60AF779E60@kyngchaos.com>
	<DD2DBD8F-489C-48F6-8AFE-4019DAFB81EC@gmail.com>
Message-ID: <4BBAE46E.4040506@sarvision.nl>

FWIW, I've done something similar (worldwide vrt of all cgiar srtm4 
tiles), which is working flawlessly and performance is good. However, I 
am not using it for direct viewing, just to be able to extract arbitrary 
subsets of specific regions with gdalwarp.

If I would think of viewing the entire dataset, I think I'd rather setup 
a local wms for that with tiled geotiffs with overviews (pyramids) as 
input, to prevent the need to read and resample all data when a view of 
the entire world is requested. For viewing, you could try to generate 
some external overviews on the vrt file, maybe that solves the problem?

Vincent.

On 04/05/2010 09:48 PM, John C. Tull wrote:
> I would be interested in your success or failure. I have a directory of 500 usgs drg map images, and I cannot get them to tile successfully with gdalbuildvrt. I end up with a black image when I load it in visualization software. I tried to find a discussion I had on the gdal irc channel some time ago about this issue in an attempt to troubleshoot and resolve it, but it appears to not have been logged. In short, I was unable to track it to a specific cause nor find a solution. All files are the same projection, bands, etc. The directory of images occupies about 2.5 GB of disk space. There are also gaps in the region being covered, but none of this seems like it should lead to a failure.
>
> John
>
> On Apr 5, 2010, at 12:20 PM, William Kyngesburye wrote:
>
>    
>> I thinking of creating a vrt for approx 19000 geotiff DEM tiles (SRTM).  Any comments on the performance or practicality of this?  Is there a difference in performance between Geotiff and GRASS as the tile format?
>>
>> Mainly it's so I can easily extract regions for projects, so it would be one-shot gdal_translate runs.
>>
>> -----
>> William Kyngesburye<kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>>
>> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>>
>> - the wisdom of Tarzan
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    
From manolopm at gmail.com  Tue Apr  6 04:33:06 2010
From: manolopm at gmail.com (Manolo Padron Martinez)
Date: Tue Apr  6 04:33:30 2010
Subject: [gdal-dev] Getting an WMS without XML file.
Message-ID: <z2t55fad2461004060133k7fb713e7tc99c008ffec7793e@mail.gmail.com>

Hi:

I'm trying to use gdal to get images from a WMS server, I got a simple
code to do it (using GDALOpen and RasterIO methods). But I need to
make the petition without create previously a XML file, I've been
looking into documentation but I didn't find a way to do it. Anyone
knows how to do it?

Regards from Canary Islands

Manolo Padron Martinez
From pedroroma1982 at gmail.com  Tue Apr  6 10:27:09 2010
From: pedroroma1982 at gmail.com (Pedro Roma)
Date: Tue Apr  6 10:27:13 2010
Subject: [gdal-dev] List of Supported EPSG's
Message-ID: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>

Greetings
How can I know which EPSG's codes/systems are supported by GDAL for
gdal_info, translate and warp?
Thank you

Best Regards
Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/46e0a581/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Apr  6 12:13:09 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  6 12:13:11 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
	<q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>
Message-ID: <q2seb502d881004060913v2f2b7ec9z7c6e87190b044494@mail.gmail.com>

Kishore,

You can adjust the geotiff's dimensions and extents from within the script.
Then use the -te option in gdal_rasterize to limit the extents of the vector
data.

Other way is to create parts of the shape file using ogr2ogr with the option
-clipsrc (http://gdal.org/ogr2ogr.html).

On Tue, Apr 6, 2010 at 12:00 AM, Kishore Reddy <enigma2006.kishore@gmail.com
> wrote:

> Hi,
>
> I tried the above procedure. Its working. I am giving input as Shapefile
> and taking geotiff file as output. But the output file is loosing many
> details as it has been converted at high resolution. Is there any way  that
> I can convert Shapefles into tiles at appropriate resolution so that I can
> produce many geotiff files for the same Shapefile?
>
> --
> Kishore
>
>
>
> On Sun, Mar 28, 2010 at 3:37 AM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
>> Kishore,
>>
>> Here is a process you could try:
>>
>> 1) Prepare an output GDAL file for gdal_rasterize.
>>
>> You can take care inspiration of
>>
>> http://trac.osgeo.org/gdal/wiki/FAQRaster#HowcanIcreateablankrasterbasedonavectorfilesextentsforusewithgdal_rasterizeGDAL1.8.0
>>
>> Modify it to create 1 band (instead of 4) and for step 3) to work, you
>> should
>> take care of setting a nodata value on the output file and initialize the
>> raster with it:
>>
>> dst_ds.GetRasterBand(1).SetRasterNoDataValue(0)
>> dst_ds.GetRasterBand(1).Fill(0)
>>
>> (if you can compile GDAL from source, you can avoid this step by grabbing
>> the
>> latest sources that have an enhanced version of gdal_rasterize, directly
>> able
>> to create the output file . See http://trac.osgeo.org/gdal/ticket/3505)
>>
>> 2) Use gdal_rasterize to burn the contour lines.
>>
>> See http://gdal.org/gdal_rasterize.html
>>
>> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>>
>> See http://gdal.org/gdal_fillnodata.html
>>
>> Now, the result should be usable with gdaldem.
>>
>> Best regards,
>>
>> Even
>>
>> Le Saturday 27 March 2010 19:09:06 Kishore Reddy, vous avez ?crit :
>> > Hi everyone,
>> >
>> > I am planing to use gdaldem to create relief shaded maps. But the
>> > problem is gdaldem takes only DEM files as input. Unfortunately I have
>> > contour lines (in the form of Shape files). So is there any way
>> > (command line) to convert these shape files into DEM files?
>> >
>> > --
>> > Kishore
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/363094fe/attachment.html
From mseanhills at villagis.com  Tue Apr  6 12:23:44 2010
From: mseanhills at villagis.com (Sean Hills)
Date: Tue Apr  6 12:23:50 2010
Subject: [gdal-dev] List of Supported EPSG's
In-Reply-To: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>
References: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>
Message-ID: <v2rd3957af01004060923hf12d0a4bm24b87e13e5bf15bb@mail.gmail.com>

I've found this site pretty useful :

http://spatialreference.org/

<http://spatialreference.org/>Hope it helps!

Sean

On Tue, Apr 6, 2010 at 9:27 AM, Pedro Roma <pedroroma1982@gmail.com> wrote:

> Greetings
> How can I know which EPSG's codes/systems are supported by GDAL for
> gdal_info, translate and warp?
> Thank you
>
> Best Regards
> Pedro
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sean Hills
VillaGIS, Inc.
7719 E. Hwy. 76
P.O. Box 47
Kirbyville, MO 65679

W 417-334-1366
M 417-294-1396
F  417-334-1948
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/86af4ea1/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  6 12:27:59 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  6 12:34:39 2010
Subject: [gdal-dev] create a png file
In-Reply-To: <c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com>
References: <c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com>
Message-ID: <t2veb502d881004060927g4be8db1agfd38a7b74a17816@mail.gmail.com>

Please refer to http://www.gdal.org/gdal_tutorial.html

2010/4/6 weixj2003ld <weixj2003ld@163.com>

> I read data from a DEM file, and want to create a .png .Now I have read
> data, but I do not know how to create a png file that contains the height
> map value of each point from the DEM file.
> Thk u.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/f290397f/attachment.html
From gbassiere at gmail.com  Tue Apr  6 12:45:45 2010
From: gbassiere at gmail.com (=?ISO-8859-1?Q?Gilles_Bassi=E8re?=)
Date: Tue Apr  6 12:54:10 2010
Subject: [gdal-dev] List of Supported EPSG's
In-Reply-To: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>
References: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>
Message-ID: <4BBB6539.8080006@gmail.com>

Pedro Roma wrote:
> How can I know which EPSG's codes/systems are supported by GDAL for
> gdal_info, translate and warp?

Hi Pedro

I believe GDAL relies on Proj for everything related to projections.

Within the Proj installation directory, there is a set of files which
hold code/SRS description pairs. One of these files is named "epsg" and
contains a subset of the EPSG database described with the proj syntax.
In my case (Ubuntu), this file is /usr/share/proj/epsg.

Hope this helps.

Regards
-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From robert.zermeno at navy.mil  Tue Apr  6 15:16:50 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Tue Apr  6 15:16:54 2010
Subject: [gdal-dev] GDAL and JPEG2000 (Kakadu specially),
	manually reading image data
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA9102C1C2C7@nawechlkez02v.nadsuswe.nads.navy.mil>

Can anyone let me know how to properly read a 24bpp JPEG2000 image data?  This image has 1 Band overview.  I am using the C API.

I have a few questions.  Please respond even if you know something about any of the questions I have.

1.  Can someone reference me to where I can acquire what Band overviews are in respect to JPEG2000?

2. What does GDALGetOverview() really return when referring to image data?  I understand it returns a GDALRasterBandH in which I can call GDALReadBlock(), but it does not successfully (I believe its because my image array is not big enough).

3. In GDALReadBlock(), what does it mean when this method returns a "natural" block from the raster band?  So, since my image is say 24bpp 900 x 900, will return a line of 900 x 3 (for RGB per pixel)?

4.  When using GDALReadBlock() when the image has an overview, I still retrieve image data before even calling GDALGetOverview().  What data am I actually getting?

My main issue is understanding how the image data in JPEG2000 is retrieved by GDAL and what GDALGetOverview() and GDALReadBlock() really returns to the programmer when your image contains an Overview? 

Robert
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 4926 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/6ee1299d/smime-0001.bin
From wendell at enflight.com  Tue Apr  6 15:22:43 2010
From: wendell at enflight.com (Wendell Turner)
Date: Tue Apr  6 15:49:05 2010
Subject: [gdal-dev] vrt removes transparent pixels?
Message-ID: <20100406192243.GA6938@cloud3.rho.net>

I want to change the color palette on a gif file.  The
instructions on the wiki here:
  http://trac.osgeo.org/gdal/wiki/FAQRaster#Howtocreateormodifyanimagecolortable
explain how to do it:
  gdal_translate -of VRT your.tif your.vrt
  gdal_translate your.vrt your_fixedup.tif

but doing this (without editing the .vrt file) changes
transparent pixels to white.  Is there a way to use
gdal_translate to do this and also keep transparent pixels?

Or is that related to error message from gimp?
  .gif: unknown field with tag 42113 (0xa481) encountered
(gimp didn't complain about the original image)


Thanks,

Wendell

From pauldelamater at gmail.com  Tue Apr  6 15:54:28 2010
From: pauldelamater at gmail.com (Paul Delamater)
Date: Tue Apr  6 15:54:50 2010
Subject: [gdal-dev] Segmentation Fault with gdal_fillnodata.py
Message-ID: <k2o4791a2001004061254y1b80a213jfc3e88d6f7842c99@mail.gmail.com>

A couple of questions...

1. I'm getting a Segmentation Fault when using gdal_fillnodata.py on an .img
file that I created in GDAL.  I'm running GDAL 1.7.1 on Ubuntu 9.10
(64bit).  The file is big (1.2Gb).

Here's my command:
$ gdal_fillnodata.py -md 1 zone10_albers.img -nomask zone10_test.img -of HFA

I get to about 50% done in the progress bar, then Segmenation Fault.
However, the process outputs 4 files:: zone10_test.img,
3172751088_0fill_filtmask_work.tif, 3172751088_0fill_val_work.tif,
3172751088_0fill_y_work.tif.  Unfortunately, the .img output doesn't have
any info in it.

$ gdalinfo zone10_test.img
Driver: HFA/Erdas Imagine Images (.img)
Files: zone10_test.img
Size is 16000, 40667
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,40667.0)
Upper Right (16000.0,    0.0)
Lower Right (16000.0,40667.0)
Center      ( 8000.0,20333.5)
Band 1 Block=64x64 Type=Int16, ColorInterp=Undefined
  Description = Layer_1
  Metadata:
    LAYER_TYPE=athematic

Any ideas on what could be causing this?  My other gdal.py commands work
without problem.  Because I was curious, I had a terminal window running
'top' to see what kind of system resources the process was using and I
didn't see anything that would lead me to believe it was a memory problem.

2. Is there any method available to set multiple values to NoData?  I have
about 6000 USGS DEMs and some (randomly) have a few pixels on their edge
with values of 32767 and -32767 (NoData pixels are supposed to be -32766).
Can I give multiple values when using the nodata flag in gdalmerge or
gdalwarp?

Thanks much, -Paul Delamater
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100406/8cccba3e/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  6 16:26:35 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  6 16:26:40 2010
Subject: [gdal-dev] Segmentation Fault with gdal_fillnodata.py
In-Reply-To: <k2o4791a2001004061254y1b80a213jfc3e88d6f7842c99@mail.gmail.com>
References: <k2o4791a2001004061254y1b80a213jfc3e88d6f7842c99@mail.gmail.com>
Message-ID: <o2keb502d881004061326s335ca1abm357691afc58fe76a@mail.gmail.com>

Paul,

I cannot much much regarding the first question. Since the data is large you
have to find out the reason for segfault yourselves. Try running it with gdb
as "gdb --args python gdal_fillnodata.py ..." and examine the call stack
after the segfault with the command "bt" in the gdb console.

For the second question, you could create a vrt file mentioning 32767 as the
source's NODATA and -32767 as vrt's NoDataValue. The vrt driver translates
the pixels with value 32767 to -32767. Refer to
http://www.gdal.org/gdalbuildvrt.html and/or
http://www.gdal.org/gdal_vrttut.html for more details. This method is not
good if you have more than a few nodata values.


On Wed, Apr 7, 2010 at 1:24 AM, Paul Delamater <pauldelamater@gmail.com>wrote:

> A couple of questions...
>
> 1. I'm getting a Segmentation Fault when using gdal_fillnodata.py on an
> .img file that I created in GDAL.  I'm running GDAL 1.7.1 on Ubuntu 9.10
> (64bit).  The file is big (1.2Gb).
>
> Here's my command:
> $ gdal_fillnodata.py -md 1 zone10_albers.img -nomask zone10_test.img -of
> HFA
>
> I get to about 50% done in the progress bar, then Segmenation Fault.
> However, the process outputs 4 files:: zone10_test.img,
> 3172751088_0fill_filtmask_work.tif, 3172751088_0fill_val_work.tif,
> 3172751088_0fill_y_work.tif.  Unfortunately, the .img output doesn't have
> any info in it.
>
> $ gdalinfo zone10_test.img
> Driver: HFA/Erdas Imagine Images (.img)
> Files: zone10_test.img
> Size is 16000, 40667
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,40667.0)
> Upper Right (16000.0,    0.0)
> Lower Right (16000.0,40667.0)
> Center      ( 8000.0,20333.5)
> Band 1 Block=64x64 Type=Int16, ColorInterp=Undefined
>   Description = Layer_1
>   Metadata:
>     LAYER_TYPE=athematic
>
> Any ideas on what could be causing this?  My other gdal.py commands work
> without problem.  Because I was curious, I had a terminal window running
> 'top' to see what kind of system resources the process was using and I
> didn't see anything that would lead me to believe it was a memory problem.
>
> 2. Is there any method available to set multiple values to NoData?  I have
> about 6000 USGS DEMs and some (randomly) have a few pixels on their edge
> with values of 32767 and -32767 (NoData pixels are supposed to be -32766).
> Can I give multiple values when using the nodata flag in gdalmerge or
> gdalwarp?
>
> Thanks much, -Paul Delamater
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/eab5986c/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  6 16:29:35 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  6 16:37:18 2010
Subject: [gdal-dev] vrt removes transparent pixels?
In-Reply-To: <20100406192243.GA6938@cloud3.rho.net>
References: <20100406192243.GA6938@cloud3.rho.net>
Message-ID: <x2keb502d881004061329mc1e61dadw43d93f93aa22809c@mail.gmail.com>

Wendell,

Can you provide the exact commands you used?

On Wed, Apr 7, 2010 at 12:52 AM, Wendell Turner <wendell@enflight.com>wrote:

> I want to change the color palette on a gif file.  The
> instructions on the wiki here:
>
> http://trac.osgeo.org/gdal/wiki/FAQRaster#Howtocreateormodifyanimagecolortable
> explain how to do it:
>  gdal_translate -of VRT your.tif your.vrt
>  gdal_translate your.vrt your_fixedup.tif
>
> but doing this (without editing the .vrt file) changes
> transparent pixels to white.  Is there a way to use
> gdal_translate to do this and also keep transparent pixels?
>
> Or is that related to error message from gimp?
>  .gif: unknown field with tag 42113 (0xa481) encountered
> (gimp didn't complain about the original image)
>
>
> Thanks,
>
> Wendell
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/cefe3189/attachment.html
From wendell at enflight.com  Tue Apr  6 16:49:21 2010
From: wendell at enflight.com (Wendell Turner)
Date: Tue Apr  6 16:49:23 2010
Subject: [gdal-dev] vrt removes transparent pixels?
In-Reply-To: <x2keb502d881004061329mc1e61dadw43d93f93aa22809c@mail.gmail.com>
References: <20100406192243.GA6938@cloud3.rho.net>
	<x2keb502d881004061329mc1e61dadw43d93f93aa22809c@mail.gmail.com>
Message-ID: <20100406204921.GA9803@cloud3.rho.net>

On Wed, Apr 07, 2010 at 01:59:35AM +0530, Chaitanya kumar CH wrote:
> Wendell,
> 
> Can you provide the exact commands you used?

  wget http://radar.weather.gov/ridge/Conus/RadarImg/centgrtlakes_radaronly.gif
  gdal_translate -of VRT centgrtlakes_radaronly.gif foo.vrt
  cp centgrtlakes_radaronly.gif test.gif
  gdal_translate foo.vrt test.gif

  gimp centgrtlakes_radaronly.gif test.gif

Also, I notice that the test.gif file is about ten times the
size of the original one.

Thanks,

Wendell

> On Wed, Apr 7, 2010 at 12:52 AM, Wendell Turner <wendell@enflight.com>wrote:
> 
> > I want to change the color palette on a gif file.  The
> > instructions on the wiki here:
> >
> > http://trac.osgeo.org/gdal/wiki/FAQRaster#Howtocreateormodifyanimagecolortable
> > explain how to do it:
> >  gdal_translate -of VRT your.tif your.vrt
> >  gdal_translate your.vrt your_fixedup.tif
> >
> > but doing this (without editing the .vrt file) changes
> > transparent pixels to white.  Is there a way to use
> > gdal_translate to do this and also keep transparent pixels?
> >
> > Or is that related to error message from gimp?
> >  .gif: unknown field with tag 42113 (0xa481) encountered
> > (gimp didn't complain about the original image)
From warmerdam at pobox.com  Tue Apr  6 20:01:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  6 20:01:29 2010
Subject: [gdal-dev] GDAL and JPEG2000 (Kakadu specially), manually
	reading image data
In-Reply-To: <F8A8A114E3F41D4D9157F1BECCA3BA9102C1C2C7@nawechlkez02v.nadsuswe.nads.navy.mil>
References: <F8A8A114E3F41D4D9157F1BECCA3BA9102C1C2C7@nawechlkez02v.nadsuswe.nads.navy.mil>
Message-ID: <4BBBCB55.9000004@pobox.com>

Zermeno, Robert J CIV NAVAIR, 472100D wrote:
> Can anyone let me know how to properly read a 24bpp JPEG2000 image data?
> This image has 1 Band overview.  I am using the C API.
> 
> I have a few questions.  Please respond even if you know something about any
> of the questions I have.
> 
> 1.  Can someone reference me to where I can acquire what Band overviews are
> in respect to JPEG2000?

Robert,

I don't understand this question.

> 2. What does GDALGetOverview() really return when referring to image data?
> I understand it returns a GDALRasterBandH in which I can call
> GDALReadBlock(), but it does not successfully (I believe its because my
> image array is not big enough).

GDALGetOverview() returns a GDALRasterBandH which can be used to access
the reduced resolution overview of the main full res image.  In the
case of JPEG2000 the overview does not exist on disk as a distinct object,
but rather is mixed into the compressed data stream for the image is a
whole.  But the overview band objects fairly efficiently extract the
image overview data.

I do not understand your point about GDALReadBlock not working.  I will
note that it is often better to use the RasterIO() interface as the band
or dataset level rather than fetching by blocks with JPEG2000.

> 3. In GDALReadBlock(), what does it mean when this method returns a
> "natural" block from the raster band?  So, since my image is say 24bpp 900 x
> 900, will return a line of 900 x 3 (for RGB per pixel)?

Many file formats have a "natural block size".  For scanline oriented
formats the block size is one full scanline.  For tiled images, it is one
tile.  JPEG2000 does not really have a natural block size, so we arbitrarily
establish a block size (usually 2048x128 for the JP2KAK JPEG2000 driver)
that provides for reasonably efficient access.

> 4.  When using GDALReadBlock() when the image has an overview, I still
> retrieve image data before even calling GDALGetOverview().  What data am I
> actually getting?

You are presumably getting blocks of imagery from the full resolution image.

> My main issue is understanding how the image data in JPEG2000 is retrieved
> by GDAL and what GDALGetOverview() and GDALReadBlock() really returns to the
> programmer when your image contains an Overview?

Well, the overview data is extracted from the JPEG2000 datastream by setting
a window and resolution level with the lower level library (usually
Kakadu) and then reading the imagery back.  The lower level library takes
care of the complex logic.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From weixj2003ld at 163.com  Tue Apr  6 23:09:16 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Tue Apr  6 23:24:41 2010
Subject: [gdal-dev] create a png file
In-Reply-To: <t2veb502d881004060927g4be8db1agfd38a7b74a17816@mail.gmail.com>
References: <t2veb502d881004060927g4be8db1agfd38a7b74a17816@mail.gmail.com>
	<c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com>
Message-ID: <313253.3887.127d63e3f9c.Coremail.weixj2003ld@163.com>

Thk u for your reply.
I read the tuorail.but I think that will not satisfy my need.
I want to create a .png file,and it only contains height data and not contains metadata, a coordinate system, a georeferencing transform, size of raster and various other information,I find that the Create() and CreateCopy(). is will create a file that contains all the things.
Kind regards.
 
 
Please refer to http://www.gdal.org/gdal_tutorial.html


2010/4/6 weixj2003ld <weixj2003ld@163.com>

I read data from a DEM file, and want to create a .png .Now I have read data, but I do not know how to create a png file that contains the height map value of each point from the DEM file.
Thk u.



_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/ 
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/e40bd801/attachment.html
From weixj2003ld at 163.com  Wed Apr  7 00:03:25 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr  7 00:03:34 2010
Subject: [gdal-dev] DEM format and what difference between dem and geotiff
Message-ID: <1a142ed.45fb.127d66fd393.Coremail.weixj2003ld@163.com>

1.I use GDAL to read a DEM file,and its extension is .img ,what other extensions for DEM file?
2.When I reand a geotff file and a dem file,I find that the dfference between them as follows:
                                                                                                              geotiff:             Dem
     GetDriver()->GetDescription() :                                                         GTiff,          HFA
     GetDriver()->GetMetadatItem(GDAL_DMD_LONGNAME):                GeoTIFF     Drdas Imagine Images(.img)
     bandnumber                                                                                           6                 1
 
Now,I want to know that,the bandnumber of DEM file is always 1?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/13455948/attachment.html
From chaitanya.ch at gmail.com  Wed Apr  7 00:13:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr  7 00:21:37 2010
Subject: [gdal-dev] create a png file
In-Reply-To: <313253.3887.127d63e3f9c.Coremail.weixj2003ld@163.com>
References: <c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com>
	<t2veb502d881004060927g4be8db1agfd38a7b74a17816@mail.gmail.com>
	<313253.3887.127d63e3f9c.Coremail.weixj2003ld@163.com>
Message-ID: <m2jeb502d881004062113u9a86fdev72ebaeee072b9f1e@mail.gmail.com>

Create() does need all the info. Just pass NULL for the last argument *
papszParmList.*

On Wed, Apr 7, 2010 at 8:39 AM, weixj2003ld <weixj2003ld@163.com> wrote:

> Thk u for your reply.
> I read the tuorail.but I think that will not satisfy my need.
> I want to create a .png file,and it only contains height data and not
> contains metadata, a coordinate system, a georeferencing transform, size of
> raster and various other information,I find that the Create() and
> CreateCopy(). is will create a file that contains all the things.
> Kind regards.
>
>
>
> Please refer to http://www.gdal.org/gdal_tutorial.html
>
> 2010/4/6 weixj2003ld <weixj2003ld@163.com>
>
>> I read data from a DEM file, and want to create a .png .Now I have read
>> data, but I do not know how to create a png file that contains the height
>> map value of each point from the DEM file.
>> Thk u.
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.2416N 80.1426E
>
>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/47e09220/attachment.html
From chaitanya.ch at gmail.com  Wed Apr  7 00:34:45 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr  7 00:34:50 2010
Subject: [gdal-dev] DEM format and what difference between dem and geotiff
In-Reply-To: <1a142ed.45fb.127d66fd393.Coremail.weixj2003ld@163.com>
References: <1a142ed.45fb.127d66fd393.Coremail.weixj2003ld@163.com>
Message-ID: <r2xeb502d881004062134pac16c7d8j61c22e2e60272c02@mail.gmail.com>

weixj2003ld,

DEM = Digital Elevation Model

.img = Irdas Imagine Format

DEM can be represented in most raster formats.
Refer to http://en.wikipedia.org/wiki/Digital_elevation_model

2. There is only one band because there is only the elevation data to store.
The colour table takes care of the colours.

2010/4/7 weixj2003ld <weixj2003ld@163.com>

> 1.I use GDAL to read a DEM file,and its extension is .img ,what other
> extensions for DEM file?
> 2.When I reand a geotff file and a dem file,I find that the dfference
> between them as follows:
>
>
>   geotiff:             Dem
>      GetDriver()->GetDescription()
> :                                                         GTiff,
> HFA
>      GetDriver()->GetMetadatItem(GDAL_DMD_LONGNAME):
> GeoTIFF     Drdas Imagine Images(.img)
>
> bandnumber
> 6                 1
>
> Now,I want to know that,the bandnumber of DEM file is always 1?
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/468d8257/attachment.html
From weixj2003ld at 163.com  Wed Apr  7 02:27:25 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr  7 02:47:34 2010
Subject: [gdal-dev] getcolortable is null
Message-ID: <12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>

I read a geotiff file, and find that 
poBand->GetColorTable()==NULL
But I use ERDAS IMAGINE9.2 (a software that deal with geotiff), I find that it is not grey,but I use "gdal_translate -b 6 -of JPEG old.tif net.jpg", find that is is grey.
why?
Thk u.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/18e2c6b3/attachment.html
From chaitanya.ch at gmail.com  Wed Apr  7 07:08:02 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr  7 08:30:06 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <w2l6e7b1b711004070339kdeeb3c64iae0138fb1fcad36c@mail.gmail.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
	<q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>
	<q2seb502d881004060913v2f2b7ec9z7c6e87190b044494@mail.gmail.com>
	<w2l6e7b1b711004070339kdeeb3c64iae0138fb1fcad36c@mail.gmail.com>
Message-ID: <p2peb502d881004070408k97b08dcnbaed0442351fb8ee@mail.gmail.com>

Kishore,

I think the area you clipped to does not have any features. This should not
be a problem.

On Wed, Apr 7, 2010 at 4:09 PM, Kishore Reddy
<enigma2006.kishore@gmail.com>wrote:

> I must be doing something terribly wrong I guess. Heres is the output.
>
> >> ogrinfo -al Contour_100.shp | grep Extent
> Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)
>
> >> ogr2ogr -clipsrc 1966328 399612 1984324 404608 clipped.shp
> Contour_100.shp
>
> >>  ogrinfo -al clipped.shp | grep Extent
> Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
>
> Some more details of the input file:
> >> ogrinfo -al Contour_100.shp | head -25
> INFO: Open of `Contour_100.shp'
>       using driver `ESRI Shapefile' successful.
>
> Layer name: Contour_100
> Geometry: Line String
> Feature Count: 1760
> Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)
> Layer SRS WKT:
> PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200_Feet",
>     GEOGCS["GCS_North_American_1983",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS_1980",6378137.0,298.257222101]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["False_Easting",2000000.002616666],
>     PARAMETER["False_Northing",0.0],
>     PARAMETER["Central_Meridian",-79.0],
>     PARAMETER["Standard_Parallel_1",34.33333333333334],
>     PARAMETER["Standard_Parallel_2",36.16666666666666],
>     PARAMETER["Latitude_Of_Origin",33.75],
>     UNIT["Foot_US",0.3048006096012192]]
> Elevation: Integer (4.0)
> TILE: String (8.0)
> Interval: Integer (4.0)
>
>
> Please correct me where am I going wrong.
>
> --
> Kishore
>
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/8490af0d/attachment-0001.html
From warmerdam at pobox.com  Wed Apr  7 07:27:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  7 08:30:52 2010
Subject: [gdal-dev] getcolortable is null
In-Reply-To: <12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
References: <12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
Message-ID: <4BBC6C37.4080008@pobox.com>

weixj2003ld wrote:
> I read a geotiff file, and find that
> poBand->GetColorTable()==NULL

Wei,

Presumably GetColorTable() returns NULL because the GeoTIFF file
does not have a color table.

> But I use ERDAS IMAGINE9.2 (a software that deal with geotiff), I find 
> that it is not grey,but I use "gdal_translate -b 6 -of JPEG old.tif 
> net.jpg", find that is is grey.

Well, you are selecting only one band withouta color table to export
to net.jpg.  How do you expect it to be anything other than greyscale?
If you want an RGB jpeg file then select three bands to be used as
red, green and blue.

eg.
gdal_translate -b 4 -b 5 -b 6 o-of JPEG  old.tif net.jpg

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pedroroma1982 at gmail.com  Wed Apr  7 07:24:36 2010
From: pedroroma1982 at gmail.com (Pedro Roma)
Date: Wed Apr  7 08:30:53 2010
Subject: [gdal-dev] List of Supported EPSG's
In-Reply-To: <4BBB6539.8080006@gmail.com>
References: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>
	<4BBB6539.8080006@gmail.com>
Message-ID: <o2r3461e9f01004070424x2cc78d7j260c197395d1c038@mail.gmail.com>

Thank you Gil. But what you are saying is that I can only do that after I
install/compile GDAL in my system right?

By the way, is there any "clash" between PROJ 4.7 version with not-so-new
versions of GDAL (in gdalwarp, gdalinfo, gdaltranslate)

Pedro

2010/4/6 Gilles Bassi?re <gbassiere@gmail.com>

> Pedro Roma wrote:
> > How can I know which EPSG's codes/systems are supported by GDAL for
> > gdal_info, translate and warp?
>
> Hi Pedro
>
> I believe GDAL relies on Proj for everything related to projections.
>
> Within the Proj installation directory, there is a set of files which
> hold code/SRS description pairs. One of these files is named "epsg" and
> contains a subset of the EPSG database described with the proj syntax.
> In my case (Ubuntu), this file is /usr/share/proj/epsg.
>
> Hope this helps.
>
> Regards
> --
> Gilles Bassi?re - Web/GIS software engineer
> http://gbassiere.free.fr/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/7c87584b/attachment.html
From gbassiere at gmail.com  Wed Apr  7 08:27:07 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Wed Apr  7 08:30:58 2010
Subject: [gdal-dev] List of Supported EPSG's
In-Reply-To: <o2r3461e9f01004070424x2cc78d7j260c197395d1c038@mail.gmail.com>
References: <m2t3461e9f01004060727h64276d26q69a329423b977f88@mail.gmail.com>	
	<4BBB6539.8080006@gmail.com>
	<o2r3461e9f01004070424x2cc78d7j260c197395d1c038@mail.gmail.com>
Message-ID: <4BBC7A1B.4060003@gmail.com>

Pedro Roma wrote:
> Thank you Gil. But what you are saying is that I can only do that after
> I install/compile GDAL in my system right?
I assumed you already had Proj and GDAL installed. If not, you can
browse Proj SVN repository. The "trunk" version of the file I've
mentioned seems to be available at:
http://svn.osgeo.org/metacrs/proj/trunk/proj/nad/epsg

> 
> By the way, is there any "clash" between PROJ 4.7 version with
> not-so-new versions of GDAL (in gdalwarp, gdalinfo, gdaltranslate)
> 
I don't know.

Regards
-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From enigma2006.kishore at gmail.com  Wed Apr  7 06:39:13 2010
From: enigma2006.kishore at gmail.com (Kishore Reddy)
Date: Wed Apr  7 08:31:24 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <q2seb502d881004060913v2f2b7ec9z7c6e87190b044494@mail.gmail.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com> 
	<201003272307.24152.even.rouault@mines-paris.org>
	<q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>
	<q2seb502d881004060913v2f2b7ec9z7c6e87190b044494@mail.gmail.com>
Message-ID: <w2l6e7b1b711004070339kdeeb3c64iae0138fb1fcad36c@mail.gmail.com>

I must be doing something terribly wrong I guess. Heres is the output.

>> ogrinfo -al Contour_100.shp | grep Extent
Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)

>> ogr2ogr -clipsrc 1966328 399612 1984324 404608 clipped.shp
Contour_100.shp

>>  ogrinfo -al clipped.shp | grep Extent
Extent: (0.000000, 0.000000) - (0.000000, 0.000000)

Some more details of the input file:
>> ogrinfo -al Contour_100.shp | head -25
INFO: Open of `Contour_100.shp'
      using driver `ESRI Shapefile' successful.

Layer name: Contour_100
Geometry: Line String
Feature Count: 1760
Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)
Layer SRS WKT:
PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200_Feet",
    GEOGCS["GCS_North_American_1983",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS_1980",6378137.0,298.257222101]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["False_Easting",2000000.002616666],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",-79.0],
    PARAMETER["Standard_Parallel_1",34.33333333333334],
    PARAMETER["Standard_Parallel_2",36.16666666666666],
    PARAMETER["Latitude_Of_Origin",33.75],
    UNIT["Foot_US",0.3048006096012192]]
Elevation: Integer (4.0)
TILE: String (8.0)
Interval: Integer (4.0)


Please correct me where am I going wrong.

--
Kishore


On Tue, Apr 6, 2010 at 9:43 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Kishore,
>
> You can adjust the geotiff's dimensions and extents from within the script.
> Then use the -te option in gdal_rasterize to limit the extents of the vector
> data.
>
> Other way is to create parts of the shape file using ogr2ogr with the
> option -clipsrc (http://gdal.org/ogr2ogr.html).
>
>
> On Tue, Apr 6, 2010 at 12:00 AM, Kishore Reddy <
> enigma2006.kishore@gmail.com> wrote:
>
>> Hi,
>>
>> I tried the above procedure. Its working. I am giving input as Shapefile
>> and taking geotiff file as output. But the output file is loosing many
>> details as it has been converted at high resolution. Is there any way  that
>> I can convert Shapefles into tiles at appropriate resolution so that I can
>> produce many geotiff files for the same Shapefile?
>>
>> --
>> Kishore
>>
>>
>>
>> On Sun, Mar 28, 2010 at 3:37 AM, Even Rouault <
>> even.rouault@mines-paris.org> wrote:
>>
>>> Kishore,
>>>
>>> Here is a process you could try:
>>>
>>> 1) Prepare an output GDAL file for gdal_rasterize.
>>>
>>> You can take care inspiration of
>>>
>>> http://trac.osgeo.org/gdal/wiki/FAQRaster#HowcanIcreateablankrasterbasedonavectorfilesextentsforusewithgdal_rasterizeGDAL1.8.0
>>>
>>> Modify it to create 1 band (instead of 4) and for step 3) to work, you
>>> should
>>> take care of setting a nodata value on the output file and initialize the
>>> raster with it:
>>>
>>> dst_ds.GetRasterBand(1).SetRasterNoDataValue(0)
>>> dst_ds.GetRasterBand(1).Fill(0)
>>>
>>> (if you can compile GDAL from source, you can avoid this step by grabbing
>>> the
>>> latest sources that have an enhanced version of gdal_rasterize, directly
>>> able
>>> to create the output file . See http://trac.osgeo.org/gdal/ticket/3505)
>>>
>>> 2) Use gdal_rasterize to burn the contour lines.
>>>
>>> See http://gdal.org/gdal_rasterize.html
>>>
>>> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>>>
>>> See http://gdal.org/gdal_fillnodata.html
>>>
>>> Now, the result should be usable with gdaldem.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> Le Saturday 27 March 2010 19:09:06 Kishore Reddy, vous avez ?crit :
>>> > Hi everyone,
>>> >
>>> > I am planing to use gdaldem to create relief shaded maps. But the
>>> > problem is gdaldem takes only DEM files as input. Unfortunately I have
>>> > contour lines (in the form of Shape files). So is there any way
>>> > (command line) to convert these shape files into DEM files?
>>> >
>>> > --
>>> > Kishore
>>> > _______________________________________________
>>> > gdal-dev mailing list
>>> > gdal-dev@lists.osgeo.org
>>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/0c93e588/attachment.html
From wickestheweakestgimp at hotmail.com  Wed Apr  7 08:51:30 2010
From: wickestheweakestgimp at hotmail.com (Wickes)
Date: Wed Apr  7 08:51:32 2010
Subject: [gdal-dev] Translating from to JPEG2000 to ECW
Message-ID: <1270644690403-4864713.post@n2.nabble.com>


I've got a problem translating a large JPEG2000 image to ECW. I'm using:
gdal_translate -of ECW -co "LARGE_OK=YES" input.jp2 output.ecw

Shortly after 10% of processing I get some sort of memory error. The gist of
it is:
ECW Exception
An Access Violation Exception occurred at code address 0x4a4d64 attempting
to READ from memory address 0x0.
Dump: {large string of characters}
Strack Trace:

I've tried adding in various switches including --config GDAL_CACHEMAX 2500
and --config GDAL_ECW_CACHE_MAXMEM 500 to try and limit the amout of memory
with no success.

Has anyone got any suggestions why this might be? The image is around 300Mb
as JP2 (size approx: 40000x 40000) and came from ENVI (highly compressed).
I'm on XP, using 3Gb of RAM and using FWTools 2.3.0 (GDAL 1.7).

Thanks 
-- 
View this message in context: http://n2.nabble.com/Translating-from-to-JPEG2000-to-ECW-tp4864713p4864713.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From enigma2006.kishore at gmail.com  Wed Apr  7 09:27:04 2010
From: enigma2006.kishore at gmail.com (Kishore Reddy)
Date: Wed Apr  7 09:27:27 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <p2peb502d881004070408k97b08dcnbaed0442351fb8ee@mail.gmail.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com> 
	<201003272307.24152.even.rouault@mines-paris.org>
	<q2t6e7b1b711004051130n4c76e71an4eeabc14af9a4aba@mail.gmail.com>
	<q2seb502d881004060913v2f2b7ec9z7c6e87190b044494@mail.gmail.com> 
	<w2l6e7b1b711004070339kdeeb3c64iae0138fb1fcad36c@mail.gmail.com> 
	<p2peb502d881004070408k97b08dcnbaed0442351fb8ee@mail.gmail.com>
Message-ID: <k2r6e7b1b711004070627t45cc2c18ye2bc787687662031@mail.gmail.com>

Exactly Chaitanya. Thanks for the support :).

--
Kishore


On Wed, Apr 7, 2010 at 4:38 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Kishore,
>
> I think the area you clipped to does not have any features. This should not
> be a problem.
>
>
> On Wed, Apr 7, 2010 at 4:09 PM, Kishore Reddy <
> enigma2006.kishore@gmail.com> wrote:
>
>> I must be doing something terribly wrong I guess. Heres is the output.
>>
>> >> ogrinfo -al Contour_100.shp | grep Extent
>> Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)
>>
>> >> ogr2ogr -clipsrc 1966328 399612 1984324 404608 clipped.shp
>> Contour_100.shp
>>
>> >>  ogrinfo -al clipped.shp | grep Extent
>> Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
>>
>> Some more details of the input file:
>> >> ogrinfo -al Contour_100.shp | head -25
>> INFO: Open of `Contour_100.shp'
>>       using driver `ESRI Shapefile' successful.
>>
>> Layer name: Contour_100
>> Geometry: Line String
>> Feature Count: 1760
>> Extent: (1966324.986729, 399608.866986) - (2146704.003923, 551765.272646)
>> Layer SRS WKT:
>> PROJCS["NAD_1983_StatePlane_North_Carolina_FIPS_3200_Feet",
>>     GEOGCS["GCS_North_American_1983",
>>         DATUM["North_American_Datum_1983",
>>             SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>         PRIMEM["Greenwich",0.0],
>>         UNIT["Degree",0.0174532925199433]],
>>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>>     PARAMETER["False_Easting",2000000.002616666],
>>     PARAMETER["False_Northing",0.0],
>>     PARAMETER["Central_Meridian",-79.0],
>>     PARAMETER["Standard_Parallel_1",34.33333333333334],
>>     PARAMETER["Standard_Parallel_2",36.16666666666666],
>>     PARAMETER["Latitude_Of_Origin",33.75],
>>     UNIT["Foot_US",0.3048006096012192]]
>> Elevation: Integer (4.0)
>> TILE: String (8.0)
>> Interval: Integer (4.0)
>>
>>
>> Please correct me where am I going wrong.
>>
>> --
>> Kishore
>>
>>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/3b31334b/attachment-0001.html
From weixj2003ld at 163.com  Wed Apr  7 10:43:06 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr  7 10:59:03 2010
Subject: [gdal-dev] getcolortable is null
In-Reply-To: <4BBC6C37.4080008@pobox.com>
References: <4BBC6C37.4080008@pobox.com>
	<12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
Message-ID: <16ea547.c191.127d8b97ab1.Coremail.weixj2003ld@163.com>

Thk u very much.
I have two questions.
1.If I want to use the following combination,
Red=Band3
Green=Band2*0.8+band4*0.2;
Blue=band1
2. what is the general combination for good look jpeg file?



>weixj2003ld wrote:
>> I read a geotiff file, and find that
>> poBand->GetColorTable()==NULL
>
>Wei,
>
>Presumably GetColorTable() returns NULL because the GeoTIFF file
>does not have a color table.
>
>> But I use ERDAS IMAGINE9.2 (a software that deal with geotiff), I find 
>> that it is not grey,but I use "gdal_translate -b 6 -of JPEG old.tif 
>> net.jpg", find that is is grey.
>
>Well, you are selecting only one band withouta color table to export
>to net.jpg.  How do you expect it to be anything other than greyscale?
>If you want an RGB jpeg file then select three bands to be used as
>red, green and blue.
>
>eg.
>gdal_translate -b 4 -b 5 -b 6 o-of JPEG  old.tif net.jpg
>
>Best regards,
>
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100407/1f26b359/attachment.html
From warmerdam at pobox.com  Wed Apr  7 11:02:11 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  7 11:02:17 2010
Subject: [gdal-dev] getcolortable is null
In-Reply-To: <16ea547.c191.127d8b97ab1.Coremail.weixj2003ld@163.com>
References: <4BBC6C37.4080008@pobox.com>
	<12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
	<16ea547.c191.127d8b97ab1.Coremail.weixj2003ld@163.com>
Message-ID: <4BBC9E73.3020805@pobox.com>

weixj2003ld wrote:
> Thk u very much.
> I have two questions.
> 1.If I want to use the following combination,
> Red=Band3
> Green=Band2*0.8+band4*0.2;
> Blue=band1

Wei,

This will require programming or scripting.   It cannot be done
with the stock commandline tools.

> 2. what is the general combination for good look jpeg file?

That depends greatly on the source sensor and the goals of the visualization.
A 4,2,1 b  false color band combination is common with Landsat imagery,
butit can be disputed whether it looks good or not.  Also, constrast
stretching is often also desirable on satellite imagery for best
visualization.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From John.C.Cartwright at noaa.gov  Wed Apr  7 11:26:30 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Apr  7 11:26:33 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
Message-ID: <4BBCA426.3050701@noaa.gov>

Thanks for your suggest Even, but this still does not work. I've noticed
that the "-with-hdf5"

and " --with-netcdf" options are mutually exclusive. I can get it to build with one or the 
other, but not both.

It seems to work if I rebuild netcdf-4.0.1 w/o the "--enable-netcdf-4" and "--enable-shared", but I don't really understand why 
and am not sure if this will have negative imapacts on the use of the netcdf library outside of gdal.

Any other ideas?

Thanks again for your help.

--john



John,

Re-try but remove the /lib suffix, so something like :

--with-hdf5=/usr/local/contrib/hdf5-1.8.4

The configure script will look for include files in the include subdirectory 
and library files in the lib subdirectory




On 03/17/2010 09:22 PM, John Cartwright wrote:

I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
successfully and have included the following in my configure statement
for gdal:

  --with-hdf5=/usr/local/contrib/hdf5-1.8.4

However, configure complains that:

checking for SDreaddata in -lmfhdfalt... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
checking for H5Fopen in -lhdf5... no
configure: error: HDF5 support requested with arg
/usr/local/contrib/hdf5-1.8.4, but no hdf5 lib found


I don't understand this since the library seems to be present:

[...@lion gdal-1.7.1]$ ls -l /usr/local/contrib/hdf5-1.8.4/lib
total 6488
-rw-r--r-- 1 jcc eds 6413146 Mar 17 11:44 libhdf5.a
-rw-r--r-- 1 jcc eds  196564 Mar 17 11:44 libhdf5_hl.a
-rwxr-xr-x 1 jcc eds     939 Mar 17 11:44 libhdf5_hl.la
-rwxr-xr-x 1 jcc eds     930 Mar 17 11:44 libhdf5.la
-rw-r--r-- 1 jcc eds    2891 Mar 17 11:44 libhdf5.settings


From even.rouault at mines-paris.org  Wed Apr  7 15:36:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  7 15:36:46 2010
Subject: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip /
	libkml
Message-ID: <201004072136.33295.even.rouault@mines-paris.org>

Harsh,

The telascience (Linux) slavebot fails building latest trunk with :

kmlsuperoverlaydataset.cpp:12:17: error: zip.h: No such file or directory
kmlsuperoverlaydataset.cpp: In function 'bool 
...

Full log here : 
http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/358/steps/make/logs/stdio

I guess this is because the new driver has a dependency to minizip ? For the 
time being, it should probably be removed from GDALmake.opt.in to avoid build 
failures.

For the long term solution, I'm not sure what the best option is. In the past, 
I had 'imported' the unzip part of minizip in GDAL port subdirectory to add 
support for a /vsizip virtual file system. To avoid issues for applications 
that would link both GDAL and minizip (see (1)), I had renamed the symbols of 
the imported files with cpl_ prefix. I choosed this because as far as I 
remember, minizip didn't come as a nicely & standard packaged library (it was 
some tool/demonstration code living in the contrib directory from the 'zip' 
project) and so it didn't seem practical to add support for its detection 
in ./configure (see (2)). Perhaps this has changed now and minizip is a more 
standard library dependency. A bit of googling shows
http://groups.google.com/group/linux.debian.bugs.dist/browse_thread/thread/c82c7d7ead3ec189?tvc=2 
which reveals that the issue still seems up-to-date. Fedora has apparently 
minizip packaged as a library, but Debian not.

The issue with minizip will also arise with the new KML driver that Brian Case 
is developping that uses libkml, and minizip is a dependency of libkml. I'm 
not sure how libkml is supposed to be packaged : are minizip symbols 
statically linked in libkml (if it is the case, are the minizip symbols 
exported in the windows/linux builds ?) or is minizip a dependency as a 
shared library ?

Actually, another bit of googling shows that Debian has packaged libkml 
(http://packages.debian.org/squeeze/libkml0) and that a libminizip.so is part 
of the package. But the -dev package doesn't seem to include the headers of 
minizip, so it is probably only seen as an internal dependency.

The situation is quite confusing, isn't it ? Any thought anyone on the best 
approach to use minizip ?

Best regards,

Even

(1) : This can be a problem. For example some applications use GDAL built with 
its internal libtiff (libtiff 4.x based) and also link with the system 
libtiff (in most cases still libtiff 3.x), directly or indirectly (for 
example GTK+-2.0 links with libtiff). So a guy linking its app with GDAL and 
GTK can end up pulling 2 libtiff versions... Because of the ABI changes 
between libtiff 3.x and 4.x, this is known to cause crashes on Linux in some 
circumstances. We probably want to avoid such situation with minizip in case 
various software packages depend on incompatible minizip versions (although 
note (2) shows that they've managed to avoid ABI clashes, so this is just a 
theoretical problem for now)

(2) : It also enabled me to experiment with adding support for ZIP64 
unzipping. Very recently (15 march 2010) upstream zlib has incorporated back 
the changes in minizip 1.1 (and in zlib124 package) in a cleaner & backward 
compatible way by adding new symbols with 64 prefix. So if latest minizip was 
a dependency, we could drop the cpl_minizip files from GDAL source and use 
upstream version instead. The ZIP64 issue isn't terribly important to me so 
this would certainly not be a show-stopper for moving to another solution 
that would only require using the old minizip interfaces. And the 
cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or 
zip64 symbols according to what is available.
From warmerdam at pobox.com  Wed Apr  7 17:44:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr  7 17:44:11 2010
Subject: [gdal-dev] Motion: Maintainer Contract for Ivan Lucena
Message-ID: <4BBCFCA6.60106@pobox.com>

Motion: For Frank Warmerdam to negotiate a maintainer contract with Ivan
Lucena under the terms of RFC 9 (GDAL Paid Maintainer Guidelines) for up to
200 hours at $25USD/hr.

---

Folks,

Ivan has indicated some availability for maintenance work in the coming
months and he has proven himself a capable GDAL developer with various
fixes, and most notably the development of the Oracle GeoRaster and
Intergraph Raster drivers.

I'll start with a +1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Apr  7 17:50:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  7 17:50:13 2010
Subject: [gdal-dev] Motion: Maintainer Contract for Ivan Lucena
In-Reply-To: <4BBCFCA6.60106@pobox.com>
References: <4BBCFCA6.60106@pobox.com>
Message-ID: <201004072350.02606.even.rouault@mines-paris.org>

+1

Le Wednesday 07 April 2010 23:44:06 Frank Warmerdam, vous avez ?crit?:
> Motion: For Frank Warmerdam to negotiate a maintainer contract with Ivan
> Lucena under the terms of RFC 9 (GDAL Paid Maintainer Guidelines) for up to
> 200 hours at $25USD/hr.
>
> ---
>
> Folks,
>
> Ivan has indicated some availability for maintenance work in the coming
> months and he has proven himself a capable GDAL developer with various
> fixes, and most notably the development of the Oracle GeoRaster and
> Intergraph Raster drivers.
>
> I'll start with a +1.
>
> Best regards,


From dmorissette at mapgears.com  Wed Apr  7 17:53:20 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Apr  7 17:53:22 2010
Subject: [gdal-dev] Motion: Maintainer Contract for Ivan Lucena
In-Reply-To: <4BBCFCA6.60106@pobox.com>
References: <4BBCFCA6.60106@pobox.com>
Message-ID: <4BBCFED0.2040506@mapgears.com>

+1

Daniel

Frank Warmerdam wrote:
> Motion: For Frank Warmerdam to negotiate a maintainer contract with Ivan
> Lucena under the terms of RFC 9 (GDAL Paid Maintainer Guidelines) for up to
> 200 hours at $25USD/hr.
> 
> ---
> 
> Folks,
> 
> Ivan has indicated some availability for maintenance work in the coming
> months and he has proven himself a capable GDAL developer with various
> fixes, and most notably the development of the Oracle GeoRaster and
> Intergraph Raster drivers.
> 
> I'll start with a +1.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
From even.rouault at mines-paris.org  Wed Apr  7 17:59:41 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  7 17:59:53 2010
Subject: [gdal-dev] Translating from to JPEG2000 to ECW
In-Reply-To: <1270644690403-4864713.post@n2.nabble.com>
References: <1270644690403-4864713.post@n2.nabble.com>
Message-ID: <201004072359.42326.even.rouault@mines-paris.org>

Several potential issues :
* the unit of GDAL_ECW_CACHE_MAXMEM is in bytes, not megabytes. So I suspect 
500 can cause problems. It is probably much too low for ECW SDK to work 
properly. Or it may also decide to use its default value, which is 1/4 of the 
total RAM
* GDAL_CACHEMAX=2500 is a too bigger value. The max cache size is stored as a 
signed integer, so the maximum supported is 2 GB.
* And 500 MB + 2500 MB would be your total RAM, which is not reasonable. You 
must live some free RAM for your OS...

You can also try a more recent FWTools release. Latest is 2.4.7

Le Wednesday 07 April 2010 14:51:30 Wickes, vous avez ?crit?:
> I've got a problem translating a large JPEG2000 image to ECW. I'm using:
> gdal_translate -of ECW -co "LARGE_OK=YES" input.jp2 output.ecw
>
> Shortly after 10% of processing I get some sort of memory error. The gist
> of it is:
> ECW Exception
> An Access Violation Exception occurred at code address 0x4a4d64 attempting
> to READ from memory address 0x0.
> Dump: {large string of characters}
> Strack Trace:
>
> I've tried adding in various switches including --config GDAL_CACHEMAX 2500
> and --config GDAL_ECW_CACHE_MAXMEM 500 to try and limit the amout of memory
> with no success.
>
> Has anyone got any suggestions why this might be? The image is around 300Mb
> as JP2 (size approx: 40000x 40000) and came from ENVI (highly compressed).
> I'm on XP, using 3Gb of RAM and using FWTools 2.3.0 (GDAL 1.7).
>
> Thanks


From szekerest at gmail.com  Wed Apr  7 18:16:41 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Apr  7 18:16:45 2010
Subject: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip / 
	libkml
In-Reply-To: <201004072136.33295.even.rouault@mines-paris.org>
References: <201004072136.33295.even.rouault@mines-paris.org>
Message-ID: <m2xf3b73b7d1004071516za59e7c0fh3cdc3359365b5cbf@mail.gmail.com>

2010/4/7 Even Rouault <even.rouault@mines-paris.org>

> (2) : It also enabled me to experiment with adding support for ZIP64
> unzipping. Very recently (15 march 2010) upstream zlib has incorporated
> back
> the changes in minizip 1.1 (and in zlib124 package) in a cleaner & backward
> compatible way by adding new symbols with 64 prefix. So if latest minizip
> was
> a dependency, we could drop the cpl_minizip files from GDAL source and use
> upstream version instead. The ZIP64 issue isn't terribly important to me so
> this would certainly not be a show-stopper for moving to another solution
> that would only require using the old minizip interfaces. And the
> cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or
> zip64 symbols according to what is available.
>


I've took a crack to add minizip support to the Windows buildslaves and
switch this new driver on, I hope the next build will compile this driver in
the plugins section.

However the desired compilation flags of minizip are not so trivial to me,
is the ZIP64 support enabled by default, should I define further variables?
Do we expect to compile minizip as a library or a dll package? The latter
seems to be controlled by ZEXPORT which is not defined properly on Windows.
(zlib is using explicit definition of the exported functions by using a .def
file and not by __declspec(dllexport))

Do we have auto-tests included along with this driver in order to make sure
the compilation is working?

Best regards,


Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/443d0f34/attachment.html
From szekerest at gmail.com  Wed Apr  7 18:18:35 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Apr  7 18:18:37 2010
Subject: [gdal-dev] Motion: Maintainer Contract for Ivan Lucena
In-Reply-To: <4BBCFCA6.60106@pobox.com>
References: <4BBCFCA6.60106@pobox.com>
Message-ID: <x2qf3b73b7d1004071518z42c7536at299b871f6056a937@mail.gmail.com>

+1

Tamas


2010/4/7 Frank Warmerdam <warmerdam@pobox.com>

> Motion: For Frank Warmerdam to negotiate a maintainer contract with Ivan
> Lucena under the terms of RFC 9 (GDAL Paid Maintainer Guidelines) for up to
> 200 hours at $25USD/hr.
>
> ---
>
> Folks,
>
> Ivan has indicated some availability for maintenance work in the coming
> months and he has proven himself a capable GDAL developer with various
> fixes, and most notably the development of the Oracle GeoRaster and
> Intergraph Raster drivers.
>
> I'll start with a +1.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/61986993/attachment.html
From harsh.govind at spadac.com  Wed Apr  7 18:35:17 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Wed Apr  7 18:36:22 2010
Subject: [gdal-dev] RE: GDAL trunk compilation broken by r19335 / minizip /
	libkml
In-Reply-To: <201004072136.33295.even.rouault@mines-paris.org>
References: <201004072136.33295.even.rouault@mines-paris.org>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817EED53D54@SPATCEX003.spadac.com>

My first commit and build failure. :( Sorry team. I have reverted my changes to GDALmake.opt.in so the build should be fixed. Is there a way to sign up for these build results so as to get an email if your commit breaks the build? I am going to setup an automated build system on windows to cont. build and do some basic testing.

Even,
Thanks for letting me know. I think the KMLSUPEROVERLAY should be added as a OPT_GDAL_FORMATS so it is configurable and user can specify minizip inc/lib. Being a windows guy I could definitely use some help on that side. It will still leave some of the problems you have described. I will do some more research into this problem and possible solutions..

Regards,
Harsh Govind
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Wednesday, April 07, 2010 03:36 PM
To: Harsh Govind
Cc: rush@winkey.org; frankie@debian.org; Frank Warmerdam; gdal-dev@lists.osgeo.org
Subject: GDAL trunk compilation broken by r19335 / minizip / libkml

Harsh,

The telascience (Linux) slavebot fails building latest trunk with :

kmlsuperoverlaydataset.cpp:12:17: error: zip.h: No such file or directory
kmlsuperoverlaydataset.cpp: In function 'bool
...

Full log here :
http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/358/steps/make/logs/stdio

I guess this is because the new driver has a dependency to minizip ? For the
time being, it should probably be removed from GDALmake.opt.in to avoid build
failures.

For the long term solution, I'm not sure what the best option is. In the past,
I had 'imported' the unzip part of minizip in GDAL port subdirectory to add
support for a /vsizip virtual file system. To avoid issues for applications
that would link both GDAL and minizip (see (1)), I had renamed the symbols of
the imported files with cpl_ prefix. I choosed this because as far as I
remember, minizip didn't come as a nicely & standard packaged library (it was
some tool/demonstration code living in the contrib directory from the 'zip'
project) and so it didn't seem practical to add support for its detection
in ./configure (see (2)). Perhaps this has changed now and minizip is a more
standard library dependency. A bit of googling shows
http://groups.google.com/group/linux.debian.bugs.dist/browse_thread/thread/c82c7d7ead3ec189?tvc=2
which reveals that the issue still seems up-to-date. Fedora has apparently
minizip packaged as a library, but Debian not.

The issue with minizip will also arise with the new KML driver that Brian Case
is developping that uses libkml, and minizip is a dependency of libkml. I'm
not sure how libkml is supposed to be packaged : are minizip symbols
statically linked in libkml (if it is the case, are the minizip symbols
exported in the windows/linux builds ?) or is minizip a dependency as a
shared library ?

Actually, another bit of googling shows that Debian has packaged libkml
(http://packages.debian.org/squeeze/libkml0) and that a libminizip.so is part
of the package. But the -dev package doesn't seem to include the headers of
minizip, so it is probably only seen as an internal dependency.

The situation is quite confusing, isn't it ? Any thought anyone on the best
approach to use minizip ?

Best regards,

Even

(1) : This can be a problem. For example some applications use GDAL built with
its internal libtiff (libtiff 4.x based) and also link with the system
libtiff (in most cases still libtiff 3.x), directly or indirectly (for
example GTK+-2.0 links with libtiff). So a guy linking its app with GDAL and
GTK can end up pulling 2 libtiff versions... Because of the ABI changes
between libtiff 3.x and 4.x, this is known to cause crashes on Linux in some
circumstances. We probably want to avoid such situation with minizip in case
various software packages depend on incompatible minizip versions (although
note (2) shows that they've managed to avoid ABI clashes, so this is just a
theoretical problem for now)

(2) : It also enabled me to experiment with adding support for ZIP64
unzipping. Very recently (15 march 2010) upstream zlib has incorporated back
the changes in minizip 1.1 (and in zlib124 package) in a cleaner & backward
compatible way by adding new symbols with 64 prefix. So if latest minizip was
a dependency, we could drop the cpl_minizip files from GDAL source and use
upstream version instead. The ZIP64 issue isn't terribly important to me so
this would certainly not be a show-stopper for moving to another solution
that would only require using the old minizip interfaces. And the
cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or
zip64 symbols according to what is available.
From even.rouault at mines-paris.org  Wed Apr  7 19:10:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  7 19:10:27 2010
Subject: [gdal-dev] Re: GDAL trunk compilation broken by r19335 / minizip /
	libkml
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E2817EED53D54@SPATCEX003.spadac.com>
References: <201004072136.33295.even.rouault@mines-paris.org>
	<4B3B3C35D34C9345BC8914C199882E2817EED53D54@SPATCEX003.spadac.com>
Message-ID: <201004080110.17371.even.rouault@mines-paris.org>

No problem. That happens quite regularly when adding substantial contributions 
like new drivers that require changes in the build system on the various 
targets. To check if things go well, you can look at the waterfall 
http://buildbot.osgeo.org:8500/waterfall which has different slavebots (Linux 
& Windows ones). Some are triggered at each commit and do an incremental 
build (telascience-quick), others do a full rebuild every few hours. But if 
necessary, you can also ask those ones to do a full rebuild at anytime by 
clicking on the right button.

In case he's not yet aware of it, we have an extensive test suite made of 
Python scripts. It's available there : 
http://svn.osgeo.org/gdal/trunk/autotest (browser view : 
http://trac.osgeo.org/gdal/browser/trunk/autotest/ )

Le Thursday 08 April 2010 00:35:17, vous avez ?crit?:
> My first commit and build failure. :( Sorry team. I have reverted my
> changes to GDALmake.opt.in so the build should be fixed. Is there a way to
> sign up for these build results so as to get an email if your commit breaks
> the build? I am going to setup an automated build system on windows to
> cont. build and do some basic testing.
>
> Even,
> Thanks for letting me know. I think the KMLSUPEROVERLAY should be added as
> a OPT_GDAL_FORMATS so it is configurable and user can specify minizip
> inc/lib. Being a windows guy I could definitely use some help on that side.
> It will still leave some of the problems you have described. I will do some
> more research into this problem and possible solutions..
>
> Regards,
> Harsh Govind
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Wednesday, April 07, 2010 03:36 PM
> To: Harsh Govind
> Cc: rush@winkey.org; frankie@debian.org; Frank Warmerdam;
> gdal-dev@lists.osgeo.org Subject: GDAL trunk compilation broken by r19335 /
> minizip / libkml
>
> Harsh,
>
> The telascience (Linux) slavebot fails building latest trunk with :
>
> kmlsuperoverlaydataset.cpp:12:17: error: zip.h: No such file or directory
> kmlsuperoverlaydataset.cpp: In function 'bool
> ...
>
> Full log here :
> http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/358/steps/
>make/logs/stdio
>
> I guess this is because the new driver has a dependency to minizip ? For
> the time being, it should probably be removed from GDALmake.opt.in to avoid
> build failures.
>
> For the long term solution, I'm not sure what the best option is. In the
> past, I had 'imported' the unzip part of minizip in GDAL port subdirectory
> to add support for a /vsizip virtual file system. To avoid issues for
> applications that would link both GDAL and minizip (see (1)), I had renamed
> the symbols of the imported files with cpl_ prefix. I choosed this because
> as far as I remember, minizip didn't come as a nicely & standard packaged
> library (it was some tool/demonstration code living in the contrib
> directory from the 'zip' project) and so it didn't seem practical to add
> support for its detection in ./configure (see (2)). Perhaps this has
> changed now and minizip is a more standard library dependency. A bit of
> googling shows
> http://groups.google.com/group/linux.debian.bugs.dist/browse_thread/thread/
>c82c7d7ead3ec189?tvc=2 which reveals that the issue still seems up-to-date.
> Fedora has apparently minizip packaged as a library, but Debian not.
>
> The issue with minizip will also arise with the new KML driver that Brian
> Case is developping that uses libkml, and minizip is a dependency of
> libkml. I'm not sure how libkml is supposed to be packaged : are minizip
> symbols statically linked in libkml (if it is the case, are the minizip
> symbols exported in the windows/linux builds ?) or is minizip a dependency
> as a shared library ?
>
> Actually, another bit of googling shows that Debian has packaged libkml
> (http://packages.debian.org/squeeze/libkml0) and that a libminizip.so is
> part of the package. But the -dev package doesn't seem to include the
> headers of minizip, so it is probably only seen as an internal dependency.
>
> The situation is quite confusing, isn't it ? Any thought anyone on the best
> approach to use minizip ?
>
> Best regards,
>
> Even
>
> (1) : This can be a problem. For example some applications use GDAL built
> with its internal libtiff (libtiff 4.x based) and also link with the system
> libtiff (in most cases still libtiff 3.x), directly or indirectly (for
> example GTK+-2.0 links with libtiff). So a guy linking its app with GDAL
> and GTK can end up pulling 2 libtiff versions... Because of the ABI changes
> between libtiff 3.x and 4.x, this is known to cause crashes on Linux in
> some circumstances. We probably want to avoid such situation with minizip
> in case various software packages depend on incompatible minizip versions
> (although note (2) shows that they've managed to avoid ABI clashes, so this
> is just a theoretical problem for now)
>
> (2) : It also enabled me to experiment with adding support for ZIP64
> unzipping. Very recently (15 march 2010) upstream zlib has incorporated
> back the changes in minizip 1.1 (and in zlib124 package) in a cleaner &
> backward compatible way by adding new symbols with 64 prefix. So if latest
> minizip was a dependency, we could drop the cpl_minizip files from GDAL
> source and use upstream version instead. The ZIP64 issue isn't terribly
> important to me so this would certainly not be a show-stopper for moving to
> another solution that would only require using the old minizip interfaces.
> And the
> cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or
> zip64 symbols according to what is available.


From harsh.govind at spadac.com  Wed Apr  7 19:43:54 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Wed Apr  7 19:43:57 2010
Subject: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip /
	libkml
In-Reply-To: <m2xf3b73b7d1004071516za59e7c0fh3cdc3359365b5cbf@mail.gmail.com>
References: <201004072136.33295.even.rouault@mines-paris.org>,
	<m2xf3b73b7d1004071516za59e7c0fh3cdc3359365b5cbf@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817EED53D57@SPATCEX003.spadac.com>

I just checked the link and seems like the build is broken on szekerest-vc80-full. It cannot find ioapi.h which should be present in minizip include directory. I compiled the minizip as a library. Below are the commands I used in order to build minizip in VS2005 Command Prompt:

@echo off
setlocal enableextensions enabledelayedexpansion 
set MSVCPLATFORM=win32
set THIRDLIB=C:\sdk
set MINIZIPDIR=%THIRDLIB%\minizip

set DEBUGDIR=debug
set RELEASEDIR=release

vcbuild /rebuild /useenv /platform:%MSVCPLATFORM% minizip.vcproj "Debug"
vcbuild /rebuild /useenv /platform:%MSVCPLATFORM% minizip.vcproj "Release"

xcopy /I /Y /C /Q src\*.h %MINIZIPDIR%\include

xcopy /I /S /Y /C /Q %DEBUGDIR%\minizipd.lib %MINIZIPDIR%\lib
xcopy /I /S /Y /C /Q %RELEASEDIR%\minizip.lib %MINIZIPDIR%\lib

endlocal


I will add auto-tests for this driver soon.

Regards,
Harsh Govind
________________________________________

From: Tamas Szekeres [szekerest@gmail.com]
Sent: Wednesday, April 07, 2010 06:16 PM
To: Even Rouault
Cc: Harsh Govind; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip /     libkml

2010/4/7 Even Rouault <even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>>
(2) : It also enabled me to experiment with adding support for ZIP64
unzipping. Very recently (15 march 2010) upstream zlib has incorporated back
the changes in minizip 1.1 (and in zlib124 package) in a cleaner & backward
compatible way by adding new symbols with 64 prefix. So if latest minizip was
a dependency, we could drop the cpl_minizip files from GDAL source and use
upstream version instead. The ZIP64 issue isn't terribly important to me so
this would certainly not be a show-stopper for moving to another solution
that would only require using the old minizip interfaces. And the
cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or
zip64 symbols according to what is available.


I've took a crack to add minizip support to the Windows buildslaves and switch this new driver on, I hope the next build will compile this driver in the plugins section.

However the desired compilation flags of minizip are not so trivial to me, is the ZIP64 support enabled by default, should I define further variables?
Do we expect to compile minizip as a library or a dll package? The latter seems to be controlled by ZEXPORT which is not defined properly on Windows. (zlib is using explicit definition of the exported functions by using a .def file and not by __declspec(dllexport))

Do we have auto-tests included along with this driver in order to make sure the compilation is working?

Best regards,


Tamas


From weixj2003ld at 163.com  Wed Apr  7 21:15:42 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr  7 21:15:53 2010
Subject: [gdal-dev] getcolortable is null
In-Reply-To: <4BBC9E73.3020805@pobox.com>
References: <4BBC9E73.3020805@pobox.com> <4BBC6C37.4080008@pobox.com>
	<12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
	<16ea547.c191.127d8b97ab1.Coremail.weixj2003ld@163.com>
Message-ID: <1eccc81.11d7d.127dafca4b0.Coremail.weixj2003ld@163.com>

Thk u for your detail reply.
1.Now,I have a DEM(.img) file,and its band number is 1.When I use 'gdal_translate  -b 1 -of  PNG old.img new.png' to create a png file(I think its contains height map infomation,is it?).the error 'Warning 6:PNG driver doesn't support data type Int16.Only eight bit<Byte>' and sixteen bit<Uint16> bands supported.Defaulting to Byte.
2.When I use 'gdal_translate -b 1 -of JPEG old.img new.jpg',the error 'JPEG doesn't support data type Int16. Only eight and twelve bit bands supported<Mk1 libjepg>'
 
happy every day.



>weixj2003ld wrote:
>> Thk u very much.
>> I have two questions.
>> 1.If I want to use the following combination,
>> Red=Band3
>> Green=Band2*0.8+band4*0.2;
>> Blue=band1
>
>Wei,
>
>This will require programming or scripting.   It cannot be done
>with the stock commandline tools.
>
>> 2. what is the general combination for good look jpeg file?
>
>That depends greatly on the source sensor and the goals of the visualization.
>A 4,2,1 b  false color band combination is common with Landsat imagery,
>butit can be disputed whether it looks good or not.  Also, constrast
>stretching is often also desirable on satellite imagery for best
>visualization.
>
>Best regards,
>
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/53f24e46/attachment.html
From hobu.inc at gmail.com  Wed Apr  7 22:52:23 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Apr  7 23:05:35 2010
Subject: [gdal-dev] Motion: Maintainer Contract for Ivan Lucena
In-Reply-To: <x2qf3b73b7d1004071518z42c7536at299b871f6056a937@mail.gmail.com>
References: <4BBCFCA6.60106@pobox.com>
	<x2qf3b73b7d1004071518z42c7536at299b871f6056a937@mail.gmail.com>
Message-ID: <0C7EA746-18E0-47DA-914F-80950ECF4A78@gmail.com>

+1

Howard

On Apr 7, 2010, at 5:18 PM, Tamas Szekeres wrote:

> +1
> 
> Tamas
> 
> 
> 2010/4/7 Frank Warmerdam <warmerdam@pobox.com>
> Motion: For Frank Warmerdam to negotiate a maintainer contract with Ivan
> Lucena under the terms of RFC 9 (GDAL Paid Maintainer Guidelines) for up to
> 200 hours at $25USD/hr.
> 
> ---
> 
> Folks,
> 
> Ivan has indicated some availability for maintenance work in the coming
> months and he has proven himself a capable GDAL developer with various
> fixes, and most notably the development of the Oracle GeoRaster and
> Intergraph Raster drivers.
> 
> I'll start with a +1.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From weixj2003ld at 163.com  Wed Apr  7 23:18:00 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr  7 23:18:11 2010
Subject: [gdal-dev] write error
Message-ID: <17b516a.14e06.127db6c9aa1.Coremail.weixj2003ld@163.com>

I use the following code to read data from a geotiff file and write it into a new one.the bands number is 6;
...
GDALDataset *poSrcDS,*poDstDS;
GDALRasterBand *poSrcBand,*poDstBand;
GDALDriver *poDstDriver;
double *m_AdGeoTransform=new double[6];
 
...
poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->GetDescrition());
poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
poSrcDS->GetGeoTransform(m_AdGeoTransform)
poDstDS->SetGeoTransform(m_AdGeoTransform);
poDstDS->SetProjection(poSrcDS->GetProjectionRef());
 
for(int iBand=0;iBand<6;iBand++)
{
   poSrcBand=poSrcDS->GetRaserBand(iBand+1);
  poDstBand=poDstDS->GetRaserBand(iBand+1);
  float *pafScanline;
  pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
  for(int i=1;i<nY;i++)
  {
     poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
     poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
   }
}
GDALClose((GDALDatasetH)poDstDS);
 
When I run my program,CPU is very alway busy,and the program is blocked,why?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/96462045/attachment.html
From dbainbridge at gmail.com  Thu Apr  8 00:08:58 2010
From: dbainbridge at gmail.com (David)
Date: Thu Apr  8 00:09:04 2010
Subject: [gdal-dev] SRTM/hgt to TIFF with alpha
Message-ID: <9D2D7089-9BAB-4873-8DE1-82F2B72E9F9A@gmail.com>

Hello.  I  am having a terrible time trying to figure out how to convert what should be value/height of 0 in the SRTM/hgt data file to the alpha layer in a tiff.  I was experimenting with making ocean areas transparent.  I tried the following with no success:

gdalwarp -of GTiff -co "TILED=YES"  -dstalpha -srcnodata 0 -wt Float32 -ot Float32 -wo SAMPLE_STEPS=100 -multi N40W125.hgt test.tiff

gdalinfo -mm gives:
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
    Computed Min/Max=-32768.000,1233.000
Band 2 Block=256x256 Type=Float32, ColorInterp=Alpha
    Computed Min/Max=0.000,255.000

Since this may affect the hillshading for any land areas inland I was also going to attempt the same affect by masking the ocean after the hillshading.

The resulting tiff in either case would be overlaid onto another layer that would have any land areas filled in with the resulting color that would have been used with height 0 in the hgt file.  I am doing this because I have a coastline shapefile that represents land areas but not ocean areas.

Is my approach a good idea and/or what am I missing to mask the ocean areas into the alpha layer?
Thanks for any help.

From frankie at debian.org  Thu Apr  8 04:25:17 2010
From: frankie at debian.org (Francesco P. Lovergine)
Date: Thu Apr  8 04:45:27 2010
Subject: [gdal-dev] Re: GDAL trunk compilation broken by r19335 / minizip /
	libkml
In-Reply-To: <201004072136.33295.even.rouault@mines-paris.org>
References: <201004072136.33295.even.rouault@mines-paris.org>
Message-ID: <20100408082517.GA2234@blegrez.ba.issia.cnr.it>

On Wed, Apr 07, 2010 at 09:36:31PM +0200, Even Rouault wrote:
> For the long term solution, I'm not sure what the best option is. In the past, 
> I had 'imported' the unzip part of minizip in GDAL port subdirectory to add 
> support for a /vsizip virtual file system. To avoid issues for applications 
> that would link both GDAL and minizip (see (1)), I had renamed the symbols of 
> the imported files with cpl_ prefix. I choosed this because as far as I 
> remember, minizip didn't come as a nicely & standard packaged library (it was 
> some tool/demonstration code living in the contrib directory from the 'zip' 
> project) and so it didn't seem practical to add support for its detection 
> in ./configure (see (2)). Perhaps this has changed now and minizip is a more 
> standard library dependency. A bit of googling shows
> http://groups.google.com/group/linux.debian.bugs.dist/browse_thread/thread/c82c7d7ead3ec189?tvc=2 
> which reveals that the issue still seems up-to-date. Fedora has apparently 
> minizip packaged as a library, but Debian not.
> 
> The issue with minizip will also arise with the new KML driver that Brian Case 
> is developping that uses libkml, and minizip is a dependency of libkml. I'm 
> not sure how libkml is supposed to be packaged : are minizip symbols 
> statically linked in libkml (if it is the case, are the minizip symbols 
> exported in the windows/linux builds ?) or is minizip a dependency as a 
> shared library ?
> 
> Actually, another bit of googling shows that Debian has packaged libkml 
> (http://packages.debian.org/squeeze/libkml0) and that a libminizip.so is part 
> of the package. But the -dev package doesn't seem to include the headers of 
> minizip, so it is probably only seen as an internal dependency.
> 
> The situation is quite confusing, isn't it ? Any thought anyone on the best 
> approach to use minizip ?
> 

Currently minizip is provided in libkml as a shlib on Debian, but it is not
distributed with zlib. That could change in the future, but currently
there's not a proper support upstream (e.g. no SONAME etc.). The libkml
way is a bit peculiar because google folks have introduced a shared lib
on their own, which is not something provided by Gilles. 

As a general advice, Debian policy discourage embedding of third parties libraries,
because security support becomes a nightmare and we have currently
no way of tracking embedded libraries in the whole archive.

My own opinion is that GDAL should provide both a inner copy and/or a way
of linking an external library. Using a gdal-specific namespace is a
solution for name collisions, but does not solve the security concerns.

> Best regards,
> 
> Even
> 
> (1) : This can be a problem. For example some applications use GDAL built with 
> its internal libtiff (libtiff 4.x based) and also link with the system 
> libtiff (in most cases still libtiff 3.x), directly or indirectly (for 
> example GTK+-2.0 links with libtiff). So a guy linking its app with GDAL and 
> GTK can end up pulling 2 libtiff versions... Because of the ABI changes 
> between libtiff 3.x and 4.x, this is known to cause crashes on Linux in some 
> circumstances. We probably want to avoid such situation with minizip in case 
> various software packages depend on incompatible minizip versions (although 
> note (2) shows that they've managed to avoid ABI clashes, so this is just a 
> theoretical problem for now)
> 

We (as Debian) could move to use versioned symbols, which
could definitively solve those kind of problems. But that is a GNU ld
specific implementation. Other libraries already adopted the same trick.

> (2) : It also enabled me to experiment with adding support for ZIP64 
> unzipping. Very recently (15 march 2010) upstream zlib has incorporated back 
> the changes in minizip 1.1 (and in zlib124 package) in a cleaner & backward 
> compatible way by adding new symbols with 64 prefix. So if latest minizip was 
> a dependency, we could drop the cpl_minizip files from GDAL source and use 
> upstream version instead. The ZIP64 issue isn't terribly important to me so 
> this would certainly not be a show-stopper for moving to another solution 
> that would only require using the old minizip interfaces. And the 
> cpl_vsil_gzip.cpp code could certainly be adapted to work with classic or 
> zip64 symbols according to what is available.

-- 
Francesco P. Lovergine
From szekerest at gmail.com  Thu Apr  8 05:46:38 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Apr  8 05:46:41 2010
Subject: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip / 
	libkml
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E2817EED53D57@SPATCEX003.spadac.com>
References: <201004072136.33295.even.rouault@mines-paris.org>
	<m2xf3b73b7d1004071516za59e7c0fh3cdc3359365b5cbf@mail.gmail.com>
	<4B3B3C35D34C9345BC8914C199882E2817EED53D57@SPATCEX003.spadac.com>
Message-ID: <i2xf3b73b7d1004080246h8856d3fdoed4ce14b45dc2e1d@mail.gmail.com>

2010/4/8 Harsh Govind <harsh.govind@spadac.com>

> I just checked the link and seems like the build is broken on
> szekerest-vc80-full. It cannot find ioapi.h which should be present in
> minizip include directory. I compiled the minizip as a library. Below are
> the commands I used in order to build minizip in VS2005 Command Prompt:
>
>

The issue was fixed and seems working correctly on szekerest-vc80-full.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/76f21d72/attachment.html
From warmerdam at pobox.com  Thu Apr  8 08:24:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr  8 08:25:17 2010
Subject: [gdal-dev] getcolortable is null
In-Reply-To: <1eccc81.11d7d.127dafca4b0.Coremail.weixj2003ld@163.com>
References: <4BBC9E73.3020805@pobox.com> <4BBC6C37.4080008@pobox.com>
	<12df55f.7e2b.127d6f3ac5d.Coremail.weixj2003ld@163.com>
	<16ea547.c191.127d8b97ab1.Coremail.weixj2003ld@163.com>
	<1eccc81.11d7d.127dafca4b0.Coremail.weixj2003ld@163.com>
Message-ID: <4BBDCAF7.6010502@pobox.com>

weixj2003ld wrote:
> Thk u for your detail reply.
> 1.Now,I have a DEM(.img) file,and its band number is 1.When I use 
> 'gdal_translate  -b 1 -of  PNG old.img new.png' to create a png file(I 
> think its contains height map infomation,is it?).the error 'Warning 
> 6:PNG driver doesn't support data type Int16.Only eight bit<Byte>' and 
> sixteen bit<Uint16> bands supported.Defaulting to Byte.

Wei,

I would suggest converting to the supported type.

eg.

gdal_translate -of PNG -b 1 -ot UInt16 old.img new .png

> 2.When I use 'gdal_translate -b 1 -of JPEG old.img new.jpg',the error 
> 'JPEG doesn't support data type Int16. Only eight and twelve bit bands 
> supported<Mk1 libjepg>'

Depending on your intentions, it might be appropriate to rescale the
DEM data to 8bit forvisualization purposes.

gdal_translate -scale -ot Byte -of JPEG -b 1 old.img  new.jpg

I would encourage you to spend a bit more time reading over the commandline
options documentation for gdal_translate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From harsh.govind at spadac.com  Thu Apr  8 09:03:45 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Thu Apr  8 09:03:48 2010
Subject: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip /
	libkml
In-Reply-To: <i2xf3b73b7d1004080246h8856d3fdoed4ce14b45dc2e1d@mail.gmail.com>
References: <201004072136.33295.even.rouault@mines-paris.org>
	<m2xf3b73b7d1004071516za59e7c0fh3cdc3359365b5cbf@mail.gmail.com>
	<4B3B3C35D34C9345BC8914C199882E2817EED53D57@SPATCEX003.spadac.com>,
	<i2xf3b73b7d1004080246h8856d3fdoed4ce14b45dc2e1d@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817EED53D5C@SPATCEX003.spadac.com>

Oh good. Thanks a lot for enabling this driver. It has been tested for rasters over 18GB in size and gives options of both JPG/PNG with default to JPG. 

Next week I will also add an auto-test to make sure the compilation is working. 

Regards,
Harsh Govind
________________________________________
From: Tamas Szekeres [szekerest@gmail.com]
Sent: Thursday, April 08, 2010 05:46 AM
To: Harsh Govind
Cc: Even Rouault; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL trunk compilation broken by r19335 / minizip /     libkml

2010/4/8 Harsh Govind <harsh.govind@spadac.com<mailto:harsh.govind@spadac.com>>
I just checked the link and seems like the build is broken on szekerest-vc80-full. It cannot find ioapi.h which should be present in minizip include directory. I compiled the minizip as a library. Below are the commands I used in order to build minizip in VS2005 Command Prompt:



The issue was fixed and seems working correctly on szekerest-vc80-full.

Best regards,

Tamas




From wickestheweakestgimp at hotmail.com  Thu Apr  8 10:33:15 2010
From: wickestheweakestgimp at hotmail.com (Wickes)
Date: Thu Apr  8 10:33:18 2010
Subject: [gdal-dev] Re: Translating from to JPEG2000 to ECW
In-Reply-To: <201004072359.42326.even.rouault@mines-paris.org>
References: <1270644690403-4864713.post@n2.nabble.com>
	<201004072359.42326.even.rouault@mines-paris.org>
Message-ID: <1270737195646-4871442.post@n2.nabble.com>


Thanks for your reply. Your points about the cache switches make sense as
they now seem to be making a difference to the amount of memory used whereas
before they seemed to do nothing. Sadly, the conversion is still failing at
the same point as before even with the new FWTools package. I've also tried
on another machine and with another file JP2 which both fail in the same way
indicating that the fault is something generic to the JPEG2000 to ECW
process.

I've read about the 500mb limit, could this be an issue? The file is 300mb
higly compressed JP2 but as uncompressed it is well over 500mb...
-- 
View this message in context: http://n2.nabble.com/Translating-from-to-JPEG2000-to-ECW-tp4864713p4871442.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From weixj2003ld at 163.com  Thu Apr  8 10:47:34 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Thu Apr  8 10:47:44 2010
Subject: [gdal-dev] download free DEM data
Message-ID: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>

Where could I download DEM data,please give me a web address..
Thanks for help in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/97b1f58a/attachment.html
From ari.jolma at gmail.com  Thu Apr  8 10:53:13 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr  8 10:53:17 2010
Subject: [gdal-dev] download free DEM data
In-Reply-To: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
References: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
Message-ID: <4BBDEDD9.7080502@gmail.com>

weixj2003ld wrote:
> Where could I download DEM data,please give me a web address..
> Thanks for help in advance.

Dear weixj2003ld,

With a google search "dem download" you get a list of >42 million web 
addresses. For example http://edc2.usgs.gov/geodata/index.php

Best regards,

Ari Jolma

>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jgomezdans at gmail.com  Thu Apr  8 10:55:20 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Apr  8 10:55:23 2010
Subject: [gdal-dev] Problem with libtool on RHEL5/x86_64
Message-ID: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>

Hi,
I'm trying to compile GDAL 1.7.1 on a RHEL5/x86_64 system. My configure call
is

./configure --with-python --with-geos=/usr/bin/geos-config
--with-curl=/usr/bin/curl-config --with-hdf4=/usr/lib64/hdf
--with-sqlite3=yes --with-netcdf=no --with-static-proj4=/usr/lib64/
--with-hdf5=/usr/include/hdf5

which gets me HDF4, HDF5, PROJ, GEOS and so on (the output of this is at the
end of the message, in case it helps.). I then compile with make and it
crashes at the linking the library stage (libtool) with

/usr/lib/libstdc++.so: could not read symbols: File in wrong format

I presume this is a problem with the 64/32bit libraries getting mangled. If
I remove the -lstdc++ entry from postdeps in GDAL's version of libtool, it
apparently works, but the python bindings are unusable. The gdal apps are
also linked to a 64bit GDAL library in /usr/local/lib (and not lib64):
$ ldd /usr/local/bin/gdalinfo
        libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00002b113889c000)
        libproj.so.0 => /usr/lib64/libproj.so.0 (0x00002b113934e000)
        libgeos_c.so.1 => /usr/lib64/libgeos_c.so.1 (0x00002b1139591000)
        [.....]

Can anyone shed any light on what's going on? I don't really understand
libtool & configure at all!

Thanks!
Jose

Output of ./configure:

GDAL is now configured for x86_64-unknown-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           external (BigTIFF=no)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  8/12 bit JPEG TIFF:        no
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              yes
  HDF5 support:              yes
  Kakadu support:            no
  JasPer support:            no
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  EPSILON support:           no
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        no
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          no
  NAS support:               no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  PCIDSK support:            internal
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  SpatiaLite support:        no
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              yes
  VFK support:               yes


  SWIG Bindings:          python

  Statically link PROJ.4:    yes
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/b6df9a7d/attachment-0001.html
From mateusz at loskot.net  Thu Apr  8 11:23:25 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr  8 11:21:37 2010
Subject: [gdal-dev] download free DEM data
In-Reply-To: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
References: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
Message-ID: <4BBDF4ED.7040405@loskot.net>

weixj2003ld wrote:
> Where could I download DEM data,please give me a web address..

http://www.google.com

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From seth at pricepages.org  Thu Apr  8 10:52:51 2010
From: seth at pricepages.org (Seth Price)
Date: Thu Apr  8 11:24:54 2010
Subject: [gdal-dev] download free DEM data
In-Reply-To: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
References: <17d074d.18978.127dde3ed63.Coremail.weixj2003ld@163.com>
Message-ID: <91F496B6-0644-4E21-A667-B84B66AB78DD@pricepages.org>

This isn't the right list for requesting DEM data, but you could start  
here:
http://www2.jpl.nasa.gov/srtm/

~Seth


On Apr 8, 2010, at 8:47 AM, weixj2003ld wrote:

> Where could I download DEM data,please give me a web address..
> Thanks for help in advance.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Thu Apr  8 12:09:47 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr  8 12:09:49 2010
Subject: [gdal-dev] Problem with libtool on RHEL5/x86_64
In-Reply-To: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>
References: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>
Message-ID: <o2zeb502d881004080909td13eec3dwe0a27ea1fc926bbd@mail.gmail.com>

Jose,

Try to configure with libtool disabled with the option "--without-libtool".

On Thu, Apr 8, 2010 at 8:25 PM, Jose Gomez-Dans <jgomezdans@gmail.com>wrote:

> Hi,
> I'm trying to compile GDAL 1.7.1 on a RHEL5/x86_64 system. My configure
> call is
>
> ./configure --with-python --with-geos=/usr/bin/geos-config
> --with-curl=/usr/bin/curl-config --with-hdf4=/usr/lib64/hdf
> --with-sqlite3=yes --with-netcdf=no --with-static-proj4=/usr/lib64/
> --with-hdf5=/usr/include/hdf5
>
> which gets me HDF4, HDF5, PROJ, GEOS and so on (the output of this is at
> the end of the message, in case it helps.). I then compile with make and it
> crashes at the linking the library stage (libtool) with
>
> /usr/lib/libstdc++.so: could not read symbols: File in wrong format
>
> I presume this is a problem with the 64/32bit libraries getting mangled. If
> I remove the -lstdc++ entry from postdeps in GDAL's version of libtool, it
> apparently works, but the python bindings are unusable. The gdal apps are
> also linked to a 64bit GDAL library in /usr/local/lib (and not lib64):
> $ ldd /usr/local/bin/gdalinfo
>         libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00002b113889c000)
>         libproj.so.0 => /usr/lib64/libproj.so.0 (0x00002b113934e000)
>         libgeos_c.so.1 => /usr/lib64/libgeos_c.so.1 (0x00002b1139591000)
>         [.....]
>
> Can anyone shed any light on what's going on? I don't really understand
> libtool & configure at all!
>
> Thanks!
> Jose
>
> Output of ./configure:
>
> GDAL is now configured for x86_64-unknown-linux-gnu
>
>   Installation directory:    /usr/local
>   C compiler:                gcc -g -O2
>   C++ compiler:              g++ -g -O2
>
>   LIBTOOL support:           yes
>
>   LIBZ support:              external
>   GRASS support:             no
>   CFITSIO support:           no
>   PCRaster support:          internal
>   NetCDF support:            no
>   LIBPNG support:            external
>   LIBTIFF support:           external (BigTIFF=no)
>   LIBGEOTIFF support:        internal
>   LIBJPEG support:           external
>   8/12 bit JPEG TIFF:        no
>   LIBGIF support:            external
>   OGDI support:              no
>   HDF4 support:              yes
>   HDF5 support:              yes
>   Kakadu support:            no
>   JasPer support:            no
>   ECW support:               no
>   MrSID support:             no
>   MSG support:               no
>   GRIB support:              yes
>   EPSILON support:           no
>   cURL support (wms/wcs/...):yes
>   PostgreSQL support:        no
>   MySQL support:             no
>   Ingres support:            no
>   Xerces-C support:          no
>   NAS support:               no
>   Expat support:             yes
>   ODBC support:              no
>   PGeo support:              no
>   PCIDSK support:            internal
>   OCI support:               no
>   GEORASTER support:         no
>   SDE support:               no
>   DODS support:              no
>   SQLite support:            yes
>   SpatiaLite support:        no
>   DWGdirect support          no
>   INFORMIX DataBlade support:no
>   GEOS support:              yes
>   VFK support:               yes
>
>
>   SWIG Bindings:          python
>
>   Statically link PROJ.4:    yes
>   enable OGR building:       yes
>   enable pthread support:    no
>   hide internal symbols:     no
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/c232f627/attachment.html
From ari.jolma at gmail.com  Thu Apr  8 12:17:09 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr  8 12:17:17 2010
Subject: [gdal-dev] Problem with libtool on RHEL5/x86_64
In-Reply-To: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>
References: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>
Message-ID: <4BBE0185.3020907@gmail.com>

Jose,

I compile regularly on a RHEL5/x86_64 and had this type of problem, 
which was subsequently fixed. The bug report is here: 
http://trac.osgeo.org/gdal/ticket/3411

Maybe this helps.

Ari

Jose Gomez-Dans wrote:
> Hi,
> I'm trying to compile GDAL 1.7.1 on a RHEL5/x86_64 system. My 
> configure call is
>
> ./configure --with-python --with-geos=/usr/bin/geos-config 
> --with-curl=/usr/bin/curl-config --with-hdf4=/usr/lib64/hdf 
> --with-sqlite3=yes --with-netcdf=no --with-static-proj4=/usr/lib64/ 
> --with-hdf5=/usr/include/hdf5
>
> which gets me HDF4, HDF5, PROJ, GEOS and so on (the output of this is 
> at the end of the message, in case it helps.). I then compile with 
> make and it crashes at the linking the library stage (libtool) with
>
> /usr/lib/libstdc++.so: could not read symbols: File in wrong format
>
> I presume this is a problem with the 64/32bit libraries getting 
> mangled. If I remove the -lstdc++ entry from postdeps in GDAL's 
> version of libtool, it apparently works, but the python bindings are 
> unusable. The gdal apps are also linked to a 64bit GDAL library in 
> /usr/local/lib (and not lib64):
> $ ldd /usr/local/bin/gdalinfo
>         libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00002b113889c000)
>         libproj.so.0 => /usr/lib64/libproj.so.0 (0x00002b113934e000)
>         libgeos_c.so.1 => /usr/lib64/libgeos_c.so.1 (0x00002b1139591000)
>         [.....]
>
> Can anyone shed any light on what's going on? I don't really 
> understand libtool & configure at all!
>
> Thanks!
> Jose
>
> Output of ./configure:
>
> GDAL is now configured for x86_64-unknown-linux-gnu
>
>   Installation directory:    /usr/local
>   C compiler:                gcc -g -O2
>   C++ compiler:              g++ -g -O2
>
>   LIBTOOL support:           yes
>
>   LIBZ support:              external
>   GRASS support:             no
>   CFITSIO support:           no
>   PCRaster support:          internal
>   NetCDF support:            no
>   LIBPNG support:            external
>   LIBTIFF support:           external (BigTIFF=no)
>   LIBGEOTIFF support:        internal
>   LIBJPEG support:           external
>   8/12 bit JPEG TIFF:        no
>   LIBGIF support:            external
>   OGDI support:              no
>   HDF4 support:              yes
>   HDF5 support:              yes
>   Kakadu support:            no
>   JasPer support:            no
>   ECW support:               no
>   MrSID support:             no
>   MSG support:               no
>   GRIB support:              yes
>   EPSILON support:           no
>   cURL support (wms/wcs/...):yes
>   PostgreSQL support:        no
>   MySQL support:             no
>   Ingres support:            no
>   Xerces-C support:          no
>   NAS support:               no
>   Expat support:             yes
>   ODBC support:              no
>   PGeo support:              no
>   PCIDSK support:            internal
>   OCI support:               no
>   GEORASTER support:         no
>   SDE support:               no
>   DODS support:              no
>   SQLite support:            yes
>   SpatiaLite support:        no
>   DWGdirect support          no
>   INFORMIX DataBlade support:no
>   GEOS support:              yes
>   VFK support:               yes
>
>
>   SWIG Bindings:          python
>
>   Statically link PROJ.4:    yes
>   enable OGR building:       yes
>   enable pthread support:    no
>   hide internal symbols:     no
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jgomezdans at gmail.com  Thu Apr  8 12:31:52 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Apr  8 12:31:55 2010
Subject: [gdal-dev] Problem with libtool on RHEL5/x86_64
In-Reply-To: <o2zeb502d881004080909td13eec3dwe0a27ea1fc926bbd@mail.gmail.com>
References: <t2u91d218431004080755t4b508e26s170458907d2a7969@mail.gmail.com>
	<o2zeb502d881004080909td13eec3dwe0a27ea1fc926bbd@mail.gmail.com>
Message-ID: <m2i91d218431004080931v29dbcabmab4b9efed0f66488@mail.gmail.com>

Chaitanya,

On 8 April 2010 17:09, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:

> Try to configure with libtool disabled with the option "--without-libtool".
>

This seems to have solved it. thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100408/e2a055d3/attachment.html
From jorgearevalo at gis4free.org  Thu Apr  8 13:15:51 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Thu Apr  8 13:16:14 2010
Subject: [gdal-dev] create a png file
In-Reply-To: <313253.3887.127d63e3f9c.Coremail.weixj2003ld@163.com>
References: <c12dbf.c88f.127d150a962.Coremail.weixj2003ld@163.com> 
	<t2veb502d881004060927g4be8db1agfd38a7b74a17816@mail.gmail.com> 
	<313253.3887.127d63e3f9c.Coremail.weixj2003ld@163.com>
Message-ID: <r2kd321138e1004081015x899470f4wc9a973e2c8c4bb12@mail.gmail.com>

Hello,

On Wed, Apr 7, 2010 at 5:09 AM, weixj2003ld <weixj2003ld@163.com> wrote:
> Thk u for your reply.
> I read the tuorail.but I think that will not satisfy my need.
> I want to create a .png file,and it only contains height data and not
> contains metadata, a coordinate system, a georeferencing transform, size of
> raster and various other information,I find that the Create() and
> CreateCopy(). is will create a file that contains all the things.
> Kind regards.
>

A PNG file itself can't store metadata, like a GeoTiff file. You'll
need to create an external world file to store it. Please take a read
at this, from http://www.gdal.org/frmt_various.html

"PNG files can be created with a type of PNG, using the CreateCopy()
method, requiring a prototype to read from. Writing includes support
for the various image types, and will preserve transparency/nodata
values. Georeferencing .wld files are written if option WORLDFILE
setted. All pixel types other than 16bit unsigned will be written as
eight bit.

Creation Options:

WORLDFILE=YES: Force the generation of an associated ESRI world file
(with the extension .wld). See World File section for details."

Best regards,
Jorge

>
>
> Please refer to http://www.gdal.org/gdal_tutorial.html
>
> 2010/4/6 weixj2003ld <weixj2003ld@163.com>
>>
>> I read data from a DEM file, and want to create a .png .Now I have read
>> data, but I do not know how to create a png file that contains the height
>> map value of each point from the DEM file.
>> Thk u.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.2416N 80.1426E
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Thu Apr  8 14:37:06 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Apr  8 14:37:19 2010
Subject: [gdal-dev] Re: Translating from to JPEG2000 to ECW
References: <1270644690403-4864713.post@n2.nabble.com>
	<201004072359.42326.even.rouault@mines-paris.org>
	<1270737195646-4871442.post@n2.nabble.com>
Message-ID: <loom.20100408T203227-604@post.gmane.org>

Wickes <wickestheweakestgimp <at> hotmail.com> writes:

 
> I've read about the 500mb limit, could this be an issue? The file is 300mb
> higly compressed JP2 but as uncompressed it is well over 500mb...

I do not suppose so, you are using LARGE_OK=YES that is for overriding this
limit.  I would first try if it works piecewise, JPEG2000 -> BigTIFF -> ECW. It
is not a final solution but it could give some information.

-Jukka Rahkonen-



From stefano.iacovella at gmail.com  Fri Apr  9 03:32:49 2010
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri Apr  9 04:05:50 2010
Subject: [gdal-dev] Gdal2tiles -z not working
Message-ID: <j2v850cfe311004090032ze7f78297mb70e92f9e9ea5ac5@mail.gmail.com>

Dear all

I'm trying to use gdal2tiles.py and it seems --zoom parameter is not
working.

The testing configuration is:

Ubuntu 9.10
python 2.6.4
gdal 1.7.1 compiled from source with ECW support

gdal2tiles.py header is

#  $Id: gdal2tiles.py 18194 2009-12-06 20:07:45Z rouault $

If I run gdal2tiles without the --zoom parameter the output image
files are ok and I can preview any level without problem. The syntax
used for the TMS production is

gdal2tiles.py -r cubic -p raster source_dataset.ecw SOURCE_DATASET

If I run with this syntax

gdal2tiles.py -r cubic -p raster --zoom 0 ritaglio.ecw RITAGLIO

the output TMS contains a 0 level with a picture quite different form
those in the previous TMS 0 level. It seems like the image is strtched
up and left.
am I making some error?

Thanks in advance for any hints
Stefano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100409/0e7b9076/attachment-0001.html
From brian.newton.davis at gmail.com  Fri Apr  9 10:54:03 2010
From: brian.newton.davis at gmail.com (drdavis)
Date: Fri Apr  9 10:54:23 2010
Subject: [gdal-dev] 1.7.1 build error
Message-ID: <4BBF3F8B.8010206@gmail.com>

I am trying to compile gdal 1.7.1 on 64-bit linux system.
no problems previously with 1.6.0 nor 1.6.3.

I get:
/usr/bin/ld: /usr/local/lib/libjasper.a(jas_stream.o): relocation 
R_X86_64_32S against `a local symbol' can not be used when making a 
shared object; recompile with -fPIC
/usr/local/lib/libjasper.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1

Is there a configure option which takes care of this?

-- 
brian (dot) newton (dot) davis (at) gmail (dot) com
--
Brian Davis
Visualize Whirled Peas

From tom.van.tilburg at gmail.com  Fri Apr  9 11:25:59 2010
From: tom.van.tilburg at gmail.com (TomvanTilburg)
Date: Fri Apr  9 11:26:00 2010
Subject: [gdal-dev] Re: PROJ.4 EPSG:28992
In-Reply-To: <1270713868982-4869700.post@n2.nabble.com>
References: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>
	<47C8332B.1070003@pobox.com>
	<1259239461411-4070970.post@n2.nabble.com>
	<4B0ED808.20700@mines-paris.org>
	<1259763905593-4100011.post@n2.nabble.com>
	<4B16E687.90409@mines-paris.org>
	<1259832035068-4104971.post@n2.nabble.com>
	<1270713868982-4869700.post@n2.nabble.com>
Message-ID: <1270826759122-4877724.post@n2.nabble.com>


Hi Mark,

Sorry, but no luck overhere. I just gave up.
One more thing I tried is:
ImportFromProj4('+proj=sterea +lat_0=52.15616055555555
+lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
+units=m
+towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812
+no_defs no_defs')

instead of
ImportFromEPSG(28992)

but this throws the same error.

I'm afraid my knowledge on the subject is too limited to solve it.

Goog luck!
 Tom

P.S. note the 'towgs84' parameter in the Projection string. The official
EPSG:28992 projection parameter is lacking this so I added it (after reading 
http://oegeo.wordpress.com/2008/05/20/note-to-self-the-one-and-only-rd-projection-string/
this ) 
-- 
View this message in context: http://n2.nabble.com/PROJ-4-EPSG-28992-tp2033665p4877724.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dboyd at data-tactics.com  Fri Apr  9 11:08:36 2010
From: dboyd at data-tactics.com (David Boyd)
Date: Fri Apr  9 11:27:08 2010
Subject: [gdal-dev] 1.7.1 build error
In-Reply-To: <4BBF3F8B.8010206@gmail.com>
References: <4BBF3F8B.8010206@gmail.com>
Message-ID: <4BBF42F4.8060401@data-tactics.com>

Brian:
    Hmmm.  Which Linux distro?   I just did this under
RedHat 5.4 and did not get that error.
Email me direct and I can send you a tarball of my
build directory.


drdavis wrote:
> I am trying to compile gdal 1.7.1 on 64-bit linux system.
> no problems previously with 1.6.0 nor 1.6.3.
> 
> I get:
> /usr/bin/ld: /usr/local/lib/libjasper.a(jas_stream.o): relocation 
> R_X86_64_32S against `a local symbol' can not be used when making a 
> shared object; recompile with -fPIC
> /usr/local/lib/libjasper.a: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> 
> Is there a configure option which takes care of this?
> 

-- 
========= mailto:dboyd@data-tactics.com ============
David W. Boyd
Director, Engineering, Research and Development
Data Tactics Corporation
7901 Jones Branch, Suite 240
Mclean, VA 22102
office:   +1-703-506-3735, ext 308
fax:     +1-703-506-6703
cell:     +1-703-402-7908
============== http://www.data-tactics.com/ ============


The information contained in this message may be privileged
and/or confidential and protected from disclosure.
If the reader of this message is not the intended recipient
or an employee or agent responsible for delivering this message
to the intended recipient, you are hereby notified that any
dissemination, distribution or copying of this communication
is strictly prohibited.  If you have received this communication
in error, please notify the sender immediately by replying to
this message and deleting the material from any computer.


From pauldelamater at gmail.com  Fri Apr  9 12:37:04 2010
From: pauldelamater at gmail.com (Paul Delamater)
Date: Fri Apr  9 12:37:28 2010
Subject: [gdal-dev] 1.7.1 build error
Message-ID: <p2u4791a2001004090937lb61abfdcpe9edabff951cd0b2@mail.gmail.com>

Hey Brian,

I had a similar issue with my build earlier this week (on Ubuntu 9.10,
64bit).  I had the same error at one point... but I don't believe it was at
libjasper.a.

Are you attempting to build with hdf4 and/or netcdf?  My problem seemed to
result from some conflicting settings with those installs.  I ended up
rebuilding hdf4, hdf5, and netcdf (in that order) and I can send you my
configuration settings if you're interested.

Thanks, -Paul Delamater
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100409/81fd4e1d/attachment.html
From dmorissette at mapgears.com  Fri Apr  9 15:46:33 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Apr  9 15:46:35 2010
Subject: [gdal-dev] Rendez-vous OSGeo-Quebec, June 15-16, 2010
Message-ID: <4BBF8419.9010707@mapgears.com>

Hi everyone,

Here is an announcement for a Quebec Local chapter event that may be of 
interest to members of the GDAL community (see our great line-up of 
speakers, which includes Frank Warmerdam).

Hoping to meet some of you in Chicoutimi in June!

Daniel



*** A Rendez-vous with Free and Open Source Geomatics! ***

The Quebec Local Chapter of OSGeo is proud to announce the first edition 
of Rendez-vous OSGeo Qu?bec which will to take place in Saguenay, 
Quebec, on June 15-16, 2010.

The date of the event also coincides with the second anniversary of the 
local chapter which was created following a meeting at the same location 
in June of 2008. A very dynamic community of over a hundred active 
members has built around the OSGeo Quebec Local Chapter since its 
creation 2 years ago and we feel that it is just the beginning.

Members of the OSGeo community will be invited to share their projects 
and realizations, and visitors will have the exceptional opportunity to 
meet and interact with our great line-up of invited speakers, some of 
the key players of the North American OSGeo community, including (in 
alphabetical order):

     * Steve Lime
     * Jeff McKenna
     * Tyler Mitchell
     * Paul Ramsey
     * Frank Warmerdam

In line with OSGeo's knowledge sharing and community networking 
objectives, Rendez-vous OSGeo Quebec 2010 complement its rich conference 
program with a good share of social events: an ice-breaker is planned 
for the first night, and a boat cruise on the gorgeous Saguenay Fjord 
will take place on the second night.

All the ingredients are there for a memorable gathering, and we hope 
that many of you from the nearby OSGeo chapters as well as from the 
international OSGeo community will join us in Saguenay in June.

More information about the conference program, invited speakers, 
registration, and more, are available on the Rendez-vous OSGeo Quebec 
2010 website at http://rendez-vous-osgeo-qc.org/2010/en/

Sponsors:

     * Sponsorship opportunities are available. The visibility plan is 
available at (in French) http://rendez-vous-osgeo-qc.org/2010/partenaires/

Media Partner:

     * Baliz Media : http://www.BALIZ-MEDIA.com/

Call for presentations:

     * (In French) http://rendez-vous-osgeo-qc.org/2010/programme/appel/
     * Note: Even though most of the attendants will be French speakers, 
we are open to English presentation proposals.

Contact information:

     * Email : rdvosgeoqc2010@gmail.com
     * Website: http://rendez-vous-osgeo-qc.org/2010/en/
     * Twitter : http://twitter.com/osgeoqc
From weixj2003ld at 163.com  Fri Apr  9 20:14:41 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Fri Apr  9 20:14:47 2010
Subject: [gdal-dev] DEM file and Goetiff file
Message-ID: <18a5d.5ca.127e511805e.Coremail.weixj2003ld@163.com>

I have two base question:
1.the satellte photo height map file is always dem file?and the number of it is always 1?
2.Now I download 7 bands goetiff file,how to translate them into a RGB picture with GDAL?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100410/c05641ee/attachment.html
From weixj2003ld at 163.com  Sun Apr 11 02:32:51 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Sun Apr 11 02:33:02 2010
Subject: [gdal-dev] write error
Message-ID: <1f7543f.2197.127eb9213e1.Coremail.weixj2003ld@163.com>



I use the following code to read data from a geotiff file and write it into a new one.the bands number is 6;
...
GDALDataset *poSrcDS,*poDstDS;//poSrcDs:the source file,poDstDS:the goal source 
GDALRasterBand *poSrcBand,*poDstBand;//poSrcBand:the source band,poDstBand:the goal band
GDALDriver *poDstDriver;
double *m_AdGeoTransform=new double[6];
 
...
poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->GetDescrition());
poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
poSrcDS->GetGeoTransform(m_AdGeoTransform)
poDstDS->SetGeoTransform(m_AdGeoTransform);
poDstDS->SetProjection(poSrcDS->GetProjectionRef());
 
for(int iBand=0;iBand<6;iBand++)
{
   poSrcBand=poSrcDS->GetRaserBand(iBand+1);
  poDstBand=poDstDS->GetRaserBand(iBand+1);
  float *pafScanline;
  pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
  for(int i=1;i<nY;i++)
  {
     poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
     poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);//If I comment this code,the program will be ok.
   }
}
GDALClose((GDALDatasetH)poDstDS);
 
When I run my program,CPU is very alway busy,and the program is blocked,why?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100411/1c55aef9/attachment.html
From zoltans at geograph.co.za  Sun Apr 11 02:49:28 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun Apr 11 02:49:50 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
Message-ID: <4BC170F8.4000405@geograph.co.za>

Hi,
I'm using viewing software that cannot rotate images on the fly (see
non-zero rotation parameters in TFW below.)

I have almost 2000 scans in GeoTIFF that I hence need to deskew and also
want to crop.
I've been looking at gdalwarp, but can't see an obvious way to
bash-script deskewing, so please can someone give me a pointer where to
start/research.

Thanks in advance,
Zoltan

Each image represents a quarter degree square and I can use the image
name to calculate the Lat Long values of the 4 corners.
3424bb is:
TL:  34.00S 24.75E
TR:  34.00S 25.00E
BR:  34.25S 25.00E
BL:  34.25S 24.75E
I want to crop the image on these quarter degree boundaries, and deskew it.
<removed> as msg size exceeded 50k (was 70K)
The attached jpeg is a much-reduced sample, so you can get the idea of
what they look like.
</removed>

I have the following information at hand:


#################################################################################
ls -la:
   geograph geograph  5231378 2006-09-13 17:28 3424BB_1999_ED3_GEO.TIF

#################################################################################
Pixel positions of the 4 quarter degree square corners are at:
TL 1090.489746 1226.423828
TR 6546.639160 1220.069458
BR 6546.430176 7770.449219
BL 1106.605347 7776.899902

#################################################################################
cat 3424BB_1999_ED3_GEO.tfw
             0.0000459558
            -0.0000000502
            -0.0000000963
            -0.0000381753
            24.6998662805
           -33.9529134036

#################################################################################
gdalinfo 3424BB_1999_ED3_GEO.TIF
Driver: GTiff/GeoTIFF
Files: 3424BB_1999_ED3_GEO.TIF
Size is 7796, 10629
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
GeoTransform =
   24.6998433507502, 4.595577857784442e-05, -9.634765806162092e-08
   -33.95289429083027, -5.021067810400542e-08, -3.817529052330018e-05
Metadata:
   AREA_OR_POINT=Area
   TIFFTAG_XRESOLUTION=300
   TIFFTAG_YRESOLUTION=300
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  24.6998434, -33.9528943) ( 24d41'59.44"E, 33d57'10.42"S)
Lower Left  (  24.6988193, -34.3586595) ( 24d41'55.75"E, 34d21'31.17"S)
Upper Right (  25.0581146, -33.9532857) ( 25d 3'29.21"E, 33d57'11.83"S)
Lower Right (  25.0570905, -34.3590509) ( 25d 3'25.53"E, 34d21'32.58"S)
Center      (  24.8784669, -34.1559726) ( 24d52'42.48"E, 34d 9'21.50"S)
Band 1 Block=7796x1 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 106,180,131,255
etc etc











-- 

===========================================
Zoltan Szecsei
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From zoltans at geograph.co.za  Sun Apr 11 03:49:54 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun Apr 11 03:50:14 2010
Subject: [gdal-dev] Support for GeoTIFF 12 bit with JPEG compression.
Message-ID: <4BC17F22.4090205@geograph.co.za>

Hi,
Is GDAL likely to get support for these image formats anytime soon?

(Aerial images from the Intergraph DMC system)

Thanks & regards,
Zoltan

zls@gl1:/home/gisdata$ gdalinfo 2820D_2009_151_06_0204_RGB.tif
ERROR 1: JPEGLib:Unsupported JPEG data precision 12
Driver: GTiff/GeoTIFF
Files: 2820D_2009_151_06_0204_RGB.tif
Size is 7680, 13824
Coordinate System is `'
Metadata:
  TIFFTAG_XRESOLUTION=833.33331
  TIFFTAG_YRESOLUTION=833.33331
  TIFFTAG_MINSAMPLEVALUE=0
  TIFFTAG_MAXSAMPLEVALUE=4095
  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,13824.0)
Upper Right ( 7680.0,    0.0)
Lower Right ( 7680.0,13824.0)
Center      ( 3840.0, 6912.0)
Band 1 Block=256x256 Type=UInt16, ColorInterp=Red
  Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216, 
60x108, 30x54, 15x27
Band 2 Block=256x256 Type=UInt16, ColorInterp=Green
  Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216, 
60x108, 30x54, 15x27
Band 3 Block=256x256 Type=UInt16, ColorInterp=Blue
  Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216, 
60x108, 30x54, 15x27
zls@gl1:/home/gisdata$




-- 

===========================================
Zoltan Szecsei
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From even.rouault at mines-paris.org  Sun Apr 11 04:47:36 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 11 04:47:55 2010
Subject: [gdal-dev] Support for GeoTIFF 12 bit with JPEG compression.
In-Reply-To: <4BC17F22.4090205@geograph.co.za>
References: <4BC17F22.4090205@geograph.co.za>
Message-ID: <201004111047.40283.even.rouault@mines-paris.org>

Zoltan,

GDAL supports reading & writing JPEG-IN-TIFF 12bit since version 1.7.0, 
provided that you build it with internal libtiff and internal libjpeg.

See http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG

Best regards,

Even

Le Sunday 11 April 2010 09:49:54 Zoltan Szecsei, vous avez ?crit?:
> Hi,
> Is GDAL likely to get support for these image formats anytime soon?
>
> (Aerial images from the Intergraph DMC system)
>
> Thanks & regards,
> Zoltan
>
> zls@gl1:/home/gisdata$ gdalinfo 2820D_2009_151_06_0204_RGB.tif
> ERROR 1: JPEGLib:Unsupported JPEG data precision 12
> Driver: GTiff/GeoTIFF
> Files: 2820D_2009_151_06_0204_RGB.tif
> Size is 7680, 13824
> Coordinate System is `'
> Metadata:
>   TIFFTAG_XRESOLUTION=833.33331
>   TIFFTAG_YRESOLUTION=833.33331
>   TIFFTAG_MINSAMPLEVALUE=0
>   TIFFTAG_MAXSAMPLEVALUE=4095
>   TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
> Image Structure Metadata:
>   COMPRESSION=JPEG
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,13824.0)
> Upper Right ( 7680.0,    0.0)
> Lower Right ( 7680.0,13824.0)
> Center      ( 3840.0, 6912.0)
> Band 1 Block=256x256 Type=UInt16, ColorInterp=Red
>   Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216,
> 60x108, 30x54, 15x27
> Band 2 Block=256x256 Type=UInt16, ColorInterp=Green
>   Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216,
> 60x108, 30x54, 15x27
> Band 3 Block=256x256 Type=UInt16, ColorInterp=Blue
>   Overviews: 3840x6912, 1920x3456, 960x1728, 480x864, 240x432, 120x216,
> 60x108, 30x54, 15x27
> zls@gl1:/home/gisdata$


From even.rouault at mines-paris.org  Sun Apr 11 05:10:43 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 11 05:11:01 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
In-Reply-To: <4BC170F8.4000405@geograph.co.za>
References: <4BC170F8.4000405@geograph.co.za>
Message-ID: <201004111110.45295.even.rouault@mines-paris.org>

Zoltan,

I'd use something like : gdalwarp -te 24.75 -34.25 25.00 -34.00 src.tif 
out.tif

In your case, you just need to be able to analyze the image name, compute 
xmin, xmax, ymin, ymax, build the gdalwarp line and spawn the new process. So 
I think you could use any programming/scripting language you like. I'd 
personnaly use Python and the GDAL Python bindings (other well supported 
binding languages are Perl, CSharp and Java). The advantage is that you 
wouldn't need to make any assumption on the structure of the image name and 
could get its spatial extent in a more reliable way.

Le Sunday 11 April 2010 08:49:28 Zoltan Szecsei, vous avez ?crit?:
> Hi,
> I'm using viewing software that cannot rotate images on the fly (see
> non-zero rotation parameters in TFW below.)
>
> I have almost 2000 scans in GeoTIFF that I hence need to deskew and also
> want to crop.
> I've been looking at gdalwarp, but can't see an obvious way to
> bash-script deskewing, so please can someone give me a pointer where to
> start/research.
>
> Thanks in advance,
> Zoltan
>
> Each image represents a quarter degree square and I can use the image
> name to calculate the Lat Long values of the 4 corners.
> 3424bb is:
> TL:  34.00S 24.75E
> TR:  34.00S 25.00E
> BR:  34.25S 25.00E
> BL:  34.25S 24.75E
> I want to crop the image on these quarter degree boundaries, and deskew it.
> <removed> as msg size exceeded 50k (was 70K)
> The attached jpeg is a much-reduced sample, so you can get the idea of
> what they look like.
> </removed>
>
> I have the following information at hand:
>
>
> ###########################################################################
>###### ls -la:
>    geograph geograph  5231378 2006-09-13 17:28 3424BB_1999_ED3_GEO.TIF
>
> ###########################################################################
>###### Pixel positions of the 4 quarter degree square corners are at:
> TL 1090.489746 1226.423828
> TR 6546.639160 1220.069458
> BR 6546.430176 7770.449219
> BL 1106.605347 7776.899902
>
> ###########################################################################
>###### cat 3424BB_1999_ED3_GEO.tfw
>              0.0000459558
>             -0.0000000502
>             -0.0000000963
>             -0.0000381753
>             24.6998662805
>            -33.9529134036
>
> ###########################################################################
>###### gdalinfo 3424BB_1999_ED3_GEO.TIF
> Driver: GTiff/GeoTIFF
> Files: 3424BB_1999_ED3_GEO.TIF
> Size is 7796, 10629
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.2572235629972,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433],
>      AUTHORITY["EPSG","4326"]]
> GeoTransform =
>    24.6998433507502, 4.595577857784442e-05, -9.634765806162092e-08
>    -33.95289429083027, -5.021067810400542e-08, -3.817529052330018e-05
> Metadata:
>    AREA_OR_POINT=Area
>    TIFFTAG_XRESOLUTION=300
>    TIFFTAG_YRESOLUTION=300
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>    COMPRESSION=LZW
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  24.6998434, -33.9528943) ( 24d41'59.44"E, 33d57'10.42"S)
> Lower Left  (  24.6988193, -34.3586595) ( 24d41'55.75"E, 34d21'31.17"S)
> Upper Right (  25.0581146, -33.9532857) ( 25d 3'29.21"E, 33d57'11.83"S)
> Lower Right (  25.0570905, -34.3590509) ( 25d 3'25.53"E, 34d21'32.58"S)
> Center      (  24.8784669, -34.1559726) ( 24d52'42.48"E, 34d 9'21.50"S)
> Band 1 Block=7796x1 Type=Byte, ColorInterp=Palette
>    Color Table (RGB with 256 entries)
>      0: 106,180,131,255
> etc etc


From even.rouault at mines-paris.org  Sun Apr 11 05:19:38 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 11 05:19:48 2010
Subject: [gdal-dev] write error
In-Reply-To: <1f7543f.2197.127eb9213e1.Coremail.weixj2003ld@163.com>
References: <1f7543f.2197.127eb9213e1.Coremail.weixj2003ld@163.com>
Message-ID: <201004111119.38186.even.rouault@mines-paris.org>

The RasterIO parameters are not correct.

Try instead :
 poSrcBand->RasterIO(GF_Read,0,i,nX,1,pafScanline,nX,1,GDT_Float32,0,0);
 poDstBand->RasterIO(GF_Write,0,i,nX,1,pafScanline,nX,1,GDT_Float32,0,0);

The 'for(int i=1;i<nY;i++)' loop is not correct. The starting value of i 
should be 0.

Ther's also a leak of the *pafScanline buffer.

But if I were you, I'd use the following function to do the copy of the 
imagery :

CPLErr CPL_DLL CPL_STDCALL GDALDatasetCopyWholeRaster(
    GDALDatasetH hSrcDS, GDALDatasetH hDstDS, char **papszOptions, 
    GDALProgressFunc pfnProgress, void *pProgressData );

Le Sunday 11 April 2010 08:32:51 weixj2003ld, vous avez ?crit?:
> I use the following code to read data from a geotiff file and write it into
> a new one.the bands number is 6; ...
> GDALDataset *poSrcDS,*poDstDS;//poSrcDs:the source file,poDstDS:the goal
> source GDALRasterBand *poSrcBand,*poDstBand;//poSrcBand:the source
> band,poDstBand:the goal band GDALDriver *poDstDriver;
> double *m_AdGeoTransform=new double[6];
>
> ...
> poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->G
>etDescrition());
> poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
> poSrcDS->GetGeoTransform(m_AdGeoTransform)
> poDstDS->SetGeoTransform(m_AdGeoTransform);
> poDstDS->SetProjection(poSrcDS->GetProjectionRef());
>
> for(int iBand=0;iBand<6;iBand++)
> {
>    poSrcBand=poSrcDS->GetRaserBand(iBand+1);
>   poDstBand=poDstDS->GetRaserBand(iBand+1);
>   float *pafScanline;
>   pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
>   for(int i=1;i<nY;i++)
>   {
>     
> poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
> poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);//I
>f I comment this code,the program will be ok. }
> }
> GDALClose((GDALDatasetH)poDstDS);
>
> When I run my program,CPU is very alway busy,and the program is
> blocked,why?


From zoltans at geograph.co.za  Sun Apr 11 05:19:47 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun Apr 11 05:20:08 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
In-Reply-To: <201004111110.45295.even.rouault@mines-paris.org>
References: <4BC170F8.4000405@geograph.co.za>
	<201004111110.45295.even.rouault@mines-paris.org>
Message-ID: <4BC19433.30505@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100411/8ea7e089/attachment-0001.html
From zoltans at geograph.co.za  Sun Apr 11 07:38:21 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun Apr 11 07:38:42 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
In-Reply-To: <4BC19433.30505@geograph.co.za>
References: <4BC170F8.4000405@geograph.co.za>	<201004111110.45295.even.rouault@mines-paris.org>
	<4BC19433.30505@geograph.co.za>
Message-ID: <4BC1B4AD.3000107@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100411/9e2bd4bc/attachment.html
From even.rouault at mines-paris.org  Sun Apr 11 08:24:50 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 11 08:25:07 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
In-Reply-To: <4BC1B4AD.3000107@geograph.co.za>
References: <4BC170F8.4000405@geograph.co.za> <4BC19433.30505@geograph.co.za>
	<4BC1B4AD.3000107@geograph.co.za>
Message-ID: <201004111424.51559.even.rouault@mines-paris.org>

Zoltan,

With 4 GCPs, by default, gdalwarp uses a 1st-order polynomial
If you provide 6 GCPs or more, it will use a 2nd-order polynomial.

You can also try specifying -tps to use the Thin Plate Spline transformer.

Le Sunday 11 April 2010 13:38:21 Zoltan Szecsei, vous avez ?crit?:
>  Hi All,
>  Even's advice below (for cropping) was perfect for what I wanted, but now
> I see that the original georeferencing of the scanned images was not that
> great.
>
>  I have pixel values for the (skew) LatLong corners, but I cant fathom out
> how to use these as GCPs to re-geo-reference the scans. The following
> introduces the GCPs into the image,
>  gdal_translate -gcp 361.125702 529.504089 20.00 -28.25 -gcp 6142.089844
> 530.520996 20.25 -28.25 -gcp 6129.833496 7090.170410 -20.25 -28.50 -gcp
> 359.345825 7085.267090 20.00 -28.50? 2820AC_1990_ED2_GEO.TIF
> ../2820ac_gcp.tif
>
>  but running:
>  gdalwarp -te 20.00 -28.50 20.25 -28.25 2820ac_gcp.tif 2820ac_warp.tif
>  does not give the desired results.
>
>
>  What is the correct way to improve the georeferencing of and existing
> GeoTIFF, using GCPs?
>
>  Thanks & regards,
>  Zoltan
>
>
>
>
>  Zoltan Szecsei wrote:
>  Hi Even,
>  I think I have spent too much time using older proprietary software. I
> figured the image would have to be deskewed before using "te" option, but
> now that you mention it, it makes sense that gdal would (should) look at
> all the tfw & embedded parameters before it willy-nilly crops for the
> output extents. (So yes, it should "just work")
>
>  I'll give it a bash on one of the scans.
>
>  Thanks & regards,
>  Zoltan
>
>  Even Rouault wrote:
> Zoltan,
>
> I'd use something like : gdalwarp -te 24.75 -34.25 25.00 -34.00 src.tif
> out.tif
>
> In your case, you just need to be able to analyze the image name, compute
> xmin, xmax, ymin, ymax, build the gdalwarp line and spawn the new process.
> So I think you could use any programming/scripting language you like. I'd
> personnaly use Python and the GDAL Python bindings (other well supported
> binding languages are Perl, CSharp and Java). The advantage is that you
> wouldn't need to make any assumption on the structure of the image name and
> could get its spatial extent in a more reliable way.
>
> Le Sunday 11 April 2010 08:49:28 Zoltan Szecsei, vous avez ?crit?:
>
> Hi,
> I'm using viewing software that cannot rotate images on the fly (see
> non-zero rotation parameters in TFW below.)
>
> I have almost 2000 scans in GeoTIFF that I hence need to deskew and also
> want to crop.
> I've been looking at gdalwarp, but can't see an obvious way to
> bash-script deskewing, so please can someone give me a pointer where to
> start/research.
>
> Thanks in advance,
> Zoltan
>
> Each image represents a quarter degree square and I can use the image
> name to calculate the Lat Long values of the 4 corners.
> 3424bb is:
> TL:  34.00S 24.75E
> TR:  34.00S 25.00E
> BR:  34.25S 25.00E
> BL:  34.25S 24.75E
> I want to crop the image on these quarter degree boundaries, and deskew it.
> <removed> as msg size exceeded 50k (was 70K)
> The attached jpeg is a much-reduced sample, so you can get the idea of
> what they look like.
> </removed>
>
> I have the following information at hand:
>
>
> ###########################################################################
> ###### ls -la:
>    geograph geograph  5231378 2006-09-13 17:28 3424BB_1999_ED3_GEO.TIF
>
> ###########################################################################
> ###### Pixel positions of the 4 quarter degree square corners are at:
> TL 1090.489746 1226.423828
> TR 6546.639160 1220.069458
> BR 6546.430176 7770.449219
> BL 1106.605347 7776.899902
>
> ###########################################################################
> ###### cat 3424BB_1999_ED3_GEO.tfw
>              0.0000459558
>             -0.0000000502
>             -0.0000000963
>             -0.0000381753
>             24.6998662805
>            -33.9529134036
>
> ###########################################################################
> ###### gdalinfo 3424BB_1999_ED3_GEO.TIF
> Driver: GTiff/GeoTIFF
> Files: 3424BB_1999_ED3_GEO.TIF
> Size is 7796, 10629
> Coordinate System is:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.2572235629972,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0],
>      UNIT["degree",0.0174532925199433],
>      AUTHORITY["EPSG","4326"]]
> GeoTransform =
>    24.6998433507502, 4.595577857784442e-05, -9.634765806162092e-08
>    -33.95289429083027, -5.021067810400542e-08, -3.817529052330018e-05
> Metadata:
>    AREA_OR_POINT=Area
>    TIFFTAG_XRESOLUTION=300
>    TIFFTAG_YRESOLUTION=300
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>    COMPRESSION=LZW
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  24.6998434, -33.9528943) ( 24d41'59.44"E, 33d57'10.42"S)
> Lower Left  (  24.6988193, -34.3586595) ( 24d41'55.75"E, 34d21'31.17"S)
> Upper Right (  25.0581146, -33.9532857) ( 25d 3'29.21"E, 33d57'11.83"S)
> Lower Right (  25.0570905, -34.3590509) ( 25d 3'25.53"E, 34d21'32.58"S)
> Center      (  24.8784669, -34.1559726) ( 24d52'42.48"E, 34d 9'21.50"S)
> Band 1 Block=7796x1 Type=Byte, ColorInterp=Palette
>    Color Table (RGB with 256 entries)
>      0: 106,180,131,255
> etc etc
>
>
>
>
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From weixj2003ld at 163.com  Sun Apr 11 22:36:34 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Sun Apr 11 22:36:34 2010
Subject: [gdal-dev] write error
In-Reply-To: <201004111119.38186.even.rouault@mines-paris.org>
References: <201004111119.38186.even.rouault@mines-paris.org>
	<1f7543f.2197.127eb9213e1.Coremail.weixj2003ld@163.com>
Message-ID: <d44639.6a6a.127efe01cce.Coremail.weixj2003ld@163.com>

Thk u  for your answer.
1.I have change the following code:
for(int i=1;i<=nY;i++)
to
for(int i=0;i<nY;i++)
but the problem still exists(CPU is very busy).
2.the function GDALDatasetCopyWholeRaster can not satisfy me,for I want to do the follow things:
read Srcband1,Srcband2,
Dstband1=Srcband1 +Srcband2;
that is,I want to do some computing after readding data.
Kind regards.




>The RasterIO parameters are not correct.
>
>Try instead :
> poSrcBand->RasterIO(GF_Read,0,i,nX,1,pafScanline,nX,1,GDT_Float32,0,0);
> poDstBand->RasterIO(GF_Write,0,i,nX,1,pafScanline,nX,1,GDT_Float32,0,0);
>
>The 'for(int i=1;i<nY;i++)' loop is not correct. The starting value of i 
>should be 0.
>
>Ther's also a leak of the *pafScanline buffer.
>
>But if I were you, I'd use the following function to do the copy of the 
>imagery :
>
>CPLErr CPL_DLL CPL_STDCALL GDALDatasetCopyWholeRaster(
>    GDALDatasetH hSrcDS, GDALDatasetH hDstDS, char **papszOptions, 
>    GDALProgressFunc pfnProgress, void *pProgressData );
>
>Le Sunday 11 April 2010 08:32:51 weixj2003ld, vous avez écrit :
>> I use the following code to read data from a geotiff file and write it into
>> a new one.the bands number is 6; ...
>> GDALDataset *poSrcDS,*poDstDS;//poSrcDs:the source file,poDstDS:the goal
>> source GDALRasterBand *poSrcBand,*poDstBand;//poSrcBand:the source
>> band,poDstBand:the goal band GDALDriver *poDstDriver;
>> double *m_AdGeoTransform=new double[6];
>>
>> ...
>> poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->G
>>etDescrition());
>> poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
>> poSrcDS->GetGeoTransform(m_AdGeoTransform)
>> poDstDS->SetGeoTransform(m_AdGeoTransform);
>> poDstDS->SetProjection(poSrcDS->GetProjectionRef());
>>
>> for(int iBand=0;iBand<6;iBand++)
>> {
>>    poSrcBand=poSrcDS->GetRaserBand(iBand+1);
>>   poDstBand=poDstDS->GetRaserBand(iBand+1);
>>   float *pafScanline;
>>   pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
>>   for(int i=1;i<nY;i++)
>>   {
>>     
>> poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
>> poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);//I
>>f I comment this code,the program will be ok. }
>> }
>> GDALClose((GDALDatasetH)poDstDS);
>>
>> When I run my program,CPU is very alway busy,and the program is
>> blocked,why?
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100412/2ce8fcea/attachment.html
From tilovillwock at gmx.de  Mon Apr 12 07:47:44 2010
From: tilovillwock at gmx.de (Tilo Villwock)
Date: Mon Apr 12 11:14:26 2010
Subject: [gdal-dev] ogr2ogr BeTA2007 grid
Message-ID: <20100412114744.111610@gmx.net>

Hi,

I am trying to reproject some shapefiles from GKPD83 to ETRS89/UTM with ogr2ogr. I am using the nadgrids option to specify the custom transformation grid (BeTA2007.gsd), but for some reason it is being ignored during the process.

Now I know from previous posts on this list that I am supposed to add the +wktext option to workaround the issue of the nadgrids option being dropped during the internal conversion to WKT format. It however doesn't seem to work, as the results are identical with and without the gridfile.

I am working on Windows 2000 and the command I am using looks like this:

ogr2ogr -s_srs "EPSG:3396 +nadgrids=BETA2007.gsb +wktext" t_srs EPSG:25832 target_shapefile.shp source_shapefile.shp

I am executing this from the directory of the grid file and I discovered on various posts that some use the nadgrids-option like this:

+nadgrids=./BETA2007

I think however this a UNIX specific file system convention and shouldn't be an issue in Windows, right?

I am thankful for any suggestions.

Best regards,

Tilo Villwock
-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From discoursemap at live.com  Mon Apr 12 11:46:53 2010
From: discoursemap at live.com (Discourse Maps)
Date: Mon Apr 12 11:46:54 2010
Subject: [gdal-dev] GDAL Python Projection Question
Message-ID: <SNT130-w304B82DA5AC92172412271BC120@phx.gbl>


Hi,

I am attempting to use GDAL with Python to reproject a raster (called 'deforest') from Geographic Coordinate System to NAD83_UTM10N.

Most of the projection tutorials seem to be in C...
Can anyone offer assistance for Python?

 My current code:

     os.chdir(gp.workspace)
     ds = gdal.Open('lulc_samp_cur', GA_ReadOnly)
     if ds is None:
          gp.AddError("Could not open image")
     band = ds.GetRasterBand(1)

    # obtain projection info from current LULC raster 'lulc_samp_cur'
     prj_lcraster = ds.GetProjection()
     ds = None
     
    # Project Raster for image 'defores' to same projection as 'lulc_samp_cur'
     ds = gdal.Open('deforest', GA_ReadOnly)
     ....

     ? 		 	   		  
_________________________________________________________________
Hotmail has tools for the New Busy. Search, chat and e-mail from your inbox.
http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM_HMP:042010_1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100412/d522d080/attachment.html
From ivan at sanchezortega.es  Mon Apr 12 12:03:54 2010
From: ivan at sanchezortega.es (=?iso-8859-1?q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Mon Apr 12 12:04:02 2010
Subject: [gdal-dev] ogr2ogr BeTA2007 grid
In-Reply-To: <20100412114744.111610@gmx.net>
References: <20100412114744.111610@gmx.net>
Message-ID: <201004121803.54615.ivan@sanchezortega.es>

El d?a Monday 12 April 2010 13:47:44, Tilo Villwock dijo:
> ogr2ogr -s_srs "EPSG:3396 +nadgrids=BETA2007.gsb +wktext" t_srs EPSG:25832
> target_shapefile.shp source_shapefile.shp

Hhhhhmmmm.

Try the following: forget about epsg:3396, and instead specify all the 
individual options from epsg:3396. Something like:


ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 +ellps=bessel 
+nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp source.shp

(Please double-check the options from wpsg:3396 - I'm missing several in that 
example)


Cheers,
-- 
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Un ordenador no es una televisi?n ni un microondas: es una herramienta 
compleja.
From ksshannon at gmail.com  Mon Apr 12 12:05:18 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Mon Apr 12 12:05:35 2010
Subject: [gdal-dev] GDAL Python Projection Question
In-Reply-To: <SNT130-w304B82DA5AC92172412271BC120@phx.gbl>
References: <SNT130-w304B82DA5AC92172412271BC120@phx.gbl>
Message-ID: <x2xc28f2e141004120905l22b19190yccbf3b08bb1b2e17@mail.gmail.com>

I use AutoCreateWarpedVRT() to create a virtual dataset, then you
CreateCopy() to write your data using the proper Driver:

vrt_ds = AutoCreateWarpedVRT( ds, ... )
dst_ds = driver.CreateCopy('dst.out', vrt_ds, ...)
dst_ds = None


kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Mon, Apr 12, 2010 at 9:46 AM, Discourse Maps <discoursemap@live.com>wrote:

>  Hi,
>
> I am attempting to use GDAL with Python to reproject a raster (called
> 'deforest') from Geographic Coordinate System to NAD83_UTM10N.
>
> Most of the projection tutorials seem to be in C...
> Can anyone offer assistance for Python?
>
>  My current code:
>
>      os.chdir(gp.workspace)
>      ds = gdal.Open('lulc_samp_cur', GA_ReadOnly)
>      if ds is None:
>           gp.AddError("Could not open image")
>      band = ds.GetRasterBand(1)
>
>     # obtain projection info from current LULC raster 'lulc_samp_cur'
>      prj_lcraster = ds.GetProjection()
>      ds = None
>
>     # Project Raster for image 'defores' to same projection as
> 'lulc_samp_cur'
>      ds = gdal.Open('deforest', GA_ReadOnly)
>      ....
>
>      ?
> ------------------------------
> Hotmail has tools for the New Busy. Search, chat and e-mail from your
> inbox. Learn more.<http://www.windowslive.com/campaign/thenewbusy?ocid=PID28326::T:WLMTAGL:ON:WL:en-US:WM_HMP:042010_1>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100412/5efd0bfc/attachment.html
From ksshannon at gmail.com  Tue Apr 13 13:01:56 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Apr 13 13:02:14 2010
Subject: [gdal-dev] Python Bindings
Message-ID: <t2nc28f2e141004131001w6d8537b7gfafdbba56a713526@mail.gmail.com>

Hello,
My autotest is failing in the trunk on a some tests and I can't seem to
pinpoint the issue.  One of the tests that is failing is tiff_write_80.  I
checked my bindings in idle and I don't have access to band.SetScale() and
band.SetOffset() which is where the test is failing.  Am I doing something
wrong, or were these not exposed in swig for my python version?  I noticed
the buildbot is doing fine, but it uses Python 2.4. Thanks

Python 2.6.4
Ubuntu 9.10
r19397

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100413/d39c29c2/attachment.html
From even.rouault at mines-paris.org  Tue Apr 13 13:26:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 13 13:27:15 2010
Subject: [gdal-dev] Python Bindings
In-Reply-To: <t2nc28f2e141004131001w6d8537b7gfafdbba56a713526@mail.gmail.com>
References: <t2nc28f2e141004131001w6d8537b7gfafdbba56a713526@mail.gmail.com>
Message-ID: <201004131926.59996.even.rouault@mines-paris.org>

Kyle,

It isn't related to your python version. Those methods SetScale() / 
SetOffset() have been added just a few days ago to the SWIG interface .i 
files. But the .cpp files haven't yet been regenerated (we normally do this 
only at release time) to take into account those additions. Provided that you 
have swig installed, it's a matter of cd'ing to swig/python; make generate; 
make install.


Le Tuesday 13 April 2010 19:01:56 Kyle Shannon, vous avez ?crit?:
> Hello,
> My autotest is failing in the trunk on a some tests and I can't seem to
> pinpoint the issue.  One of the tests that is failing is tiff_write_80.  I
> checked my bindings in idle and I don't have access to band.SetScale() and
> band.SetOffset() which is where the test is failing.  Am I doing something
> wrong, or were these not exposed in swig for my python version?  I noticed
> the buildbot is doing fine, but it uses Python 2.4. Thanks
>
> Python 2.6.4
> Ubuntu 9.10
> r19397
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================


From weixj2003ld at 163.com  Wed Apr 14 03:42:20 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Wed Apr 14 03:42:27 2010
Subject: [gdal-dev] write tif error
Message-ID: <6e342e47.1c643.127fb44c3ea.Coremail.weixj2003ld@163.com>

 I use the following code to read data from a geotiff file and do some computing and write it into
 a new one.the bands number is 6; ...
 GDALDataset *poSrcDS,*poDstDS;//poSrcDs:the source file,poDstDS:the goal
 source GDALRasterBand *poSrcBand,*poDstBand;//poSrcBand:the source
 band,poDstBand:the goal band GDALDriver *poDstDriver;
 double *m_AdGeoTransform=new double[6];

 ...
 poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->G
etDescrition());
 poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
 poSrcDS->GetGeoTransform(m_AdGeoTransform)
 poDstDS->SetGeoTransform(m_AdGeoTransform);
 poDstDS->SetProjection(poSrcDS->GetProjectionRef());

 for(int iBand=0;iBand<6;iBand++)
{
    poSrcBand=poSrcDS->GetRaserBand(iBand+1);
   poDstBand=poDstDS->GetRaserBand(iBand+1);
   float *pafScanline;
   pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
   for(int i=0;i<nY;i++)
  {   
poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
 poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);//If I comment this code,the program will be ok. }
 }
GDALClose((GDALDatasetH)poDstDS);

When I run my program,CPU is very alway busy,and the program is
 blocked,why?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100414/fe60bf87/attachment.html
From tilovillwock at gmx.de  Wed Apr 14 04:31:03 2010
From: tilovillwock at gmx.de (Tilo Villwock)
Date: Wed Apr 14 04:31:09 2010
Subject: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <20100413160143.92140E01744@lists.osgeo.org>
References: <20100413160143.92140E01744@lists.osgeo.org>
Message-ID: <20100414083103.301730@gmx.net>

> Try the following: forget about epsg:3396, and instead specify all the 
> individual options from epsg:3396. Something like:
> 
> 
> ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 +ellps=bessel 
> +nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp source.shp

I used the parameters instead, but it didn't work either. In fact, I think it doesn't matter since ogr2ogr looks up the same parameters in its EPSG file and converts the whole string to WKT anyway. So the result should be the same.

Any other thoughts?
-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From ivan at sanchezortega.es  Wed Apr 14 05:06:58 2010
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Wed Apr 14 05:07:04 2010
Subject: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <20100414083103.301730@gmx.net>
References: <20100413160143.92140E01744@lists.osgeo.org>
	<20100414083103.301730@gmx.net>
Message-ID: <4BC585B2.1040306@sanchezortega.es>

El 14/04/2010 10:31, Tilo Villwock escribi?:
>> ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0
>> +ellps=bessel +nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp
>> source.shp
>
> I used the parameters instead, but it didn't work either. In fact, I
> think it doesn't matter since ogr2ogr looks up the same parameters in
> its EPSG file and converts the whole string to WKT anyway.

No  -  the -s_srs option overrides any spatial reference information in 
the original data (be it a .prj file, a worldfile, or embedded in the 
files).


Maybe you can try writing down a couple of coordinates from the 
shapefile, and running cs2cs (entering the coordinates by hand) to see 
if it makes a difference.

Try something like:

cs2cs +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 +ellps=bessel 
+nadgrids=BETA2007.gsb +to +init=epsg:25832

versus

cs2cs +proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 +ellps=bessel +to 
+init=epsg:25832

Again, run it in the same directory as the nadgrid file, and use the 
full epsg:3396 definition.


Hope it helps,
-- 
Iv?n S?nchez Ortega <ivan@sanchezortega.es>
From chaitanya.ch at gmail.com  Wed Apr 14 06:24:40 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 14 06:24:43 2010
Subject: [gdal-dev] write tif error
In-Reply-To: <6e342e47.1c643.127fb44c3ea.Coremail.weixj2003ld@163.com>
References: <6e342e47.1c643.127fb44c3ea.Coremail.weixj2003ld@163.com>
Message-ID: <t2zeb502d881004140324v3d7b9566o851652419a6cd0c3@mail.gmail.com>

weixj2003ld,

Can you provide your code and a link to the sample dataset that shows this
error?

2010/4/14 weixj2003ld <weixj2003ld@163.com>

>  I use the following code to read data from a geotiff file and do some
> computing and write it into
>  a new one.the bands number is 6; ...
>  GDALDataset *poSrcDS,*poDstDS;//poSrcDs:the source file,poDstDS:the goal
>  source GDALRasterBand *poSrcBand,*poDstBand;//poSrcBand:the source
>  band,poDstBand:the goal band GDALDriver *poDstDriver;
>  double *m_AdGeoTransform=new double[6];
>
>  ...
>
>  poDstDriver=GetGDALDriverManager()->GetDriverByName(poSrcDS->GetDriver()->G
> etDescrition());
>  poDstDS=poDstDriver->create(DstFilename,nX,nY,6,GDT_Float32,NULL);
>  poSrcDS->GetGeoTransform(m_AdGeoTransform)
>  poDstDS->SetGeoTransform(m_AdGeoTransform);
>  poDstDS->SetProjection(poSrcDS->GetProjectionRef());*
>  for(int iBand=0;iBand<6;iBand++)
> {
>     poSrcBand=poSrcDS->GetRaserBand(iBand+1);
>    poDstBand=poDstDS->GetRaserBand(iBand+1);
>    float *pafScanline;
>    pafScanline=(float *)CPLMalloc(sizeof(float)*nX;
>    for(int i=0;i<nY;i++)
>   {
> poSrcBand->RasterIO(GF_Read,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);
>
>  poDstBand->RasterIO(GF_Write,0,0,nX,i,pafScanline,nX,1,GDT_Float32,0,0);//If I comment this code,the program will be ok. }
>  }
> GDALClose((GDALDatasetH)poDstDS);
>
> When I run my program,CPU is very alway busy,and the program is
>  blocked,why?
> *
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100414/00d1b2bd/attachment.html
From uwe.schmitz at bezreg-koeln.nrw.de  Wed Apr 14 07:33:58 2010
From: uwe.schmitz at bezreg-koeln.nrw.de (Schmitz, Uwe)
Date: Wed Apr 14 07:36:01 2010
Subject: AW: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <20100414083103.301730@gmx.net>
Message-ID: <240EE7C956B2CB439C613DF6CEC8A32D037BB901@sebulba.bezreg-koeln.nrw.de>

Tilo,

> > 
> > ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 
> +ellps=bessel 
> > +nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp source.shp
> 
> I used the parameters instead, but it didn't work either. In 
> fact, I think it doesn't matter since ogr2ogr looks up the 
> same parameters in its EPSG file and converts the whole 
> string to WKT anyway. So the result should be the same.
> 
> Any other thoughts?

please try to verify that the grid is read. 
Therefore set the environment variable
PROJ_DEBUG before running ogr2org, e.g. (Windows cmd):

set PROJ_DEBUG=1

Then you see if the grid is accessed at all.

FYI, here is my setup for transforming coordinates
with cs2cs from german "Gauss-Krueger stripe 3/DHDN" to 
"UTM Zone 32N/ETRS89"):

cs2cs \
      +proj=tmerc \
      +lat_0=0 \
      +lon_0=9 \
      +k=1.0 \
      +x_0=3500000 \
      +y_0=0 \
      +ellps=bessel \
      +units=m \
      +nadgrids=BETA2007.gsb \
   +to \
      +proj=utm \
      +ellps=GRS80 \
      +towgs84=0,0,0 \
      +zone=32

Hope that helps.
Uwe
From tilovillwock at gmx.de  Wed Apr 14 09:14:16 2010
From: tilovillwock at gmx.de (Tilo Villwock)
Date: Wed Apr 14 09:14:22 2010
Subject: AW: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <240EE7C956B2CB439C613DF6CEC8A32D037BB901@sebulba.bezreg-koeln.nrw.de>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BB901@sebulba.bezreg-koeln.nrw.de>
Message-ID: <20100414131416.246960@gmx.net>

Hey that did the trick. Seems like with EPSG codes the nadgrids parameter is just being dropped without further notice. So it's necessary to use the complete proj parameters for both shape files including the nadgrids and wktext option to get the results right. With PROJ_DEGUB=1 I also noticed that it is indeed necessary to put "./" before the grid file name, as it otherwise looks for it in the working directory of fwtools. Anyways, cs2cs as well as ogr2ogr work now as expected!

Despite that, it seems like the wheregroup.com tutorial (http://wheregroup.com/de/system/files/Transformation_mit_freien_Tools_Praxis.pdf) wasn't right after all and from what I discovered, it makes me wonder whether they tested their results at all or just copied from someone else.

Thanks a lot anyways!

-------- Original-Nachricht --------
> Datum: Wed, 14 Apr 2010 13:33:58 +0200
> Von: "Schmitz, Uwe" <uwe.schmitz@bezreg-koeln.nrw.de>
> An: "Tilo Villwock" <tilovillwock@gmx.de>, gdal-dev@lists.osgeo.org
> Betreff: AW: [gdal-dev] Re: ogr2ogr BeTA2007 grid

> Tilo,
> 
> > > 
> > > ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0 
> > +ellps=bessel 
> > > +nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp source.shp
> > 
> > I used the parameters instead, but it didn't work either. In 
> > fact, I think it doesn't matter since ogr2ogr looks up the 
> > same parameters in its EPSG file and converts the whole 
> > string to WKT anyway. So the result should be the same.
> > 
> > Any other thoughts?
> 
> please try to verify that the grid is read. 
> Therefore set the environment variable
> PROJ_DEBUG before running ogr2org, e.g. (Windows cmd):
> 
> set PROJ_DEBUG=1
> 
> Then you see if the grid is accessed at all.
> 
> FYI, here is my setup for transforming coordinates
> with cs2cs from german "Gauss-Krueger stripe 3/DHDN" to 
> "UTM Zone 32N/ETRS89"):
> 
> cs2cs \
>       +proj=tmerc \
>       +lat_0=0 \
>       +lon_0=9 \
>       +k=1.0 \
>       +x_0=3500000 \
>       +y_0=0 \
>       +ellps=bessel \
>       +units=m \
>       +nadgrids=BETA2007.gsb \
>    +to \
>       +proj=utm \
>       +ellps=GRS80 \
>       +towgs84=0,0,0 \
>       +zone=32
> 
> Hope that helps.
> Uwe

-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From odonnems at yahoo.com  Wed Apr 14 13:35:47 2010
From: odonnems at yahoo.com (Michael ODonnell)
Date: Wed Apr 14 13:42:28 2010
Subject: [gdal-dev] Compute statistis and ignoring nodata value
Message-ID: <282151.76812.qm@web58007.mail.re3.yahoo.com>

I am trying to compute and set the statistics for a data set that I have created using GDAL, but the no data values are being included. Is there a way to ignore the no data value when computing the statistics. The documentation does not say anything about this, to the best of my knowledge, and it appears to be included in my results. Everything is working except that no data is included during the use of ComputeStatistics.

Here are the steps I am using:

g_MBand->SetNoDataValue(g_nulldata2);
g_MBand->ComputeStatistics(FALSE, &pdfMin2, &pdfMax2, &pdfMean2, &pdfStdDev2, NULL, NULL);
g_InBand->SetStatistics(pdfMin2, pdfMax2, pdfMean2, pdfStdDev2);

Thank your for your help!
Mike


      
From even.rouault at mines-paris.org  Wed Apr 14 16:00:07 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 14 16:00:19 2010
Subject: AW: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <20100414131416.246960@gmx.net>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BB901@sebulba.bezreg-koeln.nrw.de>
	<20100414131416.246960@gmx.net>
Message-ID: <201004142200.08610.even.rouault@mines-paris.org>

Tilo,

The EPSG database, at least as transformed in GDAL .CSV files (I can't say for 
the original one) never includes grid, so if you want one grid to be used, 
you can't simply specify EPSG:XXXX but you have to use the full expanded 
proj.4 string with +nadgrids=   +wktext

As you noted, it is essential to add the +wktext parameter. Quoting 
http://www.gdal.org/ogr/classOGRSpatialReference.html#f1a29550373c2c14bd11514641e58e7c :

"Some parameters, such as grids, recognised by PROJ.4 may not be well 
understood and translated into the OGRSpatialReference  model. It is possible 
to add the +wktext parameter which is a special keyword that OGR recognises 
as meaning "embed the entire PROJ.4 string in the WKT and use it literally 
when converting back to PROJ.4 format"."

As you, I'm also skeptical about the suggestion of the wheregroup.com PDF. As 
far as I know and could test, "EPSG:31466 
+nadgrids=/Daten/etrs89/./BETA2007.gsb" is just interpreted as plain 
EPSG:31466 by GDAL/OGR.

Best regards,

Even

Le Wednesday 14 April 2010 15:14:16 Tilo Villwock, vous avez ?crit?:
> Hey that did the trick. Seems like with EPSG codes the nadgrids parameter
> is just being dropped without further notice. So it's necessary to use the
> complete proj parameters for both shape files including the nadgrids and
> wktext option to get the results right. With PROJ_DEGUB=1 I also noticed
> that it is indeed necessary to put "./" before the grid file name, as it
> otherwise looks for it in the working directory of fwtools. Anyways, cs2cs
> as well as ogr2ogr work now as expected!
>
> Despite that, it seems like the wheregroup.com tutorial
> (http://wheregroup.com/de/system/files/Transformation_mit_freien_Tools_Prax
>is.pdf) wasn't right after all and from what I discovered, it makes me
> wonder whether they tested their results at all or just copied from someone
> else.
>
> Thanks a lot anyways!
>
> -------- Original-Nachricht --------
>
> > Datum: Wed, 14 Apr 2010 13:33:58 +0200
> > Von: "Schmitz, Uwe" <uwe.schmitz@bezreg-koeln.nrw.de>
> > An: "Tilo Villwock" <tilovillwock@gmx.de>, gdal-dev@lists.osgeo.org
> > Betreff: AW: [gdal-dev] Re: ogr2ogr BeTA2007 grid
> >
> > Tilo,
> >
> > > > ogr2ogr -s_srs "+proj=tmerc +lat_0=0 +lon_0=9 +k=1 +y_0=0
> > >
> > > +ellps=bessel
> > >
> > > > +nadgrids=BETA2007.gsb" -t_srs EPSG:25832 target.shp source.shp
> > >
> > > I used the parameters instead, but it didn't work either. In
> > > fact, I think it doesn't matter since ogr2ogr looks up the
> > > same parameters in its EPSG file and converts the whole
> > > string to WKT anyway. So the result should be the same.
> > >
> > > Any other thoughts?
> >
> > please try to verify that the grid is read.
> > Therefore set the environment variable
> > PROJ_DEBUG before running ogr2org, e.g. (Windows cmd):
> >
> > set PROJ_DEBUG=1
> >
> > Then you see if the grid is accessed at all.
> >
> > FYI, here is my setup for transforming coordinates
> > with cs2cs from german "Gauss-Krueger stripe 3/DHDN" to
> > "UTM Zone 32N/ETRS89"):
> >
> > cs2cs \
> >       +proj=tmerc \
> >       +lat_0=0 \
> >       +lon_0=9 \
> >       +k=1.0 \
> >       +x_0=3500000 \
> >       +y_0=0 \
> >       +ellps=bessel \
> >       +units=m \
> >       +nadgrids=BETA2007.gsb \
> >    +to \
> >       +proj=utm \
> >       +ellps=GRS80 \
> >       +towgs84=0,0,0 \
> >       +zone=32
> >
> > Hope that helps.
> > Uwe


From even.rouault at mines-paris.org  Wed Apr 14 16:31:01 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 14 16:31:12 2010
Subject: [gdal-dev] Compute statistis and ignoring nodata value
In-Reply-To: <282151.76812.qm@web58007.mail.re3.yahoo.com>
References: <282151.76812.qm@web58007.mail.re3.yahoo.com>
Message-ID: <201004142231.02460.even.rouault@mines-paris.org>

Michael,

ComputeStatistics() is supposed to ignore pixels whose value is the nodata 
value. I've tried the following test code to try to reproduce your issue :

#include <gdal.h>

int main(int argc, char* argv[])
{
    GDALAllRegister();
    GDALDatasetH hDS = GDALCreate(GDALGetDriverByName("GTiff"), "test.tif", 3, 
1, 1, GDT_Byte, NULL);
    GDALRasterBandH hBand = GDALGetRasterBand(hDS, 1);
    char chVal;
    chVal = 0;
    GDALRasterIO(hBand, GF_Write, 0, 0, 1, 1, &chVal, 1, 1, GDT_Byte, 0, 0);
    chVal = 100;
    GDALRasterIO(hBand, GF_Write, 1, 0, 1, 1, &chVal, 1, 1, GDT_Byte, 0, 0);
    chVal = 2;
    GDALRasterIO(hBand, GF_Write, 2, 0, 1, 1, &chVal, 1, 1, GDT_Byte, 0, 0);
    GDALSetRasterNoDataValue(hBand, 100.0);
    double min, max, mean, stddev;
    GDALComputeRasterStatistics(hBand, FALSE, &min, &max, &mean, &stddev, 
NULL, NULL);
    printf("min=%f max=%f mean=%f stddev=%f\n", min, max, mean, stddev);
    return 0;
}

(a 3x1 dataset with pixels values being 0, 100 and 2 and 100 set as the nodata 
value)

The results I get are : min=0.000000 max=2.000000 mean=1.000000 
stddev=1.000000. Which is the expected values.

I'd advise you to check that the nodata value that you set at the band level 
matches exactly the value used by the nodata pixels in the imagery. 
ComputeStatistics() uses strict equality comparison, so even a very slight 
difference might result in not recognizing the pixels as being nodata. 

Best regards,

Even

Le Wednesday 14 April 2010 19:35:47 Michael ODonnell, vous avez ?crit?:
> I am trying to compute and set the statistics for a data set that I have
> created using GDAL, but the no data values are being included. Is there a
> way to ignore the no data value when computing the statistics. The
> documentation does not say anything about this, to the best of my
> knowledge, and it appears to be included in my results. Everything is
> working except that no data is included during the use of
> ComputeStatistics.
>
> Here are the steps I am using:
>
> g_MBand->SetNoDataValue(g_nulldata2);
> g_MBand->ComputeStatistics(FALSE, &pdfMin2, &pdfMax2, &pdfMean2,
> &pdfStdDev2, NULL, NULL); g_InBand->SetStatistics(pdfMin2, pdfMax2,
> pdfMean2, pdfStdDev2);
>
> Thank your for your help!
> Mike
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From odonnems at yahoo.com  Wed Apr 14 22:39:52 2010
From: odonnems at yahoo.com (Michael ODonnell)
Date: Wed Apr 14 22:39:55 2010
Subject: [gdal-dev] Compute statistis and ignoring nodata value
In-Reply-To: <201004142231.02460.even.rouault@mines-paris.org>
Message-ID: <645242.42906.qm@web58001.mail.re3.yahoo.com>

Even,

Thank you for your help. It took me a few attempts but you were correct. I was trying to use the minimum value for a 32bit floating data set as my null data value and my number was not exact--as you suggested.

I was using: -3.4028235e+038
And needed to use: -3.4028234663852886e+038

Once I made this correction, everything worked as expected.

Thanks again for your assistance,
Mike

--- On Wed, 4/14/10, Even Rouault <even.rouault@mines-paris.org> wrote:

> From: Even Rouault <even.rouault@mines-paris.org>
> Subject: Re: [gdal-dev] Compute statistis and ignoring nodata value
> To: gdal-dev@lists.osgeo.org
> Cc: "Michael ODonnell" <odonnems@yahoo.com>
> Date: Wednesday, April 14, 2010, 2:31 PM
> Michael,
> 
> ComputeStatistics() is supposed to ignore pixels whose
> value is the nodata 
> value. I've tried the following test code to try to
> reproduce your issue :
> 
> #include <gdal.h>
> 
> int main(int argc, char* argv[])
> {
> ? ? GDALAllRegister();
> ? ? GDALDatasetH hDS =
> GDALCreate(GDALGetDriverByName("GTiff"), "test.tif", 3, 
> 1, 1, GDT_Byte, NULL);
> ? ? GDALRasterBandH hBand =
> GDALGetRasterBand(hDS, 1);
> ? ? char chVal;
> ? ? chVal = 0;
> ? ? GDALRasterIO(hBand, GF_Write, 0, 0, 1, 1,
> &chVal, 1, 1, GDT_Byte, 0, 0);
> ? ? chVal = 100;
> ? ? GDALRasterIO(hBand, GF_Write, 1, 0, 1, 1,
> &chVal, 1, 1, GDT_Byte, 0, 0);
> ? ? chVal = 2;
> ? ? GDALRasterIO(hBand, GF_Write, 2, 0, 1, 1,
> &chVal, 1, 1, GDT_Byte, 0, 0);
> ? ? GDALSetRasterNoDataValue(hBand, 100.0);
> ? ? double min, max, mean, stddev;
> ? ? GDALComputeRasterStatistics(hBand, FALSE,
> &min, &max, &mean, &stddev, 
> NULL, NULL);
> ? ? printf("min=%f max=%f mean=%f stddev=%f\n",
> min, max, mean, stddev);
> ? ? return 0;
> }
> 
> (a 3x1 dataset with pixels values being 0, 100 and 2 and
> 100 set as the nodata 
> value)
> 
> The results I get are : min=0.000000 max=2.000000
> mean=1.000000 
> stddev=1.000000. Which is the expected values.
> 
> I'd advise you to check that the nodata value that you set
> at the band level 
> matches exactly the value used by the nodata pixels in the
> imagery. 
> ComputeStatistics() uses strict equality comparison, so
> even a very slight 
> difference might result in not recognizing the pixels as
> being nodata. 
> 
> Best regards,
> 
> Even
> 
> Le Wednesday 14 April 2010 19:35:47 Michael ODonnell, vous
> avez ?crit?:
> > I am trying to compute and set the statistics for a
> data set that I have
> > created using GDAL, but the no data values are being
> included. Is there a
> > way to ignore the no data value when computing the
> statistics. The
> > documentation does not say anything about this, to the
> best of my
> > knowledge, and it appears to be included in my
> results. Everything is
> > working except that no data is included during the use
> of
> > ComputeStatistics.
> >
> > Here are the steps I am using:
> >
> > g_MBand->SetNoDataValue(g_nulldata2);
> > g_MBand->ComputeStatistics(FALSE, &pdfMin2,
> &pdfMax2, &pdfMean2,
> > &pdfStdDev2, NULL, NULL);
> g_InBand->SetStatistics(pdfMin2, pdfMax2,
> > pdfMean2, pdfStdDev2);
> >
> > Thank your for your help!
> > Mike
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 


      
From tilovillwock at gmx.de  Thu Apr 15 02:09:00 2010
From: tilovillwock at gmx.de (Tilo Villwock)
Date: Thu Apr 15 02:09:06 2010
Subject: [gdal-dev] Re: ogr2ogr BeTA2007 grid
In-Reply-To: <201004142200.08610.even.rouault@mines-paris.org>
References: <240EE7C956B2CB439C613DF6CEC8A32D037BB901@sebulba.bezreg-koeln.nrw.de>
	<20100414131416.246960@gmx.net>
	<201004142200.08610.even.rouault@mines-paris.org>
Message-ID: <20100415060900.299080@gmx.net>

Yeah thanks again for all the great hints, I really appreciate it. I should have posted earlier here as it would have saved me a lot of time trying ;)

Cheers,

Tilo
-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From Alexander.Plum at cae.de  Thu Apr 15 08:59:00 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Thu Apr 15 08:58:34 2010
Subject: [gdal-dev] Question how to use GDALDatasetH
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E0908440FB191@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090841E94922@sdestex2>,
	<74C7EC991D7DFB41A525D22BFD4E0908440FB191@sdestex2>
Message-ID: <74C7EC991D7DFB41A525D22BFD4E0908440FB193@sdestex2>

Dear ladies and gentlemen,

I want to load a two dimensional array with  elevation values into a GDALDatasetH. But I do not know how to do so.
I would be grateful for any help.

Later on it is my destination using  the GDALContour function to construct highlines based on my elevation values.

With kind regards,
Alexander Plum
From weixj2003ld at 163.com  Thu Apr 15 09:02:56 2010
From: weixj2003ld at 163.com (weixj2003ld)
Date: Thu Apr 15 09:02:59 2010
Subject: [gdal-dev] Hi,how to translate many files to a file
Message-ID: <15f7136.7f9c.1280190a6eb.Coremail.weixj2003ld@163.com>

Hi,
I have 6 .tif files,and want to get a JPEG file or a tif file.
How to realize it with command gdal_translate?
Thk u in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/5b3cda2f/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 15 09:25:34 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 15 09:27:00 2010
Subject: [gdal-dev] Question how to use GDALDatasetH
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E0908440FB193@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090841E94922@sdestex2>
	<74C7EC991D7DFB41A525D22BFD4E0908440FB191@sdestex2>
	<74C7EC991D7DFB41A525D22BFD4E0908440FB193@sdestex2>
Message-ID: <r2qeb502d881004150625qb1c39af7mdec730060a533962@mail.gmail.com>

Alexander,

You can use the GDALRasterIO() function to write an array's value to a
dataset. Since it doesn't support multi-dimensional buffers, you have to use
this function for every array in the two-dimensional array.
Refer to http://www.gdal.org/gdal_tutorial.html for some examples.

On Thu, Apr 15, 2010 at 6:29 PM, Alexander Plum <Alexander.Plum@cae.de>wrote:

> Dear ladies and gentlemen,
>
> I want to load a two dimensional array with  elevation values into a
> GDALDatasetH. But I do not know how to do so.
> I would be grateful for any help.
>
> Later on it is my destination using  the GDALContour function to construct
> highlines based on my elevation values.
>
> With kind regards,
> Alexander Plum
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/5b14d99a/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Apr 15 09:36:25 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 15 09:36:31 2010
Subject: [gdal-dev] Hi,how to translate many files to a file
In-Reply-To: <15f7136.7f9c.1280190a6eb.Coremail.weixj2003ld@163.com>
References: <15f7136.7f9c.1280190a6eb.Coremail.weixj2003ld@163.com>
Message-ID: <n2leb502d881004150636i97c5df95nd82a35d4a6664580@mail.gmail.com>

weixj2003ld,

There are two ways. One is to use gdal_merge.py script. Other is to use
gdalbuildvrt to build a VRT and use gdal_translate to convert the VRT to
your desired format. Refer to http://www.gdal.org/gdal_utilities.html for
help.

2010/4/15 weixj2003ld <weixj2003ld@163.com>

> Hi,
> I have 6 .tif files,and want to get a JPEG file or a tif file.
> How to realize it with command gdal_translate?
> Thk u in advance.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/71552895/attachment.html
From jgomezdans at gmail.com  Thu Apr 15 11:50:11 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Apr 15 11:50:14 2010
Subject: [gdal-dev] FillNodata and source NoDatas
Message-ID: <g2i91d218431004150850oe3186203x19b7f91b471b8013@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: rasterfill_mask.patch
Type: text/x-diff
Size: 2794 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/0cff8343/rasterfill_mask.bin
From zoltans at geograph.co.za  Fri Apr  9 08:33:16 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu Apr 15 11:58:43 2010
Subject: [gdal-dev] Deskewing geo-referenced scanned prints
Message-ID: <4BBF1E8C.6050302@geograph.co.za>

Hi,
I'm using viewing software that cannot rotate images on the fly (see 
non-zero rotation parameters in TFW below.)

I have almost 2000 scans in GeoTIFF that I hence need to deskew and also 
want to crop.
I've been looking at gdalwarp, but can't see an obvious way to 
bash-script deskewing, so please can someone give me a pointer where to 
start/research.

Thanks in advance,
Zoltan

Each image represents a quarter degree square and I can use the image 
name to calculate the Lat Long values of the 4 corners.
3424bb is:
TL:  34.00S 24.75E
TR:  34.00S 25.00E
BR:  34.25S 25.00E
BL:  34.25S 24.75E
I want to crop the image on these quarter degree boundaries, and deskew it.
The attached jpeg is a much-reduced sample, so you can get the idea of 
what they look like.

I have the following information at hand:


#################################################################################
ls -la:
  geograph geograph  5231378 2006-09-13 17:28 3424BB_1999_ED3_GEO.TIF

#################################################################################
Pixel positions of the 4 quarter degree square corners are at:
TL 1090.489746 1226.423828
TR 6546.639160 1220.069458
BR 6546.430176 7770.449219
BL 1106.605347 7776.899902

#################################################################################
cat 3424BB_1999_ED3_GEO.tfw
            0.0000459558
           -0.0000000502
           -0.0000000963
           -0.0000381753
           24.6998662805
          -33.9529134036

#################################################################################
gdalinfo 3424BB_1999_ED3_GEO.TIF
Driver: GTiff/GeoTIFF
Files: 3424BB_1999_ED3_GEO.TIF
Size is 7796, 10629
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  24.6998433507502, 4.595577857784442e-05, -9.634765806162092e-08
  -33.95289429083027, -5.021067810400542e-08, -3.817529052330018e-05
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=300
  TIFFTAG_YRESOLUTION=300
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  24.6998434, -33.9528943) ( 24d41'59.44"E, 33d57'10.42"S)
Lower Left  (  24.6988193, -34.3586595) ( 24d41'55.75"E, 34d21'31.17"S)
Upper Right (  25.0581146, -33.9532857) ( 25d 3'29.21"E, 33d57'11.83"S)
Lower Right (  25.0570905, -34.3590509) ( 25d 3'25.53"E, 34d21'32.58"S)
Center      (  24.8784669, -34.1559726) ( 24d52'42.48"E, 34d 9'21.50"S)
Band 1 Block=7796x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 106,180,131,255
etc etc











-- 

===========================================
Zoltan Szecsei
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 3424bb.jpg
Type: image/jpeg
Size: 55635 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100409/7df6a6a4/3424bb-0001.jpg
From arb at sat.dundee.ac.uk  Thu Apr 15 12:04:20 2010
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu Apr 15 12:08:11 2010
Subject: [gdal-dev] ColorInterp, Scale, Offset etc VRT to TIFF
Message-ID: <op.va7n9ioiqw3wu1@titan>

Hello

My first problem is that when I set ColorInterp in a VRT file it works
(gdal_info reports the colour interpretation for each band) but when I
convert to GeoTIFF the information is lost (gdal_info shows Undefined
for all but the first band).  Is that a bug or is tiff not capable of
representing it?

Also I can't set ColorInterp (or Scale, Offset, NoDataValue) in a VRT
programmatically using the code as shown in the tutorial:

  papszOptions = CSLAddNameValue(papszOptions, "subclass", "VRTRawRasterBand");
  papszOptions = CSLAddNameValue(papszOptions, "SourceFilename", "x.dat");
  papszOptions = CSLAddNameValue(papszOptions, "ByteOrder", "LSB");        // this WORKS
  papszOptions = CSLAddNameValue(papszOptions, "ColorInterp", "Red");      // this is IGNORED

Andrew
From warmerdam at pobox.com  Thu Apr 15 12:24:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 15 12:25:48 2010
Subject: [gdal-dev] FillNodata and source NoDatas
In-Reply-To: <g2i91d218431004150850oe3186203x19b7f91b471b8013@mail.gmail.com>
References: <g2i91d218431004150850oe3186203x19b7f91b471b8013@mail.gmail.com>
Message-ID: <4BC73DD9.70609@pobox.com>

Jose Gomez-Dans wrote:
> Hi,
> I want to use FillNodata to fill some missing data in a raster file 
> (obviously!). However, in my source data file some of the NoData mean 
> just "NoData", and I want the algorithm to ignore those values. Does 
> this method ignore the missing values when it bags the values to 
> interpolate the output?
> 
> Basically, my raster looks like a black square with some "island blobs" 
> where I have data. Some pixels in those blobs are flagged as unsuitable 
> (using a mask band), and I would like to interpolate these unsuitable 
> values. However, I want to make sure that the background NoData pixels 
> in my original raster will be ignored.
> 
> Looking at the code in rasterfill.cpp I don't think this isn't the case: 
> the mask band is the optional mask band , or the target's internal mask 
> band.
> 
> I've put together what I think is a patch to solve this, but I can't 
> quite test it yet (I still need to get my data into shape!). Am I 
> totally barking at the wrong tree? I'll file a report if this is not 
> just my misunderstanding.

Jose,

Normally the raster fill algorithm uses the mask to identify pixels to
be replaced, and it ignores the values of the pixels to be replaced.  Often
the pixels to replaced are all nodata and everything else is valid.

As I understand, the region you want to replace is a subset of all the
nodata pixels, but you still want to ensure that nodata pixels which
are not being replaced are not included in the interpolation.  Is that
correct?

I can't entirely follow how the patch will work but it seems to be
doing essentially a reasonable thing.   I am unfortunately hesitant to
alter the GDALFillNodata() API at this point so I'm not sure your patch will
make it back into the core. But once you have used it, I'd appreciate your
submitting it as a ticket in case others need it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From achrysochoou at hotmail.com  Thu Apr 15 12:38:00 2010
From: achrysochoou at hotmail.com (achrysochoou)
Date: Thu Apr 15 12:38:07 2010
Subject: [gdal-dev] get corner coordinates from gdalopen()
Message-ID: <1271349480268-4908657.post@n2.nabble.com>


Hi,
 
I have a geotiff and i am using python to read it. I am trying to extract
the corner coordinates and store them in different variables. This is what i
have done so far,
 
dataset = gdal.Open(tif_path)
print 'zone and Hemisphere are:',
dataset.GetProjection()[26]+dataset.GetProjection()[27]+dataset.GetProjection()[28]
geotransform = dataset.GetGeoTransform()
print 'Origin = (',geotransform[0], ',',geotransform[3],')'
 
i have tried more methods with no luck (or perhaps i simply do not get
it...) such as,
print 'GetProjectionRef is: ',dataset.GetProjectionRef()
print 'GetGCPProjection is: ',dataset.GetGCPProjection()
print 'GetGCPs() is: ',dataset.GetGCPs()
 
I tried shell commands such as 'gdalinfo' which gives information about the
geotiff but i can't access the corner coordinates from the shell (or i don't
know how...). I am currently thinking of counting the pixels and calculating
the coordinates like that but it seems i should ask first before doing sth
like that...
I would like to save the corner coordinates like this,
lower_right = ..., lower_left = ..., upper_right = ..., etc
 
Any suggestions? 
Thanks in advance!
Antony
-- 
View this message in context: http://n2.nabble.com/get-corner-coordinates-from-gdalopen-tp4908657p4908657.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From achrysochoou at hotmail.com  Thu Apr 15 12:37:11 2010
From: achrysochoou at hotmail.com (Antony Chrysochoou)
Date: Thu Apr 15 12:39:40 2010
Subject: [gdal-dev] RE: Welcome to the "gdal-dev" mailing list (Digest mode)
In-Reply-To: <mailman.0.1271349269.10468.gdal-dev@lists.osgeo.org>
References: <mailman.0.1271349269.10468.gdal-dev@lists.osgeo.org>
Message-ID: <BLU123-W1821CCCC0D0A9C8B1A2E47CC0F0@phx.gbl>



 		 	   		  
_________________________________________________________________
Hotmail: Trusted email with Microsoft?s powerful SPAM protection.
https://signup.live.com/signup.aspx?id=60969
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/e18632a7/attachment.html
From warmerdam at pobox.com  Thu Apr 15 12:47:11 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 15 12:49:22 2010
Subject: [gdal-dev] ColorInterp, Scale, Offset etc VRT to TIFF
In-Reply-To: <op.va7n9ioiqw3wu1@titan>
References: <op.va7n9ioiqw3wu1@titan>
Message-ID: <4BC7430F.6050804@pobox.com>

Andrew Brooks wrote:
> Hello
> 
> My first problem is that when I set ColorInterp in a VRT file it works
> (gdal_info reports the colour interpretation for each band) but when I
> convert to GeoTIFF the information is lost (gdal_info shows Undefined
> for all but the first band).  Is that a bug or is tiff not capable of
> representing it?

Andrew,

The TIFF format has a very limited set of photometric interpretation
configurations it supports.  Basically it can be:

   <Option name="PHOTOMETRIC" type="string-select">
     <Value>MINISBLACK</Value>
     <Value>MINISWHITE</Value>
     <Value>PALETTE</Value>
     <Value>RGB</Value>
     <Value>CMYK</Value>
     <Value>YCBCR</Value>
     <Value>CIELAB</Value>
     <Value>ICCLAB</Value>
     <Value>ITULAB</Value>
   </Option>

This means you cannot establish band arrangements other than 1,2,3
to be red, green and blue.   Sorry.

> Also I can't set ColorInterp (or Scale, Offset, NoDataValue) in a VRT
> programmatically using the code as shown in the tutorial:
> 
>  papszOptions = CSLAddNameValue(papszOptions, "subclass", 
> "VRTRawRasterBand");
>  papszOptions = CSLAddNameValue(papszOptions, "SourceFilename", "x.dat");
>  papszOptions = CSLAddNameValue(papszOptions, "ByteOrder", 
> "LSB");        // this WORKS
>  papszOptions = CSLAddNameValue(papszOptions, "ColorInterp", 
> "Red");      // this is IGNORED

You are correct that many items cannot be set as part of the Create()
or CreateCopy() process on the VRT driver from creation options.  But in
most cases you should be able to set these after the fact using the
appropriate methods on the dataset or band.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jgomezdans at gmail.com  Thu Apr 15 12:49:09 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Apr 15 12:49:27 2010
Subject: [gdal-dev] FillNodata and source NoDatas
In-Reply-To: <4BC73DD9.70609@pobox.com>
References: <g2i91d218431004150850oe3186203x19b7f91b471b8013@mail.gmail.com>
	<4BC73DD9.70609@pobox.com>
Message-ID: <i2g91d218431004150949z2a0bfef8lb98328b43bfa899b@mail.gmail.com>

Frank,

On 15 April 2010 17:24, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Jose Gomez-Dans wrote:
>
>> Basically, my raster looks like a black square with some "island blobs"
>> where I have data. Some pixels in those blobs are flagged as unsuitable
>> (using a mask band), and I would like to interpolate these unsuitable
>> values. However, I want to make sure that the background NoData pixels in my
>> original raster will be ignored.
>>
>> Normally the raster fill algorithm uses the mask to identify pixels to
> be replaced, and it ignores the values of the pixels to be replaced.  Often
> the pixels to replaced are all nodata and everything else is valid.
>
> As I understand, the region you want to replace is a subset of all the
> nodata pixels, but you still want to ensure that nodata pixels which
> are not being replaced are not included in the interpolation.  Is that
> correct?
>

What you say is mostly correct. A simpler way to explain it (I ought to have
thought of that before!)  is that if you use a external mask dataset, the
raster fill algorithm should still honour ignoring the nodata values in the
original dataset, as these data are meaningless.

I can't entirely follow how the patch will work but it seems to be
> doing essentially a reasonable thing.   I am unfortunately hesitant to
> alter the GDALFillNodata() API at this point so I'm not sure your patch
> will
> make it back into the core. But once you have used it, I'd appreciate your
> submitting it as a ticket in case others need it.
>

I'll try it and see how it goes. Thanks for your help!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100415/27a7b810/attachment.html
From Tom.Kralidis at ec.gc.ca  Thu Apr 15 13:06:29 2010
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Thu Apr 15 13:06:37 2010
Subject: [gdal-dev] get corner coordinates from gdalopen()
In-Reply-To: <1271349480268-4908657.post@n2.nabble.com>
References: <1271349480268-4908657.post@n2.nabble.com>
Message-ID: <DB58B7551932BF47AE1BF406D287C444010452DD@OntExch3.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of achrysochoou
> Sent: Thursday, 15 April 2010 12:38
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] get corner coordinates from gdalopen()
> 
> 
> Hi,
>  
> I have a geotiff and i am using python to read it. I am 
> trying to extract the corner coordinates and store them in 
> different variables. This is what i have done so far,
>  
> dataset = gdal.Open(tif_path)
> print 'zone and Hemisphere are:',
> dataset.GetProjection()[26]+dataset.GetProjection()[27]+datase
> t.GetProjection()[28]
> geotransform = dataset.GetGeoTransform() print 'Origin = 
> (',geotransform[0], ',',geotransform[3],')'
>  
> i have tried more methods with no luck (or perhaps i simply do not get
> it...) such as,
> print 'GetProjectionRef is: ',dataset.GetProjectionRef() 
> print 'GetGCPProjection is: ',dataset.GetGCPProjection() 
> print 'GetGCPs() is: ',dataset.GetGCPs()
>  
> I tried shell commands such as 'gdalinfo' which gives 
> information about the geotiff but i can't access the corner 
> coordinates from the shell (or i don't know how...). I am 
> currently thinking of counting the pixels and calculating the 
> coordinates like that but it seems i should ask first before 
> doing sth like that...
> I would like to save the corner coordinates like this, 
> lower_right = ..., lower_left = ..., upper_right = ..., etc
>  

For the corner coordinates, GDAL's python bindings do not have a
GetExtent() type function like OGR does.  So you have to calculate this
manually.  Here's an example:

ds = gdal.Open('path/to/file')

width = ds.RasterXSize
height = ds.RasterYSize

gt = ds.GetGeoTransform()
minx = gt[0]
miny = gt[3] + width*gt[4] + height*gt[5]  # from
http://gdal.org/gdal_datamodel.html
maxx = gt[0] + width*gt[1] + height*gt[2]  # from
http://gdal.org/gdal_datamodel.html
maxy = gt[3]

Hope this helps.

..Tom

From gurpreetsingh.2005 at gmail.com  Fri Apr 16 09:31:31 2010
From: gurpreetsingh.2005 at gmail.com (Gurpreet singh)
Date: Fri Apr 16 09:31:57 2010
Subject: [gdal-dev] using JNI with gdal.dlls
Message-ID: <y2sf471ae971004160631i49d5fe69ubedf48dc6199636c@mail.gmail.com>

HI I am new to gdal could you please let me know about using gdal.dlls with
java native interface.

regards
gurpreet
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100416/be91bf32/attachment-0001.html
From achrysochoou at hotmail.com  Fri Apr 16 05:04:46 2010
From: achrysochoou at hotmail.com (achrysochoou)
Date: Fri Apr 16 09:59:23 2010
Subject: [gdal-dev] RE: get corner coordinates from gdalopen()
In-Reply-To: <DB58B7551932BF47AE1BF406D287C444010452DD@OntExch3.ontario.int.ec.gc.ca>
References: <1271349480268-4908657.post@n2.nabble.com>
	<DB58B7551932BF47AE1BF406D287C444010452DD@OntExch3.ontario.int.ec.gc.ca>
Message-ID: <1271408686959-4911981.post@n2.nabble.com>


Surely this is very helpful!
Thanks a bunch Tom!
Cheers!
-- 
View this message in context: http://n2.nabble.com/get-corner-coordinates-from-gdalopen-tp4908657p4911981.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From achrysochoou at hotmail.com  Fri Apr 16 06:41:46 2010
From: achrysochoou at hotmail.com (achrysochoou)
Date: Fri Apr 16 10:04:04 2010
Subject: [gdal-dev] gdal_translate png from geotiff resolution problem
Message-ID: <1271414506781-4912293.post@n2.nabble.com>


Hi, 

I used this command "gdal_translate -of PNG test.tif test.png" and i got a
300KB PNG from a 650KB (just the image file) GEOTIFF. 
I was wondering if there is a method to extract the image from the geotiff
or not lose data in the conversion process?

Thanks in advance!
-- 
View this message in context: http://n2.nabble.com/gdal-translate-png-from-geotiff-resolution-problem-tp4912293p4912293.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From henrypatton at gmail.com  Fri Apr 16 10:18:30 2010
From: henrypatton at gmail.com (hjp85)
Date: Fri Apr 16 10:18:33 2010
Subject: [gdal-dev] -scale command
Message-ID: <1271427510889-4913331.post@n2.nabble.com>


Hi,

I have numerous velocity raster images from an ice sheet model that I would
like to scale so that each raster has has a maximum value of 1000 and
minimum value of 0. At the moment they all have different max values
depending on what the fastest velocity of the ice sheet is at that moment in
time.

What i'm not sure on is how to construct the command. The example given is;
-scale [src_min src_max [dst_min dst_max]]

but how do you get the input range to be automatically computed (i.e.
src_min and src_max), so that i don't have to look up each one in turn?

-scale 0 1000 doesn't work for me...

regards,
Henry
-- 
View this message in context: http://n2.nabble.com/scale-command-tp4913331p4913331.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Apr 16 10:19:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 16 10:19:18 2010
Subject: [gdal-dev] gdal_translate png from geotiff resolution problem
In-Reply-To: <1271414506781-4912293.post@n2.nabble.com>
References: <1271414506781-4912293.post@n2.nabble.com>
Message-ID: <4BC871E1.4000802@pobox.com>

achrysochoou wrote:
> Hi, 
> 
> I used this command "gdal_translate -of PNG test.tif test.png" and i got a
> 300KB PNG from a 650KB (just the image file) GEOTIFF. 
> I was wondering if there is a method to extract the image from the geotiff
> or not lose data in the conversion process?

Achrysochoou,

The PNG format is compressed so you likely have not lost any image quality
in the translation process.  PNG does not inherently include coordinate system
or georeferencing though so you may well have lost this or other metadata.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Apr 16 10:29:47 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 16 10:29:53 2010
Subject: [gdal-dev] -scale command
In-Reply-To: <1271427510889-4913331.post@n2.nabble.com>
References: <1271427510889-4913331.post@n2.nabble.com>
Message-ID: <4BC8745B.9040806@pobox.com>

hjp85 wrote:
> Hi,
> 
> I have numerous velocity raster images from an ice sheet model that I would
> like to scale so that each raster has has a maximum value of 1000 and
> minimum value of 0. At the moment they all have different max values
> depending on what the fastest velocity of the ice sheet is at that moment in
> time.
> 
> What i'm not sure on is how to construct the command. The example given is;
> -scale [src_min src_max [dst_min dst_max]]
> 
> but how do you get the input range to be automatically computed (i.e.
> src_min and src_max), so that i don't have to look up each one in turn?
> 
> -scale 0 1000 doesn't work for me...

Henry,

Unfortunately due to the way the -scale commandline argument is
processed you cannot allow it to autoselect the input range and still
allow you to use a non default output range.

So either you need to just use -scale and let it rescale things to 0 to 255
(and then perhaps rescale again to 0 to 1000), or you could run gdalinfo
with the -mm (min max) switch to find the maximum value in advance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Fri Apr 16 10:41:41 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Apr 16 10:41:45 2010
Subject: [gdal-dev] using JNI with gdal.dlls
In-Reply-To: <y2sf471ae971004160631i49d5fe69ubedf48dc6199636c@mail.gmail.com>
References: <y2sf471ae971004160631i49d5fe69ubedf48dc6199636c@mail.gmail.com>
Message-ID: <n2jeb502d881004160741ndfb0e999y38a09bbf2e79c585@mail.gmail.com>

Gurpreet,

You can find the help regarding this at
http://trac.osgeo.org/gdal/wiki/GdalOgrInJava
Also look at http://trac.osgeo.org/gdal/wiki/BuildHints

On Fri, Apr 16, 2010 at 7:01 PM, Gurpreet singh <
gurpreetsingh.2005@gmail.com> wrote:

> HI I am new to gdal could you please let me know about using gdal.dlls with
> java native interface.
>
> regards
> gurpreet
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100416/c6e0647a/attachment.html
From henrypatton at gmail.com  Fri Apr 16 11:36:55 2010
From: henrypatton at gmail.com (hjp85)
Date: Fri Apr 16 11:36:57 2010
Subject: [gdal-dev] Re: -scale command
In-Reply-To: <4BC8745B.9040806@pobox.com>
References: <1271427510889-4913331.post@n2.nabble.com>
	<4BC8745B.9040806@pobox.com>
Message-ID: <1271432215386-4913721.post@n2.nabble.com>



Frank Warmerdam wrote:
> 
> 
> So either you need to just use -scale and let it rescale things to 0 to
> 255
> (and then perhaps rescale again to 0 to 1000), or you could run gdalinfo
> with the -mm (min max) switch to find the maximum value in advance.
> 
> 

Ah, ok. Thanks Frank, your first suggestion worked. 
-- 
View this message in context: http://n2.nabble.com/scale-command-tp4913331p4913721.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jgomezdans at gmail.com  Fri Apr 16 14:04:35 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Fri Apr 16 14:04:46 2010
Subject: [gdal-dev] Bulding VRT files from HDF sds
Message-ID: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>

Hi,
I want to put together a time series of MODIS datasets in VRT, the originals
being in HDF EOS format. I do that by defining the SDS for each date and
sticking it into a file:
HDF4_EOS:EOS_GRID:"../blablah.hdf":blah:blah
HDF4_EOS:EOS_GRID:"../blablah.hdf":blah:blah
HDF4_EOS:EOS_GRID:"../blablah.hdf":blah:blah
HDF4_EOS:EOS_GRID:"../blablah.hdf":blah:blah
[...]

I then use
    gdalbuildvrt -separate -input_files_list myfile.txt output_vrt.vrt

which creates the VRT file in output_vrt.vrt. The XML appears sensible, and
all things are as they should.

<VRTRasterBand dataType="Int16" band="32">
    <Metadata>
      <MDI key="STATISTICS_MINIMUM">-310</MDI>
      <MDI key="STATISTICS_MAXIMUM">32766</MDI>
      <MDI key="STATISTICS_MEAN">321.45436944444</MDI>
      <MDI key="STATISTICS_STDDEV">2990.0525001527</MDI>
    </Metadata>
    <NoDataValue>3.27670000000000E+04</NoDataValue>
    <ComplexSource>
      <SourceFilename
relativeToVRT="1">HDF4_EOS:EOS_GRID:&quot;../XXX&quot;:XXXX:XXX</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1200" RasterYSize="1200"
DataType="Int16" BlockXSize="1200" BlockYSize="1"/>
      <SrcRect xOff="0" yOff="0" xSize="1200" ySize="1200"/>
      <DstRect xOff="0" yOff="0" xSize="1200" ySize="1200"/>
      <NODATA>32767</NODATA>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Int16" band="33">
    <NoDataValue>3.27670000000000E+04</NoDataValue>
    <ComplexSource>
      <SourceFilename
relativeToVRT="1">HDF4_EOS:EOS_GRID:&quot;../XXX&quot;:XXXX:XXX</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1200" RasterYSize="1200"
DataType="Int16" BlockXSize="1200" BlockYSize="1"/>
      <SrcRect xOff="0" yOff="0" xSize="1200" ySize="1200"/>
      <DstRect xOff="0" yOff="0" xSize="1200" ySize="1200"/>
      <NODATA>32767</NODATA>
    </ComplexSource>
  </VRTRasterBand>


If I try to read this into python, using the GDAL bindings, it can deal with
individual bands, but using

g = gdal.Open ( VRT_file )
data = g.ReadAsArray()

it fails claiming that it can't find the original HDF datafile. this error
pops up with the band that corresponds to band number 33.

Running gdalinfo -stats on the new filename proceeds reporting the expected
information, band by band... slowly but surely, until it reaches band 33
(it's band 33 everytime, even with different datasets):

Band 33 Block=128x128 Type=Int16, ColorInterp=Undefined
ERROR 4: `HDF4_EOS:EOS_GRID:"../BlahBlah.hdf":blah:blah' does not exist in
the file system,
and is not recognised as a supported dataset
name.


ERROR 1: IReadBlock failed at X offset 0, Y offset 0

I can read individual bands OK (although I haven't tried looping through
them), including band 33. I have stacks of memory, and data size should not
be an issue.

Any clues?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100416/bd3d8a19/attachment.html
From jgomezdans at gmail.com  Fri Apr 16 14:16:56 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Fri Apr 16 14:17:02 2010
Subject: [gdal-dev] Re: Bulding VRT files from HDF sds
In-Reply-To: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>
References: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>
Message-ID: <s2s91d218431004161116z8e460d85vc48f0daf41252cd3@mail.gmail.com>

More on this

On 16 April 2010 19:04, Jose Gomez-Dans <jgomezdans@gmail.com> wrote:

> I want to put together a time series of MODIS datasets in VRT, the
> originals being in HDF EOS format.
>

It appears that if I convert my HDF sds into standard GeoTIFFs
(gdal_translate -of GTiff .....), and then generate by  VRT, it all works as
it should!

It will probably solved my problem in practice, but I don't see why the HDF
sds shouldn't work?

Thanks,
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100416/06c1e685/attachment.html
From warmerdam at pobox.com  Fri Apr 16 14:25:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 16 14:25:23 2010
Subject: [gdal-dev] Bulding VRT files from HDF sds
In-Reply-To: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>
References: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>
Message-ID: <4BC8AB8D.2030904@pobox.com>

Jose Gomez-Dans wrote:
> Running gdalinfo -stats on the new filename proceeds reporting the 
> expected information, band by band... slowly but surely, until it 
> reaches band 33 (it's band 33 everytime, even with different datasets):
> 
> Band 33 Block=128x128 Type=Int16, ColorInterp=Undefined              
> ERROR 4: `HDF4_EOS:EOS_GRID:"../BlahBlah.hdf":blah:blah' does not exist 
> in the file system,
> and is not recognised as a supported dataset 
> name.                                                                                            
> 
> 
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> 
> I can read individual bands OK (although I haven't tried looping through 
> them), including band 33. I have stacks of memory, and data size should 
> not be an issue.

Jose,

I suspect the HDF library is using a table of file accessors that is only
32 large,so when GDAL tries to open a 33rd file things fail.  Your workaround
of translating to geotiff and working with that should be fine.  If you really
wanted to fix this you could likely modify a constant in the hdf library for
the table size and recompile it but that could be somewhat involved.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jgomezdans at gmail.com  Sat Apr 17 07:50:19 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Sat Apr 17 07:50:21 2010
Subject: [gdal-dev] Bulding VRT files from HDF sds
In-Reply-To: <4BC8AB8D.2030904@pobox.com>
References: <h2x91d218431004161104ga3228a00p99111b410edec7a8@mail.gmail.com>
	<4BC8AB8D.2030904@pobox.com>
Message-ID: <y2h91d218431004170450y88cf7815i1f031d8c4b51311e@mail.gmail.com>

Frank,

On 16 April 2010 19:25, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Jose Gomez-Dans wrote:
>
>> Running gdalinfo -stats on the new filename proceeds reporting the
>> expected information, band by band... slowly but surely, until it reaches
>> band 33 (it's band 33 everytime, even with different datasets):
>>
>

> I suspect the HDF library is using a table of file accessors that is only
> 32 large,so when GDAL tries to open a 33rd file things fail.  Your
> workaround
> of translating to geotiff and working with that should be fine.
>

So this is the case, and in fact it is mentioned on the HDF GDAL driver
page:
<http://www.gdal.org/frmt_hdf4.html> (section Driver building).

I was quite bemused, and thought that maybe this 33 number would change if I
ran my script on different dates or jupiter/Mars positions in the sky X-)
Glad to hear the answer is much simpler than that!

Thanks a lot,
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100417/0e23a7d9/attachment.html
From randyqiuxy at hotmail.com  Sat Apr 17 08:36:07 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Sat Apr 17 08:36:10 2010
Subject: [gdal-dev] convert s57  to shp via ogr2ogr?
Message-ID: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>

Hi list,

I’d like to know whether ogr2ogr could convert s57 files to ERSI shape
file(.shp)?

I got some errors during converting:

ERROR 6:Can’t create fields of type StringList on shapefile layers.

……………

Same as above

ERROR 1：Attempt to write non-polygon <LINESTRING> geometry to type
shapefile

……………….

Same as above

 

And I use the command:”ogr2ogr Cskipfailures  -f “ESRI Shapefile” out
US1AK90M.000”.

Is there anything wrong about my command?

Or the ogr2ogr have some defect?

 

Thanks.

Best regards,

Randy

 

――――――――――――――――――――――――――――――――――――――
――――――

To be frank, dream is hard to own!

Fortunately, I do understand what deserves me to dedicate myself to through
all my life.

――――――――――――――――――――――――――――――――――――――
――――――

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100417/0bdcb5d5/attachment-0001.html
From warmerdam at pobox.com  Sat Apr 17 10:28:52 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 17 10:28:58 2010
Subject: [gdal-dev] convert s57  to shp via ogr2ogr?
In-Reply-To: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
References: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
Message-ID: <4BC9C5A4.2020007@pobox.com>

Randy wrote:
> Hi list,
>=20
> I=A1=AFd like to know whether ogr2ogr could convert s57 files to ERSI s=
hape=20
> file(.shp)?
>=20
> I got some errors during converting:
>=20
> ERROR 6:Can=A1=AFt create fields of type StringList on shapefile layers=
.
>=20
> =A1=AD=A1=AD=A1=AD=A1=AD=A1=AD
>=20
> Same as above
>=20
> ERROR 1=A3=BAAttempt to write non-polygon <LINESTRING> geometry to type=
=20
> shapefile
>=20
> =A1=AD=A1=AD=A1=AD=A1=AD=A1=AD=A1=AD.
>=20
> Same as above
>=20
> =20
>=20
> And I use the command:=A1=B1ogr2ogr =A8Cskipfailures  -f =A1=B0ESRI Sha=
pefile=A1=B1 out=20
> US1AK90M.000=A1=B1.
>=20
> Is there anything wrong about my command?
>=20
> Or the ogr2ogr have some defect?

Randy,

The first message indicates that there are some fields of
a type that cannot be translated to shapefiles directly.  With
-skipfailures they should be just skipped.

The second message is caused when an S-57 layer has a mixture
of geometry types.  Shapefiles can only have one geometry
type (ie. line or point) per layer.   The traditional way to
address this is to do two translations for layers with a mixture
of geometries, one for each geometry type.

So you command is reasonable, but to translate S-57 the best
that is possible you will likely need to do the translation
one layer at a time,and establish what geometry types each
has.  Rather tedious!

Best regards,
--=20
---------------------------------------+---------------------------------=
-----
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox=
.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From iacovlev.pavel at gmail.com  Sat Apr 17 17:17:19 2010
From: iacovlev.pavel at gmail.com (Pavel Iacovlev)
Date: Sat Apr 17 17:17:23 2010
Subject: [gdal-dev] Creating a .tab file with proper coordinates precision
Message-ID: <u2n2a37f67a1004171417rb920d481p24e85893b910447c@mail.gmail.com>

I am trying to convert data from postgis to a .tab file using ogr2ogr
with partial success.
Thanks to Frank Frank W I have understood how the format stores the
coordinates and that their precision depends on the mao extent.

The data is in MOLDREF99 projection and I want to define it's extents
to the destination file, currently mitab driver just writes BOUNDS
(-30000000, -15000000) (30000000, 15000000).
Questions:
1) How can I assign the bounds to a certain projection ?
2) Is it possible to create a dsco option for custom extents ?

The definition of my projection (EPSG:4026 MOLDREF99) is:
Mapinfo: "MOLDREF99\p4026", 2008, 33, 7, 28.4, 0, 0.99994, 200000,
-5000000, 0, 0, 400000, 400000
Proj4: +proj=tmerc +lat_0=0 +lon_0=28.4 +k=0.999940 +x_0=200000
+y_0=-5000000 +ellps=GRS80 +towgs84=-0,0,0,0,0,0,0 +units=m +no_defs

I have tried ogr2ogr with -a_srs /path/to/my/projection.prj with the
following contents
"MOLDREF99\p4026", 2008, 33, 7, 28.4, 0, 0.99994, 200000,-5000000, 0,
0, 400000, 400000 Bounds (67596, 36694) (335566, 373037)
Also (for test, taken from the example in mitab_bounds.cpp)
CoordSys Earth Projection 8, 24, "m", -63, 0, 0.9996, 500000, 0 Bounds
(-7746230.6469039, -9998287.383889269) (8746230.6469039,
9998287.383889269)

Both fail with the following error:
Warning 503: Some objects were written outside of the file's
predefined bounds. These objects may have invalid coordinates when the
file is reopened. Predefined bounds: (-1000,-1000)-(1000,1000)

Are there any other ways around this ?

-- 
http://iap.md, The future is open
From Flamed at gmx.de  Sat Apr 17 19:53:42 2010
From: Flamed at gmx.de (Flamed@gmx.de)
Date: Sat Apr 17 19:53:46 2010
Subject: [gdal-dev] gdal.jar:compile error:CC-Command not found
Message-ID: <20100417235342.291560@gmx.net>

Dear list readers,
I'm trying to generate a gdal.jar (from 1.7.1 source under WinXP) with MinGW+MSYS+SWIG following the guide: 
http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix

During the make process I get this error:
make: CC@: Command not found
make: *** [gdalconst_wrap.o] Error 127

I thought there was a problem that MSYS couldn't find the right compiler.exe -> I tried to rename "gcc.exe" in "MinGW/bin" directory to "cc.exe" and "cc@.exe", but - of course - it didn't work :)

Does anybody know how to overcome this error? Is there a place to download a gdal.jar version 1.7.1? Googling half a day didn't bring up any resource...

King regards,
Florian
-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From rayg at daylongraphics.com  Sat Apr 17 20:29:14 2010
From: rayg at daylongraphics.com (Ray Gardener)
Date: Sat Apr 17 19:58:01 2010
Subject: [gdal-dev] Support for HF2/HFZ?
In-Reply-To: <4BC9C5A4.2020007@pobox.com>
References: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
	<4BC9C5A4.2020007@pobox.com>
Message-ID: <4BCA525A.2050108@daylongraphics.com>

Sorry if this has been brought up before, but was anyone planning to add
a raster driver for the HF2/HFZ format? Specs are at

www.bundysoft.com/docs/doku.php?id=l3dt:formats:specs:hf2

Ray
From wdmccoy at geo.umass.edu  Sat Apr 17 20:28:36 2010
From: wdmccoy at geo.umass.edu (William McCoy)
Date: Sat Apr 17 20:34:39 2010
Subject: [gdal-dev] install gdal documentation
Message-ID: <4BCA5234.9080000@geo.umass.edu>

I have recently built and installed gdal 1.7.1 on a couple of my Linux 
computers.  I have noticed that 'make' and 'make install' don't seem to 
build or install any documentation as man pages or anything else.  I 
don't see any target in the makefile that I should use to make the 
documentation.  I see there are .dox files in the source doc 
subdirectory, but I don't know how to build them.  Can anyone suggest 
what to do?

Thanks,
Bill

-- 
William D. McCoy
Geosciences
University of Massachusetts
Amherst, MA 01003
From ivan.lucena at pmldnet.com  Sat Apr 17 14:17:50 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Sat Apr 17 21:18:13 2010
Subject: [gdal-dev] install gdal documentation
In-Reply-To: <4BCA5234.9080000@geo.umass.edu>
References: <4BCA5234.9080000@geo.umass.edu>
Message-ID: <4BC9FB4E.1020003@pmldnet.com>

William McCoy wrote:
> I have recently built and installed gdal 1.7.1 on a couple of my Linux 
> computers.  I have noticed that 'make' and 'make install' don't seem to 
> build or install any documentation as man pages or anything else.  I 
> don't see any target in the makefile that I should use to make the 
> documentation.  I see there are .dox files in the source doc 
> subdirectory, but I don't know how to build them.  Can anyone suggest 
> what to do?

try

make docs
make install-docs

--
IL
From wdmccoy at geo.umass.edu  Sat Apr 17 22:06:07 2010
From: wdmccoy at geo.umass.edu (William McCoy)
Date: Sat Apr 17 22:06:12 2010
Subject: [gdal-dev] install gdal documentation
In-Reply-To: <4BC9FB4E.1020003@pmldnet.com>
References: <4BCA5234.9080000@geo.umass.edu> <4BC9FB4E.1020003@pmldnet.com>
Message-ID: <4BCA690F.3090407@geo.umass.edu>

On 04/17/2010 02:17 PM, Lucena, Ivan wrote:
> William McCoy wrote:
>> I have recently built and installed gdal 1.7.1 on a couple of my Linux
>> computers. I have noticed that 'make' and 'make install' don't seem to
>> build or install any documentation as man pages or anything else. I
>> don't see any target in the makefile that I should use to make the
>> documentation. I see there are .dox files in the source doc
>> subdirectory, but I don't know how to build them. Can anyone suggest
>> what to do?
>
> try
>
> make docs
> make install-docs
>
> --
> IL

Ok, great.  That did it.  I had tried 'make doc' earlier, but not 'make 
docs'.

Thanks,
Bill

-- 
William D. McCoy
Geosciences
University of Massachusetts
Amherst, MA 01003
From randyqiuxy at hotmail.com  Sat Apr 17 22:09:09 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Sat Apr 17 22:09:15 2010
Subject: [gdal-dev] convert s57  to shp via ogr2ogr?
In-Reply-To: <4BC9C5A4.2020007@pobox.com>
References: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
	<4BC9C5A4.2020007@pobox.com>
Message-ID: <BLU0-SMTP53700F0544338C1482B2CEC30C0@phx.gbl>

Hi Frank,
Thanks for your response!
> The first message indicates that there are some fields of
> a type that cannot be translated to shapefiles directly.  With
> -skipfailures they should be just skipped.
> 
> The second message is caused when an S-57 layer has a mixture
> of geometry types.  Shapefiles can only have one geometry
> type (ie. line or point) per layer.   The traditional way to
> address this is to do two translations for layers with a mixture
> of geometries, one for each geometry type.
> 
> So you command is reasonable, but to translate S-57 the best
> that is possible you will likely need to do the translation
> one layer at a time,
The ogr2ogr has "[-clipsrclayer layer]" which seems could do translation
one layer at a time,but this means I should get the layername via
"ogrinfo" first,right?


> and establish what geometry types each
> has.  Rather tedious!

Best regards,
Randy
> Best regards,

From warmerdam at pobox.com  Sat Apr 17 22:18:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 17 22:18:59 2010
Subject: [gdal-dev] convert s57  to shp via ogr2ogr?
In-Reply-To: <BLU0-SMTP53700F0544338C1482B2CEC30C0@phx.gbl>
References: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
	<4BC9C5A4.2020007@pobox.com>
	<BLU0-SMTP53700F0544338C1482B2CEC30C0@phx.gbl>
Message-ID: <4BCA6C09.6060809@pobox.com>

Randy wrote:
> Hi Frank,
> Thanks for your response!
>> The first message indicates that there are some fields of
>> a type that cannot be translated to shapefiles directly.  With
>> -skipfailures they should be just skipped.
>>
>> The second message is caused when an S-57 layer has a mixture
>> of geometry types.  Shapefiles can only have one geometry
>> type (ie. line or point) per layer.   The traditional way to
>> address this is to do two translations for layers with a mixture
>> of geometries, one for each geometry type.
>>
>> So you command is reasonable, but to translate S-57 the best
>> that is possible you will likely need to do the translation
>> one layer at a time,
> The ogr2ogr has "[-clipsrclayer layer]" which seems could do translation
> one layer at a time,but this means I should get the layername via
> "ogrinfo" first,right?


Randy,

That switch is not appropriate to just transform a single layer.
Do something like:

ogr2ogr -skipfailures wrecks_p.shp -nlt point GB4X0000.000 wrecks
ogr2ogr -skipfailures wrecks_l.shp -nlt linestring GB4X0000.000 wrecks

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.l.h.hartmann at uva.nl  Mon Apr 19 05:58:30 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Apr 19 09:20:10 2010
Subject: [gdal-dev] transform PostGIS geometries with control points,
	like gdalwarp -gcp
In-Reply-To: <g2xd7bc9f301004190241j6320957cgd0bd15141dd14bc6@mail.gmail.com>
References: <i2ud7bc9f301004170453pb60c3ff6w4337578ccb4aeb8f@mail.gmail.com>	<D472AC3EEB4C48D7813EE8A8CA117049@c>
	<g2xd7bc9f301004190241j6320957cgd0bd15141dd14bc6@mail.gmail.com>
Message-ID: <4BCC2946.6040609@uva.nl>

(Sorry for cross-posting, this is about both Gdal and PostGIS)

Hi all,

Would it be possible / make sense to add a procedure to PostGIS to 
transform geometries based on control points? We now have the base 
transforms: scale rotate and translate, and IMHO it would not be very 
complicated to add a transform based on two sets of control points, one 
for the source and one for the target projection. Code could be derived 
from the gcp-based transformations in GDAL, although I have no idea how 
difficult it would be to integrate those algorithms into the PostGIS 
codebase. It's something I really need for my work with historical maps, 
so if it is doable and fits into the PostGIS "philosophy", I could try 
to find funding for it. I use the gdal routines a lot for raster maps, 
and it would be really helpful to be able to do the same with vector maps.

Jan
From simon.okeefe at groundtruth.com.au  Mon Apr 19 09:22:29 2010
From: simon.okeefe at groundtruth.com.au (Simon O'Keefe)
Date: Mon Apr 19 09:22:52 2010
Subject: [gdal-dev] MapInfo TAB append issue
Message-ID: <v2j762d0f641004190622i2dae16e9za430c86eaf806726@mail.gmail.com>

Hi,

I'd like to report some unexpected behaviour from ogr2ogr
(FWTools2.4.7 in Windows 7) when attempting to append to a MapInfo TAB
file.

To recreate this issue, I first run the following to create a new
MapInfo table from a SHP file:
ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp

This successfully generates a MapInfo table at C:\Output\states.tab.

Now, I attempt to append the source data to the new table (not a
realistic example, I know):
ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp -append

What happens here is that, instead of appending to the MapInfo table,
it generates a new SHP file: C:\Output\states.shp.

I experience this behaviour whether the source is SHP or TAB. The
slightly dangerous element to this issue is that if the input and
output folders are the same, the source file (if it's SHP) gets
appended to itself.

Has anyone experienced this issue?

Cheers,

Simon
_______________________________________
Simon O'Keefe
Geospatial Systems Developer
Groundtruth Mapping Systems
Level 2, 140 Queen Street
Melbourne VIC 3000 Australia
phone:  +61 409 413 890
email:  simon.okeefe@groundtruth.com.au
web:    http://www.groundtruth.com.au
_______________________________________
From kmichael.aye at gmail.com  Mon Apr 19 09:51:41 2010
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Mon Apr 19 09:55:06 2010
Subject: [gdal-dev] KyngChaos Frameworks: GDAL's numpy vs Enthought's numpy
Message-ID: <hqhn5d$h38$1@dough.gmane.org>

Hi!

I am using quite successfully KyngChaos' Frameworks for GDAL (Thank 
you, William!) with a custom Python install from python.org on OSX. 
This install already includes most of the stuff I need for my daily 
work (numpy,scipy,matplotlib).
But sometimes I need something special like mayavi2 and for that I have 
installed the Enthought Python Distribution (luckily for free for 
academic use), but I can't use the existing GDAL framework because it 
is based on numpy 1.3 and not on numpy 1.4.
If I try so, I get a weird 'Bus Error' message and Python just crashes.
Am I guessing right, that the only remedy would be to build GDAL for 
Numpy 1.4 on my own?
Or would it be more recommendable to find an old Enthought, that still 
uses Numpy 1.3?
Then I should be able to import gdal into the Enthought's Python, right?
Any advise would be appreciated!

Best regards,
Michael


From randyqiuxy at hotmail.com  Mon Apr 19 10:51:50 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Mon Apr 19 10:51:58 2010
Subject: [gdal-dev] convert s57  to shp via ogr2ogr?
In-Reply-To: <4BCC5FDB.1010704@pobox.com>
References: <BAY123-DS4C42C610C29D78D7E44B1C30D0@phx.gbl>
	<4BC9C5A4.2020007@pobox.com>
	<BLU0-SMTP53700F0544338C1482B2CEC30C0@phx.gbl>
	<4BCA6C09.6060809@pobox.com>
	<BLU0-SMTP33E7EC103CE31B7D6398C2C30B0@phx.gbl>
	<4BCC5FDB.1010704@pobox.com>
Message-ID: <BAY123-DS12BCD49C7A28E41079694CC30B0@phx.gbl>

Hi Frank=A3=AC
Thanks for your help!
Yes, it works now, but I need to do lots of tedious work for finishing =
this
converting work.
Anyway, thank "ogr2ogr" and appreciate your patient guideline!
Best regards,
Randy
-----Original Message-----

> Hi Frank,
> Thanks for your timely response!
>> That switch is not appropriate to just transform a single layer.
>> Do something like:
>>
>> ogr2ogr -skipfailures wrecks_p.shp -nlt point GB4X0000.000 wrecks
>> ogr2ogr -skipfailures wrecks_l.shp -nlt linestring GB4X0000.000 =
wrecks
>=20
> So sorry I cannot understand it above,I use the command as follows on
> Linux,but it seems nothing(anything about "us_p.shp" or "us") was
> produced:
> $ogr2ogr -skipfailures us_p.shp -nlt point US1AK90M.000 us1ak90m
>=20
> I don't know what the "wrecks" at the end of your command means, then =
it
> still brought many errors while I don't use this command-word.
> Any clue?

Randy,

The "wrecks" is the name of a layer from the dataset - an S57 feature =
class.

If you do "ogrinfo uslak90m.000" you will get a list of all the =
available
layers.

Best regards,
--=20
---------------------------------------+---------------------------------=
---
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From GWALTER at mdacorporation.com  Mon Apr 19 10:56:53 2010
From: GWALTER at mdacorporation.com (Gillian WALTER)
Date: Mon Apr 19 10:56:57 2010
Subject: [gdal-dev] Sun Raster format
Message-ID: <862947533C4ECE469D1A692CD483299E0376E652@VMXYVR1.ds.mda.ca>

Hi,

Does GDAL have a driver for Sun raster (.ras) format, or has it ever had
a driver for this format?  I can't seem to open .ras files in FWTools
(I'm using version 2.4.7 for windows), and don't see it listed in the
formats list.  I noticed on Frank's web page that he included Sun Raster
in the list of formats he'd written translators for, and I wondered if
this had ever made it into GDAL (even an old version).

Thanks,

Gillian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100419/9bf43cde/attachment.html
From warmerdam at pobox.com  Mon Apr 19 11:05:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 19 11:05:51 2010
Subject: [gdal-dev] Sun Raster format
In-Reply-To: <862947533C4ECE469D1A692CD483299E0376E652@VMXYVR1.ds.mda.ca>
References: <862947533C4ECE469D1A692CD483299E0376E652@VMXYVR1.ds.mda.ca>
Message-ID: <4BCC714A.1060104@pobox.com>

Gillian WALTER wrote:
> Hi,
> 
> Does GDAL have a driver for Sun raster (.ras) format, or has it ever had 
> a driver for this format?  I can't seem to open .ras files in FWTools 
> (I'm using version 2.4.7 for windows), and don't see it listed in the 
> formats list.  I noticed on Frank's web page that he included Sun Raster 
> in the list of formats he'd written translators for, and I wondered if 
> this had ever made it into GDAL (even an old version).

Gillian,

I can't find any sign of a sun raster driver for GDAL.  I did write one
while at PCI in the 1990's.   It is quite a simple format, so writing a
driver should be pretty easy.  I'm surprised it is still of interest in 2010.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woklist at kyngchaos.com  Mon Apr 19 11:29:59 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 19 11:30:06 2010
Subject: [gdal-dev] KyngChaos Frameworks: GDAL's numpy vs Enthought's numpy
In-Reply-To: <hqhn5d$h38$1@dough.gmane.org>
References: <hqhn5d$h38$1@dough.gmane.org>
Message-ID: <34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>

On Apr 19, 2010, at 8:51 AM, K.-Michael Aye wrote:

> Hi!
> 
> I am using quite successfully KyngChaos' Frameworks for GDAL (Thank you, William!) with a custom Python install from python.org on OSX. This install already includes most of the stuff I need for my daily work (numpy,scipy,matplotlib).
> But sometimes I need something special like mayavi2 and for that I have installed the Enthought Python Distribution (luckily for free for academic use), but I can't use the existing GDAL framework because it is based on numpy 1.3 and not on numpy 1.4.
> If I try so, I get a weird 'Bus Error' message and Python just crashes.

GDAL python *should* be able to use a later version of numpy than it was built for, it's only the python side of the interface that it cares about, but I don't know what be happening at compile time that might lock it in to a specific version of numpy, and python can be picky.

If you are including the GDAL framework python folder in the Enthought python path, then numpy 1.3 is also available from there.  But depending on how you added GDAL to the path, numpy might be overridden by Enthought's path.  My installer puts a .pth file in the /Library/Python/2.x/site-packages folder that forces it to the top of the path.  A standard .pth (including the /Library site-packages), oddly, gets added *after* the system paths, so they can't override the system modules.

> Am I guessing right, that the only remedy would be to build GDAL for Numpy 1.4 on my own?
> Or would it be more recommendable to find an old Enthought, that still uses Numpy 1.3?

It's not [Enthought] python that's using numpy, it's GDAL and other python programs.  As long as the python version matches, it should work, though there can be other incompatibilities in different python builds.

> Then I should be able to import gdal into the Enthought's Python, right?
> Any advise would be appreciated!
> 

I generally keep up to date, but I guess I don't check numpy very often and didn't see the v1.4 (interesting, they skipped 1.4.0).  Though that is only an RC release yet, so I may still wait for a final release.

You could try copying my gdal.pth to Enthought's user site-packages, so it should override Enthought's numpy, but that will happen for all other python usage iwth Enthought's python.

I just figured out that I could customize the GDAL python to force it to load the framework copy of numpy, but I'd also then probably isolate that numpy from the python path.  I may try that in the next release.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


From chaitanya.ch at gmail.com  Mon Apr 19 11:50:06 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 19 11:50:09 2010
Subject: [gdal-dev] Maintenance report for Mar 24, 2010 to Apr 18, 2010
Message-ID: <w2veb502d881004190850la40a3d1eqa0497a47adc6650b@mail.gmail.com>

Hi all,

Please find my updated work report at
http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitanya

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100419/405015d2/attachment.html
From jason.roberts at duke.edu  Mon Apr 19 11:50:22 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Apr 19 11:51:34 2010
Subject: [gdal-dev] KyngChaos Frameworks: GDAL's numpy vs Enthought's numpy
In-Reply-To: <34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
Message-ID: <046e01cadfd8$0625c8f0$12715ad0$@roberts@duke.edu>

I recall a recent discussion regarding an "ABI breakage" with numpy 1.4.
Please see
http://mail.scipy.org/pipermail/numpy-discussion/2010-February/048203.html.
Perhaps this could be the problem? The thread is very long and I did not
follow it to the end. 

> GDAL python *should* be able to use a later version of numpy than it was
built for, it's only the python side of the interface that it cares about

Yes, but GDAL's Python bindings access numpy's Python interface through C,
right? I presume the GDAL Python bindings include numpy.h. If so, then it
seems likely that a change to numpy's binary interface could result in an
incompatibility.

I have not researched this fully. My apologies if I do not know what I'm
talking about here. My apologies if I'm starting a false rumor...

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of William Kyngesburye
Sent: Monday, April 19, 2010 11:30 AM
To: K.-Michael Aye
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] KyngChaos Frameworks: GDAL's numpy vs Enthought's
numpy

On Apr 19, 2010, at 8:51 AM, K.-Michael Aye wrote:

> Hi!
> 
> I am using quite successfully KyngChaos' Frameworks for GDAL (Thank you,
William!) with a custom Python install from python.org on OSX. This install
already includes most of the stuff I need for my daily work
(numpy,scipy,matplotlib).
> But sometimes I need something special like mayavi2 and for that I have
installed the Enthought Python Distribution (luckily for free for academic
use), but I can't use the existing GDAL framework because it is based on
numpy 1.3 and not on numpy 1.4.
> If I try so, I get a weird 'Bus Error' message and Python just crashes.

GDAL python *should* be able to use a later version of numpy than it was
built for, it's only the python side of the interface that it cares about,
but I don't know what be happening at compile time that might lock it in to
a specific version of numpy, and python can be picky.

If you are including the GDAL framework python folder in the Enthought
python path, then numpy 1.3 is also available from there.  But depending on
how you added GDAL to the path, numpy might be overridden by Enthought's
path.  My installer puts a .pth file in the
/Library/Python/2.x/site-packages folder that forces it to the top of the
path.  A standard .pth (including the /Library site-packages), oddly, gets
added *after* the system paths, so they can't override the system modules.

> Am I guessing right, that the only remedy would be to build GDAL for Numpy
1.4 on my own?
> Or would it be more recommendable to find an old Enthought, that still
uses Numpy 1.3?

It's not [Enthought] python that's using numpy, it's GDAL and other python
programs.  As long as the python version matches, it should work, though
there can be other incompatibilities in different python builds.

> Then I should be able to import gdal into the Enthought's Python, right?
> Any advise would be appreciated!
> 

I generally keep up to date, but I guess I don't check numpy very often and
didn't see the v1.4 (interesting, they skipped 1.4.0).  Though that is only
an RC release yet, so I may still wait for a final release.

You could try copying my gdal.pth to Enthought's user site-packages, so it
should override Enthought's numpy, but that will happen for all other python
usage iwth Enthought's python.

I just figured out that I could customize the GDAL python to force it to
load the framework copy of numpy, but I'd also then probably isolate that
numpy from the python path.  I may try that in the next release.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with
hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a
bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Chris.Barker at noaa.gov  Mon Apr 19 12:24:27 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Apr 19 12:24:30 2010
Subject: [gdal-dev] KyngChaos Frameworks: GDAL's numpy vs Enthought's numpy
In-Reply-To: <046e01cadfd8$0625c8f0$12715ad0$%roberts@duke.edu>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<046e01cadfd8$0625c8f0$12715ad0$%roberts@duke.edu>
Message-ID: <4BCC83BB.4050902@noaa.gov>

Jason Roberts wrote:
> I recall a recent discussion regarding an "ABI breakage" with numpy 1.4.

yup -- that's it. IN short:

numpy 1.4.0 was released without the devs realizing that the ABI had 
broken (or hadn't realized how many problems it would cause). It was 
decided to pull that release, and instead release a 1.4.1 that didn't 
break the ABI, and later on release one that did -- maybe 2.0. I think 
1.4.1 is in "release candidate" stage as I write.

Given all that, I'm surprised that Entought has been released with 1.4.0 
-- are you sure it came that way?

>> GDAL python *should* be able to use a later version of numpy than it was
> built for, it's only the python side of the interface that it cares about

really? I thought it build numy arrays directly in C code? Or is is 
using the "Array Protocal", in whihc case you're right, it shouldn't 
care about the ABI.

Which reminds me -- this is actually a good argument fo why we should 
all use the PEP 3118 extended buffer protocol, rather than the numpy API 
directly, for extension modules ( at least when older python's don't 
need to be supported)

Is it possible that when you use GDAL with Enthought that you've loaded 
two incompatible numpys?

> If you are including the GDAL framework python folder in the Enthought
> python path, then numpy 1.3 is also available from there.

Sure, but if you are using other numpy-using packages together with 
GDAL, you'll need to on;ly use one numpy (well, you could probably 
kludge around it, but it would be ugly...)

I'd wait for/ask Enthought to release a numpy1.4.1 version of EPD, or 
use EPD 5.1

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From gregcoats at mac.com  Mon Apr 19 11:27:11 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Apr 19 12:27:34 2010
Subject: [gdal-dev] Sun Raster format
In-Reply-To: <4BCC714A.1060104@pobox.com>
References: <862947533C4ECE469D1A692CD483299E0376E652@VMXYVR1.ds.mda.ca>
	<4BCC714A.1060104@pobox.com>
Message-ID: <3518CA64-AA9A-499C-B0F6-3456514BE3D9@mac.com>

Open source ImageMagick, according to http://www.imagemagick.org/script/formats.php , supports the "Sun Rasterfile" format, that, according to http://www.fileformat.info/format/sunraster/egff.htm , begins with a 32 byte header. The Sun Rasterfile format does not store georeferencing metadata.
Greg

On Apr 19, 2010, at 11:05 AM, Frank Warmerdam wrote:

> Gillian WALTER wrote:
>> Hi,
>> Does GDAL have a driver for Sun raster (.ras) format, or has it ever had a driver for this format?  I can't seem to open .ras files in FWTools (I'm using version 2.4.7 for windows), and don't see it listed in the formats list.  I noticed on Frank's web page that he included Sun Raster in the list of formats he'd written translators for, and I wondered if this had ever made it into GDAL (even an old version).
> 
> Gillian,
> 
> I can't find any sign of a sun raster driver for GDAL.  I did write one
> while at PCI in the 1990's.   It is quite a simple format, so writing a
> driver should be pretty easy.  I'm surprised it is still of interest in 2010.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100419/e104d788/attachment.html
From kmichael.aye at gmail.com  Mon Apr 19 13:23:34 2010
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Mon Apr 19 13:23:46 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
Message-ID: <hqi3im$71a$1@dough.gmane.org>

> 
> GDAL python *should* be able to use a later version of numpy than it 
> wasbuilt for, it's only the python side of the interface that it 
> caresabout, but I don't know what be happening at compile time that 
> mightlock it in to a specific version of numpy, and python can be picky.
> 
> If you are including the GDAL framework python folder in the 
> Enthoughtpython path, then numpy 1.3 is also available from there.  But 
> dependingon how you added GDAL to the path, numpy might be overridden 
> byEnthought's path.  My installer puts a .pth file in 
> the/Library/Python/2.x/site-packages folder that forces it to the top 
> ofthe path.  A standard .pth (including the /Library 
> site-packages),oddly, gets added *after* the system paths, so they 
> can't override thesystem modules.

As Enthought, by default at least, does not look at 
/Lib.../Python/2.x/site-packages, I copied your gdal.pth to
/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages
After a restart of the Terminal and start of ipython, an

import numpy

imports numpy 1.3.0 from the GDAL framework as confirmed by 
numpy.__version__ and numpy.__path__

I now can open a gdal dataset and get it's data, but a

import matplotlib.pyplot as plt

crashes ipython with this Bus Error.
Same happens when I start ipython with the -pylab switch (as that 
switch executes that previous line, among other things.)

I am also guessing, that the over-write of Enthought's numpy import is 
not a good thing for the other libraries Enthought is using?

BTW, this is my sys.path:


'/Library/Frameworks/Python.framework/Versions/6.1/bin',
 '/Users/aye/Library/Python/2.6/site-packages/pydot-1.0.2-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/pyparsing-1.5.2-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/simplejson-2.0.9-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/python_twitter-0.6-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/Sphinx-0.6.3-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/docutils-0.6-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/Jinja2-2.2.1-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/Pygments-1.1.1-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/spyder-1.0.3-py2.6.egg',
 
'/Users/aye/Library/Python/2.6/site-packages/scikits.image-0.2.2-py2.6-macosx-10.5-i386.egg',
 

'/Users/aye/Library/Python/2.6/site-packages/PyXML-0.8.4-py2.6-macosx-10.6-universal.egg',
 

'/Users/aye/Library/Python/2.6/site-packages/pyfo-0.6-py2.6.egg',
 
'/Users/aye/Library/Python/2.6/site-packages/Amara-2.0a4-py2.6-macosx-10.6-universal.egg',
 

'/Users/aye/Library/Python/2.6/site-packages/setuptools-0.6c11-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/distribute-0.6.10-py2.6.egg',
 '/Users/aye/Library/Python/2.6/site-packages/pip-0.6.3-py2.6.egg',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python26.zip',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/plat-darwin',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/plat-mac',
 
'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/plat-mac/lib-scriptpackages',
 

'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/lib-tk',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/lib-old',
 '/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/lib-dynload',
 
'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages',
 

'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages/PIL',
 

'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
 

'/Users/aye/Library/Python/2.6/site-packages',
 
'/Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages/IPython/Extensions',
 

u'/Users/aye/.ipython']

I posted this problem as well in the matplotlib list, as only the 
matplotlib pylab switch seemed to crash, here is what
Robert Kern (from matplotlib?) said to this:

"[...] Only one version ever gets imported, but the GDAL
Python bindings expect its version and matplotlib expects another version."

and recommended as a remedy to
"rebuild the GDAL Python bindings against Enthought's numpy."

Obviously I'd like to avoid that, if I can! ;)

> 
>> Am I guessing right, that the only remedy would be to build GDAL 
>> forNumpy 1.4 on my own?
>> Or would it be more recommendable to find an old Enthought, that 
>> stilluses Numpy 1.3?
> 
> It's not [Enthought] python that's using numpy, it's GDAL and 
> otherpython programs.  As long as the python version matches, it should 
> work,though there can be other incompatibilities in different python 
> builds.

Clear. And I guess the culprit is the matplotlib included in Enthough 
demanding a certain version of numpy?

> 
>> Then I should be able to import gdal into the Enthought's Python,right?
>> Any advise would be appreciated!
>> 
> 
> I generally keep up to date, but I guess I don't check numpy very 
> oftenand didn't see the v1.4 (interesting, they skipped 1.4.0).  Though 
> thatis only an RC release yet, so I may still wait for a final release.

Yes, as was said, 1.4.0 created A LOT of fuss in the world, so they 
backstepped, officially withdraw it even, I think.
Interestingly, Enthought's numpy states 1.4.0.


> 
> You could try copying my gdal.pth to Enthought's user site-packages, 
> soit should override Enthought's numpy, but that will happen for all 
> otherpython usage iwth Enthought's python.

As reported, that's what I did anyway, but then my beloved -pylab 
switch (and maybe much more in Enthought) does not work anymore.


> 
> I just figured out that I could customize the GDAL python to force it 
> toload the framework copy of numpy, but I'd also then probably 
> isolatethat numpy from the python path.  I may try that in the next 
> release.
> 

Sounds worth a try, especially as you state, that GDAL should not mind!

Thanks for your time! But what do you recommend I should do now? Should 
I wait for a release from you, or is there a 'bridge'-solution possible?

Best Regards,
Michael



From Chris.Barker at noaa.gov  Mon Apr 19 13:59:01 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Apr 19 13:59:07 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <hqi3im$71a$1@dough.gmane.org>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
Message-ID: <4BCC99E5.6070504@noaa.gov>

K.-Michael Aye wrote:
> After a restart of the Terminal and start of ipython, an
> 
> import numpy
> 
> imports numpy 1.3.0 from the GDAL framework as confirmed by 
> numpy.__version__ and numpy.__path__

Did you try _not_ doing that, and using EPD's numpy instead -- maybe 
William is right, and GDAL doesn't care.

> and recommended as a remedy to
> "rebuild the GDAL Python bindings against Enthought's numpy."

Option 3:

Ask Enthought to include GDAL in EPD. Not a bad idea, there is lot's of 
geo-spatial stuff to be done in the scientific programing world, though 
it won't happen tomorrow, and if you're not a paying customer, you might 
not have much leverage!

Good luck,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Mon Apr 19 14:09:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 19 14:10:02 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Warning
Message-ID: <4BCC9C77.2010702@pobox.com>

Folks,

We have a fair number of significant fixes accumulated in the 1.7 branch
and I'd like to issue a 1.7.2 release this week.  Does anyone have anything
they need to do before I package it?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woklist at kyngchaos.com  Mon Apr 19 14:15:39 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 19 14:15:42 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <hqi3im$71a$1@dough.gmane.org>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
Message-ID: <E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>

On Apr 19, 2010, at 12:23 PM, K.-Michael Aye wrote:

>> GDAL python *should* be able to use a later version of numpy than it wasbuilt for, it's only the python side of the interface that it caresabout, but I don't know what be happening at compile time that mightlock it in to a specific version of numpy, and python can be picky.
>> If you are including the GDAL framework python folder in the Enthoughtpython path, then numpy 1.3 is also available from there.  But dependingon how you added GDAL to the path, numpy might be overridden byEnthought's path.  My installer puts a .pth file in the/Library/Python/2.x/site-packages folder that forces it to the top ofthe path.  A standard .pth (including the /Library site-packages),oddly, gets added *after* the system paths, so they can't override thesystem modules.
> 
> As Enthought, by default at least, does not look at /Lib.../Python/2.x/site-packages, I copied your gdal.pth to
> /Library/Frameworks/Python.framework/Versions/6.1/lib/python2.6/site-packages
> After a restart of the Terminal and start of ipython, an
> 
> import numpy
> 
> imports numpy 1.3.0 from the GDAL framework as confirmed by numpy.__version__ and numpy.__path__
> 
> I now can open a gdal dataset and get it's data, but a
> 
> import matplotlib.pyplot as plt
> 
> crashes ipython with this Bus Error.
> Same happens when I start ipython with the -pylab switch (as that switch executes that previous line, among other things.)
> 
> I am also guessing, that the over-write of Enthought's numpy import is not a good thing for the other libraries Enthought is using?
> 
Yes, as I said, copying the gdal.pth will change *all* python programs to use the GDAL numpy within Enthought python.

But this at least confirms some ABI incompatibility as others have mentioned, and Enthought includes the ABI-breaking numpy 1.4.0.

> 
> I posted this problem as well in the matplotlib list, as only the matplotlib pylab switch seemed to crash, here is what
> Robert Kern (from matplotlib?) said to this:
> 
> "[...] Only one version ever gets imported, but the GDAL
> Python bindings expect its version and matplotlib expects another version."
> 
> and recommended as a remedy to
> "rebuild the GDAL Python bindings against Enthought's numpy."
> 
> Obviously I'd like to avoid that, if I can! ;)

>>> Then I should be able to import gdal into the Enthought's Python,right?
>>> Any advise would be appreciated!
>> I generally keep up to date, but I guess I don't check numpy very oftenand didn't see the v1.4 (interesting, they skipped 1.4.0).  Though thatis only an RC release yet, so I may still wait for a final release.
> 
> Yes, as was said, 1.4.0 created A LOT of fuss in the world, so they backstepped, officially withdraw it even, I think.
> Interestingly, Enthought's numpy states 1.4.0.
> 
Well, since numpy 1.4.0 is officially un-released, for now you could consider it a bug to be worked around until Enthought updates to numpy 1.4.1.  When that happens, GDAL, matplotlib and others should be happy with either 1.3 or 1.4.1.

A workaround you could try: insert the line from the gdal.pth right before the "import numpy" lines in gdalnumeric.py and gdal_array.py.  And remove the gdal.pth copy from the Enthought python site-packages.  This should make GDAL load its numpy, and leave the sys.path alone for everything else.

If you need to use GDAL with some other python module that uses numpy, in the same script, or in the same session, this could still be a problem.  maybe importing the other module before gdal would work.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From Chris.Barker at noaa.gov  Mon Apr 19 14:27:05 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Apr 19 14:27:07 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
Message-ID: <4BCCA079.5010201@noaa.gov>

William Kyngesburye wrote:

> If you need to use GDAL with some other python module that uses
> numpy, in the same script, or in the same session, this could still
> be a problem. 

yup -- that simply won't work

> maybe importing the other module before gdal would
> work.

I don't think that will work either, unless you are right, and GDAL only 
uses the Python API -- I don't think that's the case, though --don't you 
need numpy to compile the GDAL bindings?

You could probably figure out a way to import both numpys separately, 
and then pass arrays back and forth using array.view(), but that would 
get ugly really fast!

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From woklist at kyngchaos.com  Mon Apr 19 14:54:57 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 19 14:55:00 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <4BCCA079.5010201@noaa.gov>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
	<4BCCA079.5010201@noaa.gov>
Message-ID: <7D575ABB-A973-42D9-81ED-1A984FBE2A87@kyngchaos.com>

On Apr 19, 2010, at 1:27 PM, Christopher Barker wrote:

> William Kyngesburye wrote:
> 
>> If you need to use GDAL with some other python module that uses
>> numpy, in the same script, or in the same session, this could still
>> be a problem. 
> 
> yup -- that simply won't work
> 
>> maybe importing the other module before gdal would
>> work.
> 
> I don't think that will work either, unless you are right, and GDAL only uses the Python API -- I don't think that's the case, though --don't you need numpy to compile the GDAL bindings?

It was a guess, you'd expect it to use the python API as the most compatible method.  But it looks like Michael's experience points to it using the C API (maybe that's normal for numpy?).

I see that gdal_array_wrap includes the numpy header, so that seems to indicate using C.  Building GDAL is pretty much a mindless task for me now, and I don't think about the details much any more ;)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From even.rouault at mines-paris.org  Mon Apr 19 15:19:13 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 19 15:19:26 2010
Subject: [gdal-dev] gdal.jar:compile error:CC-Command not found
In-Reply-To: <20100417235342.291560@gmx.net>
References: <20100417235342.291560@gmx.net>
Message-ID: <201004192119.13806.even.rouault@mines-paris.org>

Florian,

It looks like if some variable substition didn't work when 
running ./configure. Check the content of GDALmake.opt to see if there are 
remamining @CC@ variables.

Otherwise you could try downloading Tamas Szekeres daily builds that include 
GDAL Java bindings. As they are compiled with MSVC, I can't guarantee that 
they'll interoperate well with the library compiled with GCC.

See http://vbkto.dyndns.org/sdk/Default.aspx (download one of the -stable 
package to get GDAL 1.7.X)

Le Sunday 18 April 2010 01:53:42 Flamed@gmx.de, vous avez ?crit?:
> Dear list readers,
> I'm trying to generate a gdal.jar (from 1.7.1 source under WinXP) with
> MinGW+MSYS+SWIG following the guide:
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
>
> During the make process I get this error:
> make: CC@: Command not found
> make: *** [gdalconst_wrap.o] Error 127
>
> I thought there was a problem that MSYS couldn't find the right
> compiler.exe -> I tried to rename "gcc.exe" in "MinGW/bin" directory to
> "cc.exe" and "cc@.exe", but - of course - it didn't work :)
>
> Does anybody know how to overcome this error? Is there a place to download
> a gdal.jar version 1.7.1? Googling half a day didn't bring up any
> resource...
>
> King regards,
> Florian


From pcreso at pcreso.com  Mon Apr 19 17:36:21 2010
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Mon Apr 19 17:43:03 2010
Subject: [gdal-dev] Raster data extraction
In-Reply-To: <4BCC9C77.2010702@pobox.com>
Message-ID: <462402.13020.qm@web33208.mail.mud.yahoo.com>

Hi,

Is there a simple way (using gdal) of retrieving the colour spectra at specified sample points in georeferenced images?

I figure GRASS has some tools to do this, as does GMT, but was wondering if GDAL could support this functionality directly.

Lots of points/images to work through.

Thanks,

  Brent Wood
From rsking at geomatic.com.au  Mon Apr 19 18:55:58 2010
From: rsking at geomatic.com.au (King, Ross)
Date: Mon Apr 19 18:57:26 2010
Subject: [gdal-dev] MapInfo TAB append issue
In-Reply-To: <v2j762d0f641004190622i2dae16e9za430c86eaf806726@mail.gmail.com>
References: <v2j762d0f641004190622i2dae16e9za430c86eaf806726@mail.gmail.com>
Message-ID: <8F837D3045C0BB498F1D36BC270B1F4508062F5B@wsexch0001.geomatic.com.au.melb>

I'd say that's because OGR will use the drivers in order to 'guess'
which driver to use to open the directory. I thought that the MapInfo
driver was only read/write (ie no incremental update), so maybe it's
dismissing the "MapInfo File" declaration as it's not able to append?
You could try explicitly specifying the MapInfo file
'C:\Output\states.tab', rather than just using the directory.

Cheers

Ross

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Simon O'Keefe
Sent: Monday, 19 April 2010 11:22 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] MapInfo TAB append issue

Hi,

I'd like to report some unexpected behaviour from ogr2ogr
(FWTools2.4.7 in Windows 7) when attempting to append to a MapInfo TAB
file.

To recreate this issue, I first run the following to create a new
MapInfo table from a SHP file:
ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp

This successfully generates a MapInfo table at C:\Output\states.tab.

Now, I attempt to append the source data to the new table (not a
realistic example, I know):
ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp -append

What happens here is that, instead of appending to the MapInfo table,
it generates a new SHP file: C:\Output\states.shp.

I experience this behaviour whether the source is SHP or TAB. The
slightly dangerous element to this issue is that if the input and
output folders are the same, the source file (if it's SHP) gets
appended to itself.

Has anyone experienced this issue?

Cheers,

Simon
_______________________________________
Simon O'Keefe
Geospatial Systems Developer
Groundtruth Mapping Systems
Level 2, 140 Queen Street
Melbourne VIC 3000 Australia
phone:  +61 409 413 890
email:  simon.okeefe@groundtruth.com.au
web:    http://www.groundtruth.com.au
_______________________________________
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From fengyang05414 at qq.com  Tue Apr 20 01:22:18 2010
From: fengyang05414 at qq.com (=?gbk?B?t+vR8w==?=)
Date: Tue Apr 20 01:24:26 2010
Subject: [gdal-dev] how to add a unstandard tag
Message-ID: <tencent_4888A1683E9BBDA018CB4CE1@qq.com>

Hello everyone,
     i am new with gdal and i need someone help. now i want to create a new geotiff with GDALCreate(),then,i need to add some tags to geotiff,some of the tags such as createtime and createdate can add easily,but other information confused me very much. is there anyone who can teach me to add a tag that is not standard.thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100420/6b435753/attachment.html
From fengyang05414 at qq.com  Tue Apr 20 01:30:10 2010
From: fengyang05414 at qq.com (=?gbk?B?t+vR8w==?=)
Date: Tue Apr 20 01:30:17 2010
Subject: [gdal-dev] about create geotiff
Message-ID: <tencent_13F1983D1615C9BE12C13B68@qq.com>

hello everyone:
      i am new with gdal and very interested in it.now i want create a geotiff,including an image and much metadata such as create time,image format,image resource and so on.my codes are like this:
 GDALDataset *poDstDS;//创建数据集 
GDALAllRegister();
GDALDriver *poDriver;//创建驱动
poDriver=GetGDALDriverManager()->GetDriverByName("GTIFF");//驱动指向Gtiff
char **papszOptions = NULL;
char *pszDstFilename;
  int width=0;
 int height=0;
 int band=1;
 poDstDS = poDriver->Create( pszDstFilename, width,height,band,GDT_Byte, papszOptions ); 
   char *pszNewDesc="";
  poDstDS->SetDescription(pszNewDesc;
   poDstDS->SetMetadataItem(imageType,"",NULL);
  poDstDS->SetMetadataItem(imageId,"",NULL);
  poDstDS->SetMetadataItem(imageAddress,"",NULL);
 i know it must be wrong,in fact that is my destination.who can help me to realize the function.thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100420/307a3786/attachment.html
From jcurru at yahoo.es  Tue Apr 20 04:51:24 2010
From: jcurru at yahoo.es (jcurru)
Date: Tue Apr 20 04:51:27 2010
Subject: [gdal-dev] Compiling in Embarcadero's CBuilder
Message-ID: <1271753484502-4930084.post@n2.nabble.com>


Hello.

I'm trying to build gdal with Embarcadero's CBuilder++ 2010 (former Borland
C++ Builder).
I get this error in rasterio.cpp: 
[BCC32 Error] rasterio.cpp(869): E2335 Overloaded 'void
CopyWord<float>(const float,float &)' ambiguous in this context
  Full parser context
    rasterio.cpp(854): decision to instantiate: void void
GDALCopyWordsComplexT<float,float>(const float * const,int,float *
const,int,int)
    --- Resetting parser context for instantiation...
    rasterio.cpp(854): parsing: void void
GDALCopyWordsComplexT<float,float>(const float * const,int,float *
const,int,int)
Can anybody help me?
Thanks in advance
-- 
View this message in context: http://n2.nabble.com/Compiling-in-Embarcadero-s-CBuilder-tp4930084p4930084.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dmorissette at mapgears.com  Tue Apr 20 06:43:05 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Apr 20 06:43:09 2010
Subject: [gdal-dev] MapInfo TAB append issue
In-Reply-To: <8F837D3045C0BB498F1D36BC270B1F4508062F5B@wsexch0001.geomatic.com.au.melb>
References: <v2j762d0f641004190622i2dae16e9za430c86eaf806726@mail.gmail.com>
	<8F837D3045C0BB498F1D36BC270B1F4508062F5B@wsexch0001.geomatic.com.au.melb>
Message-ID: <4BCD8539.2040109@mapgears.com>

I can confirm that the MIF/TAB driver does not support append/update: it 
only supports read-only and write-only modes.

I'm not sure why OGR ends up writing a shapefile though. I would expect 
it to produce an error instead.

Daniel


King, Ross wrote:
> I'd say that's because OGR will use the drivers in order to 'guess'
> which driver to use to open the directory. I thought that the MapInfo
> driver was only read/write (ie no incremental update), so maybe it's
> dismissing the "MapInfo File" declaration as it's not able to append?
> You could try explicitly specifying the MapInfo file
> 'C:\Output\states.tab', rather than just using the directory.
> 
> Cheers
> 
> Ross
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Simon O'Keefe
> Sent: Monday, 19 April 2010 11:22 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] MapInfo TAB append issue
> 
> Hi,
> 
> I'd like to report some unexpected behaviour from ogr2ogr
> (FWTools2.4.7 in Windows 7) when attempting to append to a MapInfo TAB
> file.
> 
> To recreate this issue, I first run the following to create a new
> MapInfo table from a SHP file:
> ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp
> 
> This successfully generates a MapInfo table at C:\Output\states.tab.
> 
> Now, I attempt to append the source data to the new table (not a
> realistic example, I know):
> ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp -append
> 
> What happens here is that, instead of appending to the MapInfo table,
> it generates a new SHP file: C:\Output\states.shp.
> 
> I experience this behaviour whether the source is SHP or TAB. The
> slightly dangerous element to this issue is that if the input and
> output folders are the same, the source file (if it's SHP) gets
> appended to itself.
> 
> Has anyone experienced this issue?
> 
> Cheers,
> 
> Simon
> _______________________________________
> Simon O'Keefe
> Geospatial Systems Developer
> Groundtruth Mapping Systems
> Level 2, 140 Queen Street
> Melbourne VIC 3000 Australia
> phone:  +61 409 413 890
> email:  simon.okeefe@groundtruth.com.au
> web:    http://www.groundtruth.com.au
> _______________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
From fengyang05414 at qq.com  Tue Apr 20 06:48:16 2010
From: fengyang05414 at qq.com (=?gbk?B?t+vR8w==?=)
Date: Tue Apr 20 06:48:23 2010
Subject: [gdal-dev] about ReadAsArray
Message-ID: <tencent_1FDB8070537854F901CA209B@qq.com>

hi,everyone,
        now make use of the function"ReadAsArray",then error had happened,like this:
 D:\Program Files\Microsoft Visual Studio\MyProjects\test3\test.cpp(15) : error C2039: 'ReadAsArray' : is not a member of 'GDALDataset'
        c:\gdal\include\gdal_priv.h(195) : see declaration of 'GDALDataset'
  
         who may tell me how to use "ReadAsArray".thank you very much!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100420/3b7e29de/attachment-0001.html
From mbp at geomtech.com  Tue Apr 20 08:15:02 2010
From: mbp at geomtech.com (Mark Phillips)
Date: Tue Apr 20 08:15:05 2010
Subject: [gdal-dev] seeking suggestions for pixel arithemtic programs
Message-ID: <m2s6630cc0a1004200515pe5cae752j7235bf9f0a14f496@mail.gmail.com>

Hi,

I have a collection of MODIS imagery files (in Erdas Imagine .img  format),
and I need to to be able to derive new files from them, where the derived
file has the same format and metadata as the input files, but each pixel in
the derived file file is some arithmetic function of the corresponding
pixels in the input files.  For example,

  derived_file_pixel(i,j) = average of pixel(i,j) for each input file

I'd like to set up a system for creating these derived files that makes it
easy to change the particular function (for example, compute the sum instead
of the average, or compute a difference, or a weighted average, etc etc),
and easy to change the set of input files.

I poked around in the GDAL documentation and it looks like one way to do
this would be to use a VRT with a pixel function, but it looks like that
would involve writing a program, either in C or in python.  I can do that,
but ultimately I'd like to set things up so that my
non-programmer colleagues can change the pixel function and generate new
derived files without having to get me to write a new program.

So, I'm wondering if there's a command-line utility program that can be used
for doing this kind of thing, that allows the pixel function to be given as
parameter on the command.  Either a program that's part of GDAL itself, or
part of some other package that uses GDAL?  I'd appreciate any suggestions.

Also, if I do end up writing the program myself using GDAL, does the VRT +
pixel function approach I described sound like the best way?  I know enough
about GDAL to feel pretty sure that it'd be good for doing this kind of
thing, but I've never actually written a program using GDAL, so I'd
appreciate any pointers.

Thanks!

--Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100420/2e98c852/attachment.html
From warmerdam at pobox.com  Tue Apr 20 08:52:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 20 08:52:55 2010
Subject: [gdal-dev] how to add a unstandard tag
In-Reply-To: <tencent_4888A1683E9BBDA018CB4CE1@qq.com>
References: <tencent_4888A1683E9BBDA018CB4CE1@qq.com>
Message-ID: <4BCDA3A1.5050304@pobox.com>

=B7=EB=D1=F3 wrote:
> /Hello everyone,
> /    / i am new with gdal and i need someone help. now i want to create=
=20
> a new geotiff with GDALCreate(),then,i need to add some tags to=20
> geotiff,some of the tags such as createtime and createdate can add=20
> easily,but other information confused me very much. is there anyone who=
=20
> can teach me to add a tag that is not standard.thanks./

=B7=EB=D1=F3,

Generally speaking you cannot add tiff tags beyond those already
specifically supported by the GeoTIFF driver if you go through
GDAL.  It is possible to call GetInternalHandle() on the
GDALDataset object and it should return the "TIFF*" which you could
use to set your own tags if you don't mind calling down into the
TIFF API. This approach might be a bit fragile though.

Best regards,
--=20
---------------------------------------+---------------------------------=
-----
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox=
.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From philippe at cowpig.ca  Tue Apr 20 09:44:32 2010
From: philippe at cowpig.ca (Philippe Vachon)
Date: Tue Apr 20 10:16:21 2010
Subject: [gdal-dev] Compiling in Embarcadero's CBuilder
In-Reply-To: <1271753484502-4930084.post@n2.nabble.com>
References: <1271753484502-4930084.post@n2.nabble.com>
Message-ID: <D45C72C6-6DDB-4D33-A8D8-FE1D5A369542@cowpig.ca>

Hi,

I'll have a look at this issue -- I've never tried compiling the updated GDALCopyWords with C++Builder. If it isn't too much trouble, could you please file a ticket on GDAL's trac (http://trac.osgeo.org/gdal) and assign it to me (pvachon).

Thanks a lot!

Phil

On 2010-04-20, at 4:51 AM, jcurru wrote:

> 
> Hello.
> 
> I'm trying to build gdal with Embarcadero's CBuilder++ 2010 (former Borland
> C++ Builder).
> I get this error in rasterio.cpp: 
> [BCC32 Error] rasterio.cpp(869): E2335 Overloaded 'void
> CopyWord<float>(const float,float &)' ambiguous in this context
>  Full parser context
>    rasterio.cpp(854): decision to instantiate: void void
> GDALCopyWordsComplexT<float,float>(const float * const,int,float *
> const,int,int)
>    --- Resetting parser context for instantiation...
>    rasterio.cpp(854): parsing: void void
> GDALCopyWordsComplexT<float,float>(const float * const,int,float *
> const,int,int)
> Can anybody help me?
> Thanks in advance
> -- 
> View this message in context: http://n2.nabble.com/Compiling-in-Embarcadero-s-CBuilder-tp4930084p4930084.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Chris.Barker at noaa.gov  Tue Apr 20 12:34:15 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Apr 20 12:34:18 2010
Subject: [gdal-dev] seeking suggestions for pixel arithemtic programs
In-Reply-To: <m2s6630cc0a1004200515pe5cae752j7235bf9f0a14f496@mail.gmail.com>
References: <m2s6630cc0a1004200515pe5cae752j7235bf9f0a14f496@mail.gmail.com>
Message-ID: <4BCDD787.9050008@noaa.gov>

Mark Phillips wrote:
> the corresponding pixels in the input files.  For example,
> 
>   derived_file_pixel(i,j) = average of pixel(i,j) for each input file
> 
> I'd like to set up a system for creating these derived files that makes 
> it easy to change the particular function (for example, compute the sum 
> instead of the average, or compute a difference, or a weighted average, 
> etc etc), and easy to change the set of input files.
> 
> it looks like that 
> would involve writing a program, either in C or in python.  I can do 
> that, but ultimately I'd like to set things up so that my
> non-programmer colleagues can change the pixel function and generate new 
> derived files without having to get me to write a new program.

It would be pretty easy to write a python program that used a pixel 
function defined in its own file, so your colleagues would only have to 
make a new one of those and run it again -- and python is about as easy 
a way to express a function like that as any.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jgomezdans at gmail.com  Tue Apr 20 13:06:50 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Apr 20 13:06:54 2010
Subject: [gdal-dev] seeking suggestions for pixel arithemtic programs
In-Reply-To: <4BCDD787.9050008@noaa.gov>
References: <m2s6630cc0a1004200515pe5cae752j7235bf9f0a14f496@mail.gmail.com>
	<4BCDD787.9050008@noaa.gov>
Message-ID: <x2j91d218431004201006ja5780adcs236fb4cc1dfe1641@mail.gmail.com>

On 20 April 2010 17:34, Christopher Barker <Chris.Barker@noaa.gov> wrote:

> It would be pretty easy to write a python program that used a pixel
> function defined in its own file, so your colleagues would only have to make
> a new one of those and run it again -- and python is about as easy a way to
> express a function like that as any.
>

Seconded. In particular, with MODIS data, you need the ability to deal with
QA flags, and this would be quite messy with VRTs, whereas it is very easy
with python.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100420/de344008/attachment.html
From Chris.Barker at noaa.gov  Tue Apr 20 13:17:50 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Apr 20 13:17:53 2010
Subject: [gdal-dev] about ReadAsArray
In-Reply-To: <tencent_1FDB8070537854F901CA209B@qq.com>
References: <tencent_1FDB8070537854F901CA209B@qq.com>
Message-ID: <4BCDE1BE.1070002@noaa.gov>

冯洋 wrote:
> hi,everyone,
>        now make use of the function"ReadAsArray",then error had 
> happened,like this:
> D:\Program Files\Microsoft Visual Studio\MyProjects\test3\test.cpp(15) : 
> error C2039: 'ReadAsArray' : is not a member of 'GDALDataset'
>         c:\gdal\include\gdal_priv.h(195) : see declaration of 'GDALDataset'
>  
>         who may tell me how to use "ReadAsArray".thank you very much!

It looks like you are calling GDAL from C++ -- I think ReadAsArray is 
only a Python function, for getting a numpy array.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jcurru at yahoo.es  Tue Apr 20 16:34:35 2010
From: jcurru at yahoo.es (jcurru)
Date: Tue Apr 20 16:34:37 2010
Subject: [gdal-dev] Re: Compiling in Embarcadero's CBuilder
In-Reply-To: <D45C72C6-6DDB-4D33-A8D8-FE1D5A369542@cowpig.ca>
References: <1271753484502-4930084.post@n2.nabble.com>
	<D45C72C6-6DDB-4D33-A8D8-FE1D5A369542@cowpig.ca>
Message-ID: <1271795675158-4933551.post@n2.nabble.com>


Thanks for your answer, Philippe.
I could make rasterio.cpp compile by making the following change (line 38):

// For now, work around MSVC++ 6.0's broken template support. If this value
// is not defined, the old GDALCopyWords implementation is used.
#define USE_NEW_COPYWORDS 1
#endif
#undef USE_NEW_COPYWORDS // changed

I guess gdal will use some kind of former strategie to copy bytes.
I hope this will generate valid code.

But you are telling me to "file a ticket on GDAL's trac
(http://trac.osgeo.org/gdal) and assign it to me (pvachon)." Due to my poor
english and lack of experience in this forum, I unfortunately don't know
what you mean. Would you be so kind to explain it to me?

Thanks again.
-- 
View this message in context: http://n2.nabble.com/Compiling-in-Embarcadero-s-CBuilder-tp4930084p4933551.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From simon.okeefe at groundtruth.com.au  Tue Apr 20 19:09:08 2010
From: simon.okeefe at groundtruth.com.au (Simon O'Keefe)
Date: Tue Apr 20 19:15:57 2010
Subject: [gdal-dev] MapInfo TAB append issue
In-Reply-To: <8F837D3045C0BB498F1D36BC270B1F4508062F5B@wsexch0001.geomatic.com.au.melb>
References: <v2j762d0f641004190622i2dae16e9za430c86eaf806726@mail.gmail.com> 
	<8F837D3045C0BB498F1D36BC270B1F4508062F5B@wsexch0001.geomatic.com.au.melb>
Message-ID: <p2s762d0f641004201609ua358e137z90d7c4a95c9445e7@mail.gmail.com>

Thanks for your responses, Ross and Daniel.

Looks like appending TABs is out of the question.

I did some further testing but I can't recreate the exact issue I
described that would generate a new SHP file (I swear it did it when I
first wrote about it). It now just says "FAILURE: Unable to open
existing output datasource...", whether I specify a folder or file
name as the datasource.

Anyway, the issue still exists that if you attempt to append to a SHP
file to a TAB file that's in the same folder, the SHP file will append
itself to itself.

ogr2ogr -f "MapInfo file" C:\Temp C:\Temp\states.shp
ogr2ogr -f "MapInfo file" C:\Temp C:\Temp\states.shp -append

(If you instead specify the full ouput TAB path as the output
datasource, it will just result in the 'FAILURE' message above, and
the source SHP file remains safe.)

It could be a trap for some unsuspecting poor soul.

Cheers,

Simon


On 20 April 2010 08:55, King, Ross <rsking@geomatic.com.au> wrote:
> I'd say that's because OGR will use the drivers in order to 'guess'
> which driver to use to open the directory. I thought that the MapInfo
> driver was only read/write (ie no incremental update), so maybe it's
> dismissing the "MapInfo File" declaration as it's not able to append?
> You could try explicitly specifying the MapInfo file
> 'C:\Output\states.tab', rather than just using the directory.
>
> Cheers
>
> Ross
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Simon O'Keefe
> Sent: Monday, 19 April 2010 11:22 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] MapInfo TAB append issue
>
> Hi,
>
> I'd like to report some unexpected behaviour from ogr2ogr
> (FWTools2.4.7 in Windows 7) when attempting to append to a MapInfo TAB
> file.
>
> To recreate this issue, I first run the following to create a new
> MapInfo table from a SHP file:
> ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp
>
> This successfully generates a MapInfo table at C:\Output\states.tab.
>
> Now, I attempt to append the source data to the new table (not a
> realistic example, I know):
> ogr2ogr -f "MapInfo file" C:\Output C:\Input\states.shp -append
>
> What happens here is that, instead of appending to the MapInfo table,
> it generates a new SHP file: C:\Output\states.shp.
>
> I experience this behaviour whether the source is SHP or TAB. The
> slightly dangerous element to this issue is that if the input and
> output folders are the same, the source file (if it's SHP) gets
> appended to itself.
>
> Has anyone experienced this issue?
>
> Cheers,
>
> Simon
> _______________________________________
> Simon O'Keefe
> Geospatial Systems Developer
> Groundtruth Mapping Systems
> Level 2, 140 Queen Street
> Melbourne VIC 3000 Australia
> phone: ?+61 409 413 890
> email: ?simon.okeefe@groundtruth.com.au
> web: ? ?http://www.groundtruth.com.au
> _______________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Tue Apr 20 23:03:26 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 20 23:03:30 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
Message-ID: <4BCE6AFE.3090905@pobox.com>

Folks,

Today I updated the news file and prepared a 1.7.2 release candidate.  The
NEWS is available at:

   http://svn.osgeo.org/gdal/branches/1.7/gdal/NEWS

The source files are at:

   http://download.osgeo.org/gdal/gdal-1.7.2RC1.tar.gz
   http://download.osgeo.org/gdal/gdal172RC1.zip

I regenerated configure with a newer version of autoconf so please keep an
eye on possible negative effects that might have had.   Testing is encouraged.
I'll call for a vote to promote it to official release tomorrow I hope.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From peter.hopfgartner at r3-gis.com  Wed Apr 21 05:24:29 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Apr 21 06:24:35 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCE6AFE.3090905@pobox.com>
References: <4BCE6AFE.3090905@pobox.com>
Message-ID: <4BCEC44D.2090502@r3-gis.com>

Frank Warmerdam wrote:
> Folks,
>
> Today I updated the news file and prepared a 1.7.2 release candidate.  
> The
> NEWS is available at:
>
>   http://svn.osgeo.org/gdal/branches/1.7/gdal/NEWS
>
> The source files are at:
>
>   http://download.osgeo.org/gdal/gdal-1.7.2RC1.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC1.zip
>
> I regenerated configure with a newer version of autoconf so please 
> keep an
> eye on possible negative effects that might have had.   Testing is 
> encouraged.
> I'll call for a vote to promote it to official release tomorrow I hope.
>
> Best regards,
I seem to have problems in configures libdap version guess.

On a current CentOS 5.4, x86_64, with some packages taken from EPEL 
(http://fedoraproject.org/wiki/EPEL) and the attachen spec file, I come 
until the following error message.

g++ -O2 -g -pipe -Wall -fPIC -DPIC -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mtune=generic -Wall -I.. 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/port 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/gcore 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/alg 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/ogr 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/ogr/ogrsf_frmts 
-DOGR_ENABLED -I/usr/include/ogdi -I/usr/include/netcdf-3 
-I/usr/include/netcdf -I/usr/include/hdf -I/usr/include/libgeotiff 
-I/usr/include/libdap -DH5_USE_16_API 
-I/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/port 
-Iexternal/include -I/usr/include/netcdf-3 -I/usr/include/cfitsio 
-I/usr/include/cfitsio/include -I/usr/lib64/include 
-I/usr/lib64/include/libdap -I/usr/lib64/include/dap -DLIBDAP_39 -c 
ogrdodsdatasource.cpp  -fPIC -DPIC -o ../o/.libs/ogrdodsdatasource.o
ogrdodsdatasource.cpp: In member function 'int 
OGRDODSDataSource::Open(const char*)':
ogrdodsdatasource.cpp:197: error: 'class DAS' has no member named 
'container'
make[3]: *** [../o/ogrdodsdatasource.lo] Error 1
make[3]: Leaving directory 
`/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/ogr/ogrsf_frmts/dods'
make[2]: *** [dods-target] Error 2
make[2]: Leaving directory 
`/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory 
`/home/peter.hopfgartner/rpmbuild/BUILD/gdal-1.7.2-fedora/ogr'
make: *** [ogr-target] Error 2
error: Bad exit status from 
/home/peter.hopfgartner/rpmbuild/tmp/rpm-tmp.81239 (%build)

RPM build errors:
    Bad exit status from 
/home/peter.hopfgartner/rpmbuild/tmp/rpm-tmp.81239 (%build)


----

The installed libdap is libdap-3.7.8-1.el5.1, whereas it seems that 
./configure guesses 3.9 is installed, see attached config.log, where 
LIBDAP_39 gets defined.

Regards,

Peter

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535 

From istefan at stef.hu  Wed Apr 21 08:50:08 2010
From: istefan at stef.hu (=?ISO-8859-2?Q?=22ifj=2E_Stef=E1n_Istv=E1n=22?=)
Date: Wed Apr 21 08:56:55 2010
Subject: [gdal-dev] GDAL-GRASS compilation under Windows
Message-ID: <4BCEF480.70209@stef.hu>

Hello!

I'm new on this list, and hope the following question hasn't been asked 
before.
I need help to compile the GDAL-GRASS plugin under Windows environment.
I downloaded the source of GDAL and compiled it without GRASS support 
with Visual Studio successfully.
Next I downloaded the GDAL-GRASS plugin and tried to compile it, but 
this package doesn't contain Visual Studio project file, and I'm not 
familiar with VS too much, so I wasn't able to compile it. Then I 
installed Cygwin and tried to compile the GDAL-GRASS plugin under 
Cygwin, but the configure script complains about the gdal-config utility 
which I don't know where to find.

This is where I stand now, if someone know how to compile GDAL-GRASS 
under Win please help.

Thanks,
Istv?n





__________ ESET NOD32 Antivirus - V?rusdefin?ci?s adatb?zis: 5046 (20100421) __________

Az ?zenetet az ESET NOD32 Antivirus ellen?rizte.

http://www.eset.hu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: istefan.vcf
Type: text/x-vcard
Size: 226 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100421/bb4eeb4b/istefan.vcf
From ari.jolma at gmail.com  Wed Apr 21 09:00:25 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 21 09:00:30 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCE6AFE.3090905@pobox.com>
References: <4BCE6AFE.3090905@pobox.com>
Message-ID: <4BCEF6E9.10600@gmail.com>

Frank Warmerdam wrote:
> Folks,
>
> Today I updated the news file and prepared a 1.7.2 release candidate.  
> The
> NEWS is available at:
>
>   http://svn.osgeo.org/gdal/branches/1.7/gdal/NEWS
>
> The source files are at:
>
>   http://download.osgeo.org/gdal/gdal-1.7.2RC1.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC1.zip
>
> I regenerated configure with a newer version of autoconf so please 
> keep an
> eye on possible negative effects that might have had.   Testing is 
> encouraged.
> I'll call for a vote to promote it to official release tomorrow I hope.

On a RHEL x86_64 make dies very fast (after vanilla configure):

/home/ajolma/gdal-1.7.2/libtool: line 152: CDPATH: command not found
libtool: Version mismatch error.  This is libtool 2.1a, but the
libtool: definition of this LT_INIT comes from an older release.
libtool: You should recreate aclocal.m4 with macros from libtool 2.1a
libtool: and run autoconf again.

then...
sh autogen.sh
./configure
make

no problems

I'm no autotools guru, so can't immediately say what's the problem.

Same problem on a ubuntu i686, except that the sh autogen.sh does not 
fix the problem but reports issues (see below)

Ari

>
> Best regards,


ajolma@ubu:~/gdal-1.7.2$ sh autogen.sh
+ aclocal -I ./m4
configure.in:56: warning: 
AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, ), ...): suspicious 
cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2018: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2039: AC_CACHE_CHECK is expanded from...
m4/libtool.m4:1261: _LT_COMPILER_OPTION is expanded from...
m4/libtool.m4:3377: _LT_COMPILER_PIC is expanded from...
m4/libtool.m4:5077: _LT_LANG_C_CONFIG is expanded from...
m4/libtool.m4:122: _LT_SETUP is expanded from...
m4/libtool.m4:56: LT_INIT is expanded from...
m4/libtool.m4:86: AC_PROG_LIBTOOL is expanded from...
configure.in:56: the top level
configure.in:56: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, 
...): suspicious cache-id, must contain _cv_ to be cached
m4/libtool.m4:1313: _LT_LINKER_OPTION is expanded from...
configure.in:56: warning: 
AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, CXX), ...): 
suspicious cache-id, must contain _cv_ to be cached
m4/libtool.m4:5184: _LT_LANG_CXX_CONFIG is expanded from...
m4/libtool.m4:771: _LT_LANG is expanded from...
m4/libtool.m4:754: LT_LANG is expanded from...
m4/libtool.m4:782: _LT_LANG_DEFAULT_CONFIG is expanded from...
configure.in:56: warning: 
AC_CACHE_VAL(lt_prog_compiler_static_works_CXX, ...): suspicious 
cache-id, must contain _cv_ to be cached
+ autoconf
configure.in:56: warning: 
AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, ), ...): suspicious 
cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2018: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2039: AC_CACHE_CHECK is expanded from...
m4/libtool.m4:1261: _LT_COMPILER_OPTION is expanded from...
m4/libtool.m4:3377: _LT_COMPILER_PIC is expanded from...
m4/libtool.m4:5077: _LT_LANG_C_CONFIG is expanded from...
m4/libtool.m4:122: _LT_SETUP is expanded from...
m4/libtool.m4:56: LT_INIT is expanded from...
m4/libtool.m4:86: AC_PROG_LIBTOOL is expanded from...
configure.in:56: the top level
configure.in:56: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, 
...): suspicious cache-id, must contain _cv_ to be cached
m4/libtool.m4:1313: _LT_LINKER_OPTION is expanded from...
configure.in:56: warning: 
AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, CXX), ...): 
suspicious cache-id, must contain _cv_ to be cached
m4/libtool.m4:5184: _LT_LANG_CXX_CONFIG is expanded from...
m4/libtool.m4:771: _LT_LANG is expanded from...
m4/libtool.m4:754: LT_LANG is expanded from...
m4/libtool.m4:782: _LT_LANG_DEFAULT_CONFIG is expanded from...
configure.in:56: warning: 
AC_CACHE_VAL(lt_prog_compiler_static_works_CXX, ...): suspicious 
cache-id, must contain _cv_ to be cached

From ari.jolma at gmail.com  Wed Apr 21 09:04:10 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 21 09:04:18 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCE6AFE.3090905@pobox.com>
References: <4BCE6AFE.3090905@pobox.com>
Message-ID: <4BCEF7CA.90909@gmail.com>

Frank Warmerdam wrote:
> Folks,
>
> Today I updated the news file and prepared a 1.7.2 release candidate.  
> The
> NEWS is available at:
>
>   http://svn.osgeo.org/gdal/branches/1.7/gdal/NEWS
>
> The source files are at:
>
>   http://download.osgeo.org/gdal/gdal-1.7.2RC1.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC1.zip
>
> I regenerated configure with a newer version of autoconf so please 
> keep an
> eye on possible negative effects that might have had.   Testing is 
> encouraged.

Also on RHEL 64: configure finds libexpat but make tries to use 32 bit 
libexpat and not libexpat from /usr/lib64 --- I thought this was fixed 
already(?).

Ari

> I'll call for a vote to promote it to official release tomorrow I hope.
>
> Best regards,

From kmichael.aye at gmail.com  Wed Apr 21 09:40:35 2010
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Wed Apr 21 09:40:52 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
	<4BCCA079.5010201@noaa.gov>
	<7D575ABB-A973-42D9-81ED-1A984FBE2A87@kyngchaos.com>
Message-ID: <hqmv8j$sf7$1@dough.gmane.org>

On 2010-04-19 20:54:57 +0200, William Kyngesburye said:

> On Apr 19, 2010, at 1:27 PM, Christopher Barker wrote:
> 
>> William Kyngesburye wrote:
>> 
>>> If you need to use GDAL with some other python module that uses
>>> numpy, in the same script, or in the same session, this could still
>>> be a problem.
>> 
>> yup -- that simply won't work
>> 
>>> maybe importing the other module before gdal would
>>> work.
>> 
>> I don't think that will work either, unless you are right, and GDALonly 
>> uses the Python API -- I don't think that's the case, though--don't you 
>> need numpy to compile the GDAL bindings?
> 
> It was a guess, you'd expect it to use the python API as the 
> mostcompatible method.  But it looks like Michael's experience points 
> to itusing the C API (maybe that's normal for numpy?).
> 
> I see that gdal_array_wrap includes the numpy header, so that seems 
> toindicate using C.  Building GDAL is pretty much a mindless task for 
> menow, and I don't think about the details much any more ;)

Hm, if it's really that mindless of a task now, could you not build a 
GDAL for numpy 1.4.0, pretty please? :)
Or would we have other problems then, due to this ABI break (which, I 
confess, i totally not understand).



From woklist at kyngchaos.com  Wed Apr 21 10:22:37 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Apr 21 10:22:41 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <hqmv8j$sf7$1@dough.gmane.org>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
	<4BCCA079.5010201@noaa.gov>
	<7D575ABB-A973-42D9-81ED-1A984FBE2A87@kyngchaos.com>
	<hqmv8j$sf7$1@dough.gmane.org>
Message-ID: <ADDA968E-FAEC-4AF8-A398-2AA9E2D57FB5@kyngchaos.com>

On Apr 21, 2010, at 8:40 AM, K.-Michael Aye wrote:

> Hm, if it's really that mindless of a task now, could you not build a GDAL for numpy 1.4.0, pretty please? :)
> Or would we have other problems then, due to this ABI break (which, I confess, i totally not understand).

If I did, it would be 1.4.1RC, not 1.4.0, because officially 1.4.0 does not exist any more because of the ABI problem.  There wouldn't be any problems within the Enthought python environment, but anyone using numpy from my GDAL, or a different numpy with my GDAL, in other Python distributions would then run into the ABI problem.

The problem is in Enthought's python, for using the retracted numpy, and they need to update their numpy (which could be a while if they don't want to use RC versions).  I'm afraid I can't support using numpy 1.4.0.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From peter.hopfgartner at r3-gis.com  Wed Apr 21 11:43:19 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Apr 21 11:43:27 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCEF6E9.10600@gmail.com>
References: <4BCE6AFE.3090905@pobox.com> <4BCEF6E9.10600@gmail.com>
Message-ID: <4BCF1D17.5010508@r3-gis.com>

Ari Jolma wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> Today I updated the news file and prepared a 1.7.2 release 
>> candidate.  The
>> NEWS is available at:
>>
>>   http://svn.osgeo.org/gdal/branches/1.7/gdal/NEWS
>>
>> The source files are at:
>>
>>   http://download.osgeo.org/gdal/gdal-1.7.2RC1.tar.gz
>>   http://download.osgeo.org/gdal/gdal172RC1.zip
>>
>> I regenerated configure with a newer version of autoconf so please 
>> keep an
>> eye on possible negative effects that might have had.   Testing is 
>> encouraged.
>> I'll call for a vote to promote it to official release tomorrow I hope.
>
> On a RHEL x86_64 make dies very fast (after vanilla configure):
>
> /home/ajolma/gdal-1.7.2/libtool: line 152: CDPATH: command not found
> libtool: Version mismatch error.  This is libtool 2.1a, but the
> libtool: definition of this LT_INIT comes from an older release.
> libtool: You should recreate aclocal.m4 with macros from libtool 2.1a
> libtool: and run autoconf again.
>
> then...
> sh autogen.sh
> ./configure
> make
>
> no problems
>
> I'm no autotools guru, so can't immediately say what's the problem.
>
> Same problem on a ubuntu i686, except that the sh autogen.sh does not 
> fix the problem but reports issues (see below)
>
> Ari
>
>>
>> Best regards,
>
>
> ajolma@ubu:~/gdal-1.7.2$ sh autogen.sh
> + aclocal -I ./m4
> configure.in:56: warning: 
> AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, ), ...): 
> suspicious cache-id, must contain _cv_ to be cached
> ../../lib/autoconf/general.m4:2018: AC_CACHE_VAL is expanded from...
> ../../lib/autoconf/general.m4:2039: AC_CACHE_CHECK is expanded from...
> m4/libtool.m4:1261: _LT_COMPILER_OPTION is expanded from...
> m4/libtool.m4:3377: _LT_COMPILER_PIC is expanded from...
> m4/libtool.m4:5077: _LT_LANG_C_CONFIG is expanded from...
> m4/libtool.m4:122: _LT_SETUP is expanded from...
> m4/libtool.m4:56: LT_INIT is expanded from...
> m4/libtool.m4:86: AC_PROG_LIBTOOL is expanded from...
> configure.in:56: the top level
> configure.in:56: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, 
> ...): suspicious cache-id, must contain _cv_ to be cached
> m4/libtool.m4:1313: _LT_LINKER_OPTION is expanded from...
> configure.in:56: warning: 
> AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, CXX), ...): 
> suspicious cache-id, must contain _cv_ to be cached
> m4/libtool.m4:5184: _LT_LANG_CXX_CONFIG is expanded from...
> m4/libtool.m4:771: _LT_LANG is expanded from...
> m4/libtool.m4:754: LT_LANG is expanded from...
> m4/libtool.m4:782: _LT_LANG_DEFAULT_CONFIG is expanded from...
> configure.in:56: warning: 
> AC_CACHE_VAL(lt_prog_compiler_static_works_CXX, ...): suspicious 
> cache-id, must contain _cv_ to be cached
> + autoconf
> configure.in:56: warning: 
> AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, ), ...): 
> suspicious cache-id, must contain _cv_ to be cached
> ../../lib/autoconf/general.m4:2018: AC_CACHE_VAL is expanded from...
> ../../lib/autoconf/general.m4:2039: AC_CACHE_CHECK is expanded from...
> m4/libtool.m4:1261: _LT_COMPILER_OPTION is expanded from...
> m4/libtool.m4:3377: _LT_COMPILER_PIC is expanded from...
> m4/libtool.m4:5077: _LT_LANG_C_CONFIG is expanded from...
> m4/libtool.m4:122: _LT_SETUP is expanded from...
> m4/libtool.m4:56: LT_INIT is expanded from...
> m4/libtool.m4:86: AC_PROG_LIBTOOL is expanded from...
> configure.in:56: the top level
> configure.in:56: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, 
> ...): suspicious cache-id, must contain _cv_ to be cached
> m4/libtool.m4:1313: _LT_LINKER_OPTION is expanded from...
> configure.in:56: warning: 
> AC_CACHE_VAL(_LT_TAGVAR(lt_prog_compiler_pic_works, CXX), ...): 
> suspicious cache-id, must contain _cv_ to be cached
> m4/libtool.m4:5184: _LT_LANG_CXX_CONFIG is expanded from...
> m4/libtool.m4:771: _LT_LANG is expanded from...
> m4/libtool.m4:754: LT_LANG is expanded from...
> m4/libtool.m4:782: _LT_LANG_DEFAULT_CONFIG is expanded from...
> configure.in:56: warning: 
> AC_CACHE_VAL(lt_prog_compiler_static_works_CXX, ...): suspicious 
> cache-id, must contain _cv_ to be cached
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
Could you try with ./configure --without-libtool ?

Peter

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535 

From Chris.Barker at noaa.gov  Wed Apr 21 12:17:35 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Apr 21 12:17:40 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <ADDA968E-FAEC-4AF8-A398-2AA9E2D57FB5@kyngchaos.com>
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
	<4BCCA079.5010201@noaa.gov>
	<7D575ABB-A973-42D9-81ED-1A984FBE2A87@kyngchaos.com>
	<hqmv8j$sf7$1@dough.gmane.org>
	<ADDA968E-FAEC-4AF8-A398-2AA9E2D57FB5@kyngchaos.com>
Message-ID: <4BCF251F.2050903@noaa.gov>

William Kyngesburye wrote:
> The problem is in Enthought's python, for using the retracted numpy, and they need to update their numpy (which could be a while if they don't want to use RC versions).  I'm afraid I can't support using numpy 1.4.0.

Maybe you can follow: http://www.kyngchaos.com/macosx/build/gdal and do 
it yourself. I assume you could use all the other Framework binaries for 
the dependencies.

In fact, you may be able to re-build only the python bindings, and that 
be as simple as running "python setup.py build", once you've made sure 
that you've got your python using the right numpy.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ari.jolma at gmail.com  Wed Apr 21 12:23:12 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 21 12:23:17 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCF1D17.5010508@r3-gis.com>
References: <4BCE6AFE.3090905@pobox.com> <4BCEF6E9.10600@gmail.com>
	<4BCF1D17.5010508@r3-gis.com>
Message-ID: <4BCF2670.5050901@gmail.com>

Peter Hopfgartner wrote:
>>
> Could you try with ./configure --without-libtool ?

I'm sure it is possible to hack the build until it goes through but 
that's not the point. I build GDAL on many platforms and libtool is the 
tool to make that easy. I've tried the --without-libtool a few times 
before and I don't want to go that route again.

Best regards,

Ari

>
> Peter
>

From woklist at kyngchaos.com  Wed Apr 21 13:40:45 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Apr 21 13:40:49 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCF2670.5050901@gmail.com>
References: <4BCE6AFE.3090905@pobox.com> <4BCEF6E9.10600@gmail.com>
	<4BCF1D17.5010508@r3-gis.com> <4BCF2670.5050901@gmail.com>
Message-ID: <A439F8DB-F137-4AE4-A8C6-4DCC74945493@kyngchaos.com>

I agree, not an option.  libtool is the only usable build method on OS X.  (I get the CDPATH error on OS X)

On Apr 21, 2010, at 11:23 AM, Ari Jolma wrote:

> Peter Hopfgartner wrote:
>>> 
>> Could you try with ./configure --without-libtool ?
> 
> I'm sure it is possible to hack the build until it goes through but that's not the point. I build GDAL on many platforms and libtool is the tool to make that easy. I've tried the --without-libtool a few times before and I don't want to go that route again.
> 
> Best regards,
> 
> Ari
> 
>> 
>> Peter
>> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From even.rouault at mines-paris.org  Wed Apr 21 14:23:49 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 21 14:24:02 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2 Release Candidate
In-Reply-To: <4BCEF7CA.90909@gmail.com>
References: <4BCE6AFE.3090905@pobox.com> <4BCEF7CA.90909@gmail.com>
Message-ID: <201004212023.51320.even.rouault@mines-paris.org>

Le Wednesday 21 April 2010 15:04:10 Ari Jolma, vous avez ?crit?:
>
> Also on RHEL 64: configure finds libexpat but make tries to use 32 bit
> libexpat and not libexpat from /usr/lib64 --- I thought this was fixed
> already(?).
>

Ari,

It was fixed in trunk only. As it wasn't a fix for a regression, I didn't dare 
backporting into 1.7 branch at that point. See 
http://trac.osgeo.org/gdal/ticket/3411. 

So unrelated with the change of autoconf version
From kmichael.aye at gmail.com  Wed Apr 21 17:38:33 2010
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Wed Apr 21 17:38:48 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
References: <hqhn5d$h38$1@dough.gmane.org>
	<34641972-DE59-4BD3-BA54-505D5E36AEC8@kyngchaos.com>
	<hqi3im$71a$1@dough.gmane.org>
	<E24F0D9E-CEDB-45F7-9125-BC042EAD26F9@kyngchaos.com>
	<4BCCA079.5010201@noaa.gov>
	<7D575ABB-A973-42D9-81ED-1A984FBE2A87@kyngchaos.com>
	<hqmv8j$sf7$1@dough.gmane.org>
	<ADDA968E-FAEC-4AF8-A398-2AA9E2D57FB5@kyngchaos.com>
	<4BCF251F.2050903@noaa.gov>
Message-ID: <hqnr8p$h60$1@dough.gmane.org>

On 2010-04-21 18:17:35 +0200, Christopher Barker said:

> William Kyngesburye wrote:
>> The problem is in Enthought's python, for using the retracted numpy, 
>> and they need to update their numpy (which could be a while if they 
>> don't want to use RC versions).  I'm afraid I can't support using numpy 
>> 1.4.0.
> 
> Maybe you can follow: http://www.kyngchaos.com/macosx/build/gdal and do 
> it yourself. I assume you could use all the other Framework binaries 
> for the dependencies.
> 
> In fact, you may be able to re-build only the python bindings, and that 
> be as simple as running "python setup.py build", once you've made sure 
> that you've got your python using the right numpy.
> 
> -Chris

Oh, that indeed sounds not too bad, I didn't expect the other binaries 
would come with everything that is required for a building process 
'upstream'. So you think, only a rebuild of GDAL module itself might 
work? Will try that and let forum know. Thanks for the tip!

-- 
Michael


From jcurru at yahoo.es  Wed Apr 21 17:39:07 2010
From: jcurru at yahoo.es (jcurru)
Date: Wed Apr 21 17:39:11 2010
Subject: [gdal-dev] Learning GDAL
Message-ID: <1271885947887-4939613.post@n2.nabble.com>


Hi.
I'm new to GDAL, but supposed to have some experience in C++.
I'm trying to use GDAL in my project because CxImage, the image library I
was using so far, is not able to deal with big images.
After several days fighting against my compiler I could finally build
gdal.lib (I'm using Builder C++, supposed not to be supported by GDAL).
Now I'd like to start working with GDAL, but I can't find a start point. My
first aim is to build a pyramid of tiles in a special format (no GeoTiff or
ECW tiles, for example, but one I have designed to work with OpenGL). I'd
like to be able to load arbitrary tiles from a tiff image (and then convert
them to my format), but the only think I have found is that I have to work
with "bands". Well, I guess a band is something like a channel (R, G, B,
Alpha...) but what I need are RGB tiles.
As you can see, I'm slightly lost.
So, could anybody tell me the way to learn about GDAL? I've been googling
around but I can't find anything.
Thanks a lot for your help!
-- 
View this message in context: http://n2.nabble.com/Learning-GDAL-tp4939613p4939613.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Apr 21 17:47:19 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 21 17:47:33 2010
Subject: [gdal-dev] Learning GDAL
In-Reply-To: <1271885947887-4939613.post@n2.nabble.com>
References: <1271885947887-4939613.post@n2.nabble.com>
Message-ID: <201004212347.21485.even.rouault@mines-paris.org>

You have lots of ressources here:
* http://gdal.org
* http://trac.osgeo.org/gdal

To answer more directly your questions :
* Yes, R,G,B channels are considered as bands in GDAL model.
* You can read several band at a times with the GDALDataset::RasterIO() call. 
See http://gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743

Le Wednesday 21 April 2010 23:39:07 jcurru, vous avez ?crit?:
> Hi.
> I'm new to GDAL, but supposed to have some experience in C++.
> I'm trying to use GDAL in my project because CxImage, the image library I
> was using so far, is not able to deal with big images.
> After several days fighting against my compiler I could finally build
> gdal.lib (I'm using Builder C++, supposed not to be supported by GDAL).
> Now I'd like to start working with GDAL, but I can't find a start point. My
> first aim is to build a pyramid of tiles in a special format (no GeoTiff or
> ECW tiles, for example, but one I have designed to work with OpenGL). I'd
> like to be able to load arbitrary tiles from a tiff image (and then convert
> them to my format), but the only think I have found is that I have to work
> with "bands". Well, I guess a band is something like a channel (R, G, B,
> Alpha...) but what I need are RGB tiles.
> As you can see, I'm slightly lost.
> So, could anybody tell me the way to learn about GDAL? I've been googling
> around but I can't find anything.
> Thanks a lot for your help!


From Chris.Barker at noaa.gov  Wed Apr 21 19:29:39 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Apr 21 19:29:41 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
Message-ID: <4BCF8A63.40500@noaa.gov>

William,

I couldn't see a place to report this on your site, to I'm reporting it 
here. The 1.7 GDAL build doesn't seem to support the OGDI drivers, 
whereas the 1.6 build does.

I'm using ORG to read the VPF, as used by the NGA digital nautical 
charts. Note:

$ /Library/Frameworks/GDAL.framework/Versions/1.6/Programs/ogrinfo 
gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880

yields:

ERROR 4: OGDI Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
       using driver `OGDI' successful.
1: buildngp@cul(*)_point (Point)
2: commp@cul(*)_point (Point)
....

Whereas:

$ /Library/Frameworks/GDAL.framework/Versions/1.7/Programs/ogrinfo 
gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880

yields:

FAILURE:
Unable to open datasource `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880' 
with the following drivers.
   -> ESRI Shapefile
...
   -> OGDI
...


So OGDI is in the list, but it doesn't work.

Note that I'm having trouble getting this to work with my own build, 
too, so it may be a GDAL/OGR/OGDI issue, rather than an issue with your 
Framework builds.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From harsh.govind at spadac.com  Wed Apr 21 19:36:36 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Wed Apr 21 19:39:28 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
In-Reply-To: <4BCF8A63.40500@noaa.gov>
References: <4BCF8A63.40500@noaa.gov>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817EED53D73@SPATCEX003.spadac.com>

I am using OGDI with 1.7.1 and everything looks good. I compile OGDI and then change nmake.opt in GDAL to point to that lib. Which version of OGDI are you compiling? Also, this is on windows.


Regards,
Harsh Govind

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christopher Barker [Chris.Barker@noaa.gov]
Sent: Wednesday, April 21, 2010 07:29 PM
To: woklist@kyngchaos.com; gdal-dev
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI

William,

I couldn't see a place to report this on your site, to I'm reporting it
here. The 1.7 GDAL build doesn't seem to support the OGDI drivers,
whereas the 1.6 build does.

I'm using ORG to read the VPF, as used by the NGA digital nautical
charts. Note:

$ /Library/Frameworks/GDAL.framework/Versions/1.6/Programs/ogrinfo
gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880

yields:

ERROR 4: OGDI Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
       using driver `OGDI' successful.
1: buildngp@cul(*)_point (Point)
2: commp@cul(*)_point (Point)
....

Whereas:

$ /Library/Frameworks/GDAL.framework/Versions/1.7/Programs/ogrinfo
gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880

yields:

FAILURE:
Unable to open datasource `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
with the following drivers.
   -> ESRI Shapefile
...
   -> OGDI
...


So OGDI is in the list, but it doesn't work.

Note that I'm having trouble getting this to work with my own build,
too, so it may be a GDAL/OGR/OGDI issue, rather than an issue with your
Framework builds.

-Chris



--
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Apr 21 19:44:11 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 21 19:44:28 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
In-Reply-To: <4BCF8A63.40500@noaa.gov>
References: <4BCF8A63.40500@noaa.gov>
Message-ID: <201004220144.13313.even.rouault@mines-paris.org>

Christopher,

There were 2 meaningful changes mades in the OGR OGDI driver during GDAL 1.7 
development (http://trac.osgeo.org/gdal/changeset/18499 and 
http://trac.osgeo.org/gdal/changeset/18502)

Could you try downloading and unzipping
http://freefr.dl.sourceforge.net/project/ogdi/OGDI_Test_Suite/3.1/ogdits-3.1.0.zip

then try :

ogrinfo -ro gltp:/vrf/path/to/ogdits-3.1/data/vpf/vm2alv2/texash

This is supposed to work (tested in GDAL autotest suite)

If it doesn't, then I'd suppose it is an issue with the OGDI library in the 
framework.
It it works with that dataset, then perhaps this is due to one of the above 
changes in the driver that wouldn't work with DNC datasets, but I'm very 
skeptical as the changes only affect the layer object whereas your error 
would tend to think that the driver doesn't even go to the point of creating 
any layer.

Best regards,

Even

Le Thursday 22 April 2010 01:29:39 Christopher Barker, vous avez ?crit?:
> William,
>
> I couldn't see a place to report this on your site, to I'm reporting it
> here. The 1.7 GDAL build doesn't seem to support the OGDI drivers,
> whereas the 1.6 build does.
>
> I'm using ORG to read the VPF, as used by the NGA digital nautical
> charts. Note:
>
> $ /Library/Frameworks/GDAL.framework/Versions/1.6/Programs/ogrinfo
> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>
> yields:
>
> ERROR 4: OGDI Driver doesn't support update.
> Had to open data source read-only.
> INFO: Open of `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
>        using driver `OGDI' successful.
> 1: buildngp@cul(*)_point (Point)
> 2: commp@cul(*)_point (Point)
> ....
>
> Whereas:
>
> $ /Library/Frameworks/GDAL.framework/Versions/1.7/Programs/ogrinfo
> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>
> yields:
>
> FAILURE:
> Unable to open datasource `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
> with the following drivers.
>    -> ESRI Shapefile
> ...
>    -> OGDI
> ...
>
>
> So OGDI is in the list, but it doesn't work.
>
> Note that I'm having trouble getting this to work with my own build,
> too, so it may be a GDAL/OGR/OGDI issue, rather than an issue with your
> Framework builds.
>
> -Chris


From woklist at kyngchaos.com  Wed Apr 21 20:58:35 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Apr 21 20:58:39 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
In-Reply-To: <201004220144.13313.even.rouault@mines-paris.org>
References: <4BCF8A63.40500@noaa.gov>
	<201004220144.13313.even.rouault@mines-paris.org>
Message-ID: <3B0F78F2-851C-4A0C-9DCA-813A8F20AB56@kyngchaos.com>

The test dataset works for me with my 1.7.1-1 release builds, on both Leopard and Snow.

Do you have a quick link for that NGA data?

On Apr 21, 2010, at 6:44 PM, Even Rouault wrote:

> Christopher,
> 
> There were 2 meaningful changes mades in the OGR OGDI driver during GDAL 1.7 
> development (http://trac.osgeo.org/gdal/changeset/18499 and 
> http://trac.osgeo.org/gdal/changeset/18502)
> 
> Could you try downloading and unzipping
> http://freefr.dl.sourceforge.net/project/ogdi/OGDI_Test_Suite/3.1/ogdits-3.1.0.zip
> 
> then try :
> 
> ogrinfo -ro gltp:/vrf/path/to/ogdits-3.1/data/vpf/vm2alv2/texash
> 
> This is supposed to work (tested in GDAL autotest suite)
> 
> If it doesn't, then I'd suppose it is an issue with the OGDI library in the 
> framework.
> It it works with that dataset, then perhaps this is due to one of the above 
> changes in the driver that wouldn't work with DNC datasets, but I'm very 
> skeptical as the changes only affect the layer object whereas your error 
> would tend to think that the driver doesn't even go to the point of creating 
> any layer.
> 
> Best regards,
> 
> Even
> 
> Le Thursday 22 April 2010 01:29:39 Christopher Barker, vous avez ?crit :
>> William,
>> 
>> I couldn't see a place to report this on your site, to I'm reporting it
>> here. The 1.7 GDAL build doesn't seem to support the OGDI drivers,
>> whereas the 1.6 build does.
>> 
>> I'm using ORG to read the VPF, as used by the NGA digital nautical
>> charts. Note:
>> 
>> $ /Library/Frameworks/GDAL.framework/Versions/1.6/Programs/ogrinfo
>> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>> 
>> yields:
>> 
>> ERROR 4: OGDI Driver doesn't support update.
>> Had to open data source read-only.
>> INFO: Open of `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
>>       using driver `OGDI' successful.
>> 1: buildngp@cul(*)_point (Point)
>> 2: commp@cul(*)_point (Point)
>> ....
>> 
>> Whereas:
>> 
>> $ /Library/Frameworks/GDAL.framework/Versions/1.7/Programs/ogrinfo
>> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>> 
>> yields:
>> 
>> FAILURE:
>> Unable to open datasource `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
>> with the following drivers.
>>   -> ESRI Shapefile
>> ...
>>   -> OGDI
>> ...
>> 
>> 
>> So OGDI is in the list, but it doesn't work.
>> 
>> Note that I'm having trouble getting this to work with my own build,
>> too, so it may be a GDAL/OGR/OGDI issue, rather than an issue with your
>> Framework builds.
>> 
>> -Chris
> 
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From philippe at cowpig.ca  Wed Apr 21 22:02:04 2010
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Apr 21 22:02:14 2010
Subject: [gdal-dev] Re: Compiling in Embarcadero's CBuilder
In-Reply-To: <1271795675158-4933551.post@n2.nabble.com>
References: <1271753484502-4930084.post@n2.nabble.com>
	<D45C72C6-6DDB-4D33-A8D8-FE1D5A369542@cowpig.ca>
	<1271795675158-4933551.post@n2.nabble.com>
Message-ID: <AAAE43CC-3B77-4C51-88E4-6E9800BC556C@cowpig.ca>

Hi,

I've committed a fix (r19493) that will disable the use of the new GDALCopyWords implementation. The old and new implementations are functionally equivalent, but the new implementation is in some cases 5-10x faster than the old implementation. However, there is no problem with disabling it and affecting the functionality of GDAL.

For future reference, if you hit a bug in GDAL, one of the best ways to get developer attention is to file a bug report on the GDAL Trac website (http://trac.osgeo.org/gdal/newticket), but this first requires creating an OSGeo account at http://www.osgeo.org/osgeo_userid.

Cheers,
Philippe


On 2010-04-20, at 4:34 PM, jcurru wrote:

> 
> Thanks for your answer, Philippe.
> I could make rasterio.cpp compile by making the following change (line 38):
> 
> // For now, work around MSVC++ 6.0's broken template support. If this value
> // is not defined, the old GDALCopyWords implementation is used.
> #define USE_NEW_COPYWORDS 1
> #endif
> #undef USE_NEW_COPYWORDS // changed
> 
> I guess gdal will use some kind of former strategie to copy bytes.
> I hope this will generate valid code.
> 
> But you are telling me to "file a ticket on GDAL's trac
> (http://trac.osgeo.org/gdal) and assign it to me (pvachon)." Due to my poor
> english and lack of experience in this forum, I unfortunately don't know
> what you mean. Would you be so kind to explain it to me?
> 
> Thanks again.
> -- 
> View this message in context: http://n2.nabble.com/Compiling-in-Embarcadero-s-CBuilder-tp4930084p4933551.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Alexander.Plum at cae.de  Thu Apr 22 08:15:51 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Thu Apr 22 08:16:02 2010
Subject: [gdal-dev] Question how to use OGRLayerH
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805AB5FF2E0@sdestex2>

Hello there,

I want to use the GDAL-function 'GDALContourGenerate'  to construct highlines. 

Furthermore I make use of the OGRLayerH which should save the the vector-data-output (the result) of the function called above. 

I've read the OGR API Tutorial page (http://www.gdal.org/ogr/ogr_apitut.html) und understood its content. 
But in my case the Layer shall save one vector with the different height values.
For every height value there should exist one ring representing a highline. The rings should also be written into another vector.
On top of that for every ring there has to be a vector (or let's say a matrix containing two vectors) with x- and y- values for certain positions of the ring.


                           ring 1------ > x1 y1
                           ring 2            x2 y2
                           ring 3            ...
                           ...                  xN yN
0,0 m -----------> ring N
2,5 m
5,0 m
7,5 m
10, m
12,5 m   
...
500,0 m               


So all in all I need three vectors saving the result of 'GDALContourGenerate'-function.

My problem is that I do not know how to employ this OGRLayer. Please correct me, if this is a wrong way to use the'GDALContourGenerate'-function.

Greetings,
Alexander Plum
-- 
This email was Anti Virus checked by CAE
From chaitanya.ch at gmail.com  Thu Apr 22 09:07:34 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 22 09:07:37 2010
Subject: [gdal-dev] Question how to use OGRLayerH
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E090805AB5FF2E0@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090805AB5FF2E0@sdestex2>
Message-ID: <s2ueb502d881004220607g30b28e6ejb950a03baaa008@mail.gmail.com>

Alexander,

I didn't understand your requirements correctly I think PostGIS can help you
with the aggregation with just a few SQL commands. If you want to do it
programmatically, you have to loop through the layer's features and add up
all the linestrings into a multilinestring according to your criteria.

FYI, The function GDALContourGenerate stores the contours as linestrings
containing XYZ points. The elevation in stored in 'Z' whether or not it
stored in a field.

On Thu, Apr 22, 2010 at 5:45 PM, Alexander Plum <Alexander.Plum@cae.de>wrote:

> Hello there,
>
> I want to use the GDAL-function 'GDALContourGenerate'  to construct
> highlines.
>
> Furthermore I make use of the OGRLayerH which should save the the
> vector-data-output (the result) of the function called above.
>
> I've read the OGR API Tutorial page (
> http://www.gdal.org/ogr/ogr_apitut.html) und understood its content.
> But in my case the Layer shall save one vector with the different height
> values.
> For every height value there should exist one ring representing a highline.
> The rings should also be written into another vector.
> On top of that for every ring there has to be a vector (or let's say a
> matrix containing two vectors) with x- and y- values for certain positions
> of the ring.
>
>
>                           ring 1------ > x1 y1
>                           ring 2            x2 y2
>                           ring 3            ...
>                           ...                  xN yN
> 0,0 m -----------> ring N
> 2,5 m
> 5,0 m
> 7,5 m
> 10, m
> 12,5 m
> ...
> 500,0 m
>
>
> So all in all I need three vectors saving the result of
> 'GDALContourGenerate'-function.
>
> My problem is that I do not know how to employ this OGRLayer. Please
> correct me, if this is a wrong way to use the'GDALContourGenerate'-function.
>
> Greetings,
> Alexander Plum
> --
> This email was Anti Virus checked by CAE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100422/0521e4a1/attachment.html
From robert.zermeno at navy.mil  Thu Apr 22 10:52:12 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Thu Apr 22 10:52:19 2010
Subject: [gdal-dev] How to extract Well Known Text Coordinate System
	information (WKT)..., OGR unresolved reference problem
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA9102D637CB@nawechlkez02v.nadsuswe.nads.navy.mil>

Hi everyone,

I am enjoying the simplicity of GDAL with integrating with various formats.  I have two related questions.
1.  How can I simply extract individual pieces of WKT?  Meaning, The returned string from GetProjectionRef() returns a WKT format coordinate system string describing the geographical reference the image pertains to.  I would like to grab each of the components.


2. This is kind of a question:
  Instead of parsing through the XML myself, I thought GDAL already has this functionality.  I have tried to perform:

OGRSpatialReferenceH poSRS;
poSRS->GetPrimeMeridian(), but I receive an unresolved reference compile error.  This is odd to me.  I can do the GDAL API tutorial section that uses OSRSetUTM(), OSRDestroySpatialReference(), OSRExportToWKt().  
I have tried to include all main ogr.h files: ogr_api.h, ogr_spatialref.h, ogr_core.h, ... But no such luck. 


The platform I am using is Borland C++.  I compiled a dll and lib file through MSVC 2008 and used Borland coff2omf.exe to properly convert the lib file.

3.  Another question popped into mind:
When compiling, should I change option in GDALRoot/nmake.opt to comment out DLLBUILD.  I have INCLUDE_OGR_FRMTS set to "YES".  What would you think I'm missing.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 4926 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100422/4fcf2fb2/smime-0001.bin
From warmerdam at pobox.com  Thu Apr 22 12:29:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 22 12:29:11 2010
Subject: [gdal-dev] How to extract Well Known Text Coordinate System
	information (WKT)..., OGR unresolved reference problem
In-Reply-To: <F8A8A114E3F41D4D9157F1BECCA3BA9102D637CB@nawechlkez02v.nadsuswe.nads.navy.mil>
References: <F8A8A114E3F41D4D9157F1BECCA3BA9102D637CB@nawechlkez02v.nadsuswe.nads.navy.mil>
Message-ID: <4BD07951.9060702@pobox.com>

Zermeno, Robert J CIV NAVAIR, 472100D wrote:
> Hi everyone,
> 
> I am enjoying the simplicity of GDAL with integrating with various formats.
> I have two related questions. 1.  How can I simply extract individual pieces
> of WKT?  Meaning, The returned string from GetProjectionRef() returns a WKT
> format coordinate system string describing the geographical reference the
> image pertains to.  I would like to grab each of the components.

Robert,

The GetAttrValue() method on OGRSpatialReference can generally be used
to extract specific data items from a coordinate system definition.
For instance:

   const char *pszDatumName = poSRS->GetAttrValue("DATUM");

would search the WKT for the DATUM node, and extract the
associated text.

> 2. This is kind of a question: Instead of parsing through the XML myself, I
> thought GDAL already has this functionality.  I have tried to perform:
> 
> OGRSpatialReferenceH poSRS; poSRS->GetPrimeMeridian(), but I receive an
> unresolved reference compile error.  This is odd to me.  I can do the GDAL
> API tutorial section that uses OSRSetUTM(), OSRDestroySpatialReference(),
> OSRExportToWKt(). I have tried to include all main ogr.h files: ogr_api.h,
> ogr_spatialref.h, ogr_core.h, ... But no such luck.
> 
> 
> The platform I am using is Borland C++.  I compiled a dll and lib file
> through MSVC 2008 and used Borland coff2omf.exe to properly convert the lib
> file.

My conclusion would be that this is something peculiar about the
way you are building or Borland C++.  It may help to stick to the
C rather than C++ API though there are some methods not exposed
through C.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Apr 22 12:51:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 22 12:51:41 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
Message-ID: <4BD07E99.90207@pobox.com>

Folks,

I have prepared a new 1.7.2 release candidate.  In this one I have
run libtoolize --force --copy and then autogen.sh in the hopes of producing
a consistent up-to-date set of configure and libtool stuff.  I'd particularly
appreciate the folks who had problems with RC1 trying this out.

   http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
   http://download.osgeo.org/gdal/gdal172RC2.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Thu Apr 22 12:56:21 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Apr 22 12:56:24 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
In-Reply-To: <3B0F78F2-851C-4A0C-9DCA-813A8F20AB56@kyngchaos.com>
References: <4BCF8A63.40500@noaa.gov>
	<201004220144.13313.even.rouault@mines-paris.org>
	<3B0F78F2-851C-4A0C-9DCA-813A8F20AB56@kyngchaos.com>
Message-ID: <4BD07FB5.5080404@noaa.gov>

William Kyngesburye wrote:
> The test dataset works for me with my 1.7.1-1 release builds, on both Leopard and Snow.

I'm testing on Leopard, PPC, for what that's worth.

> Do you have a quick link for that NGA data?

You can get it from:

https://www1.nga.mil/ProductsServices/NauticalHydrographic/NauticalCharts/Pages/default.aspx

though the download site appears to be down at the moment.

Here is the one I'm trying:

http://dl.dropbox.com/u/855965/a1610880.zip

Thanks,

-Chris



> On Apr 21, 2010, at 6:44 PM, Even Rouault wrote:
> 
>> Christopher,
>>
>> There were 2 meaningful changes mades in the OGR OGDI driver during GDAL 1.7 
>> development (http://trac.osgeo.org/gdal/changeset/18499 and 
>> http://trac.osgeo.org/gdal/changeset/18502)
>>
>> Could you try downloading and unzipping
>> http://freefr.dl.sourceforge.net/project/ogdi/OGDI_Test_Suite/3.1/ogdits-3.1.0.zip
>>
>> then try :
>>
>> ogrinfo -ro gltp:/vrf/path/to/ogdits-3.1/data/vpf/vm2alv2/texash
>>
>> This is supposed to work (tested in GDAL autotest suite)
>>
>> If it doesn't, then I'd suppose it is an issue with the OGDI library in the 
>> framework.
>> It it works with that dataset, then perhaps this is due to one of the above 
>> changes in the driver that wouldn't work with DNC datasets, but I'm very 
>> skeptical as the changes only affect the layer object whereas your error 
>> would tend to think that the driver doesn't even go to the point of creating 
>> any layer.
>>
>> Best regards,
>>
>> Even
>>
>> Le Thursday 22 April 2010 01:29:39 Christopher Barker, vous avez ?crit :
>>> William,
>>>
>>> I couldn't see a place to report this on your site, to I'm reporting it
>>> here. The 1.7 GDAL build doesn't seem to support the OGDI drivers,
>>> whereas the 1.6 build does.
>>>
>>> I'm using ORG to read the VPF, as used by the NGA digital nautical
>>> charts. Note:
>>>
>>> $ /Library/Frameworks/GDAL.framework/Versions/1.6/Programs/ogrinfo
>>> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>>>
>>> yields:
>>>
>>> ERROR 4: OGDI Driver doesn't support update.
>>> Had to open data source read-only.
>>> INFO: Open of `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
>>>       using driver `OGDI' successful.
>>> 1: buildngp@cul(*)_point (Point)
>>> 2: commp@cul(*)_point (Point)
>>> ....
>>>
>>> Whereas:
>>>
>>> $ /Library/Frameworks/GDAL.framework/Versions/1.7/Programs/ogrinfo
>>> gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880
>>>
>>> yields:
>>>
>>> FAILURE:
>>> Unable to open datasource `gltp:/vrf/Users/cbarker/Temp/DNC16/A1610880'
>>> with the following drivers.
>>>   -> ESRI Shapefile
>>> ...
>>>   -> OGDI
>>> ...
>>>
>>>
>>> So OGDI is in the list, but it doesn't work.
>>>
>>> Note that I'm having trouble getting this to work with my own build,
>>> too, so it may be a GDAL/OGR/OGDI issue, rather than an issue with your
>>> Framework builds.
>>>
>>> -Chris
>>
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."
> 
> - Hitchhiker's Guide to the Galaxy
> 
> 


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Thu Apr 22 13:13:58 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Apr 22 13:14:06 2010
Subject: [gdal-dev] kyngchaos Framework build doesn't support OGDI
In-Reply-To: <4BD07FB5.5080404@noaa.gov>
References: <4BCF8A63.40500@noaa.gov>
	<201004220144.13313.even.rouault@mines-paris.org>
	<3B0F78F2-851C-4A0C-9DCA-813A8F20AB56@kyngchaos.com>
	<4BD07FB5.5080404@noaa.gov>
Message-ID: <AE5148F0-3FA5-4742-B2CD-8A2EC8F5C9E5@kyngchaos.com>

... the NGA data works for me.  Including PPC Leopard (I only tested Intel yesterday).

Can you double-check that it's not working using my framework?

For your own build, note that there is some patching I do to get the OGDI library to function smoothly, so you can specify 'vrf'.  Without the patches you need to specify the full path to the OGDI/vrf library binary (and the library doesn't compile properly anyways).  See my OGDI build page:

http://www.kyngchaos.com/macosx/build/ogdi

On Apr 22, 2010, at 11:56 AM, Christopher Barker wrote:

> William Kyngesburye wrote:
>> The test dataset works for me with my 1.7.1-1 release builds, on both Leopard and Snow.
> 
> I'm testing on Leopard, PPC, for what that's worth.
> 
>> Do you have a quick link for that NGA data?
> 
> You can get it from:
> 
> https://www1.nga.mil/ProductsServices/NauticalHydrographic/NauticalCharts/Pages/default.aspx
> 
> though the download site appears to be down at the moment.
> 
> Here is the one I'm trying:
> 
> http://dl.dropbox.com/u/855965/a1610880.zip
> 
> Thanks,
> 
> -Chris
> 
-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From woklist at kyngchaos.com  Thu Apr 22 13:49:16 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Apr 22 13:49:20 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <4BD07E99.90207@pobox.com>
References: <4BD07E99.90207@pobox.com>
Message-ID: <61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>

Compiles now on OS X.

On Apr 22, 2010, at 11:51 AM, Frank Warmerdam wrote:

> Folks,
> 
> I have prepared a new 1.7.2 release candidate.  In this one I have
> run libtoolize --force --copy and then autogen.sh in the hopes of producing
> a consistent up-to-date set of configure and libtool stuff.  I'd particularly
> appreciate the folks who had problems with RC1 trying this out.
> 
>  http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
>  http://download.osgeo.org/gdal/gdal172RC2.zip
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."

- Marvin


From ksshannon at gmail.com  Thu Apr 22 13:52:28 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Apr 22 13:52:46 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>
References: <4BD07E99.90207@pobox.com>
	<61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>
Message-ID: <j2oc28f2e141004221052w7b9f582fz73be011fc82e958@mail.gmail.com>

RC1 did not work for me due to the libtool issue, RC2 is working now.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Thu, Apr 22, 2010 at 11:49 AM, William Kyngesburye <woklist@kyngchaos.com
> wrote:

> Compiles now on OS X.
>
> On Apr 22, 2010, at 11:51 AM, Frank Warmerdam wrote:
>
> > Folks,
> >
> > I have prepared a new 1.7.2 release candidate.  In this one I have
> > run libtoolize --force --copy and then autogen.sh in the hopes of
> producing
> > a consistent up-to-date set of configure and libtool stuff.  I'd
> particularly
> > appreciate the folks who had problems with RC1 trying this out.
> >
> >  http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
> >  http://download.osgeo.org/gdal/gdal172RC2.zip
> >
> > Best regards,
> > --
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what does
> that remind me of?  Ah, yes - life."
>
> - Marvin
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100422/ee22a916/attachment.html
From dmorissette at mapgears.com  Thu Apr 22 14:49:44 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Apr 22 14:49:48 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>
References: <4BD07E99.90207@pobox.com>
	<61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>
Message-ID: <4BD09A48.1080803@mapgears.com>

William Kyngesburye wrote:
>>
>> I have prepared a new 1.7.2 release candidate.  In this one I have
>> run libtoolize --force --copy and then autogen.sh in the hopes of producing
>> a consistent up-to-date set of configure and libtool stuff.  I'd particularly
>> appreciate the folks who had problems with RC1 trying this out.
>>
>>  http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
>>  http://download.osgeo.org/gdal/gdal172RC2.zip
>>

FYI there is a typo in the date in the 'gdal-info --version' output: 
"201/04/20" instead of "2010/04/20"

Other than that 1.7.2RC2 builds and works fine for me in the quick tests 
I did.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From jgomezdans at gmail.com  Thu Apr 22 14:52:34 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Apr 22 14:52:37 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <j2oc28f2e141004221052w7b9f582fz73be011fc82e958@mail.gmail.com>
References: <4BD07E99.90207@pobox.com>
	<61AB0E45-56E4-4441-9BF0-31E67D24B42C@kyngchaos.com>
	<j2oc28f2e141004221052w7b9f582fz73be011fc82e958@mail.gmail.com>
Message-ID: <h2l91d218431004221152l4876357dvc4ac8e29d1d414ca@mail.gmail.com>

>
> On Apr 22, 2010, at 11:51 AM, Frank Warmerdam wrote:
>>
>> > Folks,
>> >
>> > I have prepared a new 1.7.2 release candidate.  In this one I have
>> > run libtoolize --force --copy and then autogen.sh in the hopes of
>> producing
>> > a consistent up-to-date set of configure and libtool stuff.  I'd
>> particularly
>> > appreciate the folks who had problems with RC1 trying this out.
>>
>
I have compiled succesfully 1.7.2 on a RHEL5/x86_64 system (used to need the
--wihtout-libtool option, compiles fine without it now). Additionally, the
HDF include directory is not passed through to the respective Makefiles in
frmts/hdf4. My ./configure command is:

 ./configure --with-python --with-geos=/usr/bin/geos-config
--with-curl=/usr/bin/curl-config --with-hdf4=/usr/lib64/hdf
--with-sqlite3=yes --with-netcdf=no --with-static-proj4=/usr/lib64/
--with-hdf5=/usr/include/hdf5

Other than that, & when this HDF include is added to the Makefile, the
release seems to work.

Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100422/4e72c8de/attachment.html
From robert.zermeno at navy.mil  Thu Apr 22 18:29:05 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Thu Apr 22 18:29:16 2010
Subject: [gdal-dev] RE: Extract WKT actual Data Values starting with rootNode
In-Reply-To: <4BD07951.9060702@pobox.com>
References: <F8A8A114E3F41D4D9157F1BECCA3BA9102D637CB@nawechlkez02v.nadsuswe.nads.navy.mil>
	<4BD07951.9060702@pobox.com>
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA9102D63A2F@nawechlkez02v.nadsuswe.nads.navy.mil>

Frank,

Thanks a lot for the tips.  I have been playing around a bit with the C API and documentation and noticed that the way gdal is loaded in Borland, I cannot use the C++ api of gdal.

My objective is I want to acquire the root node of the WKT tree and for each node, extract the value and its associated data.

Example:
  curRoot = SPHEROID
  value = "WSG 84"
  Data  = integer1, integer2 

How can I do this using the C API?  I think that is why you mentioned C++ API has more functionality, like GetRoot().

I cannot build a OGR_SRSNode tree using importFromWKT() or use its Constructor.  Reason it's a C++ API and for some reason in Builder, it gives me an unresolved reference.  So, I know something is wrong with my .lib file.

Last resort is I could use the ExportToPrettyWKT() and manually parse through it (which is WAY easier than then ExportToWKT() )

Thanks for your help,
Robert

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, April 22, 2010 9:29
To: Zermeno, Robert J CIV NAVAIR, 472100D
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] How to extract Well Known Text Coordinate System information (WKT)..., OGR unresolved reference problem

Zermeno, Robert J CIV NAVAIR, 472100D wrote:
> Hi everyone,
> 
> I am enjoying the simplicity of GDAL with integrating with various formats.
> I have two related questions. 1.  How can I simply extract individual 
> pieces of WKT?  Meaning, The returned string from GetProjectionRef() 
> returns a WKT format coordinate system string describing the 
> geographical reference the image pertains to.  I would like to grab each of the components.

Robert,

The GetAttrValue() method on OGRSpatialReference can generally be used to extract specific data items from a coordinate system definition.
For instance:

   const char *pszDatumName = poSRS->GetAttrValue("DATUM");

would search the WKT for the DATUM node, and extract the associated text.

> 2. This is kind of a question: Instead of parsing through the XML 
> myself, I thought GDAL already has this functionality.  I have tried to perform:
> 
> OGRSpatialReferenceH poSRS; poSRS->GetPrimeMeridian(), but I receive 
> an unresolved reference compile error.  This is odd to me.  I can do 
> the GDAL API tutorial section that uses OSRSetUTM(), 
> OSRDestroySpatialReference(), OSRExportToWKt(). I have tried to 
> include all main ogr.h files: ogr_api.h, ogr_spatialref.h, ogr_core.h, ... But no such luck.
> 
> 
> The platform I am using is Borland C++.  I compiled a dll and lib file 
> through MSVC 2008 and used Borland coff2omf.exe to properly convert 
> the lib file.

My conclusion would be that this is something peculiar about the way you are building or Borland C++.  It may help to stick to the C rather than C++ API though there are some methods not exposed through C.

Good luck,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 4926 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100422/e63facfa/smime.bin
From ivan.lucena at pmldnet.com  Thu Apr 22 13:31:32 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Apr 22 20:33:24 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <4BD07E99.90207@pobox.com>
References: <4BD07E99.90207@pobox.com>
Message-ID: <4BD087F4.70207@pmldnet.com>

Frank,

I am trying the RC2 on OpenSUSE and I found a problem.

Here is my configure command:

./configure \
         --with-libtool \
         --with-libtiff=internal \
         --with-geotiff=internal \
         --with-jpeg=internal \
         --with-gif=internal

After having compiled a lot of things it breaks at that point:

/bin/sh /home/ilucena/Dev/gdal-1.7.2/libtool --mode=compile --tag=CXX g++ -g -O2  -Wall 
-DOGR_ENABLED -I/home/ilucena/Dev/gdal-1.7.2/port  -c -o 
/home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.lo /home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp
libtool: compile:  g++ -g -O2 -Wall -DOGR_ENABLED -I/home/ilucena/Dev/gdal-1.7.2/port -c 
/home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp  -fPIC -DPIC -o 
/home/ilucena/Dev/gdal-1.7.2/alg/.libs/gdalcutline.o
/home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp:33:22: error: ogr_geos.h: No such file or directory
make[1]: *** [/home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.lo] Error 1
make[1]: Leaving directory `/home/ilucena/Dev/gdal-1.7.2'
make: *** [check-lib] Error 2

It clearly is not picking all the "-I". I tried --without-libtool and got the same result. I can 
usually build from the gdal-trunk with or without libtools.

More details:

gcc --version
gcc (SUSE Linux) 4.3.1 20080507 (prerelease) [gcc-4_3-branch revision 135036]
Copyright (C) 2008 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

autoconf --version
autoconf (GNU Autoconf) 2.63
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later

Do you have any clue?

Regards,

Ivan


Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a new 1.7.2 release candidate.  In this one I have
> run libtoolize --force --copy and then autogen.sh in the hopes of producing
> a consistent up-to-date set of configure and libtool stuff.  I'd 
> particularly
> appreciate the folks who had problems with RC1 trying this out.
> 
>   http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC2.zip
> 
> Best regards,


From ivan.lucena at pmldnet.com  Thu Apr 22 14:49:10 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Apr 22 21:51:07 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <4BD087F4.70207@pmldnet.com>
References: <4BD07E99.90207@pobox.com> <4BD087F4.70207@pmldnet.com>
Message-ID: <4BD09A26.9080503@pmldnet.com>

Frank,

Never mind. It seems like the application that I used to decompress gdal-1.7.2RC2.tar.gz creates the 
files and folder with an incorrect permission. I saw some permission error on the log. So I 
re-started with simple "gzip -d" and "tar xvf" and everything worked just fine.

Regards,

Ivan

Lucena, Ivan wrote:
> Frank,
> 
> I am trying the RC2 on OpenSUSE and I found a problem.
> 
> Here is my configure command:
> 
> ./configure \
>         --with-libtool \
>         --with-libtiff=internal \
>         --with-geotiff=internal \
>         --with-jpeg=internal \
>         --with-gif=internal
> 
> After having compiled a lot of things it breaks at that point:
> 
> /bin/sh /home/ilucena/Dev/gdal-1.7.2/libtool --mode=compile --tag=CXX 
> g++ -g -O2  -Wall -DOGR_ENABLED -I/home/ilucena/Dev/gdal-1.7.2/port  -c 
> -o /home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.lo 
> /home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp
> libtool: compile:  g++ -g -O2 -Wall -DOGR_ENABLED 
> -I/home/ilucena/Dev/gdal-1.7.2/port -c 
> /home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp  -fPIC -DPIC -o 
> /home/ilucena/Dev/gdal-1.7.2/alg/.libs/gdalcutline.o
> /home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.cpp:33:22: error: 
> ogr_geos.h: No such file or directory
> make[1]: *** [/home/ilucena/Dev/gdal-1.7.2/alg/gdalcutline.lo] Error 1
> make[1]: Leaving directory `/home/ilucena/Dev/gdal-1.7.2'
> make: *** [check-lib] Error 2
> 
> It clearly is not picking all the "-I". I tried --without-libtool and 
> got the same result. I can usually build from the gdal-trunk with or 
> without libtools.
> 
> More details:
> 
> gcc --version
> gcc (SUSE Linux) 4.3.1 20080507 (prerelease) [gcc-4_3-branch revision 
> 135036]
> Copyright (C) 2008 Free Software Foundation, Inc.
> This is free software; see the source for copying conditions.  There is NO
> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
> 
> autoconf --version
> autoconf (GNU Autoconf) 2.63
> Copyright (C) 2008 Free Software Foundation, Inc.
> License GPLv2+: GNU GPL version 2 or later
> 
> Do you have any clue?
> 
> Regards,
> 
> Ivan
> 
> 
> Frank Warmerdam wrote:
>> Folks,
>>
>> I have prepared a new 1.7.2 release candidate.  In this one I have
>> run libtoolize --force --copy and then autogen.sh in the hopes of 
>> producing
>> a consistent up-to-date set of configure and libtool stuff.  I'd 
>> particularly
>> appreciate the folks who had problems with RC1 trying this out.
>>
>>   http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
>>   http://download.osgeo.org/gdal/gdal172RC2.zip
>>
>> Best regards,
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From randre at gmail.com  Fri Apr 23 01:22:50 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Fri Apr 23 01:27:57 2010
Subject: [gdal-dev] Raster data extraction
In-Reply-To: <462402.13020.qm@web33208.mail.mud.yahoo.com>
References: <4BCC9C77.2010702@pobox.com>
	<462402.13020.qm@web33208.mail.mud.yahoo.com>
Message-ID: <u2n9c2015091004222222z1566a773w29b6dc92f32656f9@mail.gmail.com>

Hi Brent,

You can write a program that takes in the coordinates of your sample
points as input, and then reads the pixel values in each band of the
image at that location.

Not sure if that's what you're looking for, but it works.

Roger
--

On Mon, Apr 19, 2010 at 2:36 PM,  <pcreso@pcreso.com> wrote:
> Hi,
>
> Is there a simple way (using gdal) of retrieving the colour spectra at specified sample points in georeferenced images?
>
> I figure GRASS has some tools to do this, as does GMT, but was wondering if GDAL could support this functionality directly.
>
> Lots of points/images to work through.
>
> Thanks,
>
> ?Brent Wood
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ari.jolma at gmail.com  Fri Apr 23 01:41:44 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Apr 23 01:41:49 2010
Subject: [gdal-dev] GDAL/OGR 1.7.2RC2 Release Candidate
In-Reply-To: <4BD07E99.90207@pobox.com>
References: <4BD07E99.90207@pobox.com>
Message-ID: <4BD13318.8030107@gmail.com>

Frank Warmerdam wrote:
> Folks,
>
> I have prepared a new 1.7.2 release candidate.  In this one I have
> run libtoolize --force --copy and then autogen.sh in the hopes of 
> producing
> a consistent up-to-date set of configure and libtool stuff.  I'd 
> particularly
> appreciate the folks who had problems with RC1 trying this out.

I have no problems in vanilla builds on those two platforms where there 
was problems with RC1. The lib64 problem persists, but it is quite easy 
to fix by simply removing /usr/lib from LIBS in GDALmake.opt.

Best regards,

Ari

>
>   http://download.osgeo.org/gdal/gdal-1.7.2RC2.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC2.zip
>
> Best regards,

From sorokina at ornl.gov  Fri Apr 23 15:29:02 2010
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Fri Apr 23 16:00:33 2010
Subject: [gdal-dev] Geometry overlap test
Message-ID: <AEDC41A5-20E7-4539-8AC0-4C2F8AC72B92@ornl.gov>

Hi!

I noticed that Geometry.Overlaps in ogr sometimes returns "no overlap" while intersection is not empty.  For example:

Geometry 1:POLYGON ((-1 -1,-1 1,1 1,1 -1,-1 -1))
  boundaryLINESTRING (-1 -1,-1 1,1 1,1 -1,-1 -1)
Geometry 2:POLYGON ((-2 -2,-2 2,2 2,2 -2,-2 -2))
  boundaryLINESTRING (-2 -2,-2 2,2 2,2 -2,-2 -2)
Overlaps? NO
Intrsects? YES
Intersection: POLYGON ((-1 -1,-1 1,1 1,1 -1,-1 -1))

This contradicts description of the overlap method in geos or am I doing something wrong?

The Java code to reproduce the condition attached.  
--
Alex Sorokine
sorokina@ornl.gov

==== cut here ====

import org.gdal.ogr.Geometry;
import org.gdal.ogr.ogr;

public class OverlapTest {

	public static void main(String[] args) {

		Geometry lr1 = new Geometry(ogr.wkbLinearRing);
		lr1.AddPoint_2D(-1.0, -1.0);
		lr1.AddPoint_2D(-1.0,  1.0);
		lr1.AddPoint_2D( 1.0,  1.0);
		lr1.AddPoint_2D( 1.0, -1.0);
		lr1.AddPoint_2D(-1.0, -1.0);
		Geometry geom1 = new Geometry(ogr.wkbPolygon);
		geom1.AddGeometry(lr1);
		System.out.println("Geometry 1:" + geom1.ExportToWkt());
		System.out.println("  boundary" + geom1.GetBoundary().ExportToWkt());
		
		Geometry lr2 = new Geometry(ogr.wkbLinearRing);
		lr2.AddPoint_2D(-2.0, -2.0);
		lr2.AddPoint_2D(-2.0,  2.0);
		lr2.AddPoint_2D( 2.0,  2.0);
		lr2.AddPoint_2D( 2.0, -2.0);
		lr2.AddPoint_2D(-2.0, -2.0);
		Geometry geom2 = new Geometry(ogr.wkbPolygon);
		geom2.AddGeometry(lr2);
		System.out.println("Geometry 2:" + geom2.ExportToWkt());
		System.out.println("  boundary" + geom2.GetBoundary().ExportToWkt());
		
		System.out.print("Overlaps? ");
		if (geom1.Overlaps(geom2)) System.out.println("YES");
		else System.out.println("NO");
		
		System.out.print("Intrsects? ");
		if (geom1.Intersect(geom2)) System.out.println("YES");
		else System.out.println("NO");
		
		System.out.println("Intersection: " + geom1.Intersection(geom2).ExportToWkt());
	}

}

From even.rouault at mines-paris.org  Fri Apr 23 16:20:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 23 16:20:14 2010
Subject: [gdal-dev] Geometry overlap test
In-Reply-To: <AEDC41A5-20E7-4539-8AC0-4C2F8AC72B92@ornl.gov>
References: <AEDC41A5-20E7-4539-8AC0-4C2F8AC72B92@ornl.gov>
Message-ID: <201004232220.02988.even.rouault@mines-paris.org>

Alexandre,

Overlap has a very particular meaning. See 
http://postgis.refractions.net/documentation/manual-1.5/ST_Overlaps.html

Your 2 polygons intersects well, but they do not "overlap" because the 
intersection is equal to geometry 1... 

Best regards,

Even

Le Friday 23 April 2010 21:29:02 Sorokine, Alexandre, vous avez ?crit?:
> Hi!
>
> I noticed that Geometry.Overlaps in ogr sometimes returns "no overlap"
> while intersection is not empty.  For example:
>
> Geometry 1:POLYGON ((-1 -1,-1 1,1 1,1 -1,-1 -1))
>   boundaryLINESTRING (-1 -1,-1 1,1 1,1 -1,-1 -1)
> Geometry 2:POLYGON ((-2 -2,-2 2,2 2,2 -2,-2 -2))
>   boundaryLINESTRING (-2 -2,-2 2,2 2,2 -2,-2 -2)
> Overlaps? NO
> Intrsects? YES
> Intersection: POLYGON ((-1 -1,-1 1,1 1,1 -1,-1 -1))
>
> This contradicts description of the overlap method in geos or am I doing
> something wrong?
>
> The Java code to reproduce the condition attached.
> --
> Alex Sorokine
> sorokina@ornl.gov
>
> ==== cut here ====
>
> import org.gdal.ogr.Geometry;
> import org.gdal.ogr.ogr;
>
> public class OverlapTest {
>
> 	public static void main(String[] args) {
>
> 		Geometry lr1 = new Geometry(ogr.wkbLinearRing);
> 		lr1.AddPoint_2D(-1.0, -1.0);
> 		lr1.AddPoint_2D(-1.0,  1.0);
> 		lr1.AddPoint_2D( 1.0,  1.0);
> 		lr1.AddPoint_2D( 1.0, -1.0);
> 		lr1.AddPoint_2D(-1.0, -1.0);
> 		Geometry geom1 = new Geometry(ogr.wkbPolygon);
> 		geom1.AddGeometry(lr1);
> 		System.out.println("Geometry 1:" + geom1.ExportToWkt());
> 		System.out.println("  boundary" + geom1.GetBoundary().ExportToWkt());
>
> 		Geometry lr2 = new Geometry(ogr.wkbLinearRing);
> 		lr2.AddPoint_2D(-2.0, -2.0);
> 		lr2.AddPoint_2D(-2.0,  2.0);
> 		lr2.AddPoint_2D( 2.0,  2.0);
> 		lr2.AddPoint_2D( 2.0, -2.0);
> 		lr2.AddPoint_2D(-2.0, -2.0);
> 		Geometry geom2 = new Geometry(ogr.wkbPolygon);
> 		geom2.AddGeometry(lr2);
> 		System.out.println("Geometry 2:" + geom2.ExportToWkt());
> 		System.out.println("  boundary" + geom2.GetBoundary().ExportToWkt());
>
> 		System.out.print("Overlaps? ");
> 		if (geom1.Overlaps(geom2)) System.out.println("YES");
> 		else System.out.println("NO");
>
> 		System.out.print("Intrsects? ");
> 		if (geom1.Intersect(geom2)) System.out.println("YES");
> 		else System.out.println("NO");
>
> 		System.out.println("Intersection: " +
> geom1.Intersection(geom2).ExportToWkt()); }
>
> }
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Apr 23 19:33:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 23 19:33:13 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
Message-ID: <4BD22E36.9070506@pobox.com>

Folks,

It seems that the 1.7.2RC2 fixed the serious regressions in configure/libtool
but as Daniel pointed out there was a painful error with the version date
macro. So I have corrected only that, and issued a new release candidate.

   http://download.osgeo.org/gdal/gdal-1.7.2RC3.tar.gz
   http://download.osgeo.org/gdal/gdal172RC3.zip

I'm pretty confident of this release, so I'd like to issue an official motion
to promote it to 1.7.2 final.

Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sat Apr 24 13:11:08 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 24 13:11:23 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <4BD22E36.9070506@pobox.com>
References: <4BD22E36.9070506@pobox.com>
Message-ID: <201004241911.09875.even.rouault@mines-paris.org>

+1

Best regards,

Even

Le Saturday 24 April 2010 01:33:10 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> It seems that the 1.7.2RC2 fixed the serious regressions in
> configure/libtool but as Daniel pointed out there was a painful error with
> the version date macro. So I have corrected only that, and issued a new
> release candidate.
>
>    http://download.osgeo.org/gdal/gdal-1.7.2RC3.tar.gz
>    http://download.osgeo.org/gdal/gdal172RC3.zip
>
> I'm pretty confident of this release, so I'd like to issue an official
> motion to promote it to 1.7.2 final.
>
> Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
>
> +1 Frank
>
> Best regards,


From randyqiuxy at hotmail.com  Tue Apr 27 02:08:28 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Tue Apr 27 02:08:36 2010
Subject: [gdal-dev] how to use docs?
Message-ID: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>

Hi list,
This maybe a bad question.
I "make docs" and "make install docs" after installing GDAL, but then
how should I use this docs file and query functions?
I thought Devhelp could help me but nothing appeared on devhelp.

Best regards,
Randy

From atubar at 126.com  Tue Apr 27 01:42:28 2010
From: atubar at 126.com (atubar)
Date: Tue Apr 27 02:14:03 2010
Subject: [gdal-dev] how to compare two  OGRSpatialReference  is same?
Message-ID: <24d76584.7895.1283dc9b3f5.Coremail.atubar@126.com>

Hello, I write some code below to compare OGRSpatialReference,

bool CompareWktIsUniform(const char* pszWkt1, const char* pszWkt2)
{
 OGRSpatialReference SR1(pszWkt1);
 OGRSpatialReference SR2(pszWkt2);

 int IsSame = SR1.IsSame(&SR2);

 if (IsSame == TRUE)
  return  true;
 else
  return false;
}

And  I have two  OGRSpatialReference, one is from shapefile and the other is from Geotiff. 

PROJCS["Albers Conical Equal Area",GEOGCS["GCS_Krasovsky_1940",DATUM["Krasovsky_1940",SPHEROID["Krasovsky_1940",6378245.0,298.3]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["longitude_of_center",105.0],PARAMETER["Standard_Parallel_1",25.0],PARAMETER["Standard_Parallel_2",47.0],PARAMETER["latitude_of_center",0.0],UNIT["Meter",1.0]]


PROJCS["IMAGINE GeoTIFF Support
Copyright 1991 - 2005 by Leica Geosystems Geospatial Imaging, LLC. All Rights Reserved
@(#)$RCSfile: egtf.c $ IMAGINE 9.0 $Revision: 10.0 $ $Date: 2005/07/26 15:10:00 EST $
Projection = Albers Conical Equal Area",GEOGCS["Krasovsky",DATUM["Krasovsky",SPHEROID["Krasovsky",6378245,298.3000003760163]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["standard_parallel_1",25],PARAMETER["standard_parallel_2",47],PARAMETER["latitude_of_center",0],PARAMETER["longitude_of_center",105],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]

But they are recognized the same in ArcGis and Erdas, in ArcGis they are both shown as below:

Projection: Albers
False_Easting: 0.000000
False_Northing: 0.000000
Central_Meridian: 105.000000
Standard_Parallel_1: 25.000000
Standard_Parallel_2: 47.000000
Latitude_Of_Origin: 0.000000
Linear Unit: Meter (1.000000)

Geographic Coordinate System: GCS_Krasovsky_1940
Angular Unit: Degree (0.017453292519943299)
Prime Meridian: Greenwich (0.000000000000000000)
Datum: D_Krasovsky_1940
  Spheroid: Krasovsky_1940
    Semimajor Axis: 6378245.000000000000000000
    Semiminor Axis: 6356863.018773047300000000
    Inverse Flattening: 298.300000000000010000

So, is there any way to get the same results? or what is lost?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/5d66eb1f/attachment.html
From jerome at georezo.net  Tue Apr 27 02:41:38 2010
From: jerome at georezo.net (jerome@georezo.net)
Date: Tue Apr 27 02:41:49 2010
Subject: [gdal-dev] how to compare two  OGRSpatialReference  is same?
In-Reply-To: <24d76584.7895.1283dc9b3f5.Coremail.atubar@126.com>
Message-ID: <469566491.3728971272350498914.JavaMail.root@zimbra34-e6.priv.proxad.net>

Some metadata are different, but it is the same coordinate system. The IsSame function may compare the OGRSpatialReference and not the specific coordinate system data. So the solution to this problem may be to test a conversion between the two coordinate systems AND verify that coordinates don't move.


---
J?r?me

----- Mail Original -----
De: "atubar" <atubar@126.com>
?: gdal-dev@lists.osgeo.org
Envoy?: Mardi 27 Avril 2010 07h42:28 GMT +01:00 Amsterdam / Berlin / Berne / Rome / Stockholm / Vienne
Objet: [gdal-dev] how to compare two  OGRSpatialReference  is same?




Hello, I write some code below to compare OGRSpatialReference, 

bool CompareWktIsUniform(const char* pszWkt1, const char* pszWkt2) 
{ 
?OGRSpatialReference SR1(pszWkt1); 
?OGRSpatialReference SR2(pszWkt2); 

?int IsSame = SR1.IsSame(&SR2); 

?if (IsSame == TRUE) 
??return? true; 
?else 
??return false; 
} 

And ?I have two??OGRSpatialReference, one is from shapefile and the other is from Geotiff. 

PROJCS["Albers Conical Equal Area",GEOGCS["GCS_Krasovsky_1940",DATUM["Krasovsky_1940",SPHEROID["Krasovsky_1940",6378245.0,298.3]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["longitude_of_center",105.0],PARAMETER["Standard_Parallel_1",25.0],PARAMETER["Standard_Parallel_2",47.0],PARAMETER["latitude_of_center",0.0],UNIT["Meter",1.0]] 


PROJCS["IMAGINE GeoTIFF Support 
Copyright 1991 - 2005 by Leica Geosystems Geospatial Imaging, LLC. All Rights Reserved 
@(#)$RCSfile: egtf.c $ IMAGINE 9.0 $Revision: 10.0 $ $Date: 2005/07/26 15:10:00 EST $ 
Projection = Albers Conical Equal Area",GEOGCS["Krasovsky",DATUM["Krasovsky",SPHEROID["Krasovsky",6378245,298.3000003760163]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["standard_parallel_1",25],PARAMETER["standard_parallel_2",47],PARAMETER["latitude_of_center",0],PARAMETER["longitude_of_center",105],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]] 

But they are recognized the same in ArcGis and Erdas, in ArcGis?they are both?shown as?below: 

Projection: Albers 
False_Easting: 0.000000 
False_Northing: 0.000000 
Central_Meridian: 105.000000 
Standard_Parallel_1: 25.000000 
Standard_Parallel_2: 47.000000 
Latitude_Of_Origin: 0.000000 
Linear Unit: Meter (1.000000) 

Geographic Coordinate System: GCS_Krasovsky_1940 
Angular Unit: Degree (0.017453292519943299) 
Prime Meridian: Greenwich (0.000000000000000000) 
Datum: D_Krasovsky_1940 
? Spheroid: Krasovsky_1940 
??? Semimajor Axis: 6378245.000000000000000000 
??? Semiminor Axis: 6356863.018773047300000000 
??? Inverse Flattening: 298.300000000000010000 

So, is there any way to get the same results? or what?is lost? 


?????????????200??????? 
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at pmldnet.com  Mon Apr 26 19:51:48 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Apr 27 02:54:25 2010
Subject: [gdal-dev] how to use docs?
In-Reply-To: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>
References: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>
Message-ID: <4BD62714.1060900@pmldnet.com>

Hi Randy,

The GDAL docs that you created with "make docs" is basically a copy of what you have on gdal.org in
html format generated by Doxygen. You can also run "make man" and "make install-man" if that helps.

Regards,

Ivan

Randy wrote:
> Hi list,
> This maybe a bad question.
> I "make docs" and "make install docs" after installing GDAL, but then
> how should I use this docs file and query functions?
> I thought Devhelp could help me but nothing appeared on devhelp.
> 
> Best regards,
> Randy
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From randyqiuxy at hotmail.com  Tue Apr 27 03:40:47 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Tue Apr 27 03:41:54 2010
Subject: [gdal-dev] how to use docs?
In-Reply-To: <4BD62714.1060900@pmldnet.com>
References: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>
	<4BD62714.1060900@pmldnet.com>
Message-ID: <BLU0-SMTP629227EA9DD4A331B4B551C3030@phx.gbl>

Hi Ivan,
> The GDAL docs that you created with "make docs" is basically a copy of what you have on gdal.org in
> html format generated by Doxygen. You can also run "make man" and "make install-man" if that helps.
Then how do I use this docs file,can I use it in Devhelp or "man" some function in terminal? I find it still doesn't work after 
"make man" and "make install-man".
Thanks a lot!

Best regards,
Randy
> Regards,
> 
> Ivan
> 
> Randy wrote:
> > Hi list,
> > This maybe a bad question.
> > I "make docs" and "make install docs" after installing GDAL, but then
> > how should I use this docs file and query functions?
> > I thought Devhelp could help me but nothing appeared on devhelp.
> > 
> > Best regards,
> > Randy
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> 
> 

From ivan.lucena at pmldnet.com  Tue Apr 27 00:03:44 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Apr 27 07:06:21 2010
Subject: [gdal-dev] how to use docs?
In-Reply-To: <BLU0-SMTP629227EA9DD4A331B4B551C3030@phx.gbl>
References: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>	
	<4BD62714.1060900@pmldnet.com>
	<BLU0-SMTP629227EA9DD4A331B4B551C3030@phx.gbl>
Message-ID: <4BD66220.5040505@pmldnet.com>

Randy,

Randy wrote:
> Hi Ivan,
>> The GDAL docs that you created with "make docs" is basically a copy of what you have on gdal.org in
>> html format generated by Doxygen. You can also run "make man" and "make install-man" if that helps.
> Then how do I use this docs file,can I use it in Devhelp or "man" some function in terminal? I find it still doesn't work after 
> "make man" and "make install-man".
> Thanks a lot!

I am not familiar with Devhelp and I unaware that GDAL uses it. From what I saw on Wikipidea it
looks like an interesting resource but do you know if it can be integrated with Doxygen? Does it
process the same JavaDoc style annotation? If that is true I think there is a change that we might
auto generate Devhelp by running a script or something like that.

Best regards,

Ivan

> 
> Best regards,
> Randy
>> Regards,
>>
>> Ivan
>>
>> Randy wrote:
>>> Hi list,
>>> This maybe a bad question.
>>> I "make docs" and "make install docs" after installing GDAL, but then
>>> how should I use this docs file and query functions?
>>> I thought Devhelp could help me but nothing appeared on devhelp.
>>>
>>> Best regards,
>>> Randy
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
> 
> 

From ari.jolma at gmail.com  Tue Apr 27 07:39:51 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Apr 27 07:40:27 2010
Subject: [gdal-dev] how to use docs?
In-Reply-To: <4BD66220.5040505@pmldnet.com>
References: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>		<4BD62714.1060900@pmldnet.com>	<BLU0-SMTP629227EA9DD4A331B4B551C3030@phx.gbl>
	<4BD66220.5040505@pmldnet.com>
Message-ID: <4BD6CD07.90704@gmail.com>

Lucena, Ivan wrote:
> I am not familiar with Devhelp and I unaware that GDAL uses it. From what I saw on Wikipidea it looks like an interesting resource but do you know if it can be integrated with Doxygen? Does it process the same JavaDoc style annotation? If that is true I think there is a change that we might auto generate Devhelp by running a script or something like that.
>   

I'm not familiar with Devhelp either, but I use GTK+ a lot and Devhelp 
is a GTK+/GNOME browser, thus got interested. It seems that Devhelp 
works on gtk-doc (http://www.gtk.org/gtk-doc/), which is a from comments 
to docs project. However, gtk-doc page recommends Doxygen as a more 
polished general-purpose documentation tool(!).

It also seems to me that the Docbook XML format, would be a good format 
(and which Devhelp can read?), but it is not (yet) supported by Doxygen. 
It is on a todo list though 
(http://www.stack.nl/~dimitri/doxygen/todo.html).

Ari

From randyqiuxy at hotmail.com  Tue Apr 27 08:31:51 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Tue Apr 27 08:32:04 2010
Subject: [gdal-dev] how to use docs?
In-Reply-To: <4BD66220.5040505@pmldnet.com>
References: <BLU0-SMTP5229B48DD4842C1BDD39EEC3030@phx.gbl>
	<4BD62714.1060900@pmldnet.com>
	<BLU0-SMTP629227EA9DD4A331B4B551C3030@phx.gbl>
	<4BD66220.5040505@pmldnet.com>
Message-ID: <BLU0-SMTP60593068F93F6C62E96AE6C3030@phx.gbl>

Hi Ivan,
Thank you for your timely response!
> I am not familiar with Devhelp and I unaware that GDAL uses it. From what I saw on Wikipidea it
> looks like an interesting resource but do you know if it can be integrated with Doxygen? 
It seems not. It seems need a litter more work directly from Doxygen to
Devhelp. but I'm not sure about it.
> Does it
> process the same JavaDoc style annotation? If that is true I think there is a change that we might
> auto generate Devhelp by running a script or something like that.
But if there is not a doc for querying just like MSDN in Windows, how
should I get enough info about GDAL functions?

Thanks!

Best regards,
Randy


From vincent.honnet at external.thalesgroup.com  Tue Apr 27 08:54:43 2010
From: vincent.honnet at external.thalesgroup.com (Vincent Honnet)
Date: Tue Apr 27 08:57:49 2010
Subject: [gdal-dev] How to pick on file from a VRT ?
Message-ID: <4BD6DE93.5020906@external.thalesgroup.com>

Hi,

I would like to do something like a picking on a vrt.
Let me explain:
I have vrt's from GTiff files but there is some holes, areas where there 
isn't any data.
 From an area defined by its coordinates I would like to get the 
information if this area is pointing on a file or not, or at least on 
data or not.
Is there a way to do that ? I'm using GDal 1.7.

Thanks a lot in advance,

Vincent


From chaitanya.ch at gmail.com  Tue Apr 27 09:19:27 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 27 09:19:31 2010
Subject: [gdal-dev] How to pick on file from a VRT ?
In-Reply-To: <4BD6DE93.5020906@external.thalesgroup.com>
References: <4BD6DE93.5020906@external.thalesgroup.com>
Message-ID: <z2peb502d881004270619hc4657982l7cb748261301463a@mail.gmail.com>

Vincent,

The simplest way is to build the vrt using gdalbuildvrt with the option
'-vrtnodata'. Any pixel with no data(including areas with no files) will
have the value specified with that option. Refer to
http://www.gdal.org/gdalbuildvrt.html

On Tue, Apr 27, 2010 at 6:24 PM, Vincent Honnet <
vincent.honnet@external.thalesgroup.com> wrote:

> Hi,
>
> I would like to do something like a picking on a vrt.
> Let me explain:
> I have vrt's from GTiff files but there is some holes, areas where there
> isn't any data.
> From an area defined by its coordinates I would like to get the information
> if this area is pointing on a file or not, or at least on data or not.
> Is there a way to do that ? I'm using GDal 1.7.
>
> Thanks a lot in advance,
>
> Vincent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/df67fb6f/attachment.html
From istefan at stef.hu  Tue Apr 27 09:35:07 2010
From: istefan at stef.hu (=?ISO-8859-2?Q?=22ifj=2E_Stef=E1n_Istv=E1n=22?=)
Date: Tue Apr 27 09:35:14 2010
Subject: [gdal-dev] GDAL-GRASS compilation under Windows
In-Reply-To: <4BCEF480.70209@stef.hu>
References: <4BCEF480.70209@stef.hu>
Message-ID: <4BD6E80B.6030004@stef.hu>

Hi!

I'm just wondering whether my question was not clear enough, or really 
anyone doesn't know the answer, or I'm just impatient?

Thanks,
Istv?n

ifj. Stef?n Istv?n ?rta:
> Hello!
>
> I'm new on this list, and hope the following question hasn't been 
> asked before.
> I need help to compile the GDAL-GRASS plugin under Windows environment.
> I downloaded the source of GDAL and compiled it without GRASS support 
> with Visual Studio successfully.
> Next I downloaded the GDAL-GRASS plugin and tried to compile it, but 
> this package doesn't contain Visual Studio project file, and I'm not 
> familiar with VS too much, so I wasn't able to compile it. Then I 
> installed Cygwin and tried to compile the GDAL-GRASS plugin under 
> Cygwin, but the configure script complains about the gdal-config 
> utility which I don't know where to find.
>
> This is where I stand now, if someone know how to compile GDAL-GRASS 
> under Win please help.
>
> Thanks,
> Istv?n
>
>
>
>
>
> __________ ESET NOD32 Antivirus - V?rusdefin?ci?s adatb?zis: 5046 
> (20100421) __________
>
> Az ?zenetet az ESET NOD32 Antivirus ellen?rizte.
>
> http://www.eset.hu
>
>
>
>
> __________ ESET NOD32 Antivirus - V?rusdefin?ci?s adatb?zis: 5065 
> (20100427) __________
>
> Az ?zenetet az ESET NOD32 Antivirus ellen?rizte.
>
> http://www.eset.hu
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> __________ ESET NOD32 Antivirus - V?rusdefin?ci?s adatb?zis: 5065 (20100427) __________
>
> Az ?zenetet az ESET NOD32 Antivirus elleno~rizte.
>
> http://www.eset.hu
>
>   




__________ ESET NOD32 Antivirus - V?rusdefin?ci?s adatb?zis: 5065 (20100427) __________

Az ?zenetet az ESET NOD32 Antivirus ellen?rizte.

http://www.eset.hu

-------------- next part --------------
A non-text attachment was scrubbed...
Name: istefan.vcf
Type: text/x-vcard
Size: 226 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/da9e47f0/istefan.vcf
From ivan.lucena at pmldnet.com  Tue Apr 27 09:52:54 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 27 09:52:57 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaG93IHRvIHVzZSBkb2NzPw==?=
Message-ID: <20100427135254.18405.qmail@s466.sureserver.com>

>  Hi Ivan,
>  Thank you for your timely response!
>  > I am not familiar with Devhelp and I unaware that GDAL uses it. From what I saw on Wikipidea it
>  > looks like an interesting resource but do you know if it can be integrated with Doxygen?
>  It seems not. It seems need a litter more work directly from Doxygen to
>  Devhelp. but I'm not sure about it.
>  > Does it
>  > process the same JavaDoc style annotation? If that is true I think there is a change that we might
>  > auto generate Devhelp by running a script or something like that.
>  But if there is not a doc for querying just like MSDN in Windows, how
>  should I get enough info about GDAL functions?

You should find enough info on the following pages:

http://gdal.org/annotated.html
http://gdal.org/gdal_tutorial.html
http://gdal.org/gdal_datamodel.html
http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithNetBeansIDE
http://trac.osgeo.org/gdal/

Not in the same fashion of a MS Help or something like that but it pretty much covers everything. See that example here:

http://gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743

Good luck.


From franzschiller1975 at gmail.com  Tue Apr 27 10:04:33 2010
From: franzschiller1975 at gmail.com (Franz Schiller)
Date: Tue Apr 27 10:04:37 2010
Subject: [gdal-dev] Error while Warping GTiff to EPSG3763
In-Reply-To: <h2ga75b68d61004270314zd557f2bbm5155739a91c00338@mail.gmail.com>
References: <h2ga75b68d61004270314zd557f2bbm5155739a91c00338@mail.gmail.com>
Message-ID: <t2la75b68d61004270704q6473872bpcfe6b51d518bd1ad@mail.gmail.com>

Greetings

I've been using GDAL for a while without any major issues or difficulties.
But, now I'm facing a difficulty with a gdalwarp operation. And i hope that
someone can help me or giving me a few tips:
I'm trying to do this: Converting a Geotiff to a EPSG 3763 (Portuguese
Coordinate system)
gdalwarp -t_srs 'EPSG:3763' ROI_QB_MUL_2.tif out.tif

And I get this:
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.

If I do gdalinfo ROI_QB_MUL_2.tif I get:
Driver: GTiff/GeoTIFF
Files: ROI_QB_MUL_2.tif
       ROI_QB_MUL_2.tfw
Size is 893, 567
Coordinate System is:
GEOGCS[,
    DATUM["unknown",
        SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["metre",1]]
Origin = (2.395715062070880,48.813901970760220)
Pixel Size = (0.000035468073200,-0.000024505752140)
Metadata:
  TIFFTAG_XRESOLUTION=100
  TIFFTAG_YRESOLUTION=100
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   2.3957151,  48.8139020) (  2d23'44.57"E, 48d48'50.05"N)
Lower Left  (   2.3957151,  48.8000072) (  2d23'44.57"E, 48d48'0.03"N)
Upper Right (   2.4273881,  48.8139020) (  2d25'38.60"E, 48d48'50.05"N)
Lower Right (   2.4273881,  48.8000072) (  2d25'38.60"E, 48d48'0.03"N)
Center      (   2.4115516,  48.8069546) (  2d24'41.59"E, 48d48'25.04"N)
Band 1 Block=893x1 Type=Byte, ColorInterp=Red
Band 2 Block=893x1 Type=Byte, ColorInterp=Green
Band 3 Block=893x1 Type=Byte, ColorInterp=Blue

Any tips of what to do? thank you so much

Franz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/172df865/attachment.html
From dmorissette at mapgears.com  Tue Apr 27 11:27:50 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Apr 27 11:27:57 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <4BD22E36.9070506@pobox.com>
References: <4BD22E36.9070506@pobox.com>
Message-ID: <4BD70276.90209@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> It seems that the 1.7.2RC2 fixed the serious regressions in 
> configure/libtool
> but as Daniel pointed out there was a painful error with the version date
> macro. So I have corrected only that, and issued a new release candidate.
> 
>   http://download.osgeo.org/gdal/gdal-1.7.2RC3.tar.gz
>   http://download.osgeo.org/gdal/gdal172RC3.zip
> 
> I'm pretty confident of this release, so I'd like to issue an official 
> motion
> to promote it to 1.7.2 final.
> 
> Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
> 

I presume you meant "GDAL/OGR 1.7.3 _RC3_ is declared the official 1.7.2 
release."

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From randre at gmail.com  Tue Apr 27 12:09:23 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 12:09:27 2010
Subject: [gdal-dev] SRTM/hgt to TIFF with alpha
In-Reply-To: <9D2D7089-9BAB-4873-8DE1-82F2B72E9F9A@gmail.com>
References: <9D2D7089-9BAB-4873-8DE1-82F2B72E9F9A@gmail.com>
Message-ID: <l2i9c2015091004270909n67d9f304pce857d3278c9d1f4@mail.gmail.com>

Hi David,

Can you clip out a small section of your DEM that contains both ocean and
land and send it to me?  Your question sounds interesting, and I'd like to
take a look at the data before I comment on it.

Thanks,

Roger
--

On Wed, Apr 7, 2010 at 9:08 PM, David <dbainbridge@gmail.com> wrote:

> Hello.  I  am having a terrible time trying to figure out how to convert
> what should be value/height of 0 in the SRTM/hgt data file to the alpha
> layer in a tiff.  I was experimenting with making ocean areas transparent.
>  I tried the following with no success:
>
> gdalwarp -of GTiff -co "TILED=YES"  -dstalpha -srcnodata 0 -wt Float32 -ot
> Float32 -wo SAMPLE_STEPS=100 -multi N40W125.hgt test.tiff
>
> gdalinfo -mm gives:
> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>    Computed Min/Max=-32768.000,1233.000
> Band 2 Block=256x256 Type=Float32, ColorInterp=Alpha
>    Computed Min/Max=0.000,255.000
>
> Since this may affect the hillshading for any land areas inland I was also
> going to attempt the same affect by masking the ocean after the hillshading.
>
> The resulting tiff in either case would be overlaid onto another layer that
> would have any land areas filled in with the resulting color that would have
> been used with height 0 in the hgt file.  I am doing this because I have a
> coastline shapefile that represents land areas but not ocean areas.
>
> Is my approach a good idea and/or what am I missing to mask the ocean areas
> into the alpha layer?
> Thanks for any help.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/a187eaa1/attachment.html
From randre at gmail.com  Tue Apr 27 12:25:18 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 12:33:38 2010
Subject: [gdal-dev] create a png file
In-Reply-To: <1fd7fa1.2189.127cd074ef1.Coremail.weixj2003ld@163.com>
References: <1fd7fa1.2189.127cd074ef1.Coremail.weixj2003ld@163.com>
Message-ID: <w2k9c2015091004270925qbe4c1a3dqb7c6485d2c5865d9@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: step1.py
Type: text/x-python
Size: 874 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/aee96838/step1.py
From randre at gmail.com  Tue Apr 27 12:37:49 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 12:37:53 2010
Subject: [gdal-dev] NetCDF geotransform - pixel centre/upper-left issue
In-Reply-To: <s2o522664f81004052326sc87bcc4dj6bafbd64363fe01@mail.gmail.com>
References: <64102B2FB850C345B04D09C82018F45F0273EC48@ACT01VEXCCL04.internal.govt>
	<s2o522664f81004052326sc87bcc4dj6bafbd64363fe01@mail.gmail.com>
Message-ID: <x2w9c2015091004270937x8866295cg5be49dfe712ca761@mail.gmail.com>

>From my experience working with NetCDF files in GDAL, your best option is to
write your own tools to work between NetCDF and other raster formats.
Specifically, I would use the API to read the NetCDF, and explicitly define
the georeferencing of your output file using whatever logic you know to be
correct for your input data.  All of the variables in the NetCDF file are
accessible via GDAL, but in my experience the built-in utilities do not
always use them in the way you want.  I too believe this is a failure of the
NetCDF format, and not in GDAL.

Best of luck,

Roger
--

On Mon, Apr 5, 2010 at 11:26 PM, Michael Sumner <mdsumner@gmail.com> wrote:

> I believe that NetCDF generally uses cell centres to specify pixel
> coordinates, and there is no way to specify cell corners except by
> adding metadata about the actual dimensions boundaries (this is more
> problematic again if coordinates are not regular since you cannot
> assume a regular half cell).
>
> My understanding is that GDAL assumes cell centres for NetCDF, and
> from the data I've seen this is reasonable. The data model in NetCDF
> is more general than GDAL in some ways and it's simply not possible to
> answer this issue completely.  The unhappy news is that there is no
> easy answer but IMO GDAL is not incorrect here.
>
> In that example file the first longitude is 0 and all subsequent
> values are regularly spaced from there up to one cell less than 360,
> so the cell bounds at [0,360] are obvious - but this is not always the
> case. The latitudes are not regular and what was intended cannot
> always be determined in many cases (although in this file the
> boundaries are fairly obviously at [-90,90] offset from the min/max
> values of -87.8638  87.8638 )
>
> For some more background there was a discussion about the possible
> need for a distinction in NetCDF between cell and corner registration
> here:
>
> http://mailman.cgd.ucar.edu/pipermail/cf-metadata/2009/002721.html
>
> In particular this statement is one confirmation I found of the lack
> of cell/corner distinction apart from boundary metadata.
>
> "Coordinate bounds allow edges to be explicit, and you could ask the
> application developer to look
> for those. When not specified, I put the edges halfway between the
> coordinates."
>
> Cheers, Mike.
>
> On Tue, Apr 6, 2010 at 3:32 PM, Pinner, Luke
> <Luke.Pinner@environment.gov.au> wrote:
> > The NetCDF driver computes the pixel centre from lat/lon variables (see
> > http://trac.osgeo.org/gdal/ticket/1506).
> >
> > Is this correct or should it compute pixel upper-left?
> >
> > Using the example NetCDF dataset attached to the above ticket
> > (http://trac.osgeo.org/gdal/attachment/ticket/1506/out.nc), gdalinfo
> > reports the min longitude value to be -1.40625 which is not a valid
> > longitude (it's 1/2 a pixel less than 0 which is the min value in the
> > NetCDF lon variable).
> >
> > gdalinfo out.nc
> > $ gdalinfo -nomd out.nc
> > Warning 1: Latitude grid not spaced evenly.
> > Seting projection for grid spacing is within 0.1 degrees threshold.
> >
> > Driver: netCDF/Network Common Data Format
> > Files: out.nc
> > Size is 128, 64
> > Coordinate System is `'
> > Origin = (-1.406250000000000,89.258462312871046)
> > Pixel Size = (2.812500000000000,-2.789326947277220)
> > Corner Coordinates:
> > Upper Left  (  -1.4062500,  89.2584623)
> > Lower Left  (  -1.4062500, -89.2584623)
> > Upper Right (     358.594,      89.258)
> > Lower Right (     358.594,     -89.258)
> > Center      ( 178.5937500,   0.0000000)
> > Band 1 Block=128x1 Type=Float32, ColorInterp=Undefined
> >  NoData Value=9.96920996838686905e+36
> >
> > Regards
> > Luke
> >
> >
> > ------
> > If you have received this transmission in error please notify us
> immediately by return e-mail and delete all copies. If this e-mail or any
> attachments have been sent to you in error, that error does not constitute
> waiver of any confidentiality, privilege or copyright in respect of
> information in the e-mail or attachments.
> >
> >
> >
> > Please consider the environment before printing this email.
> >
> > ------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/55925344/attachment.html
From randre at gmail.com  Tue Apr 27 12:44:02 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 12:44:09 2010
Subject: [gdal-dev] Getting an WMS without XML file.
In-Reply-To: <z2t55fad2461004060133k7fb713e7tc99c008ffec7793e@mail.gmail.com>
References: <z2t55fad2461004060133k7fb713e7tc99c008ffec7793e@mail.gmail.com>
Message-ID: <g2k9c2015091004270944ib273ca38ma7a611b9fb6404d9@mail.gmail.com>

Doe this not work for you?

$ python
>>> from osgeo import gdal
>>> image = gdal.Open('
http://localhost/cgi-bin/mapserv?map=/var/www/mapfiles/gis_layers/gis_layers.map&REQUEST=GetMap&SERVICE=WMS&version=%221.1.122&REQUEST=GetMap&LAYERS=imagery&STYLES=&BBOX=73.617203,18.168884,134.773590,53.554436&WIDTH=800&HEIGHT=800&FORMAT=image/png;%20mode=24bit&SRS=epsg:4326
')
>>> image.RasterXSize
800
>>> image.RasterYSize
800

Roger
--



On Tue, Apr 6, 2010 at 1:33 AM, Manolo Padron Martinez
<manolopm@gmail.com>wrote:

> Hi:
>
> I'm trying to use gdal to get images from a WMS server, I got a simple
> code to do it (using GDALOpen and RasterIO methods). But I need to
> make the petition without create previously a XML file, I've been
> looking into documentation but I didn't find a way to do it. Anyone
> knows how to do it?
>
> Regards from Canary Islands
>
> Manolo Padron Martinez
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/ac6b9bb9/attachment-0001.html
From randre at gmail.com  Tue Apr 27 12:48:00 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 12:48:05 2010
Subject: [gdal-dev] read envisat with gdal
In-Reply-To: <i2x54dbc1e41004021744nc0378edajc85770269e8a343b@mail.gmail.com>
References: <i2x54dbc1e41004021744nc0378edajc85770269e8a343b@mail.gmail.com>
Message-ID: <g2w9c2015091004270948i7c9bae83hd0e85450546b5e51@mail.gmail.com>

Can you make a small portion of your data available to us?  If GDAL can read
the data file, then it should be able to read this information as well.

Roger
--

On Fri, Apr 2, 2010 at 5:44 PM, menglong yan <yanmenglong@gmail.com> wrote:

> Hi, I want to read envisat with gdal, and I can read the data
> successfully. However I can not get the header information such as
> "FIRST_MID_LAT"(this item could be
> found with  NEST(Next ESA SAR toolbox)) with
> GDALDataset::GetMetadataItem("FIRST_MID_LAT"). I have read the souce
> code in /frmts/envisat/, and I am sure it is
> right to call this function. I turn to Anybody who once did this job
> for some advice. Thank you!
> Kind regards.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/4d01c4c1/attachment.html
From randre at gmail.com  Tue Apr 27 13:00:19 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue Apr 27 13:00:22 2010
Subject: [gdal-dev] read envisat with gdal
In-Reply-To: <g2w9c2015091004270948i7c9bae83hd0e85450546b5e51@mail.gmail.com>
References: <i2x54dbc1e41004021744nc0378edajc85770269e8a343b@mail.gmail.com>
	<g2w9c2015091004270948i7c9bae83hd0e85450546b5e51@mail.gmail.com>
Message-ID: <j2p9c2015091004271000sa46c0cdemab7971061810c69e@mail.gmail.com>

Downloaded a sample file from
http://envisat.esa.int/services/sample_products/aatsr/L2/.  Seems to work
fine in Python.

$ python
>>> from osgeo import gdal
>>> image =
gdal.Open('ATS_MET_2PNETB20020729_070738_000058362008_00092_02150_0873.N1')
>>> image.GetMetadata()
{'MPH_STATE_VECTOR_TIME': '29-JUL-2002 08:14:40.282674', <snip>}
>>> metadata = image.GetMetadata()
>>> metadata['SPH_FIRST_MID_LAT']
'+0058766642'
>>> image.GetMetadataItem('SPH_FIRST_MID_LAT')
'+0058766642'

Can you run gdalinfo on your file and post the output?

Thanks,

Roger
--


On Tue, Apr 27, 2010 at 9:48 AM, Roger Andr? <randre@gmail.com> wrote:

> Can you make a small portion of your data available to us?  If GDAL can
> read the data file, then it should be able to read this information as well.
>
> Roger
> --
>
>
> On Fri, Apr 2, 2010 at 5:44 PM, menglong yan <yanmenglong@gmail.com>wrote:
>
>> Hi, I want to read envisat with gdal, and I can read the data
>> successfully. However I can not get the header information such as
>> "FIRST_MID_LAT"(this item could be
>> found with  NEST(Next ESA SAR toolbox)) with
>> GDALDataset::GetMetadataItem("FIRST_MID_LAT"). I have read the souce
>> code in /frmts/envisat/, and I am sure it is
>> right to call this function. I turn to Anybody who once did this job
>> for some advice. Thank you!
>> Kind regards.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/7b7ba737/attachment.html
From Gary.Smart at goodrich.com  Tue Apr 27 13:01:56 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Tue Apr 27 13:17:03 2010
Subject: [gdal-dev] NITF invalid read of 2 bytes causes crash
Message-ID: <F52876411F027A4FA646577165F65C16321ADE@NHC2EX13.goodrich.root.local>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: farn.044.ntf.zip
Type: application/x-zip-compressed
Size: 6324 bytes
Desc: farn.044.ntf.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/a4cadd02/farn.044.ntf-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: temp.cpp
Type: application/octet-stream
Size: 3716 bytes
Desc: temp.cpp
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/a4cadd02/temp-0001.obj
From Gary.Smart at goodrich.com  Tue Apr 27 13:21:04 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Tue Apr 27 13:28:19 2010
Subject: [gdal-dev] NITF invalid read of 2 bytes causes crash
Message-ID: <1612533758.1272388864495@ace.smi>

This email contained a .zip file attachment. Raytheon does not allow email attachments that are considered likely to contain malicious code. For your protection this attachment has been removed.

If this email is from an unknown source, please simply delete this email.

If this email was expected, and it is from a known sender, you may follow the below suggested instructions to obtain these types of attachments.

+ Instruct the sender to enclose the file(s) in a ".zip" compressed file, and rename the ".zip" compressed file with a different extension, such as, ".rtnzip".  Password protecting the renamed ".zip" compressed file adds an additional layer of protection. When you receive the file, please rename it with the extension ".zip".

Additional instructions and options on how to receive these attachments can be found at:

http://security.it.ray.com/antivirus/extensions.html
http://security.it.ray.com/news/2007/zipfiles.html

Should you have any questions or difficulty with these instructions, please contact the Help Desk at 877.844.4712

---

I have attached a colour NITF image which causes an invalid read within
NITFReadImageLine (nitfimage.c:1661).  This invalid read was detected by
valgrind which I have been using to investigate a crash in my
application - which happens to segfault exactly on this line.  More
often than not, I can read and display this colour image.  Sometimes
though - it crashes my application.  However, even when correctly
displayed, valgrind still reports the invalid read.

 

I have looked at the logic in the function NITFReadImageLine and it
seems to be flawed in that it mallocs an area which seems to be a
function of the number of requested columns, but then copies imagery
into the buffer using a for-loop based on the block size.  Moreover, the
nLineSize computed for the malloc was not big enough for the requested
area anyway.

 

The problem is only really evident in colour images for which reads are
requested that are smaller than the blocksize in the file.  

 

Whilst I cannot be certain that my replacement logic will suffice for
all NITF configs, I certainly think the memory management in this
function AND the corresponding NITFWriteImageLine should be reviewed?
My changes certainly get rid of my read-errors and crashes (find #####
in the attached code snippet).

 

Opinions anyone?

Gary
From sorokina at ornl.gov  Tue Apr 27 13:37:24 2010
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Tue Apr 27 14:00:24 2010
Subject: [gdal-dev] how to use docs? (broken docs on gdal.org)
In-Reply-To: <20100427135254.18405.qmail@s466.sureserver.com>
References: <20100427135254.18405.qmail@s466.sureserver.com>
Message-ID: <FFB0B878-BFE7-4105-B9BB-1078E4ECBD24@ornl.gov>


There are lots of documentation links on the gdal.org site that are broken.  For example this, checked 5 min. ago: 

http://gdal.org/java/
Not Found

The requested URL /java/ was not found on this server.
Apache/2.2.3 (CentOS) Server at gdal.org Port 80

Generating your own copy of docs makes lots of sense.

On Apr 27, 2010, at 9:52 AM, Ivan Lucena wrote:

>> Hi Ivan,
>> Thank you for your timely response!
>>> I am not familiar with Devhelp and I unaware that GDAL uses it. From what I saw on Wikipidea it
>>> looks like an interesting resource but do you know if it can be integrated with Doxygen?
>> It seems not. It seems need a litter more work directly from Doxygen to
>> Devhelp. but I'm not sure about it.
>>> Does it
>>> process the same JavaDoc style annotation? If that is true I think there is a change that we might
>>> auto generate Devhelp by running a script or something like that.
>> But if there is not a doc for querying just like MSDN in Windows, how
>> should I get enough info about GDAL functions?
> 
> You should find enough info on the following pages:
> 
> http://gdal.org/annotated.html
> http://gdal.org/gdal_tutorial.html
> http://gdal.org/gdal_datamodel.html
> http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithNetBeansIDE
> http://trac.osgeo.org/gdal/
> 
> Not in the same fashion of a MS Help or something like that but it pretty much covers everything. See that example here:
> 
> http://gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
> 
> Good luck.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Alex Sorokine
sorokina@ornl.gov




From szekerest at gmail.com  Tue Apr 27 14:31:23 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Apr 27 14:31:31 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <4BD22E36.9070506@pobox.com>
References: <4BD22E36.9070506@pobox.com>
Message-ID: <l2rf3b73b7d1004271131w4a40fd82mac07349f7d106dc7@mail.gmail.com>

+1

Tamas



2010/4/24 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> It seems that the 1.7.2RC2 fixed the serious regressions in
> configure/libtool
> but as Daniel pointed out there was a painful error with the version date
> macro. So I have corrected only that, and issued a new release candidate.
>
>  http://download.osgeo.org/gdal/gdal-1.7.2RC3.tar.gz
>  http://download.osgeo.org/gdal/gdal172RC3.zip
>
> I'm pretty confident of this release, so I'd like to issue an official
> motion
> to promote it to 1.7.2 final.
>
> Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
>
> +1 Frank
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/da55b4cc/attachment.html
From ramirogonzalez at suremptec.com.ar  Tue Apr 27 15:17:17 2010
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Tue Apr 27 15:17:20 2010
Subject: [gdal-dev] OGRLayer::SetFeature fails with out of date OGRFeature
Message-ID: <g2q38b082f61004271217q4bce5b4dtbc1c3087fe1f3dfc@mail.gmail.com>

My application uses OGR to edit ESRI Shapefiles.

If I follow this steps:

1_ Create a feature(OGRFeature::CreateFeature) using the feature definition
from an existing layer(layerA)
2_ Add a field (OGRLayer::CreateField) to layerA
3_ Try to save the feature (OGRLayer::SetFeature) in layerA

I receive a SIGSEGV from function OGRFeature::SetField. I believe this
happens because I modify the layer definition in step 2 leaving the feature
definition out of date.

I'd like to know if there is any way to check if the feature is valid before
calling SetFeature.

Thanks
Ramiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/fe97c148/attachment.html
From even.rouault at mines-paris.org  Tue Apr 27 16:32:43 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 27 16:33:02 2010
Subject: [gdal-dev] OGRLayer::SetFeature fails with out of date OGRFeature
In-Reply-To: <g2q38b082f61004271217q4bce5b4dtbc1c3087fe1f3dfc@mail.gmail.com>
References: <g2q38b082f61004271217q4bce5b4dtbc1c3087fe1f3dfc@mail.gmail.com>
Message-ID: <201004272232.44858.even.rouault@mines-paris.org>

Ramiro,

It is illegal to change the layer definition with CreateField() if you have 
pre-existing features of that layer. This is documented here : 
http://www.gdal.org/ogr/classOGRFeatureDefn.html#40e681d8464b42f1a1fac655f16ac3dd

There's no way to check if the feature is "valid". So, just don't do it ;-)

Le Tuesday 27 April 2010 21:17:17 Ramiro Gonzalez, vous avez ?crit?:
> My application uses OGR to edit ESRI Shapefiles.
>
> If I follow this steps:
>
> 1_ Create a feature(OGRFeature::CreateFeature) using the feature definition
> from an existing layer(layerA)
> 2_ Add a field (OGRLayer::CreateField) to layerA
> 3_ Try to save the feature (OGRLayer::SetFeature) in layerA
>
> I receive a SIGSEGV from function OGRFeature::SetField. I believe this
> happens because I modify the layer definition in step 2 leaving the feature
> definition out of date.
>
> I'd like to know if there is any way to check if the feature is valid
> before calling SetFeature.
>
> Thanks
> Ramiro


From even.rouault at mines-paris.org  Tue Apr 27 16:35:43 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 27 16:35:54 2010
Subject: [gdal-dev] NITF invalid read of 2 bytes causes crash
In-Reply-To: <F52876411F027A4FA646577165F65C16321ADE@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C16321ADE@NHC2EX13.goodrich.root.local>
Message-ID: <201004272235.44319.even.rouault@mines-paris.org>

Issue confirmed and ticket filed as http://trac.osgeo.org/gdal/ticket/3551

Le Tuesday 27 April 2010 19:01:56 Smart, Gary, vous avez ?crit?:
> I have attached a colour NITF image which causes an invalid read within
> NITFReadImageLine (nitfimage.c:1661).  This invalid read was detected by
> valgrind which I have been using to investigate a crash in my
> application - which happens to segfault exactly on this line.  More
> often than not, I can read and display this colour image.  Sometimes
> though - it crashes my application.  However, even when correctly
> displayed, valgrind still reports the invalid read.
>
>
>
> I have looked at the logic in the function NITFReadImageLine and it
> seems to be flawed in that it mallocs an area which seems to be a
> function of the number of requested columns, but then copies imagery
> into the buffer using a for-loop based on the block size.  Moreover, the
> nLineSize computed for the malloc was not big enough for the requested
> area anyway.
>
>
>
> The problem is only really evident in colour images for which reads are
> requested that are smaller than the blocksize in the file.
>
>
>
> Whilst I cannot be certain that my replacement logic will suffice for
> all NITF configs, I certainly think the memory management in this
> function AND the corresponding NITFWriteImageLine should be reviewed?
> My changes certainly get rid of my read-errors and crashes (find #####
> in the attached code snippet).
>
>
>
> Opinions anyone?
>
> Gary


From thlin.box at gmail.com  Tue Apr 27 16:40:32 2010
From: thlin.box at gmail.com (easyl)
Date: Tue Apr 27 16:40:34 2010
Subject: [gdal-dev] Merge the overlapping results from gdal2tiles?
Message-ID: <1272400832680-4970921.post@n2.nabble.com>


I trying to use gdal to generate web map tiles from several raster images
(map1.png, map2.png ...).
Each raster image is processed with these commands (gdal1.6)


>  gdal_translate -strict -of VRT -a_srs EPSG:4326 -gcp ... map1.png
> map1.vrt
> 
>  gdalwarp -of VRT -r cubic -s_srs EPSG:4326 -t_srs EPSG:900913 map1.vrt
> map1.result.vrt
> 
>  gdal2tiles -n -p mercator -z 0-11 -w google -t "map1"  target.result.vrt
> 


After that I will get folders map1, map2 .... mapN containing tiles in
3-level hierarchical directories (zoom/x/y.png).

Now, how can I merge all of them into a single folder with all tiles kept in
their sub directories structure.

Another problem is, that some tiles with the identical same zoom/x/y.png may
can generated from
different source raster image.
In other words, I got several tile images with the identical tile name
(zoom/x/y.png)
which should be merged together.
How can I merge such tile result together? 

Is there any utilities to do that? 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Merge-the-overlapping-results-from-gdal2tiles-tp4970921p4970921.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From bclay at ball.com  Tue Apr 27 21:07:40 2010
From: bclay at ball.com (Clay, Bruce)
Date: Tue Apr 27 21:07:57 2010
Subject: [gdal-dev] problem reading arc from shapefile with OGR
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBE99@daytonmsg2k3.AERO.BALL.COM>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: DEG_trimmed.jpg
Type: image/jpeg
Size: 25223 bytes
Desc: DEG_trimmed.jpg
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100427/17f0f6f9/DEG_trimmed-0001.jpg
From chaitanya.ch at gmail.com  Tue Apr 27 23:23:37 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 27 23:23:39 2010
Subject: [gdal-dev] problem reading arc from shapefile with OGR
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBE99@daytonmsg2k3.AERO.BALL.COM>
References: <AcrmbWxUwMVLYuWNS0OMgLurSBvdSAAAT/Ow>
	<C482FF98AE985A47B8C982FD429C9E34027EBE99@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <j2reb502d881004272023m11dc432bq8b8e924e38b7d5a3@mail.gmail.com>

Bruce,

OGR doesn't support all the Shape Types. Curved line segments show up as
straight line segments. Could this be the case?

On Wed, Apr 28, 2010 at 6:37 AM, Clay, Bruce <bclay@ball.com> wrote:

>  I created a shapefile in ArcMap with 5 objects.  The first two are really
> a collection of many line strings that I copied from a Census Tigerline file
> and the other three I created using the ArcMap editor arc tool.  The
> attached file shows what the shapes look like.
>
>
>
> I can read the two smaller objects using OGR without any problem.  They
> have reasonable point counts and the X/Y data from the ones I looked at in
> the debugger look valid.
>
>
>
> I can not get to the point data in the larger three shapes.  The geometry
> type shows up as linestrings but the point counts are way to low (i.e 28, 10
> and 3).
>
>
>
> I tried to cast them into OGRCurve, OGRMultiLineString, GeometryCollection
> and a few more I think but none of them worked.
>
>
>
> Is there some special way to read data like this?
>
>
>
> Bruce
>
>
>
> This message and any enclosures are intended only for the addressee.  Please
> notify the sender by email if you are not the intended recipient.  If you are
> not the intended recipient, you may not use, copy, disclose, or distribute this
> message or its contents or enclosures to any other person and any such actions
> may be unlawful.  Ball reserves the right to monitor and review all messages
> and enclosures sent to or from this email address.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100428/af6e835f/attachment.html
From warmerdam at pobox.com  Wed Apr 28 00:55:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 28 00:55:42 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <l2rf3b73b7d1004271131w4a40fd82mac07349f7d106dc7@mail.gmail.com>
References: <4BD22E36.9070506@pobox.com>
	<l2rf3b73b7d1004271131w4a40fd82mac07349f7d106dc7@mail.gmail.com>
Message-ID: <4BD7BFC9.3010802@pobox.com>


>     Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.

Folks,

I declare this motion passed with support from Even, Frank, Tamas and Daniel.
1.7.2 is officially released.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Wed Apr 28 02:34:57 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 28 02:35:08 2010
Subject: [gdal-dev] OGRLayer::SetFeature fails with out of date OGRFeature
In-Reply-To: <201004272232.44858.even.rouault@mines-paris.org>
References: <g2q38b082f61004271217q4bce5b4dtbc1c3087fe1f3dfc@mail.gmail.com>
	<201004272232.44858.even.rouault@mines-paris.org>
Message-ID: <4BD7D711.1070608@gmail.com>

Even Rouault wrote:
> Ramiro,
>
> It is illegal to change the layer definition with CreateField() if you have 
> pre-existing features of that layer. This is documented here : 
> http://www.gdal.org/ogr/classOGRFeatureDefn.html#40e681d8464b42f1a1fac655f16ac3dd
>   

Illegal yes, but IMHO segfault should never be an option in a case like 
this. Just consider an interactive program with real-time scripting with 
one of the bindings languages.

The segfault happens in this case in OGRFeature::IsFieldSet 
(ogr_feature.h:193), which does not check that iField is within legal 
limits. The method could check that iField is less or equal to 
poDefn->nFieldCount. That should not be a problem. Probably similar 
checks could/should be done in other methods as well.

At least in shape driver the layer does not assume that the feature 
schema is exactly the same as in layer: it asks the data from the 
feature using type casting methods (GetFieldAsInteger and friends).

I'm going to make a bug report from this.

Best regards,

Ari

> There's no way to check if the feature is "valid". So, just don't do it ;-)
>
> Le Tuesday 27 April 2010 21:17:17 Ramiro Gonzalez, vous avez ?crit :
>   
>> My application uses OGR to edit ESRI Shapefiles.
>>
>> If I follow this steps:
>>
>> 1_ Create a feature(OGRFeature::CreateFeature) using the feature definition
>> from an existing layer(layerA)
>> 2_ Add a field (OGRLayer::CreateField) to layerA
>> 3_ Try to save the feature (OGRLayer::SetFeature) in layerA
>>
>> I receive a SIGSEGV from function OGRFeature::SetField. I believe this
>> happens because I modify the layer definition in step 2 leaving the feature
>> definition out of date.
>>
>> I'd like to know if there is any way to check if the feature is valid
>> before calling SetFeature.
>>
>> Thanks
>> Ramiro
>>     
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   

From pssmaniam at hotmail.com  Wed Apr 28 06:01:52 2010
From: pssmaniam at hotmail.com (Sundaram Subramaniam)
Date: Wed Apr 28 06:02:54 2010
Subject: [gdal-dev] georeferencing image in Hilly terain-regarding
Message-ID: <SNT131-w8BABF307404C641F30C7CB8020@phx.gbl>




I would like to know  does gdalwarp uses the z coordinates of CGP data for  georeferencing the raw tiff image. If yes, the is it  possible to use  the DEM data thecorrection of image relief in hilly terrain. 

Thanks for your replies & guidance in advance 


S.Subramaniam

 		 	   		  
_________________________________________________________________
Catch the latest in the world of fashion
http://lifestyle.in.msn.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100428/c7248244/attachment.html
From warmerdam at pobox.com  Wed Apr 28 06:08:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 28 06:08:28 2010
Subject: [gdal-dev] georeferencing image in Hilly terain-regarding
In-Reply-To: <SNT131-w8BABF307404C641F30C7CB8020@phx.gbl>
References: <SNT131-w8BABF307404C641F30C7CB8020@phx.gbl>
Message-ID: <4BD80915.5070903@pobox.com>

Sundaram Subramaniam wrote:
> 
> I would like to know  does gdalwarp uses the z coordinates of CGP data 
> for  georeferencing the raw tiff image. If yes, the is it  possible to 
> use  the DEM data thecorrection of image relief in hilly terrain.

S.Subramaniam,

No, the gdalwarp polynomial and thin plate spline transformers do not
make any use of the gcp Z's at this time, and there is no mechanism
provided for correction based on image relief in hilly regions.

OSSIM might have such a capability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Wed Apr 28 08:48:37 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Apr 28 08:48:43 2010
Subject: [gdal-dev] Question about Ticket #2706
Message-ID: <4BD82EA5.8030301@free.fr>

I have a problem that seems related to ticket #2706. Has this bug been 
fixed in GDAL 1.7.2 ?

I have created a Tiff file with this WKT :
PROJCS["Geoportail - France metropolitaine",GEOGCS["Reseau geodesique 
francais 1993",DATUM["Reseau geodesique francais 1993",SPHEROID["IAG GRS 
1980",6378137,298.2572221010000,AUTHORITY["IGNF","ELG037"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["IGNF","REG024"]],PRIMEM["Greenwich",0,AUTHORITY["IGNF","LGO01"]],UNIT["degree",0.01745329251994330],AXIS["Longitude",EAST],AXIS["Latitude",NORTH],AUTHORITY["IGNF","RGF93G"]],PROJECTION["Equirectangular",AUTHORITY["IGNF","PRC9001"]],PARAMETER["semi_major",6378137],PARAMETER["semi_minor",6378137],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",0],PARAMETER["standard_parallel_1",46.5],PARAMETER["false_easting",0.000],PARAMETER["false_northing",0.000],UNIT["metre",1],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["IGNF","GEOPORTALFXX"]]

The true_scale latitude (46.5?) seems to be present in the Tiff file :
$ tiffinfo /tmp/test.tif
   Tag 34735: 
1,1,0,20,1024,0,1,1,1025,0,1,1,1026,34737,35,0,2048,0,1,32767,2049,34737,128,35,2050,0,1,32767,2054,0,1,9102,2056,0,1,32767,2057,34736,1,5,2059,34736,1,6,2061,34736,1,7,3072,0,1,32767,3074,0,1,32767,3075,0,1,17,3076,0,1,9001,3078,34736,1,2,3082,34736,1,3,3083,34736,1,4,3088,34736,1,1,3089,34736,1,0,0,0,0,0
   Tag 34736: 
0.000000,0.000000,46.500000,0.000000,0.000000,6378137.000000,298.257222,0.000000

but not in gdalinfo :

Coordinate System is:
PROJCS["Geoportail - France metropolitaine",
     GEOGCS["Reseau geodesique francais 1993",
         DATUM["Reseau_geodesique_francais_1993",
             SPHEROID["IAG GRS 1980",6378137,298.257222101]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Equirectangular"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["standard_parallel_1",0],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]

FYI, I am using libtiff 3.9.2, not the internal Tiff library.

Regards,
Jean-Claude

From warmerdam at pobox.com  Wed Apr 28 09:38:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 28 09:38:24 2010
Subject: [gdal-dev] Question about Ticket #2706
In-Reply-To: <4BD82EA5.8030301@free.fr>
References: <4BD82EA5.8030301@free.fr>
Message-ID: <4BD83A4A.7070703@pobox.com>

Jean-Claude REPETTO wrote:
> I have a problem that seems related to ticket #2706. Has this bug been 
> fixed in GDAL 1.7.2 ?
> 
> I have created a Tiff file with this WKT :
> PROJCS["Geoportail - France metropolitaine",GEOGCS["Reseau geodesique 
> francais 1993",DATUM["Reseau geodesique francais 1993",SPHEROID["IAG GRS 
> 1980",6378137,298.2572221010000,AUTHORITY["IGNF","ELG037"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["IGNF","REG024"]],PRIMEM["Greenwich",0,AUTHORITY["IGNF","LGO01"]],UNIT["degree",0.01745329251994330],AXIS["Longitude",EAST],AXIS["Latitude",NORTH],AUTHORITY["IGNF","RGF93G"]],PROJECTION["Equirectangular",AUTHORITY["IGNF","PRC9001"]],PARAMETER["semi_major",6378137],PARAMETER["semi_minor",6378137],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",0],PARAMETER["standard_parallel_1",46.5],PARAMETER["false_easting",0.000],PARAMETER["false_northing",0.000],UNIT["metre",1],AXIS["Easting",EAST],AXIS["Northing",NORTH],AUTHORITY["IGNF","GEOPORTALFXX"]] 
> 
> 
> The true_scale latitude (46.5?) seems to be present in the Tiff file :
> $ tiffinfo /tmp/test.tif
>   Tag 34735: 
> 1,1,0,20,1024,0,1,1,1025,0,1,1,1026,34737,35,0,2048,0,1,32767,2049,34737,128,35,2050,0,1,32767,2054,0,1,9102,2056,0,1,32767,2057,34736,1,5,2059,34736,1,6,2061,34736,1,7,3072,0,1,32767,3074,0,1,32767,3075,0,1,17,3076,0,1,9001,3078,34736,1,2,3082,34736,1,3,3083,34736,1,4,3088,34736,1,1,3089,34736,1,0,0,0,0,0 
> 
>   Tag 34736: 
> 0.000000,0.000000,46.500000,0.000000,0.000000,6378137.000000,298.257222,0.000000 

Jean-Claude,

What version of libgeotiff are you using?  Could you provide a listgeo
report, or even a pointer to the file in question?  The problem is fixed
within GDAL 1.7.2 as far as I know, but at least one of the patches is
against libgeotiff.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Wed Apr 28 11:24:43 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Apr 28 11:24:46 2010
Subject: [gdal-dev] Question about Ticket #2706
In-Reply-To: <4BD83A4A.7070703@pobox.com>
References: <4BD82EA5.8030301@free.fr> <4BD83A4A.7070703@pobox.com>
Message-ID: <4BD8533B.7080809@free.fr>

Le 28/04/2010 15:38, Frank Warmerdam a ?crit :
>
> What version of libgeotiff are you using? Could you provide a listgeo
> report, or even a pointer to the file in question? The problem is fixed
> within GDAL 1.7.2 as far as I know, but at least one of the patches is
> against libgeotiff.
>
> Best regards,

Frank,

Thanks for your answer. I am using libgeotiff 1.2.5.

$ listgeo /tmp/test.tif
Geotiff_Information:
    Version: 1
    Key_Revision: 1.0
    Tagged_Information:
       ModelTiepointTag (2,3):
          0                0                0
          149504           5402624          0
       ModelPixelScaleTag (1,3):
          8                8                0
       End_Of_Tags.
    Keyed_Information:
       GTModelTypeGeoKey (Short,1): ModelTypeProjected
       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
       GTCitationGeoKey (Ascii,35): "Geoportail - France metropolitaine"
       GeographicTypeGeoKey (Short,1): User-Defined
       GeogCitationGeoKey (Ascii,128): "GCS Name = Reseau geodesique 
francais 1993|Datum = Reseau geodesique francais 1993|Ellipsoid = IAG 
GRS 1980|Primem = Greenwich|"
       GeogGeodeticDatumGeoKey (Short,1): User-Defined
       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
       GeogEllipsoidGeoKey (Short,1): User-Defined
       GeogSemiMajorAxisGeoKey (Double,1): 6378137
       GeogInvFlatteningGeoKey (Double,1): 298.257222
       GeogPrimeMeridianLongGeoKey (Double,1): 0
       ProjectedCSTypeGeoKey (Short,1): User-Defined
       ProjectionGeoKey (Short,1): User-Defined
       ProjCoordTransGeoKey (Short,1): CT_Equirectangular
       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
       ProjStdParallel1GeoKey (Double,1): 46.5         <-------------
       ProjFalseEastingGeoKey (Double,1): 0
       ProjFalseNorthingGeoKey (Double,1): 0
       ProjCenterLongGeoKey (Double,1): 0
       ProjCenterLatGeoKey (Double,1): 0
       End_Of_Keys.
    End_Of_Geotiff.

Projection Method: CT_Equirectangular
    ProjCenterLatGeoKey: 0.000000 (  0d 0' 0.00"N)
    ProjCenterLongGeoKey: 0.000000 (  0d 0' 0.00"E)
    ProjFalseEastingGeoKey: 0.000000 m
    ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9001/metre (1.000000m)


The file is available at : http://dl.free.fr/jT99pb6Ct

Best regards,
Jean-Claude
From jrepetto at free.fr  Wed Apr 28 12:14:58 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Apr 28 12:47:44 2010
Subject: [gdal-dev] Question about Ticket #2706
In-Reply-To: <4BD83A4A.7070703@pobox.com>
References: <4BD82EA5.8030301@free.fr> <4BD83A4A.7070703@pobox.com>
Message-ID: <4BD85F02.9020701@free.fr>

Le 28/04/2010 15:38, Frank Warmerdam a ?crit :

> What version of libgeotiff are you using?

I have installed libgeotiff-1.3.0RC2, and the problem has gone :

$ listgeo /tmp/test.tif
Geotiff_Information:
    Version: 1
    Key_Revision: 1.0
    Tagged_Information:
       ModelTiepointTag (2,3):
          0                0                0
          149504           5402624          0
       ModelPixelScaleTag (1,3):
          8                8                0
       End_Of_Tags.
    Keyed_Information:
       GTModelTypeGeoKey (Short,1): ModelTypeProjected
       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
       GTCitationGeoKey (Ascii,35): "Geoportail - France metropolitaine"
       GeographicTypeGeoKey (Short,1): User-Defined
       GeogCitationGeoKey (Ascii,128): "GCS Name = Reseau geodesique 
francais 1993|Datum = Reseau geodesique francais 1993|Ellipsoid = IAG 
GRS 1980|Primem = Greenwich|"
       GeogGeodeticDatumGeoKey (Short,1): User-Defined
       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
       GeogEllipsoidGeoKey (Short,1): User-Defined
       GeogSemiMajorAxisGeoKey (Double,1): 6378137
       GeogInvFlatteningGeoKey (Double,1): 298.257222101
       GeogPrimeMeridianLongGeoKey (Double,1): 0
       ProjectedCSTypeGeoKey (Short,1): User-Defined
       ProjectionGeoKey (Short,1): User-Defined
       ProjCoordTransGeoKey (Short,1): CT_Equirectangular
       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
       ProjStdParallel1GeoKey (Double,1): 46.5
       ProjFalseEastingGeoKey (Double,1): 0
       ProjFalseNorthingGeoKey (Double,1): 0
       ProjCenterLongGeoKey (Double,1): 0
       ProjCenterLatGeoKey (Double,1): 0
       End_Of_Keys.
    End_Of_Geotiff.

Projection Method: CT_Equirectangular
    ProjCenterLatGeoKey: 0.000000 (  0d 0' 0.00"N)
    ProjCenterLongGeoKey: 0.000000 (  0d 0' 0.00"E)
    ProjStdParallel1GeoKey: 46.500000 ( 46d30' 0.00"N)
    ProjFalseEastingGeoKey: 0.000000 m
    ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9001/metre (1.000000m)


$ gdalinfo /tmp/test.tif
Driver: GTiff/GeoTIFF
Files: /tmp/test.tif
Size is 512, 512
Coordinate System is:
PROJCS["Geoportail - France metropolitaine",
     GEOGCS["Reseau geodesique francais 1993",
         DATUM["Reseau_geodesique_francais_1993",
             SPHEROID["IAG GRS 1980",6378137,298.257222101]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Equirectangular"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["standard_parallel_1",46.5],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]


Best regards,
Jean-Claude
From Konstantin.Baumann at autodesk.com  Thu Apr 29 06:18:03 2010
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Thu Apr 29 06:18:23 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <4BD70276.90209@mapgears.com>
References: <4BD22E36.9070506@pobox.com> <4BD70276.90209@mapgears.com>
Message-ID: <D20FC5C02CA4AB41891CFE76D91C57A97017177BBA@ADSK-NAMSG-02.MGDADSK.autodesk.com>

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Daniel Morissette
> Sent: Tuesday, April 27, 2010 17:28
> To: gdal-dev
> Subject: Re: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final
> Release
> 
> Frank Warmerdam wrote:
> > Folks,
> >
> > It seems that the 1.7.2RC2 fixed the serious regressions in
> > configure/libtool
> > but as Daniel pointed out there was a painful error with the version
> date
> > macro. So I have corrected only that, and issued a new release
> candidate.
> >
> >   http://download.osgeo.org/gdal/gdal-1.7.2RC3.tar.gz
> >   http://download.osgeo.org/gdal/gdal172RC3.zip
> >
> > I'm pretty confident of this release, so I'd like to issue an
> official
> > motion
> > to promote it to 1.7.2 final.
> >
> > Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
> >
> 
> I presume you meant "GDAL/OGR 1.7.3 _RC3_ is declared the official
> 1.7.2 release."

And I presume you all meant "GDAL/OGR 1.7._2_ _RC3_ is declared the official 1.7.2 release", right? :-)

Kosta
From eloi.ribeiro at gmail.com  Thu Apr 29 06:35:30 2010
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Thu Apr 29 06:35:33 2010
Subject: [gdal-dev] Reading GRIB2 with GDAL 1.6.3 leeds to Warning:
	Investigate Template 4.8 bytes 35-41
Message-ID: <q2xfbc074701004290335x27e42072h9a21b4e23e71ad26@mail.gmail.com>

Hi,

I keep receiving this warning using GDAL (1.6.3 released 2009/11/19 on
Ubuntu desktop 9.10) whith GRIB2 files:

"Warning: Investigate Template 4.8 bytes 35-41
Warning: Investigate Template 4.8 bytes 35-41
(...)
Warning: Investigate Template 4.8 bytes 35-41
Warning: Investigate Template 4.8 bytes 35-41
Segmentation fault"

The strange thing is that it works fine with some GRIB2 data, like this
file[1]
but with some other's, from the same source[2], just won't work at all, like
this one[3].

Do you have any suggestion about this issue? Is there any workaround?

With GRIB 1 version I didn't had any problems.

[1] http://dl.dropbox.com/u/1735137/pgbl01.gdas.T_MIN.2m.grb2
[2] http://dss.ucar.edu/datasets/ds093.2/
[3] http://dl.dropbox.com/u/1735137/ipvlnl.gdas.TMP.SFC.grb2

Thanks for reading till here. By,

-- 
Eloi Ribeiro
GIS Analyst
39,45? -4,40?
http://eloiribeiro.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100429/99c7d49e/attachment.html
From dmorissette at mapgears.com  Thu Apr 29 09:15:13 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Apr 29 09:15:16 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <D20FC5C02CA4AB41891CFE76D91C57A97017177BBA@ADSK-NAMSG-02.MGDADSK.autodesk.com>
References: <4BD22E36.9070506@pobox.com> <4BD70276.90209@mapgears.com>
	<D20FC5C02CA4AB41891CFE76D91C57A97017177BBA@ADSK-NAMSG-02.MGDADSK.autodesk.com>
Message-ID: <4BD98661.2050105@mapgears.com>

Konstantin Baumann wrote:
>>>
>>> Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
>>>
>> I presume you meant "GDAL/OGR 1.7.3 _RC3_ is declared the official
>> 1.7.2 release."
> 
> And I presume you all meant "GDAL/OGR 1.7._2_ _RC3_ is declared the official 1.7.2 release", right? :-)
> 

Nice catch! :)  Yes, that's what I meant.  :)

-- 
Daniel Morissette
http://www.mapgears.com/
From warmerdam at pobox.com  Thu Apr 29 09:15:19 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 29 09:15:27 2010
Subject: [gdal-dev] Motion: Promote GDAL/OGR 1.7.2 RC3 to Final Release
In-Reply-To: <D20FC5C02CA4AB41891CFE76D91C57A97017177BBA@ADSK-NAMSG-02.MGDADSK.autodesk.com>
References: <4BD22E36.9070506@pobox.com> <4BD70276.90209@mapgears.com>
	<D20FC5C02CA4AB41891CFE76D91C57A97017177BBA@ADSK-NAMSG-02.MGDADSK.autodesk.com>
Message-ID: <4BD98667.1090102@pobox.com>

Konstantin Baumann wrote:
>>> Motion: GDAL/OGR 1.7.3 RC2 is declared the official 1.7.2 release.
>>>
>> I presume you meant "GDAL/OGR 1.7.3 _RC3_ is declared the official
>> 1.7.2 release."
> 
> And I presume you all meant "GDAL/OGR 1.7._2_ _RC3_ is declared the official 1.7.2 release", right? :-)

Yes, my mistake.


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Apr 29 09:35:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 29 09:35:40 2010
Subject: [gdal-dev] Reading GRIB2 with GDAL 1.6.3 leeds to Warning:
	Investigate Template 4.8 bytes 35-41
In-Reply-To: <q2xfbc074701004290335x27e42072h9a21b4e23e71ad26@mail.gmail.com>
References: <q2xfbc074701004290335x27e42072h9a21b4e23e71ad26@mail.gmail.com>
Message-ID: <4BD98B24.2030606@pobox.com>

Eloi Ribeiro wrote:
> Hi,
> 
> I keep receiving this warning using GDAL (1.6.3 released 2009/11/19 on 
> Ubuntu desktop 9.10) whith GRIB2 files:
> 
> "Warning: Investigate Template 4.8 bytes 35-41
> Warning: Investigate Template 4.8 bytes 35-41
> (...)
> Warning: Investigate Template 4.8 bytes 35-41
> Warning: Investigate Template 4.8 bytes 35-41
> Segmentation fault"

Eloi,

The message comes from this part of:

gdal/frmts/grid/degrib18/degrib/inventory.cpp


          case GS4_STATISTIC: /* 4.8 */
             if (InventoryParseTime (*buffer + 35 - 5, &(inv->validTime)) != 0) {
                printf ("Warning: Investigate Template 4.8 bytes 35-41\n");
                inv->validTime = inv->refTime + inv->foreSec;
             }

Basically, it appears that it means there was a problem parsing
a date in the grib file, and it is reported as a warning.

There is no particular reason to believe it is related to the crash
you see with some files.

You might want to file a ticket with one of the files resulting in a
crash for further investigation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Apr 29 10:37:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 29 10:37:15 2010
Subject: [gdal-dev] Error while Warping GTiff to EPSG3763
In-Reply-To: <t2la75b68d61004270704q6473872bpcfe6b51d518bd1ad@mail.gmail.com>
References: <h2ga75b68d61004270314zd557f2bbm5155739a91c00338@mail.gmail.com>
	<t2la75b68d61004270704q6473872bpcfe6b51d518bd1ad@mail.gmail.com>
Message-ID: <4BD99996.2040604@pobox.com>

Franz Schiller wrote:
> Greetings
> 
> I've been using GDAL for a while without any major issues or 
> difficulties. But, now I'm facing a difficulty with a gdalwarp 
> operation. And i hope that someone can help me or giving me a few tips:
> I'm trying to do this: Converting a Geotiff to a EPSG 3763 (Portuguese 
> Coordinate system)
> gdalwarp -t_srs 'EPSG:3763' ROI_QB_MUL_2.tif out.tif
> 
> And I get this:
> ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.

Franz,

I constructed an input file that is fairly similar to yours and tried
a similar warp and did not encounter this problem.  Can you make your file
available for me to test with?  I suspect there is a problem with the way
your software is setup. Perhaps the coordinate system dictionary is not
being found.

You might get more information if you enable debug output:

   gdalwarp -t_srs EPSG:3763 ROI_QB_MUL_2.tif out.tif --debug on

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From lambi at ucar.edu  Thu Apr 29 11:28:19 2010
From: lambi at ucar.edu (lambi@ucar.edu)
Date: Thu Apr 29 11:38:29 2010
Subject: [gdal-dev] Projecting points on a mercator projection
Message-ID: <e42ad599d3f9214a655e5e3f94b33fe5.squirrel@mail.rap.ucar.edu>

Hello,

I'm trying to figure out how to take a list of points and put them on a
mercator projected image using the gdal python bindings.  I'm trying to
match it with a NDFD grid that I've been able to create and put on google
maps from a GRIB2 file.  This is what I have:

geo = [-14483681.357462916523218,
          7192.681255611132656,
          0,
          6915896.954714655876160,
          0,
          -6738.891395318105424]
nx = 1073
ny = 689
driver = gdal.GetDriverByName("GTiff")
dst_ds = driver.Create(fname, nx, ny, 4, gdal.GDT_Byte)
dst_ds.SetGeoTransform(geo)
oproj = osr.SpatialReference()
oproj.ImportFromWkt('PROJCS["unnamed",GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]')

iproj = osr.SpatialReference()
iproj.ImportFromWkt('GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]')

for i in range(1,5):
    dst_ds.GetRasterBand(i).WriteArray(numpy.zeros((ny, nx)))

transform = osr.CoordinateTransformation(iproj,oproj)
dst_ds.SetProjection(self.oproj.ExportToWkt())
Rband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
Aband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
geom = gdal.InvGeoTransform(geo)[1]

for point in points:
    lat = point[0]
    lon = point[1]
    (gx, gy, gz) = transform.TransformPoint(lon,lat)
    (gx, gy) = gdal.ApplyGeoTransform(geom, gx, gy)
    Rband[gy][gx] = 255
    Aband[gy][gx] = 255
dst_ds.GetRasterBand(1).WriteArray(Rband)
dst_ds.GetRasterBand(4).WriteArray(Aband)

This results in a semi-correct image but it also has lots of points that
are negative that wrap around the image and don't look right.  I also know
this isn't taking into account that the image size is 1073x689.  What I
expect from ApplyGeoTransform with the inverse geotransform is (x,y) where
(x,y) are all positive and within the 1073x689 domain or can be scaled to
fit in that domain but I don't understand the negative points.  Any
suggestions?

Thanks,
Brice



From lambi at ucar.edu  Thu Apr 29 11:57:55 2010
From: lambi at ucar.edu (Brice Lambi)
Date: Thu Apr 29 11:57:59 2010
Subject: [gdal-dev] Projecting points on a mercator projection
In-Reply-To: <e42ad599d3f9214a655e5e3f94b33fe5.squirrel@mail.rap.ucar.edu>
References: <e42ad599d3f9214a655e5e3f94b33fe5.squirrel@mail.rap.ucar.edu>
Message-ID: <4BD9AC83.8020704@ucar.edu>

Also, this is the gdalinfo of the image I am trying to match:

Driver: GTiff/GeoTIFF
Files: /tmp/1725.tif
Size is 1073, 689
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-14483681.357462916523218,6915896.954714655876160)
Pixel Size = (7192.681255611132656,-6738.891395318105424)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-14483681.357, 6915896.955) (130d 6'32.84"W, 52d49'15.77"N)
Lower Left  (-14483681.357, 2272800.783) (130d 6'32.84"W, 20d 7'19.33"N)
Upper Right (-6765934.370, 6915896.955) ( 60d46'45.92"W, 52d49'15.77"N)
Lower Right (-6765934.370, 2272800.783) ( 60d46'45.92"W, 20d 7'19.33"N)
Center      (-10624807.864, 4594348.869) ( 95d26'39.38"W, 38d17'33.03"N)
Band 1 Block=1073x1 Type=Float64, ColorInterp=Gray
  NoData Value=-9999


lambi@ucar.edu wrote:
> Hello,
> 
> I'm trying to figure out how to take a list of points and put them on a
> mercator projected image using the gdal python bindings.  I'm trying to
> match it with a NDFD grid that I've been able to create and put on google
> maps from a GRIB2 file.  This is what I have:
> 
> geo = [-14483681.357462916523218,
>           7192.681255611132656,
>           0,
>           6915896.954714655876160,
>           0,
>           -6738.891395318105424]
> nx = 1073
> ny = 689
> driver = gdal.GetDriverByName("GTiff")
> dst_ds = driver.Create(fname, nx, ny, 4, gdal.GDT_Byte)
> dst_ds.SetGeoTransform(geo)
> oproj = osr.SpatialReference()
> oproj.ImportFromWkt('PROJCS["unnamed",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]')
> 
> iproj = osr.SpatialReference()
> iproj.ImportFromWkt('GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]')
> 
> for i in range(1,5):
>     dst_ds.GetRasterBand(i).WriteArray(numpy.zeros((ny, nx)))
> 
> transform = osr.CoordinateTransformation(iproj,oproj)
> dst_ds.SetProjection(self.oproj.ExportToWkt())
> Rband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
> Aband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
> geom = gdal.InvGeoTransform(geo)[1]
> 
> for point in points:
>     lat = point[0]
>     lon = point[1]
>     (gx, gy, gz) = transform.TransformPoint(lon,lat)
>     (gx, gy) = gdal.ApplyGeoTransform(geom, gx, gy)
>     Rband[gy][gx] = 255
>     Aband[gy][gx] = 255
> dst_ds.GetRasterBand(1).WriteArray(Rband)
> dst_ds.GetRasterBand(4).WriteArray(Aband)
> 
> This results in a semi-correct image but it also has lots of points that
> are negative that wrap around the image and don't look right.  I also know
> this isn't taking into account that the image size is 1073x689.  What I
> expect from ApplyGeoTransform with the inverse geotransform is (x,y) where
> (x,y) are all positive and within the 1073x689 domain or can be scaled to
> fit in that domain but I don't understand the negative points.  Any
> suggestions?
> 
> Thanks,
> Brice
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lambi at ucar.edu  Thu Apr 29 12:31:24 2010
From: lambi at ucar.edu (Brice Lambi)
Date: Thu Apr 29 12:31:27 2010
Subject: [gdal-dev] Projecting points on a mercator projection
In-Reply-To: <e42ad599d3f9214a655e5e3f94b33fe5.squirrel@mail.rap.ucar.edu>
References: <e42ad599d3f9214a655e5e3f94b33fe5.squirrel@mail.rap.ucar.edu>
Message-ID: <4BD9B45C.3090406@ucar.edu>

This actually works just as expected but I was being dense.  The odd
points with the negative coords are in Alaska and Hawaii which is
outside of this domain.  After removing these and accounting for the
image size:

gx = gx % 1073
gy = gy % 689

everything works as expected.



lambi@ucar.edu wrote:
> Hello,
> 
> I'm trying to figure out how to take a list of points and put them on a
> mercator projected image using the gdal python bindings.  I'm trying to
> match it with a NDFD grid that I've been able to create and put on google
> maps from a GRIB2 file.  This is what I have:
> 
> geo = [-14483681.357462916523218,
>           7192.681255611132656,
>           0,
>           6915896.954714655876160,
>           0,
>           -6738.891395318105424]
> nx = 1073
> ny = 689
> driver = gdal.GetDriverByName("GTiff")
> dst_ds = driver.Create(fname, nx, ny, 4, gdal.GDT_Byte)
> dst_ds.SetGeoTransform(geo)
> oproj = osr.SpatialReference()
> oproj.ImportFromWkt('PROJCS["unnamed",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]')
> 
> iproj = osr.SpatialReference()
> iproj.ImportFromWkt('GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]')
> 
> for i in range(1,5):
>     dst_ds.GetRasterBand(i).WriteArray(numpy.zeros((ny, nx)))
> 
> transform = osr.CoordinateTransformation(iproj,oproj)
> dst_ds.SetProjection(self.oproj.ExportToWkt())
> Rband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
> Aband = numpy.zeros([dst_ds.RasterYSize,dst_ds.RasterXSize])
> geom = gdal.InvGeoTransform(geo)[1]
> 
> for point in points:
>     lat = point[0]
>     lon = point[1]
>     (gx, gy, gz) = transform.TransformPoint(lon,lat)
>     (gx, gy) = gdal.ApplyGeoTransform(geom, gx, gy)
>     Rband[gy][gx] = 255
>     Aband[gy][gx] = 255
> dst_ds.GetRasterBand(1).WriteArray(Rband)
> dst_ds.GetRasterBand(4).WriteArray(Aband)
> 
> This results in a semi-correct image but it also has lots of points that
> are negative that wrap around the image and don't look right.  I also know
> this isn't taking into account that the image size is 1073x689.  What I
> expect from ApplyGeoTransform with the inverse geotransform is (x,y) where
> (x,y) are all positive and within the 1073x689 domain or can be scaled to
> fit in that domain but I don't understand the negative points.  Any
> suggestions?
> 
> Thanks,
> Brice
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From alexander.bruy at gmail.com  Thu Apr 29 13:09:19 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Apr 29 13:11:12 2010
Subject: [gdal-dev] Create new fields in existing shapefile with Python
Message-ID: <20100429200919.e00862f2.alexander.bruy@gmail.com>

Hi all,

when writing a script in Python for processing shapefiles I found
that I can add to the shapefile new fields with the same name many
times without any error or warning. But AFAIK all fields in shapefile
must have unique field names. Is this a bug and I need to post a
ticket? Or maybe I do something wrong?

Here is code

#!/usr/bin/env python
# -*- coding: utf-8 -*-

try:
  from osgeo import ogr
except ImportError:
  import ogr

import sys

def createField( inLayer, fieldName ):
  fieldDef = ogr.FieldDefn( fieldName, ogr.OFTReal )
  fieldDef.SetWidth( 12 )
  fieldDef.SetPrecision( 4 )
  if inLayer.CreateField( fieldDef ) != 0:
    print "Can't create field %s" % fieldDef.GetNameRef()
    return False
  return True

if __name__ == '__main__':
  args = sys.argv[ 1: ]
  filePath = args[ 0 ]
  inShape = ogr.Open( filePath, True )
  if inShape is None:
    print 'Unable to open shapefile', filePath
    sys.exit( 1 )

  inLayer = inShape.GetLayer( 0 )
  for i in range( 3 ):
    name = 'new_field'
    if not createField( inLayer, name ):
      print 'ERROR'
      sys.exit( 1 )

Script get from commandline path to any shapefile and adds to it
4 new fields with same name.
My software GDAL/OGR 1.6.3 with Python 2.5.2 under Linux.

Thanks
-- 
Alexander Bruy
From chaitanya.ch at gmail.com  Thu Apr 29 14:00:21 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 29 14:00:24 2010
Subject: [gdal-dev] Create new fields in existing shapefile with Python
In-Reply-To: <20100429200919.e00862f2.alexander.bruy@gmail.com>
References: <20100429200919.e00862f2.alexander.bruy@gmail.com>
Message-ID: <o2neb502d881004291100m6b36340fxa39976b7085abdfb@mail.gmail.com>

Alexander,

This has been fixed in http://trac.osgeo.org/gdal/ticket/3247
Use the latest version 1.7 overcome this issue. It was not incorporated in
1.6 branch.

On Thu, Apr 29, 2010 at 10:39 PM, Alexander Bruy
<alexander.bruy@gmail.com>wrote:

> Hi all,
>
> when writing a script in Python for processing shapefiles I found
> that I can add to the shapefile new fields with the same name many
> times without any error or warning. But AFAIK all fields in shapefile
> must have unique field names. Is this a bug and I need to post a
> ticket? Or maybe I do something wrong?
>
> Here is code
>
> #!/usr/bin/env python
> # -*- coding: utf-8 -*-
>
> try:
>  from osgeo import ogr
> except ImportError:
>  import ogr
>
> import sys
>
> def createField( inLayer, fieldName ):
>  fieldDef = ogr.FieldDefn( fieldName, ogr.OFTReal )
>  fieldDef.SetWidth( 12 )
>  fieldDef.SetPrecision( 4 )
>  if inLayer.CreateField( fieldDef ) != 0:
>    print "Can't create field %s" % fieldDef.GetNameRef()
>    return False
>  return True
>
> if __name__ == '__main__':
>  args = sys.argv[ 1: ]
>  filePath = args[ 0 ]
>  inShape = ogr.Open( filePath, True )
>  if inShape is None:
>    print 'Unable to open shapefile', filePath
>    sys.exit( 1 )
>
>  inLayer = inShape.GetLayer( 0 )
>  for i in range( 3 ):
>    name = 'new_field'
>    if not createField( inLayer, name ):
>      print 'ERROR'
>      sys.exit( 1 )
>
> Script get from commandline path to any shapefile and adds to it
> 4 new fields with same name.
> My software GDAL/OGR 1.6.3 with Python 2.5.2 under Linux.
>
> Thanks
> --
> Alexander Bruy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100429/ff107a63/attachment.html
From mauricio.dev at gmail.com  Thu Apr 29 16:01:05 2010
From: mauricio.dev at gmail.com (=?ISO-8859-1?Q?Maur=EDcio_de_Paulo?=)
Date: Thu Apr 29 16:01:08 2010
Subject: [gdal-dev] SIRGAS 2000 EPSG
Message-ID: <s2tf0f9bf091004291301u53d5baf2ze902be84244611e4@mail.gmail.com>

Hi list,
I was recently trying to use OGRSpatialReference::GetAuthorityCode from the
python API and I've found that it worked on WGS 84 UTM but not on SIRGAS
2000 UTM.
Sirgas: http://spatialreference.org/ref/epsg/31974
WGS: http://spatialreference.org/ref/epsg/32720
I've taken the .prj description from both sites and used as the wkt. Ok,
I've found that the wkt is different when compared to the prj file on the
epsg site. Still, when recognizing a shapefile what I find is the .prj file.
Using the code bellow OSR returns the wgs 84's EPSG fine but doesn't return
SIRGAS'.
Anyone know why?

import osr
wgssr=osr.SpatialReference()
wgssr.ImportFromWkt("""PROJCS["WGS_1984_UTM_Zone_20S",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-63],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]""")
wgssr.AutoIdentifyEPSG()
print wgssr.GetAuthorityCode(None)

sirgassr=osr.SpatialReference()
sirgassr.ImportFromWkt("""PROJCS["SIRGAS 2000 / UTM zone 20N",GEOGCS["SIRGAS
2000",DATUM["D_SIRGAS_2000",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-63],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]""")
sirgassr.AutoIdentifyEPSG()
print sirgassr.GetAuthorityCode(None)

-- 
Maur?cio de Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100429/a073cd38/attachment.html
From even.rouault at mines-paris.org  Thu Apr 29 16:41:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 29 16:42:08 2010
Subject: [gdal-dev] SIRGAS 2000 EPSG
In-Reply-To: <s2tf0f9bf091004291301u53d5baf2ze902be84244611e4@mail.gmail.com>
References: <s2tf0f9bf091004291301u53d5baf2ze902be84244611e4@mail.gmail.com>
Message-ID: <201004292241.59200.even.rouault@mines-paris.org>

Maur?cio,

The doc of AutoIdentifyEPSG() tells :
"""
 * This method inspects a WKT definition, and adds EPSG authority nodes
 * where an aspect of the coordinate system can be easily and safely 
 * corresponded with an EPSG identifier.  In practice, this method will 
 * evolve over time.  In theory it can add authority nodes for any object
 * (ie. spheroid, datum, GEOGCS, units, and PROJCS) that could have an 
 * authority node.  Mostly this is useful to inserting appropriate 
 * PROJCS codes for common formulations (like UTM n WGS84). 
"""

In practice, the current state of the code is that it can only recognize 
geographic or UTM coordinate systems on WGS72, WGS84, NAD27 or NAD83 datums. 
This could be extended to recognized other coordinate systems, but this would 
become rather arbitrary to decide which ones are elligible and which ones are 
not... 

Le Thursday 29 April 2010 22:01:05 Maur?cio de Paulo, vous avez ?crit?:
> Hi list,
> I was recently trying to use OGRSpatialReference::GetAuthorityCode from the
> python API and I've found that it worked on WGS 84 UTM but not on SIRGAS
> 2000 UTM.
> Sirgas: http://spatialreference.org/ref/epsg/31974
> WGS: http://spatialreference.org/ref/epsg/32720
> I've taken the .prj description from both sites and used as the wkt. Ok,
> I've found that the wkt is different when compared to the prj file on the
> epsg site. Still, when recognizing a shapefile what I find is the .prj
> file. Using the code bellow OSR returns the wgs 84's EPSG fine but doesn't
> return SIRGAS'.
> Anyone know why?
>
> import osr
> wgssr=osr.SpatialReference()
> wgssr.ImportFromWkt("""PROJCS["WGS_1984_UTM_Zone_20S",GEOGCS["GCS_WGS_1984"
>,DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Gree
>nwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercat
>or"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-63],PAR
>AMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["f
>alse_northing",10000000],UNIT["Meter",1]]""") wgssr.AutoIdentifyEPSG()
> print wgssr.GetAuthorityCode(None)
>
> sirgassr=osr.SpatialReference()
> sirgassr.ImportFromWkt("""PROJCS["SIRGAS 2000 / UTM zone
> 20N",GEOGCS["SIRGAS
> 2000",DATUM["D_SIRGAS_2000",SPHEROID["GRS_1980",6378137,298.257222101]],PRI
>MEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transver
>se_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian"
>,-63],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PAR
>AMETER["false_northing",0],UNIT["Meter",1]]""") sirgassr.AutoIdentifyEPSG()
> print sirgassr.GetAuthorityCode(None)


From SGONG at mdacorporation.com  Thu Apr 29 21:52:01 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Thu Apr 29 21:56:33 2010
Subject: [gdal-dev] how to submit  modified drivers for GDAL
Message-ID: <5F76F80A436C1146A7C04C6F844026FB061047E3@VMXYVR2.ds.mda.ca>

Hi list,

My colleague, Adam Klein, and I have made changes to the following drivers:
netCDF: corrects for longitudes >180 deg (western hemisphere)
RSAT2: able to ingest NITF complex products
TSX: utilizes all GCPs instead of the default of 5 (4 corners + 1 centre)

Please advise how to submit the changes.

BTW, has ScanSAR mode been added for TerraSAR?

Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100429/e30b8ad3/attachment-0001.html
From logonee at gmail.com  Thu Apr 29 22:30:13 2010
From: logonee at gmail.com (logon)
Date: Thu Apr 29 22:30:15 2010
Subject: [gdal-dev] Building GDAL with HDF4
Message-ID: <1272594613683-4983604.post@n2.nabble.com>


Hello,

I am attempting to build gdal 1.7.1 with hdf4 4.2.5 on windows VS 2008.  I
built HDF with no problems, however when I try to build GDAL with HDF
(MODIFY nmake) it fails because of linker errors.

Any help would be greatly appreciated.

Sample of errors......

1>hdf4imagedataset.obj : error LNK2019: unresolved external symbol
__imp__GRgetlutid referenced in function "public: static class GDALDataset *
__cdecl HDF4ImageDataset::Open(class GDALOpenInfo *)"
(?Open@HDF4ImageDataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
1>hdf4imagedataset.obj : error LNK2019: unresolved external symbol
__imp__GRattrinfo referenced in function "public: static class GDALDataset *
__cdecl HDF4ImageDataset::Open(class GDALOpenInfo *)"
(?Open@HDF4ImageDataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Building-GDAL-with-HDF4-tp4983604p4983604.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Thu Apr 29 16:42:09 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Apr 29 23:45:45 2010
Subject: [gdal-dev] how to submit  modified drivers for GDAL
In-Reply-To: <5F76F80A436C1146A7C04C6F844026FB061047E3@VMXYVR2.ds.mda.ca>
References: <5F76F80A436C1146A7C04C6F844026FB061047E3@VMXYVR2.ds.mda.ca>
Message-ID: <4BD9EF21.7090207@pmldnet.com>

Hi Shawn/Adam,

My suggestion is that you should file a ticket for each problem you solved describing the reasons 
for the changes maid. You should attach the changed source code to the ticket and some sample data 
too (or the path to where I get download it from) so that we can test your changes.

Talking about test, before all that, I would suggest you to run gdal_autotest on your site for those 
driver that you have changed. That would help you guys to identify if there is any undesirables side 
effect caused by your changes.

Best regards,

Ivan

Shawn GONG wrote:
> Hi list,
> 
> My colleague, Adam Klein, and I have made changes to the following drivers:
> netCDF: corrects for longitudes >180 deg (western hemisphere)
> RSAT2: able to ingest NITF complex products
> TSX: utilizes all GCPs instead of the default of 5 (4 corners + 1 centre)
> 
> Please advise how to submit the changes.
> 
> BTW, has ScanSAR mode been added for TerraSAR?
> 
> Thanks,
> Shawn
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ksshannon at gmail.com  Thu Apr 29 23:48:39 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Apr 29 23:48:56 2010
Subject: [gdal-dev] how to submit modified drivers for GDAL
In-Reply-To: <5F76F80A436C1146A7C04C6F844026FB061047E3@VMXYVR2.ds.mda.ca>
References: <5F76F80A436C1146A7C04C6F844026FB061047E3@VMXYVR2.ds.mda.ca>
Message-ID: <t2xc28f2e141004292048v67661bf5v327b3d92fc4217f6@mail.gmail.com>

Shawn,
I would be willing to test your patches for the netCDF driver if you file a
ticket and supply sample data, as Ivan stated. Thanks

On Apr 29, 2010 7:56 PM, "Shawn GONG" <SGONG@mdacorporation.com> wrote:

 Hi list,

My colleague, Adam Klein, and I have made changes to the following drivers:
netCDF: corrects for longitudes >180 deg (western hemisphere)
RSAT2: able to ingest NITF complex products
TSX: utilizes all GCPs instead of the default of 5 (4 corners + 1 centre)

Please advise how to submit the changes.

BTW, has ScanSAR mode been added for TerraSAR?

Thanks,
Shawn


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100429/e6115a3d/attachment.html
From eloi.ribeiro at gmail.com  Fri Apr 30 06:42:28 2010
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Fri Apr 30 06:42:32 2010
Subject: [gdal-dev] Reading GRIB2 with GDAL 1.6.3 leeds to Warning: 
	Investigate Template 4.8 bytes 35-41
In-Reply-To: <4BD98B24.2030606@pobox.com>
References: <q2xfbc074701004290335x27e42072h9a21b4e23e71ad26@mail.gmail.com>
	<4BD98B24.2030606@pobox.com>
Message-ID: <o2qfbc074701004300342r2801d915m295e97c44646d684@mail.gmail.com>

On Thu, Apr 29, 2010 at 3:35 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Eloi Ribeiro wrote:
>
>> Hi,
>>
>> I keep receiving this warning using GDAL (1.6.3 released 2009/11/19 on
>> Ubuntu desktop 9.10) whith GRIB2 files:
>>
>> "Warning: Investigate Template 4.8 bytes 35-41
>> Warning: Investigate Template 4.8 bytes 35-41
>> (...)
>> Warning: Investigate Template 4.8 bytes 35-41
>> Warning: Investigate Template 4.8 bytes 35-41
>> Segmentation fault"
>>
>
> Eloi,
>
> The message comes from this part of:
>
> gdal/frmts/grid/degrib18/degrib/inventory.cpp
>
>
>         case GS4_STATISTIC: /* 4.8 */
>            if (InventoryParseTime (*buffer + 35 - 5, &(inv->validTime)) !=
> 0) {
>               printf ("Warning: Investigate Template 4.8 bytes 35-41\n");
>               inv->validTime = inv->refTime + inv->foreSec;
>            }
>
> Basically, it appears that it means there was a problem parsing
> a date in the grib file, and it is reported as a warning.
>
> There is no particular reason to believe it is related to the crash
> you see with some files.
>
> You might want to file a ticket with one of the files resulting in a
> crash for further investigation.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>

Thank's for the tip Frank.
I just submitted a ticket[1].
I hope this issue can be solved.
Regards,

[1] http://trac.osgeo.org/gdal/ticket/3555

-- 
Eloi Ribeiro
GIS Analyst
39,45? -4,40?
http://eloiribeiro.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100430/3d991819/attachment.html
From ivan.lucena at pmldnet.com  Fri Apr 30 08:06:33 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Apr 30 08:06:36 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaG93IHRvIHN1Ym1pdCBtb2RpZmllZCBkcml2ZXJzIGZvciBHREFM?=
Message-ID: <20100430120634.9938.qmail@s466.sureserver.com>

Shawn,

>  My suggestion is that you should file a ticket for each problem you solved describing the reasons
>  for the changes maid. You should attach the changed source code to the ticket and some sample data
>  too (or the path to where I get download it from) so that we can test your changes.

Sorry, I wrote a bunch of typos here. I was falling asleep on the keyboard. |)

But here is the "How To Contribute to GDAL" page with a official answer to your question:

http://trac.osgeo.org/gdal/wiki/HowToContribute

Regards,

Ivan

>  
>  Talking about test, before all that, I would suggest you to run gdal_autotest on your site for those
>  driver that you have changed. That would help you guys to identify if there is any undesirables side
>  effect caused by your changes.
>  
>  Best regards,
>  
>  Ivan
>  
>  Shawn GONG wrote:
>  > Hi list,
>  >
>  > My colleague, Adam Klein, and I have made changes to the following drivers:
>  > netCDF: corrects for longitudes >180 deg (western hemisphere)
>  > RSAT2: able to ingest NITF complex products
>  > TSX: utilizes all GCPs instead of the default of 5 (4 corners + 1 centre)
>  >
>  > Please advise how to submit the changes.
>  >
>  > BTW, has ScanSAR mode been added for TerraSAR?
>  >
>  > Thanks,
>  > Shawn
>  >
>  >
>  > ------------------------------------------------------------------------
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From kmichael.aye at gmail.com  Fri Apr 30 09:54:50 2010
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Fri Apr 30 09:55:01 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
References: <hqhn5d$h38$1@dough.gmane.org>
Message-ID: <hrenfa$3ac$1@dough.gmane.org>

Hi William,

Numpy1.4.1 has been released, just to let you know. *hint,hint* ;)

Best regards and a nice weekend!

Michael


From woklist at kyngchaos.com  Fri Apr 30 10:13:35 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Apr 30 10:13:39 2010
Subject: [gdal-dev] Re: KyngChaos Frameworks: GDAL's numpy vs Enthought's
	numpy
In-Reply-To: <hrenfa$3ac$1@dough.gmane.org>
References: <hqhn5d$h38$1@dough.gmane.org> <hrenfa$3ac$1@dough.gmane.org>
Message-ID: <0DB259F9-281F-4532-AF0B-A14DF95D3E50@kyngchaos.com>

Thanks.  I probably would have forgotten to check before building and packaging GDAL 1.7.2 this weekend.

On Apr 30, 2010, at 8:54 AM, K.-Michael Aye wrote:

> Hi William,
> 
> Numpy1.4.1 has been released, just to let you know. *hint,hint* ;)
> 
> Best regards and a nice weekend!
> 
> Michael
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From j.l.h.hartmann at uva.nl  Fri Apr 30 18:17:06 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Apr 30 18:17:21 2010
Subject: [gdal-dev] Thin Plate Spline
In-Reply-To: <4BD22E36.9070506@pobox.com>
References: <4BD22E36.9070506@pobox.com>
Message-ID: <4BDB56E2.2020309@uva.nl>

Hi,

I'm rubber-sheeting old, deformed maps using the thin plate spline 
option of gdalwarp (-tps). My impression was that the control points 
would be transformed to exactly their georeferenced locations, but in 
the georeferenced image the control poimts don't quite align with the 
gcp-coordinates I specified. I'm only using five points per map, so 
could this be the problem? If so, how many points do I need to get the 
control points on their exact location? Or are there other ways to 
achieve this?

Jan
From even.rouault at mines-paris.org  Fri Apr 30 18:21:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 30 18:21:57 2010
Subject: [gdal-dev] Thin Plate Spline
In-Reply-To: <4BDB56E2.2020309@uva.nl>
References: <4BD22E36.9070506@pobox.com> <4BDB56E2.2020309@uva.nl>
Message-ID: <201005010021.40881.even.rouault@mines-paris.org>

It should work... Perhaps you can share how to reproduce what you see

Le Saturday 01 May 2010 00:17:06 Jan Hartmann, vous avez ?crit?:
> Hi,
>
> I'm rubber-sheeting old, deformed maps using the thin plate spline
> option of gdalwarp (-tps). My impression was that the control points
> would be transformed to exactly their georeferenced locations, but in
> the georeferenced image the control poimts don't quite align with the
> gcp-coordinates I specified. I'm only using five points per map, so
> could this be the problem? If so, how many points do I need to get the
> control points on their exact location? Or are there other ways to
> achieve this?
>
> Jan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


