From mateusz at loskot.net  Tue Aug  1 01:25:33 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D702EBFF3@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702EBFF3@pj-exchange.photon.com>
Message-ID: <44CEE5CD.7080808@loskot.net>

Matt Hanson wrote:
> I'm trying to compile GDAL using the provided makefile.vc files, and I
> get the same error right at the beginning.  In doing some google
> searches I found some posts in the GDAL archive from some chap that had
> the same problem a couple years ago?.that chap turned out to be me!    
> However, back then I did resolve the issue somehow, but it wasn't
> resolved with any list help so there's no record of what I did.    This
> is a different computer, and the newest version of Visual Studio so the
> fact that I'm the only one to ever have this problem I find rather
> surprising.   Anyway any suggestions to help me remember what I did? 

Matt,

What is the version of GDAL you're trying to build?

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dpinte at itae.be  Tue Aug  1 03:40:23 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] python-gdal: create polygon
Message-ID: <1154418023.4427.45.camel@geru-itae>

Hi,

Is it possible to get some explanation on the right way to create a
Polygon from scratch using python-gdal ? 

Here is what i've tested (using python-gdal 1.3.1-6):

[1] ogr.CreateGeometryFromWkt : this seems to work fine

[2] I've tried to create a new geometry with type=ogr.wkbPolygon and
then AddPoint to the geometry. This result in a non functionnal geometry
with a geom.GetGeometryType() like -234950345 ....

g = ogr.Geometry(type=ogr.wkbPolygon)
for point in point_list:
    g.AddPoint(point.x, point.y)
g.CloseRings()

[3] I've tried to create a new geometry with type=ogr.wkbPolygon and
then AddGeometry using a LinearRing. I encounter the same problem has
the previous one.

[4] Finally, i've used the wkt option of the ogr.Geometry __init__
method to create the polygon. This works but I add to path ogr.py (see
http://bugzilla.remotesensing.org/show_bug.cgi?id=1255 ).

Do someone knows why method [2] and [3] aren't working ?

I can provide more details if it's not clear.

--
Didrik Pinte
Research Assistant - Universit? catholique de Louvain
Free-lance developper - IT solutions for the Agro-Environment
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060801/9bb0f505/attachment.bin
From nbarker at ittvis.com  Tue Aug  1 04:04:12 2006
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131A4D@bath.uk.rsinc.com>

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Hanson
Sent: Monday, July 31, 2006 8:54 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Building on Windows

 

Hi, 

I'm trying to compile GDAL using the provided makefile.vc files, and I
get the same error right at the beginning.  In doing some google
searches I found some posts in the GDAL archive from some chap that had
the same problem a couple years ago....that chap turned out to be me!
However, back then I did resolve the issue somehow, but it wasn't
resolved with any list help so there's no record of what I did.    This
is a different computer, and the newest version of Visual Studio so the
fact that I'm the only one to ever have this problem I find rather
surprising.   Anyway any suggestions to help me remember what I did?  

Much thanks!  Here's the error: 

*********************************************** 
$ nmake -f makefile.vc 

Microsoft (R) Program Maintenance Utility Version 8.00.50727.42 
Copyright (C) Microsoft Corporation.  All rights reserved. 

        cd port 
        nmake /nologo /f makefile.vc 
        cl /nologo /MD /EHsc /Zi /Fd..\gdal.pdb -I..\port -I..\ogr
-I..\gcore  -I..\alg  /c cpl_conv.cpp 
cpl_conv.cpp 
cpl_conv.cpp(1313) : error C3861: 'snprintf': identifier not found 
NMAKE : fatal error U1077: '"c:\Program Files\Microsoft Visual Studio
8\VC\BIN\cl.EXE"' : return code '0x2' 
Stop. 
NMAKE : fatal error U1077: '"c:\Program Files\Microsoft Visual Studio
8\VC\BIN\nmake.EXE"' : return code '0x2' 
Stop. 
********************************************* 

 

Matt

 

Hi Matt,

Theres is a thread on snprintf  problems here -
http://groups.google.co.uk/group/microsoft.public.vc.language/browse_thr
ead/thread/32d833e0d1d517af/6021c0870b230253%236021c0870b230253

And in port/cpl_config.h  there are already

#define vsnprintf _vsnprintf

#define snprintf _snprintf

I have just compiled GDAL with MSVC 8, you need to install the windows
SDK as well if you are using the free version.

Norman

 

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060801/cfd59013/attachment.html
From michele.sturma at tellus.it  Tue Aug  1 05:08:27 2006
From: michele.sturma at tellus.it (Michele Sturma)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] From mercator projection to orthographic projection
Message-ID: <44CF1A0B.1040707@tellus.it>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060801/36fea363/attachment.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: firma.gif
Type: image/gif
Size: 3632 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060801/36fea363/firma.gif
From michele.sturma at tellus.it  Tue Aug  1 05:33:54 2006
From: michele.sturma at tellus.it (Michele Sturma)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] From Mercator to orthographic proj
Message-ID: <44CF2002.5080701@tellus.it>

Hi,

I have a jpg in mercator projection, 400 pixel x 400 pixel.
I used  gdaltranslate to create a tif. Now if I launch gdalinfo i find 
this information about my TIF

C:\Programmi\FWTools1.0.5\bin>gdalinfo michele.tif
Driver: GTiff/GeoTIFF
Size is 464, 324
Coordinate System is `'
Origin = (-23.730469,64.997939)
Pixel Size = (0.15166271,-0.15166271)
Corner Coordinates:
Upper Left  ( -23.7304688,  64.9979392)
Lower Left  ( -23.7304688,  15.8592207)
Upper Right (  46.6410293,  64.9979392)
Lower Right (  46.6410293,  15.8592207)
Center      (  11.4552803,  40.4285800)
Band 1 Block=464x17 Type=Byte, ColorInterp=Red
Band 2 Block=464x17 Type=Byte, ColorInterp=Green
Band 3 Block=464x17 Type=Byte, ColorInterp=Blue

Upper and lower corners are right, but the center not. I don't know how 
to tell to gdaltranslate that my source is in mercator projection.

I want also to know how can I convert this image in spherical/ellipsoide 
projection.

Thanks!
Michele Sturma


From mhanson at photon.com  Tue Aug  1 11:06:32 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
References: <B67A5FB7A8114B47A70517C9C0D102E8131A4D@bath.uk.rsinc.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>

Norman, thanks.   I think I did the right thing. cpl_config is automatically generated so I thought I needed to change the defines (HAVE_VPRINTF, HAVE_VSNPRINTF, and HAVE_SNPRINTF) to 0's in cpl_config.h.vc.  I don't understand why these functions aren't defined in the MSVC compilers but whatever.
 
Things compiled find but then got a linking error, anyone come across this?
 
 
*************************************************
ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols found; archive member will be inaccessible
link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /INCLUDE:_vbSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj      odbc32.lib                         gcore\Version.res  /out:gdal13.dll /implib:gdal_i.lib 
/usr/bin/link: too many arguments
Try `/usr/bin/link --help' for more information.
NMAKE : fatal error U1077: 'C:\cygwin\bin\link.EXE' : return code '0x1'
Stop.

**************************************************

 


________________________________

From: Norman Barker [mailto:nbarker@ittvis.com]
Sent: Tue 8/1/2006 4:04 AM
To: Matt Hanson; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] Building on Windows



 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Hanson
Sent: Monday, July 31, 2006 8:54 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Building on Windows

 

Hi, 

I'm trying to compile GDAL using the provided makefile.vc files, and I get the same error right at the beginning.  In doing some google searches I found some posts in the GDAL archive from some chap that had the same problem a couple years ago....that chap turned out to be me!     However, back then I did resolve the issue somehow, but it wasn't resolved with any list help so there's no record of what I did.    This is a different computer, and the newest version of Visual Studio so the fact that I'm the only one to ever have this problem I find rather surprising.   Anyway any suggestions to help me remember what I did?  

Much thanks!  Here's the error: 

*********************************************** 
$ nmake -f makefile.vc 

Microsoft (R) Program Maintenance Utility Version 8.00.50727.42 
Copyright (C) Microsoft Corporation.  All rights reserved. 

        cd port 
        nmake /nologo /f makefile.vc 
        cl /nologo /MD /EHsc /Zi /Fd..\gdal.pdb -I..\port -I..\ogr -I..\gcore  -I..\alg  /c cpl_conv.cpp 
cpl_conv.cpp 
cpl_conv.cpp(1313) : error C3861: 'snprintf': identifier not found 
NMAKE : fatal error U1077: '"c:\Program Files\Microsoft Visual Studio 8\VC\BIN\cl.EXE"' : return code '0x2' 
Stop. 
NMAKE : fatal error U1077: '"c:\Program Files\Microsoft Visual Studio 8\VC\BIN\nmake.EXE"' : return code '0x2' 
Stop. 
********************************************* 

 

Matt

 

Hi Matt,

Theres is a thread on snprintf  problems here - http://groups.google.co.uk/group/microsoft.public.vc.language/browse_thread/thread/32d833e0d1d517af/6021c0870b230253%236021c0870b230253

And in port/cpl_config.h  there are already

#define vsnprintf _vsnprintf

#define snprintf _snprintf

I have just compiled GDAL with MSVC 8, you need to install the windows SDK as well if you are using the free version.

Norman

 

 

 

 

 

 



From warmerdam at pobox.com  Tue Aug  1 11:47:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131A4D@bath.uk.rsinc.com>
	<0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>
Message-ID: <44CF77AB.2010207@pobox.com>

Matt Hanson wrote:
> Norman, thanks.   I think I did the right thing. cpl_config is automatically generated so I thought I needed to change the defines (HAVE_VPRINTF, HAVE_VSNPRINTF, and HAVE_SNPRINTF) to 0's in cpl_config.h.vc.  I don't understand why these functions aren't defined in the MSVC compilers but whatever.
>  
> Things compiled find but then got a linking error, anyone come across this?
>  
>  
> *************************************************
> ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols found; archive member will be inaccessible
> link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /INCLUDE:_vbSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj      odbc32.lib                         gcore\Version.res  /out:gdal13.dll /implib:gdal_i.lib 
> /usr/bin/link: too many arguments
> Try `/usr/bin/link --help' for more information.
> NMAKE : fatal error U1077: 'C:\cygwin\bin\link.EXE' : return code '0x1'
> Stop.
> 
> **************************************************

Matt,

I have found myself having to hide the Cygwin /usr/bin/link.exe on some
of my systems to ensure that the Visual Studio link.exe gets used.  Try:

   mv /usr/bin/link.exe /usr/bin/link_hidden.exe

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mhanson at photon.com  Tue Aug  1 12:05:11 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
References: <B67A5FB7A8114B47A70517C9C0D102E8131A4D@bath.uk.rsinc.com>
	<0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>
	<44CF77AB.2010207@pobox.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D7027851E@pj-exchange.photon.com>

Frank, nice call!   It would have taken a while for that to occur to me. I never thought that there might be a problem mixing the vsvars32.bat file in the cygwin environment.
 
Thanks, matt

________________________________

From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tue 8/1/2006 11:47 AM
To: Matt Hanson
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Building on Windows



Matt Hanson wrote:
> Norman, thanks.   I think I did the right thing. cpl_config is automatically generated so I thought I needed to change the defines (HAVE_VPRINTF, HAVE_VSNPRINTF, and HAVE_SNPRINTF) to 0's in cpl_config.h.vc.  I don't understand why these functions aren't defined in the MSVC compilers but whatever.
> 
> Things compiled find but then got a linking error, anyone come across this?
> 
> 
> *************************************************
> ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols found; archive member will be inaccessible
> link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /INCLUDE:_vbSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb6_support.obj      odbc32.lib                         gcore\Version.res  /out:gdal13.dll /implib:gdal_i.lib
> /usr/bin/link: too many arguments
> Try `/usr/bin/link --help' for more information.
> NMAKE : fatal error U1077: 'C:\cygwin\bin\link.EXE' : return code '0x1'
> Stop.
>
> **************************************************

Matt,

I have found myself having to hide the Cygwin /usr/bin/link.exe on some
of my systems to ensure that the Visual Studio link.exe gets used.  Try:

   mv /usr/bin/link.exe /usr/bin/link_hidden.exe

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org <http://osgeo.org/> 





From matt.wilkie at gov.yk.ca  Tue Aug  1 14:02:19 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] issue warning to user when performing datum shift
	(OGR,	GDAL)
In-Reply-To: <200607311743.28219.dylan.beaudette@gmail.com>
References: <4BF377919225F449BB097CB76FFE9BC83DDFE3@ptolemy.topozone.com>
	<200607311743.28219.dylan.beaudette@gmail.com>
Message-ID: <44CF972B.8030700@gov.yk.ca>

> I agree completely - The user is responsible for how he/she chooses to 
> use/mis-use the software. 

So if I understand this correctly, the summary of repsonses is: this is 
a logical bug rather than functional one, and the fix is not 
implementation but documentation.

The first comment from Paul K on the CA Soils site would be a good 
"patch", reproduced here and heavily edited:

    There is no such thing as an accurate "default" set of datum 
transformation parameters for a datum. OGR uses (NADCON) by default, 
which is the most accurate available for North America, but in the 
general case (worldwide) this is very hard to determine and there 
normally is no such thing as a default. The transformation that should 
be used depends on the exact area covered, accuracy required etc. In 
other words, user beware and do your homework.
    -- http://casoilresource.lawr.ucdavis.edu/drupal/node/259

I'm not sure where in the docs this warning should go though. The OGR 
Projections Tutorial (http://ogr.maptools.org/osr_tutorial.html) is 
likely to be avoided by end users as it's about how to code projection. 
Perhaps the cs2cs man page? http://proj.maptools.org/man_cs2cs.html

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Tue Aug  1 15:07:16 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Building on Windows
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131A4D@bath.uk.rsinc.com>
	<0719BE42F22E0A46857DF72644EC5D7027851B@pj-exchange.photon.com>
Message-ID: <44CFA664.5050201@loskot.net>

Matt Hanson wrote:
> I don't understand why these functions aren't
> defined in the MSVC compilers but whatever.

The reason is quite simple.
1. this is not a MSVC but MSVC++ compiler

2. Microsoft does not claim its Visual C++ is a C compiler, but it's a
C++ compiler as the name says. See archive of MSDN Forums for more
details:
http://forums.microsoft.com/MSDN/default.aspx?forumgroupid=8&siteid=1

3. Functions like vsnprintf, vsprintf and others from the v...printf
family belongs to C99 Standard of C Language but Microsoft says
explicitly (see MSDN Forums) that Visual C++ *does not* support C99
Standard.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dylan.beaudette at gmail.com  Tue Aug  1 16:47:17 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] issue warning to user when performing datum shift (OGR,
	=?iso-8859-1?q?=09GDAL?=)
In-Reply-To: <44CF972B.8030700@gov.yk.ca>
References: <4BF377919225F449BB097CB76FFE9BC83DDFE3@ptolemy.topozone.com>
	<200607311743.28219.dylan.beaudette@gmail.com>
	<44CF972B.8030700@gov.yk.ca>
Message-ID: <200608011347.17115.dylan.beaudette@gmail.com>

On Tuesday 01 August 2006 11:02, Matt Wilkie wrote:
> > I agree completely - The user is responsible for how he/she chooses to
> > use/mis-use the software.
>
> So if I understand this correctly, the summary of repsonses is: this is
> a logical bug rather than functional one, and the fix is not
> implementation but documentation.
>
I would agree.

> The first comment from Paul K on the CA Soils site would be a good
> "patch", reproduced here and heavily edited:
>
>     There is no such thing as an accurate "default" set of datum
> transformation parameters for a datum. OGR uses (NADCON) by default,
> which is the most accurate available for North America, but in the
> general case (worldwide) this is very hard to determine and there
> normally is no such thing as a default. The transformation that should
> be used depends on the exact area covered, accuracy required etc. In
> other words, user beware and do your homework.
>     -- http://casoilresource.lawr.ucdavis.edu/drupal/node/259

Wording is concise and to the point.

> I'm not sure where in the docs this warning should go though. The OGR
> Projections Tutorial (http://ogr.maptools.org/osr_tutorial.html) is
> likely to be avoided by end users as it's about how to code projection.
> Perhaps the cs2cs man page? http://proj.maptools.org/man_cs2cs.html
>
> cheers,

I feel that this "reminder" should find its way into the docs somewhere, but 
other than possibly a very general README or the like, it would be a little 
out of place.

Just to reiterate, I am not suggesting that we dumb down the powerfull, and 
often non-interactive tools that we use and love. However, I think that a 
carefully placed reminder might save a new user from a bit of grief- and at 
the same time promote the idea that people must fully _understand_ their data 
and what they are _doing_ to it.

Cheers,


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From bartvde at xs4all.nl  Wed Aug  2 07:00:59 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] OCI driver: validate
Message-ID: <23359.145.50.39.8.1154516459.squirrel@webmail.xs4all.nl>

Hi list,

the OCI driver uses SDO_GEOM.VALIDATE_GEOMETRY to validate geometries.

I just wanted to point out that this function has been deprecated:

"The VALIDATE_GEOMETRY function is deprecated and will not be supported in
future releases of Oracle Spatial. You should use instead the
SDO_GEOM.VALIDATE_GEOMETRY_WITH_CONTEXT function."

Best regards,
Bart


From taka_www at sinaman.com  Wed Aug  2 08:50:01 2006
From: taka_www at sinaman.com (taka_www@sinaman.com)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Does OGR support reading Mapinfo Workspace
Message-ID: <20060802125009.17055.qmail@mysinamail.com>

Dear All,
 
I wonder if I can use MapInfo workspace and tab file in MapServer, so that I can share my work with other people.
 
Since the map data collection and thematic mapping will first be prepared through MapInfo (due to source data already in MapInfo), I wonder if there is any tool that can help to esaily convert the workspace to MapServer map file, and allow me to publish the map content to other readers through MapServer.
 
Hope someone can give me some hints to go on.
 
Thanks,
Taka Wong
______________________________________

===================================================================
F.5/F.7升學：浸會大學全日制課程
http://adimages.sina.com.hk/HKBU_0606.html
用《SMS放榜通》　搵學校好輕鬆﹗
http://adimages.sina.com.hk/ExamSMS_0607a.html
at 17同專家話你知點同父母面對放榜！
http://adimages.sina.com.hk/TV5_0607.html
===================================================================

From dmorissette at mapgears.com  Wed Aug  2 09:49:45 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Does OGR support reading Mapinfo Workspace
In-Reply-To: <20060802125009.17055.qmail@mysinamail.com>
References: <20060802125009.17055.qmail@mysinamail.com>
Message-ID: <44D0AD79.5040306@mapgears.com>

taka_www@sinaman.com wrote:
> Dear All,
>  
> I wonder if I can use MapInfo workspace and tab file in MapServer, so that I can share my work with other people.
>  

TAB files are very well supported via OGR. Workspaces are not.


> Since the map data collection and thematic mapping will first be prepared through MapInfo (due to source data already in MapInfo), I wonder if there is any tool that can help to esaily convert the workspace to MapServer map file, and allow me to publish the map content to other readers through MapServer.
>  

The only tool I am aware of is a little MapBasic utility to export a 
MapInfo workspace to a MapServer mapfile. Look for it under "Tools to 
create mapfiles" at http://umn.mapserver.ch/

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From bartvde at xs4all.nl  Wed Aug  2 09:50:51 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Does OGR support reading Mapinfo Workspace
In-Reply-To: <20060802125009.17055.qmail@mysinamail.com>
References: <20060802125009.17055.qmail@mysinamail.com>
Message-ID: <6810.145.50.39.8.1154526651.squirrel@webmail.xs4all.nl>

There is a tool for this by Tydac, check:

http://umn.mapserver.ch/mapserver/en/tools.htm

and more specifically:
http://www.tydac.ch/download/wor2map.zip

I have never used it though.

Best regards,
Bart

> Dear All,
>
> I wonder if I can use MapInfo workspace and tab file in MapServer, so that
> I can share my work with other people.
>
> Since the map data collection and thematic mapping will first be prepared
> through MapInfo (due to source data already in MapInfo), I wonder if there
> is any tool that can help to esaily convert the workspace to MapServer map
> file, and allow me to publish the map content to other readers through
> MapServer.
>
> Hope someone can give me some hints to go on.
>
> Thanks,
> Taka Wong
> ______________________________________
>
> ===================================================================
> F.5/F.7?????G???|?j???????????{
> http://adimages.sina.com.hk/HKBU_0606.html
> ???mSMS???]?q?n?@???????n???P?T
> http://adimages.sina.com.hk/ExamSMS_0607a.html
> at 17?P?M?a???A???I?P???????????]?I
> http://adimages.sina.com.hk/TV5_0607.html
> ===================================================================
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From warmerdam at pobox.com  Wed Aug  2 10:05:25 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Does OGR support reading Mapinfo Workspace
In-Reply-To: <20060802125009.17055.qmail@mysinamail.com>
References: <20060802125009.17055.qmail@mysinamail.com>
Message-ID: <44D0B125.3050401@pobox.com>

taka_www@sinaman.com wrote:
> Dear All,
> 
> I wonder if I can use MapInfo workspace and tab file in MapServer, so that
> I can share my work with other people.
> 
> Since the map data collection and thematic mapping will first be prepared
> through MapInfo (due to source data already in MapInfo), I wonder if there
> is any tool that can help to esaily convert the workspace to MapServer map
> file, and allow me to publish the map content to other readers through
> MapServer.
> 
> Hope someone can give me some hints to go on.

Taka,

GDAL/OGR has no support for mapinfo workspaces, as far as I know.  I
assume a mapinfo workspace is some sort of project file?

You might want to ask on the mapserver-users list if anyone knows of
a utility to produce mapfiles from workspaces.

MapServer (via OGR) will support "auto styling" from tab files, preserving
some of the styling information (line color, etc) from the tab file -
assuming you are referring to feature tab files, not raster tab files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Wed Aug  2 10:39:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
Message-ID: <44D0B914.3030806@pobox.com>

Folks,

A client has had a long standing requirement to access geolocation
arrays for HDF4 (specifically Modis) datasets via GDAL.  Geolocation
arrays are 2D arrays of geox and geoy values with a regular relationship
to the image bands.

A very common case is where there are extra latitude and longitude bands
associated with an image, holding the lat and long locations for each pixel.
In other cases the geox/geoy values may be in a different projection, or
may be at a reduced resolution from the actual image, or may be stored
separately from the image data.

I have prepared RFC4 in an effort to address adding geolocation array
support to GDAL in a reasonably comprehensive manner.  Currently the RFC
is still considered to be "under development", but I thought it wouldn't
hurt to put it out there for feedback from the community.

I'm also committing some of the changes it talks about, but with the
understanding that they are still provisional and might be backed out or
altered depending on what the GDAL PMC decides.

The RFC can be found at:

   http://www.gdal.org/rfc4_geolocate.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dron at ak4719.spb.edu  Wed Aug  2 12:35:12 2006
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
In-Reply-To: <44D0B914.3030806@pobox.com>
References: <44D0B914.3030806@pobox.com>
Message-ID: <20060802163512.GA9980@ak4719.spb.edu>

On Wed, Aug 02, 2006 at 10:39:16AM -0400, Frank Warmerdam wrote:
> I have prepared RFC4 in an effort to address adding geolocation array
> support to GDAL in a reasonably comprehensive manner.  Currently the
> RFC is still considered to be "under development", but I thought it
> wouldn't hurt to put it out there for feedback from the community.

Hi Frank,

Just two notes from my side.

1. The third coordinate should be added, i.e. Z_DATASET/Z_BAND metadata
records. Some products contain the third value (MODIS). Well, it is
possible to have more geolocation arrays in the HDF file, so it is worth
to add X_NAME/Y_NAME/Z_NAME field with a name of parameter
("Latitude"/"Longitude"/"Height"). With these names we need only one
step to add geolocation/data maps and completely mimic the HDF-EOS
structure :-)

2. It should be noted that both OFFSET and STEP parameters could be
negative in which case we have geolocation array larger than
corresponding data array. The following is a quote from the HDF-EOS
manual:

	"In many cases, the size of a geolocation dimension will be
	different from the size of the corresponding data dimension. To
	take care of such occurrences, there are two pieces of
	information that must be supplied when defining a dimension map:
	the offset and the increment.  The offset tells how far along a
	data dimension you must travel to find the first point to have a
	corresponding entry along the geolocation dimension. The
	increment tells how many points to travel along the data
	dimension before the next point is found for which there is a
	corresponding entry along the geolocation dimension. Figure 5-3
	depicts a dimension map.

	The "data skipping" method described above works quite well if
	there are fewer regularly spaced geolocation points than data
	points along a particular pair of mapped dimensions of a Swath.
	It is conceivable, however, that the reverse is true ? that
	there are more regularly spaced geolocation points than data
	points. In that event, both the offset and increment should be
	expressed as negative values to indicate the reversed
	relationship. The result is shown in Figure 5-4. Note that in
	the reversed relationship, the offset and increment are applied
	to the geolocation dimension rather than the data dimension."

I haven't never seen such arrays "in wild", but everything is possible
in the HDF world. Also negative offset is a common thing in ASTER
products.

Translating geolocation arrays is an interesting task. The one approach
could be a "-geolocation <name>" option of gdal_translate. When this option
supplied, the all other options (-of,-ot,-scale,dst_dataset etc.) tells
how the input geolocation array should be saved. The question is: do we
need to support translating HDF-EOS datasets into the valid another
HDF-EOS with all geolocations properly transferred? If not, that simple
approach should work.

Best regards,
Andrey

PS.
I can take responsibility to add geolocation support to HDF4 and L1B
drivers.

-- 
Andrey V. Kiselev
ICQ# 26871517

From Chris.Barker at noaa.gov  Wed Aug  2 13:00:26 2006
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Status of ng python bindings
In-Reply-To: <44A15982.2080902@pobox.com>
References: <44A0DA58.9070100@sarvision.nl> <44A15982.2080902@pobox.com>
Message-ID: <44D0DA2A.1040701@noaa.gov>

Frank Warmerdam wrote: (on June 26)
> Mateusz has not yet completed the work on numpy support for the NG 
> bindings.
> I believe currently the ng bindings lack integration with numpy or numeric.
> So, you might want to stick to the old bindings for a few more weeks till
> the upgrade is ready.

What's the status now? I'd love to have numpy integration, and I'd even 
like to test and provide feedback (and maybe even code)

In particular, at the moment, I'd like to have

osr.CoordinateTransformation

receive and give numpy arrays.

For what it's worth, I think it would be a fine idea for the GDAL 
bindings to require numpy (or at least the numpy array interface) -- 
that's exactly what numpy is for, and it would be somewhat easier not to 
  have a bunch of code to support either numpy or the standard Python 
data types.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer
                                     		
NOAA/OR&R/HAZMAT         (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From matt.wilkie at gov.yk.ca  Wed Aug  2 13:24:46 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Little experiment: comparison of vector projection
	OGR	and ArcGIS
In-Reply-To: <3c5546140607291914r2aaf80bam1a93feca0720141d@mail.gmail.com>
References: <3c5546140607291914r2aaf80bam1a93feca0720141d@mail.gmail.com>
Message-ID: <44D0DFDE.50609@gov.yk.ca>

Hi Dylan,

> A couple days ago I did another experiment, this time incorporating a
> datum shift: GCS NAD83 --> UTM NAD27. I have summarized the results
> here: http://casoilresource.lawr.ucdavis.edu/drupal/node/259
> 
> of note:
> 
> - the default tranform in ArcGIS does not produce the correct results.
> - the 'NADCON' transform in ArcGIS produces the same results as OGR.

I asked ESRI-L about this, and the near unanimous response is: there is 
no default transformation in ArcGIS, but an alphabetised list.

"The 'default' transformation that Dylan refers to, 
NAD_1927_To_NAD_1983_6, is just the first in the alphabetical list. As 
it turns it out, it uses NTv2 and is designed for Quebec. ArcGIS 
generally doesn't set any default transformations but leaves it to you 
to decide which one is most appropriate. Dylan's data is outside the 
area covered by the NTv2 grid file, so essentially no tranformation 
occurs when he uses NAD_1927_To_NAD_1983_6. A better reference for him, 
which does list the methods, parameters and areas of use for the 
transformations is:
http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21327 
"
-- Melita Kennedy Product Specialist ESRI, Inc.

Even if mistaken about the "default", thank you for conducting the 
experiment and telling us about it. Otherwise I would sailed along quite 
happily usiing the wrong selections myself. Also thanks to you we also 
know that provided the appropriate transformation method is chosen 
equivalent results can be achieved with both ArcGIS and GDAL, so we are 
all free to choose the tool most readily at hand.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed Aug  2 13:58:12 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
In-Reply-To: <20060802163512.GA9980@ak4719.spb.edu>
References: <44D0B914.3030806@pobox.com> <20060802163512.GA9980@ak4719.spb.edu>
Message-ID: <44D0E7B4.6010803@pobox.com>

Andrey Kiselev wrote:
> On Wed, Aug 02, 2006 at 10:39:16AM -0400, Frank Warmerdam wrote:
>> I have prepared RFC4 in an effort to address adding geolocation array
>> support to GDAL in a reasonably comprehensive manner.  Currently the
>> RFC is still considered to be "under development", but I thought it
>> wouldn't hurt to put it out there for feedback from the community.
> 
> Hi Frank,
> 
> Just two notes from my side.
> 
> 1. The third coordinate should be added, i.e. Z_DATASET/Z_BAND metadata
> records. Some products contain the third value (MODIS). Well, it is
> possible to have more geolocation arrays in the HDF file, so it is worth
> to add X_NAME/Y_NAME/Z_NAME field with a name of parameter
> ("Latitude"/"Longitude"/"Height"). With these names we need only one
> step to add geolocation/data maps and completely mimic the HDF-EOS
> structure :-)

Andrey,

Excellent point.  I'll update accordingly.

> 2. It should be noted that both OFFSET and STEP parameters could be
> negative in which case we have geolocation array larger than
> corresponding data array. The following is a quote from the HDF-EOS
> manual:
> 
> 	"In many cases, the size of a geolocation dimension will be
> 	different from the size of the corresponding data dimension. To
> 	take care of such occurrences, there are two pieces of
> 	information that must be supplied when defining a dimension map:
> 	the offset and the increment.  The offset tells how far along a
> 	data dimension you must travel to find the first point to have a
> 	corresponding entry along the geolocation dimension. The
> 	increment tells how many points to travel along the data
> 	dimension before the next point is found for which there is a
> 	corresponding entry along the geolocation dimension. Figure 5-3
> 	depicts a dimension map.
> 
> 	The "data skipping" method described above works quite well if
> 	there are fewer regularly spaced geolocation points than data
> 	points along a particular pair of mapped dimensions of a Swath.
> 	It is conceivable, however, that the reverse is true ? that
> 	there are more regularly spaced geolocation points than data
> 	points. In that event, both the offset and increment should be
> 	expressed as negative values to indicate the reversed
> 	relationship. The result is shown in Figure 5-4. Note that in
> 	the reversed relationship, the offset and increment are applied
> 	to the geolocation dimension rather than the data dimension."
> 
> I haven't never seen such arrays "in wild", but everything is possible
> in the HDF world. Also negative offset is a common thing in ASTER
> products.

I am not clear why negative values need to express something special.
I have been working with the assumption that the offset could be negative
if the geolocation information extends beyond the data it is geolocating,
and that the offset and step could be floating point values.  So for
instance, if we have denser geolocation information than the data itself
the step would be between 0.0 and 1.0.

It seems to me that the "negative option" in HDF EOS can be translated
back into "forward facing" offset/step values without too much work if
we encounter it.  I'd rather not incorporate this unnecessary complexity
(of a negative option) into the gdal data model if possible.

> Translating geolocation arrays is an interesting task. The one approach
> could be a "-geolocation <name>" option of gdal_translate. When this option
> supplied, the all other options (-of,-ot,-scale,dst_dataset etc.) tells
> how the input geolocation array should be saved. The question is: do we
> need to support translating HDF-EOS datasets into the valid another
> HDF-EOS with all geolocations properly transferred? If not, that simple
> approach should work.

I have no requirement to produce HDF-EOS datasets at this point.  But it
seems that the CreateCopy() method could - in theory - be able to setup
a swath with geolocation information based on what it gets from GDAL
if needed.

> PS.
> I can take responsibility to add geolocation support to HDF4 and L1B
> drivers.

I've addressed this for the HDF4's drivers EOS_SWATH handler already
(and now this change is committed).  I introduced a new "subtype"
called EOS_SWATH_GEOL which provides "raw" access to swath fields without
all the metadata, gcps and so forth.  So the "GEOLOCATION" metadata for
a dataset can look like this:

   Metadata (GEOLOCATION):
     SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,A
UTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM
["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHOR
ITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]
]   X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"MOD02QKM.A2005185.1820.005.2005186014821.hd
f":MODIS_SWATH_Type_L1B:Longitude
   X_BAND=1
   Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"MOD02QKM.A2005185.1820.005.2005186014821.hd
f":MODIS_SWATH_Type_L1B:Latitude
   Y_BAND=1
   PIXEL_OFFSET=0
   PIXEL_STEP=4
   LINE_OFFSET=1
   LINE_STEP=4

I'd appreciate if you could convince yourself that the geolocation
implemention there now is correct.

I would also love to have it in the L1B driver.   I was thinking of taking
a crack at it, but I'd be most comfortable if you could do it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dron at ak4719.spb.edu  Wed Aug  2 14:43:35 2006
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
In-Reply-To: <44D0E7B4.6010803@pobox.com>
References: <44D0B914.3030806@pobox.com> <20060802163512.GA9980@ak4719.spb.edu>
	<44D0E7B4.6010803@pobox.com>
Message-ID: <20060802184335.GA10626@ak4719.spb.edu>

On Wed, Aug 02, 2006 at 01:58:12PM -0400, Frank Warmerdam wrote:
> >2. It should be noted that both OFFSET and STEP parameters could be
> >negative in which case we have geolocation array larger than
> >corresponding data array. The following is a quote from the HDF-EOS
> >manual:
...
> I am not clear why negative values need to express something special.
> I have been working with the assumption that the offset could be
> negative if the geolocation information extends beyond the data it is
> geolocating, and that the offset and step could be floating point
> values.  So for instance, if we have denser geolocation information
> than the data itself the step would be between 0.0 and 1.0.

Yes, we can achieve the same goal with floating point values. But I will
recommend to avoid serialization of floating point values in ASCII when
it is possible. Do you remember that i18n problem with dot/comma
delimiter in floating point values? It can be solved with CPLatof()
(BTW, there isn't CPLsnprintf() implementation yet), but it is better to
avoid problem at all than try to catch it.

> It seems to me that the "negative option" in HDF EOS can be translated
> back into "forward facing" offset/step values without too much work if
> we encounter it.  I'd rather not incorporate this unnecessary
> complexity (of a negative option) into the gdal data model if
> possible.

The only reason in this complication is to avoid floating point. It is
discussible what approach has worse side effects.

> >I can take responsibility to add geolocation support to HDF4 and L1B
> >drivers.
> 
> I've addressed this for the HDF4's drivers EOS_SWATH handler already
> (and now this change is committed).  I introduced a new "subtype"
> called EOS_SWATH_GEOL which provides "raw" access to swath fields without
> all the metadata, gcps and so forth.  So the "GEOLOCATION" metadata for
> a dataset can look like this:

Great! I will take a look at the code tomorrow.

> I would also love to have it in the L1B driver.   I was thinking of
> taking a crack at it, but I'd be most comfortable if you could do it.

Ok.

Regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dylan.beaudette at gmail.com  Wed Aug  2 16:49:29 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Little experiment: comparison of vector projection
	=?iso-8859-1?q?OGR=09and?= ArcGIS
In-Reply-To: <44D0DFDE.50609@gov.yk.ca>
References: <3c5546140607291914r2aaf80bam1a93feca0720141d@mail.gmail.com>
	<44D0DFDE.50609@gov.yk.ca>
Message-ID: <200608021349.29530.dylan.beaudette@gmail.com>

Hi Matt,


On Wednesday 02 August 2006 10:24, Matt Wilkie wrote:
> Hi Dylan,
>
> > A couple days ago I did another experiment, this time incorporating a
> > datum shift: GCS NAD83 --> UTM NAD27. I have summarized the results
> > here: http://casoilresource.lawr.ucdavis.edu/drupal/node/259
> >
> > of note:
> >
> > - the default tranform in ArcGIS does not produce the correct results.
> > - the 'NADCON' transform in ArcGIS produces the same results as OGR.
>
> I asked ESRI-L about this, and the near unanimous response is: there is
> no default transformation in ArcGIS, but an alphabetised list.
>
> "The 'default' transformation that Dylan refers to,
> NAD_1927_To_NAD_1983_6, is just the first in the alphabetical list. As
> it turns it out, it uses NTv2 and is designed for Quebec. ArcGIS
> generally doesn't set any default transformations but leaves it to you
> to decide which one is most appropriate. Dylan's data is outside the
> area covered by the NTv2 grid file, so essentially no tranformation
> occurs when he uses NAD_1927_To_NAD_1983_6. A better reference for him,
> which does list the methods, parameters and areas of use for the
> transformations is:
> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow
>&d=21327 "
> -- Melita Kennedy Product Specialist ESRI, Inc.

Ok. I didn't even notice that there was some order in the list. Then I stand 
corrected, in that this was not a 'default' transform, just the 'first' one 
in the list. Seems reasonable.


> Even if mistaken about the "default", thank you for conducting the
> experiment and telling us about it. Otherwise I would sailed along quite
> happily usiing the wrong selections myself. Also thanks to you we also
> know that provided the appropriate transformation method is chosen
> equivalent results can be achieved with both ArcGIS and GDAL, so we are
> all free to choose the tool most readily at hand.
>
> cheers,

Sure. Thanks for taking time to do some of the detective work. I have added a 
small blub at the beginning of the original post, so that future visitors 
will not have to pour over the comments to get at the final conclusions.

http://casoilresource.lawr.ucdavis.edu/drupal/node/259

Cheers,


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From Bob.Moskovitz at conservation.ca.gov  Wed Aug  2 18:28:35 2006
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Wish:  Intergraph CIT Raster File support in GDAL
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC0877E6@docexs1.ad.consrv.ca.gov>

Hello GDAL developers,

Like the subject lines says...I would like to request Intergraph CIT Raster File support in GDAL.  The specs for this file format is in ftp://ftp.intergraph.com/pub/old/pub/scanning/rffrgps.zip

Thanks!
Bob


From kmckelvey at lizardtech.com  Wed Aug  2 19:41:07 2006
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] DLL exports in static windows apps?
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD12C9A3B9@sea-srv-ms3.lizardtech.com>


We recently discovered our shipping apps were exporting GDAL DLL
symbols.  Not a huge deal, but in the name of cleanliness I investigated
the problem and wanted to post here in case anyone else is interested.

The problem is that the static library is built using objects that were
compiled for a DLL.  All exported functions are declared using
__declspec(dllexport), and that exported-ness carries through with the
object into the final executable or DLL.

There is no provision in the GDAL build harness at the moment for
building *both* kinds of objects so that the DLL will export its symbols
and static lib not export them.  But if all you care about is the static
lib, this is what I had to do to tailor the build harness (Warning:
making these changes will also produce a DLL without any exports!):

1. #define CPL_DISABLE_DLL in cpl_config.h.vc (normally commented out) -
This will stop the symbols from being exported.

2. Comment out the DLLBUILD=1 in nmake.opt - This will make the apps
link against the static library instead of the DLL stub library.  Or at
least it *should* (see #B below).

3. Remove "-DBUILD_AS_DLL" from frmts/gtiff/libgeotiff/makefile.vc -
This will stop the tiff symbols from being exported (tiff uses a
different macro for its __declspec(dllexport)).


...Simple enough.  But I encountered a couple of broken things in the VC
build harness that might warrant fixing:

A. I wanted to be able to run "nmake /f makefile.vc staticlib" to build
only the static libraries, but the staticlib target has no dependencies.
To fix this I reassigned the relevant dependencies from the "default"
target to "staticlib".  See makefile.vc.patch.txt.

B. Then I wanted to run "nmake /f makefile.vc apps_dir" to build
gdal_translate et al., but the apps/makefile.vc is hardwired with the
name of the DLL-import stub library.  To fix this I made it use
$(GDALLLIB) instead, which is set to either the stub library or the
static library depending on the value of DLLBUILD.  See
apps_makefile.vc.patch.txt.


After these changes, I could run:

 nmake /f makefile.vc staticlib
 nmake /f makefile.vc apps_dir

... and got a statically-linked gdal_translate that exported no symbols.


Maybe these patches would be useful to apply permanently?  Frank?

Cheers,

Kirk.

-------------- next part --------------
Index: makefile.vc
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/makefile.vc,v
retrieving revision 1.62
diff -r1.62 makefile.vc
59c59
< default:      port_dir ogr_dir core_dir frmts_dir $(VB6_TARGET) $(GDAL_DLL) \
---
> default:      $(GDAL_DLL) \
62c62
< staticlib:
---
> staticlib: port_dir ogr_dir core_dir frmts_dir $(VB6_TARGET)
-------------- next part --------------
Index: apps/makefile.vc
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/apps/makefile.vc,v
retrieving revision 1.27
diff -r1.27 makefile.vc
6c6
< LIBS  =       $(GDAL_ROOT)\gdal_i.lib
---
> LIBS  =       $(GDALLIB)
From matt.wilkie at gov.yk.ca  Wed Aug  2 19:52:38 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Little experiment: comparison of vector projection
	OGR and ArcGIS
In-Reply-To: <200608021349.29530.dylan.beaudette@gmail.com>
References: <3c5546140607291914r2aaf80bam1a93feca0720141d@mail.gmail.com>
	<44D0DFDE.50609@gov.yk.ca>
	<200608021349.29530.dylan.beaudette@gmail.com>
Message-ID: <44D13AC6.90601@gov.yk.ca>

Hi Dylan,

> Sure. Thanks for taking time to do some of the detective work. 

You're welcome. People have done the same for me a number of times now 
so I figured I'd best return the favour. :)

take care,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From knb at gfz-potsdam.de  Thu Aug  3 03:43:13 2006
From: knb at gfz-potsdam.de (Knut Behrends)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] libtiff on solaris - must still patch or simply install
	new release?
Message-ID: <44D1A911.6060909@gfz-potsdam.de>

Greetings,

We have a mapserver +  GDAL 1.2.6.0, released 2005/03/13 running on
solaris. On the solaris box I cannot use gdal_translate to create tiff
files - gdal_translate complains about unknown file format tif, and
although there is a tif file created it is corrupt cannot be opened.



I have researched a bit... and found this thread on this list , see
below, or read it online at
http://www.asmail.be/msg0054915529.html

It seems to me that the gdal source code must be patched to run properly
on solaris. Is this still true,  or is the below-mentioned patch now
(back) in the official code trunk? So can we just upgrade gdal instead,
 without patching the source code? The previous thread does not answer
this question.

Best regards,

Knut Behrends




2005.09.12 13:47 "Re: [Gdal-dev] Problem of creation with Gtiff driver
on Solaris", by Frank Warmerdam

On 9/12/05, Fr?d?ric Trastour wrote:
>
> > Try the patch (adding TIFFSeekFile(tif,0,SEEK_SET) before the
> > WriteOK call and see if that helps.
>
> Thanks a lot, this solves the problem.
>
> It's really strange anyway and It's not very reassuring to see that
simple file
> access may be broken on Solaris. There are probably tons of similar code
> in other drivers...

Fr?d?ric,

Ed Grissom informed me that:

> Not sure if this has *any* bearing at all, but the doc for "fopen" for
some
> STD_C_LIBs says that if you open a file for modify ("+"), then you must
> fseek (or fflush?)  between any freads and fwrites.  I believe that
for some
> systems, this is not strictly necessary, but for others it is.

Thus, it may be that the Solaris stdio isn't broken, it just chooses to make
things difficult while staying within the specification.  I don't know
how many
other parts of the library may be affected but this is the one that has
bitten
us in the past.

I think the seek was removed in the past because it made it difficult for
someone to implement stream oriented access to TIFF files though I am not
very sure about that aspect.  In any event, I think I had better
re-introduce
the seek in the core code till we work out more details.

Best regards,	

From neteler at itc.it  Thu Aug  3 04:09:01 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
In-Reply-To: <20060802184335.GA10626@ak4719.spb.edu>
References: <44D0B914.3030806@pobox.com> <20060802163512.GA9980@ak4719.spb.edu>
	<44D0E7B4.6010803@pobox.com>
	<20060802184335.GA10626@ak4719.spb.edu>
Message-ID: <20060803080901.GB21102@bartok.itc.it>

On Wed, Aug 02, 2006 at 10:43:35PM +0400, Andrey Kiselev wrote:
> On Wed, Aug 02, 2006 at 01:58:12PM -0400, Frank Warmerdam wrote:
> > Andrey Kiselev wrote:
> > >I can take responsibility to add geolocation support to HDF4 and L1B
> > >drivers.
> > 
...
> > I would also love to have it in the L1B driver.   I was thinking of
> > taking a crack at it, but I'd be most comfortable if you could do it.
> 
> Ok.
>

This would be absolutely great and hopefully significantly
improve the AVHRR geocoding! I will be the first beta tester
once it is available :-)

Best
 Markus


From warmerdam at pobox.com  Thu Aug  3 09:03:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] RFC 4 - Geolocation Arrays
In-Reply-To: <20060803080901.GB21102@bartok.itc.it>
References: <44D0B914.3030806@pobox.com>
	<20060802163512.GA9980@ak4719.spb.edu>	<44D0E7B4.6010803@pobox.com>	<20060802184335.GA10626@ak4719.spb.edu>
	<20060803080901.GB21102@bartok.itc.it>
Message-ID: <44D1F429.3000206@pobox.com>

Markus Neteler wrote:
> This would be absolutely great and hopefully significantly
> improve the AVHRR geocoding! I will be the first beta tester
> once it is available :-)

Markus,

Well, the caveat is that currently the transformer built on the
geolocation arrays is still not working, but I'm hopeful to take
it with me when I go on vacation next week.  A nice off-line activity.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Aug  3 09:12:44 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] libtiff on solaris - must still patch or simply install
	new release?
In-Reply-To: <44D1A911.6060909@gfz-potsdam.de>
References: <44D1A911.6060909@gfz-potsdam.de>
Message-ID: <44D1F64C.9050003@pobox.com>

Knut Behrends wrote:
> Greetings,
> 
> We have a mapserver +  GDAL 1.2.6.0, released 2005/03/13 running on
> solaris. On the solaris box I cannot use gdal_translate to create tiff
> files - gdal_translate complains about unknown file format tif, and
> although there is a tif file created it is corrupt cannot be opened.
> 
> 
> 
> I have researched a bit... and found this thread on this list , see
> below, or read it online at
> http://www.asmail.be/msg0054915529.html
> 
> It seems to me that the gdal source code must be patched to run properly
> on solaris. Is this still true,  or is the below-mentioned patch now
> (back) in the official code trunk? So can we just upgrade gdal instead,
>  without patching the source code? The previous thread does not answer
> this question.

Knut,

My understanding is that the patch is in recent releases of libtiff.  So
one approach would be to install the latest libtiff release and ensure it
gets used in preference to the system library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Fri Aug  4 08:44:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
Message-ID: <44D3411F.80101@pobox.com>

Daniele Romagnoli wrote:
> Dear Mr. Warmerdam
> 
> A while ago, I have added some lines of code to the "Band.i" interface 
> contained into the GDAL\SWIG\Include subdirectory, in order to expose 
> the method GetBlockSize via SWIG.
> 
> 
>   %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>   void GetBlockSize(int *blockXSize, int *blockYSize){
>               GDALGetBlockSize(self, blockXSize, blockYSize);
>   }
> 
> 
> Is this a good way?
> I have tested it for Java binding and it work.
> 
> Can we add this to the available bindings in order to allow its use to 
> other users?
> 
> Let me know how do you think about it, as well as your advices.
> Thank you very much.

Daniele,

I don't see anything obviously wrong with your formulation, but when
I look in Band.i or the various other .i files I don't see anything
quite analygous to your approach either.  Some other functions that
return values in variables to which passed pointers are provided just
look like this:

   void GetOffset( double *val, int *hasval ) {
     *val = GDALGetRasterOffset( self, hasval );
   }

I'm not sure if "val and hasval" are special names or exactly what
makes this work.  But it makes me wonder if the approach you suggest
is appropriate.

Also, we could contemplate making BlockXSize and BlockYSize immutable
attributes of a band, in the same way that XSize, YSize and DataType are
handled.  I'm not sure of the benefits of this compared to just exposing
the method.

I'm cc:ing gdal-dev in the hopes of getting some wisdom from those who
understand the matter better than I do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ben at vterrain.org  Fri Aug  4 18:30:43 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] GDAL to GeoTIFF can't handle certain datums?
Message-ID: <000001c6b815$a033ef60$9b02a8c0@DellWork>


I have an image in memory, with this CRS:

"PROJCS["Custom",GEOGCS["Rikets koordinatsystem 1990",DATUM["Rikets
koordinatsystem 1990",SPHEROID["Bessel 1841",6377397.155000,299.152810"...

I use GDAL to write it a GeoTIFF file.
Using gdalinfo on the resulting tif file says:

"Coordinate System is:
PROJCS["Custom",
    GEOGCS["Rikets koordinatsystem 1990",
        DATUM["unknown",
            SPHEROID["unnamed",6377397.155,299.1528100000047]],...

You can see that a lot got lost, in particular the Datum.  Is it possible
that the GeoTIFF format just isn't capable of storing this Datum?  Without
stepping the debugger way down into GDALDataset, i can't determine if GDAL
is failing to find a GeoTIFF equivalent for this datum, or not.

Thanks,
Bne


From cfis at savagexi.com  Fri Aug  4 18:41:53 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <44D3411F.80101@pobox.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com>
Message-ID: <44D3CD31.1080007@savagexi.com>

The proposed wrapper code is correct.

%apply (int *OUTPUT){int *blockXSize, int *blockYSize}
   void GetBlockSize(int *blockXSize, int *blockYSize){
               GDALGetBlockSize(self, blockXSize, blockYSize);
   }


And could be further simplified to:

   void GetBlockSize(int *OUTPUT, int *OUTPUT){
               GDALGetBlockSize(self, blockXSize, blockYSize);
   }

What's nice is that it will work with all SWIG languages.  For those 
interested, some more technical background below.


Charlie

------------

Three are three ways to wrap output parameters in SWIG.  To show them, 
let's walk through an example:

void add(int x, int y, int *result)
{
   *result = x + y;
}

1.  Using OUTPUT, so:

void add(int, int, int *OUTPUT);

2.  Use %apply, like this:

%apply int *OUTPUT { int *result };
void add(int x, int y, int *result);

#1 is shorthand for #2.  Both have SWIG generate the wrapper code for you.

3.  Create the wrapper code yourself by using typemaps.


> I don't see anything obviously wrong with your formulation, but when
> I look in Band.i or the various other .i files I don't see anything
> quite analygous to your approach either.  Some other functions that
> return values in variables to which passed pointers are provided just
> look like this:
> 
>   void GetOffset( double *val, int *hasval ) {
>     *val = GDALGetRasterOffset( self, hasval );
>   }
> 
> I'm not sure if "val and hasval" are special names or exactly what
> makes this work.  But it makes me wonder if the approach you suggest
> is appropriate.

GetOffset is an example of option #3 above.  You can find the right type 
map for this method in each language file. Using Python as an example, 
look at line 212 in typemaps_python.i.


Part 1:

%typemap(python,in,numinputs=0) (double *val, int*hasval) ( double 
tmpval, int tmphasval ) {
   $1 = &tmpval;
   $2 = &tmphasval;
}

Before GDalGetRasterOffset is called, define two local variable. 
Pointers to these local variable will be the parameters used in the 
GDalGetRasterOffset call.


Part 2:

%typemap(python,argout) (double *val, int*hasval) {
   PyObject *r;
   if ( !*$2 ) {
     Py_INCREF(Py_None);
     r = Py_None;
     $result = t_output_helper($result,r);
   }
   else {
     r = PyFloat_FromDouble( *$1 );
     $result = t_output_helper($result,r);
   }
}

After GDalGetRasterOffset is called, check to see if hasVal is true or 
false.  If false, return Py_None (null in python).  If true, wrap val as 
a Python double object.

The reason this typemap exists is because of the extra logic involved 
needed to figure out what to do with the result.


Fake Classes
--------------

Also, a bit of backround about how the SWIG bindings are structured. 
They create "fake" classes so from Python or Ruby or Java or whatever, 
there is a class called GDALRasterBand which has a method called GetOffset.

Using these "fake" classes is a very unusual approach.  Usually, SWIG is 
used to directly wrap C++ classes so there is no need for the "fake" 
classes.

However, the GDAL bindings use the c api not the c++ api.  But if you 
exposed the C api to python or ruby, it would create an API very foreign 
to the average Python/Ruby programmer.  Thus the "fake" classes make the 
  c api look object oriented.

The advantage of this approach is you can tightly control the exposed 
api.  I think the other thought was that client programs linking against 
the C api would be more stable.  This is true for c or c++ clients, but 
I don't think is true for Python/Ruby clients.  This is because they 
provide APIs through which you register new methods - its not like a C++ 
program where the links are setup as pointers.  So when you provide a 
new gdal c lib, and the associated language binding libraries, a python 
or ruby program is not going to care that it has changed.

The disadvantage is that its a lot of extra work and complexity, and 
you're not going to find examples of how to do it out on the Web.

Anyway, hope this helps.



From warmerdam at pobox.com  Fri Aug  4 20:58:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <44D3CD31.1080007@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>
Message-ID: <44D3ED36.8080604@pobox.com>

Charlie Savage wrote:
> The proposed wrapper code is correct.
> 
> %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>   void GetBlockSize(int *blockXSize, int *blockYSize){
>               GDALGetBlockSize(self, blockXSize, blockYSize);
>   }
> 
> 
> And could be further simplified to:
> 
>   void GetBlockSize(int *OUTPUT, int *OUTPUT){
>               GDALGetBlockSize(self, blockXSize, blockYSize);
>   }
> 
> What's nice is that it will work with all SWIG languages.  For those 
> interested, some more technical background below.

Charlie / Daniele,

I have applied the simplified form to gdal/swig/include/Band.i.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dany.geotools at gmail.com  Sat Aug  5 06:46:31 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <44D3ED36.8080604@pobox.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>
	<44D3ED36.8080604@pobox.com>
Message-ID: <7221db410608050346g51d5b051ye9ae57c25af3db7@mail.gmail.com>

Thank you, Charlie and Frank.

-- 
Best Regards,
Daniele

On 8/5/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Charlie Savage wrote:
> > The proposed wrapper code is correct.
> >
> > %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
> >   void GetBlockSize(int *blockXSize, int *blockYSize){
> >               GDALGetBlockSize(self, blockXSize, blockYSize);
> >   }
> >
> >
> > And could be further simplified to:
> >
> >   void GetBlockSize(int *OUTPUT, int *OUTPUT){
> >               GDALGetBlockSize(self, blockXSize, blockYSize);
> >   }
> >
> > What's nice is that it will work with all SWIG languages.  For those
> > interested, some more technical background below.
>
> Charlie / Daniele,
>
> I have applied the simplified form to gdal/swig/include/Band.i.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/2fbe0033/attachment.html
From dany.geotools at gmail.com  Sat Aug  5 07:10:34 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Where to find Big GeoTiff Samples?
Message-ID: <7221db410608050410o4cdf60bfs28dc8e99901522d2@mail.gmail.com>

Hi Lists,
I'm testing some GDAL capabilities.

Could someone provide me a Link where I can find some big GeoTiff samples?
(About 500 MB (... and at most 500 MB)).

Thank you in advance.

-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/87a8ff32/attachment.html
From dany.geotools at gmail.com  Sat Aug  5 07:37:25 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Where to find Big GeoTiff Samples?
In-Reply-To: <7221db410608050410o4cdf60bfs28dc8e99901522d2@mail.gmail.com>
References: <7221db410608050410o4cdf60bfs28dc8e99901522d2@mail.gmail.com>
Message-ID: <7221db410608050437g146de0a1g6a16885fd5c538b9@mail.gmail.com>

Ok...

I have found some sites...

A special Thanks to Simone :)

-- 
Best Regards,
Daniele

On 8/5/06, Daniele Romagnoli <dany.geotools@gmail.com> wrote:
>
> Hi Lists,
> I'm testing some GDAL capabilities.
>
> Could someone provide me a Link where I can find some big GeoTiff samples?
> (About 500 MB (... and at most 500 MB)).
>
> Thank you in advance.
>
> --
> Best Regards,
> Daniele
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/007a0722/attachment.html
From dany.geotools at gmail.com  Sat Aug  5 08:30:58 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <44D3ED36.8080604@pobox.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>
	<44D3ED36.8080604@pobox.com>
Message-ID: <7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>

Hi,
I Have a problem.

To generate wrappers for "gdal.i" interface I use this swig command from
gdal\swig\include directory:

swig -java -c++ -package org.gdal.gdal -IJava gdal.i

where Java (-IJava) is the gdal\swig\include\java subdirectory containing
files required when building wrappers for Java target Language.

Such a command generates some java files which need to be moved to
gdal\swig\java\org\gdal\gdal folder.
It also generates the gdal_wrap.cxx file which need to be moved to
gdal\swig\java\gdal (rename it to gdal_wrap.cpp).

At this point, I run NMAKE /F makefile.vc in order to build the 4 DLL (
gdalconstjni.dll, gdaljni.dll, ogrjni.dll, osrjni.dll) as well as the
gdal.Jar file.
But this error occurs during the NMAKE

.....
        cd gdal
        nmake /nologo /f makefile.vc
        cl /nologo /MD /EHsc /Zi /Fd..\..\..\gdal.pdb -I..\..\..\port
-I..\..\..
\ogr -I..\..\..\gcore  -I..\..\..\alg  -I"c:/j2sdk1.4.2_08"/include
-I"c:/j2sdk1
.4.2_08"/include/win32 /c gdal_wrap.cpp
gdal_wrap.cpp
gdal_wrap.cpp(1157) : error C2086: 'int *OUTPUT' : redefinition
        gdal_wrap.cpp(1157) : see declaration of 'OUTPUT'
gdal_wrap.cpp(1157) : fatal error C1903: unable to recover from previous
error(s
); stopping compilation
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Programmi\Microsoft Visual Studio .NET
2003\VC7\
BIN\nmake.exe"' : return code '0x2'
Stop.


In effect, the automatically generated wrapper gdal_wrap.cpp contains this
code:

SWIGINTERN void GDALRasterBandShadow_GetBlockSize(GDALRasterBandShadow
*self,int *OUTPUT,int *OUTPUT){
      GDALGetBlockSize(self, blockXSize, blockYSize);
}


Maybe I'have missed some option using swig to generate wrappers...
My first (old) version is working:

 %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
   void GetBlockSize(int *blockXSize, int *blockYSize){
               GDALGetBlockSize(self, blockXSize, blockYSize);
   }


What I have to do to make working the semplified version?
I need to Include some other directory in the swig command?... I need to set
some option using SWIG?

Thanks a lot.

-- 
Best Regards,
Daniele




On 8/5/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Charlie Savage wrote:
> > The proposed wrapper code is correct.
> >
> > %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
> >   void GetBlockSize(int *blockXSize, int *blockYSize){
> >               GDALGetBlockSize(self, blockXSize, blockYSize);
> >   }
> >
> >
> > And could be further simplified to:
> >
> >   void GetBlockSize(int *OUTPUT, int *OUTPUT){
> >               GDALGetBlockSize(self, blockXSize, blockYSize);
> >   }
> >
> > What's nice is that it will work with all SWIG languages.  For those
> > interested, some more technical background below.
>
> Charlie / Daniele,
>
> I have applied the simplified form to gdal/swig/include/Band.i.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGF, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/37a2afa8/attachment.html
From cfis at savagexi.com  Sat Aug  5 13:43:54 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>	
	<44D3ED36.8080604@pobox.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
Message-ID: <44D4D8DA.5000106@savagexi.com>

Check to see if templates.i is included.

See:

http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5

Charlie

Daniele Romagnoli wrote:
> Hi,
> I Have a problem.
> 
> To generate wrappers for "gdal.i" interface I use this swig command from 
> gdal\swig\include directory:
> 
> swig -java -c++ -package org.gdal.gdal -IJava gdal.i
> 
> where Java (-IJava) is the gdal\swig\include\java subdirectory 
> containing files required when building wrappers for Java target Language.
> 
> Such a command generates some java files which need to be moved to 
> gdal\swig\java\org\gdal\gdal folder.
> It also generates the gdal_wrap.cxx file which need to be moved to 
> gdal\swig\java\gdal (rename it to gdal_wrap.cpp).
> 
> At this point, I run NMAKE /F makefile.vc <http://makefile.vc> in order 
> to build the 4 DLL (gdalconstjni.dll, gdaljni.dll, ogrjni.dll , 
> osrjni.dll) as well as the gdal.Jar file.
> But this error occurs during the NMAKE
> 
> .....
>         cd gdal
>         nmake /nologo /f makefile.vc <http://makefile.vc>
>         cl /nologo /MD /EHsc /Zi /Fd..\..\..\gdal.pdb -I..\..\..\port 
> -I..\..\..
> \ogr -I..\..\..\gcore  -I..\..\..\alg  -I"c:/j2sdk1.4.2_08"/include 
> -I"c:/j2sdk1
> .4.2_08"/include/win32 /c gdal_wrap.cpp
> gdal_wrap.cpp
> gdal_wrap.cpp(1157) : error C2086: 'int *OUTPUT' : redefinition
>         gdal_wrap.cpp(1157) : see declaration of 'OUTPUT'
> gdal_wrap.cpp(1157) : fatal error C1903: unable to recover from previous 
> error(s
> ); stopping compilation
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Programmi\Microsoft Visual Studio .NET 
> 2003\VC7\
> BIN\nmake.exe"' : return code '0x2'
> Stop.
> 
> 
> In effect, the automatically generated wrapper gdal_wrap.cpp contains 
> this code:
> 
> SWIGINTERN void GDALRasterBandShadow_GetBlockSize(GDALRasterBandShadow 
> *self,int *OUTPUT,int *OUTPUT){
>       GDALGetBlockSize(self, blockXSize, blockYSize);
> }
> 
> 
> Maybe I'have missed some option using swig to generate wrappers...
> My first (old) version is working:
> 
>  %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>    void GetBlockSize(int *blockXSize, int *blockYSize){
>                GDALGetBlockSize(self, blockXSize, blockYSize);
>    }
> 
> 
> What I have to do to make working the semplified version?
> I need to Include some other directory in the swig command?... I need to 
> set some option using SWIG?
> 
> Thanks a lot.
> 
> -- 
> Best Regards,
> Daniele
> 
> 
> 
> 
> On 8/5/06, *Frank Warmerdam* <warmerdam@pobox.com 
> <mailto:warmerdam@pobox.com>> wrote:
> 
>     Charlie Savage wrote:
>      > The proposed wrapper code is correct.
>      >
>      > %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>      >   void GetBlockSize(int *blockXSize, int *blockYSize){
>      >               GDALGetBlockSize(self, blockXSize, blockYSize);
>      >   }
>      >
>      >
>      > And could be further simplified to:
>      >
>      >   void GetBlockSize(int *OUTPUT, int *OUTPUT){
>      >               GDALGetBlockSize(self, blockXSize, blockYSize);
>      >   }
>      >
>      > What's nice is that it will work with all SWIG languages.  For those
>      > interested, some more technical background below.
> 
>     Charlie / Daniele,
> 
>     I have applied the simplified form to gdal/swig/include/Band.i.
> 
>     Best regards,
>     --
>     ---------------------------------------+--------------------------------------
>     I set the clouds in motion - turn up   | Frank Warmerdam,
>     warmerdam@pobox.com <mailto:warmerdam@pobox.com>
>     light and sound - activate the windows | http://pobox.com/~warmerdam
>     <http://pobox.com/%7Ewarmerdam>
>     and watch the world go round - Rush    | President OSGF,
>     http://osgeo.org <http://osgeo.org>
> 
> 
> 
> 
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/6c978f57/smime.bin
From dany.geotools at gmail.com  Sat Aug  5 14:07:40 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>
	<44D3ED36.8080604@pobox.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
Message-ID: <7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>

I'm sorry Charlie...
Please, throw away my previous email (which contains a typo)...

This one is corrected:
----
There is no sign of templates.i in my code (neither in the gdal and swig
subfolders).
Furthermore, there is no trace of templates.i in the suggested http link :(

Maybe are you talking about typemaps.i?
I'm sure that typemaps.i is included.

-- 
Best Regards,
Daniele

---------- Forwarded message ----------
From: Daniele Romagnoli <dany.geotools@gmail.com>
Date: Aug 5, 2006 8:03 PM
Subject: Re: gdal swig interface Band.i Updated
To: Charlie Savage <cfis@savagexi.com>

On 8/5/06, Charlie Savage <cfis@savagexi.com> wrote:

> Check to see if templates.i is included.
>
> See:
>
> http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5



There is no sign of templates.i in my code (neither in the gdal and swig
subfolders).
Furthermore, there is no trace of typemaps.i in the suggested http link :(

Maybe are you talking about typemaps.i?
I'm sure that typemaps.i is included.

-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/197b48d7/attachment.html
From cfis at savagexi.com  Sat Aug  5 14:30:38 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>	
	<44D3ED36.8080604@pobox.com>	
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>	
	<44D4D8DA.5000106@savagexi.com>	
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
Message-ID: <44D4E3CE.2050604@savagexi.com>

Sorry, typemaps.i is what I meant.  I don't see it included anywhere 
except in the csharp.i file.

Try putting it in gdal.i instead - that will cause all languages to use 
it.  If that works, it probably should be removed from csharp.i. And 
added to ogr.i (not sure if there is one central .i file it go into, 
doesn't look like it).

Charlie

Daniele Romagnoli wrote:
> I'm sorry Charlie...
> Please, throw away my previous email (which contains a typo)...
> 
> This one is corrected:
> ----
> There is no sign of templates.i in my code (neither in the gdal and swig 
> subfolders).
> Furthermore, there is no trace of templates.i in the suggested http link :(
> 
> Maybe are you talking about typemaps.i?
> I'm sure that typemaps.i is included.
> 
> -- 
> Best Regards,
> Daniele
> 
> ---------- Forwarded message ----------
> From: *Daniele Romagnoli* <dany.geotools@gmail.com 
> <mailto:dany.geotools@gmail.com>>
> Date: Aug 5, 2006 8:03 PM
> Subject: Re: gdal swig interface Band.i Updated
> To: Charlie Savage <cfis@savagexi.com <mailto:cfis@savagexi.com>>
> 
> On 8/5/06, *Charlie Savage* <cfis@savagexi.com 
> <mailto:cfis@savagexi.com>> wrote:
> 
>     Check to see if templates.i is included.
> 
>     See:
> 
>     http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5
>     <http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5>
> 
> 
> 
> There is no sign of templates.i in my code (neither in the gdal and swig 
> subfolders).
> Furthermore, there is no trace of typemaps.i in the suggested http link :(
> 
> Maybe are you talking about typemaps.i?
> I'm sure that typemaps.i is included.
> 
> -- 
> Best Regards,
> Daniele
> 
> 
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/f6aa133a/smime.bin
From dany.geotools at gmail.com  Sat Aug  5 15:31:13 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44D4E3CE.2050604@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>
	<44D3ED36.8080604@pobox.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
Message-ID: <7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>

gdal.i include band.i (band.i contains "our" getBlockSize method)

furthermore, gdal.i contains this code:

#if defined(SWIGPYTHON)
%include "gdal_python.i"
#elif defined(SWIGRUBY)
%include "gdal_ruby.i"
#elif defined(SWIGPHP4)
%include "gdal_php.i"
#elif defined(SWIGCSHARP)
%include "gdal_csharp.i"
#elif defined(SWIGPERL)
%include "gdal_perl.i"
#elif defined(SWIGJAVA)
%include "gdal_java.i"
#else
%include "gdal_typemaps.i"
#endif


and gdal_java.i contains this code:

%include typemaps_java.i
(while other languages include the proper typemaps_language.i)

This "include" mechanism should work?
Or I explicitly need to include something else somewhere?

Thanks again.

Cheers
Daniele


On 8/5/06, Charlie Savage <cfis@savagexi.com> wrote:
>
> Sorry, typemaps.i is what I meant.  I don't see it included anywhere
> except in the csharp.i file.
>
> Try putting it in gdal.i instead - that will cause all languages to use
> it.  If that works, it probably should be removed from csharp.i. And
> added to ogr.i (not sure if there is one central .i file it go into,
> doesn't look like it).
>
> Charlie
>
> Daniele Romagnoli wrote:
> > I'm sorry Charlie...
> > Please, throw away my previous email (which contains a typo)...
> >
> > This one is corrected:
> > ----
> > There is no sign of templates.i in my code (neither in the gdal and swig
> > subfolders).
> > Furthermore, there is no trace of templates.i in the suggested http link
> :(
> >
> > Maybe are you talking about typemaps.i?
> > I'm sure that typemaps.i is included.
> >
> > --
> > Best Regards,
> > Daniele
> >
> > ---------- Forwarded message ----------
> > From: *Daniele Romagnoli* <dany.geotools@gmail.com
> > <mailto:dany.geotools@gmail.com>>
> > Date: Aug 5, 2006 8:03 PM
> > Subject: Re: gdal swig interface Band.i Updated
> > To: Charlie Savage <cfis@savagexi.com <mailto:cfis@savagexi.com>>
> >
> > On 8/5/06, *Charlie Savage* <cfis@savagexi.com
> > <mailto:cfis@savagexi.com>> wrote:
> >
> >     Check to see if templates.i is included.
> >
> >     See:
> >
> >     http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5
> >     <http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5>
> >
> >
> >
> > There is no sign of templates.i in my code (neither in the gdal and swig
> > subfolders).
> > Furthermore, there is no trace of typemaps.i in the suggested http link
> :(
> >
> > Maybe are you talking about typemaps.i?
> > I'm sure that typemaps.i is included.
> >
> > --
> > Best Regards,
> > Daniele
> >
> >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/2cd7b850/attachment.html
From cfis at savagexi.com  Sat Aug  5 15:55:18 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<44D3411F.80101@pobox.com> <44D3CD31.1080007@savagexi.com>	
	<44D3ED36.8080604@pobox.com>	
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>	
	<44D4D8DA.5000106@savagexi.com>	
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>	
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>	
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
Message-ID: <44D4F7A6.4000204@savagexi.com>

In gdal.i add

%include "typemaps.i"

*before* the code you pasted below (so it is loaded before gdal_typemaps.i)

Charlie

Daniele Romagnoli wrote:
> gdal.i include band.i (band.i contains "our" getBlockSize method)
> 
> furthermore, gdal.i contains this code:
> 
> #if defined(SWIGPYTHON)
> %include "gdal_python.i"
> #elif defined(SWIGRUBY)
> %include "gdal_ruby.i"
> #elif defined(SWIGPHP4)
> %include "gdal_php.i"
> #elif defined(SWIGCSHARP)
> %include "gdal_csharp.i"
> #elif defined(SWIGPERL)
> %include "gdal_perl.i"
> #elif defined(SWIGJAVA)
> %include "gdal_java.i"
> #else
> %include "gdal_typemaps.i"
> #endif
> 
> 
> and gdal_java.i contains this code:
> 
> %include typemaps_java.i
> (while other languages include the proper typemaps_language.i)
> 
> This "include" mechanism should work?
> Or I explicitly need to include something else somewhere?
> 
> Thanks again.
> 
> Cheers
> Daniele
> 
> 
> On 8/5/06, *Charlie Savage* < cfis@savagexi.com 
> <mailto:cfis@savagexi.com>> wrote:
> 
>     Sorry, typemaps.i is what I meant.  I don't see it included anywhere
>     except in the csharp.i file.
> 
>     Try putting it in gdal.i instead - that will cause all languages to use
>     it.  If that works, it probably should be removed from csharp.i. And
>     added to ogr.i (not sure if there is one central .i file it go into,
>     doesn't look like it).
> 
>     Charlie
> 
>     Daniele Romagnoli wrote:
>      > I'm sorry Charlie...
>      > Please, throw away my previous email (which contains a typo)...
>      >
>      > This one is corrected:
>      > ----
>      > There is no sign of templates.i in my code (neither in the gdal
>     and swig
>      > subfolders).
>      > Furthermore, there is no trace of templates.i in the suggested
>     http link :(
>      >
>      > Maybe are you talking about typemaps.i?
>      > I'm sure that typemaps.i is included.
>      >
>      > --
>      > Best Regards,
>      > Daniele
>      >
>      > ---------- Forwarded message ----------
>      > From: *Daniele Romagnoli* < dany.geotools@gmail.com
>     <mailto:dany.geotools@gmail.com>
>      > <mailto:dany.geotools@gmail.com <mailto:dany.geotools@gmail.com>>>
>      > Date: Aug 5, 2006 8:03 PM
>      > Subject: Re: gdal swig interface Band.i Updated
>      > To: Charlie Savage < cfis@savagexi.com <mailto:cfis@savagexi.com>
>     <mailto:cfis@savagexi.com <mailto:cfis@savagexi.com>>>
>      >
>      > On 8/5/06, *Charlie Savage* <cfis@savagexi.com
>     <mailto:cfis@savagexi.com>
>      > <mailto:cfis@savagexi.com <mailto:cfis@savagexi.com>>> wrote:
>      >
>      >     Check to see if templates.i is included.
>      >
>      >     See:
>      >
>      >     http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5
>      >     <http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5>
>      >
>      >
>      >
>      > There is no sign of templates.i in my code (neither in the gdal
>     and swig
>      > subfolders).
>      > Furthermore, there is no trace of typemaps.i in the suggested
>     http link :(
>      >
>      > Maybe are you talking about typemaps.i?
>      > I'm sure that typemaps.i is included.
>      >
>      > --
>      > Best Regards,
>      > Daniele
>      >
>      >
>      >
> 
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/a2990dc6/smime.bin
From dany.geotools at gmail.com  Sat Aug  5 18:05:39 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44D4F7A6.4000204@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D3CD31.1080007@savagexi.com> <44D3ED36.8080604@pobox.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
Message-ID: <7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>

On 8/5/06, Charlie Savage <cfis@savagexi.com> wrote:
>
> In gdal.i add
>
> %include "typemaps.i"
>
> *before* the code you pasted below (so it is loaded before
> gdal_typemaps.i)



Done, but the problem was not resolved :(
I think that the use of JAVA as target Language prevent the "include" of
gdal_typemaps.i as defined by the "if-elif-if-elif..." chain previously
shown.

I also think (maybe I'm wrong) that when using Java, gdal.i will include
gdal_java.i which includes typemaps_java.i which includes typemaps.i.
Here, some parts of code:

gdal.i:
...
#elif defined(SWIGJAVA)
%include "gdal_java.i"
#else
%include "gdal_typemaps.i"
#endif
...

Chapter 7.3 of Swig-1.3 Documentation says:
SWIGJAVA Defined when using Java

gdal_java.i:
...
%include typemaps_java.i
...

typemaps_java.i:
...
%include "arrays_java.i";
%include "typemaps.i"
...

Thus, the result should be the same.

I'm not really familiar with swig but are you sure that the %APPLY directive
is not required?
(excuse me for my stupid question... :-( )

Thanks for your continuous aid,
Daniele


Charlie
>
> Daniele Romagnoli wrote:
> > gdal.i include band.i (band.i contains "our" getBlockSize method)
> >
> > furthermore, gdal.i contains this code:
> >
> > #if defined(SWIGPYTHON)
> > %include "gdal_python.i"
> > #elif defined(SWIGRUBY)
> > %include "gdal_ruby.i"
> > #elif defined(SWIGPHP4)
> > %include "gdal_php.i"
> > #elif defined(SWIGCSHARP)
> > %include "gdal_csharp.i"
> > #elif defined(SWIGPERL)
> > %include "gdal_perl.i"
> > #elif defined(SWIGJAVA)
> > %include "gdal_java.i"
> > #else
> > %include "gdal_typemaps.i"
> > #endif
> >
> >
> > and gdal_java.i contains this code:
> >
> > %include typemaps_java.i
> > (while other languages include the proper typemaps_language.i)
> >
> > This "include" mechanism should work?
> > Or I explicitly need to include something else somewhere?
> >
> > Thanks again.
> >
> > Cheers
> > Daniele
> >
> >
> > On 8/5/06, *Charlie Savage* < cfis@savagexi.com
> > <mailto:cfis@savagexi.com>> wrote:
> >
> >     Sorry, typemaps.i is what I meant.  I don't see it included anywhere
> >     except in the csharp.i file.
> >
> >     Try putting it in gdal.i instead - that will cause all languages to
> use
> >     it.  If that works, it probably should be removed from csharp.i. And
> >     added to ogr.i (not sure if there is one central .i file it go into,
> >     doesn't look like it).
> >
> >     Charlie
> >
> >     Daniele Romagnoli wrote:
> >      > I'm sorry Charlie...
> >      > Please, throw away my previous email (which contains a typo)...
> >      >
> >      > This one is corrected:
> >      > ----
> >      > There is no sign of templates.i in my code (neither in the gdal
> >     and swig
> >      > subfolders).
> >      > Furthermore, there is no trace of templates.i in the suggested
> >     http link :(
> >      >
> >      > Maybe are you talking about typemaps.i?
> >      > I'm sure that typemaps.i is included.
> >      >
> >      > --
> >      > Best Regards,
> >      > Daniele
> >      >
> >      > ---------- Forwarded message ----------
> >      > From: *Daniele Romagnoli* < dany.geotools@gmail.com
> >     <mailto:dany.geotools@gmail.com>
> >      > <mailto:dany.geotools@gmail.com <mailto:dany.geotools@gmail.com
> >>>
> >      > Date: Aug 5, 2006 8:03 PM
> >      > Subject: Re: gdal swig interface Band.i Updated
> >      > To: Charlie Savage < cfis@savagexi.com <mailto:cfis@savagexi.com>
> >     <mailto:cfis@savagexi.com <mailto:cfis@savagexi.com>>>
> >      >
> >      > On 8/5/06, *Charlie Savage* <cfis@savagexi.com
> >     <mailto:cfis@savagexi.com>
> >      > <mailto:cfis@savagexi.com <mailto:cfis@savagexi.com>>> wrote:
> >      >
> >      >     Check to see if templates.i is included.
> >      >
> >      >     See:
> >      >
> >      >     http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5
> >      >     <http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5>
> >      >
> >      >
> >      >
> >      > There is no sign of templates.i in my code (neither in the gdal
> >     and swig
> >      > subfolders).
> >      > Furthermore, there is no trace of typemaps.i in the suggested
> >     http link :(
> >      >
> >      > Maybe are you talking about typemaps.i?
> >      > I'm sure that typemaps.i is included.
> >      >
> >      > --
> >      > Best Regards,
> >      > Daniele
> >      >
> >      >
> >      >
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060806/31bb3344/attachment.html
From cfis at savagexi.com  Sat Aug  5 18:28:23 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<44D3CD31.1080007@savagexi.com> <44D3ED36.8080604@pobox.com>	
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>	
	<44D4D8DA.5000106@savagexi.com>	
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>	
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>	
	<44D4E3CE.2050604@savagexi.com>	
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>	
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
Message-ID: <44D51B87.8010803@savagexi.com>

Hmm, in theory %apply and OUT do the same thing.  Once again, see:

http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5

Anyway, I would take the simple approach, which is add this line:

%include "typemaps.i"

To gdal.i before line 441 which is:

%include "Band.i"

And in fact, I'd probably put it on line 192 (before the #if 
defined(SWIGPYTHON).

Doing that simplifies the problem.  If it doesn't work, then yes, it 
appears the OUTPUT * parameter is not working for Java in which case go 
back to using apply (and maybe submit a bug to SWIG).

However, if you use %apply then you should also clear it after the 
method is defined.

%apply (int *OUTPUT){int *blockXSize, int *blockYSize}
   void GetBlockSize(int *blockXSize, int *blockYSize){
               GDALGetBlockSize(self, blockXSize, blockYSize);
   }
%clear (int *blockXSize, int *blockYSize)

Its probably not that important in this case, but if there happened to 
be another method with the same 2 output parameters then this typemap 
would be applied again (sometimes you want that, sometimes you don't).

Charlie

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/b761c123/smime.bin
From dany.geotools at gmail.com  Sat Aug  5 18:45:11 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44D51B87.8010803@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
	<44D51B87.8010803@savagexi.com>
Message-ID: <7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>

On 8/6/06, Charlie Savage <cfis@savagexi.com> wrote:
>
> Hmm, in theory %apply and OUT do the same thing.  Once again, see:
>
> http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5


You are right...

Anyway, I would take the simple approach, which is add this line:
>
> %include "typemaps.i"
>
> To gdal.i before line 441 which is:
>
> %include "Band.i"
>
> And in fact, I'd probably put it on line 192 (before the #if
> defined(SWIGPYTHON).
>
> Doing that simplifies the problem.  If it doesn't work, then yes, it
> appears the OUTPUT * parameter is not working for Java in which case go
> back to using apply (and maybe submit a bug to SWIG).


Unfortunately, it doesn't work :(
I'll back to using apply...

However, if you use %apply then you should also clear it after the
> method is defined.
>
> %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>    void GetBlockSize(int *blockXSize, int *blockYSize){
>                GDALGetBlockSize(self, blockXSize, blockYSize);
>    }
> %clear (int *blockXSize, int *blockYSize)



Ok, Thank you. I will add the final %clear directive.

Its probably not that important in this case, but if there happened to
> be another method with the same 2 output parameters then this typemap
> would be applied again (sometimes you want that, sometimes you don't).
>
> Charlie
>
>
>
> Thank you very much!
-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060806/cee4c74d/attachment.html
From dany.geotools at gmail.com  Sat Aug  5 18:56:15 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44D51B87.8010803@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
	<44D51B87.8010803@savagexi.com>
Message-ID: <7221db410608051556s62853fd2h68190728e774605f@mail.gmail.com>

On 8/6/06, Charlie Savage <cfis@savagexi.com> wrote:
>
> ...
>
> %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>    void GetBlockSize(int *blockXSize, int *blockYSize){
>                GDALGetBlockSize(self, blockXSize, blockYSize);
>    }
> %clear (int *blockXSize, int *blockYSize)
>
> ....
>
> The right %clear directive usage is:
%clear int *blockXSize, int *blockYSize;

I have realized that just trying because "%clear (int *blockXSize, int
*blockYSize)" give an error.
I have rectified this little error just to allow to Frank Warmerdam to use
the error-free instructions and update them... Nothing else :)

-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060806/9ed9b1f4/attachment.html
From cfis at savagexi.com  Sat Aug  5 23:01:39 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051556s62853fd2h68190728e774605f@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<7221db410608050530i1acbcb26k58af53fb25ce5327@mail.gmail.com>	
	<44D4D8DA.5000106@savagexi.com>	
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>	
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>	
	<44D4E3CE.2050604@savagexi.com>	
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>	
	<44D4F7A6.4000204@savagexi.com>	
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>	
	<44D51B87.8010803@savagexi.com>
	<7221db410608051556s62853fd2h68190728e774605f@mail.gmail.com>
Message-ID: <44D55B93.20103@savagexi.com>

 > The right %clear directive usage is:
 > %clear int *blockXSize, int *blockYSize;

You sure about that?  See line 985 in ogr.i for a counter example:

%apply (int nLen, char *pBuf ) { (int len, char *bin_string)};
%inline %{
   OGRGeometryShadow* CreateGeometryFromWkb( int len, char *bin_string,
                                             OSRSpatialReferenceShadow 
*reference=NULL ) {
...
%}
%clear (int len, char *bin_string);


I think what you have means clear the typemap for parameters called 
either blockXSize *or* blockYSize, but the SWIG documentation is not 
particularly clear on the point.

Charlie

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060805/3670950a/smime.bin
From dany.geotools at gmail.com  Sun Aug  6 06:41:48 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44D55B93.20103@savagexi.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
	<44D51B87.8010803@savagexi.com>
	<7221db410608051556s62853fd2h68190728e774605f@mail.gmail.com>
	<44D55B93.20103@savagexi.com>
Message-ID: <7221db410608060341o5fbaab39vecb257f5ed492fd6@mail.gmail.com>

I have found this on Swig-1.3 Documentation, Chapter 9.1.5, Top of Page 122:

%clear Int32 *in, long *x;



Yesterday, using "%clear (int *blockXSize, int *blockYSize);" gave me an
error.
Today I'have tried again your command and it works fine. I'm sorry for my
mistake.

Best Regards,
Daniele



On 8/6/06, Charlie Savage <cfis@savagexi.com > wrote:
>
> > The right %clear directive usage is:
> > %clear int *blockXSize, int *blockYSize;
>
> You sure about that?  See line 985 in ogr.i for a counter example:
>
> %apply (int nLen, char *pBuf ) { (int len, char *bin_string)};
> %inline %{
>    OGRGeometryShadow* CreateGeometryFromWkb( int len, char *bin_string,
>                                              OSRSpatialReferenceShadow
> *reference=NULL ) {
> ...
> %}
> %clear (int len, char *bin_string);
>
>
> I think what you have means clear the typemap for parameters called
> either blockXSize *or* blockYSize, but the SWIG documentation is not
> particularly clear on the point.
>
> Charlie
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060806/7d7e305a/attachment.html
From guillaume.huby.lists at gmail.com  Mon Aug  7 05:37:56 2006
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] colormap problem using gdal_translate
Message-ID: <ddc797c30608070237h7371ac04k123f78c7d6610129@mail.gmail.com>

Hello,

I'm using FWTools1.0.5.

I use gdal_translate to convert a BIP+HDR+CLR file to a tif file :
gdal_translate toto.bip toto.tif

I have a problem with the output color map : all colors are shift by one
index. For exemple the color of index 2 in the bip file is associated to
index 3 in tif file, and so on. Index 0 is set to black (R=0, G=0, B=0) and
the color of index 255 in bip file is no longer in new color map.

I tried
gdal_translate -mo "TIFFTAG_PHOTOMETRIC=3" toto.bip toto.tif
wich helps nothing.

Did I do something wrong ?
Is there any way to solve this ?

Thanks for your help,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060807/5eed9642/attachment.html
From wilken at ohb-system.de  Mon Aug  7 06:08:05 2006
From: wilken at ohb-system.de (Holger Wilken)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?
Message-ID: <FDEOJHHKMJJBMPHGGGCLAEMFCBAA.wilken@ohb-system.de>

Hi,

my problem:
I want to convert VMAP layer to shapefiles under Windows,
but neither the conversion nor layer info with ogrinfo works.

What I have tried so far:

I use FWtools 1.0.5 under Windows 2k (CommandLine)
My VMAP layers are located at D:\data\vmap0\v0eur\vmaplv0\eurnasia,
(downloaded directly from geoengine.nima.mil),
ogrinfo.exe and ogr2ogr.exe are in C:\Programme\FWtools\bin

I start ogrinfo from C:\Programme\FWtools\bin, for example:
ogrinfo.exe -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
which returns only
INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.
but no further information is displayed. Syntax seems to be correct though.

next try - start with debug info:
ogrinfo.exe --debug on -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
gets me a little more output:
KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37018)
succeeded
as OGDI.
INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.
OGR: GetLayerCount() = 59

Shouldn't there be more info?
I don't know where the 00D37018 at the end of the gltp path comes from, it's
not in the vmap directory structure.

The ogr2ogr call to create a Shapefile out of the VMAP Layer:
ogr2ogr.exe oceansea.shp gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
does not give any errors/warnings, but no output shapefile either.

I have Administrator rights, so the directory (C:\Programme\FWtools\bin) is
not read-only.

Here as well, add the debug option:
ogr2ogr.exe --debug on oceansea.shp
gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 'oceansea@bnd(*)_area'
gives me:
KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37028)
succeeded
as OGDI.
More output, but still no Shapefile.

According to the OGR 1.1.6 change list, the OGDI driver should work properly
with drive letters under windows. All other samples I have found were using
unix style paths.

Do other people have the same problem?
Please give me a hint what I am missing or if it's a bug.

thanks in advance

Holger



From warmerdam at pobox.com  Mon Aug  7 09:41:35 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] colormap problem using gdal_translate
In-Reply-To: <ddc797c30608070237h7371ac04k123f78c7d6610129@mail.gmail.com>
References: <ddc797c30608070237h7371ac04k123f78c7d6610129@mail.gmail.com>
Message-ID: <44D7430F.1070808@pobox.com>

guillaume huby wrote:
> Hello,
> 
> I'm using FWTools1.0.5.
> 
> I use gdal_translate to convert a BIP+HDR+CLR file to a tif file :
> gdal_translate toto.bip toto.tif
> 
> I have a problem with the output color map : all colors are shift by one 
> index. For exemple the color of index 2 in the bip file is associated to 
> index 3 in tif file, and so on. Index 0 is set to black (R=0, G=0, B=0) 
> and the color of index 255 in bip file is no longer in new color map.
> 
> I tried
> gdal_translate -mo "TIFFTAG_PHOTOMETRIC=3" toto.bip toto.tif
> wich helps nothing.
> 
> Did I do something wrong ?
> Is there any way to solve this ?

Guillaume,

Could you email me your .clr file?  I suspect there is a small problem in
the .clr reading code in some cases.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From wilken at ohb-system.de  Fri Aug  4 04:10:02 2006
From: wilken at ohb-system.de (Holger Wilken)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?
Message-ID: <FDEOJHHKMJJBMPHGGGCLGELMCBAA.wilken@ohb-system.de>

Hi,

my problem:
I want to convert VMAP layer to shapefiles under Windows,
but neither the conversion nor layer info with ogrinfo works.

What I have tried so far:

I use FWtools 1.0.5 under Windows 2k (CommandLine)
My VMAP layers are located at D:\data\vmap0\v0eur\vmaplv0\eurnasia,
(downloaded directly from geoengine.nima.mil),
ogrinfo.exe and ogr2ogr.exe are in C:\Programme\FWtools\bin

I start ogrinfo from C:\Programme\FWtools\bin, for example:
ogrinfo.exe -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
which returns only
INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.
but no further information is displayed. Syntax seems to be correct though.

next try - start with debug info:
ogrinfo.exe --debug on -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
gets me a little more output:
KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37018)
succeeded
as OGDI.
INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.
OGR: GetLayerCount() = 59

Shouldn't there be more info?
I don't know where the 00D37018 at the end of the gltp path comes from, it's
not in the vmap directory structure.

The ogr2ogr call to create a Shapefile out of the VMAP Layer:
ogr2ogr.exe oceansea.shp gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
'oceansea@bnd(*)_area'
does not give any errors/warnings, but no output shapefile either.

I have Administrator rights, so the directory (C:\Programme\FWtools\bin) is
not read-only.

Here as well, add the debug option:
ogr2ogr.exe --debug on oceansea.shp
gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 'oceansea@bnd(*)_area'
gives me:
KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37028)
succeeded
as OGDI.
More output, but still no Shapefile.

According to the OGR 1.1.6 change list, the OGDI driver should work properly
with drive letters under windows. All other samples I have found were using
unix style paths.

Do other people have the same problem?
Please give me a hint what I am missing or if it's a bug.

thanks in advance

Holger



From Dan.Putler at sauder.ubc.ca  Mon Aug  7 11:06:37 2006
From: Dan.Putler at sauder.ubc.ca (Putler, Dan)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?
Message-ID: <974E950B-D8DF-4732-B930-3112089B6271@sauder.ubc.ca>

Hi Holger,

The following link could be of use to you. It describes how to load  
VMAP0 layers into PostGIS, but an intermediate step in the process is  
to convert the layers into shapefiles using ogr2ogr. A Windows batch  
script is provided as an attachment that does the VMAP0 to shapefile  
transformation.

The link is:

http://docs.codehaus.org/display/GEOSDOC/Loading+VMAP0+data

Dan

On 4-Aug-06, at 1:10 AM, Holger Wilken wrote:

> Hi,
>
> my problem:
> I want to convert VMAP layer to shapefiles under Windows,
> but neither the conversion nor layer info with ogrinfo works.
>
> What I have tried so far:
>
> I use FWtools 1.0.5 under Windows 2k (CommandLine)
> My VMAP layers are located at D:\data\vmap0\v0eur\vmaplv0\eurnasia,
> (downloaded directly from geoengine.nima.mil),
> ogrinfo.exe and ogr2ogr.exe are in C:\Programme\FWtools\bin
>
> I start ogrinfo from C:\Programme\FWtools\bin, for example:
> ogrinfo.exe -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
> 'oceansea@bnd(*)_area'
> which returns only
> INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
>       using driver `OGDI' successful.
> but no further information is displayed. Syntax seems to be correct  
> though.
>
> next try - start with debug info:
> ogrinfo.exe --debug on -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/ 
> eurnasia
> 'oceansea@bnd(*)_area'
> gets me a little more output:
> KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
> OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37018)
> succeeded
> as OGDI.
> INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
>       using driver `OGDI' successful.
> OGR: GetLayerCount() = 59
>
> Shouldn't there be more info?
> I don't know where the 00D37018 at the end of the gltp path comes  
> from, it's
> not in the vmap directory structure.
>
> The ogr2ogr call to create a Shapefile out of the VMAP Layer:
> ogr2ogr.exe oceansea.shp gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/ 
> eurnasia
> 'oceansea@bnd(*)_area'
> does not give any errors/warnings, but no output shapefile either.
>
> I have Administrator rights, so the directory (C:\Programme\FWtools 
> \bin) is
> not read-only.
>
> Here as well, add the debug option:
> ogr2ogr.exe --debug on oceansea.shp
> gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 'oceansea@bnd(*)_area'
> gives me:
> KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
> OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37028)
> succeeded
> as OGDI.
> More output, but still no Shapefile.
>
> According to the OGR 1.1.6 change list, the OGDI driver should work  
> properly
> with drive letters under windows. All other samples I have found  
> were using
> unix style paths.
>
> Do other people have the same problem?
> Please give me a hint what I am missing or if it's a bug.
>
> thanks in advance
>
> Holger
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060807/1c3e5c10/attachment.html
From warmerdam at pobox.com  Mon Aug  7 11:19:26 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] colormap problem using gdal_translate
In-Reply-To: <ddc797c30608070733o49973af5n1519a3c414e49d00@mail.gmail.com>
References: <ddc797c30608070237h7371ac04k123f78c7d6610129@mail.gmail.com>	
	<44D7430F.1070808@pobox.com>
	<ddc797c30608070733o49973af5n1519a3c414e49d00@mail.gmail.com>
Message-ID: <44D759FE.30901@pobox.com>

guillaume huby wrote:
> On 8/7/06, *Frank Warmerdam* <warmerdam@pobox.com 
> <mailto:warmerdam@pobox.com>> wrote:
> 
>     Could you email me your .clr file?  I suspect there is a small
>     problem in
>     the .clr reading code in some cases.
> 
> 
> Frank,
> 
> Thank you for looking at this problem.
> Please find the .clr file attached to this mail.

Guillaume,

I have confirmed there was a bug in the .clr reader for the EHDR driver.
When there was a comment line starting with # at the beginning of the file,
it would be counted as the first color map entry.

The change looks like this, if you need to apply it to your own
local source.

diff -u -r1.39 ehdrdataset.cpp
--- ehdrdataset.cpp     7 Jun 2006 16:19:41 -0000       1.39
+++ ehdrdataset.cpp     7 Aug 2006 15:19:10 -0000
@@ -1298,6 +1298,9 @@
              if ( !pszLine )
                  break;

+            if( *pszLine == '#' )
+                continue;
+
              char       **papszValues = CSLTokenizeString2(pszLine, "\t ",
                                                             CSLT_HONOURSTRINGS);
              GDALColorEntry oEntry;

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From l.bargeot at educagri.fr  Mon Aug  7 12:19:15 2006
From: l.bargeot at educagri.fr (Lionel Bargeot)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] problem writing ecw (gdal in FWTools-1.0.5)
Message-ID: <44D76803.9090909@educagri.fr>

Hi all,

I use a WMS server with FWTools-1.0.5 binary distribution on Linux.

I can serve ECW files (with mapserv as WMS) larger than 50 Mo when the
source is tiled geotif images.
When datasource is tiled ecw files, I have the following error message
when generated images are (about) larger than 4000x4000 pixels :

msDrawMap(): Image handling error. Failed to draw layer named MYLAYERNAME .
NCScbmReadViewLineBIL failed.: Unable to access file. GDALRasterIO()
failed: drawGDAL()

For smaller images, no problem

Any idea ?
Do you think the problem will be solved if I compile my own gdal library ?

Thanks

Lionel


From lxnyce at gmail.com  Mon Aug  7 12:45:20 2006
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] problem writing ecw (gdal in FWTools-1.0.5)
In-Reply-To: <44D76803.9090909@educagri.fr>
References: <44D76803.9090909@educagri.fr>
Message-ID: <82c245aa0608070945r2ef89cc0nf587cea1b42ea58f@mail.gmail.com>

I wonder if this is the 500MB limit on the free SDK coming into play?
It would explain why smaller files work.

http://www.remotesensing.org/gdal/frmt_ecw.html

-Lennox

On 8/7/06, Lionel Bargeot <l.bargeot@educagri.fr> wrote:
> Hi all,
>
> I use a WMS server with FWTools-1.0.5 binary distribution on Linux.
>
> I can serve ECW files (with mapserv as WMS) larger than 50 Mo when the
> source is tiled geotif images.
> When datasource is tiled ecw files, I have the following error message
> when generated images are (about) larger than 4000x4000 pixels :
>
> msDrawMap(): Image handling error. Failed to draw layer named MYLAYERNAME .
> NCScbmReadViewLineBIL failed.: Unable to access file. GDALRasterIO()
> failed: drawGDAL()
>
> For smaller images, no problem
>
> Any idea ?
> Do you think the problem will be solved if I compile my own gdal library ?
>
> Thanks
>
> Lionel
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From C.Strobl at dlr.de  Tue Aug  8 04:51:44 2006
From: C.Strobl at dlr.de (C.Strobl@dlr.de)
Date: Wed Nov 21 11:50:18 2007
Subject: AW: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?
In-Reply-To: <974E950B-D8DF-4732-B930-3112089B6271@sauder.ubc.ca>
Message-ID: <9773EFADA4FF6C43A49824D50B1539A7016281C4@exbe04.intra.dlr.de>

 
hello holger,
i thinks its a windows matter, for windows you have to use double
quotes. here are a few examples i have noted for myself
 
#OGR and vpf (datapath: D:/user/Data/NGA/v0eur/vmaplv0/eurnasia,
"gltp:/vrf/" has to be added)
ogrinfo -ro gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
#important:: double quotes "" at "watrcrsl@hydro(*)_line"
ogrinfo -so -al gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
"watrcrsl@hydro(*)_line"
ogr2ogr watrcrsl.shp gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
"watrcrsl@hydro(*)_line"
 
greetings from munich
christian

________________________________

Von: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] Im Auftrag von Putler, Dan
Gesendet: Montag, 7. August 2006 17:07
An: wilken@ohb-system.de
Cc: gdal-dev@lists.maptools.org
Betreff: Re: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?



Hi Holger, 

The following link could be of use to you. It describes how to load  
VMAP0 layers into PostGIS, but an intermediate step in the process is  
to convert the layers into shapefiles using ogr2ogr. A Windows batch  
script is provided as an attachment that does the VMAP0 to shapefile  
transformation. 

The link is: 

http://docs.codehaus.org/display/GEOSDOC/Loading+VMAP0+data 

Dan 

On 4-Aug-06, at 1:10 AM, Holger Wilken wrote: 

> Hi, 
> 
> my problem: 
> I want to convert VMAP layer to shapefiles under Windows, 
> but neither the conversion nor layer info with ogrinfo works. 
> 
> What I have tried so far: 
> 
> I use FWtools 1.0.5 under Windows 2k (CommandLine) 
> My VMAP layers are located at D:\data\vmap0\v0eur\vmaplv0\eurnasia, 
> (downloaded directly from geoengine.nima.mil), 
> ogrinfo.exe and ogr2ogr.exe are in C:\Programme\FWtools\bin 
> 
> I start ogrinfo from C:\Programme\FWtools\bin, for example: 
> ogrinfo.exe -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 
> 'oceansea@bnd(*)_area' 
> which returns only 
> INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia' 
>       using driver `OGDI' successful. 
> but no further information is displayed. Syntax seems to be correct  
> though. 
> 
> next try - start with debug info: 
> ogrinfo.exe --debug on -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/ 
> eurnasia 
> 'oceansea@bnd(*)_area' 
> gets me a little more output: 
> KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 
> OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37018) 
> succeeded 
> as OGDI. 
> INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia' 
>       using driver `OGDI' successful. 
> OGR: GetLayerCount() = 59 
> 
> Shouldn't there be more info? 
> I don't know where the 00D37018 at the end of the gltp path comes  
> from, it's 
> not in the vmap directory structure. 
> 
> The ogr2ogr call to create a Shapefile out of the VMAP Layer: 
> ogr2ogr.exe oceansea.shp gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/ 
> eurnasia 
> 'oceansea@bnd(*)_area' 
> does not give any errors/warnings, but no output shapefile either. 
> 
> I have Administrator rights, so the directory (C:\Programme\FWtools 
> \bin) is 
> not read-only. 
> 
> Here as well, add the debug option: 
> ogr2ogr.exe --debug on oceansea.shp 
> gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 'oceansea@bnd(*)_area' 
> gives me: 
> KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 
> OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37028) 
> succeeded 
> as OGDI. 
> More output, but still no Shapefile. 
> 
> According to the OGR 1.1.6 change list, the OGDI driver should work  
> properly 
> with drive letters under windows. All other samples I have found  
> were using 
> unix style paths. 
> 
> Do other people have the same problem? 
> Please give me a hint what I am missing or if it's a bug. 
> 
> thanks in advance 
> 
> Holger 
> 
> 
> _______________________________________________ 
> Gdal-dev mailing list 
> Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060808/cffc2ec7/attachment.html
From wilken at ohb-system.de  Tue Aug  8 05:23:24 2006
From: wilken at ohb-system.de (Holger Wilken)
Date: Wed Nov 21 11:50:18 2007
Subject: AW: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?
In-Reply-To: <9773EFADA4FF6C43A49824D50B1539A7016281C4@exbe04.intra.dlr.de>
Message-ID: <FDEOJHHKMJJBMPHGGGCLIEMKCBAA.wilken@ohb-system.de>

Re: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?hi dan, hi
christian,

thanks for your help, both tips (script/batchfiles and double quotes) were
very useful for me.

holger
  -----Ursprungliche Nachricht-----
  Von: C.Strobl@dlr.de [mailto:C.Strobl@dlr.de]
  Gesendet: Dienstag, 8. August 2006 10:52
  An: wilken@ohb-system.de
  Cc: gdal-dev@lists.maptools.org
  Betreff: AW: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?



  hello holger,
  i thinks its a windows matter, for windows you have to use double quotes.
here are a few examples i have noted for myself

  #OGR and vpf (datapath: D:/user/Data/NGA/v0eur/vmaplv0/eurnasia,
"gltp:/vrf/" has to be added)
  ogrinfo -ro gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
  #important:: double quotes "" at "watrcrsl@hydro(*)_line"
  ogrinfo -so -al gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
"watrcrsl@hydro(*)_line"
  ogr2ogr watrcrsl.shp gltp:/vrf/D:/user/Data/NGA/v0eur/vmaplv0/eurnasia
"watrcrsl@hydro(*)_line"

  greetings from munich
  christian


----------------------------------------------------------------------------
--
  Von: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] Im Auftrag von Putler, Dan
  Gesendet: Montag, 7. August 2006 17:07
  An: wilken@ohb-system.de
  Cc: gdal-dev@lists.maptools.org
  Betreff: Re: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?


  Hi Holger,

  The following link could be of use to you. It describes how to load
  VMAP0 layers into PostGIS, but an intermediate step in the process is
  to convert the layers into shapefiles using ogr2ogr. A Windows batch
  script is provided as an attachment that does the VMAP0 to shapefile
  transformation.

  The link is:

  http://docs.codehaus.org/display/GEOSDOC/Loading+VMAP0+data

  Dan

  On 4-Aug-06, at 1:10 AM, Holger Wilken wrote:

  > Hi,
  >
  > my problem:
  > I want to convert VMAP layer to shapefiles under Windows,
  > but neither the conversion nor layer info with ogrinfo works.
  >
  > What I have tried so far:
  >
  > I use FWtools 1.0.5 under Windows 2k (CommandLine)
  > My VMAP layers are located at D:\data\vmap0\v0eur\vmaplv0\eurnasia,
  > (downloaded directly from geoengine.nima.mil),
  > ogrinfo.exe and ogr2ogr.exe are in C:\Programme\FWtools\bin
  >
  > I start ogrinfo from C:\Programme\FWtools\bin, for example:
  > ogrinfo.exe -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
  > 'oceansea@bnd(*)_area'
  > which returns only
  > INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
  >       using driver `OGDI' successful.
  > but no further information is displayed. Syntax seems to be correct
  > though.
  >
  > next try - start with debug info:
  > ogrinfo.exe --debug on -ro gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/
  > eurnasia
  > 'oceansea@bnd(*)_area'
  > gets me a little more output:
  > KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
  > OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37018)
  > succeeded
  > as OGDI.
  > INFO: Open of `gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia'
  >       using driver `OGDI' successful.
  > OGR: GetLayerCount() = 59
  >
  > Shouldn't there be more info?
  > I don't know where the 00D37018 at the end of the gltp path comes
  > from, it's
  > not in the vmap directory structure.
  >
  > The ogr2ogr call to create a Shapefile out of the VMAP Layer:
  > ogr2ogr.exe oceansea.shp gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/
  > eurnasia
  > 'oceansea@bnd(*)_area'
  > does not give any errors/warnings, but no output shapefile either.
  >
  > I have Administrator rights, so the directory (C:\Programme\FWtools
  > \bin) is
  > not read-only.
  >
  > Here as well, add the debug option:
  > ogr2ogr.exe --debug on oceansea.shp
  > gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia 'oceansea@bnd(*)_area'
  > gives me:
  > KML: Attempt to open: gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia
  > OGR: OGROpen(gltp:/vrf/d:/data/vmap0/v0eur/vmaplv0/eurnasia/00D37028)
  > succeeded
  > as OGDI.
  > More output, but still no Shapefile.
  >
  > According to the OGR 1.1.6 change list, the OGDI driver should work
  > properly
  > with drive letters under windows. All other samples I have found
  > were using
  > unix style paths.
  >
  > Do other people have the same problem?
  > Please give me a hint what I am missing or if it's a bug.
  >
  > thanks in advance
  >
  > Holger
  >
  >
  > _______________________________________________
  > Gdal-dev mailing list
  > Gdal-dev@lists.maptools.org
  > http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060808/44a54544/attachment.html
From adoyle at eogeo.org  Tue Aug  8 08:39:13 2006
From: adoyle at eogeo.org (Allan Doyle)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] gdal - open fails on zero length files
Message-ID: <5E791556-8448-4AE3-BAD5-03A39D7C31B0@eogeo.org>

I'm writing a crawler to examine all the files in a given tree. To do  
that I'm using the python bindings for gdal/ogr.

When I call gdal.Open() on a zero length file, I get the dreaded

   posixio.c:396: failed assertion `extent != 0'

message. Poking around, I found this message in the archives about it:

http://lists.maptools.org/pipermail/gdal-dev/2006-May/008731.html

So I don't know if the two are related but I've solved my problem by  
checking for zero length files before calling gdal.Open().

I'm using KyngChaos Gislibs 3.0 on Mac OS X 10.4.7 PPC

	Allan

-- 
Allan Doyle
+1.781.433.2695
adoyle@eogeo.org




From wilken at ohb-system.de  Tue Aug  8 10:16:14 2006
From: wilken at ohb-system.de (Holger Wilken)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] ogr2ogr: seamless vmap without tile boundaries?
In-Reply-To: <FDEOJHHKMJJBMPHGGGCLIEMKCBAA.wilken@ohb-system.de>
Message-ID: <FDEOJHHKMJJBMPHGGGCLOEMLCBAA.wilken@ohb-system.de>

Re: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?my experiments with
the VMAP data (convert to Shapefiles, merge them into one, and import into
ArcSDE/Oracle Spatial) lead me to another question, but I am not sure, if
ogr2ogr is the right tool:

The VMAP data is divided into tiles, which are converted as well. So
polygons and lines crossing a tile border are separated. I want to correct
the data and combine divided geometries with the same attributes into a
single new one, in order to get a seamless map without tile boundaries. Does
anyone know how to do it with either open source tools or Oracle functions?

thanks in advance

Holger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060808/2f505524/attachment.html
From list67 at netscape.net  Tue Aug  8 10:38:07 2006
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] missing gcp projection
Message-ID: <651620FF.566303B4.00066B75@netscape.net>

Hi.

A program that I wrote includes the following lines in order to copy GCPs and the GCP projection from one dataset (BSB) to another (GTiff):

int nGCPs = GDALGetGCPCount(srcImage);
GDAL_GCP* pasGCPs = GDALDuplicateGCPs(nGCPs, GDALGetGCPs(srcImage));
GDALSetGCPs(dstImage, nGCPs, pasGCPs, GDALGetGCPProjection(srcImage));

After the program comletes, running gdal_info seems to indicate that the .tif file does not have the GCP projection that the BSB file has.  The .tif file has the GCPs, but not the GCP projection.

The missing GCP projeciton seems to prevent gdalwarp from being able to reproject the .tif file.

It seems that a gdal_translate (which might call CreateCopy) seems to include the GCP projection, but I think that for this program, calling CreateCopy would not work for other reasons.

Do you know what can be done such that the GCP projection is included in the .tif file?

Thank you for your time.

    Mike

__________________________________________________________________
Switch to Netscape Internet Service.
As low as $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need.

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From dylan.beaudette at gmail.com  Tue Aug  8 12:46:14 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] ogr2ogr: seamless vmap without tile boundaries?
In-Reply-To: <FDEOJHHKMJJBMPHGGGCLOEMLCBAA.wilken@ohb-system.de>
References: <FDEOJHHKMJJBMPHGGGCLOEMLCBAA.wilken@ohb-system.de>
Message-ID: <200608080946.14651.dylan.beaudette@gmail.com>

On Tuesday 08 August 2006 07:16, Holger Wilken wrote:
> Re: [Gdal-dev] ogrinfo / ogr2ogr and vmap under windows?my experiments with
> the VMAP data (convert to Shapefiles, merge them into one, and import into
> ArcSDE/Oracle Spatial) lead me to another question, but I am not sure, if
> ogr2ogr is the right tool:
>
> The VMAP data is divided into tiles, which are converted as well. So
> polygons and lines crossing a tile border are separated. I want to correct
> the data and combine divided geometries with the same attributes into a
> single new one, in order to get a seamless map without tile boundaries.
> Does anyone know how to do it with either open source tools or Oracle
> functions?
>
> thanks in advance
>
> Holger

See GRASS or PostGIS and the 'dissolve' concept.

Cheers,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From trale at centrum.cz  Thu Aug 10 04:18:53 2006
From: trale at centrum.cz (trale@centrum.cz)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] SDTS not recognized
Message-ID: <200608101018.17231@centrum.cz>

Hello list,
I am having troubles with reading SDTS vector files. Here is what ogrinfo says (from FWTools):
?C:\Downloads\MoreSTDS>ogrinfo MATRLE01.DDF
FAILURE:
Unable to open datasource `MATRLE01.DDF' with the following drivers.
? -> ESRI Shapefile
? -> MapInfo File
? -> UK .NTF
? -> SDTS
? -> TIGER
? -> S57
.......
Any help is highly welcome !
Thanks
Nick


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060810/c3e1ce63/attachment.html
From bryan at geomega.com  Thu Aug 10 09:54:34 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] SDTS not recognized
In-Reply-To: <200608101018.17231@centrum.cz>
References: <200608101018.17231@centrum.cz>
Message-ID: <44DB3A9A.7040000@geomega.com>

Nick,

I don't know if the name makes a difference, but all the SDTS archives 
I've seen are named in the format nnnnxxxx.ddf when n is a number is x 
is a character.

Testing ogrinfo on an archive I have handy gives these results:

ogrinfo 1109CATD.DDF -al -so
ERROR 4: SDTS Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `1109CATD.DDF'
       using driver `SDTS' successful.

If I try a file that's not the CATD file, then I get this error:

ogrinfo 1109CATS.DDF
FAILURE:
Unable to open datasource `1109CATS.DDF' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
...

Note that the archive I just tested is actually a raster dataset not a 
vector dataset, but I'd try ogrinfo with the CATD file if you have it. 
Hope that helps.

Bryan

trale@centrum.cz wrote:
> Hello list,
> I am having troubles with reading SDTS vector files. Here is what ogrinfo says (from FWTools):
>  C:\Downloads\MoreSTDS>ogrinfo MATRLE01.DDF
> FAILURE:
> Unable to open datasource `MATRLE01.DDF' with the following drivers.
>   -> ESRI Shapefile
>   -> MapInfo File
>   -> UK .NTF
>   -> SDTS
>   -> TIGER
>   -> S57
> .......
> Any help is highly welcome !
> Thanks
> Nick
> 
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Aug 10 15:57:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] SDTS not recognized
In-Reply-To: <200608101018.17231@centrum.cz>
References: <200608101018.17231@centrum.cz>
Message-ID: <931f8ea90608101257k6803c4adr2ed4f94914095e4b@mail.gmail.com>

On 8/10/06, trale@centrum.cz <trale@centrum.cz> wrote:
> I am having troubles with reading SDTS vector files. Here is what ogrinfo
> says (from FWTools):
>
>  C:\Downloads\MoreSTDS>ogrinfo MATRLE01.DDF

Nick,

I think you need to do "ogrinfo MATRCATD.DDF" as per the format
support docs at:

  http://www.gdal.org/ogr/drv_sdts.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From majianglin2003 at gmail.com  Sat Aug 12 11:29:23 2006
From: majianglin2003 at gmail.com (ma jianglin)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] AutoLoadDrivers question
Message-ID: <548849fc0608120829r76446e53tb1b46f85a45233c2@mail.gmail.com>

Hi everyone,

     Would anyone be kind enough to tell me how to use the function
GDALDriverManage::AutoLoadDrivers<http://www.gdal.org/classGDALDriverManager.html#1e10f0276813a9996f7f7c57486e787b>?
I am a little puzzed at its usage.  I don't know why we need this function.

    Best regards!

    Jianglin Ma
   2006.8.12
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060812/722ddd22/attachment.html
From muratasenel at gmail.com  Mon Aug 14 07:40:52 2006
From: muratasenel at gmail.com (=?UTF-8?Q?Murat_=C5=9Eenel?=)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] gdal-1.3.2 build problem
In-Reply-To: <200608132254.46005.muratasenel@gmail.com>
References: <200608132254.46005.muratasenel@gmail.com>
Message-ID: <d9a1c9300608140440s37deb7c8xc1dcf3b8e4303734@mail.gmail.com>

Hello to everybody

I am trying to package gdal for newly released linux distro PARDUS.
Its package-manager is different from others. We don't use deb or rpm etc.
Pardus's package-manager is called PiSi (you can find detailed info on
http://www.pardus.org.tr/eng/index.html)

Anyway, my problem occurs when I try to package gdal for Pardus and as far
as
I understand, the problem is based on gdal source codes.
You can find error message below (just some part of it). If you can help me
with this, I would be glad.
Thanks in advance

Murat \
from Turkey

>> gdal-config

echo 'CONFIG_PREFIX="/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2"' >>
gdal-config
echo 'CONFIG_CFLAGS="-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/port
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/gcore
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/alg
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr/ogrsf_frmts"'

>> gdal-config

echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config
echo 'CONFIG_OGR_ENABLED=no' >> gdal-config
echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm
sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk
airsar rs2 ilwis rmf rik leveller sgi idrisi bsb jpeg2000 hdf5 gif jpeg png
netcdf pcraster "' >> gdal-config
cat gdal-config.in >> gdal-config
chmod a+x gdal-config
/bin/sh /var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/libtool --mode=compile
i686-pc-linux-gnu-gcc -Wall  -mtune=i686 -O2 -pipe -fomit-frame-pointer
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/port
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/gcore
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/alg
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr/ogrsf_frmts
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/frmts
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/port  -c -o gdalinfo.o
gdalinfo.c
mkdir .libs

i686-pc-linux-gnu-gcc -Wall -mtune=i686 -O2 -pipe -fomit-frame-pointer
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/port
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/gcore
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/alg
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/ogr/ogrsf_frmts
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/frmts
-I/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/port -c gdalinfo.c  -fPIC -DPIC
-o .libs/gdalinfo.o
/bin/sh /var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/libtool --mode=link
i686-pc-linux-gnu-g++  gdalinfo.o  \
        /var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/libgdal.la -o gdalinfo
i686-pc-linux-gnu-g++
gdalinfo.o -o .libs/gdalinfo
/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/.libs/libgdal.so -L/usr/lib
-L/usr/i686-pc-linux-gnu/lib -lxerces-c -lssl -lcrypto -lSM -lICE -lX11
-lnetcdf -lpq -lz -lrt -ldl -lpthread i686-pc-linux-gnu-g++: gdalinfo.o: No
such file or directory
make[1]: *** [gdalinfo] Hata 1
make[1]: Leaving directory `/var/tmp/pisi/gdal-1.3.2-1/work/gdal-1.3.2/apps'
make: *** [apps-target] Hata 2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060814/de627fc7/attachment.html
From frankie at debian.org  Tue Aug  8 10:06:38 2006
From: frankie at debian.org (Francesco Paolo Lovergine)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Licensing issue with geodata embedded in gdal.
Message-ID: <20060808140637.GE6046@ba.issia.cnr.it>

http://lists.alioth.debian.org/pipermail/pkg-grass-devel/2006-August/001179.html

It's questionable if this issue is a non-issue for Debian. We distribute
gdal in main and this is indeed a use limitation for our users.
Moving only data in non-free could be an option (I don't know how much
complicated). But solving the question at upstream level would be more nice.

-- 
Francesco P. Lovergine

From lionel at educagri.fr  Mon Aug  7 14:01:54 2006
From: lionel at educagri.fr (lionel bargeot)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] problem writing ecw (gdal in FWTools-1.0.5)
In-Reply-To: <fc.000f5d9706d1b06b3b9aca009850e8ff.6d1b06d@educagri.fr>
References: <44D76803.9090909@educagri.fr>
	<fc.000f5d9706d1b06b3b9aca009850e8ff.6d1b06d@educagri.fr>
Message-ID: <44D78012.7060705@educagri.fr>

Hi Antoine,

I think it's not my problem.
The first reason is I've tried with the format option LARGE_OK=yes (I 
have a license) and it doesn't work much better.
A second reason is I can produce ecw output when source is tiled geotiff 
images.

I've tried to define more precisely the limit of the output image my WMS 
is able to produce (with tiled ecw images as datasource). This limit is 
2500 x 2500 pixels. With tiled geotiff images as datasource, this limit 
is higher (2GB image output limitation due to my linux kernel option, I 
think)
I've tried 1000x3000 images and it doesn't work neither. So I think that 
if width or height is greater than 2500 pixels, the error message is 
produced.

Thanks for your suggestion

Lionel


Lennox Antoine wrote:
> I wonder if this is the 500MB limit on the free SDK coming into play?
> It would explain why smaller files work.
>
> http://www.remotesensing.org/gdal/frmt_ecw.html
>
> -Lennox
>
> On 8/7/06, Lionel Bargeot <l.bargeot@educagri.fr> wrote:
>   
>>> Hi all,
>>>
>>> I use a WMS server with FWTools-1.0.5 binary distribution on Linux.
>>>
>>> I can serve ECW files (with mapserv as WMS) larger than 50 Mo when the
>>> source is tiled geotif images.
>>> When datasource is tiled ecw files, I have the following error message
>>> when generated images are (about) larger than 4000x4000 pixels :
>>>
>>> msDrawMap(): Image handling error. Failed to draw layer named
>>>       
>> MYLAYERNAME .
>>     
>>> NCScbmReadViewLineBIL failed.: Unable to access file. GDALRasterIO()
>>> failed: drawGDAL()
>>>
>>> For smaller images, no problem
>>>
>>> Any idea ?
>>> Do you think the problem will be solved if I compile my own gdal
>>>       
>> library ?
>>     
>>> Thanks
>>>
>>> Lionel
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>>       
>
>   


From hannes.reuter at jrc.it  Mon Aug 14 05:19:41 2006
From: hannes.reuter at jrc.it (Hannes Isaak Reuter)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] transform on a shapefile using OGR - image 2 projected
 coordinates
Message-ID: <6.2.1.2.0.20060814110316.02cb1538@mail.jrc.cec.eu.int>

Hallo everybody,

in the documentation of ogr2ogr i found the switch -transform...
What functionality does that imply , and how to apply that switch.

problem:
shapefile with coordianates in image e.g. LLC is 0,0 and URC is 9800,8600
but need to "transform" (soory old arcinfo command ) that to
projection extent e.g. 450000, 560000

solution:
can do that with arcinfo workstation by converting shape to cover and 
applying transform command.. ( even in batch), but want to stay in shp file.

any clue if ogr2ogr supports that ?
I tried several ways/switches but are somehow lost..

Hannes


From hobu at iastate.edu  Mon Aug 14 22:32:02 2006
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:18 2007
Subject: [Gdal-dev] Licensing issue with geodata embedded in gdal.
In-Reply-To: <20060808140637.GE6046@ba.issia.cnr.it>
References: <20060808140637.GE6046@ba.issia.cnr.it>
Message-ID: <p06230905c106e1c235f7@[192.168.11.4]>

Fracesco,

Frank could clarify further, but here's some discussion about the 
EPSG data distributed with GDAL. 
<https://incubator.osgeo.org/servlets/ReadMsg?list=incubator&msgNo=372>

Howard

At 4:06 PM +0200 8/8/06, Francesco Paolo Lovergine wrote:
>http://lists.alioth.debian.org/pipermail/pkg-grass-devel/2006-August/001179.html
>
>It's questionable if this issue is a non-issue for Debian. We distribute
>gdal in main and this is indeed a use limitation for our users.
>Moving only data in non-free could be an option (I don't know how much
>complicated). But solving the question at upstream level would be more nice.
>
>--
>Francesco P. Lovergine
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Aug 15 09:45:04 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] AutoLoadDrivers question
In-Reply-To: <548849fc0608120829r76446e53tb1b46f85a45233c2@mail.gmail.com>
References: <548849fc0608120829r76446e53tb1b46f85a45233c2@mail.gmail.com>
Message-ID: <44E1CFE0.6030606@pobox.com>

ma jianglin wrote:
> Hi everyone,
>     
>      Would anyone be kind enough to tell me how to use the function 
> GDALDriverManage::AutoLoadDrivers 
> <http://www.gdal.org/classGDALDriverManager.html#1e10f0276813a9996f7f7c57486e787b>? 
> I am a little puzzed at its usage.  I don't know why we need this function.

Jianglin Ma,

This method loads drivers stored in external DLLs rather than "built into"
the main GDAL DLL.  It is automatically invoked by GDALAllRegister(), so you
don't normally need to call AutoLoadDrivers() yourself.

Are you asking what these external plugin drivers are useful for?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Tue Aug 15 10:42:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] AutoLoadDrivers question
In-Reply-To: <548849fc0608150703w474b7cf8n82449e0ef373cd74@mail.gmail.com>
References: <548849fc0608120829r76446e53tb1b46f85a45233c2@mail.gmail.com>	
	<44E1CFE0.6030606@pobox.com>
	<548849fc0608150703w474b7cf8n82449e0ef373cd74@mail.gmail.com>
Message-ID: <44E1DD5E.50004@pobox.com>

ma jianglin wrote:
> 
> Hi Frank,
>  
>      Thank you for your reply! Yes, I want to know what these external 
> plugin drivers are useful for.
>      In function GDALAllRegister(), gdal tries to rember every image 
> format dirver. Why we need GDALDriverManage::AutoLoadDrivers() first?

Jianglin Ma,

External plugin drivers are used for three primary reasons:

  o Folks with their own proprietary drivers they don't want introduced
    directly into GDAL.

  o Folks who want to add optional drivers to existing GDAL builds without
    having to rebuild everything.

  o Folks with packaging systems where they want to distribute binaries
    with some optional drivers (such as MrSID, Oracle) that depend on
    external libraries that are either big, or may/maynot be found on the
    target system.

If you are building everything from source for use on your own system there
is no strong need to use plugins.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dany.geotools at gmail.com  Tue Aug 15 11:38:29 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Where to find ECW's Specification documentation
Message-ID: <7221db410608150838s4b0c145w36204cc147daee5a@mail.gmail.com>

Hi lists,

I'm looking for further information about the ECW format.
I have found documentation related to the SDK user guide, as well as a kind
of "brochure" which introduces ECW capabilities, ....

Where can I find more detailed documentation about ECW Specifications (or
something similar) or ECW features?

Could someone provide some links to me?

Thank you very much.

-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060815/eaf59819/attachment.html
From mhanson at photon.com  Wed Aug 16 14:33:29 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Call to GetDriver() after GetRasterBands() fails
Message-ID: <0719BE42F22E0A46857DF72644EC5D7027854F@pj-exchange.photon.com>

I have a peculiar problem.  (C++, gdal 1.3.2, ENVI format file, Visual Studio 2005)
 
If I call GetRasterBand() and then call GetDriver() I get an access violation.   As soon as I remove my GetRasterBand() call it works fine.
 
I can try and reproduce with simple program but thought I'd check first, maybe this is a known issue?
 
 
matt


From chalmet at telusplanet.net  Wed Aug 16 17:39:07 2006
From: chalmet at telusplanet.net (chalmet@telusplanet.net)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdalwarp reprojection shift
Message-ID: <1155764347.44e3907b60ade@webmail.telus.net>

Hi,

I am at a loss. Not being the most experienced user, I was hoping if somebody 
could shed some light at the following issue.

I have some data in tiff format. The data is located in Alberta, Canada. It is 
projected in "provincial 10tm" which is a Transverse Mercator projection based 
on NAD83 with the following parameters:
- central meridian: 115W
- false easting: 500000
- false northing: 0
- scale factor: 0.9992

I am trying to reproject this data to latlong, using a different datum: NAD27. 
I have done this in PCI and in ERmapper, and the resulting tiffs line up 
perfectly.

If I do this using gdalwarp, I have a shift of about 70 meters compared to my 
reprojected tiles in PCI and ERmapper. I use the following command for gdalwarp:

*******************
gdalwarp -s_srs "+proj=tmerc +datum=NAD83 +x_0=500000 +lon_0=-115 +lat_0=0 
+k=0.9992" -t_srs "+proj=latlong +datum=NAD27" -rc -tr 0.000035 0.000035 
400113.tif 400113_latlong.tif
*******************

Does anybody know why this is happening. And more importantly, how could I make 
the gdalwarp tiff line up with my other tiffs, meaning avoid the 70m shift?

Thanks for any input.
Wim.




From perrygeo at gmail.com  Wed Aug 16 18:05:55 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdalwarp reprojection shift
In-Reply-To: <1155764347.44e3907b60ade@webmail.telus.net>
References: <1155764347.44e3907b60ade@webmail.telus.net>
Message-ID: <5383fa5e0608161505m27a0e81dx4b7ff752320925@mail.gmail.com>

Wim,

On 8/16/06, chalmet@telusplanet.net <chalmet@telusplanet.net> wrote:
> If I do this using gdalwarp, I have a shift of about 70 meters compared to my
> reprojected tiles in PCI and ERmapper. I use the following command for gdalwarp:
>
> *******************
> gdalwarp -s_srs "+proj=tmerc +datum=NAD83 +x_0=500000 +lon_0=-115 +lat_0=0
> +k=0.9992" -t_srs "+proj=latlong +datum=NAD27" -rc -tr 0.000035 0.000035
> 400113.tif 400113_latlong.tif
> *******************
>
> Does anybody know why this is happening. And more importantly, how could I make
> the gdalwarp tiff line up with my other tiffs, meaning avoid the 70m shift?


Most likely your version of proj4 (which gdal uses for reprojecting
coordinates) is not built with support for datum shifts. The proj4 faq
is pretty helpful for this issue...
http://proj.maptools.org/faq.html.

You might have to rebuild proj4 with the datum support files or you
can download FWTools (for win and linux) that has proj4 precompiled
with the datum shift files.
-- 
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net

From dany.geotools at gmail.com  Thu Aug 17 03:25:35 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<44D4D8DA.5000106@savagexi.com>
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
	<44D51B87.8010803@savagexi.com>
	<7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>
Message-ID: <7221db410608170025pab951b4j377fad1277127e66@mail.gmail.com>

Dear Mr Warmerdam,
Could you please update the Band.i interface resulting from our discussions
(between me, you and Mr. Charlie Savage)?

The section which needs to be updated is:
-----------------------------------------------------------------------------------------
%apply (int *OUTPUT){int *blockXSize, int *blockYSize}
   void GetBlockSize(int *blockXSize, int *blockYSize){
               GDALGetBlockSize(self, blockXSize, blockYSize);
   }
%clear (int *blockXSize, int *blockYSize);
-----------------------------------------------------------------------------------------

instead of the actual version:
----------------------------------------------------------------------------------------
void GetBlockSize(int *OUTPUT, int *OUTPUT){
              GDALGetBlockSize(self, blockXSize, blockYSize);
  }
-----------------------------------------------------------------------------------------


On 8/6/06, Daniele Romagnoli <dany.geotools@gmail.com> wrote:
>
>
>
> On 8/6/06, Charlie Savage <cfis@savagexi.com> wrote:
> >
> > Hmm, in theory %apply and OUT do the same thing.  Once again, see:
> >
> > http://www.swig.org/Doc1.3/Arguments.html#Arguments_nn5
>
>
> You are right...
>
> Anyway, I would take the simple approach, which is add this line:
> >
> > %include "typemaps.i"
> >
> > To gdal.i before line 441 which is:
> >
> > %include "Band.i"
> >
> > And in fact, I'd probably put it on line 192 (before the #if
> > defined(SWIGPYTHON).
> >
> > Doing that simplifies the problem.  If it doesn't work, then yes, it
> > appears the OUTPUT * parameter is not working for Java in which case go
> > back to using apply (and maybe submit a bug to SWIG).
>
>
> Unfortunately, it doesn't work :(
> I'll back to using apply...
>
> However, if you use %apply then you should also clear it after the
> > method is defined.
> >
> > %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
> >    void GetBlockSize(int *blockXSize, int *blockYSize){
> >                GDALGetBlockSize(self, blockXSize, blockYSize);
> >    }
> > %clear (int *blockXSize, int *blockYSize)
>
>
>
> Ok, Thank you. I will add the final %clear directive.
>
> Its probably not that important in this case, but if there happened to
> > be another method with the same 2 output parameters then this typemap
> > would be applied again (sometimes you want that, sometimes you don't).
> >
> > Charlie
> >
> >
> >
> > Thank you very much!
> --
> Best Regards,
> Daniele
>



-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060817/0686cc08/attachment.html
From crane_ba at yahoo.com  Thu Aug 17 06:33:10 2006
From: crane_ba at yahoo.com (Ben Crane)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
Message-ID: <20060817103310.54971.qmail@web52801.mail.yahoo.com>

Hi all,

I'm having a great time with the PHP OGR library but
have 2 questions:

1. I have used the SetField command and updated
browser view, but how do I actually save this
information into the core SHP files? I have tried
CommitTransaction but seems to have no joy? I need to
be able to update the core SHP file since it will be
opened and used by others after the update.

2. I have managed to get GetExtents to work, but how
do I actually seperate the 4 coordinate pairs in the
GetExtents object into 4 variables that I can use with
the SVG ViewBox command...I've tried treating it as an
array but had no joy.

Regards
Ben Crane

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From bryan at geomega.com  Thu Aug 17 09:59:38 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
References: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
Message-ID: <44E4764A.1000808@geomega.com>

Ben Crane wrote:
> Hi all,
> 
> I'm having a great time with the PHP OGR library but
> have 2 questions:
> 
> 1. I have used the SetField command and updated
> browser view, but how do I actually save this
> information into the core SHP files? I have tried
> CommitTransaction but seems to have no joy? I need to
> be able to update the core SHP file since it will be
> opened and used by others after the update.

Ben,

I don't use PHP, but in Python it's necessary to call Layer.Destroy() to 
get the changes you made to be saved to the shapefile.

> 
> 2. I have managed to get GetExtents to work, but how
> do I actually seperate the 4 coordinate pairs in the
> GetExtents object into 4 variables that I can use with
> the SVG ViewBox command...I've tried treating it as an
> array but had no joy.

For this I have no idea since it's really a PHP question.

Bryan

> 
> Regards
> Ben Crane
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From chalmet at telusplanet.net  Thu Aug 17 13:07:28 2006
From: chalmet at telusplanet.net (chalmet@telusplanet.net)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdalwarp reprojection shift
In-Reply-To: <5383fa5e0608161505m27a0e81dx4b7ff752320925@mail.gmail.com>
References: <1155764347.44e3907b60ade@webmail.telus.net>
	<5383fa5e0608161505m27a0e81dx4b7ff752320925@mail.gmail.com>
Message-ID: <1155834448.44e4a250e7a3a@webmail.telus.net>

Hi Matthew, I replied yesterday, but apparently only sent it to you, so here is 
a resent of my problem.

I actually am using FWtools (windows version)- gdalwarp is part of that. So, 
according to what you wrote, this version should handle the datum shift 
correctly.

Is there anybody who could help me (step by step instructions would be 
extremely appreciated, as I am rather new to gdalwarp and proj4 and such) 
handle this datum shift correctly.

Thanks!
Wim.

Quoting Matthew Perry <perrygeo@gmail.com>:

> Wim,
> 
> On 8/16/06, chalmet@telusplanet.net <chalmet@telusplanet.net> wrote:
> > If I do this using gdalwarp, I have a shift of about 70 meters compared to
> my
> > reprojected tiles in PCI and ERmapper. I use the following command for
> gdalwarp:
> >
> > *******************
> > gdalwarp -s_srs "+proj=tmerc +datum=NAD83 +x_0=500000 +lon_0=-115 +lat_0=0
> > +k=0.9992" -t_srs "+proj=latlong +datum=NAD27" -rc -tr 0.000035 0.000035
> > 400113.tif 400113_latlong.tif
> > *******************
> >
> > Does anybody know why this is happening. And more importantly, how could I
> make
> > the gdalwarp tiff line up with my other tiffs, meaning avoid the 70m
> shift?
> 
> 
> Most likely your version of proj4 (which gdal uses for reprojecting
> coordinates) is not built with support for datum shifts. The proj4 faq
> is pretty helpful for this issue...
> http://proj.maptools.org/faq.html.
> 
> You might have to rebuild proj4 with the datum support files or you
> can download FWTools (for win and linux) that has proj4 precompiled
> with the datum shift files.
> -- 
> Matt Perry
> perrygeo@gmail.com
> http://www.perrygeo.net
> 





From warmerdam at pobox.com  Thu Aug 17 10:37:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608170025pab951b4j377fad1277127e66@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<44D4D8DA.5000106@savagexi.com>	
	<7221db410608051103uc79596h7ce5d5b63a3cde52@mail.gmail.com>	
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>	
	<44D4E3CE.2050604@savagexi.com>	
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>	
	<44D4F7A6.4000204@savagexi.com>	
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>	
	<44D51B87.8010803@savagexi.com>	
	<7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>
	<7221db410608170025pab951b4j377fad1277127e66@mail.gmail.com>
Message-ID: <44E47F44.1030805@pobox.com>

Daniele Romagnoli wrote:
> Dear Mr Warmerdam,
> Could you please update the Band.i interface resulting from our 
> discussions (between me, you and Mr. Charlie Savage)?
> 
> The section which needs to be updated is:
> ----------------------------------------------------------------------------------------- 
> 
> %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>    void GetBlockSize(int *blockXSize, int *blockYSize){
>                GDALGetBlockSize(self, blockXSize, blockYSize);
>    }
> %clear (int *blockXSize, int *blockYSize);
> -----------------------------------------------------------------------------------------
> 
> instead of the actual version:
> ---------------------------------------------------------------------------------------- 
> 
> void GetBlockSize(int *OUTPUT, int *OUTPUT){
>               GDALGetBlockSize(self, blockXSize, blockYSize);
>   }
> ----------------------------------------------------------------------------------------- 

Daniele,

A night or two ago I noticed things weren't even building with the old
setup (since the name OUTPUT was used twice I suppose), so I changed it to
this:

%apply (int *OUTPUT){int *pnBlockXSize, int *pnBlockYSize}

   void GetBlockSize(int *pnBlockXSize, int *pnBlockYSize) {
       GDALGetBlockSize(self, pnBlockXSize, pnBlockYSize);
   }

Things now at least build, though the test suite does not use this
method.  I'd appreciate your verifying that this is working.

I apologize for not dealing with this sooner.  I kind of got lost in
the exchange between you and Charlie.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dany.geotools at gmail.com  Thu Aug 17 10:47:43 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <44E47F44.1030805@pobox.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>
	<44D4E3CE.2050604@savagexi.com>
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>
	<44D4F7A6.4000204@savagexi.com>
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>
	<44D51B87.8010803@savagexi.com>
	<7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>
	<7221db410608170025pab951b4j377fad1277127e66@mail.gmail.com>
	<44E47F44.1030805@pobox.com>
Message-ID: <7221db410608170747k2b215a72n44f5d403bf8d5a5c@mail.gmail.com>

Dear Mr. Warmerdam,
Thank you for the update.

I quote here an useful comment of Mr. Charlie Savage.

Mr. Charlie Savage wrote:
.....
--------------------------------------------------------------------------------------------------------
However, if you use %apply then you should also clear it after the
method is defined.

%apply (int *OUTPUT){int *blockXSize, int *blockYSize}
  void GetBlockSize(int *blockXSize, int *blockYSize){
              GDALGetBlockSize(self, blockXSize, blockYSize);
  }
%clear (int *blockXSize, int *blockYSize);

Its probably not that important in this case, but if there happened to
be another method with the same 2 output parameters then this typemap
would be applied again (sometimes you want that, sometimes you don't).
--------------------------------------------------------------------------------------------------------



Best regards,
Daniele

On 8/17/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Daniele Romagnoli wrote:
> > Dear Mr Warmerdam,
> > Could you please update the Band.i interface resulting from our
> > discussions (between me, you and Mr. Charlie Savage)?
> >
> > The section which needs to be updated is:
> >
> -----------------------------------------------------------------------------------------
> >
> > %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
> >    void GetBlockSize(int *blockXSize, int *blockYSize){
> >                GDALGetBlockSize(self, blockXSize, blockYSize);
> >    }
> > %clear (int *blockXSize, int *blockYSize);
> >
> -----------------------------------------------------------------------------------------
> >
> > instead of the actual version:
> >
> ----------------------------------------------------------------------------------------
> >
> > void GetBlockSize(int *OUTPUT, int *OUTPUT){
> >               GDALGetBlockSize(self, blockXSize, blockYSize);
> >   }
> >
> -----------------------------------------------------------------------------------------
>
> Daniele,
>
> A night or two ago I noticed things weren't even building with the old
> setup (since the name OUTPUT was used twice I suppose), so I changed it to
> this:
>
> %apply (int *OUTPUT){int *pnBlockXSize, int *pnBlockYSize}
>
>    void GetBlockSize(int *pnBlockXSize, int *pnBlockYSize) {
>        GDALGetBlockSize(self, pnBlockXSize, pnBlockYSize);
>    }
>
> Things now at least build, though the test suite does not use this
> method.  I'd appreciate your verifying that this is working.
>
> I apologize for not dealing with this sooner.  I kind of got lost in
> the exchange between you and Charlie.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060817/7ffdc8be/attachment.html
From warmerdam at pobox.com  Thu Aug 17 11:14:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: Fwd: gdal swig interface Band.i Updated
In-Reply-To: <7221db410608170747k2b215a72n44f5d403bf8d5a5c@mail.gmail.com>
References: <7221db410608040047s5ca7a922hff0cb15d199bc4ff@mail.gmail.com>	
	<7221db410608051107k2c3f2451x62d380a5b88e79fa@mail.gmail.com>	
	<44D4E3CE.2050604@savagexi.com>	
	<7221db410608051231u5a039a4eq7e1ae00fb7747f50@mail.gmail.com>	
	<44D4F7A6.4000204@savagexi.com>	
	<7221db410608051505x71ef5753m8483aa6021ef1977@mail.gmail.com>	
	<44D51B87.8010803@savagexi.com>	
	<7221db410608051545m1b5c16a9v25502dfd9d4ff27e@mail.gmail.com>	
	<7221db410608170025pab951b4j377fad1277127e66@mail.gmail.com>	
	<44E47F44.1030805@pobox.com>
	<7221db410608170747k2b215a72n44f5d403bf8d5a5c@mail.gmail.com>
Message-ID: <44E487DF.1020501@pobox.com>

Daniele Romagnoli wrote:
> Dear Mr. Warmerdam,
> Thank you for the update.
> 
> I quote here an useful comment of Mr. Charlie Savage.
> 
> Mr. Charlie Savage wrote:
> .....
> -------------------------------------------------------------------------------------------------------- 
> 
> However, if you use %apply then you should also clear it after the
> method is defined.
> 
> %apply (int *OUTPUT){int *blockXSize, int *blockYSize}
>   void GetBlockSize(int *blockXSize, int *blockYSize){
>               GDALGetBlockSize(self, blockXSize, blockYSize);
>   }
> %clear (int *blockXSize, int *blockYSize);
> 
> Its probably not that important in this case, but if there happened to
> be another method with the same 2 output parameters then this typemap
> would be applied again (sometimes you want that, sometimes you don't).

Daniel,

That's why I changed the parameter names to pnBlockXSize and pnBlockYSize
since anything using the prefix pn would mean the arguments are pointers to
single integer values and the applied OUTPUT logic would presumably apply.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Aug 17 11:18:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <44E4764A.1000808@geomega.com>
References: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
	<44E4764A.1000808@geomega.com>
Message-ID: <44E488D3.9050502@pobox.com>

Bryan Keith wrote:
> Ben Crane wrote:
>> Hi all,
>>
>> I'm having a great time with the PHP OGR library but
>> have 2 questions:
>>
>> 1. I have used the SetField command and updated
>> browser view, but how do I actually save this
>> information into the core SHP files? I have tried
>> CommitTransaction but seems to have no joy? I need to
>> be able to update the core SHP file since it will be
>> opened and used by others after the update.
> 
> Ben,
> 
> I don't use PHP, but in Python it's necessary to call Layer.Destroy() to 
> get the changes you made to be saved to the shapefile.

Bryan / Ben,

I believe you need to ensure the *datasource* gets closed, which
can be done by invoking it's destroy method in Python.  Please
do *not* destroy layer's as they are owned by the datasource.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dmorissette at mapgears.com  Thu Aug 17 11:23:05 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
References: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
Message-ID: <44E489D9.70302@mapgears.com>

Ben Crane wrote:
> Hi all,
> 
> I'm having a great time with the PHP OGR library but
> have 2 questions:
> 
> 1. I have used the SetField command and updated
> browser view, but how do I actually save this
> information into the core SHP files? I have tried
> CommitTransaction but seems to have no joy? I need to
> be able to update the core SHP file since it will be
> opened and used by others after the update.
> 

Did you call OGR_L_SetFeature() to write the updated feature to the 
shapefile after setting the field values?

http://gdal.maptools.org/ogr/ogr__api_8h.html#a144


> 2. I have managed to get GetExtents to work, but how
> do I actually seperate the 4 coordinate pairs in the
> GetExtents object into 4 variables that I can use with
> the SVG ViewBox command...I've tried treating it as an
> array but had no joy.
> 

I believe it's an associative array with 2 pairs of coordinates (not 4). 
Try print_r($extent_var); to see what it contains exactly.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From bryan at geomega.com  Thu Aug 17 11:31:36 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <44E488D3.9050502@pobox.com>
References: <20060817103310.54971.qmail@web52801.mail.yahoo.com>
	<44E4764A.1000808@geomega.com> <44E488D3.9050502@pobox.com>
Message-ID: <44E48BD8.8000308@geomega.com>



Frank Warmerdam wrote:
> Bryan Keith wrote:
>> Ben Crane wrote:
>>> Hi all,
>>>
>>> I'm having a great time with the PHP OGR library but
>>> have 2 questions:
>>>
>>> 1. I have used the SetField command and updated
>>> browser view, but how do I actually save this
>>> information into the core SHP files? I have tried
>>> CommitTransaction but seems to have no joy? I need to
>>> be able to update the core SHP file since it will be
>>> opened and used by others after the update.
>> Ben,
>>
>> I don't use PHP, but in Python it's necessary to call Layer.Destroy() to 
>> get the changes you made to be saved to the shapefile.
> 
> Bryan / Ben,
> 
> I believe you need to ensure the *datasource* gets closed, which
> can be done by invoking it's destroy method in Python.  Please
> do *not* destroy layer's as they are owned by the datasource.
> 
> Best regards,

Frank,

You're right.  I should have looked at the code that I just got working 
in the last few days instead of going by memory.

Bryan

From ealpert at digitalglobe.com  Thu Aug 17 18:49:06 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ogr2ogr dimensionality issue with OCI
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23396965E@COMAIL01.digitalglobe.com>

I'm basically doing the following:

 

ogr2ogr -update -append -f "OCI" "OCI:user/pass@host2"
"OCI:user/pass@host1" bork -sql "select id,geometry from wtm_sub_cells
where ...." -nln WTM_SUB_CELL -lco "GEOMETRY_NAME=GEOMETRY" -lco "DIM=2"
-lco "SRID=8307"

 

 

The SDO_GTYPE in the source database is 2003 but ogr is trying to insert
a 3003. Anyone know why this is? I used the -lco "DIM=2". Also note I'm
trying to append data. I created this table with a similar ogr2ogr call
and the SDO_GTYPE is correct in the database. It appears that -update
-append does something different than during create.

 

-e

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060817/c18bd550/attachment.html
From warmerdam at pobox.com  Fri Aug 18 00:17:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ogr2ogr dimensionality issue with OCI
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23396965E@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23396965E@COMAIL01.digitalglobe.com>
Message-ID: <44E53F62.7070201@pobox.com>

Ethan Alpert wrote:
> I?m basically doing the following:
> 
>  
> 
> ogr2ogr -update -append -f "OCI" "OCI:user/pass@host2" 
> "OCI:user/pass@host1" bork -sql ?select id,geometry from wtm_sub_cells 
> where ?." -nln WTM_SUB_CELL -lco "GEOMETRY_NAME=GEOMETRY" -lco "DIM=2" 
> -lco "SRID=8307"
> 
>  
> 
>  
> 
> The SDO_GTYPE in the source database is 2003 but ogr is trying to insert 
> a 3003. Anyone know why this is? I used the ?lco ?DIM=2?. Also note I?m 
> trying to append data. I created this table with a similar ogr2ogr call 
> and the SDO_GTYPE is correct in the database. It appears that ?update 
> ?append does something different than during create.

Ethan,

Yikes!

Skimming the code, the OCI driver does not seem to make any effort to
discover if an existing layer is 2D or 3D when it is accesses an existing
layer.  So when it goes to write geometries, it seems it is forcing them
to 3D by default.

Looking at ogrociwritablelayer.cpp, there is the terrible old config
to force geometry dimension when creating.  To use this set the
OCI_DEFAULT_DIM config variable to 2.   Config variables can be set
as environment variables, though I think adding the following to the
commandline will also work:

   --config OCI_DEFAULT_DIM 2

I think the right solution for this would be to somehow query oracle
for the dimensionality of the geometry column when the layer is initially
setup.  Does Oracle even keep a dimension for columns?  Perhaps by looking
at the dimension of the DIMINFO in the metadata table?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From crane_ba at yahoo.com  Fri Aug 18 04:23:49 2006
From: crane_ba at yahoo.com (Ben Crane)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <44E489D9.70302@mapgears.com>
Message-ID: <20060818082349.43278.qmail@web52808.mail.yahoo.com>


Daniel,


> Did you call OGR_L_SetFeature() to write the updated
> feature to the 
> shapefile after setting the field values?
> 
> http://gdal.maptools.org/ogr/ogr__api_8h.html#a144

Nope, but will do now. Thank you.

> > 2. I have managed to get GetExtents to work, but
> how
> > do I actually seperate the 4 coordinate pairs in
> the
> > GetExtents object into 4 variables that I can use
> with
> > the SVG ViewBox command...I've tried treating it
> as an
> > array but had no joy.
> > 
> 
> I believe it's an associative array with 2 pairs of
> coordinates (not 4). 
> Try print_r($extent_var); to see what it contains
> exactly.

I can get the info from print_r, but I need to assign
those coordinate pairs to 2 seperate variables for use
within PHP. How do I assign them to standard PHP
variables?

Ben
 
> Daniel
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From dmorissette at mapgears.com  Fri Aug 18 10:28:38 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <20060818082349.43278.qmail@web52808.mail.yahoo.com>
References: <20060818082349.43278.qmail@web52808.mail.yahoo.com>
Message-ID: <44E5CE96.1080804@mapgears.com>

Ben Crane wrote:
> 
> I can get the info from print_r, but I need to assign
> those coordinate pairs to 2 seperate variables for use
> within PHP. How do I assign them to standard PHP
> variables?
> 

If I remember correctly, the extents coordinates are called minx, miny, 
maxx, maxy in the array, so if your extents are stored in $extent_var, 
you could assign the values to std PHP vars using something like:

$minx = $extent_var['minx'];
$miny = $extent_var['miny'];
$maxx = $extent_var['maxx'];
$maxy = $extent_var['maxy'];

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From crane_ba at yahoo.com  Fri Aug 18 10:49:12 2006
From: crane_ba at yahoo.com (Ben Crane)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetField  & GetExtents Query
In-Reply-To: <44E5CE96.1080804@mapgears.com>
Message-ID: <20060818144912.15055.qmail@web52811.mail.yahoo.com>

Daniel,

> If I remember correctly, the extents coordinates are
> called minx, miny, 
> maxx, maxy in the array, so if your extents are
> stored in $extent_var, 
> you could assign the values to std PHP vars using
> something like:
> 
> $minx = $extent_var['minx'];
> $miny = $extent_var['miny'];
> $maxx = $extent_var['maxx'];
> $maxy = $extent_var['maxy'];

Funny, I've already tried that and it didn't work. I
couldn't get it to print out the variable on the
screen when testing so I figure I was doing something
wrong and thought best to ask.                        
                                                   


Regards,
Ben Crane


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From andrew at andrewlarcombe.co.uk  Fri Aug 18 11:56:18 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
Message-ID: <44E5E322.1020808@andrewlarcombe.co.uk>

Hi,

I'm using gdal_translate to convert a 4000px x 4000px uncompressed 46MB 
tiff to an ECW file.

On a Windows XP laptop (Pentium M 1.6 GHz, 512MB RAM) using the latest 
fwtools download the process takes about 6 seconds.

On a RedHat Enterprise 3 powered Quad-3.8Ghz processor with 2GB ram 
using gdal-1.3.1 built from source the process takes ~120 seconds.

In each case the command used is as follows:

gdal_translate -of ECW -co "TARGET=90" OSIM_TQ3517_2004-07-07.tif test.ecw

Does anyone have any thoughts on why their is such a considerable 
difference in speed, and what I can do to remedy the situation?

Cheers,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From warmerdam at pobox.com  Fri Aug 18 12:38:11 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E5E322.1020808@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>
Message-ID: <44E5ECF3.6030900@pobox.com>

Andrew Larcombe wrote:
> Hi,
> 
> I'm using gdal_translate to convert a 4000px x 4000px uncompressed 46MB 
> tiff to an ECW file.
> 
> On a Windows XP laptop (Pentium M 1.6 GHz, 512MB RAM) using the latest 
> fwtools download the process takes about 6 seconds.
> 
> On a RedHat Enterprise 3 powered Quad-3.8Ghz processor with 2GB ram 
> using gdal-1.3.1 built from source the process takes ~120 seconds.
> 
> In each case the command used is as follows:
> 
> gdal_translate -of ECW -co "TARGET=90" OSIM_TQ3517_2004-07-07.tif test.ecw
> 
> Does anyone have any thoughts on why their is such a considerable 
> difference in speed, and what I can do to remedy the situation?

Andrew,

Have you watched the CPU usage to see if it is 100% on the linux system
when doing the compression?  If not, then I *suspect* some sort of thread
switching latency or something similar.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From aaronr at ecotrust.org  Fri Aug 18 12:59:12 2006
From: aaronr at ecotrust.org (Aaron Racicot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
Message-ID: <35469E27904CA04687795AF87D269300561612@september.ecotrust.org>

One quick question, are the file systems comparable (i.e. both local
disk) or could you have a network latency issue if you are processing
over a mounted file system?  Just checking the low hanging fruit before
we rip into the problem in gory detail.

A

+----------------------------------------+
| Aaron Racicot  | aaronr@ecotrust.org   |
| GIS Programmer | 503.467.0759          |
+----------------------------------------+
| e c o t r u s t                        |
| Jean Vollum Natural Capital Center     |
| 721 NW Ninth Avenue                    |
| Suite 200                              |
| Portland, OR 97209                     |
| www.ecotrust.org                       |
+----------------------------------------+


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Andrew
Larcombe
Sent: Friday, August 18, 2006 8:56 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance


Hi,

I'm using gdal_translate to convert a 4000px x 4000px uncompressed 46MB 
tiff to an ECW file.

On a Windows XP laptop (Pentium M 1.6 GHz, 512MB RAM) using the latest 
fwtools download the process takes about 6 seconds.

On a RedHat Enterprise 3 powered Quad-3.8Ghz processor with 2GB ram 
using gdal-1.3.1 built from source the process takes ~120 seconds.

In each case the command used is as follows:

gdal_translate -of ECW -co "TARGET=90" OSIM_TQ3517_2004-07-07.tif
test.ecw

Does anyone have any thoughts on why their is such a considerable 
difference in speed, and what I can do to remedy the situation?

Cheers,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From andrew at andrewlarcombe.co.uk  Fri Aug 18 14:04:07 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E5ECF3.6030900@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>
	<44E5ECF3.6030900@pobox.com>
Message-ID: <44E60117.2050804@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> Andrew Larcombe wrote:
>> Hi,
>>
>> I'm using gdal_translate to convert a 4000px x 4000px uncompressed 
>> 46MB tiff to an ECW file.
>>
>> On a Windows XP laptop (Pentium M 1.6 GHz, 512MB RAM) using the latest 
>> fwtools download the process takes about 6 seconds.
>>
>> On a RedHat Enterprise 3 powered Quad-3.8Ghz processor with 2GB ram 
>> using gdal-1.3.1 built from source the process takes ~120 seconds.
>>
>> In each case the command used is as follows:
>>
>> gdal_translate -of ECW -co "TARGET=90" OSIM_TQ3517_2004-07-07.tif 
>> test.ecw
>>
>> Does anyone have any thoughts on why their is such a considerable 
>> difference in speed, and what I can do to remedy the situation?
> 
> Andrew,
> 
> Have you watched the CPU usage to see if it is 100% on the linux system
> when doing the compression?  If not, then I *suspect* some sort of thread
> switching latency or something similar.
> 
> Best regards,

Frank, Aaron,

Thanks for the prompt replies:

Aaron - yes, in both instances the disk is local. WinXP is a local 
NTFS-formatted filesystem, Linux is ext3 formatted in a (I think) raid 1 
configuration. Incidentally tiff -> jpg compression of the same file 
takes ~1.5 seconds on the Linux box.

Frank - according to top the CPU usage varies but never gets above 20%. 
Does this shed any more light on the issue?

Thanks again,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From warmerdam at pobox.com  Fri Aug 18 14:37:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E60117.2050804@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>
	<44E60117.2050804@andrewlarcombe.co.uk>
Message-ID: <44E60903.9060209@pobox.com>

Andrew Larcombe wrote:
> Frank - according to top the CPU usage varies but never gets above 20%. 
> Does this shed any more light on the issue?

Andrew,

This indicates things are stalling somewhere.  My guess then is that it
is a thread switching issue of some sort.  How confident are you that
you are using the latest and greatest ECW SDK?

It could also be some sort of IO problem.  I think the encoder keeps
temp files in /tmp.  I trust that is a fast local disk too?

Beyond that it gets pretty involved to try and diagnose.   I just hate
multithreaded libraries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mhanson at photon.com  Fri Aug 18 14:53:25 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Datatype of bands
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278552@pj-exchange.photon.com>

Hi,  I have a couple questions regarding the data type of bands in a single dataset.   Each spectral band in a file could potentially have a different datatype.  
 
1) Is there an easy way to retrieve the smallest data type that can hold the values across all bands, or only by iterating through with GetRasterband()->GetRasterDataType() and calls to GDALDataTypeUnion()?
 
2) It looks like GDAL cannot *create* a file with varying data types across spectral bands unless it is done with first a Create(), then using AddBands() to add each band individually.  But AddBands() isn't supported by all data formats.  I haven't been able to find a list of formats that support AddBand...did I miss it?
 
3) Not so much a GDAL question, but I was wondering how common users out there have found different datatypes vs. bands to be.  I don't think it's all that common unless perhaps elevation maps are bundled in with data, or the format contains both raw and calibrated data.  But I don't want to immediately make the assumption that all datasets will have identical datatypes across all bands. I need to make a decision about if I need to support creation of multi-datatype files and was hoping to get feedback on if users out there felt this was a safe assumption or a bad one.
 
Thanks in advance !
 
matt


From andrew at andrewlarcombe.co.uk  Fri Aug 18 14:58:08 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E60903.9060209@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>
	<44E60903.9060209@pobox.com>
Message-ID: <44E60DC0.9070708@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> Andrew Larcombe wrote:
>> Frank - according to top the CPU usage varies but never gets above 
>> 20%. Does this shed any more light on the issue?
> 
> Andrew,
> 
> This indicates things are stalling somewhere.  My guess then is that it
> is a thread switching issue of some sort.  How confident are you that
> you are using the latest and greatest ECW SDK?
> 
> It could also be some sort of IO problem.  I think the encoder keeps
> temp files in /tmp.  I trust that is a fast local disk too?
> 
> Beyond that it gets pretty involved to try and diagnose.   I just hate
> multithreaded libraries.

Frank,

I will check the ECW SDK on Monday and report back. Thanks for your help,

Regards,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk


From warmerdam at pobox.com  Fri Aug 18 15:42:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Datatype of bands
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278552@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278552@pj-exchange.photon.com>
Message-ID: <44E6180B.7060504@pobox.com>

Matt Hanson wrote:
> Hi,  I have a couple questions regarding the data type of bands in a single
> dataset.   Each spectral band in a file could potentially have a different
> datatype.
> 
> 1) Is there an easy way to retrieve the smallest data type that can hold
> the values across all bands, or only by iterating through with
> GetRasterband()->GetRasterDataType() and calls to GDALDataTypeUnion()?

Matt,

There is no convience function for this.   Your approach is the right one.

> 2) It looks like GDAL cannot *create* a file with varying data types across
> spectral bands unless it is done with first a Create(), then using
> AddBands() to add each band individually.  But AddBands() isn't supported
> by all data formats.  I haven't been able to find a list of formats that
> support AddBand...did I miss it?

There is no list of formats supporting AddBand(). You would pretty much have
to inspect the implementations.  In practice I think there are very very
few that do support it.  possibly only the MEM and VRT formats.

Format drivers also have the option of honouring the band data type
from the source in the CreateCopy() method.  In practice most just
grab the type of the first band and assume the rest are the same.

Generally speaking it is rare for image files to have different types for
different bands, and while GDAL can expose it when it occurs, many drivers
won't capture it when copying a dataset.

It would be nice if we were more systematic about reporting failures to
honour the original band types when copying.

> 3) Not so much a GDAL question, but I was wondering how common users out
> there have found different datatypes vs. bands to be.  I don't think it's
> all that common unless perhaps elevation maps are bundled in with data, or
> the format contains both raw and calibrated data.  But I don't want to
> immediately make the assumption that all datasets will have identical
> datatypes across all bands. I need to make a decision about if I need to
> support creation of multi-datatype files and was hoping to get feedback on
> if users out there felt this was a safe assumption or a bad one.

Right, it is quite rare.  I think the most common formats to do it are
PCIDSK and Erdas Imagine formats, but even then it is a very small
number of all datasets.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mark at overmeer.net  Fri Aug 18 17:51:05 2006
From: mark at overmeer.net (Mark Overmeer)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E5ECF3.6030900@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>
	<44E5ECF3.6030900@pobox.com>
Message-ID: <20060818215105.GL15175@earth.overmeer.net>

> Andrew Larcombe wrote:
> >I'm using gdal_translate to convert a 4000px x 4000px uncompressed 46MB 
> >tiff to an ECW file.

* Frank Warmerdam (warmerdam@pobox.com) [060818 16:38]:
> Have you watched the CPU usage to see if it is 100% on the linux system
> when doing the compression?  If not, then I *suspect* some sort of thread
> switching latency or something similar.

I have seen this as well (tried many generations of Linux kernels)  An
strace() showed me that the library waits upto 10ms per (what I guess)
image line.  At the same time, the TARGET has no affect at all.  It
seems mutulated on purpose.
-- 
CU,
               MarkOv

From kevin at peoplegis.com  Thu Aug 17 11:49:26 2006
From: kevin at peoplegis.com (Kevin Flanders)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] tiling/conversion
Message-ID: <BAECIJIGPFEOENAEIGBLOEGKAFAB.kevin@peoplegis.com>

Can I use gdal to create tiles from a large tiff image and convert to ecw at
the same time?  How do I create the individual tiles?  Can I use translate,
and pass a tileindex shapefile to support the clipping bounding boxes to
create the individual tiles....and convert on the fly?

Kevin



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060817/24449d33/attachment.html
From kevin at peoplegis.com  Thu Aug 17 17:32:39 2006
From: kevin at peoplegis.com (Kevin Flanders)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] tiling and conversion
Message-ID: <NMEPJBPBEKJAPFPJLAJOAEBGCAAA.kevin@peoplegis.com>

Can I use gdal_translate to tile a large tiff image and convert to ecw
format at the same time?  Would I create the tiled tiffs first?  How would I
clip the original tiff to create the tiles?


Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060817/ae8d4554/attachment.html
From flightline at airtelbroadband.in  Thu Aug 17 21:19:21 2006
From: flightline at airtelbroadband.in (francis)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
Message-ID: <44E51599.8030009@airtelbroadband.in>

Dear Sir,

You may find my name on  your mailing list.

I have an ovr file and aux file with many vector elements [text labels 
and points / polylines]
These have an EHFA_HEADER _TAG
I am unable to decipher the vector format.

The GDAL code seems to largely address raster issues

Any section of the code specific to vectors is welcome.

Also, is this vector format document available? My internet searches 
have drawn a blank

Thanks
Francis da Cunha

From warmerdam at pobox.com  Fri Aug 18 22:27:12 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <44E51599.8030009@airtelbroadband.in>
References: <44E51599.8030009@airtelbroadband.in>
Message-ID: <44E67700.6000106@pobox.com>

francis wrote:
> Dear Sir,
> 
> You may find my name on  your mailing list.
> 
> I have an ovr file and aux file with many vector elements [text labels 
> and points / polylines]
> These have an EHFA_HEADER _TAG
> I am unable to decipher the vector format.
> 
> The GDAL code seems to largely address raster issues
> 
> Any section of the code specific to vectors is welcome.
> 
> Also, is this vector format document available? My internet searches 
> have drawn a blank

Francis,

I'm not familiar with vector EHFA files.  Can you make a sample available?
The "hfatest -dt" command should still dump the structure of the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Fri Aug 18 22:46:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] tiling/conversion
In-Reply-To: <BAECIJIGPFEOENAEIGBLOEGKAFAB.kevin@peoplegis.com>
References: <BAECIJIGPFEOENAEIGBLOEGKAFAB.kevin@peoplegis.com>
Message-ID: <44E67B69.9010708@pobox.com>

Kevin Flanders wrote:
> Can I use gdal to create tiles from a large tiff image and convert to 
> ecw at the same time? 

Kevin,

Yes, you could have gdal_translate pull a subarea out of a source file,
and write it to an ECW all in one command.

> How do I create the individual tiles?  

With gdal_translate you would need to invoke the command once for each
tile you want to produce.  Not something you want to do by hand for any
number of files!

 > Can I use
> translate, and pass a tileindex shapefile to support the clipping 
> bounding boxes to create the individual tiles....and convert on the fly?

The gdal_translate command doesn't know how to use a tileindex.  But a
script could be written to use a tileindex to cut up a big image into tiles.
That is assuming the polygons in the tileindex are simple rectangles.

Basically, currently breaking images into tiles either involves some sort
of script or other.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dany.geotools at gmail.com  Sat Aug 19 14:38:49 2006
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] How to get configuration options
Message-ID: <7221db410608191138g469be70ck232cd255fbd46420@mail.gmail.com>

Hi list,
I have another stupid question for you :)

I'm using Java and I'm trying to detect if GDAL is using CACHE.
Which is the right way to use gdal.GetConfigOption(String, String)?

I'have tried:
String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", null);
It returns null;

I'have tried:
String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", "");
It returns null;

I'have tried:
String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", "Hello!");
It returns "Hello!".


Where am I wrong?



Thanks a lot.



-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060819/16f239cc/attachment.html
From rayg at daylongraphics.com  Sat Aug 19 16:47:01 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL driver for HDR+FLT dataset?
In-Reply-To: <44E67700.6000106@pobox.com>
References: <44E51599.8030009@airtelbroadband.in> <44E67700.6000106@pobox.com>
Message-ID: <44E778C5.8080809@daylongraphics.com>

I have datasets using a file pair of type .hdr and .flt, with the .hdr 
matching the header structure of an Arc/Info ASCII Grid file and the 
.flt being a raw grid of single-precision floats. The hdr+flt combo is a 
simple binary format but not an Arc/Info Binary Grid. Is there a GDAL 
driver that reads .hdr + .flt datasets?

Ray


From andrew at andrewlarcombe.co.uk  Mon Aug 21 04:43:52 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E60903.9060209@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>
	<44E60903.9060209@pobox.com>
Message-ID: <44E97248.4060905@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> Andrew Larcombe wrote:
>> Frank - according to top the CPU usage varies but never gets above 
>> 20%. Does this shed any more light on the issue?
> 
> Andrew,
> 
> This indicates things are stalling somewhere.  My guess then is that it
> is a thread switching issue of some sort.  How confident are you that
> you are using the latest and greatest ECW SDK?
> 
> It could also be some sort of IO problem.  I think the encoder keeps
> temp files in /tmp.  I trust that is a fast local disk too?
> 
> Beyond that it gets pretty involved to try and diagnose.   I just hate
> multithreaded libraries.

Frank,

Yes /tmp is a fast local disk too. I'm using the latest source ECW SDK - 
3.3RC2. I note there is a 3.3 final release, but these are Windows binaries.

strace'ing gdal_translate gives this:

% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  35.14    0.357212          14     26030           write
  24.54    0.249446           9     26948           sched_yield
  18.41    0.187088           7     25948           gettimeofday
   9.42    0.095770          17      5505           nanosleep
   7.40    0.075248           6     12238           _llseek
   1.68    0.017050          11      1576         1 read
   1.64    0.016643          65       257           munmap
   0.46    0.004717          15       317           mprotect
   0.32    0.003283         657         5           unlink
   0.29    0.002901          24       119           brk
   0.23    0.002337           9       264           mmap2
   0.13    0.001281          16        81        25 open
   0.09    0.000914          14        65           old_mmap
   0.06    0.000572          10        56           close
   0.06    0.000566           9        64           fstat64
   0.05    0.000463          10        46        21 stat64
   0.03    0.000289          58         5         5 lstat64
   0.02    0.000213          11        19         3 futex
   0.02    0.000172         172         1           execve
   0.01    0.000084          17         5           clone
   0.00    0.000033          17         2           tgkill
   0.00    0.000027           9         3           sched_getparam
   0.00    0.000026           9         3           sched_getscheduler
   0.00    0.000023          12         2           getrlimit
   0.00    0.000014           3         5           getpid
   0.00    0.000014          14         1           set_thread_area
   0.00    0.000013          13         1           rt_sigaction
   0.00    0.000011          11         1           rt_sigprocmask
   0.00    0.000011          11         1           set_tid_address
   0.00    0.000004           4         1           uname
------ ----------- ----------- --------- --------- ----------------
100.00    1.016425                 99569        55 total

Do you have any more thoughts on this, or where the problem could lie? 
It does seem to be making an awfully large number of gettimeofday calls, 
although maybe this is a red herring?

Regards,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From floh at restlaufzeit.de  Mon Aug 21 05:22:07 2006
From: floh at restlaufzeit.de (Florian Wobbe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdal_translate problem converting to netcdf
Message-ID: <44E97B3F.9060906@restlaufzeit.de>

Hello list,

I've got problems converting to netcdf with GDAL 1.2.6.0, released
2005/03/13. The package gdal-bin (1.2.6-1) was installed from the
stable debian distibution and depends on netcdfg3 (3.5.0-7.1).

gdal_translate complains about invalid cdfid:

 gdal_translate -b 1 -ot Int16 -of GMT test.pix test.grd
 Input file size is 1963, 1188
 netcdf: 3 is not a valid cdfid

Whereas GDAL 1.3.2.0, FWTools 1.0.5, released 2006/07/06 functions
without any problems:

 ~/bin/FWTools-1.0.5/bin_safe/gdal_translate -b 1 -ot Int16 -of GMT
test.pix test.grd
 Input file size is 1963, 1188

 grdinfo test.grd
 test.grd: Normal node registration used
 test.grd: grdfile format # 0
 test.grd: x_min: 476136 x_max: 484453 x_inc: 4.237 units: meters
nx: 1963
 test.grd: y_min: 2.28557e+06 y_max: 2.29061e+06 y_inc: 4.237 units:
meters ny: 1188
 test.grd: z_min: 0 z_max: 255 units: meters
 test.grd: scale_factor: 1 add_offset: 0

Regards,
Florian


From andrew at andrewlarcombe.co.uk  Mon Aug 21 10:22:31 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E97248.4060905@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>
	<44E97248.4060905@andrewlarcombe.co.uk>
Message-ID: <44E9C1A7.6040305@andrewlarcombe.co.uk>

Andrew Larcombe wrote:
> Frank Warmerdam wrote:
>> Andrew Larcombe wrote:
>>> Frank - according to top the CPU usage varies but never gets above 
>>> 20%. Does this shed any more light on the issue?
>>
>> Andrew,
>>
>> This indicates things are stalling somewhere.  My guess then is that it
>> is a thread switching issue of some sort.  How confident are you that
>> you are using the latest and greatest ECW SDK?
>>
>> It could also be some sort of IO problem.  I think the encoder keeps
>> temp files in /tmp.  I trust that is a fast local disk too?
>>
>> Beyond that it gets pretty involved to try and diagnose.   I just hate
>> multithreaded libraries.

To get some more consistent results, I've tried comparing the 
performance of the latest FWTools on my laptop and the problematic 
server. Tests are done on local drives with /tmp also being local. Test 
is to convert a 4000x4000 uncompressed TIF to ECW with TARGET=90 set 
using gdal_convert found in the bin_safe directory:

Laptop:
Centrino 1.4GHz, 1Gig RAM
Mandriva 2006, glibc-2.3.5

16.44user
10.53system
0:59.02elapsed
45%CPU (0avgtext+0avgdata 0maxresident)k
0inputs+0outputs (0major+8878minor)pagefaults 0swaps

Server:
4x Dual-Core Xeon 3.66GHz, 8Gig RAM
Redhat Enterprise Linux 3, glibc-2.3.2

real    1m55.632s
user    0m5.360s
sys     0m1.380s

ie, the server takes ~2 minutes, the laptop ~1 minute which isn't what 
one would expect. Additionally, both are extremely slow compared to the 
FWTools shell on Windows XP laptop (1.6GHz, 512MB RAM) which processes 
it in ~6 seconds.

Compressing to JPEG using gdal_translate is a different matter - 
basically what you would expect. The laptop takes ~4 seconds, the server 
1.4 seconds.

Regards,

Andrew


-- 
Andrew Larcombe
Freelance Geospatial, Database & Web Programming

web: http://www.andrewlarcombe.co.uk
email: andrew@andrewlarcombe.co.uk
mob: +44 (7760) 258623
icq: 306690163

From mhanson at photon.com  Mon Aug 21 11:16:49 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Datatype of bands
References: <0719BE42F22E0A46857DF72644EC5D70278552@pj-exchange.photon.com>
	<44E6180B.7060504@pobox.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278557@pj-exchange.photon.com>

Frank, Thanks for the answers.  I'm going to assume that all bands are of the same datatype.
 
A related question - is there a way I can get the datatype of a band as a typename, rather then as a GDAL enum or a string.   I want to be able to query a dataset and get the datatype so I can create a template of a specific type.
 
matt

________________________________

From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Fri 8/18/2006 3:42 PM
To: Matt Hanson
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Datatype of bands



Matt Hanson wrote:
> Hi,  I have a couple questions regarding the data type of bands in a single
> dataset.   Each spectral band in a file could potentially have a different
> datatype.
>
> 1) Is there an easy way to retrieve the smallest data type that can hold
> the values across all bands, or only by iterating through with
> GetRasterband()->GetRasterDataType() and calls to GDALDataTypeUnion()?

Matt,

There is no convience function for this.   Your approach is the right one.

> 2) It looks like GDAL cannot *create* a file with varying data types across
> spectral bands unless it is done with first a Create(), then using
> AddBands() to add each band individually.  But AddBands() isn't supported
> by all data formats.  I haven't been able to find a list of formats that
> support AddBand...did I miss it?

There is no list of formats supporting AddBand(). You would pretty much have
to inspect the implementations.  In practice I think there are very very
few that do support it.  possibly only the MEM and VRT formats.

Format drivers also have the option of honouring the band data type
from the source in the CreateCopy() method.  In practice most just
grab the type of the first band and assume the rest are the same.

Generally speaking it is rare for image files to have different types for
different bands, and while GDAL can expose it when it occurs, many drivers
won't capture it when copying a dataset.

It would be nice if we were more systematic about reporting failures to
honour the original band types when copying.

> 3) Not so much a GDAL question, but I was wondering how common users out
> there have found different datatypes vs. bands to be.  I don't think it's
> all that common unless perhaps elevation maps are bundled in with data, or
> the format contains both raw and calibrated data.  But I don't want to
> immediately make the assumption that all datasets will have identical
> datatypes across all bands. I need to make a decision about if I need to
> support creation of multi-datatype files and was hoping to get feedback on
> if users out there felt this was a safe assumption or a bad one.

Right, it is quite rare.  I think the most common formats to do it are
PCIDSK and Erdas Imagine formats, but even then it is a very small
number of all datasets.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org <http://osgeo.org/> 





From warmerdam at pobox.com  Mon Aug 21 11:24:08 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdal_translate problem converting to netcdf
In-Reply-To: <44E97B3F.9060906@restlaufzeit.de>
References: <44E97B3F.9060906@restlaufzeit.de>
Message-ID: <44E9D018.4090601@pobox.com>

Florian Wobbe wrote:
> Hello list,
> 
> I've got problems converting to netcdf with GDAL 1.2.6.0, released
> 2005/03/13. The package gdal-bin (1.2.6-1) was installed from the
> stable debian distibution and depends on netcdfg3 (3.5.0-7.1).
> 
> gdal_translate complains about invalid cdfid:
> 
>  gdal_translate -b 1 -ot Int16 -of GMT test.pix test.grd
>  Input file size is 1963, 1188
>  netcdf: 3 is not a valid cdfid
> 
> Whereas GDAL 1.3.2.0, FWTools 1.0.5, released 2006/07/06 functions
> without any problems:

Florian,

It would appear the problems in the GDAL NetCDF driver were corrected.
Denis Nadeau did quite a bit of work to improve this driver in the
last six months.  So you will likely need at least GDAL 1.3.2 (or perhaps
GDAL CVS) if you don't want to use FWTools for some reason.

Note that we don't fix bugs in old versions of the code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Mon Aug 21 11:34:35 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E97248.4060905@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>
	<44E97248.4060905@andrewlarcombe.co.uk>
Message-ID: <44E9D28B.6040608@pobox.com>

Andrew Larcombe wrote:
> strace'ing gdal_translate gives this:
> 
> % time     seconds  usecs/call     calls    errors syscall
> ------ ----------- ----------- --------- --------- ----------------
>  35.14    0.357212          14     26030           write
>  24.54    0.249446           9     26948           sched_yield
>  18.41    0.187088           7     25948           gettimeofday
>   9.42    0.095770          17      5505           nanosleep
>   7.40    0.075248           6     12238           _llseek
>   1.68    0.017050          11      1576         1 read
>   1.64    0.016643          65       257           munmap
>   0.46    0.004717          15       317           mprotect
>   0.32    0.003283         657         5           unlink
>   0.29    0.002901          24       119           brk
...
> 
> Do you have any more thoughts on this, or where the problem could lie? 
> It does seem to be making an awfully large number of gettimeofday calls, 
> although maybe this is a red herring?

Andrew,

There are some interesting points for investigation here, but nothing that
seems conclusive to me.  Actually, if I were to check something it would
be all the nanosleep() calls.  This suggests there is a hack somewhere in
the code to "sleep for a little while" to try and avoid some sort of lock
or race condition, but a little sleeping a lot of times can easily result
in the poor cpu utilization we are seeing.

I appologise for not digging into this at my end, but I don't really have
time to do an indepth investigation. And since it has been some time since
3.3RC2, I hate to do a lot of investigation on an old source tree for the
SDK.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From andrew at andrewlarcombe.co.uk  Mon Aug 21 11:42:08 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E9D28B.6040608@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>
	<44E97248.4060905@andrewlarcombe.co.uk>
	<44E9D28B.6040608@pobox.com>
Message-ID: <44E9D450.1010706@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> Andrew Larcombe wrote:
>> strace'ing gdal_translate gives this:
>>
>> % time     seconds  usecs/call     calls    errors syscall
>> ------ ----------- ----------- --------- --------- ----------------
>>  35.14    0.357212          14     26030           write
>>  24.54    0.249446           9     26948           sched_yield
>>  18.41    0.187088           7     25948           gettimeofday
>>   9.42    0.095770          17      5505           nanosleep
>>   7.40    0.075248           6     12238           _llseek
>>   1.68    0.017050          11      1576         1 read
>>   1.64    0.016643          65       257           munmap
>>   0.46    0.004717          15       317           mprotect
>>   0.32    0.003283         657         5           unlink
>>   0.29    0.002901          24       119           brk
> ...
>>
>> Do you have any more thoughts on this, or where the problem could lie? 
>> It does seem to be making an awfully large number of gettimeofday 
>> calls, although maybe this is a red herring?
> 
> Andrew,
> 
> There are some interesting points for investigation here, but nothing that
> seems conclusive to me.  Actually, if I were to check something it would
> be all the nanosleep() calls.  This suggests there is a hack somewhere in
> the code to "sleep for a little while" to try and avoid some sort of lock
> or race condition, but a little sleeping a lot of times can easily result
> in the poor cpu utilization we are seeing.
> 
> I appologise for not digging into this at my end, but I don't really have
> time to do an indepth investigation. And since it has been some time since
> 3.3RC2, I hate to do a lot of investigation on an old source tree for the
> SDK.

Hi Frank,

Thanks for your help. Are you saying that there's a more recent SDK 
available? I wasn't aware that there was a more recent version than 
3.3RC2 for Linux? According to 
http://www.ermapper.com/downloads/sdks.aspx it's the most recent version 
for Linux - the 3.3 release is for "Operating Systems: Windows NT, 
Windows 2003 Server, Windows XP, Windows 98, Windows 2000"

Regards,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From warmerdam at pobox.com  Mon Aug 21 12:02:41 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Datatype of bands
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278557@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278552@pj-exchange.photon.com>	<44E6180B.7060504@pobox.com>
	<0719BE42F22E0A46857DF72644EC5D70278557@pj-exchange.photon.com>
Message-ID: <44E9D921.2070501@pobox.com>

Matt Hanson wrote:
> Frank, Thanks for the answers.  I'm going to assume that all bands are of
> the same datatype.
> 
> A related question - is there a way I can get the datatype of a band as a
> typename, rather then as a GDAL enum or a string.   I want to be able to
> query a dataset and get the datatype so I can create a template of a
> specific type.

Matt,

No, I'm sorry, there is no support for this currently.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Mon Aug 21 12:17:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E9D450.1010706@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>	<44E97248.4060905@andrewlarcombe.co.uk>	<44E9D28B.6040608@pobox.com>
	<44E9D450.1010706@andrewlarcombe.co.uk>
Message-ID: <44E9DC8B.7060201@pobox.com>

Andrew Larcombe wrote:
> Hi Frank,
> 
> Thanks for your help. Are you saying that there's a more recent SDK 
> available? I wasn't aware that there was a more recent version than 
> 3.3RC2 for Linux? According to 
> http://www.ermapper.com/downloads/sdks.aspx it's the most recent version 
> for Linux - the 3.3 release is for "Operating Systems: Windows NT, 
> Windows 2003 Server, Windows XP, Windows 98, Windows 2000"

Andrew,

I mean that ERMapper must have an internal development version of the
SDK with quite a few fixes since 3.3RC2 since it is a bit old. I don't
have access to anything newer than 3.3RC2 myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From andrew at andrewlarcombe.co.uk  Mon Aug 21 12:19:38 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E9DC8B.7060201@pobox.com>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>	<44E97248.4060905@andrewlarcombe.co.uk>	<44E9D28B.6040608@pobox.com>
	<44E9D450.1010706@andrewlarcombe.co.uk>
	<44E9DC8B.7060201@pobox.com>
Message-ID: <44E9DD1A.7020503@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> Andrew Larcombe wrote:
>> Hi Frank,
>>
>> Thanks for your help. Are you saying that there's a more recent SDK 
>> available? I wasn't aware that there was a more recent version than 
>> 3.3RC2 for Linux? According to 
>> http://www.ermapper.com/downloads/sdks.aspx it's the most recent 
>> version for Linux - the 3.3 release is for "Operating Systems: Windows 
>> NT, Windows 2003 Server, Windows XP, Windows 98, Windows 2000"
> 
> Andrew,
> 
> I mean that ERMapper must have an internal development version of the
> SDK with quite a few fixes since 3.3RC2 since it is a bit old. I don't
> have access to anything newer than 3.3RC2 myself.

Ah, I understand. Yes, that makes sense - thanks for your help. I'll 
contact ERMapper directly.

Thanks,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From andrew at andrewlarcombe.co.uk  Mon Aug 21 12:53:53 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
	- POSSIBLE HACKISH SOLUTION
In-Reply-To: <44E9DD1A.7020503@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>	<44E97248.4060905@andrewlarcombe.co.uk>	<44E9D28B.6040608@pobox.com>	<44E9D450.1010706@andrewlarcombe.co.uk>	<44E9DC8B.7060201@pobox.com>
	<44E9DD1A.7020503@andrewlarcombe.co.uk>
Message-ID: <44E9E521.7000304@andrewlarcombe.co.uk>

Initial testing appears to show that running ECW conversion from 
gdal_translate in FWTools under the windows non-emulator, WINE, is 
6xfaster than running it natively. I'm now getting translation times of 
around 10 seconds, rather than 60 seconds on my laptop. I can only 
assume wine's multithreading is less crippled than that provided by 
ERMapper?

Either way, it's a hack, but it appears to work. Do I win a prize? ;)

Cheers,

Andrew

-- 
Andrew Larcombe
andrew@andrewlarcombe.co.uk

From woklist at kyngchaos.com  Mon Aug 21 13:02:56 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ECW compression - Extremely slow Linux performance
In-Reply-To: <44E9DD1A.7020503@andrewlarcombe.co.uk>
References: <44E5E322.1020808@andrewlarcombe.co.uk>	<44E5ECF3.6030900@pobox.com>	<44E60117.2050804@andrewlarcombe.co.uk>	<44E60903.9060209@pobox.com>	<44E97248.4060905@andrewlarcombe.co.uk>	<44E9D28B.6040608@pobox.com>
	<44E9D450.1010706@andrewlarcombe.co.uk>
	<44E9DC8B.7060201@pobox.com>
	<44E9DD1A.7020503@andrewlarcombe.co.uk>
Message-ID: <F1D427E4-6123-41FE-BB45-4BDECBA538BE@kyngchaos.com>

On Aug 21, 2006, at 11:19 AM, Andrew Larcombe wrote:

> Frank Warmerdam wrote:
>> Andrew Larcombe wrote:
>>> Hi Frank,
>>>
>>> Thanks for your help. Are you saying that there's a more recent  
>>> SDK available? I wasn't aware that there was a more recent  
>>> version than 3.3RC2 for Linux? According to http:// 
>>> www.ermapper.com/downloads/sdks.aspx it's the most recent version  
>>> for Linux - the 3.3 release is for "Operating Systems: Windows  
>>> NT, Windows 2003 Server, Windows XP, Windows 98, Windows 2000"
>> Andrew,
>> I mean that ERMapper must have an internal development version of the
>> SDK with quite a few fixes since 3.3RC2 since it is a bit old. I  
>> don't
>> have access to anything newer than 3.3RC2 myself.
>
> Ah, I understand. Yes, that makes sense - thanks for your help.  
> I'll contact ERMapper directly.
>
There's a thread in the ERMapper forums about this.

http://forums.ermapper.com/viewtopic.php?t=1099

We're still waiting on that 'Couple of days' Tom Lynch mentioned back  
in July.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From warmerdam at pobox.com  Mon Aug 21 13:04:25 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: How to get configuration options
In-Reply-To: <7221db410608191138g469be70ck232cd255fbd46420@mail.gmail.com>
References: <7221db410608191138g469be70ck232cd255fbd46420@mail.gmail.com>
Message-ID: <44E9E799.6020502@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> I have another stupid question for you :)
> 
> I'm using Java and I'm trying to detect if GDAL is using CACHE.
> Which is the right way to use gdal.GetConfigOption(String, String)?
> 
> I'have tried:
> String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", null);
> It returns null;
> 
> I'have tried:
> String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", "");
> It returns null;
> 
> I'have tried:
> String useCache = gdal.GetConfigOption("GDAL_FORCE_CACHING", "Hello!");
> It returns "Hello!".
> 
> 
> Where am I wrong?

Daniele,

Config options are something that can be set by the user or application
and normally there are none set in which case GDAL uses it's internal
defaults for config based decisions.  So the fact that you get "Hello!"
back just means that this config options is not set.

Currently the default behavior is to treat GDAL_FORCE_CACHING as NO if
it is not set, so you should likely use that as your default.

Be forewarned that a variety of values are legal (true, false, yes, no,
1, 0, on, off).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mhanson at photon.com  Mon Aug 21 14:46:16 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDALRasterBand overhead
Message-ID: <0719BE42F22E0A46857DF72644EC5D7027855B@pj-exchange.photon.com>

I was wondering how much overhead is used by the GDALRasterBand object.  I'd like to know practically how many RasterBands I can have open at one time or perhaps there are other issues with opening up multiple bands?  Should i be concerned with keeping the open bands to a minimum?
 
Thanks in advance !
 
matt


From warmerdam at pobox.com  Mon Aug 21 15:28:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDALRasterBand overhead
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D7027855B@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D7027855B@pj-exchange.photon.com>
Message-ID: <44EA0945.2050407@pobox.com>

Matt Hanson wrote:
> I was wondering how much overhead is used by the GDALRasterBand object.
> I'd like to know practically how many RasterBands I can have open at one
> time or perhaps there are other issues with opening up multiple bands?
> Should i be concerned with keeping the open bands to a minimum?
> 
> Thanks in advance !

Matt,

It looks like the core GDALRasterBand object is 84bytes.  If you populate
it with metadata, colortables, and so forth it will be correspondingly bigger.

The biggest issue is that if you have done anything to access raster data
on the band, the "block cache" will have been initialized.  And that is
another 4 bytes per block (except for very large files which use a two
layer block cache to reduce memory use in common situations).

Generally speaking band objects don't have file handles associated or other
expensive system objects so you are likely ok to have lots of band objects,
as long as they aren't going to have large instantiated block caches.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From oracle at provocation.net  Mon Aug 21 22:10:23 2006
From: oracle at provocation.net (Zenon Panoussis)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] gdalwarp black edges
Message-ID: <44EA678F.3010507@provocation.net>

Hello all

>From http://lists.maptools.org/pipermail/gdal-dev/2004-October/004285.html

>> 3) My intent is to build a tileindex of the output files and serve
>> them up using mapserver. I'm worried about the black "collar" that
>> I'm left with around the images after I've reprojected them...

> Hmm, this will indeed be a problem.  MapServer doesn't mind overlapping
> images, but it is just going to draw them in some arbitrary order and the
> black stuff will get written over valid imagery in some cases.  Normally
> I would suggest using the MapServer OFFSITE keyword to indicate that the
> black should be ignored (treated as transparent)...

I'm facing this now and I need OFFSITE for another colour. Has any
solution to it turned up in the meanhile? Is there some way to tell
gdalwarp to use a specific colour for nodata instead of black?
I read the -dstnodata man part but I'm not sure if that's what
I need and I don't know how to express "value [value...]" to make
it "white".

Z


From crane_ba at yahoo.com  Tue Aug 22 04:07:17 2006
From: crane_ba at yahoo.com (Ben Crane)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetFeature crashing browser when used with
	OGR_L_GetFeature
Message-ID: <20060822080717.65190.qmail@web52809.mail.yahoo.com>

Hi all,

Daniel, thanx for the setfeature command, works like a
charm and is surprisingly quick (no insult meant :).
One thing though, now I have tried to select specific
rows to re-write a feature. This does work, but in an
odd way. What happens is that the browser tries to run
the php script, I then get the standard Win XP crash
message saying the PHP Script Interpreter has
encountered an error and needs to close. The script
then finishes, and then runs perfectly with the
updated field present....very wierd.

Here is a section of code that is causing offense:

$tFeature = OGR_L_GetFeature( $hLayer, 1 );
OGR_F_SetFieldString( $tFeature, 1, "test string" );
OGR_L_SetFeature ($hLayer, $tFeature );

In particular, if I don't use $tFeature, then the
browser doesn't crash, when I do try to select a
specific feature, the SetFeature command causes the
browser to crash. Any ideas...ironically it does work,
but each time I get the Win XP IE "error, must close"
message.

I've hunted around for other commands that may be
required, but can't find any...I've even tried the
Get_Fid command instead of manually assigning a
feature ID. 

Thanx,
Ben

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From beyhan at deprem.gov.tr  Tue Aug 22 06:17:36 2006
From: beyhan at deprem.gov.tr (Murat BEYHAN)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] OGR functionality.
Message-ID: <20060822101106.M10741@deprem.gov.tr>


Dear Friends;

I'm using mandrake linux limited edition 2005.
And I'm MapServer user.
For the connect MySQL by using ogr I have tried following connection

<OGRVRTDataSource>
    <OGRVRTLayer name="aqidata">
       
<SrcDataSource>MYSQL:eqinfo,user=root,password=mysql_123,host=localhost,port=3306,tables=deneme</SrcDataSource>
        <SrcSQL>SELECT ID,Lat,Lon,Mag FROM deneme</SrcSQL>
        <GeometryType>wkbPoint</GeometryType>
        <GeometryField encoding="PointFromColumns" x="lat" y="lon"/>
    </OGRVRTLayer>
</OGRVRTDataSource>


And I have faced the following
[root@sakura murat]# ogrinfo /var/www/html/map/agidata.ovf
ogrinfo: symbol lookup error: ogrinfo: undefined symbol:
_Z26OGRGeneralCmdLineProcessoriPPPci
[root@sakura murat]#





How can I fix this problem.
Thank you very much...
Murat
 
--
Open WebMail Project (http://openwebmail.org)


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From dmorissette at mapgears.com  Tue Aug 22 06:34:18 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetFeature crashing browser when used
	with	OGR_L_GetFeature
In-Reply-To: <20060822080717.65190.qmail@web52809.mail.yahoo.com>
References: <20060822080717.65190.qmail@web52809.mail.yahoo.com>
Message-ID: <44EADDAA.9020605@mapgears.com>

Hi Ben,

There may be a bug in the implementation of the PHP_OGR wrapper that 
frees the feature or does something illegal with it internally and that 
causes the crash.

Can you please post a bug with a complete test case (complete script and 
test dataset) in the GDAL bugzilla and make sure it is assigned to me? 
I'm not sure when we'll be able to look into it due to other priorities, 
but with a complete test case that will be easier.

Daniel



Ben Crane wrote:
> Hi all,
> 
> Daniel, thanx for the setfeature command, works like a
> charm and is surprisingly quick (no insult meant :).
> One thing though, now I have tried to select specific
> rows to re-write a feature. This does work, but in an
> odd way. What happens is that the browser tries to run
> the php script, I then get the standard Win XP crash
> message saying the PHP Script Interpreter has
> encountered an error and needs to close. The script
> then finishes, and then runs perfectly with the
> updated field present....very wierd.
> 
> Here is a section of code that is causing offense:
> 
> $tFeature = OGR_L_GetFeature( $hLayer, 1 );
> OGR_F_SetFieldString( $tFeature, 1, "test string" );
> OGR_L_SetFeature ($hLayer, $tFeature );
> 
> In particular, if I don't use $tFeature, then the
> browser doesn't crash, when I do try to select a
> specific feature, the SetFeature command causes the
> browser to crash. Any ideas...ironically it does work,
> but each time I get the Win XP IE "error, must close"
> message.
> 
> I've hunted around for other commands that may be
> required, but can't find any...I've even tried the
> Get_Fid command instead of manually assigning a
> feature ID. 
> 
> Thanx,
> Ben
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
http://www.mapgears.com/

From crane_ba at yahoo.com  Tue Aug 22 07:32:22 2006
From: crane_ba at yahoo.com (Ben Crane)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] SetFeature crashing browser when used with
	OGR_L_GetFeature
In-Reply-To: <44EADDAA.9020605@mapgears.com>
Message-ID: <20060822113223.88947.qmail@web52812.mail.yahoo.com>

Daniel,

Okay-no problems, I'll bring in the code, images of
error messages and my test dataset and report them on
bugzilla. I have to pick it up from home tonight, so
I'll post it tomorrow.

Ironically, despite the crash message, the function
works very well.

Ben

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From hydromap at gmail.com  Tue Aug 22 08:48:47 2006
From: hydromap at gmail.com (Shoaib Burq)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] ruby bindings proj4 stangeness
Message-ID: <60c6835d0608220548n472ae28sd97afb19860f7885@mail.gmail.com>

I have been banging my head against this for a few hours now with
little success. I have gdal-1.3.2 build with ruby bindings on gentoo.

So far while scripting all had been well until i got to proj4 import
and export functions in osr.

It appears that that osr ruby bindings aren't registering the proj4 functions.

the strange thing is everything else works fine. Also in python these
functions is working fine. Below is the run of the osr test suite to
demonstrate the problem

$ ruby ts_osr.rb
Loaded suite ts_osr
Started
...E........EE..
Finished in 0.077001 seconds.

  1) Error:
test_translate_nad_shift(TestOsrBasic):
NoMethodError: undefined method `set_towgs84' for
#<Gdal::Osr::SpatialReference:0xb7b2930c>
    ./tc_osr_basic.rb:109:in `test_translate_nad_shift'

  2) Error:
test_exponents(TestOsrProj4):
NoMethodError: undefined method `import_from_proj4' for
:Gdal::Osr::SpatialReference
    ./tc_osr_proj4.rb:18:in `test_exponents'

  3) Error:
test_k_0_flag(TestOsrProj4):
NoMethodError: undefined method `import_from_proj4' for
:Gdal::Osr::SpatialReference
    ./tc_osr_proj4.rb:9:in `test_k_0_flag'

16 tests, 79 assertions, 0 failures, 3 errors
------------------
So i am running gentoo. gdal was built using the most recent ebuild
(with ruby flags) and everything compiled fine.

any thoughts?
-shoaib

From jdjohnso at google.com  Tue Aug 22 09:04:07 2006
From: jdjohnso at google.com (John Johnson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: ECW compression - Extremely slow Linux performance -
	Re: ECW compression - Extremely slow Linux performance -
	POSSIBLE HACKISH SOLUTION (Andrew Larcombe
Message-ID: <d0b0f8b0608220604m20136d62xd388e74e27d32395@mail.google.com>

> Date: Mon, 21 Aug 2006 17:53:53 +0100
> From: Andrew Larcombe <andrew@andrewlarcombe.co.uk>
> Subject: Re: [Gdal-dev] ECW compression - Extremely slow Linux
>         performance     - POSSIBLE HACKISH SOLUTION
> To: gdal-dev@lists.maptools.org
> Message-ID: <44E9E521.7000304@andrewlarcomb
> e.co.uk>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Initial testing appears to show that running ECW conversion from
> gdal_translate in FWTools under the windows non-emulator, WINE, is
> 6xfaster than running it natively. I'm now getting translation times of
> around 10 seconds, rather than 60 seconds on my laptop. I can only
> assume wine's multithreading is less crippled than that provided by
> ERMapper?
>
>
We moved to a WINE based solution for stability and found the same
performace gain.

In addition to being extremely slow in the Linux version, it's also quite
buggy. Apparently the ERMapper folks really don't understand the posix
threading model. We can limp along for a while in a single threaded app
before crashing. But calling any ECW decode routines from a multithreaded
app running on a multiprocessor machine (even if all the calls are made from
a single thread) causes all kinds of corruption of IO data structures and
crashes quite quickly. I haven't been able to get the ERMapper folks to be
any more specific than "Yes, we have some threading problems on Unix. We're
looking into it.".

Once we tried the WINE solution we also noticed the speedups.

Enjoy your WINE. :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060822/b924e532/attachment.html
From warmerdam at pobox.com  Tue Aug 22 09:39:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] OGR functionality.
In-Reply-To: <20060822101106.M10741@deprem.gov.tr>
References: <20060822101106.M10741@deprem.gov.tr>
Message-ID: <44EB092C.5040001@pobox.com>

Murat BEYHAN wrote:
> Dear Friends;
> 
> I'm using mandrake linux limited edition 2005.
> And I'm MapServer user.
> For the connect MySQL by using ogr I have tried following connection
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name="aqidata">
>        
> <SrcDataSource>MYSQL:eqinfo,user=root,password=mysql_123,host=localhost,port=3306,tables=deneme</SrcDataSource>
>         <SrcSQL>SELECT ID,Lat,Lon,Mag FROM deneme</SrcSQL>
>         <GeometryType>wkbPoint</GeometryType>
>         <GeometryField encoding="PointFromColumns" x="lat" y="lon"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 
> And I have faced the following
> [root@sakura murat]# ogrinfo /var/www/html/map/agidata.ovf
> ogrinfo: symbol lookup error: ogrinfo: undefined symbol:
> _Z26OGRGeneralCmdLineProcessoriPPPci
> [root@sakura murat]#

Murat,

This problem isn't related to the .ovf file particulars.  It almost
certainly means your ogrinfo executable is using the wrong version of
libgdal.so (likely an older version of libgdal.so with a newer ogrinfo).

Please review your shared library path settings.  You may want to remove
an older libgdal.so, or perhaps set LD_LIBRARY_PATH to ensure the newer
library version gets picked up.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mhanson at photon.com  Tue Aug 22 12:39:09 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Complex Data Types
Message-ID: <0719BE42F22E0A46857DF72644EC5D702EC0D5@pj-exchange.photon.com>

I'm a little confused with regard to GDAL's handling of complex data types.  As there is no built in complex types for C++ what is RasterIO expecting as a buffer type when using the GDT_C* data types?   Would it simply be a pointer of twice the normal length?



Matt Hanson

 

Photon Research Associates, Inc.

A Raytheon Company

155 Fleet Street, Suite 13

Portsmouth, NH 03801

(603) 570-4854


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060822/937b1b11/attachment.html
From warmerdam at pobox.com  Tue Aug 22 15:24:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Complex Data Types
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D702EC0D5@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702EC0D5@pj-exchange.photon.com>
Message-ID: <44EB59E4.8030708@pobox.com>

Matt Hanson wrote:
> I'm a little confused with regard to GDAL's handling of complex data 
> types.  As there is no built in complex types for C++ what is RasterIO 
> expecting as a buffer type when using the GDT_C* data types?   Would it 
> simply be a pointer of twice the normal length?

Matt,

Essentially the complex data types are passed around as pairs of the
basic data type.  So an array of GDT_CInt16 would be an array of GInt16's
but with two values (real followed by imaginary) for each value.

So, the answer to your question is "yes".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dixie at gisshop.com  Tue Aug 22 07:50:22 2006
From: dixie at gisshop.com (Dixie Davis)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] question about GRIB
Message-ID: <44EAEF7E.3040701@gisshop.com>

Good morning.

Any chance that GDAL will access GRIB data in the near future?

Thank you.

-- 
~~~~~~~~~~~~~~~~~~
Dixie M Davis
The GIS Shop, INC.
dixie@gisshop.com
850/933-5359

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060822/1150f560/attachment.html
From pieter.vandebruggen at accent-inc.com  Mon Aug 21 15:51:21 2006
From: pieter.vandebruggen at accent-inc.com (Vande Bruggen, Pieter - Accent)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Coordinate Transformations
Message-ID: <F93B2B04711CFA459E0F85F3E7FB636C55DC77@accent-mailb.accent-inc.com>

I'm currently working on a system that needs to be able to receive
coordinate measurements from a variety of different GPS systems and
convert them back and forth between whatever format they were input in
and the coordinate system used by Virtual Earth (Mercator projection,
Lat/Lon).  Can anyone speak to the suitability of GDAL (or another tool)
for this task?

 

Thank you,

  - Pieter Vande Bruggen

 

Pieter Vande Bruggen

Office: (360) 882-4002 ext 212
Fax:    (360) 882-4006 
pieter.vandebruggen@accent-inc.com

 

Accent Business Services 
*  Professional Staffing 
*  Software Application Development 
*  Consulting 
www.accent-inc.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060821/07ed46de/attachment.html
From akrherz at iastate.edu  Tue Aug 22 17:55:40 2006
From: akrherz at iastate.edu (Daryl Herzmann)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] question about GRIB
In-Reply-To: <44EAEF7E.3040701@gisshop.com>
References: <44EAEF7E.3040701@gisshop.com>
Message-ID: <Pine.LNX.4.64.0608221654320.2607@akrherz-laptop.agron.iastate.edu>

On Tue, 22 Aug 2006, Dixie Davis wrote:

> Good morning.
>
> Any chance that GDAL will access GRIB data in the near future?

Hi Dixie,

I can't speak for GDAL, but an option is to move GRIB to Shapefile or 
NetCDF via 'degrib'

http://www.nws.noaa.gov/mdl/NDFD_GRIB2Decoder/

HTH,
   daryl

From shaun.kolomeitz at epa.qld.gov.au  Tue Aug 22 21:23:51 2006
From: shaun.kolomeitz at epa.qld.gov.au (Shaun Kolomeitz)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL and Solaris 10/sparc
Message-ID: <T7a472e6b5f9384f0e1b08@goshawk.env.qld.gov.au>


After months of searching, hacking and many hundreds of compile attempts I am still unable to successfully get GDAL to compile on a SPARC/Solaris 10 environment. No amount of searching lists and getting obscure possible fixes has worked.
My original aim was to get GDAL with ECW compiled and going, but for now I'd even settle for just Geotiff, HFA and JPEG. I'll just have to use WindoZe to do any other conversions.
Would someone mind sending me some settings from their working GDAL sparc/Solaris X configurations ?
Stuff like the system wide "crle", PATH and LD_LIBRARY_PATH settings for compilation and the versions of GCC/etc that actually work.
Any other suggestions that might help me get this going would be most welcome.

TIA,
Shaun


___________________________
Disclaimer

This e-mail, including attachments if any, has originated from a Queensland government agency and may contain information that is confidential, or covered by legal professional privilege, and is intended for the named recipient(s) only.  If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer system network.

Any form of disclosure, modification, distribution and/or publication of this e-mail, including attachments is prohibited.  Unless otherwise stated, this e-mail, including attachments represents the views of the sender and not the views of the Environmental Protection Agency.

Although this e-mail has been checked for the presence of computer viruses, the Environmental Protection Agency provides no warranty that all possible viruses have been detected and cleaned.  Any use of this e-mail could harm your computer system.
___________________________



From mateusz at loskot.net  Wed Aug 23 06:00:25 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Coordinate Transformations
In-Reply-To: <F93B2B04711CFA459E0F85F3E7FB636C55DC77@accent-mailb.accent-inc.com>
References: <F93B2B04711CFA459E0F85F3E7FB636C55DC77@accent-mailb.accent-inc.com>
Message-ID: <44EC2739.1000507@loskot.net>

Vande Bruggen, Pieter - Accent wrote:
> I?m currently working on a system that needs to be able to receive
> coordinate measurements from a variety of different GPS systems and
> convert them back and forth between whatever format they were input in
> and the coordinate system used by Virtual Earth (Mercator projection,
> Lat/Lon).  Can anyone speak to the suitability of GDAL (or another tool)
> for this task?

If you only need to do coordinates transformation, then
you can use PROJ.4 library - http://proj.maptools.org

GDAL/OGR offers some additional features to operate on
raster and vector datasets, like IO operations, vector geometry model,
etc. So, if you don't need these additional features, I suppose you
don't, but only coords transformation then PROJ.4 will suffice.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mhanson at photon.com  Wed Aug 23 09:39:43 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Complex Data Types
References: <0719BE42F22E0A46857DF72644EC5D702EC0D5@pj-exchange.photon.com>
	<44EB59E4.8030708@pobox.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D7027855F@pj-exchange.photon.com>

Ok, so if I defined my own complex structure
 
struct CInt16 {
   int16 real;
   int16 imag;
}
 
and declare a pointer for a 100x100 section:
CInt16 *cbuff = new CInt16[100*100]
 
I *think* I should be able to pass this to RasterIO using the GDT_CInt16 type, correct?
 
-matt
 

________________________________

From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tue 8/22/2006 3:24 PM
To: Matt Hanson
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Complex Data Types



Matt Hanson wrote:
> I'm a little confused with regard to GDAL's handling of complex data
> types.  As there is no built in complex types for C++ what is RasterIO
> expecting as a buffer type when using the GDT_C* data types?   Would it
> simply be a pointer of twice the normal length?

Matt,

Essentially the complex data types are passed around as pairs of the
basic data type.  So an array of GDT_CInt16 would be an array of GInt16's
but with two values (real followed by imaginary) for each value.

So, the answer to your question is "yes".

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org <http://osgeo.org/> 





From warmerdam at pobox.com  Wed Aug 23 09:56:18 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Complex Data Types
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D7027855F@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702EC0D5@pj-exchange.photon.com>
	<44EB59E4.8030708@pobox.com>
	<0719BE42F22E0A46857DF72644EC5D7027855F@pj-exchange.photon.com>
Message-ID: <44EC5E82.6060600@pobox.com>

Matt Hanson wrote:
> Ok, so if I defined my own complex structure
>  
> struct CInt16 {
>    int16 real;
>    int16 imag;
> }
>  
> and declare a pointer for a 100x100 section:
> CInt16 *cbuff = new CInt16[100*100]
>  
> I *think* I should be able to pass this to RasterIO using the GDT_CInt16 type, correct?

Matt,

Yes, this should work just fine

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ILucena at clarku.edu  Wed Aug 23 13:20:11 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Support for unit64
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45501C27810@Iris.ad.clarku.edu>

Hi there,

 

Just a few raster formats supports unsigned integer 64 bit (ex. HFD4 ->
DFNT_UINT64) and probably just a few data providers and application
developers use it, if any.

 

Does GDAL have plans to support it? Does anyone out there want/need it?

 

Best regards,

 

Ivan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060823/078abaeb/attachment.html
From ealpert at digitalglobe.com  Wed Aug 23 13:30:39 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] question about GRIB
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233969AB4@COMAIL01.digitalglobe.com>

An additional option is to use wgrib to dump the binary data and GDAL's
VRT to convert it to an image.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daryl Herzmann
Sent: Tuesday, August 22, 2006 3:56 PM
To: Dixie Davis
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] question about GRIB

On Tue, 22 Aug 2006, Dixie Davis wrote:

> Good morning.
>
> Any chance that GDAL will access GRIB data in the near future?

Hi Dixie,

I can't speak for GDAL, but an option is to move GRIB to Shapefile or 
NetCDF via 'degrib'

http://www.nws.noaa.gov/mdl/NDFD_GRIB2Decoder/

HTH,
   daryl
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Aug 23 13:33:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Support for unit64
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45501C27810@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45501C27810@Iris.ad.clarku.edu>
Message-ID: <44EC9183.4030108@pobox.com>

Ivan Lucena wrote:
> Hi there,
> 
>  
> 
> Just a few raster formats supports unsigned integer 64 bit (ex. HFD4 -> 
> DFNT_UINT64) and probably just a few data providers and application 
> developers use it, if any.
> 
>  
> 
> Does GDAL have plans to support it? Does anyone out there want/need it?

Ivan,

I have seen very very few applications of 32bit integers and I have no plan
to add 64bit integers as a pixel data type.  Note that properly adding a
pixel data type - especially one with a greater range than existing ones,
is quite a substantial job.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From naiara at mail.utexas.edu  Wed Aug 23 14:54:44 2006
From: naiara at mail.utexas.edu (Naiara Pinto)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] problem with gdalwarp
Message-ID: <9d4084070608231154h2c6b75c2u39897853a3bbfe8c@mail.gmail.com>

Hello,

I am using gdal 1.2.6-1.3 and I am having a problem with gdalwarp. I
am trying to project a Modis layer from lat long to Lambert Azymuthal
Equal Area. Here is what I tried:

gdalwarp -s_srs '+proj=longlat +datum=WGS84 +ellps=sphere +no_defs'
-t_srs '+proj=laea +lat_0=45 +lon_0=-100 +ellps=sphere +x_0=0 +y_0=0
+units=m +no_defs' -rn -te -115 29 -101 42 -srcnodata 251 -dstnodata
-9999 LatLon.NA.2001.tree.tif perc_tree.tif

But I am getting the error message:
ERROR 1: geocentric transformation missing z or ellps
ERROR 1: GDALSuggestedWarpOutput() failed because the passed
transformer failed.

Does anyone have any ideas why this is hapenning?

Thanks,

Naiara.

From warmerdam at pobox.com  Wed Aug 23 15:22:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] --mempreload, and virtualizing of s57/sdts/bsb
Message-ID: <44ECAB0C.5020800@pobox.com>

Folks,

At the request of a client, I have modified the s57, sdts and BSB drivers
to go through the VSI virtual API (VSI*L).  This means that the file
sets could come from alternate places, mostly notably 'in memory'.

I also add a '--mempreload <dir>' option for all programs using the
standard command argument processor (like ogrinfo and gdalinfo).  This
provides an easy way to preload files into memory for testing VSI*L access.
It will load all file in the named directory into RAM and assign them virtual
names under /vsimem/.

So the following would preload all files in the current directory (".") into
RAM and they would be then accessable with /vsimem/ names.

eg.
   ogrinfo -ro  --mempreload . /vsimem/1900CATD.DDF

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 23 15:28:50 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] problem with gdalwarp
In-Reply-To: <9d4084070608231154h2c6b75c2u39897853a3bbfe8c@mail.gmail.com>
References: <9d4084070608231154h2c6b75c2u39897853a3bbfe8c@mail.gmail.com>
Message-ID: <44ECAC72.9050307@pobox.com>

Naiara Pinto wrote:
> Hello,
> 
> I am using gdal 1.2.6-1.3 and I am having a problem with gdalwarp. I
> am trying to project a Modis layer from lat long to Lambert Azymuthal
> Equal Area. Here is what I tried:
> 
> gdalwarp -s_srs '+proj=longlat +datum=WGS84 +ellps=sphere +no_defs'
> -t_srs '+proj=laea +lat_0=45 +lon_0=-100 +ellps=sphere +x_0=0 +y_0=0
> +units=m +no_defs' -rn -te -115 29 -101 42 -srcnodata 251 -dstnodata
> -9999 LatLon.NA.2001.tree.tif perc_tree.tif
> 
> But I am getting the error message:
> ERROR 1: geocentric transformation missing z or ellps
> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
> transformer failed.
> 
> Does anyone have any ideas why this is hapenning?

Naiara,

That's a pretty old version, so it's hard for me to know what might be
causing the problem exactly.  In particular, this problem is actually
down in PROJ.4, though it might relate to the arguments passed by GDAL.

Note '+datum=WGS84 +ellps=sphere' isn't really meaningful.  They conflict.

I'd suggest trying:

  gdalwarp -s_srs '+proj=longlat +datum=WGS84'
    -t_srs '+proj=laea +lat_0=45 +lon_0=-100 +datum=WGS84 +x_0=0 +y_0=0
    +units=m +no_defs' -rn -te -115 29 -101 42 -srcnodata 251 -dstnodata
    -9999 LatLon.NA.2001.tree.tif perc_tree.tif

In this example you are telling gdalwarp that everything is WGS84, so
it should avoid any attempts at datum shifts.  Alternatively, you might
replace +datum=WGS84 with +ellps=sphere.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sp_ml at sourcepole.com  Wed Aug 23 16:31:35 2006
From: sp_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Add schema support to PG driver
Message-ID: <200608232231.36055.sp_ml@sourcepole.com>

I'm going to implement the proposed schema support for the PG driver:
http://bugzilla.remotesensing.org/show_bug.cgi?id=522#c1

[...]
But my idea is to add a -lco schema=<schemaname>. Now you can
insert this <schemaname> into geometry_columns.f_schema_name for the layer
and you can extent the SQL inserts like insert into <schemaname>.<tablename>
(wkb_geometry,.....) values (wkb_geometry,....);
[...]

Are there any concerns about this simple approach?

Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From yan at seiner.com  Thu Aug 24 10:08:21 2006
From: yan at seiner.com (Yan Seiner)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
Message-ID: <44EDB2D5.4080906@seiner.com>

I am trying to cross-compile gdal for OpenZaurus.  I am using the 
development toolchain (3.5.4.2-rc2).  The build fails with:

|  arm-linux-g++ -march=armv5te -mtune=xscale -Wall 
-I/home/local/zaurus/tmp/staging/arm-linux/include 
-fexpensive-optimizations -fomit-frame-pointer -frename-registers -O2 
-fpermissive -DOGR_ENABLED 
-I/home/local/zaurus/tmp/staging/arm-linux/include 
-I/home/local/zaurus/tmp/work/armv5te-linux/gdal-1.3.2-r1/gdal-1.3.2/port 
-c cpl_strtod.cpp  -fPIC -DPIC -o .libs/cpl_strtod.o
| cpl_strtod.cpp:239: error: declaration of `double nan(const char*)' 
throws different exceptions
| /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225: 
error: than previous declaration `double nan(const char*) throw ()'
| cpl_strtod.cpp:249: error: declaration of `float nanf(const char*)' 
throws different exceptions
| /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225: 
error: than previous declaration `float nanf(const char*) throw ()'

Can anyone shed some light on this?  I am pretty much out of my depth on 
these types of errors....

--Yan

From mateusz at loskot.net  Thu Aug 24 10:54:59 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDB2D5.4080906@seiner.com>
References: <44EDB2D5.4080906@seiner.com>
Message-ID: <44EDBDC3.4010903@loskot.net>

Yan Seiner wrote:
> I am trying to cross-compile gdal for OpenZaurus.  I am using the 
> development toolchain (3.5.4.2-rc2).  The build fails with:
> 
> |  arm-linux-g++ -march=armv5te -mtune=xscale -Wall 
> -I/home/local/zaurus/tmp/staging/arm-linux/include 
> -fexpensive-optimizations -fomit-frame-pointer -frename-registers -O2
>  -fpermissive -DOGR_ENABLED 
> -I/home/local/zaurus/tmp/staging/arm-linux/include 
> -I/home/local/zaurus/tmp/work/armv5te-linux/gdal-1.3.2-r1/gdal-1.3.2/port
>  -c cpl_strtod.cpp  -fPIC -DPIC -o .libs/cpl_strtod.o |
> cpl_strtod.cpp:239: error: declaration of `double nan(const char*)' 
> throws different exceptions |
> /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225:
>  error: than previous declaration `double nan(const char*) throw ()' 
> | cpl_strtod.cpp:249: error: declaration of `float nanf(const char*)'
>  throws different exceptions |
> /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225:
>  error: than previous declaration `float nanf(const char*) throw ()'
> 
> Can anyone shed some light on this?  I am pretty much out of my depth
> on these types of errors....

Yan,

toolchain 3.5.4 includes gcc 2.95, am I right?
This compiler is first quite strict in C++ code compilation.

Could you replace lines 175 - 182 with following:

#include <cctype>
#include <cerrno>
#include <cfloat>
#include <climits>
#include <cmath>
#include <cstdlib> // this is most important!
#include <cstring>

Please, try to compile it now.
If you will get errors about declarations not found, please add
using namespace std;
below these includes.

CPL code is build using C++ compiler, but it includes C headers.
AFAIR, there are some issues in gcc 2.95 and may be 3.0 with
mixing C and C++ headers.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Aug 24 11:01:58 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDB2D5.4080906@seiner.com>
References: <44EDB2D5.4080906@seiner.com>
Message-ID: <44EDBF66.3050708@pobox.com>

Yan Seiner wrote:
> I am trying to cross-compile gdal for OpenZaurus.  I am using the 
> development toolchain (3.5.4.2-rc2).  The build fails with:
> 
> |  arm-linux-g++ -march=armv5te -mtune=xscale -Wall 
> -I/home/local/zaurus/tmp/staging/arm-linux/include 
> -fexpensive-optimizations -fomit-frame-pointer -frename-registers -O2 
> -fpermissive -DOGR_ENABLED 
> -I/home/local/zaurus/tmp/staging/arm-linux/include 
> -I/home/local/zaurus/tmp/work/armv5te-linux/gdal-1.3.2-r1/gdal-1.3.2/port 
> -c cpl_strtod.cpp  -fPIC -DPIC -o .libs/cpl_strtod.o
> | cpl_strtod.cpp:239: error: declaration of `double nan(const char*)' 
> throws different exceptions
> | /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225: 
> error: than previous declaration `double nan(const char*) throw ()'
> | cpl_strtod.cpp:249: error: declaration of `float nanf(const char*)' 
> throws different exceptions
> | /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225: 
> error: than previous declaration `float nanf(const char*) throw ()'
> 
> Can anyone shed some light on this?  I am pretty much out of my depth on 
> these types of errors....

Yan,

The problem appears to be that cpl_strtod.cpp is providing a declaration
for nan() that conflicts with the system one.  The code tries to avoid
this by only declaring it if the HAVE_DECL_NAN is unset or zero in
cpl_config.h (as set by configure), but it seems that configure on your
platform has not correctly set this item.

I don't know how to fix configure, but the quick fix for you would be
to edit gdal/port/cpl_config.h and change

#define HAVE_DECL_NAN 0

to

#define HAVE_DECL_NAN 1

I suspect the problem relates to cross compiling, something I have never
tried myself with GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Aug 24 11:17:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL and Solaris 10/sparc
In-Reply-To: <T7a472e6b5f9384f0e1b08@goshawk.env.qld.gov.au>
References: <T7a472e6b5f9384f0e1b08@goshawk.env.qld.gov.au>
Message-ID: <44EDC2FD.30609@pobox.com>

Shaun Kolomeitz wrote:
> After months of searching, hacking and many hundreds of compile attempts I am still unable to successfully get GDAL to compile on a SPARC/Solaris 10 environment. No amount of searching lists and getting obscure possible fixes has worked.
> My original aim was to get GDAL with ECW compiled and going, but for now I'd even settle for just Geotiff, HFA and JPEG. I'll just have to use WindoZe to do any other conversions.
> Would someone mind sending me some settings from their working GDAL sparc/Solaris X configurations ?
> Stuff like the system wide "crle", PATH and LD_LIBRARY_PATH settings for compilation and the versions of GCC/etc that actually work.
> Any other suggestions that might help me get this going would be most welcome.

Shaun,

Perhaps it would be best to try and meet in IRC (#gdal on irc.freenode.net)
to try and debug your build problems on Solaris.  Alternatively, if you can
provide temporary ssh access to me, I could likely build it.

I don't think there should be any great difficulty in building on Solaris
as long as reasonably functional tool chain is available.  I would hesitate
to take on building the ECW libraries there though.  I'm sure it is possible,
but perhaps not easy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yan at seiner.com  Thu Aug 24 12:40:46 2006
From: yan at seiner.com (Yan Seiner)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDBDC3.4010903@loskot.net>
References: <44EDB2D5.4080906@seiner.com> <44EDBDC3.4010903@loskot.net>
Message-ID: <44EDD68E.7010004@seiner.com>

Mateusz Loskot wrote:

>toolchain 3.5.4 includes gcc 2.95, am I right?
>This compiler is first quite strict in C++ code compilation.
>  
>
Actually it uses 3.3.4, but your fix works. :-)

>Could you replace lines 175 - 182 with following:
>
>#include <cctype>
>#include <cerrno>
>#include <cfloat>
>#include <climits>
>#include <cmath>
>#include <cstdlib> // this is most important!
>#include <cstring>
>
>Please, try to compile it now.
>If you will get errors about declarations not found, please add
>using namespace std;
>below these includes.
>
>  
>
Now I get a link failure at the very end:

| arm-linux-g++ -march=armv5te -mtune=xscale -shared -nostdlib 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/crti.o 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/crtbeginS.o 
.libs/libgdal.la-2.o  -Wl,--rpath 
-Wl,/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib 
-Wl,--rpath 
-Wl,/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib 
-lpng -lz -lrt -ldl 
-L/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4 
-L/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/libstdc++.so 
-lm -lc -lgcc_s 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/crtendS.o 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/crtn.o  
-march=armv5te -mtune=xscale -Wl,-soname -Wl,libgdal.so.1 -o 
.libs/libgdal.so.1.10.0
| 
/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/bin/ld: 
cannot find -lpng
| collect2: ld returned 1 exit status
| make[1]: *** [libgdal.la] Error 1

Is there any reason why gdal is using -nostdlib?  Or is that an artifact 
of the OZ toolchain?

(cc to openzaurus - can someone from the OZ camp help me out?  How do I 
fix this?  I treid adding a LDFLAGS= to the bb file but that didn't 
help. The gdal configure doesn't recognize --with-extra-libs - but I 
shouldn't have to tell it where to find the standard crosschain libs...)

Thanks for all the help,

--Yan


From mateusz at loskot.net  Thu Aug 24 14:14:34 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDD68E.7010004@seiner.com>
References: <44EDB2D5.4080906@seiner.com> <44EDBDC3.4010903@loskot.net>
	<44EDD68E.7010004@seiner.com>
Message-ID: <44EDEC8A.8080408@loskot.net>

Yan Seiner wrote:
> Mateusz Loskot wrote:
> 
>> toolchain 3.5.4 includes gcc 2.95, am I right?
>> This compiler is first quite strict in C++ code compilation.
>>  
>>
> Actually it uses 3.3.4, but your fix works. :-)

Yes, I suppose it should work, at least to make it compilable.

Frank,

Do you mind to change all includes of C headers to C++ headers?
As shown in C++ Standard/17.4.1.2 Headers, in Table 13: C++ Headers for
C Library Facilities. I'm eager to apply these changes.
I believe it will increase portability, as it happens Yan's case.

>> Could you replace lines 175 - 182 with following:
>>
>> #include <cctype>
>> #include <cerrno>
>> #include <cfloat>
>> #include <climits>
>> #include <cmath>
>> #include <cstdlib> // this is most important!
>> #include <cstring>
>>
>> Please, try to compile it now.
>> If you will get errors about declarations not found, please add
>> using namespace std;
>> below these includes.
>>
>>  
>>
> Now I get a link failure at the very end:
> 
> | arm-linux-g++ -march=armv5te -mtune=xscale -shared -nostdlib
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/crti.o
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/crtbeginS.o
> .libs/libgdal.la-2.o  -Wl,--rpath
> -Wl,/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib
> -Wl,--rpath
> -Wl,/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib
> -lpng -lz -lrt -ldl
> -L/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4
> -L/home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/libstdc++.so
> -lm -lc -lgcc_s
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/crtendS.o
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/lib/crtn.o 
> -march=armv5te -mtune=xscale -Wl,-soname -Wl,libgdal.so.1 -o
> .libs/libgdal.so.1.10.0
> |
> /home/local/zaurus/tmp/cross/lib/gcc/arm-linux/3.4.4/../../../../arm-linux/bin/ld:
> cannot find -lpng
> | collect2: ld returned 1 exit status
> | make[1]: *** [libgdal.la] Error 1
> 
> Is there any reason why gdal is using -nostdlib?  Or is that an artifact
> of the OZ toolchain?


I suppose GDAL tries to exclude all unused C++ stanard system libraries,
but link only with files specified to linker.
But I may be wrong.

> (cc to openzaurus - can someone from the OZ camp help me out?  How do I
> fix this?  I treid adding a LDFLAGS= to the bb file but that didn't
> help. The gdal configure doesn't recognize --with-extra-libs - but I
> shouldn't have to tell it where to find the standard crosschain libs...)

Sorry, I can't help you here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Aug 24 14:24:24 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDBF66.3050708@pobox.com>
References: <44EDB2D5.4080906@seiner.com> <44EDBF66.3050708@pobox.com>
Message-ID: <44EDEED8.8030906@loskot.net>

Frank Warmerdam wrote:
> Yan Seiner wrote:
>> I am trying to cross-compile gdal for OpenZaurus.  I am using the 
>> development toolchain (3.5.4.2-rc2).  The build fails with:
>> 
>> |  arm-linux-g++ -march=armv5te -mtune=xscale -Wall 
>> -I/home/local/zaurus/tmp/staging/arm-linux/include 
>> -fexpensive-optimizations -fomit-frame-pointer -frename-registers 
>> -O2 -fpermissive -DOGR_ENABLED 
>> -I/home/local/zaurus/tmp/staging/arm-linux/include 
>> -I/home/local/zaurus/tmp/work/armv5te-linux/gdal-1.3.2-r1/gdal-1.3.2/port
>>  -c cpl_strtod.cpp  -fPIC -DPIC -o .libs/cpl_strtod.o | 
>> cpl_strtod.cpp:239: error: declaration of `double nan(const char*)'
>>  throws different exceptions | 
>> /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225:
>>  error: than previous declaration `double nan(const char*) throw 
>> ()' | cpl_strtod.cpp:249: error: declaration of `float nanf(const 
>> char*)' throws different exceptions | 
>> /home/local/zaurus/tmp/staging/arm-linux/include/bits/mathcalls.h:225:
>>  error: than previous declaration `float nanf(const char*) throw 
>> ()'
>> 
>> Can anyone shed some light on this?  I am pretty much out of my 
>> depth on these types of errors....
> 
> Yan,
> 
> The problem appears to be that cpl_strtod.cpp is providing a 
> declaration for nan() that conflicts with the system one.  The code 
> tries to avoid this by only declaring it if the HAVE_DECL_NAN is 
> unset or zero in cpl_config.h (as set by configure), but it seems 
> that configure on your platform has not correctly set this item.

Frank,

My suggestion about replacing <math.h> to <cmath> fix this ambiguity,
because the latter puts everything to std:: namespace.
Though, nan is not a standard math function for C++.

Another option is there are still some bugs in gcc/libstdc++,
especially in older versions. I remember there were problems like mixing
C and C++ declaration in global space instead of std.

Yan, I'd suggest you to ask on gcc/libstdc++ mailing list too.

Here is one of my report about similar problem:
http://gcc.gnu.org/ml/libstdc++/2006-02/msg00086.html

and Joe Buck explains:

-----
It appears that the problem is in the headers; despite the ISO
requirement, doing

#include <cstring>

on a GNU/Linux RHEL 3 system provides the C-style declaration, for
versions 3.2.3, 4.0, and 4.1-pre.
-----

So, there still may be some similar issues.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Aug 24 15:07:11 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDEC8A.8080408@loskot.net>
References: <44EDB2D5.4080906@seiner.com>
	<44EDBDC3.4010903@loskot.net>	<44EDD68E.7010004@seiner.com>
	<44EDEC8A.8080408@loskot.net>
Message-ID: <44EDF8DF.8010609@pobox.com>

Mateusz Loskot wrote:
> Frank,
> 
> Do you mind to change all includes of C headers to C++ headers?
> As shown in C++ Standard/17.4.1.2 Headers, in Table 13: C++ Headers for
> C Library Facilities. I'm eager to apply these changes.
> I believe it will increase portability, as it happens Yan's case.

Mateusz,

Well, I have an inherent mistrust of "modern" C++ services, and a fear
that we will find them poorly deployed on some platforms.  I don't
really understand why the regular version of stuff doesn't work.

I'd be ok with change cpl_strtod.cpp as you suggest, and we can see how
it plays out as people try it.  Sort of an experiment.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yan at seiner.com  Thu Aug 24 15:20:38 2006
From: yan at seiner.com (Yan Seiner)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDEED8.8030906@loskot.net>
References: <44EDB2D5.4080906@seiner.com> <44EDBF66.3050708@pobox.com>
	<44EDEED8.8030906@loskot.net>
Message-ID: <44EDFC06.2050400@seiner.com>

Mateusz Loskot wrote:
> Yan, I'd suggest you to ask on gcc/libstdc++ mailing list too.
>
> Here is one of my report about similar problem:
> http://gcc.gnu.org/ml/libstdc++/2006-02/msg00086.html
>
> and Joe Buck explains:
>
> -----
> It appears that the problem is in the headers; despite the ISO
> requirement, doing
>
> #include <cstring>
>
> on a GNU/Linux RHEL 3 system provides the C-style declaration, for
> versions 3.2.3, 4.0, and 4.1-pre.
> -----
>
>   
OOOOhhhhh......  I spent about a week fighting similar errors for 
another embedded project....  Turned out that platform was running 
4.1-pre, which (I guess) is completely broken for cross-compiling 
purposes....  I wish I had seen that message before I spent that week 
bashing my head against the wall.  :-)

gcc 3.4.4 seems to be most stable for cross-compiling.

Anyway, gdal is built for OpenZaurs 3.5.4.2-rc2  :-)

Available at http://www.seiner.com/zaurus if anyone needs it.

--Yan


From mateusz at loskot.net  Thu Aug 24 15:41:44 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: [Shapelib] shapelib.dll in a Pocket PC
In-Reply-To: <20060824174747.91614.qmail@web26814.mail.ukl.yahoo.com>
References: <20060824174747.91614.qmail@web26814.mail.ukl.yahoo.com>
Message-ID: <44EE00F8.4010908@loskot.net>

Daniel de la Cuesta wrote:
> First of all, thank you for your response. I have done what you say and
> I have added the sources of http://mateusz.loskot.net/tmp/shapelibce.zip
> to my dll Project but when I build the solution i get the following error:
> 
> fatal error C1010: unexpected end of file while looking for precompiled
> header. Did you forget to add '#include "stdafx.h"' to your source? 

Daniel.

I suppose you created DLL project with precompiled headers support.
Go to project properties dialog box and next to precompiled headers
select to not to use precompiled headers in the DLL project.

> I am using VS 2005. Maybe it doesn?t support C code.

VS  = Visual Studio but this si a bunch of compilers: C#, VB, VC++, etc.
So, I'm not sure I understand the problem here.


> Do I have to use a
> previous version os VS to generate de .dll for Pocket Pc?

You need to use Visual C++ compiler in version 6.0 or any above,
7.0, 7.1 or 8.0

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Aug 24 15:53:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDF9E6.1050003@loskot.net>
References: <44EDB2D5.4080906@seiner.com>
	<44EDBDC3.4010903@loskot.net>	<44EDD68E.7010004@seiner.com>
	<44EDEC8A.8080408@loskot.net> <44EDF8DF.8010609@pobox.com>
	<44EDF9E6.1050003@loskot.net>
Message-ID: <44EE03C1.7040605@pobox.com>

Mateusz Loskot wrote:
> Frank,
> 
> There is nothing "modern" in my proposal.
 > This is a Standard ANSI C++, nothing else.

Mateusz,

Note, I'm partly mocking my own "antiqueness". To me 1996 ANSI Standard
C++ is modern. :-)

> This is from 1996, so it's nothing modern, the I can't see any problems
> on clients side, because I believe they build C++ code with compilers
> newer than pre-C++, from before 1996.
> 
> So, why not to compile CPL with C compiler, that would be safer and more
> portable, than rely on non-standard C++.

Well, one thing we would need to keep in mind if we made a big move
to using C++ include files is that C applications *and* C++ code
needs to include the C include files like gdal.h, ogr_api.h, and so
forth, and currently they share at lot of include files with the C++
side (notably cpl_port.h).  So we would need to approach this casefully.
Perhaps cpl_port.h would include distinct include files depending on
whether C++ compilation is being used.

I'm not adverse to contemplating such a change, but I think it deserves
an RFC setting out the changes, issues and so forth that will apply.  And
of course it would require someone to do the work, and it isn't likely to
be me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Aug 24 16:10:34 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: [Shapelib] shapelib.dll in a Pocket PC
In-Reply-To: <44EE00F8.4010908@loskot.net>
References: <20060824174747.91614.qmail@web26814.mail.ukl.yahoo.com>
	<44EE00F8.4010908@loskot.net>
Message-ID: <44EE07BA.8090304@loskot.net>

I'm sorry for this post, I missed the address.
It should reach the shapelib list.

Cheers
Mat

Mateusz Loskot wrote:
> Daniel de la Cuesta wrote:
>> First of all, thank you for your response. I have done what you say and
>> I have added the sources of http://mateusz.loskot.net/tmp/shapelibce.zip
>> to my dll Project but when I build the solution i get the following error:
>>
>> fatal error C1010: unexpected end of file while looking for precompiled
>> header. Did you forget to add '#include "stdafx.h"' to your source? 
> 
> Daniel.
> 
> I suppose you created DLL project with precompiled headers support.
> Go to project properties dialog box and next to precompiled headers
> select to not to use precompiled headers in the DLL project.
> 
>> I am using VS 2005. Maybe it doesn?t support C code.
> 
> VS  = Visual Studio but this si a bunch of compilers: C#, VB, VC++, etc.
> So, I'm not sure I understand the problem here.
> 
> 
>> Do I have to use a
>> previous version os VS to generate de .dll for Pocket Pc?
> 
> You need to use Visual C++ compiler in version 6.0 or any above,
> 7.0, 7.1 or 8.0
> 
> Cheers


-- 
Mateusz Loskot
http://mateusz.loskot.net

From ortelius at gmail.com  Thu Aug 24 16:23:38 2006
From: ortelius at gmail.com (Jeffrey Johnson)
Date: Wed Nov 21 11:50:19 2007
Subject: Fwd: [Gdal-dev] question about GRIB
In-Reply-To: <e01a5a00608241323yedfa108j9772a3dbb01eba1d@mail.gmail.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233969AB4@COMAIL01.digitalglobe.com>
	<e01a5a00608241323yedfa108j9772a3dbb01eba1d@mail.gmail.com>
Message-ID: <e01a5a00608241323v39c5a73dg356d96e156f7dc3f@mail.gmail.com>

Has anyone done anything with GRIB data and mapserver using this
degrib library and shapefiles or netcdf? I have considered starting a
project like this and wondered if anyone had suggestions.

Thanks,

Jeff

On 8/23/06, Ethan Alpert <ealpert@digitalglobe.com> wrote:
> An additional option is to use wgrib to dump the binary data and GDAL's
> VRT to convert it to an image.
>
> -e
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daryl Herzmann
> Sent: Tuesday, August 22, 2006 3:56 PM
> To: Dixie Davis
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] question about GRIB
>
> On Tue, 22 Aug 2006, Dixie Davis wrote:
>
> > Good morning.
> >
> > Any chance that GDAL will access GRIB data in the near future?
>
> Hi Dixie,
>
> I can't speak for GDAL, but an option is to move GRIB to Shapefile or
> NetCDF via 'degrib'
>
> http://www.nws.noaa.gov/mdl/NDFD_GRIB2Decoder/
>
> HTH,
>    daryl
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From rsignell at usgs.gov  Thu Aug 24 16:40:33 2006
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: NetCDF.. the world turned upside-down
In-Reply-To: <443C0125.1060703@pobox.com>
References: <b0d146420604102328g32a8c57ake37142292d21db45@mail.gmail.com>
	<443C0125.1060703@pobox.com>
Message-ID: <44EE0EC1.4020102@usgs.gov>

GDAL-gurus,

I just ran into the upside-down NetCDF issue myself- on a perfectly 
valid CF-compliant file, OpenEV (FWTOOLS 1.0.5) displays it upside down.

For GMT users, this is particularly annoying:  if they are using the old 
non CF-compliant NetCDF grid format, OpenEV will display their grids 
correctly, while if they use the new CF-compliant NetCDF grid form, 
OpenEV will display them upside down.

I think the GDAL driver should be made more flexible so it reads the 
lat/lon data from the coordinate variables and determines which way is 
"up".  The CF convention does not specify positive up or positive down 
-- it just associates the values found in the coordinate variables with 
the dependent variable and clients are expected to do this.  Clients 
like "ncview" and IDV display these data correctly.

An example CF-compliant file that displays correctly in NCVIEW and IDV, 
but is upside down in OpenEV is at:

http://stellwagen.er.usgs.gov/rps/share/vs_new.nc

-Rich

-- 
Richard P. Signell
U.S. Geological Survey       Phone: (508) 457-2229
384 Woods Hole Road          Fax:   (508) 457-2310
Woods Hole, MA  02543-1598


Frank Warmerdam wrote:
> Emilio Mayorga wrote:
> 
>> "Reversed" y-axis datasets are quite common in netcdf (Ferret, for
>> example, pretty much expects that convention -- or at least it did a
>> couple of years ago...). It's not required, but it's probably the
>> dominant convention. I think it boils down to the common use of matrix
>> math in geophysics; the y-axis is seen as positive-up. Unlike the
>> GIS/imagery/"raster" world, where the vertical dimension is
>> interpreted as increasing from the top down.
>>
>> Having gdal_translate and other gdal utilities interpret flipped
>> netcdf y-axis automatically (or providing an optional argument) would
>> be very useful.
> 
> 
> Emilio,
> 
> The normal (and in my opinion proper) process for "upside down" datasets
> is for GDAL to associate a geotransform with the dataset that indicates
> the orientation.  However, I am not adverse to having the netCDF driver
> take care of flipping the data internally if Denis would like to address
> that.  I believe I did do this in the DODS driver since it was otherwise
> very hard to exploit the data in most GDAL based applications.
> 
> Best regards,


From mateusz at loskot.net  Thu Aug 24 17:03:56 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] building gdal for OpenZaurus
In-Reply-To: <44EDFC06.2050400@seiner.com>
References: <44EDB2D5.4080906@seiner.com>
	<44EDBF66.3050708@pobox.com>	<44EDEED8.8030906@loskot.net>
	<44EDFC06.2050400@seiner.com>
Message-ID: <44EE143C.1090602@loskot.net>

Yan Seiner wrote:
> Mateusz Loskot wrote:
>> Yan, I'd suggest you to ask on gcc/libstdc++ mailing list too.
>>
>> Here is one of my report about similar problem:
>> http://gcc.gnu.org/ml/libstdc++/2006-02/msg00086.html
>>
>> and Joe Buck explains:
>>
>> -----
>> It appears that the problem is in the headers; despite the ISO
>> requirement, doing
>>
>> #include <cstring>
>>
>> on a GNU/Linux RHEL 3 system provides the C-style declaration, for
>> versions 3.2.3, 4.0, and 4.1-pre.
>> -----
>>
>>   
> OOOOhhhhh......  I spent about a week fighting similar errors for
> another embedded project....  Turned out that platform was running
> 4.1-pre, which (I guess) is completely broken for cross-compiling
> purposes....

and (I guess) for mixing C/C++ stuff.

> I wish I had seen that message before I spent that week
> bashing my head against the wall.  :-)

I know that feeling :-)

> gcc 3.4.4 seems to be most stable for cross-compiling.

Yes, I agree.

> Anyway, gdal is built for OpenZaurs 3.5.4.2-rc2  :-)
>
> Available at http://www.seiner.com/zaurus if anyone needs it.

Great!
I see GDAL is on the right way to conquest the mobile market :-)


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Martin.Spott at mgras.net  Thu Aug 24 17:40:21 2006
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL and Solaris 10/sparc
References: <T7a472e6b5f9384f0e1b08@goshawk.env.qld.gov.au>
	<44EDC2FD.30609@pobox.com>
Message-ID: <ecl6c5$183s$1@osprey.mgras.de>

Frank Warmerdam wrote:
> Shaun Kolomeitz wrote:

> > My original aim was to get GDAL with ECW compiled and going, but
> > for now I'd even settle for just Geotiff, HFA and JPEG.

> I don't think there should be any great difficulty in building on Solaris
> as long as reasonably functional tool chain is available.

I _did_ build GDAL on Solaris, although I took Solaris8 to build for
Solaris10, as I already moved to SunStudio on Solaris10 (still having
Solaris8/GCC on another machine) which got me into severe trouble.
Solaris10 has sone unusual places for the toolchain, like /usr/sfw/,
you might have to add these places during 'configure'.

My primary goal was to stuff Shapefiles anv VMap0/1 data into a PostGIS
database, so I removed some unneeded stuff like SWIG bindings:


GDAL is now configured for sparc-sun-solaris2.8

  Installation directory:    /opt/GRASS
  C compiler:                gcc -mcpu=ultrasparc -mtune=ultrasparc -O3 
  C++ compiler:              g++ -mcpu=ultrasparc -mtune=ultrasparc -O3 

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            no
  LIBPNG support:            internal
  LIBTIFF support:           internal
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  LIBGIF support:            internal
  OGDI support:              yes
  HDF4 support:              no
  HDF5 support:              no
  KAKADU support:            no
  JASPER support:            no
  ECW support:               no
  MrSID support:             no
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            no
  ODBC support:              no
  OCI support:               no
  DODS support:              no
  SQLite support:            no
  GEOS support:              yes

  Statically link PROJ.4:    yes

  Traditional Python:        no
  NG SWIG Bindings:          

  enable OGR building:       yes


Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From shaun.kolomeitz at epa.qld.gov.au  Thu Aug 24 19:03:43 2006
From: shaun.kolomeitz at epa.qld.gov.au (Shaun Kolomeitz)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL and Solaris 10/sparc
Message-ID: <T7a50fadf6f9384f0e1b08@goshawk.env.qld.gov.au>

Thanks Frank,

I had a quick look at getting the IRC client to go, but our work proxy can be a bit difficult to get around.
I will have a look at getting access via SSH, again this is usually not permitted because of security concerns. Perhaps if I could give them a specific client address, and then decide on a time window to allow you "through" our firewall we could have more success.
I suspect that we have everything needed to do a successful build, but I am not entirely sure of what order things should be in. The 32 vs 64 bit build is puzzling me as to which PATH and LD_LIBRARY settings are needed plus which system wide settings should apply.
I've had success in the past in building ECW as a separate (standalone) entity, but not in getting it to link-in with GDAL. I've also managed to get an older version of GDAL (v1.2) working. Bugger me if I can remember how I did it now !
I'll contact our network people and see if I can get access via SSH granted.

Regards,
Shaun

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com]
> Sent: Friday, 25 August 2006 1:17 AM
> To: Shaun Kolomeitz
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] GDAL and Solaris 10/sparc
> 
> 
> Shaun Kolomeitz wrote:
> > After months of searching, hacking and many hundreds of 
> compile attempts I am still unable to successfully get GDAL 
> to compile on a SPARC/Solaris 10 environment. No amount of 
> searching lists and getting obscure possible fixes has worked.
> > My original aim was to get GDAL with ECW compiled and 
> going, but for now I'd even settle for just Geotiff, HFA and 
> JPEG. I'll just have to use WindoZe to do any other conversions.
> > Would someone mind sending me some settings from their 
> working GDAL sparc/Solaris X configurations ?
> > Stuff like the system wide "crle", PATH and LD_LIBRARY_PATH 
> settings for compilation and the versions of GCC/etc that 
> actually work.
> > Any other suggestions that might help me get this going 
> would be most welcome.
> 
> Shaun,
> 
> Perhaps it would be best to try and meet in IRC (#gdal on 
> irc.freenode.net)
> to try and debug your build problems on Solaris.  
> Alternatively, if you can
> provide temporary ssh access to me, I could likely build it.
> 
> I don't think there should be any great difficulty in 
> building on Solaris
> as long as reasonably functional tool chain is available.  I 
> would hesitate
> to take on building the ECW libraries there though.  I'm sure 
> it is possible,
> but perhaps not easy.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
http://osgeo.org



___________________________
Disclaimer

This e-mail, including attachments if any, has originated from a Queensland government agency and may contain information that is confidential, or covered by legal professional privilege, and is intended for the named recipient(s) only.  If you have received this message in error, you are asked to inform the sender as quickly as possible and delete this message and any copies of this message from your computer system network.

Any form of disclosure, modification, distribution and/or publication of this e-mail, including attachments is prohibited.  Unless otherwise stated, this e-mail, including attachments represents the views of the sender and not the views of the Environmental Protection Agency.

Although this e-mail has been checked for the presence of computer viruses, the Environmental Protection Agency provides no warranty that all possible viruses have been detected and cleaned.  Any use of this e-mail could harm your computer system.
___________________________



From frederic.claudel at magellium.fr  Fri Aug 25 09:03:31 2006
From: frederic.claudel at magellium.fr (Frederic Claudel)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] VSI file open/close issue
In-Reply-To: <T7a50fadf6f9384f0e1b08@goshawk.env.qld.gov.au>
Message-ID: <00f501c6c846$dde0c900$a401a8c0@pc164>


When using VSI* or VSI*L functions, it seems impossible to mix both, which
means opening a file using VSIFOpen then closing it with VSIFCloseL.

Hence my question : how can I tell them apart ? In a new GDAL driver where I
need to open lots of datasets, I'd like to re-use the opened file descriptor
included in GDALOpenInfo to avoid unnecessary IO.

But that file descriptor can be opened by either of VSIFOpen or VSIFOpenL
(when VSIFOpen fails) - by the way it's always closed using VSIFClose
Should I use a RTTI function to guess the actual type?

Thanks,
Frederic Claudel


-----Message d'origine-----
De?: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] De la part de Shaun Kolomeitz
Envoy??: vendredi 25 ao?t 2006 01:04
??: Frank Warmerdam
Cc?: gdal-dev@lists.maptools.org
Objet?: RE: [Gdal-dev] GDAL and Solaris 10/sparc

Thanks Frank,

I had a quick look at getting the IRC client to go, but our work proxy can
be a bit difficult to get around.
I will have a look at getting access via SSH, again this is usually not
permitted because of security concerns. Perhaps if I could give them a
specific client address, and then decide on a time window to allow you
"through" our firewall we could have more success.
I suspect that we have everything needed to do a successful build, but I am
not entirely sure of what order things should be in. The 32 vs 64 bit build
is puzzling me as to which PATH and LD_LIBRARY settings are needed plus
which system wide settings should apply.
I've had success in the past in building ECW as a separate (standalone)
entity, but not in getting it to link-in with GDAL. I've also managed to get
an older version of GDAL (v1.2) working. Bugger me if I can remember how I
did it now !
I'll contact our network people and see if I can get access via SSH granted.

Regards,
Shaun

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com]
> Sent: Friday, 25 August 2006 1:17 AM
> To: Shaun Kolomeitz
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] GDAL and Solaris 10/sparc
> 
> 
> Shaun Kolomeitz wrote:
> > After months of searching, hacking and many hundreds of 
> compile attempts I am still unable to successfully get GDAL 
> to compile on a SPARC/Solaris 10 environment. No amount of 
> searching lists and getting obscure possible fixes has worked.
> > My original aim was to get GDAL with ECW compiled and 
> going, but for now I'd even settle for just Geotiff, HFA and 
> JPEG. I'll just have to use WindoZe to do any other conversions.
> > Would someone mind sending me some settings from their 
> working GDAL sparc/Solaris X configurations ?
> > Stuff like the system wide "crle", PATH and LD_LIBRARY_PATH 
> settings for compilation and the versions of GCC/etc that 
> actually work.
> > Any other suggestions that might help me get this going 
> would be most welcome.
> 
> Shaun,
> 
> Perhaps it would be best to try and meet in IRC (#gdal on 
> irc.freenode.net)
> to try and debug your build problems on Solaris.  
> Alternatively, if you can
> provide temporary ssh access to me, I could likely build it.
> 
> I don't think there should be any great difficulty in 
> building on Solaris
> as long as reasonably functional tool chain is available.  I 
> would hesitate
> to take on building the ECW libraries there though.  I'm sure 
> it is possible,
> but perhaps not easy.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
http://osgeo.org



___________________________
Disclaimer

This e-mail, including attachments if any, has originated from a Queensland
government agency and may contain information that is confidential, or
covered by legal professional privilege, and is intended for the named
recipient(s) only.  If you have received this message in error, you are
asked to inform the sender as quickly as possible and delete this message
and any copies of this message from your computer system network.

Any form of disclosure, modification, distribution and/or publication of
this e-mail, including attachments is prohibited.  Unless otherwise stated,
this e-mail, including attachments represents the views of the sender and
not the views of the Environmental Protection Agency.

Although this e-mail has been checked for the presence of computer viruses,
the Environmental Protection Agency provides no warranty that all possible
viruses have been detected and cleaned.  Any use of this e-mail could harm
your computer system.
___________________________


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From nbest at speakeasy.net  Fri Aug 25 09:30:12 2006
From: nbest at speakeasy.net (Neil Best)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: gdal for ubuntu
In-Reply-To: <1149820776.13219.7.camel@marcy>
References: <1149258978.9695.216.camel@localhost.localdomain>	<4480B383.2080108@loskot.net>	<1149777594.9695.315.camel@localhost.localdomain>
	<1149820776.13219.7.camel@marcy>
Message-ID: <44EEFB64.4080806@speakeasy.net>

Hey, Debian and Ubuntu lovers, remember this thread?  I thought I would
spend some time researching package management again recently to see 
what I could learn about the status of bleeding edge gdal with respect 
to Ubuntu Dapper with an eye on Perl bindings.  Here's a report:


Downloaded gdal-cvs-2006.08.11 from maptools.org

neil@gandalf:~/src/gdal/gdal-cvs-2006.08.11$ debuild -us -uc -b
dpkg-buildpackage: source package is gdal
dpkg-buildpackage: source version is 1.3.2-1
dpkg-buildpackage: source changed by Francesco Paolo Lovergine
<frankie@debian.org>
dpkg-buildpackage: host architecture i386
  fakeroot debian/rules clean
# reminiscence to old procedure of building man pages, will now created
# by doxygen. This rm will be deleted in further releases of gdal
sh -c "if (test -d man/man1) then rm -r man/man1; fi"
dh_testdir
dh_testroot
/usr/bin/make distclean
make[1]: Entering directory `/home/neil/src/gdal/gdal-cvs-2006.08.11'
GNUmakefile:4: GDALmake.opt: No such file or directory
make[1]: *** No rule to make target `config.status', needed by
`GDALmake.opt'. Stop.
make[1]: Leaving directory `/home/neil/src/gdal/gdal-cvs-2006.08.11'
make: [clean-unpatched] Error 2 (ignored)
dh_clean build-stamp configure-stamp
dpatch  deapply-all
ogrili2layer.cpp not applied to ./ .
libname not applied to ./ .
rm -rf patch-stamp patch-stampT debian/patched
  debian/rules build
test -d debian/patched || install -d debian/patched
dpatch  apply-all
applying patch libname to ./ ... ok.
applying patch ogrili2layer.cpp to ./ ...patch: **** malformed patch at
line 18:   * Revision 1.2  2006/06/22 09:26:42  frankie

  failed.
make: *** [patch-stamp] Error 1
debuild: fatal error at line 768:
dpkg-buildpackage failed!

[ Maybe this has been fixed since I tried it.  --NB ]

Downloaded gdal-1.3.2 and downgraded libxerces

neil@gandalf:~/src/gdal/gdal-1.3.2$ debuild -us -uc -b
. . .
dh_testdir
dh_testroot
dh_movefiles
dh_movefiles: debian/tmp/usr/share/man/man1/gdal_merge.py.1 not found
(supposed to put it in python-gdal)
dh_movefiles: debian/tmp/usr/share/man/man1/pct2rgb.py.1 not found
(supposed to put it in python-gdal)
make: *** [binary-arch] Error 1
debuild: fatal error at line 768:
dpkg-buildpackage failed!

neil@gandalf:~/src/gdal/gdal-1.3.2$ ./configure --with-perl
--with-grass=/usr/lib/grass  # GRASS from Dapper repos
. . .
neil@gandalf:~/src/gdal/gdal-1.3.2$ make
. . .
neil@gandalf:~/src/gdal/gdal-1.3.2$ sudo checkinstall -D make install
. . .
neil@gandalf:~/src/gdal/gdal-1.3.2$ gdalinfo --version
GDAL 1.3.2.0, released 2006/05/02


So building from source seems to be fine, but the debian/ files have
some problems, it seems.  I am interested in helping address these
issues, but I'm not really sure where to start.  Maybe my experience
exposes the problems to those who can read the signs.  In general I am
interested in bringing the latest-and-greatest GIS tools to Ubuntu.
Please let me know how I can help.

Neil


Steve Halasz wrote:
> I offered some time ago to keep the debian/ control files reasonably
> up-to-date with respect to the official debian packages. Life has been
> busy, but I'll try to find time for this soon.
> 
> Steve
> 
> On Thu, 2006-06-08 at 09:39 -0500, Neil Best wrote:
>> Yes, Mateusz, I was referring to the 'debian' directory in GDAL source
>> tree.  When I tried to build a package for 1.3.1 the dpkg-buildpackage
>> way I got .debs named with version 1.2.1 or something and had
>> dependencies that didn't make any sense.  I presume that these
>> parameters are embedded in the control files somewhere.  The same
>> procedure under 1.3.2 bombed out in similar fasion as Eric Patton
>> reported to the list.  Surprisingly I was able to install gdal using
>> checkinstall. (Yay! Perl bindings!)  This suggests that the debian/
>> files have fallen out of date.  I will attempt to contact the Debian
>> package maintainer, Silke Reimer, but other suggestions are certainly
>> welcome.  I am willing to help move this along, but hearing from someone
>> with more familiarity with the history of the debian/ files would be
>> helpful and encouraging.
>>
>> Neil
>>
>>
>> On Fri, 2006-06-02 at 17:54 +0000, an Mateusz Loskot wrote:
>>> Neil Best wrote:
>>>> Hello, everybody.  I have been trying to build gdal from source for 
>>>> my ubuntu breezy box and have had some problems building .debs for 
>>>> both 1.3.1 and 1.3.2.
>>> Does it mean your problem is with building Debian packages (deb) or
>>> building GDAL binaries from source?
>>>
>>>> How can I learn more about the status of the debian/ sub-directory
>>>> and the possibility of getting upgraded packages into the ubuntu
>>>> repositories?
>>> Do you mean 'debian' directory in GDAL sources tree?
>>>
>>>> Anyone here involved with UbuntuGIS? 
>>>> https://wiki.ubuntu.com/UbuntuGIS
>>> I was involved for a while (2 months ago) as I'm Ubuntu user
>>> but I had to break for a (longer) while. I'll try to be back in a 2-3
>>> months.
>>>
>>> Cheers
>>> -- 
>>> Mateusz Loskot
>>> http://mateusz.loskot.net
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Fri Aug 25 09:50:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] VSI file open/close issue
In-Reply-To: <00f501c6c846$dde0c900$a401a8c0@pc164>
References: <00f501c6c846$dde0c900$a401a8c0@pc164>
Message-ID: <44EF000F.7030608@pobox.com>

Frederic Claudel wrote:
> When using VSI* or VSI*L functions, it seems impossible to mix both, which
> means opening a file using VSIFOpen then closing it with VSIFCloseL.
> 
> Hence my question : how can I tell them apart ? In a new GDAL driver where I
> need to open lots of datasets, I'd like to re-use the opened file descriptor
> included in GDALOpenInfo to avoid unnecessary IO.
> 
> But that file descriptor can be opened by either of VSIFOpen or VSIFOpenL
> (when VSIFOpen fails) - by the way it's always closed using VSIFClose
> Should I use a RTTI function to guess the actual type?

Frederic,

Currently there is no way to distinguish VSI* from VSI*L handles.

However, the "fp" in the GDALOpenInfo is always a VSI* handle.  Drivers
that use VSI*L handes ignore the fp in the GDALOpenInfo and re-open the
file.  Files that don't successfully open with VSIFOpen() (ie. large files
on some systems) are opened with VSIFOpenL(), the header read, and then are
closed again.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Aug 25 15:36:57 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] GDAL and Solaris 10/sparc
In-Reply-To: <T7a50fadf6f9384f0e1b08@goshawk.env.qld.gov.au>
References: <T7a50fadf6f9384f0e1b08@goshawk.env.qld.gov.au>
Message-ID: <44EF5159.2010909@pobox.com>

Shaun Kolomeitz wrote:
> Thanks Frank,
> 
> I had a quick look at getting the IRC client to go, but our work proxy can
> be a bit difficult to get around. I will have a look at getting access via
> SSH, again this is usually not permitted because of security concerns.
> Perhaps if I could give them a specific client address, and then decide on
> a time window to allow you "through" our firewall we could have more
> success. I suspect that we have everything needed to do a successful build,
> but I am not entirely sure of what order things should be in. The 32 vs 64
> bit build is puzzling me as to which PATH and LD_LIBRARY settings are
> needed plus which system wide settings should apply. I've had success in
> the past in building ECW as a separate (standalone) entity, but not in
> getting it to link-in with GDAL. I've also managed to get an older version
> of GDAL (v1.2) working. Bugger me if I can remember how I did it now ! I'll
> contact our network people and see if I can get access via SSH granted.

Shaun,

I understand about the security issues.  This is a common issue.

I don't know the particulars of how to deal with Solaris 32/64 bit problems
and so on.  I'd just be puttering around trying to figure it out.  Though
this is something I'm pretty good at.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Mon Aug 28 12:48:28 2006
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: NetCDF.. the world turned upside-down
In-Reply-To: <44EE0EC1.4020102@usgs.gov>
References: <b0d146420604102328g32a8c57ake37142292d21db45@mail.gmail.com>	<443C0125.1060703@pobox.com>
	<44EE0EC1.4020102@usgs.gov>
Message-ID: <44F31E5C.7040809@ualg.pt>

Rich Signell wrote:
> GDAL-gurus,
>
> I just ran into the upside-down NetCDF issue myself- on a perfectly 
> valid CF-compliant file, OpenEV (FWTOOLS 1.0.5) displays it upside down.
>
> For GMT users, this is particularly annoying:  if they are using the 
> old non CF-compliant NetCDF grid format, OpenEV will display their 
> grids correctly, while if they use the new CF-compliant NetCDF grid 
> form, OpenEV will display them upside down.
>
> I think the GDAL driver should be made more flexible so it reads the 
> lat/lon data from the coordinate variables and determines which way is 
> "up".  The CF convention does not specify positive up or positive down 
> -- it just associates the values found in the coordinate variables 
> with the dependent variable and clients are expected to do this.  
> Clients like "ncview" and IDV display these data correctly.
>
> An example CF-compliant file that displays correctly in NCVIEW and 
> IDV, but is upside down in OpenEV is at:
>
> http://stellwagen.er.usgs.gov/rps/share/vs_new.nc

Hi,
I have already reported this misbehavior  of the netCDF driver,  but 
I'll repeated again.
All datasets are reported to have a 512 x 512 size.

Joaquim Luis

C:\temp>gdalinfo vs_new.nc
Driver: netCDF/Network Common Data Format
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=CF-1.0
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"vs_new.nc":z
  SUBDATASET_1_DESC=[1681x1801] z (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

C:\temp>grdinfo vs_new.nc
vs_new.nc: Title:
vs_new.nc: Command:
vs_new.nc: Remark:
vs_new.nc: Normal node registration used
vs_new.nc: grdfile format: nf (# 18)
vs_new.nc: x_min: 0 x_max: 1800 x_inc: 1 name: x nx: 1801
vs_new.nc: y_min: 0 y_max: 1680 y_inc: 1 name: y ny: 1681
vs_new.nc: z_min: -275.729 at x = 1704 y = 1671 z_max: 182.007 at x = 
104 y = 14
56
vs_new.nc: scale_factor: 1 add_offset: 0

From warmerdam at pobox.com  Mon Aug 28 14:13:48 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Re: NetCDF.. the world turned upside-down
In-Reply-To: <44F31E5C.7040809@ualg.pt>
References: <b0d146420604102328g32a8c57ake37142292d21db45@mail.gmail.com>	<443C0125.1060703@pobox.com>	<44EE0EC1.4020102@usgs.gov>
	<44F31E5C.7040809@ualg.pt>
Message-ID: <44F3325C.7080309@pobox.com>

Joaquim Luis wrote:
> Hi,
> I have already reported this misbehavior  of the netCDF driver,  but 
> I'll repeated again.
> All datasets are reported to have a 512 x 512 size.
> 
> Joaquim Luis
> 
> C:\temp>gdalinfo vs_new.nc
> Driver: netCDF/Network Common Data Format
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>  NC_GLOBAL#Conventions=CF-1.0
> Subdatasets:
>  SUBDATASET_1_NAME=NETCDF:"vs_new.nc":z
>  SUBDATASET_1_DESC=[1681x1801] z (32-bit floating-point)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)

Joaquim,

This is because the NetCDF driver represents each array object
in the .nc file as a subdataset.  So the "main" file is just a dummy
used to list the subdataset names.

However, I think I asked Denis Nadeau to look into treating single-array
files at the "root" level to avoid this confusion.  I'm not sure if that
was done.  If so, you could update to GDAL CVS, otherwise we need to wait
for Denis.

In the meaintime you can access 'NETCDF:"vs_new.nc":z' as the dataset name.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alexshen at mail.ru  Mon Aug 28 03:23:19 2006
From: alexshen at mail.ru (Alex Shen)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] OGR programming
Message-ID: <E1GHbSn-000PsW-00.alexshen-mail-ru@mx1.mail.ru>

Dear Sirs,

We should like to use the OGR Simple Features Library in programming our
navi systems. Please drop me a link to page where I can get  info  and
examples about programming S-57 format ( read ,write info , map info and
so).

B&R Alex Shen

CEO Roxas Ltd.

St.Petersburg

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060828/73f32a54/attachment.html
From kkirubanantham at yahoo.com  Mon Aug 28 11:21:14 2006
From: kkirubanantham at yahoo.com (kiruba nantham)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] OGR  to access s57 file
Message-ID: <20060828152115.7287.qmail@web52214.mail.yahoo.com>

Dear sir,
              
          i am trying to make one ENC file  reader using c++ language. i just want to know how to diffentiate  objects are in the ENC file using OGR library?  for example there  are many wreaks in the ENC file how to sepate them as a ship wreak,  dangerous wreak etc.. which OGR funtions i should use?  if it is  possible please give some example program.
  
         please help me to find this out ...
         THANK YOU....
  
                                                                               - K.Kirubanantham
                                                                 

 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060828/55ee158d/attachment.html
From warmerdam at pobox.com  Mon Aug 28 18:22:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] OGR  to access s57 file
In-Reply-To: <20060828152115.7287.qmail@web52214.mail.yahoo.com>
References: <20060828152115.7287.qmail@web52214.mail.yahoo.com>
Message-ID: <44F36CAF.7080401@pobox.com>

kiruba nantham wrote:
> Dear sir,
>          
>         i am trying to make one ENC file reader using c++ language. i 
> just want to know how to diffentiate objects are in the ENC file using 
> OGR library?  for example there are many wreaks in the ENC file how to 
> sepate them as a ship wreak, dangerous wreak etc.. which OGR funtions i 
> should use?  if it is possible please give some example program.

Kiruba,

My suggestion is that you review the S-57 documentation carefully to see
if there are attributes that allow you to meaningfully differentiate
different kinds of wrecks.  Once you know how it is indicated in the S-57
data model it shouldn't be too hard to get the information out of OGR.

When I dump the WRECKS layer in an S-57 dataset the features look like:

OGRFeature(WRECKS):2163
   RCID (Integer) = 2164
   PRIM (Integer) = 1
   GRUP (Integer) = 2
   OBJL (Integer) = 159
   RVER (Integer) = 1
   AGEN (Integer) = 540
   FIDN (Integer) = 2135161787
   FIDS (Integer) = 688
   LNAM (String) = 021C7F43FBBB02B0
   LNAM_REFS (StringList) = (null)
   FFPT_RIND (IntegerList) = (null)
   CATWRK (Integer) = 1
   CONRAD (Integer) = (null)
   CONVIS (Integer) = (null)
   EXPSOU (Integer) = (null)
   HEIGHT (Real) = (null)
   NOBJNM (String) = (null)
   OBJNAM (String) = (null)
   QUASOU (String) = 2
   SOUACC (Real) = (null)
   STATUS (String) = (null)
   TECSOU (String) = (null)
   VALSOU (Real) = (null)
   VERACC (Real) = (null)
   VERDAT (Integer) = (null)
   VERLEN (Real) = (null)
   WATLEV (Integer) = 3
   INFORM (String) = (null)
   NINFOM (String) = (null)
   NTXTDS (String) = (null)
   SCAMAX (Integer) = (null)
   SCAMIN (Integer) = (null)
   TXTDSC (String) = (null)
   RECDAT (String) = (null)
   RECIND (String) = (null)
   SORDAT (String) = (null)
   SORIND (String) = (null)
   POINT (61.1031909 -32.4450159)

Hmm, looking in the gdal/data/s57expectedinput.csv file I see that
the CATWRK field can have the following values:

71,1,non-dangerous wreck
71,2,dangerous wreck
71,3,distributed remains of wreck
71,4,wreck showing mast/masts
71,5,wreck showing any portion of hull or superstructure

So, I think what you need to do is fetch the CATWRK feature attribute
from WRECKS, and compare the value to the range above (1-5).   So
looking at the s57expectedinput.csv file will help you identify what
integer values for some fields correspond with what textual strings.
But generally speaking the best reference is the S-57 specification.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Roger.Bivand at nhh.no  Tue Aug 29 05:55:07 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Creating an empty ColorTable in C++
Message-ID: <Pine.LNX.4.44.0608291149241.16924-100000@reclus.nhh.no>

I'm trying to replicate some of the inner logic of rgb2cpt.py in a C++ 
function from R. I'm stuck on how to declare/initialize a GDALColorTable 
*ct for GDALComputeMedianCutPCT() and GDALDitherRGB2PCT() - I'm using:

  GDALColorTable *ct = pRasterBand->GetColorTable();

where pRasterBand is the red band of the input data set. This obviously 
upsets GDALComputeMedianCutPCT() which seems to want a naked ColorTable, 
and seg.faults:

#0  0xb798bf3a in GDALColorTable::SetColorEntry ()
   from /usr/local/lib/libgdal.so.1
#1  0xb798bfe5 in GDALSetColorEntry () from /usr/local/lib/libgdal.so.1
#2  0xb79b742e in GDALComputeMedianCutPCT () from /usr/local/lib/libgdal.so.1

How should I declare ct?

Grateful for any hints,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From romain.garrigues at c-s.cnes.fr  Tue Aug 29 12:23:02 2006
From: romain.garrigues at c-s.cnes.fr (Romain Garrigues)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Linking on Cygwin platform.
Message-ID: <200608291417.k7TEHwD15759@cnes.fr>

Hello everybody,

I'm trying to use gdal 1.3.2 on cygwin platform and i have some problems at linking step (while trying to use gdal in another project)
Output errors are :

Linking CXX executable ../../bin/AlignementsQB.exe
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBandC2EP15JPEG2000Datasetiii':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:333: undefined reference to `_jas_matrix_create'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBandC1EP15JPEG2000Datasetiii':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:333: undefined reference to `_jas_matrix_create'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBandD2Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:343: undefined reference to `_jas_matrix_destroy'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBandD1Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:343: undefined reference to `_jas_matrix_destroy'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBandD0Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:343: undefined reference to `_jas_matrix_destroy'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBand10IReadBlockEiiPv':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:359: undefined reference to `_jas_image_decode'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:368: undefined reference to `_jas_image_readcmpt'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:362: undefined reference to `_jas_image_fmttostr'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN18JPEG2000RasterBand22GetColorInterpretationEv':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:435: undefined reference to `_jas_image_decode'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:438: undefined reference to `_jas_image_fmttostr'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN15JPEG2000DatasetD2Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:509: undefined reference to `_jas_image_destroy'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:510: undefined reference to `_jas_image_clearfmts'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:507: undefined reference to `_jas_stream_close'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN15JPEG2000DatasetD1Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:509: undefined reference to `_jas_image_destroy'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:510: undefined reference to `_jas_image_clearfmts'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:507: undefined reference to `_jas_stream_close'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function `_ZN15JPEG2000DatasetD0Ev':
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:509: undefined reference to `_jas_image_destroy'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:510: undefined reference to `_jas_image_clearfmts'
/cygdrive/d/ORFEO/generation/cygwin/binaries/libs-externes/gdal/gdal-1.3.2/frmts/jpeg2000/jpeg2000dataset.cpp:507: undefined reference to `_jas_stream_close'


(There are many others, but same type).
I'm posting here to know if somebody has encountered similar problem ?
I have compiled gdal with some options (./configure --without-python --with-libpng=internal --with-libtiff=internal --with-libjpeg=internal).
Jas fonctions are from Jasper library.
Maybe i have forgotten some options in gdal configuration ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060829/e0292cee/attachment.html
From warmerdam at pobox.com  Tue Aug 29 10:18:44 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Creating an empty ColorTable in C++
In-Reply-To: <Pine.LNX.4.44.0608291149241.16924-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0608291149241.16924-100000@reclus.nhh.no>
Message-ID: <44F44CC4.7050708@pobox.com>

Roger Bivand wrote:
> I'm trying to replicate some of the inner logic of rgb2cpt.py in a C++ 
> function from R. I'm stuck on how to declare/initialize a GDALColorTable 
> *ct for GDALComputeMedianCutPCT() and GDALDitherRGB2PCT() - I'm using:
> 
>   GDALColorTable *ct = pRasterBand->GetColorTable();
> 
> where pRasterBand is the red band of the input data set. This obviously 
> upsets GDALComputeMedianCutPCT() which seems to want a naked ColorTable, 
> and seg.faults:
> 
> #0  0xb798bf3a in GDALColorTable::SetColorEntry ()
>    from /usr/local/lib/libgdal.so.1
> #1  0xb798bfe5 in GDALSetColorEntry () from /usr/local/lib/libgdal.so.1
> #2  0xb79b742e in GDALComputeMedianCutPCT () from /usr/local/lib/libgdal.so.1

Roger,

GDALComputeMedianCutPCT() wants a GDALColorTableH.  You can create a new
clear color table for it using GDALCreateColorTable(GPI_RGB).

I suspect that the GetColorTable() is returning NULL which is causing the
crash later on.

Also, I notice you were using the C++ method to fetch the color table.
It is up to you, but if you were to use only the C API in an R interface
to GDAL it would make things much less "version fragile".  That is, new
versions of GDAL could be substituted without necessarily having to
recompile the R wrappers as the C API is much more ABI stable than the
C++ API.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Roger.Bivand at nhh.no  Tue Aug 29 15:07:20 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Creating an empty ColorTable in C++
In-Reply-To: <44F44CC4.7050708@pobox.com>
Message-ID: <Pine.LNX.4.44.0608292055370.16924-100000@reclus.nhh.no>

On Tue, 29 Aug 2006, Frank Warmerdam wrote:

> Roger Bivand wrote:
> > I'm trying to replicate some of the inner logic of rgb2cpt.py in a C++ 
> > function from R. I'm stuck on how to declare/initialize a GDALColorTable 
> > *ct for GDALComputeMedianCutPCT() and GDALDitherRGB2PCT() - I'm using:
> > 
> >   GDALColorTable *ct = pRasterBand->GetColorTable();
> > 
> > where pRasterBand is the red band of the input data set. This obviously 
> > upsets GDALComputeMedianCutPCT() which seems to want a naked ColorTable, 
> > and seg.faults:
> > 
> > #0  0xb798bf3a in GDALColorTable::SetColorEntry ()
> >    from /usr/local/lib/libgdal.so.1
> > #1  0xb798bfe5 in GDALSetColorEntry () from /usr/local/lib/libgdal.so.1
> > #2  0xb79b742e in GDALComputeMedianCutPCT () from /usr/local/lib/libgdal.so.1
> 
> Roger,
> 
> GDALComputeMedianCutPCT() wants a GDALColorTableH.  You can create a new
> clear color table for it using GDALCreateColorTable(GPI_RGB).

Frank,

Thanks, that helped a little.

My plan was to pass from R to GDAL the handles to two data sets, the 
output one of which would get populated by the color index band and the 
color table. I now see a clean error exit:

Error in rgdal:::SGDF2RGB(xx) : 
        GDAL Error 6: SetColorTable() not supported for existing TIFF files.

which suggests that I should rather initiate the output dataset in my 
C/C++ code.

> 
> I suspect that the GetColorTable() is returning NULL which is causing the
> crash later on.
> 
> Also, I notice you were using the C++ method to fetch the color table.
> It is up to you, but if you were to use only the C API in an R interface
> to GDAL it would make things much less "version fragile".  That is, new
> versions of GDAL could be substituted without necessarily having to
> recompile the R wrappers as the C API is much more ABI stable than the
> C++ API.
> 

I'm very much building on and maintaining Tim Keitt's elegant C++ code, 
which is written C++ style; as is evident C++ is not a language I enjoy, 
but I would not want to have to rewrite Tim's earlier work. So the code 
has stayed a mixture of elegance where I haven't done anything and 
muddling through where I have written things.

The idea of having a rapid RGB display mechanism for three-band objects 
was Tim's, but I thought I'd have a look. I may end up just writing a file 
for rgb2pct.py to convert from the R level.

Best wishes,

Roger

> Best regards,
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From warmerdam at pobox.com  Tue Aug 29 15:18:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:19 2007
Subject: [Gdal-dev] Creating an empty ColorTable in C++
In-Reply-To: <Pine.LNX.4.44.0608292055370.16924-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0608292055370.16924-100000@reclus.nhh.no>
Message-ID: <44F492F1.6090406@pobox.com>

Roger Bivand wrote:
  > My plan was to pass from R to GDAL the handles to two data sets, the
> output one of which would get populated by the color index band and the 
> color table. I now see a clean error exit:
> 
> Error in rgdal:::SGDF2RGB(xx) : 
>         GDAL Error 6: SetColorTable() not supported for existing TIFF files.
> 
> which suggests that I should rather initiate the output dataset in my 
> C/C++ code.

Roger,

I think the key here is that the GeoTIFF driver in GDAL only allows you
to assign a pseudocolor table to a file before you start any raster data.

>> I suspect that the GetColorTable() is returning NULL which is causing the
>> crash later on.
>>
>> Also, I notice you were using the C++ method to fetch the color table.
>> It is up to you, but if you were to use only the C API in an R interface
>> to GDAL it would make things much less "version fragile".  That is, new
>> versions of GDAL could be substituted without necessarily having to
>> recompile the R wrappers as the C API is much more ABI stable than the
>> C++ API.
>>
> 
> I'm very much building on and maintaining Tim Keitt's elegant C++ code, 
> which is written C++ style; as is evident C++ is not a language I enjoy, 
> but I would not want to have to rewrite Tim's earlier work. So the code 
> has stayed a mixture of elegance where I haven't done anything and 
> muddling through where I have written things.

OK, I can understand the desire to not rewrite everything.  I just wanted
to raise the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Roger.Bivand at nhh.no  Tue Aug 29 15:31:50 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] Creating an empty ColorTable in C++
In-Reply-To: <44F492F1.6090406@pobox.com>
Message-ID: <Pine.LNX.4.44.0608292127300.16924-100000@reclus.nhh.no>

On Tue, 29 Aug 2006, Frank Warmerdam wrote:

> Roger Bivand wrote:
>   > My plan was to pass from R to GDAL the handles to two data sets, the
> > output one of which would get populated by the color index band and the 
> > color table. I now see a clean error exit:
> > 
> > Error in rgdal:::SGDF2RGB(xx) : 
> >         GDAL Error 6: SetColorTable() not supported for existing TIFF files.
> > 
> > which suggests that I should rather initiate the output dataset in my 
> > C/C++ code.
> 
> Roger,
> 
> I think the key here is that the GeoTIFF driver in GDAL only allows you
> to assign a pseudocolor table to a file before you start any raster data.
> 

OK, thanks.

> >> I suspect that the GetColorTable() is returning NULL which is causing the
> >> crash later on.
> >>
> >> Also, I notice you were using the C++ method to fetch the color table.
> >> It is up to you, but if you were to use only the C API in an R interface
> >> to GDAL it would make things much less "version fragile".  That is, new
> >> versions of GDAL could be substituted without necessarily having to
> >> recompile the R wrappers as the C API is much more ABI stable than the
> >> C++ API.
> >>
> > 
> > I'm very much building on and maintaining Tim Keitt's elegant C++ code, 
> > which is written C++ style; as is evident C++ is not a language I enjoy, 
> > but I would not want to have to rewrite Tim's earlier work. So the code 
> > has stayed a mixture of elegance where I haven't done anything and 
> > muddling through where I have written things.
> 
> OK, I can understand the desire to not rewrite everything.  I just wanted
> to raise the issue.

Using system() from the R level and assuming rgb2pct.py in the PATH, 
things work OK, which is enough for now. I'll return to the compiled code 
later, which will remove the Python dependency (the Windows rgdal 
binary package does not have Python build-in). Tim was using the raster 
decimation and a quick image to check if he was in the right part of a big 
raster.

Thanks!

Roger

> 
> Best regards,
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From warmerdam at pobox.com  Tue Aug 29 18:42:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] Warp Options
Message-ID: <44F4C2C1.8050509@pobox.com>

Denis,

I have committed support for warp options in warped vrt files.  They would
look something like:

   <GDALWarpOptions>
     <SourceDataset relativeToVRT="1">0to360.vrt</SourceDataset>
     <WarpMemoryLimit>6.71089e+08</WarpMemoryLimit>
     <ResampleAlg>NearestNeighbour</ResampleAlg>
     <WorkingDataType>Float32</WorkingDataType>
     <Option name="SOURCE_EXTRA">100</Option>
     <Transformer>
...

Let me know if you have any more problems.  I really need to have the
warper itself increase SOURCE_EXTRA appropriately when it has to use
sampling for windows.

You can also set the SAMPLE_STEPS warp option to a value larger than 20.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mhanson at photon.com  Tue Aug 29 20:52:30 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>

I'm writing a derived class of GDALDataset and I'm not sure how to implement the constructor.   I want to be able to take in a filename as an argument, and I should then have to explicitly call the GDALDataset ctor.   But GDALDataset doesn't have a public constructor that I can see as it uses GDALOpen and a cast to create it.
 
 
I've tried this line in the ctor:
*this = (GDALDataset *)GDALOpen( FileName(), GA_ReadOnly );

Along with a copy ctor:

GSImage(GDALDataset* ds) {

*this  = ds;

}

which compiles but of course doesn't work. I didn't think it would, but I'm not exactly sure why. Any ideas on what my derived class constructor should look like then?  

 

matt

 



From mateusz at loskot.net  Tue Aug 29 22:06:47 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>
Message-ID: <44F4F2B7.2060806@loskot.net>

Matt Hanson wrote:
> I'm writing a derived class of GDALDataset and I'm not sure how to
> implement the constructor. I want to be able to take in a filename
> as an argument, and I should then have to explicitly call the
> GDALDataset ctor.

Simplified answer is that you can not call constructor directly.
Second, you can't call constructor especially on already instantiated
object. Constructors are called during object instantiation.

> But GDALDataset doesn't have a public constructor
> that I can see as it uses GDALOpen and a cast to create it.

This is not the problem here with the GDALDataset, because GDALDataset
ctor is protected what makes it callable from subclasses.
The problem is that GDALDataset is unusable for your concept,
because it does not take any parameters you could use, for example
image file descriptor, etc.

Here is example of "calling" base class ctor - only possible
through initialization list.

//////////////////////////////////////////////
#include <iostream>

class Base
{
public:
    virtual ~Base() {}
    int get() const { return id_; }

protected:
    Base(int id) : id_(id) {}

private:
    int id_;

};

class A : public Base
{
public:
    A(int a, int b) : Base(a), other(b) {}
    int other;

};

int main()
{
    A a(12, 103);

    std::cout << "a.get(): " << a.get() << std::endl;
    std::cout << "a.other: " << a.other << std::endl;

    return 0;
}
//////////////////////////////////////////////


> I've tried this line in the ctor:
> *this = (GDALDataset *)GDALOpen( FileName(), GA_ReadOnly );

It won't work, because:
1. C++ Standard/ 9.3.2 The this pointer/ 1 says:
"(...)the keyword this is a non-lvalue expression whose value is the
address of the object for which the function is called."

but in C++ you can not assign anything to non-lvalue.

2. 'this pointer' cannot be changed while the object exists

> Along with a copy ctor:
> 
> GSImage(GDALDataset* ds) {
> 
> *this  = ds;
> 
> }
> 
> which compiles but of course doesn't work. I didn't think it would,
> but I'm not exactly sure why.

This copy constructor is invalid.

C++ Standard / 12.8 Copying class objects / 2 says:

"A non-template constructor for class X is a copy constructor if its
first parameter is of type X&, const X&, volatile X&
or const volatile X&, and either there are no other parameters or else
all other parameters have default arguments
Example: X::X(const X&) and X::X(X&,int=1) are copy constructors."


the same rule applies to assignment operator.
BTW, if you add copy ctor, then you have to add assignmet operator as well.


GSImage(GDALDataset const& ds)
{
   if (this != &ds)
   {
      // copy ds object members values to this members values
   }
}

BTW, (*this) is a reference, not a pointer.

> Any ideas on what my derived class
> constructor should look like then?

I would use "named constructor idiom" and factory method:
Here is the concept in very short:

class GSImage : public GDALDataset
{
public:
  static GSImage* Create(const char* file)
  {
     return static_cast<GSImage*>( GDALOpen(file, GA_ReadOnly ) );
  }
};

GSImage* pImage = GSImage::create("myfile.png");


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 29 22:26:58 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <44F4F2B7.2060806@loskot.net>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>
	<44F4F2B7.2060806@loskot.net>
Message-ID: <44F4F772.5000405@loskot.net>

Mateusz Loskot wrote:
> Matt Hanson wrote:
>> Any ideas on what my derived class
>> constructor should look like then?
> 
> I would use "named constructor idiom" and factory method:
> Here is the concept in very short:
> 
> class GSImage : public GDALDataset
> {
> public:
>   static GSImage* Create(const char* file)
>   {
>      return static_cast<GSImage*>( GDALOpen(file, GA_ReadOnly ) );
>   }
> };
> 
> GSImage* pImage = GSImage::create("myfile.png");

Let me unsay it ;-)
The solution above forces you to still play with pointers.
So, with current design of GDALDataset, it's much better to encapsulate
GDALDataset as a private member of GSImage class than inheritance.
Certainly, composition with its direct lifetime control.

GSImage
{
public:
   GSImage(const char* filename) : ds(0)
   {
      ds = GDALOpen(filename, ...);
   }
   // Add your own or replicate GDALDataset interface

private:
   GDALDataset* ds;
}

Certainly, here you need to (re)design your own interface,
as minimal as needed to use GSImage, or replicate whole
interface after GDALDataset <--- may seem as a redundant work
in comparison of encapsulation, but composition is much better
in wide terms of flexibility.

Side note, inheritance is always easier to use, but
composition/aggregation is much more flexible.

Are you sure GSImage is a GDALDatase?
This is the question from the same family like
Is a circle an elipse but with two radiuses of the same length?

If you're interested in considering this design deeply,
I'd suggest you to look at the Liskov Substitution Principle (LSP)
that's pretty simple to understand but helps much with design
decisions :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 29 22:31:16 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <44F4F772.5000405@loskot.net>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>
	<44F4F2B7.2060806@loskot.net> <44F4F772.5000405@loskot.net>
Message-ID: <44F4F874.4010809@loskot.net>

Mateusz Loskot wrote:
> Mateusz Loskot wrote:
>> Matt Hanson wrote:
>>> Any ideas on what my derived class
>>> constructor should look like then?
>> I would use "named constructor idiom" and factory method:
>> Here is the concept in very short:
>>
>> class GSImage : public GDALDataset
>> {
>> public:
>>   static GSImage* Create(const char* file)
>>   {
>>      return static_cast<GSImage*>( GDALOpen(file, GA_ReadOnly ) );
>>   }
>> };
>>
>> GSImage* pImage = GSImage::create("myfile.png");
> 
> Let me unsay it ;-)
> The solution above forces you to still play with pointers.
> So, with current design of GDALDataset, it's much better to encapsulate
> GDALDataset as a private member of GSImage class than inheritance.
> Certainly, composition with its direct lifetime control.

Arghh, it's veeery late so I did a few typos....

As a lifetime control I mean, you create GDALDataset instance in the
GSImage ctor and opens it along. And in GSImage destructor you
closes it.

> Certainly, here you need to (re)design your own interface,
> as minimal as needed to use GSImage, or replicate whole
> interface after GDALDataset <--- may seem as a redundant work
> in comparison of encapsulation, but composition is much better
---------------^^^^^^^^^^^^^^^^^^ - it should be 'to inheritance'

OK, it's time to bed :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mhanson at photon.com  Tue Aug 29 22:50:34 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com><44F4F2B7.2060806@loskot.net>
	<44F4F772.5000405@loskot.net>
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278567@pj-exchange.photon.com>

Interesting, my original implementation had GDALDataset as a private member as you suggest.   As I spent more time thinking about it I thought that a derived class would be better in the long run, so I started looking into what was required for that.   As it turns out though I had already come to the conclusion that my GSBand class would have to use GDALRasterBand as a private member because of course you can't create raster objects directly.    I suppose at the very least it makes sense to have them use the same design, thus GDALRasterBand and GDALDataset as private members.
 
Thanks for the explanations, it's been a tremendous help!
 
-matt
 

________________________________

From: gdal-dev-bounces@lists.maptools.org on behalf of Mateusz Loskot
Sent: Tue 8/29/2006 10:26 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDALDataset as a Base Class



Mateusz Loskot wrote:
> Matt Hanson wrote:
>> Any ideas on what my derived class
>> constructor should look like then?
>
> I would use "named constructor idiom" and factory method:
> Here is the concept in very short:
>
> class GSImage : public GDALDataset
> {
> public:
>   static GSImage* Create(const char* file)
>   {
>      return static_cast<GSImage*>( GDALOpen(file, GA_ReadOnly ) );
>   }
> };
>
> GSImage* pImage = GSImage::create("myfile.png");

Let me unsay it ;-)
The solution above forces you to still play with pointers.
So, with current design of GDALDataset, it's much better to encapsulate
GDALDataset as a private member of GSImage class than inheritance.
Certainly, composition with its direct lifetime control.

GSImage
{
public:
   GSImage(const char* filename) : ds(0)
   {
      ds = GDALOpen(filename, ...);
   }
   // Add your own or replicate GDALDataset interface

private:
   GDALDataset* ds;
}

Certainly, here you need to (re)design your own interface,
as minimal as needed to use GSImage, or replicate whole
interface after GDALDataset <--- may seem as a redundant work
in comparison of encapsulation, but composition is much better
in wide terms of flexibility.

Side note, inheritance is always easier to use, but
composition/aggregation is much more flexible.

Are you sure GSImage is a GDALDatase?
This is the question from the same family like
Is a circle an elipse but with two radiuses of the same length?

If you're interested in considering this design deeply,
I'd suggest you to look at the Liskov Substitution Principle (LSP)
that's pretty simple to understand but helps much with design
decisions :-)

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net <http://mateusz.loskot.net/> 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev




From mateusz at loskot.net  Tue Aug 29 22:55:04 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278565@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com>
	<44F4F2B7.2060806@loskot.net>
	<0719BE42F22E0A46857DF72644EC5D70278565@pj-exchange.photon.com>
Message-ID: <44F4FE08.1070709@loskot.net>

Matt Hanson wrote:
> Mateusz, this was a great help.  Just wanted to drop a line and say
> thanks!   I had alot of this info inside my head bouncing around but
> wasn't able to piece it together.    Your explanation really helped
> clarify things well and I now have a plan on how to proceed with this
> project.

Matt,
You're welcome and I'm very glad it was helpful for you.
If you have any questions, don't hesitate to post them here.

p.s. I noticed you're reply has not got to the gdal-dev address,
so I pushed it there.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Aug 29 23:11:05 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278567@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com><44F4F2B7.2060806@loskot.net>
	<44F4F772.5000405@loskot.net>
	<0719BE42F22E0A46857DF72644EC5D70278567@pj-exchange.photon.com>
Message-ID: <44F501C9.2060407@loskot.net>

Matt Hanson wrote:
> Interesting, my original implementation had GDALDataset as a private
> member as you suggest.   As I spent more time thinking about it I
> thought that a derived class would be better in the long run, so I
> started looking into what was required for that.

Matt,

...I'm back from dog walk so last reply today before going to bed :-)

Please, be aware that my reply refers to a general idea/concept,
and I likely have not considered design requirements of your project.
So, it's a kind of brainstorm from my side.

I assumed that:
- you want to avoid playing with pointers if it's possible
- you want to simplify GDAL dataset to form of image (to access
its bands, and other properties)

with these points in mind, I'd use composition.
BTW, to avoid misunderstanding, I use 'composition' term
according to this explanation:
http://ootips.org/uml-hasa.html

> As it turns out
> though I had already come to the conclusion that my GSBand class
> would have to use GDALRasterBand as a private member because of
> course you can't create raster objects directly.

Similarly to discussion above, everything depends on what is the
relation between GDALRasterBand and GSBand.
What does GSBand with the GDALRasterBand do?
Is GSBand is going to be a kind of Facade Pattern
(http://en.wikipedia.org/wiki/Facade_pattern)
that will offer realization of the same concept as GDALRasterBand,
but with simplified interface (e.g. tighter subset of functions, etc.)

Another option is taht GSBand will *extend* GDALRasterBand
functionality. In this case I'd consider inheritance.

Yet another variation possible is that may be your GSBand and other GS*
classes are going to enable users to play with values and references,
instead of pointers.

Yet more another option is that may be GSBand (and other GS* classes)
are needed to be an adapter around GDAL API (Adapter Pattern -
http://en.wikipedia.org/wiki/Wrapper_pattern)
adapting it to your system interface, etc.

> I suppose at the
> very least it makes sense to have them use the same design, thus
> GDALRasterBand and GDALDataset as private members.

I just want to say, I'm speculating a bit saying "I'd use encapsulation
over inheritance" because everything depends on your objectives.

> Thanks for the explanations, it's been a tremendous help!

I'm happy to hear I'm able to help someone with something!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Wed Aug 30 02:00:45 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] Re: ruby bindings proj4 stangeness
In-Reply-To: <60c6835d0608220548n472ae28sd97afb19860f7885@mail.gmail.com>
References: <60c6835d0608220548n472ae28sd97afb19860f7885@mail.gmail.com>
Message-ID: <44F5298D.7030206@savagexi.com>

Are you regenerating the SWIG bindings or using the ones in CVS?

Either way, open the appropriate cxx file (osr_wrap.cxx maybe) and 
scroll to the bottom.  Do you see these missing methods being registered 
(I'm guessing no)?

Charlie


Shoaib Burq wrote:
> I have been banging my head against this for a few hours now with
> little success. I have gdal-1.3.2 build with ruby bindings on gentoo.
> 
> So far while scripting all had been well until i got to proj4 import
> and export functions in osr.
> 
> It appears that that osr ruby bindings aren't registering the proj4 
> functions.
> 
> the strange thing is everything else works fine. Also in python these
> functions is working fine. Below is the run of the osr test suite to
> demonstrate the problem
> 
> $ ruby ts_osr.rb
> Loaded suite ts_osr
> Started
> ...E........EE..
> Finished in 0.077001 seconds.
> 
>  1) Error:
> test_translate_nad_shift(TestOsrBasic):
> NoMethodError: undefined method `set_towgs84' for
> #<Gdal::Osr::SpatialReference:0xb7b2930c>
>    ./tc_osr_basic.rb:109:in `test_translate_nad_shift'
> 
>  2) Error:
> test_exponents(TestOsrProj4):
> NoMethodError: undefined method `import_from_proj4' for
> :Gdal::Osr::SpatialReference
>    ./tc_osr_proj4.rb:18:in `test_exponents'
> 
>  3) Error:
> test_k_0_flag(TestOsrProj4):
> NoMethodError: undefined method `import_from_proj4' for
> :Gdal::Osr::SpatialReference
>    ./tc_osr_proj4.rb:9:in `test_k_0_flag'
> 
> 16 tests, 79 assertions, 0 failures, 3 errors
> ------------------
> So i am running gentoo. gdal was built using the most recent ebuild
> (with ruby flags) and everything compiled fine.
> 
> any thoughts?
> -shoaib


From mhanson at photon.com  Wed Aug 30 10:57:50 2006
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com><44F4F2B7.2060806@loskot.net><44F4F772.5000405@loskot.net><0719BE42F22E0A46857DF72644EC5D70278567@pj-exchange.photon.com>
	<44F501C9.2060407@loskot.net>
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278568@pj-exchange.photon.com>

I don't mind dealing with pointers.  The purpose of the GSImage and related objects is partly to simplify data access (for use by other programmers) and also to add functionality (for image processing).  GSBand adds a data access function to return chunks of read data to CImg objects (see cimg.sourceforge.net ), but also will facilitate easy artihmetic and logical operators on entire bands.
 
However I confused by the GDALRasterBand implementation, it's an abstract class due to the pure virtual IRead function.  Thus to derive from it I would need to define that function.   How does GDAL create instances of GDALRasterBand (within the GDALDataset) without first defining that function ?    I don't see the need to be able to create GSBand objects outside a Dataset though so this is really a moot point.  Encapsulating the GDALRasterBand as a data member and recreating the interface to it is a relatively small task and works for this application.  I would use inheritance but I have too many questions with regard to the GDALRasterBand class. I'm not supposed to call the GDALRasterBand ctor directly, nor it's dtor, so how does this work with a dervied class??    I would need a copy constructor to take in a GDALRasterBand object that I would presumably get with ds->GDALGetRasterBand(bandnum), but if my derived class goes out of scope then the base class dtor will be automatically called which is a no-no for GDALRasterBand.   I guess I should add then currently my GSImage contains a vector<GSBand>.    The GSImage won't directly support removing of bands (instead you would call Subset() function which would write a new file containing the subset) and I can't currently picture a scenario where an element of vector<GSBand> would be removed but I'm not deep enough in this to say that it could never happen.
 
matt

________________________________

From: gdal-dev-bounces@lists.maptools.org on behalf of Mateusz Loskot
Sent: Tue 8/29/2006 11:11 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDALDataset as a Base Class



Matt Hanson wrote:
> Interesting, my original implementation had GDALDataset as a private
> member as you suggest.   As I spent more time thinking about it I
> thought that a derived class would be better in the long run, so I
> started looking into what was required for that.

Matt,

...I'm back from dog walk so last reply today before going to bed :-)

Please, be aware that my reply refers to a general idea/concept,
and I likely have not considered design requirements of your project.
So, it's a kind of brainstorm from my side.

I assumed that:
- you want to avoid playing with pointers if it's possible
- you want to simplify GDAL dataset to form of image (to access
its bands, and other properties)

with these points in mind, I'd use composition.
BTW, to avoid misunderstanding, I use 'composition' term
according to this explanation:
http://ootips.org/uml-hasa.html

> As it turns out
> though I had already come to the conclusion that my GSBand class
> would have to use GDALRasterBand as a private member because of
> course you can't create raster objects directly.

Similarly to discussion above, everything depends on what is the
relation between GDALRasterBand and GSBand.
What does GSBand with the GDALRasterBand do?
Is GSBand is going to be a kind of Facade Pattern
(http://en.wikipedia.org/wiki/Facade_pattern)
that will offer realization of the same concept as GDALRasterBand,
but with simplified interface (e.g. tighter subset of functions, etc.)

Another option is taht GSBand will *extend* GDALRasterBand
functionality. In this case I'd consider inheritance.

Yet another variation possible is that may be your GSBand and other GS*
classes are going to enable users to play with values and references,
instead of pointers.

Yet more another option is that may be GSBand (and other GS* classes)
are needed to be an adapter around GDAL API (Adapter Pattern -
http://en.wikipedia.org/wiki/Wrapper_pattern)
adapting it to your system interface, etc.

> I suppose at the
> very least it makes sense to have them use the same design, thus
> GDALRasterBand and GDALDataset as private members.

I just want to say, I'm speculating a bit saying "I'd use encapsulation
over inheritance" because everything depends on your objectives.

> Thanks for the explanations, it's been a tremendous help!

I'm happy to hear I'm able to help someone with something!

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net <http://mateusz.loskot.net/> 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev




From mateusz at loskot.net  Wed Aug 30 11:20:38 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278568@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278564@pj-exchange.photon.com><44F4F2B7.2060806@loskot.net><44F4F772.5000405@loskot.net><0719BE42F22E0A46857DF72644EC5D70278567@pj-exchange.photon.com>
	<44F501C9.2060407@loskot.net>
	<0719BE42F22E0A46857DF72644EC5D70278568@pj-exchange.photon.com>
Message-ID: <44F5ACC6.1000001@loskot.net>

Matt Hanson wrote:
> I don't mind dealing with pointers.  The purpose of the GSImage and
> related objects is partly to simplify data access (for use by other
> programmers) and also to add functionality (for image processing).
> GSBand adds a data access function to return chunks of read data to
> CImg objects (see cimg.sourceforge.net ), but also will facilitate
> easy artihmetic and logical operators on entire bands.

I see.

> However I confused by the GDALRasterBand implementation, it's an
> abstract class due to the pure virtual IRead function.

Yes, because IReadBlock is implemented by subclasses for drivers, like

MSGRasterBand : public GDALRasterBand
PGCHIPRasterBand : public GDALRasterBand
VRTRasterBand : public GDALRasterBand

Second, and more important, is that there is a close relation
between GDALDataset and GDALRasterBand.
The former controls the latter, because of
friend class GDALDataset
in GDALRasterBand, etc.

So, I assume you need to rethink your idea.

> Thus to derive from it I would need to define that function.

Definitely.

> How does GDAL
> create instances of GDALRasterBand (within the GDALDataset) without
> first defining that function ?

Search for IReadBlock in the GDAL's sources subdirectory called 'frmts'
and see how it's implemented.

> Encapsulating the GDALRasterBand as a data member and
> recreating the interface to it is a relatively small task and works
> for this application.  I would use inheritance but I have too many
> questions with regard to the GDALRasterBand class. I'm not supposed
> to call the GDALRasterBand ctor directly, nor it's dtor, so how does
> this work with a dervied class??

Please, read somewhere about Base Abstract Class, polymorphism
and pure virtual function, for example here:

http://en.wikibooks.org/wiki/C++_Programming/Abstract_Classes
http://www.cplusplus.com/doc/language/tutorial/polymorphism.html


Sorry, I'm not able to give it deeper try today because of lack of time.

Good luck!
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ILucena at clarku.edu  Wed Aug 30 12:03:25 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278568@pj-exchange.photon.com>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>

Matt, All,

You are not alone, I don't mind use the pointer either. See in the
attachment an initial attempt to implement Michael Goodchild's Spatial
Model (Well, at least GetExtent() is working identically for
Fields[GDAL] and Objects[OGR] :-).

But what bugs me a little bit is the proliferation of wrapper and
facades for GDAL that *we* are creating. For example, I am following the
idea of VB6 GDAL wrapper and implementing a Delphi wrapper!

And I also believe that we can count the wrappers automatic created by
swig because they also produce slightly different interfaces that
requires especial documentation (and a separated support group from the
gdal-dev list).

Any thoughts on that subject? 

Any COM, CORBA, .Net idea?

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Hanson
Sent: Wednesday, August 30, 2006 10:58 AM
To: Mateusz Loskot; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] GDALDataset as a Base Class

I don't mind dealing with pointers.  The purpose of the GSImage and
related objects is partly to simplify data access (for use by other
programmers) and also to add functionality (for image processing).
GSBand adds a data access function to return chunks of read data to CImg
objects (see cimg.sourceforge.net ), but also will facilitate easy
artihmetic and logical operators on entire bands.
 
However I confused by the GDALRasterBand implementation, it's an
abstract class due to the pure virtual IRead function.  Thus to derive
from it I would need to define that function.   How does GDAL create
instances of GDALRasterBand (within the GDALDataset) without first
defining that function ?    I don't see the need to be able to create
GSBand objects outside a Dataset though so this is really a moot point.
Encapsulating the GDALRasterBand as a data member and recreating the
interface to it is a relatively small task and works for this
application.  I would use inheritance but I have too many questions with
regard to the GDALRasterBand class. I'm not supposed to call the
GDALRasterBand ctor directly, nor it's dtor, so how does this work with
a dervied class??    I would need a copy constructor to take in a
GDALRasterBand object that I would presumably get with
ds->GDALGetRasterBand(bandnum), but if my derived class goes out of
scope then the base class dtor will be autom!
 atically called which is a no-no for GDALRasterBand.   I guess I should
add then currently my GSImage contains a vector<GSBand>.    The GSImage
won't directly support removing of bands (instead you would call
Subset() function which would write a new file containing the subset)
and I can't currently picture a scenario where an element of
vector<GSBand> would be removed but I'm not deep enough in this to say
that it could never happen.
 
matt

________________________________

From: gdal-dev-bounces@lists.maptools.org on behalf of Mateusz Loskot
Sent: Tue 8/29/2006 11:11 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDALDataset as a Base Class



Matt Hanson wrote:
> Interesting, my original implementation had GDALDataset as a private
> member as you suggest.   As I spent more time thinking about it I
> thought that a derived class would be better in the long run, so I
> started looking into what was required for that.

Matt,

...I'm back from dog walk so last reply today before going to bed :-)

Please, be aware that my reply refers to a general idea/concept,
and I likely have not considered design requirements of your project.
So, it's a kind of brainstorm from my side.

I assumed that:
- you want to avoid playing with pointers if it's possible
- you want to simplify GDAL dataset to form of image (to access
its bands, and other properties)

with these points in mind, I'd use composition.
BTW, to avoid misunderstanding, I use 'composition' term
according to this explanation:
http://ootips.org/uml-hasa.html

> As it turns out
> though I had already come to the conclusion that my GSBand class
> would have to use GDALRasterBand as a private member because of
> course you can't create raster objects directly.

Similarly to discussion above, everything depends on what is the
relation between GDALRasterBand and GSBand.
What does GSBand with the GDALRasterBand do?
Is GSBand is going to be a kind of Facade Pattern
(http://en.wikipedia.org/wiki/Facade_pattern)
that will offer realization of the same concept as GDALRasterBand,
but with simplified interface (e.g. tighter subset of functions, etc.)

Another option is taht GSBand will *extend* GDALRasterBand
functionality. In this case I'd consider inheritance.

Yet another variation possible is that may be your GSBand and other GS*
classes are going to enable users to play with values and references,
instead of pointers.

Yet more another option is that may be GSBand (and other GS* classes)
are needed to be an adapter around GDAL API (Adapter Pattern -
http://en.wikipedia.org/wiki/Wrapper_pattern)
adapting it to your system interface, etc.

> I suppose at the
> very least it makes sense to have them use the same design, thus
> GDALRasterBand and GDALDataset as private members.

I just want to say, I'm speculating a bit saying "I'd use encapsulation
over inheritance" because everything depends on your objectives.

> Thanks for the explanations, it's been a tremendous help!

I'm happy to hear I'm able to help someone with something!

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net <http://mateusz.loskot.net/> 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
class Spatial;
class Field;
class Object;

class Spatial
{
public:
    static Spatial *Open(const char *pszFileName, GDALAccess eAccess);
    virtual CPLErr GetExtent(double *adfExtent);
};

class Field : public Spatial
{
    GDALDataset *poGDALDataset;			// <---- the infamious pointer
    GDALDriver *poGDALDriver;			// <---- the infamious pointer
    
public:
    Field(void);
    ~Field(void);
    static Field *Open(const char *pszFileName, GDALAccess eAccess);
    virtual CPLErr GetExtent(double *adfExtent);
};

class Object : public Spatial
{
    OGRDataSource *poOGRDataSource;		// <---- the infamious pointer
    OGRSFDriver *poOGRDriver;			// <---- the infamious pointer
    
public:
    Object(void);
    ~Object(void);

    static Object *Open(const char *pszFileName, GDALAccess eAccess);
    virtual CPLErr GetExtent(double *adfExtent);
};
From mateusz at loskot.net  Wed Aug 30 12:17:25 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>
Message-ID: <44F5BA15.4050208@loskot.net>

Ivan Lucena wrote:
> Matt, All,
> 
> You are not alone, I don't mind use the pointer either.

Pointers are nothing bad, even good, but only if used correctly.

> See in the
> attachment an initial attempt to implement Michael Goodchild's Spatial
> Model (Well, at least GetExtent() is working identically for
> Fields[GDAL] and Objects[OGR] :-).

I'm not sure what to try to observe there.

> But what bugs me a little bit is the proliferation of wrapper and
> facades for GDAL that *we* are creating. For example, I am following the
> idea of VB6 GDAL wrapper and implementing a Delphi wrapper!

And? Something wrong with those wrappers? I've never seen them,
but again I'm not sure what is the problem here, if any.

> And I also believe that we can count the wrappers automatic created by
> swig because they also produce slightly different interfaces that
> requires especial documentation (and a separated support group from the
> gdal-dev list).
> 
> Any thoughts on that subject? 

Good wrappers are good :-)
No matter how created, manually or by generator.

> Any COM, CORBA, .Net idea?

Idea about what?
COM wrapper would good for Windows environment because COM
provides highest flexibility of reuse -> scripting
languages, .NET, VC6, and even C/C++ - without additional
wrapping layer.

So, personally if I'd need a GDAL wrapper for .NET, I'd go with COM.
Also COM-CORBA bridging is possible, but I don't see any
application here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Aug 30 12:21:28 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] FOSS4G OSGeo/GDAL Booth
Message-ID: <44F5BB08.80208@pobox.com>

Folks,

OSGeo will have a big booth at FOSS4G next month.  It is there for the
use of the Foundation as well as for the projects of the foundation, including
GDAL.  I will try to be in the booth as much as is practical, but I'd also
welcome others in the GDAL community who would like to spend some time in
the booth to talk about GDAL when questions arise.  Or, if you have questions
about GDAL, it might be a great time to ask in person.

I'm also sure it will be a hub of social activity.

Some details are available at:

   http://wiki.osgeo.org/index.php/OSGeo_at_FOSS4G2006#Staff_Plan


Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Aug 30 12:42:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>
Message-ID: <44F5BFE9.30805@pobox.com>

Ivan Lucena wrote:
> Matt, All,
> 
> You are not alone, I don't mind use the pointer either. See in the
> attachment an initial attempt to implement Michael Goodchild's Spatial
> Model (Well, at least GetExtent() is working identically for
> Fields[GDAL] and Objects[OGR] :-).
> 
> But what bugs me a little bit is the proliferation of wrapper and
> facades for GDAL that *we* are creating. For example, I am following the
> idea of VB6 GDAL wrapper and implementing a Delphi wrapper!
> 
> And I also believe that we can count the wrappers automatic created by
> swig because they also produce slightly different interfaces that
> requires especial documentation (and a separated support group from the
> gdal-dev list).

Ivan,

It is certainly impractical to support a huge number of different bindings
for GDAL in different languages well.  With the swig languages, my hope
was that a objects would appear similarly in all languages so it would be
easier to "document once", or even to relate things back to the core C++ API.

But I don't have a solution, and I'm not going to prevent people from doing
bindings just because they are hard to document.  But currently I think very
few of the bindings can be considered well supported.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Thu Aug 31 08:51:47 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] FOSS4G OSGeo/GDAL Booth
In-Reply-To: <44F5BB08.80208@pobox.com>
References: <44F5BB08.80208@pobox.com>
Message-ID: <44F6DB63.3050703@tkk.fi>

I'll be at the conference and can / plan to spend time in the booth.

Ari

Frank Warmerdam kirjoitti:
> Folks,
> 
> OSGeo will have a big booth at FOSS4G next month.  It is there for the
> use of the Foundation as well as for the projects of the foundation,
> including
> GDAL.  I will try to be in the booth as much as is practical, but I'd also
> welcome others in the GDAL community who would like to spend some time in
> the booth to talk about GDAL when questions arise.  Or, if you have
> questions
> about GDAL, it might be a great time to ask in person.
> 
> I'm also sure it will be a hub of social activity.
> 
> Some details are available at:
> 
>   http://wiki.osgeo.org/index.php/OSGeo_at_FOSS4G2006#Staff_Plan
> 
> 
> Best regards,
> ---------------------------------------+--------------------------------------
> 
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From ILucena at clarku.edu  Thu Aug 31 09:53:14 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <44F5BA15.4050208@loskot.net>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45501CE6374@Iris.ad.clarku.edu>

Hi there,

Mateusz Loskot wrote:
> And? Something wrong with those wrappers? I've never seen them, but
again
> I'm not sure what is the problem here, if any.

That is ok. I understand. The issue is more sensible to Frank. So I
believe his answer is good enough for both of us. 

> Pointers are nothing bad, even good, but only if used correctly.
> I'm not sure what to try to observe there.

I am showing a piece of my C++ implementation that uses GDALDataset
pointer as an attribute of my class. The things that Matt Hanson tried
to do in C++ I've tried too a year ago. But I finally give it up to the
"good use of pointer". It works and it is robust and I encouraging Matt
to keep doing this way. We both agree with that. I just have a sense
that the use of this kind of class-pointers is an indicator that
something is lacking. IMHO you should be able o develop in C++ without
ever looking to the GDAL C API.

But that leads to the discussion about the proliferation of GDAL
wrapper. So Frank had thought about that a long time ago, by adoption
SWIG. My questions is: Are we relying too much in SWIG and wrapper and
maybe there is something that could me done at once in GDAL?
 
> Idea about what?
> COM wrapper would good for Windows environment because COM provides
> highest flexibility of reuse -> scripting languages, .NET, VC6, and 
> even C/C++ -  without additional wrapping layer. 
> So, personally if I'd need a GDAL wrapper for .NET, I'd go with COM.
> Also COM-CORBA bridging is possible, but I don't see any
> application here.

So Mateusz, Now that you've got the "Idea", let's talk:

If you look around what the "competitors" (the GDAL's analogous) are
doing (there is a bunch of SDK to deal with geo-spatial data and
functionality out there, MapXtreme, ArcObject, BlueMarble, TatukGIS,
Abaco, etc.) They are developing in a "component" oriented fashion.
Don't you think so? Or whatever name you like to put on it. By doing
this way they can easily take the advantage of implementing the API
trough technologies like COM and have it done only once. Document once
too. For example, browsing at edn.esri.com I don't need to see only
Delphi example to learn some tricks. I can see then in C++, C# or
VB.NET, etc.

I have worked with UNIX for 10 years but I am out of it for 7, so I
don't know what is going on there. But I think that by exposing classes'
names and behavior and attributes though a C++ library it is not going
to make a lot of difference from a COM interface. That "COM-CORBA
bridging" think look interesting I will check it out...

GDAL architecture is really good. I use it trough C++, Python and trough
my own Delphi wrapper :-).  My Delphi plans are still the same: develop
a wrapper. It is fun. Some little tricks will make my wrapper easier to
user and therefore more productive. So, it looks like Matt and I have
the same goal.

Finally, if that is the philosophy of GDAL. I don't argue about It. It's
an excellent base layer and we will continue to create ours wrappers.

I guess that because we all want the best for GDAL, productive
discussions are welcome and I am hope that I wasn't misinterpreted as
rude. E-mail, you know...

Thanks Mateusz, Matt and thank you very much Frank,

Ivan Lucena



From mateusz at loskot.net  Thu Aug 31 11:14:37 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45501CE6374@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45501CE6374@Iris.ad.clarku.edu>
Message-ID: <44F6FCDD.50308@loskot.net>

Ivan Lucena wrote:
> Hi there,
> 
> Mateusz Loskot wrote:
>> And? Something wrong with those wrappers? I've never seen them, but
> again
>> I'm not sure what is the problem here, if any.
> 
> That is ok. I understand. The issue is more sensible to Frank. So I
> believe his answer is good enough for both of us. 

OK, it's clear.

>> Pointers are nothing bad, even good, but only if used correctly.
>> I'm not sure what to try to observe there.
> 
> I am showing a piece of my C++ implementation that uses GDALDataset
> pointer as an attribute of my class. The things that Matt Hanson tried
> to do in C++ I've tried too a year ago. But I finally give it up to the
> "good use of pointer". It works and it is robust and I encouraging Matt
> to keep doing this way.

I understand, yes this seems reasonable for me too.

> We both agree with that. I just have a sense
> that the use of this kind of class-pointers is an indicator that
> something is lacking. IMHO you should be able o develop in C++ without
> ever looking to the GDAL C API.

I'd try to develop smart pointers for GDALDataset and other
types to expose underlying types in reference-line style
and garbage collecting provided.

> But that leads to the discussion about the proliferation of GDAL
> wrapper. So Frank had thought about that a long time ago, by adoption
> SWIG. My questions is: Are we relying too much in SWIG and wrapper and
> maybe there is something that could me done at once in GDAL?

Personally, I don't see anything better for "done at once" idea
for scripting languages than SWIG.

>> Idea about what?
>> COM wrapper would good for Windows environment because COM provides
>> highest flexibility of reuse -> scripting languages, .NET, VC6, and 
>> even C/C++ -  without additional wrapping layer. 
>> So, personally if I'd need a GDAL wrapper for .NET, I'd go with COM.
>> Also COM-CORBA bridging is possible, but I don't see any
>> application here.
> 
> So Mateusz, Now that you've got the "Idea", let's talk:

Note, my COM idea is a non-portable idea.

> If you look around what the "competitors" (the GDAL's analogous) are
> doing (there is a bunch of SDK to deal with geo-spatial data and
> functionality out there,MapXtreme,

in Java for Windows

> ArcObject,

C++/.NET for Windows and Unix though I've no idea how it's portable

> BlueMarble,

C++ or VB -> for Windows

> TatukGIS,

Borland technologies (C++/Delphi) -> for Windows

> Abaco,

no idea

> They are developing in a "component" oriented fashion.
> Don't you think so?

Yes, but in highly not portable fashion at the same time.
What's the best portable technology of writing
software in your opinion?

> Or whatever name you like to put on it. By doing
> this way they can easily take the advantage of implementing the API
> trough technologies like COM and have it done only once. Document once
> too. For example, browsing at edn.esri.com I don't need to see only
> Delphi example to learn some tricks. I can see then in C++, C# or
> VB.NET, etc.

I agree that component-based arch is good, but I hardly see
conjunction to SWIG/GDAL issue.

> I have worked with UNIX for 10 years but I am out of it for 7, so I
> don't know what is going on there.

One of the famouse COM-like components arch is Bonobo,
created by Miguel de Icaza.

> But I think that by exposing classes'
> names and behavior and attributes though a C++ library it is not going
> to make a lot of difference from a COM interface. That "COM-CORBA
> bridging" think look interesting I will check it out...

C++ vtable is compatible with COM binary interface, so you don't
have to use COM to expose interface-based access to your components.
But I still don't see how it applies to "SWIG or not to SWIG" issue.

> GDAL architecture is really good.

Yes, and the main advantage for me is that it's very clear.
You can learn how to write GDAL/OGR driver in minutes.
Genuine simplicity is a bless, I can say something about it :-)

> I use it trough C++, Python and trough
> my own Delphi wrapper :-).  My Delphi plans are still the same: develop
> a wrapper. It is fun. Some little tricks will make my wrapper easier to
> user and therefore more productive. So, it looks like Matt and I have
> the same goal.

IMHO, wrappers are good because they open wide range of "markets"
for particular software, e.g. for GDAL and I agree it's good to
have wrappers for scripting languages, etc.

Regarding Matt's idea, I'm not sure what are his objectives.
IMHO, if it's like rewriting or restructuring GDAL types into
new shape that fits conventions of particular project, then
I'd say it's a waste of time
But if wrapping GDAL brings new values, then it's a good idea.

> Finally, if that is the philosophy of GDAL. I don't argue about It. It's
> an excellent base layer and we will continue to create ours wrappers.

I am not able to answer for GDAL project. I'm only share my
personal opinions.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Thu Aug 31 11:35:09 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] GDALDataset as a Base Class
In-Reply-To: <44F5BFE9.30805@pobox.com>
References: <6FD7C9DB26540B42A1207C69BF92D45501CE6201@Iris.ad.clarku.edu>
	<44F5BFE9.30805@pobox.com>
Message-ID: <44F701AD.5070103@tkk.fi>

Frank Warmerdam kirjoitti:
> for GDAL in different languages well.  With the swig languages, my hope
> was that a objects would appear similarly in all languages so it would be
> easier to "document once", or even to relate things back to the core 
> C++ API.

There's surely a benefit in having a similar look and feel for all 
languages for using GDAL.
But as has been discussed on the geowanking list, and before on this 
list, I think, each
language is a bit of its own island. Also, with high-level languages the 
approach for
designing an API is much more user-oriented, while for, say, C++ it is 
more developer-
oriented.

Currently I'm a bit stalled because of other things, with my design of 
the new
Geo::GDAL module[1]  for Perl, but in it I try to look the issue from 
the point of view
of a script-writing user. For example I recreated the Geometry class 
hierarchy, which
does not exist in the Swig bindings to OGR. It all feels a bit silly: 
C++ toC to C++ in
Swig to Perl to Perl, but there are reasons.

Ari

[1] http://map.hut.fi/gdal-perl/Geo-GDAL.html

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dmbaker at cox.net  Thu Aug 31 10:31:48 2006
From: dmbaker at cox.net (dmbaker)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] gdalwarp reprojection shift
In-Reply-To: <1155834448.44e4a250e7a3a@webmail.telus.net>
References: <1155764347.44e3907b60ade@webmail.telus.net>
	<5383fa5e0608161505m27a0e81dx4b7ff752320925@mail.gmail.com>
	<1155834448.44e4a250e7a3a@webmail.telus.net>
Message-ID: <6080582.post@talk.nabble.com>


Wim,

I ran into the same issue while writing a .NET GUI front end to GdalWarp.  I
too use the FWTools build of GdalWarp but was calling GdalWarp directly from
my C# code.  The images were being transformed, but did not match the Public
Land Survey grid I was overlaying (NAD83 UTM Zone 14 meters to NAD27
Oklahoma North).  The grid was offset a significant number of feet from the
transformed image.  As hinted at in the FAQ?s at
http://proj.maptools.org/faq.html, though the FWTools build of GdalWarp has
support for datum shifting built in, if it cannot find the shift files then
the shift process is skipped.

To fix the problem I had to set several environment variables to the
location of the shift files.  I looked at the FWTools startup batch file and
set the same environment variables it does.  Those are:

PROJ_LIB
GEOTIFF_CSV
GDAL_DATA

You must make sure the paths to the various data files are set in these
environment variables.  I am not sure all these need to be set, but for
safety I have.  I hope this helps.

David



chalmet wrote:
> 
> Hi Matthew, I replied yesterday, but apparently only sent it to you, so
> here is 
> a resent of my problem.
> 
> I actually am using FWtools (windows version)- gdalwarp is part of that.
> So, 
> according to what you wrote, this version should handle the datum shift 
> correctly.
> 
> Is there anybody who could help me (step by step instructions would be 
> extremely appreciated, as I am rather new to gdalwarp and proj4 and such) 
> handle this datum shift correctly.
> 
> Thanks!
> Wim.
> 
> Quoting Matthew Perry <perrygeo@gmail.com>:
> 
>> Wim,
>> 
>> On 8/16/06, chalmet@telusplanet.net <chalmet@telusplanet.net> wrote:
>> > If I do this using gdalwarp, I have a shift of about 70 meters compared
>> to
>> my
>> > reprojected tiles in PCI and ERmapper. I use the following command for
>> gdalwarp:
>> >
>> > *******************
>> > gdalwarp -s_srs "+proj=tmerc +datum=NAD83 +x_0=500000 +lon_0=-115
>> +lat_0=0
>> > +k=0.9992" -t_srs "+proj=latlong +datum=NAD27" -rc -tr 0.000035
>> 0.000035
>> > 400113.tif 400113_latlong.tif
>> > *******************
>> >
>> > Does anybody know why this is happening. And more importantly, how
>> could I
>> make
>> > the gdalwarp tiff line up with my other tiffs, meaning avoid the 70m
>> shift?
>> 
>> 
>> Most likely your version of proj4 (which gdal uses for reprojecting
>> coordinates) is not built with support for datum shifts. The proj4 faq
>> is pretty helpful for this issue...
>> http://proj.maptools.org/faq.html.
>> 
>> You might have to rebuild proj4 with the datum support files or you
>> can download FWTools (for win and linux) that has proj4 precompiled
>> with the datum shift files.
>> -- 
>> Matt Perry
>> perrygeo@gmail.com
>> http://www.perrygeo.net
>> 
> 
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/gdalwarp-reprojection-shift-tf2118055.html#a6080582
Sent from the GDAL - Dev forum at Nabble.com.



From vdharan2001 at gmail.com  Thu Aug 31 05:06:22 2006
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] Problem in Transforming Lat long to UTM
Message-ID: <FJEAJLIJBMFCHFKGDAGKMEMLCCAA.vdharan2001@gmail.com>

Hello,

I have a problem is converting lat long to UTM. My init function is as
follows

///////////////////
    oSourceSRS.SetGeogCS("My geographic coordinate system",
                    "WGS_1984",
                    "My WGS84 Spheroid",
                    SRS_WGS84_SEMIMAJOR,
					SRS_WGS84_INVFLATTENING,
                    "Greenwich",
					0.0,
                    "degree",
					0.0174532925199433);
    oTargetSRS.SetProjCS( "UTM (WGS84) in northern hemisphere." );
    oTargetSRS.SetWellKnownGeogCS( "WGS84" );
    oTargetSRS.SetUTM(28,TRUE );
//////////////////

When i  do a transform on the point Lat=33 deg 59 Min North and Lon= 6 deg
51 Min West, the resultant UTM are Easting = 2536499 and Northing = 3985824.
This resultant UTM appears to be for Lon = 6 deg 51 Min East. What should i
do do get the correct UTM. Please Help.

Best Regards,
N.Vidhiyadharan
--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.405 / Virus Database: 268.11.5/426 - Release Date: 23/08/2006


From dmbaker at cox.net  Thu Aug 31 10:31:48 2006
From: dmbaker at cox.net (dmbaker)
Date: Wed Nov 21 11:50:20 2007
Subject: [Gdal-dev] gdalwarp reprojection shift
In-Reply-To: <1155834448.44e4a250e7a3a@webmail.telus.net>
References: <1155764347.44e3907b60ade@webmail.telus.net>
	<5383fa5e0608161505m27a0e81dx4b7ff752320925@mail.gmail.com>
	<1155834448.44e4a250e7a3a@webmail.telus.net>
Message-ID: <6080582.post@talk.nabble.com>


Wim,

I ran into the same issue while writing a .NET GUI front end to GdalWarp.  I
too use the FWTools build of GdalWarp but was calling GdalWarp directly from
my C# code.  The images were being transformed, but did not match the Public
Land Survey grid I was overlaying (NAD83 UTM Zone 14 meters to NAD27
Oklahoma North).  The grid was offset a significant number of feet from the
transformed image.  As hinted at in the FAQ?s at
http://proj.maptools.org/faq.html, though the FWTools build of GdalWarp has
support for datum shifting built in, if it cannot find the shift files then
the shift process is skipped.

To fix the problem I had to set several environment variables to the
location of the shift files.  I looked at the FWTools startup batch file and
set the same environment variables it does.  Those are:

PROJ_LIB
GEOTIFF_CSV
GDAL_DATA

You must make sure the paths to the various data files are set in these
environment variables.  I am not sure all these need to be set, but for
safety I have.  I hope this helps.

David



chalmet wrote:
> 
> Hi Matthew, I replied yesterday, but apparently only sent it to you, so
> here is 
> a resent of my problem.
> 
> I actually am using FWtools (windows version)- gdalwarp is part of that.
> So, 
> according to what you wrote, this version should handle the datum shift 
> correctly.
> 
> Is there anybody who could help me (step by step instructions would be 
> extremely appreciated, as I am rather new to gdalwarp and proj4 and such) 
> handle this datum shift correctly.
> 
> Thanks!
> Wim.
> 
> Quoting Matthew Perry <perrygeo@gmail.com>:
> 
>> Wim,
>> 
>> On 8/16/06, chalmet@telusplanet.net <chalmet@telusplanet.net> wrote:
>> > If I do this using gdalwarp, I have a shift of about 70 meters compared
>> to
>> my
>> > reprojected tiles in PCI and ERmapper. I use the following command for
>> gdalwarp:
>> >
>> > *******************
>> > gdalwarp -s_srs "+proj=tmerc +datum=NAD83 +x_0=500000 +lon_0=-115
>> +lat_0=0
>> > +k=0.9992" -t_srs "+proj=latlong +datum=NAD27" -rc -tr 0.000035
>> 0.000035
>> > 400113.tif 400113_latlong.tif
>> > *******************
>> >
>> > Does anybody know why this is happening. And more importantly, how
>> could I
>> make
>> > the gdalwarp tiff line up with my other tiffs, meaning avoid the 70m
>> shift?
>> 
>> 
>> Most likely your version of proj4 (which gdal uses for reprojecting
>> coordinates) is not built with support for datum shifts. The proj4 faq
>> is pretty helpful for this issue...
>> http://proj.maptools.org/faq.html.
>> 
>> You might have to rebuild proj4 with the datum support files or you
>> can download FWTools (for win and linux) that has proj4 precompiled
>> with the datum shift files.
>> -- 
>> Matt Perry
>> perrygeo@gmail.com
>> http://www.perrygeo.net
>> 
> 
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/gdalwarp-reprojection-shift-tf2118055.html#a6080582
Sent from the GDAL - Dev forum at Nabble.com.



