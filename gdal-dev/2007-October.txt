From warmerdam at pobox.com  Mon Oct  1 00:59:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get the affine information
In-Reply-To: <20951614.782691191169583566.JavaMail.coremail@bj126app92.126.com>
References: <20951614.782691191169583566.JavaMail.coremail@bj126app92.126.com>
Message-ID: <931f8ea90709302159k188170bxbe27fff01ce5f0dd@mail.gmail.com>

On 9/30/07, ??? <shenjinx@126.com> wrote:
> Hello ,everyone:
>      It is my first time here,and i am very happy to share all kinds of
> information here! I am a gdal newer ,now i have a problem need your help.
>     I have an image and it format is erdas image(.img),when i open it with
> erdas,i can see the image information as follow:
>
>        upper Left X:565946.1197      upper Left Y:4439207.688
>        Lower Left X:351363.3907      upper Left Y:3363647.278
>        pixel sizeX:N/A               pixel Size Y:N/A
>        unit:meters                  Geo model:Affine
>     Now ,i want to get it affine parameters with gdal function
> GetGeotransform with python,but this image haven't such function. i use the
> Open Function open the image ,and dir()function to view its function ,but i
> just looked the following information:
>
> >>> da=gdal.Open("d:\input\aa.img")
> >>> dir(da)
> ['__class__', '__delattr__', '__doc__', '__getattribute__', '__hash__',
> '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__',
> '__setattr__', '__str__']
>
> On the other hand,i try another image with the same course,the result as
> following:
>
> >>> da=gdal.Open("d:\output\yy.img")
> >>> dir(da)
> ['AddBand', 'AdviseRead', 'BuildOverviews', 'FlushCache', 'GetDescription',
> 'GetDriver', 'GetGCPCount', 'GetGCPProjection', 'GetGCPs',
> 'GetGeoTransform', 'GetMetadata', 'GetProjection', 'GetProjectionRef',
> 'GetRasterBand', 'GetSubDatasets', 'RasterCount', 'RasterXSize',
> 'RasterYSize', 'ReadAsArray', 'ReadRaster', 'RefreshBandInfo',
> 'SetDescription', 'SetGCPs', 'SetGeoTransform', 'SetMetadata',
> 'SetProjection', 'WriteRaster', '__del__', '__doc__', '__init__',
> '__module__', '_band', '_o']
>
> I am so wonder what the matter of this,and if one of you ever met such
> problem or known it ,can you tell me in detailed, and i am very grateful!
>      Thank you for your attention!

Jinxiang Shen,

I believe the gdal.Open() on aa.img failed and returned None.
The dir() results look like the results for a None object.

There should have been some sort of error message written
to stderr during the gdal.Open() call.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From danhomerick at gmail.com  Mon Oct  1 03:08:07 2007
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Does GDALGridCreate function exist in version 1.4.0?
Message-ID: <b9e170000710010008n52bbf7a1s5db991290c12441b@mail.gmail.com>

The Doxygen pages show there being a GDALGridCreate function in gdal_alg.h
but on my version 1.4.0 installation I can't find any trace of it. Is it an
old function that's been rolled into something else? Too new? Other?

Looks very handy.

Thanks,
 - Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071001/75675c7e/attachment.html
From tommy.jansson at kongsberg.com  Mon Oct  1 08:35:57 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get value of an attribute within an object class
Message-ID: <12978411.post@talk.nabble.com>


How do I get the value of an attribute within an object class? 

I'm for instance interested in retrieving the value of the VALDCO (Value of
depth contour) attribute from within the DEPCNT (Depth Contour) object
class.

The project I'm working on is parsing S-57 files and loading selected
geometies into a custom class structure. The code is written in C++, using
the OGR Simple Feature Library.

--Tommy
-- 
View this message in context: http://www.nabble.com/How-to-get-value-of-an-attribute-within-an-object-class-tf4548075.html#a12978411
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From tommy.jansson at kongsberg.com  Mon Oct  1 09:39:30 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get value of an attribute within an object class
Message-ID: <12978411.post@talk.nabble.com>


How do I get the value of an attribute within an object class? 

I'm for instance interested in retrieving the value of the VALDCO (Value of
depth contour) attribute from within the DEPCNT (Depth Contour) object
class.

The project I'm working on is parsing S-57 files and loading selected
geometies into a custom class structure. The code is written in C++, using
the OGR Simple Feature Library.

--Tommy
-- 
View this message in context: http://www.nabble.com/How-to-get-value-of-an-attribute-within-an-object-class-tf4548075.html#a12978411
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From dron at ak4719.spb.edu  Mon Oct  1 09:58:09 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Does GDALGridCreate function exist in version 1.4.0?
In-Reply-To: <b9e170000710010008n52bbf7a1s5db991290c12441b@mail.gmail.com>
References: <b9e170000710010008n52bbf7a1s5db991290c12441b@mail.gmail.com>
Message-ID: <20071001135809.GA30067@ak4719.spb.edu>

On Mon, Oct 01, 2007 at 12:08:07AM -0700, Dan Homerick wrote:
> The Doxygen pages show there being a GDALGridCreate function in
> gdal_alg.h but on my version 1.4.0 installation I can't find any trace
> of it. Is it an old function that's been rolled into something else?
> Too new? Other?

Dan,

This is very new stuff, it will be available in the next GDAL release.
There will be also appropriate userspace utility. For now only C API
available.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Oct  1 10:01:42 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
Message-ID: <20071001140142.GB30067@ak4719.spb.edu>

On Sun, Sep 30, 2007 at 02:15:54PM -0500, Edward Fialkowski wrote:
>   HDF4 (ro): Hierarchical Data Format Release 4
>   HDF4Image (rw+): HDF4 Dataset
> 
> shows up in --formats, but...
> 
> [edfialk@niceguy apps]$ ./gdal_translate -of netCDF no2track20070909.hdf
> no2track20070909.nc
> ERROR 4: `no2track20070909.hdf' not recognised as a supported file format.
> 
> GDALOpen failed - 4
> `no2track20070909.hdf' not recognised as a supported file format.

Edward,

Could you make this file available for me? It is hard to identify the
problem without sample.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From wef1 at cec.wustl.edu  Mon Oct  1 11:36:54 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <20071001140142.GB30067@ak4719.spb.edu>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
Message-ID: <f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>

Hey Andrey, you're right.  Here ya go:
http://niceguy.wustl.edu/no2track.hdf

Thanks.
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071001/cce34ddc/attachment.html
From warmerdam at pobox.com  Mon Oct  1 12:35:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get value of an attribute within an object class
In-Reply-To: <12978411.post@talk.nabble.com>
References: <12978411.post@talk.nabble.com>
Message-ID: <931f8ea90710010935p341eb839te2381fc75fec284@mail.gmail.com>

On 10/1/07, tjansson <tommy.jansson@kongsberg.com> wrote:
>
> How do I get the value of an attribute within an object class?
>
> I'm for instance interested in retrieving the value of the VALDCO (Value of
> depth contour) attribute from within the DEPCNT (Depth Contour) object
> class.

Tommy,

Given a pointer to the OGRFeature named poFeature you would do:

  double VALDCO;

  VALDCO = poFeature->GetFieldAsDouble( "VALDCO" );

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Mon Oct  1 13:12:27 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Namespaced Python Bindings
Message-ID: <5CC94F7B-F77D-4FA6-A432-DD4444DF08D0@gmail.com>

All,

With Chris Barker providing the brainpower and myself providing the  
typing ability, we have reorganized the next-gen Python bindings to  
utilize the 'osgeo' namespace by default.  It is expected that the  
next-gen bindings will be the default bindings distributed with GDAL  
1.5.  The reason for the 'osgeo' namespace rather than using just  
'gdal' is that we can't have a package and a module at the same time  
and still support the old import method.  Because we need to continue  
to support the old-style import for a while, it was decided to follow  
C#'s lead and use 'osgeo'.

I have written an RFC (voted upon and passed by voice vote!)  
detailing the changes

http://trac.osgeo.org/gdal/wiki/rfc17_python_namespaces

Thanks for a great sprint!

Howard

From Chris.Barker at noaa.gov  Mon Oct  1 13:31:10 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Affine Transformation and Calibration Equation for
	Maptech/BSB format
In-Reply-To: <931f8ea90709270746x5133c6a4l9d9a62ac6fe24f75@mail.gmail.com>
References: <694767.43926.qm@web60120.mail.yahoo.com>
	<931f8ea90709270746x5133c6a4l9d9a62ac6fe24f75@mail.gmail.com>
Message-ID: <47012EDE.5090505@noaa.gov>

Frank Warmerdam wrote:
> Internally GDAL can compute 2nd order polynomial warp
> equations from the reference points and this is what I
> generally encourage people to use (via gdalwarp) to
> convert the images to a nice "north up" image.


> But, in
> fact, I presume the files are actually normally in a mercator
> projection and that we would be even better off to work out
> the details of that and then use proper reprojection to get
> to other coordinate systems.

Hi Frank,

This is what I was referring to last week when I said goodbye. Yes, 
almost all NOAA charts are Mercator (they may be a few that aren't near 
the poles). It appears to be a limitation in the BSB drivers that the 
projection info isn't picked up. Everything needed is in the text header 
of the BSB files, so it shouldn't be hard to do.

That being said, a 2nd order polynomial fit to the GRPs is probably good 
enough for most uses -- but I'm a purist.

I've been hoping for a while to dig into this and try to fix it, but 
haven't had a chance yet. If anyone else does, I'd be glad to do a lot 
of testing -- I should be able to get ALL the NOAA charts here, and run 
tests against them.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Mon Oct  1 13:36:08 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Ogr and Postgis support
In-Reply-To: <44B7EDFD-6EA4-11DC-BCD9-000A277A733C@light42.com>
References: <007101c801a9$513e7e50$ba03a8c0@GUS>
	<46FE2BD9.9030307@zappmobile.ro>
	<44B7EDFD-6EA4-11DC-BCD9-000A277A733C@light42.com>
Message-ID: <47013008.70604@noaa.gov>

Brian Hamlin wrote:
> For python, I have since upgraded to 2.5.1, leaving me with two
> python installs, which causes me grief now and then. But basically,
> the GDAL bindings work fine.

Which python are you using them with? Apple's 2.3 is a bit broken (I
think mostly for GUI apps though), and the consensus among most
MacPython folks is that it is best to use one of the newer "framework"
builds -- 2.4 or 2.5.

> I installed Numeric and that works fine.

Numeric is generally still working, but it is no longer supported, and I
think has a couple issues with 2.5 -- going to numpy is a good idea.

> I do not follow the talk of NumPy and new Python bindings.

Both numpy and the NG bindings are the way to go into the future. The NG
bindings are getting attention now, and work great. I'm not sure when
they will become the default -- maybe 1.5-- Frank?

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From maplabs at light42.com  Mon Oct  1 14:14:59 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Ogr and Postgis support
In-Reply-To: <47013008.70604@noaa.gov>
References: <007101c801a9$513e7e50$ba03a8c0@GUS>
	<46FE2BD9.9030307@zappmobile.ro>
	<44B7EDFD-6EA4-11DC-BCD9-000A277A733C@light42.com>
	<47013008.70604@noaa.gov>
Message-ID: <38965F74-704A-11DC-97B3-000A277A733C@light42.com>

On Oct 1, 2007, at 10:36 AM, Christopher Barker wrote:

> Brian Hamlin wrote:
>> For python, I have since upgraded to 2.5.1, leaving me with two
>> python installs, which causes me grief now and then. But basically,
>> the GDAL bindings work fine.
>
> Which python are you using them with? Apple's 2.3 is a bit broken (I
> think mostly for GUI apps though), and the consensus among most
> MacPython folks is that it is best to use one of the newer "framework"
> builds -- 2.4 or 2.5.
>

If you invoke /usr/bin/python, its the "stock" OSX python
/usr/local/bin/python gives me the Framework install, 2.5.1

>> I installed Numeric and that works fine.
>
> Numeric is generally still working, but it is no longer supported, and 
> I
> think has a couple issues with 2.5 -- going to numpy is a good idea.

"Issues" can mean a lot of things! Since I do make minimal use of the 
whole setup,
I may not be affected by whatever those are..

For example, i run the AutoTest series.. oh wait, I patched out three 
bad tests..
checking..  ogr_mem_10(), ogr_wkbwkt_geom_bigexponents(), osr_proj4_3()
those were problematic....

    bna , sqlite , dimap, nitf_8 - fail (blowup)

all in all
Succeeded: 547
Failed 32 (17 blew exceptions)
Skipped 224   <- uninstalled options for example

i sent the output to mloskot two weeks ago when I first laid eyes on 
AutoTest
I think he is probably still travelling
>
>> I do not follow the talk of NumPy and new Python bindings.
>
> Both numpy and the NG bindings are the way to go into the future. The 
> NG
> bindings are getting attention now, and work great. I'm not sure when
> they will become the default -- maybe 1.5-- Frank?
>

for now, I can access OGR functions, and some basic geometry functions. 
Thats fine for me.
I _do_ wish that SQLite would work :-)

hth
   -Brian

==
Brian Hamlin
ISDE5 Steering Committee
NextNow Collaboratory
Planetwork.net
(415) 717-4462 (c)

> -Chris
>


From christian.mueller at nvoe.at  Tue Oct  2 02:38:34 2007
From: christian.mueller at nvoe.at (Christian Mueller)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] New phyton utility
Message-ID: <200710020838.34586.christian.mueller@nvoe.at>

Hi, I am new to the gdal-dev list and have some questions.

For my project I had to tile 4 different maps of Austria and to build tiled 
overviews. I tried to handle this with the gdal utilities but I had very long 
runtimes. 

Inspired from gdal_mergy.py I developped a counterpart called gdal_tile.py

This utility has the following features

tile an image (each tile in its own file)
retile a tiled image 
create tiled overviews (building a pyramid)
creating shape files for all the generated tiles for providing the basic for 
fast access
reproject the new  tiles

Searching the internet shows me that I am not the only guy having this 
problem, so I would like to contribute this python module.

What are the next steps

mcr



From tommy.jansson at kongsberg.com  Tue Oct  2 03:01:57 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get value of an attribute within an object class
In-Reply-To: <931f8ea90710010935p341eb839te2381fc75fec284@mail.gmail.com>
References: <12978411.post@talk.nabble.com>
	<931f8ea90710010935p341eb839te2381fc75fec284@mail.gmail.com>
Message-ID: <12993786.post@talk.nabble.com>


I've already tried that, and the value I get in return has until now always
been 0 (zero).

First I use int iOBJL = poFDefn->GetFieldIndex("OBJL"); to get the object
label code ID from the appurtenant feature definition.

Then this return value is used to get all features of type DPTCNT (code 43)
if (43 == poFeature->GetFieldAsInteger(iOBJL)).... 

Thereafter I've tried both double dValDCo =
poFeature->GetFieldAsDouble(174); (where 174 should be the code for VALDCO)
and double dValDCo = poFeature->GetFieldAsDouble("VALDCO");, but the return
value is always 0 (zero).

I've tried several maps, most of them downloaded from NOAA, but the result
is always the same. Am I missing something?

--Tommy 


Frank Warmerdam-2 wrote:
> 
> On 10/1/07, tjansson <tommy.jansson@kongsberg.com> wrote:
>>
>> How do I get the value of an attribute within an object class?
>>
>> I'm for instance interested in retrieving the value of the VALDCO (Value
>> of
>> depth contour) attribute from within the DEPCNT (Depth Contour) object
>> class.
> 
> Tommy,
> 
> Given a pointer to the OGRFeature named poFeature you would do:
> 
>   double VALDCO;
> 
>   VALDCO = poFeature->GetFieldAsDouble( "VALDCO" );
> 
> Best regards,
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-get-value-of-an-attribute-within-an-object-class-tf4548075.html#a12993786
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Tue Oct  2 03:29:42 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Re: New phyton utility
In-Reply-To: <200710020838.34586.christian.mueller@nvoe.at>
References: <200710020838.34586.christian.mueller@nvoe.at>
Message-ID: <fdss15$4nq$1@sea.gmane.org>

Christian Mueller schrieb:
> Hi, I am new to the gdal-dev list and have some questions.
> 
> For my project I had to tile 4 different maps of Austria and to build tiled 
> overviews. I tried to handle this with the gdal utilities but I had very long 
> runtimes. 
> 
> Inspired from gdal_mergy.py I developped a counterpart called gdal_tile.py
> 
> This utility has the following features
> 
> tile an image (each tile in its own file)
> retile a tiled image 
> create tiled overviews (building a pyramid)
> creating shape files for all the generated tiles for providing the basic for 
> fast access
> reproject the new  tiles
> 
> Searching the internet shows me that I am not the only guy having this 
> problem, so I would like to contribute this python module.
> 
> What are the next steps
> 
> mcr

Hi Christian,

do you know the gdal2tiles project? It seems to provide similar 
functionality, but perhaps with different targeted use.

http://wiki.osgeo.org/index.php/GDAL2Tiles_SoC_2007

regards
Wolfgang


From URaudszus at STADTDO.DE  Tue Oct  2 05:20:18 2007
From: URaudszus at STADTDO.DE (Uwe Raudszus)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] gdalwarp does not use my +towgs84 parameter
Message-ID: <12993966.post@talk.nabble.com>


Hallo List,

I'm trying to reproject a tif image using gdalwarp.  Specially, 
from GAUSS-KRUEGER Zone 2 to UTM Zone 32 (epsg:25832). For more precision i
try to use local towgs84
parameter. But it seems so, that gdalwarp does not use my +towgs84
parameter.
Is there any way to include these parameters in my gdalwarp code?

Uwe


C:\work\rasterfactory\work>gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=6
+k=1.0
00000 +x_0=2500000 +y_0=0 +ellps=bessel +datum=potsdam
+towgs84=600.75,20,413  +
units=m" -t_srs EPSG:25832 -multi -dstnodata 255 -of Gtiff -co
"INTERLEAVE=PIXEL
" -co COMPRESS=PACKBITS -co TFW=true
c:\work\rasterfactory\output\8\8_31466_wgs.
tif c:\work\rasterfactory\output\8\8_25832.tif
Output dataset c:\work\rasterfactory\output\8\8_25832.tif exists,
but some commandline options were provided indicating a new dataset
should be created.  Please delete existing dataset and run again.

C:\work\rasterfactory\work>gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=6
+k=1.0
00000 +x_0=2500000 +y_0=0 +ellps=bessel +datum=potsdam
+towgs84=600.75,20,413  +
units=m" -t_srs EPSG:25832 -multi -dstnodata 255 -of Gtiff -co
"INTERLEAVE=PIXEL
" -co COMPRESS=PACKBITS -co TFW=true
c:\work\rasterfactory\output\8\8_31466_wgs.
tif c:\work\rasterfactory\output\8\8_25832.tif
Copying color table from c:\work\rasterfactory\output\8\8_31466_wgs.tif to
new f
ile.
Creating output file that is 8861P x 9557L.
Processing input file c:\work\rasterfactory\output\8\8_31466_wgs.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done.

C:\work\rasterfactory\work>listgeo
c:\work\rasterfactory\output\8\8_25832.tif
TIFFReadDirectory: Warning, Unknown field with tag 42113 (0xa481)
encountered.
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0
         387002.011       5710514.84       0
      ModelPixelScaleTag (1,3):
         0.0564260761     0.0564260761     0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,22): "ETRS89 / UTM zone 32N"
      GeogCitationGeoKey (Ascii,7): "ETRS89"
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): Unknown-25832
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      End_Of_Keys.
   End_Of_Geotiff.

PCS = 25832 (ETRS89 / UTM zone 32N)
Projection = 16032 (UTM zone 32N)
Projection Method: CT_TransverseMercator
   ProjNatOriginLatGeoKey: 0.000000 (  0d 0' 0.00"N)
   ProjNatOriginLongGeoKey: 9.000000 (  9d 0' 0.00"E)
   ProjScaleAtNatOriginGeoKey: 0.999600
   ProjFalseEastingGeoKey: 500000.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4258/ETRS89
Datum: 6258/European Terrestrial Reference System 1989
Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (  387002.011, 5710514.843)
Lower Left    (  387002.011, 5709975.579)
Upper Right   (  387502.002, 5710514.843)
Lower Right   (  387502.002, 5709975.579)
Center        (  387252.007, 5710245.211)



C:\work\rasterfactory\work>gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=6
+k=1.0
00000 +x_0=2500000 +y_0=0 +ellps=bessel +datum=potsdam  +units=m" -t_srs
EPSG:25
832 -multi -dstnodata 255 -of Gtiff -co "INTERLEAVE=PIXEL" -co
COMPRESS=PACKBITS
 -co TFW=true c:\work\rasterfactory\output\8\8_31466_wgs.tif
c:\work\rasterfacto
ry\output\8\8_25832_2.tif
Copying color table from c:\work\rasterfactory\output\8\8_31466_wgs.tif to
new f
ile.
Creating output file that is 8861P x 9557L.
Processing input file c:\work\rasterfactory\output\8\8_31466_wgs.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done.

C:\work\rasterfactory\work>listgeo
c:\work\rasterfactory\output\8\8_25832_2.tif
TIFFReadDirectory: Warning, Unknown field with tag 42113 (0xa481)
encountered.
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0
         387002.011       5710514.84       0
      ModelPixelScaleTag (1,3):
         0.0564260761     0.0564260761     0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,22): "ETRS89 / UTM zone 32N"
      GeogCitationGeoKey (Ascii,7): "ETRS89"
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): Unknown-25832
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      End_Of_Keys.
   End_Of_Geotiff.

PCS = 25832 (ETRS89 / UTM zone 32N)
Projection = 16032 (UTM zone 32N)
Projection Method: CT_TransverseMercator
   ProjNatOriginLatGeoKey: 0.000000 (  0d 0' 0.00"N)
   ProjNatOriginLongGeoKey: 9.000000 (  9d 0' 0.00"E)
   ProjScaleAtNatOriginGeoKey: 0.999600
   ProjFalseEastingGeoKey: 500000.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4258/ETRS89
Datum: 6258/European Terrestrial Reference System 1989
Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    (  387002.011, 5710514.843)
Lower Left    (  387002.011, 5709975.579)
Upper Right   (  387502.002, 5710514.843)
Lower Right   (  387502.002, 5709975.579)
Center        (  387252.007, 5710245.211)

-- 
View this message in context: http://www.nabble.com/gdalwarp-does-not-use-my-%2Btowgs84-parameter-tf4553338.html#a12993966
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From ivan.lucena at pmldnet.com  Tue Oct  2 06:10:27 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Visual C++ projects
Message-ID: <47021913.1030502@pmldnet.com>

Hi there,

For those who Edit/Build GDAL using Visual Studio.

I updated the two Visual C++ Makefile projects in GDAL, 
makegdal71.vcproj and makegdal80.vcproj.

Now they include in the tree all the sources code and header from gcore, 
alg, port, apps, frmts/*, ogr, and ogrsf_frmts/*.

Advantages of using a Makefile project:

o Uses the original makefile.vc and nmake.opt
o Auto-complete works just like a regular "Win32 DLL" project
o "Go to definition" and "Go to declaration" works too
o Interactive debugging works just the same

The current settings are:
--------------------------------------
Build:
run nmake -f makefile.vc

Rebuild:
run nmake -f makefile.vc clean
run nmake -f makefile.vc
run nmake -f makefile.vc install

Clean:
run nmake -f makefile.vc clean
--------------------------------------

But you can play with those settings the way it attends you better. For 
example, If you want to use the F7 key just to run your driver's 
makefile, you can changed the Build script to something like that:

--------------------------------------
Build:
cd $(ProjectDir)/frmts/driver
run nmake -f makefile.vc
--------------------------------------

Best regards,

Ivan

From warmerdam at pobox.com  Tue Oct  2 11:06:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get value of an attribute within an object class
In-Reply-To: <12993786.post@talk.nabble.com>
References: <12978411.post@talk.nabble.com>
	<931f8ea90710010935p341eb839te2381fc75fec284@mail.gmail.com>
	<12993786.post@talk.nabble.com>
Message-ID: <931f8ea90710020806y5b1818c7p59941a9637c09c2f@mail.gmail.com>

On 10/2/07, tjansson <tommy.jansson@kongsberg.com> wrote:
>
> I've already tried that, and the value I get in return has until now always
> been 0 (zero).
>
> First I use int iOBJL = poFDefn->GetFieldIndex("OBJL"); to get the object
> label code ID from the appurtenant feature definition.
>
> Then this return value is used to get all features of type DPTCNT (code 43)
> if (43 == poFeature->GetFieldAsInteger(iOBJL))....
>
> Thereafter I've tried both double dValDCo =
> poFeature->GetFieldAsDouble(174); (where 174 should be the code for VALDCO)
> and double dValDCo = poFeature->GetFieldAsDouble("VALDCO");, but the return
> value is always 0 (zero).
>
> I've tried several maps, most of them downloaded from NOAA, but the result
> is always the same. Am I missing something?

Tommy,

Does ogrinfo report the corect VALDCO values for these features?
Based on your use of OBJL I'm starting to suspect the S-57
support files are not being found, and so all the extended
per-feature-class attributes are not being found.  The solution
to that is to set the GDAL_DATA environment variable to point
the directory with the s57objectclasses.csv and related files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Oct  2 11:19:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] gdalwarp does not use my +towgs84 parameter
In-Reply-To: <12993966.post@talk.nabble.com>
References: <12993966.post@talk.nabble.com>
Message-ID: <931f8ea90710020819x3a9049eyc06d7b23187db29f@mail.gmail.com>

On 10/2/07, Uwe Raudszus <URaudszus@stadtdo.de> wrote:
>
> Hallo List,
>
> I'm trying to reproject a tif image using gdalwarp.  Specially,
> from GAUSS-KRUEGER Zone 2 to UTM Zone 32 (epsg:25832). For more precision i
> try to use local towgs84
> parameter. But it seems so, that gdalwarp does not use my +towgs84
> parameter.
> Is there any way to include these parameters in my gdalwarp code?
...
> C:\work\rasterfactory\work>gdalwarp -s_srs "+proj=tmerc +lat_0=0 +lon_0=6
> +k=1.0
> 00000 +x_0=2500000 +y_0=0 +ellps=bessel +datum=potsdam
> +towgs84=600.75,20,413  +
> units=m"

Uwe,

I think the problem is your specifying +datum=potsdam.  This
internally evaluates to a +ellps and +towgs84 setting and
GDAL picks up the first, not the last towgs84 setting.

So, hopefully, just dropping the +datum=potsdam setting
will resolve the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dron at ak4719.spb.edu  Tue Oct  2 12:00:44 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
	<f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
Message-ID: <20071002160043.GA4914@ak4719.spb.edu>

On Mon, Oct 01, 2007 at 10:36:54AM -0500, Edward Fialkowski wrote:
> Hey Andrey, you're right.  Here ya go:
> http://niceguy.wustl.edu/no2track.hdf

Ed,

Is it a full dataset? The size of file there is 767448 bytes and it
seems to be incomplete and broken.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From nashirak at gmail.com  Tue Oct  2 15:40:37 2007
From: nashirak at gmail.com (nashirak)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Issue with 1.4.2 gdalwarp
Message-ID: <9623c28c0710021240v5dd55a74i793b7d6a13077713@mail.gmail.com>

I was looking into why the 1.4.2 version of GDAL seemed to remove the
geospatial information when attempting to rotate the image to north up.  I
ran across this post:

http://lists.maptools.org/pipermail/gdal-dev/2007-June/013287.html

I downloaded FWTools 1.3.7, as suggested here
http://lists.maptools.org/pipermail/gdal-dev/2007-June/013290.html,  and
tried to use the gdalwarp that came with the FWTools package.  This program
did not remove the geospatial information and gave me a correct result.  Is
there a fix for this in a later GDAL version?  What version of GDAL was
FWTool 1.3.7 compiled against?

Thanks.

-- 
Clayton Bluhm
Home: nashirak@gmail.com
"si vis pacem para bellum" -- Vegetius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071002/d434ade6/attachment.html
From wef1 at cec.wustl.edu  Tue Oct  2 16:47:03 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <20071002160043.GA4914@ak4719.spb.edu>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
	<f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
	<20071002160043.GA4914@ak4719.spb.edu>
Message-ID: <f4c7e92f0710021347o51a26d3dpe3d8d4aa76a4761@mail.gmail.com>

Yep, someone totally gave me some bad files.  Both of them that were given
to me were bad, so now I went and got another 19 mb file, which is
recognized.

I'm really sorry to take the time on simply a bad file.

Unfortunately, though, I'm not quite ready for translation, so now I really
need some help.

[root@niceguy apps]# ./gdal_translate -of netCDF no2track20060101.hdf
no2track20060101.nc

Input file size is 512, 512
Input file has no bands, and so cannot be translated.

no bands?  I'm  completely unfamiliar with HDF, but from what limited I know
of bands, I can't see why it's stopping the translation.

Any idea I can do for this, just to translate it to netCDF?

Thanks again for all the help.
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071002/9d513f7a/attachment.html
From craig.miller at spatialminds.com  Tue Oct  2 22:46:09 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Windows Binary Dev Download
Message-ID: <2C41D4167EAB44E7AF4FBD6FC691D343@Carabiner>

I was browsing http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries and
saw that there is a windows developer binary available now.  What version of
Visual Studio was used to do the builds?

 

Thanks,

Craig

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071002/6819826e/attachment.html
From hobu.inc at gmail.com  Tue Oct  2 23:16:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Windows Binary Dev Download
In-Reply-To: <2C41D4167EAB44E7AF4FBD6FC691D343@Carabiner>
References: <2C41D4167EAB44E7AF4FBD6FC691D343@Carabiner>
Message-ID: <D354BD58-D673-4FD7-9C30-7E88BEF2F832@gmail.com>

MSVC 2003 (7.1)

On Oct 2, 2007, at 9:46 PM, Craig Miller wrote:

> I was browsing http://trac.osgeo.org/gdal/wiki/ 
> DownloadingGdalBinaries and saw that there is a windows developer  
> binary available now.  What version of Visual Studio was used to do  
> the builds?
>
>
>
> Thanks,
>
> Craig
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Oct  2 23:30:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Issue with 1.4.2 gdalwarp
In-Reply-To: <9623c28c0710021240v5dd55a74i793b7d6a13077713@mail.gmail.com>
References: <9623c28c0710021240v5dd55a74i793b7d6a13077713@mail.gmail.com>
Message-ID: <931f8ea90710022030k57c656a0ka2fdb29d88ec4078@mail.gmail.com>

On 10/2/07, nashirak <nashirak@gmail.com> wrote:
> I was looking into why the 1.4.2 version of GDAL seemed to remove the
> geospatial information when attempting to rotate the image to north up.  I
> ran across this post:
>
> http://lists.maptools.org/pipermail/gdal-dev/2007-June/013287.html
>
> I downloaded FWTools 1.3.7, as suggested here
> http://lists.maptools.org/pipermail/gdal-dev/2007-June/013290.html
> ,  and tried to use the gdalwarp that came with the FWTools package.  This
> program did not remove the geospatial information and gave me a correct
> result.  Is there a fix for this in a later GDAL version?  What version of
> GDAL was FWTool 1.3.7 compiled against?

Clayton,

FWTools 1.3.7 is built against GDAL "trunk" as of the time it was
built (not GDAL 1.4.x).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dron at ak4719.spb.edu  Wed Oct  3 02:02:35 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <f4c7e92f0710021347o51a26d3dpe3d8d4aa76a4761@mail.gmail.com>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
	<f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
	<20071002160043.GA4914@ak4719.spb.edu>
	<f4c7e92f0710021347o51a26d3dpe3d8d4aa76a4761@mail.gmail.com>
Message-ID: <20071003060234.GA8969@ak4719.spb.edu>

On Tue, Oct 02, 2007 at 03:47:03PM -0500, Edward Fialkowski wrote:
> Yep, someone totally gave me some bad files.  Both of them that were
> given to me were bad, so now I went and got another 19 mb file, which
> is recognized.
> 
> I'm really sorry to take the time on simply a bad file.
> 
> Unfortunately, though, I'm not quite ready for translation, so now I
> really need some help.
> 
> [root@niceguy apps]# ./gdal_translate -of netCDF no2track20060101.hdf
> no2track20060101.nc
> 
> Input file size is 512, 512
> Input file has no bands, and so cannot be translated.
> 
> no bands?  I'm  completely unfamiliar with HDF, but from what limited
> I know of bands, I can't see why it's stopping the translation.

HDF file can contain multiple images with different sizes and
parameters, so usually we can't translate it directly. Such complex
container will be represented in GDAL via subdataset abstraction. You
should run gdalinfo on input file to get a list of subdatasets and later
translate each individual subdataset. Here you can find an example:

 http://www.gdal.org/frmt_hdf4.html

Also it is possible that GDAL does not understand the file contents (HDF
is a quite complicated thing for automatic processing). In this case I
will need a file itself to diagnose the problem.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From cincirin at gmail.com  Wed Oct  3 01:43:47 2007
From: cincirin at gmail.com (cincirin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] GIF
Message-ID: <fdva8h$bo3$1@sea.gmane.org>

Hi all,
Are GDAL ( GIFDataset ) a solution to retrieve the animation delay in 
animated gif ? 




From christian.mueller at nvoe.at  Wed Oct  3 03:47:53 2007
From: christian.mueller at nvoe.at (Christian Mueller)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Question about building Pyramids
Message-ID: <200710030947.53636.christian.mueller@nvoe.at>

I need to build pyramdis from a tiled Image having many tiles. Assuming the 
tile size 17*13 and the  scale factor is 2, i have some questions about the 
interpolation methods:

The base for the interpolation has pixel size 34*26 composed of 4 Tiles 
resulting in one Tile of size 17 x 13

nearest neighbour: should work

bilinear: should work, a scale factor of 2 always results in even pixel sizes

cubic,cubicspline: Here is my problem, in my opinion, the pixel size modulo 4 
should be 0. Is it right to expand the base rect with 1 pixel to start the 
interpolation from a 36 x 28 image , the result would be a tile 18*14,  and 
how do i get  the  17*13 image ?

thanks for your hints

christian





From nashirak at gmail.com  Wed Oct  3 09:44:11 2007
From: nashirak at gmail.com (nashirak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: Issue with 1.4.2 gdalwarp
Message-ID: <9623c28c0710030644g25fb242bs1dd9db526b5fe92f@mail.gmail.com>

> Clayton,

> FWTools 1.3.7 is built against GDAL "trunk" as of the time it was
> built (not GDAL 1.4.x).

Does this mean that I pull from the current Subversion trunk to get the fix,
or was the fix built against an older version of the subversion trunk?

Thanks.
-- 
Clayton Bluhm
Home: nashirak@gmail.com
"si vis pacem para bellum" -- Vegetius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071003/396ec135/attachment.html
From warmerdam at pobox.com  Wed Oct  3 10:43:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] GIF
In-Reply-To: <fdva8h$bo3$1@sea.gmane.org>
References: <fdva8h$bo3$1@sea.gmane.org>
Message-ID: <931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com>

On 10/2/07, cincirin <cincirin@gmail.com> wrote:
> Hi all,
> Are GDAL ( GIFDataset ) a solution to retrieve the animation delay in
> animated gif ?

Cincirin,

GDAL has no support for reading animated gifs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From RMcCulley at county24.com  Wed Oct  3 10:59:18 2007
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Building on Windows with Python 2.5
Message-ID: <8563B9D6767C904A912272A2D56548E41A610E@vermilion.County24.local>

Hi All,

 

I'm trying to make the migration to Python version 2.5.  In the past,
I've been lazy, and just the MS4W version of the GDAL python bindings.
They are compiled for Python 2.4 though, so I've been trying to build
GDAL and the Python bindings for version 2.5 without much success.  I'm
working with the GDAL version 1.4.2 source code and compiling with
MSVC2003 (7.1).

 

The build runs just fine, as far as I can see.  There don't appear to be
any errors.  The bin directory is populated with all the utility
programs, various python scripts, the data directory, the html directory
and the pymod directory.  As far as I can see the utility programs run
fine.  When I copy the contents of the pymod directory over to the
site-packages directory in Python25 and try and import gdal I get the
following error:

 

Traceback (most recent call last):

  File "<interactive input>", line 1, in <module>

  File "C:\Python25\lib\site-packages\gdal.py", line 191, in <module>

    import _gdal

ImportError: No module named _gdal

 

As a test, I compiled gdal against Python 2.4, and everything worked
fine.  The python modules imported without error.  Any ideas on what to
do to get it working with 2.5?  Is this a problem with having both 2.4
and 2.5 installed on the system?

 

Alternatively, this seems like as good a time as any to move over to the
next generation bindings.  How does one go about building the NG
bindings with MSVC2003?

 

Thanks,

Rob McCulley

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071003/6132557b/attachment.html
From warmerdam at pobox.com  Wed Oct  3 11:14:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: Issue with 1.4.2 gdalwarp
In-Reply-To: <9623c28c0710030644g25fb242bs1dd9db526b5fe92f@mail.gmail.com>
References: <9623c28c0710030644g25fb242bs1dd9db526b5fe92f@mail.gmail.com>
Message-ID: <931f8ea90710030814x4126a8y598cf4b4a7f8a57b@mail.gmail.com>

On 10/3/07, nashirak <nashirak@gmail.com> wrote:
>
> > Clayton,
>
> > FWTools 1.3.7 is built against GDAL "trunk" as of the time it was
> > built (not GDAL 1.4.x).
> Does this mean that I pull from the current Subversion trunk to get the fix,
> or was the fix built against an older version of the subversion trunk?

Clayton,

1.3.7 was built against GDAL trunk as of a few weeks ago, but
presumably whatever fixed things will also be in the current
trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Wed Oct  3 12:38:39 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Building on Windows with Python 2.5
In-Reply-To: <8563B9D6767C904A912272A2D56548E41A610E@vermilion.County24.local>
References: <8563B9D6767C904A912272A2D56548E41A610E@vermilion.County24.local>
Message-ID: <4703C58F.70301@noaa.gov>

Rob McCulley wrote:

> I?m trying to make the migration to Python version 2.5. 
> The build runs just fine, as far as I can see.  There don?t appear to be 
> any errors.  The bin directory is populated with all the utility 
> programs, various python scripts, the data directory, the html directory 
> and the pymod directory.

How are you building? Did you build the Python bindings? I need to get 
up to speed on building with VS, but I'm pretty sure you need to build 
GDAL the usual way, then build the python extensions with:

python setup.py build

> fine.  When I copy the contents of the pymod directory over to the 
> site-packages directory in Python25 

You should install with:

python setup.py install

make sure you're using the same python for building and installing.

>     import _gdal
> 
> ImportError: No module named _gdal

This looks like you haven't built the extension.

 >  Is this a problem with having both 2.4
> and 2.5 installed on the system?

It shouldn't be, as long as you make sure to build against the same one 
you install it in.

> Alternatively, this seems like as good a time as any to move over to the 
> next generation bindings.

Yes, it is!

> How does one go about building the NG bindings with MSVC2003?

I'd expect an option in the nmake.opt file, but I don't see it listed on 
this Wiki page:

http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Let us know if you figure it out!

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov



From wef1 at cec.wustl.edu  Wed Oct  3 12:50:45 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <20071003060234.GA8969@ak4719.spb.edu>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
	<f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
	<20071002160043.GA4914@ak4719.spb.edu>
	<f4c7e92f0710021347o51a26d3dpe3d8d4aa76a4761@mail.gmail.com>
	<20071003060234.GA8969@ak4719.spb.edu>
Message-ID: <f4c7e92f0710030950o14bcd2f6pf50db1fec474ccc2@mail.gmail.com>

Hey thanks for that link, it helps out a lot.  Unfortunately, I don't see
any SUBDATASET_n_NAME metadata printed out.

Here's my output:
[edfialk@niceguy apps]$ ./gdalinfo no2track20060101.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
  Authors=H.J. Eskes, K.F. Boersma
  Affiliation=KNMI (Royal Netherlands Meteorological Institute)
  Email=eskes@knmi.nl , boersma@knmi.nl
  Data_created_by=TM4-NO2A, version 1.04 (TM4 at 2x3 deg)
  Creation_date= 2 Jun 2006
  Unit_of_NO2_column=1e15 molecules/cm2
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

I put this file (19 megs) up at http://niceguy.wustl.edu/no2track.hdf
just in case.

So, I can see now how it has no bands, I think.  I'm not sure how to get at
these subdatasets, if there are any, so what do you think I should do?

Thanks again.
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071003/5a2df8c6/attachment.html
From matt.wilkie at gov.yk.ca  Wed Oct  3 12:45:14 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] New phyton utility
In-Reply-To: <200710020838.34586.christian.mueller@nvoe.at>
References: <200710020838.34586.christian.mueller@nvoe.at>
Message-ID: <4703C71A.6070006@gov.yk.ca>

Hi Christian,

> Inspired from gdal_mergy.py I developped a counterpart called gdal_tile.py
...

> Searching the internet shows me that I am not the only guy having this 
> problem, so I would like to contribute this python module.
> 
> What are the next steps

I would create an enhancement ticket 
(http://trac.osgeo.org/gdal/newticket) and then an accompanying extended 
project description. See http://trac.osgeo.org/gdal/wiki/SoCTileDriver 
for an example (and possible collaboration since it sounds similar).

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From URaudszus at STADTDO.DE  Wed Oct  3 13:37:09 2007
From: URaudszus at STADTDO.DE (Uwe Raudszus)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] gdalwarp does not use my +towgs84 parameter
In-Reply-To: <931f8ea90710020819x3a9049eyc06d7b23187db29f@mail.gmail.com>
References: <12993966.post@talk.nabble.com>
	<931f8ea90710020819x3a9049eyc06d7b23187db29f@mail.gmail.com>
Message-ID: <13023837.post@talk.nabble.com>



Frank Warmerdam-2 wrote:
> 
> So, hopefully, just dropping the +datum=potsdam setting
> will resolve the issue.
> 

Hallo Frank,

now gdal_warp works!

Thank you
Uwe

-- 
View this message in context: http://www.nabble.com/gdalwarp-does-not-use-my-%2Btowgs84-parameter-tf4553338.html#a13023837
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From hobu.inc at gmail.com  Wed Oct  3 14:04:39 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Building on Windows with Python 2.5
In-Reply-To: <8563B9D6767C904A912272A2D56548E41A610E@vermilion.County24.local>
References: <8563B9D6767C904A912272A2D56548E41A610E@vermilion.County24.local>
Message-ID: <C8FA453F-1F62-4F1E-BC03-CFA9C6588A6F@gmail.com>

To build the next-gen Python bindings for GDAL (assuming the current  
trunk here) you need to have the following settings in your nmake.opt:
- SWIG must be set to the location of your swig install.  1.3.31 is  
required
- PY_DIR must be set so it can find python.exe

Additionally, these items should be done:
- GDAL must already be made by doing 'nmake /f makefile.vc' in the  
root of the GDAL source directory
- Numpy should already be installed in the python you are using with  
PY_DIR
- Having setuptools installed might be advantageous, but not required

After these conditions are met, cd into ./swig and issue 'nmake /f  
makefile.vc python'. This command will regenerate the bindings with  
swig and build the module.  After it is built, you can cd into ./swig/ 
python and issue 'python setup.py bdist_wininst' to have it build a  
windows installer that will end up in ./swig/python/dist, or 'python  
setup.py bdist' to have it build a zip distribution.

Howard

On Oct 3, 2007, at 9:59 AM, Rob McCulley wrote:

> Hi All,
>
>
>
> I?m trying to make the migration to Python version 2.5.  In the  
> past, I?ve been lazy, and just the MS4W version of the GDAL python  
> bindings.  They are compiled for Python 2.4 though, so I?ve been  
> trying to build GDAL and the Python bindings for version 2.5  
> without much success.  I?m working with the GDAL version 1.4.2  
> source code and compiling with MSVC2003 (7.1).
>
>
>
> The build runs just fine, as far as I can see.  There don?t appear  
> to be any errors.  The bin directory is populated with all the  
> utility programs, various python scripts, the data directory, the  
> html directory and the pymod directory.  As far as I can see the  
> utility programs run fine.  When I copy the contents of the pymod  
> directory over to the site-packages directory in Python25 and try  
> and import gdal I get the following error:
>
>
>
> Traceback (most recent call last):
>
>   File "<interactive input>", line 1, in <module>
>
>   File "C:\Python25\lib\site-packages\gdal.py", line 191, in <module>
>
>     import _gdal
>
> ImportError: No module named _gdal
>
>
>
> As a test, I compiled gdal against Python 2.4, and everything  
> worked fine.  The python modules imported without error.  Any ideas  
> on what to do to get it working with 2.5?  Is this a problem with  
> having both 2.4 and 2.5 installed on the system?
>
>
>
> Alternatively, this seems like as good a time as any to move over  
> to the next generation bindings.  How does one go about building  
> the NG bindings with MSVC2003?
>
>
>
> Thanks,
>
> Rob McCulley
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From JARED.RUBIN at saic.com  Wed Oct  3 15:48:31 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] gdal support for kakadu  parallel processing
Message-ID: <200710031248.31767.rubinj@nemesis.tucson.saic.com>

I do know that gdal supports the use of kakadu for the JPEG2000 codec. However 
does gdal support parallelized decompressing of a NITF image that is JPEG2000 
compressed?
thanks
Jared

From cincirin at gmail.com  Thu Oct  4 01:51:31 2007
From: cincirin at gmail.com (cincirin)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: GIF
References: <fdva8h$bo3$1@sea.gmane.org>
	<931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com>
Message-ID: <fe1v35$r8c$1@sea.gmane.org>

Thanks for your fast answer, but now I have another little question. Suppose 
the GIF are handled only 1 byte palette, GDALOpen return for example 6, 10, 
etc. bands for animated GIF. Are these bands represent only one frame( 
image ) in animated gif ?


"Frank Warmerdam" <warmerdam@pobox.com> wrote in message 
news:931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com...
> On 10/2/07, cincirin <cincirin@gmail.com> wrote:
>> Hi all,
>> Are GDAL ( GIFDataset ) a solution to retrieve the animation delay in
>> animated gif ?
>
> Cincirin,
>
> GDAL has no support for reading animated gifs.
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent 




From wollez at gmx.net  Thu Oct  4 04:03:38 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: GIF
In-Reply-To: <fe1v35$r8c$1@sea.gmane.org>
References: <fdva8h$bo3$1@sea.gmane.org>	<931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com>
	<fe1v35$r8c$1@sea.gmane.org>
Message-ID: <fe26or$ek0$1@sea.gmane.org>

cincirin schrieb:
> Thanks for your fast answer, but now I have another little question. Suppose 
> the GIF are handled only 1 byte palette, GDALOpen return for example 6, 10, 
> etc. bands for animated GIF. Are these bands represent only one frame( 
> image ) in animated gif ?
> 
> 
I have no knowledge about gif and also no animated gifs here for testing 
but you can extract single bands from the file with gdal_translate using 
the -b switch.

regards
Wolfgang


From dron at ak4719.spb.edu  Thu Oct  4 06:00:04 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
In-Reply-To: <f4c7e92f0710030950o14bcd2f6pf50db1fec474ccc2@mail.gmail.com>
References: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>
	<20071001140142.GB30067@ak4719.spb.edu>
	<f4c7e92f0710010836y5a78a7c3lb774f9cffea4ca58@mail.gmail.com>
	<20071002160043.GA4914@ak4719.spb.edu>
	<f4c7e92f0710021347o51a26d3dpe3d8d4aa76a4761@mail.gmail.com>
	<20071003060234.GA8969@ak4719.spb.edu>
	<f4c7e92f0710030950o14bcd2f6pf50db1fec474ccc2@mail.gmail.com>
Message-ID: <20071004100004.GA17762@ak4719.spb.edu>

On Wed, Oct 03, 2007 at 11:50:45AM -0500, Edward Fialkowski wrote:
> Hey thanks for that link, it helps out a lot.  Unfortunately, I don't
> see any SUBDATASET_n_NAME metadata printed out.
> 
> Here's my output:
> [edfialk@niceguy apps]$ ./gdalinfo no2track20060101.hdf
> Driver: HDF4/Hierarchical Data Format Release 4
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>   Authors=H.J. Eskes, K.F. Boersma
>   Affiliation=KNMI (Royal Netherlands Meteorological Institute)
>   Email=eskes@knmi.nl , boersma@knmi.nl
>   Data_created_by=TM4-NO2A, version 1.04 (TM4 at 2x3 deg)
>   Creation_date= 2 Jun 2006
>   Unit_of_NO2_column=1e15 molecules/cm2
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
> 
> I put this file (19 megs) up at http://niceguy.wustl.edu/no2track.hdf
> just in case.
> 
> So, I can see now how it has no bands, I think.  I'm not sure how to
> get at these subdatasets, if there are any, so what do you think I
> should do?

Ed,

That dataset does not contain data suitable for representation in raster
form. It just contains a number of 1D VData arrays and GDAL can't handle
them.

Note that HDF is a format for arbitary data storage and GDAL is a raster
processing library. We can't represent 1- or 4-dimensional data arrays
from arbitrary HDF file, we only working with data that fits our raster
model, other parts of info will be skipped.

If you really need to extract everything that HDF file can contain I am
recommending some HDF-specific utility (hdflook, hdfview, etc.), only in
this case you will get access to every piece of information in the file.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Thu Oct  4 08:22:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] gdal support for kakadu parallel processing
In-Reply-To: <200710031248.31767.rubinj@nemesis.tucson.saic.com>
References: <200710031248.31767.rubinj@nemesis.tucson.saic.com>
Message-ID: <931f8ea90710040522m14a3af9br6abaaa96ded4214f@mail.gmail.com>

On 10/3/07, Jared Rubin <JARED.RUBIN@saic.com> wrote:
> I do know that gdal supports the use of kakadu for the JPEG2000 codec. However
> does gdal support parallelized decompressing of a NITF image that is JPEG2000
> compressed?

Jared,

No, currently GDAL does not use the parallelization options
offered by the Kakadu toolkit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Oct  4 09:08:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: GIF
In-Reply-To: <fe1v35$r8c$1@sea.gmane.org>
References: <fdva8h$bo3$1@sea.gmane.org>
	<931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com>
	<fe1v35$r8c$1@sea.gmane.org>
Message-ID: <931f8ea90710040608i73edbab5g3126b984c976cbb1@mail.gmail.com>

On 10/4/07, cincirin <cincirin@gmail.com> wrote:
> Thanks for your fast answer, but now I have another little question. Suppose
> the GIF are handled only 1 byte palette, GDALOpen return for example 6, 10,
> etc. bands for animated GIF. Are these bands represent only one frame(
> image ) in animated gif ?

Cincirin,

I checked a couple gifs that I believe are animated and they
only have one band, so to the best of my knowledge animated
gifs are not represented as multi-band .  If you find a gif with
multiple bands in GDAL then I'd appreciate seeing it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at tkk.fi  Thu Oct  4 10:22:48 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and the version of DBF of its shapefile driver,
 problem in ArcGIS 8
Message-ID: <4704F738.3090604@tkk.fi>

Greetings,

I think I've hit this problem with ArcGIS 8.*:

http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21487

dbfdump reports that the dbf files that I've created with OGR are 
version 0x03 and I haven't seen dbf files that are a part of shapefiles, 
which are of other versions.

The shapefiles I've created with OGR are readable with ArcView 3.* and 
if I resave the dbf there, it can be opened with ArcGIS 8.*

I tried using only upper case letters in column names and using width 20 
& precision 15, as I noticed ArcView to do, but still the dbf cannot be 
opened in ArcGIS. The shapefile opens and geometries are shown, also the 
dbf can be separately opened (I don't know the details), and ArcGIS sees 
the header since it shows a query tool, but the attributes table can't 
be opened.

Does anybody have any idea what might be the reason? Where's more info 
on dbf versions?

Cheers,

Ari



From warmerdam at pobox.com  Thu Oct  4 13:16:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: GIF
In-Reply-To: <4704F018.7000205@ualg.pt>
References: <fdva8h$bo3$1@sea.gmane.org>
	<931f8ea90710030743t7037166cx503d54ab8429e315@mail.gmail.com>
	<fe1v35$r8c$1@sea.gmane.org>
	<931f8ea90710040608i73edbab5g3126b984c976cbb1@mail.gmail.com>
	<4704F018.7000205@ualg.pt>
Message-ID: <47051FF5.5050000@pobox.com>

Joaquim Luis wrote:
> Frank Warmerdam wrote:
>> On 10/4/07, cincirin <cincirin@gmail.com> wrote:
>>  
>>> Thanks for your fast answer, but now I have another little question. 
>>> Suppose
>>> the GIF are handled only 1 byte palette, GDALOpen return for example 
>>> 6, 10,
>>> etc. bands for animated GIF. Are these bands represent only one frame(
>>> image ) in animated gif ?
>>>     
>>
>> Cincirin,
>>
>> I checked a couple gifs that I believe are animated and they
>> only have one band, so to the best of my knowledge animated
>> gifs are not represented as multi-band .  If you find a gif with
>> multiple bands in GDAL then I'd appreciate seeing it.
>>   
> 
> Frank,
> The attached gif (if it passes) was produced by a program of mine.
> gdalinfo says  it is multiband.

Joaquim,

I stand corrected.  It does appear that each animation step is a
band, but there is no mechanism in the current driver to expose the
delay between steps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct  4 14:19:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and the version of DBF of its shapefile driver,
	problem in ArcGIS 8
In-Reply-To: <4704F738.3090604@tkk.fi>
References: <4704F738.3090604@tkk.fi>
Message-ID: <47052EBA.5030204@pobox.com>

Ari Jolma wrote:
> Greetings,
> 
> I think I've hit this problem with ArcGIS 8.*:
> 
> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21487 
> 
> 
> dbfdump reports that the dbf files that I've created with OGR are 
> version 0x03 and I haven't seen dbf files that are a part of shapefiles, 
> which are of other versions.

Ari,

I checked the dbf specs at:

   http://www.clicketyclick.dk/databases/xbase/format/dbf.html#DBF_STRUCT

It indicates that 0x03 is "File without DBT" whatever that means, but it
is the same dbf version code I found many years ago in ESRI supplied .dbf
files.

> The shapefiles I've created with OGR are readable with ArcView 3.* and 
> if I resave the dbf there, it can be opened with ArcGIS 8.*

It might be instructive if you would provide the before and after .dbf
files for review.

I don't have ArcGIS so it is hard for me to test, but I haven't heard
of much in the way of problems like this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Thu Oct  4 15:03:09 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
Message-ID: <45FB71D0-2E7A-4D43-A0A5-A025AD2E5503@gmail.com>

All,

It is expected that we will be using the next-gen Python bindings by  
default in the upcoming GDAL 1.5 release.  As we prepare for the  
release, similar to turning on the metadata stuff, I would like to  
turn off building the old-gen Python bindings by default and switch  
to using the next-gen bindings.  I am looking for feedback on doing  
so because there might be some consequences:

- The next-gen bindings are still missing a few methods, but their  
coverage is fairly complete.  For certain scripts, this will cause a  
problem (the missing bits are in some raster operations).  It is  
hoped that we will clean most of these issues up before release time.
- The next-gen bindings use setuptools/distutils for building.  This  
means Python eggs (if you have setuptools installed) and typical  
setup.py operations.  It is quite different than the hand-built model  
we used with ./pymod.
- Building the next-gen bindings in-place with libtool is slightly  
problematic currently.  It is hoped that wider testing will allow us  
to hammer out some of these issues.
- As I stated in a previous email, we now have things in an 'osgeo'  
namespace in the next-gen bindings, but the old imports like 'import  
gdal' still continue to work with a deprecation warning.  For future  
developments, use 'from osgeo import gdal', etc.

Howard

From eschenbe at psc.edu  Thu Oct  4 17:04:19 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
Message-ID: <47055553.2020101@psc.edu>

gdrinfo doesn't seem to find a projection in a shapefile describiing roads 
(from the National Atlas). I was expecting something like what gdalinfo finds 
in a geotiff file. Could someone point me towards the answer? Thanks!

Kent
Pittsburgh Supercomputing Center

From mchapman at texelinc.com  Thu Oct  4 18:18:58 2007
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <47055553.2020101@psc.edu>
References: <47055553.2020101@psc.edu>
Message-ID: <008201c806d4$8f5a6ac0$ae0f4040$@com>

Kent,

Make sure there is a .prj file with the same name as the .shp file.  NTAD
data doesn't always come with these projection files.  If you read the .txt
file with the shape file it will tell you what datum it is using.  Attached
is a wgs84 prj file that should work if you rename it to be the same as your
.shp file.  NTAD is generally in WGS84.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kent Eschenberg
Sent: Thursday, October 04, 2007 3:04 PM
To: GDAL
Subject: [Gdal-dev] Shapfiles and Projections

gdrinfo doesn't seem to find a projection in a shapefile describiing roads 
(from the National Atlas). I was expecting something like what gdalinfo
finds 
in a geotiff file. Could someone point me towards the answer? Thanks!

Kent
Pittsburgh Supercomputing Center
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: milbase.prj
Type: application/octet-stream
Size: 145 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071004/3ceb3571/milbase.obj
From warmerdam at pobox.com  Thu Oct  4 18:32:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <47055553.2020101@psc.edu>
References: <47055553.2020101@psc.edu>
Message-ID: <47056A1B.7050207@pobox.com>

Kent Eschenberg wrote:
> gdrinfo doesn't seem to find a projection in a shapefile describiing 
> roads (from the National Atlas). I was expecting something like what 
> gdalinfo finds in a geotiff file. Could someone point me towards the 
> answer? Thanks!

Kent,

I assume you were using ogrinfo?

It will report coordinate system info if it finds it.  Does your shapefile
dataset include a .prj file?   If not, there is not declared coordinate
system for the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ed at topozone.com  Thu Oct  4 18:26:24 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <47055553.2020101@psc.edu>
References: <47055553.2020101@psc.edu>
Message-ID: <4BF377919225F449BB097CB76FFE9BC80198848B@ptolemy.topozone.com>

Kent -

Unfortunately, the concept of projections and coordinate systems in general was late in coming to the shapefile format, and many (if not most) shapefiles have no projection/coordinate information with them.

Your shapefile should have a .txt file with it (presumably roadtrl20.txt if you're using the roads layer from the National Atlas) and it will contain this information:

Spatial_Reference_Information: 
  Horizontal_Coordinate_System_Definition: 
    Geographic: 
      Latitude_Resolution: 0.000278 
      Longitude_Resolution: 0.000278 
      Geographic_Coordinate_Units: Decimal degrees 
    Geodetic_Model: 
      Horizontal_Datum_Name: North American Datum of 1983 
      Ellipsoid_Name: GRS1980 
      Semi-major_Axis: 6378137 
      Denominator_of_Flattening_Ratio: 298.257222

As far as I am aware, all of the vector data available through the National Atlas site is in geographic coordinates (unprojected decimal degrees) on the NAD83 datum.

	- Ed

Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA? 01863
Phone: 978-251-4242, Fax: 978-251-1396
ed@topozone.com



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kent Eschenberg
Sent: Thursday, October 04, 2007 5:04 PM
To: GDAL
Subject: [Gdal-dev] Shapfiles and Projections

gdrinfo doesn't seem to find a projection in a shapefile describiing roads 
(from the National Atlas). I was expecting something like what gdalinfo finds 
in a geotiff file. Could someone point me towards the answer? Thanks!

Kent
Pittsburgh Supercomputing Center
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jcermak at atmos.washington.edu  Thu Oct  4 20:45:09 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Read hdf band, inverse dimensions
Message-ID: <47058915.8010503@atmos.washington.edu>

Hi!

I am trying to read a band from a MODIS hdf file. This in itself does 
not seem to be a problematic thing to do; however, the dimensions of the 
array are inverse.

gdalinfo myfile.hdf (or gdal.Dataset.GetSubDatasets) yields:
[snip]
SUBDATASET_52_NAME=HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
SUBDATASET_52_DESC=[2040x1354x2] Cloud_Mask_1km mod06 (8-bit integer)
[snip]

So there are two bands of size 2040x1354 in my subdataset. However, in 
order for gdal to recognize them as two bands the dimensions would have 
to be [2x2040x1354].

Accordingly, when I do
gdalinfo HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
I get information on 2040 different bands, each of size 1354x2

What can I do to get my two bands? I know I could read 2040 datasets and 
then reassemble them. But that takes 2/3 eternity.

All help appreciated!

Jan


-- 
Jan Cermak
Visiting Scientist
Department of Atmospheric Sciences
University of Washington
Seattle WA 98195-1640

phone: +1 206 543 2044
fax:   +1 206 543 0308

From ivan.lucena at pmldnet.com  Thu Oct  4 23:28:22 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Read hdf band, inverse dimensions
In-Reply-To: <47058915.8010503@atmos.washington.edu>
References: <47058915.8010503@atmos.washington.edu>
Message-ID: <4705AF56.5080403@pmldnet.com>

Jan,

I once had a problem just like that and the solution was to 
translate/project the data to geotiffs using "Modis Swath Reprojection 
Tool" and then go back to GDAL to work with the tifs.

Ref.: [http://edcdaac.usgs.gov/landdaac/tools/mrtswath/]

Good luck,

Ivan

Jan Cermak wrote:
> Hi!
> 
> I am trying to read a band from a MODIS hdf file. This in itself does 
> not seem to be a problematic thing to do; however, the dimensions of the 
> array are inverse.
> 
> gdalinfo myfile.hdf (or gdal.Dataset.GetSubDatasets) yields:
> [snip]
> SUBDATASET_52_NAME=HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
> SUBDATASET_52_DESC=[2040x1354x2] Cloud_Mask_1km mod06 (8-bit integer)
> [snip]
> 
> So there are two bands of size 2040x1354 in my subdataset. However, in 
> order for gdal to recognize them as two bands the dimensions would have 
> to be [2x2040x1354].
> 
> Accordingly, when I do
> gdalinfo HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
> I get information on 2040 different bands, each of size 1354x2
> 
> What can I do to get my two bands? I know I could read 2040 datasets and 
> then reassemble them. But that takes 2/3 eternity.
> 
> All help appreciated!
> 
> Jan
> 
> 

From dmbaker at cox.net  Fri Oct  5 07:56:41 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and the version of DBF of its shapefile driver,
	problem in ArcGIS 8
In-Reply-To: <47052EBA.5030204@pobox.com>
References: <4704F738.3090604@tkk.fi> <47052EBA.5030204@pobox.com>
Message-ID: <003e01c80746$cb1fe770$0701a8c0@DAVID>

Frank,

The ".DBT" file is a memo file; for hold large text items.

David

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Thursday, October 04, 2007 1:20 PM
To: Ari Jolma
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] OGR and the version of DBF of its shapefile
driver,problem in ArcGIS 8

Ari Jolma wrote:
> Greetings,
> 
> I think I've hit this problem with ArcGIS 8.*:
> 
>
http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&
d=21487 
> 
> 
> dbfdump reports that the dbf files that I've created with OGR are 
> version 0x03 and I haven't seen dbf files that are a part of shapefiles, 
> which are of other versions.

Ari,

I checked the dbf specs at:

   http://www.clicketyclick.dk/databases/xbase/format/dbf.html#DBF_STRUCT

It indicates that 0x03 is "File without DBT" whatever that means, but it
is the same dbf version code I found many years ago in ESRI supplied .dbf
files.

> The shapefiles I've created with OGR are readable with ArcView 3.* and 
> if I resave the dbf there, it can be opened with ArcGIS 8.*

It might be instructive if you would provide the before and after .dbf
files for review.

I don't have ArcGIS so it is hard for me to test, but I haven't heard
of much in the way of problems like this.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From emiliomayorga at gmail.com  Fri Oct  5 12:22:13 2007
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
Message-ID: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>

I'm excited to see the progress with the Python bindings namespace,
next-gen as default, etc. Thanks to Hobu and Chris for their excellent
work!

Being a little dense and not too knowledgeable of installation issues,
I'm still unclear about what exactly this will mean for future
installations of GDAL/OGR as a "normal", idiot-proof Python package on
Windows. If I have my own standard Python installation (say, 2.4 or
2.5) and I've installed numpy (available as an idiot-proof
executable), will there be a gdal/ogr executable that I can install
just as easily, bringing in all required gdal/ogr libraries? Or will
there still be a need to compile gdal first, install FWTools, or
something along those lines, at least for the near future?

I want to get an idea of whether gdal-python installation on Windows
will become as simple as the numpy installation. I'm building some
modeling components in Python that will be used by others even more
clueless than I am, so I'd like to know how far we are from the day
when installing a python gdal/ogr package is a simple double-click on
an executable.

Thank you!

-Emilio Mayorga


> From: Howard Butler <hobu.inc@gmail.com>
> To: Gdal-Dev <gdal-dev@lists.maptools.org>
> Date: Thu, 4 Oct 2007 14:03:09 -0500
> Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
> All,
>
> It is expected that we will be using the next-gen Python bindings by
> default in the upcoming GDAL 1.5 release.  As we prepare for the
> release, similar to turning on the metadata stuff, I would like to
> turn off building the old-gen Python bindings by default and switch
> to using the next-gen bindings.  I am looking for feedback on doing
> so because there might be some consequences:
>
> - The next-gen bindings are still missing a few methods, but their
> coverage is fairly complete.  For certain scripts, this will cause a
> problem (the missing bits are in some raster operations).  It is
> hoped that we will clean most of these issues up before release time.
> - The next-gen bindings use setuptools/distutils for building.  This
> means Python eggs (if you have setuptools installed) and typical
> setup.py operations.  It is quite different than the hand-built model
> we used with ./pymod.
> - Building the next-gen bindings in-place with libtool is slightly
> problematic currently.  It is hoped that wider testing will allow us
> to hammer out some of these issues.
> - As I stated in a previous email, we now have things in an 'osgeo'
> namespace in the next-gen bindings, but the old imports like 'import
> gdal' still continue to work with a deprecation warning.  For future
> developments, use 'from osgeo import gdal', etc.
>
> Howard

From JARED.RUBIN at saic.com  Fri Oct  5 12:36:03 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] gdal support for kakadu parallel processing
In-Reply-To: <931f8ea90710040522m14a3af9br6abaaa96ded4214f@mail.gmail.com>
References: <200710031248.31767.rubinj@nemesis.tucson.saic.com>
	<931f8ea90710040522m14a3af9br6abaaa96ded4214f@mail.gmail.com>
Message-ID: <200710050936.03405.rubinj@nemesis.tucson.saic.com>

Frank,
If I end up needing the parallelized capability from kakadu and I up directly 
calling kakadu from gdal for JPEG2000, then I will try and contribute back to 
gdal.
Jared

On Thursday 04 October 2007 05:22, Frank Warmerdam wrote:
> On 10/3/07, Jared Rubin <JARED.RUBIN@saic.com> wrote:
> > I do know that gdal supports the use of kakadu for the JPEG2000 codec.
> > However does gdal support parallelized decompressing of a NITF image that
> > is JPEG2000 compressed?
>
> Jared,
>
> No, currently GDAL does not use the parallelization options
> offered by the Kakadu toolkit.
>
> Best regards,

From randre at gmail.com  Fri Oct  5 12:37:25 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] ogr and utf-8 encoding
Message-ID: <9c2015090710050937pd227171g99d482c16ae4df9d@mail.gmail.com>

Hi all,

I'm converting a CSV file that contains names which are utf-8 encoded
into a shapefile with ogr in Python.  It appears from my research that
there is currently no way to specify an encoding type with ogr for the
fields in the target shapefile.  I see that there is an RFC to
"enhance" gdal/ogr so that it can respect input encoding, but am not
sure if I've missed another obvious way to preserve the diacritics in
my input data.

Could someone please let me know if, A) there is a way to preserve
unicode encoding from source and pass it into a new shapefile, B) what
the status is on RFC-5, "Unicode support in GDAL", and when this
functionality might be available.

Thanks very much,

Roger
--

From ari.jolma at tkk.fi  Fri Oct  5 13:06:02 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and the version of DBF of its shapefile driver,
	problem in ArcGIS 8
In-Reply-To: <47052EBA.5030204@pobox.com>
References: <4704F738.3090604@tkk.fi> <47052EBA.5030204@pobox.com>
Message-ID: <47066EFA.50502@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> I think I've hit this problem with ArcGIS 8.*:
>>
>> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21487 
>>
>>  
>
> I checked the dbf specs at:
>
>   http://www.clicketyclick.dk/databases/xbase/format/dbf.html#DBF_STRUCT
>
I don't have a good access to ArcGIS either, but I downloaded a 
shapefile, which I believe is made with ArcGIS(*) and then created a 
similar DBF with OGR. The difference that I note in looking at the 
hex-dump is that OGR uses N for both integers and floats while the other 
uses F for floats(**). OGR puts the numbers into the field as XXX.XXX 
while the other uses scientific notation X.XXXe+XXX

(*) zips.zip from 
http://lnweb01.co.wake.nc.us/gis/gismaps.nsf/WebGlobals!OpenView&ViewCat=shp

(**) http://www.clicketyclick.dk/databases/xbase/format/data_types.html

I'm not sure if that is the problem, as I said I don't have access to 
ArcGIS. Harri, if you read this, could you try that shapefile and then 
similar, but OGR created, zip.dbf from http://map.hut.fi/files/misc/ 
(you need to rename it and save it on the top of the ZIP_Codes.dbf)?

Ari



From warmerdam at pobox.com  Fri Oct  5 14:40:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] ogr and utf-8 encoding
In-Reply-To: <9c2015090710050937pd227171g99d482c16ae4df9d@mail.gmail.com>
References: <9c2015090710050937pd227171g99d482c16ae4df9d@mail.gmail.com>
Message-ID: <4706851E.6050905@pobox.com>

Roger Andr? wrote:
> Hi all,
> 
> I'm converting a CSV file that contains names which are utf-8 encoded
> into a shapefile with ogr in Python.  It appears from my research that
> there is currently no way to specify an encoding type with ogr for the
> fields in the target shapefile.  I see that there is an RFC to
> "enhance" gdal/ogr so that it can respect input encoding, but am not
> sure if I've missed another obvious way to preserve the diacritics in
> my input data.
> 
> Could someone please let me know if, A) there is a way to preserve
> unicode encoding from source and pass it into a new shapefile, B) what
> the status is on RFC-5, "Unicode support in GDAL", and when this
> functionality might be available.

Roger,

My understanding is that no work on utf-8 or RFC-5 has been done yet.
Currently there is no mechanism to set the code page for shapefiles nor for
identifying the code page from csv files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Fri Oct  5 16:49:43 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
In-Reply-To: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>
Message-ID: <4706A367.8070407@noaa.gov>

Emilio Mayorga wrote:
> Will there be a gdal/ogr executable that I can install
> just as easily, bringing in all required gdal/ogr libraries?

There should be, but someone needs to do it. Can/will you help? There 
isn't a technical reason why it's a problem, and, infract, with 
distutuils being used, it's really easy to build a windows installer 
and/or egg, once you've got it set up to compile properly on your system.

If I can ever get GDAL to build with MSYS and MinGW, I'll volunteer to 
do it.

> Or will
> there still be a need to compile gdal first, install FWTools

Frank, are you open to a little re-arranging of FWTools to play better 
with a stock python? It would be nice if the above requested simple 
installer was simply one piece of FWTools.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Fri Oct  5 17:00:10 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] BSB format and legal issues
In-Reply-To: <45FB71D0-2E7A-4D43-A0A5-A025AD2E5503@gmail.com>
References: <45FB71D0-2E7A-4D43-A0A5-A025AD2E5503@gmail.com>
Message-ID: <4706A5DA.10107@noaa.gov>

Hey all,

I note in the docs that the BSB format (used for NOAA nautical charts)
is turned off by default in the build due to possible issues with
patents, licensing, whatever.

Does anyone know the status of this? It would be great if it could be
turned on my default, as then tools like MapServer, QGIS, etc, etc,
would be able to use them be default as well.

I work for NOAA, but have nothing to do with the charting branch, so I
have no idea and I can not speak for NOAA on this issue (though the
issue is with Maptech, not NOAA, anyway). I do know that NOAA is now
distributing the charts themselves for free:

http://chartmaker.ncd.noaa.gov/mcd/Raster/Index.htm

so things may have loosened up a bit with maptech. However:

"""
The BSB file format is the sole property of Maptech, Inc. and as such is
protected by U.S. and International foreign copyright and patent laws.

"BSB File Format? is a trademark of Maptech, Inc.
"""

I don't know what that means exactly.

If anyone knows anything about this, please let me know. Otherwise, I'll
try to dig into it from this side with my few contacts with the NOAA
charting people.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov



From warmerdam at pobox.com  Fri Oct  5 18:07:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
In-Reply-To: <4706A367.8070407@noaa.gov>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>
	<4706A367.8070407@noaa.gov>
Message-ID: <4706B58C.7070709@pobox.com>

Christopher Barker wrote:
>> Or will
>> there still be a need to compile gdal first, install FWTools
> 
> Frank, are you open to a little re-arranging of FWTools to play better 
> with a stock python? It would be nice if the above requested simple 
> installer was simply one piece of FWTools.

Chris,

I don't think it would be prudent to see FWTools as a solution for this
particular problem.  First, FWTools is bound to the old bindings for the
time being (because they are needed by OpenEV).  Second, I'm afraid of change
and complexity and FWTools is already near the bounds of my ability to produce
it as a minor sideline.

I am in favor of us producing an easily and naturally installable Python
package for win32 that corresponds with our stable release binaries, as long
as there is someone willing to step up to the plate for that portion of the
work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Fri Oct  5 18:52:29 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
In-Reply-To: <4706B58C.7070709@pobox.com>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>
	<4706A367.8070407@noaa.gov> <4706B58C.7070709@pobox.com>
Message-ID: <4706C02D.7050300@noaa.gov>

Frank Warmerdam wrote:
> Christopher Barker wrote:
>> Frank, are you open to a little re-arranging of FWTools to play better 
>> with a stock python?

> I don't think it would be prudent to see FWTools as a solution for this
> particular problem.

I was actually thinking it a bit like the other way around -- once we 
have a nice Windows installer, FWtools could use it.

> First, FWTools is bound to the old bindings for the
> time being (because they are needed by OpenEV).

Ah -- yes, keeping that in sync is critical.

> Second, I'm afraid of change and complexity and FWTools is already
> near the bounds of my ability to  produce it as a minor sideline.

Fair enough -- I actually think this could make it easier, but any 
change is work, no doubt about it. maybe keep it in mind if you need to 
make changes in the future anyway, like if OpenEV upgrades, etc.

> I am in favor of us producing an easily and naturally installable Python
> package for win32 that corresponds with our stable release binaries, as 
> long as there is someone willing to step up to the plate for that portion of the
> work.

I hope someone will -- I'll keep trying to get a build environment 
working on Windows -- but it's just easier for me on OS-X and Linux, so 
I don't know if I'll get to it. If I do, I'll put together the binaries.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Fri Oct  5 19:43:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] BSB format and legal issues
In-Reply-To: <4706A5DA.10107@noaa.gov>
References: <45FB71D0-2E7A-4D43-A0A5-A025AD2E5503@gmail.com>
	<4706A5DA.10107@noaa.gov>
Message-ID: <4706CC17.9050505@pobox.com>

Christopher Barker wrote:
>> """
> The BSB file format is the sole property of Maptech, Inc. and as such is
> protected by U.S. and International foreign copyright and patent laws.
> 
> "BSB File Format? is a trademark of Maptech, Inc.
> """
> 
> I don't know what that means exactly.

Christopher,

I believe BSB read support is *enabled* by default, but can be turned
off fairly easily.  But write support is #ifdef'ed out or something since
it is more questionable whether we can write BSB files without infringing
a BSB compression patent.

I don't recognise a file format as something that can be copyrighted.
Code can be copyrighted.  A document describing a format can be copyrighted.
But I don't believe the format itself can.  So Maptech is (IMHO) left
asserting trademark on "BSB File Format", a patent that covers the compression
scheme used to write BSBs (but does not restrict reading), and possibly they
have a DMCA case protecting ecrypted BSB files.

That leaves me reading unencrypted BSB files when I can reverse engineer
the format adequately without signing any "paper" with Maptech, or using
any of their private documents.

Note, I am not a lawyer, and the above should not be construed as qualified
legal advice.  I'm giving my uneducated take on the documents and claims I've
seen.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From wollez at gmx.net  Sat Oct  6 05:07:46 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: Turn off the old-gen Python bindings in trunk
In-Reply-To: <4706C02D.7050300@noaa.gov>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>	<4706A367.8070407@noaa.gov>
	<4706B58C.7070709@pobox.com> <4706C02D.7050300@noaa.gov>
Message-ID: <fe7j92$j49$1@sea.gmane.org>

Christopher Barker schrieb:
> Frank Warmerdam wrote:
>> Christopher Barker wrote:
>>> Frank, are you open to a little re-arranging of FWTools to play 
>>> better with a stock python?
> 
>> I don't think it would be prudent to see FWTools as a solution for this
>> particular problem.
> 
> I was actually thinking it a bit like the other way around -- once we 
> have a nice Windows installer, FWtools could use it.
> 
>> First, FWTools is bound to the old bindings for the
>> time being (because they are needed by OpenEV).
> 
> Ah -- yes, keeping that in sync is critical.
> 
>> Second, I'm afraid of change and complexity and FWTools is already
>> near the bounds of my ability to  produce it as a minor sideline.
> 
> Fair enough -- I actually think this could make it easier, but any 
> change is work, no doubt about it. maybe keep it in mind if you need to 
> make changes in the future anyway, like if OpenEV upgrades, etc.
> 
>> I am in favor of us producing an easily and naturally installable Python
>> package for win32 that corresponds with our stable release binaries, 
>> as long as there is someone willing to step up to the plate for that 
>> portion of the
>> work.
> 
> I hope someone will -- I'll keep trying to get a build environment 
> working on Windows -- but it's just easier for me on OS-X and Linux, so 
> I don't know if I'll get to it. If I do, I'll put together the binaries.
> 
> -Chris
> 
> 

I also would like to try compiling gdal for Python 2.5. But some 
questions remain:

- what compiler to use (I think you can get the Intel Compiler for free 
in case of non commercial use)
- do optional formats (like ecw, jp2kak,...) require additional 
sourcecode or is everything needed already included in gdal

Regards
Wolfgang


From warmerdam at pobox.com  Sat Oct  6 12:20:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
Message-ID: <4707B5C4.2030703@pobox.com>

Motion: To adopt RFC 16: OGR Thread Safety

http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy

---

There wasn't to much discussion on this as far as I recall, which I take
to mean no one has a problem with it.  So moving to formal vote so I can
implement this coming week.

+1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Sat Oct  6 13:17:01 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4707B5C4.2030703@pobox.com>
References: <4707B5C4.2030703@pobox.com>
Message-ID: <4707C30D.20003@perkins.net>

For some reason I missed or ignored the original posting of this RFC. I 
have a late comment / question...

What about methods that modify a layer? i.e. we have two threads, A and 
B accessing the same layer via layer clones, so they each have their own 
read state. What if thread A checks to see if a feature with FID 42 
exists, then B invokes a method to delete feature 42, before thread B 
attempts to get the geometry for that feature? Even if those calls are 
serialized, it is likely that thread A will get very confused.

I think in general, guaranteeing thread safety when you have threads 
modifying data is in general extremely hard at the library level, and 
really requires some kind of thread coordination at the application 
program level. Maybe the datasource mutex could be exposed with a couple 
of handy Lock/Unlock methods to make this kind of high level 
coordination easier? In any case, shouldn't the RFC mention something 
about reading vs writing?

Cheers,

Simon


Frank Warmerdam wrote:
> Motion: To adopt RFC 16: OGR Thread Safety
>
> http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy
>
> ---
>
> There wasn't to much discussion on this as far as I recall, which I take
> to mean no one has a problem with it.  So moving to formal vote so I can
> implement this coming week.
>
> +1 from me.
>
> Best regards,


From mchapman at texelinc.com  Sat Oct  6 13:43:37 2007
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4707C30D.20003@perkins.net>
References: <4707B5C4.2030703@pobox.com><4707C30D.20003@perkins.net>
Message-ID: <477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>

I agree.  Adding mt to gdal should be done at the application level.  That's what I do today and it works great.  You could also consider thread safe wrapper classes instead of modifying the core.  Simon's idea of a lock/unlock is good too.

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: Simon Perkins <sy@perkins.net>

Date: Sat, 06 Oct 2007 11:17:01 
To:Frank Warmerdam <warmerdam@pobox.com>
Cc:gdal-dev <gdal-dev@lists.maptools.org>
Subject: Re: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety


For some reason I missed or ignored the original posting of this RFC. I 
have a late comment / question...

What about methods that modify a layer? i.e. we have two threads, A and 
B accessing the same layer via layer clones, so they each have their own 
read state. What if thread A checks to see if a feature with FID 42 
exists, then B invokes a method to delete feature 42, before thread B 
attempts to get the geometry for that feature? Even if those calls are 
serialized, it is likely that thread A will get very confused.

I think in general, guaranteeing thread safety when you have threads 
modifying data is in general extremely hard at the library level, and 
really requires some kind of thread coordination at the application 
program level. Maybe the datasource mutex could be exposed with a couple 
of handy Lock/Unlock methods to make this kind of high level 
coordination easier? In any case, shouldn't the RFC mention something 
about reading vs writing?

Cheers,

Simon


Frank Warmerdam wrote:
> Motion: To adopt RFC 16: OGR Thread Safety
>
> http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy
>
> ---
>
> There wasn't to much discussion on this as far as I recall, which I take
> to mean no one has a problem with it.  So moving to formal vote so I can
> implement this coming week.
>
> +1 from me.
>
> Best regards,

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sy at perkins.net  Sat Oct  6 14:17:06 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
References: <4707B5C4.2030703@pobox.com><4707C30D.20003@perkins.net>
	<477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
Message-ID: <4707D122.4010701@perkins.net>


> What about methods that modify a layer? i.e. we have two threads, A and 
> B accessing the same layer via layer clones, so they each have their own 
> read state. What if thread A checks to see if a feature with FID 42 
> exists, then B invokes a method to delete feature 42, before thread B 
> attempts to get the geometry for that feature? Even if those calls are 
> serialized, it is likely that thread A will get very confused.
>   

Doh! Managed to screw up my example... This should read:

"What about methods that modify a layer? i.e. we have two threads, A and 
B accessing the same layer via layer clones, so they each have their own 
read state. What if thread A checks to see if a feature with FID 42 
exists, then B invokes a method to delete feature 42, before thread *A* 
attempts to get the geometry for that feature? Even if those calls are 
serialized, it is likely that thread A will get very confused."


Cheers,

Sy


> I think in general, guaranteeing thread safety when you have threads 
> modifying data is in general extremely hard at the library level, and 
> really requires some kind of thread coordination at the application 
> program level. Maybe the datasource mutex could be exposed with a couple 
> of handy Lock/Unlock methods to make this kind of high level 
> coordination easier? In any case, shouldn't the RFC mention something 
> about reading vs writing?
>
> Cheers,
>
> Simon
>
>
> Frank Warmerdam wrote:
>   
>> Motion: To adopt RFC 16: OGR Thread Safety
>>
>> http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy
>>
>> ---
>>
>> There wasn't to much discussion on this as far as I recall, which I take
>> to mean no one has a problem with it.  So moving to formal vote so I can
>> implement this coming week.
>>
>> +1 from me.
>>
>> Best regards,
>>     
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071006/0370b32f/attachment.html
From dmbaker at cox.net  Sun Oct  7 11:39:53 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
Message-ID: <000c01c808f8$4e5f5000$0701a8c0@DAVID>

All,

 

Though this question is not specific to GDAL, OGR or FWTools, I believe some
of the most knowledgeable people of the subject are on this mailing list and
hope you will allow me to ask.

 

At my company, there is an ongoing debate as to the best coordinate system
to store cooperate spatial data in.  The debate is mainly between the
Geoscience department and the GIS department.  The vast majority of the data
the Geo's use comes from public sources that are in geographic lat/lon in
NAD27.  This data is then reprojected for mapping and display in various
coordinate systems, state plane and UTM (zones 12 - 18, but mostly in 13, 14
and 15).  The GIS guys supply many layers to the Geo's for display.  They
are currently upgrading from ArcSDE 9.1 to 9.2, and in the process are
converting all their coordinates for storage in UTM zone 14.  GIS made the
comment that this is a much more accurate way to store the data, that
geographic coordinates are less precise, though, their main reason for
storing the data in a projected system is to avoid having to do any
coordinate conversion on the fly when displaying the data on corporate web
maps.  The layers supplied to the Geo's will need to be reprojected if their
current map projections are not UTM Zone 14.

 

The question: is it wise to store coordinates that cover such a wide area in
a single projected coordinate system, or would it be better to store them in
some geographic coordinate system, e.g., NAD83 or WGS84?  And if this not
the best way (UTM14), why?  What are the pitfalls?  Is it really more
accurate, or precise to store data in a Cartesian coordinates and suffer the
conversion to a different projection as needed?

 

Thanks,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071007/52a2497c/attachment.html
From warmerdam at pobox.com  Sun Oct  7 12:43:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: Turn off the old-gen Python bindings in trunk
In-Reply-To: <fe7j92$j49$1@sea.gmane.org>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com>
	<4706A367.8070407@noaa.gov> <4706B58C.7070709@pobox.com>
	<4706C02D.7050300@noaa.gov> <fe7j92$j49$1@sea.gmane.org>
Message-ID: <47090CB8.2000004@pobox.com>

WolfgangZ wrote:
> I also would like to try compiling gdal for Python 2.5. But some 
> questions remain:
> 
> - what compiler to use (I think you can get the Intel Compiler for free 
> in case of non commercial use)
> - do optional formats (like ecw, jp2kak,...) require additional 
> sourcecode or is everything needed already included in gdal

Wolfgang,

The GDAL team *supported* compiler is MSVC.  There is a free edition of
this that I gather will do what is needed.

Rather than put yourself in the position of having to compile all of GDAL,
I would encourage you to use the "standard" GDAL 1.4.2 release DLLs for
windows, and just build the bindings portion against them.  We can look at
compiling more plugins if that is required.  They do generally require
extra support things.

BTW, the core GDAL DLLs are compiled with MSVC 7.1, but my understanding is
that as long as you stick to using the C API (as the SWIG bindings do) it
is possible to use the DLLs from stuff built with other compilers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct  7 12:54:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <000c01c808f8$4e5f5000$0701a8c0@DAVID>
References: <000c01c808f8$4e5f5000$0701a8c0@DAVID>
Message-ID: <47090F5C.8010803@pobox.com>

David M. Baker wrote:
> The question: is it wise to store coordinates that cover such a wide 
> area in a single projected coordinate system, or would it be better to 
> store them in some geographic coordinate system, e.g., NAD83 or WGS84?  
> And if this not the best way (UTM14), why?  What are the pitfalls?  Is 
> it really more accurate, or precise to store data in a Cartesian 
> coordinates and suffer the conversion to a different projection as needed?

David,

I will make a few observations.

1) You mentioned NAD27 earlier.  All else being equal, I would be very
queasy about keeping spatial data in the NAD27 datum as the NAD27 datum is
often poorly defined, and there is some cost and error in shifting between
it and more regular datums like WGS84 since it is accomplished with approximate
grid shift files.

2) For coordinate data, like vector features, there is some difference in
precision between coordinate systems with a local origin as opposed to a
global origin.  That is, the further the coordinate system origin is from
the data, the greater the loss of precision.  Storing stuff in WGS84 lat/long
uses a global origin and so would lose a few bits of precision in double
precision storage compared to data stored in a coordinate system with a
local origin such as state plane for instance.  UTM however is really only
local in the east-west direction (relative to the central meridian of that
zone offset by the false easting).  Because UTM uses the equator as it's
Y origin precision of northing values is generally no better than working
with latitudes in degrees.

3) For raster data every resampling step results in spatial and radiometric
damage.  So it is best to keep the data in the coordinate system it was
collected in, or that it will be used in, if possible.

I don't think any of these 3 points will definatively settle the discussion,
but hopefully it will give slightly more concrete precision and accuracy
issues to consider.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dcmikkelsen at shaw.ca  Sun Oct  7 12:55:29 2007
From: dcmikkelsen at shaw.ca (Dean C. Mikkelsen)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <000c01c808f8$4e5f5000$0701a8c0@DAVID>
Message-ID: <000501c80902$dda546c0$72476c18@TERRAETL2>

Hi David,
 
I would recommend keeping all the co-ordinates in geographics
(latitude/longitude), rather than UTM Zone 14. Keeping all the data in one
zone for an area that covers 3 to 5 UTM Zones does not make sense from a
mapping point of view or even from a data conversion point of view.
 
Essentially your error is increasing exponentially the further away you go
from the Central Meridian in the UTM Projection. The more zones you cover,
the greater the error in the values. Not only that, as you transform the
coordinates back and forth from UTM 14 to geographic to UTM 12, 18, 15,
etc., you will also be introducing errors again. Then if you reproject to a
different datum, say NAD83, you are introducing another error (even if you
are using a grid conversion, such as NADCON (larger error if you are using a
Molodensky conversion).
 
For example, here in British Columbia, even using ArcSDE, coordinates are
stored in geographics (and we are covering 5 UTM Zones, but have settled
upon an Albers Projection - for mapping, and NAD83 for the datum). For
working in ArcSDE, take a look here:
http://srmwww.gov.bc.ca/gis/sdedata.html. Note that even the BC Gov't states
that for working outside B.C., that there "needs a different spatial
reference, even if it is stored in geographic or BC Albers projection. Data
in this larger area must have a lower resolution".
 
Remember, coordinates that are stored in latitude and longitude are usually
stored as two real numbers in decimal degrees and we know that these range
from -180.0 W to +180.0 E in longitude, and -90.0 S to +90.0 N in latitude,
for a total of 360.0 degrees around the earth in each direction. The earth's
circumference is roughly 40,000 kilometres or 40,000,000 metres and
therefore one can conclude there are about 
 

  40,000,000 

  ----------  

      360


or about 111,000 metres per degree of latitude anywhere on the earth. The
size of a degree of longitude varies - at the equator it's the same as a
degree of latitude, but at the poles it is 0. 

9 significant digits is sufficient to preserve metre precision (this would
be number (9,6) in Oracle), or 11 significant digits to preserve centimetre
precision (this would be number (11,8) in Oracle).

Also note that by restricting the range (extent) of the area that can be
included in a dataset, it is possible to increase the precision of the
coordinates stored - therefore I would not store everything in UTM 14. I
would only keep the coordinates in UTM 14 if that was my only are of
interest, otherwise keep it geographic (latitude and longitude). UTM is LESS
PRECISE after all the conversions and especially since we are talking about
3 to 5 zones.

I would also recommend that your GIS department move their data into
NAD83/WGS84, not NAD27. WGS84 is a precisely determined system, while NAD27
is not. NAD27 is based on triangulations being joined together to form a
model of the earth, which is centered at Meades Ranch, Kansas, while WGS84
is ECEF (Earth Centered Earth Fixed) and determined by Satellite
Measurements. NADCON is an accurate conversion for most mapping and GIS use,
so you should be safe there. I would also look at your local HARN network or
any local geodetic work done by your State Gov't Agency to see what they
recommend.

Let me know if I can expand further or answer more questions.

Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of David M. Baker
Sent: Sunday, October 07, 2007 8:40 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] A Question of Coordinate Storage



All,

 

Though this question is not specific to GDAL, OGR or FWTools, I believe some
of the most knowledgeable people of the subject are on this mailing list and
hope you will allow me to ask.

 

At my company, there is an ongoing debate as to the best coordinate system
to store cooperate spatial data in.  The debate is mainly between the
Geoscience department and the GIS department.  The vast majority of the data
the Geo's use comes from public sources that are in geographic lat/lon in
NAD27.  This data is then reprojected for mapping and display in various
coordinate systems, state plane and UTM (zones 12 - 18, but mostly in 13, 14
and 15).  The GIS guys supply many layers to the Geo's for display.  They
are currently upgrading from ArcSDE 9.1 to 9.2, and in the process are
converting all their coordinates for storage in UTM zone 14.  GIS made the
comment that this is a much more accurate way to store the data, that
geographic coordinates are less precise, though, their main reason for
storing the data in a projected system is to avoid having to do any
coordinate conversion on the fly when displaying the data on corporate web
maps.  The layers supplied to the Geo's will need to be reprojected if their
current map projections are not UTM Zone 14.

 

The question: is it wise to store coordinates that cover such a wide area in
a single projected coordinate system, or would it be better to store them in
some geographic coordinate system, e.g., NAD83 or WGS84?  And if this not
the best way (UTM14), why?  What are the pitfalls?  Is it really more
accurate, or precise to store data in a Cartesian coordinates and suffer the
conversion to a different projection as needed?

 

Thanks,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071007/cd67b5ea/attachment.html
From dmbaker at cox.net  Sun Oct  7 14:13:14 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <47090F5C.8010803@pobox.com>
References: <000c01c808f8$4e5f5000$0701a8c0@DAVID> <47090F5C.8010803@pobox.com>
Message-ID: <001a01c8090d$ba429650$0701a8c0@DAVID>

Frank,

Thanks for the quick reply.

We are not proposing to store the data in NAD27; it makes me uneasy too, but
a majority of our data vendors report coordinates in this system. I would
opt for WGS84. The fact of the matter is that for most of the data we deal
with we do not know provenance of the original coordinates, so my guess is
we are well within the decimal precision of any system we may use.

I see your point about UTM only be local east-west.  I had not considered
that!  Accept for the 2D and 3D seismic data that we collect (the bins of
which are surveyed in x,y's on the ground) most of our data has been
converted from one system to another before it is delivered (for the most
part NAD27).  Example: A well location is reported in NAD27 that would fall
in the in the very west extreme of UTM13 is converted to UTM14 for storage.
Would there not be significant error in the location in stored.  Also, if we
had a 3D survey that was surveyed in local coordinates of UTM13, would there
not be a difference?  Also, is more error introduced if a geologist then
re-projects this same well to a state plain system?  Would we have been
better off storing in WGS84?

Thanks,
David



-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Sunday, October 07, 2007 11:55 AM
To: David M. Baker
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] A Question of Coordinate Storage

David M. Baker wrote:
> The question: is it wise to store coordinates that cover such a wide 
> area in a single projected coordinate system, or would it be better to 
> store them in some geographic coordinate system, e.g., NAD83 or WGS84?  
> And if this not the best way (UTM14), why?  What are the pitfalls?  Is 
> it really more accurate, or precise to store data in a Cartesian 
> coordinates and suffer the conversion to a different projection as needed?

David,

I will make a few observations.

1) You mentioned NAD27 earlier.  All else being equal, I would be very
queasy about keeping spatial data in the NAD27 datum as the NAD27 datum is
often poorly defined, and there is some cost and error in shifting between
it and more regular datums like WGS84 since it is accomplished with
approximate
grid shift files.

2) For coordinate data, like vector features, there is some difference in
precision between coordinate systems with a local origin as opposed to a
global origin.  That is, the further the coordinate system origin is from
the data, the greater the loss of precision.  Storing stuff in WGS84
lat/long
uses a global origin and so would lose a few bits of precision in double
precision storage compared to data stored in a coordinate system with a
local origin such as state plane for instance.  UTM however is really only
local in the east-west direction (relative to the central meridian of that
zone offset by the false easting).  Because UTM uses the equator as it's
Y origin precision of northing values is generally no better than working
with latitudes in degrees.

3) For raster data every resampling step results in spatial and radiometric
damage.  So it is best to keep the data in the coordinate system it was
collected in, or that it will be used in, if possible.

I don't think any of these 3 points will definatively settle the discussion,
but hopefully it will give slightly more concrete precision and accuracy
issues to consider.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct  7 15:22:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <001a01c8090d$ba429650$0701a8c0@DAVID>
References: <000c01c808f8$4e5f5000$0701a8c0@DAVID> <47090F5C.8010803@pobox.com>
	<001a01c8090d$ba429650$0701a8c0@DAVID>
Message-ID: <4709320A.3000808@pobox.com>

David M. Baker wrote:
> Accept for the 2D and 3D seismic data that we collect (the bins of
> which are surveyed in x,y's on the ground) most of our data has been
> converted from one system to another before it is delivered (for the most
> part NAD27).  Example: A well location is reported in NAD27 that would fall
> in the in the very west extreme of UTM13 is converted to UTM14 for storage.
> Would there not be significant error in the location in stored.  

David,

As Dean pointed out typical algorithms to evaluate transverse mercator will
have increasing error as you move out from the central meridian - that is
a "round trip" from WGS84 -> UTM -> WGS84 will incur some error.  But I don't
think it is significant near the zone bounds.  In my experience you need to
be quite a ways from the central meridian before this sort of error accumulates
significantly (perhaps 9 degrees - one whole zone over).

 > Also, if we
> had a 3D survey that was surveyed in local coordinates of UTM13, would there
> not be a difference?  Also, is more error introduced if a geologist then
> re-projects this same well to a state plain system?  Would we have been
> better off storing in WGS84?

In my experience the reprojection error for point data in areas where
projections are well defined/implemented is not all that significant,
though there is always a bit.

But, it really sounds like the accuracy of your source data isn't great
anyways so some of these precision arguments are likely not very relavent.
For feature (vector/point/etc) data there is something to be said for the
simplicity of keeping everything in WGS84, and reprojecting to other
coordinate systems as needed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct  7 15:38:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4707C30D.20003@perkins.net>
References: <4707B5C4.2030703@pobox.com> <4707C30D.20003@perkins.net>
Message-ID: <470935B0.9000507@pobox.com>

Simon Perkins wrote:
> For some reason I missed or ignored the original posting of this RFC. I 
> have a late comment / question...
> 
 >
 > What about methods that modify a layer? i.e. we have two threads, A and
 > B accessing the same layer via layer clones, so they each have their own
 > read state. What if thread A checks to see if a feature with FID 42
 > exists, then B invokes a method to delete feature 42, before thread A
 > attempts to get the geometry for that feature? Even if those calls are
 > serialized, it is likely that thread A will get very confused.
Simon,

First, note that two different threads may not safely use a single
OGRLayer since OLCThreadSafe is not an option.  But distinct OGRLayer
objects referring to the same layer-on-disk could be created (one using
the GetLayerClone().

But, more to the point, there is no guarantee that nothing changes
between two calls into the OGR API.  So for instance, if a method on
the OGRLayer was used to find the FID of a feature, and then the
DeleteFeature() method was called, there is no guarantee that the
feature would still be there.  In fact, with RDBMS backed layers
it is already the case that a feature could disappear between a
query and a further action due to another client being connected to,
and updating the same database (transaction semantics aside).

For your specific example, features read from a database are normally
read as a complete record, and so GetNextFeature() returns a complete
feature, including the geometry whether you have accessed the geometry
or not.  Even within the method the database API ensures we either get
a complete record or we get nothing.

For file formats (imagine operating on a shapefile) it will be up to
the driver to ensure that only one clone of a layer at a time is
actually updating a shapefile via a per-underlying-layer mutex.  At
least in this scenario that is possible.  In the existing situation
applications would normally open the file twice if multiple threads
need access, and each datasource would have no idea what the other
might be doing.

> I think in general, guaranteeing thread safety when you have threads 
> modifying data is in general extremely hard at the library level, and 
> really requires some kind of thread coordination at the application 
> program level. Maybe the datasource mutex could be exposed with a couple 
> of handy Lock/Unlock methods to make this kind of high level 
> coordination easier? 

This is an interesting idea.

 > In any case, shouldn't the RFC mention something
> about reading vs writing?

Perhaps.  I will add something.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmbaker at cox.net  Sun Oct  7 15:46:41 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <000501c80902$dda546c0$72476c18@TERRAETL2>
References: <000c01c808f8$4e5f5000$0701a8c0@DAVID>
	<000501c80902$dda546c0$72476c18@TERRAETL2>
Message-ID: <001b01c8091a$c8acb2e0$0701a8c0@DAVID>

Dean,

 

Thanks for the link you provided.  There is a lot on info on this subject
germane to my problem.  Please see a reply I made to Frank earlier.  We are
not proposing storing our corporate data in NAD27 even though most of us
geoscientists do in our local database (because most of our vendor data come
in NAD27).  I guess I need to do some testing similar to those referred to
here: http://srmwww.gov.bc.ca/gis/bceprojection.html.  The GIS guys claim
greater accuracy, though I think they mean precision, but the fact is our
data is not that accurate.  If we are within a meter we are doing well,
though if I new for sure we were within 5 meters I would be happy.  We have
old data that is measured off a Jeffersonian gird system and converted to
NAD27 lat/lons, we have newer, survey, data that referenced to state plain
and then converted to NAD27 lat/lon, but more recently we get data that the
positions are acquired by GPS and reported in WGS84.  So we start with a
real provenance problem, but we live with that.  What concerns me is
potential for compounding or needlessly adding error for the sake of speed
in our map display.

 

David

  _____  

From: Dean C. Mikkelsen [mailto:dcmikkelsen@shaw.ca] 
Sent: Sunday, October 07, 2007 11:55 AM
To: 'David M. Baker'; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage

 

Hi David,

 

I would recommend keeping all the co-ordinates in geographics
(latitude/longitude), rather than UTM Zone 14. Keeping all the data in one
zone for an area that covers 3 to 5 UTM Zones does not make sense from a
mapping point of view or even from a data conversion point of view.

 

Essentially your error is increasing exponentially the further away you go
from the Central Meridian in the UTM Projection. The more zones you cover,
the greater the error in the values. Not only that, as you transform the
coordinates back and forth from UTM 14 to geographic to UTM 12, 18, 15,
etc., you will also be introducing errors again. Then if you reproject to a
different datum, say NAD83, you are introducing another error (even if you
are using a grid conversion, such as NADCON (larger error if you are using a
Molodensky conversion).

 

For example, here in British Columbia, even using ArcSDE, coordinates are
stored in geographics (and we are covering 5 UTM Zones, but have settled
upon an Albers Projection - for mapping, and NAD83 for the datum). For
working in ArcSDE, take a look here:
http://srmwww.gov.bc.ca/gis/sdedata.html. Note that even the BC Gov't states
that for working outside B.C., that there "needs a different spatial
reference, even if it is stored in geographic or BC Albers projection. Data
in this larger area must have a lower resolution".

 

Remember, coordinates that are stored in latitude and longitude are usually
stored as two real numbers in decimal degrees and we know that these range
from -180.0 W to +180.0 E in longitude, and -90.0 S to +90.0 N in latitude,
for a total of 360.0 degrees around the earth in each direction. The earth's
circumference is roughly 40,000 kilometres or 40,000,000 metres and
therefore one can conclude there are about 

 
  40,000,000 
  ----------  
      360
 
or about 111,000 metres per degree of latitude anywhere on the earth. The
size of a degree of longitude varies - at the equator it's the same as a
degree of latitude, but at the poles it is 0. 

9 significant digits is sufficient to preserve metre precision (this would
be number (9,6) in Oracle), or 11 significant digits to preserve centimetre
precision (this would be number (11,8) in Oracle).

Also note that by restricting the range (extent) of the area that can be
included in a dataset, it is possible to increase the precision of the
coordinates stored - therefore I would not store everything in UTM 14. I
would only keep the coordinates in UTM 14 if that was my only are of
interest, otherwise keep it geographic (latitude and longitude). UTM is LESS
PRECISE after all the conversions and especially since we are talking about
3 to 5 zones.

I would also recommend that your GIS department move their data into
NAD83/WGS84, not NAD27. WGS84 is a precisely determined system, while NAD27
is not. NAD27 is based on triangulations being joined together to form a
model of the earth, which is centered at Meades Ranch, Kansas, while WGS84
is ECEF (Earth Centered Earth Fixed) and determined by Satellite
Measurements. NADCON is an accurate conversion for most mapping and GIS use,
so you should be safe there. I would also look at your local HARN network or
any local geodetic work done by your State Gov't Agency to see what they
recommend.

Let me know if I can expand further or answer more questions.

Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of David M. Baker
Sent: Sunday, October 07, 2007 8:40 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] A Question of Coordinate Storage

All,

 

Though this question is not specific to GDAL, OGR or FWTools, I believe some
of the most knowledgeable people of the subject are on this mailing list and
hope you will allow me to ask.

 

At my company, there is an ongoing debate as to the best coordinate system
to store cooperate spatial data in.  The debate is mainly between the
Geoscience department and the GIS department.  The vast majority of the data
the Geo's use comes from public sources that are in geographic lat/lon in
NAD27.  This data is then reprojected for mapping and display in various
coordinate systems, state plane and UTM (zones 12 - 18, but mostly in 13, 14
and 15).  The GIS guys supply many layers to the Geo's for display.  They
are currently upgrading from ArcSDE 9.1 to 9.2, and in the process are
converting all their coordinates for storage in UTM zone 14.  GIS made the
comment that this is a much more accurate way to store the data, that
geographic coordinates are less precise, though, their main reason for
storing the data in a projected system is to avoid having to do any
coordinate conversion on the fly when displaying the data on corporate web
maps.  The layers supplied to the Geo's will need to be reprojected if their
current map projections are not UTM Zone 14.

 

The question: is it wise to store coordinates that cover such a wide area in
a single projected coordinate system, or would it be better to store them in
some geographic coordinate system, e.g., NAD83 or WGS84?  And if this not
the best way (UTM14), why?  What are the pitfalls?  Is it really more
accurate, or precise to store data in a Cartesian coordinates and suffer the
conversion to a different projection as needed?

 

Thanks,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071007/0779ca75/attachment.html
From warmerdam at pobox.com  Sun Oct  7 15:49:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
References: <4707B5C4.2030703@pobox.com><4707C30D.20003@perkins.net>
	<477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
Message-ID: <4709382F.6050405@pobox.com>

mchapman@texelinc.com wrote:
> I agree.  Adding mt to gdal should be done at the application level.  That's
> what I do today and it works great.  

Martin,

I'll concede this would have been my suggestion before I had a
contract to implement in-core thread safety. :-)

But I claim that application level locks are a poor solution for
applications that want to have multiple active queries against a
single layer (address by the GetLayerClone() mechanism).

I think the client is concerned about the cost of application
level locking in situations where there could be long blocks.  But
on thinking about it, it is not immediately clear to me that any
of the actions we are protecting at the driver or datasource level
would have taken very long anyways.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmbaker at cox.net  Sun Oct  7 16:10:09 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <4709320A.3000808@pobox.com>
References: <000c01c808f8$4e5f5000$0701a8c0@DAVID> <47090F5C.8010803@pobox.com>
	<001a01c8090d$ba429650$0701a8c0@DAVID> <4709320A.3000808@pobox.com>
Message-ID: <002601c8091e$0ff914b0$0701a8c0@DAVID>

Frank,

The info Dean presented was quite good!  My point to GIS has been just that,
it is a lot easier to maintain our data in WGS84 and reproject.  Most of our
data is reported in lat/lon in decimal degrees to 7 decimal places, -/+ a
1/10 of a foot, an precision that is much higher then the real accuracy of
the data.

Thanks for the replies, this has been a great help!

David

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Sunday, October 07, 2007 2:23 PM
To: David M. Baker
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] A Question of Coordinate Storage

David M. Baker wrote:
> Accept for the 2D and 3D seismic data that we collect (the bins of
> which are surveyed in x,y's on the ground) most of our data has been
> converted from one system to another before it is delivered (for the most
> part NAD27).  Example: A well location is reported in NAD27 that would
fall
> in the in the very west extreme of UTM13 is converted to UTM14 for
storage.
> Would there not be significant error in the location in stored.  

David,

As Dean pointed out typical algorithms to evaluate transverse mercator will
have increasing error as you move out from the central meridian - that is
a "round trip" from WGS84 -> UTM -> WGS84 will incur some error.  But I
don't
think it is significant near the zone bounds.  In my experience you need to
be quite a ways from the central meridian before this sort of error
accumulates
significantly (perhaps 9 degrees - one whole zone over).

 > Also, if we
> had a 3D survey that was surveyed in local coordinates of UTM13, would
there
> not be a difference?  Also, is more error introduced if a geologist then
> re-projects this same well to a state plain system?  Would we have been
> better off storing in WGS84?

In my experience the reprojection error for point data in areas where
projections are well defined/implemented is not all that significant,
though there is always a bit.

But, it really sounds like the accuracy of your source data isn't great
anyways so some of these precision arguments are likely not very relavent.
For feature (vector/point/etc) data there is something to be said for the
simplicity of keeping everything in WGS84, and reprojecting to other
coordinate systems as needed.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From philippe at cowpig.ca  Sun Oct  7 16:32:13 2007
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4707B5C4.2030703@pobox.com>
References: <4707B5C4.2030703@pobox.com>
Message-ID: <20071007203212.GA15029@cowpig.ca>

Hi Frank,

I believe this RFC is an excellent idea and will ultimately make the
lives of developers who are writing threaded applications a lot easier.

As application developers are moving towards concurrent applications
for the purpose of taking advantage of the current trend of multi-core
CPUs, the safer that it can  be made for developers using OGR to make
use of OGR in threaded applications, the better. My personal belief is
that thread safety is something that should per pervasive through an 
application; trying to deal with issues relating to code that isn't 
reentrant or threadsafe in a threaded application is just creating an 
additional burden for developers using OGR.

>From the RFC, as far as I can tell, the proposed changes will not impact 
the way developers will interact with OGR should they choose not to take
advantage of these features. As well, unless a format driver is to be
designed to take advantage of the threadsafe functionality, this doesn't
seem to impact the implementation of new OGR drivers. I believe the
changes required to OGR will ultimately be worth it for developers in
the long run -- having seen what a nightmare it is to deal with
libraries that are neither threadsafe nor reentrant in a threaded
application, I can't think of any real justification as to why not to
implement this RFC.

Cheers,
Phil

On Sat, Oct 06, 2007 at 12:20:20PM -0400, Frank Warmerdam wrote:
> Motion: To adopt RFC 16: OGR Thread Safety
> 
> http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy
> 
> ---
> 
> There wasn't to much discussion on this as far as I recall, which I take
> to mean no one has a problem with it.  So moving to formal vote so I can
> implement this coming week.
> 
> +1 from me.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From dcmikkelsen at shaw.ca  Sun Oct  7 16:47:39 2007
From: dcmikkelsen at shaw.ca (Dean C. Mikkelsen)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <001b01c8091a$c8acb2e0$0701a8c0@DAVID>
Message-ID: <001501c80923$4ca1da00$72476c18@TERRAETL2>

Hi David,
 
There is often a misunderstanding between accuracy and precision, but
essentially all things come down to the quality of data and the accuracy
required for intended purpose.
 
Having worked in the oil industry for many years (w/Schlumberger) where I
encountered this same problem with the Gulf of Mexico datasets, and more and
more data being acquired in WGS84, yet the MMS required at the time, the
data to be reported in NAD27 (in fact many oil companies still kept the data
in NAD27 due to the apparent cost of coverting data between the two - BP is
now just undertaking this exact process due to a change in gov't legislation
and a lobby group here in Canada (CAPP) finally recommending that the data
be stored in WGS84), and it is interesting to note, as we go to deep water
offshore GOM, there is hardly any NAD27 control (in fact only three points
measured on wells), which makes the transformation between NAD27 and NAD83
very questionable (less control, less parameters for the transformation
between the two systems), so the surveyors used their own control networks.
 
The recommendation that we adopted (as was applied to products such as
GeoFrame, Finder, OpenWorks) was to store coordinates in lat/long in WGS84
and let the software handle the map projection transformation as the speed
was hardly noticeable - this became the default for the software. It was
felt best to store the data in a defined ECEF coordinate system. There is no
need to compound the error, but instead maintain the errors at a level that
you know and understand. By moving the data to WGS84, you will know the
level of error and be able to assign some level of quality to the data. I
would still avoid storing everything in a map projection, specifically for a
specific zone, as you have a large area.
 
Historical data provides obstacles, but there is often other points to
consider as well with the data quality and even the monumentation (metes and
bounds, etc.) done at the time and what is available currently (presently).
 
Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: David M. Baker [mailto:dmbaker@cox.net] 
Sent: Sunday, October 07, 2007 12:47 PM
To: dcmikkelsen@shaw.ca; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage



Dean,

 

Thanks for the link you provided.  There is a lot on info on this subject
germane to my problem.  Please see a reply I made to Frank earlier.  We are
not proposing storing our corporate data in NAD27 even though most of us
geoscientists do in our local database (because most of our vendor data come
in NAD27).  I guess I need to do some testing similar to those referred to
here: http://srmwww.gov.bc.ca/gis/bceprojection.html.  The GIS guys claim
greater accuracy, though I think they mean precision, but the fact is our
data is not that accurate.  If we are within a meter we are doing well,
though if I new for sure we were within 5 meters I would be happy.  We have
old data that is measured off a Jeffersonian gird system and converted to
NAD27 lat/lons, we have newer, survey, data that referenced to state plain
and then converted to NAD27 lat/lon, but more recently we get data that the
positions are acquired by GPS and reported in WGS84.  So we start with a
real provenance problem, but we live with that.  What concerns me is
potential for compounding or needlessly adding error for the sake of speed
in our map display.

 

David


  _____  


From: Dean C. Mikkelsen [mailto:dcmikkelsen@shaw.ca] 
Sent: Sunday, October 07, 2007 11:55 AM
To: 'David M. Baker'; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage

 

Hi David,

 

I would recommend keeping all the co-ordinates in geographics
(latitude/longitude), rather than UTM Zone 14. Keeping all the data in one
zone for an area that covers 3 to 5 UTM Zones does not make sense from a
mapping point of view or even from a data conversion point of view.

 

Essentially your error is increasing exponentially the further away you go
from the Central Meridian in the UTM Projection. The more zones you cover,
the greater the error in the values. Not only that, as you transform the
coordinates back and forth from UTM 14 to geographic to UTM 12, 18, 15,
etc., you will also be introducing errors again. Then if you reproject to a
different datum, say NAD83, you are introducing another error (even if you
are using a grid conversion, such as NADCON (larger error if you are using a
Molodensky conversion).

 

For example, here in British Columbia, even using ArcSDE, coordinates are
stored in geographics (and we are covering 5 UTM Zones, but have settled
upon an Albers Projection - for mapping, and NAD83 for the datum). For
working in ArcSDE, take a look here:
http://srmwww.gov.bc.ca/gis/sdedata.html. Note that even the BC Gov't states
that for working outside B.C., that there "needs a different spatial
reference, even if it is stored in geographic or BC Albers projection. Data
in this larger area must have a lower resolution".

 

Remember, coordinates that are stored in latitude and longitude are usually
stored as two real numbers in decimal degrees and we know that these range
from -180.0 W to +180.0 E in longitude, and -90.0 S to +90.0 N in latitude,
for a total of 360.0 degrees around the earth in each direction. The earth's
circumference is roughly 40,000 kilometres or 40,000,000 metres and
therefore one can conclude there are about 

 
  40,000,000 
  ----------  
      360
 
or about 111,000 metres per degree of latitude anywhere on the earth. The
size of a degree of longitude varies - at the equator it's the same as a
degree of latitude, but at the poles it is 0. 

9 significant digits is sufficient to preserve metre precision (this would
be number (9,6) in Oracle), or 11 significant digits to preserve centimetre
precision (this would be number (11,8) in Oracle).

Also note that by restricting the range (extent) of the area that can be
included in a dataset, it is possible to increase the precision of the
coordinates stored - therefore I would not store everything in UTM 14. I
would only keep the coordinates in UTM 14 if that was my only are of
interest, otherwise keep it geographic (latitude and longitude). UTM is LESS
PRECISE after all the conversions and especially since we are talking about
3 to 5 zones.

I would also recommend that your GIS department move their data into
NAD83/WGS84, not NAD27. WGS84 is a precisely determined system, while NAD27
is not. NAD27 is based on triangulations being joined together to form a
model of the earth, which is centered at Meades Ranch, Kansas, while WGS84
is ECEF (Earth Centered Earth Fixed) and determined by Satellite
Measurements. NADCON is an accurate conversion for most mapping and GIS use,
so you should be safe there. I would also look at your local HARN network or
any local geodetic work done by your State Gov't Agency to see what they
recommend.

Let me know if I can expand further or answer more questions.

Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of David M. Baker
Sent: Sunday, October 07, 2007 8:40 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] A Question of Coordinate Storage

All,

 

Though this question is not specific to GDAL, OGR or FWTools, I believe some
of the most knowledgeable people of the subject are on this mailing list and
hope you will allow me to ask.

 

At my company, there is an ongoing debate as to the best coordinate system
to store cooperate spatial data in.  The debate is mainly between the
Geoscience department and the GIS department.  The vast majority of the data
the Geo's use comes from public sources that are in geographic lat/lon in
NAD27.  This data is then reprojected for mapping and display in various
coordinate systems, state plane and UTM (zones 12 - 18, but mostly in 13, 14
and 15).  The GIS guys supply many layers to the Geo's for display.  They
are currently upgrading from ArcSDE 9.1 to 9.2, and in the process are
converting all their coordinates for storage in UTM zone 14.  GIS made the
comment that this is a much more accurate way to store the data, that
geographic coordinates are less precise, though, their main reason for
storing the data in a projected system is to avoid having to do any
coordinate conversion on the fly when displaying the data on corporate web
maps.  The layers supplied to the Geo's will need to be reprojected if their
current map projections are not UTM Zone 14.

 

The question: is it wise to store coordinates that cover such a wide area in
a single projected coordinate system, or would it be better to store them in
some geographic coordinate system, e.g., NAD83 or WGS84?  And if this not
the best way (UTM14), why?  What are the pitfalls?  Is it really more
accurate, or precise to store data in a Cartesian coordinates and suffer the
conversion to a different projection as needed?

 

Thanks,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071007/1d4208bf/attachment.html
From dmbaker at cox.net  Sun Oct  7 17:12:55 2007
From: dmbaker at cox.net (David M. Baker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] A Question of Coordinate Storage
In-Reply-To: <001501c80923$4ca1da00$72476c18@TERRAETL2>
References: <001b01c8091a$c8acb2e0$0701a8c0@DAVID>
	<001501c80923$4ca1da00$72476c18@TERRAETL2>
Message-ID: <002a01c80926$d4c70880$0701a8c0@DAVID>

Dean,

 

Perfectly said!  Thank you for your insight.  What is interesting is we are
doing an evaluation of Discovery on OpenWorks and the original
recommendation that Halliburton was to store all data in some projected
coordinate system as OpenWorks is so Landmark seismic oriented.  But were
are looking for a robust corporate well data store and have operations from
the Rockies to the Gulf and New Mexico to Appalachia, so a single projected
system is not practical.  The new version of OpenWorks at least stores both
the original coordinates and the master projected be it x, y or lat/lon.

 

David

 

  _____  

From: Dean C. Mikkelsen [mailto:dcmikkelsen@shaw.ca] 
Sent: Sunday, October 07, 2007 3:48 PM
To: 'David M. Baker'; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage

 

Hi David,

 

There is often a misunderstanding between accuracy and precision, but
essentially all things come down to the quality of data and the accuracy
required for intended purpose.

 

Having worked in the oil industry for many years (w/Schlumberger) where I
encountered this same problem with the Gulf of Mexico datasets, and more and
more data being acquired in WGS84, yet the MMS required at the time, the
data to be reported in NAD27 (in fact many oil companies still kept the data
in NAD27 due to the apparent cost of coverting data between the two - BP is
now just undertaking this exact process due to a change in gov't legislation
and a lobby group here in Canada (CAPP) finally recommending that the data
be stored in WGS84), and it is interesting to note, as we go to deep water
offshore GOM, there is hardly any NAD27 control (in fact only three points
measured on wells), which makes the transformation between NAD27 and NAD83
very questionable (less control, less parameters for the transformation
between the two systems), so the surveyors used their own control networks.

 

The recommendation that we adopted (as was applied to products such as
GeoFrame, Finder, OpenWorks) was to store coordinates in lat/long in WGS84
and let the software handle the map projection transformation as the speed
was hardly noticeable - this became the default for the software. It was
felt best to store the data in a defined ECEF coordinate system. There is no
need to compound the error, but instead maintain the errors at a level that
you know and understand. By moving the data to WGS84, you will know the
level of error and be able to assign some level of quality to the data. I
would still avoid storing everything in a map projection, specifically for a
specific zone, as you have a large area.

 

Historical data provides obstacles, but there is often other points to
consider as well with the data quality and even the monumentation (metes and
bounds, etc.) done at the time and what is available currently (presently).

 

Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: David M. Baker [mailto:dmbaker@cox.net] 
Sent: Sunday, October 07, 2007 12:47 PM
To: dcmikkelsen@shaw.ca; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage

Dean,

 

Thanks for the link you provided.  There is a lot on info on this subject
germane to my problem.  Please see a reply I made to Frank earlier.  We are
not proposing storing our corporate data in NAD27 even though most of us
geoscientists do in our local database (because most of our vendor data come
in NAD27).  I guess I need to do some testing similar to those referred to
here: http://srmwww.gov.bc.ca/gis/bceprojection.html.  The GIS guys claim
greater accuracy, though I think they mean precision, but the fact is our
data is not that accurate.  If we are within a meter we are doing well,
though if I new for sure we were within 5 meters I would be happy.  We have
old data that is measured off a Jeffersonian gird system and converted to
NAD27 lat/lons, we have newer, survey, data that referenced to state plain
and then converted to NAD27 lat/lon, but more recently we get data that the
positions are acquired by GPS and reported in WGS84.  So we start with a
real provenance problem, but we live with that.  What concerns me is
potential for compounding or needlessly adding error for the sake of speed
in our map display.

 

David


  _____  


From: Dean C. Mikkelsen [mailto:dcmikkelsen@shaw.ca] 
Sent: Sunday, October 07, 2007 11:55 AM
To: 'David M. Baker'; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] A Question of Coordinate Storage

 

Hi David,

 

I would recommend keeping all the co-ordinates in geographics
(latitude/longitude), rather than UTM Zone 14. Keeping all the data in one
zone for an area that covers 3 to 5 UTM Zones does not make sense from a
mapping point of view or even from a data conversion point of view.

 

Essentially your error is increasing exponentially the further away you go
from the Central Meridian in the UTM Projection. The more zones you cover,
the greater the error in the values. Not only that, as you transform the
coordinates back and forth from UTM 14 to geographic to UTM 12, 18, 15,
etc., you will also be introducing errors again. Then if you reproject to a
different datum, say NAD83, you are introducing another error (even if you
are using a grid conversion, such as NADCON (larger error if you are using a
Molodensky conversion).

 

For example, here in British Columbia, even using ArcSDE, coordinates are
stored in geographics (and we are covering 5 UTM Zones, but have settled
upon an Albers Projection - for mapping, and NAD83 for the datum). For
working in ArcSDE, take a look here:
http://srmwww.gov.bc.ca/gis/sdedata.html. Note that even the BC Gov't states
that for working outside B.C., that there "needs a different spatial
reference, even if it is stored in geographic or BC Albers projection. Data
in this larger area must have a lower resolution".

 

Remember, coordinates that are stored in latitude and longitude are usually
stored as two real numbers in decimal degrees and we know that these range
from -180.0 W to +180.0 E in longitude, and -90.0 S to +90.0 N in latitude,
for a total of 360.0 degrees around the earth in each direction. The earth's
circumference is roughly 40,000 kilometres or 40,000,000 metres and
therefore one can conclude there are about 

 
  40,000,000 
  ----------  
      360
 
or about 111,000 metres per degree of latitude anywhere on the earth. The
size of a degree of longitude varies - at the equator it's the same as a
degree of latitude, but at the poles it is 0. 

9 significant digits is sufficient to preserve metre precision (this would
be number (9,6) in Oracle), or 11 significant digits to preserve centimetre
precision (this would be number (11,8) in Oracle).

Also note that by restricting the range (extent) of the area that can be
included in a dataset, it is possible to increase the precision of the
coordinates stored - therefore I would not store everything in UTM 14. I
would only keep the coordinates in UTM 14 if that was my only are of
interest, otherwise keep it geographic (latitude and longitude). UTM is LESS
PRECISE after all the conversions and especially since we are talking about
3 to 5 zones.

I would also recommend that your GIS department move their data into
NAD83/WGS84, not NAD27. WGS84 is a precisely determined system, while NAD27
is not. NAD27 is based on triangulations being joined together to form a
model of the earth, which is centered at Meades Ranch, Kansas, while WGS84
is ECEF (Earth Centered Earth Fixed) and determined by Satellite
Measurements. NADCON is an accurate conversion for most mapping and GIS use,
so you should be safe there. I would also look at your local HARN network or
any local geodetic work done by your State Gov't Agency to see what they
recommend.

Let me know if I can expand further or answer more questions.

Cheers,

Dean

Dean C. Mikkelsen, B.Sc., P.Eng.

Terra ETL Ltd. - http://www.terraetl.com

 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of David M. Baker
Sent: Sunday, October 07, 2007 8:40 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] A Question of Coordinate Storage

All,

 

Though this question is not specific to GDAL, OGR or FWTools, I believe some
of the most knowledgeable people of the subject are on this mailing list and
hope you will allow me to ask.

 

At my company, there is an ongoing debate as to the best coordinate system
to store cooperate spatial data in.  The debate is mainly between the
Geoscience department and the GIS department.  The vast majority of the data
the Geo's use comes from public sources that are in geographic lat/lon in
NAD27.  This data is then reprojected for mapping and display in various
coordinate systems, state plane and UTM (zones 12 - 18, but mostly in 13, 14
and 15).  The GIS guys supply many layers to the Geo's for display.  They
are currently upgrading from ArcSDE 9.1 to 9.2, and in the process are
converting all their coordinates for storage in UTM zone 14.  GIS made the
comment that this is a much more accurate way to store the data, that
geographic coordinates are less precise, though, their main reason for
storing the data in a projected system is to avoid having to do any
coordinate conversion on the fly when displaying the data on corporate web
maps.  The layers supplied to the Geo's will need to be reprojected if their
current map projections are not UTM Zone 14.

 

The question: is it wise to store coordinates that cover such a wide area in
a single projected coordinate system, or would it be better to store them in
some geographic coordinate system, e.g., NAD83 or WGS84?  And if this not
the best way (UTM14), why?  What are the pitfalls?  Is it really more
accurate, or precise to store data in a Cartesian coordinates and suffer the
conversion to a different projection as needed?

 

Thanks,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071007/31378ea2/attachment.html
From szekerest at gmail.com  Sun Oct  7 19:24:05 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4707B5C4.2030703@pobox.com>
References: <4707B5C4.2030703@pobox.com>
Message-ID: <f3b73b7d0710071624p49a84016jc9651e72e4f27a04@mail.gmail.com>

> There wasn't to much discussion on this as far as I recall, which I take
> to mean no one has a problem with it.  So moving to formal vote so I can
> implement this coming week.
>

Frank,

For me personally it's quite difficult to think over all of the
aspects of the proposed changes and should dig into the code and see
what we are fighting against.

As reading the title of the RFC I could think we'd want to put all the
OGR core into a good shape from the aspect of the thread safety. But
later only, some of the methods were addressed.
I would rather like to see the problem itself instead of it's
consequences. For example it would be better to enumerate the global
resources (staic variables, handles etc.) we are focusing on, in
addition to the methods that may use them. It's not so easy for me  to
consider all of the potential problems without looking into the code
(not having implemented by me) and searching for the core issue
behind.

Generally I like the idea as the RFC that would keep away much of the
backward incompatible changes, however conceptionally I would prefer
maintaining the internal state/context (such as the reader state) at
the client if it is possible when thinking about the multithreading
compliance. (Which might not be so easy to implement)

If we have static variables (that cannot be eliminated) then using
locks around that is inevitable, definitely. It seems we want to push
these issues at the driver's level that might be reasonable, but some
kind of locking strategy should be enforced for the various driver
implementors to follow. For example we should somehow establish a
framework for using 'shared locks' for reading the data and 'exclusive
locks' when writing etc.

Programmatically declaring how a driver implements the thread safety
is a bit awkward for me. I don't think it's convenient for the caller
starting by calling TestCapability first and then switching to
different accessing scheme depending to the driver's threading
behaviour. This is what should be deaclared for example on a wiki page
instead.

I like the cloning approach as a by-pass solution, however the various
drivers should suffer hardly when implementing a feasible code behind
that. I would prefer to see some of the details in this RFC to be
mentioned, like

1. Which are the globals that might be eliminated (if any)
2. Which are the resources (variables, file handles, database
connections, handles etc.) that should be protected by locks
3. Desired locking implementation patterns to be implemented by the drivers.


Apologies for this undetailed response, as coming back from the
conference it's difficult for me to kill all the pending tasks
aggregated and focus on the more important problems ;-)


Best regards,

Tamas

From sy at perkins.net  Sun Oct  7 19:44:28 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <4709382F.6050405@pobox.com>
References: <4707B5C4.2030703@pobox.com><4707C30D.20003@perkins.net>	<477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
	<4709382F.6050405@pobox.com>
Message-ID: <47096F5C.6070903@perkins.net>

Frank Warmerdam wrote:
> But I claim that application level locks are a poor solution for
> applications that want to have multiple active queries against a
> single layer (address by the GetLayerClone() mechanism).

The point I was trying to make is that if all the threads are just 
reading data from the Layers, then it's reasonable to implement 
synchronization at the library level as you suggest. However, as soon as 
you have a situation where one or more threads might modify those layers 
(or even delete them), then locking per library call is no longer 
sufficient. I just think the RFC should make this distinction clear.

As you point out, it's really not even sufficient to lock at the 
application level either since multiple applications might be accessing 
the same shared data source. For RDBMSes is it possible to have the 
DataSource mutex actually lock something at the database level? If this 
mutex is exposed by the DataSource API for application level locking, 
then this would provide considerable protection against overlapping updates.

Cheers,

Sy


From szekerest at gmail.com  Mon Oct  8 07:22:28 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Motion to Adopt RFC 16: OGR Thread Safety
In-Reply-To: <47096F5C.6070903@perkins.net>
References: <4707B5C4.2030703@pobox.com> <4707C30D.20003@perkins.net>
	<477287699-1191692698-cardhu_decombobulator_blackberry.rim.net-1972171391-@bxe022.bisx.prod.on.blackberry>
	<4709382F.6050405@pobox.com> <47096F5C.6070903@perkins.net>
Message-ID: <f3b73b7d0710080422g64f3d195taa012ff81ac0570b@mail.gmail.com>

2007/10/8, Simon Perkins <sy@perkins.net>:
>
> The point I was trying to make is that if all the threads are just
> reading data from the Layers, then it's reasonable to implement
> synchronization at the library level as you suggest. However, as soon as
> you have a situation where one or more threads might modify those layers
> (or even delete them), then locking per library call is no longer
> sufficient. I just think the RFC should make this distinction clear.
>
> As you point out, it's really not even sufficient to lock at the
> application level either since multiple applications might be accessing
> the same shared data source. For RDBMSes is it possible to have the
> DataSource mutex actually lock something at the database level? If this
> mutex is exposed by the DataSource API for application level locking,
> then this would provide considerable protection against overlapping updates.
>

Simon,

I think in this RFC we are thinking mainly about the problems inside
the OGR core not at the database. For example like a shared variable
(inside ogr) should be protected against the simultaneous access by
multiple threads.

I don't think we should do much with the adatabase level issues from
the application just rely on the transaction isolation mechanism
related to the database server and use it's built in locking mecanism
implicitly.
For the file based datasources IMO this issue should also be handled
at file level by controlling the access and the share mode on the file
properly. The simultaneous read only accesses should not be locked at
application or library level at all.

In addition when editing spatial data some more sophisticated editing
strategies like long transactions and versioning are often considered
to be implemented, however that falls pretty far from the original
concept and objectives.

Best regards,

Tamas

From hfpmartins at gmail.com  Mon Oct  8 08:01:51 2007
From: hfpmartins at gmail.com (Hugo Martins)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Controlling pixel values??
Message-ID: <f647f0570710080501v27f6f565web3aed6a9207d2b4@mail.gmail.com>

Hi gdal users,

I was looking for information on how to handle pixel values with gdal and i
could get no conclusion.
My question is simple: is it possible to apply transformations on the pixel
values of images??
For example, if i'm using modis NDVI subdataset i have to make a division by
10000 to get the NDVI value between -1 and 1. Can i make this using gdal? If
yes, how?

Thanks in advance,
Cheers,

Hugo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071008/ddf4afb6/attachment.html
From bbayer at havelsan.com.tr  Mon Oct  8 09:24:41 2007
From: bbayer at havelsan.com.tr (Burak BAYER)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Normalizing color maps..
Message-ID: <470A2F99.2050301@havelsan.com.tr>

Hi,
Is it possible to normalize or rebuild color map of different GeoTiff
files.. I have map data of Turkiye and when I merge them with
gdal_merge.py, color data of whole map become corrupted because of each
tile has different color table.. So how can I merge them with correct
color entries..

Dikkat: Bu elektronik posta mesaji kisisel ve ozeldir. Eger size gonderilmediyse lutfen gondericiyi bilgilendirip mesaji siliniz.Firmamiza gelen ve giden mesajlar virus taramasindan gecirilmekte, guvenlik nedeni ile kontrol edilerek saklanmaktadir.Mesajdaki gorusler  gondericiye ait olup HAVELSAN A.S. resmi gorusu olmak zorunda degildir.

Attention: This e-mail message is private and privileged.If you are not the recipient for whom this e-mail message is intended, please notify the sender immediately and delete this e-mail message from your system.All sent and received e-mail messages go through a virus scan in our company, and because of security reasons, they are stored after being controlled.Any opinions presented in this e-mail message are solely those of the author and do not necessarily represent HAVELSAN A.S.`s formal and authorized views.

From wollez at gmx.net  Mon Oct  8 09:54:56 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Re: Normalizing color maps..
In-Reply-To: <470A2F99.2050301@havelsan.com.tr>
References: <470A2F99.2050301@havelsan.com.tr>
Message-ID: <fedcrh$vss$1@sea.gmane.org>

Burak BAYER schrieb:
> Hi,
> Is it possible to normalize or rebuild color map of different GeoTiff
> files.. I have map data of Turkiye and when I merge them with
> gdal_merge.py, color data of whole map become corrupted because of each
> tile has different color table.. So how can I merge them with correct
> color entries..
> 

I'm not sure if it is dirctly possible, but one way is to use pct2rgb 
and then rgb2pct. I recently added the possibility to rgb2pct that it 
can read color tables from a text file (extract the color table from 
your first image and reuse that table for the other images). If there is 
interest I can provide this version of rgb2pct.

Regards
Wolfgang


From warmerdam at pobox.com  Mon Oct  8 10:59:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Normalizing color maps..
In-Reply-To: <470A2F99.2050301@havelsan.com.tr>
References: <470A2F99.2050301@havelsan.com.tr>
Message-ID: <470A45E7.1090701@pobox.com>

Burak BAYER wrote:
> Hi,
> Is it possible to normalize or rebuild color map of different GeoTiff
> files.. I have map data of Turkiye and when I merge them with
> gdal_merge.py, color data of whole map become corrupted because of each
> tile has different color table.. So how can I merge them with correct
> color entries..

Burak,

To mosaic colormapped images with different colormaps, you need to first
convert the images to 24bit RGB format (with pct2rgb.py).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Oct  8 11:07:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Controlling pixel values??
In-Reply-To: <f647f0570710080501v27f6f565web3aed6a9207d2b4@mail.gmail.com>
References: <f647f0570710080501v27f6f565web3aed6a9207d2b4@mail.gmail.com>
Message-ID: <470A47BC.7010706@pobox.com>

Hugo Martins wrote:
> Hi gdal users,
> 
> I was looking for information on how to handle pixel values with gdal 
> and i could get no conclusion.
> My question is simple: is it possible to apply transformations on the 
> pixel values of images??
> For example, if i'm using modis NDVI subdataset i have to make a 
> division by 10000 to get the NDVI value between -1 and 1. Can i make 
> this using gdal? If yes, how?

Hugo,

Generally speaking the answer is that you should read the pixel values,
and then apply any transformations you want yourself in code.

The complex answer is that there is limited support for creating VRT
files to wrap another datasource and have the VRT apply on the fly
rescaling of pixel values.  This requires use of the ComplexSource type
but this is not currently documented, so you would need to dig around in
the code in gdal/frmts/vrt a bit to figure out how to do it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From geom06005 at geo.aegean.gr  Mon Oct  8 11:48:00 2007
From: geom06005 at geo.aegean.gr (Giannakos Apostolos)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] problem installing gdal 1.4.2 in ubuntu machine
Message-ID: <B9BD9EDE5DE3744CA52B1CB17AE98C2407CCAD60@hermes2.aegean.gr>


  
Dear list 


I have problems installing the gdal source code 1.4.2 tar.gz from the site http://trac.osgeo.org/gdal/wiki/DownloadSource in ubuntu distrution

I am writing in the shell the following commands

root1@root1-laptop:~$ cd Desktop
root1@root1-laptop:~/Desktop$ 
root1@root1-laptop:~/Desktop$ gunzip gdal-1.4.2.tar.gz
root1@root1-laptop:~/Desktop$ tar xvf gdal-1.4.2.tar
root1@root1-laptop:~/Desktop$ cd gdal-1.4.2
root1@root1-laptop:~/Desktop/gdal-1.4.2$ 
root1@root1-laptop:~/Desktop/gdal-1.4.2$ ./configure --prefix=INSTALL_DIR
configure: error: expected an absolute directory name for --prefix: INSTALL_DIR

Does anyone knows why i have this error or is there a guide about installing  gdal in ubuntu with the specific steps?


Thanks in advance for your time and patience

apostolis 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071008/438c86b0/attachment.html
From warmerdam at pobox.com  Mon Oct  8 13:11:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] problem installing gdal 1.4.2 in ubuntu machine
In-Reply-To: <B9BD9EDE5DE3744CA52B1CB17AE98C2407CCAD60@hermes2.aegean.gr>
References: <B9BD9EDE5DE3744CA52B1CB17AE98C2407CCAD60@hermes2.aegean.gr>
Message-ID: <470A64AD.4050105@pobox.com>

Giannakos Apostolos wrote:
> 
>  
> Dear list
> 
> 
> I have problems installing the gdal source code 1.4.2 tar.gz from the 
> site http://trac.osgeo.org/gdal/wiki/DownloadSource in ubuntu distrution
> 
> I am writing in the shell the following commands
> 
> root1@root1-laptop:~$ cd Desktop
> root1@root1-laptop:~/Desktop$
> root1@root1-laptop:~/Desktop$ gunzip gdal-1.4.2.tar.gz
> root1@root1-laptop:~/Desktop$ tar xvf gdal-1.4.2.tar
> root1@root1-laptop:~/Desktop$ cd gdal-1.4.2
> root1@root1-laptop:~/Desktop/gdal-1.4.2$
> root1@root1-laptop:~/Desktop/gdal-1.4.2$ ./configure --prefix=INSTALL_DIR
> configure: error: expected an absolute directory name for --prefix: 
> INSTALL_DIR
> 
> Does anyone knows why i have this error or is there a guide about 
> installing  gdal in ubuntu with the specific steps?

Apostolos,

Why are you using INSTALL_DIR as the argument to --prefix?  Where do you
want GDAL installed?  If you drop the --prefix argument it will be
installed in /usr/local, which is often appropriate.  If you want it
somewhere else, please use an absolute path.

eg.
./configure --prefix=/home/apostolos/bld

There is general information about building on Unix systems at:

   http://trac.osgeo.org/gdal/wiki/BuildingOnUnix

Some additional hints for more esoteric issues can be found at:

   http://trac.osgeo.org/gdal/wiki/BuildHints

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jcermak at atmos.washington.edu  Mon Oct  8 20:16:35 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Read hdf band, inverse dimensions
In-Reply-To: <4705AF56.5080403@pmldnet.com>
References: <47058915.8010503@atmos.washington.edu>
	<4705AF56.5080403@pmldnet.com>
Message-ID: <470AC863.7070501@atmos.washington.edu>

Lucena,

Thanks for the suggestion, I will try that. However, I would really like 
to find a way to all this from within python, without external tools and 
without any reprojection. Does anybody know a way of doing this?

Jan


Lucena, Ivan wrote:
> Jan,
> 
> I once had a problem just like that and the solution was to 
> translate/project the data to geotiffs using "Modis Swath Reprojection 
> Tool" and then go back to GDAL to work with the tifs.
> 
> Ref.: [http://edcdaac.usgs.gov/landdaac/tools/mrtswath/]
> 
> Good luck,
> 
> Ivan
> 
> Jan Cermak wrote:
>> Hi!
>>
>> I am trying to read a band from a MODIS hdf file. This in itself does 
>> not seem to be a problematic thing to do; however, the dimensions of 
>> the array are inverse.
>>
>> gdalinfo myfile.hdf (or gdal.Dataset.GetSubDatasets) yields:
>> [snip]
>> SUBDATASET_52_NAME=HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
>> SUBDATASET_52_DESC=[2040x1354x2] Cloud_Mask_1km mod06 (8-bit integer)
>> [snip]
>>
>> So there are two bands of size 2040x1354 in my subdataset. However, in 
>> order for gdal to recognize them as two bands the dimensions would 
>> have to be [2x2040x1354].
>>
>> Accordingly, when I do
>> gdalinfo HDF4_EOS:EOS_SWATH:'myfile.hdf':mod06:Cloud_Mask_1km
>> I get information on 2040 different bands, each of size 1354x2
>>
>> What can I do to get my two bands? I know I could read 2040 datasets 
>> and then reassemble them. But that takes 2/3 eternity.
>>
>> All help appreciated!
>>
>> Jan
>>
>>



From uwe.schmitz at lverma.nrw.de  Tue Oct  9 02:26:22 2007
From: uwe.schmitz at lverma.nrw.de (uwe.schmitz@lverma.nrw.de)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] ogr and utf-8 encoding
Message-ID: <C900396522B3C142AA9A7F5AFEE11CB301380382@slva01lvnt23.lverma.nrw.de>

Roger,
Frank,

> 
> My understanding is that no work on utf-8 or RFC-5 has been done yet.
> Currently there is no mechanism to set the code page for 
> shapefiles nor for
> identifying the code page from csv files.
> 
at least for shape-files it seems to be possible to
specify a code page. Please take a look at: 

http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=27345

and especially
http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21106
http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=26015

But I fear this is not widely used.

best wishes
uwe

---------------------------------------------------------
... Uwe Schmitz  Landesvermessungsamt Nordrhein-Westfalen
... Muffendorfer Str. 19 - 21              D - 53177 Bonn
... E-mail:       uwe.schmitzNO@SPAMlverma.nrw.de
... Internet:     http://www.lverma.nrw.de



From woodbri at swoodbridge.com  Tue Oct  9 09:28:48 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] ogr and utf-8 encoding
In-Reply-To: <C900396522B3C142AA9A7F5AFEE11CB301380382@slva01lvnt23.lverma.nrw.de>
References: <C900396522B3C142AA9A7F5AFEE11CB301380382@slva01lvnt23.lverma.nrw.de>
Message-ID: <470B8210.5020109@swoodbridge.com>

uwe.schmitz@lverma.nrw.de wrote:
> Roger,
> Frank,
> 
>> My understanding is that no work on utf-8 or RFC-5 has been done yet.
>> Currently there is no mechanism to set the code page for 
>> shapefiles nor for
>> identifying the code page from csv files.
>>
> at least for shape-files it seems to be possible to
> specify a code page. Please take a look at: 
> 
> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=27345
> 
> and especially
> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=21106
> http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=26015
> 
> But I fear this is not widely used.

It would be nice if shapelib supported this with an interface to iconv. 
This could also be useful in shp2pgsql and pgsql2shp.

-Steve

From dpinte at itae.be  Tue Oct  9 10:04:13 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] ogr and utf-8 encoding
In-Reply-To: <470B8210.5020109@swoodbridge.com>
References: <C900396522B3C142AA9A7F5AFEE11CB301380382@slva01lvnt23.lverma.nrw.de>
	<470B8210.5020109@swoodbridge.com>
Message-ID: <1191938654.24518.4.camel@ddp.simpson>


On Tue, 2007-10-09 at 09:28 -0400, Stephen Woodbridge wrote:
> 
> It would be nice if shapelib supported this with an interface to iconv. 
> This could also be useful in shp2pgsql and pgsql2shp.
> 
> -Steve

I think it could be interesting to inform you that Bram de Greve has
done some work on the utf-8 support in shapelib. 

This was done in the version used with Thuban. For more information,
look here :

http://www.intevation.de/pipermail/thuban-devel/2007-April/002034.html 

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071009/e922ef8d/attachment.bin
From chowell at pyxisinnovation.com  Tue Oct  9 10:14:56 2007
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and GML 
Message-ID: <470B8CE0.9060406@pyxisinnovation.com>

Hi,

I was just wondering how accurate the documentation found at.

http://www.gdal.org/ogr/drv_gml.html

is in comparison to the most recent build of OGR. The docs say that only 
GML 2.0 is supported, do more current release support 3 or 3.1 and if 
not is it planned on the horizon ?

Cheers
Chris

From jcermak at atmos.washington.edu  Tue Oct  9 12:06:53 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] HDF EOS segmentation fault
Message-ID: <20071009160652.GA7096@5730.net>

Hi,

When I read in an hdfeos dataset from a MYD06 file I get a segfault of the following type:
*** glibc detected *** python: double free or corruption (fasttop): 0x081b8d90 ***
This occurs either at one of the steps following the data read or at the termination of the program. There does not seem to be a pattern. Here is some example code:

#!/usr/bin/env python
import gdal
DSname='HDF4_EOS:EOS_SWATH:"/home/jancer/data/tmp/MODIS/MYD06_L2.A2006220.1315.005.2006222153137.hdf":mod06:Cloud_Optical_Thickness'
DSobj = gdal.Open(DSname)
data = DSobj.ReadAsArray()
data.shape
halfdata = data/2.

There is a sample file at
ftp://ladsweb.nascom.nasa.gov/allData/5/MYD06_L2/2006/220/MYD06_L2.A2006220.1315.005.2006222153137.hdf


What's my mistake?

Thanks
Jan

From RMcCulley at county24.com  Tue Oct  9 12:39:30 2007
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com><4706A367.8070407@noaa.gov>
	<4706B58C.7070709@pobox.com>
Message-ID: <8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>

>Christopher Barker wrote:
>>> Or will
>>> there still be a need to compile gdal first, install FWTools
>> 
>> Frank, are you open to a little re-arranging of FWTools to play
better 
>> with a stock python? It would be nice if the above requested simple 
>> installer was simply one piece of FWTools.>
>
>Chris,
>
>I don't think it would be prudent to see FWTools as a solution for this
>particular problem.  First, FWTools is bound to the old bindings for
the
>time being (because they are needed by OpenEV).  Second, I'm afraid of
>change
>and complexity and FWTools is already near the bounds of my ability to
>produce
>it as a minor sideline.
>
>I am in favor of us producing an easily and naturally installable
Python
>package for win32 that corresponds with our stable release binaries, as
>long
>as there is someone willing to step up to the plate for that portion of
the
>work.
>
>Best regards,
>-- 
>---------------------------------------+-------------------------------
---->---
>I set the clouds in motion - turn up   | Frank Warmerdam,
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGeo,
http://osgeo.org
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev

If no one more qualified than myself steps forward, I could do this.
I've managed to produce an .exe installation file of the next generation
bindings for both 2.4 and 2.5.  I'm fairly new to building on Windows,
but I've currently got it working.

I'm sure the more I do it, the easier it will get.  I'll try and work on
it a bit today, and see if I can come up with Release based installation
packages for 2.4 and 2.5.  Do you think we need to also have one for
Python 2.3?

Cheers,
Rob McCulley



From warmerdam at pobox.com  Tue Oct  9 13:15:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Turn off the old-gen Python bindings in trunk
In-Reply-To: <8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com><4706A367.8070407@noaa.gov>
	<4706B58C.7070709@pobox.com>
	<8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
Message-ID: <470BB737.7090003@pobox.com>

Rob McCulley wrote:
> If no one more qualified than myself steps forward, I could do this.
> I've managed to produce an .exe installation file of the next generation
> bindings for both 2.4 and 2.5.  I'm fairly new to building on Windows,
> but I've currently got it working.
> 
> I'm sure the more I do it, the easier it will get.  I'll try and work on
> it a bit today, and see if I can come up with Release based installation
> packages for 2.4 and 2.5.  Do you think we need to also have one for
> Python 2.3?

Rob,

I think 2.4 and 2.5 is plenty, there is no pressing need for 2.3.

If you have binaries you want made available, send me an url and I'll load
them on download.osgeo.org/gdal/win32.   I will concede that I don't really
understand the difference between what you are making, and the existing

   http://download.osgeo.org/gdal/win32/Python_GDAL-1.4.2.win32-py2.4.exe

that I presume was prepared by Howard.  Presumably your package includes
all the GDAL supporting DLLs?   I hope they are the ones from:

   http://download.osgeo.org/gdal/win32/gdalwin32exe142.zip

It would be obtuse of us to distribute subtly different GDAL14.DLLs
in different packages.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Oct  9 13:16:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] HDF EOS segmentation fault
In-Reply-To: <20071009160652.GA7096@5730.net>
References: <20071009160652.GA7096@5730.net>
Message-ID: <470BB78A.1050309@pobox.com>

Jan Cermak wrote:
> Hi,
> 
> When I read in an hdfeos dataset from a MYD06 file I get a segfault of the following type:
> *** glibc detected *** python: double free or corruption (fasttop): 0x081b8d90 ***
> This occurs either at one of the steps following the data read or at the termination of the program. There does not seem to be a pattern. Here is some example code:
> 
> #!/usr/bin/env python
> import gdal
> DSname='HDF4_EOS:EOS_SWATH:"/home/jancer/data/tmp/MODIS/MYD06_L2.A2006220.1315.005.2006222153137.hdf":mod06:Cloud_Optical_Thickness'
> DSobj = gdal.Open(DSname)
> data = DSobj.ReadAsArray()
> data.shape
> halfdata = data/2.
> 
> There is a sample file at
> ftp://ladsweb.nascom.nasa.gov/allData/5/MYD06_L2/2006/220/MYD06_L2.A2006220.1315.005.2006222153137.hdf

Jan,

I believe you are experiencing one of several bugs that have been fixed
in the last six months or so in GDAL's HDF driver.  Can you update to
either a 1.4 branch snapshot or a trunk snapshot from:

  http://download.osgeo.org/gdal/daily

and see if the problem still persists? (or perhaps grab a recent FWTools
build).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From eschenbe at psc.edu  Tue Oct  9 13:58:49 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <008201c806d4$8f5a6ac0$ae0f4040$@com>
References: <47055553.2020101@psc.edu> <008201c806d4$8f5a6ac0$ae0f4040$@com>
Message-ID: <470BC159.2000307@psc.edu>

Thank you all for your assistance. The gdal/ogr library can read the shapefile 
if the directory also contains the dbf and shx files that came along with the 
shp file. Specific responses below.

  -----Original Message-----
 > gdrinfo doesn't seem to find a projection in a shapefile describiing roads
 > (from the National Atlas). I was expecting something like what gdalinfo
 > finds in a geotiff file. Could someone point me towards the answer?

Martin Chapman wrote:
 > Make sure there is a .prj file with the same name as the .shp file.  NTAD
 > data doesn't always come with these projection files.  If you read the .txt
 > file with the shape file it will tell you what datum it is using.  Attached
 > is a wgs84 prj file that should work if you rename it to be the same as your
 > .shp file.  NTAD is generally in WGS84.

Hmmm ... I didn't do that; there is no prj file but it now seems to work.

Ed McNierney wrote:
 > Unfortunately, the concept of projections and coordinate systems in general
 > was late in coming to the shapefile format, and many (if not most)
 > shapefiles have no projection/coordinate information with them.
 >
 > Your shapefile should have a .txt file with it (presumably roadtrl20.txt
 > if you're using the roads layer from the National Atlas) and it will
 > contain this information:
<clip>

Yes, a txt file was supplied and it has information similar to your example. 
However it doesn't seem to be used. I'm still developing my application and so 
I'll find out soon enough if it is needed by hiding or not hiding the txt file.

Frank Warmerdam wrote:
 > I assume you were using ogrinfo?
 >
 > It will report coordinate system info if it finds it.  Does your shapefile
 > dataset include a .prj file?   If not, there is not declared coordinate
 > system for the file.

Yes, my mistake, I am using ogrinfo. No prj file was supplied but it seems that 
information was provided in the txt file.

Kent
Pittsburgh Supercomputing Center

From jcermak at atmos.washington.edu  Tue Oct  9 13:59:59 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] HDF EOS segmentation fault
In-Reply-To: <470BB78A.1050309@pobox.com>
References: <20071009160652.GA7096@5730.net> <470BB78A.1050309@pobox.com>
Message-ID: <470BC19F.2090700@atmos.washington.edu>

Frank Warmerdam wrote:
> Jan Cermak wrote:
>> Hi,
>>
>> When I read in an hdfeos dataset from a MYD06 file I get a segfault of 
>> the following type:
>> *** glibc detected *** python: double free or corruption (fasttop): 
>> 0x081b8d90 ***
>> This occurs either at one of the steps following the data read or at 
>> the termination of the program. There does not seem to be a pattern. 
>> Here is some example code:
>>
>> #!/usr/bin/env python
>> import gdal
>> DSname='HDF4_EOS:EOS_SWATH:"/home/jancer/data/tmp/MODIS/MYD06_L2.A2006220.1315.005.2006222153137.hdf":mod06:Cloud_Optical_Thickness' 
>>
>> DSobj = gdal.Open(DSname)
>> data = DSobj.ReadAsArray()
>> data.shape
>> halfdata = data/2.
>>
>> There is a sample file at
>> ftp://ladsweb.nascom.nasa.gov/allData/5/MYD06_L2/2006/220/MYD06_L2.A2006220.1315.005.2006222153137.hdf 
>>
> 
> Jan,
> 
> I believe you are experiencing one of several bugs that have been fixed
> in the last six months or so in GDAL's HDF driver.  Can you update to
> either a 1.4 branch snapshot or a trunk snapshot from:
> 
>  http://download.osgeo.org/gdal/daily
> 
> and see if the problem still persists? (or perhaps grab a recent FWTools
> build).
> 
> Best regards,


Hi Frank,

actually that was what I suspected when the problem first occurred. So I 
updated to gdal 1.4.2 (1007/06/27) a week ago. This didn't make any 
difference though. I just tried the latest nightly build but this gives 
me an import error, so I reverted to 1.4.2

By the way, I only get the segfault for MYD06 files. MYD021km etc. work 
fine.

Any suggestions?
Jan




From ed at topozone.com  Tue Oct  9 14:22:14 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <470BC159.2000307@psc.edu>
References: <47055553.2020101@psc.edu> <008201c806d4$8f5a6ac0$ae0f4040$@com>
	<470BC159.2000307@psc.edu>
Message-ID: <4BF377919225F449BB097CB76FFE9BC8019884BA@ptolemy.topozone.com>

Kent -

Sorry - when I said that the projection information was in the .txt
file, I did not mean to imply (but I did) that it could be automatically
read from that location.  A "shapefile" is really 3 or more files -
file.shp, file.dbf, and file.shx - and you must have all three or it's
not a shapefile.  In addition, if you have file.prj containing the
projection definition then that will be read automatically - the .txt
file is not part of the shapefile suite and isn't recognized.

     - Ed


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kent
Eschenberg
Sent: Tuesday, October 09, 2007 1:59 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Shapfiles and Projections

Thank you all for your assistance. The gdal/ogr library can read the
shapefile 
if the directory also contains the dbf and shx files that came along
with the 
shp file. Specific responses below.

  -----Original Message-----
 > gdrinfo doesn't seem to find a projection in a shapefile describiing
roads
 > (from the National Atlas). I was expecting something like what
gdalinfo
 > finds in a geotiff file. Could someone point me towards the answer?

Martin Chapman wrote:
 > Make sure there is a .prj file with the same name as the .shp file.
NTAD
 > data doesn't always come with these projection files.  If you read
the .txt
 > file with the shape file it will tell you what datum it is using.
Attached
 > is a wgs84 prj file that should work if you rename it to be the same
as your
 > .shp file.  NTAD is generally in WGS84.

Hmmm ... I didn't do that; there is no prj file but it now seems to
work.

Ed McNierney wrote:
 > Unfortunately, the concept of projections and coordinate systems in
general
 > was late in coming to the shapefile format, and many (if not most)
 > shapefiles have no projection/coordinate information with them.
 >
 > Your shapefile should have a .txt file with it (presumably
roadtrl20.txt
 > if you're using the roads layer from the National Atlas) and it will
 > contain this information:
<clip>

Yes, a txt file was supplied and it has information similar to your
example. 
However it doesn't seem to be used. I'm still developing my application
and so 
I'll find out soon enough if it is needed by hiding or not hiding the
txt file.

Frank Warmerdam wrote:
 > I assume you were using ogrinfo?
 >
 > It will report coordinate system info if it finds it.  Does your
shapefile
 > dataset include a .prj file?   If not, there is not declared
coordinate
 > system for the file.

Yes, my mistake, I am using ogrinfo. No prj file was supplied but it
seems that 
information was provided in the txt file.

Kent
Pittsburgh Supercomputing Center
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Oct  9 14:38:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] HDF EOS segmentation fault
In-Reply-To: <470BC19F.2090700@atmos.washington.edu>
References: <20071009160652.GA7096@5730.net> <470BB78A.1050309@pobox.com>
	<470BC19F.2090700@atmos.washington.edu>
Message-ID: <470BCA8B.2060309@pobox.com>

Jan Cermak wrote:
> Hi Frank,
> 
> actually that was what I suspected when the problem first occurred. So I 
> updated to gdal 1.4.2 (1007/06/27) a week ago. This didn't make any 
> difference though. I just tried the latest nightly build but this gives 
> me an import error, so I reverted to 1.4.2
> 
> By the way, I only get the segfault for MYD06 files. MYD021km etc. work 
> fine.

Jan,

I believe you are specifically running into:

   http://trac.osgeo.org/gdal/ticket/1701

Fixed as:

   http://trac.osgeo.org/gdal/changeset/11742

I believe this fix was post 1.4.2, so you would need up to update to
the stable branch (1.4) nightly snapshot.  I don't know what import
error you encountered, but I would suggest trying to work through it.

(or using FWTools for the script).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dcmikkelsen at shaw.ca  Tue Oct  9 14:36:27 2007
From: dcmikkelsen at shaw.ca (Dean Mikkelsen)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <470BC159.2000307@psc.edu>
References: <47055553.2020101@psc.edu> <008201c806d4$8f5a6ac0$ae0f4040$@com>
	<470BC159.2000307@psc.edu>
Message-ID: <d105868e67ddb.470b67bb@shaw.ca>

Hi Kent,
 
The Shapefile technical definition can also be found here:
 
http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf

and 
 
http://facweb.knowlton.ohio-state.edu/selhami/crpinfo/teaching/CRP608/Shape%20file%20structure.doc
 
Note that the .prj is optional and was a late addition to the Shapefile definition (not sure myself when it came along, but it was not present in the Original White paper).
 
Cheers,
Dean

----- Original Message -----
From: Kent Eschenberg <eschenbe@psc.edu>
Date: Tuesday, October 9, 2007 11:08 am
Subject: Re: [Gdal-dev] Shapfiles and Projections
To: gdal-dev@lists.maptools.org

> Thank you all for your assistance. The gdal/ogr library can read 
> the shapefile 
> if the directory also contains the dbf and shx files that came 
> along with the 
> shp file. Specific responses below.
> 
>   -----Original Message-----
>  > gdrinfo doesn't seem to find a projection in a shapefile 
> describiing roads
>  > (from the National Atlas). I was expecting something 
> like what gdalinfo
>  > finds in a geotiff file. Could someone point me towards 
> the answer?
> 
> Martin Chapman wrote:
>  > Make sure there is a .prj file with the same name as the 
> .shp file.  NTAD
>  > data doesn't always come with these projection 
> files.  If you read the .txt
>  > file with the shape file it will tell you what datum it 
> is using.  Attached
>  > is a wgs84 prj file that should work if you rename it to 
> be the same as your
>  > .shp file.  NTAD is generally in WGS84.
> 
> Hmmm ... I didn't do that; there is no prj file but it now seems 
> to work.
> 
> Ed McNierney wrote:
>  > Unfortunately, the concept of projections and coordinate 
> systems in general
>  > was late in coming to the shapefile format, and many (if 
> not most)
>  > shapefiles have no projection/coordinate information 
> with them.
>  >
>  > Your shapefile should have a .txt file with it 
> (presumably roadtrl20.txt
>  > if you're using the roads layer from the National Atlas) 
> and it will
>  > contain this information:
> <clip>
> 
> Yes, a txt file was supplied and it has information similar to 
> your example. 
> However it doesn't seem to be used. I'm still developing my 
> application and so 
> I'll find out soon enough if it is needed by hiding or not 
> hiding the txt file.
> 
> Frank Warmerdam wrote:
>  > I assume you were using ogrinfo?
>  >
>  > It will report coordinate system info if it finds 
> it.  Does your shapefile
>  > dataset include a .prj file?   If not, there 
> is not declared coordinate
>  > system for the file.
> 
> Yes, my mistake, I am using ogrinfo. No prj file was supplied 
> but it seems that 
> information was provided in the txt file.
> 
> Kent
> Pittsburgh Supercomputing Center
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

Dean C. Mikkelsen, B.Sc., P.Eng.
Terra ETL Ltd.
Victoria, B.C., Canada
Phone: +1 (250) 361-6672
http://www.terraetl.com

Consulting in Geodesy & GIS  for the Natural Resources
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071009/bf7a9ef8/attachment.html
From dcmikkelsen at shaw.ca  Tue Oct  9 14:55:07 2007
From: dcmikkelsen at shaw.ca (Dean Mikkelsen)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <d105868e67ddb.470b67bb@shaw.ca>
References: <47055553.2020101@psc.edu> <008201c806d4$8f5a6ac0$ae0f4040$@com>
	<470BC159.2000307@psc.edu> <d105868e67ddb.470b67bb@shaw.ca>
Message-ID: <d11cad1a63473.470b6c1b@shaw.ca>

Hi everyone,
 
The second link sometimes appears dead, but here is cut-and-paste from the document.
 
.shp- the file that stores the feature geometry. Required. 
.shx- the file that stores the index of the feature geometry. Required. 
.dbf- the dBASE file that stores the attribute information of features. Required. 
.sbnand .sbx- the files that store the spatial index of the features. Optional. These two files can be created in ArcView. See ArcView's on-line help for more information. 
.fbnand .fbx- the files that store the spatial index of the features for shapefiles that are read-only. Optional. These two files can be created in ArcView. See ArcView's on-line help for more information. 
.ain and .aih - the files that store the attribute index of the active fields in a table or a theme's attribute table. Optional. These two files can be created in ArcView. See ArcView's on-line help for more information. 
.prj - the file that stores the coordinate system information. Optional. This file can be created with and is used by the ArcView Projection Utility. It is not used by ArcView GIS Version 3.x or older versions, or by ARC/INFO versions previous to version 8.0. 
.xml - metadata for ArcInfo 8.0, for using shapefiles on the Internet. Optional. 
A good summary of the file types used by ESRI.
 
Cheers,
Dean
----- Original Message -----
From: Dean Mikkelsen <dcmikkelsen@shaw.ca>
Date: Tuesday, October 9, 2007 11:43 am
Subject: Re: [Gdal-dev] Shapfiles and Projections
To: eschenbe@psc.edu
Cc: gdal-dev@lists.maptools.org

> Hi Kent,
>  
> The Shapefile technical definition can also be found here:
>  
> http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf
> 
> and 
>  
> http://facweb.knowlton.ohio-
> state.edu/selhami/crpinfo/teaching/CRP608/Shape%20file%20structure.doc 
> Note that the .prj is optional and was a late addition to the 
> Shapefile definition (not sure myself when it came along, but it 
> was not present in the Original White paper).
>  
> Cheers,
> Dean
> 
> ----- Original Message -----
> From: Kent Eschenberg <eschenbe@psc.edu>
> Date: Tuesday, October 9, 2007 11:08 am
> Subject: Re: [Gdal-dev] Shapfiles and Projections
> To: gdal-dev@lists.maptools.org
> 
> > Thank you all for your assistance. The gdal/ogr library can 
> read 
> > the shapefile 
> > if the directory also contains the dbf and shx files that came 
> > along with the 
> > shp file. Specific responses below.
> > 
> >   -----Original Message-----
> >  > gdrinfo doesn't seem to find a projection in a 
> shapefile 
> > describiing roads
> >  > (from the National Atlas). I was expecting something 
> > like what gdalinfo
> >  > finds in a geotiff file. Could someone point me 
> towards 
> > the answer?
> > 
> > Martin Chapman wrote:
> >  > Make sure there is a .prj file with the same name as 
> the 
> > .shp file.  NTAD
> >  > data doesn't always come with these projection 
> > files.  If you read the .txt
> >  > file with the shape file it will tell you what datum 
> it 
> > is using.  Attached
> >  > is a wgs84 prj file that should work if you rename it 
> to 
> > be the same as your
> >  > .shp file.  NTAD is generally in WGS84.
> > 
> > Hmmm ... I didn't do that; there is no prj file but it now 
> seems 
> > to work.
> > 
> > Ed McNierney wrote:
> >  > Unfortunately, the concept of projections and 
> coordinate 
> > systems in general
> >  > was late in coming to the shapefile format, and many 
> (if 
> > not most)
> >  > shapefiles have no projection/coordinate information 
> > with them.
> >  >
> >  > Your shapefile should have a .txt file with it 
> > (presumably roadtrl20.txt
> >  > if you're using the roads layer from the National 
> Atlas) 
> > and it will
> >  > contain this information:
> > <clip>
> > 
> > Yes, a txt file was supplied and it has information similar to 
> > your example. 
> > However it doesn't seem to be used. I'm still developing my 
> > application and so 
> > I'll find out soon enough if it is needed by hiding or not 
> > hiding the txt file.
> > 
> > Frank Warmerdam wrote:
> >  > I assume you were using ogrinfo?
> >  >
> >  > It will report coordinate system info if it finds 
> > it.  Does your shapefile
> >  > dataset include a .prj file?   If not, there 
> > is not declared coordinate
> >  > system for the file.
> > 
> > Yes, my mistake, I am using ogrinfo. No prj file was supplied 
> > but it seems that 
> > information was provided in the txt file.
> > 
> > Kent
> > Pittsburgh Supercomputing Center
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> 
> Dean C. Mikkelsen, B.Sc., P.Eng.
> Terra ETL Ltd.
> Victoria, B.C., Canada
> Phone: +1 (250) 361-6672
> http://www.terraetl.com
> 
> Consulting in Geodesy & GIS  for the Natural Resources
> 

Dean C. Mikkelsen, B.Sc., P.Eng.
Terra ETL Ltd.
Victoria, B.C., Canada
Phone: +1 (250) 361-6672
http://www.terraetl.com

Consulting in Geodesy & GIS  for the Natural Resources
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071009/51698b22/attachment.html
From warmerdam at pobox.com  Tue Oct  9 15:24:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] OGR and GML
In-Reply-To: <470B8CE0.9060406@pyxisinnovation.com>
References: <470B8CE0.9060406@pyxisinnovation.com>
Message-ID: <470BD57F.4030409@pobox.com>

Chris Howell wrote:
> Hi,
> 
> I was just wondering how accurate the documentation found at.
> 
> http://www.gdal.org/ogr/drv_gml.html
> 
> is in comparison to the most recent build of OGR. The docs say that only 
> GML 2.0 is supported, do more current release support 3 or 3.1 and if 
> not is it planned on the horizon ?

Chris,

The GML driver is targetted at GML 2.x.  If it succeeds in reading
some GML 3 datasets it is just good luck.  There are no current plans
for GML 3 support but I would like to see such a project launched.
Hopefully a whole new driver actually using schema files instead of the
ad-hoc approach of the current driver.  But it is a big job and would
require significant funding.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jcermak at atmos.washington.edu  Tue Oct  9 17:05:30 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] HDF EOS segmentation fault
In-Reply-To: <470BCA8B.2060309@pobox.com>
References: <20071009160652.GA7096@5730.net> <470BB78A.1050309@pobox.com>
	<470BC19F.2090700@atmos.washington.edu>
	<470BCA8B.2060309@pobox.com>
Message-ID: <470BED1A.9080101@atmos.washington.edu>

Frank Warmerdam wrote:
> Jan,
> 
> I believe you are specifically running into:
> 
>   http://trac.osgeo.org/gdal/ticket/1701
> 
> Fixed as:
> 
>   http://trac.osgeo.org/gdal/changeset/11742
> 
> I believe this fix was post 1.4.2, so you would need up to update to
> the stable branch (1.4) nightly snapshot.  I don't know what import
> error you encountered, but I would suggest trying to work through it.
> 
> (or using FWTools for the script).
> 
> Best regards,


Hi Frank,

Updating to stable branch nightly seems to have fixed it. Thanks very much!

All best,
Jan


From SimonH at geobiz.co.nz  Tue Oct  9 17:22:25 2007
From: SimonH at geobiz.co.nz (Simon Hope)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] import _gdal issue
Message-ID: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local>

Hello,

I've been trying to get featureserver to run against PostGIS - to do so
there's a dependency on GDAL and the Python Bindings and I've run into a
bit of difficulty. If any body can help then I'd appreciate it....I may
well be missing something obvious as this is my first foray into GDAL
(or I could just be an eejit -
http://news.bbc.co.uk/2/hi/special_report/1999/02/99/e-cyclopedia/164331
9.stm

So here's what I've done so far:

Installed Python24
Installed GDAL gdalwin32-1.4.2 from
http://download.osgeo.org/gdal/win32/
Installed GDAL python bindings (Python_GDAL-1.4.2.win32-py2.4.exe) again
from http://download.osgeo.org/gdal/win32/

I've also done the necessary featureserver configuration
(http://featureserver.org/pipermail/featureserver/2007October/000094.htm
l)

When I try to make a request to featureserver:

http://localhost:8080/featureserver/featureserver.cgi/scribble/all.atom?
maxfeatures=5

I get the following response:

An error occurred: DLL load failed: The specified module could not be
found.
  File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\Server.py", line
239, in cgiHandler
    service = Server.load(*cfgfiles)
  File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\Server.py", line
60, in _load
    datasources[section] = cls.loadFromSection(
  File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\Server.py", line
35, in _loadFromSection
    module = __import__("%s.%s" % (module_type, type), globals(),
locals(), type)
  File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\DataSource\OGR.p
y", line 2, in ?
    import ogr, osr
  File "C:\Python24\Lib\site-packages\ogr.py", line 33, in ?
    import _gdal

It seems to be failing at the import _gdal statement. I have run the
following statement in pythonwin:

>>> import _gdal

And don't get any errors and have access to the members on that module.

Are there any tests I could run to ensure that GDAL and the python
bindings are as they should be? 

Cheers

Simon



From matt.wilkie at gov.yk.ca  Tue Oct  9 17:57:43 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] Shapfiles and Projections
In-Reply-To: <d11cad1a63473.470b6c1b@shaw.ca>
References: <47055553.2020101@psc.edu>
	<008201c806d4$8f5a6ac0$ae0f4040$@com>	<470BC159.2000307@psc.edu>
	<d105868e67ddb.470b67bb@shaw.ca> <d11cad1a63473.470b6c1b@shaw.ca>
Message-ID: <470BF957.5000807@gov.yk.ca>

Dean Mikkelsen wrote:
> Hi everyone,
>  
> The second link sometimes appears dead, but here is cut-and-paste from 
> the document.

There are some new optional additions described here 
http://tinyurl.com/ypsgn4. The additions are:

* .atx ? An .atx file is created for each shapefile or dBASE attribute 
index created in ArcCatalog. ArcView GIS 3.x attribute indexes for 
shapefiles and dBASE files are not used by ArcGIS. A new attribute 
indexing model has been developed for shapefiles and dBASE files.

* .ixs ? Geocoding index for read-write shapefiles.

* .mxs ? Geocoding index for read-write shapefiles (ODB format).

I've not seen the format of these extra files defined or specified 
anywhere though I first heard about them in 2001.

Thanks to the prompting of this thread I've put together a summary of 
the extensions at http://trac.osgeo.org/gdal/wiki/UserDocs/Shapefiles

cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From crschmidt at metacarta.com  Tue Oct  9 18:33:43 2007
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] import _gdal issue
In-Reply-To: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local>
References: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local>
Message-ID: <20071009223343.GA18312@metacarta.com>

On Wed, Oct 10, 2007 at 10:22:25AM +1300, Simon Hope wrote:
> >>> import _gdal
> 
> And don't get any errors and have access to the members on that module.

Pythonwin is probably using a different PYTHONPATH than apache is.
Somewhere in that path _gdal is probably included. Others can probably
comment more directly, but I would do something like:

import _gdal
print _gdal

Which should give output like <module 'gdal' from
'C:\SomethingOrOther\gdal.dll'> or something similar.

Once you've done that, you should be able to add the following to the
FeatureServer cgi:

sys.path.append("C:\SomethingOrOther")

after the 'import sys' and before the 'import FeatureServer' lines.

Regards,
-- 
Christopher Schmidt
MetaCarta

From Chris.Barker at noaa.gov  Tue Oct  9 19:35:59 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] import _gdal issue
In-Reply-To: <20071009223343.GA18312@metacarta.com>
References: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local>
	<20071009223343.GA18312@metacarta.com>
Message-ID: <470C105F.5070405@noaa.gov>

Christopher Schmidt wrote:
> On Wed, Oct 10, 2007 at 10:22:25AM +1300, Simon Hope wrote:
>>>>> import _gdal
>> And don't get any errors and have access to the members on that module.
> 
> Pythonwin is probably using a different PYTHONPATH than apache is.
> Somewhere in that path _gdal is probably included. Others can probably
> comment more directly, but I would do something like:
> 
> import _gdal
> print _gdal
> 
> Which should give output like <module 'gdal' from
> 'C:\SomethingOrOther\gdal.dll'> or something similar.
> 
> Once you've done that, you should be able to add the following to the
> FeatureServer cgi:
> 
> sys.path.append("C:\SomethingOrOther")

It's worth a try, but something is odd. From that traceback:

   File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\DataSource\OGR.p
y", line 2, in ?
     import ogr, osr
   File "C:\Python24\Lib\site-packages\ogr.py", line 33, in ?
     import _gdal

so it looks like ogr.py was found, but _gdal.pyd was not. They should 
both be in site_packages.

Take a look at C:\Python24\Lib\site-packages, and see what's there. 
there should be something like:


ogr.py
ogr.pyc
osr.py
osr.pyc
_gdal.pyd
gdal.py
gdal.pyc
gdalconst.py
gdalconst.pyc
gdalnumeric.py
gdalnumeric.pyc


in other words, _gdal.pyd should be in the same place as ogr.py, and 
therefor importable.

By the way in future next releases this should be a bit cleaned up -- 
with eveything in site_packages/osgeo/

Hopefully these problems will be easier to solve then.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From SimonH at geobiz.co.nz  Tue Oct  9 19:48:55 2007
From: SimonH at geobiz.co.nz (Simon Hope)
Date: Wed Nov 21 11:51:04 2007
Subject: [Gdal-dev] import _gdal issue
In-Reply-To: <000001c80ace$894a7c80$0201a8c0@GEOBIZ.local>
References: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local><20071009223343.GA18312@metacarta.com>
	<000001c80ace$894a7c80$0201a8c0@GEOBIZ.local>
Message-ID: <46036752327F654C9232690517E537C30E4A3F@server.GEOBIZ.local>

Hey Chris,

Thanks for the email. I tried your suggestion;

>>> import _gdal
>>> print _gdal
<module '_gdal' from 'C:\Python24\Lib\site-packages\_gdal.pyd'>

Both ogr.py and _gdal.pyd are in the same location i.e.
'C:\Python24\Lib\site-packages'. 

Based upon the error -  the file  OGR.py
(FeatureServer\DataSource\OGR.py ) has no problem importing ogr.py
(C:\Python24\lib\site-packages\ogr.py), which is strange: the GDAL
ogr.py does not seem to be able to find the _gdal.pyd in the same
location?

I added the sys.path.append line to the featureserver cgi and nothing
changed.

You suggested that Apache may be using a different PYTHONPATH than
pythonwin. If this were the case would we not see an error at the point
that OGR.py tries to import ogr.py? Is there a mechanism to validate
what PYTHONPATH Apache is looking at?

Cheers

Simon

PS Chris Barker...just got your post and I'm glad to know I'm not going
mad

-----Original Message-----
From: Christopher Barker [mailto:Chris.Barker@noaa.gov] 
Sent: Wednesday, 10 October 2007 12:46 p.m.
To: Christopher Schmidt
Cc: gdal-dev@lists.maptools.org; Simon Hope
Subject: Re: [Gdal-dev] import _gdal issue

Christopher Schmidt wrote:
> On Wed, Oct 10, 2007 at 10:22:25AM +1300, Simon Hope wrote:
>>>>> import _gdal
>> And don't get any errors and have access to the members on that
module.
> 
> Pythonwin is probably using a different PYTHONPATH than apache is.
> Somewhere in that path _gdal is probably included. Others can probably
> comment more directly, but I would do something like:
> 
> import _gdal
> print _gdal
> 
> Which should give output like <module 'gdal' from
> 'C:\SomethingOrOther\gdal.dll'> or something similar.
> 
> Once you've done that, you should be able to add the following to the
> FeatureServer cgi:
> 
> sys.path.append("C:\SomethingOrOther")

It's worth a try, but something is odd. From that traceback:

   File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\DataSource\OGR.p
y", line 2, in ?
     import ogr, osr
   File "C:\Python24\Lib\site-packages\ogr.py", line 33, in ?
     import _gdal

so it looks like ogr.py was found, but _gdal.pyd was not. They should 
both be in site_packages.

Take a look at C:\Python24\Lib\site-packages, and see what's there. 
there should be something like:


ogr.py
ogr.pyc
osr.py
osr.pyc
_gdal.pyd
gdal.py
gdal.pyc
gdalconst.py
gdalconst.pyc
gdalnumeric.py
gdalnumeric.pyc


in other words, _gdal.pyd should be in the same place as ogr.py, and 
therefor importable.

By the way in future next releases this should be a bit cleaned up -- 
with eveything in site_packages/osgeo/

Hopefully these problems will be easier to solve then.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev






From ivan.lucena at pmldnet.com  Tue Oct  9 21:17:40 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] FW: HDF Newsletter #96 (release of HDF 4.2r2)
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45503D16C90@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45503D16C90@Iris.ad.clarku.edu>
Message-ID: <470C2834.2010401@pmldnet.com>

Apologies for cross-posting.

It is about the release of HDF 4.2r2.

Best regards,

Ivan

  -----Original Message-----
  From:
  Sent: Tuesday, October 09, 2007 3:14 PM
  To: news@hdfgroup.org
  Subject: HDF Newsletter #96


  ------------------------------------------------------------------------
  THG Home Page:                   http://hdfgroup.org/
  Helpdesk & Mailing Lists Info:
  http://hdfgroup.org/services/support.html
  ------------------------------------------------------------------------

                               Newsletter #96
                              October 9, 2007

  CONTENTS

    . Release of HDF 4.2r2
      - New Features and Changes
      - Platforms Tested
      - Known Problems

  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

  Release of HDF 4.2r2
  ====================

  We are pleased to announce the release of HDF 4.2r2. It
  can be downloaded from the following location:

       http://hdfgroup.org/release4/obtain.html

  The HDF 4 web page is located at:

       http://hdfgroup.org/products/hdf4/index.html

  Not all of the pre-compiled binaries have been generated for
  HDF 4.2r2.  They should be available within the next week.

  The documentation for HDF 4.2r2 can be obtained from:

       http://hdfgroup.org/doc.html

  The RELEASE.txt file in the source code contains detailed
  information about this release:

       ftp://ftp.hdfgroup.org/HDF/HDF_Current/src/RELEASE-4.2r2.txt



  New Features and Changes
  ------------------------

  o Several new APIs have been added to the SD and GR interfaces:

     + SDreset_maxopenfiles, SDget_maxopenfiles, SDget_numopenfiles:
       For modifying and checking the maximum allowed number of files.

     + SDgetcompinfo, GRgetcompinfo: Gets compression information. These
       functions replaced SDgetcompress and GRgetcompress.

     + SDgetfilename: Retrieves the name of the file, given its ID.

     + SDgetnamelen: Retrieves the length of an object's name, given its
  ID.

  o SZIP compression has been added for Fortran, and SZIP compression has
     also been added to the GR interface.

  o The problem has been fixed where corruption could occur when a
  1-Dimensional
     SDS had the same name as a dimension.  However, be aware that:

     + It is impossible to recover the data that was already corrupted.

     + For existing data that has not been corrupted, the problem was
       fixed for multi-dimensional SDSs only.  If the SDS had only one
       dimension, the results of subsequent accesses to the dimension
       would still be unpredictable.

  o SDS and Vgroup names are no longer limited to 64 characters.

  o The maximum number of files that can be opened at the same time is
     no longer limited to 32.  In this release, if this limit is reached,
  the
     library will increase it to the system limit, minus 3 to account for
  stdin,
     stdout, and stderr.

  o A command-line option (-u) was added to ncdump to enable a user to
     replace non-alphanumeric characters in SDS names with underscores, if
     desired.  The default behavior is to print what is actually in the
  file.

  o New error codes were added to the HDF library.  Please refer to the
     RELEASE.txt file and other HDF4 documentation for more information.

  o Several new platforms are supported: Mac Intel, FreeBSD 64-bit,
     Solaris 10 Intel, Linux 2.6 and HP-UX 11.23 (32-bit, 64-bit).

  o Several changes were made to the HDF configuration, including:

     . The --enable-netcdf flag was introduced.
     . The autotools versions were updated.

  o Many bugs have been fixed in hrepack and hdiff.

  Please refer to the RELEASE.txt file for a comprehensive list of
  changes in this release.


  Platforms Tested
  ----------------

  Platforms that were tested with this release are:

      AIX 5.3 (32-bit, 64-bit)
      Free BSD 6.2 (32-bit, 64-bit)
      HP-UX B.11.23 (32-bit, 64-bit)
      IRIX 64 v6.5 (32-bit, 64 bit)
      Linux 2.4, 2.6
      Linux ia64
      Linux x86_64
      Sun OS 5.8, 5.10 (32-bit, 64-bit)
      Windows XP, Vista
      Mac OS X Intel

  For detailed information on platforms and compilers, please
  refer to the RELEASE.txt file.


  Known Problems
  --------------

  o  hdfcomp fails on HPUX 11.23 for the 64-bit version of the library

  o  This release does not support VMS systems.

  o  N-Bit compression is not supported with Fortran APIs.

  o  Using both fill-value and compression at the same time on an SDS
      does not work.

  o  When using PGI compilers, make sure that the JPEG library is also
  compiled
      with a PGI C compiler; linking with JPEG built with gcc causes JPEG
  library
      tests to fail.  To bypass the problem:

          x Set LIBS flag to $PGI_JPEG_INSTALL_DIR/lib/libjpeg.a
            where $PGI_JPEG_INSTALL_DIR points to the installation
  directory
            for the PGI-compiled JPEG library:

            setenv LIBS $PGI_JPEG_INSTALL_DIR/lib/libjpeg.a

          x Use the --with-jpeg=$PGI_JPEG_INSTALL_DIR configure flag to
            configure with the PGI-compiled JPEG library:

            ./configure --with-jpeg=$PGI_JPEG_INSTALL_DIR --with-zlib....




  ----------------------------------------------------------------------
  This mailing list is for news regarding HDF.
  To subscribe to this list, send a message to
  news-subscribe@hdfgroup.org.
  To unsubscribe, send a message to news-unsubscribe@hdfgroup.org.




From maplabs at light42.com  Wed Oct 10 02:12:38 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
Message-ID: <CD409EC1-76F7-11DC-ABA3-000A277A733C@light42.com>


On Sep 27, 2007, at 1:57 AM, Matthew Perry wrote:
>
> 1) install postgis in your pg database if you have not done so already.
> 2) Create a point geometry column in your table using 
> AddGeometryColumn()
> 3) Do an update with the postgis MakePoint() function (ie UPDATE table
> SET geom = SETSRID(MakePoint(lon, lat),4326) )
>
> The SETSRID(.., 4326) function is used to define the resulting
> geometry as geographic coordinates with a WGS84 datum. If your
> coordinate system is different, you'll need to use the proper spatial
> reference id code.
>
> - matt
>
> On 9/27/07, Brian Hamlin <maplabs@light42.com> wrote:
>> If I have a database with a table, and that table has fields Latitude
>> and Longitude, in double precision. What are some ways I can enable 
>> OGR
>> to see that as a Point?  I am asking for all the steps.. I assume 
>> there
>> are many ways to begin
>>
>> thanks in advance
>>    -Brian
>>
>>
>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev

It turns out that the BostonGIS group has a tutorial cheat sheet on 
this exact topic
http://www.bostongis.org/?content_name=postgis_tut03

very good ogr cheat sheet there, too

-Brian


From maplabs at light42.com  Wed Oct 10 03:50:21 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ogr2ogr GML, my output no good?
In-Reply-To: <CD409EC1-76F7-11DC-ABA3-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
	<CD409EC1-76F7-11DC-ABA3-000A277A733C@light42.com>
Message-ID: <73A324C6-7705-11DC-ABA3-000A277A733C@light42.com>

well, just as I thought I was getting the hang of this...

I have a PG spatially enabled DB,  the contents seem just fine, but now  
when I export to GML with ogr2ogr the results are corrupted..  ?!?   
(this is with or without a SQL query to ogr2ogr I believe)

I use PGAdmin or psql to export data, no problem

(the same exact problem with KML, but I use GML to prove its not KML  
specific)

samples below... pointers appreciated...
   -Brian

==
ogr2ogr -f GML berk.gml PG:dbname=db -sql "select * from rgnt where  
city = 'Berkeley'"
---
<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://ogr.maptools.org/ca.xsd"
      xmlns:ogr="http://ogr.maptools.org/"
      xmlns:gml="http://www.opengis.net/gml">
   <gml:boundedBy>
     <gml:Box>
        
<gml:coord><gml:X>-122.324829</gml:X><gml:Y>37.820027</gml:Y></gml: 
coord>
        
<gml:coord><gml:X>-122.213578</gml:X><gml:Y>37.905824</gml:Y></gml: 
coord>
     </gml:Box>
   </gml:boundedBy>
   <gml:featureMember>
     <ogr:sql_statement fid="F0">
        
<ogr:geometryProperty><gml:MultiPolygon><gml:polygonMember><gml: 
Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates> 
-122.303939,37.866796999999998 -122.303701000000004,37.866844  
-122.303545,37.866875 -122.303427999999997,37.866900999999999  
-122.303111999999999,37.866953000000002  
-122.302701999999996,37.867054000000003  
-122.302569000000005,37.867082000000003  
-122.302283000000003,37.867140999999997  
-122.302173999999994,37.867162999999998  
-122.302012000000005,37.867196999999997  
-122.301651000000007,37.867268000000003 -122.301351999999994,37.867325  
-122.300983000000002,37.867398 -122.300953000000007,37.867308  
-122.300820999999999,37.866885000000003  
-122.300509000000005,37.866045999999997  
-122.300275999999997,37.865226999999997  
-122.300184999999999,37.864893000000002  
-122.300104000000005,37.864657999999999  
-122.299852999999999,37.863931999999998  
-122.299581000000003,37.863002000000002  
-122.299498999999997,37.862845999999998  
-122.299429000000003,37.862685999999997 -122.299148000000002,37.861716  
-122.298952,37.861105000000002 -122.298430999999994,37.859442  
-122.298089000000004,37.858347000000002 -122.297972,37.85801  
-122.297873999999993,37.857712999999997  
-122.297456999999994,37.856439999999999  
-122.297251000000003,37.855794000000003  
-122.296582999999998,37.853684999999999  
-122.296256999999997,37.852685999999999 -122.295867,37.851635999999999  
-122.295604999999995,37.850774 -122.295416000000003,37.850133  
-122.295154999999994,37.849303999999997  
-122.295118000000002,37.849192000000002 -122.295085,37.849089999999997  
-122.294962999999996,37.848709999999997 -122.29495,37.848661999999997  
-122.295079999999999,37.848626000000003 -122.297877,37.848125000000003  
-122.298826000000005,37.847923999999999  
-122.303939,37.866796999999998</gml:coordinates></gml:LinearRing></gml: 
outerBoundaryIs></gml:Polygon></gml:polygonMember></gml:MultiPolygon></ 
ogr:geometryProperty>
       <ogr:gid>528</ogr:gid>
       <ogr:id>528</ogr:id>
       <ogr:state>CA</ogr:state>
       <ogr:city>Berkeley</ogr:city>
     </ogr:sql_statement>
   </gml:featureMember>
</ogr:FeatureCollection>

(please note the comma is not in synch with the data)

===
Same Data, exported as CSV with PGAdmin, or psql ... AsText(the_geom)  
for the geometry....
"city";"geometry"
"Berkeley";"MULTIPOLYGON(((-122.303939 37.866797,-122.303701  
37.866844,-122.303545 37.866875,-122.303428 37.866901,-122.303112  
37.866953,-122.302702 37.867054,-122.302569 37.867082,-122.302283  
37.867141,-122.302174 37.867163,-122.302012 37.867197,-122.301651  
37.867268,-122.301352 37.867325,-122.300983 37.867398,-122.300953  
37.867308,-122.300821 37.866885,-122.300509 37.866046,-122.300276  
37.865227,-122.300185 37.864893,-122.300104 37.864658,-122.299853  
37.863932,-122.299581 37.863002,-122.299499 37.862846,-122.299429  
37.862686,-122.299148 37.861716,-122.298952 37.861105,-122.298431  
37.859442,-122.298089 37.858347,-122.297972 37.85801,-122.297874  
37.857713,-122.297457 37.85644,-122.297251 37.855794,-122.296583  
37.853685,-122.296257 37.852686,-122.295867 37.851636,-122.295605  
37.850774,-122.295416 37.850133,-122.295155 37.849304,-122.295118  
37.849192,-122.295085 37.84909,-122.294963 37.84871,-122.29495  
37.848662,-122.29508 37.848626,-122.297877 37.848125,-122.298826  
37.847924,-122.303939 37.866797)))"

==


From prushfor at NRCan.gc.ca  Wed Oct 10 12:30:48 2007
From: prushfor at NRCan.gc.ca (Rushforth, Peter)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ogr2ogr GML, my output no good?
In-Reply-To: <73A324C6-7705-11DC-ABA3-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com><1551.64.251.72.166.1190850920.squirrel@loskot.net><ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com><5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com><CD409EC1-76F7-11DC-ABA3-000A277A733C@light42.com>
	<73A324C6-7705-11DC-ABA3-000A277A733C@light42.com>
Message-ID: <E3942D3EB127854BBBC18511759DD003D86450@S0-OTT-X2.nrn.nrcan.gc.ca>


 Hi Brian,

When you say corrupted, do you mean that the document has
linefeed characters in the tag names?  ie not well-formed?
Or is that just an artifact of email line feeds?

I'm wondering what else might be the problem, because it
doesn't look obviously corrupted...

Peter

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brian Hamlin
> Sent: October 10, 2007 03:50
> To: gdal-dev
> Subject: [Gdal-dev] ogr2ogr GML, my output no good?
> 
> well, just as I thought I was getting the hang of this...
> 
> I have a PG spatially enabled DB,  the contents seem just 
> fine, but now  
> when I export to GML with ogr2ogr the results are corrupted..  ?!?   
> (this is with or without a SQL query to ogr2ogr I believe)
> 
> I use PGAdmin or psql to export data, no problem
> 
> (the same exact problem with KML, but I use GML to prove its not KML
> specific)
> 
> samples below... pointers appreciated...
>    -Brian
> 
> ==
> ogr2ogr -f GML berk.gml PG:dbname=db -sql "select * from rgnt 
> where city = 'Berkeley'"
> ---
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>       xsi:schemaLocation="http://ogr.maptools.org/ca.xsd"
>       xmlns:ogr="http://ogr.maptools.org/"
>       xmlns:gml="http://www.opengis.net/gml">
>    <gml:boundedBy>
>      <gml:Box>
>         
> <gml:coord><gml:X>-122.324829</gml:X><gml:Y>37.820027</gml:Y></gml: 
> coord>
>         
> <gml:coord><gml:X>-122.213578</gml:X><gml:Y>37.905824</gml:Y></gml: 
> coord>
>      </gml:Box>
>    </gml:boundedBy>
>    <gml:featureMember>
>      <ogr:sql_statement fid="F0">
>         
> <ogr:geometryProperty><gml:MultiPolygon><gml:polygonMember><gml: 
> Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>
> -122.303939,37.866796999999998 -122.303701000000004,37.866844
> -122.303545,37.866875 -122.303427999999997,37.866900999999999
> -122.303111999999999,37.866953000000002
> -122.302701999999996,37.867054000000003
> -122.302569000000005,37.867082000000003
> -122.302283000000003,37.867140999999997
> -122.302173999999994,37.867162999999998
> -122.302012000000005,37.867196999999997
> -122.301651000000007,37.867268000000003 -122.301351999999994,37.867325
> -122.300983000000002,37.867398 -122.300953000000007,37.867308
> -122.300820999999999,37.866885000000003
> -122.300509000000005,37.866045999999997
> -122.300275999999997,37.865226999999997
> -122.300184999999999,37.864893000000002
> -122.300104000000005,37.864657999999999
> -122.299852999999999,37.863931999999998
> -122.299581000000003,37.863002000000002
> -122.299498999999997,37.862845999999998
> -122.299429000000003,37.862685999999997 -122.299148000000002,37.861716
> -122.298952,37.861105000000002 -122.298430999999994,37.859442
> -122.298089000000004,37.858347000000002 -122.297972,37.85801
> -122.297873999999993,37.857712999999997
> -122.297456999999994,37.856439999999999
> -122.297251000000003,37.855794000000003
> -122.296582999999998,37.853684999999999
> -122.296256999999997,37.852685999999999 -122.295867,37.851635999999999
> -122.295604999999995,37.850774 -122.295416000000003,37.850133
> -122.295154999999994,37.849303999999997
> -122.295118000000002,37.849192000000002 -122.295085,37.849089999999997
> -122.294962999999996,37.848709999999997 -122.29495,37.848661999999997
> -122.295079999999999,37.848626000000003 -122.297877,37.848125000000003
> -122.298826000000005,37.847923999999999
> -122.303939,37.866796999999998</gml:coordinates></gml:LinearRi
> ng></gml: 
> outerBoundaryIs></gml:Polygon></gml:polygonMember></gml:MultiP
> olygon></
> ogr:geometryProperty>
>        <ogr:gid>528</ogr:gid>
>        <ogr:id>528</ogr:id>
>        <ogr:state>CA</ogr:state>
>        <ogr:city>Berkeley</ogr:city>
>      </ogr:sql_statement>
>    </gml:featureMember>
> </ogr:FeatureCollection>
> 
> (please note the comma is not in synch with the data)
> 
> ===
> Same Data, exported as CSV with PGAdmin, or psql ... 
> AsText(the_geom) for the geometry....
> "city";"geometry"
> "Berkeley";"MULTIPOLYGON(((-122.303939 37.866797,-122.303701
> 37.866844,-122.303545 37.866875,-122.303428 37.866901,-122.303112
> 37.866953,-122.302702 37.867054,-122.302569 37.867082,-122.302283
> 37.867141,-122.302174 37.867163,-122.302012 37.867197,-122.301651
> 37.867268,-122.301352 37.867325,-122.300983 37.867398,-122.300953
> 37.867308,-122.300821 37.866885,-122.300509 37.866046,-122.300276
> 37.865227,-122.300185 37.864893,-122.300104 37.864658,-122.299853
> 37.863932,-122.299581 37.863002,-122.299499 37.862846,-122.299429
> 37.862686,-122.299148 37.861716,-122.298952 37.861105,-122.298431
> 37.859442,-122.298089 37.858347,-122.297972 37.85801,-122.297874
> 37.857713,-122.297457 37.85644,-122.297251 37.855794,-122.296583
> 37.853685,-122.296257 37.852686,-122.295867 37.851636,-122.295605
> 37.850774,-122.295416 37.850133,-122.295155 37.849304,-122.295118
> 37.849192,-122.295085 37.84909,-122.294963 37.84871,-122.29495
> 37.848662,-122.29508 37.848626,-122.297877 37.848125,-122.298826
> 37.847924,-122.303939 37.866797)))"
> 
> ==
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From eschenbe at psc.edu  Wed Oct 10 17:03:12 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
Message-ID: <470D3E10.3040207@psc.edu>

Greetings,

This is a combination complaint/question. I'm trying to use the layer classes' 
  geometry filter to select only features in an area bounded by 4 points.

I can't do that directly but must use SetSpatialFilter and first create an 
instance of OGRPolygon. I do so and look for a way to set the polygon's points.

I can't do that directly but must use addRing and first create an instance of 
OGRLinearRing. I do that and look for a way to set the ring's points.

I can't do that directly but must use importFromWkb and first create a buffer 
of "the well known binary data".

Perhaps it is well known in an alternate universe but I can't find it anywhere 
in the documentation that came with the GDAL library.

Being a good programmer I looked at ogrlinearring.cpp for the routine 
"importFromWkb". All it does is return

    OGRERR_UNSUPPORTED_OPERATION

That doesn't look promising but I also found an undocumented routine hiding in 
that file, _importFromWkb, which doesn't even bother to claim that its "stream 
buffer" input is well known.

Is this the best thing to do? To create a "stream buffer" to create a "ring" to 
create a polygon to create a filter for a layer?

I should document this adventure in a file named "wild_goose_chase.shp".

Kent
Pittsburgh Supercomputing Center

From crschmidt at metacarta.com  Wed Oct 10 17:23:36 2007
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <470D3E10.3040207@psc.edu>
References: <470D3E10.3040207@psc.edu>
Message-ID: <20071010212336.GA27868@metacarta.com>

On Wed, Oct 10, 2007 at 05:03:12PM -0400, Kent Eschenberg wrote:
> Greetings,
> 
> This is a combination complaint/question. I'm trying to use the layer 
> classes' geometry filter to select only features in an area bounded by 4 
>  points.
> 
> I can't do that directly but must use SetSpatialFilter and first create an 
> instance of OGRPolygon. I do so and look for a way to set the polygon's 
> points.

One thing you might do instead is use CreateGeometryFromWKT. In Python,
this is: 

ogr.CreateGeometryFromWkt("POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))")

to create a polygon in the first unit of the first quadrant. 

I don't know exactly how this translates into C, but this returns a
wkbPolygon geometry type in Python.

Regards,
-- 
Christopher Schmidt
MetaCarta

From warmerdam at pobox.com  Wed Oct 10 17:56:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <470D3E10.3040207@psc.edu>
References: <470D3E10.3040207@psc.edu>
Message-ID: <470D4AA5.9050804@pobox.com>

Kent Eschenberg wrote:
> Greetings,
> 
> This is a combination complaint/question. I'm trying to use the layer 
> classes'  geometry filter to select only features in an area bounded by 
> 4 points.
> 
> I can't do that directly but must use SetSpatialFilter and first create 
> an instance of OGRPolygon. I do so and look for a way to set the 
> polygon's points.
> 
> I can't do that directly but must use addRing and first create an 
> instance of OGRLinearRing. I do that and look for a way to set the 
> ring's points.
> 
> I can't do that directly but must use importFromWkb and first create a 
> buffer of "the well known binary data".

Kent,

The convenience function SetSpatialFilterRect() shows the simpliest
approach (in C++) to create a filter polygon with four points.

void OGRLayer::SetSpatialFilterRect( double dfMinX, double dfMinY,
                                      double dfMaxX, double dfMaxY )

{
     OGRLinearRing  oRing;
     OGRPolygon oPoly;

     oRing.addPoint( dfMinX, dfMinY );
     oRing.addPoint( dfMinX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMinY );
     oRing.addPoint( dfMinX, dfMinY );

     oPoly.addRing( &oRing );

     SetSpatialFilter( &oPoly );
}

In short, it is not normal practice to create WKB in programs, since
that is ... not very convenient.  It is a useful interchange format
with other systems (ie. postgis).

The OGRLinearRing isn't a "proper" OGC simple features geometry and
so has no corresponding it WKB format.  OGRLinearRings are only
allowed to exist in the context of a polygon.

I hope this helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From xuex_chen at 126.com  Wed Oct 10 23:03:05 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] about projection
Message-ID: <9233951.138581192071785220.JavaMail.coremail@bj126app92.126.com>

 Hi all,when debug  gdalwarp.c, it runs to function GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, FALSE, 0, 1 ), the following error breaks out: ERROR1: No PROJ.4 translation for source SRS, coordinate transformation initialization has failed. then, i use depends-walker to view the gdalwarp.exe , one dependant dll  msjava.dll doesn't exist,  then i download it from a website. Another dependant dll mpr.dll is exceptional.  (Funtion WNetRestoreConnectionA can't analtically import. )I'm afraid the version of my mpr.dll is wrong. If you run warp well, please give me an advice. Thank you.                                                           Xuexia Chen,                                                           BJ,China
--
//////////////////////////////////////////////////////////////////To a world, you're little, but to a person, you're the world. //////////////////////////////////////////////////////////////////
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071011/1fa698a5/attachment.html
From schut at sarvision.nl  Thu Oct 11 03:59:55 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] swig python doesn't install with pyrex 0.9.6
Message-ID: <470DD7FB.5050602@sarvision.nl>

After upgrading my pyrex to 0.9.6, I get the following error in the
'make install' stage of gdal's ngpython bindings:

make[2]: Entering directory `/usr/local/src/gdal/swig/python'
python setup.py install --root / --single-version-externally-managed
numpy include /usr/lib64/python2.5/site-packages/numpy/core/include
running install
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.5
copying gdal.py -> build/lib.linux-x86_64-2.5
copying ogr.py -> build/lib.linux-x86_64-2.5
copying osr.py -> build/lib.linux-x86_64-2.5
copying gdalconst.py -> build/lib.linux-x86_64-2.5
creating build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/__init__.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/osr.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/ogr.py -> build/lib.linux-x86_64-2.5/osgeo
running build_ext
Traceback (most recent call last):
  File "setup.py", line 219, in <module>
    ext_modules = ext_modules )
  File "/usr/lib/python2.5/distutils/core.py", line 151, in setup
    dist.run_commands()
  File "/usr/lib/python2.5/distutils/dist.py", line 974, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File
"/usr/lib64/python2.5/site-packages/setuptools/command/install.py", line
56, in run
    return _install.run(self)
  File "/usr/lib/python2.5/distutils/command/install.py", line 506, in run
    self.run_command('build')
  File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.5/distutils/command/build.py", line 112, in run
    self.run_command(cmd_name)
  File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
    cmd_obj.run()
  File
"/usr/lib64/python2.5/site-packages/setuptools/command/build_ext.py",
line 46, in run
    _build_ext.run(self)
  File "/usr/lib/python2.5/distutils/command/build_ext.py", line 290, in run
    self.build_extensions()
  File
"/usr/lib64/python2.5/site-packages/Pyrex/Distutils/build_ext.py", line
81, in build_extensions
    ext.sources = self.pyrex_sources(ext.sources, ext)
  File
"/usr/lib64/python2.5/site-packages/Pyrex/Distutils/build_ext.py", line
152, in pyrex_sources
    if not self.inplace and (self.pyrex_c_in_temp or
extension.pyrex_c_in_temp):
AttributeError: Extension instance has no attribute 'pyrex_c_in_temp'
make[2]: *** [install] Error 1
make[2]: Leaving directory `/usr/local/src/gdal/swig/python'
make[1]: *** [install] Error 2
make[1]: Leaving directory `/usr/local/src/gdal/swig'
make: *** [install-actions] Error 2

the changelog for pyrex 0.9.6 can be viewed here:
http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/changes-0.9.6.html;
pyrex_c_in_temp is mentioned as a new option if I understand correctly...

From schut at sarvision.nl  Thu Oct 11 04:18:47 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: swig python doesn't install with pyrex 0.9.6
In-Reply-To: <470DD7FB.5050602@sarvision.nl>
References: <470DD7FB.5050602@sarvision.nl>
Message-ID: <470DDC67.8020109@sarvision.nl>

Sorry for the spam, after some more research this appears to have
nothing to do with gdal, but with an incompatibility between setuptools
and pyrex 0.9.6.

Vincent.

Vincent Schut wrote:
> After upgrading my pyrex to 0.9.6, I get the following error in the
> 'make install' stage of gdal's ngpython bindings:
>
> make[2]: Entering directory `/usr/local/src/gdal/swig/python'
> python setup.py install --root / --single-version-externally-managed
> numpy include /usr/lib64/python2.5/site-packages/numpy/core/include
> running install
> running build
> running build_py
> creating build
> creating build/lib.linux-x86_64-2.5
> copying gdal.py -> build/lib.linux-x86_64-2.5
> copying ogr.py -> build/lib.linux-x86_64-2.5
> copying osr.py -> build/lib.linux-x86_64-2.5
> copying gdalconst.py -> build/lib.linux-x86_64-2.5
> creating build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/__init__.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/osr.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/gdal.py -> build/lib.linux-x86_64-2.5/osgeo
> copying osgeo/ogr.py -> build/lib.linux-x86_64-2.5/osgeo
> running build_ext
> Traceback (most recent call last):
>   File "setup.py", line 219, in <module>
>     ext_modules = ext_modules )
>   File "/usr/lib/python2.5/distutils/core.py", line 151, in setup
>     dist.run_commands()
>   File "/usr/lib/python2.5/distutils/dist.py", line 974, in run_commands
>     self.run_command(cmd)
>   File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
>     cmd_obj.run()
>   File
> "/usr/lib64/python2.5/site-packages/setuptools/command/install.py", line
> 56, in run
>     return _install.run(self)
>   File "/usr/lib/python2.5/distutils/command/install.py", line 506, in run
>     self.run_command('build')
>   File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
>     self.distribution.run_command(command)
>   File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
>     cmd_obj.run()
>   File "/usr/lib/python2.5/distutils/command/build.py", line 112, in run
>     self.run_command(cmd_name)
>   File "/usr/lib/python2.5/distutils/cmd.py", line 333, in run_command
>     self.distribution.run_command(command)
>   File "/usr/lib/python2.5/distutils/dist.py", line 994, in run_command
>     cmd_obj.run()
>   File
> "/usr/lib64/python2.5/site-packages/setuptools/command/build_ext.py",
> line 46, in run
>     _build_ext.run(self)
>   File "/usr/lib/python2.5/distutils/command/build_ext.py", line 290, in run
>     self.build_extensions()
>   File
> "/usr/lib64/python2.5/site-packages/Pyrex/Distutils/build_ext.py", line
> 81, in build_extensions
>     ext.sources = self.pyrex_sources(ext.sources, ext)
>   File
> "/usr/lib64/python2.5/site-packages/Pyrex/Distutils/build_ext.py", line
> 152, in pyrex_sources
>     if not self.inplace and (self.pyrex_c_in_temp or
> extension.pyrex_c_in_temp):
> AttributeError: Extension instance has no attribute 'pyrex_c_in_temp'
> make[2]: *** [install] Error 1
> make[2]: Leaving directory `/usr/local/src/gdal/swig/python'
> make[1]: *** [install] Error 2
> make[1]: Leaving directory `/usr/local/src/gdal/swig'
> make: *** [install-actions] Error 2
>
> the changelog for pyrex 0.9.6 can be viewed here:
> http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/changes-0.9.6.html;
> pyrex_c_in_temp is mentioned as a new option if I understand correctly...
>
>   

From Christian.Strobl at dlr.de  Thu Oct 11 06:00:47 2007
From: Christian.Strobl at dlr.de (Christian.Strobl@dlr.de)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] questions to overviews and tiles
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF79DA8DB2@exbe04.intra.dlr.de>


hi list,

i have only a few user questions. i am building tiles and overviews for
a tiff-file

#Tiles
gdal_translate -co "TILED=YES" image_in.tif image_out.tif
#Overviews
gdaladdo -r average image_out.tif 2 4 8 16

now my questions:
1) has the order of the operations an influence to the result. it seems
that the tiling command destroys the overviews
2) is there any possibility to identify if a tiff-file has inner tiling
sets. i don't see any difference with gdalinfo

thanks and greetings from munich
christian


From warmerdam at pobox.com  Thu Oct 11 09:39:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] questions to overviews and tiles
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF79DA8DB2@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF79DA8DB2@exbe04.intra.dlr.de>
Message-ID: <470E27A9.5000009@pobox.com>

Christian.Strobl@dlr.de wrote:
> hi list,
> 
> i have only a few user questions. i am building tiles and overviews for
> a tiff-file
> 
> #Tiles
> gdal_translate -co "TILED=YES" image_in.tif image_out.tif
> #Overviews
> gdaladdo -r average image_out.tif 2 4 8 16
> 
> now my questions:
> 1) has the order of the operations an influence to the result. it seems
> that the tiling command destroys the overviews

Christian,

Yes, order matters.  The gdal_translate command does not carry along overviews.

> 2) is there any possibility to identify if a tiff-file has inner tiling
> sets. i don't see any difference with gdalinfo

The gdalinfo command will report the block size in the band information.
For instance, a 512x512 image I have reports:

Band 1 Block=512x16 Type=Byte, ColorInterp=Gray

Because the block is as wide as the image and not square it is likely that
this image as stripped, not tiled.  If the block size is not as wide as the
image or the blocks are square it is likely a tiled image.

You can also use the tiffinfo command for an authoritative report on whether
an image is tiled or not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct 11 10:06:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] about projection
In-Reply-To: <9233951.138581192071785220.JavaMail.coremail@bj126app92.126.com>
References: <9233951.138581192071785220.JavaMail.coremail@bj126app92.126.com>
Message-ID: <470E2DF5.9050002@pobox.com>

chenxuexia wrote:
> Hi all,
> when debug gdalwarp.c, it runs to function 
> GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, 
> FALSE, 0, 1 ), the following error breaks out:
> ERROR1: No PROJ.4 translation for source SRS, coordinate 
> transformation initialization has failed.
> then, i use depends-walker to view the gdalwarp.exe , one dependant 
> dll msjava.dll doesn't exist, then i download it from a website. 
> Another dependant dll mpr.dll is exceptional.
> 
> (Funtion WNetRestoreConnectionA can't analtically import. )
> I'm afraid the version of my mpr.dll is wrong. If you run warp well, 
> please give me an advice. Thank you.

Xuexia,

I don't believe this has anything to do with mpr.dll. What is the coordinate
system on the input file? If you are using the -s_srs switch for gdalwarp
then what was the argument? If not, then what coordinate system did
gdalinfo report on the source dataset?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From schut at sarvision.nl  Thu Oct 11 10:25:08 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] TFW file writing broken?
Message-ID: <470E3244.3040905@sarvision.nl>

Is it just me or is the TFW=YES create option for geotiffs broken in
current svn? It neither works from python (driver.Create) nor with
gdal_translate...

Vincent.

From warmerdam at pobox.com  Thu Oct 11 11:05:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] TFW file writing broken?
In-Reply-To: <470E3244.3040905@sarvision.nl>
References: <470E3244.3040905@sarvision.nl>
Message-ID: <470E3BC2.8000208@pobox.com>

Vincent Schut wrote:
> Is it just me or is the TFW=YES create option for geotiffs broken in
> current svn? It neither works from python (driver.Create) nor with
> gdal_translate...

Vincent,

I just tried:

   gdal_translate -co TFW=yes utm.tif out3.tif

on linux from subversion and it produced an out3.tfw file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ehrler-soft at gmx.de  Thu Oct 11 11:26:02 2007
From: ehrler-soft at gmx.de (Christoph Ehrler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
Message-ID: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>

Hi @ all,

currently I'm working on an OGR driver for reading <Model> data out of KML files
using the SAX parser eXpat. I would like to map the internal KML
structure to OGR by preserving the <Folder> and <Placemark> names.
Simplified, folders become to layers and placemarks to features (which
represent the models).

OK, the name of a layer could be set with the constructor of the
OGRFeatureDefn::OGRFeatureDefn(const char *pszName).

But how can I set the individual name of a feature?
Are there any conventions about the name and type and index of an
OGRField that stores this information???


Thanks for your help
Christoph

From randre at gmail.com  Thu Oct 11 12:08:40 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <470D4AA5.9050804@pobox.com>
References: <470D3E10.3040207@psc.edu> <470D4AA5.9050804@pobox.com>
Message-ID: <9c2015090710110908s1d84b22eva16f011023144c1d@mail.gmail.com>

Sorry if I'm stepping on Frank here, but I'm scratching my head about
this.  Probably means that I missed the point entirely.  Seems like
the key question is, "select only features in an area bounded by 4
points."  In Python, I do this like so:

#! /usr/bin/python2.4

'''Pulls all of the zipcode polys within a bounding box and returns
the Zip Code name and centroid coords.  Spatial filtering needs min_
x, min_ y, max_x, max_y values'''

import ogr

drv = ogr.GetDriverByName( 'ESRI Shapefile' )
ds = drv.Open('zt06_d00.shp')
layer = ds.GetLayer(0)
filter_layer = layer.SetSpatialFilterRect(-122.166734286713,37.89091665754511,-122.3113385951359,37.79866675446653)
feature = layer.GetNextFeature()
name_field = feature.GetFieldIndex( 'NAME' )
while feature is not None:
  name = feature.GetField( name_field )
  print name
  polygon = feature.GetGeometryRef()
  centroid = polygon.Centroid()
  print centroid
  feature = layer.GetNextFeature()

Easy, simple, and works well for me.
--

On 10/10/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Kent Eschenberg wrote:
> > Greetings,
> >
> > This is a combination complaint/question. I'm trying to use the layer
> > classes'  geometry filter to select only features in an area bounded by
> > 4 points.
> >
> > I can't do that directly but must use SetSpatialFilter and first create
> > an instance of OGRPolygon. I do so and look for a way to set the
> > polygon's points.
> >
> > I can't do that directly but must use addRing and first create an
> > instance of OGRLinearRing. I do that and look for a way to set the
> > ring's points.
> >
> > I can't do that directly but must use importFromWkb and first create a
> > buffer of "the well known binary data".
>
> Kent,
>
> The convenience function SetSpatialFilterRect() shows the simpliest
> approach (in C++) to create a filter polygon with four points.
>
> void OGRLayer::SetSpatialFilterRect( double dfMinX, double dfMinY,
>                                       double dfMaxX, double dfMaxY )
>
> {
>      OGRLinearRing  oRing;
>      OGRPolygon oPoly;
>
>      oRing.addPoint( dfMinX, dfMinY );
>      oRing.addPoint( dfMinX, dfMaxY );
>      oRing.addPoint( dfMaxX, dfMaxY );
>      oRing.addPoint( dfMaxX, dfMinY );
>      oRing.addPoint( dfMinX, dfMinY );
>
>      oPoly.addRing( &oRing );
>
>      SetSpatialFilter( &oPoly );
> }
>
> In short, it is not normal practice to create WKB in programs, since
> that is ... not very convenient.  It is a useful interchange format
> with other systems (ie. postgis).
>
> The OGRLinearRing isn't a "proper" OGC simple features geometry and
> so has no corresponding it WKB format.  OGRLinearRings are only
> allowed to exist in the context of a polygon.
>
> I hope this helps.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu.inc at gmail.com  Thu Oct 11 12:09:36 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] =?utf-8?q?Motion=3A_Committer_Status_for_Petr_P=C5=99?=
 =?utf-8?q?idal_=28Klokan=29?=
Message-ID: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>

All,

I motion to extend committer status to Petr P?idal (Klokan).

--

Petr was part of the Google Summer of Code in 2007 and worked on the  
gdal2tiles.py utility.  His SoC project was an excellent addition,  
and his experience with the raster side of KML has and should  
continue to be valuable to GDAL's development efforts.  Commit access  
will allow him to continue to improve and maintain gdal2tiles without  
me clogging up the works as we ready the GDAL 1.5 release.  Assuming  
he agrees to RFC 3, I propose that we provide Petr commit access.

Howard

From jcermak at atmos.washington.edu  Thu Oct 11 12:34:45 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
Message-ID: <470E50A5.5050608@atmos.washington.edu>

Hi,

 From a MODIS MYD021km file I am trying to read band data including 
offset and scaling factors. Band data works just fine, but I can't get 
offset and scale. Without offset and scale the data is completely 
useless, so this seems to be a major issue to me.

Here is some sample code:

dsobj = 
gdal.Open('HDF4_EOS:EOS_SWATH:"myfile.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
bandobj = dsobj.GetRasterBand(1)
scale = bandobj.GetScale()
offset = bandobj.GetOffset()

scale and offset variables are empty.

I am using yesterday's stable branch nightly.
A sample file is at
ftp://ladsweb.nascom.nasa.gov/allData/5/MYD021KM/2006/220/MYD021KM.A2006220.1330.005.2007140045620.hdf

For this file and data set, HDFView yields:
radiance_scales = 
0.0072957743,0.0051752976,0.0037723905,0.0029522364,0.0023176796,0.001162374,5.6182046E-4,0.0011558639,4.1845915E-4,9.5770456E-4,6.215421E-4,0.006355153,0.009465027,0.0069601014,0.0027906199
radiance_offsets = 
316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722

Any suggestions appreciated.

All the best,
Jan

From szekerest at gmail.com  Thu Oct 11 13:17:53 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:05 2007
Subject: =?ISO-8859-2?Q?Re:_[Gdal-dev]_Motion:_Committer?=
	=?ISO-8859-2?Q?_Status_for_Petr_P=F8idal_(Klokan)?=
In-Reply-To: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
References: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
Message-ID: <f3b73b7d0710111017x29e9165bt32be5de35a6318d@mail.gmail.com>

+1

Best regards,

Tamas



2007/10/11, Howard Butler <hobu.inc@gmail.com>:
> All,
>
> I motion to extend committer status to Petr P?idal (Klokan).
>
> --
>
> Petr was part of the Google Summer of Code in 2007 and worked on the
> gdal2tiles.py utility.  His SoC project was an excellent addition,
> and his experience with the raster side of KML has and should
> continue to be valuable to GDAL's development efforts.  Commit access
> will allow him to continue to improve and maintain gdal2tiles without
> me clogging up the works as we ready the GDAL 1.5 release.  Assuming
> he agrees to RFC 3, I propose that we provide Petr commit access.
>
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From eschenbe at psc.edu  Thu Oct 11 14:36:16 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <20071010212336.GA27868@metacarta.com>
References: <470D3E10.3040207@psc.edu> <20071010212336.GA27868@metacarta.com>
Message-ID: <470E6D20.1080504@psc.edu>

Christopher,

Thanks! I found your routine in the C++ documentation but still haven't found a 
description of WKB or WKT. Still, your example is one solid solution.

Kent

Christopher Schmidt wrote:
> One thing you might do instead is use CreateGeometryFromWKT. In Python,
> this is: 
> ogr.CreateGeometryFromWkt("POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))")

From maplabs at light42.com  Thu Oct 11 14:55:01 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
In-Reply-To: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
References: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
Message-ID: <783B67D0-782B-11DC-ABA3-000A277A733C@light42.com>

Hello Christoph-

   I have been working with the brand new KML driver over the last two 
months, and I am am new to OGR in general. I have found that there are 
limitations mapping from KML to OGR Geometry and back. These 
limitations are not completely final, because the KML driver is still 
evolving, but at this time, not everything works as you might hope. 
(Trac ticket #1858)

See for example, a KML file called soc_map_21.kml, derived from the Map 
of Google's 2007 Summer of Code projects . There are many folders, in 
sub folders, and many placemarks. Each Folder has a Name, and each 
Plaemark has a name and a description. Lets see what happens if we 
convert from KML to KML with ogr2ogr...

ogr2ogr -f KML out.kml soc_map_21.kml
http://ewasteinsights.info/aMiscFiles/kml/soc_map_21.kml

(notice after conversion that quite a bit of the KML detail is now 
gone...)
  ...running the expat example tools, outline and elements, gives some 
insight into the structure before and after. However, it is still hard 
to follow the exact changes (at least with the tools I have). So I pick 
one specific example,

<Folder><name> students</name>
     <Folder><name>AbiSource>
         <Placemark><name> Erik Pukinskis</name><description>..<point>...
         <Placemark><name>Jauco Noordzij</name><description>..<point>...

In the converted file, it looks to me like the output is

<Folder><name>AbiSource
     <Placemark><description><![CDATA[<b>Name:</b>Erik Pukinskis
     <Placemark><description><![CDATA[<b>Name:</b>Jauco Noordzij

big differences... my conclusion is that this mapping is not finalized, 
and not completely tested right now
I think this might be an important use for OGR, and that it needs good 
work to bring it forward to being really useful.
KML handling deserves more documentation, perhaps a  diagram in the 
gdal wiki.     http://trac.osgeo.org/gdal/wiki

all for now
   -Brian


On Oct 11, 2007, at 8:26 AM, Christoph Ehrler wrote:

> Hi @ all,
>
> currently I'm working on an OGR driver for reading <Model> data out of 
> KML files
> using the SAX parser eXpat. I would like to map the internal KML
> structure to OGR by preserving the <Folder> and <Placemark> names.
> Simplified, folders become to layers and placemarks to features (which
> represent the models).
>
> OK, the name of a layer could be set with the constructor of the
> OGRFeatureDefn::OGRFeatureDefn(const char *pszName).
>
> But how can I set the individual name of a feature?
> Are there any conventions about the name and type and index of an
> OGRField that stores this information???
>
>
> Thanks for your help
> Christoph
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From crschmidt at metacarta.com  Thu Oct 11 15:03:07 2007
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <470E6D20.1080504@psc.edu>
References: <470D3E10.3040207@psc.edu> <20071010212336.GA27868@metacarta.com>
	<470E6D20.1080504@psc.edu>
Message-ID: <20071011190307.GB2738@metacarta.com>

On Thu, Oct 11, 2007 at 02:36:16PM -0400, Kent Eschenberg wrote:
> Christopher,
> 
> Thanks! I found your routine in the C++ documentation but still haven't 
> found a description of WKB or WKT. Still, your example is one solid 
> solution.

http://en.wikipedia.org/wiki/Well_Known_Text is what we used when
implementing WKT for OpenLayers. (It's part of the OGC Simple Features
spec, as I understand it.) 

Regards,
-- 
Christopher Schmidt
MetaCarta

From warmerdam at pobox.com  Thu Oct 11 15:44:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] How to Create a Geometry Filter
In-Reply-To: <470E6D20.1080504@psc.edu>
References: <470D3E10.3040207@psc.edu> <20071010212336.GA27868@metacarta.com>
	<470E6D20.1080504@psc.edu>
Message-ID: <470E7D39.6040807@pobox.com>

Kent Eschenberg wrote:
> Christopher,
> 
> Thanks! I found your routine in the C++ documentation but still haven't 
> found a description of WKB or WKT. Still, your example is one solid 
> solution.

Kent,

WKT and WKB are part of the OGC Simple Features specifications and are
documented within them.  It does not seem fruitful to include a full
specification in GDAL/OGR.  ogrinfo will report geometries in WKT
if you need examples to look at.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maplabs at light42.com  Thu Oct 11 17:12:09 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
In-Reply-To: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
References: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
Message-ID: <A0A12268-783E-11DC-ABA3-000A277A733C@light42.com>

It looks to me that the <Model> tag is currently rejected by the KML 
driver as 'Not Handled', so no information reaches the OGR layer about 
the model contents at this time.

-Brian

On Oct 11, 2007, at 8:26 AM, Christoph Ehrler wrote:

> Hi @ all,
>
> currently I'm working on an OGR driver for reading <Model> data out of 
> KML files
> using the SAX parser eXpat. I would like to map the internal KML
> structure to OGR by preserving the <Folder> and <Placemark> names.
> Simplified, folders become to layers and placemarks to features (which
> represent the models).
>
> OK, the name of a layer could be set with the constructor of the
> OGRFeatureDefn::OGRFeatureDefn(const char *pszName).
>
> But how can I set the individual name of a feature?
> Are there any conventions about the name and type and index of an
> OGRField that stores this information???
>
>
> Thanks for your help
> Christoph
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From maplabs at light42.com  Thu Oct 11 17:15:46 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
In-Reply-To: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
References: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
Message-ID: <222924CA-783F-11DC-ABA3-000A277A733C@light42.com>

Christoph-  I misunderstood  - I see you are building your own OGR 
driver...
You want OGR calls to set OGR geometry based on your own parsing of the 
KML..
ok, thats different...


On Oct 11, 2007, at 8:26 AM, Christoph Ehrler wrote:

> Hi @ all,
>
> currently I'm working on an OGR driver for reading <Model> data out of 
> KML files
> using the SAX parser eXpat. I would like to map the internal KML
> structure to OGR by preserving the <Folder> and <Placemark> names.
> Simplified, folders become to layers and placemarks to features (which
> represent the models).
>
> OK, the name of a layer could be set with the constructor of the
> OGRFeatureDefn::OGRFeatureDefn(const char *pszName).
>
> But how can I set the individual name of a feature?
> Are there any conventions about the name and type and index of an
> OGRField that stores this information???
>
>
> Thanks for your help
> Christoph
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Thu Oct 11 23:55:27 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build 
Message-ID: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>

As I worked on some OSX framework build issues, I noticed a couple  
odd ng-python build items.

- After configuring to build ng-python, make doesn't build *any*  
python bindings.  It looks like the makefile default target doesn't  
refer to the swig-target, just the old py-target.  BUT, install does  
- the install-actions target runs a make install in the swig dir,  
which ends up building ng-python.

- ng-python installs in $prefix.  This ends up being installed where- 
ever GDAL is installed, in the subdir thereof specified in the python  
distutils (something like lib/python2.5/site-packages).  Is this  
intentional?  Shouldn't it be left completely up to distutils so it  
gets installed in the default python site-packages dir?

Otherwise that would mean having to add the GDAL $prefix/lib/... to  
PYTHONPATH.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From hobu.inc at gmail.com  Fri Oct 12 00:34:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build 
In-Reply-To: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
Message-ID: <E8CC86B6-8273-48BC-AC47-F9327F0CBE44@gmail.com>


On Oct 11, 2007, at 10:55 PM, William Kyngesburye wrote:

> As I worked on some OSX framework build issues, I noticed a couple  
> odd ng-python build items.
>
> - After configuring to build ng-python, make doesn't build *any*  
> python bindings.  It looks like the makefile default target doesn't  
> refer to the swig-target, just the old py-target.  BUT, install  
> does - the install-actions target runs a make install in the swig  
> dir, which ends up building ng-python.

I think this was because of libtool and linking trouble with -lgdal  
as it is built in the tree.  I think Kevin was the one who originally  
did the target for the ng bindings.  I have always built them by  
hand, but I am expecting to deal with these issues before the 1.5  
release.  Can you please file a ticket for this one and pick the  
PythonBindings as the component?

>
> - ng-python installs in $prefix.  This ends up being installed  
> where-ever GDAL is installed, in the subdir thereof specified in  
> the python distutils (something like lib/python2.5/site-packages).   
> Is this intentional?  Shouldn't it be left completely up to  
> distutils so it gets installed in the default python site-packages  
> dir?
>

This is what the old bindings did as well, which is why it currently  
does this by default.  However, with the ng bindings, the situation  
is more inconsistent than that:

-- If setuptools is installed, use that to build and do "install -- 
root / --single-version-externally-managed".  By default this means  
an egg file gets put in your Python path (typically site-packages)
-- If setuptools is not installed, install in --prefix as before.

What makes the most sense for installation and building of the Python  
bindings?  There are so many different ways to skin this cat now that  
we are using setuptools/distutils by default.  I'd like everyone to  
chime in who has an opinion.  I think putting stuff in --prefix by  
default is confusing for most folks, but installing stuff in the root  
of your Python install isn't too friendly either...

As things are currently defined, setuptools is used *by default* if  
configure or setup.py determines that it is available. Regular  
distutils is then used if setuptools isn't available.  I would hate  
to *require* setuptools, but it would simplify troubleshooting  
things.  Our default install: targets basically install the bindings  
the same way regardless of whether or not setuptools is available,  
and the major benefit is if you want to hand build things, you have a  
lot more options.

My opinions:
-- I really like setuptools for the 'develop' target and even for  
eggs now that we use them on the osx buildbot slave (everything is  
self-contained and it doesn't end up polluting the rest of my machine  
with new and possibly broken bindings and we don't have to do  
sys.path hacking). I can see providing the ng bindings as eggs for  
windows, for example.
-- './configure --with-python;make;make install' needs to do the most  
straightforward thing for Python users (we need to define what that  
is, and it is my opinion that installing in --prefix *isn't* it).   
Someone wanting to do fancier stuff should have to run setup.py  
themselves.

Howard

PS.  This discussion reminded me of the best feature of the ng  
bindings in the upcoming 1.5 release... docs!  I figured out a way to  
incorporate the doxygen docs into docstrings as part of the swig  
generation.  pydoc away... :)


From foreback at yahoo.cn  Fri Oct 12 01:34:51 2007
From: foreback at yahoo.cn (J.F  )
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] OGR: how to get length of line-features  
Message-ID: <16085.57367.qm@web92206.mail.cnh.yahoo.com>

Hi ,
   
  I'm trying to get length of line-features from a TAb file using ogr,but 
   
  OGRGeometry does not support the method get_Length().
   
  How can I get it when  I'm reading ?
   
  Best regards!

       
---------------------------------
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071012/9341bb0b/attachment.html
From ehrler-soft at gmx.de  Fri Oct 12 03:47:00 2007
From: ehrler-soft at gmx.de (Christoph Ehrler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
In-Reply-To: <222924CA-783F-11DC-ABA3-000A277A733C@light42.com>
References: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
	<222924CA-783F-11DC-ABA3-000A277A733C@light42.com>
Message-ID: <bc75359f0710120047i18403422s7dfa7bb8831e7b29@mail.gmail.com>

Good morning list,
hi Brian

Yes, I experimented with the new Google Summer of Code KML driver for OGR that
http://trac.osgeo.org/gdal/wiki/SoCKMLRead

Unfortunately, we will not use it since our primary goals are
streaming of the KML file over network connections (this means a
strict SAX parser and code) and retrieving the <Model> information (as
the first step).
This data of the <Model> object will be placed in a "pseudo layer"
with only attributes (geometry type wbkNone) that will later passed
through an OGR-importer for OSG to the COLLADA-importer of OSG.


My question was how to set the names of layers and features correctly
that they can appear as in every ordinary GIS application...
Or to formulate it in another way: How does an application based on /
using OGR retrieves the names of layers and features?? Is there one
common way? Are there conventions to follow?

Project
   |
   + LayerName1
   |     |
   |     + FeatureName1
   |     + FeatureName2
   |
   + LayerName2
         |
        + FeatureName3


OK, thanks to all
Christoph



> On Oct 11, 2007, at 8:26 AM, Christoph Ehrler wrote:
>
> > Hi @ all,
> >
> > currently I'm working on an OGR driver for reading <Model> data out of
> > KML files
> > using the SAX parser eXpat. I would like to map the internal KML
> > structure to OGR by preserving the <Folder> and <Placemark> names.
> > Simplified, folders become to layers and placemarks to features (which
> > represent the models).
> >
> > OK, the name of a layer could be set with the constructor of the
> > OGRFeatureDefn::OGRFeatureDefn(const char *pszName).
> >
> > But how can I set the individual name of a feature?
> > Are there any conventions about the name and type and index of an
> > OGRField that stores this information???
> >
> >
> > Thanks for your help
> > Christoph
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mitchelljj98 at gmail.com  Fri Oct 12 08:41:36 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] moving fwtools/gdal programs from a 32 bit windows
	server to a 64 bit windows server
In-Reply-To: <931f8ea90709292348p28601cf1wd3387073bbff1901@mail.gmail.com>
References: <fa2ac0580709281207p12de3334l1da81f7fc8ed36b3@mail.gmail.com>
	<931f8ea90709292348p28601cf1wd3387073bbff1901@mail.gmail.com>
Message-ID: <fa2ac0580710120541v5462b76w2c61b7488d4d934c@mail.gmail.com>

Hi,

Since I always (until now) use FWTools natively as a 32 bit application
could someone please explain how I would convert FWTools to a 64 bit
application so that I can run programs like gdalwarp, gdaltindex, and
gdal_translate without the extra overhead of emulation from 32 bit to the 64
bit Windows server.

Thanks,

John Mitchell

On 9/30/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> On 9/28/07, John Mitchell <mitchelljj98@gmail.com> wrote:
> > Hi,
> >
> > We are moving fwtools/gdal programs from a 32 bit windows server to a 64
> bit
> > windows server and I would like to know how to best take advantage of
> the
> > server's 64 bit architecture when running gdal programs like gdalwarp,
> > gdaltindex, and gdal_translate.
>
> John,
>
> For the forseeable future the FWTools binaries will remain
> 32bit mode.
>
> I know some folks are building for win64 but I don't know
> the details.  I am not convinced there will be much performance
> benefit other than potentially large address spaces.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>



-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071012/73c120e1/attachment.html
From anakreonmejdi at yahoo.gr  Fri Oct 12 10:11:29 2007
From: anakreonmejdi at yahoo.gr (anakreonmejdi@yahoo.gr)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Beginners question. How to fetch longtitude,
	latitude coordinates
Message-ID: <18191.32913.164570.144596@mathind.csd.auth.gr>

Hello all.

Can someone provide an example of the configuration
required to fetch data from mysql tables of longtitude, latitude
coordinates?

I need to display those data with MapServer.
There is one table which contains information of the locations
(name and other attributes) and a related table with the longtitude
and latitude coordinates.

It would be usefull if the example contained info on how the connection
string is defined.



From maplabs at light42.com  Fri Oct 12 11:56:17 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] how to set OGRFeature names
In-Reply-To: <bc75359f0710120047i18403422s7dfa7bb8831e7b29@mail.gmail.com>
References: <bc75359f0710110826m4b9ecc00k138d419524fe5884@mail.gmail.com>
	<222924CA-783F-11DC-ABA3-000A277A733C@light42.com>
	<bc75359f0710120047i18403422s7dfa7bb8831e7b29@mail.gmail.com>
Message-ID: <AAC48DBA-78DB-11DC-ABA3-000A277A733C@light42.com>

Hi Christoph-

   I am looking at a file called test_ogrOshape.cpp, in the GDAL 
Autotest suite. There is a lot of feature manipulation there.

  Mateusz, whose name is on the code, is often here on the list but he 
is away right now.

   Also in the test suite is a python file called ogr_index_test.py, 
with some examples... in ogrtest.py, there is a little bit more useful 
code. I suppose I would look at a driver or two to learn, also, 
although that not as clear.

   all for now
     -Brian



On Oct 12, 2007, at 12:47 AM, Christoph Ehrler wrote:

> Good morning list,
> hi Brian
>
> Yes, I experimented with the new Google Summer of Code KML driver for 
> OGR that
> http://trac.osgeo.org/gdal/wiki/SoCKMLRead
>
> Unfortunately, we will not use it since our primary goals are
> streaming of the KML file over network connections (this means a
> strict SAX parser and code) and retrieving the <Model> information (as
> the first step).
> This data of the <Model> object will be placed in a "pseudo layer"
> with only attributes (geometry type wbkNone) that will later passed
> through an OGR-importer for OSG to the COLLADA-importer of OSG.
>
>
> My question was how to set the names of layers and features correctly
> that they can appear as in every ordinary GIS application...
> Or to formulate it in another way: How does an application based on /
> using OGR retrieves the names of layers and features?? Is there one
> common way? Are there conventions to follow?
>
> Project
>    |
>    + LayerName1
>    |     |
>    |     + FeatureName1
>    |     + FeatureName2
>    |
>    + LayerName2
>          |
>         + FeatureName3
>
>
> OK, thanks to all
> Christoph
>
>
>
>> On Oct 11, 2007, at 8:26 AM, Christoph Ehrler wrote:
>>
>>> Hi @ all,
>>>
>>> currently I'm working on an OGR driver for reading <Model> data out 
>>> of
>>> KML files
>>> using the SAX parser eXpat. I would like to map the internal KML
>>> structure to OGR by preserving the <Folder> and <Placemark> names.
>>> Simplified, folders become to layers and placemarks to features 
>>> (which
>>> represent the models).
>>>
>>> OK, the name of a layer could be set with the constructor of the
>>> OGRFeatureDefn::OGRFeatureDefn(const char *pszName).
>>>
>>> But how can I set the individual name of a feature?
>>> Are there any conventions about the name and type and index of an
>>> OGRField that stores this information???
>>>
>>>
>>> Thanks for your help
>>> Christoph
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From woklist at kyngchaos.com  Fri Oct 12 12:13:45 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build 
In-Reply-To: <E8CC86B6-8273-48BC-AC47-F9327F0CBE44@gmail.com>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
	<E8CC86B6-8273-48BC-AC47-F9327F0CBE44@gmail.com>
Message-ID: <EC9D809C-9B16-4874-AD1C-C27A82E910ED@kyngchaos.com>

On Oct 11, 2007, at 11:34 PM, Howard Butler wrote:

> On Oct 11, 2007, at 10:55 PM, William Kyngesburye wrote:
>
>> As I worked on some OSX framework build issues, I noticed a couple  
>> odd ng-python build items.
>>
>> - After configuring to build ng-python, make doesn't build *any*  
>> python bindings.  It looks like the makefile default target  
>> doesn't refer to the swig-target, just the old py-target.  BUT,  
>> install does - the install-actions target runs a make install in  
>> the swig dir, which ends up building ng-python.
>
> I think this was because of libtool and linking trouble with -lgdal  
> as it is built in the tree.  I think Kevin was the one who  
> originally did the target for the ng bindings.  I have always built  
> them by hand, but I am expecting to deal with these issues before  
> the 1.5 release.  Can you please file a ticket for this one and  
> pick the PythonBindings as the component?
>
It seems to work now.  That is, if I run make swig-target.  There are  
warnings that the installed gdal can't be found, but then OSX has the  
dynamic-lookup link option, so maybe it's an error on other  
platforms.  Is this what you mean?  Of course, when it gets run on  
install, gdal is installed by the time ng-python is built.

>>
>> - ng-python installs in $prefix.  This ends up being installed  
>> where-ever GDAL is installed, in the subdir thereof specified in  
>> the python distutils (something like lib/python2.5/site- 
>> packages).  Is this intentional?  Shouldn't it be left completely  
>> up to distutils so it gets installed in the default python site- 
>> packages dir?
>>
>
> This is what the old bindings did as well, which is why it  
> currently does this by default.  However, with the ng bindings, the  
> situation is more inconsistent than that:
>
Are you sure?  The old python has always installed in python's site- 
packages for me.  INST_PYMOD in gdalmake.opt is set from pymoddir in  
configure, which it correctly calculates from python.


> -- If setuptools is installed, use that to build and do "install -- 
> root / --single-version-externally-managed".  By default this means  
> an egg file gets put in your Python path (typically site-packages)
> -- If setuptools is not installed, install in --prefix as before.
>
> What makes the most sense for installation and building of the  
> Python bindings?  There are so many different ways to skin this cat  
> now that we are using setuptools/distutils by default.  I'd like  
> everyone to chime in who has an opinion.  I think putting stuff in  
> --prefix by default is confusing for most folks, but installing  
> stuff in the root of your Python install isn't too friendly either...
>
> As things are currently defined, setuptools is used *by default* if  
> configure or setup.py determines that it is available. Regular  
> distutils is then used if setuptools isn't available.  I would hate  
> to *require* setuptools, but it would simplify troubleshooting  
> things.  Our default install: targets basically install the  
> bindings the same way regardless of whether or not setuptools is  
> available, and the major benefit is if you want to hand build  
> things, you have a lot more options.
>
Coming from a (my) Mac viewpoint, I don't think setuptools is all  
that common on OSX.  I think the python root site-packages is where  
most everyone installs extensions on OSX.


> My opinions:
> -- I really like setuptools for the 'develop' target and even for  
> eggs now that we use them on the osx buildbot slave (everything is  
> self-contained and it doesn't end up polluting the rest of my  
> machine with new and possibly broken bindings and we don't have to  
> do sys.path hacking). I can see providing the ng bindings as eggs  
> for windows, for example.

On OSX, Installer packages are the thing.  I haven't been paying a  
whole lot of attention to the mac python list, but there may be an  
installer packaging option in distutils.  I can look into it.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From perrygeo at gmail.com  Fri Oct 12 13:39:25 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Beginners question. How to fetch longtitude,
	latitude coordinates
In-Reply-To: <18191.32913.164570.144596@mathind.csd.auth.gr>
References: <18191.32913.164570.144596@mathind.csd.auth.gr>
Message-ID: <5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>

This page might be of some help,

http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData

- matt

On 10/12/07, anakreonmejdi@yahoo.gr <anakreonmejdi@yahoo.gr> wrote:
> Hello all.
>
> Can someone provide an example of the configuration
> required to fetch data from mysql tables of longtitude, latitude
> coordinates?
>
> I need to display those data with MapServer.
> There is one table which contains information of the locations
> (name and other attributes) and a related table with the longtitude
> and latitude coordinates.
>
> It would be usefull if the example contained info on how the connection
> string is defined.
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Matthew T. Perry
http://www.perrygeo.net

"Never ascribe to malice, that which can be adequately explained by
incompetence."

From even.rouault at mines-paris.org  Fri Oct 12 13:48:35 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Validation of creation options given to gdal_translate
	and gdalwarp
Message-ID: <200710121948.35979.even.rouault@mines-paris.org>

I've recently commited in GDAL trunk 
(http://trac.osgeo.org/gdal/changeset/12380, see also 
http://trac.osgeo.org/gdal/ticket/611) some code to validate the creation 
options passed by the user with the -co command line option to the output 
drivers.
GDALValidateCreationOptions only reports warnings and not failures when it 
detects that an option does not match the list of creation options advertized 
by the driver, so this should not break anything.
This new code will probably require some driver mainteners to add missing 
creation options in the creation option list to avoid false warnings.

The option types handled are :
- int/integer
- unsigned int
- float
- boolean
- string
- string-select

Frank Warmerdam outlined that some drivers use private/undocumented creation 
options. Either people using them are OK to live with the new warnings, 
either we must find a way to declare private creation options.

Best regards,
Even.

From warmerdam at pobox.com  Fri Oct 12 17:49:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] OGR: how to get length of line-features
In-Reply-To: <16085.57367.qm@web92206.mail.cnh.yahoo.com>
References: <16085.57367.qm@web92206.mail.cnh.yahoo.com>
Message-ID: <470FEBE4.4040609@pobox.com>

J.F wrote:
> Hi ,
>  
> I'm trying to get length of line-features from a TAb file using ogr,but
>  
> OGRGeometry does not support the method get_Length().
>  
> How can I get it when  I'm reading ?

JF,

If you are using the C++ API, and you know that a particular
geometry is a linestring or linearring you can just explicitly
cast the OGRGeometry* to OGRLineString and then call get_Length()
on it.

eg.
  if( wkbFlatten(poGeometry->geGeometryType() == wkbLineString )
    printf( "Length = %g\n",
              ((OGRLineString *) poGeometry))->get_Length() );

I see get_Length() is implemented in 1.4 branch, but I'm not sure
how long it has existed in OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From wollez at gmx.net  Fri Oct 12 14:44:39 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: Turn off the old-gen Python bindings in trunk
In-Reply-To: <8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com><4706A367.8070407@noaa.gov>	<4706B58C.7070709@pobox.com>
	<8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
Message-ID: <470FC097.1060407@gmx.net>

> 
> If no one more qualified than myself steps forward, I could do this.
> I've managed to produce an .exe installation file of the next generation
> bindings for both 2.4 and 2.5.  I'm fairly new to building on Windows,
> but I've currently got it working.
> 
> I'm sure the more I do it, the easier it will get.  I'll try and work on
> it a bit today, and see if I can come up with Release based installation
> packages for 2.4 and 2.5.  Do you think we need to also have one for
> Python 2.3?
> 
> Cheers,
> Rob McCulley

Hi Rob,

I would like to test your package for python 2.5. Could you make them 
available somehow?

Regards
Wolfgang


From wollez at gmx.net  Fri Oct 12 14:44:49 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: Turn off the old-gen Python bindings in trunk
In-Reply-To: <8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
References: <b0d146420710050922i7ae7c24cm9fbaa455b7f9392b@mail.gmail.com><4706A367.8070407@noaa.gov>	<4706B58C.7070709@pobox.com>
	<8563B9D6767C904A912272A2D56548E41A6245@vermilion.County24.local>
Message-ID: <470FC0A1.5000101@gmx.net>

> 
> If no one more qualified than myself steps forward, I could do this.
> I've managed to produce an .exe installation file of the next generation
> bindings for both 2.4 and 2.5.  I'm fairly new to building on Windows,
> but I've currently got it working.
> 
> I'm sure the more I do it, the easier it will get.  I'll try and work on
> it a bit today, and see if I can come up with Release based installation
> packages for 2.4 and 2.5.  Do you think we need to also have one for
> Python 2.3?
> 
> Cheers,
> Rob McCulley

Hi Rob,

I would like to test your package for python 2.5. Could you make them 
available somehow?

Regards
Wolfgang


From jluis at ualg.pt  Fri Oct 12 20:34:44 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Georeferencing netCDF files
In-Reply-To: <5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
References: <18191.32913.164570.144596@mathind.csd.auth.gr>
	<5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
Message-ID: <471012A4.4020500@ualg.pt>

Hi,

I don't understand what is the meaning of the "Georeferencing" on the 
GDAL Raster Formats,
in particular for the case of netCDF files (more interested in those 
because I'm dealing with them now)
In that table Georeferencing = yes for netCDF,  but if I convert a 
geottif to netCDF the referencing
information is not copied into the netCDF file.

However, sometime ago someone send me an ArcGIS generated file that has 
this attribute
(printed by ncdump but not reported by gdalinfo)
z_Layer:esri_pe_string =
"GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]" 


I had just nearly finished a code where I have added the option to write 
an attribute named
srsWKT to serve exactly the same purpose.

The reason I'm addressing this issue here is to ask if there is interest 
in future support for recognizing a georeferencing
WKT string within netCDF files. And if yes what would be an appropriate 
name.
I thought in srsWKT for obvious reasons but I'm open to suggestions.

Joaquim Luis





From warmerdam at pobox.com  Fri Oct 12 23:19:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: =?UTF-8?B?UmU6IFtHZGFsLWRldl0gTW90aW9uOiBDb21taXR0ZXIgU3RhdHVzIGY=?=
	=?UTF-8?B?b3IgUGV0ciBQxZlpZGFsIChLbG9rYW4p?=
In-Reply-To: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
References: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
Message-ID: <47103951.8060902@pobox.com>

Howard Butler wrote:
> All,
> 
> I motion to extend committer status to Petr P?idal (Klokan).

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Oct 13 01:33:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
Message-ID: <471058C5.1070402@pobox.com>

PSC members,

As part of the sponsorship program, we are committed to distributing a
sponsor survey to all our sponsors with the intention that their responses
would provide some guidance to our activities - at least as far as the focus
of the paid maintainer.  I had really intended to get it out by mid-year,
but like many things I do it slips...

I have prepared a first draft at:

   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey

Any suggestions for other points that ought to be raised?  Other changes?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Sat Oct 13 09:43:36 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] gdalinfo fails to report all info on netCDF file that
 resides in a different partition (Windows)
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <4710CB88.4000501@ualg.pt>

Hi,

The below two listings are self explanatory of the problem
In the first case I run grdinfo from D:\.. applied to a file which is C:\
In the second case I run C:\


D:\SVN\mironeWC>gdalinfo c:\arc_netcdf.nc
Driver: netCDF/Network Common Data Format
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#Source_Software=ESRI ArcGIS
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"c:\arc_netcdf.nc":z_Layer
  SUBDATASET_1_DESC=[421x541] z_Layer (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)





C:\>gdalinfo c:\arc_netcdf.nc
Driver: netCDF/Network Common Data Format
Files: c:\arc_netcdf.nc
       c:\arc_netcdf.nc.aux.xml
Size is 541, 421
Coordinate System is `'
Origin = (-70.600017600000001,41.199991170000004)
Pixel Size = (0.000833329999992,0.000833329999999)
Metadata:
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#Source_Software=ESRI ArcGIS
  z_Layer#long_name=z_Layer
  
z_Layer#esri_pe_string=GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_
1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329
25199433]]
  z_Layer#coordinates=lon lat
  z_Layer#units=Degree
  z_Layer#missing_value=-3.402823e+038
  lon#long_name=longitude coordinate
  lon#standard_name=longitude
  lon#units=degrees_east
  lat#long_name=latitude coordinate
  lat#standard_name=latitude
  lat#units=degrees_north
...

From jluis at ualg.pt  Sat Oct 13 11:17:05 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Georeferencing netCDF files
In-Reply-To: <471012A4.4020500@ualg.pt>
References: <18191.32913.164570.144596@mathind.csd.auth.gr>	<5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
	<471012A4.4020500@ualg.pt>
Message-ID: <4710E171.4080806@ualg.pt>

Joaquim Luis wrote:
> Hi,
>
> I don't understand what is the meaning of the "Georeferencing" on the 
> GDAL Raster Formats,
> in particular for the case of netCDF files (more interested in those 
> because I'm dealing with them now)
> In that table Georeferencing = yes for netCDF,  but if I convert a 
> geottif to netCDF the referencing
> information is not copied into the netCDF file.

Sorry,
I was wrong about the georeferencing info not being copied into the 
netCDF file.
What happened was that my example file was a geotiff rgb image so the 
conversion
created 3 SUBDATASETS and it is INSIDE each of them that we can find the 
referencing info.

This doesn't seam logic to me. Why is the georeferencing saved as 
attributes of the dataset and not
as global attributes (netCDF parlance)? The only good(?) reason that 
occurs to me is if different
datasets can have different reference systems. But does that make sense 
as well?

Having the referencing as a global attribute would facilitate the 
parsing and allow gdalinfo to
inform us on spatial reference system right from the basename of a 
multiband file instead of having to fish
it from its SUBDATASETS.

Joaquim Luis


From warmerdam at pobox.com  Sat Oct 13 13:14:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Georeferencing netCDF files
In-Reply-To: <4710E171.4080806@ualg.pt>
References: <18191.32913.164570.144596@mathind.csd.auth.gr>
	<5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
	<471012A4.4020500@ualg.pt> <4710E171.4080806@ualg.pt>
Message-ID: <4710FCF0.9040708@pobox.com>

Joaquim Luis wrote:
> This doesn't seam logic to me. Why is the georeferencing saved as 
> attributes of the dataset and not
> as global attributes (netCDF parlance)? The only good(?) reason that 
> occurs to me is if different
> datasets can have different reference systems. But does that make sense 
> as well?
> 
> Having the referencing as a global attribute would facilitate the 
> parsing and allow gdalinfo to
> inform us on spatial reference system right from the basename of a 
> multiband file instead of having to fish
> it from its SUBDATASETS.

Joaquim,

In the GDAL data model different datasets can have different coordinate
systems, so it seems natural to associate the coordinate system as
closely as possible to the dataset.

Generally speaking when you see the gdalinfo report of a file that contains
subdatasets and no data itself, the coordinate system, metadata, size and
other attributes should be ignored.  The dataset is just a "stub", existing
to list the actual subdatasets.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sat Oct 13 17:35:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <f3b73b7d0710131435l2e6c63f7xb964b5102a38077f@mail.gmail.com>

Frank,

It seems reasonable to me.

Are you planning to prepare an online form to be filled in by the sponsors?
I would also interested in such survey addressed to all the community
and see which parts of the project are mostly used and should be
maintained with a special care.

Best regards,

Tamas



2007/10/13, Frank Warmerdam <warmerdam@pobox.com>:
> PSC members,
>
> As part of the sponsorship program, we are committed to distributing a
> sponsor survey to all our sponsors with the intention that their responses
> would provide some guidance to our activities - at least as far as the focus
> of the paid maintainer.  I had really intended to get it out by mid-year,
> but like many things I do it slips...
>
> I have prepared a first draft at:
>
>    http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
>
> Any suggestions for other points that ought to be raised?  Other changes?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sat Oct 13 18:21:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <f3b73b7d0710131435l2e6c63f7xb964b5102a38077f@mail.gmail.com>
References: <471058C5.1070402@pobox.com>
	<f3b73b7d0710131435l2e6c63f7xb964b5102a38077f@mail.gmail.com>
Message-ID: <471144FA.4040009@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> It seems reasonable to me.
> 
> Are you planning to prepare an online form to be filled in by the sponsors?
> I would also interested in such survey addressed to all the community
> and see which parts of the project are mostly used and should be
> maintained with a special care.

Tamas,

I wasn't planning to prepare a form for submission.  I was just expecting an
email response.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Oct 13 20:23:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Motion: Grant commit access for Chrisopher Condit
Message-ID: <4711619C.40602@pobox.com>

Motion: Grant commit access for Chrisopher Condit.

---

Chris is author of the original KML writer in OGR, participated in the
code sprint, has an interest in Python bindings and might even possible
be interested in working on the Java bindings.  Chris has reviewed the
committer guidelines and is prepared to work within them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct 14 00:20:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] 
	OGR utilities moved to gdal/apps, plugin version checking
Message-ID: <4711990D.8030400@pobox.com>

Folks,

I have moved the ogr utilities from gdal/ogr to gdal/apps, along with the
gdal applications.  This is stuff like ogrinfo, ogr2ogr, and ogrtindex.
This was primarily done as part of ensuring the ogr utilities are "linked
normally" against the gdal shared library, and to simplify the number of
places with executable linking logic.

I did it now because a recent change added a dependency in OGR drivers on
stuff in gdal/gcore.  That is, GDAL and OGR drivers now do "version testing"
when a plugin is loaded in an attempt to reduce the changes of ABI changes
causing plugins to crash gdal/ogr applications.  See:

   http://trac.osgeo.org/gdal/changeset/12396

I have updated the normal win32, and unix makefiles accordingly and things
seem to build.  Let me know if you encounter problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sun Oct 14 04:21:50 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Motion: Grant commit access for Chrisopher Condit
In-Reply-To: <4711619C.40602@pobox.com>
References: <4711619C.40602@pobox.com>
Message-ID: <f3b73b7d0710140121j4e6c173do589e4d42f39793b1@mail.gmail.com>

+1

Best regards,

Tamas



2007/10/14, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: Grant commit access for Chrisopher Condit.
>
> ---
>
> Chris is author of the original KML writer in OGR, participated in the
> code sprint, has an interest in Python bindings and might even possible
> be interested in working on the Java bindings.  Chris has reviewed the
> committer guidelines and is prepared to work within them.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu.inc at gmail.com  Sun Oct 14 11:41:06 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Motion: Grant commit access for Chrisopher Condit
In-Reply-To: <4711619C.40602@pobox.com>
References: <4711619C.40602@pobox.com>
Message-ID: <5B290EC7-E3BA-4D72-9AB4-AD0241D05699@gmail.com>

+1

On Oct 13, 2007, at 7:23 PM, Frank Warmerdam wrote:

> Motion: Grant commit access for Chrisopher Condit.
>
> ---
>
> Chris is author of the original KML writer in OGR, participated in the
> code sprint, has an interest in Python bindings and might even  
> possible
> be interested in working on the Java bindings.  Chris has reviewed the
> committer guidelines and is prepared to work within them.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From maplabs at light42.com  Sun Oct 14 14:11:36 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] new machine - which OS?
Message-ID: <E6E911D4-7A80-11DC-ABA3-000A277A733C@light42.com>

    Emphasis on vector data (the aim is to have a TIGER import at 
least). Development machine, mid-range graphics card, mid-range CPU, 
lots of RAM and disk... low-volume web services

   HostGIS slackware Linux?
   PC-BSD ?
   Ubuntu ?

Opinions welcome


From maplabs at light42.com  Mon Oct 15 03:01:35 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] new machine - which OS?
In-Reply-To: <E6E911D4-7A80-11DC-ABA3-000A277A733C@light42.com>
References: <E6E911D4-7A80-11DC-ABA3-000A277A733C@light42.com>
Message-ID: <779D286D-7AEC-11DC-ABA3-000A277A733C@light42.com>

>
> Opinions welcome
>
> _

How about .. email me off list and I can summarize...


From anakreonmejdi at yahoo.gr  Mon Oct 15 05:47:52 2007
From: anakreonmejdi at yahoo.gr (anakreonmejdi@yahoo.gr)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Beginners question. How to fetch longtitude,
	latitude coordinates
In-Reply-To: <5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
References: <18191.32913.164570.144596@mathind.csd.auth.gr>
	<5383fa5e0710121039p502d53d6s87d445249eb8fd83@mail.gmail.com>
Message-ID: <18195.14152.970447.640267@mathind.csd.auth.gr>

Matthew Perry writes:
 > This page might be of some help,
 > 
 > http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData
 > 
 > - matt
Thanks for your reply Matthew.

I managed to fetch data from mysql database.
The problem is how to configure the layer.

The sql statement fetches the name of the site, latitude (degree, min, sec),
longtitude (degree, min, sec).

In total, there are 7 columns fetched. I want to display the name of the site
on the map, and the coordinates taken from the remaining 6 columns.

The configuration of the layer so far (taken from varius examples on the web)
is:
LAYER
  NAME "sites"
  TYPE POINT
  STATUS ON
  CONNECTIONTYPE OGR
  CONNECTION "MYSQL:db,user=user,password="
  DATA "select site_name, c1.cord_deg as c1deg, c1.cord_min as c1min, c1.cord_sec as c1sec,
c2.cord_deg as c2deg, c2.cord_min as c2min, c2.cord_sec as c2sec
from site
inner join coordinate as c1 on c1.coordinate_id = site.coordinate_first
inner join coordinate as c2 on c2.coordinate_id = site.coordinate_second"

    LABELITEM site_name #may need to use table.name or just name depending on your OVF file.
    PROJECTION
      "init=epsg:4326"
    END
    CLASS
      SYMBOL 1
      SIZE 6
      COLOR 255 0 0
      LABEL
	SIZE MEDIUM
	TYPE BITMAP
	COLOR 0 0 0
      END
    END
END


This does not work.
The error message is:
Warning:  [MapServer Error]: msQueryByPoint(): No matching record(s) found.


From mateusz at loskot.net  Mon Oct 15 09:34:58 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: [postgis-users] OGR2OGR conversion from PostGIS to
	MapInfo issue
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC18A@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC18A@ZDND.DND.boston.cob>
Message-ID: <47136C82.2000302@loskot.net>

Obe, Regina wrote:
> I apologize for this cross-posting, but wasn't quite sure which list
> would be best.

Regina,

I believe the best list is the official mailing list of GDAL project:
gdal-dev@lists.maptools.org

> I converted a query from PostGIS to MapInfo for one of our GIS
> specialists here, and apparently all the fields came out as varchar(254)
> and when they try to resave the file in MapInfo - it doesn't allow them
> to (I forget the error).  Aside from that, reading the file seems fine
> and you can see the features.  If I do the same but to shape format,
> then the fields have the correct field sizes and everything.
>  
> Is there something I am doing wrong here or is this just a limitation of
> the Ogr Mapinfo driver?

varchar(256) is a default width of string field in MapInfo format,
if not specified explicitly (http://www.gdal.org/ogr/drv_mitab.html)

I made a short test and it shows that columns are differently
recognized for layer based on SQL query than layer based on a table:

1. Reading point table as a layer determines wiedth of columns:

mloskot@dog:~/dev/gdal/_svn/trunk/gdal$ ogr/ogrinfo -ro PG:dbname=test
point -so
INFO: Open of `PG:dbname=test'
      using driver `PostgreSQL' successful.

Layer name: point
Geometry: Point
Feature Count: 53
Extent: (11.660233, 48.320915) - (21.675484, 53.763435)
Layer SRS WKT:
(unknown)
Geometry Column = the_geom
altitude: String (6.0)
gid: Integer (0.0)
lat: String (12.0)
lon: String (12.0)
longname: String (17.0)
name: String (17.0)
recnum: String (6.0)


2. If layer is based on SQL query, no details about columns width is given:

mloskot@dog:~/dev/gdal/_svn/trunk/gdal$ ogr/ogrinfo -ro PG:dbname=test
-sql "SELECT gid,name,recnum FROM point" -so
INFO: Open of `PG:dbname=test'
      using driver `PostgreSQL' successful.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 53
Layer SRS WKT:
(unknown)
gid: Integer (0.0)
name: String (0.0)
recnum: String (0.0)
mloskot@dog:~/dev/gdal/_svn/trunk/gdal$


In case 2., default value (254) is used, that's why you get varchar(254).

I'd recognize it as correct and expected behavior of OGR,
although a little strange or even surprising :-)


p.s. I added gdal-dev@lists.maptools.org to CC

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dmorissette at mapgears.com  Mon Oct 15 10:04:45 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:05 2007
Subject: =?UTF-8?B?UmU6IFtHZGFsLWRldl0gTW90aW9uOiBDb21taXR0ZXIgU3RhdHVzIGY=?=
	=?UTF-8?B?b3IgUGV0ciBQxZlpZGFsIChLbG9rYW4p?=
In-Reply-To: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
References: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
Message-ID: <4713737D.2080501@mapgears.com>

+1

Daniel


Howard Butler wrote:
> All,
> 
> I motion to extend committer status to Petr P?idal (Klokan).
> 
> -- 
> 
> Petr was part of the Google Summer of Code in 2007 and worked on the 
> gdal2tiles.py utility.  His SoC project was an excellent addition, and 
> his experience with the raster side of KML has and should continue to be 
> valuable to GDAL's development efforts.  Commit access will allow him to 
> continue to improve and maintain gdal2tiles without me clogging up the 
> works as we ready the GDAL 1.5 release.  Assuming he agrees to RFC 3, I 
> propose that we provide Petr commit access.
> 
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Mon Oct 15 10:05:05 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Motion: Grant commit access for Chrisopher Condit
In-Reply-To: <4711619C.40602@pobox.com>
References: <4711619C.40602@pobox.com>
Message-ID: <47137391.7040907@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Motion: Grant commit access for Chrisopher Condit.
> 
> ---
> 
> Chris is author of the original KML writer in OGR, participated in the
> code sprint, has an interest in Python bindings and might even possible
> be interested in working on the Java bindings.  Chris has reviewed the
> committer guidelines and is prepared to work within them.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Mon Oct 15 10:30:31 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: [postgis-users] OGR2OGR conversion from PostGIS to
	MapInfo issue
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC2E3@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC18A@ZDND.DND.boston.cob>	<47136C82.2000302@loskot.net>
	<53F9CF533E1AA14EA1F8C5C08ABC08D2029DC2E3@ZDND.DND.boston.cob>
Message-ID: <47137987.5080808@loskot.net>

Obe, Regina wrote:
> Thanks Mateusz,
> 
> I'll give it a try to output the table instead.  Do you think a view
> would work instead of a table?  My problem is I don't want to output all
> the fields in my table since I have excess stuff they don't need.

Regina,

Yes, the view will work as it's visible for OGR as a regular table.
Actually, I've forgot this idea about using view.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 15 10:35:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Re: [postgis-users] OGR2OGR conversion from PostGIS to
	MapInfo issue
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC2E3@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D2029DC18A@ZDND.DND.boston.cob>	<47136C82.2000302@loskot.net>
	<53F9CF533E1AA14EA1F8C5C08ABC08D2029DC2E3@ZDND.DND.boston.cob>
Message-ID: <47137AA9.4070007@loskot.net>

Obe, Regina wrote:
> Thanks Mateusz,
> 
> I tried using a view and that seemed to work and the fields now have the
> right length and I can resave the file in mapinfo.  The only trick was
> that I had to manually insert an entry for my view into the
> geometry_columns table for it to work.

Regina,

Yes, unfortunately I don't see any shortcut for that.

> My final command shell call looks like this
> 
> ogr2ogr -f "MapInfo File" -a_srs "EPSG:2249" update PG:"host=zdnd1
> dbname=dnddts" "UPDATE" vwupdate -nln "UPDATE"

BTW, UPDATE is a reserved keyword in SQL standards, fortunately it's
not considered as reserved in PostgreSQL, but sometimes (using different
versions, moving data between DBMS, etc.) you may encounter problems.

http://www.postgresql.org/docs/8.2/interactive/sql-keywords-appendix.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 15 11:10:32 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Using SVN branches
Message-ID: <471382E8.70208@loskot.net>

Folks,

I'm forwarding an interesting overview about principles of using SVN
branches in development. This document is from QGIS Wiki:

http://wiki.qgis.org/qgiswiki/DevelopmentInBranches

I think it may be useful in our discussions about SVN branches
pros and cons.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Mon Oct 15 12:39:17 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
In-Reply-To: <470E50A5.5050608@atmos.washington.edu>
References: <470E50A5.5050608@atmos.washington.edu>
Message-ID: <20071015163917.GA26259@ak4719.spb.edu>

On Thu, Oct 11, 2007 at 09:34:45AM -0700, Jan Cermak wrote:
> From a MODIS MYD021km file I am trying to read band data including 
> offset and scaling factors. Band data works just fine, but I can't get 
> offset and scale. Without offset and scale the data is completely 
> useless, so this seems to be a major issue to me.

Jan,

There is no immediate answer on your problem, but that is not means that
it was missed. I am working on solution, but it is not trivial, so no
sucsessfull report yet.


Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From sanjay_ieee at yahoo.com  Mon Oct 15 12:53:07 2007
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Virtual FilesystemHandler???
Message-ID: <501993.75910.qm@web52911.mail.re2.yahoo.com>

Hi All,
         I have just started using GDAL lib for image reading and writing purpose only. Right now i have the images located on the local machine and i'm trying to extend the GDAL usage over the remotely located images on the network. But i have a filesystemHandler (different from win32) which i need to use to go thru to access the remote image data.

I have read the Virtual Filesystemhandler  which supports  run time install  of different filesystemhandlers and was able to hook a new file system class(using the win32 default file handle)  by experimenting with the source. If anyone on the group can direct me to some more information or sample implementations, (hooking new filesystem , other than /vsimem/ I.E. memhandle) that would make this new filesystem hooking process less error-prone, i would really appreciate the guidance.

Thank you

Sanjay


"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071015/f065989b/attachment.html
From dron at ak4719.spb.edu  Mon Oct 15 13:00:06 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <20071015170006.GA26409@ak4719.spb.edu>

On Sat, Oct 13, 2007 at 01:33:57AM -0400, Frank Warmerdam wrote:
> As part of the sponsorship program, we are committed to distributing a
> sponsor survey to all our sponsors with the intention that their responses
> would provide some guidance to our activities - at least as far as the focus
> of the paid maintainer.  I had really intended to get it out by mid-year,
> but like many things I do it slips...
> 
> I have prepared a first draft at:
> 
>   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
> 
> Any suggestions for other points that ought to be raised?  Other changes?

Frank,

I have two thoughts on that.

1. I think that the first question ("Which aspect of GDAL/OGR is more
important to your organization? The GDAL (raster) services, or the OGR
(vector/feature) services, or are both important?") should be removed,
because it is pointless. If most sponsors do not interested in GDAL,
does it mean we should drop it? No way. Don't they interested in OGR? We
should continue OGR. So I do not see a point in the first question.

2. The eight question ("Is support for non-English languages within
GDAL/OGR important to your organization?") should be reworded as :

"Is international and localized support in GDAL/OGR important to your
organization?"

I am +1 for other questions in the survey.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Oct 15 13:03:52 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Motion: =?utf-8?Q?Committer?=
	=?utf-8?Q?_Status_for_Petr_P=C5=99idal?= (Klokan)
In-Reply-To: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
References: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
Message-ID: <20071015170352.GA26572@ak4719.spb.edu>

On Thu, Oct 11, 2007 at 11:09:36AM -0500, Howard Butler wrote:
> I motion to extend committer status to Petr P?idal (Klokan).
> 
> --
> 
> Petr was part of the Google Summer of Code in 2007 and worked on the
> gdal2tiles.py utility.  His SoC project was an excellent addition,
> and his experience with the raster side of KML has and should
> continue to be valuable to GDAL's development efforts.  Commit access
> will allow him to continue to improve and maintain gdal2tiles without
> me clogging up the works as we ready the GDAL 1.5 release.  Assuming
> he agrees to RFC 3, I propose that we provide Petr commit access.

+1 for Petr,

Best regrds,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From Chris.Barker at noaa.gov  Mon Oct 15 13:30:12 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
Message-ID: <4713A3A4.1050409@noaa.gov>

My thoughts on Python Bindings Building/installing:

William Kyngesburye wrote:
> As I worked on some OSX framework build issues,

NOTE: Thanks so much for working on this!!

> - After configuring to build ng-python, make doesn't build *any* python 
> bindings. 

> BUT, install does - the 
> install-actions target runs a make install in the swig dir, which ends 
> up building ng-python.

hmmm -- since you can define in configure whether or not you want the 
bindings, I think "make" should build them. Does make call distutils? If 
so, how does it determine which python to call it with?

> - ng-python installs in $prefix.  This ends up being installed 
> where-ever GDAL is installed, in the subdir thereof specified in the 
> python distutils (something like lib/python2.5/site-packages).

I'm confused now -- are they getting installed where GDAL is installed? 
or in site-packages? Anyway, they should get installed in site-packages.

> Shouldn't it be left completely up to distutils so it gets 
> installed in the default python site-packages dir?

Yes.

However, there are two things that get installed:

- The base gdal shared libs themselves
- The python extensions (and python code)

Which are we talking about here?

Anyway, I think the base gdal shared libs should bet installed in a 
"global" location -- on OS-X that would be in Library/Frameworks, and on 
other *nix , in /usr/local/lib (I think).

Howard Butler wrote:
> with the ng bindings, the situation is 
> more inconsistent than that:
> 
> -- If setuptools is installed, use that to build and do "install --root 
> / --single-version-externally-managed".  By default this means an egg 
> file gets put in your Python path (typically site-packages)

Sounds OK.

> -- If setuptools is not installed, install in --prefix as before.

This, I think, should put it in site-packages, like the usual setup.py 
install.

> There are so many different ways to skin this cat now 

Well, yes, but the python world has pretty much two standards now -- 
basic distutils, and setuptools, and, for the most part, people are 
making those two behave similarly -- that's what we should do. (OK, you 
-- I haven't figure out setuptools yet!)

> I think putting stuff in --prefix by default is 
> confusing for most folks, but installing stuff in the root of your 
> Python install isn't too friendly either...

But it is standard behavior. At some point, Apple had set up their 
Python with site-packages outside of the system dirs (maybe in /Library, 
rather than /System/Library), with a soft link into the system Python -- 
this was the "right" thing to do, I think, but it doesn't seem to be 
standard behavior on any other *nix system (and I'm not sure Apple is 
doing it either -- I haven't used Apples python for ages). Anyway, right 
or not, it's up to the distributer of Python to set up -- distutils is 
supposed to put things wherever the python it is run with says it 
should, so we should follow that standard.

> As things are currently defined, setuptools is used *by default* if 
> configure or setup.py determines that it is available. Regular distutils 
> is then used if setuptools isn't available.

sounds good.

> I would hate to *require* setuptools.

Yes, we probably shouldn't -- *sigh* maybe it will make it into the 
standard lib some day....

> Our default 
> install: targets basically install the bindings the same way regardless 
> of whether or not setuptools is available, 

That's probably good.

> My opinions:
> -- I really like setuptools for the 'develop' target and even for eggs 
> now that we use them on the osx buildbot slave (everything is 
> self-contained and it doesn't end up polluting the rest of my machine 
> with new and possibly broken bindings and we don't have to do sys.path 
> hacking). I can see providing the ng bindings as eggs for windows, for 
> example.

I agree -- that is most of the point of eggs after all!

> -- './configure --with-python;make;make install' needs to do the most 
> straightforward thing for Python users

yup.

> (we need to define what that is, 
> and it is my opinion that installing in --prefix *isn't* it).

no, it's not!

I think I've outlined my opinion about what it is above.


> Someone 
> wanting to do fancier stuff should have to run setup.py themselves.

yup.

One more question though: How does configure figure out which python to 
use? should there be a configure option to choose your python? could you 
choose more than one? and have it build them all?

-Chris

> PS.  This discussion reminded me of the best feature of the ng bindings 
> in the upcoming 1.5 release... docs!  I figured out a way to incorporate 
> the doxygen docs into docstrings as part of the swig generation.  pydoc 
> away... :)

cool!


By the way -- William, how are you building the Frameworks?

Is there a configure option ( --framework or something) that tells make 
to build them?

Is a Framework build the default on OS-X? Should it be?

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Mon Oct 15 14:12:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <20071015170006.GA26409@ak4719.spb.edu>
References: <471058C5.1070402@pobox.com>
	<20071015170006.GA26409@ak4719.spb.edu>
Message-ID: <4713AD99.1080404@pobox.com>

Andrey Kiselev wrote:
> I have two thoughts on that.
> 
> 1. I think that the first question ("Which aspect of GDAL/OGR is more
> important to your organization? The GDAL (raster) services, or the OGR
> (vector/feature) services, or are both important?") should be removed,
> because it is pointless. If most sponsors do not interested in GDAL,
> does it mean we should drop it? No way. Don't they interested in OGR? We
> should continue OGR. So I do not see a point in the first question.

Andrey,

If we find that essentially all sponsor interest is with GDAL (or with
OGR) I think it would provide guidance on where we would focus our
(sponsored) maintenance efforts.  I can't think of any question in the
survey that would result in our dropping an aspect of GDAL/OGR.  Instead
the objective is to know where most sponsor interest is, so we can try
and do a good/better job in those areas.

Partly I have included this question because one sponsor privately wanted
to make it clear they were only interested in supporting GDAL, not OGR.

> 2. The eight question ("Is support for non-English languages within
> GDAL/OGR important to your organization?") should be reworded as :
> 
> "Is international and localized support in GDAL/OGR important to your
> organization?"

I have reworded the whole thing as:

"""
8. Is international and localized support in GDAL/OGR important to your 
organization? (ie. multi-byte characters in filenames, features attributes, 
metadata)? (not at all important, somewhat important, very important) If so, 
what particular aspects are important?
"""

I wanted to ask seperately about non-C locale issues, and multibyte
characters but I found the question getting very technical.  So I backed
off to "non english" with an example, but I didn't really like that either
so I'm happy to have better text.

> I am +1 for other questions in the survey.
> 
> Best regards,
> Andrey
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Oct 15 15:28:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Virtual FilesystemHandler???
In-Reply-To: <501993.75910.qm@web52911.mail.re2.yahoo.com>
References: <501993.75910.qm@web52911.mail.re2.yahoo.com>
Message-ID: <4713BF60.7000409@pobox.com>

sanjay boddhu wrote:
> Hi All,
>          I have just started using GDAL lib for image reading and 
> writing purpose only. Right now i have the images located on the local 
> machine and i'm trying to extend the GDAL usage over the remotely 
> located images on the network. But i have a filesystemHandler (different 
> from win32) which i need to use to go thru to access the remote image data.
> 
> I have read the Virtual Filesystemhandler  which supports  run time 
> install  of different filesystemhandlers and was able to hook a new file 
> system class(using the win32 default file handle)  by experimenting with 
> the source. If anyone on the group can direct me to some more 
> information or sample implementations, (hooking new filesystem , other 
> than /vsimem/ I.E. memhandle) that would make this new filesystem 
> hooking process less error-prone, i would really appreciate the guidance.

Sanjay,

There is no tutorial on writing virtual filesystem handler stuff.  The
"real" and "/vsimem/" file systems are the best examples to look at.  The
patches implement access to stuff in zip files might also be of interest
(in http://trac.osgeo.org/gdal/ticket/1369)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dany.geotools at gmail.com  Mon Oct 15 16:00:40 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
Message-ID: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>

Hi list,
I have just a simple question for you.

I would like to test all the powerful drivers which are capable of handle
Jpeg2000 format.
I noticed that GDAL provides a wide set of JP2 drivers:

JP2KAK
JP2ECW
JP2MrSID

I already successfully tested the JP2KAK and the JP2ECW (by setting
GDAL_SKIP = JP2KAK) drivers.
Now I'm attempting to work with the JP2MrSID driver but I dont know how to
get it. I set GDAL_SKIP = JP2KAK JP2ECW (space separated list) but calling
"gdalinfo --formats" don't display JP2MrSID somewhere (only the simple
"MrSID" appears).

Do I need to properly configure NMAKE.opt in some manner? (I already enabled
MrSID support)
Or JP2MrSID is just a symbolic name to say that MrSID driver also allows
reading JP2 files? (Although JP2ECW and ECW appear separately)

Thank you very much for your help.

Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071015/df0e5903/attachment.html
From dmorissette at mapgears.com  Mon Oct 15 16:11:25 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <4713C96D.5080207@mapgears.com>

Frank Warmerdam wrote:
> 
> I have prepared a first draft at:
> 
>   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
> 
> Any suggestions for other points that ought to be raised?  Other changes?
> 

Looks great.

I was trying to think of other info that could be useful and the only 
thing I could think of was to perhaps include a question relating to 
integration of GDAL/OGR with other open source packages, e.g.

"Do you use GDAL/OGR in combination with other open source applications 
or libraries from the OSGeo stack and if yes which ones. Are there any 
aspects of integration between GDAL/OGR and those applications or 
libraries that you would like to see improved? Which ones?"

I was not able to word the question to be straight to the point, but 
hopefully you get the idea. The goal would be to find out whether there 
are issues with other OSGeo packages (either lib dependencies such as 
PROJ, or apps that use GDAL/OGR such as MapServer) that are a priority 
for them.

Just thinking out loud...

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From schwehr at ccom.unh.edu  Mon Oct 15 16:24:32 2007
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] jasper for very large jpeg 2000 images
In-Reply-To: <200710152002.l9FK2b1o029528@duke.maptools.org>
References: <200710152002.l9FK2b1o029528@duke.maptools.org>
Message-ID: <4713CC80.7070900@ccom.unh.edu>

Hi All,

Is there a way to allow very large images to make it through the 
drivers?  I'm trying to convert HiRise images from Mars without luck.  
For example trying to subset a quicklook image

gdal_translate -of PNG -srcwin 10 10 1000 1000 
PSP_005372_1515_RED.QLOOK.JP2 foo.png
Input file size is 32369, 95295
error: cannot decode code stream
gdal_translate(22843) malloc: *** vm_allocate(size=3084607488) failed 
(error code=3)
gdal_translate(22843) malloc: *** error: can't allocate region
gdal_translate(22843) malloc: *** set a breakpoint in szone_error to debug
ERROR 2: Internalize failed
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
libpng error: No IDATs written into file
Abort trap

I'm guessing that this is an architectural issue with gdal?

Thanks,
-kurt


From SimonH at geobiz.co.nz  Mon Oct 15 16:28:20 2007
From: SimonH at geobiz.co.nz (Simon Hope)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] import _gdal issue
In-Reply-To: <000001c80ace$894a7c80$0201a8c0@GEOBIZ.local>
References: <46036752327F654C9232690517E537C30E4A2F@server.GEOBIZ.local><20071009223343.GA18312@metacarta.com>
	<000001c80ace$894a7c80$0201a8c0@GEOBIZ.local>
Message-ID: <46036752327F654C9232690517E537C30E4AFD@server.GEOBIZ.local>

Chris('s),

Cheers for your help - I got feature server to read the shapefile once I
rebooted the machine which seemed to help Apache see the python path.

Cheers

Simon

-----Original Message-----
From: Christopher Barker [mailto:Chris.Barker@noaa.gov] 
Sent: Wednesday, 10 October 2007 12:46 p.m.
To: Christopher Schmidt
Cc: gdal-dev@lists.maptools.org; Simon Hope
Subject: Re: [Gdal-dev] import _gdal issue

Christopher Schmidt wrote:
> On Wed, Oct 10, 2007 at 10:22:25AM +1300, Simon Hope wrote:
>>>>> import _gdal
>> And don't get any errors and have access to the members on that
module.
> 
> Pythonwin is probably using a different PYTHONPATH than apache is.
> Somewhere in that path _gdal is probably included. Others can probably
> comment more directly, but I would do something like:
> 
> import _gdal
> print _gdal
> 
> Which should give output like <module 'gdal' from
> 'C:\SomethingOrOther\gdal.dll'> or something similar.
> 
> Once you've done that, you should be able to add the following to the
> FeatureServer cgi:
> 
> sys.path.append("C:\SomethingOrOther")

It's worth a try, but something is odd. From that traceback:

   File "C:\Program Files\Apache Software
Foundation\Apache2.2\htdocs\featureserver\FeatureServer\DataSource\OGR.p
y", line 2, in ?
     import ogr, osr
   File "C:\Python24\Lib\site-packages\ogr.py", line 33, in ?
     import _gdal

so it looks like ogr.py was found, but _gdal.pyd was not. They should 
both be in site_packages.

Take a look at C:\Python24\Lib\site-packages, and see what's there. 
there should be something like:


ogr.py
ogr.pyc
osr.py
osr.pyc
_gdal.pyd
gdal.py
gdal.pyc
gdalconst.py
gdalconst.pyc
gdalnumeric.py
gdalnumeric.pyc


in other words, _gdal.pyd should be in the same place as ogr.py, and 
therefor importable.

By the way in future next releases this should be a bit cleaned up -- 
with eveything in site_packages/osgeo/

Hopefully these problems will be easier to solve then.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev






From warmerdam at pobox.com  Mon Oct 15 17:15:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <4713C96D.5080207@mapgears.com>
References: <471058C5.1070402@pobox.com> <4713C96D.5080207@mapgears.com>
Message-ID: <4713D864.1060007@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>>
>> I have prepared a first draft at:
>>
>>   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
>>
>> Any suggestions for other points that ought to be raised?  Other changes?
>>
> 
> Looks great.
> 
> I was trying to think of other info that could be useful and the only 
> thing I could think of was to perhaps include a question relating to 
> integration of GDAL/OGR with other open source packages, e.g.
> 
> "Do you use GDAL/OGR in combination with other open source applications 
> or libraries from the OSGeo stack and if yes which ones. Are there any 
> aspects of integration between GDAL/OGR and those applications or 
> libraries that you would like to see improved? Which ones?"
> 
> I was not able to word the question to be straight to the point, but 
> hopefully you get the idea. The goal would be to find out whether there 
> are issues with other OSGeo packages (either lib dependencies such as 
> PROJ, or apps that use GDAL/OGR such as MapServer) that are a priority 
> for them.

Daniel,

Good question!  I have incorporated it without the specific OSGeo aspect,
and added a few examples.

"""
9. Do you use GDAL/OGR in combination with other open source applications
or libraries (eg. MapServer, MapGuide, GRASS) and if yes which ones. Are
there any aspects of integration between GDAL/OGR and those applications
or libraries that you would like to see improved? Which ones?
"""

A question on the MapServer list a couple minutes ago reminded me that
I also wanted to ask about whether folks things we should be investing
a lot of time in performance tuning, so I added:

"""
10. Is improving the performance of GDAL/OGR important to your organization? 
(not at all important, somewhat important, very important) Are their particular 
code paths you would like to see optimized?
"""

I can already foresee that some respondents will answer "very important" to
everything.  Perhaps next year we will take the approach of asking respondants
to apportion 100 "importance points" amoung the various "how important"
questions to make them really think about priorities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Oct 15 17:24:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] jasper for very large jpeg 2000 images
In-Reply-To: <4713CC80.7070900@ccom.unh.edu>
References: <200710152002.l9FK2b1o029528@duke.maptools.org>
	<4713CC80.7070900@ccom.unh.edu>
Message-ID: <4713DA7A.5000805@pobox.com>

Kurt Schwehr wrote:
> Hi All,
> 
> Is there a way to allow very large images to make it through the 
> drivers?  I'm trying to convert HiRise images from Mars without luck.  
> For example trying to subset a quicklook image
> 
> gdal_translate -of PNG -srcwin 10 10 1000 1000 
> PSP_005372_1515_RED.QLOOK.JP2 foo.png
> Input file size is 32369, 95295
> error: cannot decode code stream
> gdal_translate(22843) malloc: *** vm_allocate(size=3084607488) failed 
> (error code=3)
> gdal_translate(22843) malloc: *** error: can't allocate region
> gdal_translate(22843) malloc: *** set a breakpoint in szone_error to debug
> ERROR 2: Internalize failed
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> libpng error: No IDATs written into file
> Abort trap
> 
> I'm guessing that this is an architectural issue with gdal?

Kurt,

I believe this is an architectural problem with *JasPer* which takes
a "decode the whole image" approach designed for consumer camera style
images, not geospatial mosaics.

This is why for most purposes I encourage people to use one of the
other JPEG2000 drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Mon Oct 15 17:06:55 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <4713D864.1060007@pobox.com>
References: <471058C5.1070402@pobox.com> <4713C96D.5080207@mapgears.com>
	<4713D864.1060007@pobox.com>
Message-ID: <4713D66F.4020109@mapgears.com>

Frank Warmerdam wrote:
> 
> I can already foresee that some respondents will answer "very important" to
> everything.  Perhaps next year we will take the approach of asking 
> respondants
> to apportion 100 "importance points" amoung the various "how important"
> questions to make them really think about priorities.
> 

I thought about this possible issue as well. Maybe we should introduce 
the "importance points" system this year?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From woklist at kyngchaos.com  Mon Oct 15 17:29:23 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <4713A3A4.1050409@noaa.gov>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
	<4713A3A4.1050409@noaa.gov>
Message-ID: <167E91B4-BC9E-414A-91B2-25C02532D0EA@kyngchaos.com>

On Oct 15, 2007, at 12:30 PM, Christopher Barker wrote:

>> - ng-python installs in $prefix.  This ends up being installed  
>> where-ever GDAL is installed, in the subdir thereof specified in  
>> the python distutils (something like lib/python2.5/site-packages).
>
> I'm confused now -- are they getting installed where GDAL is  
> installed? or in site-packages? Anyway, they should get installed  
> in site-packages.
>
by subdir of python specified in distutils, I mean whatever distutils  
uses by default but as a subdir of the gdal prefix.  So for the OSX  
framework that ends up being:

/Library/Frameworks/GDAL.framework/Versions/1.5/lib/python2.5/site- 
packages


>> -- If setuptools is not installed, install in --prefix as before.
>
> This, I think, should put it in site-packages, like the usual  
> setup.py install.
>
Actually, it's the --prefix that's putting it in the GDAL prefix.  If  
you want distutils to put it in the default python site-packages  
(where the old bindings are installed, and where setuptools installs  
it), no prefix is needed.


> By the way -- William, how are you building the Frameworks?
>
I was using a custom Xcode project, despite the framework option  
below I worked out.  I'm hoping to use the framework option in the  
future (I should ;) when some kinks are worked out.

> Is there a configure option ( --framework or something) that tells  
> make to build them?
>
> Is a Framework build the default on OS-X? Should it be?

Yes, a framework build option was added for v1.4.  It broke for 1.5  
due to libtool changes.  I was able to fix that and Frank applied it  
to SVN this morning, but there is still a problem linking that to the  
ngpython build.  Fixing that may require more fundamental changes in  
libtool configuration (if even possible), but it would also simplify  
the framework build as a whole.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro



From Chris.Barker at noaa.gov  Mon Oct 15 18:04:28 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <167E91B4-BC9E-414A-91B2-25C02532D0EA@kyngchaos.com>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
	<4713A3A4.1050409@noaa.gov>
	<167E91B4-BC9E-414A-91B2-25C02532D0EA@kyngchaos.com>
Message-ID: <4713E3EC.2040702@noaa.gov>

William Kyngesburye wrote:
> by subdir of python specified in distutils, I mean whatever distutils 
> uses by default but as a subdir of the gdal prefix.  So for the OSX 
> framework that ends up being:
> 
> /Library/Frameworks/GDAL.framework/Versions/1.5/lib/python2.5/site-packages

I can't see that that should ever be the place to put python bindings.

> Actually, it's the --prefix that's putting it in the GDAL prefix.

hmm. My first thought is that the python bindings should ignore 
"--prefix". I suppose, if anyone wanted it, you could have a 
"--python-prefix", but I think that should really be a distutils option, 
not one specific to gdal -- in short: python bindings should be 
installed where python bindings belong.

> If 
> you want distutils to put it in the default python site-packages (where 
> the old bindings are installed, and where setuptools installs it), no 
> prefix is needed.

right, but what if you want the gdal libs themselves somewhere other 
than standard, but the python bindings installed properly in python.

> I was using a custom Xcode project, despite the framework option below I 
> worked out.  I'm hoping to use the framework option in the future (I 
> should ;) when some kinks are worked out.

OK. I just ran configure with "--with-macosx-framework", but maybe I'll 
wait to let you sort it out, because:

> Fixing that may require more fundamental changes in libtool 
> configuration

I know NOTHING about libtool!

> (if even possible), but it would also simplify the 
> framework build as a whole.

That would be nice, once it works.

Thanks for all your work on this,

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From schwehr at ccom.unh.edu  Mon Oct 15 18:09:08 2007
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] jasper for very large jpeg 2000 images
In-Reply-To: <4713DA7A.5000805@pobox.com>
References: <200710152002.l9FK2b1o029528@duke.maptools.org>
	<4713CC80.7070900@ccom.unh.edu> <4713DA7A.5000805@pobox.com>
Message-ID: <4713E504.6060302@ccom.unh.edu>

Hi Frank,

Thanks for the quick feedback.  Looks like all the other drivers are 
restricted licenses that won't work with fink or windows only.  I'll put 
in jasper into the fink gdal build just to have something in there for 
people with smaller images.

Thanks,
-Kurt

> Kurt Schwehr wrote:
>> Hi All,
>>
>> Is there a way to allow very large images to make it through the 
>> drivers?  I'm trying to convert HiRise images from Mars without 
>> luck.  For example trying to subset a quicklook image
>>
>> gdal_translate -of PNG -srcwin 10 10 1000 1000 
>> PSP_005372_1515_RED.QLOOK.JP2 foo.png
>> Input file size is 32369, 95295
>> error: cannot decode code stream
>> gdal_translate(22843) malloc: *** vm_allocate(size=3084607488) failed 
>> (error code=3)
>> gdal_translate(22843) malloc: *** error: can't allocate region
>> gdal_translate(22843) malloc: *** set a breakpoint in szone_error to 
>> debug
>> ERROR 2: Internalize failed
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>> libpng error: No IDATs written into file
>> Abort trap
>>
>> I'm guessing that this is an architectural issue with gdal?
>
> Kurt,
>
> I believe this is an architectural problem with *JasPer* which takes
> a "decode the whole image" approach designed for consumer camera style
> images, not geospatial mosaics.
>
> This is why for most purposes I encourage people to use one of the
> other JPEG2000 drivers.
>
> Best regards,


-- 
UNH - Assist. Research Professor
JPL - SSV / Phoenix team
kurt@ccom.unh.edu
http://vislab-ccom.unh.edu/~schwehr/
http://schwehr.org/


From woklist at kyngchaos.com  Mon Oct 15 18:55:37 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <4713E3EC.2040702@noaa.gov>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
	<4713A3A4.1050409@noaa.gov>
	<167E91B4-BC9E-414A-91B2-25C02532D0EA@kyngchaos.com>
	<4713E3EC.2040702@noaa.gov>
Message-ID: <28FCE7E2-E7CF-4364-B41F-CDCBCBA4F39A@kyngchaos.com>

On Oct 15, 2007, at 5:04 PM, Christopher Barker wrote:

>> Actually, it's the --prefix that's putting it in the GDAL prefix.
>
> hmm. My first thought is that the python bindings should ignore "-- 
> prefix". I suppose, if anyone wanted it, you could have a "--python- 
> prefix", but I think that should really be a distutils option, not  
> one specific to gdal -- in short: python bindings should be  
> installed where python bindings belong.
>
This is a different --prefix from the GDAL configure.  This one is  
for setup.py, and is set to the same as the GDAL configured prefix.   
In swig/python/gnumakefile:

python setup.py install --prefix=$(DESTDIR)$(prefix)


>> I was using a custom Xcode project, despite the framework option  
>> below I worked out.  I'm hoping to use the framework option in the  
>> future (I should ;) when some kinks are worked out.
>
> OK. I just ran configure with "--with-macosx-framework", but maybe  
> I'll wait to let you sort it out, because:
>
I have a test build online now.  It installs the framework alongside  
the 1.4 framework, so it doesn't break existing software.  It doesn't  
install the python stuff so you can keep using the old python  
bindings, but you can set sys.path to use the new bindings (see the  
readme).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From warmerdam at pobox.com  Mon Oct 15 19:30:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
In-Reply-To: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
References: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
Message-ID: <4713F827.6060105@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> I have just a simple question for you.
> 
> I would like to test all the powerful drivers which are capable of 
> handle Jpeg2000 format.
> I noticed that GDAL provides a wide set of JP2 drivers:
> 
> JP2KAK
> JP2ECW
> JP2MrSID
> 
> I already successfully tested the JP2KAK and the JP2ECW (by setting 
> GDAL_SKIP = JP2KAK) drivers.
> Now I'm attempting to work with the JP2MrSID driver but I dont know how 
> to get it. I set GDAL_SKIP = JP2KAK JP2ECW (space separated list) but 
> calling "gdalinfo --formats" don't display JP2MrSID somewhere (only the 
> simple "MrSID" appears).
> 
> Do I need to properly configure NMAKE.opt in some manner? (I already 
> enabled MrSID support)
> Or JP2MrSID is just a symbolic name to say that MrSID driver also allows 
> reading JP2 files? (Although JP2ECW and ECW appear separately)
> 
> Thank you very much for your help.

Daniele,

I see the nmake.opt in subversion lacks the MRSID_FLAGS = -DMRSID_J2K
required to enable the JP2MRSID driver.  I have added this in trunk and
1.4 branch.  But basically just add this in your nmake.opt, just after
MRSID_LIB for instance:

# Comment out the following to supress JP2MRSID driver.
MRSID_FLAGS =	-DMRSID_J2K

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From thare at usgs.gov  Mon Oct 15 19:16:15 2007
From: thare at usgs.gov (Trent M Hare)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] jasper for very large jpeg 2000 images
In-Reply-To: <4713CC80.7070900@ccom.unh.edu>
Message-ID: <OFFBC4E6BE.D53BB7EA-ON07257375.007F9507-07257375.007FD529@usgs.gov>

Kurt,
        Considering you said HiRISE I though I would chime in.

If you have ISIS3 and GDAL available, try this:
http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?t=1456

Notice should have a direct method in GDAL to read ISIS3 images in the 
foreseeable future.

Regards,
Trent






Kurt Schwehr <schwehr@ccom.unh.edu> 
Sent by: gdal-dev-bounces@lists.maptools.org
10/15/2007 01:24 PM

To
gdal-dev@lists.maptools.org
cc
Steve Levoe <steve.levoe@jpl.nasa.gov>
Subject
[Gdal-dev] jasper for very large jpeg 2000 images






Hi All,

Is there a way to allow very large images to make it through the 
drivers?  I'm trying to convert HiRise images from Mars without luck. 
For example trying to subset a quicklook image

gdal_translate -of PNG -srcwin 10 10 1000 1000 
PSP_005372_1515_RED.QLOOK.JP2 foo.png
Input file size is 32369, 95295
error: cannot decode code stream
gdal_translate(22843) malloc: *** vm_allocate(size=3084607488) failed 
(error code=3)
gdal_translate(22843) malloc: *** error: can't allocate region
gdal_translate(22843) malloc: *** set a breakpoint in szone_error to debug
ERROR 2: Internalize failed
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
libpng error: No IDATs written into file
Abort trap

I'm guessing that this is an architectural issue with gdal?

Thanks,
-kurt

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071015/81b3783c/attachment.html
From schwehr at ccom.unh.edu  Mon Oct 15 19:31:10 2007
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] jasper for very large jpeg 2000 images
In-Reply-To: <OFFBC4E6BE.D53BB7EA-ON07257375.007F9507-07257375.007FD529@usgs.gov>
References: <OFFBC4E6BE.D53BB7EA-ON07257375.007F9507-07257375.007FD529@usgs.gov>
Message-ID: <4713F83E.6030209@ccom.unh.edu>

Hi Trent,

Thanks for the tip.  Unfortunately, the licenses and binary only 
distrubution modes prevent me from packaging either ISIS or Kakadu into 
the fink package tree (which requires being able to build from 
distributable source code).  However, I will likely run into people who 
can use this tip on the Phoenix project, so I will keep it handy.

-kurt


Trent M Hare wrote:
>
> Kurt,
>         Considering you said HiRISE I though I would chime in.
>
> If you have ISIS3 and GDAL available, try this:
> http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?t=1456
>
> Notice should have a direct method in GDAL to read ISIS3 images in the 
> foreseeable future.
>
> Regards,
> Trent
>
>
>
>
>
> *Kurt Schwehr <schwehr@ccom.unh.edu>*
> Sent by: gdal-dev-bounces@lists.maptools.org
>
> 10/15/2007 01:24 PM
>
> 	
> To
> 	gdal-dev@lists.maptools.org
> cc
> 	Steve Levoe <steve.levoe@jpl.nasa.gov>
> Subject
> 	[Gdal-dev] jasper for very large jpeg 2000 images
>
>
>
> 	
>
>
>
>
>
> Hi All,
>
> Is there a way to allow very large images to make it through the
> drivers?  I'm trying to convert HiRise images from Mars without luck.  
> For example trying to subset a quicklook image
>
> gdal_translate -of PNG -srcwin 10 10 1000 1000
> PSP_005372_1515_RED.QLOOK.JP2 foo.png
> Input file size is 32369, 95295
> error: cannot decode code stream
> gdal_translate(22843) malloc: *** vm_allocate(size=3084607488) failed
> (error code=3)
> gdal_translate(22843) malloc: *** error: can't allocate region
> gdal_translate(22843) malloc: *** set a breakpoint in szone_error to debug
> ERROR 2: Internalize failed
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> libpng error: No IDATs written into file
> Abort trap
>
> I'm guessing that this is an architectural issue with gdal?
>
> Thanks,
> -kurt
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From Chris.Barker at noaa.gov  Mon Oct 15 20:06:12 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <28FCE7E2-E7CF-4364-B41F-CDCBCBA4F39A@kyngchaos.com>
References: <7E3B745E-FFD9-4341-95CF-05F8B50E759B@kyngchaos.com>
	<4713A3A4.1050409@noaa.gov>
	<167E91B4-BC9E-414A-91B2-25C02532D0EA@kyngchaos.com>
	<4713E3EC.2040702@noaa.gov>
	<28FCE7E2-E7CF-4364-B41F-CDCBCBA4F39A@kyngchaos.com>
Message-ID: <47140074.8050308@noaa.gov>

William Kyngesburye wrote:
> This is a different --prefix from the GDAL configure.  This one is for 
> setup.py, and is set to the same as the GDAL configured prefix.

right. I'm arguing that it should NOT be set the same as the GDAL 
prefix. As a rule, people are not going to want to install their Python 
bindings in the same prefix as the GDAL lib.


> python setup.py install --prefix=$(DESTDIR)$(prefix)

So that shouldn't be there. If we want to support people installing in 
odd places, then maybe a --python-prefix option to ./configure is in 
order, or just let them run setup.py themselves

In fact, most of the python packages I've seen that depend on other libs 
(PIL, wxPython), have you building the main lib with make, then running 
setup.py to build the python stuff -- rather than having make run that 
for you.

I may be wrong here, but I think that:

a) If folks have python itself installed to a non-standard location, 
then distutils will take care of it for them.

or

b) they really do want to install their extensions elsewhere (maybe 
because they don't have write permissions where python is installed). In 
this case, then it's probably a different location to wherever they are 
putting GDAL anyway -- i.e., they won't have a python packages dir 
inside the GDAL tree -- it would be separate, like maybe 
~/python/site_packages or something.


> I have a test build online now.

Was it built with:

./configure --with-macosx-framework

make

make install

???

If so, I'll give that a try.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Mon Oct 15 22:30:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <4713D66F.4020109@mapgears.com>
References: <471058C5.1070402@pobox.com> <4713C96D.5080207@mapgears.com>
	<4713D864.1060007@pobox.com> <4713D66F.4020109@mapgears.com>
Message-ID: <47142231.7080607@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>>
>> I can already foresee that some respondents will answer "very 
>> important" to
>> everything.  Perhaps next year we will take the approach of asking 
>> respondants
>> to apportion 100 "importance points" amoung the various "how important"
>> questions to make them really think about priorities.
>>
> 
> I thought about this possible issue as well. Maybe we should introduce 
> the "importance points" system this year?

Daniel,

Agreed, I have reworked the survey accordingly.

   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Oct 16 02:41:38 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] A feature request: add GEOS Is* functions to C-API
In-Reply-To: <46EBA03A.3090909@tkk.fi>
References: <46EBA03A.3090909@tkk.fi>
Message-ID: <47145D22.8060402@loskot.net>

Ari Jolma wrote:
> IsValid, IsSimple, and IsRing from GEOS could easily be added to the
> C-API ad bindings. In fact, I've done it locally since I need at least
> IsValid. Is there a reason they're not in?

Folks,

Just to follow up this subject and keep users informed.
The requested API has been exposed:

http://trac.osgeo.org/gdal/ticket/1871

I'd like to say Big Thanks to Hobu for cleaning this (and other tickets)
during my absence last weeks.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From uwe.schmitz at lverma.nrw.de  Tue Oct 16 02:57:15 2007
From: uwe.schmitz at lverma.nrw.de (uwe.schmitz@lverma.nrw.de)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] gdal_merge and gdalwarp: Problems with 1 bit data
Message-ID: <C900396522B3C142AA9A7F5AFEE11CB30138038D@slva01lvnt23.lverma.nrw.de>

Hi,

gdal_merge and gdalwarp seem to have problems writing RasterBands
with 1 Bit depth. I'm using gdal-1.4.2 with old
python bindings(also tested with FWTools-1.3.7).

Let say I have a file called src.tif, where tiffinfo
shows:
TIFF Directory at offset 0x4bbd24
  Subfile Type: (0 = 0x0)
  Image Width: 6299 Image Length: 6299
  Resolution: 400, 400 pixels/inch
  Bits/Sample: 1
  Compression Scheme: None
  Photometric Interpretation: min-is-white
  FillOrder: msb-to-lsb
  Orientation: row 0 top, col 0 lhs
  Samples/Pixel: 1
  Rows/Strip: 6299
  Min Sample Value: 0
  Max Sample Value: 1
  Planar Configuration: single image plane

and gdalinfo reports:
Driver: GTiff/GeoTIFF
Size is 6299, 6299
Coordinate System is:
PROJCS["DHDN / Gauss-Kruger zone 2",
...
Band 1 Block=6299x10 Type=Byte, ColorInterp=Palette
  Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255

Here I'm a little bit astonished to see Type=Byte 
and ColorInterp=Palette, but may be it's caused by 
abstraction of the interface.

Now if I do the following:

gdal_merge.py -co NBITS=1 -o dst.tif src.tif

the resulting file x.tif looks very jagged. Is this
a known problem?

I have to mention that gdal_translate doesn't have
this problem.

Greetings
Uwe


From mateusz at loskot.net  Tue Oct 16 03:35:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
In-Reply-To: <4713F827.6060105@pobox.com>
References: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
	<4713F827.6060105@pobox.com>
Message-ID: <471469AA.6080503@loskot.net>

Frank Warmerdam wrote:
> Daniele Romagnoli wrote:
>> Hi list,
>> I have just a simple question for you.
>>
>> I would like to test all the powerful drivers which are capable of
>> handle Jpeg2000 format.
>> I noticed that GDAL provides a wide set of JP2 drivers:
>>
>> JP2KAK
>> JP2ECW
>> JP2MrSID
>>
>> I already successfully tested the JP2KAK and the JP2ECW (by setting
>> GDAL_SKIP = JP2KAK) drivers.
>> Now I'm attempting to work with the JP2MrSID driver but I dont know
>> how to get it. I set GDAL_SKIP = JP2KAK JP2ECW (space separated list)
>> but calling "gdalinfo --formats" don't display JP2MrSID somewhere
>> (only the simple "MrSID" appears).
>>
>> Do I need to properly configure NMAKE.opt in some manner? (I already
>> enabled MrSID support)
>> Or JP2MrSID is just a symbolic name to say that MrSID driver also
>> allows reading JP2 files? (Although JP2ECW and ECW appear separately)
>>
>> Thank you very much for your help.
> 
> Daniele,
> 
> I see the nmake.opt in subversion lacks the MRSID_FLAGS = -DMRSID_J2K
> required to enable the JP2MRSID driver.  I have added this in trunk and
> 1.4 branch.  But basically just add this in your nmake.opt, just after
> MRSID_LIB for instance:
> 
> # Comment out the following to supress JP2MRSID driver.
> MRSID_FLAGS =    -DMRSID_J2K


plus, you need to uncomment and edit value of MRSID_DIR variable in
nmake.opt, as well as uncomment other MRSID_* variables.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dany.geotools at gmail.com  Tue Oct 16 03:42:29 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
In-Reply-To: <471469AA.6080503@loskot.net>
References: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
	<4713F827.6060105@pobox.com> <471469AA.6080503@loskot.net>
Message-ID: <7221db410710160042k616ab006x169e8952dbc9d90a@mail.gmail.com>

On 10/16/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> Frank Warmerdam wrote:
> > Daniele Romagnoli wrote:
> >> Hi list,
> >> I have just a simple question for you.
> >>
> >> I would like to test all the powerful drivers which are capable of
> >> handle Jpeg2000 format.
> >> I noticed that GDAL provides a wide set of JP2 drivers:
> >>
> >> JP2KAK
> >> JP2ECW
> >> JP2MrSID
> >>
> >> I already successfully tested the JP2KAK and the JP2ECW (by setting
> >> GDAL_SKIP = JP2KAK) drivers.
> >> Now I'm attempting to work with the JP2MrSID driver but I dont know
> >> how to get it. I set GDAL_SKIP = JP2KAK JP2ECW (space separated list)
> >> but calling "gdalinfo --formats" don't display JP2MrSID somewhere
> >> (only the simple "MrSID" appears).
> >>
> >> Do I need to properly configure NMAKE.opt in some manner? (I already
> >> enabled MrSID support)
> >> Or JP2MrSID is just a symbolic name to say that MrSID driver also
> >> allows reading JP2 files? (Although JP2ECW and ECW appear separately)
> >>
> >> Thank you very much for your help.
> >
> > Daniele,
> >
> > I see the nmake.opt in subversion lacks the MRSID_FLAGS = -DMRSID_J2K
> > required to enable the JP2MRSID driver.  I have added this in trunk and
> > 1.4 branch.  But basically just add this in your nmake.opt, just after
> > MRSID_LIB for instance:
> >
> > # Comment out the following to supress JP2MRSID driver.
> > MRSID_FLAGS =    -DMRSID_J2K
>
>
> plus, you need to uncomment and edit value of MRSID_DIR variable in
> nmake.opt, as well as uncomment other MRSID_* variables.


Sure, I already done this when adding MrSID support.
Thank you (Frank and Mateusz) for your help.

-- 
Best Regards,
Daniele Romagnoli


Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071016/ecd2aa32/attachment.html
From mateusz at loskot.net  Tue Oct 16 03:44:49 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] gdal_merge and gdalwarp: Problems with 1 bit data
In-Reply-To: <C900396522B3C142AA9A7F5AFEE11CB30138038D@slva01lvnt23.lverma.nrw.de>
References: <C900396522B3C142AA9A7F5AFEE11CB30138038D@slva01lvnt23.lverma.nrw.de>
Message-ID: <47146BF1.80501@loskot.net>

uwe.schmitz@lverma.nrw.de wrote:
> gdal_merge and gdalwarp seem to have problems writing RasterBands
> with 1 Bit depth. I'm using gdal-1.4.2 with old
> python bindings(also tested with FWTools-1.3.7).
> 
> ...
> Band 1 Block=6299x10 Type=Byte, ColorInterp=Palette
>   Metadata:
>     NBITS=1
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
> 
> Here I'm a little bit astonished to see Type=Byte 
> and ColorInterp=Palette, but may be it's caused by 
> abstraction of the interface.

Uwe,

AFAIK, 1-bit datatype (generally, non-byte) is represented as GDT_Byte,
so I'd call it as known behavior.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From uwe.schmitz at lverma.nrw.de  Tue Oct 16 04:21:36 2007
From: uwe.schmitz at lverma.nrw.de (uwe.schmitz@lverma.nrw.de)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] gdal_merge and gdalwarp: Problems with 1 bit data
Message-ID: <C900396522B3C142AA9A7F5AFEE11CB301380390@slva01lvnt23.lverma.nrw.de>

Mateusz,

> 
> AFAIK, 1-bit datatype (generally, non-byte) is represented as 
> GDT_Byte,
> so I'd call it as known behavior.
> 

I see the point, to handle non-byte Data as GDT_Byte internally.
But shouldn't the drivers for formats which allow to write 
non-byte data keep track of this and pack the bytes to whatever
is specified.

Noteworthy gdal_translate has no problems in writing 1-Bit Data
and though I haven't looked into it, I assume it uses the same
interface.

Anyhow, I think it isn't a good behaviour to write corrupted
data. At least there has to be an error message saying:
"Can't handle that sort of data". This may save some headache :-)

Uwe


From maplabs at light42.com  Tue Oct 16 04:30:44 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] A feature request: add GEOS Is* functions to C-API
In-Reply-To: <47145D22.8060402@loskot.net>
References: <46EBA03A.3090909@tkk.fi> <47145D22.8060402@loskot.net>
Message-ID: <16A7D85C-7BC2-11DC-ABA3-000A277A733C@light42.com>

  in ogr.i:
IsEmpty(), IsValid(), IsSimple(), IsRing()
also AddPoint_2D()  and a bunch of overloads for SetField()

but, in the Perl bindings at least..
Is_Empty() is there, but Valid/Simple/Ring are not?
Move() is added
GetFeatures -> GetFeature
   and the detection of AddPoint() for 2D/3D

  tip of the hat to Howard Butler, for the original and continued work..

however, a simple perl script on trunk sources gives a runtime error
   IsEmpty() not found

for IsSimple(), IsRing() and IsValid()
   cant locate .../IsSimple.al in @INC(..paths..) at 'compile' time

geometry->Move() seems to work fine

-Brian

On Oct 15, 2007, at 11:41 PM, Mateusz Loskot wrote:

> Ari Jolma wrote:
>> IsValid, IsSimple, and IsRing from GEOS could easily be added to the
>> C-API ad bindings. In fact, I've done it locally since I need at least
>> IsValid. Is there a reason they're not in?
>
> Folks,
>
> Just to follow up this subject and keep users informed.
> The requested API has been exposed:
>
> http://trac.osgeo.org/gdal/ticket/1871
>
> I'd like to say Big Thanks to Hobu for cleaning this (and other 
> tickets)
> during my absence last weeks.
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Tue Oct 16 06:06:03 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Parameter names in swig bindings
Message-ID: <47148D0B.2090705@tkk.fi>

I assume there's no problem in changing the parameter names in the 
bindings? I'd like to rename the geom parameter to something else, 
probably spatialFilter.

This because there's now a problem with the Perl typemap, which  says 
that  geom must not  be null (as is the case where it is used elsewhere) 
and in ExecuteSQL  geom is usually null.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From Mario.Cruz at esa.int  Tue Oct 16 10:57:42 2007
From: Mario.Cruz at esa.int (Mario.Cruz@esa.int)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] NetCDF driver bug fix
Message-ID: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>

Attached follows a (seemingly) working patch for the NetCDF driver.

The ReadAttributes method was using a fixed-length array to store 
attribute data, crashing when presented with an attribute whose data size 
was larger than MAX_STR_LEN.

The patched version dynamically allocates enough memory to store the 
attribute's string representation. It's a naive implementation, but it's 
working well with the datasets I've been throwing at it. And anything is 
better than fixed-length arrays + unknown-length strcpy.

Some remarks:
- array pointer arithmetic done by hand, may impact platform portability
- didn't have time to check for similar bugs in the rest of the driver
- patched against 1.4.2 version
- couldn't figure out if the code uses tabs/spaces or some evil 
combination of both, so just spaced all the indentation

On a related note, is there any reason why variables with only one 
dimension can't be made available as rasters of x*1 size? Didn't really 
want to be adding yet another python module just to access that kind of 
data.

Best regards, 

Mario Cruz


-------------- next part --------------
A non-text attachment was scrubbed...
Name: netcdf.patch
Type: application/octet-stream
Size: 5785 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071016/835f7688/netcdf.obj
From Jim.Klassen at ci.stpaul.mn.us  Tue Oct 16 11:27:47 2007
From: Jim.Klassen at ci.stpaul.mn.us (Jim Klassen)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
Message-ID: <s7149233.057@snoopy.ci.stpaul.mn.us>

Hi all,
 
I've been watching this from the sidelines and would like to add that
at St. Paul we have a use for the present behavior of installing the
bindings next to GDAL.
 
We have multiple versions of GDAL installed on the same machine. We do
this so we can update GDAL w/o having to worry about breaking any of our
(web) applications. We can test and move the applications to the new
version one at a time and without disruption to our users. If the
bindings are in site-* then how does one control which version of GDAL
is used? With the bindings stored with GDAL, we can control which one is
used by setting [DY]LD_LIBRARY_PATH and PYTHONPATH before calling the
script.
 
We use this method for most of our dependancies, not just GDAL, because
we have been burned in the past by upgrading a product to support a new
feature in one application causing another seemingly unreleated
application to stop working. It took awhile to figure out and the users
were not happy. I don't remember which update caused it, but I am pretty
sure it wasn't GDAL so maybe we are just being over cautious.
 


>>> On 10/15/2007 at 7:06 PM, Christopher Barker
<Chris.Barker@noaa.gov> wrote:
William Kyngesburye wrote:
> This is a different --prefix from the GDAL configure.  This one is
for 
> setup.py, and is set to the same as the GDAL configured prefix.

right. I'm arguing that it should NOT be set the same as the GDAL 
prefix. As a rule, people are not going to want to install their Python

bindings in the same prefix as the GDAL lib.


> python setup.py install --prefix=$(DESTDIR)$(prefix)

So that shouldn't be there. If we want to support people installing in

odd places, then maybe a --python-prefix option to ./configure is in 
order, or just let them run setup.py themselves

In fact, most of the python packages I've seen that depend on other
libs 
(PIL, wxPython), have you building the main lib with make, then running

setup.py to build the python stuff -- rather than having make run that

for you.

I may be wrong here, but I think that:

a) If folks have python itself installed to a non-standard location, 
then distutils will take care of it for them.

or

b) they really do want to install their extensions elsewhere (maybe 
because they don't have write permissions where python is installed).
In 
this case, then it's probably a different location to wherever they are

putting GDAL anyway -- i.e., they won't have a python packages dir 
inside the GDAL tree -- it would be separate, like maybe 
~/python/site_packages or something.


> I have a test build online now.

Was it built with:

./configure --with-macosx-framework

make

make install

???

If so, I'll give that a try.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071016/b8b9d2fe/attachment.html
From Chris.Barker at noaa.gov  Tue Oct 16 12:38:56 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
In-Reply-To: <s7149233.058@snoopy.ci.stpaul.mn.us>
References: <s7149233.058@snoopy.ci.stpaul.mn.us>
Message-ID: <4714E920.6010300@noaa.gov>

Jim Klassen wrote:
> I've been watching this from the sidelines and would like to add that at 
> St. Paul we have a use for the present behavior of installing the 
> bindings next to GDAL.

Thanks for the use case!

> We have multiple versions of GDAL installed on the same machine. We do 
> this so we can update GDAL w/o having to worry about breaking any of our 
> (web) applications. We can test and move the applications to the new 
> version one at a time and without disruption to our users. If the 
> bindings are in site-* then how does one control which version of GDAL 
> is used?

This has been an issue for years with python modules/packages. For some 
completely unknown (to me) reason, the core python developers never 
thought it was something worth addressing. The result is that a number 
of solutions have been cobbled together by various python package 
developers:

1) wxPython has a "wxversion" module, so that you can have multiple 
versions installed, and call:

import wxversion
wxversion.select('2.6')
import wx

and get the version you want.

I believe wxGTK has a similar system.

2) there is the workingenv system:
http://cheeseshop.python.org/pypi/workingenv.py

That is designed to set up a python environment for a given app that is 
kept distinct from the rest of the python stuff on your system -- it may 
well be the best solution for a server app (Is that what you're using).

3) Eggs supports version control:

http://peak.telecommunity.com/DevCenter/PythonEggs

At least I thought they did. They do support requiring a given version:

"""
They allow applications or libraries to specify the needed version of a 
library, so that you can e.g. require("Twisted-Internet>=2.0") before 
doing an import twisted.internet.
"""

It's not clear to me if that means you can have multiple versions of a 
given package installed, and the correct one will be used, but I THINK 
that's the case -- more research needed.

As Hobu has been working on setuptools+egg support, that may be the way 
to go in the future.

> With the bindings stored with GDAL, we can control which one is 
> used by setting [DY]LD_LIBRARY_PATH and PYTHONPATH before calling the 
> script.

Maybe it's because I'm a committed pythonista, but I prefer the 
python-based approaches to setting up environment variables -- if 
nothing else, the python approaches are cross-platform.

That being said, GDAL should support this kind of use. However, I still 
don't think that the current behavior is the appropriate default. I'd 
like to see a "--python-prefix" option to ./configure, so that folks can 
put the python stuff where they want, which may or may not be the same 
place as the rest of GDAL.

The other option is to keep it simple, and not have make run setup.py -- 
folks can run that themselves, and pass in any path they want.

Would these work for you?

> I don't remember which update caused it, but I am pretty 
> sure it wasn't GDAL so maybe we are just being over cautious.

well, maybe -- the GDAL devs are very committed to backward 
compatibility -- but it's still good practice to run a production app 
with the versions of libs it's been tested with.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From ari.jolma at tkk.fi  Tue Oct 16 12:52:28 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Parameter names in swig bindings
In-Reply-To: <3447A9DB-7BD7-11DC-ABA3-000A277A733C@light42.com>
References: <47148D0B.2090705@tkk.fi>
	<3447A9DB-7BD7-11DC-ABA3-000A277A733C@light42.com>
Message-ID: <4714EC4C.5050100@tkk.fi>

Brian Hamlin kirjoitti:
> it looks like in Perl it should be
> Geo::OGR::ExecuteSQL()
>
> but using trunk sources I get
>   can't locate auto/Geo/OGR/Driver/ExecuteSQL.al in @INC(xxx)

It's a DataSource method, i.e.

$ds = Geo::OGR::DataSource somehow
$layer = $ds->ExecuteSQL($sql);

although this does not work with latest from repository since it 
complains geom being undefined

... more woes because of parameter names:

I have a general requirement that OGRGeometryShadow* other should be 
non-null. In AddGeometryDirectly there is a "%apply SWIGTYPE *DISOWN" on 
it and after the method a "%clear OGRGeometryShadow* other;", which 
seems to clear _both_ DISOWN and the non-null requirement.

I guess this is just more reasons to press on putting the checks into C API.

I run into this problem because I'm getting segfaults with the latest 
latest from repository somewhere in my OGR test code where I add 
geometries into a multigeometry. This problem is both in Windows and Linux.

Ari

>
>
> On Oct 16, 2007, at 3:06 AM, Ari Jolma wrote:
>
>> I assume there's no problem in changing the parameter names in the 
>> bindings? I'd like to rename the geom parameter to something else, 
>> probably spatialFilter.
>>
>> This because there's now a problem with the Perl typemap, which  says 
>> that  geom must not  be null (as is the case where it is used 
>> elsewhere) and in ExecuteSQL  geom is usually null.
>>
>> Ari
>>
>> -- 
>> Prof. Ari Jolma
>> Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
>> Teknillinen Korkeakoulu / Helsinki University of Technology
>> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
>> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Tue Oct 16 14:55:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] gdal_merge and gdalwarp: Problems with 1 bit data
In-Reply-To: <C900396522B3C142AA9A7F5AFEE11CB30138038D@slva01lvnt23.lverma.nrw.de>
References: <C900396522B3C142AA9A7F5AFEE11CB30138038D@slva01lvnt23.lverma.nrw.de>
Message-ID: <47150936.4010003@pobox.com>

uwe.schmitz@lverma.nrw.de wrote:
> Hi,
> 
> gdal_merge and gdalwarp seem to have problems writing RasterBands
> with 1 Bit depth. I'm using gdal-1.4.2 with old
> python bindings(also tested with FWTools-1.3.7).

Uwe,

I was not aware that GDAL 1.4.2 had any support for
writing 1bit files.  FWTools does though.

> and gdalinfo reports:
> Driver: GTiff/GeoTIFF
> Size is 6299, 6299
> Coordinate System is:
> PROJCS["DHDN / Gauss-Kruger zone 2",
> ...
> Band 1 Block=6299x10 Type=Byte, ColorInterp=Palette
>   Metadata:
>     NBITS=1
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
> 
> Here I'm a little bit astonished to see Type=Byte 
> and ColorInterp=Palette, but may be it's caused by 
> abstraction of the interface.

One bit TIFF files have values 0 and 1.  To get this
to display as black and white GDAL abstracts it to be
a paletted image.  Note the GDAL data model does not
directly support 1bit data so we have to promote to byte.

> Now if I do the following:
> 
> gdal_merge.py -co NBITS=1 -o dst.tif src.tif
> 
> the resulting file x.tif looks very jagged. Is this
> a known problem?

I'm not sure what jagged means.  I tried a quick
gdalwarp to 1 bit file using gdal trunk and it seemed
to work fine.  I would suggest you file a detailed
bug report.  You might even want to try first with
FWTools 1.3.9.  There were some issues with FWTools
geotiff support for a couple revs recently due to the
bigtiff upgrade.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Tue Oct 16 14:08:59 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Parameter names in swig bindings
In-Reply-To: <47148D0B.2090705@tkk.fi>
References: <47148D0B.2090705@tkk.fi>
Message-ID: <f3b73b7d0710161108u2fe94c1bvfdd23bd0611789b4@mail.gmail.com>

Ari,

I don't see any problems with the perl builds out there. Could you
describe the issue in more detail?

Best regards,

Tamas




2007/10/16, Ari Jolma <ari.jolma@tkk.fi>:
> I assume there's no problem in changing the parameter names in the
> bindings? I'd like to rename the geom parameter to something else,
> probably spatialFilter.
>
> This because there's now a problem with the Perl typemap, which  says
> that  geom must not  be null (as is the case where it is used elsewhere)
> and in ExecuteSQL  geom is usually null.
>
> Ari
>
> --
> Prof. Ari Jolma
> Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
> Teknillinen Korkeakoulu / Helsinki University of Technology
> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From Jim.Klassen at ci.stpaul.mn.us  Tue Oct 16 14:23:27 2007
From: Jim.Klassen at ci.stpaul.mn.us (Jim Klassen)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] ng-python build
Message-ID: <s714bb6f.021@snoopy.ci.stpaul.mn.us>

Thanks for the response.
 
Of the two options, I'd personally prefer running setup.py separately
over a new configure option. Either would work for me. However, I am
somewhat more likely to forget to add the configure option and be
surprised after I run "make install".

>>> On 10/16/2007 at 11:38 AM, Christopher Barker
<Chris.Barker@noaa.gov> wrote:
Jim Klassen wrote:
> I've been watching this from the sidelines and would like to add that
at 
> St. Paul we have a use for the present behavior of installing the 
> bindings next to GDAL.

Thanks for the use case!

> We have multiple versions of GDAL installed on the same machine. We
do 
> this so we can update GDAL w/o having to worry about breaking any of
our 
> (web) applications. We can test and move the applications to the new

> version one at a time and without disruption to our users. If the 
> bindings are in site-* then how does one control which version of
GDAL 
> is used?

This has been an issue for years with python modules/packages. For some

completely unknown (to me) reason, the core python developers never 
thought it was something worth addressing. The result is that a number

of solutions have been cobbled together by various python package 
developers:

1) wxPython has a "wxversion" module, so that you can have multiple 
versions installed, and call:

import wxversion
wxversion.select('2.6')
import wx

and get the version you want.

I believe wxGTK has a similar system.

2) there is the workingenv system:
http://cheeseshop.python.org/pypi/workingenv.py 

That is designed to set up a python environment for a given app that is

kept distinct from the rest of the python stuff on your system -- it
may 
well be the best solution for a server app (Is that what you're
using).

3) Eggs supports version control:

http://peak.telecommunity.com/DevCenter/PythonEggs 

At least I thought they did. They do support requiring a given
version:

"""
They allow applications or libraries to specify the needed version of a

library, so that you can e.g. require("Twisted-Internet>=2.0") before 
doing an import twisted.internet.
"""

It's not clear to me if that means you can have multiple versions of a

given package installed, and the correct one will be used, but I THINK

that's the case -- more research needed.

As Hobu has been working on setuptools+egg support, that may be the way

to go in the future.

> With the bindings stored with GDAL, we can control which one is 
> used by setting [DY]LD_LIBRARY_PATH and PYTHONPATH before calling the

> script.

Maybe it's because I'm a committed pythonista, but I prefer the 
python-based approaches to setting up environment variables -- if 
nothing else, the python approaches are cross-platform.

That being said, GDAL should support this kind of use. However, I still

don't think that the current behavior is the appropriate default. I'd 
like to see a "--python-prefix" option to ./configure, so that folks
can 
put the python stuff where they want, which may or may not be the same

place as the rest of GDAL.

The other option is to keep it simple, and not have make run setup.py
-- 
folks can run that themselves, and pass in any path they want.

Would these work for you?

> I don't remember which update caused it, but I am pretty 
> sure it wasn't GDAL so maybe we are just being over cautious.

well, maybe -- the GDAL devs are very committed to backward 
compatibility -- but it's still good practice to run a production app 
with the versions of libs it's been tested with.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071016/e0020b7f/attachment.html
From ari.jolma at tkk.fi  Tue Oct 16 14:47:27 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Parameter names in swig bindings
In-Reply-To: <f3b73b7d0710161108u2fe94c1bvfdd23bd0611789b4@mail.gmail.com>
References: <47148D0B.2090705@tkk.fi>
	<f3b73b7d0710161108u2fe94c1bvfdd23bd0611789b4@mail.gmail.com>
Message-ID: <4715073F.3080900@tkk.fi>

Tamas Szekeres kirjoitti:
> Ari,
>
> I don't see any problems with the perl builds out there. Could you
> describe the issue in more detail?
>   

Just one of those cases again where "make clean; make" does not work. No 
problems any more -- except with the parameter names. Do you have any 
opinion on them?

Ari

> Best regards,
>
> Tamas
>
>
>
>
> 2007/10/16, Ari Jolma <ari.jolma@tkk.fi>:
>   
>> I assume there's no problem in changing the parameter names in the
>> bindings? I'd like to rename the geom parameter to something else,
>> probably spatialFilter.
>>
>> This because there's now a problem with the Perl typemap, which  says
>> that  geom must not  be null (as is the case where it is used elsewhere)
>> and in ExecuteSQL  geom is usually null.
>>
>> Ari
>>
>> --
>> Prof. Ari Jolma
>> Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
>> Teknillinen Korkeakoulu / Helsinki University of Technology
>> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
>> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>     


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From matt.wilkie at gov.yk.ca  Tue Oct 16 17:36:35 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <47152EE3.4000507@gov.yk.ca>

>   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
> 
> Any suggestions for other points that ought to be raised?  Other changes?

I would not number the questions, use letters (a) instead. Numbers have 
an implicit ranking message that is hard to mentally override ("1" must 
be more important than "13").

Perhaps group the questions which use survey points together under a 
heading rather than having to add "(assign 0-100 survey points)" each time.

#17, keep response private: does that mean keep the response private or 
the name of the responder private or both? I venture that some will be 
comfortable sharing their views if they are anonymous.

+ #0. How would you rate your overall satisfaction level with GDAL/OGR? 
(Perhaps split/extend question with code/developers/support/community)

---
I know it's outside the scope of this particular project, but it would 
be interesting to see a similar survey to the community at large as well.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From neteler at itc.it  Tue Oct 16 18:05:40 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <47152EE3.4000507@gov.yk.ca>
References: <471058C5.1070402@pobox.com> <47152EE3.4000507@gov.yk.ca>
Message-ID: <20071016220539.GB14193@bartok.itc.it>

On Tue, Oct 16, 2007 at 11:36:35PM +0200, Matt Wilkie wrote:
> >   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey
...
> ---
> I know it's outside the scope of this particular project, but it would
> be interesting to see a similar survey to the community at large as well.

I also like the idea to make similar surveys elsewhere.

In this case an electronic system would make sense. I guess that
 http://www.limesurvey.org  (former PHPsurveyor)
could do it nicely.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From efinnen at gmail.com  Tue Oct 16 18:06:16 2007
From: efinnen at gmail.com (Eric Finnen)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] RPF Write ???
Message-ID: <d44cbb020710161506g5cb72e32u4eadc4c183764d7e@mail.gmail.com>

 <gdal-dev@lists.maptools.org>

I apologize ahead of time if this is the incorrect location/board to post
this question to.

So I have been tasked to convert a whole slew of imagery products (that have
been clipped and edited from ArcGIS Server) into NITF and RPF
formats.SoArcGIS Server clips and puts the files into a local folder
as GeoTiff's.

 While it is clipping I have written a batch file which shells into FWTOOLS
and does a gdal_translate on all of them into NITF format, and it works
rather well. FWTools is filling this need quite nicely.

 However I am a bit confused with what the correct approach is to do this to
an RPF format. And to be honest I don't know if it can be done with the
OGDI/GDAL/FWTOOLS approach.

I will say while testing I can get it to ingest an RPF (using
gltp:/rpf/c:/temp/rpf?..) and export a TIF (or whatever format) just fine.
But is it possible to switch that around?

Any suggestions would be greatly appreciated.



Thanks



-eric

efinnen@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071016/dea647d9/attachment.html
From warmerdam at pobox.com  Tue Oct 16 19:37:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] RPF Write ???
In-Reply-To: <d44cbb020710161506g5cb72e32u4eadc4c183764d7e@mail.gmail.com>
References: <d44cbb020710161506g5cb72e32u4eadc4c183764d7e@mail.gmail.com>
Message-ID: <47154B46.6060206@pobox.com>

Eric Finnen wrote:
> <mailto:gdal-dev@lists.maptools.org>
> 
> I apologize ahead of time if this is the incorrect location/board to 
> post this question to.
> 
> So I have been tasked to convert a whole slew of imagery products (that 
> have been clipped and edited from ArcGIS Server) into NITF and RPF 
> formats.So ArcGIS Server clips and puts the files into a local folder as 
> GeoTiff's.
> 
>  While it is clipping I have written a batch file which shells into 
> FWTOOLS and does a gdal_translate on all of them into NITF format, and 
> it works rather well. FWTools is filling this need quite nicely.
> 
>  However I am a bit confused with what the correct approach is to do 
> this to an RPF format. And to be honest I don't know if it can be done 
> with the OGDI/GDAL/FWTOOLS approach.
> 
> I will say while testing I can get it to ingest an RPF (using 
> gltp:/rpf/c:/temp/rpf?..) and export a TIF (or whatever format) just 
> fine. But is it possible to switch that around?

Eric,

I'm afraid GDAL (and FWTools) cannot produce complex RPF products,
only single NITF files.  You might want to invesgiate OSSIM which I
think has more complete support for RPF products, and includes a
commandline "icp" program that can be used to translate formats.

  http://www.ossim.org/

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Tue Oct 16 19:33:39 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
Message-ID: <47154A53.1030209@ualg.pt>

Hi,

Although there is no track ticked assigned to it, it has been often 
referred here the problem of the
netCDF up-down flipping (and Surfer grids btw).

The problem is that SetProjection() in netcdfdataset.cpp assumes the Y 
coordinates vector is given
in descending order. So line n? 1087 (todays - 17-10-2007 svn version)

            poDS->adfGeoTransform[5] = (( pdfYCoord[ydim-1] -
                          pdfYCoord[0] ) /
                        ( poDS->nRasterYSize - 1 ));

and line 1098
                  poDS->adfGeoTransform[3] = pdfYCoord[0]
                      - (poDS->adfGeoTransform[5] / 2);

are expected to give a negative dy and the top left point.

However, the most common practice for Y orientation is increasing from 
bottom to top and not
the other way around.
To correct this problem one can add,  after line  1089
            if ( poDS->adfGeoTransform[5] > 0 )
             poDS->adfGeoTransform[5] *= -1;

which will work for both Y orientations

This corrects for the bad Upper Left when Y "grows up", but I here don't 
know a solution that works
for both Y orientation cases.

                  poDS->adfGeoTransform[3] = pdfYCoord[ydim-1]
                      - (poDS->adfGeoTransform[5] / 2);


A related note. With the risk of looking impatient (which I am) this 
netCDF driver bugs are trailing
for such a long time. Can't they be killed once for all?

Thanks

Joaquim Luis

From hobu.inc at gmail.com  Tue Oct 16 22:45:16 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
Message-ID: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>

All,

Today I have enabled the next-gen bindings in trunk, and they are  
built by default when using the --with-python target.  More testing  
is needed/requested, so please file tickets or let me know in IRC of  
any issues that arise.  Here are the particulars:
1) All references to the old bindings in ./pymod are called old-gen  
python in configure and makefiles
2) Specific references to SWIG xxx bindings are now just called xxx  
bindings (perl, python, java, etc)
3) 'make' executes the 'build' target in swig/python when --with- 
python is enabled
4) 'make install' installs a python egg in the system location if  
setuptools is available and an otherwise regular python package in  
the system location if just distutils is used
5) enabling the old-gen bindings now requires passing --with-ogpython  
to configure
6) enabling the old-gen bindings disables the next-gen bindings
7) Only libtool builds have been tested thus far
8) The references to scripts in pymod need to be sync'd with those in  
swig/python/scripts ('make install' in ./pymod will eventually use  
the same scripts in ./swig/python/scripts)
9) --with-pymodddir only has an effect when --with-ogpython is enabled.

Outstanding issues:
  - It's not apparent what we want to do for defaults on the 'make  
install' target of ./swig/python based on the discussions on the  
list.  Can someone come up with a concise proposal?
  - Because we're using distutils, currently the CFLAGS and CPPFLAGS  
of Python are used, and GDAL's CFLAGS/CPPFLAGS are not injected.   
This needs to be resolved.
  - The windows makefiles have not been updated yet.
  - Should we require setuptools, or should we attempt to support  
setuptools and distutils?

Test away (please),

Howard

From woklist at kyngchaos.com  Tue Oct 16 23:40:10 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
Message-ID: <C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>

On Oct 16, 2007, at 9:45 PM, Howard Butler wrote:

> Outstanding issues:
>  - It's not apparent what we want to do for defaults on the 'make  
> install' target of ./swig/python based on the discussions on the  
> list.  Can someone come up with a concise proposal?

I'm OK with a GDAL-prefix install (with a small adjustment for the  
OSX framework if possible - a more explicit path, so that the python  
half of the path is ignored [$prefix/lib/python2.5/site-packages] and  
something like $prefix/Resources/python2.5 or $prefix/Libraries/ 
python2.5 is used instead).  Users would then either add that path to  
sys.path within python or scripts, or set it in PYTHON_PATH (or  
whatever it is) in the shell.

That would make it easier to support multiple versions, of both  
python and gdal-python, for application stability.

>  - Because we're using distutils, currently the CFLAGS and CPPFLAGS  
> of Python are used, and GDAL's CFLAGS/CPPFLAGS are not injected.   
> This needs to be resolved.

Seems to work on OSX.

As for any software that makes use of GDAL, gdal-python should only  
need the GDAL headers, and not all the extra headers for dependencies.

OSX encodes lib paths in libraries, so all it needs to directly link  
is libgdal.  I understand linux platforms may need the CFLAGS and  
link flags.

Nice features of OSX?  Or my own naivete?

>  - Should we require setuptools, or should we attempt to support  
> setuptools and distutils?

For simplicity on OSX, I'm for supporting distutils.  Packagers (like  
me) and developers may be OK with an extra requirement, but others  
who want to go on their own might be put off by that.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people  
of the allied nations devoted an entire year exclusively to hating  
the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From mateusz at loskot.net  Wed Oct 17 03:14:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
Message-ID: <4715B647.2090405@loskot.net>

Howard Butler wrote:
> All,
> 
> Today I have enabled the next-gen bindings in trunk, and they are built
> by default when using the --with-python target.  More testing is
> needed/requested, so please file tickets or let me know in IRC of any
> issues that arise.

Hobu,

I remember this issue have been reported already but I can't remember
where and can't find it in GDAL tickets, so I decided to report it here
first. GDAL builds using --with-python and egg is prepared but seems to
be broken:

~/dev/gdal/_svn/trunk/gdal/swig/python $ export
PYTHONPATH=/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/dist/GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg


~/dev/gdal/_svn/trunk/autotest $ ./run_all.py
Traceback (most recent call last):
  File "./run_all.py", line 30, in ?
    import gdaltest
  File "pymod/gdaltest.py", line 32, in ?
    import gdal, osr
  File
"/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/dist/GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg/gdal.py",
line 4
    Debug("Deprecation Warning", 'gdal.py was placed in a namespace, it
is now availabl

              ^
SyntaxError: EOL while scanning single-quoted string



Is this something known?
I use Mac OS X 10.4 with Python 2.3.5

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 17 04:38:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471058C5.1070402@pobox.com>
References: <471058C5.1070402@pobox.com>
Message-ID: <4715C9FC.1010108@loskot.net>

Frank Warmerdam wrote:
> PSC members,
> 
> As part of the sponsorship program, we are committed to distributing a
> sponsor survey to all our sponsors with the intention that their responses
> would provide some guidance to our activities - at least as far as the
> focus
> of the paid maintainer.  I had really intended to get it out by mid-year,
> but like many things I do it slips...
> 
> I have prepared a first draft at:
> 
>   http://trac.osgeo.org/gdal/wiki/SponsorshipSurvey

Frank,

Looks great to me.

> Any suggestions for other points that ought to be raised?  Other changes?

I'm not PSC member but I'd like to share a few comments.

I think the #13 should be more precise and explicitly ask for platforms
on which GDAL is used in an organization. IOW, current version is
probably too general, I think.

Regarding the #14, I think it could be interesting for us to get some
details about organization preferences of getting support. If they find
Trac and mailing list well working, helpful, friendly, or they would
prefer to contact maintainers directly by e-mail or phone, etc.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 17 07:29:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] netcdf + ubuntu needs a trick
Message-ID: <4715F215.4040806@loskot.net>

Hi,

Ubuntu users may notice some problems while configuring
GDAL with NetCDF and Xerces support.

If you use official libnetcdf packages to build GDAL with NetCDF
support, and you also configure Xerces support, you will probably get
Xerces detection error from ./configure.
The message says that -lnetcdf can not be found.

This error is caused by missing libnetcdf.so symlink to
libnetcdf.so.3.6.1. On Ubuntu Feisty, installation of libnetcdf package
does not create this symlink, so you have to create it manually:

sudo ln -s /usr/lib/libnetcdf.so.3.6.1 /usr/lib/libnetcdf.so

Francesco Paolo Lovergine confirmed that this problem does not occur on
Debian Etch, so it looks like Ubuntu specific issue.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 17 07:40:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] netcdf + ubuntu needs a trick
In-Reply-To: <4715F215.4040806@loskot.net>
References: <4715F215.4040806@loskot.net>
Message-ID: <4715F4C3.6080208@loskot.net>

Mateusz Loskot wrote:
> This error is caused by missing libnetcdf.so symlink to
> libnetcdf.so.3.6.1. On Ubuntu Feisty, installation of libnetcdf package
> does not create this symlink, so you have to create it manually:
> 
> sudo ln -s /usr/lib/libnetcdf.so.3.6.1 /usr/lib/libnetcdf.so

Folks,

Small errata to my notes.
In order to get complete NetCDF environment installed on Ubuntu,
you need to install package named netcdfg-dev along libnetcdf3.

The package name is inconsistent for Debian world and I expected to find
libnetcdf-dev instead, so it's easy to miss it :-)

Summarizing, you need libnetcdf3 + netcdfg-dev

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dmorissette at mapgears.com  Wed Oct 17 08:50:05 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <4715C9FC.1010108@loskot.net>
References: <471058C5.1070402@pobox.com> <4715C9FC.1010108@loskot.net>
Message-ID: <471604FD.7000507@mapgears.com>

Mateusz Loskot wrote:
> 
> Regarding the #14, I think it could be interesting for us to get some
> details about organization preferences of getting support. If they find
> Trac and mailing list well working, helpful, friendly, or they would
> prefer to contact maintainers directly by e-mail or phone, etc.
> 

I suspect anyone would answer that they would prefer to have direct 
email/phone support, but I'm not sure it's a good idea to open that door 
in the survey. We should not forget that this is about sponsorship of a 
project, not a professional support package.

My 0.02$ anyway.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Wed Oct 17 10:15:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Sponsor Survey
In-Reply-To: <471604FD.7000507@mapgears.com>
References: <471058C5.1070402@pobox.com> <4715C9FC.1010108@loskot.net>
	<471604FD.7000507@mapgears.com>
Message-ID: <47161916.8000404@loskot.net>

Daniel Morissette wrote:
> Mateusz Loskot wrote:
>>
>> Regarding the #14, I think it could be interesting for us to get some
>> details about organization preferences of getting support. If they find
>> Trac and mailing list well working, helpful, friendly, or they would
>> prefer to contact maintainers directly by e-mail or phone, etc.
>>
> 
> I suspect anyone would answer that they would prefer to have direct
> email/phone support, but I'm not sure it's a good idea to open that door
> in the survey. We should not forget that this is about sponsorship of a
> project, not a professional support package.

Daniel,

Thanks for clarification.
Now, I understand it better and I agree with you.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Wed Oct 17 10:16:52 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:05 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <4715B647.2090405@loskot.net>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<4715B647.2090405@loskot.net>
Message-ID: <ADD56369-95C1-45F4-93AE-564153AB2924@kyngchaos.com>

I see that too - my Monday SVN snapshot is OK, today's snapshot has a  
line break in gdal.py.  It looks like it changed from using warn to  
Debug for the message, and a return was accidentally inserted.

On Oct 17, 2007, at 2:14 AM, Mateusz Loskot wrote:

> Howard Butler wrote:
>> All,
>>
>> Today I have enabled the next-gen bindings in trunk, and they are  
>> built
>> by default when using the --with-python target.  More testing is
>> needed/requested, so please file tickets or let me know in IRC of any
>> issues that arise.
>
> Hobu,
>
> I remember this issue have been reported already but I can't remember
> where and can't find it in GDAL tickets, so I decided to report it  
> here
> first. GDAL builds using --with-python and egg is prepared but  
> seems to
> be broken:
>
> ~/dev/gdal/_svn/trunk/gdal/swig/python $ export
> PYTHONPATH=/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/dist/ 
> GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg
>
>
> ~/dev/gdal/_svn/trunk/autotest $ ./run_all.py
> Traceback (most recent call last):
>   File "./run_all.py", line 30, in ?
>     import gdaltest
>   File "pymod/gdaltest.py", line 32, in ?
>     import gdal, osr
>   File
> "/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/dist/ 
> GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg/gdal.py",
> line 4
>     Debug("Deprecation Warning", 'gdal.py was placed in a  
> namespace, it
> is now availabl
>
>               ^
> SyntaxError: EOL while scanning single-quoted string
>
>
>
> Is this something known?
> I use Mac OS X 10.4 with Python 2.3.5
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Wed Oct 17 10:20:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] netcdf + ubuntu needs a trick
In-Reply-To: <OFC0D628B7.AA34D79A-ON85257377.00414A46-85257377.00416247@fws.gov>
References: <OFC0D628B7.AA34D79A-ON85257377.00414A46-85257377.00416247@fws.gov>
Message-ID: <47161A1F.1080501@loskot.net>

Doug,

Yes, you're right it's for Feisty Fawn.

p.s. I added gdal-dev to the CC

Mateusz


Doug_Newcomb@fws.gov wrote:
> Mateusz,
>       I assume this is for the Fiesty Fawn release, not the Gutsy Gibbon.
> 
> Doug
> 
> 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
> ---------------------------------------------------------------------------------------------------------
> 
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
> I left my signature file in /dev/null
> 
> 
>                                                                            
>              Mateusz Loskot                                                
>              <mateusz@loskot.n                                             
>              et>                                                        To 
>              Sent by:                  gdal <gdal-dev@lists.maptools.org>  
>              gdal-dev-bounces@                                          cc 
>              lists.maptools.or                                             
>              g                                                     Subject 
>                                        Re: [Gdal-dev] netcdf + ubuntu      
>                                        needs a trick                       
>              10/17/2007 07:40                                              
>              AM                                                            
>                                                                            
>                                                                            
>                                                                            
>                                                                            
> 
> 
> 
> 
> Mateusz Loskot wrote:
>> This error is caused by missing libnetcdf.so symlink to
>> libnetcdf.so.3.6.1. On Ubuntu Feisty, installation of libnetcdf package
>> does not create this symlink, so you have to create it manually:
>>
>> sudo ln -s /usr/lib/libnetcdf.so.3.6.1 /usr/lib/libnetcdf.so
> 
> Folks,
> 
> Small errata to my notes.
> In order to get complete NetCDF environment installed on Ubuntu,
> you need to install package named netcdfg-dev along libnetcdf3.
> 
> The package name is inconsistent for Debian world and I expected to find
> libnetcdf-dev instead, so it's easy to miss it :-)
> 
> Summarizing, you need libnetcdf3 + netcdfg-dev
> 
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 17 10:24:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <4715B647.2090405@loskot.net>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<4715B647.2090405@loskot.net>
Message-ID: <47161B03.50509@loskot.net>

Mateusz Loskot wrote:
> Howard Butler wrote:
>> All,
>>
>> Today I have enabled the next-gen bindings in trunk, and they are built
>> by default when using the --with-python target.  More testing is
>> needed/requested, so please file tickets or let me know in IRC of any
>> issues that arise.
> 
> Hobu,
> 
> I remember this issue have been reported already but I can't remember
> where and can't find it in GDAL tickets, so I decided to report it here
> first.

Just to avoid confusions, I've found that I saw this
error on the telascience builders:

http://buildbot.osgeo.org:8500/telascience-full/builds/792/step-test/0

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From hobu.inc at gmail.com  Wed Oct 17 11:06:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <ADD56369-95C1-45F4-93AE-564153AB2924@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<4715B647.2090405@loskot.net>
	<ADD56369-95C1-45F4-93AE-564153AB2924@kyngchaos.com>
Message-ID: <1EB16210-3C29-491A-AE68-394895D61BCE@gmail.com>

Oops.  Fixed.

Howard

On Oct 17, 2007, at 9:16 AM, William Kyngesburye wrote:

> I see that too - my Monday SVN snapshot is OK, today's snapshot has  
> a line break in gdal.py.  It looks like it changed from using warn  
> to Debug for the message, and a return was accidentally inserted.
>
> On Oct 17, 2007, at 2:14 AM, Mateusz Loskot wrote:
>
>> Howard Butler wrote:
>>> All,
>>>
>>> Today I have enabled the next-gen bindings in trunk, and they are  
>>> built
>>> by default when using the --with-python target.  More testing is
>>> needed/requested, so please file tickets or let me know in IRC of  
>>> any
>>> issues that arise.
>>
>> Hobu,
>>
>> I remember this issue have been reported already but I can't remember
>> where and can't find it in GDAL tickets, so I decided to report it  
>> here
>> first. GDAL builds using --with-python and egg is prepared but  
>> seems to
>> be broken:
>>
>> ~/dev/gdal/_svn/trunk/gdal/swig/python $ export
>> PYTHONPATH=/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/ 
>> dist/GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg
>>
>>
>> ~/dev/gdal/_svn/trunk/autotest $ ./run_all.py
>> Traceback (most recent call last):
>>   File "./run_all.py", line 30, in ?
>>     import gdaltest
>>   File "pymod/gdaltest.py", line 32, in ?
>>     import gdal, osr
>>   File
>> "/Users/mloskot/dev/gdal/_svn/trunk/gdal/swig/python/dist/ 
>> GDAL_OGR-1.5.0-py2.3-macosx-10.4-i386.egg/gdal.py",
>> line 4
>>     Debug("Deprecation Warning", 'gdal.py was placed in a  
>> namespace, it
>> is now availabl
>>
>>               ^
>> SyntaxError: EOL while scanning single-quoted string
>>
>>
>>
>> Is this something known?
>> I use Mac OS X 10.4 with Python 2.3.5
>>
>> Cheers
>> -- 
>> Mateusz Loskot
>> http://mateusz.loskot.net
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Those people who most want to rule people are, ipso-facto, those  
> least suited to do it."
>
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
>
>


From klokan at klokan.cz  Wed Oct 17 11:55:13 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:51:06 2007
Subject: =?ISO-8859-2?Q?Re:_[Gdal-dev]_Motion:_Committer?=
	=?ISO-8859-2?Q?_Status_for_Petr_P=F8idal_(Klokan)?=
In-Reply-To: <20071015170352.GA26572@ak4719.spb.edu>
References: <5507E6C6-8820-4243-A0DE-91790460E12B@gmail.com>
	<20071015170352.GA26572@ak4719.spb.edu>
Message-ID: <6e41d95b0710170855i1b19b84l5b833609fa9bfec6@mail.gmail.com>

Thank you for confidence...

I will try to improve the GDAL2Tiles in my spare time, with direct
access to SVN changes will be easier.
The chance to attend FOSS4G in Canada was great, as I have seen most
of you there... thanks a lot Google Inc.

Klokan

On 15/10/2007, Andrey Kiselev <dron@ak4719.spb.edu> wrote:
> On Thu, Oct 11, 2007 at 11:09:36AM -0500, Howard Butler wrote:
> > I motion to extend committer status to Petr P?idal (Klokan).
> >
> > --
> >
> > Petr was part of the Google Summer of Code in 2007 and worked on the
> > gdal2tiles.py utility.  His SoC project was an excellent addition,
> > and his experience with the raster side of KML has and should
> > continue to be valuable to GDAL's development efforts.  Commit access
> > will allow him to continue to improve and maintain gdal2tiles without
> > me clogging up the works as we ready the GDAL 1.5 release.  Assuming
> > he agrees to RFC 3, I propose that we provide Petr commit access.
>
> +1 for Petr,
>
> Best regrds,
> Andrey
>
> --
> Andrey V. Kiselev
> ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From 2voodoo at gmx.de  Wed Oct 17 15:40:46 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem in using the dll in another dll
Message-ID: <4716653E.4000404@gmx.de>

Hello there,

I want to use GDAL in a project on windows CE - I was about using it in
a C++ Dll so thing I have done is:
*Compiled GDAL for Windows CE
*Imported the generated .lib into my C++ Windows CE DLL Project
*Included "gdal_prev.h" via "#include <gdal_priv.h>"
*Compiled my DLL

Everything worked fine in Visual Studio 2005 - every Class and Function
was found.
As I wanted to use the DLL with my C# Application the Application threw
an exception which said that it could not find my DLL
(this is strange as it is in the same folder).
The thing is that if I remove the Include of gdal_prev.h (and comment
out the code that uses this), recompile and use it wih my app it works
as usual.
The DLL is found and does what it should.
There are no compile errors or warnings or anything, just the Messagebox
telling me that the DLL is not found (it even does not speak of GDAL) if
the include is used (even without code).
Besides this I can speak to the GDALCE.dll without my "Proxy"-DLL (which
I do need) and get information, and lot data and so on - so I do not think
that it is a problem of mis-compiling. Maybe some settings problem?
I am using Visual Studio 2005, C++ for my DLL and compiled GDAL with
VS2005 for Windows CE, too.

So do you have any suggestion?

Thanks in advance,
Tom

From mateusz at loskot.net  Wed Oct 17 16:09:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem in using the dll in another dll
In-Reply-To: <4716653E.4000404@gmx.de>
References: <4716653E.4000404@gmx.de>
Message-ID: <47166C08.2010209@loskot.net>

Tom Kazimiers wrote:
> Hello there,
> 
> I want to use GDAL in a project on windows CE - I was about using it in
> a C++ Dll so thing I have done is:
> *Compiled GDAL for Windows CE
> *Imported the generated .lib into my C++ Windows CE DLL Project
> *Included "gdal_prev.h" via "#include <gdal_priv.h>"
> *Compiled my DLL
> 
> Everything worked fine in Visual Studio 2005 - every Class and Function
> was found.
> As I wanted to use the DLL with my C# Application the Application threw
> an exception which said that it could not find my DLL
> (this is strange as it is in the same folder).
> [...]
> 
> So do you have any suggestion?

Tom,

Check where GDAL DLL was deployed and where is your application.
Usually, VS2005 deploys DLL/EXE files into separate folders,
according to projects ie. \Program Files\project1\my.dll,
\Program Files\project2\my.exe, etc.
You need to manually re-configure deployment settings in your projects
so all binaries go to the same folder.

Second, you need to build PROJ.4 DLL and copy it along with gdal.dll.
proj.dll is loaded dynamically by GDAL (check ogr\ogrct.cpp file).

Third, if you build GDAL with GEOS support, you also need to copy GEOS
DLL files together with gdal.dll and proj.dll.

Generally, tracking dependencies for Windows CE may be tricky.
I configured complete framework as apart of MOSS4G project:
http://trac.osgeo.org/moss4g/
So, perhaps you will find it easier to grab moss4g\libs and checkout
GDAL, GEOS and PROJ.4 into proper sub-directories and then use avaialble
solution (moss4g_libs.sln) and project files.
Everything (projects) is configured and should work out of the box,
you only need to grab sources - get_libs.bat will do it for you.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Oct 17 17:56:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdal NG python bindings and deprecation warning
Message-ID: <4716852A.9060404@pobox.com>

Howard,

I have altered the GDAL NG Python bindings to issue a deprecation warning
for the first import of a non-namespaced module only in a given session.
This is accomplished by reporting the warning through gdal.deprecation_warn()
and having that function maintain a global variable on the gdal module.

This was folks will see the deprecation warning, but won't be overwhelmed by
a flurry of warnings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 17 18:27:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <47154A53.1030209@ualg.pt>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt>
Message-ID: <47168C4B.30605@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> Although there is no track ticked assigned to it, it has been often 
> referred here the problem of the
> netCDF up-down flipping (and Surfer grids btw).
> 
> The problem is that SetProjection() in netcdfdataset.cpp assumes the Y 
> coordinates vector is given
> in descending order. So line n? 1087 (todays - 17-10-2007 svn version)
> 
>            poDS->adfGeoTransform[5] = (( pdfYCoord[ydim-1] -
>                          pdfYCoord[0] ) /
>                        ( poDS->nRasterYSize - 1 ));
> 
> and line 1098
>                  poDS->adfGeoTransform[3] = pdfYCoord[0]
>                      - (poDS->adfGeoTransform[5] / 2);
> 
> are expected to give a negative dy and the top left point.
> 
> However, the most common practice for Y orientation is increasing from 
> bottom to top and not
> the other way around.
> To correct this problem one can add,  after line  1089
>            if ( poDS->adfGeoTransform[5] > 0 )
>             poDS->adfGeoTransform[5] *= -1;
> 
> which will work for both Y orientations
> 
> This corrects for the bad Upper Left when Y "grows up", but I here don't 
> know a solution that works
> for both Y orientation cases.
> 
>                  poDS->adfGeoTransform[3] = pdfYCoord[ydim-1]
>                      - (poDS->adfGeoTransform[5] / 2);
> 
> 
> A related note. With the risk of looking impatient (which I am) this 
> netCDF driver bugs are trailing
> for such a long time. Can't they be killed once for all?

Joaquim,

I believe we need someone to step up and take ownership of the netcdf
driver.  It seems that Denis Nadeau does not have the time to do a lot of
new work on it, and I have been trying to duck these issues.  Are you
interested in taking on responsibility for it?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Wed Oct 17 19:44:18 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <47168C4B.30605@pobox.com>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt> <47168C4B.30605@pobox.com>
Message-ID: <47169E52.3040607@ualg.pt>

Frank Warmerdam wrote:
>
> Joaquim,
>
> I believe we need someone to step up and take ownership of the netcdf
> driver.  It seems that Denis Nadeau does not have the time to do a lot of
> new work on it, and I have been trying to duck these issues.  Are you
> interested in taking on responsibility for it?

Frank,
I'm honored and willing to help but I think you overestimated my 
programing skills.
I must warn you (and the others) that I can more or less read C++ but 
that is not a language that I practice.
So, I can give my contribution but don't know if that is enough to say 
that I'll be responsible
for the driver.

Joaquim

From warmerdam at pobox.com  Wed Oct 17 22:40:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <47169E52.3040607@ualg.pt>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt> <47168C4B.30605@pobox.com>
	<47169E52.3040607@ualg.pt>
Message-ID: <4716C7BB.2090508@pobox.com>

Joaquim Luis wrote:
> Frank Warmerdam wrote:
>>
>> Joaquim,
>>
>> I believe we need someone to step up and take ownership of the netcdf
>> driver.  It seems that Denis Nadeau does not have the time to do a lot of
>> new work on it, and I have been trying to duck these issues.  Are you
>> interested in taking on responsibility for it?
> 
> Frank,
> I'm honored and willing to help but I think you overestimated my 
> programing skills.
> I must warn you (and the others) that I can more or less read C++ but 
> that is not a language that I practice.
> So, I can give my contribution but don't know if that is enough to say 
> that I'll be responsible
> for the driver.

Joaquim,

Assuming this isn't false modesty, it might be better if you acted as
tester and perhaps providing some patches rather than taking on primary
responsibility.

Paavo Jumppanen has proposed some substantial upgrades to the netcdf
driver ...   too comprehensive for me to make a quick analysis.  Perhaps
you could try integrating them in a local build and test them to see if
they seem appropriate?

   http://trac.osgeo.org/gdal/ticket/1808

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rsignell at usgs.gov  Wed Oct 17 21:43:53 2007
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <4716C7BB.2090508@pobox.com>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt> <47168C4B.30605@pobox.com>
	<47169E52.3040607@ualg.pt> <4716C7BB.2090508@pobox.com>
Message-ID: <61033b870710171843x6462837r93429ee5af721fc6@mail.gmail.com>

Frank,

What do you think about asking the Unidata and/or CF folks if they are
interested in taking responsibility for the NetCDF driver?

There has been a lot of discussion and interest lately on geospatial
referencing conventions for NetCDF, and GDAL is a nice test
application.

-Rich

On 10/17/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Joaquim Luis wrote:
> > Frank Warmerdam wrote:
> >>
> >> Joaquim,
> >>
> >> I believe we need someone to step up and take ownership of the netcdf
> >> driver.  It seems that Denis Nadeau does not have the time to do a lot of
> >> new work on it, and I have been trying to duck these issues.  Are you
> >> interested in taking on responsibility for it?
> >
> > Frank,
> > I'm honored and willing to help but I think you overestimated my
> > programing skills.
> > I must warn you (and the others) that I can more or less read C++ but
> > that is not a language that I practice.
> > So, I can give my contribution but don't know if that is enough to say
> > that I'll be responsible
> > for the driver.
>
> Joaquim,
>
> Assuming this isn't false modesty, it might be better if you acted as
> tester and perhaps providing some patches rather than taking on primary
> responsibility.
>
> Paavo Jumppanen has proposed some substantial upgrades to the netcdf
> driver ...   too comprehensive for me to make a quick analysis.  Perhaps
> you could try integrating them in a local build and test them to see if
> they seem appropriate?
>
>    http://trac.osgeo.org/gdal/ticket/1808
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From Mario.Cruz at esa.int  Thu Oct 18 05:05:03 2007
From: Mario.Cruz at esa.int (Mario Cruz)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <4716C7BB.2090508@pobox.com>
Message-ID: <OFEDCA0069.2DAD389F-ONC1257378.002F0B68-C1257378.0031E4C9@esa.int>

> Joaquim Luis wrote:
> > Frank Warmerdam wrote:
> >>
> >> Joaquim,
> >>
> >> I believe we need someone to step up and take ownership of the netcdf
> >> driver.  It seems that Denis Nadeau does not have the time to do a 
lot of
> >> new work on it, and I have been trying to duck these issues.  Are you
> >> interested in taking on responsibility for it?
> > 
> > Frank,
> > I'm honored and willing to help but I think you overestimated my 
> > programing skills.
> > I must warn you (and the others) that I can more or less read C++ but 
> > that is not a language that I practice.
> > So, I can give my contribution but don't know if that is enough to say 

> > that I'll be responsible
> > for the driver.
> 
> Joaquim,
> 
> Assuming this isn't false modesty, it might be better if you acted as
> tester and perhaps providing some patches rather than taking on primary
> responsibility.
> 
> Paavo Jumppanen has proposed some substantial upgrades to the netcdf
> driver ...   too comprehensive for me to make a quick analysis.  Perhaps
> you could try integrating them in a local build and test them to see if
> they seem appropriate?
> 
>    http://trac.osgeo.org/gdal/ticket/1808
> 

The update adds features, but doesn't fix any issues in the existing 
driver.

It does seem to allow access to variables with one dimension, which would 
address my previous unanswered question. Although it requires knowledge 
about the dataset, thus reducing GDAL's value as a nice exploratory 
platform. But it isn't meant to be one, anyway.

Well, thanks for the link, I'll also be merging it with my codebase to 
give it a spin and see how it works.

Best regards, 

Mario Cruz


From Laurent.Saez at equipement.gouv.fr  Thu Oct 18 05:42:52 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] reproject a big ecw
Message-ID: <5F827424D35BD311BBA300902798C054053729A6@ct13-mel.cete-mediterranee.i2>

Hi,

I've a big problem with gdalwarp.
I've to reproject a big ecw from the NTF - Lambert II ?tendu to the RGF93 - Lambert 93.
The ecw source file is about 7 Go. The final file will be also in ecw format.
I use FWTools 1.3.9 on Windows XP SP2 with 2 Go of RAM.
I have to make an intermediate file in ENVI hdr format because it seems that gdalwarp can't creat ecw files.
I use the syntax below to do the job :

gdalwarp --DEBUG ON --config GDAL_CACHEMAX 400 -wm 400 -rn -tr 0.5 0.5 -of EHdr -co "INTERLEAVE=BIL" -s_srs "+proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0 +nadgrids=NTF2RGF93.gsb +units=m +wktext"  -t_srs EPSG:2154 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-L93-C10.bil"

The job is stopped with the following message :
ECWDataset: RasterIO(42565,10965,8846,5773 -> 8846x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=42565,10965,8846x5773 Dst=43937,11385,8788x5692
ERROR 2: Failed to allocate 153230412 byte source buffer.
GDAL: GDALClose(G:\34-2005-LA2E-C10.ecw)
GDAL: GDALClose(I:\34-2005-L93-C10.bil)
GDAL: GDALDeregister_GTiff() called.

What am I doing wrong ?

Thanks


From j.l.h.hartmann at uva.nl  Thu Oct 18 07:51:43 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdalwarp: difference between -tps and -order 1
In-Reply-To: <20070831090444.GA12773@ak4719.spb.edu>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu>
Message-ID: <471748CF.2040800@uva.nl>

Hi,

I'm georeferencing historical maps that are not geometrically correct. 
When I warp them with control points to a modern map, using a first 
order rigid transformation (gdalwarp -order 1), the resulting, 
georeferenced map will keep its original form. This means that the 
position of the control points on the georeferenced historical map is 
different from those on the modern map. Warping with  a thin plate 
spline (gdalwarp -tps) results in a georeferenced map with the control 
points exactly on the same place on both maps, which is what I want of 
course.

I can see the difference between both methods visually, but I would like 
also to obtain the numerical coodinates of the control points after 
warping them with both methods. That way I can compute the differences 
between both methods and construct a distortion map. So essentially I 
would like to have a warping program that does not output a raster, but 
produces the coordinates of the transformed input control points. I 
already did this for the first order transformation (pretty elementary), 
but how could this be done for the thin plate spline transformation? 
Where should I look in the gdal codebase to extract the algorithm? 
Alternatively, if an expert would program this, how much would that cost?

Jan

From warmerdam at pobox.com  Thu Oct 18 08:33:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdalwarp: difference between -tps and -order 1
In-Reply-To: <471748CF.2040800@uva.nl>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu> <471748CF.2040800@uva.nl>
Message-ID: <471752A4.1010502@pobox.com>

Jan Hartmann wrote:
> Hi,
> 
> I'm georeferencing historical maps that are not geometrically correct. 
> When I warp them with control points to a modern map, using a first 
> order rigid transformation (gdalwarp -order 1), the resulting, 
> georeferenced map will keep its original form. This means that the 
> position of the control points on the georeferenced historical map is 
> different from those on the modern map. Warping with  a thin plate 
> spline (gdalwarp -tps) results in a georeferenced map with the control 
> points exactly on the same place on both maps, which is what I want of 
> course.
> 
> I can see the difference between both methods visually, but I would like 
> also to obtain the numerical coodinates of the control points after 
> warping them with both methods. That way I can compute the differences 
> between both methods and construct a distortion map. So essentially I 
> would like to have a warping program that does not output a raster, but 
> produces the coordinates of the transformed input control points. I 
> already did this for the first order transformation (pretty elementary), 
> but how could this be done for the thin plate spline transformation? 
> Where should I look in the gdal codebase to extract the algorithm? 
> Alternatively, if an expert would program this, how much would that cost?

Jan,

In C++ you can construct your "TPSTransformer" and use it to transform
individual points.  But currently this is not available from command
line utilities or the swig bindings.

This is an example of instantating a TPS transformer:

             psInfo->pSrcTPSTransformArg =
                 GDALCreateTPSTransformer( GDALGetGCPCount( hSrcDS ),
                                           GDALGetGCPs( hSrcDS ), FALSE );

And this is an example of actually transforming a point with it.

         if( !GDALTPSTransform( pTPSTransformArg, FALSE,
                                nPointCount, padfX, padfY, padfZ,
                                panSuccess ) )
             return FALSE;

More complete code is available in:

   gdal/alg/gdaltransformer.cpp
   gdal/alg/gdal_tps.cpp

For a compatriot from the old country I would be willing to prepare
a small command line program for free if we can work out the specifications
offline.

At some point I'd like to expose more of the warper and transformer APIs
via swig, but they involve a lot of callbacks and idiosyncratic data
structures.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct 18 09:51:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] reproject a big ecw
In-Reply-To: <5F827424D35BD311BBA300902798C054053729A6@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C054053729A6@ct13-mel.cete-mediterranee.i2>
Message-ID: <471764C5.8080902@pobox.com>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> I've a big problem with gdalwarp.
> I've to reproject a big ecw from the NTF - Lambert II ?tendu to the RGF93 - Lambert 93.
> The ecw source file is about 7 Go. The final file will be also in ecw format.
> I use FWTools 1.3.9 on Windows XP SP2 with 2 Go of RAM.
> I have to make an intermediate file in ENVI hdr format because it seems that gdalwarp can't creat ecw files.
> I use the syntax below to do the job :
> 
> gdalwarp --DEBUG ON --config GDAL_CACHEMAX 400 -wm 400 -rn -tr 0.5 0.5 -of EHdr -co "INTERLEAVE=BIL" -s_srs "+proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0 +nadgrids=NTF2RGF93.gsb +units=m +wktext"  -t_srs EPSG:2154 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-L93-C10.bil"
> 
> The job is stopped with the following message :
> ECWDataset: RasterIO(42565,10965,8846,5773 -> 8846x5773) - doing interleaved rea
> d.
> GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
> Src=42565,10965,8846x5773 Dst=43937,11385,8788x5692
> ERROR 2: Failed to allocate 153230412 byte source buffer.
> GDAL: GDALClose(G:\34-2005-LA2E-C10.ecw)
> GDAL: GDALClose(I:\34-2005-L93-C10.bil)
> GDAL: GDALDeregister_GTiff() called.

Larent,

The error is an "out of memory" error.  One possibility is that you
configured things (via GDAL_CACHEMAX and -wm) to use more
memory than you have practically available.  The other is that there
is a memory leak somewhere that is causing problems.

Did you get this error immediately or was there a bunch of progress (as
reported by the percent complete progress monitor) first?

The recent fix to a memory leak described in:

   http://trac.osgeo.org/gdal/ticket/1922

might be related, though I'm a bit doubtful.

PS. using a tiled format such as HFA (Erdas Imagine) may be better than
a scanline oriented format like EHdr for your working file.  It maps better
to the "chunks" that the warper operates on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Laurent.Saez at equipement.gouv.fr  Thu Oct 18 10:39:18 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] reproject a big ecw
Message-ID: <5F827424D35BD311BBA300902798C054053729AF@ct13-mel.cete-mediterranee.i2>

Hi,

Thanks for you prompt response.

The BIL file produced is about 37 Go.
I'm going to try the same function with HFA format like you suggest.
If this doesn't resolve my problem I will wait the next FWTools version.
Frank, do you think that I should try to process gdalwarp without "--config GDAL_CACHEMAX 400 -wm 400" ?

Thanks for your help

Here is all the messages returned by "--DEBUG ON" :

----------------------------------------------------------------------------------
C:\Program Files\FWTools1.3.9>gdalwarp --DEBUG ON --config GDAL_CACHEMAX 400 -wm
 400 -rn -tr 0.5 0.5 -of EHdr -co "INTERLEAVE=BIL" -s_srs "+proj=lcc +a=6378249.
2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20'14.025E +lat_1=45d53'56.108N +lat_2
=47d41'45.652N +x_0=600000.0 +y_0=2200000.0 +nadgrids=NTF2RGF93.gsb +units=m +wk
text"  -t_srs EPSG:2154 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-L93-C10.bil"
ECW: NCScbmOpenFileView(G:\34-2005-LA2E-C10.ecw): eErr = 0
ECW: FileInfo: SizeXY=280000,180000 Bands=3
       OriginXY=615000,1.89e+006  CellIncrementXY=0.5,-0.5

ECW: projection=LM2FRANC, datum=NTF
GDAL: GDALOpen(G:\34-2005-LA2E-C10.ecw) succeeds as ECW.
OGRCT: Source: +proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20
'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0
+nadgrids=NTF2RGF93.gsb +units=m +wktext
OGRCT: Target: +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y
_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
OGRCT: Source: +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y
_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
OGRCT: Target: +proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20
'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0
+nadgrids=NTF2RGF93.gsb +units=m +wktext
GDAL: GDALClose(G:\34-2005-LA2E-C10.ecw)
Creating output file that is 281206P x 182161L.
GDAL: GDALDriver::Create(EHdr,I:\34-2005-L93-C10.bil,281206,182161,3,Byte,017401
68)
GDALRaw: RawRasterBand(017CF2A8,1,017CD768,
              Off=0,PixOff=1,LineOff=843618,Byte,1)

GDALRaw: RawRasterBand(017CF2A8,2,017CD768,
              Off=281206,PixOff=1,LineOff=843618,Byte,1)

GDALRaw: RawRasterBand(017CF2A8,3,017CD768,
              Off=562412,PixOff=1,LineOff=843618,Byte,1)

GDAL: GDALOpen(I:\34-2005-L93-C10.bil) succeeds as EHdr.
ECW: NCScbmOpenFileView(G:\34-2005-LA2E-C10.ecw): eErr = 0
ECW: FileInfo: SizeXY=280000,180000 Bands=3
       OriginXY=615000,1.89e+006  CellIncrementXY=0.5,-0.5

ECW: projection=LM2FRANC, datum=NTF
GDAL: GDALOpen(G:\34-2005-LA2E-C10.ecw) succeeds as ECW.
Processing input file G:\34-2005-LA2E-C10.ecw.
OGRCT: Source: +proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20
'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0
+nadgrids=NTF2RGF93.gsb +units=m +wktext
OGRCT: Target: +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y
_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
OGRCT: Source: +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y
_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
OGRCT: Target: +proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20
'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0
+nadgrids=NTF2RGF93.gsb +units=m +wktext
ECWDataset: RasterIO(0,0,7332,5711 -> 7332x5711) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,0,7332x5711 Dst=0,0,8787x5692
:0ECWDataset: RasterIO(0,5636,7380,5774 -> 7380x5774) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,5636,7380x5774 Dst=0,5692,8787x5693
ECWDataset: RasterIO(7283,0,8846,5637 -> 8846x5637) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7283,0,8846x5637 Dst=8787,0,8788x5692
ECWDataset: RasterIO(7331,5562,8846,5774 -> 8846x5774) - doing interleaved read.

GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7331,5562,8846x5774 Dst=8787,5692,8788x5693
ECWDataset: RasterIO(0,11335,7428,5773 -> 7428x5773) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,11335,7428x5773 Dst=0,11385,8787x5692
ECWDataset: RasterIO(0,17033,7476,5773 -> 7476x5773) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,17033,7476x5773 Dst=0,17077,8787x5693
ECWDataset: RasterIO(7379,11261,8846,5773 -> 8846x5773) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7379,11261,8846x5773 Dst=8787,11385,8788x5692
ECWDataset: RasterIO(7427,16959,8846,5774 -> 8846x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7427,16959,8846x5774 Dst=8787,17077,8788x5693
ECWDataset: RasterIO(16080,0,8845,5563 -> 8845x5563) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16080,0,8845x5563 Dst=17575,0,8787x5692
ECWDataset: RasterIO(16128,5488,8845,5774 -> 8845x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16128,5488,8845x5774 Dst=17575,5692,8787x5693
ECWDataset: RasterIO(24876,0,8846,5489 -> 8846x5489) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=24876,0,8846x5489 Dst=26362,0,8788x5692
ECWDataset: RasterIO(24924,5414,8846,5774 -> 8846x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=24924,5414,8846x5774 Dst=26362,5692,8788x5693
ECWDataset: RasterIO(16176,11187,8845,5773 -> 8845x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16176,11187,8845x5773 Dst=17575,11385,8787x5692
ECWDataset: RasterIO(16224,16885,8845,5774 -> 8845x5774) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16224,16885,8845x5774 Dst=17575,17077,8787x5693
ECWDataset: RasterIO(24972,11113,8846,5773 -> 8846x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=24972,11113,8846x5773 Dst=26362,11385,8788x5692
ECWDataset: RasterIO(25020,16811,8846,5774 -> 8846x5774) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=25020,16811,8846x5774 Dst=26362,17077,8788x5693
ECWDataset: RasterIO(0,22732,7524,5772 -> 7524x5772) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,22732,7524x5772 Dst=0,22770,8787x5692
ECWDataset: RasterIO(0,28429,7572,5774 -> 7572x5774) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,28429,7572x5774 Dst=0,28462,8787x5693
ECWDataset: RasterIO(7475,22658,8846,5772 -> 8846x5772) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7475,22658,8846x5772 Dst=8787,22770,8788x5692
ECWDataset: RasterIO(7523,28355,8846,5774 -> 8846x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7523,28355,8846x5774 Dst=8787,28462,8788x5693
ECWDataset: RasterIO(0,34128,7619,5773 -> 7619x5773) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,34128,7619x5773 Dst=0,34155,8787x5692
ECWDataset: RasterIO(0,39826,7667,5774 -> 7667x5774) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=0,39826,7667x5774 Dst=0,39847,8787x5693
ECWDataset: RasterIO(7571,34054,8846,5773 -> 8846x5773) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7571,34054,8846x5773 Dst=8787,34155,8788x5692
ECWDataset: RasterIO(7618,39752,8846,5774 -> 8846x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=7618,39752,8846x5774 Dst=8787,39847,8788x5693
ECWDataset: RasterIO(16272,22584,8845,5772 -> 8845x5772) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16272,22584,8845x5772 Dst=17575,22770,8787x5692
ECWDataset: RasterIO(16320,28282,8845,5773 -> 8845x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16320,28282,8845x5773 Dst=17575,28462,8787x5693
.ECWDataset: RasterIO(25068,22510,8846,5773 -> 8846x5773) - doing interleaved re
ad.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=25068,22510,8846x5773 Dst=26362,22770,8788x5692
ECWDataset: RasterIO(25116,28208,8846,5773 -> 8846x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=25116,28208,8846x5773 Dst=26362,28462,8788x5693
ECWDataset: RasterIO(16368,33980,8845,5773 -> 8845x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16368,33980,8845x5773 Dst=17575,34155,8787x5692
ECWDataset: RasterIO(16416,39678,8844,5774 -> 8844x5774) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=16416,39678,8844x5774 Dst=17575,39847,8787x5693
ECWDataset: RasterIO(25164,33906,8846,5773 -> 8846x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=25164,33906,8846x5773 Dst=26362,34155,8788x5692
ECWDataset: RasterIO(25212,39604,8846,5774 -> 8846x5774) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=25212,39604,8846x5774 Dst=26362,39847,8788x5693
ECWDataset: RasterIO(33673,0,8845,5415 -> 8845x5415) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=33673,0,8845x5415 Dst=35150,0,8787x5692
ECWDataset: RasterIO(33721,5340,8845,5774 -> 8845x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=33721,5340,8845x5774 Dst=35150,5692,8787x5693
ECWDataset: RasterIO(42469,0,8846,5341 -> 8846x5341) - doing interleaved read.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=42469,0,8846x5341 Dst=43937,0,8788x5692
ECWDataset: RasterIO(42517,5266,8846,5774 -> 8846x5774) - doing interleaved read
.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=42517,5266,8846x5774 Dst=43937,5692,8788x5693
ECWDataset: RasterIO(33769,11039,8845,5773 -> 8845x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=33769,11039,8845x5773 Dst=35150,11385,8787x5692
ECWDataset: RasterIO(33817,16737,8845,5774 -> 8845x5774) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=33817,16737,8845x5774 Dst=35150,17077,8787x5693
ECWDataset: RasterIO(42565,10965,8846,5773 -> 8846x5773) - doing interleaved rea
d.
GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
Src=42565,10965,8846x5773 Dst=43937,11385,8788x5692
ERROR 2: Failed to allocate 153230412 byte source buffer.
GDAL: GDALClose(G:\34-2005-LA2E-C10.ecw)
GDAL: GDALClose(I:\34-2005-L93-C10.bil)
GDAL: GDALDeregister_GTiff() called.
---------------------------------------------------------------------------------------


-----Message d'origine-----
De : Frank Warmerdam [mailto:warmerdam@pobox.com]
Envoy? : jeudi 18 octobre 2007 15:51
? : "SAEZ Laurent - CETE M?diterr./DI/ETER"
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] reproject a big ecw


SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> I've a big problem with gdalwarp.
> I've to reproject a big ecw from the NTF - Lambert II ?tendu to the RGF93 - Lambert 93.
> The ecw source file is about 7 Go. The final file will be also in ecw format.
> I use FWTools 1.3.9 on Windows XP SP2 with 2 Go of RAM.
> I have to make an intermediate file in ENVI hdr format because it seems that gdalwarp can't creat ecw files.
> I use the syntax below to do the job :
> 
> gdalwarp --DEBUG ON --config GDAL_CACHEMAX 400 -wm 400 -rn -tr 0.5 0.5 -of EHdr -co "INTERLEAVE=BIL" -s_srs "+proj=lcc +a=6378249.2 +b=6356515.0 +lat_0=46d48'0.0N +lon_0=2d20'14.025E +lat_1=45d53'56.108N +lat_2=47d41'45.652N +x_0=600000.0 +y_0=2200000.0 +nadgrids=NTF2RGF93.gsb +units=m +wktext"  -t_srs EPSG:2154 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-L93-C10.bil"
> 
> The job is stopped with the following message :
> ECWDataset: RasterIO(42565,10965,8846,5773 -> 8846x5773) - doing interleaved rea
> d.
> GDAL: GDALWarpKernel()::GWKNearestNoMasksByte()
> Src=42565,10965,8846x5773 Dst=43937,11385,8788x5692
> ERROR 2: Failed to allocate 153230412 byte source buffer.
> GDAL: GDALClose(G:\34-2005-LA2E-C10.ecw)
> GDAL: GDALClose(I:\34-2005-L93-C10.bil)
> GDAL: GDALDeregister_GTiff() called.

Larent,

The error is an "out of memory" error.  One possibility is that you
configured things (via GDAL_CACHEMAX and -wm) to use more
memory than you have practically available.  The other is that there
is a memory leak somewhere that is causing problems.

Did you get this error immediately or was there a bunch of progress (as
reported by the percent complete progress monitor) first?

The recent fix to a memory leak described in:

   http://trac.osgeo.org/gdal/ticket/1922

might be related, though I'm a bit doubtful.

PS. using a tiled format such as HFA (Erdas Imagine) may be better than
a scanline oriented format like EHdr for your working file.  It maps better
to the "chunks" that the warper operates on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dron at ak4719.spb.edu  Thu Oct 18 10:57:48 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
In-Reply-To: <470E50A5.5050608@atmos.washington.edu>
References: <470E50A5.5050608@atmos.washington.edu>
Message-ID: <20071018145747.GA20415@ak4719.spb.edu>

On Thu, Oct 11, 2007 at 09:34:45AM -0700, Jan Cermak wrote:
> From a MODIS MYD021km file I am trying to read band data including 
> offset and scaling factors. Band data works just fine, but I can't get 
> offset and scale. Without offset and scale the data is completely 
> useless, so this seems to be a major issue to me.
> 
> Here is some sample code:
> 
> dsobj = 
> gdal.Open('HDF4_EOS:EOS_SWATH:"myfile.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
> bandobj = dsobj.GetRasterBand(1)
> scale = bandobj.GetScale()
> offset = bandobj.GetOffset()
> 
> scale and offset variables are empty.
> 
> I am using yesterday's stable branch nightly.
> A sample file is at
> ftp://ladsweb.nascom.nasa.gov/allData/5/MYD021KM/2006/220/MYD021KM.A2006220.1330.005.2007140045620.hdf
> 
> For this file and data set, HDFView yields:
> radiance_scales = 
> 0.0072957743,0.0051752976,0.0037723905,0.0029522364,0.0023176796,0.001162374,5.6182046E-4,0.0011558639,4.1845915E-4,9.5770456E-4,6.215421E-4,0.006355153,0.009465027,0.0069601014,0.0027906199
> radiance_offsets = 
> 316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722

Hi Jan,

Finally I have solved this problem. These data now fetched and added to
the list of metadata, so you can use it in you code:

$ gdalinfo HDF4_EOS:EOS_SWATH:"MYD021KM.A2006220.1330.005.2007140045620.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB

Driver: HDF4Image/HDF4 Dataset
Files: MYD021KM.A2006220.1330.005.2007140045620.hdf
Size is 1354, 2030

.....

  radiance_scales=0.007295774, 0.005175298, 0.003772391, 0.002952236, 0.00231768, 0.001162374, 0.0005618205, 0.001155864, 0.0004184592, 0.0009577046, 0.0006215421, 0.006355153, 0.009465027, 0.006960101, 0.00279062
  radiance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
  radiance_units=Watts/m^2/micrometer/steradian
  reflectance_scales=1.348291e-05, 8.769159e-06, 6.162684e-06, 5.057901e-06, 3.954835e-06, 2.42613e-06, 1.172643e-06, 2.478778e-06, 8.973959e-07, 2.389224e-06, 2.062774e-06, 2.196517e-05, 3.504297e-05, 2.574762e-05, 2.468974e-05
  reflectance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
  reflectance_units=none
  corrected_counts_scales=0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194
  corrected_counts_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
  corrected_counts_units=counts

It is not possible to use our Scale/Offset methods, because driver
doesn't know what metadata record should be used for any given product,
but you can easily parse it yourself:

>>> ds = gdal.Open('HDF4_EOS:EOS_SWATH:MYD021KM.A2006220.1330.005.2007140045620.hdf:MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
>>> md = ds.GetMetadata()
>>> scales = map(float,md['radiance_scales'].split(','))
>>> offsets = map(float,md['radiance_offsets'].split(','))
>>> print "%f/%f" % (scales[0],offsets[0])
0.007296/316.972200

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From j.l.h.hartmann at uva.nl  Thu Oct 18 11:29:23 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem with gdalwarp -tps for large files
In-Reply-To: <471748CF.2040800@uva.nl>
References: <46D72207.8090206@pobox.com>	<20070831090444.GA12773@ak4719.spb.edu>
	<471748CF.2040800@uva.nl>
Message-ID: <47177BD3.8000201@uva.nl>

There seems to be a problem with gdalwarp -tps with control points for 
rasters > 10000*10000 pixels. The problem appears right at the 
beginning, when gdalwarp tries to determine the size of the output 
raster. It does not appear with smaller rasters, and also not  when the 
output file already exists, in other words when its size is already 
known. It looks like an overflow problem to me. I could file a bug 
report, but the test-file is quite large (278M).  Any idea?

Jan


------   (original file with control points)
gdalinfo test.tif
Driver: GTiff/GeoTIFF
Size is 11758, 7880
Coordinate System is `'
GCP Projection =
GCP[  0]: Id=1, Info=
           (8270,5149) -> (216211,586768,0)
GCP[  1]: Id=2, Info=
           (7086,5892) -> (214919,586037,0)
GCP[  2]: Id=3, Info=
           (10516,4661) -> (218569,587349,0)
GCP[  3]: Id=4, Info=
           (4691,5430) -> (212335,586490,0)
GCP[  4]: Id=5, Info=
           (8257,1024) -> (216022,591418,0)

---------- (warping with -tps)

gdalwarp -tps test.tif testtcp.tif
Creating output file that is 0P x 14928L.
ERROR 1: Attempt to create 0x14928x3 TIFF file, but width, height and bands
must be positive

------- (warping with order 1 polynomial)

gdalwarp -order 1 test.tif testorder.tif
Creating output file that is 11694P x 7974L.
Processing input file test.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done

------- (warping with tps over an existing output file)

  gdalwarp -order 1 test.tif testtcp.tif
Creating output file that is 11694P x 7974L.
Processing input file test.tif.
:0...10...20...30...40...50...60...70...80...90...100 - done

From warmerdam at pobox.com  Thu Oct 18 11:52:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] reproject a big ecw
In-Reply-To: <5F827424D35BD311BBA300902798C054053729AF@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C054053729AF@ct13-mel.cete-mediterranee.i2>
Message-ID: <47178142.6080503@pobox.com>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> Thanks for you prompt response.
> 
> The BIL file produced is about 37 Go.
> I'm going to try the same function with HFA format like you suggest.
> If this doesn't resolve my problem I will wait the next FWTools version.
> Frank, do you think that I should try to process gdalwarp without "--config GDAL_CACHEMAX 400 -wm 400" ?

Laurent,

I would at least suggest reducing the values you use, perhaps to 200 and
200.

The next FWTools will include the bug fix I referenced which *might* be
related.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From emiliomayorga at gmail.com  Thu Oct 18 12:06:03 2007
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
Message-ID: <b0d146420710180906n59f24d5eocd8216341bddb18d@mail.gmail.com>

Andrey,

While I wasn't the one who asked this question, thanks for the
solution! I had pretty much the same need -- extract scale and offset
("Slope" and "Intercept", single values) from SeaWiFS Level 3m
products, but from a geotiff file I created from the original hdfeos
file using gdal_translate. Your solution works like a charm.

Cheers,

-Emilio


> On Thu, Oct 11, 2007 at 09:34:45AM -0700, Jan Cermak wrote:
> > From a MODIS MYD021km file I am trying to read band data including
> > offset and scaling factors. Band data works just fine, but I can't get
> > offset and scale. Without offset and scale the data is completely
> > useless, so this seems to be a major issue to me.
> >
> > Here is some sample code:
> >
> > dsobj =
> > gdal.Open('HDF4_EOS:EOS_SWATH:"myfile.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
> > bandobj = dsobj.GetRasterBand(1)
> > scale = bandobj.GetScale()
> > offset = bandobj.GetOffset()
> >
> > scale and offset variables are empty.
> >
> > I am using yesterday's stable branch nightly.
> > A sample file is at
> > ftp://ladsweb.nascom.nasa.gov/allData/5/MYD021KM/2006/220/MYD021KM.A2006220.1330.005.2007140045620.hdf
> >
> > For this file and data set, HDFView yields:
> > radiance_scales =
> > 0.0072957743,0.0051752976,0.0037723905,0.0029522364,0.0023176796,0.001162374,5.6182046E-4,0.0011558639,4.1845915E-4,9.5770456E-4,6.215421E-4,0.006355153,0.009465027,0.0069601014,0.0027906199
> > radiance_offsets =
> > 316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722
>
> Hi Jan,
>
> Finally I have solved this problem. These data now fetched and added to
> the list of metadata, so you can use it in you code:
>
> $ gdalinfo HDF4_EOS:EOS_SWATH:"MYD021KM.A2006220.1330.005.2007140045620.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>
> Driver: HDF4Image/HDF4 Dataset
> Files: MYD021KM.A2006220.1330.005.2007140045620.hdf
> Size is 1354, 2030
>
> .....
>
>   radiance_scales=0.007295774, 0.005175298, 0.003772391, 0.002952236, 0.00231768, 0.001162374, 0.0005618205, 0.001155864, 0.0004184592, 0.0009577046, 0.0006215421, 0.006355153, 0.009465027, 0.006960101, 0.00279062
>   radiance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   radiance_units=Watts/m^2/micrometer/steradian
>   reflectance_scales=1.348291e-05, 8.769159e-06, 6.162684e-06, 5.057901e-06, 3.954835e-06, 2.42613e-06, 1.172643e-06, 2.478778e-06, 8.973959e-07, 2.389224e-06, 2.062774e-06, 2.196517e-05, 3.504297e-05, 2.574762e-05, 2.468974e-05
>   reflectance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   reflectance_units=none
>   corrected_counts_scales=0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194
>   corrected_counts_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   corrected_counts_units=counts
>
> It is not possible to use our Scale/Offset methods, because driver
> doesn't know what metadata record should be used for any given product,
> but you can easily parse it yourself:
>
> >>> ds = gdal.Open('HDF4_EOS:EOS_SWATH:MYD021KM.A2006220.1330.005.2007140045620.hdf:MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
> >>> md = ds.GetMetadata()
> >>> scales = map(float,md['radiance_scales'].split(','))
> >>> offsets = map(float,md['radiance_offsets'].split(','))
> >>> print "%f/%f" % (scales[0],offsets[0])
> 0.007296/316.972200
>
> Best regards,
> Andrey

From jcermak at atmos.washington.edu  Thu Oct 18 12:33:15 2007
From: jcermak at atmos.washington.edu (Jan Cermak)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
In-Reply-To: <20071018145747.GA20415@ak4719.spb.edu>
References: <470E50A5.5050608@atmos.washington.edu>
	<20071018145747.GA20415@ak4719.spb.edu>
Message-ID: <47178ACB.9080700@atmos.washington.edu>

Hi Andrey,

Thanks very much for the quick fix! I just upgraded my stable branch 
gdal but it seems you didn't change it there. So it is in the 1.5 trunk 
I guess?

All the best,
Jan



Andrey Kiselev wrote:
> On Thu, Oct 11, 2007 at 09:34:45AM -0700, Jan Cermak wrote:
>> From a MODIS MYD021km file I am trying to read band data including 
>> offset and scaling factors. Band data works just fine, but I can't get 
>> offset and scale. Without offset and scale the data is completely 
>> useless, so this seems to be a major issue to me.
>>
>> Here is some sample code:
>>
>> dsobj = 
>> gdal.Open('HDF4_EOS:EOS_SWATH:"myfile.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
>> bandobj = dsobj.GetRasterBand(1)
>> scale = bandobj.GetScale()
>> offset = bandobj.GetOffset()
>>
>> scale and offset variables are empty.
>>
>> I am using yesterday's stable branch nightly.
>> A sample file is at
>> ftp://ladsweb.nascom.nasa.gov/allData/5/MYD021KM/2006/220/MYD021KM.A2006220.1330.005.2007140045620.hdf
>>
>> For this file and data set, HDFView yields:
>> radiance_scales = 
>> 0.0072957743,0.0051752976,0.0037723905,0.0029522364,0.0023176796,0.001162374,5.6182046E-4,0.0011558639,4.1845915E-4,9.5770456E-4,6.215421E-4,0.006355153,0.009465027,0.0069601014,0.0027906199
>> radiance_offsets = 
>> 316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722,316.9722
> 
> Hi Jan,
> 
> Finally I have solved this problem. These data now fetched and added to
> the list of metadata, so you can use it in you code:
> 
> $ gdalinfo HDF4_EOS:EOS_SWATH:"MYD021KM.A2006220.1330.005.2007140045620.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> 
> Driver: HDF4Image/HDF4 Dataset
> Files: MYD021KM.A2006220.1330.005.2007140045620.hdf
> Size is 1354, 2030
> 
> .....
> 
>   radiance_scales=0.007295774, 0.005175298, 0.003772391, 0.002952236, 0.00231768, 0.001162374, 0.0005618205, 0.001155864, 0.0004184592, 0.0009577046, 0.0006215421, 0.006355153, 0.009465027, 0.006960101, 0.00279062
>   radiance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   radiance_units=Watts/m^2/micrometer/steradian
>   reflectance_scales=1.348291e-05, 8.769159e-06, 6.162684e-06, 5.057901e-06, 3.954835e-06, 2.42613e-06, 1.172643e-06, 2.478778e-06, 8.973959e-07, 2.389224e-06, 2.062774e-06, 2.196517e-05, 3.504297e-05, 2.574762e-05, 2.468974e-05
>   reflectance_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   reflectance_units=none
>   corrected_counts_scales=0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194, 0.126194
>   corrected_counts_offsets=316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722, 316.9722
>   corrected_counts_units=counts
> 
> It is not possible to use our Scale/Offset methods, because driver
> doesn't know what metadata record should be used for any given product,
> but you can easily parse it yourself:
> 
>>>> ds = gdal.Open('HDF4_EOS:EOS_SWATH:MYD021KM.A2006220.1330.005.2007140045620.hdf:MODIS_SWATH_Type_L1B:EV_1KM_RefSB')
>>>> md = ds.GetMetadata()
>>>> scales = map(float,md['radiance_scales'].split(','))
>>>> offsets = map(float,md['radiance_offsets'].split(','))
>>>> print "%f/%f" % (scales[0],offsets[0])
> 0.007296/316.972200
> 
> Best regards,
> Andrey
> 

From miczanin at gmail.com  Thu Oct 18 12:46:19 2007
From: miczanin at gmail.com (Michele Zanin)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] how to crop a dataset
Message-ID: <c27147560710180946n2be579e1jbb0d2178c4366996@mail.gmail.com>

Hi,
  I'm a very unexperienced user of GDAL (since yesterday), so please
excuse me if I say something obvious.

I followed the nice API tutorials and, thanks to the good
documentation, I was able to implement exactly what I needed.

I'd like to share with you a task I found difficult to understand and
implement: maybe you can find interesting looking at GDAL from the
point of view of a complete novice.

I needed to obtain a dataset that was a portion of another one;
something similar to cropping an image. I found difficult to
understand how to do it.
After few hours I discovered VRT datasets and I successfully used
them. This part of GDAL is not fully documented and I feel like there
should be a simpler solution...

I also had a problem: gdal_vrt.h was missing from my include
directory. I modified the install part of GNUmakefile from

install:
	$(INSTALL_DATA) vrtdataset.h gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)

to

install:
	$(INSTALL_DATA) vrtdataset.h gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)
	$(INSTALL_DATA) gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)

I want to thank the authors of GDAL for this very useful software.
michele

ps: I used gdal to (1) load a 5x5 degrees GeoTiff SRTM, (2) extract a
1x1 degree portion, (3) transform it (in memory) to
Oblique_Stereographic projection, and (4) export it to an int buffer.

From tutey at o2.pl  Thu Oct 18 14:12:43 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdal_vrtmerge,
	gdal_merge: wrong rasterYSize in output VRT
Message-ID: <4717A21B.1010904@o2.pl>

Hi,

The input is thousands of tiles, each 250x250 cells, which I
want to merge into one VRT dataset for further processing.

The problem is that when the number of input tiles is
greater than about 4710, commands "gdal_merge -of VRT
-createonly" and gdal_vrtmerge.py [1] calculate
"rasterYSize" of the output VRT wrong. However, the same
input and syntax work OK when the output format is GeoTIFF.


EXAMPLE

Files list1 and list2 contain input tiles filenames, all in
one line, space separated.

When 4711 tiles are input all is fine:

$ wc -w list1
4711 list1

$ cat list1 | xargs gdal_merge.py -createonly -of VRT -o
list1.vrt

$ head -n1 list1.vrt
<VRTDataset rasterXSize="50250" rasterYSize="6000">

6000 is correct.


But, one tile more and rasterYSize goes funky:

$ wc -w list2
4712 list2

$ cat list2 | xargs gdal_merge.py -createonly -of VRT -o
list2.vrt

$ head -n1 list2.vrt
<VRTDataset rasterXSize="250" rasterYSize="250">

Like if some "rasterYSize counter reset" happened. Strange.

Yet, it's even stranger that the output VRT filename length
has something to do with it - using the "list1", which
worked OK above, but requesting the output VRT filename 16
chars longer, yields the same "rasterYSize counter reset":

$ cat list1 | xargs gdal_merge.py -createonly -of VRT -o
list101234567890123456.vrt

$ head -n1 list101234567890123456.vrt
<VRTDataset rasterXSize="250" rasterYSize="250">
                                            ^
                                            |
                          If output name is shorter than 16
                          chars, this is "6000" (correct)!

At first I thought that maybe xargs (using it to avoid the
"Argument list too long" error) does something wrong, but
why does the same input and syntax that fails for VRT, work
OK for GeoTIFF (ie. the number of cells in Y axis is 6000) then:

$ cat list2 | xargs gdal_merge.py -createonly -of GTIFF -o
list2.tif

$ cat list1 | xargs gdal_merge.py -createonly -of GTIFF -o
list101234567890123456.tif

$ gdalinfo list2.tif | grep "Size is "
Size is 50250, 6000
                 ^
                 |
        Correct. Respective VRT had "250" though.

$ gdalinfo list101234567890123456.tif | grep "Size is "
Size is 50250, 6000
                 ^
                 |
        Correct. Respective VRT had "250" though.


???

Moreover, creating a GeoTIFF from all 40401 tiles I'd like
to merge, fails in a peculiar way too:

There are really 40401 adjacent 250x250 tif tiles:

$ find . -type f -name \*.tif | wc -l
40401

$ find . -type f -name \*.tif -exec gdal_merge.py -of GTIFF
-createonly -o ~/all_createonly.tif {} +

$ gdalinfo ~/all_createonly.tif | grep "Size is"
Size is 50250, 23750
                 ^
                 |
        This should be "50250".


Thoughts?

Using GDAL 1.4.2 SVN 2007-09-12. I could reproduce this all
with FWTools-linux-1.3.5.tar.gz too.

[1]http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py

Maciek

From warmerdam at pobox.com  Thu Oct 18 15:01:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] how to crop a dataset
In-Reply-To: <c27147560710180946n2be579e1jbb0d2178c4366996@mail.gmail.com>
References: <c27147560710180946n2be579e1jbb0d2178c4366996@mail.gmail.com>
Message-ID: <4717AD70.5040003@pobox.com>

Michele Zanin wrote:
> Hi,
>   I'm a very unexperienced user of GDAL (since yesterday), so please
> excuse me if I say something obvious.
> 
> I followed the nice API tutorials and, thanks to the good
> documentation, I was able to implement exactly what I needed.
> 
> I'd like to share with you a task I found difficult to understand and
> implement: maybe you can find interesting looking at GDAL from the
> point of view of a complete novice.
> 
> I needed to obtain a dataset that was a portion of another one;
> something similar to cropping an image. I found difficult to
> understand how to do it.
> After few hours I discovered VRT datasets and I successfully used
> them. This part of GDAL is not fully documented and I feel like there
> should be a simpler solution...

Michele,

Subset VRTs and subsetting in general can also be done on the
commandline with gdal_translate.  Specific improvements to the
documentation is welcome, and I encourage users and developers to
work up new material in the Trac wiki.

I know that VRTs are somewhat underdocumented, and hard to use
for some things.

> I also had a problem: gdal_vrt.h was missing from my include
> directory. I modified the install part of GNUmakefile from
> 
> install:
> 	$(INSTALL_DATA) vrtdataset.h gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)
> 
> to
> 
> install:
> 	$(INSTALL_DATA) vrtdataset.h gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)
> 	$(INSTALL_DATA) gdal_vrt.h $(DESTDIR)$(INST_INCLUDE)


I have applied this change in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct 18 15:30:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem with gdalwarp -tps for large files
In-Reply-To: <47177BD3.8000201@uva.nl>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu>
	<471748CF.2040800@uva.nl> <47177BD3.8000201@uva.nl>
Message-ID: <4717B449.2080204@pobox.com>

Jan Hartmann wrote:
> There seems to be a problem with gdalwarp -tps with control points for 
> rasters > 10000*10000 pixels. The problem appears right at the 
> beginning, when gdalwarp tries to determine the size of the output 
> raster. It does not appear with smaller rasters, and also not  when the 
> output file already exists, in other words when its size is already 
> known. It looks like an overflow problem to me. I could file a bug 
> report, but the test-file is quite large (278M).  Any idea?

Jan,

I'd appreciate your filing a bug with the particulars and with a
gdalinfo report of the input file.  I can dummy up a similarly sized
file at my end to try and reproduce the problem.

I have had problems with the -tps algorithm "flipping out" on me from
time to time and have been assuming it was some sort of numerical
instability but it is possible there is a more conventional sort of
error at the root of the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Thu Oct 18 17:50:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Parameter names in swig bindings
In-Reply-To: <4715073F.3080900@tkk.fi>
References: <47148D0B.2090705@tkk.fi>
	<f3b73b7d0710161108u2fe94c1bvfdd23bd0611789b4@mail.gmail.com>
	<4715073F.3080900@tkk.fi>
Message-ID: <f3b73b7d0710181450n65c9eee0l35c285c3e8cce408@mail.gmail.com>

2007/10/16, Ari Jolma <ari.jolma@tkk.fi>:

>
> Just one of those cases again where "make clean; make" does not work. No
> problems any more -- except with the parameter names. Do you have any
> opinion on them?
>

Ari,

In this particular case I would support renaming geom to spatialFilter
in ExecuteSQL since it makes the interface more clear without causing
backward compatibility issues. Moreover we could make the interface
consistent with the C API:

OGRLayerH OGR_DS_ExecuteSQL  	(  	OGRDataSourceH   	 hDS,
		const char *  	pszSQLCommand,
		OGRGeometryH  	hSpatialFilter,
		const char *  	pszDialect	
	) 	


However if a typemap against a parameter should be implemented for all
of the bindings then using the explicit %apply with a sufficient
typemap name would be a requirement. But checking the validity of the
parameters should go as well to the C API in my opinion.

Best regards,

Tamas

From matt.gregory at oregonstate.edu  Thu Oct 18 20:12:52 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] best approach for writing AI grids
Message-ID: <451453C181B199458A55B2B1723FAC004BC8C5@SAGE.forestry.oregonstate.edu>

I've got an old build of GDAL (1.1.9) which still has support for the
GIO driver (which supported writing of ArcInfo GRIDS).  I've used this
in development for a long time now because my team wants AI grids.  Now
I'm feeling like a dinosaur and would really like to develop with more
current versions of GDAL (I've been using trunk in projects where I
don't need AI grid write support), so I'm wondering what approach to
take.

As I see it, there are two options:

1) Use gdal-1.1.9 and deal with the unavailibility of any new features
in GDAL
2) Use gdal-trunk in conjunction with the ArcInfo C API for conversion
from say Gtiff to GRID

I'm obviously leaning toward #2, but I typically overlook other options
that might be available.

Thanks for any help,
matt



From warmerdam at pobox.com  Thu Oct 18 21:25:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] best approach for writing AI grids
In-Reply-To: <451453C181B199458A55B2B1723FAC004BC8C5@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC004BC8C5@SAGE.forestry.oregonstate.edu>
Message-ID: <4718079E.6070503@pobox.com>

Gregory, Matthew wrote:
> I've got an old build of GDAL (1.1.9) which still has support for the
> GIO driver (which supported writing of ArcInfo GRIDS).  I've used this
> in development for a long time now because my team wants AI grids.  Now
> I'm feeling like a dinosaur and would really like to develop with more
> current versions of GDAL (I've been using trunk in projects where I
> don't need AI grid write support), so I'm wondering what approach to
> take.
> 
> As I see it, there are two options:
> 
> 1) Use gdal-1.1.9 and deal with the unavailibility of any new features
> in GDAL
> 2) Use gdal-trunk in conjunction with the ArcInfo C API for conversion
> from say Gtiff to GRID
> 
> I'm obviously leaning toward #2, but I typically overlook other options
> that might be available.

Matt,

Option (3) might be port the gio driver to current GDAL, possibly as a
runtime loaded driver.  I can't think of any reason it would be a problem
to get the old driver working with current GDAL - assuming you are
comfortable building GDAL yourself and doing just a bit of build-hacking
yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct 18 22:09:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdalwarp: difference between -tps and -order 1
In-Reply-To: <47175B4B.4070906@uva.nl>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu>
	<471748CF.2040800@uva.nl> <471752A4.1010502@pobox.com>
	<47175B4B.4070906@uva.nl>
Message-ID: <471811F4.6020509@pobox.com>

Jan Hartmann wrote:
> OK Frank, that's nice, thanks! How about a filter:
> 
> gdalTransformCps  [ -tps | -order n ] -gcp ix iy ox oy ...
> 
> Input comes from standard input (two numbers per line), and output goes 
> to standard output (idem). A bit like proj actually.

Jan,

I've committed a new "gdaltransform" program in subversion.

Usage: gdaltransform [--help-general]
     [i] [-s_srs srs_def] [-t_srs srs_def] [-order n] ] [-tps]
     [-gcp pixel line easting northing [elevation]]*
     [srcfile [dstfile]]

As suggested it takes in pairs (or triples) of numbers and writes out the
transformed result.   The program attempts to offer most transformations
offered by gdalwarp.  It can be used for reprojection (with -s_srs and
-t_srs), gcp trasnsformations, and anything that gdalwarp would normally
initialize from source and destination files.

If srcfile is specified the transformation will be from source pixel/line
coordinates.

If gcps are provided on the commandline, the transformation will be from
source gcp values (normally pixel line too).

If dstfile is provided output is destination pixel line, otherwise it
will normally be destination georeferenced.

If just -s_srs and -t_srs are provided it georef in s_srs to georef in
d_srs.

If the -i flag is provided the transformation is done in reverse (dest
to source).

Note that input and output must always be in decimal form.  There is currently
no support for DMS input or output.

Are you ok to build this from subversion (or a nightly snapshot) or would
you like binaries prepared?

I would be quite appreciative if you could prepare user documentation
suitable for inclusion in:

   http://trac.osgeo.org/gdal/browser/trunk/gdal/doc/gdal_utilities.dox

after some testing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Thu Oct 18 23:12:55 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
Message-ID: <F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>

On Oct 16, 2007, at 9:45 PM, Howard Butler wrote:

> Outstanding issues:
>  - It's not apparent what we want to do for defaults on the 'make  
> install' target of ./swig/python based on the discussions on the  
> list.  Can someone come up with a concise proposal?
>  - Because we're using distutils, currently the CFLAGS and CPPFLAGS  
> of Python are used, and GDAL's CFLAGS/CPPFLAGS are not injected.   
> This needs to be resolved.
>  - The windows makefiles have not been updated yet.
>  - Should we require setuptools, or should we attempt to support  
> setuptools and distutils?
>
Another issue to consider: where to install the python script  
programs.  Currently they aren't installed at all.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From dron at ak4719.spb.edu  Fri Oct 19 01:53:00 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] HDF EOS: cannot retrieve band scale and offset
In-Reply-To: <47178ACB.9080700@atmos.washington.edu>
References: <470E50A5.5050608@atmos.washington.edu>
	<20071018145747.GA20415@ak4719.spb.edu>
	<47178ACB.9080700@atmos.washington.edu>
Message-ID: <20071019055300.GA24917@ak4719.spb.edu>

Jan,

On Thu, Oct 18, 2007 at 09:33:15AM -0700, Jan Cermak wrote:
> Thanks very much for the quick fix! I just upgraded my stable branch
> gdal but it seems you didn't change it there. So it is in the 1.5
> trunk I guess?

Yes, it is in the trunk. Do you need it in 1.4? If so, please, create a
ticket for this problem (just copy you initial message), because we are
strictly tracking changes for our stable brunch.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From Chris.Barker at noaa.gov  Fri Oct 19 02:19:11 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>
Message-ID: <47184C5F.7040602@noaa.gov>

William Kyngesburye wrote:
> Another issue to consider: where to install the python script programs.  
> Currently they aren't installed at all.

Hmm. the usual place for python scripts installed with distutils in the 
python scripts dir. On Linux, I think that's usually something like 
/usr/local/bin. With an OS-X Framework build, it's something like:

/Library/Frameworks/Python......2.5/bin

(or something like that, inside the framework anyway -- not on a Mac now)

However, it might be more appropriate to put it in the GDAL "prefix" 
location, as, ideally, fact that the scripts are python is an 
implementation detail.

It may not matter much, as either location should be on the users PATH.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Fri Oct 19 04:58:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
Message-ID: <471871AE.2070507@loskot.net>

Asaf Ben-Nathan wrote:
> Hello Mateusz, I wonder if you could possibly help me... I've
> compiled GDAL for wince, and I now need to create bindings to the C# 
> compact framework. I'm trying to use SWIG in the same way that the
> regular C# bindings have been made under win32, but I'm having
> problems getting the code wrapped properly.

Hi Asaf,

I've never tried to provide C# bindings to Windows CE port of GDAL.
But I know that there are some problems with SWIG in this matter.
I'm adding Tamas Szekeres to CC as he is also interested in such
bindings. Tamas is the author of C# bindings for GDAL (not WinCE port,
but "big" GDAL) and he is the C#/SWIG guru in our team.

BTW, I believe it would be reasonable to post this discussion to the
gdal-dev mailing list if you don't mind.

> I've taken a VERY simple example (one simple function) and managed to
> get it working after playing around with the SWIG interface output
> files (some of wrapper code in there isnt supported in CF or is
> altered, eg. ThreadStaticAttribute and ArgumentException) and I'm
> wondering if you know anything about how i can do this since at this
> rate it will take me longer to SWIG the entire GDAL library than to
> just write my own wrappers and PINVOKE each function seperately.

According to my knowledge, P/Invoke seems to be the most reasonable way
to go, but perhaps SWIG team has added .NET Compact Framework support
recently, which I'm not aware of.

> I'm also new to swig, and so I'm not sure of its exact 
> capabilities...supposedly typemaps can change the swig functionality
> but I have no idea where to start in this instance. Granted my
> problem is more SWIG related than GDAL related, and I've emailed the
> appropriate people on the SWIG side, but if I can get this working it
> will benefit the GDAL community too. I've mailed the GDAL-DEV mailing
> list a similar email to see if anyone there knows anything.

Ah, I see. Yes, that's a good idea.

> To be honest I'm praying that there is some relatively simple
> solution like giving swig certain extra parameters, or writing a few
> typemaps or something, but most likely I'm guessing it won't be that
> simple or you guys would have already done it, but if you could help
> me out and point me in the right direction I would greatly appreciate
> it (and of course you could add the code to the GDAL source tree once
> its done).

Unfortunately, I think it won't be that simple but let's wait for Tamas'
opinion. As I said, he is the C# and SWIG guru here.

Tamas, I'd be thankful if you could share your experience and knowledge
in this area. Perhaps you guys could collaborate in the area of C#
bindings development for GDAL Windows CE port.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri Oct 19 06:11:14 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <471871AE.2070507@loskot.net>
References: <471871AE.2070507@loskot.net>
Message-ID: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>

2007/10/19, Mateusz Loskot <mateusz@loskot.net>:

>
> > To be honest I'm praying that there is some relatively simple
> > solution like giving swig certain extra parameters, or writing a few
> > typemaps or something, but most likely I'm guessing it won't be that
> > simple or you guys would have already done it, but if you could help
> > me out and point me in the right direction I would greatly appreciate
> > it (and of course you could add the code to the GDAL source tree once
> > its done).
>
> Unfortunately, I think it won't be that simple but let's wait for Tamas'
> opinion. As I said, he is the C# and SWIG guru here.
>

Hi guys,

One of the issues around SWIG I'm aware of is that the .NET compact
framework doesn't support HandleRef-s that the current implementation
extensively uses.
Therefore we shall have to reimplement the default csbody and related
typemaps for using IntPtr-s along with GC.KeepAlive() or SafeHandle to
achieve similar results.
Due to the problems related to the memory ownership and the early
garbage collection I had to do such things in the current interface so
this part of the problems can be managed easily I think.


> Tamas, I'd be thankful if you could share your experience and knowledge
> in this area. Perhaps you guys could collaborate in the area of C#
> bindings development for GDAL Windows CE port.
>

The other fundamental problem is that how the interface would fit into
the current build process. The C part of the interface might have to
be compiled along with the other parts of the GDAL/OGR project. It
would be somewhat easier to support a makefile based build process
from this aspect.

I recall that in the recent days I've chat someone who promised to
send me a working makefile and a related test project that should be
made to work...


Best regards,

Tamas

From omkaranathan at darshan3d.com  Fri Oct 19 07:52:36 2007
From: omkaranathan at darshan3d.com (om)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Newbie doubt: gdalwarp
Message-ID: <47189A84.3000402@darshan3d.com>

Hi,

How can I scale a GeoTIFF image ?
I have tried
gdalwarp -tr 8000 8000 -ts 8000 8000 inputimage.tif out.tif        
(input image resolution is 5213x5613) and got the following error.

Creating output file that is 0P x 0L.
ERROR 1: Attempt to create 0x0x1 TIFF file, but width, height and bands
must be positive.

-Is it possible to scale the image using gdalwarp? or is there any other 
way I can accomplish this...
-or is it because I have done something stupid?

Thanks in advance

Om

From wollez at gmx.net  Fri Oct 19 08:10:32 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: Newbie doubt: gdalwarp
In-Reply-To: <47189A84.3000402@darshan3d.com>
References: <47189A84.3000402@darshan3d.com>
Message-ID: <ffa6rf$1es$1@ger.gmane.org>

om schrieb:
> Hi,
> 
> How can I scale a GeoTIFF image ?
> I have tried
> gdalwarp -tr 8000 8000 -ts 8000 8000 inputimage.tif out.tif        
> (input image resolution is 5213x5613) and got the following error.
> 
> Creating output file that is 0P x 0L.
> ERROR 1: Attempt to create 0x0x1 TIFF file, but width, height and bands
> must be positive.
> 
> -Is it possible to scale the image using gdalwarp? or is there any other 
> way I can accomplish this...
> -or is it because I have done something stupid?
> 
> Thanks in advance
> 
> Om

perhaps gdal_translate?
from http://www.gdal.org/gdal_translate.html
-outsize xsize[%] ysize[%]:
     Set the size of the output file. Outsize is in pixels and lines 
unless '' is attached in which case it is as a fraction of the input 
image size.


From omkaranathan at darshan3d.com  Fri Oct 19 08:38:31 2007
From: omkaranathan at darshan3d.com (om)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: Newbie doubt: gdalwarp
In-Reply-To: <ffa6rf$1es$1@ger.gmane.org>
References: <47189A84.3000402@darshan3d.com> <ffa6rf$1es$1@ger.gmane.org>
Message-ID: <4718A547.6070106@darshan3d.com>

WolfgangZ wrote:

> om schrieb:
>
>> Hi,
>>
>> How can I scale a GeoTIFF image ?
>> I have tried
>> gdalwarp -tr 8000 8000 -ts 8000 8000 inputimage.tif out.tif        
>> (input image resolution is 5213x5613) and got the following error.
>>
>> Creating output file that is 0P x 0L.
>> ERROR 1: Attempt to create 0x0x1 TIFF file, but width, height and bands
>> must be positive.
>>
>> -Is it possible to scale the image using gdalwarp? or is there any 
>> other way I can accomplish this...
>> -or is it because I have done something stupid?
>>
>> Thanks in advance
>>
>> Om
>
>
> perhaps gdal_translate?
> from http://www.gdal.org/gdal_translate.html
> -outsize xsize[%] ysize[%]:
>     Set the size of the output file. Outsize is in pixels and lines 
> unless '' is attached in which case it is as a fraction of the input 
> image size.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
Thanks for your suggestion , but it fails to enlarge if the image 
resolution is high.
I tried with 5213x5613 image and its able to to produce only around 4000 
to 4500 pixels output image.
I'm able to enlarge smaller images.
But my requirement is for bigger images :-(

Thanks

Om

From ari.jolma at tkk.fi  Fri Oct 19 08:34:11 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Parameter names in swig bindings
In-Reply-To: <f3b73b7d0710181450n65c9eee0l35c285c3e8cce408@mail.gmail.com>
References: <47148D0B.2090705@tkk.fi>
	<f3b73b7d0710161108u2fe94c1bvfdd23bd0611789b4@mail.gmail.com>
	<4715073F.3080900@tkk.fi>
	<f3b73b7d0710181450n65c9eee0l35c285c3e8cce408@mail.gmail.com>
Message-ID: <4718A443.8080605@tkk.fi>

Tamas Szekeres kirjoitti:
> In this particular case I would support renaming geom to spatialFilter
> in ExecuteSQL since it makes the interface more clear without causing
> backward compatibility issues

ok, committed

> However if a typemap against a parameter should be implemented for all
> of the bindings then using the explicit %apply with a sufficient
> typemap name would be a requirement. 
>   

I don't quite get this. We do have typemaps that are "global" and not 
explicitly applied. I admit that using a typemap for checking the 
non-nullness of all geometry parameters that have the name "other" is 
not optimal but it works for me now (after the commit above).

Ari


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From mateusz at loskot.net  Fri Oct 19 08:44:34 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Newbie doubt: gdalwarp
In-Reply-To: <47189A84.3000402@darshan3d.com>
References: <47189A84.3000402@darshan3d.com>
Message-ID: <4718A6B2.2010506@loskot.net>

om wrote:
> Hi,
> 
> How can I scale a GeoTIFF image ? I have tried gdalwarp -tr 8000 8000
> -ts 8000 8000 inputimage.tif out.tif (input image resolution is
> 5213x5613) and got the following error.
> 
> Creating output file that is 0P x 0L. ERROR 1: Attempt to create
> 0x0x1 TIFF file, but width, height and bands must be positive.
> 
> -Is it possible to scale the image using gdalwarp? or is there any
> other way I can accomplish this...

-tr option is related to resolution in terms of image geo-reference.
If you want to scale in terms of changing physical size of image, you
can use gdal_translate with -outsize option
(http://gdal.org/gdal_translate.html) but -outsize does not preserve
geo-reference of the image precisely. The upper left corner will stay in
the right place but other 3 corners will get moved, as the image is
smaller or bigger after applying -outsize.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From wollez at gmx.net  Fri Oct 19 08:46:15 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: Newbie doubt: gdalwarp
In-Reply-To: <4718A547.6070106@darshan3d.com>
References: <47189A84.3000402@darshan3d.com> <ffa6rf$1es$1@ger.gmane.org>
	<4718A547.6070106@darshan3d.com>
Message-ID: <ffa8ue$8t9$1@ger.gmane.org>

om schrieb:
> WolfgangZ wrote:
> 
>> om schrieb:
>>
>>> Hi,
>>>
>>> How can I scale a GeoTIFF image ?
>>> I have tried
>>> gdalwarp -tr 8000 8000 -ts 8000 8000 inputimage.tif out.tif        
>>> (input image resolution is 5213x5613) and got the following error.
>>>
>>> Creating output file that is 0P x 0L.
>>> ERROR 1: Attempt to create 0x0x1 TIFF file, but width, height and bands
>>> must be positive.
>>>
>>> -Is it possible to scale the image using gdalwarp? or is there any 
>>> other way I can accomplish this...
>>> -or is it because I have done something stupid?
>>>
>>> Thanks in advance
>>>
>>> Om
>>
>>
>> perhaps gdal_translate?
>> from http://www.gdal.org/gdal_translate.html
>> -outsize xsize[%] ysize[%]:
>>     Set the size of the output file. Outsize is in pixels and lines 
>> unless '' is attached in which case it is as a fraction of the input 
>> image size.
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
> Thanks for your suggestion , but it fails to enlarge if the image 
> resolution is high.
> I tried with 5213x5613 image and its able to to produce only around 4000 
> to 4500 pixels output image.
> I'm able to enlarge smaller images.
> But my requirement is for bigger images :-(
> 
> Thanks
> 
> Om

what is the error with large images? I suppose you might run out of 
memory. Please try the create option -co "TILED=YES"


From mateusz at loskot.net  Fri Oct 19 10:02:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Newbie doubt: gdalwarp
In-Reply-To: <4718A83D.7060803@darshan3d.com>
References: <47189A84.3000402@darshan3d.com> <4718A6B2.2010506@loskot.net>
	<4718A83D.7060803@darshan3d.com>
Message-ID: <4718B8DD.70804@loskot.net>

om wrote:
> Mateusz Loskot wrote:
> 
>> om wrote:
>>  
>>
>>> Hi,
>>>
>>> How can I scale a GeoTIFF image ? I have tried gdalwarp -tr 8000 8000
>>> -ts 8000 8000 inputimage.tif out.tif (input image resolution is
>>> 5213x5613) and got the following error.
>>>
>>> Creating output file that is 0P x 0L. ERROR 1: Attempt to create
>>> 0x0x1 TIFF file, but width, height and bands must be positive.
>>>
>>> -Is it possible to scale the image using gdalwarp? or is there any
>>> other way I can accomplish this...
>>>   
>>
>> -tr option is related to resolution in terms of image geo-reference.
>> If you want to scale in terms of changing physical size of image, you
>> can use gdal_translate with -outsize option
>> (http://gdal.org/gdal_translate.html) but -outsize does not preserve
>> geo-reference of the image precisely. The upper left corner will stay in
>> the right place but other 3 corners will get moved, as the image is
>> smaller or bigger after applying -outsize.
>>
>> Cheers
>>  
>>
> 
> I'm getting the same error if I use -tr option only also  :-( .
> Am I doing anything wrong  in the commandline option?

Could you give the output of gdalinfo for your raster?
Perhaps it's not georeferenced.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Oct 19 10:05:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <47184C5F.7040602@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>
	<47184C5F.7040602@noaa.gov>
Message-ID: <4718B9A2.1080204@pobox.com>

Christopher Barker wrote:
> William Kyngesburye wrote:
>> Another issue to consider: where to install the python script 
>> programs.  Currently they aren't installed at all.
> 
> Hmm. the usual place for python scripts installed with distutils in the 
> python scripts dir. On Linux, I think that's usually something like 
> /usr/local/bin. With an OS-X Framework build, it's something like:
> 
> /Library/Frameworks/Python......2.5/bin
> 
> (or something like that, inside the framework anyway -- not on a Mac now)
> 
> However, it might be more appropriate to put it in the GDAL "prefix" 
> location, as, ideally, fact that the scripts are python is an 
> implementation detail.
> 
> It may not matter much, as either location should be on the users PATH.

Chris,

I agree.  I think python scripts should be installed by the makefile,
not setup.py, and should end up whereever the other utility programs
are installed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Fri Oct 19 11:01:04 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <4718B9A2.1080204@pobox.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>
	<47184C5F.7040602@noaa.gov> <4718B9A2.1080204@pobox.com>
Message-ID: <3A5407BC-3557-463D-AA56-8722B3F9C1A1@kyngchaos.com>

On Oct 19, 2007, at 9:05 AM, Frank Warmerdam wrote:

> Christopher Barker wrote:
>> William Kyngesburye wrote:
>>> Another issue to consider: where to install the python script  
>>> programs.  Currently they aren't installed at all.
>> Hmm. the usual place for python scripts installed with distutils  
>> in the python scripts dir. On Linux, I think that's usually  
>> something like /usr/local/bin. With an OS-X Framework build, it's  
>> something like:
>> /Library/Frameworks/Python......2.5/bin
>> (or something like that, inside the framework anyway -- not on a  
>> Mac now)
>> However, it might be more appropriate to put it in the GDAL  
>> "prefix" location, as, ideally, fact that the scripts are python  
>> is an implementation detail.
>> It may not matter much, as either location should be on the users  
>> PATH.
>
> Chris,
>
> I agree.  I think python scripts should be installed by the makefile,
> not setup.py, and should end up whereever the other utility programs
> are installed.
>
I left that thought open, but in the gdal prefix/bin is good, and  
it's where the old-gen python scripts are installed.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Fri Oct 19 11:40:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Newbie doubt: gdalwarp
In-Reply-To: <4718BC48.8070203@darshan3d.com>
References: <47189A84.3000402@darshan3d.com> <4718A6B2.2010506@loskot.net>
	<4718A83D.7060803@darshan3d.com> <4718B8DD.70804@loskot.net>
	<4718BC48.8070203@darshan3d.com>
Message-ID: <4718CFE9.3020706@loskot.net>

om wrote:
> Mateusz Loskot wrote:
> 
>> om wrote:
>>  
>>
>>> Mateusz Loskot wrote:
>>>
>>>   
>>>> om wrote:
>>>>
>>>>
>>>>     
>>>>> Hi,
>>>>>
>>>>> How can I scale a GeoTIFF image ? I have tried gdalwarp -tr 8000 8000
>>>>> -ts 8000 8000 inputimage.tif out.tif (input image resolution is
>>>>> 5213x5613) and got the following error.
>>>>>
>>>>> Creating output file that is 0P x 0L. ERROR 1: Attempt to create
>>>>> 0x0x1 TIFF file, but width, height and bands must be positive.
>>>>>
>>>>> -Is it possible to scale the image using gdalwarp? or is there any
>>>>> other way I can accomplish this...
>>>>>  
>>>>>       
>>>> -tr option is related to resolution in terms of image geo-reference.
>>>> If you want to scale in terms of changing physical size of image, you
>>>> can use gdal_translate with -outsize option
>>>> (http://gdal.org/gdal_translate.html) but -outsize does not preserve
>>>> geo-reference of the image precisely. The upper left corner will
>>>> stay in
>>>> the right place but other 3 corners will get moved, as the image is
>>>> smaller or bigger after applying -outsize.
>>>>
>>>> Cheers
>>>>
>>>>
>>>>     
>>> I'm getting the same error if I use -tr option only also  :-( .
>>> Am I doing anything wrong  in the commandline option?
>>>   
>>
>> Could you give the output of gdalinfo for your raster?
>> Perhaps it's not georeferenced.
>>
>> Cheers
>>  
>>
> Hi,
> This is the gdalinfo of the raster.
> 
> Driver: GTiff/GeoTIFF
> Size is 5213, 5613
> Coordinate System is:
> GEOGCS["unnamed",
>    DATUM["unknown",
>        SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>    PRIMEM["Greenwich",0],
>    UNIT["degree",0.0174532925199433],
>    AUTHORITY["EPSG","0"]]
> Origin = (81.874167999999997,22.500834000000001)
> Pixel Size = (0.000024297832342,-0.000022566791377)
> Metadata:
>  AREA_OR_POINT=Area
>  TIFFTAG_XRESOLUTION=100
>  TIFFTAG_YRESOLUTION=100
> Corner Coordinates:
> Upper Left  (  81.8741680,  22.5008340)
> Lower Left  (  81.8741680,  22.3741666)
> Upper Right (  82.0008326,  22.5008340)
> Lower Right (  82.0008326,  22.3741666)
> Center      (  81.9375003,  22.4375003)
> Band 1 Block=5213x1 Type=Byte, ColorInterp=Gray

First, this coordinate system definition looks strange to me.
But anyway, if you are using WGS84, then you should specify -tr and -ts
options for gdalwarp with degrees but I suppose you assume 8000 as
pixels or even meters. It won't work.

Generally, I have problems with understanding your goals.
You are saying "scaling" but there are a lot of possible scaling
operations, datatype scaling (-scale option), physical size scaling
(-outsize), resolution scaling (-tr and -ts), etc.

Also, you're replying directly to me, instead of gdal-dev.
Try to use Reply To All next time. I'm adding gdal-dev to CC in this reply.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Fri Oct 19 12:13:37 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdal_vrtmerge, gdal_merge: wrong rasterYSize in output
	VRT
In-Reply-To: <4717B19A.9040602@pobox.com>
References: <4717A21B.1010904@o2.pl> <4717B19A.9040602@pobox.com>
Message-ID: <4718D7B1.5030707@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>> Thoughts?

> All my ideas revolve around xargs causing problems.  With that eliminated
> I'm at a loss to explain the problem.  I would suggest you add some print
> statements to gdal_merge.py to ensure it is really processing all the
> files.
> 
> Note, using xargs with gdal_merge.py -createonly is mostly self
> defeating as
> the output file will only be created by the first invocation of
> gdal_merge.py.
> 
> gdal_merge.py should support reading filenames directly from the file if
> you
> us the --optfile <filename> switch.

Frank,

gdal_vrtmerge.py --optfile worked beautifully! I was able to
 create a VRT containing all 201x201 tiles, 250x250 cells
each, in few minutes. Perfect. I didn't know about the
--optfile before.

Regarding xargs it appears I don't really understand how it
works. Homework to do.

Thanks for help.

Maciek

From matt.wilkie at gov.yk.ca  Fri Oct 19 12:26:30 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <3A5407BC-3557-463D-AA56-8722B3F9C1A1@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>	<F4D6F163-776C-4D65-A262-B86CF0D0EB3F@kyngchaos.com>	<47184C5F.7040602@noaa.gov>
	<4718B9A2.1080204@pobox.com>
	<3A5407BC-3557-463D-AA56-8722B3F9C1A1@kyngchaos.com>
Message-ID: <4718DAB6.9090101@gov.yk.ca>

>> I agree.  I think python scripts should be installed by the makefile,
>> not setup.py, and should end up whereever the other utility programs
>> are installed.

This sounds like a time to request a new "gdal-commands" or "gdal-help" 
comnand. I frequently need to refresh my memory about what gdal 
utilities are available or how to spell them ("now is that gdalwarp or 
gdal_warp?")

Right now with all gdal utils installed in bin I accomplish this with 
"dir %gdal%\bin\*.exe %gdal%\bin\*.py" in a batch file (see below). It's 
not pretty, but functional. This won't work if the utilities end up 
somewhere else with a lot of other unrelated tools. However I wouldn't 
want to force people to add a special directory tree and lengthen the 
PATH just for gdal if that is not inline with the system's standards. 
Having a gdal-help command would make this a non issue (and cross platform).


----- gdal-help.bat -----
@echo off
echo.
echo	Available gdal utilities are:
echo.
if [%GDAL_DATA%]==[] goto :NoGDAL

dir /w %GDAL_DATA%\..\bin\*.exe %GDAL_DATA%\..\bin\*.py
goto :EOF

:NoGDAL
echo	ERROR: gdal environment not set
echo.
------------------------


Ticket #1925 (new enhancement)
create a bew 'gdal-help' or 'gdal-commands' command
http://trac.osgeo.org/gdal/ticket/1925


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From jluis at ualg.pt  Fri Oct 19 14:39:39 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <4716C7BB.2090508@pobox.com>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt> <47168C4B.30605@pobox.com>
	<47169E52.3040607@ualg.pt> <4716C7BB.2090508@pobox.com>
Message-ID: <4718F9EB.9030906@ualg.pt>

Frank Warmerdam wrote:
> Paavo Jumppanen has proposed some substantial upgrades to the netcdf
> driver ...   too comprehensive for me to make a quick analysis.  Perhaps
> you could try integrating them in a local build and test them to see if
> they seem appropriate?
>
>   http://trac.osgeo.org/gdal/ticket/1808
>

Frank,
The Jumppanen update has one, lets say, compatibility issue which is 
gdalinfo
doesn't report the full contents even if the file has only one dataset. 
Example:
C:\>gdalinfo somb.grd
Driver: netCDF/Network Common Data Format
Files: somb.grd
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=COARDS, CF-1.0
  NC_GLOBAL#title=somb.grd
  NC_GLOBAL#history=grdmath -R-15/15/-15/15 -I0.5 X Y HYPOT DUP 2 MUL PI 
MUL 8 D
IV COS EXCH NEG 10 DIV EXP MUL -F = somb.grd
  NC_GLOBAL#GMT_version=GMT4.2
  NC_GLOBAL#node_offset=1
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"somb.grd":z
  SUBDATASET_1_DESC=[60x60] z (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

Only this change is sufficient to break my Matlab gdalread mex file.

I have now clean patches for both the header decoding of GMT produced grids
and the fix reported by Mario Cruz.
However, there is still one problem that requires a more extended solution.
The way the driver is, it expects files written "upside down"  (the 
first row is the top row)
which is the contrary of what GMT does (it writes the first row as the 
bottom row).
That is why GMT grids are imported flipped up-down.

Both ways of writting the grids are valid, but the driver must detect it 
(easy) and act accordingly.

Do you want me to send you my patched version (based on trunk version)?

Joaquim



From warmerdam at pobox.com  Fri Oct 19 15:42:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <4718F9EB.9030906@ualg.pt>
References: <OFB9C10E81.D264EA04-ONC1257376.005198B8-C1257376.005230C2@esa.int>
	<47154A53.1030209@ualg.pt> <47168C4B.30605@pobox.com>
	<47169E52.3040607@ualg.pt> <4716C7BB.2090508@pobox.com>
	<4718F9EB.9030906@ualg.pt>
Message-ID: <47190896.9080206@pobox.com>

Joaquim Luis wrote:
> Do you want me to send you my patched version (based on trunk version)?

Joaquim,

Yes, please do as a trac ticket please.

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Fri Oct 19 17:02:35 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>
Message-ID: <f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>

2007/10/19, Asaf Ben-Nathan <asaf@ben-nathan.com>:
>
> I did indeed chat to you last week about this issue, and I've been
> researching it
> and trying to get things working since then. I was also a little unsure what
> you
> wanted me to send. My makefiles for the bindings are still not working
> properly,
> so only thing I have right now is the compiled version of GDAL under wince
> (which
> you guys have kindly supplied in your release) which compiles and works
> fine.
> I'm compiling using VS; did you want me to create makefiles for this build?
>

Asaf,

I considered you have a working makefile for the core GDAL project
(not the C# related stuff) which is not officially supported right now
by GDAL. I was wondering if you would share this option which I
consider as a more convenient way to start with (rather than using
solutions and project files).

I was raising that because Mateusz have reported previously that the
makefile based build approach cannot be supported easily and that's
why the solution based approach is currently supported. I think we
could start from this as well but it has a few disadvantages when
trying to incorporate the C# related stuff inside.


> The only thing I have managed to do so far is to take a very simple function
> compiled
> under wince and wrap it with SWIG so that it can be called from the compact
> framework, however this is only a very simplistic example and will not be of
> much use
> when we try to wrap the whole of GDAL. I encountered a few problems even
> with
> this simple test:
>
> 1) ThreadStaticAttribute wasn't recognized.
> 2) String mapping didn't work.
>
> I removed the offending code from the SWIG generated PINVOKE file and got
> the code working, but I believe we need some sort of reasonable workaround
> for these.
>

I appreciate your work. I'm a bit wondering about the threadstatic
stuff since it should be supported by the .NET CF as well. This option
is used because the exception is created by a callback that should be
preserved in a static variable until the function returns.

I consider using delegates for calling back to the managed code is not
supported by the framework and that's why the propagation of the
strings and exceptions won't work. However I think we could replace
that with some other options like using Marshal.PtrToStringAnsi
explicitly.


I like the idea around SafeHandle very much, since it could take care
of the ownership of the reference internally and it would simplify the
code we have now. But this option seems to be available only for .NET
CF 2.0 and it has a limited support for MONO as well. Therefore we'll
have to keep the 2 implementations side by side in the project.

>
>
> Thats all I have for now, I've emailed both of them to request any feedback
> or help they can give me. This
> conversation took place over a year ago so some of it may already be fixed
> by now, I won't know until they
> respond. I'm more than happy to help in any way I can, just let me know what
> you'd like me to work on, and
> keep in mind that I'm a SWIG noob :)
>

>From my side I'll make some tests using the required data types in a
sample project and the results can easily be incorporated to GDAL if
there's no critical problems about the feasibility. It would be quite
helpful to have a working makefile having all the required platform
dependent options included which is quite difficult starting to figure
out from scratch.


Best regards,

Tamas

From hulst at argoss.nl  Mon Oct 22 03:34:47 2007
From: hulst at argoss.nl (A.Th.C. Hulst)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Another NetCDF driver bug fix
In-Reply-To: <200710201602.l9KG2HDt014111@duke.maptools.org>
References: <200710201602.l9KG2HDt014111@duke.maptools.org>
Message-ID: <200710220934.48101.hulst@argoss.nl>

On Saturday 20 October 2007 18:02:37 gdal-dev-request@lists.maptools.org 
wrote:
> Frank Warmerdam wrote:
>> Do you want me to send you my patched version (based on trunk version)?
>
> Joaquim,
>
> Yes, please do as a trac ticket please.
Hello,

now that there seems to be some life in the netCDF driver again:

Frank, 

you mentioned that the fix I wrote for applying scale and offset was too 
indiscriminate in the sense that they're always applied. Very true.

"Note that GDALRasterBand has methods to get the offset and scale. The normal 
GDAL practice would be to return them via those methods - not to apply them 
on the fly. Then it is up to the caller to do so if they wish."

What I understand is that if I have implemented the GetOffset and GetScale 
methods, which I have, then I'm done. There's apparently a method of 
GDALRasterBand to apply them. How does that work?

Sander


From Laurent.Saez at equipement.gouv.fr  Mon Oct 22 04:13:11 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem with gdal_translate
Message-ID: <5F827424D35BD311BBA300902798C054053729BA@ct13-mel.cete-mediterranee.i2>

Hi,

I have already explained the problem with gdalwarp using a big ECW (7Go).
I've tried to translate this big ECW to HFA using this command :

"gdal_translate -of HFA -a_srs EPSG:27572 "G:\34-2005-LA2E-C10.ecw" "I:\34-2005-LA2E-C10.img"
Input file size is 280000, 180000
0...10...20...30.ERROR 2: CPLMalloc(): Out of memory allocating 49227500 bytes.


This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information."

I use FWtools 1.3.9 on XP Pro SP2. The PC is a bi-processor Xeon 3 GHz with 2 Go of RAM. The source ECW file in on an external disk and the output file is on another external disk (the output file is about 147 Go in HFA format).

The problem seems to be on memory allocation with both commands (gdalwarp and gdal_translate).
I wonder if this is a general problem with big files or if this is only with big ECW files.

How can I resolve this problem ?

Thanks in advance.

Laurent



From 2voodoo at gmx.de  Mon Oct 22 10:00:05 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
Message-ID: <471CACE5.4060702@gmx.de>

Hello there,

by playing around with GDAL I got some times the following error:

Errorcode: 0xc0000005
Erroradress: 0x011058a8
Read: 0x00000000

Looks like Null-Pointer for me.

The code producing this is the following:

GDALDataset *poDataset = (GDALDataset *) GDALOpen("a.tif", GA_ReadOnly );


The file "a.tif" exists and I have openend it several times until it
suddenly stopped working.
I tryed with a SVN build from today and got the same results.

What could cause such a failure in GDALOpen?

I am using Visual Studio 2005 and devolpe for Windows CE.

Thanks
Tom


From warmerdam at pobox.com  Mon Oct 22 10:37:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CACE5.4060702@gmx.de>
References: <471CACE5.4060702@gmx.de>
Message-ID: <471CB5BA.8090505@pobox.com>

Tom Kazimiers wrote:
> Hello there,
> 
> by playing around with GDAL I got some times the following error:
> 
> Errorcode: 0xc0000005
> Erroradress: 0x011058a8
> Read: 0x00000000
> 
> Looks like Null-Pointer for me.
> 
> The code producing this is the following:
> 
> GDALDataset *poDataset = (GDALDataset *) GDALOpen("a.tif", GA_ReadOnly );
> 
> 
> The file "a.tif" exists and I have openend it several times until it
> suddenly stopped working.
> I tryed with a SVN build from today and got the same results.
> 
> What could cause such a failure in GDALOpen?
> 
> I am using Visual Studio 2005 and devolpe for Windows CE.

Tom,

Did the crash occur within GDALOpen() or afterwards when you tried
to use the NULL poDataset?  It isn't obvious why GDALOpen() would be
failing.  Perhaps you have done something that used up all your file
handles?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Oct 22 11:00:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CACE5.4060702@gmx.de>
References: <471CACE5.4060702@gmx.de>
Message-ID: <471CBB0C.4020506@loskot.net>

Tom Kazimiers wrote:
> Hello there,
> 
> by playing around with GDAL I got some times the following error:
> 
> Errorcode: 0xc0000005
> Erroradress: 0x011058a8
> Read: 0x00000000
> 
> Looks like Null-Pointer for me.
> 
> The code producing this is the following:
> 
> GDALDataset *poDataset = (GDALDataset *) GDALOpen("a.tif", GA_ReadOnly );
> 
> 
> The file "a.tif" exists and I have openend it several times until it
> suddenly stopped working.
> I tryed with a SVN build from today and got the same results.
> 
> What could cause such a failure in GDALOpen?

Tom,

First, you should always test pointer returned
from GDALOpen against null.

Have you tried to use full path to file?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.gregory at oregonstate.edu  Mon Oct 22 12:12:47 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] best approach for writing AI grids
In-Reply-To: <4718079E.6070503@pobox.com>
References: <451453C181B199458A55B2B1723FAC004BC8C5@SAGE.forestry.oregonstate.edu>
	<4718079E.6070503@pobox.com>
Message-ID: <451453C181B199458A55B2B1723FAC004BC8D9@SAGE.forestry.oregonstate.edu>

Frank Warmerdam wrote:
> Option (3) might be port the gio driver to current GDAL, 
> possibly as a runtime loaded driver.  I can't think of any 
> reason it would be a problem to get the old driver working 
> with current GDAL - assuming you are comfortable building 
> GDAL yourself and doing just a bit of build-hacking yourself.

Thanks Frank, 

A great suggestion.  I have a na?ve follow-up question.  You mention loading the GIO driver at runtime.  Is this equivalent to:

--
GDALDriverManager* t = GetGDALDriverManager();
GDALDriver* d = t->GetDriverByName("GIO");
t->RegisterDriver(d);
--

If not, can you explain or point me to documentation which explains loading run-time drivers?

thanks, matt


From luca.casagrande at gmail.com  Mon Oct 22 13:14:33 2007
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Mass Color Table conversion
Message-ID: <1193073273.6136.22.camel@linux-mac>

Hello everybody!

I have got a lot of geoTIFF files that I am using as Tileindex inside
Mapserver.
I discovered that some of them have got the color table inverted and
this is confirmed by Gdalinfo:

One kind of raster:
[..]
 Color Table (RGB with 256 entries)
    0: 255,255,255,255
    1: 0,0,0,255
    2: 0,0,0,255
[..]

The other kind:
[..]
 Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 255,255,255,255
    2: 0,0,0,255
[..]

The problem is that I need to assign transparency to white. I thought
about creating 2 different groups of images, and then assigning the
appropriate class, but i should check tiff one bye one :(
One solution could be to change the Color Table for all images and set
them to:
	0: 255,255,255,255
    	1: 0,0,0,255
	[..]

What do you think about this option? Is there a way for automating the
conversion?

Thanks

Luca

-- 
"Chiunque pu? simpatizzare col dolore di un amico, ma solo un animo nobile
riesce a simpatizzare col successo di un amico." Oscar Wilde

Home Page: http://www.ominiverdi.org
Socio GFOSS "Geospatial Free and Open Source Software" http://www.gfoss.it
Jabber: casagrande@jabber.linux.it


From even.rouault at mines-paris.org  Mon Oct 22 13:46:49 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Mass Color Table conversion
In-Reply-To: <1193073273.6136.22.camel@linux-mac>
References: <1193073273.6136.22.camel@linux-mac>
Message-ID: <200710221946.49769.even.rouault@mines-paris.org>

Instead of checking files one by one at hand, you could try to do that 
automatically, with a line such as (not tried):
for i in *.tif; do gdalinfo $i | grep "0: 255,255,255,255" && mv 
$i /path/to/first/group/of/images; done

Le Monday 22 October 2007 19:14:33 Luca Casagrande, vous avez ?crit?:
> Hello everybody!
>
> I have got a lot of geoTIFF files that I am using as Tileindex inside
> Mapserver.
> I discovered that some of them have got the color table inverted and
> this is confirmed by Gdalinfo:
>
> One kind of raster:
> [..]
>  Color Table (RGB with 256 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
>     2: 0,0,0,255
> [..]
>
> The other kind:
> [..]
>  Color Table (RGB with 256 entries)
>     0: 0,0,0,255
>     1: 255,255,255,255
>     2: 0,0,0,255
> [..]
>
> The problem is that I need to assign transparency to white. I thought
> about creating 2 different groups of images, and then assigning the
> appropriate class, but i should check tiff one bye one :(
> One solution could be to change the Color Table for all images and set
> them to:
> 	0: 255,255,255,255
>     	1: 0,0,0,255
> 	[..]
>
> What do you think about this option? Is there a way for automating the
> conversion?
>
> Thanks
>
> Luca




From mateusz at loskot.net  Mon Oct 22 14:02:43 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CDFBF.80806@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de>
Message-ID: <471CE5C3.3050004@loskot.net>

Tom Kazimiers wrote:
> 
> thanks for the replys.
> Sure I do test against null - the posted code was just an excerpt :) -
> thanks anyway.
> And yes, the crash occurs within GDALOpen() - I put a MessageBox before
> and after GDALOpen() - only the first one appeared, than the crash.
> The file handle explanation looked promising but before this line is
> arrived I still can open files plus after a restart it also does not work.

Tom,

It sounds strange. Perhaps you could post complete snippet of code,
then it will be easier to investigate it.

> The path "a.tif" is the full path of the file as this image is stored in
> root directory of Windows CE 5.

Do you mean that using file name only works like full path to root
directory \, then it's wrong. It doesn't work this way under Windows CE.

If you use only file name, it's assumed you open it from \My Documents,
which is a default data location under Windows CE.

> The last thing I tryed was to put "GDALAllRegister();" right befor
> GDALOpen() - before this I did it in completely different function,
> which I think, should work, too.
> But also this change did it not...

Another thing I'd suggest to check is to see if you have built GDAL with
 GTiff driver, means check if the GTiff driver is properly registered
and available, in run-time.

p.s. Please, use Reply To All, so gdal-dev address is included.
Otherwise, you reply only to post author, me in this case,
but not the list.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From 2voodoo at gmx.de  Mon Oct 22 15:01:48 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CE5C3.3050004@loskot.net>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
Message-ID: <471CF39C.6030105@gmx.de>

Hello,

now I understand what the purpose of the "Reply To All" button is :)

Mateusz Loskot schrieb:
> Tom Kazimiers wrote:
>> thanks for the replys.
>> Sure I do test against null - the posted code was just an excerpt :) -
>> thanks anyway.
>> And yes, the crash occurs within GDALOpen() - I put a MessageBox before
>> and after GDALOpen() - only the first one appeared, than the crash.
>> The file handle explanation looked promising but before this line is
>> arrived I still can open files plus after a restart it also does not work.
>
> Tom,
>
> It sounds strange. Perhaps you could post complete snippet of code,
> then it will be easier to investigate it.

Ok, here is a bigger part of it:

bool CGDALContainer::AddFile(const wchar_t * w_pszFileName)
{   
   
    // Convert wchar_t to char
    const int newsize = wcslen(w_pszFileName);
    char    *pszFileName = (char *)malloc(newsize + 1);
    int count = wcstombs(pszFileName, w_pszFileName, newsize);
    if (count == 0 || count != newsize) {
        FILE * pFile = _wfopen(L"PDAShpTool_ErrorLog.log",L"a");
        fwprintf(pFile, L"Error: The Filename \"%s\" could not be
converted to Const Char *!\n", w_pszFileName);
        fwprintf(pFile, L"       Charactos before: %d Converted items:
%d\n", newsize, count);
        fclose(pFile);
        return false;
    }
    pszFileName[newsize] = '\0'; // one never knows...
    GDALDataset  *poDataset = NULL;
   
    GDALAllRegister();

    MessageBoxW(NULL, L"HA", L"DLL", MB_OK);
    poDataset = (GDALDataset *) GDALOpen( "\a.tif" /*pszFileName*/,
GA_ReadOnly );
    MessageBoxW(NULL, L"HA2", L"DLL", MB_OK);


    if (poDataset == NULL) {
        return false;
    }
   
    GDALRasterBand  *poBand = poDataset->GetRasterBand( 1 );

    ...
    ...

    return true;
}
>
>> The path "a.tif" is the full path of the file as this image is stored in
>> root directory of Windows CE 5.
>
> Do you mean that using file name only works like full path to root
> directory \, then it's wrong. It doesn't work this way under Windows CE.
>
> If you use only file name, it's assumed you open it from \My Documents,
> which is a default data location under Windows CE.
>
Thanks for this hint - strange enough that it worked until yesterday
evening with only the filename for the root directory.
One more thing is that if I put "a.tif" in to open it crashes - if I put
"\a.tif" in it does not crash - it just returns NULL and I
can handle this (besides that the null return is strange, also). The
error returned by CPLGetLastError() is:
CPLError: `.tif' does not exist in the file system
This error was without convertig from wchar_t to char  - it was with
"\a.tif" inserted directly. It seems as if the const char * is not
received properly.

Like I said, I can not really imagine that the problem is really
GDALOpen as it worked until yesterday and I did not change the dll.
But the crash occurs there.

>> The last thing I tryed was to put "GDALAllRegister();" right befor
>> GDALOpen() - before this I did it in completely different function,
>> which I think, should work, too.
>> But also this change did it not...
>
> Another thing I'd suggest to check is to see if you have built GDAL with
>  GTiff driver, means check if the GTiff driver is properly registered
> and available, in run-time.
>
At least returns
"GetGDALDriverManager()->GetDriverByName("GTiff")->GetDescription()":
GTiff

So I think it gets registered properly.

> p.s. Please, use Reply To All, so gdal-dev address is included.
> Otherwise, you reply only to post author, me in this case,
> but not the list.
>
> Cheers
I will do this in future mails, I did not know this. Thanks

bye
Tom

From Chris.Barker at noaa.gov  Mon Oct 22 15:36:42 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
Message-ID: <471CFBCA.2040602@noaa.gov>

Howard Butler wrote:
>  - It's not apparent what we want to do for defaults on the 'make 
> install' target of ./swig/python based on the discussions on the list.  
> Can someone come up with a concise proposal?

I've been following this, so I'll try to write up a summary of what the 
consensus seems to be where there is one, and the options where it is 
not clear to me that a consensus has been reached.

Install does two things (more?)

1) install the python bindings themselves.

There are two options here:

A) don't install them -- let the user run distutils themselves.
This way they can set whatever other options they want. Maybe this 
should be the case for building as well. It's the approach I've most 
commonly seen with python packages based on C/C++ libs -- make to build 
the lib, distutils to build/install the extension. It makes it easier to 
build for multiple versions of python, build binary packages, etc.

B) Have make build and install, via distutils.
  To build -- call python setup.py build.

  To install -- call python setup.py install, but:

  If (default):
   -- They get installed by distutils into site-packages
  else if (prefix is set):
   -- Here we have a couple options:
     a) install in prefix -- I think this is poor choice
     b) have a separate "python-prefix" value, and install it there (you 
can pass an install path into distutils) if $prefix exists, and 
$python-prefix doesn't, I suppose $python-prefix could get set to 
$prefix, so it would work the same as it has been.

2) install the utilities:

It seems the consensus is that the utilities should be installed in 
$prefix, rather than wherever distutils would put them, this means they 
need to be installed by make, or have make or configure configure 
setup.py somehow, based on $prefix -- that sounds messy to me.

A note: There was some talk recently about building a complete set of 
binaries for Windows -- for a few different versions of python. Having 
distutils (and/or setuptools) do all the building and installing 
(including utility scripts) would make this easier to do, so maybe 
having make do it isn't such a good idea.

Hmm -- I'm not sure that cleared anything up, but I think I've laid out 
the options for folks to comment on.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From 2voodoo at gmx.de  Mon Oct 22 16:35:26 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CE5C3.3050004@loskot.net>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
Message-ID: <471D098E.1010700@gmx.de>

Hi again,

I figured out that the conversion of "\a.tif" leads to a
missinterpretation in translation to char and therefore the strange
symbol comes up.
Not clear is why the function did not break in this case.

I traced a bit through the gdal-geotiff-opening process and figured out
that everything works fine until this part
in GDALDataset *GTiffDataset::Open( GDALOpenInfo * poOpenInfo ) in
geotiff.cpp

/* -------------------------------------------------------------------- */
/*      Try opening the dataset.                                        */
/* -------------------------------------------------------------------- */
    if( poOpenInfo->eAccess == GA_ReadOnly )
    hTIFF = VSI_TIFFOpen( poOpenInfo->pszFilename, "r" );
    else
        hTIFF = VSI_TIFFOpen( poOpenInfo->pszFilename, "r+" );


the code after this is not reached anymore.
If I have time tomorrow I will go through the code in tifvsi.cpp

bye
Tom


From mateusz at loskot.net  Mon Oct 22 16:54:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471D098E.1010700@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471D098E.1010700@gmx.de>
Message-ID: <471D0E12.7000904@loskot.net>

Tom Kazimiers wrote:
> Hi again,
> 
> I figured out that the conversion of "\a.tif" leads to a
> missinterpretation in translation to char and therefore the strange
> symbol comes up.
> Not clear is why the function did not break in this case.

\a is interpreted a escape sequence, you need to use double backslash \\

> I traced a bit through the gdal-geotiff-opening process and figured out
> that everything works fine until this part
> in GDALDataset *GTiffDataset::Open( GDALOpenInfo * poOpenInfo ) in
> geotiff.cpp
> 
> /* -------------------------------------------------------------------- */
> /*      Try opening the dataset.                                        */
> /* -------------------------------------------------------------------- */
>     if( poOpenInfo->eAccess == GA_ReadOnly )
>     hTIFF = VSI_TIFFOpen( poOpenInfo->pszFilename, "r" );
>     else
>         hTIFF = VSI_TIFFOpen( poOpenInfo->pszFilename, "r+" );

Try to use double backslash and do not pass any wide-chars to GDALOpen.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 22 17:02:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471CF39C.6030105@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471CF39C.6030105@gmx.de>
Message-ID: <471D0FE3.4030501@loskot.net>

Tom Kazimiers wrote:
> Mateusz Loskot schrieb:
>> Tom Kazimiers wrote:
>>> thanks for the replys.
>>> Sure I do test against null - the posted code was just an excerpt :) -
>>> thanks anyway.
>>> And yes, the crash occurs within GDALOpen() - I put a MessageBox before
>>> and after GDALOpen() - only the first one appeared, than the crash.
>>> The file handle explanation looked promising but before this line is
>>> arrived I still can open files plus after a restart it also does not work.
>> Tom,
>>
>> It sounds strange. Perhaps you could post complete snippet of code,
>> then it will be easier to investigate it.
> 
> Ok, here is a bigger part of it:
> 
> bool CGDALContainer::AddFile(const wchar_t * w_pszFileName)
> {   
>    
>     // Convert wchar_t to char
>     const int newsize = wcslen(w_pszFileName);
>     char    *pszFileName = (char *)malloc(newsize + 1);
>     int count = wcstombs(pszFileName, w_pszFileName, newsize);

Tom,

wcstombs will work only for ASCII subset of characters.
If w_pszFileName consists of non-ASCII characters, but some characters
from polish, french, czech languages, it will not translate the string
properly. You need to use codepage aware function, like
WideCharToMultiByte from Windows API.

>     if (count == 0 || count != newsize) {
>         FILE * pFile = _wfopen(L"PDAShpTool_ErrorLog.log",L"a");
>         fwprintf(pFile, L"Error: The Filename \"%s\" could not be
> converted to Const Char *!\n", w_pszFileName);
>         fwprintf(pFile, L"       Charactos before: %d Converted items:
> %d\n", newsize, count);
>         fclose(pFile);
>         return false;
>     }
>     pszFileName[newsize] = '\0'; // one never knows...
>     GDALDataset  *poDataset = NULL;
>    
>     GDALAllRegister();
> 
>     MessageBoxW(NULL, L"HA", L"DLL", MB_OK);
>     poDataset = (GDALDataset *) GDALOpen( "\a.tif" /*pszFileName*/,
> GA_ReadOnly );

Replace \a.tif with \\a.tif

>>> The path "a.tif" is the full path of the file as this image is stored in
>>> root directory of Windows CE 5.
>> Do you mean that using file name only works like full path to root
>> directory \, then it's wrong. It doesn't work this way under Windows CE.
>>
>> If you use only file name, it's assumed you open it from \My Documents,
>> which is a default data location under Windows CE.
>
> Thanks for this hint - strange enough that it worked until yesterday
> evening with only the filename for the root directory.
> One more thing is that if I put "a.tif" in to open it crashes - if I put
> "\a.tif" in it does not crash - it just returns NULL and I
> can handle this (besides that the null return is strange, also). The
> error returned by CPLGetLastError() is:
> CPLError: `.tif' does not exist in the file system

yes, because \a is escape sequence but not backslach + 'a' letter.
Use \\a to get string like "\a"

> This error was without convertig from wchar_t to char  - it was with
> "\a.tif" inserted directly. It seems as if the const char * is not
> received properly.

Because you don't get what you expected as filename.

> Like I said, I can not really imagine that the problem is really
> GDALOpen as it worked until yesterday and I did not change the dll.
> But the crash occurs there.

Perhaps you accidentally removed slash from correct sequence of \\

>>> The last thing I tryed was to put "GDALAllRegister();" right befor
>>> GDALOpen() - before this I did it in completely different function,
>>> which I think, should work, too.
>>> But also this change did it not...
>> Another thing I'd suggest to check is to see if you have built GDAL with
>>  GTiff driver, means check if the GTiff driver is properly registered
>> and available, in run-time.
>
> At least returns
> "GetGDALDriverManager()->GetDriverByName("GTiff")->GetDescription()":
> GTiff
> 
> So I think it gets registered properly.

Yes, it's OK.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 22 17:11:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>	
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>
	<f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>
Message-ID: <471D11E7.5000700@loskot.net>

Tamas, Asaf,

I'm not able to get involved in SWIG/bindings work,
but I'll stay focused on GDAL core development/porting to Windows CE.

So, if you will have any questions to C/C++ code of GDAL, I'm here to
help you.

Thanks for starting the work on C#/.NET CF stuff.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From 2voodoo at gmx.de  Mon Oct 22 18:21:53 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471D0FE3.4030501@loskot.net>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471CF39C.6030105@gmx.de> <471D0FE3.4030501@loskot.net>
Message-ID: <471D2281.6020304@gmx.de>

Mateusz Loskot schrieb:
> Tom Kazimiers wrote:
>   
>> Mateusz Loskot schrieb:
>>     
>>> Tom Kazimiers wrote:
>>>       
>>>> thanks for the replys.
>>>> Sure I do test against null - the posted code was just an excerpt :) -
>>>> thanks anyway.
>>>> And yes, the crash occurs within GDALOpen() - I put a MessageBox before
>>>> and after GDALOpen() - only the first one appeared, than the crash.
>>>> The file handle explanation looked promising but before this line is
>>>> arrived I still can open files plus after a restart it also does not work.
>>>>         
>>> Tom,
>>>
>>> It sounds strange. Perhaps you could post complete snippet of code,
>>> then it will be easier to investigate it.
>>>       
>> Ok, here is a bigger part of it:
>>
>> bool CGDALContainer::AddFile(const wchar_t * w_pszFileName)
>> {   
>>    
>>     // Convert wchar_t to char
>>     const int newsize = wcslen(w_pszFileName);
>>     char    *pszFileName = (char *)malloc(newsize + 1);
>>     int count = wcstombs(pszFileName, w_pszFileName, newsize);
>>     
>
> Tom,
>
> wcstombs will work only for ASCII subset of characters.
> If w_pszFileName consists of non-ASCII characters, but some characters
> >from polish, french, czech languages, it will not translate the string
> properly. You need to use codepage aware function, like
> WideCharToMultiByte from Windows API.
>   

Ok - thank you - I'll do! I just remembered wrong, I thought wcstombs is
locale aware.
>   
>>     if (count == 0 || count != newsize) {
>>         FILE * pFile = _wfopen(L"PDAShpTool_ErrorLog.log",L"a");
>>         fwprintf(pFile, L"Error: The Filename \"%s\" could not be
>> converted to Const Char *!\n", w_pszFileName);
>>         fwprintf(pFile, L"       Charactos before: %d Converted items:
>> %d\n", newsize, count);
>>         fclose(pFile);
>>         return false;
>>     }
>>     pszFileName[newsize] = '\0'; // one never knows...
>>     GDALDataset  *poDataset = NULL;
>>    
>>     GDALAllRegister();
>>
>>     MessageBoxW(NULL, L"HA", L"DLL", MB_OK);
>>     poDataset = (GDALDataset *) GDALOpen( "\a.tif" /*pszFileName*/,
>> GA_ReadOnly );
>>     
>
> Replace \a.tif with \\a.tif
>
>   
Oops - Sorry - you are right. No wonder why I got this strange symbol.

>>>> The path "a.tif" is the full path of the file as this image is stored in
>>>> root directory of Windows CE 5.
>>>>         
>>> Do you mean that using file name only works like full path to root
>>> directory \, then it's wrong. It doesn't work this way under Windows CE.
>>>
>>> If you use only file name, it's assumed you open it from \My Documents,
>>> which is a default data location under Windows CE.
>>>       
>> Thanks for this hint - strange enough that it worked until yesterday
>> evening with only the filename for the root directory.
>> One more thing is that if I put "a.tif" in to open it crashes - if I put
>> "\a.tif" in it does not crash - it just returns NULL and I
>> can handle this (besides that the null return is strange, also). The
>> error returned by CPLGetLastError() is:
>> CPLError: `.tif' does not exist in the file system
>>     
>
> yes, because \a is escape sequence but not backslach + 'a' letter.
> Use \\a to get string like "\a"
>
>   
yes. sure.
>> This error was without convertig from wchar_t to char  - it was with
>> "\a.tif" inserted directly. It seems as if the const char * is not
>> received properly.
>>     
>
> Because you don't get what you expected as filename.
>
>   
>> Like I said, I can not really imagine that the problem is really
>> GDALOpen as it worked until yesterday and I did not change the dll.
>> But the crash occurs there.
>>     
>
> Perhaps you accidentally removed slash from correct sequence of \\
>
>   
>>>> The last thing I tryed was to put "GDALAllRegister();" right befor
>>>> GDALOpen() - before this I did it in completely different function,
>>>> which I think, should work, too.
>>>> But also this change did it not...
>>>>         
>>> Another thing I'd suggest to check is to see if you have built GDAL with
>>>  GTiff driver, means check if the GTiff driver is properly registered
>>> and available, in run-time.
>>>       
>> At least returns
>> "GetGDALDriverManager()->GetDriverByName("GTiff")->GetDescription()":
>> GTiff
>>
>> So I think it gets registered properly.
>>     
>
> Yes, it's OK.
>
> Cheers
>   
I also did not pass any wide-char characters to GDAL - always char.

I looked a bit more through the classes - but I can not find any error -
The last thing was the "TIFF*
TIFFClientOpen()" Function in tif_open.c
But really can't image that this is the problem.
More and more I doubt that the problem is in GDAL - there must be
something on my side - I tryed also several versions
of my project earlier and it does not work.
The PDA condifuration can't it also be as I testet it in emulator and in
real PDA.

strange...

Bye & thanks
Tom

From szekerest at gmail.com  Mon Oct 22 18:23:07 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <471D11E7.5000700@loskot.net>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>
	<f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>
	<471D11E7.5000700@loskot.net>
Message-ID: <f3b73b7d0710221523y679b4d4cg94a81f643db82611@mail.gmail.com>

Folks,

I'm quite interested in trying to put something together for a
preliminary C# WinCE support for GDAL/OGR. Recently I can see as well
some activity in the SWIG side in his topic, but I've some doubts how
to treat some of the issues independently from the target projects
that isn't complicated too much.

It seems I don't have to alter the current structure of the bindings
too much. The SafeHandle approach I've mentioned before is not widely
available right now so the IntPtr-s will be used instead of the
HandleRefs. I'll be trying to eliminate the need of the callbacks to
the managed side as well which will affect how the bindings will
handle the exceptions and pass the strings to C#. We also have to
consider the strings as double byte characters by default on this
platform.


Mateusz,

Do you have some  variables definied for the WinCE platform should I rely on?


Best regards,

Tamas




2007/10/22, Mateusz Loskot <mateusz@loskot.net>:
> Tamas, Asaf,
>
> I'm not able to get involved in SWIG/bindings work,
> but I'll stay focused on GDAL core development/porting to Windows CE.
>
> So, if you will have any questions to C/C++ code of GDAL, I'm here to
> help you.
>
> Thanks for starting the work on C#/.NET CF stuff.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>

From mateusz at loskot.net  Mon Oct 22 20:25:41 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471D2281.6020304@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471CF39C.6030105@gmx.de> <471D0FE3.4030501@loskot.net>
	<471D2281.6020304@gmx.de>
Message-ID: <471D3F85.5090403@loskot.net>

Tom Kazimiers wrote:
> I looked a bit more through the classes - but I can not find any
> error - The last thing was the "TIFF* TIFFClientOpen()" Function in
> tif_open.c But really can't image that this is the problem. More and
> more I doubt that the problem is in GDAL - there must be something on
> my side - I tryed also several versions of my project earlier and it
> does not work. The PDA condifuration can't it also be as I testet it
> in emulator and in real PDA.

I only run my software on hardware device I'm to avoid trying emulators
(I have bad experience with emulators for Windows CE 3.x and 4.x).

Here is sub-package of autotest with unit tests for Windows CE:

http://trac.osgeo.org/gdal/browser/trunk/autotest/cpp

I usually run these unit tests to check GDAL build for Windows CE.
This is simple console application - a test runner - executable
on a device. Perhaps you will find it useful as well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From seth at pricepages.org  Tue Oct 23 00:16:59 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
Message-ID: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>

Hello, let me first thank everyone for the great GDAL utilities. I've  
been getting much use out of them. However I think I've come across  
something of a bug. Some of my PROJ.4 parameters seem to be ignored.

Here is my warping command (note the -t_srs argument):

gdalwarp -t_srs '+proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0  
+a=6378137.0 +b=6378137.0 +units=m' -ts 11651 16480 -te  
-10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm  
400 -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './ 
N046W090_x1.tif' './N046W090_x1.merc.tif'

I use the PROJ.4 library and these parameters and calculate that my  
expected output bounds are the values I have for -te. However, the  
output image is shifted, and results in quite a bit of black space at  
the top of the image, and some cropped off the bottom. In fact, it  
gives the same output image as this command would give:

gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 16480 - 
te -10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm  
400 -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './ 
N046W090_x1.tif' './N046W090_x1.merc.tif'

(note the different -t_srs)

It looks like most of my -t_srs isn't getting passed to PROJ.4. Am I  
doing something wrong? Is this a bug in the package? If requested, I  
can put the source file online, but it's ~300 MB.

Thanks,
Seth

From maplabs at light42.com  Tue Oct 23 01:07:56 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Misc 1.4.3 trunk today
Message-ID: <EAD1F4D2-8125-11DC-8D80-000A277A733C@light42.com>

check out trunk sources

configure --with-perl  --with-expat=/usr/local
Mac OS 10.10, Postgres 8.2.3, PostGIS 1.3.1

* adding and updating features via perl SWIG bindings seems to be fine
* reading KML failed every time, after several simple attempts

* Geo::GDAL::VersionInfo('VERSION_NUM') -> 1500
      Geo::GDAL::VersionInfo() -> bus error


From schut at sarvision.nl  Tue Oct 23 03:37:13 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471CFBCA.2040602@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<471CFBCA.2040602@noaa.gov>
Message-ID: <471DA4A9.7080507@sarvision.nl>

Christopher Barker wrote:
> Howard Butler wrote:
>>  - It's not apparent what we want to do for defaults on the 'make
>> install' target of ./swig/python based on the discussions on the
>> list.  Can someone come up with a concise proposal?
>
> I've been following this, so I'll try to write up a summary of what
> the consensus seems to be where there is one, and the options where it
> is not clear to me that a consensus has been reached.
>
> Install does two things (more?)
>
> 1) install the python bindings themselves.
>
> There are two options here:
>
> A) don't install them -- let the user run distutils themselves.
> This way they can set whatever other options they want. Maybe this
> should be the case for building as well. It's the approach I've most
> commonly seen with python packages based on C/C++ libs -- make to
> build the lib, distutils to build/install the extension. It makes it
> easier to build for multiple versions of python, build binary
> packages, etc.
>
> B) Have make build and install, via distutils.
>  To build -- call python setup.py build.
>
>  To install -- call python setup.py install, but:
>
>  If (default):
>   -- They get installed by distutils into site-packages
>  else if (prefix is set):
>   -- Here we have a couple options:
>     a) install in prefix -- I think this is poor choice
>     b) have a separate "python-prefix" value, and install it there
> (you can pass an install path into distutils) if $prefix exists, and
> $python-prefix doesn't, I suppose $python-prefix could get set to
> $prefix, so it would work the same as it has been.
>
> 2) install the utilities:
>
> It seems the consensus is that the utilities should be installed in
> $prefix, rather than wherever distutils would put them, this means
> they need to be installed by make, or have make or configure configure
> setup.py somehow, based on $prefix -- that sounds messy to me.
>
> A note: There was some talk recently about building a complete set of
> binaries for Windows -- for a few different versions of python. Having
> distutils (and/or setuptools) do all the building and installing
> (including utility scripts) would make this easier to do, so maybe
> having make do it isn't such a good idea.
>
> Hmm -- I'm not sure that cleared anything up, but I think I've laid
> out the options for folks to comment on.
>
> -Chris
My preferences:

make: runs setup.py build
make install:
    - runs setup.py install for bindings
    - separately installs scripts in prefix, alongside the other gdal
utilities.

Cheers,
Vincent.

From 2voodoo at gmx.de  Tue Oct 23 05:09:15 2007
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471D2281.6020304@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471CF39C.6030105@gmx.de> <471D0FE3.4030501@loskot.net>
	<471D2281.6020304@gmx.de>
Message-ID: <471DBA3B.7050001@gmx.de>

Hello,

I managed to get it to work again - I found an old dll I compiled in my
SVN Tree and it works just by replacing the dll.
So it seems there went something wrong in compiling. I will find out -
but I am glad it works with this version.

thanks for the hints and tips
Tom

From a.neumann at carto.net  Tue Oct 23 05:39:42 2007
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
Message-ID: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>

Hello,

I am currently testing the import from Interlis survey data into
PostgreSQL and ran into some issues. I would appreciate any help I can get
on my problems.

* update problems:
this is probably a PostgreSQL/Postgis problem and not related to Interlis.
I have an existing table structure in Postgis (empty tables) and don't
want to recreate this table structure if I import data from Interlis. I
use the following command to import the data:

ogr2ogr -a_srs "EPSG:21781" -append -update -lco SCHEMA=av -lco DIM=2 -lco
LAUNDER=yes -lco GEOMETRY_NAME=the_geom -f "PostgreSQL" PG:"dbname=mydb
user=myuser password=mypw host=myhost"
uster_dm01ZH24_BB.itf,dm01avzh24.ili Bodenbedeckung__BoFlaeche

Despite my flags "append" and "update" ogr2ogr is trying to create a new
table. I get the following error message:

----------------------
ERROR 1: CREATE TABLE av."Bodenbedeckung__BoFlaeche" ( OGC_FID SERIAL,
CONSTRAINT "Bodenbedeckung__BoFlaeche_pk" PRIMARY KEY (OGC_FID) )
ERROR:  relation "Bodenbedeckung__BoFlaeche" already exists

ERROR 1: Terminating translation prematurely after failed
translation of layer Bodenbedeckung__BoFlaeche
-----------------------

I know that this table already exists, but why is it trying to recreate it
if I specify update and append?

* ili file required?
In Interlis, the model is specified in the ili file and the data in the
itf file. My assumption is that the ili file is only necessary in the case
when I need to create a new data model/table structure and not for
importing data into existing tables. Is this assumption wrong? When I try
to omit the ili file, ogr2ogr crashes with the following error message:

Segmentation fault (core dumped)

* temporary SQL files:
My assumption is that ogr2ogr somewhere creates temporary SQL files that
it is later feeding into PostgreSQL. Is that correct? Or is there a direct
connection to the database and not temporary SQL file? If I can find these
temporary SQL files I might be able to fix errors myself before loading
the SQL files into Postgis.

Thanks for any help on my issues,
Andreas

-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


From mateusz at loskot.net  Tue Oct 23 07:54:12 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Misc 1.4.3 trunk today
In-Reply-To: <EAD1F4D2-8125-11DC-8D80-000A277A733C@light42.com>
References: <EAD1F4D2-8125-11DC-8D80-000A277A733C@light42.com>
Message-ID: <471DE0E4.5080600@loskot.net>

Brian Hamlin wrote:
> check out trunk sources


Brian,

A word of clarification, trunk is not equal to upcoming 1.4.3 but 1.5.0.
Sources of 1.4.3 live in stable branch, under branches/1.4.

> * reading KML failed every time, after several simple attempts

Yes, I'm aware of it.
I will focus on KML issues after 1.4.3 release is out.
Sorry to say that :-(

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 07:55:29 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Null-Pointer in GDALOpen?
In-Reply-To: <471DBA3B.7050001@gmx.de>
References: <471CACE5.4060702@gmx.de> <471CBB0C.4020506@loskot.net>
	<471CDFBF.80806@gmx.de> <471CE5C3.3050004@loskot.net>
	<471CF39C.6030105@gmx.de> <471D0FE3.4030501@loskot.net>
	<471D2281.6020304@gmx.de> <471DBA3B.7050001@gmx.de>
Message-ID: <471DE131.2040800@loskot.net>

Tom Kazimiers wrote:
> Hello,
> 
> I managed to get it to work again - I found an old dll I compiled in my
> SVN Tree and it works just by replacing the dll.
> So it seems there went something wrong in compiling. I will find out -
> but I am glad it works with this version.
> 
> thanks for the hints and tips

Tom,

Great news! Let me know, ideally here on the list, about any problems.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 08:09:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
Message-ID: <471DE483.9090006@loskot.net>

Seth Price wrote:
> Hello, let me first thank everyone for the great GDAL utilities. I've
> been getting much use out of them. However I think I've come across
> something of a bug. Some of my PROJ.4 parameters seem to be ignored.
> 
> Here is my warping command (note the -t_srs argument):
> 
> gdalwarp -t_srs '+proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0
> +a=6378137.0 +b=6378137.0 +units=m' -ts 11651 16480 -te -10018754.171395
> 5465442.183323 -9796115.189808 5780349.220256 -wm 400 -co 'TILED=YES'
> -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './N046W090_x1.tif'
> './N046W090_x1.merc.tif'
> 
> I use the PROJ.4 library and these parameters and calculate that my
> expected output bounds are the values I have for -te. However, the
> output image is shifted, and results in quite a bit of black space at
> the top of the image, and some cropped off the bottom. In fact, it gives
> the same output image as this command would give:
> 
> gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 16480 -te
> -10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm 400
> -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc
> './N046W090_x1.tif' './N046W090_x1.merc.tif'
> 
> (note the different -t_srs)
>
> It looks like most of my -t_srs isn't getting passed to PROJ.4. 


Seth,

In both commands, your parameters are the same.

Here is PROJ.4 definition of Mercator/WGS84 (EPSG:3395)

+proj=merc +lon_0=0 +k=1.000000 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84
+units=m +no_defs

Ellipsoid WGS84 has the same value of a semi-axis as you're giving,
so SRS definition in your first command is equivalent of the definition
from your second command. In the latter case it's a kind of short
version.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jean-claude.repetto at worldonline.fr  Tue Oct 23 08:50:06 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem with gdal_translate with the parameter -a_ullr 0
	0 x x
Message-ID: <471DEDFE.3010301@worldonline.fr>

Hi,

I have downloaded the high resolution Blue Marble images from the page 
<http://visibleearth.nasa.gov/view_detail.php?id=2433> .
Both file contains 21600 x 21600 pixels.
Now, I want to transform them into a mosaic of 32 tiles in ECW format, 
each of them containing 5400 x 5400 pixels.
So I have written this small script :

#!/bin/sh
i=0
while [ "$i" -lt 4 ]
do
         j=0
         while [ "$j" -lt 4 ]
         do
                 gdal_translate -of ECW -co "TARGET=88%" -co 
"DATUM=WGS84"  -co "PROJ=GEODETIC" -co "LARGE_OK=YES" -a_ullr 
$((-180+45*$i)) $((90-45*$j)) $((-135+45*$i)) $((45-45*$j)) -srcwin 
$((5400*$i)) $((5400*$j)) 5400 5400 land_shallow_topo_west.tif 
$((i))$((j)).ecw
                 gdal_translate -of ECW -co "TARGET=88%" -co 
"DATUM=WGS84"  -co "PROJ=GEODETIC" -co "LARGE_OK=YES" -a_ullr $((45*$i)) 
$((90-45*$j)) $((45*($i+1))) $((45-45*$j)) -srcwin $((5400*$i)) 
$((5400*$j)) 5400 5400 land_shallow_topo_east.tif $((i+4))$((j)).ecw
                 j=$(($j+1))
         done
         i=$(($i+1))
done
exit 0


The conversion is OK for all the tiles except one. This tile has 
something special, the coordinates of the UL-LR corner are both zero :

gdal_translate -of ECW -co TARGET=88% -co DATUM=WGS84 -co PROJ=GEODETIC 
-co LARGE_OK=YES -a_ullr 0 0 45 -45 -srcwin 0 10800 5400 5400 
land_shallow_topo_east.tif 42.ecw

This is the result of gdal_info (You can see that the corner coordinates 
are wrong) :

$ gdalinfo 42.ecw
Driver: ECW/ERMapper Compressed Wavelets
Size is 5400, 5400
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AXIS["Lat",NORTH],
     AXIS["Long",EAST],
     AUTHORITY["EPSG","4326"]]
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 5400.0)
Upper Right ( 5400.0,    0.0)
Lower Right ( 5400.0, 5400.0)
Center      ( 2700.0, 2700.0)
Band 1 Block=5400x1 Type=Byte, ColorInterp=Red
   Overviews: arbitrary
Band 2 Block=5400x1 Type=Byte, ColorInterp=Green
   Overviews: arbitrary
Band 3 Block=5400x1 Type=Byte, ColorInterp=Blue
   Overviews: arbitrary


Other tiles are OK. For example :

$ gdalinfo 02.ecw
Driver: ECW/ERMapper Compressed Wavelets
Size is 5400, 5400
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AXIS["Lat",NORTH],
     AXIS["Long",EAST],
     AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,0.000000000000000)
Pixel Size = (0.008333333333333,-0.008333333333333)
Corner Coordinates:
Upper Left  (-180.0000000,   0.0000000) (180d 0'0.00"W,  0d 0'0.01"N)
Lower Left  (-180.0000000, -45.0000000) (180d 0'0.00"W, 45d 0'0.00"S)
Upper Right (-135.0000000,   0.0000000) (135d 0'0.00"W,  0d 0'0.01"N)
Lower Right (-135.0000000, -45.0000000) (135d 0'0.00"W, 45d 0'0.00"S)
Center      (-157.5000000, -22.5000000) (157d30'0.00"W, 22d30'0.00"S)
Band 1 Block=5400x1 Type=Byte, ColorInterp=Red
   Overviews: arbitrary
Band 2 Block=5400x1 Type=Byte, ColorInterp=Green
   Overviews: arbitrary
Band 3 Block=5400x1 Type=Byte, ColorInterp=Blue
   Overviews: arbitrary


I have looked into Trac and could not find such a bug. Is it a know bug, 
or should I report it ?

Thanks,
Jean-Claude

From mateusz at loskot.net  Tue Oct 23 08:54:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Added svn-stable version to Trac
Message-ID: <471DEEE8.4060308@loskot.net>

Hi,

I added new version tag called 'svn-stable' to the Trac's New Ticket
form. This tag refers to stable branch in SVN, stable for the date of
ticket report. Currently, stable branch is stored under branches/1.4.

For those who do not know much about GDAL branching practice.

The trunk is dedicated to the most recent development version of GDAL.
When the team decides to freeze trunk as upcoming line of release
versions, it's copied to branches/X.Y, where X.Y is version of release
versions. For example, branches/1.4 is a matter of childs named having
following names 1.4.0, 1.4.1, 1.4.2, and upcoming 1.4.

Stable branch is dedicated for bug fixes only, no new features or
serious changes are accepted there.

Next upcoming freeze is called 1.5, so new branch will be created:
branches/1.5 and new releases will have numbers like 1.5.0, 1.5.1, etc.

So, anyone who uses GDAL grabbed from SVN branches/1.4 and wants to
report a ticket related to this code, please select 'svn-stable' from
Version drop-down box.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From seth at pricepages.org  Tue Oct 23 10:46:03 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <471DE483.9090006@loskot.net>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
	<471DE483.9090006@loskot.net>
Message-ID: <B80CAC72-D235-4312-8E47-60C8DB23FCAE@pricepages.org>

Thanks for the response. Although I don't claim to know what I'm  
doing, I'm trying to define a sphere (not the normal ellipsoid). I'm  
copying the instructions from this page, the PROJ.4 parameters are at  
the bottom in the 'Update 4' text:
http://cfis.savagexi.com/articles/2006/05/03/google-maps-deconstructed

Also, it doesn't make sense that I'm defining the same parameters,  
because if I directly use the proj utility, the output is different:

proj +proj=merc +datum=WGS84 +units=m -r << EOF
? 46 -90
? EOF
-10018754.17    5749599.55

proj +proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 +a=6378137.0  
+b=6378137.0 +units=m -r << EOF
? 46 -90
? EOF
-10018754.17    5780349.22

I think that gdalwarp is confusing the two commands because the image  
is shifted the same amount as the difference of these two coordinates.
Thanks,
Seth


On Oct 23, 2007, at 6:09 AM, Mateusz Loskot wrote:

> Seth Price wrote:
>> Hello, let me first thank everyone for the great GDAL utilities. I've
>> been getting much use out of them. However I think I've come across
>> something of a bug. Some of my PROJ.4 parameters seem to be ignored.
>>
>> Here is my warping command (note the -t_srs argument):
>>
>> gdalwarp -t_srs '+proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0
>> +a=6378137.0 +b=6378137.0 +units=m' -ts 11651 16480 -te  
>> -10018754.171395
>> 5465442.183323 -9796115.189808 5780349.220256 -wm 400 -co 'TILED=YES'
>> -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './N046W090_x1.tif'
>> './N046W090_x1.merc.tif'
>>
>> I use the PROJ.4 library and these parameters and calculate that my
>> expected output bounds are the values I have for -te. However, the
>> output image is shifted, and results in quite a bit of black space at
>> the top of the image, and some cropped off the bottom. In fact, it  
>> gives
>> the same output image as this command would give:
>>
>> gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 16480  
>> -te
>> -10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm  
>> 400
>> -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc
>> './N046W090_x1.tif' './N046W090_x1.merc.tif'
>>
>> (note the different -t_srs)
>>
>> It looks like most of my -t_srs isn't getting passed to PROJ.4.
>
>
> Seth,
>
> In both commands, your parameters are the same.
>
> Here is PROJ.4 definition of Mercator/WGS84 (EPSG:3395)
>
> +proj=merc +lon_0=0 +k=1.000000 +x_0=0 +y_0=0 +ellps=WGS84  
> +datum=WGS84
> +units=m +no_defs
>
> Ellipsoid WGS84 has the same value of a semi-axis as you're giving,
> so SRS definition in your first command is equivalent of the  
> definition
> from your second command. In the latter case it's a kind of short
> version.
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net


From maplabs at light42.com  Tue Oct 23 11:15:54 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Misc 1.4.3 trunk today
In-Reply-To: <471DE0E4.5080600@loskot.net>
References: <EAD1F4D2-8125-11DC-8D80-000A277A733C@light42.com>
	<471DE0E4.5080600@loskot.net>
Message-ID: <D945AAA6-817A-11DC-8D80-000A277A733C@light42.com>


> Yes, I'm aware of it.
> I will focus on KML issues after 1.4.3 release is out.
>

I dont understand how KML reading can not be in 1.4.3.. that was 
entirely working already..

Reading KML itself is not the issue.. In the same time as this KML 
driver has been going, another
project 'arc2earth', .Net/ESRI based, has created a huge feature list. 
This project seems
stuck at the starting line with KML. Maybe I could have written more 
code, maybe not, either
way I am feeling no joy right now.

   -Brian


From mateusz at loskot.net  Tue Oct 23 11:18:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <B80CAC72-D235-4312-8E47-60C8DB23FCAE@pricepages.org>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
	<471DE483.9090006@loskot.net>
	<B80CAC72-D235-4312-8E47-60C8DB23FCAE@pricepages.org>
Message-ID: <471E10C9.6020506@loskot.net>

Seth Price wrote:
> Thanks for the response. Although I don't claim to know what I'm doing,
> I'm trying to define a sphere (not the normal ellipsoid).

Seth,

Ah, right. I've missed the b semi-axis parameter.

> I'm copying
> the instructions from this page, the PROJ.4 parameters are at the bottom
> in the 'Update 4' text:
> http://cfis.savagexi.com/articles/2006/05/03/google-maps-deconstructed
> 
> Also, it doesn't make sense that I'm defining the same parameters,
> because if I directly use the proj utility, the output is different:
> 
> proj +proj=merc +datum=WGS84 +units=m -r << EOF
> ? 46 -90
> ? EOF
> -10018754.17    5749599.55
> 
> proj +proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 +a=6378137.0
> +b=6378137.0 +units=m -r << EOF
> ? 46 -90
> ? EOF
> -10018754.17    5780349.22
> 
> I think that gdalwarp is confusing the two commands because the image is
> shifted the same amount as the difference of these two coordinates.

Yes, your assumptions seem to be correct.

I've checked the code, and construction of spatial reference system
object (OGRSpatialReference class) ignores your a and b parameters,
recognizes proj=merc name and uses default ellipsoid.
IOW, according to my understanding, handling custom PROJ.4 definition
that uses standard projection name is not supported.

Let's wait for Frank's comment.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 11:46:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] 1.4.3 patches reviewed
Message-ID: <471E176B.6050204@loskot.net>

Dear Developers,

FYI, I've reviewed and updated all submissions with fixes for
branches/1.4 (stable branch, upcoming 1.4.3). It's up to date now.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 11:53:16 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <f3b73b7d0710221523y679b4d4cg94a81f643db82611@mail.gmail.com>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>	
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>	
	<f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>	
	<471D11E7.5000700@loskot.net>
	<f3b73b7d0710221523y679b4d4cg94a81f643db82611@mail.gmail.com>
Message-ID: <471E18EC.7080009@loskot.net>

Tamas Szekeres wrote:
> Mateusz,
> 
> Do you have some  variables definied for the WinCE platform should I rely on?

Tamas,

Do you mean variables related to GDAL or platform (architecture, CPU,
system) ?

All variables, macros, etc. are defined in property sheet
wince/msvc80/gdalce_common.vsprops
and project file
wince/msvc80/gdalce_dll/gdalce_dll.vsproj

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mitchelljj98 at gmail.com  Tue Oct 23 14:32:48 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] gdalwarp -wo init_dest issues
Message-ID: <fa2ac0580710231132y738c2d5bvea14bfedccdd232d@mail.gmail.com>

Hi,

I am trying to generate a mosaic which initializes the newly created geotiff
file with an RGB value of "226 1 226" and then to replace those areas with
input geotiff file where they exist and keeping the initial value of "226 1
226" where they don't exist.
I have run the following command:
gdalwarp.exe -wo INIT_DEST="226 1 226" -rc -s_srs EPSG:4326 -t_srs EPSG:4326
inputgeotiff1.tif inputgeotiff2.tif outputgeotiff.tif

The resulting output geotiff has two issues:
a.) The initial background value is an RGB of "226 226 226" instead of "226
1 226"
b.) The first geotiff image called inputgeotiff1.tif is not displayed and
the area where it is supposed to be displayed has the initial background
image instead.   Note:  The second input geotiff image is correctly
displayed replacing the initial background image.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071023/a8057e0f/attachment.html
From mitchelljj98 at gmail.com  Tue Oct 23 15:40:15 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: gdalwarp -wo init_dest issues
In-Reply-To: <fa2ac0580710231132y738c2d5bvea14bfedccdd232d@mail.gmail.com>
References: <fa2ac0580710231132y738c2d5bvea14bfedccdd232d@mail.gmail.com>
Message-ID: <fa2ac0580710231240t539d6542m4cb8715298eba24a@mail.gmail.com>

Hi,

Regarding the email listed below I was able to figure out issue "a" by
having the RGB value separated by commas (-wo INIT_DEST=226,1,226) which now
displays the  "226 1 226" pixels for areas that don't have any data.
I still can't figure out issue "b".

John Mitchell

On 10/23/07, John Mitchell <mitchelljj98@gmail.com> wrote:
>
> Hi,
>
> I am trying to generate a mosaic which initializes the newly created
> geotiff file with an RGB value of "226 1 226" and then to replace those
> areas with input geotiff file where they exist and keeping the initial value
> of "226 1 226" where they don't exist.
> I have run the following command:
> gdalwarp.exe -wo INIT_DEST="226 1 226" -rc -s_srs EPSG:4326 -t_srs
> EPSG:4326 inputgeotiff1.tif inputgeotiff2.tif outputgeotiff.tif
>
> The resulting output geotiff has two issues:
> a.) The initial background value is an RGB of "226 226 226" instead of
> "226 1 226"
> b.) The first geotiff image called inputgeotiff1.tif is not displayed and
> the area where it is supposed to be displayed has the initial background
> image instead.   Note:  The second input geotiff image is correctly
> displayed replacing the initial background image.
>
> Thanks,
>
> --
> John J. Mitchell




-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071023/e3c12e11/attachment.html
From jean-claude.repetto at worldonline.fr  Tue Oct 23 17:21:10 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Problem with gdal_translate with the parameter -a_ullr
	0	0 x x
In-Reply-To: <471DEDFE.3010301@worldonline.fr>
References: <471DEDFE.3010301@worldonline.fr>
Message-ID: <471E65C6.3090300@worldonline.fr>

Jean-Claude Repetto wrote :

> The conversion is OK for all the tiles except one. This tile has
> something special, the coordinates of the UL-LR corner are both zero :
> 
> gdal_translate -of ECW -co TARGET=88% -co DATUM=WGS84 -co PROJ=GEODETIC
> -co LARGE_OK=YES -a_ullr 0 0 45 -45 -srcwin 0 10800 5400 5400
> land_shallow_topo_east.tif 42.ecw
> 

The ECW file is correct. I have checked it by reading it directly with
the ECW library.
The bug occurs when GDAL reads the file. I have looked at the source
code (version 1.4.2), and it seems the bug is in the file ecwdataset.cpp :

/* -------------------------------------------------------------------- */
/*      Capture Geotransform.                                           */
/* -------------------------------------------------------------------- */

    if(  psFileInfo->fOriginX != 0.0
        || psFileInfo->fOriginY != 0.0
        && (psFileInfo->fCellIncrementX != 0.0 &&
            psFileInfo->fCellIncrementX != 1.0)
        && (psFileInfo->fCellIncrementY != 0.0 &&
            psFileInfo->fCellIncrementY != 1.0) )
    {
	bGeoTransformValid = TRUE;


When the coordinates of the origin are both equal to 0.0, GDAL thinks
the parameters are invalid, but why ?

Thanks for your help,
Jean-Claude


From szekerest at gmail.com  Tue Oct 23 17:40:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <471E18EC.7080009@loskot.net>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>
	<f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>
	<471D11E7.5000700@loskot.net>
	<f3b73b7d0710221523y679b4d4cg94a81f643db82611@mail.gmail.com>
	<471E18EC.7080009@loskot.net>
Message-ID: <f3b73b7d0710231440m5f516984rd300d7ee6d36c2fc@mail.gmail.com>

2007/10/23, Mateusz Loskot <mateusz@loskot.net>:

> Do you mean variables related to GDAL or platform (architecture, CPU,
> system) ?
>
I mean the variable which is dedicated to the WinCE builds that I
should use to enable/disable the WinCE related stuff.  It seems
UNDER_CE, _WIN32_WINCE, WINCE are kinda good candidates to do such
things.

Best regards,

Tamas

From jean-claude.repetto at worldonline.fr  Wed Oct 24 06:16:48 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] [Patch] Problem with gdal_translate with the parameter
	-a_ullr 0 0 x x
In-Reply-To: <471E65C6.3090300@worldonline.fr>
References: <471DEDFE.3010301@worldonline.fr> <471E65C6.3090300@worldonline.fr>
Message-ID: <471F1B90.6010103@worldonline.fr>

Jean-Claude Repetto wrote :
> 
> The ECW file is correct. I have checked it by reading it directly with
> the ECW library.
> The bug occurs when GDAL reads the file. I have looked at the source
> code (version 1.4.2), and it seems the bug is in the file ecwdataset.cpp .

This is a patch that I propose :

--- frmts/ecw/ecwdataset.cpp.orig       2007-10-24 11:35:44.000000000 +0200
+++ frmts/ecw/ecwdataset.cpp    2007-10-24 11:41:59.000000000 +0200
@@ -1539,9 +1539,9 @@

      if( psFileInfo->fOriginX != 0.0
          || psFileInfo->fOriginY != 0.0
-        && (psFileInfo->fCellIncrementX != 0.0 &&
+        || (psFileInfo->fCellIncrementX != 0.0 &&
              psFileInfo->fCellIncrementX != 1.0)
-        && (psFileInfo->fCellIncrementY != 0.0 &&
+        || (psFileInfo->fCellIncrementY != 0.0 &&
              psFileInfo->fCellIncrementY != 1.0) )
      {
          bGeoTransformValid = TRUE;


With this patch applied to GDAL 1.4.2, both gdalinfo and qgis give 
correct results.

Regards,
Jean-Claude

From jean-claude.repetto at worldonline.fr  Wed Oct 24 07:50:47 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
Message-ID: <471F3197.6020306@worldonline.fr>

Hi,

I have downloaded a bitmap file of the world 
(http://veimages.gsfc.nasa.gov//2433/land_shallow_topo_2048.tif)
and a shape file of the administrative limits 
(http://www.pagcgeo.org/world_factbk.zip).

I would like to add the administrative limits to the world map by using 
gdal_rasterize.

I have tried this command :

gdal_rasterize -b 1 -b 2 -b 3 -burn 255 -burn 0 -burn 0 -l world_factbk 
world_factbk.shp land_shallow_topo_2048.tif

But a segmentation fault occurs. I have enabled CPL_DEBUG to get more 
debug messages. This is the result :

GDAL: Auto register /usr/lib/gdalplugins/gdal_GRASS.so using 
GDALRegister_GRASS.
OGR: Auto register /usr/lib/gdalplugins/ogr_GRASS.so using RegisterOGRGRASS.
GRASS: OGRGRASSDataSource::Open
GRASS: OGRGRASSDataSource::~OGRGRASSDataSource()
OGR: OGROpen(world_factbk.shp/0x616720) succeeded as ESRI Shapefile.
GDAL: GDALOpen(land_shallow_topo_2048.tif) succeeds as GTiff.
0100 - done.
Shape: 27459 features read on layer 'world_factbk'.
Segmentation fault


What I am doing wrong ? (I am using the version 1.4.2 of GDAL).

Thanks,
Jean-Claude


From warmerdam at pobox.com  Wed Oct 24 11:43:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Misc 1.4.3 trunk today
In-Reply-To: <D945AAA6-817A-11DC-8D80-000A277A733C@light42.com>
References: <EAD1F4D2-8125-11DC-8D80-000A277A733C@light42.com>
	<471DE0E4.5080600@loskot.net>
	<D945AAA6-817A-11DC-8D80-000A277A733C@light42.com>
Message-ID: <471F6807.3060108@pobox.com>

Brian Hamlin wrote:
> 
>> Yes, I'm aware of it.
>> I will focus on KML issues after 1.4.3 release is out.
>>
> 
> I dont understand how KML reading can not be in 1.4.3.. that was 
> entirely working already..

Brian,

GDAL point releases aren't normally for new features.

> Reading KML itself is not the issue.. In the same time as this KML 
> driver has been going, another
> project 'arc2earth', .Net/ESRI based, has created a huge feature list. 
> This project seems
> stuck at the starting line with KML. Maybe I could have written more 
> code, maybe not, either
> way I am feeling no joy right now.

Presumably kml output is a focus of the arc2earth project while for us
it has been the project of a student over the summer.  I understand your
frustration, but your enthusiasm doesn't make kml support a priority for
other volunteers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 24 12:07:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
In-Reply-To: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>
References: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>
Message-ID: <471F6DB2.9030200@pobox.com>

Andreas Neumann wrote:
> Despite my flags "append" and "update" ogr2ogr is trying to create a new
> table. I get the following error message:
> 
> ----------------------
> ERROR 1: CREATE TABLE av."Bodenbedeckung__BoFlaeche" ( OGC_FID SERIAL,
> CONSTRAINT "Bodenbedeckung__BoFlaeche_pk" PRIMARY KEY (OGC_FID) )
> ERROR:  relation "Bodenbedeckung__BoFlaeche" already exists
> 
> ERROR 1: Terminating translation prematurely after failed
> translation of layer Bodenbedeckung__BoFlaeche
> -----------------------
> 
> I know that this table already exists, but why is it trying to recreate it
> if I specify update and append?

Andreas,

This is because ogr2ogr does not find the existing table as a layer,
presumably because it is not listed in the GEOMETRY_COLUMNS table as
is expected for geometry based tables.

> * ili file required?
> In Interlis, the model is specified in the ili file and the data in the
> itf file. My assumption is that the ili file is only necessary in the case
> when I need to create a new data model/table structure and not for
> importing data into existing tables. Is this assumption wrong? When I try
> to omit the ili file, ogr2ogr crashes with the following error message:
> 
> Segmentation fault (core dumped)

I'm a bit fuzzy on this aspect.  Pirmin is the authority.

But the crash seems like an unacceptable result, and I'd appreciate a bug
report on it.

> * temporary SQL files:
> My assumption is that ogr2ogr somewhere creates temporary SQL files that
> it is later feeding into PostgreSQL. Is that correct? Or is there a direct
> connection to the database and not temporary SQL file? If I can find these
> temporary SQL files I might be able to fix errors myself before loading
> the SQL files into Postgis.

It is done by directly submitting SQL statements to postgres through
libpq.  There is no file on disk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 24 12:11:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471DA4A9.7080507@sarvision.nl>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<471CFBCA.2040602@noaa.gov> <471DA4A9.7080507@sarvision.nl>
Message-ID: <471F6EB5.1070808@pobox.com>

Vincent Schut wrote:
> My preferences:
> 
> make: runs setup.py build
> make install:
>     - runs setup.py install for bindings
>     - separately installs scripts in prefix, alongside the other gdal
> utilities.

Folks,

This also sounds good to me, though I'd be ok with installing by
default in the Python tree as long as there is an easy way (driven by
configure) to place stuff elsewhere.  Something like we do now
with --with-pymod-dir.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From a.neumann at carto.net  Wed Oct 24 11:42:47 2007
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Fwd: Re: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues]
Message-ID: <54899.193.246.86.39.1193240567.squirrel@webmail.customers.iirc.at>

I accidentally sent this mail to Frank only, sorry.
Andreas

---------------------------- Original Message ----------------------------
Subject: Re: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
From:    "Andreas Neumann" <a.neumann@carto.net>
Date:    Wed, October 24, 2007 5:41 pm
To:      "Frank Warmerdam" <warmerdam@pobox.com>
--------------------------------------------------------------------------

Hi Frank,

thank you very much for answering my questions. I will contact Pirmin
about the 2nd problem and file a bug.

As to the first problem: the concerned table is listed in
"public.geometry_columns" - but the table itself is in another schema,
called "av". Could there be an issue when several schemas are involved? Is
ogr2ogr fully schema aware?

Thank you for an answer regarding problem 1,
Andreas

> Andreas Neumann wrote:
>> Despite my flags "append" and "update" ogr2ogr is trying to create a new
>> table. I get the following error message:
>>
>> ----------------------
>> ERROR 1: CREATE TABLE av."Bodenbedeckung__BoFlaeche" ( OGC_FID SERIAL,
>> CONSTRAINT "Bodenbedeckung__BoFlaeche_pk" PRIMARY KEY (OGC_FID) )
>> ERROR:  relation "Bodenbedeckung__BoFlaeche" already exists
>>
>> ERROR 1: Terminating translation prematurely after failed
>> translation of layer Bodenbedeckung__BoFlaeche
>> -----------------------
>>
>> I know that this table already exists, but why is it trying to recreate
>> it
>> if I specify update and append?
>
> Andreas,
>
> This is because ogr2ogr does not find the existing table as a layer,
> presumably because it is not listed in the GEOMETRY_COLUMNS table as
> is expected for geometry based tables.
>
>> * ili file required?
>> In Interlis, the model is specified in the ili file and the data in the
>> itf file. My assumption is that the ili file is only necessary in the
>> case
>> when I need to create a new data model/table structure and not for
>> importing data into existing tables. Is this assumption wrong? When I
>> try
>> to omit the ili file, ogr2ogr crashes with the following error message:
>>
>> Segmentation fault (core dumped)
>
> I'm a bit fuzzy on this aspect.  Pirmin is the authority.
>
> But the crash seems like an unacceptable result, and I'd appreciate a bug
> report on it.
>
>> * temporary SQL files:
>> My assumption is that ogr2ogr somewhere creates temporary SQL files that
>> it is later feeding into PostgreSQL. Is that correct? Or is there a
>> direct
>> connection to the database and not temporary SQL file? If I can find
>> these
>> temporary SQL files I might be able to fix errors myself before loading
>> the SQL files into Postgis.
>
> It is done by directly submitting SQL statements to postgres through
> libpq.  There is no file on disk.
>



-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


From mateusz at loskot.net  Wed Oct 24 12:05:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <471F3197.6020306@worldonline.fr>
References: <471F3197.6020306@worldonline.fr>
Message-ID: <471F6D2F.1070403@loskot.net>

Jean-Claude Repetto wrote:
> Hi,
> 
> I have downloaded a bitmap file of the world
> (http://veimages.gsfc.nasa.gov//2433/land_shallow_topo_2048.tif)
> and a shape file of the administrative limits
> (http://www.pagcgeo.org/world_factbk.zip).
> 
> I would like to add the administrative limits to the world map by using
> gdal_rasterize.
> 
> I have tried this command :
> 
> gdal_rasterize -b 1 -b 2 -b 3 -burn 255 -burn 0 -burn 0 -l world_factbk
> world_factbk.shp land_shallow_topo_2048.tif
> 
> But a segmentation fault occurs. I have enabled CPL_DEBUG to get more
> debug messages. This is the result :
> 
> GDAL: Auto register /usr/lib/gdalplugins/gdal_GRASS.so using
> GDALRegister_GRASS.
> OGR: Auto register /usr/lib/gdalplugins/ogr_GRASS.so using
> RegisterOGRGRASS.
> GRASS: OGRGRASSDataSource::Open
> GRASS: OGRGRASSDataSource::~OGRGRASSDataSource()
> OGR: OGROpen(world_factbk.shp/0x616720) succeeded as ESRI Shapefile.
> GDAL: GDALOpen(land_shallow_topo_2048.tif) succeeds as GTiff.
> 0100 - done.
> Shape: 27459 features read on layer 'world_factbk'.
> Segmentation fault
> 
> 
> What I am doing wrong ? (I am using the version 1.4.2 of GDAL).


Jean-Claude,

The problem is in rasterizing algorithm. Spatial extent of your
shapefile spans from negative to positive values, but and rasterizer
expects a) positive values to identify range of scanline b) cooridnate
system conformance of vector and raster data used in rasterizing.
Your tif file does not have any coordinate system assigned.

So, please report a ticket for this ussue to the Trac system:

http://trac.osgeo.org/gdal/

Then I will be able to track down the problem and fix.

As a workaround, I'd suggest to do following:
1. Assign coordinate system to the tif
2. Reproject it and your shapefile to non-geographical system,
so you will get all coordinates positive
3. Try to rasterize it now.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 24 12:09:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471F6EB5.1070808@pobox.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>	<471CFBCA.2040602@noaa.gov>
	<471DA4A9.7080507@sarvision.nl> <471F6EB5.1070808@pobox.com>
Message-ID: <471F6E37.9080106@loskot.net>

Frank Warmerdam wrote:
> Vincent Schut wrote:
>> My preferences:
>> 
>> make: runs setup.py build make install: - runs setup.py install for
>> bindings - separately installs scripts in prefix, alongside the
>> other gdal utilities.
> 
> Folks,
> 
> This also sounds good to me, though I'd be ok with installing by 
> default in the Python tree as long as there is an easy way (driven by
>  configure) to place stuff elsewhere.  Something like we do now with
> --with-pymod-dir.

Folks,

I concur Frank's suggestion.
Personally, I prefer to not to mess standard prefix locations
with any files during process of development (building, testing,
fixing). Ideally, I'd like to be able to use python bindings *without*
necessity of running any install steps, as it is possible with old-gen
python, though AFAIK it's not easy or even feasible with the new bindings.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 24 12:12:07 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Fwd: Re: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues]
In-Reply-To: <54899.193.246.86.39.1193240567.squirrel@webmail.customers.iirc.at>
References: <54899.193.246.86.39.1193240567.squirrel@webmail.customers.iirc.at>
Message-ID: <471F6ED7.7010403@loskot.net>

Andreas Neumann wrote:
> Hi Frank,
> 
> thank you very much for answering my questions. I will contact Pirmin
> about the 2nd problem and file a bug.
> 
> As to the first problem: the concerned table is listed in
> "public.geometry_columns" - but the table itself is in another schema,
> called "av". Could there be an issue when several schemas are involved? Is
> ogr2ogr fully schema aware?

Andreas,

Does the information included in the OGR PG driver manual answers your
question?

http://www.gdal.org/ogr/drv_pg.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Oct 24 12:53:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471F6E37.9080106@loskot.net>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<471CFBCA.2040602@noaa.gov> <471DA4A9.7080507@sarvision.nl>
	<471F6EB5.1070808@pobox.com> <471F6E37.9080106@loskot.net>
Message-ID: <471F7871.9030208@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Vincent Schut wrote:
>>> My preferences:
>>>
>>> make: runs setup.py build make install: - runs setup.py install for
>>> bindings - separately installs scripts in prefix, alongside the
>>> other gdal utilities.
>> Folks,
>>
>> This also sounds good to me, though I'd be ok with installing by 
>> default in the Python tree as long as there is an easy way (driven by
>>  configure) to place stuff elsewhere.  Something like we do now with
>> --with-pymod-dir.
> 
> Folks,
> 
> I concur Frank's suggestion.
> Personally, I prefer to not to mess standard prefix locations
> with any files during process of development (building, testing,
> fixing). Ideally, I'd like to be able to use python bindings *without*
> necessity of running any install steps, as it is possible with old-gen
> python, though AFAIK it's not easy or even feasible with the new bindings.

Mateusz,

I do this all the time with the new bindings!  It's just that the
PYTHONPATH item I insert is messy.

warmerda@amd64[1]% echo $PYTHONPATH
/home/warmerda/gdal/swig/python/build/lib.linux-x86_64-2.4:/home/warmerda/mapserver/mapscript/python/build/lib.linux-x86_64-2.4

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jean-claude.repetto at worldonline.fr  Wed Oct 24 13:38:36 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <471F6D2F.1070403@loskot.net>
References: <471F3197.6020306@worldonline.fr> <471F6D2F.1070403@loskot.net>
Message-ID: <471F831C.4050905@worldonline.fr>

Mateusz Loskot a ?crit :
> 
> The problem is in rasterizing algorithm. Spatial extent of your
> shapefile spans from negative to positive values, but and rasterizer
> expects a) positive values to identify range of scanline b) cooridnate
> system conformance of vector and raster data used in rasterizing.
> Your tif file does not have any coordinate system assigned.

Hi Mateusz,

Thanks for your quick answer.
I have assigned the EPSG:4326 coordinate system to the TIF file, and now
gdal_rasterize is working. So, negative coordinate values are allowed !
But all the polygons are filled. Is it possible to draw only the
contours of the polygons ?

Regards,
Jean-Claude


From Chris.Barker at noaa.gov  Wed Oct 24 14:56:45 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471F7871.9030208@pobox.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<471CFBCA.2040602@noaa.gov> <471DA4A9.7080507@sarvision.nl>
	<471F6EB5.1070808@pobox.com> <471F6E37.9080106@loskot.net>
	<471F7871.9030208@pobox.com>
Message-ID: <471F956D.3080606@noaa.gov>

Frank Warmerdam wrote:
>> Ideally, I'd like to be able to use python bindings *without*
>> necessity of running any install steps

> Mateusz,
> 
> I do this all the time with the new bindings!  It's just that the
> PYTHONPATH item I insert is messy.
> 
> warmerda@amd64[1]% echo $PYTHONPATH
> /home/warmerda/gdal/swig/python/build/lib.linux-x86_64-2.4:/home/warmerda/mapserver/mapscript/python/build/lib.linux-x86_64-2.4 

Am I reading wrong, or is that the same path twice?

Anyway, another option is to use the --inplace option to "setup.py 
build", or, if you have setuptools, the "develop" command:

http://peak.telecommunity.com/DevCenter/setuptools#development-mode

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Wed Oct 24 17:52:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] [Patch] Problem with gdal_translate with the parameter
	-a_ullr 0 0 x x
In-Reply-To: <471F1B90.6010103@worldonline.fr>
References: <471DEDFE.3010301@worldonline.fr> <471E65C6.3090300@worldonline.fr>
	<471F1B90.6010103@worldonline.fr>
Message-ID: <471FBE85.1050008@loskot.net>

Jean-Claude Repetto wrote:
> Jean-Claude Repetto wrote :
>>
>> The ECW file is correct. I have checked it by reading it directly with
>> the ECW library.
>> The bug occurs when GDAL reads the file. I have looked at the source
>> code (version 1.4.2), and it seems the bug is in the file
>> ecwdataset.cpp .
> 
> This is a patch that I propose :
> 
> --- frmts/ecw/ecwdataset.cpp.orig       2007-10-24 11:35:44.000000000 +0200
> +++ frmts/ecw/ecwdataset.cpp    2007-10-24 11:41:59.000000000 +0200
> @@ -1539,9 +1539,9 @@
> 
>      if( psFileInfo->fOriginX != 0.0
>          || psFileInfo->fOriginY != 0.0
> -        && (psFileInfo->fCellIncrementX != 0.0 &&
> +        || (psFileInfo->fCellIncrementX != 0.0 &&
>              psFileInfo->fCellIncrementX != 1.0)
> -        && (psFileInfo->fCellIncrementY != 0.0 &&
> +        || (psFileInfo->fCellIncrementY != 0.0 &&
>              psFileInfo->fCellIncrementY != 1.0) )
>      {
>          bGeoTransformValid = TRUE;
> 
> 
> With this patch applied to GDAL 1.4.2, both gdalinfo and qgis give
> correct results.

Jean-Claude,

Please, submit this patch as a ticket. We will test it. Thanks!


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 24 18:15:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <471F831C.4050905@worldonline.fr>
References: <471F3197.6020306@worldonline.fr> <471F6D2F.1070403@loskot.net>
	<471F831C.4050905@worldonline.fr>
Message-ID: <471FC40B.1020408@loskot.net>

Jean-Claude Repetto wrote:
> Mateusz Loskot a ?crit :
>> The problem is in rasterizing algorithm. Spatial extent of your 
>> shapefile spans from negative to positive values, but and
>> rasterizer expects a) positive values to identify range of scanline
>> b) cooridnate system conformance of vector and raster data used in
>> rasterizing. Your tif file does not have any coordinate system
>> assigned.
> 
> Hi Mateusz,
> 
> Thanks for your quick answer. I have assigned the EPSG:4326
> coordinate system to the TIF file, and now gdal_rasterize is working.
> So, negative coordinate values are allowed !

Jean-Claude,

Yes, you're right, I just wasn't precise enough.
They are allowed if georeference of files is asserted.

> But all the polygons are filled. Is it possible to draw only the 
> contours of the polygons ?

Nope.

Quoting Frank's old post:
http://lists.maptools.org/pipermail/gdal-dev/2006-June/009294.html

"GDAL's rasterization capability is not sophisticated from a render
styling point of view.  Other tools may be more appropriate if you want
to do anything more sophisitcated that rasterize the polygons in a
single solid color."

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 24 19:05:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <FC8A4F1C-FF9C-4911-8169-AC536F6A0765@pricepages.org>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
	<471DE483.9090006@loskot.net>
	<B80CAC72-D235-4312-8E47-60C8DB23FCAE@pricepages.org>
	<471E10C9.6020506@loskot.net>
	<FC8A4F1C-FF9C-4911-8169-AC536F6A0765@pricepages.org>
Message-ID: <471FCFB1.4070308@loskot.net>

Seth,

I found that your command is wrong.
The OGR is correct, but you need to use +nadgrids=@null trick to
overwrite ellipsoid issue.

It is well explained in PROJ.4 FAQ:

http://proj.maptools.org/faq.html (Changing Ellipsoid...)




Seth Price wrote:
> Sorry if I'm being impatient. Any news on this bug?
> Thanks,
> Seth
> 
> 
> On Oct 23, 2007, at 9:18 AM, Mateusz Loskot wrote:
> 
>> Seth Price wrote:
>>> Thanks for the response. Although I don't claim to know what I'm doing,
>>> I'm trying to define a sphere (not the normal ellipsoid).
>>
>> Seth,
>>
>> Ah, right. I've missed the b semi-axis parameter.
>>
>>> I'm copying
>>> the instructions from this page, the PROJ.4 parameters are at the bottom
>>> in the 'Update 4' text:
>>> http://cfis.savagexi.com/articles/2006/05/03/google-maps-deconstructed
>>>
>>> Also, it doesn't make sense that I'm defining the same parameters,
>>> because if I directly use the proj utility, the output is different:
>>>
>>> proj +proj=merc +datum=WGS84 +units=m -r << EOF
>>> ? 46 -90
>>> ? EOF
>>> -10018754.17    5749599.55
>>>
>>> proj +proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 +a=6378137.0
>>> +b=6378137.0 +units=m -r << EOF
>>> ? 46 -90
>>> ? EOF
>>> -10018754.17    5780349.22
>>>
>>> I think that gdalwarp is confusing the two commands because the image is
>>> shifted the same amount as the difference of these two coordinates.
>>
>> Yes, your assumptions seem to be correct.
>>
>> I've checked the code, and construction of spatial reference system
>> object (OGRSpatialReference class) ignores your a and b parameters,
>> recognizes proj=merc name and uses default ellipsoid.
>> IOW, according to my understanding, handling custom PROJ.4 definition
>> that uses standard projection name is not supported.
>>
>> Let's wait for Frank's comment.
>>
>> Cheers
>> -- 
>> Mateusz Loskot
>> http://mateusz.loskot.net
> 
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Oct 24 19:54:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
Message-ID: <471FDB45.2050403@pobox.com>

Seth Price wrote:
> Hello, let me first thank everyone for the great GDAL utilities. I've 
> been getting much use out of them. However I think I've come across 
> something of a bug. Some of my PROJ.4 parameters seem to be ignored.
> 
> Here is my warping command (note the -t_srs argument):
> 
> gdalwarp -t_srs '+proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 
> +a=6378137.0 +b=6378137.0 +units=m' -ts 11651 16480 -te -10018754.171395 
> 5465442.183323 -9796115.189808 5780349.220256 -wm 400 -co 'TILED=YES' 
> -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './N046W090_x1.tif' 
> './N046W090_x1.merc.tif'
> 
> I use the PROJ.4 library and these parameters and calculate that my 
> expected output bounds are the values I have for -te. However, the 
> output image is shifted, and results in quite a bit of black space at 
> the top of the image, and some cropped off the bottom. In fact, it gives 
> the same output image as this command would give:
> 
> gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 16480 -te 
> -10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm 400 
> -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc 
> './N046W090_x1.tif' './N046W090_x1.merc.tif'
> 
> (note the different -t_srs)
> 
> It looks like most of my -t_srs isn't getting passed to PROJ.4. Am I 
> doing something wrong? Is this a bug in the package? If requested, I can 
> put the source file online, but it's ~300 MB.

Seth,

I haven't been following this issue closely, but I'm getting the source
coordinate system is not on the sphere, as the destination projection is.
Assuming that is the case, PROJ.4 will default to applying a substantial
vertical in an attempt to convert from the ellipsoid to the sphere.

This is related to the last FAQ on:

   http://proj.maptools.org/faq.html

I believe the workaround will be for you to specify your output coordinate
system as '+proj=merc +a=6378137.0 +b=6378137.0 +nadgrids=@null'.

Note, you have misspelled several parameters but it doesn't matter
since their values are the defaults anyways. (latts -> lat_ts, lon0 -> lon_0).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 24 19:55:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] PROJ.4 warping string ignored
In-Reply-To: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
References: <2AC08FC7-F7BA-45F7-9FA7-CF029E9A949A@pricepages.org>
Message-ID: <471FDB63.3060503@pobox.com>

Seth Price wrote:
> Hello, let me first thank everyone for the great GDAL utilities. I've 
> been getting much use out of them. However I think I've come across 
> something of a bug. Some of my PROJ.4 parameters seem to be ignored.
> 
> Here is my warping command (note the -t_srs argument):
> 
> gdalwarp -t_srs '+proj=merc +latts=0 +lon0=0 +k=1.0 +x0=0 +y0=0 
> +a=6378137.0 +b=6378137.0 +units=m' -ts 11651 16480 -te -10018754.171395 
> 5465442.183323 -9796115.189808 5780349.220256 -wm 400 -co 'TILED=YES' 
> -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc './N046W090_x1.tif' 
> './N046W090_x1.merc.tif'
> 
> I use the PROJ.4 library and these parameters and calculate that my 
> expected output bounds are the values I have for -te. However, the 
> output image is shifted, and results in quite a bit of black space at 
> the top of the image, and some cropped off the bottom. In fact, it gives 
> the same output image as this command would give:
> 
> gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 16480 -te 
> -10018754.171395 5465442.183323 -9796115.189808 5780349.220256 -wm 400 
> -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rc 
> './N046W090_x1.tif' './N046W090_x1.merc.tif'
> 
> (note the different -t_srs)
> 
> It looks like most of my -t_srs isn't getting passed to PROJ.4. Am I 
> doing something wrong? Is this a bug in the package? If requested, I can 
> put the source file online, but it's ~300 MB.

Seth,

I haven't been following this issue closely, but I'm getting the source
coordinate system is not on the sphere, as the destination projection is.
Assuming that is the case, PROJ.4 will default to applying a substantial
vertical in an attempt to convert from the ellipsoid to the sphere.

This is related to the last FAQ on:

   http://proj.maptools.org/faq.html

I believe the workaround will be for you to specify your output coordinate
system as '+proj=merc +a=6378137.0 +b=6378137.0 +nadgrids=@null +wktext'.

Note, you have misspelled several parameters but it doesn't matter
since their values are the defaults anyways. (latts -> lat_ts, lon0 -> lon_0).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Oct 24 19:18:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <471FC40B.1020408@loskot.net>
References: <471F3197.6020306@worldonline.fr>
	<471F6D2F.1070403@loskot.net>	<471F831C.4050905@worldonline.fr>
	<471FC40B.1020408@loskot.net>
Message-ID: <471FD2DB.3020509@loskot.net>

Mateusz Loskot wrote:
> Jean-Claude Repetto wrote:
>>
>> But all the polygons are filled. Is it possible to draw only the 
>> contours of the polygons ?
> 
> Nope.
> 
> Quoting Frank's old post:
> http://lists.maptools.org/pipermail/gdal-dev/2006-June/009294.html
> 
> "GDAL's rasterization capability is not sophisticated from a render
> styling point of view.  Other tools may be more appropriate if you want
> to do anything more sophisitcated that rasterize the polygons in a
> single solid color."

I put this to the FAQ

http://trac.osgeo.org/gdal/wiki/FAQRaster

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Oct 24 19:35:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Re: GDAL wince bindings?
In-Reply-To: <f3b73b7d0710231440m5f516984rd300d7ee6d36c2fc@mail.gmail.com>
References: <f3b73b7d0710190311g2940c0bey4b54955d5b032ea9@mail.gmail.com>	
	<CGEPINHEDAGBDBJJHPPNMECOCBAA.asaf@ben-nathan.com>	
	<f3b73b7d0710191402w3f741247ufe276c04ce3130b9@mail.gmail.com>	
	<471D11E7.5000700@loskot.net>	
	<f3b73b7d0710221523y679b4d4cg94a81f643db82611@mail.gmail.com>	
	<471E18EC.7080009@loskot.net>
	<f3b73b7d0710231440m5f516984rd300d7ee6d36c2fc@mail.gmail.com>
Message-ID: <471FD6AE.4060708@loskot.net>

Tamas Szekeres wrote:
> 2007/10/23, Mateusz Loskot <mateusz@loskot.net>:
> 
>> Do you mean variables related to GDAL or platform (architecture, CPU,
>> system) ?
>>
> I mean the variable which is dedicated to the WinCE builds that I
> should use to enable/disable the WinCE related stuff.  It seems
> UNDER_CE, _WIN32_WINCE, WINCE are kinda good candidates to do such
> things.

Tamas,

Yes, there are a few or many definitions required to be used.
I think the best source where you can find all of them is project file:
trunk/gdal/wince/msvc80/gdalce_dll/gdalce_dll.vcproj

There is PreprocessorDefinitions attribute including all definitions
necessary for debug and release builds.

Here is also a short explanation of how different platforms can be
distinguished:

http://www.smartphonedn.com/qa/checkos.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jean-claude.repetto at worldonline.fr  Thu Oct 25 05:53:31 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <471FC40B.1020408@loskot.net>
References: <471F3197.6020306@worldonline.fr> <471F6D2F.1070403@loskot.net>
	<471F831C.4050905@worldonline.fr> <471FC40B.1020408@loskot.net>
Message-ID: <4720679B.4070107@worldonline.fr>

Mateusz Loskot wrote :
> Quoting Frank's old post:
> 
> "GDAL's rasterization capability is not sophisticated from a render
> styling point of view.  Other tools may be more appropriate if you want
> to do anything more sophisitcated that rasterize the polygons in a
> single solid color."

Some suggestions for those other tools (for Linux) ?


From g.ces at pettra.es  Thu Oct 25 07:21:37 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Split lines 
Message-ID: <001c01c816f9$36069d10$ba03a8c0@GUS>

Hi all,

    I?ve got a shp with a railway net and another shp with points ( railstations). I want to split the net in smaller links, with stations in start and end points of lines ( railway lines). I?m searching algorithms to achieve this, any help?

Gus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071025/4a447207/attachment.html
From warmerdam at pobox.com  Thu Oct 25 09:53:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <4720679B.4070107@worldonline.fr>
References: <471F3197.6020306@worldonline.fr> <471F6D2F.1070403@loskot.net>
	<471F831C.4050905@worldonline.fr> <471FC40B.1020408@loskot.net>
	<4720679B.4070107@worldonline.fr>
Message-ID: <47209FDD.80006@pobox.com>

Jean-Claude Repetto wrote:
> Mateusz Loskot wrote :
>> Quoting Frank's old post:
>>
>> "GDAL's rasterization capability is not sophisticated from a render
>> styling point of view.  Other tools may be more appropriate if you want
>> to do anything more sophisitcated that rasterize the polygons in a
>> single solid color."
> 
> Some suggestions for those other tools (for Linux) ?

QGIS, MapServer, GMT, GRASS.

If you need to do it from the commandline but would be willing to do
some work to construct the "cartographic representation" you might use
MapServer and it's shp2img command.  If you want to (are willing to) do
it in a GUI environment a desktop GIS such as QGIS would be a good
choice I think.


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From a.neumann at carto.net  Thu Oct 25 09:17:08 2007
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
In-Reply-To: <471F8050.9040803@pobox.com>
References: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>
	<471F6DB2.9030200@pobox.com>
	<47825.193.246.86.39.1193240479.squirrel@webmail.customers.iirc.at>
	<471F74C9.7030203@pobox.com>
	<34292.193.246.86.39.1193243794.squirrel@webmail.customers.iirc.at>
	<471F8050.9040803@pobox.com>
Message-ID: <47490.193.246.86.39.1193318228.squirrel@webmail.customers.iirc.at>

ok - this worked fine. If I use the -nln flag with the schema prefix the
update in another schema works. Great!

Maybe one could add a remark at http://www.gdal.org/ogr/drv_pg.html that
in case of updating existing PostgreSQL tables in a schema other than
public, the "-nln schemaprefix.tablename" should be used. It would
probably help other people who have the same problem like me.

Question: can I use more than one layer in this case? Can I pass a
comma,separated list of layernames, or multiple -nln parameters? My first
tests seem to indicate, not, which is a bit unfortunate. But maybe I
overlooked something ...

Thanks for the hint,
Andreas

> Andreas Neumann wrote:
>>> It might well be a schema related issue.  Does the table show up as a
>>> layer for ogrinfo?  Perhaps it has a schema prefix, and the logic for
>>> seeing if a layer already exists does not recognise it because of the
>>> schema name?
>>
>> yes, the layer does show up with ogrinfo. It lists as follows:
>>
>> 262: av.Bodenbedeckung__BoFlaeche (Polygon)
>>
>> Maybe it is a problem with the prefix? When I specify the layer in the
>> ogr2ogr command, I don't specify the "av" prefix. Maybe it doesn't
>> recognize that the layernames "av.Bodenbedeckung__BoFlaeche" and
>> "Bodenbedeckung__BoFlaeche" are the same?
>>
>> Here is again my ogr2ogr command:
>>
>> ogr2ogr -a_srs "EPSG:21781" -append -update -lco SCHEMA=av -lco DIM=2
>> -lco
>> LAUNDER=yes -lco GEOMETRY_NAME=the_geom -f "PostgreSQL" PG:"dbname=uster
>> user=myuser password=mypw host=localhost"
>> uster_dm01ZH24_BB.itf,dm01avzh24.ili Bodenbedeckung__BoFlaeche
>>
>> I tried the same command with "av.Bodenbedeckung__BoFlaeche" as
>> layername,
>> but then it just does nothing, maybe because the layername doesn't exist
>> with this name in the interlis model.
>
> Andreas,
>
> Perhaps you could try using "-nln av.Bodenbedeckung__BoFlaeche" on the
> commandline?
>
> Best regards,
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


From mateusz at loskot.net  Thu Oct 25 09:18:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <47209FDD.80006@pobox.com>
References: <471F3197.6020306@worldonline.fr>
	<471F6D2F.1070403@loskot.net>	<471F831C.4050905@worldonline.fr>
	<471FC40B.1020408@loskot.net>	<4720679B.4070107@worldonline.fr>
	<47209FDD.80006@pobox.com>
Message-ID: <4720979B.7030206@loskot.net>

Frank Warmerdam wrote:
> Jean-Claude Repetto wrote:
>> Mateusz Loskot wrote :
>>> Quoting Frank's old post:
>>>
>>> "GDAL's rasterization capability is not sophisticated from a render
>>> styling point of view.  Other tools may be more appropriate if you want
>>> to do anything more sophisitcated that rasterize the polygons in a
>>> single solid color."
>>
>> Some suggestions for those other tools (for Linux) ?
> 
> QGIS, MapServer, GMT, GRASS.

I'd add mapnik (http://mapnik.org)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Oct 25 10:38:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
In-Reply-To: <47490.193.246.86.39.1193318228.squirrel@webmail.customers.iirc.at>
References: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>
	<471F6DB2.9030200@pobox.com>
	<47825.193.246.86.39.1193240479.squirrel@webmail.customers.iirc.at>
	<471F74C9.7030203@pobox.com>
	<34292.193.246.86.39.1193243794.squirrel@webmail.customers.iirc.at>
	<471F8050.9040803@pobox.com>
	<47490.193.246.86.39.1193318228.squirrel@webmail.customers.iirc.at>
Message-ID: <4720AA4B.5070607@pobox.com>

Andreas Neumann wrote:
> ok - this worked fine. If I use the -nln flag with the schema prefix the
> update in another schema works. Great!
> 
> Maybe one could add a remark at http://www.gdal.org/ogr/drv_pg.html that
> in case of updating existing PostgreSQL tables in a schema other than
> public, the "-nln schemaprefix.tablename" should be used. It would
> probably help other people who have the same problem like me.

Andreas,

I try to avoid documentation for the OGR (or GDAL) drivers which
is very specific to the GDAL and OGR utilities since I want the
docs to make sense in the context of other programs using the drivers.
So I'm inclined not to add this in the drv_pg.html docs, though there
might be some clarification on layer names being prefixed with schema
names that would be appropriate.

> Question: can I use more than one layer in this case? Can I pass a
> comma,separated list of layernames, or multiple -nln parameters? My first
> tests seem to indicate, not, which is a bit unfortunate. But maybe I
> overlooked something ...

No, you will basically need to run the ogr2ogr command once for each
layer you want to process.  Sorry.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From a.neumann at carto.net  Thu Oct 25 10:03:40 2007
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] ogr2ogr PostgreSQL and INTERLIS issues
In-Reply-To: <4720AA4B.5070607@pobox.com>
References: <45567.193.246.86.39.1193132382.squirrel@webmail.customers.iirc.at>
	<471F6DB2.9030200@pobox.com>
	<47825.193.246.86.39.1193240479.squirrel@webmail.customers.iirc.at>
	<471F74C9.7030203@pobox.com>
	<34292.193.246.86.39.1193243794.squirrel@webmail.customers.iirc.at>
	<471F8050.9040803@pobox.com>
	<47490.193.246.86.39.1193318228.squirrel@webmail.customers.iirc.at>
	<4720AA4B.5070607@pobox.com>
Message-ID: <19788.193.246.86.39.1193321020.squirrel@webmail.customers.iirc.at>


> I try to avoid documentation for the OGR (or GDAL) drivers which
> is very specific to the GDAL and OGR utilities since I want the
> docs to make sense in the context of other programs using the drivers.
> So I'm inclined not to add this in the drv_pg.html docs, though there
> might be some clarification on layer names being prefixed with schema
> names that would be appropriate.

ok, thanks.

>> Question: can I use more than one layer in this case? Can I pass a
>> comma,separated list of layernames, or multiple -nln parameters? My
>> first
>> tests seem to indicate, not, which is a bit unfortunate. But maybe I
>> overlooked something ...
>
> No, you will basically need to run the ogr2ogr command once for each
> layer you want to process.  Sorry.

well, no problem. I will write a shell-script. I am glad the update works
now.

Andreas


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)


From matt.wilkie at gov.yk.ca  Thu Oct 25 12:01:14 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Segmentation fault in gdal_rasterize
In-Reply-To: <4720979B.7030206@loskot.net>
References: <471F3197.6020306@worldonline.fr>	<471F6D2F.1070403@loskot.net>	<471F831C.4050905@worldonline.fr>	<471FC40B.1020408@loskot.net>	<4720679B.4070107@worldonline.fr>	<47209FDD.80006@pobox.com>
	<4720979B.7030206@loskot.net>
Message-ID: <4720BDCA.2060003@gov.yk.ca>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Jean-Claude Repetto wrote:
>>> Mateusz Loskot wrote :
>>>> Quoting Frank's old post:
>>>>
>>>> "GDAL's rasterization capability is not sophisticated from a render
>>>> styling point of view.  Other tools may be more appropriate if you want
>>>> to do anything more sophisitcated that rasterize the polygons in a
>>>> single solid color."
>>> Some suggestions for those other tools (for Linux) ?
>> QGIS, MapServer, GMT, GRASS.
> 
> I'd add mapnik (http://mapnik.org)

And SAGA GIS which doesn't have as much mind share as it could: 
http://www.saga-gis.uni-goettingen.de/


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Thu Oct 25 14:15:27 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] warping a raster with a matrix
Message-ID: <4720DD3F.6030501@gov.yk.ca>

Hi List,

I'm looking for pointers on how to transform a raster with offsets in a 
text file (the matrix). The matrix could just easily be a point 
shapefile or another raster.

Format of the matrix: X Y   Xoffset Yoffset
Where X,Y is the current position of the pixel and X/Yoffset is where to 
move it, and adjacent pixels, to.


315200 5373600    -9.3     8.3
315300 5373600    -5.9     9.8
315400 5373600    -2.9    11.2
315500 5373600     0.2    12.6
315600 5373600     0.5    12.4
315700 5373600     0.6    12.2


There is pseudo code for doing this here:
http://www.cits.rncan.gc.ca/cit/servlet/CIT/site_id=01&page_id=1-005-002-010-002-001.html
but I'm unsure how to begin pythonising it. The example given there is 
for vectors.

thanks in advance for your thoughts,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Chris.Barker at noaa.gov  Thu Oct 25 14:46:08 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Building on OS-X
In-Reply-To: <C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
Message-ID: <4720E470.6010206@noaa.gov>

Hi all,

I'm trying to build on OS-X, and having a bit of trouble getting all the 
libs it need found. So far, my issues have been libpng and libtiff, but 
who knows what's next?

Which libs are others using? I had libpng already installed (from 
source), but only the static lib, and Make was looking for *.dynlib, so 
that didn't work.

So I've decided that I should just use the nifty Kyng Chaos-supplied
UnixImageIO framework. However, ./configure doesn't find it, so I 
started doing things like:

--with-png=/Library/Frameworks/UnixImageIO.framework/Versions/A/unix/lib/

but that got ugly fast!

So, it appears that what I should do is add a --framework-UnixImageIO 
somewhere, but I'm not sure where, as it's needed for both 
pre-processing and linking.

Any thoughts?

-Chris

By the way, does autoconf have any facilities for looking for 
Frameworks? It seems the ideal solution would be for ./configure to just 
find it.



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From ZGuo at aws.com  Thu Oct 25 15:13:56 2007
From: ZGuo at aws.com (Zitian Guo)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] question on netcdf to geotif
In-Reply-To: <4720E470.6010206@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com><C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<4720E470.6010206@noaa.gov>
Message-ID: <0B6415314EA5A947B0E9915115CC0CAF033E27FD@SRXML02.awscorp.com>

Hi all,

I used gdal-translate to get geotif from netcdf.  But the the geotif is
black-while. Why?

Can you help me?

Thanks,

Zitian




This message (including any attachments) is a confidential and privileged communication of
AWS Convergence Technologies, Inc. and intended only for the addressee. Any unauthorized use,
distribution or copying of this message (or any attachment) is prohibited. If you are not the
addressee or a person authorized to receive messages for the addressee, you have received this
message in error. In that case, please delete this message and call us at 301-250-4000 so that we
can correct our records in order to avoid this mistake in the future. Thank you.



From woklist at kyngchaos.com  Thu Oct 25 15:16:08 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:06 2007
Subject: [Gdal-dev] Building on OS-X
In-Reply-To: <4720E470.6010206@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<4720E470.6010206@noaa.gov>
Message-ID: <D93347AD-01CA-408D-9EC1-CF34629E4456@kyngchaos.com>

On Oct 25, 2007, at 1:46 PM, Christopher Barker wrote:

> Hi all,
>
> I'm trying to build on OS-X, and having a bit of trouble getting  
> all the libs it need found. So far, my issues have been libpng and  
> libtiff, but who knows what's next?
>
For a minimalist approach, you could use the internal libtiff and  
libpng (and libungif and libjpeg).  You would still need libjasper  
(or ignore jasper and use ECW or Kakadu for jp2).


> Which libs are others using? I had libpng already installed (from  
> source), but only the static lib, and Make was looking for  
> *.dynlib, so that didn't work.
>
> So I've decided that I should just use the nifty Kyng Chaos-supplied
> UnixImageIO framework. However, ./configure doesn't find it, so I  
> started doing things like:
>
> --with-png=/Library/Frameworks/UnixImageIO.framework/Versions/A/ 
> unix/lib/
>
> but that got ugly fast!

Well, that's exactly what I do, so the graphics libraries all have  
the same setting.  Though you can shorten them to (and drop the /lib/  
bit):

--with-png=/Library/Frameworks/UnixImageIO.framework/unix/lib

The symlinks at the top level point to the current version.  I'm not  
bothered by long configure lines, though others may be.  Just make a  
script that does all that, or keep a text file that you can copy-n- 
paste a ready-made configure command from.


> So, it appears that what I should do is add a --framework- 
> UnixImageIO somewhere, but I'm not sure where, as it's needed for  
> both pre-processing and linking.
>
> Any thoughts?
>
> -Chris
>
> By the way, does autoconf have any facilities for looking for  
> Frameworks? It seems the ideal solution would be for ./configure to  
> just find it.

There are only two standard framework dependencies used by GDAL:  
Python and Xerces.  Python is taken care of.  And Xerces doesn't have  
official binary for the Mac framework, just a unix build, so there's  
not much need to worry about it.  I'm building the Xerces framework  
pretty much as is from the source.

My other frameworks are something I do, though the idea is for them  
to become some defacto standard (it's getting there at least in the  
GIS software world).  The UnixImageIO framework is an oddball, and I  
wouldn't be surprised if it doesn't catch on.  But, they are designed  
to be unix friendly - the "Unix Compatibility" idea - so unix  
software doesn't have to deal with frameworks if it doesn't want to.

There may be an autotools framework detection macro, but I don't know  
much about autotools.  The other side of the problem is libtool.   
Somewhere in the middle of libtool 1.5.x framework handling was  
added, and before that extra flags had to be added (and are still  
added in GDAL's Python framework handling).  I think libtool 2.x  
(used in GDAL 1.5) handles frameworks without extra flags now, but  
there could still be issues to deal with.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Thu Oct 25 16:09:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSR tests fail on Mac OS
Message-ID: <4720F7EB.3030403@loskot.net>

Hi,

I just tested complete rebuild of GDAL SVN trunk
and tried to run autotest on Mac OS.
Two tests osr_ct.py and osr_ct_proj.py fail and here is the output:

http://mateusz.loskot.net/tmp/gdal-autotest-osr-failure.html

I have GDAL_DATA set correctly, pointing to trunk/gdal/data location.

Any idea?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Oct 25 17:08:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Python next-gen bindings enabled in trunk
In-Reply-To: <471F7871.9030208@pobox.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<471CFBCA.2040602@noaa.gov> <471DA4A9.7080507@sarvision.nl>
	<471F6EB5.1070808@pobox.com> <471F6E37.9080106@loskot.net>
	<471F7871.9030208@pobox.com>
Message-ID: <472105C3.1040800@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> Vincent Schut wrote:
>>>> My preferences:
>>>>
>>>> make: runs setup.py build make install: - runs setup.py install for
>>>> bindings - separately installs scripts in prefix, alongside the
>>>> other gdal utilities.
>>> Folks,
>>>
>>> This also sounds good to me, though I'd be ok with installing by
>>> default in the Python tree as long as there is an easy way (driven by
>>>  configure) to place stuff elsewhere.  Something like we do now with
>>> --with-pymod-dir.
>>
>> Folks,
>>
>> I concur Frank's suggestion.
>> Personally, I prefer to not to mess standard prefix locations
>> with any files during process of development (building, testing,
>> fixing). Ideally, I'd like to be able to use python bindings *without*
>> necessity of running any install steps, as it is possible with old-gen
>> python, though AFAIK it's not easy or even feasible with the new
>> bindings.
> 
> Mateusz,
> 
> I do this all the time with the new bindings!  It's just that the
> PYTHONPATH item I insert is messy.
> 
> warmerda@amd64[1]% echo $PYTHONPATH
> /home/warmerda/gdal/swig/python/build/lib.linux-x86_64-2.4:/home/warmerda/mapserver/mapscript/python/build/lib.linux-x86_64-2.4

Frank,

Thanks, your trick works for me very well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Thu Oct 25 17:17:35 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSR tests fail on Mac OS
In-Reply-To: <4720F7EB.3030403@loskot.net>
References: <4720F7EB.3030403@loskot.net>
Message-ID: <CCB6B538-9142-4A1D-9FA7-A729CD91BB98@kyngchaos.com>

How are you linking PROJ?  I've found that the --with-proj-static  
works best on OSX, so that it works just like any other dynamic library.

On Oct 25, 2007, at 3:09 PM, Mateusz Loskot wrote:

> Hi,
>
> I just tested complete rebuild of GDAL SVN trunk
> and tried to run autotest on Mac OS.
> Two tests osr_ct.py and osr_ct_proj.py fail and here is the output:
>
> http://mateusz.loskot.net/tmp/gdal-autotest-osr-failure.html
>
> I have GDAL_DATA set correctly, pointing to trunk/gdal/data location.
>
> Any idea?
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Thu Oct 25 17:43:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSR tests fail on Mac OS
In-Reply-To: <CCB6B538-9142-4A1D-9FA7-A729CD91BB98@kyngchaos.com>
References: <4720F7EB.3030403@loskot.net>
	<CCB6B538-9142-4A1D-9FA7-A729CD91BB98@kyngchaos.com>
Message-ID: <47210DF2.10501@loskot.net>

William Kyngesburye wrote:
> How are you linking PROJ?  I've found that the --with-proj-static works
> best on OSX, so that it works just like any other dynamic library.

William,

Shame on me, I've not linked to PROJ.4.
Now, everything works well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Thu Oct 25 19:56:58 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] release plans?
Message-ID: <0099E099-2600-4568-B30E-76C65985FD90@kyngchaos.com>

Any definite release plans or timeline?  I've seen references to a  
possible 1.4.3 bugfix, and rumblings of a 1.5 release.

The timing is nice for the OSX Leopard release next week for my  
binaries.  1.4.3 -> 10.3/10.4 as it is now (but also supports  
Leopard), and 1.5 (svn at least) for Tiger/Leopard (dropping Panther  
support).  I just need an idea of waht the GDAL plans are.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From Chris.Barker at noaa.gov  Thu Oct 25 20:11:54 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
Message-ID: <472130CA.8050302@noaa.gov>

How to I build GDAL to be Universal (PPC + Intel) on OS-X?

I seem to have gotten GDAL itself to build, but now when the python 
extension tries to build, I get errors because I'm using a Universal 
Python, but it's trying to link with the libgdal.dylib, which is PPC 
only (I'm on a PPC machine).

William, you distribute universal binaries, so it must be possible. 
Please tell me you don't build them separate and lipo them together!

thanks,
-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Thu Oct 25 20:22:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] release plans?
In-Reply-To: <0099E099-2600-4568-B30E-76C65985FD90@kyngchaos.com>
References: <0099E099-2600-4568-B30E-76C65985FD90@kyngchaos.com>
Message-ID: <4721332E.7050004@loskot.net>

William Kyngesburye wrote:
> Any definite release plans or timeline?  I've seen references to a
> possible 1.4.3 bugfix, and rumblings of a 1.5 release.

William,

The plan and date is available here

http://trac.osgeo.org/gdal/milestone/1.4.3

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Thu Oct 25 22:52:02 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] release plans?
In-Reply-To: <4721332E.7050004@loskot.net>
References: <0099E099-2600-4568-B30E-76C65985FD90@kyngchaos.com>
	<4721332E.7050004@loskot.net>
Message-ID: <65A30E7C-9BDD-4CAF-8DD5-37299A8D519E@kyngchaos.com>

Thanks.  And I see on trac the 1.5 release in a week.

On Oct 25, 2007, at 7:22 PM, Mateusz Loskot wrote:

> William Kyngesburye wrote:
>> Any definite release plans or timeline?  I've seen references to a
>> possible 1.4.3 bugfix, and rumblings of a 1.5 release.
>
> William,
>
> The plan and date is available here
>
> http://trac.osgeo.org/gdal/milestone/1.4.3
>
> Cheers
> --  
> Mateusz Loskot
> http://mateusz.loskot.net

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people  
of the allied nations devoted an entire year exclusively to hating  
the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From warmerdam at pobox.com  Fri Oct 26 01:12:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] release plans?
In-Reply-To: <65A30E7C-9BDD-4CAF-8DD5-37299A8D519E@kyngchaos.com>
References: <0099E099-2600-4568-B30E-76C65985FD90@kyngchaos.com>
	<4721332E.7050004@loskot.net>
	<65A30E7C-9BDD-4CAF-8DD5-37299A8D519E@kyngchaos.com>
Message-ID: <4721775B.8080907@pobox.com>

William Kyngesburye wrote:
> Thanks.  And I see on trac the 1.5 release in a week.
> 

William,

Despite what it might say there, it is unlikely that the 1.5
release (not even a first beta) will happen in a week.  However,
we do hope to push 1.4.3 out the door within a couple days.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Thu Oct 25 23:36:12 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <472130CA.8050302@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<472130CA.8050302@noaa.gov>
Message-ID: <B6E63097-B22D-47E2-97C0-DBEDF778A01C@kyngchaos.com>

Oh, there's a fun one.  And Python forces you to supply universal  
libraries to build extensions.  Though you might check the mac python  
mailing list - it may be possible to build a single architecture  
extension for the universal python.

First, as you speculate, there's the method that takes no patching of  
sources (a couple dependencies have minor endian issues) - build on  
both architectures and lipo them together.  But that's too much trouble.

The better way is to do it all at once on a single OSX architecture.   
It depends on where you want to start.  If you use universal  
dependencies and just build GDAL yourself from source, it's not too  
hard.  If you want to build all the dependencies yourself, that's  
quite a task.

You probably know about the arch flags needed, -arch ppc -arch i386,  
and the SDK, -isysroot /Developer/SDKs/MacOSX10.4u.sdk.  The isysroot  
flag is only really needed when building on PPC, since the system is  
not universal on PPC, though that will change with Leopard.  The  
isysroot flag has its own trap - /Library/Frameworks and /usr/local  
is not in it, so 3rd-party libs and frameworks will be missed unless  
some symlinks are added to it (I have details on that in my GRASS OSX  
readme, but haven't got them online yet).

There is an easy way to get the flags into the compile and link  
commands where needed:

http://www.macosxhints.com/article.php?story=20061025213851279

Otherwise getting them into CFLAGS, CXXFLAGS and LDFLAGS can be  
tricky (-isysroot can't be specified more than once).

The key for the sources is that some packages use a configured endian  
setting, instead of runtime endian detection (GDAL, netcdf, ogdi,  
tiff, xerces).  Some are even hardwired to assume that OSX is  
bigendian (hdf4, ecw).  Some have compiled data file endianess  
(proj), or run a program during compilation to set some platform  
endian info (hdf5).  One simply MUST be compiled separate and lipo'd  
- postgres - because it actually uses ld for linking instead of gcc,  
and ld is difficult to use with multiple arch flags.

The configured ones are easy - after running configure, edit the  
config.h file generated and conditionalize the endian setting on  
__BIG_ENDIAN__ or __LITTLE_ENDIAN__ - these are standard OSX GCC  
definitions.


SO, for GDAL, if you have all other dependencies universal, after  
running configure edit port/cpl_config.h and delete the two lines  
with WORDS_BIGENDIAN and HOST_FILLORDER, and replace them with:

#ifdef __BIG_ENDIAN__
   #define WORDS_BIGENDIAN 1
   #define HOST_FILLORDER FILLORDER_MSB2LSB
#else
   #undef WORDS_BIGENDIAN
   #define HOST_FILLORDER FILLORDER_LSB2MSB
#endif

You can't do this before running configure because configure  
magically zaps all define/undef lines.  I haven't tested this with  
the internal tif, gif, jpeg, png libs, since I use my UnixImageIO  
framework for those.


Universal-friendlyness is not something I can do much about, unless  
there is a lot of interest or I really get aggressive about it (I got  
GRASS to change).  One I'm thinking about pursuing (when other things  
settle down a bit) is PROJ.  The datum files are processed during  
compilation so they are endian-specific to the build platform (GRASS  
was like this for a couple things).  I have a patch I apply for my  
binaries that does byte-swapping depending on the architecture.

On Oct 25, 2007, at 7:11 PM, Christopher Barker wrote:

> How to I build GDAL to be Universal (PPC + Intel) on OS-X?
>
> I seem to have gotten GDAL itself to build, but now when the python  
> extension tries to build, I get errors because I'm using a  
> Universal Python, but it's trying to link with the libgdal.dylib,  
> which is PPC only (I'm on a PPC machine).
>
> William, you distribute universal binaries, so it must be possible.  
> Please tell me you don't build them separate and lipo them together!
>
> thanks,
> -Chris

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From tutey at o2.pl  Fri Oct 26 00:52:40 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Split lines
In-Reply-To: <001c01c816f9$36069d10$ba03a8c0@GUS>
References: <001c01c816f9$36069d10$ba03a8c0@GUS>
Message-ID: <47217298.9000409@o2.pl>

Gustavo Ces wrote:
> Hi all,
> 
> I?ve got a shp with a railway net and another shp with
> points ( railstations). I want to split the net in
> smaller links, with stations in start and end points of
> lines ( railway lines). I?m searching algorithms to
> achieve this, any help?

Following modules in GRASS 6.3 might be usefull:

v.split
v.segment
v.net.*
v.lrs.*

See their manpages [1] and introduction to vector processing
in GRASS [2].

[1]http://grass.itc.it/grass63/manuals/html63_user/vector.html
[2]http://grass.itc.it/grass63/manuals/html63_user/vectorintro.html

Maciek

From milovanderlinden at gmail.com  Fri Oct 26 08:52:59 2007
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] How to determine rotation for raster coordinate
	transformation
Message-ID: <4721E32B.9090200@3dsite.nl>

Hello list,

I have a customer that needs a raster image in TIF and ECW format  in 
the dutch coordinate system <EPSG:28992> to be repositioned and rotated 
for their own GIS-like solution to UTM 32N WGS84.

When I use gdalwarp, I get a rotated image and an worldfile with it that 
has no rotation parameters.

What I would like to know is: Is there a way to NOT rotate the image 
itself, but determine the rotation parameters that go into the world file?

Kind regards,\


-- 

   	

3DSite - Milo van der Linden - CTO
A. Joachimi kade 3 F, 4461 BG  Goes 
(Zeeland, Nederland)
milo@3dsite.nl <mailto:milo@3dsite.nl>
http://www.3dsite.nl


De informatie verzonden met dit e-mail bericht is uitsluitend bestemd 
voor de geadresseerde(n). Gebruik van deze informatie door andere dan de 
geadresseerde(n) is verboden. Openbaarmaking, vermenigvuldiging, 
verspreiding en/of verstrekking van deze informatie aan derde is niet 
toegestaan. Kopi?ren en/of misbruiken van ingesloten afbeeldingen en/of 
bestanden is wettelijke verboden en strafbaar. 3DSite staat niet in voor 
de juiste en volledige overbrenging van de inhoud van een verzonden 
e-mail, noch voor tijdig ontvangst daarvan. Op al onze leveringen, 
aanbiedingen en verkopen zijn van toepassing onze Algemene Voorwaarden, 
zoals gedeponeerd bij de K.v.K. te Middelburg. 3DSite

    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071026/4162e236/attachment.html
From warmerdam at pobox.com  Fri Oct 26 11:43:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] How to determine rotation for raster coordinate
	transformation
In-Reply-To: <4721E32B.9090200@3dsite.nl>
References: <4721E32B.9090200@3dsite.nl>
Message-ID: <47220B1B.6090600@pobox.com>

Milo van der Linden wrote:
> Hello list,
> 
> I have a customer that needs a raster image in TIF and ECW format  in 
> the dutch coordinate system <EPSG:28992> to be repositioned and rotated 
> for their own GIS-like solution to UTM 32N WGS84.
> 
> When I use gdalwarp, I get a rotated image and an worldfile with it that 
> has no rotation parameters.
> 
> What I would like to know is: Is there a way to NOT rotate the image 
> itself, but determine the rotation parameters that go into the world file?

Milo,

There is no *precise* way to do this since reprojection is more than just
a rotation.  But you could get this approximate effect by transforming the
center of the top left pixel, the one to it's right, and the one below it
and using the resulting vectors to fill in values in a world file.  Then you
need to do something to estimate the right file size and pre-create it.

Unfortunately there is no way to do this directly with gdalwarp.  You would
need to write a script or small program to do it.  But if you create the
blank output file with the appropriate world file gdalwarp should be able
to transform into it properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Fri Oct 26 12:53:45 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
Message-ID: <47221B99.20204@noaa.gov>

William,

Thanks for the detailed answer. I've probably screwed up threading with 
this message, as our spam filter suddenly got all aggressive and was 
filtering out all sort of mailing list messages -- I had to go to the 
web to find this.

I wonder if this should be put up on a Wiki page? It's in the list 
archive, but the Wiki may be a better place for it.

Anyway, now I need to decide what to do. I'm trying to build on OS-X, as 
it's been my primary platform lately, and I want to work with/on the 
trunk, to help a bit with 1.5 issues with python.

On the other hand, this all such a pain in the *&^@& that maybe I'll 
just do all this with my Linux box instead. But, I may move forward a 
bit with this...

> Oh, there's a fun one.  And Python forces you to supply universal  
> libraries to build extensions.  Though you might check the mac python  
> mailing list - it may be possible to build a single architecture  
> extension for the universal python.

I'm pretty sure that that is possible -- I'll go dig up the info -- 
that's probably the best solution for the problem at hand.

> First, as you speculate, there's the method that takes no patching of  
> sources (a couple dependencies have minor endian issues) - build on  
> both architectures and lipo them together.  But that's too much trouble.

I agree -- it does seem to be too much trouble - and it you only have 
one architecture handy -- you've got the same endian issues, don't you?

> The better way is to do it all at once on a single OSX architecture.   
> It depends on where you want to start.  If you use universal  
> dependencies and just build GDAL yourself from source, it's not too  
> hard.

That's OK with me!

It seems various libraries are getting better about being able to build 
Universal out of the box -- but by the time we get there, most of us 
will be running Intel Macs anyway!

> You probably know about the arch flags needed, -arch ppc -arch i386,  
> and the SDK, -isysroot /Developer/SDKs/MacOSX10.4u.sdk.

actually, I didn't know about the isysroot one...

> The  
> isysroot flag has its own trap - /Library/Frameworks and /usr/local  
> is not in it, so 3rd-party libs and frameworks will be missed unless  
> some symlinks are added to it

arg!!

> There is an easy way to get the flags into the compile and link  
> commands where needed:
> 
> http://www.macosxhints.com/article.php?story=20061025213851279

Thanks, that should help.

> The key for the sources is that some packages use a configured endian  
> setting, instead of runtime endian detection

all I can say is AARRGG!

> SO, for GDAL, if you have all other dependencies universal, after  
> running configure edit port/cpl_config.h and delete the two lines  
> with WORDS_BIGENDIAN and HOST_FILLORDER, and replace them with:
> 
> #ifdef __BIG_ENDIAN__
>    #define WORDS_BIGENDIAN 1
>    #define HOST_FILLORDER FILLORDER_MSB2LSB
> #else
>    #undef WORDS_BIGENDIAN
>    #define HOST_FILLORDER FILLORDER_LSB2MSB
> #endif

Is there some way we could automate this so that we could have a 
--with-osx-universal flag to configure?

I can just put that in my "run configure" script, but it'd be nice to 
have it standard.

> Universal-friendliness is not something I can do much about, unless  
> there is a lot of interest or I really get aggressive about it (I got  
> GRASS to change).

Anything you do is great -- things are getting better elsewhere too.

 > One I'm thinking about pursuing (when other things
> settle down a bit) is PROJ.

That would be great, thanks for everything you're doing with all this!!

A new thought - could you send me whatever scripts you're using to 
build? It makes more sense for me to just follow what you're doing than 
re-invent it. (plus it would save me some work ;-)  )

thanks again,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From j.l.h.hartmann at uva.nl  Fri Oct 26 13:51:42 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] gdalwarp and large files
In-Reply-To: <4717B449.2080204@pobox.com>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu>
	<471748CF.2040800@uva.nl> <47177BD3.8000201@uva.nl>
	<4717B449.2080204@pobox.com>
Message-ID: <4722292E.7010608@uva.nl>

Hi,

I am struggling to warp large files (10000*10000 and up) with gdalwarp 
-tps from a web application, using the exec function of PHP. Halving 
them (gdal_tranlate -outsize 50% 50%) solves the problem, but so does 
running gdalwarp from the command line with the original file. I don't 
know what happens with significantly larger files. I have a few 
questions, perhaps someone has experienced the same kind of problem.

- Has anyone had troubles with running the gdal utilities from within 
programs like PHP?

- Can we expect gdalwarp to bomb out on large files? Alternatively, has 
anyone succesfully warped files larger than mine, with or without -tps? 
Does gdalwarp allocate progressively more memory? There is a parameter 
"-wm memory_in_mb" that looks like there is a limit to the memory gdal 
is allowed to use, but I would expect it to be able to use swap space

- Would the "-multi" parameter be of influence to global memory usage? 
If multiple threads can be used to process chunks of images, perhaps the 
problem could be solved by processing the chunks consecutively.

Any hints are welcome,

Jan

From Doug_Newcomb at fws.gov  Fri Oct 26 14:21:00 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] gdalwarp and large files
In-Reply-To: <4722292E.7010608@uva.nl>
Message-ID: <OFEB70D5E4.B082C873-ON85257380.00646FA6-85257380.0064CCB1@fws.gov>

Jan,
      Not sure if this would help, but is the exec function of PHP bound by
the memory limit for scripts in the php.ini file ( i.e, memory_limit)?  I'm
not a php whiz ( obviously) :-)

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.


                                                                           
             Jan Hartmann                                                  
             <j.l.h.hartmann@u                                             
             va.nl>                                                     To 
             Sent by:                  "gdal-dev@lists.maptools.org"       
             gdal-dev-bounces@         <gdal-dev@lists.maptools.org>       
             lists.maptools.or                                          cc 
             g                                                             
                                                                   Subject 
                                       [Gdal-dev] gdalwarp and large files 
             10/26/2007 01:51                                              
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




Hi,

I am struggling to warp large files (10000*10000 and up) with gdalwarp
-tps from a web application, using the exec function of PHP. Halving
them (gdal_tranlate -outsize 50% 50%) solves the problem, but so does
running gdalwarp from the command line with the original file. I don't
know what happens with significantly larger files. I have a few
questions, perhaps someone has experienced the same kind of problem.

- Has anyone had troubles with running the gdal utilities from within
programs like PHP?

- Can we expect gdalwarp to bomb out on large files? Alternatively, has
anyone succesfully warped files larger than mine, with or without -tps?
Does gdalwarp allocate progressively more memory? There is a parameter
"-wm memory_in_mb" that looks like there is a limit to the memory gdal
is allowed to use, but I would expect it to be able to use swap space

- Would the "-multi" parameter be of influence to global memory usage?
If multiple threads can be used to process chunks of images, perhaps the
problem could be solved by processing the chunks consecutively.

Any hints are welcome,

Jan
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From hobu.inc at gmail.com  Fri Oct 26 15:20:42 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <47221B99.20204@noaa.gov>
References: <47221B99.20204@noaa.gov>
Message-ID: <594FC70E-1707-4026-942E-ADFFFF9C7A56@gmail.com>


On Oct 26, 2007, at 11:53 AM, Christopher Barker wrote:
>
>> SO, for GDAL, if you have all other dependencies universal, after   
>> running configure edit port/cpl_config.h and delete the two lines   
>> with WORDS_BIGENDIAN and HOST_FILLORDER, and replace them with:
>> #ifdef __BIG_ENDIAN__
>>    #define WORDS_BIGENDIAN 1
>>    #define HOST_FILLORDER FILLORDER_MSB2LSB
>> #else
>>    #undef WORDS_BIGENDIAN
>>    #define HOST_FILLORDER FILLORDER_LSB2MSB
>> #endif
>
> Is there some way we could automate this so that we could have a -- 
> with-osx-universal flag to configure?

I would gladly take a patch for this.  We already have precedent for  
the OSX framework stuff.

Howard

From woklist at kyngchaos.com  Fri Oct 26 15:58:45 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <594FC70E-1707-4026-942E-ADFFFF9C7A56@gmail.com>
References: <47221B99.20204@noaa.gov>
	<594FC70E-1707-4026-942E-ADFFFF9C7A56@gmail.com>
Message-ID: <12658126-F615-486F-8466-B21BF135AD99@kyngchaos.com>

I'm not sure how to work this in with cpl_config as a configurable  
item, I always patch after configuration.  The result would have to  
be as I said, or something similar - since WORDS_BIGENDIAN and  
HOST_FILLORDER are separate items, they could each have their own  
__BIG_ENDIAN__ test.

Since libtiff is the only other internal lib with an endian setting  
(HOST_FILLORDER), this should work for it, but I haven't tested it.   
There is also HOST_BIGENDIAN in libtiff (tif_open.c, line 352), but  
this isn't set in cpl_config for some reason, maybe something to do  
with the MDI_SUPPORT setting there?

Also, the universal flags don't behave well with libtool.  I used to  
do ugly patches to all the makefiles to get it to work, until I found  
the ccub trick.  But ccub is not a standard tool, so we can't depend  
on it.

The main problem is that adding flags to CFLAGS/CXXFLAGS and LDFLAGS  
can create duplicate entries for -isysflag (a lot of packages add  
both CFLAGS and LDFLAGS to the linking stage).  This causes an error  
in compilation and linking.  Duplicate -arch flags is OK.  Libtool  
may also strip them out as unknown flags (I'm not sure if libtool 2  
knows about them yet), I'd have to dig out my old notes to see how I  
used to handle that.

On Oct 26, 2007, at 2:20 PM, Howard Butler wrote:

>
> On Oct 26, 2007, at 11:53 AM, Christopher Barker wrote:
>>
>>> SO, for GDAL, if you have all other dependencies universal,  
>>> after  running configure edit port/cpl_config.h and delete the  
>>> two lines  with WORDS_BIGENDIAN and HOST_FILLORDER, and replace  
>>> them with:
>>> #ifdef __BIG_ENDIAN__
>>>    #define WORDS_BIGENDIAN 1
>>>    #define HOST_FILLORDER FILLORDER_MSB2LSB
>>> #else
>>>    #undef WORDS_BIGENDIAN
>>>    #define HOST_FILLORDER FILLORDER_LSB2MSB
>>> #endif
>>
>> Is there some way we could automate this so that we could have a -- 
>> with-osx-universal flag to configure?
>
> I would gladly take a patch for this.  We already have precedent  
> for the OSX framework stuff.
>
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From eschenbe at psc.edu  Fri Oct 26 17:28:14 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Should These Maps Be Aligned?
Message-ID: <47225BEE.80708@psc.edu>

The roads from roadtrl020.tar.gz and the relief map from srld48i200l.tar.gz 
(nationalatlas.gov) don't seem aligned near Los Angeles (I haven't looked 
closely elsewhere). Some roads are over the ocean.

I converted the relief map from its Lambert projection to geographic (i.e., 
longitude and latitude) with gdalwarp. As far as I can tell the roads already 
use that projection. No prj file came with the roads but the included text file 
has this section:

===
Spatial_Reference_Information:
   Horizontal_Coordinate_System_Definition:
     Geographic:
       Latitude_Resolution: 0.000278
       Longitude_Resolution: 0.000278
       Geographic_Coordinate_Units: Decimal degrees
     Geodetic_Model:
       Horizontal_Datum_Name: North American Datum of 1983
       Ellipsoid_Name: GRS1980
       Semi-major_Axis: 6378137
       Denominator_of_Flattening_Ratio: 298.257222
===

I wrote a C++ program that with the gdal/ogr library reads these then writes 
them in the VTK XML format. These can then be used by a scientific 
visualization program (ParaView) where we are also displaying earthquake 
simulation results. I could have made an error, of course.

Is there some non-commercial software I could run on Linux to display the road 
and relief maps together to check whether they are aligned?

Thanks!
Kent
Pittsburgh Supercomputing Center

From woklist at kyngchaos.com  Fri Oct 26 18:22:24 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <47221B99.20204@noaa.gov>
References: <47221B99.20204@noaa.gov>
Message-ID: <39C57715-F789-463B-BA2E-44E5FEDF163F@kyngchaos.com>

On Oct 26, 2007, at 11:53 AM, Christopher Barker wrote:

> William,
>
> Thanks for the detailed answer. I've probably screwed up threading  
> with this message, as our spam filter suddenly got all aggressive  
> and was filtering out all sort of mailing list messages -- I had to  
> go to the web to find this.
>
> I wonder if this should be put up on a Wiki page? It's in the list  
> archive, but the Wiki may be a better place for it.
>
I've been thinking about adding wiki to my site (I'm very behind on  
site software updates).  The info is general and applies to a few  
FOSS GIS packages, so maintaining one copy is easier for me.

>> You probably know about the arch flags needed, -arch ppc -arch  
>> i386,  and the SDK, -isysroot /Developer/SDKs/MacOSX10.4u.sdk.
>
> actually, I didn't know about the isysroot one...
>
Necessary on PPC, not needed on Intel but it doesn't hurt.

>> SO, for GDAL, if you have all other dependencies universal, after   
>> running configure edit port/cpl_config.h and delete the two lines   
>> with WORDS_BIGENDIAN and HOST_FILLORDER, and replace them with:
>> #ifdef __BIG_ENDIAN__
>>    #define WORDS_BIGENDIAN 1
>>    #define HOST_FILLORDER FILLORDER_MSB2LSB
>> #else
>>    #undef WORDS_BIGENDIAN
>>    #define HOST_FILLORDER FILLORDER_LSB2MSB
>> #endif
>
> Is there some way we could automate this so that we could have a -- 
> with-osx-universal flag to configure?
>
> I can just put that in my "run configure" script, but it'd be nice  
> to have it standard.
>
Remember that you must do this patch after configure - configure  
magically replaces #define and #undef lines, so they would both end  
up being the same if cpl_config.h.in was patched.

> A new thought - could you send me whatever scripts you're using to  
> build? It makes more sense for me to just follow what you're doing  
> than re-invent it. (plus it would save me some work ;-)  )

I've been lazy, and do a manual copy-n-paste for GDAL.  On my other  
frameworks I use an Xcode project that takes care of patches.  I was  
using an Xcode project for GDAL, but it's hard to maintain it so I've  
been working on bug reports to get the framework build option in the  
source working good (note that it still has problems with the python  
build - it links wrong and there is no simple way to fix it).


PS: I have a GDAL 1.5 build online - it's not in the "All Frameworks"  
yet, so scroll down on my frameworks page to find it.  I'm working on  
a fresh build, with the python stuff bundled in the framework instead  
of loose on the download dmg, and with the GRASS plugins.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan



From Chris.Barker at noaa.gov  Fri Oct 26 18:38:01 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Building on OS-X
In-Reply-To: <db6e3f110710251409i276eb60fq19aa33e13daad3f3@mail.gmail.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<4720E470.6010206@noaa.gov>
	<db6e3f110710251409i276eb60fq19aa33e13daad3f3@mail.gmail.com>
Message-ID: <47226C49.4050508@noaa.gov>

Derrick Brashear wrote:
> what's wrong with using macports or fink? macports certainly has gdal.

A couple things:

* Do either macports or Fink do universal binaries yet?

* Getting a pre-built gdal isn't the point here -- I'm trying to get 
myself setup to build the SVN trunk, not looking for a distribution.

* I want a build that integrates well with the rest of OS-X, in 
particular the Framework Python. At least in the past, fink felt like 
running another system within a system, much like cygwin on windows. 
macports is a bit better, but still not what I'm looking for.

Ultimately, I want to be able to build Universal Application bundles 
with py2app of a Python program that uses GDAL -- I don't think fink or 
macports are going to help me there.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Thu Oct 25 15:16:08 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Building on OS-X
In-Reply-To: <4720E470.6010206@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<4720E470.6010206@noaa.gov>
Message-ID: <D93347AD-01CA-408D-9EC1-CF34629E4456@kyngchaos.com>

On Oct 25, 2007, at 1:46 PM, Christopher Barker wrote:

> Hi all,
>
> I'm trying to build on OS-X, and having a bit of trouble getting  
> all the libs it need found. So far, my issues have been libpng and  
> libtiff, but who knows what's next?
>
For a minimalist approach, you could use the internal libtiff and  
libpng (and libungif and libjpeg).  You would still need libjasper  
(or ignore jasper and use ECW or Kakadu for jp2).


> Which libs are others using? I had libpng already installed (from  
> source), but only the static lib, and Make was looking for  
> *.dynlib, so that didn't work.
>
> So I've decided that I should just use the nifty Kyng Chaos-supplied
> UnixImageIO framework. However, ./configure doesn't find it, so I  
> started doing things like:
>
> --with-png=/Library/Frameworks/UnixImageIO.framework/Versions/A/ 
> unix/lib/
>
> but that got ugly fast!

Well, that's exactly what I do, so the graphics libraries all have  
the same setting.  Though you can shorten them to (and drop the /lib/  
bit):

--with-png=/Library/Frameworks/UnixImageIO.framework/unix/lib

The symlinks at the top level point to the current version.  I'm not  
bothered by long configure lines, though others may be.  Just make a  
script that does all that, or keep a text file that you can copy-n- 
paste a ready-made configure command from.


> So, it appears that what I should do is add a --framework- 
> UnixImageIO somewhere, but I'm not sure where, as it's needed for  
> both pre-processing and linking.
>
> Any thoughts?
>
> -Chris
>
> By the way, does autoconf have any facilities for looking for  
> Frameworks? It seems the ideal solution would be for ./configure to  
> just find it.

There are only two standard framework dependencies used by GDAL:  
Python and Xerces.  Python is taken care of.  And Xerces doesn't have  
official binary for the Mac framework, just a unix build, so there's  
not much need to worry about it.  I'm building the Xerces framework  
pretty much as is from the source.

My other frameworks are something I do, though the idea is for them  
to become some defacto standard (it's getting there at least in the  
GIS software world).  The UnixImageIO framework is an oddball, and I  
wouldn't be surprised if it doesn't catch on.  But, they are designed  
to be unix friendly - the "Unix Compatibility" idea - so unix  
software doesn't have to deal with frameworks if it doesn't want to.

There may be an autotools framework detection macro, but I don't know  
much about autotools.  The other side of the problem is libtool.   
Somewhere in the middle of libtool 1.5.x framework handling was  
added, and before that extra flags had to be added (and are still  
added in GDAL's Python framework handling).  I think libtool 2.x  
(used in GDAL 1.5) handles frameworks without extra flags now, but  
there could still be issues to deal with.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From Chris.Barker at noaa.gov  Fri Oct 26 18:43:29 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <39C57715-F789-463B-BA2E-44E5FEDF163F@kyngchaos.com>
References: <47221B99.20204@noaa.gov>
	<39C57715-F789-463B-BA2E-44E5FEDF163F@kyngchaos.com>
Message-ID: <47226D91.4050609@noaa.gov>

William Kyngesburye wrote:
>> I wonder if this should be put up on a Wiki page? It's in the list 
>> archive, but the Wiki may be a better place for it.
>>
> I've been thinking about adding wiki to my site (I'm very behind on site 
> software updates).  The info is general and applies to a few FOSS GIS 
> packages, so maintaining one copy is easier for me.


I was thinking the GDAL Wiki, but you're right, most of this isn't 
GDAL-specific. If you do get a site up, we should put a link to in in 
the GDAL wiki though.

>> actually, I didn't know about the isysroot one...
>>
> Necessary on PPC, not needed on Intel but it doesn't hurt.

Good. I'm running PPC at the moment.

> Remember that you must do this patch after configure - configure 
> magically replaces #define and #undef lines, so they would both end up 
> being the same if cpl_config.h.in was patched.

got it.

>> A new thought - could you send me whatever scripts you're using to 
>> build? It makes more sense for me to just follow what you're doing 
>> than re-invent it. (plus it would save me some work ;-)  )
> 
> I've been lazy, and do a manual copy-n-paste for GDAL.  On my other 
> frameworks I use an Xcode project that takes care of patches.

That's funny, I thought I wrote scripts because I'm lazy!

Anyway, I'm scripting away, so maybe I'll put mine in the Wiki if I ever 
get them to work!

> I've 
> been working on bug reports to get the framework build option in the 
> source working good 

thanks!

> (note that it still has problems with the python 
> build - it links wrong and there is no simple way to fix it).

Darn. I guess I was going to find out that soon enough -- Maybe I can 
help, but maybe not, this stuff is pretty out of my depth.

> PS: I have a GDAL 1.5 build online

Thanks, but my goal here is to be building SVN trunk, so I can test and 
maybe even contribute something.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mateusz at loskot.net  Fri Oct 26 19:10:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSR tests fail on Mac OS
In-Reply-To: <CCB6B538-9142-4A1D-9FA7-A729CD91BB98@kyngchaos.com>
References: <4720F7EB.3030403@loskot.net>
	<CCB6B538-9142-4A1D-9FA7-A729CD91BB98@kyngchaos.com>
Message-ID: <472273D9.3030001@loskot.net>

William Kyngesburye wrote:
> How are you linking PROJ?  I've found that the --with-proj-static works
> best on OSX, so that it works just like any other dynamic library.

I always (Linux, Windows, Mac OS X) build & install PROJ.4.
Next, I don't use --with-proj.static but use dynamic loading feature.
It works well for me.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Thu Oct 25 23:36:12 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <472130CA.8050302@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<472130CA.8050302@noaa.gov>
Message-ID: <B6E63097-B22D-47E2-97C0-DBEDF778A01C@kyngchaos.com>

Oh, there's a fun one.  And Python forces you to supply universal  
libraries to build extensions.  Though you might check the mac python  
mailing list - it may be possible to build a single architecture  
extension for the universal python.

First, as you speculate, there's the method that takes no patching of  
sources (a couple dependencies have minor endian issues) - build on  
both architectures and lipo them together.  But that's too much trouble.

The better way is to do it all at once on a single OSX architecture.   
It depends on where you want to start.  If you use universal  
dependencies and just build GDAL yourself from source, it's not too  
hard.  If you want to build all the dependencies yourself, that's  
quite a task.

You probably know about the arch flags needed, -arch ppc -arch i386,  
and the SDK, -isysroot /Developer/SDKs/MacOSX10.4u.sdk.  The isysroot  
flag is only really needed when building on PPC, since the system is  
not universal on PPC, though that will change with Leopard.  The  
isysroot flag has its own trap - /Library/Frameworks and /usr/local  
is not in it, so 3rd-party libs and frameworks will be missed unless  
some symlinks are added to it (I have details on that in my GRASS OSX  
readme, but haven't got them online yet).

There is an easy way to get the flags into the compile and link  
commands where needed:

http://www.macosxhints.com/article.php?story=20061025213851279

Otherwise getting them into CFLAGS, CXXFLAGS and LDFLAGS can be  
tricky (-isysroot can't be specified more than once).

The key for the sources is that some packages use a configured endian  
setting, instead of runtime endian detection (GDAL, netcdf, ogdi,  
tiff, xerces).  Some are even hardwired to assume that OSX is  
bigendian (hdf4, ecw).  Some have compiled data file endianess  
(proj), or run a program during compilation to set some platform  
endian info (hdf5).  One simply MUST be compiled separate and lipo'd  
- postgres - because it actually uses ld for linking instead of gcc,  
and ld is difficult to use with multiple arch flags.

The configured ones are easy - after running configure, edit the  
config.h file generated and conditionalize the endian setting on  
__BIG_ENDIAN__ or __LITTLE_ENDIAN__ - these are standard OSX GCC  
definitions.


SO, for GDAL, if you have all other dependencies universal, after  
running configure edit port/cpl_config.h and delete the two lines  
with WORDS_BIGENDIAN and HOST_FILLORDER, and replace them with:

#ifdef __BIG_ENDIAN__
   #define WORDS_BIGENDIAN 1
   #define HOST_FILLORDER FILLORDER_MSB2LSB
#else
   #undef WORDS_BIGENDIAN
   #define HOST_FILLORDER FILLORDER_LSB2MSB
#endif

You can't do this before running configure because configure  
magically zaps all define/undef lines.  I haven't tested this with  
the internal tif, gif, jpeg, png libs, since I use my UnixImageIO  
framework for those.


Universal-friendlyness is not something I can do much about, unless  
there is a lot of interest or I really get aggressive about it (I got  
GRASS to change).  One I'm thinking about pursuing (when other things  
settle down a bit) is PROJ.  The datum files are processed during  
compilation so they are endian-specific to the build platform (GRASS  
was like this for a couple things).  I have a patch I apply for my  
binaries that does byte-swapping depending on the architecture.

On Oct 25, 2007, at 7:11 PM, Christopher Barker wrote:

> How to I build GDAL to be Universal (PPC + Intel) on OS-X?
>
> I seem to have gotten GDAL itself to build, but now when the python  
> extension tries to build, I get errors because I'm using a  
> Universal Python, but it's trying to link with the libgdal.dylib,  
> which is PPC only (I'm on a PPC machine).
>
> William, you distribute universal binaries, so it must be possible.  
> Please tell me you don't build them separate and lipo them together!
>
> thanks,
> -Chris

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From mateusz at loskot.net  Fri Oct 26 20:07:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Should These Maps Be Aligned?
In-Reply-To: <47225BEE.80708@psc.edu>
References: <47225BEE.80708@psc.edu>
Message-ID: <4722815A.8060403@loskot.net>

Kent Eschenberg wrote:
> I converted the relief map from its Lambert projection to geographic
> (i.e., longitude and latitude) with gdalwarp. As far as I can tell the
> roads already use that projection. No prj file came with the roads but
> the included text file has this section:
> 
> ===
> Spatial_Reference_Information:
>   Horizontal_Coordinate_System_Definition:
>     Geographic:
>       Latitude_Resolution: 0.000278
>       Longitude_Resolution: 0.000278
>       Geographic_Coordinate_Units: Decimal degrees
>     Geodetic_Model:
>       Horizontal_Datum_Name: North American Datum of 1983
>       Ellipsoid_Name: GRS1980
>       Semi-major_Axis: 6378137
>       Denominator_of_Flattening_Ratio: 298.257222
> ===
> 
> I wrote a C++ program that with the gdal/ogr library reads these then
> writes them in the VTK XML format.

Kent,

I don't know what's the VTK XML format, but AFAIK it's not
supported by OGR.

> These can then be used by a
> scientific visualization program (ParaView) where we are also displaying
> earthquake simulation results. I could have made an error, of course.
> 
> Is there some non-commercial software I could run on Linux to display
> the road and relief maps together to check whether they are aligned?

What about Quantum GIS, http://www.qgis.ogr

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dcmikkelsen at shaw.ca  Fri Oct 26 20:22:20 2007
From: dcmikkelsen at shaw.ca (Dean Mikkelsen)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Should These Maps Be Aligned?
In-Reply-To: <4722815A.8060403@loskot.net>
References: <47225BEE.80708@psc.edu> <4722815A.8060403@loskot.net>
Message-ID: <d04ce3e67d816.4722224c@shaw.ca>

I am not sure either, but another package I often use is uDig.
 
See: http://udig.refractions.net
 
Cheers,
Dean


----- Original Message -----
From: Mateusz Loskot <mateusz@loskot.net>
Date: Friday, October 26, 2007 5:17 pm
Subject: Re: [Gdal-dev] Should These Maps Be Aligned?
To: eschenbe@psc.edu
Cc: GDAL <gdal-dev@lists.maptools.org>

> Kent Eschenberg wrote:
> > I converted the relief map from its Lambert projection to geographic
> > (i.e., longitude and latitude) with gdalwarp. As far as I can 
> tell the
> > roads already use that projection. No prj file came with the 
> roads but
> > the included text file has this section:
> > 
> > ===
> > Spatial_Reference_Information:
> >   Horizontal_Coordinate_System_Definition:
> >     Geographic:
> >       Latitude_Resolution: 0.000278
> >       Longitude_Resolution: 0.000278
> >       
> Geographic_Coordinate_Units: Decimal degrees
> >     Geodetic_Model:
> >       Horizontal_Datum_Name: 
> North American Datum of 1983
> >       Ellipsoid_Name: GRS1980
> >       Semi-major_Axis: 6378137
> >       
> Denominator_of_Flattening_Ratio: 298.257222
> > ===
> > 
> > I wrote a C++ program that with the gdal/ogr library reads 
> these then
> > writes them in the VTK XML format.
> 
> Kent,
> 
> I don't know what's the VTK XML format, but AFAIK it's not
> supported by OGR.
> 
> > These can then be used by a
> > scientific visualization program (ParaView) where we are also 
> displaying> earthquake simulation results. I could have made an 
> error, of course.
> > 
> > Is there some non-commercial software I could run on Linux to 
> display> the road and relief maps together to check whether they 
> are aligned?
> 
> What about Quantum GIS, http://www.qgis.ogr
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

Dean C. Mikkelsen, B.Sc., P.Eng. 
Terra ETL Ltd. 
Victoria, B.C., Canada 
Phone: +1 (250) 88TERRA (83772) 
http://www.terraetl.com 

Consulting in Geodesy & GIS  for the Natural Resources
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071026/3b81aae3/attachment.html
From woklist at kyngchaos.com  Fri Oct 26 23:48:46 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <47226D91.4050609@noaa.gov>
References: <47221B99.20204@noaa.gov>
	<39C57715-F789-463B-BA2E-44E5FEDF163F@kyngchaos.com>
	<47226D91.4050609@noaa.gov>
Message-ID: <3A797EA3-8DA4-400D-B9B7-3157A8ECA57A@kyngchaos.com>

On Oct 26, 2007, at 5:43 PM, Christopher Barker wrote:

>> (note that it still has problems with the python build - it links  
>> wrong and there is no simple way to fix it).
>
> Darn. I guess I was going to find out that soon enough -- Maybe I  
> can help, but maybe not, this stuff is pretty out of my depth.
>
There are two possibilities to getting this to work.

- if the location can be known to the GDAL makefiles, it can work  
with my current framework install extras.  But currently distutils/ 
setuptools has ultimate control over the final destination - it is  
currently $prefix/lib/python[x].[y]/site-packages on OSX (x.y being  
the python version), and the GDAL makefile doesn't know that subpath.

- somehow get libtool to generate the gdal library with the correct  
install_name.  I can hack libtool to do that, but I don't know if  
it's possible in a standard configured libtool.

A 3rd possibility would be to build and install a GDAL framework,  
then build gdal python using that, instead of the build-time library  
(which for the framework build doesn't have the correct install_name  
yet).  But you would need to adjust setup.py for that.

The current framework build is a bit of a hack because libtool  
doesn't directly support building frameworks.


I also have a bug report for an odd problem where .o files are not  
built next to their sources like they used to be, but instead  
libtool .lo files.  This causes a full recompile when installing, and  
the programs can't find their .o's when linking:

http://trac.osgeo.org/gdal/ticket/1878

It may be just my system, since I haven't seen any others say  
anything about it, even other Mac users.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From woklist at kyngchaos.com  Fri Oct 26 23:54:42 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
Message-ID: <07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>

Mateusz (or anyone else) -

Have you encountered this problem yet (on any of your systems, but  
especially OSX)?

http://trac.osgeo.org/gdal/ticket/1878


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin



From mateusz at loskot.net  Sat Oct 27 00:56:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
	<07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
Message-ID: <4722C50D.4040402@loskot.net>

William Kyngesburye wrote:
> Mateusz (or anyone else) -
> 
> Have you encountered this problem yet (on any of your systems, but
> especially OSX)?
> 
> http://trac.osgeo.org/gdal/ticket/1878

William,

No, I've not made any tests for it.
I'm focused on tickets related to 1.4.3.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Sat Oct 27 10:55:54 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <4722C50D.4040402@loskot.net>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
	<07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
	<4722C50D.4040402@loskot.net>
Message-ID: <E9208E42-E9D4-4FC1-A3AA-355ACA559820@kyngchaos.com>

So, no problem with it on your recent OSX build where the OSR test  
failed?  It would have been obvious at least when make hit the  
programs.  You might have noticed the recompile when you installed.

I forgot to ask - what version is your OSX system?

On Oct 26, 2007, at 11:56 PM, Mateusz Loskot wrote:

> William Kyngesburye wrote:
>> Mateusz (or anyone else) -
>>
>> Have you encountered this problem yet (on any of your systems, but
>> especially OSX)?
>>
>> http://trac.osgeo.org/gdal/ticket/1878
>
> William,
>
> No, I've not made any tests for it.
> I'm focused on tickets related to 1.4.3.
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From omkaranathan at darshan3d.com  Sat Oct 27 11:25:27 2007
From: omkaranathan at darshan3d.com (om)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Error building gdal-1.4.0
Message-ID: <47235867.8020207@darshan3d.com>

hi guys,

I am trying to build gdal-1.4.0 in (Linux IA64 system, libtiff -3.8.2 & 
geotiff 1.2.0)
I'm getting the following error..

gdal-1.4.0/.libs/libgdal.so: undefined reference to 
`TIFFGetConfiguredCODECs' 

Any suggestions??

Thanks

Om


From mateusz at loskot.net  Sat Oct 27 13:31:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <E9208E42-E9D4-4FC1-A3AA-355ACA559820@kyngchaos.com>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
	<07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
	<4722C50D.4040402@loskot.net>
	<E9208E42-E9D4-4FC1-A3AA-355ACA559820@kyngchaos.com>
Message-ID: <472375E5.6000006@loskot.net>

William Kyngesburye wrote:
> So, no problem with it on your recent OSX build where the OSR test
> failed?

William,

There is no problem with that anymore. I installed PROJ.4 and it works.
Simply, I forgot that I have no PROJ.4 on my new OSX box.

> It would have been obvious at least when make hit the
> programs.  You might have noticed the recompile when you installed.
> 
> I forgot to ask - what version is your OSX system?

Mac OS X 10.4

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Sat Oct 27 14:39:30 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <472375E5.6000006@loskot.net>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
	<07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
	<4722C50D.4040402@loskot.net>
	<E9208E42-E9D4-4FC1-A3AA-355ACA559820@kyngchaos.com>
	<472375E5.6000006@loskot.net>
Message-ID: <31B6A142-655F-4731-B436-D69EDAEB222A@kyngchaos.com>

On Oct 27, 2007, at 12:31 PM, Mateusz Loskot wrote:

> William Kyngesburye wrote:
>> So, no problem with it on your recent OSX build where the OSR test
>> failed?
>
> William,
>
> There is no problem with that anymore. I installed PROJ.4 and it  
> works.
> Simply, I forgot that I have no PROJ.4 on my new OSX box.
>
What I meant was, when you built GDAL that time, did you have the .o/ 
recompile problems?

>> It would have been obvious at least when make hit the
>> programs.  You might have noticed the recompile when you installed.
>>
>> I forgot to ask - what version is your OSX system?
>
> Mac OS X 10.4
>
So, Xcode 2.4/GCC 4.  Same here - I thought maybe there was a GCC  
difference between our systems.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From mateusz at loskot.net  Sat Oct 27 14:58:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: [GDAL] #1878: programs can't find .o when linking
In-Reply-To: <31B6A142-655F-4731-B436-D69EDAEB222A@kyngchaos.com>
References: <048.8519750685b473f291cdaf34873e5e24@osgeo.org>
	<057.4d5fec364d84a77aa7eec89f44d3cf97@osgeo.org>
	<07FCAEE2-63EC-44BE-AAEE-5F9DB7780F2F@kyngchaos.com>
	<4722C50D.4040402@loskot.net>
	<E9208E42-E9D4-4FC1-A3AA-355ACA559820@kyngchaos.com>
	<472375E5.6000006@loskot.net>
	<31B6A142-655F-4731-B436-D69EDAEB222A@kyngchaos.com>
Message-ID: <47238A3B.90307@loskot.net>

William Kyngesburye wrote:
> On Oct 27, 2007, at 12:31 PM, Mateusz Loskot wrote:
> 
>> William Kyngesburye wrote:
>>> So, no problem with it on your recent OSX build where the OSR test
>>> failed?
>>
>> William,
>>
>> There is no problem with that anymore. I installed PROJ.4 and it works.
>> Simply, I forgot that I have no PROJ.4 on my new OSX box.
>>
> What I meant was, when you built GDAL that time, did you have the
> .o/recompile problems?

William,

No, I didn't.
I've not experienced any problems related to .o files recently.
I rebuild GDAL on Mac, Linux, Windows a few times a day.

>>> It would have been obvious at least when make hit the
>>> programs.  You might have noticed the recompile when you installed.
>>>
>>> I forgot to ask - what version is your OSX system?
>>
>> Mac OS X 10.4
>>
> So, Xcode 2.4/GCC 4.  Same here - I thought maybe there was a GCC
> difference between our systems.

I have GCC 4.0.1 (build 5367), from XCode 2.4

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Oct 27 20:48:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Error building gdal-1.4.0
In-Reply-To: <47235867.8020207@darshan3d.com>
References: <47235867.8020207@darshan3d.com>
Message-ID: <4723DC4C.4060001@pobox.com>

om wrote:
> hi guys,
> 
> I am trying to build gdal-1.4.0 in (Linux IA64 system, libtiff -3.8.2 & 
> geotiff 1.2.0)
> I'm getting the following error..
> 
> gdal-1.4.0/.libs/libgdal.so: undefined reference to 
> `TIFFGetConfiguredCODECs'
> Any suggestions??

Om,

This typically means you have an old libtiff or possibly two copies
of libtiff, one old and one new, and you are picking up the old one at
link time.

3.8.2 does not count as old for these purposes. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Sat Oct 27 22:47:31 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
Message-ID: <4723F843.9020504@ualg.pt>

Hi,

A distant recall tells me that this is not new.

Trying to compile the current svn version, raises this error (a couple 
days ago it wasn't here)

LINK : fatal error LNK1104: cannot open file 'HD421md.lib'

and it's right, I don't and never had that lib

Joaquim Luis

       




From ivan.lucena at pmldnet.com  Sat Oct 27 23:18:30 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <4723F843.9020504@ualg.pt>
References: <4723F843.9020504@ualg.pt>
Message-ID: <4723FF86.6060102@pmldnet.com>

Joaquim,

The name of that library HD421md.lib could be related to HDF4.

But HDF4 flags are commented on make.opt:

http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L185

Is it possible that your make.opt has HDF4 flags uncommented by mistake?

Sauda??es,

Ivan


Joaquim Luis wrote:
> Hi,
> 
> A distant recall tells me that this is not new.
> 
> Trying to compile the current svn version, raises this error (a couple 
> days ago it wasn't here)
> 
> LINK : fatal error LNK1104: cannot open file 'HD421md.lib'
> 
> and it's right, I don't and never had that lib
> 
> Joaquim Luis
> 
>      
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From jluis at ualg.pt  Sat Oct 27 23:36:01 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <4723FF86.6060102@pmldnet.com>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
Message-ID: <472403A1.10408@ualg.pt>

Lucena, Ivan wrote:
> Joaquim,
>
> The name of that library HD421md.lib could be related to HDF4.
>
> But HDF4 flags are commented on make.opt:
> http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L185
> Is it possible that your make.opt has HDF4 flags uncommented by mistake?

No, it's not by mistake. I normally build GDAL with hdf4 support but
apparently the current (tonight's) nmake is trying to link
against the HDF4 debug version. Hence the 'd' in "HD421md.lib"


> Sauda??es,
> Ivan

e + Cumprimentos daqui

Joaquim



From ivan.lucena at pmldnet.com  Sun Oct 28 00:14:34 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <472403A1.10408@ualg.pt>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt>
Message-ID: <47240CAA.4040101@pmldnet.com>

Joaquim,

> No, it's not by mistake. I normally build GDAL with hdf4 support but
> apparently the current (tonight's) nmake is trying to link
> against the HDF4 debug version. Hence the 'd' in "HD421md.lib"

You are right. I usually compile GDAL with HDF41r5s and I just update 
the whole GDAL tree from SVN and got the same error but with 
"HDF415md.lib".

Ivan


From mateusz at loskot.net  Sun Oct 28 01:57:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 1
Message-ID: <472424E1.80906@loskot.net>

Folks,

The GDAL Team is pleased to announce that today we've cleaned
all issues assigned to the roadmap of milestone 1.4.3 and
we are very close to issue next stable release numbered 1.4.3.

64 tickets were addressed:

http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3

The NEWS is available at:

http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News

Source packages with 1.4.3 "Release Candidate 1" are available at:

http://download.osgeo.org/gdal/gdal143rc1.zip
http://download.osgeo.org/gdal/gdal-1.4.3rc1.tar.gz

We would be thankful for testing and reporting any issues.	

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Oct 28 02:00:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <4723F843.9020504@ualg.pt>
References: <4723F843.9020504@ualg.pt>
Message-ID: <47242583.3090600@loskot.net>

Joaquim Luis wrote:
> Hi,
> 
> A distant recall tells me that this is not new.
> 
> Trying to compile the current svn version, raises this error (a couple
> days ago it wasn't here)
> 
> LINK : fatal error LNK1104: cannot open file 'HD421md.lib'
> 
> and it's right, I don't and never had that lib

Joaquim,

What compiler do you use?
What configuration options do you use?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Oct 28 02:05:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <472403A1.10408@ualg.pt>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt>
Message-ID: <472426A1.2020504@loskot.net>

Joaquim Luis wrote:
> Lucena, Ivan wrote:
>> Joaquim,
>>
>> The name of that library HD421md.lib could be related to HDF4.
>>
>> But HDF4 flags are commented on make.opt:
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L185
>> Is it possible that your make.opt has HDF4 flags uncommented by mistake?
> 
> No, it's not by mistake. I normally build GDAL with hdf4 support but
> apparently the current (tonight's) nmake is trying to link
> against the HDF4 debug version. Hence the 'd' in "HD421md.lib"

I assume you GDAL build using Visual C++.
A day ago, I patched debug mode flags in nmake.opt in order to build
complete debug version of GDAL:

http://trac.osgeo.org/gdal/changeset/12549

Does linking with HD421md.lib work?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ivan.lucena at pmldnet.com  Sun Oct 28 03:04:20 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <472426A1.2020504@loskot.net>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt> <472426A1.2020504@loskot.net>
Message-ID: <47243474.1030204@pmldnet.com>

Matteusz,

The binary distribution of HDF4 doesn't carry debug libraries. So it 
looks like the solution for us is to get the source and change the 
settings to compile with all debugging libraries. Isn't it right?

Best regards,

Ivan

Mateusz Loskot wrote:
> Joaquim Luis wrote:
>> Lucena, Ivan wrote:
>>> Joaquim,
>>>
>>> The name of that library HD421md.lib could be related to HDF4.
>>>
>>> But HDF4 flags are commented on make.opt:
>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L185
>>> Is it possible that your make.opt has HDF4 flags uncommented by mistake?
>> No, it's not by mistake. I normally build GDAL with hdf4 support but
>> apparently the current (tonight's) nmake is trying to link
>> against the HDF4 debug version. Hence the 'd' in "HD421md.lib"
> 
> I assume you GDAL build using Visual C++.
> A day ago, I patched debug mode flags in nmake.opt in order to build
> complete debug version of GDAL:
> 
> http://trac.osgeo.org/gdal/changeset/12549
> 
> Does linking with HD421md.lib work?
> 
> Cheers

From mateusz at loskot.net  Sun Oct 28 03:27:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <47243474.1030204@pmldnet.com>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt> <472426A1.2020504@loskot.net>
	<47243474.1030204@pmldnet.com>
Message-ID: <472439DF.6030708@loskot.net>

Lucena, Ivan wrote:
> Matteusz,
> 
> The binary distribution of HDF4 doesn't carry debug libraries. So it
> looks like the solution for us is to get the source and change the
> settings to compile with all debugging libraries. Isn't it right?

Ivan,

I see following two options:

- For end-user purposes, GDAL should be compiled using non-debug
optimized configuration and link against non-debug version of HDF.

- For development purposes, debug builds are required, and in that case
it's reasonable to build debug version of HDF from sources,
because as I understand, there is no HDF SDK in binary form available.

Building binaries with Visual C++ in debug mode requires to link with
debug version of run-time libraries, and these libraries are not
compatible with non-debug libraries of HDF.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From omkaranathan at darshan3d.com  Sun Oct 28 05:20:48 2007
From: omkaranathan at darshan3d.com (om)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Error building gdal-1.4.0
In-Reply-To: <4723DC4C.4060001@pobox.com>
References: <47235867.8020207@darshan3d.com> <4723DC4C.4060001@pobox.com>
Message-ID: <47245470.1090902@darshan3d.com>

Frank Warmerdam wrote:

> om wrote:
>
>> hi guys,
>>
>> I am trying to build gdal-1.4.0 in (Linux IA64 system, libtiff -3.8.2 
>> & geotiff 1.2.0)
>> I'm getting the following error..
>>
>> gdal-1.4.0/.libs/libgdal.so: undefined reference to 
>> `TIFFGetConfiguredCODECs'
>> Any suggestions??
>
>
> Om,
>
> This typically means you have an old libtiff or possibly two copies
> of libtiff, one old and one new, and you are picking up the old one at
> link time.
>
> 3.8.2 does not count as old for these purposes. :-)
>
> Best regards,

Thanks for your response but I have only one libtiff and that is 3.8.2.

Regards

Om


From warmerdam at pobox.com  Sun Oct 28 11:11:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC1 as 1.4.3
Message-ID: <4724A694.60806@pobox.com>

Motion: To release the GDAL 1.4.3RC1 release as GDAL 1.4.3 release.

--

PSC Members,

I'd like to start a formal vote to make 1.4.3RC1 become the official 1.4.3
release.  If the motion is supported, and no blocking problems are encountered
the formal 1.4.3 release should occur Tuesday evening.

I shall withhold my vote till I've had time to test the release candidate
but I wanted to "start the timer".

Non-PSC members are of course strongly encouraged to let us know of problems
with the release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct 28 12:53:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: Motion: Grant commit access for Chrisopher Condit
In-Reply-To: <4711619C.40602@pobox.com>
References: <4711619C.40602@pobox.com>
Message-ID: <4724BE7B.6090805@pobox.com>

Frank Warmerdam wrote:
> Motion: Grant commit access for Chrisopher Condit.

Folks,

I neglected to follow up on this.  I declare this motion passed with
support from myself, HowardB, DanielM, and TamasS.  Welcome board Chris!
Your OSGeo account should now have commit access.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Sun Oct 28 11:11:45 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC1 as 1.4.3
In-Reply-To: <4724A694.60806@pobox.com>
References: <4724A694.60806@pobox.com>
Message-ID: <B1E986F8-7238-498A-86EA-45712B4E33CF@gmail.com>

+1.  Nice work guys!

Howard

On Oct 28, 2007, at 10:11 AM, Frank Warmerdam wrote:

> Motion: To release the GDAL 1.4.3RC1 release as GDAL 1.4.3 release.
>
> --
>
> PSC Members,
>
> I'd like to start a formal vote to make 1.4.3RC1 become the  
> official 1.4.3
> release.  If the motion is supported, and no blocking problems are  
> encountered
> the formal 1.4.3 release should occur Tuesday evening.
>
> I shall withhold my vote till I've had time to test the release  
> candidate
> but I wanted to "start the timer".
>
> Non-PSC members are of course strongly encouraged to let us know of  
> problems
> with the release.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Sun Oct 28 11:53:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: Motion: Grant commit access for Chrisopher Condit
In-Reply-To: <4724BE7B.6090805@pobox.com>
References: <4711619C.40602@pobox.com> <4724BE7B.6090805@pobox.com>
Message-ID: <4724B060.4030900@loskot.net>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: Grant commit access for Chrisopher Condit.
> 
> Folks,
> 
> I neglected to follow up on this.  I declare this motion passed with
> support from myself, HowardB, DanielM, and TamasS.  Welcome board Chris!
> Your OSGeo account should now have commit access.

Great!


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Sun Oct 28 12:10:59 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <472439DF.6030708@loskot.net>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt> <472426A1.2020504@loskot.net>
	<47243474.1030204@pmldnet.com> <472439DF.6030708@loskot.net>
Message-ID: <4724B493.1040702@ualg.pt>

Mateusz Loskot wrote:
> Lucena, Ivan wrote:
>   
>> Matteusz,
>>
>> The binary distribution of HDF4 doesn't carry debug libraries. So it
>> looks like the solution for us is to get the source and change the
>> settings to compile with all debugging libraries. Isn't it right?
>>     
>
> Ivan,
>
> I see following two options:
>
> - For end-user purposes, GDAL should be compiled using non-debug
> optimized configuration and link against non-debug version of HDF.
>
> - For development purposes, debug builds are required, and in that case
> it's reasonable to build debug version of HDF from sources,
> because as I understand, there is no HDF SDK in binary form available.
>   

OK,
I run a make clean, reset the compiling  flags in nmake.opt to optimized 
and now it works again.

Joaquim


From jluis at ualg.pt  Sun Oct 28 12:22:02 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC1 as 1.4.3
In-Reply-To: <4724A694.60806@pobox.com>
References: <4724A694.60806@pobox.com>
Message-ID: <4724B72A.5090506@ualg.pt>

Frank Warmerdam wrote:
> I shall withhold my vote till I've had time to test the release candidate
> but I wanted to "start the timer".
>
> Non-PSC members are of course strongly encouraged to let us know of 
> problems
> with the release.

Hi,
I may be mixing up something here but this what I get with 1.4.3
C:\j>gdalwarp --version
GDAL 1.5dev, released 2007/04/01

and worst, the gdalwarp bug  that reported 2days ago (#1945) which 
apparently had a lot in common
with the now dead #1610, is not corrected.

Joaquim


From warmerdam at pobox.com  Sun Oct 28 15:05:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC1 as 1.4.3
In-Reply-To: <4724B72A.5090506@ualg.pt>
References: <4724A694.60806@pobox.com> <4724B72A.5090506@ualg.pt>
Message-ID: <4724DD8D.3020500@pobox.com>

Joaquim Luis wrote:
> Frank Warmerdam wrote:
>> I shall withhold my vote till I've had time to test the release candidate
>> but I wanted to "start the timer".
>>
>> Non-PSC members are of course strongly encouraged to let us know of 
>> problems
>> with the release.
> 
> Hi,
> I may be mixing up something here but this what I get with 1.4.3
> C:\j>gdalwarp --version
> GDAL 1.5dev, released 2007/04/01
> 
> and worst, the gdalwarp bug  that reported 2days ago (#1945) which 
> apparently had a lot in common
> with the now dead #1610, is not corrected.

Joaquim,

Confirmed, it appears trunk instead of 1.4 branch was captured.

-1 on releasing RC1.  Mateusz or I will prepare an RC2 later today.

I will look into 1945 though 1610 was fixed in trunk as well as 1.4 branch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sun Oct 28 13:30:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC1 as 1.4.3
In-Reply-To: <4724B72A.5090506@ualg.pt>
References: <4724A694.60806@pobox.com> <4724B72A.5090506@ualg.pt>
Message-ID: <4724C71A.6070700@loskot.net>

Joaquim Luis wrote:
> Frank Warmerdam wrote:
>> I shall withhold my vote till I've had time to test the release candidate
>> but I wanted to "start the timer".
>>
>> Non-PSC members are of course strongly encouraged to let us know of
>> problems
>> with the release.
> 
> Hi,
> I may be mixing up something here but this what I get with 1.4.3
> C:\j>gdalwarp --version
> GDAL 1.5dev, released 2007/04/01

Joaquim,

You are perfectly right, I screwed it.
Thanks for fast report!


Folks,

I appologize for this *big* mistake.
I'm preparing new and correct packages now.
They will be titled 1.4.3 RC2

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sun Oct 28 13:50:26 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 2
Message-ID: <4724CBE2.4070602@loskot.net>

Folks,

*** IMPORTANT ***
I appologize for my mistake during preparation of gdal-1.4.3 RC1
and you got sources from 'trunk' instead of from 'branches/1.4'.
Following GDAL 1.4.3 RC 2 is dedicated to correct this issue.
Special thanks to Joaquim Luis reporting the problem very fast.



GDAL 1.4.3 Release Candidate 2
------------------------------

64 tickets were addressed:

http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3

The NEWS is available at:

http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News

Source packages with 1.4.3 "Release Candidate 2" are available at:

http://download.osgeo.org/gdal/gdal143rc2.zip
http://download.osgeo.org/gdal/gdal-1.4.3rc2.tar.gz

We would be thankful for testing and reporting any issues.	

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jluis at ualg.pt  Sun Oct 28 14:44:43 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 2
In-Reply-To: <4724CBE2.4070602@loskot.net>
References: <4724CBE2.4070602@loskot.net>
Message-ID: <4724D89B.5050109@ualg.pt>

Mateusz Loskot wrote:
> Folks,
>
> *** IMPORTANT ***
> I appologize for my mistake during preparation of gdal-1.4.3 RC1
> and you got sources from 'trunk' instead of from 'branches/1.4'.
> Following GDAL 1.4.3 RC 2 is dedicated to correct this issue.
> Special thanks to Joaquim Luis reporting the problem very fast.
>   

I'm sorry to bug you guys again, ... but it's still that end of the war 
thing (#1945)

If I run it with a -r method I get the "Usage" description. Not stating 
a -r option works OK

gdalwarp -s_srs "+proj=tmerc +lat_0=39.66666666666666 +
lon_0=-8.131906111111111 +k=1.0 +x_0=200000 +y_0=300000 +ellps=intl 
+towgs84=-30
2.581,-61.360,103.047,0,0,0,0" -t_srs "+proj=utm +zone=29 +datum=WGS84" 
-tr 25 2
5 -ot Int16 -r cubic lixo.tiff lixo2.tiff
Usage: gdalwarp [--help-general] [--formats]
...

From warmerdam at pobox.com  Sun Oct 28 17:27:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 2
In-Reply-To: <4724CBE2.4070602@loskot.net>
References: <4724CBE2.4070602@loskot.net>
Message-ID: <4724FEC2.8060504@pobox.com>

Mateusz Loskot wrote:
> GDAL 1.4.3 Release Candidate 2
> ------------------------------
> 
> 64 tickets were addressed:
> 
> http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3
> 
> The NEWS is available at:
> 
> http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News
> 
> Source packages with 1.4.3 "Release Candidate 2" are available at:
> 
> http://download.osgeo.org/gdal/gdal143rc2.zip
> http://download.osgeo.org/gdal/gdal-1.4.3rc2.tar.gz

Folks,

I have uploaded essentially untested 1.4.3 win32 binaries based on RC2.
For those for whom building from source is inconvenient, please consider
testing using these binaries.

I've also restructured the downloads win32 directory by version for easier
navigation.

   http://download.osgeo.org/gdal/win32/1.4.3

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct 28 18:10:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 2
In-Reply-To: <4724D89B.5050109@ualg.pt>
References: <4724CBE2.4070602@loskot.net> <4724D89B.5050109@ualg.pt>
Message-ID: <472508F1.2050909@pobox.com>

Joaquim Luis wrote:
> I'm sorry to bug you guys again, ... but it's still that end of the war 
> thing (#1945)
> 
> If I run it with a -r method I get the "Usage" description. Not stating 
> a -r option works OK

Joaquim,

I think in 1.4.x resampling options were specified slightly differently.
For instance -rc was used instead of "-r cubic".

Best regards,

> gdalwarp -s_srs "+proj=tmerc +lat_0=39.66666666666666 +
> lon_0=-8.131906111111111 +k=1.0 +x_0=200000 +y_0=300000 +ellps=intl 
> +towgs84=-30
> 2.581,-61.360,103.047,0,0,0,0" -t_srs "+proj=utm +zone=29 +datum=WGS84" 
> -tr 25 2
> 5 -ot Int16 -r cubic lixo.tiff lixo2.tiff
> Usage: gdalwarp [--help-general] [--formats]
> ...
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Sun Oct 28 16:01:32 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL /OGR 1.4.3 Release Candidate 2
In-Reply-To: <4724CBE2.4070602@loskot.net>
References: <4724CBE2.4070602@loskot.net>
Message-ID: <16D7A029-E19E-4AC4-950B-85A1648F28F1@kyngchaos.com>

I'll get to a OSX Tiger framework binary in the next couple days - I'm  
working on a BIG batch of chili today (no, making it, not eating it!).


On Oct 28, 2007, at 12:50 PM, Mateusz Loskot wrote:

> GDAL 1.4.3 Release Candidate 2
> ------------------------------
>
> 64 tickets were addressed:
>
> http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3
>
> The NEWS is available at:
>
> http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News
>
> Source packages with 1.4.3 "Release Candidate 2" are available at:
>
> http://download.osgeo.org/gdal/gdal143rc2.zip
> http://download.osgeo.org/gdal/gdal-1.4.3rc2.tar.gz
>
> We would be thankful for testing and reporting any issues.	
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From ivan.lucena at pmldnet.com  Sun Oct 28 17:29:50 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] svn build error
In-Reply-To: <472439DF.6030708@loskot.net>
References: <4723F843.9020504@ualg.pt> <4723FF86.6060102@pmldnet.com>
	<472403A1.10408@ualg.pt> <472426A1.2020504@loskot.net>
	<47243474.1030204@pmldnet.com> <472439DF.6030708@loskot.net>
Message-ID: <4724FF4E.8080903@pmldnet.com>

Mateusz,

> - For end-user purposes, GDAL should be compiled using non-debug
> optimized configuration and link against non-debug version of HDF.

OK. That is very simple to do and they can get the binaries from:

ftp://ftp.hdfgroup.org/HDF/HDF_Current/bin/windows

> - For development purposes, debug builds are required, and in that case
> it's reasonable to build debug version of HDF from sources,
> because as I understand, there is no HDF SDK in binary form available.

There *is* binary a distribution available at:

---
ftp://ftp.hdfgroup.org/HDF/HDF_Current/bin/windows/README:

This directory contains the HDF 4.2r2 binary distributions (HDF
libraries, include files, utilities, man pages, release notes)
for Windows:

    42r2-win-cygwin.zip
    42r2-win-vnet.zip
    42r2-win-vs2005.zip
    42r2-win-vs6.zip
---

But like I said before, this distributions doesn't carry debugging 
library.  So, like you said, in this case we need to download the source 
from:

ftp://ftp.hdfgroup.org/HDF/HDF_Current/src/  [+ Zlib, Jpeg, Szip ]

Change the compiler setting to generate debug libraries and build the 
whole thing again.

I needed to do that anyway to update my old 415r2 version. :)

Thank you very much.

Best regards,

Ivan


From warmerdam at pobox.com  Mon Oct 29 04:27:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Release 1.4.3RC2 as 1.4.3
Message-ID: <47259963.5030202@pobox.com>

Motion: To release 1.4.3RC2 as 1.4.3

---

Once again, starting the timer for a release on Tuesday evening if
no serious problems are found.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Oct 29 05:23:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: Motion: Release 1.4.3RC2 as 1.4.3
In-Reply-To: <47259963.5030202@pobox.com>
References: <47259963.5030202@pobox.com>
Message-ID: <4725A67F.2060903@pobox.com>

Frank Warmerdam wrote:
> Motion: To release 1.4.3RC2 as 1.4.3
> 
> ---
> 
> Once again, starting the timer for a release on Tuesday evening if
> no serious problems are found.
> 
> Best regards,

Folks,

Garr.  Ok, I'm -1 on RC2.  The pymod/gdal_wrap.c has an older timestamp
than pymod/gdal.i because of the vagarities of how svn checkout works, and
this results in builds of the old python bindings running the (likely) wrong
version of swig, and gdal_wrap.c being screwed up.

   http://trac.osgeo.org/gdal/ticket/1954

I've fixed (worked around) one aspect of this and I'm asking Mateusz to
modify mkgdaldist.sh (used to prepare release and nightly snapshots) to
use svn export instead of svn checkout.  Apparently svn export uses file
dates of last commit instead of the date at checkout.

Sorry for raising a motion only to vote it down myself a few minutes later.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Oct 29 04:47:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Re: Motion: Release 1.4.3RC2 as 1.4.3
In-Reply-To: <4725A67F.2060903@pobox.com>
References: <47259963.5030202@pobox.com> <4725A67F.2060903@pobox.com>
Message-ID: <47259E1B.8090303@loskot.net>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: To release 1.4.3RC2 as 1.4.3
>>
>> ---
>>
>> Once again, starting the timer for a release on Tuesday evening if
>> no serious problems are found.
>>
>> Best regards,
> 
> Folks,
> 
> Garr.  Ok, I'm -1 on RC2.  The pymod/gdal_wrap.c has an older timestamp
> than pymod/gdal.i because of the vagarities of how svn checkout works, and
> this results in builds of the old python bindings running the (likely)
> wrong
> version of swig, and gdal_wrap.c being screwed up.
> 
>   http://trac.osgeo.org/gdal/ticket/1954
> 
> I've fixed (worked around) one aspect of this and I'm asking Mateusz to
> modify mkgdaldist.sh (used to prepare release and nightly snapshots) to
> use svn export instead of svn checkout.  Apparently svn export uses file
> dates of last commit instead of the date at checkout.

Frank,

I applied requested fixes and closed the ticket as fixed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 29 04:56:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL 1.4.3 Release Candidate 3
Message-ID: <4725A052.6090506@loskot.net>

Folks,

This is announcement of new Release Candidate of GDAL 1.4.3.
The only update is patch fixing problem that Frank reported today:

http://trac.osgeo.org/gdal/ticket/1954

and shortly discussed here:

http://lists.maptools.org/pipermail/gdal-dev/2007-October/014651.html



GDAL 1.4.3 Release Candidate 3
------------------------------

65 tickets were addressed:

http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3

The NEWS is available at:

http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News

Source packages with 1.4.3 "Release Candidate 3" are available at:

http://download.osgeo.org/gdal/gdal143rc3.zip
http://download.osgeo.org/gdal/gdal-1.4.3rc3.tar.gz

We would be thankful for testing and reporting any issues.	

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jean-claude.repetto at worldonline.fr  Mon Oct 29 07:29:54 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Patch] Problem with gdal_translate with the parameter
	-a_ullr 0 0 x x
In-Reply-To: <471FD077.6010203@pobox.com>
References: <471DEDFE.3010301@worldonline.fr> <471E65C6.3090300@worldonline.fr>
	<471F1B90.6010103@worldonline.fr> <471FBE85.1050008@loskot.net>
	<471FD077.6010203@pobox.com>
Message-ID: <4725C432.7010406@worldonline.fr>

Frank Warmerdam a ?crit :
> Mateusz Loskot wrote:
>> Jean-Claude Repetto wrote:
>>> Jean-Claude Repetto wrote :
>>>> The ECW file is correct. I have checked it by reading it directly with
>>>> the ECW library.
>>>> The bug occurs when GDAL reads the file. I have looked at the source
>>>> code (version 1.4.2), and it seems the bug is in the file
>>>> ecwdataset.cpp .
>>> This is a patch that I propose :
>>>
>>> --- frmts/ecw/ecwdataset.cpp.orig       2007-10-24 11:35:44.000000000 
>>> +0200
>>> +++ frmts/ecw/ecwdataset.cpp    2007-10-24 11:41:59.000000000 +0200
>>> @@ -1539,9 +1539,9 @@
>>>
>>>      if( psFileInfo->fOriginX != 0.0
>>>          || psFileInfo->fOriginY != 0.0
>>> -        && (psFileInfo->fCellIncrementX != 0.0 &&
>>> +        || (psFileInfo->fCellIncrementX != 0.0 &&
>>>              psFileInfo->fCellIncrementX != 1.0)
>>> -        && (psFileInfo->fCellIncrementY != 0.0 &&
>>> +        || (psFileInfo->fCellIncrementY != 0.0 &&
>>>              psFileInfo->fCellIncrementY != 1.0) )
>>>      {
>>>          bGeoTransformValid = TRUE;
>>>
>>>
>>> With this patch applied to GDAL 1.4.2, both gdalinfo and qgis give
>>> correct results.
>>
>> Jean-Claude,
>>
>> Please, submit this patch as a ticket. We will test it. Thanks!
> 
> Jean-Claude / Mateusz,
> 
> This patch looks reasonable to me, and once the ticket is filed should
> likely be applied in 1.4 as well as trunk.
> 
> Best regards,
> 

Hi,

I have filled a ticket for this bug (#1935), but it seems that the patch 
has not been applied to 1.4.3 . Does it need more investigation ?

Regards,
Jean-Claude


From mateusz at loskot.net  Mon Oct 29 08:14:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Patch] Problem with gdal_translate with the parameter
	-a_ullr 0 0 x x
In-Reply-To: <4725C432.7010406@worldonline.fr>
References: <471DEDFE.3010301@worldonline.fr>
	<471E65C6.3090300@worldonline.fr>	<471F1B90.6010103@worldonline.fr>
	<471FBE85.1050008@loskot.net>	<471FD077.6010203@pobox.com>
	<4725C432.7010406@worldonline.fr>
Message-ID: <4725CE97.9060700@loskot.net>

Jean-Claude Repetto wrote:
> Frank Warmerdam a ?crit :
>> Mateusz Loskot wrote:
>>> Jean-Claude Repetto wrote:
>>>> Jean-Claude Repetto wrote :
>>>>> The ECW file is correct. I have checked it by reading it directly with
>>>>> the ECW library.
>>>>> The bug occurs when GDAL reads the file. I have looked at the source
>>>>> code (version 1.4.2), and it seems the bug is in the file
>>>>> ecwdataset.cpp .
>>>> This is a patch that I propose :
>>>>
>>>> --- frmts/ecw/ecwdataset.cpp.orig       2007-10-24
>>>> 11:35:44.000000000 +0200
>>>> +++ frmts/ecw/ecwdataset.cpp    2007-10-24 11:41:59.000000000 +0200
>>>> @@ -1539,9 +1539,9 @@
>>>>
>>>>      if( psFileInfo->fOriginX != 0.0
>>>>          || psFileInfo->fOriginY != 0.0
>>>> -        && (psFileInfo->fCellIncrementX != 0.0 &&
>>>> +        || (psFileInfo->fCellIncrementX != 0.0 &&
>>>>              psFileInfo->fCellIncrementX != 1.0)
>>>> -        && (psFileInfo->fCellIncrementY != 0.0 &&
>>>> +        || (psFileInfo->fCellIncrementY != 0.0 &&
>>>>              psFileInfo->fCellIncrementY != 1.0) )
>>>>      {
>>>>          bGeoTransformValid = TRUE;
>>>>
>>>>
>>>> With this patch applied to GDAL 1.4.2, both gdalinfo and qgis give
>>>> correct results.
>>>
>>> Jean-Claude,
>>>
>>> Please, submit this patch as a ticket. We will test it. Thanks!
>>
>> Jean-Claude / Mateusz,
>>
>> This patch looks reasonable to me, and once the ticket is filed should
>> likely be applied in 1.4 as well as trunk.
>>
>> Best regards,
>>
> 
> Hi,
> 
> I have filled a ticket for this bug (#1935), but it seems that the patch
> has not been applied to 1.4.3 . Does it need more investigation ?

Jean-Claude,

It does not need more investigation and Frank approved the patch above,
but as I see, the ticket was not assigned to milestone 1.4.3
and that's why it hasn't been applied to the 1.4.3.

I always follow roadmap [1] of current milestone.
Frank assigns tickets to a milestone.

[1] http://trac.osgeo.org/gdal/roadmap

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From christian.mueller at nvoe.at  Mon Oct 29 08:46:26 2007
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Anoucement: new gdal utility gdal_retile.py
Message-ID: <20071029124626.8805.qmail@mail.linux4all.at>

There is a new gdal utility  "gdal_retile.py" which offers 

1) Tiling an image
2) Retiling an already tiled image (into smaller or larger tiles)
3) Building tiled pyramids
4) creating shape files to provide a spatial index
5) Propagating the srs if available and where possible (to the new tiles, 
the pyramid tiles and the shape files) 

The Ticket Number is 1921 

Feedback is welcome, if you detect a bug please mail to me, for each bugfix 
i will write an unit test. 

christian

From warmerdam at pobox.com  Mon Oct 29 10:34:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
Message-ID: <4725EF8D.2000900@pobox.com>

Motion: Adopt 1.4.3rc3 as 1.4.3

Starting the timer on rc3 becoming our 1.4.3 final release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maplabs at light42.com  Mon Oct 29 12:49:18 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
Message-ID: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>

Hi All-

   I am still getting used to the details of GDAL/OGR. I found the 
output of the configure script to be a little confusing regarding NG, 
or Next Gen bindings and building. Howard Butler clarified it pretty 
well, so I am repeating that here. I hope this helps others with this 
build.

   NG Bindings, or Next Gen, means SWIG. So if you are using a SWIG 
binding in any language, that is NG.   -  Originally there was python 
only, in a directory called pymod, and that alone is not NG. With 1.4.3 
you can still specifiy the pymod python interface.

   --with-python  => pymod interfaces
   --without-python  --with-ngpython  =>  SWIG python, these are the 
preferred interfaces in the future

   On the Macintosh, I have a new Framework python installed, version 
2.5.x. Configure will not find that. You can tell configure to put your 
python support files in the framework python on the Mac. It seems to be 
this

   --with-pymoddir=/Library/Frameworks/Python.framework/Versions/Current/

  hth
   -Brian


From woklist at kyngchaos.com  Mon Oct 29 13:27:50 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
Message-ID: <9E892CC3-B2F8-4AFA-9D40-90BE64C96E97@kyngchaos.com>

Either new or old python options should correctly find the Python 2.5  
framework.  But I think Python needs to be in your PATH.  This is  
correctly set when you install the Python framework, and there is also  
an option to put symlinks in /usr/local/bin.

If you have another Python somewhere earlier in your PATH, this will  
be found instead.


PS. a warning for Leopard users: Leopard includes python 2.5, properly  
universal and 32+64bit (ie 4-arch), so you probably shouldn't install  
the Tiger Python 2.5 framework on Leopard.  But also, that means that  
python on leopard will try to build all 4 archs by default (for the  
ngpython bindings).

On Oct 29, 2007, at 11:49 AM, Brian Hamlin wrote:

> Hi All-
>
>  I am still getting used to the details of GDAL/OGR. I found the  
> output of the configure script to be a little confusing regarding  
> NG, or Next Gen bindings and building. Howard Butler clarified it  
> pretty well, so I am repeating that here. I hope this helps others  
> with this build.
>
>  NG Bindings, or Next Gen, means SWIG. So if you are using a SWIG  
> binding in any language, that is NG.   -  Originally there was  
> python only, in a directory called pymod, and that alone is not NG.  
> With 1.4.3 you can still specifiy the pymod python interface.
>
>  --with-python  => pymod interfaces
>  --without-python  --with-ngpython  =>  SWIG python, these are the  
> preferred interfaces in the future
>
>  On the Macintosh, I have a new Framework python installed, version  
> 2.5.x. Configure will not find that. You can tell configure to put  
> your python support files in the framework python on the Mac. It  
> seems to be this
>
>  --with-pymoddir=/Library/Frameworks/Python.framework/Versions/ 
> Current/
>
> hth
>  -Brian
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Mon Oct 29 13:37:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: Re: [Qgis-developer] Python bindings, GDAL,
 and SIP file help needed]
Message-ID: <47261A3E.9090803@loskot.net>

Folks,

There is some discussion on the Quantum GIS developers list,
about GDAL, SWIG and Python bindings and...using them with SIP (whatever
it is). Perhaps someone from Python bindings gurus here could provide
QGIS team with some helpful notes. The SWIG/SIP problems are pushing
some folks to development new GDAL Python bindings, what I personally
consider as reinventing the wheel option.

-- Mateusz

-------- Original Message --------
Date: Mon, 29 Oct 2007 13:28:32 -0400
From: Peter Ersts <ersts@amnh.org>
To: Martin Dobias <wonder.sk@gmail.com>
Subject: Re: [Qgis-developer] Python bindings, GDAL, and SIP file help

Martin Dobias wrote:
> I'm glad to see that you're trying to keep bindings up-to-date :)
>   

*trying* being the operative word here ;)

>> The basic SIP layout I have figured out by looking at the other SIP
>> files, but I am running into problems referencing GDAL enums. I need
>> access to GDALDataType, which is in gdal.h. Do I need to make another
>> SIP file for gdal.h?
>>     
>
> In this case I see several possibilities:
> - do not wrap functions which need some external classes/enums
> - wrap also that enum in a sip file
> - replace that enum with some native qgis enum, use that one in functions
>
> I would prefer the last option as it is the cleanest one. It's better
> to have own types in public API instead of types of some 3rd party
> tools / libraries. Moreover I think that what we would like to reach
> in future is that raster layers implementation would be independent
> from GDAL, so using own data type makes sense...
>   
I don't really see #1 as an medium to long term option. From a python
perspective it would kind of defeat the purpose of this initial
refactoring. So I figured I would just try to tackle this issue from the
start.

I had thought of this last option already and think that looks like the
better way to go for the time being. I know that GDAL has python
bindings, but a bit of searching did not end in any information about
how to use SWIG and SIP together ( I think this is mentioned in a few
e-mails that followed your initial reponse).

As for not relying on 3rd party tools / libraries, I can only agree with
this to a point. I think that 3rd party library should be very very
carefully consider before being used and becoming a dependency. If there
are only a few methods or the methods are simple enough then yes, they
should be written natively in QGIS. Otherwise, if the library is well
written, extensive, well established, and actively being develop, then I
don't see there being such an issue leveraging that library. If the
developer pool were to be large enough in the future, then total
independence could be a long term goal.

Thanks again, I am sure I will have other SIP questions to pass your way!

-Pete

-- 
====================================
Peter J. Ersts, Project Specialist
American Museum of Natural History
Center for Biodiversity and Conservation
Central Park West at 79th Street
New York, New York 10024
Tel: (212)-496-3488 or (212)-769-5742
Fax: (212)-313-7295 or (212)-769-5292
Web: http://cbc.amnh.org
Web: http://geospatial.amnh.org

Open Source, Open Mind.
...evolving through community cooperation to change the world bit by bit


_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.qgis.org
http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer


-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Mon Oct 29 15:29:06 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <9BD952C0-8648-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
	<9E892CC3-B2F8-4AFA-9D40-90BE64C96E97@kyngchaos.com>
	<9BD952C0-8648-11DC-8D80-000A277A733C@light42.com>
Message-ID: <0B397BB4-1AD8-47EB-8612-12EA436D5E99@kyngchaos.com>

On Oct 29, 2007, at 12:58 PM, Brian Hamlin wrote:

> Hi William
>
> my path is simply /usr/bin before /usr/local/bin
> if I read you correctly, you are suggesting I have /usr/local/bin  
> before /usr/bin
>  I just haven't adjusted unix t that extent at all - maybe its fine
>
/usr/local/bin should be before /usr/bin.  Otherwise any user  
additions in /usr/local/bin that also exist in /usr/bin will never be  
used.  Python is one of those, if you opted for the python symlinks  
(the Unix Tools option).

But the Profile Changes option should have added a direct path to the  
Python binary to your PATH.  If it's there, it also should be before / 
usr/bin.

> there is some translation from those two to the /System/Library and / 
> Library/Frameworks dirs
>  I havent messed with that
>
> I think my suggestion on the list for the path will work for people,  
> regardless
> of course I appreciate your insight - you move mountains with your  
> custom packages
>
It should be a suggestion for when there are problems, as a last  
resort.  In normal situations, it should just work.  If not, check  
PATH settings.  Then force it, if all else fails, with the pymoddir  
option.

> last thing while I have you here...
> the XCode projects aren't actually good for debugging.. we spoke  
> about this a tiny bit months ago
> I am probably not the one to fix it. but I have floated a proposal  
> to Frank that I work on some bugs for 1.5
>  in which case I pretty much will have to make some kind of projects  
> that work to debug
>  potentially thats a big topic!
>
I'm ditching my Xcode project for GDAL 1.5.  I'm working on getting  
the configure-make framework build back to a usable state - mostly  
ready, except for the ng-python build.

Do you know anything about libtool?

>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a  
bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From maplabs at light42.com  Mon Oct 29 15:42:57 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
Message-ID: <26448932-8657-11DC-8D80-000A277A733C@light42.com>

(I've been talking to William K. off-list) The short Macintosh-specific 
answer seems to be:

If you have /usr/local/bin _before_ /usr/bin in your path, the python 
install should work without help

    the pymoddir path I suggested is correct, but should only be needed 
if there are problems

   -Brian

On Oct 29, 2007, at 8:49 AM, Brian Hamlin wrote:

> Hi All-
>
>   I am still getting used to the details of GDAL/OGR. I found the 
> output of the configure script to be a little confusing regarding NG, 
> or Next Gen bindings and building. Howard Butler clarified it pretty 
> well, so I am repeating that here. I hope this helps others with this 
> build.
>
>   NG Bindings, or Next Gen, means SWIG. So if you are using a SWIG 
> binding in any language, that is NG.   -  Originally there was python 
> only, in a directory called pymod, and that alone is not NG. With 
> 1.4.3 you can still specifiy the pymod python interface.
>
>   --with-python  => pymod interfaces
>   --without-python  --with-ngpython  =>  SWIG python, these are the 
> preferred interfaces in the future
>
>   On the Macintosh, I have a new Framework python installed, version 
> 2.5.x. Configure will not find that. You can tell configure to put 
> your python support files in the framework python on the Mac. It seems 
> to be this
>
>   
> --with-pymoddir=/Library/Frameworks/Python.framework/Versions/Current/
>
>  hth
>   -Brian
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From Chris.Barker at noaa.gov  Mon Oct 29 16:51:35 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <26448932-8657-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
	<26448932-8657-11DC-8D80-000A277A733C@light42.com>
Message-ID: <472647D7.9090800@noaa.gov>

Brian Hamlin wrote:
> If you have /usr/local/bin _before_ /usr/bin in your path, the python 
> install should work without help

not quite. You need whatever place the python binaries are in your path. 
By default the framework builds installer adds the right path to your 
.profile (or whatever). For example, on my system:

cbarker$ which python
/Library/Frameworks/Python.framework/Versions/Current/bin/python

and that is on my PATH.

As William said, there is a "Unix tools" or something option that will 
put in sym links in /usr/local/bin for you too.

Key is that what you get when you type "python" on the command line 
should be what the GDAL build system finds.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Mon Oct 29 17:19:30 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: Re: [Qgis-developer] Python bindings, GDAL,
	and SIP file help needed]
In-Reply-To: <47261A3E.9090803@loskot.net>
References: <47261A3E.9090803@loskot.net>
Message-ID: <47264E62.3040605@noaa.gov>

Mateusz Loskot wrote:
> There is some discussion on the Quantum GIS developers list,
> about GDAL, SWIG and Python bindings and..

Thanks for he heads up -- I've gone and joined that list...

.using them with SIP (whatever it is).

SIP is a SWIG-like system for generating python bindings to C++ code. It 
was developed for and is used by PyQT, and thus for QGIS.

> Perhaps someone from Python bindings gurus here could provide
> QGIS team with some helpful notes. The SWIG/SIP problems are pushing
> some folks to development new GDAL Python bindings, what I personally
> consider as reinventing the wheel option.

A agree -- better to add features to the GDAL SWIG bindings than have a 
whole other set!

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From maplabs at light42.com  Mon Oct 29 17:24:50 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <472647D7.9090800@noaa.gov>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
	<26448932-8657-11DC-8D80-000A277A733C@light42.com>
	<472647D7.9090800@noaa.gov>
Message-ID: <61A6D496-8665-11DC-8D80-000A277A733C@light42.com>


On Oct 29, 2007, at 12:51 PM, Christopher Barker wrote:
> Brian Hamlin wrote:
>> If you have /usr/local/bin _before_ /usr/bin in your path, the python 
>> install should work without help
>
> not quite. You need whatever place the python binaries are in your 
> path. By default the framework builds installer adds the right path to 
> your .profile (or whatever). For example, on my system:
>
> cbarker$ which python
> /Library/Frameworks/Python.framework/Versions/Current/bin/python
>
> and that is on my PATH.
>

:-)   well, this is apparently not 100% settled out there
I used the Mac specific installer for python 2.5.1, and I didn't get 
anything like that
I have a /usr/bin and /usr/local/bin  which end up calling either
  /System/Library or /Library/Frameworks  pythons

typing `which python` results in the unix-style, not Mac specific, 
paths on my OS X 10.10
I use `which python` to unravel this regularly
`env` clearly shows the PATH contents, on any of my several active 
logins

I was sincerely hoping to stay out of this.. *sigh*
I trust that Chris and William and Howard will get this worked out
I thought that my post would be simple enough to be helpful to the 
casual user, as I aspired to be

best
   -Brian

> As William said, there is a "Unix tools" or something option that will 
> put in sym links in /usr/local/bin for you too.
>
> Key is that what you get when you type "python" on the command line 
> should be what the GDAL build system finds.
>
> -Chris
>
>
> -- 
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov


From Chris.Barker at noaa.gov  Mon Oct 29 17:32:15 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <61A6D496-8665-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
	<26448932-8657-11DC-8D80-000A277A733C@light42.com>
	<472647D7.9090800@noaa.gov>
	<61A6D496-8665-11DC-8D80-000A277A733C@light42.com>
Message-ID: <4726515F.6020703@noaa.gov>



Brian Hamlin wrote:
> I used the Mac specific installer for python 2.5.1, and I didn't get 
> anything like that

oh well.

> I thought that my post would be simple enough to be helpful to the 
> casual user, as I aspired to be

I think the key is this:

>> what you get when you type "python" on the command line 
>> should be what the GDAL build system finds.

If that's not the case, then we need to fix the GDAL build system.

If a user doesn't get the python they want when they type "python", then 
it is a python install issue, and help can be found on the python-mac 
mailing list.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Mon Oct 29 18:43:08 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.3 build and NG bindings
In-Reply-To: <61A6D496-8665-11DC-8D80-000A277A733C@light42.com>
References: <E3CF72FD-863E-11DC-8D80-000A277A733C@light42.com>
	<26448932-8657-11DC-8D80-000A277A733C@light42.com>
	<472647D7.9090800@noaa.gov>
	<61A6D496-8665-11DC-8D80-000A277A733C@light42.com>
Message-ID: <735C3102-4BE8-4E7A-98A7-CE55FC05AA2A@kyngchaos.com>

On Oct 29, 2007, at 4:24 PM, Brian Hamlin wrote:

> :-)   well, this is apparently not 100% settled out there
> I used the Mac specific installer for python 2.5.1, and I didn't get  
> anything like that
> I have a /usr/bin and /usr/local/bin  which end up calling either
> /System/Library or /Library/Frameworks  pythons
>
The /Library/frameworks one should be the correct python 2.5.

Have you upgraded your system a few times from before 10.3?  The old  
default tcsh init files might interfere with the bash init files (it's  
been so long, but I think it happened to me).  I can't remember what  
these files are.

Or maybe something is simply overriding PATH in .bash_profile after  
the python path is added.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy



From Chris.Barker at noaa.gov  Mon Oct 29 19:41:11 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <B6E63097-B22D-47E2-97C0-DBEDF778A01C@kyngchaos.com>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<472130CA.8050302@noaa.gov>
	<B6E63097-B22D-47E2-97C0-DBEDF778A01C@kyngchaos.com>
Message-ID: <47266F97.7010300@noaa.gov>

William et al,

NOTE: This is all SVN trunk, on OS-X 10.4.10

I've got close!

It looks like I have GDAL building Universally, and the python bindings 
building, but something went wrong in the install stage. It looks like 
I've got the Framework mostly OK, but when I try to import geos.gdal, I get:

ImportError: 
dlopen(/Users/cbarker/.python-eggs/GDAL_OGR-1.5.0-py2.5-macosx-10.3-fat.egg-tmp/osgeo/_gdal.so, 
2): Library not loaded: 
/Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib
   Referenced from: 
/Users/cbarker/.python-eggs/GDAL_OGR-1.5.0-py2.5-macosx-10.3-fat.egg-tmp/osgeo/_gdal.so
   Reason: image not found

indeed, there is no:
/Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib

but there is a:

/Library/Frameworks/GDAL.framework/Versions/1.5/GDAL

and a:

/Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/libgdal.dylib

which is a link to the "GDAL" file above.

I made another link to it:

$ ln -s GDAL libgdal.1.dylib

and now osgeo.gdal imports OK -- I've yet to test.


A few other questions:

The utilities are getting put in:

/Library/Frameworks/GDAL.framework/Versions/1.5/Programs

Is that the Apple standard? Should/could there be symlinks in 
/usr/local/bin also? I hate adding all that stuff to my $PATH.

Here is how I configured it:

#!/bin/sh

## simple script to run configure for GDAL on OS-X

# ccub and c++ub are little utilities that sets up gcc to build Universal.
# From: http://www.macosxhints.com/article.php?story=20061025213851279
export CC=ccub
export CXX=c++ub

./configure --with-python --with-macosx-framework \
--with-png=/Library/Frameworks/UnixImageIO.framework/unix \
--with-tiff=/Library/Frameworks/UnixImageIO.framework/unix \
--with-gif=/Library/Frameworks/UnixImageIO.framework/unix \
--with-jasper=/Library/Frameworks/UnixImageIO.framework/unix \
--with-xerces=/Library/Frameworks/Xerces.framework/unix  \

# python SwitchEndianDefines.py # still a bit of a bug there!

Enclosed is SwitchEndianDefnines.py -- though it's not quite right -- C 
comments sure are a pain! -- it's be really nice to get ./configure to 
do that right instead. It seems we should be able to come up with 
something that would work most everywhere.

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SwitchEndianDefines.py
Type: text/x-python
Size: 1110 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071029/ee663d99/SwitchEndianDefines.py
From woklist at kyngchaos.com  Mon Oct 29 20:36:44 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Universal GDAL build on OS-X ??
In-Reply-To: <47266F97.7010300@noaa.gov>
References: <5CFB261A-DAB0-4B52-98A5-B40B0D689A9C@gmail.com>
	<C98ECB08-0B21-4F0B-8595-5ADAAFAC224D@kyngchaos.com>
	<472130CA.8050302@noaa.gov>
	<B6E63097-B22D-47E2-97C0-DBEDF778A01C@kyngchaos.com>
	<47266F97.7010300@noaa.gov>
Message-ID: <53A4D23D-22DC-41DD-AEA3-BE5CD76F5DF3@kyngchaos.com>

On Oct 29, 2007, at 6:41 PM, Christopher Barker wrote:

> William et al,
>
> NOTE: This is all SVN trunk, on OS-X 10.4.10
>
> I've got close!
>
> It looks like I have GDAL building Universally, and the python  
> bindings building, but something went wrong in the install stage. It  
> looks like I've got the Framework mostly OK, but when I try to  
> import geos.gdal, I get:
>
> ImportError: dlopen(/Users/cbarker/.python-eggs/GDAL_OGR-1.5.0-py2.5- 
> macosx-10.3-fat.egg-tmp/osgeo/_gdal.so, 2): Library not loaded: / 
> Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib
> Referenced from: /Users/cbarker/.python-eggs/GDAL_OGR-1.5.0-py2.5- 
> macosx-10.3-fat.egg-tmp/osgeo/_gdal.so
> Reason: image not found
>
> indeed, there is no:
> /Library/Frameworks/GDAL.framework/Versions/1.5/libgdal.1.dylib
>
> but there is a:
>
> /Library/Frameworks/GDAL.framework/Versions/1.5/GDAL
>
> and a:
>
> /Library/Frameworks/GDAL.framework/Versions/1.5/unix/lib/libgdal.dylib
>
> which is a link to the "GDAL" file above.
>
> I made another link to it:
>
> $ ln -s GDAL libgdal.1.dylib
>
> and now osgeo.gdal imports OK -- I've yet to test.
>
Right.  Known problem.  I mentioned it to Frank, but didn't do a bug  
report yet.  The problem is that the framework build does its stuff  
during install because currently libtool can directly make "GDAL" as  
the libname but must create "libgdal.dylib".  So install_name_tool is  
used during install.

But, the path to the ng python install is not known to the GDAL  
makefiles, that is handled by distutils/setuptools, so it can't run  
install_name_tool on it.

I can hack libtool to do it right, but I don't know if it's possible  
to configure libtool to do it right.

The other possibility is some other option to distutils/setuptools to  
completely override the python install path, then install_name_tool  
could be used.

I'm waiting on some decision about where to install the python  
extensions - the system path (the problem would remain), or alongside  
GDAL (can use install_name_tool).

Or maybe there is something that can be done in the makefile to  
determine the python install path?


> A few other questions:
>
> The utilities are getting put in:
>
> /Library/Frameworks/GDAL.framework/Versions/1.5/Programs
>
> Is that the Apple standard? Should/could there be symlinks in /usr/ 
> local/bin also? I hate adding all that stuff to my $PATH.
>
It's really my standard, to keep the whole package selfcontained.   
With my binary release I do include a script to create symlinks in / 
usr/local/bin.  But I'm not a unix stickler like some, so I don't mind  
having a long PATH.

The unix symlinks are also my stuff - I call it the "unix  
compatibility" part.  So the frameworks can easily be used in packages  
that don't know about frameworks.

>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From mateusz at loskot.net  Tue Oct 30 06:44:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: Re: [Qgis-developer] Python bindings, GDAL,
	and SIP file help needed]
In-Reply-To: <47264E62.3040605@noaa.gov>
References: <47261A3E.9090803@loskot.net> <47264E62.3040605@noaa.gov>
Message-ID: <47270B13.1000207@loskot.net>

Christopher Barker wrote:
> Mateusz Loskot wrote:
>> There is some discussion on the Quantum GIS developers list,
>> about GDAL, SWIG and Python bindings and..
> 
> Thanks for he heads up -- I've gone and joined that list...

Christopher,

Thanks!

>> .using them with SIP (whatever it is).
> 
> SIP is a SWIG-like system for generating python bindings to C++ code. It
> was developed for and is used by PyQT, and thus for QGIS.

I see, now it's more clear to me.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From rdespain at harris.com  Tue Oct 30 12:14:03 2007
From: rdespain at harris.com (DeSpain, Ronald)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] FWtools vs gdal version incompatibility???
Message-ID: <0162F3FFEA95A14CB3BE0F4B9E4BF7F01A6C24@mlbe2k4.cs.myharris.net>

1] I use FWtools on the PC to prototype processing using gdal_translate
and I compile gdal apps along with Kakadu on our production SGI system.
We are recently having problems with converting NITFJp2 to GTiff when
the output file is larger than 2G on the SGI.  The same calls work fine
on the PC running FWtools.  I'm using gdal 1.3.1 in both instances
(FWtools1.0.0a7) and I include the KAK dll in the FWtools1.0..
directory.   The newest FWtools also works to make BIGTiffs ( I've made
one that is 11GB) and OpenEv opens it fine.

 

The call is simply :  gdal_translate -of GTiff <infilejp2.ntf>
<outfile.tif>

 

The output file does not start out with II or MM, (bad tiff header).

 

2] Is there a historical change list on line which identifies which
version of gdal is in FWtools versions as well as changes to gdal so I
can sync the version on the PC and SGI and LINUX?

 

rdespain@harris.com

321 984 5977

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071030/adb09c7a/attachment.html
From warmerdam at pobox.com  Tue Oct 30 13:15:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] FWtools vs gdal version incompatibility???
In-Reply-To: <0162F3FFEA95A14CB3BE0F4B9E4BF7F01A6C24@mlbe2k4.cs.myharris.net>
References: <0162F3FFEA95A14CB3BE0F4B9E4BF7F01A6C24@mlbe2k4.cs.myharris.net>
Message-ID: <4727669A.1010709@pobox.com>

DeSpain, Ronald wrote:
> 1] I use FWtools on the PC to prototype processing using gdal_translate 
> and I compile gdal apps along with Kakadu on our production SGI system. 
>   We are recently having problems with converting NITFJp2 to GTiff when 
> the output file is larger than 2G on the SGI.  The same calls work fine 
> on the PC running FWtools.  I?m using gdal 1.3.1 in both instances 
> (FWtools1.0.0a7) and I include the KAK dll in the FWtools1.0.. 
> directory.   The newest FWtools also works to make BIGTiffs ( I?ve made 
> one that is 11GB) and OpenEv opens it fine.
> 
> The call is simply :  gdal_translate ?of GTiff <infilejp2.ntf> <outfile.tif>
> 
> The output file does not start out with II or MM, (bad tiff header).

Ronald,

I *suspect* that your GDAL build on the SGI is not properly linking
into "large file API", and JP2 output to NITF files goes through the
GDAL VSI*L API.  I would pursue this as a configuration issue.  When
I configure on Linux the configure output includes these messages:

checking whether byte ordering is bigendian... no
checking for 64bit integer type... long long
checking for 64bit file io... yes
checking for stat64... yes
checking for fopen64... yes
checking for int... yes

Could you check what configure says for these items on your system?

> 2] Is there a historical change list on line which identifies which 
> version of gdal is in FWtools versions as well as changes to gdal so I 
> can sync the version on the PC and SGI and LINUX?

No. But FWTools is built from "svn head" as captured within a day or
so of it being posted to the web site.  So just look at the date of
the file on the site (or the date on the executables in the tar/zip)
and extract from svn as of that date (for GDAL).

Generally speaking it is important to realize that FWTools is a
"bleeding edge from subversion" set of binaries, and that it is
not professionally prepared.  I build it in a manner that is
convenient and a light work load for me.  And that means limited
effort to track what goes into what or even to do testing before
I post the package.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue Oct 30 14:10:11 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <4725EF8D.2000900@pobox.com>
References: <4725EF8D.2000900@pobox.com>
Message-ID: <47277383.4030406@gov.yk.ca>

Frank Warmerdam wrote:
> Motion: Adopt 1.4.3rc3 as 1.4.3
> 
> Starting the timer on rc3 becoming our 1.4.3 final release.

Hello all,

I'm glad to see a formal process for transitioning from dev to release. 
It will be easier to see at a glance where things are. I wonder if 
perhaps the "Release Candidate" to "Release" timespan is too short 
though. One or two days seems awfully fast to me.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Oct 30 14:28:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <47277383.4030406@gov.yk.ca>
References: <4725EF8D.2000900@pobox.com> <47277383.4030406@gov.yk.ca>
Message-ID: <472777C6.1080803@pobox.com>

Matt Wilkie wrote:
> Frank Warmerdam wrote:
>> Motion: Adopt 1.4.3rc3 as 1.4.3
>>
>> Starting the timer on rc3 becoming our 1.4.3 final release.
> 
> Hello all,
> 
> I'm glad to see a formal process for transitioning from dev to release. 
> It will be easier to see at a glance where things are. I wonder if 
> perhaps the "Release Candidate" to "Release" timespan is too short 
> though. One or two days seems awfully fast to me.

Matt,

Certainly the intention is to have a fuller release cycle for major
releases, but stable (point) releases I *feel* that this is not so pressing.
Two days basically gives time for folks to run some quick tests to ensure
the packaged form of the release has no glaring new problems.

For 1.5.0 I expect to go through 2-3 releases (betas) before a final
release candidate.

Does that seem reasonable?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue Oct 30 14:50:11 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <472777C6.1080803@pobox.com>
References: <4725EF8D.2000900@pobox.com> <47277383.4030406@gov.yk.ca>
	<472777C6.1080803@pobox.com>
Message-ID: <47277CE3.7070706@gov.yk.ca>

> Two days basically gives time for folks to run some quick tests to ensure
> the packaged form of the release has no glaring new problems.
> 
> For 1.5.0 I expect to go through 2-3 releases (betas) before a final
> release candidate.
 >
> Does that seem reasonable?

I personally often go 3 or 4 days without catching up on my email. 
Perhaps that is unusual. If no one else speaks up then maybe I raised a 
caution flag unnecessarily. I'm conscious of being a pretty vocal gdal 
user, but that doesn't mean I reflect a significant portion of the user 
base. ;-)

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Chris.Barker at noaa.gov  Tue Oct 30 19:28:12 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: Re: [Qgis-developer] Python bindings, GDAL,
	and SIP file help needed]
In-Reply-To: <47270B13.1000207@loskot.net>
References: <47261A3E.9090803@loskot.net> <47264E62.3040605@noaa.gov>
	<47270B13.1000207@loskot.net>
Message-ID: <4727BE0C.1070206@noaa.gov>

Mateusz Loskot wrote:
> Christopher Barker wrote:
>> Mateusz Loskot wrote:
>>> There is some discussion on the Quantum GIS developers list,
>>> about GDAL, SWIG and Python bindings and..
>> Thanks for he heads up -- I've gone and joined that list...

> Thanks!

Well, except that my attempts to join this list haven't worked...

I'll go try again.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From woklist at kyngchaos.com  Tue Oct 30 19:52:17 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSX 10.5 - 64bits & python goodies
Message-ID: <796779AE-5233-481C-A94C-BFBA2EECF3A6@kyngchaos.com>

Finally got thru most of the dependencies on Leopard.  Not too much  
trouble building quad-arch (ppc/i386/ppc64/x86_64) - some extra  
fiddling with switching some definitions based on __LP64__.  And  
Xerces uses Carbon APIs to do some file IO and charset handling, and  
Carbon is deprecated in Leopard, AND there is no 64bit Carbon at all,  
so Xerces is going to take some work to build 64bit on Leopard.

So, Leopard now includes Python 2.5!  As I tried to build numpy for  
that it wouldn't build 64bit, but poking around in the stuff included  
by Apple turned up numpy 1.0.1 AND setuptools, among other goodies  
(easyinstall, wxpython, py2app, ...).


... back to Leopard and GDAL ...

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of  
the allied nations devoted an entire year exclusively to hating the  
____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From maplabs at light42.com  Tue Oct 30 21:47:58 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] OSX 10.5 - 64bits & python goodies
In-Reply-To: <796779AE-5233-481C-A94C-BFBA2EECF3A6@kyngchaos.com>
References: <796779AE-5233-481C-A94C-BFBA2EECF3A6@kyngchaos.com>
Message-ID: <4ED22FD0-8753-11DC-8D80-000A277A733C@light42.com>

On Oct 30, 2007, at 3:52 PM, William Kyngesburye wrote:

> Carbon is deprecated in Leopard, AND there is no 64bit Carbon at all

also
    http://www.javalobby.org/java/forums/t102936.html



From mateusz at loskot.net  Wed Oct 31 04:51:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: Re: [Qgis-developer] Python bindings, GDAL,
	and SIP file help needed]
In-Reply-To: <4727BE0C.1070206@noaa.gov>
References: <47261A3E.9090803@loskot.net>
	<47264E62.3040605@noaa.gov>	<47270B13.1000207@loskot.net>
	<4727BE0C.1070206@noaa.gov>
Message-ID: <472841F8.8080203@loskot.net>

Christopher Barker wrote:
> Mateusz Loskot wrote:
>> Christopher Barker wrote:
>>> Mateusz Loskot wrote:
>>>> There is some discussion on the Quantum GIS developers list,
>>>> about GDAL, SWIG and Python bindings and..
>>> Thanks for he heads up -- I've gone and joined that list...
> 
>> Thanks!
> 
> Well, except that my attempts to join this list haven't worked...
> 
> I'll go try again.

Chris,

Perhaps you can send your notes to me and I will forward them to the
QGIS list. Whatever is better for you. Thanks!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Wed Oct 31 10:34:22 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <4725EF8D.2000900@pobox.com>
References: <4725EF8D.2000900@pobox.com>
Message-ID: <20071031143422.GA14967@ak4719.spb.edu>

On Mon, Oct 29, 2007 at 10:34:53AM -0400, Frank Warmerdam wrote:
> Motion: Adopt 1.4.3rc3 as 1.4.3
> 
> Starting the timer on rc3 becoming our 1.4.3 final release.

+1

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dmorissette at mapgears.com  Wed Oct 31 11:18:23 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <4725EF8D.2000900@pobox.com>
References: <4725EF8D.2000900@pobox.com>
Message-ID: <47289CBF.1070200@mapgears.com>

Frank Warmerdam wrote:
> Motion: Adopt 1.4.3rc3 as 1.4.3
> 
> Starting the timer on rc3 becoming our 1.4.3 final release.
> 

+1 to release 1.4.3rc3 as 1.4.3

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From schut at sarvision.nl  Wed Oct 31 12:18:15 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] strange problem compiling against ndarrayobject.h
Message-ID: <4728AAC7.9060905@sarvision.nl>

Hi numpy and/or gdal guru's,

I'm suddenly getting into trouble compiling gdal's python extension,
when it includes ndarrayobject.h from numpy. First it complains about my
python not being unicode, though I am sure it is unicode, and then it
bails out with all kinds of errors (see snippet below).
Numpy people, please read on even though this might seem a gdal problem,
because it clearly is numpy related, see the snippet...

I've tried everything I could think of, but to no avail. I hope one of
you can give me a hint, because I'm kind of clueless, and even don't
know in what direction I should search...

Here is a paste from the output from building (python setup.py build) in
the gdal/swig/python dir.

make[2]: Entering directory `/usr/local/src/gdal/swig/python'
python setup.py build
numpy include /usr/lib64/python2.5/site-packages/numpy/core/include
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.5
copying gdal.py -> build/lib.linux-x86_64-2.5
copying ogr.py -> build/lib.linux-x86_64-2.5
copying osr.py -> build/lib.linux-x86_64-2.5
copying gdalconst.py -> build/lib.linux-x86_64-2.5
creating build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/__init__.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/osr.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/ogr.py -> build/lib.linux-x86_64-2.5/osgeo
running build_ext
building 'osgeo._gdal' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

creating build/temp.linux-x86_64-2.5
creating build/temp.linux-x86_64-2.5/extensions
compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/gdal_wrap.cpp
extensions/gdal_wrap.cpp: In function ?PyObject*
_wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*)?:
extensions/gdal_wrap.cpp:4570: warning: deprecated conversion from
string constant to ?char*?
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/gdal_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_gdal.so
building 'osgeo._gdalconst' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/gdalconst_wrap.c
x86_64-pc-linux-gnu-gcc -pthread -shared
build/temp.linux-x86_64-2.5/extensions/gdalconst_wrap.o -L../../.libs
-L../.. -L/usr/lib64 -lgdal -lpython2.5 -o
build/lib.linux-x86_64-2.5/osgeo/_gdalconst.so
building 'osgeo._osr' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/osr_wrap.cpp
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/osr_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_osr.so
building 'osgeo._ogr' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/ogr_wrap.cpp
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/ogr_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_ogr.so
building 'osgeo._gdal_array' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/_gdal_array.cpp
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
error: #error Must use Python with unicode enabled.
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h:105:1: warning: "PY_SSIZE_T_MAX" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:931:1:
warning: this is the location of the previous definition
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h:107:1: warning: "PY_SSIZE_T_MIN" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:932:1:
warning: this is the location of the previous definition
In file included from /usr/include/python2.5/Python.h:131,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/abstract.h:762:1: warning: "PyIndex_Check" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:937:1:
warning: this is the location of the previous definition
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:919:
error: ?Py_intptr_t? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:920:
error: ?Py_uintptr_t? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1012:
error: expected initializer before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: typedef ?PyArray_SetItemFunc? is initialized (use __typeof__ instead)
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: ?PyObject? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?,? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?void?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?void?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1015:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1015:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1016:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1026:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1026:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1028:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1028:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1029:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1031:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1041:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1043:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1044:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1044:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1046:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1050:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1052:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1053:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1056:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1056:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1069:
error: ISO C++ forbids declaration of ?PyArray_GetItemFunc? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1069:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1070:
error: ISO C++ forbids declaration of ?PyArray_SetItemFunc? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1070:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1121:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1121:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1171:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1190:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1190:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1194:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1194:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1203:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1203:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1213:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1214:
error: expected ?;? before ?char?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1216:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1216:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1217:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1217:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1219:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1219:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1229:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1229:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1238:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1246:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1249:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1253:
error: ?PyObject? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1395:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1396:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1397:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1398:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1399:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1400:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1401:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1402:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1542:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1543:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1544:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1545:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1547:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1596:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1600:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1602:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1604:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1606:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1622:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1624:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1624:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1799:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1799:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1800:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1800:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1802:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1802:
error: expected ?;? before ?*? token
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1814,
                 from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:
In function ?int _import_array()?:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?PyObject? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?numpy? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?PyImport_ImportModule? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:946:
error: ?c_api? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:948:
error: ?PyObject_GetAttrString? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:949:
error: ?Py_DECREF? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:950:
error: ?PyCObject_Check? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:951:
error: ?PyCObject_AsVoidPtr? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:953:
error: ?Py_DECREF? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:958:
error: ?PyExc_RuntimeError? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:958:
error: ?PyErr_Format? was not declared in this scope
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h: At global scope:
/usr/include/python2.5/pyport.h:97: error: conflicting declaration
?typedef ssize_t Py_ssize_t?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:930:
error: ?Py_ssize_t? has a previous declaration as ?typedef int Py_ssize_t?
extensions/_gdal_array.cpp: In function ?void init_gdal_array()?:
extensions/_gdal_array.cpp:118: warning: deprecated conversion from
string constant to ?char*?
extensions/_gdal_array.cpp: In destructor ?virtual
NUMPYDataset::~NUMPYDataset()?:
extensions/_gdal_array.cpp:162: error: ?struct PyArrayObject? has no
member named ?ob_refcnt?
extensions/_gdal_array.cpp: In static member function ?static
GDALDataset* NUMPYDataset::Open(GDALOpenInfo*)?:
extensions/_gdal_array.cpp:382: error: ?struct PyArrayObject? has no
member named ?ob_refcnt?
extensions/_gdal_array.cpp:393: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:394: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:395: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:396: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:397: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:398: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:404: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:405: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:406: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:407: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:418: error: ?struct PyArrayObject? has no
member named ?data?

going on like this for some more, but I hope this suffices...

TIA,
Vincent.

From schut at sarvision.nl  Wed Oct 31 12:20:33 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] strange problem compiling against ndarrayobject.h
Message-ID: <4728AB51.6050601@sarvision.nl>

Btw forgot some info:

gentoo linux, amd64
numpy 1.0.3.1
gdal from svn, updated today
python 2.5.1

Cheers,
Vincent.

From schut at sarvision.nl  Wed Oct 31 12:21:59 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling against ndarrayobject.h]
Message-ID: <4728ABA7.2080102@sarvision.nl>

sorry if this arrives twice...

Hi numpy and/or gdal guru's,

I'm suddenly getting into trouble compiling gdal's python extension,
when it includes ndarrayobject.h from numpy. First it complains about my
python not being unicode, though I am sure it is unicode, and then it
bails out with all kinds of errors (see snippet below).
Numpy people, please read on even though this might seem a gdal problem,
because it clearly is numpy related, see the snippet...

I've tried everything I could think of, but to no avail. I hope one of
you can give me a hint, because I'm kind of clueless, and even don't
know in what direction I should search...

Here is a paste from the output from building (python setup.py build) in
the gdal/swig/python dir.

make[2]: Entering directory `/usr/local/src/gdal/swig/python'
python setup.py build
numpy include /usr/lib64/python2.5/site-packages/numpy/core/include
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.5
copying gdal.py -> build/lib.linux-x86_64-2.5
copying ogr.py -> build/lib.linux-x86_64-2.5
copying osr.py -> build/lib.linux-x86_64-2.5
copying gdalconst.py -> build/lib.linux-x86_64-2.5
creating build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/__init__.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/osr.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/gdal.py -> build/lib.linux-x86_64-2.5/osgeo
copying osgeo/ogr.py -> build/lib.linux-x86_64-2.5/osgeo
running build_ext
building 'osgeo._gdal' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

creating build/temp.linux-x86_64-2.5
creating build/temp.linux-x86_64-2.5/extensions
compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/gdal_wrap.cpp
extensions/gdal_wrap.cpp: In function ?PyObject*
_wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*)?:
extensions/gdal_wrap.cpp:4570: warning: deprecated conversion from
string constant to ?char*?
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/gdal_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_gdal.so
building 'osgeo._gdalconst' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/gdalconst_wrap.c
x86_64-pc-linux-gnu-gcc -pthread -shared
build/temp.linux-x86_64-2.5/extensions/gdalconst_wrap.o -L../../.libs
-L../.. -L/usr/lib64 -lgdal -lpython2.5 -o
build/lib.linux-x86_64-2.5/osgeo/_gdalconst.so
building 'osgeo._osr' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/osr_wrap.cpp
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/osr_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_osr.so
building 'osgeo._ogr' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/ogr_wrap.cpp
x86_64-pc-linux-gnu-g++ -pthread -shared
build/temp.linux-x86_64-2.5/extensions/ogr_wrap.o -L../../.libs -L../..
-L/usr/lib64 -lgdal -lpython2.5 -o build/lib.linux-x86_64-2.5/osgeo/_ogr.so
building 'osgeo._gdal_array' extension
C compiler: x86_64-pc-linux-gnu-gcc -pthread -fno-strict-aliasing
-DNDEBUG -fPIC

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr
-I/usr/lib64/python2.5/site-packages/numpy/core/include
-I/usr/include/python2.5 -c'
x86_64-pc-linux-gnu-gcc: extensions/_gdal_array.cpp
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
error: #error Must use Python with unicode enabled.
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h:105:1: warning: "PY_SSIZE_T_MAX" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:931:1:
warning: this is the location of the previous definition
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h:107:1: warning: "PY_SSIZE_T_MIN" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:932:1:
warning: this is the location of the previous definition
In file included from /usr/include/python2.5/Python.h:131,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/abstract.h:762:1: warning: "PyIndex_Check" redefined
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:937:1:
warning: this is the location of the previous definition
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:919:
error: ?Py_intptr_t? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:920:
error: ?Py_uintptr_t? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1012:
error: expected initializer before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: typedef ?PyArray_SetItemFunc? is initialized (use __typeof__ instead)
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: ?PyObject? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?,? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?void?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1013:
error: expected primary-expression before ?void?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1015:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1015:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1016:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1026:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1026:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1028:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1028:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1029:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1031:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1041:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1043:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1044:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1044:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1046:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1050:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1052:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1053:
error: ?npy_intp? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1056:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1056:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1069:
error: ISO C++ forbids declaration of ?PyArray_GetItemFunc? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1069:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1070:
error: ISO C++ forbids declaration of ?PyArray_SetItemFunc? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1070:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1121:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1121:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1171:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1190:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1190:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1194:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1194:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1203:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1203:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1213:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1214:
error: expected ?;? before ?char?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1216:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1216:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1217:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1217:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1219:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1219:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1229:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1229:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1238:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1246:
error: ?PyObject_HEAD? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1249:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1253:
error: ?PyObject? has not been declared
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1395:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1396:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1397:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1398:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1399:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1400:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1401:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1402:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1542:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1543:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1544:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1545:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1547:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1596:
error: ISO C++ forbids declaration of ?PyObject_HEAD? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1600:
error: expected ?;? before ?int?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1602:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1604:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1606:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1622:
error: ?npy_intp? does not name a type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1624:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1624:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1799:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1799:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1800:
error: ISO C++ forbids declaration of ?npy_intp? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1800:
error: expected ?;? before ?*? token
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1802:
error: ISO C++ forbids declaration of ?PyObject? with no type
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1802:
error: expected ?;? before ?*? token
In file included from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:1814,
                 from
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
                 from extensions/gdal_array.h:10,
                 from extensions/_gdal_array.cpp:33:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:
In function ?int _import_array()?:
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?PyObject? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?numpy? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:945:
error: ?PyImport_ImportModule? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:946:
error: ?c_api? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:948:
error: ?PyObject_GetAttrString? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:949:
error: ?Py_DECREF? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:950:
error: ?PyCObject_Check? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:951:
error: ?PyCObject_AsVoidPtr? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:953:
error: ?Py_DECREF? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:958:
error: ?PyExc_RuntimeError? was not declared in this scope
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/__multiarray_api.h:958:
error: ?PyErr_Format? was not declared in this scope
In file included from /usr/include/python2.5/Python.h:62,
                 from extensions/gdal_array.h:16,
                 from extensions/_gdal_array.cpp:33:
/usr/include/python2.5/pyport.h: At global scope:
/usr/include/python2.5/pyport.h:97: error: conflicting declaration
?typedef ssize_t Py_ssize_t?
/usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:930:
error: ?Py_ssize_t? has a previous declaration as ?typedef int Py_ssize_t?
extensions/_gdal_array.cpp: In function ?void init_gdal_array()?:
extensions/_gdal_array.cpp:118: warning: deprecated conversion from
string constant to ?char*?
extensions/_gdal_array.cpp: In destructor ?virtual
NUMPYDataset::~NUMPYDataset()?:
extensions/_gdal_array.cpp:162: error: ?struct PyArrayObject? has no
member named ?ob_refcnt?
extensions/_gdal_array.cpp: In static member function ?static
GDALDataset* NUMPYDataset::Open(GDALOpenInfo*)?:
extensions/_gdal_array.cpp:382: error: ?struct PyArrayObject? has no
member named ?ob_refcnt?
extensions/_gdal_array.cpp:393: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:394: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:395: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:396: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:397: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:398: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:404: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:405: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:406: error: ?struct PyArrayObject? has no
member named ?dimensions?
extensions/_gdal_array.cpp:407: error: ?struct PyArrayObject? has no
member named ?strides?
extensions/_gdal_array.cpp:418: error: ?struct PyArrayObject? has no
member named ?data?

going on like this for some more, but I hope this suffices...

TIA,
Vincent.



From schut at sarvision.nl  Wed Oct 31 12:22:19 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling against ndarrayobject.h]
Message-ID: <4728ABBB.9020704@sarvision.nl>

sorry if this arrives twice...

Btw forgot some info:

gentoo linux, amd64
numpy 1.0.3.1
gdal from svn, updated today
python 2.5.1

Cheers,
Vincent.



From Chris.Barker at noaa.gov  Wed Oct 31 12:27:26 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Qgis-developer] GDAL Python Bindings
Message-ID: <4728ACEE.5040504@noaa.gov>

Hi folks,

Sorry for the cross-post, but it seemed topical to both qgis and gdal.

Martin Dobias wrote:
 >> GDAL already uses swig ngpython bindings, can't you reuse those ? There
 >> is a gdalconst.py generated by swig which contains the enums.

 > I don't think this would be a good idea. First, we would introduce
 > dependency on GDAL python bindings.

Well, there is a dependency on GDAL already, so why not the bindings?

I really think it is better for the GDAL user community as a whole to 
work to improve one set of bindings for GDAL, rather than have multiple 
sets.

 > Second, and more importantly,
 > there seems to be a technical barrier - I have no idea how to connect
 > SIP and SWIG bindings.

What are the barriers exactly? I now nothing of SIP, and a little about 
SWIG. However, I think the key is to use Python as the intermediary, and 
not try to have SIP types dealing directly with GDAL C stuff. To do this 
efficiently, there may be a need to add a thing or two to the GDAL SWIG 
bindings and the Qgis bindings.

In particular, thinking about a raster band, it could be a pretty good 
sized bock of data, so we'd want a way to get a GDAL raster band into 
whatever type you need for QGIS without a whole lot of data copying. By 
default, we might end up with:

gdal generates a raster band. (first copy)
it is converted to a Python string (two copies)
it is converted to a QGIS raster band equivelent (three copies)

It would be nice to just allocate the memory in GDAl, and pass that 
pointer through to whatever the QGIS type is. The way to do that is to 
use the Python buffer protocol, or even better the new nd-array protocol 
introduced by numpy, and slated for inclusion in future pythons:

http://numpy.scipy.org/array_interface.shtml

http://www.python.org/dev/peps/pep-3118/

I'm hoping to add this support to the GDAL bindings anyway, for 
efficient transfer to/from numpy arrays.

By the way, does pyQt and/or Qgis support numpy arrays at all now?

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Wed Oct 31 12:30:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] Motion: Adopt 1.4.3rc3 as 1.4.3
In-Reply-To: <47289CBF.1070200@mapgears.com>
References: <4725EF8D.2000900@pobox.com> <47289CBF.1070200@mapgears.com>
Message-ID: <4728AD8E.1080705@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>> Motion: Adopt 1.4.3rc3 as 1.4.3
>>
>> Starting the timer on rc3 becoming our 1.4.3 final release.
>>
> 
> +1 to release 1.4.3rc3 as 1.4.3

Daniel / Andrey,

Thanks, I'm also +1, and the motion is carried.  I'll tag 1.4.3, and
promote 1.4.3rc3 to be 1.4.3 on the download site, and send out a broader
release announcement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Oct 31 13:09:16 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.3 Released
Message-ID: <4728B6BC.4050603@loskot.net>

Folks,

The GDAL Team is pleased to announce the release of GDAL/OGR 1.4.3.
This is intended to be a successive bug fix release after GDAL/OGR 1.4.2
and it's extending the GDAL 1.4.x stable branch.
This release does not include the many new features in the development
trunk (which will appear as GDAL/OGR 1.5.0).


With GDAL/OGR 1.4.3, 65 Trac tickets were addressed:

http://trac.osgeo.org/gdal/query?status=closed&milestone=1.4.3

The NEWS is available at:

http://trac.osgeo.org/gdal/wiki/Release/1.4.3-News

Source packages with GDAL/OGR 1.4.3 are available at:

http://download.osgeo.org/gdal/gdal143.zip
http://download.osgeo.org/gdal/gdal-1.4.3.tar.gz

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Oct 31 14:06:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.4 and 1.5.0 Releases
Message-ID: <4728C426.5000306@pobox.com>

Folks,

I would like to put the 1.4 branch into "minimal maintenance" mode.
Esentially I'm suggesting that from now on, only quite serious or
high priority bugs would be fixed in the 1.4 branch.  I suggest this
to reduce overhead fixing things in two places, and so to let us focus
more on getting 1.5 out the door.

But I am still thinking there would be a 1.4.4 release at some point in
the future.

Does anyone thing this is a bad thing?  Should we try and keep aggressively
fixing bugs in 1.4?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed Oct 31 15:14:42 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.4 and 1.5.0 Releases
In-Reply-To: <4728C426.5000306@pobox.com>
References: <4728C426.5000306@pobox.com>
Message-ID: <4728D422.7070003@mapgears.com>

Frank Warmerdam wrote:
> 
> I would like to put the 1.4 branch into "minimal maintenance" mode.
> Esentially I'm suggesting that from now on, only quite serious or
> high priority bugs would be fixed in the 1.4 branch.  I suggest this
> to reduce overhead fixing things in two places, and so to let us focus
> more on getting 1.5 out the door.
> 
> But I am still thinking there would be a 1.4.4 release at some point in
> the future.
> 
> Does anyone thing this is a bad thing?  Should we try and keep aggressively
> fixing bugs in 1.4?
> 

I am fine with this, only critical fixes in the 1.4 branch and focus 
efforts on 1.5.0.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Wed Oct 31 16:34:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.4 and 1.5.0 Releases
In-Reply-To: <4728D422.7070003@mapgears.com>
References: <4728C426.5000306@pobox.com> <4728D422.7070003@mapgears.com>
Message-ID: <4728E6C0.80001@loskot.net>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>>
>> I would like to put the 1.4 branch into "minimal maintenance" mode.
>> Esentially I'm suggesting that from now on, only quite serious or
>> high priority bugs would be fixed in the 1.4 branch.  I suggest this
>> to reduce overhead fixing things in two places, and so to let us focus
>> more on getting 1.5 out the door.
>>
>> But I am still thinking there would be a 1.4.4 release at some point in
>> the future.
>>
>> Does anyone thing this is a bad thing?  Should we try and keep
>> aggressively
>> fixing bugs in 1.4?
>>
> 
> I am fine with this, only critical fixes in the 1.4 branch and focus
> efforts on 1.5.0.


I'm fine with this idea too.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ivan.lucena at pmldnet.com  Wed Oct 31 17:48:47 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] 1.4.4 and 1.5.0 Releases
In-Reply-To: <4728C426.5000306@pobox.com>
References: <4728C426.5000306@pobox.com>
Message-ID: <4728F83F.6070407@pmldnet.com>

Frank,

It looks like a sound strategy. Here is an interesting reading that goes 
along with:

http://catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/ar01s04.html

Best regards,

Ivan

Frank Warmerdam wrote:
> Folks,
> 
> I would like to put the 1.4 branch into "minimal maintenance" mode.
> Esentially I'm suggesting that from now on, only quite serious or
> high priority bugs would be fixed in the 1.4 branch.  I suggest this
> to reduce overhead fixing things in two places, and so to let us focus
> more on getting 1.5 out the door.
> 
> But I am still thinking there would be a 1.4.4 release at some point in
> the future.
> 
> Does anyone thing this is a bad thing?  Should we try and keep aggressively
> fixing bugs in 1.4?
> 
> Best regards,

From warmerdam at pobox.com  Wed Oct 31 19:46:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:07 2007
Subject: [Gdal-dev] [Fwd: strange problem compiling against
	ndarrayobject.h]
In-Reply-To: <4728ABA7.2080102@sarvision.nl>
References: <4728ABA7.2080102@sarvision.nl>
Message-ID: <472913EC.7090403@pobox.com>

Vincent Schut wrote:
> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/arrayobject.h:14,
>                  from extensions/gdal_array.h:10,
>                  from extensions/_gdal_array.cpp:33:
> /usr/lib64/python2.5/site-packages/numpy/core/include/numpy/ndarrayobject.h:92:2:
> error: #error Must use Python with unicode enabled.

Vincent,

At first I had no idea and assumed this was a Python 2.5 issue.  But then I
ran into it on my system and discovered things were hosed by a change
Mateusz made last night.  I have fixed gdal/swig/python/extensions/gdal_array.h
in trunk now and things seem to be building ok for me.

Update, and try again.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


