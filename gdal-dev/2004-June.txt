From kruegerj at gmx.de  Sat Jun 19 05:48:18 2004
From: kruegerj at gmx.de (Jochen Krueger)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Moving window for image filters & memory allocation
Message-ID: <cb124k$nkb$1@sea.gmane.org>

I'm programming a filter that uses a moving window to calculate a new 
image. As my images are very big (> 10000x10000 pixels) processing speed 
  is essential and I don't want to load each window seperately from the 
file.

To limit the file access while keeping memory needs acceptable I planned 
to load a number of lines equal to the height of my window into a buffer 
and then read the window data from that buffer while processing the 
scanline. In a second step I might want to load additional lines to 
reduce the file access even further, but for the start that is sufficient.

So, following the example on the website, I use the following lines to 
load the data:

     int bufferSize = xsize * winsize;
     lowresBand = lowresDataset->GetRasterBand( i );
     lowresBuffer  = (float *) CPLMalloc(sizeof(float)*bufferSize);
     lowresBand->RasterIO( GF_Read, 0, firstline, xsize, winsize,
                           lowresBuffer, xsize, winsize, GDT_Float32,
                           0, 0 );

'xsize' is the width of the dataset, 'winsize' the size of the window 
and 'firstline' the number of the first line to load. After doing this I 
have the data loaded into the buffer 'lowresBuffer', right? This is 
where I want to move my window through. Unfortunately that's where my 
two big problems start:

1st: I seem to be unable to actually access a specific pixel within the 
buffer. I first assumed it was just the lines written in a straight 
sequence into the buffer (so after xsize pixels the next line would 
start) and thus tried to access the values using lowresBuffer[i]. But 
that only seemed to access the first line, so I gathered the buffer must 
be actually a two dimensional array. I tried using lowresBuffer[i][j], 
but to no avail either.

Now I'm not very proficient in C++ yet, and I'm sure the solution is 
very simple, but I simply can't find it...

2nd: As I rewrite the window buffer over and over and also the initial 
buffer is rewritten many times I first had a problem with excessive 
memory usage (deleteing the pointer without freeing the reserved 
memory). Then I learned that I was allocating new memory with each loop 
instead of simply overwriting the old buffer. So I tried to use delete 
in its various incarnations and also CPLRealloc, which seemed to be the 
exact function I was looking for. But somehow this doesn't really help 
me. Either the memory need is not contained - or I suffer from extreme 
memory corruption.

As my tool will be used in a processing chain memory leaks are not 
acceptable band I have to do everything to avoid excessive memory usage.

I know these are absolute beginners problems, but if someone could point 
me to where I can find a good tutorial/help on this, I'd appreciate this 
very much.


From schut at sarvision.com  Mon Jun 21 03:06:11 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] HDF4_INCLUDE needs hdf-eos dir to find HdfEosDef.h
Message-ID: <200406210906.11229.schut@sarvision.com>

GDAL with hdf4 support fails to build (gcc 3.4) because HdfEosDef.h isn't 
found. Changing HDF4_INCLUDE to $(GDAL_ROOT)/frmts/hdf4/hdf-eos in 
GDALmake.opt fixed this for me.
-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From schut at sarvision.com  Mon Jun 21 05:49:19 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] hdf-eos and gcc3.4 issues
Message-ID: <200406211149.19860.schut@sarvision.com>

Frank, others,

there seem to be some more issues than I first thought about hdf-eos in hdf4 
support, probably mainly in combination with gcc3.4:

firstly, local includes should be named inside "", not inside <>. This is the 
case with #include <ease.h> in HdfEosDef.h, and with #include 
<HDFEOSVersion.h> from EHapi.c. These should become "ease.h" and 
"HDFEOSVersion.h" respectively, otherwise 'no such file or directory' errors 
are thrown by gcc.

Secondly, after these edits running make in the hdf-eos subdir displays the 
following error related to HDFEOSVersion.h:

vincent@timo hdf-eos $ make
/bin/sh ../../../libtool --mode=compile gcc -Wall  -O2 -DCPL_MULTIPROC_PTHREAD   
-I../../../port -I/usr/include   -c -o EHapi.o EHapi.c
 gcc -Wall -O2 -DCPL_MULTIPROC_PTHREAD -I../../../port -I/usr/include -c 
EHapi.c  -fPIC -DPIC -o .libs/EHapi.o
In file included from EHapi.c:35:
HDFEOSVersion.h:16:1: pasting ""@(#)## HDFEOS Version: "" and "HDFEOSVERSION1" 
does not give a valid preprocessing token
HDFEOSVersion.h:17:1: pasting ""@(#)## Build date: "" and "__DATE__" does not 
give a valid preprocessing token
HDFEOSVersion.h:17:1: pasting "__DATE__" and "" @ "" does not give a valid 
preprocessing token
HDFEOSVersion.h:17:1: pasting "" @ "" and "__TIME__" does not give a valid 
preprocessing token
EHapi.c: In function `EHopen':
EHapi.c:254: warning: implicit declaration of function `sleep'
EHapi.c: In function `ehidinfo':
EHapi.c:592: warning: passing arg 2 of `EHidinfo' from incompatible pointer 
type
EHapi.c:592: warning: passing arg 3 of `EHidinfo' from incompatible pointer 
type
EHapi.c: In function `EHopen':
EHapi.c:104: warning: 'fid' might be used uninitialized in this function
EHapi.c: In function `EHconvAng':
EHapi.c:767: warning: 'outAngle' might be used uninitialized in this function
EHapi.c: At top level:
cfortHdf.h:283: warning: 'c2fstrv' defined but not used
cfortHdf.h:299: warning: 'f2cstrv' defined but not used
cfortHdf.h:346: warning: 'vkill_trailing' defined but not used
cfortHdf.h:393: warning: 'num_elem' defined but not used
cfortHdf.h:443: warning: '__cfztringv' defined but not used
make: *** [EHapi.o] Error 1

(The lines that start with 'pasting' are the important ones). I'm stuck here, 
so that's why I just send this report to the list and leave it to the 
pro's :-)

And don't forget the hdf-eos subdir inclusion I reported earlier (-Ihdf-eos 
needed somehow for the hdf4 make).
Btw, that message got rejected by the list (waits for approval). Why? I am 
(was?) definitely subscribed to this list, I thought...

Well, cheers anyway,
-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From warmerdam at pobox.com  Mon Jun 21 16:26:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Remotesensing.org shift
Message-ID: <40D7448D.1090708@pobox.com>

Folks,

Work is proceeding on moving remotesensing.org to a new machine at a new site.
As mentioned in the re-subscribe email most of you should have received when
I re-added you to the list some services as still missing (ie. bugzilla).

It also wanted to note that those with cvs commit access are likely to find
they no longer have access.  The primary cvs access now is at:

  <userid>@cvs.remotesensing.org:/cvs with gdal in "gdal".

Note it isn't /cvsroot anymore, or osrs/gdal.

Some effort has been made to provide aliases for the old respository names
but these may not work that well.

Once again, I appologise for the interruption in service.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Jun 22 09:39:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Remote Sensing Move
Message-ID: <40D836A3.1060707@pobox.com>

Folks,

A quick status report on the remotesensing.org migration that has been
causing disruption in various GDAL related services.

  o Web site should be working now, but the docs aren't being auto-updated yet.

  o The ftp site should be working.   Daily snapshots are not yet being made
    automatically.

  o The bugzilla migration hasn't started yet and it might be a while yet.

  o If you get this, then the mailing list is working.  Note, there was an MX
    record update required that may not have propagated to all ends of the
    net for another day or so.

  o The mailing list archive has not yet been migrated.  I hope to do this
    by the end of next week.

  o CVS is up.  The anonymous cvs access info has changed a bit.  Folks with
    commit access may find they need to re-request access.

Thanks for your patience.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Jun 22 09:51:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Remote Sensing Move
Message-ID: <40D83967.5080602@pobox.com>

Folks,

A quick status report on the remotesensing.org migration that has been
causing disruption in various GDAL related services.

  o Web site should be working now, but the docs aren't being auto-updated yet.

  o The ftp site should be working.   Daily snapshots are not yet being made
    automatically.

  o The bugzilla migration hasn't started yet and it might be a while yet.

  o If you get this, then the mailing list is working.  I'm not sure if it
    is yet receiving mail for gdal-dev@remotesensing.org or whether you will
    need to use gdal-dev@xserve.flids.com for a while.

  o The mailing list archive has not yet been migrated.  I hope to do this
    by the end of next week.

  o CVS is up.  The anonymous cvs access info has changed a bit.  Folks with
    commit access may find they need to re-request access.

Thanks for your patience.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From eduardo at consultoria.eti.br  Tue Jun 22 09:17:10 2004
From: eduardo at consultoria.eti.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:48:45 2007
Subject: [Gdal-dev] Re: problemas within GDAL
In-Reply-To: <40D350C9.30304@pobox.com>
References: <40D33FAA.6060803@consultoria.eti.br> <40D350C9.30304@pobox.com>
Message-ID: <40D83156.7070202@consultoria.eti.br>

hello,

I'd like to add some tips on Frank's comments:

- a way to avoid this problem could be add you gdal dlls path to %PATH 
variable of Windows XP/2000 ( My Computer->Advanced->Env.Variables).
this is the way I found to install diferent version of MapServer CGI and 
PHPMapScript at the same win machine.

best.

Eduardo Patto Kanegae
http://www.consultoria.eti.br
UIN: 303747254

Treinamento em UMN MapServer - http://www.consultoria.eti.br/ptbr/?menuoption=mapserver
I Encontro Nacional de Usu?rios MapServer - http://mapserver.cttmar.univali.br/encontro2004
F?rum MapServer Brasil - http://mapserver.cttmar.univali.br/forum

***Fim da Mensagem / End of Message ***



Frank Warmerdam escreveu:

> Eduardo Patto Kanegae wrote:
>
>> Hi Frank, ( sorry the long mail)
>>
>> I downloaded GDAL 1.2 for Windows ( binaries)
>> but when trying to run any of the GDAL tools ( gdal_translate.exe, 
>> gdalinfo.exe , gdalwarp.exe , gdalwarpsimple.exe, ogr2ogr.exe, 
>> ogrinfo.exe ) I got the error:
>> "This application could not be loaded because the file 
>> xerces-c_2_3_0.dll was not found..."
>>
>> A few days ago you told me to download and use OpenEV-FW 174 which 
>> contains all lastest binaries.
>> So I did it at the path C:\OpenEV_FW, but when starting it ( 
>> openev.bat )
>> I got the error:(i'll try translate the message to english ;-)
>> "It was not possible to find the entry point of 
>> GDALGeneralCmdLineProcessor procedure at the dinamic library gdal12.dll"
>> another strange thing: I have MapServer 4.2 ( with PHPMapScript) 
>> which I downloaded from MapTools.org, and if I overwrite my 
>> c:\windows\system32\gdal12.dll ( which came with mapserver) with 
>> gdal12.dll of OpenEV-FW174, then MapServer crashes.
>
>
> Eduardo,
>
> It drives me crazy that any applications dump their GDAL DLL's into
> c:\windows\system32.  That is causing the problem.  I would encourage
> you to try putting gdal12.dll somewhere else, like in the same cgi-bin
> directory that the mapserv.exe is.  Putting it in the system32
> directory is just going to cause no end of compatibility issues.
>
> There are many versions of GDAL12.DLL that conflict.  They need to
> be kept seperate.
>
>> So I tried to look for gdal1.1.9 bins but got no connection to 
>> ftp.remotesensing.org
>>
>> Then I installed OpenEV 1.7.0 for windows and OK. It has gdalinfo 
>> working and that's what I was looking for.
>> but when openning openev I got:
>> "Impossible to find the entry point OGRSetGenerate_DB2_V72_BYTE_ORDER 
>> at gdal11.dll"
>>
>> ps.: I'm running Windows XP Home portuguese.
>>
>> sorry sending this mail directly to you but I tried to subscribe at 
>> http://remotesensing.org/mailman/listinfo/gdal-dev/ GDAL list but 
>> browser is not reaching the page.
>
>
> Remotesensing.org is moving to a new machine, which is why there is so
> much chaos for all resources from there.
>
> Best regards,


-- 


From bartvde at xs4all.nl  Tue Jun  1 06:01:52 2004
From: bartvde at xs4all.nl (bartvde@xs4all.nl)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] rgb2pct.py question
Message-ID: <19025.212.238.227.182.1086084112.squirrel@webmail.xs4all.nl>

Hi list,

I have been using rgb2pct.py recently. My input files are compressed TIFF
with TFW files. The geoTIFF files that get written don't have the correct
coordinates in them. Is there any way to have the rgb2pct.py read the
extents from the TFW files, or any way to update the GeoTiff files with
the right extents from the TFW files?

Also, is my impression correct that the GeoTIFF files written are totally
uncompressed?

Thanks in advance.

Best regards,
Bart

From bartvde at xs4all.nl  Tue Jun  1 06:02:26 2004
From: bartvde at xs4all.nl (bartvde@xs4all.nl)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] rgb2pct.py question
Message-ID: <8398.212.238.227.182.1086084146.squirrel@webmail.xs4all.nl>

Hi list,

I have been using rgb2pct.py recently. My input files are compressed TIFF
with TFW files. The geoTIFF files that get written don't have the correct
coordinates in them. Is there any way to have the rgb2pct.py read the
extents from the TFW files, or any way to update the GeoTiff files with
the right extents from the TFW files?

Also, is my impression correct that the GeoTIFF files written are totally
uncompressed?

Thanks in advance.

Best regards,
Bart

From warmerdam at pobox.com  Tue Jun  1 09:27:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] rgb2pct.py question
In-Reply-To: <8398.212.238.227.182.1086084146.squirrel@webmail.xs4all.nl>
References: <8398.212.238.227.182.1086084146.squirrel@webmail.xs4all.nl>
Message-ID: <40BC8435.50803@pobox.com>

bartvde@xs4all.nl wrote:
> Hi list,
> 
> I have been using rgb2pct.py recently. My input files are compressed TIFF
> with TFW files. The geoTIFF files that get written don't have the correct
> coordinates in them. Is there any way to have the rgb2pct.py read the
> extents from the TFW files, or any way to update the GeoTiff files with
> the right extents from the TFW files?
> 
> Also, is my impression correct that the GeoTIFF files written are totally
> uncompressed?

Bart,

I am somewhat surprised to see that rgb2pct.py does not currently make any
attempt to preserve the georeferencing, or projection of the source image.
I have corrected this in CVS, and attached a new version to this email.

In general the python scripts like rgb2pct.py aren't very sophisticated
and don't offer the ability to set output creation options like those used
to control compression.  So you would need to use gdal_translate with the
"-co COMPRESS=DEFLATE" or something similar to re-compress the data after
processing.

Ideally the various python scripts should be updated to include more of
this sort of control.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
#!/usr/bin/env python
#******************************************************************************
#  $Id: rgb2pct.py,v 1.5 2004/06/01 13:24:09 warmerda Exp $
# 
#  Name:     rgb2pct
#  Project:  GDAL Python Interface
#  Purpose:  Application for converting an RGB image to a pseudocolored image.
#  Author:   Frank Warmerdam, warmerdam@pobox.com
# 
#******************************************************************************
#  Copyright (c) 2001, Frank Warmerdam
# 
#  Permission is hereby granted, free of charge, to any person obtaining a
#  copy of this software and associated documentation files (the "Software"),
#  to deal in the Software without restriction, including without limitation
#  the rights to use, copy, modify, merge, publish, distribute, sublicense,
#  and/or sell copies of the Software, and to permit persons to whom the
#  Software is furnished to do so, subject to the following conditions:
# 
#  The above copyright notice and this permission notice shall be included
#  in all copies or substantial portions of the Software.
# 
#  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
#  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
#  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
#  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
#  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
#  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
#  DEALINGS IN THE SOFTWARE.
#******************************************************************************
# 
# $Log: rgb2pct.py,v $
# Revision 1.5  2004/06/01 13:24:09  warmerda
# Added step to preserve georeferencing.
#
# Revision 1.4  2004/04/02 17:40:44  warmerda
# added GDALGeneralCmdLineProcessor() support
#
# Revision 1.3  2003/05/28 19:47:34  warmerda
# upgrade progress reporting
#
# Revision 1.2  2002/12/04 15:49:13  warmerda
# re-enable cleanup, and fix color count support
#
# Revision 1.1  2001/01/22 22:34:28  warmerda
# New
#
#

import gdal
import sys
import os.path

def Usage():
    print 'Usage: rgb2pct.py [-n colors] [-of format] source_file dest_file'
    sys.exit(1)

# =============================================================================
# 	Mainline
# =============================================================================

color_count = 256
format = 'GTiff'
src_filename = None
dst_filename = None

gdal.AllRegister()
argv = gdal.GeneralCmdLineProcessor( sys.argv )
if argv is None:
    sys.exit( 0 )

# Parse command line arguments.
i = 1
while i < len(argv):
    arg = argv[i]

    if arg == '-of':
        i = i + 1
        format = argv[i]

    elif arg == '-n':
        i = i + 1
        color_count = int(argv[i])

    elif src_filename is None:
        src_filename = argv[i]

    elif dst_filename is None:
        dst_filename = argv[i]

    else:
        Usage()

    i = i + 1

if dst_filename is None:
    Usage()
    
# Open source file

src_ds = gdal.Open( src_filename )
if src_ds is None:
    print 'Unable to open ', src_filename
    sys.exit(1)

if src_ds.RasterCount < 3:
    print '%s has %d bands, need 3 for inputs red, green and blue.' \
          % src_ds.RasterCount
    sys.exit(1)

# Ensure we recognise the driver.

dst_driver = gdal.GetDriverByName(format)
if dst_driver is None:
    print '"%s" driver not registered.' % format
    sys.exit(1)

# Generate the median cut PCT

ct = gdal.ColorTable()

err = gdal.ComputeMedianCutPCT( src_ds.GetRasterBand(1),
                                src_ds.GetRasterBand(2),
                                src_ds.GetRasterBand(3),
                                color_count, ct,
                                callback = gdal.TermProgress,
                                callback_data = 'Generate PCT' )

# Create the working file.  We have to use TIFF since there are few formats
# that allow setting the color table after creation.

if format == 'GTiff':
    tif_filename = dst_filename
else:
    tif_filename = 'temp.tif'

gtiff_driver = gdal.GetDriverByName( 'GTiff' )

tif_ds = gtiff_driver.Create( tif_filename,
                              src_ds.RasterXSize, src_ds.RasterYSize, 1)

tif_ds.GetRasterBand(1).SetRasterColorTable( ct )

# ----------------------------------------------------------------------------
# We should copy projection information and so forth at this point.

tif_ds.SetProjection( src_ds.GetProjection() )
tif_ds.SetGeoTransform( src_ds.GetGeoTransform() )

# ----------------------------------------------------------------------------
# Actually transfer and dither the data.

err = gdal.DitherRGB2PCT( src_ds.GetRasterBand(1),
                          src_ds.GetRasterBand(2),
                          src_ds.GetRasterBand(3),
                          tif_ds.GetRasterBand(1),
                          ct,
                          callback = gdal.TermProgress,
                          callback_data = 'Generate PCT' )

tif_ds = None

if tif_filename <> dst_filename:
    tif_ds = gdal.Open( tif_filename )
    dst_driver.CreateCopy( dst_filename, tif_ds )
    tif_ds = None

    gtiff_driver.Delete( tif_filename )







From warmerdam at pobox.com  Tue Jun  1 09:59:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
In-Reply-To: <005401c447c9$8cf6ce40$fb5d4cd5@n7a3h9>
References: <005401c447c9$8cf6ce40$fb5d4cd5@n7a3h9>
Message-ID: <40BC8BA7.8020800@pobox.com>

Maciek Sieczka wrote:
> Frank,
> 
> Since the server is permanently down I decided to answer your question in
> person. If you don't want me to do it ever again please let me know. And
> sorry then!
 >
> BTW: do you know where is the list going to "get up" again?

Maciek,

No problem with the direct email (especially with sample data).  I have cc;ed
the list with my response so folks will know the resolution of the issue.
The list is back this morning.  Apparently the new machine hosting remotesensing.org
has memory problems, though I am not sure if that was responsible for the most
recent outage which seems to have also taken out imagelinks.com (ImageLinks it
the hosting organization).

> F> Sorry, I don't recall the details.  What that the one that was really a
> F> BIL file, and GDAL didn't support floating point BIL files?   That
> F> was resolved by assuming that 32bit files were floating point.  If it
> F> was really an arc/grid binary grid coverage, could you provide it
> F> again?
> 
> The problem with BIL occured "by the way" when I was trying to
> walkover my problem.
> 
> The MAIN issue is: FP ArcGrid support in GDAL is faulty IMHO.
> 
> below goes our most recent email on this subject
> a sample of the problematic file is attached
> 
> F>> I find it hard to believe that GDAL's AIG driver would misreport a
> F>> floating point Arc/Info Binary Grid as Int16.  If you can provide a
> F>> sample Arc/Info grid that demonstrates this problem I will investigate.
> 
> M> I digged a little more and I'm confused.
> 
> M> I noticed that whether GDAL recognises the FP ARCGrid as FP or INT
> M> depends somehow on the proportion and distribution of null/data
> M> cells in a file but I can't find a simple rule for this (and I may be
> M> wrong as well). Anyway if the FP grid file is "100% data" it is always
> M> recognised as FP. But if it contains nulls then GDAL will see it as INT
> M> or FP dependending on the file itself. Examples for both cases taken out
> M> from my FP ARCGrid are attached in the arc.tgz. If you need a bigger one
> M> please let me know. BOTH shold be FLOATING POINT while only
> M> ONE is recognised properly.

Thanks for the sample data.  These files are Arc/Info ASCII grids (not the
binary grids I thought we were talking about).

This is already a known issue in bug:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=313

Basically I scan the first 1K or so of the file to look for floating point values.
If I don't find any I assume the whole coverage is integer.

I have been hesitant to "fix" this as a proper fix would seem to require
scanning the whole file on open which is pretty expensive.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Hans.Verlouw at Geodan.nl  Wed Jun  2 05:16:58 2004
From: Hans.Verlouw at Geodan.nl (Hans Verlouw)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] append option in ogr2ogr
Message-ID: <5.1.0.14.2.20040602110318.023a3610@mail.vz.geodan.nl>

Hi list,

I noticed some strange behaviour when using the 'append' option of ogr2ogr.
I have twelve 2-dimensional ESRI shape files that I want to convert to one 
single table in Oracle Spatial 9i.
When I convert one shape file and explicitly specify the -lco DIM=2 option, 
the result is OK, so SDO_GTYPE = 2007 for all records.

But after I append other shape files (which are 2D originally too) the 
resulting Oracle table gets over 90% records that are 3D,
so with SDO_GTYPE = 3007

For every step I specify the -lco DIM=2 option.

Am I doing something wrong here?
I also use the OVERWRITE=YES flag, but I don't think this is the problem, 
because the table is growing at every step.

A snippet of my batch file:

ogr2ogr         -f OCI OCI:%USER%/%PASS%@%DB% 
%DATA%\Flevoland_tblEdugis_ObjRecht_region.shp                -lco 
SRID=90112 -lco DIM=2 -lco LAUNDER=YES -lco OVERWRITE=YES -nlt MULTIPOLYGON 
-nln objrecht
ogr2ogr -append -f OCI OCI:%USER%/%PASS%@%DB% 
%DATA%\Zeeland_tblEdugis_ObjRecht_region.shp                  -lco 
SRID=90112 -lco DIM=2 -lco LAUNDER=YES -lco OVERWRITE=YES -nlt MULTIPOLYGON 
-nln objrecht

ogr2ogr -append -f OCI OCI:%USER%/%PASS%@%DB% 
%DATA%\Drenthe_tblEdugis_ObjRecht_region.shp                  -lco 
SRID=90112 -lco DIM=2 -lco LAUNDER=YES -lco OVERWRITE=YES -nlt MULTIPOLYGON 
-nln objrecht
ogr2ogr -append -f OCI OCI:%USER%/%PASS%@%DB% 
%DATA%\Friesland_tblEdugis_ObjRecht_region.shp                -lco 
SRID=90112 -lco DIM=2 -lco LAUNDER=YES -lco OVERWRITE=YES -nlt MULTIPOLYGON 
-nln objrecht


Thanks in advance,

Hans





Met vriendelijke groeten,

Hans Verlouw
-------------------------------------
Geodan IT b.v.
Buitenhaven 27-A
5211 TP 's-Hertogenbosch (NL)
-------------------------------------
Tel: +31 (0)73 - 692 5151
Fax:  +31 (0)20 - 5711 333
-------------------------------------
Postadres / mailing address
President Kennedylaan 1
1079 MB Amsterdam (NL)
-------------------------------------
E-mail: Hans.Verlouw@Geodan.nl
Website: www.geodan.nl
Disclaimer: www.geodan.nl/disclaimer
-------------------------------------



From bartvde at xs4all.nl  Wed Jun  2 13:33:55 2004
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] gdal
In-Reply-To: <40BBB207.1050502@globe.gov>
References: <40BBB207.1050502@globe.gov>
Message-ID: <opr8y9qtrwmi5aim@localhost>

Hi,

try:

http://dl.maptools.org/gdal/

Best regards,
Bart

On Mon, 31 May 2004 16:30:31 -0600, Karen Milberger <milberger@globe.gov> 
wrote:

> Hi,
>
> I am looking for the tar.gz distribution of gdal (either 1.1.9 or 1.2.0) 
> and it doesn't seem to be mirrored anywhere other than 
> remotesensing.org, and ftp.remotesensing.org seems to be down.  Is there 
> anywhere that I can get it?  (I've had no luck with the rpm.)
>
> Thanks,
> Karen
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
>



-- 
  

From nhv at cape.com  Wed Jun  2 13:37:51 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] gdal
In-Reply-To: <40BBB207.1050502@globe.gov>
Message-ID: <EKEJIKAILPONGGENMBGAIECIHLAA.nhv@cape.com>

Karen Milberger writes:
> 
> I am looking for the tar.gz distribution of gdal (either 1.1.9 or 1.2.0) 
> and it doesn't seem to be mirrored anywhere other than 
> remotesensing.org, and ftp.remotesensing.org seems to be down. 

Try again as remotesensing.org was down temporarily but appears to be 
back up now.

Norman

From warmerdam at pobox.com  Wed Jun  2 16:37:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Problems with writing RasterIO on WinXP
In-Reply-To: <410D43C9.2070701@gmx.de>
References: <410D43C9.2070701@gmx.de>
Message-ID: <40BE3A78.3000202@pobox.com>

> float *analyseBuffer(float *hrBuffer, float *lrBuffer, int bsize) {
>     float *fuBuffer;
>     fuBuffer = (float *) CPLMalloc(sizeof(float)*bsize);
>     int i=1;
>     while (i <= bsize) {
>         fuBuffer[i]=(hrBuffer[i] + hrBuffer[i] + lrBuffer[i]) / 3;
>         i += 1;
>     };    
>     return fuBuffer;
> }

Jochen,

I noticed a couple of things.  Your loop above should be from i=0 to bsize-1
but you are looping from 1 to bsize which will write one word past the end
of the buffer potentially corrupting the heap.  Heap corruption has
unpredictable effects.  It might not break anything on one run, and crap out
on another run.

The other thing is that you aren't closing the files.  You should explicitly
"delete fusionDataset" at the end to get things flushed and closed properly.

Ahh heap corruption, the C/C++ programmers eternal pain.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruegerj at gmx.de  Thu Jun  3 08:51:13 2004
From: kruegerj at gmx.de (=?ISO-8859-1?Q?Jochen_Kr=FCger?=)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Problems with writing RasterIO on WinXP
In-Reply-To: <40BE3A78.3000202@pobox.com>
References: <410D43C9.2070701@gmx.de> <40BE3A78.3000202@pobox.com>
Message-ID: <c9n6s1$nva$1@sea.gmane.org>

Frank Warmerdam wrote:

> Ahh heap corruption, the C/C++ programmers eternal pain.

That was it, thanks. Just shows how far I've succeeded with learning 
C++...  But I'm getting there - eventually! ;)


From jnielsen at aero-graphics.com  Thu Jun  3 11:32:21 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] 2 point raster transformation.
Message-ID: <pan.2004.06.03.15.32.20.850787@aero-graphics.com>

Can anyone hint me in on the parameters to use if you want to do a simple
2 point transformation of a raster?

I know the x/y offsets, scaling factor and rotation. I think I know how to
pass the offsets and scaling but I cannot find how to pass a simple
rotation. Below I have listed out the values I am working with and at the
end of each line the parameter I think it is associated with.

Scale factor= 1.000202(+k)
Rotation D=0.0 M=34.856971 S=1.000202
XO=-1398448.885932(+x_0)
YO=-3373479.003395(+y_0)

TIA


From jaime at maintask.com  Thu Jun  3 17:37:22 2004
From: jaime at maintask.com (=?ISO-8859-1?Q?Jaime_Mej=EDa?=)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] ogr2ogr srs
Message-ID: <40BF9A12.5090406@maintask.com>

Hi all,

We have converted an Arc/Info coverage in BOGOTA DATUM to SHP in WGS84
DATUM through OGR with the following command:
ogr2ogr  -s_srs merc_bogota -t_srs wgs84  vias_cobertura  /BIN/vias
where the file merc_bogota contains the following line with the required
parameters to perform the transformation from BOGOTA DATUM to WGS84 DATUM:
+proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
+x_0=1000000.000 +y_0=1000000.000 +ellps=intl +towgs84=307,304,-318,0,0,0,0
and the file wgs84 contains the line:
+proj=latlong +datum=WGS84
We have made a sampling using a GPS with WGS84 DATUM and we generated a
shape called "vias_gps".
When we overlaps vias_cobertura and vias_gps we found a difference of
?500m.
On the other hand, we converted the Arc/Info coverage to shape with the
same DATUM (BOGOTA), then we loaded it into PostGIS using shp2psql with
SRID=2 and from PostGis we transformated from BOGOTA DATUM to WGS84
DATUM with the function: transform(vias,1).
When we overlaps this with vias_gps, everything is fine.
In the PostGIS table spatial_ref_sys, we can find BOGOTA and WGS84 DATUM
as follows:

 srid | auth_name | auth_srid | srtext | proj4text

       2 | EPSG      |     21892 | PROJCS["Bogota / Colombia Bogota
zone",GEOGCS["Bogota",DATUM["Bogota",SPhemosROID["International
1924",6378388,297]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",4.59904722222222],PARAMETER["central_meridian",-74.0809166666667],PARAMETER["scale_factor",1],PARAMETER["false_easting",1000000],PARAMETER["false_northing",1000000],UNIT["metre",1]] 

| proj=tmerc +ellps=intl +k=1 +x_0=1000000 +y_0=1000000
+lon_0=-74.0809166666667 +lat_0=4.59904722222222
+towgs84=307,304,-318,0,0,0,0 +units=m

   1 | EPSG      |      4326 | GEOGCS["WGS
84",DATUM["WGS_1984",SPhemosROID["WGS
84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]] 


It seems like ogr2ogr does not recognize the last parameters' part:
"+towgs84=307,304,-318,0,0,0,0"

There is something wrong with the command or with the projection's
parameters?

Thanks a lot,
-- 

Cordial saludo,

Jaime Mej?a Molina
*MAIN TASK*
Tel?fono: 	218 46 08
Direcci?n: 	Diagonal 85 # 28-39

	Bogota D. C., Colombia
e-mail: 	jaime@main-task.com <mailto:jaime@main-task.com>
website: 	www.main-task.com <http://www.main-task.com/>



From DLowther at scigis.com  Thu Jun  3 17:33:18 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Mosaic in GDAL Warp
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A472@sci_pe-1.scigis.com>

 

Hi List,

 

I'm trying to use the mosaic with gdal warp. The docs say "Mosaicing
into an existing output file is supported if the output file already
exists."

 

I have four files (quarter quads). I'd like them mosaiced and
reprojected - either in one operation or more. I can make reproject
happen no prob for one file.

 

Here are some failed attempts to do this (note 109999 is custom defined
OK Albers Projection):

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a21.tif
e:\project\corps\out\a38095.tif

Creating output file is that 6440P x 7932L.

:0...10...20...30...40...50...60...70...80...90...100 - done.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a22.tif
e:\project\corps\out\a38095.tif

Output dataset e:\project\corps\out\a38095.tif exists, but some
commandline options were provided indicating a new dataset should be
created.  Please delete existing dataset and run again.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
EPSG:109999 -co 'TFW=YES' e:\project\corps\38095a22.tif
e:\project\corps\out\a38095.tif

Output dataset e:\project\corps\out\a38095.tif exists, but some
commandline options were provided indicating a new dataset should be
created.  Please delete existing dataset and run again.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -co 'TFW=YES'
e:\project\corps\38095a22.tif e:\project\corps\out\a38095.tif

Output dataset e:\project\corps\out\a38095.tif exists, but some
commandline options were provided indicating a new dataset should be
created.  Please delete existing dataset and run again.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
e:\project\corps\38095a

22.tif e:\project\corps\out\a38095.tif

:0...10...20...30...40...50...60...70...80...90...100 - done.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
e:\project\corps\38095a

23.tif e:\project\corps\out\a38095.tif

:0...10...20...30...40...50...60...70...80...90...100 - done.

 

E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
e:\project\corps\38095a

24.tif e:\project\corps\out\a38095.tif

:0...10...20...30...40...50...60...70...80...90...100 - done.

 

 

Thanks in advance for any help anyone can provide.

 

 

David Lowther

Senior Software Engineer

Strategic Consulting International

(405) 227-9051

dlowther@scigis.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040603/30f53988/attachment.html
From jnielsen at aero-graphics.com  Thu Jun  3 18:20:09 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: Mosaic in GDAL Warp
References: <303AC30EE84CE540AB1D8484EFFC166E08A472@sci_pe-1.scigis.com>
Message-ID: <pan.2004.06.03.22.20.04.239047@aero-graphics.com>

On Thu, 03 Jun 2004 16:33:18 -0500, David W. Lowther wrote:

>  
> 
> Hi List,
> 
>  
> 
> I'm trying to use the mosaic with gdal warp. The docs say "Mosaicing
> into an existing output file is supported if the output file already
> exists."
> 
>  
> 
> I have four files (quarter quads). I'd like them mosaiced and
> reprojected - either in one operation or more. I can make reproject
> happen no prob for one file.
> 
>  
> 
> Here are some failed attempts to do this (note 109999 is custom defined
> OK Albers Projection):
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a21.tif
> e:\project\corps\out\a38095.tif
> 
> Creating output file is that 6440P x 7932L.
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a22.tif
> e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -co 'TFW=YES' e:\project\corps\38095a22.tif
> e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -co 'TFW=YES'
> e:\project\corps\38095a22.tif e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 22.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 23.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 24.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
>  
> 
> Thanks in advance for any help anyone can provide.
> 
>  
> 
>  
> 
> David Lowther
> 
> Senior Software Engineer
> 
> Strategic Consulting International
> 
> (405) 227-9051
> 
> dlowther@scigis.com

Have you checked out the script gdal_merge?

[root@localhost ogr]# gdal_merge.py 
Usage: gdal_merge.py [-o out_filename] [-f out_format] [-co NAME=VALUE]*
                     [-ps pixelsize_x pixelsize_y] [-separate] [-v] [-pct]
                     [-ul_lr ulx uly lrx lry] [-n nodata_value]
                     input_files

I regularly use it to splice together and chop out a combined section of
georeferenced TIFFs.


From TMitchell at lignum.com  Thu Jun  3 19:10:21 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: [ms4w-users] s57 support
In-Reply-To: <40B7E94D.1030903@magma.ca>
Message-ID: <OFE5AD9072.4837A02D-ON88256EA8.007F17E7-88256EA8.007F4A9F@Riverside.bc.ca>

Just for the sake of the mailing list record, it did appear to have s57 
support and it does indeed work.
The problem was that mapserv couldn't find the gdal/data/s57attributes.csv 
file.  I didn't know it used anything like that, so it was a good lesson 
on inter-dependencies :)   We solved the problem by using the nifty new 
CONFIG parameter in the map file.

CONFIG GDAL_DATA=C:\ms4w\apps\OpenEV_FW\data

Worked like a charm. 

Tyler

gdal-dev-admin@remotesensing.org wrote on 05/28/2004 06:37:17 PM:

> Tyler,
> 
> I am pretty sure that I don't add s57 support to my windows builds, and 
> since I got them from Assefa, I doubt they are in the downloads from our 

> site, including ms4w.
> 
> Please contact either myself or Assefa directly if you are interesting 
> in having us do this for you ...
> 
> Paul
> 
> Tyler Mitchell wrote:
> > Does anyone know if s57 via ogr support is built into the latest ms4w. 
I 
> > got it working last night on linux but can't seem to get it working at 
all 
> > on a windows environment.
> > 
> > Error looks like the following, as opposed to the file not found 
error:
> > 
> > msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
> > msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
> > `data/s57/US1PO02M.000, 9'. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/default-circle
> > _______________________________________________
> > ms4w-users mailing list
> > ms4w-users@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/ms4w-users
> > 
> 
> -- 
>   -----------------------------------------------------------------
> |Paul Spencer                           pspencer@dmsolutions.ca   |
> |-----------------------------------------------------------------|
> |Applications & Software Development                              |
> |DM Solutions Group Inc                 http://www.dmsolutions.ca/|
>   -----------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From pagameba at magma.ca  Thu Jun  3 19:59:05 2004
From: pagameba at magma.ca (Paul Spencer)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: [ms4w-users] s57 support
In-Reply-To: <OFE5AD9072.4837A02D-ON88256EA8.007F17E7-88256EA8.007F4A9F@Riverside.bc.ca>
References: <OFE5AD9072.4837A02D-ON88256EA8.007F17E7-88256EA8.007F4A9F@Riverside.bc.ca>
Message-ID: <40BFBB49.3030601@magma.ca>

Okay, I understand now.  For the record, I am going to update the MS4W 
package to include the contents of the gdal data directory from gdal 1.2 
  and set an environment variable in the apache configuration file so 
that you won't have to do this in the future.

http://www.maptools.org/bugzilla/show_bug.cgi?id=436

Cheers,

Paul

Tyler Mitchell wrote:

> Just for the sake of the mailing list record, it did appear to have s57 
> support and it does indeed work.
> The problem was that mapserv couldn't find the gdal/data/s57attributes.csv 
> file.  I didn't know it used anything like that, so it was a good lesson 
> on inter-dependencies :)   We solved the problem by using the nifty new 
> CONFIG parameter in the map file.
> 
> CONFIG GDAL_DATA=C:\ms4w\apps\OpenEV_FW\data
> 
> Worked like a charm. 
> 
> Tyler
> 
> gdal-dev-admin@remotesensing.org wrote on 05/28/2004 06:37:17 PM:
> 
> 
>>Tyler,
>>
>>I am pretty sure that I don't add s57 support to my windows builds, and 
>>since I got them from Assefa, I doubt they are in the downloads from our 
> 
> 
>>site, including ms4w.
>>
>>Please contact either myself or Assefa directly if you are interesting 
>>in having us do this for you ...
>>
>>Paul
>>
>>Tyler Mitchell wrote:
>>
>>>Does anyone know if s57 via ogr support is built into the latest ms4w. 
> 
> I 
> 
>>>got it working last night on linux but can't seem to get it working at 
> 
> all 
> 
>>>on a windows environment.
>>>
>>>Error looks like the following, as opposed to the file not found 
> 
> error:
> 
>>>msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
>>>msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
>>>`data/s57/US1PO02M.000, 9'. 
>>>msAddImageSymbol(): Unable to access file. Error opening image file 
>>>/ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
>>>msAddImageSymbol(): Unable to access file. Error opening image file 
>>>/ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
>>>msAddImageSymbol(): Unable to access file. Error opening image file 
>>>/ms4w/apache/htdocs/mapserver/workshop/default-circle
>>>_______________________________________________
>>>ms4w-users mailing list
>>>ms4w-users@lists.maptools.org
>>>http://lists.maptools.org/mailman/listinfo/ms4w-users
>>>
>>
>>-- 
>>  -----------------------------------------------------------------
>>|Paul Spencer                           pspencer@dmsolutions.ca   |
>>|-----------------------------------------------------------------|
>>|Applications & Software Development                              |
>>|DM Solutions Group Inc                 http://www.dmsolutions.ca/|
>>  -----------------------------------------------------------------
>>
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@remotesensing.org
>>http://remotesensing.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> ms4w-users mailing list
> ms4w-users@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/ms4w-users
> 

-- 
  -----------------------------------------------------------------
|Paul Spencer                           pspencer@dmsolutions.ca   |
|-----------------------------------------------------------------|
|Applications & Software Development                              |
|DM Solutions Group Inc                 http://www.dmsolutions.ca/|
  -----------------------------------------------------------------


From DLowther at scigis.com  Fri Jun  4 07:52:48 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: Mosaic in GDAL Warp
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A475@sci_pe-1.scigis.com>

Jason,

Thanks for the reply. Since I'm running on Windows I'd have to set
python up, which I'm sure is doable. However, before I do that I'd like
to know if it is possible to mosaic with gdalwarp.

Anyone?

Dave

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of jason
Sent: Thursday, June 03, 2004 5:20 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Re: Mosaic in GDAL Warp

On Thu, 03 Jun 2004 16:33:18 -0500, David W. Lowther wrote:

>  
> 
> Hi List,
> 
>  
> 
> I'm trying to use the mosaic with gdal warp. The docs say "Mosaicing
> into an existing output file is supported if the output file already
> exists."
> 
>  
> 
> I have four files (quarter quads). I'd like them mosaiced and
> reprojected - either in one operation or more. I can make reproject
> happen no prob for one file.
> 
>  
> 
> Here are some failed attempts to do this (note 109999 is custom
defined
> OK Albers Projection):
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a21.tif
> e:\project\corps\out\a38095.tif
> 
> Creating output file is that 6440P x 7932L.
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -of GTIFF -co 'TFW=YES' e:\project\corps\38095a22.tif
> e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -t_srs
> EPSG:109999 -co 'TFW=YES' e:\project\corps\38095a22.tif
> e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715 -co 'TFW=YES'
> e:\project\corps\38095a22.tif e:\project\corps\out\a38095.tif
> 
> Output dataset e:\project\corps\out\a38095.tif exists, but some
> commandline options were provided indicating a new dataset should be
> created.  Please delete existing dataset and run again.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 22.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 23.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
> E:\GDAL\OpenEV_FW\data>..\bin\gdalwarp -s_srs EPSG:26715
> e:\project\corps\38095a
> 
> 24.tif e:\project\corps\out\a38095.tif
> 
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
>  
> 
>  
> 
> Thanks in advance for any help anyone can provide.
> 
>  
> 
>  
> 
> David Lowther
> 
> Senior Software Engineer
> 
> Strategic Consulting International
> 
> (405) 227-9051
> 
> dlowther@scigis.com

Have you checked out the script gdal_merge?

[root@localhost ogr]# gdal_merge.py 
Usage: gdal_merge.py [-o out_filename] [-f out_format] [-co NAME=VALUE]*
                     [-ps pixelsize_x pixelsize_y] [-separate] [-v]
[-pct]
                     [-ul_lr ulx uly lrx lry] [-n nodata_value]
                     input_files

I regularly use it to splice together and chop out a combined section of
georeferenced TIFFs.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Jun  4 10:52:52 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: Mosaic in GDAL Warp
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E08A475@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E08A475@sci_pe-1.scigis.com>
Message-ID: <40C08CC4.8080301@pobox.com>

David W. Lowther wrote:
> Jason,
> 
> Thanks for the reply. Since I'm running on Windows I'd have to set
> python up, which I'm sure is doable. However, before I do that I'd like
> to know if it is possible to mosaic with gdalwarp.

Dave,

You can use gdalwarp to produce a mosaic.  The tricky part is ensuring
you manually set appropriate output bounds and resolution for the mosaic
file when you run gdalwarp the first time.  The nice thing about
gdal_merge.py is it takes care of that for you.

You would need to do something like:

gdalwarp -s_srs EPSG:26715 -t_srs EPSG:109999 ?of GTIFF -co 'TFW=YES' \
          -te 100000 250000 150000 300000 -tr 1.0 1.0 \
          e:\project\corps\38095a21.tif e:\project\corps\out\a38095.tif

Then subsequent files should just need something like:

gdalwarp -s_srs EPSG:26715 e:\project\corps\38095a22.tif e:\project\corps\out\a38095.tif

Note, don't include any creation options for the output file or you will get
the message about having creation options when the output file already exists.

As noted above, setting the "-te" (target extents) and -tr (target resolution)
arguments right the first time is a hassle.  You might even find it a good
idea to transform all the files seperately once and get the extents of them
all.  Then start the process over creating the output mosaic with the full
extents.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jun  4 10:55:46 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] pabydata declaration in GDALRasterBand::ReadBlock
 documentation
In-Reply-To: <200405310946.26313.tim@linfiniti.com>
References: <200405310946.26313.tim@linfiniti.com>
Message-ID: <40C08D72.7020603@pobox.com>

Tim Sutton wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi
> 
> I have been going through the documentation & examples in 
> GDALRasterBand::ReadBlock and am wondering what the declaration for pabyData 
> is? It is used in the example but never declared (see below).

Tim,

It should be "GByte *pabyData".  I have fixed it in CVS.

>  CPLErr GetHistogram( GDALRasterBand *poBand, int *panHistogram )
> 
>  {
>      int        nXBlocks, nYBlocks, nXBlockSize, nYBlockSize;
>      int        iXBlock, iYBlock;
> 
>      memset( panHistogram, 0, sizeof(int) * 256 );
> 
>      CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
> 
>      poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );
>      nXBlocks = (poBand->GetXSize() + nXBlockSize - 1) / nXBlockSize;
>      nYBlocks = (poBand->GetYSize() + nYBlockSize - 1) / nYBlockSize;
> 
>      pabyData = (GByte *) CPLMalloc(nXBlockSize * nYBlockSize);
> 
> 
> .
> .
> .
> example continues...
> 
> 
> Regards
> 
> Tim Sutton
> 
> - -- 
> The only reason for time is so that everything doesn't happen at once 
>  --Albert Einstein 
> 
> Get my public keys from:
> 
> http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.2.4 (GNU/Linux)
> 
> iD8DBQFAuvDfWvXTJUo0BDoRAnAGAJ92bIjWbH4eNz/nD3vvK5vLJzWy4QCfXYGs
> 6f2oclNKZGyIWsGw4TlzTNY=
> =MM1K
> -----END PGP SIGNATURE-----
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Fri Jun  4 12:46:13 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Find elevation data at specific point
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F89@wilbur.MICROPILOT.COM>

Hi,

I would like to know how to get the elevation from a specific coordinate
(in latitude/longitude or UTM).  I can convert between lat/long and UTM
as needed for the specific map data loaded, but I don't know how to get
the elevation of that coordinate.

I'm assuming that I need to get the xpixel and yline values, and
reference off of that somehow.  But, being new to GDAL, I'm not quite
sure.

Thanks for your help.

Gerald

From warmerdam at pobox.com  Fri Jun  4 13:06:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Find elevation data at specific point
In-Reply-To: <33CAB4AA6010A34FB7507C2D40C73F6C252F89@wilbur.MICROPILOT.COM>
References: <33CAB4AA6010A34FB7507C2D40C73F6C252F89@wilbur.MICROPILOT.COM>
Message-ID: <40C0AC28.8030906@pobox.com>

Gerald Brandt wrote:
> Hi,
> 
> I would like to know how to get the elevation from a specific coordinate
> (in latitude/longitude or UTM).  I can convert between lat/long and UTM
> as needed for the specific map data loaded, but I don't know how to get
> the elevation of that coordinate.
> 
> I'm assuming that I need to get the xpixel and yline values, and
> reference off of that somehow.  But, being new to GDAL, I'm not quite
> sure.


Gerald,

I haven't got time to prepare a proper demonstration.  But the brief answer
is you need to:

  o Transform your coordinate into the coordinate system of the image.
    For instance if you start with lat/long but the image is in UTM, convert
    it to UTM.
  o Convert that coordinate to image pixel/line coordinates.  Assuming the
    image is north-up (no rotational coefficients) then this would be:

    pixel_x = (geo_x - gt[0]) / gt[1]
    pixel_y = (geo_y - gt[3]) / gt[5]

    Where gt[] is the Geotransform array fetched with the GetGeotransform()
    method on the GDALDataset.

  o Read just that pixel with RasterIO().

    eg.

    double dfElev;

    poDS->GetRasterBand(1)->RasterIO( GF_Read, pixel_x, pixel_y, 1, 1,
                                      &dfElev, 1, 1, GDT_Float64 );

or something like that.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Fri Jun  4 12:16:25 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Longitude and Latitude to X and Y Raster position
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F87@wilbur.MICROPILOT.COM>

Hi,

How would I go about getting the X and Y raster position from a
longitude and latitude position?

Thanks,
Gerald

From gbr at MICROPILOT.com  Fri Jun  4 13:14:51 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Longitude and Latitude to X and Y Raster position
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F8A@wilbur.MICROPILOT.COM>

Replying to myself.  I got this one going, thanks...



> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Gerald Brandt
> Sent: Friday, June 04, 2004 11:16 AM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] Longitude and Latitude to X and Y Raster position
> 
> 
> Hi,
> 
> How would I go about getting the X and Y raster position from 
> a longitude and latitude position?
> 
> Thanks,
> Gerald
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal> -dev
> 

From gbr at MICROPILOT.com  Fri Jun  4 13:37:11 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Find elevation data at specific point
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F8B@wilbur.MICROPILOT.COM>

Thanks!  What would the pixelx, liney formula be if the image is not
north up?  

I'm working with DEM and DTED and have not yet seen anything that isn't
north up, but that doesn't mean there aren't any!

Thanks,

Gerald


> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: Friday, June 04, 2004 12:07 PM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] Find elevation data at specific point
> 
> 
> Gerald Brandt wrote:
> > Hi,
> > 
> > I would like to know how to get the elevation from a specific 
> > coordinate (in latitude/longitude or UTM).  I can convert between 
> > lat/long and UTM as needed for the specific map data loaded, but I 
> > don't know how to get the elevation of that coordinate.
> > 
> > I'm assuming that I need to get the xpixel and yline values, and 
> > reference off of that somehow.  But, being new to GDAL, I'm 
> not quite 
> > sure.
> 
> 
> Gerald,
> 
> I haven't got time to prepare a proper demonstration.  But 
> the brief answer is you need to:
> 
>   o Transform your coordinate into the coordinate system of the image.
>     For instance if you start with lat/long but the image is 
> in UTM, convert
>     it to UTM.
>   o Convert that coordinate to image pixel/line coordinates.  
> Assuming the
>     image is north-up (no rotational coefficients) then this would be:
> 
>     pixel_x = (geo_x - gt[0]) / gt[1]
>     pixel_y = (geo_y - gt[3]) / gt[5]
> 
>     Where gt[] is the Geotransform array fetched with the 
> GetGeotransform()
>     method on the GDALDataset.
> 
>   o Read just that pixel with RasterIO().
> 
>     eg.
> 
>     double dfElev;
> 
>     poDS->GetRasterBand(1)->RasterIO( GF_Read, pixel_x, pixel_y, 1, 1,
>                                       &dfElev, 1, 1, GDT_Float64 );
> 
> or something like that.
> 
> Good luck,
> 
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal> -dev
> 

From warmerdam at pobox.com  Fri Jun  4 13:46:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Find elevation data at specific point
In-Reply-To: <33CAB4AA6010A34FB7507C2D40C73F6C252F8B@wilbur.MICROPILOT.COM>
References: <33CAB4AA6010A34FB7507C2D40C73F6C252F8B@wilbur.MICROPILOT.COM>
Message-ID: <40C0B571.50009@pobox.com>

Gerald Brandt wrote:
> Thanks!  What would the pixelx, liney formula be if the image is not
> north up?  
> 
> I'm working with DEM and DTED and have not yet seen anything that isn't
> north up, but that doesn't mean there aren't any!

Gerald,

Ummm, well it gets more complicated.

I normally invert the geotransform matrix, and then use it in format fashion.

The following code will invert the geotransform[]:

/************************************************************************/
/*                          InvGeoTransform()                           */
/*                                                                      */
/*      Invert a standard 3x2 "GeoTransform" style matrix with an       */
/*      implicit [1 0 0] final row.                                     */
/************************************************************************/

int InvGeoTransform( double *gt_in, double *gt_out )

{
     double	det, inv_det;

     /* we assume a 3rd row that is [1 0 0] */

     /* Compute determinate */

     det = gt_in[1] * gt_in[5] - gt_in[2] * gt_in[4];

     if( fabs(det) < 0.000000000000001 )
         return 0;

     inv_det = 1.0 / det;

     /* compute adjoint, and devide by determinate */

     gt_out[1] =  gt_in[5] * inv_det;
     gt_out[4] = -gt_in[4] * inv_det;

     gt_out[2] = -gt_in[2] * inv_det;
     gt_out[5] =  gt_in[1] * inv_det;

     gt_out[0] = ( gt_in[2] * gt_in[3] - gt_in[0] * gt_in[5]) * inv_det;
     gt_out[3] = (-gt_in[1] * gt_in[3] + gt_in[0] * gt_in[4]) * inv_det;

     return 1;
}

Then you could compute the pixel/line from geo_x, geo_y like this:

pixel = gt[0] + geo_x * gt[1] + geo_y * gt[2]
line = gt[3] + geo_x * gt[4] + geo_y * gt[5]

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Fri Jun  4 16:07:49 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RasterIO() speed
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C031B20@wilbur.MICROPILOT.COM>

Hi,

I have a loaded DEM file (USGSDEM/USGS Optional ASCII DEM) of Lake
Tahoe.  It's size is 3516 x 8430 x 1.

My command is 

dataset->GetRasterBand(1)->RasterIO(GF_Read, xpixel, yline, 1, 1,
&elevation, 1, 1, GDT_Float64, 0, 0) ;

With and xpixel value of 329 and a yline value of 4199.

The RasterIO() call takes 340 seconds on a Pentium 4 2.8 GHz
hyper-threaded system.  The cpu sits between 17% and 25% while in the
call.  Is this normal, and if so, is there a way that I can speed up the
process other than caching the elevation in my own array for every point
in the grid?

Thanks,

Gerald

From gbr at MICROPILOT.com  Fri Jun  4 16:22:08 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Elevation Units in DEM or DTED files
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F8D@wilbur.MICROPILOT.COM>

Hi,

Is there a way using GDAL where I can find out the units used for
measurements.  For example, is the elevation in feet or in meters?  I
looked at the projection text and couldn't find anything.

Thanks,

Gerald

From warmerdam at pobox.com  Fri Jun  4 16:24:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RasterIO() speed
In-Reply-To: <33CAB4AA6010A34FB7507C2D40C73F6C031B20@wilbur.MICROPILOT.COM>
References: <33CAB4AA6010A34FB7507C2D40C73F6C031B20@wilbur.MICROPILOT.COM>
Message-ID: <40C0DA73.7040305@pobox.com>

Gerald Brandt wrote:
> Hi,
> 
> I have a loaded DEM file (USGSDEM/USGS Optional ASCII DEM) of Lake
> Tahoe.  It's size is 3516 x 8430 x 1.
> 
> My command is 
> 
> dataset->GetRasterBand(1)->RasterIO(GF_Read, xpixel, yline, 1, 1,
> &elevation, 1, 1, GDT_Float64, 0, 0) ;
> 
> With and xpixel value of 329 and a yline value of 4199.
> 
> The RasterIO() call takes 340 seconds on a Pentium 4 2.8 GHz
> hyper-threaded system.  The cpu sits between 17% and 25% while in the
> call.  Is this normal, and if so, is there a way that I can speed up the
> process other than caching the elevation in my own array for every point
> in the grid?

Gerald,

This is an unusually large USGS DEM ASCII file.  I gather this is not a
standard product?

The USGS DEM driver (unlike most other drivers) just reads the whole
file into memory.  I think it is cached, so subsequent reads should
be essentially instant.   If not, just read the whole file into memory and
close the file then access the data from your memory array.

For most formats GDAL only loads parts of the file as needed and endevours
to avoid using too much memory.  USGS DEM is an exception.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Fri Jun  4 16:40:33 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RasterIO() speed
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F8E@wilbur.MICROPILOT.COM>

Subsequent requests for elevation information from the same file is
quick.  Memory usage of my app jumps from 3.5 MB to about 119 MB though.

Thanks for the quick help!


Gerald


> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: Friday, June 04, 2004 3:24 PM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] RasterIO() speed
> 
> 
> Gerald Brandt wrote:
> > Hi,
> > 
> > I have a loaded DEM file (USGSDEM/USGS Optional ASCII DEM) of Lake 
> > Tahoe.  It's size is 3516 x 8430 x 1.
> > 
> > My command is
> > 
> > dataset->GetRasterBand(1)->RasterIO(GF_Read, xpixel, yline, 1, 1,
> > &elevation, 1, 1, GDT_Float64, 0, 0) ;
> > 
> > With and xpixel value of 329 and a yline value of 4199.
> > 
> > The RasterIO() call takes 340 seconds on a Pentium 4 2.8 GHz 
> > hyper-threaded system.  The cpu sits between 17% and 25% 
> while in the 
> > call.  Is this normal, and if so, is there a way that I can 
> speed up 
> > the process other than caching the elevation in my own 
> array for every 
> > point in the grid?
> 
> Gerald,
> 
> This is an unusually large USGS DEM ASCII file.  I gather 
> this is not a standard product?
> 
> The USGS DEM driver (unlike most other drivers) just reads 
> the whole file into memory.  I think it is cached, so 
> subsequent reads should
> be essentially instant.   If not, just read the whole file 
> into memory and
> close the file then access the data from your memory array.
> 
> For most formats GDAL only loads parts of the file as needed 
> and endevours to avoid using too much memory.  USGS DEM is an 
> exception.
> 
> Best regards,
> 
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal> -dev
> 

From warmerdam at pobox.com  Fri Jun  4 17:29:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Elevation Units in DEM or DTED files
In-Reply-To: <33CAB4AA6010A34FB7507C2D40C73F6C252F8D@wilbur.MICROPILOT.COM>
References: <33CAB4AA6010A34FB7507C2D40C73F6C252F8D@wilbur.MICROPILOT.COM>
Message-ID: <40C0E99D.3050803@pobox.com>

Gerald Brandt wrote:
> Hi,
> 
> Is there a way using GDAL where I can find out the units used for
> measurements.  For example, is the elevation in feet or in meters?  I
> looked at the projection text and couldn't find anything.

Gerald,

Call GetUnitType() on a GDALRasterBand and it will return either "m" or "ft"
indicating the pixel values are elevations in meters or feet.  Defaults to
meters even for non-elevation products.  It does return ft for some USGS DEM,
and SDTS dem products.  Not sure about USGS DEM.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Fri Jun  4 17:38:03 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Elevation Units in DEM or DTED files
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252F8F@wilbur.MICROPILOT.COM>

Thanks again.  This one I should have been able to find myself... Doh!

Gerald


> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: Friday, June 04, 2004 4:29 PM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] Elevation Units in DEM or DTED files
> 
> 
> Gerald Brandt wrote:
> > Hi,
> > 
> > Is there a way using GDAL where I can find out the units used for 
> > measurements.  For example, is the elevation in feet or in 
> meters?  I 
> > looked at the projection text and couldn't find anything.
> 
> Gerald,
> 
> Call GetUnitType() on a GDALRasterBand and it will return 
> either "m" or "ft" indicating the pixel values are elevations 
> in meters or feet.  Defaults to meters even for non-elevation 
> products.  It does return ft for some USGS DEM, and SDTS dem 
> products.  Not sure about USGS DEM.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal> -dev
> 

From cgn at globexplorer.com  Sat Jun  5 13:59:11 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RasterIO() speed
Message-ID: <71E37EF6B7DCC1499CEA0316A256832801473670@loki.wc.globexplorer.net>

If folks are seriously psyched (or psycho...) they might consider using readv(2) and writev(2) to different offsets in the source and target buffers...

Chris


-----Original Message-----
From:	Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent:	Fri 6/4/2004 1:24 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	Re: [Gdal-dev] RasterIO() speed
Gerald Brandt wrote:
> Hi,
> 
> I have a loaded DEM file (USGSDEM/USGS Optional ASCII DEM) of Lake
> Tahoe.  It's size is 3516 x 8430 x 1.
> 
> My command is 
> 
> dataset->GetRasterBand(1)->RasterIO(GF_Read, xpixel, yline, 1, 1,
> &elevation, 1, 1, GDT_Float64, 0, 0) ;
> 
> With and xpixel value of 329 and a yline value of 4199.
> 
> The RasterIO() call takes 340 seconds on a Pentium 4 2.8 GHz
> hyper-threaded system.  The cpu sits between 17% and 25% while in the
> call.  Is this normal, and if so, is there a way that I can speed up the
> process other than caching the elevation in my own array for every point
> in the grid?

Gerald,

This is an unusually large USGS DEM ASCII file.  I gather this is not a
standard product?

The USGS DEM driver (unlike most other drivers) just reads the whole
file into memory.  I think it is cached, so subsequent reads should
be essentially instant.   If not, just read the whole file into memory and
close the file then access the data from your memory array.

For most formats GDAL only loads parts of the file as needed and endevours
to avoid using too much memory.  USGS DEM is an exception.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From jaime at maintask.com  Sat Jun  5 17:52:14 2004
From: jaime at maintask.com (=?ISO-8859-1?Q?Jaime_Mej=EDa?=)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SRS ogr2ogr - cs2cs - postgis
Message-ID: <40C2408E.9070709@maintask.com>

Hello.

I've simplified my problem, in order to get some help:
I have a shape file (attached) containing a single point (994097.623824 
1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.

When I try to transform it to WGS84 DATUM using ogr2ogr:
----------------------
ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
/home/jaime/punto_prueba.shp
----------------------
The point now have the following coordinates: -74.1341093150,4.6350408295

If I take the shape into postgis, and try to transform it, I get the 
following:

----------------------
 SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
expedientes WHERE num_radicacion=199931011;
 num_radicacion |                 the_geom                 
|                      wgs84
----------------+------------------------------------------+--------------------------------------------------
      199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
SRID=1;POINT(-74.1306989066892 4.63219422246886)
----------------------

Finally, using cs2cs:
----------------------
jaime@fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
+lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 
+y_0=1tl +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
# ---- From Coordinate System ----
#Transverse Mercator
#       Cyl, Sph&Ell
# +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
# +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
# +towgs84=307,304,-318,0,0,0,0
#--- following specified but NOT used
# +ellps=clrk66
# ---- To Coordinate System ----
#Lat/long (Geodetic)
#
# +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
994097.623824 1003980.4918
74d7'50.516"W   4d37'55.899"N 16.920
----------------------
74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666

As you can see, the results are different (+/- 500 m):
With ogr2ogr: -74.1341093150,4.6350408295
With postgis: -74.1306989066892 4.63219422246886
With cs2cs:-74.13069888888 4.63219416666

So, I assume there is an error in the ogr2ogr command, or in ogr2ogr itself.

Somebody can help?




-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.dbf
Type: application/octet-stream
Size: 153 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040605/d3e84bd6/punto_prueba.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.shp
Type: application/octet-stream
Size: 128 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040605/d3e84bd6/punto_prueba-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.shx
Type: application/octet-stream
Size: 108 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040605/d3e84bd6/punto_prueba-0002.obj
From paul-grass at stjohnspoint.co.uk  Sun Jun  6 09:20:12 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: [Proj] SRS ogr2ogr - cs2cs - postgis
In-Reply-To: <40C2408E.9070709@maintask.com>
References: <40C2408E.9070709@maintask.com>
Message-ID: <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>

On Sat, 5 Jun 2004, [ISO-8859-1] Jaime Meja wrote:

> Hello.
>
> I've simplified my problem, in order to get some help:
> I have a shape file (attached) containing a single point (994097.623824 
> 1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.
>
> When I try to transform it to WGS84 DATUM using ogr2ogr:
> ----------------------
> ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
> /home/jaime/punto_prueba.shp
> ----------------------
> The point now have the following coordinates: -74.1341093150,4.6350408295
>
> If I take the shape into postgis, and try to transform it, I get the 
> following:
>
> ----------------------
> SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
> expedientes WHERE num_radicacion=199931011;
> num_radicacion |                 the_geom                 | 
> wgs84
> ----------------+------------------------------------------+--------------------------------------------------
>     199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
> SRID=1;POINT(-74.1306989066892 4.63219422246886)
> ----------------------
>
> Finally, using cs2cs:
> ----------------------
> jaime@fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
> +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 +y_0=1tl 
> +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
> # ---- From Coordinate System ----
> #Transverse Mercator
> #       Cyl, Sph&Ell
> # +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
> # +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
> # +towgs84=307,304,-318,0,0,0,0
> #--- following specified but NOT used
> # +ellps=clrk66
> # ---- To Coordinate System ----
> #Lat/long (Geodetic)
> #
> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> 994097.623824 1003980.4918
> 74d7'50.516"W   4d37'55.899"N 16.920
> ----------------------
> 74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666
>
> As you can see, the results are different (+/- 500 m):
> With ogr2ogr: -74.1341093150,4.6350408295
> With postgis: -74.1306989066892 4.63219422246886
> With cs2cs:-74.13069888888 4.63219416666
>
> So, I assume there is an error in the ogr2ogr command, or in ogr2ogr itself.

No reason to assume an error---you gave ogr2ogr and cs2cs different input.

For ogr2ogr you said "EPSG:21892", which doesn't include any datum 
transformation parameters, whereas for cs2cs you gave the parameters 
specifically as +towgs84=307,304,-318
It's not clear to me where the parameters are coming from in the PostGIS 
example. The cs2cs example also looks like it's missing ellipsoid 
information.

If you want to reproduce the erroneous and correct result with cs2cs, try:

echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 \
+to +init=epsg:4326

74d8'2.794"W    4d38'5.669"N (wrong?)

echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 +towgs84=307,304,-318 \
+to +init=epsg:4326
74d7'50.516"W   4d37'55.899"N (correct?)

So something like -s_srs "+init=epsg:21892 +towgs84=307,304,-318" in the 
ogr2ogr command line should probably work (if these parameters are correct 
for the Bogota_1975 datum).

Paul K
From eduardo at consultoria.eti.br  Sun Jun  6 17:05:06 2004
From: eduardo at consultoria.eti.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] crash running gdal-120-ntbin.zip tools
Message-ID: <20040606210506.5568.qmail@hm47.locaweb.com.br>

hello GDALers.

I've just downloaded gdal-120-ntbin.zip package from Gdal site, but when trying to run any of the following tools:

gdal_translate.exe
gdalinfo.exe
gdalwarp.exe
gdalwarpsimple.exe
ogr2ogr.exe
ogrinfo.exe

I got the following error message at my winXP:

"This aplication could not be loaded because xerces-c_2_3_0.dll was not found..."

where I can find this DLL ?

I have xerces-c_1_6_0.dll ( downloaded with mapserver4 from DMsolutions) but it seems it has no effect...
the tools are asking for xerces-c_2_3_0.dll.

thanks

Eduardo Patto Kanegae
http://www.consultoria.eti.br
UIN: 303747254

I Encontro Nacional de Usu?rios MapServer - http://mapserver.cttmar.univali.br/encontro2004
Projeto MapServer Brasil - http://mapserver.cttmar.univali.br

***Fim da Mensagem / End of Message ***





From roger at beardandsandals.co.uk  Mon Jun  7 07:37:08 2004
From: roger at beardandsandals.co.uk (Roger James)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Small fix for geo_normalize.c in libgeotiff
Message-ID: <000001c44c83$c5505720$fe0ba8c0@lancaster.beardandsandals.co.uk>

In recent builds the name of the datum.csv has changed to
gdal_datum.csv. This change has not been picked up in geo_nomalize.c.

 

int GTIFGetDatumInfo( int nDatumCode, char ** ppszName, short *
pnEllipsoid )

 

{

    char    szSearchKey[24];

    int           nEllipsoid;

    const char *pszFilename = CSVFilename( "datum.csv" );

 

The simple change would be 

 

    const char *pszFilename = CSVFilename( "gdal_datum.csv" );

 

however a backward compatible change such as has been applied elesewhwew
requires more thought.

 

Roger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040607/bf19916f/attachment.html
From andreas.wimmer at joanneum.at  Mon Jun  7 04:20:00 2004
From: andreas.wimmer at joanneum.at (Andreas Wimmer)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] GDAL creates (Erdas) img files which cannot be read by Erdas Imagine
Message-ID: <ca18fj$oi3$1@sea.gmane.org>

We have started to use GDAL to support reading/writing
Erdas img files for our in-house Image processing library

So far everything worked fine, we are able to produce
img-files for 8, 16, 32 Bit integers as well as float 
and double.
The files can be read and written by our software without
any problem, unfortunately any 32 Bit integer file 
leads to a crash when we try to view it with the Erdas
native software Erdas imagine. Since we implemented 
the img format for easy data transfer to/from erdas this
is a serious problem for us.
On closer inspection I didn?t find any reason why these files
could not be read by erdas. I experimented a little bit 
and found the situation even more confusing when I tried to
produce img files with 256 Pixels Block-size.
In this case only the 8Bit version could be processed by Erdas
imagine. The 32Bit files produced an "Out of memory" error, 
the 16 Bit, float and double files lead to an incorrect display
(only 16 lines of any Block are displayed)
I have no idea why this happens and I know definitly that erdas
imagine is capable of processing such files, since it works 
properly when such files ( 16, 32Bit, float and double) are 
produced by erdas itself.
Unfortunatly I found no significant difference between our output
and erdas output (using hfatest, and even with a hex-editor)

I hope sombody can help me

Best regards,
Andreas



-- 
Andreas Wimmer
andreas.wimmer@joanneum.at


From warmerdam at pobox.com  Mon Jun  7 09:00:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Small fix for geo_normalize.c in libgeotiff
In-Reply-To: <000001c44c83$c5505720$fe0ba8c0@lancaster.beardandsandals.co.uk>
References: <000001c44c83$c5505720$fe0ba8c0@lancaster.beardandsandals.co.uk>
Message-ID: <40C466FF.7060300@pobox.com>

Roger James wrote:
> In recent builds the name of the datum.csv has changed to 
> gdal_datum.csv. This change has not been picked up in geo_nomalize.c.
> 
>  
> 
> int GTIFGetDatumInfo( int nDatumCode, char ** ppszName, short * 
> pnEllipsoid )
> 
>  
> 
> {
> 
>     char    szSearchKey[24];
> 
>     int           nEllipsoid;
> 
>     const char *pszFilename = CSVFilename( "datum.csv" );

Roger,

I have changed the code to read:

{
     char	szSearchKey[24];
     int		nEllipsoid;
     const char *pszFilename = CSVFilename( "datum.csv" );
     FILE       *fp;

/* -------------------------------------------------------------------- */
/*      If we can't find datum.csv then gdal_datum.csv is an            */
/*      acceptable fallback.  Mostly this is for GDAL.                  */
/* -------------------------------------------------------------------- */
     if( (fp = VSIFOpen(pszFilename,"r")) == NULL )
         pszFilename = CSVFilename( "gdal_datum.csv" );
     else
         VSIFClose( fp );


As might be deduced from the name, gdal_datum.csv is really GDAL specific.
It is the same as datum.csv with an extra column containing the equivelent
ESRI name for the datum.  I don't normally notice this problem because I have
the geotiff support files installed in /usr/local/share/epsg_csv.   However, in
a pure GDAL build using the internal libgeotiff this would be missing.

A more proper solution would likely be to have GDAL override the CSVFilename()
to apply this naming logic but that can be problematic in some situations
so I will take advantage of my role as maintainer of libgeotiff to hack in
GDAL specific support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jun  7 09:18:28 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] append option in ogr2ogr
In-Reply-To: <5.1.0.14.2.20040602110318.023a3610@mail.vz.geodan.nl>
References: <5.1.0.14.2.20040602110318.023a3610@mail.vz.geodan.nl>
Message-ID: <40C46B24.90104@pobox.com>

Hans Verlouw wrote:
> Hi list,
> 
> I noticed some strange behaviour when using the 'append' option of ogr2ogr.
> I have twelve 2-dimensional ESRI shape files that I want to convert to 
> one single table in Oracle Spatial 9i.
> When I convert one shape file and explicitly specify the -lco DIM=2 
> option, the result is OK, so SDO_GTYPE = 2007 for all records.
> 
> But after I append other shape files (which are 2D originally too) the 
> resulting Oracle table gets over 90% records that are 3D,
> so with SDO_GTYPE = 3007
> 
> For every step I specify the -lco DIM=2 option.

Hans,

The -lco options are not utilized in append mode so ogr2ogr has no obvious
way of knowing it should create 2D geometries instead of 3D.  I have to
reboot to win32 to test Oracle stuff, so I haven't looked into the problem
yet.   Would you mind filing a bug in bugzilla about it?

In the meantime, if you can rebuild GDAL you could edit
gdal/ogr/ogrsf_frmts/oci/ogrociwritablelayer.cpp and change nDimension
to be 2 in the constructor near the beginning.

It is possible that Oracle actually keeps track that the layer type is
2D in the supporting table and I could initialize this value more properly
from that source.  However, I will need to do some digging to establish if
that is the case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jaime at maintask.com  Mon Jun  7 15:34:35 2004
From: jaime at maintask.com (=?ISO-8859-1?Q?Jaime_Mej=EDa?=)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: [Proj] SRS ogr2ogr - cs2cs - postgis
In-Reply-To: <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>
References: <40C2408E.9070709@maintask.com> <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>
Message-ID: <40C4C34B.6070907@maintask.com>

Paul Kelly wrote:

> On Sat, 5 Jun 2004, [ISO-8859-1] Jaime Mej?a wrote:
>
>> Hello.
>>
>> I've simplified my problem, in order to get some help:
>> I have a shape file (attached) containing a single point 
>> (994097.623824 1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.
>>
>> When I try to transform it to WGS84 DATUM using ogr2ogr:
>> ----------------------
>> ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 
>> /home/jaime/resultado_wgs84 /home/jaime/punto_prueba.shp
>> ----------------------
>> The point now have the following coordinates: 
>> -74.1341093150,4.6350408295
>>
>> If I take the shape into postgis, and try to transform it, I get the 
>> following:
>>
>> ----------------------
>> SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
>> expedientes WHERE num_radicacion=199931011;
>> num_radicacion |                 the_geom                 | wgs84
>> ----------------+------------------------------------------+-------------------------------------------------- 
>>
>>     199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
>> SRID=1;POINT(-74.1306989066892 4.63219422246886)
>> ----------------------
>>
>> Finally, using cs2cs:
>> ----------------------
>> jaime@fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
>> +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 
>> +y_0=1tl +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
>> # ---- From Coordinate System ----
>> #Transverse Mercator
>> #       Cyl, Sph&Ell
>> # +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
>> # +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
>> # +towgs84=307,304,-318,0,0,0,0
>> #--- following specified but NOT used
>> # +ellps=clrk66
>> # ---- To Coordinate System ----
>> #Lat/long (Geodetic)
>> #
>> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>> 994097.623824 1003980.4918
>> 74d7'50.516"W   4d37'55.899"N 16.920
>> ----------------------
>> 74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666
>>
>> As you can see, the results are different (+/- 500 m):
>> With ogr2ogr: -74.1341093150,4.6350408295
>> With postgis: -74.1306989066892 4.63219422246886
>> With cs2cs:-74.13069888888 4.63219416666
>>
>> So, I assume there is an error in the ogr2ogr command, or in ogr2ogr 
>> itself.
>
>
> No reason to assume an error---you gave ogr2ogr and cs2cs different 
> input.
>
> For ogr2ogr you said "EPSG:21892", which doesn't include any datum 
> transformation parameters, whereas for cs2cs you gave the parameters 
> specifically as +towgs84=307,304,-318
> It's not clear to me where the parameters are coming from in the 
> PostGIS example. The cs2cs example also looks like it's missing 
> ellipsoid information.
>
> If you want to reproduce the erroneous and correct result with cs2cs, 
> try:
>
> echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 \
> +to +init=epsg:4326
>
> 74d8'2.794"W    4d38'5.669"N (wrong?)
>
> echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 
> +towgs84=307,304,-318 \
> +to +init=epsg:4326
> 74d7'50.516"W   4d37'55.899"N (correct?)
>
> So something like -s_srs "+init=epsg:21892 +towgs84=307,304,-318" in 
> the ogr2ogr command line should probably work (if these parameters are 
> correct for the Bogota_1975 datum).
>
> Paul
> K

Paul,

We've tried with those parameters in the command line, but allways the 
command failed with error.

So we've tried with an external file:
-----------------------------------
ogr2ogr -s_srs merc_bogota -t_srs WGS84 resultado_wgs84 punto_prueba.shp
-----------------------------------
where the file merc_bogota contains the following line with the required
parameters to perform the transformation from BOGOTA DATUM to WGS84 DATUM:
+proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
+x_0=1000000.000 +y_0=1000000.000 +ellps=intl +towgs84=307,304,-318,0,0,0,0
-----------------------------------
And this is the result:
-----------------------------------
jaime@centella[/pruebas]# ogrinfo -al resultado_wgs84/punto_prueba.shp
INFO: Open of `resultado_wgs84/punto_prueba.shp'
using driver `ESRI Shapefile' successful.

Layer name: punto_prueba
Geometry: Point
Feature Count: 1
Extent: (-74.134109, 4.635041) - (-74.134109, 4.635041)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
PROG_ID: Integer (5.0)
LABEL: String (50.0)
OGRFeature(punto_prueba):0
  PROG_ID (Integer) = 1
  LABEL (String) = Ramirez Elsa Graciela
  POINT (-74.13410932 4.63504083)

And the result (-74.13410932 4.63504083) is the same that with the command:
----------------------
ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
/home/jaime/punto_prueba.shp
----------------------
The point now have the following coordinates: -74.1341093150,4.6350408295


In both cases, it seems that ogr ommits the 
+towgs84=307,304,-318,0,0,0,0 parameter.
What could I be doing wrong?

Thanks a lot.




From jdenisgiguere at fastmail.fm  Mon Jun  7 17:56:02 2004
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] DEM projection conversion
Message-ID: <40C4E472.2000509@fastmail.fm>

Hi list,

I have USGS-DEM data and I would like to convert them in rasters in 
Lambert projection. I want to use these rasters with MapServer. I have 
tried to convert them in several format (pcidsk, hfa and bt) with 
gdalwarp, but the output rasters are always envelopped and I have bad 
result when I use gdaltindex after.

This is a sample execution of gdalwarp, maybye I don't use correct 
options...
$ gdalwarp -of BT \
-s_srs '+proj=latlong +datum=NAD83' \
-t_srs '+init=epsg:42304' \
some_dem_file some_dem_file.bt

Any idea to solve this problem will be greatly appreciated.

Thank you,

Jean-Denis

From warmerdam at pobox.com  Mon Jun  7 20:17:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] DEM projection conversion
In-Reply-To: <40C4E472.2000509@fastmail.fm>
References: <40C4E472.2000509@fastmail.fm>
Message-ID: <40C505B7.5000700@pobox.com>

Jean-Denis Giguere wrote:
> Hi list,
> 
> I have USGS-DEM data and I would like to convert them in rasters in 
> Lambert projection. I want to use these rasters with MapServer. I have 
> tried to convert them in several format (pcidsk, hfa and bt) with 
> gdalwarp, but the output rasters are always envelopped and I have bad 
> result when I use gdaltindex after.
> 
> This is a sample execution of gdalwarp, maybye I don't use correct 
> options...
> $ gdalwarp -of BT \
> -s_srs '+proj=latlong +datum=NAD83' \
> -t_srs '+init=epsg:42304' \
> some_dem_file some_dem_file.bt
> 
> Any idea to solve this problem will be greatly appreciated.

Jean-Denis,

can you be more specific about what you mean by "enveloped"?  Is the
issue that you have triangles of "nodata" in the output product?  This is
to be expected.  Are you unclear about how to use this data in MapServer
in such a way that the triangles of nodata are not rendered?

First, you should ensure the nodata areas are produced with a value that
is distict from valid values.  You might do this something like:

   gdalwarp -of BT -dstnodata -100 -wt Int16 \
     -s_srs '+proj=latlong +datum=NAD83' \
     -t_srs '+init=epsg:42304' \
     some_dem_file some_dem_file.bt

This forces "nodata areas", that is areas with no value written to them to
be initialized to -100.  The "-wt Int16" forces use of the Int16 type in
the warp ... and hopefully results in the output file being of type Int16
though I think that is implicit with BT format.

Ensuring the "nodata" value isn't used in MapServer is a bit tricky though.
If this was just 8bit greyscale data, you could just use the OFFSITE keyword
in the raster layer in MapServer.  However, if you are allowing MapServer to
autoscale your DEM data, the offsite stuff likely won't work quite like you
expect since the value it is looking for will be the post-scaling value.

If this is your issue, we will need to look at enhancements to MapServer or
perhaps preprocessing your data to 8bit in gdal_translate in such a way that
your nodata value remains distinct.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jdenisgiguere at fastmail.fm  Mon Jun  7 21:07:37 2004
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] DEM projection conversion
In-Reply-To: <40C505B7.5000700@pobox.com>
References: <40C4E472.2000509@fastmail.fm> <40C505B7.5000700@pobox.com>
Message-ID: <40C51159.7060207@fastmail.fm>

Frank Warmerdam a ?crit :
> Jean-Denis Giguere wrote:
> 
>> Hi list,
>>
>> I have USGS-DEM data and I would like to convert them in rasters in 
>> Lambert projection. I want to use these rasters with MapServer. I have 
>> tried to convert them in several format (pcidsk, hfa and bt) with 
>> gdalwarp, but the output rasters are always envelopped and I have bad 
>> result when I use gdaltindex after.
>>
>> This is a sample execution of gdalwarp, maybye I don't use correct 
>> options...
>> $ gdalwarp -of BT \
>> -s_srs '+proj=latlong +datum=NAD83' \
>> -t_srs '+init=epsg:42304' \
>> some_dem_file some_dem_file.bt
>>
>> Any idea to solve this problem will be greatly appreciated.
> 
> 
> Jean-Denis,
> 
> can you be more specific about what you mean by "enveloped"?  Is the
> issue that you have triangles of "nodata" in the output product?  This is
> to be expected.  Are you unclear about how to use this data in MapServer
> in such a way that the triangles of nodata are not rendered?
> 
> First, you should ensure the nodata areas are produced with a value that
> is distict from valid values.  You might do this something like:
> 
>   gdalwarp -of BT -dstnodata -100 -wt Int16 \
>     -s_srs '+proj=latlong +datum=NAD83' \
>     -t_srs '+init=epsg:42304' \
>     some_dem_file some_dem_file.bt
> 
> This forces "nodata areas", that is areas with no value written to them to
> be initialized to -100.  The "-wt Int16" forces use of the Int16 type in
> the warp ... and hopefully results in the output file being of type Int16
> though I think that is implicit with BT format.
> 
> Ensuring the "nodata" value isn't used in MapServer is a bit tricky though.
> If this was just 8bit greyscale data, you could just use the OFFSITE 
> keyword
> in the raster layer in MapServer.  However, if you are allowing 
> MapServer to
> autoscale your DEM data, the offsite stuff likely won't work quite like you
> expect since the value it is looking for will be the post-scaling value.
> 
> If this is your issue, we will need to look at enhancements to MapServer or
> perhaps preprocessing your data to 8bit in gdal_translate in such a way 
> that
> your nodata value remains distinct.
> 
> Best regards,
> 

Thank you very much Frank,

I will try to precise a little bit what is my problem. It's not really 
problematic to see region with no data displayed. However, your advice 
will consederably improve output graphical quality. My problem is when I 
use gdaltindex to create tile for my rasters. I have contiguous rasters 
in latlong but, the converted rasters are larger and overlap.

+-+-+         +--+
| | |         |/+--+
+-+-+ become  +-|//|
| | |         |/+--+
+-+-+         +-|//|
                 +--+


Result, some no-data area hide data.

Hope this clarify a little bit,

Jean-Denis

From eduardo at consultoria.eti.br  Tue Jun  8 07:13:58 2004
From: eduardo at consultoria.eti.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] crash running gdal-120-ntbin.zip tools
Message-ID: <40C59F76.6050101@consultoria.eti.br>

hello.

I've just downloaded gdal-120-ntbin.zip package from Gdal site, but when trying to run any of the following tools:

gdal_translate.exe
gdalinfo.exe
gdalwarp.exe
gdalwarpsimple.exe
ogr2ogr.exe
ogrinfo.exe

I got the following error message at my winXP:

"This aplication could not be loaded because xerces-c_2_3_0.dll was not found..."

where I can find this DLL ?

I have xerces-c_1_6_0.dll ( downloaded with mapserver4 from DMsolutions) but it seems it has no effect...
the tools are asking for xerces-c_2_3_0.dll.

thanks

Eduardo Patto Kanegae
http://www.consultoria.eti.br
UIN: 303747254

I Encontro Nacional de Usu?rios MapServer - http://mapserver.cttmar.univali.br/encontro2004
Projeto MapServer Brasil - http://mapserver.cttmar.univali.br

***Fim da Mensagem / End of Message ***


From warmerdam at pobox.com  Tue Jun  8 08:49:33 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] crash running gdal-120-ntbin.zip tools
In-Reply-To: <40C59F76.6050101@consultoria.eti.br>
References: <40C59F76.6050101@consultoria.eti.br>
Message-ID: <40C5B5DD.1050600@pobox.com>

Eduardo Patto Kanegae wrote:
> hello.
> 
> I've just downloaded gdal-120-ntbin.zip package from Gdal site, but when 
> trying to run any of the following tools:
> 
> gdal_translate.exe
> gdalinfo.exe
> gdalwarp.exe
> gdalwarpsimple.exe
> ogr2ogr.exe
> ogrinfo.exe

Folks,

I'm afraid the gdal-120-ntbin.zip is missing a few key files.  I will remove
the link to it from the web site.

I would suggest the OpenEV_FW binary build series.  This includes GDAL and
many other tools.

eg.

   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_174.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From normanb at comsine.co.uk  Tue Jun  8 16:54:13 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] crash running gdal-120-ntbin.zip tools
In-Reply-To: <40C5B5DD.1050600@pobox.com>
References: <40C59F76.6050101@consultoria.eti.br> <40C5B5DD.1050600@pobox.com>
Message-ID: <40C62775.7060604@comsine.co.uk>

Hi Frank,

don't remove the binary distribution yet please!  I am using it, and 
will probably need to download it.

I grabbed the xerces dll from the archives on the apache web site, and 
it worked fine!

Many thanks,

Norman

Frank Warmerdam wrote:

> Eduardo Patto Kanegae wrote:
>
>> hello.
>>
>> I've just downloaded gdal-120-ntbin.zip package from Gdal site, but 
>> when trying to run any of the following tools:
>>
>> gdal_translate.exe
>> gdalinfo.exe
>> gdalwarp.exe
>> gdalwarpsimple.exe
>> ogr2ogr.exe
>> ogrinfo.exe
>
>
> Folks,
>
> I'm afraid the gdal-120-ntbin.zip is missing a few key files.  I will 
> remove
> the link to it from the web site.
>
> I would suggest the OpenEV_FW binary build series.  This includes GDAL 
> and
> many other tools.
>
> eg.
>
>   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_174.zip
>
> Best regards,


From DLowther at scigis.com  Tue Jun  8 09:14:18 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A49F@sci_pe-1.scigis.com>

Are there any limitations to the size of TIF that can be created when
going from SID to TIF using GDAL compiled with the Lizardtech SDK? We
have been trying to decompress some color county mosaics using
mrsiddecode from Lizardtech without success and it has been suggested
that this is because there is a 4GB file size limit for the resultant
TIF - supposedly due to MS Windows - and our resultant TIF would be 8GB
or more. Does anyone know if this would apply to using GDAL on Windows?
What about GDAL on Linux? If all of these seem to be dead ends, has
anyone got any suggestions on decompressing these things?

 

Thanks,

 

Dave

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040608/0038e031/attachment.html
From ed at topozone.com  Tue Jun  8 09:32:59 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB077055@ptolemy.topozone.com>

Dave -

The FAT32 filesystem has a file size limit of 4GB, and the popular Linux
filesystems (ext2, ext3, ReiserFS) have the same limitation for the
standard filesystem API (the Large File System interface in 2.4 kernels
requires apps written to the LFS API).  NTFS filesystems do not have a
4GB file limitation.

However, it's VERY common to see application software with 4GB file size
limits coded into it, but I would double-check with LizardTech before
concluding that the 4GB output file limit is due solely to Windows or is
a limitation of the MrSID software.

	- Ed



Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of David W. Lowther
Sent: Tuesday, June 08, 2004 9:14 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] SID to TIF

Are there any limitations to the size of TIF that can be created when
going from SID to TIF using GDAL compiled with the Lizardtech SDK? We
have been trying to decompress some color county mosaics using
mrsiddecode from Lizardtech without success and it has been suggested
that this is because there is a 4GB file size limit for the resultant
TIF - supposedly due to MS Windows - and our resultant TIF would be 8GB
or more. Does anyone know if this would apply to using GDAL on Windows?
What about GDAL on Linux? If all of these seem to be dead ends, has
anyone got any suggestions on decompressing these things?

 

Thanks,

 

Dave

 


From dron at ak4719.spb.edu  Tue Jun  8 09:39:36 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E08A49F@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E08A49F@sci_pe-1.scigis.com>
Message-ID: <20040608133935.GA15100@ak4719.spb.edu>

On Tue, Jun 08, 2004 at 08:14:18AM -0500, David W. Lowther wrote:
> Are there any limitations to the size of TIF that can be created when
> going from SID to TIF using GDAL compiled with the Lizardtech SDK? We
> have been trying to decompress some color county mosaics using
> mrsiddecode from Lizardtech without success and it has been suggested
> that this is because there is a 4GB file size limit for the resultant
> TIF

Exactly. TIFF files are limited in 4GB by design.

BTW, you can find the size limits for GDAL supported formats here:

 http://www.remotesensing.org/gdal/formats_list.html

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jnielsen at aero-graphics.com  Tue Jun  8 10:11:42 2004
From: jnielsen at aero-graphics.com (Jason M. Nielsen)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E08A49F@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E08A49F@sci_pe-1.scigis.com>
Message-ID: <1086703902.40c5c91ea0808@www.agi-lan.com>

Quoting "David W. Lowther" <DLowther@scigis.com>:

> Are there any limitations to the size of TIF that can be created when
> going from SID to TIF using GDAL compiled with the Lizardtech SDK? We
> have been trying to decompress some color county mosaics using
> mrsiddecode from Lizardtech without success and it has been suggested
> that this is because there is a 4GB file size limit for the resultant
> TIF - supposedly due to MS Windows - and our resultant TIF would be 8GB
> or more. Does anyone know if this would apply to using GDAL on Windows?
> What about GDAL on Linux? If all of these seem to be dead ends, has
> anyone got any suggestions on decompressing these things?
> 
>  
> 
> Thanks,
> 
>  
> 
> Dave

Apparently the TIFF size limitation is 2**32 bytes in length which is 4GB. It
seems like I have seen TIFFs greater than 6GB but only the file. Never seen them
visually. This does not really help you beyond one aspect. The Version 6 TIFF
specification seems to indicate you are limited to a 4GB TIFF.  Or maybe Im
entirely off in left field.

From ben at vterrain.org  Tue Jun  8 14:20:23 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] crash running gdal-120-ntbin.zip tools
In-Reply-To: <40C5B5DD.1050600@pobox.com>
Message-ID: <00db01c44d85$442067a0$f400fe0a@TOPP2>

Frank,

The GDAL binaries that i built and host are not, to the best of my
knowledge, missing any files at all.  The Xerces DLLs are deliberately
separate, since Xerces is a large separate library.

It would be good, however, to put a link on the GDAL site after
gdal-120-ntbin.zip which says "This GDAL was built on Xerces 2.3.0, which
you can download from /here/."

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Tuesday, June 08, 2004 8:50 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] crash running gdal-120-ntbin.zip tools
> 
> Folks,
> 
> I'm afraid the gdal-120-ntbin.zip is missing a few key files. 
> I will remove the link to it from the web site.
> 
> I would suggest the OpenEV_FW binary build series.  This 
> includes GDAL and many other tools.
> 
> eg.
>    ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_174.zip


From MChapman at sanz.com  Tue Jun  8 19:13:23 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] .img creation issues for files between 2 and 4 gig?
Message-ID: <ED3A48B9840E594890A2BC172D119465FB962C@mailman.san.com>

All,
 
I'm using the GDAL (1.1.9) c++ api to create .img files from geotiffs
with the CreateCopy() method.  The output files are between 2 and 4 gig.
The files do not appear to be generating correctly.  I can open and view
the final product but it appears as if only some of the bands are being
written to the file.  The image looks good until about half way down,
then it turns a shade of yellow.  I've tried this with gdal directly and
with OSSIM (which uses gdal for .img creation) and the results are the
same.  Erdas Imagine kicks the following error when opening the
generated file...

Operands are not the same type: <empty> NotEqual <string>

Has anyone experienced this behavior before?  

P.S.

I can, read .img files of all sizes correctly, and I can write .img
files correctly below 2 gig.  Only between 2 and 4 gig gives me this
behavior.

Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040608/765fb7e0/attachment.html
From dron at ak4719.spb.edu  Wed Jun  9 01:41:21 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] .img creation issues for files between 2 and 4 gig?
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB962C@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB962C@mailman.san.com>
Message-ID: <20040609054121.GA3127@ak4719.spb.edu>

Hello, Martin,

On Tue, Jun 08, 2004 at 05:13:23PM -0600, Chapman, Martin wrote:
> I'm using the GDAL (1.1.9) c++ api to create .img files from geotiffs
> with the CreateCopy() method.  The output files are between 2 and 4
> gig. The files do not appear to be generating correctly.  I can open
> and view the final product but it appears as if only some of the bands
> are being written to the file.  The image looks good until about half
> way down, then it turns a shade of yellow.  I've tried this with gdal
> directly and with OSSIM (which uses gdal for .img creation) and the
> results are the same.  Erdas Imagine kicks the following error when
> opening the generated file...
> 
> Operands are not the same type: <empty> NotEqual <string>
> 
> Has anyone experienced this behavior before?  
> 
> P.S.
> 
> I can, read .img files of all sizes correctly, and I can write .img
> files correctly below 2 gig.  Only between 2 and 4 gig gives me this
> behavior.

What about files larger than 4GB? Whether they can be opened properly?

ERDAS has different format for large files, and GDAL creates such files
when the file size becomes greater 4GB. Probably we should do that on
2GB border.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From MChapman at sanz.com  Wed Jun  9 11:33:49 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] .img creation issues for files between 2 and 4 gig?
Message-ID: <ED3A48B9840E594890A2BC172D119465FB962E@mailman.san.com>

Andrey,

Files greater than 4g work great.  I agree, the border line should be
2g.  How can I get that change in the GDAL baseline?  Do you know how to
make the change?  

Thanks,
Martin

-----Original Message-----
From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
Sent: Tuesday, June 08, 2004 11:41 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] .img creation issues for files between 2 and 4
gig?


Hello, Martin,

On Tue, Jun 08, 2004 at 05:13:23PM -0600, Chapman, Martin wrote:
> I'm using the GDAL (1.1.9) c++ api to create .img files from geotiffs 
> with the CreateCopy() method.  The output files are between 2 and 4 
> gig. The files do not appear to be generating correctly.  I can open 
> and view the final product but it appears as if only some of the bands

> are being written to the file.  The image looks good until about half 
> way down, then it turns a shade of yellow.  I've tried this with gdal 
> directly and with OSSIM (which uses gdal for .img creation) and the 
> results are the same.  Erdas Imagine kicks the following error when 
> opening the generated file...
> 
> Operands are not the same type: <empty> NotEqual <string>
> 
> Has anyone experienced this behavior before?
> 
> P.S.
> 
> I can, read .img files of all sizes correctly, and I can write .img 
> files correctly below 2 gig.  Only between 2 and 4 gig gives me this 
> behavior.

What about files larger than 4GB? Whether they can be opened properly?

ERDAS has different format for large files, and GDAL creates such files
when the file size becomes greater 4GB. Probably we should do that on
2GB border.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From jnielsen at aero-graphics.com  Wed Jun  9 12:21:28 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] reprojection feet instead of meters
Message-ID: <pan.2004.06.09.16.21.27.192203@aero-graphics.com>

I am reprojecting some NED data:

gdalwarp -s_srs epsg:4326 -t_srs epsg:26912 id1.img id1x.img -of HFA

but the 26912 system is in meters. Is there and easy way to specify during
that conversion to produce the img file in US Survey Feet instead?

Thanks.


From normanb at comsine.co.uk  Wed Jun  9 12:55:46 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] gdalwarp XML specification
Message-ID: <40C74112.7030102@comsine.co.uk>

Hi,

I am putting a soap wrapper  around gdalwarp for a proof of concept 
application.

I was thinking that the XML schemas defined for a WCTS would make a good 
start for wrapping some of
the required parameters,
http://gdal.velocet.ca/~warmerda/projects/wcts/

and I looked up the opengis doc, and saw I had to copy and paste the 
schemas from the pdf.

Does anyone have a copy of these schemas, ideas on how to best wrap up 
gdalwarp to make it
more generic for other gdal utilities etc.

Any help would be greatly appreciated.

Many thanks,

Norman Barker

From jnielsen at aero-graphics.com  Wed Jun  9 13:10:49 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: reprojection feet instead of meters
References: <pan.2004.06.09.16.21.27.192203@aero-graphics.com>
Message-ID: <pan.2004.06.09.17.10.49.557952@aero-graphics.com>

On Wed, 09 Jun 2004 10:21:28 -0600, jason wrote:

> I am reprojecting some NED data:
> 
> gdalwarp -s_srs epsg:4326 -t_srs epsg:26912 id1.img id1x.img -of HFA
> 
> but the 26912 system is in meters. Is there and easy way to specify during
> that conversion to produce the img file in US Survey Feet instead?
> 
> Thanks.

nm. Got it to work. I was using the incorrect syntax before hand.

gdalwarp -s_srs epsg:4326 -t_srs "+proj=utm +zone=12 +ellps=GRS80
+datum=NAD83 +units=us-ft" id1.img id1x.img -of HFA


From ed at topozone.com  Wed Jun  9 13:31:41 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Re: reprojection feet instead of meters
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB077097@ptolemy.topozone.com>

Jason -

Sorry - you beat me to it!  Since the epsg:26912 projection is DEFINED
to be in meters, you did the right thing by copying the parameters
associated with that projection and creating your own custom projection
definition to match it.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of jason
Sent: Wednesday, June 09, 2004 1:11 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Re: reprojection feet instead of meters

On Wed, 09 Jun 2004 10:21:28 -0600, jason wrote:

> I am reprojecting some NED data:
> 
> gdalwarp -s_srs epsg:4326 -t_srs epsg:26912 id1.img id1x.img -of HFA
> 
> but the 26912 system is in meters. Is there and easy way to specify 
> during that conversion to produce the img file in US Survey Feet
instead?
> 
> Thanks.

nm. Got it to work. I was using the incorrect syntax before hand.

gdalwarp -s_srs epsg:4326 -t_srs "+proj=utm +zone=12 +ellps=GRS80
+datum=NAD83 +units=us-ft" id1.img id1x.img -of HFA

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From dron at ak4719.spb.edu  Wed Jun  9 13:57:21 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] .img creation issues for files between 2 and 4 gig?
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB962E@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB962E@mailman.san.com>
Message-ID: <20040609175721.GA21206@ak4719.spb.edu>

On Wed, Jun 09, 2004 at 09:33:49AM -0600, Chapman, Martin wrote:
> Files greater than 4g work great.  I agree, the border line should be
> 2g.  How can I get that change in the GDAL baseline?  Do you know how
> to make the change?  

Please, take the GDAL from CVS (or wait for a daily snapshot). I have
commited the needed changes.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From MChapman at sanz.com  Wed Jun  9 14:19:06 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] .img creation issues for files between 2 and 4 gig?
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9630@mailman.san.com>

Andrey,

You are the man!  Thanks a ton!

Martin

-----Original Message-----
From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
Sent: Wednesday, June 09, 2004 11:57 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] .img creation issues for files between 2 and 4
gig?


On Wed, Jun 09, 2004 at 09:33:49AM -0600, Chapman, Martin wrote:
> Files greater than 4g work great.  I agree, the border line should be 
> 2g.  How can I get that change in the GDAL baseline?  Do you know how 
> to make the change?

Please, take the GDAL from CVS (or wait for a daily snapshot). I have
commited the needed changes.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From DLowther at scigis.com  Wed Jun  9 14:34:43 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A4B3@sci_pe-1.scigis.com>

Andrey,

So if I get the SDK from Lizardtech and compile GDAL with SID support, I
can convert from SID to anything else GDAL supports, correct? GDAL
itself has no size limitation except that of each individual format?

Dave

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Andrey Kiselev
Sent: Tuesday, June 08, 2004 7:40 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] SID to TIF

On Tue, Jun 08, 2004 at 08:14:18AM -0500, David W. Lowther wrote:
> Are there any limitations to the size of TIF that can be created when
> going from SID to TIF using GDAL compiled with the Lizardtech SDK? We
> have been trying to decompress some color county mosaics using
> mrsiddecode from Lizardtech without success and it has been suggested
> that this is because there is a 4GB file size limit for the resultant
> TIF

Exactly. TIFF files are limited in 4GB by design.

BTW, you can find the size limits for GDAL supported formats here:

 http://www.remotesensing.org/gdal/formats_list.html

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev



From dron at ak4719.spb.edu  Wed Jun  9 14:54:49 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] SID to TIF
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E08A4B3@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E08A4B3@sci_pe-1.scigis.com>
Message-ID: <20040609185449.GA27606@ak4719.spb.edu>

David,

On Wed, Jun 09, 2004 at 01:34:43PM -0500, David W. Lowther wrote:
> So if I get the SDK from Lizardtech and compile GDAL with SID support,
> I can convert from SID to anything else GDAL supports, correct? GDAL
> itself has no size limitation except that of each individual format?

Yes. But sometimes such a limitation may exist due to a bug in the code
(which should be reported in that case ;-).

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jnielsen at aero-graphics.com  Wed Jun  9 16:56:04 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RE: Re: reprojection feet instead of meters
References: <2A6FDD75AE04BE4A9E8C918D3C09FB077097@ptolemy.topozone.com>
Message-ID: <pan.2004.06.09.20.56.04.305330@aero-graphics.com>

On Wed, 09 Jun 2004 13:31:41 -0400, Ed McNierney wrote:

> Jason -
> 
> Sorry - you beat me to it!  Since the epsg:26912 projection is DEFINED
> to be in meters, you did the right thing by copying the parameters
> associated with that projection and creating your own custom projection
> definition to match it.
> 
> 	- Ed

I have run into one snag though.  The elevations appear to have not
converted. Know what I am doing wrong?

Thanks.


From ed at topozone.com  Wed Jun  9 17:34:24 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] RE: Re: reprojection feet instead of meters
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB07709A@ptolemy.topozone.com>

Jason -

You're doing nothing wrong.  GDAL is reprojecting raster data - it
doesn't understand what the pixels mean, and has no idea that they are
elevations.  GDAL is not designed to convert elevation data from meters
to feet.

	- Ed 



Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of jason
Sent: Wednesday, June 09, 2004 4:56 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] RE: Re: reprojection feet instead of meters

On Wed, 09 Jun 2004 13:31:41 -0400, Ed McNierney wrote:

> Jason -
> 
> Sorry - you beat me to it!  Since the epsg:26912 projection is DEFINED

> to be in meters, you did the right thing by copying the parameters 
> associated with that projection and creating your own custom 
> projection definition to match it.
> 
> 	- Ed

I have run into one snag though.  The elevations appear to have not
converted. Know what I am doing wrong?

Thanks.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From DLowther at scigis.com  Thu Jun 10 08:18:13 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] MrSID Software Developer Kit with JPEG 2000
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A4C1@sci_pe-1.scigis.com>

Has anyone compiled GDAL against the MrSID(r) SDK with JPEG2000 released
May 10 2004? Everything still work ok?

 

David Lowther

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040610/ba36e20a/attachment.html
From DLowther at scigis.com  Thu Jun 10 08:28:26 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] MrSID Software Developer Kit with JPEG 2000
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A4C2@sci_pe-1.scigis.com>

I'll start to answer my own question with this other post to the list...

 

http://remotesensing.org/pipermail/gdal-dev/2004-February/001847.html

 

I didn't see a follow up. News?

 

Dave

 

________________________________

From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of David W. Lowther
Sent: Thursday, June 10, 2004 7:18 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] MrSID Software Developer Kit with JPEG 2000

 

Has anyone compiled GDAL against the MrSID(r) SDK with JPEG2000 released
May 10 2004? Everything still work ok?

 

David Lowther

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040610/fbe45cc4/attachment.html
From lorenzo.sassolini at maior.it  Fri Jun 11 05:42:39 2004
From: lorenzo.sassolini at maior.it (Lorenzo Maior.it)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] JTS in OGR
Message-ID: <BCEF4B2F.C55%lorenzo.sassolini@maior.it>

Hi,
I've read the C++ JTS implementation: it provides many spatial algorithms
not implemented in OGR at the moment (but inserted in OGR_geometry.h) . JTS
is conform to Simple Feature Specification so its class hierarchy is very
close to OGR geometry class hierarchy.
Has anyone tried to use OGR and JTS together or, better, is there a project
to use JTS in OGR (or OGR in JTS)?

Thanks,
Lorenzo

-- 
LSassolini@tiscali.it




From warmerdam at pobox.com  Mon Jun 14 14:01:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] JTS in OGR
In-Reply-To: <BCEF4B2F.C55%lorenzo.sassolini@maior.it>
References: <BCEF4B2F.C55%lorenzo.sassolini@maior.it>
Message-ID: <40CDE817.9070805@pobox.com>

Lorenzo Maior.it wrote:
> Hi,
> I've read the C++ JTS implementation: it provides many spatial algorithms
> not implemented in OGR at the moment (but inserted in OGR_geometry.h) . JTS
> is conform to Simple Feature Specification so its class hierarchy is very
> close to OGR geometry class hierarchy.
> Has anyone tried to use OGR and JTS together or, better, is there a project
> to use JTS in OGR (or OGR in JTS)?

Lorenzo,

It is my intention to use GEOS (the C++ port of JTS) as the basis of spatial
operators in OGR.  I spoke to Martin Davis about it a bit at the MUM/OSGIS
meeting last week.  Apparently GEOS is solid and stable and is caught up with
the latest JTS release so perhaps it is time to act on this now.

I will look into it soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Radesh.N.Singh at saj02.usace.army.mil  Mon Jun 14 14:41:17 2004
From: Radesh.N.Singh at saj02.usace.army.mil (Singh, Radesh N SAJ)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Adding SDE Raster Support to GDAL
Message-ID: <A113ACFE0B7DD5118F8E00B0D0E1BF8004441F92@sajmail03.saj.usace.army.mil>

Hi All:

I'm trying to figure out how to add SDE Raster Support to GDAL, is anyone
out there working on this?

Thank you,

Radesh N. Singh
CESAJ-IMI
(904) 232-1778
"The joy of the Lord is my strength"
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040614/416813b1/attachment.html
From warmerdam at pobox.com  Mon Jun 14 15:18:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Adding SDE Raster Support to GDAL
In-Reply-To: <A113ACFE0B7DD5118F8E00B0D0E1BF8004441F92@sajmail03.saj.usace.army.mil>
References: <A113ACFE0B7DD5118F8E00B0D0E1BF8004441F92@sajmail03.saj.usace.army.mil>
Message-ID: <40CDFA06.9060206@pobox.com>

Singh, Radesh N SAJ wrote:
> Hi All:
> 
> I'm trying to figure out how to add SDE Raster Support to GDAL, is 
> anyone out there working on this?

Radesh,

I assume I spoke to you briefly about this at the MUM/OSGIS meeting?  There
is a fellow from ... somewhere in Alaska ... who has started work on this.
He, you and I should coordinate on this to avoid undue rework.

Digging through my old email, I find I have an email from a Jay Cable at
"gi.alaska.edu" which appears to be the Geophystical Institute at the
University of Alaska in Fairbanks.  I think the fellow I talked to at MUM/OSGIS
was either him, or perhaps a co-worker.

I'm cc:ing Jay to bring us together, though he might already be on the list.

After soom discussion last week, I have come to the conclusion that SDE
has explicit tiling so we should initially tie directly into that.  So that
means we just need to properly describe the the tile size and implement
IReadBlock().

Once the "full resolution" mode is working properly we can add the ability
to read from overviews properly.  This mostly involves wrapping them in
raster band objects as well.  So (at least without the overview mode) the
existing GDAL Driver Implementors guide should work pretty well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From DLowther at scigis.com  Mon Jun 14 15:45:12 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Adding SDE Raster Support to GDAL
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E08A4F4@sci_pe-1.scigis.com>

All,

Is this work intended to support read only or read / write?

Dave

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, June 14, 2004 2:19 PM
To: gdal-dev@remotesensing.org
Cc: jcable@gi.alaska.edu
Subject: Re: [Gdal-dev] Adding SDE Raster Support to GDAL

Singh, Radesh N SAJ wrote:
> Hi All:
> 
> I'm trying to figure out how to add SDE Raster Support to GDAL, is 
> anyone out there working on this?

Radesh,

I assume I spoke to you briefly about this at the MUM/OSGIS meeting?
There
is a fellow from ... somewhere in Alaska ... who has started work on
this.
He, you and I should coordinate on this to avoid undue rework.

Digging through my old email, I find I have an email from a Jay Cable at
"gi.alaska.edu" which appears to be the Geophystical Institute at the
University of Alaska in Fairbanks.  I think the fellow I talked to at
MUM/OSGIS
was either him, or perhaps a co-worker.

I'm cc:ing Jay to bring us together, though he might already be on the
list.

After soom discussion last week, I have come to the conclusion that SDE
has explicit tiling so we should initially tie directly into that.  So
that
means we just need to properly describe the the tile size and implement
IReadBlock().

Once the "full resolution" mode is working properly we can add the
ability
to read from overviews properly.  This mostly involves wrapping them in
raster band objects as well.  So (at least without the overview mode)
the
existing GDAL Driver Implementors guide should work pretty well.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From jcable at gi.alaska.edu  Mon Jun 14 16:19:57 2004
From: jcable at gi.alaska.edu (Jay Cable)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Adding SDE Raster Support to GDAL
In-Reply-To: <40CDFA06.9060206@pobox.com>
References: <A113ACFE0B7DD5118F8E00B0D0E1BF8004441F92@sajmail03.saj.usace.army.mil>
 <40CDFA06.9060206@pobox.com>
Message-ID: <Pine.LNX.4.58.0406141121010.19127@dino.gi.alaska.edu>

On Mon, 14 Jun 2004, Frank Warmerdam wrote:
=> Singh, Radesh N SAJ wrote:
=> > Hi All:
=> >
=> > I'm trying to figure out how to add SDE Raster Support to GDAL, is
=> > anyone out there working on this?
=>
=> Radesh,
=>
=> I assume I spoke to you briefly about this at the MUM/OSGIS meeting?  There
=> is a fellow from ... somewhere in Alaska ... who has started work on this.
=> He, you and I should coordinate on this to avoid undue rework.
=>
=> Digging through my old email, I find I have an email from a Jay Cable at
=> "gi.alaska.edu" which appears to be the Geophystical Institute at the
=> University of Alaska in Fairbanks.  I think the fellow I talked to at MUM/OSGIS
=> was either him, or perhaps a co-worker.
=>
=> I'm cc:ing Jay to bring us together, though he might already be on the list.
=>
=> After soom discussion last week, I have come to the conclusion that SDE
=> has explicit tiling so we should initially tie directly into that.  So that
=> means we just need to properly describe the the tile size and implement
=> IReadBlock().
=>
=> Once the "full resolution" mode is working properly we can add the ability
=> to read from overviews properly.  This mostly involves wrapping them in
=> raster band objects as well.  So (at least without the overview mode) the
=> existing GDAL Driver Implementors guide should work pretty well.

I think I am the fellow who spoke to you about this.

I have done some basic work on adding SDE Raster support to GDAL, but only
at a pretty rudimentary level - just working with the c api for sde to
write some test programs to extract metadata and tiles from arcSDE.

I was hoping to start work on this in earnest later this week.

Radesh - how much work/how far have you gotten with this?

Regards,
 -Jay Cable


****************************************************************
Jay Cable                                GINA/ION
tel (907) 474-1856                       Geophysical Institute
jcable@gi.alaska.edu                     University of Alaska
	   	                         P.O. Box 757320
                                         Fairbanks, AK 99775-7320
*****************************************************************


From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Tue Jun 15 02:02:04 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Internal libpng update ?
Message-ID: <86CFDD2B-BE91-11D8-A70A-000393A3C40C@rcs.ei.tum.de>

Frank,

I've had some problems with the (rather old) version of libpng included 
with
GDAL not being able to read PNGs created by newer programs, so I've 
updated my
local copy of GDAL with the current release version of libpng (1.2.5). 
Could you
update the GDAL CVS version as well ? I've prepared a tar file with the 
relevant
sources, tested on MacOS X 10.3.4, but since it is kind of large for a 
mailing list
I thought it would be better to send it to you directly, if you are 
interested
in the update.

On a somewhat related note, the internal libgeotiff stopped compiling 
on my system
a week or so ago; the following patch corrects the problem.

Regards,
Eric


Index: xtiffio.h
===================================================================
RCS file: /cvsroot/osrs/gdal/frmts/gtiff/libgeotiff/xtiffio.h,v
retrieving revision 1.4
diff -c -r1.4 xtiffio.h
*** xtiffio.h   7 Jun 2004 13:01:11 -0000       1.4
--- xtiffio.h   15 Jun 2004 05:47:12 -0000
***************
*** 7,12 ****
--- 7,13 ----
   #ifndef __xtiffio_h
   #define __xtiffio_h

+ #include "cpl_serv.h"
   #include "tiffio.h"

   /**


From normanb at comsine.co.uk  Tue Jun 15 06:17:09 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] gdal_contour
Message-ID: <40CECCA5.2060506@comsine.co.uk>

Hi,

I am looking to use gdal_contour (because it looks cool!), but I can't 
find any documentation to it anywhere!  I have
got a copy of the exe from the open_ev download, how to use it?  Also 
how can you use it with MapServer?

Many thanks,

Norman Barker
-------------- next part --------------
A non-text attachment was scrubbed...
Name: normanb.vcf
Type: text/x-vcard
Size: 317 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040615/8d0ea25b/normanb.vcf
From jbensabat at ewre.com  Tue Jun 15 06:35:54 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Memory leaks
Message-ID: <camg6s$6hc$1@sea.gmane.org>

Hi
We are using gdal to load vector maps (format mif, shp) under windows 2000
and visual c++ 6.0. What I see is that there is a large number of small
memory leaks. Has anybody
experienced such kind of feature ?
thanks
jac.




From warmerdam at pobox.com  Tue Jun 15 11:09:11 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] gdal_contour
In-Reply-To: <40CECCA5.2060506@comsine.co.uk>
References: <40CECCA5.2060506@comsine.co.uk>
Message-ID: <40CF1117.3000200@pobox.com>

Norman Barker wrote:
> Hi,
> 
> I am looking to use gdal_contour (because it looks cool!), but I can't 
> find any documentation to it anywhere!  I have
> got a copy of the exe from the open_ev download, how to use it?  Also 
> how can you use it with MapServer?

Norman,

In it's simpliest form you would do something like:

   gdal_contour -a elev dem.tif contour.shp 10.0

This would create 10meter contours from the DEM data in dem.tif and produce
a shapefile in contour.shp/shx/dbf with the contour elevations in the "elev"
attribute.

Some flags which I remember the purpose of are:

  -b <band>: picks a particular band to get the DEM from.  Defaults to band 1.
  -a <name>: provides a name for the attribute in which to put the elevation.
             If not provided not elevation attribute is attached.
  -3d: Force production of 3D vectors instead of 2D.  Includes elevation at
       every vertex.
  -inodata: Ignore any nodata value implied in the dataset - treat all values as valid.
  -snodata <value>: Input pixel value to treat as "nodata".
  -f <format>: create output in a particular format, default is shapefiles.
  -i <interval>: elevation interval between contours.
  -off <offset>: Offset from zero relative to which to interpret intervals.
  -fl <level>: Name one or more "fixed levels" to extract.

I need to get this into the utilities document.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From hughs at ll.mit.edu  Fri Jun 18 11:41:26 2004
From: hughs at ll.mit.edu (Hugh Shane)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Creating NITF file from raw SAR data
Message-ID: <004001c4554a$b7583a50$5288229b@larry>

Hello,

I'm attempting to use GDAL to export data from a radar system currently
under development to a NITF 2.1-compatible display system. Our data
consists of gray scale encoded SAR imagery projected onto the WGS-84
spheroid. The images are bulk geocoded in the sense that the lat/lon
coordinates of each of the four corners of the image are given. (I could
get the coordinates of every pixel, but it seems as if this would be
overkill for our application.) The images are arbitrarily rotated with
respect to local north.  

The NITF format allows geolocation and timestamping of imagery. My
problem is that I don't know how to make GDAL package my lat/lon and
timestamp data into the NITF file. Can anyone shed some light on this? 

Have mercy on this poor GIS newbie :))

I'm writing my application in C and building it as a Matlab MEX-file.
(C++ MEX-files are not officially supported by Mathworks.) Here's a code
snippet of what I've managed to implement thus far:

/******************************************************/
void
WriteNTIF(double timestamp,    /* image acquisition time in seconds
since midnight UTC */
          coord  *corners,     /* lat/lon, WGS-84, corners of the image
array */ 
          double image[],      /* NxM pixel array */
          int N, int M,
          char *filename)
{
  GDALDriverH hDriver, hDstDS;
  char **papszOptions = NULL;
  GDALRasterBandH hBand;

  GDALAllRegister();
  hDriver = GDALGetDriverByName("NITF");
  hDstDS = GDALCreate(hDriver, filename, N, M, 1, GDT_Float64,
papszOptions);
  hBand = GDALGetRasterBand( hDstDS, 1 );
  GDALRasterIO( hBand, GF_Write, 0, 0, N, M, image, N, M, GDT_Float64,
0, 0 );    
  GDALFlushCache( hDstDS );
  GDALClose( hDstDS );
  return;
}

/******************************************************/


Thanks,
Hugh

+------------------------------------------------+
| Hugh A. Shane       EMail: hughs@ll.mit.edu    |
| Massachusetts Institute of Technology          |
| Lincoln Laboratory                             |
| 244 Wood Street.                               |
| Lexington, MA 02420-9108                       |
| Attn: S2-265                                   |
| Phone +1.781.981.1837    Fax +1.781.981.5255   |
+------------------------------------------------+


From lorenzo.moretti at bologna.enea.it  Fri Jun 18 09:41:52 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Good news about ECW support on UNIX - OSX
In-Reply-To: <41044964.3000402@gmx.de>
References: <41044964.3000402@gmx.de>
Message-ID: <a06100507bcf8a0fefb64@[192.107.62.86]>

I've received a good news from ERMAPPER support about ECW libraries 
for UNIX and OSX:

>Hi Lorenzo,
>
>Pre-built binaries of the ECW JPEG 2000 SDK v3.0 are in the works
>for various flavours of UNIX including MacOSX.  We hope to have
>something available within the next few months but I can't give you
>a concrete date to work with yet.
>
>There will also be a source code distribution accompanying the SDK
>at some time in 2004.
>
>Cheers,
>
>Tom Lynch
>
>Earth Resource Mapping Ltd
>Perth, Australia
>Phone: +61-8-9388-2900     Fax: +61-8-9388-2901
>http://www.ermapper.com
>http://forum.ermapper.com - our new support forum

We are waiting ....

P.S. In my new Grass for OS X version there is gdal-ogr 1.2.0 with 
jpeg2000 support (jasper format)

-- 
________________________________________________________________________
||       Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|   ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |   via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (res.)
~~~~~~   40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
			Download GRASS for MAC OS X:    
	           http://wwwamb.bologna.enea.it/forgrass/
________________________________________________________________________

From lorenzo.moretti at bologna.enea.it  Mon Jun 21 06:01:39 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:12 2007
Subject: [Gdal-dev] Good news about ECW support on UNIX - OSX
Message-ID: <a06100500bcfc627599f9@[192.107.62.86]>

I've received a good news from ERMAPPER support about ECW libraries 
for UNIX and OSX:

>Hi Lorenzo,
>
>Pre-built binaries of the ECW JPEG 2000 SDK v3.0 are in the works
>for various flavours of UNIX including MacOSX.  We hope to have
>something available within the next few months but I can't give you
>a concrete date to work with yet.
>
>There will also be a source code distribution accompanying the SDK
>at some time in 2004.
>
>Cheers,
>
>Tom Lynch
>
>Earth Resource Mapping Ltd
>Perth, Australia
>Phone: +61-8-9388-2900     Fax: +61-8-9388-2901
>http://www.ermapper.com
>http://forum.ermapper.com - our new support forum

We are waiting ....

P.S. In my new Grass for OS X version there is gdal-ogr 1.2.0 with 
jpeg2000 support (jasper format)

-- 
________________________________________________________________________
||       Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|   ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |   via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (res.)
~~~~~~   40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
			Download GRASS for MAC OS X:    
	           http://wwwamb.bologna.enea.it/forgrass/
________________________________________________________________________

From warmerdam at pobox.com  Tue Jun 22 14:20:13 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Old old archives
Message-ID: <40D8785D.8050004@pobox.com>

Folks,

Markus Neteler explained to me how to integrate old .mbox format email
into the pipermail archives (thanks Markus!) and so I have migrated over the
existing archive since gdal-dev was at remotesensing.org, and the old archive
from when it was at egroups.com.   You can now read some of the early design
discussions from 1998.  Quite a trip down memory lane!

   http://xserve.flids.com/pipermail/gdal-dev/

PS. While the gdal-dev@remotesensing.org address seems to be working fine
now, the server still seems to know itself as xserve.flids.com - it's original
name.  I may, or may not, be able to fix this.  I would add that the new
www.remotesensing.org is a Mac!  Funky eh?  I think my next lap-top might just
be a Mac.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Jun 22 11:46:00 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] OGDI question
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B1C@mailman.san.com>

All,
 
I compiled GDAL with OGDI support and it works great, but I can't figure
out how to query the map layer I want.  Right now I am pulling whatever
the default layer is when I open the data store, and showing that layer
in my map.  How do I use ExecuteSQL() with OGDI?  Here's my connection
string...
 
gltp:/vrf/data/ew/Vector/NGA_VMAP/v0sas/vmaplv0/sasaus
 
What I want to do is query a layer like political boundaries for a given
AOI using the ExecuteSQL() method of the OGRDataSet object.  Does anyone
know how to do this?
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040622/9a9d0179/attachment.html
From jnipper at bhinc.com  Tue Jun 22 16:00:49 2004
From: jnipper at bhinc.com (John Nipper)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Updating Records Using OGR
Message-ID: <loom.20040622T215950-501@post.gmane.org>

Hello,

Just started using Ogr, and I am able to compile, run, and access data
without issue.  However, I am unable to change records.  It looks as though
it is built in, but I must be missing a step.  So here is what I do in
simplified C++ ... much of which is copied from ogrinfo.cpp.  Note, that I
have omitted all error checking code from the following code:

OGRRegisterAll();

OGRDataSource *poDS;

OGRSFDriver *poDriver;

poDS = OGRSFDriverRegistrar::Open( pszDataSource, TRUE, &poDriver );  //
Where pszDataSource is set to the datasource

poResultSet = poDS->ExecuteSQL( pszSQLStatement, poSpatialFilter, NULL );
// and pszSQLStatement is set as well

OGRFeature *poFeature;

OGRErr retError;

retError = poLayer->StartTransaction();

while( (poFeature = poResultSet->GetNextFeature()) != NULL )

{

    // Do some thing to the geometry and/or features

    //For example

    nameFld = poFeature->GetFieldIndex("NAME");

    poFeature->SetField(nameFld, featName2);  // Where featName2 is a new
string to place in the field value.

    poFeature->SetFeature(poFeature);

}
retError = poLayer->CommitTransaction();


I tried the above scenario with shapefiles as well as Oracle Spatial.  I can
loop through the data within the debugger, and everything looks all good.
But any information that I change, never gets posted in the original data.
I must be doing something wrong, or leaving out something.  If I am reading
the driver code correctly, the data should be replaced.

Thanks,

John Nipper
jnipper@bhinc.com




From warmerdam at pobox.com  Tue Jun 22 16:39:32 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] OGDI question
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B1C@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B1C@mailman.san.com>
Message-ID: <40D89904.2020200@pobox.com>

Chapman, Martin wrote:
> All,
>  
> I compiled GDAL with OGDI support and it works great, but I can't figure 
> out how to query the map layer I want.  Right now I am pulling whatever 
> the default layer is when I open the data store, and showing that layer 
> in my map.  How do I use ExecuteSQL() with OGDI?  Here's my connection 
> string...
>  
> gltp:/vrf/data/ew/Vector/NGA_VMAP/v0sas/vmaplv0/sasaus
>  
> What I want to do is query a layer like political boundaries for a given 
> AOI using the ExecuteSQL() method of the OGRDataSet object.  Does anyone 
> know how to do this?

Martin,

First, I don't think the spatial queries get passed down into OGDI when
you use ExecuteSQL().  All the features for the given layer will be
read and then filtered out within OGR.  This can be a bit of a performance
bottleneck for VMAP data. :-)

I find I can use the following command to query VMAP data for political
boundary lines:

   ogrinfo -ro $NOAMER -sql 'select * from "polbndl@bnd(*)_line" where use=26'

The $NOAMER expands to gltp:/vrf/usr4/mpp1/v0noa/vmaplv0/noamer.  So the
key item is to ensure you enclose the "table" name in double quotes in
your SQL statement since the OGDI table names are odd composites.

I hope this helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Tue Jun 22 16:48:27 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Swiss Coordinate System
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C252FAD@wilbur.MICROPILOT.COM>

Hi,

Where can I find informationon the swiss coordinate system?

Thanks,

Gerald

From werchowyna at pf.pl  Tue Jun 22 18:29:33 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] reprojecting
Message-ID: <003e01c458a8$90fd83e0$1b5a4cd5@n7a3h9>

Hi!

I got a following GTiff from an SRTM bil file:

    Driver: GTiff/GeoTIFF
    Size is 1201, 1201
    Coordinate System is:
    GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree (supplier to define representation)",0.01745329251994328],
    AUTHORITY["EPSG","4326"]]
    Origin = (14.999583,51.000417)
    Pixel Size = (0.00083333,-0.00083333)
    Corner Coordinates:
    Upper Left  (  14.9995833,  51.0004167) ( 14d59'58.50"E, 51d 0'1.50"N)
    Lower Left  (  14.9995833,  49.9995833) ( 14d59'58.50"E, 49d59'58.50"N)
    Upper Right (  16.0004167,  51.0004167) ( 16d 0'1.50"E, 51d 0'1.50"N)
    Lower Right (  16.0004167,  49.9995833) ( 16d 0'1.50"E, 49d59'58.50"N)
    Center      (  15.5000000,  50.5000000) ( 15d30'0.00"E, 50d30'0.00"N)
    Band 1 Block=1201x3 Type=Int16, ColorInterp=Gray

Next I converted it into an "ETRS89 / Poland CS92" and then back into
GEOGCS.
Now the pixel size and the corner and centre coords are different:

    Pixel Size = (0.00085946,-0.00085946)
    Corner Coordinates:
    Upper Left  (  14.9142554,  51.0303873) ( 14d54'51.32"E, 51d 1'49.39"N)
    Lower Left  (  14.9142554,  49.9698135) ( 14d54'51.32"E, 49d58'11.33"N)
    Upper Right (  16.0633536,  51.0303873) ( 16d 3'48.07"E, 51d 1'49.39"N)
    Lower Right (  16.0633536,  49.9698135) ( 16d 3'48.07"E, 49d58'11.33"N)
    Center      (  15.4888045,  50.5001004) ( 15d29'19.70"E, 50d30'0.36"N)
    Band 1 Block=1337x3 Type=Int16, ColorInterp=Gray

I suspect that the answer is no (and that my question may be stupid) but I
want to know for sure: does it have to be like this or is there a way to
derive the         genuine raster from a raster it was once reprojected to?

Maciek


From werchowyna at pf.pl  Tue Jun 22 18:41:26 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] reprojection
Message-ID: <009301c458aa$4ce24b80$1b5a4cd5@n7a3h9>

Hi!

I got a following GTiff from an SRTM bil file:

    Driver: GTiff/GeoTIFF
    Size is 1201, 1201
    Coordinate System is:
    GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree (supplier to define representation)",0.01745329251994328],
    AUTHORITY["EPSG","4326"]]
    Origin = (14.999583,51.000417)
    Pixel Size = (0.00083333,-0.00083333)
    Corner Coordinates:
    Upper Left  (  14.9995833,  51.0004167) ( 14d59'58.50"E, 51d 0'1.50"N)
    Lower Left  (  14.9995833,  49.9995833) ( 14d59'58.50"E, 49d59'58.50"N)
    Upper Right (  16.0004167,  51.0004167) ( 16d 0'1.50"E, 51d 0'1.50"N)
    Lower Right (  16.0004167,  49.9995833) ( 16d 0'1.50"E, 49d59'58.50"N)
    Center      (  15.5000000,  50.5000000) ( 15d30'0.00"E, 50d30'0.00"N)
    Band 1 Block=1201x3 Type=Int16, ColorInterp=Gray

Next I converted it into an "ETRS89 / Poland CS92" and then back into
GEOGCS.
Now the pixel size and the corner and centre coords are different:

    Pixel Size = (0.00085946,-0.00085946)
    Corner Coordinates:
    Upper Left  (  14.9142554,  51.0303873) ( 14d54'51.32"E, 51d 1'49.39"N)
    Lower Left  (  14.9142554,  49.9698135) ( 14d54'51.32"E, 49d58'11.33"N)
    Upper Right (  16.0633536,  51.0303873) ( 16d 3'48.07"E, 51d 1'49.39"N)
    Lower Right (  16.0633536,  49.9698135) ( 16d 3'48.07"E, 49d58'11.33"N)
    Center      (  15.4888045,  50.5001004) ( 15d29'19.70"E, 50d30'0.36"N)
    Band 1 Block=1337x3 Type=Int16, ColorInterp=Gray

I suspect that the answer is no (and that my question may be stupid) but I
want to know for sure: does it have to be like this or is there a way to
derive the genuine raster from a raster it was once reprojected to? Or to
improve the accuarcy at least?

Maciek


From MChapman at sanz.com  Tue Jun 22 16:50:08 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] OGDI question
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9665@mailman.san.com>

Frank,

That worked great!  Thanks a ton for the help.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, June 22, 2004 2:40 PM
To: Chapman, Martin
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] OGDI question


Chapman, Martin wrote:
> All,
>  
> I compiled GDAL with OGDI support and it works great, but I can't 
> figure
> out how to query the map layer I want.  Right now I am pulling
whatever 
> the default layer is when I open the data store, and showing that
layer 
> in my map.  How do I use ExecuteSQL() with OGDI?  Here's my connection

> string...
>  
> gltp:/vrf/data/ew/Vector/NGA_VMAP/v0sas/vmaplv0/sasaus
>  
> What I want to do is query a layer like political boundaries for a 
> given
> AOI using the ExecuteSQL() method of the OGRDataSet object.  Does
anyone 
> know how to do this?

Martin,

First, I don't think the spatial queries get passed down into OGDI when
you use ExecuteSQL().  All the features for the given layer will be read
and then filtered out within OGR.  This can be a bit of a performance
bottleneck for VMAP data. :-)

I find I can use the following command to query VMAP data for political
boundary lines:

   ogrinfo -ro $NOAMER -sql 'select * from "polbndl@bnd(*)_line" where
use=26'

The $NOAMER expands to gltp:/vrf/usr4/mpp1/v0noa/vmaplv0/noamer.  So the
key item is to ensure you enclose the "table" name in double quotes in
your SQL statement since the OGDI table names are odd composites.

I hope this helps.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Jun 22 18:04:46 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] LIDAR .las file format
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9666@mailman.san.com>

All,
 
Has anyone written a driver for the LIDAR (.las) file format for GDAL?  
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040622/f4e6cf27/attachment.html
From maphew at zworg.com  Tue Jun 22 16:24:57 2004
From: maphew at zworg.com (maphew (matt wilkie))
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Old old archives
In-Reply-To: <40D8785D.8050004@pobox.com>
References: <40D8785D.8050004@pobox.com>
Message-ID: <40D89599.5080806@zworg.com>

Frank Warmerdam wrote:
> discussions from 1998.  Quite a trip down memory lane!
> 
>   http://xserve.flids.com/pipermail/gdal-dev/

and a very interesting memory lane that is!
Now, when did the time travel module come out
and how do I get my copy? :))))

-matt

From schut at sarvision.com  Wed Jun 23 03:31:33 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
Message-ID: <200406230931.33817.schut@sarvision.com>

My previous messages about this probably disappeared somewhere between 
servers, that's why resending...

GDAL-cvs doesn't build for me since a couple of days, and I think the 
combination of using hdf-eos and my compiler: gcc3.4, could be the cause.

So far I found out:

- the include of HdfEosDef.h from hdf4dataset.cpp doesn't work, because gcc 
can't find it. After changing the compile line to include '-I./hdf-eos', this 
was solved. I however don't know the appropriate place to add this 
(GNUmakefile?).

- gcc complains about not finding includes if they are between <> when they 
should be between "". This is the case for <ease.h> from HdfEosDef.h, and for 
<HDFEOSVersion.h> from EHapi.c.

- after these changes, I get the following error which is beyond my knowledge:

vincent@timo hdf-eos $ make
/bin/sh ../../../libtool --mode=compile gcc -Wall ?-O2 -DCPL_MULTIPROC_PTHREAD ? 
-I../../../port -I/usr/include ? -c -o EHapi.o EHapi.c
?gcc -Wall -O2 -DCPL_MULTIPROC_PTHREAD -I../../../port -I/usr/include -c 
EHapi.c ?-fPIC -DPIC -o .libs/EHapi.o
In file included from EHapi.c:35:
HDFEOSVersion.h:16:1: pasting ""@(#)## HDFEOS Version: "" and "HDFEOSVERSION1" 
does not give a valid preprocessing token
HDFEOSVersion.h:17:1: pasting ""@(#)## Build date: "" and "__DATE__" does not 
give a valid preprocessing token
HDFEOSVersion.h:17:1: pasting "__DATE__" and "" @ "" does not give a valid 
preprocessing token
HDFEOSVersion.h:17:1: pasting "" @ "" and "__TIME__" does not give a valid 
preprocessing token
EHapi.c: In function `EHopen':
EHapi.c:254: warning: implicit declaration of function `sleep'
EHapi.c: In function `ehidinfo':
EHapi.c:592: warning: passing arg 2 of `EHidinfo' from incompatible pointer 
type
EHapi.c:592: warning: passing arg 3 of `EHidinfo' from incompatible pointer 
type
EHapi.c: In function `EHopen':
EHapi.c:104: warning: 'fid' might be used uninitialized in this function
EHapi.c: In function `EHconvAng':
EHapi.c:767: warning: 'outAngle' might be used uninitialized in this function
EHapi.c: At top level:
cfortHdf.h:283: warning: 'c2fstrv' defined but not used
cfortHdf.h:299: warning: 'f2cstrv' defined but not used
cfortHdf.h:346: warning: 'vkill_trailing' defined but not used
cfortHdf.h:393: warning: 'num_elem' defined but not used
cfortHdf.h:443: warning: '__cfztringv' defined but not used
make: *** [EHapi.o] Error 1

I think the lines from HDFEOSVersion.h generate the real errors, the other 
ones seem just warnings.
As I said, I'm stuck here.
-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From nhv at cape.com  Wed Jun 23 07:05:52 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <200406230931.33817.schut@sarvision.com>
Message-ID: <EKEJIKAILPONGGENMBGACEGMHOAA.nhv@cape.com>

Vincent Schut writes:
> 
> GDAL-cvs doesn't build for me since a couple of days, and I think the 
> combination of using hdf-eos and my compiler: gcc3.4, could be the cause.
> 
> So far I found out:
> 
> - the include of HdfEosDef.h from hdf4dataset.cpp doesn't work, because gcc 
> can't find it. After changing the compile line to include '-I./hdf-eos', this 
> was solved. I however don't know the appropriate place to add this 
> (GNUmakefile?).
> 
> - gcc complains about not finding includes if they are between <> when they 
> should be between "". This is the case for <ease.h> from HdfEosDef.h, and for 
> <HDFEOSVersion.h> from EHapi.c.
> 
> - after these changes, I get the following error which is beyond my knowledge:
> 
> vincent@timo hdf-eos $ make
...
> HDFEOSVersion.h:16:1: pasting ""@(#)## HDFEOS Version: "" and "HDFEOSVERSION1" 
> does not give a valid preprocessing token
> HDFEOSVersion.h:17:1: pasting ""@(#)## Build date: "" and "__DATE__" does not 
> give a valid preprocessing token
> HDFEOSVersion.h:17:1: pasting "__DATE__" and "" @ "" does not give a valid 
> preprocessing token
> HDFEOSVersion.h:17:1: pasting "" @ "" and "__TIME__" does not give a valid 
> preprocessing token


I needed to make the following change to compile this with Cygwin

$ cvs diff HDFEOSVersion.h
Index: HDFEOSVersion.h
===================================================================
RCS file: /cvs/gdal/frmts/hdf4/hdf-eos/HDFEOSVersion.h,v
retrieving revision 1.1
diff -r1.1 HDFEOSVersion.h
7c7
< #ifdef LINUX
---
> #if defined(LINUX) || defined(__CYGWIN__)


======= hack attack =======

< WARNING --- following only for those *very* comfortable 
   with hacking configuration scripts and unix install proceedures >

BTW I used a slightly modified hdf4.2r0 distribution and have managed 
to get both hdf and netcdf working :-)

I don't have a set of changes but in essence I used the LINUX configuration
< copied hdf4.2r0/config/mh-linux to hdf42.4r0/config/mh-cygwin >

I also hardwired mfhdf to use its renamed version of netcdf functions 
by modifying hdf4.2.r0/mfhdf/libsrc/libsrc/hdf2netcdf.h

$ diff  hdf2netcdf.bak hdf2netcdf.h
7a8,11
> #ifdef __CYGWIN__
> #define HAVE_NETCDF 1
> #endif
>

I also needed to add  -lrpclib to the link process
< this may not be needed for all systems >

So far using hdf4.2r0 seems to work well but I haven't done
any rigorous testing

You will also need to reinstall netcdf after installing this version
as it will overwrite any existing netcdf installation

=======================

HTH

Norman


From dron at ak4719.spb.edu  Wed Jun 23 13:09:13 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <200406230931.33817.schut@sarvision.com>
References: <200406230931.33817.schut@sarvision.com>
Message-ID: <20040623170913.GA22871@ak4719.spb.edu>

On Wed, Jun 23, 2004 at 09:31:33AM +0200, Vincent Schut wrote:
> My previous messages about this probably disappeared somewhere between
> servers, that's why resending...
> 
> GDAL-cvs doesn't build for me since a couple of days, and I think the
> combination of using hdf-eos and my compiler: gcc3.4, could be the
> cause.
> 
> So far I found out:
> 
> - the include of HdfEosDef.h from hdf4dataset.cpp doesn't work,
> because gcc can't find it. After changing the compile line to include
> '-I./hdf-eos', this was solved. I however don't know the appropriate
> place to add this (GNUmakefile?).

I'm forgot to commit the new Makefile along with the new code, sorry.
Will be fixed very soon.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Wed Jun 23 13:51:03 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <20040623170913.GA22871@ak4719.spb.edu>
References: <200406230931.33817.schut@sarvision.com>
	<20040623170913.GA22871@ak4719.spb.edu>
Message-ID: <20040623175103.GB24545@ak4719.spb.edu>

On Wed, Jun 23, 2004 at 09:09:13PM +0400, Andrey Kiselev wrote:
> > - the include of HdfEosDef.h from hdf4dataset.cpp doesn't work,
> > because gcc can't find it. After changing the compile line to
> > include '-I./hdf-eos', this was solved. I however don't know the
> > appropriate place to add this (GNUmakefile?).
> 
> I'm forgot to commit the new Makefile along with the new code, sorry.
> Will be fixed very soon.

I have commited the required changes. Please, test again.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Wed Jun 23 16:16:28 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Vacation time for Frank
Message-ID: <40D9E51C.9060502@pobox.com>

Folks,

I will be in the Canadian hinterland visiting the inlaws and sans-internet next
week.  In fact, I'm leaving the morning of the 24th and won't be back till
July 5th or so.

Andrey will try to keep an eye on things, but be patient.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From daniel.mac at elantech-inc.com  Wed Jun 23 17:35:05 2004
From: daniel.mac at elantech-inc.com (Daniel Mac)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Problems Linking to the gdal
Message-ID: <000001c45969$f6493ed0$20a8a8c0@KAKUNA>

Hello, I am relatively new to this board, so please forgive if this question
has been answered, or if I went about the wrong way to post a question...

Im having trouble linking to the GDAL libraries.  I've downloaded and built
GDAL (1.1.9, 1.2.0, 1.2.0b, I've tried em all) for Solaris 2.8 using gcc and
gnumake...however, I am using the latest version of Sun Forte CC to build my
application, and when I try to link to the GDAL libraries (libgdal.a,
libgdal.so), I get the following error:

ild: (undefined symbol) GDALRasterBand*GDALDataset::GetRasterBand(int) --
referenced in the text segment of
/home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
ild: (undefined symbol) void GDALRasterBand::GetBlockSize(int*,int*) --
referenced in the text segment of
/home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
ild: (undefined symbol) int GDALRasterBand::GetYSize() -- referenced in the
text segment of
/home/jhughes/ElanTech/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a
(_DTEDReader.o)
ild: (undefined symbol) int GDALRasterBand::GetXSize() -- referenced in the
text segment of
/home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
ild: (undefined symbol) int GDALDataset::GetRasterYSize() -- referenced in
the text segment of
/home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
ild: (undefined symbol) OGRLinearRing::OGRLinearRing() -- referenced in the
text segment of
/home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_FeatureReader.o
) 
...(there are more, but all the same...undefined symbol)...

I know they are defined in libgdal (via the nm -Ao command in solaris), but
they just aren't linking...

Question 1:  Ive tried to build GDAL with Sun Forte CC, only to run into
loads of problems; is there a proper way to build GDAL using Sun Forte CC
(required flags, settings at ./configure command, etc.?)

Question 2:  I've heard of incompatibilities between CC and gcc/g++; could
this problem just be a case of incompatibility??  If so, then any help in
building GDAL using CC would be greatly appreciated...

Thanks for all of your help in advance

Dan




From warmerdam at pobox.com  Wed Jun 23 18:38:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Problems Linking to the gdal
In-Reply-To: <000001c45969$f6493ed0$20a8a8c0@KAKUNA>
References: <000001c45969$f6493ed0$20a8a8c0@KAKUNA>
Message-ID: <40DA065E.4000008@pobox.com>

Daniel Mac wrote:
> Hello, I am relatively new to this board, so please forgive if this question
> has been answered, or if I went about the wrong way to post a question...
> 
> Im having trouble linking to the GDAL libraries.  I've downloaded and built
> GDAL (1.1.9, 1.2.0, 1.2.0b, I've tried em all) for Solaris 2.8 using gcc and
> gnumake...however, I am using the latest version of Sun Forte CC to build my
> application, and when I try to link to the GDAL libraries (libgdal.a,
> libgdal.so), I get the following error:
> 
> ild: (undefined symbol) GDALRasterBand*GDALDataset::GetRasterBand(int) --
> referenced in the text segment of
> /home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
> ild: (undefined symbol) void GDALRasterBand::GetBlockSize(int*,int*) --
> referenced in the text segment of
> /home/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a(_DTEDReader.o)
> ild: (undefined symbol) int GDALRasterBand::GetYSize() -- referenced in the
> text segment of
> /home/jhughes/ElanTech/Projects/Deployment/Tencap/lib/SunOS-5.8//libTencap.a
> (_DTEDReader.o)
...
>> Question 1:  Ive tried to build GDAL with Sun Forte CC, only to run into
> loads of problems; is there a proper way to build GDAL using Sun Forte CC
> (required flags, settings at ./configure command, etc.?)

Daniel,

In theory you should be able to set the CC and CXX environment variables
before running configure.  However, you might find it easier to just hack the
GDALmake.opt after configure finishes.

What sorts of problems are you running into with Forte CC?

> Question 2:  I've heard of incompatibilities between CC and gcc/g++; could
> this problem just be a case of incompatibility??  If so, then any help in
> building GDAL using CC would be greatly appreciated...

The name mangling used by gcc for C++ is different than that used by other
compilers, so you can't mix C++ object code from different compilers.  At
least not for inter system calls.

If you modified your DTEDReader code to call the GDAL C API instead then you
wouldn't have a problem.  The C function naming in object files is consistent
between compilers and in various ways the C interface is less fragile than the
C++ one.

So my suggestions are to either recode your calls to the C API, or ensure you
are using the same C++ compiler for everything.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schut at sarvision.com  Thu Jun 24 03:44:54 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <20040623175103.GB24545@ak4719.spb.edu>
References: <200406230931.33817.schut@sarvision.com>
	<20040623170913.GA22871@ak4719.spb.edu>
	<20040623175103.GB24545@ak4719.spb.edu>
Message-ID: <200406240944.54674.schut@sarvision.com>

On Wednesday 23 June 2004 19:51, Andrey Kiselev wrote:
> On Wed, Jun 23, 2004 at 09:09:13PM +0400, Andrey Kiselev wrote:
> > > - the include of HdfEosDef.h from hdf4dataset.cpp doesn't work,
> > > because gcc can't find it. After changing the compile line to
> > > include '-I./hdf-eos', this was solved. I however don't know the
> > > appropriate place to add this (GNUmakefile?).
> >
> > I'm forgot to commit the new Makefile along with the new code, sorry.
> > Will be fixed very soon.
>
> I have commited the required changes. Please, test again.

Finds the includes now, but still get this error:

make[3]: Entering directory `/usr/local/src/gdal/frmts/hdf4/hdf-eos'
/bin/sh ../../../libtool --mode=compile gcc -c -I../../../port -Wall  -O2 
-DCPL_MULTIPROC_PTHREAD    -I. EHapi.c -o ../../o/EHapi.o
 gcc -c -I../../../port -Wall -O2 -DCPL_MULTIPROC_PTHREAD -I. EHapi.c  -fPIC 
-DPIC -o ../../o/.libs/EHapi.o
In file included from EHapi.c:35:
./HDFEOSVersion.h:16:1: pasting ""@(#)## HDFEOS Version: "" and 
"HDFEOSVERSION1" does not give a valid preprocessing token
./HDFEOSVersion.h:17:1: pasting ""@(#)## Build date: "" and "__DATE__" does 
not give a valid preprocessing token
./HDFEOSVersion.h:17:1: pasting "__DATE__" and "" @ "" does not give a valid 
preprocessing token
./HDFEOSVersion.h:17:1: pasting "" @ "" and "__TIME__" does not give a valid 
preprocessing token
EHapi.c: In function `EHopen':
EHapi.c:254: warning: implicit declaration of function `sleep'
EHapi.c: In function `ehidinfo':
EHapi.c:592: warning: passing arg 2 of `EHidinfo' from incompatible pointer 
type
EHapi.c:592: warning: passing arg 3 of `EHidinfo' from incompatible pointer 
type
EHapi.c: In function `EHopen':
EHapi.c:104: warning: 'fid' might be used uninitialized in this function
EHapi.c: In function `EHconvAng':
EHapi.c:767: warning: 'outAngle' might be used uninitialized in this function
EHapi.c: At top level:
cfortHdf.h:283: warning: 'c2fstrv' defined but not used
cfortHdf.h:299: warning: 'f2cstrv' defined but not used
cfortHdf.h:346: warning: 'vkill_trailing' defined but not used
cfortHdf.h:393: warning: 'num_elem' defined but not used
cfortHdf.h:443: warning: '__cfztringv' defined but not used
make[3]: *** [../../o/EHapi.o] Error 1
make[3]: Leaving directory `/usr/local/src/gdal/frmts/hdf4/hdf-eos'
make[2]: *** [lib-hdfeos] Error 2
make[2]: Leaving directory `/usr/local/src/gdal/frmts/hdf4'
make[1]: *** [hdf4-install-obj] Error 2
make[1]: Leaving directory `/usr/local/src/gdal/frmts'
make: *** [frmts-target] Error 2

using: gentoo on amd64, gcc 3.4.

Cheers,
-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From neteler at itc.it  Thu Jun 24 06:21:17 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] OGR and OGDI issues
Message-ID: <20040624102117.GI19836@thuille.itc.it>

At time I am facing some problems with OGR/OGDI:

I have updated to 
- the current OGDI-CVS
- the current GDAL/OGR-CVS
- Mapserver 4.2.


Following three problems occured:
1) OGDI compiled with external PROJ fails:

  ogr2ogr -t_srs "EPSG:4326" -where "na2 = 'UP'" polbnda_ukraine.shp \
       gltp:/vrf/grass0/warmerdam/v0eur/vmaplv0/eurnasia 'polbnda@bnd(*)_area'
  ERROR 6: Failed to initialize PROJ.4 with `+proj=longlat +ellps=GRS80 +datum=NAD83 +no_defs '.
  unknown projection id
  Failed to create coordinate transformation between the
  following coordinate systems.  This may be because they
  are not transformable, or because projection services
  (PROJ.4 DLL/.so) could not be loaded.
  Source:
  GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
  Target:
  GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.01745329251994328,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]

 It is not clear to me if OGDI or OGR is doing the 
 reprojectioning.
 With OGDI compiled with internal (old) PROJ support it
 works. But then it won't do datum transformation, right?

 So far I don't know how to get that working. Any hint
 is appreciated.


2) A related problem: Some field in PostgreSQL seems to be too
   short? I tried to convert VMAP0 data via OGR to PostGIS.
   After a while I got

  ogr2ogr -f PostgreSQL PG:'host=localhost user=postgres dbname=vmap0' \
    gltp:/vrf/grass0/warmerdam/v0eur/vmaplv0/eurnasia \
    -nln polbnda 'polbnda@bnd(*)_area'
  ERROR 1: INSERT command for new feature failed.
  ERROR:  value too long for type character(64)

  ERROR 1: Terminating translation prematurely after failed
  translation of layer polbnda@bnd(*)_area

  Where should I change the field length?


3) Finally, sorry for being so lengthy, MapServer gives following
   error with OGDI-Data (it works well with SHAPE and raster):

   msDrawMap(): Image handling error. Failed to draw layer named 'roadl_africa'.
   msOGRLayerInitItemInfo(): OGR error. Invalid Field name: rtt 

  Since the mapfile [1] is unchanged which worked well before updating
  the software it seems to be related to OGR (I tried Mapserver 4.0 and 4.2).

  But: 
  export OGDI="gltp:/vrf/grass0/warmerdam/v0eur/vmaplv0/eurnasia"
  ogrinfo -ro $OGDI -summary  -sql 'select * from "roadl@trans(*)_line" where rtt=14'
  INFO: Open of `gltp:/vrf/grass0/warmerdam/v0eur/vmaplv0/eurnasia'
  using driver `OGDI' successful.

  Layer name: roadl@trans(*)_line
  Geometry: Line String
  Feature Count: 67350
  Extent: (-10.244722, 45.000000) - (90.167747, 70.484337)
  Layer SRS WKT:
  GEOGCS["NAD83",
  [...]
    AUTHORITY["EPSG","4269"]]
  id: Integer (10.0)
  f_code: String (5.0)
  acc: Integer (5.0)
  exs: Integer (5.0)
  med: Integer (5.0)
  rtt: Integer (5.0)
  tile_id: Integer (5.0)
  edg_id: Integer (10.0)

  Features are found.
  Somehow Mapserver doesn't get the field names any more for 'LABELITEM'.


Excuse me for asking three questions, but they seem to be closely related.

Kind regards

  Markus Neteler

--------------------------------
[1] the Mapfile snippet:

LAYER
 NAME roadl_africa
 GROUP roadl
 TYPE LINE
 CONNECTIONTYPE OGR
 CONNECTION "gltp:/vrf/grass0/warmerdam/v0soa/vmaplv0/soamafr"
 DATA "roadl@trans(*)_line"
 STATUS ON
 CLASS
    EXPRESSION ([rtt] = 14 )
    MAXSCALE 10000000
    SYMBOL "line"
    COLOR 200 20 20
    SIZE 3
    OVERLAYSYMBOL "line"
    OVERLAYCOLOR 250 250 0
    OVERLAYSIZE 1
 END
 [...]

From nhv at cape.com  Thu Jun 24 08:41:25 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <200406240944.54674.schut@sarvision.com>
Message-ID: <EKEJIKAILPONGGENMBGAAEKDHOAA.nhv@cape.com>

Vincent Schut writes:
> 
> On Wednesday 23 June 2004 19:51, Andrey Kiselev wrote:
> > On Wed, Jun 23, 2004 at 09:09:13PM +0400, Andrey Kiselev wrote:
> > > > - the include of HdfEosDef.h from hdf4dataset.cpp doesn't work,
> > > > because gcc can't find it. After changing the compile line to
> > > > include '-I./hdf-eos', this was solved. I however don't know the
> > > > appropriate place to add this (GNUmakefile?).
> > >
> > > I'm forgot to commit the new Makefile along with the new code, sorry.
> > > Will be fixed very soon.
> >
> > I have commited the required changes. Please, test again.
> 
> Finds the includes now, but still get this error:
> 
> make[3]: Entering directory `/usr/local/src/gdal/frmts/hdf4/hdf-eos'
> /bin/sh ../../../libtool --mode=compile gcc -c -I../../../port -Wall  -O2 
> -DCPL_MULTIPROC_PTHREAD    -I. EHapi.c -o ../../o/EHapi.o
>  gcc -c -I../../../port -Wall -O2 -DCPL_MULTIPROC_PTHREAD -I. EHapi.c  -fPIC 
> -DPIC -o ../../o/.libs/EHapi.o
> In file included from EHapi.c:35:
> ./HDFEOSVersion.h:16:1: pasting ""@(#)## HDFEOS Version: "" and 
> "HDFEOSVERSION1" does not give a valid preprocessing token
> ./HDFEOSVersion.h:17:1: pasting ""@(#)## Build date: "" and "__DATE__" does 
> not give a valid preprocessing token
> ./HDFEOSVersion.h:17:1: pasting "__DATE__" and "" @ "" does not give a valid 
> preprocessing token
> ./HDFEOSVersion.h:17:1: pasting "" @ "" and "__TIME__" does not give a valid 
> preprocessing token


I believe the attached HDFEOSVersion.h should work

BTW It would help if you told us what system you are using
as well as the compiler

HTH

Norman



-------------- next part --------------
A non-text attachment was scrubbed...
Name: HDFEOSVersion.h
Type: application/octet-stream
Size: 974 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040624/c1a22604/HDFEOSVersion.obj
From warmerdam at pobox.com  Thu Jun 24 10:04:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released
Message-ID: <40DADF73.2090204@pobox.com>


Folks,

I have prepared a preliminary GDAL 1.2.1 snapshot.  It is available at:

   http://dl2.maptools.org/gdal/gdal-1.2.1.tar.gz
   http://dl2.maptools.org/gdal/gdal121.zip

or

   ftp://ftp.remotesensing.org/gdal/gdal-1.2.1.tar.gz
   ftp://ftp.remotesensing.org/gdal/gdal121.zip

I would add that the GDAL daily snapshots are being generated again, and they
are now found on http://www.remotesensing.org/gdal/daily instead of on the
ftp site.  The remotesensing.org bandwidth is fairly limited so please don't
setup any scripts to download it daily just in case you want it or anything like
that.

This release does not include my work on OGR integration with GEOS.  That will
be in GDAL 1.2.2, hopefully in a month or two.

Please let me know if you run into any showstopper problems with this release
and I will reissue it.

NEWS file entries are below.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


GDAL 1.2.1 - Overview of Changes
--------------------------------

gdal_contour:
     - Now build and installed by default.

HDF4 Driver:
     - Added some degree of HDF-EOS support.  HDFEOS layer now part of GDAL.

DODS Driver:
     - Substantial fixes, support for flipped datasets.

HFA (Erdas Imagine) Driver:
     - Fixed bug with files between 2 and 4GB.
     - Capture statistics as metadata.

Erdas 7.x LAN/GIS Driver:
     - Newly implemented.

USGS DEM Driver:
     - Various fixes to creation support / CDED product.

NITF Driver:
     - Capture USE001 and STDIDC TREs as metadata.
     - Capture all sorts of header information as metadata.
     - Support geocentric corner coordinate specification.

MrSID Driver:
     - Support added for DSDK 4.0.x.

ECW Driver:
     - Added preliminary support for using 3.0 SDK for JPEG2000 support.
     - Fix oversampling assertion problem.

ArcInfo Binary Grids:
     - Added support for 0x01 and 0x20 block type.


OGR 1.2.1 - Overview of Changes
-------------------------------

OGRSpatialReference:
     - Various fixes related to prime meridians.

PostgreSQL/PostGIS Driver:
     - Added layer name laundering.
     - Launder names on by default.
     - Clean stale entries in geometry_columns table when creating a layer.
     - Support treating names views as layers.
     - Handle long command strings.

S57 Driver:
     - Fixed serious bugs with support for auto-applying update files.
     - Improvements to S57 writing support.



From dmorissette at dmsolutions.ca  Thu Jun 24 10:08:53 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released
In-Reply-To: <40DADF73.2090204@pobox.com>
References: <40DADF73.2090204@pobox.com>
Message-ID: <40DAE075.1090404@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> I have prepared a preliminary GDAL 1.2.1 snapshot.  It is available at:
> 
>   http://dl2.maptools.org/gdal/gdal-1.2.1.tar.gz
>   http://dl2.maptools.org/gdal/gdal121.zip
> 

Actually the "official" maptools URLs should be:

   http://gdal.maptools.org/dl/gdal-1.2.1.tar.gz
   http://gdal.maptools.org/dl/gdal121.zip

Those URLs will automatically redirect you to a download mirror.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From mturk at apache.org  Thu Jun 24 10:25:59 2004
From: mturk at apache.org (Mladen Turk)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released
In-Reply-To: <40DADF73.2090204@pobox.com>
Message-ID: <20040624142638.EFB08B52AC@xserve.flids.com>

Hi,

> -----Original Message-----
> From: gdal-dev-bounces@remotesensing.org [mailto:gdal-dev-
> 
> Please let me know if you run into any showstopper problems with this
> release
> and I will reissue it.
>

There is a problem with GDAL in general when used as DLL, missing delete
mechanism for objects that are internally allocated using operator new.

Right now there is no way (at least I'm not aware of any) to release those
objects. 

For example the OGRLayer, OGRStyleLabel etc... cannot be deleted withing
GDAL/OGR heap.
Either something like OGR_G_DestroyGeometry or OGR_F_DestroyFeature should
be used or something like I proposed in MS #697.

http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=697


MT.

> NEWS file entries are below.
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> GDAL 1.2.1 - Overview of Changes
> --------------------------------
> 
> gdal_contour:
>      - Now build and installed by default.
> 
> HDF4 Driver:
>      - Added some degree of HDF-EOS support.  HDFEOS layer now part of
> GDAL.
> 
> DODS Driver:
>      - Substantial fixes, support for flipped datasets.
> 
> HFA (Erdas Imagine) Driver:
>      - Fixed bug with files between 2 and 4GB.
>      - Capture statistics as metadata.
> 
> Erdas 7.x LAN/GIS Driver:
>      - Newly implemented.
> 
> USGS DEM Driver:
>      - Various fixes to creation support / CDED product.
> 
> NITF Driver:
>      - Capture USE001 and STDIDC TREs as metadata.
>      - Capture all sorts of header information as metadata.
>      - Support geocentric corner coordinate specification.
> 
> MrSID Driver:
>      - Support added for DSDK 4.0.x.
> 
> ECW Driver:
>      - Added preliminary support for using 3.0 SDK for JPEG2000 support.
>      - Fix oversampling assertion problem.
> 
> ArcInfo Binary Grids:
>      - Added support for 0x01 and 0x20 block type.
> 
> 
> OGR 1.2.1 - Overview of Changes
> -------------------------------
> 
> OGRSpatialReference:
>      - Various fixes related to prime meridians.
> 
> PostgreSQL/PostGIS Driver:
>      - Added layer name laundering.
>      - Launder names on by default.
>      - Clean stale entries in geometry_columns table when creating a
> layer.
>      - Support treating names views as layers.
>      - Handle long command strings.
> 
> S57 Driver:
>      - Fixed serious bugs with support for auto-applying update files.
>      - Improvements to S57 writing support.
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://xserve.flids.com/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3085 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040624/4bbd6506/smime.bin
From warmerdam at pobox.com  Thu Jun 24 10:45:06 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released
In-Reply-To: <20040624142638.EFB08B52AC@xserve.flids.com>
References: <20040624142638.EFB08B52AC@xserve.flids.com>
Message-ID: <40DAE8F2.90007@pobox.com>

Mladen Turk wrote:
> Hi,
> 
> 
>>-----Original Message-----
>>From: gdal-dev-bounces@remotesensing.org [mailto:gdal-dev-
>>
>>Please let me know if you run into any showstopper problems with this
>>release
>>and I will reissue it.
>>
> 
> 
> There is a problem with GDAL in general when used as DLL, missing delete
> mechanism for objects that are internally allocated using operator new.
> 
> Right now there is no way (at least I'm not aware of any) to release those
> objects. 
> 
> For example the OGRLayer, OGRStyleLabel etc... cannot be deleted withing
> GDAL/OGR heap.
> Either something like OGR_G_DestroyGeometry or OGR_F_DestroyFeature should
> be used or something like I proposed in MS #697.
> 
> http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=697

Mladen,

As I understand it this is an issue if you use GDAL as a DLL, but build
with static LIBC.  That means each DLL and the main program all have a
seperate heap, and it is critical that delete be called from within
the same DLL as the allocation took place within.

It can be avoided by building GDAL and the application with a runtime
C library.  I think this is accomplished with the /MD switch.

The other approach is to provide some sort of external destructor access
via exact function entry points.  I have done this already for many GDAL and
OGR objects.  In particular for GDAL it is usually sufficient to call GDALClose()
on a dataset handle to clean things up.

In OGR there are more objects to worry about. Features, datasources, and
coordinate system objects.  I think I have specific destructors for each of
those.  If others I needed I can extend it.  I am not keen to add a generic
OGRDelete as you have suggested in your bug report. I prefer specific
destructors.  But certainly MapServer needs to be updated to use them.  In
fact, I would like to also rewrite the MapServer mapogr.cpp code to use the
OGR C API instead of the C++ API.  This would address the delete issues and
other C++ linkage fragility issues all in one pass.  Hopefully this can be
done in time for the MapServer 4.4 release.

I will add this note to the mapserver bugzilla report as well for completeness.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mturk at apache.org  Thu Jun 24 11:30:47 2004
From: mturk at apache.org (Mladen Turk)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released
In-Reply-To: <40DAE8F2.90007@pobox.com>
Message-ID: <20040624153132.1845BB5940@xserve.flids.com>

Frank,

> From: Frank Warmerdam
> 
> It can be avoided by building GDAL and the application with a runtime
> C library.  I think this is accomplished with the /MD switch.
> 

True, but MFC still has a separate heap so the same problem again :(.

> The other approach is to provide some sort of external destructor access
> via exact function entry points.  I have done this already for many GDAL
> and
> OGR objects.  In particular for GDAL it is usually sufficient to call
> GDALClose()
> on a dataset handle to clean things up.
> 

Perhaps adding some tin root 'Object' for each public API class, like:
class OGRObject {
public:
	OGRObject() {};

	virual void Destroy(OGRObject *o) = 0;
};

Then you can have:

class OGRLayer : public OGRObject ...
and,
void OGRLayer::Destroy(OGRObject *o)
{
	delete (OGRLayer *)o;
}

That will force that each inherited class implements the Destroy method.


> I would like to also rewrite the MapServer mapogr.cpp code to use
> the
> OGR C API instead of the C++ API.

Excellent (after all mapserver is all plain C).

MT.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3085 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040624/17875a96/smime.bin
From jnipper at bhinc.com  Thu Jun 24 18:44:48 2004
From: jnipper at bhinc.com (John Nipper)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Re: LIDAR .las file format
References: <ED3A48B9840E594890A2BC172D119465FB9666@mailman.san.com>
Message-ID: <loom.20040625T003825-761@post.gmane.org>

Chapman, Martin <MChapman <at> sanz.com> writes:

> 
> 
> All,
> ?
> Has anyone written a 
> driver for the LIDAR (.las) file format for GDAL?? 
> ?
> 
> Martin Chapman
> Cell?303-885-1936
> Office 
> 303-660-3933 x226
> mchapman <at> sanz.com
> http://www.sanz.com
> 
> ?
> ?
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev <at> remotesensing.org
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 

I have written utilities that read/write las format.  I have not seen anything 
that is open source, or for GDAL yet.  I would be happy to help out with such 
a driver, if I can get permission to do so ...  At a minimum, I can answer 
questions about the format if anyone needs.

Thanks,
John Nipper
505 798-7907 direct office line
jnipper@bhinc.com




From schut at sarvision.com  Fri Jun 25 04:16:46 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <EKEJIKAILPONGGENMBGAAEKDHOAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAAEKDHOAA.nhv@cape.com>
Message-ID: <200406251017.07477.schut@sarvision.com>

On Thursday 24 June 2004 14:41, Norman Vine wrote:
<snip>
>
> I believe the attached HDFEOSVersion.h should work
Indeed, builds fine with this HDFEOSVersion.h
>
> BTW It would help if you told us what system you are using
> as well as the compiler
Sorry, thought I did that. Must have been in the previous mail I tried to send 
about this which got lost somewhere between maillist-servers... gcc version 
was in the subject line, though :-)

amd64, gentoo linux, gcc3.4.

Well, anyway, builds fine now. Thanks for the hack.

Cheers,
Vincent.
>
> HTH
>
> Norman

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From MChapman at sanz.com  Fri Jun 25 16:58:44 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Connect to Postgre?
Message-ID: <ED3A48B9840E594890A2BC172D119465FB967B@mailman.san.com>

All,
 
How do I connect to a Postgre database using OGR?  In other words, how
do I put together my connection string to pass to
OGRSFDriverRegistrar::Open()?  I tried the following:
 
OGRSFDriverRegistrar::Open("PG:pghost=172.17.38.85;pguser=pbarker;pgpass
=pbarker;dbname=ew", 0);
 
but it returns a NULL dataset.  Does anyone know what I'm doing wrong?
Is Postgre support enabled in the GDAL build automatically?
 
Thanks, 
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040625/d92a1edf/attachment.html
From tjmitchell at riverside.bc.ca  Fri Jun 25 18:58:57 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Connect to Postgre?
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB967B@mailman.san.com>
Message-ID: <OF67A509B2.8BEF0397-ON88256EBE.007E0AD6-88256EBE.007E3F4F@Riverside.bc.ca>

Hi Martin,
It is quite often already enabled.  I'd try using one of the command line 
utilities first to ensure it works.  I.e.:
> ogrinfo "PG:dbname=mydatabase host=giserver"

That should give you a list of layers (tables) in the db.

What language are you programming in?

Tyler

gdal-dev-bounces@xserve.flids.com wrote on 06/25/2004 01:58:44 PM:

> All,
> 
> How do I connect to a Postgre database using OGR?  In other words, 
> how do I put together my connection string to pass to 
> OGRSFDriverRegistrar::Open()?  I tried the following:
> 
> OGRSFDriverRegistrar::Open("PG:pghost=172.17.38.85;pguser=pbarker;
> pgpass=pbarker;dbname=ew", 0);
> 
> but it returns a NULL dataset.  Does anyone know what I'm doing 
> wrong?  Is Postgre support enabled in the GDAL build automatically?
> 
> Thanks, 
> 
> Martin Chapman
> Cell 303-885-1936
> Office 303-660-3933 x226
> mchapman@sanz.com
> http://www.sanz.com
> 
>  _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Fri Jun 25 19:07:14 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Connect to Postgre?
Message-ID: <ED3A48B9840E594890A2BC172D119465FB967F@mailman.san.com>

Tyler,

I tried that but it doesn't recognize pg as a driver:

C:\gdal\ogr>ogrinfo "PG:dbname=ew host=172.17.38.86"
FAILURE:
Unable to open datasource `PG:dbname=ew host=172.17.38.86' with the
following drivers.
  -> ESRI Shapefile
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> IHO S-57 (ENC)
  -> MapInfo File
  -> DGN
  -> GML
  -> AVCBin
  -> REC
  -> Memory

I am using Windows 2000 server and VC++ (latest version).  I use GDAL
and OGR a lot, so I know the libs work.  I think that the PG support is
not enabled in my build.  How do I enable the build to turn on support
for PG?  By the way, I actually have my app on both Linux Redhat 9 and
Windows, so instructions on how to enable it on both, or either, is
fine.

Thanks for the help.

Martin

-----Original Message-----
From: Tyler Mitchell [mailto:tjmitchell@riverside.bc.ca] 
Sent: Friday, June 25, 2004 4:59 PM
To: Chapman, Martin
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Connect to Postgre?


Hi Martin,
It is quite often already enabled.  I'd try using one of the command
line 
utilities first to ensure it works.  I.e.:
> ogrinfo "PG:dbname=mydatabase host=giserver"

That should give you a list of layers (tables) in the db.

What language are you programming in?

Tyler

gdal-dev-bounces@xserve.flids.com wrote on 06/25/2004 01:58:44 PM:

> All,
> 
> How do I connect to a Postgre database using OGR?  In other words,
> how do I put together my connection string to pass to 
> OGRSFDriverRegistrar::Open()?  I tried the following:
> 
> OGRSFDriverRegistrar::Open("PG:pghost=172.17.38.85;pguser=pbarker;
> pgpass=pbarker;dbname=ew", 0);
> 
> but it returns a NULL dataset.  Does anyone know what I'm doing
> wrong?  Is Postgre support enabled in the GDAL build automatically?
> 
> Thanks,
> 
> Martin Chapman
> Cell 303-885-1936
> Office 303-660-3933 x226
> mchapman@sanz.com
> http://www.sanz.com
> 
>  _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com 
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From tjmitchell at riverside.bc.ca  Fri Jun 25 19:28:35 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Connect to Postgre?
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB967F@mailman.san.com>
Message-ID: <OFECE326FB.08AE66DC-ON88256EBE.00809F92-88256EBE.0080F5A5@Riverside.bc.ca>

I'd highly recommend getting a hold of the openev_fw build which includes 
a whack of other tools, including a more complete set of GDAL already 
built for your platform.
ftp://ftp.remotesensing.org/pub/gdal/openev/

Hope that helps.

"Chapman, Martin" <MChapman@sanz.com> wrote on 06/25/2004 04:07:14 PM:

> Tyler,
> 
> I tried that but it doesn't recognize pg as a driver:
> 
> C:\gdal\ogr>ogrinfo "PG:dbname=ew host=172.17.38.86"
> FAILURE:
> Unable to open datasource `PG:dbname=ew host=172.17.38.86' with the
> following drivers.
>   -> ESRI Shapefile
>   -> UK .NTF
>   -> SDTS
>   -> TIGER
>   -> IHO S-57 (ENC)
>   -> MapInfo File
>   -> DGN
>   -> GML
>   -> AVCBin
>   -> REC
>   -> Memory
> 
> I am using Windows 2000 server and VC++ (latest version).  I use GDAL
> and OGR a lot, so I know the libs work.  I think that the PG support is
> not enabled in my build.  How do I enable the build to turn on support
> for PG?  By the way, I actually have my app on both Linux Redhat 9 and
> Windows, so instructions on how to enable it on both, or either, is
> fine.
> 
> Thanks for the help.
> 
> Martin
> 
> -----Original Message-----
> From: Tyler Mitchell [mailto:tjmitchell@riverside.bc.ca] 
> Sent: Friday, June 25, 2004 4:59 PM
> To: Chapman, Martin
> Cc: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] Connect to Postgre?
> 
> 
> Hi Martin,
> It is quite often already enabled.  I'd try using one of the command
> line 
> utilities first to ensure it works.  I.e.:
> > ogrinfo "PG:dbname=mydatabase host=giserver"
> 
> That should give you a list of layers (tables) in the db.
> 
> What language are you programming in?
> 
> Tyler
> 
> gdal-dev-bounces@xserve.flids.com wrote on 06/25/2004 01:58:44 PM:
> 
> > All,
> > 
> > How do I connect to a Postgre database using OGR?  In other words,
> > how do I put together my connection string to pass to 
> > OGRSFDriverRegistrar::Open()?  I tried the following:
> > 
> > OGRSFDriverRegistrar::Open("PG:pghost=172.17.38.85;pguser=pbarker;
> > pgpass=pbarker;dbname=ew", 0);
> > 
> > but it returns a NULL dataset.  Does anyone know what I'm doing
> > wrong?  Is Postgre support enabled in the GDAL build automatically?
> > 
> > Thanks,
> > 
> > Martin Chapman
> > Cell 303-885-1936
> > Office 303-660-3933 x226
> > mchapman@sanz.com
> > http://www.sanz.com
> > 
> >  _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com 
> > http://xserve.flids.com/mailman/listinfo/gdal-dev
> 


From schuyler at nocat.net  Sat Jun 26 02:02:26 2004
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] Fwd: Perl bindings for GDAL
Message-ID: <20040626060226.GM23320@vishnu.tridity.org>

Hi, folks, I've written some Perl bindings for the GDAL C API, under the
Geo::GDAL namespace. They're not complete yet, but they're good enough
for reading data out of GDAL-supported rasters. The code can be had from:

    http://search.cpan.org/~sderle/Geo-GDAL/

Comments and patches are welcome. Thanks!

SDE

From werchowyna at pf.pl  Sat Jun 26 08:17:08 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] reprojecting 2.0
Message-ID: <003f01c45b77$f6056100$ebe063d9@n7a3h9>

Hello!

Some time ago I sent a post about some basic issues with reprojecting
rasters. Now I resend it in a detailed form as the first version was a mess.

Question: imagine I reprojected raster A from one coord system to raster B
in the another system. Is it now possible to derive exactly the original
raster A from the raster B back, or, if not, how do I proceed to derive it
back possibly unchanged?

example:

I converted the SRTM BIL to a following GTIFF (using the Markus Neteler's
Grass script 'r.in.srtm' http://mpa.itc.it/rs/srtm/):

    Driver: GTiff/GeoTIFF
    Size is 1201, 1201
    Coordinate System is:
    GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree (supplier to define representation)",0.01745329251994328],
    AUTHORITY["EPSG","4326"]]
    Origin = (14.999583,51.000417)
    Pixel Size = (0.00083333,-0.00083333)
    Corner Coordinates:
    Upper Left  (  14.9995833,  51.0004167) ( 14d59'58.50"E, 51d 0'1.50"N)
    Lower Left  (  14.9995833,  49.9995833) ( 14d59'58.50"E, 49d59'58.50"N)
    Upper Right (  16.0004167,  51.0004167) ( 16d 0'1.50"E, 51d 0'1.50"N)
    Lower Right (  16.0004167,  49.9995833) ( 16d 0'1.50"E, 49d59'58.50"N)
    Center      (  15.5000000,  50.5000000) ( 15d30'0.00"E, 50d30'0.00"N)
    Band 1 Block=1201x3 Type=Int16, ColorInterp=Gray

Next I converted it into an "ETRS89 / Poland CS92" and then back into GEOGCS
projection (the projection of the SRTM by default). And now the pixel size
and the corner and centre coords are different than in the original so the
SRTM was distorted during the reprojecting. Is it unavoidable?

the 'distorted' GEOGCS SRTM is:

    (...) (as above)
    Pixel Size = (0.00085946,-0.00085946)
    Corner Coordinates:
    Upper Left  (  14.9142554,  51.0303873) ( 14d54'51.32"E, 51d 1'49.39"N)
    Lower Left  (  14.9142554,  49.9698135) ( 14d54'51.32"E, 49d58'11.33"N)
    Upper Right (  16.0633536,  51.0303873) ( 16d 3'48.07"E, 51d 1'49.39"N)
    Lower Right (  16.0633536,  49.9698135) ( 16d 3'48.07"E, 49d58'11.33"N)
    Center      (  15.4888045,  50.5001004) ( 15d29'19.70"E, 50d30'0.36"N)
    Band 1 Block=1337x3 Type=Int16, ColorInterp=Gray

Maciek


From tim at linfiniti.com  Sat Jun 26 10:01:24 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL Lan support
Message-ID: <200406261501.45234.tim@linfiniti.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi 

I am trying to use GDAL to open an erdas .lan dataset. The gdal documentation 
mentions that support that this implemented in file landataset.cpp which does 
not appear in my gdal src dir. When I try to open a .lan file I get a grass 
mapset error. Also, I dont see any mention of .lan in ./configure --help

Is opening .lan files with gdal still possible?

Many thanks

Tim Sutton
- -- 
The only reason for time is so that everything doesn't happen at once 
 --Albert Einstein 

Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFA3YHHWvXTJUo0BDoRApR7AKCQaeO48MPHA4WKcCBdggrXsa0N4QCeKs58
/ANjjx6sbD0LlNclaIK45Ws=
=qDPi
-----END PGP SIGNATURE-----

From paul-grass at stjohnspoint.co.uk  Sat Jun 26 11:35:19 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] reprojecting 2.0
In-Reply-To: <003f01c45b77$f6056100$ebe063d9@n7a3h9>
References: <003f01c45b77$f6056100$ebe063d9@n7a3h9>
Message-ID: <Pine.LNX.4.60.0406261627390.16920@agrippa.ukshells.co.uk>

Hello Maciek

On Sat, 26 Jun 2004, Maciek Sieczka wrote:

> in the another system. Is it now possible to derive exactly the original
> raster A from the raster B back, or, if not, how do I proceed to derive it
> back possibly unchanged?

I would say the short answer is you can't, because re-projecting involves 
resampling the raster and you will lose information through interpolation 
(or shifting pixel centroids if using nearest neighbour resampling). The 
GRASS r.proj man page has quite a good explanation of this:
http://www.geog.uni-hannover.de/grass/gdp/html_grass5/html/r.proj.html

Maybe to give yourself more control over the process convert the raster 
into sites (GRASS r.to.sites) before re-projecting and then use your 
preferred interpolation method (appropriate for your data) to create your 
new raster from the re-projected sites.

Doing this in GRASS gives you more control over 
the process but forces you to think in detail about what you are doing, 
whilst gdalwarp is very good if you want the job done quickly without 
having to think too much about it (or if you already understand the 
algorithms it uses and know they are appropriate for your purpose).

Paul

From dron at ak4719.spb.edu  Sun Jun 27 05:09:19 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] GDAL Lan support
In-Reply-To: <200406261501.45234.tim@linfiniti.com>
References: <200406261501.45234.tim@linfiniti.com>
Message-ID: <20040627090919.GA6987@ak4719.spb.edu>

On Sat, Jun 26, 2004 at 03:01:24PM +0100, Tim Sutton wrote:
> I am trying to use GDAL to open an erdas .lan dataset. The gdal
> documentation mentions that support that this implemented in file
> landataset.cpp which does not appear in my gdal src dir. When I try to
> open a .lan file I get a grass mapset error. Also, I dont see any
> mention of .lan in ./configure --help
> 
> Is opening .lan files with gdal still possible?

Support for LAN format was added to GDAL not long ago, so you should
grab the latest release (or daily snapshot) to get it working. It will
be compiled by default without any configure options and appears in the
output of "gdalinfo --formats" command as "LAN (ro): Erdas .LAN/.GIS".

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From MChapman at sanz.com  Mon Jun 28 19:59:00 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:18 2007
Subject: [Gdal-dev] OGDI question
Message-ID: <ED3A48B9840E594890A2BC172D119465FB968A@mailman.san.com>

All,
 
I'm having issues with ogdi_import.  I am trying to convert a VPF layer
to shape using ogdi_import -no-dict -u
gltp:/vrf/data/Vector/NGA_VMAP/v0sas/vmaplv0/rference -f Area -o polbnd
-l 'polbnd@polbnd(*)' .  The app works in the sense that it creates a
shape file (and dbf, shx), but it doesn't import the whole layer.  When
I open the shape file and compare it to the original vmap layer it's
missing some polygons.  I did the same operation using the OGR api to
open the vmap layer and I got the same results.  What I noticed though
was that some of the polygons (like Yemen) was not actually yemen, but a
polygon that was the edge of the entire eastern hemisphere.  I know the
vmap data is correct because I viewed it in ArcView and everything was
ok.  Do you have any idea what is going on here?  I can send the shape
output if you're interested.
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040628/c4ccb5b3/attachment.html
From lorenzo.moretti at bologna.enea.it  Tue Jun 29 05:32:37 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released - HDF error
Message-ID: <a0610050bbd06e5f8c51a@[192.107.62.86]>

Until GDAL 1.2.0 I have HDF4 support and it works.
Now I've compiled new GDAL with new HDF-EOS support and I have this error:

When I use gdalinfo for HDF file the output is similar:

OUTPUT FROM GDAL 1.2.0

[lor:~] lor% gdalinfo 
/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
   HDFEOSVersion=HDFEOS_V2.6
   IDOFASTERGDSDATAGRANULE=ASTL1B 0201101012540205220094
.....

.....
    QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":2
   SUBDATASET_1_DESC=[4200x4980] ImageData1 (8-bit unsigned integer)
 
SUBDATASET_2_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":3
   SUBDATASET_2_DESC=[4200x4980] ImageData2 (8-bit unsigned integer)
.....

.....
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


OUTPUT FROM GDAL 1.2.1

[lor:~] lor% gdalinfo 
/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
   HDFEOSVersion=HDFEOS_V2.6
   IDOFASTERGDSDATAGRANULE=ASTL1B 0201101012540205220094
.....

.....
   QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData1
   SUBDATASET_1_DESC=[4200x4980] ImageData1 (8-bit unsigned integer)
 
SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData2
   SUBDATASET_2_DESC=[4200x4980] ImageData2 (8-bit unsigned integer)
.....

.....
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


THE DIFFERENCES ARE AT THE END.
Now I have a band description.
But the error is after when I select one band.


OUTPUT FROM GDAL 1.2.0

[lor:~] lor% gdalinfo 
HDF4_SDS:ASTER_L1B:"/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf":2
Driver: HDF4Image/HDF4 Dataset
Size is 4980, 4200
Coordinate System is:
PROJCS["UTM Zone 33, Northern Hemisphere",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AXIS["Lat",NORTH],
         AXIS["Long",EAST],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",15],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]
GeoTransform =
   273342.0580804553, 14.62007381662245, -3.354636379426534
   4820040.394499515, -3.354618932788324, -14.6200685003371
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (0.5,0.5) -> (12.1965,43.4988,0)
GCP[  1]: Id=, Info=
           (498.5,0.5) -> (12.2872,43.486,0)
GCP[  2]: Id=, Info=
           (996.5,0.5) -> (12.3778,43.4731,0)
.....

.....
   PROJECTIONPARAMETERS14=6378137.000000, 6356752.300000, 0.999600, 
0.000000, 0.261799, 0.000000, 500000.000000, 0.000000, 0.000000, 
0.000000, 0.000000, 0.000000, 0.000000
   UTMZONECODE14=33
   INCL14=0.005225
.....

.....
   INSTRUMENTSHORTNAME=ASTER
   WESTBOUNDINGCOORDINATE=12.049274
   NORTHBOUNDINGCOORDINATE=43.498844
   EASTBOUNDINGCOORDINATE=13.101212
   SOUTHBOUNDINGCOORDINATE=42.811432
   TIMEOFDAY=101254443000Z
.....

.....
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Corner Coordinates:
Upper Left  (  273342.058, 4820040.394) ( 12d11'47.31"E, 43d29'56.12"N)
Lower Left  (  259252.585, 4758636.107) ( 12d 2'57.12"E, 42d56'32.39"N)
Upper Right (  346150.026, 4803334.392) ( 13d 6'4.10"E, 43d22'1.61"N)
Lower Right (  332060.553, 4741930.105) ( 12d56'45.26"E, 42d48'41.44"N)
Center      (  302701.305, 4780985.250) ( 12d34'23.91"E, 43d 9'21.21"N)
Band 1 Block=4980x1 Type=Byte, ColorInterp=Gray


OUTPUT FROM GDAL 1.2.1

[lor:~] lor% gdalinfo 
HDF4_EOS:EOS_SWATH:"/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData1
Driver: HDF4Image/HDF4 Dataset
Size is 4980, 4200
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 4200.0)
Upper Right ( 4980.0,    0.0)
Lower Right ( 4980.0, 4200.0)
Center      ( 2490.0, 2100.0)
Band 1 Block=4980x1 Type=Byte, ColorInterp=Gray


Now I've lost the projection and now I can not translate with 
gdalwarp for importing in grass. In Grass 5.7 there is a module 
r.in.aster from Michael Burton based on this method and it's very 
easy method for importing ASTER files in GRASS 5.7.

What is the solution ?

-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040629/5106bb07/attachment.html
From j.l.h.hartmann at uva.nl  Tue Jun 29 11:45:48 2004
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] remotesensign.org on non-standard port
In-Reply-To: <40D9E51C.9060502@pobox.com>
References: <40D9E51C.9060502@pobox.com>
Message-ID: <40E18EAC.5090005@uva.nl>



I saw that www.remotesensing.org/gdal translates to

http://www.remotesensing.org:16080/gdal/

Perhaps this is just a temporary measure, but I recently opened a 
website on a non-standard port, and got an awful lot of messages from 
people who couldn't connect, because their organisations had closed off 
all web access on ports other than 80. I really had to redesign it to 
use port 80.

Jan

Jan Hartmann
Department of Geography
University of Amsterdam

From daniel.mac at elantech-inc.com  Tue Jun 29 11:39:00 2004
From: daniel.mac at elantech-inc.com (Daniel Mac)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problems Building gdal 1.2.0; 1.2.1 using SUN forte CC
Message-ID: <loom.20040629T173819-543@post.gmane.org>

Hello,

I was able to build gdal 1.1.9 using the latest version of SUN forte CC, but i 
am running into trouble when I try to build gdal 1.2.0 or later (mainly 
linking)...

I am using the libtool feature in the makefile, and i set my configure line as 
such:

./configure --prefix=/home/External/gdal-1.2.1/ --with-libz=internal

however, upon linking i get undefined symbols

Undefined                       first referenced
 symbol                             in file
void*operator new[](unsigned)                       ./frmts/o/.libs/ddfrecord.o
gmtime                              ./frmts/o/.libs/pngwrite.o  (symbol 
belongs to implicit dependency /usr/lib/libc.so.1)
calloc                              ./frmts/o/.libs/EnvisatFile.o  (symbol 
belongs to implicit dependency /usr/lib/libc.so.1)
atof                                ./frmts/o/.libs/EnvisatFile.o  (symbol 
belongs to implicit dependency /usr/lib/libc.so.1)
atoi                                ./frmts/o/.libs/EnvisatFile.o  (symbol 
belongs to implicit dependency /usr/lib/libc.so.1)
(there are more, but generally in teh same format)

so I edit the GDALmake.opt file to include -lc for the c standard 
libraries...the resultant undefined symbols are:
Undefined                       first referenced
 symbol                             in file
void*operator new[](unsigned)                       ./frmts/o/.libs/ddfrecord.o
void __Crun::vector_con(void*,unsigned,unsigned,void(*)(void*),void(*)
(void*)) ./frmts/o/.libs/atlsci_spheroid.o
void operator delete
(void*)                       ./frmts/o/.libs/aaigriddataset.o
void __Crun::pure_error()         ./frmts/o/.libs/pcidskdataset.o
void __Crun::ex_rethrow_q()       ./frmts/o/.libs/aaigriddataset.o
void*operator new
(unsigned)                       ./frmts/o/.libs/aaigriddataset.o
CPLCreateThread                     ./alg/.libs/gdalwarpoperation.o
void operator delete[](void*)                       ./frmts/o/.libs/ddfrecord.o
void __Crun::vector_des(void*,unsigned,unsigned,void(*)
(void*)) ./frmts/o/.libs/atlsci_spheroid.o

trying to build gdal 1.2.0 WITHOUT libtool, i get undefined symbol 
SetCSVFilenameHook                  /home/External/gdal-1.2.0/libgdal.a
(geotiff.o)

again I am using cc and CC instead of gcc g++...any help or ideas are greatly 
appreciated, thanks...

Dan


From bclay at ball.com  Tue Jun 29 15:51:29 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] UTM question
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C952@APPMSG2.AERO.BALL.COM>

Is there anything in the GDAL package that can given 2 points in either
geocentric or geodetic coordinates determine the distance between the 2
points in x and y values?  I realize that UTM is in meters and within a
given zone all I have to do is subtract.  For some reason I am not
grasping what has to be done to get an accurate measurement across UTM
zones.  I like the idea of using the UTM system because it is in meters
which can easily be scaled in a scene but I can't find anything on the
web to guide me through what seem like it should be an easy step.

I am working on a 3D visualization package that will be given a stream
of WGS84 based geocentric coordinates and I need to update the position
of objects in the scene.  Since the scene is a small area with its own
sense of altitude (or elevation data) I am treating it like a flat earth
view and disregarding tilt of the patch to the global reference frame.

Thanks in advance for your help.

Bruce Clay
bclay@ball.com 

From dron at ak4719.spb.edu  Tue Jun 29 15:35:31 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <200406251017.07477.schut@sarvision.com>
References: <EKEJIKAILPONGGENMBGAAEKDHOAA.nhv@cape.com>
	<200406251017.07477.schut@sarvision.com>
Message-ID: <20040629193531.GA13234@ak4719.spb.edu>

On Fri, Jun 25, 2004 at 10:16:46AM +0200, Vincent Schut wrote:
> > I believe the attached HDFEOSVersion.h should work
> Indeed, builds fine with this HDFEOSVersion.h

Sorry for delay with fixing that problem, but now it should be solved (I
have tested with gcc-3.3)


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Tue Jun 29 14:53:27 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released - HDF error
In-Reply-To: <a0610050bbd06e5f8c51a@[192.107.62.86]>
References: <a0610050bbd06e5f8c51a@[192.107.62.86]>
Message-ID: <20040629185327.GA12962@ak4719.spb.edu>

Lorenzo,

On Tue, Jun 29, 2004 at 11:32:37AM +0200, Lorenzo Moretti wrote:
> Until GDAL 1.2.0 I have HDF4 support and it works.
...
> Now I've lost the projection and now I can not translate with gdalwarp
> for importing in grass. In Grass 5.7 there is a module r.in.aster from
> Michael Burton based on this method and it's very easy method for
> importing ASTER files in GRASS 5.7.
> 
> What is the solution ?

There is no solution yet, sorry. If you are hardly depend on ASTER data
I'm recommend to stay using 1.2.0 for a some time. I'm working on
enchacing the HDF-EOS driver to be able to import any kind of input
data, but in the current state it can properly deals with the HDF-EOS
Grid datasets only.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From archer at eskimo.com  Tue Jun 29 16:05:09 2004
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] UTM question
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C952@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C952@APPMSG2.AERO.BALL.COM>
Message-ID: <Pine.SUN.4.58.0406291300010.13597@eskimo.com>

On Tue, 29 Jun 2004, Clay, Bruce wrote:

> Is there anything in the GDAL package that can given 2 points in either
> geocentric or geodetic coordinates determine the distance between the 2
> points in x and y values?  I realize that UTM is in meters and within a
> given zone all I have to do is subtract.  For some reason I am not
> grasping what has to be done to get an accurate measurement across UTM
> zones.  I like the idea of using the UTM system because it is in meters
> which can easily be scaled in a scene but I can't find anything on the
> web to guide me through what seem like it should be an easy step.

It's not an easy step.  Because of the way UTM zones are defined.
The relationship between points in nearby zones is not a simple one.
Your best bet is to convert to lat/long coordinates, compute the
distance using great-circle coordinates.


> I am working on a 3D visualization package that will be given a stream
> of WGS84 based geocentric coordinates and I need to update the position
> of objects in the scene.  Since the scene is a small area with its own
> sense of altitude (or elevation data) I am treating it like a flat earth
> view and disregarding tilt of the patch to the global reference frame.

I work on a 2D program that can plot moving/stationary objects, and
we can switch between MGRS, UTM, and multiple lat/long
representations for the positions.  Also be aware that there are
some special UTM zones as well, which don't correspond to the
standard zone boundaries.  These are in the Europe area and north.
Our application can switch between the standard zones and these
special zones.

Another note about UTM:  The military actually allows using eastings
that bleed over into the next zone, for such activities as
targeting.  I don't recall off-hand how far into the next zone they
allow this sort of usage.

--
Curt, WE7U			         http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From schut at sarvision.com  Wed Jun 30 04:08:50 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] hdf4, hdf-eos and gcc 3.4 issues
In-Reply-To: <20040629193531.GA13234@ak4719.spb.edu>
References: <EKEJIKAILPONGGENMBGAAEKDHOAA.nhv@cape.com>
	<200406251017.07477.schut@sarvision.com>
	<20040629193531.GA13234@ak4719.spb.edu>
Message-ID: <200406301008.51129.schut@sarvision.com>

On Tuesday 29 June 2004 21:35, Andrey Kiselev wrote:
> On Fri, Jun 25, 2004 at 10:16:46AM +0200, Vincent Schut wrote:
> > > I believe the attached HDFEOSVersion.h should work
> >
> > Indeed, builds fine with this HDFEOSVersion.h
>
> Sorry for delay with fixing that problem, but now it should be solved (I
> have tested with gcc-3.3)

Building of current cvs confirmed with gcc-3.4. Have not done any 
functionality tests, though.

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From otto.dassau at gmx.de  Wed Jun 30 04:35:04 2004
From: otto.dassau at gmx.de (Otto Dassau)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] ERDAS/IMG driver error for NULL values
Message-ID: <20040630083747.8C125D2523@xserve.flids.com>

Hi, 

Sorry for using the mailing list for this bug report, but bugzilla currently doesn't work:  

I have problems exporting images into ERDAS Format from GRASS GIS using r.out.gdal and r.in.gdal. I use a current GDAL CVS snapshot together with GRASS GIS. 

BUG:
- exporting GRASS Raster file into ERDAS/IMG and reimporting into GRASS GIS again all NULL values change to value 32. I tried the same with GeoTiff Format and there it works without problems: Null is NULL again. So this works for GeoTiff but not for ERDAS/IMG and might be a problem of the ERDAS/IMG driver, I guess.

WISH:
apart from that I also have a two general wishes: 

a)general color table support for images more than 8bit. Colortable is broken for 16bit images. 

b)displaying coordinate system infos in gdalinfo would be very nice, too. 

### some information using gdalinfo on the exported files (ERDAS/IMG and ### GeoTiff 

gdalinfo -mm bor_halo_100604.img
> Driver: HFA/Erdas Imagine Images (.img)
> Size is 12333, 10083
> Coordinate System is:
> LOCAL_CS["Unknown",
>     UNIT["meters",1]]
> Origin = (3347187.000000,5944962.000000)
> Pixel Size = (0.60000000,-0.60000000)
> Corner Coordinates:
> Upper Left  ( 3347187.000, 5944962.000)
> Lower Left  ( 3347187.000, 5938912.200)
> Upper Right ( 3354586.800, 5944962.000)
> Lower Right ( 3354586.800, 5938912.200)
> Center      ( 3350886.900, 5941937.100)
> Band 1 Block=64x64 Type=UInt16, ColorInterp=Undefined
>     Computed Min/Max=32.000,351.000
> Metadata:
>   COLOR_TABLE_RULES_COUNT=0

Importing the ERDAS file to GRASS again with r.in.gdal all NULL values get the value 32 and the colortable is broken, too - probably because 
16bit is not implemented (only 8bit) yet, isn't it?

Also there is no coordinate system specified. This should be:  

> name: Transverse Mercator
> datum: potsdam
> towgs84: 590.5,69.5,411.6,-0.796,-0.052,-3.601,8.30
> proj: tmerc
> ellps: bessel
> a: 6377397.1550000003
> es: 0.0066743722
> f: 299.1528128000
> lat_0: 0.0000000000
> lon_0: 9.0000000000
> k_0: 1.0000000000
> x_0: 3500000.0000000000
> y_0: 0.0000000000


I tried the same with GeoTiff:

gdalinfo -mm bor_halo60f53_100604.tiff
> Driver: GTiff/GeoTIFF
> Size is 12333, 10083
> Coordinate System is `'
> Origin = (3347187.000000,5944962.000000)
> Pixel Size = (0.60000000,-0.60000000)
> Corner Coordinates:
> Upper Left  ( 3347187.000, 5944962.000)
> Lower Left  ( 3347187.000, 5938912.200)
> Upper Right ( 3354586.800, 5944962.000)
> Lower Right ( 3354586.800, 5938912.200)
> Center      ( 3350886.900, 5941937.100)
> Band 1 Block=12333x1 Type=UInt16, ColorInterp=Gray
>     Computed Min/Max=32.000,351.000
>   NoData Value=0
> 
> -> Farben natuerlich auch nicht dabei:
> r.in.gdal -oe in=bor_halo60f53_100604.tiff out=muell2
> CREATING SUPPORT FILES FOR muell2
> SETTING GREY COLOR TABLE FOR muell2 (16bit, image range)


I hope this can be fixed. 

thanks a lot
  Otto





From paul-grass at stjohnspoint.co.uk  Wed Jun 30 06:14:45 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] ERDAS/IMG driver error for NULL values
References: <20040630083747.8C125D2523@xserve.flids.com>
Message-ID: <40E29295.2E3C30B7@stjohnspoint.co.uk>

Hello Otto

Otto Dassau wrote:
> 
> 
> Also there is no coordinate system specified. This should be:
> 
> > name: Transverse Mercator
> > datum: potsdam
> > towgs84: 590.5,69.5,411.6,-0.796,-0.052,-3.601,8.30
> > proj: tmerc
> > ellps: bessel
> > a: 6377397.1550000003
> > es: 0.0066743722
> > f: 299.1528128000
> > lat_0: 0.0000000000
> > lon_0: 9.0000000000
> > k_0: 1.0000000000
> > x_0: 3500000.0000000000
> > y_0: 0.0000000000

This looks like a deficiency in the r.out.gdal script. In GRASS 5.7 now
the co-ordinate system can be printed in WKT format using `g.proj -wf`.
I assume gdal_translate has a command-line option to specify the output
co-ordinate system and this could be easily added to the corresponding
line in the r.out.gdal script.

Just a suggestion,

Paul.

From neteler at itc.it  Wed Jun 30 09:02:55 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] ERDAS/IMG driver error for NULL values
In-Reply-To: <40E29295.2E3C30B7@stjohnspoint.co.uk>
References: <20040630083747.8C125D2523@xserve.flids.com>
	<40E29295.2E3C30B7@stjohnspoint.co.uk>
Message-ID: <20040630130255.GF24334@thuille.itc.it>

On Wed, Jun 30, 2004 at 11:14:45AM +0100, Paul Kelly wrote:
> Hello Otto
> 
> Otto Dassau wrote:
> > 
> > 
> > Also there is no coordinate system specified.

Otto, are you using the original GRASS driver or the new driver
of Radim Blazek (not in CVS yet)?

> This should be:
> > 
> > > name: Transverse Mercator
> > > datum: potsdam
> > > towgs84: 590.5,69.5,411.6,-0.796,-0.052,-3.601,8.30
> > > proj: tmerc
> > > ellps: bessel
> > > a: 6377397.1550000003
> > > es: 0.0066743722
> > > f: 299.1528128000
> > > lat_0: 0.0000000000
> > > lon_0: 9.0000000000
> > > k_0: 1.0000000000
> > > x_0: 3500000.0000000000
> > > y_0: 0.0000000000
> 
> This looks like a deficiency in the r.out.gdal script.

I don't think so. Because the r.out.gdal script is simply a wrapper
around gdal_translate.

In fact gdalinfo doesn't print the projection:

gdalinfo ~/grassdata/spearfish57/PERMANENT/cellhd/elevation.dem | head
Driver: GRASS/GRASS Database Rasters
Size is 633, 466
Coordinate System is `'
Origin = (590010.000000,4928000.000000)
Pixel Size = (30.00000000,-30.00000000)
Corner Coordinates:
Upper Left  (  590010.000, 4928000.000)
Lower Left  (  590010.000, 4914020.000)
Upper Right (  609000.000, 4928000.000)
Lower Right (  609000.000, 4914020.000)
[...]

I am using the new driver which contains the relevant code (I'm no
expert). Somewhere this info get's lost. Or should the driver make
use of the new GRASS 5.7 projection functions (such as GPJ_grass_to_wkt
in grass57/lib/proj/convert.c )?

Once solved in GDAL also r.out.gdal will write out the projection.

Markus


From dron at ak4719.spb.edu  Wed Jun 30 13:21:43 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] ERDAS/IMG driver error for NULL values
In-Reply-To: <20040630083747.8C125D2523@xserve.flids.com>
References: <20040630083747.8C125D2523@xserve.flids.com>
Message-ID: <20040630172143.GA22385@ak4719.spb.edu>

Hi, Otto,

On Wed, Jun 30, 2004 at 10:35:04AM +0200, Otto Dassau wrote:
> - exporting GRASS Raster file into ERDAS/IMG and reimporting into
> GRASS GIS again all NULL values change to value 32. I tried the same
> with GeoTiff Format and there it works without problems: Null is NULL
> again. So this works for GeoTiff but not for ERDAS/IMG and might be a
> problem of the ERDAS/IMG driver, I guess.

Yes, this is definitely a problem of the HFA driver just because NoData
does not supported for that datasets. But you should provide more
information here: gdalinfo on input and output datasets and results of
gdal_translate command. Does gdal_translate produce wrong files too?

> a)general color table support for images more than 8bit. Colortable is
> broken for 16bit images. 

HFA driver supports as much colors as it was used in the file. What do
you exactly mean when saying about broken color tables? (gdalinfo
results on input/output files helps here).

> b)displaying coordinate system infos in gdalinfo would be very nice,
> too. 

I see that this issue was further discussed in the GRASS list. Am I
right that it is a r.out.gdal problem and fix is already found?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From paul-grass at stjohnspoint.co.uk  Wed Jun 30 16:17:33 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] ERDAS/IMG driver error for NULL values
In-Reply-To: <20040630172143.GA22385@ak4719.spb.edu>
References: <20040630083747.8C125D2523@xserve.flids.com>
	<20040630172143.GA22385@ak4719.spb.edu>
Message-ID: <Pine.LNX.4.60.0406302116020.17602@agrippa.ukshells.co.uk>

Hello Andrey

On Wed, 30 Jun 2004, Andrey Kiselev wrote:

>> b)displaying coordinate system infos in gdalinfo would be very nice,
>> too.
>
> I see that this issue was further discussed in the GRASS list. Am I
> right that it is a r.out.gdal problem and fix is already found?

That was only a temporary workaround; there is a longer term problem that 
nobody has solved yet: see
http://grass.itc.it/pipermail/grass5/2004-May/014522.html
and follow-ups for some details.

Paul

From fniles at mitre.org  Wed Jun 30 19:45:38 2004
From: fniles at mitre.org (Rick Niles)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Can we make a good and fast gdal_merge ?
Message-ID: <40E350A2.1010508@mitre.org>

I wrote this gdal_merge quickly and it's been OK for my needs, but it's 
slow and only outputs in BMP format with WLD files.  I wanted to put 
more work into it, but I haven't had time.  Anyway, I was hoping someone 
else would help make a real "gdal_merge" with all the proper options one 
would expect and perhaps, better performance.  I was also hoping that 
whatever get's produced could be added to the gdal distribution tarball 
along side the Python version.

I'm beggin' ya.  Please make my code suck less.

I hope it's not againist the mailing list rules to include a 1668 byte 
attachment. :)

    Rick Niles.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_merge.c.gz
Type: application/x-gzip
Size: 1668 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040630/d9719890/gdal_merge.c.gz
From schuyler at frot.org  Sat Jun 26 01:35:35 2004
From: schuyler at frot.org (Schuyler Erle)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Perl bindings for GDAL
Message-ID: <20040626053535.GL23320@vishnu.tridity.org>

Hi, folks, I've written some Perl bindings for the GDAL C API, under the
Geo::GDAL namespace. They're not complete yet, but they're good enough
for reading data out of GDAL-supported rasters. The code can be had from:

    http://search.cpan.org/~sderle/Geo-GDAL/

Comments and patches are welcome. Thanks!

SDE

From lorenzo.moretti at bologna.enea.it  Mon Jun 28 11:14:03 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GDAL 1.2.1 Released - HDF error
Message-ID: <a06100507bd05e198be58@[192.107.62.86]>

Until GDAL 1.2.0 I have HDF4 support and it works.
Now I've compiled new GDAL with new HDF-EOS support and I have this problem:

When I use gdalinfo for HDF file the output is similar:

OUTPUT FRO GDAL 1.2.0

[lor:~] lor% gdalinfo 
/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
   HDFEOSVersion=HDFEOS_V2.6
   IDOFASTERGDSDATAGRANULE=ASTL1B 0201101012540205220094
.....

.....
    QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":2
   SUBDATASET_1_DESC=[4200x4980] ImageData1 (8-bit unsigned integer)
 
SUBDATASET_2_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":3
   SUBDATASET_2_DESC=[4200x4980] ImageData2 (8-bit unsigned integer)
 
SUBDATASET_3_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":4
   SUBDATASET_3_DESC=[4200x4980] ImageData3N (8-bit unsigned integer)
 
SUBDATASET_4_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":5
   SUBDATASET_4_DESC=[4600x4980] ImageData3B (8-bit unsigned integer)
 
SUBDATASET_5_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":8
   SUBDATASET_5_DESC=[2100x2490] ImageData4 (8-bit unsigned integer)
 
SUBDATASET_6_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":9
   SUBDATASET_6_DESC=[2100x2490] ImageData5 (8-bit unsigned integer)
 
SUBDATASET_7_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":10
   SUBDATASET_7_DESC=[2100x2490] ImageData6 (8-bit unsigned integer)
 
SUBDATASET_8_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":11
   SUBDATASET_8_DESC=[2100x2490] ImageData7 (8-bit unsigned integer)
 
SUBDATASET_9_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":12
   SUBDATASET_9_DESC=[2100x2490] ImageData8 (8-bit unsigned integer)
 
SUBDATASET_10_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":13
   SUBDATASET_10_DESC=[2100x2490] ImageData9 (8-bit unsigned integer)
 
SUBDATASET_11_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":16
   SUBDATASET_11_DESC=[700x830] ImageData10 (16-bit unsigned integer)
 
SUBDATASET_12_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":17
   SUBDATASET_12_DESC=[700x830] ImageData11 (16-bit unsigned integer)
 
SUBDATASET_13_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":18
   SUBDATASET_13_DESC=[700x830] ImageData12 (16-bit unsigned integer)
 
SUBDATASET_14_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":19
   SUBDATASET_14_DESC=[700x830] ImageData13 (16-bit unsigned integer)
 
SUBDATASET_15_NAME=HDF4_SDS:ASTER_L1B:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":20
   SUBDATASET_15_DESC=[700x830] ImageData14 (16-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


OUTPUT FRO GDAL 1.2.1

[lor:~] lor% gdalinfo 
/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Metadata:
   HDFEOSVersion=HDFEOS_V2.6
   IDOFASTERGDSDATAGRANULE=ASTL1B 0201101012540205220094
.....

.....
   QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData1
   SUBDATASET_1_DESC=[4200x4980] ImageData1 (8-bit unsigned integer)
 
SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData2
   SUBDATASET_2_DESC=[4200x4980] ImageData2 (8-bit unsigned integer)
 
SUBDATASET_3_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData3N
   SUBDATASET_3_DESC=[4200x4980] ImageData3N (8-bit unsigned integer)
 
SUBDATASET_4_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData3B
   SUBDATASET_4_DESC=[4600x4980] ImageData3B (8-bit unsigned integer)
 
SUBDATASET_5_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData4
   SUBDATASET_5_DESC=[2100x2490] ImageData4 (8-bit unsigned integer)
 
SUBDATASET_6_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData5
   SUBDATASET_6_DESC=[2100x2490] ImageData5 (8-bit unsigned integer)
 
SUBDATASET_7_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData6
   SUBDATASET_7_DESC=[2100x2490] ImageData6 (8-bit unsigned integer)
 
SUBDATASET_8_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData7
   SUBDATASET_8_DESC=[2100x2490] ImageData7 (8-bit unsigned integer)
 
SUBDATASET_9_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData8
   SUBDATASET_9_DESC=[2100x2490] ImageData8 (8-bit unsigned integer)
 
SUBDATASET_10_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":SWIR_Swath:ImageData9
   SUBDATASET_10_DESC=[2100x2490] ImageData9 (8-bit unsigned integer)
 
SUBDATASET_11_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":TIR_Swath:ImageData10
   SUBDATASET_11_DESC=[700x830] ImageData10 (16-bit unsigned integer)
 
SUBDATASET_12_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":TIR_Swath:ImageData11
   SUBDATASET_12_DESC=[700x830] ImageData11 (16-bit unsigned integer)
 
SUBDATASET_13_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":TIR_Swath:ImageData12
   SUBDATASET_13_DESC=[700x830] ImageData12 (16-bit unsigned integer)
 
SUBDATASET_14_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":TIR_Swath:ImageData13
   SUBDATASET_14_DESC=[700x830] ImageData13 (16-bit unsigned integer)
 
SUBDATASET_15_NAME=HDF4_EOS:EOS_SWATH:"/Volumes/PB_APPLI/LAVORI/MAPPE/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":TIR_Swath:ImageData14
   SUBDATASET_15_DESC=[700x830] ImageData14 (16-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


THE DIFFERENCES ARE AT THE END.
Now I have a band description.
But the error is after when I select one band.


OUTPUT FRO GDAL 1.2.0

[lor:~] lor% gdalinfo 
HDF4_SDS:ASTER_L1B:"/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf":2
Driver: HDF4Image/HDF4 Dataset
Size is 4980, 4200
Coordinate System is:
PROJCS["UTM Zone 33, Northern Hemisphere",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AXIS["Lat",NORTH],
         AXIS["Long",EAST],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",15],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]
GeoTransform =
   273342.0580804553, 14.62007381662245, -3.354636379426534
   4820040.394499515, -3.354618932788324, -14.6200685003371
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (0.5,0.5) -> (12.1965,43.4988,0)
GCP[  1]: Id=, Info=
           (498.5,0.5) -> (12.2872,43.486,0)
GCP[  2]: Id=, Info=
           (996.5,0.5) -> (12.3778,43.4731,0)
.....

.....
   PROJECTIONPARAMETERS14=6378137.000000, 6356752.300000, 0.999600, 
0.000000, 0.261799, 0.000000, 500000.000000, 0.000000, 0.000000, 
0.000000, 0.000000, 0.000000, 0.000000
   UTMZONECODE14=33
   INCL14=0.005225
   OFFSET14=-0.005225
   CONUNIT14=W/m2/sr/um
   SHORTNAME=ASTL1B
   SIZEMBDATAGRANULE=119.230000
   PRODUCTIONDATETIME=2002-05-22T15:02:44.000Z
   PLATFORMSHORTNAME=AM-1
   INSTRUMENTSHORTNAME=ASTER
   WESTBOUNDINGCOORDINATE=12.049274
   NORTHBOUNDINGCOORDINATE=43.498844
   EASTBOUNDINGCOORDINATE=13.101212
   SOUTHBOUNDINGCOORDINATE=42.811432
   TIMEOFDAY=101254443000Z
   CALENDARDATE=20020110
   FUTUREREVIEWDATE=20020312
   SCIENCEREVIEWDATE=20011201
   QAPERCENTMISSINGDATA=0.000006
   QAPERCENTOUTOFBOUNDSDATA=0.000006
   QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Corner Coordinates:
Upper Left  (  273342.058, 4820040.394) ( 12d11'47.31"E, 43d29'56.12"N)
Lower Left  (  259252.585, 4758636.107) ( 12d 2'57.12"E, 42d56'32.39"N)
Upper Right (  346150.026, 4803334.392) ( 13d 6'4.10"E, 43d22'1.61"N)
Lower Right (  332060.553, 4741930.105) ( 12d56'45.26"E, 42d48'41.44"N)
Center      (  302701.305, 4780985.250) ( 12d34'23.91"E, 43d 9'21.21"N)
Band 1 Block=4980x1 Type=Byte, ColorInterp=Gray


OUTPUT FRO GDAL 1.2.1

[polar:~] ben% gdalinfo 
HDF4_EOS:EOS_SWATH:"/Volumes/ASTER_files/AST_L1B_003_01102002101254_05222002150244.hdf":VNIR_Swath:ImageData1
Driver: HDF4Image/HDF4 Dataset
Size is 4980, 4200
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 4200.0)
Upper Right ( 4980.0,    0.0)
Lower Right ( 4980.0, 4200.0)
Center      ( 2490.0, 2100.0)
Band 1 Block=4980x1 Type=Byte, ColorInterp=Gray


Now I've lost the projection and now I can not translate with 
gdalwarp for importing in grass. In Grass 5.7 there is a module 
r.in.aster from Michael Burton based on this method and it's very 
easy method for importing ASTER files in GRASS 5.7.

What is the solution ?

-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040628/4ce17740/attachment.html
From Eric.Doenges at rcs.ei.tum.de  Wed Jun 30 02:52:57 2004
From: Eric.Doenges at rcs.ei.tum.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problems Building gdal 1.2.0; 1.2.1 using SUN forte CC
In-Reply-To: <loom.20040629T173819-543@post.gmane.org>
References: <loom.20040629T173819-543@post.gmane.org>
Message-ID: <1E56F52B-CA62-11D8-BFCE-000393A3C40C@rcs.ei.tum.de>


Am 29.06.2004 um 17:39 schrieb Daniel Mac:

> so I edit the GDALmake.opt file to include -lc for the c standard
> libraries...the resultant undefined symbols are:
> Undefined                       first referenced
>  symbol                             in file
> void*operator new[](unsigned)                       
> ./frmts/o/.libs/ddfrecord.o
> void __Crun::vector_con(void*,unsigned,unsigned,void(*)(void*),void(*)
> (void*)) ./frmts/o/.libs/atlsci_spheroid.o
> void operator delete
> (void*)                       ./frmts/o/.libs/aaigriddataset.o
> void __Crun::pure_error()         ./frmts/o/.libs/pcidskdataset.o
> void __Crun::ex_rethrow_q()       ./frmts/o/.libs/aaigriddataset.o
> void*operator new
> (unsigned)                       ./frmts/o/.libs/aaigriddataset.o
> CPLCreateThread                     ./alg/.libs/gdalwarpoperation.o
> void operator delete[](void*)                       
> ./frmts/o/.libs/ddfrecord.o
> void __Crun::vector_des(void*,unsigned,unsigned,void(*)
> (void*)) ./frmts/o/.libs/atlsci_spheroid.o

It looks like libtool isn't linking against the standard C++ library 
and you have to
include that manually as well.

> trying to build gdal 1.2.0 WITHOUT libtool, i get undefined symbol
> SetCSVFilenameHook                  /home/External/gdal-1.2.0/libgdal.a
> (geotiff.o)

You should probably get the CVS version of GDAL. port/cpl_cvs.cpp 
contains the
following commit log entry:

  * $Log: cpl_csv.cpp,v $
  * Revision 1.10  2004/04/27 14:28:49  warmerda
  * Avoid Solaris C++ problems with SetCSVFilenameHook().

If using the current CVS isn't an option for you, I can send you the 
current file per
private EMail if you want.

Obligatory disclaimer: it's been years since I've worked on a Solaris 
system, and I'm
no expert on GDAL, so I may be totally wrong.

With regards,
Eric


From Kyler at Lairds.com  Wed Jun 30 15:40:53 2004
From: Kyler at Lairds.com (Kyler Laird)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GDAL: projection data not copying completely
Message-ID: <20040630194053.GG2400@withers>

It's been reported that GeoTIFF images I create using GDAL are unusable
by some applications.
	http://groups.google.com/groups?selm=5foEc.18210%24Pc.11314%40fe1.texas.rr.com

The issue seems to be projection data.  As a test, I tried to create a
new GeoTIFF from an existing one, using the existing image's projection
data.
	a = gdal.Open('/tmp/a.tif')

	b = gdal.GetDriverByName('GTiff').Create(
		'/tmp/b.tif',
		a.RasterXSize, a.RasterYSize,
		3, gdal.GDT_Byte,
		[ 'TILED=YES' ]
	)

	b.SetDescription(a.GetDescription())
	b.SetProjection(a.GetProjection())
	b.SetGeoTransform(a.GetGeoTransform())
	b.SetMetadata(a.GetMetadata())

Performing a diff on the output of listgeo for each of these images, I
see the culprit(s).
	<       ProjNatOriginLongGeoKey (Double,1): -89
	<       ProjFalseOriginLongGeoKey (Double,1): 0
	>       ProjFalseEastingGeoKey (Double,1): 0
	>       ProjFalseNorthingGeoKey (Double,1): 0
	>       ProjFalseOriginLongGeoKey (Double,1): -89
	<       ProjFalseOriginEastingGeoKey (Double,1): 0
	<       ProjFalseOriginNorthingGeoKey (Double,1): 0

Any ideas on how to get GDAL to fully copy the existing settings?

Thank you.

--kyler


