From chen at yinyue123.com  Thu Apr  1 02:29:38 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OGR python FeatureDefn constructor
In-Reply-To: <5.0.2.1.2.20040331094543.00af1d38@pop3>
Message-ID: <HLENLPCAGDEHMNMNLIDJEELACBAA.chen@yinyue123.com>

Hi, pals!

With the help of Frank and other friends on this list, I finally make a program to read and modify large image.
It is called NovaViewer, can be downloaded at http://www.mapsea.com/english/novaviewer/novaviewerbeta.zip. Please follow the readme file to install and play it.
It only work on win32 platform up to now. But I think it will be possible to migrate to other platform if use wxwindows to write the GUI.

Novaviewer take advantage of GDAL to read and write the image data. Image are read by block of 512*512 at the current zoom level and cached in the memory. Its engine is a little difference to OpenEV. The latter's tiles are divided at the most low level of pyramid, so if you open a very large image it will still cost much time to load thousands of tiles.

Besides the pan and zoom function, I write a plugin in photoshop to read a xml file ".psx" which describe a cropping of large image. After photoshop read this cropping from source image, user can do any process on it and then save it to the source image. I also update the overviews of the source image when photoshop save it. So you can switch between NovaViewer and photoshop to browse and modify the image.

I had once shown GIS vector data in the novaviewer, but still have some troubles. So I decide not to include it in this version.

I am pleased to hear some suggestions from gdal list.  It still need much work to make it a good tool. 

Best regards
Fu CHEN

From schut at sarvision.com  Thu Apr  1 04:49:37 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] gdal on amd64 needs -fPIC?
In-Reply-To: <200403301727.48509.alexamici@fastwebnet.it>
References: <200403301250.17710.schut@sarvision.com> <200403301315.59461.schut@sarvision.com> <200403301727.48509.alexamici@fastwebnet.it>
Message-ID: <200404010949.37432.schut@sarvision.com>

On Tuesday 30 March 2004 15:27, Alessandro Amici wrote:
> Vincent,
>
> > > I just tried to compile gdal on my new amd64.
>
> luck you ;)
<grin>
>
> > More info:
> > both netcdf/hdf and gdal need -fPIC. I tried compiling gdal with -fPIC
> > while having hdf4 compiled without, and that didn't work out.
> > Might be that gdal when compiled without hdf4 support doesn't need -fPIC,
> > but as I need hdf4 support I didn't try that yet.
>
> do you use the standard (libtool) build or the old style one
> (--without-libtool)?
>
> in both cases it would be helpfull to have the configure command line that
> you use and a snipped of both compile and link commands.
> and the actual error message, obviously ;) !

Well I just took the effort to create a really really informative message for 
you with make outputs and configure options and stuff like that, then in the 
end the error doesn't show anymore. I did a cvs update before that. Did you 
change things in cvs regarding -fPIC? Or was it something else (which I'll 
have to find out then) that caused the error here?
Note that all this is with a HDF4 lib compiled *with* -fPIC.

Cheers,
Vincent.
>
> cheers,
> alessandro
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From chen at yinyue123.com  Thu Apr  1 02:59:53 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] NovaViewer ( a tool on top of gdal )
In-Reply-To: <HLENLPCAGDEHMNMNLIDJEELACBAA.chen@yinyue123.com>
Message-ID: <HLENLPCAGDEHMNMNLIDJEELBCBAA.chen@yinyue123.com>

Hi, pals!

With the help of Frank and other friends on this list, I finally make a program to read and modify large image.
It is called NovaViewer, can be downloaded at http://www.mapsea.com/english/novaviewer/novaviewerbeta.zip. Please follow the readme file to install and play it.
It only work on win32 platform up to now. But I think it will be possible to migrate to other platform if use wxwindows to write the GUI.

Novaviewer take advantage of GDAL to read and write the image data. Image are read by block of 512*512 at the current zoom level and cached in the memory. Its engine is a little difference to OpenEV. The latter's tiles are divided at the most low level of pyramid, so if you open a very large image it will still cost much time to load thousands of tiles.

Besides the pan and zoom function, I write a plugin in photoshop to read a xml file ".psx" which describe a cropping of large image. After photoshop read this cropping from source image, user can do any process on it and then save it to the source image. I also update the overviews of the source image when photoshop save it. So you can switch between NovaViewer and photoshop to browse and modify the image.

I had once shown GIS vector data in the novaviewer, but still have some troubles. So I decide not to include it in this version.

I am pleased to hear some suggestions from gdal list.  It still need much work to make it a good tool. 

Best regards
Fu CHEN

From sscott at gwi.net  Thu Apr  1 07:14:01 2004
From: sscott at gwi.net (Shannon Scott)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] ArcInfo Grid Read Error
Message-ID: <002801c417e2$d178f730$4dc8a8c0@sebois>

Hello,
I am new to gdal, so please forgive my ignorance.
I am trying to convert some ArcInfo Grid data to a tif.
I have been trying to use gdal_translate, but I get the following error.
 
$ gdal_translate -of GTiff dem24k_int test1.tif
Input file size is 20943, 21754
0...10..ERROR 1: Read of 1030 bytes from offset 1260810 for grid block
failed.
ERROR 1: IReadBlock failed at X offset 33, Y offset 896
ERROR 1: GetBlockRef failed at X block offset 33, Y block offset 896
 
I also tried the -not_strict optin, but got the same error.  Is there
any way to "clean" the ArcInfo Grid ( assuming it has bad data ).  Has
anyone else had this problem?
 
Any help, thoughts, or advice are greatly appreciated.
Thank you.
Shannnon
 
Fedora Core1
Gdal  1.1.9
 
The AI Grid was described using gdalinfo as follows:
$ gdalinfo dem24k_int
Driver: AIG/Arc/Info Binary Grid
Size is 20943, 21754
Coordinate System is:
PROJCS["UTM Zone 19, Northern Hemisphere",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AXIS["Lat",NORTH],
        AXIS["Long",EAST],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-69],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["METERS",1]]
Origin = (222599.658591,5350291.151122)
Pixel Size = (30.000000,-30.000000)
Corner Coordinates:
Upper Left  (  222599.659, 5350291.151) ( 72d44'12.32"W, 48d14'42.22"N)
Lower Left  (  222599.659, 4697671.151) ( 72d22'10.46"W, 42d22'54.51"N)
Upper Right (  850889.659, 5350291.151) ( 64d16'35.13"W, 48d12'31.28"N)
Lower Right (  850889.659, 4697671.151) ( 64d44'23.64"W, 42d21'7.68"N)
Center      (  536744.659, 5023981.151) ( 68d31'50.78"W, 45d22'6.17"N)
Band 1 Block=256x4 Type=Int16, ColorInterp=Undefined
  Min=0.000 Max=1601.000 
  NoData Value=-32768
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040401/1c4e81d1/attachment.html
From warmerdam at pobox.com  Thu Apr  1 09:11:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] ArcInfo Grid Read Error
In-Reply-To: <002801c417e2$d178f730$4dc8a8c0@sebois>
References: <002801c417e2$d178f730$4dc8a8c0@sebois>
Message-ID: <406C2311.3070600@pobox.com>

Shannon Scott wrote:
> Hello,
> 
> I am new to gdal, so please forgive my ignorance.
> 
> I am trying to convert some ArcInfo Grid data to a tif.
> 
> I have been trying to use gdal_translate, but I get the following error.
> 
>  
> 
> $ gdal_translate -of GTiff dem24k_int test1.tif
> 
> Input file size is 20943, 21754
> 
> 0...10..ERROR 1: Read of 1030 bytes from offset 1260810 for grid block 
> failed.
> 
> ERROR 1: IReadBlock failed at X offset 33, Y offset 896
> 
> ERROR 1: GetBlockRef failed at X block offset 33, Y block offset 896
> 
>  
> 
> I also tried the ?not_strict optin, but got the same error.  Is there 
> any way to ?clean? the ArcInfo Grid ( assuming it has bad data ).  Has 
> anyone else had this problem?

Shannon,

I imagine the file is truncated from the proper length for some reason.
I don't know of a way to get the available data out with gdal_translate.
Of course, you could write your own little utility that reads the source
file block by block, and that ignores errors and continues.  Is the
grid main image file really only 1260810 bytes long or so?  It seems like
most of your data is already gone.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sylvain_duclos at yahoo.com  Thu Apr  1 09:40:19 2004
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:07 2007
Subject: SQLite: Me Too :) (was: Re: [Gdal-dev] Re: OGR C API question)
In-Reply-To: <406AD352.4030500@dmsolutions.ca>
Message-ID: <20040401144019.66543.qmail@web12505.mail.yahoo.com>

Hi,

Like Frank and Daniel said .. keep us posted!

I juste (re)looked at SQLite and it sound like
an interesting alternative to postgress which
is a bit heavy for certain problem.

For exemple Voronoi/Delaunay to find areas adjacent
to a certain area might be better done via SQLite.
(That's from the top of my head:)

Also the GPS/PDA/OGR combination catch the imagination
:)


Cheers

Sylvain.


--- Daniel Morissette <dmorissette@dmsolutions.ca>
wrote:
> Frank Warmerdam wrote:
> > 
> >> I'll look into that. By the way, I'm developing a
> GPS mapping app for 
> >> Qt/Embedded (on an HP iPAQ running Familiar
> Linux). I've got to get a 
> >> few basic features done in the next three weeks
> (it's for an 
> >> undergraduate engineering design project, which
> is due (too) soon) but 
> >> after that, I'm going to release it under the
> GPL. I plan to add 
> >> sqlite support to OGR, as Postgres is not really
> intented for embedded 
> >> use. It won't be ready anytime soon, but
> eventually I'd like to 
> >> contribute these improvements back to the OGR cvs
> tree.
> > 
> > 
> > Cool.  I looked at sqlite a couple years ago and
> it looked nice, though 
> > it had
> > (has?) no spatial support.
> > 
> 
> I actually saw a presentation on SQLite last week at
> the PHP Conference 
> in Montreal and was quite impressed. My first
> reaction was that we 
> should add support for it in OGR and could then use
> it to create simple 
> point (x,y) data sources.  SQLite offers the power
> of a RDBMS (with some 
> known limitations) for fast SQL queries in a
> flatfile format, and it 
> runs as well on Unix/Linux as on Windows so it's
> easy to deploy and port 
> apps from one system to another... that could be the
> solution to many of 
> the problems we have run into in the past storing
> and querying point and 
> attribute data in other file formats for webmapping
> for instance.
> 
> Anyway, please keep us posted on your progress with
> the SQLite driver, I 
> think it will be very welcome.
> 
> Daniel
> -- 
>
------------------------------------------------------------
>   Daniel Morissette              
> dmorissette@dmsolutions.ca
>   DM Solutions Group             
> http://www.dmsolutions.ca/
>
------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________
Do you Yahoo!?
Yahoo! Small Business $15K Web Design Giveaway 
http://promotions.yahoo.com/design_giveaway/

From ar at navpoch.com  Thu Apr  1 10:17:26 2004
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDALView for Windows
References: <HLENLPCAGDEHMNMNLIDJEELBCBAA.chen@yinyue123.com>
Message-ID: <02db01c417fc$713e9220$0201a8c0@Alain>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: GDALView.zip
Type: application/octet-stream
Size: 105744 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040401/a9e911d8/GDALView.obj
From sscott at gwi.net  Thu Apr  1 10:30:52 2004
From: sscott at gwi.net (Shannon Scott)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] ArcInfo Grid Read Error
In-Reply-To: <406C2311.3070600@pobox.com>
Message-ID: <000401c417fe$5177e340$4dc8a8c0@sebois>

Thank you Frank.
I recopied everything from the cd again... and it works now.
Sorry to bother you kind folks.
Take Care
Shannon


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 01, 2004 9:11 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] ArcInfo Grid Read Error

Shannon Scott wrote:
> Hello,
> 
> I am new to gdal, so please forgive my ignorance.
> 
> I am trying to convert some ArcInfo Grid data to a tif.
> 
> I have been trying to use gdal_translate, but I get the following
error.
> 
>  
> 
> $ gdal_translate -of GTiff dem24k_int test1.tif
> 
> Input file size is 20943, 21754
> 
> 0...10..ERROR 1: Read of 1030 bytes from offset 1260810 for grid block

> failed.
> 
> ERROR 1: IReadBlock failed at X offset 33, Y offset 896
> 
> ERROR 1: GetBlockRef failed at X block offset 33, Y block offset 896
> 
>  
> 
> I also tried the -not_strict optin, but got the same error.  Is there 
> any way to "clean" the ArcInfo Grid ( assuming it has bad data ).  Has

> anyone else had this problem?

Shannon,

I imagine the file is truncated from the proper length for some reason.
I don't know of a way to get the available data out with gdal_translate.
Of course, you could write your own little utility that reads the source
file block by block, and that ignores errors and continues.  Is the
grid main image file really only 1260810 bytes long or so?  It seems
like
most of your data is already gone.

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From cpurvis at asg.sc.edu  Thu Apr  1 10:47:33 2004
From: cpurvis at asg.sc.edu (Charlton Purvis)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] FW: [develop] news
Message-ID: <AE6FF3A533861C41A6571F1D7DDF6F6191906E@asgnet2.asg.sc.edu>



From etdube at globetrotter.net  Thu Apr  1 14:24:42 2004
From: etdube at globetrotter.net (Etienne Dube)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OGR and SQLite
In-Reply-To: <406AE440.6010500@pobox.com>
References: <20040322142126.GN16740@thuille.itc.it> <406AE033.30508@dmsolutions.ca> <406AE440.6010500@pobox.com>
Message-ID: <200404011424.42199.etdube@globetrotter.net>

Hello, Frank

Yes that was my point. I'm thinking about implementing SQLite support in OGR, 
for my embedded GPS mapping app, because Postgres feels a little bit cramped 
on my tiny iPAQ. If you're interested, take a look at that:

http://pfe.fouata.com/pics/voisinage_01avr04.png
http://pfe.fouata.com/pics/ile_montreal_01avr04.png

Yup, it's pulling data via OGR from a PostgreSQL database. I'm also using the 
OGRCoordinateTransformation class to reproject the data from geographic to 
cartesian (UTM) coordinates. The GUI is still a little bit crude, but it'll 
get better soon enough :) . I'll probably build a desktop version, using Qt 
instead of Qt/Embedded (should be an easy port to do) when my semester is 
over (along with my B. Eng. degree... Yes preciousssss iron ring, soon we 
ssshall be done with all theeesse vile lab assssignments. )

Etienne

On Wednesday 31 March 2004 10:31, Frank Warmerdam wrote:
> Daniel Morissette wrote:
> > Oh... I wasn't suggesting that you would be doing it.  This comment was
> > in reply to Etienne who suggested that he may implement a SQLite driver:
> >
> > Etienne Dube wrote:
> >> I plan to add sqlite support to OGR, as Postgres is not really
> >> intented for embedded use. It won't be ready anytime soon, but
> >> eventually I'd like to contribute these improvements back to the OGR
> >> cvs tree.
> >
> > Sorry for the confusion
>
> Daniel / Etienne,
>
> Ahh yes, sorry about that.  I have a simple way of dealing with all the
> information that pours into my head from email.  I just forget most of it
> in a minute or two.  I had already forgotten that Etienne was thinking
> about implementing it.
>
> Best regards,

From list67 at netscape.net  Thu Apr  1 14:49:09 2004
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] img format resizing
Message-ID: <23AFD0B6.40653E9F.00066B75@netscape.net>

Hello.

I have a possible bug to report.

I have a .img file.  When I run:
gdalwarp -rb -of HFA -ot Byte -wm 512 -ts 1487 2899 ./beforeResize.img ./afterResize.img
the afterResize.img file is upside down.  Does anyone know if there is something about the above command that should be changed?

I'm using a cvs version of gdal that was updated today.  The beforeResize.img file is about 4.5 MB when gzipped.

Also, the reason I'm using the .img format is that I have a program that needs to be able to work with large image files (36GB is the max size so far).  The geotiff format has the file size limit.  The .img format seems to get unexpectedly large when making modifications to the file.  I don't have any test results to back this up.  Can anyone recommend one of the other image formats that are suitable for large images files?

Thank you for your time.

    Mike

__________________________________________________________________
Introducing the New Netscape Internet Service. 
Only $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need. 

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From warmerdam at pobox.com  Thu Apr  1 15:10:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] img format resizing
In-Reply-To: <23AFD0B6.40653E9F.00066B75@netscape.net>
References: <23AFD0B6.40653E9F.00066B75@netscape.net>
Message-ID: <406C7724.20607@pobox.com>

list67@netscape.net wrote:
> Hello.
> 
> I have a possible bug to report.
> 
> I have a .img file.  When I run:
> gdalwarp -rb -of HFA -ot Byte -wm 512 -ts 1487 2899 ./beforeResize.img ./afterResize.img
> the afterResize.img file is upside down.  Does anyone know if there is 
 > something about the above command that should be changed?

Mike,

My guess is that your image has no georeferencing so the source
image coordinate system "y" is increasing as you move from the top
to the bottom, as opposed to the "y" decreasing from top to bottom
as would occur in common projected or geographic coordinate systems.

The warper will generally get ungeoreferenced images upside down I expect,
though I haven't tried this myself.

....

Hmm, I just tried it, and gdalwarp seems to error out if the is
no georeferencing (which is good).

Could you provide a gdalinfo report on the input file?

> I'm using a cvs version of gdal that was updated today.  The 
 > beforeResize.img file is about 4.5 MB when gzipped.
> 
> Also, the reason I'm using the .img format is that I have a program 
 > that needs to be able to work with large image files (36GB is the max size
 > so far).  The geotiff format has the file size limit.  The .img format seems
 > to get unexpectedly large when making modifications to the file.  I don't
 > have any test results to back this up.  Can anyone recommend one of the
 > other image formats that are suitable for large images files?

What exactly do you mean by "making modifications to the file"?  Are you
dynamically re-write image data after the creation pass?  While this should
- in theory - work, it isn't a path that is well tested.  There might well
be a bug.  Please provide some more detail on what you are doing and what
is going wrong and I might be able to figure out whats happening.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roger at pocketterra.com  Fri Apr  2 11:45:54 2004
From: roger at pocketterra.com (Roger Bedell)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] British National Grid to UTM
Message-ID: <SYLVANSERVERpM2yqOX000001b5@sylvanserver>

I am not familiar with the British National Grid, but I was asked to convert
some Ordnance Survey data to UTM.

 

From warmerdam at pobox.com  Fri Apr  2 13:09:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL General Command Line Processor
Message-ID: <406DAC46.7000807@pobox.com>

Folks,

Some GDAL commandlines (especially creation ones with lots of "-co" creation
options) can get pretty long and complex, so Matt Wilke suggested a
mechanism be added to read options from a file.

I decided I wanted this ability to work in all utilities if it was going
to work in any.  But if I was going to bundle up some special commandline
options in the library, I decided this would be a good time to give a number
of utilities some general GDAL commandline options.  The result is the
GDALGeneralCmdLineProcessor() function which implements the following options:

    --version: report version of GDAL in use.
    --formats: report all format drivers configured.
    --format [format]: report details of one format driver.
    --optfile filename: expand an option file into the argument list.
    --config key value: set system configuration option.
    --debug [on/off/value]: set debug level.
    --help-general: report detailed help on general options.

I have created a Python wrapper (gdal.GeneralCmdLineProcessor()) and updated
all the GDAL C/C++ and Python utilities to use the new function.

The --optfile option basically reads the file referred to, tokenizes it and
shoves the tokens into the argument list in the place of the --optfile
option.

The --formats is the usual list of formats, but the --format option allows
a query of detailed information available about a format.  For a complex
format like GeoTIFF the result looks like this:

warmerda@gdal2200[145]% gdalinfo --format gtiff
Format Details:
   Short Name: GTiff
   Long Name: GeoTIFF
   Extension: tif
   Mime Type: image/tiff
   Help Topic: frmt_gtiff.html
   Supports: Create() - Create writeable dataset.
   Supports: CreateCopy() - Create dataset by copying another.
   Creation Datatypes: Byte UInt16 Int16 UInt32 Int32 Float32 Float64 CInt16 CInt32 CFloat32 CFloat64

<CreationOptionList>
   <Option name="COMPRESS" type="string-select">
     <Value>NONE</Value>
     <Value>PACKBITS</Value>
     <Value>JPEG</Value>
     <Value>LZW</Value>
     <Value>DEFLATE</Value>
   </Option>
   <Option name="INTERLEAVE" type="string-select">
     <Value>BAND</Value>
     <Value>PIXEL</Value>
   </Option>
   <Option name="TILED" type="boolean" description="Switch to tiled format"/>
   <Option name="TFW" type="boolean" description="Write out world file"/>
   <Option name="BLOCKXSIZE" type="int" description="Tile Width"/>
   <Option name="BLOCKYSIZE" type="int" description="Tile/Strip Height"/>
   <Option name="PHOTOMETRIC" type="string-select">
     <Value>MINISBLACK</Value>
     <Value>MINISWHITE</Value>
     <Value>RGB</Value>
     <Value>CMYK</Value>
     <Value>YCBCR</Value>
     <Value>CIELAB</Value>
     <Value>ICCLAB</Value>
     <Value>ITULAB</Value>
   </Option>
</CreationOptionList>

This should be useful as a quick way of checking outs some details
about a format, though the detailed writeup is still in the html file.

The --config allows settings various GDAL configuration options on the
commandline.  This calls CPLSetConfigOption() internally, which can
affect a variety of things that might normally be defined as environment
variables, such as GDAL_DATA, and GDAL_CACHEMAX.

The --debug can be used to turn debug information on and off for a given
run.  eg.  gdalinfo --debug on utm.tif
       or   gdalinfo --debug off utm.tif

Anyone wanting to add this consistent commandline option support to their
own programs should read up on the GDALGeneralCmdLineProcessor() function.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Apr  2 13:11:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] British National Grid to UTM
In-Reply-To: <SYLVANSERVERpM2yqOX000001b5@sylvanserver>
References: <SYLVANSERVERpM2yqOX000001b5@sylvanserver>
Message-ID: <406DACCF.6000605@pobox.com>

Roger Bedell wrote:
> ERROR 1: Translating source or target SRS failed:
> 
> 'EPSG:27700'

Roger,

I think the problem is that DOS does not strip off the single quotes.  Try:

   gdalwarp -s_srs EPSG:27700 -t_srs EPSG:32629 ss78.tif ss78utm.tif

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roger at pocketterra.com  Fri Apr  2 13:55:53 2004
From: roger at pocketterra.com (Roger Bedell)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] British National Grid to UTM
In-Reply-To: <406DACCF.6000605@pobox.com>
Message-ID: <SYLVANSERVERC0AHmKq000001b6@sylvanserver>

Hi Frank,
Well, it kind of works now, but here is the GDALINFO on the resulting TIF:

C:\openev_fw\bin>gdalwarp -s_srs EPSG:27700 -t_srs EPSG:32629 ss78.tif
ss78utm.tif
:0...10...20...30...40...50...60...70...80...90...100 - done.

C:\openev_fw\bin>gdalinfo ss78utm.tif
Driver: GTiff/GeoTIFF
Size is 4000, 4000
Coordinate System is `'
Origin = (269998.750000,190001.250000)
Pixel Size = (2.50000000,-2.50000000)
Corner Coordinates:
Upper Left  (  269998.750,  190001.250)
Lower Left  (  269998.750,  180001.250)
Upper Right (  279998.750,  190001.250)
Lower Right (  279998.750,  180001.250)
Center      (  274998.750,  185001.250)

This is identical to the original SS78.TIF with the TFW. No warping seems to
have been done.

Did I still do something wrong in the command line, or should I start
digging into the source? 

I am using the most recent OpenEV distribution.

Roger


From list67 at netscape.net  Fri Apr  2 14:08:52 2004
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] img format resizing
Message-ID: <6F3E64E8.0FE0D0B2.00066B75@netscape.net>

Frank Warmerdam <warmerdam@pobox.com> wrote:

>list67@netscape.net wrote:
>> Hello.
>> 
>> I have a possible bug to report.
>> 
>> I have a .img file. ?When I run:
>> gdalwarp -rb -of HFA -ot Byte -wm 512 -ts 1487 2899 ./beforeResize.img ./afterResize.img
>> the afterResize.img file is upside down. ?Does anyone know if there is 
> > something about the above command that should be changed?
>
>Mike,
>
>My guess is that your image has no georeferencing so the source
>image coordinate system "y" is increasing as you move from the top
>to the bottom, as opposed to the "y" decreasing from top to bottom
>as would occur in common projected or geographic coordinate systems.
>
>The warper will generally get ungeoreferenced images upside down I expect,
>though I haven't tried this myself.
>
>....
>
>Hmm, I just tried it, and gdalwarp seems to error out if the is
>no georeferencing (which is good).
>
>Could you provide a gdalinfo report on the input file?

Frank,

Here are the gdalinfo reports for the before and after resizing img files:

gdalinfo ./beforeResize.img 
Driver: HFA/Erdas Imagine Images (.img)
Size is 1487, 2900
Coordinate System is:
LOCAL_CS["Unknown",
    UNIT["meters",1]]
Origin = (0.000000,0.000000)
Pixel Size = (0.00010000,0.00010000)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) 
Lower Left  (   0.0000000,   0.2900000) 
Upper Right (   0.1487000,   0.0000000) 
Lower Right (   0.1487000,   0.2900000) 
Center      (   0.0743500,   0.1450000) 
Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 4 Block=64x64 Type=Byte, ColorInterp=Undefined



gdalinfo ./afterResize.img 
Driver: HFA/Erdas Imagine Images (.img)
Size is 1487, 2899
Coordinate System is:
LOCAL_CS["Unknown",
    UNIT["meters",1]]
Origin = (0.000000,0.290000)
Pixel Size = (0.00010000,-0.00010003)
Corner Coordinates:
Upper Left  (   0.0000000,   0.2900000) 
Lower Left  (   0.0000000,   0.0000000) 
Upper Right (   0.1487000,   0.2900000) 
Lower Right (   0.1487000,   0.0000000) 
Center      (   0.0743500,   0.1450000) 
Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
Band 4 Block=64x64 Type=Byte, ColorInterp=Undefined

Do you know of anything I can do to prevent the upside downness?

>> I'm using a cvs version of gdal that was updated today. ?The 
> > beforeResize.img file is about 4.5 MB when gzipped.
>> 
>> Also, the reason I'm using the .img format is that I have a program 
> > that needs to be able to work with large image files (36GB is the max size
> > so far). ?The geotiff format has the file size limit. ?The .img format seems
> > to get unexpectedly large when making modifications to the file. ?I don't
> > have any test results to back this up. ?Can anyone recommend one of the
> > other image formats that are suitable for large images files?
>
>What exactly do you mean by "making modifications to the file"? ?Are you
>dynamically re-write image data after the creation pass? ?While this should
>- in theory - work, it isn't a path that is well tested. ?There might well
>be a bug. ?Please provide some more detail on what you are doing and what
>is going wrong and I might be able to figure out whats happening.

An approximately 36GB img file was reprojected with gdalwarp from something like the following coordinate system:

  <SRS>PROJCS[&quot;unnamed&quot;,GEOGCS[&quot;NAD83&quot;,DATUM[&quot;North_American_Datum_1983&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.2572221010042,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6269&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4269&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;unknown&quot;,1],AUTHORITY[&quot;EPSG&quot;,&quot;26911&quot;]]</SRS>

using something like -t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84".  After this reprojection I think (I had to delete the file to free up space) that the new .img file was approximately 60 GB.  Maybe I just wasn't expecting there to be such a difference in file size.  After reprojecting, a program added a alpha layer to the .img file.  This made the file approximately 90GB.  That increase in file size was expected.  And finally there was a resize which resulted in a 122 GB .img file.  So I guess that it was just the size after reprojection that I wasn't expecting.

Thanks for your help.

    Mike

>Best regards,
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>

__________________________________________________________________
Introducing the New Netscape Internet Service. 
Only $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need. 

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From warmerdam at pobox.com  Fri Apr  2 14:32:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] British National Grid to UTM
In-Reply-To: <SYLVANSERVERC0AHmKq000001b6@sylvanserver>
References: <SYLVANSERVERC0AHmKq000001b6@sylvanserver>
Message-ID: <406DBFDF.6030804@pobox.com>

Roger Bedell wrote:
> Hi Frank,
> Well, it kind of works now, but here is the GDALINFO on the resulting TIF:
> 
> C:\openev_fw\bin>gdalwarp -s_srs EPSG:27700 -t_srs EPSG:32629 ss78.tif
> ss78utm.tif
...

> This is identical to the original SS78.TIF with the TFW. No warping seems to
> have been done.

Roger,

I believe the problem now is that gdalwarp doesn't know how to convert between
the OSGB 1936 datum and WGS84 so it just decides there is no reprojection
path and does essentially nothing. The lack of some sort of error report for
this is quite unfortunate, and something I will want to work on.

If you are willing to ignore datum shift effects you could apply the following
transformation:

gdalwarp -s_srs "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000
                  +y_0=-100000 +ellps=airy +units=m +towgs84=0,0,0 +no_defs"
          -t_srs "EPSG:32629" ss78.tif ss78utm.tif

Or if you know an appropriate shift to convert to WGS84 you could supply
it in the +towgs84 option.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Apr  2 14:37:26 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
Message-ID: <406DC0F6.8080706@pobox.com>

Folks,

I have upgraded the gdal_utilities document to talk about the generic
command line options, and some general information on how format selection,
creation options and coordinate systems work with the GDAL commandline
utilities.

Ideally, along with the Supported Formats set of documents I would like
the gdal_utilities document to be enough for new users to get going with
the GDAL commandline utilities.  Feedback is welcome.

   http://www.remotesensing.org/gdal/gdal_utilities.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From val at GRI.MsState.Edu  Fri Apr  2 14:45:32 2004
From: val at GRI.MsState.Edu (Valentine Anantharaj)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] MATLAB Mex Interface(s) to GDAL?
Message-ID: <406DC2DC.3060005@GRI.MsState.Edu>

Greetings!

Are there any MATLAB Mex interface(s) to the GDAL library and 
functionalities?  I noticed one other post in the past that referred to 
this possibility; but there was no contact email.

Thanks.

Regards,

Valentine Anantharaj




From warmerdam at pobox.com  Fri Apr  2 14:50:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] img format resizing
In-Reply-To: <6F3E64E8.0FE0D0B2.00066B75@netscape.net>
References: <6F3E64E8.0FE0D0B2.00066B75@netscape.net>
Message-ID: <406DC40B.9000606@pobox.com>

list67@netscape.net wrote:
> Frank,
> 
> Here are the gdalinfo reports for the before and after resizing img files:
> 
> gdalinfo ./beforeResize.img 
> Driver: HFA/Erdas Imagine Images (.img)
> Size is 1487, 2900
> Coordinate System is:
> LOCAL_CS["Unknown",
>     UNIT["meters",1]]
> Origin = (0.000000,0.000000)
> Pixel Size = (0.00010000,0.00010000)
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000) 
> Lower Left  (   0.0000000,   0.2900000) 
> Upper Right (   0.1487000,   0.0000000) 
> Lower Right (   0.1487000,   0.2900000) 
> Center      (   0.0743500,   0.1450000) 
> Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
> Band 2 Block=64x64 Type=Byte, ColorInterp=Undefined
> Band 3 Block=64x64 Type=Byte, ColorInterp=Undefined
> Band 4 Block=64x64 Type=Byte, ColorInterp=Undefined

Mike,

This coordinate system is indeed "upside down" to what GDAL expects.
One slightly clumsy approach to working around this is to create a
virtual file for your dataset and edit the geotransform in that.

eg.

gdal_translate -of VRT beforeResize.img beforeResize.vrt

... edit beforeResize.vrt changing the sign of the 5th # of the
     <GeoTransform> to be negative

gdalwarp beforeResize.vrt ...

Basically, gdalwarp is not setup to work with inputs in what it
considers upside coordinate systems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jhart at frw.uva.nl  Sat Apr  3 03:12:02 2004
From: jhart at frw.uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
In-Reply-To: <406DC0F6.8080706@pobox.com>
References: <406DC0F6.8080706@pobox.com>
Message-ID: <406E71D2.9050603@frw.uva.nl>

Frank Warmerdam wrote:
> Folks,
> 
> I have upgraded the gdal_utilities document to talk about the generic
> command line options, and some general information on how format selection,
> creation options and coordinate systems work with the GDAL commandline
> utilities.
> 
> Ideally, along with the Supported Formats set of documents I would like
> the gdal_utilities document to be enough for new users to get going with
> the GDAL commandline utilities.  Feedback is welcome.
> 
>   http://www.remotesensing.org/gdal/gdal_utilities.html
> 

Perhaps I missed it in the documentation, but is it possible to 
georeference a raw image to an EPSG coordinate system, based on a text 
file with control points?

Jan

From warmerdam at pobox.com  Fri Apr  2 15:32:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
In-Reply-To: <406E71D2.9050603@frw.uva.nl>
References: <406DC0F6.8080706@pobox.com> <406E71D2.9050603@frw.uva.nl>
Message-ID: <406DCDD9.1060909@pobox.com>

Jan Hartmann wrote:
> Perhaps I missed it in the documentation, but is it possible to 
> georeference a raw image to an EPSG coordinate system, based on a text 
> file with control points?

Jan,

The gdal_translate command does have the -gcp commandline switch for
adding GCPs to an image during translation.  Several of these, along with
the -a_srs switch should be sufficient to georeference an image using
GCPs.  Using the --optfile switch you could actually move the GCPs off to
a text file, but the format would still have to be the same.

eg.

gdal_translate -gcp 0 0 -33 44 -gcp 1000 1000 -32 43 -gcp 1000 0 -32 44 \
                -a_srs NAD83 raw.tif geo.tif

Wow, I tested it and it works!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Fri Apr  2 15:36:31 2004
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] MATLAB Mex Interface(s) to GDAL?
In-Reply-To: <406DC2DC.3060005@GRI.MsState.Edu>
References: <406DC2DC.3060005@GRI.MsState.Edu>
Message-ID: <1080938191.406dcecf66c8f@wmail.ualg.pt>

Quoting Valentine Anantharaj <val@GRI.MsState.Edu>:

> Greetings!
> 
> Are there any MATLAB Mex interface(s) to the GDAL library and
> functionalities?  I noticed one other post in the past that referred to
> this possibility; but there was no contact email.

Valentine
You probably refer to one post of mine. Indeed I wrote a kind of gdalread mex 
file. I say a "kind" because it doesn't read all the supported gdal formats.
I decided to leave out image formats that are potentially very large. If you 
know Matlab and it's voracity for RAM you'll understand why I did it.

This mex is used in a project of mine called Mirone and is distributed with it.
Mirone (BTW, it also fits on the recent category of gdal viewers) is available 
at:
w3.ualg.pt/~jluis/mirone
At this moment (I'm writing from home) I am not sure if the distribution already 
includes the gdalread_m.c (the mex) source code, but it does include the 
gdalread_m.dll mex file (it is on Mirone's root directory).

My email contact is:
jluis@ualg.pt
Tell me if the source code is not included and you want it.

Joaquim Luis

From bclay at ball.com  Fri Apr  2 15:50:39 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C8F3@APPMSG2.AERO.BALL.COM>

Related yet totally different question.  
  Has anyone tried to extract and georeference the image out of any of
the online versions of FAA flight sectional charts.  That is to strip
the border and warp if necessary.

What would be the correct sequence of events?  I don't know Python So I
would prefer a non-python method if possible.

Bruce

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Jan Hartmann
Sent: Saturday, April 03, 2004 3:12 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GDAL Utilities Documentation


Frank Warmerdam wrote:
> Folks,
> 
> I have upgraded the gdal_utilities document to talk about the generic 
> command line options, and some general information on how format 
> selection, creation options and coordinate systems work with the GDAL 
> commandline utilities.
> 
> Ideally, along with the Supported Formats set of documents I would 
> like the gdal_utilities document to be enough for new users to get 
> going with the GDAL commandline utilities.  Feedback is welcome.
> 
>   http://www.remotesensing.org/gdal/gdal_utilities.html
> 

Perhaps I missed it in the documentation, but is it possible to 
georeference a raw image to an EPSG coordinate system, based on a text 
file with control points?

Jan
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From dmorissette at dmsolutions.ca  Fri Apr  2 15:53:52 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL General Command Line Processor
In-Reply-To: <406DAC46.7000807@pobox.com>
References: <406DAC46.7000807@pobox.com>
Message-ID: <406DD2E0.2020506@dmsolutions.ca>

Frank Warmerdam wrote:
>    --help-general: report detailed help on general options.
> 

Do the commands also support a "--help" option?  Most commands on Linux 
have a --help option, so when I need help that's always what I try first.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From matt.wilkie at gov.yk.ca  Fri Apr  2 17:09:28 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL General Command Line Processor
In-Reply-To: <406DAC46.7000807@pobox.com>
References: <406DAC46.7000807@pobox.com>
Message-ID: <406DE498.2010706@gov.yk.ca>

> Some GDAL commandlines (especially creation ones with lots of "-co" 
> creation options) can get pretty long and complex, so Matt Wilke
> suggested a mechanism be added to read options from a file.

Awesome Frank! I'm glad you found some worth in my suggestion and 
implemented it. I'm looking forward to testing it out.

cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From matt.wilkie at gov.yk.ca  Fri Apr  2 17:10:24 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
In-Reply-To: <406DCDD9.1060909@pobox.com>
References: <406DCDD9.1060909@pobox.com>
Message-ID: <406DE4D0.7030301@gov.yk.ca>

http://www.remotesensing.org/gdal/gdal_utilities.html

A few docco correcttions/enhancements. Additions or changes are 
[[demarked like this]].


Typos and Clarifications
------------------------

#  gdal-config - Get options required to build software using GDAL[[,]] 
against GDAL.

#Creating New Files > -a_srs: the EPSG bullet paragraph is repeated


#General Command Line Switchces

  --optfile file:

Not sure where in the document this should go, but it would nice if 
there were an example showing it's use, e.g.:

[[
gdal_translate -optfile tiff-opt.txt utm.tif utm_comp_tiled.tif

contents of tiff-opt.txt:
	-of gtiff
	-co TILED=YES
	-co COMPRESS=PACKBITS
	-co TFW=YES
	-a_srs '+proj=UTM +zone=11 datum=nad83'

is the same as:

gdal_translate -of gtiff -co TILED=YES -co COMPRESS=PACKBITS \
-co TFW=YES utm.tif -a_srs '+proj=UTM +zone=11 datum=nad83' \
utm_comp_tiled.tif
]]


gdal_info:
   o. Raster size (in pixel[[s]] and lines).

gdal_translate:
  -srcwin xoff yoff xsize ysize:
     Selects a subwindow from the source image for copying. [[Corners 
given in pixel coordinates.]]

gdal_warp:
  -wo "NAME=VALUE":
     Set a [[lot]] of warp options....




Suggested Changes
-----------------

--help-general:

Why be so specific? Better to use '--help' for general help. This is how 
most linux utilities seem to work.


--format format-name

Might make more sense to use '--help format-name' instead.


gdal_warp:
  -rn, -rb, -rc, -rcs:

Better to harmonize with with gdaladdo -r {nearest,average,...}




matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From warmerdam at pobox.com  Fri Apr  2 17:15:36 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL General Command Line Processor
In-Reply-To: <406DD2E0.2020506@dmsolutions.ca>
References: <406DAC46.7000807@pobox.com> <406DD2E0.2020506@dmsolutions.ca>
Message-ID: <406DE608.8020609@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
> 
>>    --help-general: report detailed help on general options.
>>
> 
> Do the commands also support a "--help" option?  Most commands on Linux 
> have a --help option, so when I need help that's always what I try first.

Daniel,

Conveniently the GDAL commands generally dump their usage message if
any unrecognised commandline option is given.  So you can think of GDAL
utilities as supporting many help variations including "-h", "-?", "-help",
"--help", or even "--please-print-out-the-usage-message-for-me----thanks".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Apr  2 17:58:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] GDAL Utilities Documentation
In-Reply-To: <406DE4D0.7030301@gov.yk.ca>
References: <406DCDD9.1060909@pobox.com> <406DE4D0.7030301@gov.yk.ca>
Message-ID: <406DF024.2020901@pobox.com>

Matt Wilkie wrote:

> #  gdal-config - Get options required to build software using GDAL[[,]] 
> against GDAL.

Fixed.


> #Creating New Files > -a_srs: the EPSG bullet paragraph is repeated

Fixed.

> #General Command Line Switchces
> 
>  --optfile file:
> 
> Not sure where in the document this should go, but it would nice if 
> there were an example showing it's use, e.g.:

--optfile is described amoung the general options, but without an
example.  In my (not so humble) opinion the example would bulk things
up distractingly at this point in the document.


> gdal_info:
>   o. Raster size (in pixel[[s]] and lines).

Fixed.

> gdal_translate:
>  -srcwin xoff yoff xsize ysize:
>     Selects a subwindow from the source image for copying. [[Corners 
> given in pixel coordinates.]]

Fixed.

> gdal_warp:
>  -wo "NAME=VALUE":
>     Set a [[lot]] of warp options....

Fixed

> Suggested Changes
> -----------------
> 
> --help-general:
> 
> Why be so specific? Better to use '--help' for general help. This is how 
> most linux utilities seem to work.


This only reports help on the "general" options, the options shared amoung
all programs.  The --help is intended to return the generic usage message
for the program.

> --format format-name
> 
> Might make more sense to use '--help format-name' instead.

I would prefer not to.

> gdal_warp:
>  -rn, -rb, -rc, -rcs:
> 
> Better to harmonize with with gdaladdo -r {nearest,average,...}

Unfortunately, I don't have the anything like the same set of options so
they aren't likely to ever be too similar.  I could change them to use
a more consistent approach but it would add little value for the disruption
at this point.

Thanks for the feedback!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jpl at xiphos.ca  Sat Apr  3 13:59:27 2004
From: jpl at xiphos.ca (Joshua Lamorie)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Digital Elevation to Vector Conversion
Message-ID: <002701c419ad$cab1c0e0$6f01a8c0@xiphos.ca>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 14233 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040403/3153326f/attachment.jpe
From warmerdam at pobox.com  Sat Apr  3 19:18:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Digital Elevation to Vector Conversion
In-Reply-To: <002701c419ad$cab1c0e0$6f01a8c0@xiphos.ca>
References: <002701c419ad$cab1c0e0$6f01a8c0@xiphos.ca>
Message-ID: <406F545B.3040100@pobox.com>

Joshua Lamorie wrote:
> Gidday there,
>  
>     I have an application that requires elevation data in some form of 
> vector format.  I'm not a GIS guy, so please excuse my use of 
> vocabulary.  I need a vector form of 'iso-elevations', similar to what 
> appears on topographic maps.
>  
>     I currently have DTED and DEM data for the target areas, but I would 
> like to get the same data in a vector format.  Is it easy to convert?  
> I've started sketching out some routines for this, but my net search 
> didn't really bring up much.  It seems I might be able to buy some 
> software that will do it, but I really would like source, or an API.
>  
>     I've written my own DTED library, but I might switch to GDAL if my 
> evaluations work out (since I don't want to write my own DEM library).
>  
>     Any advice to a neophyte?

Joshua,

The gdal_contour utility program (available in GDAL 1.2.0) should do a good
job of generating elevation contour lines (iso-elevations) from a single
elevation file in any GDAL supported raster format (including DTED, USGS DEM,
and several more).  The downside to the gdal_contour program is that it
produces very dense contours.  Basically, there will be a line segment on the
contour for each elevation "pixel" crossed.

If you find you really need the contours "generalized" (reduce the number of
vertices along the contour but preserving most of the information content)
then you will need some additional utility.  I don't have anything that does
that.  A number of "mainline" GIS packages may have good capabilities for
generalizing while avoiding any crossing or touching of the generalized
contour lines.  However, this is not a trivial task.  So if it is critical for
the generalized contours to be non-intersecting you would want to ask very
carefully about the capability of any software you purchase.

If you don't require generialization of the contours, or if isn't critical
that they be non-intersecting in all cases then you could just use the GDAL
utility, and do any required generalization via a number of simple common
methods - even just dropping some percentage of points along the contour.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rich at BAL4.com  Thu Apr  1 22:56:25 2004
From: rich at BAL4.com (Rich Balfour)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Supported formats in GDAL APPS
Message-ID: <000901c41866$784cdad0$5aa8a8c0@D8Y2C611>

I built GDAL from source, changing the make options to include my ECW SDK
and Kakadu Jpeg2000 libraries.  But trying to run either gdalinfo or
gdaltranslate, it reports that these formats are not supported.  Did I miss
something required to enable these formats, other than the gdal build
procedures (which sucessfully linked in the ECW and Kakadu libraries)???

Rich Balfour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040401/c48f67a9/attachment.html
From warmerdam at pobox.com  Sat Apr  3 19:51:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Supported formats in GDAL APPS
In-Reply-To: <000901c41866$784cdad0$5aa8a8c0@D8Y2C611>
References: <000901c41866$784cdad0$5aa8a8c0@D8Y2C611>
Message-ID: <406F5C2B.9020105@pobox.com>

Rich Balfour wrote:

> I built GDAL from source, changing the make options to include my ECW 
> SDK and Kakadu Jpeg2000 libraries.  But trying to run either gdalinfo or 
> gdaltranslate, it reports that these formats are not supported.  Did I 
> miss something required to enable these formats, other than the gdal 
> build procedures (which sucessfully linked in the ECW and Kakadu 
> libraries)???

Rich,

Did you already have a GDAL build which you then "fixed up" to include
JPEG2000 and ECW?  If so, you may need to do a "make clean" and then "make"
at the root.  The key thing is to force gdal/frmts/gdalallregister.cpp to
be recompiled so the new registration entry points will be called properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sun Apr  4 13:12:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Problems with building GDAL on solaris
In-Reply-To: <BAY8-F125hjJ8uT6Ssu0001cb8d@hotmail.com>
References: <BAY8-F125hjJ8uT6Ssu0001cb8d@hotmail.com>
Message-ID: <40704205.9040308@pobox.com>

Gagan Tandon wrote:
> 2. I ran the make command
> 
> It went on for 20 minutes or so, doing a lot of stuff and in the end 
> threw a fatal error regarding some oci file. I read through the errors 
> and found that it could not find oci.h and it tried to use something 
> else and then threw out a couple of error messages regarding ogrfrmts. 
> anyway, I added option (--with-oci=no) to ./configure command . so i ran 
> the following commands
> 
> make clean
> 
> ./configure --prefix=/home/gdal --with-pymodir=/home/gdal/pymod 
> --with-oci=no

Gagan,

I see the default check for oracle is to see if OCIBindByName is in
the libclntsh library but it doesn't check if the include files (which
will also be required) can be found.  This should be corrected at some
point, but I don't actually have a similar configuration to test with.

> make
> 
> after 20 minutes of printing what it has been doing, it threw fatal 
> error again with more than 200 lines of error regarding files of 
> libnetcdf, libjpeg and libz. So I removed the jpeg and netcdf format 
> from the GDAL_FORMATS variable in GDALmake.opt file. and I ran make 
> clean and make again.

I would suggest instead re-configuring with internal libz and libjpeg
if the system provided ones are causing problems.

eg.

--with-jpeg=internal --with-libz=internal


> Again there were errors, but no netcdf, but some other errors regarding 
> jpeg were there which ended with a fatal relocation error . the dump of 
> the last few lines of that error is provided below. I would appreciate 
> if someone could provide me clues on how to rectify this error.
...
> /usr2/OS-DEPENDENT/SunOS_Generic_sparc/lib/libjpeg.a(jdphuff.o)
> jpeg_consume_input                  0x39c       
> /usr2/OS-DEPENDENT/SunOS_Generic_sparc/lib/libjpeg.a(jdapimin.o)
> ld: fatal: relocations remain against allocatable but non-writable 
> sections!
> collect2: ld returned 1 exit status

I don't really know why this is happening, but I would suspect that there is
something significantly different in the way the referenced libjpeg is
built and it is causing some sort of conflict.  I don't really know why.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From alexamici at fastwebnet.it  Sun Apr  4 13:42:30 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] gdal on amd64 needs -fPIC?
In-Reply-To: <200404010949.37432.schut@sarvision.com>
References: <200403301250.17710.schut@sarvision.com> <200403301727.48509.alexamici@fastwebnet.it> <200404010949.37432.schut@sarvision.com>
Message-ID: <200404041942.30835.alexamici@fastwebnet.it>

Vincent,

sorry for the long delay.

On Thursday 01 April 2004 11:49, Vincent Schut wrote:
> Well I just took the effort to create a really really informative message
> for you with make outputs and configure options and stuff like that, then
> in the end the error doesn't show anymore.

lucky me ;)

> I did a cvs update before that. 
> Did you change things in cvs regarding -fPIC? Or was it something else
> (which I'll have to find out then) that caused the error here?

no change from me.

if you need to further investigate the problem the only hint that i can give 
you is that if you change the reconfigure gdal without a "make clean", stale 
files can pollute the build. but i don't see how this can give the error you 
reported.

> Note that all this is with a HDF4 lib compiled *with* -fPIC.

do you mean libmfhdf.so of the hdf driver inside gdal?

BTW: which distribution do you use?

really i can't imagine the x86-64 binutils being much different from x86 ones.

cheers,
alessandro

From warmerdam at pobox.com  Sun Apr  4 15:56:15 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.1 Release
Message-ID: <4070685F.6090605@pobox.com>

Folks,

I have prepared a new OpenEV_FW release with current snapshots of various
packages from CVS.  The package is a binary build for Win32 systems.

   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_171.zip

or

   http://gdal.maptools.org/dl/openev/OpenEV_FW_171.zip

Includes the latest GDAL and OpenEV as well as a CVS build of MapServ.exe.
Includes full PROJ.4 with datum shifting, OGDI, several additional GDAL
drivers such as HDF, and JPEG2000.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schut at sarvision.com  Mon Apr  5 06:37:14 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] gdal on amd64 needs -fPIC?
In-Reply-To: <200404041942.30835.alexamici@fastwebnet.it>
References: <200403301250.17710.schut@sarvision.com> <200404010949.37432.schut@sarvision.com> <200404041942.30835.alexamici@fastwebnet.it>
Message-ID: <200404051037.14934.schut@sarvision.com>

On Sunday 04 April 2004 17:42, you wrote:
> Vincent,
>
> sorry for the long delay.
No matters.
>
> On Thursday 01 April 2004 11:49, Vincent Schut wrote:
> > Well I just took the effort to create a really really informative message
> > for you with make outputs and configure options and stuff like that, then
> > in the end the error doesn't show anymore.
>
> lucky me ;)
>
> > I did a cvs update before that.
> > Did you change things in cvs regarding -fPIC? Or was it something else
> > (which I'll have to find out then) that caused the error here?
>
> no change from me.
>
> if you need to further investigate the problem the only hint that i can
> give you is that if you change the reconfigure gdal without a "make clean",
> stale files can pollute the build. but i don't see how this can give the
> error you reported.
>
> > Note that all this is with a HDF4 lib compiled *with* -fPIC.
>
> do you mean libmfhdf.so of the hdf driver inside gdal?

libmfhdf.so. Didn't know that gdal comes with it's own hdf driver files? You 
mean it is possible to compile gdal with hdf4 support without installing the 
hdf4 library seperately?
>
> BTW: which distribution do you use?

Gentoo.
>
> really i can't imagine the x86-64 binutils being much different from x86
> ones.

Neither could I.
Let's say that if this error comes up again, I'll do some more intensive 
testing and report back to the list again. So if you don't hear from me about 
-fPIC, all goes well. I am a regular user of gdal cvs so I should find out 
soon if the problem arises again.
I know of course about the make clean thing. This disappearance of errors 
however also to me sounds like that I might have forgotten to make clean (or 
ldconfig) somewhere in the process.

Thanks for the support, anyway.

Cheers,
>
> cheers,
> alessandro

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From Horst.Duester at bd.so.ch  Mon Apr  5 09:21:28 2004
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Shapefile and NULL Values
Message-ID: <5B025B1F39D6D4119F5700508BEEEC66F94A17@srsofaioi4546.ktso.ch>

I try to export a PG table with some NULL values with ogr2ogr. ogr2ogr
doesn't export these NULL values correct. The resulting shapefile is
corrupt. Does there exist any limitation with respect the handling of NULL
values??

GDAL 1.2.0

With best regards

Dr. Horst D?ster 
GIS-Koordinator

Kanton Solothurn?
Amt f?r Geoinformation
Abteilung SO!GIS Koordination
Werkhofstr. 65
CH-4509 Solothurn 

Tel.: ++41 (0)32 627 25 32 
Fax: ++41 (0)32 627 22 14

horst.duester@bd.so.ch 
www.sogis.so.ch


From i.turton at geography.leeds.ac.uk  Mon Apr  5 05:27:00 2004
From: i.turton at geography.leeds.ac.uk (Ian Turton)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] British National Grid to UTM
In-Reply-To: <406DBFDF.6030804@pobox.com>
References: <SYLVANSERVERC0AHmKq000001b6@sylvanserver>
 <406DBFDF.6030804@pobox.com>
Message-ID: <6.0.3.0.0.20040405102611.01c3cec0@localhost>

At 20:32 02/04/2004, Frank Warmerdam wrote:
>Roger Bedell wrote:
>
>Or if you know an appropriate shift to convert to WGS84 you could supply
>it in the +towgs84 option.

This document may help with this http://www.gps.gov.uk/guide7.asp

Ian


From doug at jdgis.com  Mon Apr  5 10:28:50 2004
From: doug at jdgis.com (J Douglas Gough)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] PNG Heightfield 
References: <20040331170001.6085.15424.Mailman@yoda.imagelinks.com>
Message-ID: <024b01c41b1a$5409e210$6401a8c0@dougpc>

I'm interested in checking out the gmt to tga heightfield code that J. Luis
suggested. PNG would be a great way to store elevation data - it's got great
lossless compression and could be easily ported once a standard palette is
created.  Sort of a "GeoPNG" for elevation (i.e. PEG or 'PNG Elevation
Graphic') was what I had in mind.  If I come up with something useful, I'll
make sure to post it.  I've got the entire National Elevation Dataset
converted to MrSid as integer values and ready to host online, but the Sid
format is not as easy to read/write and add to custom apps as far as
licensing compared to PNG.

doug@jdgis.com





From jluis at ualg.pt  Mon Apr  5 11:11:57 2004
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] PNG Heightfield
References: <20040331170001.6085.15424.Mailman@yoda.imagelinks.com> <024b01c41b1a$5409e210$6401a8c0@dougpc>
Message-ID: <4071773D.83607C63@ualg.pt>



J Douglas Gough wrote:

> I'm interested in checking out the gmt to tga heightfield code that J. Luis
> suggested. PNG would be a great way to store elevation data - it's got great
> lossless compression and could be easily ported once a standard palette is
> created.  Sort of a "GeoPNG" for elevation (i.e. PEG or 'PNG Elevation
> Graphic') was what I had in mind.  If I come up with something useful, I'll
> make sure to post it.  I've got the entire National Elevation Dataset
> converted to MrSid as integer values and ready to host online, but the Sid
> format is not as easy to read/write and add to custom apps as far as
> licensing compared to PNG.
>

Douglas,
Here it goes. Remember that you have to compile it with gmt (just add its name
to the makefile and recompile)
Or use the code and adapt to an other input format.
The program can used to produce "normal" tga image files. In which case it
relies on the GMT color palettes.
Or to produce an height field. This option needs gmt for the grid reading
routines. If you change it to read
other formats than it should not need gmt anymore.

J. Luis
-------------- next part --------------
A non-text attachment was scrubbed...
Name: grd2tga.zip
Type: application/x-zip-compressed
Size: 6128 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040405/1dc1f7a3/grd2tga.bin
From val at GRI.MsState.Edu  Mon Apr  5 11:35:02 2004
From: val at GRI.MsState.Edu (Valentine Anantharaj)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] MATLAB Mex Interface(s) to GDAL?
In-Reply-To: <1080938191.406dcecf66c8f@wmail.ualg.pt>
References: <406DC2DC.3060005@GRI.MsState.Edu> <1080938191.406dcecf66c8f@wmail.ualg.pt>
Message-ID: <40717CA6.4030402@GRI.MsState.Edu>

Joaquim -

I was able to use the copy from the Mirone distribution.  It works great 
for the GeoTIFF files I am using.  Thanks.

Regards,

Valentine

Joaquim Luis wrote:

>Quoting Valentine Anantharaj <val@GRI.MsState.Edu>:
>
>  
>
>>Greetings!
>>
>>Are there any MATLAB Mex interface(s) to the GDAL library and
>>functionalities?  I noticed one other post in the past that referred to
>>this possibility; but there was no contact email.
>>    
>>
>
>Valentine
>You probably refer to one post of mine. Indeed I wrote a kind of gdalread mex 
>file. I say a "kind" because it doesn't read all the supported gdal formats.
>I decided to leave out image formats that are potentially very large. If you 
>know Matlab and it's voracity for RAM you'll understand why I did it.
>
>This mex is used in a project of mine called Mirone and is distributed with it.
>Mirone (BTW, it also fits on the recent category of gdal viewers) is available 
>at:
>w3.ualg.pt/~jluis/mirone
>At this moment (I'm writing from home) I am not sure if the distribution already 
>includes the gdalread_m.c (the mex) source code, but it does include the 
>gdalread_m.dll mex file (it is on Mirone's root directory).
>
>My email contact is:
>jluis@ualg.pt
>Tell me if the source code is not included and you want it.
>
>Joaquim Luis
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>
>
>  
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040405/2eb330cf/attachment.html
From rec at geodesign.com.br  Mon Apr  5 11:49:40 2004
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.1 Release
In-Reply-To: <4070685F.6090605@pobox.com>
References: <4070685F.6090605@pobox.com>
Message-ID: <6.0.3.0.0.20040405124315.02479c48@mailhost.geodesign.com.br>

Frank,

Thanks for the update.

However, I could not find the OpenEV_FW_171.zip file.
There is a openev-linux-171.tar.gz and a openev-win-170.exe.
Pease let us know when up put the 1.7.1 zip file up for ftp.

Thanks,

Reinaldo.

At 16:56 4/4/2004, you wrote:
>Folks,
>
>I have prepared a new OpenEV_FW release with current snapshots of various
>packages from CVS.  The package is a binary build for Win32 systems.
>
>   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_171.zip
>
>or
>
>   http://gdal.maptools.org/dl/openev/OpenEV_FW_171.zip
>
>Includes the latest GDAL and OpenEV as well as a CVS build of MapServ.exe.
>Includes full PROJ.4 with datum shifting, OGDI, several additional GDAL
>drivers such as HDF, and JPEG2000.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


From doug at jdgis.com  Mon Apr  5 11:54:18 2004
From: doug at jdgis.com (J Douglas Gough)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] PNG Heightfield 
Message-ID: <028101c41b26$4120c3b0$6401a8c0@dougpc>

Sorry, but am I missing a setting to receive attachments correctly?  They
all show up as ascii.  I've tried going through web mail and outlook
express, but still no zip files.
----- Original Message ----- 
From: "J Douglas Gough" <doug@jdgis.com>
To: <gdal-dev@remotesensing.org>
Sent: Monday, April 05, 2004 8:28 AM
Subject: [Gdal-dev] PNG Heightfield


> I'm interested in checking out the gmt to tga heightfield code that J.
Luis
> suggested. PNG would be a great way to store elevation data - it's got
great
> lossless compression and could be easily ported once a standard palette is
> created.  Sort of a "GeoPNG" for elevation (i.e. PEG or 'PNG Elevation
> Graphic') was what I had in mind.  If I come up with something useful,
I'll
> make sure to post it.  I've got the entire National Elevation Dataset
> converted to MrSid as integer values and ready to host online, but the Sid
> format is not as easy to read/write and add to custom apps as far as
> licensing compared to PNG.
>
> doug@jdgis.com
>
>
>
>


From jluis at ualg.pt  Mon Apr  5 12:22:49 2004
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] PNG Heightfield
References: <028101c41b26$4120c3b0$6401a8c0@dougpc>
Message-ID: <407187D9.EDAF623A@ualg.pt>

> Sorry, but am I missing a setting to receive attachments correctly?  They
> all show up as ascii.  I've tried going through web mail and outlook
> express, but still no zip files.

I just checked and this time it was not the classic "I send you attached ..."
and than forget to attach
Get it from
ftp.ualg.pt/users/jluis/m_gmt/grd2tga.zip


From warmerdam at pobox.com  Mon Apr  5 13:30:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.1 Release
In-Reply-To: <6.0.3.0.0.20040405124315.02479c48@mailhost.geodesign.com.br>
References: <4070685F.6090605@pobox.com> <6.0.3.0.0.20040405124315.02479c48@mailhost.geodesign.com.br>
Message-ID: <407197A0.4070809@pobox.com>

Reinaldo Escada Chohfi wrote:
> Frank,
> 
> Thanks for the update.
> 
> However, I could not find the OpenEV_FW_171.zip file.
> There is a openev-linux-171.tar.gz and a openev-win-170.exe.
> Pease let us know when up put the 1.7.1 zip file up for ftp.

Yikes!

I seem to have deleted it by accident.  It is there on the mirror though,
and I am copying it back.  So for now just grab:

   http://gdal.maptools.org/dl/openev/OpenEV_FW_171.zip

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Apr  5 14:08:41 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.1 Linux Binaries Released
Message-ID: <4071A0A9.5040906@pobox.com>

Folks,

For the first time in a long time I have prepared a Linux binaries release
of the OpenEV_FW package.  It is available at:

   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_linux_1.7.1.tar.gz

It contains similar options to the Windows release but lacks a few drivers
(such as ECW).  It does contain a full set of MapServer executables.  mapserv
itself and all the utility programs.   It does include PostGIS and DODS support.

Feedback, as always, is welcome.

My *intention* is to rebanner the OpenEV_FW releases as "FWTools" and setup
up some more support infrastructure (web page, bugzilla for "package", better
advertising, and more frequent releases).  As always whether called OpenEV_FW
or FWTools, it will endevour to track development version of packages, and to
include as many extensions/format drivers etc as possible.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Mon Apr  5 15:23:34 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <E4394C8445EFCC4AA136A1C305E4C9280153EFED@APPMSG2.AERO.BALL.COM>

Is there a method within OGR to find the center of a polygon (where it
is not part of the data set) or polyline for the purposes of centering a
label?  If not does anyone have a method they are willing to share to
walk through the data of a polygon / ring to determine the center?


Bruce Clay
bclay@ball.com 

From warmerdam at pobox.com  Mon Apr  5 15:35:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Center of polygon
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C9280153EFED@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C9280153EFED@APPMSG2.AERO.BALL.COM>
Message-ID: <4071B4F5.7040200@pobox.com>

Clay, Bruce wrote:
> Is there a method within OGR to find the center of a polygon (where it
> is not part of the data set) or polyline for the purposes of centering a
> label?  If not does anyone have a method they are willing to share to
> walk through the data of a polygon / ring to determine the center?

Bruce,

There is no support this currently in GDAL/OGR.  You might find something
like this in the general GEOS geometry engine.  There is also some centroid
code in Shapelibs contrib directory if you would like to adapt that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Mon Apr  5 16:01:40 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:07 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AD3@mailman.san.com>

Yo,

I know how to do this in c++ code:

// example method call:
vector< float> pCenter = pPolygon->GetCenter(pPolygon->GetXPoints(),
pPolygon->GetYPoints(), pEx);


// the supporting routines
double CSimpleGeometry::CalculateProjectedArea(vector< float>* pXPoints,
vector< float>* pYPoints)
{
	try
	{
		int j = 0;
		double nArea = 0.0;
		long nSize = pXPoints->size();

		if (nSize < 2)
			return 0.0;

		for (int i = 0; i < nSize; ++i) 
		{
			j = (i + 1) % nSize;
			nArea += pXPoints->at(i) * pYPoints->at(j);
			nArea -= pYPoints->at(i) * pXPoints->at(j);
		}

		nArea = nArea / 2.0;
		return (nArea < 0.0 ? -nArea : nArea);
	}
	catch(...)
	{
		throw CString("An unspecified error occurred");
	}
}

vector< float> CSimpleGeometry::GetCenter(vector< float>* pXPoints,
vector< float>* pYPoints, vector< float>* pExtents)
{
	try
	{
		float cx = 0.0f;
		float cy = 0.0f;
		float nArea = (float) CalculateProjectedArea(pXPoints,
pYPoints);
		int j = 0;
		float nFactor = 0.0f;
		vector< float> pCenter;

		long nSize = pXPoints->size();

		if (nSize < 2)
		{
			pCenter.push_back(0.0f);
			pCenter.push_back(0.0f);
			return pCenter;
		}

		if (nSize == 2)
		{
			pCenter.push_back(pXPoints->at(0));
			pCenter.push_back(pXPoints->at(1));
			return pCenter;
		}

		for (int i = 0; i < nSize; i++) 
		{
			j = (i + 1) % nSize;
	      
			nFactor = pXPoints->at(i) * pYPoints->at(j) -
pXPoints->at(j) * pYPoints->at(i);
			cx += (pXPoints->at(i) + pXPoints->at(j)) *
nFactor;
			cy += (pYPoints->at(i) + pYPoints->at(j)) *
nFactor;
		}
	    
		nArea = nArea * 6.0f;
		nFactor = 1 / nArea;
		cx = abs(cx * nFactor);
		cy = abs(cy * nFactor);

		float pXExtents[5] = {pExtents->at(1), pExtents->at(1),
pExtents->at(3), pExtents->at(3), pExtents->at(1)};
		float pYExtents[5] = {pExtents->at(2), pExtents->at(0),
pExtents->at(0), pExtents->at(2), pExtents->at(2)};

		if ( IsPointInPolygon(5, pXExtents, pYExtents, cx, cy))
		{
			pCenter.push_back(cy);
			pCenter.push_back(cx);
		}
		else if ( IsPointInPolygon(5, pXExtents, pYExtents, cx *
-1.0f, cy))
		{
			pCenter.push_back(cy);
			pCenter.push_back(cx * -1);
		}
		else if ( IsPointInPolygon(5, pXExtents, pYExtents, cx,
cy * -1.0f))
		{
			pCenter.push_back(cy * -1);
			pCenter.push_back(cx);
		}
		else if ( IsPointInPolygon(5, pXExtents, pYExtents, cx *
-1.0f, cy * -1.0f))
		{
			pCenter.push_back(cy * -1);
			pCenter.push_back(cx * -1);
		}
		else
		{
			pCenter.push_back(cy);
			pCenter.push_back(cx);
		}

		return pCenter;
	}
	catch(...)
	{
		throw CString("An unspecified error occurred");
	}
}

bool CSimpleGeometry::IsPointInPolygon(int nPolySize, float* pXPoints,
float* pYPoints, float nX, float nY)
{
	try
	{
		long i, j;
		bool bIsInside = false;

		for (i = 0, j = nPolySize - 1; i < nPolySize; j = i++) 
		{
			if ((((pYPoints[i] <= nY) && (nY < pYPoints[j]))
||
			    ((pYPoints[j] <= nY) && (nY < pYPoints[i])))
&&
				(nX < (pXPoints[j] - pXPoints[i]) * 
				(nY - pYPoints[i]) / (pYPoints[j] -
pYPoints[i]) + pXPoints[i]))
			{
				bIsInside = !bIsInside;
			}
		}
		return bIsInside;
	}
	catch(...)
	{
		throw CString("An unspecified error occurred");
	}
}

vector< float> CSimpleGeometry::GetMidPoint(vector< float>* pPoints)
{
	try
	{
		float nY1 = 0.0f, nX1 = 0.0f, nY2 = 0.0f, nX2 = 0.0f,
nDistance = 0.0f;
		int j = 0;
		vector< float> pMidPoint;
		nDistance = (float) GetDistance(pPoints);
		float nMidPoint = nDistance / 2;
		nDistance = 0.0f;
		vector< float>::iterator it;

		for (it = pPoints->begin(); it != pPoints->end(); j++)
		{
			if (j == 0)
			{
				nY1 = *it;
				it++;
				nX1 = *it;
				it++;
			}

			nY2 = *it;
			it++;
			nX2 = *it;
			it++;

			nDistance += sqrt(((nX2 - nX1) * (nX2 - nX1)) +
((nY2 - nY1) * (nY2 - nY1)));

			if (nDistance > nMidPoint)
			{
				nY2 = nY1 + ((nY2 - nY1) / 2);
				nX2 = nX1 + ((nX2 - nX1) / 2);
				break;
			}

			nY1 = nY2;
			nX1 = nX2;
		}

		pMidPoint.push_back(nY2);
		pMidPoint.push_back(nX2);

		return pMidPoint;
	}
	catch(...)
	{
		throw CString("An unspecified error occurred");
	}
}

double CSimpleGeometry::GetDistance(vector< float>* pPoints)
{
	try
	{
		vector< float>::iterator it;
		float nY1 = 0.0f, nX1 = 0.0f, nY2 = 0.0f, nX2 = 0.0f,
nDistance = 0.0f;
		int j = 0;
		long nSize = pPoints->size();

		for (it = pPoints->begin(); it != pPoints->end(); j++)
		{
			if (j == 0)
			{
				nY1 = *it;
				it++;
				nX1 = *it;
				it++;
			}

			nY2 = *it;
			it++;
			nX2 = *it;
			it++;

			nDistance += sqrt(((nX2 - nX1) * (nX2 - nX1)) +
((nY2 - nY1) * (nY2 - nY1)));
			
			nY1 = nY2;
			nX1 = nX2;
		}

		return nDistance;
	}
	catch(...)
	{
		throw CString("An unspecified error occurred");
	}
}

There you go, you can use these functions to find the center point of an
n-gon and much more...

Martin Chapman

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, April 05, 2004 1:35 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Center of polygon


Clay, Bruce wrote:
> Is there a method within OGR to find the center of a polygon (where it

> is not part of the data set) or polyline for the purposes of centering

> a label?  If not does anyone have a method they are willing to share 
> to walk through the data of a polygon / ring to determine the center?

Bruce,

There is no support this currently in GDAL/OGR.  You might find
something like this in the general GEOS geometry engine.  There is also
some centroid code in Shapelibs contrib directory if you would like to
adapt that.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From bclay at ball.com  Mon Apr  5 16:21:51 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <E4394C8445EFCC4AA136A1C305E4C9280153EFEF@APPMSG2.AERO.BALL.COM>

Martin:
  Many thanks a for the code.

Bruce

From MChapman at sanz.com  Mon Apr  5 16:40:20 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9564@mailman.san.com>

Bruce,

No problem, it's not perfect but it is pretty good for a starting point.
It will position 99 percent of the labels correctly.  If you improve it
or make bug fixes send me the code please.  If you have questions let me
know too. 

Martin

-----Original Message-----
From: Clay, Bruce [mailto:bclay@ball.com] 
Sent: Monday, April 05, 2004 2:22 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Center of polygon


Martin:
  Many thanks a for the code.

Bruce
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From dmorissette at dmsolutions.ca  Mon Apr  5 18:24:35 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C9280153EFED@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C9280153EFED@APPMSG2.AERO.BALL.COM>
Message-ID: <4071DCA3.2010103@dmsolutions.ca>

Clay, Bruce wrote:
> Is there a method within OGR to find the center of a polygon (where it
> is not part of the data set) or polyline for the purposes of centering a
> label?  If not does anyone have a method they are willing to share to
> walk through the data of a polygon / ring to determine the center?
> 
> 

The MITAB driver contains a function called OGRPolygonLabelPoint() in 
ogr/ogrsf_fmrts/mitab/mitab_geometry.cpp that will compute a label point 
  on an OGRPolygon.

The function is only local to the MITAB driver and is not part of the 
public OGR API, but you can probably make a copy.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From Christik at fhu.disa.mil  Mon Apr  5 17:19:17 2004
From: Christik at fhu.disa.mil (Christiansen, Kevin (Contractor))
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate and the bridge/gateway
Message-ID: <8513360663312547BEF5B17119171A9701A87B1E@emsfhu1.fhu.disa.mil>

Hello, hello!

I have a question about the gltp bridge when used with gdal_translate.exe
and gdal_merge.py.  I am using 'OpenEV_FW_171.zip', dated 4-5-2004, on a
Windows 2000 Professional box with a gig of ram.

I am attempting to use them to translate between ADRG format and GeoTiff
format.  A typical command line that I am using looks like this:

gdal_translate -of GTiff
gltp:/adrg/C:/Kevin/NH1206/TLUS0101:"TLUS0101.IMG":Image out.tif

The output of this command is:
Input file size is 15616, 11136
0...10...20...30...40...50...60...70...80...90...100 - done.

This does generate a (679 Megabyte) 'out.tif' file, which is indeed 15616 x
11136 pixels in size. Unfortunately, there is only 1000 x 1000 pixels worth
of data in that file.  In other words, the output file looks like a 1000 x
1000 pixel image that was expanded / zoomed to 15616 x 11136 pixels - it's
very, very blocky.  Note that if I use gdal_merge.py (instead of
gdal_translate) to translate the ADRG image to GeoTiff, I get the same
behavior.

If I ask 'gdalinfo' about the file (via "gdalinfo
gltp:/adrg/C:/Kevin/NH1206/TLUS0101"), the output starts with the following:

Driver: OGDI/OGDI Bridge
Size is 1000, 1000
Coordinate System is:
GEOGCS["unnamed ellipse",
<etc>

Based on that "Size is 1000, 1000" line, I am guessing that the ADRG reader
is reading in the 15616 x 11136 pixel image and then squishing it down to
1000 x 1000 pixels so that it will fit through the OGDI bridge / OGDI
gateway. After the (squished) image passes through the bridge/gateway, the
GeoTiff writer then expands the image back to its full 15616 x 11136 pixel
resolution before it writes it to the output file.  Unfortunately, most of
the image data is lost in this process.

Are there any parameters, registry entries, environment variables, source
code changes, etc. that I can use to tell gdal_translate and/or gdal_merge
to increase the 'size' of the bridge/gateway so that the ADRG reader can
pass the full-size image to the GeoTiff writer, so I don't have this data
loss?

Thank you VERY much for any help you can give me in this matter!

- Kevin Christiansen


From warmerdam at pobox.com  Mon Apr  5 20:41:28 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] ECW / JPEG2000
Message-ID: <4071FCB8.7080305@pobox.com>

Folks,

There has been some discussion about the inclusion of JPEG2000 support in
the ERMapper ECW SDK.  I have downloaded and verified that I can read
JPEG2000 files using it with GDAL.  No code changes are required except for
broading the set of extensions allowed in the ECW driver in GDAL.

The ECW 3.0 Beta SDK does not include source, but my understanding is that
source will be provided with the final release - hopefully allowing a port
to Linux.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sholl at gmx.net  Tue Apr  6 00:47:24 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: OGR C API question
References: <20040322142126.GN16740@thuille.itc.it>
	<20040322223846.GA24470@thuille.itc.it>
	<20040329174407.69c06f63@kermit.wg.de>
	<200403291644.16510.etdube@globetrotter.net>
	<40689D25.7060005@pobox.com>
Message-ID: <20040406064724.2e9c7e25@kermit.wg.de>

Hello Frank, Etienne,

On Mon, 29 Mar 2004 17:03:17 -0500 Frank Warmerdam <warmerdam@pobox.com>
wrote:

> Etienne Dube wrote:
> > Hi Stephan,
> > 
> > You have to make sure the SRID reference from the layer table is
> > present in the spatial_ref_sys table. Otherwise it seems that OGR is
> > unable to apply the spatial filter. First, if you haven't actually
> > installed the PostGIS functions in your database, do it:
> > 
> > createlang -U postgres plpgsql <dbname>
> > psql postgres -d <dbname> -f postgis.sql
> > 
> > Then, you can use ogr2ogr to fill in the rows from a shapefile:
> > 
> > ogr2ogr -f "PostgreSQL" -s_srs 
> > 'GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPH
> > EROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT
> > ["Degree",0.0174532925199433]]'  "PG:dbname=<dbname>
> > user=<username>" SHAPEFILE.SHP
> > 
> > (Of course, you have to replace <dbname> and <username> by the
> > correct values.)
> > 
> > I've found that if you don't specify the -s_srs (source spatial ref.
> > sys.) when importing an ESRI shapefile with ogr2ogr, the SRID row in
> > spatial_ref_sys won't be created. Make sure you use the same datum
> > as the data in your shapefile.

Indeed, that is the point. After giving the correct SRID the spatial
part os pulled out of PostGIS! Many thanks to all!

btw, is there some work in progress at the mentioned improvements of the
selcting-method of the -spatial switch?

Cheers
	Stephan Holl

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de



From warmerdam at pobox.com  Tue Apr  6 01:16:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate and the bridge/gateway
In-Reply-To: <8513360663312547BEF5B17119171A9701A87B1E@emsfhu1.fhu.disa.mil>
References: <8513360663312547BEF5B17119171A9701A87B1E@emsfhu1.fhu.disa.mil>
Message-ID: <40723D45.1050302@pobox.com>

Christiansen, Kevin (Contractor) wrote:
> This does generate a (679 Megabyte) 'out.tif' file, which is indeed 15616 x
> 11136 pixels in size. Unfortunately, there is only 1000 x 1000 pixels worth
> of data in that file.  In other words, the output file looks like a 1000 x
> 1000 pixel image that was expanded / zoomed to 15616 x 11136 pixels - it's
> very, very blocky.  Note that if I use gdal_merge.py (instead of
> gdal_translate) to translate the ADRG image to GeoTiff, I get the same
> behavior.

Kevin,

I did a little experiment with some ADRG data, and I see a similar effect
to what you see.  A few notes:

  o The 1000x1000 resolution is meaningless.  It is an artifical size
    faked for the based dataset which is really just a container for the
    subimages.
  o The subimages, when imported with what should be their natural resolution
    are in fact being pulled at a much higher resolution that necessary.

  o I really don't know why.  I will try to dig into the GDAL/OGDI driver to
    figure out what is going on.  In the meantime, I would encourage you to
    file a bug report in the GDAL Bugzilla about this issue so we can use that
    bug to track the status of the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rmagacho at predialnet.com.br  Tue Apr  6 04:46:16 2004
From: rmagacho at predialnet.com.br (Romano J M Silva)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Georeferencing a tiff file
Message-ID: <003101c41bb3$9fc8a800$2520c80a@tf281703>

Hello all,

I have a tiff file and I want to georeference it and save it as a GeoTiff to use in GDAL . Does anyone know of a tool to do that?

Thanks,
Romano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040406/b11a406a/attachment.html
From doug at jdgis.com  Tue Apr  6 04:50:24 2004
From: doug at jdgis.com (J Douglas Gough)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] PNG Heightfield
References: <20040406051701.20026.68743.Mailman@yoda.imagelinks.com>
Message-ID: <06fb01c41bb4$3418a4b0$6401a8c0@dougpc>

Thanks,

Got the code this time.  If you are interested in the PNG elevation version,
I'll let you know as soon as I get it going.  I'm a VB guy recently
converted to open source.


From warmerdam at pobox.com  Tue Apr  6 10:47:24 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Georeferencing a tiff file
In-Reply-To: <003101c41bb3$9fc8a800$2520c80a@tf281703>
References: <003101c41bb3$9fc8a800$2520c80a@tf281703>
Message-ID: <4072C2FC.3030207@pobox.com>

Romano J M Silva wrote:
> Hello all,
>  
> I have a tiff file and I want to georeference it and save it as a 
> GeoTiff to use in GDAL . Does anyone know of a tool to do that?
>  
> Thanks,
> Romano

Romano,

When you say "I want to georeference it", do you already know the georeferencing
or are you wanting to do a tie down in a GUI environment?  If you know the top
left corner and pixel spacing you can manually create a corresponding
"world file" for the file and then use gdal_translate to "apply" that
world file along with a coordinate system and produce an output file.

For instance, imagine you had a file called raw.tif with 60m x 60m pixels, and
a top left corner of 440750m E, 3751290m N in UTM 11 WGS84.  You could
georeference it by creating a world file called raw.tfw with the following
in it (six lines):

            60.0000000000
             0.0000000000
             0.0000000000
           -60.0000000000
        440750.0000000000
       3751290.0000000000

Then use this gdal_translate command to create a geotiff version with a
coordinate system.

  gdal_translate -a_srs '+proj=utm +zone=11 +datum=WGS84' raw.tif geotiff.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Tue Apr  6 11:02:54 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C8F4@APPMSG2.AERO.BALL.COM>

Daniel:
  Thanks for the tip.  All I had to do is include the mitab_geometry.h
file and the method did what I needed.

Frank:  Several of the methods in this file seem to be quite generic.
Could / should they be moved to the public ORG API.  So far I have only
used OGRPolygonLabelPoint on polygons but I will be trying it on
polylines this afternoon.

Bruce
bclay@ball.com

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Daniel Morissette
Sent: Monday, April 05, 2004 6:25 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Center of polygon


Clay, Bruce wrote:
> Is there a method within OGR to find the center of a polygon (where it

> is not part of the data set) or polyline for the purposes of centering

> a label?  If not does anyone have a method they are willing to share 
> to walk through the data of a polygon / ring to determine the center?
> 
> 

The MITAB driver contains a function called OGRPolygonLabelPoint() in 
ogr/ogrsf_fmrts/mitab/mitab_geometry.cpp that will compute a label point

  on an OGRPolygon.

The function is only local to the MITAB driver and is not part of the 
public OGR API, but you can probably make a copy.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Apr  6 11:43:02 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: OGR C API question
In-Reply-To: <20040406064724.2e9c7e25@kermit.wg.de>
References: <20040322142126.GN16740@thuille.itc.it>	<20040322223846.GA24470@thuille.itc.it>	<20040329174407.69c06f63@kermit.wg.de>	<200403291644.16510.etdube@globetrotter.net>	<40689D25.7060005@pobox.com> <20040406064724.2e9c7e25@kermit.wg.de>
Message-ID: <4072D006.1030705@pobox.com>

Stephan Holl wrote:
> Indeed, that is the point. After giving the correct SRID the spatial
> part os pulled out of PostGIS! Many thanks to all!
> 
> btw, is there some work in progress at the mentioned improvements of the
> selcting-method of the -spatial switch?

Stephan,

I am not doing any work on the PostGIS driver just now though there are some
pent up bug reports and enhancement requests (mostly from Stephen Frost).  I
don't see any bug reports in bugzilla about the spatial search support.  If
you have isolated an issue please report it.

I do anticipate doing a round of work on PostGIS support within a couple weeks
but the best way to encourage it is to report problems (via bugzilla!)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Apr  6 12:19:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C8F4@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C8F4@APPMSG2.AERO.BALL.COM>
Message-ID: <4072D891.3050302@pobox.com>

Clay, Bruce wrote:
> Daniel:
>   Thanks for the tip.  All I had to do is include the mitab_geometry.h
> file and the method did what I needed.
> 
> Frank:  Several of the methods in this file seem to be quite generic.
> Could / should they be moved to the public ORG API.  So far I have only
> used OGRPolygonLabelPoint on polygons but I will be trying it on
> polylines this afternoon.

Bruce,

You are right that some of these methods could/should sensibly be moved up
to the OGRGeometry classes.  However, I have been hesitant to start implementing
and document custom OGR implementations of these sorts of utility geometry
functions when I anticipate integration with GEOS to fill most of this
capability at some point.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Apr  6 12:27:18 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9566@mailman.san.com>

Frank,

What is GEOS? Can you point me to the homepage?

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, April 06, 2004 10:19 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Center of polygon


Clay, Bruce wrote:
> Daniel:
>   Thanks for the tip.  All I had to do is include the mitab_geometry.h

> file and the method did what I needed.
> 
> Frank:  Several of the methods in this file seem to be quite generic. 
> Could / should they be moved to the public ORG API.  So far I have 
> only used OGRPolygonLabelPoint on polygons but I will be trying it on 
> polylines this afternoon.

Bruce,

You are right that some of these methods could/should sensibly be moved
up to the OGRGeometry classes.  However, I have been hesitant to start
implementing and document custom OGR implementations of these sorts of
utility geometry functions when I anticipate integration with GEOS to
fill most of this capability at some point.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Apr  6 13:06:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB9566@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB9566@mailman.san.com>
Message-ID: <4072E3A2.2010208@pobox.com>

Chapman, Martin wrote:
> Frank,
> 
> What is GEOS? Can you point me to the homepage?

Martin,

Is it is a C/C++ port of the Java Topology Suite.  It can be found at:

   http://geos.refractions.net/

It is an opengis simple features geometry based geometry engine.   It is
already used by PostGIS and since it shares a geometry model (though not the
actual object instance format) with OGR I think it should be easy to
integrate it to implement a variety of complex geometry operations for OGR.

Doing so is on my long term "todo" list.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Apr  6 13:54:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Pre-packaged GDAL Binaries
Message-ID: <4072EEDE.70205@pobox.com>

Folks,

I am trying to put the information on where to download GDAL binaries into
better order.  Over the years lots of people have contacted me on this list,
or privately about packages they were working on for GDAL and related packages.
I generally have not kept close track of any of this other than over the
years it sinking in the Silke at Inevation was maintaining RPMs for the
FreeGIS CDs.

I have moved download information off the main GDAL page and I am now
interested in including pointers to various pre-packaged binaries
available from different source.  I currently have a general reference
to the FreeGIS CDs for RPMS (but no direct link).  Also a link to the
info page about Debian GDAL packages (also maintained by Silke) and
the information page about MacOS X Fink packages for GDAL.  The page is at:

   http://www.remotesensing.org/gdal/download.html

Is anyone aware of other such packagings I should be referencing?
Is there a FreeBSD package being maintained by someone?  A Cygwin package?

There is also the new GeoMorphix just announced but it is currently
an incomplete packaging of GDAL (no commandline utilities or Python
integration) so I will omit it till that is taken care of.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From hobu at iastate.edu  Tue Apr  6 14:04:54 2004
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Pre-packaged GDAL Binaries
In-Reply-To: <4072EEDE.70205@pobox.com>
References: <4072EEDE.70205@pobox.com>
Message-ID: <6.0.1.1.2.20040406130200.01d2a570@hobu.mail.iastate.edu>

Frank,

I have a Python 2.3 Windows build of GDAL that installs using distutils 
available.  It is located at 
http://hobu.stat.iastate.edu/gdal-1.1.9win32.exe  Care was taken to make 
sure that the GDAL_DATA environment variable is set on import and it 
includes support for Oracle Spatial, ECW, netcdf, GML, and PostGIS

Howard


At 12:54 PM 4/6/2004, Frank Warmerdam wrote:
>Folks,
>
>I am trying to put the information on where to download GDAL binaries into
>better order.  Over the years lots of people have contacted me on this list,
>or privately about packages they were working on for GDAL and related 
>packages.
>I generally have not kept close track of any of this other than over the
>years it sinking in the Silke at Inevation was maintaining RPMs for the
>FreeGIS CDs.
>
>I have moved download information off the main GDAL page and I am now
>interested in including pointers to various pre-packaged binaries
>available from different source.  I currently have a general reference
>to the FreeGIS CDs for RPMS (but no direct link).  Also a link to the
>info page about Debian GDAL packages (also maintained by Silke) and
>the information page about MacOS X Fink packages for GDAL.  The page is at:
>
>   http://www.remotesensing.org/gdal/download.html
>
>Is anyone aware of other such packagings I should be referencing?
>Is there a FreeBSD package being maintained by someone?  A Cygwin package?
>
>There is also the new GeoMorphix just announced but it is currently
>an incomplete packaging of GDAL (no commandline utilities or Python
>integration) so I will omit it till that is taken care of.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Apr  6 14:30:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Pre-packaged GDAL Binaries
In-Reply-To: <6.0.1.1.2.20040406130200.01d2a570@hobu.mail.iastate.edu>
References: <4072EEDE.70205@pobox.com> <6.0.1.1.2.20040406130200.01d2a570@hobu.mail.iastate.edu>
Message-ID: <4072F74A.9030300@pobox.com>

Howard Butler wrote:
> Frank,
> 
> I have a Python 2.3 Windows build of GDAL that installs using distutils 
> available.  It is located at 
> http://hobu.stat.iastate.edu/gdal-1.1.9win32.exe  Care was taken to make 
> sure that the GDAL_DATA environment variable is set on import and it 
> includes support for Oracle Spatial, ECW, netcdf, GML, and PostGIS

Howard,

Cool, I had a vague recollection of this.  I have tried it out on my
laptop and sure enough - it seems to work!  I am quite impressed with the
inclusion of OCI (are you really permitted to redistribute oci.dll?) and
PostGIS support. I have never got the PostGIS client libraries to work
properly on Win32 though obviously lots of other people have had no problem.

So, umm, now how do I uninstall this package so I can be sure I am getting
my current development stuff when in "import gdal" in Python?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Apr  6 14:40:17 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9567@mailman.san.com>

Wow, the geos code looks powerful, you should totally integrate it with
OGR.  Thanks a ton for the link!

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, April 06, 2004 11:07 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Center of polygon


Chapman, Martin wrote:
> Frank,
> 
> What is GEOS? Can you point me to the homepage?

Martin,

Is it is a C/C++ port of the Java Topology Suite.  It can be found at:

   http://geos.refractions.net/

It is an opengis simple features geometry based geometry engine.   It is
already used by PostGIS and since it shares a geometry model (though not
the actual object instance format) with OGR I think it should be easy to
integrate it to implement a variety of complex geometry operations for
OGR.

Doing so is on my long term "todo" list.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From hobu at iastate.edu  Tue Apr  6 15:07:05 2004
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Pre-packaged GDAL Binaries
In-Reply-To: <4072F74A.9030300@pobox.com>
References: <4072EEDE.70205@pobox.com>
 <6.0.1.1.2.20040406130200.01d2a570@hobu.mail.iastate.edu>
 <4072F74A.9030300@pobox.com>
Message-ID: <6.0.1.1.2.20040406140517.01d2a570@hobu.mail.iastate.edu>

To uninstall, go to your control panel, and there should be a Python-GDAL 
distutils entry there.  Just click uninstall and you should be done.

And no, now that I think of it, I'm probably not supposed to redestribute 
oci.dll.  Can you just delete it from your install ;)  No, really, I'll 
build up a new one w/o oci when I get a chance.



At 01:30 PM 4/6/2004, you wrote:
>Howard Butler wrote:
>>Frank,
>>I have a Python 2.3 Windows build of GDAL that installs using distutils 
>>available.  It is located at 
>>http://hobu.stat.iastate.edu/gdal-1.1.9win32.exe  Care was taken to make 
>>sure that the GDAL_DATA environment variable is set on import and it 
>>includes support for Oracle Spatial, ECW, netcdf, GML, and PostGIS
>
>Howard,
>
>Cool, I had a vague recollection of this.  I have tried it out on my
>laptop and sure enough - it seems to work!  I am quite impressed with the
>inclusion of OCI (are you really permitted to redistribute oci.dll?) and
>PostGIS support. I have never got the PostGIS client libraries to work
>properly on Win32 though obviously lots of other people have had no problem.
>
>So, umm, now how do I uninstall this package so I can be sure I am getting
>my current development stuff when in "import gdal" in Python?
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


From rmagacho at predialnet.com.br  Tue Apr  6 20:51:39 2004
From: rmagacho at predialnet.com.br (Romano J M Silva)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Georeferencing a tiff file
References: <003101c41bb3$9fc8a800$2520c80a@tf281703> <4072C2FC.3030207@pobox.com>
Message-ID: <00b101c41c3a$7e167b60$2520c80a@tf281703>

Hi Frank,

>
> When you say "I want to georeference it", do you already know the
georeferencing
> or are you wanting to do a tie down in a GUI environment?  If you know the
top

I want to tie down in a GUI environment. I have a scanned image with some
marks that I know the correct world coordinates.

> left corner and pixel spacing you can manually create a corresponding
> "world file" for the file and then use gdal_translate to "apply" that
> world file along with a coordinate system and produce an output file.
>
> For instance, imagine you had a file called raw.tif with 60m x 60m pixels,
and
> a top left corner of 440750m E, 3751290m N in UTM 11 WGS84.  You could
> georeference it by creating a world file called raw.tfw with the following
> in it (six lines):
>
>             60.0000000000
>              0.0000000000
>              0.0000000000
>            -60.0000000000
>         440750.0000000000
>        3751290.0000000000
>
> Then use this gdal_translate command to create a geotiff version with a
> coordinate system.
>
>   gdal_translate -a_srs '+proj=utm +zone=11 +datum=WGS84' raw.tif
geotiff.tif
>

Thanks for this tip. It will be useful too later :-)


Romano


From etdube at globetrotter.net  Wed Apr  7 01:12:55 2004
From: etdube at globetrotter.net (Etienne Dube)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] (OGR) shapelib on ARM Linux bugfix
Message-ID: <200404070112.55707.etdube@globetrotter.net>

Hello everyone,

While developping a GPS mapping app for Qtopia / Opie, I stumbled across a 
problem with the OGR Shapefile driver, occuring only on ARM CPUs (the program 
runs fine on my x86 desktop.) The SHPOpen() function seems to read garbage 
values instead of geographic coordinates from the ESRI shapefile. I was 
suspecting a byte ordering problem with double precision floating point 
values, but the ARM family uses little-endian byte ordering, like x86. The 
catch is, ARMs don't have a numerical coprocessor; floating point operations 
are emulated in software. For some reasons, the FPU emulation in ARM Linux 
uses a rather strange byte-ordering scheme for double precision numbers (see 
http://handhelds.org/hypermail/ipaq/163/16349.html and 
http://handhelds.org/hypermail/ipaq/163/16352.html). Each 32-bit word in the 
64-bit double value is stored little-endian, but the most significative 
32-bit word comes last in memory ("big-wordian").

I had to do a major revamping of shpopen.c in order to add support for ARM. I 
added a few functions to detect the three possible double precision byte 
orders (big-endian, little-endian, and ARM's little-endian/big-wordian) and 
swap the double values according to it. It adds a _slight_ performance hit 
compared to the current implementation of shpopen.c, but this will be 
negligible for virtually all applications.

The modified code was briefly tested on both ARM and x86 systems, I'll do a 
few more tests to see if it doesn't break file writing / creation (no major 
changes were done to the logic of the program, except for things related to 
byte ordering, so it should be all right.) As I don't have a PPC/Sparc 
machine, I didn't do any test to see if it still works with big-endian CPU 
(I'm pretty sure it will.)

I included the patch (diff'ed against the most recent shpopen.c from the OGR 
CVS tree) with this message. Frank, any comments or questions on this? Feel 
free to commit the changes back to the OGR tree.

Etienne
-------------- next part --------------
A non-text attachment was scrubbed...
Name: shpopen.patch
Type: text/x-diff
Size: 29152 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040407/170f77aa/shpopen.bin
From ben at vterrain.org  Wed Apr  7 02:44:10 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Pre-packaged GDAL Binaries
In-Reply-To: <4072EEDE.70205@pobox.com>
Message-ID: <003201c41c6b$bbae57a0$f400fe0a@TOPP2>

> I am now interested in including pointers to various
> pre-packaged binaries available from different source.
> The page is at:
> http://www.remotesensing.org/gdal/download.html
>
> Is anyone aware of other such packagings I should be referencing?

A Windows (brand-new MSVC 7.1) binary release of GDAL 1.2.0 is at:
 http://vterrain.org/dist/gdal-120-ntbin.zip (2.55 MB)

I recommend linking to it, my server can handle the traffic.  It's good to
have a link to GDAL for Windows that doesn't involve the rest of the OpenEV
package.

-Ben


From fniles at mitre.org  Wed Apr  7 14:34:09 2004
From: fniles at mitre.org (Rick Niles)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Any hints on increasing performance?
Message-ID: <407449A1.4070307@mitre.org>

I've written a program to show line-of-sight coverage of various radars 
and aircraft navigation aids such as DME and VOR.  It should also work 
for com links as well.  I used the GDal library for reading in the 
terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The problem is 
performance.  To do all of 48-US states it takes about an hour, which 
may seem quick, but I wanted to make it a web based application that has 
a faster turn-around.

I'm calling GDALRasterIO for one point at a time.  I know that's what 
everyone is going to say that is the bottleneck, but I tried reading all 
the data into arrays and it took 100x longer, because I don't use a 
large chunk of the data and reading it all in was quite time consuming, 
not to mention it used a huge amout of memory.   Also, with the caching 
that GDAL does, it works quite well.  BTW, I coverted the DEM and 
GTOPO30 data in GeoTiff format which helped a whole bunch too.

Anyway, the obvious answer is to just not evaluate as many locations, 
but I just thought I'd ask if someone had a better solution, since that 
effects the accuracy of the results.

I'm working on convincing my employeer to let me release it as 
open-source.   We'll see how that goes.

    Thanks,
    Rick Niles.



From warmerdam at pobox.com  Wed Apr  7 15:21:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Any hints on increasing performance?
In-Reply-To: <407449A1.4070307@mitre.org>
References: <407449A1.4070307@mitre.org>
Message-ID: <407454AC.6020500@pobox.com>

Rick Niles wrote:
> I've written a program to show line-of-sight coverage of various radars 
> and aircraft navigation aids such as DME and VOR.  It should also work 
> for com links as well.  I used the GDal library for reading in the 
> terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The problem is 
> performance.  To do all of 48-US states it takes about an hour, which 
> may seem quick, but I wanted to make it a web based application that has 
> a faster turn-around.
> 
> I'm calling GDALRasterIO for one point at a time.  I know that's what 
> everyone is going to say that is the bottleneck, but I tried reading all 
> the data into arrays and it took 100x longer, because I don't use a 
> large chunk of the data and reading it all in was quite time consuming, 
> not to mention it used a huge amout of memory.   Also, with the caching 
> that GDAL does, it works quite well.  BTW, I coverted the DEM and 
> GTOPO30 data in GeoTiff format which helped a whole bunch too.

Rick,

Can you explain a bit more about what pixels you do need?  Is it always
a particular subset?  If you only need a subset of the data, then you need
to organize your data to support the access strategy.  To help you we will
need to know more about your access strategy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cgn at globexplorer.com  Wed Apr  7 16:00:03 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Any hints on increasing performance?
Message-ID: <71E37EF6B7DCC1499CEA0316A256832801473298@loki.wc.globexplorer.net>

slice/dice the problem for parallel execution on a compute farm ?  

We can exec jobs against >100 CPUs with less than a minute response time, but ... (!) how many users do you want to service concurrently?

Chris

-----Original Message-----
From:	Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent:	Wed 4/7/2004 12:21 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	Re: [Gdal-dev] Any hints on increasing performance?
Rick Niles wrote:
> I've written a program to show line-of-sight coverage of various radars 
> and aircraft navigation aids such as DME and VOR.  It should also work 
> for com links as well.  I used the GDal library for reading in the 
> terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The problem is 
> performance.  To do all of 48-US states it takes about an hour, which 
> may seem quick, but I wanted to make it a web based application that has 
> a faster turn-around.
> 
> I'm calling GDALRasterIO for one point at a time.  I know that's what 
> everyone is going to say that is the bottleneck, but I tried reading all 
> the data into arrays and it took 100x longer, because I don't use a 
> large chunk of the data and reading it all in was quite time consuming, 
> not to mention it used a huge amout of memory.   Also, with the caching 
> that GDAL does, it works quite well.  BTW, I coverted the DEM and 
> GTOPO30 data in GeoTiff format which helped a whole bunch too.

Rick,

Can you explain a bit more about what pixels you do need?  Is it always
a particular subset?  If you only need a subset of the data, then you need
to organize your data to support the access strategy.  To help you we will
need to know more about your access strategy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From ed at topozone.com  Wed Apr  7 17:04:17 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Any hints on increasing performance?
Message-ID: <13858AA1A74F30419F319ACB66A9D1224E41D5@mercator.topozone.com>

Rick -

Could you describe the process/algorithm a bit more?  How many points
are in your data set (that is, how many "radars and aircraft navigation
aids" are involved)?  How are you pruning the data for the curvature of
the Earth - i.e. what portion of the terrain data is used for each
point?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: Rick Niles [mailto:fniles@mitre.org] 
Sent: Wednesday, April 07, 2004 2:34 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Any hints on increasing performance?

I've written a program to show line-of-sight coverage of various radars
and aircraft navigation aids such as DME and VOR.  It should also work
for com links as well.  I used the GDal library for reading in the
terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The problem is
performance.  To do all of 48-US states it takes about an hour, which
may seem quick, but I wanted to make it a web based application that has
a faster turn-around.

I'm calling GDALRasterIO for one point at a time.  I know that's what
everyone is going to say that is the bottleneck, but I tried reading all
the data into arrays and it took 100x longer, because I don't use a
large chunk of the data and reading it all in was quite time consuming, 
not to mention it used a huge amout of memory.   Also, with the caching 
that GDAL does, it works quite well.  BTW, I coverted the DEM and
GTOPO30 data in GeoTiff format which helped a whole bunch too.

Anyway, the obvious answer is to just not evaluate as many locations,
but I just thought I'd ask if someone had a better solution, since that
effects the accuracy of the results.

I'm working on convincing my employeer to let me release it as 
open-source.   We'll see how that goes.

    Thanks,
    Rick Niles.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Apr 13 12:32:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] RemoteSensing.org
Message-ID: <407C160A.6060502@pobox.com>

Folks,

There was a hardware failure late last week on remotesensing.org.  Due to the
heroic efforts of Jeff Largent the web site, cvs and ftp server were brought up on
a preprepared mirror system before the weekend but mailing lists, and bugzilla
were not.  I have just got the mailing lists working (assuming this goes through)
and will look at bugzilla now.

Sorry for the interruption in service.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Apr 13 12:38:03 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] RemoteSensing.org
Message-ID: <ED3A48B9840E594890A2BC172D119465FB956D@mailman.san.com>

Mail server works!

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, April 13, 2004 10:32 AM
To: gdal-dev
Subject: [Gdal-dev] RemoteSensing.org


Folks,

There was a hardware failure late last week on remotesensing.org.  Due
to the heroic efforts of Jeff Largent the web site, cvs and ftp server
were brought up on a preprepared mirror system before the weekend but
mailing lists, and bugzilla were not.  I have just got the mailing lists
working (assuming this goes through) and will look at bugzilla now.

Sorry for the interruption in service.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From rmagacho at predialnet.com.br  Tue Apr 13 13:00:44 2004
From: rmagacho at predialnet.com.br (Romano J M Silva)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Several questions
Message-ID: <407C1CBC.9070003@predialnet.com.br>

Hello all,

I have several questions to ask I tought it would be better to stick
them all in one message,

1) This one I've already sent to the list, but I will try it again Does
anyone know a GUI software to georeference a TIFF image. I have
(pixel,line) and (X,Y) relationship and I want to georeference the image
based on this information.

2) On a paletted image which uses a colortable, is it guaranteed that
the same colortable fits for all its overviews?

3) Is there any documentation of the internals of RasterIO function?
What I am interested to know is how much memory is fetched at once in a
RasterIO operation and what is the effect of loading a non-optimal block.

4) What are tiled images and how can I create one?

5) Is there a way to know the if the image is RGB or CMY without loading
the bands individually, at the dataset level?

6) When getRasterXSize and getRasterBandXSize will generate different
results?

Ufff! That's it. No need to say I am really a newbie at GDAL.

Thanks for any feedback,
Romano Magacho
IMBEL - Rio de Janeiro - BRazil



From warmerdam at pobox.com  Tue Apr 13 13:26:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Several questions
In-Reply-To: <407C1CBC.9070003@predialnet.com.br>
References: <407C1CBC.9070003@predialnet.com.br>
Message-ID: <407C22B2.30600@pobox.com>

Romano J M Silva wrote:
> Hello all,
> 
> I have several questions to ask I tought it would be better to stick
> them all in one message,
> 
> 1) This one I've already sent to the list, but I will try it again Does
> anyone know a GUI software to georeference a TIFF image. I have
> (pixel,line) and (X,Y) relationship and I want to georeference the image
> based on this information.

Romano,

I don't know of a free GUI package to do this. It can be down with the
GCPWorks program from PCI Geometics.  Most other image processing
vendors likely have mechanisms as well.  It can be done at the commandline
with gdal_translate, and in a gui/commandline enviroment with GRASS.

> 2) On a paletted image which uses a colortable, is it guaranteed that
> the same colortable fits for all its overviews?

I believe that paletted images with overviews should use the same palette
for the overviews as the main image.  I wouldn't say it is guaranteed, but
I generally write my application level code to assume that.

> 3) Is there any documentation of the internals of RasterIO function?
> What I am interested to know is how much memory is fetched at once in a
> RasterIO operation and what is the effect of loading a non-optimal block.

There is no such documentation.  Some memory issues are driver specific, but
the general implementation of RasterIO() (which makes cachable block requests
to the low level driver) will read one block request at a time, copy the
data required out into the working buffer (passed in by the user) and then
release that block into the cache.  The caching code will attempt to flush out
the least recently used block if adding a new block puts things over the global
GDAL caching limit.

> 4) What are tiled images and how can I create one?

A tiled images is one where the "block size" or natural unit of access
is less wide than a scanline and less high than the image.  The most common
(non-tiled) image organization is to treat each scanline as a block.  However,
accessing a small window of data is inefficient on a large image with this
organization because so much uneeded scanline data is fetched and ignored.

A tiled image splits the image into smallish squares (often 128x128 or
256x256) so that local read operations can be done efficiently even on very
large images.

> 5) Is there a way to know the if the image is RGB or CMY without loading
> the bands individually, at the dataset level?

No.  I would add that unusual color spaces like CMY and CMYK are not
well supported in GDAL drivers though in theory the high level API is
ready for them.

> 6) When getRasterXSize and getRasterBandXSize will generate different
> results?

The overviews of a band also have GDALRasterBand objects associated with
them.  If you fetch the overview band objects they will have a different
xsize and ysize than the base band or the dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bmarchand at ara.com  Tue Apr 13 14:24:46 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] GDALWarp API: units aren't transfered to the transformed dataset
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A53B7E7AD@user06-machine.sed.ara.com>

Hello,

 

I started using the GDAL warp API to re-project datasets. Certain
elevation grids such as SDTS files have elevation units in feet. This is
correctly captured by the GetUnitType method of the GDALRasterBand
class. However, after the transform the new GDALRasterBand objects do
not have units set. Unless I'm doing something wrong, the units should
be carried over or at least a SetUnitType method should be added. I'm
using the "MEM" driver as the destination dataset driver. 

 

Is there a way to set the units?

 

I'm using GDAL 1.2.0

 

Thanks,

 

Brian

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040413/dbe4898b/attachment.html
From rmagacho at predialnet.com.br  Tue Apr 13 18:15:10 2004
From: rmagacho at predialnet.com.br (Romano J M Silva)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Several questions
References: <407C1CBC.9070003@predialnet.com.br> <407C22B2.30600@pobox.com>
Message-ID: <008201c421a4$c931be10$2520c80a@tf281703>


> There is no such documentation.  Some memory issues are driver specific,
but
> the general implementation of RasterIO() (which makes cachable block
requests
> to the low level driver) will read one block request at a time, copy the
> data required out into the working buffer (passed in by the user) and then
> release that block into the cache.  The caching code will attempt to flush
out
> the least recently used block if adding a new block puts things over the
global
> GDAL caching limit.

What is this caching limit?

>
> > 4) What are tiled images and how can I create one?
>
> A tiled images is one where the "block size" or natural unit of access
> is less wide than a scanline and less high than the image.  The most
common
> (non-tiled) image organization is to treat each scanline as a block.
However,
> accessing a small window of data is inefficient on a large image with this
> organization because so much uneeded scanline data is fetched and ignored.
>

I am commonly loading small window of data in a scanline mode. Is it
possible to  "create" a tiled GeoTiff?

> A tiled image splits the image into smallish squares (often 128x128 or
> 256x256) so that local read operations can be done efficiently even on
very
> large images.
>
>
> > 6) When getRasterXSize and getRasterBandXSize will generate different
> > results?
>
> The overviews of a band also have GDALRasterBand objects associated with
> them.  If you fetch the overview band objects they will have a different
> xsize and ysize than the base band or the dataset.
>

How do I retrieve an overview to get its bands?

Thanks,
Romano


From warmerdam at pobox.com  Tue Apr 13 19:22:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Several questions
In-Reply-To: <008201c421a4$c931be10$2520c80a@tf281703>
References: <407C1CBC.9070003@predialnet.com.br> <407C22B2.30600@pobox.com> <008201c421a4$c931be10$2520c80a@tf281703>
Message-ID: <407C763F.4000105@pobox.com>

Romano J M Silva wrote:
> What is this caching limit?

Romano,

The default caching limit is currently 10MB but was 5MB up until
recently.  It can be controlled by various means, including the
GDAL_CACHE_MAX environment variable (set it to a cache size in bytes).

> I am commonly loading small window of data in a scanline mode. Is it
> possible to  "create" a tiled GeoTiff?

It is possible to create a tiled GeoTIFF.  The following is an example
of using gdal_translate to convert an input file into a tiled GeoTIFF
image.

gdal_translate -of GTiff -co TILED=YES in.tif out.tif

> How do I retrieve an overview to get its bands?

The GDALRasterBand::GetOverview() method can be used to fetch overviews
of a given band.  The GetOverviewCount() method returns the number of overviews
available.  There are C and Python analogs of course.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gabriel at autofax.com.br  Wed Apr 14 10:16:45 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Compiling GDAL
Message-ID: <KJEPJLHMDJEGAFFHMCBECEJCCAAA.gabriel@autofax.com.br>

Hello..

I hope that this list help me...I am needing and it is a bit urgent...

Well.....I am using gdal-1.2.0 in a Debian distribution...

Well I made my ./configure like this:

./configure --with-libtiff=/usr/local --with-geotiff=/usr/local --with-jpeg=
/usr --with-gif=/usr --with-pg=/usr/local/pgsql/bin/pg_config

where libtiff, geotiff and pgsql I have downloaded the source and complied
and installed..

and JPEG, and GIF I used the pre-installed of the Debian via apt-get

well the configure shows the result that I wanted but the make returns a
error that I have no idea to how to solve it...

The error is:
make[2]: Entering directory `/usr/local/src/gdal-1.2.0/frmts/gif'
/bin/sh ../../libtool --mode=compile
g++ -Wall  -O2   -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/in
clude -I/usr/local/include   -I../../port -I../../gcore -I../../ogr -I../../
port  -c -o ../o/gifdataset.o gifdataset.cpp

g++ -Wall -O2 -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/inclu
de -I/usr/local/include -I../../port -I../../gcore -I../../ogr -I../../port 
-c gifdataset.cpp  -fPIC -DPIC -o ../o/.libs/gifdataset.o
gifdataset.cpp: In method `GIFRasterBand::GIFRasterBand(GIFDataset *, int,
SavedImage *, int)':
gifdataset.cpp:214: `struct ExtensionBlock' has no member named `Function'
make[2]: *** [../o/gifdataset.o] Error 1
make[2]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts/gif'
make[1]: *** [gif-install-obj] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts'
make: *** [frmts-target] Error 2

Please....help me....it is a bit urgent...

Thanks

Gabriel Moricz


From dem at acri-st.fr  Wed Apr 14 10:31:03 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
Message-ID: <5.0.2.1.2.20040414154753.00abe340@pop3>

Hi,

I've searched about this in mailing list and found nothing :

I would to know if GDAL architecture is adapted or can be 
modified/adapted/improved to handle rasters
with geolocation from an irregular grid describing lat/lon for each pixel ?

(Maybe this is already handled in drivers such as envisat ? but I cannot 
read Meris RR Geolocation in OpenEV or with gdalinfo...)


Thanks in advance,

Julien


From warmerdam at pobox.com  Wed Apr 14 10:38:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Compiling GDAL
In-Reply-To: <KJEPJLHMDJEGAFFHMCBECEJCCAAA.gabriel@autofax.com.br>
References: <KJEPJLHMDJEGAFFHMCBECEJCCAAA.gabriel@autofax.com.br>
Message-ID: <407D4CFD.7080105@pobox.com>

Gabriel Moricz wrote:
> Hello..
> 
> I hope that this list help me...I am needing and it is a bit urgent...
> 
> Well.....I am using gdal-1.2.0 in a Debian distribution...
> 
> Well I made my ./configure like this:
> 
> ./configure --with-libtiff=/usr/local --with-geotiff=/usr/local --with-jpeg=
> /usr --with-gif=/usr --with-pg=/usr/local/pgsql/bin/pg_config
> 
> where libtiff, geotiff and pgsql I have downloaded the source and complied
> and installed..
> 
> and JPEG, and GIF I used the pre-installed of the Debian via apt-get
> 
> well the configure shows the result that I wanted but the make returns a
> error that I have no idea to how to solve it...
> 
> The error is:
> make[2]: Entering directory `/usr/local/src/gdal-1.2.0/frmts/gif'
> /bin/sh ../../libtool --mode=compile
> g++ -Wall  -O2   -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/in
> clude -I/usr/local/include   -I../../port -I../../gcore -I../../ogr -I../../
> port  -c -o ../o/gifdataset.o gifdataset.cpp
> 
> g++ -Wall -O2 -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/inclu
> de -I/usr/local/include -I../../port -I../../gcore -I../../ogr -I../../port 
> -c gifdataset.cpp  -fPIC -DPIC -o ../o/.libs/gifdataset.o
> gifdataset.cpp: In method `GIFRasterBand::GIFRasterBand(GIFDataset *, int,
> SavedImage *, int)':
> gifdataset.cpp:214: `struct ExtensionBlock' has no member named `Function'
> make[2]: *** [../o/gifdataset.o] Error 1
> make[2]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts/gif'
> make[1]: *** [gif-install-obj] Error 2
> make[1]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts'
> make: *** [frmts-target] Error 2

Gabriel,

I believe you will just have to use the internal libgif or configure GDAL
without it.  The GDAL higher level code requires some stuff from a quite
recent version of the library ... apparently newer than what you have
installed via apt-get anyways.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 14 10:43:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <5.0.2.1.2.20040414154753.00abe340@pop3>
References: <5.0.2.1.2.20040414154753.00abe340@pop3>
Message-ID: <407D4E09.60504@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> I've searched about this in mailing list and found nothing :
> 
> I would to know if GDAL architecture is adapted or can be 
> modified/adapted/improved to handle rasters
> with geolocation from an irregular grid describing lat/lon for each pixel ?
> 
> (Maybe this is already handled in drivers such as envisat ? but I cannot 
> read Meris RR Geolocation in OpenEV or with gdalinfo...)

Julien,

GDAL can transport a set of many ground control points for geolocation.  They
may be regular (as would occur with the geolocation grid from something like
Envisat) or irregular as would occur with user collected control points.
However, there are no mechanisms in GDAL to make really effective use of
large number of geolocation ground control points.  The polynomial
transformation stuff is only good up to 3rd order.  Having a huge density
of control points to feed that isn't really worthwhile.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gabriel at autofax.com.br  Wed Apr 14 10:48:46 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <407D4CFD.7080105@pobox.com>
Message-ID: <KJEPJLHMDJEGAFFHMCBEKEJDCAAA.gabriel@autofax.com.br>

Thanks Frank...


Well....If I install it without Gif, what will happen later when I install
MapServer...

Does MapServer requires gdal with GIF???

Thanks..


Gabriel Moricz

-----Mensagem original-----
De: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]Em nome de Frank Warmerdam
Enviada em: quarta-feira, 14 de abril de 2004 11:39
Para: gdal-dev@remotesensing.org
Assunto: Re: [Gdal-dev] Compiling GDAL


Gabriel Moricz wrote:
> Hello..
>
> I hope that this list help me...I am needing and it is a bit urgent...
>
> Well.....I am using gdal-1.2.0 in a Debian distribution...
>
> Well I made my ./configure like this:
>
>
./configure --with-libtiff=/usr/local --with-geotiff=/usr/local --with-jpeg=
> /usr --with-gif=/usr --with-pg=/usr/local/pgsql/bin/pg_config
>
> where libtiff, geotiff and pgsql I have downloaded the source and complied
> and installed..
>
> and JPEG, and GIF I used the pre-installed of the Debian via apt-get
>
> well the configure shows the result that I wanted but the make returns a
> error that I have no idea to how to solve it...
>
> The error is:
> make[2]: Entering directory `/usr/local/src/gdal-1.2.0/frmts/gif'
> /bin/sh ../../libtool --mode=compile
>
g++ -Wall  -O2   -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/in
>
clude -I/usr/local/include   -I../../port -I../../gcore -I../../ogr -I../../
> port  -c -o ../o/gifdataset.o gifdataset.cpp
>
>
g++ -Wall -O2 -I/usr -I/usr/include -I/usr -I/usr/include -I/usr/local/inclu
>
de -I/usr/local/include -I../../port -I../../gcore -I../../ogr -I../../port
> -c gifdataset.cpp  -fPIC -DPIC -o ../o/.libs/gifdataset.o
> gifdataset.cpp: In method `GIFRasterBand::GIFRasterBand(GIFDataset *, int,
> SavedImage *, int)':
> gifdataset.cpp:214: `struct ExtensionBlock' has no member named `Function'
> make[2]: *** [../o/gifdataset.o] Error 1
> make[2]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts/gif'
> make[1]: *** [gif-install-obj] Error 2
> make[1]: Leaving directory `/usr/local/src/gdal-1.2.0/frmts'
> make: *** [frmts-target] Error 2

Gabriel,

I believe you will just have to use the internal libgif or configure GDAL
without it.  The GDAL higher level code requires some stuff from a quite
recent version of the library ... apparently newer than what you have
installed via apt-get anyways.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Apr 14 11:05:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <KJEPJLHMDJEGAFFHMCBEKEJDCAAA.gabriel@autofax.com.br>
References: <KJEPJLHMDJEGAFFHMCBEKEJDCAAA.gabriel@autofax.com.br>
Message-ID: <407D5331.1000201@pobox.com>

Gabriel Moricz wrote:
> Thanks Frank...
> 
> 
> Well....If I install it without Gif, what will happen later when I install
> MapServer...
> 
> Does MapServer requires gdal with GIF???

Gabriel,

MapServer generally uses the GIF support that comes with GD.  However, lack
of GDAL gif support might gum up use of remote WMS layers delivered as GIF
which, I think, go through GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gabriel at autofax.com.br  Wed Apr 14 11:16:23 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <407D5331.1000201@pobox.com>
Message-ID: <KJEPJLHMDJEGAFFHMCBEGEJFCAAA.gabriel@autofax.com.br>

I did not get it...

Well...

I pretend to use mapserver with gd, proj, gdal, ogr, wmsclient, postgis,
wms, wfsclient, httpd..

Well...Do u think that I will have problems if I compile GDAL without gif???


Sry..I am a begginer with this service...


Thanks..

Gabriel Moricz



-----Mensagem original-----
De: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]Em nome de Frank Warmerdam
Enviada em: quarta-feira, 14 de abril de 2004 12:05
Para: gdal-dev@remotesensing.org
Assunto: Re: RES: [Gdal-dev] Compiling GDAL


Gabriel Moricz wrote:
> Thanks Frank...
>
>
> Well....If I install it without Gif, what will happen later when I install
> MapServer...
>
> Does MapServer requires gdal with GIF???

Gabriel,

MapServer generally uses the GIF support that comes with GD.  However, lack
of GDAL gif support might gum up use of remote WMS layers delivered as GIF
which, I think, go through GDAL.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Apr 14 11:25:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <KJEPJLHMDJEGAFFHMCBEGEJFCAAA.gabriel@autofax.com.br>
References: <KJEPJLHMDJEGAFFHMCBEGEJFCAAA.gabriel@autofax.com.br>
Message-ID: <407D57E9.4000301@pobox.com>

Gabriel Moricz wrote:
> I did not get it...
> 
> Well...
> 
> I pretend to use mapserver with gd, proj, gdal, ogr, wmsclient, postgis,
> wms, wfsclient, httpd..
> 
> Well...Do u think that I will have problems if I compile GDAL without gif???
> 
> 
> Sry..I am a begginer with this service...

Gabriel,

If you are not using other WMS servers as input to your MapServer you should
not have any problems using a GDAL built without gif support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gabriel at autofax.com.br  Wed Apr 14 11:45:29 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <407D57E9.4000301@pobox.com>
Message-ID: <KJEPJLHMDJEGAFFHMCBEMEJGCAAA.gabriel@autofax.com.br>

Thanks Frank...

I will use without Gif, and let gd serve Gif for MapServer...

Well...is GDAL the one whose compiles OGR???

How can I do it???is it just compile and install GDAL???

Thanks..


Gabriel Moricz

-----Mensagem original-----
De: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]Em nome de Frank Warmerdam
Enviada em: quarta-feira, 14 de abril de 2004 12:25
Para: gdal-dev@remotesensing.org
Assunto: Re: RES: RES: [Gdal-dev] Compiling GDAL


Gabriel Moricz wrote:
> I did not get it...
>
> Well...
>
> I pretend to use mapserver with gd, proj, gdal, ogr, wmsclient, postgis,
> wms, wfsclient, httpd..
>
> Well...Do u think that I will have problems if I compile GDAL without
gif???
>
>
> Sry..I am a begginer with this service...

Gabriel,

If you are not using other WMS servers as input to your MapServer you should
not have any problems using a GDAL built without gif support.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From gabriel at autofax.com.br  Wed Apr 14 12:12:31 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <407D57E9.4000301@pobox.com>
Message-ID: <KJEPJLHMDJEGAFFHMCBEAEJICAAA.gabriel@autofax.com.br>

Hello Frank...

Well...I have compiled GDAL, and now trying to compile MapServer...

well it gave a error like always

My configure Was:
./configure --with-gd=/usr/local --with-proj=/usr/local --with-gdal=/usr/loc
al/bin/gdal-config --with-ogr=/usr/local/bin/gdal-config --with-curl-config=
/usr/local/bin --with-wmsclient --with-ming --with-postgis=/usr/local/pgsql/
bin/pg_config --with-wms --with-wfsclient --with-httpd=/usr/sbin/apache

the mapserver error is very big:
./libmap.a(mapgdal.o): In function `msGDALInitialize':
mapgdal.o(.text+0x10): undefined reference to `GDALAllRegister'
mapgdal.o(.text+0x18): undefined reference to `CPLQuietErrorHandler'
mapgdal.o(.text+0x1d): undefined reference to `CPLPushErrorHandler'
./libmap.a(mapgdal.o): In function `msGDALCleanup':
mapgdal.o(.text+0x40): undefined reference to `GDALDestroyDriverManager'
./libmap.a(mapgdal.o): In function `msSaveImageGDAL':
mapgdal.o(.text+0x1c9): undefined reference to `GDALGetDriverByName'
mapgdal.o(.text+0x202): undefined reference to `GDALCreate'
mapgdal.o(.text+0x25f): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x3a6): undefined reference to `GDALRasterIO'
mapgdal.o(.text+0x3ff): undefined reference to `GDALCreateColorTable'
mapgdal.o(.text+0x493): undefined reference to `GDALSetColorEntry'
mapgdal.o(.text+0x4bb): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x4c4): undefined reference to `GDALSetRasterColorTable'
mapgdal.o(.text+0x4cd): undefined reference to `GDALDestroyColorTable'
mapgdal.o(.text+0x4ed): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x4f6): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x50c): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x515): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x52e): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x537): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x557): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x560): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x570): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x579): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x58c): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x595): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x5a5): undefined reference to `GDALGetRasterBand'
mapgdal.o(.text+0x5ae): undefined reference to
`GDALSetRasterColorInterpretation'
mapgdal.o(.text+0x60d): undefined reference to `GDALSetGeoTransform'
mapgdal.o(.text+0x637): undefined reference to `GDALSetProjection'
mapgdal.o(.text+0x640): undefined reference to `VSIFree'
mapgdal.o(.text+0x658): undefined reference to `GDALGetDriverByName'
mapgdal.o(.text+0x670): undefined reference to `GDALClose'
mapgdal.o(.text+0x6da): undefined reference to `GDALCreateCopy'
mapgdal.o(.text+0x6fe): undefined reference to `GDALClose'
mapgdal.o(.text+0x706): undefined reference to `CPLGetLastErrorMsg'
mapgdal.o(.text+0x73e): undefined reference to `GDALClose'
mapgdal.o(.text+0x747): undefined reference to `GDALClose'
./libmap.a(mapgdal.o): In function `msInitDefaultGDALOutputFormat':
mapgdal.o(.text+0x82b): undefined reference to `GDALGetDriverByName'
mapgdal.o(.text+0x85c): undefined reference to `GDALGetMetadataItem'
mapgdal.o(.text+0x873): undefined reference to `GDALGetMetadataItem'
mapgdal.o(.text+0x8ba): undefined reference to `GDALGetMetadataItem'
mapgdal.o(.text+0x8d4): undefined reference to `GDALGetMetadataItem'
mapgdal.o(.text+0x8f3): undefined reference to `GDALGetMetadataItem'
./libmap.a(mapgdal.o)(.text+0x90d): more undefined references to
`GDALGetMetadataItem' follow
./libmap.a(mapgdal.o): In function `msProjectionObjToWKT':
mapgdal.o(.text+0x980): undefined reference to `CPLMalloc'
mapgdal.o(.text+0x9d8): undefined reference to `OSRNewSpatialReference'
mapgdal.o(.text+0x9e4): undefined reference to `OSRImportFromProj4'
mapgdal.o(.text+0x9f2): undefined reference to `VSIFree'
mapgdal.o(.text+0xa06): undefined reference to `OSRExportToWkt'
mapgdal.o(.text+0xa12): undefined reference to `OSRDestroySpatialReference'
./libmap.a(mapraster.o): In function `msDrawRasterLayerLow':
mapraster.o(.text+0x3dd5): undefined reference to `GDALClose'
mapraster.o(.text+0x4181): undefined reference to `GDALOpen'
mapraster.o(.text+0x41bf): undefined reference to `GDALGetProjectionRef'
mapraster.o(.text+0x4286): undefined reference to `GDALGetGeoTransform'
mapraster.o(.text+0x42bc): undefined reference to `GDALReadWorldFile'
mapraster.o(.text+0x43c4): undefined reference to `GDALClose'
./libmap.a(mapogr.o): In function
`msOGRSpatialRef2ProjectionObj(OGRSpatialReference *, projectionObj *,
int)':
mapogr.o(.text+0x4d): undefined reference to
`OGRSpatialReference::IsLocal(void) const'
mapogr.o(.text+0x6c): undefined reference to
`OGRSpatialReference::exportToProj4(char **) const'
mapogr.o(.text+0xaa): undefined reference to `VSIFree'
mapogr.o(.text+0xe1): undefined reference to `VSIFree'
./libmap.a(mapogr.o): In function `msOGCWKT2ProjectionObj':
mapogr.o(.text+0x111): undefined reference to
`OGRSpatialReference::OGRSpatialReference(char const *)'
mapogr.o(.text+0x121): undefined reference to
`OGRSpatialReference::importFromWkt(char **)'
mapogr.o(.text+0x147): undefined reference to
`OGRSpatialReference::~OGRSpatialReference(void)'
mapogr.o(.text+0x16a): undefined reference to
`OGRSpatialReference::~OGRSpatialReference(void)'
mapogr.o(.text+0x181): undefined reference to
`OGRSpatialReference::~OGRSpatialReference(void)'
./libmap.a(mapresample.o): In function `msResampleGDALToMap':
mapresample.o(.text+0xd38): undefined reference to `GDALGetGeoTransform'
mapresample.o(.text+0xd4b): undefined reference to `GDALGetDescription'
mapresample.o(.text+0xd67): undefined reference to `GDALGetDescription'
mapresample.o(.text+0xd70): undefined reference to `GDALReadWorldFile'
mapresample.o(.text+0xd7f): undefined reference to `GDALGetRasterXSize'
mapresample.o(.text+0xd91): undefined reference to `GDALGetRasterYSize'
mapresample.o(.text+0x11aa): undefined reference to `CSLDuplicate'
mapresample.o(.text+0x12a6): undefined reference to `CPLSPrintf'
mapresample.o(.text+0x12b8): undefined reference to `CSLSetNameValue'
mapresample.o(.text+0x13f9): undefined reference to `CSLDestroy'
./libmap.a(mapdrawgdal.o): In function `msDrawRasterLayerGDAL':
mapdrawgdal.o(.text+0xa5): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0xbf): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0xe8): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x118): undefined reference to `GDALGetRasterXSize'
mapdrawgdal.o(.text+0x12a): undefined reference to `GDALGetRasterYSize'
mapdrawgdal.o(.text+0x149): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x16d): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x173): undefined reference to `CSLTokenizeString'
mapdrawgdal.o(.text+0x19a): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x1b4): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0x1c5): undefined reference to `CSLDestroy'
mapdrawgdal.o(.text+0x26b): undefined reference to `CSLDestroy'
mapdrawgdal.o(.text+0x296): undefined reference to `GDALGetGeoTransform'
mapdrawgdal.o(.text+0x2af): undefined reference to `GDALGetDescription'
mapdrawgdal.o(.text+0x2b8): undefined reference to `GDALReadWorldFile'
mapdrawgdal.o(.text+0x5e6): undefined reference to `GDALGetRasterXSize'
mapdrawgdal.o(.text+0x647): undefined reference to `GDALGetRasterXSize'
mapdrawgdal.o(.text+0x6b6): undefined reference to `GDALGetRasterYSize'
mapdrawgdal.o(.text+0x717): undefined reference to `GDALGetRasterYSize'
mapdrawgdal.o(.text+0x959): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x975): undefined reference to `GDALGetRasterCount'
mapdrawgdal.o(.text+0x98e): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x994): undefined reference to
`GDALGetRasterColorInterpretation'
mapdrawgdal.o(.text+0x9b2): undefined reference to `GDALGetRasterCount'
mapdrawgdal.o(.text+0x9dc): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x9fd): undefined reference to `GDALGetRasterColorTable'
mapdrawgdal.o(.text+0xa4b): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0xa54): undefined reference to
`CSLTokenizeStringComplex'
mapdrawgdal.o(.text+0xa5f): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0xa87): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0xac6): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0xafc): undefined reference to `CSLDestroy'
mapdrawgdal.o(.text+0xb4d): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0xbb9): undefined reference to `GDALGetDataTypeSize'
mapdrawgdal.o(.text+0xc24): undefined reference to `GDALRasterIO'
mapdrawgdal.o(.text+0xc35): undefined reference to `CPLGetLastErrorMsg'
mapdrawgdal.o(.text+0xdb5): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0xdce): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0xde7): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0xe2e): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0xe5e): undefined reference to `GDALGetRasterColorTable'
mapdrawgdal.o(.text+0xe74): undefined reference to `GDALCloneColorTable'
mapdrawgdal.o(.text+0xe89): undefined reference to `GDALCreateColorTable'
mapdrawgdal.o(.text+0xee0): undefined reference to `GDALSetColorEntry'
mapdrawgdal.o(.text+0xf43): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0xf5c): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0xfb5): undefined reference to `GDALGetColorEntryAsRGB'
mapdrawgdal.o(.text+0x113c): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0x1155): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0x11a9): undefined reference to `GDALGetColorEntryAsRGB'
mapdrawgdal.o(.text+0x1285): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0x129e): undefined reference to `GDALGetColorEntryCount'
mapdrawgdal.o(.text+0x12f5): undefined reference to `GDALGetColorEntryAsRGB'
mapdrawgdal.o(.text+0x18bb): undefined reference to `CSLFetchBoolean'
mapdrawgdal.o(.text+0x1ebd): undefined reference to `GDALDestroyColorTable'
./libmap.a(mapdrawgdal.o): In function `LoadGDALImage':
mapdrawgdal.o(.text+0x1f04): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x1f33): undefined reference to `CSLFetchNameValue'
mapdrawgdal.o(.text+0x1f4f): undefined reference to
`CSLTokenizeStringComplex'
mapdrawgdal.o(.text+0x1f5a): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0x1f85): undefined reference to `CSLCount'
mapdrawgdal.o(.text+0x1fd6): undefined reference to `CSLDestroy'
mapdrawgdal.o(.text+0x200f): undefined reference to `GDALRasterIO'
mapdrawgdal.o(.text+0x2024): undefined reference to `CPLGetLastErrorMsg'
mapdrawgdal.o(.text+0x207e): undefined reference to `GDALRasterIO'
mapdrawgdal.o(.text+0x2094): undefined reference to `CPLGetLastErrorMsg'
./libmap.a(mapdrawgdal.o): In function `Dither24to8':
mapdrawgdal.o(.text+0x2339): undefined reference to `GDALGetDriverByName'
mapdrawgdal.o(.text+0x235e): undefined reference to `GDALCreate'
mapdrawgdal.o(.text+0x2387): undefined reference to `CSLSetNameValue'
mapdrawgdal.o(.text+0x2398): undefined reference to `GDALAddBand'
mapdrawgdal.o(.text+0x23bb): undefined reference to `CSLSetNameValue'
mapdrawgdal.o(.text+0x23c9): undefined reference to `GDALAddBand'
mapdrawgdal.o(.text+0x23ec): undefined reference to `CSLSetNameValue'
mapdrawgdal.o(.text+0x23fd): undefined reference to `GDALAddBand'
mapdrawgdal.o(.text+0x2420): undefined reference to `CSLSetNameValue'
mapdrawgdal.o(.text+0x242e): undefined reference to `GDALAddBand'
mapdrawgdal.o(.text+0x243a): undefined reference to `CSLDestroy'
mapdrawgdal.o(.text+0x2444): undefined reference to `GDALCreateColorTable'
mapdrawgdal.o(.text+0x24ca): undefined reference to `GDALSetColorEntry'
mapdrawgdal.o(.text+0x24ef): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x24fe): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x250d): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x251c): undefined reference to `GDALGetRasterBand'
mapdrawgdal.o(.text+0x2525): undefined reference to `GDALDitherRGB2PCT'
mapdrawgdal.o(.text+0x2537): undefined reference to `GDALDestroyColorTable'
mapdrawgdal.o(.text+0x2540): undefined reference to `GDALClose'
collect2: ld returned 1 exit status
make: *** [shp2img] Error 1


Do u have any idea why does it happened???

Thanks...


Gabriel Moricz



-----Mensagem original-----
De: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]Em nome de Frank Warmerdam
Enviada em: quarta-feira, 14 de abril de 2004 12:25
Para: gdal-dev@remotesensing.org
Assunto: Re: RES: RES: [Gdal-dev] Compiling GDAL


Gabriel Moricz wrote:
> I did not get it...
>
> Well...
>
> I pretend to use mapserver with gd, proj, gdal, ogr, wmsclient, postgis,
> wms, wfsclient, httpd..
>
> Well...Do u think that I will have problems if I compile GDAL without
gif???
>
>
> Sry..I am a begginer with this service...

Gabriel,

If you are not using other WMS servers as input to your MapServer you should
not have any problems using a GDAL built without gif support.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Apr 14 12:20:41 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <KJEPJLHMDJEGAFFHMCBEMEJGCAAA.gabriel@autofax.com.br>
References: <KJEPJLHMDJEGAFFHMCBEMEJGCAAA.gabriel@autofax.com.br>
Message-ID: <407D64D9.6060803@pobox.com>

Gabriel Moricz wrote:
> Thanks Frank...
> 
> I will use without Gif, and let gd serve Gif for MapServer...
> 
> Well...is GDAL the one whose compiles OGR???
> 
> How can I do it???is it just compile and install GDAL???

Gabriel,

Building and installing GDAL normally will include OGR support within
the same shared library / DLL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 14 12:23:54 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <KJEPJLHMDJEGAFFHMCBEAEJICAAA.gabriel@autofax.com.br>
References: <KJEPJLHMDJEGAFFHMCBEAEJICAAA.gabriel@autofax.com.br>
Message-ID: <407D659A.7000603@pobox.com>

Gabriel Moricz wrote:
> Hello Frank...
> 
> Well...I have compiled GDAL, and now trying to compile MapServer...
> 
> well it gave a error like always
> 
> My configure Was:
> ./configure --with-gd=/usr/local --with-proj=/usr/local --with-gdal=/usr/loc
> al/bin/gdal-config --with-ogr=/usr/local/bin/gdal-config --with-curl-config=
> /usr/local/bin --with-wmsclient --with-ming --with-postgis=/usr/local/pgsql/
> bin/pg_config --with-wms --with-wfsclient --with-httpd=/usr/sbin/apache
> 
> the mapserver error is very big:
> ./libmap.a(mapgdal.o): In function `msGDALInitialize':
> mapgdal.o(.text+0x10): undefined reference to `GDALAllRegister'
> mapgdal.o(.text+0x18): undefined reference to `CPLQuietErrorHandler'
...
> Do u have any idea why does it happened???

Gabriel,

I would suggest we take this off the gdal-dev list.

BTW, you omitted the all important link line from just before the link
errors.  I would imagine that the GDAL library was not included for
some reason.  It would be helpful for you to indicate:

  o what does "/usr/local/bin/gdal-config --libs" report?
  o what link line was used by MapServer?
  o What version of MapServer are you using?  4.0.2 includes a configuration
    related fix for GDAL 1.2.0 compatibility.

Don't be too scared of the MapServer Makefile.  You can always edit it
after the configure to fix things up a bit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fniles at mitre.org  Wed Apr 14 12:35:40 2004
From: fniles at mitre.org (Rick Niles)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: Any hints on increasing performance?
Message-ID: <407D685C.1070209@mitre.org>

Rick Niles wrote:

>> I've written a program to show line-of-sight coverage of various radars 
>> and aircraft navigation aids such as DME and VOR.  It should also work 
>> for com links as well.  I used the GDal library for reading in the 
>> terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The problem is 
>> performance.  To do all of 48-US states it takes about an hour, which 
>> may seem quick, but I wanted to make it a web based application that has 
>> a faster turn-around.
>> 
>> I'm calling GDALRasterIO for one point at a time.  I know that's what 
>> everyone is going to say that is the bottleneck, but I tried reading all 
>> the data into arrays and it took 100x longer, because I don't use a 
>> large chunk of the data and reading it all in was quite time consuming, 
>> not to mention it used a huge amout of memory.   Also, with the caching 
>> that GDAL does, it works quite well.  BTW, I coverted the DEM and 
>> GTOPO30 data in GeoTiff format which helped a whole bunch too.
>  
>

> Can you explain a bit more about what pixels you do need?  Is it always
> a particular subset?  If you only need a subset of the data, then you need
> to organize your data to support the access strategy.  To help you we will
> need to know more about your access strategy.


Sure, it's quite simple actually:

For each grid point to evaluate
  For each site (usu. about 1000 sites)
    For each point on line connecting the site to the grid point
       Get the elevation and check if we're less than it.

Each grid point represents a user location at a give altitude.  The curvature of the Earth it very important
to include when calculating the effective altitude along the line.  My original goal was to produce output on the
same scale as the input data (i.e. 3 arc-second), but since it's so slow I've had to do 1 arc-minute as the default
and it's still takes about an hour to process the whole U.S.

99% of time is taken calculating indexes to reference the data.  So it's a bit indepdent of if I use GDal cache or read in the data ahead of time.
Unless I could somehow simpilify the index calculation scheme.

Another algorithm used the concept of sectors from each site and only 12 or some log space
points in each sector to evaluate, but I didn't like that because it didn't use the coordinates of
the actual data, but instead latitude/longitude calculated to fit into this polar view from each site.
Also, since it only checked 12 or so points a big hill could be missed.



From ed at topozone.com  Wed Apr 14 13:46:18 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: Any hints on increasing performance?
Message-ID: <13858AA1A74F30419F319ACB66A9D1224E428B@mercator.topozone.com>

Rick -

What I don't quite understand is whether you're filtering out points
that can't possibly be visible.  That is, something like:

For each grid point to evaluate
  For each site
    Examine grid point elevation, site elevation, and distance
      Discard the site if the Earth's curvature and grid/site
      elevations show that the point would not be visible even
      if the Earth were flat.

My question is whether you're doing this or have considered it.
Presumably most of the sites can be quickly rejected for any given grid
point because they can't possibly be visible; if the "sites" are
actually high above the Earth this might not help very much.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: Rick Niles [mailto:fniles@mitre.org] 
Sent: Wednesday, April 14, 2004 12:36 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Re: Any hints on increasing performance?

Rick Niles wrote:

>> I've written a program to show line-of-sight coverage of various 
>> radars and aircraft navigation aids such as DME and VOR.  It should 
>> also work for com links as well.  I used the GDal library for reading

>> in the terrain data (DTED Level 1, USGS DEM, or GTOPO30).  The 
>> problem is performance.  To do all of 48-US states it takes about an 
>> hour, which may seem quick, but I wanted to make it a web based 
>> application that has a faster turn-around.
>> 
>> I'm calling GDALRasterIO for one point at a time.  I know that's what

>> everyone is going to say that is the bottleneck, but I tried reading 
>> all the data into arrays and it took 100x longer, because I don't use

>> a large chunk of the data and reading it all in was quite time
consuming,
>> not to mention it used a huge amout of memory.   Also, with the
caching 
>> that GDAL does, it works quite well.  BTW, I coverted the DEM and 
>> GTOPO30 data in GeoTiff format which helped a whole bunch too.
>  
>

> Can you explain a bit more about what pixels you do need?  Is it 
> always a particular subset?  If you only need a subset of the data, 
> then you need to organize your data to support the access strategy.  
> To help you we will need to know more about your access strategy.


Sure, it's quite simple actually:

For each grid point to evaluate
  For each site (usu. about 1000 sites)
    For each point on line connecting the site to the grid point
       Get the elevation and check if we're less than it.

Each grid point represents a user location at a give altitude.  The
curvature of the Earth it very important to include when calculating the
effective altitude along the line.  My original goal was to produce
output on the same scale as the input data (i.e. 3 arc-second), but
since it's so slow I've had to do 1 arc-minute as the default and it's
still takes about an hour to process the whole U.S.

99% of time is taken calculating indexes to reference the data.  So it's
a bit indepdent of if I use GDal cache or read in the data ahead of
time.
Unless I could somehow simpilify the index calculation scheme.

Another algorithm used the concept of sectors from each site and only 12
or some log space points in each sector to evaluate, but I didn't like
that because it didn't use the coordinates of the actual data, but
instead latitude/longitude calculated to fit into this polar view from
each site.
Also, since it only checked 12 or so points a big hill could be missed.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From gabriel at autofax.com.br  Wed Apr 14 13:52:52 2004
From: gabriel at autofax.com.br (Gabriel Moricz)
Date: Wed Nov 21 11:49:08 2007
Subject: RES: RES: RES: RES: [Gdal-dev] Compiling GDAL
In-Reply-To: <407D659A.7000603@pobox.com>
Message-ID: <KJEPJLHMDJEGAFFHMCBEIEJLCAAA.gabriel@autofax.com.br>

Sorry Frank...

do u have any e-mail that I can ask directly for u???

But..well...teh answer about the questions

  o what does "/usr/local/bin/gdal-config --libs" report?
	-L/usr/local/lib -lgdal
  o what link line was used by MapServer?
      Well...I did not find it...u mean the -lgdal, dont u??
  o What version of MapServer are you using?  4.0.2 includes a configuration
    related fix for GDAL 1.2.0 compatibility.
      MapServer = 4.0.2 and GDAL=1.2.0


And the error before the "undefined reference to..." is:
gcc -c -O2  -Wall -DIGNORE_MISSING_DATA  -DUSE_EPPL -DUSE_PROJ -DUSE_PROJ_AP
I_H -DUSE_WMS_SVR -DUSE_WMS_LYR   -DUSE_MING_FLASH  -DUSE_TIFF -DUSE_JPEG -D
USE_GD_PNG -DUSE_GD_JPEG -DUSE_GD_WBMP -DUSE_GD_FT -DUSE_PDF   -DUSE_GDAL -D
USE_POSTGIS    -I/usr/local/include  -I/usr/local/include        -I/usr/loca
l/include -I/usr/local/pgsql/include  -I/usr/local/include   shp2img.c -o
shp2img.o
gcc -O2  -Wall -DIGNORE_MISSING_DATA  -DUSE_EPPL -DUSE_PROJ -DUSE_PROJ_API_H
 -DUSE_WMS_SVR -DUSE_WMS_LYR   -DUSE_MING_FLASH  -DUSE_TIFF -DUSE_JPEG -DUSE
_GD_PNG -DUSE_GD_JPEG -DUSE_GD_WBMP -DUSE_GD_FT -DUSE_PDF   -DUSE_GDAL -DUSE
_POSTGIS    -I/usr/local/include  -I/usr/local/include        -I/usr/local/i
nclude -I/usr/local/pgsql/include  -I/usr/local/include

hp2img.o  -L. -lmap -L/usr/local/lib -lgd -ljpeg -lfreetype -lpng -lz   -lpd
f -ltiff -ljpeg -lfreetype -lpng -lz   -L/usr/local/lib -lproj -ljpeg    -lm
ing -L/usr/local/pgsql/lib -lpq  -L/usr/local/lib -lcurl -lssl -lcrypto -ldl
 -lz    -lm   -o shp2img
./libmap.a(mapgdal.o): In function `msGDALInitialize':

And sorry...about send it in this list...please, if u can, coucd u help me
by personal e-mail???


Very Thanks

Gabriel Moricz


-----Mensagem original-----
De: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]Em nome de Frank Warmerdam
Enviada em: quarta-feira, 14 de abril de 2004 13:24
Para: gdal-dev@remotesensing.org
Assunto: Re: RES: RES: RES: [Gdal-dev] Compiling GDAL


Gabriel Moricz wrote:
> Hello Frank...
>
> Well...I have compiled GDAL, and now trying to compile MapServer...
>
> well it gave a error like always
>
> My configure Was:
>
./configure --with-gd=/usr/local --with-proj=/usr/local --with-gdal=/usr/loc
>
al/bin/gdal-config --with-ogr=/usr/local/bin/gdal-config --with-curl-config=
>
/usr/local/bin --with-wmsclient --with-ming --with-postgis=/usr/local/pgsql/
> bin/pg_config --with-wms --with-wfsclient --with-httpd=/usr/sbin/apache
>
> the mapserver error is very big:
> ./libmap.a(mapgdal.o): In function `msGDALInitialize':
> mapgdal.o(.text+0x10): undefined reference to `GDALAllRegister'
> mapgdal.o(.text+0x18): undefined reference to `CPLQuietErrorHandler'
...
> Do u have any idea why does it happened???

Gabriel,

I would suggest we take this off the gdal-dev list.

BTW, you omitted the all important link line from just before the link
errors.  I would imagine that the GDAL library was not included for
some reason.  It would be helpful for you to indicate:

  o what does "/usr/local/bin/gdal-config --libs" report?
  o what link line was used by MapServer?
  o What version of MapServer are you using?  4.0.2 includes a configuration
    related fix for GDAL 1.2.0 compatibility.

Don't be too scared of the MapServer Makefile.  You can always edit it
after the configure to fix things up a bit.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Wed Apr 14 17:18:42 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] win32 binary gdal distribution
Message-ID: <407DAAB2.3070702@gov.yk.ca>

Hi Ben,

Thank you for building and hosting a standalone win32 binary release of 
the gdal utilities. Attached are my changes to the SETUP_GDAL.BAT which 
make it a little more informative. Maybe some people will find it useful.

I've also created a one liner to launch the html docs:

%gdal_dir%\bin\gd-help.bat:
    @start %gdal_dir%\html\index.html

of course before this will work someone will need to include the html 
docs in the distribution.... ;-)


cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------

-------------- next part --------------
@echo off

set GDAL_VER=120
set GDAL_DIR=c:\utils\gdal%GDAL_VER%

if exist %GDAL_DIR%\SETUP_GDAL.BAT goto DIROK

echo -----------------------------------------------------------------------
echo It appears that the GDAL_DIR environment variable is not set properly
echo in SETUP_GDAL.BAT.  Please edit GDAL_SETUP.BAT, and modify the GDAL_DIR
echo variable to contain the directory containing the SETUP_GDAL.BAT ... the
echo base directory of the unzipped GDAL tree.
echo -----------------------------------------------------------------------

goto Done

:DIROK

set PATH=%GDAL_DIR%\bin;%PATH%
set INCLUDE=%GDAL_DIR%\include;%INCLUDE%
set LIB=%GDAL_DIR%\include;%LIB%
set PYTHONPATH=%GDAL_DIR%\pymod;%PYTHONPATH%
set GEOTIFF_CSV=%GDAL_DIR%\data

echo -----------------------------------------------------------------------
echo  Environment is set for GDAL Utilites v%GDAL_VER%.
echo.
echo  Info: %GDAL_DIR%\html\index.html
echo.
echo  Available commands:
for %%a in (%GDAL_DIR%\bin\*.exe %GDAL_DIR%\bin\*.bat) do echo		%%~na
echo -----------------------------------------------------------------------

:Done
From ben at vterrain.org  Wed Apr 14 18:00:43 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] win32 binary gdal distribution
In-Reply-To: <407DAAB2.3070702@gov.yk.ca>
Message-ID: <007c01c4226b$ef399570$f400fe0a@TOPP2>

Matt,

'SETUP_GDAL.BAT' is vestigial, it was included by accident as i was using an
old script of Frank's.  IMHO it's not useful since it would have to be (1)
edited once for every installation, then (2) run every time you open a shell
on Windows... far better to simply put the GDAL bin dir on your path, a
one-time operation.

-Ben

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Matt Wilkie
> Sent: Wednesday, April 14, 2004 5:19 PM
> To: vtp-general; gdal-dev@remotesensing.org
> Subject: [Gdal-dev] win32 binary gdal distribution
> 
> Hi Ben,
> 
> Thank you for building and hosting a standalone win32 binary 
> release of the gdal utilities. Attached are my changes to the 
> SETUP_GDAL.BAT which make it a little more informative. Maybe
> some people will find it useful.


From matt.wilkie at gov.yk.ca  Wed Apr 14 19:43:47 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] win32 binary gdal distribution
In-Reply-To: <007c01c4226b$ef399570$f400fe0a@TOPP2>
References: <007c01c4226b$ef399570$f400fe0a@TOPP2>
Message-ID: <407DCCB3.7010604@gov.yk.ca>

Ben Discoe wrote:

> Matt,
> 
> 'SETUP_GDAL.BAT' is vestigial, it was included by accident as i was 
> using an old script of Frank's.  IMHO it's not useful since it would
> have to be (1) edited once for every installation, then (2) run every
> time you open a shell on Windows... far better to simply put the GDAL
> bin dir on your path, a one-time operation.

1) unfortunately, yeah. at least it's only one line though.

2) If you CALL the batchfile from autoexec.bat you don't need to run it 
for every shell. Adding the gdal\bin directory to path is insufficient; 
the other variables need to be set as well (I think? they used to be 
necessary anyway).

I guess I like the batch file approach because I find the tiny dialog 
Windows gives you for adding and changing environment variables hard to 
use. I find it easier to edit a file. rebooting sucks big-time though 
((I believe there is a mechanism to run specified batch files everytime 
cmd.exe is started, obviating reboots, but I've never been suffciently 
motivated to track the procedure down.))


-matt



From ben at vterrain.org  Wed Apr 14 21:05:22 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] win32 binary gdal distribution
In-Reply-To: <407DCCB3.7010604@gov.yk.ca>
Message-ID: <009801c42285$ba8b42a0$f400fe0a@TOPP2>

> -----Original Message-----
> From: Matt Wilkie
> 
> Ben Discoe wrote:
> 
> > IMHO it's not useful since it would
> > have to be (1) edited once for every installation
>
> 1) unfortunately, yeah. at least it's only one line though.

I think this is around the same bother as adding GDAL to the path, and..

> > (2) run every time you open a shell on Windows...
> > far better to simply put the GDAL
> > bin dir on your path, a one-time operation.
> 
> 2) If you CALL the batchfile from autoexec.bat you don't
> need to run it for every shell.

That's an interesting idea; i hadn't thought of that DOS legacy thing for
years.  Can you actually set environment variables there, which are then set
through the whole OS?

..for the purposes of installing any apps (e.g. VTP) which use GDAL, it has
to be added to the path anyway - a batch file run from a shell won't do it,
since it can't affect the system path.

> Adding the gdal\bin directory to path is insufficient; 
> the other variables need to be set as well (I think?
> they used to be necessary anyway).

Not really.  The important one is GDAL_DATA (GEOTIFF_CSV) which, again, must
be set for the whole system; a script to set it in one shell window isn't
much use.

> I guess I like the batch file approach because I find
> the tiny dialog Windows gives you for adding and
> changing environment variables hard to use.

It's awful, but it's one of those grit-and-bear-it things about Windows.

> rebooting sucks big-time though 
> ((I believe there is a mechanism to run specified batch files 
> everytime cmd.exe is started, obviating reboots,

Alas it won't obviate the reboot when the path/data vars need to be set for
apps using GDAL.

-Ben


From fulton at cmu.edu  Wed Apr 14 22:32:08 2004
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
Message-ID: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu>

For GDAL 1.2.0 Python linking fails on OS X as usual with:

g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle  
.libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o  
-L/opt/local/lib /opt/local/lib/libdl.dylib 
/opt/local/lib/libjpeg.dylib ../.libs/libgdal.dylib
ld: Undefined symbols:
_PyArg_Parse
_PyArg_ParseTuple
_PyDict_New
...

I've found that running the above command with "-framework Python" 
fixes this error, however, I can't find how to add "-framework Python" 
to that build command through the make or autoconf files.

The configure log shows a PYTHON_LINK variable whose value contains 
"-framework ${PYTHONFRAMEWORK}" but it doesn't seem to be used 
anywhere.

How do I pass "-framework Python" to the build command?

Also, is there a way to specify more than one location for Python 
headers and libs without mucking about in the configure script? Setting 
the PYTHON_INCLUDE environment variable seems to have no effect on 
configure.


Thanks.

	Sean


From alexamici at fastwebnet.it  Thu Apr 15 04:02:18 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu>
Message-ID: <200404151002.18884.alexamici@fastwebnet.it>

Sean,

On Thursday 15 April 2004 04:32, Sean Fulton wrote:
> I've found that running the above command with "-framework Python"
> fixes this error, however, I can't find how to add "-framework Python"
> to that build command through the make or autoconf files.
>
> The configure log shows a PYTHON_LINK variable whose value contains
> "-framework ${PYTHONFRAMEWORK}" but it doesn't seem to be used
> anywhere.
>
> How do I pass "-framework Python" to the build command?

ok, finally i understand what is going on on MacOS X. i'll try to fix the 
configure/make system ASAP. it is not strightforward, but it can be done ;).

> Also, is there a way to specify more than one location for Python
> headers and libs without mucking about in the configure script? Setting
> the PYTHON_INCLUDE environment variable seems to have no effect on
> configure.

i'll have a look at that also. in the mean time: the correct name for the 
variable is PYTHON_INCLUDES, can that be the problem?

thanks very much for your report! 
alessandro

From warmerdam at pobox.com  Thu Apr 15 15:01:02 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] GDALWarp API: units aren't transfered to the transformed
 dataset
In-Reply-To: <B3CB5AFD4126584AB4CF3DD45B267A53B7E7AD@user06-machine.sed.ara.com>
References: <B3CB5AFD4126584AB4CF3DD45B267A53B7E7AD@user06-machine.sed.ara.com>
Message-ID: <407EDBEE.3030205@pobox.com>

Brian Marchand wrote:
> Hello,
> 
>  
> 
> I started using the GDAL warp API to re-project datasets. Certain 
> elevation grids such as SDTS files have elevation units in feet. This is 
> correctly captured by the GetUnitType method of the GDALRasterBand 
> class. However, after the transform the new GDALRasterBand objects do 
> not have units set. Unless I?m doing something wrong, the units should 
> be carried over or at least a SetUnitType method should be added. I?m 
> using the ?MEM? driver as the destination dataset driver.

Brian,

You are correct, the logic for creating a new file in gdalwarp.cpp only
copies the color table over from the source. No effort is made to copy
metadata, or other auxilary information like the units type.  The
convenience function GDALCreateAndReprojectImage() does not even copy the
color table.

Furthermore, the "special" data items UnitType, Offset and Scale do not even
have set methods on the GDALRasterBand class, so you can't even copy them
yourself.

I have modified the MEM and VRT drivers to have custom set methods for these
items, and the CreateCopy() method on the VRT driver will now clone this
information from a source dataset and preserve it in the XML VRT file.

However, that doesn't really help you much.  I don't really have much advice
other than that you will likely need to keep track of this stuff yourself
by some means.   You can now manually copy UnitType to a MEM dataset if you
include memdataset.h if that helps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From David.Schulze at delorme.com  Thu Apr 15 15:38:09 2004
From: David.Schulze at delorme.com (David Schulze)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] GDAL 1.1.9 in VC.NET 2003
Message-ID: <EAE3C16DFB15D611BF6400C00D003ABD010A3F3B@nepal.delorme.com>

Has anyone built GDAL 1.1.9 in VC.NET 2003?  
I'm asking to see if there are any know issues with doing this, or some
reason to move up to GDAL 1.2.0.  

Is the version of Jasper I use with GDAL dependent on the GDAL version?

I just created a build using the VC.NET 2003 compiler/linker with version
1.1.9 of GDAL, and Xerces 2.5.0, and Jasper 1.700.5
The code I am using it with was build with the Multi-Threaded DLL C-Runtime
(\MD and \MDd compiler options)
So I rebuilt Jasper and GDAL with those settings.  I ran into a strange
error when creating a debug build where the resulting GDAL DLL had both the
debug and non-debug versions of MSVCRT linked into it.  This was causing
runtime asserts.  The only way I found to fix this was to explicitly tell
the linker to ignore the non-debug version of MSVCRT.  Has anyone seen this
before and could possibly shed more light on it for me?


Thanks

David M. Schulze
(207) 846-7111 x2482
david.schulze@delorme.com

DeLorme Publishing
2 DeLorme Dr
Yarmouth, ME, USA
www.delorme.com


From MChapman at sanz.com  Thu Apr 15 16:37:47 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] GDAL 1.1.9 in VC.NET 2003
Message-ID: <ED3A48B9840E594890A2BC172D119465FB9572@mailman.san.com>

David,

I have.  It compiled flawlessly for me when I did it about 4 or 5 months
ago.
  
Martin 


-----Original Message-----
From: David Schulze [mailto:David.Schulze@delorme.com] 
Sent: Thursday, April 15, 2004 1:38 PM
To: 'gdal-dev@remotesensing.org'
Subject: [Gdal-dev] GDAL 1.1.9 in VC.NET 2003


Has anyone built GDAL 1.1.9 in VC.NET 2003?  
I'm asking to see if there are any know issues with doing this, or some
reason to move up to GDAL 1.2.0.  

Is the version of Jasper I use with GDAL dependent on the GDAL version?

I just created a build using the VC.NET 2003 compiler/linker with
version 1.1.9 of GDAL, and Xerces 2.5.0, and Jasper 1.700.5 The code I
am using it with was build with the Multi-Threaded DLL C-Runtime (\MD
and \MDd compiler options) So I rebuilt Jasper and GDAL with those
settings.  I ran into a strange error when creating a debug build where
the resulting GDAL DLL had both the debug and non-debug versions of
MSVCRT linked into it.  This was causing runtime asserts.  The only way
I found to fix this was to explicitly tell the linker to ignore the
non-debug version of MSVCRT.  Has anyone seen this before and could
possibly shed more light on it for me?


Thanks

David M. Schulze
(207) 846-7111 x2482
david.schulze@delorme.com

DeLorme Publishing
2 DeLorme Dr
Yarmouth, ME, USA
www.delorme.com

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From George.Dinardo at drdc-rddc.gc.ca  Thu Apr 15 17:45:38 2004
From: George.Dinardo at drdc-rddc.gc.ca (Dinardo, George)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate
Message-ID: <DFBBA0601F40D611AFF600508BB2F0EF028D0DFD@ottawaex.drdc-rddc.gc.ca>

We have started to use the gdal_translate utility as delivered through
OPENEV.  We want to convert georeferenced SAR imagery data (CEOS) to NITF
format, but are experiencing some problems. GeoTiff works well. Are there
examples or help on which options we need to create an NITF format file.

Thanks

From alexamici at fastwebnet.it  Thu Apr 15 17:53:07 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <200404151002.18884.alexamici@fastwebnet.it>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404151002.18884.alexamici@fastwebnet.it>
Message-ID: <200404152353.08457.alexamici@fastwebnet.it>

Sean,

On Thursday 15 April 2004 10:02, Alessandro Amici wrote:
> ok, finally i understand what is going on on MacOS X. i'll try to fix the
> configure/make system ASAP. it is not strightforward, but it can be done
> ;).

mmm, looks like things are harder than i thought along this route :(. i 
couldn't beat the python build into submission, yet.

however, this is what i wrote in january when the macosx link problem was 
reported for the first time:

> the build of the gdal python module has always been fragile, and it has 
> became a real hack since the libtool transition (my fault, admittedly). 
> IMHO the  only hope to get out of the current mess is to use the distutils 
> infrastructure, that hopefully will take care of the OSX problem as well.  
>
> so i refreshed what looked like an abandoned setup.py in the top directory.  
> current gdal cvs builds and installs fine on linux with:
> $ ./configure <...> --without-python 
> $ make 
> $ python setup.py build
> $ python setup.py install

it still works on linux. could you test if it works on MacOS X as well?

thanks,
alessandro

From tan_meng_howe at yahoo.co.uk  Thu Apr 15 23:00:12 2004
From: tan_meng_howe at yahoo.co.uk (=?iso-8859-1?q?Tan=20Meng=20Howe?=)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Error 4 problem
Message-ID: <20040416030012.5256.qmail@web25103.mail.ukl.yahoo.com>

Hi all,

I was trying out gdal with jasper (both are the latest
version downloadable from gdal website) on windows XP
using VC6. I was able to compile successful. However,
when I tried to use the gdal_translate program to
convert from a tif to a jpeg2000, I got the following
error:

Error 4: 'test.jp2' not recognised as a supported file
format. 

I had also tried writing a DLL that call the GDAL DLL.
When I tried to execute my DLL (using a java program
through JNI), I got the same error when I tried to use
the GDALOpen function to load a tif file.

I suspected that I need to tweak some compiler setting
to solve the problem. Have anyone here face this
problem before and manage to solve it? Thanks. 

PS: I am pretty new to VC6 and is not familar with the settings.


	
	
		
____________________________________________________________
Yahoo! Messenger - Communicate instantly..."Ping" 
your friends today! Download Messenger Now 
http://uk.messenger.yahoo.com/download/index.html

From warmerdam at pobox.com  Fri Apr 16 01:27:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate (NITF export)
In-Reply-To: <DFBBA0601F40D611AFF600508BB2F0EF028D0DFD@ottawaex.drdc-rddc.gc.ca>
References: <DFBBA0601F40D611AFF600508BB2F0EF028D0DFD@ottawaex.drdc-rddc.gc.ca>
Message-ID: <407F6ECB.2090509@pobox.com>

Dinardo, George wrote:
> We have started to use the gdal_translate utility as delivered through
> OPENEV.  We want to convert georeferenced SAR imagery data (CEOS) to NITF
> format, but are experiencing some problems. GeoTiff works well. Are there
> examples or help on which options we need to create an NITF format file.

George,

What pixel type is the CEOS data?  I don't know that I have ever tested
producing complex (as in real+imaginary) NITF files with GDAL so I wouldn't
be surprised if that caused problems.  Also, I believe GDAL will currently only
produce output files with nice affine geotransforms.  If you are working with
un-rectified CEOS SAR data you will likely not be able to export the
georeferencing properly to NITF with the existing GDAL NITF driver.

I notice that the NITF driver does *not* report the full set of creation
options available.  In effect many of the "metadata" header fields can be set
via creation options.  I believe all the lines shown below using the "OVR"
macro can be set via creation options.

     PLACE (achHeader+  0, FDHR_FVER,    "NITF02.10"                     );
     OVR( 2,achHeader+  9, CLEVEL,       "05"                            );
     PLACE (achHeader+ 11, STYPE        ,"BF01"                          );
     OVR(10,achHeader+ 15, OSTAID       ,"GDAL"                          );
     OVR(14,achHeader+ 25, FDT          ,"20021216151629"                );
     OVR(80,achHeader+ 39, FTITLE       ,""                              );
     OVR( 1,achHeader+119, FSCLAS       ,"U"                             );
     OVR( 2,achHeader+120, FSCLSY       ,""                              );
     OVR(11,achHeader+122, FSCODE       ,""                              );
     OVR( 2,achHeader+133, FSCTLH       ,""                              );
     OVR(20,achHeader+135, FSREL        ,""                              );
     OVR( 2,achHeader+155, FSDCTP       ,""                              );
     OVR( 8,achHeader+157, FSDCDT       ,""                              );
     OVR( 4,achHeader+165, FSDCXM       ,""                              );
     OVR( 1,achHeader+169, FSDG         ,""                              );
     OVR( 8,achHeader+170, FSDGDT       ,""                              );
     OVR(43,achHeader+178, FSCLTX       ,""                              );
     OVR( 1,achHeader+221, FSCATP       ,""                              );
     OVR(40,achHeader+222, FSCAUT       ,""                              );
     OVR( 1,achHeader+262, FSCRSN       ,""                              );
     OVR( 8,achHeader+263, FSSRDT       ,""                              );
     OVR(15,achHeader+271, FSCTLN       ,""                              );
     OVR( 5,achHeader+286, FSCOP        ,"00000"                         );
     OVR( 5,achHeader+291, FSCPYS       ,"00000"                         );
     PLACE (achHeader+296, ENCRYP       ,"0"                             );
     achHeader[297] = achHeader[298] = achHeader[299] = 0x00; /* FBKGC */
     OVR(24,achHeader+300, ONAME        ,""                              );
     OVR(18,achHeader+324, OPHONE       ,""                              );
     PLACE (achHeader+342, FL           ,"????????????"                  );
     PLACE (achHeader+354, HL           ,"000404"                        );
     PLACE (achHeader+360, NUMI         ,"001"                           );
     PLACE (achHeader+363, LISH1        ,"??????"                        );
     PLACE (achHeader+369, LI1          ,CPLSPrintf("%010d",nImageSize)  );
     PLACE (achHeader+379, NUMS         ,"000"                           );
     PLACE (achHeader+382, NUMX         ,"000"                           );
     PLACE (achHeader+385, NUMT         ,"000"                           );
     PLACE (achHeader+388, NUMDES       ,"000"                           );
     PLACE (achHeader+391, NUMRES       ,"000"                           );
     PLACE (achHeader+394, UDHDL        ,"00000"                         );
     PLACE (achHeader+399, XHDL         ,"00000"                         );

/* -------------------------------------------------------------------- */
/*      Prepare the image header.                                       */
/* -------------------------------------------------------------------- */
     pachIMHDR = achHeader + 404;

     PLACE (pachIMHDR+  0, IM           , "IM"                           );
     OVR(10,pachIMHDR+  2, HD1          , "Missing"                      );
     OVR(14,pachIMHDR+ 12, IDATIM       , "20021216151629"               );
     OVR(17,pachIMHDR+ 26, TGTID        , ""                             );
     OVR(80,pachIMHDR+ 43, IID2         , ""                             );
     OVR( 1,pachIMHDR+123, ISCLAS       , "U"                            );
     OVR( 2,pachIMHDR+124, ISCLSY       , ""                             );
     OVR(11,pachIMHDR+126, ISCODE       , ""                             );
     OVR( 2,pachIMHDR+137, ISCTLH       , ""                             );
     OVR(20,pachIMHDR+139, ISREL        , ""                             );
     OVR( 2,pachIMHDR+159, ISDCTP       , ""                             );
     OVR( 8,pachIMHDR+161, ISDCDT       , ""                             );
     OVR( 4,pachIMHDR+169, ISDCXM       , ""                             );
     OVR( 1,pachIMHDR+173, ISDG         , ""                             );
     OVR( 8,pachIMHDR+174, ISDGDT       , ""                             );
     OVR(43,pachIMHDR+182, ISCLTX       , ""                             );
     OVR( 1,pachIMHDR+225, ISCATP       , ""                             );
     OVR(40,pachIMHDR+226, ISCAUT       , ""                             );
     OVR( 1,pachIMHDR+266, ISCRSN       , ""                             );
     OVR( 8,pachIMHDR+267, ISSRDT       , ""                             );
     OVR(15,pachIMHDR+275, ISCTLN       , ""                             );
     PLACE (pachIMHDR+290, ENCRYP       , "0"                            );
     OVR(42,pachIMHDR+291, ISORCE       , "Unknown"                      );
     PLACE (pachIMHDR+333, NROWS        , CPLSPrintf("%08d", nLines)     );
     PLACE (pachIMHDR+341, NCOLS        , CPLSPrintf("%08d", nPixels)    );
     PLACE (pachIMHDR+349, PVTYPE       , pszPVType                      );
     PLACE (pachIMHDR+352, IREP         , pszIREP                        );
     OVR( 8,pachIMHDR+360, ICAT         , "VIS"                          );
     OVR( 2,pachIMHDR+368, ABPP         , CPLSPrintf("%02d",nBitsPerSample) );
     OVR( 1,pachIMHDR+370, PJUST        , "R"                            );
     OVR( 1,pachIMHDR+371, ICORDS       , " "                            );

The name (as per the NITF specs) to set the options are the third column
above.  For instance, to set ONAME and OPHONE you might do:

   gdal_translate -co "ONAME=Frank Warmerdam" -co OPHONE=9057800450 in.tif out.ntf

Do you have a sample input file you would like to be able to translate?
What problems are you seeing with the output file. I would be willing to
make some improvements to the GDAL NITF writing support if you need it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Apr 16 01:33:06 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Error 4 problem
In-Reply-To: <20040416030012.5256.qmail@web25103.mail.ukl.yahoo.com>
References: <20040416030012.5256.qmail@web25103.mail.ukl.yahoo.com>
Message-ID: <407F7012.90500@pobox.com>

Tan Meng Howe wrote:
> Hi all,
> 
> I was trying out gdal with jasper (both are the latest
> version downloadable from gdal website) on windows XP
> using VC6. I was able to compile successful. However,
> when I tried to use the gdal_translate program to
> convert from a tif to a jpeg2000, I got the following
> error:
> 
> Error 4: 'test.jp2' not recognised as a supported file
> format. 

Hi,

Is the newest version the nightly snapshot or the 1.2.0
release.  Did you also build with ECW support?  I just ask
because the current CVS code will always try the ECW DLL
for JPEG2000 files even if using an older ECW DLL without jpeg2000
support.

Does gdalinfo work on existing jpeg2000 files?  Does the new
jpeg2000 file seem OK?  Can anything else view it?  Does the JPEG2000
format driver show up if you try "gdalinfo --formats"?

> I had also tried writing a DLL that call the GDAL DLL.
> When I tried to execute my DLL (using a java program
> through JNI), I got the same error when I tried to use
> the GDALOpen function to load a tif file.
> 
> I suspected that I need to tweak some compiler setting
> to solve the problem. Have anyone here face this
> problem before and manage to solve it? Thanks. 

My first guess would be that the JPEG2000 driver isn't being registered.
But if you can create the jpeg2000 files with gdal_translate then that
isn't the issue.  You might need to provide additional details.  You also
might want to put a few printf() calls in JPEG2000Dataset::Open() just before
and after the jas_stream_fopen() call to see that things are even getting to
the right spot.   That is in the gdal/frmts/jpeg2000/jpeg2000dataset.cpp
file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From xqcheng at supresoft.com.cn  Fri Apr 16 01:31:36 2004
From: xqcheng at supresoft.com.cn (xqcheng)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Some limitation of GDAL
Message-ID: <005b01c42374$17d39fe0$267072ca@Supresoft.wh>

1.limited support for pixel unit,I donnot know the size of a pixel 
  ,This will limit the use of GDAL in photogrammetry region.
2. limited support for CMYK image
Best regards
CXQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040416/d0351d5e/attachment.html
From warmerdam at pobox.com  Fri Apr 16 01:49:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Some limitation of GDAL
In-Reply-To: <005b01c42374$17d39fe0$267072ca@Supresoft.wh>
References: <005b01c42374$17d39fe0$267072ca@Supresoft.wh>
Message-ID: <407F73DC.9080603@pobox.com>

xqcheng wrote:
> 1.limited support for pixel unit,I donnot know the size of a pixel
>   ,This will limit the use of GDAL in photogrammetry region.

xqcheng,

GDAL has not explicit support for photogrammetry geometry models.  This
means that uncorrected airphotos will be treated just as raw images by
GDAL and no mensuration or similar tasks can be done on the image.  Of
course, a "rectified" airphoto is no problem with GDAL.

> 2. limited support for CMYK image

This is true, but fairly easily corrected.  Can you provide details
of where you have encountered problems?  What improvements you see as
needed?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mathieu_gdal at yahoo.fr  Fri Apr 16 04:30:56 2004
From: mathieu_gdal at yahoo.fr (Mathieu)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <407D4E09.60504@pobox.com>
Message-ID: <000b01c4238d$27a14da0$3b00000a@informatiquemer.fr>

Hello,

Frank, you say that the "polynomial transformation stuff" (I guess you are
talking about the functions defined in gdal_crs.c) will work well only up to
3rd order. Could you please develop a litlle this assertion?

- What is the relationship between the number of control points, and the
"optimal" order? (For example, I notice that using order 3 with only 5 GCPs
is not good. When should I begin to use order 3 instead of 1 or 2?) 

- Is there, in practice, a maximum limit of number of control points, when
using 3rd order? 

- In partice again, why not using order 4? In the case of geo-referencing a
chart (which is very specific, from the mathematician point of view), for
example, is it proved that order 4 should be banished?

Mat

-----Message d'origine-----
De?: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] De la part de Frank Warmerdam
Envoy??: mercredi 14 avril 2004 16:43
??: gdal-dev@remotesensing.org
Objet?: Re: [Gdal-dev] Irregular geolocation grid

Julien Demaria wrote:
> Hi,
> 
> I've searched about this in mailing list and found nothing :
> 
> I would to know if GDAL architecture is adapted or can be 
> modified/adapted/improved to handle rasters
> with geolocation from an irregular grid describing lat/lon for each pixel
?
> 
> (Maybe this is already handled in drivers such as envisat ? but I cannot 
> read Meris RR Geolocation in OpenEV or with gdalinfo...)

Julien,

GDAL can transport a set of many ground control points for geolocation.
They
may be regular (as would occur with the geolocation grid from something like
Envisat) or irregular as would occur with user collected control points.
However, there are no mechanisms in GDAL to make really effective use of
large number of geolocation ground control points.  The polynomial
transformation stuff is only good up to 3rd order.  Having a huge density
of control points to feed that isn't really worthwhile.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From mathieu_gdal at yahoo.fr  Fri Apr 16 05:21:26 2004
From: mathieu_gdal at yahoo.fr (Mathieu)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB9564@mailman.san.com>
Message-ID: <000e01c42394$33afaea0$3b00000a@informatiquemer.fr>

Martin,

Thank you for the "center of polygon" algorithm.

Could you please describe the pExtents parameter in the GetCenter method? 
In the code, it looks like you expect a 4 elements array. What mean those 4
values?

When displaying a polygon's label, it is important to take care of the
position of the polygon in the screen. That's why, I think, the
OGRPolygonLabelPoint (MITAB driver) is not enough for displaying a label.

Does your algorithm take accound of this "screen clipping" problem? (maybe
pExtent is related with that??)

Mat





-----Message d'origine-----
De?: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] De la part de Chapman, Martin
Envoy??: lundi 5 avril 2004 22:40
??: gdal-dev@remotesensing.org
Objet?: RE: [Gdal-dev] Center of polygon

Bruce,

No problem, it's not perfect but it is pretty good for a starting point.
It will position 99 percent of the labels correctly.  If you improve it
or make bug fixes send me the code please.  If you have questions let me
know too. 

Martin

-----Original Message-----
From: Clay, Bruce [mailto:bclay@ball.com] 
Sent: Monday, April 05, 2004 2:22 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Center of polygon


Martin:
  Many thanks a for the code.

Bruce
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From fulton at cmu.edu  Fri Apr 16 12:04:07 2004
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <200404152353.08457.alexamici@fastwebnet.it>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404151002.18884.alexamici@fastwebnet.it> <200404152353.08457.alexamici@fastwebnet.it>
Message-ID: <B0CFD490-8FBF-11D8-920D-003065D5F140@cmu.edu>

On Apr 15, 2004, at 5:53 PM, Alessandro Amici wrote:

>
> Sean,
>
> On Thursday 15 April 2004 10:02, Alessandro Amici wrote:
>> ok, finally i understand what is going on on MacOS X. i'll try to fix 
>> the
>> configure/make system ASAP. it is not strightforward, but it can be 
>> done
>> ;).
>
> mmm, looks like things are harder than i thought along this route :(. i
> couldn't beat the python build into submission, yet.
>
> however, this is what i wrote in january when the macosx link problem 
> was
> reported for the first time:
>
>> the build of the gdal python module has always been fragile, and it 
>> has
>> became a real hack since the libtool transition (my fault, 
>> admittedly).
>> IMHO the  only hope to get out of the current mess is to use the 
>> distutils
>> infrastructure, that hopefully will take care of the OSX problem as 
>> well.
>>
>> so i refreshed what looked like an abandoned setup.py in the top 
>> directory.
>> current gdal cvs builds and installs fine on linux with:
>> $ ./configure <...> --without-python
>> $ make
>> $ python setup.py build
>> $ python setup.py install
>
> it still works on linux. could you test if it works on MacOS X as well?
>

I'll try to give it a shot this weekend. Thanks for your attention to 
this. The closer I get it to working the more frustrating it becomes! 
And I don't even use Python. :)

By the way, are there any test scripts for GDAL to make sure everything 
is indeed working properly?

> thanks,
> alessandro
>
>

Thank you, Alessandro,

	Sean


From MChapman at sanz.com  Fri Apr 16 12:28:15 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Center of polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AE0@mailman.san.com>

Mathieu,

The pExtent parameter is the bounding rect for the polygon you want the center point of.  For instance, if you had a layer of French provinces, each province would be separate polygon.  To calculate the center point of each province polygon you would pass in the vertices of the polygon as the xPoints and yPoints and then also the extents of the province polygon.  The four values in the pExtents vector are the upper left and lower right points of the bounding rect (nUpperLeftLat, nUpperLeftLon, nLowerRightLat, nLowerRightLon).  I use the extents for understanding what quadrant of xy space the polygon is in.  

As far as screen clipping goes I am using OpenGl to render all my vector graphics and it handles clipping objects from the viewport.  What graphics library are you using to display the vectors?  I use OpenGL's glProject() and glUnProject() functions to convert from screen coordinates to world coordinates and vice versa. 

Something to think about is that when calculating the label for a country like Russia (which is spread across most of the x space (-180 - 180), you probably only want to put the label on the large polygons that make up the country (region).  For that, what I do is first call CalculateProjectedArea() for each polygon in a country and then calculate labels for geographic areas that are greater than n size.  That way, for a country like Canada, you don't have a label for every little island, just the main land areas...does this make sense?

Hope this helps.  If I know what graphics library you are using I can give you more specific answers to your problem of rendering labels.  What issues are you experiencing?  Let me know if you have more questions.

Martin

P.S.  Are you in France?  My niece is in Paris right now and she says she loves it there.  


-----Original Message-----
From: Mathieu [mailto:mathieu_gdal@yahoo.fr] 
Sent: Friday, April 16, 2004 3:21 AM
To: gdal-dev@remotesensing.org
Subject: RE : [Gdal-dev] Center of polygon


Martin,

Thank you for the "center of polygon" algorithm.

Could you please describe the pExtents parameter in the GetCenter method? 
In the code, it looks like you expect a 4 elements array. What mean those 4 values?

When displaying a polygon's label, it is important to take care of the position of the polygon in the screen. That's why, I think, the OGRPolygonLabelPoint (MITAB driver) is not enough for displaying a label.

Does your algorithm take accound of this "screen clipping" problem? (maybe pExtent is related with that??)

Mat





-----Message d'origine-----
De?: gdal-dev-admin@remotesensing.org [mailto:gdal-dev-admin@remotesensing.org] De la part de Chapman, Martin Envoy??: lundi 5 avril 2004 22:40 ??: gdal-dev@remotesensing.org Objet?: RE: [Gdal-dev] Center of polygon

Bruce,

No problem, it's not perfect but it is pretty good for a starting point. It will position 99 percent of the labels correctly.  If you improve it or make bug fixes send me the code please.  If you have questions let me know too. 

Martin

-----Original Message-----
From: Clay, Bruce [mailto:bclay@ball.com] 
Sent: Monday, April 05, 2004 2:22 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Center of polygon


Martin:
  Many thanks a for the code.

Bruce
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org http://remotesensing.org/mailman/listinfo/gdal-dev

From dataduplex at hotmail.com  Fri Apr 16 13:48:22 2004
From: dataduplex at hotmail.com (Mahesh Chittur)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] NOAA-16 AVHRR
Message-ID: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com>

Hi,
I haven't used much of gdal. I have this NOAA 16 AVHRR dataset. Is it 
possible to read this data using gdal from GRASS; or is there any other 
program thats can read NOAA-16 AVHRR data ( Unix version of the program).

Thankx for the help in advance

-Mahesh.

_________________________________________________________________
Easiest Money Transfer to India. Send Money To 6000 Indian Towns. 
http://go.msnserver.com/IN/42198.asp Easiest Way To Send Money Home!


From jgallagher at gso.uri.edu  Fri Apr 16 14:56:35 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] NOAA-16 AVHRR
In-Reply-To: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com>
References: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com>
Message-ID: <1082141794.11709.837.camel@comet.dods.org>

On Fri, 2004-04-16 at 11:48, Mahesh Chittur wrote:
> Hi,
> I haven't used much of gdal. I have this NOAA 16 AVHRR dataset. Is it 
> possible to read this data using gdal from GRASS; or is there any other 
> program thats can read NOAA-16 AVHRR data ( Unix version of the program).
> 
> Thankx for the help in advance

Mahesh,

I doubt this is much help for your specific dataset, but there is quite
a bit of avhrr data available over the net through the DODS and NVODS
projects. There is also a DODS/OPeNDAP driver for gdal. You could point
that code at any of avhrr data in DODS/NVODS. Write me if you'd like
more info.

James
> 
> -Mahesh.
> 
> _________________________________________________________________
> Easiest Money Transfer to India. Send Money To 6000 Indian Towns. 
> http://go.msnserver.com/IN/42198.asp Easiest Way To Send Money Home!
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From alexamici at fastwebnet.it  Fri Apr 16 14:58:00 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <B0CFD490-8FBF-11D8-920D-003065D5F140@cmu.edu>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404152353.08457.alexamici@fastwebnet.it> <B0CFD490-8FBF-11D8-920D-003065D5F140@cmu.edu>
Message-ID: <200404162058.00505.alexamici@fastwebnet.it>

Sean,

On Friday 16 April 2004 18:04, Sean Fulton wrote:
> By the way, are there any test scripts for GDAL to make sure everything
> is indeed working properly?

not that i know of.

Frank? do you have any testing toolkit?

cheers,
alessnadro

From warmerdam at pobox.com  Fri Apr 16 15:04:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <200404162058.00505.alexamici@fastwebnet.it>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404152353.08457.alexamici@fastwebnet.it> <B0CFD490-8FBF-11D8-920D-003065D5F140@cmu.edu> <200404162058.00505.alexamici@fastwebnet.it>
Message-ID: <40802E59.9080305@pobox.com>

Alessandro Amici wrote:
> Sean,
> 
> On Friday 16 April 2004 18:04, Sean Fulton wrote:
> 
>>By the way, are there any test scripts for GDAL to make sure everything
>>is indeed working properly?
> 
> 
> not that i know of.
> 
> Frank? do you have any testing toolkit?

Sean / Alessandro,

Yes, there is a test suite for GDAL.  If you check osrs/gdalautotest out
of the remotesensing.org CVS server, cd into it and run "run_test.py" an
extensive but far from comprehensive test suite will be run.  This depends
on having the GDAL python support working smoothly.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dron at ak4719.spb.edu  Fri Apr 16 15:34:39 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] NOAA-16 AVHRR
In-Reply-To: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com>
References: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com>
Message-ID: <20040416193439.GB3055@ak4719.spb.edu>

On Fri, Apr 16, 2004 at 05:48:22PM +0000, Mahesh Chittur wrote:
> I haven't used much of gdal. I have this NOAA 16 AVHRR dataset. Is it
> possible to read this data using gdal from GRASS; or is there any
> other program thats can read NOAA-16 AVHRR data ( Unix version of the
> program).

Yes, it should be possible (L1B driver). If you will have problems
reading NOAA AVHRR, please, report them here.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Thu Apr 15 02:55:28 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <407D4E09.60504@pobox.com>
References: <5.0.2.1.2.20040414154753.00abe340@pop3> <407D4E09.60504@pobox.com>
Message-ID: <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de>

Am 14.04.2004 um 16:43 schrieb Frank Warmerdam:

> GDAL can transport a set of many ground control points for 
> geolocation.  They
> may be regular (as would occur with the geolocation grid from 
> something like
> Envisat) or irregular as would occur with user collected control 
> points.
> However, there are no mechanisms in GDAL to make really effective use 
> of
> large number of geolocation ground control points.  The polynomial
> transformation stuff is only good up to 3rd order.  Having a huge 
> density
> of control points to feed that isn't really worthwhile.

A (possibly dumb) question: can the "polynomial transformation stuff" 
you refer
to above be used to map raster coordintes (pixels) to geographic 
coordinates ?
Reading the supplied documentation has lead me to believe that if the 
mapping cannot
be expressed in terms of an affine transform (which they can't in my 
case), the
application is responsible for deriving a useable transform from the 
GCPs supplied
by the dataset. Is this not the case ?

On a somewhat related note, is there any reason (besides the rather 
ugly math involved)
that GDALGCPsToGeoTransform() does not use all the GCPs available to 
determine an affine
transform ? I've written a least squares approximation that takes all 
GCPs into account
and thus does a somewhat better job (IMO, of course =8^) then the 
algorithm currently
used that I'd like to contribute if there is any interest for it.

--
Eric Doenges


From warmerdam at pobox.com  Fri Apr 16 17:28:13 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de>
References: <5.0.2.1.2.20040414154753.00abe340@pop3> <407D4E09.60504@pobox.com> <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de>
Message-ID: <40804FED.5060603@pobox.com>

Eric D?nges wrote:
> A (possibly dumb) question: can the "polynomial transformation stuff" 
> you refer
> to above be used to map raster coordintes (pixels) to geographic 
> coordinates ?
> Reading the supplied documentation has lead me to believe that if the 
> mapping cannot
> be expressed in terms of an affine transform (which they can't in my 
> case), the
> application is responsible for deriving a useable transform from the 
> GCPs supplied
> by the dataset. Is this not the case ?

Eric,

The existing polynomial transform code (in gdal/alg) can be used to
derive a 1st, 2nd or 3rd order transformation based on the GCPs.  This
can then be used to translate back and forth between pixel/line and
whatever coordinate system is in use (usually lat/long).

However, keep in mind that a polynomial transformation does not necessarily
map the underlying relationship all that well.  All we really know is that
how to transform the points at the GCPs.

> On a somewhat related note, is there any reason (besides the rather ugly 
> math involved)
> that GDALGCPsToGeoTransform() does not use all the GCPs available to 
> determine an affine
> transform ? I've written a least squares approximation that takes all 
> GCPs into account
> and thus does a somewhat better job (IMO, of course =8^) then the 
> algorithm currently
> used that I'd like to contribute if there is any interest for it.

It was my intention that GDALGCPstoGeoTransform() would be corrected
to do a first order best fit approximation based on all the GCPs at some
point.  If you have a reasonly clean implementation of this feel free to
provide it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Sat Apr 17 16:59:38 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] NOAA-16 AVHRR
In-Reply-To: <20040416193439.GB3055@ak4719.spb.edu>
References: <BAY16-F59ceLlU7K3Zx000228ac@hotmail.com> <20040416193439.GB3055@ak4719.spb.edu>
Message-ID: <20040417205938.GB7165@thuille.itc.it>

On Fri, Apr 16, 2004 at 11:34:39PM +0400, Andrey Kiselev wrote:
> On Fri, Apr 16, 2004 at 05:48:22PM +0000, Mahesh Chittur wrote:
> > I haven't used much of gdal. I have this NOAA 16 AVHRR dataset. Is it
> > possible to read this data using gdal from GRASS; or is there any
> > other program thats can read NOAA-16 AVHRR data ( Unix version of the
> > program).
> 
> Yes, it should be possible (L1B driver). If you will have problems
> reading NOAA AVHRR, please, report them here.
> 
> 					Andrey

While import works well, the geocoding (use of the supplied GCPs)
is a problem: GRASS and gdalwarp are using basically the same 
algorithm which leads to shifts of >25km at the "ends" of an
AVHRR stripe. As far as I know, only a geocoding algorithm
based on local splines will solve the problem accurately.

Is there anyone who could provide an algorithm for inclusion
into gdalwarp? :-)

Markus


From xqcheng at supresoft.com.cn  Sun Apr 18 21:51:44 2004
From: xqcheng at supresoft.com.cn (xqcheng)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] About CMYK image support of GDAL
Message-ID: <008801c425b0$df998ab0$267072ca@Supresoft.wh>

Hi,All
  two questions:
  1.
  I didn't know whether it is a bug or not.
  When I open a TIFF image(CMYK color coded in photoshop),
  And test its color attribute of band 1, The GetColorInterpretation()
  returns 1 ,that is GCI_PaletteIndex ,not GCI_CyanBand !
  When  I open a JPEG image(CMYK color coded in photoshop),GDAL simply returns...
  cannot open!
  So is GDAL has limited support for CMYK images ?
 2. How can i get the resolution of image opened by GDAL?
    which function of GDAL can do that?
Thanks for reply!
CXQ 
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040419/9e7e16e8/attachment.html
From warmerdam at pobox.com  Sun Apr 18 22:30:00 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] About CMYK image support of GDAL
In-Reply-To: <008801c425b0$df998ab0$267072ca@Supresoft.wh>
References: <008801c425b0$df998ab0$267072ca@Supresoft.wh>
Message-ID: <408339A8.90209@pobox.com>

xqcheng wrote:
> Hi,All
>   two questions:
>   1.
>   I didn't know whether it is a bug or not.
>   When I open a TIFF image(CMYK color coded in photoshop),
>   And test its color attribute of band 1, The GetColorInterpretation()
>   returns 1 ,that is G/CI_PaletteIndex/ /,not //GCI_CyanBand/ /!/
> /  /When/  I/ open a JPEG image(CMYK color coded in photoshop),GDAL 
> simply returns...
>   cannot open!
>   So is GDAL has limited support for CMYK images ?

Good point.  Could you provide a smallish CMYK image so this
can be corrected and tested?

>  2. How can i get the resolution of image opened by GDAL?
>     which function of GDAL can do that?
> Thanks for reply!
> CXQ 

Call the GetGeoTransform() method.  For a north up image the
pixel width is the second element in the array and the pixel
height is the sixth element (but will be negative).   The
corresponding C function is GDALGetGeoTransform().  Hopefully this
example from gdalinfo will be illustrative:

/* -------------------------------------------------------------------- */
/*      Report Geotransform.                                            */
/* -------------------------------------------------------------------- */
    if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
    {
        if( adfGeoTransform[2] == 0.0 && adfGeoTransform[4] == 0.0 )
        {
            printf( "Origin = (%.6f,%.6f)\n",
                    adfGeoTransform[0], adfGeoTransform[3] );

            printf( "Pixel Size = (%.8f,%.8f)\n",
                    adfGeoTransform[1], adfGeoTransform[5] );
        }
        else
            printf( "GeoTransform =\n"
                    "  %.16g, %.16g, %.16g\n"
                    "  %.16g, %.16g, %.16g\n",
                    adfGeoTransform[0],
                    adfGeoTransform[1],
                    adfGeoTransform[2],
                    adfGeoTransform[3],
                    adfGeoTransform[4],
                    adfGeoTransform[5] );
    }


Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bmarchand at ara.com  Mon Apr 19 08:38:10 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] GDALWarp API: units aren't transfered to the transformed dataset
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A8088@user06-machine.sed.ara.com>

Frank,

The changes you made definitely help. They keep me from having to
convert the data set to meters after the transform. The less I touch the
data the better.

Thanks for the fix!

Brian 

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, April 15, 2004 3:01 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GDALWarp API: units aren't transfered to the
transformed dataset

Brian Marchand wrote:
> Hello,
> 
>  
> 
> I started using the GDAL warp API to re-project datasets. Certain 
> elevation grids such as SDTS files have elevation units in feet. This
is 
> correctly captured by the GetUnitType method of the GDALRasterBand 
> class. However, after the transform the new GDALRasterBand objects do 
> not have units set. Unless I'm doing something wrong, the units should

> be carried over or at least a SetUnitType method should be added. I'm 
> using the "MEM" driver as the destination dataset driver.

Brian,

You are correct, the logic for creating a new file in gdalwarp.cpp only
copies the color table over from the source. No effort is made to copy
metadata, or other auxilary information like the units type.  The
convenience function GDALCreateAndReprojectImage() does not even copy
the
color table.

Furthermore, the "special" data items UnitType, Offset and Scale do not
even
have set methods on the GDALRasterBand class, so you can't even copy
them
yourself.

I have modified the MEM and VRT drivers to have custom set methods for
these
items, and the CreateCopy() method on the VRT driver will now clone this
information from a source dataset and preserve it in the XML VRT file.

However, that doesn't really help you much.  I don't really have much
advice
other than that you will likely need to keep track of this stuff
yourself
by some means.   You can now manually copy UnitType to a MEM dataset if
you
include memdataset.h if that helps.

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From bmarchand at ara.com  Mon Apr 19 08:50:04 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets using GDALWarp API
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A8089@user06-machine.sed.ara.com>

Hello,

 

I've come across a problem where PNG, BMP, and JPEG datasets are zeroed
out during a GDALWarp transform. I'm not sure if other formats do this,
but I've seen this happen on these types. I have no problem with TIFF
files so as a temporary work around for these types; I copy them to
geotiff datasets before the transform. I'd prefer not to do this, so I'm
wondering if anyone else has seen this and if this is a bug or am I
missing a step. No errors are generated during the warp setup and
execution.

 

I'm using GDAL 1.2 on Windows 2K

 

Thanks,

 

Brian 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040419/0c299dea/attachment.html
From Jakobs at trapezesoftware.com  Mon Apr 19 09:19:10 2004
From: Jakobs at trapezesoftware.com (Jakob Simon-Gaarde/Trapsoft Inc)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Transforming shapefiles from euref89 to ed50
Message-ID: <OF297665C8.63F66672-ONC1256E7B.0046218E@trapezesoftware.com>

Hello.

I have a shapefile in the projection "UTM euref89 - Zone 32 north" which I
need to transform to the projection "UTM ed50 - Zone 32 north".
I have tried the following:

ogr2ogr -s_srs euref89_32n.wkt -t_srs ed50_32n.wkt out.shp stops_ll.shp

where euref89_32n.wkt contains:
PROJCS["ETRF_1989_UTM_Zone_32N",
    GEOGCS["EUREF89_32N",
        DATUM["ETRF_1989",
            SPHEROID["WGS_1984",6378137.0,298.257223563]],
        PRIMEM["Greenwich",9.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",9.0],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]

and ed5089_32n.wkt contains:
PROJCS["ED_1950_UTM_Zone_32N",
    GEOGCS["GCS_European_1950",
        DATUM["European_1950",
            SPHEROID["International_1924",6378388,297]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000],
    PARAMETER["False_Northing",0],
    PARAMETER["Central_Meridian",9],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0],
    UNIT["Meter",1]]

ogr results in following transformation:
(523999.60582 ; 6092835.36626) -> (1099082.776 ; 6133192.723)
(527527.56990 ; 6094198.96889) -> (1102420.779 ; 6135007.083)
(550925.36281;  6085171.60262) -> (1126899.377 6129037.630)


I then tried using a commercial transformationtool, and it did the job
right:
(523999.60582 ; 6092835.36626) -> (524080.088 6093041.491)
(527527.56990 ; 6094198.96889) -> (527608.073 ; 6094405.086)
(550925.36281 ; 6085171.60262) -> (551005.934 ; 6085377.520)

What am I doing wrong - is it the wkt-files? I got those from two
shapefiles with the projections I need.

Please help :-(

Med venlig hilsen / Best regards
Jakob Simon-Gaarde

Trapeze Software Europe A/S
Tlf. 87 44 16 00



From TMitchell at lignum.com  Mon Apr 19 12:01:56 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] PNG Heightfield
In-Reply-To: <06fb01c41bb4$3418a4b0$6401a8c0@dougpc>
Message-ID: <OF6D04A63C.36FF764B-ON88256E7B.005808BC-88256E7B.00581177@lignum.com>

JDG, 
I'm interested about where you got on this.

Tyler

gdal-dev-admin@remotesensing.org wrote on 04/06/2004 01:50:24 AM:

> Thanks,
> 
> Got the code this time.  If you are interested in the PNG elevation 
version,
> I'll let you know as soon as I get it going.  I'm a VB guy recently
> converted to open source.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Apr 19 14:31:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Transforming shapefiles from euref89 to ed50
In-Reply-To: <OF297665C8.63F66672-ONC1256E7B.0046218E@trapezesoftware.com>
References: <OF297665C8.63F66672-ONC1256E7B.0046218E@trapezesoftware.com>
Message-ID: <40841AE5.2020509@pobox.com>

Jakob Simon-Gaarde/Trapsoft Inc wrote:
> ogr2ogr -s_srs euref89_32n.wkt -t_srs ed50_32n.wkt out.shp stops_ll.shp
> 
> where euref89_32n.wkt contains:
> PROJCS["ETRF_1989_UTM_Zone_32N",
>     GEOGCS["EUREF89_32N",
>         DATUM["ETRF_1989",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",9.0],
>         UNIT["Degree",0.0174532925199433]],

> and ed5089_32n.wkt contains:
> PROJCS["ED_1950_UTM_Zone_32N",
>     GEOGCS["GCS_European_1950",
>         DATUM["European_1950",
>             SPHEROID["International_1924",6378388,297]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.0174532925199433]],
> What am I doing wrong - is it the wkt-files? I got those from two
> shapefiles with the projections I need.

Jacob,

I believe the problem is that you are indicating a prime meridian
of "Greenwich" at 9 degrees east of greenwich in the euref89 .wkt file.
I suspect the unnamed commerical software is ignoring the prime meridian
while OGR is trying to take it into account.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Apr 19 14:34:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Transforming shapefiles from euref89 to ed50
Message-ID: <20040419183457.GA28798@gdal.velocet.ca>

Jakob Simon-Gaarde/Trapsoft Inc wrote:
> ogr2ogr -s_srs euref89_32n.wkt -t_srs ed50_32n.wkt out.shp stops_ll.shp
> 
> where euref89_32n.wkt contains:
> PROJCS["ETRF_1989_UTM_Zone_32N",
>     GEOGCS["EUREF89_32N",
>         DATUM["ETRF_1989",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",9.0],
>         UNIT["Degree",0.0174532925199433]],

> and ed5089_32n.wkt contains:
> PROJCS["ED_1950_UTM_Zone_32N",
>     GEOGCS["GCS_European_1950",
>         DATUM["European_1950",
>             SPHEROID["International_1924",6378388,297]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.0174532925199433]],
> What am I doing wrong - is it the wkt-files? I got those from two
> shapefiles with the projections I need.

Jacob, 

I believe the problem is that you are indicating a prime meridian
of "Greenwich" at 9 degrees east of greenwich in the euref89 .wkt file.
I suspect the unnamed commerical software is ignoring the prime meridian
while OGR is trying to take it into account. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Mon Apr 19 14:39:39 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
Message-ID: <20040419183939.GA5825@thuille.itc.it>

Hello,

I have a small "problem" (?) with an ASCII DEM which comes
with a .prj file:

cat dgm_20mfill_ascii.prj
Projection    TRANSVERSE
Zunits        NO
Units         METERS
Datum         MOD
Spheroid      INTERNATIONAL1909
Xshift        -1000000.0000000000
Yshift        -5000000.0000000000
Parameters
0.9996 /* scale factor at central meridian
 9  0  0.000 /* longitude of central meridian
 0  0  0.000 /* latitude of origin
1500000.00000 /* false easting (meters)
0.00000 /* false northing (meters)

gdalinfo dgm_20mfill_ascii
Driver: AAIGrid/Arc/Info ASCII Grid
Size is 8184, 5159
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AXIS["Lat",NORTH],
        AXIS["Long",EAST],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",9],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1500000],
    PARAMETER["false_northing",0],
    UNIT["METERS",1]]
Origin = (604170.000000,221410.000000)
Pixel Size = (20.00000000,-20.00000000)
Corner Coordinates:
Upper Left  (  604170.000,  221410.000) (  8d10'16.75"W, 10d53'34.18"N)
Lower Left  (  604170.000,  118230.000) (  8d 8'49.54"W,  9d58'8.90"N)
Upper Right (  767850.000,  221410.000) (  6d41'10.18"W, 10d55'44.61"N)
Lower Right (  767850.000,  118230.000) (  6d39'58.50"W, 10d 0'8.04"N)
Center      (  686010.000,  169820.000) (  7d25'5.15"W, 10d26'57.03"N)
Band 1 Block=8184x1 Type=Int16, ColorInterp=Undefined
  NoData Value=-9999


The PROJCS is set "unnamed", shouldn't it be Transverse_Mercator
or is the problem related to the fact that the projection is
very particular? It should be the Italian Gauss-Boaga, but
the modified version from the Province of Bolzano. Note the
Xshift        -1000000.0000000000
Yshift        -5000000.0000000000

which is probably ignored (the center should be around
Center Longitude: 11:25:49.77287E [11.43049]
Center latitude:  46:39:01.079651N [46.65030]
).

So maybe there are two problems?


Thanks for any hint,

 Markus

PS:
The header of the ASCII file looks like this:

ncols         8184
nrows         5159
xllcorner     604170
yllcorner     118230
cellsize      20
NODATA_value  -9999
-9999 -9999 -9999 ...


From warmerdam at pobox.com  Mon Apr 19 15:31:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <20040419183939.GA5825@thuille.itc.it>
References: <20040419183939.GA5825@thuille.itc.it>
Message-ID: <408428FC.9020102@pobox.com>

Markus Neteler wrote:

> The PROJCS is set "unnamed", shouldn't it be Transverse_Mercator
> or is the problem related to the fact that the projection is
> very particular? It should be the Italian Gauss-Boaga, but
> the modified version from the Province of Bolzano. Note the
> Xshift        -1000000.0000000000
> Yshift        -5000000.0000000000
> 
> which is probably ignored (the center should be around
> Center Longitude: 11:25:49.77287E [11.43049]
> Center latitude:  46:39:01.079651N [46.65030]
> ).
> 
> So maybe there are two problems?

Markus,

The fact that the PROJCS is "unnamed" is fine.  If there was
a way to know a meaningful user name for the coordinate system
it would be nice to substitute it, but that is tricky.

I see two issues.
  1) The Spheroid (INTERNATIONAL1909) was not recognised, so WGS84
     was incorrected used as a default.  I have committed a small change
     to recognise INTERNATIONAL1909 in CVS.
  2) The Xshift/Yshift were ignored.  I don't really understand the
     semantics though so I am not sure what to change.

If you know what should be done for the X/Y shift values, I would
suggest you submit a bug report.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Apr 19 15:38:18 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets using
 GDALWarp API
In-Reply-To: <B3CB5AFD4126584AB4CF3DD45B267A530A8089@user06-machine.sed.ara.com>
References: <B3CB5AFD4126584AB4CF3DD45B267A530A8089@user06-machine.sed.ara.com>
Message-ID: <40842AAA.3070906@pobox.com>

Brian Marchand wrote:
> Hello,
> 
> I?ve come across a problem where PNG, BMP, and JPEG datasets are zeroed 
> out during a GDALWarp transform. I?m not sure if other formats do this, 
> but I?ve seen this happen on these types. I have no problem with TIFF 
> files so as a temporary work around for these types; I copy them to 
> geotiff datasets before the transform. I?d prefer not to do this, so I?m 
> wondering if anyone else has seen this and if this is a bug or am I 
> missing a step. No errors are generated during the warp setup and execution.

Brian,

I'm not sure how you are warping directly to PNG or JPEG.  These are both
"createcopy" formats, that have to be written out sequentially from an
input file.  The warper cannot normally use these formats at all as direct
output formats.  How did you?

Can you provide a specific example demonstration with the gdalwarp
commandline program?  If so, could you file it in bugzilla?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From George.Dinardo at drdc-rddc.gc.ca  Mon Apr 19 18:19:05 2004
From: George.Dinardo at drdc-rddc.gc.ca (Dinardo, George)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate (NITF export)
Message-ID: <DFBBA0601F40D611AFF600508BB2F0EF028D0E02@ottawaex.drdc-rddc.gc.ca>

Hello Frank;

Thank you for the quick response and the detail provided.  I have tried a
variety of options and the suggestions provided but to no avail.  Using the
OPENEV interface I was able to create a geotiff file without a problem
properly subsetted and rectified.  I then tried to use gdal_translate to
create an NITF format file but the error "NITF format does not support
complex integer data" is produced.  I am not able to subset the SAR image to
provide you with a sample (>200MB), but OPENEV/gdal does an excellent job of
subsetting the image to GeoTiff if this would be helpful.

Thank you again for your help

George

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Friday, April 16, 2004 1:28 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Question about gdal_translate (NITF export)


Dinardo, George wrote:
> We have started to use the gdal_translate utility as delivered through
> OPENEV.  We want to convert georeferenced SAR imagery data (CEOS) to NITF
> format, but are experiencing some problems. GeoTiff works well. Are there
> examples or help on which options we need to create an NITF format file.

George,

What pixel type is the CEOS data?  I don't know that I have ever tested
producing complex (as in real+imaginary) NITF files with GDAL so I wouldn't
be surprised if that caused problems.  Also, I believe GDAL will currently
only
produce output files with nice affine geotransforms.  If you are working
with
un-rectified CEOS SAR data you will likely not be able to export the
georeferencing properly to NITF with the existing GDAL NITF driver.

I notice that the NITF driver does *not* report the full set of creation
options available.  In effect many of the "metadata" header fields can be
set
via creation options.  I believe all the lines shown below using the "OVR"
macro can be set via creation options.

     PLACE (achHeader+  0, FDHR_FVER,    "NITF02.10"                     );
     OVR( 2,achHeader+  9, CLEVEL,       "05"                            );
     PLACE (achHeader+ 11, STYPE        ,"BF01"                          );
     OVR(10,achHeader+ 15, OSTAID       ,"GDAL"                          );
     OVR(14,achHeader+ 25, FDT          ,"20021216151629"                );
     OVR(80,achHeader+ 39, FTITLE       ,""                              );
     OVR( 1,achHeader+119, FSCLAS       ,"U"                             );
     OVR( 2,achHeader+120, FSCLSY       ,""                              );
     OVR(11,achHeader+122, FSCODE       ,""                              );
     OVR( 2,achHeader+133, FSCTLH       ,""                              );
     OVR(20,achHeader+135, FSREL        ,""                              );
     OVR( 2,achHeader+155, FSDCTP       ,""                              );
     OVR( 8,achHeader+157, FSDCDT       ,""                              );
     OVR( 4,achHeader+165, FSDCXM       ,""                              );
     OVR( 1,achHeader+169, FSDG         ,""                              );
     OVR( 8,achHeader+170, FSDGDT       ,""                              );
     OVR(43,achHeader+178, FSCLTX       ,""                              );
     OVR( 1,achHeader+221, FSCATP       ,""                              );
     OVR(40,achHeader+222, FSCAUT       ,""                              );
     OVR( 1,achHeader+262, FSCRSN       ,""                              );
     OVR( 8,achHeader+263, FSSRDT       ,""                              );
     OVR(15,achHeader+271, FSCTLN       ,""                              );
     OVR( 5,achHeader+286, FSCOP        ,"00000"                         );
     OVR( 5,achHeader+291, FSCPYS       ,"00000"                         );
     PLACE (achHeader+296, ENCRYP       ,"0"                             );
     achHeader[297] = achHeader[298] = achHeader[299] = 0x00; /* FBKGC */
     OVR(24,achHeader+300, ONAME        ,""                              );
     OVR(18,achHeader+324, OPHONE       ,""                              );
     PLACE (achHeader+342, FL           ,"????????????"                  );
     PLACE (achHeader+354, HL           ,"000404"                        );
     PLACE (achHeader+360, NUMI         ,"001"                           );
     PLACE (achHeader+363, LISH1        ,"??????"                        );
     PLACE (achHeader+369, LI1          ,CPLSPrintf("%010d",nImageSize)  );
     PLACE (achHeader+379, NUMS         ,"000"                           );
     PLACE (achHeader+382, NUMX         ,"000"                           );
     PLACE (achHeader+385, NUMT         ,"000"                           );
     PLACE (achHeader+388, NUMDES       ,"000"                           );
     PLACE (achHeader+391, NUMRES       ,"000"                           );
     PLACE (achHeader+394, UDHDL        ,"00000"                         );
     PLACE (achHeader+399, XHDL         ,"00000"                         );

/* -------------------------------------------------------------------- */
/*      Prepare the image header.                                       */
/* -------------------------------------------------------------------- */
     pachIMHDR = achHeader + 404;

     PLACE (pachIMHDR+  0, IM           , "IM"                           );
     OVR(10,pachIMHDR+  2, HD1          , "Missing"                      );
     OVR(14,pachIMHDR+ 12, IDATIM       , "20021216151629"               );
     OVR(17,pachIMHDR+ 26, TGTID        , ""                             );
     OVR(80,pachIMHDR+ 43, IID2         , ""                             );
     OVR( 1,pachIMHDR+123, ISCLAS       , "U"                            );
     OVR( 2,pachIMHDR+124, ISCLSY       , ""                             );
     OVR(11,pachIMHDR+126, ISCODE       , ""                             );
     OVR( 2,pachIMHDR+137, ISCTLH       , ""                             );
     OVR(20,pachIMHDR+139, ISREL        , ""                             );
     OVR( 2,pachIMHDR+159, ISDCTP       , ""                             );
     OVR( 8,pachIMHDR+161, ISDCDT       , ""                             );
     OVR( 4,pachIMHDR+169, ISDCXM       , ""                             );
     OVR( 1,pachIMHDR+173, ISDG         , ""                             );
     OVR( 8,pachIMHDR+174, ISDGDT       , ""                             );
     OVR(43,pachIMHDR+182, ISCLTX       , ""                             );
     OVR( 1,pachIMHDR+225, ISCATP       , ""                             );
     OVR(40,pachIMHDR+226, ISCAUT       , ""                             );
     OVR( 1,pachIMHDR+266, ISCRSN       , ""                             );
     OVR( 8,pachIMHDR+267, ISSRDT       , ""                             );
     OVR(15,pachIMHDR+275, ISCTLN       , ""                             );
     PLACE (pachIMHDR+290, ENCRYP       , "0"                            );
     OVR(42,pachIMHDR+291, ISORCE       , "Unknown"                      );
     PLACE (pachIMHDR+333, NROWS        , CPLSPrintf("%08d", nLines)     );
     PLACE (pachIMHDR+341, NCOLS        , CPLSPrintf("%08d", nPixels)    );
     PLACE (pachIMHDR+349, PVTYPE       , pszPVType                      );
     PLACE (pachIMHDR+352, IREP         , pszIREP                        );
     OVR( 8,pachIMHDR+360, ICAT         , "VIS"                          );
     OVR( 2,pachIMHDR+368, ABPP         , CPLSPrintf("%02d",nBitsPerSample)
);
     OVR( 1,pachIMHDR+370, PJUST        , "R"                            );
     OVR( 1,pachIMHDR+371, ICORDS       , " "                            );

The name (as per the NITF specs) to set the options are the third column
above.  For instance, to set ONAME and OPHONE you might do:

   gdal_translate -co "ONAME=Frank Warmerdam" -co OPHONE=9057800450 in.tif
out.ntf

Do you have a sample input file you would like to be able to translate?
What problems are you seeing with the output file. I would be willing to
make some improvements to the GDAL NITF writing support if you need it.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From fulton at cmu.edu  Mon Apr 19 23:35:42 2004
From: fulton at cmu.edu (Sean Fulton)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <200404152353.08457.alexamici@fastwebnet.it>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404151002.18884.alexamici@fastwebnet.it> <200404152353.08457.alexamici@fastwebnet.it>
Message-ID: <CD3EE749-927B-11D8-BF13-003065D5F140@cmu.edu>

On Apr 15, 2004, at 5:53 PM, Alessandro Amici wrote:

>
> Sean,
>
> On Thursday 15 April 2004 10:02, Alessandro Amici wrote:
>> ok, finally i understand what is going on on MacOS X. i'll try to fix 
>> the
>> configure/make system ASAP. it is not strightforward, but it can be 
>> done
>> ;).
>
> mmm, looks like things are harder than i thought along this route :(. i
> couldn't beat the python build into submission, yet.
>
> however, this is what i wrote in january when the macosx link problem 
> was
> reported for the first time:
>
>> the build of the gdal python module has always been fragile, and it 
>> has
>> became a real hack since the libtool transition (my fault, 
>> admittedly).
>> IMHO the  only hope to get out of the current mess is to use the 
>> distutils
>> infrastructure, that hopefully will take care of the OSX problem as 
>> well.
>>
>> so i refreshed what looked like an abandoned setup.py in the top 
>> directory.
>> current gdal cvs builds and installs fine on linux with:
>> $ ./configure <...> --without-python
>> $ make
>> $ python setup.py build
>> $ python setup.py install
>
> it still works on linux. could you test if it works on MacOS X as well?
>

Alessandro,

That didn't work (a bit of output is below). It looks like it's not 
finding the gdal header files. Is there anyway to get tell it where 
they are? I'm sorry, I don't know much about python so I'm not much 
help.

	Sean

...
pymod/gdal_wrap.c:4587: error: parse error before "_arg0"
pymod/gdal_wrap.c:4589: error: `GDALColorEntry' undeclared (first use 
in this function)
pymod/gdal_wrap.c:4589: error: `_arg2' undeclared (first use in this 
function)
pymod/gdal_wrap.c:4597: error: `_arg0' undeclared (first use in this 
function)
pymod/gdal_wrap.c:4610: warning: implicit declaration of function 
`GDALGetColorEntryAsRGB'
pymod/gdal_wrap.c: In function `_wrap_GDALSetColorEntry':
pymod/gdal_wrap.c:4617: error: `GDALColorTableH' undeclared (first use 
in this function)
pymod/gdal_wrap.c:4617: error: parse error before "_arg0"
pymod/gdal_wrap.c:4619: error: `GDALColorEntry' undeclared (first use 
in this function)
pymod/gdal_wrap.c:4619: error: `_arg2' undeclared (first use in this 
function)
pymod/gdal_wrap.c:4627: error: `_arg0' undeclared (first use in this 
function)
pymod/gdal_wrap.c:4640: warning: implicit declaration of function 
`GDALSetColorEntry'
pymod/gdal_wrap.c: In function `_wrap_GDALSetCacheMax':
pymod/gdal_wrap.c:4653: warning: implicit declaration of function 
`GDALSetCacheMax'
pymod/gdal_wrap.c: In function `_wrap_GDALGetCacheMax':
pymod/gdal_wrap.c:4666: warning: implicit declaration of function 
`GDALGetCacheMax'
pymod/gdal_wrap.c: In function `_wrap_GDALGetCacheUsed':
pymod/gdal_wrap.c:4678: warning: implicit declaration of function 
`GDALGetCacheUsed'
pymod/gdal_wrap.c: In function `_wrap_GDALFlushCacheBlock':
pymod/gdal_wrap.c:4690: warning: implicit declaration of function 
`GDALFlushCacheBlock'
pymod/gdal_wrap.c: In function `_wrap_GDALChecksumImage':
pymod/gdal_wrap.c:4698: error: `GDALRasterBandH' undeclared (first use 
in this function)
pymod/gdal_wrap.c:4698: error: parse error before "_arg0"
pymod/gdal_wrap.c:4709: error: `_arg0' undeclared (first use in this 
function)
pymod/gdal_wrap.c: At top level:
pymod/gdal_wrap.c:10815: warning: function declaration isn't a prototype
pymod/gdal_wrap.c:193: warning: `SWIG_addvarlink' defined but not used
error: command 'gcc' failed with exit status 1


From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Tue Apr 20 02:02:30 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <40804FED.5060603@pobox.com>
References: <5.0.2.1.2.20040414154753.00abe340@pop3> <407D4E09.60504@pobox.com> <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de> <40804FED.5060603@pobox.com>
Message-ID: <4EDC292B-9290-11D8-8E75-000393A3C40C@rcs.ei.tum.de>


Am 16.04.2004 um 23:28 schrieb Frank Warmerdam:

> However, keep in mind that a polynomial transformation does not 
> necessarily
> map the underlying relationship all that well.  All we really know is 
> that
> how to transform the points at the GCPs.

I've found this out the hard way recently using a 5th order polynomial 
on a
fairly large scale Mercator projection - the GCPs are matched almost 
perfectly,
large portions of the rest of the map are mapped completely wrong =8^(.

> It was my intention that GDALGCPstoGeoTransform() would be corrected
> to do a first order best fit approximation based on all the GCPs at 
> some
> point.  If you have a reasonly clean implementation of this feel free 
> to
> provide it.

I've attached a patch to gdal_misc.cpp to this mail. It gives 
reasonable results
for the maps I've tried it with, but I'm no expert on numerics, so 
there may be
better ways to structure the code to avoid rounding errors.

Best regards,
Eric

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_misc.patch
Type: application/octet-stream
Size: 7002 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040420/d131f2a7/gdal_misc.obj
-------------- next part --------------

From xqcheng at supresoft.com.cn  Tue Apr 20 02:25:54 2004
From: xqcheng at supresoft.com.cn (xqcheng)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] About image resolution
Message-ID: <002701c426a0$571df360$267072ca@Supresoft.wh>

Hi,All
   Image resolution I cared about is not the value returned by GDALGetGeoTransform()
   Since    Most images doesn't contain Geo information.
   For tiff images, I want to get value of tag XResolution, YResolution,How can I do that
   with GDAL?
   I am working for a Digital photogrammetry company. When photo has been scanned, scanning resolution
   is very important! So that is why I want to get raw resolution of a pixel(no relation with Geo info)
   Best Regards
CXQ

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040420/67892d4e/attachment.html
From dron at ak4719.spb.edu  Tue Apr 20 03:23:01 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] About image resolution
In-Reply-To: <002701c426a0$571df360$267072ca@Supresoft.wh>
References: <002701c426a0$571df360$267072ca@Supresoft.wh>
Message-ID: <20040420072301.GA13431@ak4719.spb.edu>

On Tue, Apr 20, 2004 at 02:25:54PM +0800, xqcheng wrote:
>    Image resolution I cared about is not the value returned by
>    GDALGetGeoTransform() Since    Most images doesn't contain Geo
>    information. For tiff images, I want to get value of tag
>    XResolution, YResolution,How can I do that with GDAL? I am working
>    for a Digital photogrammetry company. When photo has been scanned,
>    scanning resolution is very important! So that is why I want to get
>    raw resolution of a pixel(no relation with Geo info)

For TIFF files you will get resolution in the metadata records
TIFFTAG_XRESOLUTION, TIFFTAG_YRESOLUTION and TIFFTAG_RESOLUTIONUNIT. You
should use something like:

    hDataset = GDALOpen( pszFilename, GA_ReadOnly );
    papszMetadata = GDALGetMetadata( hDataset, NULL );
    if(CSLCount(papszMetadata) > 0)
    {
	const char *pszXRes, *pszYRes, *pszResUnit;
        int iXRes, iYRes;

        pszXRes = CSLFetchNameValue(papszMetadata, "TIFFTAG_XRESOLUTION");
	iXRes = atoi(pszXRes);
	pszYRes = CSLFetchNameValue(papszMetadata, "TIFFTAG_YRESOLUTION");
	iYRes = atoi(pszYRes);


	/* Units: 1 - none, 2 - inches, 3 - centimeters. */
	pszResUnit = CSLFetchNameValue(papszMetadata, "TIFFTAG_RESOLUTIONUNIT");
    }

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From neteler at itc.it  Tue Apr 20 04:22:09 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <408428FC.9020102@pobox.com>
References: <20040419183939.GA5825@thuille.itc.it> <408428FC.9020102@pobox.com>
Message-ID: <20040420082209.GG10102@thuille.itc.it>

On Mon, Apr 19, 2004 at 03:31:08PM -0400, Frank Warmerdam wrote:
> Markus Neteler wrote:
> 
> >The PROJCS is set "unnamed", shouldn't it be Transverse_Mercator
> >or is the problem related to the fact that the projection is
> >very particular? It should be the Italian Gauss-Boaga, but
> >the modified version from the Province of Bolzano. Note the
> >Xshift        -1000000.0000000000
> >Yshift        -5000000.0000000000
> >
> >which is probably ignored (the center should be around
> >Center Longitude: 11:25:49.77287E [11.43049]
> >Center latitude:  46:39:01.079651N [46.65030]
> >).
> >
> >So maybe there are two problems?
> 
> Markus,
> 
> The fact that the PROJCS is "unnamed" is fine.  If there was
> a way to know a meaningful user name for the coordinate system
> it would be nice to substitute it, but that is tricky.
> 
> I see two issues.
>  1) The Spheroid (INTERNATIONAL1909) was not recognised, so WGS84
>     was incorrected used as a default.  I have committed a small change
>     to recognise INTERNATIONAL1909 in CVS.

Thanks - this was the most important part.

>  2) The Xshift/Yshift were ignored.  I don't really understand the
>     semantics though so I am not sure what to change.
> 
> If you know what should be done for the X/Y shift values, I would
> suggest you submit a bug report.

I have got/patched the WKT definition:

 PROJCS["Monte_Mario_Italy_1_BZ",
    GEOGCS["GCS_Monte_Mario",
        DATUM["Monte_Mario",
            SPHEROID["International_1924",6378388,297]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",500000.0],
    PARAMETER["False_Northing",-5000000.0],
    PARAMETER["Central_Meridian",9],
    PARAMETER["Scale_Factor",0.9996],
    PARAMETER["Latitude_Of_Origin",0],
    UNIT["Meter",1]]

Changes:
 PROJCS: _BZ I have added
 False_Easting: -1 million to reduce coordinates by 1 digit
 False_Northing -5 million to reduce coordinates by 1 digit

These are data from the local government. In the 80th they
had decided to implement this particular False_Easting, 
False_Northing...

I have applied above to gdal_translate with '-a_srs bz_wkt.txt'
to receive a GeoTIFF from the original ASCII DEM,
but it was reduced to a WGS84 ellipsoid.
Is it not possible to generate data with user defined
WKT definitions? Maybe that's not desired - but then
I'm limited to what EPSG provides (where above definition
doesn't exist).

Best regards

 Markus Neteler


From bmarchand at ara.com  Tue Apr 20 08:51:37 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets using GDALWarp API
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A808A@user06-machine.sed.ara.com>

Frank,

Sorry, I failed to mention that the new "warped" data sets were created
with the TIFF driver. Originally I was trying to stick with the driver
of the original dataset but came up against the "create" restriction for
these datasets. 

It seems as if the failure occurs when I transform from a UTM to GCS. It
works if I just change the datum. The WKT is below. I also took your
suggestion and tried it with the gdalwarp utility using the below WKT in
prf files and it worked! So now I need to see what the utility is doing
that I'm not.  

I'm guessing this has nothing to do with the PNG, BMP, or JPEG drivers
but more to do with the fact that these formats come with world files.

Thanks,

Brian


Source SRS:

PROJCS["UTM Zone
17",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,
0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","89
01"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["L
at",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4269"]],PROJECTION["Trans
verse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_me
ridian",-81],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",
500000],PARAMETER["false_northing",0],UNIT["Meter",1]]

Target SRS:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,
0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901
"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat
",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]] 



-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, April 19, 2004 3:38 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

Brian Marchand wrote:
> Hello,
> 
> I've come across a problem where PNG, BMP, and JPEG datasets are
zeroed 
> out during a GDALWarp transform. I'm not sure if other formats do
this, 
> but I've seen this happen on these types. I have no problem with TIFF 
> files so as a temporary work around for these types; I copy them to 
> geotiff datasets before the transform. I'd prefer not to do this, so
I'm 
> wondering if anyone else has seen this and if this is a bug or am I 
> missing a step. No errors are generated during the warp setup and
execution.

Brian,

I'm not sure how you are warping directly to PNG or JPEG.  These are
both
"createcopy" formats, that have to be written out sequentially from an
input file.  The warper cannot normally use these formats at all as
direct
output formats.  How did you?

Can you provide a specific example demonstration with the gdalwarp
commandline program?  If so, could you file it in bugzilla?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From cgt at navicon.dk  Tue Apr 20 09:26:42 2004
From: cgt at navicon.dk (Christian Gebauer Tveen)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] s57 / s52
Message-ID: <40852512.9040302@navicon.dk>

Hello,

I'm about to write some s57 rendering stuff using the ogr sw. I wondered
if anybody has any sw or knowledge on where  to look for sw that renders
the s57 in s52 format. I have a prototype rendering the data, but still
misses the data layering, proper colouring and data reduction + if
necessary caching/tiling of data.

I would very much appreciate any leads on where to look.

Regards Christian G. Tveen


From cgt at navicon.dk  Tue Apr 20 09:16:31 2004
From: cgt at navicon.dk (Christian G. Tveen)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] s57 / s52
Message-ID: <408522AF.2030701@navicon.dk>

Hello,

I'm about to write some s57 rendering stuff using the ogr sw. I wondered 
if anybody has any sw or knowledge on where  to look for sw that renders 
the s57 in s52 format. I have a prototype rendering the data, but still 
misses the data layering, proper colouring and data reduction + if 
necessary caching/tiling of data.

I would very much appreciate any leads on where to look.

Regards Christian G. Tveen
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3158 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040420/6f522cc8/smime.bin
From bmarchand at ara.com  Tue Apr 20 10:18:39 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets using GDALWarp API
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A53B7E7B2@user06-machine.sed.ara.com>

One more item, I'm using the logic as outlined in the Warp tutorial.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Brian Marchand
Sent: Tuesday, April 20, 2004 8:52 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

Frank,

Sorry, I failed to mention that the new "warped" data sets were created
with the TIFF driver. Originally I was trying to stick with the driver
of the original dataset but came up against the "create" restriction for
these datasets. 

It seems as if the failure occurs when I transform from a UTM to GCS. It
works if I just change the datum. The WKT is below. I also took your
suggestion and tried it with the gdalwarp utility using the below WKT in
prf files and it worked! So now I need to see what the utility is doing
that I'm not.  

I'm guessing this has nothing to do with the PNG, BMP, or JPEG drivers
but more to do with the fact that these formats come with world files.

Thanks,

Brian


Source SRS:

PROJCS["UTM Zone
17",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,
0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","89
01"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["L
at",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4269"]],PROJECTION["Trans
verse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_me
ridian",-81],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",
500000],PARAMETER["false_northing",0],UNIT["Meter",1]]

Target SRS:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,
0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901
"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat
",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]] 



-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, April 19, 2004 3:38 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

Brian Marchand wrote:
> Hello,
> 
> I've come across a problem where PNG, BMP, and JPEG datasets are
zeroed 
> out during a GDALWarp transform. I'm not sure if other formats do
this, 
> but I've seen this happen on these types. I have no problem with TIFF 
> files so as a temporary work around for these types; I copy them to 
> geotiff datasets before the transform. I'd prefer not to do this, so
I'm 
> wondering if anyone else has seen this and if this is a bug or am I 
> missing a step. No errors are generated during the warp setup and
execution.

Brian,

I'm not sure how you are warping directly to PNG or JPEG.  These are
both
"createcopy" formats, that have to be written out sequentially from an
input file.  The warper cannot normally use these formats at all as
direct
output formats.  How did you?

Can you provide a specific example demonstration with the gdalwarp
commandline program?  If so, could you file it in bugzilla?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Apr 20 10:22:54 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] s57 / s52
In-Reply-To: <40852512.9040302@navicon.dk>
References: <40852512.9040302@navicon.dk>
Message-ID: <4085323E.9090101@pobox.com>

Christian Gebauer Tveen wrote:
> Hello,
> 
> I'm about to write some s57 rendering stuff using the ogr sw. I wondered
> if anybody has any sw or knowledge on where  to look for sw that renders
> the s57 in s52 format. I have a prototype rendering the data, but still
> misses the data layering, proper colouring and data reduction + if
> necessary caching/tiling of data.
> 
> I would very much appreciate any leads on where to look.

Christian,

There was a bunch of work done implementing S-52 style rendering in the
OpenEV application.  If you were to browse the OpenEV CVS tree you would
find the S52 stuff in the contrib/S52 directory.   I don't think the S-52
rendering support is enabled in any of the stock OpenEV binary releases.

   http://openev.sf.net/

The rendering is implemented via OpenGL calls in OpenEV.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Jakobs at trapezesoftware.com  Tue Apr 20 01:55:39 2004
From: Jakobs at trapezesoftware.com (Jakob Simon-Gaarde/Trapsoft Inc)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Transforming shapefiles from euref89 to ed50
Message-ID: <OFF24DB2AE.6BC4CAE7-ONC1256E7C.001FD895@trapezesoftware.com>

Thanks - It helped move the coordinates into the right area, but there is
still something wrong - here is what I am doing:

>>> import osr
>>> f=open('euref89_32n.wkt')
>>> euref = f.read()
>>> euref=euref.replace('\n','')
>>> f.close()
>>> f=open('ed50_32n.wkt')
>>> ed50=f.read()
>>> ed50=ed50.replace('\n','')
>>> sr_euref = osr.SpatialReference()
>>> sr_euref.ImportFromESRI([euref])
0
>>> sr_ed50=osr.SpatialReference()
>>> sr_ed50.ImportFromESRI([ed50])
0
>>> t=osr.CoordinateTransformation(sr_euref,sr_ed50)
>>> t.TransformPoint(560728.35341,6079776.68768)
(560731.3203323764, 6079908.6868730783, 0.0)

should have been
(560728.35341 ; 6079776.68768) -> (560808.942 ; 6079982.529)

Any ideas??

By the way isn't there a collection of wkt-files somewhere that are
garanteed correct?

by the way the unnamed tool is ESRI MapObjects based.

Med venlig hilsen / Best regards
Jakob Simon-Gaarde

Trapeze Software Europe A/S
Tlf. 87 44 16 00


|---------+-------------------------------->
|         |           Frank Warmerdam      |
|         |           <warmerdam@pobox.com>|
|         |           Sent by:             |
|         |           gdal-dev-admin@remote|
|         |           sensing.org          |
|         |                                |
|         |                                |
|         |           19-04-2004 20:34     |
|         |           Please respond to    |
|         |           gdal-dev             |
|         |                                |
|---------+-------------------------------->
  >---------------------------------------------------------------------------------------------------------------------------------------------|
  |                                                                                                                                             |
  |       To:       gdal-dev@remotesensing.org                                                                                                  |
  |       cc:                                                                                                                                   |
  |       Subject:  Re: [Gdal-dev] Transforming shapefiles from euref89 to ed50                                                                 |
  >---------------------------------------------------------------------------------------------------------------------------------------------|




Jakob Simon-Gaarde/Trapsoft Inc wrote:
> ogr2ogr -s_srs euref89_32n.wkt -t_srs ed50_32n.wkt out.shp stops_ll.shp
>
> where euref89_32n.wkt contains:
> PROJCS["ETRF_1989_UTM_Zone_32N",
>     GEOGCS["EUREF89_32N",
>         DATUM["ETRF_1989",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",9.0],
>         UNIT["Degree",0.0174532925199433]],

> and ed5089_32n.wkt contains:
> PROJCS["ED_1950_UTM_Zone_32N",
>     GEOGCS["GCS_European_1950",
>         DATUM["European_1950",
>             SPHEROID["International_1924",6378388,297]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.0174532925199433]],
> What am I doing wrong - is it the wkt-files? I got those from two
> shapefiles with the projections I need.

Jacob,

I believe the problem is that you are indicating a prime meridian
of "Greenwich" at 9 degrees east of greenwich in the euref89 .wkt file.
I suspect the unnamed commerical software is ignoring the prime meridian
while OGR is trying to take it into account.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev






From sylvain_duclos at yahoo.com  Tue Apr 20 12:05:50 2004
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] s57 / s52
In-Reply-To: <4085323E.9090101@pobox.com>
Message-ID: <20040420160550.55720.qmail@web12504.mail.yahoo.com>

Hi,

I'm working on the s52 plugin for OpenEV.

The CVS files are changing almost every day.
So pulling the tree right now might not give you
the best result.

I'll commit today (hopefully) a cleaned-up update.

I solve the last *big* S-52 rendering difficulty
yesterday that needed geospacial query (postGIS)
by using OpenGL selection mode.

So we're getting closer to a poor man ENC viewer self
contain in a single lib (libS52.so)

Note that the code does low level S-52 rendering.
Some could call it an 'S52 kernel' because upper
layer need to be coded to 'drive' this code. For
exemple if one what only the 'display base' objects.

At the moment I render/dump everything comming form 
OpenEV (OGR) on the screen. 


Cheers,

Sylvain.


--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Christian Gebauer Tveen wrote:
> > Hello,
> > 
> > I'm about to write some s57 rendering stuff using
> the ogr sw. I wondered
> > if anybody has any sw or knowledge on where  to
> look for sw that renders
> > the s57 in s52 format. I have a prototype
> rendering the data, but still
> > misses the data layering, proper colouring and
> data reduction + if
> > necessary caching/tiling of data.
> > 
> > I would very much appreciate any leads on where to
> look.
> 
> Christian,
> 
> There was a bunch of work done implementing S-52
> style rendering in the
> OpenEV application.  If you were to browse the
> OpenEV CVS tree you would
> find the S52 stuff in the contrib/S52 directory.   I
> don't think the S-52
> rendering support is enabled in any of the stock
> OpenEV binary releases.
> 
>    http://openev.sf.net/
> 
> The rendering is implemented via OpenGL calls in
> OpenEV.
> 
> Best regards,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev



	
		
__________________________________
Do you Yahoo!?
Yahoo! Photos: High-quality 4x6 digital prints for 25
http://photos.yahoo.com/ph/print_splash

From bmarchand at ara.com  Tue Apr 20 10:38:35 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets using GDALWarp API
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A808B@user06-machine.sed.ara.com>

Frank, 

Never mind, I found the problem. The reason it failed to work for the
datasets with world files was because I was opening these datasets read
only. While setting up the transformation I was trying to set the
projection of a read-only dataset because the projection was not set.
Then later when I was calling GDALCreateGenImgProjTransformer with the
GDALGetProjectionRef from the readonly dataset, it was getting an empty
string because the SetProjection failed and I didn't catch it because
I'm a bad boy and wasn't looking at the return type of SetProjection.

Sorry for the diversion.

Thanks,

Brian

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Brian Marchand
Sent: Tuesday, April 20, 2004 10:19 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

One more item, I'm using the logic as outlined in the Warp tutorial.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Brian Marchand
Sent: Tuesday, April 20, 2004 8:52 AM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

Frank,

Sorry, I failed to mention that the new "warped" data sets were created
with the TIFF driver. Originally I was trying to stick with the driver
of the original dataset but came up against the "create" restriction for
these datasets. 

It seems as if the failure occurs when I transform from a UTM to GCS. It
works if I just change the datum. The WKT is below. I also took your
suggestion and tried it with the gdalwarp utility using the below WKT in
prf files and it worked! So now I need to see what the utility is doing
that I'm not.  

I'm guessing this has nothing to do with the PNG, BMP, or JPEG drivers
but more to do with the fact that these formats come with world files.

Thanks,

Brian


Source SRS:

PROJCS["UTM Zone
17",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,
0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","89
01"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["L
at",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4269"]],PROJECTION["Trans
verse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_me
ridian",-81],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",
500000],PARAMETER["false_northing",0],UNIT["Meter",1]]

Target SRS:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,
0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901
"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat
",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]] 



-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, April 19, 2004 3:38 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problem transforming PNG, BMP, JPEG datasets
using GDALWarp API

Brian Marchand wrote:
> Hello,
> 
> I've come across a problem where PNG, BMP, and JPEG datasets are
zeroed 
> out during a GDALWarp transform. I'm not sure if other formats do
this, 
> but I've seen this happen on these types. I have no problem with TIFF 
> files so as a temporary work around for these types; I copy them to 
> geotiff datasets before the transform. I'd prefer not to do this, so
I'm 
> wondering if anyone else has seen this and if this is a bug or am I 
> missing a step. No errors are generated during the warp setup and
execution.

Brian,

I'm not sure how you are warping directly to PNG or JPEG.  These are
both
"createcopy" formats, that have to be written out sequentially from an
input file.  The warper cannot normally use these formats at all as
direct
output formats.  How did you?

Can you provide a specific example demonstration with the gdalwarp
commandline program?  If so, could you file it in bugzilla?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From cgt at navicon.dk  Tue Apr 20 16:29:03 2004
From: cgt at navicon.dk (Christian Gebauer Tveen)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] s57 / s52
In-Reply-To: <20040420160550.55720.qmail@web12504.mail.yahoo.com>
References: <20040420160550.55720.qmail@web12504.mail.yahoo.com>
Message-ID: <4085880F.2040101@navicon.dk>

Thank you both for the nice responses.

By a glance it looks very nice. I'll look into it and hopefully I can 
use it in my work. Someday I'll  finish my api, to contribute back.

Regards Christian



s duclos wrote:

>Hi,
>
>I'm working on the s52 plugin for OpenEV.
>
>The CVS files are changing almost every day.
>So pulling the tree right now might not give you
>the best result.
>
>I'll commit today (hopefully) a cleaned-up update.
>
>I solve the last *big* S-52 rendering difficulty
>yesterday that needed geospacial query (postGIS)
>by using OpenGL selection mode.
>
>So we're getting closer to a poor man ENC viewer self
>contain in a single lib (libS52.so)
>
>Note that the code does low level S-52 rendering.
>Some could call it an 'S52 kernel' because upper
>layer need to be coded to 'drive' this code. For
>exemple if one what only the 'display base' objects.
>
>At the moment I render/dump everything comming form 
>OpenEV (OGR) on the screen. 
>
>
>Cheers,
>
>Sylvain.
>
>
>--- Frank Warmerdam <warmerdam@pobox.com> wrote:
>  
>
>>Christian Gebauer Tveen wrote:
>>    
>>
>>>Hello,
>>>
>>>I'm about to write some s57 rendering stuff using
>>>      
>>>
>>the ogr sw. I wondered
>>    
>>
>>>if anybody has any sw or knowledge on where  to
>>>      
>>>
>>look for sw that renders
>>    
>>
>>>the s57 in s52 format. I have a prototype
>>>      
>>>
>>rendering the data, but still
>>    
>>
>>>misses the data layering, proper colouring and
>>>      
>>>
>>data reduction + if
>>    
>>
>>>necessary caching/tiling of data.
>>>
>>>I would very much appreciate any leads on where to
>>>      
>>>
>>look.
>>
>>Christian,
>>
>>There was a bunch of work done implementing S-52
>>style rendering in the
>>OpenEV application.  If you were to browse the
>>OpenEV CVS tree you would
>>find the S52 stuff in the contrib/S52 directory.   I
>>don't think the S-52
>>rendering support is enabled in any of the stock
>>OpenEV binary releases.
>>
>>   http://openev.sf.net/
>>
>>The rendering is implemented via OpenGL calls in
>>OpenEV.
>>
>>Best regards,
>>-- 
>>
>>    
>>
>---------------------------------------+--------------------------------------
>  
>
>>I set the clouds in motion - turn up   | Frank
>>Warmerdam, warmerdam@pobox.com
>>light and sound - activate the windows |
>>http://pobox.com/~warmerdam
>>and watch the world go round - Rush    | Geospatial
>>Programmer for Rent
>>
>>
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@remotesensing.org
>>http://remotesensing.org/mailman/listinfo/gdal-dev
>>    
>>
>
>
>
>	
>		
>__________________________________
>Do you Yahoo!?
>Yahoo! Photos: High-quality 4x6 digital prints for 25?
>http://photos.yahoo.com/ph/print_splash
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
>  
>



From Jakobs at trapezesoftware.com  Wed Apr 21 01:53:08 2004
From: Jakobs at trapezesoftware.com (Jakob Simon-Gaarde/Trapsoft Inc)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: Transforming shapefiles from euref89 to ed50
Message-ID: <OF337E5EFB.24CB1836-ONC1256E7D.00203CCB@trapezesoftware.com>

Thanks - It helped move the coordinates into the right area, but there is
still something wrong - here is what I am doing:

>>> import osr
>>> f=open('euref89_32n.wkt')
>>> euref = f.read()
>>> euref=euref.replace('\n','')
>>> f.close()
>>> f=open('ed50_32n.wkt')
>>> ed50=f.read()
>>> ed50=ed50.replace('\n','')
>>> sr_euref = osr.SpatialReference()
>>> sr_euref.ImportFromESRI([euref])
0
>>> sr_ed50=osr.SpatialReference()
>>> sr_ed50.ImportFromESRI([ed50])
0
>>> t=osr.CoordinateTransformation(sr_euref,sr_ed50)
>>> t.TransformPoint(560728.35341,6079776.68768)
(560731.3203323764, 6079908.6868730783, 0.0)

should have been
(560728.35341 ; 6079776.68768) -> (560808.942 ; 6079982.529)

Any ideas??

By the way isn't there a collection of wkt-files somewhere that are
garanteed correct?

by the way the unnamed tool is ESRI MapObjects based.

Med venlig hilsen / Best regards
Jakob Simon-Gaarde

Trapeze Software Europe A/S
Tlf. 87 44 16 00



Jakob Simon-Gaarde/Trapsoft Inc wrote:
> ogr2ogr -s_srs euref89_32n.wkt -t_srs ed50_32n.wkt out.shp stops_ll.shp
>
> where euref89_32n.wkt contains:
> PROJCS["ETRF_1989_UTM_Zone_32N",
>     GEOGCS["EUREF89_32N",
>         DATUM["ETRF_1989",
>             SPHEROID["WGS_1984",6378137.0,298.257223563]],
>         PRIMEM["Greenwich",9.0],
>         UNIT["Degree",0.0174532925199433]],

> and ed5089_32n.wkt contains:
> PROJCS["ED_1950_UTM_Zone_32N",
>     GEOGCS["GCS_European_1950",
>         DATUM["European_1950",
>             SPHEROID["International_1924",6378388,297]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.0174532925199433]],
> What am I doing wrong - is it the wkt-files? I got those from two
> shapefiles with the projections I need.

Jacob,

I believe the problem is that you are indicating a prime meridian
of "Greenwich" at 9 degrees east of greenwich in the euref89 .wkt file.
I suspect the unnamed commerical software is ignoring the prime meridian
while OGR is trying to take it into account.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev







From warmerdam at pobox.com  Wed Apr 21 09:41:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: Transforming shapefiles from euref89 to ed50
In-Reply-To: <OF337E5EFB.24CB1836-ONC1256E7D.00203CCB@trapezesoftware.com>
References: <OF337E5EFB.24CB1836-ONC1256E7D.00203CCB@trapezesoftware.com>
Message-ID: <40867A05.9070400@pobox.com>

Jakob Simon-Gaarde/Trapsoft Inc wrote:
>>>>t=osr.CoordinateTransformation(sr_euref,sr_ed50)
>>>>t.TransformPoint(560728.35341,6079776.68768)
> 
> (560731.3203323764, 6079908.6868730783, 0.0)
> 
> should have been
> (560728.35341 ; 6079776.68768) -> (560808.942 ; 6079982.529)
> 
> Any ideas??

Jakob,

I'm not sure why there is the difference.  But note that the WKT
you are using does not include any information about datum shifts,
so I would presume only an ellipsoid change is taking place.

> By the way isn't there a collection of wkt-files somewhere that are
> garanteed correct?

There is (was?) a sample translation of the EPSG database
translated into WKT made available when the OGC Coordinate
Transformation Specification was released.  However, it is far
from guaranteed correct.  Datum shift parameters are particularly
problematic.  For instance, for NAD27 to NAD83 translation there
are many available known methods including various simple
approximations (TOWGS84 style) that can be applied in some
location area, and shift file based conversions.  My point is, that
knowing the datum you have doesn't mean there is one unique way to
convert to WGS84.  There are many, and that is a big problem in
doing EPSG to WKT conversions.

I believe the GML CRS spec avoids this issue by not allowing
specification of shift parameters with the datum ... just offload
to somewhere else.

> by the way the unnamed tool is ESRI MapObjects based.

I'm pretty sure the ESRI projection engine keeps track of a
set of datum shift information which it looks up based on the
datum name, but which isn't explicit in the WKT.  The
OGRSpatialReference does *not* do that lookup.  If the TOWGS84
parameters aren't in the WKT then they are not applied.   I imagine
that is the difference.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Apr 21 11:50:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <4EDC292B-9290-11D8-8E75-000393A3C40C@rcs.ei.tum.de>
References: <5.0.2.1.2.20040414154753.00abe340@pop3> <407D4E09.60504@pobox.com> <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de> <40804FED.5060603@pobox.com> <4EDC292B-9290-11D8-8E75-000393A3C40C@rcs.ei.tum.de>
Message-ID: <4086983F.20407@pobox.com>

Eric D?nges wrote:
> 
> I've attached a patch to gdal_misc.cpp to this mail. It gives reasonable 
> results
> for the maps I've tried it with, but I'm no expert on numerics, so there 
> may be
> better ways to structure the code to avoid rounding errors.

Eric,

I have applied you patch ... I hope it works!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sholl at gmx.net  Wed Apr 21 12:51:05 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
Message-ID: <20040421185105.11847646@kermit.wg.de>

Dear developers,

while working with ogr2ogr and the GRASS-modules v.in.ogr I realised,
that the OGR Postgresql-driver does not support views.
Are there any interests to implement this also for the postgresql-driver
as done recently for the Oracle-OCI-Driver (Bug 394)?

Thanks for any comments on this.

Cheers
	Stephan Holl

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040421/bf9120ae/attachment.bin
From warmerdam at pobox.com  Wed Apr 21 13:17:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
In-Reply-To: <20040421185105.11847646@kermit.wg.de>
References: <20040421185105.11847646@kermit.wg.de>
Message-ID: <4086ACBE.9000507@pobox.com>

Stephan Holl wrote:
> Dear developers,
> 
> while working with ogr2ogr and the GRASS-modules v.in.ogr I realised,
> that the OGR Postgresql-driver does not support views.
> Are there any interests to implement this also for the postgresql-driver
> as done recently for the Oracle-OCI-Driver (Bug 394)?

Stephan,

I think this is desirable, and I would suggest you file a bug asking
for this enhancement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Apr 21 13:59:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Question about gdal_translate (NITF export)
In-Reply-To: <DFBBA0601F40D611AFF600508BB2F0EF028D0E02@ottawaex.drdc-rddc.gc.ca>
References: <DFBBA0601F40D611AFF600508BB2F0EF028D0E02@ottawaex.drdc-rddc.gc.ca>
Message-ID: <4086B69F.7080509@pobox.com>

Dinardo, George wrote:
> Hello Frank;
> 
> Thank you for the quick response and the detail provided.  I have tried a
> variety of options and the suggestions provided but to no avail.  Using the
> OPENEV interface I was able to create a geotiff file without a problem
> properly subsetted and rectified.  I then tried to use gdal_translate to
> create an NITF format file but the error "NITF format does not support
> complex integer data" is produced.  I am not able to subset the SAR image to
> provide you with a sample (>200MB), but OPENEV/gdal does an excellent job of
> subsetting the image to GeoTiff if this would be helpful.

George,

I have confirmed that the NITF writer does not support CInt16 (16bit
complex integer image type).  There is supposedly a CFloat32 support
but when I tried converting the CInt16 data to CFloat32 there was
the message:

warmerda@gdal[138]% gdal_translate -of NITF -ot CFloat32 -srcwin 0 0 100 100 da
_01.001 out.ntf
Input file size is 2500, 14795
Warning 1: Unsupported combination of PVTYPE(C) and NBPP(64).
1...10...20...30...40...50...60...70...80...90...100 - done.

I think this reflects a lack of testing of complex imagery support in
NITF.  I will try and dig into this a bit further.  You might want to
submit a bug report.

I will also investigate whether complex integer imagery is *supposed*
to be supported in NITF.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sholl at gmx.net  Wed Apr 21 14:23:46 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: PG-Driver supporting no views?
In-Reply-To: <4086ACBE.9000507@pobox.com>
References: <20040421185105.11847646@kermit.wg.de>
	<4086ACBE.9000507@pobox.com>
Message-ID: <20040421202346.7faf998a@kermit.wg.de>

Hello Frank, 

On Wed, 21 Apr 2004 13:17:50 -0400 Frank Warmerdam <warmerdam@pobox.com>
wrote:

> I think this is desirable, and I would suggest you file a bug asking
> for this enhancement.

Thanks for commenting this. I will fill a bug in bugzilla.

Cheers
	Stephan

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de



From sholl at gmx.net  Wed Apr 21 14:23:46 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Re: PG-Driver supporting no views?
In-Reply-To: <4086ACBE.9000507@pobox.com>
References: <20040421185105.11847646@kermit.wg.de>
	<4086ACBE.9000507@pobox.com>
Message-ID: <20040421202346.7faf998a@kermit.wg.de>

Hello Frank, 

On Wed, 21 Apr 2004 13:17:50 -0400 Frank Warmerdam <warmerdam@pobox.com>
wrote:

> I think this is desirable, and I would suggest you file a bug asking
> for this enhancement.

Thanks for commenting this. I will fill a bug in bugzilla.

Cheers
	Stephan

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de


From daniel112 at home.se  Thu Apr 22 02:28:48 2004
From: daniel112 at home.se (Daniel)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] CVSweb removed?
Message-ID: <40876620.6030005@home.se>

Hi

I've noticed that the web access to CVS has disapeard for GDAL, was this 
intentional or just a consequence of the latest changes of the page and 
tha hardware failure?

/Daniel

From alexamici at fastwebnet.it  Thu Apr 22 09:03:31 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Python Module Build
In-Reply-To: <CD3EE749-927B-11D8-BF13-003065D5F140@cmu.edu>
References: <17D2602E-8E85-11D8-A7CC-003065D5F140@cmu.edu> <200404152353.08457.alexamici@fastwebnet.it> <CD3EE749-927B-11D8-BF13-003065D5F140@cmu.edu>
Message-ID: <200404221503.31347.alexamici@fastwebnet.it>

Sean,

> >> so i refreshed what looked like an abandoned setup.py in the top
> >> directory.
> >> current gdal cvs builds and installs fine on linux with:
> >> $ ./configure <...> --without-python
> >> $ make
> >> $ python setup.py build
> >> $ python setup.py install
> >
> > it still works on linux. could you test if it works on MacOS X as well?

> That didn't work (a bit of output is below). It looks like it's not
> finding the gdal header files. Is there anyway to get tell it where
> they are? I'm sorry, I don't know much about python so I'm not much
> help.

mmm, that would be very strange, but i can't tell if that is really the 
problem.

note that, the command line of the failing program and the first few lines of 
the error message are usually the most important things to put in a 
build-failure report ;).

in your case i would need the whole output of the setup.py script. please send 
it to me as a private e-mail if it is more than a few tens of lines.

thanks,
alessandro

From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Thu Apr 22 09:36:21 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:08 2007
Subject: [Gdal-dev] Irregular geolocation grid
In-Reply-To: <4086983F.20407@pobox.com>
References: <5.0.2.1.2.20040414154753.00abe340@pop3> <407D4E09.60504@pobox.com> <E12C5E26-8EA9-11D8-9679-000393A3C40C@rcs.ei.tum.de> <40804FED.5060603@pobox.com> <4EDC292B-9290-11D8-8E75-000393A3C40C@rcs.ei.tum.de> <4086983F.20407@pobox.com>
Message-ID: <0AB31884-9462-11D8-B366-000393A3C40C@rcs.ei.tum.de>

Am 21.04.2004 um 17:50 schrieb Frank Warmerdam:

> I have applied you patch ... I hope it works!

Thanks, and so do I ... =8^)

While I haven't tested it with all that many maps, those that I did 
test with
gave correct results (i.e. the coordinates printed on the map matched 
those
calculated from the transform), including a map that was not north-up. 
The results
are roughly comparable to what the old GetGeoTransform() function 
calculated. The
equations themselves where calculated with a symbolic algebra program, 
with the
results exactly matching an earlier version of the code that used 
Gaussian
elmimination on a matrix.

To summarize, I'm pretty certain the code is correct, but would still 
appreciate
independent review from someone with more mathematical expertise.

Regards,
Eric


From warmerdam at pobox.com  Thu Apr 22 14:57:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] CVSweb removed?
In-Reply-To: <40876620.6030005@home.se>
References: <40876620.6030005@home.se>
Message-ID: <408815A2.10304@pobox.com>

Daniel wrote:
> Hi
> 
> I've noticed that the web access to CVS has disapeard for GDAL, was this 
> intentional or just a consequence of the latest changes of the page and 
> tha hardware failure?

Daniel,

I have fixed up the cvsweb script on remotesensing.org (hosed during the
machine switchover), and added a link back on the GDAL sourced download
page.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From TMitchell at lignum.com  Thu Apr 22 17:45:32 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
In-Reply-To: <4086ACBE.9000507@pobox.com>
Message-ID: <OFC553A98E.4F5CD5A1-ON88256E7E.00777D73-88256E7E.00778715@lignum.com>

Is this just because there isn't an entry in geometry_columns?

Tyler

gdal-dev-admin@remotesensing.org wrote on 04/21/2004 10:17:50 AM:

> Stephan Holl wrote:
> > Dear developers,
> > 
> > while working with ogr2ogr and the GRASS-modules v.in.ogr I realised,
> > that the OGR Postgresql-driver does not support views.
> > Are there any interests to implement this also for the 
postgresql-driver
> > as done recently for the Oracle-OCI-Driver (Bug 394)?
> 
> Stephan,
> 
> I think this is desirable, and I would suggest you file a bug asking
> for this enhancement.
> 
> Best regards,
> -- 
> 
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Thu Apr 22 18:14:28 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AE7@mailman.san.com>

Frank,
 
I have a thirty day trial of the Mrs. Id driver for windows VC++ Version
7.  How do I link it to the GDAL lib?  Are there instructions somewhere
on how to do this?  I also read on the user group that there may be
issues with the V7 driver from Lizardtech and GDAL because GDAL was
written to bind to the VC6 version of the mrsid lib.  Is this an issue?
I am using GDAL 1.1.9.
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040422/d36ed365/attachment.html
From xqcheng at supresoft.com.cn  Thu Apr 22 23:30:27 2004
From: xqcheng at supresoft.com.cn (xqcheng)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: JPEG compressed TIFF cannot be used with GDAL
Message-ID: <001201c428e3$54d94970$267072ca@Supresoft.wh>

Hi,
  I have some images which cannot open with GDAL, Can I mail it in CD to you?
  Then you can check it.
  Thanks
CXQ
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040423/512950c2/attachment.html
From daniel112 at home.se  Fri Apr 23 02:07:36 2004
From: daniel112 at home.se (Daniel)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] CVSweb removed?
In-Reply-To: <408815A2.10304@pobox.com>
References: <40876620.6030005@home.se> <408815A2.10304@pobox.com>
Message-ID: <4088B2A8.8060500@home.se>

Thanks! :)

Frank Warmerdam wrote:

> Daniel wrote:
>
>> Hi
>>
>> I've noticed that the web access to CVS has disapeard for GDAL, was 
>> this intentional or just a consequence of the latest changes of the 
>> page and tha hardware failure?
>
>
> Daniel,
>
> I have fixed up the cvsweb script on remotesensing.org (hosed during the
> machine switchover), and added a link back on the GDAL sourced download
> page.
>
> Best regards,



From dron at ak4719.spb.edu  Fri Apr 23 02:30:23 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AE7@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63AE7@mailman.san.com>
Message-ID: <20040423063023.GA7503@ak4719.spb.edu>

On Thu, Apr 22, 2004 at 04:14:28PM -0600, Chapman, Martin wrote:
> I have a thirty day trial of the Mrs. Id driver for windows VC++
> Version 7.  How do I link it to the GDAL lib?  Are there instructions
> somewhere on how to do this?  I also read on the user group that there
> may be issues with the V7 driver from Lizardtech and GDAL because GDAL
> was written to bind to the VC6 version of the mrsid lib.  Is this an
> issue?

It is all the same for GDAL what compiler version will be used, bacause
GDAL comes with full source code. It is completely defined by the DSDK
binaries you have which you can't rebuild. The main problem is in API
version. GDAL currently supports MrSID DSDK 3.1.x and 3.2.x. Newest
version (4.0) are not supported yet due to completely different API.

> I am using GDAL 1.1.9.

There are was few fixes in that driver in GDAL 1.2.0.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Fri Apr 23 02:33:05 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: JPEG compressed TIFF cannot be used with GDAL
In-Reply-To: <001201c428e3$54d94970$267072ca@Supresoft.wh>
References: <001201c428e3$54d94970$267072ca@Supresoft.wh>
Message-ID: <20040423063305.GB7503@ak4719.spb.edu>

On Fri, Apr 23, 2004 at 11:30:27AM +0800, xqcheng wrote:
>   I have some images which cannot open with GDAL, Can I mail it in CD
>   to you? Then you can check it.

What output do you have when trying to open that images using GDAL?
Could you post the output of the tiffinfo and tiffdump utilities for
your file?

tiffinfo and tiffdump are part of the libtiff package:

 http://www.remotesensing.org/libtiff/

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Fri Apr 23 03:16:28 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: JPEG compressed TIFF cannot be used with GDAL
In-Reply-To: <001201c428e3$54d94970$267072ca@Supresoft.wh>
References: <001201c428e3$54d94970$267072ca@Supresoft.wh>
Message-ID: <238F9D82-94F6-11D8-B366-000393A3C40C@rcs.ei.tum.de>

Am 23.04.2004 um 05:30 schrieb xqcheng:

> Hi,
> ? I have some images which cannot open with GDAL, Can I mail it in CD 
> to you?
> ? Then you can check it.
> ? Thanks
> CXQ

Does the libtiff you are using have JPEG compression enabled ? While 
GDAL seems to
do this if you use the internal libtiff stuff (and have JPEGs enabled 
for GDAL), I
think standalone libtiff usually does not have it enabled by default.

Eric

From MChapman at sanz.com  Fri Apr 23 03:52:44 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AE9@mailman.san.com>

Andrey,
 
Thanks for the response.  I finally figured out how to link to mrsid, and thanks to the code update provided by Bjoern everything built ok.  Now I am getting the error "not recognized as a supported file format".  So I need to know where to set that option. 
 
Thanks,
Martin

	-----Original Message----- 
	From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
	Sent: Fri 4/23/2004 12:30 AM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: Re: [Gdal-dev] Mrs ID driver for VC7
	
	

	On Thu, Apr 22, 2004 at 04:14:28PM -0600, Chapman, Martin wrote:
	> I have a thirty day trial of the Mrs. Id driver for windows VC++
	> Version 7.  How do I link it to the GDAL lib?  Are there instructions
	> somewhere on how to do this?  I also read on the user group that there
	> may be issues with the V7 driver from Lizardtech and GDAL because GDAL
	> was written to bind to the VC6 version of the mrsid lib.  Is this an
	> issue?
	
	It is all the same for GDAL what compiler version will be used, bacause
	GDAL comes with full source code. It is completely defined by the DSDK
	binaries you have which you can't rebuild. The main problem is in API
	version. GDAL currently supports MrSID DSDK 3.1.x and 3.2.x. Newest
	version (4.0) are not supported yet due to completely different API.
	
	> I am using GDAL 1.1.9.
	
	There are was few fixes in that driver in GDAL 1.2.0.
	
	                                                Andrey
	
	--
	Andrey V. Kiselev
	Home phone:  +7 812 5274898  ICQ# 26871517
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	


From dron at ak4719.spb.edu  Fri Apr 23 04:24:55 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AE9@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63AE9@mailman.san.com>
Message-ID: <20040423082455.GA4688@ak4719.spb.edu>

On Fri, Apr 23, 2004 at 01:52:44AM -0600, Chapman, Martin wrote:
> Thanks for the response.  I finally figured out how to link to mrsid,
> and thanks to the code update provided by Bjoern everything built ok.
> Now I am getting the error "not recognized as a supported file
> format".  So I need to know where to set that option. 


Do you see "MrSID" in the list of available formats displayed with
the 'gdalinfo --formats'?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From MChapman at sanz.com  Fri Apr 23 04:34:35 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AEA@mailman.san.com>

Andrey,
 
Yup.
 
Martin

	-----Original Message----- 
	From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
	Sent: Fri 4/23/2004 2:24 AM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: Re: [Gdal-dev] Mrs ID driver for VC7
	
	

	On Fri, Apr 23, 2004 at 01:52:44AM -0600, Chapman, Martin wrote:
	> Thanks for the response.  I finally figured out how to link to mrsid,
	> and thanks to the code update provided by Bjoern everything built ok.
	> Now I am getting the error "not recognized as a supported file
	> format".  So I need to know where to set that option.
	
	
	Do you see "MrSID" in the list of available formats displayed with
	the 'gdalinfo --formats'?
	
	
	--
	Andrey V. Kiselev
	Home phone:  +7 812 5274898  ICQ# 26871517
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	


From dron at ak4719.spb.edu  Fri Apr 23 06:00:41 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] [ANNOUNCE] Support for MrSID DSDK v. 4.0.x
Message-ID: <20040423100041.GA16941@ak4719.spb.edu>

Hello, folks,

I have made significant changes in the MrSID driver to support the DSDK
v.4.0. In fact the whole driver was reorginized and mostly rewritten, so
bugs are possible. Please, test the new driver with the your old DSDK's
(3.1 and 3.2) as well as with the new ones (4.0) --- all those libraries
should be supported now.

For Unix users configure magic should work to distinguish between the
DSDK versions, MSVC users should use flags in the nmake.opt.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Fri Apr 23 09:21:13 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
In-Reply-To: <OFC553A98E.4F5CD5A1-ON88256E7E.00777D73-88256E7E.00778715@lignum.com>
References: <OFC553A98E.4F5CD5A1-ON88256E7E.00777D73-88256E7E.00778715@lignum.com>
Message-ID: <40891849.5020904@pobox.com>

Tyler Mitchell wrote:
> Is this just because there isn't an entry in geometry_columns?
> 
> Tyler

Tyler,

The OGR PG driver isn't restricted to stuff that appears in GEOMETRY_COLUMNS.
I use the following magical query to get a list of tables that can be treated
as layers:

                          "DECLARE mycursor CURSOR for "
                          "SELECT relname FROM pg_class "
                          "WHERE relkind = 'r' AND relname !~ '^pg'" );

I think I copied that from somewhere else originally.  The GEOMETRY_COLUMNS
is currently only used to lookup SRID values.

So I think the problem is that my query only idenfies proper tables, not views.
If anyone can suggest an appropriate change to pick up queries too, I can update
it more easily.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Apr 23 09:45:43 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <20040420082209.GG10102@thuille.itc.it>
References: <20040419183939.GA5825@thuille.itc.it> <408428FC.9020102@pobox.com> <20040420082209.GG10102@thuille.itc.it>
Message-ID: <40891E07.9060406@pobox.com>

Markus Neteler wrote:

>  PROJCS["Monte_Mario_Italy_1_BZ",
>     GEOGCS["GCS_Monte_Mario",
>         DATUM["Monte_Mario",
>             SPHEROID["International_1924",6378388,297]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["False_Easting",500000.0],
>     PARAMETER["False_Northing",-5000000.0],
>     PARAMETER["Central_Meridian",9],
>     PARAMETER["Scale_Factor",0.9996],
>     PARAMETER["Latitude_Of_Origin",0],
>     UNIT["Meter",1]]

Markus,

I have committed a bunch of additional changes to GDAL to preserve the
PROJCS and GEOGCS names as citations in the geotiff files, and to recover
them when reading and forming WKT again.  I can't seem to find the
exact message that triggered me into doing that but it was related to
this thread.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From carl.anderson at co.fulton.ga.us  Fri Apr 23 10:58:48 2004
From: carl.anderson at co.fulton.ga.us (Carl Anderson)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
In-Reply-To: <40891849.5020904@pobox.com>
References: <OFC553A98E.4F5CD5A1-ON88256E7E.00777D73-88256E7E.00778715@lignum.com> <40891849.5020904@pobox.com>
Message-ID: <40892F28.6040100@co.fulton.ga.us>

Frank Warmerdam wrote:
> Tyler Mitchell wrote:
> 
>> Is this just because there isn't an entry in geometry_columns?
>>
>> Tyler
> 
> 
> Tyler,
> 
> The OGR PG driver isn't restricted to stuff that appears in 
> GEOMETRY_COLUMNS.
> I use the following magical query to get a list of tables that can be 
> treated
> as layers:
> 
>                          "DECLARE mycursor CURSOR for "
>                          "SELECT relname FROM pg_class "
>                          "WHERE relkind = 'r' AND relname !~ '^pg'" );
> 

                  "DECLARE mycursor CURSOR for "
                  "SELECT relname FROM pg_class "
                  "WHERE (relkind in ('r','v') AND relname !~ '^pg'" );

> I think I copied that from somewhere else originally.  The GEOMETRY_COLUMNS
> is currently only used to lookup SRID values.
> 
> So I think the problem is that my query only idenfies proper tables, not 
> views.
> If anyone can suggest an appropriate change to pick up queries too, I 
> can update
> it more easily.
> 
> Best regards,

Frank,

The current method scans and describes every table in the database. 
This can take a very long time to do.  I have 2000+ tables and the 
initialization of the OGR Pg driver takes almost a minute.  From a 
practical standing that precludes my using in user interfaces.

IMHO for large installations a "dictionary" of geometry tables will be 
necessary.  To see what is approved for use.  GEOMETRY_COLUMNS seems to 
have been designed with that in mind.

the OGR_PG driver also supports tables that lack geometry columns and 
using GEOMETRY_COLUMNS for that may be a stretch but leaving the 
f_geometry_column field as an empty string could be (mis)used to provide 
that support.

C.


-- 
Carl Anderson
GIS Manager, Fulton County E&CD
404.730.8026
carl.anderson@co.fulton.ga.us


From warmerdam at pobox.com  Fri Apr 23 11:14:51 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] PG-Driver supporting no views?
In-Reply-To: <40892F28.6040100@co.fulton.ga.us>
References: <OFC553A98E.4F5CD5A1-ON88256E7E.00777D73-88256E7E.00778715@lignum.com> <40891849.5020904@pobox.com> <40892F28.6040100@co.fulton.ga.us>
Message-ID: <408932EB.607@pobox.com>

Carl Anderson wrote:
>                  "DECLARE mycursor CURSOR for "
>                  "SELECT relname FROM pg_class "
>                  "WHERE (relkind in ('r','v') AND relname !~ '^pg'" );

Carl,

Cool, thats pretty easy. I will commit this change.

> The current method scans and describes every table in the database. This 
> can take a very long time to do.  I have 2000+ tables and the 
> initialization of the OGR Pg driver takes almost a minute.  From a 
> practical standing that precludes my using in user interfaces.

My approach to this has varied from RDBMS to RDBMS.  For the ODBC driver,
it is possible to optionally include a list of tables that you would like
to be represented in the layer list in the datasource name.  For the Oracle
link I only treat spatial tables (those in the equivelent to the GEOMETRY_COLUMNS
table) as layers.  The issue of supporting tables according to schemas has
also been raised.

I hope to provide several options in the postgres/postgis driver in the
relatively near future - perhaps the next month or two.

An underlying problem though is the OGR model where opening a datasource
results in identifying all layers and collecting schema information
for them all.  I should have set things up so that you could get the
list of layer names without the layer objects having to be fully populated
(as they are now).  Perhaps I will rectify this in some fashion when I
restructure OGR drivers to merge more closely with GDAL drivers.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cpadwick at digitalglobe.com  Fri Apr 23 16:51:25 2004
From: cpadwick at digitalglobe.com (Chris Padwick)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL with Kakadu, and Windows build environments in general 
Message-ID: <9BFBCD030602DE4A98B0C0850B91534F0D2EA2@COMAIL02.digitalglobe.com>

Hi,
 
In August 2003 Martin Daly posted instructions to this list for building
GDAL with kakadu, however, I can't decipher the attachment on the
message.  Does anyone have these instructions handy?
 
Much appreciated,
 
Chris Padwick
New Product Research And Development
Tel: 720 494 4825
DigitalGlobe
1900 Pike Road
Longmont CO USA 80501-6700
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040423/7441c199/attachment.html
From sab at vpac.org  Thu Apr 22 00:17:37 2004
From: sab at vpac.org (Shoaib Burq (VPAC))
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] no data column after gdal_translate
Message-ID: <Pine.LNX.4.44.0404221402320.2533-100000@hp.vpac.org>

Hi,

I'm trying to convert some lidar data tiles in ArcGrid Bin frmt to 
geotiff. Each tile is georefereneced and is around 2mb in size. 

After converting using:

"gdal_translate -ot float32 -of GTiff g1m3086000lh/hdr.adf 
g1m3086000lh.tiff'

I view the image in ENVI and notice a column of pixels at the left edge of 
the image with the data value of '***************'

The source data has fairly typical values along the edge. Plus this is 
happening for all the data tiles so it's probably not an issue with the 
source data. 

Has anyone come across this or know what could be causing it?

I run gdalinfo on both src and dest images: (I can't notice any anomalies)
SOURCE:
$ gdalinfo ./g1m3086000lh/hdr.adf 
Driver: AIG/Arc/Info Binary Grid
Size is 2080, 2080
Coordinate System is:
PROJCS["UTM Zone 55, Southern Hemisphere",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AXIS["Lat",NORTH],
        AXIS["Long",EAST],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",147],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["METERS",1]]
Origin = (307959.510000,6002039.510000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (  307959.510, 6002039.510) 
Lower Left  (  307959.510, 5999959.510) 
Upper Right (  310039.510, 6002039.510) 
Lower Right (  310039.510, 5999959.510) 
Center      (  308999.510, 6000999.510) 
Band 1 Block=260x4 Type=Float32, ColorInterp=Undefined
  Min=91.271 Max=99.230 
  NoData Value=-3.40282e+038

DESTINATION:
$ gdalinfo ./lidar_geotiff/g1m3086000lh.tiff 
Driver: GTiff/GeoTIFF
Size is 2080, 2080
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",147],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32755"]]
Origin = (307959.510000,6002039.510000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (  307959.510, 6002039.510) 
Lower Left  (  307959.510, 5999959.510) 
Upper Right (  310039.510, 6002039.510) 
Lower Right (  310039.510, 5999959.510) 
Center      (  308999.510, 6000999.510) 
Band 1 Block=2080x1 Type=Float32, ColorInterp=Gray
  NoData Value=-3.40282e+038

thanks for any help rendered.
-- 
Shoaib Burq


From larson at geofusion.com  Fri Apr 23 04:09:28 2004
From: larson at geofusion.com (Larson - GeoFusion)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GeoFusion announces free GeoPlayer_Mars download
Message-ID: <20040423080933.HRQY18566.out011.verizon.net@gf2>

GeoFusion Press Release

April 2004


3D Interactive Mars DEMO


Company: GeoFusion, Inc.

Industry: Interactive Global Visualization, Gaming, Homeland Security,
Military/Defense

Location: Watsonville, CA, United States of America 

 

Watsonville, CA - GeoFusion, Inc., a leading innovator in geospatial
technologies, announces GeoPlayer Mars, created with GeoMatrix Toolkit
technology, the 3D foundation to ESRI's ArcGLOBE software. 

 

Download the 32MB demo now at:  <http://www.geofusion.com/MarsDemo>
http://www.geofusion.com/MarsDemo

 

The GeoPlayer Mars program allows you to explore the Red Planet from outer
space to rocks on the Martian surface. You can fly through valleys and over
craters on desktop PCs and laptop computers. This program was created with
the C++ GeoMatrix Toolkit which provides an object-oriented API enabling
software developers to build interactive full-globe georeferenced
applications.  The toolkit SDK is a complete development environment that
includes modular libraries, example applications with source code, and
documentation.

 

GeoFusion's software technology provides the engine and infrastructure for
doing high performance global visualization of virtually unlimited amounts
of imagery, terrain, vector, and annotation data. It provides a way of
displaying vast amounts of heterogeneous geospatial information which is
shown in a global context while allowing for interactive zooming into
complex visually stunning scenes. It allows one to obtain a new meaning of
information through innovative ways of layering, animating and blending
together different types of geospatial information derived from maps,
satellite imagery, annotation, and vector data.

 

About GeoFusion, Inc.

Founded in 2001, GeoFusion, Inc., is a three-dimensional visualization
technology company dedicated to putting the earth on everybody's desktop.
This vision is being implemented through licensing of its GeoMatrix Toolkit,
strategic partner product developments, and custom application and rendering
services.  

 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040423/094104d8/attachment.html
From warmerdam at pobox.com  Fri Apr 23 17:34:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] no data column after gdal_translate
In-Reply-To: <Pine.LNX.4.44.0404221402320.2533-100000@hp.vpac.org>
References: <Pine.LNX.4.44.0404221402320.2533-100000@hp.vpac.org>
Message-ID: <40898BD2.7090707@pobox.com>

Shoaib Burq (VPAC) wrote:
> Hi,
> 
> I'm trying to convert some lidar data tiles in ArcGrid Bin frmt to 
> geotiff. Each tile is georefereneced and is around 2mb in size. 
> 
> After converting using:
> 
> "gdal_translate -ot float32 -of GTiff g1m3086000lh/hdr.adf 
> g1m3086000lh.tiff'
> 
> I view the image in ENVI and notice a column of pixels at the left edge of 
> the image with the data value of '***************'
> 
> The source data has fairly typical values along the edge. Plus this is 
> happening for all the data tiles so it's probably not an issue with the 
> source data. 
> 
> Has anyone come across this or know what could be causing it?

Shoaib,

I can't think of any obvious reason this would be happening.  Can you provide
me one sample tile privately so I can try to reproduce the problem?

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Apr 24 11:25:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: Information about GML in GDAL library
In-Reply-To: <HWO811$7E3FAE069DDBD336FFF88BCAFB335E06@libero.it>
References: <HWO811$7E3FAE069DDBD336FFF88BCAFB335E06@libero.it>
Message-ID: <408A86CF.1010906@pobox.com>

luca.arcara wrote:
> Dear Mr Warmerdam,
> 
>    I'm a student of the Politecnico di Milano in Computer Science Engineering; I'm attending a course of Geographic Information System.
> 
> For the exam I've to develop a project. The topic of this project is about the GML format. So, I've seen the GDAL library and more approfonditamente the classes linked to GML. These files have been developed by you and so I want ask you you something about them:
> 
> - What's the version that is supported by your GML files and classes? (2.0 , 2.1.2 , 3.0)

Luca,

Generally GML 2.x.

> - Can you give some more details about these GML classes and the possibility 
 > to update them in order to meet the specifications of new versions of GML
 > (like 3.1)?
> 
> I look forward to hearing from you.

It is my general intention to support GML 3 at some point in the future, though
likely only a subset since the geometry model of OGR is fundamentally "Simple
Features".

This to realize about the GDAL/OGR GML support:
  o It does *not* read the GML schema.   It inspects an instance document,
    and tries to guess what elements are features and geometries based on
    identifying elements that seem to match core GML geometry element names.

  o It does not attempt to do anything with coordinate systems, though I am
    planning quite a push this summer to support GML 3 coordinate systems.

  o It does not support "complex" attributes.  That is attribute properties
    with sub-nested XML structure are not supported.  Only simple properties
    with stringish values.

  o Parsing GML geometries is handled by a seperate portion of code.  The
    gdal/ogr/{ogr2gmlgeometry.cpp,gml2ogrgeometry.cpp} modules.

  o Nested feature collections are not supported.  The reader basically treats
    all features of a given feature class in a file as a layer regardless of the
    logical nesting of feature collections that might be present.

In a sense, because it ignores the schema this GML parser is very non-rigerous.

Are you interested in just using it directly?  Improving it?  Are there
particular issues with GML you are interested in addressing?

There are a variety of good GML libraries written in Java, but I am not
aware of many available libraries in C++.

If you are interested in improving the GML support as part of your project,
some potentially interesting things would be:

  o Adding optional support for schemas when reading.  Possibly just for
    the new GML Level 0 specification (this is a simplified schema system -
    much easier to support).

  o Adding some degree of GML 3 support (at the geometry and general feature
    level).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Apr 24 12:05:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] no data column after gdal_translate
In-Reply-To: <Pine.LNX.4.44.0404241820540.24599-100000@hp.vpac.org>
References: <Pine.LNX.4.44.0404241820540.24599-100000@hp.vpac.org>
Message-ID: <408A904E.5060706@pobox.com>

Shoaib Burq (VPAC) wrote:
> Thanks heaps Frank,
> 
> I'm greatful for the offer to help. 
> 
> Since my last email I have been looking at the NODATA value for the files 
> more carefully. I think this may be the issue. I suspect the  NoData 
> Value=-3.40282e+038 is not being read correctly by ENVI. is 
> there a way to specify another value while converting or even 
> after?

Shoaib,

Indeed the issue is undoubtedly with no-data handling.  I see there is
a "nodata" column on the left side of the image.  While GDAL will write
this nodata to the TIFF file it is done in a way that only GDAL recognises.
There is no way that ENVI could recognise the nodata value.  This is because
there is no standard way in TIFF to mark nodata values.

So, everything seems to be working fine.

There is no convenient way of altering the NODATA value in gdal_translate,
but you could in theory write a little script to adjust the values in the
resulting TIFF file.  For instance, I used the following mini script to adjust
the output TIFF file I produced from your coverage.

import gdal
from Numeric import *

ds = gdal.Open( 'out.tiff', gdal.GA_Update )

rband = ds.GetRasterBand(1)

for y in range(rband.YSize):
     dataline = rband.ReadAsArray( 0, y, rband.XSize, 1)

     dataline = choose( less( dataline, -100000), (dataline,0.0) )
     rband.WriteArray( dataline, 0, y )

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dberge at gmx.net  Sat Apr 24 02:09:03 2004
From: dberge at gmx.net (Diego Berge)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GeoTIFF from gdalwarp doesn't load properly on ArcMap
Message-ID: <408A047F.7020509@gmx.net>

Hello,

    After reprojecting a GTiff using gdalwarp, when trying to load the 
resulting file in ArcMap, it reports the file's projection information 
as "This file has no associated projection information".  It does 
*appear* (I still need to confirm, but the coordinates look sensible) to 
load the file in the correct place, though.

This is the input file data:
------------------------------------
$ gdalinfo etm165_47.tif
Driver: GTiff/GeoTIFF
Size is 15108, 14175
Coordinate System is:
PROJCS["WGS 84 / UTM zone 39N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.2572235629972,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree (supplier to define 
representation)",0.01745329251994328],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",51.00000000000005],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32639"]]
Origin = (-135105.000000,2190330.000000)
Pixel Size = (15.00000000,-15.00000000)
Metadata:
   TIFFTAG_IMAGEDESCRIPTION=Blue raster from e165_47
Corner Coordinates:
Upper Left  ( -135105.000, 2190330.000) ( 44d56'54.52"E, 19d42'23.00"N)
Lower Left  ( -135105.000, 1977705.000) ( 45d 0'59.27"E, 17d47'43.24"N)
Upper Right (   91515.000, 2190330.000) ( 47d 6'10.94"E, 19d45'58.89"N)
Lower Right (   91515.000, 1977705.000) ( 47d 8'49.23"E, 17d50'56.76"N)
Center      (  -21795.000, 2084017.500) ( 46d 3'13.07"E, 18d46'56.70"N)
Band 1 Block=15108x1 Type=Byte, ColorInterp=Red
Band 2 Block=15108x1 Type=Byte, ColorInterp=Green
Band 3 Block=15108x1 Type=Byte, ColorInterp=Blue
------------------------------------

This is the transformation command:

$ gdalwarp -t_srs "+proj=lcc +lat_1=33N +lat_2=17N +lat_0=25d05'22.236N 
+lon_0=48E +x_0=0 +y_0=0 +a=6378388 +b=6356912 
+towgs84=-143.0,-236.0,7.0" etm165_47.tif lcc165_47.tif

I've also tried the roughly equivalent:

$ gdalwarp -t_srs EPSG:2318 etm165_47.tif lcc165_47_epsg.tif

This is the result in the first case (lcc165_47.tif):
------------------------------------
$ gdalinfo lcc165_47.tif
Driver: GTiff/GeoTIFF
Size is 15299, 14376
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["unnamed",
         DATUM["unknown",
             SPHEROID["unnamed",6378388,297.0007450176942]],
         PRIMEM["Greenwich",0],
         UNIT[,0.0174532925199433]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",33],
     PARAMETER["standard_parallel_2",17],
     PARAMETER["latitude_of_origin",25.08951000004958],
     PARAMETER["central_meridian",48],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (-318119.632160,-584327.455283)
Pixel Size = (14.89885658,-14.89885658)
Corner Coordinates:
Upper Left  ( -318119.632, -584327.455) ( 44d56'54.19"E, 19d44'10.26"N)
Lower Left  ( -318119.632, -798513.417) ( 44d59'38.71"E, 17d47'40.12"N)
Upper Right (  -90182.025, -584327.455) ( 47d 8'5.21"E, 19d45'58.29"N)
Lower Right (  -90182.025, -798513.417) ( 47d 8'51.87"E, 17d49'26.16"N)
Center      ( -204150.829, -691420.436) ( 46d 3'22.44"E, 18d47'0.65"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
   Overviews: 7650x7188, 3825x3594, 1913x1797, 957x899, 479x450, 240x225
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
   Overviews: 7650x7188, 3825x3594, 1913x1797, 957x899, 479x450, 240x225
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
   Overviews: 7650x7188, 3825x3594, 1913x1797, 957x899, 479x450, 240x225
------------------------------------

And this is the result for the second case (lcc165_47_epsg.tif):
------------------------------------
$ gdalinfo lcc165_47_epsg.tif
Driver: GTiff/GeoTIFF
Size is 15299, 14375
Coordinate System is:
PROJCS["Ain el Abd / Aramco Lambert",
     GEOGCS["Ain el Abd",
         DATUM["unknown",
             SPHEROID["unretrievable - using WGS84",6378137,298.257223563,
                 AUTHORITY["EPSG","0"]],
             AUTHORITY["EPSG","6204"]],
         PRIMEM["Greenwich",0],
         UNIT["degree (supplier to define 
representation)",0.01745329251994328],
         AUTHORITY["EPSG","4204"]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",17.00000000000002],
     PARAMETER["standard_parallel_2",33.00000000000004],
     PARAMETER["latitude_of_origin",25.08951000000002],
     PARAMETER["central_meridian",48.00000000000005],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","2318"]]
Origin = (-318184.383793,-584287.299047)
Pixel Size = (14.89931340,-14.89931340)
Corner Coordinates:
Upper Left  ( -318184.384, -584287.299) ( 44d56'51.48"E, 19d44'11.19"N)
Lower Left  ( -318184.384, -798464.929) ( 44d59'36.04"E, 17d47'41.21"N)
Upper Right (  -90239.788, -584287.299) ( 47d 8'3.08"E, 19d45'59.26"N)
Lower Right (  -90239.788, -798464.929) ( 47d 8'49.77"E, 17d49'27.29"N)
Center      ( -204212.086, -691376.114) ( 46d 3'20.04"E, 18d47'1.68"N)
Band 1 Block=15299x1 Type=Byte, ColorInterp=Red
Band 2 Block=15299x1 Type=Byte, ColorInterp=Green
Band 3 Block=15299x1 Type=Byte, ColorInterp=Blue
------------------------------------

The input file loads without any problems, btw.  If needed, I could put 
a reduced version of the files (originals are about 600Mb) on an ftp site.

Any ideas?

Regards,
Diego Berge.



From Martin.Daly at cadcorp.com  Sun Apr 25 06:10:54 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: GDAL with Kakadu, and Windows build environments in general (Chris Padwick)
Message-ID: <DE8A435707FBA24392E5C67F58E294AA020B04@dev001_pdc.Dev.cadcorp.net>

Chris,
 
The attachment just contained a list of Kakadu source files required for a GDAL-compatible build.  I've pasted the list below.
 
Regards,
Martin
 
analysis.cpp
analysis_local.h
blocks.cpp
block_coding_common.cpp
block_coding_common.h
block_decoder.cpp
block_encoder.cpp
cache_local.h
client_local.h
client_server.cpp
client_server_comms.cpp
client_server_comms.h
codestream.cpp
colour.cpp
compressed.cpp
compressed_local.h
decoder.cpp
encoder.cpp
jp2.cpp
jp2.h
jp2_local.h
jp2_shared.h
kdu_block_coding.h
kdu_cache.cpp
kdu_cache.h
kdu_client.cpp
kdu_client.h
kdu_client_window.h
kdu_compressed.h
kdu_elementary.h
kdu_file_io.h
kdu_image.h
kdu_kernels.h
kdu_messaging.h
kdu_params.h
kdu_roi_processing.h
kdu_sample_processing.h
kdu_utils.h
kernels.cpp
messaging.cpp
mq_decoder.cpp
mq_decoder.h
mq_encoder.cpp
mq_encoder.h
msvc_block_decode_asm.h
msvc_colour_mmx_local.h
msvc_dwt_mmx_local.h
palette.cpp
params.cpp
params_local.h
roi.cpp
roi_local.h
roi_sources.cpp
roi_sources.h
synthesis.cpp
synthesis_local.h
transform_local.h

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040425/05093dc1/attachment.html
From martin.daly at cadcorp.com  Sun Apr 25 13:58:16 2004
From: martin.daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Once more, with feeling
Message-ID: <1082915896.408bfc3834fb2@messagecentre.easynetdial.co.uk>

Chris,

I checked the archive to make sure that you would be able to read the message, 
and just saw mime type garbage.  So here goes from another web mail client:

The attachment just contained a list of Kakadu source files required for a 
GDAL-compatible build.  I've pasted the list below.
 
Regards,
Martin
 
analysis.cpp
analysis_local.h
blocks.cpp
block_coding_common.cpp
block_coding_common.h
block_decoder.cpp
block_encoder.cpp
cache_local.h
client_local.h
client_server.cpp
client_server_comms.cpp
client_server_comms.h
codestream.cpp
colour.cpp
compressed.cpp
compressed_local.h
decoder.cpp
encoder.cpp
jp2.cpp
jp2.h
jp2_local.h
jp2_shared.h
kdu_block_coding.h
kdu_cache.cpp
kdu_cache.h
kdu_client.cpp
kdu_client.h
kdu_client_window.h
kdu_compressed.h
kdu_elementary.h
kdu_file_io.h
kdu_image.h
kdu_kernels.h
kdu_messaging.h
kdu_params.h
kdu_roi_processing.h
kdu_sample_processing.h
kdu_utils.h
kernels.cpp
messaging.cpp
mq_decoder.cpp
mq_decoder.h
mq_encoder.cpp
mq_encoder.h
msvc_block_decode_asm.h
msvc_colour_mmx_local.h
msvc_dwt_mmx_local.h
palette.cpp
params.cpp
params_local.h
roi.cpp
roi_local.h
roi_sources.cpp
roi_sources.h
synthesis.cpp
synthesis_local.h
transform_local.h




---------------------------------------------------
This mail sent through http://www.easynetdial.co.uk

From jk_nzd at hotmail.com  Mon Apr 26 01:48:01 2004
From: jk_nzd at hotmail.com (jk nz)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
Message-ID: <BAY14-F42D40vcOXE2A00015a49@hotmail.com>

Has anyone tried using GDAL from the Borland Delphi language?

I have been mostly sucessful in doing so, but having problems reading pixel 
values from an esri grid..

Does anyone have sample code of reading pixels? C is ok .. I have seen 
sample of reading blocks but that wasnt quite what I wanted ...

I do not know how to extract the pixel values as I dont know how they are 
laid out in memory .. is it a 2d grid, or a 1d grid?

eg is it laid out in memory as

row1 [px1][px2][px3][...]
row2 (possible some memory gap in between rows) [px10][px11][...]

or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at address 
pxN+ sizeof(px)) [px10][...]

It appears I have to use pointer arithmetic to index the block, ie pixelN := 
block[index] works fine if it is a 1d grid in memory, but its not so easy if 
its a 2d grid, as the operator block[x,y] is not valid in delphi

So I'm trying to figure out what happens at the end of a row? is the first 
element of the next row located in the next memory address or ...?

Any help appreciated

Regards

JK.


Here is my code: - everything appears to work, apart from reading individual 
pixel values.

            for i := 0 to nYBlocks - 1 do // i = Y block index
              for j := 0 to nYBlocks - 1 do // j = X block index
              begin
                GDALReadBlock(RasterBand, j, i, pafScanline);

                // compute which part of the block is valid for partial 
blocks
                if(i * nBlockYSize > nY) then
                  nYValid := nY - i * nBlockYSize
                else
                  nYValid := nBlockYSize;

                if(j * nBlockXSize > nX) then
                  nXValid := nX - j * nBlockXSize
                else
                  nXValid := nBlockXSize;

                doubleptr := @pafScanline;

                for k := 0 to nYValid - 1 do // k = Y cell index
                  for l := 0 to nXValid - 1 do // l = X cell index
                  begin
                    inc(doubleptr);
                    cell := doubleptr^;
                    // debugging stuff, did we get an ok value or not?
                    if cell > 0 then
                      ShowMessage(FloatToStr(cell));
                  end; // for l, for k
              end; // for j, for i

_________________________________________________________________
Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream


From Jakobs at trapezesoftware.com  Mon Apr 26 05:45:19 2004
From: Jakobs at trapezesoftware.com (Jakob Simon-Gaarde/Trapsoft Inc)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: Transforming shapefiles from euref89 to ed50
Message-ID: <OFA1BF84C0.81576B1A-ONC1256E82.00315A7B@trapezesoftware.com>

Thanks for your insight Frank.

Unfortunately I haven't come further in my stroggle of transforming those
layers (many hours of frustration). Maybe the problem is my restricted
knowlegde about  the whole issue. I was wondering if anyone would like to
take the challenge and try transforming this
http://80.160.199.114/test/utm_ed50_z32n.zip to this
http://80.160.199.114/test/utm_euref89_z32n.zip.

Med venlig hilsen / Best regards
Jakob Simon-Gaarde

Trapeze Software Europe A/S
Tlf. 87 44 16 00


|---------+-------------------------------->
|         |           Frank Warmerdam      |
|         |           <warmerdam@pobox.com>|
|         |           Sent by:             |
|         |           gdal-dev-admin@remote|
|         |           sensing.org          |
|         |                                |
|         |                                |
|         |           21-04-2004 15:41     |
|         |           Please respond to    |
|         |           gdal-dev             |
|         |                                |
|---------+-------------------------------->
  >------------------------------------------------------------------------------------------------------------------------------|
  |                                                                                                                              |
  |       To:       gdal-dev@remotesensing.org                                                                                   |
  |       cc:                                                                                                                    |
  |       Subject:  Re: [Gdal-dev] Re: Transforming shapefiles from euref89 to ed50                                              |
  >------------------------------------------------------------------------------------------------------------------------------|




Jakob Simon-Gaarde/Trapsoft Inc wrote:
>>>>t=osr.CoordinateTransformation(sr_euref,sr_ed50)
>>>>t.TransformPoint(560728.35341,6079776.68768)
>
> (560731.3203323764, 6079908.6868730783, 0.0)
>
> should have been
> (560728.35341 ; 6079776.68768) -> (560808.942 ; 6079982.529)
>
> Any ideas??

Jakob,

I'm not sure why there is the difference.  But note that the WKT
you are using does not include any information about datum shifts,
so I would presume only an ellipsoid change is taking place.

> By the way isn't there a collection of wkt-files somewhere that are
> garanteed correct?

There is (was?) a sample translation of the EPSG database
translated into WKT made available when the OGC Coordinate
Transformation Specification was released.  However, it is far
from guaranteed correct.  Datum shift parameters are particularly
problematic.  For instance, for NAD27 to NAD83 translation there
are many available known methods including various simple
approximations (TOWGS84 style) that can be applied in some
location area, and shift file based conversions.  My point is, that
knowing the datum you have doesn't mean there is one unique way to
convert to WGS84.  There are many, and that is a big problem in
doing EPSG to WKT conversions.

I believe the GML CRS spec avoids this issue by not allowing
specification of shift parameters with the datum ... just offload
to somewhere else.

> by the way the unnamed tool is ESRI MapObjects based.

I'm pretty sure the ESRI projection engine keeps track of a
set of datum shift information which it looks up based on the
datum name, but which isn't explicit in the WKT.  The
OGRSpatialReference does *not* do that lookup.  If the TOWGS84
parameters aren't in the WKT then they are not applied.   I imagine
that is the difference.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev






From Jakobs at trapezesoftware.com  Mon Apr 26 06:44:46 2004
From: Jakobs at trapezesoftware.com (Jakob Simon-Gaarde/Trapsoft Inc)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: Transforming shapefiles from euref89 to ed50
Message-ID: <OFFA6F98C1.7765E98E-ONC1256E82.003A60AA@trapezesoftware.com>

... Correction the challenge was the other way around from euref89 to ed50.
The ed50 fileset is correct transformed using a GUI tool, and my problem is
that I can't make gdal/ogr do the transformation like that tools does.

Med venlig hilsen / Best regards
Jakob Simon-Gaarde

Trapeze Software Europe A/S
Tlf. 87 44 16 00



From afinley at gis.umn.edu  Mon Apr 26 09:42:50 2004
From: afinley at gis.umn.edu (Andrew Finley)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
In-Reply-To: <BAY14-F42D40vcOXE2A00015a49@hotmail.com>
References: <BAY14-F42D40vcOXE2A00015a49@hotmail.com>
Message-ID: <1082986970.16919.8.camel@populus>

Hi JK,
I think there is a similar chunk of code in the list archives, but here
it is again.  Attached are two files, getPixelValueGdal.cpp and
parameterfile.  The parameterfile describes the image location and the
coordinate file (i.e., point xy locations).  This is set up for ERDAS
images, I think you will only have to change the driver for it to read
grids.  Hope this helps.  Let me know if you have any questions.
-Andy


On Mon, 2004-04-26 at 00:48, jk nz wrote:
> Has anyone tried using GDAL from the Borland Delphi language?
> 
> I have been mostly sucessful in doing so, but having problems reading pixel 
> values from an esri grid..
> 
> Does anyone have sample code of reading pixels? C is ok .. I have seen 
> sample of reading blocks but that wasnt quite what I wanted ...
> 
> I do not know how to extract the pixel values as I dont know how they are 
> laid out in memory .. is it a 2d grid, or a 1d grid?
> 
> eg is it laid out in memory as
> 
> row1 [px1][px2][px3][...]
> row2 (possible some memory gap in between rows) [px10][px11][...]
> 
> or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at address 
> pxN+ sizeof(px)) [px10][...]
> 
> It appears I have to use pointer arithmetic to index the block, ie pixelN := 
> block[index] works fine if it is a 1d grid in memory, but its not so easy if 
> its a 2d grid, as the operator block[x,y] is not valid in delphi
> 
> So I'm trying to figure out what happens at the end of a row? is the first 
> element of the next row located in the next memory address or ...?
> 
> Any help appreciated
> 
> Regards
> 
> JK.
> 
> 
> Here is my code: - everything appears to work, apart from reading individual 
> pixel values.
> 
>             for i := 0 to nYBlocks - 1 do // i = Y block index
>               for j := 0 to nYBlocks - 1 do // j = X block index
>               begin
>                 GDALReadBlock(RasterBand, j, i, pafScanline);
> 
>                 // compute which part of the block is valid for partial 
> blocks
>                 if(i * nBlockYSize > nY) then
>                   nYValid := nY - i * nBlockYSize
>                 else
>                   nYValid := nBlockYSize;
> 
>                 if(j * nBlockXSize > nX) then
>                   nXValid := nX - j * nBlockXSize
>                 else
>                   nXValid := nBlockXSize;
> 
>                 doubleptr := @pafScanline;
> 
>                 for k := 0 to nYValid - 1 do // k = Y cell index
>                   for l := 0 to nXValid - 1 do // l = X cell index
>                   begin
>                     inc(doubleptr);
>                     cell := doubleptr^;
>                     // debugging stuff, did we get an ok value or not?
>                     if cell > 0 then
>                       ShowMessage(FloatToStr(cell));
>                   end; // for l, for k
>               end; // for j, for i
> 
> _________________________________________________________________
> Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
-- 
Andrew Finley, Research Fellow
Department of Forest Resources
College of Natural Resources           
University of Minnesota
305 Green Hall
1530 Cleveland Avenue N.
St. Paul, MN 55108

Ph 612-624-1714 office
www.cnr.umn.edu/FR/people/facstaff/finley/index.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getPixelValueGdal.cpp
Type: text/x-c++
Size: 4654 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040426/610735b5/getPixelValueGdal.bin
-------------- next part --------------
COORD_FILE 	st_louis_cloudfree_pts.csv
OUT_FILE	/st_louis_cloudfree_pts_bands.csv
COORD_FILE_ROWS	3674
COORD_FILE_COLS 16
XCOORD_COLUMN	6
YCOORD_COLUMN	7
IMAGE_FILE	ssf_raw_8bit_stlouis.img
From neteler at itc.it  Mon Apr 26 11:00:07 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <40891E07.9060406@pobox.com>
References: <20040419183939.GA5825@thuille.itc.it> <408428FC.9020102@pobox.com> <20040420082209.GG10102@thuille.itc.it> <40891E07.9060406@pobox.com>
Message-ID: <20040426150007.GE23757@thuille.itc.it>

On Fri, Apr 23, 2004 at 09:45:43AM -0400, Frank Warmerdam wrote:
> Markus Neteler wrote:
> 
> > PROJCS["Monte_Mario_Italy_1_BZ",
> >    GEOGCS["GCS_Monte_Mario",
> >        DATUM["Monte_Mario",
> >            SPHEROID["International_1924",6378388,297]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["Degree",0.017453292519943295]],
> >    PROJECTION["Transverse_Mercator"],
> >    PARAMETER["False_Easting",500000.0],
> >    PARAMETER["False_Northing",-5000000.0],
> >    PARAMETER["Central_Meridian",9],
> >    PARAMETER["Scale_Factor",0.9996],
> >    PARAMETER["Latitude_Of_Origin",0],
> >    UNIT["Meter",1]]
> 
> Markus,
> 
> I have committed a bunch of additional changes to GDAL to preserve the
> PROJCS and GEOGCS names as citations in the geotiff files, and to recover
> them when reading and forming WKT again.  I can't seem to find the
> exact message that triggered me into doing that but it was related to
> this thread.


Thanks, I have retried it:

gdalwarp -order 2 -t_srs '+proj=tmerc +lat_0=0 +lon_0=9 \
      +k=0.999600 +x_0=500000 +y_0=-5000000 +ellps=intl +units=m \
      +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68' \
      -tr 28.5 28.5 p192r028_7t20010826_z32_nn10.tif p192r028_7t20010826_z32_nn10_PBZ.tif

# creates:
gdalinfo p192r028_7t20010826_z32_nn10_PBZ.tif
Driver: GTiff/GeoTIFF
Size is 8765, 7797
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["International 1909 (Hayford)",
        DATUM["unknown",
            SPHEROID["unnamed",6378388,297.000000000005]],
        PRIMEM["Greenwich",0],
        UNIT[,0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",-5000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (609787.107032,213299.997571)
Pixel Size = (28.50000000,-28.50000000)
Corner Coordinates:
Upper Left  (  609787.107,  213299.998) ( 10d26'44.63"E, 47d 3'47.46"N)
Lower Left  (  609787.107,   -8914.502) ( 10d23'40.03"E, 45d 3'49.97"N)
Upper Right (  859589.607,  213299.998) ( 13d43'39.92"E, 46d58'28.59"N)
Lower Right (  859589.607,   -8914.502) ( 13d33'38.62"E, 44d58'52.44"N)
Center      (  734688.357,  102192.748) ( 12d 1'57.18"E, 46d 1'55.89"N)
Band 1 Block=8765x1 Type=Byte, ColorInterp=Gray

#... which looks ok, but then, when cutting out a piece:

gdal_translate -of GTiff -projwin 610000 205000 767840 118240 \
       p192r028_7t20010826_z32_nn10_PBZ.tif \
       p192r028_7t20010826_z32_nn10_PBZ_small.tif
Input file size is 8765, 7797
Computed -srcwin 7 291 5538 3044 from projected window.
0.Segmentation fault

With gdb I got:
...
Program received signal SIGSEGV, Segmentation fault.
0x42074462 in _int_malloc () from /lib/tls/libc.so.6
(gdb) bt
#0  0x42074462 in _int_malloc () from /lib/tls/libc.so.6
#1  0x4207378d in malloc () from /lib/tls/libc.so.6
#2  0x40160957 in VSIMalloc () from /usr/local/lib/libgdal.so.1
#3  0x40143fe7 in _TIFFmalloc () from /usr/local/lib/libgdal.so.1
#4  0x4013e2d7 in TIFFClientOpen () from /usr/local/lib/libgdal.so.1
#5  0x40143f89 in TIFFOpen () from /usr/local/lib/libgdal.so.1
#6  0x4014f980 in XTIFFOpen () from /usr/local/lib/libgdal.so.1
#7  0x400dc542 in GTiffCreate(char const*, int, int, int, GDALDataType, char**) ()
   from /usr/local/lib/libgdal.so.1
#8  0x400dcc8e in GTiffCreateCopy(char const*, GDALDataset*, int, char**, int (*)(double, char const*, void*), void*) () from /usr/local/lib/libgdal.so.1
#9  0x4015181e in GDALDriver::CreateCopy(char const*, GDALDataset*, int, char**, int (*)(double, char const*, void*), void*) () from /usr/local/lib/libgdal.so.1
#10 0x40151c75 in GDALCreateCopy () from /usr/local/lib/libgdal.so.1
#11 0x0804a142 in main ()
#12 0x42015704 in __libc_start_main () from /lib/tls/libc.so.6

Maybe there is still an initialization problem left.

Kind regards

 Markus Neteler


From neteler at itc.it  Mon Apr 26 11:46:30 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <40891E07.9060406@pobox.com>
References: <20040419183939.GA5825@thuille.itc.it> <408428FC.9020102@pobox.com> <20040420082209.GG10102@thuille.itc.it> <40891E07.9060406@pobox.com>
Message-ID: <20040426154630.GA2323@thuille.itc.it>

On Fri, Apr 23, 2004 at 09:45:43AM -0400, Frank Warmerdam wrote:
> Markus Neteler wrote:
> 
> > PROJCS["Monte_Mario_Italy_1_BZ",
> >    GEOGCS["GCS_Monte_Mario",
> >        DATUM["Monte_Mario",
> >            SPHEROID["International_1924",6378388,297]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["Degree",0.017453292519943295]],
> >    PROJECTION["Transverse_Mercator"],
> >    PARAMETER["False_Easting",500000.0],
> >    PARAMETER["False_Northing",-5000000.0],
> >    PARAMETER["Central_Meridian",9],
> >    PARAMETER["Scale_Factor",0.9996],
> >    PARAMETER["Latitude_Of_Origin",0],
> >    UNIT["Meter",1]]
> 
> Markus,
> 
> I have committed a bunch of additional changes to GDAL to preserve the
> PROJCS and GEOGCS names as citations in the geotiff files, and to recover
> them when reading and forming WKT again.  I can't seem to find the
> exact message that triggered me into doing that but it was related to
> this thread.


Frank,

great work (as usual)! This also closes the bug report
 http://bugzilla.remotesensing.org/show_bug.cgi?id=557

The user defined datum (+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68')
is eaten and not preserved, but maybe it cannot be kept.

Thanks for the quick fix (I'm going to teach GIS using these
data later this week).

Best regards,

 Markus Neteler


From neteler at itc.it  Mon Apr 26 12:07:17 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] AAIGrid driver: small PROJCS detection problem
In-Reply-To: <20040426150007.GE23757@thuille.itc.it>
References: <20040419183939.GA5825@thuille.itc.it> <408428FC.9020102@pobox.com> <20040420082209.GG10102@thuille.itc.it> <40891E07.9060406@pobox.com> <20040426150007.GE23757@thuille.itc.it>
Message-ID: <20040426160717.GB2366@thuille.itc.it>

On Mon, Apr 26, 2004 at 05:00:07PM +0200, Markus Neteler wrote:
> On Fri, Apr 23, 2004 at 09:45:43AM -0400, Frank Warmerdam wrote:
> > Markus Neteler wrote:
> > 
> > > PROJCS["Monte_Mario_Italy_1_BZ",
> > >    GEOGCS["GCS_Monte_Mario",
> > >        DATUM["Monte_Mario",
> > >            SPHEROID["International_1924",6378388,297]],
> > >        PRIMEM["Greenwich",0],
> > >        UNIT["Degree",0.017453292519943295]],
> > >    PROJECTION["Transverse_Mercator"],
> > >    PARAMETER["False_Easting",500000.0],
> > >    PARAMETER["False_Northing",-5000000.0],
> > >    PARAMETER["Central_Meridian",9],
> > >    PARAMETER["Scale_Factor",0.9996],
> > >    PARAMETER["Latitude_Of_Origin",0],
> > >    UNIT["Meter",1]]
> > 
> > Markus,
> > 
> > I have committed a bunch of additional changes to GDAL to preserve the
> > PROJCS and GEOGCS names as citations in the geotiff files, and to recover
> > them when reading and forming WKT again.  I can't seem to find the
> > exact message that triggered me into doing that but it was related to
> > this thread.
> 
> 
> Thanks, I have retried it:
> 
> gdalwarp -order 2 -t_srs '+proj=tmerc +lat_0=0 +lon_0=9 \
>       +k=0.999600 +x_0=500000 +y_0=-5000000 +ellps=intl +units=m \
>       +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68' \
>       -tr 28.5 28.5 p192r028_7t20010826_z32_nn10.tif p192r028_7t20010826_z32_nn10_PBZ.tif
> 
> # creates:
> gdalinfo p192r028_7t20010826_z32_nn10_PBZ.tif
> Driver: GTiff/GeoTIFF
> Size is 8765, 7797
> Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["International 1909 (Hayford)",
>         DATUM["unknown",
>             SPHEROID["unnamed",6378388,297.000000000005]],
>         PRIMEM["Greenwich",0],
>         UNIT[,0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",9],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",-5000000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (609787.107032,213299.997571)
> Pixel Size = (28.50000000,-28.50000000)
> Corner Coordinates:
> Upper Left  (  609787.107,  213299.998) ( 10d26'44.63"E, 47d 3'47.46"N)
> Lower Left  (  609787.107,   -8914.502) ( 10d23'40.03"E, 45d 3'49.97"N)
> Upper Right (  859589.607,  213299.998) ( 13d43'39.92"E, 46d58'28.59"N)
> Lower Right (  859589.607,   -8914.502) ( 13d33'38.62"E, 44d58'52.44"N)
> Center      (  734688.357,  102192.748) ( 12d 1'57.18"E, 46d 1'55.89"N)
> Band 1 Block=8765x1 Type=Byte, ColorInterp=Gray
> 
> #... which looks ok, but then, when cutting out a piece:
> 
> gdal_translate -of GTiff -projwin 610000 205000 767840 118240 \
>        p192r028_7t20010826_z32_nn10_PBZ.tif \
>        p192r028_7t20010826_z32_nn10_PBZ_small.tif
> Input file size is 8765, 7797
> Computed -srcwin 7 291 5538 3044 from projected window.
> 0.Segmentation fault
> 
> With gdb I got:
> ...
> Program received signal SIGSEGV, Segmentation fault.
> 0x42074462 in _int_malloc () from /lib/tls/libc.so.6
> (gdb) bt
> #0  0x42074462 in _int_malloc () from /lib/tls/libc.so.6
> #1  0x4207378d in malloc () from /lib/tls/libc.so.6
> #2  0x40160957 in VSIMalloc () from /usr/local/lib/libgdal.so.1
> #3  0x40143fe7 in _TIFFmalloc () from /usr/local/lib/libgdal.so.1
> #4  0x4013e2d7 in TIFFClientOpen () from /usr/local/lib/libgdal.so.1
> #5  0x40143f89 in TIFFOpen () from /usr/local/lib/libgdal.so.1
> #6  0x4014f980 in XTIFFOpen () from /usr/local/lib/libgdal.so.1
> #7  0x400dc542 in GTiffCreate(char const*, int, int, int, GDALDataType, char**) ()
>    from /usr/local/lib/libgdal.so.1
> #8  0x400dcc8e in GTiffCreateCopy(char const*, GDALDataset*, int, char**, int (*)(double, char const*, void*), void*) () from /usr/local/lib/libgdal.so.1
> #9  0x4015181e in GDALDriver::CreateCopy(char const*, GDALDataset*, int, char**, int (*)(double, char const*, void*), void*) () from /usr/local/lib/libgdal.so.1
> #10 0x40151c75 in GDALCreateCopy () from /usr/local/lib/libgdal.so.1
> #11 0x0804a142 in main ()
> #12 0x42015704 in __libc_start_main () from /lib/tls/libc.so.6
> 
> Maybe there is still an initialization problem left.


Sorry for the confusion (didn't want to send this one...). 
The problem above was related to a missing 'make distclean' before recompiling.

So, after a clean built everything works well.
 
Kind regards
 
  Markus Neteler

From br at forstware.de  Mon Apr 26 12:39:08 2004
From: br at forstware.de (Bjoern Ruff)
Date: Wed Nov 21 11:49:09 2007
Subject: AW: [Gdal-dev] Mrs ID driver for VC7
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AE9@mailman.san.com>
Message-ID: <200404261648.i3QGmOg3008754@forstw.forstware.de>

Hello Martin,

could you tell me how you got the MrSid DSDK 4.0 trial version?
I could not find it on Lizardtech's homepage. 

Thanks, Bjoern

> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] Im Auftrag von 
> Chapman, Martin
> Gesendet: Freitag, 23. April 2004 09:53
> An: gdal-dev@remotesensing.org; gdal-dev@remotesensing.org
> Betreff: RE: [Gdal-dev] Mrs ID driver for VC7
> 
> Andrey,
>  
> Thanks for the response.  I finally figured out how to link 
> to mrsid, and thanks to the code update provided by Bjoern 
> everything built ok.  Now I am getting the error "not 
> recognized as a supported file format".  So I need to know 
> where to set that option. 
>  
> Thanks,
> Martin
> 
> 	-----Original Message----- 
> 	From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
> 	Sent: Fri 4/23/2004 12:30 AM 
> 	To: gdal-dev@remotesensing.org 
> 	Cc: 
> 	Subject: Re: [Gdal-dev] Mrs ID driver for VC7
> 	
> 	
> 
> 	On Thu, Apr 22, 2004 at 04:14:28PM -0600, Chapman, Martin wrote:
> 	> I have a thirty day trial of the Mrs. Id driver for 
> windows VC++
> 	> Version 7.  How do I link it to the GDAL lib?  Are 
> there instructions
> 	> somewhere on how to do this?  I also read on the user 
> group that there
> 	> may be issues with the V7 driver from Lizardtech and 
> GDAL because GDAL
> 	> was written to bind to the VC6 version of the mrsid 
> lib.  Is this an
> 	> issue?
> 	
> 	It is all the same for GDAL what compiler version will 
> be used, bacause
> 	GDAL comes with full source code. It is completely 
> defined by the DSDK
> 	binaries you have which you can't rebuild. The main 
> problem is in API
> 	version. GDAL currently supports MrSID DSDK 3.1.x and 
> 3.2.x. Newest
> 	version (4.0) are not supported yet due to completely 
> different API.
> 	
> 	> I am using GDAL 1.1.9.
> 	
> 	There are was few fixes in that driver in GDAL 1.2.0.
> 	
> 	                                                Andrey
> 	
> 	--
> 	Andrey V. Kiselev
> 	Home phone:  +7 812 5274898  ICQ# 26871517
> 	_______________________________________________
> 	Gdal-dev mailing list
> 	Gdal-dev@remotesensing.org
> 	http://remotesensing.org/mailman/listinfo/gdal-dev
> 	
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 
> 



From MChapman at sanz.com  Mon Apr 26 13:01:23 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Mrs ID driver for VC7
Message-ID: <ED3A48B9840E594890A2BC172D119465FB958F@mailman.san.com>

Bjoern,

I called LizardTech and asked a sales rep for a copy.  He had me sign a license agreement and fax it back to him.  Apparently, Los Alamos requires them to keep a strict record on who licenses the sdk.  You will need to call them or send them an email.  Then they will send you a link to an ftp site where you can download the driver.

Martin

-----Original Message-----
From: Bjoern Ruff [mailto:br@forstware.de] 
Sent: Monday, April 26, 2004 10:39 AM
To: gdal-dev@remotesensing.org
Subject: AW: [Gdal-dev] Mrs ID driver for VC7


Hello Martin,

could you tell me how you got the MrSid DSDK 4.0 trial version? I could not find it on Lizardtech's homepage. 

Thanks, Bjoern

> -----Urspr?ngliche Nachricht-----
> Von: gdal-dev-admin@remotesensing.org
> [mailto:gdal-dev-admin@remotesensing.org] Im Auftrag von 
> Chapman, Martin
> Gesendet: Freitag, 23. April 2004 09:53
> An: gdal-dev@remotesensing.org; gdal-dev@remotesensing.org
> Betreff: RE: [Gdal-dev] Mrs ID driver for VC7
> 
> Andrey,
>  
> Thanks for the response.  I finally figured out how to link
> to mrsid, and thanks to the code update provided by Bjoern 
> everything built ok.  Now I am getting the error "not 
> recognized as a supported file format".  So I need to know 
> where to set that option. 
>  
> Thanks,
> Martin
> 
> 	-----Original Message----- 
> 	From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
> 	Sent: Fri 4/23/2004 12:30 AM 
> 	To: gdal-dev@remotesensing.org 
> 	Cc: 
> 	Subject: Re: [Gdal-dev] Mrs ID driver for VC7
> 	
> 	
> 
> 	On Thu, Apr 22, 2004 at 04:14:28PM -0600, Chapman, Martin wrote:
> 	> I have a thirty day trial of the Mrs. Id driver for
> windows VC++
> 	> Version 7.  How do I link it to the GDAL lib?  Are 
> there instructions
> 	> somewhere on how to do this?  I also read on the user 
> group that there
> 	> may be issues with the V7 driver from Lizardtech and 
> GDAL because GDAL
> 	> was written to bind to the VC6 version of the mrsid 
> lib.  Is this an
> 	> issue?
> 	
> 	It is all the same for GDAL what compiler version will
> be used, bacause
> 	GDAL comes with full source code. It is completely 
> defined by the DSDK
> 	binaries you have which you can't rebuild. The main 
> problem is in API
> 	version. GDAL currently supports MrSID DSDK 3.1.x and 
> 3.2.x. Newest
> 	version (4.0) are not supported yet due to completely 
> different API.
> 	
> 	> I am using GDAL 1.1.9.
> 	
> 	There are was few fixes in that driver in GDAL 1.2.0.
> 	
> 	                                                Andrey
> 	
> 	--
> 	Andrey V. Kiselev
> 	Home phone:  +7 812 5274898  ICQ# 26871517
> 	_______________________________________________
> 	Gdal-dev mailing list
> 	Gdal-dev@remotesensing.org
> 	http://remotesensing.org/mailman/listinfo/gdal-dev
> 	
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal-dev
> 
> 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org http://remotesensing.org/mailman/listinfo/gdal-dev

From dmorissette at dmsolutions.ca  Mon Apr 26 15:51:41 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OSGIS 2004 and MUM2 - 4 days left for early bird registration
Message-ID: <408D684D.70101@dmsolutions.ca>

(Sorry for the cross-posting, but I think this may be of interest to 
many of you.)


For those of you who have not heard yet, the Ottawa MapServer Users 
Group is very busy preparing for Open Source GIS (OSGIS) 2004 and 2nd 
Annual MapServer User Meeting scheduled for June 9-11, 2004 at Carleton 
University, Ottawa, Canada.

The early bird registration is available only until April 30th (that's 
this Friday), so please register soon. Not only does this save you some 
money, it also helps the committee plan for the numbers that we may 
expect for the big event.

As you will see on the conference website (http://www.omsug.ca), some 
new additions have now been included:

- Online Registration is now Available!

- We have a number of workshops and presenters committed -- take a look 
at the conference program for details 
(http://www.omsug.ca/osgis2004/program.html). This is tentative, but 
should give you an idea of the kinds of presenters and topics that will 
be covered.

- Our program is not full -- so we're looking to you to give us your 
suggestions on presentations that you are interested in giving. See the 
call for presentations for more details. We also want to hear from you 
about the workshops we have lined up with any suggestions for others you 
may be interested in.

- Thank you to our initial sponsors - Tydac, GIS Monitor and DM 
Solutions Group. Anyone who is interested in sponsoring and/or 
exhibiting, please contact us. There is also a bonus for early-bird 
sponsors before April 30th.


Some additional notes:

The Open Source GIS 2004 component of the Conference will be focussing 
on the open source movement within the GIS community, exposure to the 
many open source technologies in use and development in our community 
such as OpenEV and Grass, and a stream focussed on management issues for 
incorporating Open Source in your organization. I encourage all of you 
to look into participating in this event and help us to get the word out 
to those using these technologies. If you haven't seen a reference to 
this in your area ... please pass the message along!

Also - the hotel rooms and conference rates are only guaranteed through 
May 9th, so book your accommodations as soon as possible, as we cannot 
provide any guarantees beyond this date. Tourist season in Ottawa starts 
in May/June so booking a hotel late can be tricky.


We are eager for any feedback or comments you may have so don't hesitate
to contact the committee directly (info@omsug.ca) or provide feedback 
through the conference website.

Only 2 months to go! Looking forward to seeing you all soon here in Ottawa!


Daniel (on behalf of the Ottawa MapServer Users Group)
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From TMitchell at lignum.com  Mon Apr 26 18:43:14 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GeoFusion announces free GeoPlayer_Mars download
In-Reply-To: <20040423080933.HRQY18566.out011.verizon.net@gf2>
Message-ID: <OF93E43ED7.7D0F3D9A-ON88256E82.007CC2B9-88256E82.007CCF8D@lignum.com>

Nice app and appreciable goals of the product.  Does it have some 
underlying relationship to GDAL?

gdal-dev-admin@remotesensing.org wrote on 04/23/2004 01:09:28 AM:

> GeoFusion Press Release
> April 2004
> 3D Interactive Mars DEMO
> Company: GeoFusion, Inc.
> Industry: Interactive Global Visualization, Gaming, Homeland 
> Security, Military/Defense
> Location: Watsonville, CA, United States of America 
> 
> Watsonville, CA ? GeoFusion, Inc., a leading innovator in geospatial
> technologies, announces GeoPlayer Mars, created with GeoMatrix 
> Toolkit technology, the 3D foundation to ESRI?s ArcGLOBE software. 
> 
> Download the 32MB demo now at: http://www.geofusion.com/MarsDemo
> 
> The GeoPlayer Mars program allows you to explore the Red Planet from
> outer space to rocks on the Martian surface. You can fly through 
> valleys and over craters on desktop PCs and laptop computers. This 
> program was created with the C++ GeoMatrix Toolkit which provides an
> object-oriented API enabling software developers to build 
> interactive full-globe georeferenced applications.  The toolkit SDK 
> is a complete development environment that includes modular 
> libraries, example applications with source code, and documentation.
> 
> GeoFusion's software technology provides the engine and 
> infrastructure for doing high performance global visualization of 
> virtually unlimited amounts of imagery, terrain, vector, and 
> annotation data. It provides a way of displaying vast amounts of 
> heterogeneous geospatial information which is shown in a global 
> context while allowing for interactive zooming into complex visually
> stunning scenes. It allows one to obtain a new meaning of 
> information through innovative ways of layering, animating and 
> blending together different types of geospatial information derived 
> from maps, satellite imagery, annotation, and vector data.
> 
> About GeoFusion, Inc.
> Founded in 2001, GeoFusion, Inc., is a three-dimensional 
> visualization technology company dedicated to putting the earth on 
> everybody's desktop. This vision is being implemented through 
> licensing of its GeoMatrix Toolkit, strategic partner product 
> developments, and custom application and rendering services. 
> 
> 

From jk_nzd at hotmail.com  Mon Apr 26 18:42:43 2004
From: jk_nzd at hotmail.com (jk nz)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
Message-ID: <BAY14-F32Alu3BCHXGR0001e201@hotmail.com>

Hi,

Thanks thats a start at least :) .. why does the code have GetRasterBand 
repeated twice in a row, or is that a typo?

    for (int layer = 1; layer <= poDataset->GetRasterCount(); layer++){
      poBand = poDataset->GetRasterBand( layer );

      poBand = poDataset->GetRasterBand( layer );
      poBand->RasterIO( GF_Read, xPixel, yLine, 1, 1, pafScanline, 1, 1, 
GDT_Float32, 0, 0 );

And what is the point of the transform?  I thought I would be able to do 
RasterIO and that would give me one line of the grid, and I would then just 
read that line one element at a time .. or is it not that simple?  I dont 
really know too much about GIS stuff..  I have an application that works 
fine with tab delimited ascii grids, but thats not going to be useful in the 
real world :)

Regards

JK.



>From: Andrew Finley <afinley@gis.umn.edu>
>Reply-To: gdal-dev@remotesensing.org
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
>Date: 26 Apr 2004 08:42:50 -0500
>
>Hi JK,
>I think there is a similar chunk of code in the list archives, but here
>it is again.  Attached are two files, getPixelValueGdal.cpp and
>parameterfile.  The parameterfile describes the image location and the
>coordinate file (i.e., point xy locations).  This is set up for ERDAS
>images, I think you will only have to change the driver for it to read
>grids.  Hope this helps.  Let me know if you have any questions.
>-Andy
>
>
>On Mon, 2004-04-26 at 00:48, jk nz wrote:
> > Has anyone tried using GDAL from the Borland Delphi language?
> >
> > I have been mostly sucessful in doing so, but having problems reading 
>pixel
> > values from an esri grid..
> >
> > Does anyone have sample code of reading pixels? C is ok .. I have seen
> > sample of reading blocks but that wasnt quite what I wanted ...
> >
> > I do not know how to extract the pixel values as I dont know how they 
>are
> > laid out in memory .. is it a 2d grid, or a 1d grid?
> >
> > eg is it laid out in memory as
> >
> > row1 [px1][px2][px3][...]
> > row2 (possible some memory gap in between rows) [px10][px11][...]
> >
> > or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at 
>address
> > pxN+ sizeof(px)) [px10][...]
> >
> > It appears I have to use pointer arithmetic to index the block, ie 
>pixelN :=
> > block[index] works fine if it is a 1d grid in memory, but its not so 
>easy if
> > its a 2d grid, as the operator block[x,y] is not valid in delphi
> >
> > So I'm trying to figure out what happens at the end of a row? is the 
>first
> > element of the next row located in the next memory address or ...?
> >
> > Any help appreciated
> >
> > Regards
> >
> > JK.
> >
> >
> > Here is my code: - everything appears to work, apart from reading 
>individual
> > pixel values.
> >
> >             for i := 0 to nYBlocks - 1 do // i = Y block index
> >               for j := 0 to nYBlocks - 1 do // j = X block index
> >               begin
> >                 GDALReadBlock(RasterBand, j, i, pafScanline);
> >
> >                 // compute which part of the block is valid for partial
> > blocks
> >                 if(i * nBlockYSize > nY) then
> >                   nYValid := nY - i * nBlockYSize
> >                 else
> >                   nYValid := nBlockYSize;
> >
> >                 if(j * nBlockXSize > nX) then
> >                   nXValid := nX - j * nBlockXSize
> >                 else
> >                   nXValid := nBlockXSize;
> >
> >                 doubleptr := @pafScanline;
> >
> >                 for k := 0 to nYValid - 1 do // k = Y cell index
> >                   for l := 0 to nXValid - 1 do // l = X cell index
> >                   begin
> >                     inc(doubleptr);
> >                     cell := doubleptr^;
> >                     // debugging stuff, did we get an ok value or not?
> >                     if cell > 0 then
> >                       ShowMessage(FloatToStr(cell));
> >                   end; // for l, for k
> >               end; // for j, for i
> >
> > _________________________________________________________________
> > Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
>--
>Andrew Finley, Research Fellow
>Department of Forest Resources
>College of Natural Resources
>University of Minnesota
>305 Green Hall
>1530 Cleveland Avenue N.
>St. Paul, MN 55108
>
>Ph 612-624-1714 office
>www.cnr.umn.edu/FR/people/facstaff/finley/index.html
><< getPixelValueGdal.cpp >>
><< parameterfile >>

_________________________________________________________________
Surf the net and talk on the phone with Xtra JetStream @  
http://xtra.co.nz/jetstream


From jk_nzd at hotmail.com  Mon Apr 26 19:32:10 2004
From: jk_nzd at hotmail.com (jk nz)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
Message-ID: <BAY14-F30jGPLmLiDRR0001eb7f@hotmail.com>

Hi,

This line:

  input >> L_COORDFILE >> coordFile >> L_OUTFILE >> outFile >> L_ROWS >> 
fileRows >>
    L_COLS >> fileCols >> L_XCOORDCOL >>  xCoordCol >> L_YCOORDCOL >>  
yCoordCol >> L_IMAGEFILE >> imageFile;

... doesnt make the slightest bit of sense to me (I dont know C++), but I'm 
guessing it is some smart way of getting values for all these variables in 
one line?  Later on there is for loops which use fileRows and fileCols - are 
these values the same as GetRasterBandXSize and GetRasterBandYSize?

I have GetGeoTransform working correctly, so very close now to getting pixel 
reading to work (I hope!)

Regards

JK.

>From: Andrew Finley <afinley@gis.umn.edu>
>Reply-To: gdal-dev@remotesensing.org
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
>Date: 26 Apr 2004 08:42:50 -0500
>
>Hi JK,
>I think there is a similar chunk of code in the list archives, but here
>it is again.  Attached are two files, getPixelValueGdal.cpp and
>parameterfile.  The parameterfile describes the image location and the
>coordinate file (i.e., point xy locations).  This is set up for ERDAS
>images, I think you will only have to change the driver for it to read
>grids.  Hope this helps.  Let me know if you have any questions.
>-Andy
>
>
>On Mon, 2004-04-26 at 00:48, jk nz wrote:
> > Has anyone tried using GDAL from the Borland Delphi language?
> >
> > I have been mostly sucessful in doing so, but having problems reading 
>pixel
> > values from an esri grid..
> >
> > Does anyone have sample code of reading pixels? C is ok .. I have seen
> > sample of reading blocks but that wasnt quite what I wanted ...
> >
> > I do not know how to extract the pixel values as I dont know how they 
>are
> > laid out in memory .. is it a 2d grid, or a 1d grid?
> >
> > eg is it laid out in memory as
> >
> > row1 [px1][px2][px3][...]
> > row2 (possible some memory gap in between rows) [px10][px11][...]
> >
> > or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at 
>address
> > pxN+ sizeof(px)) [px10][...]
> >
> > It appears I have to use pointer arithmetic to index the block, ie 
>pixelN :=
> > block[index] works fine if it is a 1d grid in memory, but its not so 
>easy if
> > its a 2d grid, as the operator block[x,y] is not valid in delphi
> >
> > So I'm trying to figure out what happens at the end of a row? is the 
>first
> > element of the next row located in the next memory address or ...?
> >
> > Any help appreciated
> >
> > Regards
> >
> > JK.
> >
> >
> > Here is my code: - everything appears to work, apart from reading 
>individual
> > pixel values.
> >
> >             for i := 0 to nYBlocks - 1 do // i = Y block index
> >               for j := 0 to nYBlocks - 1 do // j = X block index
> >               begin
> >                 GDALReadBlock(RasterBand, j, i, pafScanline);
> >
> >                 // compute which part of the block is valid for partial
> > blocks
> >                 if(i * nBlockYSize > nY) then
> >                   nYValid := nY - i * nBlockYSize
> >                 else
> >                   nYValid := nBlockYSize;
> >
> >                 if(j * nBlockXSize > nX) then
> >                   nXValid := nX - j * nBlockXSize
> >                 else
> >                   nXValid := nBlockXSize;
> >
> >                 doubleptr := @pafScanline;
> >
> >                 for k := 0 to nYValid - 1 do // k = Y cell index
> >                   for l := 0 to nXValid - 1 do // l = X cell index
> >                   begin
> >                     inc(doubleptr);
> >                     cell := doubleptr^;
> >                     // debugging stuff, did we get an ok value or not?
> >                     if cell > 0 then
> >                       ShowMessage(FloatToStr(cell));
> >                   end; // for l, for k
> >               end; // for j, for i
> >
> > _________________________________________________________________
> > Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
>--
>Andrew Finley, Research Fellow
>Department of Forest Resources
>College of Natural Resources
>University of Minnesota
>305 Green Hall
>1530 Cleveland Avenue N.
>St. Paul, MN 55108
>
>Ph 612-624-1714 office
>www.cnr.umn.edu/FR/people/facstaff/finley/index.html
><< getPixelValueGdal.cpp >>
><< parameterfile >>

_________________________________________________________________
Surf the net and talk on the phone with Xtra JetStream @  
http://xtra.co.nz/jetstream


From jk_nzd at hotmail.com  Mon Apr 26 20:39:38 2004
From: jk_nzd at hotmail.com (jk nz)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
Message-ID: <BAY14-F42EAOeIiGXix0001f870@hotmail.com>

HI again,

This is the last part I'm having trouble understanding .. I'm not sure what 
is in locationFileMtrx, and how pixel offsets are calculated from this..

Sample code:

  for (i = 0; i < fileRows; i++) {
    for (j = 0; j < fileCols; j++) {
      outfile << fixed << setprecision (2) << locationFileMtrx[i][j] << 
"\t";
    }

    xPixel = static_cast<int>((padfTransform[0] -  
locationFileMtrx[i][xCoordCol])/(-1*padfTransform[1]));
    yLine = static_cast<int>(((padfTransform[3] -  
locationFileMtrx[i][yCoordCol])/(-1*padfTransform[5])));

    for (int layer = 1; layer <= poDataset->GetRasterCount(); layer++){
      poBand = poDataset->GetRasterBand( layer );

      poBand = poDataset->GetRasterBand( layer );
      poBand->RasterIO( GF_Read, xPixel, yLine, 1, 1, pafScanline, 1, 1, 
GDT_Float32, 0, 0 );
      outfile << *pafScanline << "\t";
    }
    outfile << endl;
  }



My code looks something like this (its in Pascal):

          pafScanline := CPLMalloc(SizeOf(Byte) * nX);   // nX = 
GetRasterBandXSize
          try
            for i := 0 to nY - 1 do // nY = GetRasterBandYSize
            begin
              // read in line i
              GDALRasterIO(RasterBand, GF_Read, 0, i, nX, 1, pafScanline, 
nX, 1, GDT_Byte, 0, 0);

              byteptr := @pafScanline;  // byteptr = a typed pointer to a 
byte

              for j := 0 to nX - 1 do
              begin
                inc(byteptr);          // inc(byteptr) moves byteptr to 
point to the next byte in memory
                pixel := byteptr^;  //pixel = whatever byteptr points to

                DoSomething(pixel);

              end;
            end;

GDALinfo about my test file:

Driver: AIG/Arc/Info Binary Grid
Size is 289, 356
Coordinate System is `'
Origin = (2719217.059208,6191721.084434)
Pixel Size = (100.00000000,-100.00000000)
Corner Coordinates:
Upper Left  ( 2719217.059, 6191721.084)
Lower Left  ( 2719217.059, 6156121.084)
Upper Right ( 2748117.059, 6191721.084)
Lower Right ( 2748117.059, 6156121.084)
Center      ( 2733667.059, 6173921.084)
Band 1 Block=256x4 Type=Byte, ColorInterp=Undefined
  Min=0.000 Max=8.000
  NoData Value=255

Regards

JK.


>From: Andrew Finley <afinley@gis.umn.edu>
>Reply-To: gdal-dev@remotesensing.org
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
>Date: 26 Apr 2004 08:42:50 -0500
>
>Hi JK,
>I think there is a similar chunk of code in the list archives, but here
>it is again.  Attached are two files, getPixelValueGdal.cpp and
>parameterfile.  The parameterfile describes the image location and the
>coordinate file (i.e., point xy locations).  This is set up for ERDAS
>images, I think you will only have to change the driver for it to read
>grids.  Hope this helps.  Let me know if you have any questions.
>-Andy
>
>
>On Mon, 2004-04-26 at 00:48, jk nz wrote:
> > Has anyone tried using GDAL from the Borland Delphi language?
> >
> > I have been mostly sucessful in doing so, but having problems reading 
>pixel
> > values from an esri grid..
> >
> > Does anyone have sample code of reading pixels? C is ok .. I have seen
> > sample of reading blocks but that wasnt quite what I wanted ...
> >
> > I do not know how to extract the pixel values as I dont know how they 
>are
> > laid out in memory .. is it a 2d grid, or a 1d grid?
> >
> > eg is it laid out in memory as
> >
> > row1 [px1][px2][px3][...]
> > row2 (possible some memory gap in between rows) [px10][px11][...]
> >
> > or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at 
>address
> > pxN+ sizeof(px)) [px10][...]
> >
> > It appears I have to use pointer arithmetic to index the block, ie 
>pixelN :=
> > block[index] works fine if it is a 1d grid in memory, but its not so 
>easy if
> > its a 2d grid, as the operator block[x,y] is not valid in delphi
> >
> > So I'm trying to figure out what happens at the end of a row? is the 
>first
> > element of the next row located in the next memory address or ...?
> >
> > Any help appreciated
> >
> > Regards
> >
> > JK.
> >
> >
> > Here is my code: - everything appears to work, apart from reading 
>individual
> > pixel values.
> >
> >             for i := 0 to nYBlocks - 1 do // i = Y block index
> >               for j := 0 to nYBlocks - 1 do // j = X block index
> >               begin
> >                 GDALReadBlock(RasterBand, j, i, pafScanline);
> >
> >                 // compute which part of the block is valid for partial
> > blocks
> >                 if(i * nBlockYSize > nY) then
> >                   nYValid := nY - i * nBlockYSize
> >                 else
> >                   nYValid := nBlockYSize;
> >
> >                 if(j * nBlockXSize > nX) then
> >                   nXValid := nX - j * nBlockXSize
> >                 else
> >                   nXValid := nBlockXSize;
> >
> >                 doubleptr := @pafScanline;
> >
> >                 for k := 0 to nYValid - 1 do // k = Y cell index
> >                   for l := 0 to nXValid - 1 do // l = X cell index
> >                   begin
> >                     inc(doubleptr);
> >                     cell := doubleptr^;
> >                     // debugging stuff, did we get an ok value or not?
> >                     if cell > 0 then
> >                       ShowMessage(FloatToStr(cell));
> >                   end; // for l, for k
> >               end; // for j, for i
> >
> > _________________________________________________________________
> > Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
>--
>Andrew Finley, Research Fellow
>Department of Forest Resources
>College of Natural Resources
>University of Minnesota
>305 Green Hall
>1530 Cleveland Avenue N.
>St. Paul, MN 55108
>
>Ph 612-624-1714 office
>www.cnr.umn.edu/FR/people/facstaff/finley/index.html
><< getPixelValueGdal.cpp >>
><< parameterfile >>

_________________________________________________________________
Watch movie trailers online with the Xtra Broadband Channel  
http://xtra.co.nz/broadband


From jk_nzd at hotmail.com  Tue Apr 27 01:56:56 2004
From: jk_nzd at hotmail.com (jk nz)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
Message-ID: <BAY14-F35tDBdsgx0Ly0000bd35@hotmail.com>

Hi,

Well I have to end my day without sucess .. trying to read a scanline with 
RasterIO gives a "file not found" error, while trying to read blocks with 
ReadRasterBlock gives incorrect data

I am a newbie at GIS and GDAL and even worse, C++ ;) SO any help would be 
greatly appreciated!

My code for scanline with RasterIO looks like this (I probably go the x and 
y offsets or x and y size wrong:

            for i := 0 to nY - 1 do
            begin
              // read in 1 line at position i
              GDALRasterIO(RasterBand, GF_Read, 0, i, nX, 1, pafScanline, 
nX, 1, GDT_Byte, 0, 0);

              byteptr := @pafScanline;

              for j := 0 to nX - 1 do
              begin
                cell := byteptr^;
                inc(byteptr);

                DoSomething(cell);

              end;
            end;

And my block reading code executes but returns incorrect values:

            for i := 0 to nYBlocks - 1 do // i = Y block index
              for j := 0 to nYBlocks - 1 do // j = X block index
              begin
                GDALReadBlock(RasterBand, j, i, pafScanline);

                // compute which part of the block is valid for partial 
blocks
                if(i * nBlockYSize > nY) then
                  nYValid := nY - i * nBlockYSize
                else
                  nYValid := nBlockYSize;

                if(j * nBlockXSize > nX) then
                  nXValid := nX - j * nBlockXSize
                else
                  nXValid := nBlockXSize;

                byteptr := @pafScanline;

                for k := 0 to nYValid - 1 do // k = Y cell index
                  for l := 0 to nXValid - 1 do // l = X cell index
                  begin
                    cell := byteptr^;
                    inc(byteptr);

                    DoSomething(cell);

                  end; // for l, for k
              end; // for j, for i

There is some bug here  - first value of cell returned was 70, when I know 
it should have been 255 (=no value)

Regards, and thanks

JK.



>From: Andrew Finley <afinley@gis.umn.edu>
>Reply-To: gdal-dev@remotesensing.org
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] GDAL in delphi .. reading pixel values (Esri grids)
>Date: 26 Apr 2004 08:42:50 -0500
>
>Hi JK,
>I think there is a similar chunk of code in the list archives, but here
>it is again.  Attached are two files, getPixelValueGdal.cpp and
>parameterfile.  The parameterfile describes the image location and the
>coordinate file (i.e., point xy locations).  This is set up for ERDAS
>images, I think you will only have to change the driver for it to read
>grids.  Hope this helps.  Let me know if you have any questions.
>-Andy
>
>
>On Mon, 2004-04-26 at 00:48, jk nz wrote:
> > Has anyone tried using GDAL from the Borland Delphi language?
> >
> > I have been mostly sucessful in doing so, but having problems reading 
>pixel
> > values from an esri grid..
> >
> > Does anyone have sample code of reading pixels? C is ok .. I have seen
> > sample of reading blocks but that wasnt quite what I wanted ...
> >
> > I do not know how to extract the pixel values as I dont know how they 
>are
> > laid out in memory .. is it a 2d grid, or a 1d grid?
> >
> > eg is it laid out in memory as
> >
> > row1 [px1][px2][px3][...]
> > row2 (possible some memory gap in between rows) [px10][px11][...]
> >
> > or as row1 [px1][px2][...] (row2, no gap in memory, next pixel is at 
>address
> > pxN+ sizeof(px)) [px10][...]
> >
> > It appears I have to use pointer arithmetic to index the block, ie 
>pixelN :=
> > block[index] works fine if it is a 1d grid in memory, but its not so 
>easy if
> > its a 2d grid, as the operator block[x,y] is not valid in delphi
> >
> > So I'm trying to figure out what happens at the end of a row? is the 
>first
> > element of the next row located in the next memory address or ...?
> >
> > Any help appreciated
> >
> > Regards
> >
> > JK.
> >
> >
> > Here is my code: - everything appears to work, apart from reading 
>individual
> > pixel values.
> >
> >             for i := 0 to nYBlocks - 1 do // i = Y block index
> >               for j := 0 to nYBlocks - 1 do // j = X block index
> >               begin
> >                 GDALReadBlock(RasterBand, j, i, pafScanline);
> >
> >                 // compute which part of the block is valid for partial
> > blocks
> >                 if(i * nBlockYSize > nY) then
> >                   nYValid := nY - i * nBlockYSize
> >                 else
> >                   nYValid := nBlockYSize;
> >
> >                 if(j * nBlockXSize > nX) then
> >                   nXValid := nX - j * nBlockXSize
> >                 else
> >                   nXValid := nBlockXSize;
> >
> >                 doubleptr := @pafScanline;
> >
> >                 for k := 0 to nYValid - 1 do // k = Y cell index
> >                   for l := 0 to nXValid - 1 do // l = X cell index
> >                   begin
> >                     inc(doubleptr);
> >                     cell := doubleptr^;
> >                     // debugging stuff, did we get an ok value or not?
> >                     if cell > 0 then
> >                       ShowMessage(FloatToStr(cell));
> >                   end; // for l, for k
> >               end; // for j, for i
> >
> > _________________________________________________________________
> > Need more speed? Get Xtra JetStream  @ http://xtra.co.nz/jetstream
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@remotesensing.org
> > http://remotesensing.org/mailman/listinfo/gdal-dev
>--
>Andrew Finley, Research Fellow
>Department of Forest Resources
>College of Natural Resources
>University of Minnesota
>305 Green Hall
>1530 Cleveland Avenue N.
>St. Paul, MN 55108
>
>Ph 612-624-1714 office
>www.cnr.umn.edu/FR/people/facstaff/finley/index.html
><< getPixelValueGdal.cpp >>
><< parameterfile >>

_________________________________________________________________
Stop worrying about overloading your inbox - get MSN Hotmail Extra Storage! 
http://join.msn.com/?pgmarket=en-us&page=hotmail/es2&ST=1/go/onm00200362ave/direct/01/


From bclay at ball.com  Tue Apr 27 09:15:24 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Dither question
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C904@APPMSG2.AERO.BALL.COM>

I see that RasterIO can be used to effectively dither a raster file by
skipping a certain number of pixels for both x and Y in the call.

Is there a method to extract data from the band at a specified fraction
of a degree spacing?

Bruce Clay
bclay@ball.com 

From warmerdam at pobox.com  Tue Apr 27 09:38:24 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Dither question
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C904@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C904@APPMSG2.AERO.BALL.COM>
Message-ID: <408E6250.7000903@pobox.com>

Clay, Bruce wrote:
> I see that RasterIO can be used to effectively dither a raster file by
> skipping a certain number of pixels for both x and Y in the call.
> 
> Is there a method to extract data from the band at a specified fraction
> of a degree spacing?
> 

Bruce,

Arguments tot he RasterIO() call are always pixel/line rectangles.  You
can approximately compute a pixel/line rectangle mapping corresponding
to a particular sampling ratio in degrees but it is up to the application.

Note, that RasterIO() provides downsampling and upsampling with an
unspecified sampling approach.  In practice it is nearest neighbour sampling
with the exception of when overviews are available, in which case it is
nearest neighbour from the nearest overview of at least the same resolution
as the request.  However, since the overviews can be generated via other
mechanisms (ie. averaging) then final result may not be quite nearest neighbour.

Also, I am not acustomed to calling generic downsampling dithering.  I normally
think of dithering as a family of techniques used to convert 24bit images to
8bit, often with "error diffusion" or other means to average out radiometric
error.  There is a GDALDitherRGB2PCT() function available that will apply
Floyd-Steinberg error diffusion during dithering.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mpg at lizardtech.com  Tue Apr 27 13:11:11 2004
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: [ANNOUNCE] Support for MrSID DSDK v. 4.0.x
Message-ID: <B78A4DC4AD9EE14FB014E9444BD2D30ED0F551@sea-srv-ms1.lizardtech.com>

Andrey wrote:

> I have made significant changes in the MrSID driver to support the DSDK
> v.4.0. In fact the whole driver was reorginized and mostly rewritten, so
> bugs are possible. Please, test the new driver with the your old DSDK's
> (3.1 and 3.2) as well as with the new ones (4.0) --- all those libraries
> should be supported now.
> 
> For Unix users configure magic should work to distinguish between the
> DSDK versions, MSVC users should use flags in the nmake.opt.

Sorry, but I've been out of town for a couple weeks and am only now catching up
on things... This is great news, thank you Andrey for doing this!

HOWEVER, everyone should be aware that our final 4.0 SDK has not been released
yet.  We have done a few "technology preview (TP) releases" (available by
request) and will do a few more before we ship the final SDK.  The API is still
settling down though, so any code based on the TP releases will need to be
updated.

I had planned to write a GDAL driver as part of our final 4.0 deliverable,
both to make as part of the SDK and to send to Frank and Andrey, but since
they've gotten the jump on it we'll presumably take Andrey's and do a
careful review of it; if there are any changes, etc, needed, we'll make sure
they get out appropriately.

-mpg

-----------------------------------
Michael P. Gerlek
Software Architect / MrSID team
mpg@lizardtech.com
206-902-2856
LizardTech, a Celartem company
Seattle, Washington
-----------------------------------
Copyright 2004, LizardTech Inc.
All rights reserved.
Unauthorized disclosure prohibited.
-----------------------------------

From dron at ak4719.spb.edu  Tue Apr 27 14:59:34 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: [ANNOUNCE] Support for MrSID DSDK v. 4.0.x
In-Reply-To: <B78A4DC4AD9EE14FB014E9444BD2D30ED0F551@sea-srv-ms1.lizardtech.com>
References: <B78A4DC4AD9EE14FB014E9444BD2D30ED0F551@sea-srv-ms1.lizardtech.com>
Message-ID: <20040427185934.GB9219@ak4719.spb.edu>

On Tue, Apr 27, 2004 at 10:11:11AM -0700, Michael P. Gerlek wrote:
> > I have made significant changes in the MrSID driver to support the
> > DSDK v.4.0. In fact the whole driver was reorginized and mostly
> > rewritten, so bugs are possible. Please, test the new driver with
> > the your old DSDK's (3.1 and 3.2) as well as with the new ones (4.0)
> > --- all those libraries should be supported now.
> 
> HOWEVER, everyone should be aware that our final 4.0 SDK has not been
> released yet.  We have done a few "technology preview (TP) releases"
> (available by request) and will do a few more before we ship the final
> SDK.  The API is still settling down though, so any code based on the
> TP releases will need to be updated.

Well, I'm relying on user's requests, and I have more than one request
about 4.0, so I thought it was released already... On other hand 4.0
driver still not reaches the state of the driver for 3.x DSDKs and
MapServer users may be unsatisfied with the driver perfomance. This is
the area which needs some more work.

							Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Apr 27 17:44:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.2 Released
Message-ID: <408ED450.9010101@pobox.com>

Folks,

I have prepared a new release of my OpenEV_FW binary builds for Linux and
Win32 systems.  This tracks the latest source for OpenEV, GDAL and MapServer
but is otherwise essentially unchanged since 1.7.1.

o The MapServer build on Windows is now done using a libmap.dll, and includes
   all the MapServer utilities.
o The MapServer build on Linux now includes Python MapScript.
o The GDAL build includes CDED 1:50K export capability.

Available at:
   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_linux_1.7.2.tar.gz
   ftp://ftp.remotesensing.org/gdal/openev/OpenEV_FW_172.zip

Mirrored at:
   http://gdal.maptools.org/dl/openev/OpenEV_FW_linux_1.7.2.tar.gz
   http://gdal.maptools.org/dl/openev/OpenEV_FW_172.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tim at linfiniti.com  Tue Apr 27 19:06:20 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Writing shapefiles with ogr for qgis
Message-ID: <200404280006.40178.tim@linfiniti.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

Can someone point me to a short code sample on writing a shapefile using ogr. 
Currently I have written stuff using Franks shapelib, but am wondering if ogr 
is better suited to this purpose in that:

a) qgis already has gdal/ogr deps
b) ogr provides a c++ interface

Many thanks

Tim Sutton
- -- 
The only reason for time is so that everything doesn't happen at once 
 --Albert Einstein 

Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)

iD8DBQFAjud9WvXTJUo0BDoRAs7qAKCfVgRfP0eZ5qC7EuokUk6ZAB22HACfZJ83
jWxKiVOmiN9axjePfvThJiQ=
=2MXj
-----END PGP SIGNATURE-----

From warmerdam at pobox.com  Tue Apr 27 19:45:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Writing shapefiles with ogr for qgis
In-Reply-To: <200404280006.40178.tim@linfiniti.com>
References: <200404280006.40178.tim@linfiniti.com>
Message-ID: <408EF0B3.3090306@pobox.com>

Tim Sutton wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi
> 
> Can someone point me to a short code sample on writing a shapefile using ogr. 
> Currently I have written stuff using Franks shapelib, but am wondering if ogr 
> is better suited to this purpose in that:
> 
> a) qgis already has gdal/ogr deps
> b) ogr provides a c++ interface

Tim,

It seems there is no OGR API Tutorial.  I would encourage you to review the
OGR Architecture document for general information on OGR:

   http://www.remotesensing.org/gdal/ogr/ogr_arch.html

The gdal/ogr/ogr2ogr.cpp program is a respectible example of how to use
OGR to write files, though it is a bit complicated since it tries to do alot
of things during translation.

The general idea is you need to following the following steps:

  o Register driver(s) (at least the Shapefile driver).
  o Get the driver - OGRSFDriverRegistrar::GetDriverByName().
  o Create the shapefile (OGRSFDriver::CreateDataSource()).  You can give the
    name of the shapefile (with .shp extension) to create a single file.
    Otherwise the shapefile driver will create a directory, and a file set for
    each layer.
  o Create the desired layer (OGRDataSource::CreateLayer() - the layer name
    should likely match the basename of the shapefile you created before).
    Set the geometry type to determine the file type you want to create.
  o Create all the fields you want for the layer with OGRLayer::CreateField().
  o For each feature to be written, create a feature with OGRFeature::CreateFeature(),
    passing in the layer definition from the layer.
  o Assign each attribute to the feature in turn.
  o Create a geometry and assign it to the feature.  There are various methods
    for geometry construction depending on what you want.
  o Write the feature to the file with the OGRLayer::CreateFeature() method.
  o Delete your copy of the feature (ie. with OGRFeature::DestroyFeature()).
  o Make sure you delete the datasource when you are done to ensure it is
    properly closed and flushed to disk.

If you only ever want to write to shapefiles, using OGR won't give you any
substantial advantages, but assuming you are interested in writing other
formats too, it should be a useful step.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From xqcheng at supresoft.com.cn  Tue Apr 27 21:46:09 2004
From: xqcheng at supresoft.com.cn (xqcheng)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: 12bit JPEG compressed TIFF
Message-ID: <000f01c42cc2$95e90350$267072ca@Supresoft.wh>

Hi,
 I have some tiff files compressed in JPEG, But cannot open..
The error message is "cannot support 12 bits/sample".
I want to know how to solve this? Does it need modification to JPEG library.
Best Regards
CXQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040428/3a79b408/attachment.html
From neteler at itc.it  Wed Apr 28 02:29:52 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OGR PG bugfix
Message-ID: <20040428062952.GA12769@thuille.itc.it>

Frank,

a strange parse error appears currently with PG connections.
After quite some time I found it:

diff -u -r1.22 ogrpgdatasource.cpp
--- ogrpgdatasource.cpp	23 Apr 2004 15:10:10 -0000	1.22
+++ ogrpgdatasource.cpp	28 Apr 2004 06:21:35 -0000
@@ -273,7 +273,7 @@
         hResult = PQexec(hPGConn, 
                          "DECLARE mycursor CURSOR for "
                          "SELECT relname FROM pg_class "
-                         "WHERE (relkind in ('r','v') AND relname !~ '^pg'" );
+                         "WHERE (relkind in ('r','v') AND relname !~ '^pg')" );
     }
 
     if( hResult && PQresultStatus(hResult) == PGRES_COMMAND_OK )

Please fix in CVS,

 Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From dron at ak4719.spb.edu  Wed Apr 28 02:24:02 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: 12bit JPEG compressed TIFF
In-Reply-To: <000f01c42cc2$95e90350$267072ca@Supresoft.wh>
References: <000f01c42cc2$95e90350$267072ca@Supresoft.wh>
Message-ID: <20040428062402.GB24212@ak4719.spb.edu>

On Wed, Apr 28, 2004 at 09:46:09AM +0800, xqcheng wrote:
>  I have some tiff files compressed in JPEG, But cannot open.. The
>  error message is "cannot support 12 bits/sample". I want to know how
>  to solve this? Does it need modification to JPEG library.

Yes, libjpeg should be recompiled. There is extract from the JPEG
library documentation:

Support for 12-bit-deep pixel data:

The JPEG standard allows either 8-bit or 12-bit data precision.  (For color,
this means 8 or 12 bits per channel, of course.)  If you need to work with
deeper than 8-bit data, you can compile the IJG code for 12-bit operation.
To do so:
  1. In jmorecfg.h, define BITS_IN_JSAMPLE as 12 rather than 8.
  2. In jconfig.h, undefine BMP_SUPPORTED, RLE_SUPPORTED, and TARGA_SUPPORTED,
     because the code for those formats doesn't handle 12-bit data and won't
     even compile.  (The PPM code does work, as explained below.  The GIF
     code works too; it scales 8-bit GIF data to and from 12-bit depth
     automatically.)
  3. Compile.  Don't expect "make test" to pass, since the supplied test
     files are for 8-bit data.

Currently, 12-bit support does not work on 16-bit-int machines.

Note that a 12-bit version will not read 8-bit JPEG files, nor vice versa;
so you'll want to keep around a regular 8-bit compilation as well.
(Run-time selection of data depth, to allow a single copy that does both,
is possible but would probably slow things down considerably; it's very low
on our to-do list.)


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From tim at linfiniti.com  Wed Apr 28 07:45:34 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Gdal and pyramid files
Message-ID: <200404281245.41953.tim@linfiniti.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi again

I have been comparing the performance of (gdal based) qgis against  * ahem * 
arcmap using the Nasa blue marble visible earth dataset (two tiffs totalling 
roughly 2.8gig). In general arcmap rendering is faster, especially when 
zoomed out so that most or all of the dataset is in view.

I found the following message in the archives:

http://remotesensing.org/pipermail/gdal-dev/2003-August/000948.html

And was wondering if the use of rrd files is automatic in the gdal tiff 
driver, or if there is something special I need to "activate"?

On a similar note, if I create overviews using the gdaladdo utilitiy, does 
gdal automatically look for and use the associated .ovr file?

Lastly, is it possible call gdaladdo programmatically?

Many thanks

Tim Sutton
- -- 
The only reason for time is so that everything doesn't happen at once 
 --Albert Einstein 

Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.2 (GNU/Linux)

iD4DBQFAj5ljWvXTJUo0BDoRAoA9AJUcaMYRhBku6AVMhwbQIP6fY0l4AKCYDtUX
DAD+ExEfG05NSGlpFichKg==
=uzjy
-----END PGP SIGNATURE-----

From warmerdam at pobox.com  Wed Apr 28 08:26:43 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Help: 12bit JPEG compressed TIFF
In-Reply-To: <000f01c42cc2$95e90350$267072ca@Supresoft.wh>
References: <000f01c42cc2$95e90350$267072ca@Supresoft.wh>
Message-ID: <408FA303.1040203@pobox.com>

xqcheng wrote:
> Hi,
>  I have some tiff files compressed in JPEG, But cannot open..
> The error message is "cannot support 12 bits/sample".
> I want to know how to solve this? Does it need modification to JPEG library.
> Best Regards
> CXQ

CXQ,

Apparently libjpeg needs to be built a particular way to support
12 bit data (and then 8bit isn't supported).  I have never attempted
any support for 12 bit data myself though.  One client actually setup
a system with an 8bit libjpeg DLL, and a 12 bit libjpeg DLL and demand
loads them according to circumstances.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 28 08:31:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Gdal and pyramid files
In-Reply-To: <200404281245.41953.tim@linfiniti.com>
References: <200404281245.41953.tim@linfiniti.com>
Message-ID: <408FA43C.7080905@pobox.com>

Tim Sutton wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi again
> 
> I have been comparing the performance of (gdal based) qgis against  * ahem * 
> arcmap using the Nasa blue marble visible earth dataset (two tiffs totalling 
> roughly 2.8gig). In general arcmap rendering is faster, especially when 
> zoomed out so that most or all of the dataset is in view.
> 
> I found the following message in the archives:
> 
> http://remotesensing.org/pipermail/gdal-dev/2003-August/000948.html
> 
> And was wondering if the use of rrd files is automatic in the gdal tiff 
> driver, or if there is something special I need to "activate"?

Tim,

GDAL does not use ArcMap .rrd files (really Erdas Imagine files) except
when the base file is an Erdas Imagine file.

> On a similar note, if I create overviews using the gdaladdo utilitiy, does 
> gdal automatically look for and use the associated .ovr file?

If GDAL supports building the overviews for a given format, then it will
auto-detect the .ovr file when reading and use for suitable resolution
requests.

> Lastly, is it possible call gdaladdo programmatically?

Certainly. The core method is the BuildOverviews() method on the GDALDataset
class.  You can look in gdal/apps/gdaladdo.cpp to see how it is called in C++.
There is a corresponding GDALBuildOverviews() C function as well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 28 08:46:15 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OGR PG bugfix
In-Reply-To: <20040428062952.GA12769@thuille.itc.it>
References: <20040428062952.GA12769@thuille.itc.it>
Message-ID: <408FA797.5010204@pobox.com>

Markus Neteler wrote:
> Frank,
> 
> a strange parse error appears currently with PG connections.
> After quite some time I found it:
> 
> diff -u -r1.22 ogrpgdatasource.cpp
> --- ogrpgdatasource.cpp	23 Apr 2004 15:10:10 -0000	1.22
> +++ ogrpgdatasource.cpp	28 Apr 2004 06:21:35 -0000
> @@ -273,7 +273,7 @@
>          hResult = PQexec(hPGConn, 
>                           "DECLARE mycursor CURSOR for "
>                           "SELECT relname FROM pg_class "
> -                         "WHERE (relkind in ('r','v') AND relname !~ '^pg'" );
> +                         "WHERE (relkind in ('r','v') AND relname !~ '^pg')" );
>      }
>  
>      if( hResult && PQresultStatus(hResult) == PGRES_COMMAND_OK )
> 

Markus,

Yikes!  My mistake. I have committed the fix to CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Wed Apr 28 10:20:57 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] down sample question
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C905@APPMSG2.AERO.BALL.COM>

Thanks for the reply Frank.

New question...

Does anyone have a routine to share that given a data set in memory that
performs any form of interpolation to determine the elevation at a
particular latitude and longitude?  I assume this requires interpolation
from the latitude north and south the desired point as well as the
longitude east and west of the desired point.

I understand that GDAL is intended to be used for full arrays but I need
to do this function in a terrain information server so the user can find
the elevation of any specified point from a variety of data files.

As always, thanks for any suggestions or thoughts.

Bruce


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, April 27, 2004 9:38 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Dither question


Clay, Bruce wrote:
> I see that RasterIO can be used to effectively dither a raster file by

> skipping a certain number of pixels for both x and Y in the call.
> 
> Is there a method to extract data from the band at a specified 
> fraction of a degree spacing?
> 

Bruce,

Arguments tot he RasterIO() call are always pixel/line rectangles.  You
can approximately compute a pixel/line rectangle mapping corresponding
to a particular sampling ratio in degrees but it is up to the
application.

Note, that RasterIO() provides downsampling and upsampling with an
unspecified sampling approach.  In practice it is nearest neighbour
sampling with the exception of when overviews are available, in which
case it is nearest neighbour from the nearest overview of at least the
same resolution as the request.  However, since the overviews can be
generated via other mechanisms (ie. averaging) then final result may not
be quite nearest neighbour.

Also, I am not acustomed to calling generic downsampling dithering.  I
normally think of dithering as a family of techniques used to convert
24bit images to 8bit, often with "error diffusion" or other means to
average out radiometric error.  There is a GDALDitherRGB2PCT() function
available that will apply Floyd-Steinberg error diffusion during
dithering.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From nhv at cape.com  Wed Apr 28 10:49:12 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] down sample question
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C905@APPMSG2.AERO.BALL.COM>
Message-ID: <EKEJIKAILPONGGENMBGAIECDHFAA.nhv@cape.com>

Clay, Bruce writes:
> 
> New question...
> 
> Does anyone have a routine to share that given a data set in memory that
> performs any form of interpolation to determine the elevation at a
> particular latitude and longitude?  I assume this requires interpolation
> from the latitude north and south the desired point as well as the
> longitude east and west of the desired point.

I suggest just using simple bilinear interpolation to start with, for this,
you will need to determine the 4 points from your elevation grid that
describes the 'box' that contains your query point and then interpolate 
between them.

HTH

Norman

From matt.wilkie at gov.yk.ca  Wed Apr 28 12:58:21 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] win32 binary gdal distribution
In-Reply-To: <009801c42285$ba8b42a0$f400fe0a@TOPP2>
References: <009801c42285$ba8b42a0$f400fe0a@TOPP2>
Message-ID: <408FE2AD.1090709@gov.yk.ca>

Ben Discoe wrote:

>>> (2) run every time you open a shell on Windows... far better to
>>> simply put the GDAL bin dir on your path, a one-time operation.
>> 
>> 2) If you CALL the batchfile from autoexec.bat you don't need to
>> run it for every shell.
> 
> That's an interesting idea; i hadn't thought of that DOS legacy thing
>  for years.  Can you actually set environment variables there, which
> are then set through the whole OS?
> 
> ..for the purposes of installing any apps (e.g. VTP) which use GDAL,
> it has to be added to the path anyway - a batch file run from a shell
> won't do it, since it can't affect the system path.

just found this utility for setting persistent system variables from the 
commandline:
http://www.microsoft.com/windows2000/techinfo/reskit/tools/existing/setx-o.asp

It's a free download but probably not redistributable (I didn't bother 
my poor befuddled mind with the license agreement). Although the 
download is 600k the actual exe is only 24k.


cheers,

-matt


From roger at pocketterra.com  Wed Apr 28 13:31:05 2004
From: roger at pocketterra.com (Roger Bedell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Nautical Charts
Message-ID: <SYLVANSERVERreBBsQw00000015@sylvanserver>

Maptech sells the charts I need for the Caribbean for $149.00 in BSB format.
Two questions:

 

1)       Will GDAL read these?

2)       Anyone know of a free or cheaper source for these or similar
nautical charts?

 

Thanks!

 

Roger Bedell, President, Sylvan Ascent Inc.

roger@sylvanascent.com

505-758-7712

www.sylvanascent.com

www.pocketterra.com

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040428/a905c818/attachment.html
From warmerdam at pobox.com  Wed Apr 28 13:33:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] WMS and LAYERS= vs. STATUS Behaviour
Message-ID: <408FEAF8.2060903@pobox.com>

Daniel and others,

I have been experimenting a bit with the Gaia WMS viewer
(http://www.nukegold.com/downloads.htm) a bit against MapServer, and
found something that surprised me.

It seems that a layer with STATUS DEFAULT will be returned in a GetMap
request against MapServer regardless of whether the layer is in the
layers list or not.  Is this the expected behaviour?

I have a WMS server (from CVS) servering 3 layers, all of which have
STATUS DEFAULT.  Even if I ask for just one of them, it would appear I
get all 3.

I would have hoped MapServer would have:
  o returned only the requested layers if there is a LAYERS= parameter
    in the WMS GetMap request.
  o Returned only STATUS DEFAULT layers if there was no LAYERS= parameter
    in the WMS GetMap request.

If things are behaving as intended, then I think the WMS Server HOWTO
should mention this gotcha.

If things are not working as intended, it would appear the following code
in mapwms.c needs some alterations:

     // getMap parameters
     if (strcasecmp(names[i], "LAYERS") == 0)
     {
       int  j, k, iLayer;

       layers = split(values[i], ',', &numlayers);
       if (layers==NULL || numlayers < 1) {
         msSetError(MS_WMSERR, "At least one layer name required in LAYERS.",
                    "msWMSLoadGetMapParams()");
         return msWMSException(map, wmtver, NULL);
       }


       for (iLayer=0; iLayer < map->numlayers; iLayer++)
           map->layerorder[iLayer] = iLayer;

       for(j=0; j<map->numlayers; j++)
       {
         // Keep only layers with status=DEFAULT by default
         // Layer with status DEFAULT is drawn first.
         if (map->layers[j].status != MS_DEFAULT)
            map->layers[j].status = MS_OFF;
         else
            map->layerorder[nLayerOrder++] = j;
       }

       for (k=0; k<numlayers; k++)
       {
           layerfound = 0;
           for (j=0; j<map->numlayers; j++)
           {
               // Turn on selected layers only.
               if ((map->layers[j].name &&
                    strcasecmp(map->layers[j].name, layers[k]) == 0) ||
                   (map->name && strcasecmp(map->name, layers[k]) == 0) ||
                   (map->layers[j].group && strcasecmp(map->layers[j].group, layers[k]) == 0))
               {
                   map->layers[j].status = MS_ON;
                   map->layerorder[nLayerOrder++] = j;
                   validlayers++;
                   layerfound = 1;
               }
           }
           if (layerfound == 0)
             invalidlayers++;

       }

       // set all layers with status off at end of array
       for (j=0; j<map->numlayers; j++)
       {
          if (map->layers[j].status == MS_OFF)
            map->layerorder[nLayerOrder++] = j;
       }

       msFreeCharArray(layers, numlayers);
     }

I can provide a demonstration of the problem if required.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 28 13:35:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: WMS and LAYERS= vs. STATUS Behaviour
Message-ID: <408FEB7D.9070204@pobox.com>

Garr ... please disregard my previous message.  Wrong -dev list.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Apr 28 14:23:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Nautical Charts
In-Reply-To: <SYLVANSERVERreBBsQw00000015@sylvanserver>
References: <SYLVANSERVERreBBsQw00000015@sylvanserver>
Message-ID: <408FF6A9.90301@pobox.com>

Roger Bedell wrote:
> Maptech sells the charts I need for the Caribbean for $149.00 in BSB 
> format. Two questions:
> 
>  
> 
> 1)       Will GDAL read these?

Roger,

GDAL will read BSB files.  Note, that they are normally georeferenced
with ground control points rather than being "rectified".  This means you
might need to "gdalwarp" them before you can use them in some applications
that don't support import with GCPs.

> 2)       Anyone know of a free or cheaper source for these or similar 
> nautical charts?

I thought NOAA used to offer some for free download, but I am not sure if
those were only samples or in some other way limited.  It would be nice to
find a free (or even just alternate) source to avoid dumping money into the
hands of Maptech.

Speaking of whom, it appears they decided not to follow up on their threats
of legal action against me last fall.  I haven't heard from them since.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From todd.jellett at caris.com  Wed Apr 28 15:30:04 2004
From: todd.jellett at caris.com (Todd Jellett)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Nautical Charts
In-Reply-To: <408FF6A9.90301@pobox.com>
References: <SYLVANSERVERreBBsQw00000015@sylvanserver>
 <408FF6A9.90301@pobox.com>
Message-ID: <6.0.3.0.0.20040428161949.01c9fa48@surfer>

Roger and Frank,

BSB format nautical charts are now all encrypted. If you buy from MapTech
you will get a viewer which will allow you to view and print but you will 
not be
able to access the data programmatically.

Only the very early ones are not encrypted.

Obviously, MapTech considered encryption to be cheaper than legal action.

Todd

At 03:23 PM 4/28/2004, you wrote:
>Roger Bedell wrote:
>>Maptech sells the charts I need for the Caribbean for $149.00 in BSB 
>>format. Two questions:
>>
>>1)       Will GDAL read these?
>
>Roger,
>
>GDAL will read BSB files.  Note, that they are normally georeferenced
>with ground control points rather than being "rectified".  This means you
>might need to "gdalwarp" them before you can use them in some applications
>that don't support import with GCPs.
>
>>2)       Anyone know of a free or cheaper source for these or similar 
>>nautical charts?
>
>I thought NOAA used to offer some for free download, but I am not sure if
>those were only samples or in some other way limited.  It would be nice to
>find a free (or even just alternate) source to avoid dumping money into the
>hands of Maptech.
>
>Speaking of whom, it appears they decided not to follow up on their threats
>of legal action against me last fall.  I haven't heard from them since.
>
>Best regards,
>
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


From nhv at cape.com  Wed Apr 28 16:11:41 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Nautical Charts
In-Reply-To: <6.0.3.0.0.20040428161949.01c9fa48@surfer>
Message-ID: <EKEJIKAILPONGGENMBGAEEDIHFAA.nhv@cape.com>

Todd Jellett writes:
>  
> Obviously, MapTech considered encryption to be cheaper than legal action.

Or perhaps they came to the 'realization' that the patent they bought was for
creating files in a specific format not on reading files in that format :-)

also see
http://www.csc.noaa.gov/crs/chartreproj.html

and it is always worth rumaging around at the 'source'
http://chartmaker.ncd.noaa.gov/
for alternative charts unencumbered by patent see the ENC links

Cheers

Norman


From sjliu at supresoft.com.cn  Thu Apr 29 05:25:53 2004
From: sjliu at supresoft.com.cn (Liu Shijie)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Hi, Can you tell me how to build gdal from source code in the environment of Microsoft VC5?
Message-ID: <000701c42dcb$f9d6c730$157072ca@Supresoft.wh>

When i build the source in following steps:
1. C:\Program Files\Microsoft Visual Studio\\VC98\\bin\\VCVARS32.BAT


2. C:\GDAL> nmake /f makefile.vcIt comes to errors.Can you tell me how to build gdal from source in the environment of Microsoft VC5?Thanks!
best regards!

From warmerdam at pobox.com  Thu Apr 29 09:23:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Hi, Can you tell me how to build gdal from source
 code in the environment of Microsoft VC5?
In-Reply-To: <000701c42dcb$f9d6c730$157072ca@Supresoft.wh>
References: <000701c42dcb$f9d6c730$157072ca@Supresoft.wh>
Message-ID: <409101D7.7020001@pobox.com>

Liu Shijie wrote:
> When i build the source in following steps:
> 1. C:\Program Files\Microsoft Visual Studio\\VC98\\bin\\VCVARS32.BAT
> 
> 
> 2. C:\GDAL> nmake /f makefile.vcIt comes to errors.Can 
> you tell me how to build gdal from source in the environment
> of Microsoft VC5?Thanks!
> best regards!

Liu,

Are you seriously using VC++ 5.x?  That is ... ancient.  It seemed
weird to me that I still mostly use VC6 which is approximately six
years old.

You didn't list the errors you encounter, so there really isn't anything
we can do to help you, but I will start by saying that I support VC 6 and
VC.NET.  If you are still running VC5 you had better upgrade or you will
likely run into all sorts of hassles.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From janb at zmg.nl  Thu Apr 29 08:36:15 2004
From: janb at zmg.nl (Jan Boonen)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ArcGIS connection with PostGIS
Message-ID: <009801c42de6$909999d0$6b1ed383@cpz107>

Hello,

We are a company that is creating a GIS for geologic purposes using
open-source software solutions. Currently we have a PostgreSQL database
running with the PostGIS extension. In order to view and edit spatial data
we use ArcGIS from ESRI.

It appears however that connecting to a PostGIS table with ArcGIS is quite
difficult.

The current option for us is to develop a new extension to ArcGIS so that
the PostGIS possibilities become available, but this is a daunting task so
we would like to check beforehand if some efforts have been made recently on
this issue appearing regularly on several opensource GIS forums. It is most
likely that we are going to use Delphi as primary development language and
where needed we will use Visual C++. For PostgreSQL connectivity we are
probably going to use ODBC or native Delphi components in combination with
the GDAL library of Frank Warmerdam. If there is somebody here that is also
working on such a project it might be interesting to get in contact and
discuss the development process. For everybody who is also interested in
such an application, please contact us so that we can see if we can meet
your needs too.

Greetings,

Jan Boonen
Zoutewelle Media Groep b.v
Department of software development
The Netherlands
E-mail: janb@zmg.nl


From TMitchell at lignum.com  Thu Apr 29 12:50:21 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: ArcGIS connection with PostGIS
In-Reply-To: <009801c42de6$909999d0$6b1ed383@cpz107>
Message-ID: <OF80C874C5.66FCEF38-ON88256E85.005B9187-88256E85.005C7FF2@lignum.com>

Jan,
There has been some initial work on an extension done, in VB, by one 
group.  It has been updated by a few others, but provides a decent ability 
to extract data from PostGIS into an ArcMap layer and stores enough 
metadata to allow you to edit the file and post it back into PostGIS, 
replacing the table with the updated info. 

This project is called PgArc - located at: 
http://sourceforge.net/projects/pgarc/ or http://pgarc.sourceforge.net/
I can add you to the developers list if you want to continue discussions 
there.

A side group has been working on developing a PostgreSQL ole db connector 
which can serve as a basis for read and write connectivity directly with 
the database using, from what I understand, a more standard ArcMap 
component. 

The website for this project appears to be down, but you can find it on: 
http://gborg.postgresql.org/

I highly recommend building on this previous work or at least building on 
the Ole db connector work, rather than using ODBC.  If interested, this is 
worthy of more discussion on the pgarc mailing list or one that you may 
have for your project.  I am interested in helping coordinate bringing the 
two projects together.  Feel free to also contact my off list to discuss.

Tyler


gdal-dev-admin@remotesensing.org wrote on 04/29/2004 05:36:15 AM:

> Hello,
> 
> We are a company that is creating a GIS for geologic purposes using
> open-source software solutions. Currently we have a PostgreSQL database
> running with the PostGIS extension. In order to view and edit spatial 
data
> we use ArcGIS from ESRI.
> 
> It appears however that connecting to a PostGIS table with ArcGIS is 
quite
> difficult.
> 
> The current option for us is to develop a new extension to ArcGIS so 
that
> the PostGIS possibilities become available, but this is a daunting task 
so
> we would like to check beforehand if some efforts have been made 
recently on
> this issue appearing regularly on several opensource GIS forums. It is 
most
> likely that we are going to use Delphi as primary development language 
and
> where needed we will use Visual C++. For PostgreSQL connectivity we are
> probably going to use ODBC or native Delphi components in combination 
with
> the GDAL library of Frank Warmerdam. If there is somebody here that is 
also
> working on such a project it might be interesting to get in contact and
> discuss the development process. For everybody who is also interested in
> such an application, please contact us so that we can see if we can meet
> your needs too.
> 
> Greetings,
> 
> Jan Boonen
> Zoutewelle Media Groep b.v
> Department of software development
> The Netherlands
> E-mail: janb@zmg.nl
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From ben at vterrain.org  Thu Apr 29 14:23:00 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
In-Reply-To: <408FE2AD.1090709@gov.yk.ca>
Message-ID: <011301c42e17$01501ed0$f400fe0a@TOPP2>

I've been asked about the ERMapper .ers format... could GDAL read/write it?
It seems to be an open format, in that ERMapper generally encourages people
to use their format.  It is a raster format, i think?

-Ben


From TMitchell at lignum.com  Thu Apr 29 14:35:14 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
In-Reply-To: <011301c42e17$01501ed0$f400fe0a@TOPP2>
Message-ID: <OF3807B96A.334AFCAA-ON88256E85.0065F0BA-88256E85.00661AA5@lignum.com>

Hi Ben, the ers file is a text file that describes the dataset - bands, 
projection,  and sundry other details.  I'll paste an example for you. I'm 
not sure of its utility and whether or not gdal reads or writes it.

Tyler
------------
DatasetHeader Begin
        Version         = "6.0"
        Name            = "93B040_2001ortho.ers"
        LastUpdated     = Wed Mar 06 09:45:59 GMT 2002
        DataFile        = "93B040_2001ortho.ecw"
        DataSetType     = Translated
        DataType        = Raster
        ByteOrder       = LSBFirst
        CoordinateSpace Begin
                Datum           = "NAD83"
                Projection      = "NUTM10"
                CoordinateType  = EN
                Rotation        = 0:0:0.0
        CoordinateSpace End
        RasterInfo Begin
                CellType        = Unsigned8BitInteger
                CellInfo Begin
                        Xdimension      = 0.5
                        Ydimension      = 0.49999999999955286
                CellInfo End
                NrOfLines       = 22910
                NrOfCellsPerLine        = 27860
                RegistrationCoord Begin
                        Eastings        = 554369.99999999942
                        Northings       = 5806149.9999999898
                RegistrationCoord End
                NrOfBands       = 3
                BandId Begin
                        Value           = "Red"
                BandId End
                BandId Begin
                        Value           = "Green"
                BandId End
                BandId Begin
                        Value           = "Blue"
                BandId End
                RegionInfo Begin
                        Type            = Polygon
                        RegionName      = "All"
                        SubRegion       = {
                                0       0
                                0       22910
                                27860   22910
                                27860   0
                        }
                RegionInfo End
        RasterInfo End
DatasetHeader End


From ben at vterrain.org  Thu Apr 29 14:47:12 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
In-Reply-To: <OF3807B96A.334AFCAA-ON88256E85.0065F0BA-88256E85.00661AA5@lignum.com>
Message-ID: <011701c42e1a$62345240$f400fe0a@TOPP2>

Thanks Tyler,

So, it appears that .ers is just a metadata format, whereas .ecw would
contain the real data.  I recall that GDAL can be configured to support ECW,
so that's probably what my user is asking for; the .ers probably isn't
relevant.

-Ben

> -----Original Message-----
> From: Tyler Mitchell
> Sent: Thursday, April 29, 2004 2:35 PM
> 
> Hi Ben, the ers file is a text file that describes the 
> dataset - bands, projection,  and sundry other details.
> I'll paste an example for you. I'm not sure of its utility
> and whether or not gdal reads or writes it.
> 
> Tyler
> ------------
> DatasetHeader Begin
>         Version         = "6.0"
>         Name            = "93B040_2001ortho.ers"
>         LastUpdated     = Wed Mar 06 09:45:59 GMT 2002
>         DataFile        = "93B040_2001ortho.ecw"


From warmerdam at pobox.com  Thu Apr 29 14:46:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
In-Reply-To: <011301c42e17$01501ed0$f400fe0a@TOPP2>
References: <011301c42e17$01501ed0$f400fe0a@TOPP2>
Message-ID: <40914D6C.8040305@pobox.com>

Ben Discoe wrote:
> I've been asked about the ERMapper .ers format... could GDAL read/write it?
> It seems to be an open format, in that ERMapper generally encourages people
> to use their format.  It is a raster format, i think?

Ben,

 From a few samples I have seen I gather the .ers file is basically an ascii
header describing an external raster file which can be in any number of formats.
I presume there is some raw raster format for files generated within ERMapper.
I think that in some cases the .ers file is also an algorithm description of
how to generate a raster from other files.

However, I'm not really very sure of any of this.

If folks want to scare up some examples datasets (not too huge I hope) I
could look at implementing some degree of support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From TMitchell at lignum.com  Thu Apr 29 14:59:16 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
In-Reply-To: <40914D6C.8040305@pobox.com>
Message-ID: <OF04A4B977.4109E544-ON88256E85.006826AD-88256E85.00684DC0@lignum.com>

> I think that in some cases the .ers file is also an algorithm 
description of
> how to generate a raster from other files.

They also have an .alg algorithm file which can do virtual enhancements 
and mosaics.  It's quite slick...if your software supports it.

> If folks want to scare up some examples datasets (not too huge I hope) I
> could look at implementing some degree of support.

I'll send you some examples.



From bfraser at geoanalytic.com  Thu Apr 29 16:17:10 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ERMapper .ers ?
References: <011301c42e17$01501ed0$f400fe0a@TOPP2> <40914D6C.8040305@pobox.com>
Message-ID: <00f801c42e26$f3e25d70$020002c0@SHARK>

Frank,

ERMapper has a free C library available (different from the ECW SDK).  It
allows reading of ".ers" and ".alg" files.  From my little dabbling that
I've done with it, the C api should fit into the GDAL architecture without
too much pain.  The doc is fairly poor, but there are a couple of example
apps included with SDK.

http://www.ermapper.com/sdks/default.aspx#erm

Brent Fraser

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Thursday, April 29, 2004 12:46 PM
Subject: Re: [Gdal-dev] ERMapper .ers ?


> Ben Discoe wrote:
> > I've been asked about the ERMapper .ers format... could GDAL read/write
it?
> > It seems to be an open format, in that ERMapper generally encourages
people
> > to use their format.  It is a raster format, i think?
>
> Ben,
>
>  From a few samples I have seen I gather the .ers file is basically an
ascii
> header describing an external raster file which can be in any number of
formats.
> I presume there is some raw raster format for files generated within
ERMapper.
> I think that in some cases the .ers file is also an algorithm description
of
> how to generate a raster from other files.
>
> However, I'm not really very sure of any of this.
>
> If folks want to scare up some examples datasets (not too huge I hope) I
> could look at implementing some degree of support.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From nhv at cape.com  Thu Apr 29 19:23:06 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: [vtp] MSVCRTD.dll
In-Reply-To: <013401c42e3a$175c43c0$f400fe0a@TOPP2>
Message-ID: <EKEJIKAILPONGGENMBGAAEHLHFAA.nhv@cape.com>

Ben Discoe writes:
> 
> > From: Michael Flaxman
> > 
> > I'm caught on an unrelated problem.  Somehow, my Enviro is 
> > not finding projd.dll.  Its in my windows/system32 folder, and 
> > "Depends.exe" finds it.
> 
> Some theories.  Could be a versioning issue; the projd.dll might have gotten
> moved around on your system from an older copy.  Might be a related API
> failure, which GDAL is simply reporting as 'DLL not found' even though the
> DLL is found.

my WAG is that GDAL is looking for proj.dll and doesn't look for projd.dll

see $GDAL_SRC / ogr / ogrct.cpp

Norman

From MChapman at sanz.com  Thu Apr 29 19:24:06 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: [vtp] MSVCRTD.dll
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95AE@mailman.san.com>

projd.dll sounds like the debug version of proj.dll.

Martin

-----Original Message-----
From: Norman Vine [mailto:nhv@cape.com] 
Sent: Thursday, April 29, 2004 5:23 PM
To: vtp@yahoogroups.com
Cc: gdal-dev@remotesensing.org
Subject: RE: [vtp] MSVCRTD.dll


Ben Discoe writes:
> 
> > From: Michael Flaxman
> > 
> > I'm caught on an unrelated problem.  Somehow, my Enviro is
> > not finding projd.dll.  Its in my windows/system32 folder, and 
> > "Depends.exe" finds it.
> 
> Some theories.  Could be a versioning issue; the projd.dll might have 
> gotten moved around on your system from an older copy.  Might be a 
> related API failure, which GDAL is simply reporting as 'DLL not found'

> even though the DLL is found.

my WAG is that GDAL is looking for proj.dll and doesn't look for
projd.dll

see $GDAL_SRC / ogr / ogrct.cpp

Norman


 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/vtp/

<*> To unsubscribe from this group, send an email to:
     vtp-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 


From MChapman at sanz.com  Thu Apr 29 19:26:43 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] RE: [vtp] MSVCRTD.dll
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95AF@mailman.san.com>

Are your degug link settings correct in visual studio?

Martin

-----Original Message-----
From: Chapman, Martin 
Sent: Thursday, April 29, 2004 5:24 PM
To: vtp@yahoogroups.com
Cc: gdal-dev@remotesensing.org
Subject: RE: [vtp] MSVCRTD.dll


projd.dll sounds like the debug version of proj.dll.

Martin

-----Original Message-----
From: Norman Vine [mailto:nhv@cape.com] 
Sent: Thursday, April 29, 2004 5:23 PM
To: vtp@yahoogroups.com
Cc: gdal-dev@remotesensing.org
Subject: RE: [vtp] MSVCRTD.dll


Ben Discoe writes:
> 
> > From: Michael Flaxman
> > 
> > I'm caught on an unrelated problem.  Somehow, my Enviro is not 
> > finding projd.dll.  Its in my windows/system32 folder, and 
> > "Depends.exe" finds it.
> 
> Some theories.  Could be a versioning issue; the projd.dll might have
> gotten moved around on your system from an older copy.  Might be a 
> related API failure, which GDAL is simply reporting as 'DLL not found'

> even though the DLL is found.

my WAG is that GDAL is looking for proj.dll and doesn't look for
projd.dll

see $GDAL_SRC / ogr / ogrct.cpp

Norman


 
Yahoo! Groups Links



 



 
Yahoo! Groups Links

<*> To visit your group on the web, go to:
     http://groups.yahoo.com/group/vtp/

<*> To unsubscribe from this group, send an email to:
     vtp-unsubscribe@yahoogroups.com

<*> Your use of Yahoo! Groups is subject to:
     http://docs.yahoo.com/info/terms/
 


From roger at pocketterra.com  Fri Apr 30 11:02:00 2004
From: roger at pocketterra.com (Roger Bedell)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Nautical Charts
In-Reply-To: <EKEJIKAILPONGGENMBGAEEDIHFAA.nhv@cape.com>
Message-ID: <SYLVANSERVER0iSwi4900000041@sylvanserver>

FYI, I also found this site:

www.marineplanner.com

which sells seemingly the same BSB charts as MapTech (non-encrypted) for
about $9.00 each. These were successfully read by GDAL.

Roger

Roger Bedell, President, Sylvan Ascent Inc.
roger@sylvanascent.com
505-758-7712
www.sylvanascent.com
www.pocketterra.com
 
 
-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Norman Vine
Sent: Wednesday, April 28, 2004 2:12 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Nautical Charts

Todd Jellett writes:
>  
> Obviously, MapTech considered encryption to be cheaper than legal action.

Or perhaps they came to the 'realization' that the patent they bought was
for
creating files in a specific format not on reading files in that format :-)

also see
http://www.csc.noaa.gov/crs/chartreproj.html

and it is always worth rumaging around at the 'source'
http://chartmaker.ncd.noaa.gov/
for alternative charts unencumbered by patent see the ENC links

Cheers

Norman

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev



From val at GRI.MsState.Edu  Fri Apr 30 15:12:14 2004
From: val at GRI.MsState.Edu (Valentine Anantharaj)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GeoJP2K: Unable to view 16-bit data
Message-ID: <4092A50E.2060202@GRI.MsState.Edu>

Greetings!

I am unable to view some16-bit GeoJP2K files, created using GDAL w/ 
Kakadu support.  The viewer window was simply blcak.  I tried them using 
both 'kdu_show' and the MSI viewer as well as their ArcView plug-ins.  I 
also got similar results (everything just black) from the '16-bit 
comparison' samples from:

    ftp://ftp.remotesensing.org/jpeg2000/16bitcomparison

The 8-bit, 3 channel RGB files display fine in both kdu_show and MSI 
viewer.  Any recommendation for viewing 16-bit GeoJP2K files?  I do not 
have the necessary patches/sevice-packs/modules for ENVI 4.0 or IMAGINE 8.6.

Thanks.

Regards,

VGA






From val at GRI.MsState.Edu  Fri Apr 30 15:30:05 2004
From: val at GRI.MsState.Edu (Valentine Anantharaj)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Experiences compiling gdal-1.2.0 w/ JP2KAK Support
Message-ID: <4092A93D.5050406@GRI.MsState.Edu>

Greetings!

I just want to report that I had to tweak the GDALmake.opt in order to 
compile gdal-1.2.0 sources on Linux.  I was using the Kakadu 4.1 
distribution for jp2k support.

To get started, I was not able to compile Kakadu with gcc 2.95.3 -- our 
default gcc installation.  I had to swith to gcc 3.3.1 in order to 
compile Kakadu.  So, I had to use the same gcc 3.3.1 for GDAL also.  
First I tried just:

    ./configure --with-prefix="...my_prefix ..." 
--with-kakadu="...Kakadu_path"

The make process quit while trying to link 'libgdal.so'.  Then I had to 
hack the GDALmake.opt to explicitly specify a path to the location of 
'-lkdu'.  But when I did this, libtool started re-making some of the 
sources on ogr/ and quit complaining about unresolved references to JP2K 
functions in 'libgdal.so'.  So, I reconfigure by including 
'--without-libtool'.  Now, it compiled file (I still had to re-hack 
GDALMake.opt though).

My testing of JP2K for 8-bit RGB files were ok.  I 16-bit support seems 
to be ok, though I had problems viewing them using 'kdu_show' (see my 
previous post ion this).


Regards,

VGA



From val at GRI.MsState.Edu  Fri Apr 30 15:44:17 2004
From: val at GRI.MsState.Edu (Valentine Anantharaj)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Re: GeoJP2K: Unable to view 16-bit data
In-Reply-To: <4092A50E.2060202@GRI.MsState.Edu>
References: <4092A50E.2060202@GRI.MsState.Edu>
Message-ID: <4092AC91.8050608@GRI.MsState.Edu>

I found another related post in the Kakadu discussion group.  I think 
that this information from Dr. Taubman may be relevant to my original 
message regarding the viewers just showing black pixels of 16-bit data.

Regards,

VGA


________

From:  "David Taubman" <d.taubman@u... 
<http://groups.yahoo.com/group/kakadu_jpeg2000/post?postID=q-Dlm5jPyTWVCMdM4HBvKTiZBw58C6NiQNOPyX8_LhdIHe-xv1IC8X9zE8cHHboD3YMx-SAq8vdIkohMlw>> 

Date:  Mon Dec 22, 2003  6:46 pm
Subject:  Re: [kakadu_jpeg2000] About kdu_show...

HI Antonio,

This seems a little mysterious to me. The only thing
I can think of is that the 16-bit sample values mean
quite different things for each of your two images.
There should not be any size dependency. "kdu_show"
displays the most significant 8 bits of the decompressed
image -- in fact, it asks the decompression machinery to
decompress the data with only sufficient precision to
render these most significant bits since the less significant
bits are invisible. A common mistake in using JPEG2000
is to compress an image whose samples are stored in a
16-bit format as a 16-bit image even if the data is really all
in the least significant, say, 12 bits. The Kakadu perspective
(and the one which is most in line with the way JPEG2000
does things in its irreversible processing path) is that black
corresponds to the minimal representable integer, while white
corresponds to the maximum representable integer, at
the stated precision, with everything else corresponding to
shades of grey. So if you have compressed a 12 bit image,
stored in 16 bit words, as though it were 16 bit data, you
are basically telling the compressor (and subsequent renderers)
that the brightest sample value is 1/16 of the value associated
with white -- and of course, the image will look black. If
your imagery really has less bits, use Sprecision to set the
actual precision of the data.

Hope this helps -- otherwise, if you think something is
wrong with Kakadu, could you send me a small sample
please.

Cheers,

David

---------------------------------------
Dr. David Taubman
Head: Telecommunications Research Group
Associate Professor, School of Electrical Engineering and Telecommunications
The University of New South Wales
UNSW Sydney 2052, Australia
Phone: 61 2 9385-5223
Fax: 61 2 9385-5993

---------------------------------------
This message is intended for the addressee named and may contain
confidential information. If you are not the intended recipient, please
delete it and notify the sender. Views expressed in this message are
those of the individual sender and are not necessarily the views of
UNSW.

----- Original Message -----
From: "antonio serra" <prof_motoserra@y... 
<http://groups.yahoo.com/group/kakadu_jpeg2000/post?postID=BI7nnqNffTUAvEvgTem_Vt2VfUJXyuCuKywlB6I13exLlNLt3EV63-89NGZJXqIAcu9NzyDn9phyiluOEdw>>
To: <kakadu_jpeg2000@yahoogroups.com 
<http://groups.yahoo.com/group/kakadu_jpeg2000/post?postID=NPRVX8HdnuSfB6YDCWS47t7oLh1ZpFFJcvoO2E03DN261Dmdza9hkAD7bQEvLAvItu7ATR8CBRTakxa4H2mK2IwnMBFAYw>>
Sent: Saturday, December 20, 2003 2:54 AM
Subject: [kakadu_jpeg2000] About kdu_show...


 > Hi all!
 >
 > My question is related with kdu_show and image
 > visualization. I have 2 images both grayscale, 16 bits
 > per sample, unsigned, sizes 9911x10161 and 1536x1121.
 > Compressing both images with same parameters I can see
 > the smaller one but the other shows all black. There
 > is any problem with the image size? I guess not. Does
 > kdu_show do any truncation of the samples values
 > before showing them? If yes what kind?
 >
 > Thanks in advance,
 > AS
 >

Valentine Anantharaj wrote:

> Greetings!
>
> I am unable to view some16-bit GeoJP2K files, created using GDAL w/ 
> Kakadu support.  The viewer window was simply blcak.  I tried them 
> using both 'kdu_show' and the MSI viewer as well as their ArcView 
> plug-ins.  I also got similar results (everything just black) from the 
> '16-bit comparison' samples from:
>
>    ftp://ftp.remotesensing.org/jpeg2000/16bitcomparison
>
> The 8-bit, 3 channel RGB files display fine in both kdu_show and MSI 
> viewer.  Any recommendation for viewing 16-bit GeoJP2K files?  I do 
> not have the necessary patches/sevice-packs/modules for ENVI 4.0 or 
> IMAGINE 8.6.
>
> Thanks.
>
> Regards,
>
> VGA
>
>
>
>
>


From warmerdam at pobox.com  Fri Apr 30 17:05:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GeoJP2K: Unable to view 16-bit data
In-Reply-To: <4092A50E.2060202@GRI.MsState.Edu>
References: <4092A50E.2060202@GRI.MsState.Edu>
Message-ID: <4092BFA6.6060703@pobox.com>

Valentine Anantharaj wrote:
> Greetings!
> 
> I am unable to view some16-bit GeoJP2K files, created using GDAL w/ 
> Kakadu support.  The viewer window was simply blcak.  I tried them using 
> both 'kdu_show' and the MSI viewer as well as their ArcView plug-ins.  I 
> also got similar results (everything just black) from the '16-bit 
> comparison' samples from:
> 
>    ftp://ftp.remotesensing.org/jpeg2000/16bitcomparison
> 
> The 8-bit, 3 channel RGB files display fine in both kdu_show and MSI 
> viewer.  Any recommendation for viewing 16-bit GeoJP2K files?  I do not 
> have the necessary patches/sevice-packs/modules for ENVI 4.0 or IMAGINE 
> 8.6.

VGA,

I believe the problem is that these 16 bit files have a relatively small
small dynamic range.  Kdu_show just divides 16bit values by 256 to get
an 8bit value for display purposes.  So a 16bit file with values going from
0 to 1000 would end up being scaled to roughly 0-4 out of 256.

If you want to generate a 16bit file that is viewable with kdu_show, I think
scaling it to the full range would help. For instance, the following would
scale input 8bit data to 16 byte data stretching the range 0 to 255 to
0 to 65535.

eg.

gdal_translate -of JP2KAK -scale 0 255 0 65535 -ot UInt16 utm.tif out.tif

My opinion is that kdu_show (and the MSI viewer) are just not well suited
to remotely sensed 16 bit data which often has a limited dynamic range related
to the values that come from the original sensor.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bylahallip at noida.hcltech.com  Fri Apr 30 05:37:47 2004
From: bylahallip at noida.hcltech.com (Bylahalli  Chandrashekara  Prasad, Noida)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] jpeg2000 memory management??????
Message-ID: <1B3885BC15C7024C845AAC78314766C505BD7C9E@exch-01.noida.hcltech.com>

Hi,
i am working on JASPERE code looking for memory efficieny, i found  a memory
leakeage in the code and also a bug in quantization
with regards,
prasad


Disclaimer: 

This message and any attachment(s) contained here are information that is
confidential,proprietary to HCL Technologies and its customers, privileged
or otherwise protected by law.The information is solely intended for the
individual or the entity it is addressed to. If you are not the intended
recipient of this message, you are not authorized to read, forward,
print,retain, copy or disseminate this message or any part of it. If you
have received this e-mail in error, please notify the sender immediately by
return e-mail and delete it from your computer.



From jnielsen at aero-graphics.com  Fri Apr 30 10:17:05 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] ArcGrid .adf format compatibility.
Message-ID: <c6tn34$erg$1@sea.gmane.org>

We have some arcgrid .adf files from geocomm.com. I am not very familiar
with this format but it does pull up fine in ArcMap 8.3. Below are the
details of the issues I have run into. I was wondering if anyone knows
what I may have wrong. It would seem I have the arc grid support. Thanks.

[root@localhost DEM11041]# gdalinfo --formats
Supported Formats:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  SAR_CEOS: CEOS SAR Image
  CEOS: CEOS Image
  ELAS: ELAS
  AIG: Arc/Info Binary Grid
  AAIGrid: Arc/Info ASCII Grid
  SDTS: SDTS Raster
  DTED: DTED Elevation Raster
  PNG: Portable Network Graphics
  JPEG: JPEG JFIF
  MEM: In Memory Raster
  JDEM: Japanese DEM (.mem)
  GIF: Graphics Interchange Format (.gif)
  ESAT: Envisat Image Format
  BSB: Maptech BSB Nautical Charts
  XPM: X11 PixMap Format
  BMP: MS Windows Device Independent Bitmap
  PNM: Portable Pixmap Format (netpbm)
  DOQ1: USGS DOQ (Old Style)
  DOQ2: USGS DOQ (New Style)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Atlantis MFF Raster
  MFF2: Atlantis MFF2 (HKV) Raster
  FujiBAS: Fuji BAS Scanner Image
  GSC: GSC Geogrid
  FAST: EOSAT FAST Format
  L1B: NOAA Polar Orbiter Level 1b Data Set
  FIT: FIT Image
  USGSDEM: USGS Optional ASCII DEM
  GXF: GeoSoft Grid Exchange Format

[root@localhost DEM11041]# gdalinfo W001001.ADF 
ERROR 4: `W001001.ADF' not recognised as a supported file format.

GDALOpen failed - 4
`W001001.ADF' not recognised as a supported file format.




