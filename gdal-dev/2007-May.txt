From ivan.lucena at pmldnet.com  Tue May  1 00:23:53 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] RFC 11: Fast Format Identification
In-Reply-To: <46369FFB.6080801@pobox.com>
References: <463575C9.9080007@pobox.com>
	<000001c78b82$cbde47a0$0a0a0a0a@idrisi.clarku.edu>
	<46369FFB.6080801@pobox.com>
Message-ID: <000401c78ba8$87fe8740$0a0a0a0a@idrisi.clarku.edu>

Frank,

I realize that we are talking about a different application and different
user-interface. You want to load a FileSectionDialog so it must be fast and
it must show the list at once. I was talking about running the file-browser
in a separate tread so that the UI could be update while the query is been
made. I guess that the fast format identification will be a plus in both
cases. 

Anyway, I always felt that the drivers open method is doing more than it
should, so separating Identify() from Open() is a good refactorying idea. 

You can add RST in your list and I will take care of it.

Regards,

Ivan

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, April 30, 2007 10:04 PM
To: Ivan Lucena
Cc: 'gdal-dev'
Subject: Re: [Gdal-dev] RFC 11: Fast Format Identification

Ivan Lucena wrote:
> A faster identifier would be nice but IMHO I think that you can accomplish
> improvement is performance without the proposed change so that your
> application will take responsibility for that. You can thread the
> user-interface, record search-index like google desktop or/and treat
> especial case in your own driver-manager loop in your app.

Ivan,

I don't see that multi-threading is a great solution to speeding up
identification, and if it is, it should provide even more benefit
once the identify operation is available.

Keeping some sort of search index might work in some contexts, but at
a great cost in complication and there would still be the brutal hit the
first time a big directory on a network drive is accessed.

I quite agree that the identify feature is not *critical* for folks to
build applications with GDAL.  But there is an important client who wants
it to improve their user experience, and I can see it being useful for other
applications, so I'm keen to provide a solution.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From aaime at openplans.org  Tue May  1 05:15:56 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Build failure with VC6 (and continued failures with
	mingw)
Message-ID: <4637054C.9030805@openplans.org>

Hi,
today I tried to build gdal again with VC6 to find it does not
build anymore due to changes in the Integraph module:

icrosoft (R) Program Maintenance Utility   Version 6.00.8168.0
Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
         cl /nologo /MD /EHsc /Zi /Fd..\..\gdal.pdb -I..\..\port 
-I..\..\ogr -I..\..\gcore  -I..\..\alg -D_USE_MATH_DEFINES 
-I..\gtiff\libtiff /c intergraphdataset.cpp
intergraphdataset.cpp
IngrTypes.h(62) : error C2632: 'long' followed by 'long' is illegal
IngrTypes.h(63) : error C2632: 'long' followed by 'long' is illegal
intergraphdataset.cpp(445) : error C2374: 'i' : redefinition; multiple 
initialization
         intergraphdataset.cpp(410) : see declaration of 'i'
intergraphdataset.cpp(451) : error C2374: 'i' : redefinition; multiple 
initialization
         intergraphdataset.cpp(410) : see declaration of 'i'
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

I also tried going on with mingw, which compiles fine gdal and ogr,
but then starts complaining in the swig binding directory about
issues I don't remember about with the java OGR bindings.
I also tried building a swig version specific for MinGW, as suggested
on the SWIG site, but failed because of autoconf issues...
the msys and mingw guys do not seem to be getting along very well 
apparently, there are two autoconf versions around, one distributed 
along with mingw, that does not work out of the box because I miss
perl, which is distributed with the msysdtk.... which installs its own
version of autoconf and automake too.

Oh well, I had enough for today. If I have some half a day to throw
away next weekend I'll try again the visual c++ express path (which
I have to reinstall from scratch, find the right windows SDK, the
right incantations to pacth atl, and so on... would be nice to have
a guide).

Cheers
Andrea

From ari.jolma at tkk.fi  Tue May  1 09:24:22 2007
From: ari.jolma at tkk.fi (ari.jolma@tkk.fi)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Build failure with VC6 (and continued failures with
	mingw)
In-Reply-To: <4637054C.9030805@openplans.org>
References: <4637054C.9030805@openplans.org>
Message-ID: <46373F86.2070506@tkk.fi>

Andrea Aime kirjoitti:
> I also tried building a swig version specific for MinGW, as suggested
> on the SWIG site, but failed because of autoconf issues...

I've used a swig for windows binary distribution from msys shell and 
that has worked well.

I've never got autoconf working in msys.

> the msys and mingw guys do not seem to be getting along very well 
> apparently, there are two autoconf versions around, one distributed 
> along with mingw, that does not work out of the box because I miss
> perl, which is distributed with the msysdtk.... which installs its own
> version of autoconf and automake too.

I haven't found a perl that works in msys at all. The perl I use in 
Windows I build myself with dmake and mingw in a plain windows command 
prompt. It does not work in msys shell.

I should try to build the perl bindings in windows with ActiveState perl 
and the GDAL-devel package Frank put out, but haven't got into really 
trying.

Cheers,

Ari



From warmerdam at pobox.com  Tue May  1 09:34:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Motion: To approve RFC 11: Fast Format Identify
Message-ID: <463741F6.6020408@pobox.com>

Motion: To approve RFC 11: Fast Format Identify as described at:
http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify

--

I have added a section indicating the CPLReadDir() will need to be
re-implemented in such a way that it works for /vsimem/ stuff (virtual
filesystem in memory).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue May  1 13:13:33 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
In-Reply-To: <4634A1F6.7030801@o2.pl>
References: <46332386.7060402@o2.pl> <46335D15.1060104@pobox.com>
	<4634A1F6.7030801@o2.pl>
Message-ID: <4637753D.5010004@gov.yk.ca>

>> I assume you are referring to this?
>>
>>   file:///home/warmerda/gdal/html/frmt_jpeg.html
> 
> Yes. I failed to paste that link.

ummm, how about http://www.gdal.org/frmt_jpeg.html :)

>> It states "Only Byte band types are supported, and only 1 and 3 band
>> configurations." in the Creation Options discussion.  This means you can
>> only create files with one band (treated as greyscale) and three bands
>> (treated as RGB).  Does that answer your question?
> 
> Yes. Thanks. Could this extended info be added to JPEG spec as well as
> to JPEG section in GeoTIFF spec?

With regard to rewriting that page, balancing detail which will confuse 
against more information: The 1 or 3 band info is actually in there 
twice right now, which may have contributed to Maciej's original 
confusion. How about simply removing the second instance under "Creation 
Options", since the band configuration is not actually a -co anyway?

"
Creation Options

JPEG files are created using the "JPEG" driver code. JPEG file creation 
is implemented by the batch (CreateCopy) method.
"


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From dmorissette at mapgears.com  Tue May  1 14:03:48 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Motion: To approve RFC 11: Fast Format Identify
In-Reply-To: <463741F6.6020408@pobox.com>
References: <463741F6.6020408@pobox.com>
Message-ID: <46378104.9@mapgears.com>

+0 (I don't have a string opinion on this one.)

Daniel


Frank Warmerdam wrote:
> Motion: To approve RFC 11: Fast Format Identify as described at:
> http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify
> 
> -- 
> 
> I have added a section indicating the CPLReadDir() will need to be
> re-implemented in such a way that it works for /vsimem/ stuff (virtual
> filesystem in memory).
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From tutey at o2.pl  Tue May  1 14:08:28 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] what is "band configurations"?
In-Reply-To: <4637753D.5010004@gov.yk.ca>
References: <46332386.7060402@o2.pl> <46335D15.1060104@pobox.com>
	<4634A1F6.7030801@o2.pl> <4637753D.5010004@gov.yk.ca>
Message-ID: <4637821C.7000803@o2.pl>

Matt Wilkie wrote:

> With regard to rewriting that page, balancing detail which will confuse
> against more information: The 1 or 3 band info is actually in there
> twice right now, which may have contributed to Maciej's original
> confusion. How about simply removing the second instance under "Creation
> Options", since the band configuration is not actually a -co anyway?
> 
> "
> Creation Options
> 
> JPEG files are created using the "JPEG" driver code. JPEG file creation
> is implemented by the batch (CreateCopy) method.
> "

Anyway, I'd vote for more documentation against less, if that's not too
much trouble.

Cheers,
Maciek

From tosborn at sbcglobal.net  Tue May  1 18:25:04 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] EPSG: 3433 and EPSG:3434
Message-ID: <10277042.post@talk.nabble.com>


It appears that both of these EPSG codes were added by EPSG to their database
in January of this year (in addition to a bunch of other codes).  3433 is
NAD83 / Arkansas North (ftUS) and 3434 is NAD83 / Arkansas South (ftUS
)....both US Survey Feet as specified by State Law.  Neither code appears to
be currently in the data files accessed by GDAL or OGR.  I'm sure the data
files will be updated at some point...just wanted to inform.

Thanks

Tim Osborn
-- 
View this message in context: http://www.nabble.com/EPSG%3A-3433-and-EPSG%3A3434-tf3677601.html#a10277042
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From richard.greenwood at gmail.com  Tue May  1 23:35:46 2007
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] uninstalling/updating gdal
Message-ID: <ae9185aa0705012035p156c00a9r15f63e00bc371b1e@mail.gmail.com>

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From richard.greenwood at gmail.com  Tue May  1 23:41:36 2007
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] uninstalling/upgrading gdal
Message-ID: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>

I had built and installed gdal 1.3 on a linux computer, and recently
did a build and install of 1.4 on the same computer. Daniel Morissette
suggested that that might be the cause of some anomalies I am
experiencing with mapserver. So my question - should I have
uninstalled gdal 1.3 prior to installing 1.4, and if so, how should
that be done?

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From hobu.inc at gmail.com  Tue May  1 23:59:57 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Motion: To approve RFC 11: Fast Format Identify
In-Reply-To: <46378104.9@mapgears.com>
References: <463741F6.6020408@pobox.com> <46378104.9@mapgears.com>
Message-ID: <459e60fb0705012059o2da96a41r41bb17aa26e8b35e@mail.gmail.com>

+1

On 5/1/07, Daniel Morissette <dmorissette@mapgears.com> wrote:
>
> +0 (I don't have a string opinion on this one.)
>
> Daniel
>
>
> Frank Warmerdam wrote:
> > Motion: To approve RFC 11: Fast Format Identify as described at:
> > http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify
> >
> > --
> >
> > I have added a section indicating the CPLReadDir() will need to be
> > re-implemented in such a way that it works for /vsimem/ stuff (virtual
> > filesystem in memory).
> >
> > Best regards,
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070501/d39cce61/attachment.html
From warmerdam at pobox.com  Wed May  2 00:49:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] uninstalling/upgrading gdal
In-Reply-To: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
References: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
Message-ID: <4638185C.9060909@pobox.com>

Richard Greenwood wrote:
> I had built and installed gdal 1.3 on a linux computer, and recently
> did a build and install of 1.4 on the same computer. Daniel Morissette
> suggested that that might be the cause of some anomalies I am
> experiencing with mapserver. So my question - should I have
> uninstalled gdal 1.3 prior to installing 1.4, and if so, how should
> that be done?

Rich,

There is no mechanism to uninstall GDAL.  If you install them in the
same place (ie. /usr/local) the last installed will normally take precidence
over older installs.  Problems with duplication are usually most ugly when
you have copies of GDAL in different places. Such as one in /usr/lib and
on in /usr/local/lib.  Then it is easy to have a case where you build against
one set of include files, but end up picking up a different libgdal.so at
runtime.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ASP at blominfo.dk  Wed May  2 05:42:30 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] "Could not allocate enough memory" when translating VRT
	to ECW
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A4019B9@posthus.blominfo.dk>

Dear list,

While experimenting with compression of vrt-files, I've run into the
following error:

D:\tmp>gdal_translate -of ECW --config ECW_LARGE_OK YES -co TARGET=90
-co DATUM=WGS84 -co PROJ=NUTM32 mosaic.vrt mosaic.ecw
Input file size is 263092, 246181
0..ERROR 1: An error has occurred: Error 46 "Could not allocate enough
memory"
file "" line 0
ERROR 1: IReadBlock failed at X offset 0, Y offset 15825
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 15825
100 - done.

As far as I can see, there is lots of available memory when the error
occurs. If I add something like "-outsize 10% 10%" to the command above
everything works as expected.

The VRT consists of ECW files which together forms an irregular shaped
mosaic. 

I'm on windows using "GDAL 1.4.0.0, FWTools 1.2.3, released 2007/02/22".

Looking in the archives I was only able to find one similar post
(http://lists.maptools.org/pipermail/gdal-dev/2005-August/006264.html)
which apparently didn't get any replies.

Any hints?

Best regards
Asger


From warmerdam at pobox.com  Wed May  2 09:44:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] "Could not allocate enough memory" when translating
	VRT to ECW
In-Reply-To: <25BE68A4D83DD4438F701DF0311F3F4A4019B9@posthus.blominfo.dk>
References: <25BE68A4D83DD4438F701DF0311F3F4A4019B9@posthus.blominfo.dk>
Message-ID: <463895DA.5040602@pobox.com>

Asger Sigurd Petersen wrote:
> Dear list,
> 
> While experimenting with compression of vrt-files, I've run into the
> following error:
> 
> D:\tmp>gdal_translate -of ECW --config ECW_LARGE_OK YES -co TARGET=90
> -co DATUM=WGS84 -co PROJ=NUTM32 mosaic.vrt mosaic.ecw
> Input file size is 263092, 246181
> 0..ERROR 1: An error has occurred: Error 46 "Could not allocate enough
> memory"
> file "" line 0
> ERROR 1: IReadBlock failed at X offset 0, Y offset 15825
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 15825
> 100 - done.

Asger,

If you can file a bug sufficient for us to reproduce this, I could have
Mateusz do some digging.  But it seems like the problems is deep in the
ECW SDK and it likely to be very hard for us to ferret out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From joanne.matthews at bbsrc.ac.uk  Wed May  2 11:50:00 2007
From: joanne.matthews at bbsrc.ac.uk (joanne matthews (RRes-Roth))
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Python 2.5 and Gdal-Help needed urgently
Message-ID: <EFDAAE7F4B83D243868A2F25AD8A4B38057ED8B5@rothe2ksrv1.rothamsted.bbsrc.ac.uk>

Hi List,
I really don't know if I'm going about this in the right way as I have
virtually no experience building python modules but what I'm trying to
do is build a python 2.5 gdal module. So I've installed python 2.5 for
windows. I've downloaded gdal and unzipped it and that's about as far as
I've got. I notice that there is a swig/python directory so I run
D:\gdal\gdal-1.4.1\swig\python>python setup.py build -c mingw32
But then get errors:
Traceback (most recent call last):
  File "setup.py", line 70, in <module>
    raise IOError, '%s. %s' % (e, "Has GDAL been made?")
IOError: [Errno 2] No such file or directory: '../setup.ini'. Has GDAL
been made
?

I have tried to understand the documentation but it seems to refer to
using other compilers. I think I have to use mingw32 because of the
python version. I hope this make sense and I would be really grateful if
any one could give me some help.

Joanne Matthews


From Shawn.Gong at drdc-rddc.gc.ca  Wed May  2 12:18:24 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] HDF4 HDF5 and szip
Message-ID: <2E58C246F17003499C141D334794D04902768252@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

I have built gdal with HDF4 HDF5 and szip on Windows XP before.
1) download pre-compiled binary versions of external libraries 
2) change fields such as: GDAL_HOME, HDF4_DIR, HDF5_DIR, SZIP_DIR in
nmake.opt file

I am building gdal with HDF and szip on Linux.
Here are the questions:
1) nmake.opt file has 
	# Uncomment the following and update to enable NCSA HDF Release
4 support.
	HDF4_DIR =	C:\build161\gdal\Libs\HDF41r5
	HDF4_LIB =	/LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib
Ws2_32.lib is a Windows library.  What Do I do with it in Linux?

2) Has anyone downloaded pre-compiled binary versions from
ftp://ftp.hdfgroup.org/ or you downloaded src and compiled yourself?
Where do you put the downloaded and/or the compiled files?

I'll appreciate if you can share your experience with building gdal with
HDF4 HDF5 and szip on Linux.

Thanks,
Shawn



From dron at ak4719.spb.edu  Wed May  2 13:59:19 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Resampling With GDAL
In-Reply-To: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
References: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
Message-ID: <20070502175919.GA8789@ak4719.spb.edu>

On Fri, Apr 20, 2007 at 02:53:36AM -0500, Mike Richardson wrote:
> At any rate, here is technique you can use to create smooth,
> anti-aliased resampled images with GDAL. It's not perfect and it is a
> bit more work but it does generate good results.

I would like to raise this issue again.

I have tried to solve the problem with downsampling using gdalwarp. I
have implemented filtered resampling and now -rcs option should work much
better. Please, try the new implementation of cubic spline filter (-rcs)
and Lanczos filter (-r lanczos) for both upsampling and downsampling
cases. Note, that new implementation works slower than the old one,
though there is a room for optimization. Nearest neighbour, bilinear and
cubic convolution scalers did not changed yet.

Updated implementation is available from the SVN HEAD. I am waiting for
feedback, so all parties interested in better scaling during warping are
welcome to test.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Wed May  2 14:39:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] HDF4 HDF5 and szip
In-Reply-To: <2E58C246F17003499C141D334794D04902768252@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D04902768252@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4638DAF6.8030900@pobox.com>

Gong, Shawn (Contractor) wrote:
> Hi list,
> 
> I have built gdal with HDF4 HDF5 and szip on Windows XP before.
> 1) download pre-compiled binary versions of external libraries 
> 2) change fields such as: GDAL_HOME, HDF4_DIR, HDF5_DIR, SZIP_DIR in
> nmake.opt file
> 
> I am building gdal with HDF and szip on Linux.
> Here are the questions:
> 1) nmake.opt file has 
> 	# Uncomment the following and update to enable NCSA HDF Release
> 4 support.
> 	HDF4_DIR =	C:\build161\gdal\Libs\HDF41r5
> 	HDF4_LIB =	/LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib
> Ws2_32.lib is a Windows library.  What Do I do with it in Linux?
> 
> 2) Has anyone downloaded pre-compiled binary versions from
> ftp://ftp.hdfgroup.org/ or you downloaded src and compiled yourself?
> Where do you put the downloaded and/or the compiled files?
> 
> I'll appreciate if you can share your experience with building gdal with
> HDF4 HDF5 and szip on Linux.

Shawn,

I don't have anything concrete to offer, though I'm pretty sure I've
at least once used downloaded hdf binaries on linux.  But them I feel
pretty confident hacking on the GDALmake.opt after configuration to get
what I want.

I mostly just wanted to encourage folks to update the HDF building wiki
topic with details:

   http://trac.osgeo.org/gdal/wiki/HDF

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From nowak at xpam.de  Wed May  2 14:55:09 2007
From: nowak at xpam.de (Adam Nowacki)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] uninstalling/upgrading gdal
In-Reply-To: <4638185C.9060909@pobox.com>
References: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
	<4638185C.9060909@pobox.com>
Message-ID: <4638DE8D.7010206@xpam.de>

Frank Warmerdam wrote:
> Richard Greenwood wrote:
>> I had built and installed gdal 1.3 on a linux computer, and recently
>> did a build and install of 1.4 on the same computer. Daniel Morissette
>> suggested that that might be the cause of some anomalies I am
>> experiencing with mapserver. So my question - should I have
>> uninstalled gdal 1.3 prior to installing 1.4, and if so, how should
>> that be done?
> 
> Rich,
> 
> There is no mechanism to uninstall GDAL.  If you install them in the
> same place (ie. /usr/local) the last installed will normally take 
> precidence
> over older installs.  Problems with duplication are usually most ugly when
> you have copies of GDAL in different places. Such as one in /usr/lib and
> on in /usr/local/lib.  Then it is easy to have a case where you build 
> against
> one set of include files, but end up picking up a different libgdal.so at
> runtime.
> 
> Best regards,

This is why I usually build gdal with --prefix=/opt/... so that every 
gdal file goes into that directory. Later I can just delete that 
directory to uninstall. As for apps using gdal you can either point them 
to specific version using --with-gdal or similar, or create links in 
/usr/local. Because each link will point to /opt/... it is easy to 
identify and remove them using find.

To create links:
lndir -ignorelinks /opt/gdal-cvs20061215_p4_linux /usr/local

To remove links:
find /usr/local -lname '/opt/gdal-cvs20061215_p4_linux*' -exec 'rm' '{}' ';'

From craig.miller at spatialminds.com  Wed May  2 15:03:13 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag
Message-ID: <009c01c78cec$8fd15660$7401a8c0@sherpa>

I'm getting an exception in GDALWarpOperation when I initialize with my warp
options.  The exception is getting thrown when Initialize verifies that
padfSrcNoDataImag[0] isn't 0 since padfSrcNoDataImag is NULL.  I can of
course tweak gdal to check for a NULL pointer instead of looking for 0 in
the 0 index, but without digging further I'm not 100% that is ok.  I've
processed several hundred files with my code the way it is, and it is only
this new image that is giving me fits so I thought I'd first try and
determine what the padfSrcNoDataImag option is.  With a cursory look at the
docs I haven't been able to find a description of how/why this gets set.
Any suggestions?

Code snippet follows sig.

Thanks,
Craig

Craig Miller
www.spatialminds.com 

// Setup warp options. 
GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

psWarpOptions->hSrcDS = m_poUtmRgbDataset;
psWarpOptions->hDstDS = m_poGeoRgbDataset;

psWarpOptions->nBandCount = 3;
psWarpOptions->panSrcBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount );
psWarpOptions->panSrcBands[0] = 1;
psWarpOptions->panSrcBands[1] = 2;
psWarpOptions->panSrcBands[2] = 3;
psWarpOptions->panDstBands = (int *) CPLMalloc(sizeof(int) *
psWarpOptions->nBandCount );
psWarpOptions->panDstBands[0] = 1;
psWarpOptions->panDstBands[1] = 2;
psWarpOptions->panDstBands[2] = 3;
psWarpOptions->padfSrcNoDataReal = &NO_DATA;
psWarpOptions->padfDstNoDataReal = &NO_DATA;
psWarpOptions->papszWarpOptions = papszWarpOptions;
psWarpOptions->eResampleAlg = GRA_CubicSpline;
psWarpOptions->pfnProgress = GDALTermProgress;   

// Establish reprojection transformer. 
psWarpOptions->pTransformerArg = GDALCreateGenImgProjTransformer( 
     m_poUtmRgbDataset, 
     GDALGetProjectionRef(m_poUtmRgbDataset),
     m_poGeoRgbDataset,
     GDALGetProjectionRef(m_poGeoRgbDataset), 
     FALSE, 
     0.0, 
     1 );
psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

// Initialize and execute the warp operation. 
GDALWarpOperation oOperation;
oOperation.Initialize( psWarpOptions );


From tutey at o2.pl  Wed May  2 15:55:25 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] uninstalling/upgrading gdal
In-Reply-To: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
References: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
Message-ID: <4638ECAD.4080004@o2.pl>

Richard Greenwood wrote:
> I had built and installed gdal 1.3 on a linux computer, and recently
> did a build and install of 1.4 on the same computer. Daniel Morissette
> suggested that that might be the cause of some anomalies I am
> experiencing with mapserver. So my question - should I have
> uninstalled gdal 1.3 prior to installing 1.4, and if so, how should
> that be done?

checkinstall (instead of "make install") is a convenient tool for
managing home grown packages. It catches what "make install" (or any
other specified install command) would do and creates a deb out of it
(or rpm, Slackware packages) instead. You can then install/remove the
package as you like.

I handle all my self-built software with checkinstall and no probs,
besides the new python bindings in GDAL, which checkinstall fails to
include into the package. If GDAL is built with old bindings though,
checkinstall builds the package fine.

I'd recommend using checkinstall 1.6.0 over older versions, and
definitely not recommend the newest 1.6.1, which has a nasty bug that
"package has unrelated files inside" [1]. 1.6.0 is the best release so
far, IMHO.

[1]http://asic-linux.com.mx/~izto/checkinstall/faq.php

Maciek

From dmorissette at mapgears.com  Wed May  2 16:01:00 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:49 2007
Subject: [Gdal-dev] Outstanding RFCs
In-Reply-To: <4633A7E5.1060005@pobox.com>
References: <4633A7E5.1060005@pobox.com>
Message-ID: <4638EDFC.6000409@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> I've migrated the governance docs and RFCs all to the wiki (tedious work!).
> 
> I'm hoping for a mid-summer release of GDAL/OGR 1.5.0 and so I'm keen to
> firm up major changes that will be going into it.  Looking at the existing
> posted RFCs I see:
> 

Not a significant change, but just so you all know that this is coming: 
in the next few weeks (days) I am going to convert MapServer to use the 
OGR C API instead of the C++ classes. To do this I will likely need to 
add new OGR C API methods to handle style stuff, this should go in 1.5.0.

Should I prepare a RFC for that?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From matt.wilkie at gov.yk.ca  Wed May  2 17:06:11 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Python 2.5 and Gdal-Help needed urgently
In-Reply-To: <EFDAAE7F4B83D243868A2F25AD8A4B38057ED8B5@rothe2ksrv1.rothamsted.bbsrc.ac.uk>
References: <EFDAAE7F4B83D243868A2F25AD8A4B38057ED8B5@rothe2ksrv1.rothamsted.bbsrc.ac.uk>
Message-ID: <4638FD43.70604@gov.yk.ca>

Hi Joanne,

People have reported it is possible to get gdal working with python 
newer than 2.3, but the road is generally rough and circuitous. Search 
the archives for previous threads on this:
http://www.nabble.com/GDAL---Dev-f1192.html

The easiest method to get a python-enabled gdal is to install FWTools: 
http://fwtools.maptools.org/

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed May  2 18:21:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag
In-Reply-To: <009c01c78cec$8fd15660$7401a8c0@sherpa>
References: <009c01c78cec$8fd15660$7401a8c0@sherpa>
Message-ID: <46390ED4.9060008@pobox.com>

Craig Miller wrote:
> I'm getting an exception in GDALWarpOperation when I initialize with my warp
> options.  The exception is getting thrown when Initialize verifies that
> padfSrcNoDataImag[0] isn't 0 since padfSrcNoDataImag is NULL.  I can of
> course tweak gdal to check for a NULL pointer instead of looking for 0 in
> the 0 index, but without digging further I'm not 100% that is ok.  I've
> processed several hundred files with my code the way it is, and it is only
> this new image that is giving me fits so I thought I'd first try and
> determine what the padfSrcNoDataImag option is.  With a cursory look at the
> docs I haven't been able to find a description of how/why this gets set.
> Any suggestions?

Craig,

I don't know why this would only affect one image out of many similar ones.
But I do think this code in Initialize() should not assume padfSrcNoDataImag
is non-NULL just because padfSrcNoDataReal is non-NULL

             if( hSrcBand != NULL
                 && psOptions->padfSrcNoDataReal != NULL )
             {
                 int bMergeSource = FALSE;

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType ) )
                     bMergeSource = TRUE;

Could you file a bug on this, and I'll fix it in trunk and 1.4 branch.  I
think the fix would be to change:

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType ) )
                     bMergeSource = TRUE;

to:
                 if( psOptions->padfSrcNoDataImag != NULL
                     && psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType ) )
                     bMergeSource = TRUE;

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From craig.miller at spatialminds.com  Wed May  2 18:27:37 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag
In-Reply-To: <46390ED4.9060008@pobox.com>
References: <009c01c78cec$8fd15660$7401a8c0@sherpa>
	<46390ED4.9060008@pobox.com>
Message-ID: <00bf01c78d09$19267000$7401a8c0@sherpa>

Thanks Frank.

Sure, I'll verify the warp works with that fix then file the bug.

Craig


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, May 02, 2007 3:21 PM
To: Craig Miller
Cc: Gdal-Dev
Subject: Re: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag

Craig Miller wrote:
> I'm getting an exception in GDALWarpOperation when I initialize with 
> my warp options.  The exception is getting thrown when Initialize 
> verifies that padfSrcNoDataImag[0] isn't 0 since padfSrcNoDataImag is 
> NULL.  I can of course tweak gdal to check for a NULL pointer instead 
> of looking for 0 in the 0 index, but without digging further I'm not 
> 100% that is ok.  I've processed several hundred files with my code 
> the way it is, and it is only this new image that is giving me fits so 
> I thought I'd first try and determine what the padfSrcNoDataImag 
> option is.  With a cursory look at the docs I haven't been able to find a
description of how/why this gets set.
> Any suggestions?

Craig,

I don't know why this would only affect one image out of many similar ones.
But I do think this code in Initialize() should not assume padfSrcNoDataImag
is non-NULL just because padfSrcNoDataReal is non-NULL

             if( hSrcBand != NULL
                 && psOptions->padfSrcNoDataReal != NULL )
             {
                 int bMergeSource = FALSE;

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

Could you file a bug on this, and I'll fix it in trunk and 1.4 branch.  I
think the fix would be to change:

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

to:
                 if( psOptions->padfSrcNoDataImag != NULL
                     && psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May  2 20:08:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Seeking Consultants and Service Organizations
Message-ID: <46392817.5050705@pobox.com>

Folks,

OSGeo is finally bringing the Service Provider Directory online.  It is
essentially a web list of consultants and service organizations in the open
source geospatial realm.  We are currently seeking consultants and service
organizations to register themselves in the directory.  In a few weeks,
assuming this goes fairly well, we will start trying to publicize the
directory to potential clients, and work it into our presentations, materials
at conferences and so forth.

There is no cost to participate.  You just need someone in your organization
to register for an OSGeo Userid, then login into the OSGeo web site, and then
go to the form to enter your organization details.  There are some directions
and discussion at:

   http://www.osgeo.org/spd_help

Feel free to contact me, if you have questions about this service provider
directory.  We anticipate some fine tuning before we promote it vigorously.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From richard.greenwood at gmail.com  Wed May  2 23:55:52 2007
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] uninstalling/upgrading gdal
In-Reply-To: <4638ECAD.4080004@o2.pl>
References: <ae9185aa0705012041y232d574enadee8ed0827a4c55@mail.gmail.com>
	<4638ECAD.4080004@o2.pl>
Message-ID: <ae9185aa0705022055y437c5e47j74da86577e28ac85@mail.gmail.com>

Adam, Maciej;

Thank you both for your very helpful advise. My case proved to be
fairly simple and I was able to revert back from 1.4 to 1.3, but I ca
see that some foresight when installing could be very beneficial!

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From mattia.parigiani at gmail.com  Thu May  3 05:15:16 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GeoTiff pixel resolution interpretation with gdalinfo
Message-ID: <6b6f1c810705030215u5b49a5c8yfd93bc303a96ffd2@mail.gmail.com>

I have a geotiff image which outputs with gdalinfo the following
information: (The geotiff has been obtained originally from an HDF4 format)

rasdaman@mattia-desktop:/opt/rasdaman/local$ gdalinfo Area1.tif
Driver: GTiff/GeoTIFF
Size is 7103, 3947
Coordinate System is:
PROJCS["HDFLook: LINEAR",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6370997,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Equirectangular"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (8912408.472916,7090227.412053)
Pixel Size = (694.49452741,-1000.15538912)
Corner Coordinates:
Upper Left  ( 8912408.473, 7090227.412) ( 80d 9'4.51"E, 63d45'50.32"N)
Lower Left  ( 8912408.473, 3142614.091) ( 80d 9'4.51"E, 28d15'43.99"N)
Upper Right (13845403.101, 7090227.412) (124d30'53.14"E, 63d45'50.32"N)
Lower Right (13845403.101, 3142614.091) (124d30'53.14"E, 28d15'43.99"N)
Center      (11378905.787, 5116420.752) (102d19'58.82"E, 46d 0'47.16"N)
Band 1 Block=7103x20 Type=Byte, ColorInterp=Red
Band 2 Block=7103x20 Type=Byte, ColorInterp=Green
Band 3 Block=7103x20 Type=Byte, ColorInterp=Blue


Is my interpretation correct? The pixel resolution as indicated is in
meters... Accordingly 694 meters horizontally (X res) , 1000 meters
vertically (Y res)?!?!

What is the minus sign i front of the Y res for???

What is the UNIT["degree",0.0174532925199433]], factor in this output?? can
I use it to define the resolution?? Or what is it needed for??

Final question,

Is there a stright forward way of changing the image's resolution so as to
have a quadratic one whereby resX=resY ????

Any suggestions? help?

Thanks in advance

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070503/0e1fe55d/attachment.html
From doc.robinson at utoronto.ca  Thu May  3 05:59:28 2007
From: doc.robinson at utoronto.ca (Doc Robinson)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] install error on Solaris odbcinst.h: No such file or
	directory
Message-ID: <4639B280.5060907@utoronto.ca>

we are attempting to install gdal 1.4.1 on a Sun Fire running Solaris 9
it seemed to go well with one error that has us puzzled.

it says:  cpl_odbc.h:43:22: error: odbcinst.h: No such file or directory
    yet odbcinst.h   is in fact in a file in the same directory as sql.h 
which is on the include line just before the include for odbcinst.h in 
cpl_odbc.h   ... this has us stumped

here is the full listing of the configure that was used


./configure --with-includes=/opt/sfw/include                       \
             --with-libs=/opt/sfw/lib                                \
             --with-postgres-includes=/opt/pgsql/include             \
             --with-postgres-libs=/opt/pgsql/lib                     \
             --with-proj=yes                                          \
             --with-mysql-includes=/opt/sfw/www/mysql-4.0.21/include  \
             --with-mysql-libs=/opt/sfw/www/mysql-4.0.21/lib          \



and log from the make attempt that failed



checking build system type... sparc-sun-solaris2.9
checking host system type... sparc-sun-solaris2.9
checking target system type... sparc-sun-solaris2.9
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for a sed that does not truncate output... /opt/sfw/bin/gsed
checking for egrep... grep -E
checking for ld used by gcc... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking for /usr/ccs/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/ccs/bin/nm -p
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... no
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking how to run the C++ preprocessor... g++ -E
checking for g77... g77
checking whether we are using the GNU Fortran 77 compiler... yes
checking whether g77 accepts -g... yes
checking the maximum length of command line arguments... 262144
checking command to parse /usr/ccs/bin/nm -p output from gcc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking whether -lc should be explicitly linked in... yes
checking dynamic linker characteristics... solaris2.9 ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... no
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by g++... /usr/ccs/bin/ld
checking if the linker (/usr/ccs/bin/ld) is GNU ld... no
checking whether the g++ linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking for g++ option to produce PIC... -fPIC
checking if g++ PIC flag -fPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking whether the g++ linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking dynamic linker characteristics... solaris2.9 ld.so
checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for g77 option to produce PIC... -fPIC
checking if g77 PIC flag -fPIC works... yes
checking if g77 static flag -static works... yes
checking if g77 supports -c -o file.o... yes
checking whether the g77 linker (/usr/ccs/bin/ld) supports shared 
libraries... yes
checking dynamic linker characteristics... solaris2.9 ld.so
checking how to hardcode library paths into programs... immediate
checking for dlopen in -ldl... yes
checking for nanosleep in -lrt... yes
checking for sin in -lm... yes
checking for ANSI C header files... (cached) yes
checking assert.h usability... yes
checking assert.h presence... yes
checking for assert.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking dbmalloc.h usability... no
checking dbmalloc.h presence... no
checking for dbmalloc.h... no
checking for dlfcn.h... (cached) yes
checking for stdint.h... (cached) no
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking values.h usability... yes
checking values.h presence... yes
checking for values.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking whether byte ordering is bigendian... yes
checking for 64bit integer type... long long
checking for 64bit file io... yes
checking for stat64... yes
checking for fopen64... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for void*... yes
checking size of void*... 4
checking for int8... no
checking for int16... no
checking for int32... no
checking native cpu bit order... msb2lsb
checking for vprintf... yes
checking for _doprnt... yes
checking for snprintf... yes
checking for vsnprintf... yes
checking for atoll... yes
checking for copysign... yes
checking for copysignf... no
checking for strtof... no
checking for nan... no
checking for nanf... no
checking for getcwd... yes
checking whether nan is declared... no
checking whether nanf is declared... no
checking for gmtime_r... yes
checking for localtime_r... yes
checking for setlocale... yes
checking for local include/lib path... none
configure: checking whether we should include thread/mutex support......
         thread safe support disabled.
checking for deflateInit_ in -lz... yes
using pre-installed libz
checking for pg_config... no
checking for PostgreSQL... no
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for Mopen in -lcsf... no
checking csf.h usability... no
checking csf.h presence... no
checking for csf.h... no
using internal csf code.
checking for nc_open in -lnetcdf... no
libnetcdf not found - netCDF support disabled
checking for png_set_IHDR in -lpng... yes
checking png.h usability... no
checking png.h presence... no
checking for png.h... no
using internal png code.
checking for TIFFGetTagListCount in -ltiff... yes
checking for _TIFFsetDoubleArray in -ltiff... yes
using pre-installed libtiff.
checking for XTIFFClientOpen in -lgeotiff... no
using internal GeoTIFF code.
checking for jpeg_read_scanlines in -ljpeg... yes
checking jpeglib.h usability... no
checking jpeglib.h presence... no
checking for jpeglib.h... no
using internal jpeg code.
checking for DGifOpenFileName in -lgif... no
using internal gif code.
checking for cln_GetLayerCapabilities in -logdi31... no
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for H5Fopen in -lhdf5... no
checking for jpc_decode in -ljasper... no
checking for jp2_decode in -ljasper... no
checking for pgx_decode in -ljasper... no
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
checking for BSB ... enabled
checking for OGR ... enabled
checking for MySQL... no
checking for Xerces C++... disabled
checking for SQLConnect in -lodbc... yes
checking for SQLInstallDriverEx in -lodbcinst... yes
checking if Oracle support is enabled... no
checking Checking for DODS... disabled
checking for curl-config... /usr/local/bin/curl-config
         found libcurl version 7.12.1
checking Checking for SQLite... disabled
checking Checking for DWGdirect... disabled
configure: IBM Informix DataBlade not supported.
configure: checking whether we should include ESRI SDE support...
         ESRI SDE support not requested.
checking for geos-config... no
checking how to link PROJ.4 library... link dynamically.
checking GDAL version information from gdal_version.h: 1.5.0
checking for SWIG perl bindings... disabled
checking for SWIG php bindings... disabled
checking for SWIG ruby bindings... disabled
checking for NG SWIG python bindings... disabled
checking for python... python
checking for location of Python Makefiles... found
checking for top-level Makefile for Python... found
checking where to install Python modules... 
/opt/sfw/lib/python2.2/site-packages
checking for location of Python headers... found
checking definitions from top-level Python Makefile... found
checking for Python.h header... found
checking for special pymod link hacks... default
checking for Python NumPy headers... not found
checking if local/include already standard... no, everything is ok
configure: creating ./config.status
config.status: creating GDALmake.opt
config.status: creating port/cpl_config.h
config.status: port/cpl_config.h is unchanged

GDAL is now configured for sparc-sun-solaris2.9

   Installation directory:    /usr/local
   C compiler:                gcc -O2
   C++ compiler:              g++ -O2

   LIBTOOL support:           yes

   LIBZ support:              external
   GRASS support:             no
   CFITSIO support:           no
   PCRaster support:          internal
   NETCDF support:            no
   LIBPNG support:            internal
   LIBTIFF support:           external
   LIBGEOTIFF support:        internal
   LIBJPEG support:           internal
   LIBGIF support:            internal
   OGDI support:              no
   HDF4 support:              no
   HDF5 support:              no
   KAKADU support:            no
   JASPER support:            no
   ECW support:               no
   MrSID support:             no
   GRIB support:              no
   CURL support (wcs):        yes
   POSTGRESQL support:        no
   MySQL support:             no
   XERCES support:            no
   ODBC support:              yes
   PGEO support:              yes
   OCI support:               no
   SDE support:               no
   DODS support:              no
   SQLite support:            no
   DWGdirect support          no
   PANORAMA GIS support:      no
   INFORMIX DataBlade support:no
   GEOS support:

   Statically link PROJ.4:    no

   Traditional Python:        yes
   NG SWIG Bindings:          no

   enable OGR building:       yes

   enable pthread support:    no

514 /opt/grass/gdal-1.4.1 > make
(cd port; make)
make[1]: Entering directory `/opt/grass/gdal-1.4.1/port'
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_conv.o cpl_conv.cpp
mkdir .libs
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_conv.cpp -o cpl_conv.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_error.o cpl_error.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_error.cpp  -fPIC -DPIC -o .libs/cpl_error.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_error.cpp -o cpl_error.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_string.o 
cpl_string.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_string.cpp  -fPIC -DPIC -o .libs/cpl_string.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_string.cpp -o cpl_string.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cplgetsymbol.o 
cplgetsymbol.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cplgetsymbol.cpp  -fPIC -DPIC -o .libs/cplgetsymbol.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cplgetsymbol.cpp -o cplgetsymbol.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_dir.o cpl_dir.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_dir.cpp  -fPIC -DPIC -o .libs/cpl_dir.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_dir.cpp -o cpl_dir.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_strtod.o 
cpl_strtod.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_strtod.cpp  -fPIC -DPIC -o .libs/cpl_strtod.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_strtod.cpp -o cpl_strtod.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_path.o cpl_path.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_path.cpp  -fPIC -DPIC -o .libs/cpl_path.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_path.cpp -o cpl_path.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_csv.o cpl_csv.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_csv.cpp  -fPIC -DPIC -o .libs/cpl_csv.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_csv.cpp -o cpl_csv.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_findfile.o 
cpl_findfile.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_findfile.cpp  -fPIC -DPIC -o .libs/cpl_findfile.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_findfile.cpp -o cpl_findfile.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_minixml.o 
cpl_minixml.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_minixml.cpp  -fPIC -DPIC -o .libs/cpl_minixml.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_minixml.cpp -o cpl_minixml.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_multiproc.o 
cpl_multiproc.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_multiproc.cpp  -fPIC -DPIC -o .libs/cpl_multiproc.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_multiproc.cpp -o cpl_multiproc.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_list.o cpl_list.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_list.cpp  -fPIC -DPIC -o .libs/cpl_list.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_list.cpp -o cpl_list.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_getexecpath.o 
cpl_getexecpath.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_getexecpath.cpp  -fPIC -DPIC -o .libs/cpl_getexecpath.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_getexecpath.cpp -o cpl_getexecpath.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cplstring.o cplstring.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cplstring.cpp  -fPIC -DPIC -o .libs/cplstring.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cplstring.cpp -o cplstring.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_vsil_win32.o 
cpl_vsil_win32.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil_win32.cpp  -fPIC -DPIC -o .libs/cpl_vsil_win32.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil_win32.cpp -o cpl_vsil_win32.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_vsisimple.o 
cpl_vsisimple.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsisimple.cpp  -fPIC -DPIC -o .libs/cpl_vsisimple.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsisimple.cpp -o cpl_vsisimple.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_vsil.o cpl_vsil.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil.cpp  -fPIC -DPIC -o .libs/cpl_vsil.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil.cpp -o cpl_vsil.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_vsi_mem.o 
cpl_vsi_mem.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsi_mem.cpp  -fPIC -DPIC -o .libs/cpl_vsi_mem.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsi_mem.cpp -o cpl_vsi_mem.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o 
cpl_vsil_unix_stdio_64.o cpl_vsil_unix_stdio_64.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil_unix_stdio_64.cpp  -fPIC -DPIC -o .libs/cpl_vsil_unix_stdio_64.o
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_vsil_unix_stdio_64.cpp -o cpl_vsil_unix_stdio_64.o >/dev/null 2>&1
/bin/sh /opt/grass/gdal-1.4.1/libtool --mode=compile g++ -Wall  -O2 
-DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port  -c -o cpl_odbc.o cpl_odbc.cpp
  g++ -Wall -O2 -DOGR_ENABLED -I/opt/grass/gdal-1.4.1/port -c 
cpl_odbc.cpp  -fPIC -DPIC -o .libs/cpl_odbc.o
In file included from cpl_odbc.cpp:30:
cpl_odbc.h:43:22: error: odbcinst.h: No such file or directory
cpl_odbc.h:93: error: 'ODBC_INSTALL_COMPLETE' was not declared in this scope
cpl_odbc.cpp: In member function 'int 
CPLODBCDriverInstaller::InstallDriver(const char*, const char*, WORD)':
cpl_odbc.cpp:84: error: 'SQLInstallDriverEx' was not declared in this scope
cpl_odbc.cpp:114: error: 'SQLInstallerError' was not declared in this scope
cpl_odbc.cpp: In member function 'int 
CPLODBCDriverInstaller::RemoveDriver(const char*, int)':
cpl_odbc.cpp:134: error: 'SQLRemoveDriver' was not declared in this scope
cpl_odbc.cpp:140: error: 'SQLInstallerError' was not declared in this scope
cpl_odbc.cpp: In static member function 'static SQLSMALLINT 
CPLODBCStatement::GetTypeMapping(SQLSMALLINT)':
cpl_odbc.cpp:1512: error: 'SQL_WCHAR' was not declared in this scope
cpl_odbc.cpp:1513: error: 'SQL_WVARCHAR' was not declared in this scope
cpl_odbc.cpp:1514: error: 'SQL_WLONGVARCHAR' was not declared in this scope
make[1]: *** [cpl_odbc.o] Error 1
make[1]: Leaving directory `/opt/grass/gdal-1.4.1/port'
make: *** [port-target] Error 2




-- 

Regards,
         Doc

--------------------------------------------------------------------
   Vincent B. Robinson       |
  Department of Geography    | E-Mail: doc.robinson@utoronto.ca
   University of Toronto     | Voice: (905)828-5299
      at Mississauga         | Fax:   (905)828-5273
   Mississauga, Ontario      |
   Canada     L5L 1C6        |


From warmerdam at pobox.com  Thu May  3 10:18:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GeoTiff pixel resolution interpretation with gdalinfo
In-Reply-To: <6b6f1c810705030215u5b49a5c8yfd93bc303a96ffd2@mail.gmail.com>
References: <6b6f1c810705030215u5b49a5c8yfd93bc303a96ffd2@mail.gmail.com>
Message-ID: <4639EF32.3050004@pobox.com>

mattia wrote:
> Coordinate System is:
> PROJCS["HDFLook: LINEAR",
>     GEOGCS["unnamed",
>         DATUM["unknown",
>             SPHEROID["unnamed",6370997,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Equirectangular"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (8912408.472916,7090227.412053 )
> Pixel Size = (694.49452741,-1000.15538912)
...
> Is my interpretation correct? The pixel resolution as indicated is in 
> meters... Accordingly 694 meters horizontally (X res) , 1000 meters 
> vertically (Y res)?!?!

Mattia,

That is correct.

> What is the minus sign i front of the Y res for???

It means that as you step "down" the image from the top left corner you
subtract 1000m per pixel step from the y coordinate.  This is normal.

> What is the UNIT["degree",0.0174532925199433]], factor in this output?? 
> can I use it to define the resolution?? Or what is it needed for??

This indicates that one degree on the underlying geographic
coordinate system is 0.017... radians.  It is standard and does
not help you for what you want to do.

> Final question,
> 
> Is there a stright forward way of changing the image's resolution so as 
> to have a quadratic one whereby resX=resY ????

I didn't follow that I'm afraid.  Are you just wanting to resample
your image to have square pixels?  You could do something like:

gdalwarp -rb -ps 694 694 Area1.tif Area1SquarePixels.tif

This would use a bilinear resampling kernel to convert your
image from 694x1000 meter pixels to 694x694 meter pixels.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu May  3 10:42:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Re: Motion: To approve RFC 11: Fast Format Identify
In-Reply-To: <463741F6.6020408@pobox.com>
References: <463741F6.6020408@pobox.com>
Message-ID: <4639F4DB.1050109@pobox.com>

Frank Warmerdam wrote:
> Motion: To approve RFC 11: Fast Format Identify as described at:
> http://trac.osgeo.org/gdal/wiki/rfc11_fastidentify

Folks,

I declare this motion adopted with +1 from Frank and Howard, and +0 from
Daniel.  I will be committing the main changes this morning.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Thu May  3 11:27:27 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] xyz format
Message-ID: <20070503152727.241700@gmx.net>

Hi,
I have a number of xyz files that need to be converted into standard formats. I have found a message[1] by Uli M?ller with a nice AWK script that I have modified to suit my evil needs :) I can easily follow the same logic to write a python script, but I before I go down that route (I'll probably need an standalong application, so using awk is cumbersome), I was wondering whether there are any other ways of solving this problem. Data are x,y,z (z values at the edges of pixels), but could also be x,y,z_center (z values at the center of the pixel).

Cheers!
Jose 
[1] http://lists.maptools.org/pipermail/gdal-dev/2004-July/003742.html
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

From battisti at actgate.com  Thu May  3 12:12:46 2007
From: battisti at actgate.com (Andrea Battisti)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <46362F58.5080106@pobox.com>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>
Message-ID: <463A09FE.6020809@actgate.com>


>> I'm interested in testing and track the progress of the GDAL GRIB 
>> driver.
>>
[...]
>> How can I download the latest code for the driver in order to compile
>> and test it?
>
> Andrea,
>
> Sorry, there was a slight reorganization of the subversion repository.
>
> Now you would do:
>
>   svn checkout https://svn.osgeo.org/gdal/spike/grib grib
>

Thanks, the new link worked fine...

I've compiled on Windows the GRIB driver along with the latest svn 
snapshot of GDAL.
When I try to load sample GRIB data, I get this:

Warning/Error: 6: Failed to initialize PROJ.4 with `+proj=lcc +lat_1=0 
+lat_2=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +a=6371200 +b=6371200 +units=m 
+no_defs '.

Then the resulting image seems not to have correct/valid values.

Any hints on what this warrning/error could be related to?
Anyone successfully using the GRIB driver on Windows?

Thanks for any help/advice...
Kind regards,

-- 
Andrea Battisti, ACT Corp.


From randre at gmail.com  Thu May  3 13:40:08 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Unable to load PROJ.4 library in GDAL
Message-ID: <9c2015090705031040n13f67323pd2cb5b233afb4e52@mail.gmail.com>

I'm having problems with the GDAL installation I have running in Cygwin on
Windows XP.  It appears that GDAL is unable to find some of the proj
libraries that it needs.  I ran the following command:
gdalwarp -s_srs "EPSG:32651" -t_srs "EPSG:4326" input.tif output.tif

it gave this error when it ran:

ERROR 6: Unable to load PROJ.4 library (libproj.dll), creation of
OGRCoordinateTransformation failed.

I did a search and found posts saying that I should download and install
proj from source, then compile GDAL with static linking to proj using the
"--with-static-proj4" configure flag.  I downloaded and installed
proj-4.5.0from source yesterday, but am unsure what path to give the
"--with-static-proj" option.

Can someone give me a few pointers about what I should look for?

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070503/e2161506/attachment.html
From mattia.parigiani at gmail.com  Thu May  3 14:15:56 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GeoTiff pixel resolution interpretation with gdalinfo
In-Reply-To: <4639EF32.3050004@pobox.com>
References: <6b6f1c810705030215u5b49a5c8yfd93bc303a96ffd2@mail.gmail.com>
	<4639EF32.3050004@pobox.com>
Message-ID: <6b6f1c810705031115r40d74799o25fd12ea67b80d5@mail.gmail.com>

Yes, what I need is to "resize" the pixel. Being the image taken from the
satellite, it skews the far away pixels, mainly ones towards the edges of
the bounding box. I need to execute a bow-tie correction, then somehow
"compress" the pixels to a square resolution. Does that sound feasable? I
will try the command.

Cheers

Mattia

On 5/3/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> mattia wrote:
> > Coordinate System is:
> > PROJCS["HDFLook: LINEAR",
> >     GEOGCS["unnamed",
> >         DATUM["unknown",
> >             SPHEROID["unnamed",6370997,0]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433]],
> >     PROJECTION["Equirectangular"],
> >     PARAMETER["latitude_of_origin",0],
> >     PARAMETER["central_meridian",0],
> >     PARAMETER["false_easting",0],
> >     PARAMETER["false_northing",0],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]]]
> > Origin = (8912408.472916,7090227.412053 )
> > Pixel Size = (694.49452741,-1000.15538912)
> ...
> > Is my interpretation correct? The pixel resolution as indicated is in
> > meters... Accordingly 694 meters horizontally (X res) , 1000 meters
> > vertically (Y res)?!?!
>
> Mattia,
>
> That is correct.
>
> > What is the minus sign i front of the Y res for???
>
> It means that as you step "down" the image from the top left corner you
> subtract 1000m per pixel step from the y coordinate.  This is normal.
>
> > What is the UNIT["degree",0.0174532925199433]], factor in this output??
> > can I use it to define the resolution?? Or what is it needed for??
>
> This indicates that one degree on the underlying geographic
> coordinate system is 0.017... radians.  It is standard and does
> not help you for what you want to do.
>
> > Final question,
> >
> > Is there a stright forward way of changing the image's resolution so as
> > to have a quadratic one whereby resX=resY ????
>
> I didn't follow that I'm afraid.  Are you just wanting to resample
> your image to have square pixels?  You could do something like:
>
> gdalwarp -rb -ps 694 694 Area1.tif Area1SquarePixels.tif
>
> This would use a bilinear resampling kernel to convert your
> image from 694x1000 meter pixels to 694x694 meter pixels.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070503/ce1d2285/attachment.html
From matt.wilkie at gov.yk.ca  Thu May  3 14:17:54 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Resampling With GDAL
In-Reply-To: <20070502175919.GA8789@ak4719.spb.edu>
References: <027901c78321$034dac90$1b00da0c@YOURF739F58915>
	<20070502175919.GA8789@ak4719.spb.edu>
Message-ID: <463A2752.8030901@gov.yk.ca>

> Updated implementation is available from the SVN HEAD. I am waiting for
> feedback, so all parties interested in better scaling during warping are
> welcome to test.

Hi Andrey,

This is timely. I just this morning find myself looking for a better 
quality upsampling process. In my exploration I found a bug with 
-rcs[1], hopefully your recent work fixes it! I'll have to wait for a 
binary windows build to find out as my linux machine is currently broken.

[1] http://trac.osgeo.org/gdal/ticket/1610

Can you (or anyone) direct me to a page which discusses the various 
resampling algorithms and for which image types and processes they are 
most suited to?

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From ari.jolma at tkk.fi  Thu May  3 14:38:16 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Unable to load PROJ.4 library in GDAL
In-Reply-To: <9c2015090705031040n13f67323pd2cb5b233afb4e52@mail.gmail.com>
References: <9c2015090705031040n13f67323pd2cb5b233afb4e52@mail.gmail.com>
Message-ID: <463A2C18.3020503@tkk.fi>

Roger Andr? kirjoitti:
> I'm having problems with the GDAL installation I have running in 
> Cygwin on Windows XP.  It appears that GDAL is unable to find some of 
> the proj libraries that it needs.  I ran the following command:
> gdalwarp -s_srs "EPSG:32651" -t_srs "EPSG:4326" input.tif output.tif
>
> it gave this error when it ran:
>
> ERROR 6: Unable to load PROJ.4 library (libproj.dll), creation of
> OGRCoordinateTransformation failed.
>


Roger,

If your proj4 DLL has another name use the command

set PROJSO=<name of the proj4 DLL>

in the DOS prompt (if that's appropriate in Cygwin) and add the 
directory in which the DLL is into the path. You can get pre-compiled 
proj4 DLL from several sources FWTools for example.

Regards,

Ari


> I did a search and found posts saying that I should download and 
> install proj from source, then compile GDAL with static linking to 
> proj using the
> "--with-static-proj4" configure flag.  I downloaded and installed 
> proj-4.5.0 from source yesterday, but am unsure what path to give the 
> "--with-static-proj" option. 
>
> Can someone give me a few pointers about what I should look for?
>
> Thanks,
>
> Roger
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From daniel112b at gmail.com  Thu May  3 15:07:24 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <463A09FE.6020809@actgate.com>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>
	<463A09FE.6020809@actgate.com>
Message-ID: <962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>

This is probably happens because GDAL can't find PROJ.4 (proj.dll).
You can get that from:

http://www.remotesensing.org/proj/

There are prebuilt binaries for win32 ready to go.

Regards,
  Daniel B?ck

On 5/3/07, Andrea Battisti <battisti@actgate.com> wrote:
>
> >> I'm interested in testing and track the progress of the GDAL GRIB
> >> driver.
> >>
> [...]
> >> How can I download the latest code for the driver in order to compile
> >> and test it?
> >
> > Andrea,
> >
> > Sorry, there was a slight reorganization of the subversion repository.
> >
> > Now you would do:
> >
> >   svn checkout https://svn.osgeo.org/gdal/spike/grib grib
> >
>
> Thanks, the new link worked fine...
>
> I've compiled on Windows the GRIB driver along with the latest svn
> snapshot of GDAL.
> When I try to load sample GRIB data, I get this:
>
> Warning/Error: 6: Failed to initialize PROJ.4 with `+proj=lcc +lat_1=0
> +lat_2=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +a=6371200 +b=6371200 +units=m
> +no_defs '.
>
> Then the resulting image seems not to have correct/valid values.
>
> Any hints on what this warrning/error could be related to?
> Anyone successfully using the GRIB driver on Windows?
>
> Thanks for any help/advice...
> Kind regards,
>
> --
> Andrea Battisti, ACT Corp.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From randre at gmail.com  Thu May  3 18:01:47 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Unable to load PROJ.4 library in GDAL
In-Reply-To: <463A2C18.3020503@tkk.fi>
References: <9c2015090705031040n13f67323pd2cb5b233afb4e52@mail.gmail.com>
	<463A2C18.3020503@tkk.fi>
Message-ID: <9c2015090705031501l1fb08663j2ac0ba713a1c193e@mail.gmail.com>

Hi Ari,

I tried using the dll from FWTools.  I installed the Windows version of
FWTools 1.2.2 and then found the proj_fw.dll file in the "bin/" dir.  I
first followed your instructions and tried using the set command:
set PROJSO=/cygdrive/c/FWTools1.2.2/bin/proj_fw.dll

This did not set the enviroment variable, but I went ahead and tested it and
got the same error as before.

I then edited the /etc/profile dir in Cygwin and added the following entry:
PROJSO=/cygdrive/c/FWTools1.2.2/bin/proj_fw.dll

After sourcing /etc/profile the environment variable appeared to be
correctly set.  I then tested the gdalwarp, and again got the same error.

I had a similar problem initially getting Python support in the gdal
compile.  This was resolved with Norman's help by setting the
"--with-python" configure option.  It seems like there is a definite "issue"
that requires static libraries to be built when using GDAL and PROJ in
Cygwin.  I'm totally fine with that, but I'm lost regarding how to set my
compile parameters.  My guess is that the workflow should go something like
this:

- Install Cygwin
- install PROJ from source and set flags to create PROJ libraries (if
needed)
- install GDAL from source and set flags to statically link to Python, PROJ,
POSTGIS, etc

If that's the case, then the question becomes how to determine what the
correct path is to those various libraries?  I know this is dependent on the
install location, but isn't there a default path?

Thanks,

Roger



On 5/3/07, Ari Jolma <ari.jolma@tkk.fi> wrote:
>
> Roger Andr? kirjoitti:
> > I'm having problems with the GDAL installation I have running in
> > Cygwin on Windows XP.  It appears that GDAL is unable to find some of
> > the proj libraries that it needs.  I ran the following command:
> > gdalwarp -s_srs "EPSG:32651" -t_srs "EPSG:4326" input.tif output.tif
> >
> > it gave this error when it ran:
> >
> > ERROR 6: Unable to load PROJ.4 library (libproj.dll), creation of
> > OGRCoordinateTransformation failed.
> >
>
>
> Roger,
>
> If your proj4 DLL has another name use the command
>
> set PROJSO=<name of the proj4 DLL>
>
> in the DOS prompt (if that's appropriate in Cygwin) and add the
> directory in which the DLL is into the path. You can get pre-compiled
> proj4 DLL from several sources FWTools for example.
>
> Regards,
>
> Ari
>
>
> > I did a search and found posts saying that I should download and
> > install proj from source, then compile GDAL with static linking to
> > proj using the
> > "--with-static-proj4" configure flag.  I downloaded and installed
> > proj-4.5.0 from source yesterday, but am unsure what path to give the
> > "--with-static-proj" option.
> >
> > Can someone give me a few pointers about what I should look for?
> >
> > Thanks,
> >
> > Roger
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070503/7da7ae3a/attachment.html
From ari.jolma at tkk.fi  Fri May  4 04:43:17 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Unable to load PROJ.4 library in GDAL
In-Reply-To: <9c2015090705031501l1fb08663j2ac0ba713a1c193e@mail.gmail.com>
References: <9c2015090705031040n13f67323pd2cb5b233afb4e52@mail.gmail.com>
	<463A2C18.3020503@tkk.fi>
	<9c2015090705031501l1fb08663j2ac0ba713a1c193e@mail.gmail.com>
Message-ID: <463AF225.5010301@tkk.fi>

Roger Andr? kirjoitti:
> I then edited the /etc/profile dir in Cygwin and added the following 
> entry:
> PROJSO=/cygdrive/c/FWTools1.2.2/bin/proj_fw.dll
>
> After sourcing /etc/profile the environment variable appeared to be 
> correctly set.  I then tested the gdalwarp, and again got the same error.


I think PROJSO should be set to just "proj_fw.dll" in your case. That's 
because GDAL uses a system call for loading a dll with its name. The 
system then looks through the usual places, which you have told it using 
PATH. Is /cygdrive/c/FWTools1.2.2/bin/ in your PATH?

Ari
>
>
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From guillaume.huby.lists at gmail.com  Fri May  4 05:12:40 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab
Message-ID: <ddc797c30705040212j2c80b403y1bb3f1b9fd1a33d1@mail.gmail.com>

Hello,

Matlab offers the possibility to compile C programs and use them as matlab
functions. This is called Mex files and works almost like making a dll. I
used Visual Studio 2005 Pro and FWTools 1.2.1 in order to be able to use
GDAL inside Matlab.

The simple C program I made is below and just take a string in input and
returns 1.

---------------------------------Start
Code-----------------------------------------
#include "gdal_priv.h"
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[],
                 int nrhs, const mxArray *prhs[])
{

    double *y;
    char *pszFilename;
    int bufLen;
    int status;

    /* Create a 1-by-1 matrix for the return argument. */
    plhs[0] = mxCreateDoubleMatrix(1, 1, mxREAL);

    /* Input must be a string. */
    if (mxIsChar(prhs[0]) != 1)
        mexErrMsgTxt("Input must be a string.");

    /* Input must be a row vector. */
    if (mxGetM(prhs[0]) != 1)
        mexErrMsgTxt("Input must be a row vector");

    /* Get the length of the input string. */
    bufLen = (mxGetM(prhs[0]) * mxGetN(prhs[0])) + 1;

    /* Allocate memory for input string. */
    pszFilename = (char *) mxCalloc(bufLen, sizeof(char));

    /* Copy string data from prhs[0] into a C string inputBuf. */
    status = mxGetString(prhs[0], pszFilename, bufLen);
    if (status != 0)
        mexWarnMsgTxt("Not enough space. String is truncated.");

    /*GDALDataset  *poDataset;

    GDALAllRegister();*/

    /*poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );
    if( poDataset == NULL ) {
    } else {
        mexWarnMsgTxt("Could not open dataset.");
    }*/

    /* Assign a pointer to the output. */
    y = mxGetPr(plhs[0]);

    *y = 1.0;
}
--------------------------------------------End
Code-------------------------------------

Without #include "gdal_priv.h" everything is fine, but with there is a
problem of dependency (Matlab cannot find some library) althought all gdal
(all found in FWTools\bin) dlls are in path (checked with depends walker).
Discussion with Matlab support identified the problem in "gdal_priv.h" line
56 #include <vector>. AFAIK, <vector> is a STL standard C++ library.
Did I missed something ? linking with some special library ?

Thanks for your help.
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/78b6b736/attachment.html
From jbeverage at prologic-inc.com  Fri May  4 09:51:23 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>

All,

I've been looking at the C# bindings to see if we can use them in our
project and I noticed that there seems to be a memory leak when using
the SpatialReference class.  I'm not sure this same problem exists
elsewhere, but it is something to look into.

Running the following simple loop makes memory go through the roof even
though Dispose is being called 
for (int i = 0; i < 1000000; ++i)
{
  using (SpatialReference dst = new SpatialReference(""))
  {
    //Do something with SpatialReference
  }
}

I looked through the bindings quickly this morning and didn't see
anything glaringly obvious, should I file a ticket for this problem?

Thanks!

Jason


From mattia.parigiani at gmail.com  Fri May  4 10:16:46 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] changing EPSG >> pixel resolution
Message-ID: <6b6f1c810705040716y53244f37ude3cf28760247673@mail.gmail.com>

I yet have another Geotiff for which I get a pixel size of about 0.0323 for
both the X and Y directions...

As I gather the units used are degrees... How do I convert from these to
knowing how many meters per pixel are represented by my image??

I need meters/pixel

Any suggestions

Cheers

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/95d5f5ed/attachment.html
From battisti at actgate.com  Fri May  4 10:45:33 2007
From: battisti at actgate.com (Andrea Battisti)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>	
	<463A09FE.6020809@actgate.com>
	<962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>
Message-ID: <463B470D.1030101@actgate.com>


> This is probably happens because GDAL can't find PROJ.4 (proj.dll).
Daniel,

I'm sure that proj.dll exists (and it is from the latest PROJ version, 
4.5.0).

I did a simple test with gdalinfo against a sample GRIB file.
Note that running gdalinfo against the same data does not report any 
errors on Linux and on Mac OS X.
On Windows I get:

ERROR 6: Failed to initialize PROJ.4 with `+proj=lcc +lat_1=0 +lat_2=0 
+lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +a=6371200 +b=6371200 +units=m +no_defs '.

From jbeverage at prologic-inc.com  Fri May  4 10:48:53 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D037213D1@vader.prologic-inc.com>

Sorry for the bad form of replying to my own message, but would it also
be possible to expose the array based coordinate transformation methods
that convert many locations with a single method call?

Thanks!

Jason


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jason Beverage
Sent: Friday, May 04, 2007 9:51 A
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C#
bindings

All,

I've been looking at the C# bindings to see if we can use them in our
project and I noticed that there seems to be a memory leak when using
the SpatialReference class.  I'm not sure this same problem exists
elsewhere, but it is something to look into.

Running the following simple loop makes memory go through the roof even
though Dispose is being called 
for (int i = 0; i < 1000000; ++i)
{
  using (SpatialReference dst = new SpatialReference(""))
  {
    //Do something with SpatialReference
  }
}

I looked through the bindings quickly this morning and didn't see
anything glaringly obvious, should I file a ticket for this problem?

Thanks!

Jason

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mattia.parigiani at gmail.com  Fri May  4 11:51:41 2007
From: mattia.parigiani at gmail.com (mattia)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] changing EPSG >> pixel resolution -- more clearly
Message-ID: <6b6f1c810705040851t498ea64ew8a85cdc9e0e30186@mail.gmail.com>

Maybe I wasnt clear enough in my previous email:

My gdalinfo output on the new geotiff is:

rasdaman@mattia-desktop:/opt/rasdaman/local$ gdalinfo
250mGrey20070115065625.tif
Driver: GTiff/GeoTIFF
Size is 886, 883
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (75.968700,53.448282)
Pixel Size = (0.03237320,-0.03237320)
Metadata:
  TIFFTAG_XRESOLUTION=100
  TIFFTAG_YRESOLUTION=100
Corner Coordinates:
Upper Left  (  75.9686998,  53.4482818) ( 75d58'7.32"E, 53d26'53.81"N)
Lower Left  (  75.9686998,  24.8627462) ( 75d58'7.32"E, 24d51'45.89"N)
Upper Right ( 104.6513550,  53.4482818) (104d39'4.88"E, 53d26'53.81"N)
Lower Right ( 104.6513550,  24.8627462) (104d39'4.88"E, 24d51'45.89"N)
Center      (  90.3100274,  39.1555140) ( 90d18'36.10"E, 39d 9'19.85"N)
Band 1 Block=886x1 Type=Byte, ColorInterp=Gray
rasdaman@mattia-desktop:/opt/rasdaman/local$


I dont want degrees in Pixel Size = (0.03237320,-0.03237320) but I require
meters... Is this possibly doable??

Thanks again

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/456cb629/attachment.html
From szekerest at gmail.com  Fri May  4 11:59:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
Message-ID: <f3b73b7d0705040859p161d86a4t73729a6126c0c384@mail.gmail.com>

Would you submit a ticket and adding your test example?

Best regards,

Tamas


2007/5/4, Jason Beverage <jbeverage@prologic-inc.com>:
> All,
>
> I've been looking at the C# bindings to see if we can use them in our
> project and I noticed that there seems to be a memory leak when using
> the SpatialReference class.  I'm not sure this same problem exists
> elsewhere, but it is something to look into.
>
> Running the following simple loop makes memory go through the roof even
> though Dispose is being called
> for (int i = 0; i < 1000000; ++i)
> {
>   using (SpatialReference dst = new SpatialReference(""))
>   {
>     //Do something with SpatialReference
>   }
> }
>
> I looked through the bindings quickly this morning and didn't see
> anything glaringly obvious, should I file a ticket for this problem?
>
> Thanks!
>
> Jason
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Fri May  4 12:01:12 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D037213D1@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
	<2DBB9F887DAA394FA75D98474EA5730D037213D1@vader.prologic-inc.com>
Message-ID: <f3b73b7d0705040901i5e6cbe79u9eff293aa13289c2@mail.gmail.com>

I think it's possible to implement this. Please file a ticket for it
as well and I'll take care of the addition.

Best regards,

Tamas


2007/5/4, Jason Beverage <jbeverage@prologic-inc.com>:
> Sorry for the bad form of replying to my own message, but would it also
> be possible to expose the array based coordinate transformation methods
> that convert many locations with a single method call?
>
> Thanks!
>
> Jason
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jason Beverage
> Sent: Friday, May 04, 2007 9:51 A
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] Memory Leak with SpatialReference class in C#
> bindings
>
> All,
>
> I've been looking at the C# bindings to see if we can use them in our
> project and I noticed that there seems to be a memory leak when using
> the SpatialReference class.  I'm not sure this same problem exists
> elsewhere, but it is something to look into.
>
> Running the following simple loop makes memory go through the roof even
> though Dispose is being called
> for (int i = 0; i < 1000000; ++i)
> {
>   using (SpatialReference dst = new SpatialReference(""))
>   {
>     //Do something with SpatialReference
>   }
> }
>
> I looked through the bindings quickly this morning and didn't see
> anything glaringly obvious, should I file a ticket for this problem?
>
> Thanks!
>
> Jason
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ed at topozone.com  Fri May  4 12:19:08 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] changing EPSG >> pixel resolution -- more clearly
In-Reply-To: <6b6f1c810705040851t498ea64ew8a85cdc9e0e30186@mail.gmail.com>
Message-ID: <C260D53C.299FF%ed@topozone.com>

Mattia -

Generally, no, it?s not doable, at least not while maintaining unprojected
data.  A degree of latitude and a degree of longitude are not the same size,
and their sizes vary depending on where on the Earth they are located.  One
degree of longitude is a different size (in meters) at the northern edge of
your image than it is on the southern edge.

If you need to measure in meters you should project your image from
geographic coordinates to a projected coordinate system.  Your image covers
a fairly large area so you should think carefully about what projection is
best for your needs.

Or you could revisit your requirement; why you need an image with units in
meters?

     - Ed

-- 
Ed McNierney
President and Chief Mapmaker
Maps a la carte, Inc. / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com


From: mattia <mattia.parigiani@gmail.com>
Date: Fri, 4 May 2007 17:51:41 +0200
To: gdal-dev <gdal-dev@lists.maptools.org>
Subject: [Gdal-dev] changing EPSG >> pixel resolution -- more clearly

Maybe I wasnt clear enough in my previous email:

My gdalinfo output on the new geotiff is:

rasdaman@mattia-desktop:/opt/rasdaman/local$ gdalinfo
250mGrey20070115065625.tif
Driver: GTiff/GeoTIFF
Size is 886, 883
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (75.968700 ,53.448282)
Pixel Size = (0.03237320,-0.03237320)
Metadata:
  TIFFTAG_XRESOLUTION=100
  TIFFTAG_YRESOLUTION=100
Corner Coordinates:
Upper Left  (  75.9686998,  53.4482818) ( 75d58'7.32"E, 53d26' 53.81"N)
Lower Left  (  75.9686998,  24.8627462) ( 75d58'7.32"E, 24d51'45.89"N)
Upper Right ( 104.6513550,  53.4482818) (104d39'4.88"E, 53d26'53.81"N)
Lower Right ( 104.6513550 ,  24.8627462) (104d39'4.88"E, 24d51'45.89"N)
Center      (  90.3100274,  39.1555140) ( 90d18'36.10"E, 39d 9'19.85"N)
Band 1 Block=886x1 Type=Byte, ColorInterp=Gray
rasdaman@mattia-desktop :/opt/rasdaman/local$


I dont want degrees in Pixel Size = (0.03237320,-0.03237320) but I require
meters... Is this possibly doable??

Thanks again

-- 
Mattia

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/bc4f6538/attachment.html
From jluis at ualg.pt  Fri May  4 13:24:58 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab
In-Reply-To: <ddc797c30705040212j2c80b403y1bb3f1b9fd1a33d1@mail.gmail.com>
References: <ddc797c30705040212j2c80b403y1bb3f1b9fd1a33d1@mail.gmail.com>
Message-ID: <463B6C6A.9050909@ualg.pt>

guillaume huby wrote:
> Hello,
>
> Matlab offers the possibility to compile C programs and use them as 
> matlab functions. This is called Mex files and works almost like 
> making a dll. I used Visual Studio 2005 Pro and FWTools 1.2.1 in order 
> to be able to use GDAL inside Matlab.
>
> The simple C program I made is below and just take a string in input 
> and returns 1.

Guillaume,

Why do you include gdal_priv.h?
In my mexs I always include only gdal.h.

In case you are interested my package, Mirone, has a gdalread and a 
gdalwrite mex file.
I also have a gdalwarp mex but it is not released yet. It is waiting for 
bug 1393
http://trac.osgeo.org/gdal/ticket/1393
to be corrected

Mirone is here
w3.ualg.pt/~jluis/mirone

Joaquim Luis
>
> ---------------------------------Start 
> Code-----------------------------------------
> #include "gdal_priv.h"
> #include "mex.h"
>
> void mexFunction(int nlhs, mxArray *plhs[],
>                  int nrhs, const mxArray *prhs[])
> {
>
>     double *y;
>     char *pszFilename;
>     int bufLen;
>     int status;
>
>     /* Create a 1-by-1 matrix for the return argument. */
>     plhs[0] = mxCreateDoubleMatrix(1, 1, mxREAL);
>
>     /* Input must be a string. */
>     if (mxIsChar(prhs[0]) != 1)
>         mexErrMsgTxt("Input must be a string.");
>
>     /* Input must be a row vector. */
>     if (mxGetM(prhs[0]) != 1)
>         mexErrMsgTxt("Input must be a row vector");
>
>     /* Get the length of the input string. */
>     bufLen = (mxGetM(prhs[0]) * mxGetN(prhs[0])) + 1;
>
>     /* Allocate memory for input string. */
>     pszFilename = (char *) mxCalloc(bufLen, sizeof(char));
>
>     /* Copy string data from prhs[0] into a C string inputBuf. */
>     status = mxGetString(prhs[0], pszFilename, bufLen);
>     if (status != 0)
>         mexWarnMsgTxt("Not enough space. String is truncated.");
>
>     /*GDALDataset  *poDataset;
>
>     GDALAllRegister();*/
>
>     /*poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );
>     if( poDataset == NULL ) {
>     } else {
>         mexWarnMsgTxt("Could not open dataset.");
>     }*/
>
>     /* Assign a pointer to the output. */
>     y = mxGetPr(plhs[0]);
>
>     *y = 1.0 ;
> }
> --------------------------------------------End 
> Code-------------------------------------
>
> Without #include "gdal_priv.h" everything is fine, but with there is a 
> problem of dependency (Matlab cannot find some library) althought all 
> gdal (all found in FWTools\bin) dlls are in path (checked with depends 
> walker).
> Discussion with Matlab support identified the problem in "gdal_priv.h" 
> line 56 #include <vector>. AFAIK, <vector> is a STL standard C++ library.
> Did I missed something ? linking with some special library ?
>
> Thanks for your help.
> Guillaume.
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From roth.luke at gmail.com  Fri May  4 16:54:53 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Question about reprojecting a Shapefile
Message-ID: <20ecc0f10705041354t5b521fc1vbb9699109e0f9b94@mail.gmail.com>

Hello all,

I've been using GDAL for some time, but am fairly new at using OGR.
I've started by trying to reproject a shapefile from geographic
coordinates into another coordinate system (LCC) using ogr2ogr and
when I look at the output it looks like the .prj file is incomplete
(missing datum) and the features are in the wrong locations.  What am
I missing?  I've read through the archives, but I didn't see anything
like this mentioned.

My command line looks like:
ogr2ogr -overwrite -f  "ESRI Shapefile" -t_srs "+ellps=WGS84 +proj=lcc
+lon_0=-82.85w +lat_0=40.39n +lat_1=39.39n +lat_2=41.39n"
"c:\images\output.shp" "c:\images\input.shp"

The original .prj:
GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]]

The resulting .prj:
PROJCS["Lambert_Conformal_Conic",GEOGCS["GCS_WGS_1984",DATUM["D_unknown",SPHEROID["WGS84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Conformal_Conic"],PARAMETER["standard_parallel_1",39.39],PARAMETER["standard_parallel_2",41.39],PARAMETER["latitude_of_origin",40.39],PARAMETER["central_meridian",-82.85],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]

Thanks,
Luke

From rumicuna4-2007 at yahoo.com  Fri May  4 16:58:59 2007
From: rumicuna4-2007 at yahoo.com (rumicuna4-2007@yahoo.com)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] problem with gdalwarp (resulting images are not
	georeferenced properly)
In-Reply-To: <20070502175919.GA8789@ak4719.spb.edu>
Message-ID: <744815.42635.qm@web31801.mail.mud.yahoo.com>

Hello all,
I am getting incorrect results when I use gdalwarp and cannot figure out what I am doing wrong. The warping looks perfect, but the coords embedded in the resulting geotiff are shifted south so the resulting image does not show up correctly when overlayed on a map. I tried with other programs and did not have the same problem, I would rather use gdal because of the great interpolation capabilities.

The command I am using is:

gdalwarp.exe -rc -s_srs "+proj=latlong +datum=WGS84" -t_srs "+proj=ortho +datum=WGS84 +lon_0=11.618610 +lat_0=56.154163" -co INTERLEAVE=PIXEL Denmark.InitialCrop.tif Denmark.Warped.tif

I have placed the image I am trying to warp and the resulting file here:

http://ecovagabond.com/gis/Denmark.InitialCrop.tif 
http://ecovagabond.com/gis/Denmark.Warped.Gdal.tif 

In case this is helpful I am also including below the results of running gdalinfo on both files.
I am using a freshly installed version of FWTools1.3.0 on a WindowsXP machine.
The initial file was created by running gdal_translate on an image of the world.
Any help would be greatly appreciated.
 
Thank you,
-Diego


gdalinfo.exe Denmark.InitialCrop.tif

Driver: GTiff/GeoTIFF
Size is 988, 433
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (7.520833333333343,57.937500000000000)
Pixel Size = (0.008333333333333,-0.008333333333333)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (   7.5208333,  57.9375000) (  7d31'15.00"E, 57d56'15.00"N)
Lower Left  (   7.5208333,  54.3291667) (  7d31'15.00"E, 54d19'45.00"N)
Upper Right (  15.7541667,  57.9375000) ( 15d45'15.00"E, 57d56'15.00"N)
Lower Right (  15.7541667,  54.3291667) ( 15d45'15.00"E, 54d19'45.00"N)
Center      (  11.6375000,  56.1333333) ( 11d38'15.00"E, 56d 8'0.00"N)
Band 1 Block=988x8 Type=Byte, ColorInterp=Red
Band 2 Block=988x8 Type=Byte, ColorInterp=Green
Band 3 Block=988x8 Type=Byte, ColorInterp=Blue

gdalinfo.exe Denmark.Warped.Gdal.tif

Driver: GTiff/GeoTIFF
Size is 888, 679
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Orthographic"],
    PARAMETER["latitude_of_origin",56.154163],
    PARAMETER["central_meridian",11.61861],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-266952.302792707110000,186552.524760038390000)
Pixel Size = (603.704336812790870,-603.704336812790870)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -266952.303,  186552.525) (  7d 7'11.01"E, 57d55'29.90"N)
Lower Left  ( -266952.303, -223362.720) (  7d31'40.14"E, 54d15'29.98"N)
Upper Right (  269137.148,  186552.525) ( 16d 9'15.23"E, 57d55'25.29"N)
Lower Right (  269137.148, -223362.720) ( 15d44'34.17"E, 54d15'25.78"N)
Center      (    1092.423,  -18405.098) ( 11d38'10.15"E, 56d 9'59.87"N)
Band 1 Block=888x3 Type=Byte, ColorInterp=Red
Band 2 Block=888x3 Type=Byte, ColorInterp=Green
Band 3 Block=888x3 Type=Byte, ColorInterp=Blue



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/ed8ab4c1/attachment.html
From szekerest at gmail.com  Fri May  4 18:01:31 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
Message-ID: <f3b73b7d0705041501y3f325b27x37d6bf6693fa0cf0@mail.gmail.com>

Jason,

I've applied the fix for the memory leak problem in the SVN trunk and
branch 1.4. Would you mind making your test using the latest SVN
version?

Best regards,

Tamas



2007/5/4, Jason Beverage <jbeverage@prologic-inc.com>:
> All,
>
> I've been looking at the C# bindings to see if we can use them in our
> project and I noticed that there seems to be a memory leak when using
> the SpatialReference class.  I'm not sure this same problem exists
> elsewhere, but it is something to look into.
>
> Running the following simple loop makes memory go through the roof even
> though Dispose is being called
> for (int i = 0; i < 1000000; ++i)
> {
>   using (SpatialReference dst = new SpatialReference(""))
>   {
>     //Do something with SpatialReference
>   }
> }
>
> I looked through the bindings quickly this morning and didn't see
> anything glaringly obvious, should I file a ticket for this problem?
>
> Thanks!
>
> Jason
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From gok at aerometric-ak.com  Fri May  4 19:07:05 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab
Message-ID: <3054411AF4728548AD6D7137190D56B30C462A@admin1.aeromap.com>

Guillaume,

I did switch to cpp and was able to create .mexs32 file as well as .dll dynamically linked to gdal.
Steps you could try:
1. rename file to test.cpp;
2. load libs in the header:
#include "mex.h"
#include "C:\my_Projects\packages\gdal-1.4.0\distrib\include\gdal_priv.h"
#pragma comment (lib,"gdal_i-vc8.lib") // dynamic link
#pragma comment (lib,"libmex.lib") // static link (for mexErrMsgTxt)
3. copy both libs to test.cpp folder;
4. matlab: "mex test.cpp" or "mcc -v -B cpplib:testlib test.cpp"

My environment: msvc8.0+gdal1.4.0

Happy programming!
gok

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org]On Behalf Of guillaume huby
Sent: Friday, May 04, 2007 1:13 AM
To: gdal-dev
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab


Hello,

Matlab offers the possibility to compile C programs and use them as matlab functions. This is called Mex files and works almost like making a dll. I used Visual Studio 2005 Pro and FWTools 1.2.1 in order to be able to use GDAL inside Matlab. 

The simple C program I made is below and just take a string in input and returns 1.

---------------------------------Start Code-----------------------------------------
#include "gdal_priv.h"
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[],
                 int nrhs, const mxArray *prhs[])
{

    double *y;
    char *pszFilename;
    int bufLen;
    int status; 

    /* Create a 1-by-1 matrix for the return argument. */
    plhs[0] = mxCreateDoubleMatrix(1, 1, mxREAL);

    /* Input must be a string. */
    if (mxIsChar(prhs[0]) != 1)
        mexErrMsgTxt("Input must be a string."); 

    /* Input must be a row vector. */
    if (mxGetM(prhs[0]) != 1)
        mexErrMsgTxt("Input must be a row vector");

    /* Get the length of the input string. */
    bufLen = (mxGetM(prhs[0]) * mxGetN(prhs[0])) + 1; 

    /* Allocate memory for input string. */
    pszFilename = (char *) mxCalloc(bufLen, sizeof(char));

    /* Copy string data from prhs[0] into a C string inputBuf. */
    status = mxGetString(prhs[0], pszFilename, bufLen); 
    if (status != 0)
        mexWarnMsgTxt("Not enough space. String is truncated.");

    /*GDALDataset  *poDataset;

    GDALAllRegister();*/

    /*poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly ); 
    if( poDataset == NULL ) {
    } else {
        mexWarnMsgTxt("Could not open dataset.");
    }*/

    /* Assign a pointer to the output. */
    y = mxGetPr(plhs[0]);

    *y = 1.0 ;
}
--------------------------------------------End Code-------------------------------------

Without #include "gdal_priv.h" everything is fine, but with there is a problem of dependency (Matlab cannot find some library) althought all gdal (all found in FWTools\bin) dlls are in path (checked with depends walker). 
Discussion with Matlab support identified the problem in "gdal_priv.h" line 56 #include <vector>. AFAIK, <vector> is a STL standard C++ library.
Did I missed something ? linking with some special library ? 

Thanks for your help.
Guillaume.


From rumicuna4-2007 at yahoo.com  Fri May  4 21:43:30 2007
From: rumicuna4-2007 at yahoo.com (rumicuna4-2007@yahoo.com)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Re: problem with gdalwarp (resulting images are not
	georeferenced properly)
In-Reply-To: <744815.42635.qm@web31801.mail.mud.yahoo.com>
Message-ID: <373924.1950.qm@web31803.mail.mud.yahoo.com>

Some people reported the links to the images were not working (because of a %20 that was added at the end), here are the proper links to the images:
http://ecovagabond.com/gis/Denmark.InitialCrop.tif
http://ecovagabond.com/gis/Denmark.Warped.Gdal.tif
Thanks,
Diego

rumicuna4-2007@yahoo.com wrote: Hello all,
I am getting incorrect results when I use gdalwarp and cannot figure out what I am doing wrong. The warping looks perfect, but the coords embedded in the resulting geotiff are shifted south so the resulting image does not show up correctly when overlayed on a map. I tried with other programs and did not have the same problem, I would rather use gdal because of the great interpolation capabilities.

The command I am using is:

gdalwarp.exe -rc -s_srs "+proj=latlong +datum=WGS84" -t_srs "+proj=ortho +datum=WGS84 +lon_0=11.618610 +lat_0=56.154163" -co INTERLEAVE=PIXEL Denmark.InitialCrop.tif Denmark.Warped.tif

I have placed the image I am trying to warp and the resulting file here:

http://ecovagabond.com/gis/Denmark.InitialCrop.tif 
http://ecovagabond.com/gis/Denmark.Warped.Gdal.tif 

In case  this is helpful I am also including below the results of running gdalinfo on both files.
I am using a freshly installed version of FWTools1.3.0 on a WindowsXP machine.
The initial file was created by running gdal_translate on an image of the world.
Any help would be greatly appreciated.
 
Thank you,
-Diego


gdalinfo.exe Denmark.InitialCrop.tif

Driver: GTiff/GeoTIFF
Size is 988, 433
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin =  (7.520833333333343,57.937500000000000)
Pixel Size = (0.008333333333333,-0.008333333333333)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (   7.5208333,  57.9375000) (  7d31'15.00"E, 57d56'15.00"N)
Lower Left  (   7.5208333,  54.3291667) (  7d31'15.00"E, 54d19'45.00"N)
Upper Right (  15.7541667,  57.9375000) ( 15d45'15.00"E, 57d56'15.00"N)
Lower Right (  15.7541667,  54.3291667) ( 15d45'15.00"E, 54d19'45.00"N)
Center      (  11.6375000,  56.1333333) ( 11d38'15.00"E, 56d 8'0.00"N)
Band 1 Block=988x8 Type=Byte, ColorInterp=Red
Band 2 Block=988x8 Type=Byte, ColorInterp=Green
Band 3 Block=988x8 Type=Byte, ColorInterp=Blue

gdalinfo.exe Denmark.Warped.Gdal.tif

Driver: GTiff/GeoTIFF
Size is 888, 679
Coordinate System  is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Orthographic"],
    PARAMETER["latitude_of_origin",56.154163],
    PARAMETER["central_meridian",11.61861],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
     UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-266952.302792707110000,186552.524760038390000)
Pixel Size = (603.704336812790870,-603.704336812790870)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -266952.303,  186552.525) (  7d 7'11.01"E, 57d55'29.90"N)
Lower Left  ( -266952.303, -223362.720) (  7d31'40.14"E, 54d15'29.98"N)
Upper Right (  269137.148,  186552.525) ( 16d 9'15.23"E, 57d55'25.29"N)
Lower Right (  269137.148, -223362.720) ( 15d44'34.17"E, 54d15'25.78"N)
Center      (    1092.423,  -18405.098) ( 11d38'10.15"E, 56d 9'59.87"N)
Band 1 Block=888x3 Type=Byte, ColorInterp=Red
Band 2 Block=888x3 Type=Byte, ColorInterp=Green
Band 3 Block=888x3 Type=Byte, ColorInterp=Blue






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070504/02199df2/attachment.html
From warmerdam at pobox.com  Fri May  4 22:15:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Question about reprojecting a Shapefile
In-Reply-To: <20ecc0f10705041354t5b521fc1vbb9699109e0f9b94@mail.gmail.com>
References: <20ecc0f10705041354t5b521fc1vbb9699109e0f9b94@mail.gmail.com>
Message-ID: <931f8ea90705041915k6de19b97o5c2027c48d50e275@mail.gmail.com>

On 5/4/07, Luke Roth <roth.luke@gmail.com> wrote:
> Hello all,
>
> I've been using GDAL for some time, but am fairly new at using OGR.
> I've started by trying to reproject a shapefile from geographic
> coordinates into another coordinate system (LCC) using ogr2ogr and
> when I look at the output it looks like the .prj file is incomplete
> (missing datum) and the features are in the wrong locations.  What am
> I missing?  I've read through the archives, but I didn't see anything
> like this mentioned.
>
> My command line looks like:
> ogr2ogr -overwrite -f  "ESRI Shapefile" -t_srs "+ellps=WGS84 +proj=lcc
> +lon_0=-82.85w +lat_0=40.39n +lat_1=39.39n +lat_2=41.39n"
> "c:\images\output.shp" "c:\images\input.shp"


Luke,

Try this with +datum=WGS84 instead of +ellps=WGS84 for
the target srs.  I believe this will fix the problem.  Stating
the ellipse is a lot less specific than stating the datum.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tutey at o2.pl  Sat May  5 04:10:42 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] EPSG code of 32618 for WGS 84 / UTM zone 18N
In-Reply-To: <fa2ac0580704250851q30fd548eve6f697b47ede8208@mail.gmail.com>
References: <fa2ac0580704250851q30fd548eve6f697b47ede8208@mail.gmail.com>
Message-ID: <463C3C02.3050202@o2.pl>

John Mitchell wrote:
> Hi,
> 
> I have the listed the gdalinfo listing of an erdas imagine file below and
> notice that it does not have a EPSG code within it.  I need this EPSG code
> if I want to reproject within gdalwarp or for on the fly projection within
> mapserver.  Based the gdalinfo listing I searched within the epsg file and
> found the following code and definition:
> 
> # WGS 84 / UTM zone 18N
> <32618> +proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>
> 
> Does the above EPSG code of 32618 make sense for the below gdalinfo
> listing?

Do "epsg_tr.py 32618" and compare.

Maciek

From daniel112b at gmail.com  Sat May  5 11:22:14 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <463B470D.1030101@actgate.com>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>
	<463A09FE.6020809@actgate.com>
	<962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>
	<463B470D.1030101@actgate.com>
Message-ID: <962626470705050822h58a4379fgf0408d4732130851@mail.gmail.com>

I downloaded a GRIB file from

http://www.nws.noaa.gov/mdl/NDFD_GRIB2Decoder/custmgrd.php

using the default values in the form. I got an error reading that
file, "ERROR 1: latitude or longitude exceeded limits". It's not the
same error as you got but the file is in a Lambert projection just as
yours and i found a bug in the gridtemplate definition file. I'm not
sure if this is related to your problem especially since it seems to
work on Linux in your case.

There seams to be a minus sign missing in the definition of Lambert in
gridtemplates.h The 11:th element in the array should be -4 i think
instead of 4 to indicate that it can have a sign.

   // 3.30: Lambert Conformal
        {30, 22, 0, {1,1,4,1,4,1,4,4,4,-4,-4,1,-4,4,4,4,1,1,-4,-4,-4,4} },

Regards,
 Daniel B?ck


From woodbri at swoodbridge.com  Sat May  5 11:32:24 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] How to debug
Message-ID: <463CA388.5000209@swoodbridge.com>

Hi all,

I downloaded the gdal-1.4.0 tarball and copied nearblack.cpp and the 
GNUmakefile changes needed for it. I can compile it but the executable 
is a libtool shell script. How can I get an executable that I can run in 
gdb?

I assume I can "make install" it but I don't want to do that until I 
have tested and debugged it.

-Steve

From seth at pricepages.org  Sat May  5 12:35:56 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GDALWarp reverting to Nearest resampling
Message-ID: <0F9491E3-9747-43EA-B7B9-9907D0B842CC@pricepages.org>

I'm trying to distribute gdalwarp as cluster jobs. This involves  
copying gdal and it's libraries to remote machines, running the  
commands, and returning the output. I'm having trouble with gdalwarp;  
the '-rcs' flag isn't taking effect for some reason.

No error is being returned and it's taking the appropriate amount of  
time for the 'nearest' algorithm. The exact command will look like this:
./gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651 34151 - 
wm 200 -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co 'BLOCKYSIZE=512' -rcs  
'./N072W180_x1.tif' 'out.tif'

When I tried running this command outside of its wrapper program, it  
worked as expected.

Does anyone have any idea what could cause the sampling method to  
default? I've browsed the source code, and nothing stands out as a  
potential problem. Were there any recent bugs fixed that may be  
related? Do any environment variables need to be set?

I'm using a recent CVS of GDAL, because 1.4.1 wouldn't compile. I'm  
on a Mac.
Thanks,
Seth

From seth at pricepages.org  Sat May  5 13:19:40 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GDALWarp reverting to Nearest resampling (solved)
In-Reply-To: <0F9491E3-9747-43EA-B7B9-9907D0B842CC@pricepages.org>
References: <0F9491E3-9747-43EA-B7B9-9907D0B842CC@pricepages.org>
Message-ID: <300BB908-F925-4C66-9516-0797BEA0AB2C@pricepages.org>

And it was a bug in my program. Sorry for filling your inbox!
~Seth


On May 5, 2007, at 11:35 AM, Seth Price wrote:

> I'm trying to distribute gdalwarp as cluster jobs. This involves  
> copying gdal and it's libraries to remote machines, running the  
> commands, and returning the output. I'm having trouble with  
> gdalwarp; the '-rcs' flag isn't taking effect for some reason.
>
> No error is being returned and it's taking the appropriate amount  
> of time for the 'nearest' algorithm. The exact command will look  
> like this:
> ./gdalwarp -t_srs '+proj=merc +datum=WGS84 +units=m' -ts 11651  
> 34151 -wm 200 -co 'TILED=YES' -co 'BLOCKXSIZE=512' -co  
> 'BLOCKYSIZE=512' -rcs './N072W180_x1.tif' 'out.tif'
>
> When I tried running this command outside of its wrapper program,  
> it worked as expected.
>
> Does anyone have any idea what could cause the sampling method to  
> default? I've browsed the source code, and nothing stands out as a  
> potential problem. Were there any recent bugs fixed that may be  
> related? Do any environment variables need to be set?
>
> I'm using a recent CVS of GDAL, because 1.4.1 wouldn't compile. I'm  
> on a Mac.
> Thanks,
> Seth
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From warmerdam at pobox.com  Sat May  5 19:08:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] How to debug
In-Reply-To: <463CA388.5000209@swoodbridge.com>
References: <463CA388.5000209@swoodbridge.com>
Message-ID: <463D0E54.9070600@pobox.com>

Stephen Woodbridge wrote:
> Hi all,
> 
> I downloaded the gdal-1.4.0 tarball and copied nearblack.cpp and the 
> GNUmakefile changes needed for it. I can compile it but the executable 
> is a libtool shell script. How can I get an executable that I can run in 
> gdb?
> 
> I assume I can "make install" it but I don't want to do that until I 
> have tested and debugged it.

Steve,

First, keep in mind you need to set the CFG environment variable to
"debug" to get GDAL to build with debug info (ie. add -g to cflags).

Second, you can do "gdb .libs/nearblack" to use the actual executable
with the debugger.

Third, you can instead configure using --without-libtool and build
to avoid the libtool indirection shell scripts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sat May  5 19:52:18 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods in
	CoordinateTransformation (#1615)
Message-ID: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>

Hi All,

I had a first crack at adding CoordinateTransformation.TransformPoints
to the SWIG interface to provide the transformation of the given
number of points passed as arrays of coordinates.
I've tested the code for the C# bindings and worked pretty well. If
someone have further issues please give me a comment at:
http://trac.osgeo.org/gdal/ticket/1615

Best regards,

Tamas

From mitchelljj98 at gmail.com  Sun May  6 07:49:36 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Is their a way to convert just the pure black pixels (0,
	0, 0) around the interior of a tile to 0, 0, 1?
Message-ID: <fa2ac0580705060449g4560cd8r2b3139c3971d4e6e@mail.gmail.com>

Hi,

Is their a way to convert just the pure black pixels (0,0,0) around the
interior of a tile to 0,0,1?

I believe the solution is to first convert all the pure black pixels(0,0,0)
within a tile to 0,0,1 by remapping within gdalwarp

-srcnodata 0,0,0 -dstnodata 0,0,1

and then run nearblack to convert all the 0,0,1 values around the collar
back to pure black.  That way the interior black values stay at 0,0,1 so
later when the tiles are mocaicked via gdalwarp the only pixels that are
0,0,0 are around the collars of the tiles and the void/empty areas that the
mosaics creates, which can made invisible within mapserver via offsite
0,0,0.

Does this make sense and if all I want to do is convert the 0,0,1 values to
0,0,0 within near black then should I make the near black parameter (-near
1) instead of the default of value of 15?

Thanks,**

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070506/0f0438cd/attachment.html
From warmerdam at pobox.com  Sun May  6 15:46:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods
	in CoordinateTransformation (#1615)
In-Reply-To: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
References: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
Message-ID: <463E309A.7010202@pobox.com>

Tamas Szekeres wrote:
> Hi All,
> 
> I had a first crack at adding CoordinateTransformation.TransformPoints
> to the SWIG interface to provide the transformation of the given
> number of points passed as arrays of coordinates.
> I've tested the code for the C# bindings and worked pretty well. If
> someone have further issues please give me a comment at:
> http://trac.osgeo.org/gdal/ticket/1615

Ari,

It seems the perl bindings are no longer building since Tamas' change.
I see:


gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port -D_REENTRANT 
-D_GNU_SOURCE -DDEBUGGING -fno-strict-aliasing -pipe -I/usr/local/include 
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe 
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -m32 -march=i386 -mtune=pentium4 
-fasynchronous-unwind-tables   -DVERSION=\"0.21\" -DXS_VERSION=\"0.21\" -fPIC 
"-I/usr/lib/perl5/5.8.6/i386-linux-thread-multi/CORE"   osr_wrap.cpp
osr_wrap.cpp: In function 'void 
_wrap_CoordinateTransformation_TransformPoints(PerlInterpreter*, CV*)':
osr_wrap.cpp:8406: error: '$dim0' was not declared in this scope
osr_wrap.cpp:8407: error: size of array 'argout4' has non-integral type '<type 
error>'
osr_wrap.cpp:8408: error: size of array 'argout5' has non-integral type '<type 
error>'
osr_wrap.cpp:8414: error: 'argout3' was not declared in this scope
make[1]: *** [osr_wrap.o] Error 1
make[1]: Leaving directory 
`/osgeo/buildbot/gdal/buildslave/telascience-full/build/gdal/swig/perl'

Any help getting this working again would be appreciated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Sun May  6 16:49:10 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods
	in	CoordinateTransformation (#1615)
In-Reply-To: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
References: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
Message-ID: <463E3F46.8030503@tkk.fi>

Tamas Szekeres kirjoitti:
> Hi All,
>
> I had a first crack at adding CoordinateTransformation.TransformPoints
> to the SWIG interface to provide the transformation of the given
> number of points passed as arrays of coordinates.
> I've tested the code for the C# bindings and worked pretty well. If
> someone have further issues please give me a comment at:
> http://trac.osgeo.org/gdal/ticket/1615

Sorry, I'll comment here. This is from point of view of Perl bindings.

You are using typemap "double argout[ANY]" which seems to require that 
you know the ANY beforehand. The same typemap is implicitly used 
elsewhere in GCPsToGeoTransform where ANY is 6.

This case seems to require a malloc, a copy to the malloced array, and 
after the call a copy to a new Perl array, and  freeing of the malloced 
array.

I need to at least define a new typemap and that seems to mean that I 
can't use "double argout[ANY]". The new typemap could be something like 
"double *inout", but I don't know how the nCount gets set (and there are 
possibly three values for it since there are three input arrays). I'd be 
inclined to use something like "int, double *, double *, double *" 
typemap since this kind of data is easiest to keep in one 2D array in Perl.

At this point, however, I'd like to postpone implementing this method in 
the Perl bindings.

Regards,

Ari

>
> Best regards,
>
> Tamas
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From ari.jolma at tkk.fi  Sun May  6 17:00:12 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods
	in CoordinateTransformation (#1615)
In-Reply-To: <463E309A.7010202@pobox.com>
References: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
	<463E309A.7010202@pobox.com>
Message-ID: <463E41DC.4020209@tkk.fi>

I just replied to Tamas' mail and for the time being it would perhaps be 
best to exclude the new method from the Perl bindings.

Ari

Frank Warmerdam kirjoitti:
> Tamas Szekeres wrote:
>> Hi All,
>>
>> I had a first crack at adding CoordinateTransformation.TransformPoints
>> to the SWIG interface to provide the transformation of the given
>> number of points passed as arrays of coordinates.
>> I've tested the code for the C# bindings and worked pretty well. If
>> someone have further issues please give me a comment at:
>> http://trac.osgeo.org/gdal/ticket/1615
>
> Ari,
>
> It seems the perl bindings are no longer building since Tamas' change.
> I see:
>
>
> gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port 
> -D_REENTRANT -D_GNU_SOURCE -DDEBUGGING -fno-strict-aliasing -pipe 
> -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 
> -I/usr/include/gdbm -O2 -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions 
> -m32 -march=i386 -mtune=pentium4 -fasynchronous-unwind-tables   
> -DVERSION=\"0.21\" -DXS_VERSION=\"0.21\" -fPIC 
> "-I/usr/lib/perl5/5.8.6/i386-linux-thread-multi/CORE"   osr_wrap.cpp
> osr_wrap.cpp: In function 'void 
> _wrap_CoordinateTransformation_TransformPoints(PerlInterpreter*, CV*)':
> osr_wrap.cpp:8406: error: '$dim0' was not declared in this scope
> osr_wrap.cpp:8407: error: size of array 'argout4' has non-integral 
> type '<type error>'
> osr_wrap.cpp:8408: error: size of array 'argout5' has non-integral 
> type '<type error>'
> osr_wrap.cpp:8414: error: 'argout3' was not declared in this scope
> make[1]: *** [osr_wrap.o] Error 1
> make[1]: Leaving directory 
> `/osgeo/buildbot/gdal/buildslave/telascience-full/build/gdal/swig/perl'
>
> Any help getting this working again would be appreciated.
>
> Best regards,



From szekerest at gmail.com  Sun May  6 17:08:40 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods
	in CoordinateTransformation (#1615)
In-Reply-To: <463E3F46.8030503@tkk.fi>
References: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
	<463E3F46.8030503@tkk.fi>
Message-ID: <f3b73b7d0705061408x23ffedbev8444022bd5c5f95d@mail.gmail.com>

Ok, I've recognized lately that I was a bit indulged by the C# default
marshaler which handles this kind of allocation internally so the C#
typemaps doesn't rely on the $dim0 substitution.

Now, I've made the explicit %apply typemap redirection internal to C#
so anyone can implement this new typemap for the other languages
anytime in the future.

To avoid a number of unnecessary memory copy I'll continue to suggest the
(int nCount, double *x, double *y, double *z)  signature of this
function. One can possibly implement this new typemap by replacing
$dim0 with nCount in the typemap implementation to achieve the desired
results. I guess we can agree in using  the nCount name every time
when this typemap will come into the picture.

Best regards,

Tamas


2007/5/6, Ari Jolma <ari.jolma@tkk.fi>:
> Tamas Szekeres kirjoitti:
> > Hi All,
> >
> > I had a first crack at adding CoordinateTransformation.TransformPoints
> > to the SWIG interface to provide the transformation of the given
> > number of points passed as arrays of coordinates.
> > I've tested the code for the C# bindings and worked pretty well. If
> > someone have further issues please give me a comment at:
> > http://trac.osgeo.org/gdal/ticket/1615
>
> Sorry, I'll comment here. This is from point of view of Perl bindings.
>
> You are using typemap "double argout[ANY]" which seems to require that
> you know the ANY beforehand. The same typemap is implicitly used
> elsewhere in GCPsToGeoTransform where ANY is 6.
>
> This case seems to require a malloc, a copy to the malloced array, and
> after the call a copy to a new Perl array, and  freeing of the malloced
> array.
>
> I need to at least define a new typemap and that seems to mean that I
> can't use "double argout[ANY]". The new typemap could be something like
> "double *inout", but I don't know how the nCount gets set (and there are
> possibly three values for it since there are three input arrays). I'd be
> inclined to use something like "int, double *, double *, double *"
> typemap since this kind of data is easiest to keep in one 2D array in Perl.
>
> At this point, however, I'd like to postpone implementing this method in
> the Perl bindings.
>
> Regards,
>
> Ari
>
> >
> > Best regards,
> >
> > Tamas
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>

From warmerdam at pobox.com  Sun May  6 22:55:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
Message-ID: <463E950B.8010407@pobox.com>

Folks,

This is a call for discussion on a new RFC intended to make it easier for
applications to manage sets of files that together form a dataset for GDAL.
After incorporating feedback I hope to call for a vote by mid-week.  I seem
to be in "implement one new RFC per week" mode. :-)

   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rayg at daylongraphics.com  Mon May  7 01:49:47 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463E950B.8010407@pobox.com>
References: <463E950B.8010407@pobox.com>
Message-ID: <463EBDFB.3010101@daylongraphics.com>

Hmm... I'm partial to the opposite route: abstracting away details like 
the structure of datasets, since they're driver-dependant. Do callers 
really need to know how datasets are organized? Is it even a warranted 
assumption that the data is on a filesystem? The more we get away from a 
black box model, the more maintenance it's going to be; the API surface 
area keeps going up and increases the combinatorial effects. No offence, 
but an RFC like this seems more like solving a symptom instead of a root 
cause.

GDAL should do all file and filesystem I/O as callbacks, and a utility 
reference library built on top that implements the callbacks for common 
cases like C stdlib I/O, GUI filesys browsers, etc. The more GDAL 
continues to know about files and filesys details, the more painful it's 
going to get.

Ray

From jbeverage at prologic-inc.com  Mon May  7 08:42:36 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Memory Leak with SpatialReference class in C# bindings
In-Reply-To: <f3b73b7d0705041501y3f325b27x37d6bf6693fa0cf0@mail.gmail.com>
References: <2DBB9F887DAA394FA75D98474EA5730D03721361@vader.prologic-inc.com>
	<f3b73b7d0705041501y3f325b27x37d6bf6693fa0cf0@mail.gmail.com>
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D03721647@vader.prologic-inc.com>

Hi Tamas,

I tested out your fix and it seems to work just fine, no more memory
leak!

Thanks for the extremely quick turnaround on this.

Jason

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Friday, May 04, 2007 6:02 P
To: Jason Beverage
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Memory Leak with SpatialReference class in C#
bindings

Jason,

I've applied the fix for the memory leak problem in the SVN trunk and
branch 1.4. Would you mind making your test using the latest SVN
version?

Best regards,

Tamas



2007/5/4, Jason Beverage <jbeverage@prologic-inc.com>:
> All,
>
> I've been looking at the C# bindings to see if we can use them in our
> project and I noticed that there seems to be a memory leak when using
> the SpatialReference class.  I'm not sure this same problem exists
> elsewhere, but it is something to look into.
>
> Running the following simple loop makes memory go through the roof
even
> though Dispose is being called
> for (int i = 0; i < 1000000; ++i)
> {
>   using (SpatialReference dst = new SpatialReference(""))
>   {
>     //Do something with SpatialReference
>   }
> }
>
> I looked through the bindings quickly this morning and didn't see
> anything glaringly obvious, should I file a ticket for this problem?
>
> Thanks!
>
> Jason
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From ari.jolma at tkk.fi  Mon May  7 09:06:03 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463EBDFB.3010101@daylongraphics.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
Message-ID: <463F243B.90607@tkk.fi>

Ray Gardener kirjoitti:
> Hmm... I'm partial to the opposite route: abstracting away details 
> like the structure of datasets, since they're driver-dependant. Do 
> callers really need to know how datasets are organized? Is it even a 
> warranted assumption that the data is on a filesystem? The more we get 
> away from a black box model, the more maintenance it's going to be; 
> the API surface area keeps going up and increases the combinatorial 
> effects. No offence, but an RFC like this seems more like solving a 
> symptom instead of a root cause.
>
> GDAL should do all file and filesystem I/O as callbacks, and a utility 
> reference library built on top that implements the callbacks for 
> common cases like C stdlib I/O, GUI filesys browsers, etc. The more 
> GDAL continues to know about files and filesys details, the more 
> painful it's going to get.


Ray,

I don't quite get your point. Isn't it one of GDAL's main tasks to know 
about files and their details (or WCS data sources for that matter)?

I think this RFC with the "fast identify" allow us tool developers to 
build GUIs that let the users not to worry about those details - this is 
in my opinion a good thing, they just want to know which raster layers 
are available in a given data source. This is similar to what already 
can be done with OGR.

Regards,

Ari


>
> Ray
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From dmorissette at mapgears.com  Mon May  7 09:52:40 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F243B.90607@tkk.fi>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi>
Message-ID: <463F2F28.7050406@mapgears.com>

Ari Jolma wrote:
> Ray Gardener kirjoitti:
>> Hmm... I'm partial to the opposite route: abstracting away details 
>> like the structure of datasets, since they're driver-dependant. Do 
>> callers really need to know how datasets are organized? 

Yes, some apps need that information. For instance, if your app wants to 
zip up a copy of a dataset then it needs to know which files to include 
in the ZIP. This is not a made up use case, it's a problem I and others 
have encountered in the past.


>> Is it even a 
>> warranted assumption that the data is on a filesystem? 

No it's not. The 3rd item in the "outstanding issues" section relates to 
that. If we properly document that behavior then perhaps it would be 
enough for GetFileList() to return NULL for datasets that are not 
file-based (e.g. WCS).


> The more we get 
>> away from a black box model, the more maintenance it's going to be; 
>> the API surface area keeps going up and increases the combinatorial 
>> effects. No offence, but an RFC like this seems more like solving a 
>> symptom instead of a root cause.
>>
>> GDAL should do all file and filesystem I/O as callbacks, and a utility 
>> reference library built on top that implements the callbacks for 
>> common cases like C stdlib I/O, GUI filesys browsers, etc. The more 
>> GDAL continues to know about files and filesys details, the more 
>> painful it's going to get.
> 
> 
> Ray,
> 
> I don't quite get your point. Isn't it one of GDAL's main tasks to know 
> about files and their details (or WCS data sources for that matter)?
> 

I guess I don't get the point either. I think this RFC serves a useful 
purpose, and I don't quite see how callbacks could do a better job in 
this case. If some callers don't care about the structure of a dataset 
then they can simply ignore the new methods, they are not required to do 
any extra work that they didn't have to do before.


> I think this RFC with the "fast identify" allow us tool developers to 
> build GUIs that let the users not to worry about those details - this is 
> in my opinion a good thing, they just want to know which raster layers 
> are available in a given data source. This is similar to what already 
> can be done with OGR.
> 

I don't think this RFC relates to knowing which layers are part of a 
dataset, my understanding is that it's just intended to tell the caller 
which files constitute a dataset in case it needs to be zipped up or 
copied to a new location, etc.

I didn't think OGR already had a similar GetFileList() and family of 
methods. Did I miss that addition?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From guillaume.huby.lists at gmail.com  Mon May  7 09:59:38 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab
In-Reply-To: <463B6C6A.9050909@ualg.pt>
References: <ddc797c30705040212j2c80b403y1bb3f1b9fd1a33d1@mail.gmail.com>
	<463B6C6A.9050909@ualg.pt>
Message-ID: <ddc797c30705070659u23829b31h541a66fa7e2ea63b@mail.gmail.com>

On 5/4/07, Joaquim Luis <jluis@ualg.pt> wrote:
>
> Why do you include gdal_priv.h?


In order to use C++ API instead of C API (see
http://www.gdal.org/gdal_tutorial.html).


> In case you are interested my package, Mirone, has a gdalread and a
> gdalwrite mex file.


This is interesting, I will have a look soon, I think.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070507/24262b3d/attachment.html
From dmorissette at mapgears.com  Mon May  7 10:01:13 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463E950B.8010407@pobox.com>
References: <463E950B.8010407@pobox.com>
Message-ID: <463F3129.3030901@mapgears.com>

Frank Warmerdam wrote:
> 
> This is a call for discussion on a new RFC intended to make it easier for
> applications to manage sets of files that together form a dataset for GDAL.
> After incorporating feedback I hope to call for a vote by mid-week.  I seem
> to be in "implement one new RFC per week" mode. :-)
> 
>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
> 

I like it. Is there a plan to add the same to OGR?

About CPLRenameOrCopy(), I find that the name may be a bit misleading. 
How about calling it CPLMove()?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From battisti at actgate.com  Mon May  7 10:14:56 2007
From: battisti at actgate.com (Andrea Battisti)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GRIB Driver status
In-Reply-To: <463F203D.60107@itc.nl>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>	
	<463A09FE.6020809@actgate.com>	
	<962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>	
	<463B470D.1030101@actgate.com>
	<962626470705050818n1c9f8d14m90caff79c7748f73@mail.gmail.com>
	<463F203D.60107@itc.nl>
Message-ID: <463F3460.7080709@actgate.com>


> Find file gridtemplates.h (in folder g2clib-1.0.4) and replace it with 
> the one attached to this e-mail. Then rebuild GDAL.
>
> According to Arthur Taylor, the problem is that in some of the 
> templates defined in this file, the decoder was instructed to decode 
> an unsigned integer, while in fact it should decode it as a signed 
> integer.
>
> Please confirm that this solves the problem. Then I will upload this 
> to the GDAL/GRIB SVN repository.
>
Bas,

I tried replacing gridtemplates.h with the new one you provided and then 
I recompiled GDAL, but the error I was having is the same as before.

Just to speak about the same data... If I run gdalinfo on this file: 
http://weather.noaa.gov/pub/SL.us008001/ST.opnl/DF.gr2/DC.ndfd/AR.neast/VP.001-003/ds.wspd.bin

I get the following:

ERROR 6: Failed to initialize PROJ.4 with `+proj=lcc +lat_1=0 +lat_2=0 
+lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +a=6371200 +b=6371200 +units=m +no_defs '.
Driver: GRIB/GRIdded Binary (.grb)
Size is 187, 229
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Coordinate System imported from GRIB file",
        DATUM["unknown",
            SPHEROID["Sphere",6371200,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",0],
    PARAMETER["standard_parallel_2",0],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (0.000000000000000,0.000000000000000)
Pixel Size = (5079.405999999999900,-5079.405999999999900)
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,-1163183.974)
Upper Right (  949848.922,       0.000)
Lower Right (  949848.922,-1163183.974)
Center      (  474924.461, -581591.987)
Band 1 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 2 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 3 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 4 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 5 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 6 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 7 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 8 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 9 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 10 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 11 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 12 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 13 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 14 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 15 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 16 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 17 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 18 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 19 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"
Band 20 Block=187x1 Type=Float64, ColorInterp=Undefined
  Description = 0[-] SFC="Ground or water surface"


As a side note I just noticed that when building GDAL I got the 
following linker warnings:

Creating library gdal_i.lib and object gdal_i.exp
weather.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
tdlpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
specunpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
specpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
simunpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
simpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
seekgb.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
scan.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
reduce.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
rdieee.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
pdstemplates.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
pack_gp.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
myutil.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
myerror.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
myassert.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
mkieee.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
misspack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
metaprint.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
metaparse.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
metaname.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
memorydatasource.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
memendian.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
inventory.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
int_power.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
gridtemplates.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
grib2api.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
grib1tab.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
getpoly.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
getdim.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
gbits.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack7.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack6.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack5.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack4.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack3.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack2.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_unpack1.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_miss.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_info.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_gribend.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_getfld.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_free.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_create.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_addlocal.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_addgrid.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
g2_addfield.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
fileendian.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
filedatasource.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
engribapi.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
drstemplates.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
degrib2.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
degrib1.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
comunpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
compack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
cmplxpack.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info
clock.obj : warning LNK4204: 
'E:\act_libs\gdal-svn\src\gdal-svn-20070502\gdal.pdb' is missing 
debugging information for referencing module; linking object as if no 
debug info

They seem to be related to the grib driver, could this be related to the 
error I have?


Thanks in advance...
Best regards,

-- 
Andrea Battisti, ACT Corp.


From ari.jolma at tkk.fi  Mon May  7 10:29:36 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F2F28.7050406@mapgears.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
Message-ID: <463F37D0.9010202@tkk.fi>

Daniel Morissette kirjoitti:
>
>
>> I think this RFC with the "fast identify" allow us tool developers to 
>> build GUIs that let the users not to worry about those details - this 
>> is in my opinion a good thing, they just want to know which raster 
>> layers are available in a given data source. This is similar to what 
>> already can be done with OGR.
>>
>
> I don't think this RFC relates to knowing which layers are part of a 
> dataset, my understanding is that it's just intended to tell the 
> caller which files constitute a dataset in case it needs to be zipped 
> up or copied to a new location, etc.
>
> I didn't think OGR already had a similar GetFileList() and family of 
> methods. Did I miss that addition?

No it doesn't have. I was thinking more what the fast format 
identification functionality (RFC 11) offers.

Ari

>
> Daniel


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From craig.miller at spatialminds.com  Mon May  7 11:03:39 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag
In-Reply-To: <46390ED4.9060008@pobox.com>
References: <009c01c78cec$8fd15660$7401a8c0@sherpa>
	<46390ED4.9060008@pobox.com>
Message-ID: <01ac01c790b8$e7e25320$7401a8c0@sherpa>

It turned out that one image out of several hundred in a collection didn't
have the projection defined.  I added a -s_srs option to my utility and
everything works smoothly again.

I didn't actually log the bug as another one popped up in a different spot
(in my utilities code) so I couldn't verify if the change fixes the problem
or just compiles ok.  I'd be happy to log it though.

Thanks for the helpful reply.

Craig
 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, May 02, 2007 3:21 PM
To: Craig Miller
Cc: Gdal-Dev
Subject: Re: [Gdal-dev] GDALWarpOptions padfSrcNoDataImag

Craig Miller wrote:
> I'm getting an exception in GDALWarpOperation when I initialize with 
> my warp options.  The exception is getting thrown when Initialize 
> verifies that padfSrcNoDataImag[0] isn't 0 since padfSrcNoDataImag is 
> NULL.  I can of course tweak gdal to check for a NULL pointer instead 
> of looking for 0 in the 0 index, but without digging further I'm not 
> 100% that is ok.  I've processed several hundred files with my code 
> the way it is, and it is only this new image that is giving me fits so 
> I thought I'd first try and determine what the padfSrcNoDataImag 
> option is.  With a cursory look at the docs I haven't been able to find a
description of how/why this gets set.
> Any suggestions?

Craig,

I don't know why this would only affect one image out of many similar ones.
But I do think this code in Initialize() should not assume padfSrcNoDataImag
is non-NULL just because padfSrcNoDataReal is non-NULL

             if( hSrcBand != NULL
                 && psOptions->padfSrcNoDataReal != NULL )
             {
                 int bMergeSource = FALSE;

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

Could you file a bug on this, and I'll fix it in trunk and 1.4 branch.  I
think the fix would be to change:

                 if( psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

to:
                 if( psOptions->padfSrcNoDataImag != NULL
                     && psOptions->padfSrcNoDataImag[iBand] != 0.0
                     && !GDALDataTypeIsComplex( psOptions->eWorkingDataType
) )
                     bMergeSource = TRUE;

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Mon May  7 11:25:54 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F37D0.9010202@tkk.fi>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
	<463F37D0.9010202@tkk.fi>
Message-ID: <463F4502.1020009@mapgears.com>

Ari Jolma wrote:
> Daniel Morissette kirjoitti:
>>
>> I didn't think OGR already had a similar GetFileList() and family of 
>> methods. Did I miss that addition?
> 
> No it doesn't have. I was thinking more what the fast format 
> identification functionality (RFC 11) offers.
> 

I didn't think OGR had an equivalent of RFC-11 either? I'm not trying to 
be picky, just trying to find out whether OGR already has some of those 
features that I was not aware of.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From filip.rooms at incgeo.be  Mon May  7 11:39:12 2007
From: filip.rooms at incgeo.be (Filip Rooms)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Help with building GDAL with HDF5 support
In-Reply-To: <463F3460.7080709@actgate.com>
References: <4635A590.2000203@actgate.com>
	<46362F58.5080106@pobox.com>		<463A09FE.6020809@actgate.com>		<962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>		<463B470D.1030101@actgate.com>	<962626470705050818n1c9f8d14m90caff79c7748f73@mail.gmail.com>	<463F203D.60107@itc.nl>
	<463F3460.7080709@actgate.com>
Message-ID: <463F4820.4080903@incgeo.be>

Dear list,

I have a small problem with building GDAL 1.4.1 with HDF5 support.
I use Mandriva 2007 (not yet the Spring 2007 version). It provides

libhdf5.a             libhdf5_hl.la         libhdf5.so

in /usr/lib; the corresponding header is located in /usr/include

in the standard repositories of Mandriva (libhdf5_0-1.6.5-2mdv2007.0
andlibhdf5_0-devel-1.6.5-2mdv2007.0 ).

when I run the configure script as follows

configure --prefix=/home/frooms/gdal-test --with-hdf5=/usr/lib

I get
	checking for H5Fopen in -lhdf5... no (yet with nm on libhdf5, it
responds with 0000549d T H5Fopen, so the symbol is defined)

...

  HDF5 support:              yes

When I checked the dependencies of gdal after compilation with ldd,
there was no mentioning of libhdf5, and linking ogrinfo failed
(undefined references to the HDF5 stuff).

What did I do wrong, and how can I build my GDAL then with HDF5 support?

Many thanks in advance.

Kind regards,

Filip Rooms

software developer IncGEO, Belgium


From guillaume.huby.lists at gmail.com  Mon May  7 11:54:31 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Trouble linking GDAL library and Matlab
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C462A@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C462A@admin1.aeromap.com>
Message-ID: <ddc797c30705070854x541fa30h53395ce3ff2a3ef7@mail.gmail.com>

On 5/5/07, Gennady Khokhorin <gok@aerometric-ak.com> wrote:
Thanks for your reply.

I did switch to cpp and was able to create .mexs32 file as well as .dll
> dynamically linked to gdal.
>
Steps you could try:
> 1. rename file to test.cpp;
> 2. load libs in the header:
> #include "mex.h"
> #include "C:\my_Projects\packages\gdal-1.4.0\distrib\include\gdal_priv.h"
> #pragma comment (lib,"gdal_i-vc8.lib") // dynamic link
> #pragma comment (lib,"libmex.lib") // static link (for mexErrMsgTxt)
> 3. copy both libs to test.cpp folder;
> 4. matlab: "mex test.cpp" or "mcc -v -B cpplib:testlib test.cpp"
>
> My environment: msvc8.0+gdal1.4.0


I did it using gdal_i.lib from FWTools1.2.1. But no more success, Matlab
(btw I use 7.4) is still saying:
??? Invalid MEX-file '<path>\test.mexw32' The specified procedure could not
be found.

But I downloaded GDAL sources and built with msvc8.0. and with add of
gdal14.dll in directory it seems to work.

I hope that programming will follow more easily now :p

Thanks for your help.
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070507/2513de70/attachment.html
From warmerdam at pobox.com  Mon May  7 11:59:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Help with building GDAL with HDF5 support
In-Reply-To: <463F4820.4080903@incgeo.be>
References: <4635A590.2000203@actgate.com> <46362F58.5080106@pobox.com>	
	<463A09FE.6020809@actgate.com>	
	<962626470705031207r7f656781wc6f276238fe1a494@mail.gmail.com>	
	<463B470D.1030101@actgate.com>
	<962626470705050818n1c9f8d14m90caff79c7748f73@mail.gmail.com>
	<463F203D.60107@itc.nl> <463F3460.7080709@actgate.com>
	<463F4820.4080903@incgeo.be>
Message-ID: <463F4CCE.1020606@pobox.com>

Filip Rooms wrote:
> configure --prefix=/home/frooms/gdal-test --with-hdf5=/usr/lib
> 
> I get
> 	checking for H5Fopen in -lhdf5... no (yet with nm on libhdf5, it
> responds with 0000549d T H5Fopen, so the symbol is defined)
> 
> ...
> 
>   HDF5 support:              yes
> 
> When I checked the dependencies of gdal after compilation with ldd,
> there was no mentioning of libhdf5, and linking ogrinfo failed
> (undefined references to the HDF5 stuff).
> 
> What did I do wrong, and how can I build my GDAL then with HDF5 support?

Filip,

I believe you should be using --with-hdf5=/usr or perhaps even just
--with-hdf5.  If you use /usr/lib it will look for include files in
/usr/lib/include and libraries in /usr/lib/lib.

It may also be instructive to see what gets inserted in the GDALmake.opt
file at this point:

#
# HDF5 Support.
#
HAVE_HDF5     = no
HDF5_INCLUDE  =

For HDF5 support to work, HAVE_HDF5 needs to be yes, HDF5_INCLUDE needs
to include the appropriate -I directive, and LIBS needs to include the
appropriate library definitions (eg. -L/usr/lib -lhdf5 I imagine).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Mon May  7 12:01:13 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F4502.1020009@mapgears.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
	<463F37D0.9010202@tkk.fi> <463F4502.1020009@mapgears.com>
Message-ID: <463F4D49.9020701@tkk.fi>

Daniel Morissette kirjoitti:
> Ari Jolma wrote:
>> Daniel Morissette kirjoitti:
>>>
>>> I didn't think OGR already had a similar GetFileList() and family of 
>>> methods. Did I miss that addition?
>>
>> No it doesn't have. I was thinking more what the fast format 
>> identification functionality (RFC 11) offers.
>>
>
> I didn't think OGR had an equivalent of RFC-11 either? I'm not trying 
> to be picky, just trying to find out whether OGR already has some of 
> those features that I was not aware of.

Datasource has GetLayerCount and GetLayerByIndex methods. With these it 
is easy to develop dialog boxes which show only the available layers to 
the user. GDAL does not have such functionality, I'm hoping the RFC-11 
will give it that.

Cheers,

Ari

>
> Daniel


From warmerdam at pobox.com  Mon May  7 12:17:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F3129.3030901@mapgears.com>
References: <463E950B.8010407@pobox.com> <463F3129.3030901@mapgears.com>
Message-ID: <463F5125.1090407@pobox.com>

Daniel Morissette wrote:
>>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
>>
> 
> I like it. Is there a plan to add the same to OGR?

Daniel,

My client is only interested in RFC 11 and 12 support for raster data,
so I have no pursued adding them to OGR.  I also sort of feel that these
would be more appropriately incorporated into OGR at the point where OGR's
driver model gets merged with GDAL's (GDAL/OGR 2.0?).

> About CPLRenameOrCopy(), I find that the name may be a bit misleading. 
> How about calling it CPLMove()?

Agreed, I will update.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon May  7 12:27:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463EBDFB.3010101@daylongraphics.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
Message-ID: <463F538A.9030708@pobox.com>

Ray Gardener wrote:
> Hmm... I'm partial to the opposite route: abstracting away details like 
> the structure of datasets, since they're driver-dependant. Do callers 
> really need to know how datasets are organized? 

Ray,

As Daniel points out there are several use cases where it is important
to be able to manage the files associated with a dataset.  I'm initially
implementing the GetFileList() primarily in support of the delete, and
rename operations.

But in the FDO library (used by MapGuide) there is a concept of being able
to "bundle up a dataset in a zip file and send to the server" and doing this
also requires a list of associated files.

In MapServer I would like to be able to write a dataset with GDAL and then
ask for all the files so I can zip them up and return them to a client.

Clearly most applications using GDAL aren't going to need to know details
about which files are associated with a dataset.  We did get through
quite a few years without this info though it often meant people building
a bit of format specific logic into their applications.

 > Is it even a warranted
> assumption that the data is on a filesystem?

There are clearly some datasets that are no in the file system - such
as WCS for instance.  There are also some datasets which are in memory
using the /vsimem/ virtual file system, but for our purposes we can
treat this as a filesystem as long as great care is taken to use the
VSI*L API to access it.

 > The more we get away from a
> black box model, the more maintenance it's going to be; the API surface 
> area keeps going up and increases the combinatorial effects. No offence, 
> but an RFC like this seems more like solving a symptom instead of a root 
> cause.

I'm not sure I agree with this.

> GDAL should do all file and filesystem I/O as callbacks, and a utility 
> reference library built on top that implements the callbacks for common 
> cases like C stdlib I/O, GUI filesys browsers, etc. 

That is exactly the intention of the VSI*L API - a POSIX-like virtualization
of file IO so we can have files in memory, in the file system, and in the
future possibly files accessed out of zip files, etc.

However, that doesn't address the need to manage these datasets which is
what RFC 12 attempts to help with.

I'd add that not all drivers use the VSI*L API.  In some cases they just
need to be updated.  In other cases the driver is built on an external
library that doesn't give us the option of replacing the IO mechanism.

> The more GDAL 
> continues to know about files and filesys details, the more painful it's 
> going to get.

Well, I think you need to provide a few concrete examples of this so we
can better understand your point.  I certainly don't want routine GDAL
applications to need to know much.  They don't know and I don't think
that is changing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon May  7 12:29:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F4D49.9020701@tkk.fi>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
	<463F37D0.9010202@tkk.fi> <463F4502.1020009@mapgears.com>
	<463F4D49.9020701@tkk.fi>
Message-ID: <463F53F8.1090700@pobox.com>

Ari Jolma wrote:
> Datasource has GetLayerCount and GetLayerByIndex methods. With these it 
> is easy to develop dialog boxes which show only the available layers to 
> the user. GDAL does not have such functionality, I'm hoping the RFC-11 
> will give it that.

Ari,

I normally think of OGRLayer's as being analygous to bands, and GDAL
already provides good mechanism to enumerate and query band information.

I think something like RFC 11 and 12 could be equally useful for OGR,
but it just isn't on my priority list, and as mentioned earlier I hope
it will come nearly for free as part of a "grand unification" one day.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Mon May  7 12:38:53 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463E950B.8010407@pobox.com>
References: <463E950B.8010407@pobox.com>
Message-ID: <f3b73b7d0705070938m4f6c4cf8v421e9caf4063a5e5@mail.gmail.com>

Frank,

I like this idea, along with RFC-11 will be a great addition. Wouldn't
it be possible that the whole  set of Rename/Move/Delete operations
was exposed to the SWIG interface by default?

Best regards,

Tamas



2007/5/7, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> This is a call for discussion on a new RFC intended to make it easier for
> applications to manage sets of files that together form a dataset for GDAL.
> After incorporating feedback I hope to call for a vote by mid-week.  I seem
> to be in "implement one new RFC per week" mode. :-)
>
>    http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ari.jolma at tkk.fi  Mon May  7 12:58:29 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F53F8.1090700@pobox.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
	<463F37D0.9010202@tkk.fi> <463F4502.1020009@mapgears.com>
	<463F4D49.9020701@tkk.fi> <463F53F8.1090700@pobox.com>
Message-ID: <463F5AB5.9050401@tkk.fi>

Frank Warmerdam kirjoitti:
>
> I normally think of OGRLayer's as being analygous to bands

Hmm, I've been using OGROpen with a directory name instead of filename. 
Then I've been able to loop through all vector data layers (for example 
shapefiles) in that directory. I've sometimes wondered what happens if 
there are for example shapefiles _and_ mapinfo files in the same directory.

I've thought that that's a neat feature since sometimes the layers do 
not have any correspondance with the filenames.

Ari



From warmerdam at pobox.com  Mon May  7 13:42:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <f3b73b7d0705070938m4f6c4cf8v421e9caf4063a5e5@mail.gmail.com>
References: <463E950B.8010407@pobox.com>
	<f3b73b7d0705070938m4f6c4cf8v421e9caf4063a5e5@mail.gmail.com>
Message-ID: <463F651C.4020409@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> I like this idea, along with RFC-11 will be a great addition. Wouldn't
> it be possible that the whole  set of Rename/Move/Delete operations
> was exposed to the SWIG interface by default?

Tamas,

The RFC calls for the RenameDataset being exposed through SWIG, and I
see that the Delete operation for datasets is already available through
SWIG.

Are you perhaps referring to the lower level CPL/VSI file operation
functions?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon May  7 13:47:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F5AB5.9050401@tkk.fi>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F243B.90607@tkk.fi> <463F2F28.7050406@mapgears.com>
	<463F37D0.9010202@tkk.fi> <463F4502.1020009@mapgears.com>
	<463F4D49.9020701@tkk.fi> <463F53F8.1090700@pobox.com>
	<463F5AB5.9050401@tkk.fi>
Message-ID: <463F6641.6030606@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>>
>> I normally think of OGRLayer's as being analygous to bands
> 
> Hmm, I've been using OGROpen with a directory name instead of filename. 
> Then I've been able to loop through all vector data layers (for example 
> shapefiles) in that directory. I've sometimes wondered what happens if 
> there are for example shapefiles _and_ mapinfo files in the same directory.

Ari,

I see what you mean.  This is a convenience offered by some OGR drivers.

If a directory contains a mixture of shapefiles and mapinfo files any
attempt to open the directory will give you a shapefile datasource and
the mapinfo files will be ignored.

It's important to keep in mind that this "open a directory" support
is a feature of a driver, not OGR in general.  Only a couple drivers
support this and it isn't always done in an equivelent approach.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Mon May  7 13:51:07 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Proposing to remove IF_ERROR_RETURN_NONE in Band.i
Message-ID: <f3b73b7d0705071051wd0476eex53cf9aa5a608058@mail.gmail.com>

Hi All,

This typemap causes a warning for the C# when generating the
interface. In spite of dealing with the addition of a skeleton
implementation of this typemap I would rather remove this one
permanently from Band.i. As far as I can see this typemap is not
really used at any of the bindings along with the IF_ERR_RETURN_NONE.

Any objections to such change?

Best regards,

Tamas

From fabio at synapsisbrasil.com.br  Mon May  7 14:03:39 2007
From: fabio at synapsisbrasil.com.br (=?iso-8859-1?Q?Kaminski=2C_F=E1bio_-_PROVIDER?=)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] adapt coordinates to user viewport
In-Reply-To: <463F538A.9030708@pobox.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F538A.9030708@pobox.com>
Message-ID: <0501AE5E961A4D42899FBCC1755CCE150184E38F@forsyn01ex01.for.e-corpnet.org>

Folks,

	Is there a coordinate transform routine or class
	To adapt the x,y coords from a point to the user viewport(resolution).
	Or this math is done by my self? Any concepts, or better, any examples for a beginner?

Thanks

Fabio Kaminski


From ivan.lucena at pmldnet.com  Mon May  7 14:20:15 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F6641.6030606@pobox.com>
References: <463E950B.8010407@pobox.com>
	<463EBDFB.3010101@daylongraphics.com><463F243B.90607@tkk.fi>
	<463F2F28.7050406@mapgears.com><463F37D0.9010202@tkk.fi>
	<463F4502.1020009@mapgears.com><463F4D49.9020701@tkk.fi>
	<463F53F8.1090700@pobox.com><463F5AB5.9050401@tkk.fi>
	<463F6641.6030606@pobox.com>
Message-ID: <000c01c790d4$5c47e2f0$0a0a0a0a@idrisi.clarku.edu>

Ari,

Shouldn't that be the case only for shapefile just because the dbfs are been
recognized first by OGR? 

That could be the case because in dbf you can have a folder representing a
database where the contained dbf files are tables of that database, even
though that is not what the users think of their shapefile attribute table.

So the ODBC driver recognized the folder as a data source just because it
has dbf files on it.

Nice feature anyway,

Regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Monday, May 07, 2007 1:48 PM
To: Ari Jolma
Cc: gdal-dev
Subject: Re: [Gdal-dev] RFC 12: Improved File Management

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>>
>> I normally think of OGRLayer's as being analygous to bands
> 
> Hmm, I've been using OGROpen with a directory name instead of filename. 
> Then I've been able to loop through all vector data layers (for example 
> shapefiles) in that directory. I've sometimes wondered what happens if 
> there are for example shapefiles _and_ mapinfo files in the same
directory.

Ari,

I see what you mean.  This is a convenience offered by some OGR drivers.

If a directory contains a mixture of shapefiles and mapinfo files any
attempt to open the directory will give you a shapefile datasource and
the mapinfo files will be ignored.

It's important to keep in mind that this "open a directory" support
is a feature of a driver, not OGR in general.  Only a couple drivers
support this and it isn't always done in an equivelent approach.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Mon May  7 14:49:39 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Proposing to remove IF_ERROR_RETURN_NONE in Band.i
In-Reply-To: <f3b73b7d0705071051wd0476eex53cf9aa5a608058@mail.gmail.com>
References: <f3b73b7d0705071051wd0476eex53cf9aa5a608058@mail.gmail.com>
Message-ID: <463F74C3.2090708@tkk.fi>

Tamas Szekeres kirjoitti:
> Hi All,
>
> This typemap causes a warning for the C# when generating the
> interface. In spite of dealing with the addition of a skeleton
> implementation of this typemap I would rather remove this one
> permanently from Band.i. As far as I can see this typemap is not
> really used at any of the bindings along with the IF_ERR_RETURN_NONE.
>
> Any objections to such change?
>

I don't object.

Ari


> Best regards,
>
> Tamas
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Mon May  7 14:51:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] adapt coordinates to user viewport
In-Reply-To: <0501AE5E961A4D42899FBCC1755CCE150184E38F@forsyn01ex01.for.e-corpnet.org>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F538A.9030708@pobox.com>
	<0501AE5E961A4D42899FBCC1755CCE150184E38F@forsyn01ex01.for.e-corpnet.org>
Message-ID: <463F7522.8090707@pobox.com>

Kaminski wrote:
> Folks,
> 
> 	Is there a coordinate transform routine or class
> 	To adapt the x,y coords from a point to the user viewport(resolution).
> 	Or this math is done by my self? Any concepts, or better, any examples for a beginner?

Fabio,

Currently GDAL/OGR has no special support for transforming from
georeferenced coordinates to viewport coordinates.  Applications normally
address this in their own fashion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From roth.luke at gmail.com  Mon May  7 15:08:02 2007
From: roth.luke at gmail.com (Luke Roth)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Question about reprojecting a Shapefile
In-Reply-To: <931f8ea90705041915k6de19b97o5c2027c48d50e275@mail.gmail.com>
References: <20ecc0f10705041354t5b521fc1vbb9699109e0f9b94@mail.gmail.com>
	<931f8ea90705041915k6de19b97o5c2027c48d50e275@mail.gmail.com>
Message-ID: <20ecc0f10705071208m7dd18cb2q2e7fa085af0bbdc1@mail.gmail.com>

Frank,

Thanks - that did the job.  I completely missed the +datum option in
the documentation.

Luke

On 5/4/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 5/4/07, Luke Roth <roth.luke@gmail.com> wrote:
> > Hello all,
> >
> > I've been using GDAL for some time, but am fairly new at using OGR.
> > I've started by trying to reproject a shapefile from geographic
> > coordinates into another coordinate system (LCC) using ogr2ogr and
> > when I look at the output it looks like the .prj file is incomplete
> > (missing datum) and the features are in the wrong locations.  What am
> > I missing?  I've read through the archives, but I didn't see anything
> > like this mentioned.
> >
> > My command line looks like:
> > ogr2ogr -overwrite -f  "ESRI Shapefile" -t_srs "+ellps=WGS84 +proj=lcc
> > +lon_0=-82.85w +lat_0=40.39n +lat_1=39.39n +lat_2=41.39n"
> > "c:\images\output.shp" "c:\images\input.shp"
>
>
> Luke,
>
> Try this with +datum=WGS84 instead of +ellps=WGS84 for
> the target srs.  I believe this will fix the problem.  Stating
> the ellipse is a lot less specific than stating the datum.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>

From szekerest at gmail.com  Mon May  7 17:16:52 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Expose Array Based Coordinate Transformation Methods
	in CoordinateTransformation (#1615)
In-Reply-To: <463E3F46.8030503@tkk.fi>
References: <f3b73b7d0705051652u24819a2du895c60ab1fad293@mail.gmail.com>
	<463E3F46.8030503@tkk.fi>
Message-ID: <f3b73b7d0705071416y49b38439h11da2d41df192de4@mail.gmail.com>

According to the previous posts a new typemap had be introduced to
implement this feature. The current implementation looks like this:

#ifdef SWIGCSHARP
  %apply (double *inout) {(double*)};
#endif
  void TransformPoints( int nCount, double *x, double *y, double *z ) {
    OCTTransform( self, nCount, x, y, z );
  }
#ifdef SWIGCSHARP
  %clear (double*);
#endif

I would propose to implement the 'double *inout' typemap for passing
variable length arrays to the TransformPoints function. The nCount
parameter should be used to create the intermediary array of the
proper size inside the typemap implementation. At this time I've made
the %apply internal to C# not disturbing the others with unexpected
warnings during the interface generation.
However in the future if folks would want to use this item from the
other languages as well, and this typemap will widely be implemented I
would propose to remove the #ifdefs from this implementation.


Best regards,

Tamas




2007/5/6, Ari Jolma <ari.jolma@tkk.fi>:
> Tamas Szekeres kirjoitti:
> > Hi All,
> >
> > I had a first crack at adding CoordinateTransformation.TransformPoints
> > to the SWIG interface to provide the transformation of the given
> > number of points passed as arrays of coordinates.
> > I've tested the code for the C# bindings and worked pretty well. If
> > someone have further issues please give me a comment at:
> > http://trac.osgeo.org/gdal/ticket/1615
>
> Sorry, I'll comment here. This is from point of view of Perl bindings.
>
> You are using typemap "double argout[ANY]" which seems to require that
> you know the ANY beforehand. The same typemap is implicitly used
> elsewhere in GCPsToGeoTransform where ANY is 6.
>
> This case seems to require a malloc, a copy to the malloced array, and
> after the call a copy to a new Perl array, and  freeing of the malloced
> array.
>
> I need to at least define a new typemap and that seems to mean that I
> can't use "double argout[ANY]". The new typemap could be something like
> "double *inout", but I don't know how the nCount gets set (and there are
> possibly three values for it since there are three input arrays). I'd be
> inclined to use something like "int, double *, double *, double *"
> typemap since this kind of data is easiest to keep in one 2D array in Perl.
>
> At this point, however, I'd like to postpone implementing this method in
> the Perl bindings.
>
> Regards,
>
> Ari
>
> >
> > Best regards,
> >
> > Tamas
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>

From szekerest at gmail.com  Mon May  7 17:46:19 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F651C.4020409@pobox.com>
References: <463E950B.8010407@pobox.com>
	<f3b73b7d0705070938m4f6c4cf8v421e9caf4063a5e5@mail.gmail.com>
	<463F651C.4020409@pobox.com>
Message-ID: <f3b73b7d0705071446n1196e1a3md70dc3d899a17d47@mail.gmail.com>

Frank,

Oops. We've indeed Driver.Delete as you've mentioned that is surely be
responsible to remove the underlying files in the filesystem. In this
regard the Rename and Move functionality would also be required at the
SWIG interface. At this time exposing the CPL/VSI low level file
operations would not be so benefical.


Best regards,

Tamas


2007/5/7, Frank Warmerdam <warmerdam@pobox.com>:
> Tamas Szekeres wrote:
> > Frank,
> >
> > I like this idea, along with RFC-11 will be a great addition. Wouldn't
> > it be possible that the whole  set of Rename/Move/Delete operations
> > was exposed to the SWIG interface by default?
>
> Tamas,
>
> The RFC calls for the RenameDataset being exposed through SWIG, and I
> see that the Delete operation for datasets is already available through
> SWIG.
>
> Are you perhaps referring to the lower level CPL/VSI file operation
> functions?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From craig.miller at spatialminds.com  Mon May  7 18:22:24 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Gdalwarp - corrupt merge
Message-ID: <002b01c790f6$33696c10$7401a8c0@sherpa>

When using gdalwarp on paletted geotiffs that have "TILED=YES" and
"COMPRESS=LZW" set during creation I'm running into a couple of problems.  I
confirmed via gdalinfo that all input files have the projection defined as
EPSG:4326.

Problem #1
Gdalwarp existing_file1.tif existing_file2.tif corrupts the second image.
Projection is stripped, and none of my apps (non-gdal) can read the image
(E.g. global mapper).  gdalinfo shows the projection being stripped, still
paletted image.  Any suggestions on how to merge two geotiffs in this
format?

Problem #2
gdalwarp -te xmin ymin xmax ymax infile.tif outfile.tif
Outputfile has no projection defined, compression is lost, and I assume
tiling is too.
Everything works ok if I specify -co options, -s_srs, -t_srs, etc but I
thought it was supposed to output everything the same as the input.


 

Craig Miller
www.spatialminds.com 


From rayg at daylongraphics.com  Mon May  7 20:35:39 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463F538A.9030708@pobox.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F538A.9030708@pobox.com>
Message-ID: <463FC5DB.3090503@daylongraphics.com>

> Ray,
> 
  > In MapServer I would like to be able to write a dataset with GDAL 
and then
> ask for all the files so I can zip them up and return them to a client.

An issue here is that the returned filenames might not refer to files, 
unless you know which VSI*L filesyshandler was used. Usually this 
assumption is harmless -- the default handler is assigned at compile 
time and set to use the machine's normal filesystem -- but when one 
starts using other filesyshandlers (like you said, for mem and so 
forth), then the assumption breaks.

If we want to enumerate and manage the physical entities in a dataset 
regardless of how their storage is implemented, and add entity 
management methods to GDALDataSet, the dataset needs to know how the 
entities were stored. But storage details lie outside the driver. The 
driver would need to forward an entity management call to the same 
filesyshandler that originally wrote the entity.

So what we need is to have datasets know which filesyshandler they are 
using. The driver's methods need an extra filesyshandler parameter, 
which they can forward to datasets as part of the openinfo or something 
similar. VSIFOpenL() needs to take a filesyshandler parameter, or 
drivers should be able to call VSIFilesystemHandler::Open().

Then I could pass a filesyshandler subclass to driver::Create(), and 
have the dataset do all of it's I/O with it, and know which 
filesyshandler to use when doing entity management.

Issues like subdatasets could then be handled by treating the base 
dataset as a filesystem, and implementing a filesyshandler for that 
dataset's format.

Ray


From warmerdam at pobox.com  Mon May  7 21:51:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463FC5DB.3090503@daylongraphics.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F538A.9030708@pobox.com> <463FC5DB.3090503@daylongraphics.com>
Message-ID: <463FD7B5.1060102@pobox.com>

Ray Gardener wrote:
> An issue here is that the returned filenames might not refer to files, 
> unless you know which VSI*L filesyshandler was used. Usually this 
> assumption is harmless -- the default handler is assigned at compile 
> time and set to use the machine's normal filesystem -- but when one 
> starts using other filesyshandlers (like you said, for mem and so 
> forth), then the assumption breaks.
> 
> If we want to enumerate and manage the physical entities in a dataset 
> regardless of how their storage is implemented, and add entity 
> management methods to GDALDataSet, the dataset needs to know how the 
> entities were stored. But storage details lie outside the driver. The 
> driver would need to forward an entity management call to the same 
> filesyshandler that originally wrote the entity.
> 
> So what we need is to have datasets know which filesyshandler they are 
> using. The driver's methods need an extra filesyshandler parameter, 
> which they can forward to datasets as part of the openinfo or something 
> similar. VSIFOpenL() needs to take a filesyshandler parameter, or 
> drivers should be able to call VSIFilesystemHandler::Open().

Ray,

The current virtual file system stuff is handled by installing a global
IO handler for a particular aspect of the filesystem namespace.  So,
for instance, the "in memory filesystem" stuff is all in the filesystem
area under /vsimem/.  Filesystem handlers are globally installed.  So
I don't see any need to make the file system handler apparent by
specifically passing it into Create() methods or to VSIOpenL().

> Then I could pass a filesyshandler subclass to driver::Create(), and 
> have the dataset do all of it's I/O with it, and know which 
> filesyshandler to use when doing entity management.
> 
> Issues like subdatasets could then be handled by treating the base 
> dataset as a filesystem, and implementing a filesyshandler for that 
> dataset's format.

I think there are two levels of indirection implicit in your statement.
One is at the VSI*L level which is raw binary data.  But subdatasets are
really a GDAL concept and their meaning vary from format to format.  I'm
not sure how to mesh this all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon May  7 23:33:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Gdalwarp - corrupt merge
In-Reply-To: <002b01c790f6$33696c10$7401a8c0@sherpa>
References: <002b01c790f6$33696c10$7401a8c0@sherpa>
Message-ID: <463FEF72.3070404@pobox.com>

Craig Miller wrote:
> When using gdalwarp on paletted geotiffs that have "TILED=YES" and
> "COMPRESS=LZW" set during creation I'm running into a couple of problems.  I
> confirmed via gdalinfo that all input files have the projection defined as
> EPSG:4326.
> 
> Problem #1
> Gdalwarp existing_file1.tif existing_file2.tif corrupts the second image.
> Projection is stripped, and none of my apps (non-gdal) can read the image
> (E.g. global mapper).  gdalinfo shows the projection being stripped, still
> paletted image.  Any suggestions on how to merge two geotiffs in this
> format?

Craig,

I don't see this result.  I suspect it relates to the specific version
of libtiff being used.  Some important fixes have gone into libtiff in
support of GDAL using it for random update to compressed files (ie.
gdalwarp using LZW compression).

You might want to try this with gdal's trunk (development) version,
and configured to use the internal libtiff (--with-tiff=internal).  If
the problem persists and we will see if we can reproduce it.

> Problem #2
> gdalwarp -te xmin ymin xmax ymax infile.tif outfile.tif
> Outputfile has no projection defined, compression is lost, and I assume
> tiling is too.
> Everything works ok if I specify -co options, -s_srs, -t_srs, etc but I
> thought it was supposed to output everything the same as the input.

I also do not see this result.  I just tried:

gdalwarp -te 440000 3720000 470000 3750000 utm.tif out.tif

and out.tif has the same coordinate system as the input file.  The compression
and tiling are not copied over.  These are considered to be file specific
options, and not part of the overall GDAL data model, so they do not carry
over to a copied file.

If you can file a bug demonstrating the coordinate system we can certainly
try and fix it, but this doesn't normally happen so it must be something
very specific to your situation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From craig.miller at spatialminds.com  Mon May  7 23:19:25 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Gdalwarp - corrupt merge
In-Reply-To: <463FEF72.3070404@pobox.com>
References: <002b01c790f6$33696c10$7401a8c0@sherpa>
	<463FEF72.3070404@pobox.com>
Message-ID: <005c01c7911f$b069b5c0$7401a8c0@sherpa>

Frank,

Thanks for the help.  I'll try a newer version of libtiff and the latest
version of gdal and see how it goes.  It's been a while since I've updated
my source tree anyway.

Craig
 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, May 07, 2007 8:33 PM
To: Craig Miller
Cc: 'Gdal-Dev'
Subject: Re: [Gdal-dev] Gdalwarp - corrupt merge

Craig Miller wrote:
> When using gdalwarp on paletted geotiffs that have "TILED=YES" and 
> "COMPRESS=LZW" set during creation I'm running into a couple of 
> problems.  I confirmed via gdalinfo that all input files have the 
> projection defined as EPSG:4326.
> 
> Problem #1
> Gdalwarp existing_file1.tif existing_file2.tif corrupts the second image.
> Projection is stripped, and none of my apps (non-gdal) can read the 
> image (E.g. global mapper).  gdalinfo shows the projection being 
> stripped, still paletted image.  Any suggestions on how to merge two 
> geotiffs in this format?

Craig,

I don't see this result.  I suspect it relates to the specific version of
libtiff being used.  Some important fixes have gone into libtiff in support
of GDAL using it for random update to compressed files (ie.
gdalwarp using LZW compression).

You might want to try this with gdal's trunk (development) version, and
configured to use the internal libtiff (--with-tiff=internal).  If the
problem persists and we will see if we can reproduce it.

> Problem #2
> gdalwarp -te xmin ymin xmax ymax infile.tif outfile.tif Outputfile has 
> no projection defined, compression is lost, and I assume tiling is 
> too.
> Everything works ok if I specify -co options, -s_srs, -t_srs, etc but 
> I thought it was supposed to output everything the same as the input.

I also do not see this result.  I just tried:

gdalwarp -te 440000 3720000 470000 3750000 utm.tif out.tif

and out.tif has the same coordinate system as the input file.  The
compression and tiling are not copied over.  These are considered to be file
specific options, and not part of the overall GDAL data model, so they do
not carry over to a copied file.

If you can file a bug demonstrating the coordinate system we can certainly
try and fix it, but this doesn't normally happen so it must be something
very specific to your situation.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ivan.lucena at pmldnet.com  Tue May  8 01:36:52 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Adding GDALCreateColorRamp() to the GDAL C API
Message-ID: <000601c79132$e2a3dad0$0a0a0a0a@idrisi.clarku.edu>

Hi there,

Someone from the list has pointed out a bug in the RST driver that happens
when converting a thematic raster image (color table + category names) from
RST to HFA:

   gdal_translate -of hfa thematic1.rst thematic.img
   Input file size is 800, 600
   0...10...20...30...40...50...60...70...80...90...100 - done.
   ERROR 1: iRow (-1) out of range.

That problem only happens when the associated color table file is missing (a
.smp file). It is unusual but it happens. So, in order to fix that problem I
have developed a function to automatically generate color table.

But instead of placing that function in the RST driver I asked Frank if we
should put that function for general use in the GDALColorTable and in the C
API. 

He agreed and he also suggested some changes that made it even more generic
and useful.

http://trac.osgeo.org/gdal/browser/trunk/gdal/gcore/gdalcolortable.cpp#L299 

What GDALCreateColorRamp() does is to create a linear distribution of values
in Red, Green, Blue and Alpha from the initial color to end color, starting
from one index to another anywhere in the color table.

   GDALColorEntry sColor1;
   sColor1.c1 = (short) ( 255 );
   sColor2.c2 = (short) ( 0 );
   sColor3.c3 = (short) ( 0 );
   sColor4.c4 = (short) ( 255 );

   GDALColorEntry sColor2;
   sColor2.c1 = (short) ( 0 );
   sColor2.c2 = (short) ( 0 );
   sColor2.c3 = (short) ( 255 );
   sColor2.c4 = (short) ( 255 );

  poColorTable->CreateColorRamp( 0, &sColor1, 32, &sColor2 );

It can also be used to create several ramp segments into the same color
table as follows:

   GDALColorEntry sColor1;
   sColor1.c1 = (short) ( 0 );
   sColor1.c2 = (short) ( 255 );
   sColor1.c3 = (short) ( 0 );
   sColor1.c4 = (short) ( 255 );

   GDALColorEntry sColor2;
   sColor2.c1 = (short) ( 100 );
   sColor2.c2 = (short) ( 0 );
   sColor2.c3 = (short) ( 255 );
   sColor2.c4 = (short) ( 255 );

   GDALColorEntry sColor3;
   sColor3.c1 = (short) ( 0 );
   sColor3.c2 = (short) ( 0 );
   sColor3.c3 = (short) ( 80 );
   sColor3.c4 = (short) ( 255 );

   poColorTable->CreateColorRamp( 0, &sColor1, 128, &sColor2 );
   poColorTable->CreateColorRamp( 129, &sColor2, 255, &sColor3 );

I hope that you will find it useful. There are others techniques that I
would like to explorer so any suggestion at this point, or anytime actually,
will be welcome.

With the best regards to all,

Ivan Lucena



From ASP at blominfo.dk  Tue May  8 03:50:38 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] "Could not allocate enough memory" when translating
	VRT to ECW
In-Reply-To: <463895DA.5040602@pobox.com>
References: <25BE68A4D83DD4438F701DF0311F3F4A4019B9@posthus.blominfo.dk>
	<463895DA.5040602@pobox.com>
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A401C09@posthus.blominfo.dk>

Dear Frank,

While the error persists on my primary computer (WinXp 2GB Ram), I
haven't been able to reproduce the error on my other available computer
(Win64 3GB Ram). So I guess the error is somewhat hardware related,
which I think makes it difficult to file a decent bug report.

I'll give up for now, but I might return to the issue at a later time.

Best regards
Asger


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 2. maj 2007 15:45
To: Asger Sigurd Petersen
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] "Could not allocate enough memory" when
translating VRT to ECW

Asger Sigurd Petersen wrote:
> Dear list,
> 
> While experimenting with compression of vrt-files, I've run into the
> following error:
> 
> D:\tmp>gdal_translate -of ECW --config ECW_LARGE_OK YES -co TARGET=90
> -co DATUM=WGS84 -co PROJ=NUTM32 mosaic.vrt mosaic.ecw
> Input file size is 263092, 246181
> 0..ERROR 1: An error has occurred: Error 46 "Could not allocate enough
> memory"
> file "" line 0
> ERROR 1: IReadBlock failed at X offset 0, Y offset 15825
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 15825
> 100 - done.

Asger,

If you can file a bug sufficient for us to reproduce this, I could have
Mateusz do some digging.  But it seems like the problems is deep in the
ECW SDK and it likely to be very hard for us to ferret out.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org




From rayg at daylongraphics.com  Tue May  8 08:14:09 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] RFC 12: Improved File Management
In-Reply-To: <463FD7B5.1060102@pobox.com>
References: <463E950B.8010407@pobox.com> <463EBDFB.3010101@daylongraphics.com>
	<463F538A.9030708@pobox.com> <463FC5DB.3090503@daylongraphics.com>
	<463FD7B5.1060102@pobox.com>
Message-ID: <46406991.2040009@daylongraphics.com>

> Ray,
> 
> The current virtual file system stuff is handled by installing a global
> IO handler for a particular aspect of the filesystem namespace.  So,
> for instance, the "in memory filesystem" stuff is all in the filesystem
> area under /vsimem/.  Filesystem handlers are globally installed.  So
> I don't see any need to make the file system handler apparent by
> specifically passing it into Create() methods or to VSIOpenL().

Hmm... I see... you've got VSIFOpenL() using the filename to choose 
which filesystem driver to use.

So this is like URLs, then, with filenames having a protocol prefix (the 
name of the filesys handler) and then the normal pathspec. Well, there's 
a slim chance of namespace collision with folders having filesys handler 
names; a stricter protocol syntax would fix that but I suppose it's not 
critical.

To be safe, let's try an example... say I make a filesys handler that 
lets netCDF files be treated as filesystems. The physical file is 
'c:/work/file'. I want the netCDF dataset to use my handler, however, so 
I give it '/netcdfsys/c:/work/file/subdataset_02'. The driver calls 
VSIFOpenL, the netCDF filesys handler gets its Open() method called, 
passes 'c:/work/file' to the default handler, uses the returned FILE* to 
read the file and locate the subdataset_02 section, and then stores the 
returned FILE* inside a netCDF_FILE*, along with the other info that 
tracks the subdataset for all the remaining I/O operations.

So it should be alright, although the potential for namespace problems 
remains. Net protocols solve it by having explicit protocol prefixes and 
using different pathspec symbols for protocol vs. filesystem items 
(e.g., ':' vs '/'.), and browsers usually treat a missing protocol ID as 
indicating the local filesystem. And having a single registry of shared 
protocol names (shared unregistered ones could start with 'x-' perhaps).

So dataset::GetFiles() would use the original pathspec which has the 
protocol ID, so that works. /netCDFsys/ version of GetFiles() can return 
a valid entity list, and likewise process any other entity calls.

Longer protocol chaining should be possible, but care has to be taken to 
appends items to the pathspec that each filesys driver expects. 
/netCDFsys/, for example, expects to treat the physical file as a folder 
and to find a subdataset ID after the file's name. But if the file can 
be interpreted as both a container and a file by /netCDFsys/, we need a 
name to indicate the root level of the file, e.g., c:/work/file// or 
c:/work/file/root. But the filesys handler developer documents protocol 
details like that as needed, so that shouldn't be an issue.

A three-level chain would be e.g., /ramcache/ caching /netCDFsys/ which 
in turn is using the default filesys handler. The pathspec would be 
"/ramcache/netCDFSys/c:/work/file/subdataset_02". An open() call winds 
up opening c:/work/file, then /netCDFSys/ opens subdataset_02, then 
/ramcache/ copies the contents of subdataset_02 to memory and all I/O 
occurs there. Upon close(), /ramcache/ calls /netCDFsys/::write(entire 
file), which in turns call the default write() to update the correct 
subpart of the actual file.

(/ramcache/ is a poor example since OS's and GDAL cache I/O already,
but is used for simplicity's sake.)


> I think there are two levels of indirection implicit in your statement.
> One is at the VSI*L level which is raw binary data.  But subdatasets are
> really a GDAL concept and their meaning vary from format to format.  I'm
> not sure how to mesh this all.

Filesys handler makes sense if the subdataset is self-contained and 
appears to be in a driver-recognizable format (i.e., files within 
files), or if the file's format is really just a wrapper around other 
formats (say, an embedded JPEG inside an email message). Otherwise, 
yeah, things analogous to VRTdataset are a better choice, and addressing 
the subdatasets becomes a driver-level Open() or Create() option.

If you need to do operations like GetFiles() on a subdataset, however, 
then a filesys handler should be used. For example, to use your case of 
wanting a list of files for zipping and sending to a client -- we would 
want the subdataset to have the filesys return a list of named entities 
(which would be chunks within the containing file, so the names are 
resolvable to offsets and lengths), and then the filesys handler would 
perform the requisite read I/O to provide the "files" for zipping. 
GetFileList() has to of course return each filename with the filesys 
handler name prefix, and these filenames are only valid for opening with 
VSI*L calls.

Ray



From hannes.reuter at jrc.it  Tue May  8 09:29:10 2007
From: hannes.reuter at jrc.it (Hannes Isaak Reuter)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] HDF4 format read in - command line ? 
Message-ID: <45C0D425001A3655@cheetah-1.jrc.it> (added by postmaster@jrc.it)

     Today i got an HDF4 format dataset to help on and somehow I'm to
     stupid to tell my colleagues to tell how to read it in..
     Usually I was reading it using the gdalinfo,
     identifying the
     SUBDATASET_1_NAME
     and than use that for the gdalwarp process..
     with that HDF file now i have no idea how to call the substring. and
     after playing around for 3 hours with different combinations i
     deccide to call for help..
     If anybody can tell me the file/band string from the gdalinfo command
     given below, i'm quite happy ..
     U:\share\Luis>gdalinfo GEO2004001.hdf
     Driver: HDF4Image/HDF4 Dataset
     Size is 11277, 3086
     Coordinate System is:
     GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
          DATUM["Not specified (based on Clarke 1866 spheroid)",
              SPHEROID["Clarke 1866",6378206.4,294.9786982139006,

- Ignored:
                  AUTHORITY["EPSG","7008"]]],
          PRIMEM["Greenwich",0],
          UNIT["degree",0.0174532925199433]]
     Origin = (-29.238043888889045,70.000000000000000)
     Pixel Size = (0.012964385918241,-0.012964386026500)
     Metadata:
        HDFEOSVersion=HDFEOS_V2.6
        OldStructMetadata.0=GROUP=SwathStructure
     END_GROUP=SwathStructure
     GROUP=GridStructure
              GROUP=GRID_1
                      GridName="MOD_Grid_monthly_1km_VI"
                      XDim=6000
                      YDim=4800
                      UpperLeftPointMtrs=(-1111950.519667,7783653.637667)
                      LowerRightMtrs=(4447802.078667,3335851.559000)
                      Projection=GCTP_SNSOID
                      ProjParams=(6371007.181000,0,0,0,0,0,0,0,0,0,0,0,0)
                      SphereCode=-1
                      GridOrigin=HDFE_GD_UL
                      GROUP=Dimension
                      END_GROUP=Dimension
                      GROUP=DataField
                              OBJECT=DataField_1
                                      DataFieldName="1 km monthly NDVI"
                                      DataType=DFNT_INT16
                                      DimList=("YDim","XDim")
                              END_OBJECT=DataField_1
                      END_GROUP=DataField
                      GROUP=MergedFields
                      END_GROUP=MergedFields
              END_GROUP=GRID_1
     END_GROUP=GridStructure
     GROUP=PointStructure
     END_GROUP=PointStructure
     END

        OldArchiveMetadata.0=
     GROUP                  = ARCHIVEDMETADATA
        GROUPTYPE            = MASTERGROUP

        OBJECT                 = CHARACTERISTICBINANGULARSIZE
          NUM_VAL              = 1
          VALUE                = 30.000000
        END_OBJECT             = CHARACTERISTICBINANGULARSIZE

        OBJECT                 = CHARACTERISTICBINSIZE
          NUM_VAL              = 1
          VALUE                = 926.625433
        END_OBJECT             = CHARACTERISTICBINSIZE

        OBJECT                 = DATACOLUMNS
          NUM_VAL              = 1
          VALUE                = 1200
        END_OBJECT             = DATACOLUMNS

        OBJECT                 = DATAROWS
          NUM_VAL              = 1
          VALUE                = 1200
        END_OBJECT             = DATAROWS

        OBJECT                 = GLOBALGRIDCOLUMNS
          NUM_VAL              = 1
          VALUE                = 43200
        END_OBJECT             = GLOBALGRIDCOLUMNS

        OBJECT                 = GLOBALGRIDROWS
          NUM_VAL              = 1
          VALUE                = 21600
        END_OBJECT             = GLOBALGRIDROWS

        OBJECT                 = NUMBEROFDAYS
          NUM_VAL              = 1
          VALUE                = 48
        END_OBJECT             = NUMBEROFDAYS

        OBJECT                 = DAYSOFYEAR
          NUM_VAL              = 48
          VALUE                = (353, 354, 355, 356, 357, 358, 359, 360,
     361, 362, 36
     3, 364, 365, 366, 1, 2, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,
     14, 15, 16, 1
     7, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32)
        END_OBJECT             = DAYSOFYEAR

        OBJECT                 = NUMBEROF16DAYPERIODS
          NUM_VAL              = 1
          VALUE                = 3
        END_OBJECT             = NUMBEROF16DAYPERIODS

        OBJECT                 = SPSOPARAMETERS
          NUM_VAL              = 4
          VALUE                = ("2749", "4334", "2749a", "4334a")
        END_OBJECT             = SPSOPARAMETERS

        OBJECT                 = GEOANYABNORMAL
          NUM_VAL              = 1
          VALUE                = "False"
        END_OBJECT             = GEOANYABNORMAL

        OBJECT                 = GEOESTMAXRMSERROR
          NUM_VAL              = 1
          VALUE                = 50.000000
        END_OBJECT             = GEOESTMAXRMSERROR

        OBJECT                 = INSTRUMENTNAME
          NUM_VAL              = 1
          VALUE                = "Moderate-Resolution Imaging 
SpectroRadiometer"
        END_OBJECT             = INSTRUMENTNAME

        OBJECT                 = PROCESSINGCENTER
          NUM_VAL              = 1
          VALUE                = "MODAPS"
        END_OBJECT             = PROCESSINGCENTER

        OBJECT                 = INPUTFILENAME
          NUM_VAL              = 3
          VALUE                =
     ("MOD13A2.A2004353.h17v02.004.2005008091125.hdf", "MO
     D13A2.A2005001.h17v02.004.2005027190904.hdf",
     "MOD13A2.A2005017.h17v02.004.20050
     39040318.hdf")
        END_OBJECT             = INPUTFILENAME

        OBJECT                 = PERCENTLAND
          NUM_VAL              = 1
          VALUE                = 0
        END_OBJECT             = PERCENTLAND

        OBJECT                 = SEAPROCESSED
          NUM_VAL              = 1
          VALUE                = "Yes"
        END_OBJECT             = SEAPROCESSED

        OBJECT                 = PROCESSINGENVIRONMENT
          NUM_VAL              = 1
          VALUE                = "IRIX64 mtvs1 6.5 10070055 IP35"
        END_OBJECT             = PROCESSINGENVIRONMENT

        OBJECT                 = DESCRREVISION
          NUM_VAL              = 1
          VALUE                = "4.1"
        END_OBJECT             = DESCRREVISION

        OBJECT                 = LONGNAME
          NUM_VAL              = 1
          VALUE                = "MODIS/Terra Vegetation Indices Monthly
     L3 Global 1km
       SIN Grid"
        END_OBJECT             = LONGNAME

        GROUP                  = BOUNDINGRECTANGLE

          OBJECT                 = NORTHBOUNDINGCOORDINATE
            NUM_VAL              = 1
            VALUE                = 70.000000
          END_OBJECT             = NORTHBOUNDINGCOORDINATE

          OBJECT                 = SOUTHBOUNDINGCOORDINATE
            NUM_VAL              = 1
            VALUE                = 30.000000
          END_OBJECT             = SOUTHBOUNDINGCOORDINATE

          OBJECT                 = EASTBOUNDINGCOORDINATE
            NUM_VAL              = 1
            VALUE                = 62.24191
          END_OBJECT             = EASTBOUNDINGCOORDINATE

          OBJECT                 = WESTBOUNDINGCOORDINATE
            NUM_VAL              = 1
            VALUE                = -29.238044
          END_OBJECT             = WESTBOUNDINGCOORDINATE

        END_GROUP              = BOUNDINGRECTANGLE

        OBJECT                 = QAPERCENTPOORQ1KMMONTHNDVI
          NUM_VAL              = 16
          VALUE                = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 100)
        END_OBJECT             = QAPERCENTPOORQ1KMMONTHNDVI

        OBJECT                 = QAPERCENTPOORQ1KMMONTHEVI
          NUM_VAL              = 16
          VALUE                = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 100)
        END_OBJECT             = QAPERCENTPOORQ1KMMONTHEVI

        OBJECT                 = COMPOSITEMONTHNAME
          NUM_VAL              = 1
          VALUE                = "January"
        END_OBJECT             = COMPOSITEMONTHNAME

     END_GROUP              = ARCHIVEDMETADATA

     END

     Corner Coordinates:
     Upper Left  ( -29.2380439,  70.0000000) ( 29d14'16.96"W, 70d 0'0.00"N)
     Lower Left  ( -29.2380439,  29.9919047) ( 29d14'16.96"W, 29d59'30.86"N)
     Upper Right ( 116.9613361,  70.0000000) (116d57'40.81"E, 70d 0'0.00"N)
     Lower Right ( 116.9613361,  29.9919047) (116d57'40.81"E, 29d59'30.86"N)
     Center      (  43.8616461,  49.9959524) ( 43d51'41.93"E, 49d59'45.43"N)
     Band 1 Block=11277x1 Type=Int16, ColorInterp=Gray

     U:\share\Luis>














- Done.


Received: from mx2.jrc.it (mx2.jrc.it [139.191.1.110])
	by duke.maptools.org (8.12.11/8.12.10) with ESMTP id l48DQMvH008039
	for <gdal-dev-request@lists.maptools.org>;
	Tue, 8 May 2007 09:26:35 -0400
Received: from irelay.jrc.it (irelay.jrc.it [139.191.254.63])
	by mx2.jrc.it (LMC5614Amx2) with ESMTP id l48DQEua006460
	for <gdal-dev-request@lists.maptools.org>;
	Tue, 8 May 2007 15:26:14 +0200 (CEST)
Received: from cheetah-1.jrc.it (cheetah-1.jrc.it [139.191.243.17])
	by irelay.jrc.it (LMC5614Ainternal) with ESMTP id l48D8rq8007957
	for <gdal-dev-request@lists.maptools.org>;
	Tue, 8 May 2007 15:26:13 +0200 (MEST)
Received: from D01RI0302803.jrc.it (139.191.16.37) by cheetah-1.jrc.it
	(7.1.006) (authenticated as hannes.reuter)
	id 45C0D425001A35E6 for gdal-dev-request@lists.maptools.org;
	Tue, 8 May 2007 15:25:48 +0200
Message-ID: <45C0D425001A35E6@cheetah-1.jrc.it> (added by postmaster@jrc.it)
X-Mailer: QUALCOMM Windows Eudora Version 7.1.0.9
Date: Tue, 08 May 2007 15:26:07 +0200
To: gdal-dev-request@lists.maptools.org
From: Hannes Isaak Reuter <hannes.reuter@jrc.it>
Subject: HDF4 format read in - command line ?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Spam-Status: No, score=-101.2 required=99.0 tests=ALL_TRUSTED,AWL,
	UPPERCASE_50_75,USER_IN_WHITELIST autolearn=disabled version=3.1.1
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on mx2.jrc.it

Dear colleagues..

Today i got an HDF4 format dataset to help on and somehow I'm to 
stupid to tell my colleagues to tell how to read it in..
Usually I was reading it using the gdalinfo,
identifying the
SUBDATASET_1_NAME

and than use that for the gdalwarp process..

with that HDF file now i have no idea how to call the substring. and 
after playing around for 3 hours with different combinations i 
deccide to call for help..
If anybody can tell me the file/band string from the gdalinfo command 
given below, i'm quite happy ..



U:\share\Luis>gdalinfo GEO2004001.hdf
Driver: HDF4Image/HDF4 Dataset
Size is 11277, 3086
Coordinate System is:
GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
     DATUM["Not specified (based on Clarke 1866 spheroid)",
         SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
             AUTHORITY["EPSG","7008"]]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433]]
Origin = (-29.238043888889045,70.000000000000000)
Pixel Size = (0.012964385918241,-0.012964386026500)
Metadata:
   HDFEOSVersion=HDFEOS_V2.6
   OldStructMetadata.0=GROUP=SwathStructure
END_GROUP=SwathStructure
GROUP=GridStructure
         GROUP=GRID_1
                 GridName="MOD_Grid_monthly_1km_VI"
                 XDim=6000
                 YDim=4800
                 UpperLeftPointMtrs=(-1111950.519667,7783653.637667)
                 LowerRightMtrs=(4447802.078667,3335851.559000)
                 Projection=GCTP_SNSOID
                 ProjParams=(6371007.181000,0,0,0,0,0,0,0,0,0,0,0,0)
                 SphereCode=-1
                 GridOrigin=HDFE_GD_UL
                 GROUP=Dimension
                 END_GROUP=Dimension
                 GROUP=DataField
                         OBJECT=DataField_1
                                 DataFieldName="1 km monthly NDVI"
                                 DataType=DFNT_INT16
                                 DimList=("YDim","XDim")
                         END_OBJECT=DataField_1
                 END_GROUP=DataField
                 GROUP=MergedFields
                 END_GROUP=MergedFields
         END_GROUP=GRID_1
END_GROUP=GridStructure
GROUP=PointStructure
END_GROUP=PointStructure
END

   OldArchiveMetadata.0=
GROUP                  = ARCHIVEDMETADATA
   GROUPTYPE            = MASTERGROUP

   OBJECT                 = CHARACTERISTICBINANGULARSIZE
     NUM_VAL              = 1
     VALUE                = 30.000000
   END_OBJECT             = CHARACTERISTICBINANGULARSIZE

   OBJECT                 = CHARACTERISTICBINSIZE
     NUM_VAL              = 1
     VALUE                = 926.625433
   END_OBJECT             = CHARACTERISTICBINSIZE

   OBJECT                 = DATACOLUMNS
     NUM_VAL              = 1
     VALUE                = 1200
   END_OBJECT             = DATACOLUMNS

   OBJECT                 = DATAROWS
     NUM_VAL              = 1
     VALUE                = 1200
   END_OBJECT             = DATAROWS

   OBJECT                 = GLOBALGRIDCOLUMNS
     NUM_VAL              = 1
     VALUE                = 43200
   END_OBJECT             = GLOBALGRIDCOLUMNS

   OBJECT                 = GLOBALGRIDROWS
     NUM_VAL              = 1
     VALUE                = 21600
   END_OBJECT             = GLOBALGRIDROWS

   OBJECT                 = NUMBEROFDAYS
     NUM_VAL              = 1
     VALUE                = 48
   END_OBJECT             = NUMBEROFDAYS

   OBJECT                 = DAYSOFYEAR
     NUM_VAL              = 48
     VALUE                = (353, 354, 355, 356, 357, 358, 359, 360, 
361, 362, 36
3, 364, 365, 366, 1, 2, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 
14, 15, 16, 1
7, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32)
   END_OBJECT             = DAYSOFYEAR

   OBJECT                 = NUMBEROF16DAYPERIODS
     NUM_VAL              = 1
     VALUE                = 3
   END_OBJECT             = NUMBEROF16DAYPERIODS

   OBJECT                 = SPSOPARAMETERS
     NUM_VAL              = 4
     VALUE                = ("2749", "4334", "2749a", "4334a")
   END_OBJECT             = SPSOPARAMETERS

   OBJECT                 = GEOANYABNORMAL
     NUM_VAL              = 1
     VALUE                = "False"
   END_OBJECT             = GEOANYABNORMAL

   OBJECT                 = GEOESTMAXRMSERROR
     NUM_VAL              = 1
     VALUE                = 50.000000
   END_OBJECT             = GEOESTMAXRMSERROR

   OBJECT                 = INSTRUMENTNAME
     NUM_VAL              = 1
     VALUE                = "Moderate-Resolution Imaging SpectroRadiometer"
   END_OBJECT             = INSTRUMENTNAME

   OBJECT                 = PROCESSINGCENTER
     NUM_VAL              = 1
     VALUE                = "MODAPS"
   END_OBJECT             = PROCESSINGCENTER

   OBJECT                 = INPUTFILENAME
     NUM_VAL              = 3
     VALUE                = 
("MOD13A2.A2004353.h17v02.004.2005008091125.hdf", "MO
D13A2.A2005001.h17v02.004.2005027190904.hdf", 
"MOD13A2.A2005017.h17v02.004.20050
39040318.hdf")
   END_OBJECT             = INPUTFILENAME

   OBJECT                 = PERCENTLAND
     NUM_VAL              = 1
     VALUE                = 0
   END_OBJECT             = PERCENTLAND

   OBJECT                 = SEAPROCESSED
     NUM_VAL              = 1
     VALUE                = "Yes"
   END_OBJECT             = SEAPROCESSED

   OBJECT                 = PROCESSINGENVIRONMENT
     NUM_VAL              = 1
     VALUE                = "IRIX64 mtvs1 6.5 10070055 IP35"
   END_OBJECT             = PROCESSINGENVIRONMENT

   OBJECT                 = DESCRREVISION
     NUM_VAL              = 1
     VALUE                = "4.1"
   END_OBJECT             = DESCRREVISION

   OBJECT                 = LONGNAME
     NUM_VAL              = 1
     VALUE                = "MODIS/Terra Vegetation Indices Monthly 
L3 Global 1km
  SIN Grid"
   END_OBJECT             = LONGNAME

   GROUP                  = BOUNDINGRECTANGLE

     OBJECT                 = NORTHBOUNDINGCOORDINATE
       NUM_VAL              = 1
       VALUE                = 70.000000
     END_OBJECT             = NORTHBOUNDINGCOORDINATE

     OBJECT                 = SOUTHBOUNDINGCOORDINATE
       NUM_VAL              = 1
       VALUE                = 30.000000
     END_OBJECT             = SOUTHBOUNDINGCOORDINATE

     OBJECT                 = EASTBOUNDINGCOORDINATE
       NUM_VAL              = 1
       VALUE                = 62.24191
     END_OBJECT             = EASTBOUNDINGCOORDINATE

     OBJECT                 = WESTBOUNDINGCOORDINATE
       NUM_VAL              = 1
       VALUE                = -29.238044
     END_OBJECT             = WESTBOUNDINGCOORDINATE

   END_GROUP              = BOUNDINGRECTANGLE

   OBJECT                 = QAPERCENTPOORQ1KMMONTHNDVI
     NUM_VAL              = 16
     VALUE                = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100)
   END_OBJECT             = QAPERCENTPOORQ1KMMONTHNDVI

   OBJECT                 = QAPERCENTPOORQ1KMMONTHEVI
     NUM_VAL              = 16
     VALUE                = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 100)
   END_OBJECT             = QAPERCENTPOORQ1KMMONTHEVI

   OBJECT                 = COMPOSITEMONTHNAME
     NUM_VAL              = 1
     VALUE                = "January"
   END_OBJECT             = COMPOSITEMONTHNAME

END_GROUP              = ARCHIVEDMETADATA

END

Corner Coordinates:
Upper Left  ( -29.2380439,  70.0000000) ( 29d14'16.96"W, 70d 0'0.00"N)
Lower Left  ( -29.2380439,  29.9919047) ( 29d14'16.96"W, 29d59'30.86"N)
Upper Right ( 116.9613361,  70.0000000) (116d57'40.81"E, 70d 0'0.00"N)
Lower Right ( 116.9613361,  29.9919047) (116d57'40.81"E, 29d59'30.86"N)
Center      (  43.8616461,  49.9959524) ( 43d51'41.93"E, 49d59'45.43"N)
Band 1 Block=11277x1 Type=Int16, ColorInterp=Gray

U:\share\Luis>


From cavicchi at ferrara.linux.it  Tue May  8 10:07:13 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] From GeoTIFF to JPEG2000
Message-ID: <20070508140713.GA31796@ferrara.linux.it>

Hi to all,  
This is a first time that i post to this ml. My name is Mario Cavicchi  
and i'm italian.    
I have a problem with a little c program that i wrote. My program  
convert from GeoTIFF to JPEG2000 (with jaster) and it work correctly 
with file of size about 60/70 Mbyte, but when i try to convert a big 
file (260Mbyte more or less) i receive this error:

fcv: jpc_t1enc.c:215: jpc_enc_enccblk: Assertion `cblk->stream' failed.

Someone can help me? 

Many thanks to all.



PS: Sorry for my english.

--
Bye,
        Mario
        
[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From warmerdam at pobox.com  Tue May  8 10:17:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] HDF4 format read in - command line ?
In-Reply-To: <45C0D425001A3655@cheetah-1.jrc.it> (added by postmaster@jrc.it)
References: <45C0D425001A3655@cheetah-1.jrc.it> (added by postmaster@jrc.it)
Message-ID: <4640866B.3050908@pobox.com>

Hannes Isaak Reuter wrote:
> Today i got an HDF4 format dataset to help on and somehow I'm to stupid 
> to tell my colleagues to tell how to read it in..
> Usually I was reading it using the gdalinfo,
> identifying the
> SUBDATASET_1_NAME
> 
> and than use that for the gdalwarp process..
> 
> with that HDF file now i have no idea how to call the substring. and 
> after playing around for 3 hours with different combinations i deccide 
> to call for help..
> If anybody can tell me the file/band string from the gdalinfo command 
> given below, i'm quite happy ..
> 
> U:\share\Luis>gdalinfo GEO2004001.hdf
> Driver: HDF4Image/HDF4 Dataset
> Size is 11277, 3086
> Coordinate System is:
> GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
>     DATUM["Not specified (based on Clarke 1866 spheroid)",
>         SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
>             AUTHORITY["EPSG","7008"]]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> Origin = (-29.238043888889045,70.000000000000000)
> Pixel Size = (0.012964385918241,-0.012964386026500)
> Metadata:
...
> Corner Coordinates:
> Upper Left  ( -29.2380439,  70.0000000) ( 29d14'16.96"W, 70d 0'0.00"N)
> Lower Left  ( -29.2380439,  29.9919047) ( 29d14'16.96"W, 29d59'30.86"N)
> Upper Right ( 116.9613361,  70.0000000) (116d57'40.81"E, 70d 0'0.00"N)
> Lower Right ( 116.9613361,  29.9919047) (116d57'40.81"E, 29d59'30.86"N)
> Center      (  43.8616461,  49.9959524) ( 43d51'41.93"E, 49d59'45.43"N)
> Band 1 Block=11277x1 Type=Int16, ColorInterp=Gray

Hannes,

It seems that this file can be used directly without fooling with
subdatasets.  I think this is a special case in the code for HDF4
files with only one subdataset.  Accessing the main file is treated
as equivelent to accessing that subdatset.  So you can just do stuff like:

   gdalwarp GEO2004001.hdf out.tif

I see the file is 11277x3086 with 1 16bit band and a nice regular sampling
in geographic coordinates.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May  8 10:31:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] From GeoTIFF to JPEG2000
In-Reply-To: <20070508140713.GA31796@ferrara.linux.it>
References: <20070508140713.GA31796@ferrara.linux.it>
Message-ID: <464089C3.1020201@pobox.com>

Mario Cavicchi wrote:
> Hi to all,  
> This is a first time that i post to this ml. My name is Mario Cavicchi  
> and i'm italian.    
> I have a problem with a little c program that i wrote. My program  
> convert from GeoTIFF to JPEG2000 (with jaster) and it work correctly 
> with file of size about 60/70 Mbyte, but when i try to convert a big 
> file (260Mbyte more or less) i receive this error:
> 
> fcv: jpc_t1enc.c:215: jpc_enc_enccblk: Assertion `cblk->stream' failed.
> 
> Someone can help me? 

Mario,

I *suspect* this is due to running out of memory.  The JasPer library tends
to be very memory hungry and in proportion to the size of the image being
compressed or decompressed.  I think you will have to either stick to smaller
images, get more RAM or consider using a different JPEG2000 encoder that is
less memory hungry.

The JP2KAK and JP2ECW drivers in GDAL (depending on the proprietary
Kakadu library and the open source ECW SDK respectively) should have much
better memory performance.  They are both built into the FWTools binaries
if you want to try them out.

   http://fwtools.maptools.org/

Of course, I could be wrong and the issue could be something else.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Tue May  8 10:27:54 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Problem using EPSG in C#
Message-ID: <f1q1df$k87$1@sea.gmane.org>

Sorry if this is a newbie question, but someone has to ask them to.

I'm trying to make use of the EPSG-codes in setting up a pair 
OGR.SpatialReference and an OGR.CoordinateTransformation.
I can make this work in one small test application but in the main one 
it just doesn't work.

Sample code:
  private CoordinateTransformation toWGS;
  private CoordinateTransformation fromWGS;
SpatialReference source;
SpatialReference wgs84;
   source = new SpatialReference("");
   int EPSG = 3021;
   int res = source.ImportFromEPSG(EPSG);

   wgs84 = new SpatialReference(Projections.WKT("WGS84"));
   fromWGS = new CoordinateTransformation(wgs84, source);
   toWGS = new CoordinateTransformation(source, wgs84);

where the wgs84 is set up from a WKT-string.

What I guess I miss is how to set up the paths and so between/to the 
different data files.
GDAL is located in FWTools\bin (on the PATH)
EPSG-catalouge in FWTools\Data (also on the PATH) and also copied to the 
  VSE project.
But how SHOULD it be? I stumble in darkness...

The result of the Import is by the way a 6.

Or how do you suggest I approach this, how do I set up the 
transformation? What "standard" is easiest for me to use? The goal of 
this application is to be able to map any projection (well, some) to 
WGS84 and back. The user is to be able to manually set projection and 
also be read from files (via GDALInfo is the idea).

pls.

Yours
Tomas


From warmerdam at pobox.com  Tue May  8 12:12:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Problem using EPSG in C#
In-Reply-To: <f1q1df$k87$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>
Message-ID: <4640A15F.1060509@pobox.com>

Tomas R wrote:
> What I guess I miss is how to set up the paths and so between/to the 
> different data files.
> GDAL is located in FWTools\bin (on the PATH)
> EPSG-catalouge in FWTools\Data (also on the PATH) and also copied to the 
>  VSE project.
> But how SHOULD it be? I stumble in darkness...

Tomas,

I think what you need to do is call Gdal.PushFinderLocation()
with the path to the GDAL data directory as the argument.

When applications are run from within the FWTools Shell this is
accomplished via an environment variable (GDAL_DATA), but freestanding
applications can call CPLPushFinderLocation() which in the csharp
bindings is (I believe) known as Gdal.PushFinderLocation().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Tue May  8 12:24:16 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <4640A15F.1060509@pobox.com>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
Message-ID: <f1q87k$fpa$1@sea.gmane.org>

Frank Warmerdam skrev:
> Tomas R wrote:
>> What I guess I miss is how to set up the paths and so between/to the 
>> different data files.
>> GDAL is located in FWTools\bin (on the PATH)
>> EPSG-catalouge in FWTools\Data (also on the PATH) and also copied to 
>> the  VSE project.
>> But how SHOULD it be? I stumble in darkness...
> 
> Tomas,
> 
> I think what you need to do is call Gdal.PushFinderLocation()
> with the path to the GDAL data directory as the argument.
> 
> When applications are run from within the FWTools Shell this is
> accomplished via an environment variable (GDAL_DATA), but freestanding
> applications can call CPLPushFinderLocation() which in the csharp
> bindings is (I believe) known as Gdal.PushFinderLocation().
> 
> Best regards,
I have tried
GDAL.gdal.SetConfigOption("GDAL_DATA",@"C:\Program\FWTools1.2.0\data\");

and
             GDAL.gdal.PushFinderLocation(@"C:\Program\FWTools1.2.0\data\");

but still gets the same error.
I take a peek at
GDAL.gdal.GetConfigOption("GDAL_DATA", dummy)
and, yes, it is set to
"C:\\Program\\FWTools1.2.0\\data\\"

Perhaps I should try using the latest version of GDAL#-bindings?


From lijian.shi at und.nodak.edu  Tue May  8 14:02:12 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] problem abotu reprojection with ogr2ogr
Message-ID: <0JHQ005NGI3P9840@mailmx1.und.nodak.edu>

Hi, everyone,

 

I have a shp file and landsat data of the same field, but these data's
projections are different. The projection information of shp file is below:

 

GEOGCS["GCS_Assumed_Geographic_1",DATUM["D_North_American_1927",SPHEROID["Cl
arke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0
174532925199433]]

 

We can get this information from .prj file or use command 'ogrinfo' .

 

The projection information of landsat data is:

 

PROJCS["WGS 84 / UTM zone 14N",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.2572235629972,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Transverse_Mercator"],

    PARAMETER["latitude_of_origin",0],

    PARAMETER["central_meridian",-99],

    PARAMETER["scale_factor",0.9996],

    PARAMETER["false_easting",500000],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]],

AUTHORITY["EPSG","32614"]]

 

I copy this information into a empty file, then saved as 'landsat.prj'.

 

Now I use 'ogr2ogr' to reproject the shp file in order that the shp file has
the same projection information with landsat data. The command is as below:

 

ogr2ogr -s_srs input.prj -t_srs landsat.prj output.shp input.shp

 

When I put the output.shp and input.shp into ArcGIS together, there a shift
between two file. Dose anyone know the reason? Is there any problem with my
command?

 

Thanks in advance.

 

Lijian

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070508/3516dae4/attachment.html
From sjahputerao at missouri.edu  Tue May  8 14:20:49 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] .ige spill file in HFA keeps growing!
Message-ID: <4640BF81.8080802@missouri.edu>

I have been playing with HFA format for the last couple of months. 
Before this, we were using GeoTiff format.  But GeoTiff inability to
handle image size >4GB forced us to switch to HFA. 

For those who have used HFA format, it basically store the image in a
single file if the image size is <2GB.  Anything bigger will cause a
"spill" file (.ige) to be created. 

So I am trying to create a new HFA file using Create() with HFA driver. 
Everything works as expected, except that I began noticing my .ige file
keeps growing in size.  Apparently, if I try to create a file, and there
exists an HFA file of the same image size (with an .ige present) in the
disk already, instead of overwriting the old file Create() simply
appends the new HFA image to the existing .ige file.  So if I run the
program several time in the same directory, the .ige file will balloon
up in size in proportion to the number of times you try to create the
HFA file.

When I try to open the HFA image using OpenEV, the image looked wrong. 
Blocks are misaligned and scattered all over the place.  However, I can
still access the image correctly using GDAL.  gdalinfo also displays the
correct metadata, and hfatest does not show any anomaly either (that I
know of).

I just wish Create() in HFA format would overwrite any old file.

Anyone ever experienced this problem with HFA?

Thanks

Ozy


From matt.wilkie at gov.yk.ca  Tue May  8 14:39:15 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Gdalwarp - corrupt merge
In-Reply-To: <463FEF72.3070404@pobox.com>
References: <002b01c790f6$33696c10$7401a8c0@sherpa>
	<463FEF72.3070404@pobox.com>
Message-ID: <4640C3D3.8040107@gov.yk.ca>

> I also do not see this result.  I just tried:
> 
> gdalwarp -te 440000 3720000 470000 3750000 utm.tif out.tif
> 
> and out.tif has the same coordinate system as the input file.  

Is this perhaps the same sa ticket:1471, where starting with gdalwarp 
from win32 fwtools 1.07 no longer keeps georeferencing unless 
specifically assigned?

http://trac.osgeo.org/gdal/ticket/1471

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue May  8 16:55:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:50 2007
Subject: [Gdal-dev] Motion: Adopt RFC 12: Improved File Management
Message-ID: <4640E3BF.7090908@pobox.com>

I motion to adopt RFC 12: Improved File Management.

   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement

---

This is the GetFileList() / GDALRenameDataset() RFC.

+1 from me to start.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From nate at deltateck.com  Tue May  8 18:28:09 2007
From: nate at deltateck.com (Nate Jennings)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Read image file to Numpy, then output to image
Message-ID: <4f44d320705081528i12a1c135lcac204dbbf7da619@mail.gmail.com>

Hello,

I need some guidance on a path to take.  I am working on a little image
processing package written in Python for a class I teach in Remote Sensing.

>From other posts in other mail lists, I have been encouraged to look at gdal
for loading a multi-band image file into numpy, process it, then write it
out to an image format.

I am using Python 2.4, gdal-python-13.win32-py2.4 that I installed from the
.exe and numpy-1.0.2.win32-py2.4 from the exe and python image library
1.1.6win32-py2.4.  All of these have been installed correctly.  I would have
installed the 1.4.1 version of gdal, but I did not see an .exe and when I
tried to follow the instructions for changing the path and the gdal_data
environment variable, the import gdal was not recognized, so I chose a .exe
that seemed to work.

On this note, I attempted to follow the basic tutorial for loading an image
file.  (I tried a multi-band .TIF and ERDAS Imagine file).  The message I
received was--

img = gdal.gdal.Open('c:\\nate\\remote_sensing\\pyth_img_test.tif',
GA_ReadOnly)
AttributeError: 'module' object has no attribute 'gdal'

Here is my code below just for testing the reading of a multi-band image
file to then load it into a numpy array.  From here I want to do some pixel
by pixel processing.

-----------------------------

import Image, numpy, gdal, sys, os

img = gdal.Open('c:\\nate\\remote_sensing\\pyth_img_test.tif', GA_ReadOnly)

A = numpy.asarray(img)        #Convert the image to a numpy array

print A.shape
print A.size
print "Num Rows: " + str(A.shape[0])
print "Num Cols: " + str(A.shape[1])
print "Num bands: " + str(A.ndim)


------------------------------------

I also saw on the threads to access the FWTools, which I have loaded and
they seem to have slightly different methods of use.  My goal is to create a
little image processing package that I can give out to students to work with
multi-band imagery and do some of the things that FWTools has or OpenEV has,
but it a little more intuitive and can process more than 3 bands of
imagery.  Plus some of the documentation for some of the functions in
FWTools or OpenEV does not exist or the functions are a little cumbersome to
use.  I am also thinking about what will be required by the student to load
in order to use my python image processing application.  I want this to be
straight forward too...so if I am having difficulty with loading libraries,
having to change path variables, etc, then this is too much for the novie
Remote Sensing student.  I am not into compiliing my own libraries and will
be pushing my programming limits with writing C++, binding python to c++
code, etc.  I do have some programming experience with C++.  I was in an
algorithms class about 10 yrs ago while in grad school programming many of
the remote sensing algorthims....the problem was they were running under
OS/2 and were limited to the old ERDAS .LAN format.

I would appreciate some help in getting the image to read in a numpy array
as well as any feedback on re-directing my efforts if there is something
that I can tap into (such as FWTools libraries, OpenEV libraries).  It seems
that Frank has put alot of this together in different places, I am just
trying to get some of what is out there more combined to work on multi-band
imagery and RADAR (TIF, ERDAS Imagine files).

Thanks for any help.

Nate








-- 
http://www.jenningsplanet.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070508/4e5c3915/attachment.html
From jluis at ualg.pt  Tue May  8 18:44:17 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] GMT driver in OGR - How to activate it?
Message-ID: <4640FD41.20006@ualg.pt>

Hi,
I just installed (under Windows) the trunk version where the GMT driver 
for OGR exists in
...gdal-svn-trunk-2007.05.08\ogr\ogrsf_frmts\gmt

However when I try to use it I get
Unable to find driver `GMT'
and in fact it is not listed by ogr2ogr --formats

How do we "activate" it?
Brent Wood told us in one of the GMT lists that it was ready to test/use

Thanks

Joaquim Luis

From warmerdam at pobox.com  Tue May  8 20:45:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] GMT driver in OGR - How to activate it?
In-Reply-To: <4640FD41.20006@ualg.pt>
References: <4640FD41.20006@ualg.pt>
Message-ID: <464119B5.6050601@pobox.com>

Joaquim Luis wrote:
> Hi,
> I just installed (under Windows) the trunk version where the GMT driver 
> for OGR exists in
> ...gdal-svn-trunk-2007.05.08\ogr\ogrsf_frmts\gmt
> 
> However when I try to use it I get
> Unable to find driver `GMT'
> and in fact it is not listed by ogr2ogr --formats
> 
> How do we "activate" it?
> Brent Wood told us in one of the GMT lists that it was ready to test/use

Joaquim,

I have confirmed that the windows makefiles omitted an important
bit.  In particular, -DGMT_ENABLED was not defined in the file
gdal/ogr/ogrsf_frmts/generic/makefile.vc so the driver wasn't
being registered by default.

I have committed a fix. I'd suggest you "svn update" and do a
"nmake /f makefile.vc clean" and "nmake /f makefile.vc" to rebuild.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May  8 20:52:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] problem abotu reprojection with ogr2ogr
In-Reply-To: <0JHQ005NGI3P9840@mailmx1.und.nodak.edu>
References: <0JHQ005NGI3P9840@mailmx1.und.nodak.edu>
Message-ID: <46411B53.70101@pobox.com>

Lijian Shi wrote:
> Hi, everyone,
> 
>  
> 
> I have a shp file and landsat data of the same field, but these data?s 
> projections are different. The projection information of shp file is below:
> 
>  
> 
> GEOGCS["GCS_Assumed_Geographic_1",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]
...
> ogr2ogr ?s_srs input.prj ?t_srs landsat.prj output.shp input.shp
> 
> When I put the output.shp and input.shp into ArcGIS together, there a 
> shift between two file. Dose anyone know the reason? Is there any 
> problem with my command?

Lijian,

I think the first question is to determine whether ogr2ogr is applying
the expected NAD27 to WGS84 datum correction or not.  What is the apparent
offset?  1m?  100m?  1000's of meters?

If it is 1m it might just be some sort of precision issue.  If it is
10's of meters or 100's of meters then it is likely that the NAD27 to
NAD83 datum shift isn't being applied.  If it is thousands of meters or
more than it is likely some other issue.

One technique to test if datum shift files are being applied is to
set the PROJ_DEBUG environment variable to some value. Then PROJ.4
should report each file it opens.  If it doesn't reporting opening a
file with a name like "conus" then or ntv1.gsb then it isn't even
trying to do the datum shifting.

The input NAD27 geographic coordinate system looks odd.  You might try
altering your command to use:

   ogr2ogr -s_srs NAD27 -t_srs landsat.prj output.shp input.shp

This will provide a less ambiguous declaration that the input
coordinate system in NAD27.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May  8 21:11:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Motion: Adopt RFC 12: Improved File Management
In-Reply-To: <4640E3BF.7090908@pobox.com>
References: <4640E3BF.7090908@pobox.com>
Message-ID: <46411FCB.40301@pobox.com>

Frank Warmerdam wrote:
> I motion to adopt RFC 12: Improved File Management.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
> 
> ---
> 
> This is the GetFileList() / GDALRenameDataset() RFC.
> 
> +1 from me to start.
> 
> Best regards,

Folks,

Doh!  I just realized that my original contract delivery also included a copy
operation.  I would like to withdraw my original motion, and instead move
to adopt a revised version of RFC 12 which includes a Copy operator:

   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement

The copy operator works similarly to rename, but doesn't alter the source.

----

Motion: To adopt the revised RFC 12: Improved File Management.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Tue May  8 21:05:55 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] GMT driver in OGR - How to activate it?
In-Reply-To: <464119B5.6050601@pobox.com>
References: <4640FD41.20006@ualg.pt> <464119B5.6050601@pobox.com>
Message-ID: <46411E73.3020005@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> Hi,
>> I just installed (under Windows) the trunk version where the GMT 
>> driver for OGR exists in
>> ...gdal-svn-trunk-2007.05.08\ogr\ogrsf_frmts\gmt
>>
>> However when I try to use it I get
>> Unable to find driver `GMT'
>> and in fact it is not listed by ogr2ogr --formats
>>
>> How do we "activate" it?
>> Brent Wood told us in one of the GMT lists that it was ready to test/use
>
> Joaquim,
>
> I have confirmed that the windows makefiles omitted an important
> bit.  In particular, -DGMT_ENABLED was not defined in the file
> gdal/ogr/ogrsf_frmts/generic/makefile.vc so the driver wasn't
> being registered by default.
>
> I have committed a fix. I'd suggest you "svn update" and do a
> "nmake /f makefile.vc clean" and "nmake /f makefile.vc" to rebuild.

Frank,
Thanks, its working now.

One little thing about this driver (well it applies to other ascii 
format as well)
In GMT we have the possibility to select the printing format on the 
command line
(for example, --D_FORMAT=%.1f)
I noticed that figures are being written with 11 decimal places. This 
makes files
grow by a significant amount which will be particularly noticeable with 
big files.
So I guess the question is, isn't it desirable to implement a similar 
mechanism
within OGR ascii formats? Or am I being too picky?

Joaquim Luis


From warmerdam at pobox.com  Tue May  8 22:32:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] GMT driver in OGR - How to activate it?
In-Reply-To: <46411E73.3020005@ualg.pt>
References: <4640FD41.20006@ualg.pt> <464119B5.6050601@pobox.com>
	<46411E73.3020005@ualg.pt>
Message-ID: <464132B3.6090803@pobox.com>

Joaquim Luis wrote:
> One little thing about this driver (well it applies to other ascii 
> format as well)
> In GMT we have the possibility to select the printing format on the 
> command line
> (for example, --D_FORMAT=%.1f)
> I noticed that figures are being written with 11 decimal places. This 
> makes files
> grow by a significant amount which will be particularly noticeable with 
> big files.
> So I guess the question is, isn't it desirable to implement a similar 
> mechanism
> within OGR ascii formats? Or am I being too picky?

Joaquim,

I'd be willing to implement such a feature if there is significant
interest in it, but I'd rather see it held as one of several things
to do on a second pass through the driver since it is just an optimization.

Currently the driver uses the same formatting function used for forming
WKT geometries, which has some logic manage precision.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed May  9 03:03:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Motion: Adopt RFC 12: Improved File Management
In-Reply-To: <46411FCB.40301@pobox.com>
References: <4640E3BF.7090908@pobox.com> <46411FCB.40301@pobox.com>
Message-ID: <f3b73b7d0705090003m24abfde4m352748ab54562588@mail.gmail.com>

I'm +1 to this proposal.

Best regards,

Tamas


2007/5/9, Frank Warmerdam <warmerdam@pobox.com>:
> Frank Warmerdam wrote:
> > I motion to adopt RFC 12: Improved File Management.
> >
> >   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
> >
> > ---
> >
> > This is the GetFileList() / GDALRenameDataset() RFC.
> >
> > +1 from me to start.
> >
> > Best regards,
>
> Folks,
>
> Doh!  I just realized that my original contract delivery also included a copy
> operation.  I would like to withdraw my original motion, and instead move
> to adopt a revised version of RFC 12 which includes a Copy operator:
>
>    http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
>
> The copy operator works similarly to rename, but doesn't alter the source.
>
> ----
>
> Motion: To adopt the revised RFC 12: Improved File Management.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From monshi at home.se  Wed May  9 03:24:32 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <4640A15F.1060509@pobox.com>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
Message-ID: <f1rsvl$g07$1@sea.gmane.org>

Frank Warmerdam skrev:
> Tomas R wrote:
>> What I guess I miss is how to set up the paths and so between/to the 
>> different data files.
>> GDAL is located in FWTools\bin (on the PATH)
>> EPSG-catalouge in FWTools\Data (also on the PATH) and also copied to 
>> the  VSE project.
>> But how SHOULD it be? I stumble in darkness...
> 
> Tomas,
> 
> I think what you need to do is call Gdal.PushFinderLocation()
> with the path to the GDAL data directory as the argument.
> 
> When applications are run from within the FWTools Shell this is
> accomplished via an environment variable (GDAL_DATA), but freestanding
> applications can call CPLPushFinderLocation() which in the csharp
> bindings is (I believe) known as Gdal.PushFinderLocation().
> 
> Best regards,
To perhaps make things a bit clearer:
I use GDAL for C# found in the distribution with FWTools. It works like 
a charm when using WKT-strings for setting up the SpatialReferences, as 
long as I get the strings correct. My environment is WinXP and Visual 
Studio Express 2005.

I have a small stand-alone test application where I check how GDAL works 
and try new ways to do things. This one compiles to a single executable. 
When I try the EPSG-codes they work if I copy the data-files (all the 
csv and others) to the root of the project in VSE. When compiled this 
gives that the data-files are in the same folder as the executable and 
the depending C#-DLLs.
But I can't make it work if the data-files are on any other location, on 
any other path!
I try with
GDAL.gdal.SetConfigOption("GDAL_DATA",@"C:\Program\FWTools1.2.2\data\");
and
GDAL.gdal.PushFinderLocation(@"C:\Program\FWTools1.2.2\data\");
but no success. Is the paths badly formed? Are more paths needed?

The goal is to use the EPSG-method in my main-application, a dll which 
is plugged in to another software. There I can't get it work in anyway, 
I have tried the same approach of copying the data-files to no luck.

What do I miss? How do I properly set up the path to the data-files? Do 
I miss some initialization command? Can I query GDAL and check the setup 
or the available data-files?

Yours
Tomas


From monshi at home.se  Wed May  9 03:51:55 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1rsvl$g07$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
	<f1rsvl$g07$1@sea.gmane.org>
Message-ID: <f1ruj1$kre$1@sea.gmane.org>

I add to previous posts  a try with FileMon.

I start with calling gdal.PusFinderLocation and gdal.SetConfigOption, I 
verify with gdal.GetConfigOtion that the path is set correct but when I 
try setting up a SpatialReference the path I have set is completely ignored.
A bug in C# implementation or do I miss something vital?

The path found with FileMon is, for example:

GdalTest1.vshos:2028	OPEN	D:\Documents and Settings\Tomas\Mina 
dokument\Visual Studio 
2005\Projects\GdalTest1\GdalTest1\bin\Debug\csv\horiz_cs.csv	PATH NOT 
FOUND	Options: Open  Access: Read
	
(the path should bee C:\Program\FWTools1.2.2\data\)

Perhaps I should skip EPSG completely but it seems to bee such nice and 
simple approach! And I don't like to leave things that don't work, but 
should work, behind me!

Please
help
/Tomas

Tomas R skrev:

> To perhaps make things a bit clearer:
> I use GDAL for C# found in the distribution with FWTools. It works like 
> a charm when using WKT-strings for setting up the SpatialReferences, as 
> long as I get the strings correct. My environment is WinXP and Visual 
> Studio Express 2005.
> 
> I have a small stand-alone test application where I check how GDAL works 
> and try new ways to do things. This one compiles to a single executable. 
> When I try the EPSG-codes they work if I copy the data-files (all the 
> csv and others) to the root of the project in VSE. When compiled this 
> gives that the data-files are in the same folder as the executable and 
> the depending C#-DLLs.
> But I can't make it work if the data-files are on any other location, on 
> any other path!
> I try with
> GDAL.gdal.SetConfigOption("GDAL_DATA",@"C:\Program\FWTools1.2.2\data\");
> and
> GDAL.gdal.PushFinderLocation(@"C:\Program\FWTools1.2.2\data\");
> but no success. Is the paths badly formed? Are more paths needed?
> 
> The goal is to use the EPSG-method in my main-application, a dll which 
> is plugged in to another software. There I can't get it work in anyway, 
> I have tried the same approach of copying the data-files to no luck.
> 
> What do I miss? How do I properly set up the path to the data-files? Do 
> I miss some initialization command? Can I query GDAL and check the setup 
> or the available data-files?
> 
> Yours
> Tomas


From szekerest at gmail.com  Wed May  9 04:40:25 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1ruj1$kre$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
	<f1rsvl$g07$1@sea.gmane.org> <f1ruj1$kre$1@sea.gmane.org>
Message-ID: <f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>

Tomas,

Thank you for the detailed analysis of the problem. I'm working on
this issue and will notify you if I have further information. In the
meantime I would suggest to submit a ticket including the example
code.

http://trac.osgeo.org/gdal/newticket

Best regards,

Tamas Szekeres


2007/5/9, Tomas R <monshi@home.se>:
> I add to previous posts  a try with FileMon.
>
> I start with calling gdal.PusFinderLocation and gdal.SetConfigOption, I
> verify with gdal.GetConfigOtion that the path is set correct but when I
> try setting up a SpatialReference the path I have set is completely ignored.
> A bug in C# implementation or do I miss something vital?
>
> The path found with FileMon is, for example:
>
> GdalTest1.vshos:2028    OPEN    D:\Documents and Settings\Tomas\Mina
> dokument\Visual Studio
> 2005\Projects\GdalTest1\GdalTest1\bin\Debug\csv\horiz_cs.csv    PATH NOT
> FOUND   Options: Open  Access: Read
>
> (the path should bee C:\Program\FWTools1.2.2\data\)
>
> Perhaps I should skip EPSG completely but it seems to bee such nice and
> simple approach! And I don't like to leave things that don't work, but
> should work, behind me!
>
> Please
> help
> /Tomas
>
> Tomas R skrev:
>
> > To perhaps make things a bit clearer:
> > I use GDAL for C# found in the distribution with FWTools. It works like
> > a charm when using WKT-strings for setting up the SpatialReferences, as
> > long as I get the strings correct. My environment is WinXP and Visual
> > Studio Express 2005.
> >
> > I have a small stand-alone test application where I check how GDAL works
> > and try new ways to do things. This one compiles to a single executable.
> > When I try the EPSG-codes they work if I copy the data-files (all the
> > csv and others) to the root of the project in VSE. When compiled this
> > gives that the data-files are in the same folder as the executable and
> > the depending C#-DLLs.
> > But I can't make it work if the data-files are on any other location, on
> > any other path!
> > I try with
> > GDAL.gdal.SetConfigOption("GDAL_DATA",@"C:\Program\FWTools1.2.2\data\");
> > and
> > GDAL.gdal.PushFinderLocation(@"C:\Program\FWTools1.2.2\data\");
> > but no success. Is the paths badly formed? Are more paths needed?
> >
> > The goal is to use the EPSG-method in my main-application, a dll which
> > is plugged in to another software. There I can't get it work in anyway,
> > I have tried the same approach of copying the data-files to no luck.
> >
> > What do I miss? How do I properly set up the path to the data-files? Do
> > I miss some initialization command? Can I query GDAL and check the setup
> > or the available data-files?
> >
> > Yours
> > Tomas
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From monshi at home.se  Wed May  9 05:26:55 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
Message-ID: <f1s453$7tc$1@sea.gmane.org>

Tamas Szekeres skrev:
> Tomas,
> 
> Thank you for the detailed analysis of the problem. I'm working on
> this issue and will notify you if I have further information. In the
> meantime I would suggest to submit a ticket including the example
> code.
> 
> http://trac.osgeo.org/gdal/newticket
> 
> Best regards,
> 
> Tamas Szekeres
> 
> 
Ok, done that. Included as specific info as I could.

You should be able to reproduce it.

Thanks
Tomas


From dmorissette at mapgears.com  Wed May  9 10:26:31 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Motion: Adopt RFC 12: Improved File Management
In-Reply-To: <46411FCB.40301@pobox.com>
References: <4640E3BF.7090908@pobox.com> <46411FCB.40301@pobox.com>
Message-ID: <4641DA17.9080504@mapgears.com>

Frank Warmerdam wrote:
> Doh!  I just realized that my original contract delivery also included a 
> copy
> operation.  I would like to withdraw my original motion, and instead move
> to adopt a revised version of RFC 12 which includes a Copy operator:
> 
>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
> 
> The copy operator works similarly to rename, but doesn't alter the source.
> 


Since the copy function is called pfnCopyFiles(), should we call the 
rename function pfnMoveFiles() instead of pfnRename(), just for consistency?

Actually, at the higher level I see that you have GDALCopyDatasetFiles() 
and GDALRenameDataset() ... um ... why the "Files" suffix in one case 
and not the other?

> ----
> 
> Motion: To adopt the revised RFC 12: Improved File Management.
> 

+1, with or without changes to the names above.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed May  9 10:52:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Motion: Adopt RFC 12: Improved File Management
In-Reply-To: <4641DA17.9080504@mapgears.com>
References: <4640E3BF.7090908@pobox.com> <46411FCB.40301@pobox.com>
	<4641DA17.9080504@mapgears.com>
Message-ID: <4641E042.4090102@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>> Doh!  I just realized that my original contract delivery also included 
>> a copy
>> operation.  I would like to withdraw my original motion, and instead move
>> to adopt a revised version of RFC 12 which includes a Copy operator:
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement
>>
>> The copy operator works similarly to rename, but doesn't alter the 
>> source.
>>
> 
> 
> Since the copy function is called pfnCopyFiles(), should we call the 
> rename function pfnMoveFiles() instead of pfnRename(), just for 
> consistency?
> 
> Actually, at the higher level I see that you have GDALCopyDatasetFiles() 
> and GDALRenameDataset() ... um ... why the "Files" suffix in one case 
> and not the other?

Daniel,

I added the word Files to the Copy operation to try and clarify the
distinction between it and the CreateCopy() method which is a "data
model oriented" copy rather than a literal file copy.

I would agree that it is peculiar that rename and copy are not similarly
named in this regard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May  9 11:00:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Client Specific Branch
Message-ID: <4641E1F2.6040403@pobox.com>

Folks,

Would anyone object to my creating a client specific branch in the GDAL
Subversion?  I have a client who needs 1.4 branch, but with a bunch of new
features retrofit back.  I don't want to pollute the 1.4 branch, but I'd
also like the "order" of subversion for this work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From lijian.shi at und.nodak.edu  Wed May  9 11:07:19 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] problem abotu reprojection with ogr2ogr
In-Reply-To: <46411B53.70101@pobox.com>
Message-ID: <0JHS00BID4L6VI20@mailmx1.und.nodak.edu>

Hi, Frank,

Thank you very much for your information. I tried the command you suggested
but there is still a 25 meter shift.

I transformed the projection with ArcGIS and got good result without shift. 

Best regards,

Lijian

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, May 08, 2007 7:53 PM
To: Lijian Shi
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] problem abotu reprojection with ogr2ogr

Lijian Shi wrote:
> Hi, everyone,
> 
>  
> 
> I have a shp file and landsat data of the same field, but these data's 
> projections are different. The projection information of shp file is
below:
> 
>  
> 
>
GEOGCS["GCS_Assumed_Geographic_1",DATUM["D_North_American_1927",SPHEROID["Cl
arke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0
174532925199433]]
...
> ogr2ogr -s_srs input.prj -t_srs landsat.prj output.shp input.shp
> 
> When I put the output.shp and input.shp into ArcGIS together, there a 
> shift between two file. Dose anyone know the reason? Is there any 
> problem with my command?

Lijian,

I think the first question is to determine whether ogr2ogr is applying
the expected NAD27 to WGS84 datum correction or not.  What is the apparent
offset?  1m?  100m?  1000's of meters?

If it is 1m it might just be some sort of precision issue.  If it is
10's of meters or 100's of meters then it is likely that the NAD27 to
NAD83 datum shift isn't being applied.  If it is thousands of meters or
more than it is likely some other issue.

One technique to test if datum shift files are being applied is to
set the PROJ_DEBUG environment variable to some value. Then PROJ.4
should report each file it opens.  If it doesn't reporting opening a
file with a name like "conus" then or ntv1.gsb then it isn't even
trying to do the datum shifting.

The input NAD27 geographic coordinate system looks odd.  You might try
altering your command to use:

   ogr2ogr -s_srs NAD27 -t_srs landsat.prj output.shp input.shp

This will provide a less ambiguous declaration that the input
coordinate system in NAD27.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed May  9 11:18:32 2007
From: mateusz at loskot.net (mateusz@loskot.net)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Client Specific Branch
In-Reply-To: <4641E1F2.6040403@pobox.com>
References: <4641E1F2.6040403@pobox.com>
Message-ID: <4641E648.2050209@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> Would anyone object to my creating a client specific branch in the GDAL
> Subversion?  I have a client who needs 1.4 branch, but with a bunch of new
> features retrofit back.  I don't want to pollute the 1.4 branch, but I'd
> also like the "order" of subversion for this work.

I do not.
I would call it a good practice :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From monshi at home.se  Wed May  9 11:37:47 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1s453$7tc$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org>
Message-ID: <f1spsg$qh4$1@sea.gmane.org>

Tomas R skrev:
> Tamas Szekeres skrev:
>> Tomas,
>>
>> Thank you for the detailed analysis of the problem. I'm working on
>> this issue and will notify you if I have further information. In the
>> meantime I would suggest to submit a ticket including the example
>> code.
>>
>> http://trac.osgeo.org/gdal/newticket
>>
>> Best regards,
>>
>> Tamas Szekeres
>>
>>
> Ok, done that. Included as specific info as I could.
> 
> You should be able to reproduce it.
> 
> Thanks
> Tomas
For those interested the ticket number is 1621. Just click the link to 
read the ticket:
http://trac.osgeo.org/gdal/ticket/1621

Hope this will be solved sometime soon. I have other things to attack in 
my code so just knowing this is under review is, for now, good enough 
for me.

/Tomas


From mitchelljj98 at gmail.com  Wed May  9 11:42:43 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdalinfo -mm
Message-ID: <fa2ac0580705090842t19a426d6u3d491d294f20a905@mail.gmail.com>

Hi,

I ran gdalwarp in order to remap the 0,0,0 pixels to 0,0,1 by using
gdalwarp.exe -srcnodata 0 0 0 -dstnodata 0 0 1.  After running gdalwarp -mm
it still has the min as being 0.000 even though I know that the pixels were
changed by gdalwarp but why does dgalinfo still have the min value as
0.000for all 3 colors?  Gdalinfo dump below:

Driver: GTiff/GeoTIFF
Size is 5446, 4648
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-106.638707850921820,31.877447242680692)
Pixel Size = (0.000002954403722,-0.000002954403722)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-106.6387079,  31.8774472) (106d38'19.35"W, 31d52'38.81"N)
Lower Left  (-106.6387079,  31.8637152) (106d38'19.35"W, 31d51'49.37"N)
Upper Right (-106.6226182,  31.8774472) (106d37'21.43"W, 31d52'38.81"N)
Lower Right (-106.6226182,  31.8637152) (106d37'21.43"W, 31d51'49.37"N)
Center      (-106.6306630,  31.8705812) (106d37'50.39"W, 31d52'14.09"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
    Computed Min/Max=0.000,255.000
  NoData Value=1
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
    Computed Min/Max=0.000,255.000
  NoData Value=1
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
    Computed Min/Max=0.000,255.000
  NoData Value=1



Thanks,
-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070509/ba8b6945/attachment.html
From nate at deltateck.com  Wed May  9 12:18:59 2007
From: nate at deltateck.com (Nate Jennings)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] follow up to my previous question (GDAL install with
	Python 2.4 on windows XP)
Message-ID: <4f44d320705090918y4761ed31pbe3b2a2f721ab9a8@mail.gmail.com>

My previous question was:

I loaded gdal-python-13.win32-py2.4.exe (this came from UrbanSim download
page).
I have Python 2.4 from ActiveState
I have numpy-1.0.2.win32-py2.4.exe installed
I have PIL 1.1.6 installed

Once I installed the gdal, I was testing if I could load an image
(multispectral TIF file into a numpy array).

I received the message back when I did the following:

AttributeError: 'module' object has no attribute 'Open'

I doulbe checked that I had the various modules and that I had the _gdal.pyd
in my DLLs directory and there was a __init__.py in my site-packages\gdal
directory.

I also tried running other type of functions like gdal.AllRegister(), etc.
and I received the same Error as above.

I am trying to determine if I did anything incorrectly during the install or
how I might go about fixing the problem and if anyone has had a similar
problem.

Thanks for any assistance.

Nate



-- 
http://www.jenningsplanet.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070509/a47568e9/attachment.html
From Chris.Barker at noaa.gov  Wed May  9 12:23:08 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Read image file to Numpy, then output to image
In-Reply-To: <4f44d320705081528i12a1c135lcac204dbbf7da619@mail.gmail.com>
References: <4f44d320705081528i12a1c135lcac204dbbf7da619@mail.gmail.com>
Message-ID: <4641F56C.7020901@noaa.gov>

Nate Jennings wrote:
>  >From other posts in other mail lists, I have been encouraged to look 
> at gdal for loading a multi-band image file into numpy, process it, then 
> write it out to an image format.

That may have been me ;-)


> img = gdal.gdal.Open('c:\\nate\\remote_sensing\\pyth_img_test.tif', 
> GA_ReadOnly)
> AttributeError: 'module' object has no attribute 'gdal'

you've got an extra "gdal" in there:

img = gdal.Open(.....

> if 
> I am having difficulty with loading libraries, having to change path 
> variables, etc, then this is too much for the novie Remote Sensing 
> student.

Once you've got it figured out, you should be able make it as simple as 
running some installers. Or maybe you can py2exe an app, and really make 
it easy.

   I am not into compiling my own libraries and will be pushing
> my programming limits with writing C++, binding python to c++ code, 
> etc.

I'm guessing you can do a lot of what you want without using C++.

I got a little lost in your explanation of what you really need, but 
we'll certainly help with how to accomplish specific tasks.

Try the above, and see how far you get.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Wed May  9 13:35:48 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Read image file to Numpy, then output to image
In-Reply-To: <4f44d320705090933j4d69392bw28f33ae466128c65@mail.gmail.com>
References: <4f44d320705081528i12a1c135lcac204dbbf7da619@mail.gmail.com>
	<4641F56C.7020901@noaa.gov>
	<4f44d320705090933j4d69392bw28f33ae466128c65@mail.gmail.com>
Message-ID: <46420674.7070508@noaa.gov>

Nate Jennings wrote:
> I did that too.  img = gdal.Open... with the same error.  I saw various 
> forms of the open on different websites.
> 
> I also tried gdal.RegisterAll() with the same error.  It seems like I am 
> not able to access any of the functions within gdal.  I just sent 
> another post to Gdal-dev with a refined comment.  If this is the case, I 
> am unsure what I need to do to either uninstall, re-install or where to 
> look to fix the problem.  I have the _gdal.pyd in the DLL directory and 
> I have a __init__.py in my site-packages\gdal directory.  I am able to 
> do the import gdal, but writing any code to use any of the functions 
> within gdal seem to be unaccessible.

It looks like something is odd in your install. I haven't got it set up 
on Windows, so I don't know what may have happened, but:

1) It sounds like "import gdal" works. That's a good start.

2) Your error: "AttributeError: 'module' object has no attribute 'gdal'" 
means that python isn't finding that function, so it has nothing to do 
with registering drivers or anything. I'd guess you have an incomplete 
install somehow.

3) try:

 >>> import gdal
 >>> print dir(gdal).

You should get a LOT of stuff, including Open(). If you want to make it 
a bit easier to see what you've got:

 >>> for i in dir(gdal):
...    print i

Let us know what you get, and maybe we can help.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Wed May  9 14:03:58 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Read image file to Numpy, then output to image
In-Reply-To: <4f44d320705091040g9848c9bsfe547b2f7432a291@mail.gmail.com>
References: <4f44d320705081528i12a1c135lcac204dbbf7da619@mail.gmail.com>
	<4641F56C.7020901@noaa.gov>
	<4f44d320705090933j4d69392bw28f33ae466128c65@mail.gmail.com>
	<46420674.7070508@noaa.gov>
	<4f44d320705091040g9848c9bsfe547b2f7432a291@mail.gmail.com>
Message-ID: <46420D0E.5070906@noaa.gov>

Nate Jennings wrote:
> Thank you.  After the print, I get:
> 
> ['__builtins__', '__doc__', '__file__', '__name__', '__path__']
> 
> This is it.

OK. it looks like you got the gdal package, but nothing it it. Darn.

> If you have a recommended gdal install (.exe) I might try, 
> then I will do this.

Sorry I'm Windows-clueless at the moment -- can someone help this guy?

By the way, it looks like you're only replying to me -- which is the 
default for the mailing list. I'd make sure this gets to the list -- 
someone there can be fr more helpful than me.

-CHB


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Wed May  9 14:36:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Motion: Add Tamas Szekeres to GDAL PSC
Message-ID: <464214AB.4050001@pobox.com>

Motion: Add Tamas Szekeres to GDAL PSC

---

Tamas has been a contributor to GDAL/OGR core capabilities (RFC 6: Geometry
and Feature Style as OGR Special Fields), to the csharp bindings and to
discussions of RFCs on the mailing list.   He has demonstrated a long term
commitment to GDAL/OGR (and MapServer) and I feel he would be an asset to the
GDAL PSC.

Currently the GDAL PSC is only 4 people, so I also think growing it is useful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed May  9 14:48:06 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Motion: Add Tamas Szekeres to GDAL PSC
In-Reply-To: <464214AB.4050001@pobox.com>
References: <464214AB.4050001@pobox.com>
Message-ID: <46421766.50404@mapgears.com>

+1

Daniel



Frank Warmerdam wrote:
> Motion: Add Tamas Szekeres to GDAL PSC
> 
> ---
> 
> Tamas has been a contributor to GDAL/OGR core capabilities (RFC 6: Geometry
> and Feature Style as OGR Special Fields), to the csharp bindings and to
> discussions of RFCs on the mailing list.   He has demonstrated a long term
> commitment to GDAL/OGR (and MapServer) and I feel he would be an asset 
> to the
> GDAL PSC.
> 
> Currently the GDAL PSC is only 4 people, so I also think growing it is 
> useful.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From hobu.inc at gmail.com  Wed May  9 15:08:54 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Motion: Add Tamas Szekeres to GDAL PSC
In-Reply-To: <464214AB.4050001@pobox.com>
References: <464214AB.4050001@pobox.com>
Message-ID: <08EA6B5D-1BF5-4175-8543-9220244D1299@gmail.com>

+1

On May 9, 2007, at 1:36 PM, Frank Warmerdam wrote:

> Motion: Add Tamas Szekeres to GDAL PSC
>
> ---
>
> Tamas has been a contributor to GDAL/OGR core capabilities (RFC 6:  
> Geometry
> and Feature Style as OGR Special Fields), to the csharp bindings  
> and to
> discussions of RFCs on the mailing list.   He has demonstrated a  
> long term
> commitment to GDAL/OGR (and MapServer) and I feel he would be an  
> asset to the
> GDAL PSC.
>
> Currently the GDAL PSC is only 4 people, so I also think growing it  
> is useful.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From tutey at o2.pl  Wed May  9 15:35:34 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
Message-ID: <46422286.1050300@o2.pl>

Hi

I have noticed that analogous options settings in r.out.gdal,
gdal_translate and gdalwarp result in GeoTIFF's of significantly
different sizes. Sorry for crossposting, but I have no idea if it is
and issue in GDAL or GRASS.

Take the following example, based on GRASS spearfish60 location, raster
elevation.dted:

$ r.out.gdal in=elevation.dted format=GTiff type=Byte out=grass_copy.tif

	grass_copy.tif = 36965 bytes

$ gdal_translate grass_copy.tif grass_trans_copy.tif

	grass_trans_copy.tif = 29153 bytes

$ gdalwarp grass_copy.tif grass_warp_copy.tif

	grass_warp_copy.tif = 36336 bytes

Each command does only a raw copy of input. Sizes of the r.out.gdal and
gdalwarp outputs are similar, but the gdal_translate output is 1/6
smaller. Is that normal?



Another example, with LZW compression:

$ r.out.gdal in=elevation.dted format=GTiff type=Byte out=grass_lzw.tif
createopt=COMPRESS=LZW

	grass_lzw.tif = 23497 bytes

$ gdal_translate -co "COMPRESS=LZW" grass_copy.tif grass_trans_lzw.tif

	grass_trans_lzw.tif =  21601 bytes

$ gdalwarp -co "COMPRESS=LZW" grass_copy.tif grass_warp_lzw.tif

	grass_warp_lzw.tif = 22868 bytes

Differences between the 3 tiffs here are not huge, yet still
significant. Is that OK? I thought each should be more less the same.



The only difference in the gdalinfo output of each of the 3 tiffs in
either the first or second example is 7 lines of metadata, which are
present in r.out.gdal and gdal_translate output while missing in
gdalwarp output. However, it is only 397 bytes, which is not enough to
explain kilobytes of differences.

Maciek


From dmorissette at mapgears.com  Wed May  9 15:35:46 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Client Specific Branch
In-Reply-To: <4641E648.2050209@loskot.net>
References: <4641E1F2.6040403@pobox.com> <4641E648.2050209@loskot.net>
Message-ID: <46422292.9070909@mapgears.com>

mateusz@loskot.net wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> Would anyone object to my creating a client specific branch in the GDAL
>> Subversion?  I have a client who needs 1.4 branch, but with a bunch of 
>> new
>> features retrofit back.  I don't want to pollute the 1.4 branch, but I'd
>> also like the "order" of subversion for this work.
> 
> I do not.
> I would call it a good practice :-)
> 

If that's good practice then that works for me too. :)

-- 
Daniel Morissette
http://www.mapgears.com/

From glynn at gclements.plus.com  Wed May  9 16:24:11 2007
From: glynn at gclements.plus.com (Glynn Clements)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: [GRASS-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46422286.1050300@o2.pl>
References: <46422286.1050300@o2.pl>
Message-ID: <17986.11755.383471.442794@cerise.gclements.plus.com>


Maciej Sieczka wrote:

> Hi
> 
> I have noticed that analogous options settings in r.out.gdal,
> gdal_translate and gdalwarp result in GeoTIFF's of significantly
> different sizes. Sorry for crossposting, but I have no idea if it is
> and issue in GDAL or GRASS.
> 
> Take the following example, based on GRASS spearfish60 location, raster
> elevation.dted:
> 
> $ r.out.gdal in=elevation.dted format=GTiff type=Byte out=grass_copy.tif
> 
> 	grass_copy.tif = 36965 bytes
> 
> $ gdal_translate grass_copy.tif grass_trans_copy.tif
> 
> 	grass_trans_copy.tif = 29153 bytes
> 
> $ gdalwarp grass_copy.tif grass_warp_copy.tif
> 
> 	grass_warp_copy.tif = 36336 bytes
> 
> Each command does only a raw copy of input. Sizes of the r.out.gdal and
> gdalwarp outputs are similar, but the gdal_translate output is 1/6
> smaller. Is that normal?

Analysing the two files with tiffdump, I note:

grass_copy.tif:
StripByteCounts (279) LONG (4) 4<8170 8170 8170 8170>

grass_trans_copy.tif:
StripByteCounts (279) LONG (4) 4<8170 8170 8170 2090>

The difference is 6080 bytes, which is ~3/4 of the 7812 byte
difference between the files. Also:

grass_copy.tif:
34735 (0x87af) SHORT (3) 32<1 1 0 7 1024 0 1 1 1025 0 1 1 1026 34737 33 0 2049 34737 8 33 2054 0 1 9102 ...>
34737 (0x87b1) ASCII (2) 42<UTM Zone 13, Northern He ...>

grass_trans_copy.tif:
34735 (0x87af) SHORT (3) 32<1 1 0 7 1024 0 1 1 1025 0 1 1 1026 34737 21 0 2049 34737 6 21 2054 0 1 9102 ...>
34737 (0x87b1) ASCII (2) 28<NAD27 / UTM zone 13N|NAD ...>

[tag 34735 differs in the 15th field; 33 vs 21; I haven't looked up
the details on that tag, but it's likely to be GeoTIFF.]

-- 
Glynn Clements <glynn@gclements.plus.com>

From tutey at o2.pl  Wed May  9 16:43:44 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46422286.1050300@o2.pl>
References: <46422286.1050300@o2.pl>
Message-ID: <46423280.1040603@o2.pl>

I forgot to write that I'm using the current GRASS 6.3 CVS and GDAL
1.4.0 + CVS 2007-04-08. GDAL was built with internal TIFF and GEOTIFF libs.

Maciek


From szekerest at gmail.com  Wed May  9 18:25:32 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1spsg$qh4$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
	<f1rsvl$g07$1@sea.gmane.org> <f1ruj1$kre$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
Message-ID: <f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>

Tomas,

You'll have to comment out the
CSHARP_STATIC_LINKAGE = YES
in csharp.opt and recompile the C# interface. Using this setting the
csharp dll-s will link against the gdal14.dll so the
PushFinderLocation and ImportFromEPSG will operate on the same global
data. In the future I consider to use this setting as the default
option.

BTW: I would propose to use the latest development version of the C#
related stuff. There were some fundamental changes in the interface
that might cause some changes in the existing code. For more
information see:
http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions

You might also use the binaries of the latest FWTools
http://test.gdal.org/fwtools/FWTools130.exe
and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
compiled version.

Best regards,

Tamas



2007/5/9, Tomas R <monshi@home.se>:
> Tomas R skrev:
> > Tamas Szekeres skrev:
> >> Tomas,
> >>
> >> Thank you for the detailed analysis of the problem. I'm working on
> >> this issue and will notify you if I have further information. In the
> >> meantime I would suggest to submit a ticket including the example
> >> code.
> >>
> >> http://trac.osgeo.org/gdal/newticket
> >>
> >> Best regards,
> >>
> >> Tamas Szekeres
> >>
> >>
> > Ok, done that. Included as specific info as I could.
> >
> > You should be able to reproduce it.
> >
> > Thanks
> > Tomas
> For those interested the ticket number is 1621. Just click the link to
> read the ticket:
> http://trac.osgeo.org/gdal/ticket/1621
>
> Hope this will be solved sometime soon. I have other things to attack in
> my code so just knowing this is under review is, for now, good enough
> for me.
>
> /Tomas
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From bgreene at rapidmap.com.au  Thu May 10 01:59:11 2007
From: bgreene at rapidmap.com.au (Ben Greene)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Dealing with a GeoTiff with incorrect band ColorInterp
	values
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6488571B@rmg-server03.rmg.local>

I have a geotiff I'm testing my C# program with, which has three bands:
Band 1 is ColorInterp.GCI_GrayIndex, and the other two are
ColorInterp.GCI_Undefined.  The three bands are actually meant to be R,
G, B in this particular image.

 

I'm using the command-line gdalwarp to save the file back to disk as
with large datasets I've had problems with OutOfMemoryExceptions when
doing too much processing in memory.

 

I have to take this image and warp it to WGS84 and then extract tiles
out of it to insert into a database, but gdalwarp gives the following
error:

 

ERROR 5: GDALDataset::GetRasterBand(2) - Illegal band #

 

ERROR 5: GDALDataset::GetRasterBand(3) - Illegal band #

 

ERROR 5: panDstBands[1] = 2 ... out of range for dataset.

 

I don't want my program to modify the original image, just in case RGB
isn't the correct interpretation, and don't want to have to copy the
image, fix the ColorInterp values, and then warp it to create a third
copy.

 

Is there an option to force RGB interpretation of bands in a Tiff?  Or
do I have to correct the ColorInterp values?

 

Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070510/849ca9eb/attachment.html
From monshi at home.se  Thu May 10 05:35:06 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
Message-ID: <f1up0f$dda$1@sea.gmane.org>

One problem - where do I find the source-files for the CSharp bindings? 
I have managed to download and compile the source for GDAL but I find no 
  C#-dlls being generated and when I try running the makefile found in 
Swig/Csharp I get an error. Probably because all I've got is a couple of 
makefiles.

/tomas

Tamas Szekeres skrev:
> Tomas,
> 
> You'll have to comment out the
> CSHARP_STATIC_LINKAGE = YES
> in csharp.opt and recompile the C# interface. Using this setting the
> csharp dll-s will link against the gdal14.dll so the
> PushFinderLocation and ImportFromEPSG will operate on the same global
> data. In the future I consider to use this setting as the default
> option.
> 
> BTW: I would propose to use the latest development version of the C#
> related stuff. There were some fundamental changes in the interface
> that might cause some changes in the existing code. For more
> information see:
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> 
> You might also use the binaries of the latest FWTools
> http://test.gdal.org/fwtools/FWTools130.exe
> and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
> compiled version.
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2007/5/9, Tomas R <monshi@home.se>:
>> Tomas R skrev:
>> > Tamas Szekeres skrev:
>> >> Tomas,
>> >>
>> >> Thank you for the detailed analysis of the problem. I'm working on
>> >> this issue and will notify you if I have further information. In the
>> >> meantime I would suggest to submit a ticket including the example
>> >> code.
>> >>
>> >> http://trac.osgeo.org/gdal/newticket
>> >>
>> >> Best regards,
>> >>
>> >> Tamas Szekeres
>> >>
>> >>
>> > Ok, done that. Included as specific info as I could.
>> >
>> > You should be able to reproduce it.
>> >
>> > Thanks
>> > Tomas
>> For those interested the ticket number is 1621. Just click the link to
>> read the ticket:
>> http://trac.osgeo.org/gdal/ticket/1621
>>
>> Hope this will be solved sometime soon. I have other things to attack in
>> my code so just knowing this is under review is, for now, good enough
>> for me.
>>
>> /Tomas
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From monshi at home.se  Thu May 10 07:02:16 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1up0f$dda$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1up0f$dda$1@sea.gmane.org>
Message-ID: <f1uu3s$uot$1@sea.gmane.org>

Problem solved... Found a page on the wiki:
http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile

I now something to play around with, seems the compilation completed 
without errors.

/Tomas

Tomas R skrev:
> One problem - where do I find the source-files for the CSharp bindings? 
> I have managed to download and compile the source for GDAL but I find no 
>  C#-dlls being generated and when I try running the makefile found in 
> Swig/Csharp I get an error. Probably because all I've got is a couple of 
> makefiles.
> 
> /tomas
> 
> Tamas Szekeres skrev:
>> Tomas,
>>
>> You'll have to comment out the
>> CSHARP_STATIC_LINKAGE = YES
>> in csharp.opt and recompile the C# interface. Using this setting the
>> csharp dll-s will link against the gdal14.dll so the
>> PushFinderLocation and ImportFromEPSG will operate on the same global
>> data. In the future I consider to use this setting as the default
>> option.
>>
>> BTW: I would propose to use the latest development version of the C#
>> related stuff. There were some fundamental changes in the interface
>> that might cause some changes in the existing code. For more
>> information see:
>> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>>
>> You might also use the binaries of the latest FWTools
>> http://test.gdal.org/fwtools/FWTools130.exe
>> and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
>> compiled version.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2007/5/9, Tomas R <monshi@home.se>:
>>> Tomas R skrev:
>>> > Tamas Szekeres skrev:
>>> >> Tomas,
>>> >>
>>> >> Thank you for the detailed analysis of the problem. I'm working on
>>> >> this issue and will notify you if I have further information. In the
>>> >> meantime I would suggest to submit a ticket including the example
>>> >> code.
>>> >>
>>> >> http://trac.osgeo.org/gdal/newticket
>>> >>
>>> >> Best regards,
>>> >>
>>> >> Tamas Szekeres
>>> >>
>>> >>
>>> > Ok, done that. Included as specific info as I could.
>>> >
>>> > You should be able to reproduce it.
>>> >
>>> > Thanks
>>> > Tomas
>>> For those interested the ticket number is 1621. Just click the link to
>>> read the ticket:
>>> http://trac.osgeo.org/gdal/ticket/1621
>>>
>>> Hope this will be solved sometime soon. I have other things to attack in
>>> my code so just knowing this is under review is, for now, good enough
>>> for me.
>>>
>>> /Tomas
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>


From monshi at home.se  Thu May 10 09:24:43 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
Message-ID: <f1v6f0$ugf$1@sea.gmane.org>

I thought  I had the issue solved, that I had managed to compile the 
correct C# bindings and so on.

But, sadly no.
What have I got?
FWtools 3.0
Gdal source, from the latest Trunk
Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio Express C++

I manage to compile the whole GDAL-project. I manage to compile C# 
bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE = NO 
but NOT with it commented out.
The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the 
result as would be needed. When I try to set up a SpatialReference with 
an EPSG-code I still get a 6.

With CSHARP_STATIC_LINKAGE  commented out the compilation halts when 
creating gdal_wrap.dll:
> LINK : gdal_wrap.dll not found or not built by the last incremental link; perfor
> ming full link
>    Creating library gdal_wrap.lib and object gdal_wrap.exp
> gdal_wrap.obj : error LNK2019: unresolved external symbol _GDALIdentifyDriver@8
> referenced in function "void * __cdecl IdentifyDriver(char const *,char * *)" (?
> IdentifyDriver@@YAPAXPBDPAPAD@Z)
> gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
> NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio 8\VC\BIN\link.EX
> E"' : return code '0x460'
> Stop.

Why is it never as simple? Do I miss something?

/Tomas


Tamas Szekeres skrev:
> Tomas,
> 
> You'll have to comment out the
> CSHARP_STATIC_LINKAGE = YES
> in csharp.opt and recompile the C# interface. Using this setting the
> csharp dll-s will link against the gdal14.dll so the
> PushFinderLocation and ImportFromEPSG will operate on the same global
> data. In the future I consider to use this setting as the default
> option.
> 
> BTW: I would propose to use the latest development version of the C#
> related stuff. There were some fundamental changes in the interface
> that might cause some changes in the existing code. For more
> information see:
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> 
> You might also use the binaries of the latest FWTools
> http://test.gdal.org/fwtools/FWTools130.exe
> and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
> compiled version.
> 
> Best regards,
> 
> Tamas
> 
> 
> 


From warmerdam at pobox.com  Thu May 10 10:12:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Dealing with a GeoTiff with incorrect band ColorInterp
	values
In-Reply-To: <CFE1D6CAE2D44343BF58E308C1C7EC6488571B@rmg-server03.rmg.local>
References: <CFE1D6CAE2D44343BF58E308C1C7EC6488571B@rmg-server03.rmg.local>
Message-ID: <46432850.4040001@pobox.com>

Ben Greene wrote:
> ERROR 5: GDALDataset::GetRasterBand(2) - Illegal band #
> 
>  
> 
> ERROR 5: GDALDataset::GetRasterBand(3) - Illegal band #
> 
>  
> 
> ERROR 5: panDstBands[1] = 2 ... out of range for dataset.
> 
>  
> 
> I don?t want my program to modify the original image, just in case RGB 
> isn?t the correct interpretation, and don?t want to have to copy the 
> image, fix the ColorInterp values, and then warp it to create a third copy.

Ben,

My understanding is that the core problem is that you are using gdalwarp
and it is failing.  Is that right?  If so, could you provide the gdalinfo
report on the input file, and the exact commandline for gdalwarp that
you are using?

 > Is there an option to force RGB interpretation of bands in a Tiff?  Or
 > do I have to correct the ColorInterp values?

When creating a new TIFF or GeoTIFF file you should be able to use the
PHOTOMETRIC=RGB creation option to force the output file to be marked
as RGB.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dburken at comcast.net  Thu May 10 10:36:53 2007
From: dburken at comcast.net (dburken@comcast.net)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] jjpgdataset.cpp quantization tables
Message-ID: <051020071436.7858.46432E050001A0D800001EB22205886172020A059D9A0D0B@comcast.net>


Hi Frank,

Hey I think there's a typo here (at least the array size), but you should check it, my eyes are going:)

See below,
Dave


I think:

This:
> 
> const static int Q1table[256] = 
> {
>     8,    72,     72,     72,    72,    72,    72,    72,    72,    72,
>     78,    74,     76,    74,    78,    89,    81,    84,    84,    81,
>     89,    106,    93,    94,    99,    94,    93,    106,    129,    111,
>     108,    116,    116,    108,    111,    129,    135,    128,    136,    
>     145,    136,    128,    135,    155,    160,    177,    177,    160,
>     155,    193,    213,    228,    213,    193,    255,    255,    255,    
>     255
> };
> 
Should be this:
> 
> const static int Q1table[64] = 
> {
>    8,    72,  72,  72,  72,  72,  72,  72, // 0 - 7
>    72,   72,  78,  74,  76,  74,  78,  89, // 8 - 15
>    81,   84,  84,  81,  89, 106,  93,  94, // 16 - 23
>    99,   94,  93, 106, 129, 111, 108, 116, // 24 - 31
>    116, 108, 111, 129, 135, 128, 136, 145, // 32 - 39
>    136, 128, 135, 155, 160, 177, 177, 160, // 40 - 47
>    155, 193, 213, 228, 213, 193, 255, 255, // 48 - 55
>    255, 255, 255, 255, 255, 255, 255, 255  // 56 - 63
> };


From warmerdam at pobox.com  Thu May 10 11:15:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] jjpgdataset.cpp quantization tables
In-Reply-To: <051020071436.7858.46432E050001A0D800001EB22205886172020A059D9A0D0B@comcast.net>
References: <051020071436.7858.46432E050001A0D800001EB22205886172020A059D9A0D0B@comcast.net>
Message-ID: <464336FF.6030000@pobox.com>

dburken@comcast.net wrote:
> Hi Frank,
> 
> Hey I think there's a typo here (at least the array size), but you should check it, my eyes are going:)
> 
>
Dave,

Absolutely right.  I have patched in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dburken at comcast.net  Thu May 10 11:26:19 2007
From: dburken at comcast.net (dburken@comcast.net)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] FW: q tables
Message-ID: <051020071526.27849.4643399B000A006500006CC92200761064020A059D9A0D0B@comcast.net>

Hi Frank,

I say your update.  

The size is correct now (64) but your array itself does not contain 64 cells.

Dave

> 
> const static int Q1table[256] = 
> {
>     8,    72,     72,     72,    72,    72,    72,    72,    72,    72,
>     78,    74,     76,    74,    78,    89,    81,    84,    84,    81,
>     89,    106,    93,    94,    99,    94,    93,    106,    129,    111,
>     108,    116,    116,    108,    111,    129,    135,    128,    136,    
>     145,    136,    128,    135,    155,    160,    177,    177,    160,
>     155,    193,    213,    228,    213,    193,    255,    255,    255,    
>     255
> };
> 
> 
> const static int Q1table[64] = 
> {
>    8,    72,  72,  72,  72,  72,  72,  72, // 0 - 7
>    72,   72,  78,  74,  76,  74,  78,  89, // 8 - 15
>    81,   84,  84,  81,  89, 106,  93,  94, // 16 - 23
>    99,   94,  93, 106, 129, 111, 108, 116, // 24 - 31
>    116, 108, 111, 129, 135, 128, 136, 145, // 32 - 39
>    136, 128, 135, 155, 160, 177, 177, 160, // 40 - 47
>    155, 193, 213, 228, 213, 193, 255, 255, // 48 - 55
>    255, 255, 255, 255, 255, 255, 255, 255  // 56 - 63
> };


From warmerdam at pobox.com  Thu May 10 11:46:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] FW: q tables
In-Reply-To: <051020071526.27849.4643399B000A006500006CC92200761064020A059D9A0D0B@comcast.net>
References: <051020071526.27849.4643399B000A006500006CC92200761064020A059D9A0D0B@comcast.net>
Message-ID: <46433E4A.2080609@pobox.com>

dburken@comcast.net wrote:
> Hi Frank,
> 
> I say your update.  
> 
> The size is correct now (64) but your array itself does not contain 64 cells.

Dave,

Good point, I have incorporated your version.  I'm starting to doubt my
cut and paste from the quantization table documents!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dburken at comcast.net  Thu May 10 15:04:38 2007
From: dburken at comcast.net (dburken@comcast.net)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] FW: q tables
Message-ID: <051020071904.18721.46436CC5000693F9000049212200761394020A059D9A0D0B@comcast.net>

Frank,

I kind of checked them, but it will make you  go cross eyed after a while...

I did see that the AC_HUFFVAL and DC_HUFFVAL should have 256 cells and neither one is up to the count.

I needed these though so you saved me a LOT of typing.  So thanks!


Take care,
Dave

  
 -------------- Original message ----------------------
From: Frank Warmerdam <warmerdam@pobox.com>
> dburken@comcast.net wrote:
> > Hi Frank,
> > 
> > I say your update.  
> > 
> > The size is correct now (64) but your array itself does not contain 64 cells.
> 
> Dave,
> 
> Good point, I have incorporated your version.  I'm starting to doubt my
> cut and paste from the quantization table documents!
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 


From szekerest at gmail.com  Thu May 10 17:14:38 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f1v6f0$ugf$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <4640A15F.1060509@pobox.com>
	<f1rsvl$g07$1@sea.gmane.org> <f1ruj1$kre$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
Message-ID: <f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>

Oops!  Some recent changes in gdal have been interfering with this
setting. I've now fixed up the problem in the gdal-trunk and set the
default option to link the C# dll-s dynamically to the gdal libraries.
Please, checkout the latest version and repeat your tests.

It must be noted that after this change the gdal14.dll should be
available to load when running the application or the 'nmake -f
makefile.vc test' target.

Best regards,

Tamas


2007/5/10, Tomas R <monshi@home.se>:
> I thought  I had the issue solved, that I had managed to compile the
> correct C# bindings and so on.
>
> But, sadly no.
> What have I got?
> FWtools 3.0
> Gdal source, from the latest Trunk
> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio Express C++
>
> I manage to compile the whole GDAL-project. I manage to compile C#
> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE = NO
> but NOT with it commented out.
> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
> result as would be needed. When I try to set up a SpatialReference with
> an EPSG-code I still get a 6.
>
> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
> creating gdal_wrap.dll:
> > LINK : gdal_wrap.dll not found or not built by the last incremental link; perfor
> > ming full link
> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
> > gdal_wrap.obj : error LNK2019: unresolved external symbol _GDALIdentifyDriver@8
> > referenced in function "void * __cdecl IdentifyDriver(char const *,char * *)" (?
> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio 8\VC\BIN\link.EX
> > E"' : return code '0x460'
> > Stop.
>
> Why is it never as simple? Do I miss something?
>
> /Tomas
>
>
> Tamas Szekeres skrev:
> > Tomas,
> >
> > You'll have to comment out the
> > CSHARP_STATIC_LINKAGE = YES
> > in csharp.opt and recompile the C# interface. Using this setting the
> > csharp dll-s will link against the gdal14.dll so the
> > PushFinderLocation and ImportFromEPSG will operate on the same global
> > data. In the future I consider to use this setting as the default
> > option.
> >
> > BTW: I would propose to use the latest development version of the C#
> > related stuff. There were some fundamental changes in the interface
> > that might cause some changes in the existing code. For more
> > information see:
> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> >
> > You might also use the binaries of the latest FWTools
> > http://test.gdal.org/fwtools/FWTools130.exe
> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
> > compiled version.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> >
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From nate at deltateck.com  Thu May 10 18:02:10 2007
From: nate at deltateck.com (Nate Jennings)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdal 1.4.1 python 2.4 windows executables
Message-ID: <4f44d320705101502w746ed004ibd9a819900051528@mail.gmail.com>

Maybe I should ask the question like this.

>From my perusing of the threads, various websites, and those who know alot
more about building various exe's from source, is it fair to say that gdal
builds for current versions of Python (i.e. will there be an installable
.exe version of gdal for Python 2.4) are expected to come out soon after new
releases of GDAL?  Does one of the primary developers for GDAL, the FWTools
community, etc do this? and does it get posted here?  Are there typical time
frames for this?

I would like to be able to use the gdal libraries in Python 2.4 for use in
an application I am writing in Python 2.4 under Windows and the current
version of Numpy.  FWTools contains some of this functionality, but alot of
the multi-band processing comes from writing the gdal and numpy (currently
Numeric) python code through the Python Shell from within FWTools (which
uses Python 2.3).  My main hurdle is I am not too savvy with compiling the
gdal libraries from the source, plus it seems like from other contributers
from this site that it is not real straight forward and/or requires a bunch
of other compiling programs to be installed properly.

>From what I read there seems to be alot of good developments to move forward
and be able to incorporate gdal, numpy, and python.  Regarding compiling
from source, I would like to know if there are any detailed understandable
instructions for compiling the gdal for python 2.4 on windows and using open
source compilers through environments like MinGW.  There seems to be some
quirks with this and hence my reluctance to actually take on this task.

I appreciate any feedback, direction, contacts, sources, etc.

Thank you,
Nate


-- 
http://www.jenningsplanet.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070510/07ef3aaa/attachment.html
From warmerdam at pobox.com  Thu May 10 19:43:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdal 1.4.1 python 2.4 windows executables
In-Reply-To: <4f44d320705101502w746ed004ibd9a819900051528@mail.gmail.com>
References: <4f44d320705101502w746ed004ibd9a819900051528@mail.gmail.com>
Message-ID: <4643AE0D.4000806@pobox.com>

Nate Jennings wrote:
> Maybe I should ask the question like this.
> 
>  >From my perusing of the threads, various websites, and those who know 
> alot more about building various exe's from source, is it fair to say 
> that gdal builds for current versions of Python (i.e. will there be an 
> installable .exe version of gdal for Python 2.4) are expected to come 
> out soon after new releases of GDAL?  Does one of the primary developers 
> for GDAL, the FWTools community, etc do this? and does it get posted 
> here?  Are there typical time frames for this?

Nate,

Briefly responding:

  1) Previously the GDAL project did *not* produce binaries to correspond with
     releases.  We are starting work on this, but it does not currently
     include builds with Python.

  2) FWTools is not release oriented - it is tied to the development trunk, and
     is only produced for one Python version - usually not the most recent. It
     is not a product of the GDAL project, but rather a thing of my own.  With
     very little time to work on it, I am generally not very receptive to "won't
     you build it with my version of python/c++ compiler/etc".

  3) I think Mateusz has been recently looking into building GDAL for win32
     with Python 2.4.  Perhaps he will provide a status update, and this will
     make it into the wiki for others who want to build it.

  4) Howard has indicate an interest in producing a python-gdal package
     installer for win32.  This might be for Python 2.4, but will only
     happen as his time and interest permit.

I am interested in making "core binaries" for win32 part of the funded
GDAL maintainer workload, but it isn't at all clear that this will include
Python packages.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu May 10 21:24:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Motion: Adopt RFC 12: Improved File Management
In-Reply-To: <46411FCB.40301@pobox.com>
References: <4640E3BF.7090908@pobox.com> <46411FCB.40301@pobox.com>
Message-ID: <4643C5EB.1090409@pobox.com>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> I motion to adopt RFC 12: Improved File Management.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc12_filemanagement

Folks,

I declare RFC 12: Improved File Managed passed with +1 support from
Daniel Morissette and myself.  I shall commit this evening.  Plan to do
a clean build if you are working off trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From monshi at home.se  Fri May 11 03:46:33 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
Message-ID: <f2170u$p79$1@sea.gmane.org>

Ok Tamas, it kind of works...

I followed the steps you have described for me and those I found on the 
Wiki:
1: Downloaded latest trunk
2: Compiled  GDAL (how many of the steps must I do? All? Or just the 
first, I guess just the first)
3: Created the C# interface and compiled it.
4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
5: Added the new CSharp-dlls to my C# project.
6: Checked that the system path contains FWTools1.3.0\bin folder
If I try running my project after those steps I get an exception when 
trying to call GDAL, whatever *_wrap.dll that is called is not found/not 
possible to load.

When I add the wrap-dlls to the "root" of my C#-project, no apparent change.
When I copy the GDAL-dll to my projects root and include it in the 
build, together with the wrap-dlls, it works!
But is this how it now is supposed to be? I guess I with this setup can 
use GDALs basic function but all the functions which rely on other libs 
(which I have not tested/any knowledge of yet) are not available? For 
example reading and writing of GeoTiff images? (That is possible via the 
C#-bindings?)
For now I think I'm content with coordinate translation but I think I 
want to try how efficient GDAL is to use when importing maps of 
different formats. It would be nice to be able to rip directly from 
GeoTiff (or RIK) with GDAL.

Perhaps a bit OT but:
In basic it boils down to that I have now not a clear idea how to 
distribute the plugin I am building. Demand that FWTools are installed 
or include the nessecary dlls? O well, there is time left to think about 
that.

/Tomas

Tamas Szekeres skrev:
> Oops!  Some recent changes in gdal have been interfering with this
> setting. I've now fixed up the problem in the gdal-trunk and set the
> default option to link the C# dll-s dynamically to the gdal libraries.
> Please, checkout the latest version and repeat your tests.
> 
> It must be noted that after this change the gdal14.dll should be
> available to load when running the application or the 'nmake -f
> makefile.vc test' target.
> 
> Best regards,
> 
> Tamas
> 
> 
> 2007/5/10, Tomas R <monshi@home.se>:
>> I thought  I had the issue solved, that I had managed to compile the
>> correct C# bindings and so on.
>>
>> But, sadly no.
>> What have I got?
>> FWtools 3.0
>> Gdal source, from the latest Trunk
>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio Express C++
>>
>> I manage to compile the whole GDAL-project. I manage to compile C#
>> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE = NO
>> but NOT with it commented out.
>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
>> result as would be needed. When I try to set up a SpatialReference with
>> an EPSG-code I still get a 6.
>>
>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
>> creating gdal_wrap.dll:
>> > LINK : gdal_wrap.dll not found or not built by the last incremental 
>> link; perfor
>> > ming full link
>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
>> > gdal_wrap.obj : error LNK2019: unresolved external symbol 
>> _GDALIdentifyDriver@8
>> > referenced in function "void * __cdecl IdentifyDriver(char const 
>> *,char * *)" (?
>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio 
>> 8\VC\BIN\link.EX
>> > E"' : return code '0x460'
>> > Stop.
>>
>> Why is it never as simple? Do I miss something?
>>
>> /Tomas
>>
>>
>> Tamas Szekeres skrev:
>> > Tomas,
>> >
>> > You'll have to comment out the
>> > CSHARP_STATIC_LINKAGE = YES
>> > in csharp.opt and recompile the C# interface. Using this setting the
>> > csharp dll-s will link against the gdal14.dll so the
>> > PushFinderLocation and ImportFromEPSG will operate on the same global
>> > data. In the future I consider to use this setting as the default
>> > option.
>> >
>> > BTW: I would propose to use the latest development version of the C#
>> > related stuff. There were some fundamental changes in the interface
>> > that might cause some changes in the existing code. For more
>> > information see:
>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>> >
>> > You might also use the binaries of the latest FWTools
>> > http://test.gdal.org/fwtools/FWTools130.exe
>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
>> > compiled version.
>> >
>> > Best regards,
>> >
>> > Tamas
>> >
>> >
>> >
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From monshi at home.se  Fri May 11 04:43:42 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f2170u$p79$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org>
Message-ID: <f21ac3$85t$1@sea.gmane.org>

Again I was a bit to quick when reporting success.
Yes, now I am able to create a SpatialReference from an EPSG code and 
from Proj4 (not tested WKT)
And I am able to create a CoordinaTransform object from those 
spatialreferences.
But I'm not able to perform an actual coordinate transformation, an 
exception is thrown (trying to read or write to  protected (in 
ogr_sharp.dll).

So, again I ask:
Have I missed some step or is it still something in GDAL that doesn't work?

/Tomas

Tomas R skrev:
> Ok Tamas, it kind of works...
> 
> I followed the steps you have described for me and those I found on the 
> Wiki:
> 1: Downloaded latest trunk
> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the 
> first, I guess just the first)
> 3: Created the C# interface and compiled it.
> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> 5: Added the new CSharp-dlls to my C# project.
> 6: Checked that the system path contains FWTools1.3.0\bin folder
> If I try running my project after those steps I get an exception when 
> trying to call GDAL, whatever *_wrap.dll that is called is not found/not 
> possible to load.
> 
> When I add the wrap-dlls to the "root" of my C#-project, no apparent 
> change.
> When I copy the GDAL-dll to my projects root and include it in the 
> build, together with the wrap-dlls, it works!
> But is this how it now is supposed to be? I guess I with this setup can 
> use GDALs basic function but all the functions which rely on other libs 
> (which I have not tested/any knowledge of yet) are not available? For 
> example reading and writing of GeoTiff images? (That is possible via the 
> C#-bindings?)
> For now I think I'm content with coordinate translation but I think I 
> want to try how efficient GDAL is to use when importing maps of 
> different formats. It would be nice to be able to rip directly from 
> GeoTiff (or RIK) with GDAL.
> 
> Perhaps a bit OT but:
> In basic it boils down to that I have now not a clear idea how to 
> distribute the plugin I am building. Demand that FWTools are installed 
> or include the nessecary dlls? O well, there is time left to think about 
> that.
> 
> /Tomas
> 
> Tamas Szekeres skrev:
>> Oops!  Some recent changes in gdal have been interfering with this
>> setting. I've now fixed up the problem in the gdal-trunk and set the
>> default option to link the C# dll-s dynamically to the gdal libraries.
>> Please, checkout the latest version and repeat your tests.
>>
>> It must be noted that after this change the gdal14.dll should be
>> available to load when running the application or the 'nmake -f
>> makefile.vc test' target.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> 2007/5/10, Tomas R <monshi@home.se>:
>>> I thought  I had the issue solved, that I had managed to compile the
>>> correct C# bindings and so on.
>>>
>>> But, sadly no.
>>> What have I got?
>>> FWtools 3.0
>>> Gdal source, from the latest Trunk
>>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio Express C++
>>>
>>> I manage to compile the whole GDAL-project. I manage to compile C#
>>> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE = NO
>>> but NOT with it commented out.
>>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
>>> result as would be needed. When I try to set up a SpatialReference with
>>> an EPSG-code I still get a 6.
>>>
>>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
>>> creating gdal_wrap.dll:
>>> > LINK : gdal_wrap.dll not found or not built by the last incremental 
>>> link; perfor
>>> > ming full link
>>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
>>> > gdal_wrap.obj : error LNK2019: unresolved external symbol 
>>> _GDALIdentifyDriver@8
>>> > referenced in function "void * __cdecl IdentifyDriver(char const 
>>> *,char * *)" (?
>>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
>>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
>>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio 
>>> 8\VC\BIN\link.EX
>>> > E"' : return code '0x460'
>>> > Stop.
>>>
>>> Why is it never as simple? Do I miss something?
>>>
>>> /Tomas
>>>
>>>
>>> Tamas Szekeres skrev:
>>> > Tomas,
>>> >
>>> > You'll have to comment out the
>>> > CSHARP_STATIC_LINKAGE = YES
>>> > in csharp.opt and recompile the C# interface. Using this setting the
>>> > csharp dll-s will link against the gdal14.dll so the
>>> > PushFinderLocation and ImportFromEPSG will operate on the same global
>>> > data. In the future I consider to use this setting as the default
>>> > option.
>>> >
>>> > BTW: I would propose to use the latest development version of the C#
>>> > related stuff. There were some fundamental changes in the interface
>>> > that might cause some changes in the existing code. For more
>>> > information see:
>>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>>> >
>>> > You might also use the binaries of the latest FWTools
>>> > http://test.gdal.org/fwtools/FWTools130.exe
>>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
>>> > compiled version.
>>> >
>>> > Best regards,
>>> >
>>> > Tamas
>>> >
>>> >
>>> >
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>


From szekerest at gmail.com  Fri May 11 08:21:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f21ac3$85t$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <f1ruj1$kre$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org> <f21ac3$85t$1@sea.gmane.org>
Message-ID: <f3b73b7d0705110521i48d615een7bb8541e1861623c@mail.gmail.com>

Could you post your example that produces this behaviour? I haven't
found this issue when using a similar test you have mentioned.

Tamas


2007/5/11, Tomas R <monshi@home.se>:
> Again I was a bit to quick when reporting success.
> Yes, now I am able to create a SpatialReference from an EPSG code and
> from Proj4 (not tested WKT)
> And I am able to create a CoordinaTransform object from those
> spatialreferences.
> But I'm not able to perform an actual coordinate transformation, an
> exception is thrown (trying to read or write to  protected (in
> ogr_sharp.dll).
>
> So, again I ask:
> Have I missed some step or is it still something in GDAL that doesn't work?
>
> /Tomas
>
> Tomas R skrev:
> > Ok Tamas, it kind of works...
> >
> > I followed the steps you have described for me and those I found on the
> > Wiki:
> > 1: Downloaded latest trunk
> > 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
> > first, I guess just the first)
> > 3: Created the C# interface and compiled it.
> > 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> > 5: Added the new CSharp-dlls to my C# project.
> > 6: Checked that the system path contains FWTools1.3.0\bin folder
> > If I try running my project after those steps I get an exception when
> > trying to call GDAL, whatever *_wrap.dll that is called is not found/not
> > possible to load.
> >
> > When I add the wrap-dlls to the "root" of my C#-project, no apparent
> > change.
> > When I copy the GDAL-dll to my projects root and include it in the
> > build, together with the wrap-dlls, it works!
> > But is this how it now is supposed to be? I guess I with this setup can
> > use GDALs basic function but all the functions which rely on other libs
> > (which I have not tested/any knowledge of yet) are not available? For
> > example reading and writing of GeoTiff images? (That is possible via the
> > C#-bindings?)
> > For now I think I'm content with coordinate translation but I think I
> > want to try how efficient GDAL is to use when importing maps of
> > different formats. It would be nice to be able to rip directly from
> > GeoTiff (or RIK) with GDAL.
> >
> > Perhaps a bit OT but:
> > In basic it boils down to that I have now not a clear idea how to
> > distribute the plugin I am building. Demand that FWTools are installed
> > or include the nessecary dlls? O well, there is time left to think about
> > that.
> >
> > /Tomas
> >
> > Tamas Szekeres skrev:
> >> Oops!  Some recent changes in gdal have been interfering with this
> >> setting. I've now fixed up the problem in the gdal-trunk and set the
> >> default option to link the C# dll-s dynamically to the gdal libraries.
> >> Please, checkout the latest version and repeat your tests.
> >>
> >> It must be noted that after this change the gdal14.dll should be
> >> available to load when running the application or the 'nmake -f
> >> makefile.vc test' target.
> >>
> >> Best regards,
> >>
> >> Tamas
> >>
> >>
> >> 2007/5/10, Tomas R <monshi@home.se>:
> >>> I thought  I had the issue solved, that I had managed to compile the
> >>> correct C# bindings and so on.
> >>>
> >>> But, sadly no.
> >>> What have I got?
> >>> FWtools 3.0
> >>> Gdal source, from the latest Trunk
> >>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio Express C++
> >>>
> >>> I manage to compile the whole GDAL-project. I manage to compile C#
> >>> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE = NO
> >>> but NOT with it commented out.
> >>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
> >>> result as would be needed. When I try to set up a SpatialReference with
> >>> an EPSG-code I still get a 6.
> >>>
> >>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
> >>> creating gdal_wrap.dll:
> >>> > LINK : gdal_wrap.dll not found or not built by the last incremental
> >>> link; perfor
> >>> > ming full link
> >>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
> >>> > gdal_wrap.obj : error LNK2019: unresolved external symbol
> >>> _GDALIdentifyDriver@8
> >>> > referenced in function "void * __cdecl IdentifyDriver(char const
> >>> *,char * *)" (?
> >>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
> >>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
> >>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio
> >>> 8\VC\BIN\link.EX
> >>> > E"' : return code '0x460'
> >>> > Stop.
> >>>
> >>> Why is it never as simple? Do I miss something?
> >>>
> >>> /Tomas
> >>>
> >>>
> >>> Tamas Szekeres skrev:
> >>> > Tomas,
> >>> >
> >>> > You'll have to comment out the
> >>> > CSHARP_STATIC_LINKAGE = YES
> >>> > in csharp.opt and recompile the C# interface. Using this setting the
> >>> > csharp dll-s will link against the gdal14.dll so the
> >>> > PushFinderLocation and ImportFromEPSG will operate on the same global
> >>> > data. In the future I consider to use this setting as the default
> >>> > option.
> >>> >
> >>> > BTW: I would propose to use the latest development version of the C#
> >>> > related stuff. There were some fundamental changes in the interface
> >>> > that might cause some changes in the existing code. For more
> >>> > information see:
> >>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> >>> >
> >>> > You might also use the binaries of the latest FWTools
> >>> > http://test.gdal.org/fwtools/FWTools130.exe
> >>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
> >>> > compiled version.
> >>> >
> >>> > Best regards,
> >>> >
> >>> > Tamas
> >>> >
> >>> >
> >>> >
> >>>
> >>> _______________________________________________
> >>> Gdal-dev mailing list
> >>> Gdal-dev@lists.maptools.org
> >>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> >>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ASP at blominfo.dk  Fri May 11 07:24:45 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Problems reading georeferenced tiff
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A401E7A@posthus.blominfo.dk>

Dear list,

 

I have a tiff with a corresponding tfw file that I would like to warp,
but I get the following error:

 

C:\gdalwarp" -of GTiff  2007-007_310_0702.tif 2007-007_310_0702-wrp.tif

Creating output file that is 12632P x 13728L.

Processing input file 2007-007_310_0702.tif.

Using band 4 of source image as alpha.

Using band 4 of destination image as alpha.

:0...10...20...30ERROR 5: Access window out of range in RasterIO().
Requested

(5081,8284) of size 4611x0 on raster of 11500x7500.

 

The weird part is that if I first gdaltranslate the tiff file into a
jpeg file and copy the world file accordingly, the jpeg file can then be
warped without any problems.

 

The world file is affine (please see below), but isn't that supposed to
work?

 

Contents of tfw file:

-0.0580130855113511

0.0865058993441255

0.0864889964619341

0.0580244710214436

566559.382041782

6287306.42380057

 

I'm on winxp and I have tried fwtools 1.2.3 and 1.3.0.

 

Best regards

Asger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070511/44910b00/attachment.html
From Michele.Sanges at otomelara.it  Fri May 11 10:37:14 2007
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] shape file of the world: lat/lon to utm
Message-ID: <A954C33928E9FC4687E8E21E73FFDCDD203E4A@OTOCLEX1.otomelara.it>

Hello,

is there a way to reproject a shape file of the entire world (eg. http://www.cipotato.org/diva/data/misc/world_adm0.zip) from geographic coordinates (lat/lon) to UTM, using the ogr2ogr utility?
How do I manage the UTM zone?
In order to avoid distorsion, is it possible to suddivide the original file in more lat/lon file, one for every UTM zone?

Thanks a lot.
Michele Sanges



From monshi at home.se  Fri May 11 11:33:29 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f21ac3$85t$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>	<4640A15F.1060509@pobox.com>	<f1rsvl$g07$1@sea.gmane.org>	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f21ac3$85t$1@sea.gmane.org>
Message-ID: <f222cg$3d0$1@sea.gmane.org>

I have received two answers in my mailbox but don't see them here. I 
reply to one of them:
The code I use to produce the error is:
>                 int rtX = 1620000;
>                 int rtY = 6597000;
>                 Gdal.SetConfigOption("GDAL_DATA", 
> @"C:\Program\FWTools1.3.0\data");
>                 Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
>                 SpatialReference source = new SpatialReference("");
>                
>                 int res = source.ImportFromEPSG(3021);
>                 string srcTest, dstTest;
>                 source.ExportToWkt(out srcTest);
>                 put(srcTest);
>                 SpatialReference wgs84 = new SpatialReference(WGS);
>                 wgs84.ExportToWkt(out dstTest);
>                 put(dstTest);
>
>
>                 CoordinateTransformation toWGS = new 
> CoordinateTransformation(wgs84, wgs84);
>                 double[] data = new double[3];
>                 toWGS.TransformPoint(data, rtX, rtY, 0);
>                 put(data[0].ToString() + " " + data[1].ToString());
Where Put is just a call to a routine which displays the text on screen.
Without gdal14.dll or all the wrapper dlls included in the project the 
code halts at first call to Gdal. With the wrappers and the gdal dll 
included in the project the SpatialRefernces are correctly initialized 
(wgs from a WKT-string, just for testing, source from ESPG  (have tested 
other than RT90)) but instead it halts at call to TransformPoint.  The 
exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have 
tested with both reference to OGR and OSR.
I have also tried copying all dlls from FWTool to the project but with 
no difference.

Thank you for your help! The time you take to clear this up is highly 
appreciated!
Yours
Tomas


This was in answer to
> Could you post your example that produces this behaviour? I haven't
> found this issue when using a similar test you have mentioned.
>
> Tamas



Tomas R skrev:
> Again I was a bit to quick when reporting success.
> Yes, now I am able to create a SpatialReference from an EPSG code and 
> from Proj4 (not tested WKT)
> And I am able to create a CoordinaTransform object from those 
> spatialreferences.
> But I'm not able to perform an actual coordinate transformation, an 
> exception is thrown (trying to read or write to  protected (in 
> ogr_sharp.dll).
>
> So, again I ask:
> Have I missed some step or is it still something in GDAL that doesn't 
> work?
>
> /Tomas
>
> Tomas R skrev:
>> Ok Tamas, it kind of works...
>>
>> I followed the steps you have described for me and those I found on 
>> the Wiki:
>> 1: Downloaded latest trunk
>> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the 
>> first, I guess just the first)
>> 3: Created the C# interface and compiled it.
>> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> 5: Added the new CSharp-dlls to my C# project.
>> 6: Checked that the system path contains FWTools1.3.0\bin folder
>> If I try running my project after those steps I get an exception when 
>> trying to call GDAL, whatever *_wrap.dll that is called is not 
>> found/not possible to load.
>>
>> When I add the wrap-dlls to the "root" of my C#-project, no apparent 
>> change.
>> When I copy the GDAL-dll to my projects root and include it in the 
>> build, together with the wrap-dlls, it works!
>> But is this how it now is supposed to be? I guess I with this setup 
>> can use GDALs basic function but all the functions which rely on 
>> other libs (which I have not tested/any knowledge of yet) are not 
>> available? For example reading and writing of GeoTiff images? (That 
>> is possible via the C#-bindings?)
>> For now I think I'm content with coordinate translation but I think I 
>> want to try how efficient GDAL is to use when importing maps of 
>> different formats. It would be nice to be able to rip directly from 
>> GeoTiff (or RIK) with GDAL.
>>
>> Perhaps a bit OT but:
>> In basic it boils down to that I have now not a clear idea how to 
>> distribute the plugin I am building. Demand that FWTools are 
>> installed or include the nessecary dlls? O well, there is time left 
>> to think about that.
>>
>> /Tomas
>>
>> Tamas Szekeres skrev:
>>> Oops!  Some recent changes in gdal have been interfering with this
>>> setting. I've now fixed up the problem in the gdal-trunk and set the
>>> default option to link the C# dll-s dynamically to the gdal libraries.
>>> Please, checkout the latest version and repeat your tests.
>>>
>>> It must be noted that after this change the gdal14.dll should be
>>> available to load when running the application or the 'nmake -f
>>> makefile.vc test' target.
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>> 2007/5/10, Tomas R <monshi@home.se>:
>>>> I thought  I had the issue solved, that I had managed to compile the
>>>> correct C# bindings and so on.
>>>>
>>>> But, sadly no.
>>>> What have I got?
>>>> FWtools 3.0
>>>> Gdal source, from the latest Trunk
>>>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio 
>>>> Express C++
>>>>
>>>> I manage to compile the whole GDAL-project. I manage to compile C#
>>>> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE 
>>>> = NO
>>>> but NOT with it commented out.
>>>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
>>>> result as would be needed. When I try to set up a SpatialReference 
>>>> with
>>>> an EPSG-code I still get a 6.
>>>>
>>>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
>>>> creating gdal_wrap.dll:
>>>> > LINK : gdal_wrap.dll not found or not built by the last 
>>>> incremental link; perfor
>>>> > ming full link
>>>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
>>>> > gdal_wrap.obj : error LNK2019: unresolved external symbol 
>>>> _GDALIdentifyDriver@8
>>>> > referenced in function "void * __cdecl IdentifyDriver(char const 
>>>> *,char * *)" (?
>>>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
>>>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
>>>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio 
>>>> 8\VC\BIN\link.EX
>>>> > E"' : return code '0x460'
>>>> > Stop.
>>>>
>>>> Why is it never as simple? Do I miss something?
>>>>
>>>> /Tomas
>>>>
>>>>
>>>> Tamas Szekeres skrev:
>>>> > Tomas,
>>>> >
>>>> > You'll have to comment out the
>>>> > CSHARP_STATIC_LINKAGE = YES
>>>> > in csharp.opt and recompile the C# interface. Using this setting the
>>>> > csharp dll-s will link against the gdal14.dll so the
>>>> > PushFinderLocation and ImportFromEPSG will operate on the same 
>>>> global
>>>> > data. In the future I consider to use this setting as the default
>>>> > option.
>>>> >
>>>> > BTW: I would propose to use the latest development version of the C#
>>>> > related stuff. There were some fundamental changes in the interface
>>>> > that might cause some changes in the existing code. For more
>>>> > information see:
>>>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>>>> >
>>>> > You might also use the binaries of the latest FWTools
>>>> > http://test.gdal.org/fwtools/FWTools130.exe
>>>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
>>>> > compiled version.
>>>> >
>>>> > Best regards,
>>>> >
>>>> > Tamas
>>>> >
>>>> >
>>>> >
>>>>
>>>> _______________________________________________
>>>> Gdal-dev mailing list
>>>> Gdal-dev@lists.maptools.org
>>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>>


From frederic.claudel at magellium.fr  Fri May 11 07:58:22 2007
From: frederic.claudel at magellium.fr (Frederic Claudel)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Shapefile with hole touching : fix?
In-Reply-To: <f21ac3$85t$1@sea.gmane.org>
Message-ID: <00b301c793c3$ae10a260$a401a8c0@pc164>


FYI, we submitted a fix in Trac for bug #1415, but it isn't marked as fixed
so I'm also posting here.

Can someone else test the fix?
http://trac.osgeo.org/gdal/ticket/1415

The bug also appeared when writing a shapefile with two outer rings touching
each other on one of their starting vertices.

Regards,
Frederic Claudel
Magellium




From monshi at home.se  Fri May 11 11:36:37 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705110521i48d615een7bb8541e1861623c@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f21ac3$85t$1@sea.gmane.org>
	<f3b73b7d0705110521i48d615een7bb8541e1861623c@mail.gmail.com>
Message-ID: <f222ib$3d0$3@sea.gmane.org>

The code I use to produce the error is:
>                 int rtX = 1620000;
>                 int rtY = 6597000;
>                 Gdal.SetConfigOption("GDAL_DATA", 
> @"C:\Program\FWTools1.3.0\data");
>                 Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
>                 SpatialReference source = new SpatialReference("");
>                                int res = source.ImportFromEPSG(3021);
>                 string srcTest, dstTest;
>                 source.ExportToWkt(out srcTest);
>                 put(srcTest);
>                 SpatialReference wgs84 = new SpatialReference(WGS);
>                 wgs84.ExportToWkt(out dstTest);
>                 put(dstTest);
>
>
>                 CoordinateTransformation toWGS = new 
> CoordinateTransformation(wgs84, wgs84);
>                 double[] data = new double[3];
>                 toWGS.TransformPoint(data, rtX, rtY, 0);
>                 put(data[0].ToString() + " " + data[1].ToString());
Where Put is just a call to a routine which displays the text on screen.
Without gdal14.dll or all the wrapper dlls included in the project the 
code halts at first call to Gdal. With the wrappers and the gdal dll 
included in the project the SpatialRefernces are correctly initialized 
(wgs from a WKT-string, just for testing, source from ESPG  (have tested 
other than RT90)) but instead it halts at call to TransformPoint.  The 
exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have 
tested with both reference to OGR and OSR.
I have also tried copying all dlls from FWTool to the project but with 
no difference.

Thank you for your help! The time you take to clear this up is highly 
appreciated!
Yours
Tomas


Tamas Szekeres skrev:
> Could you post your example that produces this behaviour? I haven't
> found this issue when using a similar test you have mentioned.
>
> Tamas
>
>
> 2007/5/11, Tomas R <monshi@home.se>:
>> Again I was a bit to quick when reporting success.
>> Yes, now I am able to create a SpatialReference from an EPSG code and
>> from Proj4 (not tested WKT)
>> And I am able to create a CoordinaTransform object from those
>> spatialreferences.
>> But I'm not able to perform an actual coordinate transformation, an
>> exception is thrown (trying to read or write to  protected (in
>> ogr_sharp.dll).
>>
>> So, again I ask:
>> Have I missed some step or is it still something in GDAL that doesn't 
>> work?
>>
>> /Tomas
>>
>> Tomas R skrev:
>> > Ok Tamas, it kind of works...
>> >
>> > I followed the steps you have described for me and those I found on 
>> the
>> > Wiki:
>> > 1: Downloaded latest trunk
>> > 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
>> > first, I guess just the first)
>> > 3: Created the C# interface and compiled it.
>> > 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> > 5: Added the new CSharp-dlls to my C# project.
>> > 6: Checked that the system path contains FWTools1.3.0\bin folder
>> > If I try running my project after those steps I get an exception when
>> > trying to call GDAL, whatever *_wrap.dll that is called is not 
>> found/not
>> > possible to load.
>> >
>> > When I add the wrap-dlls to the "root" of my C#-project, no apparent
>> > change.
>> > When I copy the GDAL-dll to my projects root and include it in the
>> > build, together with the wrap-dlls, it works!
>> > But is this how it now is supposed to be? I guess I with this setup 
>> can
>> > use GDALs basic function but all the functions which rely on other 
>> libs
>> > (which I have not tested/any knowledge of yet) are not available? For
>> > example reading and writing of GeoTiff images? (That is possible 
>> via the
>> > C#-bindings?)
>> > For now I think I'm content with coordinate translation but I think I
>> > want to try how efficient GDAL is to use when importing maps of
>> > different formats. It would be nice to be able to rip directly from
>> > GeoTiff (or RIK) with GDAL.
>> >
>> > Perhaps a bit OT but:
>> > In basic it boils down to that I have now not a clear idea how to
>> > distribute the plugin I am building. Demand that FWTools are installed
>> > or include the nessecary dlls? O well, there is time left to think 
>> about
>> > that.
>> >
>> > /Tomas
>> >
>> > Tamas Szekeres skrev:
>> >> Oops!  Some recent changes in gdal have been interfering with this
>> >> setting. I've now fixed up the problem in the gdal-trunk and set the
>> >> default option to link the C# dll-s dynamically to the gdal 
>> libraries.
>> >> Please, checkout the latest version and repeat your tests.
>> >>
>> >> It must be noted that after this change the gdal14.dll should be
>> >> available to load when running the application or the 'nmake -f
>> >> makefile.vc test' target.
>> >>
>> >> Best regards,
>> >>
>> >> Tamas
>> >>
>> >>
>> >> 2007/5/10, Tomas R <monshi@home.se>:
>> >>> I thought  I had the issue solved, that I had managed to compile the
>> >>> correct C# bindings and so on.
>> >>>
>> >>> But, sadly no.
>> >>> What have I got?
>> >>> FWtools 3.0
>> >>> Gdal source, from the latest Trunk
>> >>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio 
>> Express C++
>> >>>
>> >>> I manage to compile the whole GDAL-project. I manage to compile C#
>> >>> bindings with CSHARP_STATIC_LINKAGE = YES and 
>> CSHARP_STATIC_LINKAGE = NO
>> >>> but NOT with it commented out.
>> >>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect 
>> the
>> >>> result as would be needed. When I try to set up a 
>> SpatialReference with
>> >>> an EPSG-code I still get a 6.
>> >>>
>> >>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
>> >>> creating gdal_wrap.dll:
>> >>> > LINK : gdal_wrap.dll not found or not built by the last 
>> incremental
>> >>> link; perfor
>> >>> > ming full link
>> >>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
>> >>> > gdal_wrap.obj : error LNK2019: unresolved external symbol
>> >>> _GDALIdentifyDriver@8
>> >>> > referenced in function "void * __cdecl IdentifyDriver(char const
>> >>> *,char * *)" (?
>> >>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
>> >>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
>> >>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio
>> >>> 8\VC\BIN\link.EX
>> >>> > E"' : return code '0x460'
>> >>> > Stop.
>> >>>
>> >>> Why is it never as simple? Do I miss something?
>> >>>
>> >>> /Tomas
>> >>>
>> >>>
>> >>> Tamas Szekeres skrev:
>> >>> > Tomas,
>> >>> >
>> >>> > You'll have to comment out the
>> >>> > CSHARP_STATIC_LINKAGE = YES
>> >>> > in csharp.opt and recompile the C# interface. Using this 
>> setting the
>> >>> > csharp dll-s will link against the gdal14.dll so the
>> >>> > PushFinderLocation and ImportFromEPSG will operate on the same 
>> global
>> >>> > data. In the future I consider to use this setting as the default
>> >>> > option.
>> >>> >
>> >>> > BTW: I would propose to use the latest development version of 
>> the C#
>> >>> > related stuff. There were some fundamental changes in the 
>> interface
>> >>> > that might cause some changes in the existing code. For more
>> >>> > information see:
>> >>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
>> >>> >
>> >>> > You might also use the binaries of the latest FWTools
>> >>> > http://test.gdal.org/fwtools/FWTools130.exe
>> >>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
>> >>> > compiled version.
>> >>> >
>> >>> > Best regards,
>> >>> >
>> >>> > Tamas
>> >>> >
>> >>> >
>> >>> >
>> >>>
>> >>> _______________________________________________
>> >>> Gdal-dev mailing list
>> >>> Gdal-dev@lists.maptools.org
>> >>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>> >>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From ph_de_fr at club-internet.fr  Fri May 11 08:18:07 2007
From: ph_de_fr at club-internet.fr (Philippe de Franclieu)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] SHP Files as Layers into a KML File
Message-ID: <002701c793c6$6fc5f340$0100a8c0@Kit1>

Hello,
 
Objective : put several SHP files as different layers - attribute data being
different - into a KML file.
Pb : I cannot -append -update the KML file : "Unable to open existing output
datasource 'out1.kml'".
 
shp2kml.bat file is as follows :
ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml in_1.shp -dsco
NameField=LABEL -nln NewLayerName_1
ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml
in_2.shp -dsco NameField=ID -nln NewLayerName_2
ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml
in_3.shp -dsco NameField=ID -nln NewLayerName_3
 
What is wrong?
 
The other option, merge several SHP files into 'out.shp' then convert it to
'out2.kml', does not work either.
 
My shp2shp2kml.bat file is as follows :
ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI Shapefile" out.shp
in_1.shp -nln NewLayerName_1
ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
Shapefile" out.shp in_2.shp -nln NewLayerName_2
ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
Shapefile" out.shp in_3.shp -nln NewLayerName_3
ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out2.kml out.shp
 
ERROR 1: Failed to create file out.shp\NewLayerName_2.shp.
ERROR 4: Failed to open Shapefile 'out.shp\NewLayerName_2.shp'.
ERROR 1: Terminating translation prematurely after failed translation of
layer in_2
etc.
 
Also note that the -nln option does not replace the layer name from 'out' to
'NewLayerName_%' whith the - f "ESRI Shapefile" option while it does with
the -f "KML".
 
Thank you for your help
 
Philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070511/ba2e3b21/attachment.html
From szekerest at gmail.com  Fri May 11 08:17:05 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f2170u$p79$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org> <f1rsvl$g07$1@sea.gmane.org>
	<f1ruj1$kre$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org>
Message-ID: <f3b73b7d0705110517y5441d1f4u1accba113ecacc16@mail.gmail.com>

2007/5/11, Tomas R <monshi@home.se>:
> Ok Tamas, it kind of works...
>
> I followed the steps you have described for me and those I found on the
> Wiki:
> 1: Downloaded latest trunk
> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
> first, I guess just the first)
> 3: Created the C# interface and compiled it.
> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> 5: Added the new CSharp-dlls to my C# project.
> 6: Checked that the system path contains FWTools1.3.0\bin folder
> If I try running my project after those steps I get an exception when
> trying to call GDAL, whatever *_wrap.dll that is called is not found/not
> possible to load.
>
> When I add the wrap-dlls to the "root" of my C#-project, no apparent change.
> When I copy the GDAL-dll to my projects root and include it in the
> build, together with the wrap-dlls, it works!

I my previous letter I've noted that with this setting the *_wrap.dll
will link to the gdal14.dll therefore this dll should also be
available for your application to load.
In my personal opinion if you would distribute your app with this
functionality you might include these dll-s in your package.
Apparently, in the same folder where your application resides.

> But is this how it now is supposed to be? I guess I with this setup can
> use GDALs basic function but all the functions which rely on other libs
> (which I have not tested/any knowledge of yet) are not available? For
> example reading and writing of GeoTiff images? (That is possible via the
> C#-bindings?)
> For now I think I'm content with coordinate translation but I think I
> want to try how efficient GDAL is to use when importing maps of
> different formats. It would be nice to be able to rip directly from
> GeoTiff (or RIK) with GDAL.
>

Most of the functionality of the GDAL/OGR core is exposed to the C#
interface. But indeed many of them might require further dll-s to
include (can normally be found in the FWTools/bin directory). In this
case you might add these dll in your application folder as well.

> Perhaps a bit OT but:
> In basic it boils down to that I have now not a clear idea how to
> distribute the plugin I am building. Demand that FWTools are installed
> or include the nessecary dlls? O well, there is time left to think about
> that.
>

It depends on the architecture of the application. In fact all of the
dll-s mentioned before should be available to load by the executable
either by adding the location in the PATH environment or copying them
in the application folder.

Best regards,

Tamas

From Chris.Barker at noaa.gov  Fri May 11 12:38:55 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdal 1.4.1 python 2.4 windows executables
In-Reply-To: <4643AE0D.4000806@pobox.com>
References: <4f44d320705101502w746ed004ibd9a819900051528@mail.gmail.com>
	<4643AE0D.4000806@pobox.com>
Message-ID: <46449C1F.5080906@noaa.gov>

Frank Warmerdam wrote:
> I am interested in making "core binaries" for win32 part of the funded
> GDAL maintainer workload, but it isn't at all clear that this will include
> Python packages.

I sure hope it will.

The easiest thing for Windows users is to have binaries for each 
release, for each recent version of Python (I think the two most recent 
is good enough -- i.e. 2.4 and 2.5). However, barring that, at least is 
should be all set up to build with distutils. That way at least anyone 
with the right compiler can "just build it". Indeed, then they could 
donate the binaries back to the project.

I haven't tried to build it on Windows lately, but it's looking like 
it's not trivial. However, I'm not offering to figure out how to get it 
all to work, so this is just a suggestion!

-Chris

PS: the package structure for py-gdal really should be re-worked too, 
but that's a different topic.





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From monshi at home.se  Fri May 11 12:49:18 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705110517y5441d1f4u1accba113ecacc16@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<f1rsvl$g07$1@sea.gmane.org>	<f1ruj1$kre$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f3b73b7d0705110517y5441d1f4u1accba113ecacc16@mail.gmail.com>
Message-ID: <f226qk$jpk$1@sea.gmane.org>

Ok, thanks for the educating response.

What I am developing is a plugin for SportTracks. In simple terms it 
will act as an alternative source of maps to Google Earth and provide 
translation from/to the maps local projection to WGS84. This will also 
include a mechanism to import the maps into such a format it will be 
easy and fast to read and handle. It will be a local "server" to 
SportTracks providing SportTracks with maps the user has provided.

Some Q's arises from what you have written:
Anyway to single out which DLLs that provide the functions I need?
If I use my own build of gdal will the dll have the necessary bindings 
to the dll-files distributed with FWtool?
But on the other hand I guess I can, in the next release of FWTool, grab 
the whole bunch of dlls and data-files and use them. This solution is  
only for a short  time, I will not have to compile gdal myself after 
FWTool has been upgraded.

And is it necessary to set the system path to make it possible for the 
Csharp bindings to find the gdal dll? It isn't possible to find them by 
a path stored/computed by my code?

Perhaps worth noting, the trunk revision  I have tested with is the one 
after your last edit, i.e. revision 11458.

/Tomas

Tamas Szekeres skrev:
> 2007/5/11, Tomas R <monshi@home.se>:
>> Ok Tamas, it kind of works...
>>
>> I followed the steps you have described for me and those I found on the
>> Wiki:
>> 1: Downloaded latest trunk
>> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
>> first, I guess just the first)
>> 3: Created the C# interface and compiled it.
>> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> 5: Added the new CSharp-dlls to my C# project.
>> 6: Checked that the system path contains FWTools1.3.0\bin folder
>> If I try running my project after those steps I get an exception when
>> trying to call GDAL, whatever *_wrap.dll that is called is not found/not
>> possible to load.
>>
>> When I add the wrap-dlls to the "root" of my C#-project, no apparent 
>> change.
>> When I copy the GDAL-dll to my projects root and include it in the
>> build, together with the wrap-dlls, it works!
>
> I my previous letter I've noted that with this setting the *_wrap.dll
> will link to the gdal14.dll therefore this dll should also be
> available for your application to load.
> In my personal opinion if you would distribute your app with this
> functionality you might include these dll-s in your package.
> Apparently, in the same folder where your application resides.
>
>> But is this how it now is supposed to be? I guess I with this setup can
>> use GDALs basic function but all the functions which rely on other libs
>> (which I have not tested/any knowledge of yet) are not available? For
>> example reading and writing of GeoTiff images? (That is possible via the
>> C#-bindings?)
>> For now I think I'm content with coordinate translation but I think I
>> want to try how efficient GDAL is to use when importing maps of
>> different formats. It would be nice to be able to rip directly from
>> GeoTiff (or RIK) with GDAL.
>>
>
> Most of the functionality of the GDAL/OGR core is exposed to the C#
> interface. But indeed many of them might require further dll-s to
> include (can normally be found in the FWTools/bin directory). In this
> case you might add these dll in your application folder as well.
>
>> Perhaps a bit OT but:
>> In basic it boils down to that I have now not a clear idea how to
>> distribute the plugin I am building. Demand that FWTools are installed
>> or include the nessecary dlls? O well, there is time left to think about
>> that.
>>
>
> It depends on the architecture of the application. In fact all of the
> dll-s mentioned before should be available to load by the executable
> either by adding the location in the PATH environment or copying them
> in the application folder.
>
> Best regards,
>
> Tamas


From epatton at nrcan.gc.ca  Fri May 11 13:35:28 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Importing ESRI .hdr Labelled raster via r.in.gdal
	displays strange aliasing pattern 
Message-ID: <CA803441152AAE40935609509953BAD20F7152@s0-ott-x4.nrn.nrcan.gc.ca>

I'm importing an Arc Floating-point raster using the 'EHdr/ESRI .hdr Labelled' driver in gdal:

$ gdalinfo 45_04_N_66_44_W_BATHY.flt

Driver: EHdr/ESRI .hdr Labelled
Size is 2641, 3721
Coordinate System is `'
Origin = (2481609.500000000000000,7340725.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  ( 2481609.500, 7340725.500) 
Lower Left  ( 2481609.500, 7337004.500) 
Upper Right ( 2484250.500, 7340725.500) 
Lower Right ( 2484250.500, 7337004.500) 
Center      ( 2482930.000, 7338865.000) 
Band 1 Block=2641x1 Type=Byte, ColorInterp=Undefined
  NoData Value=-99999.999

The projection is New Brunswick Double Stereographic (EPSG #2953). I have set up a Location with these projection parameters.
Th import seems to progress fine with no errors, but the imported raster doesn't display any data, just a jagged, greyscale grid. (A screenshot of the imported raster was too big to attach, but I can provide it in a separate email attachment if anyone is interested.)  

I suspect, but am not sure, that I need to use gdal_translate instead and pass some CREATOPT parameters? 

Also noteworthy is the fact that I had to do a tiny hack to the hdr file as per Frank Warmerdam's suggestion through the GDAL bugtracker:
(Background: I was received a malloc error when trying to import the ESRI Floating-point raster. See http://trac.osgeo.org/gdal/ticket/1573)

>From Frank Warmerdam:

"The problem is related to initialization when the NBITS keyword is missing
from the .hdr file.  In 1.4.0 a bunch of new code was introduced for NBITS
< 8, but it also added a dependency on having the keyword present.

The workaround is to add "NBITS 8" in the .hdr file.

Fix is to default to 8 in the code.  The fix has been committed in trunk,
and 1.4 branch and it should be released in 1.4.2."


I have added the above fix to the hdr file prior to using r.in.gdal to import the raster.

Any help appreciated!


~ Eric.


From warmerdam at pobox.com  Fri May 11 14:39:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Shapefile with hole touching : fix?
In-Reply-To: <00b301c793c3$ae10a260$a401a8c0@pc164>
References: <00b301c793c3$ae10a260$a401a8c0@pc164>
Message-ID: <4644B84F.8070800@pobox.com>

Frederic Claudel wrote:
> FYI, we submitted a fix in Trac for bug #1415, but it isn't marked as fixed
> so I'm also posting here.
> 
> Can someone else test the fix?
> http://trac.osgeo.org/gdal/ticket/1415
> 
> The bug also appeared when writing a shapefile with two outer rings touching
> each other on one of their starting vertices.

Frederic,

I have reassigned this to Mateusz to test and apply for the 1.4.2 release.

Mateusz and I spent some time a problem last summer with the recognition
of holes, and I thought at first that this was a similar issue.  Perhaps
it is.  I'm worry that a patch may fix it for one case, and break it for
another, or possibly introduce substantial extra processing delay.  But
ignoring it isn't a great solution either. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri May 11 15:40:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Problems reading georeferenced tiff
In-Reply-To: <25BE68A4D83DD4438F701DF0311F3F4A401E7A@posthus.blominfo.dk>
References: <25BE68A4D83DD4438F701DF0311F3F4A401E7A@posthus.blominfo.dk>
Message-ID: <4644C6AC.2010507@pobox.com>

Asger Sigurd Petersen wrote:
> Dear list,
> 
>  
> 
> I have a tiff with a corresponding tfw file that I would like to warp, 
> but I get the following error:
> 
>  
> 
> C:\gdalwarp" -of GTiff  2007-007_310_0702.tif 2007-007_310_0702-wrp.tif
> 
> Creating output file that is 12632P x 13728L.
> 
> Processing input file 2007-007_310_0702.tif.
> 
> Using band 4 of source image as alpha.
> 
> Using band 4 of destination image as alpha.
> 
> :0...10...20...30ERROR 5: Access window out of range in RasterIO().  
> Requested
> 
> (5081,8284) of size 4611x0 on raster of 11500x7500.
> 
>  
> 
> The weird part is that if I first gdaltranslate the tiff file into a 
> jpeg file and copy the world file accordingly, the jpeg file can then be 
> warped without any problems.

Asger,

I have reproduced your problem.  It is due to the warper computing a source
window that is off the input data file.  It automatically gets trimmed to
zero size, and the general purpose code already ignores requests of zero
size.  But the alpha band reader does not ignore these.

I've fixed this in trunk and 1.4 branch, so the fix should be in the next
FWTools release.  In the meantime, if your workaround of going to jpeg is
ok, then use that.  That works because the alpha band is discarded in jpeg
format.

Or build from source of course.

I'll try to do a new fwtools release in the next week or two.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri May 11 15:32:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] SHP Files as Layers into a KML File
In-Reply-To: <002701c793c6$6fc5f340$0100a8c0@Kit1>
References: <002701c793c6$6fc5f340$0100a8c0@Kit1>
Message-ID: <4644C4C3.7090205@loskot.net>

Philippe de Franclieu wrote:
> Hello,
>  
> Objective : put several SHP files as different layers - attribute data being
> different - into a KML file.
> Pb : I cannot -append -update the KML file : "Unable to open existing output
> datasource 'out1.kml'".
>  
> shp2kml.bat file is as follows :
> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml in_1.shp -dsco
> NameField=LABEL -nln NewLayerName_1
> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml
> in_2.shp -dsco NameField=ID -nln NewLayerName_2
> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out1.kml
> in_3.shp -dsco NameField=ID -nln NewLayerName_3
>  
> What is wrong?

Philippe,

As you can read in the KML driver doc
(http://www.gdal.org/ogr/drv_kml.html)

"OGR has limited support for KML writing and no support for reading KML."

This is the reason of the error you're getting.

It may seems strange because you're trying to *write* KML but not to
read, but if you use -update option, this operation involves
datasource open and read steps.

So, it is not possible to generate single KML file in more than one steps.

As workaround, you could merge shapefiles into single shapefile with
ogr2ogr, if all shapes have the same schema, and then build KML from
single shapefile.

> The other option, merge several SHP files into 'out.shp' then convert it to
> 'out2.kml', does not work either.
>  
> My shp2shp2kml.bat file is as follows :
> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI Shapefile" out.shp
> in_1.shp -nln NewLayerName_1
> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
> Shapefile" out.shp in_2.shp -nln NewLayerName_2
> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
> Shapefile" out.shp in_3.shp -nln NewLayerName_3
> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out2.kml out.shp
>  
> ERROR 1: Failed to create file out.shp\NewLayerName_2.shp.
> ERROR 4: Failed to open Shapefile 'out.shp\NewLayerName_2.shp'.
> ERROR 1: Terminating translation prematurely after failed translation of
> layer in_2

OGR tries to resolve output datasource as a directory but not a file.
If you want to get new layer name (shapefile name), use directory
path as output datasource:

ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI Shapefile" .
in_1.shp -nln NewLayerName_1

Here, in *current* directory (see the dot), you will get
NewLayerName_1.shp file, generated from in_1.shp.

> Also note that the -nln option does not replace the layer name from 'out' to
> 'NewLayerName_%' whith the - f "ESRI Shapefile" option while it does with
> the -f "KML".

Yes, because layer in ESRI Shapefile driver is...name of shapefile,
but if you use shapefile as a datasource, its filename works has two
meanings: datasoruce and layer name. It's not supported to create, edit
and rename the same shapefile in single step.

If you run:

ogrinfo in_1.shp

you will get list of layers including *one* layer named in_1.

If you run:

ogrinfo /path/to/directory/but/not/to/shapefile

you will get list of N layers - names of shapefiles in given directory.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri May 11 16:02:11 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdal 1.4.1 python 2.4 windows executables
In-Reply-To: <4643AE0D.4000806@pobox.com>
References: <4f44d320705101502w746ed004ibd9a819900051528@mail.gmail.com>
	<4643AE0D.4000806@pobox.com>
Message-ID: <4644CBC3.7080305@loskot.net>

Frank Warmerdam wrote:
> 
> 3) I think Mateusz has been recently looking into building GDAL for
> win32 with Python 2.4.  Perhaps he will provide a status update, and
> this will make it into the wiki for others who want to build it.

Yes, I've tested Tamas' hacks and they work great for me.
Today, I'll check GDAL official binaries and if they work,
I'll put some notes to the wiki.

> I am interested in making "core binaries" for win32 part of the
> funded GDAL maintainer workload, but it isn't at all clear that this
> will include Python packages.

Should I do anything for this now?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From epatton at nrcan.gc.ca  Fri May 11 16:09:53 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Importing ESRI .hdr Labelled raster via
	r.in.gdaldisplays strange aliasing pattern 
References: <CA803441152AAE40935609509953BAD20F7152@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <CA803441152AAE40935609509953BAD20F7155@s0-ott-x4.nrn.nrcan.gc.ca>

I've figured this one out...I had to use r.in.bin, and explicitly declare the extents, null value, number of bytes, rows, and columns for each input flt file.

Sorry for clogging the bandwidth.

~ Eric.


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org on behalf of Patton, Eric
Sent: Fri 5/11/2007 2:35 PM
To: gdal-dev@lists.maptools.org
Cc: grassuser@grass.itc.it
Subject: [Gdal-dev] Importing ESRI .hdr Labelled raster via r.in.gdaldisplays strange aliasing pattern 
 
I'm importing an Arc Floating-point raster using the 'EHdr/ESRI .hdr Labelled' driver in gdal:

$ gdalinfo 45_04_N_66_44_W_BATHY.flt

Driver: EHdr/ESRI .hdr Labelled
Size is 2641, 3721
Coordinate System is `'
Origin = (2481609.500000000000000,7340725.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  ( 2481609.500, 7340725.500) 
Lower Left  ( 2481609.500, 7337004.500) 
Upper Right ( 2484250.500, 7340725.500) 
Lower Right ( 2484250.500, 7337004.500) 
Center      ( 2482930.000, 7338865.000) 
Band 1 Block=2641x1 Type=Byte, ColorInterp=Undefined
  NoData Value=-99999.999

The projection is New Brunswick Double Stereographic (EPSG #2953). I have set up a Location with these projection parameters.
Th import seems to progress fine with no errors, but the imported raster doesn't display any data, just a jagged, greyscale grid. (A screenshot of the imported raster was too big to attach, but I can provide it in a separate email attachment if anyone is interested.)  

I suspect, but am not sure, that I need to use gdal_translate instead and pass some CREATOPT parameters? 

Also noteworthy is the fact that I had to do a tiny hack to the hdr file as per Frank Warmerdam's suggestion through the GDAL bugtracker:
(Background: I was received a malloc error when trying to import the ESRI Floating-point raster. See http://trac.osgeo.org/gdal/ticket/1573)

>From Frank Warmerdam:

"The problem is related to initialization when the NBITS keyword is missing
from the .hdr file.  In 1.4.0 a bunch of new code was introduced for NBITS
< 8, but it also added a dependency on having the keyword present.

The workaround is to add "NBITS 8" in the .hdr file.

Fix is to default to 8 in the code.  The fix has been committed in trunk,
and 1.4 branch and it should be released in 1.4.2."


I have added the above fix to the hdr file prior to using r.in.gdal to import the raster.

Any help appreciated!


~ Eric.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev




From mateusz at loskot.net  Fri May 11 16:51:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4632CA81.80104@pobox.com>
References: <4632CA81.80104@pobox.com>
Message-ID: <4644D734.8@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.
> 
>   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
>   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip
> 
> This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
> that C applications (like gdalinfo.c) can be built against these libraries
> using other compilers - I tested with VC6.

Frank,

AFAIU, the dev version is dedicated for developers,
so they are supposed to build their applications in Debug mode.
If a user does not use Visual Studio .NET 2003 (compiler Visual C++
7.1), but he uses ie. VS2005, they he won't be able to run debug builds,
because there are no debug versions of 7.1 CRT DLLs available in the system.

The problem is that all debug libraries shipped with Visual Studio
are not redistributable, and they can not be distributed, AFAIK
according to EULA.

Summarizing, GDAL devel package prepared with VS.NET2003 is unusable
with VS2005.

I'd suppose that similar problem is with Visual Studio .NET 2002 and
6.0, isn't it?

> The executables and corresponding gdal14.dll are fairly minimimal.  I
> used the default set of built-in drivers.  No external libraries were
> used.

Is this correct, that there are only debug version of binaries
in the dev package and release versions are missing?

> I'd appreciate folks trying these out a bit and let me know of problems
> encountered.

I started testing these binaries, and the non-devel version works so
far, but the devel one is unusable for me, as far as I tested.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri May 11 16:54:07 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] gdaladdo errors on Linux
In-Reply-To: <ae9185aa0704281551u3b2f879fqe3d5273d192d9580@mail.gmail.com>
References: <ae9185aa0704251441h424e4a9ck1487d30bfc1c6201@mail.gmail.com>	
	<46336F5B.2090200@loskot.net>
	<ae9185aa0704281551u3b2f879fqe3d5273d192d9580@mail.gmail.com>
Message-ID: <4644D7EF.3040806@loskot.net>

Richard Greenwood wrote:
> On 4/28/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>> Richard Greenwood wrote:
>> > I've got an odd situation. I have a set of TIFFs that I can add
>> > overlays to under Windows and Mac OS X, but not Linux.
>> >
>> > The gdaladdo error under Linux is:
>> >
>> > ERROR 1: IReadBlock failed at X offset 2, Y offset 4
>> > ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 4
>> > ERROR 1: F43110A1.TIF:DumpModeDecode: Not enough data for scanline 256
>> > ERROR 1: TIFFReadEncodedTile() failed.
>> >
>> > (These 4 error repeat "forever")
>> >
>> > The images are 8 bit TIFFs with a 13 color table. The Linux and OS X
>> > versions of gdaladdo are identical (1.3.2.0) the Windows version is
>> > 1.4.0.0. I have run gdaladdo on the Linux box successfully in the
>> > past.
>>
>> Richard,
>>
>> Do you use internal or external libtiff ?
> 
> I honestly do not know. The Linux server is a remote server that I
> know very little about It is running Linux 2.4.33.3 stable Slackware
> 11.0. I did a minimal ./configure, make install of gdal. If you can
> give me any pointers as to how to determine more about my libtiff I
> can of course research it more.

Richard,

After the ./configure finishes its job, you get the summary.
Check if there is 'internal' word displayed next to libtiff.

>> Could you give me your dataset, so I can test it myself too?
> 
> I put a ~4MB samle at:
>    http://www.sublettewyo.com/250k.zip
> 
> I appreciate your interest in this problem, but please do not put
> undue effort into solving as I can easily work around the problem.

I'm sorry but I've not digged into this problem yet.
I was away for longer than a week recently, now I'm back and collecting
deferred tasks.

I'll let you know when I check it, should be soon.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri May 11 18:15:00 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f222cg$3d0$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org> <f21ac3$85t$1@sea.gmane.org>
	<f222cg$3d0$1@sea.gmane.org>
Message-ID: <f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>

Tomas,

I couldn't find out what is the actual value of your WGS variable in
SpatialReference wgs84 = new SpatialReference(WGS);

In addition CoordinateTransformation(wgs84, wgs84); doesn't seem to do
anything with the coordinate values.
Here is my equivalent code that worked:

int rtX = 1620000;
                 int rtY = 6597000;
                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
Files\FWTools1.3.0\data");
                 Gdal.PushFinderLocation(@"C:\Program Files\FWTools1.3.0\data");
                 SpatialReference source = new SpatialReference("");

                 int res = source.ImportFromEPSG(3021);
                 string srcTest, dstTest;
                 source.ExportToWkt(out srcTest);
                 Console.WriteLine(srcTest);
                 SpatialReference wgs84 = new SpatialReference("");
                 wgs84.SetWellKnownGeogCS("WGS84");
                 wgs84.ExportToWkt(out dstTest);
                 Console.WriteLine(dstTest);


                 CoordinateTransformation toWGS = new
CoordinateTransformation(source, wgs84);
                 double[] data = new double[3];
                 toWGS.TransformPoint(data, rtX, rtY, 0);
                 Console.WriteLine(data[0].ToString() + " " +
data[1].ToString());


However your memory corruption issue is somewhat frustrating, do you
have a call stack for this error?

Best regards,

Tamas


2007/5/11, Tomas R <monshi@home.se>:
> I have received two answers in my mailbox but don't see them here. I
> reply to one of them:
> The code I use to produce the error is:
> >                 int rtX = 1620000;
> >                 int rtY = 6597000;
> >                 Gdal.SetConfigOption("GDAL_DATA",
> > @"C:\Program\FWTools1.3.0\data");
> >                 Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
> >                 SpatialReference source = new SpatialReference("");
> >
> >                 int res = source.ImportFromEPSG(3021);
> >                 string srcTest, dstTest;
> >                 source.ExportToWkt(out srcTest);
> >                 put(srcTest);
> >                 SpatialReference wgs84 = new SpatialReference(WGS);
> >                 wgs84.ExportToWkt(out dstTest);
> >                 put(dstTest);
> >
> >
> >                 CoordinateTransformation toWGS = new
> > CoordinateTransformation(wgs84, wgs84);
> >                 double[] data = new double[3];
> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
> >                 put(data[0].ToString() + " " + data[1].ToString());
> Where Put is just a call to a routine which displays the text on screen.
> Without gdal14.dll or all the wrapper dlls included in the project the
> code halts at first call to Gdal. With the wrappers and the gdal dll
> included in the project the SpatialRefernces are correctly initialized
> (wgs from a WKT-string, just for testing, source from ESPG  (have tested
> other than RT90)) but instead it halts at call to TransformPoint.  The
> exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have
> tested with both reference to OGR and OSR.
> I have also tried copying all dlls from FWTool to the project but with
> no difference.
>
> Thank you for your help! The time you take to clear this up is highly
> appreciated!
> Yours
> Tomas
>
>
> This was in answer to
> > Could you post your example that produces this behaviour? I haven't
> > found this issue when using a similar test you have mentioned.
> >
> > Tamas
>
>
>
> Tomas R skrev:
> > Again I was a bit to quick when reporting success.
> > Yes, now I am able to create a SpatialReference from an EPSG code and
> > from Proj4 (not tested WKT)
> > And I am able to create a CoordinaTransform object from those
> > spatialreferences.
> > But I'm not able to perform an actual coordinate transformation, an
> > exception is thrown (trying to read or write to  protected (in
> > ogr_sharp.dll).
> >
> > So, again I ask:
> > Have I missed some step or is it still something in GDAL that doesn't
> > work?
> >
> > /Tomas
> >
> > Tomas R skrev:
> >> Ok Tamas, it kind of works...
> >>
> >> I followed the steps you have described for me and those I found on
> >> the Wiki:
> >> 1: Downloaded latest trunk
> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
> >> first, I guess just the first)
> >> 3: Created the C# interface and compiled it.
> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> >> 5: Added the new CSharp-dlls to my C# project.
> >> 6: Checked that the system path contains FWTools1.3.0\bin folder
> >> If I try running my project after those steps I get an exception when
> >> trying to call GDAL, whatever *_wrap.dll that is called is not
> >> found/not possible to load.
> >>
> >> When I add the wrap-dlls to the "root" of my C#-project, no apparent
> >> change.
> >> When I copy the GDAL-dll to my projects root and include it in the
> >> build, together with the wrap-dlls, it works!
> >> But is this how it now is supposed to be? I guess I with this setup
> >> can use GDALs basic function but all the functions which rely on
> >> other libs (which I have not tested/any knowledge of yet) are not
> >> available? For example reading and writing of GeoTiff images? (That
> >> is possible via the C#-bindings?)
> >> For now I think I'm content with coordinate translation but I think I
> >> want to try how efficient GDAL is to use when importing maps of
> >> different formats. It would be nice to be able to rip directly from
> >> GeoTiff (or RIK) with GDAL.
> >>
> >> Perhaps a bit OT but:
> >> In basic it boils down to that I have now not a clear idea how to
> >> distribute the plugin I am building. Demand that FWTools are
> >> installed or include the nessecary dlls? O well, there is time left
> >> to think about that.
> >>
> >> /Tomas
> >>
> >> Tamas Szekeres skrev:
> >>> Oops!  Some recent changes in gdal have been interfering with this
> >>> setting. I've now fixed up the problem in the gdal-trunk and set the
> >>> default option to link the C# dll-s dynamically to the gdal libraries.
> >>> Please, checkout the latest version and repeat your tests.
> >>>
> >>> It must be noted that after this change the gdal14.dll should be
> >>> available to load when running the application or the 'nmake -f
> >>> makefile.vc test' target.
> >>>
> >>> Best regards,
> >>>
> >>> Tamas
> >>>
> >>>
> >>> 2007/5/10, Tomas R <monshi@home.se>:
> >>>> I thought  I had the issue solved, that I had managed to compile the
> >>>> correct C# bindings and so on.
> >>>>
> >>>> But, sadly no.
> >>>> What have I got?
> >>>> FWtools 3.0
> >>>> Gdal source, from the latest Trunk
> >>>> Got the whole SDK-kit from MS, Swig 1.3.31 and Visual Studio
> >>>> Express C++
> >>>>
> >>>> I manage to compile the whole GDAL-project. I manage to compile C#
> >>>> bindings with CSHARP_STATIC_LINKAGE = YES and CSHARP_STATIC_LINKAGE
> >>>> = NO
> >>>> but NOT with it commented out.
> >>>> The compile with CSHARP_STATIC_LINKAGE = NO do not seem to affect the
> >>>> result as would be needed. When I try to set up a SpatialReference
> >>>> with
> >>>> an EPSG-code I still get a 6.
> >>>>
> >>>> With CSHARP_STATIC_LINKAGE  commented out the compilation halts when
> >>>> creating gdal_wrap.dll:
> >>>> > LINK : gdal_wrap.dll not found or not built by the last
> >>>> incremental link; perfor
> >>>> > ming full link
> >>>> >    Creating library gdal_wrap.lib and object gdal_wrap.exp
> >>>> > gdal_wrap.obj : error LNK2019: unresolved external symbol
> >>>> _GDALIdentifyDriver@8
> >>>> > referenced in function "void * __cdecl IdentifyDriver(char const
> >>>> *,char * *)" (?
> >>>> > IdentifyDriver@@YAPAXPBDPAPAD@Z)
> >>>> > gdal_wrap.dll : fatal error LNK1120: 1 unresolved externals
> >>>> > NMAKE : fatal error U1077: '"C:\Program\Microsoft Visual Studio
> >>>> 8\VC\BIN\link.EX
> >>>> > E"' : return code '0x460'
> >>>> > Stop.
> >>>>
> >>>> Why is it never as simple? Do I miss something?
> >>>>
> >>>> /Tomas
> >>>>
> >>>>
> >>>> Tamas Szekeres skrev:
> >>>> > Tomas,
> >>>> >
> >>>> > You'll have to comment out the
> >>>> > CSHARP_STATIC_LINKAGE = YES
> >>>> > in csharp.opt and recompile the C# interface. Using this setting the
> >>>> > csharp dll-s will link against the gdal14.dll so the
> >>>> > PushFinderLocation and ImportFromEPSG will operate on the same
> >>>> global
> >>>> > data. In the future I consider to use this setting as the default
> >>>> > option.
> >>>> >
> >>>> > BTW: I would propose to use the latest development version of the C#
> >>>> > related stuff. There were some fundamental changes in the interface
> >>>> > that might cause some changes in the existing code. For more
> >>>> > information see:
> >>>> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> >>>> >
> >>>> > You might also use the binaries of the latest FWTools
> >>>> > http://test.gdal.org/fwtools/FWTools130.exe
> >>>> > and replace the *_wrap.dll-s and *_csharp.dll-s inside with the
> >>>> > compiled version.
> >>>> >
> >>>> > Best regards,
> >>>> >
> >>>> > Tamas
> >>>> >
> >>>> >
> >>>> >
> >>>>
> >>>> _______________________________________________
> >>>> Gdal-dev mailing list
> >>>> Gdal-dev@lists.maptools.org
> >>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> >>>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ivan.lucena at pmldnet.com  Fri May 11 18:25:32 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4644D734.8@loskot.net>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
Message-ID: <000001c7941b$4fb55460$0a0a0a0a@idrisi.clarku.edu>

Mateusz,

> 7.1), but he uses ie. VS2005, they he won't be able to run debug builds,
> because there are no debug versions of 7.1 CRT DLLs available in the
> system.

I could be completely wrong, but I think that once you decided to do
debugging it doesn't mean that all the DLL that you use should to be
compiled for debugging.

I am using VC2005 to compile and debug in GDAL and I can use  "...Visual
Studio 8\Common7\Tools\Bin\Depends.exe", the "Dependency Walker", and it is
reporting that gdal_translate.exe is using MSVCR80.DLL not MSVCR80D.DLL.

It could be something else.

Regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Friday, May 11, 2007 4:51 PM
To: Frank Warmerdam
Cc: gdal-dev
Subject: Re: [Gdal-dev] Win32 Binaries

Frank Warmerdam wrote:
> Folks,
> 
> I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.
> 
>   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
>   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip
> 
> This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
> that C applications (like gdalinfo.c) can be built against these libraries
> using other compilers - I tested with VC6.

Frank,

AFAIU, the dev version is dedicated for developers,
so they are supposed to build their applications in Debug mode.
If a user does not use Visual Studio .NET 2003 (compiler Visual C++
7.1), but he uses ie. VS2005, they he won't be able to run debug builds,
because there are no debug versions of 7.1 CRT DLLs available in the system.

The problem is that all debug libraries shipped with Visual Studio
are not redistributable, and they can not be distributed, AFAIK
according to EULA.

Summarizing, GDAL devel package prepared with VS.NET2003 is unusable
with VS2005.

I'd suppose that similar problem is with Visual Studio .NET 2002 and
6.0, isn't it?

> The executables and corresponding gdal14.dll are fairly minimimal.  I
> used the default set of built-in drivers.  No external libraries were
> used.

Is this correct, that there are only debug version of binaries
in the dev package and release versions are missing?

> I'd appreciate folks trying these out a bit and let me know of problems
> encountered.

I started testing these binaries, and the non-devel version works so
far, but the devel one is unusable for me, as far as I tested.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Fri May 11 18:54:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f226qk$jpk$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>
	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>
	<f1s453$7tc$1@sea.gmane.org> <f1spsg$qh4$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org>
	<f3b73b7d0705110517y5441d1f4u1accba113ecacc16@mail.gmail.com>
	<f226qk$jpk$1@sea.gmane.org>
Message-ID: <f3b73b7d0705111554v51caeedamd9ed452a61c378cf@mail.gmail.com>

2007/5/11, Tomas R <monshi@home.se>:
> Some Q's arises from what you have written:
> Anyway to single out which DLLs that provide the functions I need?
> If I use my own build of gdal will the dll have the necessary bindings
> to the dll-files distributed with FWtool?

It depends on which parts of the functionality is actually used. Most
of the dll-s are loaded dynamically on demand so you cannot use the
Dependency Walker to find out those ones.
You might use a file monitoring tool like SysInternals filemon to see
which dll-s are to be loaded to your executable. FWTools should
contain all of the dependencies of the GDAL/OGR libraries.

> But on the other hand I guess I can, in the next release of FWTool, grab
> the whole bunch of dlls and data-files and use them. This solution is
> only for a short  time, I will not have to compile gdal myself after
> FWTool has been upgraded.
>

Our intention is to isolate the gdal core functionality from the C#
inteface so these dll-s might also be distributed separately. But
indeed you might use that version without compiling it manually. But
if you have a self-propelling application you might want to distribute
all the necessary files along with your package not requiring the user
to go for additional installers.

> And is it necessary to set the system path to make it possible for the
> Csharp bindings to find the gdal dll? It isn't possible to find them by
> a path stored/computed by my code?
>

I would prefer storing those files in a local place available solely
for your application. Should avoid affecting the system settings and
copying the files in the system directory to keep away the dll hell
issues.  Instead, we might want to maintain multiple versions of the
files side by side as much as we can on a particular system. I think
you cannot alter the dll search paths programatically, but in some
cases you might use environment variables (like GDAL_DRIVER_PATH) to
affect the default behaviour.


Best regards,

Tamas

From matt.wilkie at gov.yk.ca  Fri May 11 19:51:03 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Importing ESRI .hdr Labelled raster
	via	r.in.gdaldisplays strange aliasing pattern
In-Reply-To: <CA803441152AAE40935609509953BAD20F7155@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F7152@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F7155@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <46450167.605@gov.yk.ca>

Hi Eric,

> Sorry for clogging the bandwidth.

I see a problem, followed shortly by a solution. That's signal, not noise!

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Jukka.Rahkonen at mmmtike.fi  Sat May 12 06:08:49 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Projection definitions for epsg:2391-2393 (Finnish KKJ)
Message-ID: <CC197224AC75CE4DB23F739B16891B866688B8@tikka.haapa.mmm.fi>

Hello,

For some reasons there are two versions of Finnish KKJ parameters hanging around in the projection libraries.  I checked that the situation is the same at least in MS4W and FW Tools Windows packages.  In the files "\FWTools1.2.2\proj_lib\epsg" and "\ms4w\proj\nad\epsg" the definition are like this:
<2393> +proj=tmerc +lat_0=0 +lon_0=27 +k=1.000000 +x_0=3500000 +y_0=0 +ellps=intl +units=m +no_defs  <>

In the same directories the corresponding "esri" files include also the towgs84 parameters:
<2393> +proj=tmerc +lat_0=0 +lon_0=27 +k=1.000000 +x_0=3500000 +y_0=0 +ellps=intl +towgs84=-90.7,-106.1,-119.2,4.09,0.218,-1.05,1.37 +units=m +no_defs  no_defs <>

In practice this means that if you re-project something to/from anything else than between the KKJ zones
a) Projections given as epsg:2393 and esri:2393 (or taken from esri .prj file) will lead to different result.
b) If epsg-reference is used the result is always wrong resulting to something like 100-150 metre position error.

I think that the definitions in epsg file should be corrected. Or is there some reason, historical or other, for not including the towgs84 parameters there?

Regards,

-Jukka Rahkonen-



From monshi at home.se  Sat May 12 07:39:53 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f21ac3$85t$1@sea.gmane.org>	<f222cg$3d0$1@sea.gmane.org>
	<f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>
Message-ID: <f2492g$e3i$1@sea.gmane.org>

Oh, did I post that version when I tried to go from WGS84 to WGS84. Have 
tried it before and then it changed nothing but still a test if the call 
works.

Tried your code and, no.. I have no idea why it won't work. But my guess 
is something work with compilation of gdal... Perhaps. (some path that 
perhaps needs to be set before compilation?)

Worth mentioning  is perhaps that GDALinfo, the included example, work. 
The include OSRTransform example give the same error as my own code. 
Would have been a bit surprised if not.

It works to allocate the SpatialReferences and the CoordinateTransform, 
it is the call to transform the two points that fails.

Call stack:
>      [External Code]    
> >   
>  ogr_csharp.dll!OSGeo.OGR.CoordinateTransformation.TransformPoint(double[] 
> argout = {Dimensions:[3]}, double x = 1620000.0, double y = 6597000.0, 
> double z = 0.0) Line 57 + 0x2c bytes    C#
>      GdalTest1.exe!GdalTest.Form1.button5_Click(object sender = {Text 
> = "button5"}, System.EventArgs e = {X = 54 Y = 11 Button = Left}) Line 
> 101 + 0x2b bytes    C#
>      [External Code]    
>      GdalTest1.exe!GdalTest.Program.Main() Line 17 + 0x1a bytes    C#
>      [External Code]    
As you can see it is runs from a Window Application but that should not 
have anything to do with.
The whole exception. A short translation of the message is, as previous 
said, " A try to read to read or write to protected memory. This 
indicates often that another memory is damaged."
> System.AccessViolationException was unhandled
>   Message="Det gjordes ett f?rs?k att l?sa eller skriva till skyddat 
> minne. Detta indikerar ofta att annat minne ?r skadat."
>   Source="ogr_csharp"
>   StackTrace:
>        vid 
> OSGeo.OGR.OsrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(HandleRef 
> jarg1, Double[] jarg2, Double jarg3, Double jarg4, Double jarg5)
>        vid OSGeo.OGR.CoordinateTransformation.TransformPoint(Double[] 
> argout, Double x, Double y, Double z) i c:\Documents and 
> Settings\Tomas\Skrivbord\GDalDoc\trunk\gdal\swig\csharp\ogr\CoordinateTransformation.cs:rad 
> 57
>        vid GdalTest.Form1.button5_Click(Object sender, EventArgs e) i 
> d:\Documents and Settings\Tomas\Mina dokument\Visual Studio 
> 2005\Projects\GdalTest1\GdalTest1\code\Form1.cs:rad 101
>

I downloaded the latest trunk and compiled with no error. Set references 
to the four CSharp-dlls and included gdal14.dll and the wrapper dlls in 
the project, all files after compilation in same folder. But when I run 
the code, same error.

And as said before: Environment to compile in is Visual Studio Express 
C++, 2005 environment for developing is Visual Studio Express C# 2005.
Nothing strange.. Version 1.4.1 I have managed to compile and run... But 
of course not EPSG-codes in v 1.4.1



Tamas Szekeres skrev:
> Tomas,
>
> I couldn't find out what is the actual value of your WGS variable in
> SpatialReference wgs84 = new SpatialReference(WGS);
>
> In addition CoordinateTransformation(wgs84, wgs84); doesn't seem to do
> anything with the coordinate values.
> Here is my equivalent code that worked:
>
> int rtX = 1620000;
>                 int rtY = 6597000;
>                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
> Files\FWTools1.3.0\data");
>                 Gdal.PushFinderLocation(@"C:\Program 
> Files\FWTools1.3.0\data");
>                 SpatialReference source = new SpatialReference("");
>
>                 int res = source.ImportFromEPSG(3021);
>                 string srcTest, dstTest;
>                 source.ExportToWkt(out srcTest);
>                 Console.WriteLine(srcTest);
>                 SpatialReference wgs84 = new SpatialReference("");
>                 wgs84.SetWellKnownGeogCS("WGS84");
>                 wgs84.ExportToWkt(out dstTest);
>                 Console.WriteLine(dstTest);
>
>
>                 CoordinateTransformation toWGS = new
> CoordinateTransformation(source, wgs84);
>                 double[] data = new double[3];
>                 toWGS.TransformPoint(data, rtX, rtY, 0);
>                 Console.WriteLine(data[0].ToString() + " " +
> data[1].ToString());
>
>
> However your memory corruption issue is somewhat frustrating, do you
> have a call stack for this error?
>
> Best regards,
>
> Tamas
>
>
> 2007/5/11, Tomas R <monshi@home.se>:
>> I have received two answers in my mailbox but don't see them here. I
>> reply to one of them:
>> The code I use to produce the error is:
>> >                 int rtX = 1620000;
>> >                 int rtY = 6597000;
>> >                 Gdal.SetConfigOption("GDAL_DATA",
>> > @"C:\Program\FWTools1.3.0\data");
>> >                 
>> Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
>> >                 SpatialReference source = new SpatialReference("");
>> >
>> >                 int res = source.ImportFromEPSG(3021);
>> >                 string srcTest, dstTest;
>> >                 source.ExportToWkt(out srcTest);
>> >                 put(srcTest);
>> >                 SpatialReference wgs84 = new SpatialReference(WGS);
>> >                 wgs84.ExportToWkt(out dstTest);
>> >                 put(dstTest);
>> >
>> >
>> >                 CoordinateTransformation toWGS = new
>> > CoordinateTransformation(wgs84, wgs84);
>> >                 double[] data = new double[3];
>> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
>> >                 put(data[0].ToString() + " " + data[1].ToString());
>> Where Put is just a call to a routine which displays the text on screen.
>> Without gdal14.dll or all the wrapper dlls included in the project the
>> code halts at first call to Gdal. With the wrappers and the gdal dll
>> included in the project the SpatialRefernces are correctly initialized
>> (wgs from a WKT-string, just for testing, source from ESPG  (have tested
>> other than RT90)) but instead it halts at call to TransformPoint.  The
>> exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have
>> tested with both reference to OGR and OSR.
>> I have also tried copying all dlls from FWTool to the project but with
>> no difference.
>>
>> Thank you for your help! The time you take to clear this up is highly
>> appreciated!
>> Yours
>> Tomas
>>
>>
>> This was in answer to
>> > Could you post your example that produces this behaviour? I haven't
>> > found this issue when using a similar test you have mentioned.
>> >
>> > Tamas
>>
>>
>>
>> Tomas R skrev:
>> > Again I was a bit to quick when reporting success.
>> > Yes, now I am able to create a SpatialReference from an EPSG code and
>> > from Proj4 (not tested WKT)
>> > And I am able to create a CoordinaTransform object from those
>> > spatialreferences.
>> > But I'm not able to perform an actual coordinate transformation, an
>> > exception is thrown (trying to read or write to  protected (in
>> > ogr_sharp.dll).
>> >
>> > So, again I ask:
>> > Have I missed some step or is it still something in GDAL that doesn't
>> > work?
>> >
>> > /Tomas
>> >
>> > Tomas R skrev:
>> >> Ok Tamas, it kind of works...
>> >>
>> >> I followed the steps you have described for me and those I found on
>> >> the Wiki:
>> >> 1: Downloaded latest trunk
>> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
>> >> first, I guess just the first)
>> >> 3: Created the C# interface and compiled it.
>> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> >> 5: Added the new CSharp-dlls to my C# project.
>> >> 6: Checked that the system path contains FWTools1.3.0\bin folder
>> >> If I try running my project after those steps I get an exception when
>> >> trying to call GDAL, whatever *_wrap.dll that is called is not
>> >> found/not possible to load.
>> >>
>> >> When I add the wrap-dlls to the "root" of my C#-project, no apparent
>> >> change.
>> >> When I copy the GDAL-dll to my projects root and include it in the
>> >> build, together with the wrap-dlls, it works!
>> >> But is this how it now is supposed to be? I guess I with this setup
>> >> can use GDALs basic function but all the functions which rely on
>> >> other libs (which I have not tested/any knowledge of yet) are not
>> >> available? For example reading and writing of GeoTiff images? (That
>> >> is possible via the C#-bindings?)
>> >> For now I think I'm content with coordinate translation but I think I
>> >> want to try how efficient GDAL is to use when importing maps of
>> >> different formats. It would be nice to be able to rip directly from
>> >> GeoTiff (or RIK) with GDAL.
>> >>
>> >> Perhaps a bit OT but:
>> >> In basic it boils down to that I have now not a clear idea how to
>> >> distribute the plugin I am building. Demand that FWTools are
>> >> installed or include the nessecary dlls? O well, there is time left
>> >> to think about that.
>> >>
>> >> /Tomas
>> >>


From monshi at home.se  Sat May 12 07:52:57 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705111554v51caeedamd9ed452a61c378cf@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>	<f3b73b7d0705090140v7ae70f66xccf59ac860efd61d@mail.gmail.com>	<f1s453$7tc$1@sea.gmane.org>
	<f1spsg$qh4$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>	<f3b73b7d0705110517y5441d1f4u1accba113ecacc16@mail.gmail.com>	<f226qk$jpk$1@sea.gmane.org>
	<f3b73b7d0705111554v51caeedamd9ed452a61c378cf@mail.gmail.com>
Message-ID: <f249r1$hp4$1@sea.gmane.org>

In short:
I can copy, from FWTools, the necessary DLLs and distribute them with my 
application. Just see to that they are stored in the same folder as my 
application.  This I actually did during first tests with GDAL so I know 
it work. Now, during development, it is easier to have a system path to 
where the DLL-s are.

Funny thing  is:
Size of program my plugin is for, around 7 MB.
My plugin, about 100 kB.(one dll)
Included GDAL-dlls, about 30 MB.(can probably isolate the dll-s I need, 
down to  15 MB I think)
Not a problem, just... well

Let this discussion rest until I have a fully operational GDAL to work with.

Tamas Szekeres skrev:
> 2007/5/11, Tomas R <monshi@home.se>:
>> Some Q's arises from what you have written:
>> Anyway to single out which DLLs that provide the functions I need?
>> If I use my own build of gdal will the dll have the necessary bindings
>> to the dll-files distributed with FWtool?
>
> It depends on which parts of the functionality is actually used. Most
> of the dll-s are loaded dynamically on demand so you cannot use the
> Dependency Walker to find out those ones.
> You might use a file monitoring tool like SysInternals filemon to see
> which dll-s are to be loaded to your executable. FWTools should
> contain all of the dependencies of the GDAL/OGR libraries.
>
>> But on the other hand I guess I can, in the next release of FWTool, grab
>> the whole bunch of dlls and data-files and use them. This solution is
>> only for a short  time, I will not have to compile gdal myself after
>> FWTool has been upgraded.
>>
>
> Our intention is to isolate the gdal core functionality from the C#
> inteface so these dll-s might also be distributed separately. But
> indeed you might use that version without compiling it manually. But
> if you have a self-propelling application you might want to distribute
> all the necessary files along with your package not requiring the user
> to go for additional installers.
>
>> And is it necessary to set the system path to make it possible for the
>> Csharp bindings to find the gdal dll? It isn't possible to find them by
>> a path stored/computed by my code?
>>
>
> I would prefer storing those files in a local place available solely
> for your application. Should avoid affecting the system settings and
> copying the files in the system directory to keep away the dll hell
> issues.  Instead, we might want to maintain multiple versions of the
> files side by side as much as we can on a particular system. I think
> you cannot alter the dll search paths programatically, but in some
> cases you might use environment variables (like GDAL_DRIVER_PATH) to
> affect the default behaviour.
>
>
> Best regards,
>
> Tamas


From ivan.lucena at pmldnet.com  Sat May 12 09:48:32 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] VS2005 SP 1 warning
Message-ID: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>

Folks,

I was doing some test with the GDAL binary distribution and VS2005 crashed
on me.

I recently updated VC2005 SP 1 and my advice for those that us VC2005 is
"Don't!"

In the msdn blogs they are talking about all kind of issues but the bottom
line is that if you follow the steps:

- Open VC2005, 
- Create new Project,  (any type)
- Compile: *Crashs*

Or 

- Open that project again
- Open project property pages
- Open linker
- Open "Command Line: *Crashs*

Good news is that this problem does not affect the makegdal80.sh and the
makefile.vc.

Ivan

PS.

This the "Crt-C, Crt-V" of the error message window:

---------------------------
Microsoft Visual C++ Runtime Library
---------------------------
Runtime Error!

Program: C:\Pro...



This application has requested the Runtime to terminate it in an unusual
way.
Please contact the application's support team for more information.


---------------------------
OK   
---------------------------



From emiliomayorga at gmail.com  Sat May 12 10:36:39 2007
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: gdal 1.4.1 python 2.4 windows executables
Message-ID: <b0d146420705120736x31c80672g4ec05be072a65814@mail.gmail.com>

> > I am interested in making "core binaries" for win32 part of the funded
> > GDAL maintainer workload, but it isn't at all clear that this will include
> > Python packages.
>
> I sure hope it will.
>
> The easiest thing for Windows users is to have binaries for each
> release, for each recent version of Python (I think the two most recent
> is good enough -- i.e. 2.4 and 2.5). However, barring that, at least is
> should be all set up to build with distutils. That way at least anyone
> with the right compiler can "just build it". Indeed, then they could
> donate the binaries back to the project.

I'd like to add myself to the (small?) chorus. It'd be terrific to
have GDAL Windows binaries for recent versions of Python (I agree that
2.4 & 2.5 is good enough). FWTools is great, but stand-alone GDAL
packages that can be integrated with the available Python installation
would provide the most flexibility.

To illustrate... I'm currently developing a package of models of
global river nutrient export to the oceans
(http://www.marine.rutgers.edu/globalnews/); I'm taking the work
previously published by our work group, including implementations in a
set of Excel spreadsheets, and integrating them into one package that
uses Numpy to provide Matlab-like, clean access to the model equations
and data input/output. GIS pre-processing (raster to tables as "zonal"
statistics for watersheds) is done behind the scenes. Our partners
(scientists, new to Python) need to be able to install this package on
their systems, with minimal hassle; on Windows, currently that's just
Python and Numpy, very simple. For the GIS part I chose to use ArcGIS
geoprocessing for expediency. StarSpan
(http://starspan.casil.ucdavis.edu/) unfortunately wasn't an option
b/c it's missing a bit of functionality, is apparently not
straightforward to install on Windows, and seems orphaned at this
time. FWTools on top of a separate Python install would've created too
much complexity and the Numpy bindings are not there yet (?).

Python with Numpy, matplotlib, SciPy, and GDAL (with the "Next Gen"
Numpy bindings), all easy to install: wow, that'd be one sweet,
compelling environment for earth science computing/"geoinformatics"!

Unfortunately, I'm not offering to help create these executables
either. I wish I could send money your way, but I seriously doubt our
funders appreciate the benefits of this sort of support for external
developers that's not very specific to the goals of our project.

Thanks for all the great work. Cheers,

-Emilio Mayorga
Rutgers, The State University of New Jersey
Institute of Marine and Coastal Sciences
71 Dudley Rd.
New Brunswick, NJ, USA 08901-8521

From szekerest at gmail.com  Sat May 12 12:14:19 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705120907m4e6b7460q68ee8312288c80d@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>
	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>
	<f1v6f0$ugf$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org> <f21ac3$85t$1@sea.gmane.org>
	<f222cg$3d0$1@sea.gmane.org>
	<f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>
	<f2492g$e3i$1@sea.gmane.org>
	<f3b73b7d0705120907m4e6b7460q68ee8312288c80d@mail.gmail.com>
Message-ID: <f3b73b7d0705120914o5c97bcf2v294dbe3b798afeef@mail.gmail.com>

Tomas,

I've eventually created a sample Windows application which executes
the expected code when the button is clicked and the results are
written into a textbox. I've attached the Visual Studio 2005 project
to this mail including the necessary dll-s. You might alter
SetConfigOption PushFinderLocation according to the place of your
FWTools installation.

In my experience when the proj.dll is removed from the application
directory that memory corruption error may arise in that case when the
%PATH% environment variable does not contain a proper location for the
proj.dll in the system.

Best regards,

Tamas


2007/5/12, Tomas R <monshi@home.se>:
> Oh, did I post that version when I tried to go from WGS84 to WGS84. Have
> tried it before and then it changed nothing but still a test if the call
> works.
>
> Tried your code and, no.. I have no idea why it won't work. But my guess
> is something work with compilation of gdal... Perhaps. (some path that
> perhaps needs to be set before compilation?)
>
> Worth mentioning  is perhaps that GDALinfo, the included example, work.
> The include OSRTransform example give the same error as my own code.
> Would have been a bit surprised if not.
>
> It works to allocate the SpatialReferences and the CoordinateTransform,
> it is the call to transform the two points that fails.
>
> Call stack:
> >      [External Code]
> > >
> >  ogr_csharp.dll!OSGeo.OGR.CoordinateTransformation.TransformPoint(double[]
> > argout = {Dimensions:[3]}, double x = 1620000.0, double y = 6597000.0,
> > double z = 0.0) Line 57 + 0x2c bytes    C#
> >      GdalTest1.exe!GdalTest.Form1.button5_Click(object sender = {Text
> > = "button5"}, System.EventArgs e = {X = 54 Y = 11 Button = Left}) Line
> > 101 + 0x2b bytes    C#
> >      [External Code]
> >      GdalTest1.exe!GdalTest.Program.Main() Line 17 + 0x1a bytes    C#
> >      [External Code]
> As you can see it is runs from a Window Application but that should not
> have anything to do with.
> The whole exception. A short translation of the message is, as previous
> said, " A try to read to read or write to protected memory. This
> indicates often that another memory is damaged."
> > System.AccessViolationException was unhandled
> >   Message="Det gjordes ett f?rs?k att l?sa eller skriva till skyddat
> > minne. Detta indikerar ofta att annat minne ?r skadat."
> >   Source="ogr_csharp"
> >   StackTrace:
> >        vid
> > OSGeo.OGR.OsrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(HandleRef
> > jarg1, Double[] jarg2, Double jarg3, Double jarg4, Double jarg5)
> >        vid OSGeo.OGR.CoordinateTransformation.TransformPoint(Double[]
> > argout, Double x, Double y, Double z) i c:\Documents and
> > Settings\Tomas\Skrivbord\GDalDoc\trunk\gdal\swig\csharp\ogr\CoordinateTransformation.cs:rad
> > 57
> >        vid GdalTest.Form1.button5_Click(Object sender, EventArgs e) i
> > d:\Documents and Settings\Tomas\Mina dokument\Visual Studio
> > 2005\Projects\GdalTest1\GdalTest1\code\Form1.cs:rad 101
> >
>
> I downloaded the latest trunk and compiled with no error. Set references
> to the four CSharp-dlls and included gdal14.dll and the wrapper dlls in
> the project, all files after compilation in same folder. But when I run
> the code, same error.
>
> And as said before: Environment to compile in is Visual Studio Express
> C++, 2005 environment for developing is Visual Studio Express C# 2005.
> Nothing strange.. Version 1.4.1 I have managed to compile and run... But
> of course not EPSG-codes in v 1.4.1
>
>
>
> Tamas Szekeres skrev:
> > Tomas,
> >
> > I couldn't find out what is the actual value of your WGS variable in
> > SpatialReference wgs84 = new SpatialReference(WGS);
> >
> > In addition CoordinateTransformation(wgs84, wgs84); doesn't seem to do
> > anything with the coordinate values.
> > Here is my equivalent code that worked:
> >
> > int rtX = 1620000;
> >                 int rtY = 6597000;
> >                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
> > Files\FWTools1.3.0\data");
> >                 Gdal.PushFinderLocation(@"C:\Program
> > Files\FWTools1.3.0\data");
> >                 SpatialReference source = new SpatialReference("");
> >
> >                 int res = source.ImportFromEPSG(3021);
> >                 string srcTest, dstTest;
> >                 source.ExportToWkt(out srcTest);
> >                 Console.WriteLine(srcTest);
> >                 SpatialReference wgs84 = new SpatialReference("");
> >                 wgs84.SetWellKnownGeogCS("WGS84");
> >                 wgs84.ExportToWkt(out dstTest);
> >                 Console.WriteLine(dstTest);
> >
> >
> >                 CoordinateTransformation toWGS = new
> > CoordinateTransformation(source, wgs84);
> >                 double[] data = new double[3];
> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
> >                 Console.WriteLine(data[0].ToString() + " " +
> > data[1].ToString());
> >
> >
> > However your memory corruption issue is somewhat frustrating, do you
> > have a call stack for this error?
> >
> > Best regards,
> >
> > Tamas
> >
> >
> > 2007/5/11, Tomas R <monshi@home.se>:
> >> I have received two answers in my mailbox but don't see them here. I
> >> reply to one of them:
> >> The code I use to produce the error is:
> >> >                 int rtX = 1620000;
> >> >                 int rtY = 6597000;
> >> >                 Gdal.SetConfigOption("GDAL_DATA",
> >> > @"C:\Program\FWTools1.3.0\data");
> >> >
> >> Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
> >> >                 SpatialReference source = new SpatialReference("");
> >> >
> >> >                 int res = source.ImportFromEPSG(3021);
> >> >                 string srcTest, dstTest;
> >> >                 source.ExportToWkt(out srcTest);
> >> >                 put(srcTest);
> >> >                 SpatialReference wgs84 = new SpatialReference(WGS);
> >> >                 wgs84.ExportToWkt(out dstTest);
> >> >                 put(dstTest);
> >> >
> >> >
> >> >                 CoordinateTransformation toWGS = new
> >> > CoordinateTransformation(wgs84, wgs84);
> >> >                 double[] data = new double[3];
> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
> >> >                 put(data[0].ToString() + " " + data[1].ToString());
> >> Where Put is just a call to a routine which displays the text on screen.
> >> Without gdal14.dll or all the wrapper dlls included in the project the
> >> code halts at first call to Gdal. With the wrappers and the gdal dll
> >> included in the project the SpatialRefernces are correctly initialized
> >> (wgs from a WKT-string, just for testing, source from ESPG  (have tested
> >> other than RT90)) but instead it halts at call to TransformPoint.  The
> >> exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have
> >> tested with both reference to OGR and OSR.
> >> I have also tried copying all dlls from FWTool to the project but with
> >> no difference.
> >>
> >> Thank you for your help! The time you take to clear this up is highly
> >> appreciated!
> >> Yours
> >> Tomas
> >>
> >>
> >> This was in answer to
> >> > Could you post your example that produces this behaviour? I haven't
> >> > found this issue when using a similar test you have mentioned.
> >> >
> >> > Tamas
> >>
> >>
> >>
> >> Tomas R skrev:
> >> > Again I was a bit to quick when reporting success.
> >> > Yes, now I am able to create a SpatialReference from an EPSG code and
> >> > from Proj4 (not tested WKT)
> >> > And I am able to create a CoordinaTransform object from those
> >> > spatialreferences.
> >> > But I'm not able to perform an actual coordinate transformation, an
> >> > exception is thrown (trying to read or write to  protected (in
> >> > ogr_sharp.dll).
> >> >
> >> > So, again I ask:
> >> > Have I missed some step or is it still something in GDAL that doesn't
> >> > work?
> >> >
> >> > /Tomas
> >> >
> >> > Tomas R skrev:
> >> >> Ok Tamas, it kind of works...
> >> >>
> >> >> I followed the steps you have described for me and those I found on
> >> >> the Wiki:
> >> >> 1: Downloaded latest trunk
> >> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or just the
> >> >> first, I guess just the first)
> >> >> 3: Created the C# interface and compiled it.
> >> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> >> >> 5: Added the new CSharp-dlls to my C# project.
> >> >> 6: Checked that the system path contains FWTools1.3.0\bin folder
> >> >> If I try running my project after those steps I get an exception when
> >> >> trying to call GDAL, whatever *_wrap.dll that is called is not
> >> >> found/not possible to load.
> >> >>
> >> >> When I add the wrap-dlls to the "root" of my C#-project, no apparent
> >> >> change.
> >> >> When I copy the GDAL-dll to my projects root and include it in the
> >> >> build, together with the wrap-dlls, it works!
> >> >> But is this how it now is supposed to be? I guess I with this setup
> >> >> can use GDALs basic function but all the functions which rely on
> >> >> other libs (which I have not tested/any knowledge of yet) are not
> >> >> available? For example reading and writing of GeoTiff images? (That
> >> >> is possible via the C#-bindings?)
> >> >> For now I think I'm content with coordinate translation but I think I
> >> >> want to try how efficient GDAL is to use when importing maps of
> >> >> different formats. It would be nice to be able to rip directly from
> >> >> GeoTiff (or RIK) with GDAL.
> >> >>
> >> >> Perhaps a bit OT but:
> >> >> In basic it boils down to that I have now not a clear idea how to
> >> >> distribute the plugin I am building. Demand that FWTools are
> >> >> installed or include the nessecary dlls? O well, there is time left
> >> >> to think about that.
> >> >>
> >> >> /Tomas
> >> >>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From monshi at home.se  Sat May 12 15:17:09 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705120914o5c97bcf2v294dbe3b798afeef@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>	<f3b73b7d0705091525r1978d67dub3966c51a6199b44@mail.gmail.com>	<f1v6f0$ugf$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f21ac3$85t$1@sea.gmane.org>	<f222cg$3d0$1@sea.gmane.org>	<f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>	<f2492g$e3i$1@sea.gmane.org>	<f3b73b7d0705120907m4e6b7460q68ee8312288c80d@mail.gmail.com>
	<f3b73b7d0705120914o5c97bcf2v294dbe3b798afeef@mail.gmail.com>
Message-ID: <f253rr$jd2$1@sea.gmane.org>

Ahh, it works!
Can it be as simple fact as that the proj.dll in FWTools is named 
proj_fw.dll and the binding in the gdal dll is towards proj.dll. I've 
read about that problem in other posts...

Yes, I guess it is so...

And yes - to the other branch of this thread - only viable solution in 
distribution of my application is to supply the necessary dlls together 
with the application.

Perhaps a small guideline in the wiki about the dlls required is in 
place? And links to where to find them, or compile them?

Thank you big time!
If you are into tracking your running or biking exercises with a GPS 
take a look at SportTracks. In a short time v 2.0 will be released, I 
hope, and soon thereafter my plugin will be released, I also hope.

/Tomas

Tamas Szekeres skrev:
> Tomas,
>
> I've eventually created a sample Windows application which executes
> the expected code when the button is clicked and the results are
> written into a textbox. I've attached the Visual Studio 2005 project
> to this mail including the necessary dll-s. You might alter
> SetConfigOption PushFinderLocation according to the place of your
> FWTools installation.
>
> In my experience when the proj.dll is removed from the application
> directory that memory corruption error may arise in that case when the
> %PATH% environment variable does not contain a proper location for the
> proj.dll in the system.
>
> Best regards,
>
> Tamas
>
>
> 2007/5/12, Tomas R <monshi@home.se>:
>> Oh, did I post that version when I tried to go from WGS84 to WGS84. Have
>> tried it before and then it changed nothing but still a test if the call
>> works.
>>
>> Tried your code and, no.. I have no idea why it won't work. But my guess
>> is something work with compilation of gdal... Perhaps. (some path that
>> perhaps needs to be set before compilation?)
>>
>> Worth mentioning  is perhaps that GDALinfo, the included example, work.
>> The include OSRTransform example give the same error as my own code.
>> Would have been a bit surprised if not.
>>
>> It works to allocate the SpatialReferences and the CoordinateTransform,
>> it is the call to transform the two points that fails.
>>
>> Call stack:
>> >      [External Code]
>> > >
>> >  
>> ogr_csharp.dll!OSGeo.OGR.CoordinateTransformation.TransformPoint(double[] 
>>
>> > argout = {Dimensions:[3]}, double x = 1620000.0, double y = 6597000.0,
>> > double z = 0.0) Line 57 + 0x2c bytes    C#
>> >      GdalTest1.exe!GdalTest.Form1.button5_Click(object sender = {Text
>> > = "button5"}, System.EventArgs e = {X = 54 Y = 11 Button = Left}) Line
>> > 101 + 0x2b bytes    C#
>> >      [External Code]
>> >      GdalTest1.exe!GdalTest.Program.Main() Line 17 + 0x1a bytes    C#
>> >      [External Code]
>> As you can see it is runs from a Window Application but that should not
>> have anything to do with.
>> The whole exception. A short translation of the message is, as previous
>> said, " A try to read to read or write to protected memory. This
>> indicates often that another memory is damaged."
>> > System.AccessViolationException was unhandled
>> >   Message="Det gjordes ett f?rs?k att l?sa eller skriva till skyddat
>> > minne. Detta indikerar ofta att annat minne ?r skadat."
>> >   Source="ogr_csharp"
>> >   StackTrace:
>> >        vid
>> > 
>> OSGeo.OGR.OsrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(HandleRef 
>>
>> > jarg1, Double[] jarg2, Double jarg3, Double jarg4, Double jarg5)
>> >        vid OSGeo.OGR.CoordinateTransformation.TransformPoint(Double[]
>> > argout, Double x, Double y, Double z) i c:\Documents and
>> > 
>> Settings\Tomas\Skrivbord\GDalDoc\trunk\gdal\swig\csharp\ogr\CoordinateTransformation.cs:rad 
>>
>> > 57
>> >        vid GdalTest.Form1.button5_Click(Object sender, EventArgs e) i
>> > d:\Documents and Settings\Tomas\Mina dokument\Visual Studio
>> > 2005\Projects\GdalTest1\GdalTest1\code\Form1.cs:rad 101
>> >
>>
>> I downloaded the latest trunk and compiled with no error. Set references
>> to the four CSharp-dlls and included gdal14.dll and the wrapper dlls in
>> the project, all files after compilation in same folder. But when I run
>> the code, same error.
>>
>> And as said before: Environment to compile in is Visual Studio Express
>> C++, 2005 environment for developing is Visual Studio Express C# 2005.
>> Nothing strange.. Version 1.4.1 I have managed to compile and run... But
>> of course not EPSG-codes in v 1.4.1
>>
>>
>>
>> Tamas Szekeres skrev:
>> > Tomas,
>> >
>> > I couldn't find out what is the actual value of your WGS variable in
>> > SpatialReference wgs84 = new SpatialReference(WGS);
>> >
>> > In addition CoordinateTransformation(wgs84, wgs84); doesn't seem to do
>> > anything with the coordinate values.
>> > Here is my equivalent code that worked:
>> >
>> > int rtX = 1620000;
>> >                 int rtY = 6597000;
>> >                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
>> > Files\FWTools1.3.0\data");
>> >                 Gdal.PushFinderLocation(@"C:\Program
>> > Files\FWTools1.3.0\data");
>> >                 SpatialReference source = new SpatialReference("");
>> >
>> >                 int res = source.ImportFromEPSG(3021);
>> >                 string srcTest, dstTest;
>> >                 source.ExportToWkt(out srcTest);
>> >                 Console.WriteLine(srcTest);
>> >                 SpatialReference wgs84 = new SpatialReference("");
>> >                 wgs84.SetWellKnownGeogCS("WGS84");
>> >                 wgs84.ExportToWkt(out dstTest);
>> >                 Console.WriteLine(dstTest);
>> >
>> >
>> >                 CoordinateTransformation toWGS = new
>> > CoordinateTransformation(source, wgs84);
>> >                 double[] data = new double[3];
>> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
>> >                 Console.WriteLine(data[0].ToString() + " " +
>> > data[1].ToString());
>> >
>> >
>> > However your memory corruption issue is somewhat frustrating, do you
>> > have a call stack for this error?
>> >
>> > Best regards,
>> >
>> > Tamas
>> >
>> >
>> > 2007/5/11, Tomas R <monshi@home.se>:
>> >> I have received two answers in my mailbox but don't see them here. I
>> >> reply to one of them:
>> >> The code I use to produce the error is:
>> >> >                 int rtX = 1620000;
>> >> >                 int rtY = 6597000;
>> >> >                 Gdal.SetConfigOption("GDAL_DATA",
>> >> > @"C:\Program\FWTools1.3.0\data");
>> >> >
>> >> Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
>> >> >                 SpatialReference source = new SpatialReference("");
>> >> >
>> >> >                 int res = source.ImportFromEPSG(3021);
>> >> >                 string srcTest, dstTest;
>> >> >                 source.ExportToWkt(out srcTest);
>> >> >                 put(srcTest);
>> >> >                 SpatialReference wgs84 = new SpatialReference(WGS);
>> >> >                 wgs84.ExportToWkt(out dstTest);
>> >> >                 put(dstTest);
>> >> >
>> >> >
>> >> >                 CoordinateTransformation toWGS = new
>> >> > CoordinateTransformation(wgs84, wgs84);
>> >> >                 double[] data = new double[3];
>> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
>> >> >                 put(data[0].ToString() + " " + data[1].ToString());
>> >> Where Put is just a call to a routine which displays the text on 
>> screen.
>> >> Without gdal14.dll or all the wrapper dlls included in the project 
>> the
>> >> code halts at first call to Gdal. With the wrappers and the gdal dll
>> >> included in the project the SpatialRefernces are correctly 
>> initialized
>> >> (wgs from a WKT-string, just for testing, source from ESPG  (have 
>> tested
>> >> other than RT90)) but instead it halts at call to TransformPoint.  
>> The
>> >> exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have
>> >> tested with both reference to OGR and OSR.
>> >> I have also tried copying all dlls from FWTool to the project but 
>> with
>> >> no difference.
>> >>
>> >> Thank you for your help! The time you take to clear this up is highly
>> >> appreciated!
>> >> Yours
>> >> Tomas
>> >>
>> >>
>> >> This was in answer to
>> >> > Could you post your example that produces this behaviour? I haven't
>> >> > found this issue when using a similar test you have mentioned.
>> >> >
>> >> > Tamas
>> >>
>> >>
>> >>
>> >> Tomas R skrev:
>> >> > Again I was a bit to quick when reporting success.
>> >> > Yes, now I am able to create a SpatialReference from an EPSG 
>> code and
>> >> > from Proj4 (not tested WKT)
>> >> > And I am able to create a CoordinaTransform object from those
>> >> > spatialreferences.
>> >> > But I'm not able to perform an actual coordinate transformation, an
>> >> > exception is thrown (trying to read or write to  protected (in
>> >> > ogr_sharp.dll).
>> >> >
>> >> > So, again I ask:
>> >> > Have I missed some step or is it still something in GDAL that 
>> doesn't
>> >> > work?
>> >> >
>> >> > /Tomas
>> >> >
>> >> > Tomas R skrev:
>> >> >> Ok Tamas, it kind of works...
>> >> >>
>> >> >> I followed the steps you have described for me and those I 
>> found on
>> >> >> the Wiki:
>> >> >> 1: Downloaded latest trunk
>> >> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or 
>> just the
>> >> >> first, I guess just the first)
>> >> >> 3: Created the C# interface and compiled it.
>> >> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> >> >> 5: Added the new CSharp-dlls to my C# project.
>> >> >> 6: Checked that the system path contains FWTools1.3.0\bin folder
>> >> >> If I try running my project after those steps I get an 
>> exception when
>> >> >> trying to call GDAL, whatever *_wrap.dll that is called is not
>> >> >> found/not possible to load.
>> >> >>
>> >> >> When I add the wrap-dlls to the "root" of my C#-project, no 
>> apparent
>> >> >> change.
>> >> >> When I copy the GDAL-dll to my projects root and include it in the
>> >> >> build, together with the wrap-dlls, it works!
>> >> >> But is this how it now is supposed to be? I guess I with this 
>> setup
>> >> >> can use GDALs basic function but all the functions which rely on
>> >> >> other libs (which I have not tested/any knowledge of yet) are not
>> >> >> available? For example reading and writing of GeoTiff images? 
>> (That
>> >> >> is possible via the C#-bindings?)
>> >> >> For now I think I'm content with coordinate translation but I 
>> think I
>> >> >> want to try how efficient GDAL is to use when importing maps of
>> >> >> different formats. It would be nice to be able to rip directly 
>> from
>> >> >> GeoTiff (or RIK) with GDAL.
>> >> >>
>> >> >> Perhaps a bit OT but:
>> >> >> In basic it boils down to that I have now not a clear idea how to
>> >> >> distribute the plugin I am building. Demand that FWTools are
>> >> >> installed or include the nessecary dlls? O well, there is time 
>> left
>> >> >> to think about that.
>> >> >>
>> >> >> /Tomas
>> >> >>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From sy at perkins.net  Sat May 12 16:33:12 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] VS2005 SP 1 warning
In-Reply-To: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>
References: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <46462488.1030202@perkins.net>

I'm not saying that VS 2005 doesn't have a few problems (which are far 
outweighed by its good points in my opinion, especially for .NET 
languages), but I've been using VS 2005 Standard with SP1 for several 
months and had no problems like the ones Ivan mentions. If I follow the 
steps described below, I don't get any crashes.

Does this maybe relate to a specific version of VS 2005? e.g Express?

Cheers,

Sy

Ivan Lucena wrote:
> Folks,
>
> I was doing some test with the GDAL binary distribution and VS2005 crashed
> on me.
>
> I recently updated VC2005 SP 1 and my advice for those that us VC2005 is
> "Don't!"
>
> In the msdn blogs they are talking about all kind of issues but the bottom
> line is that if you follow the steps:
>
> - Open VC2005, 
> - Create new Project,  (any type)
> - Compile: *Crashs*
>
> Or 
>
> - Open that project again
> - Open project property pages
> - Open linker
> - Open "Command Line: *Crashs*
>
> Good news is that this problem does not affect the makegdal80.sh and the
> makefile.vc.
>
> Ivan
>
> PS.
>
> This the "Crt-C, Crt-V" of the error message window:
>
> ---------------------------
> Microsoft Visual C++ Runtime Library
> ---------------------------
> Runtime Error!
>
> Program: C:\Pro...
>
>
>
> This application has requested the Runtime to terminate it in an unusual
> way.
> Please contact the application's support team for more information.
>
>
> ---------------------------
> OK   
> ---------------------------
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


From warmerdam at pobox.com  Sat May 12 19:33:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Motion: Add Tamas Szekeres to GDAL PSC
In-Reply-To: <464214AB.4050001@pobox.com>
References: <464214AB.4050001@pobox.com>
Message-ID: <46464ECF.6030503@pobox.com>

Frank Warmerdam wrote:
> Motion: Add Tamas Szekeres to GDAL PSC

Folks,

I declare this motion passed with +1 from Howard, Daniel and myself.  Tamas,
welcome to the PSC, and appreciate your willingness to help.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sat May 12 17:50:52 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Motion: Add Tamas Szekeres to GDAL PSC
In-Reply-To: <46464ECF.6030503@pobox.com>
References: <464214AB.4050001@pobox.com> <46464ECF.6030503@pobox.com>
Message-ID: <f3b73b7d0705121450i5021a5cct172e84d1a96c01f8@mail.gmail.com>

Thank you folks the support for me to join in the "cabal".
I'm happy to participate in steering the wheel of the most essential
open source project, the "glibc/glibc++ of the geospatial software
world" :-)
I would also happy to see more of the committed developers in this
role in the future.

Best regards,

Tamas



2007/5/13, Frank Warmerdam <warmerdam@pobox.com>:
> Frank Warmerdam wrote:
> > Motion: Add Tamas Szekeres to GDAL PSC
>
> Folks,
>
> I declare this motion passed with +1 from Howard, Daniel and myself.  Tamas,
> welcome to the PSC, and appreciate your willingness to help.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Sat May 12 19:50:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f253rr$jd2$1@sea.gmane.org>
References: <f1q1df$k87$1@sea.gmane.org>
	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>
	<f2170u$p79$1@sea.gmane.org> <f21ac3$85t$1@sea.gmane.org>
	<f222cg$3d0$1@sea.gmane.org>
	<f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>
	<f2492g$e3i$1@sea.gmane.org>
	<f3b73b7d0705120907m4e6b7460q68ee8312288c80d@mail.gmail.com>
	<f3b73b7d0705120914o5c97bcf2v294dbe3b798afeef@mail.gmail.com>
	<f253rr$jd2$1@sea.gmane.org>
Message-ID: <f3b73b7d0705121650n301e16bdl5d803903ea126ac@mail.gmail.com>

I've issued a ticket for this problem since the memory reference error
is not the convenient way to indicate that the proj.dll is not
loadable. In fact as I've recognized the exceptions are not propagated
to C# for the osr classes. Tomorrow I'll fix this problem so that an
exception will be raised with a more descriptive message ("Failed to
create coordinate transformation" in this case)

Best regards,

Tamas


2007/5/12, Tomas R <monshi@home.se>:
> Ahh, it works!
> Can it be as simple fact as that the proj.dll in FWTools is named
> proj_fw.dll and the binding in the gdal dll is towards proj.dll. I've
> read about that problem in other posts...
>
> Yes, I guess it is so...
>
> And yes - to the other branch of this thread - only viable solution in
> distribution of my application is to supply the necessary dlls together
> with the application.
>
> Perhaps a small guideline in the wiki about the dlls required is in
> place? And links to where to find them, or compile them?
>
> Thank you big time!
> If you are into tracking your running or biking exercises with a GPS
> take a look at SportTracks. In a short time v 2.0 will be released, I
> hope, and soon thereafter my plugin will be released, I also hope.
>
> /Tomas
>
> Tamas Szekeres skrev:
> > Tomas,
> >
> > I've eventually created a sample Windows application which executes
> > the expected code when the button is clicked and the results are
> > written into a textbox. I've attached the Visual Studio 2005 project
> > to this mail including the necessary dll-s. You might alter
> > SetConfigOption PushFinderLocation according to the place of your
> > FWTools installation.
> >
> > In my experience when the proj.dll is removed from the application
> > directory that memory corruption error may arise in that case when the
> > %PATH% environment variable does not contain a proper location for the
> > proj.dll in the system.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> > 2007/5/12, Tomas R <monshi@home.se>:
> >> Oh, did I post that version when I tried to go from WGS84 to WGS84. Have
> >> tried it before and then it changed nothing but still a test if the call
> >> works.
> >>
> >> Tried your code and, no.. I have no idea why it won't work. But my guess
> >> is something work with compilation of gdal... Perhaps. (some path that
> >> perhaps needs to be set before compilation?)
> >>
> >> Worth mentioning  is perhaps that GDALinfo, the included example, work.
> >> The include OSRTransform example give the same error as my own code.
> >> Would have been a bit surprised if not.
> >>
> >> It works to allocate the SpatialReferences and the CoordinateTransform,
> >> it is the call to transform the two points that fails.
> >>
> >> Call stack:
> >> >      [External Code]
> >> > >
> >> >
> >> ogr_csharp.dll!OSGeo.OGR.CoordinateTransformation.TransformPoint(double[]
> >>
> >> > argout = {Dimensions:[3]}, double x = 1620000.0, double y = 6597000.0,
> >> > double z = 0.0) Line 57 + 0x2c bytes    C#
> >> >      GdalTest1.exe!GdalTest.Form1.button5_Click(object sender = {Text
> >> > = "button5"}, System.EventArgs e = {X = 54 Y = 11 Button = Left}) Line
> >> > 101 + 0x2b bytes    C#
> >> >      [External Code]
> >> >      GdalTest1.exe!GdalTest.Program.Main() Line 17 + 0x1a bytes    C#
> >> >      [External Code]
> >> As you can see it is runs from a Window Application but that should not
> >> have anything to do with.
> >> The whole exception. A short translation of the message is, as previous
> >> said, " A try to read to read or write to protected memory. This
> >> indicates often that another memory is damaged."
> >> > System.AccessViolationException was unhandled
> >> >   Message="Det gjordes ett f?rs?k att l?sa eller skriva till skyddat
> >> > minne. Detta indikerar ofta att annat minne ?r skadat."
> >> >   Source="ogr_csharp"
> >> >   StackTrace:
> >> >        vid
> >> >
> >> OSGeo.OGR.OsrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(HandleRef
> >>
> >> > jarg1, Double[] jarg2, Double jarg3, Double jarg4, Double jarg5)
> >> >        vid OSGeo.OGR.CoordinateTransformation.TransformPoint(Double[]
> >> > argout, Double x, Double y, Double z) i c:\Documents and
> >> >
> >> Settings\Tomas\Skrivbord\GDalDoc\trunk\gdal\swig\csharp\ogr\CoordinateTransformation.cs:rad
> >>
> >> > 57
> >> >        vid GdalTest.Form1.button5_Click(Object sender, EventArgs e) i
> >> > d:\Documents and Settings\Tomas\Mina dokument\Visual Studio
> >> > 2005\Projects\GdalTest1\GdalTest1\code\Form1.cs:rad 101
> >> >
> >>
> >> I downloaded the latest trunk and compiled with no error. Set references
> >> to the four CSharp-dlls and included gdal14.dll and the wrapper dlls in
> >> the project, all files after compilation in same folder. But when I run
> >> the code, same error.
> >>
> >> And as said before: Environment to compile in is Visual Studio Express
> >> C++, 2005 environment for developing is Visual Studio Express C# 2005.
> >> Nothing strange.. Version 1.4.1 I have managed to compile and run... But
> >> of course not EPSG-codes in v 1.4.1
> >>
> >>
> >>
> >> Tamas Szekeres skrev:
> >> > Tomas,
> >> >
> >> > I couldn't find out what is the actual value of your WGS variable in
> >> > SpatialReference wgs84 = new SpatialReference(WGS);
> >> >
> >> > In addition CoordinateTransformation(wgs84, wgs84); doesn't seem to do
> >> > anything with the coordinate values.
> >> > Here is my equivalent code that worked:
> >> >
> >> > int rtX = 1620000;
> >> >                 int rtY = 6597000;
> >> >                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
> >> > Files\FWTools1.3.0\data");
> >> >                 Gdal.PushFinderLocation(@"C:\Program
> >> > Files\FWTools1.3.0\data");
> >> >                 SpatialReference source = new SpatialReference("");
> >> >
> >> >                 int res = source.ImportFromEPSG(3021);
> >> >                 string srcTest, dstTest;
> >> >                 source.ExportToWkt(out srcTest);
> >> >                 Console.WriteLine(srcTest);
> >> >                 SpatialReference wgs84 = new SpatialReference("");
> >> >                 wgs84.SetWellKnownGeogCS("WGS84");
> >> >                 wgs84.ExportToWkt(out dstTest);
> >> >                 Console.WriteLine(dstTest);
> >> >
> >> >
> >> >                 CoordinateTransformation toWGS = new
> >> > CoordinateTransformation(source, wgs84);
> >> >                 double[] data = new double[3];
> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
> >> >                 Console.WriteLine(data[0].ToString() + " " +
> >> > data[1].ToString());
> >> >
> >> >
> >> > However your memory corruption issue is somewhat frustrating, do you
> >> > have a call stack for this error?
> >> >
> >> > Best regards,
> >> >
> >> > Tamas
> >> >
> >> >
> >> > 2007/5/11, Tomas R <monshi@home.se>:
> >> >> I have received two answers in my mailbox but don't see them here. I
> >> >> reply to one of them:
> >> >> The code I use to produce the error is:
> >> >> >                 int rtX = 1620000;
> >> >> >                 int rtY = 6597000;
> >> >> >                 Gdal.SetConfigOption("GDAL_DATA",
> >> >> > @"C:\Program\FWTools1.3.0\data");
> >> >> >
> >> >> Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
> >> >> >                 SpatialReference source = new SpatialReference("");
> >> >> >
> >> >> >                 int res = source.ImportFromEPSG(3021);
> >> >> >                 string srcTest, dstTest;
> >> >> >                 source.ExportToWkt(out srcTest);
> >> >> >                 put(srcTest);
> >> >> >                 SpatialReference wgs84 = new SpatialReference(WGS);
> >> >> >                 wgs84.ExportToWkt(out dstTest);
> >> >> >                 put(dstTest);
> >> >> >
> >> >> >
> >> >> >                 CoordinateTransformation toWGS = new
> >> >> > CoordinateTransformation(wgs84, wgs84);
> >> >> >                 double[] data = new double[3];
> >> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
> >> >> >                 put(data[0].ToString() + " " + data[1].ToString());
> >> >> Where Put is just a call to a routine which displays the text on
> >> screen.
> >> >> Without gdal14.dll or all the wrapper dlls included in the project
> >> the
> >> >> code halts at first call to Gdal. With the wrappers and the gdal dll
> >> >> included in the project the SpatialRefernces are correctly
> >> initialized
> >> >> (wgs from a WKT-string, just for testing, source from ESPG  (have
> >> tested
> >> >> other than RT90)) but instead it halts at call to TransformPoint.
> >> The
> >> >> exceptions InnerException is null, error in OGR/OSR_sharp.dll. I have
> >> >> tested with both reference to OGR and OSR.
> >> >> I have also tried copying all dlls from FWTool to the project but
> >> with
> >> >> no difference.
> >> >>
> >> >> Thank you for your help! The time you take to clear this up is highly
> >> >> appreciated!
> >> >> Yours
> >> >> Tomas
> >> >>
> >> >>
> >> >> This was in answer to
> >> >> > Could you post your example that produces this behaviour? I haven't
> >> >> > found this issue when using a similar test you have mentioned.
> >> >> >
> >> >> > Tamas
> >> >>
> >> >>
> >> >>
> >> >> Tomas R skrev:
> >> >> > Again I was a bit to quick when reporting success.
> >> >> > Yes, now I am able to create a SpatialReference from an EPSG
> >> code and
> >> >> > from Proj4 (not tested WKT)
> >> >> > And I am able to create a CoordinaTransform object from those
> >> >> > spatialreferences.
> >> >> > But I'm not able to perform an actual coordinate transformation, an
> >> >> > exception is thrown (trying to read or write to  protected (in
> >> >> > ogr_sharp.dll).
> >> >> >
> >> >> > So, again I ask:
> >> >> > Have I missed some step or is it still something in GDAL that
> >> doesn't
> >> >> > work?
> >> >> >
> >> >> > /Tomas
> >> >> >
> >> >> > Tomas R skrev:
> >> >> >> Ok Tamas, it kind of works...
> >> >> >>
> >> >> >> I followed the steps you have described for me and those I
> >> found on
> >> >> >> the Wiki:
> >> >> >> 1: Downloaded latest trunk
> >> >> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or
> >> just the
> >> >> >> first, I guess just the first)
> >> >> >> 3: Created the C# interface and compiled it.
> >> >> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
> >> >> >> 5: Added the new CSharp-dlls to my C# project.
> >> >> >> 6: Checked that the system path contains FWTools1.3.0\bin folder
> >> >> >> If I try running my project after those steps I get an
> >> exception when
> >> >> >> trying to call GDAL, whatever *_wrap.dll that is called is not
> >> >> >> found/not possible to load.
> >> >> >>
> >> >> >> When I add the wrap-dlls to the "root" of my C#-project, no
> >> apparent
> >> >> >> change.
> >> >> >> When I copy the GDAL-dll to my projects root and include it in the
> >> >> >> build, together with the wrap-dlls, it works!
> >> >> >> But is this how it now is supposed to be? I guess I with this
> >> setup
> >> >> >> can use GDALs basic function but all the functions which rely on
> >> >> >> other libs (which I have not tested/any knowledge of yet) are not
> >> >> >> available? For example reading and writing of GeoTiff images?
> >> (That
> >> >> >> is possible via the C#-bindings?)
> >> >> >> For now I think I'm content with coordinate translation but I
> >> think I
> >> >> >> want to try how efficient GDAL is to use when importing maps of
> >> >> >> different formats. It would be nice to be able to rip directly
> >> from
> >> >> >> GeoTiff (or RIK) with GDAL.
> >> >> >>
> >> >> >> Perhaps a bit OT but:
> >> >> >> In basic it boils down to that I have now not a clear idea how to
> >> >> >> distribute the plugin I am building. Demand that FWTools are
> >> >> >> installed or include the nessecary dlls? O well, there is time
> >> left
> >> >> >> to think about that.
> >> >> >>
> >> >> >> /Tomas
> >> >> >>
> >>
> >> _______________________________________________
> >> Gdal-dev mailing list
> >> Gdal-dev@lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/gdal-dev
> >>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From monshi at home.se  Sun May 13 03:55:44 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Problem using EPSG in C#
In-Reply-To: <f3b73b7d0705121650n301e16bdl5d803903ea126ac@mail.gmail.com>
References: <f1q1df$k87$1@sea.gmane.org>	<f3b73b7d0705101414h512ae811pfc4755a1a6043fea@mail.gmail.com>	<f2170u$p79$1@sea.gmane.org>
	<f21ac3$85t$1@sea.gmane.org>	<f222cg$3d0$1@sea.gmane.org>	<f3b73b7d0705111515k7d29ca19hd7e099f17d5ca6b3@mail.gmail.com>	<f2492g$e3i$1@sea.gmane.org>	<f3b73b7d0705120907m4e6b7460q68ee8312288c80d@mail.gmail.com>	<f3b73b7d0705120914o5c97bcf2v294dbe3b798afeef@mail.gmail.com>	<f253rr$jd2$1@sea.gmane.org>
	<f3b73b7d0705121650n301e16bdl5d803903ea126ac@mail.gmail.com>
Message-ID: <f26ga6$jd0$1@sea.gmane.org>

Sounds like good way too solve this.

Totally OT:
Not a big problem, not my primary e-mail I have used here but still, 
seems like it has already found by some SPAM-idiots. The number of 
e-mails with the correct address has raised a bit. To bad that was what 
I knew would happen.

Yours
Tomas
Tamas Szekeres skrev:
> I've issued a ticket for this problem since the memory reference error
> is not the convenient way to indicate that the proj.dll is not
> loadable. In fact as I've recognized the exceptions are not propagated
> to C# for the osr classes. Tomorrow I'll fix this problem so that an
> exception will be raised with a more descriptive message ("Failed to
> create coordinate transformation" in this case)
>
> Best regards,
>
> Tamas
>
>
> 2007/5/12, Tomas R <monshi@home.se>:
>> Ahh, it works!
>> Can it be as simple fact as that the proj.dll in FWTools is named
>> proj_fw.dll and the binding in the gdal dll is towards proj.dll. I've
>> read about that problem in other posts...
>>
>> Yes, I guess it is so...
>>
>> And yes - to the other branch of this thread - only viable solution in
>> distribution of my application is to supply the necessary dlls together
>> with the application.
>>
>> Perhaps a small guideline in the wiki about the dlls required is in
>> place? And links to where to find them, or compile them?
>>
>> Thank you big time!
>> If you are into tracking your running or biking exercises with a GPS
>> take a look at SportTracks. In a short time v 2.0 will be released, I
>> hope, and soon thereafter my plugin will be released, I also hope.
>>
>> /Tomas
>>
>> Tamas Szekeres skrev:
>> > Tomas,
>> >
>> > I've eventually created a sample Windows application which executes
>> > the expected code when the button is clicked and the results are
>> > written into a textbox. I've attached the Visual Studio 2005 project
>> > to this mail including the necessary dll-s. You might alter
>> > SetConfigOption PushFinderLocation according to the place of your
>> > FWTools installation.
>> >
>> > In my experience when the proj.dll is removed from the application
>> > directory that memory corruption error may arise in that case when the
>> > %PATH% environment variable does not contain a proper location for the
>> > proj.dll in the system.
>> >
>> > Best regards,
>> >
>> > Tamas
>> >
>> >
>> > 2007/5/12, Tomas R <monshi@home.se>:
>> >> Oh, did I post that version when I tried to go from WGS84 to 
>> WGS84. Have
>> >> tried it before and then it changed nothing but still a test if 
>> the call
>> >> works.
>> >>
>> >> Tried your code and, no.. I have no idea why it won't work. But my 
>> guess
>> >> is something work with compilation of gdal... Perhaps. (some path 
>> that
>> >> perhaps needs to be set before compilation?)
>> >>
>> >> Worth mentioning  is perhaps that GDALinfo, the included example, 
>> work.
>> >> The include OSRTransform example give the same error as my own code.
>> >> Would have been a bit surprised if not.
>> >>
>> >> It works to allocate the SpatialReferences and the 
>> CoordinateTransform,
>> >> it is the call to transform the two points that fails.
>> >>
>> >> Call stack:
>> >> >      [External Code]
>> >> > >
>> >> >
>> >> 
>> ogr_csharp.dll!OSGeo.OGR.CoordinateTransformation.TransformPoint(double[] 
>>
>> >>
>> >> > argout = {Dimensions:[3]}, double x = 1620000.0, double y = 
>> 6597000.0,
>> >> > double z = 0.0) Line 57 + 0x2c bytes    C#
>> >> >      GdalTest1.exe!GdalTest.Form1.button5_Click(object sender = 
>> {Text
>> >> > = "button5"}, System.EventArgs e = {X = 54 Y = 11 Button = 
>> Left}) Line
>> >> > 101 + 0x2b bytes    C#
>> >> >      [External Code]
>> >> >      GdalTest1.exe!GdalTest.Program.Main() Line 17 + 0x1a 
>> bytes    C#
>> >> >      [External Code]
>> >> As you can see it is runs from a Window Application but that 
>> should not
>> >> have anything to do with.
>> >> The whole exception. A short translation of the message is, as 
>> previous
>> >> said, " A try to read to read or write to protected memory. This
>> >> indicates often that another memory is damaged."
>> >> > System.AccessViolationException was unhandled
>> >> >   Message="Det gjordes ett f?rs?k att l?sa eller skriva till 
>> skyddat
>> >> > minne. Detta indikerar ofta att annat minne ?r skadat."
>> >> >   Source="ogr_csharp"
>> >> >   StackTrace:
>> >> >        vid
>> >> >
>> >> 
>> OSGeo.OGR.OsrPINVOKE.CoordinateTransformation_TransformPoint__SWIG_1(HandleRef 
>>
>> >>
>> >> > jarg1, Double[] jarg2, Double jarg3, Double jarg4, Double jarg5)
>> >> >        vid 
>> OSGeo.OGR.CoordinateTransformation.TransformPoint(Double[]
>> >> > argout, Double x, Double y, Double z) i c:\Documents and
>> >> >
>> >> 
>> Settings\Tomas\Skrivbord\GDalDoc\trunk\gdal\swig\csharp\ogr\CoordinateTransformation.cs:rad 
>>
>> >>
>> >> > 57
>> >> >        vid GdalTest.Form1.button5_Click(Object sender, EventArgs 
>> e) i
>> >> > d:\Documents and Settings\Tomas\Mina dokument\Visual Studio
>> >> > 2005\Projects\GdalTest1\GdalTest1\code\Form1.cs:rad 101
>> >> >
>> >>
>> >> I downloaded the latest trunk and compiled with no error. Set 
>> references
>> >> to the four CSharp-dlls and included gdal14.dll and the wrapper 
>> dlls in
>> >> the project, all files after compilation in same folder. But when 
>> I run
>> >> the code, same error.
>> >>
>> >> And as said before: Environment to compile in is Visual Studio 
>> Express
>> >> C++, 2005 environment for developing is Visual Studio Express C# 
>> 2005.
>> >> Nothing strange.. Version 1.4.1 I have managed to compile and 
>> run... But
>> >> of course not EPSG-codes in v 1.4.1
>> >>
>> >>
>> >>
>> >> Tamas Szekeres skrev:
>> >> > Tomas,
>> >> >
>> >> > I couldn't find out what is the actual value of your WGS 
>> variable in
>> >> > SpatialReference wgs84 = new SpatialReference(WGS);
>> >> >
>> >> > In addition CoordinateTransformation(wgs84, wgs84); doesn't seem 
>> to do
>> >> > anything with the coordinate values.
>> >> > Here is my equivalent code that worked:
>> >> >
>> >> > int rtX = 1620000;
>> >> >                 int rtY = 6597000;
>> >> >                 Gdal.SetConfigOption("GDAL_DATA",@"C:\Program
>> >> > Files\FWTools1.3.0\data");
>> >> >                 Gdal.PushFinderLocation(@"C:\Program
>> >> > Files\FWTools1.3.0\data");
>> >> >                 SpatialReference source = new SpatialReference("");
>> >> >
>> >> >                 int res = source.ImportFromEPSG(3021);
>> >> >                 string srcTest, dstTest;
>> >> >                 source.ExportToWkt(out srcTest);
>> >> >                 Console.WriteLine(srcTest);
>> >> >                 SpatialReference wgs84 = new SpatialReference("");
>> >> >                 wgs84.SetWellKnownGeogCS("WGS84");
>> >> >                 wgs84.ExportToWkt(out dstTest);
>> >> >                 Console.WriteLine(dstTest);
>> >> >
>> >> >
>> >> >                 CoordinateTransformation toWGS = new
>> >> > CoordinateTransformation(source, wgs84);
>> >> >                 double[] data = new double[3];
>> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
>> >> >                 Console.WriteLine(data[0].ToString() + " " +
>> >> > data[1].ToString());
>> >> >
>> >> >
>> >> > However your memory corruption issue is somewhat frustrating, do 
>> you
>> >> > have a call stack for this error?
>> >> >
>> >> > Best regards,
>> >> >
>> >> > Tamas
>> >> >
>> >> >
>> >> > 2007/5/11, Tomas R <monshi@home.se>:
>> >> >> I have received two answers in my mailbox but don't see them 
>> here. I
>> >> >> reply to one of them:
>> >> >> The code I use to produce the error is:
>> >> >> >                 int rtX = 1620000;
>> >> >> >                 int rtY = 6597000;
>> >> >> >                 Gdal.SetConfigOption("GDAL_DATA",
>> >> >> > @"C:\Program\FWTools1.3.0\data");
>> >> >> >
>> >> >> Gdal.PushFinderLocation(@"C:\Program\FWTools1.3.0\data");
>> >> >> >                 SpatialReference source = new 
>> SpatialReference("");
>> >> >> >
>> >> >> >                 int res = source.ImportFromEPSG(3021);
>> >> >> >                 string srcTest, dstTest;
>> >> >> >                 source.ExportToWkt(out srcTest);
>> >> >> >                 put(srcTest);
>> >> >> >                 SpatialReference wgs84 = new 
>> SpatialReference(WGS);
>> >> >> >                 wgs84.ExportToWkt(out dstTest);
>> >> >> >                 put(dstTest);
>> >> >> >
>> >> >> >
>> >> >> >                 CoordinateTransformation toWGS = new
>> >> >> > CoordinateTransformation(wgs84, wgs84);
>> >> >> >                 double[] data = new double[3];
>> >> >> >                 toWGS.TransformPoint(data, rtX, rtY, 0);
>> >> >> >                 put(data[0].ToString() + " " + 
>> data[1].ToString());
>> >> >> Where Put is just a call to a routine which displays the text on
>> >> screen.
>> >> >> Without gdal14.dll or all the wrapper dlls included in the project
>> >> the
>> >> >> code halts at first call to Gdal. With the wrappers and the 
>> gdal dll
>> >> >> included in the project the SpatialRefernces are correctly
>> >> initialized
>> >> >> (wgs from a WKT-string, just for testing, source from ESPG  (have
>> >> tested
>> >> >> other than RT90)) but instead it halts at call to TransformPoint.
>> >> The
>> >> >> exceptions InnerException is null, error in OGR/OSR_sharp.dll. 
>> I have
>> >> >> tested with both reference to OGR and OSR.
>> >> >> I have also tried copying all dlls from FWTool to the project but
>> >> with
>> >> >> no difference.
>> >> >>
>> >> >> Thank you for your help! The time you take to clear this up is 
>> highly
>> >> >> appreciated!
>> >> >> Yours
>> >> >> Tomas
>> >> >>
>> >> >>
>> >> >> This was in answer to
>> >> >> > Could you post your example that produces this behaviour? I 
>> haven't
>> >> >> > found this issue when using a similar test you have mentioned.
>> >> >> >
>> >> >> > Tamas
>> >> >>
>> >> >>
>> >> >>
>> >> >> Tomas R skrev:
>> >> >> > Again I was a bit to quick when reporting success.
>> >> >> > Yes, now I am able to create a SpatialReference from an EPSG
>> >> code and
>> >> >> > from Proj4 (not tested WKT)
>> >> >> > And I am able to create a CoordinaTransform object from those
>> >> >> > spatialreferences.
>> >> >> > But I'm not able to perform an actual coordinate 
>> transformation, an
>> >> >> > exception is thrown (trying to read or write to  protected (in
>> >> >> > ogr_sharp.dll).
>> >> >> >
>> >> >> > So, again I ask:
>> >> >> > Have I missed some step or is it still something in GDAL that
>> >> doesn't
>> >> >> > work?
>> >> >> >
>> >> >> > /Tomas
>> >> >> >
>> >> >> > Tomas R skrev:
>> >> >> >> Ok Tamas, it kind of works...
>> >> >> >>
>> >> >> >> I followed the steps you have described for me and those I
>> >> found on
>> >> >> >> the Wiki:
>> >> >> >> 1: Downloaded latest trunk
>> >> >> >> 2: Compiled  GDAL (how many of the steps must I do? All? Or
>> >> just the
>> >> >> >> first, I guess just the first)
>> >> >> >> 3: Created the C# interface and compiled it.
>> >> >> >> 4: Copied the resulting *_wrap.dlls to Fwtool1.3.0\bin folder
>> >> >> >> 5: Added the new CSharp-dlls to my C# project.
>> >> >> >> 6: Checked that the system path contains FWTools1.3.0\bin 
>> folder
>> >> >> >> If I try running my project after those steps I get an
>> >> exception when
>> >> >> >> trying to call GDAL, whatever *_wrap.dll that is called is not
>> >> >> >> found/not possible to load.
>> >> >> >>
>> >> >> >> When I add the wrap-dlls to the "root" of my C#-project, no
>> >> apparent
>> >> >> >> change.
>> >> >> >> When I copy the GDAL-dll to my projects root and include it 
>> in the
>> >> >> >> build, together with the wrap-dlls, it works!
>> >> >> >> But is this how it now is supposed to be? I guess I with this
>> >> setup
>> >> >> >> can use GDALs basic function but all the functions which 
>> rely on
>> >> >> >> other libs (which I have not tested/any knowledge of yet) 
>> are not
>> >> >> >> available? For example reading and writing of GeoTiff images?
>> >> (That
>> >> >> >> is possible via the C#-bindings?)
>> >> >> >> For now I think I'm content with coordinate translation but I
>> >> think I
>> >> >> >> want to try how efficient GDAL is to use when importing maps of
>> >> >> >> different formats. It would be nice to be able to rip directly
>> >> from
>> >> >> >> GeoTiff (or RIK) with GDAL.
>> >> >> >>
>> >> >> >> Perhaps a bit OT but:
>> >> >> >> In basic it boils down to that I have now not a clear idea 
>> how to
>> >> >> >> distribute the plugin I am building. Demand that FWTools are
>> >> >> >> installed or include the nessecary dlls? O well, there is time
>> >> left
>> >> >> >> to think about that.
>> >> >> >>
>> >> >> >> /Tomas
>> >> >> >>
>> >>
>> >> _______________________________________________
>> >> Gdal-dev mailing list
>> >> Gdal-dev@lists.maptools.org
>> >> http://lists.maptools.org/mailman/listinfo/gdal-dev
>> >>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From mateusz at loskot.net  Sun May 13 09:11:58 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] VS2005 SP 1 warning
In-Reply-To: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>
References: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <1937.84.10.81.30.1179061918.squirrel@loskot.net>

Ivan Lucena wrote:
> Folks,
>
> I was doing some test with the GDAL binary distribution and VS2005 crashed
> on me.
>
> I recently updated VC2005 SP 1 and my advice for those that us VC2005 is
> "Don't!"

Ivan,

Unfortunately, it's not so easy.
The SP1 is required for Vista.

Recently, I've been fighting with similar problems:

http://lists.osgeo.org/pipermail/fdo-internals/2007-April/001037.html

I uninstalled SP1 what broken my system completely, then I did clean
installation of my Windows XP
and VS2005 again and without SP1 for VS2005, environment for Mobile Devices
is completely broken, project wizards don't work, so I had to install SP1,
again.

Flortunately, 4 weeks ago Microsoft release new version of redistributable
package with runtime components compatible with binaries built
using VS2005 + SP1.

This redistributable package fixes the error you are reporting.
Also, I've not experienced any of crashes you're writing about.

So, in my opinion the correct strategy is to:
- install VS2005
- install SP2 for VS2005
- build software as usual
- ship your software *with*  Microsoft Visual C++ 2005 SP1 Redistributable
Package (x86), see this link:

http://www.microsoft.com/downloads/details.aspx?FamilyID=200B2FD9-AE1A-4A14-984D-389C36F85647&displaylang=en


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Sun May 13 09:45:55 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46423280.1040603@o2.pl>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
Message-ID: <46471693.9040701@o2.pl>

Hi!

I'm really puzzled. Please can somebody look into this?

I tried to simplify the case a bit. Let's leave out r.out.gdal for a
moment and stick to GDAL commands only. A sample vegcover3.tif is
attached, but you should be able to reproduce the issue with any tiff
out there.

The sample size is 28628 bytes.



Try the following on the sample:

$ gdal_translate vegcover3.tif vegcover3_gt.tif

vegcover3_gt.tif size is 28628 bytes. Identical to input. OK.

$ gdalwarp vegcover3.tif vegcover3_gw.tif

vegcover3_gw.tif size is 36336 bytes. That's 27% bigger than the input!

But why? I can't see a reason there should be any difference. gdalwarp
is supposed to do a raw copy of the input if no switches present; or
isn't it? Maybe I'm just missing something.

Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vegcover3.tif.bz2
Type: application/x-bzip
Size: 6260 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070513/6f0c23f9/vegcover3.tif.bin
From szekerest at gmail.com  Sun May 13 17:35:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Recent changes related to the Java bindings
Message-ID: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>

Folks,

I've made the first attempt to add the java related build steps to the
buildbot configuration. Currently I've focused only on the Windows
builders and my effort was eventually successful,
http://buildbot.osgeo.org:8500/

In exchange for this addition I had to move the contents of the
java.opt file into nmake.opt because it was pretty unmanageable in
that fashion. I've added the following section in nmake.opt

# SWIG Java settings
!IFNDEF JAVA_HOME
JAVA_HOME = c:\j2sdk1.4.2_12
!ENDIF
!IFNDEF ANT_HOME
ANT_HOME=c:\programmi\apache-ant-1.7.0
!ENDIF
JAVADOC=$(JAVA_HOME)\bin\javadoc
JAVAC=$(JAVA_HOME)\bin\javac
JAVA=$(JAVA_HOME)\bin\java
JAR=$(JAVA_HOME)\bin\jar
JAVA_INCLUDE=-I$(JAVA_HOME)\include -I$(JAVA_HOME)\include\win32

I've encapsulated the default  JAVA_HOME, ANT_HOME parameters into
IFNDEF-s so these values can be given at the nmake command line or in
an external file according to the EXT_NMAKE_OPT settings.
I've also removed all !INCLUDE-s for the java.opt in the Windows makefiles.

I haven't dealt with the GNU builds so far, however java.opt is also
included in the GNU makefile. Howard and I would like to see this
stuff disappearing one day when the configure stuff will be extended
by identifying the JAVA locations. Howard added a ticket for this
change:

http://trac.osgeo.org/gdal/ticket/1631

Best regards,

Tamas

From ivan.lucena at pmldnet.com  Sun May 13 19:15:28 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] VS2005 SP 1 warning
In-Reply-To: <1937.84.10.81.30.1179061918.squirrel@loskot.net>
References: <000401c7949c$3be57150$0a0a0a0a@idrisi.clarku.edu>
	<1937.84.10.81.30.1179061918.squirrel@loskot.net>
Message-ID: <000f01c795b4$98f0fa90$0a0a0a0a@idrisi.clarku.edu>

Mateusz,

I am using XP and I am not shipping any executable based on VS2005, so I
guess it would be less trouble to just remove and re-install it without SP1.

Thanks for the info,

Ivan

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Sunday, May 13, 2007 9:12 AM
To: Ivan Lucena
Cc: 'gdal-dev'
Subject: Re: [Gdal-dev] VS2005 SP 1 warning

Ivan Lucena wrote:
> Folks,
>
> I was doing some test with the GDAL binary distribution and VS2005 crashed
> on me.
>
> I recently updated VC2005 SP 1 and my advice for those that us VC2005 is
> "Don't!"

Ivan,

Unfortunately, it's not so easy.
The SP1 is required for Vista.

Recently, I've been fighting with similar problems:

http://lists.osgeo.org/pipermail/fdo-internals/2007-April/001037.html

I uninstalled SP1 what broken my system completely, then I did clean
installation of my Windows XP
and VS2005 again and without SP1 for VS2005, environment for Mobile Devices
is completely broken, project wizards don't work, so I had to install SP1,
again.

Flortunately, 4 weeks ago Microsoft release new version of redistributable
package with runtime components compatible with binaries built
using VS2005 + SP1.

This redistributable package fixes the error you are reporting.
Also, I've not experienced any of crashes you're writing about.

So, in my opinion the correct strategy is to:
- install VS2005
- install SP2 for VS2005
- build software as usual
- ship your software *with*  Microsoft Visual C++ 2005 SP1 Redistributable
Package (x86), see this link:

http://www.microsoft.com/downloads/details.aspx?FamilyID=200B2FD9-AE1A-4A14-
984D-389C36F85647&displaylang=en


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From mdsumner at utas.edu.au  Sun May 13 19:18:03 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: Gdal-dev Digest, Vol 36, Issue 25
In-Reply-To: <200705111440.l4BEeXVQ002631@duke.maptools.org>
References: <200705111440.l4BEeXVQ002631@duke.maptools.org>
Message-ID: <46479CAB.6040701@utas.edu.au>

Hello, you would certainly want to subdivide the original file into the 
zones you wanted to convert to UTM.

You would also want to remove the extreme north and south regions from 
the longlat data as Mercator is not defined at the poles.

Cheers, Mike.
>
> ------------------------------------------------------------------------
>
> Subject:
> [Gdal-dev] shape file of the world: lat/lon to utm
> From:
> "Sanges Michele" <Michele.Sanges@otomelara.it>
> Date:
> Fri, 11 May 2007 16:37:14 +0200
> To:
> <gdal-dev@lists.maptools.org>
>
> To:
> <gdal-dev@lists.maptools.org>
>
>
> Hello,
>
> is there a way to reproject a shape file of the entire world (eg. http://www.cipotato.org/diva/data/misc/world_adm0.zip) from geographic coordinates (lat/lon) to UTM, using the ogr2ogr utility?
> How do I manage the UTM zone?
> In order to avoid distorsion, is it possible to suddivide the original file in more lat/lon file, one for every UTM zone?
>
> Thanks a lot.
> Michele Sanges
>
>
>
>   


From ASP at blominfo.dk  Mon May 14 03:13:01 2007
From: ASP at blominfo.dk (Asger Sigurd Petersen)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Problems reading georeferenced tiff
In-Reply-To: <4644C6AC.2010507@pobox.com>
References: <25BE68A4D83DD4438F701DF0311F3F4A401E7A@posthus.blominfo.dk>
	<4644C6AC.2010507@pobox.com>
Message-ID: <25BE68A4D83DD4438F701DF0311F3F4A401ED5@posthus.blominfo.dk>

> Asger,
> 
> I have reproduced your problem.  It is due to the warper computing a
> source
> window that is off the input data file.  It automatically gets trimmed
to
> zero size, and the general purpose code already ignores requests of
zero
> size.  But the alpha band reader does not ignore these.
> 
> I've fixed this in trunk and 1.4 branch, so the fix should be in the
next
> FWTools release.  In the meantime, if your workaround of going to jpeg
is
> ok, then use that.  That works because the alpha band is discarded in
jpeg
> format.

Dear Frank,

Thank you very much. It's nice to know that it is supposed to work. And
it is really great it has already been fixed. 

Thank you!

Best regards
Asger


From jmp at geosys.com  Mon May 14 05:42:52 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] OGR : Support GEOS with Csharp bindings
In-Reply-To: <25BE68A4D83DD4438F701DF0311F3F4A401ED5@posthus.blominfo.dk>
Message-ID: <001901c7960c$3f613e60$2201a8c0@pcjmp>

Hi,

I try to use the OGR's library in Csharp and the GEOS support but I have 2
problems. I'm using the "gdal-svn-trunk-2007.05.09".

1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains" it
turns over me an error "GEOS support not enabled". However I have
uncommented the support GEOS in the file "nmake.opt" and the compilation
return no error.

GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib

When I use on the same object the method "Intersect" it seems work. 

2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".

Best Regards

PIERRET Jean michel




From warmerdam at pobox.com  Mon May 14 07:56:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46471693.9040701@o2.pl>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl>
Message-ID: <46484E88.6070102@pobox.com>

Maciej Sieczka wrote:
  > Try the following on the sample:
> 
> $ gdal_translate vegcover3.tif vegcover3_gt.tif
> 
> vegcover3_gt.tif size is 28628 bytes. Identical to input. OK.
> 
> $ gdalwarp vegcover3.tif vegcover3_gw.tif
> 
> vegcover3_gw.tif size is 36336 bytes. That's 27% bigger than the input!
> 
> But why? I can't see a reason there should be any difference. gdalwarp
> is supposed to do a raw copy of the input if no switches present; or
> isn't it? Maybe I'm just missing something.

Maciek,

gdalwarp uses very different library interfaces and io strategies from
gdal_translate.  So in some circumstances the output may differ.

On careful review, the difference in the file in question is because
gdal_translate uses the TIFFWriteScanline() interface to write the output
file from within GTiffDataset::CreateCopy(), and this only writes as much
of the final 'strip' of the file as is required to complete image area.
But gdalwarp goes through the blockio interface which writes the complete
final strip, even the portion that falls off the end of the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From emanuele.conti at gmail.com  Mon May 14 13:58:10 2007
From: emanuele.conti at gmail.com (Emanuele Conti)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] open files from mysql
Message-ID: <22ea73180705141058o61ae5d41h93d5b55a2b44d7a4@mail.gmail.com>

Hi everybody,
I'm working on my final university thesis and I worked on the synergy
between grass63 and mysql. In particular I also developed a patch for gdal
that let it open raster map files directly from a mysql db (assumed that
files are stored in mediumblob columns, for example).
I'd like to know if this patch could be of any interest to gdal community
and if chances are that the code could be accepted as a contribution in the
source tree (I could also modify and optimize the code starting from any
feedback, too).
Practically what can be done with this patch is, for example:

gdal_translate
MYSQL:test,user=root,password=,host=localhost,port=3306,table=maps,file_name=a_map.dt1
/tmp/a_map.tif

or, from grass:

r.in.gdalinput=MYSQL:test,user=root,password=,host=localhost,port=3306,table=maps,file_id=33
output=map_id_33.dt1

Many Thanks.

-- 
Emanuele Conti
Senior Student at University ROMA TRE
Department of Informatics and Automation
ROME, Italy (matr. 251318)
Mob:       +39 328 2681070
Home:     +39 06 39741124
e-mail:     emanuele.conti@yahoo.com
y!:            emanuele_c
msn:        emanuele_c@yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070514/051a98e0/attachment.html
From Chris.Barker at noaa.gov  Mon May 14 14:07:31 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] Re: gdal 1.4.1 python 2.4 windows executables
In-Reply-To: <b0d146420705120736x31c80672g4ec05be072a65814@mail.gmail.com>
References: <b0d146420705120736x31c80672g4ec05be072a65814@mail.gmail.com>
Message-ID: <4648A563.9020605@noaa.gov>

Emilio Mayorga wrote:
>> at least it should be all set up to build with distutils.

That's really the only sane way to build extensions for Python anyway.

> Python with Numpy, matplotlib, SciPy, and GDAL (with the "Next Gen"
> Numpy bindings), all easy to install: wow, that'd be one sweet,
> compelling environment for earth science computing/"geoinformatics"!

It sure would, and we're pretty darn close. I've not had reason to use 
gdal+python lately, but I think I may soon, so I'll dig into what it 
takes then.

By the way, what is the status of the NG bindings, anyway? Are they 
numpy compatible and ready-to-go?

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From cermak at sfos.uaf.edu  Mon May 14 14:55:26 2007
From: cermak at sfos.uaf.edu (Rob Cermak)
Date: Wed Nov 21 11:50:51 2007
Subject: [Gdal-dev] patch for 1.4.x : frmts/netcdf 
 (NC_GLOBAL#{spatial_ref/GeoTransform})
Message-ID: <33488.137.229.40.226.1179168926.squirrel@www.sfos.uaf.edu>

Greetings,

Recent events have us looking the the direct access Netcdf driver
(frmts/netcdf).  We discovered that the spatial_ref and GeoTransform
global tags are ignored for non-complient CF-1.0 files.

Patch: http://ak.aoos.org/data/patch/frmts_netcdf_global_georef.patch

WRF data file, if needed:
http://137.229.130.18/data/forecasts/AEFF/WRF/CIPWS12km/200705/14/00/wrfout_d01_2007-05-16_00.nc
  (sorry about the size! 14 MB)

1.4.1:
gdalinfo NETCDF:"wrfout_d01_2007-05-16_00.nc":T2
  NC_GLOBAL#spatial_ref=+proj=stere +lon_0=-147.300003052 +lat_0=90
+lat_ts=60.2000007629 +a=6378273 +rf=298.279405043 +x_0=0 +y_0=0
  NC_GLOBAL#GeoTransform=-541931.561016 12045.5692702 0 -3610575.06283 0
12025.6894815
  T2#FieldType=104
  T2#MemoryOrder=XY
  T2#description=TEMP at 2 M
  T2#units=K
  T2#stagger=
  T2#coordinates=XLONG XLAT
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   72.0)
Upper Right (   90.0,    0.0)
Lower Right (   90.0,   72.0)
Center      (   45.0,   36.0)
Band 1 Block=90x1 Type=Float32, ColorInterp=Undefined
  NoData Value=9.96920996838687e+36
  Metadata:
    NETCDF_VARNAME=T2
    NETCDF_DIMENSION_Time=1
GDAL: GDALClose(NETCDF:wrfout_d01_2007-05-16_00.nc:T2)
GDAL: GDALDeregister_GTiff() called.

With the above patch:
  NC_GLOBAL#spatial_ref=+proj=stere +lon_0=-147.300003052 +lat_0=90
+lat_ts=60.2000007629 +a=6378273 +rf=298.279405043 +x_0=0 +y_0=0
  NC_GLOBAL#GeoTransform=-541931.561016 12045.5692702 0 -3610575.06283 0
12025.6894815
  T2#FieldType=104
  T2#MemoryOrder=XY
  T2#description=TEMP at 2 M
  T2#units=K
  T2#stagger=
  T2#coordinates=XLONG XLAT
Corner Coordinates:
Upper Left  ( -541931.561,-3610575.063)
Lower Left  ( -541931.561,-2744725.420)
Upper Right (  542169.673,-3610575.063)
Lower Right (  542169.673,-2744725.420)
Center      (     119.056,-3177650.241)
Band 1 Block=90x1 Type=Float32, ColorInterp=Undefined
  NoData Value=9.96920996838687e+36
  Metadata:
    NETCDF_VARNAME=T2
    NETCDF_DIMENSION_Time=1
GDAL: GDALClose(NETCDF:wrfout_d01_2007-05-16_00.nc:T2)
GDAL: GDALDeregister_GTiff() called.

Rob
-- 
Alaska Ocean Observing System
Data Manager
907-474-7948


From warmerdam at pobox.com  Mon May 14 16:07:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] open files from mysql
In-Reply-To: <22ea73180705141058o61ae5d41h93d5b55a2b44d7a4@mail.gmail.com>
References: <22ea73180705141058o61ae5d41h93d5b55a2b44d7a4@mail.gmail.com>
Message-ID: <4648C16A.1010406@pobox.com>

Emanuele Conti wrote:
> Hi everybody,
> I'm working on my final university thesis and I worked on the synergy 
> between grass63 and mysql. In particular I also developed a patch for 
> gdal that let it open raster map files directly from a mysql db (assumed 
> that files are stored in mediumblob columns, for example).
> I'd like to know if this patch could be of any interest to gdal 
> community and if chances are that the code could be accepted as a 
> contribution in the source tree (I could also modify and optimize the 
> code starting from any feedback, too).
> Practically what can be done with this patch is, for example:
> 
> gdal_translate 
> MYSQL:test,user=root,password=,host=localhost,port=3306,table=maps,file_name=a_map.dt1 
> /tmp/a_map.tif
> 
> or, from grass:
> 
> r.in.gdal 
> input=MYSQL:test,user=root,password=,host=localhost,port=3306,table=maps,file_id=33 
> output=map_id_33.dt1

Emanuele,

I'm concerned that this is a rather specialized driver, and that folks might
actually want to use rasters from MySQL in a variety of other ways as well.
I would be happy to have the driver put in "spike" (an experimental area) in
subversion, but I'm not yet all that comfortable that this makes sense as
*the* mysql raster driver for GDAL.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Mon May 14 17:51:56 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] speeding up the gdalwarp process for mosaicing and
	reprojection
Message-ID: <fa2ac0580705141451y7e7a0526n6f563a039283d174@mail.gmail.com>

Hi,

I have run the following gdalwarp command

gdalwarp.exe -wo SKIP_NOSOURCE=YES -rc -s_srs EPSG:" + EPSG + " -t_srs
EPSG:" + EPSG_wgs84 + " -of HFA " + " -q " + inputFiles + " " + outputFile

against a group of geotiff files which both mosaics and reprojects them to
wgs84 and it works fine, but it takes 22:47 hours to generate the 52.89 GB
mosaic.
Does anyone have any suggestions on how to speed up the gdalwarp process.  I
have noticed that the 4 processor server is only being utilized between
14-26% across all 4 processors.  Is their a way to force a higher
utilization of these processors?  I have in past tried to run 2 gdalwarp
jobs simultaneously and I have noticed that it takes them much longer
compared to the total time when running serially (meaning one after the
other).

Thanks,


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070514/2a0fa355/attachment.html
From ed at topozone.com  Mon May 14 18:32:05 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] speeding up the gdalwarp process for mosaicing
	andreprojection
In-Reply-To: <fa2ac0580705141451y7e7a0526n6f563a039283d174@mail.gmail.com>
References: <fa2ac0580705141451y7e7a0526n6f563a039283d174@mail.gmail.com>
Message-ID: <4BF377919225F449BB097CB76FFE9BC8019880B3@ptolemy.topozone.com>

John -

 

Are the input and output files on the same disk subsystem, and what kind
of disk(s) is involved?

 

gdalwarp will run as a single task, so if it uses 1 processor 100% of
the time you'll see 25% utilization.  If you run two gdalwarp jobs at
the same time, using the same disks, you can very easily cause disk
thrashing and bog the whole process down, so it's not surprising to find
two jobs in parallel takes more than two jobs run serially.

 

If possible, have the input and output files on different disks, and
avoid having read/write activity on the same disk or more than one job
writing to the same disk.

 

-          Ed

 

Ed McNierney

President and Chief Mapmaker

TopoZone.com / Maps a la carte, Inc.

73 Princeton Street, Suite 305

North Chelmsford, MA  01863

Phone: 978-251-4242, Fax: 978-251-1396

ed@topozone.com

 

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Mitchell
Sent: Monday, May 14, 2007 5:52 PM
To: mitchelljj98@gmail.com; Gdal-Dev; MAPSERVER-USERS@lists.umn.edu
Cc: Mark A Hollis
Subject: [Gdal-dev] speeding up the gdalwarp process for mosaicing
andreprojection

 

Hi,

I have run the following gdalwarp command

gdalwarp.exe -wo SKIP_NOSOURCE=YES -rc -s_srs EPSG:" + EPSG + " -t_srs
EPSG:" + EPSG_wgs84 + " -of HFA " + " -q " + inputFiles + " " +
outputFile 

against a group of geotiff files which both mosaics and reprojects them
to wgs84 and it works fine, but it takes 22:47 hours to generate the
52.89 GB mosaic.  
Does anyone have any suggestions on how to speed up the gdalwarp
process.  I have noticed that the 4 processor server is only being
utilized between 14-26% across all 4 processors.  Is their a way to
force a higher utilization of these processors?  I have in past tried to
run 2 gdalwarp jobs simultaneously and I have noticed that it takes them
much longer compared to the total time when running serially (meaning
one after the other). 

Thanks,


-- 
John J. Mitchell 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070514/9a1fe8d8/attachment.html
From rayg at daylongraphics.com  Mon May 14 20:19:34 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] speeding up the gdalwarp process for mosaicing
	andreprojection
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC8019880B3@ptolemy.topozone.com>
References: <fa2ac0580705141451y7e7a0526n6f563a039283d174@mail.gmail.com>
	<4BF377919225F449BB097CB76FFE9BC8019880B3@ptolemy.topozone.com>
Message-ID: <4648FC96.6010901@daylongraphics.com>

It looks like you should be able to (if you have a network) dupe the 
input file to each machine, run a copy of gdalwarp on each machine with 
custom -te params (-ts might vary on the last block), and then use 
gdal_merge.py to assemble the results.

There's also gdalwarp's -multi option, which will use two threads 
instead of one per gdalwarp instance.

Ray

From otto.dassau at gmx.de  Tue May 15 05:02:47 2007
From: otto.dassau at gmx.de (Otto Dassau)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
Message-ID: <20070515110247.69c5a374@localhost.localdomain>

Hi, 

I am trying to build gdal 1.4.1 with OCI support but with no success. The
database is an oracle 9i. In the configure script I provide:

--with-oci=/usr/lib/oracle/9.2.0/OraHome \
--with-oci-lib=/usr/lib/oracle/9.2.0/OraHome/lib

There are two problems:

a) checking for Oracle OCI headers in /usr/lib/oracle/9.2.0/OraHome/rdbms/public

During configuration the header files are assumed to be in rdbms/public:
... checking for Oracle OCI headers in
/usr/lib/oracle/9.2.0/OraHome/rdbms/public

but in my oracle installation the header files are located in /rdbms/demo/, so I
have to copy them. Can I somehow add:

--with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public /usr/lib/oracle/9
.2.0/OraHome/rdbms/demo' ?

b) checking for Oracle OCI libraries in /usr/lib/oracle/9.2.0/OraHome/lib

here I get following error message that -lnnz10 is missing:

#configure:26066: checking for Oracle OCI libraries in
#/usr/lib/oracle/9.2.0/OraHome/lib configure:26097: g++ -o conftest -g -O2 
#-I/usr/lib/oracle/9.2.0/OraHome/rdbms/public 
#-L/usr/lib/oracle/9.2.0/OraHome/lib -lclntsh -lnnz10 conftest.cc -L/usr/lib
#-lxerces-c -lpthread -ljasper -lmfhdf -ldf -lgif -ljpeg -ltiff -lpng -lnetcdf
#-lcfitsio -lpq -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl  >&5 /usr/bin/ld:
#cannot find -lnnz10 collect2: ld returned 1 exit status
#configure:26103: $? = 1
#configure: failed program was:
#| 
#|                 /* confdefs.h.  */

I haven't found anything about it in other mailings, so I hope someone can give
me a hint, how I can manage to get oracle support for current gdal 1.4.1. I
worked with version 1.3.2 before and there I have oci support with the same
configuration.

regards,
 Otto




From mateusz at loskot.net  Tue May 15 07:47:26 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <20070515110247.69c5a374@localhost.localdomain>
References: <20070515110247.69c5a374@localhost.localdomain>
Message-ID: <46499DCE.7030004@loskot.net>

Otto Dassau wrote:
> Hi, 
> 
> I am trying to build gdal 1.4.1 with OCI support but with no success. The
> database is an oracle 9i. In the configure script I provide:
> 
> --with-oci=/usr/lib/oracle/9.2.0/OraHome \
> --with-oci-lib=/usr/lib/oracle/9.2.0/OraHome/lib

Otto,

You should use

--with-oci

*or* pair of options

--with-oci-include
--with-oci-lib

The single --with-oci is equivalent to ORACLE_HOME environment,
but it may not work well with older Oracle versions, because there were
some changes in structure of installation directory.

So, try to use the two latter options.

> There are two problems:
> 
> a) checking for Oracle OCI headers in /usr/lib/oracle/9.2.0/OraHome/rdbms/public
> 
> During configuration the header files are assumed to be in rdbms/public:
> ... checking for Oracle OCI headers in
> /usr/lib/oracle/9.2.0/OraHome/rdbms/public
> 
> but in my oracle installation the header files are located in /rdbms/demo/, so I
> have to copy them. Can I somehow add:
> 
> --with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public /usr/lib/oracle/9
> .2.0/OraHome/rdbms/demo' ?

Yes, you should use --with-oci-include.

> b) checking for Oracle OCI libraries in /usr/lib/oracle/9.2.0/OraHome/lib
> 
> here I get following error message that -lnnz10 is missing:
> 
> #configure:26066: checking for Oracle OCI libraries in
> #/usr/lib/oracle/9.2.0/OraHome/lib configure:26097: g++ -o conftest -g -O2 
> #-I/usr/lib/oracle/9.2.0/OraHome/rdbms/public 
> #-L/usr/lib/oracle/9.2.0/OraHome/lib -lclntsh -lnnz10 conftest.cc -L/usr/lib
> #-lxerces-c -lpthread -ljasper -lmfhdf -ldf -lgif -ljpeg -ltiff -lpng -lnetcdf
> #-lcfitsio -lpq -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl  >&5 /usr/bin/ld:
> #cannot find -lnnz10 collect2: ld returned 1 exit status
> #configure:26103: $? = 1
> #configure: failed program was:
> #| 
> #|                 /* confdefs.h.  */
> 
> I haven't found anything about it in other mailings, so I hope someone can give
> me a hint, how I can manage to get oracle support for current gdal 1.4.1. I
> worked with version 1.3.2 before and there I have oci support with the same
> configuration.

Could you give me list of libraries in your directory
/usr/lib/oracle/9.2.0/OraHome/lib
?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From otto.dassau at gmx.de  Tue May 15 08:37:15 2007
From: otto.dassau at gmx.de (Otto Dassau)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <46499DCE.7030004@loskot.net>
References: <20070515110247.69c5a374@localhost.localdomain>
	<46499DCE.7030004@loskot.net>
Message-ID: <20070515143715.4b9a48f9@localhost.localdomain>

Hi Mateusz,

On Tue, 15 May 2007 13:47:26 +0200
Mateusz Loskot <mateusz@loskot.net> wrote:

> Otto Dassau wrote:
> > Hi, 
> > 
> > I am trying to build gdal 1.4.1 with OCI support but with no success. The
> > database is an oracle 9i. In the configure script I provide:
> > 
> > --with-oci=/usr/lib/oracle/9.2.0/OraHome \
> > --with-oci-lib=/usr/lib/oracle/9.2.0/OraHome/lib
> 
> Otto,
> 
> You should use
> 
> --with-oci
> 
> *or* pair of options
> 
> --with-oci-include
> --with-oci-lib

yes, but the header files are in two folders - so I use:

--with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public \
/usr/lib/oracle/9.2.0/OraHome/rdbms/demo' 

Problem here: it only looks into the first of the two folders. The oci.h header
is in /usr/lib/oracle/9.2.0/OraHome/rdbms/demo. Do I have to use another
syntax? I tried with different quotation marks without success.

-> checking for Oracle OCI headers in /usr/lib/oracle/9.2.0/OraHome/rdbms/public
/usr/lib/oracle/9.2.0/OraHome/rdbms/demo
... #error Oracle oci.h header not found

> The single --with-oci is equivalent to ORACLE_HOME environment,
> but it may not work well with older Oracle versions, because there were
> some changes in structure of installation directory.
> 
> So, try to use the two latter options.
> 
> > There are two problems:
> > 
> > a) checking for Oracle OCI headers in
/usr/lib/oracle/9.2.0/OraHome/rdbms/public
> > 
> > During configuration the header files are assumed to be in rdbms/public:
> > ... checking for Oracle OCI headers in
> > /usr/lib/oracle/9.2.0/OraHome/rdbms/public
> > 
> > but in my oracle installation the header files are located in /rdbms/demo/,
so I
> > have to copy them. Can I somehow add:
> > 
> > --with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public
/usr/lib/oracle/9
> > .2.0/OraHome/rdbms/demo' ?
> 
> Yes, you should use --with-oci-include.
> 
> > b) checking for Oracle OCI libraries in /usr/lib/oracle/9.2.0/OraHome/lib
> > 
> > here I get following error message that -lnnz10 is missing:
> > 
> > #configure:26066: checking for Oracle OCI libraries in
> > #/usr/lib/oracle/9.2.0/OraHome/lib configure:26097: g++ -o conftest -g -O2 
> > #-I/usr/lib/oracle/9.2.0/OraHome/rdbms/public 
> > #-L/usr/lib/oracle/9.2.0/OraHome/lib -lclntsh -lnnz10 conftest.cc -L/usr/lib
> > #-lxerces-c -lpthread -ljasper -lmfhdf -ldf -lgif -ljpeg -ltiff -lpng
> > -lnetcdf
> > #-lcfitsio -lpq -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl  >&5
> > /usr/bin/ld:
> > #cannot find -lnnz10 collect2: ld returned 1 exit status
> > #configure:26103: $? = 1
> > #configure: failed program was:
> > #| 
> > #|                 /* confdefs.h.  */
> > 
> > I haven't found anything about it in other mailings, so I hope someone can
> > give
> > me a hint, how I can manage to get oracle support for current gdal 1.4.1. I
> > worked with version 1.3.2 before and there I have oci support with the same
> > configuration.
> 
> Could you give me list of libraries in your directory
> /usr/lib/oracle/9.2.0/OraHome/lib
> ?

ok, I attach a list with all files in /usr/lib/oracle/9.2.0/OraHome/lib

regards,
 Otto
-------------- next part --------------
/usr/lib/oracle/9.2.0/OraHome/lib/activation.jar
/usr/lib/oracle/9.2.0/OraHome/lib/clntsh.map
/usr/lib/oracle/9.2.0/OraHome/lib/clntst_1.lis
/usr/lib/oracle/9.2.0/OraHome/lib/clntst_2.lis
/usr/lib/oracle/9.2.0/OraHome/lib/clntst.lis
/usr/lib/oracle/9.2.0/OraHome/lib/facility.lis
/usr/lib/oracle/9.2.0/OraHome/lib/jsse.jar
/usr/lib/oracle/9.2.0/OraHome/lib/lclasses11.zip
/usr/lib/oracle/9.2.0/OraHome/lib/lclasses12.zip
/usr/lib/oracle/9.2.0/OraHome/lib/ldflags
/usr/lib/oracle/9.2.0/OraHome/lib/ldflagsO
/usr/lib/oracle/9.2.0/OraHome/lib/libagent9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libclient9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libclntsh.so
/usr/lib/oracle/9.2.0/OraHome/lib/libclntsh.so.9.0
/usr/lib/oracle/9.2.0/OraHome/lib/libclntst9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libcommon9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libcore9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libcorejava.so
/usr/lib/oracle/9.2.0/OraHome/lib/libcprts.so
/usr/lib/oracle/9.2.0/OraHome/lib/libcprts.so.3
/usr/lib/oracle/9.2.0/OraHome/lib/libcxa.so
/usr/lib/oracle/9.2.0/OraHome/lib/libcxa.so.3
/usr/lib/oracle/9.2.0/OraHome/lib/libgeneric9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libheteroxa9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libirc.a
/usr/lib/oracle/9.2.0/OraHome/lib/libjmisc.so
/usr/lib/oracle/9.2.0/OraHome/lib/libldapclnt9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libldapjclnt9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libldapjclnt9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libmm.a
/usr/lib/oracle/9.2.0/OraHome/lib/libn9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnbeq9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libncrypt9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnhost9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnjni9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libnl9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnldap9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnls9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnoname9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnro9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnsgr9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnsslb9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libntcp9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libntcps9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libntns9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnus9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libnzjs9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libocijdbc9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libocijdbcst9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libOsUtils.so
/usr/lib/oracle/9.2.0/OraHome/lib/libplc9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libplp9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libpls9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libpsa9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxp9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxp9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxpd.a
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxpd.so
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxpu.a
/usr/lib/oracle/9.2.0/OraHome/lib/libskgxpu.so
/usr/lib/oracle/9.2.0/OraHome/lib/libslax9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libsnls9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libsql9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libsqlplus.a
/usr/lib/oracle/9.2.0/OraHome/lib/libtrace9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libtracefe9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libtracept9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libunls9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libunwind.so
/usr/lib/oracle/9.2.0/OraHome/lib/libunwind.so.3
/usr/lib/oracle/9.2.0/OraHome/lib/libvsn9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libwtc9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libwtc9.so
/usr/lib/oracle/9.2.0/OraHome/lib/libxml9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libxmlg9.a
/usr/lib/oracle/9.2.0/OraHome/lib/libxsd9.a
/usr/lib/oracle/9.2.0/OraHome/lib/mail.jar
/usr/lib/oracle/9.2.0/OraHome/lib/naect.o
/usr/lib/oracle/9.2.0/OraHome/lib/naedhs.o
/usr/lib/oracle/9.2.0/OraHome/lib/naeet.o
/usr/lib/oracle/9.2.0/OraHome/lib/nautab.o
/usr/lib/oracle/9.2.0/OraHome/lib/nigcon.o
/usr/lib/oracle/9.2.0/OraHome/lib/nigtab.o
/usr/lib/oracle/9.2.0/OraHome/lib/nnfgt.o
/usr/lib/oracle/9.2.0/OraHome/lib/ntcontab.o
/usr/lib/oracle/9.2.0/OraHome/lib/osntabst.o
/usr/lib/oracle/9.2.0/OraHome/lib/s0main.o
/usr/lib/oracle/9.2.0/OraHome/lib/scorept.o
/usr/lib/oracle/9.2.0/OraHome/lib/servlet.jar
/usr/lib/oracle/9.2.0/OraHome/lib/sscoreed.o
/usr/lib/oracle/9.2.0/OraHome/lib/sysliblist

/usr/lib/oracle/9.2.0/OraHome/lib/stubs:
ld-linux-2.2.2-stub.so
ld-linux.so.2
libBrokenLocale-2.2.2-stub.so
libBrokenLocale.so
libBrokenLocale.so.1
libc-2.2.2-stub.so
libcrypt-2.2.2-stub.so
libcrypt.so
libcrypt.so.1
libc.so
libc.so.6
libc.so.sbs
libc.so.tmp
libdl-2.2.2-stub.so
libdl.so
libdl.so.2
libm-2.2.2-stub.so
libm.so
libm.so.6
libNoVersion-2.2.2-stub.so
libNoVersion.so.1
libnsl-2.2.2-stub.so
libnsl.so
libnsl.so.1
libpthread-2.2.2-stub.so
libpthread.so
libpthread.so.0
libresolv-2.2.2-stub.so
libresolv.so
libresolv.so.2
librt-2.2.2-stub.so
librt.so
librt.so.1
libutil-2.2.2-stub.so
libutil.so
libutil.so.1
From mateusz at loskot.net  Tue May 15 08:59:29 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] SHP Files as Layers into a KML File
In-Reply-To: <001701c79484$8c55b6d0$0100a8c0@Kit1>
References: <002701c793c6$6fc5f340$0100a8c0@Kit1> <4644C4C3.7090205@loskot.net>
	<001701c79484$8c55b6d0$0100a8c0@Kit1>
Message-ID: <4649AEB1.6080505@loskot.net>

Philippe,

I think it should be easy to write Python script that will get a bunch
of KML files, each generated from a shapefile, and to some merging.

Unfortunately, I don't have any easier solution to suggest, for now.

Mat

Philippe de Franclieu wrote:
> Hello Mateusz,
> 
> Thank you for your prompt reply.
> " if all shapes have the same schema". That's the point.
> The structures of the attribute data being different, merging shapes is not
> the solution. I should have imagine that earlier.
> No easy solution to superimpose heterogeneous shapes and data site by site
> I'm afraid. 
> Best regards
> Philippe
>  
> 
>> -----Message d'origine-----
>> De : Mateusz Loskot [mailto:mateusz@loskot.net] 
>> Envoy? : vendredi 11 mai 2007 21:32
>> ? : Philippe de Franclieu
>> Cc : gdal-dev@lists.maptools.org
>> Objet : Re: [Gdal-dev] SHP Files as Layers into a KML File
>>
>> Philippe de Franclieu wrote:
>>> Hello,
>>>  
>>> Objective : put several SHP files as different layers - 
>> attribute data being
>>> different - into a KML file.
>>> Pb : I cannot -append -update the KML file : "Unable to 
>> open existing output
>>> datasource 'out1.kml'".
>>>  
>>> shp2kml.bat file is as follows :
>>> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" 
>> out1.kml in_1.shp -dsco
>>> NameField=LABEL -nln NewLayerName_1
>>> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 
>> -f "KML" out1.kml
>>> in_2.shp -dsco NameField=ID -nln NewLayerName_2
>>> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:4326 
>> -f "KML" out1.kml
>>> in_3.shp -dsco NameField=ID -nln NewLayerName_3
>>>  
>>> What is wrong?
>> Philippe,
>>
>> As you can read in the KML driver doc
>> (http://www.gdal.org/ogr/drv_kml.html)
>>
>> "OGR has limited support for KML writing and no support for 
>> reading KML."
>>
>> This is the reason of the error you're getting.
>>
>> It may seems strange because you're trying to *write* KML but not to
>> read, but if you use -update option, this operation involves
>> datasource open and read steps.
>>
>> So, it is not possible to generate single KML file in more 
>> than one steps.
>>
>> As workaround, you could merge shapefiles into single shapefile with
>> ogr2ogr, if all shapes have the same schema, and then build KML from
>> single shapefile.
>>
>>> The other option, merge several SHP files into 'out.shp' 
>> then convert it to
>>> 'out2.kml', does not work either.
>>>  
>>> My shp2shp2kml.bat file is as follows :
>>> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI 
>> Shapefile" out.shp
>>> in_1.shp -nln NewLayerName_1
>>> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
>>> Shapefile" out.shp in_2.shp -nln NewLayerName_2
>>> ogr2ogr -update -append -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI
>>> Shapefile" out.shp in_3.shp -nln NewLayerName_3
>>> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:4326 -f "KML" out2.kml out.shp
>>>  
>>> ERROR 1: Failed to create file out.shp\NewLayerName_2.shp.
>>> ERROR 4: Failed to open Shapefile 'out.shp\NewLayerName_2.shp'.
>>> ERROR 1: Terminating translation prematurely after failed 
>> translation of
>>> layer in_2
>> OGR tries to resolve output datasource as a directory but not a file.
>> If you want to get new layer name (shapefile name), use directory
>> path as output datasource:
>>
>> ogr2ogr -s_srs EPSG:27572 -t_srs EPSG:27572 -f "ESRI Shapefile" .
>> in_1.shp -nln NewLayerName_1
>>
>> Here, in *current* directory (see the dot), you will get
>> NewLayerName_1.shp file, generated from in_1.shp.
>>
>>> Also note that the -nln option does not replace the layer 
>> name from 'out' to
>>> 'NewLayerName_%' whith the - f "ESRI Shapefile" option 
>> while it does with
>>> the -f "KML".
>> Yes, because layer in ESRI Shapefile driver is...name of shapefile,
>> but if you use shapefile as a datasource, its filename works has two
>> meanings: datasoruce and layer name. It's not supported to 
>> create, edit
>> and rename the same shapefile in single step.
>>
>> If you run:
>>
>> ogrinfo in_1.shp
>>
>> you will get list of layers including *one* layer named in_1.
>>
>> If you run:
>>
>> ogrinfo /path/to/directory/but/not/to/shapefile
>>
>> you will get list of N layers - names of shapefiles in given 
>> directory.
>>
>> Cheers
>> -- 
>> Mateusz Loskot
>> http://mateusz.loskot.net
>>  
>>
> 
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net

From DCarreira at edia.pt  Tue May 15 10:22:00 2007
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OGR with Oracle Spatial support built-in
Message-ID: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>

Hi.

 

Is there any way I can get OGR pre-compiled with Oracle Spatial support?

 

If not, is there a simple recipe that I can follow to compile OGR?

 

The only dev tool I have is C# express.

 

Thanks,

Duarte Carreira

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070515/4a69750b/attachment.html
From mateusz at loskot.net  Tue May 15 12:53:41 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <000001c7941b$4fb55460$0a0a0a0a@idrisi.clarku.edu>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
	<000001c7941b$4fb55460$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <4649E595.4060803@loskot.net>

Ivan Lucena wrote:
> Mateusz,
> 
>> 7.1), but he uses ie. VS2005, they he won't be able to run debug
>> builds, because there are no debug versions of 7.1 CRT DLLs
>> available in the system.
> 
> I could be completely wrong, but I think that once you decided to do 
> debugging it doesn't mean that all the DLL that you use should to be 
> compiled for debugging.

Ivan,

It's important for base framework libraries: C and C++.

> I am using VC2005 to compile and debug in GDAL and I can use
> "...Visual Studio 8\Common7\Tools\Bin\Depends.exe", the "Dependency
> Walker", and it is reporting that gdal_translate.exe is using
> MSVCR80.DLL not MSVCR80D.DLL.

Yes, if you compile with VC++ 2005, then you use msvcr80.dll and
msvcr80d.dll.

Here is the situation I'm trying to describe:

http://mateusz.loskot.net/tmp/gdal-dev-misisng-71d.png

1. gdal14.dll built with Visual C++ 7.1, as debug
2. read.exe built with Visual C++ 8.0, as debug
3. gdal14.dll requires debug versions of 7.1 runtime libraries which are
missing if you don't have Visual C++ 7.1 installed

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue May 15 13:03:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OGR with Oracle Spatial support built-in
In-Reply-To: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
Message-ID: <4649E7E6.1090202@pobox.com>

Duarte Carreira wrote:
> Hi.
> 
> Is there any way I can get OGR pre-compiled with Oracle Spatial support?
> 
> If not, is there a simple recipe that I can follow to compile OGR?
> 
> The only dev tool I have is C# express.

Duarte,

In theory we just need someone with Visual Studio 2003 (aka VC7.1) and
Oracle on the same system who could build the driver as a plugin against
the already published GDAL/OGR 1.4.1 binaries.

I have VC7.1, but I don't have Oracle on the same system, and I'm a bit
loath to screw around installing it.  Perhaps there is a light oracle
"client only" install I could be doing?

I think Mateusz has Oracle, but VC8.

Possibly Howard might be interested?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From pagameba at gmail.com  Tue May 15 13:04:22 2007
From: pagameba at gmail.com (Paul Spencer)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] creating tiles from rasters using gdal
Message-ID: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>

Hi all ...

I need to turn some rasters (png and tiff) into tiles for use in a  
tiled map application.  For various reasons, these rasters are not  
georeferenced and I don't need them to be.

What I have done is create a shell script with a couple of loops that  
calls gdal_translate to pick out 256x256 tiles and save them into the  
directory structure that I need (Paul Ramsey's TMS structure in this  
case).  Here is the command that I am invoking for each tile:

gdal_translate -quiet -of "PNG" -outsize 256 256 -srcwin $l $t 256  
256 $src ../tiles/1.0.0/"$tileset"/"$scale_number"/"$nCol"/"$y"".png"

where $l and $t are determined from the current row/col * 256, $src  
is the input raster, $tileset and $scale_number are used for  
subdirectories, $nCol is the current column and $y is the inverse of  
the current row (need to adjust between pixel and geographic space  
for the client)

This works perfectly but becomes increasingly slow - I'm processing  
6804 tiles out of a raster that is 21504 x 20736 pixels, the first  
100 or so were fast but now it is down to 3-4 secs per tile (I'm at  
4200 tiles so far).

How can I improve performance?  Is there an existing utility that  
will do something like this or do I need to roll my own version of  
gdal_translate?

Cheers

Paul
+-----------------------------------------------------------------+
|Paul Spencer                          pspencer@dmsolutions.ca    |
+-----------------------------------------------------------------+
|Chief Technology Officer                                         |
|DM Solutions Group Inc                http://www.dmsolutions.ca/ |
+-----------------------------------------------------------------+






From emanuele.conti at gmail.com  Tue May 15 13:10:08 2007
From: emanuele.conti at gmail.com (Emanuele Conti)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] open files from mysql
In-Reply-To: <4648C16A.1010406@pobox.com>
References: <22ea73180705141058o61ae5d41h93d5b55a2b44d7a4@mail.gmail.com>
	<4648C16A.1010406@pobox.com>
Message-ID: <22ea73180705151010x32908533kbf0c9edf1256d1bd@mail.gmail.com>

Hi and thanks for your fast reply,

I'm concerned that this is a rather specialized driver, and that folks might
> actually want to use rasters from MySQL in a variety of other ways as
> well.


 Can you give me an example? I can't imagine (I'm not so expert in gis maps)
how a raster map could be stored in a mysql db other than the one of storing
the whole file in a blob...

I would be happy to have the driver put in "spike" (an experimental area) in
> subversion, but I'm not yet all that comfortable that this makes sense as
> *the* mysql raster driver for GDAL.


How should I do that? And how could this first "idea" of driver be improved?
I could work on it if only I'd have some feedback about the direction it
should go and if I'm pretty sure that it won't be wasted time!


Best regards,
>
> --


Best regards

-- 
Emanuele Conti
Senior Student at University ROMA TRE
Department of Informatics and Automation
ROME, Italy (matr. 251318)
Mob:       +39 328 2681070
Home:     +39 06 39741124
e-mail:     emanuele.conti@yahoo.com
y!:            emanuele_c
msn:        emanuele_c@yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070515/d7a5206b/attachment.html
From warmerdam at pobox.com  Tue May 15 13:17:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4644D734.8@loskot.net>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
Message-ID: <4649EB19.2070907@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.
>>
>>   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
>>   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip
>>
>> This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
>> that C applications (like gdalinfo.c) can be built against these libraries
>> using other compilers - I tested with VC6.
> 
> Frank,
> 
> AFAIU, the dev version is dedicated for developers,
> so they are supposed to build their applications in Debug mode.
> If a user does not use Visual Studio .NET 2003 (compiler Visual C++
> 7.1), but he uses ie. VS2005, they he won't be able to run debug builds,
> because there are no debug versions of 7.1 CRT DLLs available in the system.
...
> Is this correct, that there are only debug version of binaries
> in the dev package and release versions are missing?

Mateusz,

No, the gdalwin32dev141.zip package also include gdal_i.lib which is
the release build stub library corresponding to gdal14.dll, the release
DLL distributed as part of gdalwin32exe141.zip.

My understanding then is that folks with VS2005 cannot use the *debug*
version of GDAL, but can still build their application with debug and
use the release version of GDAL.  The downside of course is that they
can't debug into GDAL.

Basically then the gdal_iD.lib and gdal14d.dll are extras for folks
who happen to have VS2003.  Others will basically have to use the
release version of GDAL even if they are building their own apps with
debug.  If they really want to debug into GDAL then they will need to
build it themselves.

In fact, when we distribute plugins they will need to be specifically
for a release or debug build I imagine.  Perhaps it would be simpliest
if I just omit any debug version of stuff from the package?  That way
folks won't accidentally try to use it with the wrong version of the
compiler, or run into problems with plugins not working in debug.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May 15 13:45:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] open files from mysql
In-Reply-To: <22ea73180705151010x32908533kbf0c9edf1256d1bd@mail.gmail.com>
References: <22ea73180705141058o61ae5d41h93d5b55a2b44d7a4@mail.gmail.com>
	<4648C16A.1010406@pobox.com>
	<22ea73180705151010x32908533kbf0c9edf1256d1bd@mail.gmail.com>
Message-ID: <4649F1CF.3080803@pobox.com>

Emanuele Conti wrote:
> Hi and thanks for your fast reply,
> 
>     I'm concerned that this is a rather specialized driver, and that
>     folks might
>     actually want to use rasters from MySQL in a variety of other ways
>     as well.
> 
> 
>  Can you give me an example? I can't imagine (I'm not so expert in gis 
> maps) how a raster map could be stored in a mysql db other than the one 
> of storing the whole file in a blob...

Emauele,

Well, another approach is to treat a large image as a set of tiles.  So
a table might represent the image, and each row is a tile with other
columns holding the bounds for instance.

>     I would be happy to have the driver put in "spike" (an experimental
>     area) in
>     subversion, but I'm not yet all that comfortable that this makes
>     sense as
>     *the* mysql raster driver for GDAL.
> 
> 
> How should I do that? And how could this first "idea" of driver be 
> improved? I could work on it if only I'd have some feedback about the 
> direction it should go and if I'm pretty sure that it won't be wasted time!

If you submit the driver via Trac, I can commit it on the spike.

Then I'd encourage you to write up a topic about the driver in the wiki
for folks to look at if they want to try it.  I'll add a bit of info there
on how to pull it out of spike into an existing build.  Likely we would
handle it as a plugin.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue May 15 13:40:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4649EB19.2070907@pobox.com>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
	<4649EB19.2070907@pobox.com>
Message-ID: <4649F09C.5070003@loskot.net>

Frank Warmerdam wrote:
> My understanding then is that folks with VS2005 cannot use the
> *debug* version of GDAL, but can still build their application with
> debug and use the release version of GDAL.  The downside of course is
> that they can't debug into GDAL.

Frank,

Yes, it is correct.

> Basically then the gdal_iD.lib and gdal14d.dll are extras for folks 
> who happen to have VS2003.  Others will basically have to use the 
> release version of GDAL even if they are building their own apps with
>  debug.  If they really want to debug into GDAL then they will need
> to build it themselves.

Possible but I think users may be confused which version to use.

> In fact, when we distribute plugins they will need to be specifically
>  for a release or debug build I imagine.  Perhaps it would be
> simpliest if I just omit any debug version of stuff from the package?
> That way folks won't accidentally try to use it with the wrong
> version of the compiler, or run into problems with plugins not
> working in debug.

Yes, I believe that would be good.
If someone will want to debug GDAL, we can assume he is
able to build GDAL on his own, what seems to be the best option for very
powered users.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue May 15 13:53:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] creating tiles from rasters using gdal
In-Reply-To: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>
References: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>
Message-ID: <4649F3A4.80301@pobox.com>

Paul Spencer wrote:
> I need to turn some rasters (png and tiff) into tiles for use in a tiled 
> map application.  For various reasons, these rasters are not 
> georeferenced and I don't need them to be.
...
> This works perfectly but becomes increasingly slow - I'm processing 6804 
> tiles out of a raster that is 21504 x 20736 pixels, the first 100 or so 
> were fast but now it is down to 3-4 secs per tile (I'm at 4200 tiles so 
> far).
> 
> How can I improve performance?  Is there an existing utility that will 
> do something like this or do I need to roll my own version of 
> gdal_translate?

Paul,

If the source raster is PNG then the problem is likely due to the file
having to be decompressed from the beginning each time you process a tile.
For the first row of tiles this isn't bad, but the further you go down the
big file, the more of the png has to be decompressed on each run.

If you can, just reprocess the big images into internally tiled TIFFs once
before running the tiling script.

Alternatively, you could accomplish the tiling using a script that keeps the
input file open.  This would help because the in memory caching would prefer
a lot of unnecessary re-decompressing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Tue May 15 13:56:31 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] creating tiles from rasters using gdal
In-Reply-To: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>
References: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>
Message-ID: <4649F44F.2050705@noaa.gov>

Paul Spencer wrote:
> I need to turn some rasters (png and tiff) into tiles for use in a tiled 
> map application.  For various reasons, these rasters are not 
> georeferenced and I don't need them to be.

if you don't need them geo-referenced, then you can use regular old 
image processing tools. ImageMagick, for instance, should be able to do 
that just fine.

There was a note about that on list list not too long ago.

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From craig.miller at spatialminds.com  Tue May 15 14:18:08 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4649F09C.5070003@loskot.net>
References: <4632CA81.80104@pobox.com>
	<4644D734.8@loskot.net><4649EB19.2070907@pobox.com>
	<4649F09C.5070003@loskot.net>
Message-ID: <005e01c7971d$650fd290$7401a8c0@sherpa>

I'd agree with this.  Anyone debugging under Windows is most likely setup to
build on their own.

I'm curious... How many of you who debug under Windows use the makefiles
that come with GDAL, and how many of you use Visual Studio Project files
(your own or the VTP ones)?

- I use my own VS Solution and Project Files to build and debug.

Craig
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Tuesday, May 15, 2007 10:41 AM
To: Frank Warmerdam
Cc: gdal-dev
Subject: Re: [Gdal-dev] Win32 Binaries

Frank Warmerdam wrote:
> My understanding then is that folks with VS2005 cannot use the
> *debug* version of GDAL, but can still build their application with 
> debug and use the release version of GDAL.  The downside of course is 
> that they can't debug into GDAL.

Frank,

Yes, it is correct.

> Basically then the gdal_iD.lib and gdal14d.dll are extras for folks 
> who happen to have VS2003.  Others will basically have to use the 
> release version of GDAL even if they are building their own apps with  
> debug.  If they really want to debug into GDAL then they will need to 
> build it themselves.

Possible but I think users may be confused which version to use.

> In fact, when we distribute plugins they will need to be specifically  
> for a release or debug build I imagine.  Perhaps it would be simpliest 
> if I just omit any debug version of stuff from the package?
> That way folks won't accidentally try to use it with the wrong version 
> of the compiler, or run into problems with plugins not working in 
> debug.

Yes, I believe that would be good.
If someone will want to debug GDAL, we can assume he is able to build GDAL
on his own, what seems to be the best option for very powered users.


Cheers
--
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ivan.lucena at pmldnet.com  Tue May 15 15:02:56 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <4649EB19.2070907@pobox.com>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
	<4649EB19.2070907@pobox.com>
Message-ID: <000201c79723$a6031d60$0a0a0a0a@idrisi.clarku.edu>

Frank,

That was exactly what I was trying to prove when I got into trouble with
VC2005 SP1. Have you tested it? Can you have your application in VC2005 in
debugging mode using the gdalwinexe141 distribution that comes with:
msvcp71.dll and msvcr71.dll? 

Best regards,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, May 15, 2007 1:17 PM
To: Mateusz Loskot
Cc: gdal-dev
Subject: Re: [Gdal-dev] Win32 Binaries

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> I've taken my first crack at producing Win32 binaries for GDAL 1.4.1.
>>
>>   http://download.osgeo.org/gdal/win32/gdalwin32exe141.zip
>>   http://download.osgeo.org/gdal/win32/gdalwin32dev141.zip
>>
>> This is built using VC7.1 (Visual Studio .NET 2003).  I have confirmed
>> that C applications (like gdalinfo.c) can be built against these
libraries
>> using other compilers - I tested with VC6.
> 
> Frank,
> 
> AFAIU, the dev version is dedicated for developers,
> so they are supposed to build their applications in Debug mode.
> If a user does not use Visual Studio .NET 2003 (compiler Visual C++
> 7.1), but he uses ie. VS2005, they he won't be able to run debug builds,
> because there are no debug versions of 7.1 CRT DLLs available in the
system.
...
> Is this correct, that there are only debug version of binaries
> in the dev package and release versions are missing?

Mateusz,

No, the gdalwin32dev141.zip package also include gdal_i.lib which is
the release build stub library corresponding to gdal14.dll, the release
DLL distributed as part of gdalwin32exe141.zip.

My understanding then is that folks with VS2005 cannot use the *debug*
version of GDAL, but can still build their application with debug and
use the release version of GDAL.  The downside of course is that they
can't debug into GDAL.

Basically then the gdal_iD.lib and gdal14d.dll are extras for folks
who happen to have VS2003.  Others will basically have to use the
release version of GDAL even if they are building their own apps with
debug.  If they really want to debug into GDAL then they will need to
build it themselves.

In fact, when we distribute plugins they will need to be specifically
for a release or debug build I imagine.  Perhaps it would be simpliest
if I just omit any debug version of stuff from the package?  That way
folks won't accidentally try to use it with the wrong version of the
compiler, or run into problems with plugins not working in debug.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sy at perkins.net  Tue May 15 15:47:38 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <005e01c7971d$650fd290$7401a8c0@sherpa>
References: <4632CA81.80104@pobox.com>	<4644D734.8@loskot.net><4649EB19.2070907@pobox.com>	<4649F09C.5070003@loskot.net>
	<005e01c7971d$650fd290$7401a8c0@sherpa>
Message-ID: <464A0E5A.1000801@perkins.net>

Personally I've always used the makefile.vc approach. I find that 
fine-grained configuration of the build is much easier by editing 
nmake.opt, rather than editing project files. I've never had any real 
problems doing it that way though if I was doing more serious GDAL 
development under windows (rather than just building release version of 
the GDAL libraries) I would prefer project files.

A while back someone suggested setting up a cmake build and I'd love to 
see that. In addition to its cross-platform abilities (e.g. VS 2003 vs 
VS 2005 vs gcc), cmake seems offers easy fine-grained configuration, but 
generates normal looking VS project files on windows. If only I had the 
time...

Cheers,

Sy


Craig Miller wrote:
> I'd agree with this.  Anyone debugging under Windows is most likely setup to
> build on their own.
>
> I'm curious... How many of you who debug under Windows use the makefiles
> that come with GDAL, and how many of you use Visual Studio Project files
> (your own or the VTP ones)?
>
> - I use my own VS Solution and Project Files to build and debug.
>
> Craig
>  
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
> Sent: Tuesday, May 15, 2007 10:41 AM
> To: Frank Warmerdam
> Cc: gdal-dev
> Subject: Re: [Gdal-dev] Win32 Binaries
>
> Frank Warmerdam wrote:
>   
>> My understanding then is that folks with VS2005 cannot use the
>> *debug* version of GDAL, but can still build their application with 
>> debug and use the release version of GDAL.  The downside of course is 
>> that they can't debug into GDAL.
>>     
>
> Frank,
>
> Yes, it is correct.
>
>   
>> Basically then the gdal_iD.lib and gdal14d.dll are extras for folks 
>> who happen to have VS2003.  Others will basically have to use the 
>> release version of GDAL even if they are building their own apps with  
>> debug.  If they really want to debug into GDAL then they will need to 
>> build it themselves.
>>     
>
> Possible but I think users may be confused which version to use.
>
>   
>> In fact, when we distribute plugins they will need to be specifically  
>> for a release or debug build I imagine.  Perhaps it would be simpliest 
>> if I just omit any debug version of stuff from the package?
>> That way folks won't accidentally try to use it with the wrong version 
>> of the compiler, or run into problems with plugins not working in 
>> debug.
>>     
>
> Yes, I believe that would be good.
> If someone will want to debug GDAL, we can assume he is able to build GDAL
> on his own, what seems to be the best option for very powered users.
>
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070515/1c00fef2/attachment.html
From tutey at o2.pl  Tue May 15 16:01:59 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <46484E88.6070102@pobox.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
Message-ID: <10629998.post@talk.nabble.com>


'Frank Warmerdam-2' wrote:

> gdalwarp uses very different library interfaces and io strategies from
> gdal_translate.  So in some circumstances the output may differ.

> On careful review, the difference in the file in question is because
> gdal_translate uses the TIFFWriteScanline() interface to write the output
> file from within GTiffDataset::CreateCopy(), and this only writes as much
> of the final 'strip' of the file as is required to complete image area.
> But gdalwarp goes through the blockio interface which writes the complete
> final strip, even the portion that falls off the end of the file.

Frank,

Thanks much for your answer! I'm so glad the hear this is not a data
corruption issue or whatsoever. 

However, wouldn't you consider it a missfeature that gdalwarp creates circa
25% bigger GeoTIFFs than gdal_translate does? The bigger deal it is the
bigger is the input dataset.  For me it is quite a difference whether I get
a 3 GB or 4 GB raster. Do you think gdalwarp could follow gdal_translate in
this regard? If possible of course.

Best,
Maciek

-- 
View this message in context: http://www.nabble.com/r.out.gdal-vs-gdal_translate-vs-gdalwarp-tf3717930.html#a10629998
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Tue May 15 16:54:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] r.out.gdal vs gdal_translate vs gdalwarp
In-Reply-To: <10629998.post@talk.nabble.com>
References: <46422286.1050300@o2.pl> <46423280.1040603@o2.pl>
	<46471693.9040701@o2.pl> <46484E88.6070102@pobox.com>
	<10629998.post@talk.nabble.com>
Message-ID: <464A1E10.7040807@pobox.com>

Maciej Sieczka wrote:
> 'Frank Warmerdam-2' wrote:
> 
>> gdalwarp uses very different library interfaces and io strategies from
>> gdal_translate.  So in some circumstances the output may differ.
> 
>> On careful review, the difference in the file in question is because
>> gdal_translate uses the TIFFWriteScanline() interface to write the output
>> file from within GTiffDataset::CreateCopy(), and this only writes as much
>> of the final 'strip' of the file as is required to complete image area.
>> But gdalwarp goes through the blockio interface which writes the complete
>> final strip, even the portion that falls off the end of the file.
> 
> Frank,
> 
> Thanks much for your answer! I'm so glad the hear this is not a data
> corruption issue or whatsoever. 
> 
> However, wouldn't you consider it a missfeature that gdalwarp creates circa
> 25% bigger GeoTIFFs than gdal_translate does? The bigger deal it is the
> bigger is the input dataset.  For me it is quite a difference whether I get
> a 3 GB or 4 GB raster. Do you think gdalwarp could follow gdal_translate in
> this regard? If possible of course.

Maciek,

The particular problem I saw in the case I analysed should actually get
less and less significant as the dataset gets larger.  If you are seeing
much larger files for big files then a different issue is likely to
be coming into play.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue May 15 17:01:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <000201c79723$a6031d60$0a0a0a0a@idrisi.clarku.edu>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
	<4649EB19.2070907@pobox.com>
	<000201c79723$a6031d60$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <2634.84.10.81.30.1179262875.squirrel@loskot.net>

Ivan Lucena wrote:
> Frank,
>
> That was exactly what I was trying to prove when I got into trouble with
> VC2005 SP1. Have you tested it? Can you have your application in VC2005 in
> debugging mode using the gdalwinexe141 distribution that comes with:
> msvcp71.dll and msvcr71.dll?

Ivan,

Yes, I tested this approach today and it works.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue May 15 17:37:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Win32 Binaries
In-Reply-To: <000201c79723$a6031d60$0a0a0a0a@idrisi.clarku.edu>
References: <4632CA81.80104@pobox.com> <4644D734.8@loskot.net>
	<4649EB19.2070907@pobox.com>
	<000201c79723$a6031d60$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <464A281A.7040507@pobox.com>

Ivan Lucena wrote:
> Frank,
> 
> That was exactly what I was trying to prove when I got into trouble with
> VC2005 SP1. Have you tested it? Can you have your application in VC2005 in
> debugging mode using the gdalwinexe141 distribution that comes with:
> msvcp71.dll and msvcr71.dll? 

Ivan,

I haven't tried it.  Mateusz tried it successfully with VC2005 (I'm not sure
if it was SP1 or not).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rob.mcmullen at gmail.com  Wed May 16 08:33:24 2007
From: rob.mcmullen at gmail.com (Rob McMullen)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] ANN: peppy-0.6.3 with hyperspectral image viewer
Message-ID: <a40be0e10705160533r6a4136eex249145c383e7f37e@mail.gmail.com>

I've been working on a graduate school software engineering project,
and it now has a hyperspectral image viewing mode using GDAL to
support the multitude of hyperspectral image formats.  (Without GDAL
it only supports uncompressed images with ENVI headers.)

Currently, it just displays images, shows spectra and profiles, and
has some basic image enhancement commands.  I intend to continue to
develop it as a platform for algorithm testing, and pie-in-the-sky as
a replacement for ENVI.  ENVI is a very capable analysis tool, but to
extend it you need to use the IDL language, which is quite a bit less
than my favorite thing ever.

peppy is written in Python using the ng-python bindings of GDAL, and
requires wxPython, numpy, and scipy.

http://www.flipturn.org/peppy/Hyperspectral.html

Comments welcome!

Rob

From mitchelljj98 at gmail.com  Wed May 16 09:21:18 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] remapping error for erdas imagine format within gdalwarp
Message-ID: <fa2ac0580705160621s65b2333dt2cbbcfd96b5c1d47@mail.gmail.com>

Hi,

When running the following command:

gdalwarp.exe -srcnodata "0 0 0" -dstnodata "0 0 1" -rc -s_srs EPSG:26913
-t_srs EPSG:26913 -co tiled=yes -q -of hfa inputfile outputfile

I get the following error:

ERROR 6: SetNoDataValue() not supported for this dataset.

Which means that the remapping from "0 0 0" to "0 0 1" can't be performed.
When looking at the erdas imagine file after processing it appears to be
processed correctly except that the remapping does not occur.  This is not a
problem for geotiff files, but I can't use geotiffs for mosaics that are
over 4 gb in size.  Are their any alternatives?  Will I be able to mosaic
and remap to the big Tiff format when it comes out.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070516/33d1e3c2/attachment.html
From Konstantin.Baumann at hpi.uni-potsdam.de  Wed May 16 09:31:51 2007
From: Konstantin.Baumann at hpi.uni-potsdam.de (Baumann, Konstantin)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
Message-ID: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>

Hi!

I would like to announce the new RFC 13:
<http://trac.osgeo.org/gdal/wiki/rfc13_createfeatures>

I would like to add some new methods to OGRLayer for "batched"
inserting/updating/deleting features. These virtual methods allow OGR
drivers to implement optimized handling of these batched operations
(e.g. resulting in a performance boost).

For example, I was able to improve the "batched insertion" scenario for
the MySQL driver from ~40 features per second to something about
800-1.500 features per second; for layers with >=50.000 features (with
and wihtout geometry)...

Any further comments and suggestions are wellcome.

What is the procedure to start voting on that?

Best regards,
    Kosta


From warmerdam at pobox.com  Wed May 16 10:05:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <464B0FBB.1070201@pobox.com>

Baumann, Konstantin wrote:
> Hi!
> 
> I would like to announce the new RFC 13:
> <http://trac.osgeo.org/gdal/wiki/rfc13_createfeatures>
> 
> I would like to add some new methods to OGRLayer for "batched"
> inserting/updating/deleting features. These virtual methods allow OGR
> drivers to implement optimized handling of these batched operations
> (e.g. resulting in a performance boost).
> 
> For example, I was able to improve the "batched insertion" scenario for
> the MySQL driver from ~40 features per second to something about
> 800-1.500 features per second; for layers with >=50.000 features (with
> and wihtout geometry)...
> 
> Any further comments and suggestions are wellcome.

Kosta,

I presume the optimization in the mysql driver was accomplished by doing
all the features in a single CreateFeatures() call as a single transaction.
Is that right?

There are other mechanisms to accomplish this - based on the OGR transaction
semantics.  For instance, I think the postgres and oracle drivers implement
ogr transaction semantics and can do a bunch of CreateFeature() calls in
a single transaction.  The ogr2ogr program already defaults to doing feature
creation in groups of 200 by default, with transaction semantics around this.

On the other hand, the transaction semantics are quite complicated to
implement properly in drivers, which is why I suspect they haven't been
done in the MySQL driver.  So if we were to proceed with this RFC I think
it would be because it provides a simplier approach to grouping create
features than the transaction semantics.

But because this introduces an extra interface and the related complexity
I'm hesitant to support it when there is another way to accomplish the
same thing.

One other small concern.  I think it can be inconvenient to implement
swig wrappers for interfaces taking arrays of objects.  Can any of the
swig folks comment on this?

> What is the procedure to start voting on that?

Normal practice would be to allow some discussion and revision and then to
call a formal motion to adopt the RFC, which would start the 2 business day
voting period.  You would need +1's from at least two GDAL PSC members and
no objections (-1's) to pass the RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed May 16 10:37:59 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <f3b73b7d0705160737o3335ab57mb6337f893e052b70@mail.gmail.com>

Hi,

I agree in the purpose of the RFC. However it seems that this
implementation brings in some new elements in the C++ interface and
further requirements of the various drivers to implement these
functions. Hopefully not the mysql is the only driver that would
implement this functionality.

Many people use the various SWIG-ged language APIs instead of the
C/C++ interface. So we should also consider to support these API-s
with any new additions as well. In this regard implementing typemaps
for object arrays in not too straightforward and we should eventually
reconstuct the array iterating through the elements one by one. It
would certainly bring in additional delays with the completion of the
overall implementation.
To support the SWIG interfaces you should also represent these
function at the GDAL/OGR C API.

I would propose you to examine the option of providing this
functionality by using the existing API with caching the various
feature creations / additions / deletions at the provider. These
changes could be propagated to the datastore in batch using the
existing transaction mechanism. I'm sure that this behaviour have
already been implemented in various providers.

Best regards,

Tamas



2007/5/16, Baumann, Konstantin <Konstantin.Baumann@hpi.uni-potsdam.de>:
> Hi!
>
> I would like to announce the new RFC 13:
> <http://trac.osgeo.org/gdal/wiki/rfc13_createfeatures>
>
> I would like to add some new methods to OGRLayer for "batched"
> inserting/updating/deleting features. These virtual methods allow OGR
> drivers to implement optimized handling of these batched operations
> (e.g. resulting in a performance boost).
>
> For example, I was able to improve the "batched insertion" scenario for
> the MySQL driver from ~40 features per second to something about
> 800-1.500 features per second; for layers with >=50.000 features (with
> and wihtout geometry)...
>
> Any further comments and suggestions are wellcome.
>
> What is the procedure to start voting on that?
>
> Best regards,
>     Kosta
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From dmorissette at mapgears.com  Wed May 16 10:48:33 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <464B0FBB.1070201@pobox.com>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<464B0FBB.1070201@pobox.com>
Message-ID: <464B19C1.20205@mapgears.com>

Frank Warmerdam wrote:
> 
> There are other mechanisms to accomplish this - based on the OGR 
> transaction
> semantics.  For instance, I think the postgres and oracle drivers implement
> ogr transaction semantics and can do a bunch of CreateFeature() calls in
> a single transaction.  The ogr2ogr program already defaults to doing 
> feature
> creation in groups of 200 by default, with transaction semantics around 
> this.
> 
...
> 
> But because this introduces an extra interface and the related complexity
> I'm hesitant to support it when there is another way to accomplish the
> same thing.
> 

I was not aware that OGR had this transaction mechanism, but I agree 
with Frank that it would be preferable to it if possible instead of 
adding another mechanism to do the same thing.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed May 16 11:44:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
Message-ID: <464B26E9.2050100@pobox.com>

Motion: To extend GDAL/OGR committer status to Dr. Konstantin Baumann.

--

Konstantin (Kosta) has been a user of GDAL/OGR for several years, and recent
developments at his Institute require some improvements to GDAL/OGR.  He has
been submitting detailed bug reports, and patches and most recently RFC 13
demonstrating a good understanding of GDAL/OGR.  He has already agreed to
adhere to RFC 3 committer guidelines.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed May 16 11:55:54 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
In-Reply-To: <464B26E9.2050100@pobox.com>
References: <464B26E9.2050100@pobox.com>
Message-ID: <f3b73b7d0705160855s478023bbt4d84c4116951b40e@mail.gmail.com>

+1

Best regards,

Tamas



2007/5/16, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To extend GDAL/OGR committer status to Dr. Konstantin Baumann.
>
> --
>
> Konstantin (Kosta) has been a user of GDAL/OGR for several years, and recent
> developments at his Institute require some improvements to GDAL/OGR.  He has
> been submitting detailed bug reports, and patches and most recently RFC 13
> demonstrating a good understanding of GDAL/OGR.  He has already agreed to
> adhere to RFC 3 committer guidelines.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hobu.inc at gmail.com  Wed May 16 12:06:01 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
In-Reply-To: <f3b73b7d0705160855s478023bbt4d84c4116951b40e@mail.gmail.com>
References: <464B26E9.2050100@pobox.com>
	<f3b73b7d0705160855s478023bbt4d84c4116951b40e@mail.gmail.com>
Message-ID: <E2E30043-1C06-45F6-A818-C104D3DEBE04@gmail.com>

+1

On May 16, 2007, at 10:55 AM, Tamas Szekeres wrote:

> +1
>
> Best regards,
>
> Tamas
>
>
>
> 2007/5/16, Frank Warmerdam <warmerdam@pobox.com>:
>> Motion: To extend GDAL/OGR committer status to Dr. Konstantin  
>> Baumann.
>>
>> --
>>
>> Konstantin (Kosta) has been a user of GDAL/OGR for several years,  
>> and recent
>> developments at his Institute require some improvements to GDAL/ 
>> OGR.  He has
>> been submitting detailed bug reports, and patches and most  
>> recently RFC 13
>> demonstrating a good understanding of GDAL/OGR.  He has already  
>> agreed to
>> adhere to RFC 3 committer guidelines.
>>
>> Best regards,
>> --
>> --------------------------------------- 
>> +--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,  
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, http:// 
>> osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed May 16 12:21:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OGR with Oracle Spatial support built-in
In-Reply-To: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
Message-ID: <464B2F88.3020503@pobox.com>

Duarte Carreira wrote:
> Hi.
> 
>  
> 
> Is there any way I can get OGR pre-compiled with Oracle Spatial support?
> 
>  
> 
> If not, is there a simple recipe that I can follow to compile OGR?
> 
>  
> 
> The only dev tool I have is C# express.

Duarte,

With your help I have prepared an OCI plugin for GDAL 1.4.x:

   http://download.osgeo.org/gdal/win32/gdalwin32oci141.zip

It is designed to unpack on top of gdalwin32exe141.zip but you should
be able to use it with any VC7.1 built GDAL 1.4.x.  It uses the Oracle
Instant Client 10.2 libraries that you pointed me to.

I'd appreciate feedback on whether it works for you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 16 12:28:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <464B19C1.20205@mapgears.com>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<464B0FBB.1070201@pobox.com> <464B19C1.20205@mapgears.com>
Message-ID: <464B3148.30402@pobox.com>

Daniel Morissette wrote:
> I was not aware that OGR had this transaction mechanism, but I agree 
> with Frank that it would be preferable to it if possible instead of 
> adding another mechanism to do the same thing.

Daniel,

I suspect that you don't know about the transaction mechanism because it
is only lightly supported and advertised.  In fact, I suspect that the approach
as it currently stands is a bit poorly thought out.  For instance, transactions
are datasource wide, rather than per-layer which causes problems in some
circumstances.  I believe there are substantial patches for the postgres
driver to address flaws in the transaction implementation there that I'm afraid
to apply for fear of what else it might break.

And very few providers (even RDBMS providers) bother to implement the
transaction semantics.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed May 16 12:44:50 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
In-Reply-To: <464B26E9.2050100@pobox.com>
References: <464B26E9.2050100@pobox.com>
Message-ID: <464B3502.1010707@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Motion: To extend GDAL/OGR committer status to Dr. Konstantin Baumann.
> 
> -- 
> 
> Konstantin (Kosta) has been a user of GDAL/OGR for several years, and 
> recent
> developments at his Institute require some improvements to GDAL/OGR.  He 
> has
> been submitting detailed bug reports, and patches and most recently RFC 13
> demonstrating a good understanding of GDAL/OGR.  He has already agreed to
> adhere to RFC 3 committer guidelines.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From MChapman at sanz.com  Wed May 16 13:12:50 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
In-Reply-To: <464B3502.1010707@mapgears.com>
References: <464B26E9.2050100@pobox.com> <464B3502.1010707@mapgears.com>
Message-ID: <ED3A48B9840E594890A2BC172D1194650BE86DBF@mailman.san.com>

+1

Martin Chapman
SANZ Inc.
Software Developer
http://www.earthwhere.com
W - 303.495.6326
C  - 303.898.0397

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daniel
Morissette
Sent: Wednesday, May 16, 2007 10:45 AM
To: gdal-dev
Subject: Re: [Gdal-dev] Motion: Committer Status for Dr. Konstantin
Baumann

+1

Daniel


Frank Warmerdam wrote:
> Motion: To extend GDAL/OGR committer status to Dr. Konstantin Baumann.
> 
> -- 
> 
> Konstantin (Kosta) has been a user of GDAL/OGR for several years, and 
> recent
> developments at his Institute require some improvements to GDAL/OGR.
He 
> has
> been submitting detailed bug reports, and patches and most recently
RFC 13
> demonstrating a good understanding of GDAL/OGR.  He has already agreed
to
> adhere to RFC 3 committer guidelines.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed May 16 13:41:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OGR with Oracle Spatial support built-in
In-Reply-To: <464B2F88.3020503@pobox.com>
References: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
	<464B2F88.3020503@pobox.com>
Message-ID: <464B425D.1060109@pobox.com>

Frank Warmerdam wrote:
> Duarte,
> 
> With your help I have prepared an OCI plugin for GDAL 1.4.x:
> 
>   http://download.osgeo.org/gdal/win32/gdalwin32oci141.zip
> 
> It is designed to unpack on top of gdalwin32exe141.zip but you should
> be able to use it with any VC7.1 built GDAL 1.4.x.  It uses the Oracle
> Instant Client 10.2 libraries that you pointed me to.
> 
> I'd appreciate feedback on whether it works for you.
> 
> Best regards,

Folks,

It turns out the oracle plugin was accidentally built against the debug
version.  Per the discussions previously (Mateusz, etc) I have decided to
drop debug support out of the binaries package to simplify things and
avoid problems like this one.

I have reuploaded the exe, dev and oci packages in:

   http://download.osgeo.org/gdal/win32

Please let me know if anyone runs into problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From kevin.bentley at gmail.com  Wed May 16 14:24:59 2007
From: kevin.bentley at gmail.com (Kevin Bentley)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Geo->local coordinate transformation
Message-ID: <2cd3193b0705161124p2de1459bl1e4fed1f0b09c1b0@mail.gmail.com>

I have a project where I'm working with geographic raster images and I need
to be able to do distance calculations between two points in the image.

I was thinking I could create a local SRS using a corner of the raster as
the origin, then just transform from the lat/lon coordinates to the local
coordinates (which would just be distance from the corner in meters) to make
my calculations the most accurate. But I'm not sure if this is possible with
OGRSpatialReference. Can anyone tell me how I could create a local
OGRSpatialReference object with the origin of my choosing? Or maybe there's
an easier way to do what I'm looking for.

Thanks in advance,

Kevin Bentley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070516/1a52a267/attachment.html
From warmerdam at pobox.com  Wed May 16 14:59:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Geo->local coordinate transformation
In-Reply-To: <2cd3193b0705161124p2de1459bl1e4fed1f0b09c1b0@mail.gmail.com>
References: <2cd3193b0705161124p2de1459bl1e4fed1f0b09c1b0@mail.gmail.com>
Message-ID: <464B549F.6010601@pobox.com>

Kevin Bentley wrote:
> I have a project where I'm working with geographic raster images and I 
> need to be able to do distance calculations between two points in the 
> image.
> 
> I was thinking I could create a local SRS using a corner of the raster 
> as the origin, then just transform from the lat/lon coordinates to the 
> local coordinates (which would just be distance from the corner in 
> meters) to make my calculations the most accurate. But I'm not sure if 
> this is possible with OGRSpatialReference. Can anyone tell me how I 
> could create a local OGRSpatialReference object with the origin of my 
> choosing? Or maybe there's an easier way to do what I'm looking for.

Kevin,

Assuming your image size is not too large (in the sense of geographic
area covered, not file size), you can define a local projected coordinate
system using perhaps the center of the image as the central meridian and
reference point.  Then convert locations into this SRS and compute
cartesian distances.

I'm not really sure what the best choice of projected coordinate system
would be, but I think for a fairly small area Orthographic would be
reasonably well behaved, even if you go near the poles.

So you could create an OGRSpatialReference in C++ something like:

   OGRSpatialReference oOrtho;

   oOrtho.SetOS( long_center, lat_center, 0, 0 );
   oOrtho.SetWellKnownGeogCS( "WGS84" );

Then you could create one for your lat/long coordinates:

   OGRSpatialReference oWGS84;

   oWGS84.SetWellKnownGeogCS( "WGS84" );

Then create a transformer.
   OGRCoordinateTransformation *poTransformer =
      OGRCreateCoordinateTransformation( &oWGS84, &oOrtho );

And transform points like:

   double x = -117.0, y = 33.0, z = 0;

   poTransformer->Transform( 1, &x, &y, &z );

I hope this is helpful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bclay at ball.com  Wed May 16 15:12:02 2007
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdalinfo and mrsid
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFBE8@daytonmsg2k3.AERO.BALL.COM>

Gdalinfo does not report a coordinate system when used with MrSid
landsat images.  Is this a known issue?  It does report reference system
from some other MrSid rasters that I use.  Is there a work around?

 

Bruce

 

Z:\GeoData\MrSid\N-17-35_2000>gdalinfo N-17-35_2000.sid

Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)

Size is 47638, 39169

Coordinate System is `'

Origin = (160576.125000000000000,4433082.125000000000000)

Pixel Size = (14.250000000000000,-14.250000000000000)

Metadata:

 
IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_ll_7
42_200

0.tif,
/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_lr_742_2000.tif,
/dbuy/

l7/outputs/mosaics742/N-17-3/locals/N-17-35_ul_742_2000.tif,
/dbuy/l7/outputs/mo

saics742/N-17-3/locals/N-17-35_ur_742_2000.tif

  IMAGE__INPUT_FILE_SIZE=5627937020.000000

  IMAGE__COMPRESSION_VERSION=1,6,3

  IMAGE__TARGET_COMPRESSION_RATIO=29.999998

  IMAGE__COMPRESSION_NLEV=8

  IMAGE__COMPRESSION_WEIGHT=2.000000

  IMAGE__COMPRESSION_GAMMA=1.000000

  IMAGE__COMPRESSION_BLOCK_SIZE=4096

  IMAGE__CREATION_DATE=Fri Sep 19 16:16:14 2003

 

  IMAGE__WIDTH=47638

  IMAGE__HEIGHT=39169

  IMAGE__TRANSPARENT_DATA_VALUE=0,0,0

  IMAGE__COLOR_SCHEME=0

  IMAGE__DATA_TYPE=0

  IMAGE__BITS_PER_SAMPLE=8

  IMAGE__XY_ORIGIN=160583.250000,4433075.000000

  IMAGE__X_RESOLUTION=14.250000

  IMAGE__Y_RESOLUTION=14.250000

Corner Coordinates:

Upper Left  (  160576.125, 4433082.125)

Lower Left  (  160576.125, 3874923.875)

Upper Right (  839417.625, 4433082.125)

Lower Right (  839417.625, 3874923.875)

Center      (  499996.875, 4154003.000)

Band 1 Block=1024x128 Type=Byte, ColorInterp=Red

  Minimum=6.000, Maximum=199.000, Mean=89.353, StdDev=25.490

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

Band 2 Block=1024x128 Type=Byte, ColorInterp=Green

  Minimum=7.000, Maximum=212.000, Mean=147.673, StdDev=18.278

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue

  Minimum=33.000, Maximum=245.000, Mean=86.940, StdDev=21.528

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

 

Z:\GeoData\MrSid\N-17-35_2000>

Z:\GeoData\MrSid\N-17-35_2000>gdalinfo N-17-35_2000.sid

Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)

Size is 47638, 39169

Coordinate System is `'

Origin = (160576.125000000000000,4433082.125000000000000)

Pixel Size = (14.250000000000000,-14.250000000000000)

Metadata:

 
IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_ll_7
42_200

0.tif,
/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_lr_742_2000.tif,
/dbuy/

l7/outputs/mosaics742/N-17-3/locals/N-17-35_ul_742_2000.tif,
/dbuy/l7/outputs/mo

saics742/N-17-3/locals/N-17-35_ur_742_2000.tif

  IMAGE__INPUT_FILE_SIZE=5627937020.000000

  IMAGE__COMPRESSION_VERSION=1,6,3

  IMAGE__TARGET_COMPRESSION_RATIO=29.999998

  IMAGE__COMPRESSION_NLEV=8

  IMAGE__COMPRESSION_WEIGHT=2.000000

  IMAGE__COMPRESSION_GAMMA=1.000000

  IMAGE__COMPRESSION_BLOCK_SIZE=4096

  IMAGE__CREATION_DATE=Fri Sep 19 16:16:14 2003

 

  IMAGE__WIDTH=47638

  IMAGE__HEIGHT=39169

  IMAGE__TRANSPARENT_DATA_VALUE=0,0,0

  IMAGE__COLOR_SCHEME=0

  IMAGE__DATA_TYPE=0

  IMAGE__BITS_PER_SAMPLE=8

  IMAGE__XY_ORIGIN=160583.250000,4433075.000000

  IMAGE__X_RESOLUTION=14.250000

  IMAGE__Y_RESOLUTION=14.250000

Corner Coordinates:

Upper Left  (  160576.125, 4433082.125)

Lower Left  (  160576.125, 3874923.875)

Upper Right (  839417.625, 4433082.125)

Lower Right (  839417.625, 3874923.875)

Center      (  499996.875, 4154003.000)

Band 1 Block=1024x128 Type=Byte, ColorInterp=Red

  Minimum=6.000, Maximum=199.000, Mean=89.353, StdDev=25.490

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

Band 2 Block=1024x128 Type=Byte, ColorInterp=Green

  Minimum=7.000, Maximum=212.000, Mean=147.673, StdDev=18.278

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue

  Minimum=33.000, Maximum=245.000, Mean=86.940, StdDev=21.528

  Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449, 1489x1225,
745x613,

373x307, 187x154

 

Z:\GeoData\MrSid\N-17-35_2000>




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070516/3b0253bb/attachment.html
From warmerdam at pobox.com  Wed May 16 16:20:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdalinfo and mrsid
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFBE8@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFBE8@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <464B67A7.7050403@pobox.com>

Clay, Bruce wrote:
> Gdalinfo does not report a coordinate system when used with MrSid 
> landsat images.  Is this a known issue?  It does report reference system 
> from some other MrSid rasters that I use.  Is there a work around?

Bruce,

Does mrsidinfo report a coordinate system for these files?  Is there any
reason to believe they have a coordinate system defined?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rec at geodesign.com.br  Wed May 16 16:07:12 2007
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdalinfo and mrsid
Message-ID: <1955.1179346032@geodesign.com.br>

Clay,

NASA's GeoCover MrSID Landsat image mosaics do not have information on the coordinate system or datum embeded in the MrSID image header.  The NASA GeoCover Landsat mosaics are in UTM WGS84.  In your case, your image is in UTM, WGS84, Zone 17 North.

If you really need to add this info into the MrSID image header, you need to use the software GeoExpress from LizardTech to do it.  NASA's GeoCover MrSID images are in the MG2 MrSID format.  You would use GeoExpress to convert it from MG2 to MG3 and specify the coordinate system and datum for the MG3 output image.

If you do not have GeoExpress, you can download a trial version at LizardTech''s web site (www.lizardtech.com).

Hope it helps

Reinaldo Escada Chohfi
Diretor
GeoDesign Internacional - www.geodesign.com.br

Tel/Fax: 012-3153-5115
Email: rec@geodesign.com.br
Skype: rechohfi

GIS, Geoprocessamento, GeoWeb, Sensoriamento Remoto de Alta Resoluo

Distribuidor da Sovinformsputnik
Revendedor da LizardTech e Applied Imagery

Copyright 2007 - Todos os diretos reservados
No retransmitir sem autorizao

 On Wed May 16 16:12 , "Clay, Bruce"  sent:

>
>
>
>
>
>
>
>
>
>
>
>
>
>Gdalinfo does not report a coordinate system when used with MrSid
>landsat images. Is this a known issue? It does report reference system from
>some other MrSid rasters that I use. Is there a work around?
>
>
>
>Bruce
>
>
>
>Z:\GeoData\MrSid\N-17-35_2000>gdalinfo
>N-17-35_2000.sid
>
>Driver: MrSID/Multi-resolution Seamless Image Database
>(MrSID)
>
>Size is 47638, 39169
>
>Coordinate System is `'
>
>Origin = (160576.125000000000000,4433082.125000000000000)
>
>Pixel Size = (14.250000000000000,-14.250000000000000)
>
>Metadata:
>
>
>IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_ll_742_200
>
>0.tif,
>/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_lr_742_2000.tif, /dbuy/
>
>l7/outputs/mosaics742/N-17-3/locals/N-17-35_ul_742_2000.tif,
>/dbuy/l7/outputs/mo
>
>saics742/N-17-3/locals/N-17-35_ur_742_2000.tif
>
> IMAGE__INPUT_FILE_SIZE=5627937020.000000
>
> IMAGE__COMPRESSION_VERSION=1,6,3
>
> IMAGE__TARGET_COMPRESSION_RATIO=29.999998
>
> IMAGE__COMPRESSION_NLEV=8
>
> IMAGE__COMPRESSION_WEIGHT=2.000000
>
> IMAGE__COMPRESSION_GAMMA=1.000000
>
> IMAGE__COMPRESSION_BLOCK_SIZE=4096
>
> IMAGE__CREATION_DATE=Fri Sep 19 16:16:14 2003
>
>
>
> IMAGE__WIDTH=47638
>
> IMAGE__HEIGHT=39169
>
> IMAGE__TRANSPARENT_DATA_VALUE=0,0,0
>
> IMAGE__COLOR_SCHEME=0
>
> IMAGE__DATA_TYPE=0
>
> IMAGE__BITS_PER_SAMPLE=8
>
> IMAGE__XY_ORIGIN=160583.250000,4433075.000000
>
> IMAGE__X_RESOLUTION=14.250000
>
> IMAGE__Y_RESOLUTION=14.250000
>
>Corner Coordinates:
>
>Upper Left ( 160576.125, 4433082.125)
>
>Lower Left ( 160576.125, 3874923.875)
>
>Upper Right ( 839417.625, 4433082.125)
>
>Lower Right ( 839417.625, 3874923.875)
>
>Center ( 499996.875, 4154003.000)
>
>Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
>
> Minimum=6.000, Maximum=199.000, Mean=89.353, StdDev=25.490
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
>
> Minimum=7.000, Maximum=212.000, Mean=147.673,
>StdDev=18.278
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
>
> Minimum=33.000, Maximum=245.000, Mean=86.940,
>StdDev=21.528
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>
>
>Z:\GeoData\MrSid\N-17-35_2000>
>
>Z:\GeoData\MrSid\N-17-35_2000>gdalinfo
>N-17-35_2000.sid
>
>Driver: MrSID/Multi-resolution Seamless Image Database
>(MrSID)
>
>Size is 47638, 39169
>
>Coordinate System is `'
>
>Origin = (160576.125000000000000,4433082.125000000000000)
>
>Pixel Size = (14.250000000000000,-14.250000000000000)
>
>Metadata:
>
>
>IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_ll_742_200
>
>0.tif, /dbuy/l7/outputs/mosaics742/N-17-3/locals/N-17-35_lr_742_2000.tif,
>/dbuy/
>
>l7/outputs/mosaics742/N-17-3/locals/N-17-35_ul_742_2000.tif,
>/dbuy/l7/outputs/mo
>
>saics742/N-17-3/locals/N-17-35_ur_742_2000.tif
>
> IMAGE__INPUT_FILE_SIZE=5627937020.000000
>
> IMAGE__COMPRESSION_VERSION=1,6,3
>
> IMAGE__TARGET_COMPRESSION_RATIO=29.999998
>
> IMAGE__COMPRESSION_NLEV=8
>
> IMAGE__COMPRESSION_WEIGHT=2.000000
>
> IMAGE__COMPRESSION_GAMMA=1.000000
>
> IMAGE__COMPRESSION_BLOCK_SIZE=4096
>
> IMAGE__CREATION_DATE=Fri Sep 19 16:16:14 2003
>
>
>
> IMAGE__WIDTH=47638
>
> IMAGE__HEIGHT=39169
>
> IMAGE__TRANSPARENT_DATA_VALUE=0,0,0
>
> IMAGE__COLOR_SCHEME=0
>
> IMAGE__DATA_TYPE=0
>
> IMAGE__BITS_PER_SAMPLE=8
>
> IMAGE__XY_ORIGIN=160583.250000,4433075.000000
>
> IMAGE__X_RESOLUTION=14.250000
>
> IMAGE__Y_RESOLUTION=14.250000
>
>Corner Coordinates:
>
>Upper Left ( 160576.125, 4433082.125)
>
>Lower Left ( 160576.125, 3874923.875)
>
>Upper Right ( 839417.625, 4433082.125)
>
>Lower Right ( 839417.625, 3874923.875)
>
>Center ( 499996.875, 4154003.000)
>
>Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
>
> Minimum=6.000, Maximum=199.000, Mean=89.353, StdDev=25.490
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
>
> Minimum=7.000, Maximum=212.000, Mean=147.673,
>StdDev=18.278
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
>
> Minimum=33.000, Maximum=245.000, Mean=86.940,
>StdDev=21.528
>
> Overviews: 23819x19585, 11910x9793, 5955x4897, 2978x2449,
>1489x1225, 745x613,
>
>373x307, 187x154
>
>
>
>Z:\GeoData\MrSid\N-17-35_2000>
>
>
>
>
>
>
>
>
>
>
>This message and any enclosures are intended only for the addressee.  Please  
>notify the sender by email if you are not the intended recipient.  If you are  
>not the intended recipient, you may not use, copy, disclose, or distribute this  
>message or its contents or enclosures to any other person and any such actions  
>may be unlawful.  Ball reserves the right to monitor and review all messages  
>and enclosures sent to or from this email address.



From dave at cs.otago.ac.nz  Wed May 16 17:25:54 2007
From: dave at cs.otago.ac.nz (Dave Robertson)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
Message-ID: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>

Hi,

I'm working with OGR and a set of 280 shapefiles each representing a  
layer. I find I can open the first 84 shapefiles and all the rest  
return error code 4 Error opening file). It doesn't seem to matter  
which particular 84 files - I can't open any more than that. The  
shapefiles are all one directory, along with their .dbf, .shx  
and .qix files. I've looked at the source for the shapefile driver  
and I can't see any limits built in there, and as far as I'm aware  
the operating system's limit is 12500 open files (per process). The  
OS is OS X.

I have loaded all the shapefiles into postgis as an experiment and I  
can read all the layers from there just fine, albeit slowly.

I realise I'm probably overlooking something obvious here, but any  
hints would be very much appreciated.

Regards,
Dave Robertson

From matt.gregory at oregonstate.edu  Wed May 16 17:30:56 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Python ReadRaster arguments
Message-ID: <EA53646512D0ED48AC1673034B861EE0017EAB7F@thuja>

Apologies for what is likely a newbie question, but the documentation
for gdal.Band.ReadRaster() shows this parameter list:

def ReadRaster(*args, **kwargs):
        """
        ReadRaster(self, int xoff, int yoff, int xsize, int ysize, int
buf_len, 
            int buf_xsize=0, int buf_ysize=0, int buf_type=0) -> CPLErr
        """
        return _gdal.Band_ReadRaster(*args, **kwargs)

However, in all the examples I have seen, it looks like the "buf_len"
parameter is not given, e.g. (from
http://www.gdal.org/gdal_tutorial.html):

scanline = band.ReadRaster( 0, 0, band.XSize, 1, band.XSize, 1,
GDT_Float32 )

Can someone clarify the discrepancy?

thanks, matt

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From tosborn at sbcglobal.net  Wed May 16 20:47:07 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] csharp spatialreference normalization.....problem?
Message-ID: <10657074.post@talk.nabble.com>


I'm programming in Visual Basic 2005 Express using the csharp dll's
distributed with FWTools 1.3.1.

I have a geotiff that produces the following output, in part, from gdalinfo:

PROJCS["NAD83 Arkansas State Planes, Northern Zone, US Foot",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",36.2333333333333],
    PARAMETER["standard_parallel_2",34.9333333333333],
    PARAMETER["latitude_of_origin",34.3333333333333],
    PARAMETER["central_meridian",-92],
    PARAMETER["false_easting",1312333.2916615],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]]]
Origin = (673800.376251435020000,634598.712631960050000)
Pixel Size = (1.000032169999991,-1.000116180000028)

As the gdalinfo output shows, the image is projected in a state plane
coordinate system with 
US Survey Feet as the linear units. Also, the geotransform parameters are
also in US Survey Feet.

In Visual Basic, using the csharp dlls, when I obtain a spatial reference to
this same file by invoking
Dim srcSrs As New OSGeo.OGR.SpatialReference(ds.GetProjection()) 
I get the following prettywkt output:

PROJCS["NAD83 Arkansas State Planes, Northern Zone, US Foot",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",36.2333333333333],
    PARAMETER["standard_parallel_2",34.9333333333333],
    PARAMETER["latitude_of_origin",34.3333333333333],
    PARAMETER["central_meridian",-92],
    PARAMETER["false_easting",399999.9872983998],
    PARAMETER["false_northing",0],
    UNIT["unknown",1]]

Apparently, the spatial refence is getting normalized from US Survey feet to
meters, but the geotransform 
parameters I subsequently get from the image remain in US Survey feet.  If I
get the LinearUnitsName from 
the spatial reference, all it returns is "unknown."  So I have a disconnect
between the linear units of the normalized spatial reference and the linear
units of the geotransform.

Am I overlooking something or is this problem in that  the csharp procedures
work differently from the C++ counterparts? Is there a way to force the
csharp Get.Projection or spatialreference assignment procedures to not
normalize?

Thanks for your help.

Tim Osborn         
-- 
View this message in context: http://www.nabble.com/csharp-spatialreference-normalization.....problem--tf3769441.html#a10657074
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Wed May 16 21:49:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] csharp spatialreference normalization.....problem?
In-Reply-To: <10657074.post@talk.nabble.com>
References: <10657074.post@talk.nabble.com>
Message-ID: <464BB4B3.70504@pobox.com>

Tim Osborn wrote:
> Am I overlooking something or is this problem in that  the csharp procedures
> work differently from the C++ counterparts? Is there a way to force the
> csharp Get.Projection or spatialreference assignment procedures to not
> normalize?

Tim,

I'm quite surprised at this situation, and I can't think of any coherent
reason why this would be happening.  Well, I guess there must be some
difference in the approach used to lookup the PCS code from the geotiff.

You might want to ensure that all the environment variables set by
the FWTools environment setting script are set in your global environment
and see if the c# interface then produces the same results.  If so, then
we know it has something to do with searching for supporting files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 16 22:03:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Python ReadRaster arguments
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0017EAB7F@thuja>
References: <EA53646512D0ED48AC1673034B861EE0017EAB7F@thuja>
Message-ID: <464BB800.5070009@pobox.com>

Gregory, Matthew wrote:
> Apologies for what is likely a newbie question, but the documentation
> for gdal.Band.ReadRaster() shows this parameter list:
> 
> def ReadRaster(*args, **kwargs):
>         """
>         ReadRaster(self, int xoff, int yoff, int xsize, int ysize, int
> buf_len, 
>             int buf_xsize=0, int buf_ysize=0, int buf_type=0) -> CPLErr
>         """
>         return _gdal.Band_ReadRaster(*args, **kwargs)
> 
> However, in all the examples I have seen, it looks like the "buf_len"
> parameter is not given, e.g. (from
> http://www.gdal.org/gdal_tutorial.html):
> 
> scanline = band.ReadRaster( 0, 0, band.XSize, 1, band.XSize, 1,
> GDT_Float32 )
> 
> Can someone clarify the discrepancy?

Matt,

I'm not sure where these doc strings come from, but I believe that the
python bindings determine the buf_len internally and so it is not passed
in as a regular argument (as it would be in C).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 16 22:05:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
In-Reply-To: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
References: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
Message-ID: <464BB863.1010603@pobox.com>

Dave Robertson wrote:
> Hi,
> 
> I'm working with OGR and a set of 280 shapefiles each representing a 
> layer. I find I can open the first 84 shapefiles and all the rest return 
> error code 4 Error opening file). It doesn't seem to matter which 
> particular 84 files - I can't open any more than that. The shapefiles 
> are all one directory, along with their .dbf, .shx and .qix files. I've 
> looked at the source for the shapefile driver and I can't see any limits 
> built in there, and as far as I'm aware the operating system's limit is 
> 12500 open files (per process). The OS is OS X.
> 
> I have loaded all the shapefiles into postgis as an experiment and I can 
> read all the layers from there just fine, albeit slowly.
> 
> I realise I'm probably overlooking something obvious here, but any hints 
> would be very much appreciated.

Dave,

I believe you are running into a problem with maximum number of files that
can be open at once for a process.  Some unix systems let you raise this
with the limit or ulimit command.  I've never looked into it on OS X.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 16 22:07:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdalinfo and mrsid
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFBEC@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFBE8@daytonmsg2k3.AERO.BALL.COM>
	<464B67A7.7050403@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E34FEFBEC@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <464BB8D2.90803@pobox.com>

Clay, Bruce wrote:
> Frank:
>   I have a little more info that sheds light on what is happening.
> 
> The rasters that ArcMap found a coordinate reference system (CRS) for
> were read into ArcCatalog first.  ArcCatalog held the CRS information in
> the aux file.  It did not update the MrSid header thus there is nothing
> for gdal to see.  We would have to know the format of the aux file or
> use the .met file that comes from the NASA size to set a coordinate
> system.

Bruce,

GDAL can read the .aux files for coordinate system information *if* you
define the GDAL_PAM_ENABLED config/environment variable to ON.  We should
really consider turning on .aux reading by default for GDAL/OGR 1.5.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Wed May 16 21:34:38 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Python ReadRaster arguments
In-Reply-To: <464BB800.5070009@pobox.com>
References: <EA53646512D0ED48AC1673034B861EE0017EAB7F@thuja>
	<464BB800.5070009@pobox.com>
Message-ID: <0E5F3518-2E60-478E-BFA5-0FECEC61BEFD@gmail.com>

Yes, I think what happens is the C function needs a string and its  
length, but we use a typemap to take in the Python string and turn it  
into a string and a length.  SWIG generates its docstring using the  
method signature before the typemap is applied, which has buf_len in  
there.

I would also add that I have figured out a slightly messy but useful  
method for extracting the docstrings out of doxygen and applying them  
in the Python SWIG bindings (Python has the best internal doc support  
of the SWIG languages, I think).  I have generated and committed  
these docstrings for OGR, but haven't done so yet for GDAL or OSR.   
So, hopefully in the near future, the docstring for that method will  
just be a copy of the C/C++ docs.  There will obviously still be some  
disconnects, but the docs that have been written are generally more  
useful than having only the default stuff that SWIG generates.

Howard


On May 16, 2007, at 9:03 PM, Frank Warmerdam wrote:

> Gregory, Matthew wrote:
>> Apologies for what is likely a newbie question, but the documentation
>> for gdal.Band.ReadRaster() shows this parameter list:
>> def ReadRaster(*args, **kwargs):
>>         """
>>         ReadRaster(self, int xoff, int yoff, int xsize, int ysize,  
>> int
>> buf_len,             int buf_xsize=0, int buf_ysize=0, int  
>> buf_type=0) -> CPLErr
>>         """
>>         return _gdal.Band_ReadRaster(*args, **kwargs)
>> However, in all the examples I have seen, it looks like the "buf_len"
>> parameter is not given, e.g. (from
>> http://www.gdal.org/gdal_tutorial.html):
>> scanline = band.ReadRaster( 0, 0, band.XSize, 1, band.XSize, 1,
>> GDT_Float32 )
>> Can someone clarify the discrepancy?
>
> Matt,
>
> I'm not sure where these doc strings come from, but I believe that the
> python bindings determine the buf_len internally and so it is not  
> passed
> in as a regular argument (as it would be in C).
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From tosborn at sbcglobal.net  Wed May 16 22:12:16 2007
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] csharp spatialreference normalization.....problem?
In-Reply-To: <464BB4B3.70504@pobox.com>
References: <10657074.post@talk.nabble.com> <464BB4B3.70504@pobox.com>
Message-ID: <10657672.post@talk.nabble.com>



Frank Warmerdam-2 wrote:
> 
> I'm quite surprised at this situation, and I can't think of any coherent
> reason why this would be happening.  Well, I guess there must be some
> difference in the approach used to lookup the PCS code from the geotiff.
> 
> You might want to ensure that all the environment variables set by
> the FWTools environment setting script are set in your global environment
> and see if the c# interface then produces the same results.  If so, then
> we know it has something to do with searching for supporting files.
> 

Frank:

Thanks for your suggestion.  The first thing I do in the program I'm writing
is to programatically set all but the PYTHONPATH environment variables with
Visual Basic 2005 Express Environment.SetEnvironmentVariable() functions. 
But, I also tried your suggestion and set the environonment variables
directly on my machine through the Windows Control Panel.  When this is
done, things work as they should....the US Survey feet are correctly shown
in the spatial reference.  So I guess I'm not correctly understanding the
Visual Basic Environment.SetEnvironmentVariable() function although it seems
to be working....calls to Environment.GetEnvironmentVariable("PROJ_LIB") etc
return the correct paths.

Thanks for you help.

Tim Osborn 
-- 
View this message in context: http://www.nabble.com/csharp-spatialreference-normalization.....problem--tf3769441.html#a10657672
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From hobu.inc at gmail.com  Thu May 17 01:10:14 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OGR ArcSDE plugin for GDAL 1.4.1 
In-Reply-To: <464B425D.1060109@pobox.com>
References: <94C0F903807262438796839A98A9BA5001937BCF@beja001.edia.pt>
	<464B2F88.3020503@pobox.com> <464B425D.1060109@pobox.com>
Message-ID: <6B2697F3-593B-4F0C-B501-61664B3296BE@gmail.com>

I have added the OGR SDE driver plugin for our minimal binary set  
which was built against ArcSDE 9.1 as well.

<http://download.osgeo.org/gdal/win32/>

Howard



From mateusz at loskot.net  Thu May 17 08:41:24 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] OCI support for Oracle 9i
In-Reply-To: <20070515143715.4b9a48f9@localhost.localdomain>
References: <20070515110247.69c5a374@localhost.localdomain>	<46499DCE.7030004@loskot.net>
	<20070515143715.4b9a48f9@localhost.localdomain>
Message-ID: <464C4D74.7040402@loskot.net>


Otto Dassau wrote:
> Mateusz Loskot <mateusz@loskot.net> wrote:
>> Otto Dassau wrote:
>>> 
>>> I am trying to build gdal 1.4.1 with OCI support but with no
>>> success. The database is an oracle 9i. In the configure script I
>>> provide:
>>> 
>>> --with-oci=/usr/lib/oracle/9.2.0/OraHome \ 
>>> --with-oci-lib=/usr/lib/oracle/9.2.0/OraHome/lib
>> Otto,
>> 
>> You should use
>> 
>> --with-oci
>> 
>> *or* pair of options
>> 
>> --with-oci-include --with-oci-lib
> 
> yes, but the header files are in two folders - so I use:
> 
> --with-oci-include='/usr/lib/oracle/9.2.0/OraHome/rdbms/public \ 
> /usr/lib/oracle/9.2.0/OraHome/rdbms/demo'

Otto,

Unfortunately, this hack won't work.

I'm a little surprised that ./configure can not detect your headers.
Some time ago, I fixed support for older Oracle versions in the
./configure and m4/ax_oracle_oci.m4 macro


Here, you can see that for older Oracle, headers are checked in two
locations:

http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L102
http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L175

ORACLE_HOME/rdbms/public
and
ORACLE_HOME/rdbms/demo

AFAIR, some users confirmed that this fix works.

>>> b) checking for Oracle OCI libraries in
>>> /usr/lib/oracle/9.2.0/OraHome/lib
>>> 
>>> here I get following error message that -lnnz10 is missing:
>>> 
>>> #configure:26066: checking for Oracle OCI libraries in 
>>> #/usr/lib/oracle/9.2.0/OraHome/lib configure:26097: g++ -o
>>> conftest -g -O2 #-I/usr/lib/oracle/9.2.0/OraHome/rdbms/public 
>>> #-L/usr/lib/oracle/9.2.0/OraHome/lib -lclntsh -lnnz10 conftest.cc
>>> -L/usr/lib #-lxerces-c -lpthread -ljasper -lmfhdf -ldf -lgif
>>> -ljpeg -ltiff -lpng -lnetcdf #-lcfitsio -lpq -L/usr/lib -lpq -lz
>>> -lpthread -lm -lrt -ldl  >&5 /usr/bin/ld: #cannot find -lnnz10
>>> collect2: ld returned 1 exit status


Older Oracle versions does not have nnz10 library.
As I see in your files list, you don't have it indeed.

Although, this issue seems to be also filtered in the ./configure script:
http://trac.osgeo.org/gdal/browser/trunk/gdal/m4/ax_oracle_oci.m4#L263

If version is >=10.x, then add -lnnz10, otherwise not.


I suppose there may be two issues:
1) problem with detecting version of Oracle
2) the ./configure script has not been regenerated (by ./autogen.sh)
before releasing, so changes in the ax_oracle_oci.m4 macro are not
present there

Otto, would it be possible for you to try GDAL from SVN ?
Just for this issue, to test if SVN works for older Oracle.

Unfortunately, I have only access to Oracle 10g so it's very hard to
catch all subtle differences.

Thanks for your help!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu May 17 09:27:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
In-Reply-To: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
References: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
Message-ID: <464C5847.7030009@loskot.net>

Dave Robertson wrote:
> Hi,
> 
> I'm working with OGR and a set of 280 shapefiles each representing a
> layer. I find I can open the first 84 shapefiles and all the rest return
> error code 4 Error opening file). It doesn't seem to matter which
> particular 84 files - I can't open any more than that. The shapefiles
> are all one directory, along with their .dbf, .shx and .qix files. I've
> looked at the source for the shapefile driver and I can't see any limits
> built in there, and as far as I'm aware the operating system's limit is
> 12500 open files (per process). The OS is OS X.

Dave,

ADAIR, OSX9 used very low number of open files per process (64).
See this FAQ, error code 24:

http://www.osxfaq.com/man/2/intro.ws

When you open 280 shapefiles, you get (not counting .prj) 280 * 3 number
of open files, so I suppose you hit beyond the limit
which I *suppose* is ~255 per process, in newer OSX versions.

> I have loaded all the shapefiles into postgis as an experiment and I can
> read all the layers from there just fine, albeit slowly.

What means slowly?
Do you use spatial index, GiST ?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jbowen at BlackbirdTech.com  Thu May 17 09:46:29 2007
From: jbowen at BlackbirdTech.com (John Bowen)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdal_translate problem with NITF RGBA image
Message-ID: <C1E68D9F9D8BDD46AEDBFE23D29F3A7302BA1DA7@Navajo.BLACKBIRD.BLACKBIRDTECH.COM>

I'm trying to convert a 16bpp, 4 band NITF image into a GeoTiff and have
not been able to figure out the arguments necessary to properly convert
it.  Accompanying the NITF image is a text description of the image,
which contains (parts edited out with <snip> and </snip> for brevity:

 

version = "AA";

generationTime = 2006-12-16T01:13:10.000000Z;

productOrderId = "005590231010_01_P002";

productCatalogId = "901001000E567E00";

childCatalogId = "202001000E567D00";

imageDescriptor = "Basic1B";

bandId = "Multi";

panSharpenAlgorithm = "None";

numRows = 2187;

numColumns = 6876;

productLevel = "LV1B";

productType = "Basic";

numberOfLooks = 1;

radiometricLevel = "Corrected";

bitsPerPixel = 16;

compressionType = "None";

BEGIN_GROUP = BAND_B

<snip>

 

</snip>

END_GROUP = BAND_B

BEGIN_GROUP = BAND_G

<snip>

 

</snip>

END_GROUP = BAND_G

BEGIN_GROUP = BAND_R

<snip>

 

</snip>

END_GROUP = BAND_R

BEGIN_GROUP = BAND_N

<snip>

 

</snip>

END_GROUP = BAND_N

outputFormat = "NITF20";

BEGIN_GROUP = IMAGE_1

<snip>

 

</snip>

END_GROUP = IMAGE_1

END;

 

When I try to convert it with gdal_translate, the resulting TIF file is
not viewable.  The image produced contains 1 pixel wide bands of various
colors, that from a 1x zoom level appear to be gray.  The output of
tiffinfo on this GeoTiff file produces the following:

 

TIFFReadDirectory: Warning, test.tif: unknown field with tag 34264
(0x85d8) encountered.

TIFFReadDirectory: Warning, test.tif: unknown field with tag 34735
(0x87af) encountered.

TIFFReadDirectory: Warning, test.tif: unknown field with tag 34737
(0x87b1) encountered. 

TIFFReadDirectory: Warning, test.tif: unknown field with tag 42112
(0xa480) encountered.

TIFF Directory at offset 0x72cd27e (120377982)

  Image Width: 6876 Image Length: 2187

  Bits/Sample: 16

  Sample Format: unsigned integer 

  Compression Scheme: None

  Photometric Interpretation: min-is-black

  Extra Samples: 3<unspecified, unspecified, unspecified>

  Samples/Pixel: 4

  Rows/Strip: 1

  Planar Configuration: separate image planes 

  Tag 34264:
0.000033,-0.000000,0.000000,-77.147100,-0.000001,-0.000024,0.000000,38.8
59040,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,1.0
00000

  Tag 34735:
1,1,0,5,1024,0,1,2,1025,0,1,1,2048,0,1,4326,2049,34737,7,0,2054,0,1,9102


  Tag 34737: WGS 84|

  Tag 42112: <GDALMetadata>

  <Item name="NITF_FHDR">NITF02.00</Item>

  <Item name="NITF_CLEVEL">06</Item>

  <Item name="NITF_STYPE"></Item> 

  <Item name="NITF_OSTAID">DG</Item>

  <Item name="NITF_FDT">16011310ZDEC06</Item>

 

  <snip>

 

  </snip>

 

</GDALMetadata>

 

Any ideas how to convert this file to GeoTiff correctly?

 

Thanks,

John

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070517/08a26c08/attachment.html
From aaime at openplans.org  Thu May 17 10:02:01 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Recent changes related to the Java bindings
In-Reply-To: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>
References: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>
Message-ID: <464C6059.5020206@openplans.org>

Tamas Szekeres ha scritto:
> Folks,
> 
> I've made the first attempt to add the java related build steps to the
> buildbot configuration. Currently I've focused only on the Windows
> builders and my effort was eventually successful,
> http://buildbot.osgeo.org:8500/

Nice! Is there any way to grab the build results, that is, all
the dlls and jars? At the moment I'm unable to build gdal
due to a change in geomedia driver that made the code incompatible
with vc++ 6.0 (well, it may have been fixed lately, haven't checked).

> In exchange for this addition I had to move the contents of the
> java.opt file into nmake.opt because it was pretty unmanageable in
> that fashion. I've added the following section in nmake.opt
> 
> # SWIG Java settings
> !IFNDEF JAVA_HOME
> JAVA_HOME = c:\j2sdk1.4.2_12
> !ENDIF
> !IFNDEF ANT_HOME
> ANT_HOME=c:\programmi\apache-ant-1.7.0
> !ENDIF
> JAVADOC=$(JAVA_HOME)\bin\javadoc
> JAVAC=$(JAVA_HOME)\bin\javac
> JAVA=$(JAVA_HOME)\bin\java
> JAR=$(JAVA_HOME)\bin\jar
> JAVA_INCLUDE=-I$(JAVA_HOME)\include -I$(JAVA_HOME)\include\win32
> 
> I've encapsulated the default  JAVA_HOME, ANT_HOME parameters into
> IFNDEF-s so these values can be given at the nmake command line or in
> an external file according to the EXT_NMAKE_OPT settings.
> I've also removed all !INCLUDE-s for the java.opt in the Windows makefiles.
> 
> I haven't dealt with the GNU builds so far, however java.opt is also
> included in the GNU makefile. Howard and I would like to see this
> stuff disappearing one day when the configure stuff will be extended
> by identifying the JAVA locations. 

Afaik the standard way to declare java location is really JAVA_HOME.
I don't know of any other.

Cheers
Andrea

From szekerest at gmail.com  Thu May 17 10:16:48 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Recent changes related to the Java bindings
In-Reply-To: <464C6059.5020206@openplans.org>
References: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>
	<464C6059.5020206@openplans.org>
Message-ID: <f3b73b7d0705170716v6bcd510aufd767bd6e77cf18@mail.gmail.com>

2007/5/17, Andrea Aime <aaime@openplans.org>:
> Tamas Szekeres ha scritto:
> > Folks,
> >
> > I've made the first attempt to add the java related build steps to the
> > buildbot configuration. Currently I've focused only on the Windows
> > builders and my effort was eventually successful,
> > http://buildbot.osgeo.org:8500/
>
> Nice! Is there any way to grab the build results, that is, all
> the dlls and jars? At the moment I'm unable to build gdal
> due to a change in geomedia driver that made the code incompatible
> with vc++ 6.0 (well, it may have been fixed lately, haven't checked).
>

We have no VC6 buildslaves configured currently so I cannot confirm
whether it builds on this compiler or not. The buildbot currently
contains VC71 and VC80 builders. The latter is configured to produce
64 bit binaries.
IIRC Mateusz is planning to make the results available to download,
but this option haven't
been realized yet.

> > In exchange for this addition I had to move the contents of the
> > java.opt file into nmake.opt because it was pretty unmanageable in
> > that fashion. I've added the following section in nmake.opt
> >
> > # SWIG Java settings
> > !IFNDEF JAVA_HOME
> > JAVA_HOME = c:\j2sdk1.4.2_12
> > !ENDIF
> > !IFNDEF ANT_HOME
> > ANT_HOME=c:\programmi\apache-ant-1.7.0
> > !ENDIF
> > JAVADOC=$(JAVA_HOME)\bin\javadoc
> > JAVAC=$(JAVA_HOME)\bin\javac
> > JAVA=$(JAVA_HOME)\bin\java
> > JAR=$(JAVA_HOME)\bin\jar
> > JAVA_INCLUDE=-I$(JAVA_HOME)\include -I$(JAVA_HOME)\include\win32
> >
> > I've encapsulated the default  JAVA_HOME, ANT_HOME parameters into
> > IFNDEF-s so these values can be given at the nmake command line or in
> > an external file according to the EXT_NMAKE_OPT settings.
> > I've also removed all !INCLUDE-s for the java.opt in the Windows makefiles.
> >
> > I haven't dealt with the GNU builds so far, however java.opt is also
> > included in the GNU makefile. Howard and I would like to see this
> > stuff disappearing one day when the configure stuff will be extended
> > by identifying the JAVA locations.
>
> Afaik the standard way to declare java location is really JAVA_HOME.
> I don't know of any other.
>

I have no doubts about it. However for the windows builds it's more
convenient to provide this setting in a common configuration file
(that is the nmake.opt) than altering many other files in different
places. It is pretty unmanageable from the buildbot's perspective.

Do we have a 'make test' functionality for the java builds?

Best regards,

Tamas

From warmerdam at pobox.com  Thu May 17 11:37:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdal_translate problem with NITF RGBA image
In-Reply-To: <C1E68D9F9D8BDD46AEDBFE23D29F3A7302BA1DA7@Navajo.BLACKBIRD.BLACKBIRDTECH.COM>
References: <C1E68D9F9D8BDD46AEDBFE23D29F3A7302BA1DA7@Navajo.BLACKBIRD.BLACKBIRDTECH.COM>
Message-ID: <464C76C1.1000806@pobox.com>

John Bowen wrote:
> I?m trying to convert a 16bpp, 4 band NITF image into a GeoTiff and have 
> not been able to figure out the arguments necessary to properly convert 
> it.  Accompanying the NITF image is a text description of the image, 
> which contains (parts edited out with <snip> and </snip> for brevity:

John,

It is not obvious to me why this wouldn't have worked.  Could you supply
a gdalinfo report for the input file?  What were you using to view the
resulting TIFF files?

Actually, I'd suggest adding -co INTERLEAVE=PIXEL to your gdal_translate
command on the chance your tiff viewer does not support "SEPARATE" organized
TIFF files.

If the problem turns out to be the nitf reading, another step is to run
the nitfdump utility against the nitf file for more details info.  This
utility can be manually built by cd'ing into the gdal/frmts/nitf directory
in the source tree and doing "nmake /f makefile.vc nitfdump.exe" or
"make nitfdump" depending on platform.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jbowen at BlackbirdTech.com  Thu May 17 10:35:18 2007
From: jbowen at BlackbirdTech.com (John Bowen)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] gdal_translate problem with NITF RGBA image
In-Reply-To: <464C76C1.1000806@pobox.com>
References: <C1E68D9F9D8BDD46AEDBFE23D29F3A7302BA1DA7@Navajo.BLACKBIRD.BLACKBIRDTECH.COM>
	<464C76C1.1000806@pobox.com>
Message-ID: <C1E68D9F9D8BDD46AEDBFE23D29F3A7302BA1DA9@Navajo.BLACKBIRD.BLACKBIRDTECH.COM>

Thanks for the quick response!  I've been displaying the images using
GeoRect, which is part of the distro from FalconView.

Here is the output from gdalinfo on the input file:

Driver: NITF/National Imagery Transmission Format
Size is 6876, 2187
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  -77.14709969696965, 3.272727272726178e-005, -3.454782636896493e-017
  38.8590402679309, -1.090909090907574e-006, -2.388939717393872e-005
Metadata:
  NITF_FHDR=NITF02.00
  NITF_CLEVEL=06
  NITF_STYPE=
  NITF_OSTAID=DG
  NITF_FDT=16011310ZDEC06
  NITF_FTITLE=QB02_SENSOR:2006-12-09T16:13:03.439710Z
  NITF_FSCLAS=U
  NITF_FSCODE=
  NITF_FSCTLH=
  NITF_FSREL=
  NITF_FSCAUT=
  NITF_USE00A_ANGLE_TO_NORTH=270
  NITF_USE00A_MEAN_GSD=108.2
  NITF_USE00A_DYNAMIC_RANGE=02047
  NITF_USE00A_OBL_ANG=21.47
  NITF_STDIDC_ACQUISITION_DATE=20061209161303
  NITF_STDIDC_MISSION=QB02
  NITF_STDIDC_PASS=12
  NITF_STDIDC_OP_NUM=000
  NITF_STDIDC_START_SEGMENT=AA
  NITF_STDIDC_REPRO_NUM=00
  NITF_STDIDC_REPLAY_REGEN=000
  NITF_STDIDC_START_COLUMN=001
  NITF_STDIDC_START_ROW=00001
  NITF_STDIDC_END_SEGMENT=AA
  NITF_STDIDC_END_COLUMN=007
  NITF_STDIDC_END_ROW=00003
  NITF_STDIDC_COUNTRY=
  NITF_STDIDC_WAC=
  NITF_STDIDC_LOCATION=3851N07702W
  NITF_USE00A_ROLL_ANG=-20.36
  NITF_USE00A_N_REF=00
  NITF_USE00A_REV_NUM=28897
  NITF_USE00A_N_SEG=001
  NITF_USE00A_MAX_LP_SEG=002187
  NITF_USE00A_SUN_EL=+27.5
  NITF_USE00A_SUN_AZ=167.7
  NITF_FSCTLN=
  NITF_FSDWNG=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_ENCRYP=0
  NITF_ONAME=~~~DigitalGlobe
  NITF_OPHONE=+1(800)496-1225
  NITF_IID1=055E0F00
  NITF_IDATIM=09161303ZDEC06
  NITF_TGTID=
  NITF_ITITLE=09DEC06QB021200006DEC09161303-M1BS-005590231010_01_P002
  NITF_ISCLAS=U
  NITF_ISCODE=
  NITF_ISCTLH=
  NITF_ISREL=
  NITF_ISCAUT=
  NITF_ISCTLN=
  NITF_ISDWNG=
  NITF_ISORCE=QB02
  NITF_PVTYPE=INT
  NITF_IREP=MULTI
  NITF_ICAT=MS
  NITF_ABPP=11
  NITF_PJUST=R
  NITF_IMAGE_COMMENTS=The imagery and metadata data on this media is the
property of                  DigitalGlobe and is licensed for use only.
All use must be in                   accordance with the terms of the
license that accompanies the media.            If the license is
purchased under contract NMA 301 99 D003, use is              in
accordance with the license therein

  NITF_IC=NC
  NITF_IMODE=S
  RPC_LINE_OFF=1094
  RPC_LINE_SCALE=1113
  RPC_SAMP_OFF=3434
  RPC_SAMP_SCALE=3511
  RPC_LONG_OFF=-77.0348
  RPC_LONG_SCALE=0.1127
  RPC_LAT_OFF=38.829
  RPC_LAT_SCALE=0.03
  RPC_HEIGHT_OFF=22
  RPC_HEIGHT_SCALE=501
  RPC_LINE_NUM_COEFF=0.00923356 -0.1426047 -1.126595 -0.01755206
0.00177297 6.701793e-005 0.0001558003 -0.001477191 -0.00521764
6.540608e-006 8.864884e-007 1.928861e-006 2.245907e-005 2.061583e-007
-1.944235e-005 -3.460201e-005 1.666924e-006 2.18262e-008 9.625121e-006
5.373261000000001e-007 
  RPC_LINE_DEN_COEFF=1 0.003106796 0.004811952 0.0003586957
5.199614e-006 4.229715e-008 3.307354e-006 -6.042672e-006 1.515212e-005
3.024721e-006 -7.842597e-006 -1.489278e-007 -5.154156e-005
-1.342397e-006 -7.041556e-006 -0.0001321335 -1.043995e-005
-4.647267e-007 -2.992527e-005 -1.26809e-006 
  RPC_SAMP_NUM_COEFF=-0.007781954 0.9804324 0.0001611866 -0.02055254
-0.0007931527 0.0003408651 -0.0001054206 0.007721833
9.428942999999999e-005 -1.056684e-005 -1.835947e-006 5.108406e-005
3.110137e-006 -2.600045e-006 1.76368e-005 5.887504e-005 -1.361459e-006
6.903016e-006 -1.013644e-006 -4.142256e-008 
  RPC_SAMP_DEN_COEFF=1 6.572976999999999e-005 0.0007770264 -0.0004941248
-1.076262e-005 -4.14945e-006 4.664055e-007 3.926331e-006
-7.662800000000001e-006 -2.77191e-006 1.522162e-008 -3.491444e-007
2.100755e-007 1.394239e-008 -1.637887e-007 1.138227e-006 -1.141229e-008
-9.558018e-008 2.025416e-008 0 
  RPC_MIN_LONG=-77.09115
  RPC_MAX_LONG=-76.97845000000001
  RPC_MIN_LAT=38.814
  RPC_MAX_LAT=38.844
Corner Coordinates:
Upper Left  ( -77.1470997,  38.8590403) ( 77d 8'49.56"W, 38d51'32.54"N)
Lower Left  ( -77.1470997,  38.8067942) ( 77d 8'49.56"W, 38d48'24.46"N)
Upper Right ( -76.9220670,  38.8515392) ( 76d55'19.44"W, 38d51'5.54"N)
Lower Right ( -76.9220670,  38.7992931) ( 76d55'19.44"W, 38d47'57.46"N)
Center      ( -77.0345833,  38.8291667) ( 77d 2'4.50"W, 38d49'45.00"N)
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Blue
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Green
Band 3 Block=1024x1024 Type=UInt16, ColorInterp=Red
Band 4 Block=1024x1024 Type=UInt16, ColorInterp=Undefined

And here is the output from nitfdump:

Dump for 06DEC09161303-M1BS-005590231010_01_P002.NTF
File Metadata:
  NITF_FHDR=NITF02.00
  NITF_CLEVEL=06
  NITF_STYPE=
  NITF_OSTAID=DG
  NITF_FDT=16011310ZDEC06
  NITF_FTITLE=QB02_SENSOR:2006-12-09T16:13:03.439710Z
  NITF_FSCLAS=U
  NITF_FSCODE=
  NITF_FSCTLH=
  NITF_FSREL=
  NITF_FSCAUT=
  NITF_FSCTLN=
  NITF_FSDWNG=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_ENCRYP=0
  NITF_ONAME=~~~DigitalGlobe
  NITF_OPHONE=+1(800)496-1225
Segment 1 (Type=IM):
  HeaderStart=413, HeaderSize=2584, DataStart=2997, DataSize=176160768

Segment 2 (Type=TX):
  HeaderStart=176163765, HeaderSize=282, DataStart=176164047,
DataSize=3447

Image Segment 0, 6876Px2187Lx4B x 16bits:
  PVTYPE=INT, IREP=MULTI, ICAT=MS, IMODE=S, IC=NC, COMRAT=, ICORDS=G
  UL=(-77.1471,38.859), UR=(-76.9221,38.8515)
  LL=(-77.1471,38.8068), LR=(-76.9221,38.7993)
  7 x 3 blocks of size 1024 x 1024
  Image TREs: PIAIMC(362) RPC00B(1041) STDIDC(89) USE00A(107)
  Comments:
The imagery and metadata data on this media is the property of
DigitalGlobe and is licensed for use only. All use must be in
accordance with the terms of the license that accompanies the media.
If the license is purchased under contract NMA 301 99 D003, use is
in accordance with the license therein

  Band 1: IREPBAND=B, ISUBCAT=479.5, 0 LUT entries.
  Band 2: IREPBAND=G, ISUBCAT=546.5, 0 LUT entries.
  Band 3: IREPBAND=R, ISUBCAT=654, 0 LUT entries.
  Band 4: IREPBAND=N, ISUBCAT=814.5, 0 LUT entries.
  RPC00B:
    SUCCESS=1
    ERR_BIAS=18.44
    ERR_RAND=0.55
    LINE_OFF=1094
    SAMP_OFF=3434
    LAT_OFF =38.829
    LONG_OFF=-77.0348
    HEIGHT_OFF=22
    LINE_SCALE=1113
    SAMP_SCALE=3511
    LAT_SCALE =0.03
    LONG_SCALE=0.1127
    HEIGHT_SCALE=501
    LINE_NUM_COEFF = 0.00923356 -0.1426047 -1.126595 -0.01755206
0.00177297 
                     6.701793e-005 0.0001558003 -0.001477191 -0.00521764
6.540608e-006 
                     8.864884e-007 1.928861e-006 2.245907e-005
2.061583e-007 -1.944235e-005 
                     -3.460201e-005 1.666924e-006 2.18262e-008
9.625121e-006 5.373261e-007 
    LINE_DEN_COEFF = 1 0.003106796 0.004811952 0.0003586957
5.199614e-006 
                     4.229715e-008 3.307354e-006 -6.042672e-006
1.515212e-005 3.024721e-006 
                     -7.842597e-006 -1.489278e-007 -5.154156e-005
-1.342397e-006 -7.041556e-006 
                     -0.0001321335 -1.043995e-005 -4.647267e-007
-2.992527e-005 -1.26809e-006 
    SAMP_NUM_COEFF = -0.007781954 0.9804324 0.0001611866 -0.02055254
-0.0007931527 
                     0.0003408651 -0.0001054206 0.007721833
9.428943e-005 -1.056684e-005 
                     -1.835947e-006 5.108406e-005 3.110137e-006
-2.600045e-006 1.76368e-005 
                     5.887504e-005 -1.361459e-006 6.903016e-006
-1.013644e-006 -4.142256e-008 
    SAMP_DEN_COEFF = 1 6.572977e-005 0.0007770264 -0.0004941248
-1.076262e-005 
                     -4.14945e-006 4.664055e-007 3.926331e-006
-7.6628e-006 -2.77191e-006 
                     1.522162e-008 -3.491444e-007 2.100755e-007
1.394239e-008 -1.637887e-007 
                     1.138227e-006 -1.141229e-008 -9.558018e-008
2.025416e-008 0 
    RPC Transform (-77.147099697,38.8590402679,0) ->
(13.0582,-0.0331189)
    RPC Transform (-76.9220669697,38.851539177,0) -> (6876.8,8.03432)
    RPC Transform (-77.147099697,38.8067941563,0) -> (1.97586,2195.33)
    RPC Transform (-76.9220669697,38.7992930654,0) -> (6884.99,2180.54)
    RPC Transform (-77.0345833333,38.8291666667,0) -> (3416.47,1097.86)
    RPC Transform (-77.0345833333,38.8291666667,300) ->
(3373.23,1086.17)
  USE00A TRE:
    NITF_USE00A_ANGLE_TO_NORTH=270
    NITF_USE00A_MEAN_GSD=108.2
    NITF_USE00A_DYNAMIC_RANGE=02047
    NITF_USE00A_OBL_ANG=21.47
    NITF_USE00A_ROLL_ANG=-20.36
    NITF_USE00A_N_REF=00
    NITF_USE00A_REV_NUM=28897
    NITF_USE00A_N_SEG=001
    NITF_USE00A_MAX_LP_SEG=002187
    NITF_USE00A_SUN_EL=+27.5
    NITF_USE00A_SUN_AZ=167.7
  STDIDC TRE:
    NITF_STDIDC_ACQUISITION_DATE=20061209161303
    NITF_STDIDC_MISSION=QB02
    NITF_STDIDC_PASS=12
    NITF_STDIDC_OP_NUM=000
    NITF_STDIDC_START_SEGMENT=AA
    NITF_STDIDC_REPRO_NUM=00
    NITF_STDIDC_REPLAY_REGEN=000
    NITF_STDIDC_START_COLUMN=001
    NITF_STDIDC_START_ROW=00001
    NITF_STDIDC_END_SEGMENT=AA
    NITF_STDIDC_END_COLUMN=007
    NITF_STDIDC_END_ROW=00003
    NITF_STDIDC_COUNTRY=
    NITF_STDIDC_WAC=
    NITF_STDIDC_LOCATION=3851N07702W
  Image Metadata:
    NITF_IID1=055E0F00
    NITF_IDATIM=09161303ZDEC06
    NITF_TGTID=
    NITF_ITITLE=09DEC06QB021200006DEC09161303-M1BS-005590231010_01_P002
    NITF_ISCLAS=U
    NITF_ISCODE=
    NITF_ISCTLH=
    NITF_ISREL=
    NITF_ISCAUT=
    NITF_ISCTLN=
    NITF_ISDWNG=
    NITF_ISORCE=QB02
    NITF_PVTYPE=INT
    NITF_IREP=MULTI
    NITF_ICAT=MS
    NITF_ABPP=11
    NITF_PJUST=R

Thanks again!
John


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, May 17, 2007 11:38 AM
To: John Bowen
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] gdal_translate problem with NITF RGBA image

John Bowen wrote:
> I'm trying to convert a 16bpp, 4 band NITF image into a GeoTiff and
have 
> not been able to figure out the arguments necessary to properly
convert 
> it.  Accompanying the NITF image is a text description of the image, 
> which contains (parts edited out with <snip> and </snip> for brevity:

John,

It is not obvious to me why this wouldn't have worked.  Could you supply
a gdalinfo report for the input file?  What were you using to view the
resulting TIFF files?

Actually, I'd suggest adding -co INTERLEAVE=PIXEL to your gdal_translate
command on the chance your tiff viewer does not support "SEPARATE"
organized
TIFF files.

If the problem turns out to be the nitf reading, another step is to run
the nitfdump utility against the nitf file for more details info.  This
utility can be manually built by cd'ing into the gdal/frmts/nitf
directory
in the source tree and doing "nmake /f makefile.vc nitfdump.exe" or
"make nitfdump" depending on platform.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From aaime at openplans.org  Thu May 17 10:54:34 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Recent changes related to the Java bindings
In-Reply-To: <f3b73b7d0705170716v6bcd510aufd767bd6e77cf18@mail.gmail.com>
References: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>	
	<464C6059.5020206@openplans.org>
	<f3b73b7d0705170716v6bcd510aufd767bd6e77cf18@mail.gmail.com>
Message-ID: <464C6CAA.1010300@openplans.org>

Tamas Szekeres ha scritto:
> 2007/5/17, Andrea Aime <aaime@openplans.org>:
...
> We have no VC6 buildslaves configured currently so I cannot confirm
> whether it builds on this compiler or not. The buildbot currently
> contains VC71 and VC80 builders. The latter is configured to produce
> 64 bit binaries.
> IIRC Mateusz is planning to make the results available to download,
> but this option haven't
> been realized yet.

Well, nice it's in the plans anyways.

> 
> I have no doubts about it. However for the windows builds it's more
> convenient to provide this setting in a common configuration file
> (that is the nmake.opt) than altering many other files in different
> places. It is pretty unmanageable from the buildbot's perspective.
> 
> Do we have a 'make test' functionality for the java builds?

Heh, unfortunately not.
Plus, the layout of the java binding sources is "peculiar" to say
the least (at least by java standards). Ideally we should have
a set of JUnit tests for the java bindings.

Cheers
Andrea

From simboss1 at gmail.com  Thu May 17 18:10:12 2007
From: simboss1 at gmail.com (Simone.Giannecchini)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Recent changes related to the Java bindings
In-Reply-To: <464C6CAA.1010300@openplans.org>
References: <f3b73b7d0705131435u27a9961djb0a191708fb96e63@mail.gmail.com>
	<464C6059.5020206@openplans.org>
	<f3b73b7d0705170716v6bcd510aufd767bd6e77cf18@mail.gmail.com>
	<464C6CAA.1010300@openplans.org>
Message-ID: <10673256.post@talk.nabble.com>


Hi list,
since I am mainly concerned in the java bindings (as well as aaime is) I
would like to give a couple of suggestions which may help or not.
1>When installing java  people are supposed to define a JAVA_HOME env
variable hence by default I would suggest to the Java guys to not set the
JAVA_HOME variable in java.opt and run the following command twhen
generating the bindings:

nmake /F  makefile.vc /E java

The /E will pick up the correct JAVA_HOME env var from wherever it is.

2>99% Of people that intall ant, usually put it in the path. Hence it is
unnecessary most part of the time to define an ANT_HOME variable as in
java.opt. I would suggest to make the definition of the ANT_HOME variable
optional in the java.opt file just run ant by default.

3>I would suggest to provide a maven descriptor along with the ant one (it
would pretty easy to add it) and to upload the releveant jar on some public
maven repository so that people can get it directly from there.

Again, these are just some advice from a Java programmer, so don't be too
hard on me :-).

Ciao,
Simone.



aaime wrote:
> 
> Tamas Szekeres ha scritto:
>> 2007/5/17, Andrea Aime <aaime@openplans.org>:
> ...
>> We have no VC6 buildslaves configured currently so I cannot confirm
>> whether it builds on this compiler or not. The buildbot currently
>> contains VC71 and VC80 builders. The latter is configured to produce
>> 64 bit binaries.
>> IIRC Mateusz is planning to make the results available to download,
>> but this option haven't
>> been realized yet.
> 
> Well, nice it's in the plans anyways.
> 
>> 
>> I have no doubts about it. However for the windows builds it's more
>> convenient to provide this setting in a common configuration file
>> (that is the nmake.opt) than altering many other files in different
>> places. It is pretty unmanageable from the buildbot's perspective.
>> 
>> Do we have a 'make test' functionality for the java builds?
> 
> Heh, unfortunately not.
> Plus, the layout of the java binding sources is "peculiar" to say
> the least (at least by java standards). Ideally we should have
> a set of JUnit tests for the java bindings.
> 
> Cheers
> Andrea
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Recent-changes-related-to-the-Java-bindings-tf3749437.html#a10673256
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Thu May 17 21:25:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] IMAGE_STRUCTURE metadata - rfc discussion
Message-ID: <464D008A.7040209@pobox.com>


Folks,

I've started drafting an RFC to formalize handling of metadata about
image structure in the IMAGE_STRUCTURE domain.  It is at:

   http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure

My concrete needs to a mechanism to handle signed 1-byte data, and to
broaden use of NBITS, but I thought this was a good time to iron out a
few other things that have been handled informally, or not at all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rayg at daylongraphics.com  Fri May 18 04:50:00 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Writing 8-bit TIFFs using JPEG compression
In-Reply-To: <464D008A.7040209@pobox.com>
References: <464D008A.7040209@pobox.com>
Message-ID: <464D68B8.5090600@daylongraphics.com>

Has anyone been able to write 8-bit grayscale TIFFs using JPEG 
compression? I'm running into an issue where libtiff aborts because the 
photometric interpretation is invalid, even if min_is_black is used. 
Seems the JCS_GRAYSCALE flag never gets set by the driver. Using the 
JPEG driver itself is okay.

Ray

From Konstantin.Baumann at hpi.uni-potsdam.de  Fri May 18 07:22:12 2007
From: Konstantin.Baumann at hpi.uni-potsdam.de (Baumann, Konstantin)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <464B0FBB.1070201@pobox.com>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<464B0FBB.1070201@pobox.com>
Message-ID: <5AC0F51A926CD442BC08D55DA7DAB1D406267B38@3mxma1r.hpi.uni-potsdam.de>

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com]
> Sent: Wednesday, May 16, 2007 4:06 PM
> To: Baumann, Konstantin
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] new RFC 13: Improved Feature
> Insertion/Update/Delete Performance in Batch Mode
> 
> Baumann, Konstantin wrote:
> > Hi!
> >
> > I would like to announce the new RFC 13:
> > <http://trac.osgeo.org/gdal/wiki/rfc13_createfeatures>
> >
> > I would like to add some new methods to OGRLayer for "batched"
> > inserting/updating/deleting features. These virtual methods allow
OGR
> > drivers to implement optimized handling of these batched operations
> > (e.g. resulting in a performance boost).
> >
> > For example, I was able to improve the "batched insertion" scenario
for
> > the MySQL driver from ~40 features per second to something about
> > 800-1.500 features per second; for layers with >=50.000 features
(with
> > and wihtout geometry)...
> >
> > Any further comments and suggestions are wellcome.
> 
> Kosta,
> 
> I presume the optimization in the mysql driver was accomplished by
doing
> all the features in a single CreateFeatures() call as a single
> transaction.
> Is that right?

Yes.

> There are other mechanisms to accomplish this - based on the OGR
> transaction
> semantics.  For instance, I think the postgres and oracle drivers
> implement
> ogr transaction semantics and can do a bunch of CreateFeature() calls
in
> a single transaction.  The ogr2ogr program already defaults to doing
> feature
> creation in groups of 200 by default, with transaction semantics
around
> this.

The startTransaction()/commitTransaction() methods are only implemented
by the SQLite and PostGis drivers...

> On the other hand, the transaction semantics are quite complicated to
> implement properly in drivers, which is why I suspect they haven't
been
> done in the MySQL driver.  So if we were to proceed with this RFC I
think
> it would be because it provides a simplier approach to grouping create
> features than the transaction semantics.

Yes, for example: if you do an OGRLayer::CreateFeature() call inside of
an active transaction, and you rollback that transaction, the FID has
still be changed for the given feature given. This may or may not be a
problem (due to the also vague FID semantics in OGR)...

And the implementation complexity is not to neglect, too.

> But because this introduces an extra interface and the related
complexity
> I'm hesitant to support it when there is another way to accomplish the
> same thing.

I've done some performance testings, I would like to share. The used
dataset was a 25.000 element polygon shapefile, which should be imported
into a MySQL database.

1. Test:
current OGR-MySQL-Impl: the generated SQL-commands are like this:

INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_1_1>,
<value_1_2>, ...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_2_1>,
<value_2_2>, ...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_3_1>,
<value_3_2>, ...);
...
=> ~40 features per second

2. Test:
Wrapped current OGR-MySQL-Impl with "START TRANSACTION" and "COMMIT":

START TRANSACTION;
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_1_1>,
<value_1_2>, ...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_2_1>,
<value_2_2>, ...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_3_1>,
<value_3_2>, ...);
...
COMMIT;
=> ~750 features per second

3. Test:
Optimized CreateFeatures() impl., by using multiple (250) values
definitions inside a single INSERT statement:

INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_1_1>,
<value_1_2>, ...), (<value_2_1>, <value_2_2>, ...), (...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_251_1>,
<value_251_2>, ...), (<value_252_1>, <value_252_2>, ...), (...);
...
=> ~850 features per second

4. Test:
Optimized CreateFeatures() impl. (like test #3) with transaction
wrapper:

START TRANSACTION;
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_1_1>,
<value_1_2>, ...), (<value_2_1>, <value_2_2>, ...), (...);
INSERT INTO table (<field_1>, <field_2>, ...) VALUES (<value_251_1>,
<value_251_2>, ...), (<value_252_1>, <value_252_2>, ...), (...);
...
COMMIT;
=> ~850 features per second (more or less as test #3)

BTW, the timings are more or less indepenent of runing the MySQL server
on localhost or on a remote machine connected via 1 GBit LAN...

===> Draw your own conclusions, here... :-) <===

> One other small concern.  I think it can be inconvenient to implement
> swig wrappers for interfaces taking arrays of objects.  Can any of the
> swig folks comment on this?

I am not familiar with SWIG, but could the following approach by
providing an "extra array object" easier to implement:

struct OGRFeatureArray {
    OGRFeature** papoFeatures;
    int iFeatureCount;
};

OGRErr OGR_L_CreateFeatures( OGRFeatureArray featureArray );

Kind regards,
    Kosta


From Konstantin.Baumann at hpi.uni-potsdam.de  Fri May 18 07:37:03 2007
From: Konstantin.Baumann at hpi.uni-potsdam.de (Baumann, Konstantin)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <f3b73b7d0705160737o3335ab57mb6337f893e052b70@mail.gmail.com>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<f3b73b7d0705160737o3335ab57mb6337f893e052b70@mail.gmail.com>
Message-ID: <5AC0F51A926CD442BC08D55DA7DAB1D406267B3A@3mxma1r.hpi.uni-potsdam.de>

> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Wednesday, May 16, 2007 4:38 PM
> To: Baumann, Konstantin
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] new RFC 13: Improved Feature
> Insertion/Update/Delete Performance in Batch Mode
> 
> Hi,
> 
> I agree in the purpose of the RFC. However it seems that this
> implementation brings in some new elements in the C++ interface and
> further requirements of the various drivers to implement these
> functions. Hopefully not the mysql is the only driver that would
> implement this functionality.

I think the new interface is easy enough, to allow other OGR drivers to
implement an optimized code path as well...

> Many people use the various SWIG-ged language APIs instead of the
> C/C++ interface. So we should also consider to support these API-s
> with any new additions as well. In this regard implementing typemaps
> for object arrays in not too straightforward and we should eventually
> reconstuct the array iterating through the elements one by one. It
> would certainly bring in additional delays with the completion of the
> overall implementation.
> To support the SWIG interfaces you should also represent these
> function at the GDAL/OGR C API.

The straight forward C API would look like this:

OGRErr OGR_L_CreateFeatures( OGRFeature** papoFeatures, int
iFeatureCount );

I am not familiar with SWIG-wrapping, but would it be more easy to use
an interface like this:

struct OGRFeatureArray {
    OGRFeature** papoFeatures;
    int iFeatureCount;
};
OGRErr OGR_L_CreateFeatures( OGRFeatureArray features );

> I would propose you to examine the option of providing this
> functionality by using the existing API with caching the various
> feature creations / additions / deletions at the provider. These
> changes could be propagated to the datastore in batch using the
> existing transaction mechanism. I'm sure that this behaviour have
> already been implemented in various providers.

Only the SQLite and the PostGIS drivers implement the "transaction"
interface methods of OGRLayer (or is it OGRDataSource?).

Explicitly storing and keeping track of creations, additions, updates,
and deletions and applying these changes later on in time would be
(very) complex and error prone w.r.t. the implementation issues (for
example, to mimic the side effects (e.g. FID updates) of certain
operations ect.)...

I would like to use a simple interface for doing simple operations; the
more complex interfaces (like transactions) should be used for more
complex opertaions, IMHO... :-)

Best regards,
    Kosta


From szekerest at gmail.com  Fri May 18 09:48:22 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <5AC0F51A926CD442BC08D55DA7DAB1D406267B3A@3mxma1r.hpi.uni-potsdam.de>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<f3b73b7d0705160737o3335ab57mb6337f893e052b70@mail.gmail.com>
	<5AC0F51A926CD442BC08D55DA7DAB1D406267B3A@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <f3b73b7d0705180648tdf88289gf8d08832943990a6@mail.gmail.com>

2007/5/18, Baumann, Konstantin <Konstantin.Baumann@hpi.uni-potsdam.de>:
> > I agree in the purpose of the RFC. However it seems that this
> > implementation brings in some new elements in the C++ interface and
> > further requirements of the various drivers to implement these
> > functions. Hopefully not the mysql is the only driver that would
> > implement this functionality.
>
> I think the new interface is easy enough, to allow other OGR drivers to
> implement an optimized code path as well...
>
I've no doubts. But this solution is a fairly new and unconventional
approach however this change addresses mainly performance issues of a
particular driver. I consider many of the other drivers wont aware of
setting the features in one single batch if they don't have any
benefits to do so.
Theoretically we are talking about the desired approach for
representing a collection of (cached) features in the OGR API. IMO the
array is not the best data structure to introduce this effort. In the
future we might want to use such data structure in a wider perspective
and possibly adding more properties to this entity. Moreover currently
the Layer is the dedicated entity to represent a collection of the
features (even though the various providers do not actually cache them
in the memory)

> > Many people use the various SWIG-ged language APIs instead of the
> > C/C++ interface. So we should also consider to support these API-s
> > with any new additions as well. In this regard implementing typemaps
> > for object arrays in not too straightforward and we should eventually
> > reconstuct the array iterating through the elements one by one. It
> > would certainly bring in additional delays with the completion of the
> > overall implementation.
> > To support the SWIG interfaces you should also represent these
> > function at the GDAL/OGR C API.
>
> The straight forward C API would look like this:
>
> OGRErr OGR_L_CreateFeatures( OGRFeature** papoFeatures, int
> iFeatureCount );
>
> I am not familiar with SWIG-wrapping, but would it be more easy to use
> an interface like this:
>
> struct OGRFeatureArray {
>     OGRFeature** papoFeatures;
>     int iFeatureCount;
> };
> OGRErr OGR_L_CreateFeatures( OGRFeatureArray features );
>

This does not help too much, since the OGRFeature** should continue to
be mapped to the target language, and the marshaling logic should be
written by the various SWIG mainainers. It would be much helpful to
introduce a new collection class for this purpose any implement the
Add/Remove/Clear methods on that class.

> > I would propose you to examine the option of providing this
> > functionality by using the existing API with caching the various
> > feature creations / additions / deletions at the provider. These
> > changes could be propagated to the datastore in batch using the
> > existing transaction mechanism. I'm sure that this behaviour have
> > already been implemented in various providers.
>
> Only the SQLite and the PostGIS drivers implement the "transaction"
> interface methods of OGRLayer (or is it OGRDataSource?).
>
I'm not aware of which ones are actually implement that. The PostGIS
driver currently supports the submission of the BEGIN/COMMIT commands
but does not retain any data to post it to the database in a single
command. I consider actually not only the performance impact is the
motivation to support this approach but also the ACID properties that
a transaction normally implements.
I've no doubts about the feasibility of the test results you've
provided in your previous post. Actually establishing the transaction
contexts at the database level have some additional cost so submitting
the features in separate transactions is less performant (I consider a
new transaction is implicitly created for every insert/update
operation). But I don't see a great impact in the performance when
providing the data in a single command or multiple command within the
same transaction and the same open connection.
Yes indeed, the transaction is currently supported at the DataSource
object where the connection to the database is normally stored.

> Explicitly storing and keeping track of creations, additions, updates,
> and deletions and applying these changes later on in time would be
> (very) complex and error prone w.r.t. the implementation issues (for
> example, to mimic the side effects (e.g. FID updates) of certain
> operations ect.)...
>
The various providers might restrict the conditions of the operations
within the transaction boundaries. For example you might only support
only the additions within a transaction at the povider and later you
might enhance this behaviour.

> I would like to use a simple interface for doing simple operations; the
> more complex interfaces (like transactions) should be used for more
> complex opertaions, IMHO... :-)

OGR should reflect a common abstraction level of the various
providers. From the perspecive of the interface it's more complicated
to introduce further elements implemented solely by a limited number
of the providers (actually one) if we may provide this functionality
with the existing interface. If we support further interface elements
than we would make sure that those apply to the other data sources as
well, because the folks would complain about the missing
implementations sooner or later.


Best regards,

Tamas

From ddnebert at usgs.gov  Fri May 18 11:51:21 2007
From: ddnebert at usgs.gov (Doug Nebert)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
Message-ID: <464DCB79.4080804@usgs.gov>

I have a series of images that are 2000x2000 pixels centered on the 
polar regions in a EPSG:3413 projection, though Proj.4/GDAL don't seem 
to know about it yet. I'd like to take the GIFs and embed the 
projection information in the TIFF header so that they may be 
used/interpreted in applications such as transformation to other 
projections.

I've been trying gdal_translate to do this assignment, and gdalinfo 
seems to show some things being set. And yet, I am getting pixels equal 
to units of measure, instead of meters.

The details of this unusual projection:

Based on Polar Stereographic (variant B) method
Base CRS and ellipsoid are WGS84
Latitude of standard parallel: 70N (where the plane intersects)
Longitude of origin: 45W (Greenland is centered)

so I figured I could assign these by hand:

gdal_translate -a_srs "+proj=stere +datum=wgs84 +lat_ts=70.0 +lat_0=90 
+lon_0=-45" -of GTiff input1.gif quickscat1.tif

But my reported coordinates when panning around the image are in pixel 
coordinates, not in meters.

What am I missing in the assignment?

gdalinfo says:

Driver: GTiff/GeoTIFF
Size is 1530, 1530
Coordinate System is:
PROJCS["unnamed",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.2572235630016,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Polar_Stereographic"],
     PARAMETER["latitude_of_origin",70],
     PARAMETER["central_meridian",-45],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1530.0)
Upper Right ( 1530.0,    0.0)
Lower Right ( 1530.0, 1530.0)
Center      (  765.0,  765.0)



-- 
Douglas D. Nebert
Geospatial Data Clearinghouse Coordinator, Information Architect
FGDC/GSDI Secretariat   Phone: +1 703 648 4151  Fax: +1 703 648-5755


From warmerdam at pobox.com  Fri May 18 12:28:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
In-Reply-To: <5AC0F51A926CD442BC08D55DA7DAB1D406267B38@3mxma1r.hpi.uni-potsdam.de>
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<464B0FBB.1070201@pobox.com>
	<5AC0F51A926CD442BC08D55DA7DAB1D406267B38@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <464DD449.4090606@pobox.com>

Baumann, Konstantin wrote:
> ===> Draw your own conclusions, here... :-) <===

Konstantin,

Just to be clear, the conclusion I got from your statistics is that
nearly all the benefit of doing a bunch of features at once comes from
doing them in a single transaction and therefore that implementing the
transaction semantics for the mysql driver would be sufficient to get
a good data loading performance improvement.

Is that congruent with your reading of the statistics?

I'm left thinking that I would prefer to see transaction semantics in
the mysql driver instead of new bulk interfaces added to OGR as a whole.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri May 18 12:35:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Writing 8-bit TIFFs using JPEG compression
In-Reply-To: <464D68B8.5090600@daylongraphics.com>
References: <464D008A.7040209@pobox.com> <464D68B8.5090600@daylongraphics.com>
Message-ID: <464DD5E0.9080800@pobox.com>

Ray Gardener wrote:
> Has anyone been able to write 8-bit grayscale TIFFs using JPEG 
> compression? I'm running into an issue where libtiff aborts because the 
> photometric interpretation is invalid, even if min_is_black is used. 
> Seems the JCS_GRAYSCALE flag never gets set by the driver. Using the 
> JPEG driver itself is okay.

Ray,

I just tried it and it seemed to work, though I see the following
debug message, which I find suspicious:

GTiff: Setting JPEGCOLORMODE_RGB

Some of the jpeg stuff is very sensitive to the version of libtiff.  Are you
using the builtin libtiff?  The last public release?  libtiff-3.9 from CVS?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From guillaume.huby.lists at gmail.com  Fri May 18 12:36:24 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <464DD3F9.8080003@geosys.com>
References: <464DD3F9.8080003@geosys.com>
Message-ID: <ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>

>
> -------- Message original --------
>
> Sujet: [Gdal-dev] Use of gdalwarp/translate utility
> Date: Fri, 18 May 2007 11:51:21 -0400
> De: Doug Nebert <ddnebert@usgs.gov>
> R?pondre ?: ddnebert@usgs.gov
> Pour: gdal-dev@lists.maptools.org
>
> I have a series of images that are 2000x2000 pixels centered on the
> polar regions in a EPSG:3413 projection, though Proj.4/GDAL don't seem
> to know about it yet. I'd like to take the GIFs and embed the
> projection information in the TIFF header so that they may be
> used/interpreted in applications such as transformation to other
> projections.
>
...

> gdal_translate -a_srs "+proj=stere +datum=wgs84 +lat_ts=70.0 +lat_0=90
>
> +lon_0=-45" -of GTiff input1.gif quickscat1.tif


...

gdalinfo says:
>
> Driver: GTiff/GeoTIFF
> Size is 1530, 1530
> Coordinate System is:
> PROJCS["unnamed",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.2572235630016,
>                  AUTHORITY["EPSG","7030"]],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Polar_Stereographic"],
>      PARAMETER["latitude_of_origin",70],
>      PARAMETER["central_meridian",-45],
>      PARAMETER["scale_factor",1],
>      PARAMETER["false_easting",0],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]]]
> Metadata:
>    AREA_OR_POINT=Area
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 1530.0)
> Upper Right ( 1530.0,    0.0)
> Lower Right ( 1530.0, 1530.0)
> Center      (  765.0,  765.0)


It seems you should add the -a_ullr option (see
http://www.gdal.org/gdal_translate.html) to add coordinates and pixel size
to your raster.
Using -a_srs alone you only add information about coordinate system without
modifying the coordinates themselves (i.e. upper-left coordinates, pixel
size and so on).
So if your GIF doesn't provide these informations to gdal you should add
them by hand.

Good luck,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070518/695de9c0/attachment.html
From mateusz at loskot.net  Fri May 18 13:33:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] New gdal-grass-1.4.1 plugin
Message-ID: <464DE363.4080206@loskot.net>

Hi All!

I prepared package with new version of GDAL GRASS plugin:

http://trac.osgeo.org/gdal/ticket/1587#comment:14

I tested it with current GRASS HEAD but if anyone can try it with CVS or
older versions, I'd appreciated your support.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.wilkie at gov.yk.ca  Fri May 18 14:34:42 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>
References: <464DD3F9.8080003@geosys.com>
	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>
Message-ID: <464DF1C2.3070603@gov.yk.ca>

Thanks Guillaume!

I did not understand what that option was for, your concise explanation 
cleaned up my confision nicely. I added it to 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Konstantin.Baumann at hpi.uni-potsdam.de  Fri May 18 15:46:04 2007
From: Konstantin.Baumann at hpi.uni-potsdam.de (Baumann, Konstantin)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] new RFC 13: Improved Feature Insertion/Update/Delete
	Performance in Batch Mode
References: <5AC0F51A926CD442BC08D55DA7DAB1D406267AA1@3mxma1r.hpi.uni-potsdam.de>
	<f3b73b7d0705160737o3335ab57mb6337f893e052b70@mail.gmail.com>
	<0DFB65F9FF7BAF4EAF85903BD6426E193DBC0DDB@3mxma1r.hpi.uni-potsdam.de>
Message-ID: <5AC0F51A926CD442BC08D55DA7DAB1D4012ABD42@3mxma1r.hpi.uni-potsdam.de>

> Just to be clear, the conclusion I got from your statistics is that
> nearly all the benefit of doing a bunch of features at once comes from
> doing them in a single transaction and therefore that implementing the
> transaction semantics for the mysql driver would be sufficient to get
> a good data loading performance improvement.
>
> Is that congruent with your reading of the statistics?
>
> I'm left thinking that I would prefer to see transaction semantics in
> the mysql driver instead of new bulk interfaces added to OGR as a whole.

Frank,

yes, that were my conclusions, too... :-)

OK, I will go and look into the transaction thingy...

Kind regards,

    Kosta



From rayg at daylongraphics.com  Sat May 19 01:28:11 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Writing 8-bit TIFFs using JPEG compression
In-Reply-To: <464DD5E0.9080800@pobox.com>
References: <464D008A.7040209@pobox.com> <464D68B8.5090600@daylongraphics.com>
	<464DD5E0.9080800@pobox.com>
Message-ID: <464E8AEB.2030002@daylongraphics.com>

Frank Warmerdam wrote:
> Ray,
> 
> I just tried it and it seemed to work, though I see the following
> debug message, which I find suspicious:
> 
> GTiff: Setting JPEGCOLORMODE_RGB
> 
> Some of the jpeg stuff is very sensitive to the version of libtiff.  Are 
> you
> using the builtin libtiff?  The last public release?  libtiff-3.9 from CVS?

This is with the built-in libtiff in 1.3.2. I didn't find any tiff 
driver refs to JCS_GRAYSCALE in 1.4.1 but I should revisit the issue 
when I've had a chance to upgrade.

Another thing I noticed that might be a higher-level problem is that if 
the tiff copycreate() gets a color table from a one-band dataset, it 
assumes rgb. But 8-bit formats w/o an explicit gray mode need color 
tables to emulate it, and there's no way to tell which is which except 
to fabricate a driver properties list ahead of time. A simple fix would 
be to have the driver examine the color table and if it sees that it's 
grayscale, then switch to gray mode.

Ray

From simboss1 at gmail.com  Sun May 20 11:36:43 2007
From: simboss1 at gmail.com (Simone Gannecchini)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Issues with hdf4 subdatasets on win xp using gdal trunk
Message-ID: <009e01c79af4$ac68b730$d400a8c0@LAPTOP>

Hi list,
I am having some issues working with hdf4 driver on some modis aqua data.

I am working with gdal trunk which I built myself two days ago on my windows
xp box.

I have a test dataset that I want to access which is now located on my hard
drive under c:\roger. Dataset name is NJ2007136092911.L3_NURC_temp.

When I am inside the c:\roger directory everything works as expected. I can
do a gdalinfo on the main dataset and I am also able to do a gdalinfo on the
subdatasets I need.

If I browse to c:\ and I issue the following command:

gdalinfo c:\\roger\\NJ2007136092911.L3_NURC_temp
I get the information for the whole dataset correctly. Here below you have
an excerpt:


>>
C:\>gdalinfo c:\\roger\\NJ2007136092911.L3_NURC_temp

Driver: HDF4/Hierarchical Data Format Release 4 Size is 512, 512 Coordinate
System is `'
Metadata:
....
  mapProjectionSystem=NRL(USGS)
  mapProjection=temp
  mapUpperLeft=38.4999999999998, 11.5
  mapUpperRight=38.4999999999998, 16.5
  mapLowerLeft=33.9979685274162, 11.5
  mapLowerRight=33.9979685274162, 16.5
 
prodList=albedo_ch1,albedo_ch2,btemp_ch3,btemp_ch4,btemp_ch5,l2_flags,sst,re
f_dif,K_PAR,suspend,c_660
....
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:1

  SUBDATASET_1_DESC=[556x500] albedo_ch1 (16-bit integer)
 
SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:2

  SUBDATASET_2_DESC=[556x500] albedo_ch2 (16-bit integer)
 
SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:3

  SUBDATASET_3_DESC=[556x500] btemp_ch3 (16-bit integer)
 
SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:4

  SUBDATASET_4_DESC=[556x500] btemp_ch4 (16-bit integer)
 
SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:5

  SUBDATASET_5_DESC=[556x500] btemp_ch5 (16-bit integer)
 
SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:6

  SUBDATASET_6_DESC=[556x500] l2_flags (32-bit unsigned integer)
 
SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:7

  SUBDATASET_7_DESC=[556x500] sst (16-bit integer)
 
SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:8

  SUBDATASET_8_DESC=[556x500] ref_dif (8-bit unsigned integer)
 
SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:9

  SUBDATASET_9_DESC=[556x500] K_PAR (8-bit unsigned integer)
 
SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
10
  SUBDATASET_10_DESC=[556x500] suspend (8-bit unsigned integer)
 
SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
11
  SUBDATASET_11_DESC=[556x500] c_660 (16-bit integer)
 
SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
16
  SUBDATASET_12_DESC=[28x26] CP_Longitudes (64-bit floating-point)
 
SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
17
  SUBDATASET_13_DESC=[28x26] CP_Latitudes (64-bit floating-point) Corner
Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

>>

Problems arise if now I try to access any of the subdatasets like as
follows:


>>
C:\>gdalinfo HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp":7

I get the following error:

ERROR 4: `'HDF4_SDS:UNKNOWN:c:\\roger\\NJ2007136092911.L3_NURC_temp:7'' does
not  exist in the file system, and is not recognised as a supported dataset
name.

GDALOpen failed - 4
`'HDF4_SDS:UNKNOWN:c:\\roger\\NJ2007136092911.L3_NURC_temp:7'' does not
exist in  the file system, and is not recognised as a supported dataset
name.

>>

I tried the same command with a different dataset and the same problem
arises when I try to access them. I tried to do the same using gdalinfo from
FWTools 1.2.2 experiencing the same problems. However, using OpenEV from the
same FWTools distro I have been able to open up a subdataset and to
visualize it correctly.


I hope that someone can shed some light here. It has been a while since the
last time I played with gdal and HDF hence it might be me doing something
wrong.

Thx a lot,
Simone.






-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51
55041  Camaiore (LU)
Italy

phone: +39 0584983027
fax:   +39 0584983027
mob:   +39 333 8128928 


http://www.geo-solutions.it

-------------------------------------------------------


From ivan.lucena at pmldnet.com  Sun May 20 17:42:52 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Issues with hdf4 sub datasets on win xp using gdal
	trunk
In-Reply-To: <009e01c79af4$ac68b730$d400a8c0@LAPTOP>
References: <009e01c79af4$ac68b730$d400a8c0@LAPTOP>
Message-ID: <003501c79b27$d2179860$0a0a0a0a@idrisi.clarku.edu>

Simone,

I have the same problem with a MODIS file but I found a solution (Skip to
the "***" if you don't want to read it all)

The first exploratory call to gdalinfo works fine:

C:\Data>gdalinfo C:\Data\Modis\MCD43B4.A2005241.h13v09.004.200526900420
6.hdf
...
SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"C:\Data\Modis\MCD43B4.A2005241.h13v09.0
04.2005269004206.hdf":MOD_Grid_BRDF:Nadir_Reflectance_Quality
...

But if I query for a specific dataset I got the same error as you:

C:\Data>gdalinfo
HDF4_EOS:EOS_GRID:"C:\Data\Modis\MCD43B4.A2005241.h13v09.004.2005269004206.h
df":MOD_Grid_BRDF:Nadir_Reflectance_Quality
ERROR 4:
`HDF4_EOS:EOS_GRID:C:\Data\Modis\MCD43B4.A2005241.h13v09.004.2005269004
206.hdf:MOD_Grid_BRDF:Nadir_Reflectance_Quality' does not exist in the file
system,
and is not recognised as a supported dataset name.

Humm, there is also a typo error in "recognized".

****
The workaround is simple, I just remove the "C:" and it work:

C:\Data>gdalinfo HDF4_EOS:EOS_GRID:"\Data\Modis\MCD43B4.A2005241.h13v09
.004.2005269004206.hdf":MOD_Grid_BRDF:Nadir_Reflectance_Quality

I hope that it works in your case too.
****

It looks like if you are in "programming mode" (FWTools or GDAL API) that
could be a problem with more than one disk driver. Isn't it right?

Anyway, I always thought that this mechanism for selecting dataset in
gdalinfo is IMHO a little user unfriendly. I suggest that the first
exploratory call should issue a numeric index for each datasets so that the
user can refer to that in the second call, e.g.:

C:\Data>gdalinfo C:\Data\Modis\MCD43B4.A2005241.h13v09.004.200526900420
6.hdf
...
SUBDATASET_3_NAME[4]=HDF4_EOS:EOS_GRID:"C:\Data\Modis\MCD43B4.A2005241.h13v0
9.004.2005269004206.hdf":MOD_Grid_BRDF:Nadir_Reflectance_Quality
...
C:\Data>gdalinfo -s 4 C:\Data\Modis\MCD43B4.A2005241.h13v09.004.200526900420
6.hdf

Of course that will require the same change in gdal_translate, gdalwarp and
other utilities. That could also affect the others multi-dataset GDAL
drivers.

Best regards,

Ivan Lucena


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simone Gannecchini
Sent: Sunday, May 20, 2007 11:37 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Issues with hdf4 subdatasets on win xp using gdal trunk

Hi list,
I am having some issues working with hdf4 driver on some modis aqua data.

I am working with gdal trunk which I built myself two days ago on my windows
xp box.

I have a test dataset that I want to access which is now located on my hard
drive under c:\roger. Dataset name is NJ2007136092911.L3_NURC_temp.

When I am inside the c:\roger directory everything works as expected. I can
do a gdalinfo on the main dataset and I am also able to do a gdalinfo on the
subdatasets I need.

If I browse to c:\ and I issue the following command:

gdalinfo c:\\roger\\NJ2007136092911.L3_NURC_temp
I get the information for the whole dataset correctly. Here below you have
an excerpt:


>>
C:\>gdalinfo c:\\roger\\NJ2007136092911.L3_NURC_temp

Driver: HDF4/Hierarchical Data Format Release 4 Size is 512, 512 Coordinate
System is `'
Metadata:
....
  mapProjectionSystem=NRL(USGS)
  mapProjection=temp
  mapUpperLeft=38.4999999999998, 11.5
  mapUpperRight=38.4999999999998, 16.5
  mapLowerLeft=33.9979685274162, 11.5
  mapLowerRight=33.9979685274162, 16.5
 
prodList=albedo_ch1,albedo_ch2,btemp_ch3,btemp_ch4,btemp_ch5,l2_flags,sst,re
f_dif,K_PAR,suspend,c_660
....
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:1

  SUBDATASET_1_DESC=[556x500] albedo_ch1 (16-bit integer)
 
SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:2

  SUBDATASET_2_DESC=[556x500] albedo_ch2 (16-bit integer)
 
SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:3

  SUBDATASET_3_DESC=[556x500] btemp_ch3 (16-bit integer)
 
SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:4

  SUBDATASET_4_DESC=[556x500] btemp_ch4 (16-bit integer)
 
SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:5

  SUBDATASET_5_DESC=[556x500] btemp_ch5 (16-bit integer)
 
SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:6

  SUBDATASET_6_DESC=[556x500] l2_flags (32-bit unsigned integer)
 
SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:7

  SUBDATASET_7_DESC=[556x500] sst (16-bit integer)
 
SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:8

  SUBDATASET_8_DESC=[556x500] ref_dif (8-bit unsigned integer)
 
SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp"
:9

  SUBDATASET_9_DESC=[556x500] K_PAR (8-bit unsigned integer)
 
SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
10
  SUBDATASET_10_DESC=[556x500] suspend (8-bit unsigned integer)
 
SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
11
  SUBDATASET_11_DESC=[556x500] c_660 (16-bit integer)
 
SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
16
  SUBDATASET_12_DESC=[28x26] CP_Longitudes (64-bit floating-point)
 
SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp
":
17
  SUBDATASET_13_DESC=[28x26] CP_Latitudes (64-bit floating-point) Corner
Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

>>

Problems arise if now I try to access any of the subdatasets like as
follows:


>>
C:\>gdalinfo HDF4_SDS:UNKNOWN:"c:\\roger\\NJ2007136092911.L3_NURC_temp":7

I get the following error:

ERROR 4: `'HDF4_SDS:UNKNOWN:c:\\roger\\NJ2007136092911.L3_NURC_temp:7'' does
not  exist in the file system, and is not recognised as a supported dataset
name.

GDALOpen failed - 4
`'HDF4_SDS:UNKNOWN:c:\\roger\\NJ2007136092911.L3_NURC_temp:7'' does not
exist in  the file system, and is not recognised as a supported dataset
name.

>>

I tried the same command with a different dataset and the same problem
arises when I try to access them. I tried to do the same using gdalinfo from
FWTools 1.2.2 experiencing the same problems. However, using OpenEV from the
same FWTools distro I have been able to open up a subdataset and to
visualize it correctly.


I hope that someone can shed some light here. It has been a while since the
last time I played with gdal and HDF hence it might be me doing something
wrong.

Thx a lot,
Simone.






-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51
55041  Camaiore (LU)
Italy

phone: +39 0584983027
fax:   +39 0584983027
mob:   +39 333 8128928 


http://www.geo-solutions.it

-------------------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From paul.malm at saabgroup.com  Mon May 21 02:50:35 2007
From: paul.malm at saabgroup.com (Malm Paul)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] aux files
Message-ID: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>

Hi,
I'm looking for the format description of .aux files (think it is Erdas
Imagine raster position files). Is ther anyone out there who can help me
with this?

Kind regards,
Paul 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070521/1f7f9b96/attachment.html
From jmp at geosys.com  Mon May 21 03:12:41 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <001901c7960c$3f613e60$2201a8c0@pcjmp>
Message-ID: <000501c79b77$6bedab60$2201a8c0@pcjmp>

Hi,

I'm looking for someone who tries to use GEOS in the C# OGR.

Thanks.

Best Regards

PIERRET Jean michel

----------------------------------------------------------------------------

Hi,

I try to use the OGR's library in Csharp and the GEOS support but I have 2
problems. I'm using the "gdal-svn-trunk-2007.05.09".

1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains" it
turns over me an error "GEOS support not enabled". However I have
uncommented the support GEOS in the file "nmake.opt" and the compilation
return no error.

GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib

When I use on the same object the method "Intersect" it seems work. 

2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".

Best Regards

PIERRET Jean michel



From guillaume.huby.lists at gmail.com  Mon May 21 03:36:10 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <464DF1C2.3070603@gov.yk.ca>
References: <464DD3F9.8080003@geosys.com>
	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>
	<464DF1C2.3070603@gov.yk.ca>
Message-ID: <ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>

On 5/18/07, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
>
> I did not understand what that option was for, your concise explanation
> cleaned up my confision nicely. I added it to
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate


Thanks for this page, but I think it needs improvements. Its contents are
quite redundant with the official doc of gdal_translate.
I think of two possibilities :
1. Modify official doc of gdal_translate to get this point more clear.
2. Transform this wiki page in a "HOWTO add geographic references
(projection, coordinates) to an image using gdal_translate" with simple
examples and explanations of commands used. This way the page would become a
good add-on to the official doc.
These are suggestions, I hope it will help ...

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070521/1e41da69/attachment.html
From szekerest at gmail.com  Mon May 21 06:45:47 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <000501c79b77$6bedab60$2201a8c0@pcjmp>
References: <001901c7960c$3f613e60$2201a8c0@pcjmp>
	<000501c79b77$6bedab60$2201a8c0@pcjmp>
Message-ID: <f3b73b7d0705210345h6f3b7ac9v1166eb43475617dd@mail.gmail.com>

Hi,

It seems that the GEOS support is not actually enabled in your
project. In this case the Intersect method tests the overlapping of
the envelopes of the 2 geometries.

Are you sure the correct version of the dll-s have been loaded?

In the recent days I've changed the csharp bindings to link against
gdal14.dll instead of the static linking. The previous approach might
lead to various problems. Checkout the latest svn-trunk to rely on
these changes.

Best regards,

Tamas


2007/5/21, Jean Michel PIERRET <jmp@geosys.com>:
> Hi,
>
> I'm looking for someone who tries to use GEOS in the C# OGR.
>
> Thanks.
>
> Best Regards
>
> PIERRET Jean michel
>
> ----------------------------------------------------------------------------
>
> Hi,
>
> I try to use the OGR's library in Csharp and the GEOS support but I have 2
> problems. I'm using the "gdal-svn-trunk-2007.05.09".
>
> 1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains" it
> turns over me an error "GEOS support not enabled". However I have
> uncommented the support GEOS in the file "nmake.opt" and the compilation
> return no error.
>
> GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
> GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib
>
> When I use on the same object the method "Intersect" it seems work.
>
> 2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".
>
> Best Regards
>
> PIERRET Jean michel
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ddnebert at usgs.gov  Mon May 21 09:24:33 2007
From: ddnebert at usgs.gov (Doug Nebert)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
References: <464DD3F9.8080003@geosys.com>	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>	<464DF1C2.3070603@gov.yk.ca>
	<ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
Message-ID: <46519D91.2080206@usgs.gov>

guillaume huby wrote:
> On 5/18/07, *Matt Wilkie* <matt.wilkie@gov.yk.ca 
> <mailto:matt.wilkie@gov.yk.ca>> wrote:
> 
>     I did not understand what that option was for, your concise explanation
>     cleaned up my confision nicely. I added it to
>     http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate
>     <http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate>
> 
> 
> Thanks for this page, but I think it needs improvements. Its contents 
> are quite redundant with the official doc of gdal_translate.
> I think of two possibilities :
> 1. Modify official doc of gdal_translate to get this point more clear.
> 2. Transform this wiki page in a "HOWTO add geographic references 
> (projection, coordinates) to an image using gdal_translate" with simple 
> examples and explanations of commands used. This way the page would 
> become a good add-on to the official doc.
> These are suggestions, I hope it will help ...
> 

In trying to use the gdal_translate on a non-standard projection, the 
hardest part I found was to determine what the allowable syntax and 
meaning of the PROJ.4 parameters were (i.e. +lat_0=70, +ellps=WGS84) as 
an argument to a_srs. I figured it out by googling some examples, but 
there is no clean list that I could find. If there is a list of such 
parameters, it should be linked from the gdal_translate page -- and the 
general GDAL page for that matter -- with the appropriate support for 
each projection. The GeoTIFF projections transform list is a great 
start, but still does not include the PROJ.4 syntax for each projection 
parameter. http://www.remotesensing.org/geotiff/proj_list/

Doug.

> Regards,
> Guillaume.
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 

Douglas D. Nebert
Geospatial Data Clearinghouse Coordinator, Information Architect
FGDC/GSDI Secretariat   Phone: +1 703 648 4151  Fax: +1 703 648-5755


From mateusz at loskot.net  Mon May 21 14:50:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] aux files
In-Reply-To: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>
References: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>
Message-ID: <4651E9DB.3070902@loskot.net>

Malm Paul wrote:
> Hi,
> I'm looking for the format description of .aux files (think it is Erdas
> Imagine raster position files). Is ther anyone out there who can help me
> with this?

Paul,

I know .aux files used to store projection information for MrSID rasters
and PCI's raw .aux format. May be those two are the same formats, I
don't know.

Here you can find some details about format of PCI .aux format:

http://lists.maptools.org/pipermail/gdal-dev/2007-April/012717.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sjahputerao at missouri.edu  Mon May 21 15:51:30 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Dealing with RPC offsets and parameters in GDAL
Message-ID: <4651F842.7070900@missouri.edu>

Frank,

my colleagues and I were given a set of NITF images.  We found that the
pan and multispectral image of the same scene do not always
co-registered correctly.  When this happens, we found that some of the
RPC parameters in the two images, such as RPC_LONG_OFF, RPC_LONG_SCALE,
RPC_LAT_OFF, RPC_LAT_SCALE, RPC_HEIGHT_OFF, and RPC_HEIGHT_SCALE, hold
different values. 

We thought that we can correct the co-registration problem by *somehow*
matching the values of these RPC parameters in both pan and MS. 
Changing these parameters would be done by applying some RPC-based
transformation, correct?

Do you have any information or examples on how to deal with RPC-based
transformation in GDAL?

I have found some RPC related functions in GDAL, such as
GDALCreateRPCTransformer().  I am still tracing how to get the
GDALRPCInfo object needed by GDALCreateRPCTransformer().  I have found a
function called GDALExtractRPCInfo() in gdal_misc.cpp that takes a char
** , extracts the RPC parameters from the string array, and saves them
in a GDALRPCInfo object.  But I am still unclear how to obtain the
string array containing the RPC parameters from the image metadata of an
NITF image.

Any info on RPC related functions in GDAL you can share with me will be
very helpful.

Thank you.

Ozy

From Sjur.A.Kolberg at sintef.no  Mon May 21 17:06:55 2007
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Rotated lat/long coordinate systems
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02102E43@SINTEFXCH01.sintef.no>

 
Dear gdal-dev list,
 
Does anyone have any experience with data sets in non-projected (geographic) coordinate systems based on a rotated lat/long sphere? Such georeferencing seems to be common in local-area meteorological models. Can they be described by the existing geodetic models in GDAL?
 
Regards,
 
Sjur K :-)
 

Sjur Kolberg
SINTEF Energiforskning A/S
Sem S?lands vei 11
7465 Trondheim
tlf. 73 59 72 78
fax  73 59 72 50 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070521/787d6b7a/attachment.html
From rsheykhet at sanz.com  Mon May 21 19:31:41 2007
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] AAIGrid projection info
Message-ID: <ED3A48B9840E594890A2BC172D1194650BFABD8A@mailman.san.com>

Hi Frank/All,

 

I am looking at a potential bug in ESRI SRS transform for AAIGrid, and
just want to double check my assumptions.   Currently, for Projection
TRANSVERSE in file ogr_srs_esri.cpp the projection parameter order is
assumed as follows:

PARAM_2 -> Latitude

PARAM_3 -> Longitude

PARAM_1 -> Scale

PARAM_4 -> False Easting

PARAM_5 -> False Northing

 

In the file below, and several others like it, I see that PARAM_2 is
actually Longitude and PARAM_3 is Latitude. 

 

I am having difficulty locating any description for what a prj.adf file
should look like.  If this, indeed, looks like a bug, I will file it in
TRAC and attach a patch file.

 

======================== prj.adf ==========================

Projection    TRANSVERSE

Datum         NAD27

Spheroid      CLARKE1866

Units         METERS

Zunits        NO

Xshift        0.0

Yshift        0.0

Parameters    

1.0 /* scale factor at central meridian

-106 56  5.149215 /* longitude of central meridian

  39 33 45.40326 /* latitude of origin

0.0 /* false easting (meters)

0.0 /* false northing (meters)  

========================= end prj.adf =========================

Thanks,

 

Rostic Sheykhet

rsheykhet@sanz.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070521/5cb233ca/attachment.html
From paul.malm at saabgroup.com  Tue May 22 01:19:31 2007
From: paul.malm at saabgroup.com (Malm Paul)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] aux files
In-Reply-To: <4651E9DB.3070902@loskot.net>
References: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>
	<4651E9DB.3070902@loskot.net>
Message-ID: <9103513CAFE9554496DD17054510B6DFBDA501@corpappl002.corp.saab.se>

Mateusz, 
no, it was not quite what I was looking for. It is the Erdas Imagine
auxilary format (Leica) I'm looking for. It could be connected to any
raster file format and it is a binary file.
Leica will not tell me how to read this they, want me to buy their
toolkit. I think it is to much, just to position a raster file. Could I
read it out from the Gdal source code? If so which file?

Kind regards,
Paul

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: den 21 maj 2007 20:50
To: Malm Paul
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] aux files

Malm Paul wrote:
> Hi,
> I'm looking for the format description of .aux files (think it is 
> Erdas Imagine raster position files). Is ther anyone out there who can

> help me with this?

Paul,

I know .aux files used to store projection information for MrSID rasters
and PCI's raw .aux format. May be those two are the same formats, I
don't know.

Here you can find some details about format of PCI .aux format:

http://lists.maptools.org/pipermail/gdal-dev/2007-April/012717.html

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net


From daniel112b at gmail.com  Tue May 22 02:00:47 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] aux files
In-Reply-To: <9103513CAFE9554496DD17054510B6DFBDA501@corpappl002.corp.saab.se>
References: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>
	<4651E9DB.3070902@loskot.net>
	<9103513CAFE9554496DD17054510B6DFBDA501@corpappl002.corp.saab.se>
Message-ID: <962626470705212300m194d2705u9179d2f4af9407e6@mail.gmail.com>

The .aux file is a Hierarchical File Architecture format file, the
same as the .img files. Checkout this old post:

http://lists.maptools.org/pipermail/gdal-dev/2005-December/007426.html

Regards,
  Daniel

On 5/22/07, Malm Paul <paul.malm@saabgroup.com> wrote:
> Mateusz,
> no, it was not quite what I was looking for. It is the Erdas Imagine
> auxilary format (Leica) I'm looking for. It could be connected to any
> raster file format and it is a binary file.
> Leica will not tell me how to read this they, want me to buy their
> toolkit. I think it is to much, just to position a raster file. Could I
> read it out from the Gdal source code? If so which file?
>
> Kind regards,
> Paul
>
> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net]
> Sent: den 21 maj 2007 20:50
> To: Malm Paul
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] aux files
>
> Malm Paul wrote:
> > Hi,
> > I'm looking for the format description of .aux files (think it is
> > Erdas Imagine raster position files). Is ther anyone out there who can
>
> > help me with this?
>
> Paul,
>
> I know .aux files used to store projection information for MrSID rasters
> and PCI's raw .aux format. May be those two are the same formats, I
> don't know.
>
> Here you can find some details about format of PCI .aux format:
>
> http://lists.maptools.org/pipermail/gdal-dev/2007-April/012717.html
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From jmp at geosys.com  Tue May 22 03:44:22 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <f3b73b7d0705210345h6f3b7ac9v1166eb43475617dd@mail.gmail.com>
Message-ID: <000001c79c45$05fc8460$2201a8c0@pcjmp>

Hi,

I have the same problem where the latest gdal-svn-trunk-2007.05.09.

What are all the operations for enabled the GEOS support?

Thanks, Best Regards,

Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA



-----Message d'origine-----
De?: Tamas Szekeres [mailto:szekerest@gmail.com] 
Envoy??: lundi 21 mai 2007 12:46
??: Jean Michel PIERRET
Cc?: gdal-dev@lists.maptools.org
Objet?: Re: [Gdal-dev] Using GEOS in OGR C#

Hi,

It seems that the GEOS support is not actually enabled in your
project. In this case the Intersect method tests the overlapping of
the envelopes of the 2 geometries.

Are you sure the correct version of the dll-s have been loaded?

In the recent days I've changed the csharp bindings to link against
gdal14.dll instead of the static linking. The previous approach might
lead to various problems. Checkout the latest svn-trunk to rely on
these changes.

Best regards,

Tamas


2007/5/21, Jean Michel PIERRET <jmp@geosys.com>:
> Hi,
>
> I'm looking for someone who tries to use GEOS in the C# OGR.
>
> Thanks.
>
> Best Regards
>
> PIERRET Jean michel
>
>
----------------------------------------------------------------------------
>
> Hi,
>
> I try to use the OGR's library in Csharp and the GEOS support but I have 2
> problems. I'm using the "gdal-svn-trunk-2007.05.09".
>
> 1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains"
it
> turns over me an error "GEOS support not enabled". However I have
> uncommented the support GEOS in the file "nmake.opt" and the compilation
> return no error.
>
> GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
> GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib
>
> When I use on the same object the method "Intersect" it seems work.
>
> 2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".
>
> Best Regards
>
> PIERRET Jean michel
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From josegomez at gmx.net  Tue May 22 05:23:16 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] How to clean up gdal rasters in python?
Message-ID: <20070522092316.163380@gmx.net>

Hi!
I have a python program that reprojects a large number of large images. Often, it crashes with an out of memory error (GDAL 1.4.0, HDF driver on Linux/i386). I create many rasters, open them (with gdal.Open()), but assumed that Pythons Garbage Collector was looking after my memory. Before I delve deeper into the code, I'd like to know whether it is good practice to delete gdal handlers in Python. This is for old-gen python, but I wonder whether it has changed/will change for ngpython. The Python bit of the API tutorial does not mention cleaning up for Python...

Cheers!
Jose
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

From warmerdam at pobox.com  Tue May 22 09:06:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] How to clean up gdal rasters in python?
In-Reply-To: <20070522092316.163380@gmx.net>
References: <20070522092316.163380@gmx.net>
Message-ID: <4652EACC.8020705@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi! I have a python program that reprojects a large number of large images.
> Often, it crashes with an out of memory error (GDAL 1.4.0, HDF driver on
> Linux/i386). I create many rasters, open them (with gdal.Open()), but
> assumed that Pythons Garbage Collector was looking after my memory. Before I
> delve deeper into the code, I'd like to know whether it is good practice to
> delete gdal handlers in Python. This is for old-gen python, but I wonder
> whether it has changed/will change for ngpython. The Python bit of the API
> tutorial does not mention cleaning up for Python...

Jose,

Generally speaking the old and new python bindings properly clean up datasets
when there are no python references to them anymore.

It is possible you are suffering from bug 1485 which results in internal HDF
resources not being properly released for some datasets:

   http://trac.osgeo.org/gdal/ticket/1485

You could try out the very latest FWTools or build from the latest trunk or
1.4 branch source if you suspect that is the issue.

It is also possible that there are reference counting problems in the bindings
in some complex circumstances that may be impacting you.  If you can provide
a bug report sufficient for us to easily reproduce the problem we might be able
to dig into it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May 22 09:09:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] aux files
In-Reply-To: <9103513CAFE9554496DD17054510B6DFBDA501@corpappl002.corp.saab.se>
References: <9103513CAFE9554496DD17054510B6DFB979A9@corpappl002.corp.saab.se>
	<4651E9DB.3070902@loskot.net>
	<9103513CAFE9554496DD17054510B6DFBDA501@corpappl002.corp.saab.se>
Message-ID: <4652EB9C.3050708@pobox.com>

Malm Paul wrote:
> Mateusz, 
> no, it was not quite what I was looking for. It is the Erdas Imagine
> auxilary format (Leica) I'm looking for. It could be connected to any
> raster file format and it is a binary file.
> Leica will not tell me how to read this they, want me to buy their
> toolkit. I think it is to much, just to position a raster file. Could I
> read it out from the Gdal source code? If so which file?

Paul,

With some custom programming it is possible to produce .aux files with the
HFA code in gdal/frmts/hfa.  It can be fiddly work though.  Contact me off
list if you need to pursue this option.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmp at geosys.com  Tue May 22 09:11:55 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <f3b73b7d0705210345h6f3b7ac9v1166eb43475617dd@mail.gmail.com>
Message-ID: <000301c79c72$c5d56590$2201a8c0@pcjmp>

Hi,

I have the same problem with the latest gdal-svn-trunk-2007.05.21.

What are all the operations for enabled the GEOS support?

Thanks, Best Regards,

Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA



-----Message d'origine-----
De?: Tamas Szekeres [mailto:szekerest@gmail.com] 
Envoy??: lundi 21 mai 2007 12:46
??: Jean Michel PIERRET
Cc?: gdal-dev@lists.maptools.org
Objet?: Re: [Gdal-dev] Using GEOS in OGR C#

Hi,

It seems that the GEOS support is not actually enabled in your
project. In this case the Intersect method tests the overlapping of
the envelopes of the 2 geometries.

Are you sure the correct version of the dll-s have been loaded?

In the recent days I've changed the csharp bindings to link against
gdal14.dll instead of the static linking. The previous approach might
lead to various problems. Checkout the latest svn-trunk to rely on
these changes.

Best regards,

Tamas


2007/5/21, Jean Michel PIERRET <jmp@geosys.com>:
> Hi,
>
> I'm looking for someone who tries to use GEOS in the C# OGR.
>
> Thanks.
>
> Best Regards
>
> PIERRET Jean michel
>
>
----------------------------------------------------------------------------
>
> Hi,
>
> I try to use the OGR's library in Csharp and the GEOS support but I have 2
> problems. I'm using the "gdal-svn-trunk-2007.05.09".
>
> 1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains"
it
> turns over me an error "GEOS support not enabled". However I have
> uncommented the support GEOS in the file "nmake.opt" and the compilation
> return no error.
>
> GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
> GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib
>
> When I use on the same object the method "Intersect" it seems work.
>
> 2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".
>
> Best Regards
>
> PIERRET Jean michel
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From szekerest at gmail.com  Tue May 22 10:27:41 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:52 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <000001c79c45$05fc8460$2201a8c0@pcjmp>
References: <f3b73b7d0705210345h6f3b7ac9v1166eb43475617dd@mail.gmail.com>
	<000001c79c45$05fc8460$2201a8c0@pcjmp>
Message-ID: <f3b73b7d0705220727o7e45bc5fja8ca70e9fedeb836@mail.gmail.com>

Jean,

I've tested the trunk with the GEOS option and seems to be working for
me. I've added a new example (OGRGEOS.cs) to the trunk for testing the
geos support.

I continue to think you are using an incorrect version of the
gdal14.dll. Would you mind copying the compiled version of this dll
into you application directory? You might also run the ogrgeos.exe in
the swig/csharp directory (after copying gdal14.dll here).

Best regards,

Tamas



2007/5/22, Jean Michel PIERRET <jmp@geosys.com>:
> Hi,
>
> I have the same problem where the latest gdal-svn-trunk-2007.05.09.
>
> What are all the operations for enabled the GEOS support?
>
> Thanks, Best Regards,
>
> Jean-michel PIERRET - Poste 376
> Tel : +33 (0)5 62 47 80 76
> Mail : jmp@geosys.com
> GEOSYS SA
>
>
>
> -----Message d'origine-----
> De: Tamas Szekeres [mailto:szekerest@gmail.com]
> Envoy?: lundi 21 mai 2007 12:46
> ?: Jean Michel PIERRET
> Cc: gdal-dev@lists.maptools.org
> Objet: Re: [Gdal-dev] Using GEOS in OGR C#
>
> Hi,
>
> It seems that the GEOS support is not actually enabled in your
> project. In this case the Intersect method tests the overlapping of
> the envelopes of the 2 geometries.
>
> Are you sure the correct version of the dll-s have been loaded?
>
> In the recent days I've changed the csharp bindings to link against
> gdal14.dll instead of the static linking. The previous approach might
> lead to various problems. Checkout the latest svn-trunk to rely on
> these changes.
>
> Best regards,
>
> Tamas
>
>
> 2007/5/21, Jean Michel PIERRET <jmp@geosys.com>:
> > Hi,
> >
> > I'm looking for someone who tries to use GEOS in the C# OGR.
> >
> > Thanks.
> >
> > Best Regards
> >
> > PIERRET Jean michel
> >
> >
> ----------------------------------------------------------------------------
> >
> > Hi,
> >
> > I try to use the OGR's library in Csharp and the GEOS support but I have 2
> > problems. I'm using the "gdal-svn-trunk-2007.05.09".
> >
> > 1) With the objects "OSGEO.OGR.Geometry" when I use the method "Contains"
> it
> > turns over me an error "GEOS support not enabled". However I have
> > uncommented the support GEOS in the file "nmake.opt" and the compilation
> > return no error.
> >
> > GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
> > GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib
> >
> > When I use on the same object the method "Intersect" it seems work.
> >
> > 2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".
> >
> > Best Regards
> >
> > PIERRET Jean michel
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
>


From jmp at geosys.com  Tue May 22 11:12:32 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Using GEOS in OGR C#
In-Reply-To: <f3b73b7d0705220727o7e45bc5fja8ca70e9fedeb836@mail.gmail.com>
Message-ID: <000601c79c83$9f51b750$2201a8c0@pcjmp>

Hi,

It's seems ok now.

My Problem was not in the compil of gdal but in the compil of geos my
geos_c.dll was corrupt.

Apologize for any inconvenience

Best Regards.
 
Jean-michel PIERRET - Poste? 376
Tel : +33 (0)5 62 47 80 76
Mail : jmp@geosys.com
GEOSYS SA



-----Message d'origine-----
De?: Tamas Szekeres [mailto:szekerest@gmail.com] 
Envoy??: mardi 22 mai 2007 16:28
??: Jean Michel PIERRET
Cc?: gdal-dev@lists.maptools.org
Objet?: Re: RE : [Gdal-dev] Using GEOS in OGR C#

Jean,

I've tested the trunk with the GEOS option and seems to be working for
me. I've added a new example (OGRGEOS.cs) to the trunk for testing the
geos support.

I continue to think you are using an incorrect version of the
gdal14.dll. Would you mind copying the compiled version of this dll
into you application directory? You might also run the ogrgeos.exe in
the swig/csharp directory (after copying gdal14.dll here).

Best regards,

Tamas



2007/5/22, Jean Michel PIERRET <jmp@geosys.com>:
> Hi,
>
> I have the same problem where the latest gdal-svn-trunk-2007.05.09.
>
> What are all the operations for enabled the GEOS support?
>
> Thanks, Best Regards,
>
> Jean-michel PIERRET - Poste 376
> Tel : +33 (0)5 62 47 80 76
> Mail : jmp@geosys.com
> GEOSYS SA
>
>
>
> -----Message d'origine-----
> De: Tamas Szekeres [mailto:szekerest@gmail.com]
> Envoy?: lundi 21 mai 2007 12:46
> ?: Jean Michel PIERRET
> Cc: gdal-dev@lists.maptools.org
> Objet: Re: [Gdal-dev] Using GEOS in OGR C#
>
> Hi,
>
> It seems that the GEOS support is not actually enabled in your
> project. In this case the Intersect method tests the overlapping of
> the envelopes of the 2 geometries.
>
> Are you sure the correct version of the dll-s have been loaded?
>
> In the recent days I've changed the csharp bindings to link against
> gdal14.dll instead of the static linking. The previous approach might
> lead to various problems. Checkout the latest svn-trunk to rely on
> these changes.
>
> Best regards,
>
> Tamas
>
>
> 2007/5/21, Jean Michel PIERRET <jmp@geosys.com>:
> > Hi,
> >
> > I'm looking for someone who tries to use GEOS in the C# OGR.
> >
> > Thanks.
> >
> > Best Regards
> >
> > PIERRET Jean michel
> >
> >
>
----------------------------------------------------------------------------
> >
> > Hi,
> >
> > I try to use the OGR's library in Csharp and the GEOS support but I have
2
> > problems. I'm using the "gdal-svn-trunk-2007.05.09".
> >
> > 1) With the objects "OSGEO.OGR.Geometry" when I use the method
"Contains"
> it
> > turns over me an error "GEOS support not enabled". However I have
> > uncommented the support GEOS in the file "nmake.opt" and the compilation
> > return no error.
> >
> > GEOS_CFLAGS = -IE:\Mapserver\geos-2.2.3\source/capi -DHAVE_GEOS
> > GEOS_LIB     = E:\Mapserver\geos-2.2.3\source/geos_c_i.lib
> >
> > When I use on the same object the method "Intersect" it seems work.
> >
> > 2) Can I use in csharp this method: "Ogr.CreateGeometryFromWkt".
> >
> > Best Regards
> >
> > PIERRET Jean michel
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
>



From warmerdam at pobox.com  Tue May 22 12:05:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] AAIGrid projection info
In-Reply-To: <ED3A48B9840E594890A2BC172D1194650BFABD8A@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D1194650BFABD8A@mailman.san.com>
Message-ID: <465314D2.2090101@pobox.com>

Sheykhet, Rostic wrote:
> Hi Frank/All,
> 
>  
> 
> I am looking at a potential bug in ESRI SRS transform for AAIGrid, and 
> just want to double check my assumptions.   Currently, for Projection 
> TRANSVERSE in file ogr_srs_esri.cpp the projection parameter order is 
> assumed as follows:
> 
> PARAM_2 -> Latitude
> 
> PARAM_3 -> Longitude
> 
> PARAM_1 -> Scale
> 
> PARAM_4 -> False Easting
> 
> PARAM_5 -> False Northing
> 
>  
> 
> In the file below, and several others like it, I see that PARAM_2 is 
> actually Longitude and PARAM_3 is Latitude.
...

Rostic,

Your analysis is dead on.  I have filed this as a bug, and corrected it
in trunk and 1.4 branch as well as adding a test for this format.

   http://trac.osgeo.org/gdal/ticket/1649

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May 22 12:27:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Dealing with RPC offsets and parameters in GDAL
In-Reply-To: <4651F842.7070900@missouri.edu>
References: <4651F842.7070900@missouri.edu>
Message-ID: <46531A03.4080905@pobox.com>

Ozy Sjahputera wrote:
> my colleagues and I were given a set of NITF images.  We found that the
> pan and multispectral image of the same scene do not always
> co-registered correctly.  When this happens, we found that some of the
> RPC parameters in the two images, such as RPC_LONG_OFF, RPC_LONG_SCALE,
> RPC_LAT_OFF, RPC_LAT_SCALE, RPC_HEIGHT_OFF, and RPC_HEIGHT_SCALE, hold
> different values. 
> 
> We thought that we can correct the co-registration problem by *somehow*
> matching the values of these RPC parameters in both pan and MS. 
> Changing these parameters would be done by applying some RPC-based
> transformation, correct?
> 
> Do you have any information or examples on how to deal with RPC-based
> transformation in GDAL?
> 
> I have found some RPC related functions in GDAL, such as
> GDALCreateRPCTransformer().  I am still tracing how to get the
> GDALRPCInfo object needed by GDALCreateRPCTransformer().  I have found a
> function called GDALExtractRPCInfo() in gdal_misc.cpp that takes a char
> ** , extracts the RPC parameters from the string array, and saves them
> in a GDALRPCInfo object.  But I am still unclear how to obtain the
> string array containing the RPC parameters from the image metadata of an
> NITF image.
> 
> Any info on RPC related functions in GDAL you can share with me will be
> very helpful.

Ozy,

I imagine you are on the right track, but I don't know how practical it
will be to establish correspondance.

The char ** argument to GDALExtractRPCInfo() is the metadata list containing
the parameters.  That is, the list you would get back from a call to
GDALGetMetadata() on the dataset.

Note that the GDAL RPC Transformer does *not* use a variable elevation
model, and should be considered suitable only for gross geolocation, not
the precision geolocation for which RPCs were intended.

Loosely speaking, GDAL does a good job of reading RPC parameters, but
it does not offer good tools to exploit them.  They were really implemented
for applications that had their own higher level RPC algorithms.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May 22 12:36:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <46519D91.2080206@usgs.gov>
References: <464DD3F9.8080003@geosys.com>
	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>
	<464DF1C2.3070603@gov.yk.ca>
	<ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
	<46519D91.2080206@usgs.gov>
Message-ID: <46531BF9.5050300@pobox.com>

Doug Nebert wrote:
> In trying to use the gdal_translate on a non-standard projection, the 
> hardest part I found was to determine what the allowable syntax and 
> meaning of the PROJ.4 parameters were (i.e. +lat_0=70, +ellps=WGS84) as 
> an argument to a_srs. I figured it out by googling some examples, but 
> there is no clean list that I could find. If there is a list of such 
> parameters, it should be linked from the gdal_translate page -- and the 
> general GDAL page for that matter -- with the appropriate support for 
> each projection. The GeoTIFF projections transform list is a great 
> start, but still does not include the PROJ.4 syntax for each projection 
> parameter. http://www.remotesensing.org/geotiff/proj_list/

Doug,

Unfortunately, there is no concise PROJ.4 reference listing parameters
for all projections.  This is a task beyond my endurance to take on...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue May 22 14:03:14 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
References: <464DD3F9.8080003@geosys.com>	
	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>	
	<464DF1C2.3070603@gov.yk.ca>
	<ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
Message-ID: <46533062.8010908@gov.yk.ca>

re:
>     http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate
> 
> Thanks for this page, but I think it needs improvements. Its contents 
> are quite redundant with the official doc of gdal_translate.
> I think of two possibilities :
> 1. Modify official doc of gdal_translate to get this point more clear.

Yes it would be cleaner to add that to the official docs, however I 
don't have the ability to do that.  Now that it is written in the wiki 
though perhaps someone with write access to the official docs will 
insert it. :)


> 2. Transform this wiki page in a "HOWTO add geographic references 
> (projection, coordinates) to an image using gdal_translate" with simple 
> examples and explanations of commands used. This way the page would 
> become a good add-on to the official doc.

I enthusiasticly encourage anyone/everyone to do exactly that! It is a 
wiki after all (free osgeo login's at 
http://www.osgeo.org/osgeo_userid/) . I certainly plan to do so myself 
as those occasions arise in my work. :)


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Tue May 22 14:27:32 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Use of gdalwarp/translate utility
In-Reply-To: <46519D91.2080206@usgs.gov>
References: <464DD3F9.8080003@geosys.com>	<ddc797c30705180936p4a1ea4f1ud22fabc858755378@mail.gmail.com>	<464DF1C2.3070603@gov.yk.ca>	<ddc797c30705210036q96b73calc2a5e9aa64e7cb2b@mail.gmail.com>
	<46519D91.2080206@usgs.gov>
Message-ID: <46533614.60504@gov.yk.ca>

> each projection. The GeoTIFF projections transform list is a great 
> start, but still does not include the PROJ.4 syntax for each projection 
> parameter. http://www.remotesensing.org/geotiff/proj_list/

Thanks Doug, that is a helpful resource. Refine the following at will if 
it needs clarifying:
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalTranslate#SyntaxforPROJ.4parameters

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From sjahputerao at missouri.edu  Tue May 22 15:33:56 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Dealing with RPC offsets and parameters in GDAL
In-Reply-To: <46531A03.4080905@pobox.com>
References: <4651F842.7070900@missouri.edu> <46531A03.4080905@pobox.com>
Message-ID: <465345A4.5060103@missouri.edu>

Thanks for the info, Frank.

I was hoping we can solve this using GDAL.  We are given a bunch of 1B
level images .... they are ortho-ready, but some rectification need to
be done to correctly co-register the Pan and MS before we can create the
pansharpened MS. 

Ozy

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> my colleagues and I were given a set of NITF images.  We found that the
>> pan and multispectral image of the same scene do not always
>> co-registered correctly.  When this happens, we found that some of the
>> RPC parameters in the two images, such as RPC_LONG_OFF, RPC_LONG_SCALE,
>> RPC_LAT_OFF, RPC_LAT_SCALE, RPC_HEIGHT_OFF, and RPC_HEIGHT_SCALE, hold
>> different values.
>> We thought that we can correct the co-registration problem by *somehow*
>> matching the values of these RPC parameters in both pan and MS.
>> Changing these parameters would be done by applying some RPC-based
>> transformation, correct?
>>
>> Do you have any information or examples on how to deal with RPC-based
>> transformation in GDAL?
>>
>> I have found some RPC related functions in GDAL, such as
>> GDALCreateRPCTransformer().  I am still tracing how to get the
>> GDALRPCInfo object needed by GDALCreateRPCTransformer().  I have found a
>> function called GDALExtractRPCInfo() in gdal_misc.cpp that takes a char
>> ** , extracts the RPC parameters from the string array, and saves them
>> in a GDALRPCInfo object.  But I am still unclear how to obtain the
>> string array containing the RPC parameters from the image metadata of an
>> NITF image.
>>
>> Any info on RPC related functions in GDAL you can share with me will be
>> very helpful.
>
> Ozy,
>
> I imagine you are on the right track, but I don't know how practical it
> will be to establish correspondance.
>
> The char ** argument to GDALExtractRPCInfo() is the metadata list
> containing
> the parameters.  That is, the list you would get back from a call to
> GDALGetMetadata() on the dataset.
>
> Note that the GDAL RPC Transformer does *not* use a variable elevation
> model, and should be considered suitable only for gross geolocation, not
> the precision geolocation for which RPCs were intended.
>
> Loosely speaking, GDAL does a good job of reading RPC parameters, but
> it does not offer good tools to exploit them.  They were really
> implemented
> for applications that had their own higher level RPC algorithms.
>
> Best regards,


From jcleary at email.unc.edu  Tue May 22 16:24:56 2007
From: jcleary at email.unc.edu (Jesse Cleary)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR2OGR GML coordinate reversal
Message-ID: <46535198.8080007@email.unc.edu>

Hi folks

I'm trying to convert a GML file (3.1 I think) to a shapefile using 
ogr2ogr (GDAL 1.3.2.0).  The conversion works and the attributes 
translate nicely, but the destination file's point coordinates are 
reversed from the source file.  The source GML file uses the following 
nomenclature:

                <gml:Point>
                    <gml:pos>lat lon</gml:pos>
                </gml:Point>

OGR seems to expect the order to be lon then lat.  Is there any way to 
tell ogr2ogr how to reverse the expected order of coordinates inside 
these tags?  Or maybe my source file doesn't meet the GML spec and 
should be changed to lon then lat?  Thanks...


Jesse


-- 
Jesse Cleary				
Department of Marine Sciences	
UNC Chapel Hill

334 Chapman Hall
(919) 962-4987 

jcleary@email.unc.edu











From warmerdam at pobox.com  Tue May 22 17:01:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR2OGR GML coordinate reversal
In-Reply-To: <46535198.8080007@email.unc.edu>
References: <46535198.8080007@email.unc.edu>
Message-ID: <46535A20.1000103@pobox.com>

Jesse Cleary wrote:
> Hi folks
> 
> I'm trying to convert a GML file (3.1 I think) to a shapefile using 
> ogr2ogr (GDAL 1.3.2.0).  The conversion works and the attributes 
> translate nicely, but the destination file's point coordinates are 
> reversed from the source file.  The source GML file uses the following 
> nomenclature:
> 
>                <gml:Point>
>                    <gml:pos>lat lon</gml:pos>
>                </gml:Point>
> 
> OGR seems to expect the order to be lon then lat.  Is there any way to 
> tell ogr2ogr how to reverse the expected order of coordinates inside 
> these tags?  Or maybe my source file doesn't meet the GML spec and 
> should be changed to lon then lat?  Thanks...

Jesse,

Unfortunately, there is no easy way to fix this problem.  There are
legitimate ways of declaring coordinate order in GML but OGR ignores them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue May 22 17:01:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR2OGR GML coordinate reversal
In-Reply-To: <46535198.8080007@email.unc.edu>
References: <46535198.8080007@email.unc.edu>
Message-ID: <46535A36.4000007@loskot.net>

Jesse Cleary wrote:
> Hi folks
> 
> I'm trying to convert a GML file (3.1 I think)

OGR GML is mostly compatible with GML 2, but there are some of GML 3
features supported.

> to a shapefile using
> ogr2ogr (GDAL 1.3.2.0).  The conversion works and the attributes
> translate nicely, but the destination file's point coordinates are
> reversed from the source file.  The source GML file uses the following
> nomenclature:
> 
>                <gml:Point>
>                    <gml:pos>lat lon</gml:pos>
>                </gml:Point>
> 
> OGR seems to expect the order to be lon then lat.

Yes, OGR maps lat/lon to X/Y, what results in reversed order
becasue X is usually lon and Y is lat.

In GML, standard cartographic order is used, latitude/longitude.
If dealing projected coordinates system, the easting-northing order is
used. So, there are many possible standards, and OGR ignores them in
some way, reading first coordiante as X and second as Y,
as in cartesian coordinate system.

Frank,

May be GML driver should be more specific and less ignorant here,
and parse coordiantes in  lat-lon order ?

> Is there any way to
> tell ogr2ogr how to reverse the expected order of coordinates inside
> these tags?

No, there isn't.

> Or maybe my source file doesn't meet the GML spec and
> should be changed to lon then lat?  Thanks...

I believe your GML file is correct according GML.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue May 22 17:10:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR2OGR GML coordinate reversal
Message-ID: <50766.84.10.81.30.1179868206.squirrel@loskot.net>

Jesse Cleary wrote:
> Hi folks
>
> I'm trying to convert a GML file (3.1 I think)

OGR GML is mostly compatible with GML 2, but there are some of GML 3
features supported.

> to a shapefile using
> ogr2ogr (GDAL 1.3.2.0).  The conversion works and the attributes
> translate nicely, but the destination file's point coordinates are
> reversed from the source file.  The source GML file uses the following
> nomenclature:
>
>                <gml:Point>
>                    <gml:pos>lat lon</gml:pos>
>                </gml:Point>
>
> OGR seems to expect the order to be lon then lat.

Yes, OGR maps lat/lon to X/Y, what results in reversed order
becasue X is usually lon and Y is lat.

In GML, standard cartographic order is used, latitude/longitude.
If dealing projected coordinates system, the easting-northing order is
used. So, there are many possible standards, and OGR ignores them in
some way, reading first coordiante as X and second as Y,
as in cartesian coordinate system.

Frank,

May be GML driver should be more specific and less ignorant here,
and parse coordiantes in  lat-lon order ?

> Is there any way to
> tell ogr2ogr how to reverse the expected order of coordinates inside
> these tags?

No, there isn't.

> Or maybe my source file doesn't meet the GML spec and
> should be changed to lon then lat?  Thanks...

I believe your GML file is correct according GML.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From pagameba at gmail.com  Tue May 22 21:18:29 2007
From: pagameba at gmail.com (Paul Spencer)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] creating tiles from rasters using gdal
In-Reply-To: <4649F3A4.80301@pobox.com>
References: <1279B630-2F84-4EED-A6A6-A0BC722EF0EC@dmsolutions.ca>
	<4649F3A4.80301@pobox.com>
Message-ID: <4232E606-8ECC-4C7A-9065-EE0D3B8E131C@gmail.com>

Thanks Frank.  One of the images that I tried was a tiff but I think  
it must have been the PNGs that were poor.  When Assefa tried it by  
converting to a tiled tiff first, performance was substantially better.

Cheers
Paul

On 15-May-07, at 1:53 PM, Frank Warmerdam wrote:

> Paul Spencer wrote:
>> I need to turn some rasters (png and tiff) into tiles for use in a  
>> tiled map application.  For various reasons, these rasters are not  
>> georeferenced and I don't need them to be.
> ...
>> This works perfectly but becomes increasingly slow - I'm  
>> processing 6804 tiles out of a raster that is 21504 x 20736  
>> pixels, the first 100 or so were fast but now it is down to 3-4  
>> secs per tile (I'm at 4200 tiles so far).
>> How can I improve performance?  Is there an existing utility that  
>> will do something like this or do I need to roll my own version of  
>> gdal_translate?
>
> Paul,
>
> If the source raster is PNG then the problem is likely due to the file
> having to be decompressed from the beginning each time you process  
> a tile.
> For the first row of tiles this isn't bad, but the further you go  
> down the
> big file, the more of the png has to be decompressed on each run.
>
> If you can, just reprocess the big images into internally tiled  
> TIFFs once
> before running the tiling script.
>
> Alternatively, you could accomplish the tiling using a script that  
> keeps the
> input file open.  This would help because the in memory caching  
> would prefer
> a lot of unnecessary re-decompressing.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>

+-----------------------------------------------------------------+
|Paul Spencer                          pspencer@dmsolutions.ca    |
+-----------------------------------------------------------------+
|Chief Technology Officer                                         |
|DM Solutions Group Inc                http://www.dmsolutions.ca/ |
+-----------------------------------------------------------------+






From myardbenoit at gmail.com  Wed May 23 04:46:58 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] [OGR] Parsing GML using XSLT
Message-ID: <6fb81fc70705230146r63124d35m9705678de9e1c27a@mail.gmail.com>

Hi list,

I guess I'm missing something but I haven't been able to successfully
parse OGR's GML with XSLT.

Sample OGR/GML file:

<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://ogr.maptools.org/lightnings.xsd"
     xmlns:ogr="http://ogr.maptools.org/"
     xmlns:gml="http://www.opengis.net/gml">
  <gml:boundedBy>
    <gml:Box>
      <gml:coord><gml:X>366874</gml:X><gml:Y>2130603</gml:Y></gml:coord>
      <gml:coord><gml:X>387709</gml:X><gml:Y>2166975</gml:Y></gml:coord>
    </gml:Box>
  </gml:boundedBy>
  <gml:featureMember>
    <ogr:lightning fid="F0">
      <ogr:geometryProperty><gml:Point><gml:coordinates>371000,2
149000</gml:coordinates></gml:Point></ogr:geometryProperty>
      <ogr:rowid>42</ogr:rowid>
      <ogr:date>2007/01/21 01:16:45</ogr:date>
      <ogr:nbstrokes>16</ogr:nbstrokes>
      <ogr:amplitude>-1337</ogr:amplitude>
    </ogr:lightning>

Sample XSL file:

<?xml version="1.0"?>
<xsl:stylesheet version="1.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:gml="http://www.opengis.net/gml"
        xmlns:ogr="http://gdal.velocet.ca/ogr"
        xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xsl:output method="text" />

<xsl:template match="ogr:lightning">
  <xsl:value-of select="@fid" />
</xsl:template>

</xsl:stylesheet>

It seems to be related with the ogr namespace since the gml namespace
doesn't cause any problem. Any hints ?

Thanks.

-- 
Benoit Myard

From Tom.Kralidis at ec.gc.ca  Wed May 23 08:21:54 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] [OGR] Parsing GML using XSLT
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30E66@ecnwri1.ontario.int.ec.gc.ca>


> Hi list,
> 
> I guess I'm missing something but I haven't been able to 
> successfully parse OGR's GML with XSLT.
> 
> Sample OGR/GML file:
> 
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>      xsi:schemaLocation="http://ogr.maptools.org/lightnings.xsd"
>      xmlns:ogr="http://ogr.maptools.org/"
>      xmlns:gml="http://www.opengis.net/gml">
>   <gml:boundedBy>
>     <gml:Box>
>       
> <gml:coord><gml:X>366874</gml:X><gml:Y>2130603</gml:Y></gml:coord>
>       
> <gml:coord><gml:X>387709</gml:X><gml:Y>2166975</gml:Y></gml:coord>
>     </gml:Box>
>   </gml:boundedBy>
>   <gml:featureMember>
>     <ogr:lightning fid="F0">
>       <ogr:geometryProperty><gml:Point><gml:coordinates>371000,2
> 149000</gml:coordinates></gml:Point></ogr:geometryProperty>
>       <ogr:rowid>42</ogr:rowid>
>       <ogr:date>2007/01/21 01:16:45</ogr:date>
>       <ogr:nbstrokes>16</ogr:nbstrokes>
>       <ogr:amplitude>-1337</ogr:amplitude>
>     </ogr:lightning>
>

The XML document above is not well formed.  You need to close the
gml:featureMember and ogr:FeatureCollection tags.  Furthermore, the root
xsi:schemaLocation should be an attribute with two (space separated)
values: the namespace, and the location (relative of URL) of the XML
Schema document.

The second issue won't prevent you from applying an XSLT transformation,
though.
 
> Sample XSL file:
> 
> <?xml version="1.0"?>
> <xsl:stylesheet version="1.0"
>         xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>         xmlns:gml="http://www.opengis.net/gml"
>         xmlns:ogr="http://gdal.velocet.ca/ogr"
>         xmlns:xs="http://www.w3.org/2001/XMLSchema">
> 
> <xsl:output method="text" />
> 
> <xsl:template match="ogr:lightning">
>   <xsl:value-of select="@fid" />
> </xsl:template>
> 
> </xsl:stylesheet>
> 
> It seems to be related with the ogr namespace since the gml 
> namespace doesn't cause any problem. Any hints ?

The ogr namespace defined in the GML document and the XML Schema differ;
they must be identical.

If I apply these changes to the above documents and test with something
like xsltproc, things work as expected.

Hope this helps.

..Tom





From Brian.Hershey at nielsen.com  Wed May 23 09:39:44 2007
From: Brian.Hershey at nielsen.com (Hershey, Brian)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ogr2ogr new user - converting shape to tab
Message-ID: <C2AEB54F26AA034888B9F3BF7A8B1594046540E2@vnu001schmsx01.enterprisenet.org>

I'm trying to convert an ESRI shape file of Canada provinces to MapInfo
tab format using ogr2ogr from the FWTools shell.  The shape file is
unprojected Long/Lat format.
 
When I try this comand line...
 
ogr2ogr -f "MapInfo File" -nlt GEOMETRY province.tab province.shp
 
...  the resulting tab file is one forth the shape file size and very
low precision.  When zooming in other than full extent, the edges are
very blocking and some not conected.
 
I also tried...
 
ogr2ogr -f "MapInfo File" -a_srs "WGS84" province.tab province.shp
 
... with the same results.
 
Any help would be greatly appreciated!
 
Thank you,
Brian
Lancaster, PA, USA
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070523/9e0fb598/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Wed May 23 13:15:54 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] NITF images RPC extraction
Message-ID: <2E58C246F17003499C141D334794D049027682CB@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

gdal_translate can convert NITF images to GTiff format.
But the built-in RPC coefficients are lost.

Is there a utility or gdal python code that extracts the RPC
coefficients and saves as a file?

Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070523/b75d1507/attachment.html
From warmerdam at pobox.com  Wed May 23 14:54:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] NITF images RPC extraction
In-Reply-To: <2E58C246F17003499C141D334794D049027682CB@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049027682CB@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <46548E03.4080907@pobox.com>

Gong, Shawn (Contractor) wrote:
> Hi list,
> 
> gdal_translate can convert NITF images to GTiff format.
> 
> But the built-in RPC coefficients are lost.
> 
> Is there a utility or gdal python code that extracts the RPC 
> coefficients and saves as a file?

Shawn,

gdalinfo should report them as metadata that can be cut and paste.
A translation to GeoTIFF *should* also preserve them in the metadata
of the GeoTIFF.  So I'm surprised to hear they are lost.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed May 23 17:34:02 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] IMAGE_STRUCTURE metadata - rfc discussion
In-Reply-To: <464D008A.7040209@pobox.com>
References: <464D008A.7040209@pobox.com>
Message-ID: <f3b73b7d0705231434w37580061q342761b5c365fec0@mail.gmail.com>

Frank,

I suppose that the silence on this thread denotes the implicit agreement  :-)

I also support this RFC, changing the layout of the metadata structure
not always require an RFC to have, since it might be internal to a
particular dataset type. In this particular case, however, a fair
amount of the drivers are affected for the convergence of the
interpretation. Shouldn't we pull any of the values as a separate
property of the dataset and the band if it is widely used?


Best regards,

Tamas


2007/5/18, Frank Warmerdam <warmerdam@pobox.com>:
>
> Folks,
>
> I've started drafting an RFC to formalize handling of metadata about
> image structure in the IMAGE_STRUCTURE domain.  It is at:
>
>    http://trac.osgeo.org/gdal/wiki/rfc14_imagestructure
>
> My concrete needs to a mechanism to handle signed 1-byte data, and to
> broaden use of NBITS, but I thought this was a good time to iron out a
> few other things that have been handled informally, or not at all.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From Shawn.Gong at drdc-rddc.gc.ca  Wed May 23 17:40:56 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] gdal formats
Message-ID: <2E58C246F17003499C141D334794D049027682D0@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi List,

Questions for gdal 1.4.0 on Linux

openev.sourceforge.net's Building gdal for Linux/Unix suggests that:
configure --with-libz=internal --with-png=internal
--with-libtiff=internal --with-geotiff=internal

The gdal/frmts/ contents include png/gtiff/libtiff
1) There is no libz under gdal/frmts/, but zlib instead.  Is zlib=libz?

2) Since I have installed zlib/jpeg, I should set them as external,
right?

3) The gdal/frmts/ contents also include hdf4/hdf5/jpeg2000
Doest it mean that I can use these internal libraries? I thought that
HDF4/5 needs to be downloaded from HDF group.

4) Assume that internal hdf4/hdf5 support are ok, the followings lines
in GDALmake.opt need to be changed to:
	# HDF4 Support.
	HAVE_HDF5     = yes
	HDF4_INCLUDE  =  -I$(frmts/hdf4)

	# HDF5 Support.
	HAVE_HDF5     = yes
	HDF5_INCLUDE  =  -I$(frmts/hdf5)
Is this right?  Do I need to add -L flags?

5) what about jpeg2000, do I need to download JasPer?  Or 
	# JPEG-2000 Support via JasPer library.
	HAVE_JASPER     = yes
	JASPER_INCLUDE  = -I$(frmts/jpeg2000)

Do I need to change proj4 setting?
	PROJ_STATIC	=	no


Thanks,
Shawn



From warmerdam at pobox.com  Wed May 23 19:31:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] gdal formats
In-Reply-To: <2E58C246F17003499C141D334794D049027682D0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049027682D0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4654CEDA.2030205@pobox.com>

Gong, Shawn (Contractor) wrote:
> The gdal/frmts/ contents include png/gtiff/libtiff
> 1) There is no libz under gdal/frmts/, but zlib instead.  Is zlib=libz?

Shawn,

Yes, zlib == libz.

> 2) Since I have installed zlib/jpeg, I should set them as external,
> right?

You can, and there is likely no harm in doing so.

> 3) The gdal/frmts/ contents also include hdf4/hdf5/jpeg2000
> Doest it mean that I can use these internal libraries? I thought that
> HDF4/5 needs to be downloaded from HDF group.

hdf4, hdf5 and jpeg2000 all require external support libraries.

> 4) Assume that internal hdf4/hdf5 support are ok, the followings lines
> in GDALmake.opt need to be changed to:
> 	# HDF4 Support.
> 	HAVE_HDF5     = yes
> 	HDF4_INCLUDE  =  -I$(frmts/hdf4)
> 
> 	# HDF5 Support.
> 	HAVE_HDF5     = yes
> 	HDF5_INCLUDE  =  -I$(frmts/hdf5)
> Is this right?  Do I need to add -L flags?

No.  I'd suggest you configure to use the external libraries.  If
that doesn't work you can fiddle with the GDALmake.opt manually.

> 5) what about jpeg2000, do I need to download JasPer?  Or 
> 	# JPEG-2000 Support via JasPer library.
> 	HAVE_JASPER     = yes
> 	JASPER_INCLUDE  = -I$(frmts/jpeg2000)

Yes

> Do I need to change proj4 setting?
> 	PROJ_STATIC	=	no

This can normally be left as "no".  GDAL will load libproj.so at
runtime if it finds it.  While arguably this was a bizarre approach,
it was done to reduce the number of GDAL build time dependencies.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From myardbenoit at gmail.com  Thu May 24 04:55:58 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] [OGR] Parsing GML using XSLT
In-Reply-To: <6fb81fc70705240120s377c53ddj8dca5476c7717aa@mail.gmail.com>
References: <2576812186CDD411BF1500508B6DCE9511B30E66@ecnwri1.ontario.int.ec.gc.ca>
	<6fb81fc70705240120s377c53ddj8dca5476c7717aa@mail.gmail.com>
Message-ID: <6fb81fc70705240155wbd1ef6dx6a52477382ab5b41@mail.gmail.com>

On 23/05/07, Kralidis,Tom [Burlington] <Tom.Kralidis@ec.gc.ca> wrote:
> The XML document above is not well formed.  You need to close the
> gml:featureMember and ogr:FeatureCollection tags.

Obviously.This was only an excerpt of the actual XML file. I should
have properly closed the tags so that it could make it through a
parser. My bad.

> Furthermore, the root xsi:schemaLocation should be an attribute with
> two (space separated) values: the namespace, and the location (relative
> of URL) of the XML Schema document.

Ooooh, yes. I needed to refresh my XML knowledge anyway :). Thanks for that!

There's probably something wrong in OGR then, because the document was
generated by ogr2ogr.

> The ogr namespace defined in the GML document and the XML Schema differ;
> they must be identical.
>
> If I apply these changes to the above documents and test with something
> like xsltproc, things work as expected.

Looks like I should refresh my XSL knowledge as well !

> Hope this helps.

It did! Thanks a lot.

PS: Tom, sorry for the direct-reply.

-- 
Benoit Myard

From candalt at online.no  Thu May 24 08:41:07 2007
From: candalt at online.no (=?iso-8859-1?Q?Sture_Dings=F8yr?=)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OGR2OGR WKT MSSQL
Message-ID: <21112210.1180010467461.JavaMail.adm-moff@moffice3.nsc.no>

Hi!!

Have some simple linestringdata (WKT) saved in an MS SQL table. I use these in an Mapserver application (reading via OGR).

But i noticed that some of my records just wont show in my map, so i used OGR2OGR to export data from the MS SQL table to a ESRI SHapefile.

What happens is that most of my records are OK in the OGR2OGR dump...but some records are just displayed as "NullShapes" (using the shpdump tool) e.g:

Shape:389 (NullShape)  nVertices=0, nParts=0
  Bounds:(       0.000,       0.000, 0, 0)
      to (       0.000,       0.000, 0, 0)

The "problem" records are not any more "complicated" than any of the other records in my dataset. Here is an example:

LINESTRING(12.08215200000000100000 63.86936800000000100000,12.07480500000000000000 63.88801300000000100000,12.06554500000000000000 63.89666299999999700000,12.04424800000000000000 63.91947499999999800000,12.00620500000000000000 63.94377200000000300000,11.98011700000000000000 63.95999299999999700000,11.99817799999999900000 63.98335999999999800000,12.00431700000000000000 63.99201200000000300000,12.10164000000000000000 64.05365000000000500000,12.13236000000000000000 64.06338200000000400000,12.17374200000000100000 64.07348799999999800000,12.18377699999999900000 64.07448800000000200000,12.18374500000000000000 64.07431499999999900000,12.18355200000000100000 64.07441199999999500000,12.18407200000000000000 64.07432000000000000000,12.18895700000000000000 64.07544000000000000000,12.31264500000000000000 64.10805700000000200000,12.32343300000000000000 64.11144799999999600000,12.32346199999999900000 64.11141800000000000000,12.32546200000000000000 64.11242199999999500000,12.39786200000000000000 64.13625700000000100000)

Any idea why some (very few) records in my MS SQL table is not possible to dump to shapefile via OGR2OGR?

All help appriciated :-)

Cheers
Sture
From cdavilam at jemila.jazztel.es  Thu May 24 12:00:27 2007
From: cdavilam at jemila.jazztel.es (=?ISO-8859-1?Q?Carlos_D=E1vila?=)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem building gdal .deb packages
Message-ID: <4655B69B.4040807@jemila.jazztel.es>

Hello
I'm trying to build gdal .deb packages from source with ecw support. I 
have modified /debian/rules file as follows:
...
configure: configure-stamp
--with-ecw=ARG Include ECW support (ARG=ECW SDK Path, yes or no)
configure-stamp: patch-stamp
...

I get next error:
dh_installdeb
dh_shlibdeps -L libgdal1-1.3.2 -l debian/libgdal1-1.3.2/usr/lib
dpkg-shlibdeps: warning: could not find any packages for libNCSEcw.so.0
dpkg-shlibdeps: warning: unable to find dependency information for 
shared library libNCSEcw (soname 0, path libNCSEcw.so.0, dependency 
field Depends)
dpkg-shlibdeps: warning: could not find any packages for libNCSCnet.so.0
dpkg-shlibdeps: warning: unable to find dependency information for 
shared library libNCSCnet (soname 0, path libNCSCnet.so.0, dependency 
field Depends)
dpkg-shlibdeps: warning: could not find any packages for libNCSUtil.so.0
dpkg-shlibdeps: warning: unable to find dependency information for 
shared library libNCSUtil (soname 0, path libNCSUtil.so.0, dependency 
field Depends)
objdump: /lib64/libpthread.so.0: File format not recognized
dpkg-shlibdeps: failure: objdump on `/lib64/libpthread.so.0' gave error 
exit status 1
dh_shlibdeps: command returned error code 256
make[1]: *** [binary-common] Error 1
make[1]: se sale del directorio `/home/carlos/Temp/gdal-1.3.2'
make: *** [binary-arch] Error 2

libNCSEcw, libNCSCnet and libNCSUtil are installed under /usr/local/lib 
and this path is in ld.so.conf, so they should be found.
/lib64/libpthread.so.0 points to /lib64/libpthread-2.5.so
Can anyone help?
Thanks in advance
Carlos D?vila

From szekerest at gmail.com  Thu May 24 16:56:18 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: FW: gdal swig csharp wrapper problems
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC8019880FB@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC8019880FB@ptolemy.topozone.com>
Message-ID: <f3b73b7d0705241356p68a87498v8d0b92d574ecc6d6@mail.gmail.com>

Scott,

Here are my suggestions to follow:

1. Since there were a high number of changes in the recent days I
would suggest to use the current svn-trunk. Many of the changes were
described at:
http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
checkout the SVN trunk.

2. Download and extract the swigwin1.3.31 package

3. The following values should be set in nmake.opt (for the VC2005 builds)
SWIG = [path to swig]\swig.exe
MSVC_VER=1400

4 .You should compile the gdal core before compiling the csharp interface
C:\GDAL> nmake /f makefile.vc

5. C#
C:\GDAL\swig\csharp> nmake /f makefile.vc interface
C:\GDAL\swig\csharp> nmake /f makefile.vc

6. Add the gdal root directory in the the PATH (alternatively you can
copy gdal14.dll and proj.dll to the swig\csharp directory)
set PATH=C:\GDAL;%PATH%

7.
C:\GDAL\swig\csharp> nmake /f makefile.vc test

If you don't have any of the required dll-s (like proj) download the
recent FWTools package
http://test.gdal.org/fwtools/FWTools130.exe

Best regards,

Tamas


2007/5/24, Scott Schulthess <scott@topozone.com>:
>
>
>
>
> Hey, I'm having trouble following the directions on
>
>
>
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile
>
>
>
> This is the output I get I try to create the interface
>
> nmake /f makefile.vc interface
>
>
>
> Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
>
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>
>
>         cd const
>
>         C:\GDAL\swig\swig.exe -csharp -namespace GDAL -dllimport
> gdal_gdalconst_
>
> wrap -o gdalconst_wrap.c ../../include/gdalconst.i
>
>         cd ..
>
>         cd gdal
>
>         C:\GDAL\swig\swig.exe -c++ -csharp -namespace GDAL  -dllimport
> gdal_gdal
>
> _wrap -I../../include/csharp -o gdal_wrap.cpp ../../include/gdal.i
>
> ..\..\include\Band.i(215): Warning(453): Can't apply (IF_ERROR_RETURN_NONE).
> No
>
> typemaps are defined.
>
>         cd ..
>
>         cd osr
>
>         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OSR  -dllimport
> gdal_osr_w
>
> rap -I../../include/csharp -o osr_wrap.cpp ../../include/osr.i
>
>         cd ..
>
>         cd ogr
>
>         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OGR  -dllimport
> gdal_osr_w
>
> rap -I../../include/csharp -o osr_wrap.cpp ../../include/osr.i
>
>         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OGR -dllimport
> gdal_ogr_wr
>
> ap -I../../include/csharp -o ogr_wrap.cpp ../../include/ogr.i
>
>         cd ..
>
>
>
> Notice the Band.I warning.
>
>
>
> So then I ran nmake /f makefile.vc
>
>
> Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
>
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>
>
>         sn -k gdal.snk
>
>
>
> Microsoft (R) .NET Framework Strong Name Utility  Version 2.0.50727.42
>
> Copyright (c) Microsoft Corporation.  All rights reserved.
>
>
>
> Key pair written to gdal.snk
>
>         cd ogr
>
>         nmake /nologo /f makefile.vc
>
>         cl /nologo /MD /EHsc /Zi /D_CRT_SECURE_NO_DEPRECATE
> /D_CRT_NONSTDC_NO_DE
>
> PRECATE /Fd..\..\..\gdal.pdb -I..\..\..\port -I..\..\..\ogr -I..\..\..\gcore
>  -I
>
> ..\..\..\alg  /c ogr_wrap.cpp
>
> ogr_wrap.cpp
>
> C:\unzipped\gdal141\gdal-1.4.1\port\cpl_port.h(86) : fatal error C1083:
> Cannot o
>
> pen include file: 'cpl_config.h': No such file or directory
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 8\VC\BIN\c
>
> l.EXE"' : return code '0x2'
>
> Stop.
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 8\VC\BIN\n
>
> make.EXE"' : return code '0x2'
>
> Stop.
>
>
>
> Well, within the prebuild library for windows
> (http://trac.osgeo.org/gdal/wiki/BuildingOnWindows) I found
> a cpl_config.h and moved it to /gdal/port
>
> directory
>
>
>
> Anyways now I get a bunch of the "unreachable expression code detected"
> about 50 times and the "no gdal_i.lib"
>
>
>
> osr\osr.cs(29,95): warning CS0429: Unreachable expression code detected
>
> osr\osr.cs(35,95): warning CS0429: Unreachable expression code detected
>
> osr\SpatialReference.cs(349,99): warning CS0429:
> Unreachable expression code
>
>         detected
>
>         link /dll /debug   ogr_wrap.obj      odbc32.lib odbccp32.lib
> user32.lib
>
>                            ..\..\gdal_i.lib /out:gdal_ogr_wrap.dll
>
> Microsoft (R) Incremental Linker Version 8.00.50727.42
>
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
>
>
> LINK : fatal error LNK1104: cannot open file '..\..\gdal_i.lib'
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 8\VC\BIN\l
>
> ink.EXE"' : return code '0x450'
>
> Stop.
>
>
>
> Well, there's a gdal_i.lib in those windows prebuild files I linked to
> above, so I moved that into the gdal root directory.  No longer throws the
> gdal_i.lib file not found error, but still throws the "unreachable
> expression code detected' spam errors.
>
>
>
> Now I run the test nmake /f makefile.vc test
> and I get createdata.exe has an encountered a problem and needs to close.
>
>
>
> Unhandled Exception: System.TypeInitializationException:
> The type initializer fo
>
> r 'OGR.ogr' threw an exception. --->
> System.TypeInitializationException: The typ
>
> e initializer for 'OGR.ogrPINVOKE' threw an exception. --->
> System.TypeInitializ
>
> ationException: The type initializer for 'SWIGExceptionHelper' threw an
> exceptio
>
> n. ---> System.DllNotFoundException: Unable to load DLL 'gdal_ogr_wrap': The
> spe
>
> cified module could not be found. (Exception from HRESULT: 0x8007007E)
>
>    at
> OGR.ogrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_ogr(Exce
>
> ptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate,
> Excepti
>
> onDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate,
> Exce
>
> ptionDelegate invalidCastDelegate, ExceptionDelegate
> invalidOperationDelegate, E
>
> xceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
> ExceptionD
>
> elegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate,
> ExceptionDelega
>
> te systemExceptionDelegate)
>
>    at OGR.ogrPINVOKE.SWIGExceptionHelper..cctor() in
> c:\unzipped\gdal141\gdal-1.
>
> 4.1\swig\csharp\ogr\ogrPINVOKE.cs:line 106
>
>    --- End of inner exception stack trace ---
>
>    at OGR.ogrPINVOKE.SWIGExceptionHelper..ctor()
>
>    at OGR.ogrPINVOKE..cctor() in
> c:\unzipped\gdal141\gdal-1.4.1\swig\csharp\ogr\
>
> ogrPINVOKE.cs:line 126
>
>    --- End of inner exception stack trace ---
>
>    at OGR.ogrPINVOKE.wkb25Bit_get()
>
>    at OGR.ogr..cctor() in
> c:\unzipped\gdal141\gdal-1.4.1\swig\csharp\ogr\ogr.cs:
>
> line 102
>
>    --- End of inner exception stack trace ---
>
>    at OGR.ogr.RegisterAll()
>
>    at CreateData.Main(String[] args)
>
> NMAKE : fatal error U1077: '.\createdata.exe' : return code '0xe0434f4d'
>
> Stop.
>
>
>
> Please help.
>
>
>
> Thanks!
>
>
>
> -Scott

From szekerest at gmail.com  Thu May 24 17:01:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: FW: gdal swig csharp wrapper problems
In-Reply-To: <f3b73b7d0705241356p68a87498v8d0b92d574ecc6d6@mail.gmail.com>
References: <4BF377919225F449BB097CB76FFE9BC8019880FB@ptolemy.topozone.com>
	<f3b73b7d0705241356p68a87498v8d0b92d574ecc6d6@mail.gmail.com>
Message-ID: <f3b73b7d0705241401o12f3fd38td600d5a07832da9e@mail.gmail.com>

BTW, you can see the expected results of the various build steps on
various platforms at the GDAL buildbot:

http://buildbot.osgeo.org:8500/

Best regards,

Tamas


2007/5/24, Tamas Szekeres <szekerest@gmail.com>:
> Scott,
>
> Here are my suggestions to follow:
>
> 1. Since there were a high number of changes in the recent days I
> would suggest to use the current svn-trunk. Many of the changes were
> described at:
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpVersions
> checkout the SVN trunk.
>
> 2. Download and extract the swigwin1.3.31 package
>
> 3. The following values should be set in nmake.opt (for the VC2005 builds)
> SWIG = [path to swig]\swig.exe
> MSVC_VER=1400
>
> 4 .You should compile the gdal core before compiling the csharp interface
> C:\GDAL> nmake /f makefile.vc
>
> 5. C#
> C:\GDAL\swig\csharp> nmake /f makefile.vc interface
> C:\GDAL\swig\csharp> nmake /f makefile.vc
>
> 6. Add the gdal root directory in the the PATH (alternatively you can
> copy gdal14.dll and proj.dll to the swig\csharp directory)
> set PATH=C:\GDAL;%PATH%
>
> 7.
> C:\GDAL\swig\csharp> nmake /f makefile.vc test
>
> If you don't have any of the required dll-s (like proj) download the
> recent FWTools package
> http://test.gdal.org/fwtools/FWTools130.exe
>
> Best regards,
>
> Tamas
>
>
> 2007/5/24, Scott Schulthess <scott@topozone.com>:
> >
> >
> >
> >
> > Hey, I'm having trouble following the directions on
> >
> >
> >
> > http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile
> >
> >
> >
> > This is the output I get I try to create the interface
> >
> > nmake /f makefile.vc interface
> >
> >
> >
> > Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
> >
> > Copyright (C) Microsoft Corporation.  All rights reserved.
> >
> >
> >
> >         cd const
> >
> >         C:\GDAL\swig\swig.exe -csharp -namespace GDAL -dllimport
> > gdal_gdalconst_
> >
> > wrap -o gdalconst_wrap.c ../../include/gdalconst.i
> >
> >         cd ..
> >
> >         cd gdal
> >
> >         C:\GDAL\swig\swig.exe -c++ -csharp -namespace GDAL  -dllimport
> > gdal_gdal
> >
> > _wrap -I../../include/csharp -o gdal_wrap.cpp ../../include/gdal.i
> >
> > ..\..\include\Band.i(215): Warning(453): Can't apply (IF_ERROR_RETURN_NONE).
> > No
> >
> > typemaps are defined.
> >
> >         cd ..
> >
> >         cd osr
> >
> >         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OSR  -dllimport
> > gdal_osr_w
> >
> > rap -I../../include/csharp -o osr_wrap.cpp ../../include/osr.i
> >
> >         cd ..
> >
> >         cd ogr
> >
> >         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OGR  -dllimport
> > gdal_osr_w
> >
> > rap -I../../include/csharp -o osr_wrap.cpp ../../include/osr.i
> >
> >         C:\GDAL\swig\swig.exe -c++ -csharp -namespace OGR -dllimport
> > gdal_ogr_wr
> >
> > ap -I../../include/csharp -o ogr_wrap.cpp ../../include/ogr.i
> >
> >         cd ..
> >
> >
> >
> > Notice the Band.I warning.
> >
> >
> >
> > So then I ran nmake /f makefile.vc
> >
> >
> > Microsoft (R) Program Maintenance Utility Version 8.00.50727.42
> >
> > Copyright (C) Microsoft Corporation.  All rights reserved.
> >
> >
> >
> >         sn -k gdal.snk
> >
> >
> >
> > Microsoft (R) .NET Framework Strong Name Utility  Version 2.0.50727.42
> >
> > Copyright (c) Microsoft Corporation.  All rights reserved.
> >
> >
> >
> > Key pair written to gdal.snk
> >
> >         cd ogr
> >
> >         nmake /nologo /f makefile.vc
> >
> >         cl /nologo /MD /EHsc /Zi /D_CRT_SECURE_NO_DEPRECATE
> > /D_CRT_NONSTDC_NO_DE
> >
> > PRECATE /Fd..\..\..\gdal.pdb -I..\..\..\port -I..\..\..\ogr -I..\..\..\gcore
> >  -I
> >
> > ..\..\..\alg  /c ogr_wrap.cpp
> >
> > ogr_wrap.cpp
> >
> > C:\unzipped\gdal141\gdal-1.4.1\port\cpl_port.h(86) : fatal error C1083:
> > Cannot o
> >
> > pen include file: 'cpl_config.h': No such file or directory
> >
> > NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> > 8\VC\BIN\c
> >
> > l.EXE"' : return code '0x2'
> >
> > Stop.
> >
> > NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> > 8\VC\BIN\n
> >
> > make.EXE"' : return code '0x2'
> >
> > Stop.
> >
> >
> >
> > Well, within the prebuild library for windows
> > (http://trac.osgeo.org/gdal/wiki/BuildingOnWindows) I found
> > a cpl_config.h and moved it to /gdal/port
> >
> > directory
> >
> >
> >
> > Anyways now I get a bunch of the "unreachable expression code detected"
> > about 50 times and the "no gdal_i.lib"
> >
> >
> >
> > osr\osr.cs(29,95): warning CS0429: Unreachable expression code detected
> >
> > osr\osr.cs(35,95): warning CS0429: Unreachable expression code detected
> >
> > osr\SpatialReference.cs(349,99): warning CS0429:
> > Unreachable expression code
> >
> >         detected
> >
> >         link /dll /debug   ogr_wrap.obj      odbc32.lib odbccp32.lib
> > user32.lib
> >
> >                            ..\..\gdal_i.lib /out:gdal_ogr_wrap.dll
> >
> > Microsoft (R) Incremental Linker Version 8.00.50727.42
> >
> > Copyright (C) Microsoft Corporation.  All rights reserved.
> >
> >
> >
> > LINK : fatal error LNK1104: cannot open file '..\..\gdal_i.lib'
> >
> > NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> > 8\VC\BIN\l
> >
> > ink.EXE"' : return code '0x450'
> >
> > Stop.
> >
> >
> >
> > Well, there's a gdal_i.lib in those windows prebuild files I linked to
> > above, so I moved that into the gdal root directory.  No longer throws the
> > gdal_i.lib file not found error, but still throws the "unreachable
> > expression code detected' spam errors.
> >
> >
> >
> > Now I run the test nmake /f makefile.vc test
> > and I get createdata.exe has an encountered a problem and needs to close.
> >
> >
> >
> > Unhandled Exception: System.TypeInitializationException:
> > The type initializer fo
> >
> > r 'OGR.ogr' threw an exception. --->
> > System.TypeInitializationException: The typ
> >
> > e initializer for 'OGR.ogrPINVOKE' threw an exception. --->
> > System.TypeInitializ
> >
> > ationException: The type initializer for 'SWIGExceptionHelper' threw an
> > exceptio
> >
> > n. ---> System.DllNotFoundException: Unable to load DLL 'gdal_ogr_wrap': The
> > spe
> >
> > cified module could not be found. (Exception from HRESULT: 0x8007007E)
> >
> >    at
> > OGR.ogrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_ogr(Exce
> >
> > ptionDelegate applicationDelegate, ExceptionDelegate arithmeticDelegate,
> > Excepti
> >
> > onDelegate divideByZeroDelegate, ExceptionDelegate indexOutOfRangeDelegate,
> > Exce
> >
> > ptionDelegate invalidCastDelegate, ExceptionDelegate
> > invalidOperationDelegate, E
> >
> > xceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
> > ExceptionD
> >
> > elegate outOfMemoryDelegate, ExceptionDelegate overflowDelegate,
> > ExceptionDelega
> >
> > te systemExceptionDelegate)
> >
> >    at OGR.ogrPINVOKE.SWIGExceptionHelper..cctor() in
> > c:\unzipped\gdal141\gdal-1.
> >
> > 4.1\swig\csharp\ogr\ogrPINVOKE.cs:line 106
> >
> >    --- End of inner exception stack trace ---
> >
> >    at OGR.ogrPINVOKE.SWIGExceptionHelper..ctor()
> >
> >    at OGR.ogrPINVOKE..cctor() in
> > c:\unzipped\gdal141\gdal-1.4.1\swig\csharp\ogr\
> >
> > ogrPINVOKE.cs:line 126
> >
> >    --- End of inner exception stack trace ---
> >
> >    at OGR.ogrPINVOKE.wkb25Bit_get()
> >
> >    at OGR.ogr..cctor() in
> > c:\unzipped\gdal141\gdal-1.4.1\swig\csharp\ogr\ogr.cs:
> >
> > line 102
> >
> >    --- End of inner exception stack trace ---
> >
> >    at OGR.ogr.RegisterAll()
> >
> >    at CreateData.Main(String[] args)
> >
> > NMAKE : fatal error U1077: '.\createdata.exe' : return code '0xe0434f4d'
> >
> > Stop.
> >
> >
> >
> > Please help.
> >
> >
> >
> > Thanks!
> >
> >
> >
> > -Scott
>

From dave at cs.otago.ac.nz  Thu May 24 22:35:28 2007
From: dave at cs.otago.ac.nz (Dave Robertson)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
In-Reply-To: <464C5847.7030009@loskot.net>
References: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
	<464C5847.7030009@loskot.net>
Message-ID: <40BE9064-8692-4FFE-AABC-BB83CDA812F7@cs.otago.ac.nz>

Hi Mateusz and Frank,

Thanks for the help with the following 2 issues.

Max open files:

OSX does indeed have a default limit of 256 open files per process  
although ulimit reports "unlimited" which is of course the hard  
(upper) limit.  I'm now using setrlimit() to allow 2048 and all is well.


PostGIS driver vs shapefile driver:


I made some measurements and would be interested to hear your thoughts.
The code reads a data via OGR and renders this to screen.

Typical time to read and render PostGIS: 1,209,100,332 nanoseconds
Typical time to read and render shapefiles:  225,924,592 nanoseconds

These timings are rendering exactly the same data at the same  
resolution using the same code. I am using SetSpatialFilterRect in  
both cases. PostGIS is running on the same machine, is GiST indexed,  
and is using its default driver options.

PG appears to me to be 6 times slower than shapefiles: is this what  
you'd expect,  or should I be able to tune the PG query in some way  
(perhaps using binary cursors?)

Regards,
Dave Robertson



On 18/05/2007, at 1:27 AM, Mateusz Loskot wrote:

> Dave Robertson wrote:
>> Hi,
>>
>> I'm working with OGR and a set of 280 shapefiles each representing a
>> layer. I find I can open the first 84 shapefiles and all the rest  
>> return
>> error code 4 Error opening file). It doesn't seem to matter which
>> particular 84 files - I can't open any more than that. The shapefiles
>> are all one directory, along with their .dbf, .shx and .qix files.  
>> I've
>> looked at the source for the shapefile driver and I can't see any  
>> limits
>> built in there, and as far as I'm aware the operating system's  
>> limit is
>> 12500 open files (per process). The OS is OS X.
>
> Dave,
>
> ADAIR, OSX9 used very low number of open files per process (64).
> See this FAQ, error code 24:
>
> http://www.osxfaq.com/man/2/intro.ws
>
> When you open 280 shapefiles, you get (not counting .prj) 280 * 3  
> number
> of open files, so I suppose you hit beyond the limit
> which I *suppose* is ~255 per process, in newer OSX versions.
>
>> I have loaded all the shapefiles into postgis as an experiment and  
>> I can
>> read all the layers from there just fine, albeit slowly.
>
> What means slowly?
> Do you use spatial index, GiST ?
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net


From warmerdam at pobox.com  Fri May 25 10:27:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Max no of layers in OGR shapefile driver
In-Reply-To: <40BE9064-8692-4FFE-AABC-BB83CDA812F7@cs.otago.ac.nz>
References: <EE7CF6B5-B253-4889-9AA8-B7308A6BD3F2@cs.otago.ac.nz>
	<464C5847.7030009@loskot.net>
	<40BE9064-8692-4FFE-AABC-BB83CDA812F7@cs.otago.ac.nz>
Message-ID: <4656F24B.3050800@pobox.com>

Dave Robertson wrote:
> PostGIS driver vs shapefile driver:
> 
> I made some measurements and would be interested to hear your thoughts.
> The code reads a data via OGR and renders this to screen.
> 
> Typical time to read and render PostGIS: 1,209,100,332 nanoseconds
> Typical time to read and render shapefiles:  225,924,592 nanoseconds
> 
> These timings are rendering exactly the same data at the same resolution 
> using the same code. I am using SetSpatialFilterRect in both cases. 
> PostGIS is running on the same machine, is GiST indexed, and is using 
> its default driver options.
> 
> PG appears to me to be 6 times slower than shapefiles: is this what 
> you'd expect,  or should I be able to tune the PG query in some way 
> (perhaps using binary cursors?)

Dave,

The OGR PostGIS read support is not well optimized, so I'm not surprised
at a difference, though this is more dramatic than I would have
expected.  It makes me wonder if perhaps spatial querying is not being
used for something.

You might try replacing PG: with PGB: in your datasource name for postgis
access.  This uses alternate postgis driver code in OGR with binary
fetching for geometries.  This code path is not very well maintained, but
is reportedly significantly faster than fetching geometries in text format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maciej.skorczewski at procad.pl  Fri May 25 11:55:14 2007
From: maciej.skorczewski at procad.pl (Maciej Skorczewski)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Bug in Selection polygon from PostGiS (PostgreSql) -
 MapGuide Open Source
Message-ID: <465706E2.8010103@procad.pl>

Hi!

Use MapGuide OpenSource 1.1.0, XP,PHP

I my aplication i store all layer in PostGis database.

I see all layers correct but have problem whit correct selection of it. 
This are plans of rooms in building.

I use Base Layers (Ajax Tile base) problem looks like this (look in 
print screen).
http://img340.imageshack.us/img340/4928/bugpostgisey2.jpg


when i try this same whit shp files all works ok (i can select this 
smaller polygon) ...so i thing that problem is whit Ogr provider, or 
maybe it is BUG in MapGuide.

Can anybody tell me what can i do whit this problem.? Did you have this 
same problem?
maciek

From mateusz at loskot.net  Fri May 25 12:56:12 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Bug in Selection polygon from PostGiS (PostgreSql)
	- MapGuide Open Source
In-Reply-To: <465706E2.8010103@procad.pl>
References: <465706E2.8010103@procad.pl>
Message-ID: <4657152C.3030009@loskot.net>

Maciej Skorczewski wrote:
> I see all layers correct but have problem whit correct selection of
> it. This are plans of rooms in building.
> 
> I use Base Layers (Ajax Tile base) problem looks like this (look in 
> print screen). 
> http://img340.imageshack.us/img340/4928/bugpostgisey2.jpg
> when i try this same whit shp files all works ok (i can select this 
> smaller polygon) ...so i thing that problem is whit Ogr provider, or 
> maybe it is BUG in MapGuide.

Maciej,

I think it's hard to find where is the problem from your report.
Could you provide me with your shapefile?

Then I will be able to write simple test reproducing your steps
and then we can observe if OGR behaves correctly or not.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From John.C.Cartwright at noaa.gov  Fri May 25 16:30:58 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] gdalinfo -stats on raw binary data
Message-ID: <46574782.2010000@noaa.gov>

Hello All,

I have the same data in three different formats: 16-bit signed integer 
(*.bin), 32-bit signed integer (*.bin), and 32-bit float (*.flt).  I'm 
not getting the correct answers when I run "gdalinfo -stats", the min 
and max should be -6488 and 1320 respectively.

The (seemingly incorrect) response I get is the same for each file:

Driver: EHdr/ESRI .hdr Labelled
Size is 4801, 2401
Coordinate System is `'
Origin = (-68.000416665000003,19.000408664999998)
Pixel Size = (0.000833330000000,-0.000833330000000)
Corner Coordinates:
Upper Left  ( -68.0004167,  19.0004087)
Lower Left  ( -68.0004167,  16.9995833)
Upper Right ( -63.9995993,  19.0004087)
Lower Right ( -63.9995993,  16.9995833)
Center      ( -66.0000080,  17.9999960)
Band 1 Block=4801x1 Type=Byte, ColorInterp=Undefined
  Minimum=0.000, Maximum=255.000, Mean=153.351, StdDev=98.734
  NoData Value=-32768

Should I be forcing these to a different driver or modifying the 
associated hdr file in some way?

Thanks for your help!

-- john



From warmerdam at pobox.com  Sat May 26 12:07:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Motion: Committer Status for Dr. Konstantin Baumann
In-Reply-To: <464B26E9.2050100@pobox.com>
References: <464B26E9.2050100@pobox.com>
Message-ID: <46585B3F.7080908@pobox.com>

Frank Warmerdam wrote:
> Motion: To extend GDAL/OGR committer status to Dr. Konstantin Baumann.

Folks,

I neglected to follow up on this motion.  I now declare it passed with
+1 support from Howard, Tamas, Daniel and myself.

I believe Konstantin will be doing some immediate work on the MySQL and
SQLite drivers.

Welcome aboard!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ludwigbrinckmann at gmail.com  Mon May 28 06:45:55 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
Message-ID: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>

I need to create paletted PNG files with transparency.

I understand that I need to pass in a colour table with the alpha channel
set to 0.

As I cannot create PNGs directly, I first create a Tiff with the colourtable
and then do a CreateCopy.

But when I then look at the PNG colour table, the transparency values are
gone (all set to 255). This is also true for the intermediate Tiff file --
which is understandable as single band tiffs don't do transparency. I think
when creating the tiff the colourtable is adjusted so that it works for the
Tiff, but then my transparencies are lost. (If someone thinks this is a bug,
I will turn my code into a short example).

I tried to alter the colour table after creating the tiff (or the createCopy
of the PNG), but this is not supported.

What's the best way to do this -- maybe I just need a better intermediate
format that does transparencies and can be created (which one?)

Any hints?

Regards

Ludwig
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070528/ae0fb059/attachment.html
From monshi at home.se  Mon May 28 07:34:12 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Supported projections/transformation in a GUI
Message-ID: <f3eenm$qaj$1@sea.gmane.org>

Ok folks, here is question to crack.

Simple idea:
User can pick either a file with geo-data in it or an image without.
If it is a file without geo-data the user is to be able to select which 
projection/coordinate system the image is saved in and also set up the 
coordinates of the edges of the map.  A transformation of coordinates 
between map local projection and WGS84 will the be set up.

My big problem is the case with no geo-data. I need to set up an 
interface which an ordinary user can use, a user with not to much 
experience of projections and such stuff.

Firstly I need to sort out which, in GDAL, available projections that 
are common. Just to reduce the list.
Next I need to find a friendly name to present them with.
If possible - sort them corresponding to where they are used, for 
example  the user can select USA and get all the UTM-zones (and by 
knowing the coordinates of the map select the right zone). Or replace 
USA with a European country and their specific common projections.

I'm a bit lost, don't know where to start. The ideas above is just loose 
ideas.

Suggestions? Any tools in GDAL that can help me? Anyway to look up the 
available projections in GDAL? Anyway to sort out the "valid" projections?

Working with GDAL from C#.

Pls
/tomas


From warmerdam at pobox.com  Mon May 28 08:38:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
Message-ID: <465ACD29.2090000@pobox.com>

Ludwig M Brinckmann wrote:
> I need to create paletted PNG files with transparency.
> 
> I understand that I need to pass in a colour table with the alpha 
> channel set to 0.
> 
> As I cannot create PNGs directly, I first create a Tiff with the 
> colourtable and then do a CreateCopy.
> 
> But when I then look at the PNG colour table, the transparency values 
> are gone (all set to 255). This is also true for the intermediate Tiff 
> file -- which is understandable as single band tiffs don't do 
> transparency. I think when creating the tiff the colourtable is adjusted 
> so that it works for the Tiff, but then my transparencies are lost. (If 
> someone thinks this is a bug, I will turn my code into a short example).
> 
> I tried to alter the colour table after creating the tiff (or the 
> createCopy of the PNG), but this is not supported.
> 
> What's the best way to do this -- maybe I just need a better 
> intermediate format that does transparencies and can be created (which 
> one?)

Ludwig,

If you image isn't too large, and you are doing programatically (or
via scripts) you might want to use MEM format as your intermediate format.
I believe it supports fully featured color tables, and no mess and fuss
with intermediate file cleanup.

   http://www.gdal.org/frmt_mem.html

Note, when creating MEM datasets and not needing to attach to an existing
array in memory, just use any name for the dataset, such as "tempimage".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ludwigbrinckmann at gmail.com  Mon May 28 08:54:25 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <465ACD29.2090000@pobox.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
	<465ACD29.2090000@pobox.com>
Message-ID: <3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>

Many thanks,

that seems to work beautifully.

So far I had been using tiff images as an intermediate container when
creating files for which no Create() method is available, but the in memory
MEM format  of course is much superior, no fuss with temp files and no need
to write to disk.

Regards

Ludwig


On 28/05/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Ludwig M Brinckmann wrote:
> > I need to create paletted PNG files with transparency.
> >
> > I understand that I need to pass in a colour table with the alpha
> > channel set to 0.
> >
> > As I cannot create PNGs directly, I first create a Tiff with the
> > colourtable and then do a CreateCopy.
> >
> > But when I then look at the PNG colour table, the transparency values
> > are gone (all set to 255). This is also true for the intermediate Tiff
> > file -- which is understandable as single band tiffs don't do
> > transparency. I think when creating the tiff the colourtable is adjusted
> > so that it works for the Tiff, but then my transparencies are lost. (If
> > someone thinks this is a bug, I will turn my code into a short example).
> >
> > I tried to alter the colour table after creating the tiff (or the
> > createCopy of the PNG), but this is not supported.
> >
> > What's the best way to do this -- maybe I just need a better
> > intermediate format that does transparencies and can be created (which
> > one?)
>
> Ludwig,
>
> If you image isn't too large, and you are doing programatically (or
> via scripts) you might want to use MEM format as your intermediate format.
> I believe it supports fully featured color tables, and no mess and fuss
> with intermediate file cleanup.
>
>    http://www.gdal.org/frmt_mem.html
>
> Note, when creating MEM datasets and not needing to attach to an existing
> array in memory, just use any name for the dataset, such as "tempimage".
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070528/b247cdea/attachment.html
From ludwigbrinckmann at gmail.com  Mon May 28 11:06:45 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
	<465ACD29.2090000@pobox.com>
	<3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>
Message-ID: <3f7a6e1c0705280806n12326b82t78f79ac98fd05a15@mail.gmail.com>

Maybe this was a bit premature.

Unfortunately, the MEM dataset does not support the SetGCPs method, even
though the documentation says it 'should' .
(" Memory datasets should support for most kinds of auxilary information
including metadata, coordinate systems, georeferencing, GCPs, color
interpretation, nodata, color tables and all pixel data types.")

This works with the GTiff driver, but not with MEM:

import gdal
import gdal_array
import gdalconst
import numpy

rows = 10
cols = 10

data = numpy.ones((rows,cols), numpy.int16)

driver = gdal.GetDriverByName('MEM')
image = driver.Create('dummy', rows, cols, 1, gdalconst.GDT_Int16)
gcps = []
gcps.append(gdal.GCP(1,2,3,4))
image.SetGCPs(gcps, '')


Ludwig


On 28/05/07, Ludwig M Brinckmann <ludwigbrinckmann@gmail.com> wrote:
>
> Many thanks,
>
> that seems to work beautifully.
>
> So far I had been using tiff images as an intermediate container when
> creating files for which no Create() method is available, but the in memory
> MEM format  of course is much superior, no fuss with temp files and no need
> to write to disk.
>
> Regards
>
> Ludwig
>
>
> On 28/05/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> >
> > Ludwig M Brinckmann wrote:
> > > I need to create paletted PNG files with transparency.
> > >
> > > I understand that I need to pass in a colour table with the alpha
> > > channel set to 0.
> > >
> > > As I cannot create PNGs directly, I first create a Tiff with the
> > > colourtable and then do a CreateCopy.
> > >
> > > But when I then look at the PNG colour table, the transparency values
> > > are gone (all set to 255). This is also true for the intermediate Tiff
> > > file -- which is understandable as single band tiffs don't do
> > > transparency. I think when creating the tiff the colourtable is
> > adjusted
> > > so that it works for the Tiff, but then my transparencies are lost.
> > (If
> > > someone thinks this is a bug, I will turn my code into a short
> > example).
> > >
> > > I tried to alter the colour table after creating the tiff (or the
> > > createCopy of the PNG), but this is not supported.
> > >
> > > What's the best way to do this -- maybe I just need a better
> > > intermediate format that does transparencies and can be created (which
> > > one?)
> >
> > Ludwig,
> >
> > If you image isn't too large, and you are doing programatically (or
> > via scripts) you might want to use MEM format as your intermediate
> > format.
> > I believe it supports fully featured color tables, and no mess and fuss
> > with intermediate file cleanup.
> >
> >    http://www.gdal.org/frmt_mem.html
> >
> > Note, when creating MEM datasets and not needing to attach to an
> > existing
> > array in memory, just use any name for the dataset, such as "tempimage".
> >
> > Best regards,
> > --
> >
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | President OSGeo,
> > http://osgeo.org
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070528/63e0460c/attachment.html
From warmerdam at pobox.com  Mon May 28 11:58:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <3f7a6e1c0705280806n12326b82t78f79ac98fd05a15@mail.gmail.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
	<465ACD29.2090000@pobox.com>
	<3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>
	<3f7a6e1c0705280806n12326b82t78f79ac98fd05a15@mail.gmail.com>
Message-ID: <465AFC26.4040607@pobox.com>

Ludwig M Brinckmann wrote:
> Maybe this was a bit premature.
> 
> Unfortunately, the MEM dataset does not support the SetGCPs method, even 
> though the documentation says it 'should' .
> (" Memory datasets should support for most kinds of auxilary information 
> including metadata, coordinate systems, georeferencing, GCPs, color 
> interpretation, nodata, color tables and all pixel data types.")

Ludwig,

I see your analysis is correct - the MEM driver actually lacked GCP support
despite the docs.  I have added this in trunk, if that is convenient for you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ludwigbrinckmann at gmail.com  Mon May 28 12:30:34 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <465AFC26.4040607@pobox.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
	<465ACD29.2090000@pobox.com>
	<3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>
	<3f7a6e1c0705280806n12326b82t78f79ac98fd05a15@mail.gmail.com>
	<465AFC26.4040607@pobox.com>
Message-ID: <3f7a6e1c0705280930v7e6ca272gb983ef57388f1254@mail.gmail.com>

Thanks, you are a star.

I will see if that works for me and report back.

Regards,

Ludwig

On 28/05/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Ludwig M Brinckmann wrote:
> > Maybe this was a bit premature.
> >
> > Unfortunately, the MEM dataset does not support the SetGCPs method, even
> > though the documentation says it 'should' .
> > (" Memory datasets should support for most kinds of auxilary information
> > including metadata, coordinate systems, georeferencing, GCPs, color
> > interpretation, nodata, color tables and all pixel data types.")
>
> Ludwig,
>
> I see your analysis is correct - the MEM driver actually lacked GCP
> support
> despite the docs.  I have added this in trunk, if that is convenient for
> you.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070528/b32d283f/attachment.html
From ari.jolma at tkk.fi  Mon May 28 15:43:38 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GDAL binders at FOSS4G 2007
Message-ID: <465B30EA.5070809@tkk.fi>

I'm thinking about whether to travel to Victoria and if yes, what to do 
there except wander around aimlessly.

On the website I came across the CodeSprint. Perhaps the bindings are 
such a difficult topic that maybe it would deserve a CodeSprint? Maybe 
we could talk around the issue also a bit more widely (as GEOS also has 
SWIG bindings and other libraries perhaps have / could have). I'm not 
sure if Aaron is on this list, but he mentions Python bindings in the 
goals of QGIS CodeSprint in the wiki.

Would we have enough / key people (Tamas? Hobu? Charlie?)? This is just 
a wild idea but I think it surely would be useful to discuss the 
bindings and do some grand or not so grand scheme design.

Cheers,

Ari



From ludwigbrinckmann at gmail.com  Mon May 28 16:17:09 2007
From: ludwigbrinckmann at gmail.com (Ludwig M Brinckmann)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Transparent PNG with color table (palette)
In-Reply-To: <3f7a6e1c0705280930v7e6ca272gb983ef57388f1254@mail.gmail.com>
References: <3f7a6e1c0705280345u35c62a73j66d1d3f16d928405@mail.gmail.com>
	<465ACD29.2090000@pobox.com>
	<3f7a6e1c0705280554q40cf22fcgee5d8a753dcca6d8@mail.gmail.com>
	<3f7a6e1c0705280806n12326b82t78f79ac98fd05a15@mail.gmail.com>
	<465AFC26.4040607@pobox.com>
	<3f7a6e1c0705280930v7e6ca272gb983ef57388f1254@mail.gmail.com>
Message-ID: <3f7a6e1c0705281317g7bcd4002n7364f064fe30cf9d@mail.gmail.com>

That now works, thanks.

For the benefit of others this poorly coded Python example shows the way to
use the MEM dataset with GCPs and ColorTable with transparencies to then
create both a paletted GTiff (no transparencies supported, so the
transparent green appear in the tiff, but the GCPs are there), and a PNG
(with transparencies, but without GCPs):

import gdal
import gdal_array
import gdalconst
import numpy

rows = 10
cols = 10

data = numpy.ones((rows,cols), numpy.uint8)
data[4:7,...] = 0


driver = gdal.GetDriverByName('MEM')
image = driver.Create('dummy', rows, cols, 1, gdalconst.GDT_Byte)
gcps = []
gcps.append (gdal.GCP(1,2,3,4))
image.SetGCPs(gcps, '')

colorTable = gdal.ColorTable()
greentransparent = (0, 255, 0, 0)
blue = (0,0, 255,255)
colorTable.SetColorEntry(0, greentransparent)
colorTable.SetColorEntry(1, blue)
b = image.GetRasterBand(1)
b.SetRasterColorTable(colorTable)
b.WriteArray(data)

tiffdriver = gdal.GetDriverByName('GTiff')
tiffdriver.CreateCopy('dummy.tif', image)

pngdriver = gdal.GetDriverByName('PNG')
pngdriver.CreateCopy('dummy.png', image)


Frank, while I was building from svn trunk, I stumbled over a number of C++
comments in C files/ headers
port/cpl_port.h line 209
alg/gdal_crs.c line 402
frmts/nitf/nitfile.c line 533/535
frmts/nitfimage.c 2x
frmts/mgrs.c line 400
port/cps_multiproc.h line 35++

Thanks for your very quick help.

Ludwig


On 28/05/07, Ludwig M Brinckmann <ludwigbrinckmann@gmail.com> wrote:
>
> Thanks, you are a star.
>
> I will see if that works for me and report back.
>
> Regards,
>
> Ludwig
>
> On 28/05/07, Frank Warmerdam < warmerdam@pobox.com> wrote:
> >
> > Ludwig M Brinckmann wrote:
> > > Maybe this was a bit premature.
> > >
> > > Unfortunately, the MEM dataset does not support the SetGCPs method,
> > even
> > > though the documentation says it 'should' .
> > > (" Memory datasets should support for most kinds of auxilary
> > information
> > > including metadata, coordinate systems, georeferencing, GCPs, color
> > > interpretation, nodata, color tables and all pixel data types.")
> >
> > Ludwig,
> >
> > I see your analysis is correct - the MEM driver actually lacked GCP
> > support
> > despite the docs.  I have added this in trunk, if that is convenient for
> > you.
> >
> > Best regards,
> > --
> >
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | President OSGeo,
> > http://osgeo.org
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070528/a69acb70/attachment.html
From szekerest at gmail.com  Mon May 28 17:03:51 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GDAL binders at FOSS4G 2007
In-Reply-To: <465B30EA.5070809@tkk.fi>
References: <465B30EA.5070809@tkk.fi>
Message-ID: <f3b73b7d0705281403v3cf7d77dg18e1dde3fc8b607@mail.gmail.com>

Ari,

Although I haven't managed to collect enough sponsorship to get to the
conference so far, I consider this as a fairly compelling idea.

We might want to cover at least the following areas:

- harmonize the typemap usage between the various bindings (and update
the README.typemaps accordingly)
- determine which of the gdal/ogr features should be added to (or
perhaps removed from) the SWIG interface.
- look over the possibilities to automate the creation of the
code-comment-documentation for the various languages .
- construct the expected object model diagram to follow by the various
languages (and publish the model itself)
- discuss the language specific issues and the expected treatments.
- etc.

Regardless of the fact whether I can eventually be there or not, I'm
happy to participate in such efforts remotely as well.

Best regards,

Tamas




2007/5/28, Ari Jolma <ari.jolma@tkk.fi>:
> I'm thinking about whether to travel to Victoria and if yes, what to do
> there except wander around aimlessly.
>
> On the website I came across the CodeSprint. Perhaps the bindings are
> such a difficult topic that maybe it would deserve a CodeSprint? Maybe
> we could talk around the issue also a bit more widely (as GEOS also has
> SWIG bindings and other libraries perhaps have / could have). I'm not
> sure if Aaron is on this list, but he mentions Python bindings in the
> goals of QGIS CodeSprint in the wiki.
>
> Would we have enough / key people (Tamas? Hobu? Charlie?)? This is just
> a wild idea but I think it surely would be useful to discuss the
> bindings and do some grand or not so grand scheme design.
>
> Cheers,
>
> Ari
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From andrew.haywood at poyry.com  Mon May 28 20:13:42 2007
From: andrew.haywood at poyry.com (andrew.haywood@poyry.com)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Newbie (ogr2ogr reprojecting NZMG to NZTM)
Message-ID: <OF1B539496.7E2AC9DD-ONCA2572E9.0080FFD1-CA2572EA.000141D2@poyry.com>

Dear List,

i am having some problems with reprojecting shapefiles from NZMG to NZTM. 
I have copied the nzgd2kgrid0005.1gsb into the projlib directory (on my 
Suse 10.2 installation it is in the 

if i run the following command

ogr2ogr -f "ESRI Shapefile" north_island_nztm.shp 'FRWP/Active/38A08772 
MfE_Mapping forest harvesting using MODIS satellite 
data/GIS/LCDB2_North_Island_Forest_Classes.shp' -s_srs "+proj=nzmg 
+lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl +datum=nzgd49 
+units=m +nadgrids=nzgd2kgrid0005.1gsb +wktext" -t_srs EPSG:2193

then run the following 

ogrinfo -summary north_island_nztm.shp north_island_nztm

i get the following output. Where the datum is "Mean_Sea_Level" - which i 
suspect is incorrect. I thought the datum should have been NZGD2000. Any 
help would be greatly appreciated.

best regards.



INFO: Open of `north_island_nztm.shp'
      using driver `ESRI Shapefile' successful.

Layer name: north_island_nztm
Geometry: Polygon
Feature Count: 104978
Extent: (1518858.988989, 5392310.766727) - (2089515.826863, 
6221064.447185)
Layer SRS WKT:
PROJCS["NZGD2000 / New Zealand Transverse Mercator",
    GEOGCS["NZGD2000",
        DATUM["Mean_Sea_Level",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",173],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1600000],
    PARAMETER["false_northing",10000000],
    UNIT["Meter",1]]
AREA: Real (19.5)
PERIMETER: Real (19.5)
NI_NZMG_: Real (11.0)
NI_NZMG_ID: Real (11.0)
LCDB1CLASS: Real (11.0)
LCDB1NAME: String (40.0)
LCDB2CLASS: Real (11.0)
LCDB2NAME: String (40.0)
WET_CONTEX: String (3.0)
HECTARES: Real (19.2)
TA_ID: Real (11.0)
TA_NAME: String (50.0)
REGION_ID: Real (11.0)
REGION_NAM: String (50.0)



This email and any files transmitted with it are confidential, may be legally privileged and are intended solely for the use of the individual or entity to whom they are addressed. If you are not the intended recipient, you are hereby notified that any use, distribution, or reproduction of the contents of this email is strictly prohibited and may be unlawful. If you are not the intended recipient, please notify the sender by return email and destroy all copies of the original message including any attachments thereto. 
Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070529/1c5c80a5/attachment.html
From JPalmer at linz.govt.nz  Mon May 28 22:56:41 2007
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] RE: Newbie (ogr2ogr reprojecting NZMG to NZTM)
Message-ID: <s65c3f3b.058@lh-gw2.linz.govt.nz>

Hi Andrew,
 
Looks like ogr2ogr and ogrinfo is building the wrong datum WKT string.
I've even tried transforming a test shape file and the .prj file
produced had an incorrect WKT projection definition:

i.e
ogr2ogr -f "ESRI Shapefile" crs_node_nztm.shp crs_node.shp -a_srs
"+proj=nzmg +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl
+datum=nzgd49 +units=m +no_defs <> +nadgrids=nzgd2kgrid0005.gsb +wktext"
-t_srs EPSG:2193

crs_node_nztm.prj =

PROJCS["NZGD2000 / New Zealand Transverse Mercator",
   GEOGCS["NZGD2000",
        DATUM["D_",
           SPHEROID["GRS_1980",6378137,298.257222101]],
           PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",173],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1600000],
    PARAMETER["false_northing",10000000],
    UNIT["Meter",1]]

This is the WKT information from postgis which looks like it has the
correct definition (don't worry about the AUTHORITY references).

"PROJCS["NZGD2000 / New Zealand Transverse Mercator",
   GEOGCS["NZGD2000",
       DATUM["New_Zealand_Geodetic_Datum_2000",
          SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],
      TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6167"]],
      PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
      UNIT["degree",0.01745329251994328, AUTHORITY["EPSG","9122"]],
AUTHORITY["EPSG","4167"]],
   PROJECTION["Transverse_Mercator"],
  
PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",173],
  
PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",1600000],
   PARAMETER["false_northing",10000000],
   UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","2193"]]"

The actual transformation of the shapefiles seems good, as I've
compared some test against a couple of datasets which were transformed
using our own tools.

Cheers
Jeremy


______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________

From pmin00 at gmail.com  Tue May 29 03:07:38 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
Message-ID: <27e900d30705290007x279086case32726f53eef3275@mail.gmail.com>

Hello,

I've seen this error mentioned before on the list, and
I've been digging in the gdal_translate source for a while now,
but can't yet figure out what is going wrong.

This is the output I'm getting:
Input file size is 51215, 33632
0...10...20...ERROR 1: Illegal block requested.
ERROR 1: IReadBlock failed at X offset 0, Y offset 2520
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2520

I'm finding that "psInfo" holds a variable "nBlocksPerColumn",
which is set to 2520.
As soon as I request a row beyond 4 times that value
(i.e. I do gdal_translate -srcwin 0 10800 1 1, for example)
(which should be possible because the input data has 33632 rows)
it gives me the above error.

Any ideas?

thanks,

Patrick

From warmerdam at pobox.com  Tue May 29 09:23:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Newbie (ogr2ogr reprojecting NZMG to NZTM)
In-Reply-To: <OF1B539496.7E2AC9DD-ONCA2572E9.0080FFD1-CA2572EA.000141D2@poyry.com>
References: <OF1B539496.7E2AC9DD-ONCA2572E9.0080FFD1-CA2572EA.000141D2@poyry.com>
Message-ID: <465C2960.5090902@pobox.com>

andrew.haywood@poyry.com wrote:
> 
> Dear List,
> 
> i am having some problems with reprojecting shapefiles from NZMG to 
> NZTM. I have copied the nzgd2kgrid0005.1gsb into the projlib directory 
> (on my Suse 10.2 installation it is in the
> 
> if i run the following command
> 
> ogr2ogr -f "ESRI Shapefile" north_island_nztm.shp 'FRWP/Active/38A08772 
> MfE_Mapping forest harvesting using MODIS satellite 
> data/GIS/LCDB2_North_Island_Forest_Classes.shp' -s_srs "+proj=nzmg 
> +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl 
> +datum=nzgd49 +units=m +nadgrids=nzgd2kgrid0005.1gsb +wktext" -t_srs 
> EPSG:2193
> 
> then run the following
> 
> ogrinfo -summary north_island_nztm.shpnorth_island_nztm
> 
> i get the following output. Where the datum is "Mean_Sea_Level" - which 
> i suspect is incorrect. I thought the datum should have been NZGD2000. 
> Any help would be greatly appreciated.
> 
> best regards.
> 
> 
> 
> INFO: Open of `north_island_nztm.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: north_island_nztm
> Geometry: Polygon
> Feature Count: 104978
> Extent: (1518858.988989, 5392310.766727) - (2089515.826863, 6221064.447185)
> Layer SRS WKT:
> PROJCS["NZGD2000 / New Zealand Transverse Mercator",
>     GEOGCS["NZGD2000",
>         DATUM["Mean_Sea_Level",
>             SPHEROID["GRS_1980",6378137,298.257222101]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",173],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",1600000],
>     PARAMETER["false_northing",10000000],
>     UNIT["Meter",1]]

Andrew,

I don't know what is going on.  When I try:

ogr2ogr north_island_nztm.shp data/esri/shape/eg_data/polygon.shp -s_srs 
"+proj=nzmg +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +ellps=intl 
+datum=nzgd49 +units=m +nadgrids=nzgd2kgrid0005.1gsb +wktext" -t_srs EPSG:2193

I get:
warmerda@amd64[10]% cat north_island_nztm.prj
PROJCS["NZGD2000 / New Zealand Transverse 
Mercator",GEOGCS["NZGD2000",DATUM["D_NZGD_2000",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",173],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",1600000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]

I can't think of any obvious you would be having the problem you are.  What
version of GDAL/OGR are you using?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue May 29 10:14:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
In-Reply-To: <27e900d30705290007x279086case32726f53eef3275@mail.gmail.com>
References: <27e900d30705290007x279086case32726f53eef3275@mail.gmail.com>
Message-ID: <465C3556.90502@pobox.com>

Patrick Min wrote:
> Hello,
> 
> I've seen this error mentioned before on the list, and
> I've been digging in the gdal_translate source for a while now,
> but can't yet figure out what is going wrong.
> 
> This is the output I'm getting:
> Input file size is 51215, 33632
> 0...10...20...ERROR 1: Illegal block requested.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 2520
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2520
> 
> I'm finding that "psInfo" holds a variable "nBlocksPerColumn",
> which is set to 2520.
> As soon as I request a row beyond 4 times that value
> (i.e. I do gdal_translate -srcwin 0 10800 1 1, for example)
> (which should be possible because the input data has 33632 rows)
> it gives me the above error.

Patrick,

I can't see what would be going on here.  If the input file is AAGRID
format, and the file has 33632 rows, I don't know why nBlocksPerColumn
would be 2520.   I think you would need to make the file available for
this to be pursued - though it sounds painfully large.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From pmin00 at gmail.com  Tue May 29 10:22:54 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
Message-ID: <27e900d30705290722vc034a82rca4f7a96285e60b5@mail.gmail.com>

hi Frank,

Thanks for the reply. I wrote a Perl script to get some data
out of hdr.adf, etc., maybe this helps (see below). It seems there are
(475000 - 306840) / 5 = 33632 rows (as expected), but hdr.adf
says a tile is 4 pixels high, and HTilesPerColumn is 2520 (?!), which
should be 33632 / 4 = 8408, right?

Patrick


read_bounds_info(dblbnd.adf)
  LLX: [13565]
  LLY: [306840]
  URX: [269640]
  URY: [475000]

read_stats_info(sta.adf)
  SMin: [-8332]
  SMax: [34338]
  SMean: [1438.64260482693]
  SStdDev: [2390.48273559427]

read_header(hdr.adf)
  HMagic [GRID1.2]
  HCellType [1]
  HPixelSizeX [5]
  HPixelSizeY [5]
  unknown1 [-115075]
  unknown2 [399400]
  HTilesPerRow [201]
  HTilesPerColumn [2520]
  HTileXSize [256]
  unknown [1]
  HTileYSize [4]


On 5/29/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
> I can't see what would be going on here.  If the input file is AAGRID
> format, and the file has 33632 rows, I don't know why nBlocksPerColumn
> would be 2520.   I think you would need to make the file available for
> this to be pursued - though it sounds painfully large.

> > This is the output I'm getting:
> > Input file size is 51215, 33632
> > 0...10...20...ERROR 1: Illegal block requested.
> > ERROR 1: IReadBlock failed at X offset 0, Y offset 2520
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2520
> >
> > I'm finding that "psInfo" holds a variable "nBlocksPerColumn",
> > which is set to 2520.
> > As soon as I request a row beyond 4 times that value
> > (i.e. I do gdal_translate -srcwin 0 10800 1 1, for example)
> > (which should be possible because the input data has 33632 rows)
> > it gives me the above error.

From pmin00 at gmail.com  Tue May 29 10:40:53 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
In-Reply-To: <27e900d30705290722vc034a82rca4f7a96285e60b5@mail.gmail.com>
References: <27e900d30705290722vc034a82rca4f7a96285e60b5@mail.gmail.com>
Message-ID: <27e900d30705290740t7908bb0ckb910e56dcff212fb@mail.gmail.com>

Alright, I feel silly now for not mentioning that
there are other raster files in the directory.
>From this page:
http://trac.osgeo.org/gdal/ticket/1198
I've now figured out that my data is "multitiled"..

>From that error ticket page I can't really tell if this was resolved.
I'm using gdal 1.4.1 here.

I suppose I could hack something that merges the index files and raster
files into a single large index&raster file..

Patrick


On 5/29/07, Patrick Min <pmin00@gmail.com> wrote:
> Thanks for the reply. I wrote a Perl script to get some data
> out of hdr.adf, etc., maybe this helps (see below). It seems there are
> (475000 - 306840) / 5 = 33632 rows (as expected), but hdr.adf
> says a tile is 4 pixels high, and HTilesPerColumn is 2520 (?!), which
> should be 33632 / 4 = 8408, right?
>
> Patrick
>
>
> read_bounds_info(dblbnd.adf)
>   LLX: [13565]
>   LLY: [306840]
>   URX: [269640]
>   URY: [475000]
>
> read_stats_info(sta.adf)
>   SMin: [-8332]
>   SMax: [34338]
>   SMean: [1438.64260482693]
>   SStdDev: [2390.48273559427]
>
> read_header(hdr.adf)
>   HMagic [GRID1.2]
>   HCellType [1]
>   HPixelSizeX [5]
>   HPixelSizeY [5]
>   unknown1 [-115075]
>   unknown2 [399400]
>   HTilesPerRow [201]
>   HTilesPerColumn [2520]
>   HTileXSize [256]
>   unknown [1]
>   HTileYSize [4]

From monshi at home.se  Tue May 29 11:12:59 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Resample map from C#
Message-ID: <f3hftt$igl$1@sea.gmane.org>

Questions, questions. Hope someone will answer..

Short one:
Is it possible from C# to make use of GDAL to resample a map?  Like 
GDALWarp can do from the commandline?

Example?

Yours
Tomas


From szekerest at gmail.com  Tue May 29 17:13:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Resample map from C#
In-Reply-To: <f3hftt$igl$1@sea.gmane.org>
References: <f3hftt$igl$1@sea.gmane.org>
Message-ID: <f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>

Tomas,

Currently the interface has only a limited support to this effort.
Some time ago the only option I've found have been described at this
ticket:

http://trac.osgeo.org/gdal/ticket/1469

However I had to apply a patch to make this feature work and I don't
know exactly whether it have eventually been fixed or not. I'd
appreciate you to make a test, and provide the comment about the
results to this ticket.


Best regards,

Tamas


2007/5/29, Tomas R <monshi@home.se>:
> Questions, questions. Hope someone will answer..
>
> Short one:
> Is it possible from C# to make use of GDAL to resample a map?  Like
> GDALWarp can do from the commandline?
>
> Example?
>
> Yours
> Tomas
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mgleahy at golden.net  Tue May 29 19:28:14 2007
From: mgleahy at golden.net (Mike Leahy)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Connecting to PostGIS using rgdal
Message-ID: <BAY102-DAV18A5C95661E36D89E33FDBC2F0@phx.gbl>

Hello,

I am trying to see if I can access a table from PostGIS using rgdal in
the R statistics program.  I've been able to read information from
shapefiles, as the example below demonstrates.  However, whenever I try
to read from a PG connection, I get a message saying it cannot open the
file (also in my output below).  I'm on WinXP, running R-2.5.0, rgdal
0.5-9 installed from CRAN, and I have FWTools 1.3.1 installed.  Output
from ogrinfo (from FWTools) reports information from the same PG
connection/dataset I'm trying to access using rgdal without any trouble.

I'm wondering what step I've missed in the setup of R, rgdal, or
FWTools/GDAL.  I have added the FWTools bin folder to my Path
environment variable, as well as added GDAL_DATA, but that doesn't seem
to help.  Is there anything I'm likely to have missed?  I checked the
output from ogrDrivers(), and it looks like PostgreSQL isn't included -
so would this mean that I have to compile rgdal myself?  If so, are
there instructions for this?

Thanks in advance for any help,
Mike

===========================================

> ogrInfo("d:/data/canada","popplace")
Driver: ESRI Shapefile number of rows 497
Number of fields: 18
         name type length typeName
1        AREA    2     12     Real
2   PERIMETER    2     12     Real
3   POPPLACE_    2     11     Real
4  POPPLACE_I    2     15     Real
5  UNIQUE_KEY    4      5   String
6        NAME    4     50   String
7      NAME_E    4     50   String
8      NAME_F    4     50   String
9  UNIQUE_K_1    4      5   String
10 UNIQUE_K_2    4      5   String
11   REG_CODE    0      2  Integer
12      NTS50    4      7   String
13        LAT    4      7   String
14       LONG    4      7   String
15   SGC_CODE    0      7  Integer
16    CAPITAL    0      3  Integer
17  POP_RANGE    0      3  Integer
18       MSID    0      9  Integer

> readOGR("PG: host=127.0.0.1 dbname=rgdaltest user=postgres
port=5432","pop")
Error in ogrInfo(dsn = dsn, layer = layer) :
        Cannot open file

> ogrDrivers()
             name write
1          AVCBin FALSE
2             CSV  TRUE
3             DGN  TRUE
4  ESRI Shapefile  TRUE
5             GML  TRUE
6             KML  TRUE
7    MapInfo File  TRUE
8          Memory  TRUE
9             REC FALSE
10            S57  TRUE
11           SDTS FALSE
12          TIGER  TRUE
13        UK .NTF FALSE
14            VRT FALSE




From ek.kato at gmail.com  Wed May 30 04:45:56 2007
From: ek.kato at gmail.com (Etsushi Kato)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem with AAIGrid's large integer
Message-ID: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>

Hi,

I've found that gdal-1.4.1/frmts/aaigrid/aaigriddataset.cpp reads data
with integer >= 32768 as negative value (see
http://grass.itc.it/pipermail/grassuser/2007-May/039832.html).  To
import the data into grass, I need to modify aaigriddataset.cpp to use
Int32 instead of Int16 as in the attached file.

Is there any reason using Int16 for aaigrid format?  I hope this will
be fixed in the next version of gdal.

Cheers,
-- 
Etsushi Kato
ek.kato@gmail.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: aaigrid.diff
Type: application/octet-stream
Size: 1192 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070530/20a3ee7b/aaigrid.obj
From mateusz at loskot.net  Wed May 30 07:39:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GDAL Maintenance Reports updated
Message-ID: <465D627E.1060701@loskot.net>

Hi,

I appologize for longer silence and lack of reports.
I've just did the missing update:

http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByMateusz2007

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From pmin00 at gmail.com  Wed May 30 09:39:53 2007
From: pmin00 at gmail.com (Patrick Min)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
In-Reply-To: <27e900d30705290740t7908bb0ckb910e56dcff212fb@mail.gmail.com>
References: <27e900d30705290722vc034a82rca4f7a96285e60b5@mail.gmail.com>
	<27e900d30705290740t7908bb0ckb910e56dcff212fb@mail.gmail.com>
Message-ID: <27e900d30705300639n175c12e4xd404e54ff672e8da@mail.gmail.com>

Hello,

I've come up with a hacky solution to be able to
access all the data when the dataset is multitiled.

In my case, the data files are:
w001001.adf
w001000.adf
z001001.adf
z001002.adf

Below this e-mail I've included a Perl script that reads hdr.adf,
dblbnd.adf, sta.adf, and w001001x.adf, and produces some more
info than gdalinfo. Especially useful, it gives the number of tiles
in the index file, which you can use to compute where the next file
starts.

In my case w001001x.adf has info for 506520 tiles. Divide this by
HTilesPerRow (201) to get 2520, multiply by HTileYSize (4) to get
10800 rows. My HPixelSizeY is 5, so now I know the w001001.adf
has data for 10800 x 5 = 50400 pixel rows.

>From the boundary file I know that the upper left Y is at 475000,
so now I know the next file (apparently w001000.adf, strange ordering)
starts at 475000 - 50400 = 424600.

The 2nd and 3rd file have the same number of tiles as the 1st, so this
means the 3rd file starts at Y = 424600 - 50400 = 374200, and the 4th
at 374200 - 50400 = 323800. The 4th file has 170448 tiles (number
obtained by running the Perl script below as:
read_adf_info.pl z001002x.adf). All the math checks out with the
boundaries of the dataset.

To get data out of the 4th file, for example, I did the following:
- create a subdirectory "data" in the dataset directory
- move the w001* files in there
- create symbolic links:
  ln -s ./data/z001002.adf w001001.adf
  ln -s ./data/z001002x.adf w001001x.adf
  (this to make sure gdal_translate uses the 4th file)
- compute the -srcwin coordinates, taking into account the origin of
  the 4th file, which is down 3 x 50400 = 151200 from the dataset origin
- run gdal_translate

This example, more specifically: my dataset upper left is at
(13565, 475000). I wanted to extract a grid at upper left
(194990, 317925). The upper left of the 4th file is at
(13565, 323800), which, as far as gdal_translate is now concerned,
is the upper left of the whole dataset.

So the delta Y  = 323800 - 317925 = 5875, divide by cell size 5 =
5875 / 5 = row 1175.
The delta X = 194990 - 13565 = 180925 / 5 = column 36285.

The grid to extract is 600 by 600 cells, so the command becomes:

gdal_translate -oi AAIGrid -srcwin 36285 1175 600 600 hdr.adf mygrid.agr

This is a grid cell for which I had a known other height field, and
they corresponded :-)

I hope this helps people with larger datasets,
let me know if anything is not clear,

Patrick

--------------
Perl script: read_adf_info.pl
--------------
#!/usr/bin/perl

print "\nread_adf_info.pl\nwritten by Patrick Min, May 2007, v1\n\n";

$adfx_filespec = $ARGV[0];

if ($adfx_filespec eq "") {
    print "Usage: read_adf_info.pl [<adfx filespec>]\n";
    print "  if no filename is given, a default [w001001x.adf] is assumed\n\n";
    $adfx_filespec = "w001001x.adf";
}

&read_bounds_info;

&read_stats_info;

&read_header;

&read_index_info;

print "done\n\n";








sub convert_msb_int32
{
    my(@values) = @_;

    my $int_value = $values[0] * 256 * 256 * 256 + $values[1] * 256 *
256 + $values[2] * 256 + $values[3];

    return $int_value;

}  # convert_msb_int32




sub read_msb_int32
{
    my($handle) = @_;
    my $buf;

    read($handle, $buf, 4);
    my @b = unpack("CCCC", $buf);
    my $int32 = &convert_msb_int32(@b);

    return $int32;

}  # read_msb_int32



sub read_index_info
{
    #
    # construct index filename
    #
    open($index_handle, $adfx_filespec) || die "Could not open
[$adfx_filespec]\n";
    binmode $index_handle;

    #
    # read magic number
    #
    print "[$adfx_filespec] magic number [";
    read($index_handle, $magic, 8);
    @b = unpack("CCCCCCCC", $magic);
    for($i=0; $i < 8; $i++) {
	$hex = sprintf("%x", $b[$i]);
	print $hex;
	
    }
    print "]\n";

    read($index_handle, $dummy, 16);

    $filesize = 2 * &read_msb_int32($index_handle);
    print "Filesize [$filesize], ";
    $in_mb = $filesize / 1048576;
    print "  or [$in_mb MB]\n";

    read($index_handle, $dummy, 72);

    $nr_tiles = 0;
    open(LOG, "> tiles_index.log");
    while(!(eof($index_handle))) {
	
#    for($i=0; $i < $NR_TILES; $i++) {
	$tile_offset[$nr_tiles] = 2 * &read_msb_int32($index_handle);
	print LOG "Tile $nr_tiles offset [$tile_offset[$nr_tiles]]\n";

	$tile_sizes[$nr_tiles] = 2 * &read_msb_int32($index_handle);
	print LOG "Tile size [$tile_sizes[$nr_tiles]]\n";

	$nr_tiles++;
    }  # for
    close LOG;
    print "read index info for $nr_tiles tiles\n";

    close $index_handle;

}  # read_index_info




sub read_bounds_info
{
    $bounds_filespec = "dblbnd.adf";
    print "read_bounds_info($bounds_filespec)\n";

    open(BOUNDS, $bounds_filespec) || die "Could not open [$bounds_filespec]\n";
    binmode BOUNDS;

    @vars = ("LLX", "LLY", "URX", "URY");

    for($i=0; $i < 4; $i++) {

	read(BOUNDS, $buf, 8);
	@b = unpack("CCCCCCCC", $buf);

	for($j=0; $j < 8; $j++) {
	    $b2[$j] = $b[7 - $j];
	}

	$buf2 = pack("CCCCCCCC", @b2);

	$value = unpack("d", $buf2);

	print "  $vars[$i]: [$value]\n";

    }  # for

    close BOUNDS;
    print "\n";

}  # read_bounds_info



sub read_msb_double64
{
    my($handle) = @_;
    my $buf;
    my $j;
    my @b2;
    my $buf2;

    read($handle, $buf, 8);
    my @b = unpack("CCCCCCCC", $buf);

    for($j=0; $j < 8; $j++) {
	$b2[$j] = $b[7 - $j];
    }

    $buf2 = pack("CCCCCCCC", @b2);

    my $value = unpack("d", $buf2);

    return $value;

}  # read_msb_double64



sub read_stats_info
{
    $stats_filespec = "sta.adf";
    print "read_stats_info($stats_filespec)\n";

    open($stats_handle, $stats_filespec) || die "Could not open
[$stats_filespec]\n";
    binmode $stats_handle;

    @vars = ("SMin", "SMax", "SMean", "SStdDev");

    for($i=0; $i < 4; $i++) {

	$value = &read_msb_double64($stats_handle);
	print "  $vars[$i]: [$value]\n";

    }  # for

    close $stats_handle;
    print "\n";

}  # read_stats_info



sub read_header
{
    $header_filespec = "hdr.adf";
    print "read_header($header_filespec)\n";

    open($hdr_handle, $header_filespec) || die "Could not open
[$header_filespec]\n";
    binmode $hdr_handle;

    print "  HMagic [";
    for($i=0; $i < 8; $i++) {
	read($hdr_handle, $buf, 1);
	($id) = unpack("a", $buf);
	print $id;
    }
    print "]\n";

    read($hdr_handle, $dummy, 8);

    $celltype = &read_msb_int32($hdr_handle);
    print "  HCellType [$celltype]\n";

    read($hdr_handle, $dummy, 236);

    $pixel_size_x = &read_msb_double64($hdr_handle);
    print "  HPixelSizeX [$pixel_size_x]\n";
    $pixel_size_y = &read_msb_double64($hdr_handle);
    print "  HPixelSizeY [$pixel_size_y]\n";

    $unknown = &read_msb_double64($hdr_handle);
    print "  unknown1 [$unknown]\n";
    $unknown = &read_msb_double64($hdr_handle);
    print "  unknown2 [$unknown]\n";

    $tiles_per_row = &read_msb_int32($hdr_handle);
    print "  HTilesPerRow [$tiles_per_row]\n";

    $tiles_per_column = &read_msb_int32($hdr_handle);
    print "  HTilesPerColumn [$tiles_per_column]\n";

    $tile_x_size = &read_msb_int32($hdr_handle);
    print "  HTileXSize [$tile_x_size]\n";

    $unknown = &read_msb_int32($hdr_handle);
    print "  unknown [$unknown]\n";

    $tile_y_size = &read_msb_int32($hdr_handle);
    print "  HTileYSize [$tile_y_size]\n";

    close($hdr_handle);

}  # read_header

From monshi at home.se  Wed May 30 11:20:13 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: Resample map from C#
In-Reply-To: <f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>
References: <f3hftt$igl$1@sea.gmane.org>
	<f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>
Message-ID: <f3k4ng$sq7$1@sea.gmane.org>

I ran the code together with the image in the ticket and nothing 
happened to the picture.

But I'm not sure if I am on the right track.

What I would like to do is not reproject the map in anyway. What I am 
after is a possibility to down sample an image/a map using some good 
interpolations technique. My guess is that all I need is the last line 
in the code in the example in the ticket:
> Dataset dsw = drv_out.CreateCopy("CTest.tif", ds, 0, new string[] { 
> "INTERLEAVE=PIXEL",   null });
where I in the string is to provide the interpolation method and the 
size of the copy to save. How to format this string - I haven't got  
clue! Or actually, not even how to format the command line call to 
GDalwarp to use, for example, cubic splines. The correct documentation 
is not easy to find. The doc about gdalwarp options found here:
http://www.gdal.org/gdalwarp.html
doesn't seem to up to date.
Or am I totally of track?

Why use GDAL? Well I have a method using what is available in C# but it 
requires a an image in a format C# can read and it also requires me to 
load whole image to memory. Gdal seems to be able to parse the file and 
why not make use of Gdal when possible?

Yours
Tomas

Tamas Szekeres skrev:
> Tomas,
>
> Currently the interface has only a limited support to this effort.
> Some time ago the only option I've found have been described at this
> ticket:
>
> http://trac.osgeo.org/gdal/ticket/1469
>
> However I had to apply a patch to make this feature work and I don't
> know exactly whether it have eventually been fixed or not. I'd
> appreciate you to make a test, and provide the comment about the
> results to this ticket.
>
>
> Best regards,
>
> Tamas
>
>
> 2007/5/29, Tomas R <monshi@home.se>:
>> Questions, questions. Hope someone will answer..
>>
>> Short one:
>> Is it possible from C# to make use of GDAL to resample a map?  Like
>> GDALWarp can do from the commandline?
>>
>> Example?
>>
>> Yours
>> Tomas
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>



From neteler at itc.it  Wed May 30 12:15:26 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
Message-ID: <20070530161526.GC20135@moll.itc.it>

Hi,

should GDAL read the GTOPO30 data properly?

gdalinfo -mm W100N40.DEM
Driver: EHdr/ESRI .hdr Labelled
Size is 4800, 6000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (-100.000000000000000,39.999999999999993)
Pixel Size = (0.008333333333330,-0.008333333333330)
Corner Coordinates:
Upper Left  (-100.0000000,  40.0000000) (100d 0'0.00"W, 40d 0'0.00"N)
Lower Left  (-100.0000000, -10.0000000) (100d 0'0.00"W, 10d 0'0.00"S)
Upper Right ( -60.0000000,  40.0000000) ( 60d 0'0.00"W, 40d 0'0.00"N)
Lower Right ( -60.0000000, -10.0000000) ( 60d 0'0.00"W, 10d 0'0.00"S)
Center      ( -80.0000000,  15.0000000) ( 80d 0'0.00"W, 15d 0'0.00"N)
Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
  Min=-9999.000 Max=6710.000   Computed Min/Max=1.000,55537.000
  Minimum=-9999.000, Maximum=6710.000, Mean=-6078.800, StdDev=5044.200
  NoData Value=-9999

-> Computed Min/Max=1.000,55537.000
is confusing me. Maybe a bug in the data set?

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From warmerdam at pobox.com  Wed May 30 12:56:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <20070530161526.GC20135@moll.itc.it>
References: <20070530161526.GC20135@moll.itc.it>
Message-ID: <465DACC3.3030100@pobox.com>

Markus Neteler wrote:
> Hi,
> 
> should GDAL read the GTOPO30 data properly?
> 
> gdalinfo -mm W100N40.DEM
> Driver: EHdr/ESRI .hdr Labelled
> Size is 4800, 6000
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-100.000000000000000,39.999999999999993)
> Pixel Size = (0.008333333333330,-0.008333333333330)
> Corner Coordinates:
> Upper Left  (-100.0000000,  40.0000000) (100d 0'0.00"W, 40d 0'0.00"N)
> Lower Left  (-100.0000000, -10.0000000) (100d 0'0.00"W, 10d 0'0.00"S)
> Upper Right ( -60.0000000,  40.0000000) ( 60d 0'0.00"W, 40d 0'0.00"N)
> Lower Right ( -60.0000000, -10.0000000) ( 60d 0'0.00"W, 10d 0'0.00"S)
> Center      ( -80.0000000,  15.0000000) ( 80d 0'0.00"W, 15d 0'0.00"N)
> Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
>   Min=-9999.000 Max=6710.000   Computed Min/Max=1.000,55537.000
>   Minimum=-9999.000, Maximum=6710.000, Mean=-6078.800, StdDev=5044.200
>   NoData Value=-9999
> 
> -> Computed Min/Max=1.000,55537.000
> is confusing me. Maybe a bug in the data set?

Markus,

It would be helpful to see the .HDR file.  It seems likely that the
data is actually signed 16bit integer, but being interpreted as
unsigned 16bit integer.  EHDR .HDR files are notoriously underspecified.
I think when used with Arc/Info there was some information (like pixel
type) that was passed on the commandline or something.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 30 12:59:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: Resample map from C#
In-Reply-To: <f3k4ng$sq7$1@sea.gmane.org>
References: <f3hftt$igl$1@sea.gmane.org>
	<f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>
	<f3k4ng$sq7$1@sea.gmane.org>
Message-ID: <465DAD85.30800@pobox.com>

Tomas R wrote:
> I ran the code together with the image in the ticket and nothing 
> happened to the picture.
> 
> But I'm not sure if I am on the right track.
> 
> What I would like to do is not reproject the map in anyway. What I am 
> after is a possibility to down sample an image/a map using some good 
> interpolations technique. My guess is that all I need is the last line 
> in the code in the example in the ticket:
>> Dataset dsw = drv_out.CreateCopy("CTest.tif", ds, 0, new string[] { 
>> "INTERLEAVE=PIXEL",   null });
> where I in the string is to provide the interpolation method and the 
> size of the copy to save. How to format this string - I haven't got  
> clue! Or actually, not even how to format the command line call to 
> GDalwarp to use, for example, cubic splines. The correct documentation 
> is not easy to find. The doc about gdalwarp options found here:
> http://www.gdal.org/gdalwarp.html
> doesn't seem to up to date.
> Or am I totally of track?

Tomas,

The CreateCopy() method does not provide options to control the resampling
mechanism.  In fact, it copies it's source dataset at 1:1 so there is
no resampling.  If the source is a virtual dataset that downsamples some
other file, you would in theory need to pass the resampling type to the
VRT file.  *But* VRT files do not support any resampling type other than
that provided by GDALRasterIO() which is nearest neighbour.

Currently, in GDAL, only the specialized WarpAPI provides resampling
other than nearest neighbour.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 30 13:25:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem with AAIGrid's large integer
In-Reply-To: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>
References: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>
Message-ID: <465DB36C.9070609@pobox.com>

Etsushi Kato wrote:
> Hi,
> 
> I've found that gdal-1.4.1/frmts/aaigrid/aaigriddataset.cpp reads data
> with integer >= 32768 as negative value (see
> http://grass.itc.it/pipermail/grassuser/2007-May/039832.html).  To
> import the data into grass, I need to modify aaigriddataset.cpp to use
> Int32 instead of Int16 as in the attached file.
> 
> Is there any reason using Int16 for aaigrid format?  I hope this will
> be fixed in the next version of gdal.

Etsushi,

There is no compelling reason to use Int16 for the AAIGRID driver.  If
you want something done about this though, I'd urge you to file a bug
report properly against GDAL.

The downside of defaulting to Int32 for the driver is that it will really
bulk up output files and the Int32 data type is less widely support than
Int16.  And changing this behavior will no doubt cause some people some
pain.

But I think it may be necessary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed May 30 13:32:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Connecting to PostGIS using rgdal
In-Reply-To: <BAY102-DAV18A5C95661E36D89E33FDBC2F0@phx.gbl>
References: <BAY102-DAV18A5C95661E36D89E33FDBC2F0@phx.gbl>
Message-ID: <465DB51F.9060402@pobox.com>

Mike Leahy wrote:
> Hello,
> 
> I am trying to see if I can access a table from PostGIS using rgdal in
> the R statistics program.  I've been able to read information from
> shapefiles, as the example below demonstrates.  However, whenever I try
> to read from a PG connection, I get a message saying it cannot open the
> file (also in my output below).  I'm on WinXP, running R-2.5.0, rgdal
> 0.5-9 installed from CRAN, and I have FWTools 1.3.1 installed.  Output
> from ogrinfo (from FWTools) reports information from the same PG
> connection/dataset I'm trying to access using rgdal without any trouble.
> 
> I'm wondering what step I've missed in the setup of R, rgdal, or
> FWTools/GDAL.  I have added the FWTools bin folder to my Path
> environment variable, as well as added GDAL_DATA, but that doesn't seem
> to help.  Is there anything I'm likely to have missed?  I checked the
> output from ogrDrivers(), and it looks like PostgreSQL isn't included -
> so would this mean that I have to compile rgdal myself?  If so, are
> there instructions for this?

Mike,

Based on the ogrDrivers() output, it would appear that the rgdal
package you installed came with it's own copy of GDAL/OGR and that
does not include Postgis support.  Note that FWTools purposefully
uses it's own name for the GDAL DLL (gdal_fw.dll) to avoid conflicts
with other packages.  But this makes it hard to use FWTools DLLs
as replacements for other shipped DLLs.

Best regards,

>> ogrDrivers()
>              name write
> 1          AVCBin FALSE
> 2             CSV  TRUE
> 3             DGN  TRUE
> 4  ESRI Shapefile  TRUE
> 5             GML  TRUE
> 6             KML  TRUE
> 7    MapInfo File  TRUE
> 8          Memory  TRUE
> 9             REC FALSE
> 10            S57  TRUE
> 11           SDTS FALSE
> 12          TIGER  TRUE
> 13        UK .NTF FALSE
> 14            VRT FALSE
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Wed May 30 14:20:41 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: Resample map from C#
In-Reply-To: <f3k4ng$sq7$1@sea.gmane.org>
References: <f3hftt$igl$1@sea.gmane.org>
	<f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>
	<f3k4ng$sq7$1@sea.gmane.org>
Message-ID: <465DC079.8020709@tkk.fi>

Tomas R kirjoitti:
> I ran the code together with the image in the ticket and nothing 
> happened to the picture.
>
> But I'm not sure if I am on the right track.
>
> What I would like to do is not reproject the map in anyway. What I am 
> after is a possibility to down sample an image/a map using some good 
> interpolations technique.

Sounds like you simply need ReadRaster (in original size) and 
WriteRaster (in a new size) and do the interpolation in between and 
create/open/flush/close around.

At least that's the simple man's approach...

Ari


> My guess is that all I need is the last line in the code in the 
> example in the ticket:
>> Dataset dsw = drv_out.CreateCopy("CTest.tif", ds, 0, new string[] { 
>> "INTERLEAVE=PIXEL",   null });
> where I in the string is to provide the interpolation method and the 
> size of the copy to save. How to format this string - I haven't got  
> clue! Or actually, not even how to format the command line call to 
> GDalwarp to use, for example, cubic splines. The correct documentation 
> is not easy to find. The doc about gdalwarp options found here:
> http://www.gdal.org/gdalwarp.html
> doesn't seem to up to date.
> Or am I totally of track?
>
> Why use GDAL? Well I have a method using what is available in C# but 
> it requires a an image in a format C# can read and it also requires me 
> to load whole image to memory. Gdal seems to be able to parse the file 
> and why not make use of Gdal when possible?
>
> Yours
> Tomas
>
> Tamas Szekeres skrev:
>> Tomas,
>>
>> Currently the interface has only a limited support to this effort.
>> Some time ago the only option I've found have been described at this
>> ticket:
>>
>> http://trac.osgeo.org/gdal/ticket/1469
>>
>> However I had to apply a patch to make this feature work and I don't
>> know exactly whether it have eventually been fixed or not. I'd
>> appreciate you to make a test, and provide the comment about the
>> results to this ticket.
>>
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> 2007/5/29, Tomas R <monshi@home.se>:
>>> Questions, questions. Hope someone will answer..
>>>
>>> Short one:
>>> Is it possible from C# to make use of GDAL to resample a map?  Like
>>> GDALWarp can do from the commandline?
>>>
>>> Example?
>>>
>>> Yours
>>> Tomas
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From Chris.Barker at noaa.gov  Wed May 30 15:20:49 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GDAL binders at FOSS4G 2007
In-Reply-To: <465B30EA.5070809@tkk.fi>
References: <465B30EA.5070809@tkk.fi>
Message-ID: <465DCE91.6020501@noaa.gov>


Ari Jolma wrote:
> I'm thinking about whether to travel to Victoria and if yes, what to do 
> there except wander around aimlessly.

For what it's worth, there is about a 50% chance that I'll be there, and 
if so, I'd love to work on the Python Bindings.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From matt.wilkie at gov.yk.ca  Wed May 30 15:18:38 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem with AAIGrid's large integer
In-Reply-To: <465DB36C.9070609@pobox.com>
References: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>
	<465DB36C.9070609@pobox.com>
Message-ID: <465DCE0E.8020307@gov.yk.ca>

> There is no compelling reason to use Int16 for the AAIGRID driver.  If
> you want something done about this though, I'd urge you to file a bug
> report properly against GDAL.
> 
> The downside of defaulting to Int32 for the driver is that it will really
> bulk up output files and the Int32 data type is less widely support than
> Int16.  And changing this behavior will no doubt cause some people some
> pain.

I thought so at first, but according to the docs, GRIDS are always 
stored as 32bit, and the reported pixel depth is based on what the 
actual cell values are. This was a surprise to me. I guess I never 
noticed since grids are always compressed so the rasters were always in 
the size range expected for their bit depth.

"A grid dataset is always 32 bit (either signed, unsigned, or floating 
point), but ArcGIS shows it as being the most appropriate bit depth 
above (with regard to the cell values it contains); ArcInfo Workstation 
will always tell you the bit depth of the grid."


For the problem Etsushi encountered might it be sufficient to read the 
./info/[gridname].sta file and set the default output type from there? 
(e.g. use the same approach esri does)


http://tinyurl.com/23rfa9 - Bit depth capacity for raster dataset cells
http://tinyurl.com/24nl6a - About the ESRI Grid format
http://tinyurl.com/2gcadd - FAQ:  What are the item definitions 
available for ArcInfo GRID format?

(which go to:
http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?id=2662&pid=2652&topicname=Bit_depth_capacity_for_raster_dataset_cells
http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=About_the_ESRI_grid_format
http://support.esri.com/index.cfm?fa=knowledgebase.techarticles.articleShow&d=30447
)


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed May 30 16:28:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem with AAIGrid's large integer
In-Reply-To: <465DCE0E.8020307@gov.yk.ca>
References: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>
	<465DB36C.9070609@pobox.com> <465DCE0E.8020307@gov.yk.ca>
Message-ID: <465DDE78.8000608@pobox.com>

Matt Wilkie wrote:
> For the problem Etsushi encountered might it be sufficient to read the 
> ./info/[gridname].sta file and set the default output type from there? 
> (e.g. use the same approach esri does)

Matt,

The question is with regard to the ASCII Arc/Info Image Grid (AAIGRID)
format, not the AIGRID (ie. the binary format).  With the ascii grid
format it seems the only way I can find stuff out is to scan the whole
image which I am loath to do at open time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Wed May 30 16:32:02 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <465DACC3.3030100@pobox.com>
References: <20070530161526.GC20135@moll.itc.it> <465DACC3.3030100@pobox.com>
Message-ID: <20070530203202.GO20135@moll.itc.it>

On Wed, May 30, 2007 at 12:56:35PM -0400, Frank Warmerdam wrote:
>  Markus Neteler wrote:
> > Hi,
> > should GDAL read the GTOPO30 data properly?
> > gdalinfo -mm W100N40.DEM
> > Driver: EHdr/ESRI .hdr Labelled
> > Size is 4800, 6000
> > Coordinate System is:
> > GEOGCS["WGS 84",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS 84",6378137,298.257223563,
> >             AUTHORITY["EPSG","7030"]],
> >         TOWGS84[0,0,0,0,0,0,0],
> >         AUTHORITY["EPSG","6326"]],
> >     PRIMEM["Greenwich",0,
> >         AUTHORITY["EPSG","8901"]],
> >     UNIT["degree",0.0174532925199433,
> >         AUTHORITY["EPSG","9108"]],
> >     AXIS["Lat",NORTH],
> >     AXIS["Long",EAST],
> >     AUTHORITY["EPSG","4326"]]
> > Origin = (-100.000000000000000,39.999999999999993)
> > Pixel Size = (0.008333333333330,-0.008333333333330)
> > Corner Coordinates:
> > Upper Left  (-100.0000000,  40.0000000) (100d 0'0.00"W, 40d 0'0.00"N)
> > Lower Left  (-100.0000000, -10.0000000) (100d 0'0.00"W, 10d 0'0.00"S)
> > Upper Right ( -60.0000000,  40.0000000) ( 60d 0'0.00"W, 40d 0'0.00"N)
> > Lower Right ( -60.0000000, -10.0000000) ( 60d 0'0.00"W, 10d 0'0.00"S)
> > Center      ( -80.0000000,  15.0000000) ( 80d 0'0.00"W, 15d 0'0.00"N)
> > Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
> >   Min=-9999.000 Max=6710.000   Computed Min/Max=1.000,55537.000
> >   Minimum=-9999.000, Maximum=6710.000, Mean=-6078.800, StdDev=5044.200
> >   NoData Value=-9999
> > -> Computed Min/Max=1.000,55537.000
> > is confusing me. Maybe a bug in the data set?
> 
>  Markus,
> 
>  It would be helpful to see the .HDR file.  It seems likely that the
>  data is actually signed 16bit integer, but being interpreted as
>  unsigned 16bit integer.  EHDR .HDR files are notoriously underspecified.
>  I think when used with Arc/Info there was some information (like pixel
>  type) that was passed on the commandline or something.
>

Frank, 

it looks like this:

cat W100N40.HDR
BYTEORDER      M
LAYOUT       BIL
NROWS         6000
NCOLS         4800
NBANDS        1
NBITS         16
BANDROWBYTES         9600
TOTALROWBYTES        9600
BANDGAPBYTES         0
NODATA        -9999
ULXMAP        -99.99583333333334
ULYMAP        39.99583333333333
XDIM          0.00833333333333
YDIM          0.00833333333333

Best,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From ivan.lucena at pmldnet.com  Wed May 30 17:08:20 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <20070530203202.GO20135@moll.itc.it>
References: <20070530161526.GC20135@moll.itc.it> <465DACC3.3030100@pobox.com>
	<20070530203202.GO20135@moll.itc.it>
Message-ID: <000d01c7a2fe$a69e17c0$0a0a0a0a@idrisi.clarku.edu>

Markus,

I found one situation where the AUX file was inconsistent with the AIG
dataset. Gdalinfo was reporting correctly 'unsigned 8 bit', while ArcMap was
reporting 'unsigned 16'. I just remove the .AUX file and the problem was
gone. Is it possible that you are facing the same problem?

Best regards,

Ivan Lucena

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Markus Neteler
Sent: Wednesday, May 30, 2007 4:32 PM
To: GDAL-dev list
Subject: Re: [Gdal-dev] GTOPO30 and max value

On Wed, May 30, 2007 at 12:56:35PM -0400, Frank Warmerdam wrote:
>  Markus Neteler wrote:
> > Hi,
> > should GDAL read the GTOPO30 data properly?
> > gdalinfo -mm W100N40.DEM
> > Driver: EHdr/ESRI .hdr Labelled
> > Size is 4800, 6000
> > Coordinate System is:
> > GEOGCS["WGS 84",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS 84",6378137,298.257223563,
> >             AUTHORITY["EPSG","7030"]],
> >         TOWGS84[0,0,0,0,0,0,0],
> >         AUTHORITY["EPSG","6326"]],
> >     PRIMEM["Greenwich",0,
> >         AUTHORITY["EPSG","8901"]],
> >     UNIT["degree",0.0174532925199433,
> >         AUTHORITY["EPSG","9108"]],
> >     AXIS["Lat",NORTH],
> >     AXIS["Long",EAST],
> >     AUTHORITY["EPSG","4326"]]
> > Origin = (-100.000000000000000,39.999999999999993)
> > Pixel Size = (0.008333333333330,-0.008333333333330)
> > Corner Coordinates:
> > Upper Left  (-100.0000000,  40.0000000) (100d 0'0.00"W, 40d 0'0.00"N)
> > Lower Left  (-100.0000000, -10.0000000) (100d 0'0.00"W, 10d 0'0.00"S)
> > Upper Right ( -60.0000000,  40.0000000) ( 60d 0'0.00"W, 40d 0'0.00"N)
> > Lower Right ( -60.0000000, -10.0000000) ( 60d 0'0.00"W, 10d 0'0.00"S)
> > Center      ( -80.0000000,  15.0000000) ( 80d 0'0.00"W, 15d 0'0.00"N)
> > Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
> >   Min=-9999.000 Max=6710.000   Computed Min/Max=1.000,55537.000
> >   Minimum=-9999.000, Maximum=6710.000, Mean=-6078.800, StdDev=5044.200
> >   NoData Value=-9999
> > -> Computed Min/Max=1.000,55537.000
> > is confusing me. Maybe a bug in the data set?
> 
>  Markus,
> 
>  It would be helpful to see the .HDR file.  It seems likely that the
>  data is actually signed 16bit integer, but being interpreted as
>  unsigned 16bit integer.  EHDR .HDR files are notoriously underspecified.
>  I think when used with Arc/Info there was some information (like pixel
>  type) that was passed on the commandline or something.
>

Frank, 

it looks like this:

cat W100N40.HDR
BYTEORDER      M
LAYOUT       BIL
NROWS         6000
NCOLS         4800
NBANDS        1
NBITS         16
BANDROWBYTES         9600
TOTALROWBYTES        9600
BANDGAPBYTES         0
NODATA        -9999
ULXMAP        -99.99583333333334
ULYMAP        39.99583333333333
XDIM          0.00833333333333
YDIM          0.00833333333333

Best,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From monshi at home.se  Wed May 30 17:19:08 2007
From: monshi at home.se (Tomas R)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Re: Resample map from C#
In-Reply-To: <465DC079.8020709@tkk.fi>
References: <f3hftt$igl$1@sea.gmane.org>	<f3b73b7d0705291413hab02e0bj82914b33216431b@mail.gmail.com>	<f3k4ng$sq7$1@sea.gmane.org>
	<465DC079.8020709@tkk.fi>
Message-ID: <f3kpof$gru$1@sea.gmane.org>

Ari Jolma skrev:
> Tomas R kirjoitti:
>> I ran the code together with the image in the ticket and nothing 
>> happened to the picture.
>>
>> But I'm not sure if I am on the right track.
>>
>> What I would like to do is not reproject the map in anyway. What I am 
>> after is a possibility to down sample an image/a map using some good 
>> interpolations technique.
>
> Sounds like you simply need ReadRaster (in original size) and 
> WriteRaster (in a new size) and do the interpolation in between and 
> create/open/flush/close around.
>
> At least that's the simple man's approach...
>
> Ari
>
>
Well, since there seems to be nothing else in gdal to use... I hoped 
that I could call on some code that would to that for me..That is the 
simple man's approach :)

I guess it is not that hard to do it with my own code...not a big hard 
algorithm...the biggest problem is probably to decide how big piece of 
the map I am to resample at each step.

Totally OT -
Trying, command line, to translate a part of a  RIK-map to GeoTIFF. 
During the translation a lot of the geo-information is lost. For example 
what datum and what sphere the map projection use. ESPG data also is 
lost. No good, no good.
Should I create a ticket for this somewhere?
(the command I use is:
gdal_translate.exe -of gtiff  -projwin 1612005 6602275 1645680 6570945 
-CO COMPRESS=LZW ab.rik terr Stor_test.TIFF
)
Or to I have to set the projection by hand in the command line?

Yours
Tomas


From warmerdam at pobox.com  Wed May 30 20:41:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <20070530203202.GO20135@moll.itc.it>
References: <20070530161526.GC20135@moll.itc.it> <465DACC3.3030100@pobox.com>
	<20070530203202.GO20135@moll.itc.it>
Message-ID: <465E19BE.20600@pobox.com>

Markus Neteler wrote:
> Frank, 
> 
> it looks like this:
> 
> cat W100N40.HDR
> BYTEORDER      M
> LAYOUT       BIL
> NROWS         6000
> NCOLS         4800
> NBANDS        1
> NBITS         16
> BANDROWBYTES         9600
> TOTALROWBYTES        9600
> BANDGAPBYTES         0
> NODATA        -9999
> ULXMAP        -99.99583333333334
> ULYMAP        39.99583333333333
> XDIM          0.00833333333333
> YDIM          0.00833333333333

Markus,

You can add the "PIXELTYPE SIGNEDINT" line in the .hdr to force
interpretation of the file as signed rather than unsigned integers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Thu May 31 05:02:19 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <000d01c7a2fe$a69e17c0$0a0a0a0a@idrisi.clarku.edu>
References: <20070530161526.GC20135@moll.itc.it> <465DACC3.3030100@pobox.com>
	<20070530203202.GO20135@moll.itc.it>
	<000d01c7a2fe$a69e17c0$0a0a0a0a@idrisi.clarku.edu>
Message-ID: <20070531090218.GA21109@bartok.itc.it>

On Wed, May 30, 2007 at 05:08:20PM -0400, Ivan Lucena wrote:
> Markus,
> 
> I found one situation where the AUX file was inconsistent with the AIG
> dataset. Gdalinfo was reporting correctly 'unsigned 8 bit', while ArcMap was
> reporting 'unsigned 16'. I just remove the .AUX file and the problem was
> gone. Is it possible that you are facing the same problem?

Ivan,

I have no idea...:

tar xvfz ../w100n40.tar.gz
W100N40.DEM - DEM File
W100N40.DMW - World File
W100N40.GIF - Shaded Relief Image
W100N40.HDR - Header File
W100N40.PRJ - Projection File
W100N40.SCH - Source Map Header File
W100N40.SRC - Source Map
W100N40.STX - Statistics File

Not sure what could be taken as AUX file by GDAL.
 
Best regards,
 
Ivan Lucena

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From ivan.lucena at pmldnet.com  Thu May 31 07:52:08 2007
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <20070531090218.GA21109@bartok.itc.it>
References: <20070530161526.GC20135@moll.itc.it>
	<465DACC3.3030100@pobox.com><20070530203202.GO20135@moll.itc.it><000d01c7a2fe$a69e17c0$0a0a0a0a@idrisi.clarku.edu>
	<20070531090218.GA21109@bartok.itc.it>
Message-ID: <001101c7a37a$1e2d95b0$0a0a0a0a@idrisi.clarku.edu>

Markus,
I can see that you don't have one of those files, but since you mentioned:
>  I think when used with Arc/Info there was some information (like 
> pixel type) that was passed on the commandline or something.
That is where they are created.
Good Luck,
Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Markus Neteler
Sent: Thursday, May 31, 2007 5:02 AM
To: 'GDAL-dev list'
Subject: Re: [Gdal-dev] GTOPO30 and max value

On Wed, May 30, 2007 at 05:08:20PM -0400, Ivan Lucena wrote:
> Markus,
> 
> I found one situation where the AUX file was inconsistent with the AIG
> dataset. Gdalinfo was reporting correctly 'unsigned 8 bit', while ArcMap
was
> reporting 'unsigned 16'. I just remove the .AUX file and the problem was
> gone. Is it possible that you are facing the same problem?

Ivan,

I have no idea...:

tar xvfz ../w100n40.tar.gz
W100N40.DEM - DEM File
W100N40.DMW - World File
W100N40.GIF - Shaded Relief Image
W100N40.HDR - Header File
W100N40.PRJ - Projection File
W100N40.SCH - Source Map Header File
W100N40.SRC - Source Map
W100N40.STX - Statistics File

Not sure what could be taken as AUX file by GDAL.
 
Best regards,
 
Ivan Lucena

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From milo at 3dsite.nl  Thu May 31 08:16:44 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] OpenStreetMap support in OGR/GDAL
Message-ID: <465EBCAC.9000009@3dsite.nl>

Hello List!

I am a participant in the OpenStreetMap project, working on a global,
free dataset for all to use! OpenStreetMap currently has approx. 6000
participants world wide building mapdata.

OSM has it's own XML file format. For this file format, no converters to
GIS are available yet.

I was wondering if this would be an opportunity for the GDAL group?

Within our local (Dutch) section of OpenStreetMap there are a couple of
C++ developers. I allready asked them if they would be willing to
contribute to GDAL/OGR.

Kind regards,

Milo van der Linden
http://www.3dsite.nl
http://www.openstreetmap.org - The fastest growing free map of the world!
http://wiki.openstreetmap.org - All about the project

From miguelangel.querol at iver.es  Thu May 31 10:33:58 2007
From: miguelangel.querol at iver.es (Miguel)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Error opening HDF file
Message-ID: <465EDCD6.9020505@iver.es>

Hello,

I have a gdal compilation (release 1.4.0) with HDF4, HDF5 and Grass 
support. I have a test program that opens and closes some HDF4 image 
many times. The problem is when I have an HDF image wich has many 
subdatasets, Gdal crashes when is trying to open the image for the 31st 
time. That's the source code of my test program:

#include <stdio.h>
#include "gdal.h"

int main()
{
   GDALDatasetH  hDataset;
   int i = 0;
   char* file1 = 
"/home/miguel/cd_datos/Modis/MOD11A1.A2006365.h21v07.004.2007002014854.hdf"; 

   char* file2 = 
"/home/miguel/cd_datos/Modis/MYD09Q1.A2006361.h01v08.004.2007009060450.hdf"; 

   char* file3 = 
"/home/miguel/cd_datos/Modis/MOD09Q1.A2006361.h00v08.004.2007006103307.hdf"; 

   int j = 1;

   GDALAllRegister();

     for (i = 0 ; i < 15 ; i++){
       hDataset = GDALOpen( file1 , GA_ReadOnly );
       if( hDataset != NULL ){
           printf("Open image for %d time\n", j);
       j++;
       }
   GDALClose(hDataset);
   }
   for (i = 0 ; i < 15 ; i++){
       hDataset = GDALOpen( file2 , GA_ReadOnly );
       if( hDataset != NULL ){
           printf("Open image for %d time\n", j);
           j++;
       }
       GDALClose(hDataset);
   }
   for (i = 0 ; i < 15 ; i++){
       hDataset = GDALOpen( file3 , GA_ReadOnly );
       if( hDataset != NULL ){
           printf("Open image for %d time\n", j);
           j++;
       }
       GDALClose(hDataset);
   }
}

And that's the error:

...
Open image for 27 time
Open image for 28 time
Open image for 29 time
Open image for 30 time
ERROR 2: CPLMalloc(): Out of memory allocating -4 bytes.

I downlodaded many HDF4 images form the NASA ftp and this problem 
happens in all of them. Is there any limitation in the number of times I 
can open an HDF file with  many subdatasets? Maybe a bug?

Thank you!!
Best regards!

-- 
Miguel ?ngel Querol Carratal?
Equipo de desarrollo raster de gvSIG /
gvSIG raster development team.
IVER TI S.A.
C/ Salamanca, 50-52
46005-Valencia
Tlf.963354983  ext. 404
Tlf.+34963163400
www.iver.es
www.gvsig.com



From neteler at itc.it  Thu May 31 12:07:46 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] GTOPO30 and max value
In-Reply-To: <465E19BE.20600@pobox.com>
References: <20070530161526.GC20135@moll.itc.it> <465DACC3.3030100@pobox.com>
	<20070530203202.GO20135@moll.itc.it> <465E19BE.20600@pobox.com>
Message-ID: <20070531160746.GB9617@bartok.itc.it>

On Wed, May 30, 2007 at 08:41:34PM -0400, Frank Warmerdam wrote:
>  Markus Neteler wrote:
> > Frank, it looks like this:
> > cat W100N40.HDR
> > BYTEORDER      M
> > LAYOUT       BIL
> > NROWS         6000
> > NCOLS         4800
> > NBANDS        1
> > NBITS         16
> > BANDROWBYTES         9600
> > TOTALROWBYTES        9600
> > BANDGAPBYTES         0
> > NODATA        -9999
> > ULXMAP        -99.99583333333334
> > ULYMAP        39.99583333333333
> > XDIM          0.00833333333333
> > YDIM          0.00833333333333
> 
>  Markus,
> 
>  You can add the "PIXELTYPE SIGNEDINT" line in the .hdr to force
>  interpretation of the file as signed rather than unsigned integers.

Excellent! Now it works

gdalinfo -mm W100N40.DEM
Driver: EHdr/ESRI .hdr Labelled
...
Band 1 Block=4800x1 Type=Int16, ColorInterp=Undefined
  Min=-9999.000 Max=6710.000   Computed Min/Max=1.000,6710.000
  Minimum=-9999.000, Maximum=6710.000, Mean=-6078.800, StdDev=5044.200
  NoData Value=-9999

Thanks,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From matt.wilkie at gov.yk.ca  Thu May 31 12:28:04 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Problem with AAIGrid's large integer
In-Reply-To: <465DDE78.8000608@pobox.com>
References: <cca1454a0705300145v63c5b37ax7d7827f08dd47b56@mail.gmail.com>
	<465DB36C.9070609@pobox.com> <465DCE0E.8020307@gov.yk.ca>
	<465DDE78.8000608@pobox.com>
Message-ID: <465EF794.1010803@gov.yk.ca>

> The question is with regard to the ASCII Arc/Info Image Grid (AAIGRID)
> format, not the AIGRID (ie. the binary format).  

doh!

oops. oh well. I built a set of sample binary GRIDs for each of the 
possible bit depths. If they'd be of use to anyone I can pass 'em along.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu May 31 12:48:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Error opening HDF file
In-Reply-To: <465EDCD6.9020505@iver.es>
References: <465EDCD6.9020505@iver.es>
Message-ID: <465EFC45.7020806@pobox.com>

Miguel wrote:
> Hello,
> 
> I have a gdal compilation (release 1.4.0) with HDF4, HDF5 and Grass 
> support. I have a test program that opens and closes some HDF4 image 
> many times. The problem is when I have an HDF image wich has many 
> subdatasets, Gdal crashes when is trying to open the image for the 31st 
> time. That's the source code of my test program:
>

Miguel,

I suspect you are running into:

   http://trac.osgeo.org/gdal/ticket/1485

This fix was done after the 1.4.1 release, but should be available in the
nightly svn-stable snaphots.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From leonidas_liakos at yahoo.gr  Thu May 31 13:31:25 2007
From: leonidas_liakos at yahoo.gr (Leonidas Liakos)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
Message-ID: <465F066D.8090309@yahoo.gr>

I need to use ogr2ogr in my VB.NET code so as to export shapefiles to 
kml format.Is there any sample?tutorial how to do that?

From mateusz at loskot.net  Thu May 31 13:54:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F066D.8090309@yahoo.gr>
References: <465F066D.8090309@yahoo.gr>
Message-ID: <465F0BDB.2030700@loskot.net>

Leonidas Liakos wrote:
> I need to use ogr2ogr in my VB.NET code so as to export shapefiles to
> kml format.Is there any sample?tutorial how to do that?

I'm afraid but AFAIK there are no GDAL tutorials for VB.NET.
The only option I see is to check source code of ogr2ogr.cpp
and do some transition to .NET, using C# bindings.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From leonidas_liakos at yahoo.gr  Thu May 31 15:12:17 2007
From: leonidas_liakos at yahoo.gr (Leonidas Liakos)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F0BDB.2030700@loskot.net>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>
Message-ID: <465F1E11.90404@yahoo.gr>

I can use ogr in VB.NET through ogr_csharp.dll which is a wrapper.My 
problem is that I get confused about creating Drivers,Datasources etc.I 
just need some examples how to do that even in C#.

Mateusz Loskot wrote:
> I'm afraid but AFAIK there are no GDAL tutorials for VB.NET.
> The only option I see is to check source code of ogr2ogr.cpp
> and do some transition to .NET, using C# bindings.
>
> Cheers
>   

From szekerest at gmail.com  Thu May 31 15:30:14 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F1E11.90404@yahoo.gr>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>
	<465F1E11.90404@yahoo.gr>
Message-ID: <f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>

Take a look at the C# examples createdata.cs and ogrinfo.cs.

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/createdata.cs
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/ogrinfo.cs

Best regards,

Tamas



2007/5/31, Leonidas Liakos <leonidas_liakos@yahoo.gr>:
> I can use ogr in VB.NET through ogr_csharp.dll which is a wrapper.My
> problem is that I get confused about creating Drivers,Datasources etc.I
> just need some examples how to do that even in C#.
>
> Mateusz Loskot wrote:
> > I'm afraid but AFAIK there are no GDAL tutorials for VB.NET.
> > The only option I see is to check source code of ogr2ogr.cpp
> > and do some transition to .NET, using C# bindings.
> >
> > Cheers
> >
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Thu May 31 15:40:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>	
	<465F1E11.90404@yahoo.gr>
	<f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>
Message-ID: <465F249D.1060402@loskot.net>

Tamas Szekeres wrote:
> Take a look at the C# examples createdata.cs and ogrinfo.cs.
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/createdata.cs
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/ogrinfo.cs

Plus, the OGR tutorial is a must read here:

http://www.gdal.org/ogr/ogr_apitut.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From leonidas_liakos at yahoo.gr  Thu May 31 17:43:57 2007
From: leonidas_liakos at yahoo.gr (Leonidas Liakos)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F249D.1060402@loskot.net>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>	
	<465F1E11.90404@yahoo.gr>
	<f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>
	<465F249D.1060402@loskot.net>
Message-ID: <465F419D.6070108@yahoo.gr>

Until now I manage to Open a  Datasource and Create a Datasource.
The utility ogr2ogr converts shp to kml like that example:
ogr2ogr -f KML mypoints.kml sbpoints.shp

Question:
Is there any function which i can use to do tha progrmmatically OR I 
have to iterate in all the features of the Opened Datasource(shp) to the 
new Created DataSource(kml) and write each feature in that kml file?
My code until now:

        Dim ogr As New OSGeo.OGR.Ogr
        Dim kml As OSGeo.OGR.DataSource
        Dim driver As OSGeo.OGR.Driver
        Dim shp As OSGeo.OGR.DataSource
        Dim options(0) As String

        ogr.RegisterAll()
        shp = ogr.Open("c:\Point.kml", 0) 'Open a  Datasource
        driver = ogr.GetDriverByName("KML")
        options(0) = String.Empty
        kml = driver.CreateDataSource("C:\Point.kml", options) 'Create a 
Datasource

NEXT HOW TO IMPLEMENT ogr2ogr -f KML like in example?

Thank you for you help.Leonidas

From mateusz at loskot.net  Thu May 31 17:49:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F419D.6070108@yahoo.gr>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>	
	<465F1E11.90404@yahoo.gr>
	<f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>
	<465F249D.1060402@loskot.net> <465F419D.6070108@yahoo.gr>
Message-ID: <465F4304.9000406@loskot.net>

Leonidas Liakos wrote:
> Question: Is there any function which i can use to do tha
> progrmmatically OR I have to iterate in all the features of the
> Opened Datasource(shp) to the new Created DataSource(kml) and write
> each feature in that kml file? My code until now:

Leonidas,

The latter is the only option you have.

> NEXT HOW TO IMPLEMENT ogr2ogr -f KML like in example?

The best place to learn how to implement it is to look at source
code of the ogr2ogr.cpp program and then implement similar logic in
in C#, VB.NET, ...

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu May 31 18:26:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] Export shp to kml using ogr_csharp.dll
In-Reply-To: <465F419D.6070108@yahoo.gr>
References: <465F066D.8090309@yahoo.gr> <465F0BDB.2030700@loskot.net>	
	<465F1E11.90404@yahoo.gr>
	<f3b73b7d0705311230r1f567c25n877f9836ec51f478@mail.gmail.com>
	<465F249D.1060402@loskot.net> <465F419D.6070108@yahoo.gr>
Message-ID: <465F4BAA.3020006@pobox.com>

Leonidas Liakos wrote:
> Until now I manage to Open a  Datasource and Create a Datasource.
> The utility ogr2ogr converts shp to kml like that example:
> ogr2ogr -f KML mypoints.kml sbpoints.shp
> 
> Question:
> Is there any function which i can use to do tha progrmmatically OR I 
> have to iterate in all the features of the Opened Datasource(shp) to the 
> new Created DataSource(kml) and write each feature in that kml file?
> My code until now:

Leonidas,

You will need to do all the iteration over features.  There are no
convenience functions to encapsulate this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu May 31 18:34:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:53 2007
Subject: [Gdal-dev] ADF -> AAIGrid, "IReadBlock failed"
In-Reply-To: <27e900d30705300639n175c12e4xd404e54ff672e8da@mail.gmail.com>
References: <27e900d30705290722vc034a82rca4f7a96285e60b5@mail.gmail.com>
	<27e900d30705290740t7908bb0ckb910e56dcff212fb@mail.gmail.com>
	<27e900d30705300639n175c12e4xd404e54ff672e8da@mail.gmail.com>
Message-ID: <465F4D59.6080909@pobox.com>

Patrick Min wrote:
> Hello,
> 
> I've come up with a hacky solution to be able to
> access all the data when the dataset is multitiled.
> 
> In my case, the data files are:
> w001001.adf
> w001000.adf
> z001001.adf
> z001002.adf
> 

Patrick,

I've been digging into:

   http://trac.osgeo.org/gdal/ticket/1198

and added your notes.

But I'm still not clear on how the tile naming works, and without having
that well understood I think it is going to be hard for me to fix the driver.

Is there anyone on the list with Grid that would be willing to create some
test datasets in various sizes to try and work out the naming pattern?  If
so please add yourself to the trac bug cc: list, and add a note to the bug.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


