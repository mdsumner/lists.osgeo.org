From foyc at flighttactics.com  Wed Sep  3 19:18:30 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Wed, 3 Sep 2025 22:18:30 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
Message-ID: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>

Hi All,

My apologies if this has been asked previously. I?m relatively new to GDAL and recently was able to get it building with PDFium support using GDAL 3.11 for iOS. I?m the developer of a mapping application which allows users to import GeoPDFs and GeoTIFFs (among many other things). I was able to back port the GetExtent code that is going in to 3.12 and extract the extent from a GeoPDF, which was very exciting!

However, what I?m ultimately trying to do is take a GeoPDF/GeoTIFF and place it on the map. I do this now with KMZ GroundOverlays by bringing in the four corner points and transforming the image to fit those points. I?m guessing the flow I?ll use is something like (and assuming WGS84 just to make things easier):

- Call GDALGetExtentWGS84LongLat to get the envelope
- Call GDALGetGeoTransform to get the geotransfmrm
- Calculate the four corners to get the bounding box:
	- LL: (env.MinX, env.MinY)
	- UL: (env.MaxX, env.MinY)
	- LR: (env.MinX, env.MaxY)
	- UR: (env.MaxX, env.MaxY)
- Apply the transformation matrix from the GeoTransform

Does this seem roughly correct? I know there?s GDALWarp but I don?t know enough about it to know if it would help handle this situation.

Thanks so much!

Cory


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250903/d9bc397a/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250903/d9bc397a/attachment.bin>

From even.rouault at spatialys.com  Thu Sep  4 03:29:40 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Sep 2025 12:29:40 +0200
Subject: [gdal-dev] GDAL 3.11.4 release candidate available
Message-ID: <1bd9cbe2-abef-4bb1-ab68-5cc276f82a46@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.11.4 release candidate

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.11.4/gdal-3.11.4rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.11.4/gdal-3.11.4rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.11.4/gdal3114rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.11.4/gdalautotest-3.11.4rc1.tar.gz
https://download.osgeo.org/gdal/3.11.4/gdalautotest-3.11.4rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.11.4RC1/NEWS.md

I'll call for a vote next week if no serious issues are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dklaus at carlsonsw.com  Thu Sep  4 06:25:48 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Thu, 4 Sep 2025 09:25:48 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
Message-ID: <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>

Cory,

So I apologize if I misunderstood your question, but it sounds like you may
be trying to implement a geographic to grid transformation of a GeoPDF via
a matrix transformation of the four corners of the PDF?

I have written software to place imagery geolocated using geographic
coordinates into documents geolocated using grid coordinates. I spoke with
a geodesist at my company about a similar issue and he recommended that I
take a sample of points across the image, transform these points from
geographic coordinates to grid coordinates and compute a best fit affine
transformation between the two sets of points.

Obviously there is still error inherent in this process (it is best fit not
correct fit), but -- for our clients at least -- it produces results with
reasonable error and it is not terribly difficult to implement. If I
misunderstood your question I apologize. Anyway, I hope that is helpful,

David

On Wed, Sep 3, 2025 at 10:18?PM Cory Foy via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi All,
>
> My apologies if this has been asked previously. I?m relatively new to GDAL
> and recently was able to get it building with PDFium support using GDAL
> 3.11 for iOS. I?m the developer of a mapping application which allows users
> to import GeoPDFs and GeoTIFFs (among many other things). I was able to
> back port the GetExtent code that is going in to 3.12 and extract the
> extent from a GeoPDF, which was very exciting!
>
> However, what I?m ultimately trying to do is take a GeoPDF/GeoTIFF and
> place it on the map. I do this now with KMZ GroundOverlays by bringing in
> the four corner points and transforming the image to fit those points. I?m
> guessing the flow I?ll use is something like (and assuming WGS84 just to
> make things easier):
>
> - Call GDALGetExtentWGS84LongLat to get the envelope
> - Call GDALGetGeoTransform to get the geotransfmrm
> - Calculate the four corners to get the bounding box:
> - LL: (env.MinX, env.MinY)
> - UL: (env.MaxX, env.MinY)
> - LR: (env.MinX, env.MaxY)
> - UR: (env.MaxX, env.MaxY)
> - Apply the transformation matrix from the GeoTransform
>
> Does this seem roughly correct? I know there?s GDALWarp but I don?t know
> enough about it to know if it would help handle this situation.
>
> Thanks so much!
>
> Cory
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/f2aa0168/attachment.htm>

From foyc at flighttactics.com  Thu Sep  4 09:25:41 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Thu, 4 Sep 2025 12:25:41 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
Message-ID: <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>

Hi David,

> On Sep 4, 2025, at 9:25?AM, David Klaus <dklaus at carlsonsw.com> wrote:
> 
> So I apologize if I misunderstood your question, but it sounds like you may be trying to implement a geographic to grid transformation of a GeoPDF via a matrix transformation of the four corners of the PDF?

Sort of. And again, my apologies as I?m not a GIS expert either. Basically I?m reading in GeoPDFs and GeoTIFFs and need to place them overlaid on a map. For KMZ ImageOverlays this happens one of two ways - either coordinates of the four corners and a rotation degree for rectangles, or four coordinates when the image has been stretched at which point I use a transformation matrix to mold it into shape.

For the GeoPDFs I have to read in the corner coordinates, which I back ported the new GetExtent method to do. The corner coordinates look like this:

Corner Coordinates:
Upper Left  (-8800981.741, 4288851.900) ( 79d 3'38.03"W, 35d54'51.91"N)
Lower Left  (-8800543.967, 4287912.823) ( 79d 3'23.87"W, 35d54'27.31"N)
Upper Right (-8799766.057, 4289418.869) ( 79d 2'58.72"W, 35d55' 6.76"N)
Lower Right (-8799328.283, 4288479.792) ( 79d 2'44.56"W, 35d54'42.16"N)
Center      (-8800155.012, 4288665.846) ( 79d 3'11.30"W, 35d54'47.03?N)

But when I call GetExtent the corner coordinates don?t match the above output. It seems like the corners are off because they need to be rotated / have the GeoTransform matrix applied to them. 

The coordinates I get back from GetExtent:
[-79.06056186031576, -79.04571179080727, 35.907586153625296, 35.9185435558059]

The GeoTransform:
  -8800981.741226587, 1.534954250051887, 0.7153177546590841
  4288851.899958452, 0.7158702972076904, -1.534439284842128

I guess what I?m looking for is how to get the corner coordinates specified from gdalinfo above

> I have written software to place imagery geolocated using geographic coordinates into documents geolocated using grid coordinates. I spoke with a geodesist at my company about a similar issue and he recommended that I take a sample of points across the image, transform these points from geographic coordinates to grid coordinates and compute a best fit affine transformation between the two sets of points.

We?ve found for most of our images that the four corner coordinates work just fine for our use cases, which are more about things like lining up with roads etc (think of an event map PDF for a festival). I?m just not sure why GetExtent doesn?t seem to be applying the transformation (or maybe I?m just misunderstanding what it?s supposed to do or how I should get those values!)

Cory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/31d75fcf/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/31d75fcf/attachment-0001.bin>

From dklaus at carlsonsw.com  Thu Sep  4 09:40:53 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Thu, 4 Sep 2025 12:40:53 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
Message-ID: <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>

Cory,

I apologize. I'm not familiar with the GetExtent() function. So this is
just a guess and feel free to ignore it. Given that GetExtent() reports 2
coordinates, it seems to describe an axis aligned bounding. GeoTransform()
provides information to describe an oriented bounding box. Could this
perhaps be the source of disagreement between the two routines?

David

On Thu, Sep 4, 2025 at 12:26?PM Cory Foy via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi David,
>
> On Sep 4, 2025, at 9:25?AM, David Klaus <dklaus at carlsonsw.com> wrote:
>
> So I apologize if I misunderstood your question, but it sounds like you
> may be trying to implement a geographic to grid transformation of a GeoPDF
> via a matrix transformation of the four corners of the PDF?
>
>
> Sort of. And again, my apologies as I?m not a GIS expert either. Basically
> I?m reading in GeoPDFs and GeoTIFFs and need to place them overlaid on a
> map. For KMZ ImageOverlays this happens one of two ways - either
> coordinates of the four corners and a rotation degree for rectangles, or
> four coordinates when the image has been stretched at which point I use a
> transformation matrix to mold it into shape.
>
> For the GeoPDFs I have to read in the corner coordinates, which I back
> ported the new GetExtent method to do. The corner coordinates look like
> this:
>
> Corner Coordinates:
> Upper Left  (-8800981.741, 4288851.900) ( 79d 3'38.03"W, 35d54'51.91"N)
> Lower Left  (-8800543.967, 4287912.823) ( 79d 3'23.87"W, 35d54'27.31"N)
> Upper Right (-8799766.057, 4289418.869) ( 79d 2'58.72"W, 35d55' 6.76"N)
> Lower Right (-8799328.283, 4288479.792) ( 79d 2'44.56"W, 35d54'42.16"N)
> Center      (-8800155.012, 4288665.846) ( 79d 3'11.30"W, 35d54'47.03?N)
>
> But when I call GetExtent the corner coordinates don?t match the above
> output. It seems like the corners are off because they need to be rotated /
> have the GeoTransform matrix applied to them.
>
> The coordinates I get back from GetExtent:
> [-79.06056186031576, -79.04571179080727, 35.907586153625296,
> 35.9185435558059]
>
> The GeoTransform:
>   -8800981.741226587, 1.534954250051887, 0.7153177546590841
>   4288851.899958452, 0.7158702972076904, -1.534439284842128
>
> I guess what I?m looking for is how to get the corner coordinates
> specified from gdalinfo above
>
> I have written software to place imagery geolocated using geographic
> coordinates into documents geolocated using grid coordinates. I spoke with
> a geodesist at my company about a similar issue and he recommended that I
> take a sample of points across the image, transform these points from
> geographic coordinates to grid coordinates and compute a best fit affine
> transformation between the two sets of points.
>
>
> We?ve found for most of our images that the four corner coordinates work
> just fine for our use cases, which are more about things like lining up
> with roads etc (think of an event map PDF for a festival). I?m just not
> sure why GetExtent doesn?t seem to be applying the transformation (or maybe
> I?m just misunderstanding what it?s supposed to do or how I should get
> those values!)
>
> Cory
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/87964090/attachment.htm>

From foyc at flighttactics.com  Thu Sep  4 11:49:32 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Thu, 4 Sep 2025 14:49:32 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
 <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
Message-ID: <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>

> I apologize. I'm not familiar with the GetExtent() function. So this is just a guess and feel free to ignore it. Given that GetExtent() reports 2 coordinates, it seems to describe an axis aligned bounding. GeoTransform() provides information to describe an oriented bounding box. Could this perhaps be the source of disagreement between the two routines?

Thanks David. I realize now what?s going on is GetExtent and GetGeoTransform are returning different values than the command line gdalinfo is. 

For example, running gdalinfo on my PDF shows:

GeoTransform =
  -8800981.741226587, 1.534954250051887, 0.7153177546590841
  4288851.899958452, 0.7158702972076904, -1.534439284842128

Corner Coordinates:
Upper Left  (-8800981.741, 4288851.900) ( 79d 3'38.03"W, 35d54'51.91"N)
Lower Left  (-8800543.967, 4287912.823) ( 79d 3'23.87"W, 35d54'27.31"N)
Upper Right (-8799766.057, 4289418.869) ( 79d 2'58.72"W, 35d55' 6.76"N)
Lower Right (-8799328.283, 4288479.792) ( 79d 2'44.56"W, 35d54'42.16"N)
Center      (-8800155.012, 4288665.846) ( 79d 3'11.30"W, 35d54'47.03?N)

But calling it from my compiled version in the app on the same file gives me:

GeoTransform = 
-8800981.488120455, 1.5351602235290571, 0.7144694099544626, 
4288852.103036083, 0.7156171000026056, -1.5347947295515767

And an extent of [-8800981.488120455, -8799328.385944527, 4287912.808661598, 4289418.871779285]

All of which is _close_ but obviously not the same. Gdalinfo is the correct representation, so I?m not sure why I?m getting the data I?m getting from my compiled version. They?re both from 3.11. But that explains why I was so confused. 

Thanks for at least giving it a look and guess - going to have to figure out why these are getting different values.

Cory
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/e459f49d/attachment.bin>

From bdezonia at gmail.com  Thu Sep  4 11:54:02 2025
From: bdezonia at gmail.com (Barry DeZonia)
Date: Thu, 4 Sep 2025 13:54:02 -0500
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
 <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
 <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>
Message-ID: <CAKcvfuTxhfFGWuV6iRQDURRgozNcF0Vswm=nkZ30NCzAzXMYMg@mail.gmail.com>

Maybe out of left field but is one implementation working in double
and the other one working in float?

On Thu, Sep 4, 2025 at 1:50?PM Cory Foy via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> > I apologize. I'm not familiar with the GetExtent() function. So this is just a guess and feel free to ignore it. Given that GetExtent() reports 2 coordinates, it seems to describe an axis aligned bounding. GeoTransform() provides information to describe an oriented bounding box. Could this perhaps be the source of disagreement between the two routines?
>
> Thanks David. I realize now what?s going on is GetExtent and GetGeoTransform are returning different values than the command line gdalinfo is.
>
> For example, running gdalinfo on my PDF shows:
>
> GeoTransform =
>   -8800981.741226587, 1.534954250051887, 0.7153177546590841
>   4288851.899958452, 0.7158702972076904, -1.534439284842128
>
> Corner Coordinates:
> Upper Left  (-8800981.741, 4288851.900) ( 79d 3'38.03"W, 35d54'51.91"N)
> Lower Left  (-8800543.967, 4287912.823) ( 79d 3'23.87"W, 35d54'27.31"N)
> Upper Right (-8799766.057, 4289418.869) ( 79d 2'58.72"W, 35d55' 6.76"N)
> Lower Right (-8799328.283, 4288479.792) ( 79d 2'44.56"W, 35d54'42.16"N)
> Center      (-8800155.012, 4288665.846) ( 79d 3'11.30"W, 35d54'47.03?N)
>
> But calling it from my compiled version in the app on the same file gives me:
>
> GeoTransform =
> -8800981.488120455, 1.5351602235290571, 0.7144694099544626,
> 4288852.103036083, 0.7156171000026056, -1.5347947295515767
>
> And an extent of [-8800981.488120455, -8799328.385944527, 4287912.808661598, 4289418.871779285]
>
> All of which is _close_ but obviously not the same. Gdalinfo is the correct representation, so I?m not sure why I?m getting the data I?m getting from my compiled version. They?re both from 3.11. But that explains why I was so confused.
>
> Thanks for at least giving it a look and guess - going to have to figure out why these are getting different values.
>
> Cory_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From foyc at flighttactics.com  Thu Sep  4 11:56:56 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Thu, 4 Sep 2025 14:56:56 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <CAKcvfuTxhfFGWuV6iRQDURRgozNcF0Vswm=nkZ30NCzAzXMYMg@mail.gmail.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
 <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
 <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>
 <CAKcvfuTxhfFGWuV6iRQDURRgozNcF0Vswm=nkZ30NCzAzXMYMg@mail.gmail.com>
Message-ID: <56CCD472-6CBE-4175-82F3-63B6DD5E2031@flighttactics.com>


> Maybe out of left field but is one implementation working in double
> and the other one working in float?

Oh not out of left field at all! I could see those kinds of precision errors being a problem. But the C++ functions in things like gdaldataset.cpp are using double, and I?m also using Doubles in my port to Swift, so I don?t _think_ that?s the issue, but will definitely keep it in mind!

Cory

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/f8782523/attachment.bin>

From gdt at lexort.com  Thu Sep  4 12:11:50 2025
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 04 Sep 2025 15:11:50 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <56CCD472-6CBE-4175-82F3-63B6DD5E2031@flighttactics.com> (Cory
 Foy via gdal-dev's message of "Thu, 4 Sep 2025 14:56:56 -0400")
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
 <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
 <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>
 <CAKcvfuTxhfFGWuV6iRQDURRgozNcF0Vswm=nkZ30NCzAzXMYMg@mail.gmail.com>
 <56CCD472-6CBE-4175-82F3-63B6DD5E2031@flighttactics.com>
Message-ID: <rmi4itixcax.fsf@s1.lexort.com>

You didn't say, but presumably the geopdf is in some projected
coordinate system, and you are working in a projected coordinate system
also.   Or perhaps the geopdf is projected but not really aligned to a
particular CRS.  All things to understand.

Pixels have area, and you can talk about the coordinates of the upper
left corner of the pixel, or the coordinates of the center.  You might
consider if the same corner/center is in use.  Also compute distance
between the coordinates obtained from different methods to understand if
you are talking a small fraction of a pixel, about half a pixel, about a
pixel, or many pixels.   I don't have any basis for guessing there are
any issues, but I think your discrepency may have more information in it
than you've extracted so far.

From foyc at flighttactics.com  Thu Sep  4 14:01:49 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Thu, 4 Sep 2025 17:01:49 -0400
Subject: [gdal-dev] Corner Coordinates for GeoTIFF/GeoPDF
In-Reply-To: <rmi4itixcax.fsf@s1.lexort.com>
References: <D16A0FEB-2CB5-4548-B3A4-FE177C28B591@flighttactics.com>
 <CAJNrnBUR3t1_io__WiE0iEhEE=F05YRNiYvYQ8HDY4vycbR6Bg@mail.gmail.com>
 <9B47116C-7BB2-449E-9910-6F9ED57FAE04@flighttactics.com>
 <CAJNrnBVzU+9nj2C1KcZDwFf+3crzQ-fH=768ke=uygk9FnqKAg@mail.gmail.com>
 <6D012763-B06A-4896-A67B-610AD666A3C6@flighttactics.com>
 <CAKcvfuTxhfFGWuV6iRQDURRgozNcF0Vswm=nkZ30NCzAzXMYMg@mail.gmail.com>
 <56CCD472-6CBE-4175-82F3-63B6DD5E2031@flighttactics.com>
 <rmi4itixcax.fsf@s1.lexort.com>
Message-ID: <A6404BEB-1FAC-4EF4-B212-FA63986F7BE9@flighttactics.com>

Hi Greg,

> You didn't say, but presumably the geopdf is in some projected
> coordinate system, and you are working in a projected coordinate system
> also.   Or perhaps the geopdf is projected but not really aligned to a
> particular CRS.  All things to understand.

Thank you!! This was the exact pointer I needed. Looking closer at the gdalinfo with your comment in context made me realize I was seeing the WGS84, but missing the line above it that says PROJCRS["Popular Visualisation CRS / Mercator?! That let me do this:

let spatialReference: OGRSpatialReferenceH? = nil
OSRSetFromUserInput(spatialReference, "EPSG:3857")
var env: OGREnvelope = OGREnvelope()
GDALGetExtent(self.dataset, &env, spatialReference)

Which got me much closer to what I needed. Thanks so much for everyone?s help - I think I?m on the right path now.

Cory

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250904/45ce2bc9/attachment.bin>

From howard at hobu.co  Fri Sep  5 08:30:28 2025
From: howard at hobu.co (Howard Butler)
Date: Fri, 5 Sep 2025 10:30:28 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <54FD25CE-88F7-4B30-AF8E-CAC9A6AD777A@hobu.co>

Howard Butler, Dan Baston, Alessandro Pasotti, Michael Sumner, Even Rouault, Mike Smith, Norman Barker, Chris Toney, Daniel Morissette and Javier Jimenez Shaw held the monthly GDAL Maintainers Meeting on 08/28/2025. The following items were discussed and reported upon:

Project News
----------------------------

* Maxar is renewing its Bronze GDAL sponsorship for 2025. Thanks Maxar!
* Google is renewing its Silver GDAL sponsorship for 2025. Thanks Google!
* Many GDAL team members including Even, Dan, Mike Smith, Seth, Jukka, and Javier will be at the OSGeo Community Sprint in Riga Sept 29-Oct 3. See https://www.osgeo.org/events/join-osgeo-community-sprint-2025-at-bids-25-riga-latvia/ for more details.

Maintenance activities update
------------------------------------------

Alessandro

* PR reviews
* 'gdal raster contour' half-pixel issue https://github.com/OSGeo/gdal/issues/12938


Dan

* Add "gdal vector check-geometry" and "gdal vector check-coverages" command-line utilities to check that vector features have valid/simple geometries and form a valid polygonal coverage (#12880, #12908)
* Add "gdal vector clean-coverage" command-line utility to remove gaps and overlaps from a polygon dataset (#12819)
* Add "gdal raster as-features" command-line utility to convert raster pixels into tabular features (#12970)
* Fix bounding box check in "gdal raster clip" (#12814)
* Fix invalid memory access when reading values from a raster attribute table (#12862)
* Add Python API documentation for raster attribute tables (#12863), Algorithms (#12987), and Dataset GetExtent methods (#12860)
* Improve organization of Python API documentation (#12971)
* Fix typos in documentation for pipeline substitutions (#12969)


Even

* 70+ PRs and tickets
* CLI enhancements ? skip-errors
* Allow 'gdal raster info', 'gdal vector info', and 'gdal raster tile' to be last stages of pipeline
* 'gdal vector info --limit' to control output volume
* GDALG pipeline CLI substitutions ? reuse the same pipeline for inputs and parameters that are substitutable during the CLI call
* Security pass to prevent relative filename traversal and injections in all drivers except VRT. There are no known exploits or reports about this, but it seems prudent to prevent.
* VSI code linting and unique_ptr usage
* 30%+ PNG tile speedup in compression scenarios
* Planning to attend the OSGeo Community Sprint in Riga

Javier

* Planning to attend the OSGeo Community Sprint in Riga

Mike Smith

* Planning to attend the OSGeo Community Sprint in Riga

Chris Toney

* gdalraster R bindings work ? added new CLI bindings to R


The next GDAL Maintainers Meeting is 09/25/2025 at 13:00 UTC. GDAL PSC members and Pull Request contributors are welcome to contact me for an invite.

Howard



From foyc at flighttactics.com  Fri Sep  5 10:47:52 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Fri, 5 Sep 2025 13:47:52 -0400
Subject: [gdal-dev] GetGeoTransform returning different values
Message-ID: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>

Hi All,

Sorry for the bother again - I noticed that when I use gdalinfo to query a document (in this case, a GeoPDF) the geotransform coordinates are slightly different than when I can GetGeoTransform using the API on the same document with GDALOpen + GDALGetGeoTransform. But I also noticed the WKS seems to be different in the two as well. Is there a configuration or something else I might be missing that would cause these to be off? 

Cory

Gdalinfo:

PROJCRS["Popular Visualisation CRS / Mercator",
    BASEGEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4326]],
    CONVERSION["unnamed",
        METHOD["Popular Visualisation Pseudo Mercator",
            ID["EPSG",1024]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["False easting",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]]]


API:

PROJCS["Popular Visualisation CRS / Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs"]]
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/15c8be52/attachment-0001.bin>

From j1 at jimenezshaw.com  Fri Sep  5 10:51:23 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 5 Sep 2025 19:51:23 +0200
Subject: [gdal-dev] GetGeoTransform returning different values
In-Reply-To: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
References: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
Message-ID: <CADRrdKt+=3iD2pE97cd+m8xBZt-dHwQ3mwjQ3sEsvNPc2FtPGg@mail.gmail.com>

The first is in WKT2, while the second is in WKT1.

On Fri, 5 Sept 2025, 19:48 Cory Foy via gdal-dev, <gdal-dev at lists.osgeo.org>
wrote:

> Hi All,
>
> Sorry for the bother again - I noticed that when I use gdalinfo to query a
> document (in this case, a GeoPDF) the geotransform coordinates are slightly
> different than when I can GetGeoTransform using the API on the same
> document with GDALOpen + GDALGetGeoTransform. But I also noticed the WKS
> seems to be different in the two as well. Is there a configuration or
> something else I might be missing that would cause these to be off?
>
> Cory
>
> Gdalinfo:
>
> PROJCRS["Popular Visualisation CRS / Mercator",
>     BASEGEOGCRS["WGS 84",
>         DATUM["World Geodetic System 1984",
>             ELLIPSOID["WGS 84",6378137,298.257223563,
>                 LENGTHUNIT["metre",1]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433]],
>         ID["EPSG",4326]],
>     CONVERSION["unnamed",
>         METHOD["Popular Visualisation Pseudo Mercator",
>             ID["EPSG",1024]],
>         PARAMETER["Latitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8801]],
>         PARAMETER["Longitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8802]],
>         PARAMETER["False easting",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8806]],
>         PARAMETER["False northing",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8807]]],
>     CS[Cartesian,2],
>         AXIS["(E)",east,
>             ORDER[1],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]],
>         AXIS["(N)",north,
>             ORDER[2],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]]]
>
>
> API:
>
> PROJCS["Popular Visualisation CRS / Mercator",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AXIS["Latitude",NORTH],AXIS["Longitude",EAST],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH],EXTENSION["PROJ4","+proj=merc
> +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m
> +nadgrids=@null +wktext
> +no_defs"]]_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/b0dc4bf3/attachment.htm>

From even.rouault at spatialys.com  Fri Sep  5 10:51:57 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Sep 2025 19:51:57 +0200
Subject: [gdal-dev] GetGeoTransform returning different values
In-Reply-To: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
References: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
Message-ID: <963e9b94-dc59-48be-bb12-ac36ac88bc52@spatialys.com>


> Sorry for the bother again - I noticed that when I use gdalinfo to query a document (in this case, a GeoPDF) the geotransform coordinates are slightly different than when I can GetGeoTransform using the API on the same document with GDALOpen + GDALGetGeoTransform.

Presumably due to a difference in number of significant digits displayed 
in both cases.

>   But I also noticed the WKS seems to be different in the two as well. Is there a configuration or something else I might be missing that would cause these to be off?

gdalinfo uses WKT_2:2019, and GetProjectionRef() uses WKT1.? You can use 
GetSpatialRef()->exportToWKT(apszOptions) with apsOptions = { 
"FORMAT=WKT2_2019", nulptr } to get the same result

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/0bc4f50a/attachment.htm>

From ni_hao88 at hotmail.com  Fri Sep  5 11:35:52 2025
From: ni_hao88 at hotmail.com (ni hao)
Date: Fri, 5 Sep 2025 18:35:52 +0000
Subject: [gdal-dev] OpenEV
Message-ID: <DM5PR02MB386285A73C4FF27BD72688D3F103A@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

Sorry this is an OpenEV question: would anyone tell me where to download a OpenEV linux package that contains 'configure' and 'makefile.in' ?

Thank you!
Ni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/a3aeaf63/attachment.htm>

From michaeladamkatz at yahoo.com  Fri Sep  5 11:50:56 2025
From: michaeladamkatz at yahoo.com (Michael Katz)
Date: Fri, 5 Sep 2025 18:50:56 +0000 (UTC)
Subject: [gdal-dev] Issue with "inverted" .sid colors
In-Reply-To: <843816259.953411.1756121431233@mail.yahoo.com>
References: <mailman.8894.1755971770.21423.gdal-dev@lists.osgeo.org>
 <843816259.953411.1756121431233@mail.yahoo.com>
Message-ID: <830990963.455552.1757098256174@mail.yahoo.com>

 I have a program that uses GDAL for reading .sid files. It works well for many .sid files, but recently a user sent a file where the colors look incorrect in my program, and they look incorrect in the same way in QGIS, which makes me think it might be a problem in GDAL. The images are linked below.
The first image is how a certain part of the .sid file looks in my program and in QGIS. The second image shows how it looks (correct) in the LizardTech GeoViewer program. Because both my program and QGIS show the same issue, I am wondering if it's a problem in GDAL or its .sid plugin.
You can see that many of the colors (the red container and the red earth, and the green of the trees) seem washed out in the QGIS/MARPLOT image. But you also see that some of the colors seem to be inverted -- the shadows around the trees are white, and so are the long horizontal black containers. It's perhaps behaving as if it's confusing signed and unsigned values -- values under a certain threshold?(such as the near 0,0,0 black values for the tree shadows and the black containers) are being interpreted as actually the highest values, near FF,FF,FF white. And I guess that could give a washed-out look to the other colors like green and red -- instead of appearing as the low valued dark versions, they are somehow being interpreted as the corresponding light versions. I would think they would invert colors (the trees appearing red or blue), but I suppose there are various kinds of signed/unsigned mappings with colors.
Is anyone familiar with this phenomenon?
(I can provide the .sid file. It's about 800 MB.)
IMAGES:
GDAL image (my program and QGIS):?https://drive.google.com/file/d/11dYIs2BhmgSNmSetO6XNr-Redx9uKYjA/view?usp=sharing
GeoViewer image:?https://drive.google.com/file/d/1BZqto8vRr4QcKoCS4kEn3AT87yYs9hmi/view?usp=sharing
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/d96e0cfe/attachment-0001.htm>

From foyc at flighttactics.com  Fri Sep  5 12:31:48 2025
From: foyc at flighttactics.com (Cory Foy)
Date: Fri, 5 Sep 2025 15:31:48 -0400
Subject: [gdal-dev] GetGeoTransform returning different values
In-Reply-To: <963e9b94-dc59-48be-bb12-ac36ac88bc52@spatialys.com>
References: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
 <963e9b94-dc59-48be-bb12-ac36ac88bc52@spatialys.com>
Message-ID: <5B3DAC26-C53F-47B0-A9AD-80F133F589DA@flighttactics.com>

Hi Even,

>>  But I also noticed the WKS seems to be different in the two as well. Is there a configuration or something else I might be missing that would cause these to be off? 
> gdalinfo uses WKT_2:2019, and GetProjectionRef() uses WKT1.  You can use GetSpatialRef()->exportToWKT(apszOptions) with apsOptions = { "FORMAT=WKT2_2019", nulptr } to get the same result
> 

Ah, that makes sense!

>> Sorry for the bother again - I noticed that when I use gdalinfo to query a document (in this case, a GeoPDF) the geotransform coordinates are slightly different than when I can GetGeoTransform using the API on the same document with GDALOpen + GDALGetGeoTransform.
> Presumably due to a difference in number of significant digits displayed in both cases.
> 
For the GeoTransform, I?m pushing them out to the same significant digits:

Gdalinfo:
-8800981.741226587, 1.534954250051887, 0.7153177546590841
4288851.899958452, 0.7158702972076904, -1.534439284842128

API:
-8800981.488120455, 1.5351602235290571, 0.7144694099544626, 
4288852.103036083, 0.7156171000026056, -1.5347947295515767

From what I can see, they seem to be kind of far apart to be just significant digits. It?s calculating different pixel sizes and rotations which in turn is causing the lat/lon conversion to be off. The only other thing I can think of is that I compiled the API with PDFium and I believe the homebrew install uses Poppler. I just want to make sure I?m not misunderstanding something with how I?m using this.

Thanks!

Cory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/3204e846/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 3965 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250905/3204e846/attachment.bin>

From even.rouault at spatialys.com  Fri Sep  5 14:24:27 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 5 Sep 2025 23:24:27 +0200
Subject: [gdal-dev] GetGeoTransform returning different values
In-Reply-To: <5B3DAC26-C53F-47B0-A9AD-80F133F589DA@flighttactics.com>
References: <4D532919-B2ED-4AEA-BDA8-6DF25A77F151@flighttactics.com>
 <963e9b94-dc59-48be-bb12-ac36ac88bc52@spatialys.com>
 <5B3DAC26-C53F-47B0-A9AD-80F133F589DA@flighttactics.com>
Message-ID: <fc0620fe-93c2-4b61-b455-407a0550edf4@spatialys.com>


>
> From what I can see, they seem to be kind of far apart to be just 
> significant digits. It?s calculating different pixel sizes and 
> rotations which in turn is causing the lat/lon conversion to be off. 
> The only other thing I can think of is that I compiled the API with 
> PDFium and I believe the homebrew install uses Poppler.

Ah yes that might be it. Such differences ring a bell. I never dig up 
completely to figure out but I presume that one of the backend must just 
use 32-bit floats at some points whereas the other one 64 bit floats.



