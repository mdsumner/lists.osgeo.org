From cfis at interserv.com  Sat Oct  1 04:03:39 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
Message-ID: <433E42DB.2050000@interserv.com>

The various TestCapability methods in OGR have a return type of integer. 
  However, if you read the OGR C API documentation its says:

"Returns: TRUE if the layer has the requested capability, or FALSE 
otherwise. OGRLayers will return FALSE for any unrecognized capabilities."

So it seems like the intent it to return a boolean.  In C-like languages 
returning an int is ok, since 0 evaluates to false.

This however, is not the case in all languages.  In Ruby, for example, 
false is either nil (same as NULL or PyNone) or false.  Thus the value 0 
does *not* evaluate to false.  That means you can't do something what is 
natural:

if lyr.test_capability( 'FastGetExtent')

It will always evaluate to true in Ruby!

I would like to change the SWIG wrapper code so that all the 
testcapability methods return booleans.  I think this is ok, since the 
bindings are built using SWIG's C++ mode, so boolean is a supported data 
type.  That way I don't have to put in a separate mapping for these 
methods just in the Ruby bindings.

Thanks,

Charlie


From ari.jolma at tkk.fi  Sat Oct  1 05:14:08 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <433E42DB.2050000@interserv.com>
References: <433E42DB.2050000@interserv.com>
Message-ID: <433E5360.6060901@tkk.fi>

Charlie Savage kirjoitti:

>
> I would like to change the SWIG wrapper code so that all the 
> testcapability methods return booleans.  I think this is ok, since the 
> bindings are built using SWIG's C++ mode, so boolean is a supported 
> data type.  That way I don't have to put in a separate mapping for 
> these methods just in the Ruby bindings.


Seems ok to me also. Note that there might be other methods too subject 
to this change, e.g. int GDALDataTypeIsComplex( GDALDataType ); in gdal.i

Ari
 

>
> Thanks,
>
> Charlie
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From Martin.Spott at mgras.net  Sat Oct  1 08:02:25 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
Message-ID: <dhltsh$sms$1@osprey.mgras.de>

Frank Warmerdam wrote:

> Yes, surely the fastest release turn around in GDAL history.

I like it, because it compiles on Solaris without hassle - while 1.3.0
didn't. As far as I realized there is no test suite or sort of that. Do
you want me to run certain commands to test for compatibility ?

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From ari.jolma at tkk.fi  Sat Oct  1 08:59:36 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <dhltsh$sms$1@osprey.mgras.de>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de>
Message-ID: <433E8838.7020505@tkk.fi>

Martin Spott kirjoitti:

>Frank Warmerdam wrote:
>
>  
>
>>Yes, surely the fastest release turn around in GDAL history.
>>    
>>
>
>I like it, because it compiles on Solaris without hassle - while 1.3.0
>didn't. As far as I realized there is no test suite or sort of that. Do
>you want me to run certain commands to test for compatibility ?
>  
>

Frank has his tests in Python I've been told, but there is also a quite 
good test suite of a subset of  the capabilities of gdal in swig/perl, 
if I may say so. It requires that gdal itself is installed but it 
doesn't require that you've installed the Perl API. Say cd swig/perl; 
make; make -f Makefile_gdal test. It should report around 20 "unexpected 
failures", which are not that unexpected actually. I'd like to know 
what's your result running that test.

Ari

>Cheers,
>	Martin.
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From Martin.Spott at mgras.net  Sat Oct  1 09:41:50 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de>
Message-ID: <dhm3mu$10gu$1@osprey.mgras.de>

Martin Spott wrote:

> I like it, because it compiles on Solaris without hassle - while 1.3.0
> didn't.

Aaaah, wrong, still the same error, apparently I overlooked this.
Please consider this as a simple notice, at the moment I don't have the
time to dig further into it. OGDI-3.1.5 is installed in /opt/GRASS/:


make[3]: Entering directory `/usr/local/src/gdal-1.3.1a2/ogr/ogrsf_frmts/ogdi'
/bin/sh ../../../libtool --mode=compile g++ -mcpu=hypersparc -mtune=hypersparc -Wall  -O3   -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port  -c -o ../o/ogrogdidriver.o ogrogdidriver.cpp
 g++ -mcpu=hypersparc -mtune=hypersparc -Wall -O3 -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port -c ogrogdidriver.cpp -o ../o/ogrogdidriver.o
In file included from ../../ogr_spatialref.h:102,
                 from ../../ogr_geometry.h:210,
                 from ../../ogr_feature.h:131,
                 from ../ogrsf_frmts.h:196,
                 from ogrogdi.h:63,
                 from ogrogdidriver.cpp:46:
../../ogr_srs_api.h:384: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:385: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:386: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:387: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:398: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:409: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:410: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:411: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:421: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:424: error: expected init-declarator before "OSRGetAttrValue"
../../ogr_srs_api.h:424: error: expected `,' or `;' before "OSRGetAttrValue"
../../ogr_srs_api.h:444: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:679: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:682: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:685: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:689: error: `CPL_STDCALL' does not name a type
make[3]: *** [../o/ogrogdidriver.o] Error 1
/bin/sh ../../../libtool --mode=compile g++ -mcpu=hypersparc -mtune=hypersparc -Wall  -O3   -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port  -c -o ../o/ogrogdidatasource.o ogrogdidatasource.cpp
 g++ -mcpu=hypersparc -mtune=hypersparc -Wall -O3 -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port -c ogrogdidatasource.cpp -o ../o/ogrogdidatasource.o
In file included from ../../ogr_spatialref.h:102,
                 from ../../ogr_geometry.h:210,
                 from ../../ogr_feature.h:131,
                 from ../ogrsf_frmts.h:196,
                 from ogrogdi.h:63,
                 from ogrogdidatasource.cpp:61:
../../ogr_srs_api.h:384: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:385: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:386: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:387: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:398: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:409: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:410: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:411: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:421: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:424: error: expected init-declarator before "OSRGetAttrValue"
../../ogr_srs_api.h:424: error: expected `,' or `;' before "OSRGetAttrValue"
../../ogr_srs_api.h:444: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:679: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:682: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:685: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:689: error: `CPL_STDCALL' does not name a type
make[3]: *** [../o/ogrogdidatasource.o] Error 1
/bin/sh ../../../libtool --mode=compile g++ -mcpu=hypersparc -mtune=hypersparc -Wall  -O3   -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port  -c -o ../o/ogrogdilayer.o ogrogdilayer.cpp
 g++ -mcpu=hypersparc -mtune=hypersparc -Wall -O3 -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port -c ogrogdilayer.cpp -o ../o/ogrogdilayer.o
In file included from ../../ogr_spatialref.h:102,
                 from ../../ogr_geometry.h:210,
                 from ../../ogr_feature.h:131,
                 from ../ogrsf_frmts.h:196,
                 from ogrogdi.h:63,
                 from ogrogdilayer.cpp:73:
../../ogr_srs_api.h:384: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:385: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:386: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:387: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:398: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:409: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:410: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:411: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:421: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:424: error: expected init-declarator before "OSRGetAttrValue"
../../ogr_srs_api.h:424: error: expected `,' or `;' before "OSRGetAttrValue"
../../ogr_srs_api.h:444: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:679: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:682: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:685: error: `CPL_STDCALL' does not name a type
../../ogr_srs_api.h:689: error: `CPL_STDCALL' does not name a type
make[3]: *** [../o/ogrogdilayer.o] Error 1
make[3]: Target `default' not remade because of errors.
make[3]: Leaving directory `/usr/local/src/gdal-1.3.1a2/ogr/ogrsf_frmts/ogdi'
make[2]: *** [ogdi-target] Error 2


Cheers,
	Marttin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From cfis at interserv.com  Sat Oct  1 17:10:28 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <dhltsh$sms$1@osprey.mgras.de>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de>
Message-ID: <433EFB44.5030104@interserv.com>

Check out gdalautotest from CVS.  There is a test-suite in Python, and a 
partial one in Ruby (its slowly growing).

Ari, maybe this is where the Perl tests should go to stay consistent?

Charlie


Martin Spott wrote:
> Frank Warmerdam wrote:
> 
>> Yes, surely the fastest release turn around in GDAL history.
> 
> I like it, because it compiles on Solaris without hassle - while 1.3.0
> didn't. As far as I realized there is no test suite or sort of that. Do
> you want me to run certain commands to test for compatibility ?
> 
> Cheers,
> 	Martin.



From JohnRountree at msn.com  Sat Oct  1 12:39:21 2005
From: JohnRountree at msn.com (John O Rountree)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Wrong offset or trade secret
Message-ID: <BAY106-DAV24E419C7277B1EA00DA7C5C68E0@phx.gbl>

Hello looking for help. I must be stupid.

 

I wrote a geotiff parser just to know how! The test file uses little-endian "MM". The offsets points to correct information for tags with Field Types other than the two double (8 byte) values; tags 33550 & 33922.  ModelPixelScaleX is suppose to = 60 and Y = 60. Raw directory Data = 33550, 12, 3, 262830; The 262830 offset points to (8bytes) 0,0,0,0,0,0,78,64 and Y = the same 78,64 value. There is no way using little or big-endian that this will ever = 60! Using little-endian actual value would be 4.6********+e18. A Huge # and the same results with ModelTiePointTagI-K = huge #'s! 

The file is OK as other readers extract the correct values. IS THERE SOME MATH REQUIRED to convert 4.6*****+e18 # to 60?

 

Thanks for any insight; no one else seems to know.

John Rountree
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051001/9f076f84/attachment.html
From warmerdam at pobox.com  Sat Oct  1 17:32:37 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <433EFB44.5030104@interserv.com>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
Message-ID: <931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>

On 10/1/05, Charlie Savage <cfis@interserv.com> wrote:
> Check out gdalautotest from CVS.  There is a test-suite in Python, and a
> partial one in Ruby (its slowly growing).
>
> Ari, maybe this is where the Perl tests should go to stay consistent?

Charlie,

I have prepared a 1.3.1 snapshot of the autotest suite at:

  http://www.gdal.org/dl/gdalautotest-1.3.1.tar.gz

A small autotest capability within the swig/perl directory is fine.
However, at the point where it needs significant amounts of data
or other complexity I would appreciate it moving into the
gdalautotest tree.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Oct  1 17:35:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Wrong offset or trade secret
In-Reply-To: <BAY106-DAV24E419C7277B1EA00DA7C5C68E0@phx.gbl>
References: <BAY106-DAV24E419C7277B1EA00DA7C5C68E0@phx.gbl>
Message-ID: <931f8ea90510011435h2d818768x5e349127168e9a7@mail.gmail.com>

On 10/1/05, John O Rountree <JohnRountree@msn.com> wrote:
> I wrote a geotiff parser just to know how! The test file uses little-endian
> "MM". The offsets points to correct information for tags with Field Types
> other than the two double (8 byte) values; tags 33550 & 33922.
> ModelPixelScaleX is suppose to = 60 and Y = 60. Raw directory Data = 33550,
> 12, 3, 262830; The 262830 offset points to (8bytes) 0,0,0,0,0,0,78,64 and Y
> = the same 78,64 value. There is no way using little or big-endian that this
> will ever = 60! Using little-endian actual value would be 4.6********+e18. A
> Huge # and the same results with ModelTiePointTagI-K = huge #'s!
>
> The file is OK as other readers extract the correct values. IS THERE SOME
> MATH REQUIRED to convert 4.6*****+e18 # to 60?

John,

The values are IEEE double precision float values, but beyond that byte swapping
should be the only issue to deal with.  If you want more help you might need to
post the file.  Writing a new GeoTIFF parser (for kicks?) would likely be a
more appropriate topic on the geotiff mailing list.  See:

  http://geotiff.maptools.org/

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Oct  1 17:37:40 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <433E5360.6060901@tkk.fi>
References: <433E42DB.2050000@interserv.com> <433E5360.6060901@tkk.fi>
Message-ID: <931f8ea90510011437u75b3c21ct560d5931459298e0@mail.gmail.com>

On 10/1/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Charlie Savage kirjoitti:
>
> >
> > I would like to change the SWIG wrapper code so that all the
> > testcapability methods return booleans.  I think this is ok, since the
> > bindings are built using SWIG's C++ mode, so boolean is a supported
> > data type.  That way I don't have to put in a separate mapping for
> > these methods just in the Ruby bindings.
>
>
> Seems ok to me also. Note that there might be other methods too subject
> to this change, e.g. int GDALDataTypeIsComplex( GDALDataType ); in gdal.i

Guys,

I think this is a reasonable idea too.  Note that I deliberately avoid
use of the boolean type in my code due to nightmares in the past
with generically named boolean types and conflicts in their
definition in different packages.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Sun Oct  2 04:50:58 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
Message-ID: <433F9F72.1090505@tkk.fi>

Frank Warmerdam kirjoitti:

>On 10/1/05, Charlie Savage <cfis@interserv.com> wrote:
>  
>
>>Check out gdalautotest from CVS.  There is a test-suite in Python, and a
>>partial one in Ruby (its slowly growing).
>>
>>Ari, maybe this is where the Perl tests should go to stay consistent?
>>    
>>
>
>Charlie,
>
>I have prepared a 1.3.1 snapshot of the autotest suite at:
>
>  http://www.gdal.org/dl/gdalautotest-1.3.1.tar.gz
>
>A small autotest capability within the swig/perl directory is fine.
>However, at the point where it needs significant amounts of data
>or other complexity I would appreciate it moving into the
>gdalautotest tree.
>  
>

I confess I haven't looked at the autotest suite at all. The test code 
(test.pl) in swig/perl is a top-down, boot-strap test. It is a top-down 
test in the sense it tries to test everything that's available through 
the Perl API in a general sense. It currently overlooks very many 
details and does not check against programmers errors (because many 
mistakes still cause a segfault). It is a boot-strap test in the sense 
that it creates a gdal dataset or an ogr datasource first with known 
properties and then opens it and checks if the properties come back the 
same. I'm planning to put more tests for checking that the interface 
works as it should (typemaps are ok) and that it is more fool-proof.

gdalautotest-1.3.1.tar.gz is 283k and gdal-1.3.1a2.tar.gz is 6.5M. A stupid question comes to mind: why are they separate? 

Testing is of course a large subject but I'd like to have a good self-test an integrated part of the Perl module as is common (required in fact) in Perl world (the normal install procedure is perl Makefile.PL; make; make test; make install). The current test.pl is 15k and will probably never be more than 30k.

Charlie, what do you mean exactly with the "stay consistent"?

All the best,

Ari


>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ben at vterrain.org  Sun Oct  2 06:50:18 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
Message-ID: <005101c5c73f$14bec1c0$9b02a8c0@DellWork>


I built 1.3.1 Alpha 2 on MSVC 7.1, and it went fairly smoothly.  I updated
the project files (just added a few new modules) and those updated files are
here:
http://vterrain.org/dist/gdal131_vc71.zip

The exiciting thing for me in this release is CPLCleanupTLS().  Sure enough,
when i call this i get a clean leak-free exit from my app!  No more hunting
through memleaks trying to figure out which are which, as with gdal 1.3.0.

Thanks,
Ben


From sylvain_duclos at yahoo.com  Sun Oct  2 12:14:35 2005
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <931f8ea90510011437u75b3c21ct560d5931459298e0@mail.gmail.com>
Message-ID: <20051002161435.27187.qmail@web30707.mail.mud.yahoo.com>

Nightmare are made of these 

In "Code Complete" Steve McConnell (p. 369) use:

#define TRUE (1==1)
#define FALSE (!TRUE)

So your a bit more abstract.

C99 (and C++) has true/false already and bool type


The fun start when mixing things:
_Bool/bool/BOOL/../true/True/TRUE/etc.


Sylvain.



--- Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 10/1/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> > Charlie Savage kirjoitti:
> >
> > >
> > > I would like to change the SWIG wrapper code so
> that all the
> > > testcapability methods return booleans.  I think
> this is ok, since the
> > > bindings are built using SWIG's C++ mode, so
> boolean is a supported
> > > data type.  That way I don't have to put in a
> separate mapping for
> > > these methods just in the Ruby bindings.
> >
> >
> > Seems ok to me also. Note that there might be
> other methods too subject
> > to this change, e.g. int GDALDataTypeIsComplex(
> GDALDataType ); in gdal.i
> 
> Guys,
> 
> I think this is a reasonable idea too.  Note that I
> deliberately avoid
> use of the boolean type in my code due to nightmares
> in the past
> with generically named boolean types and conflicts
> in their
> definition in different packages.
> 
> Best regards,
> --
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 



		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com

From cfis at interserv.com  Sun Oct  2 14:39:36 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <433F9F72.1090505@tkk.fi>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>	<dhltsh$sms$1@osprey.mgras.de>
	<433EFB44.5030104@interserv.com>	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi>
Message-ID: <43402968.4040402@interserv.com>

I just meant having all the tests in one place, i.e., gdalautotest.  For 
Ruby, I just created a Ruby directory and then ported some of the Python 
tests to Ruby.  But I think you should write the tests that are most 
appropriate for the language.

I tend to agree with you that I'd like the tests in the GDAL CVS project 
(makes them more obvious), but I think that a matter of debate 
(integrated tests or separate tests) without a clearly better answer.

Charlie

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
> 
>> On 10/1/05, Charlie Savage <cfis@interserv.com> wrote:
>>  
>>
>>> Check out gdalautotest from CVS.  There is a test-suite in Python, and a
>>> partial one in Ruby (its slowly growing).
>>>
>>> Ari, maybe this is where the Perl tests should go to stay consistent?
>>>   
>>
>> Charlie,
>>
>> I have prepared a 1.3.1 snapshot of the autotest suite at:
>>
>>  http://www.gdal.org/dl/gdalautotest-1.3.1.tar.gz
>>
>> A small autotest capability within the swig/perl directory is fine.
>> However, at the point where it needs significant amounts of data
>> or other complexity I would appreciate it moving into the
>> gdalautotest tree.
>>  
>>
> 
> I confess I haven't looked at the autotest suite at all. The test code 
> (test.pl) in swig/perl is a top-down, boot-strap test. It is a top-down 
> test in the sense it tries to test everything that's available through 
> the Perl API in a general sense. It currently overlooks very many 
> details and does not check against programmers errors (because many 
> mistakes still cause a segfault). It is a boot-strap test in the sense 
> that it creates a gdal dataset or an ogr datasource first with known 
> properties and then opens it and checks if the properties come back the 
> same. I'm planning to put more tests for checking that the interface 
> works as it should (typemaps are ok) and that it is more fool-proof.
> 
> gdalautotest-1.3.1.tar.gz is 283k and gdal-1.3.1a2.tar.gz is 6.5M. A 
> stupid question comes to mind: why are they separate?
> Testing is of course a large subject but I'd like to have a good 
> self-test an integrated part of the Perl module as is common (required 
> in fact) in Perl world (the normal install procedure is perl 
> Makefile.PL; make; make test; make install). The current test.pl is 15k 
> and will probably never be more than 30k.
> 
> Charlie, what do you mean exactly with the "stay consistent"?
> 
> All the best,
> 
> Ari
> 
> 
>> Best regards,
>> -- 
>> ---------------------------------------+-------------------------------------- 
>>
>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>  
>>
> 
> 



From cfis at interserv.com  Sun Oct  2 15:01:15 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: SWIG / TestCapability / Ruby
In-Reply-To: <20051002161435.27187.qmail@web30707.mail.mud.yahoo.com>
References: <931f8ea90510011437u75b3c21ct560d5931459298e0@mail.gmail.com>
	<20051002161435.27187.qmail@web30707.mail.mud.yahoo.com>
Message-ID: <43402E7B.1030204@interserv.com>

Yes.  But do you think there would be any issues in this case? SWIG 
supports the bool datatype.  From the SWIG documentation:

"The bool datatype is cast to and from an integer value of 0 and 1 
unless the target language provides a special boolean type."

The reason for this change is so that target developers can use the 
target language's native boolean type.  If you can't do that then using 
the GDAL api will feel a bit unnatural.

Charlie

s duclos wrote:
> Nightmare are made of these 
> 
> In "Code Complete" Steve McConnell (p. 369) use:
> 
> #define TRUE (1==1)
> #define FALSE (!TRUE)
> 
> So your a bit more abstract.
> 
> C99 (and C++) has true/false already and bool type
> 
> 
> The fun start when mixing things:
> _Bool/bool/BOOL/../true/True/TRUE/etc.
> 
> 
> Sylvain.
> 
> 
> 
> --- Frank Warmerdam <warmerdam@pobox.com> wrote:
> 
>> On 10/1/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
>>> Charlie Savage kirjoitti:
>>>
>>>> I would like to change the SWIG wrapper code so
>> that all the
>>>> testcapability methods return booleans.  I think
>> this is ok, since the
>>>> bindings are built using SWIG's C++ mode, so
>> boolean is a supported
>>>> data type.  That way I don't have to put in a
>> separate mapping for
>>>> these methods just in the Ruby bindings.
>>>
>>> Seems ok to me also. Note that there might be
>> other methods too subject
>>> to this change, e.g. int GDALDataTypeIsComplex(
>> GDALDataType ); in gdal.i
>>
>> Guys,
>>
>> I think this is a reasonable idea too.  Note that I
>> deliberately avoid
>> use of the boolean type in my code due to nightmares
>> in the past
>> with generically named boolean types and conflicts
>> in their
>> definition in different packages.
>>
>> Best regards,
>> --
>>
> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank
>> Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows |
>> http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial
>> Programmer for Rent
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> 		
> __________________________________ 
> Yahoo! Mail - PC Magazine Editors' Choice 2005 
> http://mail.yahoo.com



From woklist at kyngchaos.com  Sun Oct  2 17:03:38 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
Message-ID: <5627EEF7-B02F-41BC-BB79-95C40516C432@kyngchaos.com>

I've been having problems getting the MrSID dsdk to link to GDAL  
since switching to CVS, and 1.3.x, from 1.2.6 recently.

I'm using the latest MrSID 5.0.6.955.  With the new GDAL 1.3.1a2, I  
get these link errors (compiling completes fine):

ld: Undefined symbols:
__ZNSt24__default_alloc_templateILb1ELi0EE10deallocateEPvm
__ZNSt24__default_alloc_templateILb1ELi0EE8allocateEm
__ZNSs20_S_empty_rep_storageE
__ZNSaIcE8allocateEmPKv
__ZNSaIcED4Ev
__ZNSsD4Ev
/usr/bin/libtool: internal link edit command failed

With GDAL 1.3.0 and CVS before that, there were a LOT more undefined  
symbols.  I'm using GCC 4 on Mac OS X 10.4, but I've had the same in  
the past using GCC 3.3 on Mac OS X 10.3.8 (haven't had a chance to  
test 1.3.1a2 yet on 10.3), so I don't think it's a libstdc++ version  
issue, yet.

Are those supposed to be in the mrsid library, or some other  
library?  I noticed that libxmlparse (yet another XML library!) was  
added to the mrsid link options - I don't have that and I can't get  
it to build on OS X (it's quite old).  So I removed it from the mrsid  
link options, since I didn't see anything in the GDAL docs or MrSID  
docs that it needs xmlparse.  If GDAL and/or MrSID needs it, it  
should be mentioned in the build requirements.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy

From ari.jolma at tkk.fi  Sun Oct  2 17:11:51 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <43402968.4040402@interserv.com>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi> <43402968.4040402@interserv.com>
Message-ID: <43404D17.50105@tkk.fi>

Charlie Savage kirjoitti:

> I just meant having all the tests in one place, i.e., gdalautotest.  
> For Ruby, I just created a Ruby directory and then ported some of the 
> Python tests to Ruby.  But I think you should write the tests that are 
> most appropriate for the language.


I don't see much point in porting the gdalautotest code to Perl since 
the scope of that is so much larger than the test code for the Perl API.

>
> I tend to agree with you that I'd like the tests in the GDAL CVS 
> project (makes them more obvious), but I think that a matter of debate 
> (integrated tests or separate tests) without a clearly better answer.


Let's have that debate? Or was there such already? I can't think of any 
good reason to keep the tests separate but many to have them integrated 
and a standard part of any compilation+installation.

Cheers,

Ari


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From hobu at iastate.edu  Sun Oct  2 18:46:59 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <43404D17.50105@tkk.fi>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi> <43402968.4040402@interserv.com>
	<43404D17.50105@tkk.fi>
Message-ID: <p0620070cbf66105ef291@[192.168.11.4]>

It is a happy coincidence that the gdalautotest suite has worked well 
to allow us to exercise the next generation bindings, but it is my 
understanding that they were developed to test GDAL itself, and not 
necessarily the script bindings.

The testing suite as it currently stands can require many different 
drivers that are not enabled by default on all builds and contain 
significantly sized data to test the capabilities of certain drivers. 
I wouldn't want to bloat the distribution of GDAL with all of the 
test overhead.

My third point is that the next gen bindings development has been 
disruptive enough without turning over the apple cart of testing at 
this time.  I vote (there's only one vote that counts, btw ;) that we 
hold the testing suite still until the dust settles on next gen 
development and then maybe take a look at it.

Another thing to add is that an even worse scenario is to have *two* 
test suites like MapServer has.  MapServer has the MapScript unit 
tests (which have good coverage of methods and calls) and the 
MapServer test suite which has coverage of the mechanicals of 
MapServer.  It has made it difficult to divine in an automated way 
what might be going on, and the fact that there are two different 
test harnesses with two different invocations unnecessarily adds to 
the developer overhead IMO.

Howard

At 12:11 AM +0300 10/3/05, Ari Jolma wrote:
>Charlie Savage kirjoitti:
>
>>I just meant having all the tests in one place, i.e., gdalautotest. 
>>For Ruby, I just created a Ruby directory and then ported some of 
>>the Python tests to Ruby.  But I think you should write the tests 
>>that are most appropriate for the language.
>
>
>I don't see much point in porting the gdalautotest code to Perl 
>since the scope of that is so much larger than the test code for the 
>Perl API.
>
>>
>>I tend to agree with you that I'd like the tests in the GDAL CVS 
>>project (makes them more obvious), but I think that a matter of 
>>debate (integrated tests or separate tests) without a clearly 
>>better answer.
>
>
>Let's have that debate? Or was there such already? I can't think of 
>any good reason to keep the tests separate but many to have them 
>integrated and a standard part of any compilation+installation.
>
>Cheers,
>
>Ari
>
>
>--
>Prof. Ari Jolma
>Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
>Teknillinen Korkeakoulu / Helsinki University of Technology
>POBox 1200, 02015 TKK, Finland
>Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From cfis at interserv.com  Sun Oct  2 19:29:10 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] SWIG and dynamic versus static libraries
Message-ID: <43406D46.50804@interserv.com>

Here is another interesting one that came up testing the Ruby SWIG 
bindings for OSR.

When testing a State Plane coordinate system, GDAL output a warning that 
it could not find "stateplane.csv."  It turns out this happened because 
GDAL couldn't find the GDAL directory.

You can fix this by calling CPLSetConfigOption.  This API is exposed in 
the gdal module, but not in the osr module.  So the Ruby code:

Gdal::Gdal.set_config_option('GDAL_DATA', dir)
srs = Gdal::Osr::SpatialReference.new
srs.set_state_plane(403, 1) # California III NAD83

But this didn't work. The reason is because I have been compiling the 
Ruby extensions against the Windows static library and not the DLL - 
thus the GDAL module and the ORS modules each have their own memory area 
for the various CPL variables.

What is the best way to handle this:

1.  Require that extensions for all languages must compile against the 
DLL on windows and shared libraries on Linux?  From what I can see, this 
is what the Python extension is doing (it ignores the DLLBUILD option in 
  gdal/nmake.opt)

2.  Expose the CPL APIs (there about ten methods exposed via SWIG right 
now) in each module (GDAL, OGR, OSR), thereby allowing either static or 
dynamic linking?

Thanks,

Charlie


From sgillies at frii.com  Sun Oct  2 20:13:09 2005
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:49:47 2007
Subject: unit testing (Re: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released)
In-Reply-To: <p0620070cbf66105ef291@[192.168.11.4]>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi> <43402968.4040402@interserv.com>
	<43404D17.50105@tkk.fi> <p0620070cbf66105ef291@[192.168.11.4]>
Message-ID: <48977abbd5d9238c924e372a42e079d2@frii.com>

On Oct 2, 2005, at 4:46 PM, Howard Butler wrote:

> It is a happy coincidence that the gdalautotest suite has worked well 
> to allow us to exercise the next generation bindings, but it is my 
> understanding that they were developed to test GDAL itself, and not 
> necessarily the script bindings.
>
> The testing suite as it currently stands can require many different 
> drivers that are not enabled by default on all builds and contain 
> significantly sized data to test the capabilities of certain drivers. 
> I wouldn't want to bloat the distribution of GDAL with all of the test 
> overhead.
>
> My third point is that the next gen bindings development has been 
> disruptive enough without turning over the apple cart of testing at 
> this time.  I vote (there's only one vote that counts, btw ;) that we 
> hold the testing suite still until the dust settles on next gen 
> development and then maybe take a look at it.
>
> Another thing to add is that an even worse scenario is to have *two* 
> test suites like MapServer has.  MapServer has the MapScript unit 
> tests (which have good coverage of methods and calls) and the 
> MapServer test suite which has coverage of the mechanicals of 
> MapServer.  It has made it difficult to divine in an automated way 
> what might be going on, and the fact that there are two different test 
> harnesses with two different invocations unnecessarily adds to the 
> developer overhead IMO.
>
> Howard

Howard,

Unless you're willing to write tests for the underlying C++ classes, 
and then use SWIG to make bindings that are as faithful as possible to 
the C++ API, separate suites for the different language bindings are 
unavoidable. It's probably unvoidable anyway since people want the  
Python/Perl/Ruby classes to behave a little bit differently than the 
C++ classes, and even a little differently from each other.

With MapServer, we have a serious testability gap between the very 
intricate and complex mapserv program, and the OO bindings generated by 
SWIG. The mapserv program does not use the mapscript classes, and 
therefore can not be tested with the mapscript unit tests. MapServer's 
testing situation is sort of sucky for you, but I think two different 
suites is the best we can do.

Sean

--
Sean Gillies
sgillies at frii dot com
http://zcologia.com


From warmerdam at pobox.com  Sun Oct  2 20:23:13 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <p0620070cbf66105ef291@192.168.11.4>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi> <43402968.4040402@interserv.com>
	<43404D17.50105@tkk.fi> <p0620070cbf66105ef291@192.168.11.4>
Message-ID: <931f8ea90510021723i77b224eq283abfdad2a056c2@mail.gmail.com>

On 10/2/05, Howard Butler <hobu@iastate.edu> wrote:
> It is a happy coincidence that the gdalautotest suite has worked well
> to allow us to exercise the next generation bindings, but it is my
> understanding that they were developed to test GDAL itself, and not
> necessarily the script bindings.

Howard,

While that is true, it doesn't necessarily interfere with Ari's points
about why gdalautotest should be in the normal GDAL distribution.

> The testing suite as it currently stands can require many different
> drivers that are not enabled by default on all builds

The gdalautotest is smart enough to check for non-default drivers
and skip tests if they are not available.

> and contain
> significantly sized data to test the capabilities of certain drivers.
> I wouldn't want to bloat the distribution of GDAL with all of the
> test overhead.

As pointed out earlier, the test distribution isn't too big compared
to the GDAL source tree.  However, I anticipate that the amount of
test data may grow substantially over time and I am not prepared to
include the autotest in the main distribution to avoid bloat.

I would add that I am not especially keen on a "make test" type
option like some projects have.  I can't give a compelling reason for
this though.

> My third point is that the next gen bindings development has been
> disruptive enough without turning over the apple cart of testing at
> this time.

I like this.  Howard reconises that at least I am somewhat adverse
to changing too much at once.  Change makes me uptight.

> Another thing to add is that an even worse scenario is to have *two*
> test suites like MapServer has.  MapServer has the MapScript unit
> tests (which have good coverage of methods and calls) and the
> MapServer test suite which has coverage of the mechanicals of
> MapServer.  It has made it difficult to divine in an automated way
> what might be going on, and the fact that there are two different
> test harnesses with two different invocations unnecessarily adds to
> the developer overhead IMO.

I'm not sure that having two test suites is terrible, but in the case
of mapserver it has disapated some of the value of the test suites.

PS. I have no problem with Ari leaving a perl wrapper test in
the swig/perl directory as long as it is smallish.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Sun Oct  2 20:58:34 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <433E42DB.2050000@interserv.com>
References: <433E42DB.2050000@interserv.com>
Message-ID: <4340823A.6080109@ku.edu>


Hi guys,

Sorry I wasn't following this thread too closely until now.  In many of
the script languages, it doesn't really matter what we return because
they silently coerce from one type to the other.

I gotta say, it's very wierd of ruby to treat 0 as true.  In fact, one
might really question it's sanity.  Anyway,  this is what I suggest we do:

in the top of the binding declare:

typedef int BOOLEAN;  /* Or whatever we decide to call this shadow type */

Then change all the declarations of functions which follow this:

BOOLEAN testCapabilities();  /* or TypeIsComplex() */

Then each langague wrapper need to implement the proper

%typemap(ret) BOOLEAN {

  $result = PyLong_fromInt( $1 );

}

Or in the case of ruby:

%typemap(ret) BOOLEAN {

  if ($1 == 0) {
    $result = ruby_nil();
  }
  else {
    $result = ruby_one();
  }
}

The "type" BOOLEAN never really exists, it's just an indicator to apply
the proper typemap.

We've used this trick before with a typemap called IF_FALSE_RETURN_NONE.

Kevin

Charlie Savage wrote:

> The various TestCapability methods in OGR have a return type of
> integer.  However, if you read the OGR C API documentation its says:
>
> "Returns: TRUE if the layer has the requested capability, or FALSE
> otherwise. OGRLayers will return FALSE for any unrecognized
> capabilities."
>
> So it seems like the intent it to return a boolean.  In C-like
> languages returning an int is ok, since 0 evaluates to false.
>
> This however, is not the case in all languages.  In Ruby, for example,
> false is either nil (same as NULL or PyNone) or false.  Thus the value
> 0 does *not* evaluate to false.  That means you can't do something
> what is natural:
>
> if lyr.test_capability( 'FastGetExtent')
>
> It will always evaluate to true in Ruby!
>
> I would like to change the SWIG wrapper code so that all the
> testcapability methods return booleans.  I think this is ok, since the
> bindings are built using SWIG's C++ mode, so boolean is a supported
> data type.  That way I don't have to put in a separate mapping for
> these methods just in the Ruby bindings.
>
> Thanks,
>
> Charlie
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From kruland at ku.edu  Sun Oct  2 21:03:52 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] SWIG and dynamic versus static libraries
In-Reply-To: <43406D46.50804@interserv.com>
References: <43406D46.50804@interserv.com>
Message-ID: <43408378.9070509@ku.edu>

Charlie,

I always thought it was unusal that the cpl methods were only in gdal. 
This was a mostly historical problem.

One of the things I thought of early on was to create a cpl module which
was all the cpl function.  This does introduce another namespace,
though.  In python, I would then trick it with "from cpl import *" in
the pythoncode header for each modules.  Ideally you'd have a mechanism
like that in ruby as well.

This might actually work to cleaning up the errorhandler confusion as well.

Kevin



Charlie Savage wrote:

> Here is another interesting one that came up testing the Ruby SWIG
> bindings for OSR.
>
> When testing a State Plane coordinate system, GDAL output a warning
> that it could not find "stateplane.csv."  It turns out this happened
> because GDAL couldn't find the GDAL directory.
>
> You can fix this by calling CPLSetConfigOption.  This API is exposed
> in the gdal module, but not in the osr module.  So the Ruby code:
>
> Gdal::Gdal.set_config_option('GDAL_DATA', dir)
> srs = Gdal::Osr::SpatialReference.new
> srs.set_state_plane(403, 1) # California III NAD83
>
> But this didn't work. The reason is because I have been compiling the
> Ruby extensions against the Windows static library and not the DLL -
> thus the GDAL module and the ORS modules each have their own memory
> area for the various CPL variables.
>
> What is the best way to handle this:
>
> 1.  Require that extensions for all languages must compile against the
> DLL on windows and shared libraries on Linux?  From what I can see,
> this is what the Python extension is doing (it ignores the DLLBUILD
> option in  gdal/nmake.opt)
>
> 2.  Expose the CPL APIs (there about ten methods exposed via SWIG
> right now) in each module (GDAL, OGR, OSR), thereby allowing either
> static or dynamic linking?
>
> Thanks,
>
> Charlie
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From jchenwiz at yahoo.com  Mon Oct  3 00:06:36 2005
From: jchenwiz at yahoo.com (Jianing Chen)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] gdalwarp target to eqc
Message-ID: <20051003040637.3496.qmail@web54106.mail.yahoo.com>

Dear Masters,

I posted an early message on this. Due to the size of
the attached files were over the limit, the email
ended up in the list admin's que for approval. Here I
am sending you the urgent request again. When I use
gdalwarp to reproject my image to eqc using lat_ts=37.
The image is moved up about 120 some pixels. So the
bottom area become black. The command line I used
is:gdalwarp.exe -t_srs "+proj=eqc +lat_ts=37.0
+lon_0=0.0 +ellps=WGS84 +datum=WGS84 "  -co
"INTERLEAVE=PIXEL" -rb f:\testp.tif
f:\output\testeqc.tif

Please help. This thing has been haunting me for the
last few days.

JC


		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.zip
Type: application/zip
Size: 19545 bytes
Desc: 827469143-test.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051002/fd266420/test.zip
From jchenwiz at yahoo.com  Sun Oct  2 11:25:10 2005
From: jchenwiz at yahoo.com (Jianing Chen)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] eqc warping problem
Message-ID: <20051002152510.53656.qmail@web54115.mail.yahoo.com>

Dear masters,

I am running into a problem to warp images into eqc
projection using lat_ts=37.0. I have attached the
original with the warped. Please help out.
Command line:
gdalwarp.exe -t_srs "+proj=eqc +lat_ts=37.0 +lat_0=0.0
+lon_0=0.0 +ellps=WGS84 +datum=WGS84 " -co
"INTERLEAVE=PIXEL" -rb f:\testp.tif
f:\output\testeqc.tif
Thanks

JC



		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testp.tif
Type: image/tiff
Size: 27143 bytes
Desc: 559247197-testp.tif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051002/7e1a4bc5/testp.tif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testreb.tif
Type: image/tiff
Size: 49380 bytes
Desc: 4283820760-testreb.tif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051002/7e1a4bc5/testreb.tif
From cfis at interserv.com  Mon Oct  3 02:40:02 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: SWIG and dynamic versus static libraries
In-Reply-To: <43408378.9070509@ku.edu>
References: <43406D46.50804@interserv.com> <43408378.9070509@ku.edu>
Message-ID: <4340D242.6070501@interserv.com>

That would work well for linking to dynamic libraries, but it won't work 
for statically linking because the CPL module will just be its own DLL.

Thus when the OSR module calls GetConfigOption it will look to the CPL 
methods in its DLL (which it has via various includes), and not the 
shared one that is exposed to the target language.  Or at least that's 
my interpretation of what I'm seeing when statically linking.

I tend to lean towards exposing the CPL methods in all modules...but not 
sure if that will cause some other unforeseen issues.


Charlie

Kevin Ruland wrote:
> Charlie,
> 
> I always thought it was unusal that the cpl methods were only in gdal. 
> This was a mostly historical problem.
> 
> One of the things I thought of early on was to create a cpl module which
> was all the cpl function.  This does introduce another namespace,
> though.  In python, I would then trick it with "from cpl import *" in
> the pythoncode header for each modules.  Ideally you'd have a mechanism
> like that in ruby as well.
> 
> This might actually work to cleaning up the errorhandler confusion as well.
> 
> Kevin
> 
> 
> 
> Charlie Savage wrote:
> 
>> Here is another interesting one that came up testing the Ruby SWIG
>> bindings for OSR.
>>
>> When testing a State Plane coordinate system, GDAL output a warning
>> that it could not find "stateplane.csv."  It turns out this happened
>> because GDAL couldn't find the GDAL directory.
>>
>> You can fix this by calling CPLSetConfigOption.  This API is exposed
>> in the gdal module, but not in the osr module.  So the Ruby code:
>>
>> Gdal::Gdal.set_config_option('GDAL_DATA', dir)
>> srs = Gdal::Osr::SpatialReference.new
>> srs.set_state_plane(403, 1) # California III NAD83
>>
>> But this didn't work. The reason is because I have been compiling the
>> Ruby extensions against the Windows static library and not the DLL -
>> thus the GDAL module and the ORS modules each have their own memory
>> area for the various CPL variables.
>>
>> What is the best way to handle this:
>>
>> 1.  Require that extensions for all languages must compile against the
>> DLL on windows and shared libraries on Linux?  From what I can see,
>> this is what the Python extension is doing (it ignores the DLLBUILD
>> option in  gdal/nmake.opt)
>>
>> 2.  Expose the CPL APIs (there about ten methods exposed via SWIG
>> right now) in each module (GDAL, OGR, OSR), thereby allowing either
>> static or dynamic linking?
>>
>> Thanks,
>>
>> Charlie
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev



From cfis at interserv.com  Mon Oct  3 02:52:34 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: unit testing (Re: Re: GDAL 1.3.1 Alpha 2 Released)
In-Reply-To: <48977abbd5d9238c924e372a42e079d2@frii.com>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>	<dhltsh$sms$1@osprey.mgras.de>
	<433EFB44.5030104@interserv.com>	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>	<433F9F72.1090505@tkk.fi>
	<43402968.4040402@interserv.com>	<43404D17.50105@tkk.fi>
	<p0620070cbf66105ef291@[192.168.11.4]>
	<48977abbd5d9238c924e372a42e079d2@frii.com>
Message-ID: <4340D532.30501@interserv.com>

I agree.  I think the only way to reasonably test the SWIG bindings is 
to call each API method from each language.  Doing this for the Ruby 
bindings (by porting the Python tests) has revealed lots of issues where 
the SWIG generated code works for Python but doesn't work for other 
languages (and even cases where its seems to work for Python but in fact 
really doesn't when put under stress due to memory management issues). 
For example, the current OSR swig bindings in CVS don't work for Ruby, 
Java or CSharp but do work for Python because SWIG handles constants and 
#defines differently for Python than the other languages.  The good news 
though is that each time we've found something like this we've been able 
to modify the swig interface files so the main core SWIG interface files 
work for all the languages.

So in my opinion, the autotest suite has been absolutely invaluable, 
because its a whole lot easier to port a bunch of tests than it is to 
develop them from scratch.  I think it would be great if it could be 
ported to every language - as a sort of "official" stamp of approval for 
that language working with GDAL.  That would then make it possible to 
test changes to the SWIG interface files, press a button, and make sure 
you didn't break something in the Java bindings, or the CSharp bindings, 
or the Python bindings.

However, I would view these tests as tests for each specific target 
language and not GDAL.  Instead, I agree with Howard that there should 
be one "official" test suite for that, which is the Python test suite.

Charlie



Sean Gillies wrote:
> On Oct 2, 2005, at 4:46 PM, Howard Butler wrote:
> 
>> It is a happy coincidence that the gdalautotest suite has worked well 
>> to allow us to exercise the next generation bindings, but it is my 
>> understanding that they were developed to test GDAL itself, and not 
>> necessarily the script bindings.
>>
>> The testing suite as it currently stands can require many different 
>> drivers that are not enabled by default on all builds and contain 
>> significantly sized data to test the capabilities of certain drivers. 
>> I wouldn't want to bloat the distribution of GDAL with all of the test 
>> overhead.
>>
>> My third point is that the next gen bindings development has been 
>> disruptive enough without turning over the apple cart of testing at 
>> this time.  I vote (there's only one vote that counts, btw ;) that we 
>> hold the testing suite still until the dust settles on next gen 
>> development and then maybe take a look at it.
>>
>> Another thing to add is that an even worse scenario is to have *two* 
>> test suites like MapServer has.  MapServer has the MapScript unit 
>> tests (which have good coverage of methods and calls) and the 
>> MapServer test suite which has coverage of the mechanicals of 
>> MapServer.  It has made it difficult to divine in an automated way 
>> what might be going on, and the fact that there are two different test 
>> harnesses with two different invocations unnecessarily adds to the 
>> developer overhead IMO.
>>
>> Howard
> 
> Howard,
> 
> Unless you're willing to write tests for the underlying C++ classes, and 
> then use SWIG to make bindings that are as faithful as possible to the 
> C++ API, separate suites for the different language bindings are 
> unavoidable. It's probably unvoidable anyway since people want the  
> Python/Perl/Ruby classes to behave a little bit differently than the C++ 
> classes, and even a little differently from each other.
> 
> With MapServer, we have a serious testability gap between the very 
> intricate and complex mapserv program, and the OO bindings generated by 
> SWIG. The mapserv program does not use the mapscript classes, and 
> therefore can not be tested with the mapscript unit tests. MapServer's 
> testing situation is sort of sucky for you, but I think two different 
> suites is the best we can do.
> 
> Sean
> 
> -- 
> Sean Gillies
> sgillies at frii dot com
> http://zcologia.com



From cfis at interserv.com  Mon Oct  3 03:14:03 2005
From: cfis at interserv.com (Charles F. I. Savage)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <4340823A.6080109@ku.edu>
References: <433E42DB.2050000@interserv.com> <4340823A.6080109@ku.edu>
Message-ID: <4340DA3B.1050108@interserv.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 2781 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051003/744fb2fc/smime.bin
From kruland at ku.edu  Mon Oct  3 07:43:22 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] SWIG / TestCapability / Ruby
In-Reply-To: <4340DA3B.1050108@interserv.com>
References: <433E42DB.2050000@interserv.com> <4340823A.6080109@ku.edu>
	<4340DA3B.1050108@interserv.com>
Message-ID: <4341195A.5050605@ku.edu>


> Anyway, the good news is that SWIG seems to define the appropriate
> bool typemaps already for each language, so I don't think we need to
> introduce a fake BOOLEAN type.  Instead, I think all we have to do is
> change the return type from int to bool on the appropriate methods.
>
Cool.

> Thus in ogr.i:
>
> int TestCapability (const char *cap) {
>     return OGR_Dr_TestCapability(self, cap);
> }
>
> Becomes:
>
> bool TestCapability (const char *cap) {
> }
>
Ok.

> In the wrapper method, SWIG then typecasts the results from
> OGR_Dr_TestCapability to a bool, and applies the languages bool
> typemap (which they seem to all have).  So:
>
> static PyObject *_wrap_Driver_TestCapability(PyObject *, PyObject *args) {
>     PyObject *resultobj = NULL;
>     ...
>     result = (bool)OGRDriverShadow_TestCapability(arg1,(char const
> *)arg2);
>     ...
>    /* language specific typemap here, this is python */
>       resultobj = SWIG_From_bool(static_cast<bool >(result));
> }
>
It inserts the cast for you?  If so, this is really the way to go.  This
is no longer C-99 code though.  Going to have to ask frank about that. 
If he wants C-99 then we'll have to cobble together our own typemap and
insert a #define bool int.

> I suppose we could do this:
>
> int TestCapability (const char *cap) {
>     if (result = OGR_Dr_TestCapability(self, cap))
>        return true;
>    else
>       return false;
> }
>
Yuck.  if we don't have to do this, we shouldn't.

> But I don't think we have to.
>
> The methods in ogr.i I changed are:
>
> Equal
> testcapability
> IsFieldSet
> Intersect
> Equal
> Disjoint
> Touches
> Crosses
> Within
> Contains
> Overlaps
>
> I'd be glad to check it in or send it to you if you want to take a
> look and test with Python.
>
>
> Charlie
>


From ari.jolma at tkk.fi  Mon Oct  3 08:48:34 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: unit testing (Re: Re: GDAL 1.3.1 Alpha 2 Released)
In-Reply-To: <4340D532.30501@interserv.com>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhltsh$sms$1@osprey.mgras.de> <433EFB44.5030104@interserv.com>
	<931f8ea90510011432o3b617fddm7d0dbfe785c02db3@mail.gmail.com>
	<433F9F72.1090505@tkk.fi> <43402968.4040402@interserv.com>
	<43404D17.50105@tkk.fi> <p0620070cbf66105ef291@[192.168.11.4]>
	<48977abbd5d9238c924e372a42e079d2@frii.com>
	<4340D532.30501@interserv.com>
Message-ID: <434128A2.2070406@tkk.fi>

Charlie Savage wrote:

>
> So in my opinion, the autotest suite has been absolutely invaluable, 
> because its a whole lot easier to port a bunch of tests than it is to 
> develop them from scratch.  


I think I agree with this. Although I believe some diversity is usually 
good. It may also be quite difficult to maintain all the test codes so 
that they are identical in this sense.

> I think it would be great if it could be ported to every language - as 
> a sort of "official" stamp of approval for that language working with 
> GDAL.  That would then make it possible to test changes to the SWIG 
> interface files, press a button, and make sure you didn't break 
> something in the Java bindings, or the CSharp bindings, or the Python 
> bindings.


That's a very good reason. A recent change in shape2ogr.cpp comes to 
mind..  ;) I think this is good overall.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From t.r.decarlo at larc.nasa.gov  Mon Oct  3 09:54:17 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
Message-ID: <0a6e01c5c821$f2c32b40$959877c6@cts1149>

It looks like the cygwin build is broken in the 1.3.2 alpha2 release. I
downloaded a fresh update of Cygwin, but specified the gcc 3.3.3 compiler
(OpenSceneGraph won't compile with the Cygwin version of g++ 3.4.x). Did a
./configure and make with these results:

/bin/sh.exe ../libtool --mode=compile g++ -Wall  -O2   -I../port  -c -o
cpl_vsil.o cpl_vsil.cpp
 g++ -Wall -O2 -I../port -c cpl_vsil.cpp  -DPIC -o .libs/cpl_vsil.o
cpl_vsil.cpp: In function `int VSIFFlush(FILE*)':
cpl_vsil.cpp:167: error: new declaration `int VSIFFlush(FILE*)'
cpl_vsi.h:156: error: ambiguates old declaration `void VSIFFlush(FILE*)'
make[1]: *** [cpl_vsil.o] Error 1
make[1]: Leaving directory `/cygdrive/c/Svs_dev_C/gdal-1.3.1a2/port'
make: *** [port-target] Error 2

It will be a little while before I have time to dig into this. Maybe the
problem will be obvious to someone else, though.

Thom
--
Thom DeCarlo
--------------------------------------------------
   How Many Roads Must A Man Travel Down 
   Before He Admits He is Lost?


> -----Original Message-----
> From: Frank Warmerdam
> Sent: Friday, September 30, 2005 5:31 PM
> To: GDAL-dev
> Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
> 
> Folks,
> 
> Yes, surely the fastest release turn around in GDAL history.  I have
> produced a new release at:
>   http://www.gdal.org/dl/gdal-1.3.1a2.tar.gz
>   http://www.gdal.org/dl/gdal131a2.zip
> 
> This fixes:
>  o Problems with pcrasterutils.cpp on VStudio 2003 (and possibly
>     some unix compilers).
>  o Incorporates fixes for GRASS projection support.
>  o A fix for the postgis driver that affected geometries read by
>     by user supplied SQL.
> 
> Best regards,
> --



From Martin.Spott at mgras.net  Mon Oct  3 11:57:04 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<dhm3mu$10gu$1@osprey.mgras.de>
Message-ID: <dhrkcg$uj4$1@osprey.mgras.de>

Martin Spott wrote:

> Aaaah, wrong, still the same error, apparently I overlooked this.
> Please consider this as a simple notice, at the moment I don't have the
> time to dig further into it. OGDI-3.1.5 is installed in /opt/GRASS/:
> 
> 
> make[3]: Entering directory `/usr/local/src/gdal-1.3.1a2/ogr/ogrsf_frmts/ogdi'
> /bin/sh ../../../libtool --mode=compile g++ -mcpu=hypersparc -mtune=hypersparc -Wall  -O3   -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port  -c -o ../o/ogrogdidriver.o ogrogdidriver.cpp
>  g++ -mcpu=hypersparc -mtune=hypersparc -Wall -O3 -I.. -I../.. -I/opt/GRASS -I/opt/GRASS/include -I/opt/gnu/include -I/usr/local/include -I../../../port -c ogrogdidriver.cpp -o ../o/ogrogdidriver.o
> In file included from ../../ogr_spatialref.h:102,
>                  from ../../ogr_geometry.h:210,
>                  from ../../ogr_feature.h:131,
>                  from ../ogrsf_frmts.h:196,
>                  from ogrogdi.h:63,
>                  from ogrogdidriver.cpp:46:
> ../../ogr_srs_api.h:384: error: `CPL_STDCALL' does not name a type
[...]


I must admit that I can't tell the technical consequences ....:

I compared ogr_srs_api.h with the one from GDAL-1.2.6 and after
removing every occurrence of CPL_STDCALL from ogr_srs_api.h in the
current release-candidate everything compiles without errors (after
removing the 'swig-target' from the GNUmakefile).
Does this tase like a solution that makes sense ?

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From warmerdam at pobox.com  Mon Oct  3 14:46:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] eqc warping problem
In-Reply-To: <20051002152510.53656.qmail@web54115.mail.yahoo.com>
References: <20051002152510.53656.qmail@web54115.mail.yahoo.com>
Message-ID: <931f8ea90510031146g665ef822n5eb45e7d9846b96@mail.gmail.com>

On 10/2/05, Jianing Chen <jchenwiz@yahoo.com> wrote:
> Dear masters,
>
> I am running into a problem to warp images into eqc
> projection using lat_ts=37.0. I have attached the
> original with the warped. Please help out.
> Command line:
> gdalwarp.exe -t_srs "+proj=eqc +lat_ts=37.0 +lat_0=0.0
> +lon_0=0.0 +ellps=WGS84 +datum=WGS84 " -co
> "INTERLEAVE=PIXEL" -rb f:\testp.tif
> f:\output\testeqc.tif

JC,

To state the problem, it seems that the output file is created
with not quite accurate bounds.  It is essentially 20 meters south
of where it ought to be.   It helps to state why you think the result
is wrong!  Let me know if I guess wrong about the issue you are raising.

Looking at the data, you are reprojecting a point in Arizona State Plane
to Equidistant Conic.  Ostensibly you are transforming from NAD83 to
WGS84, but actually Equidistant Conic seems to be one of those
projections that only supports a spherical form.   If I try just going from
WGS84 to eqc coordinates with the PROJ.4 cs2cs command I see:

warmerda@gdal2200[92]% cs2cs +proj=latlong +datum=WGS84 +to +proj=eqc
+lat_ts=37.0 +lat_0=0.0 +lon_0=0.0 +ellps=WGS84 +datum=WGS84
-117 33
-10401732.70    3654001.32 -6305.98


Of particular note is the "Z" offset of over six kilometers. That is the
difference between the WGS84 ellipsoid and the sphere.

When gdalwarp works with coordinates it drops the Z.  This causes a
noticable difference between going "forward" from Arizona state plane
to eqc (at elevation 0) and going back from eqc to Arizona state plane
at elevation zero.

In short, reprojecting between a spherical projection like arizona
state plane and a spherical projection like eqc with gdalwarp since
gdalwarp ignores the substantial Z differences.

By the way, you can find out what projections PROJ.4 treats as
spherical only (vs. also supporting an ellipsoidal solution) using
the "proj -lP" command.

...
eqc : Equidistant Cylindrical (Plate Caree)
        Cyl, Sph
        lat_ts=
eqdc : Equidistant Conic
        Conic, Sph&Ell
        lat_1= lat_2=
...

Since eqc just has "Sph" and eqdc has "Sph&Ell" we see that
eqc is spherical only while eqdc also supports an ellipsoidal solution.

I am less sure what practical solution to offer.  I think what I may need to
do at some point is allow a mechanism such that PROJ.4's pj_transform()
method would not attempt to apply ellipsoid->sphere transformation via
geocentric coordinates.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Oct  3 14:58:53 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <0a6e01c5c821$f2c32b40$959877c6@cts1149>
References: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>
	<0a6e01c5c821$f2c32b40$959877c6@cts1149>
Message-ID: <931f8ea90510031158t1bd2b1d1q617192bca08e9490@mail.gmail.com>

On 10/3/05, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> It looks like the cygwin build is broken in the 1.3.2 alpha2 release. I
> downloaded a fresh update of Cygwin, but specified the gcc 3.3.3 compiler
> (OpenSceneGraph won't compile with the Cygwin version of g++ 3.4.x). Did a
> ./configure and make with these results:
>
> /bin/sh.exe ../libtool --mode=compile g++ -Wall  -O2   -I../port  -c -o
> cpl_vsil.o cpl_vsil.cpp
>  g++ -Wall -O2 -I../port -c cpl_vsil.cpp  -DPIC -o .libs/cpl_vsil.o
> cpl_vsil.cpp: In function `int VSIFFlush(FILE*)':
> cpl_vsil.cpp:167: error: new declaration `int VSIFFlush(FILE*)'
> cpl_vsi.h:156: error: ambiguates old declaration `void VSIFFlush(FILE*)'
> make[1]: *** [cpl_vsil.o] Error 1
> make[1]: Leaving directory `/cygdrive/c/Svs_dev_C/gdal-1.3.1a2/port'
> make: *** [port-target] Error 2
>
> It will be a little while before I have time to dig into this. Maybe the
> problem will be obvious to someone else, though.

Thom,

I have fixed this.  It was related to my changes to virtualize IO, and
the fact that Cygwin did not (as configure treats it) support the large
file API.  My fix is to ensure that the "large file API" is always built
even if it is essentially just a small file API that supports virtualization.

This means that Cygwin builds of GDAL still lack large file support,
though looking at cygwin man pages I think this too could be corrected
if necessary.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Mon Oct  3 15:15:37 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
In-Reply-To: <931f8ea90510031158t1bd2b1d1q617192bca08e9490@mail.gmail.com>
Message-ID: <0aab01c5c84e$d6042f90$959877c6@cts1149>


> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, October 03, 2005 2:59 PM
> To: Thom DeCarlo
> Cc: GDAL-dev
> Subject: Re: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
> 
> On 10/3/05, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> > It looks like the cygwin build is broken in the 1.3.2 alpha2 release. I
> > downloaded a fresh update of Cygwin, but specified the gcc 3.3.3
> compiler
> > (OpenSceneGraph won't compile with the Cygwin version of g++ 3.4.x). Did
> a
> > ./configure and make with these results:
> >
> > /bin/sh.exe ../libtool --mode=compile g++ -Wall  -O2   -I../port  -c -o
> > cpl_vsil.o cpl_vsil.cpp
> >  g++ -Wall -O2 -I../port -c cpl_vsil.cpp  -DPIC -o .libs/cpl_vsil.o
> > cpl_vsil.cpp: In function `int VSIFFlush(FILE*)':
> > cpl_vsil.cpp:167: error: new declaration `int VSIFFlush(FILE*)'
> > cpl_vsi.h:156: error: ambiguates old declaration `void VSIFFlush(FILE*)'
> > make[1]: *** [cpl_vsil.o] Error 1
> > make[1]: Leaving directory `/cygdrive/c/Svs_dev_C/gdal-1.3.1a2/port'
> > make: *** [port-target] Error 2
> >
> > It will be a little while before I have time to dig into this. Maybe the
> > problem will be obvious to someone else, though.
> 
> Thom,
> 
> I have fixed this.  It was related to my changes to virtualize IO, and
> the fact that Cygwin did not (as configure treats it) support the large
> file API.  My fix is to ensure that the "large file API" is always built
> even if it is essentially just a small file API that supports
> virtualization.
> 
> This means that Cygwin builds of GDAL still lack large file support,
> though looking at cygwin man pages I think this too could be corrected
> if necessary.
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent

Frank,
Thanks for the update. That sounds good enough for me. 

Thom
--
Thom DeCarlo
---------------------------------------------------------
      Given sufficient time and money, all things are possible.
  In lieu of time and money, caffeine and aspirin may also work.





From kmckelvey at lizardtech.com  Mon Oct  3 17:13:41 2005
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
Message-ID: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>

Hello William,

Are you saying you did not get these link errors when using GDAL 1.2.6,
MrSID 5.0.6.955, and gcc4 on Mac OS 10.4?  Or did one of these other
variables (SID SDK or compiler) also change?

It seems quite likely to be a stdc++ version issue; gcc 4 is not yet a
supported compiler with our SDK.  If GDAL *was* the only update and it
did work before, then while surprising it is still not a complete
mystery.  What may have happened is that the MrSIDDataset class began
using more symbols from the MrSID SDK, introducing new dependencies that
were in turn dependent on libstdc++...

Regarding the addition of xmlparse, this should only be a dependency for
our Encode SDK.  I think it is added in the wrong place in configure.
Frank, do you agree with the following patch?

Index: configure.in
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/configure.in,v
retrieving revision 1.162
diff -c -r1.162 configure.in
*** configure.in	2 Oct 2005 00:59:00 -0000	1.162
--- configure.in	3 Oct 2005 21:10:05 -0000
***************
*** 1107,1120 ****
  
      HAVE_MRSID=yes
      MRSID_INCLUDE="-I$with_mrsid/include/base
-I$with_mrsid/include/metadata -I$with_mrsid/include/mrsid_readers
-I$with_mrsid/include/j2k_readers -I$with_mrsid/include/support"
!     MRSID_LIBS="-lltidsdk -lxmlparse -lpthread"
  
      AC_MSG_CHECKING([for MG3ImageWriter.h in
$with_mrsid/include/mrsid_writers])
      if test -r "$with_mrsid/include/mrsid_writers/MG3ImageWriter.h" ;
then
        AC_MSG_RESULT([found MrSID ESDK version 4.x or newer.])
        MRSID_FLAGS="-DMRSID_ESDK $MRSID_FLAGS"
        MRSID_INCLUDE="-I$with_mrsid/include/mrsid_writers
-I$with_mrsid/include/j2k_writers $MRSID_INCLUDE"
!       MRSID_LIBS="-lltiesdk -lcryptopp $MRSID_LIBS"
      fi
  
      AC_MSG_CHECKING([for MrSID JPEG2000 support])
--- 1107,1120 ----
  
      HAVE_MRSID=yes
      MRSID_INCLUDE="-I$with_mrsid/include/base
-I$with_mrsid/include/metadata -I$with_mrsid/include/mrsid_readers
-I$with_mrsid/include/j2k_readers -I$with_mrsid/include/support"
!     MRSID_LIBS="-lltidsdk -lpthread"
  
      AC_MSG_CHECKING([for MG3ImageWriter.h in
$with_mrsid/include/mrsid_writers])
      if test -r "$with_mrsid/include/mrsid_writers/MG3ImageWriter.h" ;
then
        AC_MSG_RESULT([found MrSID ESDK version 4.x or newer.])
        MRSID_FLAGS="-DMRSID_ESDK $MRSID_FLAGS"
        MRSID_INCLUDE="-I$with_mrsid/include/mrsid_writers
-I$with_mrsid/include/j2k_writers $MRSID_INCLUDE"
!       MRSID_LIBS="-lltiesdk -lcryptopp -lxmlparse $MRSID_LIBS"
      fi
  
      AC_MSG_CHECKING([for MrSID JPEG2000 support])


Cheers,
Kirk

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of William
Kyngesburye
Sent: Sunday, October 02, 2005 2:04 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] linking problems with MrSID library

I've been having problems getting the MrSID dsdk to link to GDAL since
switching to CVS, and 1.3.x, from 1.2.6 recently.

I'm using the latest MrSID 5.0.6.955.  With the new GDAL 1.3.1a2, I get
these link errors (compiling completes fine):

ld: Undefined symbols:
__ZNSt24__default_alloc_templateILb1ELi0EE10deallocateEPvm
__ZNSt24__default_alloc_templateILb1ELi0EE8allocateEm
__ZNSs20_S_empty_rep_storageE
__ZNSaIcE8allocateEmPKv
__ZNSaIcED4Ev
__ZNSsD4Ev
/usr/bin/libtool: internal link edit command failed

With GDAL 1.3.0 and CVS before that, there were a LOT more undefined
symbols.  I'm using GCC 4 on Mac OS X 10.4, but I've had the same in the
past using GCC 3.3 on Mac OS X 10.3.8 (haven't had a chance to test
1.3.1a2 yet on 10.3), so I don't think it's a libstdc++ version issue,
yet.

Are those supposed to be in the mrsid library, or some other library?  I
noticed that libxmlparse (yet another XML library!) was added to the
mrsid link options - I don't have that and I can't get it to build on OS
X (it's quite old).  So I removed it from the mrsid link options, since
I didn't see anything in the GDAL docs or MrSID docs that it needs
xmlparse.  If GDAL and/or MrSID needs it, it should be mentioned in the
build requirements.

-----
William Kyngesburye <kyngchaos@kyngchaos.com> http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least
suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Oct  3 17:14:36 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1b1
Message-ID: <931f8ea90510031414w40793d4aia2d4dce16110836c@mail.gmail.com>

Folks,

I have cut a new copy of the source, designated GDAL 1.3.1b1 at:

  http://www.gdal.org/dl/gdal-1.3.1b1.tar.gz
  http://www.gdal.org/dl/gdal131b1.zip

Should fix a number of bugs.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Mon Oct  3 18:56:21 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
Message-ID: <CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>

Um, that may have been a bit confusing.  No, I have not got it to  
work with GCC 4 on Mac OS 10.4 (yes I'm aware of lack of GCC 4  
support for MrSID).  Try this:

     Mac OS 10.3/GCC 3.3 + GDAL 1.2.6 + MrSID = success

I ignored/wasn't aware of changes in GDAL CVS for a long time, then:

     Mac OS 10.4/GCC 4 + GDAL 1.2.6 + MrSID = no go

Then I found GDAL CVS around the time Frank was working on the 1.3.0  
release, and:

     Mac OS 10.4/GCC 4 + GDAL 1.3.0 + MrSID = no go
     Mac OS 10.3/GCC 3.3 + GDAL 1.3.0 + MrSID = no go
     Mac OS 10.4/GCC 4 + GDAL 1.3.1 + MrSID = no go

... it stopped working for GCC 3.3.  This led me to believe it wasn't  
a libstdc++ version problem.  Just going with logic here.

I finally had a chance today to try it on my 10.3 Mac again (it's at  
work):

     Mac OS 10.3/GCC 3.3 + GDAL 1.3.1 + MrSID = success

In GDAL 1.3.0, there were very many of those undefined symbols even  
with GCC 3.3.  Now that appears to be cleared up.  Maybe that was the  
MrSID DSDK 5.x support that was added to GDAL 1.3.1.  So what's left  
may well be the libstdc++ issue.

I had heard that it was possible to build something in GCC 4 linked  
to something built with GCC 3.3 by linking both the new and old  
libstdc++, so I keep attempting this with each new GDAL version to  
try and figure it out.  Since it happens with GCC 3.3 also, I never  
get beyond that to just TRY it.


On Oct 3, 2005, at 4:13 PM, Kirk McKelvey wrote:

> Hello William,
>
> Are you saying you did not get these link errors when using GDAL  
> 1.2.6,
> MrSID 5.0.6.955, and gcc4 on Mac OS 10.4?  Or did one of these other
> variables (SID SDK or compiler) also change?
>
> It seems quite likely to be a stdc++ version issue; gcc 4 is not yet a
> supported compiler with our SDK.  If GDAL *was* the only update and it
> did work before, then while surprising it is still not a complete
> mystery.  What may have happened is that the MrSIDDataset class began
> using more symbols from the MrSID SDK, introducing new dependencies  
> that
> were in turn dependent on libstdc++...
>
> Regarding the addition of xmlparse, this should only be a  
> dependency for
> our Encode SDK.  I think it is added in the wrong place in configure.
> Frank, do you agree with the following patch?
>
> Index: configure.in
> ===================================================================
> RCS file: /cvs/maptools/cvsroot/gdal/configure.in,v
> retrieving revision 1.162
> diff -c -r1.162 configure.in
> *** configure.in    2 Oct 2005 00:59:00 -0000    1.162
> --- configure.in    3 Oct 2005 21:10:05 -0000
> ***************
> *** 1107,1120 ****
>
>       HAVE_MRSID=yes
>       MRSID_INCLUDE="-I$with_mrsid/include/base
> -I$with_mrsid/include/metadata -I$with_mrsid/include/mrsid_readers
> -I$with_mrsid/include/j2k_readers -I$with_mrsid/include/support"
> !     MRSID_LIBS="-lltidsdk -lxmlparse -lpthread"
>
>       AC_MSG_CHECKING([for MG3ImageWriter.h in
> $with_mrsid/include/mrsid_writers])
>       if test -r "$with_mrsid/include/mrsid_writers/ 
> MG3ImageWriter.h" ;
> then
>         AC_MSG_RESULT([found MrSID ESDK version 4.x or newer.])
>         MRSID_FLAGS="-DMRSID_ESDK $MRSID_FLAGS"
>         MRSID_INCLUDE="-I$with_mrsid/include/mrsid_writers
> -I$with_mrsid/include/j2k_writers $MRSID_INCLUDE"
> !       MRSID_LIBS="-lltiesdk -lcryptopp $MRSID_LIBS"
>       fi
>
>       AC_MSG_CHECKING([for MrSID JPEG2000 support])
> --- 1107,1120 ----
>
>       HAVE_MRSID=yes
>       MRSID_INCLUDE="-I$with_mrsid/include/base
> -I$with_mrsid/include/metadata -I$with_mrsid/include/mrsid_readers
> -I$with_mrsid/include/j2k_readers -I$with_mrsid/include/support"
> !     MRSID_LIBS="-lltidsdk -lpthread"
>
>       AC_MSG_CHECKING([for MG3ImageWriter.h in
> $with_mrsid/include/mrsid_writers])
>       if test -r "$with_mrsid/include/mrsid_writers/ 
> MG3ImageWriter.h" ;
> then
>         AC_MSG_RESULT([found MrSID ESDK version 4.x or newer.])
>         MRSID_FLAGS="-DMRSID_ESDK $MRSID_FLAGS"
>         MRSID_INCLUDE="-I$with_mrsid/include/mrsid_writers
> -I$with_mrsid/include/j2k_writers $MRSID_INCLUDE"
> !       MRSID_LIBS="-lltiesdk -lcryptopp -lxmlparse $MRSID_LIBS"
>       fi
>
>       AC_MSG_CHECKING([for MrSID JPEG2000 support])
>
>
> Cheers,
> Kirk
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of William
> Kyngesburye
> Sent: Sunday, October 02, 2005 2:04 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] linking problems with MrSID library
>
> I've been having problems getting the MrSID dsdk to link to GDAL since
> switching to CVS, and 1.3.x, from 1.2.6 recently.
>
> I'm using the latest MrSID 5.0.6.955.  With the new GDAL 1.3.1a2, I  
> get
> these link errors (compiling completes fine):
>
> ld: Undefined symbols:
> __ZNSt24__default_alloc_templateILb1ELi0EE10deallocateEPvm
> __ZNSt24__default_alloc_templateILb1ELi0EE8allocateEm
> __ZNSs20_S_empty_rep_storageE
> __ZNSaIcE8allocateEmPKv
> __ZNSaIcED4Ev
> __ZNSsD4Ev
> /usr/bin/libtool: internal link edit command failed
>
> With GDAL 1.3.0 and CVS before that, there were a LOT more undefined
> symbols.  I'm using GCC 4 on Mac OS X 10.4, but I've had the same  
> in the
> past using GCC 3.3 on Mac OS X 10.3.8 (haven't had a chance to test
> 1.3.1a2 yet on 10.3), so I don't think it's a libstdc++ version issue,
> yet.
>
> Are those supposed to be in the mrsid library, or some other  
> library?  I
> noticed that libxmlparse (yet another XML library!) was added to the
> mrsid link options - I don't have that and I can't get it to build  
> on OS
> X (it's quite old).  So I removed it from the mrsid link options,  
> since
> I didn't see anything in the GDAL docs or MrSID docs that it needs
> xmlparse.  If GDAL and/or MrSID needs it, it should be mentioned in  
> the
> build requirements.
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com> http:// 
> www.kyngchaos.com/
>
> "Those people who most want to rule people are, ipso-facto, those  
> least
> suited to do it."
>
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect

From bill at binko.net  Mon Oct  3 19:12:32 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
Message-ID: <Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>


> I had heard that it was possible to build something in GCC 4 linked  
> to something built with GCC 3.3 by linking both the new and old  
> libstdc++, so I keep attempting this with each new GDAL version to  
> try and figure it out.  Since it happens with GCC 3.3 also, I never  
> get beyond that to just TRY it.
> 

I'm probably the source of that rumor, but it's not exactly what I said.  
There are binary compatibility issues within the GCC 3.x tree: that is 
what I had succeeded with.  However, it's possible that you can get 3.3 
and 4 to work together.

I had a real reason to need this (I needed ECW and MrSID support in the 
same build, and I use GCC 3.4.1).  So I read up and found that if you 
include the older libstdc++ before the newer one in the final link, the 
name mangling works itself out (by design, not luck).

However, GDAL is really not setup to do this, especially if you use
libtool.  I have suggested to Frank and LizardTech that someone should
update the configure to add this, but then I tried it and failed miserably
, so I'm not going to expect them to do this :)

So, I now hand edit the makefiles after configure so that libstdc++.so.5 
and libstdc++.so.6 are included when building GDAL.  Since I also have not 
figured out how to add that depency to libgdal.so correctly, I also hand 
build mapserver and php_mapscript.so which I need.

I've picked on LizardTech about this, and they seem interested in cleaning 
it up.  Perhaps if the chorus of agony got loud enough :)

Hope this helps you

Bill

From sab at isis.vpac.org  Mon Oct  3 22:04:14 2005
From: sab at isis.vpac.org (Shoaib Burq (VPAC))
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] random maps
Message-ID: <Pine.LNX.4.63.0510041203160.14815@isis.vpac.org>

Hi
  Anyone know of any software that generates random maps, city
plans, road networks, any of these?

thx
Shoaib Burq
--
VPAC - Geospatial Applications Developer
Building 91, 110 Victoria Street,
Carlton South, Vic 3053, Australia

From starged at videotron.ca  Mon Oct  3 22:31:47 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] random maps
In-Reply-To: <Pine.LNX.4.63.0510041203160.14815@isis.vpac.org>
References: <Pine.LNX.4.63.0510041203160.14815@isis.vpac.org>
Message-ID: <4341E993.6070506@videotron.ca>

Hi Shoaib,

Shoaib Burq (VPAC) wrote:
> Hi
>  Anyone know of any software that generates random maps, city
> plans, road networks, any of these?

Have you tried a fractal generator? Just a thought...
--
Mario B.

From woklist at kyngchaos.com  Mon Oct  3 23:53:34 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
	<Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>
Message-ID: <CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>

Bill,

Yeah, it was your messages I saw about this a while back.  I wasn't  
quite sure what to do, and didn't have time to pursue it much.

What did you do to the GDAL makefiles to get it to work for you?  Did  
you get Frank's -XCClinker trick to work?

I just tried this: add the static libstdc++ from GCC 3.3 (that's all  
Apple gave us for GCC 3.3, tho they gave us a dynamic version for GCC  
4) to LIBS in GDALmake.opt.  Now I get tons of multiple defs between  
the 2 libstdc++ versions.

I'm, not sure what order the 2 versions are getting linked - I  
believe GCC 4 takes care of automatically linking libstdc++ as  
needed, so it's not in the link command that comes out of libtool.


On Oct 3, 2005, at 6:12 PM, Bill Binko wrote:

>
>> I had heard that it was possible to build something in GCC 4 linked
>> to something built with GCC 3.3 by linking both the new and old
>> libstdc++, so I keep attempting this with each new GDAL version to
>> try and figure it out.  Since it happens with GCC 3.3 also, I never
>> get beyond that to just TRY it.
>>
>>
>
> I'm probably the source of that rumor, but it's not exactly what I  
> said.
> There are binary compatibility issues within the GCC 3.x tree: that is
> what I had succeeded with.  However, it's possible that you can get  
> 3.3
> and 4 to work together.
>
> I had a real reason to need this (I needed ECW and MrSID support in  
> the
> same build, and I use GCC 3.4.1).  So I read up and found that if you
> include the older libstdc++ before the newer one in the final link,  
> the
> name mangling works itself out (by design, not luck).
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe

From bill at binko.net  Tue Oct  4 00:14:41 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
	<Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>
	<CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>
Message-ID: <Pine.LNX.4.58.0510040009220.16583@fastcat.binko.net>

> Bill,
> 
> Yeah, it was your messages I saw about this a while back.  I wasn't  
> quite sure what to do, and didn't have time to pursue it much.
> 
> What did you do to the GDAL makefiles to get it to work for you?  Did  
> you get Frank's -XCClinker trick to work?
> 
> I just tried this: add the static libstdc++ from GCC 3.3 (that's all  
> Apple gave us for GCC 3.3, tho they gave us a dynamic version for GCC  
> 4) to LIBS in GDALmake.opt.  Now I get tons of multiple defs between  
> the 2 libstdc++ versions.
> 
> I'm, not sure what order the 2 versions are getting linked - I  
> believe GCC 4 takes care of automatically linking libstdc++ as  
> needed, so it's not in the link command that comes out of libtool.
> 
Try this:

Go back to your default build: the one that ended up with only linker 
errors.  Go ahead and build: you'll fail at link time on the applications.

Just for grins, manually run the first failed link command line adding the 
libraries into the command.  For example, if it were:

gcc .... -o gdal_warp ... -lstd++ -lm -l...etc.

change it to

gcc .... -o gdal_warp ... /usr/local/lib/libstdc++.so.4 
/usr/local/lib/libstdc++.so.5 -lm -l...etc.

And report back how it goes.  That's how I started.  If you want to take 
this offline, you can send this to me: perhaps I can help.

Bill

From bill at binko.net  Tue Oct  4 01:56:14 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <Pine.LNX.4.58.0510040009220.16583@fastcat.binko.net>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
	<Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>
	<CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>
	<Pine.LNX.4.58.0510040009220.16583@fastcat.binko.net>
Message-ID: <Pine.LNX.4.58.0510040146310.16583@fastcat.binko.net>


Alright, after much banter, and a few curses, Frank and I seem to have
found a way to make MrSID work cleanly without having to change between
GCC 3.x compilers.  I have not tested this with 4.x, but it just might
work.

Only two things need to change:

1) You can't use libtool.  (If a libtool person wants to get with me 
offline we can workout what's needed.)  When you run configure add 
--without-libtool. 

2) After configure, edit GDALmake.opt and add the full path to the
appropriate c++ library for your version of MrSID's SDW (for my version 5,
it's /usr/lib/libstdc++.so.5) to the end of your LIBS variable.

Build and install, all should be right with the world.

However, Frank is not 100% sure that this hack will really work reliably,
so if it doesn't, please yell at me, not him.  (He's got this filthy mouth
that I'd rather not deal with again tonight :-)

Bill

From ben at vterrain.org  Tue Oct  4 03:56:00 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] random maps
In-Reply-To: <Pine.LNX.4.63.0510041203160.14815@isis.vpac.org>
Message-ID: <012601c5c8b9$10443e60$9b02a8c0@DellWork>

> -----
> From: Shoaib Burq (VPAC)
> Sent: Monday, October 03, 2005 4:04 PM
> 
>   Anyone know of any software that generates random maps, 
> city plans, road networks, any of these?

If you mean random textured heightfields, there is plenty of software:

http://vterrain.org/Elevation/artificial.html

If you mean random streets and cities, there is much less software, but
there are academic papers with implementations:

http://vterrain.org/Culture/BldCity/index.html
http://vterrain.org/Culture/BldCity/procedural.html

E.g. Procedural Modeling of Cities, A Different Manhattan Project, Rapid
Procedural-Modelling of Architectural Structures, etc.

-Ben


From find_all at hotmail.com  Tue Oct  4 06:21:21 2005
From: find_all at hotmail.com (Josepo Urrutia)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Latitude view thinner than it should be
In-Reply-To: <931f8ea90509270913489f0f9b@mail.gmail.com>
Message-ID: <BAY103-F3932A2D1507560C70A7F28F4830@phx.gbl>


>
>The problem is that if you use direct lat/lon values to map on screen,
>you will suffer increasing distortion as your move away from the
>equator. If you look at globe you will see that one of the lat/long
>grid boxes is squarish near the equator, but tall and thin near the poles.
>
>The normal solution to see maps with reasonable local display is to
>convert into a projected coordinate system, such as UTM.   Alternatively
>you could hack an approximation of this by using a different pixel
>size for lat and lon directions and compute the sizes based on your general
>latitude.
>

I need to do the projection in Transverse Mercator (UTM).

I've been surfing on the net looking for some info and have found the way to 
convert a Lat/Lon position to a UTM position wich gives me a value of meters 
form the ecuator for the latitude and a value of meters form the central 
meridian for the longitude.

But now, How can I do the projection to the screen?

Any ideas / help are wellcome.



From find_all at hotmail.com  Tue Oct  4 08:15:04 2005
From: find_all at hotmail.com (Josepo Urrutia)
Date: Wed Nov 21 11:49:47 2007
Subject: FW: Re: [Gdal-dev] Save a map from a OGRDataSource
In-Reply-To: <931f8ea90509270959b985941@mail.gmail.com>
Message-ID: <BAY103-F11B781B6BF5D2E2DB1302BF4830@phx.gbl>

>
>So you have data in an OGRDataSource from some format (not necessarily
>S-57) and you want to save it out to S-57 format?  That is a very messy
>and unsafe thing to do because OGR's S-57 writing support is very
>dependent on having the exact S-57 data model already preprepared.
>
>If you want to see how to use OGR to write data out to a format OGR
>supports for creation, look through ogr2ogr.cpp, or better yet read through
>the "Write to OGR" part of the API tutorial at:
>
>   http://www.gdal.org/ogr/ogr_apitut.html
>

Writing the map on S-57 format is not mandatory, using any format OGR 
library can read would be OK.

I'll take a look to the code and the tutorial, thanks for the hint!
If I've any question I know where to ask  ;-)



From sholl at gmx.net  Tue Oct  4 09:02:21 2005
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Oracle locator/spatial bindings w/ ogr
Message-ID: <22495.1128430941@www29.gmx.net>

Dear GDAL/OGR-users,

I am trying to build the latest CVS-sources with oci-bindings. During the
configure-process everything works fine (oci is set tu yes). But when I try
$GDAL/ogr/.libs/ogrinfo --formts no OCI-format is supported.

gdal/ogr/.libs> ./ogrinfo --formats
Loaded OGR Format Drivers:
  -> "ESRI Shapefile" (read/write)
  -> "UK .NTF" (readonly)
  -> "SDTS" (readonly)
  -> "TIGER" (read/write)
  -> "S57" (read/write)
  -> "MapInfo File" (read/write)
  -> "DGN" (read/write)
  -> "VRT" (readonly)
  -> "AVCBin" (readonly)
  -> "REC" (readonly)
  -> "Memory" (read/write)
  -> "CSV" (read/write)
  -> "GML" (read/write)
  -> "ODBC" (read/write)
  -> "PostgreSQL" (read/write)
  -> "MySQL" (readonly)


Do I have to do a ' make install' in order to recognize the new
oci-bindings?

When I do a 'ldd $GDAL/ogr/.libs/ogrinfo' the oci-libs are found:
ldd ./ogrinfo
[...]
libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x4003c000)
libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0x40469000)
libclntsh.so.10.1 => /projekte/oracle/db/lib/libclntsh.so.10.1 (0x4056d000)
libnnz10.so => /projekte/oracle/db/lib/libnnz10.so (0x414a7000)
/lib/ld-linux.so.2 (0x40000000)
[...]

I have downloaded the full oracle-produkt for linux[1] and installed with
the shipped universal installer. As stated the needed client-libs required
by ogr should be included in the package.

Thanks for any help.

Best regards

       
Stephan

[1]
http://www.oracle.com/technology/software/products/database/oracle10g/index.html

-- 
5 GB Mailbox, 50 FreeSMS http://www.gmx.net/de/go/promail
+++ GMX - die erste Adresse fr Mail, Message, More +++

From warmerdam at pobox.com  Tue Oct  4 09:19:21 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Latitude view thinner than it should be
In-Reply-To: <BAY103-F3932A2D1507560C70A7F28F4830@phx.gbl>
References: <931f8ea90509270913489f0f9b@mail.gmail.com>
	<BAY103-F3932A2D1507560C70A7F28F4830@phx.gbl>
Message-ID: <931f8ea90510040619u6c15f819kbf6a6b48e4929ed2@mail.gmail.com>

On 10/4/05, Josepo Urrutia <find_all@hotmail.com> wrote:
> I need to do the projection in Transverse Mercator (UTM).
>
> I've been surfing on the net looking for some info and have found the way to
> convert a Lat/Lon position to a UTM position wich gives me a value of meters
> form the ecuator for the latitude and a value of meters form the central
> meridian for the longitude.
>
> But now, How can I do the projection to the screen?

Josepo,

I'm not clear on what you are using as rendering technology.  The
simpliest approach would be to reproject your data into UTM before
rendering.

eg.

ogr2ogr -t_srs '+proj=utm +zone=11 +datum=WGS84' out_dir mys57data.000

Alternatively, you can create an OGRCoordinateTransformation object
going from lat/long to UTM and pass it to the transform() method on each
OGRGeometry you get them back from GetNextFeature().

More information on using coordinate transformation in the OGR API is
available at:

  http://www.gdal.org/ogr/osr_tutorial.html

Also check the transform() method at:

  http://www.gdal.org/ogr/classOGRGeometry.html#a24

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Oct  4 09:22:06 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Oracle locator/spatial bindings w/ ogr
In-Reply-To: <22495.1128430941@www29.gmx.net>
References: <22495.1128430941@www29.gmx.net>
Message-ID: <931f8ea90510040622v10eff78etb3680a9821237d74@mail.gmail.com>

On 10/4/05, Stephan Holl <sholl@gmx.net> wrote:
> Dear GDAL/OGR-users,
>
> I am trying to build the latest CVS-sources with oci-bindings. During the
> configure-process everything works fine (oci is set tu yes). But when I try
> $GDAL/ogr/.libs/ogrinfo --formts no OCI-format is supported.
...
> Do I have to do a ' make install' in order to recognize the new
> oci-bindings?

Stephan,

I would suggest a "make clean ; make" to ensure that all the correct
files were re-compiled when you added in OCI support.  I don't know
how you have your shared library searching setup but it does seem
likely that you are picking up an old libgdal.so in /usr/local/lib so
I would suggest installing and then trying again.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Tue Oct  4 09:28:07 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL 1.3.1b1
In-Reply-To: <931f8ea90510031414w40793d4aia2d4dce16110836c@mail.gmail.com>
Message-ID: <0afc01c5c8e7$74e85170$959877c6@cts1149>

It works with cygwin. 

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
       "I'm the master of low expectations." 
       -George W. Bush, aboard Air Force One, June 4, 2003

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, October 03, 2005 5:15 PM
> To: GDAL-dev
> Subject: [Gdal-dev] GDAL 1.3.1b1
> 
> Folks,
> 
> I have cut a new copy of the source, designated GDAL 1.3.1b1 at:
> 
>   http://www.gdal.org/dl/gdal-1.3.1b1.tar.gz
>   http://www.gdal.org/dl/gdal131b1.zip
> 
> Should fix a number of bugs.
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 




From sholl at gmx.net  Tue Oct  4 09:54:52 2005
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Oracle locator/spatial bindings w/ ogr
References: <931f8ea90510040622v10eff78etb3680a9821237d74@mail.gmail.com>
Message-ID: <21473.1128434092@www29.gmx.net>

Hello Frank,

> 
> Stephan,
> 
> I would suggest a "make clean ; make" to ensure that all the correct
> files were re-compiled when you added in OCI support.  I don't know
> how you have your shared library searching setup but it does seem
> likely that you are picking up an old libgdal.so in /usr/local/lib so
> I would suggest installing and then trying again.

I have found the error... It was the search order for my shared libs. Thanks
for the hint. After reorganizing the libs OCI support was there!

Best
     Stephan

-- 
GMX DSL = Maximale Leistung zum minimalen Preis!
2000 MB nur 2,99, Flatrate ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

From woklist at kyngchaos.com  Tue Oct  4 10:49:20 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <Pine.LNX.4.58.0510040146310.16583@fastcat.binko.net>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>
	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>
	<Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>
	<CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>
	<Pine.LNX.4.58.0510040009220.16583@fastcat.binko.net>
	<Pine.LNX.4.58.0510040146310.16583@fastcat.binko.net>
Message-ID: <748D4206-1091-47D7-BA3B-9796E0DA8AC8@kyngchaos.com>


On Oct 4, 2005, at 12:56 AM, Bill Binko wrote:

>
> Alright, after much banter, and a few curses, Frank and I seem to have
> found a way to make MrSID work cleanly without having to change  
> between
> GCC 3.x compilers.  I have not tested this with 4.x, but it just might
> work.
>
> Only two things need to change:
>
> 1) You can't use libtool.  (If a libtool person wants to get with me
> offline we can workout what's needed.)  When you run configure add
> --without-libtool.
>
> 2) After configure, edit GDALmake.opt and add the full path to the
> appropriate c++ library for your version of MrSID's SDW (for my  
> version 5,
> it's /usr/lib/libstdc++.so.5) to the end of your LIBS variable.
>
> Build and install, all should be right with the world.
>
No go.  No missing symbols, but tons of multiple definitions  
warnings, that eventually cause it to fail.

ld: warning multiple definitions of symbol ___gxx_personality_v0
/usr/lib/gcc/darwin/3.3/libstdc++.a(eh_personality.o) private  
external definition of ___gxx_personality_v0 in section (__TEXT,__text)
/usr/lib/gcc/powerpc-apple-darwin8/4.0.0/libstdc++.dylib(single  
module) definition of ___gxx_personality_v0
.
.
[many, many more]
.
.
ld: multiple definitions of symbol  
__ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_
/usr/lib/gcc/powerpc-apple-darwin8/4.0.0/libstdc++.dylib(single  
module) definition of  
__ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_
/usr/lib/gcc/darwin/3.3/libstdc++.a(string-inst.o) private external  
definition of __ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_  
in section (__TEXT,__text)
/usr/bin/libtool: internal link edit command failed

Maybe it doesn't like mixing the static and dynamic libraries?  
(there's no choice there - static for the old, dynamic for the new)

Note: using libtool and adding the GCC 3.3 libstdc++ to LIBS also  
works for me (with the same multi defs problem), it's not stripping  
out what I add to LIBS, and it IS using LIBS.  At least without  
libtool, I could play with linker options to try to get rid of the  
multi defs problem, but the few options I tried didn't help.

I guess I'll just continue to wait for LizardTech to get crackin on  
an update.  The conversion program they provide in the DSDK still  
works in Mac OS 10.4, so at least I have some sort of conversion  
option from MrSID.


> Go back to your default build: the one that ended up with only linker
> errors.  Go ahead and build: you'll fail at link time on the  
> applications.
>
It has always failed at the library link step.  Never got to the  
applications.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect

From dburken at comcast.net  Tue Oct  4 13:14:04 2005
From: dburken at comcast.net (David Burken)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] linking problems with MrSID library
In-Reply-To: <748D4206-1091-47D7-BA3B-9796E0DA8AC8@kyngchaos.com>
References: <C5B740D9CEC9284A84B767BBD1DAA846D5529F@sea-srv-ms2.lizardtech.com>	<CE013CA9-A020-4543-9AA5-769A81515F60@kyngchaos.com>	<Pine.LNX.4.58.0510031906360.4442@fastcat.binko.net>	<CBCA961F-0254-47DC-8449-FA77DD7A5D57@kyngchaos.com>	<Pine.LNX.4.58.0510040009220.16583@fastcat.binko.net>	<Pine.LNX.4.58.0510040146310.16583@fastcat.binko.net>
	<748D4206-1091-47D7-BA3B-9796E0DA8AC8@kyngchaos.com>
Message-ID: <4342B85C.8030007@comcast.net>

The below worked for me on Fedora Core 3 i686 gcc gcc version 3.4.2.

Thanks!
Dave

William Kyngesburye wrote:

>
> On Oct 4, 2005, at 12:56 AM, Bill Binko wrote:
>
>>
>> Alright, after much banter, and a few curses, Frank and I seem to have
>> found a way to make MrSID work cleanly without having to change  between
>> GCC 3.x compilers.  I have not tested this with 4.x, but it just might
>> work.
>>
>> Only two things need to change:
>>
>> 1) You can't use libtool.  (If a libtool person wants to get with me
>> offline we can workout what's needed.)  When you run configure add
>> --without-libtool.
>>
>> 2) After configure, edit GDALmake.opt and add the full path to the
>> appropriate c++ library for your version of MrSID's SDW (for my  
>> version 5,
>> it's /usr/lib/libstdc++.so.5) to the end of your LIBS variable.
>>
>> Build and install, all should be right with the world.
>>
> No go.  No missing symbols, but tons of multiple definitions  
> warnings, that eventually cause it to fail.
>
> ld: warning multiple definitions of symbol ___gxx_personality_v0
> /usr/lib/gcc/darwin/3.3/libstdc++.a(eh_personality.o) private  
> external definition of ___gxx_personality_v0 in section (__TEXT,__text)
> /usr/lib/gcc/powerpc-apple-darwin8/4.0.0/libstdc++.dylib(single  
> module) definition of ___gxx_personality_v0
> .
> .
> [many, many more]
> .
> .
> ld: multiple definitions of symbol  
> __ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_
> /usr/lib/gcc/powerpc-apple-darwin8/4.0.0/libstdc++.dylib(single  
> module) definition of  
> __ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_
> /usr/lib/gcc/darwin/3.3/libstdc++.a(string-inst.o) private external  
> definition of __ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ES3_RKS6_  
> in section (__TEXT,__text)
> /usr/bin/libtool: internal link edit command failed
>
> Maybe it doesn't like mixing the static and dynamic libraries?  
> (there's no choice there - static for the old, dynamic for the new)
>
> Note: using libtool and adding the GCC 3.3 libstdc++ to LIBS also  
> works for me (with the same multi defs problem), it's not stripping  
> out what I add to LIBS, and it IS using LIBS.  At least without  
> libtool, I could play with linker options to try to get rid of the  
> multi defs problem, but the few options I tried didn't help.
>
> I guess I'll just continue to wait for LizardTech to get crackin on  
> an update.  The conversion program they provide in the DSDK still  
> works in Mac OS 10.4, so at least I have some sort of conversion  
> option from MrSID.
>
>
>> Go back to your default build: the one that ended up with only linker
>> errors.  Go ahead and build: you'll fail at link time on the  
>> applications.
>>
> It has always failed at the library link step.  Never got to the  
> applications.
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "Time is an illusion - lunchtime doubly so."
>
> - Ford Prefect
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Tue Oct  4 15:32:51 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.1 Released
Message-ID: <931f8ea90510041232n33865eeeh56be86e3ae3b03a7@mail.gmail.com>

Folks,

I am pleased to announce the release of GDAL/OGR 1.3.1.  This is mostly a
bug fix release, though there are a few new and improved drivers.

Source:
  http://www.gdal.org/dl/gdal-1.3.1.tar.gz
  http://www.gdal.org/dl/gdal131.zip

Docs / Web site:
  http://www.gdal.org/dl/gdal131doc.zip

Test Suite:
  http://www.gdal.org/dl/gdalautotest-1.3.1.tar.gz

The major news with this release is that the "Next Generation" Perl, Python
and Ruby bindings are now considered ready to use, though I'm sure there will
be some additional improvements to them in the coming months.  I would like to
give out a special thank you to Ari Jolma (perl), Charlie Savage (Ruby),
Kevin Ruland (Python + overall NG work) and Howard Butler who have put in a
huge amount of effort on these bindings.  If we can get champions for Java,
C# and PHP that are willing to brave the dark depths of SWIG, I'm sure we can
make good progress on them too.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



GDAL 1.3.1 - Overview of Changes
--------------------------------

Next Generation SWIG Wrappers (GDAL and OGR):
 - Python, Perl and Ruby bindings considered to be ready to use.
 - C#, Java, PHP are at best initial prototypes.
 - Added configure options for most NG options.

PCRaster Driver:
 - libcsf is now included as part of GDAL.
 - PCRaster enabled by default on win32.
 - --with-pcraster=internal option now supported on unix (but not yet default)

VSI Virtualization:
 - The "large file API" (VSI*L) has been re-engineered to allow installing
   additional file handlers at runtime.
 - Added "in memory" VSI handler so that now any driver using VSI*L
   functions for data access can operate on in-memory files.
 - PNG, JPEG and GeoTIFF drivers upgraded to work with in-memory support.

Raster Attribute Tables:
 - Implemented new Raster Attribute Tables support.  See the
   GDALRasterAttributeTable class for more information.

Erdas Imagine Overviews:
 - Erdas Imagine driver upgraded to support building internal overviews.
 - Generic overview handler updated to support overviews in Erdas Imagine
   format for any file format.  Set USE_RRD config option to YES to enable.

gdalwarp:
 - Added proper support for "unified source nodata", so the -srcnodata
   switch works well.

RIK Driver:
 - New Swedish format driver implemented by Daniel Wallner.

JPEG Driver:
 - Substantial improvements to EXIF support.

MrSID Driver:
 - Updated with proper JPEG2000 support as JP2MRSID driver, including
   encoding with ESDK.
 - Updated to support MrSID Version 5.x SDKs.

PNG Driver:
 - Fixed serious bugs with 16bit file support.
 - Added NODATA_VALUES to identify RGB sets that indicate a nodata pixel.


OGR 1.3.1 - Overview of Changes
-------------------------------

Reference Counting:
 - OGRSpatialReference and OGRFeatureDefn now honour reference counting
   semantics.
 - Note that, especially for the OGRFeatureDefn, it is now critical that
   all drivers be careful with reference counting.  Any OGR drivers not in
   the core distribution will likely crash if not updated.

ESRI Personal Geodatabase Driver:
 - New driver implemented for ESRI Personal Geodatabase (.mdb) files.
 - Uses ODBC, enabled by default on win32.

ODBC Driver:
 - Updated to support binary fields.
 - Updated to support WKB geometry fields.
 - Updated to support DSN-less connections.

S57 Driver:
 - Added support for Inland Waterways, and Additional Military Layers profiles


From John.C.Cartwright at noaa.gov  Tue Oct  4 18:16:05 2005
From: John.C.Cartwright at noaa.gov (John C Cartwright)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] simple OGR/python projection question
Message-ID: <4342FF25.3080204@noaa.gov>

Hello All,

I'm using the OGR python bindings to convert Plate 
Carree(Equirectangular) coordinates in meters to geographic coordinates 
in WGS84.  I'm getting an answer like:

(-104.99999999546829, 38.999751150159064, 8426.3269814412379)

I understand that the first two values are longitude and latitude, but I 
don't understand the third term. Can some one explain?

Code fragment listed below.

Thanks!

-- john




wkt = 'PROJCS["World_Plate_Carree", GEOGCS["WGS 84", DATUM["WGS_1984", 
SPHEROID["WGS_1984", 6378137.0, 298.257223563]], PRIMEM["Greenwich", 
0.0], UNIT["degree",0.017453292519943295]], 
PROJECTION["Equirectangular"], PARAMETER["false_easting",  0.0], 
PARAMETER["false_northing", 0.0], PARAMETER["Central_Meridian", -180.0], 
UNIT["Meter",1.0]]'

sourceSrs = osr.SpatialReference()
targetSrs = osr.SpatialReference()
sourceSrs.ImportFromWkt(wkt)
targetSrs.ImportFromEPSG(4326)
transform = osr.CoordinateTransformation(sourceSrs,targetSrs)
coords = transform.TransformPoint(x,y)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: John.C.Cartwright.vcf
Type: text/x-vcard
Size: 269 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051004/377046e3/John.C.Cartwright.vcf
From warmerdam at pobox.com  Tue Oct  4 19:20:42 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] simple OGR/python projection question
In-Reply-To: <4342FF25.3080204@noaa.gov>
References: <4342FF25.3080204@noaa.gov>
Message-ID: <931f8ea90510041620w3b814731pea9dc221162ef022@mail.gmail.com>

On 10/4/05, John C Cartwright <John.C.Cartwright@noaa.gov> wrote:
> Hello All,
>
> I'm using the OGR python bindings to convert Plate
> Carree(Equirectangular) coordinates in meters to geographic coordinates
> in WGS84.  I'm getting an answer like:
>
> (-104.99999999546829, 38.999751150159064, 8426.3269814412379)
>
> I understand that the first two values are longitude and latitude, but I
> don't understand the third term. Can some one explain?

John,

The problem is that internally PROJ.4 only supports plate caree as a
spherical coordinate system, not ellipsoidal. So the large Z value (8.4km)
is the Z difference between the sphere and ellipsoid at the indicated
location.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct  5 09:17:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] GDAL/OGR on AMD64
Message-ID: <931f8ea90510050617l70024bc7p71af0c123e9a2ca4@mail.gmail.com>

Folks,

There have been some questions about GDAL/OGR operating on the
AMD64 (under Linux) and about how stable it is.  Brent Wood has been
kind enough to provide access to such a system running SuSe and I
have done some builds and tests.

I did find a quirk related to building -fPIC which I corrected in time for
the 1.3.1 release.  With that fix things seem to build find out of the box.

I also ran the test suite and all the raster tests pass.  On the vector
side something is failing in ogr_join_test.py but other than everything
went fine.  I will be working on tracking down the ogr_join_test.py
problem.

This isn't comprehensive but it gives a good indication that things are
pretty stable on the platform.

I would add that on the AMD64 platform under linux ints are 32bit,
and long and pointers are 64bit.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Oct  5 13:30:16 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] What is the format code for ELAS
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0CF@mailman.san.com>

I am developing some code around OSSIM, and I need to know what the gdal
driver code for ELAS is for the gdal ossim plugin.  I didn't see it
posted on the supported drivers html page in the GDAL documentation.  

 

Thanks,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/2e724fbe/attachment.html
From MChapman at sanz.com  Wed Oct  5 13:35:40 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] MFF2 Driver code
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0D0@mailman.san.com>

What is the driver code for MFF2?

 

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/05c3dc9f/attachment.html
From gillian.walter at atlantis-scientific.com  Wed Oct  5 13:31:34 2005
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] MFF2 Driver code
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C0D0@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C0D0@mailman.san.com>
Message-ID: <32990.209.151.14.43.1128533494.squirrel@http://mail.atlantis-scientific.com>

Hi,

The MFF2 driver code is in gdal/frmts/raw/hkvdataset.cpp.


Gillian

> What is the driver code for MFF2?
>
>
>
> Martin
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From MChapman at sanz.com  Wed Oct  5 13:58:59 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] MFF2 Driver code
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0D1@mailman.san.com>

Thanks Gillian!

Martin

-----Original Message-----
From: Gillian Walter [mailto:gillian.walter@atlantis-scientific.com] 
Sent: Wednesday, October 05, 2005 11:32 AM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MFF2 Driver code

Hi,

The MFF2 driver code is in gdal/frmts/raw/hkvdataset.cpp.


Gillian

> What is the driver code for MFF2?
>
>
>
> Martin
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Wed Oct  5 14:40:02 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] What is the format code for ELAS
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C0CF@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C0CF@mailman.san.com>
Message-ID: <931f8ea90510051140p3194ccccve8ec7d654dfe479c@mail.gmail.com>

On 10/5/05, Chapman, Martin <MChapman@sanz.com> wrote:
>
> I am developing some code around OSSIM, and I need to know what the gdal
> driver code for ELAS is for the gdal ossim plugin.  I didn't see it posted
> on the supported drivers html page in the GDAL documentation.

Martin,

The driver code is "ELAS".  Are wanting that?  Or the location of
the associated source code?  Or what the format is?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From RMcCulley at county24.com  Wed Oct  5 16:15:18 2005
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Combine multiple Tiffs into a single Tiff
Message-ID: <1E095D48112D90428817CB417AECDB62025B7B@vermilion.county24.local>

Hi,

I've got a Landsat image downloaded off of Geobase.  By mistake, I downloaded a version with each band of landsat info in a separate GeoTiff (I would rather have had the bsq file, I know how to deal with it).  Can I use GDAL to merge three of the bands into a single RGB GeoTiff?  If not, what is the best way to do this?

Thanks,
Rob McCulley
GIS Coordinator
County of Vermilion River No. 24
(780) 846-2244
rmcculley@county24.com
www.vermilion-river.ab.ca


From MChapman at sanz.com  Wed Oct  5 16:37:53 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] What is the format code for ELAS
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0D2@mailman.san.com>

Frank,

Thanks, that's what I guessed it was.  I don't need it yet.  I'm adding
some functionality for OSSIM in our gui and I am showing the different
options for OSSIM exporters.  If they choose one that isn't linked into
the users GDAL build then I will flash them a message that they don't
have the driver loaded and how they can request that support be added to
their versions.  I want to give them all the options even if they may
not have the driver with their specific build.  The default build will
have some, but not all of the extra drivers that GDAL/OSSIM offers
(which is mostly GDAL at the moment).

Best regards,
Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Wednesday, October 05, 2005 12:40 PM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] What is the format code for ELAS

On 10/5/05, Chapman, Martin <MChapman@sanz.com> wrote:
>
> I am developing some code around OSSIM, and I need to know what the
gdal
> driver code for ELAS is for the gdal ossim plugin.  I didn't see it
posted
> on the supported drivers html page in the GDAL documentation.

Martin,

The driver code is "ELAS".  Are wanting that?  Or the location of
the associated source code?  Or what the format is?

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From surgpub at telkomsa.net  Wed Oct  5 17:06:15 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Combine multiple Tiffs into a single Tiff
In-Reply-To: <1E095D48112D90428817CB417AECDB62025B7B@vermilion.county24.local>
References: <1E095D48112D90428817CB417AECDB62025B7B@vermilion.county24.local>
Message-ID: <200510052306.15575.surgpub@telkomsa.net>

On Wednesday 05 October 2005 22:15, Rob McCulley wrote:
> Hi,
>
> I've got a Landsat image downloaded off of Geobase.  By mistake, I
> downloaded a version with each band of landsat info in a separate GeoTiff
> (I would rather have had the bsq file, I know how to deal with it).  Can I
> use GDAL to merge three of the bands into a single RGB GeoTiff?  If not,
> what is the best way to do this?
>
> Thanks,
> Rob McCulley
> GIS Coordinator
> County of Vermilion River No. 24
> (780) 846-2244
> rmcculley@county24.com
> www.vermilion-river.ab.ca


Hi Rob

You can use VRTs to compose the bands into a single image and then use  
gdal_translate to write to a single GeoTIFF.

Example :
Here is rgb.vrt which is a plain text file.

<VRTDataset rasterXSize="8675" rasterYSize="7762">
  <SRS>PROJCS[&quot;WGS 84 / UTM zone 33N&quot;,GEOGCS[&quot;WGS 
84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 
84&quot;,6378137,298.2572235629972,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,15],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;32633&quot;]]</SRS>
  <GeoTransform>  5.7926250000000000e+05,  2.8500000000000000e+01,  
0.0000000000000000e+00,  5.5269195000000000e+06,  0.0000000000000000e+00, 
-2.8500000000000000e+01</GeoTransform>
  <Metadata>
    <MDI key="TIFFTAG_RESOLUTIONUNIT">2 (pixels/inch)</MDI>
    <MDI key="TIFFTAG_XRESOLUTION">72</MDI>
    <MDI key="TIFFTAG_YRESOLUTION">72</MDI>
    <MDI key="AREA_OR_POINT">Point</MDI>
  </Metadata>
  <VRTRasterBand dataType="Byte" band="1">
    <SimpleSource>
      <SourceFilename 
relativeToVRT="1">p189r026_7t20000802_z33_nn30.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
      <DstRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <SimpleSource>
      <SourceFilename 
relativeToVRT="1">p189r026_7t20000802_z33_nn20.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
      <DstRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
    </SimpleSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <SimpleSource>
      <SourceFilename 
relativeToVRT="1">p189r026_7t20000802_z33_nn10.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
      <DstRect xOff="0" yOff="0" xSize="8675" ySize="7762"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

Then to write the VRT as a GeoTIFF :
gdal_translate rgb.vrt out.tif

Simple as that!
If you use OpenEV with the compose tool you don't have to type in all the all 
the projection and datum info and you can export directly as GeoTIFF (it just 
uses gdal in the background)

Regards
Paul

From t.r.decarlo at larc.nasa.gov  Wed Oct  5 17:15:04 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Combine multiple Tiffs into a single Tiff
In-Reply-To: <1E095D48112D90428817CB417AECDB62025B7B@vermilion.county24.local>
Message-ID: <0bc201c5c9f1$daaf25a0$959877c6@cts1149>

Rob,
Someone else asked this quite a while back. Frank's response was:

>As long as the red, NIR and MIR are  the same size and for the same
>region you should be able to stack them with gdal_merge.py:
>
>gdal_merge.py -seperate red.tif nir.tif mir.tif -o stack.tif
>
>The -seperate flag means put each input into a seperate band.

But that didn't help me, since I didn't have python on my Windoze box.
Instead, I used "gdal_translate -of VRT" to create a *.vrt file for one of
the inputs. I then edited the vrt file to add the other bands (copied and
modified the <band> section). I then used gdal_translate to build a single
GTiff from the vrt file.

It was a bit roundabout, but it worked.

Thom
--
Thom DeCarlo
------------------------------------------------------
              Experience is a wonderful thing
It allows you to recognize a mistake when you make it again.


> -----Original Message-----
> From: Rob McCulley
> Sent: Wednesday, October 05, 2005 4:15 PM
> To: GDAL (E-mail)
> Subject: [Gdal-dev] Combine multiple Tiffs into a single Tiff
> 
> Hi,
> 
> I've got a Landsat image downloaded off of Geobase.  By mistake, I
> downloaded a version with each band of landsat info in a separate GeoTiff
> (I would rather have had the bsq file, I know how to deal with it).  Can I
> use GDAL to merge three of the bands into a single RGB GeoTiff?  If not,
> what is the best way to do this?
> 
> Thanks,
> Rob McCulley
> GIS Coordinator
> County of Vermilion River No. 24
> (780) 846-2244
> rmcculley@county24.com
> www.vermilion-river.ab.ca




From dylan at iici.no-ip.org  Wed Oct  5 18:11:14 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0
Message-ID: <200510051511.14285.dylan@iici.no-ip.org>

Hi -

I have compiled GDAL numerous times on Debian without incident.

Compiling on a new machine running Rox with the configure options:
export CFLAGS="-march=athlon -mcpu=athlon"
export CXXFLAGS="-march=athlon -mcpu=athlon"
./configure --with-png=internal --with-jpeg=internal \
--with-gif=internal --with-libtiff=internal \
--with-geotiff=internal --with-libz=internal\
--without-pg --without-ogdi --with-python \
--with-threads=yes

I get the error:
--------------
gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared (first use
   this function)
gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is reported only
   once for each function it appears in.)
gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this function)
gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared (first use this
   function)
----------------

any ideas ? 

thanks!

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From John.C.Cartwright at noaa.gov  Wed Oct  5 18:31:50 2005
From: John.C.Cartwright at noaa.gov (John C Cartwright)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] error in compiling py-Projection
Message-ID: <43445456.2060808@noaa.gov>

Hello All,

I'm tring to compile py-Projection on linux (RHEL WS3). Can anyone 
provide some guidance on how to modify the setup.py?  It seems that 
proj4 libs/includes are required (which I have), but it also seems to be 
looking for a "pyprojection/proj/src" which I don't.

Thanks!

-- john


-------------- next part --------------
A non-text attachment was scrubbed...
Name: John.C.Cartwright.vcf
Type: text/x-vcard
Size: 269 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/b563831a/John.C.Cartwright.vcf
From buckmasterjunior at yahoo.com  Wed Oct  5 21:17:35 2005
From: buckmasterjunior at yahoo.com (Gerald Buckmaster)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] two subjects - Katrina Good News and Request for VRT API
	VB6 binding
Message-ID: <20051006011735.51274.qmail@web33514.mail.mud.yahoo.com>

Greetings,
 
It's been a while since I've written to the list, and it seems as though I only write when necessity insists, but this time I have a good news story to share.
 
A few days after Katrina dissipated enough to fly relief photo missions into the hardest struck areas of Louisiana/Mississippi,  nearly thousand images were collected by a National Guard platform.  These images were processed with a VB6 utility that basically accomplishes all the georeferencing math based upon sensor model ephemeris, creates a world file and calls gdal_translate to compress large bitmaps into georeferenced jpeg2000 images. Since this GDAL-based utility was designed to process in batch mode, processing the raw imagery into exploitable data was quick, accurate and reliable.  Based upon the feedback I received, at least a dozen residences with distress markings were identified and more importantly, located with decent enough coordinates to pass to dispatched rescue teams.  The compression from 80+mb to 5mb files allowed timely transfer of the georeferenced imagery betwixt agencies in a bandwidth-constrained environment as well.
 
Ladies and gentlemen, it is my firm belief lives were saved as a result of the hard work dedicated to the open-source GDAL project.   Frank, you and and the entire GDAL Development Team deserve a LOUD round of applause!  
 
Thank you,
 
Gerald Buckmaster
 
 
Now for the second subject:  I need to create a version of the VB6 utility mentioned above that can be triggered by filecreate messaging - basically monitoring a directory for the create completion of a bitmap.  With the VB6 binding now available, courtesy of Frank, this is also an opportunity to drop the gdal_translate functionality directly and cleanly into the utility...if VRT API VB binding is available, a missing link Frank pointed out in March.  If anyone (with more skills than I) could take this on,  I would be most grateful, as I'm sure other folks would be as well.
 
I know VB6 really isn't the development tool of choice anymore,  but in my industry, it can be difficult receiving certification and accreditation to operate apps developed in .NET.  There still is a niche for VB6 development, and I believe fleshing out GDAL associated APIs with VB6 bindings can lead to some great apps.  I personally am not skilled enough to writing bindings, but I can sure use them in RAD prototypes.
 
/vr
Buck
 
PS - Frank, do you think there is enough interest to start a gdal-vb-dev mailing list?
 
 
On Thu, 17 Mar 2005 11:03:44 -0800 (PST), Gerald Buckmaster
<buckmasterjunior@yahoo.com> wrote:
> Good Stuff! 
>   
> I edited to provide a path for the GDAL library and the sample data -
> everything worked fine. 
> I briefly looked over functions...were you able to include all GDAL 
calls?
> Or at least all utilized by gdal_translate.exe?  How difficult would 
it be
> for a VB6 version of gdal_translate to be written?  Does the ECW 
JPEG2000
> SDK have VB6 bindings as well?  This could be BIG! 

Buck,

The VB6 bindings are not comprehensive, though I think I have hit
most of the key items.  The VB6 script I sent demonstrated the core
of gdal_translate functionality.  But a complete implementation would
need access to the VRT API or else quite a bit of VB code to 
create in-memory VRT documents.  The VRT mechanism is used
for subsetting and band remapping in gdal_translate. 

There are no VB6 ECW JPEG2000 SDK bindings that I am aware of,
but of course the VB6 GDAL bindings give access to that capability
within the data model limitations of GDAL. 

I am personally quite excited by the VB6 bindings, but to be honest, 
it seems there are a limited number of folks these days writing new
VB6 apps so I don't anticipate it having a huge impact on GDAL 
usage.  I am happy to make improvements to the VB6 bindings
though.  Also, if you look through how I have done the bindings
you can quite easiily extend them for new calls without even 
having to recompile GDAL.   Most of my work on the bindings
(after the initial building hurdle) was just writing new Declare
statements for C API functions (in GDALCore.bas) and then 
extending the Visual Basic classes to call into those low level
calls.  


		
---------------------------------
Yahoo! for Good
 Click here to donate to the Hurricane Katrina relief effort. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/a343fc6e/attachment.html
From warmerdam at pobox.com  Wed Oct  5 21:38:50 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] error in compiling py-Projection
In-Reply-To: <43445456.2060808@noaa.gov>
References: <43445456.2060808@noaa.gov>
Message-ID: <931f8ea90510051838i6eccb96cg831ffa9eeea7552a@mail.gmail.com>

On 10/5/05, John C Cartwright <John.C.Cartwright@noaa.gov> wrote:
> Hello All,
>
> I'm tring to compile py-Projection on linux (RHEL WS3). Can anyone
> provide some guidance on how to modify the setup.py?  It seems that
> proj4 libs/includes are required (which I have), but it also seems to be
> looking for a "pyprojection/proj/src" which I don't.

John,

It sounds like you need to unpack the proj.4 source distribution in
your pyprojection directory, and then rename it to proj.

This question would really be more appropriate on the proj.4 list.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Thu Oct  6 07:48:13 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] grass-driver conflicts with gtk+?
Message-ID: <43450EFD.1040300@tkk.fi>

Hi,

If I compile and use 1.3.1 with grass (I've got 6.0.1) and then use that 
libgdal with my own code, which uses gtk+ I get a segfault when I open a 
File Open dialogbox. Without the grass driver there are no problems. 
Below is stack trace. Any ideas? Threads seem to be involved somehow. I 
removed and tried to use the stand-alone gdal-grass but don't have time 
now to look into how it is used (should it autoload somehow?)

Ari

-- Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread -1211434336 (LWP 28143)]
0xb7de0c94 in pthread_mutex_lock () from /lib/tls/libpthread.so.0
(gdb) bt
#0  0xb7de0c94 in pthread_mutex_lock () from /lib/tls/libpthread.so.0
#1  0xb66e1f52 in link_unlock () from /usr/lib/libORBit-2.so.0
#2  0xb66e2108 in link_exec_command () from /usr/lib/libORBit-2.so.0
#3  0xb66e217d in link_set_io_thread () from /usr/lib/libORBit-2.so.0
#4  0xb66dd379 in ORBit_ObjectAdaptor_set_thread_hintv () from /usr/lib/libORBit-2.so.0
#5  0xb65a6fd0 in bonobo_poa_get_threadedv () from /usr/lib/libbonobo-2.so.0
#6  0xb65a7101 in bonobo_poa_get_threaded () from /usr/lib/libbonobo-2.so.0
#7  0xb6735dee in _gnome_vfs_get_client () from /usr/lib/libgnomevfs-2.so.0
#8  0xb6756e6d in gnome_vfs_volume_monitor_client_get_type () from /usr/lib/libgnomevfs-2.so.0
#9  0xb7a37d20 in g_type_class_ref () from /usr/lib/libgobject-2.0.so.0
#10 0xb7a1f09a in g_object_newv () from /usr/lib/libgobject-2.0.so.0
#11 0xb7a1f459 in g_object_new_valist () from /usr/lib/libgobject-2.0.so.0
#12 0xb7a1f578 in g_object_new () from /usr/lib/libgobject-2.0.so.0

Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Thu Oct  6 09:31:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] grass-driver conflicts with gtk+?
In-Reply-To: <43450EFD.1040300@tkk.fi>
References: <43450EFD.1040300@tkk.fi>
Message-ID: <931f8ea90510060631v7a378e08l1ce07695b7b5ee7e@mail.gmail.com>

On 10/6/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Hi,
>
> If I compile and use 1.3.1 with grass (I've got 6.0.1) and then use that
> libgdal with my own code, which uses gtk+ I get a segfault when I open a
> File Open dialogbox. Without the grass driver there are no problems.
> Below is stack trace. Any ideas? Threads seem to be involved somehow. I
> removed and tried to use the stand-alone gdal-grass but don't have time
> now to look into how it is used (should it autoload somehow?)

Ari,

I am not aware of any conflict.

However, it seems quite possible that there might be some conflicting
symbols between the Gtk libraries and GRASS especially because they
both have the habit of prefixing stuff with g_ to make them "unique".

I am not sure how one would go about isolating such a problem.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rlcave3rd at yahoo.com  Thu Oct  6 09:46:26 2005
From: rlcave3rd at yahoo.com (Bob Cave)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Linking Code That Uses MITAB with the GDAL .lib file
Message-ID: <20051006134627.51377.qmail@web54108.mail.yahoo.com>

I have a project that currently uses MITAB to read
MapInfo files.  I need to add some GDAL functionality
to this program.  Given that GDAL contains MITAB, I
expected that I could replace my linker reference to
the MITAB libs with the GDAL lib and relink.  This
does not work.  I get a number of unresolved
references for the TABxxx classes in MITAB.  (All of
the OGRxxx and 
other support classes get resolved as expected.)

I have built GDAL to include all of the OGR formats. 
Is there something I need to change in the nmake.opts
file to get the TABxxx classes exported in the GDAL
lib file?

Thanks,

Bob


	
		
______________________________________________________ 
Yahoo! for Good 
Donate to the Hurricane Katrina relief effort. 
http://store.yahoo.com/redcross-donate3/ 


From frequens at gmail.com  Wed Oct  5 10:45:28 2005
From: frequens at gmail.com (frequens)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] building with the PHP
Message-ID: <2482247e0510050745v43c6f7b0v88c78bd8e793cf31@mail.gmail.com>

I have trouble building gdal 1.3.1 with the --with-php option.
It configures well, also the make is successfull, but it dies at make
install.

Am I missing something? How much of the PHP binding is implemented
currently?

BR

frequens
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/791a2051/attachment.html
From frequens at gmail.com  Wed Oct  5 12:17:06 2005
From: frequens at gmail.com (frequens)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] building gdal with ECW support
Message-ID: <2482247e0510050917s3512df7dra258a5777359bd36@mail.gmail.com>

I (think) I have successfully built the ECW (libecwj2_2005-06-11_v3-2beta)
on my Linux Suse 64 system.
It has built the static .a and shared .so files in the lib directory.

The make and make install of gdal fails however always complaining not
finding:

"In file included from ecwdataset.cpp:150:
vsiiostream.h:76:26: NCSECWClient.h: No such file or directory
vsiiostream.h:77:34: NCSECWCompressClient.h: No such file or directory
vsiiostream.h:78:23: NCSErrors.h: No such file or directory
vsiiostream.h:79:21: NCSFile.h: No such file or directory
vsiiostream.h:80:24: NCSJP2File.h: No such file or directory
vsiiostream.h:81:28: NCSJP2FileView.h: No such file or directory"

All these files are located in /usr/local/Source/include directory.

My gdal nmake.opt reads:

ECWDIR = /usr/local
ECWLIB = $(ECWDIR)/lib/libecwj2S.a
or should it be:
ECWLIB = $(ECWDIR)/lib/libecwj2.so

Any help would be greatly appreciated.

BR

frequens
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051005/3a0f7baa/attachment.html
From warmerdam at pobox.com  Thu Oct  6 10:13:21 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Linking Code That Uses MITAB with the GDAL .lib file
In-Reply-To: <20051006134627.51377.qmail@web54108.mail.yahoo.com>
References: <20051006134627.51377.qmail@web54108.mail.yahoo.com>
Message-ID: <931f8ea90510060713j15c79bcdk5e2555bed55b7efb@mail.gmail.com>

On 10/6/05, Bob Cave <rlcave3rd@yahoo.com> wrote:
> I have a project that currently uses MITAB to read
> MapInfo files.  I need to add some GDAL functionality
> to this program.  Given that GDAL contains MITAB, I
> expected that I could replace my linker reference to
> the MITAB libs with the GDAL lib and relink.  This
> does not work.  I get a number of unresolved
> references for the TABxxx classes in MITAB.  (All of
> the OGRxxx and
> other support classes get resolved as expected.)
>
> I have built GDAL to include all of the OGR formats.
> Is there something I need to change in the nmake.opts
> file to get the TABxxx classes exported in the GDAL
> lib file?

Bob,

Looking at mitab.h, it does not seem that Daniel marked the
MITAB custom classes for export from the DLL.  It might be
sufficient to change your local copy of mitab.h to declare
some (all?) of the classes for export.

For example change:
class IMapInfoFile : public OGRLayer

to:
class CPL_DLL IMapInfoFile : public OGRLayer

If this resolves the problem, then you might want to submit a
bug against MITAB suggesting that this be incorporated back
into the core.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct  6 10:19:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0
In-Reply-To: <200510051511.14285.dylan@iici.no-ip.org>
References: <200510051511.14285.dylan@iici.no-ip.org>
Message-ID: <931f8ea90510060719g5ebe64e7o9916efa8c7d8a7c3@mail.gmail.com>

On 10/5/05, Dylan Beaudette <dylan@iici.no-ip.org> wrote:
> I get the error:
> --------------
> gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared (first use
>    this function)
> gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is reported only
>    once for each function it appears in.)
> gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
> gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this function)
> gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared (first use this
>    function)
> ----------------
>
> any ideas ?

Dylan,

That is very stange.  gdal_misc.cpp 1.70 (in GDAL 1.3.0) includes
ogr_spatialref.h which includes the OGRSpatialReference declaration.
I don't see how OGRSpatialReference could be not defined in
gdal_misc.cpp.  You might want to check if there is a truncated
ogr_spatialref.h sitting around in /usr/local/include or the local
build for some reason.

You might also want to work from 1.3.1 if you are setting up a new
system.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct  6 10:23:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] building gdal with ECW support
In-Reply-To: <2482247e0510050917s3512df7dra258a5777359bd36@mail.gmail.com>
References: <2482247e0510050917s3512df7dra258a5777359bd36@mail.gmail.com>
Message-ID: <931f8ea90510060723r59e36732u4ce374953daaa724@mail.gmail.com>

On 10/5/05, frequens <frequens@gmail.com> wrote:
> I (think) I have successfully built the ECW (libecwj2_2005-06-11_v3-2beta)
> on my Linux Suse 64 system.
>  It has built the static .a and shared  .so files in the lib directory.
>
>  The make and make install of gdal fails however always complaining not
> finding:
>
>  "In file included from ecwdataset.cpp:150:
>  vsiiostream.h:76:26: NCSECWClient.h: No such file or directory
>  vsiiostream.h:77:34: NCSECWCompressClient.h: No such file or directory
>  vsiiostream.h:78:23: NCSErrors.h: No such file or directory
>  vsiiostream.h:79:21: NCSFile.h: No such file or directory
>  vsiiostream.h:80:24: NCSJP2File.h: No such file or directory
>  vsiiostream.h:81:28: NCSJP2FileView.h: No such file or directory"
>
>  All these files are located in /usr/local/Source/include directory.

Frequens,

I think the include files need to be in /usr/local/include.  I think
the issue is that some include files were not normally considered
public but are needed by GDAL.  As a workaround I would
suggest copying /usr/local/Source/include/* to /usr/local/include.
Did you unpack your ECW SDK right in /usr/local?  That seems
pretty messy.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct  6 10:25:12 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] building with the PHP
In-Reply-To: <2482247e0510050745v43c6f7b0v88c78bd8e793cf31@mail.gmail.com>
References: <2482247e0510050745v43c6f7b0v88c78bd8e793cf31@mail.gmail.com>
Message-ID: <931f8ea90510060725v6bf2f983v2f5eed4c9f85bf3@mail.gmail.com>

On 10/5/05, frequens <frequens@gmail.com> wrote:
> I have trouble building gdal 1.3.1 with the --with-php option.
>  It configures well, also the make is successfull, but it dies at make
> install.
>
>  Am I missing something? How much of the PHP binding is implemented
> currently?

Frequens,

The PHP bindings are incomplete I believe, and I doubt much work
has been done on making the install logic work properly.  I would avoid
the PHP bindings unless you are interested in digging into SWIG in
a big way and becoming the PHP champion.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dmorissette at dmsolutions.ca  Thu Oct  6 10:38:13 2005
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Linking Code That Uses MITAB with the GDAL .lib file
In-Reply-To: <931f8ea90510060713j15c79bcdk5e2555bed55b7efb@mail.gmail.com>
References: <20051006134627.51377.qmail@web54108.mail.yahoo.com>
	<931f8ea90510060713j15c79bcdk5e2555bed55b7efb@mail.gmail.com>
Message-ID: <434536D5.7080806@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> Looking at mitab.h, it does not seem that Daniel marked the
> MITAB custom classes for export from the DLL.  It might be
> sufficient to change your local copy of mitab.h to declare
> some (all?) of the classes for export.
> 

Frank,

I have no objection to this change from the MITAB point of view, but is 
it generally a good thing for libs included in GDAL/OGR to expose that 
many symbols? Is this not kind of polluting the GDAL DLL interface?

> 
> If this resolves the problem, then you might want to submit a
> bug against MITAB suggesting that this be incorporated back
> into the core.
> 

FYI, I am planning a new MITAB release in the next week or two, so if 
this works and you submit your MITAB bug report in time then I'll make 
sure this change makes it in the release.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From kruland at ku.edu  Thu Oct  6 10:45:46 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] building with the PHP
In-Reply-To: <931f8ea90510060725v6bf2f983v2f5eed4c9f85bf3@mail.gmail.com>
References: <2482247e0510050745v43c6f7b0v88c78bd8e793cf31@mail.gmail.com>
	<931f8ea90510060725v6bf2f983v2f5eed4c9f85bf3@mail.gmail.com>
Message-ID: <4345389A.1040108@ku.edu>

Frequens,

There appears to be some serious problems with the build of the ogr and
osr modules.  I was unable to repair them in time.  However, the gdal
module should be some what functional.  If you are interested in only
those, then you should go into swig/php and hack up the makefile to
build & install only the gdal module.

Here's a rough idea of what you could do:

edit swig/php/GNUMakefile change "build: ${all_libs}"  to "build:
php_gdal.so"

That should compile the php_gdal.so extension.  Then either mv this to
your system php extension directory or run php with

-d extension_dir=<path to this file>

Kevin

Frank Warmerdam wrote:

>On 10/5/05, frequens <frequens@gmail.com> wrote:
>  
>
>>I have trouble building gdal 1.3.1 with the --with-php option.
>> It configures well, also the make is successfull, but it dies at make
>>install.
>>
>> Am I missing something? How much of the PHP binding is implemented
>>currently?
>>    
>>
>
>Frequens,
>
>The PHP bindings are incomplete I believe, and I doubt much work
>has been done on making the install logic work properly.  I would avoid
>the PHP bindings unless you are interested in digging into SWIG in
>a big way and becoming the PHP champion.
>
>Best regards,
>
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>  
>

From warmerdam at pobox.com  Thu Oct  6 10:53:40 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Linking Code That Uses MITAB with the GDAL .lib file
In-Reply-To: <434536D5.7080806@dmsolutions.ca>
References: <20051006134627.51377.qmail@web54108.mail.yahoo.com>
	<931f8ea90510060713j15c79bcdk5e2555bed55b7efb@mail.gmail.com>
	<434536D5.7080806@dmsolutions.ca>
Message-ID: <931f8ea90510060753p3f492691g7a40669022efd0d0@mail.gmail.com>

On 10/6/05, Daniel Morissette <dmorissette@dmsolutions.ca> wrote:
> Frank,
>
> I have no objection to this change from the MITAB point of view, but is
> it generally a good thing for libs included in GDAL/OGR to expose that
> many symbols? Is this not kind of polluting the GDAL DLL interface?

Daniel,

I can't say I am all that keen on exporting so many internal
symbols.  I'm not worried about name space collision, but I am
worried there is some sort of overhead involved in such large
exported interfaces.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sp_ml at sourcepole.com  Thu Oct  6 11:54:55 2005
From: sp_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] exportToGEOS performance
Message-ID: <200510061754.56087.sp_ml@sourcepole.com>

Hi,

I'm using the GEOS polygonizer for the OGR Interlis driver. But the 
polygonization is quite slow because of the exportToGEOS call. The code looks 
like this:

    geos::Geometry *poThisGeosGeom = poLines->exportToGEOS(); //slow
    geos::Polygonizer* polygonizer = new geos::Polygonizer();
    polygonizer->add(poThisGeosGeom);
    vector<geos::Polygon*> *poOtherGeosGeom = polygonizer->getPolygons();

We're talking about exporting 1677 OGRLineString's in about 1'20'' and 
polygonizing them within a few second.

Is there a faster way for doing this?

Regards,
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From matt.wilkie at gov.yk.ca  Thu Oct  6 12:05:01 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] two subjects - Katrina Good News and Request for VRT
	API	VB6 binding
In-Reply-To: <20051006011735.51274.qmail@web33514.mail.mud.yahoo.com>
References: <20051006011735.51274.qmail@web33514.mail.mud.yahoo.com>
Message-ID: <43454B2D.7000306@gov.yk.ca>

Hi Gerald, thanks for sharing the Katrina-gdal success story. It is all 
to easy to get confined to the technical details and lose sight of the 
  real world applications which happen outside our own small domains. :)

-matt


From warmerdam at pobox.com  Thu Oct  6 12:17:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] exportToGEOS performance
In-Reply-To: <200510061754.56087.sp_ml@sourcepole.com>
References: <200510061754.56087.sp_ml@sourcepole.com>
Message-ID: <931f8ea90510060917g7e6b5503wf793da97c8acce3b@mail.gmail.com>

On 10/6/05, Pirmin Kalberer <sp_ml@sourcepole.com> wrote:
> Hi,
>
> I'm using the GEOS polygonizer for the OGR Interlis driver. But the
> polygonization is quite slow because of the exportToGEOS call. The code looks
> like this:
>
>     geos::Geometry *poThisGeosGeom = poLines->exportToGEOS(); //slow
>     geos::Polygonizer* polygonizer = new geos::Polygonizer();
>     polygonizer->add(poThisGeosGeom);
>     vector<geos::Polygon*> *poOtherGeosGeom = polygonizer->getPolygons();
>
> We're talking about exporting 1677 OGRLineString's in about 1'20'' and
> polygonizing them within a few second.

Pirmin,

I was planning to rewrite exportToGEOS() to translate using WKB
format instead of WKT which I suspect will be significantly faster.
This will be part of an upgrade to use the GEOS C API in time for
the next release.  In the meantime, you might want to try modifying
your local copy to go via WKB instead of WKT.  I think when I
first looked at GEOS only the WKT conversion was supported.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dylan at iici.no-ip.org  Thu Oct  6 12:52:06 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0
In-Reply-To: <931f8ea90510060719g5ebe64e7o9916efa8c7d8a7c3@mail.gmail.com>
References: <200510051511.14285.dylan@iici.no-ip.org>
	<931f8ea90510060719g5ebe64e7o9916efa8c7d8a7c3@mail.gmail.com>
Message-ID: <200510060952.07345.dylan@iici.no-ip.org>

On Thursday 06 October 2005 07:19 am, Frank Warmerdam wrote:
> On 10/5/05, Dylan Beaudette <dylan@iici.no-ip.org> wrote:
> > I get the error:
> > --------------
> > gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared (first
> > use this function)
> > gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is reported
> > only once for each function it appears in.)
> > gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
> > gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this
> > function) gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared (first
> > use this function)
> > ----------------
> >
> > any ideas ?
>
> Dylan,
>
> That is very stange.  gdal_misc.cpp 1.70 (in GDAL 1.3.0) includes
> ogr_spatialref.h which includes the OGRSpatialReference declaration.
> I don't see how OGRSpatialReference could be not defined in
> gdal_misc.cpp.  You might want to check if there is a truncated
> ogr_spatialref.h sitting around in /usr/local/include or the local
> build for some reason.
>
> You might also want to work from 1.3.1 if you are setting up a new
> system.
>
> Best regards,
> --

Thanks for the quick reply Frank. 

Just to verify that ogr_spatialref.h was defined in gdal_misc.cpp, i tried:

dylan@test:~/src/gdal-1.3.1$ grep 
ogr_spatialref.h /home/dylan/src/gdal-1.3.1/gcore/gdal_misc.cpp
#include "ogr_spatialref.h"

...looks fine there...

However, GDAL 1.3.1 dies with the same error during make. I have tried to 
compile with a slightly different .configure step:

./configure --with-png=internal --with-jpeg=internal \
--with-gif=internal --with-libtiff=internal \
--with-geotiff=internal --with-libz=internal\
--without-pg --without-ogdi

... but i still get the same error.

of note the compiler is gcc-3.3.6

any ideas?

thanks!!

Dylan




-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From warmerdam at pobox.com  Thu Oct  6 13:17:42 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: Compiling GDAL SWIG wrappers
In-Reply-To: <43455AF3.1060302@noaa.gov>
References: <43455AF3.1060302@noaa.gov>
Message-ID: <931f8ea90510061017i525d1d81i497420be18533fff@mail.gmail.com>

On 10/6/05, Matt Foster <Matthew.Foster@noaa.gov> wrote:
> Frank,
>
> I'm trying to compile GDAL with --with-perl, so I can get the Perl
> bindings (mainly to OGR), and the compile is failing.  It's complaining
> that SWIG_NewPointerObj is undeclared in gdal_wrapper.cpp.  I'm assuming
> that means something's amiss in my SWIG install, but I'm not sure what.
> The baseline system (RHEL 3) has SWIG 1.1, but I also have SWIG 1.3.19
> available in /usr/local.
>
> Any clue what might be fouled up?

Matt,

I believe that the swig bindings for GDAL/OGR require at least
SWIG 1.3.25 if you are rebuilding the wrappers.  However, my
understanding was that the GDAL 1.3.1 release included pre-built
wrappers in which case this should not be a problem.

I not really sure what the solution to your problem is, so I am
ccing this to the list so Kevin, Ari or others can comment.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct  6 13:26:58 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] two subjects - Katrina Good News and Request for VRT
	API VB6 binding
In-Reply-To: <20051006011735.51274.qmail@web33514.mail.mud.yahoo.com>
References: <20051006011735.51274.qmail@web33514.mail.mud.yahoo.com>
Message-ID: <931f8ea90510061026g162b7cefrc87b276ab6bc463d@mail.gmail.com>

On 10/5/05, Gerald Buckmaster <buckmasterjunior@yahoo.com> wrote:
> Ladies and gentlemen, it is my firm belief lives were saved as a result of
> the hard work dedicated to the open-source GDAL project.   Frank, you and
> and the entire GDAL Development Team deserve a LOUD round of applause!

Gerald,

It means a great deal to me to hear that GDAL has proven useful for
fast deployment of hurricane recovery efforts.  Clearly the the script
writer(s) (you?), data providers, and rescue teams deserve the vast
majority of the thanks but I am thrilled to see our stuff put to such good
use.

One of reasons I like to work "open source" is that for me the biggest
thrill is knowing my work is getting put to good use.  To a large
extent that is more important to me than financial reward - within
the constraints of making a living.

> Now for the second subject:  I need to create a version of the VB6 utility
> mentioned above that can be triggered by filecreate messaging - basically
> monitoring a directory for the create completion of a bitmap.  With the VB6
> binding now available, courtesy of Frank, this is also an opportunity to
> drop the gdal_translate functionality directly and cleanly into the
> utility...if VRT API VB binding is available, a missing link Frank pointed
> out in March.  If anyone (with more skills than I) could take this on,  I
> would be most grateful, as I'm sure other folks would be as well.

One thing to keep in mind is that VRT capabilities can all be taken advantage
of by just constructing the VRT XML, without having to expose the C++
entry points to the various VRT classes.   So my suggestion is that instead
of adding a bunch of entry points into the VRT classes from VB6, that
you (or we) just prepare the corresponding VRT XML and then pass that
to the GDAL.Open() method.  The VRT tutorial at:

  http://www.gdal.org/gdal_vrttut.html

should give some useful details.  I am also happy to help out as needed.

> I know VB6 really isn't the development tool of choice anymore,  but in my
> industry, it can be difficult receiving certification and accreditation to
> operate apps developed in .NET.  There still is a niche for VB6 development,
> and I believe fleshing out GDAL associated APIs with VB6 bindings can lead
> to some great apps.  I personally am not skilled enough to writing bindings,
> but I can sure use them in RAD prototypes.

I kind of wish I had prepared VB6 bindings several years sooner.

> PS - Frank, do you think there is enough interest to start a gdal-vb-dev
> mailing list?

I don't personally think there are that many VB6 users of GDAL (perhaps 3-5?)
but if you wanted to setup a mailing list at yahoogroups or somewhere similar,
I would be happy to add a reference to it on the VB6 tutorial page and we
could advertise it here on gdal-dev.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Thu Oct  6 14:06:36 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Re: Compiling GDAL SWIG wrappers
In-Reply-To: <931f8ea90510061017i525d1d81i497420be18533fff@mail.gmail.com>
References: <43455AF3.1060302@noaa.gov>
	<931f8ea90510061017i525d1d81i497420be18533fff@mail.gmail.com>
Message-ID: <434567AC.1040002@tkk.fi>

Frank Warmerdam kirjoitti:

>On 10/6/05, Matt Foster <Matthew.Foster@noaa.gov> wrote:
>  
>
>>Frank,
>>
>>I'm trying to compile GDAL with --with-perl, so I can get the Perl
>>bindings (mainly to OGR), and the compile is failing.  It's complaining
>>that SWIG_NewPointerObj is undeclared in gdal_wrapper.cpp.  I'm assuming
>>that means something's amiss in my SWIG install, but I'm not sure what.
>>The baseline system (RHEL 3) has SWIG 1.1, but I also have SWIG 1.3.19
>>available in /usr/local.
>>
>>Any clue what might be fouled up?
>>    
>>
>
>Matt,
>
>I believe that the swig bindings for GDAL/OGR require at least
>SWIG 1.3.25 if you are rebuilding the wrappers.  However, my
>understanding was that the GDAL 1.3.1 release included pre-built
>wrappers in which case this should not be a problem.
>
>I not really sure what the solution to your problem is, so I am
>ccing this to the list so Kevin, Ari or others can comment.
>  
>

AFAIK this is correct. I have swig 1.3.25 which I installed myself 
because the version in fedora 3 or 4 was not new enough. This version 
complains only about DISOWN, which is not very fatal. The latest gdal 
tarball has wrappers and swig shouldn't be needed. SWIG_NewPointerObj is 
a C macro, which expands to  SWIG_Perl_NewPointerObj which is a function 
defined in the wrapper itself. Is your gdal_wrapper.cpp ok?

Ari

>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dylan at iici.no-ip.org  Thu Oct  6 14:08:08 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0 [solved]
In-Reply-To: <200510060952.07345.dylan@iici.no-ip.org>
References: <200510051511.14285.dylan@iici.no-ip.org>
	<931f8ea90510060719g5ebe64e7o9916efa8c7d8a7c3@mail.gmail.com>
	<200510060952.07345.dylan@iici.no-ip.org>
Message-ID: <200510061108.08674.dylan@iici.no-ip.org>

On Thursday 06 October 2005 09:52 am, Dylan Beaudette wrote:
> On Thursday 06 October 2005 07:19 am, Frank Warmerdam wrote:
> > On 10/5/05, Dylan Beaudette <dylan@iici.no-ip.org> wrote:
> > > I get the error:
> > > --------------
> > > gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared
> > > (first use this function)
> > > gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is
> > > reported only once for each function it appears in.)
> > > gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
> > > gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this
> > > function) gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared
> > > (first use this function)
> > > ----------------
> > >
> > > any ideas ?
> >
> > Dylan,
> >
> > That is very stange.  gdal_misc.cpp 1.70 (in GDAL 1.3.0) includes
> > ogr_spatialref.h which includes the OGRSpatialReference declaration.
> > I don't see how OGRSpatialReference could be not defined in
> > gdal_misc.cpp.  You might want to check if there is a truncated
> > ogr_spatialref.h sitting around in /usr/local/include or the local
> > build for some reason.
> >
> > You might also want to work from 1.3.1 if you are setting up a new
> > system.
> >
> > Best regards,
> > --
>
> Thanks for the quick reply Frank.
>
> Just to verify that ogr_spatialref.h was defined in gdal_misc.cpp, i tried:
>
> dylan@test:~/src/gdal-1.3.1$ grep
> ogr_spatialref.h /home/dylan/src/gdal-1.3.1/gcore/gdal_misc.cpp
> #include "ogr_spatialref.h"
>
> ...looks fine there...
>
> However, GDAL 1.3.1 dies with the same error during make. I have tried to
> compile with a slightly different .configure step:
>
> ./configure --with-png=internal --with-jpeg=internal \
> --with-gif=internal --with-libtiff=internal \
> --with-geotiff=internal --with-libz=internal\
> --without-pg --without-ogdi
>
> ... but i still get the same error.
>
> of note the compiler is gcc-3.3.6
>
> any ideas?
>
> thanks!!
>
> Dylan

Black eye for me... Looks like i had this in my configure args:

--with-libz=internal--without-pg
                           ^^^^

missing a space!!

thanks Frank for replying to my previous email

Cheers,



-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From dylan at iici.no-ip.org  Thu Oct  6 14:41:32 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0 [not-solved]
In-Reply-To: <931f8ea90510061113o46c2fa66v249a4b33aea5941f@mail.gmail.com>
References: <200510051511.14285.dylan@iici.no-ip.org>
	<200510061108.08674.dylan@iici.no-ip.org>
	<931f8ea90510061113o46c2fa66v249a4b33aea5941f@mail.gmail.com>
Message-ID: <200510061141.32654.dylan@iici.no-ip.org>

On Thursday 06 October 2005 11:13 am, Frank Warmerdam wrote:
> On 10/6/05, Dylan Beaudette <dylan@iici.no-ip.org> wrote:
> > Black eye for me... Looks like i had this in my configure args:
> >
> > --with-libz=internal--without-pg
> >                            ^^^^
> >
> > missing a space!!
> >
> > thanks Frank for replying to my previous email
>
> Dylan,
>
> Easy mistake to make.  The resulting error is very odd for that
> sort of config error though.
>
> Best regards,

hmmm... looks like the mistake was responsible for another error... now i am 
back to the original error that I posted. 


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From pgao at esri.com  Thu Oct  6 14:53:38 2005
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Using "in memory" VSI handler
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20160E186@firewire.esri.com>

I have a byte array that represents a PNG image. How do I tell GDAL to
open a dataset
from it? I can't seem to find any sample code.

Thanks,
Gao, Peng


From rlcave3rd at yahoo.com  Thu Oct  6 15:17:16 2005
From: rlcave3rd at yahoo.com (Bob Cave)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Linking Code That Uses MITAB with the GDAL .lib file
In-Reply-To: <931f8ea90510060713j15c79bcdk5e2555bed55b7efb@mail.gmail.com>
Message-ID: <20051006191716.57936.qmail@web54111.mail.yahoo.com>



--- Frank Warmerdam <warmerdam@pobox.com> wrote:

> Looking at mitab.h, it does not seem that Daniel
> marked the
> MITAB custom classes for export from the DLL.  It
> might be
> sufficient to change your local copy of mitab.h to
> declare
> some (all?) of the classes for export.
> 
> For example change:
> class IMapInfoFile : public OGRLayer
> 
> to:
> class CPL_DLL IMapInfoFile : public OGRLayer
> 
> If this resolves the problem, then you might want to
> submit a
> bug against MITAB suggesting that this be
> incorporated back
> into the core.
> 

Thanks for the quick reply.  That did solve the
problem.  I think that our final solution will be to
switch to using OGR instead of the MITAB-specific
classes, so I won't need the additional exports.

Cheers,

Bob


		
__________________________________ 
Yahoo! Mail - PC Magazine Editors' Choice 2005 
http://mail.yahoo.com

From Matthew.Foster at noaa.gov  Thu Oct  6 16:24:50 2005
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Newbie with OGR Perl bindings
Message-ID: <43458812.8050008@noaa.gov>

Would anyone have a sample code snippet they'd be willing to share, 
showing how to create a simple point shapefile with the OGR Perl binding?

Thanks!

Matt

-- 
"Those who would sacrifice essential liberties for a little
temporary safety deserve neither liberty nor safety."
-- Benjamin Franklin



From ari.jolma at tkk.fi  Thu Oct  6 16:52:35 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Newbie with OGR Perl bindings
In-Reply-To: <43458812.8050008@noaa.gov>
References: <43458812.8050008@noaa.gov>
Message-ID: <43458E93.3090607@tkk.fi>

Matt Foster kirjoitti:

> Would anyone have a sample code snippet they'd be willing to share, 
> showing how to create a simple point shapefile with the OGR Perl binding?


look at  the test.pl in swig/perl, it creates and opens raster and 
vector data files

Ari

>
> Thanks!
>
> Matt
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From pi_ml at sourcepole.com  Thu Oct  6 11:46:13 2005
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] exportToGEOS performance
Message-ID: <200510061746.14095.pi_ml@sourcepole.com>

Hi,

I'm using the GEOS polygonizer for the OGR Interlis driver. But the 
polygonization is quite slow because of the exportToGEOS call. The code looks 
like this:

    geos::Geometry *poThisGeosGeom = poLines->exportToGEOS(); //slow
    geos::Polygonizer* polygonizer = new geos::Polygonizer();
    polygonizer->add(poThisGeosGeom);
    vector<geos::Polygon*> *poOtherGeosGeom = polygonizer->getPolygons();

We're talking about exporting 1677 OGRLineString's in about 1'20'' and 
polygonizing them within a few second.

Is there a faster way for doing this?

Regards,
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From ealpert at digitalglobe.com  Thu Oct  6 18:40:09 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Newbie with OGR Perl bindings
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAC@COMAIL01.digitalglobe.com>

Matt,

I've just spent the past two days using the perl bindings. Feel free to
contact me directly with any specific questions.

I can probably send you some sample code.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Foster
Sent: Thursday, October 06, 2005 2:25 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Newbie with OGR Perl bindings


Would anyone have a sample code snippet they'd be willing to share, 
showing how to create a simple point shapefile with the OGR Perl
binding?

Thanks!

Matt

-- 
"Those who would sacrifice essential liberties for a little temporary
safety deserve neither liberty nor safety."
-- Benjamin Franklin


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Oct  6 20:33:10 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Using "in memory" VSI handler
In-Reply-To: <54808B311D66EB4E9CF4647B0DE707C20160E186@firewire.esri.com>
References: <54808B311D66EB4E9CF4647B0DE707C20160E186@firewire.esri.com>
Message-ID: <931f8ea90510061733w725ed277sdc614cd4ec7655d1@mail.gmail.com>

On 10/6/05, Peng Gao <pgao@esri.com> wrote:
> I have a byte array that represents a PNG image. How do I tell GDAL to
> open a dataset
> from it? I can't seem to find any sample code.

Gao,

I have prepared some documentation on this at:

  http://www.gdal.org/cpl__vsi_8h.html#a47

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ben at vterrain.org  Thu Oct  6 22:37:45 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] OGR's importFromEPSG depends on libgeotiff?
Message-ID: <008f01c5cae8$1a12cbb0$9b02a8c0@DellWork>

Hi folks,

One small observation and a question..

The documentation for OGRSpatialReference::importFromEPSG says:
	"This code uses the GeoTIFF cpl_csv services to access the EPSG CSV
data. If frmts/gtiff/libgeotiff isn't linked in, linking will fail."

This sounds like it might be out of date; isn't the cpl_csv quite a core
component of GDAL/OGR nowadays...

The question is, what method provides the inverse of importFromEPSG().  That
is, given a common CRS in an OGRSpatialReference, can it return an EPSG
coordinate system code, which when later passed to importFromEPSG(),
re-constructs that same CRS?

Thanks,
Ben


From warmerdam at pobox.com  Thu Oct  6 23:08:05 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] OGR's importFromEPSG depends on libgeotiff?
In-Reply-To: <008f01c5cae8$1a12cbb0$9b02a8c0@DellWork>
References: <008f01c5cae8$1a12cbb0$9b02a8c0@DellWork>
Message-ID: <931f8ea90510062008r7cd1986bja72e0fc358e16144@mail.gmail.com>

On 10/6/05, Ben Discoe <ben@vterrain.org> wrote:
> Hi folks,
>
> One small observation and a question..
>
> The documentation for OGRSpatialReference::importFromEPSG says:
>         "This code uses the GeoTIFF cpl_csv services to access the EPSG CSV
> data. If frmts/gtiff/libgeotiff isn't linked in, linking will fail."
>
> This sounds like it might be out of date; isn't the cpl_csv quite a core
> component of GDAL/OGR nowadays...

Ben,

The comment is a bit inaccurate.  The importFromEPSG() method actually
depends on the functions in libgeotiff that are built on top of the cpl_csv
services.

> The question is, what method provides the inverse of importFromEPSG().  That
> is, given a common CRS in an OGRSpatialReference, can it return an EPSG
> coordinate system code, which when later passed to importFromEPSG(),
> re-constructs that same CRS?

Unfortunately this direction does not exist currently as a method
on the OGRSpatialReference.  In libgeotiff there is a function
GTIFMapSysToPCS() that does that a bit for some simple cases.

 #define MapSys_UTM_North	-9001
#define MapSys_UTM_South	-9002
#define MapSys_State_Plane_27	-9003
#define MapSys_State_Plane_83	-9004

int CPL_DLL   GTIFMapSysToPCS( int MapSys, int Datum, int nZone );

But it only works for a few common hardcoded cases (ie. UTM WGS84).
It has been an ambition of mine to some day build such a thing.

Note that some WKT coordinate system definitions include the PCS
(EPSG) code which can be extracted with the authority related
methods.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From baba.yoshihiko at gmail.com  Fri Oct  7 01:05:31 2005
From: baba.yoshihiko at gmail.com (BABA Yoshihiko)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0 [not-solved]
In-Reply-To: <200510061141.32654.dylan@iici.no-ip.org>
References: <200510051511.14285.dylan@iici.no-ip.org>
	<200510061108.08674.dylan@iici.no-ip.org>
	<931f8ea90510061113o46c2fa66v249a4b33aea5941f@mail.gmail.com>
	<200510061141.32654.dylan@iici.no-ip.org>
Message-ID: <ba6f52040510062205j762e4543r@mail.gmail.com>

Hi Dylan

2005/10/7, Dylan Beaudette <dylan@iici.no-ip.org>:

...
> I get the error:
> --------------
> gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared (first use
>    this function)
> gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is reported only
>    once for each function it appears in.)
> gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
> gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this function)
> gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared (first use this
>    function)
> ----------------

Just a quick guess.

Your first post would happen if the header file of older version or of
another app were in your include directory. I got similar errors when
updated from 1.2.6 to 1.3.0. Could this be the cause?

--
BABA Yoshihiko
GDAL maintainer for Fink/MacOSX


From ari.jolma at tkk.fi  Fri Oct  7 02:00:17 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Newbie with OGR Perl bindings
In-Reply-To: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAC@COMAIL01.digitalglobe.com>
References: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAC@COMAIL01.digitalglobe.com>
Message-ID: <43460EF1.7080402@tkk.fi>

Ethan Alpert kirjoitti:

>Matt,
>
>I've just spent the past two days using the perl bindings. Feel free to
>contact me directly with any specific questions.
>
>I can probably send you some sample code.
>  
>

Let me advocate the new, so far rather quiet, geo-perl email list: 
https://list.hut.fi/mailman/listinfo/geo-perl

Thanks,

Ari

>-e
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Foster
>Sent: Thursday, October 06, 2005 2:25 PM
>To: gdal-dev@lists.maptools.org
>Subject: [Gdal-dev] Newbie with OGR Perl bindings
>
>
>Would anyone have a sample code snippet they'd be willing to share, 
>showing how to create a simple point shapefile with the OGR Perl
>binding?
>
>Thanks!
>
>Matt
>
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ben at vterrain.org  Fri Oct  7 03:21:50 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] OGR's importFromEPSG depends on libgeotiff?
In-Reply-To: <931f8ea90510062008r7cd1986bja72e0fc358e16144@mail.gmail.com>
Message-ID: <009701c5cb0f$c9310c70$9b02a8c0@DellWork>

> From: Frank Warmerdam
> Sent: Thursday, October 06, 2005 5:08 PM
> 
> > what method provides the inverse of importFromEPSG().  
> > That is, given a common CRS in an OGRSpatialReference, can 
> > it return an EPSG coordinate system code
> 
> Unfortunately this direction does not exist currently as a 
> method on the OGRSpatialReference.

Interesting, that is surprising.  I don't know the internals of GeoTIFF, but
i always assumed it used an EPSG code to store projection, so the GeoTIFF
code would need to have such a function somewhere.  I tried to study the
code to learn how it is done, but the GeoTIFF code is quite complex.

> In libgeotiff there is a function
> GTIFMapSysToPCS() that does that a bit for some simple cases.
> But it only works for a few common hardcoded cases (ie. UTM WGS84).

Indeed simple, and it doesn't work on a OGRSpatialReference. I found it in
geo_extra.c, and it doesn't appear to be called.

> It has been an ambition of mine to some day build such a thing.

I would be very curious to know what GeoTIFF _does_ store for CRS, if it's
not as simple as a single integer EPSG code.

Thanks,
Ben


From Matthew.Foster at noaa.gov  Fri Oct  7 09:46:22 2005
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] Newbie with OGR Perl bindings
In-Reply-To: <43458E93.3090607@tkk.fi>
References: <43458812.8050008@noaa.gov> <43458E93.3090607@tkk.fi>
Message-ID: <43467C2E.9000102@noaa.gov>



Ari Jolma wrote:

> Matt Foster kirjoitti:
>
>> Would anyone have a sample code snippet they'd be willing to share, 
>> showing how to create a simple point shapefile with the OGR Perl 
>> binding?
>
>
>
> look at  the test.pl in swig/perl, it creates and opens raster and 
> vector data files
>
> Ari
>

Ari,

Something is wrong with my installation here.  When I tried to run 
test.pl it said that it could find a loadable module for gdalconst, 
despite the fact that gdalconst.pm is in my @INC list.  I think in my 
effort yesterday to get around the compilation failure of gdal_wrap.cpp, 
I fouled up the installation.  I think I need to step back, and start fresh.

I worked on the assumption yesterday that to get the Perl bindings built 
and installed that I would do these steps from the gdal base directory 
(I also use netCDF)...

./configure --with-netcdf=<path to netcdf> --with-perl
make
make install

Is that incorrect?  If those are indeed the right steps, then I need to 
figure out why gdal_wrap.cpp fails to build.

Matt

-- 
"Those who would sacrifice essential liberties for a little
temporary safety deserve neither liberty nor safety."
-- Benjamin Franklin



From kruland at ku.edu  Fri Oct  7 10:11:53 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:47 2007
Subject: Fix for building perl bindings was Re: [Gdal-dev] Newbie with OGR
	Perl bindings
In-Reply-To: <43467C2E.9000102@noaa.gov>
References: <43458812.8050008@noaa.gov> <43458E93.3090607@tkk.fi>
	<43467C2E.9000102@noaa.gov>
Message-ID: <43468229.8080707@ku.edu>



Matt,

There appears to be some problems with 'make install' in the perl
bindings - there are some work-arounds for it and if you use --prefix
things get a little harder.

If you decide to install gdal in either /usr/local or /usr/ (this is the
case when you don't use --prefix in ./configure),
the best option is to not use the --with-perl option, but instead do this:

./configure --normal-configure-options  (omit the --with-perl option)
make
make install
cd swig/perl
make
make install

This should install the perl module correctly.

If you desire to install gdal in a non-default location you will need to
hack the swig/perl/Makefile.PL script to get the build to function
correctly.

./configure --prefix=myprefix --normal-configure-options (omit the
--with-perl option)
make
make install
cd swig/perl
-- edit the Makefile.PL and change all the lines with LIB => "-lgdal" to
LIB => '-Lmyprefix/lib -lgdal'
make
make install

We are currently working on a platform independent way to make this more
automatic.  It should make it into cvs shorly, and in the 1.3.2
release.  Until then we'll have to struggle a little more.

Best of luck.

Kevin




Matt Foster wrote:

>
>
> Ari Jolma wrote:
>
>> Matt Foster kirjoitti:
>>
>>> Would anyone have a sample code snippet they'd be willing to share,
>>> showing how to create a simple point shapefile with the OGR Perl
>>> binding?
>>
>>
>>
>>
>> look at  the test.pl in swig/perl, it creates and opens raster and
>> vector data files
>>
>> Ari
>>
>
> Ari,
>
> Something is wrong with my installation here.  When I tried to run
> test.pl it said that it could find a loadable module for gdalconst,
> despite the fact that gdalconst.pm is in my @INC list.  I think in my
> effort yesterday to get around the compilation failure of
> gdal_wrap.cpp, I fouled up the installation.  I think I need to step
> back, and start fresh.
>
> I worked on the assumption yesterday that to get the Perl bindings
> built and installed that I would do these steps from the gdal base
> directory (I also use netCDF)...
>
> ./configure --with-netcdf=<path to netcdf> --with-perl
> make
> make install
>
> Is that incorrect?  If those are indeed the right steps, then I need
> to figure out why gdal_wrap.cpp fails to build.
>
> Matt
>

From warmerdam at pobox.com  Fri Oct  7 10:22:47 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] OGR's importFromEPSG depends on libgeotiff?
In-Reply-To: <009701c5cb0f$c9310c70$9b02a8c0@DellWork>
References: <931f8ea90510062008r7cd1986bja72e0fc358e16144@mail.gmail.com>
	<009701c5cb0f$c9310c70$9b02a8c0@DellWork>
Message-ID: <931f8ea90510070722s513a18b6l33fb8ee051baccd5@mail.gmail.com>

On 10/7/05, Ben Discoe <ben@vterrain.org> wrote:
> I would be very curious to know what GeoTIFF _does_ store for CRS, if it's
> not as simple as a single integer EPSG code.

Ben,

GeoTIFF's can store simple EPSG PCS/GCS numbers or complete
parameterized coordinate system definitions.

When GDAL writes geotiffs it first looks for an EPSG authority code on
the PROJCS node and if it finds it that is set as the PCS.  However,
if that isn't found then a full projection definition is written with all
the parameters.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Matthew.Foster at noaa.gov  Fri Oct  7 10:49:38 2005
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Nov 21 11:49:47 2007
Subject: Fix for building perl bindings was Re: [Gdal-dev] Newbie with OGR
	Perl bindings
In-Reply-To: <43468229.8080707@ku.edu>
References: <43458812.8050008@noaa.gov> <43458E93.3090607@tkk.fi>
	<43467C2E.9000102@noaa.gov> <43468229.8080707@ku.edu>
Message-ID: <43468B02.3000306@noaa.gov>

Kevin,

OK, I started fresh with a 'make clean', and then did these steps...

./configure --with-netcdf=<path to netcdf>
make
make install

This went fine, and everything is installed under /usr/local.  Then 
things go bad...

cd swig/perl
make

make fails trying to compile gdal_wrap.cpp with SWIG_NewPointerObj being 
undeclared.  I tried adding the -L/usr/local/lib to the Makefile.PL, as 
you suggested (even though /usr/local is default), and even added 
/usr/local/lib to LD_LIBRARY_PATH, and it fails in the same place with 
the same error.

Matt

Kevin Ruland wrote:

>Matt,
>
>There appears to be some problems with 'make install' in the perl
>bindings - there are some work-arounds for it and if you use --prefix
>things get a little harder.
>
>If you decide to install gdal in either /usr/local or /usr/ (this is the
>case when you don't use --prefix in ./configure),
>the best option is to not use the --with-perl option, but instead do this:
>
>./configure --normal-configure-options  (omit the --with-perl option)
>make
>make install
>cd swig/perl
>make
>make install
>
>This should install the perl module correctly.
>
>If you desire to install gdal in a non-default location you will need to
>hack the swig/perl/Makefile.PL script to get the build to function
>correctly.
>
>./configure --prefix=myprefix --normal-configure-options (omit the
>--with-perl option)
>make
>make install
>cd swig/perl
>-- edit the Makefile.PL and change all the lines with LIB => "-lgdal" to
>LIB => '-Lmyprefix/lib -lgdal'
>make
>make install
>
>We are currently working on a platform independent way to make this more
>automatic.  It should make it into cvs shorly, and in the 1.3.2
>release.  Until then we'll have to struggle a little more.
>
>Best of luck.
>
>Kevin
>
>
>
>
>Matt Foster wrote:
>
>  
>
>>Ari Jolma wrote:
>>
>>    
>>
>>>Matt Foster kirjoitti:
>>>
>>>      
>>>
>>>>Would anyone have a sample code snippet they'd be willing to share,
>>>>showing how to create a simple point shapefile with the OGR Perl
>>>>binding?
>>>>        
>>>>
>>>
>>>
>>>look at  the test.pl in swig/perl, it creates and opens raster and
>>>vector data files
>>>
>>>Ari
>>>
>>>      
>>>
>>Ari,
>>
>>Something is wrong with my installation here.  When I tried to run
>>test.pl it said that it could find a loadable module for gdalconst,
>>despite the fact that gdalconst.pm is in my @INC list.  I think in my
>>effort yesterday to get around the compilation failure of
>>gdal_wrap.cpp, I fouled up the installation.  I think I need to step
>>back, and start fresh.
>>
>>I worked on the assumption yesterday that to get the Perl bindings
>>built and installed that I would do these steps from the gdal base
>>directory (I also use netCDF)...
>>
>>./configure --with-netcdf=<path to netcdf> --with-perl
>>make
>>make install
>>
>>Is that incorrect?  If those are indeed the right steps, then I need
>>to figure out why gdal_wrap.cpp fails to build.
>>
>>Matt
>>
>>    
>>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>  
>

-- 
"Those who would sacrifice essential liberties for a little
temporary safety deserve neither liberty nor safety."
-- Benjamin Franklin



From ealpert at digitalglobe.com  Fri Oct  7 11:12:23 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:47 2007
Subject: Fix for building perl bindings was Re: [Gdal-dev] Newbie with
	OGRPerl bindings
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAD@COMAIL01.digitalglobe.com>

What's the error? Was it in a previous post?

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Foster
Sent: Friday, October 07, 2005 8:50 AM
To: Kevin Ruland
Cc: gdal-dev@lists.maptools.org
Subject: Re: Fix for building perl bindings was Re: [Gdal-dev] Newbie
with OGRPerl bindings


Kevin,

OK, I started fresh with a 'make clean', and then did these steps...

./configure --with-netcdf=<path to netcdf>
make
make install

This went fine, and everything is installed under /usr/local.  Then 
things go bad...

cd swig/perl
make

make fails trying to compile gdal_wrap.cpp with SWIG_NewPointerObj being

undeclared.  I tried adding the -L/usr/local/lib to the Makefile.PL, as 
you suggested (even though /usr/local is default), and even added 
/usr/local/lib to LD_LIBRARY_PATH, and it fails in the same place with 
the same error.

Matt

Kevin Ruland wrote:

>Matt,
>
>There appears to be some problems with 'make install' in the perl 
>bindings - there are some work-arounds for it and if you use --prefix 
>things get a little harder.
>
>If you decide to install gdal in either /usr/local or /usr/ (this is 
>the case when you don't use --prefix in ./configure), the best option 
>is to not use the --with-perl option, but instead do this:
>
>./configure --normal-configure-options  (omit the --with-perl option) 
>make make install
>cd swig/perl
>make
>make install
>
>This should install the perl module correctly.
>
>If you desire to install gdal in a non-default location you will need 
>to hack the swig/perl/Makefile.PL script to get the build to function 
>correctly.
>
>./configure --prefix=myprefix --normal-configure-options (omit the 
>--with-perl option) make
>make install
>cd swig/perl
>-- edit the Makefile.PL and change all the lines with LIB => "-lgdal"
to
>LIB => '-Lmyprefix/lib -lgdal'
>make
>make install
>
>We are currently working on a platform independent way to make this 
>more automatic.  It should make it into cvs shorly, and in the 1.3.2 
>release.  Until then we'll have to struggle a little more.
>
>Best of luck.
>
>Kevin
>
>
>
>
>Matt Foster wrote:
>
>  
>
>>Ari Jolma wrote:
>>
>>    
>>
>>>Matt Foster kirjoitti:
>>>
>>>      
>>>
>>>>Would anyone have a sample code snippet they'd be willing to share, 
>>>>showing how to create a simple point shapefile with the OGR Perl 
>>>>binding?
>>>>        
>>>>
>>>
>>>
>>>look at  the test.pl in swig/perl, it creates and opens raster and 
>>>vector data files
>>>
>>>Ari
>>>
>>>      
>>>
>>Ari,
>>
>>Something is wrong with my installation here.  When I tried to run 
>>test.pl it said that it could find a loadable module for gdalconst, 
>>despite the fact that gdalconst.pm is in my @INC list.  I think in my 
>>effort yesterday to get around the compilation failure of 
>>gdal_wrap.cpp, I fouled up the installation.  I think I need to step 
>>back, and start fresh.
>>
>>I worked on the assumption yesterday that to get the Perl bindings 
>>built and installed that I would do these steps from the gdal base 
>>directory (I also use netCDF)...
>>
>>./configure --with-netcdf=<path to netcdf> --with-perl
>>make
>>make install
>>
>>Is that incorrect?  If those are indeed the right steps, then I need 
>>to figure out why gdal_wrap.cpp fails to build.
>>
>>Matt
>>
>>    
>>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org 
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>  
>

-- 
"Those who would sacrifice essential liberties for a little temporary
safety deserve neither liberty nor safety."
-- Benjamin Franklin


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From Matthew.Foster at noaa.gov  Fri Oct  7 11:18:16 2005
From: Matthew.Foster at noaa.gov (Matt Foster)
Date: Wed Nov 21 11:49:47 2007
Subject: Fix for building perl bindings was Re: [Gdal-dev] Newbie with
	OGRPerl bindings
In-Reply-To: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAD@COMAIL01.digitalglobe.com>
References: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAD@COMAIL01.digitalglobe.com>
Message-ID: <434691B8.7010504@noaa.gov>

Sorry, I guess I didn't include the exact error message...

gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port -D_REENTRANT 
-D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING -fno-strict-aliasing 
-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 
-I/usr/include/gdbm -O2 -g -pipe -march=i386 -mcpu=i686   -DVERSION=\"\" 
-DXS_VERSION=\"\" -fPIC 
"-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdal_wrap.cpp
gdal_wrap.cpp: In function `void _wrap_Dataset_GetGCPs(PerlInterpreter*, 
CV*)':
gdal_wrap.cpp:4877: `SWIG_NewPointerObj' undeclared (first use this 
function)
gdal_wrap.cpp:4877: (Each undeclared identifier is reported only once 
for each
   function it appears in.)
make[1]: *** [gdal_wrap.o] Error 1

Matt


Ethan Alpert wrote:

>What's the error? Was it in a previous post?
>
>-e
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Foster
>Sent: Friday, October 07, 2005 8:50 AM
>To: Kevin Ruland
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: Fix for building perl bindings was Re: [Gdal-dev] Newbie
>with OGRPerl bindings
>
>
>Kevin,
>
>OK, I started fresh with a 'make clean', and then did these steps...
>
>./configure --with-netcdf=<path to netcdf>
>make
>make install
>
>This went fine, and everything is installed under /usr/local.  Then 
>things go bad...
>
>cd swig/perl
>make
>
>make fails trying to compile gdal_wrap.cpp with SWIG_NewPointerObj being
>
>undeclared.  I tried adding the -L/usr/local/lib to the Makefile.PL, as 
>you suggested (even though /usr/local is default), and even added 
>/usr/local/lib to LD_LIBRARY_PATH, and it fails in the same place with 
>the same error.
>
>Matt
>
>Kevin Ruland wrote:
>
>  
>
>>Matt,
>>
>>There appears to be some problems with 'make install' in the perl 
>>bindings - there are some work-arounds for it and if you use --prefix 
>>things get a little harder.
>>
>>If you decide to install gdal in either /usr/local or /usr/ (this is 
>>the case when you don't use --prefix in ./configure), the best option 
>>is to not use the --with-perl option, but instead do this:
>>
>>./configure --normal-configure-options  (omit the --with-perl option) 
>>make make install
>>cd swig/perl
>>make
>>make install
>>
>>This should install the perl module correctly.
>>
>>If you desire to install gdal in a non-default location you will need 
>>to hack the swig/perl/Makefile.PL script to get the build to function 
>>correctly.
>>
>>./configure --prefix=myprefix --normal-configure-options (omit the 
>>--with-perl option) make
>>make install
>>cd swig/perl
>>-- edit the Makefile.PL and change all the lines with LIB => "-lgdal"
>>    
>>
>to
>  
>
>>LIB => '-Lmyprefix/lib -lgdal'
>>make
>>make install
>>
>>We are currently working on a platform independent way to make this 
>>more automatic.  It should make it into cvs shorly, and in the 1.3.2 
>>release.  Until then we'll have to struggle a little more.
>>
>>Best of luck.
>>
>>Kevin
>>
>>
>>
>>
>>Matt Foster wrote:
>>
>> 
>>
>>    
>>
>>>Ari Jolma wrote:
>>>
>>>   
>>>
>>>      
>>>
>>>>Matt Foster kirjoitti:
>>>>
>>>>     
>>>>
>>>>        
>>>>
>>>>>Would anyone have a sample code snippet they'd be willing to share, 
>>>>>showing how to create a simple point shapefile with the OGR Perl 
>>>>>binding?
>>>>>       
>>>>>
>>>>>          
>>>>>
>>>>look at  the test.pl in swig/perl, it creates and opens raster and 
>>>>vector data files
>>>>
>>>>Ari
>>>>
>>>>     
>>>>
>>>>        
>>>>
>>>Ari,
>>>
>>>Something is wrong with my installation here.  When I tried to run 
>>>test.pl it said that it could find a loadable module for gdalconst, 
>>>despite the fact that gdalconst.pm is in my @INC list.  I think in my 
>>>effort yesterday to get around the compilation failure of 
>>>gdal_wrap.cpp, I fouled up the installation.  I think I need to step 
>>>back, and start fresh.
>>>
>>>I worked on the assumption yesterday that to get the Perl bindings 
>>>built and installed that I would do these steps from the gdal base 
>>>directory (I also use netCDF)...
>>>
>>>./configure --with-netcdf=<path to netcdf> --with-perl
>>>make
>>>make install
>>>
>>>Is that incorrect?  If those are indeed the right steps, then I need 
>>>to figure out why gdal_wrap.cpp fails to build.
>>>
>>>Matt
>>>
>>>   
>>>
>>>      
>>>
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org 
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>> 
>>
>>    
>>
>
>  
>

-- 
"Those who would sacrifice essential liberties for a little
temporary safety deserve neither liberty nor safety."
-- Benjamin Franklin



From ari.jolma at tkk.fi  Fri Oct  7 13:04:05 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:47 2007
Subject: Fix for building perl bindings was Re: [Gdal-dev] Newbie with
	OGRPerl bindings
In-Reply-To: <434691B8.7010504@noaa.gov>
References: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDAD@COMAIL01.digitalglobe.com>
	<434691B8.7010504@noaa.gov>
Message-ID: <4346AA85.9060904@tkk.fi>

Matt Foster kirjoitti:

> Sorry, I guess I didn't include the exact error message...
>
> gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port 
> -D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS -DDEBUGGING 
> -fno-strict-aliasing -I/usr/local/include -D_LARGEFILE_SOURCE 
> -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm -O2 -g -pipe -march=i386 
> -mcpu=i686   -DVERSION=\"\" -DXS_VERSION=\"\" -fPIC 
> "-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdal_wrap.cpp
> gdal_wrap.cpp: In function `void 
> _wrap_Dataset_GetGCPs(PerlInterpreter*, CV*)':
> gdal_wrap.cpp:4877: `SWIG_NewPointerObj' undeclared (first use this 
> function)
> gdal_wrap.cpp:4877: (Each undeclared identifier is reported only once 
> for each
>   function it appears in.)


which version gdal do you have? in gdal-1.3.1 line 4877 is not in 
wrap_Dataset_GetGCPs and SWIG_NewPointerObj is only defined not used

gdal_wrap.cpp in 1.3.1 is 235345 bytes and its header says: 
..automatically generated by swig 1.3.26

Ari

> make[1]: *** [gdal_wrap.o] Error 1
>
> Matt
>
>
> Ethan Alpert wrote:
>
>> What's the error? Was it in a previous post?
>>
>> -e
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org
>> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Foster
>> Sent: Friday, October 07, 2005 8:50 AM
>> To: Kevin Ruland
>> Cc: gdal-dev@lists.maptools.org
>> Subject: Re: Fix for building perl bindings was Re: [Gdal-dev] Newbie
>> with OGRPerl bindings
>>
>>
>> Kevin,
>>
>> OK, I started fresh with a 'make clean', and then did these steps...
>>
>> ./configure --with-netcdf=<path to netcdf>
>> make
>> make install
>>
>> This went fine, and everything is installed under /usr/local.  Then 
>> things go bad...
>>
>> cd swig/perl
>> make
>>
>> make fails trying to compile gdal_wrap.cpp with SWIG_NewPointerObj being
>>
>> undeclared.  I tried adding the -L/usr/local/lib to the Makefile.PL, 
>> as you suggested (even though /usr/local is default), and even added 
>> /usr/local/lib to LD_LIBRARY_PATH, and it fails in the same place 
>> with the same error.
>>
>> Matt
>>
>> Kevin Ruland wrote:
>>
>>  
>>
>>> Matt,
>>>
>>> There appears to be some problems with 'make install' in the perl 
>>> bindings - there are some work-arounds for it and if you use 
>>> --prefix things get a little harder.
>>>
>>> If you decide to install gdal in either /usr/local or /usr/ (this is 
>>> the case when you don't use --prefix in ./configure), the best 
>>> option is to not use the --with-perl option, but instead do this:
>>>
>>> ./configure --normal-configure-options  (omit the --with-perl 
>>> option) make make install
>>> cd swig/perl
>>> make
>>> make install
>>>
>>> This should install the perl module correctly.
>>>
>>> If you desire to install gdal in a non-default location you will 
>>> need to hack the swig/perl/Makefile.PL script to get the build to 
>>> function correctly.
>>>
>>> ./configure --prefix=myprefix --normal-configure-options (omit the 
>>> --with-perl option) make
>>> make install
>>> cd swig/perl
>>> -- edit the Makefile.PL and change all the lines with LIB => "-lgdal"
>>>   
>>
>> to
>>  
>>
>>> LIB => '-Lmyprefix/lib -lgdal'
>>> make
>>> make install
>>>
>>> We are currently working on a platform independent way to make this 
>>> more automatic.  It should make it into cvs shorly, and in the 1.3.2 
>>> release.  Until then we'll have to struggle a little more.
>>>
>>> Best of luck.
>>>
>>> Kevin
>>>
>>>
>>>
>>>
>>> Matt Foster wrote:
>>>
>>>
>>>
>>>   
>>>
>>>> Ari Jolma wrote:
>>>>
>>>>  
>>>>     
>>>>
>>>>> Matt Foster kirjoitti:
>>>>>
>>>>>    
>>>>>       
>>>>>
>>>>>> Would anyone have a sample code snippet they'd be willing to 
>>>>>> share, showing how to create a simple point shapefile with the 
>>>>>> OGR Perl binding?
>>>>>>      
>>>>>>         
>>>>>
>>>>> look at  the test.pl in swig/perl, it creates and opens raster and 
>>>>> vector data files
>>>>>
>>>>> Ari
>>>>>
>>>>>    
>>>>>       
>>>>
>>>> Ari,
>>>>
>>>> Something is wrong with my installation here.  When I tried to run 
>>>> test.pl it said that it could find a loadable module for gdalconst, 
>>>> despite the fact that gdalconst.pm is in my @INC list.  I think in 
>>>> my effort yesterday to get around the compilation failure of 
>>>> gdal_wrap.cpp, I fouled up the installation.  I think I need to 
>>>> step back, and start fresh.
>>>>
>>>> I worked on the assumption yesterday that to get the Perl bindings 
>>>> built and installed that I would do these steps from the gdal base 
>>>> directory (I also use netCDF)...
>>>>
>>>> ./configure --with-netcdf=<path to netcdf> --with-perl
>>>> make
>>>> make install
>>>>
>>>> Is that incorrect?  If those are indeed the right steps, then I 
>>>> need to figure out why gdal_wrap.cpp fails to build.
>>>>
>>>> Matt
>>>>
>>>>  
>>>>     
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org 
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>   
>>
>>
>>  
>>
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From matt.wilkie at gov.yk.ca  Fri Oct  7 14:42:16 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] geotiff nodata tag
Message-ID: <4346C188.8020701@gov.yk.ca>

Hi Folks,

Frustratingly ESRI's ArcMap & Catalog  ignore the nodata value in 
geotiffs created by gdal (for 8bit greyscale at least, I don't know 
about RGBa). Is the nodata tag a specific gdal thing or is it part of 
the official GeoTIFF spec?

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Fri Oct  7 15:17:16 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] geotiff nodata tag
In-Reply-To: <4346C188.8020701@gov.yk.ca>
References: <4346C188.8020701@gov.yk.ca>
Message-ID: <931f8ea90510071217q4b128b43i41ba975630156345@mail.gmail.com>

On 10/7/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi Folks,
>
> Frustratingly ESRI's ArcMap & Catalog  ignore the nodata value in
> geotiffs created by gdal (for 8bit greyscale at least, I don't know
> about RGBa). Is the nodata tag a specific gdal thing or is it part of
> the official GeoTIFF spec?

Matt,

It is specifically a GDAL extension to the GeoTIFF format.  I think the
only way ArcMap would recognise the nodata value would be if
an appopriately constructed Imagine .aux file was associated with it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ealpert at digitalglobe.com  Fri Oct  7 15:42:28 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] geotiff nodata tag
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDB0@COMAIL01.digitalglobe.com>




If anyone figures out how to get ArcMap to recognize it automatically
please post. I always have to select properties for the image layer and
under the Symbology tab select Display Background value (R,G,B) as no
color.

-e
-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Friday, October 07, 2005 1:17 PM
To: Matt Wilkie
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] geotiff nodata tag


On 10/7/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi Folks,
>
> Frustratingly ESRI's ArcMap & Catalog  ignore the nodata value in 
> geotiffs created by gdal (for 8bit greyscale at least, I don't know 
> about RGBa). Is the nodata tag a specific gdal thing or is it part of 
> the official GeoTIFF spec?

Matt,

It is specifically a GDAL extension to the GeoTIFF format.  I think the
only way ArcMap would recognise the nodata value would be if an
appopriately constructed Imagine .aux file was associated with it.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From pgao at esri.com  Fri Oct  7 16:05:36 2005
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] geotiff nodata tag
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20160E18E@firewire.esri.com>

What's the nodata tag number? 

> -----Original Message-----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com] 
> Sent: Friday, October 07, 2005 12:42 PM
> To: gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] geotiff nodata tag
> 
> 
> 
> 
> If anyone figures out how to get ArcMap to recognize it 
> automatically please post. I always have to select properties 
> for the image layer and under the Symbology tab select 
> Display Background value (R,G,B) as no color.
> 
> -e
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Frank Warmerdam
> Sent: Friday, October 07, 2005 1:17 PM
> To: Matt Wilkie
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] geotiff nodata tag
> 
> 
> On 10/7/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> > Hi Folks,
> >
> > Frustratingly ESRI's ArcMap & Catalog  ignore the nodata value in 
> > geotiffs created by gdal (for 8bit greyscale at least, I don't know 
> > about RGBa). Is the nodata tag a specific gdal thing or is 
> it part of 
> > the official GeoTIFF spec?
> 
> Matt,
> 
> It is specifically a GDAL extension to the GeoTIFF format.  I 
> think the only way ArcMap would recognise the nodata value 
> would be if an appopriately constructed Imagine .aux file was 
> associated with it.
> 
> Best regards,
> --
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Fri Oct  7 16:38:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:47 2007
Subject: [Gdal-dev] geotiff nodata tag
In-Reply-To: <54808B311D66EB4E9CF4647B0DE707C20160E18E@firewire.esri.com>
References: <54808B311D66EB4E9CF4647B0DE707C20160E18E@firewire.esri.com>
Message-ID: <931f8ea90510071338r58fd6501tadce3e5cd2d23b30@mail.gmail.com>

On 10/7/05, Peng Gao <pgao@esri.com> wrote:
> What's the nodata tag number?

Peng Gao,

GDAL uses the following private tag for nodata values:
  http://www.awaresystems.be/imaging/tiff/tifftags/gdal_nodata.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sforde at lizardtech.com  Fri Oct  7 18:19:42 2005
From: sforde at lizardtech.com (Sean Forde)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Blue Marble TFW files
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD123A46E9@sea-srv-ms3.lizardtech.com>

Clay, I am not sure if you found these. Here are two links that may be useful:
 
    http://osgcvs.no-ip.com/osgarchiver/archives/August2005/0074.html
    http://lists.maptools.org/pipermail/gdal-dev/2004-October/004362.html
 
The first link has files that may be used with geotifcp to turn the bluemarble tiffs into geotiffs. The second link has more info.
 
    -Sean
 
Sean Forde
Geospatial Engineering Manager
LizardTech, a Celartem Company
http://www.lizardtech.com <http://www.lizardtech.com/> 
206-902-2874 

 -----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org]On Behalf Of Clay, Bruce
Sent: Friday, September 30, 2005 6:52 AM
To: osg users; gdal-dev@lists.maptools.org; postgis-users@postgis.refractions.net
Subject: [Gdal-dev] Blue Marble TFW files



Sorry about the cross post.  These are the most likely user groups that would have the files

 

Does anyone have the TFW files that go with the Blue Marble land_shallow_topo_east.tif and land_shallow_topo_west.tif images so we can geo register the images.  They seem to be plain tiff images rather than geotiff images.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051007/73c39787/attachment.html
From buckmasterjunior at yahoo.com  Sun Oct  9 16:45:05 2005
From: buckmasterjunior at yahoo.com (Gerald Buckmaster)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] two subjects - Katrina Good News and Request for VRT
	API VB6 binding
In-Reply-To: <931f8ea90510061026g162b7cefrc87b276ab6bc463d@mail.gmail.com>
Message-ID: <20051009204505.45412.qmail@web33509.mail.mud.yahoo.com>


Frank Warmerdam <warmerdam@pobox.com> wrote:
One thing to keep in mind is that VRT capabilities can all be taken advantage
of by just constructing the VRT XML, without having to expose the C++
entry points to the various VRT classes. So my suggestion is that instead
of adding a bunch of entry points into the VRT classes from VB6, that
you (or we) just prepare the corresponding VRT XML and then pass that
to the GDAL.Open() method. The VRT tutorial at:

http://www.gdal.org/gdal_vrttut.html

should give some useful details. I am also happy to help out as needed.

Frank,

I have created the GDAL VB App Dev group on Yahoo Groups and I am cross-posting.  I have looks at the tutorials as you suggested above, and loaded the gdalvbtest project to run.  Realizing I would need to understand the VRT before moving into saving out as Kakadu JP2, I wanted to see if I could read the attributes from a sample JP2 with the gdalvbtest project.  I found out that gdal12vb.dll doesn't have the JP2KAK driver built in.  Is it possible you could compile a gdal12vb.dll with the Kakadu driver?

 

My strategy is to first determine what will go into the VRT XML.  Most of the items needed are already being generated by my code.  I am confused how the GDAL.Open() function will work with the XML.  Shouldn't it be more like CreateCopy()?  Even then, I really don't understand how the XML gets used unless something like SetGeoTransform() is involved.

 

Appreciate any help you provide.

 

Gerald "Buck" Buckmaster


		
---------------------------------
 Yahoo! Music Unlimited - Access over 1 million songs. Try it free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051009/a8536e7c/attachment.html
From ari.jolma at tkk.fi  Mon Oct 10 02:28:35 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] A list of things in the wrappers and geom type in ogr
Message-ID: <434A0A13.9010005@tkk.fi>

Hi,

I submitted a bug report 
http://bugzilla.remotesensing.org/show_bug.cgi?id=951 and did then some 
investigations. The reason turns out to be that in my test.pl I more or 
less blindly create ogr layers of unsupported types. The result was a 
strange memory corruption which was very hard to debug. Frank has 
written "// I should be verifying that the geometry matches the defn's 
type." into SetGeometry. Could we have it there, i.e. something like:  
if (poGeometry->getGeometryType() != poDefn->GetGeomType()) return 
OGRERR_UNSUPPORTED_GEOMETRY_TYPE;?

Also shapefile layers can be created with unsupported geom type.

I tried the unsupported error and it lead me to noticing that the 
wrappers use throw but do not catch. Don't we need something like

try{
    result = (OGRErr)OGRFeatureShadow_SetGeometry(arg1,arg2);
}
catch (int e) {
    SWIG_exception( SWIG_RuntimeError, OGRErrMessages(e) );
}

in the wrappers (but more general, in the cpl_exceptions.i)?

Still one more thing, null pointers and wrapper functions. Is the plan 
to test for inappropriate null pointers in the wrapper functions, or do 
we write the checks into typemaps? Now the situation is still that it is 
far too easy to create a segfault with undefined script variables thrown 
at methods.

Cheers,

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From sp_ml at sourcepole.com  Mon Oct 10 04:13:10 2005
From: sp_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] exportToGEOS performance
In-Reply-To: <931f8ea90510060917g7e6b5503wf793da97c8acce3b@mail.gmail.com>
References: <200510061754.56087.sp_ml@sourcepole.com>
	<931f8ea90510060917g7e6b5503wf793da97c8acce3b@mail.gmail.com>
Message-ID: <200510101013.10396.sp_ml@sourcepole.com>

Frank,
I tried to write my own WKB based exportToGEOS. The geos::WKBReader exists in 
the CVS version of GEOS only. But my usage of istringstream doesn't work. It 
hangs in geosWkbReader.read. Any ideas?
Pirmin

#ifdef HAVE_GEOS
geos::Geometry *exportToGEOS(OGRGeometry *geom)
{
#if GEOS_VERSION_MAJOR*100+GEOS_VERSION_MINOR*10+GEOS_VERSION_PATCH < 300
  return geom->exportToGEOS();
#else
    GByte       *pabyWKB;
  
    pabyWKB = (GByte *) CPLMalloc(geom->WkbSize());
    geos::WKBReader   geosWkbReader( 
        *OGRGeometryFactory::getGEOSGeometryFactory() );
    if( geom->exportToWkb( wkbNDR, pabyWKB ) != OGRERR_NONE )
        return NULL;

    istringstream oWKB((const char*)pabyWKB, istringstream::in | 
istringstream::binary);
    CPLFree( pabyWKB );

    try 
    { 
        geos::Geometry *geosGeometry = NULL;
        geosGeometry = geosWkbReader.read( oWKB );
        return geosGeometry;
    }
    catch( geos::GEOSException *e )
    {
        CPLError( CE_Failure, CPLE_AppDefined,
                  "GEOSException: %s", 
                  e->toString().c_str() );

        delete e;
        return NULL;
    }
#endif
}
#endif /* HAVE_GEOS */


Am Donnerstag, 6. Oktober 2005 18.17 schrieb Frank Warmerdam:
> On 10/6/05, Pirmin Kalberer <sp_ml@sourcepole.com> wrote:
> > Hi,
> >
> > I'm using the GEOS polygonizer for the OGR Interlis driver. But the
> > polygonization is quite slow because of the exportToGEOS call. The code
> > looks like this:
> >
> >     geos::Geometry *poThisGeosGeom = poLines->exportToGEOS(); //slow
> >     geos::Polygonizer* polygonizer = new geos::Polygonizer();
> >     polygonizer->add(poThisGeosGeom);
> >     vector<geos::Polygon*> *poOtherGeosGeom = polygonizer->getPolygons();
> >
> > We're talking about exporting 1677 OGRLineString's in about 1'20'' and
> > polygonizing them within a few second.
>
> Pirmin,
>
> I was planning to rewrite exportToGEOS() to translate using WKB
> format instead of WKT which I suspect will be significantly faster.
> This will be part of an upgrade to use the GEOS C API in time for
> the next release.  In the meantime, you might want to try modifying
> your local copy to go via WKB instead of WKT.  I think when I
> first looked at GEOS only the WKT conversion was supported.
>
> Best regards,
> --
> ---------------------------------------+-----------------------------------
>--- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Programmer for Rent

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From Luc.VanAsch at vlm.be  Mon Oct 10 04:24:36 2005
From: Luc.VanAsch at vlm.be (Luc Van Asch)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL bindings for C#
Message-ID: <A1B26E8B68B7AA4AAE69CF1CAEDAC714667711@aocsrv11.vlm.be>

Good morning list,
 
I'm brandnew to this list, so forgive me if this question might be
outdated.
 
I'm working on a project for managing all kinds raster data in an ESRI
ArcObject environment. 
 
Since ArcObjects has only a limited capacity for wrting raster formats
(Erdas IMG, TIFF and 
some generic/ESRI formats), I'm very interested in the GDAL conversion
capabilities.
However, my project is written in .NET (C#), so I'm wondering how far
the various efforts in
porting GDAL to C# actually are. 
I've seen some code on this, but no real packages or builds.
 
So, if anyone can point me to the most recent developments, I'll take a
look at it and try to contribute...
 
Best regards and thank you,
 
Luc
_______________________________________________ 
Luc Van Asch 
Informaticus 
Lijn Geografische Data Infrastructuur - Faciliteiten 

VLM-Ondersteunend Centrum GIS Vlaanderen 
Gebroeders Van Eyckstraat 16
9000 Gent
Alg. tel: 09/261.52.00
Direct tel: 09/261.52.15 
Mobile: 0499/258025 
fax: 09/261.52.99 
Mailto:luc.vanasch@vlm.be 
http://www.gisvlaanderen.be <http://www.gisvlaanderen.be/>  


 



*** DISCLAIMER ***De inhoud van onze e-mails en hun toegevoegde bestanden zijn vertrouwelijk en alleen bestemd voor het gebruik door de geadresseerde personen. Indien U per vergissing e-mails ontvangt, gelieve deze e-mails en hun toegevoegde bestanden te vernietigen. Kopieren, verdelen of ander gebruik, onder welke vorm ook, van de inhouden en van de toegevoegde bestanden, is ten strengste verboden. De inhoud van de e-mails en de toegevoegde bestanden zijn afkomstig van de auteur en verbindt niet noodzakelijk de VLM tenzij dit bevestigd wordt d.m.v. een terzake geldig ondertekend document van de VLM. 
Wij bevestigen dat de e-mails en hun toegevoegde bestanden zijn gecontroleerd op computervirussen wat niet garandeert dat ze volledig vrij zijn van computervirussen. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/a252e309/attachment.html
From mn at blominfo.dk  Mon Oct 10 04:58:49 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Computing srcwin fails
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676A96@kernen.blomkbh.dk>

I'm trying to create a bunch of image tiles from a VRT file using
gdal_translate.

This works great for most of the 517 tiles, but 7 of them fails with the
following error message:

gdal_translate -projwin 635149 1499749 642149 1492749 -a_srs "+proj=

utm +zone=48 +datum=WGS84" mosaic.vrt sheets\6236-II_004.tif

Input file size is 150000, 210000

Computed -srcwin -1550 36251 7000 7000 from projected window.

Computed -srcwin falls outside raster size of 150000x210000.

 

If you look closely, the computed srcwin does NOT fall completely
outside the image (-1550 + 7000 is inside the image). I've created an
ECW of all the images in the VRT and checked that these tiles actually
do have image data, and everything seems ok. Here's the remaining
srcwin's that fails:

Computed -srcwin -1265 91558 7000 7000 from projected window.

Computed -srcwin -1231 98471 7000 7000 from projected window.

Computed -srcwin 92798 -5911 7000 7000 from projected window.

Computed -srcwin 99555 -5972 7000 7000 from projected window.

Computed -srcwin 106312 -6036 7000 7000 from projected window.

Computed -srcwin 113069 -6102 7000 7000 from projected window.

 

Could this be a bug in gdal_translate or the VRT driver? The 7 tiles are
the only ones whose upper side or left side falls outside the window.

 

Best regards

/Morten Nielsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/c5be89e0/attachment.html
From ealpert at digitalglobe.com  Mon Oct 10 12:09:07 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL bindings for C#
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDB3@COMAIL01.digitalglobe.com>

 
I don't know about current efforts for C# specificallyl but GDAL 1.3.1
comes with SWIG bindings for perl,ruby and python. You could use these
as examples to generate a SWIG wrapper for C#. 
 
-e

	-----Original Message-----
	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Luc Van Asch
	Sent: Monday, October 10, 2005 2:25 AM
	To: gdal-dev@lists.maptools.org
	Cc: Joeri Robbrecht; Bart Cosyn
	Subject: [Gdal-dev] GDAL bindings for C#
	
	
	Good morning list,
	 
	I'm brandnew to this list, so forgive me if this question might
be outdated.
	 
	I'm working on a project for managing all kinds raster data in
an ESRI ArcObject environment. 
	 
	Since ArcObjects has only a limited capacity for wrting raster
formats (Erdas IMG, TIFF and 
	some generic/ESRI formats), I'm very interested in the GDAL
conversion capabilities.
	However, my project is written in .NET (C#), so I'm wondering
how far the various efforts in
	porting GDAL to C# actually are. 
	I've seen some code on this, but no real packages or builds.
	 
	So, if anyone can point me to the most recent developments, I'll
take a look at it and try to contribute...
	 
	Best regards and thank you,
	 
	Luc
	_______________________________________________ 
	Luc Van Asch 
	Informaticus 
	Lijn Geografische Data Infrastructuur - Faciliteiten 

	VLM-Ondersteunend Centrum GIS Vlaanderen 
	Gebroeders Van Eyckstraat 16
	9000 Gent
	Alg. tel: 09/261.52.00
	Direct tel: 09/261.52.15 
	Mobile: 0499/258025 
	fax: 09/261.52.99 
	Mailto:luc.vanasch@vlm.be 
	http://www.gisvlaanderen.be <http://www.gisvlaanderen.be/>  
	

	 

	-------------------------------------------------------------
	VLM disclaimer :
	http://www.vlm.be/Help/disclaimer.htm 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/f038f2e1/attachment.html
From hobu at iastate.edu  Mon Oct 10 12:29:46 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL bindings for C#
In-Reply-To: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDB3@COMAIL01.digitalg
	lobe.com>
References: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDB3@COMAIL01.digitalglobe.com>
Message-ID: <6.2.3.4.2.20051010111405.01ed7e80@hobu.mail.iastate.edu>

The C# bindings for GDAL that exist in the 1.3.1 distribution and CVS 
do not have SWIG typemaps.  This means that they are 
incomplete.  They do compile and are somewhat usable in their current 
form for doing things like format translation, etc.

For the C# bindings to be complete, a highly motivated developer 
willing to jump into .NET PINVOKE and SWIG typemaps will need to 
write some typemaps to follow the other GDAL language bindings.  This 
is a challenging but not unpossible task.

Java bindings are in a similar boat, although there isn't really a 
build system in place for those like there is for .NET.  Again, 
someone who is highly motivated to write some JNI and SWIG typemaps 
is needed to bring these up to the level of the other languages.

Currently, GDAL/OGR next-gen bindings development has these language champions:
Ruby - Charlie Savage
Perl - Ari Jolma
Python - Frank, Kevin, and myself
PHP - Kevin (these are incomplete at this point but Kevin has made a 
lot of headway)

For your pet (SWIG-supported) language to have complete bindings, it 
needs to have a language champion who is willing to do the 
language-specific mappings between GDAL and the native language using 
SWIG typemaps and the framework that Kevin, Frank, and others have developed.

Howard


At 11:09 AM 10/10/2005, Ethan Alpert wrote:
>Content-class: urn:content-classes:message
>Content-Type: multipart/alternative;
>         boundary="----_=_NextPart_001_01C5CDB4.F132A04A"
>
>
>I don't know about current efforts for C# specificallyl but GDAL 
>1.3.1 comes with SWIG bindings for perl,ruby and python. You could 
>use these as examples to generate a SWIG wrapper for C#.
>
>-e
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org 
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Luc Van Asch
>Sent: Monday, October 10, 2005 2:25 AM
>To: gdal-dev@lists.maptools.org
>Cc: Joeri Robbrecht; Bart Cosyn
>Subject: [Gdal-dev] GDAL bindings for C#
>
>Good morning list,
>
>I'm brandnew to this list, so forgive me if this question might be outdated.
>
>I'm working on a project for managing all kinds raster data in an 
>ESRI ArcObject environment.
>
>Since ArcObjects has only a limited capacity for wrting raster 
>formats (Erdas IMG, TIFF and
>some generic/ESRI formats), I'm very interested in the GDAL 
>conversion capabilities.
>However, my project is written in .NET (C#), so I'm wondering how 
>far the various efforts in
>porting GDAL to C# actually are.
>I've seen some code on this, but no real packages or builds.
>
>So, if anyone can point me to the most recent developments, I'll 
>take a look at it and try to contribute...
>
>Best regards and thank you,
>
>Luc
>_______________________________________________
>Luc Van Asch
>Informaticus
>Lijn Geografische Data Infrastructuur - Faciliteiten
>
>VLM-Ondersteunend Centrum GIS Vlaanderen
>Gebroeders Van Eyckstraat 16
>9000 Gent
>Alg. tel: 09/261.52.00
>Direct tel: 09/261.52.15
>Mobile: 0499/258025
>fax: 09/261.52.99
><mailto:luc.vanasch@vlm.be>Mailto:luc.vanasch@vlm.be
>http://www.gisvlaanderen.be
>
>
>-------------------------------------------------------------
>VLM disclaimer :
><http://www.vlm.be/Help/disclaimer.htm>http://www.vlm.be/Help/disclaimer.htm
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From cfis at interserv.com  Mon Oct 10 14:03:46 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type in ogr
In-Reply-To: <434A0A13.9010005@tkk.fi>
References: <434A0A13.9010005@tkk.fi>
Message-ID: <434AAD02.7070200@interserv.com>

Hi Ari,


> I tried the unsupported error and it lead me to noticing that the 
> wrappers use throw but do not catch. Don't we need something like
> 
> try{
>    result = (OGRErr)OGRFeatureShadow_SetGeometry(arg1,arg2);
> }
> catch (int e) {
>    SWIG_exception( SWIG_RuntimeError, OGRErrMessages(e) );
> }

The OGR c api returns error codes instead of throwing exceptions.   So 
there isn't a need for catch.  Thus the generated code should look 
something like this:

    CPLErrorReset();
    result = (OGRErr)OGRFeatureShadow_SetGeometry(arg1,arg2);

    CPLErr eclass = CPLGetLastErrorType();
    if ( eclass == CE_Failure || eclass == CE_Fatal ) {
       SWIG_exception( SWIG_RuntimeError, CPLGetLastErrorMsg() );
    }


> Still one more thing, null pointers and wrapper functions. Is the plan 
> to test for inappropriate null pointers in the wrapper functions, or do 
> we write the checks into typemaps? Now the situation is still that it is 
> far too easy to create a segfault with undefined script variables thrown 
> at methods.

What do you mean by a null pointer?  Do you mean passing a null object 
in the target language to OGR?  Do you have an example you could share?

Thanks,

Charlie


From ari.jolma at tkk.fi  Mon Oct 10 14:53:04 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type in ogr
In-Reply-To: <434AAD02.7070200@interserv.com>
References: <434A0A13.9010005@tkk.fi> <434AAD02.7070200@interserv.com>
Message-ID: <434AB890.8090906@tkk.fi>

Charlie Savage kirjoitti:

> The OGR c api returns error codes instead of throwing exceptions.   


ogr.i throws:

 OGRErr SetGeometry(OGRGeometryShadow* geom) {
    OGRErr err = OGR_F_SetGeometry(self, geom);
    if (err != 0)
      throw err;
    return 0;
  }

and because there is no catch, this causes an abort and

> So there isn't a need for catch.  Thus the generated code should look 
> something like this:
>
>    CPLErrorReset();
>    result = (OGRErr)OGRFeatureShadow_SetGeometry(arg1,arg2);
>
>    CPLErr eclass = CPLGetLastErrorType();
>    if ( eclass == CE_Failure || eclass == CE_Fatal ) {
>       SWIG_exception( SWIG_RuntimeError, CPLGetLastErrorMsg() );
>    }


it never gets to the swig_exception

>
>
>> Still one more thing, null pointers and wrapper functions. Is the 
>> plan to test for inappropriate null pointers in the wrapper 
>> functions, or do we write the checks into typemaps? Now the situation 
>> is still that it is far too easy to create a segfault with undefined 
>> script variables thrown at methods.
>
>
> What do you mean by a null pointer?  Do you mean passing a null object 
> in the target language to OGR?  Do you have an example you could share?


For some reason (well, there is a spelled out reason at somewhere in 
swig docs) swig makes a null our of undef in Perl (and lazy Perl 
programmers easily have undefs) and passes that to the underlying 
library, which is ok sometimes but not always, in fact usually not and 
they easily cause a segfault.

For example SetProjection in Dataset.i, it takes (char *prj) parameter. 
If I give it uninitialized (undef) $prj in Perl, I get a segfault. There 
are two possibilities: 1) I write

%typemap(perl5,in) (char const *prj)
{
  /* %typemap(freearg) (char const *prj) */
  if ( !$1 ) {
    croak("null argument is not allowed");
    SWIG_fail;
  }
}

or we write in Dataset.i

 CPLErr SetProjection( char const *prj ) {
    if (!prj) return SOME_ERROR_CODE;
    return GDALSetProjection( self, prj );
  }

I discussed this with Kevin a while back but I think I was forgotten at 
some point.

Ah, one more thing to this list: in osr.i there is

~OSRSpatialReferenceShadow() {
    if (OSRDereference( self ) == 0 ) {
      OSRDestroySpatialReference( self );
    }
  }

It seems to me that OSRDereference is currently stopping the 
OSRSpatialReferenceShadow being properly disposed of (I saw this in 
debugging, there are also some (Kevin's?) comments near this in osr.i). 
At least datasource.createlayer makes a copy of the osr, I'm not sure of 
other methods.

Ari

>
> Thanks,
>
> Charlie
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From cfis at interserv.com  Mon Oct 10 15:22:13 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type in ogr
In-Reply-To: <434AB890.8090906@tkk.fi>
References: <434A0A13.9010005@tkk.fi> <434AAD02.7070200@interserv.com>
	<434AB890.8090906@tkk.fi>
Message-ID: <434ABF65.901@interserv.com>

That's very interesting.  Hadn't noticed that before.

I think the new code in cpl_exceptions.i will take care of these 
situations, so the throw would be redundant.  I think all we have to do 
is this:

   void SetFeature(OGRFeatureShadow *feature) {
     OGR_L_SetFeature(self, feature);
   }

Then in the wrapper function we check for the error and take the 
appropriate action.

Kevin, what do you think?

> For example SetProjection in Dataset.i, it takes (char *prj) parameter. 
> If I give it uninitialized (undef) $prj in Perl, I get a segfault. There 
> are two possibilities: 1) I write
> 
> %typemap(perl5,in) (char const *prj)
> {
>  /* %typemap(freearg) (char const *prj) */
>  if ( !$1 ) {
>    croak("null argument is not allowed");
>    SWIG_fail;
>  }
> }
> 
> or we write in Dataset.i
> 
> CPLErr SetProjection( char const *prj ) {
>    if (!prj) return SOME_ERROR_CODE;
>    return GDALSetProjection( self, prj );
>  }

I'll check in Ruby.  If this occurs in all languages, I'd vote choice #2 
(update Dataset.i).

> Ah, one more thing to this list: in osr.i there is
> 
> ~OSRSpatialReferenceShadow() {
>    if (OSRDereference( self ) == 0 ) {
>      OSRDestroySpatialReference( self );
>    }
>  }
> 
> It seems to me that OSRDereference is currently stopping the 
> OSRSpatialReferenceShadow being properly disposed of (I saw this in 
> debugging, there are also some (Kevin's?) comments near this in osr.i). 
> At least datasource.createlayer makes a copy of the osr, I'm not sure of 
> other methods.

Not sure, I'm not as familiar with OSR.   However, I've started to test 
the OSR wrappers in Ruby, so I'll add it to the todo list to check.

Charlie


From MChapman at sanz.com  Mon Oct 10 16:48:26 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0E5@mailman.san.com>

Frank,

 

When I call pOgrGeometry->getGeometryType(); in version 1.3.0 it returns
the wrong value (basically an unsigned int value) for esri shape files
that contain point geometry.  Polygons and LineStrings work as expected.
Can you confirm that this is a bug?  This is on Windows XP, haven't
tried it on Linux yet, but I will shortly.

 

Best regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/bdc06fdc/attachment.html
From sgillies at frii.com  Mon Oct 10 17:03:27 2005
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C0E5@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C0E5@mailman.san.com>
Message-ID: <c0c195b95ffad3261f9d5bfa762905ac@frii.com>

On Oct 10, 2005, at 2:48 PM, Chapman, Martin wrote:

> Frank,
> ?
> When I call pOgrGeometry->getGeometryType(); in version 1.3.0 it 
> returns the wrong value (basically an unsigned int value) for esri 
> shape files that contain point geometry.? Polygons and LineStrings 
> work as expected.? Can you confirm that this is a bug?? This is on 
> Windows XP, haven?t tried it on Linux yet, but I will shortly.
> ?
> Best regards,
> Martin

Martin,

I ran into something like this last night on Linux. The data were 
points digitized using QGis 0.7. Ogrinfo reported this shapefile as 
containing 3D points, and getGeometryType returned an invalid value. I 
used ogr2ogr with -nlt POINT to coerce these into "normal" points with 
GeometryType 1.

Sean

--
Sean Gillies
sgillies at frii dot com
http://zcologia.com


From MChapman at sanz.com  Mon Oct 10 17:27:23 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0E6@mailman.san.com>

Sean,

Hmmm, ok that is good info.  I will dig into the 1.3.0 code and see if I can identify what exactly the problem is then.  

Thank you very much,
Martin


-----Original Message-----
From: Sean Gillies [mailto:sgillies@frii.com] 
Sent: Monday, October 10, 2005 3:03 PM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0

On Oct 10, 2005, at 2:48 PM, Chapman, Martin wrote:

> Frank,
> ?
> When I call pOgrGeometry->getGeometryType(); in version 1.3.0 it 
> returns the wrong value (basically an unsigned int value) for esri 
> shape files that contain point geometry.? Polygons and LineStrings 
> work as expected.? Can you confirm that this is a bug?? This is on 
> Windows XP, haven't tried it on Linux yet, but I will shortly.
> ?
> Best regards,
> Martin

Martin,

I ran into something like this last night on Linux. The data were 
points digitized using QGis 0.7. Ogrinfo reported this shapefile as 
containing 3D points, and getGeometryType returned an invalid value. I 
used ogr2ogr with -nlt POINT to coerce these into "normal" points with 
GeometryType 1.

Sean

--
Sean Gillies
sgillies at frii dot com
http://zcologia.com


From szekerest at gmail.com  Mon Oct 10 17:29:59 2005
From: szekerest at gmail.com (=?iso-8859-2?Q?Szekeres_Tam=E1s?=)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL bindings for C#
Message-ID: <434add35.73c01932.39b8.ffffea6e@mx.gmail.com>

The GDAL SWIG C# library can only be compiled if the comments in

 

HYPERLINK
"http://bugzilla.remotesensing.org/show_bug.cgi?id=949"http://bugzilla.remot
esensing.org/show_bug.cgi?id=949

 

are taken into account.

 

 

I am also working on some typemaps missing with the C# bindings.

 

 

Tamas Szekeres


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.344 / Virus Database: 267.11.14/128 - Release Date: 2005.10.10.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/817012e7/attachment.html
From MChapman at sanz.com  Mon Oct 10 18:17:04 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0E8@mailman.san.com>

Sean,

Ok, I think I figured out the bug.  The basic problem I think is that the shape reader function SHPReadOGRObject () in shape2ogr.cpp creates the OGRPoint object with x, y, z and in turn the OGRPoint class has an original dimension of 3.  Then he (Frank) calls the function setCoordinateDimension(2) if the shape type is SHPT_POINT.  The problem being that the function setCoordinateDimension is a virtual function defined and implemented in ogrgeometry.h/.cpp.  OGRLineString and OGRPolygon override this virtual function and call Make2D() when the coord dimension is reduced to 2.  OGRPoint does not override this function.  The result is that the base class function setCoordinateDimension() in ogrgeometry gets called for points, and the Make2D() function is never called.  The solution is to implement the virtual function setCoordinateDimension() in the OGRPoint class and call Make2D() when dimension == 2.  

In the meantime, a fairly harmless workaround is to call pOgrGeometry->flattenTo2D() when pOgrGeometry->getGeometryType() returns less than zero if you aren't interested in using 3D data.  flattenTo2D() apparently just sets z = 0 and changes the dimension to 2.  So it shouldn't be that cpu expensive.

Martin

-----Original Message-----
From: Sean Gillies [mailto:sgillies@frii.com] 
Sent: Monday, October 10, 2005 3:03 PM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0

On Oct 10, 2005, at 2:48 PM, Chapman, Martin wrote:

> Frank,
> ?
> When I call pOgrGeometry->getGeometryType(); in version 1.3.0 it 
> returns the wrong value (basically an unsigned int value) for esri 
> shape files that contain point geometry.? Polygons and LineStrings 
> work as expected.? Can you confirm that this is a bug?? This is on 
> Windows XP, haven't tried it on Linux yet, but I will shortly.
> ?
> Best regards,
> Martin

Martin,

I ran into something like this last night on Linux. The data were 
points digitized using QGis 0.7. Ogrinfo reported this shapefile as 
containing 3D points, and getGeometryType returned an invalid value. I 
used ogr2ogr with -nlt POINT to coerce these into "normal" points with 
GeometryType 1.

Sean

--
Sean Gillies
sgillies at frii dot com
http://zcologia.com


From kruland at ku.edu  Mon Oct 10 22:17:48 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type
	in ogr
In-Reply-To: <434ABF65.901@interserv.com>
References: <434A0A13.9010005@tkk.fi>
	<434AAD02.7070200@interserv.com>	<434AB890.8090906@tkk.fi>
	<434ABF65.901@interserv.com>
Message-ID: <434B20CC.3020208@ku.edu>


Hi all,

I've been away for a couple of days and am a little bit behind.

 From what I can see in the mail there are three different questions 
going about.

1)  Ari pointed out a serious flaw in ogr.i SetGeometry.  None of the 
functions should have an explicit throw in them.  There are of course 
ways to wrap a "throw" but we don't really want to go there.  Instead 
this method should be fixed and we should just use the OGRErr typemap.  
I've committed the fix

2)  Passing nulls into methods.  The reason this is allowed by swig (in 
general) is because some c/c++ functions allow null pointers and in fact 
might do something different.  I think we should very likely code checks 
for these conditions.  There are two ways to appraoch it, we can either 
code the tests in every method, or we can code typecheck typemaps which 
can do this for us.

3)  There has been very little time spent looking at the memory 
management in the osr library.  There could be some troubles in there.

kevin


Charlie Savage wrote:

> That's very interesting.  Hadn't noticed that before.
>
> I think the new code in cpl_exceptions.i will take care of these 
> situations, so the throw would be redundant.  I think all we have to 
> do is this:
>
>   void SetFeature(OGRFeatureShadow *feature) {
>     OGR_L_SetFeature(self, feature);
>   }
>
> Then in the wrapper function we check for the error and take the 
> appropriate action.
>
> Kevin, what do you think?
>
>> For example SetProjection in Dataset.i, it takes (char *prj) 
>> parameter. If I give it uninitialized (undef) $prj in Perl, I get a 
>> segfault. There are two possibilities: 1) I write
>>
>> %typemap(perl5,in) (char const *prj)
>> {
>>  /* %typemap(freearg) (char const *prj) */
>>  if ( !$1 ) {
>>    croak("null argument is not allowed");
>>    SWIG_fail;
>>  }
>> }
>>
>> or we write in Dataset.i
>>
>> CPLErr SetProjection( char const *prj ) {
>>    if (!prj) return SOME_ERROR_CODE;
>>    return GDALSetProjection( self, prj );
>>  }
>
>
> I'll check in Ruby.  If this occurs in all languages, I'd vote choice 
> #2 (update Dataset.i).
>
>> Ah, one more thing to this list: in osr.i there is
>>
>> ~OSRSpatialReferenceShadow() {
>>    if (OSRDereference( self ) == 0 ) {
>>      OSRDestroySpatialReference( self );
>>    }
>>  }
>>
>> It seems to me that OSRDereference is currently stopping the 
>> OSRSpatialReferenceShadow being properly disposed of (I saw this in 
>> debugging, there are also some (Kevin's?) comments near this in 
>> osr.i). At least datasource.createlayer makes a copy of the osr, I'm 
>> not sure of other methods.
>
>
> Not sure, I'm not as familiar with OSR.   However, I've started to 
> test the OSR wrappers in Ruby, so I'll add it to the todo list to check.
>
> Charlie
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From nigel.eber at ermapper.com  Tue Oct 11 00:06:08 2005
From: nigel.eber at ermapper.com (Nigel Eber)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.3 -- News Update
Message-ID: <NOEOLIPDBKMCOLNIBIFNEEIODLAA.nigel.eber@ermapper.com>

Hi all,

This is a quick update on the release plans for the ECW JPEG 2000 SDK 3.3 given the considerable
interest in this version.

The SDK is undergoing final testing, and will be released shortly once some final QC is complete for
the Solaris version (the main thing holding up the release).

Due to the many beta testers, version 3.3 is going straight into Release Candidate once released.

If you would like to get an advance copy of the SDK before it goes online, please email
devsupport@ermapper.com.au (although we do expect to have the new SDK out very soon).

As previously noted, version 3.3 includes the following enhancements:
* Numerous bug fixes and enhancements, including:
- functional ECWP on platforms other than Windows
- fix to lossless JPEG 2000 compression
* Removal of the restriction on distribution of "Server Software" from the GPL-style Public Use
License Agreement
* Bug fixed in lossless JPEG 2000 compression, where previously a tiny fraction of pixels would be
compressed with a value +/-1 with respect to the input
* Functional static library builds for NCSEcw, NCSUtil, and NCScnet
* A new build structure called "libecwj2" providing single-library shared and static builds
* libecwj2 makefiles for gcc/g++ on Solaris, Linux and Mac OS X
* inclusion of the sample code that formerly shipped with the binary distribution, together with
makefiles for the libecwj2 shared and static libraries

Nigel Eber
Quality Assurance Officer
Research and Development
--------------------------------------------
ER Mapper
2 Abbotsford Street
West Leederville WA 6007
Australia
Tel: +61 8 9388 2900
Fax: +61 8 9388 2901
http://www.ermapper.com (ER Mapper Home)
http://www.EarthEtc.com (Image Web Server)
http://forum.ermapper.com (Public Forum)
--------------------------------------------

***
Just released: ER Mapper 7, Image Web Server 7, RightWebMap 7 and ECW JPEG 2000 SDK 3.1
Visit www.ermapper.com for more information
***


From cfis at interserv.com  Tue Oct 11 01:19:08 2005
From: cfis at interserv.com (Charles F. I. Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type
	in ogr
In-Reply-To: <434B20CC.3020208@ku.edu>
References: <434A0A13.9010005@tkk.fi>
	<434AAD02.7070200@interserv.com>	<434AB890.8090906@tkk.fi>
	<434ABF65.901@interserv.com> <434B20CC.3020208@ku.edu>
Message-ID: <434B4B4C.9080104@interserv.com>


> 1)  Ari pointed out a serious flaw in ogr.i SetGeometry.  None of the 
> functions should have an explicit throw in them.  There are of course 
> ways to wrap a "throw" but we don't really want to go there.  Instead 
> this method should be fixed and we should just use the OGRErr 
> typemap.  I've committed the fix
Kevin, I noticed that there were other methods in OGR that also had this 
issue.  Just do a search on throw.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 2781 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051010/b2897126/smime.bin
From BEN at Syncera-ITSolutions.NL  Tue Oct 11 01:54:48 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.3 -- News Update
Message-ID: <s34b6fdc.027@SRV-POSTIX-DFT>

Will it be possible to use this SDK with GDAL 1.2.6 safely?

Or would it be necessary to upgrade to GDAL 1.3.X?

I am asking this since the current Mapserver/Mapscript Windows binaries are built against GDAL 1.2.6, and I would not want to rebuild everything if possible.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> "Nigel Eber" <nigel.eber@ermapper.com> 11-10-2005 6:06 >>>
Hi all,

This is a quick update on the release plans for the ECW JPEG 2000 SDK 3.3 given the considerable
interest in this version.

The SDK is undergoing final testing, and will be released shortly once some final QC is complete for
the Solaris version (the main thing holding up the release).

Due to the many beta testers, version 3.3 is going straight into Release Candidate once released.

If you would like to get an advance copy of the SDK before it goes online, please email
devsupport@ermapper.com.au (although we do expect to have the new SDK out very soon).

As previously noted, version 3.3 includes the following enhancements:
* Numerous bug fixes and enhancements, including:
- functional ECWP on platforms other than Windows
- fix to lossless JPEG 2000 compression
* Removal of the restriction on distribution of "Server Software" from the GPL-style Public Use
License Agreement
* Bug fixed in lossless JPEG 2000 compression, where previously a tiny fraction of pixels would be
compressed with a value +/-1 with respect to the input
* Functional static library builds for NCSEcw, NCSUtil, and NCScnet
* A new build structure called "libecwj2" providing single-library shared and static builds
* libecwj2 makefiles for gcc/g++ on Solaris, Linux and Mac OS X
* inclusion of the sample code that formerly shipped with the binary distribution, together with
makefiles for the libecwj2 shared and static libraries

Nigel Eber
Quality Assurance Officer
Research and Development
--------------------------------------------
ER Mapper
2 Abbotsford Street
West Leederville WA 6007
Australia
Tel: +61 8 9388 2900
Fax: +61 8 9388 2901
http://www.ermapper.com (ER Mapper Home)
http://www.EarthEtc.com (Image Web Server)
http://forum.ermapper.com (Public Forum)
--------------------------------------------

***
Just released: ER Mapper 7, Image Web Server 7, RightWebMap 7 and ECW JPEG 2000 SDK 3.1
Visit www.ermapper.com for more information
***

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From bill at binko.net  Tue Oct 11 02:05:08 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.3 -- News Update
In-Reply-To: <s34b6fdc.027@SRV-POSTIX-DFT>
References: <s34b6fdc.027@SRV-POSTIX-DFT>
Message-ID: <Pine.LNX.4.58.0510110203470.431@fastcat.binko.net>

On Tue, 11 Oct 2005, Bart van den Eijnden wrote:

> Will it be possible to use this SDK with GDAL 1.2.6 safely?
> 
> Or would it be necessary to upgrade to GDAL 1.3.X?
> 
> I am asking this since the current Mapserver/Mapscript Windows binaries are built against GDAL 1.2.6, and I would not want to rebuild everything if possible.
> 
> Best regards,
> Bart

Bart,

I don't want to answer for Frank, but I'm pretty sure he's done some 
significant build changes to get the new build process to work with GDAL 
1.3.0.  If upgrading is really that big an issue, I'd wait until Frank can 
ok it and/or work with you on it.

Bill

From warmerdam at pobox.com  Tue Oct 11 10:26:54 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.3 -- News Update
In-Reply-To: <Pine.LNX.4.58.0510110203470.431@fastcat.binko.net>
References: <s34b6fdc.027@SRV-POSTIX-DFT>
	<Pine.LNX.4.58.0510110203470.431@fastcat.binko.net>
Message-ID: <931f8ea90510110726h74b96d7ay3c720297c41dabf6@mail.gmail.com>

On 10/11/05, Bill Binko <bill@binko.net> wrote:
> I don't want to answer for Frank, but I'm pretty sure he's done some
> significant build changes to get the new build process to work with GDAL
> 1.3.0.  If upgrading is really that big an issue, I'd wait until Frank can
> ok it and/or work with you on it.

Bart,

I am pretty sure you could get the new SDK working with 1.2.6
but you are likely to have to hack the GDALmake.opt a bunch yourself
since I doubt the configure options will work properly with the new SDK.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Tue Oct 11 10:42:26 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type
	in ogr
In-Reply-To: <434B4B4C.9080104@interserv.com>
References: <434A0A13.9010005@tkk.fi>
	<434AAD02.7070200@interserv.com>	<434AB890.8090906@tkk.fi>
	<434ABF65.901@interserv.com> <434B20CC.3020208@ku.edu>
	<434B4B4C.9080104@interserv.com>
Message-ID: <434BCF52.20408@ku.edu>


Hi guys,

There are some wierd ones:

Layer.GetExtent()
CreateGeometryFromWkb()
CreateGeometryFromWkt()
Geometry.ExportToWkt()

These methods had previously been defined to return something other than
OGRErr.

Layer.GetExtent() used an argout to return the real value.  This method
wraps just fine in python because of the way lists would be returned.

CreateGeometryFromWkb() and CreateGeometryFromWkt() both return
%newobject OGRGeometryShadow*.  I have coded them to return NULL if an
error occurred.  This is most definitely wrong for the error should be
converted into an exception.  I am uncertain right now how to handle
this.  There are two solutions I can think of:  Either recode them to be
like this:

OGRErr CreateGeometryFromWkb( int len, char *bin_string,
OSRSpatialReferenceShadow* reference, OGRGeometryShadow** argout)

Then code a special %typemap(argout) OGRGeometryShadow* which manually
does the newobject.  Or like this:

OGRGeometryShadow *CreateGeometryFromWkb( int len, char *bin_string,
OSRSpatialReferenceShadow* reference)

And code a %typemap(out) OGRGeometryShadow* which traps the NULL and
issues an exception.

Geometry.ExportToWkt() had a returned char const *.  I have changed this to:

OGRErr ExportToWkt( char **argout)

And because of python's argout handling, this comes out fine in python.

We need to discuss the handling of the two creation methods soon.

Kevin

Charles F. I. Savage wrote:

>
>> 1)  Ari pointed out a serious flaw in ogr.i SetGeometry.  None of the
>> functions should have an explicit throw in them.  There are of course
>> ways to wrap a "throw" but we don't really want to go there.  Instead
>> this method should be fixed and we should just use the OGRErr
>> typemap.  I've committed the fix
>
> Kevin, I noticed that there were other methods in OGR that also had
> this issue.  Just do a search on throw.
>
> Charlie


From warmerdam at pobox.com  Tue Oct 11 10:44:46 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type in
	ogr
In-Reply-To: <434B20CC.3020208@ku.edu>
References: <434A0A13.9010005@tkk.fi> <434AAD02.7070200@interserv.com>
	<434AB890.8090906@tkk.fi> <434ABF65.901@interserv.com>
	<434B20CC.3020208@ku.edu>
Message-ID: <931f8ea90510110744t4be37be8o8fe2285b0f35c484@mail.gmail.com>

On 10/10/05, Kevin Ruland <kruland@ku.edu> wrote:
> 2)  Passing nulls into methods.  The reason this is allowed by swig (in
> general) is because some c/c++ functions allow null pointers and in fact
> might do something different.  I think we should very likely code checks
> for these conditions.  There are two ways to appraoch it, we can either
> code the tests in every method, or we can code typecheck typemaps which
> can do this for us.

Charlie / Kevin,

On this issue, I am in favor of having the C API do NULL testing
for objects.   I have added this to my TODO list.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Oct 11 11:07:43 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C0E8@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C0E8@mailman.san.com>
Message-ID: <931f8ea90510110807k7a1023e7g8dd90689c0b0b594@mail.gmail.com>

On 10/10/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Sean,
>
> Ok, I think I figured out the bug.  The basic problem I think is that the shape reader function SHPReadOGRObject () in shape2ogr.cpp creates the OGRPoint object with x, y, z and in turn the OGRPoint class has an original dimension of 3.  Then he (Frank) calls the function setCoordinateDimension(2) if the shape type is SHPT_POINT.  The problem being that the function setCoordinateDimension is a virtual function defined and implemented in ogrgeometry.h/.cpp.  OGRLineString and OGRPolygon override this virtual function and call Make2D() when the coord dimension is reduced to 2.  OGRPoint does not override this function.  The result is that the base class function setCoordinateDimension() in ogrgeometry gets called for points, and the Make2D() function is never called.  The solution is to implement the virtual function setCoordinateDimension() in the OGRPoint class and call Make2D() when dimension == 2.

Martin / Sean,

I'm not sure I follow the issue here.  You report that
GetGeometryType() is returning an invalid value.  What value is
it returning?  Is it just returning a wkbPoint25D?   You mention
you are using 1.3.0.  Perhaps you should upgrade to 1.3.1.  There
was some sort of fix in geometry dimension handling for points
after the 1.3.0 release.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Oct 11 11:58:40 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C0F1@mailman.san.com>

Frank,

OGRPoint returns an invalid value for getGeometryType().  Something like
-2478353.  Doesn't match any of the geom Types.  I will upgrade to
1.3.1.  

Best regards,
Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Tuesday, October 11, 2005 9:08 AM
To: Chapman, Martin
Cc: Sean Gillies; gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Possible bug in getGeometryType() version 1.3.0

On 10/10/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Sean,
>
> Ok, I think I figured out the bug.  The basic problem I think is that
the shape reader function SHPReadOGRObject () in shape2ogr.cpp creates
the OGRPoint object with x, y, z and in turn the OGRPoint class has an
original dimension of 3.  Then he (Frank) calls the function
setCoordinateDimension(2) if the shape type is SHPT_POINT.  The problem
being that the function setCoordinateDimension is a virtual function
defined and implemented in ogrgeometry.h/.cpp.  OGRLineString and
OGRPolygon override this virtual function and call Make2D() when the
coord dimension is reduced to 2.  OGRPoint does not override this
function.  The result is that the base class function
setCoordinateDimension() in ogrgeometry gets called for points, and the
Make2D() function is never called.  The solution is to implement the
virtual function setCoordinateDimension() in the OGRPoint class and call
Make2D() when dimension == 2.

Martin / Sean,

I'm not sure I follow the issue here.  You report that
GetGeometryType() is returning an invalid value.  What value is
it returning?  Is it just returning a wkbPoint25D?   You mention
you are using 1.3.0.  Perhaps you should upgrade to 1.3.1.  There
was some sort of fix in geometry dimension handling for points
after the 1.3.0 release.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Tue Oct 11 12:47:11 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: A list of things in the wrappers and geom type in ogr
In-Reply-To: <931f8ea90510110744t4be37be8o8fe2285b0f35c484@mail.gmail.com>
References: <434A0A13.9010005@tkk.fi>
	<434AAD02.7070200@interserv.com>	<434AB890.8090906@tkk.fi>
	<434ABF65.901@interserv.com>	<434B20CC.3020208@ku.edu>
	<931f8ea90510110744t4be37be8o8fe2285b0f35c484@mail.gmail.com>
Message-ID: <434BEC8F.1020102@interserv.com>

Excellent, that would be helpful.

Charlie

Frank Warmerdam wrote:
> On 10/10/05, Kevin Ruland <kruland@ku.edu> wrote:
>> 2)  Passing nulls into methods.  The reason this is allowed by swig (in
>> general) is because some c/c++ functions allow null pointers and in fact
>> might do something different.  I think we should very likely code checks
>> for these conditions.  There are two ways to appraoch it, we can either
>> code the tests in every method, or we can code typecheck typemaps which
>> can do this for us.
> 
> Charlie / Kevin,
> 
> On this issue, I am in favor of having the C API do NULL testing
> for objects.   I have added this to my TODO list.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent



From ealpert at digitalglobe.com  Tue Oct 11 13:35:25 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGR and Oracle DATE and TIMESTAMP fields?
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDBA@COMAIL01.digitalglobe.com>

 
 
I'm using OGR's ExecuteSQL() datasource method and it appears DATE and
TIMESTAMP fields are ignored. Anyone know how to get dates out or oracle
using OGR without having to open a second connection to the DB using
DBI?
 
-e
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051011/79b6834b/attachment.html
From warmerdam at pobox.com  Tue Oct 11 13:43:36 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Computing srcwin fails
In-Reply-To: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676A96@kernen.blomkbh.dk>
References: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676A96@kernen.blomkbh.dk>
Message-ID: <931f8ea90510111043r473fba1fo760ad8cb9f51e081@mail.gmail.com>

On 10/10/05, Morten Nielsen <mn@blominfo.dk> wrote:
>
>
>
> I'm trying to create a bunch of image tiles from a VRT file using
> gdal_translate.
>
> This works great for most of the 517 tiles, but 7 of them fails with the
> following error message:
>
> gdal_translate -projwin 635149 1499749 642149 1492749 -a_srs "+proj=
>
> utm +zone=48 +datum=WGS84" mosaic.vrt sheets\6236-II_004.tif
>
> Input file size is 150000, 210000
>
> Computed -srcwin -1550 36251 7000 7000 from projected window.
>
> Computed -srcwin falls outside raster size of 150000x210000.
...
> Could this be a bug in gdal_translate or the VRT driver? The 7 tiles are the
> only ones whose upper side or left side falls outside the window.

Morten,

The problem is that gdal_translate does not support "srcwin"
regions that fall off the source raster, even partially.  You might
be better off using gdalwarp for at least these tiles.  Gdalwarp
is "savvy" about sampling from an input that only partly
intersects the desired tile area.

Of course, the arguments will be significantly different.  You will
need to specify your target region (the projected window) via
the -te switch, and the resolution or tile size with -tr or -ts
respectively.

eg.

gdalwarp -te 635149 1499749 642149 1492749 -ts 7000 7000 \
   -s_srs "+proj=utm +zone=48 +datum=WGS84" \
     mosaic.vrt sheets\6236-II_004.tif

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Oct 11 13:52:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] exportToGEOS performance
In-Reply-To: <200510101013.10396.sp_ml@sourcepole.com>
References: <200510061754.56087.sp_ml@sourcepole.com>
	<931f8ea90510060917g7e6b5503wf793da97c8acce3b@mail.gmail.com>
	<200510101013.10396.sp_ml@sourcepole.com>
Message-ID: <931f8ea90510111052n2e164bf9tb081d67943dfb992@mail.gmail.com>

On 10/10/05, Pirmin Kalberer <sp_ml@sourcepole.com> wrote:
> Frank,
> I tried to write my own WKB based exportToGEOS. The geos::WKBReader exists in
> the CVS version of GEOS only. But my usage of istringstream doesn't work. It
> hangs in geosWkbReader.read. Any ideas?

Pirmin,

Sorry, no I am not sure why it doesn't work for you. I haven't
actually gotten far in my conversion, but I am also changing things
to use the C API where I don't directly see this istringstream stuff.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Oct 11 14:02:30 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] two subjects - Katrina Good News and Request for VRT
	API VB6 binding
In-Reply-To: <20051009204505.45412.qmail@web33509.mail.mud.yahoo.com>
References: <931f8ea90510061026g162b7cefrc87b276ab6bc463d@mail.gmail.com>
	<20051009204505.45412.qmail@web33509.mail.mud.yahoo.com>
Message-ID: <931f8ea90510111102k49f49800oc7fcf2392ba789d@mail.gmail.com>

On 10/9/05, Gerald Buckmaster <buckmasterjunior@yahoo.com> wrote:
> Frank,
>
> I have created the GDAL VB App Dev group on Yahoo Groups and I am
> cross-posting.  I have looks at the tutorials as you suggested above, and
> loaded the gdalvbtest project to run.  Realizing I would need to understand
> the VRT before moving into saving out as Kakadu JP2, I wanted to see if I
> could read the attributes from a sample JP2 with the gdalvbtest project.  I
> found out that gdal12vb.dll doesn't have the JP2KAK driver built in.  Is it
> possible you could compile a gdal12vb.dll with the Kakadu driver?

Gerald,

My suggestion is to use FWTools 1.0.0a3 distribution which does
include the Kakadu driver.  The FWTools installer also installs the
VB6 bindings and attempts to update the GDAL DLL path appropriately.

> My strategy is to first determine what will go into the VRT XML.  Most of
> the items needed are already being generated by my code.  I am confused how
> the GDAL.Open() function will work with the XML.  Shouldn't it be more like
> CreateCopy()?  Even then, I really don't understand how the XML gets used
> unless something like SetGeoTransform() is involved.

Internally gdal_translate usually creates a virtual dataset, and then
calls CreateCopy() with that virtual dataset as the input datasource.
I am suggesting that you create an XML description of your virtual
datasource (doing subwindowing, etc) and pass that XML to GDAL.Open()
which will return a virtual datasource that you can pass as input to
CreateCopy().

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mn at blominfo.dk  Wed Oct 12 04:10:24 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] RE: Computing srcwin fails
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676B7B@kernen.blomkbh.dk>

>The problem is that gdal_translate does not support "srcwin"
>regions that fall off the source raster, even partially.  You might
>be better off using gdalwarp for at least these tiles.  Gdalwarp
>is "savvy" about sampling from an input that only partly
>intersects the desired tile area.

I resolved the issue by adding a small black dummy image to the VRT that
where placed further out of the image, which then extended the bounds of
the VRT. Then I could just do as I usually do :-)

...but why not let gdal_translate support writing a srcwin that is
partially covered by the input image's extents?

Best regards
Morten



From mateusz at loskot.net  Wed Oct 12 05:40:07 2005
From: mateusz at loskot.net (Mateusz =?iso-8859-2?Q?=A3oskot?=)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Geographic Transformer
Message-ID: <40529.127.0.0.1.1129110007.squirrel@loskot.net>

Hi,

I've just get announcement about Geographic Transformer by Blue Marble Geog.
It seems to be a tool my company is looking for, but I'm pushin GDAL to
use in my company. I'd like to as, what are missing features in GDAL in
relation to GT?

It isn't cheap :-) But when I see the features list of GT I'd say there is
no lack of features in GDAL, besides nice GUI ;)
Certainly, I have coleagues which don't use console-based tools at all,
they love GUIs, so it may be the point.

This may be a little OT post but I think some opinions may help potential
GDAL users to see its power.

Cheers

-- 
Mateusz Loskot
mateusz at loskot dot net

From marc.florisson at dryade.net  Wed Oct 12 12:39:12 2005
From: marc.florisson at dryade.net (Marc Florisson)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL/OGR and Postgres
Message-ID: <434D3C30.6070908@dryade.net>

Hi,

I wonder how to filter reults with ExecuteSQL (from OGRDataSource class)

- With mif/mid files I don't have any trouble.
- But with Postgres 8.0.4 (installed with Postgis extension and GDAL has 
been compiled with Postgres support),
ExecuteSQL doesn't read the second parameter (poSpatialFilter)
and I get too much results./

/What should I do to make it work ?/
//
/

From ealpert at digitalglobe.com  Wed Oct 12 13:30:15 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL/OGR and Postgres
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDC1@COMAIL01.digitalglobe.com>



poSpatialFilter is for Layers and doesn't apply to an entire datasource.
When you're calling ExecuteSQL you're calling the datasource directly
hence you must include your spatial filter into the where clause of you
SQL statement. At least that's my understanding.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Marc Florisson
Sent: Wednesday, October 12, 2005 10:39 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] GDAL/OGR and Postgres


Hi,

I wonder how to filter reults with ExecuteSQL (from OGRDataSource class)

- With mif/mid files I don't have any trouble.
- But with Postgres 8.0.4 (installed with Postgis extension and GDAL has

been compiled with Postgres support),
ExecuteSQL doesn't read the second parameter (poSpatialFilter) and I get
too much results./

/What should I do to make it work ?/
//
/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ealpert at digitalglobe.com  Wed Oct 12 13:33:26 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL/OGR and Postgres
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB1603A8CDC2@COMAIL01.digitalglobe.com>


Ugh...wish I had that one back. I wasn't aware you could pass a
spatialfilter to ExecuteSQL. I'm using swig/perl which doesn't force me
to actually pass a spatialfilter. I'll try some tests.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Marc Florisson
Sent: Wednesday, October 12, 2005 10:39 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] GDAL/OGR and Postgres


Hi,

I wonder how to filter reults with ExecuteSQL (from OGRDataSource class)

- With mif/mid files I don't have any trouble.
- But with Postgres 8.0.4 (installed with Postgis extension and GDAL has

been compiled with Postgres support),
ExecuteSQL doesn't read the second parameter (poSpatialFilter) and I get
too much results./

/What should I do to make it work ?/
//
/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Oct 12 14:27:39 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] GDAL/OGR and Postgres
In-Reply-To: <434D3C30.6070908@dryade.net>
References: <434D3C30.6070908@dryade.net>
Message-ID: <931f8ea90510121127nd1d1d34u3ebe8dc8814112c5@mail.gmail.com>

On 10/12/05, Marc Florisson <marc.florisson@dryade.net> wrote:
> Hi,
>
> I wonder how to filter reults with ExecuteSQL (from OGRDataSource class)
>
> - With mif/mid files I don't have any trouble.
> - But with Postgres 8.0.4 (installed with Postgis extension and GDAL has
> been compiled with Postgres support),
> ExecuteSQL doesn't read the second parameter (poSpatialFilter)
> and I get too much results./
>
> /What should I do to make it work ?/

Mark,

Sorry, but the spatial filters just aren't applied in ExecuteSQL()
for a number of the drivers.   I could certainly modify the PostGIS
driver to apply it to the results after the come back from the
database but that won't help much as far as performance goes.
And it won't guarantee that it will be applied on all providers.

The spatial filter is ignored because it is very hard to integrate
into an arbitrary SQL statement.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mateusz at loskot.net  Wed Oct 12 16:42:41 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:48 2007
Subject: Hi Frank,Re: [Gdal-dev] Geographic Transformer
In-Reply-To: <931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>
References: <40529.127.0.0.1.1129110007.squirrel@loskot.net>
	<931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>
Message-ID: <434D7541.6060001@loskot.net>

Hi Frank,

Frank Warmerdam napisa?(a):
> On 10/12/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> 
>>I've just get announcement about Geographic Transformer by Blue Marble Geog.
>>It seems to be a tool my company is looking for, but I'm pushin GDAL to
>>use in my company. I'd like to as, what are missing features in GDAL in
>>relation to GT?
> 
> 
> Mateusz,
> 
> Skimming through their "features" page I would say that GT has
> advantages with regard to:
> 
>  o GUI
>  o Collection of ground control points graphically.
>  o Some sort of automatical control point collection?
>  o Warping "quality control review".

In my opinion, those two features are very nice.
I wonder how graph of registration accuracy of control points is 
generated. I mean how quality factors are calculated.
I understand it works this way: I have unreferenced raster loaded to GT, 
then I put control points and do all thise referencing job and at the 
end GT generates quality graph. Right?

>  o Graticule overlay.
>  o Cutting images into tiles.

Two features about may be easily implemented in QGIS, as i.e. plugins.

> There set of raster formats seems ... modest. 

Yes.

 > It isn't immediately
> obvious to me if they provide options to rescale (float->byte, etc)
> data, what set of pixel types are supported, etc.

BTW, could you explain me a litle how (and purpose) scaling works in GDAL?

>>It isn't cheap :-) But when I see the features list of GT I'd say there is
>>no lack of features in GDAL, besides nice GUI ;)
>>Certainly, I have coleagues which don't use console-based tools at all,
>>they love GUIs, so it may be the point.
> 
> 
> To some degree the OpenEV and it's Export Tool provides quite
> a bit of what GT does.

Hehe, yes, but what's funny thing I've noticed is that many people say:
"what an awfull GUI, bleeee".
It's also OT, but from marketing point of view, that's one of main 
reasons people does not use tools like OpenEV.

I don't know, may be professionals in USA, Canada etc. have different 
opinions (and I'd bet they have), but I know many tech people and most 
of them are aesthetes and use this fabulous
Windows XP style, so they expect all applications will look that way :-)
If you don't like it, excause me I afforded to digress about taste of UI 
look.

 > The particular hole I would love to fill in
> OpenEV + GDAL is the ability to collect ground control points and
> a reprojection/warping GUI in OpenEV.

QGIS plugin provides such feature.

>>This may be a little OT post but I think some opinions may help potential
>>GDAL users to see its power.
> 
> 
> I don't think it is off topic, and it is interesting to see what commercial
> folks like Blue Marble are doing. 
 > They are one of the few that has
 > attempted to produce a general purpose "geospatial image utility"
 > application.

Definitely, yes.

> I don't forsee GDAL trying to address all the GUI needs addressed
> by the GT product,

Sure, I don't too. I love text console :-)

> but I would like to see one or a few of the
> desktop environments like OpenEV, and QGIS try to handle these
> needs.

That's right. I don't know if/why OpenEV compete with QGIS but don't you 
think close collaboration would be useful? Or may be it is worth to put 
all forces on one project?

Cheers

-- 
Mateusz ?oskot
http://mateusz.loskot.net

From nhv at cape.com  Wed Oct 12 17:02:48 2005
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Geographic Transformer
In-Reply-To: <434D7541.6060001@loskot.net>
Message-ID: <EKEJIKAILPONGGENMBGAEEDINGAA.nhv@cape.com>

Mateusz Loskot writes:
> > 
> >>I've just get announcement about Geographic Transformer by Blue Marble Geog.
> >>It seems to be a tool my company is looking for, but I'm pushin GDAL to
> >>use in my company. I'd like to as, what are missing features in GDAL in
> >>relation to GT?

If you are looking for a tool with a GUI perhaps
http://earth-info.nima.mil/GandG/geotrans/

HTH

Norman



From schuyler at nocat.net  Wed Oct 12 17:23:16 2005
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:49:48 2007
Subject: Hi Frank,Re: [Gdal-dev] Geographic Transformer
In-Reply-To: <434D7541.6060001@loskot.net>
References: <40529.127.0.0.1.1129110007.squirrel@loskot.net>
	<931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>
	<434D7541.6060001@loskot.net>
Message-ID: <20051012212316.GD2189@vishnu.tridity.org>

* On 12-Oct-2005 at  1:46PM PDT, Mateusz ??oskot said:
> > The particular hole I would love to fill in
> >OpenEV + GDAL is the ability to collect ground control points and
> >a reprojection/warping GUI in OpenEV.
> 
> QGIS plugin provides such feature.

Last I checked, it only provided linear warping, and the user
interface needed a bit of work. But it's definitely a place where a
well-meaning and industrious GDAL hacker could make a substantial
contribution to the community.

SDE

From warmerdam at pobox.com  Wed Oct 12 09:30:07 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: Computing srcwin fails
In-Reply-To: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676B7B@kernen.blomkbh.dk>
References: <D0B3429CEB2C4A4C82F2E412CD5DB9C6676B7B@kernen.blomkbh.dk>
Message-ID: <931f8ea90510120630h7ab23c30qa1536098c4b76be7@mail.gmail.com>

On 10/12/05, Morten Nielsen <mn@blominfo.dk> wrote:
> >The problem is that gdal_translate does not support "srcwin"
> >regions that fall off the source raster, even partially.  You might
> >be better off using gdalwarp for at least these tiles.  Gdalwarp
> >is "savvy" about sampling from an input that only partly
> >intersects the desired tile area.
>
> I resolved the issue by adding a small black dummy image to the VRT that
> where placed further out of the image, which then extended the bounds of
> the VRT. Then I could just do as I usually do :-)
>
> ...but why not let gdal_translate support writing a srcwin that is
> partially covered by the input image's extents?

Morten,

I suppose since gdal_translate is internally creating a VRT
file to effect the subwindowing, I might as well remove the
restriction about staying on the image bounds.  I can just create
an extended in-memory VRT much as you have.  If you would like
to file an enhancement request in bugzilla, I will try to do this at
some point.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 12 09:25:29 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Geographic Transformer
In-Reply-To: <40529.127.0.0.1.1129110007.squirrel@loskot.net>
References: <40529.127.0.0.1.1129110007.squirrel@loskot.net>
Message-ID: <931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>

On 10/12/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> Hi,
>
> I've just get announcement about Geographic Transformer by Blue Marble Geog.
> It seems to be a tool my company is looking for, but I'm pushin GDAL to
> use in my company. I'd like to as, what are missing features in GDAL in
> relation to GT?

Mateusz,

Skimming through their "features" page I would say that GT has
advantages with regard to:

 o GUI
 o Collection of ground control points graphically.
 o Some sort of automatical control point collection?
 o Warping "quality control review".
 o Graticule overlay.
 o Cutting images into tiles.

There set of raster formats seems ... modest.  It isn't immediately
obvious to me if they provide options to rescale (float->byte, etc)
data, what set of pixel types are supported, etc.

> It isn't cheap :-) But when I see the features list of GT I'd say there is
> no lack of features in GDAL, besides nice GUI ;)
> Certainly, I have coleagues which don't use console-based tools at all,
> they love GUIs, so it may be the point.

To some degree the OpenEV and it's Export Tool provides quite
a bit of what GT does.  The particular hole I would love to fill in
OpenEV + GDAL is the ability to collect ground control points and
a reprojection/warping GUI in OpenEV.

> This may be a little OT post but I think some opinions may help potential
> GDAL users to see its power.

I don't think it is off topic, and it is interesting to see what commercial
folks like Blue Marble are doing.  They are one of the few that has
attempted to produce a general purpose "geospatial image utility"
application.

I don't forsee GDAL trying to address all the GUI needs addressed
by the GT product, but I would like to see one or a few of the
desktop environments like OpenEV, and QGIS try to handle these
needs.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Thu Oct 13 00:53:09 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:48 2007
Subject: Hi Frank,Re: [Gdal-dev] Geographic Transformer
In-Reply-To: <20051012212316.GD2189@vishnu.tridity.org>
References: <40529.127.0.0.1.1129110007.squirrel@loskot.net>
	<931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>
	<434D7541.6060001@loskot.net>
	<20051012212316.GD2189@vishnu.tridity.org>
Message-ID: <434DE835.4030201@videotron.ca>

Schuyler Erle wrote:
> * On 12-Oct-2005 at  1:46PM PDT, Mateusz ??oskot said:
>>>The particular hole I would love to fill in
>>>OpenEV + GDAL is the ability to collect ground control points and
>>>a reprojection/warping GUI in OpenEV.
>>QGIS plugin provides such feature.
> 
> Last I checked, it only provided linear warping, and the user
> interface needed a bit of work. But it's definitely a place where a
> well-meaning and industrious GDAL hacker could make a substantial
> contribution to the community.

Was working on that for a while... have a skeleton GUI for reprojection/warping in OpenEV. But
other priorities swamped me :)
--
Mario B.

From Theuns at softsim.co.za  Thu Oct 13 03:21:38 2005
From: Theuns at softsim.co.za (Theuns Heydenrych)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Extracting Geo Info From GeoTiff's
Message-ID: <B18F07FB42F0D311BCB900105AC31EFC52DAEB@LTS1>

HI
I am knew to gdal open source software.
So far i could use the online help on GDAL to extract raster data from  a
GeoTiff file successfully.
But I am struggling a bit to get the Geo information from the Geo tiff i
need to geo reference the raster data.
As I understand I can use GDAL to do this?

I did read through the source code to get a feeling where to start. 
As far as I can figure out , I have to use the function GTIFGetDefn to get a
definition structure back with the information , but the function obviously
requires a handle to the Geotiff file.
This handle can be obtained from using the GTIFNew Function.

I downloaded the Gdal Source code, 3 weeks ago , and compiled the source
with VC++ to produce gdal13.dll.
But some of the GTIF functions did not get exposed in the dll??
The GTIFNew function do have the CPL_DLL declaration in front of the
function ??

Can anybody guide me in a direction , to fix this so that when compiling the
source the methods is exposed. 
Help would be much appreciated
Thanks
Theuns Heydenrych 
Software Developer

CyberSim (Pty) Ltd
Simulation Software Technologies   
Direct Tel.	:        + (27) 12 346 9807
Direct Fax	:        + (27) 12 346 9384
SWB Tel.		:        + (27) 12 346 7575
SWB Fax		:        + (27) 12 346 0064
E-Mail		:         theuns@softsim.co.za
Internet		:         http://www.cybersim.co.za        
       
Disclaimer:
The information contained in this communication is private and confidential
and is intended solely for use by the individual/individuals or entity to
whom it is addressed.  Kindly notify the sender immediately by   e-mail if
you have received this communication by mistake and delete this e-mail from
your system.  Any unauthorized use or interception of this communication, or
the review, retransmission, dissemination or other use of, or taking any
action in reliance upon the contents, by individuals or entities other than
those intended, is strongly prohibited.  

Any views expressed in this communication are those of the individual
sender, except where the sender specifically states them to be those of
CyberSim, to whom no liability shall attach whatsoever. 

CyberSim is neither liable for the proper and complete transmission of the
information contained in this communication nor for any delay in its receipt
nor for any special, incidental or consequential damages of any nature
whatsoever resulting from receipt or use of this communication.


###########################################

This message has been scanned by F-Secure Anti-Virus for Microsoft Exchange.
For more information, connect to http://www.F-Secure.com/

From BEN at Syncera-ITSolutions.NL  Thu Oct 13 05:54:14 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver: double entries for views
Message-ID: <s34e4af5.060@SRV-POSTIX-DFT>

Hi list,

using FWTools 0.9.9 and ogrinfo on my PostGIS database I get the following output:

D:\ms4w\apps\stragisweb\htdocs\sites\mdwh\data\gebiedsgericht\geo>ogrinfo -ro PG
:"host=127.0.0.1 user=postgres password=stragisweb dbname=mdwh"
INFO: Open of `PG:host=127.0.0.1 user=postgres password=stragisweb dbname=mdwh'
using driver `PostgreSQL' successful.
1: bedrijven (Point)
2: vw_bedrijven_publiek (Point)
3: vw_bedrijven_publiek (Point)
4: vw_bedrijven_intern (Point)
5: vw_bedrijven_intern (Point)

Why are views shown twice? This is the contents of the geometry_columns table:

33047;"''";"milieu";"bedrijven";"the_geom";"2";"28992";"POINT"
24291;"''";"milieu";"vw_bedrijven_intern";"the_geom";"2";"28992";"POINT"
24271;"''";"milieu";"vw_bedrijven_publiek";"the_geom";"2";"28992";"POINT"

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl



From BEN at Syncera-ITSolutions.NL  Thu Oct 13 07:41:33 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver
Message-ID: <s34e6420.072@SRV-POSTIX-DFT>

Hi list,

I was running into a problem with the PostGIS driver when trying to get a Mapinfo TAB into PostGIS.

D:\ms4w\apps\stragisweb\htdocs\sites\mdwh\data\gebiedsgericht\geo>ogr2ogr -f "PostgreSQL" PG:"host=127.0.0.1 user=postgres password=stragisweb dbname=mdwh" basisgebieden_conept4.TAB
ERROR 1: INSERT command for new feature failed.
ERROR:  new row for relation "basisgebieden_conept4" violates check constraint "
enforce_geotype_wkb_geometry"

ERROR 1: Terminating translation prematurely after failed
translation of layer basisgebieden_conept4

After debugging the SQL statements I found out that the geometry type was set to polygon, and the Mapinfo file also contained Multipolygons, so I could solve this by using:

D:\ms4w\apps\stragisweb\htdocs\sites\mdwh\data\gebiedsgericht\geo>ogr2ogr -f "PostgreSQL" PG:"host=127.0.0.1 user=postgres password=stragisweb dbname=mdwh" basisgebieden_conept4.TAB -lco OVERWRITE=YES -nlt MULTIPOLYGON

I have a few questions/remarks about the driver:

1) schema support is really needed, since now everything ends up in public

2) would it be a good idea to let the driver create indexes already on the geometry column, oid and the ogc_fid columns and do a vacuum analyze after that? Or are there reasons not to want this?

Thanks for this driver btw!

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl



From karl at tweak.net.au  Thu Oct 13 09:59:27 2005
From: karl at tweak.net.au (Karl P)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] rough patch for gdal to get GCP information from .NOS
	files
Message-ID: <434E683F.8030805@tweak.net.au>



Attached is a diff against 1.3.1, that adds support for gdal to get the GCP information 
from the .GEO files that accompany a .NOS file.

.NOS files are just like BSB files, except that instead of having a plain text header 
section containging projection and control point information, it comes in a corresponding 
.geo file.

The patch is pretty dirty, (gdalinfo will print out the correct information, and then 
segfault)  mostly because I'm using the "wrong" tools to do the string manipulation.

Cheers,
Karl P
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nosgeohack.diff
Type: text/x-patch
Size: 7609 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051013/0b0012e8/nosgeohack.bin
From warmerdam at pobox.com  Thu Oct 13 10:51:15 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver
In-Reply-To: <s34e6420.072@SRV-POSTIX-DFT>
References: <s34e6420.072@SRV-POSTIX-DFT>
Message-ID: <931f8ea90510130751w5704c765wbe70a0adab1607d0@mail.gmail.com>

On 10/13/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> After debugging the SQL statements I found out that the geometry type was set to polygon, and the Mapinfo file also contained Multipolygons, so I could solve this by using:

Bart,

It would seem this is in the mapinfo driver.  It ought to return type
GEOMETRY for polygon files that may have multipolygons.  Could you
file a bug report and attach a sample demonstrating the issue?

>D:\ms4w\apps\stragisweb\htdocs\sites\mdwh\data\gebiedsgericht\geo>ogr2ogr
-f "PostgreSQL" PG:"host=127.0.0.1 user=postgres password=stragisweb
dbname=mdwh" basisgebieden_conept4.TAB -lco OVERWRITE=YES -nlt
MULTIPOLYGON
>
> I have a few questions/remarks about the driver:
>
> 1) schema support is really needed, since now everything ends up in public

Yes, others have also pointed this out.  It is my intention to implement
schema support though I still don't really grok how schemas work.

> 2) would it be a good idea to let the driver create indexes already on the geometry column, oid and the ogc_fid columns and do a vacuum analyze after that? Or are there reasons not to want this?

I think at the very least it would be good to provide a layer creation
option to enable index creation.  I'm not sure if I would always want to
do it.  I would encourage you to file a bug report with this suggestion.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 13 11:02:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver: double entries for views
In-Reply-To: <s34e4af5.060@SRV-POSTIX-DFT>
References: <s34e4af5.060@SRV-POSTIX-DFT>
Message-ID: <931f8ea90510130802p4322681cp281157853a09c418@mail.gmail.com>

On 10/13/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list,
>
> using FWTools 0.9.9 and ogrinfo on my PostGIS database I get the following output:

Bart,

There have been some changes in the PostGIS driver since FWTools
0.9.9 so you might want to try the latest.  Currently the PostGIS driver
issues the following query to get alist of layers.


SELECT c.relname FROM pg_class c, geometry_columns g
    WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
    AND c.relname::TEXT = g.f_table_name::TEXT)

Could you try this in your postgres instance and see what the result
is.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From BEN at Syncera-ITSolutions.NL  Thu Oct 13 11:13:41 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver: double entries for views
Message-ID: <s34e95cb.037@SRV-POSTIX-DFT>

Hi Frank,

this query returns the right results so I am assuming the issue will be fixed in a more recent GDAL/OGR.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> Frank Warmerdam <warmerdam@pobox.com> 13-10-2005 17:02 >>>
On 10/13/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list,
>
> using FWTools 0.9.9 and ogrinfo on my PostGIS database I get the following output:

Bart,

There have been some changes in the PostGIS driver since FWTools
0.9.9 so you might want to try the latest.  Currently the PostGIS driver
issues the following query to get alist of layers.


SELECT c.relname FROM pg_class c, geometry_columns g
    WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
    AND c.relname::TEXT = g.f_table_name::TEXT)

Could you try this in your postgres instance and see what the result
is.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



From BEN at Syncera-ITSolutions.NL  Thu Oct 13 11:08:12 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] postgis driver
Message-ID: <s34e9485.031@SRV-POSTIX-DFT>

Hi Frank,

I have opened up the following bug reports:

Mapinfo driver not reporting correct geometry type when multipolygons are present:
http://bugzilla.remotesensing.org/show_bug.cgi?id=958

PostGIS indexing lco
http://bugzilla.remotesensing.org/show_bug.cgi?id=959

Thanks for the feedback.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> Frank Warmerdam <warmerdam@pobox.com> 13-10-2005 16:51 >>>
On 10/13/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> After debugging the SQL statements I found out that the geometry type was set to polygon, and the Mapinfo file also contained Multipolygons, so I could solve this by using:

Bart,

It would seem this is in the mapinfo driver.  It ought to return type
GEOMETRY for polygon files that may have multipolygons.  Could you
file a bug report and attach a sample demonstrating the issue?

>D:\ms4w\apps\stragisweb\htdocs\sites\mdwh\data\gebiedsgericht\geo>ogr2ogr
-f "PostgreSQL" PG:"host=127.0.0.1 user=postgres password=stragisweb
dbname=mdwh" basisgebieden_conept4.TAB -lco OVERWRITE=YES -nlt
MULTIPOLYGON
>
> I have a few questions/remarks about the driver:
>
> 1) schema support is really needed, since now everything ends up in public

Yes, others have also pointed this out.  It is my intention to implement
schema support though I still don't really grok how schemas work.

> 2) would it be a good idea to let the driver create indexes already on the geometry column, oid and the ogc_fid columns and do a vacuum analyze after that? Or are there reasons not to want this?

I think at the very least it would be good to provide a layer creation
option to enable index creation.  I'm not sure if I would always want to
do it.  I would encourage you to file a bug report with this suggestion.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Oct 13 11:41:48 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Extracting Geo Info From GeoTiff's
In-Reply-To: <B18F07FB42F0D311BCB900105AC31EFC52DAEB@LTS1>
References: <B18F07FB42F0D311BCB900105AC31EFC52DAEB@LTS1>
Message-ID: <931f8ea90510130841k1e0ca9cj86f331c7ec6645cd@mail.gmail.com>

On 10/13/05, Theuns Heydenrych <Theuns@softsim.co.za> wrote:
> I did read through the source code to get a feeling where to start.
> As far as I can figure out , I have to use the function GTIFGetDefn to get a
> definition structure back with the information , but the function obviously
> requires a handle to the Geotiff file.
> This handle can be obtained from using the GTIFNew Function.

Theuns,

You are digging into too low a level.  Normally you would
call GetProjectionRef() on the GDALDataset to get the coordinate
system information (expressed in OGC Well Known Text), and
GetGeoTransform() to get the affine transformation between pixel/line
and georeferenced coordinates.

You aren't supposed to be calling any of the GTIF functions directly.

If you need detailed and exact information about the GeoTIFF as
the original geotiff tags then you should likely be using libgeotiff
directly.

> Disclaimer:
> The information contained in this communication is private and confidential
> and is intended solely for use by the individual/individuals or entity to
> whom it is addressed.  Kindly notify the sender immediately by   e-mail if
> you have received this communication by mistake and delete this e-mail from
> your system.  Any unauthorized use or interception of this communication, or
> the review, retransmission, dissemination or other use of, or taking any
> action in reliance upon the contents, by individuals or entities other than
> those intended, is strongly prohibited.

Such a disclaimer is pretty lame on a public mailing list.  I would
encourage you to pass on to your management that it makes your
organization look ... disfunctional.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Thu Oct 13 12:09:03 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Extracting Geo Info From GeoTiff's
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD4A6@ptolemy.topozone.com>

Theuns -

Concerning such "confidential" disclaimers, I have been advised by
attorneys that if one labels EVERYTHING "confidential" but you don't
treat it as such, you are putting your REALLY confidential material at
significant risk.  Someone who disclosed information you really meant to
keep confidential could reasonably argue that your "confidential" labels
are meaningless and no one can figure out which information is
confidential and which is not.  You should pass that comment on to the
folks who are labeling every email as "private and confidential"....

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Thursday, October 13, 2005 11:42 AM
To: Theuns Heydenrych
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Extracting Geo Info From GeoTiff's

On 10/13/05, Theuns Heydenrych <Theuns@softsim.co.za> wrote:
> I did read through the source code to get a feeling where to start.
> As far as I can figure out , I have to use the function GTIFGetDefn to

> get a definition structure back with the information , but the 
> function obviously requires a handle to the Geotiff file.
> This handle can be obtained from using the GTIFNew Function.

Theuns,

You are digging into too low a level.  Normally you would call
GetProjectionRef() on the GDALDataset to get the coordinate system
information (expressed in OGC Well Known Text), and
GetGeoTransform() to get the affine transformation between pixel/line
and georeferenced coordinates.

You aren't supposed to be calling any of the GTIF functions directly.

If you need detailed and exact information about the GeoTIFF as the
original geotiff tags then you should likely be using libgeotiff
directly.

> Disclaimer:
> The information contained in this communication is private and 
> confidential and is intended solely for use by the
individual/individuals or entity to
> whom it is addressed.  Kindly notify the sender immediately by
e-mail if
> you have received this communication by mistake and delete this e-mail

> from your system.  Any unauthorized use or interception of this 
> communication, or the review, retransmission, dissemination or other 
> use of, or taking any action in reliance upon the contents, by 
> individuals or entities other than those intended, is strongly
prohibited.

Such a disclaimer is pretty lame on a public mailing list.  I would
encourage you to pass on to your management that it makes your
organization look ... disfunctional.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Thu Oct 13 12:28:57 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Extracting Geo Info From GeoTiff's
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD4A6@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD4A6@ptolemy.topozone.com>
Message-ID: <434E8B49.5010802@gov.yk.ca>

> Concerning such "confidential" disclaimers, I have been advised by
> attorneys that if one labels EVERYTHING "confidential" but you don't
> treat it as such, you are putting your REALLY confidential material at
> significant risk.  

Ed, Frank, thank you for these words. I see these boiler plate style 
legal disclaimers appearing more and more often and it's good to have 
some articulate sentences to rebutt with. :)

-matt


From mateusz at loskot.net  Thu Oct 13 13:37:48 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:48 2007
Subject: Hi Frank,Re: [Gdal-dev] Geographic Transformer
In-Reply-To: <434DE835.4030201@videotron.ca>
References: <40529.127.0.0.1.1129110007.squirrel@loskot.net>	<931f8ea90510120625n3fb9d724taf6b6267dbb4549a@mail.gmail.com>	<434D7541.6060001@loskot.net>	<20051012212316.GD2189@vishnu.tridity.org>
	<434DE835.4030201@videotron.ca>
Message-ID: <434E9B6C.9060706@loskot.net>

Mario Beauchamp napisa?(a):
> Schuyler Erle wrote:
> 
>> * On 12-Oct-2005 at  1:46PM PDT, Mateusz ??oskot said:
>> 
>>>> The particular hole I would love to fill in OpenEV + GDAL is
>>>> the ability to collect ground control points and a
>>>> reprojection/warping GUI in OpenEV.
>>> 
>>> QGIS plugin provides such feature.
>> 
>> Last I checked, it only provided linear warping, and the user 
>> interface needed a bit of work. But it's definitely a place where a
>>  well-meaning and industrious GDAL hacker could make a substantial 
>> contribution to the community.
> 
> 
> Was working on that for a while... have a skeleton GUI for
> reprojection/warping in OpenEV. But other priorities swamped me :) --

Sounds interesting, but currently I have a lot of time to help. I'm 
sorry :-(

Cheers

-- 
Mateusz ?oskot
http://mateusz.loskot.net

From dylan at iici.no-ip.org  Thu Oct 13 13:55:44 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] compile error GDAL 1.3.0 [solved]
In-Reply-To: <ba6f52040510062205j762e4543r@mail.gmail.com>
References: <200510051511.14285.dylan@iici.no-ip.org>
	<200510061141.32654.dylan@iici.no-ip.org>
	<ba6f52040510062205j762e4543r@mail.gmail.com>
Message-ID: <200510131055.44417.dylan@iici.no-ip.org>

On Thursday 06 October 2005 10:05 pm, BABA Yoshihiko wrote:
> Hi Dylan
>
> 2005/10/7, Dylan Beaudette <dylan@iici.no-ip.org>:
>
> ...
>
> > I get the error:
> > --------------
> > gcore/gdal_misc.cpp:1308: error: `OGRSpatialReference' undeclared (first
> > use this function)
> > gcore/gdal_misc.cpp:1308: error: (Each undeclared identifier is reported
> > only once for each function it appears in.)
> > gcore/gdal_misc.cpp:1308: error: syntax error before `,' token
> > gcore/gdal_misc.cpp:1311: error: `oSRS' undeclared (first use this
> > function) gcore/gdal_misc.cpp:1312: error: `oSRSGeogCS' undeclared (first
> > use this function)
> > ----------------
>
> Just a quick guess.
>
> Your first post would happen if the header file of older version or of
> another app were in your include directory. I got similar errors when
> updated from 1.2.6 to 1.3.0. Could this be the cause?
>
> --
> BABA Yoshihiko
> GDAL maintainer for Fink/MacOSX

Thanks for all the help to those who responded. Apparently, when we instructed 
the configure script to use external libraries for tiff,jpeg,png,etc the 
compile worked just fine... not sure why.

Thanks,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From steveb at bundaberg.qld.gov.au  Thu Oct 13 18:32:06 2005
From: steveb at bundaberg.qld.gov.au (Steven Bowden)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Having problems with gdaladdo
Message-ID: <200510140832.07052.steveb@bundaberg.qld.gov.au>

Hi List,

I am relatively new to using gdal to process my orthophotos.  I am using 
mapserver to publish the orthos in a web app.

I am trying to use gdaladdo to create the overviews for the tif files but I am 
getting some strange results in the tif files after I have created the 
overviews.  The second last overview is corrupted and the last/smallest 
overview always has a yellow square in the bottom right right hand corner of 
the image.

I am using gdal 1.3.1 and gd 2.0.33.

The source tif files that I am using are uncompressed non-GeoTiff files so I 
have created a .wld file so that gdal can create a geotiff.
Here is the gdal-info results for  the source file:
Driver: GTiff/GeoTIFF
Size is 1436, 3083
Coordinate System is `'
Origin = (428440.494370,7242335.759860)
Pixel Size = (0.15000000,-0.15000000)
Corner Coordinates:
Upper Left  (  428440.494, 7242335.760)
Lower Left  (  428440.494, 7241873.310)
Upper Right (  428655.894, 7242335.760)
Lower Right (  428655.894, 7241873.310)
Center      (  428548.194, 7242104.535)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

We also use a commercial GIS product called GenaMap and here is what it 
reports on the source image:
Image name  : img27-2.tif
Format      : tiff
Size        : 1436 x 3083
Depth       : 8 (unsigned)
Bands       : 3 (bip layout)
Storage     : tiles of 256 x 256
Compression : none

I then run the following gdal commands:
gdal_translate -of GTiff -a_srs EPSG:28356 -co "INTERLEAVE=PIXEL" -co 
"TILED=YES" -co "PROFILE=GeoTIFF" img27-2.tif tmpfile.tif
mv tmpfile.tif img27-2.tif
gdaladdo -r average img27-2.tif 2 4 6 8 10 12 16

The results of the gdal-info now show:
Driver: GTiff/GeoTIFF
Size is 1436, 3083
Coordinate System is:
PROJCS["GDA94 / MGA zone 56",
    GEOGCS["GDA94",
        DATUM["Geocentric_Datum_of_Australia_1994",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6283"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4283"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",153],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","28356"]]
Origin = (428440.494370,7242335.759860)
Pixel Size = (0.15000000,-0.15000000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  428440.494, 7242335.760) (152d17'28.52"E, 24d55'57.13"S)
Lower Left  (  428440.494, 7241873.310) (152d17'28.43"E, 24d56'12.17"S)
Upper Right (  428655.894, 7242335.760) (152d17'36.20"E, 24d55'57.17"S)
Lower Right (  428655.894, 7241873.310) (152d17'36.11"E, 24d56'12.20"S)
Center      (  428548.194, 7242104.535) (152d17'32.31"E, 24d56'4.67"S)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 718x1542, 359x771, 240x514, 180x386, 144x309, 120x257, 90x193
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 718x1542, 359x771, 240x514, 180x386, 144x309, 120x257, 90x193
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 718x1542, 359x771, 240x514, 180x386, 144x309, 120x257, 90x193

and the GenaMap results:
Image name  : img27-2.tif
Format      : tiff
Size        : 1436 x 3083
Depth       : 8 (unsigned)
Bands       : 3 (bip layout)
Storage     : tiles of 256 x 256
Compression : none

I then use tiffsplit to split out the overviews for checking and converted 
them to jpegs for the purposes of display.

As you can see the 2nd last overview (xaag.jpg) isn't complete and the last 
overview (xaah.jpg) has the yellow at the bottom of the image.  I get the 
same results even if I drop the number of overviews to 4 (2 4 8 16).

This problem isn't just related to this image, it is visible in all 100 tiles 
of my mosaic.  Could this be due to a problem with my source images?  The 
source images are viewable ok through gimp/mapserver and all other image 
viewers.  I can make the source image availabe if needs be.

Any info and advice would be greatly appreciated.
Regards
Steve
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xaag.jpg
Type: image/jpeg
Size: 8117 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051014/055d5cd6/xaag.jpg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xaah.jpg
Type: image/jpeg
Size: 6372 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051014/055d5cd6/xaah.jpg
From MChapman at sanz.com  Thu Oct 13 18:47:07 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] MrSID ESDK 5.x
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C10E@mailman.san.com>

Frank,

 

I have the MrSID ESDK 5.x and I want to link it to the Windows build of
GDAL.  Has the windows build been updated to support this version yet?
I noticed in the nmake.opt file that the define symbol said MRSID_FLAGS
=     -DMRSID_ESDK_VERSION_40 $(MRSID_FLAGS).  Can I just substitute
that with _50?

 

Best regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051013/abfa44c9/attachment.html
From warmerdam at pobox.com  Thu Oct 13 19:03:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Having problems with gdaladdo
In-Reply-To: <200510140832.07052.steveb@bundaberg.qld.gov.au>
References: <200510140832.07052.steveb@bundaberg.qld.gov.au>
Message-ID: <931f8ea90510131603r13154adex9ad7e926fd605fa9@mail.gmail.com>

On 10/13/05, Steven Bowden <steveb@bundaberg.qld.gov.au> wrote:
> I then use tiffsplit to split out the overviews for checking and converted
> them to jpegs for the purposes of display.

Steve,

Could you make the to two TIFFs produced by tiffsplit?  I would like
to look at them more closely.

I suspect there is an issue in the handling of images smaller than one
TIFF.  I would like to ensure that the problem is found in the TIFF
overviews.  If so, we will need to traceback to see where things have
gone wrong.  Download access to one of your images would be
helpful.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 13 19:12:29 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] MrSID ESDK 5.x
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C10E@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C10E@mailman.san.com>
Message-ID: <931f8ea90510131612i45f82c37g9424732d56f18ac6@mail.gmail.com>

On 10/13/05, Chapman, Martin <MChapman@sanz.com> wrote:
> I have the MrSID ESDK 5.x and I want to link it to the Windows build of
> GDAL.  Has the windows build been updated to support this version yet?  I
> noticed in the nmake.opt file that the define symbol said MRSID_FLAGS =
> -DMRSID_ESDK_VERSION_40 $(MRSID_FLAGS).  Can I just substitute that with
> _50?

Martin,

You now need to define MRSID_ESDK instead of
MRSID_ESDK_VERSION_40.   I'm not sure if there
are differences with the library.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Thu Oct 13 20:54:58 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] MrSID ESDK 5.x
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C110@mailman.san.com>

Frank,

It compiled fine, but there was one error in nmake.opt file.  On the
last line of the mrsid esdk options:

Incorrect:
MRSID_LIB =	$(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
$(MRSID_LIB)-

The - at the end of the line was giving the compiler errors.  I removed
it and then it compiled.  I hope that - wasn't needed.

Correct:
MRSID_LIB =	$(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
$(MRSID_LIB) 

Thanks for your help,
Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Thursday, October 13, 2005 5:12 PM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MrSID ESDK 5.x

On 10/13/05, Chapman, Martin <MChapman@sanz.com> wrote:
> I have the MrSID ESDK 5.x and I want to link it to the Windows build
of
> GDAL.  Has the windows build been updated to support this version yet?
I
> noticed in the nmake.opt file that the define symbol said MRSID_FLAGS
=
> -DMRSID_ESDK_VERSION_40 $(MRSID_FLAGS).  Can I just substitute that
with
> _50?

Martin,

You now need to define MRSID_ESDK instead of
MRSID_ESDK_VERSION_40.   I'm not sure if there
are differences with the library.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 13 20:57:16 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] MrSID ESDK 5.x
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C110@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C110@mailman.san.com>
Message-ID: <931f8ea90510131757lbd69b2dt5d80ef2641e4f845@mail.gmail.com>

On 10/13/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Frank,
>
> It compiled fine, but there was one error in nmake.opt file.  On the
> last line of the mrsid esdk options:
>
> Incorrect:
> MRSID_LIB =     $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
> $(MRSID_LIB)-
>
> The - at the end of the line was giving the compiler errors.  I removed
> it and then it compiled.  I hope that - wasn't needed.
>
> Correct:
> MRSID_LIB =     $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
> $(MRSID_LIB)

Martin,

The "-" was a typo, I have removed it as well as updating
the -DMRSID_ESDK thing.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Thu Oct 13 21:20:38 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] MrSID ESDK 5.x
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C111@mailman.san.com>

Frank,

Wow, mrsid is way faster now through gdal.  I can open a 1.2 GB sid file
and display it in a couple of seconds.  Great job speeding it up.  Did
you change anything?

Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Thursday, October 13, 2005 6:57 PM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MrSID ESDK 5.x

On 10/13/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Frank,
>
> It compiled fine, but there was one error in nmake.opt file.  On the
> last line of the mrsid esdk options:
>
> Incorrect:
> MRSID_LIB =     $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
> $(MRSID_LIB)-
>
> The - at the end of the line was giving the compiler errors.  I
removed
> it and then it compiled.  I hope that - wasn't needed.
>
> Correct:
> MRSID_LIB =     $(MRSID_DIR)\lib\Release_md\lti_esdk_dll.lib
> $(MRSID_LIB)

Martin,

The "-" was a typo, I have removed it as well as updating
the -DMRSID_ESDK thing.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Fri Oct 14 03:22:53 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Improving postgresql performance by using COPY 
Message-ID: <434F5CCD.9090801@interserv.com>

Hi everyone,

I've found that loading a lot of data into Postgresql/PostGIS is a bit 
on the slow side.  After some investigation, it turns out that using 
Postgresql's COPY function is significantly faster than INSERT.

It turns out that libq, which OGR uses, provides API support for COPY, 
So as an experiment I updated the OGR Postgresql driver to use it (its 
added functionality, it does not change the current functionality).  As 
a test case, I loaded the Tiger 2004 data for the state of Colorado. 
Timings on my WinXP IBM thinkpad are:

* 60 minutes to load using INSERT.
* 20 minutes to load using COPY.

I've also noticed a lot of activity in the postgresql groups in the last 
few months about patches that make COPY significantly faster, so 
hopefully in future release this difference becomes even more pronounced.

Anyway, as a comparison, loading the data from a text postgresql dump 
file, which also uses COPY, takes 12 minutes - so that sets a the 
minimum load time for this data using my setup.

Due to the great speed increase, I'd like to propose adding support for 
COPY to the OGR postgresql driver.

Of course, there are some technical issues that need to be discussed 
first though.


1.  Start/End Copy

You have to tell Postgresql you are running a copy command before you 
start, then you copy each feature, and then you tell Postgresql that you 
are done.  Right now, the ogr2ogr translate feature doesn't provide 
hooks for doing that.  ogr2ogr does do something similar though - it 
call startransaction / endtransaction from the translate method when 
starting / ending a data load.

What I did for my prototype was implement two new methods onOGRLayer - 
StartTranslation and EndTranslation.  In the general case they do 
nothing, in the Postgresql they setup the COPY commands if a user has 
requested that (see discussion below).


2.  Transactions

COPY runs in one big transaction.  While running COPY you cannot run 
other SQL commands (like begin/commit).  However, OGR automatically 
commits every 200 transactions unless you specify otherwise using the 
undocumented ogr2ogr -tg parameter and set it to -1.  However, that's 
obviously an ugly hack.


Proposal

It seems to me there is a concept of translation options that depends on 
the destination data source.  In the case of Postgresql, you may wish to 
specify bulk loading of data using COPY or you may prefer using INSERT 
if you have a small amount of data.

I think transaction grouping (i.e., the -tg parameter) is similar - it 
applies only to some data sources, and effects how the translation 
occurs.  So, I would propose a generic solution which would be 
implemented by adding a -lto option to ogr2ogr which would stand for 
'layer specific translation options' and then folding the -tg option 
into it.  To make this more concrete:

-f PostgreSQL -lto bulk_load=true tg=0 PG:"dbname=test user=postgres" 
C:\temp\tiger2004fe\CO

Then I would then update ogr2ogr to call StartTranslation / 
EndTranslation in the translate method.  I would also, and this might be 
controversial, remove the StartTransaction/EndTransaction calls from the 
the translate method.  My reasoning is that these are datasource 
specific, and specific for any particular data loading run, and 
therefore should be called from StartTranslation/EndTranslation methods 
where applicable.

Anyway, what I'm trying to achieve it to provide generic pre- and post- 
processing hooks that make it easier to do things like what I'm trying 
with the Postgresql driver.

The main argument I see against this is that drivers would have to 
maintain a bit more state (the -lto options).  For example, in 
Postgresql, the driver will take different actions when CreateFeature is 
called depending on whether COPY or INSERT should be called.  Thus in 
the StartTranslation method it would have to set a flag and do some 
pre-processing, and then in the EndTranslation method perform the proper 
cleanup.  Maintaining the state could be avoided by also passing the 
-lto options to CreateFeature if we wanted to go down that route. 
Anyway, I think that transactions are similar in concept to this so that 
boundary has already been crossed.

Note that these changes are all backwards compatible and will not break 
existing code.


3.  EWKB PostGIS Format

The last issue is that loading data via COPY requires putting geometry 
in the HEX encoded EWKB format that PostGis uses.  Unfortunately that 
EWKB format is different than what OGR uses.  The PostGIS format 
includes support for embedding a SRS and a  M Value.  Thus I had to 
create a OGR EWKB format, then pick it apart to add the SRS, then HEX 
encode it.  All doable, but it would be nice if OGR and PostGIS were in 
line with each other.  Any chance of that happening?

Interested in hearing feedback on this proposal. I've attached a patch 
that implements most of what I describe above.  Note I would not 
consider this a "final" patch ready for committing (although it 
successfully loads the Tiger data) - its just to show what I have in mind.

Thanks,

Charlie


----------------------------------------------

Index: ogr/ogr2ogr.cpp
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/ogr/ogr2ogr.cpp,v
retrieving revision 1.28
diff -u -w -b -r1.28 ogr2ogr.cpp
--- ogr/ogr2ogr.cpp	14 Apr 2005 14:20:24 -0000	1.28
+++ ogr/ogr2ogr.cpp	13 Oct 2005 06:46:32 -0000
@@ -126,6 +126,7 @@
                             OGRLayer * poSrcLayer,
                             OGRDataSource *poDstDS,
                             char ** papszLSCO,
+                           char ** papszLTO,
                             const char *pszNewLayerName,
                             int bTransform,
                             OGRSpatialReference *poOutputSRS,
@@ -149,7 +150,7 @@
      const char  *pszDataSource = NULL;
      const char  *pszDestDataSource = NULL;
      char        **papszLayers = NULL;
-    char        **papszDSCO = NULL, **papszLCO = NULL;
+    char        **papszDSCO = NULL, **papszLCO = NULL, **papszLTO = NULL;
      int         bTransform = FALSE;
      int         bAppend = FALSE, bUpdate = FALSE;
      const char  *pszOutputSRSDef = NULL;
@@ -186,6 +187,10 @@
          {
              papszLCO = CSLAddString(papszLCO, papszArgv[++iArg] );
          }
+        else if( EQUAL(papszArgv[iArg],"-lto") && iArg < nArgc-1 )
+        {
+            papszLTO = CSLAddString(papszLTO, papszArgv[++iArg] );
+        }
          else if( EQUAL(papszArgv[iArg],"-preserve_fid") )
          {
              bPreserveFID = TRUE;
@@ -456,7 +461,7 @@

          if( poResultSet != NULL )
          {
-            if( !TranslateLayer( poDS, poResultSet, poODS, papszLCO,
+            if( !TranslateLayer( poDS, poResultSet, poODS, papszLCO, 
papszLTO,
                                   pszNewLayerName, bTransform, poOutputSRS,
                                   poSourceSRS, papszSelFields, bAppend, 
eGType))
              {
@@ -496,7 +501,7 @@
              if( poSpatialFilter != NULL )
                  poLayer->SetSpatialFilter( poSpatialFilter );

-            if( !TranslateLayer( poDS, poLayer, poODS, papszLCO,
+            if( !TranslateLayer( poDS, poLayer, poODS, papszLCO, papszLTO,
                                   pszNewLayerName, bTransform, poOutputSRS,
                                   poSourceSRS, papszSelFields, bAppend, 
eGType)
                  && !bSkipFailures )
@@ -543,6 +548,7 @@
              "               [[-dsco NAME=VALUE] ...] 
dst_datasource_name\n"
              "               src_datasource_name\n"
              "               [-lco NAME=VALUE] [-nln name] [-nlt type] 
layer [layer ...]]\n"
+            "               [-lto NAME=VALUE]\n"
              "\n"
              " -f format_name: output file format name, possible values 
are:\n");

@@ -564,6 +570,7 @@
              " -spat xmin ymin xmax ymax: spatial query extents\n"
              " -dsco NAME=VALUE: Dataset creation option (format 
specific)\n"
              " -lco  NAME=VALUE: Layer creation option (format specific)\n"
+            " -lto  NAME=VALUE: Layer translation options (format 
specific)\n"
              " -nln name: Assign an alternate name to the new layer\n"
              " -nlt type: Force a geometry type for new layer.  One of 
NONE, GEOMETRY,\n"
              "      POINT, LINESTRING, POLYGON, GEOMETRYCOLLECTION, 
MULTIPOINT, MULTILINE,\n"
@@ -589,6 +596,7 @@
                             OGRLayer * poSrcLayer,
                             OGRDataSource *poDstDS,
                             char **papszLCO,
+                           char **papszLTO,
                             const char *pszNewLayerName,
                             int bTransform,
                             OGRSpatialReference *poOutputSRS,
@@ -742,6 +750,8 @@
      if( nGroupTransactions )
          poDstLayer->StartTransaction();

+    poDstLayer->StartTranslation(papszLTO);
+
      while( TRUE )
      {
          OGRFeature      *poDstFeature = NULL;
@@ -772,6 +782,8 @@

          if( poDstFeature->SetFrom( poFeature, TRUE ) != OGRERR_NONE )
          {
+				poDstLayer->EndTranslation();
+
              if( nGroupTransactions )
                  poDstLayer->CommitTransaction();

@@ -792,6 +804,8 @@
              eErr = poDstFeature->GetGeometryRef()->transform( poCT );
              if( eErr != OGRERR_NONE )
              {
+                poDstLayer->EndTranslation();
+
                  if( nGroupTransactions )
                      poDstLayer->CommitTransaction();

@@ -826,6 +840,8 @@
          if( poDstLayer->CreateFeature( poDstFeature ) != OGRERR_NONE
              && !bSkipFailures )
          {
+				poDstLayer->EndTranslation();
+
              if( nGroupTransactions )
                  poDstLayer->RollbackTransaction();

@@ -836,6 +852,8 @@
          OGRFeature::DestroyFeature( poDstFeature );
      }

+    poDstLayer->EndTranslation(papszLTO);
+
      if( nGroupTransactions )
          poDstLayer->CommitTransaction();

Index: ogr/ogrsf_frmts/generic/ogrlayer.cpp
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/ogr/ogrsf_frmts/generic/ogrlayer.cpp,v
retrieving revision 1.24
diff -u -w -b -r1.24 ogrlayer.cpp
--- ogr/ogrsf_frmts/generic/ogrlayer.cpp	22 Feb 2005 12:47:47 -0000	1.24
+++ ogr/ogrsf_frmts/generic/ogrlayer.cpp	13 Oct 2005 00:10:08 -0000
@@ -525,6 +525,7 @@
                                                 bApproxOK );
  }

+
  /************************************************************************/
  /*                          StartTransaction()                          */
  /************************************************************************/
@@ -619,6 +620,17 @@
  /*                          GetSpatialFilter()                          */
  /************************************************************************/

+OGRErr OGRLayer::StartTranslation(char ** papszOptions )
+{
+    return OGRERR_NONE;
+}
+
+OGRErr OGRLayer::EndTranslation(char ** papszOptions )
+{
+    return OGRERR_NONE;
+}
+
+
  OGRGeometry *OGRLayer::GetSpatialFilter()

  {
Index: ogr/ogrsf_frmts/pg/ogrpglayer.cpp
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/ogr/ogrsf_frmts/pg/ogrpglayer.cpp,v
retrieving revision 1.22
diff -u -w -b -r1.22 ogrpglayer.cpp
--- ogr/ogrsf_frmts/pg/ogrpglayer.cpp	30 Sep 2005 19:11:16 -0000	1.22
+++ ogr/ogrsf_frmts/pg/ogrpglayer.cpp	14 Oct 2005 00:45:30 -0000
@@ -115,6 +115,12 @@
  #define INV_READ                0x00040000
  #endif

+/* Flags for creating WKB format for PostGIS */
+#define WKBZOFFSET 0x80000000
+#define WKBMOFFSET 0x40000000
+#define WKBSRIDFLAG 0x20000000
+#define WKBBBOXFLAG 0x10000000
+
  /************************************************************************/
  /*                           OGRPGLayer()                               */
  /************************************************************************/
@@ -561,6 +567,84 @@
  }

  /************************************************************************/
+/*                           GeometryToHex()                            */
+/************************************************************************/
+void OGRPGLayer::ByteToHex( GByte *pabyData, char *pszBuf, int count )
+{
+    const char* hex = "0123456789ABCDEF";

+

+    for( int i = 0; i < count; i++ )
+    {
+        GByte byte = pabyData[i];
+        pszBuf[i*2] = hex[byte >> 4];

+        pszBuf[i*2+1] = hex[byte & 0xF];

+    }
+}
+
+
+char *OGRPGLayer::GeometryToHex( OGRGeometry * poGeometry, int nSRSId )
+{
+    GByte       *pabyWKB;
+    char        *pszTextBuf;
+    char        *pszTextBufCurrent;
+
+    int nWkbSize = poGeometry->WkbSize();
+    pabyWKB = (GByte *) CPLMalloc(nWkbSize);
+
+    if( poGeometry->exportToWkb( wkbNDR, pabyWKB ) != OGRERR_NONE )
+    {
+        CPLFree( pabyWKB );
+        return CPLStrdup("");
+    }
+
+    /* When converting to hex, each byte takes 2 hex characters.  In 
addition
+       we add in 8 characters to represent the SRID integer in hex, and
+       one for a null terminator */
+
+    int pszSize = nWkbSize*2 + 8 + 1;
+    pszTextBuf = (char *) CPLMalloc(pszSize);
+    pszTextBufCurrent = pszTextBuf;
+
+    /* Copy the 1st byte which is the endianess flag. */
+    ByteToHex(pabyWKB, pszTextBuf, 1);
+    pszTextBufCurrent += 2;
+
+    /* Next, get the geom type which is bytes 2 through 5 */
+    GUInt32 geomType = (GUInt32)(*(pabyWKB+1));
+
+    /* Now add the SRID flag if an SRID is provided */
+    if (nSRSId != -1)
+    {
+        /* Change the flag to wkbNDR (little) endianess */
+        GUInt32 nGSrsFlag = CPL_LSBWORD32( WKBSRIDFLAG );
+        /* Apply the flag */
+        geomType = geomType | nGSrsFlag;
+    }
+
+    /* Now write the geom type which is 4 bytes */
+    ByteToHex((GByte*)&geomType, pszTextBufCurrent, 4);
+    pszTextBufCurrent += 8;
+
+    /* Now include SRID if provided */
+    if (nSRSId != -1)
+    {
+        /* Force the srsid to wkbNDR (little) endianess */
+        GUInt32 nGSRSId = CPL_LSBWORD32( nSRSId );
+        ByteToHex((GByte*) &nGSRSId, pszTextBufCurrent, sizeof(nGSRSId));
+        pszTextBufCurrent += 8;
+    }
+
+    /* Copy the rest of the data over - subtract
+       5 since we already copied 5 bytes above */
+    ByteToHex(pabyWKB + 5, pszTextBufCurrent, nWkbSize - 5);
+
+    CPLFree( pabyWKB );
+
+    return pszTextBuf;
+}
+
+
+/************************************************************************/
  /*                          BYTEAToGeometry()                           */
  /************************************************************************/

Index: ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp
===================================================================
RCS file: 
/cvs/maptools/cvsroot/gdal/ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp,v
retrieving revision 1.37
diff -u -w -b -r1.37 ogrpgtablelayer.cpp
--- ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp	26 Sep 2005 04:37:17 -0000	1.37
+++ ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp	14 Oct 2005 04:53:24 -0000
@@ -730,8 +730,215 @@
  /************************************************************************/
  /*                           CreateFeature()                            */
  /************************************************************************/
-
  OGRErr OGRPGTableLayer::CreateFeature( OGRFeature *poFeature )
+{
+	if (bBulkLoad)
+	{
+		return CreateFeatureViaCopy( poFeature );
+	}
+	else
+	{
+		return CreateFeatureViaInsert( poFeature );
+	}
+}
+
+OGRErr OGRPGTableLayer::CreateFeatureViaCopy( OGRFeature *poFeature )
+{
+    int nCommandBufSize = 4000;
+
+    /* First process geometry */
+    OGRGeometry *poGeometry = (OGRGeometry *) poFeature->GetGeometryRef();
+
+    char *pszGeom = NULL;
+    if ( poGeometry )
+    {
+        poGeometry->closeRings();
+        poGeometry->setCoordinateDimension( nCoordDimension );
+
+        pszGeom = GeometryToHex( poGeometry, nSRSId );
+        nCommandBufSize = nCommandBufSize + strlen(pszGeom);
+    }
+
+    char *pszCommand = (char *) CPLMalloc(nCommandBufSize);
+
+    if ( poGeometry )
+    {
+        sprintf( pszCommand, "%s", pszGeom);
+        CPLFree( pszGeom );
+    }
+    else
+    {
+        sprintf( pszCommand, "\\N");
+    }
+    sprintf( pszCommand, "\\N");
+    strcat( pszCommand, "\t" );
+
+
+    /* Next process the field id column */
+    if( bHasFid && poFeatureDefn->GetFieldIndex( pszFIDColumn ) != -1 )
+    {
+        /* Set the FID */
+        if( poFeature->GetFID() != OGRNullFID )
+        {
+            sprintf( pszCommand + strlen(pszCommand), "%ld ", 
poFeature->GetFID());
+        }
+        else
+	    {
+	        strcat( pszCommand, "\\N" );
+        }
+
+        strcat( pszCommand, "\t" );
+    }
+
+
+    /* Now process the remaining fields */
+    int nOffset = strlen(pszCommand);
+
+    int nFieldCount = poFeatureDefn->GetFieldCount();
+    for( int i = 0; i < nFieldCount;  i++ )
+    {
+        const char *pszStrValue = poFeature->GetFieldAsString(i);
+        char *pszNeedToFree = NULL;
+
+        if( !poFeature->IsFieldSet( i ) )
+        {
+            strcat( pszCommand, "\\N" );
+
+            if( i < nFieldCount - 1 )
+                strcat( pszCommand, "\t" );
+
+            continue;
+        }
+
+        // We need special formatting for integer list values.
+        if( poFeatureDefn->GetFieldDefn(i)->GetType() == OFTIntegerList )
+        {
+            int nCount, nOff = 0, j;
+            const int *panItems = 
poFeature->GetFieldAsIntegerList(i,&nCount);
+
+            pszNeedToFree = (char *) CPLMalloc(nCount * 13 + 10);
+            strcpy( pszNeedToFree, "{" );
+            for( j = 0; j < nCount; j++ )
+            {
+                if( j != 0 )
+                    strcat( pszNeedToFree+nOff, "," );
+
+                nOff += strlen(pszNeedToFree+nOff);
+                sprintf( pszNeedToFree+nOff, "%d", panItems[j] );
+            }
+            strcat( pszNeedToFree+nOff, "}" );
+            pszStrValue = pszNeedToFree;
+        }
+
+        // We need special formatting for real list values.
+        if( poFeatureDefn->GetFieldDefn(i)->GetType() == OFTRealList )
+        {
+            int nCount, nOff = 0, j;
+            const double *padfItems 
=poFeature->GetFieldAsDoubleList(i,&nCount);
+
+            pszNeedToFree = (char *) CPLMalloc(nCount * 40 + 10);
+            strcpy( pszNeedToFree, "{" );
+            for( j = 0; j < nCount; j++ )
+            {
+                if( j != 0 )
+                    strcat( pszNeedToFree+nOff, "," );
+
+                nOff += strlen(pszNeedToFree+nOff);
+                sprintf( pszNeedToFree+nOff, "%.16g", padfItems[j] );
+            }
+            strcat( pszNeedToFree+nOff, "}" );
+            pszStrValue = pszNeedToFree;
+        }
+
+        // Grow the command buffer?
+        if( strlen(pszStrValue) + strlen(pszCommand+nOffset) + nOffset
+            > nCommandBufSize-50 )
+        {
+            nCommandBufSize = strlen(pszCommand) + strlen(pszStrValue) 
+ 10000;
+            pszCommand = (char *) CPLRealloc(pszCommand, nCommandBufSize );
+        }
+
+        if( poFeatureDefn->GetFieldDefn(i)->GetType() != OFTInteger
+                 && poFeatureDefn->GetFieldDefn(i)->GetType() != OFTReal )
+        {
+            int         iChar;
+
+            nOffset += strlen(pszCommand+nOffset);
+
+            for( iChar = 0; pszStrValue[iChar] != '\0'; iChar++ )
+            {
+                if( poFeatureDefn->GetFieldDefn(i)->GetType() != 
OFTIntegerList
+                    && poFeatureDefn->GetFieldDefn(i)->GetType() != 
OFTRealList
+                    && poFeatureDefn->GetFieldDefn(i)->GetWidth() > 0
+                    && iChar == 
poFeatureDefn->GetFieldDefn(i)->GetWidth() )
+                {
+                    CPLDebug( "PG",
+                              "Truncated %s field value, it was too long.",
+ 
poFeatureDefn->GetFieldDefn(i)->GetNameRef() );
+                    break;
+                }
+
+                /* Escape embedded \, \t, \n, \r since they will cause COPY
+                   to misinterpret a line of text and thus abort */
+                if( pszStrValue[iChar] == '\\' ||
+                    pszStrValue[iChar] == '\t' ||
+                    pszStrValue[iChar] == '\r' ||
+                    pszStrValue[iChar] == '\n'   )
+                {
+                    pszCommand[nOffset++] = '\\';
+                }
+
+                pszCommand[nOffset++] = pszStrValue[iChar];
+            }
+
+            pszCommand[nOffset] = '\0';
+//            strcat( pszCommand+nOffset, "'" );
+        }
+        else
+        {
+            strcat( pszCommand+nOffset, pszStrValue );
+        }
+
+        if( pszNeedToFree )
+            CPLFree( pszNeedToFree );
+
+        if( i < nFieldCount - 1 )
+            strcat( pszCommand, "\t" );
+    }
+
+    /* Add end of line marker */
+    strcat( pszCommand, "\n" );
+
+    /* ------------------------------------------------------------ */
+    /*      Execute the copy.                                       */
+    /* ------------------------------------------------------------ */
+    PGconn *hPGConn = poDS->GetPGConn();
+    int copyResult = PQputCopyData(hPGConn, pszCommand, 
strlen(pszCommand));
+
+    OGRErr result = OGRERR_NONE;
+
+    switch (copyResult)
+	{
+    case 0:
+        CPLDebug( "OGR_PG", "PQexec(%s)\n", pszCommand );
+		CPLError( CE_Failure, CPLE_AppDefined, "Writing COPY data blocked.");
+        result = OGRERR_FAILURE;
+        break;
+    case -1:
+        CPLDebug( "OGR_PG", "PQexec(%s)\n", pszCommand );
+		CPLError( CE_Failure, CPLE_AppDefined, "%s", PQerrorMessage(hPGConn) );
+        result = OGRERR_FAILURE;
+        break;
+	}
+
+    /* Free the buffer we allocated before returning */
+    CPLFree( pszCommand );
+
+    return result;
+}
+
+
+OGRErr OGRPGTableLayer::CreateFeatureViaInsert( OGRFeature *poFeature )

  {
      PGconn              *hPGConn = poDS->GetPGConn();
@@ -1013,6 +1220,7 @@
  }


+
  /************************************************************************/
  /*                           TestCapability()                           */
  /************************************************************************/
@@ -1386,3 +1594,126 @@
      return OGRLayer::GetExtent( psExtent, bForce );
  }

+
+char *OGRPGTableLayer::BuildCopyFields()
+{
+    int         i, nSize;
+    char        *pszFieldList;
+
+    nSize = 25;
+    if( pszGeomColumn )
+        nSize += strlen(pszGeomColumn);
+
+    if( bHasFid && poFeatureDefn->GetFieldIndex( pszFIDColumn ) != -1 )
+        nSize += strlen(pszFIDColumn);
+
+    for( i = 0; i < poFeatureDefn->GetFieldCount(); i++ )
+        nSize += strlen(poFeatureDefn->GetFieldDefn(i)->GetNameRef()) + 4;
+
+    pszFieldList = (char *) CPLMalloc(nSize);
+    pszFieldList[0] = '\0';
+
+    if( bHasFid && poFeatureDefn->GetFieldIndex( pszFIDColumn ) != -1 )
+        sprintf( pszFieldList, "\"%s\"", pszFIDColumn );
+
+    if( pszGeomColumn )
+    {
+        if( strlen(pszFieldList) > 0 )
+            strcat( pszFieldList, ", " );
+
+        sprintf( pszFieldList+strlen(pszFieldList),
+                "\"%s\"", pszGeomColumn );
+    }
+
+    for( i = 0; i < poFeatureDefn->GetFieldCount(); i++ )
+    {
+        const char *pszName = poFeatureDefn->GetFieldDefn(i)->GetNameRef();
+
+        if( strlen(pszFieldList) > 0 )
+            strcat( pszFieldList, ", " );
+
+        strcat( pszFieldList, "\"" );
+        strcat( pszFieldList, pszName );
+        strcat( pszFieldList, "\"" );
+    }
+
+    CPLAssert( (int) strlen(pszFieldList) < nSize );
+
+    return pszFieldList;
+}
+
+
+OGRErr OGRPGTableLayer::StartTranslation(char ** papszOptions )
+{
+    bBulkLoad = CSLFetchBoolean(papszOptions, "BULK_LOAD", FALSE);
+
+    if (bBulkLoad)
+    {
+	    char *pszFields = BuildCopyFields();
+
+		int size = strlen(pszFields) +  strlen(poFeatureDefn->GetName()) + 100;
+        char *pszCommand = (char *) CPLMalloc(size);
+
+        sprintf( pszCommand,
+                 "COPY \"%s\" (%s) FROM STDIN;",
+                 poFeatureDefn->GetName(), pszFields );
+
+        CPLFree( pszFields );
+
+        PGconn *hPGConn = poDS->GetPGConn();
+        PGresult *hResult = PQexec(hPGConn, pszCommand);
+
+		if ( !hResult || (PQresultStatus(hResult) != PGRES_COPY_IN))

+		{
+			CPLError( CE_Failure, CPLE_AppDefined,
+                  "%s", PQerrorMessage(hPGConn) );
+            CPLFree( pszCommand );
+            return OGRERR_FAILURE;
+        }
+		else
+		{
+			PQclear( hResult );
+		}
+
+        CPLFree( pszCommand );
+	}
+    return OGRERR_NONE;
+}
+
+OGRErr OGRPGTableLayer::EndTranslation(char ** papszOptions )
+{
+    OGRErr result = OGRERR_NONE;
+
+	if (bBulkLoad)
+	{
+        PGconn *hPGConn = poDS->GetPGConn();
+        int result = PQputCopyEnd(hPGConn, NULL);
+
+		switch (result)
+		{
+		case 0:
+			CPLError( CE_Failure, CPLE_AppDefined, "Writing COPY data blocked.");
+         return OGRERR_FAILURE;
+		case -1:
+			CPLError( CE_Failure, CPLE_AppDefined, "%s", PQerrorMessage(hPGConn) );
+            return OGRERR_FAILURE;
+        }
+
+        /* Get the final result of the copy */

+ 		PGresult * hResult = PQgetResult( hPGConn );

+

+        if( PQresultStatus(hResult) != PGRES_COMMAND_OK )
+        {
+            CPLError( CE_Failure, CPLE_AppDefined,
+                      "COPY statement failed.\n%s",
+                      PQerrorMessage(hPGConn) );
+
+            result = OGRERR_FAILURE;
+        }
+
+        if (hResult)
+            PQclear(hResult);
+
+      return result;
+	}
+}
Index: ogr/ogrsf_frmts/pg/ogr_pg.h
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/ogr/ogrsf_frmts/pg/ogr_pg.h,v
retrieving revision 1.20
diff -u -w -b -r1.20 ogr_pg.h
--- ogr/ogrsf_frmts/pg/ogr_pg.h	6 Aug 2005 14:49:27 -0000	1.20
+++ ogr/ogrsf_frmts/pg/ogr_pg.h	13 Oct 2005 19:43:58 -0000
@@ -119,6 +119,8 @@
      char               *GeometryToBYTEA( OGRGeometry * );
      OGRGeometry        *BYTEAToGeometry( const char * );
      OGRGeometry        *HEXToGeometry( const char * );
+    void               ByteToHex( GByte *pabyData, char *pszBuf, int 
count );
+    char               *GeometryToHex( OGRGeometry * poGeometry, int 
nSRSId );
      Oid                 GeometryToOID( OGRGeometry * );
      OGRGeometry        *OIDToGeometry( Oid );

@@ -185,6 +187,10 @@
      int                 bLaunderColumnNames;
      int                 bPreservePrecision;

+    bool                bBulkLoad;
+	OGRErr			    CreateFeatureViaCopy( OGRFeature *poFeature );
+	OGRErr				CreateFeatureViaInsert( OGRFeature *poFeature );
+    char                *BuildCopyFields(void);
    public:
                          OGRPGTableLayer( OGRPGDataSource *,
                                           const char * pszName,
@@ -217,6 +223,9 @@
                                  { bLaunderColumnNames = bFlag; }
      void                SetPrecisionFlag( int bFlag )
                                  { bPreservePrecision = bFlag; }
+
+    virtual OGRErr       StartTranslation(char ** papszOptions );
+    virtual OGRErr       EndTranslation(char ** papszOptions );
  };

  /************************************************************************/
Index: ogr/ogrsf_frmts/ogrsf_frmts.h
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/ogr/ogrsf_frmts/ogrsf_frmts.h,v
retrieving revision 1.53
diff -u -w -b -r1.53 ogrsf_frmts.h
--- ogr/ogrsf_frmts/ogrsf_frmts.h	5 Sep 2005 19:31:45 -0000	1.53
+++ ogr/ogrsf_frmts/ogrsf_frmts.h	12 Oct 2005 23:44:53 -0000
@@ -264,6 +264,9 @@
      virtual OGRErr       CommitTransaction();
      virtual OGRErr       RollbackTransaction();

+	 virtual OGRErr       StartTranslation(char ** papszOptions = NULL );
+	 virtual OGRErr       EndTranslation(char ** papszOptions = NULL );
+
      int                 Reference();
      int                 Dereference();
      int                 GetRefCount() const;




From warmerdam at pobox.com  Fri Oct 14 09:36:51 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Improving postgresql performance by using COPY
In-Reply-To: <434F5CCD.9090801@interserv.com>
References: <434F5CCD.9090801@interserv.com>
Message-ID: <931f8ea90510140636t2926a5aaj9eb2e3ee708af80f@mail.gmail.com>

On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
> 1.  Start/End Copy
>
> You have to tell Postgresql you are running a copy command before you
> start, then you copy each feature, and then you tell Postgresql that you
> are done.  Right now, the ogr2ogr translate feature doesn't provide
> hooks for doing that.  ogr2ogr does do something similar though - it
> call startransaction / endtransaction from the translate method when
> starting / ending a data load.
>
> What I did for my prototype was implement two new methods onOGRLayer -
> StartTranslation and EndTranslation.  In the general case they do
> nothing, in the Postgresql they setup the COPY commands if a user has
> requested that (see discussion below).

Charlie,

How important do you think it is to be able to use COPY mode to
add features to an existing table, as opposed to just using it to create
a new table?   I ask because in the Oracle world when I ran into
similar issues I used a "layer creation option" to control the loading
mode.

My preference would be to do the same for this change, as it requires
substantially less disruption to the OGR API as a whole.  The downside
is there is no way of controlling load-mode when adding features to
an existing table.

> 2.  Transactions
>
> COPY runs in one big transaction.  While running COPY you cannot run
> other SQL commands (like begin/commit).  However, OGR automatically
> commits every 200 transactions unless you specify otherwise using the
> undocumented ogr2ogr -tg parameter and set it to -1.  However, that's
> obviously an ugly hack.

As long as COPY is not the default load mode (I think INSERT should
remain the default for CreateFeature()) then I don't mind that there are
special restrictions on transactions while COPY loading features.

> 3.  EWKB PostGIS Format
>
> The last issue is that loading data via COPY requires putting geometry
> in the HEX encoded EWKB format that PostGis uses.  Unfortunately that
> EWKB format is different than what OGR uses.  The PostGIS format
> includes support for embedding a SRS and a  M Value.  Thus I had to
> create a OGR EWKB format, then pick it apart to add the SRS, then HEX
> encode it.  All doable, but it would be nice if OGR and PostGIS were in
> line with each other.  Any chance of that happening?

I am considering adding EWKB format on the OGRGeometryFactory
and related classes at some point for another client.    In the meantime
your EWKB method should be fine.

So, would you be prepared to rework your patch to just use layer
creation options to put things into the special COPY mode?   If so,
you can go ahead and commit the changes.   If not, we can discuss
the StartTranslation() / EndTranslation() and other options further.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cplist at earthlink.net  Fri Oct 14 09:46:32 2005
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Improving postgresql performance by using COPY
In-Reply-To: <931f8ea90510140636t2926a5aaj9eb2e3ee708af80f@mail.gmail.com>
Message-ID: <E1EQPtc-0004FI-00@pop-siberian.atl.sa.earthlink.net>

Hi, folks:

> How important do you think it is to be able to use COPY mode to
> add features to an existing table, as opposed to just using it to create

Sorry I'm coming into this late -- I didn't see the original msg. go by
before I hit del.  Bad me.

There is no doubt that COPY is lightening fast when compared to INSERT
statements.  But one disadvantage you have, especially when appending
incoming values to a table via ogr2ogr, is that if one row of a COPY fails,
the whole thing fails.  At least w/ INSERT statements, those that make it,
can, and those that don't simply error out.  And in previous use cases for
my work, failing was entirely OK (PK constraints), but I wanted the rest of
the operation to continue like normal.  So I wonder what it would look like
to an inexperienced user to see that a COPY failed if it were the fault of
only 1 row -- would they think the problem is in ogr since nothing went
through?  The DB?  

And I'm not sure COPYs are very robust across different DB platforms.

I absolutely vote for INSERTs to be the default.

Charlton



From cfis at interserv.com  Fri Oct 14 11:44:44 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: Improving postgresql performance by using COPY
In-Reply-To: <E1EQPtc-0004FI-00@pop-siberian.atl.sa.earthlink.net>
References: <931f8ea90510140636t2926a5aaj9eb2e3ee708af80f@mail.gmail.com>
	<E1EQPtc-0004FI-00@pop-siberian.atl.sa.earthlink.net>
Message-ID: <434FD26C.3090100@interserv.com>

Thanks for the quick feedback.

I definitely agree with both Frank and Charlton that INSERT should be 
the default mode since it is more robust.  COPY support is useful in 
cases where you are loading a lot of data - when using INSERT would take 
days to complete.  Thus to use COPY I imagine you would have to 
specifically ask for it by passing a command line parameter via ogr2ogr 
or some API.

Frank - in my case I need the COPY support to work for creating new 
tables and adding data to existing tables.  Thus I need some way of 
hooking into the start of transfer and end.  I could hijack the 
StartTransaction / EndTransaction methods, but I thought that was a bad 
idea because a) its not what they are meant for b) it would not be a 
backwards compatible change since you'd have to pass options to 
StartTransaction / EndTransaction.  That why I came up with 
StartTranslation / EndTranslation.

To minimize the impact in OGR, you could do:

transfer
{
	StartTransaction
	StartTranslation

	<process features>

	EndTranslation
	EndTransaction
}

That's actually what I did in the patch.  But I can't say I love it.

I would be very interested if you have other ideas on how to approach 
this.  I also wonder if this type of issue occurs in other data sources 
(maybe MySql or Oracle as you mentioned?).

Charlie


Charlton Purvis wrote:
> Hi, folks:
> 
>> How important do you think it is to be able to use COPY mode to
>> add features to an existing table, as opposed to just using it to create
> 
> Sorry I'm coming into this late -- I didn't see the original msg. go by
> before I hit del.  Bad me.
> 
> There is no doubt that COPY is lightening fast when compared to INSERT
> statements.  But one disadvantage you have, especially when appending
> incoming values to a table via ogr2ogr, is that if one row of a COPY fails,
> the whole thing fails.  At least w/ INSERT statements, those that make it,
> can, and those that don't simply error out.  And in previous use cases for
> my work, failing was entirely OK (PK constraints), but I wanted the rest of
> the operation to continue like normal.  So I wonder what it would look like
> to an inexperienced user to see that a COPY failed if it were the fault of
> only 1 row -- would they think the problem is in ogr since nothing went
> through?  The DB?  
> 
> And I'm not sure COPYs are very robust across different DB platforms.
> 
> I absolutely vote for INSERTs to be the default.
> 
> Charlton



From skotea at gmail.com  Fri Oct 14 11:55:07 2005
From: skotea at gmail.com (skotea@gmail.com)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] error in compiling gdal on windows xp (gifdataset.cpp)
Message-ID: <12ba1a4a0510140855m750e798di@mail.gmail.com>

hi people,

i try to compile gdal (gdal-cvs-2005.10.11) on windows xp using
Microsoft Visual C++ Toolkit 2003 and Microsoft Platform SDK...

in fact i need to modify ogr2ogr to output a sort of xml file used by
a PocketPC software using a shp file as input. that's why i was
thinking about modifying kml output option a little...

my 1st test is to see if i can compile gdal original source before
modifying anything...

but i get these errors :
C:\TEST\gdal-cvs-2005.10.11\frmts>cd gif   && nmake /NOLOGO /f makefile.vc   &&
cd ..
        cl /nologo /MD /GX /Zi /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr -I..\.
.\gcore  -I..\..\alg -Ilibungif /c gifdataset.cpp
gifdataset.cpp
gifdataset.cpp(122) : error C2375: 'EGifOpen' : redefinition; different linkage
        libungif\gif_lib.h(119) : see declaration of 'EGifOpen'
gifdataset.cpp(580) : error C2440: '=' : cannot convert from 'GifFileType *(__cd
ecl *)(void *,OutputFunc)' to 'GifFileType *'
gifdataset.cpp(580) : error C2440: '=' : cannot convert from 'GifFileType *(__cd
ecl *)(void *,OutputFunc)' to 'GifFileType *'
        There is no context in which this conversion is possible
gifdataset.cpp(580) : error C3861: 'EGifOpen': identifier not found, even with a
rgument-dependent lookup
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

can someone help ?

thanks a lot
skotea


From cfis at interserv.com  Fri Oct 14 12:24:49 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGR - Character Encodings
Message-ID: <434FDBD1.60500@interserv.com>

If you try to load the Tiger data for Guam to Postgresql, the 
entitynames table will fail.  The first line in this file is:

C0604     2000   75O      36163        Hag?t?a, GU 


Tiger data is in ISO-88519 (LATIN1), while a default connection to 
Postgresql seems to be UTF8 (at least on my machine, WindowsXP).  The 
result is this error message from Postgresql:

Invalid UNICODE byte sequence detected near byte

The same problem occurs for a lot of the data for Puerto Rico, and one 
file in Wisconsin.

The solution is both easy and hard.  The easy bit is that after 
connecting to Postgresql, OGR should call the PQsetClientEncoding 
function.  In this case:

     char* encoding = "LATIN1";
     if (PQsetClientEncoding(hPGConn, encoding) == -1)
     {
         CPLError( CE_Failure, CPLE_AppDefined,
                   "PQsetClientEncoding failed.  Encoding: %s", encoding);
         PQfinish(hPGConn);
         hPGConn = NULL;
         return FALSE;
     }


The hard bit is what character encoding to specify.  The best solution 
is that OGR would specify the encoding of each data souce it opens. 
Unfortunately, as far as I can see, OGR has no support for different 
character encodings (either telling you what they are, or working with 
multi-byte encodings).

This lead two several points.  First, is the assumed encoding always 
ISO-88519?  In that case, the Postgresql call above is correct.

Second, what happens when you want to load maps for Asian countries?  Is 
that a no-go at the moment?

Third, if OGR does support encodings, are they any plans to add this 
functionality?


Thanks,

Charlie


From warmerdam at pobox.com  Fri Oct 14 14:33:44 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGR - Character Encodings
In-Reply-To: <434FDBD1.60500@interserv.com>
References: <434FDBD1.60500@interserv.com>
Message-ID: <931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>

On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
> This lead two several points.  First, is the assumed encoding always
> ISO-88519?  In that case, the Postgresql call above is correct.

Charlie,

As you suspect, OGR is completely encoding-ignorant currently.
I would encourage you to commit the change seting the encoding to
LATIN1 for now, as I gather that is a more inclusive character set than
the default UTF8.

> Second, what happens when you want to load maps for Asian countries?  Is
> that a no-go at the moment?

OGR provides no special support for this.  In cases where double
byte text has been encountered it is treated as if it were single byte
which will presumably not work well with Postgres.

> Third, if OGR does support encodings, are they any plans to add this
> functionality?

There are no plans currently to support encoding-awareness in OGR.

/me buries his head in the sand for a couple more years...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Oct 14 14:37:18 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGR - Character Encodings
In-Reply-To: <434FDBD1.60500@interserv.com>
References: <434FDBD1.60500@interserv.com>
Message-ID: <931f8ea90510141137kdad918eob4ebef48bb7abe43@mail.gmail.com>

On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
> This lead two several points.  First, is the assumed encoding always
> ISO-88519?  In that case, the Postgresql call above is correct.

Charlie,

As you suspect, OGR is completely encoding-ignorant currently.
I would encourage you to commit the change seting the encoding to
LATIN1 for now, as I gather that is a more inclusive character set than
the default UTF8.

> Second, what happens when you want to load maps for Asian countries?  Is
> that a no-go at the moment?

OGR provides no special support for this.  In cases where double
byte text has been encountered it is treated as if it were single byte
which will presumably not work well with Postgres.

> Third, if OGR does support encodings, are they any plans to add this
> functionality?

There are no plans currently to support encoding-awareness in OGR.

/me buries his head in the sand for a couple more years...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Oct 14 14:44:40 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] error in compiling gdal on windows xp (gifdataset.cpp)
In-Reply-To: <12ba1a4a0510140855m750e798di@mail.gmail.com>
References: <12ba1a4a0510140855m750e798di@mail.gmail.com>
Message-ID: <931f8ea90510141144j1c00a891v5aca3cc73d6a7d6b@mail.gmail.com>

On 10/14/05, skotea@gmail.com <skotea@gmail.com> wrote:
> ecl *)(void *,OutputFunc)' to 'GifFileType *'
>         There is no context in which this conversion is possible
> gifdataset.cpp(580) : error C3861: 'EGifOpen': identifier not found, even with a
> rgument-dependent lookup
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
>
> can someone help ?

Skotea,

Either grab a newer CVS snap, or hand edit gifdataset.cpp and
remove the CPL_DLL in the declaration of EGifOpen().

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Fri Oct 14 14:52:30 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: OGR - Character Encodings
In-Reply-To: <931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>
References: <434FDBD1.60500@interserv.com>
	<931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>
Message-ID: <434FFE6E.9040006@interserv.com>

> As you suspect, OGR is completely encoding-ignorant currently.
> I would encourage you to commit the change seting the encoding to
> LATIN1 for now, as I gather that is a more inclusive character set than
> the default UTF8.

Actually, I would say UTF8 is more inclusive since the lower 128 match 
ASCII, but after that you can encode anything you want (of course it can 
take 2 to 6 bytes for non ASCII characters).

I'll give UTF8 a try, it should work.  If it does, that would be a 
better choice in the long run.  However, without the rest of the code 
having support for it, its kind of a moot point (I would guess any 
multibyte UTF8 characters would get chomped by the string handling code 
currently used).

>> Second, what happens when you want to load maps for Asian countries?  Is
>> that a no-go at the moment?
> 
> OGR provides no special support for this.  In cases where double
> byte text has been encountered it is treated as if it were single byte
> which will presumably not work well with Postgres.

Well, if Postgres knows what is coming it will be ok (back to the 
original issue!).

I'm more worried about all the string handling code that loops over 
pointers to chars* - I think there are places where the implicit 
assumption is that characters are always 1 byte long.  Thus I would 
guess any such string would get mangled long before you tried to post 
them to Postgresql, or any other data source for that matter.

> There are no plans currently to support encoding-awareness in OGR.
> 
> /me buries his head in the sand for a couple more years...

LOL.  I wonder how much work it would really be though.  Maybe one 
approach would be to update the core OGR string handling code to be 
encoding aware, thereby limiting the scope in the first go.

Then you could update various drivers, as the need arose, to be encoding 
aware.  And probably there are a number of datasources which just assume 
LATIN1 anyways, so you wouldn't have to touch them (out of curiosity, 
does Shape support encodings?).

Something to ponder.

Charlie

> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Oct 14 15:12:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: OGR - Character Encodings
In-Reply-To: <434FFE6E.9040006@interserv.com>
References: <434FDBD1.60500@interserv.com>
	<931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>
	<434FFE6E.9040006@interserv.com>
Message-ID: <931f8ea90510141212p5070cb72i5a592c238b48ec0c@mail.gmail.com>

On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
> > As you suspect, OGR is completely encoding-ignorant currently.
> > I would encourage you to commit the change seting the encoding to
> > LATIN1 for now, as I gather that is a more inclusive character set than
> > the default UTF8.
>
> Actually, I would say UTF8 is more inclusive since the lower 128 match
> ASCII, but after that you can encode anything you want (of course it can
> take 2 to 6 bytes for non ASCII characters).

Charlie,

Good point.  But what happens to "normal" LATIN1 characters in the
128 to 255 range with UTF8?

> I'm more worried about all the string handling code that loops over
> pointers to chars* - I think there are places where the implicit
> assumption is that characters are always 1 byte long.  Thus I would
> guess any such string would get mangled long before you tried to post
> them to Postgresql, or any other data source for that matter.

As long as string values are not being parsed, and as long as UTF8
or other encodings don't have embedded zero-bytes the strings
should get carried around everywhere just fine.  I have long depended
on this as a way around being encoding aware.  Though OGR isn't
providing any help in interpreting encoding.

> > There are no plans currently to support encoding-awareness in OGR.
> >
> > /me buries his head in the sand for a couple more years...
>
> LOL.  I wonder how much work it would really be though.  Maybe one
> approach would be to update the core OGR string handling code to be
> encoding aware, thereby limiting the scope in the first go.
>
> Then you could update various drivers, as the need arose, to be encoding
> aware.  And probably there are a number of datasources which just assume
> LATIN1 anyways, so you wouldn't have to touch them (out of curiosity,
> does Shape support encodings?).

I don't know if Shape supports encoding.  There is an encoding byte
in the .dbf headers but the ESRI Shapefile spec does not address any
details about the DBF format and features in effect.

> Something to ponder.

... or I could pretend not to have heard anything about encodings ...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Oct 14 15:23:06 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: OGR - Character Encodings
In-Reply-To: <434FFE6E.9040006@interserv.com>
References: <434FDBD1.60500@interserv.com>
	<931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>
	<434FFE6E.9040006@interserv.com>
Message-ID: <931f8ea90510141223h4291e99eif0e5b665bd9f577f@mail.gmail.com>

On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
> > As you suspect, OGR is completely encoding-ignorant currently.
> > I would encourage you to commit the change seting the encoding to
> > LATIN1 for now, as I gather that is a more inclusive character set than
> > the default UTF8.
>
> Actually, I would say UTF8 is more inclusive since the lower 128 match
> ASCII, but after that you can encode anything you want (of course it can
> take 2 to 6 bytes for non ASCII characters).

Charlie,

Good point.  But what happens to "normal" LATIN1 characters in the
128 to 255 range with UTF8?

> I'm more worried about all the string handling code that loops over
> pointers to chars* - I think there are places where the implicit
> assumption is that characters are always 1 byte long.  Thus I would
> guess any such string would get mangled long before you tried to post
> them to Postgresql, or any other data source for that matter.

As long as string values are not being parsed, and as long as UTF8
or other encodings don't have embedded zero-bytes the strings
should get carried around everywhere just fine.  I have long depended
on this as a way around being encoding aware.  Though OGR isn't
providing any help in interpreting encoding.

> > There are no plans currently to support encoding-awareness in OGR.
> >
> > /me buries his head in the sand for a couple more years...
>
> LOL.  I wonder how much work it would really be though.  Maybe one
> approach would be to update the core OGR string handling code to be
> encoding aware, thereby limiting the scope in the first go.
>
> Then you could update various drivers, as the need arose, to be encoding
> aware.  And probably there are a number of datasources which just assume
> LATIN1 anyways, so you wouldn't have to touch them (out of curiosity,
> does Shape support encodings?).

I don't know if Shape supports encoding.  There is an encoding byte
in the .dbf headers but the ESRI Shapefile spec does not address any
details about the DBF format and features in effect.

> Something to ponder.

... or I could pretend not to have heard anything about encodings ...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Fri Oct 14 20:51:28 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: OGR - Character Encodings
In-Reply-To: <931f8ea90510141223h4291e99eif0e5b665bd9f577f@mail.gmail.com>
References: <434FDBD1.60500@interserv.com>	<931f8ea90510141133s60e5d58cy8810ccae83705b2d@mail.gmail.com>	<434FFE6E.9040006@interserv.com>
	<931f8ea90510141223h4291e99eif0e5b665bd9f577f@mail.gmail.com>
Message-ID: <43505290.1020907@interserv.com>

> 
> Good point.  But what happens to "normal" LATIN1 characters in the
> 128 to 255 range with UTF8?

They are represented by 2 bytes, not 1 byte.  For more info see 
http://en.wikipedia.org/wiki/UTF8.

Thus, I'll set Postgresql to ISO-8859-1 for now, but that should 
probably be changed in the future.

Charlie



From cfis at interserv.com  Sat Oct 15 13:33:02 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Re: OGR - Character Encodings
In-Reply-To: <931f8ea90510141137kdad918eob4ebef48bb7abe43@mail.gmail.com>
References: <434FDBD1.60500@interserv.com>
	<931f8ea90510141137kdad918eob4ebef48bb7abe43@mail.gmail.com>
Message-ID: <43513D4E.4020202@interserv.com>

Thinking about this a bit more, I'm uncomfortable hard-coding postgresql 
to LATIN1.  Sure that would work for TIGER data, but what if you open a 
datasource that is in Latin2, or Latin3?

Just to be clear, what is happening is that libpq is doing automatic 
encoding conversions between the client (the ogr library) and the server 
(postgresql).  Since libq is not told otherwise, on my machine it is 
assuming the client encoding is UTF8.  That works fine for characters 1 
through 127, but fails above that.

On solution that we've discussed is for ogr to use UTF8 internally and 
then its up to each datasource to convert to/from UTF8.  I would think 
that is the better "general" solution but it would a bit of more work. 
It would also require two encoding translations - source data source to 
UTF8, UTF8 to target (although as time goes on probably everything will 
support/use UTF8 so in the end you might not have to do any translations 
at all).

Perhaps a simpler approach for the time being is simply for OGR to 
inform the destination data source what the encoding of the source data 
source is.  Thus ogr wouldn't do any encoding translations.  For the 
postgresql data source that would work fine since it will take care of 
converting the encoding as described above - it just needs to know what 
the source encoding is.

One way this could be done is implement a "GetDSEncoding" method on 
OGRDataSource which would return the encoding of a data source.  For 
TIGER, that method would return ISO-88590-1.  For other datasources, it 
could just return NULL or some such thing for "unknown" until otherwise 
implemented.

You would then need to add some sort of method on OGRDataSource like 
"SetDataEncoding" which would tell the datasource what encoding incoming 
data is in.

So something like:

pSrcDS = <open the source data source>
pDstDS = <open the destination data source>

char* pSourceEncoding = pSrcDs.GetDSEncoding;
if (pSourceEncoding )
	pDstDs.SetDataEncoding(pSourceEncoding);

Then proceed as normal.

Charlie




Frank Warmerdam wrote:
> On 10/14/05, Charlie Savage <cfis@interserv.com> wrote:
>> This lead two several points.  First, is the assumed encoding always
>> ISO-88519?  In that case, the Postgresql call above is correct.
> 
> Charlie,
> 
> As you suspect, OGR is completely encoding-ignorant currently.
> I would encourage you to commit the change seting the encoding to
> LATIN1 for now, as I gather that is a more inclusive character set than
> the default UTF8.
> 
>> Second, what happens when you want to load maps for Asian countries?  Is
>> that a no-go at the moment?
> 
> OGR provides no special support for this.  In cases where double
> byte text has been encountered it is treated as if it were single byte
> which will presumably not work well with Postgres.
> 
>> Third, if OGR does support encodings, are they any plans to add this
>> functionality?
> 
> There are no plans currently to support encoding-awareness in OGR.
> 
> /me buries his head in the sand for a couple more years...
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent



From lists at tweak.net.au  Sat Oct 15 15:00:38 2005
From: lists at tweak.net.au (Karl Palsson)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Revised patch for reading nos files
Message-ID: <200510151904.j9FJ4SWX020826@duke.maptools.org>


Ok, so only a moron would submit a diff that segfaults, and expect anyone to pay attention, so I've cleaned up my act, read some more documentation of the api available from gdal/core, and have revised my diff that adds support for reading GCPs for .NOS files from the corresponding .GEO files.

It doesn't segfault, it uses CPL* routines, instead of str* functions, it doesn't have FIXMEs in it anymore.

The patch is against the stock 1.3.1 source.

Cheers,
Karl P


> Attached is a diff against 1.3.1, that adds support for gdal to get the GCP information 
> from the .GEO files that accompany a .NOS file.
> 
> .NOS files are just like BSB files, except that instead of having a plain text header 
> section containging projection and control point information, it comes in a corresponding 
> .geo file.
> 
> The patch is pretty dirty, (gdalinfo will print out the correct information, and then 
> segfault)  mostly because I'm using the "wrong" tools to do the string manipulation.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bsb-nos-mark2.diff
Type: application/octet-stream
Size: 7392 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051015/beb650d3/bsb-nos-mark2.obj
From warmerdam at pobox.com  Sat Oct 15 15:52:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Revised patch for reading nos files
In-Reply-To: <200510151904.j9FJ4SWX020826@duke.maptools.org>
References: <200510151904.j9FJ4SWX020826@duke.maptools.org>
Message-ID: <931f8ea90510151252k7cbb805bwbf5de8e34e2df68f@mail.gmail.com>

On 10/15/05, Karl Palsson <lists@tweak.net.au> wrote:
>
> Ok, so only a moron would submit a diff that segfaults, and expect anyone to pay attention, so I've cleaned up my act, read some more documentation of the api available from gdal/core, and have revised my diff that adds support for reading GCPs for .NOS files from the corresponding .GEO files.
>
> It doesn't segfault, it uses CPL* routines, instead of str* functions, it doesn't have FIXMEs in it anymore.
>
> The patch is against the stock 1.3.1 source.

Karl,

I tried it out and it seems to work fine.  I have committed this to
CVS head.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cmichaelis at happysquirrel.com  Fri Oct 14 19:04:49 2005
From: cmichaelis at happysquirrel.com (Christopher Michaelis)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Comparing Barely-Different SpatialRef Objects with
	.IsSame
Message-ID: <43503991.9030608@happysquirrel.com>

Hi there,

I'm trying to compare two proj4 strings by loading each one into an 
OGRSpatialReference object using .ImportFromProj4(), then comparing them 
using .IsSame().

The problem that's arising is that the two are just barely off 
(.0000000001 off on the y_0 parameter). Therefore, .IsSame() is 
returning false.

So, my question for the crowd is, how can I detect this condition and 
actually catch these two as equivalent?

The two strings in question are:
"+proj=lcc +lat_1=38.33333333333334 +lat_2=39.83333333333334 
+lat_0=37.66666666666666 +lon_0=-122 +x_0=2000000 +y_0=500000.0000000001 
+ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"

"+proj=lcc +lat_1=38.33333333333334 +lat_2=39.83333333333334 
+lat_0=37.66666666666666 +lon_0=-122 +x_0=2000000 +y_0=500000.0000000002 
+ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"

Any thoughts? BTW, I'm using GDAL 1.3.0.

Thanks,
Chris Michaelis
cmichaelis@happysquirrel.com



From warmerdam at pobox.com  Sat Oct 15 18:11:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Comparing Barely-Different SpatialRef Objects with
	.IsSame
In-Reply-To: <43503991.9030608@happysquirrel.com>
References: <43503991.9030608@happysquirrel.com>
Message-ID: <931f8ea90510151511s180cd85cwb33c5048dab3092a@mail.gmail.com>

On 10/14/05, Christopher Michaelis <cmichaelis@happysquirrel.com> wrote:
> Hi there,
>
> I'm trying to compare two proj4 strings by loading each one into an
> OGRSpatialReference object using .ImportFromProj4(), then comparing them
> using .IsSame().
>
> The problem that's arising is that the two are just barely off
> (.0000000001 off on the y_0 parameter). Therefore, .IsSame() is
> returning false.
>
> So, my question for the crowd is, how can I detect this condition and
> actually catch these two as equivalent?
>
> The two strings in question are:
> "+proj=lcc +lat_1=38.33333333333334 +lat_2=39.83333333333334
> +lat_0=37.66666666666666 +lon_0=-122 +x_0=2000000 +y_0=500000.0000000001
> +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"
>
> "+proj=lcc +lat_1=38.33333333333334 +lat_2=39.83333333333334
> +lat_0=37.66666666666666 +lon_0=-122 +x_0=2000000 +y_0=500000.0000000002
> +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"
>
> Any thoughts? BTW, I'm using GDAL 1.3.0.

Chris,

This is just one of a variety of limitations of
OGRSpatialReference::IsSame().   If you want to make serious
use of the method it will need some parameter type sensitive
epsilon testing as well as lots of other logic.

Short of rolling up your sleeves and implementing such logic
I have no advice.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Oct 15 18:17:16 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Having problems with gdaladdo
In-Reply-To: <200510140832.07052.steveb@bundaberg.qld.gov.au>
References: <200510140832.07052.steveb@bundaberg.qld.gov.au>
Message-ID: <931f8ea90510151517o310c35c7r5c7aaddb8d1f1835@mail.gmail.com>

On 10/13/05, Steven Bowden <steveb@bundaberg.qld.gov.au> wrote:
> Hi List,
>
> I am relatively new to using gdal to process my orthophotos.  I am using
> mapserver to publish the orthos in a web app.
>
> I am trying to use gdaladdo to create the overviews for the tif files but I am
> getting some strange results in the tif files after I have created the
> overviews.  The second last overview is corrupted and the last/smallest
> overview always has a yellow square in the bottom right right hand corner of
> the image.

Steven,

I have found this problem and committed a fix.  The bug is pretty
serious and is due to the "final block" flushing logic not ensuring
that the block was being written to the correct overview.  I think
this bug has existed for quite a while, though it would only popup
sometimes when writing pixel-interleaved multiple overviews.

So, the fix is in CVS but you can apply it to your code too if needed.
Just call SetDirectory() in GTiffDataset::FlushBlockBuf()

CPLErr GTiffDataset::FlushBlockBuf()

{
    int		nBlockBufSize;
    CPLErr      eErr = CE_None;

    if( nLoadedBlock < 0 || !bLoadedBlockDirty )
        return CE_None;

    SetDirectory();   <-- add this line

    if( TIFFIsTiled(hTIFF) )
        nBlockBufSize = TIFFTileSize( hTIFF );
    else
        nBlockBufSize = TIFFStripSize( hTIFF );

Thanks for bringing this to my attention.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rayg at daylongraphics.com  Sat Oct 15 20:00:34 2005
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGRSpatialReference::SetUTM bug?
Message-ID: <43519822.3000406@daylongraphics.com>

I was modifying an OGRSpatialReference to use UTM, but if its current 
linear units were not meters, OGRSpatialReference::SetUTM() would set 
the false_easting param to 500000, then GetUTMZone() would read back a 
scaled value causing the comparison to 500000 to fail.

Is SetUTM() supposed to assume that the linear units are already meters, 
or should it force the units to meters? And should GetUTM test that the 
units are meters?

Ray



From warmerdam at pobox.com  Sat Oct 15 20:31:47 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGRSpatialReference::SetUTM bug?
In-Reply-To: <43519822.3000406@daylongraphics.com>
References: <43519822.3000406@daylongraphics.com>
Message-ID: <931f8ea90510151731o16ccd424l436e61ca2b071cbf@mail.gmail.com>

On 10/15/05, Ray Gardener <rayg@daylongraphics.com> wrote:
> I was modifying an OGRSpatialReference to use UTM, but if its current
> linear units were not meters, OGRSpatialReference::SetUTM() would set
> the false_easting param to 500000, then GetUTMZone() would read back a
> scaled value causing the comparison to 500000 to fail.
>
> Is SetUTM() supposed to assume that the linear units are already meters,
> or should it force the units to meters? And should GetUTM test that the
> units are meters?

Ray,

I see that SetUTM() sets the false easting and northing using
SetNormProjParm().  This method is supposed to set the
projection parameters in "normalized" form, that is meters
and degrees.  If a non-meter linear unit had already been set
then the easting and northing should be translated on the fly.

If you set an alternate linear unit after calling SetUTM() you
would need to call SetLinearUnitsAndUpdateParameters()
instead of SetLinearUnits() so that the false easting and northing
will get updated.

Likewise GetUTMZone() uses GetNormProjParm() which converts
the values to meters on the fly.  In theory this should mean it
would work, even for UTM in feet but in practice the false easting
is exactly compared to 500000.  After translating it is unlikely to be
an exact match.

So, generally if you are careful I think things are in pretty decent
shape.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dem at acri-st.fr  Mon Oct 17 03:51:21 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] HDF4 : gdalinfo subdatasets size
Message-ID: <435357F9.20008@acri-st.fr>

Hi,


I don't know if it's a bug, but gdalinfo on an HDF4 file (next test is 
on a MODIS Level2 file, but same problem on Aster files) report sizes in 
Y/X order for subdatasets, and gdalinfo on a selected subdataset report 
the size in X/Y order :

$ gdalinfo /terabyte1/scratch/dem/A2005285192000.L2_LAC|grep SUBDATASET_11
 
SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"/terabyte1/scratch/dem/A2005285192000.L2_LAC":21
   SUBDATASET_11_DESC=[2030x1354] nLw_531 (16-bit integer)

$ gdalinfo 
HDF4_SDS:UNKNOWN:"/terabyte1/scratch/dem/A2005285192000.L2_LAC":21|grep Size
Size is 1354, 2030


Regards,

Julien

From hamish_nospam at yahoo.com  Mon Oct 17 06:12:56 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
In-Reply-To: <e4e5eba0deb7e259df246b9cbe5a4460@frii.com>
References: <00c201c59f84$e73e81e0$959877c6@cts1149>
	<e4e5eba0deb7e259df246b9cbe5a4460@frii.com>
Message-ID: <20051017231256.2c174d67.hamish_nospam@yahoo.com>

> > Can gdal import/convert the Mars Global Surveyor data? It is in 
> > something
> > called either NASA PDS or MOQ format.
..
> Yes.
>    http://zcologia.com/news/39


see also
  http://bambi.otago.ac.nz/hamish/olympus_mons.html

"Global dataset of bathymetry and topography." GRASS Newsletter vol. 1
  http://grass.ibiblio.org/newsletter/index.php

(I know it's not GDAL, but the article lists the binary format & I
didn't want to be outdone) ;)


Hamish

From iotc at 3i.co.za  Mon Oct 17 12:23:42 2005
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Bug in makefile.vc ? (gdal-1.3.0)
Message-ID: <01C5D338.551F6F80.iotc@3i.co.za>

Hi Frank

I couldn't get nmake to generate gdal.lib with visual studio .net 2003 until I altered the word "lib" in makefile.vc as follows:

Line 61		libb:
Line 160      	$(GDAL_DLL):	libb

Is "lib" a reserved word in visual studio .net 2003?

Regards Rob

From warmerdam at pobox.com  Mon Oct 17 10:59:16 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] Bug in makefile.vc ? (gdal-1.3.0)
In-Reply-To: <01C5D338.551F6F80.iotc@3i.co.za>
References: <01C5D338.551F6F80.iotc@3i.co.za>
Message-ID: <931f8ea90510170759k1fd15aa3l67506a24754097ac@mail.gmail.com>

On 10/17/05, Rob Cairns <iotc@3i.co.za> wrote:
> Hi Frank
>
> I couldn't get nmake to generate gdal.lib with visual studio .net 2003 until I altered the word "lib" in makefile.vc as follows:
>
> Line 61         libb:
> Line 160        $(GDAL_DLL):    libb
>
> Is "lib" a reserved word in visual studio .net 2003?

Rob,

I'm pretty sure I have successfully built on VS2003 before and I
didn't run into this.  But to be safe I have renamed lib to staticlib
in makefile.vc.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rsheykhet at sanz.com  Mon Oct 17 13:39:27 2005
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] JP2MrSID internal overviews problem
Message-ID: <ED3A48B9840E594890A2BC172D119465043FC5DD@mailman.san.com>

Hi all,

I am trying to access JPEG 2000 internal overview data. gdal_info
reports that there are 12 overviews in the file.  When I try 

band = parentBand->GetOverview(nOverview);

/*
     ************************************************************
     *** Debugger information for the returned overview band ****
     ************************************************************
	nBand	1	int
	nRasterXSize	2048	int
	nRasterYSize	2048	int
	eDataType	GDT_Byte	GDALDataType
	eAccess		GA_ReadOnly	GDALAccess
	nBlockXSize	2048	int
	nBlockYSize	128	int
	nBlocksPerRow	0	int
	nBlocksPerColumn	0	int
	bSubBlockingActive	0	int
	nSubBlocksPerRow	0	int
	nSubBlocksPerColumn	0	int
+	papoBlocks	0x00000000	GDALRasterBlock * *
	nBlockReads	0	int
	bForceCachedIO	0	int
*/


CPLErr err = band->RasterIO(GF_Read, 0, 0, 750, 750,
&destBuf[destOffset], 
                            600, 600, GDT_Byte, 0, 0);
//err = CE_Failure
// CPLGetLastErrorMsg() = 
//"MrSIDRasterBand::IRasterIO(): Failed to load image. invalid or empty
scene speficied [50013]"

I've looked at the code and it looks like it attempts to determine the
best overview to use 
whithin the  RasterIO() call.  What are the rules for specifying
overviews explicitly vs. letting the GDAL handle them?  

Thanks a lot

Rostic


From cplist at earthlink.net  Mon Oct 17 14:33:58 2005
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW not building in
Message-ID: <E1ERZoV-0001m6-00@pop-sarus.atl.sa.earthlink.net>

Hi, Frank and everyone:

I followed a post you made earlier, Frank
(http://lists.maptools.org/pipermail/gdal-dev/2005-June/005949.html) to
build ECW as a supported GDAL format.  Many thanks for those pointers;
otherwise, I would never have gotten this far.  Everything built fine, but
gdalconfig --formats does not list ECW as a supported format.

Running the ./configure --with-ecw does give me the usual:
...
  JASPER support:            no
  ECW support:               yes
  MrSID support:             no
...

The ./make & ./make install work great.  But it doesn't show back up in the
final format list.

Do you have any ideas?

Thanks,

Charlton



From warmerdam at pobox.com  Mon Oct 17 15:34:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] JP2MrSID internal overviews problem
In-Reply-To: <ED3A48B9840E594890A2BC172D119465043FC5DD@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465043FC5DD@mailman.san.com>
Message-ID: <931f8ea90510171234p243c88eai58e6a303fe0371bb@mail.gmail.com>

On 10/17/05, Sheykhet, Rostic <rsheykhet@sanz.com> wrote:
> Hi all,
>
> I am trying to access JPEG 2000 internal overview data. gdal_info
> reports that there are 12 overviews in the file.  When I try
>
> band = parentBand->GetOverview(nOverview);
...
> // CPLGetLastErrorMsg() =
> //"MrSIDRasterBand::IRasterIO(): Failed to load image. invalid or empty
> scene speficied [50013]"


Rostic,

Yikes!  It seems that IRasterIO's on the explicit overviews using
the MrSID SDK was completely broken.  I think I likely broke it
circa Sept 15th but I'm not at all sure of that.

In any event, I have committed a fix and also added a test to the
"mrsid" gdalautotest script so such problems will come to light more
quickly in the future.  You can grab the fixed mrsiddataset.cpp at:

  http://www.gdal.org/srctree/frmts/mrsid/mrsiddataset.cpp

> I've looked at the code and it looks like it attempts to determine the
> best overview to use
> whithin the  RasterIO() call.  What are the rules for specifying
> overviews explicitly vs. letting the GDAL handle them?

Normally you can just do a RasterIO() request on the full resolution
layer and GDAL will use the most appropriate overview level as needed.
This aspect should have been working fine and is the normal case.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Oct 17 16:00:13 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW not building in
In-Reply-To: <E1ERZoV-0001m6-00@pop-sarus.atl.sa.earthlink.net>
References: <E1ERZoV-0001m6-00@pop-sarus.atl.sa.earthlink.net>
Message-ID: <931f8ea90510171300j661327by704997ba85be3f7c@mail.gmail.com>

On 10/17/05, Charlton Purvis <cplist@earthlink.net> wrote:
> Hi, Frank and everyone:
>
> I followed a post you made earlier, Frank
> (http://lists.maptools.org/pipermail/gdal-dev/2005-June/005949.html) to
> build ECW as a supported GDAL format.  Many thanks for those pointers;
> otherwise, I would never have gotten this far.  Everything built fine, but
> gdalconfig --formats does not list ECW as a supported format.
>
> Running the ./configure --with-ecw does give me the usual:
> ...
>   JASPER support:            no
>   ECW support:               yes
>   MrSID support:             no
> ...
>
> The ./make & ./make install work great.  But it doesn't show back up in the
> final format list.


Charlton,

Try and "make clean; make; make install" and see if that helps.
Re-configuring does not always cause all the required files to get
rebuilt.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ealpert at digitalglobe.com  Mon Oct 17 16:42:51 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] OGR and Oracle DATE and TIMESTAMP fields?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BAB1@COMAIL01.digitalglobe.com>

FYI, I solved this problem using Oracle's TO_CHAR() function.
 
-e

	-----Original Message-----
	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
	Sent: Tuesday, October 11, 2005 11:35 AM
	To: gdal-dev@lists.maptools.org
	Subject: [Gdal-dev] OGR and Oracle DATE and TIMESTAMP fields?
	
	
	 
	 
	I'm using OGR's ExecuteSQL() datasource method and it appears
DATE and TIMESTAMP fields are ignored. Anyone know how to get dates out
or oracle using OGR without having to open a second connection to the DB
using DBI?
	 
	-e

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051017/cf7ee4bb/attachment.html
From armin.burger at gmx.net  Mon Oct 17 17:04:15 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] ECW not building in
In-Reply-To: <E1ERZoV-0001m6-00@pop-sarus.atl.sa.earthlink.net>
References: <E1ERZoV-0001m6-00@pop-sarus.atl.sa.earthlink.net>
Message-ID: <435411CF.2090207@gmx.net>

Charlton

I don't know if that's an option for you, but I asked the ER Mapper 
development support and got the download link for the SDK 3.3 beta. It 
just compiled under Linux without any modification using configure - 
make - make install. In GDAL I used --with-ecw=/usr/local   and 
everything worked fine.

Also all problems we had with some datasets and an older ECW version 
seem to have disappeared and the speed looks quite good. Mapserver 
processes a 3 GB ECW on a 3GHz Pentium in about 1 s or less, independend 
of the scale level. So I think the latest beta is worth trying it.

Armin

Charlton Purvis wrote:
> Hi, Frank and everyone:
> 
> I followed a post you made earlier, Frank
> (http://lists.maptools.org/pipermail/gdal-dev/2005-June/005949.html) to
> build ECW as a supported GDAL format.  Many thanks for those pointers;
> otherwise, I would never have gotten this far.  Everything built fine, but
> gdalconfig --formats does not list ECW as a supported format.
> 
> Running the ./configure --with-ecw does give me the usual:
> ...
>   JASPER support:            no
>   ECW support:               yes
>   MrSID support:             no
> ...
> 
> The ./make & ./make install work great.  But it doesn't show back up in the
> final format list.
> 
> Do you have any ideas?
> 
> Thanks,
> 
> Charlton
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From nf10 at hotmail.com  Tue Oct 18 12:59:22 2005
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] DGN format and projection support
Message-ID: <BAY108-F31F46759DDDFF4D4E6E882C6710@phx.gbl>

Hi,

I downloaded GDAL source code and tried out the DGN as an output format but 
it seems that the DGN ogr driver does not support coordinate system. Is this 
correct ? if yes, I'm wondering if there is any work around this to generate 
DGN with coordinate system ? (scenario: convert mapInfo files to dgn)

Thanks

Jeff



From warmerdam at pobox.com  Tue Oct 18 13:46:47 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] DGN format and projection support
In-Reply-To: <BAY108-F31F46759DDDFF4D4E6E882C6710@phx.gbl>
References: <BAY108-F31F46759DDDFF4D4E6E882C6710@phx.gbl>
Message-ID: <931f8ea90510181046s6bc65006n4273bd71612c0e6d@mail.gmail.com>

On 10/18/05, Jeff L. <nf10@hotmail.com> wrote:
> Hi,
>
> I downloaded GDAL source code and tried out the DGN as an output format but
> it seems that the DGN ogr driver does not support coordinate system. Is this
> correct ? if yes, I'm wondering if there is any work around this to generate
> DGN with coordinate system ? (scenario: convert mapInfo files to dgn)

Jeff,

Your analysis is correct.  I don't know how Microstation stores
coordinate system information in DGNs, and I suspect that in
most geographic maps they don't even bother.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nf10 at hotmail.com  Tue Oct 18 14:05:48 2005
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] DGN format and projection support
In-Reply-To: <931f8ea90510181046s6bc65006n4273bd71612c0e6d@mail.gmail.com>
Message-ID: <BAY108-F376A0A115573D270BE1FD3C6710@phx.gbl>

Hi Frank,

Thank you for your response. DGN can store projection according to this 
document: 
http://support.intergraph.com/TechNotes/MicroStation_Define_CSF.pdf

The paragraph of the document that mention the projection is:

"The design file has its projection/coordinate system and mapping working 
units stored in a format that can be easily read by Intergraph mapping 
software applications such as GeoMedia and MGE. The assigned projection 
information is stored in the header of the design file as a Microstation 
element type 56."

Any work around to produce DGN with coordinate system ?

Jeff



>From: Frank Warmerdam <warmerdam@pobox.com>
>To: "Jeff L." <nf10@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] DGN format and projection support
>Date: Tue, 18 Oct 2005 13:46:47 -0400
>
>On 10/18/05, Jeff L. <nf10@hotmail.com> wrote:
> > Hi,
> >
> > I downloaded GDAL source code and tried out the DGN as an output format 
>but
> > it seems that the DGN ogr driver does not support coordinate system. Is 
>this
> > correct ? if yes, I'm wondering if there is any work around this to 
>generate
> > DGN with coordinate system ? (scenario: convert mapInfo files to dgn)
>
>Jeff,
>
>Your analysis is correct.  I don't know how Microstation stores
>coordinate system information in DGNs, and I suspect that in
>most geographic maps they don't even bother.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, 
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent



From bfraser at geoanalytic.com  Tue Oct 18 14:43:54 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:48 2007
Subject: [Gdal-dev] DGN format and projection support
References: <BAY108-F376A0A115573D270BE1FD3C6710@phx.gbl>
Message-ID: <041101c5d413$e40f9220$160002c0@shark>

Jeff, Frank,

  Last I heard (8 years ago!), Intergraph had no plans to publish format or
provide an open/free API to the coordinate system definition MGE/GeoMedia
apps store in the type 56 element of the DGN file.  But times change; maybe
they're open to the idea these days...

  And I doubt if the type 56 element is read by any Bentley Systems products
(including Microstation).

  Jeff, which application are you planning to use with the DGN files?

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta


----- Original Message ----- 
From: "Jeff L." <nf10@hotmail.com>
To: <warmerdam@pobox.com>
Cc: <gdal-dev@lists.maptools.org>
Sent: Tuesday, October 18, 2005 12:05 PM
Subject: Re: [Gdal-dev] DGN format and projection support


> Hi Frank,
>
> Thank you for your response. DGN can store projection according to this
> document:
> http://support.intergraph.com/TechNotes/MicroStation_Define_CSF.pdf
>
> The paragraph of the document that mention the projection is:
>
> "The design file has its projection/coordinate system and mapping working
> units stored in a format that can be easily read by Intergraph mapping
> software applications such as GeoMedia and MGE. The assigned projection
> information is stored in the header of the design file as a Microstation
> element type 56."
>
> Any work around to produce DGN with coordinate system ?
>
> Jeff
>
>
>
> >From: Frank Warmerdam <warmerdam@pobox.com>
> >To: "Jeff L." <nf10@hotmail.com>
> >CC: gdal-dev@lists.maptools.org
> >Subject: Re: [Gdal-dev] DGN format and projection support
> >Date: Tue, 18 Oct 2005 13:46:47 -0400
> >
> >On 10/18/05, Jeff L. <nf10@hotmail.com> wrote:
> > > Hi,
> > >
> > > I downloaded GDAL source code and tried out the DGN as an output
format
> >but
> > > it seems that the DGN ogr driver does not support coordinate system.
Is
> >this
> > > correct ? if yes, I'm wondering if there is any work around this to
> >generate
> > > DGN with coordinate system ? (scenario: convert mapInfo files to dgn)
> >
> >Jeff,
> >
> >Your analysis is correct.  I don't know how Microstation stores
> >coordinate system information in DGNs, and I suspect that in
> >most geographic maps they don't even bother.
> >
> >Best regards,
> >--
>
>---------------------------------------+-----------------------------------
---
> >I set the clouds in motion - turn up   | Frank Warmerdam,
> >warmerdam@pobox.com
> >light and sound - activate the windows | http://pobox.com/~warmerdam
> >and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From marco_vieira at uk2.net  Tue Oct 18 14:53:25 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:48 2007
Subject: [Fwd: Re: [Gdal-dev] ECW not building in]
Message-ID: <7139.200.169.121.246.1129661605.squirrel@maxproxy2.uk2net.com>

Armin:
  Can you post the SDK 3.3 beta download link? The ERMapper website only
point to 3.2v.
(http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_VERSION_ID=276)
Thanks.

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net

> Charlton
>
> I don't know if that's an option for you, but I asked the ER Mapper
development support and got the download link for the SDK 3.3 beta. It
just compiled under Linux without any modification using configure -
make - make install. In GDAL I used --with-ecw=/usr/local   and
> everything worked fine.
>
> Also all problems we had with some datasets and an older ECW version
seem to have disappeared and the speed looks quite good. Mapserver
processes a 3 GB ECW on a 3GHz Pentium in about 1 s or less, independend
of the scale level. So I think the latest beta is worth trying it.
>
> Armin
>
> Charlton Purvis wrote:
>> Hi, Frank and everyone:
>>
>> I followed a post you made earlier, Frank
>> (http://lists.maptools.org/pipermail/gdal-dev/2005-June/005949.html) to
build ECW as a supported GDAL format.  Many thanks for those pointers;
otherwise, I would never have gotten this far.  Everything built fine,
but
>> gdalconfig --formats does not list ECW as a supported format.
>>
>> Running the ./configure --with-ecw does give me the usual:
>> ...
>>   JASPER support:            no
>>   ECW support:               yes
>>   MrSID support:             no
>> ...
>>
>> The ./make & ./make install work great.  But it doesn't show back up in
the
>> final format list.
>>
>> Do you have any ideas?
>>
>> Thanks,
>>
>> Charlton
>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From rsheykhet at sanz.com  Tue Oct 18 14:59:11 2005
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] JP2MrSID internal overviews problem
Message-ID: <ED3A48B9840E594890A2BC172D119465043FCBEE@mailman.san.com>

That took care of it. 

Thanks a lot

Rostic


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Monday, October 17, 2005 1:35 PM
To: Sheykhet, Rostic
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] JP2MrSID internal overviews problem

On 10/17/05, Sheykhet, Rostic <rsheykhet@sanz.com> wrote:
> Hi all,
>
> I am trying to access JPEG 2000 internal overview data. gdal_info
> reports that there are 12 overviews in the file.  When I try
>
> band = parentBand->GetOverview(nOverview);
...
> // CPLGetLastErrorMsg() =
> //"MrSIDRasterBand::IRasterIO(): Failed to load image. invalid or
empty
> scene speficied [50013]"


Rostic,

Yikes!  It seems that IRasterIO's on the explicit overviews using
the MrSID SDK was completely broken.  I think I likely broke it
circa Sept 15th but I'm not at all sure of that.

In any event, I have committed a fix and also added a test to the
"mrsid" gdalautotest script so such problems will come to light more
quickly in the future.  You can grab the fixed mrsiddataset.cpp at:

  http://www.gdal.org/srctree/frmts/mrsid/mrsiddataset.cpp

> I've looked at the code and it looks like it attempts to determine the
> best overview to use
> whithin the  RasterIO() call.  What are the rules for specifying
> overviews explicitly vs. letting the GDAL handle them?

Normally you can just do a RasterIO() request on the full resolution
layer and GDAL will use the most appropriate overview level as needed.
This aspect should have been working fine and is the normal case.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nf10 at hotmail.com  Tue Oct 18 15:04:05 2005
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] DGN format and projection support
In-Reply-To: <041101c5d413$e40f9220$160002c0@shark>
Message-ID: <BAY108-F3303FE33D0AE415D997DBEC6710@phx.gbl>

Brent,

I was looking into converting mapinfo files so I can open them in Geomedia 
(Intergraph product).
As Gemoedia does not read mapinfo projections, it's asked about a .csf 
(coordinate system file) to be existent with the mapinfo files in order to 
process the data correctly. Geomedia does support .dgn projected files to 
create a .csf file, so I was thinking if a I can produce dgn (through 
gdal/ogr) i can then load my mapinfo files to Geomedia.

It's a bit indirect way but the only way I found so far to get mapinfo data 
into geomedia (with their coordinate system). The more direct question is 
how to get GIS vector data into Geomedia knowing that Geomedia asks about 
the coordinate system of the data (.csf file) ?

Jeff


>From: "Brent Fraser" <bfraser@geoanalytic.com>
>To: "Jeff L." <nf10@hotmail.com>,<warmerdam@pobox.com>
>CC: <gdal-dev@lists.maptools.org>
>Subject: Re: [Gdal-dev] DGN format and projection support
>Date: Tue, 18 Oct 2005 12:43:54 -0600
>
>Jeff, Frank,
>
>   Last I heard (8 years ago!), Intergraph had no plans to publish format 
>or
>provide an open/free API to the coordinate system definition MGE/GeoMedia
>apps store in the type 56 element of the DGN file.  But times change; maybe
>they're open to the idea these days...
>
>   And I doubt if the type 56 element is read by any Bentley Systems 
>products
>(including Microstation).
>
>   Jeff, which application are you planning to use with the DGN files?
>
>Brent Fraser
>GeoAnalytic Inc.
>Calgary, Alberta
>
>
>----- Original Message -----
>From: "Jeff L." <nf10@hotmail.com>
>To: <warmerdam@pobox.com>
>Cc: <gdal-dev@lists.maptools.org>
>Sent: Tuesday, October 18, 2005 12:05 PM
>Subject: Re: [Gdal-dev] DGN format and projection support
>
>
> > Hi Frank,
> >
> > Thank you for your response. DGN can store projection according to this
> > document:
> > http://support.intergraph.com/TechNotes/MicroStation_Define_CSF.pdf
> >
> > The paragraph of the document that mention the projection is:
> >
> > "The design file has its projection/coordinate system and mapping 
>working
> > units stored in a format that can be easily read by Intergraph mapping
> > software applications such as GeoMedia and MGE. The assigned projection
> > information is stored in the header of the design file as a Microstation
> > element type 56."
> >
> > Any work around to produce DGN with coordinate system ?
> >
> > Jeff
> >
> >
> >
> > >From: Frank Warmerdam <warmerdam@pobox.com>
> > >To: "Jeff L." <nf10@hotmail.com>
> > >CC: gdal-dev@lists.maptools.org
> > >Subject: Re: [Gdal-dev] DGN format and projection support
> > >Date: Tue, 18 Oct 2005 13:46:47 -0400
> > >
> > >On 10/18/05, Jeff L. <nf10@hotmail.com> wrote:
> > > > Hi,
> > > >
> > > > I downloaded GDAL source code and tried out the DGN as an output
>format
> > >but
> > > > it seems that the DGN ogr driver does not support coordinate system.
>Is
> > >this
> > > > correct ? if yes, I'm wondering if there is any work around this to
> > >generate
> > > > DGN with coordinate system ? (scenario: convert mapInfo files to 
>dgn)
> > >
> > >Jeff,
> > >
> > >Your analysis is correct.  I don't know how Microstation stores
> > >coordinate system information in DGNs, and I suspect that in
> > >most geographic maps they don't even bother.
> > >
> > >Best regards,
> > >--
> >
> >---------------------------------------+-----------------------------------
>---
> > >I set the clouds in motion - turn up   | Frank Warmerdam,
> > >warmerdam@pobox.com
> > >light and sound - activate the windows | http://pobox.com/~warmerdam
> > >and watch the world go round - Rush    | Geospatial Programmer for Rent
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From szekerest at gmail.com  Tue Oct 18 16:20:00 2005
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] OGR PostgreSQL and schema
Message-ID: <435558be.0e8367b4.4e04.ffff9409@mx.gmail.com>

Hi list,

Is it possible to create or connect to PostrgreSQL data existing in a schema
other than public?


Tamas Szekeres

-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.344 / Virus Database: 267.12.4/142 - Release Date: 2005.10.18.
 


From bfraser at geoanalytic.com  Tue Oct 18 17:19:14 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] DGN format and projection support
References: <BAY108-F3303FE33D0AE415D997DBEC6710@phx.gbl>
Message-ID: <099201c5d429$97392720$160002c0@shark>

Jeff,

  It looks like GeoMedia ships with a GUI tool (Windows Start > Programs >
GeoMedia > Define Coordinate Systems) for you to create .csf files manually.
The format is an un-documented binary format, so we're out of luck for
gdal/ogr to support it...

Brent


----- Original Message ----- 
From: "Jeff L." <nf10@hotmail.com>
To: <bfraser@geoanalytic.com>; <warmerdam@pobox.com>
Cc: <gdal-dev@lists.maptools.org>
Sent: Tuesday, October 18, 2005 1:04 PM
Subject: Re: [Gdal-dev] DGN format and projection support


> Brent,
>
> I was looking into converting mapinfo files so I can open them in Geomedia
> (Intergraph product).
> As Gemoedia does not read mapinfo projections, it's asked about a .csf
> (coordinate system file) to be existent with the mapinfo files in order to
> process the data correctly. Geomedia does support .dgn projected files to
> create a .csf file, so I was thinking if a I can produce dgn (through
> gdal/ogr) i can then load my mapinfo files to Geomedia.
>
> It's a bit indirect way but the only way I found so far to get mapinfo
data
> into geomedia (with their coordinate system). The more direct question is
> how to get GIS vector data into Geomedia knowing that Geomedia asks about
> the coordinate system of the data (.csf file) ?
>
> Jeff
>
>
> >From: "Brent Fraser" <bfraser@geoanalytic.com>
> >To: "Jeff L." <nf10@hotmail.com>,<warmerdam@pobox.com>
> >CC: <gdal-dev@lists.maptools.org>
> >Subject: Re: [Gdal-dev] DGN format and projection support
> >Date: Tue, 18 Oct 2005 12:43:54 -0600
> >
> >Jeff, Frank,
> >
> >   Last I heard (8 years ago!), Intergraph had no plans to publish format
> >or
> >provide an open/free API to the coordinate system definition MGE/GeoMedia
> >apps store in the type 56 element of the DGN file.  But times change;
maybe
> >they're open to the idea these days...
> >
> >   And I doubt if the type 56 element is read by any Bentley Systems
> >products
> >(including Microstation).
> >
> >   Jeff, which application are you planning to use with the DGN files?
> >
> >Brent Fraser
> >GeoAnalytic Inc.
> >Calgary, Alberta
> >
> >
> >----- Original Message -----
> >From: "Jeff L." <nf10@hotmail.com>
> >To: <warmerdam@pobox.com>
> >Cc: <gdal-dev@lists.maptools.org>
> >Sent: Tuesday, October 18, 2005 12:05 PM
> >Subject: Re: [Gdal-dev] DGN format and projection support
> >
> >
> > > Hi Frank,
> > >
> > > Thank you for your response. DGN can store projection according to
this
> > > document:
> > > http://support.intergraph.com/TechNotes/MicroStation_Define_CSF.pdf
> > >
> > > The paragraph of the document that mention the projection is:
> > >
> > > "The design file has its projection/coordinate system and mapping
> >working
> > > units stored in a format that can be easily read by Intergraph mapping
> > > software applications such as GeoMedia and MGE. The assigned
projection
> > > information is stored in the header of the design file as a
Microstation
> > > element type 56."
> > >
> > > Any work around to produce DGN with coordinate system ?
> > >
> > > Jeff
> > >
> > >
> > >
> > > >From: Frank Warmerdam <warmerdam@pobox.com>
> > > >To: "Jeff L." <nf10@hotmail.com>
> > > >CC: gdal-dev@lists.maptools.org
> > > >Subject: Re: [Gdal-dev] DGN format and projection support
> > > >Date: Tue, 18 Oct 2005 13:46:47 -0400
> > > >
> > > >On 10/18/05, Jeff L. <nf10@hotmail.com> wrote:
> > > > > Hi,
> > > > >
> > > > > I downloaded GDAL source code and tried out the DGN as an output
> >format
> > > >but
> > > > > it seems that the DGN ogr driver does not support coordinate
system.
> >Is
> > > >this
> > > > > correct ? if yes, I'm wondering if there is any work around this
to
> > > >generate
> > > > > DGN with coordinate system ? (scenario: convert mapInfo files to
> >dgn)
> > > >
> > > >Jeff,
> > > >
> > > >Your analysis is correct.  I don't know how Microstation stores
> > > >coordinate system information in DGNs, and I suspect that in
> > > >most geographic maps they don't even bother.
> > > >
> > > >Best regards,
> > > >--
> > >
> >
>---------------------------------------+-----------------------------------
> >---
> > > >I set the clouds in motion - turn up   | Frank Warmerdam,
> > > >warmerdam@pobox.com
> > > >light and sound - activate the windows | http://pobox.com/~warmerdam
> > > >and watch the world go round - Rush    | Geospatial Programmer for
Rent
> > >
> > >
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
>


From cfis at interserv.com  Tue Oct 18 18:29:57 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: OGR PostgreSQL and schema
In-Reply-To: <435558be.0e8367b4.4e04.ffff9409@mx.gmail.com>
References: <435558be.0e8367b4.4e04.ffff9409@mx.gmail.com>
Message-ID: <43557765.4040700@interserv.com>

Yes and no.  You don't "connect" to a schema - you connect to a 
database.  You then reference tables in a schema like this: 
"schema.table" - however, OGR does not support this.

As can work around this by setting the postgresql search_path to include 
your schema.  You have to do it for the user, as opposed to a session, 
since OGR will create its own connection. So:

ALTER USER <user_name> SET search_path TO <schema_name>,"$user",public;

If you have the same table name in different schemas, with different 
fields, then you'll have to exclude the other tables by setting the 
search_path appropriately.

Thanks,

Charlie


Tamas Szekeres wrote:
> Hi list,
> 
> Is it possible to create or connect to PostrgreSQL data existing in a schema
> other than public?
> 
> 
> Tamas Szekeres
> 



From BEN at Syncera-ITSolutions.NL  Wed Oct 19 09:18:45 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ORA-12705: invalid or unknown NLS parameter value
	specified
Message-ID: <s35663e4.064@SRV-POSTIX-DFT>

Hi list,

just reporting this back in case anybody in the future runs into this.

When using ogr2ogr or ogrinfo on an OCI datasource I was getting:

D:\test>ogrinfo OCI:system/oracle@PORCL
ERROR 1: ORA-12705: invalid or unknown NLS parameter value specified
 in <unnamed>
ERROR 1: ORA-12705: invalid or unknown NLS parameter value specified
 in <unnamed>
FAILURE:

I got the NLS_LANG setting from the database using the following SQL:

SELECT name,value$ from sys.props$ where name like '%NLS_LANG%';

and then used an environment variable before calling ogrinfo:

D:\test>set NLS_LANG=AMERICAN

D:\test>ogrinfo OCI:system/oracle@PORCL
INFO: Open of `OCI:system/oracle@PORCL'
using driver `OCI' successful.

Best regards,
Bart


Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl


From BEN at Syncera-ITSolutions.NL  Wed Oct 19 09:48:24 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] OCI driver, database creation error
Message-ID: <s3566ad1.014@SRV-POSTIX-DFT>

Hi list,

what does OGR mean with the following error and how can I fix it? 

I have a database up and running, and it has the necessary MDSYS SDO_ tables.

D:\test>ogr2ogr ogr2ogr -f OCI OCI:system/oracle@PORCL percelen_region.shp
ERROR 1: Oracle driver doesn't currently support database creation.
Please create database with Oracle tools before loading tables.
OCI driver failed to create ogr2ogr

Thanks in advance.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl


From thomw00 at yahoo.com  Wed Oct 19 09:55:13 2005
From: thomw00 at yahoo.com (Thomas Windholz)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] 2 layers in postgis; getnextfeature(); C++
Message-ID: <20051019135513.84837.qmail@web42107.mail.yahoo.com>

Hello List,
 
I would like to handle two ogrlayers from a postgres database. When using getnextfeature or executesql in nested loops it fails. I am not sure if it is that either ogr is supposed to work this way or if it's just me ...
 
any help is appreciated!
 
Thanks,
Thomas
 
the counter returns the correct record number of 242 if I exclude the nested while loop (getnext on layer2), but it returns 1 as it is ...
 
here is a basic version of the code:
 

OGRLayer *poLayer1;

OGRLayer *poLayer2;

int counter=0;

OGRRegisterAll(); 

poDS = OGRSFDriverRegistrar::Open( "PG:user=postgres password=*** dbname=*** host=localhost port=5432", TRUE );

poLayer1 = poDS->GetLayerByName("test242");

poLayer2 = poDS->GetLayerByName("test3");

OGRFeature *poFeatureL1;

poLayer1->ResetReading();

while( (poFeatureL1 = poLayer1->GetNextFeature()) != NULL )

{

OGRFeature *poFeatureL2; 

poLayer2->ResetReading();

while( (poFeatureL2 = poLayer2->GetNextFeature()) != NULL )

{



}

counter++; 

}

cout << counter;

 

same thing happens if I use executesql instead of the second while loop :

poLayer2 = poDS->ExecuteSQL("SELECT * FROM temp2",NULL,NULL);)



		
---------------------------------
 Yahoo! Music Unlimited - Access over 1 million songs. Try it free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051019/e93e04e1/attachment.html
From warmerdam at pobox.com  Wed Oct 19 10:13:01 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] 2 layers in postgis; getnextfeature(); C++
In-Reply-To: <20051019135513.84837.qmail@web42107.mail.yahoo.com>
References: <20051019135513.84837.qmail@web42107.mail.yahoo.com>
Message-ID: <931f8ea90510190713o8cb085dg5231a6267ed403c0@mail.gmail.com>

On 10/19/05, Thomas Windholz <thomw00@yahoo.com> wrote:
>
> Hello List,
>
> I would like to handle two ogrlayers from a postgres database. When using
> getnextfeature or executesql in nested loops it fails. I am not sure if it
> is that either ogr is supposed to work this way or if it's just me ...
>
> any help is appreciated!

Thomas,

Unfortunately, it is not currently possible to have multiple queries
active on a single PostGIS OGRDataSource at one time the
way things are setup.  When you do ResetReading() and read
a feature on a layer, internally a transaction is active to handle that.
Trying to read on another layer messes that up.

I'm not sure what error you encountered.  It may be that I could
at least do a better job of recognising an active transaction and
terminating it.

You could open two distinct instances of OGRDataSource
and access one table via each of them.  This should work
fine though it does add some extra overhead.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 19 10:14:01 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] OCI driver, database creation error
In-Reply-To: <s3566ad1.014@SRV-POSTIX-DFT>
References: <s3566ad1.014@SRV-POSTIX-DFT>
Message-ID: <931f8ea90510190714n648ebb2dsa23916ebf7dba9ac@mail.gmail.com>

On 10/19/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list,
>
> what does OGR mean with the following error and how can I fix it?
>
> I have a database up and running, and it has the necessary MDSYS SDO_ tables.
>
> D:\test>ogr2ogr ogr2ogr -f OCI OCI:system/oracle@PORCL percelen_region.shp
> ERROR 1: Oracle driver doesn't currently support database creation.
> Please create database with Oracle tools before loading tables.
> OCI driver failed to create ogr2ogr

Bart,

You need to use the -update flag to indicate that you aren't
trying to create the OCI database, just open an existing one
to write into.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From route at cae.com  Wed Oct 19 10:13:32 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] INTERLEAVE information of a read GeoTigff dataset
Message-ID: <62FC3C78EB032A4DB2AD05F964E931F631EBF9@caemex02.caecorp.cae.com>

Hi,
 
I checked the code, but I cannot find a way to get the INTERLEAVE
metadata once the dataset is opened.
It works when I set in when creating a new dataset, but I tried:
 
  GDALDataset* m_gdalDataSet = (GDALDataset *) GDALOpen(
(char*)filename.c_str(), GA_ReadOnly );
 const char* interleaveStr =
m_gdalDataSet->GetMetaDataItem("INTERLEAVE"); 
 
and nothing gives access to the "nPlanarConfig" field of the
GTiffDataSet
 
 
Did I make something wrong ?
 
Thnaks,
 
Stephane

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051019/d63adc1f/attachment.html
From warmerdam at pobox.com  Wed Oct 19 10:53:57 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] INTERLEAVE information of a read GeoTigff dataset
In-Reply-To: <62FC3C78EB032A4DB2AD05F964E931F631EBF9@caemex02.caecorp.cae.com>
References: <62FC3C78EB032A4DB2AD05F964E931F631EBF9@caemex02.caecorp.cae.com>
Message-ID: <931f8ea90510190753i254b8c2cj639ed95a39d20119@mail.gmail.com>

On 10/19/05, Stephane Routelous <route@cae.com> wrote:
>
> Hi,
>
> I checked the code, but I cannot find a way to get the INTERLEAVE metadata
> once the dataset is opened.
> It works when I set in when creating a new dataset, but I tried:
>
>   GDALDataset* m_gdalDataSet = (GDALDataset *) GDALOpen(
> (char*)filename.c_str(), GA_ReadOnly );
>  const char* interleaveStr =
> m_gdalDataSet->GetMetaDataItem("INTERLEAVE");
>
> and nothing gives access to the "nPlanarConfig" field of the GTiffDataSet

Stephane,

Currently there is no way of querying a TIFF file from the GDAL
API to find out the interleaving mode.  Is there some reason you
need to do this?

Generally speaking I do not try to expose image organization
information through GDAL's metadata facilities as the application
shouldn't need to be aware of it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 19 11:40:44 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
Message-ID: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>

Folks,

Markus has provided some fixes for the GRASS-GDAL plugin
package, most importantly linking against the vector library.
I have re-created the package under the existing name at:

 http://www.gdal.org/dl/gdal-grass-1.3.1.tar.gz

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Wed Oct 19 11:49:01 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
Message-ID: <20051019154901.GH2809@thuille.itc.it>

On Wed, Oct 19, 2005 at 11:40:44AM -0400, Frank Warmerdam wrote:
> Folks,
> 
> Markus has provided some fixes for the GRASS-GDAL plugin
> package, most importantly linking against the vector library.
> I have re-created the package under the existing name at:
> 
>  http://www.gdal.org/dl/gdal-grass-1.3.1.tar.gz
>

Frank,

sorry, but IMHO you didn't run 'autoconf':

g++ -shared  ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o -L/ssi0/ssi/neteler/grass61/dist.i686-pc-linux-gnu//lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -L/usr/local/lib -lgdal  -o ogr_GRASS.so

The link to -lgrass_vect is still missing... It's present in configure.in, though,
as submitted.

Please re-created it again,

 Markus


From dem at acri-st.fr  Wed Oct 19 11:51:17 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] HDF4 Driver Improvments
Message-ID: <43566B75.90302@acri-st.fr>

Hi,


I want improve support for MODIS LV2 HDF4 files:
	- add a new HDF4SubdatasetType and recognize MODIS LV2 using 
"Title=MODISA Level-2 Data" metadata
	- support the 1D SubDatasets (I believe this is currently the only data 
we cannot read in MODIS LV2 with GDAL) ; maybe this changes can work 
with all HDF files ?
	- maybe implement the GetOffset and GetScale GDALRasterBand methods for 
MODIS LV2 SubDataset which have "slope" and "intercept" attributes

I've read the HDF4 driver source code and I think this isn't a hard 
work, but I want be sure there aren't any big problems I missed before 
start to implement this.


Thanks in advance,

Julien

From warmerdam at pobox.com  Wed Oct 19 11:53:17 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <20051019154901.GH2809@thuille.itc.it>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
	<20051019154901.GH2809@thuille.itc.it>
Message-ID: <931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>

On 10/19/05, Markus Neteler <neteler@itc.it> wrote:
> Frank,
>
> sorry, but IMHO you didn't run 'autoconf':
>
> g++ -shared  ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o -L/ssi0/ssi/neteler/grass61/dist.i686-pc-linux-gnu//lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -L/usr/local/lib -lgdal  -o ogr_GRASS.so
>
> The link to -lgrass_vect is still missing... It's present in configure.in, though,
> as submitted.
>
> Please re-created it again,

Markus,

Doh!  You are right of course.  I have run autoconf, and reupdated
the download site.  Let me know if this version doesn't work properly.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Wed Oct 19 12:06:14 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
	<20051019154901.GH2809@thuille.itc.it>
	<931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
Message-ID: <20051019160614.GJ2809@thuille.itc.it>

On Wed, Oct 19, 2005 at 11:53:17AM -0400, Frank Warmerdam wrote:
> On 10/19/05, Markus Neteler <neteler@itc.it> wrote:
> > Frank,
> >
> > sorry, but IMHO you didn't run 'autoconf':
> >
> > g++ -shared  ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o -L/ssi0/ssi/neteler/grass61/dist.i686-pc-linux-gnu//lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -L/usr/local/lib -lgdal  -o ogr_GRASS.so
> >
> > The link to -lgrass_vect is still missing... It's present in configure.in, though,
> > as submitted.
> >
> > Please re-created it again,
> 
> Markus,
> 
> Doh!  You are right of course.  I have run autoconf, and reupdated
> the download site.  Let me know if this version doesn't work properly.

Frank,

tested, looks good! 

Thanks again for merging the GRASS raster and vector plugins
(and to Radim as well)!

 Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From thare at usgs.gov  Wed Oct 19 12:08:13 2005
From: thare at usgs.gov (Trent M Hare)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Processing MOLA and MOC data?
In-Reply-To: <20051017231256.2c174d67.hamish_nospam@yahoo.com>
Message-ID: <OFB870CB25.3DB5B8B0-ON0725709F.0056C16C-0725709F.0058A2D2@usgs.gov>

We have written a PDS plug-in for GDAL but have not released it because 
there are still questions about supporting planetary coordinate systems. 
And even though PDS is a "standard" there are many differences in the 
various catalogs because it supports so many different instruments. You 
also have to be a little careful because there are also many 
inconsistencies with the labels (especially when it comes to the 
registration parameters). You will also find that most PDS images are in 
their original raw (unprojected) space. This means you really need 
speciality software like USGS's ISIS or JPL's VICAR to process it first.

So to get users started with PDS images we have a released a very simple 
PERL script to read map projected PDS images and write out various GIS 
headers. The easiest for GDAL is to use the "-p" options when using the 
pds2world.pl script, which generates a PCI Aux header file. The *.aux file 
created can then be read and converted by GDAL.

more:
http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?t=341
http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?p=905

Regards,
Trent
http://webgis.wr.usgs.gov





> > Can gdal import/convert the Mars Global Surveyor data? It is in 
> > something
> > called either NASA PDS or MOQ format.
..
> Yes.
>    http://zcologia.com/news/39


see also
  http://bambi.otago.ac.nz/hamish/olympus_mons.html

"Global dataset of bathymetry and topography." GRASS Newsletter vol. 1
  http://grass.ibiblio.org/newsletter/index.php

(I know it's not GDAL, but the article lists the binary format & I
didn't want to be outdone) ;)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051019/23b109b7/attachment.html
From thesaint at thesaint.mine.nu  Wed Oct 19 14:52:35 2005
From: thesaint at thesaint.mine.nu (Andreas Wallin)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Compile gdal with LDFLAGS -L/usr/lib64
Message-ID: <435695F3.5090500@thesaint.mine.nu>

Hello,
Im trying to compile gdal on slamd64, and against libraries in /usr/lib64,
But if i try to give LDFLAGS="-L/usr/lib64" to configure it seems to 
ignore it and uses -L/usr/lib instead as default.

I manage to compile/link it  properly by first running configure with my 
options, and then edit the GDALmake.opt at line where LIBS variable is 
defined,  Usually around row 37, this works just fine but i cant edit 
the gdalmake.opt file everytime i build the slackware package, Because 
the build process is automatic and depending on what configure options 
used, therefore i cant just patch the gdalmake.opt and add -L/usr/lib64.

Anyone have a better solution to this ? how to link against /usr/lib64

Or does it need some changes in gdal-source

//Andreas Wallin





From canales1 at llnl.gov  Wed Oct 19 19:54:41 2005
From: canales1 at llnl.gov (Tom Canales)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem building for Solaris w/Oracle driver
Message-ID: <6.2.1.2.2.20051019165323.02dd2958@mail.llnl.gov>

I've having problems building GDAL with the oracle driver.

Environment:
   GDAL: v 1.3.1
   OS: Solaris 2.8
   Oracle: 10.2.0

As per the build instructions I ran:
 > configure --with-oci=/oracle/product/10.2.0/db_1

then
 > gmake install

everything compiled fine but I got the following linking error:

ld: fatal: file /oracle/product/10.2.0/db_1/lib/libclntsh.so: wrong ELF 
class: ELFCLASS64
ld: fatal: File processing errors. No output written to .libs/libgdal.so.1.9.0
collect2: ld returned 1 exit status
gmake[1]: *** [libgdal.la] Error 1
gmake[1]: Leaving directory `/usr/local/gdal-1.3.1'
gmake: *** [check-lib] Error 2


Any help would be appreciated,



From hobu at iastate.edu  Wed Oct 19 21:16:16 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem building for Solaris w/Oracle driver
In-Reply-To: <6.2.1.2.2.20051019165323.02dd2958@mail.llnl.gov>
References: <6.2.1.2.2.20051019165323.02dd2958@mail.llnl.gov>
Message-ID: <p06200708bf7ca00235b7@[192.168.11.4]>

Tom,

Your link is picking up the 64bit Oracle libs.  Is this what you 
want?  You might try putting $ORACLE_HOME/lib32 in front on the 
LD_LIBRARY_PATH to grab the 32bit Oracle client.

Howard

At 4:54 PM -0700 10/19/05, Tom Canales wrote:
>I've having problems building GDAL with the oracle driver.
>
>Environment:
>   GDAL: v 1.3.1
>   OS: Solaris 2.8
>   Oracle: 10.2.0
>
>As per the build instructions I ran:
>>  configure --with-oci=/oracle/product/10.2.0/db_1
>
>then
>>  gmake install
>
>everything compiled fine but I got the following linking error:
>
>ld: fatal: file /oracle/product/10.2.0/db_1/lib/libclntsh.so: wrong 
>ELF class: ELFCLASS64
>ld: fatal: File processing errors. No output written to .libs/libgdal.so.1.9.0
>collect2: ld returned 1 exit status
>gmake[1]: *** [libgdal.la] Error 1
>gmake[1]: Leaving directory `/usr/local/gdal-1.3.1'
>gmake: *** [check-lib] Error 2
>
>
>Any help would be appreciated,
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From rayg at daylongraphics.com  Thu Oct 20 02:27:03 2005
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] GDAL Leveller driver available
Message-ID: <435738B7.5000808@daylongraphics.com>

Hi all,

A driver for GDAL that reads Leveller heightfields is available at

http://www.daylongraphics.com/products/leveller/download/gdal_driver_lev.zip

Ray Gardener
Daylon Graphics Ltd.


From eric.doenges at gmx.net  Thu Oct 20 02:52:41 2005
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem building with static libproj4
Message-ID: <F8110350-075D-4D26-ABC1-29BBDAEEA0C1@gmx.net>

Hi,


I've encountered a problem when trying to build CVS GDAL using
'--with-static-proj4=<path to proj4 4.4.9 build directory>'. It seems  
that a recent change
to the configure script has GDAL looking for libproj in <path  
specified to option>/src
instead of <path specified to option>/src/.libs, where libproj4  
(version 4.4.9) actually
builds the static library. Editing the configure script to use the  
correct path is
simple enough, but I'm wondering if that is the correct solution.

With kind regards,
Eric

From eric.doenges at gmx.net  Thu Oct 20 03:02:59 2005
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Patch to get jpg driver to read world files with .tfw
	extension
Message-ID: <12F198CD-A33D-4600-AD2A-E880FF6B95E5@gmx.net>

It seems that some people use world files with a .tfw extension  
instead of
the .jpgw and .wld extensions the jpeg driver looks for, so I've  
patched it to
look for .tfw and .tifw as well. Which leaves me wondering - is this  
the correct thing
to do ? Of all the other drivers that can read world files, only the  
(Geo)TIFF
(obviously !) and PNG drivers search for .tfw and .tifw files. If the  
JPEG driver should
look for .tfw and .tifw files, shouldn't all other drivers that can  
read world files
do as well ?

With kind regards,
Eric


Index: jpgdataset.cpp
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/frmts/jpeg/jpgdataset.cpp,v
retrieving revision 1.38
diff -u -r1.38 jpgdataset.cpp
--- jpgdataset.cpp      14 Oct 2005 21:52:26 -0000      1.38
+++ jpgdataset.cpp      20 Oct 2005 05:38:52 -0000
@@ -1074,6 +1074,10 @@
          || GDALReadWorldFile( poOpenInfo->pszFilename, ".jpgw",
                                poDS->adfGeoTransform )
          || GDALReadWorldFile( poOpenInfo->pszFilename, ".wld",
+                              poDS->adfGeoTransform )
+        || GDALReadWorldFile( poOpenInfo->pszFilename, ".tfw",
+                              poDS->adfGeoTransform );
+        || GDALReadWorldFile( poOpenInfo->pszFilename, ".tifw",
                                poDS->adfGeoTransform );
      return poDS;

From BEN at Syncera-ITSolutions.NL  Thu Oct 20 06:01:06 2005
From: BEN at Syncera-ITSolutions.NL (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] OCI driver, database creation error
Message-ID: <s3578714.092@SRV-POSTIX-DFT>

Thanks Frank, that did the trick.

Best regards,
Bart

Bart van den Eijnden
Syncera IT Solutions
Postbus 270
2600 AG  DELFT

tel.nr.: 015-7512436
email: BEN@Syncera-ITSolutions.nl

>>> Frank Warmerdam <warmerdam@pobox.com> 19-10-2005 16:14 >>>
On 10/19/05, Bart van den Eijnden <BEN@syncera-itsolutions.nl> wrote:
> Hi list,
>
> what does OGR mean with the following error and how can I fix it?
>
> I have a database up and running, and it has the necessary MDSYS SDO_ tables.
>
> D:\test>ogr2ogr ogr2ogr -f OCI OCI:system/oracle@PORCL percelen_region.shp
> ERROR 1: Oracle driver doesn't currently support database creation.
> Please create database with Oracle tools before loading tables.
> OCI driver failed to create ogr2ogr

Bart,

You need to use the -update flag to indicate that you aren't
trying to create the OCI database, just open an existing one
to write into.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Oct 20 10:38:14 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] GDAL Leveller driver available
In-Reply-To: <435738B7.5000808@daylongraphics.com>
References: <435738B7.5000808@daylongraphics.com>
Message-ID: <931f8ea90510200738v337ef0c6vb4b10c8a2dba3644@mail.gmail.com>

On 10/20/05, Ray Gardener <rayg@daylongraphics.com> wrote:
> Hi all,
>
> A driver for GDAL that reads Leveller heightfields is available at
>
> http://www.daylongraphics.com/products/leveller/download/gdal_driver_lev.zip

Folks,

I would add that I have committed this in CVS this morning,
so starting tomorrow CVS snapshots will include this driver
as a default driver.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 20 10:54:14 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem building with static libproj4
In-Reply-To: <F8110350-075D-4D26-ABC1-29BBDAEEA0C1@gmx.net>
References: <F8110350-075D-4D26-ABC1-29BBDAEEA0C1@gmx.net>
Message-ID: <931f8ea90510200754h3d89bb13y2a8841f1fff4b08e@mail.gmail.com>

On 10/20/05, Eric D?nges <eric.doenges@gmx.net> wrote:
> Hi,
>
>
> I've encountered a problem when trying to build CVS GDAL using
> '--with-static-proj4=<path to proj4 4.4.9 build directory>'. It seems
> that a recent change
> to the configure script has GDAL looking for libproj in <path
> specified to option>/src
> instead of <path specified to option>/src/.libs, where libproj4
> (version 4.4.9) actually
> builds the static library. Editing the configure script to use the
> correct path is
> simple enough, but I'm wondering if that is the correct solution.

Eric,

I have reviewed the last 60 or so changes to the configure.in
script, and I can't find any sign of a change with regard to the
.libs and linking.  There is a rule to check with linking against

    if test "$PROJ_STATIC" = "no"; then
      unset ac_cv_lib_proj_pj_init
      LIBS="-L$with_static_proj4/src/.libs $PROJ_LIB $ORIG_LIBS"
      AC_CHECK_LIB(proj,pj_init,PROJ_STATIC=yes,PROJ_STATIC=no,)
    fi

I'm not sure why that wouldn't work.   I don't see anything obvious
to change, and building against a PROJ.4 build tree (rather than
an install tree) is not a common scenario so for now I am not planning
to do anything.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 20 10:57:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Patch to get jpg driver to read world files with .tfw
	extension
In-Reply-To: <12F198CD-A33D-4600-AD2A-E880FF6B95E5@gmx.net>
References: <12F198CD-A33D-4600-AD2A-E880FF6B95E5@gmx.net>
Message-ID: <931f8ea90510200757y4f3ef1ffwbc314c6079be9c95@mail.gmail.com>

On 10/20/05, Eric D?nges <eric.doenges@gmx.net> wrote:
> It seems that some people use world files with a .tfw extension
> instead of
> the .jpgw and .wld extensions the jpeg driver looks for, so I've
> patched it to
> look for .tfw and .tifw as well. Which leaves me wondering - is this
> the correct thing
> to do ? Of all the other drivers that can read world files, only the
> (Geo)TIFF
> (obviously !) and PNG drivers search for .tfw and .tifw files. If the
> JPEG driver should
> look for .tfw and .tifw files, shouldn't all other drivers that can
> read world files
> do as well ?

Eric,

Will the madness never end?  I sometimes wonder how much
time and system resources GDAL spends probing around looking
for a variety of possible auxilary files: many combinations
of world file, including uppercase/lowercase tests on unix,
.ovr overview files, .aux auxilary files, .aux.xml auxilary files,
.prj files, etc.

I would prefer not to apply this patch for the time being as I
feel it encourages the proliferation of worldfile extensions and
adds to the risk of an improper world file being picked up.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From todd.jellett at caris.com  Thu Oct 20 12:28:50 2005
From: todd.jellett at caris.com (Todd Jellett)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem creating GeoTiff across International Date Line
Message-ID: <4357C5C2.505@caris.com>

Hi all,

I have a question which is related to geotiff images, the international 
date line and proj4.
It may ultimately belong on the proj4 list but since it relates to 
GeoTiff I'm posting here.

Is it the intention that pj_inv can be used to convert a projected coord 
(say mercator) to
lat/long then use pj_fwd to convert back to mercator units and get the 
same x, y
mercator value?

With the current implemetation of proj4 "adjlon" being used in pj_inv.c 
to make sure
that the returned longitude is always within the range of +/- 180 
degrees. While this
is fine most of the time, it causes problems when working around the 
international
date line.

eg. I have a mercator coordinate for an image corner. note: the image 
spans the date line.
1) x,y = (23370182, 22807431)

2) results from  pj_inv
     Lat, Long = (86.81, -150.06)

3) results from pj_fwd
     x,y = (-16705270,  22807431)

The difference occurs because the orgininal longitude (before adjlon) of 
+209.04 was
"corrected" to be within the range of -180. to +180 before being 
returned by pj_inv.
The end result is an X coordinate which is 40 million meters east of 
where it originally was.
Strictly speaking a longitude of -150.06 is the same location on the 
earth as +209.04
but when you project this point to x, y you do not get the same Y 
coordinate.

Thanks
Todd




From ed at topozone.com  Thu Oct 20 12:49:46 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problem creating GeoTiff across International Date Line
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD4E1@ptolemy.topozone.com>

Todd -

I don't see anything about GeoTIFFs in there <g>.  You're asking about
pj_inv, pj_fwd, and proj, and you'll just have better luck on the proj4
list.  I'd suggest posting to that list, and I'm replying to it, too.

What is the central meridian of your Mercator projection?

	- Ed 

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Todd Jellett
Sent: Thursday, October 20, 2005 12:29 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Problem creating GeoTiff across International Date
Line

Hi all,

I have a question which is related to geotiff images, the international
date line and proj4.
It may ultimately belong on the proj4 list but since it relates to
GeoTiff I'm posting here.

Is it the intention that pj_inv can be used to convert a projected coord
(say mercator) to lat/long then use pj_fwd to convert back to mercator
units and get the same x, y mercator value?

With the current implemetation of proj4 "adjlon" being used in pj_inv.c
to make sure that the returned longitude is always within the range of
+/- 180 degrees. While this is fine most of the time, it causes problems
when working around the international date line.

eg. I have a mercator coordinate for an image corner. note: the image
spans the date line.
1) x,y = (23370182, 22807431)

2) results from  pj_inv
     Lat, Long = (86.81, -150.06)

3) results from pj_fwd
     x,y = (-16705270,  22807431)

The difference occurs because the orgininal longitude (before adjlon) of

+209.04 was
"corrected" to be within the range of -180. to +180 before being
returned by pj_inv.
The end result is an X coordinate which is 40 million meters east of
where it originally was.
Strictly speaking a longitude of -150.06 is the same location on the
earth as +209.04 but when you project this point to x, y you do not get
the same Y coordinate.

Thanks
Todd



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From rsheykhet at sanz.com  Thu Oct 20 13:28:44 2005
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] JP2MrSID internal overviews problem
Message-ID: <ED3A48B9840E594890A2BC172D11946504489B64@mailman.san.com>

Hi Frank,

The previous issue has gone away, but a slightly different problem still
occurs:

	MrSIDRasterBand::IRasterIO(): Failed to load image.
	specified scene out of range of image [50014]
======================================================
GDAL Overview Band information from the debugger:			
	nBand	1	int
	nRasterXSize	94	int
	nRasterYSize	75	int
	eDataType	GDT_Byte	GDALDataType
	eAccess	GA_ReadOnly	GDALAccess
	nBlockXSize	94	int
	nBlockYSize	75	int
	nBlocksPerRow	0	int
	nBlocksPerColumn	0	int
	bSubBlockingActive	0	int
	nSubBlocksPerRow	0	int
	nSubBlocksPerColumn	0	int
+	papoBlocks	0x00000000	GDALRasterBlock * *
	nBlockReads	0	int
	bForceCachedIO	0	int
====================================================

Again, I am accessing an overview directly and issuing a 
RasterIO(GF_Read,0,0,94,75,buffer,119,95,GDT_Byte,0,0).
I would guess that the things of interest are 
	a) I am requesting the full extent of overview
      b) I am requesting a scaled version of the image

Thank you for your help.

Rostic


-----Original Message-----
From: Sheykhet, Rostic 
Sent: Tuesday, October 18, 2005 12:59 PM
To: 'Frank Warmerdam'
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] JP2MrSID internal overviews problem

That took care of it. 

Thanks a lot

Rostic


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Monday, October 17, 2005 1:35 PM
To: Sheykhet, Rostic
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] JP2MrSID internal overviews problem

On 10/17/05, Sheykhet, Rostic <rsheykhet@sanz.com> wrote:
> Hi all,
>
> I am trying to access JPEG 2000 internal overview data. gdal_info
> reports that there are 12 overviews in the file.  When I try
>
> band = parentBand->GetOverview(nOverview);
...
> // CPLGetLastErrorMsg() =
> //"MrSIDRasterBand::IRasterIO(): Failed to load image. invalid or
empty
> scene speficied [50013]"


Rostic,

Yikes!  It seems that IRasterIO's on the explicit overviews using
the MrSID SDK was completely broken.  I think I likely broke it
circa Sept 15th but I'm not at all sure of that.

In any event, I have committed a fix and also added a test to the
"mrsid" gdalautotest script so such problems will come to light more
quickly in the future.  You can grab the fixed mrsiddataset.cpp at:

  http://www.gdal.org/srctree/frmts/mrsid/mrsiddataset.cpp

> I've looked at the code and it looks like it attempts to determine the
> best overview to use
> whithin the  RasterIO() call.  What are the rules for specifying
> overviews explicitly vs. letting the GDAL handle them?

Normally you can just do a RasterIO() request on the full resolution
layer and GDAL will use the most appropriate overview level as needed.
This aspect should have been working fine and is the normal case.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From todd.jellett at caris.com  Thu Oct 20 14:38:03 2005
From: todd.jellett at caris.com (Todd Jellett)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: Problem creating GeoTiff across International Date
	Line
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD4E1@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD4E1@ptolemy.topozone.com>
Message-ID: <4357E40B.3030207@caris.com>

Hi Ed,

The central meridian for the Mercator projection is 0.0. Your question 
provided a clue
and I tried changing the CM to 170.0 and this did not exhibit the 
problem we were
seeing (only one side of the GeoTiff being drawn - split at the IDL).

Problem is that the image came from a client (including the CM of 0.0). 
We then tried
to display the image on the vector "Map of the World" reprojected to the 
coordinate
system of the GeoTiff. Only a portion of the image displayed. 
Incidentally, the GeoTiff
does not span the IDL, it is close to the IDL (~150 to ~170).

I think I understand what is going on now.

Todd

Ed McNierney wrote:

>Todd -
>
>I don't see anything about GeoTIFFs in there <g>.  You're asking about
>pj_inv, pj_fwd, and proj, and you'll just have better luck on the proj4
>list.  I'd suggest posting to that list, and I'm replying to it, too.
>
>What is the central meridian of your Mercator projection?
>
>	- Ed 
>
>Ed McNierney
>President and Chief Mapmaker
>TopoZone.com / Maps a la carte, Inc.
>73 Princeton Street, Suite 305
>North Chelmsford, MA  01863
>ed@topozone.com
>(978) 251-4242 
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Todd Jellett
>Sent: Thursday, October 20, 2005 12:29 PM
>To: gdal-dev@lists.maptools.org
>Subject: [Gdal-dev] Problem creating GeoTiff across International Date
>Line
>
>Hi all,
>
>I have a question which is related to geotiff images, the international
>date line and proj4.
>It may ultimately belong on the proj4 list but since it relates to
>GeoTiff I'm posting here.
>
>Is it the intention that pj_inv can be used to convert a projected coord
>(say mercator) to lat/long then use pj_fwd to convert back to mercator
>units and get the same x, y mercator value?
>
>With the current implemetation of proj4 "adjlon" being used in pj_inv.c
>to make sure that the returned longitude is always within the range of
>+/- 180 degrees. While this is fine most of the time, it causes problems
>when working around the international date line.
>
>eg. I have a mercator coordinate for an image corner. note: the image
>spans the date line.
>1) x,y = (23370182, 22807431)
>
>2) results from  pj_inv
>     Lat, Long = (86.81, -150.06)
>
>3) results from pj_fwd
>     x,y = (-16705270,  22807431)
>
>The difference occurs because the orgininal longitude (before adjlon) of
>
>+209.04 was
>"corrected" to be within the range of -180. to +180 before being
>returned by pj_inv.
>The end result is an X coordinate which is 40 million meters east of
>where it originally was.
>Strictly speaking a longitude of -150.06 is the same location on the
>earth as +209.04 but when you project this point to x, y you do not get
>the same Y coordinate.
>
>Thanks
>Todd
>
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>  
>


From Robert.Denham at nrm.qld.gov.au  Wed Oct 19 20:00:03 2005
From: Robert.Denham at nrm.qld.gov.au (Denham Robert)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Raster Attribute Table Status
Message-ID: <66CE7F4ACF0C74439F9F6E0A56829302A45B8D@INDMAIL.lands.resnet.qg>

I was just wondering about the status of the GDALRasterAttributeTable
class, particularly its support for the HFA (Imagine) format.  I had a
play with gdal 1.3.1 and managed to access the table and create a new
one but couldn't save the table into the rasterband, since setting the
table doesn't seem to be implemented for this format (I get the message
ERROR 6: SetDefaultRAT() not implemented for this format.)
 
Is anyone working on this?  Is this likely to change in the short-medium
term?  
 
We also noticed a couple of typos in gdal.h that prevented the use of a
couple of functions such as  GDALRATSetValueAsString(). I can submit a
bug report if you like. 
 
 
Thanks
Robert Denham
 


************************************************************************
The information in this e-mail together with any attachments is
intended only for the person or entity to which it is addressed
and may contain confidential and/or privileged material.
Any form of review, disclosure, modification, distribution
and/or publication of this e-mail message is prohibited.  
If you have received this message in error, you are asked to
inform the sender as quickly as possible and delete this message
and any copies of this message from your computer and/or your
computer system network.  
************************************************************************



From rwaterman at digitalglobe.com  Thu Oct 20 10:47:26 2005
From: rwaterman at digitalglobe.com (Robert Waterman)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Vertical geoidal/ellipsoidal conversion
Message-ID: <2172930604C4BF4FAF0CC5FE84CA378902289089@COMAIL02.digitalglobe.com>

I need to do some vertical datum conversions.  Given a single X,Y,Z
point I need to be able to convert Z between ellipsoidal and geoidal
heights.  Can someone point me in the right direction for doing such
conversions?  I am working in Python and found the class
CoordinateTransformation in osr.py under FWTools0.9.8.  If this will do
what I want, can someone provide an example of how I would actually do
this?  Thanks for your time.
Regards,
Rob
 
Robert T. Waterman
Digital Mapping Analyst II
DigitalGlobe(r)
(303) 684-4330
rwaterman@digitalglobe.com
www.digitalglobe.com <http://www.digitalglobe.com/> 
 
The information contained in this message is intended only for the
person or entity to which it is addressed. It may contain DIGITALGLOBE
Proprietary or Confidential material. Any review, retransmission,
dissemination or other use of this information by persons or entities
other than the intended recipient is prohibited. If you received this
message in error, please contact the sender and delete or destroy this
message. Thank you.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051020/c37092cb/attachment.html
From alan at signal11.us  Thu Oct 20 17:48:16 2005
From: alan at signal11.us (Alan Ott)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] GDAL Plugin for Open Scene Graph
Message-ID: <435810A0.8060503@signal11.us>

GDAL and Open Scene Graph Communities,

I recently had need of the GDAL Plugin for Open Scene Graph and
discovered that it did not support a paletted color map. I added this
mode and have attached the file to this message, but have a few more
questions.

1. (For the OSG People) Why the call to image->flipVertical() at the
bottom? For all of my data, I have to re-flip it after loading.

2. (For the GDAL People) Is the RasterDataType guaranteed to be GDT_Byte
for Paletted data?

3. (For the GDAL People) What is the right thing to do if the Color
Table doesn't have an entry for the color specified (Line 408)?

4. For All Palette Interpretations besides RGB, the code is completely
untested and came from either WikiPedia or easyrgb.com. The rest of it
"works on my machine" (with my data), so if anyone could exercise it a
little more (on their machine, with their data, especially if you have a
CMYK or HSL paletted file), that would be great.

Alan.



-------------- next part --------------
A non-text attachment was scrubbed...
Name: ReaderWriterGDAL.zip
Type: application/x-zip-compressed
Size: 5184 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051020/7945a0b5/ReaderWriterGDAL.bin
From matt.wilkie at gov.yk.ca  Thu Oct 20 18:35:00 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdalwarp crashes with transform
Message-ID: <43581B94.20705@gov.yk.ca>

Hi, I may have found a bug. The command

gdalwarp bmng_yt.tif bmng_yt_al.tif \
-t_srs ESRI::z:\arcutils\prj\v9\yt_albers.prj

crashes when it reaches the 20 or 30% mark (the first time was 30, and 
the half a dozen times since then 20). A dialog box pops up offering to 
send debug info to microsoft.

yt_albers.prj is:

PROJCS["NAD_1983_Albers",GEOGCS["GCS_North_American_1983",DATUM["D_North_America
n_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UN
IT["Degree",0.0174532925199433]],PROJECTION["Albers"],PARAMETER["False_Easting",
500000.0],PARAMETER["False_Northing",500000.0],PARAMETER["Central_Meridian",-132
.5],PARAMETER["Standard_Parallel_1",61.66666666666666],PARAMETER["Standard_Paral
lel_2",68.0],PARAMETER["Latitude_Of_Origin",59.0],UNIT["Meter",1.0]]

the source image is:

I:\BlueMarbleNG>gdalinfo bmng_yt.tif
Driver: GTiff/GeoTIFF
Size is 8400, 4800
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235630016,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-150.002083,75.002083)
Pixel Size = (0.00416667,-0.00416667)
Metadata:
   AREA_OR_POINT=Area
   TIFFTAG_SOFTWARE=Adobe Photoshop 7.0
   TIFFTAG_DATETIME=2005:10:20 10:03:46
   TIFFTAG_XRESOLUTION=72
   TIFFTAG_YRESOLUTION=72
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (-150.0020833,  75.0020833) (150d 0'7.50"W, 75d 0'7.50"N)
Lower Left  (-150.0020833,  55.0020833) (150d 0'7.50"W, 55d 0'7.50"N)
Upper Right (-115.0020833,  75.0020833) (115d 0'7.50"W, 75d 0'7.50"N)
Lower Right (-115.0020833,  55.0020833) (115d 0'7.50"W, 55d 0'7.50"N)
Center      (-132.5020833,  65.0020833) (132d30'7.50"W, 65d 0'7.50"N)
Band 1 Block=8400x1 Type=Byte, ColorInterp=Red
Band 2 Block=8400x1 Type=Byte, ColorInterp=Green
Band 3 Block=8400x1 Type=Byte, ColorInterp=Blue




I'm using fwtools 1.0.04a

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu Oct 20 20:01:36 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] GDAL Plugin for Open Scene Graph
In-Reply-To: <435810A0.8060503@signal11.us>
References: <435810A0.8060503@signal11.us>
Message-ID: <931f8ea90510201701k4e04c4fbj1f1e4228d423b8b2@mail.gmail.com>

On 10/20/05, Alan Ott <alan@signal11.us> wrote:
> 2. (For the GDAL People) Is the RasterDataType guaranteed to be GDT_Byte
> for Paletted data?

Alan,

No, this is not guaranteed.  There are definately cases where
GDT_Int16 or GDT_UInt16 bands have palettes with more than 256
entries.

> 3. (For the GDAL People) What is the right thing to do if the Color
> Table doesn't have an entry for the color specified (Line 408)?

The color of pixel values not listed in the color tables is undefined.
Often treating them as transparent is appropriate.

> 4. For All Palette Interpretations besides RGB, the code is completely
> untested and came from either WikiPedia or easyrgb.com. The rest of it
> "works on my machine" (with my data), so if anyone could exercise it a
> little more (on their machine, with their data, especially if you have a
> CMYK or HSL paletted file), that would be great.

There are currently not formats I am aware of returning palettes in
any format other than RGB.  It would likely be safest to just not support
any other organization.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 20 20:09:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Vertical geoidal/ellipsoidal conversion
In-Reply-To: <2172930604C4BF4FAF0CC5FE84CA378902289089@COMAIL02.digitalglobe.com>
References: <2172930604C4BF4FAF0CC5FE84CA378902289089@COMAIL02.digitalglobe.com>
Message-ID: <931f8ea90510201709r3c203874o1645c97c1f10d4cc@mail.gmail.com>

On 10/20/05, Robert Waterman <rwaterman@digitalglobe.com> wrote:
>
> I need to do some vertical datum conversions.  Given a single X,Y,Z point I
> need to be able to convert Z between ellipsoidal and geoidal heights.  Can
> someone point me in the right direction for doing such conversions?  I am
> working in Python and found the class CoordinateTransformation in osr.py
> under FWTools0.9.8.  If this will do what I want, can someone provide an
> example of how I would actually do this?  Thanks for your time.

Robert,

The OGRCoordinateTransformation stuff attempts to accurately
handle Z changes due to conversion between ellipsoids; however,
it does not currently include any support for geodal issues.  I
haven't yet seriously contemplated incorporating such support
due to my limited understanding of the area and the seemingly
limited interest in such capabilities.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 20 20:11:47 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Raster Attribute Table Status
In-Reply-To: <66CE7F4ACF0C74439F9F6E0A56829302A45B8D@INDMAIL.lands.resnet.qg>
References: <66CE7F4ACF0C74439F9F6E0A56829302A45B8D@INDMAIL.lands.resnet.qg>
Message-ID: <931f8ea90510201711v16b57b0bx3bcdee2007af4ed6@mail.gmail.com>

On 10/19/05, Denham Robert <Robert.Denham@nrm.qld.gov.au> wrote:
> I was just wondering about the status of the GDALRasterAttributeTable
> class, particularly its support for the HFA (Imagine) format.  I had a
> play with gdal 1.3.1 and managed to access the table and create a new
> one but couldn't save the table into the rasterband, since setting the
> table doesn't seem to be implemented for this format (I get the message
> ERROR 6: SetDefaultRAT() not implemented for this format.)
>
> Is anyone working on this?  Is this likely to change in the short-medium
> term?
>
> We also noticed a couple of typos in gdal.h that prevented the use of a
> couple of functions such as  GDALRATSetValueAsString(). I can submit a
> bug report if you like.

Robert,

Patches for these bugs is welcome.

Currently GDALRasterAttributeTables can be read from
imagine format, and read/saved in XML (.aux.xml) format
when "pam" support is enabled.

It does seem natural to implement write support for imagine
format, but this wasn't a pressing issue for the project things
were initially implemented for.   I can't give any real timeline
for further work on this area.  Well, I will try and incorporate
any fixes you provide quickly of course.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 20 20:58:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdalwarp crashes with transform
In-Reply-To: <43581B94.20705@gov.yk.ca>
References: <43581B94.20705@gov.yk.ca>
Message-ID: <931f8ea90510201758s52f0cb75r5370bda11db7bdce@mail.gmail.com>

On 10/20/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi, I may have found a bug. The command
>
> gdalwarp bmng_yt.tif bmng_yt_al.tif \
> -t_srs ESRI::z:\arcutils\prj\v9\yt_albers.prj
>
> crashes when it reaches the 20 or 30% mark (the first time was 30, and
> the half a dozen times since then 20). A dialog box pops up offering to
> send debug info to microsoft.

Matt,

I tried recreating a TIFF file that is essentially the same
as yours but did not get a crash with the FWTools 1.0.0a4
binaries on win32 using your commandline.

So, the problem may be particular in some way not
evident to me.  Could you try reproducing the problem
with a smaller data file, and submitting all the details as
a bug report?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Oct 21 12:05:02 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] OGR and GEOS Integration
Message-ID: <931f8ea90510210905h1b0ece83v82b36e9dc57702e3@mail.gmail.com>

Folks,

I have completed work so that OGR's GEOS integration is
accomplished using the new GEOS C API when built against
the GEOS 3.0.0 (CVS) tree.  Amoung other things this allows
a Visual Studio .NET built version of GEOS to be used with
a Visual Studio 6 built version of GDAL/OGR.

The FWTools 1.0.0a5 release will include this capability.

OGR is *supposed* to use the C++ API when built with versions
of GEOS before 3.0.0 but let me know if you encounter any
problems.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Fri Oct 21 12:39:53 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ORA-13199 when having a prj file
Message-ID: <435919D9.5040103@xs4all.nl>

Hi list,

when loading a shapefile with a prj file I got the following error when 
using ogr2ogr (GDAL 1.3.1) on an Oracle 10g R2 database (deleting the 
prj file solved the issue):

C:\Program Files\gdal>ogr2ogr -update -f "OCI" OCI:system/psv9570@PORCL 
adrloc.shp
ERROR 1: ORA-13199:
ORA-06512: at "MDSYS.MD", line 1723
ORA-06512: at "MDSYS.MDERR", line 8
ORA-06512: at "MDSYS.CS_SRS_TRIGGER", line 2
ORA-04088: error during execution of trigger 'MDSYS.CS_SRS_TRIGGER'
 in INSERT INTO MDSYS.CS_SRS (SRID, WKTEXT, CS_NAME)  VALUES 
(1000000124,'PROJCS
["unnamed",GEOGCS["unnamed",DATUM["Amersfoort",SPHEROID["Bessel - 
1841",6377397.
155,299.152812825426]],PRIMEM["Greenwich",0],UNIT["Decimal 
Degree",0.01745329251
99433]],PROJECTION["Stereographic"],PARAMETER["latitude_of_origin",52.156160556]
,PARAMETER["central_meridian",5.387638889],PARAMETER["scale_factor",0.9999079],P
ARAMETER["false_easting",155000],PARAMETER["false_northing",463000],UNIT["METER"
,1]]', 'unnamed' )

Best regards,
Bart

From ealpert at digitalglobe.com  Fri Oct 21 13:01:55 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ORA-13199 when having a prj file
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BAC5@COMAIL01.digitalglobe.com>



Not sure this is a GDAL problem:

http://www.error-code.org.uk/view.asp?cl=ORACLE&p=ORA&ec=13139

The error code says to contact oracle support.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Bart van den
Eijnden
Sent: Friday, October 21, 2005 10:40 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] ORA-13199 when having a prj file


Hi list,

when loading a shapefile with a prj file I got the following error when 
using ogr2ogr (GDAL 1.3.1) on an Oracle 10g R2 database (deleting the 
prj file solved the issue):

C:\Program Files\gdal>ogr2ogr -update -f "OCI" OCI:system/psv9570@PORCL 
adrloc.shp
ERROR 1: ORA-13199:
ORA-06512: at "MDSYS.MD", line 1723
ORA-06512: at "MDSYS.MDERR", line 8
ORA-06512: at "MDSYS.CS_SRS_TRIGGER", line 2
ORA-04088: error during execution of trigger 'MDSYS.CS_SRS_TRIGGER'  in
INSERT INTO MDSYS.CS_SRS (SRID, WKTEXT, CS_NAME)  VALUES 
(1000000124,'PROJCS
["unnamed",GEOGCS["unnamed",DATUM["Amersfoort",SPHEROID["Bessel - 
1841",6377397.
155,299.152812825426]],PRIMEM["Greenwich",0],UNIT["Decimal 
Degree",0.01745329251
99433]],PROJECTION["Stereographic"],PARAMETER["latitude_of_origin",52.15
6160556]
,PARAMETER["central_meridian",5.387638889],PARAMETER["scale_factor",0.99
99079],P
ARAMETER["false_easting",155000],PARAMETER["false_northing",463000],UNIT
["METER"
,1]]', 'unnamed' )

Best regards,
Bart
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From kennedy at vrco.com  Fri Oct 21 15:49:37 2005
From: kennedy at vrco.com (Bobby Kennedy)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Double question: Spheres and Ellipsoids,
	Central Latitude 
Message-ID: <43594651.3060101@vrco.com>


Hello all,

Two questions, just figured I'd roll it into one email....  The little 
main() below illustrates both questions (I'm using gdal 1.2.3, and proj 
4.4.8).

1) With regards to proj.4 and the projections that only support 
spherical solutions (e.g. Equirectangular), I saw the recent post "eqc 
warping problem" where you mention a possible work around for the z 
changes, do you have plans on implementing that?  Or even better, do you 
know if there are plans to add support for ellipsoids to the these 
projections (it's mentioned on the proj.4 site under 'Future plans', any 
idea of the time frame)?

2) Second question is regarding the code below and the central latitude 
for my equirectangular projection. It doesn't seem to be having any 
effect.  As can be seen in the code, I do a: 
OSRSetEquirectangular(ecWGS84, 30, 110, 0, 0).  When I convert the 
geographic point (110,30,0), I would expect to see a output point of 
(0,0,whatever), but the Y is not 0, instead it appears to the meter 
location of the 30 deg lat.  Is this a fixed bug and I'm just out of 
date, or something else?  Any ideas?

Thanks a lot,

  Bobby


#include "ogr_srs_api.h"
#include <stdio.h>

int main(int argc, char**argv)
{
  // Create a geographic WGS84 srf
  OGRSpatialReferenceH gdWGS84 = OSRNewSpatialReference(NULL);
  OSRSetWellKnownGeogCS(gdWGS84, "WGS84");

  // Create a EC WGS84 srf
  OGRSpatialReferenceH ecWGS84 = OSRNewSpatialReference(NULL);
  OSRSetProjCS( ecWGS84, "EC (WGS84)." );
  OSRSetEquirectangular(ecWGS84, 30, 110, 0, 0);
  OSRSetWellKnownGeogCS(ecWGS84, "WGS84");

  // Create a coordinate transformation form GD to EC
  OGRCoordinateTransformationH gd2ec;
  gd2ec = OCTNewCoordinateTransformation(gdWGS84, ecWGS84);

  // Setup a coord
  double x = 110;
  double y = 30;
  double z = 0.000000;
 
  // Convert form GD to EC
  OCTTransform(gd2ec, 1, &x, &y, &z);

  // Survey says...
  // x = 0.00000000000000000
  // y = 3321065.1468621432    (should be 0???)
  // z = -5312.5797059889883   (Expected b/c EC only supports spherical)

  return 0;
}

-- 
Bobby Kennedy
Software Engineer
VRCO, Inc.
757-456-5500


From warmerdam at pobox.com  Fri Oct 21 16:24:49 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Double question: Spheres and Ellipsoids,
	Central Latitude
In-Reply-To: <43594651.3060101@vrco.com>
References: <43594651.3060101@vrco.com>
Message-ID: <931f8ea90510211324iee78615h3f34c8eb1c59300c@mail.gmail.com>

On 10/21/05, Bobby Kennedy <kennedy@vrco.com> wrote:
>
> Hello all,
>
> Two questions, just figured I'd roll it into one email....  The little
> main() below illustrates both questions (I'm using gdal 1.2.3, and proj
> 4.4.8).
>
> 1) With regards to proj.4 and the projections that only support
> spherical solutions (e.g. Equirectangular), I saw the recent post "eqc
> warping problem" where you mention a possible work around for the z
> changes, do you have plans on implementing that?  Or even better, do you
> know if there are plans to add support for ellipsoids to the these
> projections (it's mentioned on the proj.4 site under 'Future plans', any
> idea of the time frame)?

Bobby,

You would need to ask Gerald Evenden about this.  The math is far beyond me,
so such things are done as he chooses.

> 2) Second question is regarding the code below and the central latitude
> for my equirectangular projection. It doesn't seem to be having any
> effect.  As can be seen in the code, I do a:
> OSRSetEquirectangular(ecWGS84, 30, 110, 0, 0).  When I convert the
> geographic point (110,30,0), I would expect to see a output point of
> (0,0,whatever), but the Y is not 0, instead it appears to the meter
> location of the 30 deg lat.  Is this a fixed bug and I'm just out of
> date, or something else?  Any ideas?

With the PROJ.4 cs2cs
cs2cs +proj=latlong +datum=WGS84 +to +proj=eqc +lat_ts=30 +lon_0=110
+datum=WGS84
110 30 0
0.00    3321065.15 -5312.58

I find different values of +lat_ts (or +lat_0) have no effect.  I wonder
if I am confused about what parameters apply to this projection.

I would suggest you email Gerald, or the PROJ.4 list for an answer
on this.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From paul at qwikcast.com  Fri Oct 21 01:17:31 2005
From: paul at qwikcast.com (Paul Xander)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Warping from a full disk image of the Earth
Message-ID: <435879EB.1040208@qwikcast.com>

Hi,
    I've been trying to determine if 'gdalwarp' is the tool for
reprojecting a section of a jpeg full disk image of the earth into a
standard format such as Lambert Equal Area.

Paul


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051020/8de99546/attachment.html
From ealpert at digitalglobe.com  Fri Oct 21 17:21:34 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Warping from a full disk image of the Earth
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BAC8@COMAIL01.digitalglobe.com>

Yes but of course the cavaet is you have to know the projection of your
"full disk" image.
 
-e

	-----Original Message-----
	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Paul Xander
	Sent: Thursday, October 20, 2005 11:18 PM
	To: gdal-dev@lists.maptools.org
	Subject: [Gdal-dev] Warping from a full disk image of the Earth
	
	
	Hi,
	    I've been trying to determine if 'gdalwarp' is the tool for
	reprojecting a section of a jpeg full disk image of the earth
into a
	standard format such as Lambert Equal Area.
	
	Paul
	
	
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051021/93d85d5e/attachment.html
From warmerdam at pobox.com  Fri Oct 21 17:30:22 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Warping from a full disk image of the Earth
In-Reply-To: <435879EB.1040208@qwikcast.com>
References: <435879EB.1040208@qwikcast.com>
Message-ID: <931f8ea90510211430j7799a9ccq9cf0f2e28f9f632e@mail.gmail.com>

On 10/21/05, Paul Xander <paul@qwikcast.com> wrote:
>  Hi,
>      I've been trying to determine if 'gdalwarp' is the tool for
>  reprojecting a section of a jpeg full disk image of the earth into a
>  standard format such as Lambert Equal Area.

Paul,

Yes, gdalwarp can do this assuming you have appropriate georeferencing
for the image.  If the image has a world file providing the coordinates,
you can supply the coordinate system with the -s_srs switch.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Fri Oct 21 17:40:29 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Warping from a full disk image of the Earth
In-Reply-To: <435879EB.1040208@qwikcast.com>
Message-ID: <BF7ED88D.205D2%ed@topozone.com>

Paul -

Could you explain what a ?full disk image? is?  If it?s a planar image, then
it must be projected somehow, and you?ll need to know the details of the
current projection before you can then use gdalwarp to convert it to a more
convenient projection.

     - Ed

Ed McNierney
TopoZone.com


On 10/21/05 1:17 AM, "Paul Xander" <paul@qwikcast.com> wrote:

> Hi,
>     I've been trying to determine if 'gdalwarp' is the tool for
> reprojecting a section of a jpeg full disk image of the earth into a
> standard format such as Lambert Equal Area.
> 
> Paul
> 
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051021/e6bb8a3e/attachment.html
From matt.wilkie at gov.yk.ca  Fri Oct 21 19:12:11 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] linux vs windows performance 
Message-ID: <435975CB.8070901@gov.yk.ca>

Hello,

In case anyone wonders about the relative performance of gdal on Windows 
vs Linux:

Test case: gdal_merge of 154 dems in ArcInfo GRID format totalling 1gb.

Windows, from local disk to local disk:	1hr 15min
Linux, from network to local disk: 15 min

linux machine is 450Mhz & 768mb ram,
Windows is 3Ghz & 2Gb ram,
both dual xeons

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Fri Oct 21 19:38:33 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] debugging gdal  errors
Message-ID: <43597BF9.7010802@gov.yk.ca>

Hello, Does anyone know how to debug an error like this:

# gdal_translate one.tif two.tif
Input file size is 24001, 13201
0..10..20..30..40..50..60..70.ERROR 1: one.tif:0: Invalid strip byte 
count, strip 9601
ERROR 1: TIFFReadEncodedStrip() failed.

...snip...

Looking at one.tif with openev seems to work.


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From ed at topozone.com  Fri Oct 21 22:57:02 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] linux vs windows performance 
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD4E6@ptolemy.topozone.com>

Matt -

I guess you've proven the benefit of translating from network to local
disk!  There is no particular reason (given the limited info you gave)
to think that the OS makes much if any difference.

Was the Windows copy from one local disk to the same physical local
disk?  And was that an IDE disk?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Wilkie
Sent: Friday, October 21, 2005 7:12 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] linux vs windows performance 

Hello,

In case anyone wonders about the relative performance of gdal on Windows
vs Linux:

Test case: gdal_merge of 154 dems in ArcInfo GRID format totalling 1gb.

Windows, from local disk to local disk:	1hr 15min
Linux, from network to local disk: 15 min

linux machine is 450Mhz & 768mb ram,
Windows is 3Ghz & 2Gb ram,
both dual xeons

cheers,

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From moon_inwell at 163.com  Sun Oct 23 04:47:17 2005
From: moon_inwell at 163.com (lky)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] who have the examples of reading data from shape file?
Message-ID: <000c01c5d7ae$661c4fe0$7ef9a8c0@lky>

Hello,every friends:
    I'm a new learner for GDAL open source. I want to read the data from the shape file. Who have the examples for this .Please send to me, thanks a lot.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051023/2b65a7b3/attachment.html
From ealpert at digitalglobe.com  Sun Oct 23 11:02:34 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] who have the examples of reading data from shape file?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233072FDC@COMAIL01.digitalglobe.com>

What programing language?
 
There is a general tutorial on the web page.
 
See: http://www.remotesensing.org/gdal/ogr/ogr_apitut.html

________________________________

From: gdal-dev-bounces@lists.maptools.org on behalf of lky
Sent: Sun 10/23/2005 2:47 AM
To: gdal ????
Subject: [Gdal-dev] who have the examples of reading data from shape file?


Hello,every friends:
    I'm a new learner for GDAL open source. I want to read the data from the shape file. Who have the examples for this .Please send to me, thanks a lot.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051023/cbf5e9bc/attachment.html
From kruland at ku.edu  Sun Oct 23 13:45:35 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: Very odd problem SWIG & PERL
In-Reply-To: <1130086379.435bbfeb67a5b@webmail2.hut.fi>
References: <8B319E5A30FF4A48BE7EEAAF609DB23306BAB0@COMAIL01.digitalglobe.com>
	<43590F63.6080204@ku.edu>
	<1130086379.435bbfeb67a5b@webmail2.hut.fi>
Message-ID: <435BCC3F.6040200@ku.edu>


Ari,

The best practice so far is to 'use strict' and use 'my'.  Also, this 
appears to really be a swig bug and is very similar to this one:

https://sourceforge.net/tracker/index.php?func=detail&aid=1325221&group_id=1645&atid=101645

Even though this particular bugzilla was closed as invalid, I'm still 
trying to get a perl wizard there to look into it.

Kevin

jolma@cc.hut.fi wrote:

>I hope there is no problem exposing this to the gdal-list. The summary is: when
>working with gdal+swig/perl always use "my" or explicitly undef any gdal objects
>you have.
>
>Look at http://mailman.cs.uchicago.edu/pipermail/swig/2001-April/002424.html
>
>and the resulting thread. That's rather old but it seems there still isn't any
>solution to this in swig/perl.
>
>... or this is what I think this is, after poking around with Devel::Peek
>
>Ari
>
>
>On Fri, 21 Oct 2005 10:55:15 -0500 Kevin Ruland <kruland@ku.edu> wrote:
>
>  
>
>>Ari,
>>
>>I've cc'd Ethan (irc westside) just so he knows we're trying to do
>>something about this.
>>
>>I've reduced the buggy example to much less:
>>
>>#!/usr/bin/perl
>>
>>use ogr;
>>$input = ogr::Open('./gdalautotest/ogr/data/poly.shp');
>>$in_layer = $input->GetLayerByName('poly');  #  Ref line 1
>>
>>$driver = ogr::GetDriverByName( 'MapInfo File');
>>
>>#my $ot;   # Ref line 2
>>$ot = $driver->CreateDataSource('./myoutput');
>>print "After CreateDataSource\n";
>> 
>>#$ot = undef;  # Ref line 3
>>
>>print "Exit\n";
>>
>>
>>I slipped a printf in the perl/ogr_wrap.cpp file in the XS(
>>_wrap_delete_DataSource) which did this:
>>
>>printf( "Calling _wrap_delete_Datasource %x\n",arg1);
>>
>>and reinstalled the perl module.  I did this to demonstrate what's
>>going on.
>>
>>The scripts creates two different DataSource objects:  $input and $ot. 
>>We expect that both of these will be deleted when the program exits. 
>>However, if you execute the program as it's written (I retyped so there
>>might be some typo's), you will notice that only one DataSource is
>>deleted ($input).
>>
>>If you rerun with either Ref line 2 or Ref line 3 uncommented, then you
>>will see the second destructor getting called.  Ref line 3 is pretty
>>obvious because it immediately removes the reference and forces garbage
>>collection.  I am uncertain why Ref line 2 corrects the problem.
>>
>>The most interesting thing I discovered is if you comment out Ref line
>>1
>>(and leave 2 & 3 commented out), then you will also see both
>>destructors
>>called.
>>
>>I've duplicated this exact same program in the python bindings and it
>>works as expected reguardless of which lines are commented in and out.
>>
>>I attempted to create a test swig .i file which does not use gdal/ogr
>>which replicates this problem but I have not yet been able to
>>reproduce.
>>
>>There might be some kind of memory corruption going on.  I've instered
>>a
>>bunch of diagnostics in both ogr.pm and ogr_wrap.cpp and see wierd
>>things.
>>
>>Kevin
>>
>>Ethan Alpert wrote:
>>
>>    
>>
>>>Since I'm completely dumbfounded by the following problem I reaching
>>>      
>>>
>>for
>>    
>>
>>>straws in the hopes someone has had something similar happen.
>>>
>>>Here's some code that uses a swig generated module (hope the formating
>>>works):
>>>
>>>#!/usr/bin/perl
>>>
>>>use ogr;
>>>
>>>$input = ogr::Open('./gdalautotest-1.3.1/ogr/data/poly.shp');
>>>$in_layer = $input->GetLayerByName('poly');
>>>$driver = ogr::GetDriverByName('MapInfo File');
>>>$ot = $driver->CreateDataSource('./myoutput');
>>>#my $ot = $driver->CreateDataSource('./myoutput');
>>>$out_layer = $ot->CreateLayer('out',undef,$ogr::wkbPolygon);
>>>
>>>$in_defn= $in_layer->GetLayerDefn();
>>>
>>>
>>>for($i=0; $i < $in_defn->GetFieldCount(); $i++) {
>>>       $col = $in_defn->GetFieldDefn($i);
>>>       $out_layer->CreateField($col,1);
>>>}
>>>
>>>while($feat = $in_layer->GetNextFeature()) {
>>>       $tmp = $feat->Clone();
>>>       $out_layer->CreateFeature($tmp);
>>>}
>>>$out_layer->SyncToDisk();
>>>
>>>
>>>This code produces bogus output. However if I remove the comment and
>>>comment the line above it the code works. Now clearly this is *bad*
>>>      
>>>
>>perl
>>    
>>
>>>but the fact that using "my" in one place fixes it confuses me.
>>> 
>>>
>>>      
>>>


From ari.jolma at tkk.fi  Sun Oct 23 18:22:13 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: Very odd problem SWIG & PERL
In-Reply-To: <435BCC3F.6040200@ku.edu>
References: <8B319E5A30FF4A48BE7EEAAF609DB23306BAB0@COMAIL01.digitalglobe.com>
	<43590F63.6080204@ku.edu>
	<1130086379.435bbfeb67a5b@webmail2.hut.fi>
	<435BCC3F.6040200@ku.edu>
Message-ID: <1130106133.435c0d15592bb@webmail1.hut.fi>

On Sun, 23 Oct 2005 12:45:35 -0500 Kevin Ruland <kruland@ku.edu> wrote:

> 
> Ari,
> 
> The best practice so far is to 'use strict' and use 'my'.  Also, this 
> appears to really be a swig bug and is very similar to this one:
> 
> https://sourceforge.net/tracker/index.php?func=detail&aid=1325221&group_
> id=1645&atid=101645
> 
> Even though this particular bugzilla was closed as invalid, I'm still 
> trying to get a perl wizard there to look into it.


Looks more like a swig "feature":
http://mailman.cs.uchicago.edu/pipermail/swig/2001-April/002428.html

Swig makes the object as a kind of russian wood doll. In this case the objects
are created in an equal way in ogr_wrap.cpp and they result in similar perl
variables (when examined with Devel::Peek) but for some reason Perl deletes the
inside doll first (of the 2nd object) if left for the global destructor (and I
don't think Perl can be blamed for doing so) and that causes Swig's (too fragile
in this sense seems to me) system to fail. This is also very similar to the
reference "feature" we have (keep the parent alive as long as children are
used). I don't think that we can do much with this now.

Ari


> 
> Kevin
> 
> jolma@cc.hut.fi wrote:
> 
> >I hope there is no problem exposing this to the gdal-list. The summary
> is: when
> >working with gdal+swig/perl always use "my" or explicitly undef any
> gdal objects
> >you have.
> >
> >Look at
> http://mailman.cs.uchicago.edu/pipermail/swig/2001-April/002424.html
> >
> >and the resulting thread. That's rather old but it seems there still
> isn't any
> >solution to this in swig/perl.
> >
> >... or this is what I think this is, after poking around with
> Devel::Peek
> >
> >Ari
> >
> >
> >On Fri, 21 Oct 2005 10:55:15 -0500 Kevin Ruland <kruland@ku.edu> wrote:
> >
> >  
> >
> >>Ari,
> >>
> >>I've cc'd Ethan (irc westside) just so he knows we're trying to do
> >>something about this.
> >>
> >>I've reduced the buggy example to much less:
> >>
> >>#!/usr/bin/perl
> >>
> >>use ogr;
> >>$input = ogr::Open('./gdalautotest/ogr/data/poly.shp');
> >>$in_layer = $input->GetLayerByName('poly');  #  Ref line 1
> >>
> >>$driver = ogr::GetDriverByName( 'MapInfo File');
> >>
> >>#my $ot;   # Ref line 2
> >>$ot = $driver->CreateDataSource('./myoutput');
> >>print "After CreateDataSource\n";
> >> 
> >>#$ot = undef;  # Ref line 3
> >>
> >>print "Exit\n";
> >>
> >>
> >>I slipped a printf in the perl/ogr_wrap.cpp file in the XS(
> >>_wrap_delete_DataSource) which did this:
> >>
> >>printf( "Calling _wrap_delete_Datasource %x\n",arg1);
> >>
> >>and reinstalled the perl module.  I did this to demonstrate what's
> >>going on.
> >>
> >>The scripts creates two different DataSource objects:  $input and
> $ot. 
> >>We expect that both of these will be deleted when the program exits. 
> >>However, if you execute the program as it's written (I retyped so
> there
> >>might be some typo's), you will notice that only one DataSource is
> >>deleted ($input).
> >>
> >>If you rerun with either Ref line 2 or Ref line 3 uncommented, then
> you
> >>will see the second destructor getting called.  Ref line 3 is pretty
> >>obvious because it immediately removes the reference and forces
> garbage
> >>collection.  I am uncertain why Ref line 2 corrects the problem.
> >>
> >>The most interesting thing I discovered is if you comment out Ref
> line
> >>1
> >>(and leave 2 & 3 commented out), then you will also see both
> >>destructors
> >>called.
> >>
> >>I've duplicated this exact same program in the python bindings and it
> >>works as expected reguardless of which lines are commented in and
> out.
> >>
> >>I attempted to create a test swig .i file which does not use gdal/ogr
> >>which replicates this problem but I have not yet been able to
> >>reproduce.
> >>
> >>There might be some kind of memory corruption going on.  I've
> instered
> >>a
> >>bunch of diagnostics in both ogr.pm and ogr_wrap.cpp and see wierd
> >>things.
> >>
> >>Kevin
> >>
> >>Ethan Alpert wrote:
> >>
> >>    
> >>
> >>>Since I'm completely dumbfounded by the following problem I reaching
> >>>      
> >>>
> >>for
> >>    
> >>
> >>>straws in the hopes someone has had something similar happen.
> >>>
> >>>Here's some code that uses a swig generated module (hope the
> formating
> >>>works):
> >>>
> >>>#!/usr/bin/perl
> >>>
> >>>use ogr;
> >>>
> >>>$input = ogr::Open('./gdalautotest-1.3.1/ogr/data/poly.shp');
> >>>$in_layer = $input->GetLayerByName('poly');
> >>>$driver = ogr::GetDriverByName('MapInfo File');
> >>>$ot = $driver->CreateDataSource('./myoutput');
> >>>#my $ot = $driver->CreateDataSource('./myoutput');
> >>>$out_layer = $ot->CreateLayer('out',undef,$ogr::wkbPolygon);
> >>>
> >>>$in_defn= $in_layer->GetLayerDefn();
> >>>
> >>>
> >>>for($i=0; $i < $in_defn->GetFieldCount(); $i++) {
> >>>       $col = $in_defn->GetFieldDefn($i);
> >>>       $out_layer->CreateField($col,1);
> >>>}
> >>>
> >>>while($feat = $in_layer->GetNextFeature()) {
> >>>       $tmp = $feat->Clone();
> >>>       $out_layer->CreateFeature($tmp);
> >>>}
> >>>$out_layer->SyncToDisk();
> >>>
> >>>
> >>>This code produces bogus output. However if I remove the comment and
> >>>comment the line above it the code works. Now clearly this is *bad*
> >>>      
> >>>
> >>perl
> >>    
> >>
> >>>but the fact that using "my" in one place fixes it confuses me.
> >>> 
> >>>
> >>>      
> >>>
> 
> 

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From jolma at cc.hut.fi  Sun Oct 23 12:52:59 2005
From: jolma at cc.hut.fi (jolma@cc.hut.fi)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: Very odd problem SWIG & PERL
In-Reply-To: <43590F63.6080204@ku.edu>
References: <8B319E5A30FF4A48BE7EEAAF609DB23306BAB0@COMAIL01.digitalglobe.com>
	<43590F63.6080204@ku.edu>
Message-ID: <1130086379.435bbfeb67a5b@webmail2.hut.fi>

I hope there is no problem exposing this to the gdal-list. The summary is: when
working with gdal+swig/perl always use "my" or explicitly undef any gdal objects
you have.

Look at http://mailman.cs.uchicago.edu/pipermail/swig/2001-April/002424.html

and the resulting thread. That's rather old but it seems there still isn't any
solution to this in swig/perl.

... or this is what I think this is, after poking around with Devel::Peek

Ari


On Fri, 21 Oct 2005 10:55:15 -0500 Kevin Ruland <kruland@ku.edu> wrote:

> 
> Ari,
> 
> I've cc'd Ethan (irc westside) just so he knows we're trying to do
> something about this.
> 
> I've reduced the buggy example to much less:
> 
> #!/usr/bin/perl
> 
> use ogr;
> $input = ogr::Open('./gdalautotest/ogr/data/poly.shp');
> $in_layer = $input->GetLayerByName('poly');  #  Ref line 1
> 
> $driver = ogr::GetDriverByName( 'MapInfo File');
> 
> #my $ot;   # Ref line 2
> $ot = $driver->CreateDataSource('./myoutput');
> print "After CreateDataSource\n";
>  
> #$ot = undef;  # Ref line 3
> 
> print "Exit\n";
> 
> 
> I slipped a printf in the perl/ogr_wrap.cpp file in the XS(
> _wrap_delete_DataSource) which did this:
> 
> printf( "Calling _wrap_delete_Datasource %x\n",arg1);
> 
> and reinstalled the perl module.  I did this to demonstrate what's
> going on.
> 
> The scripts creates two different DataSource objects:  $input and $ot. 
> We expect that both of these will be deleted when the program exits. 
> However, if you execute the program as it's written (I retyped so there
> might be some typo's), you will notice that only one DataSource is
> deleted ($input).
> 
> If you rerun with either Ref line 2 or Ref line 3 uncommented, then you
> will see the second destructor getting called.  Ref line 3 is pretty
> obvious because it immediately removes the reference and forces garbage
> collection.  I am uncertain why Ref line 2 corrects the problem.
> 
> The most interesting thing I discovered is if you comment out Ref line
> 1
> (and leave 2 & 3 commented out), then you will also see both
> destructors
> called.
> 
> I've duplicated this exact same program in the python bindings and it
> works as expected reguardless of which lines are commented in and out.
> 
> I attempted to create a test swig .i file which does not use gdal/ogr
> which replicates this problem but I have not yet been able to
> reproduce.
> 
> There might be some kind of memory corruption going on.  I've instered
> a
> bunch of diagnostics in both ogr.pm and ogr_wrap.cpp and see wierd
> things.
> 
> Kevin
> 
> Ethan Alpert wrote:
> 
> >
> >
> >Since I'm completely dumbfounded by the following problem I reaching
> for
> >straws in the hopes someone has had something similar happen.
> >
> >Here's some code that uses a swig generated module (hope the formating
> >works):
> >
> >#!/usr/bin/perl
> >
> >use ogr;
> >
> >$input = ogr::Open('./gdalautotest-1.3.1/ogr/data/poly.shp');
> >$in_layer = $input->GetLayerByName('poly');
> >$driver = ogr::GetDriverByName('MapInfo File');
> >$ot = $driver->CreateDataSource('./myoutput');
> >#my $ot = $driver->CreateDataSource('./myoutput');
> >$out_layer = $ot->CreateLayer('out',undef,$ogr::wkbPolygon);
> >
> >$in_defn= $in_layer->GetLayerDefn();
> >
> >
> >for($i=0; $i < $in_defn->GetFieldCount(); $i++) {
> >        $col = $in_defn->GetFieldDefn($i);
> >        $out_layer->CreateField($col,1);
> >}
> >
> >while($feat = $in_layer->GetNextFeature()) {
> >        $tmp = $feat->Clone();
> >        $out_layer->CreateFeature($tmp);
> >}
> >$out_layer->SyncToDisk();
> >
> >
> >This code produces bogus output. However if I remove the comment and
> >comment the line above it the code works. Now clearly this is *bad*
> perl
> >but the fact that using "my" in one place fixes it confuses me.
> >  
> >
> 

From Ken.Boss at dnr.state.mn.us  Mon Oct 24 14:56:03 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problems with gdal_merge-created geotiffs
Message-ID: <s35ce812.024@co5.dnr.state.mn.us>

Hello Frank--

I created a series of tiled geotiffs with gdal_merge.py from gdal-1.3.0 on Solaris.  Now I want to translate them to ECW (with FWTools-1.0.0a5 on Windows), but for some (not all) of them I get:

ERROR 1: d:\ip_scratch_space\pod1997.tif:0: Invalid strip byte count, strip 0
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

All of the problem images contain significant offsite.  I can display them without difficulty in a couple of commercial packages and OpenEV, but I can't process them with gdal.  This looks like http://bugzilla.remotesensing.org/show_bug.cgi?id=329.  

I've worked around the problem by recreating the images using the -init argument to gdal_merge.py, which works fine, but perhaps that bug could still be squashed?  I can provide a sample problem image if that would help...

--Ken Boss
  MN DNR Forestry



From warmerdam at pobox.com  Mon Oct 24 15:30:37 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problems with gdal_merge-created geotiffs
In-Reply-To: <s35ce812.024@co5.dnr.state.mn.us>
References: <s35ce812.024@co5.dnr.state.mn.us>
Message-ID: <931f8ea90510241230o72cd9be4h3813113c061dfd0b@mail.gmail.com>

On 10/24/05, Ken Boss <Ken.Boss@dnr.state.mn.us> wrote:
> Hello Frank--
>
> I created a series of tiled geotiffs with gdal_merge.py from gdal-1.3.0 on Solaris.  Now I want to translate them to ECW (with FWTools-1.0.0a5 on Windows), but for some (not all) of them I get:
>
> ERROR 1: d:\ip_scratch_space\pod1997.tif:0: Invalid strip byte count, strip 0
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
> All of the problem images contain significant offsite.  I can display them without difficulty in a couple of commercial packages and OpenEV, but I can't process them with gdal.  This looks like http://bugzilla.remotesensing.org/show_bug.cgi?id=329.
>
> I've worked around the problem by recreating the images using the -init argument to gdal_merge.py, which works fine, but perhaps that bug could still be squashed?  I can provide a sample problem image if that would help...

Ken,

I suspect this has to do with unset tiles but that wasn't the exact
problem in Bug 329.  In that case the tile/strip read back was
incomplete but not apparently of zero size.

I have successfully reproduced your problem and created a
new bug report for the issue.

  http://bugzilla.remotesensing.org/show_bug.cgi?id=975

I agree this needs to be fixed.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rayg at daylongraphics.com  Mon Oct 24 16:22:00 2005
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] HSL samples?
Message-ID: <435D4268.1080100@daylongraphics.com>

Does anyone know where one can get GDAL-readable HSL and CMYK encoded 
images for read testing?

Ray

From mark.sheridan at ermapper.com  Sun Oct 23 23:48:36 2005
From: mark.sheridan at ermapper.com (Mark Sheridan)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
Message-ID: <200510241148249.SM04924@grolsch>

Hi Everyone,

The release candidate of the ECW JPEG 2000 Source Code SDK is available from
the ER Mapper website:

http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_VERSION_ID=284

Version 3.3 includes the following enhancements:

. Numerous bug fixes and enhancements 
. functional ECWP on platforms other than Windows 
. Fix to lossless JPEG 2000 compression 
. Removal of the restriction on distribution of "Server Software" from the
GPL-style Public Use License Agreement 
. Bug fixed in lossless JPEG 2000 compression, where previously a tiny
fraction of pixels would be compressed with a value +/-1 with respect to the
input 
. Functional static library builds for NCSEcw, NCSUtil, and NCScnet 
. A new build structure called "libecwj2" providing single-library shared
and static builds 
. libecwj2 makefiles for gcc/g++ on Solaris, Linux and Mac OS X 
. inclusion of the sample code that formerly shipped with the binary
distribution, together with makefiles for the libecwj2 shared and static
libraries 

Regards,
Mark


From pgao at esri.com  Mon Oct 24 19:34:22 2005
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20160E24F@firewire.esri.com>

A related question. 
Is the current ECW JPEG 2000 SDK v3.1 final or RC1? The download package
looks like Final release, but the readme inside the package
still states that it's RC1.

Gao, Peng

> -----Original Message-----
> From: Mark Sheridan [mailto:mark.sheridan@ermapper.com] 
> Sent: Sunday, October 23, 2005 8:49 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
> 
> Hi Everyone,
> 
> The release candidate of the ECW JPEG 2000 Source Code SDK is 
> available from the ER Mapper website:
> 
> http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_V
> ERSION_ID=284
> 
> Version 3.3 includes the following enhancements:
> 
> . Numerous bug fixes and enhancements
> . functional ECWP on platforms other than Windows . Fix to 
> lossless JPEG 2000 compression . Removal of the restriction 
> on distribution of "Server Software" from the GPL-style 
> Public Use License Agreement . Bug fixed in lossless JPEG 
> 2000 compression, where previously a tiny fraction of pixels 
> would be compressed with a value +/-1 with respect to the 
> input . Functional static library builds for NCSEcw, NCSUtil, 
> and NCScnet . A new build structure called "libecwj2" 
> providing single-library shared and static builds . libecwj2 
> makefiles for gcc/g++ on Solaris, Linux and Mac OS X . 
> inclusion of the sample code that formerly shipped with the 
> binary distribution, together with makefiles for the libecwj2 
> shared and static libraries 
> 
> Regards,
> Mark
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Mon Oct 24 22:07:52 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: ECW JPEG 2000 Source SDK v3.3 (RC)
In-Reply-To: <200510241148249.SM04924@grolsch>
References: <200510241148249.SM04924@grolsch>
Message-ID: <931f8ea90510241907r309725a9ud85e0e3a3d47faeb@mail.gmail.com>

On 10/23/05, Mark Sheridan <mark.sheridan@ermapper.com> wrote:
> Hi Everyone,
>
> The release candidate of the ECW JPEG 2000 Source Code SDK is available from
> the ER Mapper website:
>
> http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_VERSION_ID=284


Mark,

I just wanted to confirm that this version of the SDK
seems to build fine out of the box with GDAL.   So folks,
ECW SDK 3.3 and GDAL 1.3.1 should be a good clean
solution for ECW and JPEG2000 support.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nigel.eber at ermapper.com  Mon Oct 24 23:21:10 2005
From: nigel.eber at ermapper.com (Nigel Eber)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
In-Reply-To: <54808B311D66EB4E9CF4647B0DE707C20160E24F@firewire.esri.com>
Message-ID: <NOEOLIPDBKMCOLNIBIFNAEODDLAA.nigel.eber@ermapper.com>

Hi Peng,

a release candidate will eventually be classed as an official release if no major issues are raised
in span of 1-2 weeks in most cases.

Nigel Eber
Quality Assurance Officer
Research and Development
--------------------------------------------
ER Mapper
2 Abbotsford Street
West Leederville WA 6007
Australia
Tel: +61 8 9388 2900
Fax: +61 8 9388 2901
http://www.ermapper.com (ER Mapper Home)
http://www.EarthEtc.com (Image Web Server)
http://forum.ermapper.com (Public Forum)
--------------------------------------------

***
Just released: ER Mapper 7, Image Web Server 7, RightWebMap 7 and ECW JPEG 2000 SDK 3.1
Visit www.ermapper.com for more information
***


>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org]On Behalf Of Peng Gao
>Sent: Tuesday, 25 October 2005 7:34 AM
>To: Mark Sheridan; gdal-dev@lists.maptools.org
>Subject: RE: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
>
>
>A related question.
>Is the current ECW JPEG 2000 SDK v3.1 final or RC1? The download package
>looks like Final release, but the readme inside the package
>still states that it's RC1.
>
>Gao, Peng
>
>> -----Original Message-----
>> From: Mark Sheridan [mailto:mark.sheridan@ermapper.com]
>> Sent: Sunday, October 23, 2005 8:49 PM
>> To: gdal-dev@lists.maptools.org
>> Subject: [Gdal-dev] ECW JPEG 2000 Source SDK v3.3 (RC)
>>
>> Hi Everyone,
>>
>> The release candidate of the ECW JPEG 2000 Source Code SDK is
>> available from the ER Mapper website:
>>
>> http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_V
>> ERSION_ID=284
>>
>> Version 3.3 includes the following enhancements:
>>
>> . Numerous bug fixes and enhancements
>> . functional ECWP on platforms other than Windows . Fix to
>> lossless JPEG 2000 compression . Removal of the restriction
>> on distribution of "Server Software" from the GPL-style
>> Public Use License Agreement . Bug fixed in lossless JPEG
>> 2000 compression, where previously a tiny fraction of pixels
>> would be compressed with a value +/-1 with respect to the
>> input . Functional static library builds for NCSEcw, NCSUtil,
>> and NCScnet . A new build structure called "libecwj2"
>> providing single-library shared and static builds . libecwj2
>> makefiles for gcc/g++ on Solaris, Linux and Mac OS X .
>> inclusion of the sample code that formerly shipped with the
>> binary distribution, together with makefiles for the libecwj2
>> shared and static libraries
>>
>> Regards,
>> Mark
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From jhhal at wmdata.com  Tue Oct 25 10:21:20 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D2@WMRI000166.corp.wmdata.net>

Hello 

 

I have tried to read from OracleSpatial (ver 10.2.0), change some value
and then do an update with the following lines of code (C#). 

 

OGR.Driver d = OGR.ogr.GetDriverByName("OCI");

OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 1);

OGR.Layer l = ds.GetLayerByName("baggis_lines");

OGR.Feature f = l.GetFeature(0);

OGR.Geometry g = f.GetGeometryRef();

g = g.Clone();

double x = g.GetX(0);

double y = g.GetY(0);

double z = g.GetZ(0);

x += 1.0;

y += 1.0;

textBox1.Text += "x="+ x + " y=" + y + System.Environment.NewLine;

l.StartTransaction();

g.SetPoint(0, x, y, z);

f.SetGeometryDirectly(g);

f.SetField("TEXT", "OLLE");

l.SetFeature(f);

l.CommitTransaction();

textBox1.Text += "count=" + l.GetFeatureCount(1) +
System.Environment.NewLine;;

 

 

Reading from works fine but when I call the SetFeature method it fails.

 

The error-message I can see in the Output win is:

ERROR 1: OGROCITableLayer::SetFeature(-1) failed because there is no
apparent FID column on table BAGGIS_LINES.

 

What's wrong?

 

What I want was to read a record, change some value and then write it
back.

 

Any assistance would be great.

 

Regards

Johan

__________________________________


Johan Hallgren
WM-data


Pelle Bergs backe 3
Box 1938, 791 19 Falun
Tel: 023-844 65 (int: +46-2384465)
Mobil: 070-588 44 28 (int: +46-705884428)
johan.e.hallgren@wmdata.com <mailto:johan.e.hallgren@wmdata.com> 
http://www.wmdata.se <http://www.wmdata.se> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051025/9297d4c5/attachment.html
From atompkins at fastmail.fm  Tue Oct 25 11:53:13 2005
From: atompkins at fastmail.fm (Andy Tompkins)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] [OGR] Feature relationships
Message-ID: <1130255593.25715.245976971@webmail.messagingengine.com>

I was surprised when I couldn't find any inherent way to relate
features to each other, and I am wondering if I have just missed
something somewhere.  I would also like to be able to share geometries
(or parts of geometries) with different features, so that when I change
a geometry (or part of a geometry) it is reflected in other geometries.

For example, if my feature, f, is an ORGLineString, I would like to
associate the two endpoints with features that are OGRPoints.  In this
way I would be able to construct a street network and traverse it going
from feature to feature.  I was looking for something like
OGRLineString::StartPoint(OGRFeature *), (note not a OGRPoint as the
parameter), and something like int OGRPoint::numLines(), and
OGRPoint::getLine(OGRFeature*).

Another example are features that are ORGPolygon and I would like to
have polygons that touch be associated to each other.  In this way I
would be able to create a polygon cover and move from polygon to
polygon.

Is this possible?
How might I do this with OGR?

Thanks in advance for any help.
  Andy Tompkins

From warmerdam at pobox.com  Tue Oct 25 12:13:21 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D2@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D2@WMRI000166.corp.wmdata.net>
Message-ID: <931f8ea90510250913u63ac7a79o89d49c7b49627c3d@mail.gmail.com>

On 10/25/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
>
> Reading from works fine but when I call the SetFeature method it fails.
>
>
>
> The error-message I can see in the Output win is:
>
> ERROR 1: OGROCITableLayer::SetFeature(-1) failed because
> there is no apparent FID column on table BAGGIS_LINES.
>
> What's wrong?
>
> What I want was to read a record, change some value and then write it back.
>
> Any assistance would be great.

Johan,

As the error message mentions, OGR was unable to establish an
integer primary key column to use with this table as the FID (feature
id).  This makes it very difficult to update a row in place, since
I don't know which row the feature comes from.

When there is no known fid column, feature ids are assigned
sequentially by the reader but it isn't a meaningful fid.

However, I am quite surprised to see the message reporting the
feature as having fid -1 (OGRNullFID) instead of 0.

If your table has a primary key column you could set the
OGR_FID environment/config variable with the name of the
column so that it will be used as FID.  There should be a
cpl.SetConfigOption() method available you can call like this:

  CPL.cpl.SetConfigOption( "OCI_FID", "ID" )

On the FID issue, could you try checking the f.GetFID()
value after reading the feature.  I am quite surprised that it
is 0.

BTW, I am impressed to see the C# bindings working so
well.  I hadn't gotten to trying them yet myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Oct 25 12:18:04 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] [OGR] Feature relationships
In-Reply-To: <1130255593.25715.245976971@webmail.messagingengine.com>
References: <1130255593.25715.245976971@webmail.messagingengine.com>
Message-ID: <931f8ea90510250918n44f9b837sa476556cbea7cbfd@mail.gmail.com>

On 10/25/05, Andy Tompkins <atompkins@fastmail.fm> wrote:
> I was surprised when I couldn't find any inherent way to relate
> features to each other, and I am wondering if I have just missed
> something somewhere.  I would also like to be able to share geometries
> (or parts of geometries) with different features, so that when I change
> a geometry (or part of a geometry) it is reflected in other geometries.
>
> For example, if my feature, f, is an ORGLineString, I would like to
> associate the two endpoints with features that are OGRPoints.  In this
> way I would be able to construct a street network and traverse it going
> from feature to feature.  I was looking for something like
> OGRLineString::StartPoint(OGRFeature *), (note not a OGRPoint as the
> parameter), and something like int OGRPoint::numLines(), and
> OGRPoint::getLine(OGRFeature*).
>
> Another example are features that are ORGPolygon and I would like to
> have polygons that touch be associated to each other.  In this way I
> would be able to create a polygon cover and move from polygon to
> polygon.
>
> Is this possible?
> How might I do this with OGR?

Andy,

There is no concept of built-in feature relationships in
OGR.  It takes a very "simple features" approach where
no feature has any inherent relationship to any other.

You can use attributes to encode some kinds of relationships
but it is entirely up to the application code to follow the rules or
update derived geometries.

Drivers like the Arc/Info Binary Coverages (AVCBin)
read topological datasets and represent the relationships
as attributes.  For instance the PAL (polygon) features have
an ArcIds attribute with a list of arcs making up the polygon.
Likewise Arcs have a from/to node id, and a left/right
polygon id.  But that is just a way of reflecting the underlying
topological dataset in that specific driver.  That isn't generally
supported.

There are definately downsides to the current simple features
model, though the big upside is understandability and easy
interchange.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Ken.Boss at dnr.state.mn.us  Tue Oct 25 13:00:51 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: ECW JPEG 2000 Source SDK v3.3 (RC)
Message-ID: <s35e1e95.040@co5.dnr.state.mn.us>

Hi Frank--

Did it build a libecwj2.so for you?  I get:

libecwj2.a
libNCSCnet.a
libNCSCnet.la
libNCSCnet.so
libNCSEcw.a
libNCSEcw.la
libNCSEcw.so
libNCSEcwC.a
libNCSEcwC.la
libNCSEcwC.so
libNCSUtil.a
libNCSUtil.la
libNCSUtil.so

and variously numbered symlinks to the .so files, but no libecwj2.so.  The example programs won't build because they seem to be looking for libecwj2.so, and I presume I'll be needing that to link ECW capabilities into GDAL...?

--Ken Boss
  MN DNR Forestry



>>> Frank Warmerdam <warmerdam@pobox.com> 10/24/2005 9:07 PM >>>
On 10/23/05, Mark Sheridan <mark.sheridan@ermapper.com> wrote:
> Hi Everyone,
>
> The release candidate of the ECW JPEG 2000 Source Code SDK is available from
> the ER Mapper website:
>
> http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_VERSION_ID=284 


Mark,

I just wanted to confirm that this version of the SDK
seems to build fine out of the box with GDAL.   So folks,
ECW SDK 3.3 and GDAL 1.3.1 should be a good clean
solution for ECW and JPEG2000 support.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Tue Oct 25 13:03:22 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: ECW JPEG 2000 Source SDK v3.3 (RC)
In-Reply-To: <s35e1e95.041@co5.dnr.state.mn.us>
References: <s35e1e95.041@co5.dnr.state.mn.us>
Message-ID: <931f8ea90510251003x77341c3br3ba3e4b3897c9d15@mail.gmail.com>

On 10/25/05, Ken Boss <Ken.Boss@dnr.state.mn.us> wrote:
> Hi Frank--
>
> Did it build a libecwj2.so for you?  I get:
>
> libecwj2.a
> libNCSCnet.a
> libNCSCnet.la
> libNCSCnet.so
> libNCSEcw.a
> libNCSEcw.la
> libNCSEcw.so
> libNCSEcwC.a
> libNCSEcwC.la
> libNCSEcwC.so
> libNCSUtil.a
> libNCSUtil.la
> libNCSUtil.so
>
> and variously numbered symlinks to the .so files, but no libecwj2.so.  The example programs won't build because they seem to be looking for libecwj2.so, and I presume I'll be needing that to link ECW capabilities into GDAL...?

Ken,

I get the same files, and didn't try to build the examples.
GDAL looks for and links against the libNCS* shared
libraries and ignores the libecwj2.a

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From potts at cfl.rr.com  Tue Oct 25 14:36:46 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: ECW JPEG 2000 Source SDK v3.3 (RC)
In-Reply-To: <s35e1e95.040@co5.dnr.state.mn.us>
References: <s35e1e95.040@co5.dnr.state.mn.us>
Message-ID: <FE810F3F-BFE0-48B4-9AD7-316E05DF631F@cfl.rr.com>

Hello All:

To build it on MACOSX 10.4.2 g++ version 4.0.0 I had to make one  
small change in the file:

NCSSocket.cpp



CNCSSocket::CNCSSocket(const int handle)
: m_handle(handle), m_connected(true)
{
     //init();
     struct sockaddr_in info;
#if defined(POSIX) && !defined(HPUX)
#    ifdef MACOSX
     socklen_t tempSize = sizeof(struct sockaddr);
     //int tempSize = sizeof(struct sockaddr);
#    else
     socklen_t tempSize = sizeof(struct sockaddr);
#    endif
#else
     int tempSize = sizeof(struct sockaddr);
#endif
     getpeername(handle, (struct sockaddr*)&info, &tempSize);
     m_connectedPort = info.sin_port;
     //m_connectedTo = inet_ntoa(info.sin_addr);

}
#endif


On my MAC I had to set int tempSize = sizeof(struct sockaddr);

to

socklen_temt pSize = sizeof(struct sockaddr);


Has any one else had the same problem with 10.4.2?


This was the only modification and it built.  Not tested with GDAL  
yet though.

Take care

Garrettt

From woklist at kyngchaos.com  Tue Oct 25 14:52:24 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
	<20051019154901.GH2809@thuille.itc.it>
	<931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
Message-ID: <087AD91F-208A-4132-B46E-AF72AC56D692@kyngchaos.com>

I finally got around to trying this.  I had to add '-lgrass_dbmibase - 
lgrass_dbmiclient' to LIBS so it could find the _db_* symbols.   
Otherwise, works great.  Much simpler than the old way (and I've been  
having troubles with the old way recently on an older system).


On Oct 19, 2005, at 10:53 AM, Frank Warmerdam wrote:


> On 10/19/05, Markus Neteler <neteler@itc.it> wrote:
>
>
>> Frank,
>>
>> sorry, but IMHO you didn't run 'autoconf':
>>
>> g++ -shared  ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o  
>> -L/ssi0/ssi/neteler/grass61/dist.i686-pc-linux-gnu//lib -lgrass_I - 
>> lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime - 
>> lgrass_gproj -L/usr/local/lib -lgdal  -o ogr_GRASS.so
>>
>> The link to -lgrass_vect is still missing... It's present in  
>> configure.in, though,
>> as submitted.
>>
>> Please re-created it again,
>>
>>
>
> Markus,
>
> Doh!  You are right of course.  I have run autoconf, and reupdated
> the download site.  Let me know if this version doesn't work properly.
>
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From warmerdam at pobox.com  Tue Oct 25 15:12:00 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <087AD91F-208A-4132-B46E-AF72AC56D692@kyngchaos.com>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
	<20051019154901.GH2809@thuille.itc.it>
	<931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
	<087AD91F-208A-4132-B46E-AF72AC56D692@kyngchaos.com>
Message-ID: <931f8ea90510251212t1276c7e0h404324c7bc6d2047@mail.gmail.com>

On 10/25/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
> I finally got around to trying this.  I had to add '-lgrass_dbmibase -
> lgrass_dbmiclient' to LIBS so it could find the _db_* symbols.
> Otherwise, works great.  Much simpler than the old way (and I've been
> having troubles with the old way recently on an older system).

William,

I have added the dbmi dependency and re-uploaded as;

  http://www.gdal.org/dl/grass-gdal-1.3.1.1.tar.gz

Let me know if this works ok "out of the box" for you.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Tue Oct 25 15:46:13 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin
In-Reply-To: <931f8ea90510251212t1276c7e0h404324c7bc6d2047@mail.gmail.com>
References: <931f8ea90510190840gd5081cele1bfc5608e828f81@mail.gmail.com>
	<20051019154901.GH2809@thuille.itc.it>
	<931f8ea90510190853g3b7a4d54gdacd4cdead39dc20@mail.gmail.com>
	<087AD91F-208A-4132-B46E-AF72AC56D692@kyngchaos.com>
	<931f8ea90510251212t1276c7e0h404324c7bc6d2047@mail.gmail.com>
Message-ID: <DC4ADF07-76BA-49B2-8DB8-8A2AF5A4CD1B@kyngchaos.com>

You mean:

http://www.gdal.org/dl/gdal-grass-1.3.1.1.tar.gz

Yeah, that did it.

thanks


On Oct 25, 2005, at 2:12 PM, Frank Warmerdam wrote:


> On 10/25/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
>
>
>> I finally got around to trying this.  I had to add '- 
>> lgrass_dbmibase -
>> lgrass_dbmiclient' to LIBS so it could find the _db_* symbols.
>> Otherwise, works great.  Much simpler than the old way (and I've been
>> having troubles with the old way recently on an older system).
>>
>>
>
> William,
>
> I have added the dbmi dependency and re-uploaded as;
>
>   http://www.gdal.org/dl/grass-gdal-1.3.1.1.tar.gz
>
> Let me know if this works ok "out of the box" for you.
>
> Best regards,
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From matt.wilkie at gov.yk.ca  Tue Oct 25 17:45:12 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] how to calculate needed mem?
Message-ID: <435EA768.4070603@gov.yk.ca>

Hi, is there a rule of them I can use to calculate how much memory will 
be needed for gdal_merge operations?

My current method of adding more tiles onto the input queue until I get 
"MemoryError: can't allocate memory for array" is a little wasteful and 
time consuming...

Or maybe it would be better to ask if there some way of doing things in 
pieces, not loading the complete extents into ram at one time?

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Tue Oct 25 17:45:52 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Problems with gdal_merge-created geotiffs
In-Reply-To: <s35ce812.024@co5.dnr.state.mn.us>
References: <s35ce812.024@co5.dnr.state.mn.us>
Message-ID: <435EA790.3050501@gov.yk.ca>

thanks for that message Ken, my earlier query about how to debug gdal 
errors was prompted by problems with a gdal_merge created image.


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From bigfoot at main-task.com  Tue Oct 25 18:01:36 2005
From: bigfoot at main-task.com (=?ISO-8859-1?Q?Vladimir_Guzm=E1n?=)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] vector ilwis driver
Message-ID: <435EAB40.80206@main-task.com>

Hello.
Anybody knows a way to convert Ilwis vector files to postgis or shape files?

Thanks a lot,

-- 
Vladimir Ilich Guzm?n R.
------------------------
http://maintask.com 


From warmerdam at pobox.com  Tue Oct 25 18:11:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] how to calculate needed mem?
In-Reply-To: <435EA768.4070603@gov.yk.ca>
References: <435EA768.4070603@gov.yk.ca>
Message-ID: <931f8ea90510251511s238e9275o6fc16dfdd9c0a675@mail.gmail.com>

On 10/25/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi, is there a rule of them I can use to calculate how much memory will
> be needed for gdal_merge operations?
>
> My current method of adding more tiles onto the input queue until I get
> "MemoryError: can't allocate memory for array" is a little wasteful and
> time consuming...

Matt,

The amount of memory used by gdal_merge.py  is supposed to be
proportional to the size of the largest input tile, not the output mosaic.

> Or maybe it would be better to ask if there some way of doing things in
> pieces, not loading the complete extents into ram at one time?

It would be better to use gdal_merge.py to create the output file using
the new -createonly flag, and then use gdalwarp to actually mosaic
the images in.  Gdalwarp does sensible things about memory.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jhhal at wmdata.com  Wed Oct 26 05:07:20 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D4@WMRI000166.corp.wmdata.net>

Thanks Frank for everything!

There is a threshold to use GDAL and MapServer but when passed that test, it?s great tools.

The -1 issue at FID was something I have done wrong. When I tried it today it was other values.

Regarding the c# environment, it works well. Unfortunately I had some problems with the swig thing. When I runned the nmake -f makefile.vc csharp at the swig directory two problems occurred. First there were references used in some dlls that couldn't be resolved.  

I changed the following lines in the cshart/makefile.vc (the osr\*.cs was added to all libs):

csc /debug:full /target:library /out:gdal_osr_csharp.dll osr\*.cs 
csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs osr\*.cs
csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs osr\*.cs
csc /debug:full /target:library /out:gdal_gdal_csharp.dll gdal\*.cs osr\*.cs
csc /debug:full /target:library /out:gdal_gdalconst_csharp.dll const\*.cs osr\*.cs

I also had to add a 
using OSR; to all files that use that library. It will be overwritten when running swig so I had to do the process in two steps (I runned the nmake /f cshart/makefile.vc by my self). 

Now to my actual problem:
I wasn't sure how to use the SetConfigOption function. Look below and say if it looks OK. 

When I run the following code:
------------------------
OGR.ogr.RegisterAll();

OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 1);

GDAL.gdal.SetConfigOption("OGR_FID","OBJECTID");
OGR.Layer l = ds.GetLayerByName("baggis_lines");
OGR.Feature f = l.GetFeature(74);
Console.WriteLine("FID={0}", f.GetFID());
for (int i = 0; i < l.GetLayerDefn().GetFieldCount(); i++)
	Console.WriteLine("{0}=[{1}]", l.GetLayerDefn().GetFieldDefn(i).GetName(), f.GetFieldAsString(i));
OGR.Geometry g = f.GetGeometryRef();
double x = g.GetX(0);
double y = g.GetY(0);
double z = g.GetZ(0);
x += 1.0;
y += 1.0;
Console.WriteLine("x={0} y={1}", x,  y);
l.StartTransaction();
g.SetPoint(0, x, y, z);
f.SetGeometryDirectly(g);
f.SetField("TEXT", "OLLE");
l.SetFeature(f);
l.CommitTransaction(); 
------------------------
I will get the following output:
FID=74
TEXTH=[]
TEXT=[]
OBJECTID=[26]
x=1662872,5 y=6678600
ERROR 1: OGROCITableLayer::SetFeature(74) failed because there is no apparent FID column on table BAGGIS_LINES.

It seams as the SetConfigOption doesn't work as I have used it.

I tried to do add a column OGR_FID (primary key) to the table but in that case it failed on the SetFeature with no meaningful error message. Now the actual record was gone so my guess is that the function removes the record and when adding a new it fails (can it be something with the OGR_FID not being properly updated?). 

Finally, is it the right way to use SetFeature when updating a record?

I hope you have time to answer my questions.

Best Regards
Johan

___________________________________


Johan Hallgren
WM-data


Pelle Bergs backe 3
Box 1938, 791 19 Falun
Tel: 023-844 65 (int: +46-2384465)
Mobil: 070-588 44 28 (int: +46-705884428)
johan.e.hallgren@wmdata.com
http://www.wmdata.se

-----Ursprungligt meddelande-----
Fr?n: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] F?r Frank Warmerdam
Skickat: den 25 oktober 2005 17:13
Till: Hallgren Johan E
Kopia: gdal-dev@lists.maptools.org
?mne: Re: [Gdal-dev] Read/Write Oracle Spatial

On 10/25/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
>
> Reading from works fine but when I call the SetFeature method it fails.
>
>
>
> The error-message I can see in the Output win is:
>
> ERROR 1: OGROCITableLayer::SetFeature(-1) failed because
> there is no apparent FID column on table BAGGIS_LINES.
>
> What's wrong?
>
> What I want was to read a record, change some value and then write it back.
>
> Any assistance would be great.

Johan,

As the error message mentions, OGR was unable to establish an
integer primary key column to use with this table as the FID (feature
id).  This makes it very difficult to update a row in place, since
I don't know which row the feature comes from.

When there is no known fid column, feature ids are assigned
sequentially by the reader but it isn't a meaningful fid.

However, I am quite surprised to see the message reporting the
feature as having fid -1 (OGRNullFID) instead of 0.

If your table has a primary key column you could set the
OGR_FID environment/config variable with the name of the
column so that it will be used as FID.  There should be a
cpl.SetConfigOption() method available you can call like this:

  CPL.cpl.SetConfigOption( "OCI_FID", "ID" )

On the FID issue, could you try checking the f.GetFID()
value after reading the feature.  I am quite surprised that it
is 0.

BTW, I am impressed to see the C# bindings working so
well.  I hadn't gotten to trying them yet myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Wed Oct 26 08:59:27 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] libral to the list of "Projects using GDAL"?
Message-ID: <435F7DAF.10705@tkk.fi>

Frank,

How about adding libral (http://libral.sourceforge.net/ ) to the list of 
projects using GDAL at http://www.gdal.org/?

A short description: "A raster algebra implementation and an 
experimental GUI+CLI GIS with Perl and GTK+"

The "experimental" is my excuse of not being able to produce 
well-targeted, tight Perl modules ;)

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dassau at gdf-hannover.de  Wed Oct 26 09:56:42 2005
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
Message-ID: <200510261556.42833.dassau@gdf-hannover.de>

Hi, 

I (tried to) built a current gdal-grass plugin 1.3.1.1 as RPM and defined the 
PREFIX as: 
%define _prefix /usr

When I install the package the support is missing: 

ldd is for gdal_GRASS.so  ogr_GRASS.so seems to be ok

Example ogr:
ldd /usr/lib/gdalplugins/ogr_GRASS.so
        linux-gate.so.1 =>  (0xffffe000)
        libgrass_I.so => /usr/lib/libgrass_I.so (0x40023000)
        libgrass_vask.so => /usr/lib/libgrass_vask.so (0x40034000)
        libgrass_gmath.so => /usr/lib/libgrass_gmath.so (0x4003a000)
        libgrass_gis.so => /usr/lib/libgrass_gis.so (0x4003f000)
        libgrass_datetime.so => /usr/lib/libgrass_datetime.so (0x400d9000)
        libgrass_gproj.so => /usr/lib/libgrass_gproj.so (0x400e0000)
        libgrass_vect.so => /usr/lib/libgrass_vect.so (0x400e8000)
        libgrass_dbmibase.so => /usr/lib/libgrass_dbmibase.so (0x40116000)
        libgrass_dbmiclient.so => /usr/lib/libgrass_dbmiclient.so (0x40124000)
        libgdal.so.1 => /usr/lib/libgdal.so.1 (0x4012d000)
        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x404ed000)
        libm.so.6 => /lib/tls/libm.so.6 (0x405ab000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x405ce000)
        libc.so.6 => /lib/tls/libc.so.6 (0x405d7000)
        libz.so.1 => /usr/lib/libz.so.1 (0x406f0000)
        libncurses.so.5 => /lib/libncurses.so.5 (0x40701000)
        libproj.so.0 => /usr/lib/libproj.so.0 (0x40746000)
        libgrass_dig2.so => /usr/lib/libgrass_dig2.so (0x40779000)
        libgrass_dgl.so => /usr/lib/libgrass_dgl.so (0x4078a000)
        libgrass_rtree.so => /usr/lib/libgrass_rtree.so (0x4079f000)
        libgrass_linkm.so => /usr/lib/libgrass_linkm.so (0x407a4000)
        librt.so.1 => /lib/tls/librt.so.1 (0x407a6000)
        libdl.so.2 => /lib/libdl.so.2 (0x407af000)
        /lib/ld-linux.so.2 (0x80000000)
        libpthread.so.0 => /lib/tls/libpthread.so.0 (0x407b4000)

but with strace I get following message, although I haven't defined any prefix 
as /usr/local :

strace gdalinfo /home/gdf/grassdata/spearfish60/PERMANENT/cellhd/roads

[...]
open("/usr/local/lib/gdalplugins", O_RDONLY|O_NONBLOCK|O_LARGEFILE|
O_DIRECTORY) = -1 ENOENT (No such file or directory)
stat64("/home/gdf/grassdata/spearfish60/PERMANENT/cellhd/roads", 
{st_mode=S_IFREG|0777, st_size=197, ...}) = 0
[...]

of course it works linking /usr/local/lib/gdalplugins to /usr/lib/gdalplugins, 
but that's not a real solution -  guess. Hopefully someone has an idea how to 
fix this problem.

 thanks
   Otto












From warmerdam at pobox.com  Wed Oct 26 10:21:58 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] libral to the list of "Projects using GDAL"?
In-Reply-To: <435F7DAF.10705@tkk.fi>
References: <435F7DAF.10705@tkk.fi>
Message-ID: <931f8ea90510260721m6b21fec4jd4f61bd1deaccc1d@mail.gmail.com>

On 10/26/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Frank,
>
> How about adding libral (http://libral.sourceforge.net/ ) to the list of
> projects using GDAL at http://www.gdal.org/?
>
> A short description: "A raster algebra implementation and an
> experimental GUI+CLI GIS with Perl and GTK+"
>
> The "experimental" is my excuse of not being able to produce
> well-targeted, tight Perl modules ;)

Ari,

My pleasure ... done.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 26 10:30:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <200510261556.42833.dassau@gdf-hannover.de>
References: <200510261556.42833.dassau@gdf-hannover.de>
Message-ID: <931f8ea90510260730i1edab3eeif52ca57406a42cb1@mail.gmail.com>

On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> Hi,
>
> I (tried to) built a current gdal-grass plugin 1.3.1.1 as RPM and defined the
> PREFIX as:
> %define _prefix /usr
>
> When I install the package the support is missing:
...
> of course it works linking /usr/local/lib/gdalplugins to /usr/lib/gdalplugins,
> but that's not a real solution -  guess. Hopefully someone has an idea how to
> fix this problem.

Otto,

If GDAL is configured to install in /usr instead of
/usr/local then the GDAL_PREFIX macro in gdal/port/cpl_config.h
should be /usr and gdaldrivermanager.cpp should look in
/usr/lib/gdalplugins instead of /usr/local/lib/gdalplugins.

You might want to look into whether GDAL was built right.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dassau at gdf-hannover.de  Wed Oct 26 11:05:35 2005
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <931f8ea90510260730i1edab3eeif52ca57406a42cb1@mail.gmail.com>
References: <200510261556.42833.dassau@gdf-hannover.de>
	<931f8ea90510260730i1edab3eeif52ca57406a42cb1@mail.gmail.com>
Message-ID: <200510261705.36062.dassau@gdf-hannover.de>

Am Mittwoch, 26. Oktober 2005 16:30 schrieb Frank Warmerdam:
> On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> > Hi,
> >
> > I (tried to) built a current gdal-grass plugin 1.3.1.1 as RPM and defined
> > the PREFIX as:
> > %define _prefix /usr
> >
> > When I install the package the support is missing:
>
> ...
>
> > of course it works linking /usr/local/lib/gdalplugins to
> > /usr/lib/gdalplugins, but that's not a real solution -  guess. Hopefully
> > someone has an idea how to fix this problem.
>
> Otto,
>
> If GDAL is configured to install in /usr instead of
> /usr/local then the GDAL_PREFIX macro in gdal/port/cpl_config.h
> should be /usr and gdaldrivermanager.cpp should look in
> /usr/lib/gdalplugins instead of /usr/local/lib/gdalplugins.

Hi,

GDAL_PREFIX is /usr/local
gdaldrivermanager.cpp looks in  /usr/local/lib/gdalplugins

ok, it happens in gdal itself, but building the gdal rpm package I also 
defined /usr as prefix, so how can I change this and make gdal look 
in /usr/lib/gdalplugins? 

thanks
  Otto

> You might want to look into whether GDAL was built right.



> Best regards,

From warmerdam at pobox.com  Wed Oct 26 11:28:55 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <200510261705.36062.dassau@gdf-hannover.de>
References: <200510261556.42833.dassau@gdf-hannover.de>
	<931f8ea90510260730i1edab3eeif52ca57406a42cb1@mail.gmail.com>
	<200510261705.36062.dassau@gdf-hannover.de>
Message-ID: <931f8ea90510260828m1709df3du4b3f21915147a22b@mail.gmail.com>

On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> ok, it happens in gdal itself, but building the gdal rpm package I also
> defined /usr as prefix, so how can I change this and make gdal look
> in /usr/lib/gdalplugins?

Otto,

Are you saying that GDAL was configured with --prefix=/usr but
the cpl_config.h has a GDAL_PREFIX of "/usr/local"?  That
shouldn't happen.  Could you confirm that before I start digging
into the configure magic?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dassau at gdf-hannover.de  Wed Oct 26 11:43:07 2005
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <931f8ea90510260828m1709df3du4b3f21915147a22b@mail.gmail.com>
References: <200510261556.42833.dassau@gdf-hannover.de>
	<200510261705.36062.dassau@gdf-hannover.de>
	<931f8ea90510260828m1709df3du4b3f21915147a22b@mail.gmail.com>
Message-ID: <200510261743.07339.dassau@gdf-hannover.de>

Am Mittwoch, 26. Oktober 2005 17:28 schrieb Frank Warmerdam:
> On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> > ok, it happens in gdal itself, but building the gdal rpm package I also
> > defined /usr as prefix, so how can I change this and make gdal look
> > in /usr/lib/gdalplugins?
>
> Otto,
>
> Are you saying that GDAL was configured with --prefix=/usr but
> the cpl_config.h has a GDAL_PREFIX of "/usr/local"?  That
> shouldn't happen.  Could you confirm that before I start digging
> into the configure magic?

yes, I can confirm this - unfortunately. I will send you my spec files 
offlist. 

thanks a lot
  Otto

From bfraser at geoanalytic.com  Wed Oct 26 12:03:02 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Using gdalwarp with paletted tiffs
Message-ID: <02bc01c5da46$be68c3f0$160002c0@shark>

Frank,

  I've been trying to use gdalwarp (v1.3.1.0) to mosaic paletted tiffs.
gdalwarp creates the target file and fills in the pixels from the first
source file, but does not fill in pixels from the second file (no error
message is generated).  This behaviour is the same if I switch the sequence
of the files (to test that the coordinate systems and extents are ok); the
first source file's pixels are written, but not the second.

I suspect the problem is related to the palettes.  The palettes of the
source files are identical, and I use nearest neighbor resampling when
creating the target so there should be no "color matching" problem between
the source images (or the target).

Here are the commands:

gdalwarp  -t_srs "+proj=utm +zone=10 +nadgrids=NTv2_0.gsb +datum=NAD83"  -tr
5 5   -te 529915 6317245 560995 6345910 094A13.tif 094G01NC.tif
gdalwarp 094H04.tif 094G01NC.tif


Any ideas?

Thanks!
Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta


From warmerdam at pobox.com  Wed Oct 26 13:01:57 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D4@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D4@WMRI000166.corp.wmdata.net>
Message-ID: <931f8ea90510261001j1a5e9ce2kc0f970f17ff574ff@mail.gmail.com>

On 10/26/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
> OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 1);
>
> GDAL.gdal.SetConfigOption("OGR_FID","OBJECTID");

Johan,

You need to call SetConfigOption() before opening the datasource
as it alters the decisions made as the layers are scanned during
the open.

> I tried to do add a column OGR_FID (primary key) to the table but in that case it failed on the SetFeature with no meaningful error message. Now the actual record was gone so my guess is that the function removes the record and when adding a new it fails (can it be something with the OGR_FID not being properly updated?).

SetFeature does indeed operate by deleting the existing row and re-creating
it.   You could do a StartTransaction() and Commit() or Rollback() after
the SetFeature() if you want better error handling.  It really ought to do
this internally if there is no active transaction.

> Finally, is it the right way to use SetFeature when updating a record?
>
> I hope you have time to answer my questions.

I think you are doing things right, and I am not sure why it isn't
working; however, I don't think SetFeature() is used often.  I see
it is not used in the ogr_oci.py test script for the OCI provider.  It
may just be broken.

Unfortunately, while I have time to answer this question, I don't
have time to reboot into win32, and fiddle around to see what is
going wrong today.  You might want to file a bug report.

For now it is hard to say if you are encountering some limitation
of the c# bindings or ogr.

... one extra review of your code ...

Actually, now I see you are doing things in a transaction, but
committing it even if the SetFeature() fails.

Also, more seriously, I see you are fetching a reference to the
feature geometry modifying it and then calling SetGeometryDirectly().
The problem with this is that GetGeometryRef() returns a pointer to
the internal feature geometry.  So you are modifying it directly on
the feature, and then when you do the SetGeometryDirectly() it
will delete the old geometry and try to set the new one.  But the
new one is really the old one, now deleted.  So you should skip
the SetGeometryDirectly() step ... or .. clone the result that comes
back from GetGeometryRef().

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 26 13:36:21 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <200510261743.07339.dassau@gdf-hannover.de>
References: <200510261556.42833.dassau@gdf-hannover.de>
	<200510261705.36062.dassau@gdf-hannover.de>
	<931f8ea90510260828m1709df3du4b3f21915147a22b@mail.gmail.com>
	<200510261743.07339.dassau@gdf-hannover.de>
Message-ID: <931f8ea90510261036v7376e419te4e8f823dd006bcd@mail.gmail.com>

On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> yes, I can confirm this - unfortunately. I will send you my spec files
> offlist.

Otto,

I have reviewed your spec file, and it seems to configure with the
default prefix, and then try to override it at make time.  However,
the configure is dumping the prefix into gdal/port/cpl_config.h
at configure time and that can't be overridden at build time.

This is not something I am keen to change.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Oct 26 15:22:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] TIFF "Old JPEG" Compressed Files
Message-ID: <931f8ea90510261222r60ac8930n78d2c1ec181ffabd@mail.gmail.com>

Folks,

I am wondering if there is anyone out there interested in
having GDAL (and libtiff in general) be able to support
"old jpeg" compressed TIFF files.  The original jpeg-in-tiff
scheme was underspecified and as a result different folks
implemented it differently meaning there are a variety of
such files which generally don't work well with libtiff.

I have an opportunity to contract someone with substantial
expertise to work on this issue if I can scare up some funding for
the work.   If any of the GDAL user base are sufficiently interested
to help pay, please let me know.

I think we would need around $4000 Euro or so for the work,
but I would be willing to kick in part of it myself if needed.

I would add that "old jpeg" is the format produced by some
Microsoft technology when you choose to save in
compressed TIFF.  So the issue comes up more with
various consumer TIFF files rather than actual "geospatial
data" distributed by vendors.

There is a corresponding "new jpeg" compression scheme for
TIFF that is well supported by libtiff.  This work would be mainly
to maximize compatibility with existing files.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dassau at gdf-hannover.de  Thu Oct 27 03:28:00 2005
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] gdal-grass plugin rpm
In-Reply-To: <931f8ea90510261036v7376e419te4e8f823dd006bcd@mail.gmail.com>
References: <200510261556.42833.dassau@gdf-hannover.de>
	<200510261743.07339.dassau@gdf-hannover.de>
	<931f8ea90510261036v7376e419te4e8f823dd006bcd@mail.gmail.com>
Message-ID: <200510270928.00250.dassau@gdf-hannover.de>

Am Mittwoch, 26. Oktober 2005 19:36 schrieb Frank Warmerdam:
> On 10/26/05, Otto Dassau <dassau@gdf-hannover.de> wrote:
> > yes, I can confirm this - unfortunately. I will send you my spec files
> > offlist.
>
> Otto,
>
> I have reviewed your spec file, and it seems to configure with the
> default prefix, and then try to override it at make time.  However,
> the configure is dumping the prefix into gdal/port/cpl_config.h
> at configure time and that can't be overridden at build time.
>
> This is not something I am keen to change.

Hi Frank,

no problem, I added the missing --with-prefix and all is workin fine now!

thanks a lot
  Otto 


From jhhal at wmdata.com  Thu Oct 27 04:24:24 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D6@WMRI000166.corp.wmdata.net>

Thanks for all the assistance.

My SetFeature problem was probably caused by the bad geometry handling in the code. It's solved now but there is still two functions a have isolated but problems remain. 

When updating a field I use a function SetField and it just don't work. It will crash on that call. 

The other function is DeleteFeature. The problem is the same, it just don't work and crash on that call. 

In both cases I know that record is there and the actual layer have the standard OGR_FID-keycolumn.

Any assistance is appreciated and my next step is to file it as a bug in the SWIG/C# binding.

Below is the code I have used.

Best regards
Johan

Geometry code that works.
-----------------------------------
OGR.ogr.RegisterAll();

OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 0);

int iFID = Convert.ToInt32(txtFID.Text);
OGR.Layer l = ds.GetLayerByName("granser");
// Read the feature;
OGR.Feature f = l.GetFeature(iFID);

OGR.Geometry g = f.GetGeometryRef();
double x = g.GetX(0);
double y = g.GetY(0);
double z = g.GetZ(0);
x += 1.0;
y += 1.0;
try
{
	l.StartTransaction();

	// Modify the reference
	g.SetPoint(0, x, y, z);

	l.SetFeature(f);
	l.CommitTransaction();
}
catch (Exception ex)
{
	MessageBox.Show(ex.Message);
	l.RollbackTransaction();
}
-----------------------------------

SetField-code

-----------------------------------
OGR.ogr.RegisterAll();

OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 0);

int iFID = Convert.ToInt32(txtFID.Text);
OGR.Layer l = ds.GetLayerByName("granser");
// Read the feature;
OGR.Feature f = l.GetFeature(iFID);

try
{
	l.StartTransaction();

	// Modify the reference
	// HERE IT FAILS...
	f.SetField("NUM", "3");

	l.SetFeature(f);
	l.CommitTransaction();
}
catch (Exception ex)
{
	l.RollbackTransaction();
	MessageBox.Show(ex.Message);
}
-----------------------------------

DeleteFeature code

-----------------------------------
OGR.ogr.RegisterAll();

OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 0);

int iFID = Convert.ToInt32(txtFID.Text);
OGR.Layer l = ds.GetLayerByName("granser");
try
{
	l.StartTransaction();
	l.DeleteFeature(iFID);
	l.CommitTransaction();
}
catch (Exception ex)
{
	l.RollbackTransaction();
	MessageBox.Show(ex.Message);
}
-----------------------------------

___________________________________


Johan Hallgren
WM-data


Pelle Bergs backe 3
Box 1938, 791 19 Falun
Tel: 023-844 65 (int: +46-2384465)
Mobil: 070-588 44 28 (int: +46-705884428)
johan.e.hallgren@wmdata.com
http://www.wmdata.se


-----Ursprungligt meddelande-----
Fr?n: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] F?r Frank Warmerdam
Skickat: den 26 oktober 2005 18:02
Till: Hallgren Johan E
Kopia: gdal-dev@lists.maptools.org
?mne: Re: [Gdal-dev] Read/Write Oracle Spatial

On 10/26/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> OGR.Driver d = OGR.ogr.GetDriverByName("OCI");
> OGR.DataSource ds = d.Open(@"OCI:wmgis/wmgis01@WMSI1394", 1);
>
> GDAL.gdal.SetConfigOption("OGR_FID","OBJECTID");

Johan,

You need to call SetConfigOption() before opening the datasource
as it alters the decisions made as the layers are scanned during
the open.

> I tried to do add a column OGR_FID (primary key) to the table but in that case it failed on the SetFeature with no meaningful error message. Now the actual record was gone so my guess is that the function removes the record and when adding a new it fails (can it be something with the OGR_FID not being properly updated?).

SetFeature does indeed operate by deleting the existing row and re-creating
it.   You could do a StartTransaction() and Commit() or Rollback() after
the SetFeature() if you want better error handling.  It really ought to do
this internally if there is no active transaction.

> Finally, is it the right way to use SetFeature when updating a record?
>
> I hope you have time to answer my questions.

I think you are doing things right, and I am not sure why it isn't
working; however, I don't think SetFeature() is used often.  I see
it is not used in the ogr_oci.py test script for the OCI provider.  It
may just be broken.

Unfortunately, while I have time to answer this question, I don't
have time to reboot into win32, and fiddle around to see what is
going wrong today.  You might want to file a bug report.

For now it is hard to say if you are encountering some limitation
of the c# bindings or ogr.

... one extra review of your code ...

Actually, now I see you are doing things in a transaction, but
committing it even if the SetFeature() fails.

Also, more seriously, I see you are fetching a reference to the
feature geometry modifying it and then calling SetGeometryDirectly().
The problem with this is that GetGeometryRef() returns a pointer to
the internal feature geometry.  So you are modifying it directly on
the feature, and then when you do the SetGeometryDirectly() it
will delete the old geometry and try to set the new one.  But the
new one is really the old one, now deleted.  So you should skip
the SetGeometryDirectly() step ... or .. clone the result that comes
back from GetGeometryRef().

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 27 09:44:17 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D6@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C0F48D6@WMRI000166.corp.wmdata.net>
Message-ID: <931f8ea90510270644o5331d884ia025422ca5abaf9e@mail.gmail.com>

On 10/27/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> Thanks for all the assistance.
>
> My SetFeature problem was probably caused by the bad geometry handling in the code. It's solved now but there is still two functions a have isolated but problems remain.

Johan,

Excellent.

> When updating a field I use a function SetField and it just don't work. It will crash on that call.

I suspect this problem is a C# swig binding issue.  You should
likely file a bug on it.

> The other function is DeleteFeature. The problem is the same, it just don't work and crash on that call.

I have reviewed the code and I see there is no implementation
of DeleteFeature() for the OCI driver.  I have committed one in
CVS and would appreciate it if you could test it.  I should add
I haven't been able to even try compiling it since I am not booted
into the system with oracle at this time.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Oct 27 12:43:43 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] scale/offset/units
Message-ID: <931f8ea90510270943k608128d8g1c0c034b58521703@mail.gmail.com>

Erick,

I have added support for GetScale(), GetOffset() and GetUnitsType()
in the HDF4 driver for data with the following metadata items:

   productUnits=dimensionless
   scalingSlope=2e-06
   scalingIntercept=0.05

The gdalinfo utility now reports the following for the file in
question:

Band 1 Block=2000x1 Type=Int16, ColorInterp=Gray
  Unit Type: dimensionless
  Offset: 0.05,   Scale:2e-06

All the changes are committed in CVS.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marco_vieira at uk2.net  Thu Oct 27 15:23:08 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: ECW JPEG 2000 Source SDK v3.3 (RC)
Message-ID: <29560.200.169.121.246.1130440988.squirrel@maxproxy5.uk2net.com>

Hi all:

I'm trying to compile ECW SDK 3.3 to use with GDAL but I got the following
error:

/home/marco/install/libecwj2-3.3/Source/include/NCSJP2FileView.h:837:
error: ISO C++ forbids declaration of 'CNCSJPCResample' with no type
/home/marco/install/libecwj2-3.3/Source/include/NCSJP2FileView.h:837:
error: expected ';' before '*' token
make[3]: ** [______lib_libecwj2_a-NCSJP2.o] Erro 1

My system is:
uname -a
Linux spatialsv 2.6.8-2-386 #1 Thu May 19 17:40:50 JST 2005 i686 GNU/Linux
gcc/g++ version 4.0.2 (Debian 4.0.2-2)

the complete ./configure + make is attached.

Thanks for any help.

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net


> Hello All:
>
> To build it on MACOSX 10.4.2 g++ version 4.0.0 I had to make one small
change in the file:
>
> NCSSocket.cpp
>
>
>
> CNCSSocket::CNCSSocket(const int handle)
> : m_handle(handle), m_connected(true)
> {
>      //init();
>      struct sockaddr_in info;
> #if defined(POSIX) && !defined(HPUX)
> #    ifdef MACOSX
>      socklen_t tempSize = sizeof(struct sockaddr);
>      //int tempSize = sizeof(struct sockaddr);
> #    else
>      socklen_t tempSize = sizeof(struct sockaddr);
> #    endif
> #else
>      int tempSize = sizeof(struct sockaddr);
> #endif
>      getpeername(handle, (struct sockaddr*)&info, &tempSize);
>      m_connectedPort = info.sin_port;
>      //m_connectedTo = inet_ntoa(info.sin_addr);
>
> }
> #endif
>
>
> On my MAC I had to set int tempSize = sizeof(struct sockaddr);
>
> to
>
> socklen_temt pSize = sizeof(struct sockaddr);
>
>
> Has any one else had the same problem with 10.4.2?
>
>
> This was the only modification and it built.  Not tested with GDAL yet
though.
>
> Take care
>
> Garrettt
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net
-------------- next part --------------
marco@spatialsv:~/install/libecwj2-3.3$ ./configure
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for style of include used by make... GNU
checking dependency style of gcc... gcc3
checking how to run the C preprocessor... gcc -E
checking for a sed that does not truncate output... /bin/sed
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking for egrep... grep -E
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking dependency style of g++... gcc3
checking how to run the C++ preprocessor... g++ -E
checking for g77... no
checking for f77... no
checking for xlf... no
checking for frt... no
checking for pgf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for f90... no
checking for xlf90... no
checking for pgf90... no
checking for epcf90... no
checking for f95... no
checking for fort... no
checking for xlf95... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for gfortran... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 32768
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc static flag  works... yes
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by g++... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC
checking if g++ PIC flag -fPIC works... yes
checking if g++ supports -c -o file.o... yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... (cached) yes
checking whether ln -s works... yes
checking whether we are using the GNU C++ compiler... (cached) yes
checking whether g++ accepts -g... (cached) yes
checking dependency style of g++... (cached) gcc3
checking for ANSI C header files... (cached) yes
checking for inline... inline
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
checking whether build environment is sane... yes
checking for a BSD-compatible install... /usr/bin/install -c
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 3:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 5:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 9:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 14:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 19:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 24:
: command not found/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 29:
'home/marco/install/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 47: syntax error near unexpected token `in
'home/marco/install/libecwj2-3.3/Source/C/NCSEcw/lcms/missing: line 47: `case "$1" in
configure: WARNING: `missing' script is too old or missing
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for style of include used by make... GNU
checking dependency style of gcc... none
checking how to run the C preprocessor... gcc -E
checking for a sed that does not truncate output... /bin/sed
checking for egrep... grep -E
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... (cached) yes
checking whether ln -s works... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking dependency style of g++... none
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking how to recognise dependent libraries... pass_all
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking how to run the C++ preprocessor... g++ -E
checking for g77... no
checking for f77... no
checking for xlf... no
checking for frt... no
checking for pgf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for f90... no
checking for xlf90... no
checking for pgf90... no
checking for epcf90... no
checking for f95... no
checking for fort... no
checking for xlf95... no
checking for ifc... no
checking for efc... no
checking for pgf95... no
checking for lf95... no
checking for gfortran... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 32768
checking command to parse /usr/bin/nm -B output from gcc object... ok

checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc static flag  works... yes
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC
checking if gcc PIC flag -fPIC works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by g++... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC
checking if g++ PIC flag -fPIC works... yes
checking if g++ supports -c -o file.o... yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
checking whether to enable maintainer-specific portions of Makefiles... no
checking for inline... inline
checking whether byte ordering is bigendian... no
checking for int... yes
checking size of int... 4
checking for unsigned int... yes
checking size of unsigned int... 4
checking for long... yes
checking size of long... 4
checking for unsigned long... yes
checking size of unsigned long... 4
checking for long long... yes
checking size of long long... 8
checking for unsigned long long... yes
checking size of unsigned long long... 8
checking for signed 8-bit type... char
checking for unsigned 8-bit type... unsigned char
checking for signed 16-bit type... short
checking for unsigned 16-bit type... unsigned short
checking for signed 32-bit type... int
checking for unsigned 32-bit type... unsigned int
checking for signed 64-bit type... long long
checking for unsigned 64-bit type... unsigned long long
checking for sqrt in -lm... yes
checking for JPEG support ...
checking jconfig.h usability... yes
checking jconfig.h presence... yes
checking for jconfig.h... yes
checking jerror.h usability... yes
checking jerror.h presence... yes
checking for jerror.h... yes
checking jmorecfg.h usability... yes
checking jmorecfg.h presence... yes
checking for jmorecfg.h... yes
checking jpeglib.h usability... yes
checking jpeglib.h presence... yes
checking for jpeglib.h... yes
checking for jpeg_read_header in -ljpeg... yes
checking for JPEG library is version 6b or later... yes
yes
checking if JPEG package is complete... yes
checking for ZLIB support ...
checking zconf.h usability... yes
checking zconf.h presence... yes
checking for zconf.h... yes
checking zlib.h usability... yes
checking zlib.h presence... yes
checking for zlib.h... yes
checking for compress in -lz... yes
checking for uncompress in -lz... yes
checking for deflate in -lz... yes
checking for inflate in -lz... yes
checking for gzseek in -lz... yes
checking for gztell in -lz... yes
checking if ZLIB package is complete... yes
checking for TIFF support ...
checking tiff.h usability... no
checking tiff.h presence... no
checking for tiff.h... no
checking tiffio.h usability... no
checking tiffio.h presence... no
checking for tiffio.h... no
checking for TIFFOpen in -ltiff... no
checking for TIFFClientOpen in -ltiff... no
checking for TIFFIsByteSwapped in -ltiff... no
checking if TIFF package is complete... no
configure: creating ./config.status
config.status: creating Makefile
config.status: creating lcms.pc
config.status: creating include/icc34.h
config.status: creating include/Makefile
config.status: creating jpegicc/Makefile
config.status: creating python/Makefile
config.status: creating samples/Makefile
config.status: creating testbed/Makefile
config.status: creating tifficc/Makefile
config.status: creating src/Makefile
config.status: executing depfiles commands
checking target system type... i686-pc-linux-gnu
configure: creating ./config.status
config.status: creating Makefile
config.status: creating Source/Makefile
config.status: creating Source/NCSBuildGnu/Makefile
config.status: creating Source/NCSBuildGnu/NCSGnuConfig.h
config.status: executing depfiles commands
marco@spatialsv:~/install/libecwj2-3.3$ make
Making all in Source
make[1]: Entering directory `/home/marco/install/libecwj2-3.3/Source'
Making all in NCSBuildGnu
make[2]: Entering directory `/home/marco/install/libecwj2-3.3/Source/NCSBuildGnu'
cd ../.. && /bin/sh /home/marco/install/libecwj2-3.3/missing --run autoheader
configure.in:51: warning: AC_ARG_PROGRAM was called before AC_CANONICAL_TARGET
autoconf/general.m4:1657: AC_CANONICAL_TARGET is expanded from...
configure.in:51: the top level
touch ./NCSGnuConfig.h.in
cd ../.. && /bin/sh ./config.status Source/NCSBuildGnu/NCSGnuConfig.h
config.status: creating Source/NCSBuildGnu/NCSGnuConfig.h
make  all-am
make[3]: Entering directory `/home/marco/install/libecwj2-3.3/Source/NCSBuildGnu'
if g++ -DHAVE_CONFIG_H -I. -I. -I.  -D_GNU_SOURCE -D_REENTRANT -DLIBECWJ2 -DLINUX -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -DUNICODE -D_UNICODE -DPOSIX -I/home/marco/install/libecwj2-3.3/Source/include -I/home/marco/install/libecwj2-3.3/Source/C/NCSEcw/lcms/include -Wall -Wno-long-long -fpic -fno-common   -g -O2 -MT ______lib_libecwj2_a-NCSJP2.o -MD -MP -MF ".deps/______lib_libecwj2_a-NCSJP2.Tpo" \
  -c -o ______lib_libecwj2_a-NCSJP2.o `test -f '../C/NCSEcw/NCSJP2/NCSJP2.cpp' || echo './'`../C/NCSEcw/NCSJP2/NCSJP2.cpp; \
then mv -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo" ".deps/______lib_libecwj2_a-NCSJP2.Po"; \
else rm -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo"; exit 1; \
fi
/home/marco/install/libecwj2-3.3/Source/include/NCSJP2FileView.h:837: error: ISO C++ forbids declaration of 'CNCSJPCResample' with no type
/home/marco/install/libecwj2-3.3/Source/include/NCSJP2FileView.h:837: error: expected ';' before '*' token
make[3]: ** [______lib_libecwj2_a-NCSJP2.o] Erro 1
make[3]: Leaving directory `/home/marco/install/libecwj2-3.3/Source/NCSBuildGnu'
make[2]: ** [all] Erro 2
make[2]: Leaving directory `/home/marco/install/libecwj2-3.3/Source/NCSBuildGnu'
make[1]: ** [all-recursive] Erro 1
make[1]: Leaving directory `/home/marco/install/libecwj2-3.3/Source'
make: ** [all-recursive] Erro 
From moon_inwell at 163.com  Thu Oct 27 21:54:18 2005
From: moon_inwell at 163.com (lky)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Question about Gauss-Kruger projection
References: <200510271602.j9RG2QE1015284@duke.maptools.org>
Message-ID: <000f01c5db62$824253b0$7ef9a8c0@lky>

Hello, everyone

I'm a new learner of gdal that I find that gdal open source can't support the Gauss-Kruger projection.Some friends tell me that I can use UTM(Universal Transverse Mercator) to replace the Gauss-Kruger. But I am not sure of this.

My questions are

1.How to use Gauss-Kruger projection by gdal open source?

2.Can the UTM project replace Gauss-Kruger projection? If it can, which is the difference between them and which I should pay attention to in program?

Thanks a lot.

yours
Kunyang Li        


From warmerdam at pobox.com  Thu Oct 27 22:32:25 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Question about Gauss-Kruger projection
In-Reply-To: <000f01c5db62$824253b0$7ef9a8c0@lky>
References: <200510271602.j9RG2QE1015284@duke.maptools.org>
	<000f01c5db62$824253b0$7ef9a8c0@lky>
Message-ID: <931f8ea90510271932yf538251l8be4cb06d173819b@mail.gmail.com>

On 10/27/05, lky <moon_inwell@163.com> wrote:
> Hello, everyone
>
> I'm a new learner of gdal that I find that gdal open source can't support the Gauss-Kruger projection.Some friends tell me that I can use UTM(Universal Transverse Mercator) to replace the Gauss-Kruger. But I am not sure of this.
>
> My questions are
>
> 1.How to use Gauss-Kruger projection by gdal open source?

Kunyang Li,

My understanding is that Gauss-Kruger is another name for
Transverse Mercator.   GDAL (and PROJ.4, etc) supports
Transverse Mercator just fine.

> 2.Can the UTM project replace Gauss-Kruger projection? If it can, which is the difference between them and which I should pay attention to in program?

UTM is a specialized transverse mercator.  That is, UTM "zones"
are essentially aliases for transverse mercator with particular
projection parameters.  The central meridian varies by zone.

I believe it would be safer to say you can use Transverse Mercator
for Gauss-Kruger.  Some Gauss-Kruger projections are zonal, and
*might* happen to match up exactly with UTM zones, but this is
by no means certain.   So pay close attention to the parameters
(central meridian, center latitude, scale, false easting and false northing).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From uwe.schmitz at lverma.nrw.de  Fri Oct 28 03:29:33 2005
From: uwe.schmitz at lverma.nrw.de (uwe.schmitz@lverma.nrw.de)
Date: Wed Nov 21 11:49:49 2007
Subject: AW: [Gdal-dev] Question about Gauss-Kruger projection
Message-ID: <C900396522B3C142AA9A7F5AFEE11CB30A8B14@slva01lvnt23.lverma.nrw.de>

Kunyang Li,

> 
> Hello, everyone
> 
> I'm a new learner of gdal that I find that gdal open source 
> can't support the Gauss-Kruger projection.Some friends tell 
> me that I can use UTM(Universal Transverse Mercator) to 
> replace the Gauss-Kruger. But I am not sure of this.
> 
> My questions are
> 
> 1.How to use Gauss-Kruger projection by gdal open source?
> 
I don't know what you want to do, but this
is an example, how to warp a GeoTiff-File
between two Gauss-Krueger-Systems:

$ gdalinfo G33945698.tif
Driver: GTiff/GeoTIFF
Size is 4000, 4000
Coordinate System is:
PROJCS["DHDN / Gauss-Kruger zone 3",
    GEOGCS["DHDN",
        DATUM["Deutsches_Hauptdreiecksnetz",
            SPHEROID["Bessel 1841",6377397.155,299.1528128000008,
                AUTHORITY["EPSG","7004"]],
            AUTHORITY["EPSG","6314"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4314"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",3500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","31493"]]
Origin = (3394000.000000,5700000.000000)
Pixel Size = (0.50000000,-0.50000000)
<snip ...>

$ gdalwarp -tr 0.5 0.5 -t_srs EPSG:31466 G33945698.tif tr.tif
Creating output file that is 4160P x 4160L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo tr.tif
Driver: GTiff/GeoTIFF
Size is 4160, 4160
Coordinate System is:
PROJCS["DHDN / Gauss-Kruger zone 2",
    GEOGCS["DHDN",
        DATUM["Deutsches_Hauptdreiecksnetz",
            SPHEROID["Bessel 1841",6377397.155,299.1528128000008,
                AUTHORITY["EPSG","7004"]],
            AUTHORITY["EPSG","6314"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4314"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",6],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",2500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","31466"]]
Origin = (2602627.814926,5700012.818412)
Pixel Size = (0.50000000,-0.50000000)
<snip ...>


> 2.Can the UTM project replace Gauss-Kruger projection? If it 
> can, which is the difference between them and which I should 
> pay attention to in program?
> 
UTM and Gauss-Krueger based (matematically) on the same 
approach. Only some parameters (zone width, scale factor
for central meridian, ...) are different.

Hope that helps 
uwe
---------------------------------------------------------
... Uwe Schmitz  Landesvermessungsamt Nordrhein-Westfalen
... Muffendorfer Str. 19 - 21              D - 53177 Bonn
... E-mail:       uwe.schmitzNO@SPAMlverma.nrw.de
... Internet:     http://www.lverma.nrw.de
 


From bartvde at xs4all.nl  Fri Oct 28 04:22:50 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] MrSID SDK -> GeoExpress SDK
Message-ID: <4361DFDA.1090802@xs4all.nl>

Hi list,

can anybody confirm that the MrSID SDK is now called "GeoExpress SDK"? 
Is this the SDK one needs to use MrSID in combination with GDAL?

Thanks in advance.

Best regards,
Bart

From warmerdam at pobox.com  Fri Oct 28 09:17:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] MrSID SDK -> GeoExpress SDK
In-Reply-To: <4361DFDA.1090802@xs4all.nl>
References: <4361DFDA.1090802@xs4all.nl>
Message-ID: <931f8ea90510280617r33102a1ek42e4b67e1470c02d@mail.gmail.com>

On 10/28/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> Hi list,
>
> can anybody confirm that the MrSID SDK is now called "GeoExpress SDK"?
> Is this the SDK one needs to use MrSID in combination with GDAL?

Bart,

Yes, it is called the GeoExpress SDK now (perhaps it always was).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Fri Oct 28 09:25:45 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] MrSID SDK -> GeoExpress SDK
In-Reply-To: <931f8ea90510280617r33102a1ek42e4b67e1470c02d@mail.gmail.com>
References: <4361DFDA.1090802@xs4all.nl>
	<931f8ea90510280617r33102a1ek42e4b67e1470c02d@mail.gmail.com>
Message-ID: <436226D9.9050207@xs4all.nl>

Hi Frank,

thanks for the confirmation.

Is it one SDK for both reading and writing? Are there any limits to writing?

Best regards,
Bart

Frank Warmerdam wrote:

>On 10/28/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
>  
>
>>Hi list,
>>
>>can anybody confirm that the MrSID SDK is now called "GeoExpress SDK"?
>>Is this the SDK one needs to use MrSID in combination with GDAL?
>>    
>>
>
>Bart,
>
>Yes, it is called the GeoExpress SDK now (perhaps it always was).
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>
>  
>


From jhhal at wmdata.com  Fri Oct 28 10:11:41 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C0F48E4@WMRI000166.corp.wmdata.net>

Silly questions...

You are mention that you have committed a change in 
CVS, you are also asking me to do some tests on that. I would be glad to
do it but where can a get the source. With CVS do you mean
http://cvs.maptools.org/query.cgi? Can I get some source code to
recompile there?

/Johan




-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: den 27 oktober 2005 14:44
To: Hallgren Johan E
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Read/Write Oracle Spatial

On 10/27/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> Thanks for all the assistance.
>
> My SetFeature problem was probably caused by the bad geometry handling
in the code. It's solved now but there is still two functions a have
isolated but problems remain.

Johan,

Excellent.

> When updating a field I use a function SetField and it just don't
work. It will crash on that call.

I suspect this problem is a C# swig binding issue.  You should
likely file a bug on it.

> The other function is DeleteFeature. The problem is the same, it just
don't work and crash on that call.

I have reviewed the code and I see there is no implementation
of DeleteFeature() for the OCI driver.  I have committed one in
CVS and would appreciate it if you could test it.  I should add
I haven't been able to even try compiling it since I am not booted
into the system with oracle at this time.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Oct 28 10:21:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Read/Write Oracle Spatial
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C0F48E4@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C0F48E4@WMRI000166.corp.wmdata.net>
Message-ID: <931f8ea90510280721u2690479eudf8fb5c1c26078b5@mail.gmail.com>

On 10/28/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> Silly questions...
>
> You are mention that you have committed a change in
> CVS, you are also asking me to do some tests on that. I would be glad to
> do it but where can a get the source. With CVS do you mean
> http://cvs.maptools.org/query.cgi? Can I get some source code to
> recompile there?

Johan,

The newest code is now in CVS (the source control system for GDAL).
There are nightly snapshots from CVS made available at:

  http://dl.maptools.org/dl/gdal/daily/

You can also use a CVS client to pull the very latest, but last
nights snapshot should be fine for your purposes.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matt.wilkie at gov.yk.ca  Fri Oct 28 11:59:02 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: [FWTools] gdal_merge.bat
In-Reply-To: <DEEHJBDCBOMHFDHIBBCCGENACCAA.tkirstine@jdbarnes.com>
References: <DEEHJBDCBOMHFDHIBBCCGENACCAA.tkirstine@jdbarnes.com>
Message-ID: <43624AC6.4010303@gov.yk.ca>

Travis Kirstine GIS Tech wrote:
> Is it possible to create multiple outputs with the gdal_merge.bat.  I've
> been creating a batch file and running it in the FWTool shell without much
> success e.g.
> 
> my_merge.bat
> 
> gdal_merge.bat -o out_1.tif -of GTiff in_1.tif in_2.tif in_3.tif
> gdal_merge.bat -o out_2.tif -of GTiff in_3.tif in_4.tif in_5.tif
> 
> This process works but only creates the out_1.tif.

Hi Travis, I think you've encountered the same problem I just finally 
solved yesterday. On Windows gdal_merge needs to be CALL'd else the 
control doesn't return to the original batch file:

@echo off
:: My_Merge.bat
CALL gdal_merge.bat -o out_1.tif -of GTiff in_1.tif in_2.tif in_3.tif
CALL gdal_merge.bat -o out_2.tif -of GTiff in_3.tif in_4.tif in_5.tif
echo --- Done!


cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Fri Oct 28 12:13:18 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] Re: [FWTools] gdal_merge.bat
In-Reply-To: <43624AC6.4010303@gov.yk.ca>
References: <DEEHJBDCBOMHFDHIBBCCGENACCAA.tkirstine@jdbarnes.com>
	<43624AC6.4010303@gov.yk.ca>
Message-ID: <931f8ea90510280913j5686961dtedf19ce9a27c28e8@mail.gmail.com>

On 10/28/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> @echo off
> :: My_Merge.bat
> CALL gdal_merge.bat -o out_1.tif -of GTiff in_1.tif in_2.tif in_3.tif
> CALL gdal_merge.bat -o out_2.tif -of GTiff in_3.tif in_4.tif in_5.tif
> echo --- Done!

Matt,

Good debugging!  I have reproduced this behavior here as well but
I don't understand it.  I see the same thing occurs if I have
even a simple .bat file invoke another simple .bat file without
call.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Fri Oct 28 12:25:09 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] MrSID SDK -> GeoExpress SDK
In-Reply-To: <436226D9.9050207@xs4all.nl>
References: <4361DFDA.1090802@xs4all.nl>	<931f8ea90510280617r33102a1ek42e4b67e1470c02d@mail.gmail.com>
	<436226D9.9050207@xs4all.nl>
Message-ID: <436250E5.5040001@xs4all.nl>

Okay, found the answer in this fwtools e-mail:

http://lists.maptools.org/pipermail/fwtools/2005-June/000106.html

This MrSID stuff is confusing though :-)

Best regards,
Bart

Bart van den Eijnden wrote:

> Hi Frank,
>
> thanks for the confirmation.
>
> Is it one SDK for both reading and writing? Are there any limits to 
> writing?
>
> Best regards,
> Bart
>
> Frank Warmerdam wrote:
>
>> On 10/28/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
>>  
>>
>>> Hi list,
>>>
>>> can anybody confirm that the MrSID SDK is now called "GeoExpress SDK"?
>>> Is this the SDK one needs to use MrSID in combination with GDAL?
>>>   
>>
>>
>> Bart,
>>
>> Yes, it is called the GeoExpress SDK now (perhaps it always was).
>>
>> Best regards,
>> -- 
>> ---------------------------------------+-------------------------------------- 
>>
>> I set the clouds in motion - turn up   | Frank Warmerdam, 
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>
>>
>>
>>  
>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From Peter.Nagy at vexcel.com  Fri Oct 28 13:03:23 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:49 2007
Subject: [Gdal-dev] 'Derived' VRT bands
Message-ID: <Pine.CYG.4.58.0510281101180.1348@Thwack>


Hi all ->

  I have added a new specialized type of vrt band that I've called a
'derived' band, which is a 'sourced' vrt band that derives its pixel
information from its source bands instead of overlaying the sources on top
of each other.  With this type of band you specify a pixel function which
uses the source bands to create the output raster on the fly.  This can be
handy for creating a large number of views from a dataset without
generating a lot of extra bands on disk.

  For example, you might want to display a band generated from four source
bands in a nine band input dataset (b0, b3, b4, and b8):

  pixel = sqrt((b3*b3+b4*b4)/(b0*b8));

  You can now write a pixel function to perform this calculation, register
it with GDAL using a unique key, and then create a vrt dataset band that
applies this function.  I have added a 'Using Derived Bands' section to
the vrt tutorial which goes into more detail.

  Please let me know if you encounter any difficulties or have any
suggestions.

  Cheers,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


From warmerdam at pobox.com  Fri Oct 28 13:45:01 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] 'Derived' VRT bands
In-Reply-To: <Pine.CYG.4.58.0510281101180.1348@Thwack>
References: <Pine.CYG.4.58.0510281101180.1348@Thwack>
Message-ID: <931f8ea90510281045j4d98aad0l9723525feccd67ab@mail.gmail.com>

On 10/28/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
>   Please let me know if you encounter any difficulties or have any
> suggestions.


Pete,

I am getting this on link:

../libgdal.so: undefined reference to
`VRTDerivedRasterBand::VRTDerivedRasterBand[in-charge](GDALDataset*,
int, GDALDataType, int, int)'
../libgdal.so: undefined reference to
`VRTDerivedRasterBand::VRTDerivedRasterBand[in-charge](GDALDataset*,
int)'
collect2: ld returned 1 exit status


I don't see any actual implementation code for the VRTDerivedRasterBand
in CVS.  Perhaps you forgot to commit it?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matt.wilkie at gov.yk.ca  Fri Oct 28 14:23:30 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] Re: [FWTools] gdal_merge.bat
In-Reply-To: <931f8ea90510280913j5686961dtedf19ce9a27c28e8@mail.gmail.com>
References: <DEEHJBDCBOMHFDHIBBCCGENACCAA.tkirstine@jdbarnes.com>	
	<43624AC6.4010303@gov.yk.ca>
	<931f8ea90510280913j5686961dtedf19ce9a27c28e8@mail.gmail.com>
Message-ID: <43626CA2.6000403@gov.yk.ca>

Frank Warmerdam wrote:
> On 10/28/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
>> @echo off
>> :: My_Merge.bat
>> CALL gdal_merge.bat -o out_1.tif -of GTiff in_1.tif in_2.tif in_3.tif
>> CALL gdal_merge.bat -o out_2.tif -of GTiff in_3.tif in_4.tif in_5.tif
>> echo --- Done!
> 
> Matt,
> 
> Good debugging!  I have reproduced this behavior here as well but
> I don't understand it.  I see the same thing occurs if I have
> even a simple .bat file invoke another simple .bat file without
> call.

That's just the nature of Windows command shell, control is not returned 
to the original batch file unless CALLed. It's been that way for as long 
as I can remember (DOSv3). If I'd realised that on windows typing 
"gdal_merge" actually used gdal_merge.bat I'd have figured out it more 
quickly.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Peter.Nagy at vexcel.com  Fri Oct 28 15:22:29 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] 'Derived' VRT bands
In-Reply-To: <931f8ea90510281045j4d98aad0l9723525feccd67ab@mail.gmail.com>
References: <Pine.CYG.4.58.0510281101180.1348@Thwack>
	<931f8ea90510281045j4d98aad0l9723525feccd67ab@mail.gmail.com>
Message-ID: <Pine.CYG.4.58.0510281321050.1348@Thwack>


Yes, forgot to add a file.  Sigh.

-> Pete

> Pete,
>
> I am getting this on link:
>
> ../libgdal.so: undefined reference to
> `VRTDerivedRasterBand::VRTDerivedRasterBand[in-charge](GDALDataset*,
> int, GDALDataType, int, int)'
> ../libgdal.so: undefined reference to
> `VRTDerivedRasterBand::VRTDerivedRasterBand[in-charge](GDALDataset*,
> int)'
> collect2: ld returned 1 exit status
>
>
> I don't see any actual implementation code for the VRTDerivedRasterBand
> in CVS.  Perhaps you forgot to commit it?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From matt.wilkie at gov.yk.ca  Fri Oct 28 16:15:36 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] changes to ArcGIS data store coming
Message-ID: <436286E8.7030705@gov.yk.ca>

Gdal Developers,

In version 9.2 of ArcGIS ESRI will be introducing a new data store to 
supplant ms-access personal geodatabases. They are promsing to publish 
an open API to the new store the same way they did for shapefiles.

Upcoming changes to geodatabases in arcgis 9.2:
http://www.esri.com/news/arcnews/summer05articles/managing-spatial-data.html

Things which caught my attention (mostly near the bottom):

"Archiving Geodatabase History ? A key goal of ArcGIS 9.2 is to allow
efficient storage and query of historical database states

"Double Precision ?  [for] The entire GIS stack ... This allows a single
spatial domain to be used for the whole globe (!)

"File-Based Geodatabase ? At ArcGIS 9.2, the complete functionality of a
personal geodatabase and its complete information model have been
implemented on top of a file system. File-based geodatabases fully
support vector; raster; terrain; annotation; and all other geodatabase
data types, rules, and relationships without the performance and
geodatabase size limitations of a Microsoft Access database. In
performance tests to date, the file-based geodatabase implementation not
only outperforms the Microsoft Access personal geodatabase, but it also
outperforms the shapefile for display and query operations."

On the FME wiki there is a small note saying the API itself won't be out 
for v9.2 "ESRI tell us that they have a C++ api in the pipeline for this 
format. That would be great because we wouldn't need to use ArcObjects 
and therefore users wouldn't need ArcGIS installed to write to it from 
FME. It's not specified when this will be - but it won't be in v9.2"
http://www.fmepedia.com/index.php/Support_-_Geodatabase_FAQ


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From gdavis at refractions.net  Fri Oct 28 16:38:45 2005
From: gdavis at refractions.net (Graham Davis)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] gdal_translate error
Message-ID: <43628C55.6010803@refractions.net>

Hi,

I'm trying to convert some adf files to ascii (AAIGrid format).  I am 
using the following command line:

./gdal_translate -of AAIGrid 
../../../home/gdavis/tserver/italia_geo_2/dblbnd.adf 
../../../raid/tmp/gdavis/tserver/2/dblbnd.asc

I get the following error everytime I try:

Input file size is 76056, 62770
0...10...20.ERROR 1: IReadBlock failed at X offset 0, Y offset 3405
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3405

The adf files load fine in ArcMap.  The file is about 6.1GB when it 
dies, and I have plenty of space left on the drive.  I've ensured there 
is no LFS or large file problems on the linux system (as the 6.1GB file 
size should prove).  My guess is that gdal thinks the file is corrupted 
in some way, but since ArcMap is able to open it fine, I don't know how 
accurate that is.

Does anyone have some ideas or input as to what might be causing this 
problem?  Thanks,

-- 
Graham Davis
Refractions Research Inc.
gdavis@refractions.net


From bartvde at xs4all.nl  Sun Oct 30 09:58:01 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] OCI: OGR_FID not marked as primary key
Message-ID: <op.szgruzgzmjfraz@bart>

Hi list,

why is the OGR_FID column not marked as the primary key by the OCI driver?  
I now run the following SQL after loading the data:

ALTER TABLE PERCELEN ADD CONSTRAINT PERCELEN_PK PRIMARY KEY (OGR_FID);

Best regards,
Bart

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From woklist at kyngchaos.com  Sun Oct 30 13:14:58 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] iODBC instead of unixODBC?
Message-ID: <5F61882B-3BCA-4537-9378-8EF9D8C2BC79@kyngchaos.com>

I was able to substitute -liodbc for -lodbc and get OGR to build with  
ODBC and PGeo support.  (Mac OS X comes with iODBC and I'm having  
trouble getting unixODBC to build with GCC 4, so I thought I'd try  
iODBC)  So it *appears* that they are interchangable.  I don't have  
any ODBC drivers to test this with right now, but I can try to get a  
MySQL or Postgre driver installed.

So, should this work?

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy

From warmerdam at pobox.com  Sun Oct 30 23:52:44 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] gdal_translate error
In-Reply-To: <43628C55.6010803@refractions.net>
References: <43628C55.6010803@refractions.net>
Message-ID: <931f8ea90510302052l1be162en68139bc3eea95471@mail.gmail.com>

On 10/28/05, Graham Davis <gdavis@refractions.net> wrote:
> Hi,
>
> I'm trying to convert some adf files to ascii (AAIGrid format).  I am
> using the following command line:
>
> ./gdal_translate -of AAIGrid
> ../../../home/gdavis/tserver/italia_geo_2/dblbnd.adf
> ../../../raid/tmp/gdavis/tserver/2/dblbnd.asc
>
> I get the following error everytime I try:
>
> Input file size is 76056, 62770
> 0...10...20.ERROR 1: IReadBlock failed at X offset 0, Y offset 3405
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3405
>
> The adf files load fine in ArcMap.  The file is about 6.1GB when it
> dies, and I have plenty of space left on the drive.  I've ensured there
> is no LFS or large file problems on the linux system (as the 6.1GB file
> size should prove).  My guess is that gdal thinks the file is corrupted
> in some way, but since ArcMap is able to open it fine, I don't know how
> accurate that is.
>
> Does anyone have some ideas or input as to what might be causing this
> problem?  Thanks,

Graeme,

I see that the AIGrid reader is using the "small file" API for reading
arc/info binary grids.  This means it can only support files up to 2GB
in size which is likely what you are hitting.  The format internally
uses 32bit offsets for block offsets so even changing to use the large
file API will only allow for files up to 4GB.

I have commited changes to use the large file API, and have
re-tested with small files successfully.  I would encourage you
to try building the overnight snapshot and verify if it works with
your file.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Oct 31 00:01:54 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] iODBC instead of unixODBC?
In-Reply-To: <5F61882B-3BCA-4537-9378-8EF9D8C2BC79@kyngchaos.com>
References: <5F61882B-3BCA-4537-9378-8EF9D8C2BC79@kyngchaos.com>
Message-ID: <931f8ea90510302101h3c2caac4i830d3e195e82b49d@mail.gmail.com>

On 10/30/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
> I was able to substitute -liodbc for -lodbc and get OGR to build with
> ODBC and PGeo support.  (Mac OS X comes with iODBC and I'm having
> trouble getting unixODBC to build with GCC 4, so I thought I'd try
> iODBC)  So it *appears* that they are interchangable.  I don't have
> any ODBC drivers to test this with right now, but I can try to get a
> MySQL or Postgre driver installed.
>
> So, should this work?

William,

I my previous very limited experience I found iODBC less
reliable than unixODBC but generally speaking they should
be essentially interchangable.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Paul.Tildesley at csiro.au  Mon Oct 31 01:22:46 2005
From: Paul.Tildesley at csiro.au (Paul.Tildesley@csiro.au)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] Problem using gdal.py
Message-ID: <03B9D5E5C4768D4EA3A22CCA8B498A2009E2EA@extas4-hba.tas.csiro.au>

I have built gdal version 1.3.1 and I want to use the python file
gdal.py. This starts by importing _gdal.py which does not exist in my
installation. I have checked version 1.3.0 and it is the same.
 
Is _gdal.py supposed to be distributed with the tar file or is it
created in the make process?
 
What am I missing? How can I get to use gdal.py? 
 
Regards,
 
Paul.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051031/90a6390c/attachment.html
From moon_inwell at 163.com  Mon Oct 31 03:57:49 2005
From: moon_inwell at 163.com (lky)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] How can I get coordinate system and projection from
	shape files?
Message-ID: <002301c5ddf9$316b06a0$7ef9a8c0@lky>

Hello,everyone:

I'm a new learner of the gdal. During my study, I met some problems. I hope I can find help here.

I found these is one sentence "If a .prj files in old Arc/Info style or new ESRI OGC WKT style is present, it will be read and used to associate a projection with features." in \ogr\dev_shapefile.html.

And I found there are some *.prjfiles with the same name shapefile in directory C:\arcgis\arcexe83\Reference Systems(The directory which I install arcinfo).In the ArcMap, that the frame map file is *.mxt.

I try to use the OGRSFDriverRegistrar::Open function to open these *.prj files but I failed.

So I have the following questions.

1. Who can explain the use of these *.prj files in this directory? Which shapefiles do they support? Or they only support project mode for AcrMap?
2. What is the relation with the *.prj and *mxt files?
3. How can I read the coordinate system and projection from the *.prj files? And whether this prj file support the coordinate system and projection for the same name shapefile or for the shapefiles in the same directory?

Thanks a lot.

Kunyang Li
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051031/f40cdde4/attachment.html
From kruland at ku.edu  Mon Oct 31 07:28:44 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] Problem using gdal.py
In-Reply-To: <03B9D5E5C4768D4EA3A22CCA8B498A2009E2EA@extas4-hba.tas.csiro.au>
References: <03B9D5E5C4768D4EA3A22CCA8B498A2009E2EA@extas4-hba.tas.csiro.au>
Message-ID: <43660DFC.5020106@ku.edu>

Paul,

The 'import _gdal' line in gdal.py is actually trying to import the
shared object library _gdal.so.  You'll need to compile and install
that.  In order to install the new bindings, cd swig/python in the gdal
source directory and do "make install".  This will build and install
everything.

Kevin

Paul.Tildesley@csiro.au wrote:

> I have built gdal version 1.3.1 and I want to use the python file
> gdal.py. This starts by importing _gdal.py which does not exist in my
> installation. I have checked version 1.3.0 and it is the same.
>  
> Is _gdal.py supposed to be distributed with the tar file or is it
> created in the make process?
>  
> What am I missing? How can I get to use gdal.py?
>  
> Regards,
>  
> Paul.
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Mon Oct 31 09:12:27 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
Message-ID: <4366264B.9070405@loskot.net>

Hi,
What is the state of the OGR regarding conversion between
ESRI Shapefile and DGN. Is such conversion possible?

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Oct 31 09:33:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
In-Reply-To: <4366264B.9070405@loskot.net>
References: <4366264B.9070405@loskot.net>
Message-ID: <931f8ea90510310633p36aa0350u5c6bc625d1bf3a89@mail.gmail.com>

On 10/31/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> Hi,
> What is the state of the OGR regarding conversion between
> ESRI Shapefile and DGN. Is such conversion possible?

Mateusz,

Yes, you can convert shapefiles to DGN files.  Attributes
will generally be lost but simple point, linestring and polygon
geometries should translate well.  I'm not so sure what happens
to polygons with holes when converted to DGN.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Oct 31 10:03:01 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] How can I get coordinate system and projection from
	shape files?
In-Reply-To: <002301c5ddf9$316b06a0$7ef9a8c0@lky>
References: <002301c5ddf9$316b06a0$7ef9a8c0@lky>
Message-ID: <931f8ea90510310703x2fa56c41paac301d4f0bde25@mail.gmail.com>

On 10/31/05, lky <moon_inwell@163.com> wrote:
>
> Hello,everyone:
>
> I'm a new learner of the gdal. During my study, I met some problems. I hope
> I can find help here.
>
> I found these is one sentence "If a .prj files in old Arc/Info style or new
> ESRI OGC WKT style is present, it will be read and used to associate a
> projection with features." in \ogr\dev_shapefile.html.
>
> And I found there are some *.prj?files with the same name shapefile in
> directory C:\arcgis\arcexe83\Reference Systems(The directory which I install
> arcinfo).In the ArcMap, that the frame map file is *.mxt.
>
> I try to use the OGRSFDriverRegistrar::Open function to open these *.prj
> files but I failed.
>
> So I have the following questions.
>
> 1. Who can explain the use of these *.prj files in this directory? Which
> shapefiles do they support? Or they only support project mode for AcrMap?

Kunyang Li,

You should open the shapefile normally with OGRSFDriverRegistrar::Open()
and then fetch the layers from the datasource.  To find the coordinate
system of a layer you can call OGRLayer::GetSpatialRef() to get a handle
to the corresponding OGRSpatialReference object.

This method will read it from a correspondingly named .prj file if it
is present.

> 2. What is the relation with the *.prj and *mxt files?

I don't know anything about mxt files.

> 3. How can I read the coordinate system and projection from the *.prj files?
> And whether this prj file support the coordinate system and projection for
> the same name shapefile or for the shapefiles in the same directory?

OGR assumes a .prj file applies to the shapefile with the same
base filename.  If there is no corresponding .prj file, then GetSpatialRef()
will return NULL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From w.blanken at geon.nl  Mon Oct 31 10:14:48 2005
From: w.blanken at geon.nl (Wim Blanken)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
References: <4366264B.9070405@loskot.net>
Message-ID: <008101c5de2d$d7c78940$6401a8c0@blanken>

Hi Mateusz,


Add on for the remark Frank made...

Just to let you know OGR only works with version 7 and not with version 8 
DGN files as far as I know..........

Regards,

Wim Blanken
The Netherlands

----- Original Message ----- 
From: "Mateusz ?oskot" <mateusz@loskot.net>
To: <gdal-dev@lists.maptools.org>
Sent: Monday, October 31, 2005 3:12 PM
Subject: [Gdal-dev] SHP <-> DGN


> Hi,
> What is the state of the OGR regarding conversion between
> ESRI Shapefile and DGN. Is such conversion possible?
>
> Cheers
> -- 
> Mateusz ?oskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> 



From mateusz at loskot.net  Mon Oct 31 10:21:36 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
In-Reply-To: <931f8ea90510310633p36aa0350u5c6bc625d1bf3a89@mail.gmail.com>
References: <4366264B.9070405@loskot.net>
	<931f8ea90510310633p36aa0350u5c6bc625d1bf3a89@mail.gmail.com>
Message-ID: <43663680.3050806@loskot.net>

Frank Warmerdam napisa?(a):
> On 10/31/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> 
>>Hi,
>>What is the state of the OGR regarding conversion between
>>ESRI Shapefile and DGN. Is such conversion possible?
> 
> 
> Mateusz,
> 
> Yes, you can convert shapefiles to DGN files.  Attributes
> will generally be lost but simple point, linestring and polygon
> geometries should translate well.  I'm not so sure what happens
> to polygons with holes when converted to DGN.
> 

Thanks Frank,

But it seems I'm doing something wrong. I tried to convert file from 
dgnsamp.zip dateset downloaded from the dgnlib site 
(http://dgnlib.maptools.org/) and here is what I get:

mloskot@dog:~/download/dgn$ ogr2ogr -f "ESRI Shapefile" samp4.shp samp4.dgn

ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type 
shapefile.ERROR 1: Terminating translation prematurely after failed
translation of layer elements

Am I misusing ogr2ogr?

Cheers

-- 
Mateusz ?oskot
http://mateusz.loskot.net

From michael.paul at tao.es  Mon Oct 31 10:22:56 2005
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] OGR SWIG wrapper for Linux
Message-ID: <F351B61A81F4F54F92740EA8B510C2B102A3D3BA@ESGDASMA5VX0014.ib.gedas.vwg>

Hi list,

thanks to the mail of Johan Hallgren (Read/Write Oracle Spatial) I have been
able to compile successfuly the SWIG based C# wrappers for GDAL. Thanks to
the VC makefiles I do also have the SWIG generated C++ lib
(gdal_ogr_wrap.dll) compiled on Windows. My questions:
- does anyone have successfully compiled this wrapper library on Linux?
- are there any plans to integrate the generation of the SWIG wrappers in
the GDAL build process?
 
Best Regards,
 
Michael


From hobu at iastate.edu  Mon Oct 31 10:37:52 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] OGR SWIG wrapper for Linux
In-Reply-To: <F351B61A81F4F54F92740EA8B510C2B102A3D3BA@ESGDASMA5VX0014.i
	b.gedas.vwg>
References: <F351B61A81F4F54F92740EA8B510C2B102A3D3BA@ESGDASMA5VX0014.ib.gedas.vwg>
Message-ID: <6.2.3.4.2.20051031092749.02d81710@hobu.mail.iastate.edu>

Michael,

In theory the wrappers would work in Mono, but I have never attempted 
to build them with it.  The issue about typemaps for the C# bindings 
still stands.  Someone will have to step forward who is willing to do 
some SWIG and has some knowledge (or is willing to learn) about the 
PINVOKE mechanism.  With that regard, the C# bindings are a bit immature.

Is Mono a common installation on most Linux machines yet?  I don't 
see any reason why we couldn't add a configure option and a 
GNUMakefile to the swig/csharp directory if someone submitted patches 
and can get a build setup going.

On windows, the swig bindings build process is still manual for all 
languages except Python.  If someone knows how to do compiler version 
detection (vc6 vs. vc7.1 and above) and has some ideas on how to 
smoothly integrate things with the rest of GDAL's build setup, that'd be great.

Howard

At 09:22 AM 10/31/2005, Paul, Michael wrote:
>Hi list,
>
>thanks to the mail of Johan Hallgren (Read/Write Oracle Spatial) I have been
>able to compile successfuly the SWIG based C# wrappers for GDAL. Thanks to
>the VC makefiles I do also have the SWIG generated C++ lib
>(gdal_ogr_wrap.dll) compiled on Windows. My questions:
>- does anyone have successfully compiled this wrapper library on Linux?
>- are there any plans to integrate the generation of the SWIG wrappers in
>the GDAL build process?
>
>Best Regards,
>
>Michael
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Oct 31 10:44:49 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
In-Reply-To: <43663680.3050806@loskot.net>
References: <4366264B.9070405@loskot.net>
	<931f8ea90510310633p36aa0350u5c6bc625d1bf3a89@mail.gmail.com>
	<43663680.3050806@loskot.net>
Message-ID: <931f8ea90510310744s36748968vd9f7191223963550@mail.gmail.com>

On 10/31/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> Thanks Frank,
>
> But it seems I'm doing something wrong. I tried to convert file from
> dgnsamp.zip dateset downloaded from the dgnlib site
> (http://dgnlib.maptools.org/) and here is what I get:
>
> mloskot@dog:~/download/dgn$ ogr2ogr -f "ESRI Shapefile" samp4.shp samp4.dgn
>
> ERROR 1: Attempt to write non-linestring (POINT) geometry to ARC type
> shapefile.ERROR 1: Terminating translation prematurely after failed
> translation of layer elements
>
> Am I misusing ogr2ogr?

Mateusz,

Ah, your original email was not clear on the direction you wanted to
translate.  DGN files have all features in one layer, and that layer
will generally have a mixture of geometry types.  Shapefiles only
allow one geometry type per file (point, line or polygon).  You
will likely need to translate this to distinct files something like:

  ogr2ogr -nlt POINT -skipfailures -f "ESRI Shapefile" samp4_pnt.shp samp4.dgn
  ogr2ogr -nlt LINESTRING -skipfailures -f "ESRI Shapefile"
samp4_lne.shp samp4.dgn
  ogr2ogr -nlt POLYGON -skipfailures -f "ESRI Shapefile" samp4_pol.shp samp4.dgn

You will still get error messages about untranslated geometries, but between
the three files you should have everything.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dassau at gdf-hannover.de  Mon Oct 31 12:20:53 2005
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] direct read/write support from GRASS to spatial databases
Message-ID: <200510311820.53160.dassau@gdf-hannover.de>

Hi developers, 

has there already been a discussion wether it is possible or wanted to add 
direct read/write support from GRASS GIS to spatial databases (PostGIS, 
Oracle Spatial, ...) via GDAL/OGR? I think of a solution alerady implemented 
in QGIS for PostGIS.  

This would be a task for GDAL/OGR, right?

To me this seems to be a very useful functionality, since the usage of 
v.in/out.ogr or v.external is nice but does not really fit for everyday work.

  Otto

From michael.paul at tao.es  Mon Oct 31 11:25:20 2005
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] OGR SWIG wrapper for Linux
Message-ID: <F351B61A81F4F54F92740EA8B510C2B102A3D43F@ESGDASMA5VX0014.ib.gedas.vwg>

Hi Howard,

the C# files compile in Mono (1.1.9.2) without any problems. 
We have done a little test with the Shapelib on Linux/Mono and monoGIS and
finally we get it working without SWIG (see below). The Shapelib does not
need any additional C-based wrapper, but the SWIG wrappers of GDAL do need
this C-based wrapper. 
For the C# stuff one may catch directly the .Net assemblies generated on
Windows (called gdal_ogr_csharp.dll) and that will work in Mono. But one
still needs the native wrapper library, apart from the GDAL library, in
order to run this code in Linux (in Linux: gdal_ogr_wrap.so). It is possible
to compile the .cpp files generated by SWIG in Linux and the system is more
or less stable with this approach. But my question is if someone managed to
do the same thing and if he/she encountered some problems with this
approach.

GDAL in Linux is not a problem any more and most people are able to use the
pre-compiled binaries. The are no pre-compiled binaries yet for C# wrappers
in Linux. A configure option to automatically generate these wrappers on
build time would be fantastic, as time for being able to play around with
GDAL in Mono/Linux on different distribs will be greatly reduced. 

As far as I know SuSe Linux already ships with Mono pre-installed, at least
my own one shipped with it ;-) I think for the rest of the Linux distribs,
Mono installation also has become pretty easy.

I think you have already posted the typemap issues several times on this
list. I will check-out the latest SWIG version and we will see what we can
do on this topic.


Best Regards,
 
Michael

P.D.: bugfix to the Shapelib wrapper for .Net:
Change the following line:
public static extern string DBFReadStringAttribute (IntPtr hDBF, int iShape,
int iField);
To:
public static extern IntPtr DBFReadStringAttribute (IntPtr hDBF, int iShape,
int iField);

-----Mensaje original-----
De: Howard Butler [mailto:hobu@iastate.edu] 
Enviado el: lunes, 31 de octubre de 2005 16:38
Para: Paul, Michael; gdal-dev@lists.maptools.org
Asunto: Re: [Gdal-dev] OGR SWIG wrapper for Linux

Michael,

In theory the wrappers would work in Mono, but I have never attempted to
build them with it.  The issue about typemaps for the C# bindings still
stands.  Someone will have to step forward who is willing to do some SWIG
and has some knowledge (or is willing to learn) about the PINVOKE mechanism.
With that regard, the C# bindings are a bit immature.

Is Mono a common installation on most Linux machines yet?  I don't see any
reason why we couldn't add a configure option and a GNUMakefile to the
swig/csharp directory if someone submitted patches and can get a build setup
going.

On windows, the swig bindings build process is still manual for all
languages except Python.  If someone knows how to do compiler version
detection (vc6 vs. vc7.1 and above) and has some ideas on how to smoothly
integrate things with the rest of GDAL's build setup, that'd be great.

Howard

At 09:22 AM 10/31/2005, Paul, Michael wrote:
>Hi list,
>
>thanks to the mail of Johan Hallgren (Read/Write Oracle Spatial) I have 
>been able to compile successfuly the SWIG based C# wrappers for GDAL. 
>Thanks to the VC makefiles I do also have the SWIG generated C++ lib
>(gdal_ogr_wrap.dll) compiled on Windows. My questions:
>- does anyone have successfully compiled this wrapper library on Linux?
>- are there any plans to integrate the generation of the SWIG wrappers 
>in the GDAL build process?
>
>Best Regards,
>
>Michael
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Mon Oct 31 13:02:33 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] SHP <-> DGN
In-Reply-To: <008101c5de2d$d7c78940$6401a8c0@blanken>
References: <4366264B.9070405@loskot.net>
	<008101c5de2d$d7c78940$6401a8c0@blanken>
Message-ID: <43665C39.9060005@loskot.net>

Wim Blanken napisa?(a):
> Hi Mateusz,
> 
> 
> Add on for the remark Frank made...
> 
> Just to let you know OGR only works with version 7 and not with version 
> 8 DGN files as far as I know..........


Thanks for your hint.
Cheers

-- 
Mateusz ?oskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 31 13:04:11 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:50 2007
Subject: {Definitely Spam?} Re: [Gdal-dev] SHP <-> DGN
In-Reply-To: <931f8ea90510310744s36748968vd9f7191223963550@mail.gmail.com>
References: <4366264B.9070405@loskot.net>	
	<931f8ea90510310633p36aa0350u5c6bc625d1bf3a89@mail.gmail.com>	
	<43663680.3050806@loskot.net>
	<931f8ea90510310744s36748968vd9f7191223963550@mail.gmail.com>
Message-ID: <43665C9B.3000908@loskot.net>

Frank Warmerdam napisa?(a):
> On 10/31/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> 
>> [...]
 >>
>>Am I misusing ogr2ogr?
> 
> Mateusz,
> 
> Ah, your original email was not clear on the direction you wanted to
> translate. 

Forgive me, indeed I didn't express my problem clearly.
Thank you for your help

-- 
Mateusz ?oskot
http://mateusz.loskot.net

From rlcave3rd at yahoo.com  Mon Oct 31 15:15:29 2005
From: rlcave3rd at yahoo.com (Bob Cave)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] MapInfo Text Features in OGR
Message-ID: <20051031201529.27371.qmail@web54115.mail.yahoo.com>

Hello,

I am writing a program to load and display vector
files using OGR.  For my initial testing, I am using
MapInfo TAB files as input.  TAB files can include a
text feature element.  How are those represented in
OGR?  I've noticed that the OGRFeature object
associated with the text feature contains a point
geometry, which makes sense as the location, but where
is the text and other descriptive  information (font,
alignment, etc.)?  The style string pointer is null.

Cheers,

Bob


		
__________________________________ 
Yahoo! FareChase: Search multiple travel sites in one click.
http://farechase.yahoo.com

From warmerdam at pobox.com  Mon Oct 31 15:52:00 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] MapInfo Text Features in OGR
In-Reply-To: <20051031201529.27371.qmail@web54115.mail.yahoo.com>
References: <20051031201529.27371.qmail@web54115.mail.yahoo.com>
Message-ID: <931f8ea90510311252s5cd9fea8vad6cb90868d3052a@mail.gmail.com>

On 10/31/05, Bob Cave <rlcave3rd@yahoo.com> wrote:
> Hello,
>
> I am writing a program to load and display vector
> files using OGR.  For my initial testing, I am using
> MapInfo TAB files as input.  TAB files can include a
> text feature element.  How are those represented in
> OGR?  I've noticed that the OGRFeature object
> associated with the text feature contains a point
> geometry, which makes sense as the location, but where
> is the text and other descriptive  information (font,
> alignment, etc.)?  The style string pointer is null.

Bob,

I believe that the text features and related rendering
information (font, color, etc) are returned as the
"style string" for the feature.

I don't seem to have a text file handy, but if I run
ogrinfo on a mapinfo file with point symbols I see:

OGRFeature(SampleSpeedHeading):1
  lon (Real) = -80.7188
  lat (Real) = 23.3125
  knots (Real) = 0.152118
  Heading (String) = 122
  ID (Integer) = 1
  Style = SYMBOL(a:0,c:#ff00ff,s:6pt,id:"mapinfo-sym-34.ogr-sym-4")
  POINT (-80.718800000000002 23.3125)

The "Style" line is a special sort of attribute fetched with the
OGRFeature::GetStyleString() method:
  http://www.gdal.org/ogr/classOGRFeature.html#e6ad46c5574cdc328ad029958dc976a5

The style strings should conform to the OGR Feature Style Specification.
Read over the section on the LABEL tool in the most detail.

  http://www.gdal.org/ogr/ogr_feature_style.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From James.Browne at liu.edu  Mon Oct 31 17:38:51 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] gdal-translate problem with ECW sdk 3.3.1
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11239F@uc-exh-2.liunet.edu>

Hi all, 

I just downloaded the new ECW SDK and the CVS version of GDAL and I am now test them.

First, thanks to all who improved the SDK's configure script, it worked great. The gdal tools now work on ECW images without crashing (on a twin Xeon Linux).

One problem I discovered is using gdal-translate from ECW to other formats, at least when cutting sub-regions. So far I tried 2 different ECW files with GTiff, BMP, JPG and PNG.

The attached file shows the GTiff output superimposed over the original ECW.

ECW -> BMP and ECW -> GTiff: Produced the three color bands significantly off vertically. Red looks correct, green captures about one window height below the red, and the blue is cut from about 2 window heights below. GTiff produced normal progress output while BMP produced the following progress output.

gdal_translate -of BMP -projwin 1082400 161100 1086400 158100 /.../April1994_raw.ecw ~/GDAL/test94ecw1.bmp
Input file size is 102000, 46000
Computed -srcwin 31401 31901 4000 3000 from projected window.
0.ERROR 6: Dataset does not support the SetProjection() method.
ERROR 6: SetColorInterpretation() not supported for this dataset.
..10...20...30.ERROR 6: SetColorInterpretation() not supported for this dataset.
..40...50...60..ERROR 6: SetColorInterpretation() not supported for this dataset.
.70...80...90...100 - done.

ECW -> JPG produced occasional horizontal multi-colored streaks 1-4 pixels wide. Progress output normal.

ECW -> PNG failed to show progress output, although a file was produced. The files had more of the horizontal streaks than JPG.

gdal_translate -of PNG -projwin 1082400 161100 1086400 158100 /..../April1994_raw.ecw ~/GDAL/test94ecw1.png
Input file size is 102000, 46000
Computed -srcwin 31401 31901 4000 3000 from projected window.

     Thanks,
      Jim
  

 


From James.Browne at liu.edu  Mon Oct 31 18:12:35 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] Problem compiling Mapserver against GDAL with ECW sdk
	undefined references
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C1123A0@uc-exh-2.liunet.edu>

Hi all,

   Usually an undefined reference  is from a library path problem of version problems with header files. I think that I have double checked for them. GDAL command line utilities find the new ECW libraries and they seem to find each other. Trying gdal-config --libs returns the expected value.

   But when I compile Mapserver 4.6.1 against GDAL 1.3.1 that uses the latest source for ECW SDK 3.3 and even try adjusting mapserver's --prefix --libdir configure options, I still get the following errors (abbreviated series)


user: undefined reference to Inside
user: undefined reference to Case
user: undefined reference to Cut
user: undefined reference to Ensure
user: undefined reference to Accused::Set()'
user: undefined reference to Finished::Resume()'
user: undefined reference to Clothes
user: undefined reference to `CNCSThread::GetStats()'
...
etc.


   Does anyone have any ideas?

   Thanks  
          Jim  


From rayg at daylongraphics.com  Mon Oct 31 18:48:36 2005
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] types common to raster/vector
Message-ID: <4366AD54.8070307@daylongraphics.com>

I was wondering if the following OGR types:

   OGRSpatialReference
   OGR_SRSNode
   OGRCoordinateTransformation
   OGREnvelope
   OGRRawPoint

would be better placed in their own lib/namespace, since they are often 
used in raster routines when doing georeferencing (or put another way, 
there's nothing particularly vector-specific about coordinate 
transforms). The OGR area could then be more pertaining specifically to 
shapefile specifics, and it would let raster-only projects more easily 
declude OGR.

e.g., a C++ decl might be:

   namespace spatial
   {
     class coordsys             { ... };
     class coordsys_node        { ... };
     class coordinate_transform { ... };
     class envelope             { ... };
     class point                { ... };
   }

For backwards compatiblity there could be:

   typedef spatial::coordsys              OGRSpatialReference;
   typedef spatial::coordsys_node         OGR_SRSNode;
   typedef spatial::coordinate_transform  OGRCoordinateTransformation;
   typedef spatial::envelope              OGREnvelope;
   typedef spatial::point                 OGRRawPoint;


Ray

From warmerdam at pobox.com  Mon Oct 31 20:44:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:50 2007
Subject: [Gdal-dev] types common to raster/vector
In-Reply-To: <4366AD54.8070307@daylongraphics.com>
References: <4366AD54.8070307@daylongraphics.com>
Message-ID: <931f8ea90510311744y22dceeb3m774db662eea79d41@mail.gmail.com>

On 10/31/05, Ray Gardener <rayg@daylongraphics.com> wrote:
> I was wondering if the following OGR types:
>
>    OGRSpatialReference
>    OGR_SRSNode
>    OGRCoordinateTransformation
>    OGREnvelope
>    OGRRawPoint
>
> would be better placed in their own lib/namespace, since they are often
> used in raster routines when doing georeferencing (or put another way,
> there's nothing particularly vector-specific about coordinate
> transforms). The OGR area could then be more pertaining specifically to
> shapefile specifics, and it would let raster-only projects more easily
> declude OGR.
>
> e.g., a C++ decl might be:
>
>    namespace spatial
>    {
>      class coordsys             { ... };
>      class coordsys_node        { ... };
>      class coordinate_transform { ... };
>      class envelope             { ... };
>      class point                { ... };
>    }
>
> For backwards compatiblity there could be:
>
>    typedef spatial::coordsys              OGRSpatialReference;
>    typedef spatial::coordsys_node         OGR_SRSNode;
>    typedef spatial::coordinate_transform  OGRCoordinateTransformation;
>    typedef spatial::envelope              OGREnvelope;
>    typedef spatial::point                 OGRRawPoint;

Ray,

I would go a little further to say that OGRSpatialReference
(and associated stuff) ought to have been factored into it's own
low level library on which separate GDAL and OGR libraries
could depend.

However, I am not planning on any wholesale changes in
this regard now.

I don't think that a distinct namespace would really help
anyone very much though, unless I am missing something.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


