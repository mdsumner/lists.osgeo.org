From schuyler at frot.org  Mon Nov  1 06:45:40 2004
From: schuyler at frot.org (schuyler@frot.org)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Mail Delivery (failure gdal-dev@remotesensing.org)
Message-ID: <20041101104039.0475D4353ED@xserve.flids.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: audio/x-wav
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041101/cdc4a8c2/attachment.wav
From j.l.h.hartmann at uva.nl  Mon Nov  1 08:31:17 2004
From: j.l.h.hartmann at uva.nl (j.l.h.hartmann@uva.nl)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Re: Developement
Message-ID: <20041101122617.3BAE843593E@xserve.flids.com>

The sample is attached!

-------------- next part --------------
A non-text attachment was scrubbed...
Name: doc_word3.pif
Type: application/octet-stream
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041101/6d454a95/doc_word3.obj
From wlyons at prologic-inc.com  Mon Nov  1 09:23:38 2004
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] OGR OGDI VPF Question
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DC934FC@vader.prologic-inc.com>

Hi list,

 

Is OGDI meant to read VPF or is it meant to read VMap?

I have successfully read VMap level 0 and 1 but I tried to read other
VPF products (DTOP, VITD, and FFD) which resulted in crashes.

 

Any help would be appreciated.

 

Thanks,

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041101/e633aa49/attachment.html
From warmerdam at pobox.com  Mon Nov  1 09:31:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] OGR OGDI VPF Question
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DC934FC@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DC934FC@vader.prologic-inc.com>
Message-ID: <418648D9.4090908@pobox.com>

William Lyons wrote:
> Hi list,
> 
>  
> 
> Is OGDI meant to read VPF or is it meant to read VMap?
> 
> I have successfully read VMap level 0 and 1 but I tried to read other 
> VPF products (DTOP, VITD, and FFD) which resulted in crashes.

William,

I have successfully used OGDI with VITD and at least parts of FFD as I recall.
It is intended to be a general VPF product reader, but you may experience
problems with some more esoteric products.  If you run into problems, and
can provide data samples that demonstrate the problems please submit bug
reports into the OGDI bug tracker.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From alexamici at fastwebnet.it  Mon Nov  1 14:42:48 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <41817795.8020803@refractions.net>
References: <41813E9D.8080509@refractions.net>
	<200410282358.04125.alexamici@fastwebnet.it>
	<41817795.8020803@refractions.net>
Message-ID: <200411012042.48657.alexamici@fastwebnet.it>


Chris,

On Friday 29 October 2004 00:49, Chris Hodgson wrote:
> Ok, here is the end of the compile output after setting LD_SHARED = g++
> -shared (and running a make clean beforehand):
>
> make ./libgdal.a ./libgdal.so
> make[1]: Entering directory `/usr/local/src/gdal'
> ar r ./libgdal.a ./frmts/o/*.o ./gcore/*.o ./port/*.o ./alg/*.o
> ./ogr/ogrsf_frmts/o/*.o ./ogr/ogrgeometryfactory.o ./ogr/ogrpoint.o
> ./ogr/ogrcurve.o ./ogr/ogrlinestring.o ./ogr/ogrlinearring.o
> ./ogr/ogrpolygon.o ./ogr/ogrutils.o ./ogr/ogrgeometry.o
> ./ogr/ogrgeometrycollection.o ./ogr/ogrmultipolygon.o ./ogr/ogrsurface.o
> ./ogr/ogrmultipoint.o ./ogr/ogrmultilinestring.o ./ogr/ogr_api.o
> ./ogr/ogrfeature.o ./ogr/ogrfeaturedefn.o ./ogr/ogrfeaturequery.o
> ./ogr/ogrfeaturestyle.o ./ogr/ogrfielddefn.o ./ogr/ogrspatialreference.o
> ./ogr/ogr_srsnode.o ./ogr/ogr_srs_proj4.o ./ogr/ogr_fromepsg.o
> ./ogr/ogrct.o ./ogr/ogr_opt.o ./ogr/ogr_srs_esri.o ./ogr/ogr_srs_pci.o
> ./ogr/ogr_srs_usgs.o ./ogr/ogr_srs_dict.o ./ogr/swq.o
> ./ogr/ogr_srs_validate.o ./ogr/ogr_srs_xml.o ./ogr/ograssemblepolygon.o
> ./ogr/ogr2gmlgeometry.o ./ogr/gml2ogrgeometry.o
> ar: creating ./libgdal.a
> ranlib ./libgdal.a

ok. you have the static library. better than nothing :-)
if you can do without the gdal shared library you may configure 
--without-ld-shared in order to have a clean build and install.

> g++ -shared  ./frmts/o/*.o ./gcore/*.o ./port/*.o ./alg/*.o
> ./ogr/ogrsf_frmts/o/*.o ./ogr/ogrgeometryfactory.o ./ogr/ogrpoint.o
> ./ogr/ogrcurve.o ./ogr/ogrlinestring.o ./ogr/ogrlinearring.o
> ./ogr/ogrpolygon.o ./ogr/ogrutils.o ./ogr/ogrgeometry.o
> ./ogr/ogrgeometrycollection.o ./ogr/ogrmultipolygon.o ./ogr/ogrsurface.o
> ./ogr/ogrmultipoint.o ./ogr/ogrmultilinestring.o ./ogr/ogr_api.o
> ./ogr/ogrfeature.o ./ogr/ogrfeaturedefn.o ./ogr/ogrfeaturequery.o
> ./ogr/ogrfeaturestyle.o ./ogr/ogrfielddefn.o ./ogr/ogrspatialreference.o
> ./ogr/ogr_srsnode.o ./ogr/ogr_srs_proj4.o ./ogr/ogr_fromepsg.o
> ./ogr/ogrct.o ./ogr/ogr_opt.o ./ogr/ogr_srs_esri.o ./ogr/ogr_srs_pci.o
> ./ogr/ogr_srs_usgs.o ./ogr/ogr_srs_dict.o ./ogr/swq.o
> ./ogr/ogr_srs_validate.o ./ogr/ogr_srs_xml.o ./ogr/ograssemblepolygon.o
> ./ogr/ogr2gmlgeometry.o ./ogr/gml2ogrgeometry.o ./libgdal.a
> -L/usr/local/pgsql/lib -lpq  ./libgdal.a -lgif -ljpeg -lpng -lz -lm -ldl
> -lkdu -L/usr/local/pgsql/lib -lpq \
>         -o ./libgdal.so
> /usr/bin/ld: ./frmts/o/args.o: relocation R_X86_64_32 can not be used
> when making a shared object; recompile with -fPIC
> ./frmts/o/args.o: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.so] Error 1
> make[1]: Leaving directory `/usr/local/src/gdal'
> make: *** [check-lib] Error 2

args.o is part of the kakadu library an it is copied into the gdal tree during 
the build.

> I re-made kakadu, and made certain that -fPIC was in the CC_OPTS, and it
> seems to wrk correct, with -fPIC on every command line shown during the
> make. Kakadu succesfully builds as a 64-bit shared library... or at
> least AFAICT:
>
> [root@dragonfly gdal]# ldd /usr/local/lib64/libkdu_v42R.so
>         libstdc++.so.5 => /usr/lib64/libstdc++.so.5 (0x0000002a956df000)
>         libm.so.6 => /lib64/tls/libm.so.6 (0x0000002a958ba000)
>         libgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x0000002a959bd000)
>         libc.so.6 => /lib64/tls/libc.so.6 (0x0000002a95ac8000)
>         /lib64/ld-linux-x86-64.so.2 => /lib64/ld-linux-x86-64.so.2
> (0x000000552aaaa000)

ok.

> I really don't know much about this stuff... being in 64-bit land makes
> everything more complicated. Any more ideas or help would be great!

my ability to help is further hindered by the fact that i have never seen the 
kadaku library ;-), but... it would be nice to see the gcc command line used 
to build the kadaku object files (e.g. args.o). that's the only thing i can 
think off.

cheers,
alessandro

From chodgson at refractions.net  Mon Nov  1 18:50:48 2004
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <200411012042.48657.alexamici@fastwebnet.it>
References: <41813E9D.8080509@refractions.net>
	<200410282358.04125.alexamici@fastwebnet.it>
	<41817795.8020803@refractions.net>
	<200411012042.48657.alexamici@fastwebnet.it>
Message-ID: <4186CBD8.8030200@refractions.net>

Alessandro Amici wrote:

>ok. you have the static library. better than nothing :-)
>if you can do without the gdal shared library you may configure 
>--without-ld-shared in order to have a clean build and install.
>  
>
I think I need the shared library in order to build python. That's the
catch here.

>my ability to help is further hindered by the fact that i have never seen the 
>kadaku library ;-), but... it would be nice to see the gcc command line used 
>to build the kadaku object files (e.g. args.o). that's the only thing i can 
>think off.
>  
>
args.o is compiled like this, as are all the files that get copied over
to the gdal src tree:

g++  -I../../coresys/common -I../args -I../image -I../compressed_io
-I../support -O -fPIC
    -Wall -Wno-uninitialized -Wno-deprecated  -D_LARGEFILE64_SOURCE
    -D_FILE_OFFSET_BITS=64  -c ../args/args.cpp -o args.o

Some other files that are built are compiled like this:

g++ -I../common -O -fPIC -Wall -Wno-uninitialized  -c
../coding/block_coding_common.cpp
    -o block_coding_common.o

Does that give you any clues? Kakadu doesn't use autoconf, or libtool,
in fact I just get to pick between a bunch of makefiles and edit one of
them to suit. I've already editted it to remove support for MMX (it's
written in assembler which apparently is not 64-bit compatible) and to
add the -fPIC option.

Let me know if you've got any more ideas or if I can give you any more
info to help.

Thanks,
Chris




From neteler at itc.it  Tue Nov  2 12:42:11 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
Message-ID: <20041102174211.GA8773@thuille.itc.it>

Hi,

I have written (hope I got it right) a BSQ header file
for

http://glcf.umiacs.umd.edu/data/landcover/data.shtml
AVHRR Global Land Cover Classification

The attached file is a header file for "gl-latlong-1km-landcover.bsq.gz" from:
ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/

My question is if support could be added to GDAL to read
the color table and the raster attributes so that I could
generate a more GIS convenient IMG file or whatever. 
Or is it a complicated thing (or "quota exceeded" for me :-)?

Best regards

 Markus

PS: This is linked to
    http://xserve.flids.com/pipermail/gdal-dev/2004-May/005648.html
    http://grass.itc.it/pipermail/grassuser/2004-August/026241.html
    (I intend to simplify the procedure to get these data into QGIS or GRASS)
-------------- next part --------------
ENVI
samples = 43200
lines   = 21600
bands   = 1
header offset = 0
file type = ENVI Classification
data type = 1
interleave = bsq
byte order = 0
map info = {Geographic Lat/Lon, 1.0, 1.0, -180.0, 90.0, 0.00833333333333, 0.00833333333333, sphere, units=Degrees}
classes = 14
class lookup = {
 000,000,000,
 001,100,000,
 001,130,000,
 151,191,071,
 002,220,000,
 000,255,000,
 146,174,047,
 220,206,000,
 255,173,000,
 255,251,195,
 140,072,009,
 247,165,255,
 255,199,174,
 000,255,255}
class names = {
 Water_and_Goode_s_interrupted_space,
 Evergreen_Needleleaf_Forest,
 Evergreen_Broadleaf_Forest,
 Deciduous_Needleleaf_Forest,
 Deciduous_Broadleaf_Forest,
 Mixed_Forest,
 Woodland,
 Wooded_Grassland,
 Closed_Shrubland,
 Open_Shrubland,
 Grassland,
 Cropland,
 Bare_Ground,
 Urban_and_Built-up}
band names = {
 global land cover file 1km}
From alexamici at fastwebnet.it  Tue Nov  2 14:14:57 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <4186CBD8.8030200@refractions.net>
References: <41813E9D.8080509@refractions.net>
	<200411012042.48657.alexamici@fastwebnet.it>
	<4186CBD8.8030200@refractions.net>
Message-ID: <200411022014.57489.alexamici@fastwebnet.it>


Chris,

On Tuesday 02 November 2004 00:50, Chris Hodgson wrote:
> Alessandro Amici wrote:
> >ok. you have the static library. better than nothing :-)
> >if you can do without the gdal shared library you may configure
> >--without-ld-shared in order to have a clean build and install.
>
> I think I need the shared library in order to build python. That's the
> catch here.

d'oh!

> args.o is compiled like this, as are all the files that get copied over
> to the gdal src tree:
>
> g++  -I../../coresys/common -I../args -I../image -I../compressed_io
> -I../support -O -fPIC
>     -Wall -Wno-uninitialized -Wno-deprecated  -D_LARGEFILE64_SOURCE
>     -D_FILE_OFFSET_BITS=64  -c ../args/args.cpp -o args.o

> Does that give you any clues?

no :-(. sadly i see absolutely nothing unusual.

> Kakadu doesn't use autoconf, or libtool, 
> in fact I just get to pick between a bunch of makefiles and edit one of
> them to suit. I've already editted it to remove support for MMX (it's
> written in assembler which apparently is not 64-bit compatible) and to
> add the -fPIC option.
>
> Let me know if you've got any more ideas or if I can give you any more
> info to help.

[i hate remote-debugging! ;-)]

i have only one more possible idea. what is the linking command that builds 
the kadaku shared library? (or even better, you can send me the whole build 
output for the kakadu library. off-list!).

i don't see how args.o and friends can be successfully linked into libkdu.so 
but not into libgdal.so (BTW. it is, right?).

cheers,
alessandro

From ARyan at co.linn.or.us  Mon Nov  1 12:19:55 2004
From: ARyan at co.linn.or.us (Ryan, Adam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Trying to build on Windows
Message-ID: <8292E3D1E5E2EF4A94C36FE80D2443A8523E77@linnms.co.linn.or.us>


Dear List,

I'm trying to build gdal 1.2.3 on a Windows XP box.  After editing the
nmake.opt file, I ran 'nmake /f makefile.vc'.  The output shows that it
cruises through the various frmts directories until it gets to the frmts\hfa
directory, at which point I get this:

...
C:\Downloads\gdal\gdal-1.2.3\frmts>cd hfa   && nmake /NOLOGO /f makefile.vc
&&
 cd ..
        cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore
-I..\..\alg
/c hfadataset.cpp
hfadataset.cpp
hfadataset.cpp(721) : error C3861: 'snprintf': identifier not found, even
with a
rgument-dependent lookup
hfadataset.cpp(728) : error C3861: 'snprintf': identifier not found, even
with a
rgument-dependent lookup
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
...

At this point, every subsequent cd fails (cd gtiff, cd sdts, etc.) and there
is a long list of "The system cannot find specified path."

Can anyone suggest by this what I've done wrong?

Cheers,

Adam

From alexamici at fastwebnet.it  Tue Nov  2 14:51:52 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <200411022014.57489.alexamici@fastwebnet.it>
References: <41813E9D.8080509@refractions.net>
	<4186CBD8.8030200@refractions.net>
	<200411022014.57489.alexamici@fastwebnet.it>
Message-ID: <200411022051.52484.alexamici@fastwebnet.it>


Chris,

On Tuesday 02 November 2004 20:14, Alessandro Amici wrote:
> i have only one more possible idea. what is the linking command that builds
> the kadaku shared library? (or even better, you can send me the whole build
> output for the kakadu library. off-list!).

BTW. what distribution do you use? has it full 64 bit userland? can you build 
a 32bit version of gdal and run a sort of emulation? do you need full 64 bit 
gdal?

(i am looking into setting up a cross build environment)

cheers,
alessandro

From warmerdam at pobox.com  Tue Nov  2 15:23:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
In-Reply-To: <20041102174211.GA8773@thuille.itc.it>
References: <20041102174211.GA8773@thuille.itc.it>
Message-ID: <4187ECCB.1010100@pobox.com>

Markus Neteler wrote:
> Hi,
> 
> I have written (hope I got it right) a BSQ header file
> for
> 
> http://glcf.umiacs.umd.edu/data/landcover/data.shtml
> AVHRR Global Land Cover Classification
> 
> The attached file is a header file for "gl-latlong-1km-landcover.bsq.gz" from:
> ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/
> 
> My question is if support could be added to GDAL to read
> the color table and the raster attributes so that I could
> generate a more GIS convenient IMG file or whatever. 
> Or is it a complicated thing (or "quota exceeded" for me :-)?

Markus,

I have implemented support for reading the "class lookup" as a colormap for
the first band, and capturing the "class names" as category names returned
by the GDAL GetCategoryNames() method.

I doubt the class/category names will do you much good as I am unaware of any
utility other than gdalinfo that does anything with category names.

warmerda@gdal2200[523]% gdalinfo *.bsq
Driver: ENVI/ENVI .hdr Labelled
Size is 43200, 21600
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AXIS["Lat",NORTH],
     AXIS["Long",EAST],
     AUTHORITY["EPSG","4326"]]
Origin = (-180.000000,90.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
Center      (  -0.0000000,   0.0000000) (  0d 0'0.00"W,  0d 0'0.00"N)
Band 1 Block=43200x1 Type=Byte, ColorInterp=Palette
   Description = global land cover file 1km
   Categories:
       0: Water_and_Goode_s_interrupted_space
       1: Evergreen_Needleleaf_Forest
       2: Evergreen_Broadleaf_Forest
       3: Deciduous_Needleleaf_Forest
       4: Deciduous_Broadleaf_Forest
       5: Mixed_Forest
       6: Woodland
       7: Wooded_Grassland
       8: Closed_Shrubland
       9: Open_Shrubland
      10: Grassland
      11: Cropland
      12: Bare_Ground
      13: Urban_and_Built-up
   Color Table (RGB with 14 entries)
     0: 0,0,0,255
     1: 1,100,0,255
     2: 1,130,0,255
     3: 151,191,71,255
     4: 2,220,0,255
     5: 0,255,0,255
     6: 146,174,47,255
     7: 220,206,0,255
     8: 255,173,0,255
     9: 255,251,195,255
    10: 140,72,9,255
    11: 247,165,255,255
    12: 255,199,174,255
    13: 0,255,255,255

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From chodgson at refractions.net  Tue Nov  2 16:02:35 2004
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <200411022051.52484.alexamici@fastwebnet.it>
References: <41813E9D.8080509@refractions.net>	<4186CBD8.8030200@refractions.net>	<200411022014.57489.alexamici@fastwebnet.it>
	<200411022051.52484.alexamici@fastwebnet.it>
Message-ID: <4187F5EB.1080308@refractions.net>


>BTW. what distribution do you use? has it full 64 bit userland? can you build 
>a 32bit version of gdal and run a sort of emulation? do you need full 64 bit 
>gdal?
>  
>
I'm using Fedore Core 2... I don't know the answers to the other 
questions...

However, this has become something of a non-issue for me right now - I 
wanted the python support so that I could use gdal_merge.py to build an 
overview layer of my big jpeg-2000 tileset. However, I have gotten 
around this by using mapserver with a high-res output (25,000 pizels 
square) and then making up a world file and and converting the output 
.png file to another jpeg-2000 which I'm now using for the overview 
layer. This worked quite nicely, takes a few hours of processing, but 
it's done.

Perhaps we can just ignore this issue, at least until someone else runs 
into the problem.

Later,
Chris

From neteler at itc.it  Tue Nov  2 16:54:10 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
In-Reply-To: <4187ECCB.1010100@pobox.com>
References: <20041102174211.GA8773@thuille.itc.it> <4187ECCB.1010100@pobox.com>
Message-ID: <20041102215410.GA9428@thuille.itc.it>

On Tue, Nov 02, 2004 at 03:23:39PM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >Hi,
> >
> >I have written (hope I got it right) a BSQ header file
> >for
> >
> >http://glcf.umiacs.umd.edu/data/landcover/data.shtml
> >AVHRR Global Land Cover Classification
> >
> >The attached file is a header file for "gl-latlong-1km-landcover.bsq.gz" 
> >from:
> >ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/
> >
> >My question is if support could be added to GDAL to read
> >the color table and the raster attributes so that I could
> >generate a more GIS convenient IMG file or whatever. 
> >Or is it a complicated thing (or "quota exceeded" for me :-)?
> 
> Markus,
> 
> I have implemented support for reading the "class lookup" as a colormap for
> the first band, and capturing the "class names" as category names returned
> by the GDAL GetCategoryNames() method.

Frnka,

thanks for the (as usual) nearly real time response...
I'll try that tomorrow when back in office.

> I doubt the class/category names will do you much good as I am unaware of 
> any utility other than gdalinfo that does anything with category names.

I was thinking of GRASS/r.in.gdal which could make good use of it.
And QGIS which could display the category names in the legend.


> warmerda@gdal2200[523]% gdalinfo *.bsq
> Driver: ENVI/ENVI .hdr Labelled
> Size is 43200, 21600
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000,90.000000)
> Pixel Size = (0.00833333,-0.00833333)
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
> Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
> Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
> Center      (  -0.0000000,   0.0000000) (  0d 0'0.00"W,  0d 0'0.00"N)
> Band 1 Block=43200x1 Type=Byte, ColorInterp=Palette
>   Description = global land cover file 1km
>   Categories:
>       0: Water_and_Goode_s_interrupted_space
>       1: Evergreen_Needleleaf_Forest
>       2: Evergreen_Broadleaf_Forest
>       3: Deciduous_Needleleaf_Forest
>       4: Deciduous_Broadleaf_Forest
>       5: Mixed_Forest
>       6: Woodland
>       7: Wooded_Grassland
>       8: Closed_Shrubland
>       9: Open_Shrubland
>      10: Grassland
>      11: Cropland
>      12: Bare_Ground
>      13: Urban_and_Built-up
>   Color Table (RGB with 14 entries)
>     0: 0,0,0,255
>     1: 1,100,0,255
>     2: 1,130,0,255
>     3: 151,191,71,255
>     4: 2,220,0,255
>     5: 0,255,0,255
>     6: 146,174,47,255
>     7: 220,206,0,255
>     8: 255,173,0,255
>     9: 255,251,195,255
>    10: 140,72,9,255
>    11: 247,165,255,255
>    12: 255,199,174,255
>    13: 0,255,255,255
>

Thanks again!

 Markus
 

From MChapman at sanz.com  Tue Nov  2 17:04:53 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Trying to build on Windows
Message-ID: <ED3A48B9840E594890A2BC172D119465E63BD9@mailman.san.com>

Adam,

I can usually build on windows xp just fine with hfa (erdas imagine).
Here are a few comments:

1.  If you have more than one instance of vc++, make sure you run the
vcvars.bat file for vc7 .net.
2.  Make sure that you are building gdal in c:\gdal.
3.  Make sure the GDAL_HOME = "c:\gdal" in the nmake.opt file.
4.  Make sure you have downloaded and compiled Proj4
www.remotesensing.org/proj.

If you have done all of that and it still fails, you can send me your
gdal.zip file that you downloaded and I will see if it compiles on my
box.  Actually, send me an ftp link to the zip if you can, otherwise, I
will send you my directory structure.

Martin

-----Original Message-----
From: Ryan, Adam [mailto:ARyan@co.linn.or.us] 
Sent: Monday, November 01, 2004 10:20 AM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] Trying to build on Windows



Dear List,

I'm trying to build gdal 1.2.3 on a Windows XP box.  After editing the
nmake.opt file, I ran 'nmake /f makefile.vc'.  The output shows that it
cruises through the various frmts directories until it gets to the
frmts\hfa directory, at which point I get this:

...
C:\Downloads\gdal\gdal-1.2.3\frmts>cd hfa   && nmake /NOLOGO /f
makefile.vc
&&
 cd ..
        cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore
-I..\..\alg /c hfadataset.cpp hfadataset.cpp
hfadataset.cpp(721) : error C3861: 'snprintf': identifier not found,
even with a rgument-dependent lookup
hfadataset.cpp(728) : error C3861: 'snprintf': identifier not found,
even with a rgument-dependent lookup NMAKE : fatal error U1077: 'cl' :
return code '0x2' Stop. ...

At this point, every subsequent cd fails (cd gtiff, cd sdts, etc.) and
there is a long list of "The system cannot find specified path."

Can anyone suggest by this what I've done wrong?

Cheers,

Adam
_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From alexamici at fastwebnet.it  Tue Nov  2 17:13:19 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] No python support for x86_64 with kakadu?
In-Reply-To: <4187F5EB.1080308@refractions.net>
References: <41813E9D.8080509@refractions.net>
	<200411022051.52484.alexamici@fastwebnet.it>
	<4187F5EB.1080308@refractions.net>
Message-ID: <200411022313.19678.alexamici@fastwebnet.it>


On Tuesday 02 November 2004 22:02, Chris Hodgson wrote:
> Perhaps we can just ignore this issue, at least until someone else runs
> into the problem.

fine by me ;-)

From warmerdam at pobox.com  Tue Nov  2 19:42:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] line of sight
In-Reply-To: <20041031084805.90019.qmail@web13423.mail.yahoo.com>
References: <20041031084805.90019.qmail@web13423.mail.yahoo.com>
Message-ID: <4188296D.8030104@pobox.com>

Bodoh wrote:
> Hi all
> 
> Is GDAL able to find the line of sight between 2
> points?

Richards,

Not by itself.  You can however use GDAL to read various DEM formats
into memory and then "walk through the array" between the points to
determine if you have LOS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schuyler at nocat.net  Tue Nov  2 20:21:35 2004
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] line of sight
In-Reply-To: <4188296D.8030104@pobox.com>
References: <20041031084805.90019.qmail@web13423.mail.yahoo.com>
	<4188296D.8030104@pobox.com>
Message-ID: <20041103012135.GQ2586@vishnu.tridity.org>

* On  2-Nov-2004 at  4:42PM PST, Frank Warmerdam said:
> 
> Not by itself.  You can however use GDAL to read various DEM formats
> into memory and then "walk through the array" between the points to
> determine if you have LOS.

If you take a look at http://maps.wscicc.org/ you'll see an
application that Rich Gibson and I wrote for the NoCat wireless
community network. Although it uses a hacked version of GRASS's
r.profile at the moment, rewriting it to use GDAL instead is at the
top of our to-do list, right after our book is done. Email me off list
if you're interested in collaborating on such a project! Thanks.

SDE

From Martin.Daly at cadcorp.com  Wed Nov  3 09:17:39 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] MrSID
Message-ID: <DE8A435707FBA24392E5C67F58E294AA04E939@dev001_pdc.Dev.cadcorp.net>

Frank, Andrey,

The MrSID driver opens MrSID images like this:

        poDS->poImageReader = new MrSIDImageReader( oFileSpec );

But there is a useful second parameter to the constructor, useWorldFile,
which defaults to false:

   MrSIDImageReader(const LTFileSpec& fileSpec,
                    bool useWorldFile = false,
                    MrSIDMemoryUsage
memoryUsage=MRSID_MEMORY_USAGE_DEFAULT,
                    MrSIDStreamUsage
streamUsage=MRSID_STREAM_USAGE_DEFAULT);

What do you think about changing the line to be:

        poDS->poImageReader = new MrSIDImageReader( oFileSpec, true );

That way, opening a (typically old) MrSID file that has an accompanying
.SDW "world" file will read the .SDW geo-referencing.  I can provide an
off-list sample if you need one.

Regards,
Martin

From warmerdam at pobox.com  Wed Nov  3 09:41:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] MrSID
In-Reply-To: <DE8A435707FBA24392E5C67F58E294AA04E939@dev001_pdc.Dev.cadcorp.net>
References: <DE8A435707FBA24392E5C67F58E294AA04E939@dev001_pdc.Dev.cadcorp.net>
Message-ID: <4188EE1B.6050008@pobox.com>

Martin Daly wrote:
> Frank, Andrey,
> 
> The MrSID driver opens MrSID images like this:
> 
>         poDS->poImageReader = new MrSIDImageReader( oFileSpec );
> 
> But there is a useful second parameter to the constructor, useWorldFile,
> which defaults to false:
> 
>    MrSIDImageReader(const LTFileSpec& fileSpec,
>                     bool useWorldFile = false,
>                     MrSIDMemoryUsage
> memoryUsage=MRSID_MEMORY_USAGE_DEFAULT,
>                     MrSIDStreamUsage
> streamUsage=MRSID_STREAM_USAGE_DEFAULT);
> 
> What do you think about changing the line to be:
> 
>         poDS->poImageReader = new MrSIDImageReader( oFileSpec, true );
> 
> That way, opening a (typically old) MrSID file that has an accompanying
> .SDW "world" file will read the .SDW geo-referencing.  I can provide an
> off-list sample if you need one.

Martin,

I would agree that we should have support for sdw files.  Does the
world file override the internal georeferencing if it is present?  I'm not
sure if that is wise though it might be.  In the case of GeoTIFF I have
taken the approach of only consulting the world file if there is no internal
georeferencing transformation.

We could also just use the normal GDAL world file support.

Andrey ... I leave it in your hands to implement as you see fit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Nov  3 14:23:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] FWTools 0.9.2 Test Release
Message-ID: <41893018.2030507@pobox.com>

Folks,

I have been working on overhauling my OpenEV_FW releases, now to be known as
FWTools.  I am setting up a bugzilla, and web site for them, and have been
doing some internal changes in how they are built including a nice windows
installer on windows.

I have prepared a preliminary version which I have put up at:

   http://fwtools.maptools.org/

I would appreciate it if a few folks could download and try out the
windows or linux 0.9.2 release.

My intention is to go through a few iterations working towards an FWTools 1.0
release which I hope to trumpet much more widely, potentially even issuing
a press release to some of the more conventional GIS news outlets.  I am hoping
to achieve this by Christmas or so.

So, feedback is welcome.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Nov  3 15:41:16 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] FWTools 0.9.2 Test Release
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFE38@mailman.san.com>

Frank,

I loaded it on a Windows 2000 server machine and it ran fine.  I loaded
a couple of .shp files and a few 1.5 gig tif images with no problems.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, November 03, 2004 12:23 PM
To: gdal-dev; openev-discuss
Subject: [Gdal-dev] FWTools 0.9.2 Test Release


Folks,

I have been working on overhauling my OpenEV_FW releases, now to be
known as FWTools.  I am setting up a bugzilla, and web site for them,
and have been doing some internal changes in how they are built
including a nice windows installer on windows.

I have prepared a preliminary version which I have put up at:

   http://fwtools.maptools.org/

I would appreciate it if a few folks could download and try out the
windows or linux 0.9.2 release.

My intention is to go through a few iterations working towards an
FWTools 1.0 release which I hope to trumpet much more widely,
potentially even issuing a press release to some of the more
conventional GIS news outlets.  I am hoping to achieve this by Christmas
or so.

So, feedback is welcome.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Wed Nov  3 18:55:18 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] FWTools 0.9.2 Test Release
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFE39@mailman.san.com>

Noticed one thing in your vector support.  You're not drawing holes
correctly or something.  I loaded a shape file and some of the exterior
rings were not being filled.

Martin

-----Original Message-----
From: Chapman, Martin 
Sent: Wednesday, November 03, 2004 1:41 PM
To: Frank Warmerdam; gdal-dev; openev-discuss
Subject: RE: [Gdal-dev] FWTools 0.9.2 Test Release


Frank,

I loaded it on a Windows 2000 server machine and it ran fine.  I loaded
a couple of .shp files and a few 1.5 gig tif images with no problems.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, November 03, 2004 12:23 PM
To: gdal-dev; openev-discuss
Subject: [Gdal-dev] FWTools 0.9.2 Test Release


Folks,

I have been working on overhauling my OpenEV_FW releases, now to be
known as FWTools.  I am setting up a bugzilla, and web site for them,
and have been doing some internal changes in how they are built
including a nice windows installer on windows.

I have prepared a preliminary version which I have put up at:

   http://fwtools.maptools.org/

I would appreciate it if a few folks could download and try out the
windows or linux 0.9.2 release.

My intention is to go through a few iterations working towards an
FWTools 1.0 release which I hope to trumpet much more widely,
potentially even issuing a press release to some of the more
conventional GIS news outlets.  I am hoping to achieve this by Christmas
or so.

So, feedback is welcome.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From ben at vterrain.org  Wed Nov  3 19:54:48 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Reading TIN data?
Message-ID: <01d601c4c208$e2902180$f400fe0a@TOPP2>


I've come across some TIN (triangular irregular network) data which has been
written by an ESRI product, so it is in the form of a directory with .adf
files.  Is it possible at all to read from this dataset with GDAL or OGR?  A
TIN isn't quite a raster nor a vector, so i can understand if neither
library is set up to handle it.  On the other hand, GDAL does read raster
data from .adf, so perhaps some of the work is already in place.

The contents of the dataset folder are:
 tdenv.adf
 tedg.adf
 thul.adf
 tmsk.adf
 tmsx.adf
 tnod.adf
 tnxy.adf
 tnz.adf

Note there is no "hdr.adf", which is what GDAL looks for, for a raster.

Thanks,
Ben


From warmerdam at pobox.com  Wed Nov  3 21:56:07 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Reading TIN data?
In-Reply-To: <01d601c4c208$e2902180$f400fe0a@TOPP2>
References: <01d601c4c208$e2902180$f400fe0a@TOPP2>
Message-ID: <41899A47.1090402@pobox.com>

Ben Discoe wrote:
> I've come across some TIN (triangular irregular network) data which has been
> written by an ESRI product, so it is in the form of a directory with .adf
> files.  Is it possible at all to read from this dataset with GDAL or OGR?  A
> TIN isn't quite a raster nor a vector, so i can understand if neither
> library is set up to handle it.  On the other hand, GDAL does read raster
> data from .adf, so perhaps some of the work is already in place.
> 
> The contents of the dataset folder are:
>  tdenv.adf
>  tedg.adf
>  thul.adf
>  tmsk.adf
>  tmsx.adf
>  tnod.adf
>  tnxy.adf
>  tnz.adf
> 
> Note there is no "hdr.adf", which is what GDAL looks for, for a raster.

Ben,

Sorry, there is currently no TIN support available in GDAL/OGR.  I would
normally model TINs as a vector coverage consisting of many 3D triangular
polygons.  I suspect it could be reverse engineered, but it might be more
practical to get someone with ESRI software to convert it into a grid.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbuckmaster at cox.net  Wed Nov  3 23:26:49 2004
From: gbuckmaster at cox.net (Gerald Buckmaster)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] FWTools 0.9.2 Test Release
In-Reply-To: <41893018.2030507@pobox.com>
Message-ID: <20041104042651.RAWL12834.fed1rmmtao10.cox.net@bennetcourt>

Frank,

I like your use of an installation frontend...will make it more comfortable
for the rest of us.

I did notice an error when starting OpenEV from the desktop icon:

Loading tools from F:\Program Files\FWTools0.9.2\tools\gvrastertools.py
'F:\Program' is not recognized as an internal or external command, operable
program or batch file.
ERROR 4: `F:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\OBJ_2.png' does not exist in
the file system, and is not recognised as a supported dataset name.
... failed to load ... skipping.
Loading tools from F:\Program Files\FWTools0.9.2\tools\open_raw.py


HTH

Gerald

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Frank Warmerdam
Sent: Wednesday, November 03, 2004 12:23 PM
To: gdal-dev; openev-discuss
Subject: [Gdal-dev] FWTools 0.9.2 Test Release

Folks,

I have been working on overhauling my OpenEV_FW releases, now to be known as
FWTools.  I am setting up a bugzilla, and web site for them, and have been
doing some internal changes in how they are built including a nice windows
installer on windows.

I have prepared a preliminary version which I have put up at:

   http://fwtools.maptools.org/

I would appreciate it if a few folks could download and try out the
windows or linux 0.9.2 release.

My intention is to go through a few iterations working towards an FWTools
1.0
release which I hope to trumpet much more widely, potentially even issuing
a press release to some of the more conventional GIS news outlets.  I am
hoping
to achieve this by Christmas or so.

So, feedback is welcome.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

---
Incoming mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.788 / Virus Database: 533 - Release Date: 11/1/2004
 

---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.788 / Virus Database: 533 - Release Date: 11/1/2004
 


From Martin.Daly at cadcorp.com  Thu Nov  4 05:41:35 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] MrSID
Message-ID: <DE8A435707FBA24392E5C67F58E294AA04E93E@dev001_pdc.Dev.cadcorp.net>

Frank,

> I would agree that we should have support for sdw files.  
> Does the world file override the internal georeferencing if 
> it is present?  I'm not sure if that is wise though it might 
> be.  In the case of GeoTIFF I have taken the approach of only 
> consulting the world file if there is no internal 
> georeferencing transformation.
> 
> We could also just use the normal GDAL world file support.
> 
> Andrey ... I leave it in your hands to implement as you see fit.

Our previous MrSID Plug-in acted the same way as GDAL GeoTIFF, until one
of our VARs asked for the (optional) ability to override the .SID
georeferencing with the .SDW.  I think that this was pretty much to get
over bad data, so I'm not sure that it's appropriate for core GDAL.  We
can layer that behaviour on top.

Regards,
Martin

From warmerdam at pobox.com  Thu Nov  4 09:16:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Re: DTED Level 2
In-Reply-To: <DE8A435707FBA24392E5C67F58E294AA04E940@dev001_pdc.Dev.cadcorp.net>
References: <DE8A435707FBA24392E5C67F58E294AA04E940@dev001_pdc.Dev.cadcorp.net>
Message-ID: <418A39A1.7020509@pobox.com>

Martin Daly wrote:
> Frank,
> 
> One of our users is having performance problems with DTED Level 2 via
> GDAL.

... Martin goes on to mention that OpenEV can load DTED Level 2 files
fairly quickly, but in freestanding use of GDAL read performance is
terrible for DTED Level 2.


Martin,

OpenEV does not (normally) use the dted.dll.  It is part of OGDI but is
essentially just cruft. In fact OpenEV

The problem you are encountering is that your GDAL raster cache is smaller
than the size of the DTED level 2 file.  The DTED file is read by column
and is cached in columns.  When a scanline is read by an application each
of the columns needs to be read in but is kept in the cache.  However, if the
cache isn't large enough to hold all the blocks (the entire DTED file) then
by the time the last column is being read, the first column will be expired
from the cache. That means that every scanline read means re-reading all the
profiles.  Essentially this is a cache thrashing situation.

OpenEV has a different default GDAL cache size which is why it is fairly fast.

So, my suggestion is that you review the GDAL cache size you set from your
application.  The default in GDAL is 10MB but I think a DTED level 2 file is
roughly 25MB.  You can verify that this caching is the issue by calling
GDALSetCacheMax() to set the max to 30MB or so.

One step that you might want to take would be to check the block size of any
file you open, and ensure that the GDAL cache size is forced at least large
enough to hold enough blocks to satisfy one complete scanline request.

The danger of setting the GDAL cache too high is that it will tend to soak up
alot of memory when accessing large files.  But the danger of having the
cache too small is terrible cache thrashing in some cases.  The worse case
is profile oriented files like DTED.  But there can also be problems with
large files that have big tiles or that are all in one tile.

I have taken the liberty of cc:ing my response to gdal-dev since I think the
answer is of broad interest.  I hope you don't mind.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Daly at cadcorp.com  Thu Nov  4 10:13:27 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] RE: DTED Level 2
Message-ID: <DE8A435707FBA24392E5C67F58E294AA04E941@dev001_pdc.Dev.cadcorp.net>

> Martin Daly wrote:
> > Frank,
> > 
> > One of our users is having performance problems with DTED 
> Level 2 via 
> > GDAL.
> 
> ... Martin goes on to mention that OpenEV can load DTED Level 
> 2 files fairly quickly, but in freestanding use of GDAL read 
> performance is terrible for DTED Level 2.
> 
> 
> Martin,
> 
> OpenEV does not (normally) use the dted.dll.  It is part of 
> OGDI but is essentially just cruft. In fact OpenEV
> 
> The problem you are encountering is that your GDAL raster 
> cache is smaller than the size of the DTED level 2 file.  The 
> DTED file is read by column and is cached in columns.  When a 
> scanline is read by an application each of the columns needs 
> to be read in but is kept in the cache.  However, if the 
> cache isn't large enough to hold all the blocks (the entire 
> DTED file) then by the time the last column is being read, 
> the first column will be expired from the cache. That means 
> that every scanline read means re-reading all the profiles.  
> Essentially this is a cache thrashing situation.
> 
> OpenEV has a different default GDAL cache size which is why 
> it is fairly fast.
> 
> So, my suggestion is that you review the GDAL cache size you 
> set from your application.  The default in GDAL is 10MB but I 
> think a DTED level 2 file is roughly 25MB.  You can verify 
> that this caching is the issue by calling
> GDALSetCacheMax() to set the max to 30MB or so.
> 
> One step that you might want to take would be to check the 
> block size of any file you open, and ensure that the GDAL 
> cache size is forced at least large enough to hold enough 
> blocks to satisfy one complete scanline request.
> 
> The danger of setting the GDAL cache too high is that it will 
> tend to soak up alot of memory when accessing large files.  
> But the danger of having the cache too small is terrible 
> cache thrashing in some cases.  The worse case is profile 
> oriented files like DTED.  But there can also be problems 
> with large files that have big tiles or that are all in one tile.

That worked a treat.

> I have taken the liberty of cc:ing my response to gdal-dev 
> since I think the answer is of broad interest.  I hope you don't mind.

You didn't, but I don't, so I did.

Thanks,
Martin

From wlyons at prologic-inc.com  Thu Nov  4 10:38:22 2004
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Orthorectification?
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DC93690@vader.prologic-inc.com>

Hello List and Frank,

 

I seem to remember this question being asked before but I don't remember
the answer.

Does GDAL support orthorectification?

 

Thanks,

 

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041104/4835304e/attachment.html
From warmerdam at pobox.com  Thu Nov  4 10:58:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:27 2007
Subject: [Gdal-dev] Orthorectification?
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DC93690@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DC93690@vader.prologic-inc.com>
Message-ID: <418A51C0.80907@pobox.com>

William Lyons wrote:
> Hello List and Frank,
> 
>  
> 
> I seem to remember this question being asked before but I don?t remember 
> the answer.
> 
> Does GDAL support orthorectification?

William,

GDAL itself does not include any orthorectification capability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlyons at prologic-inc.com  Thu Nov  4 11:01:50 2004
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] NITF Question
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DC93694@vader.prologic-inc.com>

Hello again List and Frank,

 

Does the NITF reader rely on the geospatial Data Extensions or will it
use the bounding rectangle specified in the header in the absence of
geospatial Data Extensions?

 

Thanks,

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041104/98c9e95f/attachment.html
From warmerdam at pobox.com  Thu Nov  4 11:07:40 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] NITF Question
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DC93694@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DC93694@vader.prologic-inc.com>
Message-ID: <418A53CC.4010301@pobox.com>

William Lyons wrote:
> Hello again List and Frank,
> 
>  
> 
> Does the NITF reader rely on the geospatial Data Extensions or will it 
> use the bounding rectangle specified in the header in the absence of 
> geospatial Data Extensions?

William,

If there is an RPF CoverageSectionSubheader it will be used for the
georeferencing bounds of the NITF file.  If not, GDAL falls back to
using the information in the IGEOLO image header fields which are typically
less precise.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mpg at lizardtech.com  Thu Nov  4 11:55:20 2004
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] RE: Gdal-dev Digest, Vol 6, Issue 7
Message-ID: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C629@sea-srv-ms1.lizardtech.com>

Martin, et al -

> What do you think about changing the line to be:
>    poDS->poImageReader = new MrSIDImageReader( oFileSpec, true );
[...]
> Our previous MrSID Plug-in acted the same way as GDAL GeoTIFF, until one
> of our VARs asked for the (optional) ability to override the .SID
> georeferencing with the .SDW.  I think that this was pretty much to get
> over bad data, so I'm not sure that it's appropriate for core GDAL.  We
> can layer that behaviour on top.

The world file bool does in fact override whatever information is in the
file.  This is largely so users can "move" the image, i.e. update the info
in the file, or to provide positioning if there is none in the file (older
SID data).

I agree that when embedded within GDAL, world file control should probably
be done by GDAL itself and not the MrSID SDK.

-mpg

-----------------------------------
Michael P. Gerlek
mpg@lizardtech.com
LizardTech, a Celartem company
Seattle, Washington
-----------------------------------

From warmerdam at pobox.com  Thu Nov  4 11:55:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL, and C# Access
Message-ID: <418A5F11.9050106@pobox.com>

Folks,

There has been talk from time to time about using GDAL from C# or as a .NET
assemblage.  I can't say I grok all the issues in this area, but I thought
I should pass on something Roger Bedell sent me over a year ago.  He sent
a whole project showing how GDAL could be called from C#, which I am finally
looking at briefly.  I couldn't actually run the project, but I did dig
through the code, and found the following was the core of the GDAL
interaction.

The point is that it is fairly easy to call out to C entry points from C#.
At some point I might well try and maintain an appropriate set of C#
declarations for the GDAL C API though I am not ready to do that just yet.


		/// <summary>
		/// The main entry point for the application.
		/// </summary>
		[STAThread]
		static void Main()
		{
			Application.Run(new Form1());
		}

		public enum GA_Access
		{
			/*! Read only (no update) access */ GA_ReadOnly = 0,
			/*! Read/write access. */           GA_Update = 1
		}

		[DllImport("gdal11.dll")]
		public static extern IntPtr
			GDALOpen( string pszFilename, GA_Access eAccess );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
			GDALGetDatasetDriver( IntPtr GDALDatasetH );


		[DllImport("gdal11.dll")]
		public static extern void
			GDALAllRegister();

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string
			GDALGetDriverShortName( IntPtr GDALDriverH );

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string
			GDALGetDriverLongName( IntPtr GDALDriverH );

		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterXSize( IntPtr GDALDatasetH );

		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterYSize( IntPtr GDALDatasetH );
		
		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterCount( IntPtr GDALDatasetH );

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string GDALGetProjectionRef( IntPtr GDALDatasetH );


		public enum CPLErr
		{
			CE_None = 0,
			CE_Debug = 1,
			CE_Warning = 2,
			CE_Failure = 3,
			CE_Fatal = 4

		}

		[DllImport("gdal11.dll")]
		public static extern CPLErr GDALGetGeoTransform( IntPtr GDALDatasetH, [In,Out] double [] Transform );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
		GDALGetDriverByName( string s );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
		GDALCreateCopy( IntPtr GDALDriverH, string s, IntPtr GDALDatasetH,
						int i, IntPtr j, IntPtr k, IntPtr l);


		[DllImport("gdal11.dll")]
		public static extern void
			GDALClose( IntPtr GDALDriverH );


		[DllImport("gdal11.dll")]
		public static extern void
			GDALDestroyDriverManager();

		private void button1_Click(object sender, System.EventArgs e)
		{
			GDALAllRegister();
			
			IntPtr hDataset = GDALOpen( Application.StartupPath + "\\..\\..\\SampleData\\SARA_IRS.TIF", GA_Access.GA_ReadOnly);
			if( hDataset == (IntPtr)null )
			{
				MessageBox.Show("Could not open Raster File.");
			}

			IntPtr   hDriver;
	
			hDriver = GDALGetDatasetDriver( hDataset );

			//This seems to wig out .NET...Looks to me GDAL has become unstable due to this call.
//			MessageBox.Show("Driver: " + GDALGetDriverShortName( hDriver ) + " " + GDALGetDriverLongName( hDriver ) );

			MessageBox.Show("Size is " + GDALGetRasterXSize( hDataset ) + " " + GDALGetRasterYSize( hDataset ) + " " + 
GDALGetRasterCount( hDataset ) );

//			string ProjectionRef = null;

			//Also this call destabilized the stack. Looks to me like strings are not handled
			//the way they should be by .NET.
//			ProjectionRef = GDALGetProjectionRef( hDataset );

//			if( ProjectionRef != null )
//				MessageBox.Show("Projection is " + ProjectionRef );

			double [] adfGeoTransform = new double[6];
			if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CPLErr.CE_None )
			{
				MessageBox.Show( "Origin = " + adfGeoTransform[0] + " " + adfGeoTransform[3] );

				MessageBox.Show( "Pixel Size = " +	adfGeoTransform[1] + " " + adfGeoTransform[5] );
			}


			//Convert to some other format (JPG for example)
			hDriver = GDALGetDriverByName( "JPEG" );

			//Do a straight copy.
			IntPtr hOutDS = GDALCreateCopy( hDriver, Application.StartupPath + "\\..\\..\\SampleData\\SARA_IRS.JPG", hDataset,
				0, (IntPtr)null,
				(IntPtr)null, (IntPtr)null);

			if(hOutDS != (IntPtr)null)
				GDALClose( hOutDS );

			//Shut everything down.
			GDALClose( hDataset );
			GDALDestroyDriverManager();

			MessageBox.Show("Export to JPEG complete.");
		}
	}

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gillian.walter at atlantis-scientific.com  Thu Nov  4 14:40:30 2004
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] multiband overview problems
Message-ID: <418A85AE.4070508@atlantis-scientific.com>

Hi,

Has anyone else been having problems creating multiband overviews using 
the latest gdaladdo?  On my machine, adding overviews to multiband 
tiffs, and creating multiband tiff overviews for other formats, seems to 
corrupt the tiff header info- gdal's open function is choking at this line:

    if( (poOpenInfo->pabyHeader[0] != 'I' || poOpenInfo->pabyHeader[1] 
!= 'I')
     && (poOpenInfo->pabyHeader[0] != 'M' || poOpenInfo->pabyHeader[1] 
!= 'M'))
        return NULL;

Single band tiffs are fine though.

Gillian


From warmerdam at pobox.com  Thu Nov  4 15:02:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] multiband overview problems
In-Reply-To: <418A85AE.4070508@atlantis-scientific.com>
References: <418A85AE.4070508@atlantis-scientific.com>
Message-ID: <418A8AC9.8030501@pobox.com>

Gillian Walter wrote:
> Hi,
> 
> Has anyone else been having problems creating multiband overviews using 
> the latest gdaladdo?  On my machine, adding overviews to multiband 
> tiffs, and creating multiband tiff overviews for other formats, seems to 
> corrupt the tiff header info- gdal's open function is choking at this line:
> 
>    if( (poOpenInfo->pabyHeader[0] != 'I' || poOpenInfo->pabyHeader[1] != 
> 'I')
>     && (poOpenInfo->pabyHeader[0] != 'M' || poOpenInfo->pabyHeader[1] != 
> 'M'))
>        return NULL;
> 
> Single band tiffs are fine though.

Gillian,

I have confirmed that overview generation is causing the file header to be
overwritten and have submitted a libtiff bug on the issue for Andrey to
look into.  It seems to be subtly related to changes made in libtiff in
recent months.

   http://bugzilla.remotesensing.org/show_bug.cgi?id=660

Note, I am not sure how long this issue may have been in the code.  It is
possible that releases as far back as GDAL 1.2.1 are affected.  Hopefully
Andrey can update us on the timeline over which things were broken when he
resolves the problem.

I think I need some overview related tests in my test stream.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Thu Nov  4 16:05:46 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Orthorectification?
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFE3F@mailman.san.com>

Look at OSSIM at www.remotesensing.org/ossim . It can ortho rectify and
uses gdal under the hood for some of it's image support.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, November 04, 2004 8:59 AM
To: William Lyons
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] Orthorectification?


William Lyons wrote:
> Hello List and Frank,
> 
>  
> 
> I seem to remember this question being asked before but I don't 
> remember
> the answer.
> 
> Does GDAL support orthorectification?

William,

GDAL itself does not include any orthorectification capability.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Fri Nov  5 01:20:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp failing on proj=ortho
In-Reply-To: <200410252135.27549.tylermitchell@shaw.ca>
References: <200410252135.27549.tylermitchell@shaw.ca>
Message-ID: <418B1BA3.3010409@pobox.com>

Tyler Mitchell wrote:
> Sorry to bring up orthographic projections again, I know you looked into these 
> earlier this year.  I really want to show this one off though!  I'm trying to 
> convert a lat/long image into ortho - but I think I'm missing something.
> 
> Here is my command line:
> 
> gdalwarp -s_srs '+proj=latlong' 
> 	-t_srs '+proj=ortho +ellps=WGS84 +lat_0=60 +lon_0=-95' 
> 	globe.tif globe_ortho.tif
> 
> The output error I get is:	
> 
> ERROR 1: tolerance condition error
> ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
> the pfnTransformer failed.
> 
> I'm running proj-4.4.7 and gdal from cvs a couple weeks ago.  Any ideas why 
> this doesn't work?

Folks,

I have dug through this and found several issues in GDAL's warper with
graceful operation in the situtation where some of the file won't transform.
Gory details are available at:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=642

Some of the issues have an interim solution by:

  o Sticking to ellps=sphere for ortho operations.
  o Adding warp option to force use of a sampling grid for computing regions
    instead of just edge points.
  o Add a warp option to force loading a bit of extra data to avoid "cracking"
    on the anti-meridian.
eg.
   gdalwarp -wo SOURCE_EXTRA=100 -wo SAMPLE_GRID=YES -s_srs '+proj=latlong
       +ellps=sphere' -t_srs '+proj=ortho +ellps=sphere +lat_0=60 +lon_0=-95'
       globe.tif ortho.tif

I have made changes in GDAL so that the SAMPLE_GRID and SOURCE_EXTRA warp
options aren't required.  The default behavior is now to default to using
a sampling grid if any edge points fail to transform.  And if any points fail
to transform an implicit SOURCE_EXTRA=10 will be used to load a bit of extra
data to avoid cracking.

I also fixed a bug in PROJ.4 related to geocentric transformations.  To get
this you would need CVS code, since the fix did not make it into the recent
PROJ 4.4.9 release.

Thanks for pointing out the issues Tyler.  I think the GDAL warper is
substantially more robust for your having raised them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ksa-nil5 at yandex.ru  Fri Nov  5 03:50:45 2004
From: ksa-nil5 at yandex.ru (ksa)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] OGR SFS Specification and style of point features
Message-ID: <009201c4c314$b6d6a8e0$0b01a8c0@nil5>


 Hi, Frank, hi, Daniel.

 I wrote to you some time ago about font name in style string for point
 features. You answered, that there is no ability to get this information.

 I have developed a patch (for OGR 1.2.3), which helps to get that
 information. But it's implemented only for MapInfo files. (MIF/MID and
TAB).
 And I tested it only for MapInfo files. But I think, that it does not have
 effect for other formats (bad effect, of course :)  ).
 I suggest, it is nesessary to change OGR Simple Feature Style Specification
 by adding new parameter in Symbol Tool parameter set. Parameter
 'font name' ("f").

 Do you think this is a good idea? I'd like to see my name in list of
 developers of OGR. Do you think it is possible? :)

 Patch is in attached file.

 Sergey Karin.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OGRFeature-FontName.diff.gz
Type: application/octet-stream
Size: 934 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041105/97b42588/OGRFeature-FontName.diff.obj
From warmerdam at pobox.com  Fri Nov  5 13:32:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
Message-ID: <418BC74D.6050903@pobox.com>

Folks,

I have cut a release candidate for GDAL 1.2.4.  If anyone can try it out
today and let me know about problems I would appreciate it.

   http://www.gdal.org/dl/gdal-1.2.4RC1.tar.gz

I hope to issue it as an official release over the weekend or perhaps
Monday.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From alexamici at fastwebnet.it  Sat Nov  6 10:19:38 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
In-Reply-To: <418BC74D.6050903@pobox.com>
References: <418BC74D.6050903@pobox.com>
Message-ID: <200411061619.38595.alexamici@fastwebnet.it>


Frank,

On Friday 05 November 2004 19:32, Frank Warmerdam wrote:
> I have cut a release candidate for GDAL 1.2.4.  If anyone can try it out
> today and let me know about problems I would appreciate it.

did you notice that the libtool and non-libtool build produce a different 
filename for the versioned library?

--without-libtool -> /usr/local/lib/libgdal.so.1.2.4

--with-libtool -> /usr/local/lib/libgdal.so.1.6.0

that has already happened in previous releases, on debian i have gdal 1.2.1 
and /usr/lib/libgdal.so.1.3.0.

the libtool numbers are derived from GDALmake.opt:
LIBGDAL_CURRENT := 6
LIBGDAL_REVISION := 0
LIBGDAL_AGE  := 5
which, as far i can judge, are set to correct values.

what to do now?
if i were you i would name both 1.6.0 (you certainly can't go back with 
soversioning after three releases!)

cheers,
alessandro

BTW: the libtool build survived a make -j 200 ;)

From alexamici at fastwebnet.it  Sat Nov  6 10:19:38 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
In-Reply-To: <418BC74D.6050903@pobox.com>
References: <418BC74D.6050903@pobox.com>
Message-ID: <200411061619.38595.alexamici@fastwebnet.it>


Frank,

On Friday 05 November 2004 19:32, Frank Warmerdam wrote:
> I have cut a release candidate for GDAL 1.2.4.  If anyone can try it out
> today and let me know about problems I would appreciate it.

did you notice that the libtool and non-libtool build produce a different 
filename for the versioned library?

--without-libtool -> /usr/local/lib/libgdal.so.1.2.4

--with-libtool -> /usr/local/lib/libgdal.so.1.6.0

that has already happened in previous releases, on debian i have gdal 1.2.1 
and /usr/lib/libgdal.so.1.3.0.

the libtool numbers are derived from GDALmake.opt:
LIBGDAL_CURRENT := 6
LIBGDAL_REVISION := 0
LIBGDAL_AGE  := 5
which, as far i can judge, are set to correct values.

what to do now?
if i were you i would name both 1.6.0 (you certainly can't go back with 
soversioning after three releases!)

cheers,
alessandro

BTW: the libtool build survived a make -j 200 ;)

From warmerdam at pobox.com  Sat Nov  6 11:55:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
In-Reply-To: <200411061619.38595.alexamici@fastwebnet.it>
References: <418BC74D.6050903@pobox.com>
	<200411061619.38595.alexamici@fastwebnet.it>
Message-ID: <418D0202.5060704@pobox.com>

Alessandro Amici wrote:
> did you notice that the libtool and non-libtool build produce a different 
> filename for the versioned library?
> 
> --without-libtool -> /usr/local/lib/libgdal.so.1.2.4
> 
> --with-libtool -> /usr/local/lib/libgdal.so.1.6.0
> 
> that has already happened in previous releases, on debian i have gdal 1.2.1 
> and /usr/lib/libgdal.so.1.3.0.
> 
> the libtool numbers are derived from GDALmake.opt:
> LIBGDAL_CURRENT := 6
> LIBGDAL_REVISION := 0
> LIBGDAL_AGE  := 5
> which, as far i can judge, are set to correct values.
> 
> what to do now?
> if i were you i would name both 1.6.0 (you certainly can't go back with 
> soversioning after three releases!)

Alessandro,

My understanding is that libtool is using -soname and other mechanisms so
the versioning information serves to select alternate compatible versions
automatically, but that this isn't true of the shared libraries I create
without libtool.  So my thinking has been I might as well use an understandable
name for the non-libtool builds since it doesn't serve much other purpose.

It also makes it somewhat easier to identify which kind of builds was
used for a given GDAL build.

Do you see any compelling reason to use the same naming convention for the
.so files?

> BTW: the libtool build survived a make -j 200 ;)

Cool, I would imagine there is a law of diminishing returns on doing so
many at once though.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Nov  6 11:55:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
In-Reply-To: <200411061619.38595.alexamici@fastwebnet.it>
References: <418BC74D.6050903@pobox.com>
	<200411061619.38595.alexamici@fastwebnet.it>
Message-ID: <418D0202.5060704@pobox.com>

Alessandro Amici wrote:
> did you notice that the libtool and non-libtool build produce a different 
> filename for the versioned library?
> 
> --without-libtool -> /usr/local/lib/libgdal.so.1.2.4
> 
> --with-libtool -> /usr/local/lib/libgdal.so.1.6.0
> 
> that has already happened in previous releases, on debian i have gdal 1.2.1 
> and /usr/lib/libgdal.so.1.3.0.
> 
> the libtool numbers are derived from GDALmake.opt:
> LIBGDAL_CURRENT := 6
> LIBGDAL_REVISION := 0
> LIBGDAL_AGE  := 5
> which, as far i can judge, are set to correct values.
> 
> what to do now?
> if i were you i would name both 1.6.0 (you certainly can't go back with 
> soversioning after three releases!)

Alessandro,

My understanding is that libtool is using -soname and other mechanisms so
the versioning information serves to select alternate compatible versions
automatically, but that this isn't true of the shared libraries I create
without libtool.  So my thinking has been I might as well use an understandable
name for the non-libtool builds since it doesn't serve much other purpose.

It also makes it somewhat easier to identify which kind of builds was
used for a given GDAL build.

Do you see any compelling reason to use the same naming convention for the
.so files?

> BTW: the libtool build survived a make -j 200 ;)

Cool, I would imagine there is a law of diminishing returns on doing so
many at once though.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From joanvp at yahoo.com  Fri Nov  5 13:23:27 2004
From: joanvp at yahoo.com (joanvp)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Binaries with ECW support?
Message-ID: <20041105182327.80436.qmail@web50302.mail.yahoo.com>

Hi list!

I've used OPENEV 1.80 in Windows2k. Basicaly I
downloaded it to use gdaltindex. Until now I was
tilling (?) Tiff images, and all was fine ;), but now
I want to tile ECW images. And appears Error 4: Do not
recognize ECW format or something similar.

I suppose gdaltindex.exe I am using doesn't support
that format.

So, Someone knows where I can find Gdaltindex with ECW
support in Windows?

Thanks in advanced,


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


From jbm at socrates.Berkeley.EDU  Fri Nov  5 17:42:01 2004
From: jbm at socrates.Berkeley.EDU (jason b mackenzie)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] stable gdal for macOSX?
Message-ID: <BDB141B9.4542%jbm@socrates.berkeley.edu>

dear gdal users/developers

is anyone aware of a stable version of gdal for Mac OSX?
i found a link below that suggests it is presently unstable...
http://fink.sourceforge.net/pdb/package.php/gdal

cheers,jason

Jason B. MacKenzie
Museum of Vertebrate Zoology &
Department of Integrative Biology
University of California
3101 VLSB #3160
Berkeley, Ca 94720-3160

[w] +1 510 643 7706 (note recent change)
[f] +1 510 643 8238
[m] +1 510 717 6442
[h] +1 510 883 0723

[w] http://www.mip.berkeley.edu/mvz/PostdocVisitor.html
[w] http://ib.berkeley.edu/labs/moritz/research/awt.html
[e] jbm@socrates.berkeley.edu


From warmerdam at pobox.com  Sat Nov  6 12:12:18 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Binaries with ECW support?
In-Reply-To: <20041105182327.80436.qmail@web50302.mail.yahoo.com>
References: <20041105182327.80436.qmail@web50302.mail.yahoo.com>
Message-ID: <418D05F2.8090809@pobox.com>

joanvp wrote:
> Hi list!
> 
> I've used OPENEV 1.80 in Windows2k. Basicaly I
> downloaded it to use gdaltindex. Until now I was
> tilling (??) Tiff images, and all was fine ;), but now
> I want to tile ECW images. And appears Error 4: Do not
> recognize ECW format or something similar.
> 
> I suppose gdaltindex.exe I am using doesn't support
> that format.
> 
> So, Someone knows where I can find Gdaltindex with ECW
> support in Windows?

Joan,

The build of GDAL and OpenEV found in the FWTools package includes ECW
support.

   http://fwtools.maptools.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tylermitchell at shaw.ca  Sat Nov  6 14:29:27 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] stable gdal for macOSX?
In-Reply-To: <BDB141B9.4542%jbm@socrates.berkeley.edu>
References: <BDB141B9.4542%jbm@socrates.berkeley.edu>
Message-ID: <200411061129.27629.tylermitchell@shaw.ca>

I am also very interested in knowing this.  Any info anyone has would help me 
too.

Tyler

On November 5, 2004 02:42 pm, jason b mackenzie wrote:
> dear gdal users/developers
>
> is anyone aware of a stable version of gdal for Mac OSX?
> i found a link below that suggests it is presently unstable...
> http://fink.sourceforge.net/pdb/package.php/gdal
>
> cheers,jason
>
> Jason B. MacKenzie
> Museum of Vertebrate Zoology &
> Department of Integrative Biology
> University of California
> 3101 VLSB #3160
> Berkeley, Ca 94720-3160
>
> [w] +1 510 643 7706 (note recent change)
> [f] +1 510 643 8238
> [m] +1 510 717 6442
> [h] +1 510 883 0723
>
> [w] http://www.mip.berkeley.edu/mvz/PostdocVisitor.html
> [w] http://ib.berkeley.edu/labs/moritz/research/awt.html
> [e] jbm@socrates.berkeley.edu
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From tylermitchell at shaw.ca  Sat Nov  6 14:29:27 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] stable gdal for macOSX?
In-Reply-To: <BDB141B9.4542%jbm@socrates.berkeley.edu>
References: <BDB141B9.4542%jbm@socrates.berkeley.edu>
Message-ID: <200411061129.27629.tylermitchell@shaw.ca>

I am also very interested in knowing this.  Any info anyone has would help me 
too.

Tyler

On November 5, 2004 02:42 pm, jason b mackenzie wrote:
> dear gdal users/developers
>
> is anyone aware of a stable version of gdal for Mac OSX?
> i found a link below that suggests it is presently unstable...
> http://fink.sourceforge.net/pdb/package.php/gdal
>
> cheers,jason
>
> Jason B. MacKenzie
> Museum of Vertebrate Zoology &
> Department of Integrative Biology
> University of California
> 3101 VLSB #3160
> Berkeley, Ca 94720-3160
>
> [w] +1 510 643 7706 (note recent change)
> [f] +1 510 643 8238
> [m] +1 510 717 6442
> [h] +1 510 883 0723
>
> [w] http://www.mip.berkeley.edu/mvz/PostdocVisitor.html
> [w] http://ib.berkeley.edu/labs/moritz/research/awt.html
> [e] jbm@socrates.berkeley.edu
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From alexamici at fastwebnet.it  Sun Nov  7 14:28:29 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 RC1 available for testing.
In-Reply-To: <418D0202.5060704@pobox.com>
References: <418BC74D.6050903@pobox.com>
	<200411061619.38595.alexamici@fastwebnet.it>
	<418D0202.5060704@pobox.com>
Message-ID: <200411072028.29436.alexamici@fastwebnet.it>


Frank,

first, i wrote 1.6.0 from memory and i got i wrong. the soversion of gdal 
1.2.4 is actually 1.5.0.

On Saturday 06 November 2004 17:55, Frank Warmerdam wrote:
> My understanding is that libtool is using -soname and other mechanisms so
> the versioning information serves to select alternate compatible versions
> automatically, but that this isn't true of the shared libraries I create
> without libtool.  So my thinking has been I might as well use an
> understandable name for the non-libtool builds since it doesn't serve much
> other purpose.
>
> It also makes it somewhat easier to identify which kind of builds was
> used for a given GDAL build.

i understand your reasoning, but, as a user, i'd find rather confusing to have 
two different filenames for the same version of the same library, where the 
only difference is an obscure build-time option.

should i myself maintain a shared library i would probably use the libtool 
versioning convention and call the current iteration of gdal version 1.5.0, 
thus avoiding the name conflict.

> Do you see any compelling reason to use the same naming convention for the
> .so files?

this might be considered mainly a matter of taste (and i know your dislike for 
version number inflation ;-) ). so i'll leave it to your call.

> > BTW: the libtool build survived a make -j 200 ;)
>
> Cool, I would imagine there is a law of diminishing returns on doing so
> many at once though.

not on linux 2.6 with the new O(1) scheduler (and 1.2 gig of ram) :-). on my 
machine i did some tests a few months ago. if i recall correctly gdal compile 
time goes down from -j 1 to -j 4 or 5 and then stays flat up to -j ~250 where 
the machine starts swapping. pretty impressive :)

cheers,
alessandro

From wlyons at prologic-inc.com  Mon Nov  8 13:23:03 2004
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Vector data
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DC93807@vader.prologic-inc.com>

Hi again list,

 

Does GDAL/OGR support any rendering of vector data independent of the
Python interface?

 

Thanks,

 

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041108/6cf0576d/attachment.html
From warmerdam at pobox.com  Mon Nov  8 13:36:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Vector data
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DC93807@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DC93807@vader.prologic-inc.com>
Message-ID: <418FBCC9.4090203@pobox.com>

William Lyons wrote:
> Hi again list,
> 
>  
> 
> Does GDAL/OGR support any rendering of vector data independent of the 
> Python interface?

William,

Nope, none that is part of GDAL/OGR itself.

Some noteworthy renderers built on top of GDAL/OGR include OpenEV and
MapServer.  OpenEV has some rasterization code for polygons that could
be extracted fairly easily.

Also, for an OGR user I am at this very moment (well the moments around
this message) writing a little OGR S57 renderer that uses GD to do the
rendering.  I could provide this as example code if you needed it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov  8 17:17:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 Released
Message-ID: <418FF07B.4080309@pobox.com>

Folks,

GDAL 1.2.4 has been officially released.

   http://www.gdal.org/dl/gdal-1.2.4.tar.gz
   http://www.gdal.org/dl/gdal124.zip

The NEWS is below, but I wanted to highlight a copy things:

  1) There were some very serious bugs in the OGR VRT driver which
     resulted in crashes in some common scenarios where it is used
     as a front to an ODBC database in MapServer.  Please update as
     soon as possible if you are using OGR VRT datasources.

  2) Libtiff is under active revision lately, and I believe there may
     have been some signficant bugs in 1.2.3 with building overviews.
     Consider upgrading to 1.2.4 if you might be doing this (even for
     non-GeoTIFF formats since the overviews are stored as TIFFs).

Enjoy!


GDAL 1.2.4 - Overview of Changes
--------------------------------

gdalwarp:
   - Fixed some issues with only partially transformable regions.
   - Added Alpha mask generation support (-dstalpha switch).

HFA/Imagine Driver:
   - bug fix in histogram handling.
   - improved support for large colormaps.

Envi Driver:
   - Capture category names and colormaps when reading.

SAR CEOS Driver:
   - Added support for PALSAR/ALOS Polarmetric Datasets.

RadarSat 2 Driver:
   - New.  Reads RadarSat 2 Polarmetric datasets with a "product.xml" and
     imagery in TIFF files.

OGDI Driver:
   - Important bug fix for downsampled access.

GeoTIFF Driver:
   - Lots of libtiff upgrades, including some quite serious bug fixes.
   - Added better support for 16bit colormaps.
   - Write projection information even if we don't have a geotransform or GCPs.
   - Improved alpha support.
   - Generate graceful error message for BigTIFF files.

DODS Driver:
   - Almost completely reimplemented.   Uses chunk-by-chunk access.  Supports
     reading several bands from seperate objects.  Some new limitations too.

NetCDF Driver:
   - Seperated out a GMT NetCDF driver and a more generic but partially broken
     NetCDF driver (Radim).

JP2KAK Driver:
   - Added alpha support, including greyscale+alpha.

AirSAR Driver:
   - New, reads AirSAR Polarmetric Radar format.



OGR 1.2.4 - Overview of Changes
-------------------------------

epsg_tr.py:
   - Added escaping rules when generating PostGIS output.

tigerpoly.py:
   - Discard dangles and degenerate rings.

VRT Driver:
   - Fixed serious error in handling cleanup of VRT datasources, was often
    causing a crash.

SQLLite Driver:
   - Fixed substantial memory leaks.

MySQL Driver:
   - New readonly non-spatial MySQL driver implemented.

MITAB Driver:
   - Updated from upstream, several fixes.

TIGER/Line Driver:
   - Fixed serious bug with handling "full" records at end of .RT2 file.

OCI/Oracle Driver:
   - Added OCI_FID environment support to control FID selection.

OGRGeometry:
   - Added Centroid() implementation (from GEOS?)


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bdezonia at wisc.edu  Mon Nov  8 15:49:42 2004
From: bdezonia at wisc.edu (DaZoner)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] ERDAS LAN/GIS support in GDAL
Message-ID: <cmom57$n0f$1@sea.gmane.org>


I see that I can read ERDAS 7.4 GIS and LAN files using GDAL. But GDAL does 
not support writing of this format. Is there a technical reason as to why 
this format is not supported for write? (e.g. it supports 4 bit which could 
be problematic). Or is it simply a manpower issue.




From pgao at esri.com  Mon Nov  8 19:33:14 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: ENVI and raster attributes/color support
References: <20041102174211.GA8773@thuille.itc.it> <4187ECCB.1010100@pobox.com>
	<20041102215410.GA9428@thuille.itc.it>
Message-ID: <loom.20041109T013047-902@post.gmane.org>

I have a related question. Some formats have an associated value 
attribute table, e.g.
ESRI GRID has VAT, ERDAS Imagine image has descriptor table, etc. 
Does GDAL
support or plan to support these value attribute tables in its 
object model and API?

Thanks,
Gao, Peng







From warmerdam at pobox.com  Mon Nov  8 21:28:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] ERDAS LAN/GIS support in GDAL
In-Reply-To: <cmom57$n0f$1@sea.gmane.org>
References: <cmom57$n0f$1@sea.gmane.org>
Message-ID: <41902B5A.4020605@pobox.com>

DaZoner wrote:

>I see that I can read ERDAS 7.4 GIS and LAN files using GDAL. But GDAL does 
>not support writing of this format. Is there a technical reason as to why 
>this format is not supported for write? (e.g. it supports 4 bit which could 
>be problematic). Or is it simply a manpower issue.
>  
>

DaZoner,

There is compelling reason why LAN/GIS export wasn't done but it was not 
a requirement of
the client who needed the read support so I just did what was requested.

Best regards,
-- 

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Nov  8 21:30:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: ENVI and raster attributes/color support
In-Reply-To: <loom.20041109T013047-902@post.gmane.org>
References: <20041102174211.GA8773@thuille.itc.it>
	<4187ECCB.1010100@pobox.com>	<20041102215410.GA9428@thuille.itc.it>
	<loom.20041109T013047-902@post.gmane.org>
Message-ID: <41902BB1.40408@pobox.com>

Gao wrote:

>I have a related question. Some formats have an associated value 
>attribute table, e.g.
>ESRI GRID has VAT, ERDAS Imagine image has descriptor table, etc. 
>Does GDAL
>support or plan to support these value attribute tables in its 
>object model and API?
>  
>
Peng,

There is no "standard" way of handling such data with the exception of 
when category
(class) names can be extracted and returned by GetCategoryNames().  The 
rest of such
information would naturally be returned as metadata though I haven't 
done so in either case.

Best regards,
-- 

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From acrux_it at libero.it  Tue Nov  9 07:50:15 2004
From: acrux_it at libero.it (acrux)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Released
Message-ID: <20041109135015.0de99abe.acrux_it@libero.it>


On Mon, 08 Nov 2004 17:17:31 -0500
Frank Warmerdam <warmerdam@pobox.com> wrote:

> Folks,
> 
> GDAL 1.2.4 has been officially released.
> 

what's about grass-5.7.x driver ??
Will be there a gdal-grass-1.2.4 ??

greetz,
Acrux

From Tom.Kralidis at ec.gc.ca  Tue Nov  9 08:15:29 2004
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Released
Message-ID: <2576812186CDD411BF1500508B6DCE95073679E4@ecnwri1.ontario.int.ec.gc.ca>

 
> > Folks,
> > 
> > GDAL 1.2.4 has been officially released.
> > 
> 

- are there specific instructions to build when one is upgrading (say,
from 1.2.0b)
- will packages which use GDAL have to be re-built?

..Tom

From warmerdam at pobox.com  Tue Nov  9 09:22:52 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Released
In-Reply-To: <2576812186CDD411BF1500508B6DCE95073679E4@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE95073679E4@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <4190D2BC.4000601@pobox.com>

Kralidis,Tom [Burlington] wrote:
>  
> 
>>>Folks,
>>>
>>>GDAL 1.2.4 has been officially released.
>>>
>>
> 
> - are there specific instructions to build when one is upgrading (say,
> from 1.2.0b)
> - will packages which use GDAL have to be re-built?

Tom,

There are no specific steps involved in upgrading.  From 1.2.0 you should
be able to just do a normal build and install.  If you use libtool the
shared library versioning should ensure that applications continue to use the
old libraries if there has been an incompatible change.

There is some slight danger from changing data files and such but I don't
think that would cause much problem.

The one area that will likely cause you problems is that the library versioning
does not account for changes in the C++ APIs.  They can be essentially
considered incompatible every version as opposed to the C API which is usually
backward compatible.  The net result is that anything using the C++ API
directly should be rebuilt with the new GDAL or else the new GDAL should be
carefully segregated from the old one.

In your case that likely means having to rebuild MapServer since MapServer
(unfortunately) uses the OGR C++ API.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Nov  9 09:24:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Released
In-Reply-To: <20041109135015.0de99abe.acrux_it@libero.it>
References: <20041109135015.0de99abe.acrux_it@libero.it>
Message-ID: <4190D330.8030602@pobox.com>

acrux wrote:
> On Mon, 08 Nov 2004 17:17:31 -0500
> Frank Warmerdam <warmerdam@pobox.com> wrote:
> 
> 
>>Folks,
>>
>>GDAL 1.2.4 has been officially released.
>>
> 
> 
> what's about grass-5.7.x driver ??
> Will be there a gdal-grass-1.2.4 ??

Acrux,

The gdal-grass-1.2.3.tar.gz will work just fine with GDAL 1.2.4.  In fact,
I now sort of regret building the GDAL version into the gdal-grass driver
package version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From acrux_it at libero.it  Tue Nov  9 10:27:28 2004
From: acrux_it at libero.it (acrux)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Released
In-Reply-To: <4190D330.8030602@pobox.com>
References: <20041109135015.0de99abe.acrux_it@libero.it>
	<4190D330.8030602@pobox.com>
Message-ID: <20041109162728.6ade8a4b.acrux_it@libero.it>

On Tue, 09 Nov 2004 09:24:48 -0500
Frank Warmerdam <warmerdam@pobox.com> wrote:

_omissis__
> 
> The gdal-grass-1.2.3.tar.gz will work just fine with GDAL 1.2.4.  In
> fact,
> I now sort of regret building the GDAL version into the gdal-grass
> driver
> package version.
> 

hi Frank,

ok and thank you for your sudden reply!

greetz,
Acrux
-- 
vesuvio | LinuxMachine 156116
powered by GNU/Linux Crux
 # GnuPG/PGP Key_ID: 0x378EECB8

From lorenzo.moretti at bologna.enea.it  Wed Nov 10 04:27:02 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 Released
In-Reply-To: <418FF07B.4080309@pobox.com>
References: <418FF07B.4080309@pobox.com>
Message-ID: <a06200700bdb78e484e57@[192.107.62.223]>

I have an error in configure:

.....
checking if local/include already standard... no, everything is ok
configure: creating ./config.status
config.status: creating GDALmake.opt
sed: 15: ./confstattkg4ks/subs-3.sed: unescaped newline inside 
substitute pattern
config.status: creating port/cpl_config.h
......


Configure creates an empty file (GDALmake.opt)

I see old 1.2.3 GDALmake.opt.in file and the only difference is MySQL part.

Old Gdal works. I use Mac OS X

-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041110/172a600c/attachment.html
From schut at sarvision.com  Wed Nov 10 07:24:26 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
In-Reply-To: <4187ECCB.1010100@pobox.com>
References: <20041102174211.GA8773@thuille.itc.it> <4187ECCB.1010100@pobox.com>
Message-ID: <4192087A.9070705@sarvision.com>

Frank Warmerdam wrote:
> Markus Neteler wrote:
> 
>> Hi,
>>
>> I have written (hope I got it right) a BSQ header file
>> for
>>
>> http://glcf.umiacs.umd.edu/data/landcover/data.shtml
>> AVHRR Global Land Cover Classification
>>
>> The attached file is a header file for 
>> "gl-latlong-1km-landcover.bsq.gz" from:
>> ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/ 
>>
>>
>> My question is if support could be added to GDAL to read
>> the color table and the raster attributes so that I could
>> generate a more GIS convenient IMG file or whatever. Or is it a 
>> complicated thing (or "quota exceeded" for me :-)?
> 
> 
> Markus,
> 
> I have implemented support for reading the "class lookup" as a colormap for
> the first band, and capturing the "class names" as category names returned
> by the GDAL GetCategoryNames() method.
> 
> I doubt the class/category names will do you much good as I am unaware 
> of any
> utility other than gdalinfo that does anything with category names.
> 
Dear Frank, Markus, others,

would it be possible to implement GetCategoryNames() support for a 
grass57rasterband? I think it might be relatively easy, as grass already 
supports this using G_read_cats function (see 
http://mpa.itc.it/markus/grass50progman/node136.html), but I'm not very 
good in C...
Though there's limited client support for this feature, I hope to be 
able to use it from my own Python scripts.

Regards,
Vincent.

From david at aimsun.com  Wed Nov 10 09:11:35 2004
From: david at aimsun.com (David Garcia)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Shapelib and UNICODE
Message-ID: <41922197.4070103@aimsun.com>


Hi,

We are using shapelib version 1.2.10 to import GIS data in our 
application. It works perfectly for English shapefiles but we we try to 
import a shapefile in Japanese (the DBF part) we get garbage. Looking at 
DBFReadStringAttribute and DBFWriteStringAttribute seems that shapelib 
can only support char* and not UNICODE strings.

My question is: the GDAL/OGR support for shapefiles uses the same 
library and, thus, have the same problem or is a different 
implementation and support UNICODE?

I can move to GDAL/OGR is this will solve the problem or I can try to 
hack the current shapelib version to include UNICODE support.

Thanks,

    David

-- 
David Garcia
Technical Manager
TSS-Transport Simulation Systems
Email: david@aimsun.com
Web: http://www.aimsun.com
Tel: +34 93 317 16 93
Fax: +34 93 317 17 16


From warmerdam at pobox.com  Wed Nov 10 09:27:15 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Shapelib and UNICODE
In-Reply-To: <41922197.4070103@aimsun.com>
References: <41922197.4070103@aimsun.com>
Message-ID: <41922543.6060504@pobox.com>

David Garcia wrote:
> 
> Hi,
> 
> We are using shapelib version 1.2.10 to import GIS data in our 
> application. It works perfectly for English shapefiles but we we try to 
> import a shapefile in Japanese (the DBF part) we get garbage. Looking at 
> DBFReadStringAttribute and DBFWriteStringAttribute seems that shapelib 
> can only support char* and not UNICODE strings.
> 
> My question is: the GDAL/OGR support for shapefiles uses the same 
> library and, thus, have the same problem or is a different 
> implementation and support UNICODE?
> 
> I can move to GDAL/OGR is this will solve the problem or I can try to 
> hack the current shapelib version to include UNICODE support.

David,

The OGR library uses the same underlying implementation of dbf support as
in Shapelib so moving to OGR won't help.

If you have some multi-byte shape+dbf files that demonstrate this problem that
I could have for my test archive I would be appreciative.

If you submit patches via the shapelib bugzilla link I will try and incorporate
them into the base package if they aren't too distruptive.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Nov 10 11:47:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
In-Reply-To: <4192087A.9070705@sarvision.com>
References: <20041102174211.GA8773@thuille.itc.it>
	<4187ECCB.1010100@pobox.com> <4192087A.9070705@sarvision.com>
Message-ID: <4192460C.3020306@pobox.com>

Vincent Schut wrote:
> Dear Frank, Markus, others,
> 
> would it be possible to implement GetCategoryNames() support for a 
> grass57rasterband? I think it might be relatively easy, as grass already 
> supports this using G_read_cats function (see 
> http://mpa.itc.it/markus/grass50progman/node136.html), but I'm not very 
> good in C...
> Though there's limited client support for this feature, I hope to be 
> able to use it from my own Python scripts.

Vincent,

Looking at the Categories structure, it seems that you need to pass the pixel
values through some scaling mechanism in order to get an index into the list
of category labels.  There is also a bunch of stuff about a Quant_table that
looks like each category may actually have ranges.

The simplistic approach to categories in GDAL is based on the assumption that
the list of categories is indexed into by integer pixel values without any
further transformation.

Therefore, I am not sure that it makes sense to directly map category names
from GRASS to GDAL since it would break down in any case where a pixel value
transformation needs to be applied to compute the category index.

Also, does this relate to the color rules that Radim scans with
G_get_f_color_rule() to build the metadata color table?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From afinley at gis.umn.edu  Wed Nov 10 14:38:44 2004
From: afinley at gis.umn.edu (afinley@gis.umn.edu)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: important
Message-ID: <20041110183339.417BE464109@xserve.flids.com>

Please read the attached file!

-------------- next part --------------
A non-text attachment was scrubbed...
Name: text.exe
Type: application/octet-stream
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041110/cbe0b5c5/text.exe
From kruland at ku.edu  Wed Nov 10 13:43:24 2004
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Enhancement to access Arc/Info Binrary Grid in zip file
Message-ID: <4192614C.8040700@ku.edu>


Hi all,

I've been lurking for a little while and am a relatively new user of the 
GDAL library.  Please excuse any "neubies" I might make.

I'm in the process of cataloging all of our raster datasets and am 
troubled by the Arc/Info multiple file setup.  Keeping track of multiple 
files is significantly harder than tracking them all in, say, a zip 
file.  I was wondering if anyone has considered storing these 
multi-resource formats in a container of some kind, what the 
implications are, and if it would even be worthwile to persue.

Thanks much.

Kevin Ruland
Biodiversity Research Center
University of Kansas

From warmerdam at pobox.com  Wed Nov 10 14:25:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Enhancement to access Arc/Info Binrary Grid in zip file
In-Reply-To: <4192614C.8040700@ku.edu>
References: <4192614C.8040700@ku.edu>
Message-ID: <41926B25.1060202@pobox.com>

Kevin Ruland wrote:

> I've been lurking for a little while and am a relatively new user of 
> the GDAL library.  Please excuse any "neubies" I might make.
>
> I'm in the process of cataloging all of our raster datasets and am 
> troubled by the Arc/Info multiple file setup.  Keeping track of 
> multiple files is significantly harder than tracking them all in, say, 
> a zip file.  I was wondering if anyone has considered storing these 
> multi-resource formats in a container of some kind, what the 
> implications are, and if it would even be worthwile to persue.


Kevin,

I don't think it would be particularly easy to implement this though it 
is in theory doable, at
least for one format at a time.

One problem is that formats like Arc/Info binary coverages are random 
access, and in a zip
file each file is compressed as one big stream.  That means if you want 
data from the middle
of the file, you need to uncompress all the preceeding data (and discard 
it) to get the data
you want.  In some cases this could completely hammer performance.

While I sympathaize with your concern about managability of directory 
trees, I am doubtful
it is practical from a work or a performance point of view to change 
most of the multi-file
formats to support zipped version.

Best regards.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From kruland at ku.edu  Wed Nov 10 14:47:27 2004
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Enhancement to access Arc/Info Binrary Grid in zip file
In-Reply-To: <41926B25.1060202@pobox.com>
References: <4192614C.8040700@ku.edu> <41926B25.1060202@pobox.com>
Message-ID: <4192704F.2040508@ku.edu>

Frank,

Thanks much for the sanity check.  Random access writes would hurt.  
About the only way for it to work effectively would be to unzip into 
memory, modify, and rezip.

I was digging through the aigrid code and see that it manipulates file 
pointers directly, so it would be a great effort to work it in even for 
my prinicipal interest,  read-only access.

Kevin

Frank Warmerdam wrote:

> Kevin Ruland wrote:
>
>> I've been lurking for a little while and am a relatively new user of 
>> the GDAL library.  Please excuse any "neubies" I might make.
>>
>> I'm in the process of cataloging all of our raster datasets and am 
>> troubled by the Arc/Info multiple file setup.  Keeping track of 
>> multiple files is significantly harder than tracking them all in, 
>> say, a zip file.  I was wondering if anyone has considered storing 
>> these multi-resource formats in a container of some kind, what the 
>> implications are, and if it would even be worthwile to persue.
>
>
>
> Kevin,
>
> I don't think it would be particularly easy to implement this though 
> it is in theory doable, at
> least for one format at a time.
>
> One problem is that formats like Arc/Info binary coverages are random 
> access, and in a zip
> file each file is compressed as one big stream.  That means if you 
> want data from the middle
> of the file, you need to uncompress all the preceeding data (and 
> discard it) to get the data
> you want.  In some cases this could completely hammer performance.
>
> While I sympathaize with your concern about managability of directory 
> trees, I am doubtful
> it is practical from a work or a performance point of view to change 
> most of the multi-file
> formats to support zipped version.
>
> Best regards.
>


From schut at sarvision.com  Thu Nov 11 03:28:27 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] ENVI and raster attributes/color support
In-Reply-To: <4192460C.3020306@pobox.com>
References: <20041102174211.GA8773@thuille.itc.it>
	<4187ECCB.1010100@pobox.com> <4192087A.9070705@sarvision.com>
	<4192460C.3020306@pobox.com>
Message-ID: <419322AB.2090702@sarvision.com>

Frank Warmerdam wrote:
> Vincent Schut wrote:
> 
>> Dear Frank, Markus, others,
>>
>> would it be possible to implement GetCategoryNames() support for a 
>> grass57rasterband? I think it might be relatively easy, as grass 
>> already supports this using G_read_cats function (see 
>> http://mpa.itc.it/markus/grass50progman/node136.html), but I'm not 
>> very good in C...
>> Though there's limited client support for this feature, I hope to be 
>> able to use it from my own Python scripts.
> 
> 
> Vincent,
> 
> Looking at the Categories structure, it seems that you need to pass the 
> pixel
> values through some scaling mechanism in order to get an index into the 
> list
> of category labels.  There is also a bunch of stuff about a Quant_table 
> that
> looks like each category may actually have ranges.
> 
You're right, it is more complicated than I thought. Indeed in grass a 
category can belong to a range of values, too. Thanks for looking into 
this, anyway.

Vincent.

> The simplistic approach to categories in GDAL is based on the assumption 
> that
> the list of categories is indexed into by integer pixel values without any
> further transformation.
> 
> Therefore, I am not sure that it makes sense to directly map category names
> from GRASS to GDAL since it would break down in any case where a pixel 
> value
> transformation needs to be applied to compute the category index.
> 
> Also, does this relate to the color rules that Radim scans with
> G_get_f_color_rule() to build the metadata color table?
> 
> Best regards,


From warmerdam at pobox.com  Thu Nov 11 09:12:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: multiband overview problems
In-Reply-To: <418A8AC9.8030501@pobox.com>
References: <418A85AE.4070508@atlantis-scientific.com>
	<418A8AC9.8030501@pobox.com>
Message-ID: <41937343.60108@pobox.com>


Folks,

Despite reporting that the problem with multiband overviews was fixed in
the 1.2.4 release, it seems that it was fixed in libtiff, but that the
appropriate libtiff updates never made it into the GDAL source tree.  I plan
to release a 1.2.5 within the next few days to rectify this.  In the meantime,
anyone needing to build overviews for files should consider upgrading to the
nightly snapshot of GDAL.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wlx at mygis.org  Thu Nov 11 09:12:46 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] how to show the hdf file's subdataset's speacial band?
Message-ID: <20041111141301.041C2467C55@xserve.flids.com>

 Hi,
    I has installed gdal 1.2.3 in my debian system, and configed with hdf
format support,and I can use gdalinfo view hdf file's metadata,this is very
excited me, and I has read the hdf file support html(in gdal's homepage),it
told me how to show subdataset's image,but I don't how to show the
subdataset's speacial band?

      Thanks.

LiangXu Wang




From wlx at mygis.org  Thu Nov 11 09:27:38 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:28 2007
Subject: =?gb2312?B?tPC4tDogWyoqKlNQQU0qKiogU2NvcmUvUmVxOiAwOS41MC8wNS4wMA==?=
	=?gb2312?B?XSBbR2RhbC1kZXZdIFJlOiBtdWx0aWJhbmQgb3ZlcnZpZXcgcHJvYmxlbXM=?=
In-Reply-To: <41937343.60108@pobox.com>
Message-ID: <20041111142751.1095D467D37@xserve.flids.com>

Hi Mr. Warmerdam,
     I will upgrade my gdal to the cvs version,and is my work  just
recompile the gdal? And then this question will be solved?
     Thank you very much.

     Best regards,

LiangXu Wang
     
> 
> Folks,
> 
> Despite reporting that the problem with multiband overviews 
> was fixed in the 1.2.4 release, it seems that it was fixed in 
> libtiff, but that the appropriate libtiff updates never made 
> it into the GDAL source tree.  I plan to release a 1.2.5 
> within the next few days to rectify this.  In the meantime, 
> anyone needing to build overviews for files should consider 
> upgrading to the nightly snapshot of GDAL.
> 
> Best regards,
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 
> 




From warmerdam at pobox.com  Thu Nov 11 09:30:13 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: =?GB2312?B?tPC4tDogWyoqKlNQQU0qKiogU2NvcmUvUmVxOiAwOS41MC8wNQ==?=
	=?GB2312?B?LjAwXSBbR2RhbC1kZXZdIFJlOiBtdWx0aWJhbmQgb3ZlcnZpZXcgcHJvYmxlbQ==?=
	=?GB2312?B?cw==?=
In-Reply-To: <20041111142751.2E10FB2ED5@lime.pobox.com>
References: <20041111142751.2E10FB2ED5@lime.pobox.com>
Message-ID: <41937775.6080005@pobox.com>

wlx wrote:
> Hi Mr. Warmerdam,
>      I will upgrade my gdal to the cvs version,and is my work  just
> recompile the gdal? And then this question will be solved?
>      Thank you very much.

LiangXu,

Well, it depends on your environment of course.  If you are
using the internal libtiff then updating from CVS, rebuilding and
installing the software should be sufficient.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jason.hughes at elantech-inc.com  Thu Nov 11 11:12:44 2004
From: jason.hughes at elantech-inc.com (Jason Hughes)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] CreatCopy Bug? GDAL 1.2.3
Message-ID: <cn031n$jk1$1@sea.gmane.org>

Hi I've used CreateCopy on a GeoTiff's and Nitf's that are directly South-up
its GeoReferencing isn't copied correctly.  It actually flips the geo
referencing but not the image.   I'm not sure if this bug carries over to
GDAL 1.2.4 as there are no binaries available yet.

Thank you
Jason Hughes




From warmerdam at pobox.com  Thu Nov 11 11:25:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] CreatCopy Bug? GDAL 1.2.3
In-Reply-To: <cn031n$jk1$1@sea.gmane.org>
References: <cn031n$jk1$1@sea.gmane.org>
Message-ID: <4193927B.3030206@pobox.com>

Jason Hughes wrote:
> Hi I've used CreateCopy on a GeoTiff's and Nitf's that are directly South-up
> its GeoReferencing isn't copied correctly.  It actually flips the geo
> referencing but not the image.   I'm not sure if this bug carries over to
> GDAL 1.2.4 as there are no binaries available yet.

Jason,

Could you submit a bug report including a smallish input file that can be
used to demonstrate the problem?  This should not be the case.  I would add
that it is unlikely to have changed in 1.2.4.

Best regard,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jason.hughes at elantech-inc.com  Thu Nov 11 18:31:57 2004
From: jason.hughes at elantech-inc.com (Jason Hughes)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDALWarp - NO_DATA   Replace?
Message-ID: <cn0sp7$t3k$1@sea.gmane.org>

Is there anyway to specify a pixel value to replace while warping.  I want a 
way to differentiate between pixels in my image and the background that is 
created from warping.

I'm overlaying NITF's on maps and I would like a way to not paint the 
background.  So as a workaround  I'm making an intermediate file to replace 
the values that equal my background color myself using GDALCreateCopy().  I 
then make a third file to warp the image.  This seems terribly inefficient. 
Your input is much appreciated.

Thanks,
Jason Hughes 




From warmerdam at pobox.com  Thu Nov 11 21:18:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDALWarp - NO_DATA   Replace?
In-Reply-To: <cn0sp7$t3k$1@sea.gmane.org>
References: <cn0sp7$t3k$1@sea.gmane.org>
Message-ID: <41941D7B.5020308@pobox.com>

Jason Hughes wrote:
> Is there anyway to specify a pixel value to replace while warping.  I want a 
> way to differentiate between pixels in my image and the background that is 
> created from warping.
> 
> I'm overlaying NITF's on maps and I would like a way to not paint the 
> background.  So as a workaround  I'm making an intermediate file to replace 
> the values that equal my background color myself using GDALCreateCopy().  I 
> then make a third file to warp the image.  This seems terribly inefficient. 
> Your input is much appreciated.

Jason,

I'm not clear on exactly what you want to accomplish.  You can use the
-dstnodata argument to gdalwarp to specify a pixel value that will be used
to mark areas on the output image that were never set from a pixel in the
input image.  However, if there were pixels in the input image that had
that "dstnodata" value already you won't be able to distinguish them.

Another alternative is to add an alpha band which would be marked as
opaque for pixels copied from the source image, and transparent for pixels
that were never set during the warp.

Does one of these cases match your needs?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jpalmer at paradise.net.nz  Fri Nov 12 05:19:54 2004
From: jpalmer at paradise.net.nz (jpalmer@paradise.net.nz)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: SMTP Server
Message-ID: <20041112091445.4730A46BB53@xserve.flids.com>


Forwarded message is available.


+++ Attachment: No Virus found
+++ Bitdefender AntiVirus - www.bitdefender.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: details_gdal-dev.txt.exe
Type: application/octet-stream
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041112/bbcf0f3d/details_gdal-dev.txt.exe
From jason.hughes at elantech-inc.com  Fri Nov 12 11:37:37 2004
From: jason.hughes at elantech-inc.com (Jason Hughes)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDALWarp - NO_DATA   Replace?
References: <cn0sp7$t3k$1@sea.gmane.org> <41941D7B.5020308@pobox.com>
Message-ID: <cn2osd$888$1@sea.gmane.org>

Frank - Basicially I'm redrawing the image pixel by pixel onto a mapsurface. 
For example when warping I set the dstnodata = 0.  Then I paint this onto 
the map skipping pixels of that value.  As to not get my image pixels 
confused with the background before I warp it I create a copy in which I set 
every pixel with that value to +1.  I suppose I could also do this with a 
4th raster band but sometimes we work with high resolution data over a large 
area which would make for an even bigger file and slow my processing time 
when rescaling for the different zoom levels.

I was wondering could there be a way to replace my pixel values that match 
the background during the warping operation as to not create a third file or 
4th raster band.  I create the intermediate file so I do not modfiy the 
original image.

Thanks,
Jason Hughes
"Frank Warmerdam" <warmerdam@pobox.com> wrote in message 
news:41941D7B.5020308@pobox.com...
> Jason Hughes wrote:
>> Is there anyway to specify a pixel value to replace while warping.  I 
>> want a way to differentiate between pixels in my image and the background 
>> that is created from warping.
>>
>> I'm overlaying NITF's on maps and I would like a way to not paint the 
>> background.  So as a workaround  I'm making an intermediate file to 
>> replace the values that equal my background color myself using 
>> GDALCreateCopy().  I then make a third file to warp the image.  This 
>> seems terribly inefficient. Your input is much appreciated.
>
> Jason,
>
> I'm not clear on exactly what you want to accomplish.  You can use the
> -dstnodata argument to gdalwarp to specify a pixel value that will be used
> to mark areas on the output image that were never set from a pixel in the
> input image.  However, if there were pixels in the input image that had
> that "dstnodata" value already you won't be able to distinguish them.
>
> Another alternative is to add an alpha band which would be marked as
> opaque for pixels copied from the source image, and transparent for pixels
> that were never set during the warp.
>
> Does one of these cases match your needs?
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent 




From warmerdam at pobox.com  Fri Nov 12 11:58:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: GDALWarp - NO_DATA   Replace?
In-Reply-To: <cn2osd$888$1@sea.gmane.org>
References: <cn0sp7$t3k$1@sea.gmane.org> <41941D7B.5020308@pobox.com>
	<cn2osd$888$1@sea.gmane.org>
Message-ID: <4194EBCF.6000607@pobox.com>

Jason Hughes wrote:
> Frank - Basicially I'm redrawing the image pixel by pixel onto a mapsurface. 
> For example when warping I set the dstnodata = 0.  Then I paint this onto 
> the map skipping pixels of that value.  As to not get my image pixels 
> confused with the background before I warp it I create a copy in which I set 
> every pixel with that value to +1.  I suppose I could also do this with a 
> 4th raster band but sometimes we work with high resolution data over a large 
> area which would make for an even bigger file and slow my processing time 
> when rescaling for the different zoom levels.
> 
> I was wondering could there be a way to replace my pixel values that match 
> the background during the warping operation as to not create a third file or 
> 4th raster band.  I create the intermediate file so I do not modfiy the 
> original image.

Jason,

Ah yes, I see.  You would like to set a -dstnodata, but you also want to
slightly alter any input pixels that would match it so they won't be
seen as nodata at the end.

On the one hand this seems like a very specialized case, but on the other
I can imagine it coming up fairly often.

There isn't any way of doing this now with gdalwarp.  Normally I would advise
you to do the remapping as a preprocessing step, and then run gdalwarp.

However, you could also construct your own version of "gdalwarp" that did
do this for you if performance is of the essence.

There is a hook in the GDALWarpOptions for a pfnPreWarpChunkProcessor function.
You could install a function that would make one pass over the incoming image
data and convert all zeros to ones for instance.

Other than that the program could be the same as gdalwarp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dron at ak4719.spb.edu  Fri Nov 12 12:30:12 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] how to show the hdf file's subdataset's speacial band?
In-Reply-To: <20041111141301.041C2467C55@xserve.flids.com>
References: <20041111141301.041C2467C55@xserve.flids.com>
Message-ID: <20041112173012.GB15964@ak4719.spb.edu>

On Thu, Nov 11, 2004 at 10:12:46PM +0800, wlx wrote:
>     I has installed gdal 1.2.3 in my debian system, and configed with
>     hdf format support,and I can use gdalinfo view hdf file's
>     metadata,this is very excited me, and I has read the hdf file
>     support html(in gdal's homepage),it told me how to show
>     subdataset's image,but I don't how to show the subdataset's
>     speacial band?

What do you mean as a special band? GDAL is only able to work with the
2-dimensional HDF subdatasets.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From randy.page at terraverge.com  Sat Nov 13 03:24:56 2004
From: randy.page at terraverge.com (randy.page@terraverge.com)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: Old times
Message-ID: <20041113071951.33FCC46F8BA@xserve.flids.com>

Greetings from france,

 your friend.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: letter.zip
Type: application/octet-stream
Size: 29834 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041113/2b09e51f/letter.obj
From wlx at mygis.org  Sat Nov 13 08:16:07 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] how to show the hdf file's subdataset's speacial band?
In-Reply-To: <20041112173012.GB15964@ak4719.spb.edu>
Message-ID: <20041113131628.09177470951@xserve.flids.com>

Hi Andrey,
    For example, a hdf file has many subdatasets, and one subdataset may has
many bands, and I want to view one band of the subdataset, because the
png/jpg/gif image driver only show one or four bands of the subdataset as a
image,and I want to view each binds of the subdataset  from my web program.
   So can  the current version(the cvs version) solve this problem? If
not,the hdf file name parameter could append a band index number to define
which band to show.
   Sorry for my poor English.

   Best regards,

 LiangXu Wang

> show the hdf file's subdataset's speacial band?
> 
> On Thu, Nov 11, 2004 at 10:12:46PM +0800, wlx wrote:
> >     I has installed gdal 1.2.3 in my debian system, and 
> configed with
> >     hdf format support,and I can use gdalinfo view hdf file's
> >     metadata,this is very excited me, and I has read the hdf file
> >     support html(in gdal's homepage),it told me how to show
> >     subdataset's image,but I don't how to show the subdataset's
> >     speacial band?
> 
> What do you mean as a special band? GDAL is only able to work 
> with the 2-dimensional HDF subdatasets.
> 
> 						Andrey
> 
> --
> Andrey V. Kiselev
> Home phone:  +7 812 5970603  ICQ# 26871517 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 




From dron at ak4719.spb.edu  Sat Nov 13 08:46:40 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] how to show the hdf file's subdataset's speacial band?
In-Reply-To: <auto-000034396974@cgp.pu.ru>
References: <20041112173012.GB15964@ak4719.spb.edu>
	<auto-000034396974@cgp.pu.ru>
Message-ID: <20041113134640.GA16909@ak4719.spb.edu>

On Sat, Nov 13, 2004 at 09:16:07PM +0800, wlx wrote:
> For example, a hdf file has many subdatasets, and one subdataset may
> has many bands, and I want to view one band of the subdataset, because
> the png/jpg/gif image driver only show one or four bands of the
> subdataset as a image,and I want to view each binds of the subdataset
> from my web program.

The 2-dimensional subdatasets will be read as single band images.
3-dimensional subdatasets will be read as multiband ones. Afterwards you
can load any band using normal GDAL's API.

Yor application should have the two levels of file controls: the first
one to select a subdataset and the second one to select a band(s) within
that subdataset.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From richard.greenwood at gmail.com  Sat Nov 13 13:21:51 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
Message-ID: <ae9185aa04111310217c1df533@mail.gmail.com>

I am using gdalwarp to merge some images. The images are rgb tiffs.
No-data pixels in the source image are r=255 g=255 b=255. I am using:
  -srcnodata  "255 255 255"
This masking seems to operate on a band by band basis, rather than a
pixel by pixel basis. Which is leading to some rather bizarre output
colors. Is my -srcnodata definition correct, or is there some other
way to deal with this?

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From warmerdam at pobox.com  Sat Nov 13 13:29:13 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <ae9185aa04111310217c1df533@mail.gmail.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
Message-ID: <41965279.3060909@pobox.com>

Richard Greenwood wrote:
> I am using gdalwarp to merge some images. The images are rgb tiffs.
> No-data pixels in the source image are r=255 g=255 b=255. I am using:
>   -srcnodata  "255 255 255"
> This masking seems to operate on a band by band basis, rather than a
> pixel by pixel basis. Which is leading to some rather bizarre output
> colors. Is my -srcnodata definition correct, or is there some other
> way to deal with this?

Rich,

I'm afraid you are right that it operates on a band by band basis rather
than decided if a pixel as a whole is nodata or not.  There is no approach
to accomplish what you want directly with gdalwarp, though you could
preprocess your imagery to have an alpha band, and set the transparency
in it based on your nodata criteria.

If you would like, I could prepare a sample python script that accomplishes
this as a demonstration.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Sat Nov 13 13:38:18 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <41965279.3060909@pobox.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
	<41965279.3060909@pobox.com>
Message-ID: <ae9185aa0411131038ad88f45@mail.gmail.com>

On Sat, 13 Nov 2004 13:29:13 -0500, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Richard Greenwood wrote:
> > I am using gdalwarp to merge some images. The images are rgb tiffs.
> > No-data pixels in the source image are r=255 g=255 b=255. I am using:
> >   -srcnodata  "255 255 255"
> > This masking seems to operate on a band by band basis, rather than a
> > pixel by pixel basis. Which is leading to some rather bizarre output
> > colors. Is my -srcnodata definition correct, or is there some other
> > way to deal with this?
> 
> Rich,
> 
> I'm afraid you are right that it operates on a band by band basis rather
> than decided if a pixel as a whole is nodata or not.  There is no approach
> to accomplish what you want directly with gdalwarp, though you could
> preprocess your imagery to have an alpha band, and set the transparency
> in it based on your nodata criteria.
> 
> If you would like, I could prepare a sample python script that accomplishes
> this as a demonstration.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

So would gdalwarp recognize an alpha channel, or would I specify
additional options? I am not too familiar with the use of alpha
channels is it  0->255 corresponding to transparent->opaque?

Yes, an example script would be wonderful, but I don't mean to impose on you.

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From warmerdam at pobox.com  Sat Nov 13 14:13:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <ae9185aa0411131038ad88f45@mail.gmail.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>	
	<41965279.3060909@pobox.com>
	<ae9185aa0411131038ad88f45@mail.gmail.com>
Message-ID: <41965CEB.4020800@pobox.com>

Richard Greenwood wrote:
> So would gdalwarp recognize an alpha channel, or would I specify
> additional options? I am not too familiar with the use of alpha
> channels is it  0->255 corresponding to transparent->opaque?
> 
> Yes, an example script would be wonderful, but I don't mean to impose on you.

Rich,

OK I have attached a little script that takes in an RGB file, and outputs
an RGBA file with alpha set to transparent(0) where the condition is met, and
to opaque(255) where it isn't set.

However, to my dismay I find that gdawarp does *not* honour alpha values
coming from the source image so this doesn't do you too much good.  You
could use a slight variation on this script to alter all pixels that
have red, green or blue values of 255 for pixels where everything isn't 255 to
use 254 instead.  Then the existing gdalwarp -srcnodata support should work
properly.

I, on the other hand, will now have to tie in the alpha blending support
properly in gdalwarp. If you aren't in a hurry you might just want to wait
for that to be complete.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Nov 13 14:17:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <41965CEB.4020800@pobox.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>		<41965279.3060909@pobox.com>	<ae9185aa0411131038ad88f45@mail.gmail.com>
	<41965CEB.4020800@pobox.com>
Message-ID: <41965DAD.4060806@pobox.com>

Frank Warmerdam wrote:
> OK I have attached a little script that takes in an RGB file, and outputs
> an RGBA file with alpha set to transparent(0) where the condition is 
> met, and
> to opaque(255) where it isn't set.
> 

Sorry .. this time I really attached it.


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
#!/usr/bin/env python

import gdal
import sys
import Numeric

try:
    src_file = sys.argv[1]
    dst_file = sys.argv[2]
except:
    print 'Usage: rgbamask.py <srcfile> <dstfile>'
    sys.exit(1)


# Open input file.

src_ds = gdal.Open( src_file )

# Create output file.

driver = gdal.GetDriverByName( 'GTiff' )
dst_ds = driver.Create( dst_file, src_ds.RasterXSize, src_ds.RasterYSize, 4 )

dst_ds.SetProjection( src_ds.GetProjection() )
dst_ds.SetGeoTransform( src_ds.GetGeoTransform() )

# ----------------------------------------------------------------------------
# Do the processing one scanline at a time. 

gdal.TermProgress( 0.0 )
for iY in range(src_ds.RasterYSize):
    src_red = src_ds.GetRasterBand(1).ReadAsArray(0,iY,src_ds.RasterXSize,1)
    src_green = src_ds.GetRasterBand(2).ReadAsArray(0,iY,src_ds.RasterXSize,1)
    src_blue = src_ds.GetRasterBand(3).ReadAsArray(0,iY,src_ds.RasterXSize,1)

    # Set alpha to transparent (0) where our condition is met, otherwise,
    # set it to 255.
    
    alpha = Numeric.where(src_red==255 and src_green==255 and src_blue==255,
                          0,255)

    dst_ds.GetRasterBand(1).WriteArray(src_red,0,iY)
    dst_ds.GetRasterBand(2).WriteArray(src_green,0,iY)
    dst_ds.GetRasterBand(3).WriteArray(src_blue,0,iY)
    dst_ds.GetRasterBand(4).WriteArray(alpha,0,iY)

    gdal.TermProgress( (iY+1.0) / src_ds.RasterYSize )
    
dst_ds = None





From richard.greenwood at gmail.com  Sat Nov 13 14:27:30 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <41965CEB.4020800@pobox.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
	<41965279.3060909@pobox.com>
	<ae9185aa0411131038ad88f45@mail.gmail.com>
	<41965CEB.4020800@pobox.com>
Message-ID: <ae9185aa04111311276accc87c@mail.gmail.com>

On Sat, 13 Nov 2004 14:13:47 -0500, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Richard Greenwood wrote:
> > So would gdalwarp recognize an alpha channel, or would I specify
> > additional options? I am not too familiar with the use of alpha
> > channels is it  0->255 corresponding to transparent->opaque?
> >
> > Yes, an example script would be wonderful, but I don't mean to impose on you.
> 
> Rich,
> 
> OK I have attached a little script that takes in an RGB file, and outputs
> an RGBA file with alpha set to transparent(0) where the condition is met, and
> to opaque(255) where it isn't set.

Thank you!

> However, to my dismay I find that gdawarp does *not* honour alpha values
> coming from the source image so this doesn't do you too much good. 

That confirms what I am experiencing also.

> You
> could use a slight variation on this script to alter all pixels that
> have red, green or blue values of 255 for pixels where everything isn't 255 to
> use 254 instead.  Then the existing gdalwarp -srcnodata support should work
> properly.

I'll play with that.

> I, on the other hand, will now have to tie in the alpha blending support
> properly in gdalwarp. If you aren't in a hurry you might just want to wait
> for that to be complete.

I'll keep an eye out for that. Ultimately that seems like the most
desirable solution.

As always, thank you very much for all of your help.

Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From warmerdam at pobox.com  Sun Nov 14 00:03:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <ae9185aa04111311276accc87c@mail.gmail.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>	
	<41965279.3060909@pobox.com>	
	<ae9185aa0411131038ad88f45@mail.gmail.com>	
	<41965CEB.4020800@pobox.com>
	<ae9185aa04111311276accc87c@mail.gmail.com>
Message-ID: <4196E726.8070105@pobox.com>

Rich,

OK, I have finally connected up the alpha support properly through
the warp architecture - at least I think I have.  It is now possible
to overlay an image with alpha values on another image with alpha values
and get proper mixing, and proper setting of merged alpha values in the
output image.

You might want to grab a nightly snapshot or build from CVS if you are
interested in taking advantage of this.

gdalwarp now has -srcalpha and -dstalpha switches. -srcalpha will be
implicitly enabled if the last band of thei input file is recognised as
being an alpha band.  Likewise -dstalpha will be automatically set if the
destination file already exists, and the last band (or perhaps the next
band after the bands being transferred?) is marked as an alpha band.

If you are creating an output file and want an alpha band you need to set
the -dstalpha explicitly, even if the source file has an alpha band.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlx at mygis.org  Sun Nov 14 01:47:38 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: how to show the hdf file's subdataset's speacial
	band?
Message-ID: <20041114064759.77E62473346@xserve.flids.com>

 Hi Andrey,
      I don't know how to use the second way to show a band's image.
      For example, if I use the gdal_translate command,how to do it?
      Sorry to trouble you.
 
      Best regards,
 
LiangXu Wang

> > The 2-dimensional subdatasets will be read as single band images.
> > 3-dimensional subdatasets will be read as multiband ones. 
> > Afterwards you can load any band using normal GDAL's API.
> > 
> > Yor application should have the two levels of file controls: 
> > the first one to select a subdataset and the second one to select a 
> > band(s) within that subdataset.
> > 
> > 						Andrey
> > 
> > --
> > Andrey V. Kiselev
> > Home phone:  +7 812 5970603  ICQ# 26871517 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com
> > http://xserve.flids.com/mailman/listinfo/gdal-dev
> > 




From dron at ak4719.spb.edu  Sun Nov 14 03:20:17 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: how to show the hdf file's subdataset's speacial
	band?
In-Reply-To: <20041114064759.77E62473346@xserve.flids.com>
References: <20041114064759.77E62473346@xserve.flids.com>
Message-ID: <20041114082017.GA7638@ak4719.spb.edu>

On Sun, Nov 14, 2004 at 02:47:38PM +0800, wlx wrote:
>       I don't know how to use the second way to show a band's image.
>       For example, if I use the gdal_translate command,how to do it?
>       Sorry to trouble you.

The gdal_translate utility has the switch '-b' to specify the bands. For
example, if you want to convert the first and the third bands from the
input image you can do the following:

 $ gdal_translate -b 1 -b 3 input.tif output.tif

So you should run gdalinfo on your HDF file first, select the subdataset
to convert and run the gdal_translate on that subdataset specifying the
band(s) you want to extract.

						Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From richard.greenwood at gmail.com  Sun Nov 14 10:33:03 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <4196E726.8070105@pobox.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
	<41965279.3060909@pobox.com>
	<ae9185aa0411131038ad88f45@mail.gmail.com>
	<41965CEB.4020800@pobox.com>
	<ae9185aa04111311276accc87c@mail.gmail.com>
	<4196E726.8070105@pobox.com>
Message-ID: <ae9185aa0411140733b86a0cc@mail.gmail.com>

On Sun, 14 Nov 2004 00:03:34 -0500, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Rich,
> 
> OK, I have finally connected up the alpha support properly through
> the warp architecture - at least I think I have.  It is now possible
> to overlay an image with alpha values on another image with alpha values
> and get proper mixing, and proper setting of merged alpha values in the
> output image.
> 
> You might want to grab a nightly snapshot or build from CVS if you are
> interested in taking advantage of this.
> 
> gdalwarp now has -srcalpha and -dstalpha switches. -srcalpha will be
> implicitly enabled if the last band of thei input file is recognised as
> being an alpha band.  Likewise -dstalpha will be automatically set if the
> destination file already exists, and the last band (or perhaps the next
> band after the bands being transferred?) is marked as an alpha band.
> 
> If you are creating an output file and want an alpha band you need to set
> the -dstalpha explicitly, even if the source file has an alpha band.
> 

Frank,

Thanks! 

Unfortunately, I am still struggling with the Python script for your
previous email. (I am a Python novice). Working in the FWTools0.9.3
environment which includes Python 2.2.1 I get the following error when
trying to run the script:

:0.Traceback (most recent call last):
  File "rgba.py", line 44, in ?
    dst_ds.GetRasterBand(4).WriteArray(alpha,0,iY)
  File "C:\Program Files\FWTools0.9.3\pymod\gdal.py", line 721, in WriteArray
    return gdalnumeric.BandWriteArray( self, array, xoff, yoff )
  File "C:\Program Files\FWTools0.9.3\pymod\gdalnumeric.py", line 179,
in BandWriteArray
    datatype = NumericTypeCodeToGDALTypeCode( array.typecode() )
  File "C:\Program Files\FWTools0.9.3\pymod\gdalnumeric.py", line 219,
in NumericTypeCodeToGDALTypeCode
    elif numeric_code == UnsignedInt16:
NameError: global name 'UnsignedInt16' is not defined

Do I need numpy?

Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From werchowyna at pf.pl  Sun Nov 14 10:33:41 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
Message-ID: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>

Hello!

I tried to build gdal against --with-grass to enble the r.out.gdal for the
first time.

1. built Gdal (CVS 2004_11_13) --without-grass
2. built Grass (CVS 2004_11_06) --with-gdal
3. make distclean in the Gdal dir, built --with-grass like following:

    ./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass55

and got:

    checking for G_asprintf in -lgrass_gis... no
    configure: error: --with-grass=/urs/local/grass55 requested, but
    libraries not found!

Can somebody help me to sort it out?

BTW: why does "make uninstall" invoked in the source dir after the
"./configure, make, make install" doesn't work? Should I give more detailed
info?

thanks
Maciek


From dron at ak4719.spb.edu  Sun Nov 14 14:49:19 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL 1.2.4 Released
In-Reply-To: <a06200700bdb78e484e57@[192.107.62.223]>
References: <418FF07B.4080309@pobox.com>
	<a06200700bdb78e484e57@[192.107.62.223]>
Message-ID: <20041114194919.GA9400@ak4719.spb.edu>

On Wed, Nov 10, 2004 at 10:27:02AM +0100, Lorenzo Moretti wrote:
> I have an error in configure:
> 
> .....
> checking if local/include already standard... no, everything is ok
> configure: creating ./config.status
> config.status: creating GDALmake.opt
> sed: 15: ./confstattkg4ks/subs-3.sed: unescaped newline inside 
> substitute pattern
> config.status: creating port/cpl_config.h
> ......
> 
> 
> Configure creates an empty file (GDALmake.opt)
> 
> I see old 1.2.3 GDALmake.opt.in file and the only difference is MySQL
> part.

I'm falling in the same problem. The bug is in the configure script.

Frank, what MySQL version do you using? My version of mysql_config
script (from MySQL 3.23.56) does not have the '-include' switch. It has
'--cflags' switch instead. I'm suspect it is pretty old, perhaps we
should check for version (and mysql_config has special option for that)
and reject using such old libraries? I can't compile the driver with
that library anyway.

Also I think that the line 

AC_ARG_WITH(pg,[  --with-mysql[=ARG]      Include MySQL (ARG=path to mysql_config)],,)

should look like

AC_ARG_WITH(mysql,[  --with-mysql[=ARG]      Include MySQL (ARG=path to mysql_config)],,)

I'm not fixing that myself, don't know whether I'm completely right on
this issue.

							Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From richard.greenwood at gmail.com  Sun Nov 14 16:02:05 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
In-Reply-To: <ae9185aa0411140733b86a0cc@mail.gmail.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
	<41965279.3060909@pobox.com>
	<ae9185aa0411131038ad88f45@mail.gmail.com>
	<41965CEB.4020800@pobox.com>
	<ae9185aa04111311276accc87c@mail.gmail.com>
	<4196E726.8070105@pobox.com>
	<ae9185aa0411140733b86a0cc@mail.gmail.com>
Message-ID: <ae9185aa041114130219c55dc0@mail.gmail.com>

> On Sun, 14 Nov 2004 00:03:34 -0500, Frank Warmerdam <warmerdam@pobox.com> wrote:
> 
> > Rich,
> >
> > OK, I have finally connected up the alpha support properly through
> > the warp architecture - at least I think I have.  It is now possible
> > to overlay an image with alpha values on another image with alpha values
> > and get proper mixing, and proper setting of merged alpha values in the
> > output image.
> >
> > You might want to grab a nightly snapshot or build from CVS if you are
> > interested in taking advantage of this.
> >
> > gdalwarp now has -srcalpha and -dstalpha switches. -srcalpha will be
> > implicitly enabled if the last band of thei input file is recognised as
> > being an alpha band.  Likewise -dstalpha will be automatically set if the
> > destination file already exists, and the last band (or perhaps the next
> > band after the bands being transferred?) is marked as an alpha band.
> >
> > If you are creating an output file and want an alpha band you need to set
> > the -dstalpha explicitly, even if the source file has an alpha band.

Frank,

Following up on a couple things:

1. The new gdalwarp alpha channel support works great. I built on
windows. It does not automatically detect alpha channels created by
Photoshop or AutoCAD CadOverlay, but specifying the  -srcalpha switch
does the trick.

2. In my previous email I described an error : 'UnsignedInt16 is not
defined' when trying to run your Python script under the FWTools0.9.3
binary distribution environment. I have since installed Python 2.3.4,
Numeric 23.6, and built gdal 1.2.4 cvs w/ HAVE_NUMPY=1. The script now
runs, but which of the above changes got it running I am not sure. I
am sort of suspicious of the:
     set PYTHONPATH=%FWTOOLS_DIR%\pymod;%FWTOOLS_DIR%\numpy
line in setfwenv.bat because there is no 'numby' directory.

Thank you very much for your help.

Rich
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From werchowyna at pf.pl  Sun Nov 14 16:03:28 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdal_merge.py hdf aster dem
Message-ID: <001801c4ca8d$ba669120$91e163d9@podyadeck>

Hi!

I have about 40 adjacent hdf Aster DEM files which I want to merge using
gdal_merge.py into one file.

Poblems are:
1 these DEMs are not taken as georeferenced and all the input files are
   being overlayed one on another in the output file which is not
   georeferenced either
2 if 20 or more files are input an error occures:

[ziutek@localhost ziutek]$ gdal_merge.py -o /home/ziutek/aster.tif -of
GTiff -n -150 /mnt/windows/gisdane/aster/dupa/*.hdf
ERROR 2: CPLMalloc(): Out of memory allocating -4 bytes.

Each file is circa 25 MB, I have 512 MB RAM, 4 GB swap and plenty of free
disc space. DEMs are in UTM and are accompanied by *.met files. OpenEV
handles their georeferencing properly but gdalinfo gives a following:

[ziutek@localhost ziutek]$ gdalinfo
/mnt/windows/gisdane/aster/xxx/ASTER_DEM20020507164545.hdf
Driver: HDF4Image/HDF4 Dataset
Size is 2602, 2513
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2513.0)
Upper Right ( 2602.0,    0.0)
Lower Right ( 2602.0, 2513.0)
Center      ( 1301.0, 1256.5)
Band 1 Block=2602x1 Type=Float32, ColorInterp=Gray

Thanks for any suggestions.
Maciek


From neteler at itc.it  Mon Nov 15 10:01:34 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
In-Reply-To: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
Message-ID: <20041115150134.GF3495@thuille.itc.it>

On Sun, Nov 14, 2004 at 04:33:41PM +0100, Maciek Sieczka wrote:
> Hello!
> 
> I tried to build gdal against --with-grass to enble the r.out.gdal for the
> first time.
> 
> 1. built Gdal (CVS 2004_11_13) --without-grass
> 2. built Grass (CVS 2004_11_06) --with-gdal
> 3. make distclean in the Gdal dir, built --with-grass like following:
> 
>     ./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass55
> 
> and got:
> 
>     checking for G_asprintf in -lgrass_gis... no
>     configure: error: --with-grass=/urs/local/grass55 requested, but
>     libraries not found!

Note that GRASS >= 5.7 is needed or libgrass.

pwd
/ssi0/ssi/neteler/grass57/dist.i686-pc-linux-gnu/lib

nm libgrass_gis.so | grep G_asprintf
0000e7c0 T G_asprintf

Markus


From warmerdam at pobox.com  Mon Nov 15 13:15:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: gdalwarp nodata
In-Reply-To: <ae9185aa041114130219c55dc0@mail.gmail.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>	<41965279.3060909@pobox.com>	<ae9185aa0411131038ad88f45@mail.gmail.com>	<41965CEB.4020800@pobox.com>	<ae9185aa04111311276accc87c@mail.gmail.com>	<4196E726.8070105@pobox.com>	<ae9185aa0411140733b86a0cc@mail.gmail.com>
	<ae9185aa041114130219c55dc0@mail.gmail.com>
Message-ID: <4198F253.3060303@pobox.com>

Richard Greenwood wrote:
> Following up on a couple things:
> 
> 1. The new gdalwarp alpha channel support works great. I built on
> windows. It does not automatically detect alpha channels created by
> Photoshop or AutoCAD CadOverlay, but specifying the  -srcalpha switch
> does the trick.

Richard,

Could you provide a sample file to me directly that has this problem?

> 2. In my previous email I described an error : 'UnsignedInt16 is not
> defined' when trying to run your Python script under the FWTools0.9.3
> binary distribution environment. I have since installed Python 2.3.4,
> Numeric 23.6, and built gdal 1.2.4 cvs w/ HAVE_NUMPY=1. The script now
> runs, but which of the above changes got it running I am not sure. I
> am sort of suspicious of the:
>      set PYTHONPATH=%FWTOOLS_DIR%\pymod;%FWTOOLS_DIR%\numpy
> line in setfwenv.bat because there is no 'numby' directory.

This is a problem with the FWtools distributino.  The Numeric tree is
quite old and slightly different names were used for a few things in the
old version as opposed to now. I have a bug report open to fix this, either
to make GDAL handle either gracefully, or to upgrade the FWTools
distribution.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From richard.greenwood at gmail.com  Sat Nov 13 12:37:48 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdalwarp nodata
Message-ID: <ae9185aa0411130937318161@mail.gmail.com>

I am using gdalwarp to merge some images. The images are rgb tiffs. No
data pixels in the source image are r=255 g=255 b=255. I am using:
   -srcnodata  "255 255 255"
This masking seems to operate on a band by band basis, rather than a
pixel by pixel basis. Which is leading to some rather bizarre output
colors. Is my -srcnodata definition correct, or is there some other
way to deal with this?


Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From warmerdam at pobox.com  Mon Nov 15 13:28:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: gdal_merge.py hdf aster dem
In-Reply-To: <001801c4ca8d$ba669120$91e163d9@podyadeck>
References: <001801c4ca8d$ba669120$91e163d9@podyadeck>
Message-ID: <4198F549.3010300@pobox.com>


Maciek Sieczka wrote:
> Hi!
> 
> I have about 40 adjacent hdf Aster DEM files which I want to merge using
> gdal_merge.py into one file.
> 
> Poblems are:
> 1 these DEMs are not taken as georeferenced and all the input files are
>    being overlayed one on another in the output file which is not
>    georeferenced either
> 2 if 20 or more files are input an error occures:
> 
> [ziutek@localhost ziutek]$ gdal_merge.py -o /home/ziutek/aster.tif -of
> GTiff -n -150 /mnt/windows/gisdane/aster/dupa/*.hdf
> ERROR 2: CPLMalloc(): Out of memory allocating -4 bytes.

Maciek,

Hmm, this is odd.  This doesn't look like a real out of memory issue. More
likely a problem with negative window sizes being used somewhere resulting
in a negative memory request.

I will need some sort of configuration that I can use to reproduce this in
order to fix it.

Hmm, I seem to remember a problem vaguely like this before.  You might want
to make sure you are using recent code (perhaps GDAL 1.2.4) before going to
all the effort of submitting a bug report.


> Each file is circa 25 MB, I have 512 MB RAM, 4 GB swap and plenty of free
> disc space. DEMs are in UTM and are accompanied by *.met files. OpenEV
> handles their georeferencing properly but gdalinfo gives a following:

I don't see any obvious reason that OpenEV would have georeferencing for a
file when gdalinfo reports nothing.  This may require some "digging into".
If you can provide one file that demonstrates this issue I can likely
figure out what is wrong.

Of course "gdal_merge"ing a bunch of files isn't going to work properly if
they aren't georeferencined in a supported way unless they happen to all
have exactly the same real-world location and file size.   Note that gdal_merge
does not support GCPs, only north-up geotransforms.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 15 13:35:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: --with-grass
In-Reply-To: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
Message-ID: <4198F703.9040304@pobox.com>

Maciek Sieczka wrote:
> Hello!
> 
> I tried to build gdal against --with-grass to enble the r.out.gdal for the
> first time.
> 
> 1. built Gdal (CVS 2004_11_13) --without-grass
> 2. built Grass (CVS 2004_11_06) --with-gdal
> 3. make distclean in the Gdal dir, built --with-grass like following:
> 
>     ./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass55
> 
> and got:
> 
>     checking for G_asprintf in -lgrass_gis... no
>     configure: error: --with-grass=/urs/local/grass55 requested, but
>     libraries not found!
> 
> Can somebody help me to sort it out?

Maciek,

I think Markus already answered the above part about needing either
GRASS 5.7 (for --with-grass) or libgrass (for --with-libgrass).

> BTW: why does "make uninstall" invoked in the source dir after the
> "./configure, make, make install" doesn't work? Should I give more detailed
> info?

GDAL does not have an uninstall target, and I am not really enthusiastic about
adding one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Mon Nov 15 16:32:32 2004
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: gdalwarp nodata
In-Reply-To: <4198F253.3060303@pobox.com>
References: <ae9185aa04111310217c1df533@mail.gmail.com>
	<41965279.3060909@pobox.com>
	<ae9185aa0411131038ad88f45@mail.gmail.com>
	<41965CEB.4020800@pobox.com>
	<ae9185aa04111311276accc87c@mail.gmail.com>
	<4196E726.8070105@pobox.com>
	<ae9185aa0411140733b86a0cc@mail.gmail.com>
	<ae9185aa041114130219c55dc0@mail.gmail.com>
	<4198F253.3060303@pobox.com>
Message-ID: <ae9185aa041115133225275e7@mail.gmail.com>

On Mon, 15 Nov 2004 13:15:47 -0500, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Richard Greenwood wrote:
> > Following up on a couple things:
> >
> > 1. The new gdalwarp alpha channel support works great. I built on
> > windows. It does not automatically detect alpha channels created by
> > Photoshop or AutoCAD CadOverlay, but specifying the  -srcalpha switch
> > does the trick.
> 
> Richard,
> 
> Could you provide a sample file to me directly that has this problem?

I put a zip file named 'alpha_chanel.zip' at
     http://www.greenwoodmap.com/frank/
with samples tiff's having alpha channels created with Windows
versions of AutoCAD and Photoshop. The zip file has an readme.txt with
some notes.

I also ran into another annomally. The Python script that you created
to set pixels in the alpha channel to transparent where rgb channels
are  255 255 255 seems to set transparency for more pixels that it
should. It appears to set transpareny for pixels that are also very
nearly, but not exactly, 255 255 255, for example 255 253 255, as if
there were some rounding error.  I have included a simple example of
the is the zip file also.

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From werchowyna at pf.pl  Mon Nov 15 16:14:05 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
	<20041115150134.GF3495@thuille.itc.it>
Message-ID: <006601c4cb5e$091bd5c0$c7584cd5@podyadeck>

From: "Markus Neteler" <neteler@itc.it>
To: <gdal-dev@xserve.flids.com>

> > I tried to build gdal against --with-grass to enble the r.out.gdal for
> > the first time.
> > (...)
> >     configure: error: --with-grass=/urs/local/grass55 requested, but
> >     libraries not found!

> Note that GRASS >= 5.7 is needed or libgrass.

I also tried with Grass 5.7 CVS 10_11_2004, built from source:
./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass-5.7.cvs

and got the same:

checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/urs/local/grass-5.7.cvs requested, but
libraries not found!

Maybe there is something missing in my /urs/local/grass-5.7.cvs/lib? Please
take a look.

[ziutek@localhost]$ cd /usr/local/grass-5.7.cvs/lib
[ziutek@localhost lib]$ ls
libgrass_bitmap.so*
libgrass_btree.so*
libgrass_cdhc.so*
libgrass_datetime.so*
libgrass_dbmibase.so*
libgrass_dbmiclient.so*
libgrass_dbmidriver.so*
libgrass_dbstubs.so*
libgrass_dgl.so*
libgrass_dig2.so*
libgrass_display.so*
libgrass_driver.a
libgrass_D.so*
libgrass_dspf.so*
libgrass_edit.so*
libgrass_form.so*
libgrass_g3d.so*
libgrass_gis.so*
libgrass_gmath.so*
libgrass_gproj.so*
libgrass_image.so*
libgrass_interpdata.so*
libgrass_interpfl.so*
libgrass_Iortho.so*
libgrass_ismap.a
libgrass_I.so*
libgrass_linkm.so*
libgrass_manage.a
libgrass_ogsf.so*
libgrass_qtree.so*
libgrass_raster.so*
libgrass_rowio.so*
libgrass_rtree.so*
libgrass_segment.so*
libgrass_shape.so*
libgrass_sites.so*
libgrass_sqlp.so*
libgrass_symb.so*
libgrass_trans.so*
libgrass_vask.so*
libgrass_vect.so*

Maciek


From werchowyna at pf.pl  Mon Nov 15 16:56:25 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] make uninstall (was: Re: --with-grass)
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
	<4198F703.9040304@pobox.com>
Message-ID: <006901c4cb5e$1499bac0$c7584cd5@podyadeck>

> > BTW: why does "make uninstall" invoked in the source dir after the
> > "./configure, make, make install" doesn't work?
>
> GDAL does not have an uninstall target, and I am not really enthusiastic
> about adding one.

So when I build and install a fresh GDAL how do I make sure I got rid of all
the old GDAL's components? Or maybe there is no need to delete all the old
stuff prior to "make install" the new one?

Maciek


From werchowyna at pf.pl  Mon Nov 15 16:19:02 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: gdal_merge.py hdf aster dem
References: <001801c4ca8d$ba669120$91e163d9@podyadeck>
	<4198F549.3010300@pobox.com>
Message-ID: <006701c4cb5e$0a7c5020$c7584cd5@podyadeck>

> > Poblems are:
> > 1 these DEMs are not taken as georeferenced and all the input files are
> >    being overlayed one on another in the output file which is not
> >    georeferenced either
> > 2 if 20 or more files are input an error occures:
> >
> > [ziutek@localhost ziutek]$ gdal_merge.py -o /home/ziutek/aster.tif -of
> > GTiff -n -150 /mnt/windows/gisdane/aster/dupa/*.hdf
> > ERROR 2: CPLMalloc(): Out of memory allocating -4 bytes.

> Maciek,
>
> Hmm, this is odd.  This doesn't look like a real out of memory issue. More
> likely a problem with negative window sizes being used somewhere resulting
> in a negative memory request.
>
> I will need some sort of configuration that I can use to reproduce this in
> order to fix it.

I can email you the data set tomorrow about noon, but it's 420 MB zipped, do
you want it? I'm sorry but I can't put for download anywhere.

Or you may obtain a similar dataset of "Aster relative DEM" for any area via
the http://edcimswww.cr.usgs.gov/pub/imswelcome/, free of charge. It takes
about 0,5-1 hour before they inform you by email that the product is ready
for download via their ftp.

> Hmm, I seem to remember a problem vaguely like this before.  You might
> want to make sure you are using recent code (perhaps GDAL 1.2.4) before
> going to all the effort of submitting a bug report.

I'm currently using CVS 2004_11_13. Should be fresh enough?

> > Each file is circa 25 MB, I have 512 MB RAM, 4 GB swap and plenty of
> > free disc space. DEMs are in UTM and are accompanied by *.met files.
> > OpenEV> handles their georeferencing properly but gdalinfo gives a
> > following:

> I don't see any obvious reason that OpenEV would have georeferencing for a
> file when gdalinfo reports nothing.  This may require some "digging into".
> If you can provide one file that demonstrates this issue I can likely
> figure out what is wrong.

OpenEV handles them fine as UTM so I can eg. overlay UTM vector data for
the same area and they fit (to the extent of the "Aster relative DEM"
georefferencing accuracy). Please see the attached OpenEV screendump.

As I wrote above, I can email any data you need tomorrow about noon. One
such zipped DEM file is 10 MB.

Please let me know what you decided and thanks for your interest in my
problem.

Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dem_river.png
Type: image/png
Size: 24423 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041115/38e4e52e/dem_river.png
From debian at adkgis.org  Mon Nov 15 17:11:31 2004
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
In-Reply-To: <006601c4cb5e$091bd5c0$c7584cd5@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
	<20041115150134.GF3495@thuille.itc.it>
	<006601c4cb5e$091bd5c0$c7584cd5@podyadeck>
Message-ID: <1100556691.3897.12.camel@marcy>

On Mon, 2004-11-15 at 16:14, Maciek Sieczka wrote:
> From: "Markus Neteler" <neteler@itc.it>
> To: <gdal-dev@xserve.flids.com>
> 
> > > I tried to build gdal against --with-grass to enble the r.out.gdal for
> > > the first time.
> > > (...)
> > >     configure: error: --with-grass=/urs/local/grass55 requested, but
> > >     libraries not found!
> 
> > Note that GRASS >= 5.7 is needed or libgrass.
> 
> I also tried with Grass 5.7 CVS 10_11_2004, built from source:
> ./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass-5.7.cvs
Maybe this typo is the problem? ---------------------> ^^^

Regards,
Steve


From warmerdam at pobox.com  Mon Nov 15 17:18:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] make uninstall
In-Reply-To: <006901c4cb5e$1499bac0$c7584cd5@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>	<4198F703.9040304@pobox.com>
	<006901c4cb5e$1499bac0$c7584cd5@podyadeck>
Message-ID: <41992B2D.9090205@pobox.com>

Maciek Sieczka wrote:
> So when I build and install a fresh GDAL how do I make sure I got rid of all
> the old GDAL's components? Or maybe there is no need to delete all the old
> stuff prior to "make install" the new one?

Maciek,

I just generally install right over the old one. There should be few negative
effects from this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Mon Nov 15 17:39:44 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
	<20041115150134.GF3495@thuille.itc.it>
	<006601c4cb5e$091bd5c0$c7584cd5@podyadeck>
	<1100556691.3897.12.camel@marcy>
Message-ID: <001e01c4cb64$2f0f0c60$e9584cd5@podyadeck>

Steve Halasz <debian@adkgis.org> wrote:

> >./configure --with-hdf4 --without-ogdi
> > --with-grass=/urs/local/grass-5.7.cvs
> Maybe this typo is the problem? ---------------------> ^^^

YES, thank you for reading clumsy me! This is not first time when I have
convinced myself that 23:00 is not the right time for me to mess with
software. I promise I won't dare to "make; make install" tonight :).

Maciek


From berkley at nceas.ucsb.edu  Mon Nov 15 20:58:44 2004
From: berkley at nceas.ucsb.edu (Chad Berkley)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] linking error with gdal 1.2.4 dll
Message-ID: <41995ED4.1010108@nceas.ucsb.edu>

Hello,

I'm trying to link code against the gdal12.dll file that is built with 
nmake.  I am getting a linking error from MSVC++6.0 that says: 
c:\GDALBuild\bin\gdal12.dll: fatal error LNK1136: invalid or corrupt 
file.  Error executing link.exe.

I have tried building the dll cleanly several times and I can't figure 
out why VC++6.0 (nmake) builds the dll without error but then won't 
allow me to link against it.  I have tried this with 1.2.4 and 1.2.3 
with the same result.  Has anyone seen this error or know how to fix it?

Thanks in advance for any help.

Chad Berkley
National Center for Ecological Analysis and Synthesis
berkley@nceas.ucsb.edu

From MChapman at sanz.com  Mon Nov 15 22:50:07 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] linking error with gdal 1.2.4 dll
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFE53@mailman.san.com>

Chad,

You need to link to gdal_i.lib.  Then place the gdal12.dll some where in
your path or in the same directory as your exe.  Let me know if that was
the problem.

Martin

-----Original Message-----
From: Chad Berkley [mailto:berkley@nceas.ucsb.edu] 
Sent: Monday, November 15, 2004 6:59 PM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] linking error with gdal 1.2.4 dll


Hello,

I'm trying to link code against the gdal12.dll file that is built with 
nmake.  I am getting a linking error from MSVC++6.0 that says: 
c:\GDALBuild\bin\gdal12.dll: fatal error LNK1136: invalid or corrupt 
file.  Error executing link.exe.

I have tried building the dll cleanly several times and I can't figure 
out why VC++6.0 (nmake) builds the dll without error but then won't 
allow me to link against it.  I have tried this with 1.2.4 and 1.2.3 
with the same result.  Has anyone seen this error or know how to fix it?

Thanks in advance for any help.

Chad Berkley
National Center for Ecological Analysis and Synthesis
berkley@nceas.ucsb.edu _______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From dron at ak4719.spb.edu  Tue Nov 16 01:02:33 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: gdal_merge.py hdf aster dem
In-Reply-To: <006701c4cb5e$0a7c5020$c7584cd5@podyadeck>
References: <001801c4ca8d$ba669120$91e163d9@podyadeck>
	<4198F549.3010300@pobox.com>
	<006701c4cb5e$0a7c5020$c7584cd5@podyadeck>
Message-ID: <20041116060233.GC7489@ak4719.spb.edu>

On Mon, Nov 15, 2004 at 10:19:02PM +0100, Maciek Sieczka wrote:
> > > 1 these DEMs are not taken as georeferenced and all the input files are
> > >    being overlayed one on another in the output file which is not
> > >    georeferenced either
> > > 2 if 20 or more files are input an error occures:
> > >
> > > [ziutek@localhost ziutek]$ gdal_merge.py -o /home/ziutek/aster.tif -of
> > > GTiff -n -150 /mnt/windows/gisdane/aster/dupa/*.hdf
> > > ERROR 2: CPLMalloc(): Out of memory allocating -4 bytes.
> 
> > Hmm, this is odd.  This doesn't look like a real out of memory
> > issue. More likely a problem with negative window sizes being used
> > somewhere resulting in a negative memory request.
> >
> > I will need some sort of configuration that I can use to reproduce
> > this in order to fix it.
> 
> I can email you the data set tomorrow about noon, but it's 420 MB
> zipped, do you want it? I'm sorry but I can't put for download
> anywhere.
> 
> Or you may obtain a similar dataset of "Aster relative DEM" for any
> area via the http://edcimswww.cr.usgs.gov/pub/imswelcome/, free of
> charge. It takes about 0,5-1 hour before they inform you by email that
> the product is ready for download via their ftp.
> 
> > Hmm, I seem to remember a problem vaguely like this before.  You
> > might want to make sure you are using recent code (perhaps GDAL
> > 1.2.4) before going to all the effort of submitting a bug report.
> 
> I'm currently using CVS 2004_11_13. Should be fresh enough?

Maciek,

Please, submit a bugreport assigned to me. That is likely my problem.

							Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From seppo.kaitala at fimr.fi  Tue Nov 16 04:28:28 2004
From: seppo.kaitala at fimr.fi (Seppo Kaitala)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] HDF problems
Message-ID: <4199C83C.3090206@fimr.fi>

I  am new with gdal library and I do not know,if it is working properly. 
I installed  FWTools-0.9.1 under Fedora C2.
I have downloaded hdf files from DAAC server 
http://daac.gsfc.nasa.gov/data/datapool/ and I can open the files with 
HDFLook software.
However, for further development I wold like to load HDF files directly  
to GRASS 5.4 with gdal libraries.
So for testing I exported the geotif file from GRASS and run

 >gdalinfo maa1km.tif
Driver: GTiff/GeoTIFF
Size is 2169, 1422
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1422.0)
Upper Right ( 2169.0,    0.0)
Lower Right ( 2169.0, 1422.0)
Center      ( 1084.5,  711.0)
Band 1 Block=2169x1 Type=Byte, ColorInterp=Red
Band 2 Block=2169x1 Type=Byte, ColorInterp=Green
Band 3 Block=2169x1 Type=Byte, ColorInterp=Blue

So as if it is working properly

But when I try 

 >gdalinfo GSUB1.A2001122.1045.003.2002343183413.hdf
ERROR 4: `GSUB1.A2001122.1045.003.2002343183413.hdf' not recognised as a 
supported file format.
 
GDALOpen failed - 4
`GSUB1.A2001122.1045.003.2002343183413.hdf' not recognised as a 
supported file format.
 >

With HDFLook it works properly showing the information inter alia:
 HDFLook_modis  (Version 4.10B [HDF.4.2.r5])

Do I still miss some libraries, and how I would know that.
How I could get forward?


Best regards

-- 
Seppo Kaitala, Scientist, Ph.D.

Biological Oceanography
Finnish Institute of Marine Research
PO Box 33 (Lyypekinkuja 3 A)
FIN-00931 Helsinki, Finland
tel. +358-9-613941   fax +358-9-6139 4494
email: seppo.kaitala@fimr.fi



From berkley at nceas.ucsb.edu  Tue Nov 16 12:06:19 2004
From: berkley at nceas.ucsb.edu (Chad Berkley)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] linking error with gdal 1.2.4 dll
In-Reply-To: <ED3A48B9840E594890A2BC172D11946501CFFE53@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946501CFFE53@mailman.san.com>
Message-ID: <419A338B.9050601@nceas.ucsb.edu>

Great!  That worked.  Thanks a lot.

chad

Chapman, Martin wrote:
> Chad,
> 
> You need to link to gdal_i.lib.  Then place the gdal12.dll some where in
> your path or in the same directory as your exe.  Let me know if that was
> the problem.
> 
> Martin
> 
> -----Original Message-----
> From: Chad Berkley [mailto:berkley@nceas.ucsb.edu] 
> Sent: Monday, November 15, 2004 6:59 PM
> To: gdal-dev@xserve.flids.com
> Subject: [Gdal-dev] linking error with gdal 1.2.4 dll
> 
> 
> Hello,
> 
> I'm trying to link code against the gdal12.dll file that is built with 
> nmake.  I am getting a linking error from MSVC++6.0 that says: 
> c:\GDALBuild\bin\gdal12.dll: fatal error LNK1136: invalid or corrupt 
> file.  Error executing link.exe.
> 
> I have tried building the dll cleanly several times and I can't figure 
> out why VC++6.0 (nmake) builds the dll without error but then won't 
> allow me to link against it.  I have tried this with 1.2.4 and 1.2.3 
> with the same result.  Has anyone seen this error or know how to fix it?
> 
> Thanks in advance for any help.
> 
> Chad Berkley
> National Center for Ecological Analysis and Synthesis
> berkley@nceas.ucsb.edu _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From werchowyna at pf.pl  Tue Nov 16 15:20:18 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>
	<20041115150134.GF3495@thuille.itc.it>
Message-ID: <003e01c4cc1b$d387eb60$eae163d9@podyadeck>

From: "Markus Neteler" <neteler@itc.it>

> Note that GRASS >= 5.7 is needed or libgrass.

Frank

could you put a remark on this in the GDAL's "./configure --help" output?

so far it is not saying that --with-grass is supposed only for >=5.7:

./configure --help | grep GRASS
  --with-grass=ARG      Include GRASS support (ARG=GRASS install tree dir)
  --with-libgrass=ARG    Include GRASS support based on libgrass (GRASS 5.0)

Maciek


From warmerdam at pobox.com  Tue Nov 16 16:03:36 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
In-Reply-To: <003e01c4cc1b$d387eb60$eae163d9@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>	<20041115150134.GF3495@thuille.itc.it>
	<003e01c4cc1b$d387eb60$eae163d9@podyadeck>
Message-ID: <419A6B28.5000208@pobox.com>

Maciek Sieczka wrote:
> From: "Markus Neteler" <neteler@itc.it>
> 
>>Note that GRASS >= 5.7 is needed or libgrass.
> 
> 
> Frank
> 
> could you put a remark on this in the GDAL's "./configure --help" output?
> 
> so far it is not saying that --with-grass is supposed only for >=5.7:
> 
> ./configure --help | grep GRASS
>   --with-grass=ARG      Include GRASS support (ARG=GRASS install tree dir)
>   --with-libgrass=ARG    Include GRASS support based on libgrass (GRASS 5.0)

OK, i'm applying that change now.


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sebastien.grignard at archivideo.com  Wed Nov 17 05:21:06 2004
From: sebastien.grignard at archivideo.com (Sebastien Grignard)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] .tab file support for jpeg format
Message-ID: <419B2612.90301@archivideo.com>

Hello all.
I've added support for reading georeferences from MapInfo .tab files in 
the jpeg driver.
The code has been taken from the GeoTiff driver so it should support the 
same file parameters.
Included is the diff against the current cvs.

-- 
Sebastien Grignard
R&D Developer
Archivideo
40, rue des Veyettes - 35000 Rennes FRANCE
Phone: +033 2 99 86 30 20

-------------- next part --------------
Index: jpgdataset.cpp
===================================================================
RCS file: /cvs/maptools/cvsroot/gdal/frmts/jpeg/jpgdataset.cpp,v
retrieving revision 1.17
diff -r1.17 jpgdataset.cpp
114a115
>     char   *pszProjection;
254a256,257
> 
>     pszProjection = NULL;
273a277,280
> 
>     if( pszProjection != NULL )
>         CPLFree( pszProjection );
> 
456a464,466
>     int		nGCPCount = 0;
>     GDAL_GCP	*pasGCPList = NULL;
>     char* pszTabWKT = NULL;
463,464c473,478
<                               poDS->adfGeoTransform );
< 
---
>                               poDS->adfGeoTransform )
>         || (GDALReadTabFile(poOpenInfo->pszFilename, poDS->adfGeoTransform, 
>                            &pszTabWKT, &nGCPCount, &pasGCPList) && nGCPCount==0);
>     if ( pszTabWKT != NULL )
>         poDS->pszProjection = pszTabWKT;
>     
From halset at pvv.ntnu.no  Wed Nov 17 09:05:09 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] trouble loading s57 into postgis
Message-ID: <B106D978-38A1-11D9-9926-000A95CD827E@pvv.ntnu.no>

Hello.

I have upgraded my database and gis tools to postgresql-8.0.0b4, 
postgis-0.9.0 and gdal-1.2.4.

I get a sql error when I try to import a NOAA ENC into postgis using 
ogr2ogr. Here is the output from postgresql log:

LOG:  statement: INSERT INTO "bcnlat" (wkb_geometry , "rcid", "prim", 
"grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "lnam_refs", 
"ffpt_rind", "bcnshp", "catlam", "colour", "objnam", "status", 
"scamin", "sordat", "sorind") VALUES (GeometryFromText('POINT 
(-97.49502700 27.83072200)'::TEXT,1) , 2, 1, 2, 7, 1, 550, 262591846, 
1161, '02260FA6D5660489', '(2:02260FA6D6040', '{', 4, 2, '', 'Viola 
Channel Light 2', '1', 120000, '19980407', 'US,US,reprt,8thCGD,LNM 
14/98')
ERROR:  malformed array literal: "{"

looks like ogr2ogr tries to put '{' into a integer[].

Regards,
  - Tore.


From mtperry78 at sbcglobal.net  Tue Nov 16 22:55:10 2004
From: mtperry78 at sbcglobal.net (Matthew Perry)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL install help 
Message-ID: <20041117035510.47871.qmail@web80104.mail.yahoo.com>

Hi folks,

   We're trying to get OpenDAP/Mapserver integration
here at Humboldt State University for the CI-CORE
project (Center for Integrative Coastal Observation,
Research and Education).

I have been using GDAL for a while but never had to
install it before. We're trying for GDAL 1.2.4 with
DODS support. I am testing it on a Slackware Linux PC
server. I run the following configure::

./configure --with-dods-root=/usr/local/DODS
--with-pg=/usr/local/pgsql/bin/pg_config
--with-geos=/usr/local/bin/geos-config 
--with-prefix=/usr/local 

and all looks well. When I run make, I get a make
error::

make[1]: Entering directory
`/usr/local/src/gdal-1.2.4/gcore'
g++ -c   -DINST_DATA=\"\" \
        gdaldrivermanager.cpp -o gdaldrivermanager.o
gdaldrivermanager.cpp: In destructor `virtual 
   GDALDriverManager::~GDALDriverManager()':
gdaldrivermanager.cpp:209: `CPLFreeConfig' undeclared
(first use this function)
gdaldrivermanager.cpp:209: (Each undeclared identifier
is reported only once 
   for each function it appears in.)
gdaldrivermanager.cpp:215: `OSRCleanup' undeclared
(first use this function)
make[1]: *** [gdaldrivermanager.o] Error 1
make[1]: Leaving directory
`/usr/local/src/gdal-1.2.4/gcore'
make: *** [core-target] Error 2

The problem is that it can't find $(INST_DATA), right?
Do you have any suggestions about where I might begin
my research?? Or is there just something obvious that
I'm missing? 

Any help would be really appreciated.

Matthew Perry
Humboldt State University


 

From g_bellido at yahoo.es  Wed Nov 17 11:03:41 2004
From: g_bellido at yahoo.es (=?iso-8859-1?q?Gabriel=20Bellido=20P=E9rez?=)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
Message-ID: <20041117160341.30847.qmail@web25203.mail.ukl.yahoo.com>

Hello, 
?
Im working in a GIS program using Java, JTS and Jump.
Im interested in using JPEG2000. GDAL seems a good
choice. I haven't found any library working with
GeoJP2 in JAVA and GDAL seems to work in Linux and
Windows, the two plattaforms im interested in. 

Has anyone written a GDAL JNI wrapper for Java? 

Any help on this subject will be welcome.

Thanks :)

Gabriel



	
	
		
______________________________________________
Renovamos el Correo Yahoo!: ?100 MB GRATIS!
Nuevos servicios, m?s seguridad
http://correo.yahoo.es

From sevilla_lui at gva.es  Wed Nov 17 11:57:38 2004
From: sevilla_lui at gva.es (Luis W. Sevilla)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
In-Reply-To: <20041117160341.30847.qmail@web25203.mail.ukl.yahoo.com>
References: <20041117160341.30847.qmail@web25203.mail.ukl.yahoo.com>
Message-ID: <1100710658.419b83022fa3b@webmail.gva.es>

Hi Gabriel,
Mensaje citado por Gabriel Bellido P?rez <g_bellido@yahoo.es>:

> Hello, 
>  
> Im working in a GIS program using Java, JTS and Jump.
> Im interested in using JPEG2000. GDAL seems a good
> choice. I haven't found any library working with
> GeoJP2 in JAVA and GDAL seems to work in Linux and
> Windows, the two plattaforms im interested in. 
> 
> Has anyone written a GDAL JNI wrapper for Java? 
We're working on it right now. In a few days will be available a preliminary
work of jgdal, gdal java bindings. At present we're writing some small docs.

By the way, maybe our GIS project (follow the url at my signature's) will be
interesting enough to you to collaborate.

  greetings
     Luis

  Luis W. Sevilla
  Equipo de desarrollo gvSIG
  http://www.gvsig.gva.es
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Espa?a



From ealpert at digitalglobe.com  Wed Nov 17 12:05:44 2004
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB16017B1908@COMAIL01.digitalglobe.com>



I'd like to look at what you're working on but I'm an ignorant American....got anything written up in English ;)

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com [mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Luis W. Sevilla
Sent: Wednesday, November 17, 2004 9:58 AM
To: Gabriel Bellido P?rez
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] GDAL JNI wrapper


Hi Gabriel,
Mensaje citado por Gabriel Bellido P?rez <g_bellido@yahoo.es>:

> Hello,
>  
> Im working in a GIS program using Java, JTS and Jump.
> Im interested in using JPEG2000. GDAL seems a good
> choice. I haven't found any library working with
> GeoJP2 in JAVA and GDAL seems to work in Linux and
> Windows, the two plattaforms im interested in.
> 
> Has anyone written a GDAL JNI wrapper for Java?
We're working on it right now. In a few days will be available a preliminary work of jgdal, gdal java bindings. At present we're writing some small docs.

By the way, maybe our GIS project (follow the url at my signature's) will be interesting enough to you to collaborate.

  greetings
     Luis

  Luis W. Sevilla
  Equipo de desarrollo gvSIG
  http://www.gvsig.gva.es
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Espa?a


_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Nov 17 13:04:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] --with-grass
In-Reply-To: <006601c4cb5e$091bd5c0$c7584cd5@podyadeck>
References: <015f01c4ca5f$9db671e0$dde163d9@podyadeck>	<20041115150134.GF3495@thuille.itc.it>
	<006601c4cb5e$091bd5c0$c7584cd5@podyadeck>
Message-ID: <419B92BC.1090800@pobox.com>

Maciek Sieczka wrote:
> I also tried with Grass 5.7 CVS 10_11_2004, built from source:
> ./configure --with-hdf4 --without-ogdi --with-grass=/urs/local/grass-5.7.cvs
> 
> and got the same:
> 
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/urs/local/grass-5.7.cvs requested, but
> libraries not found!
> 
> Maybe there is something missing in my /urs/local/grass-5.7.cvs/lib? Please
> take a look.

Maciek,

Your set of libraries looks fine.  I suspect there is some sort of poorly
understood dependency.  The config.log file should have some details on
why the grass57 check failed.  Can you email it directly to me?

Thanks,\
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From berkley at nceas.ucsb.edu  Wed Nov 17 14:05:06 2004
From: berkley at nceas.ucsb.edu (Chad Berkley)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
Message-ID: <419BA0E2.4060900@nceas.ucsb.edu>

Hello,

We are also working on JNI bindings for gdal...especially gdal_translate 
at this point.  I'd be interrested in helping out on a project that is 
trying to write jni wrappers for more than just gdal_translate as we are 
trying to write GIS support for our workflow execution system kepler 
(www.kepler-project.org).  If anyone would like to see the work we've 
already done or suggest other implementations let me know.

chad berkley

From sevilla_lui at gva.es  Wed Nov 17 14:44:34 2004
From: sevilla_lui at gva.es (Luis W. Sevilla)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
In-Reply-To: <1FB6937A87F9074C9A2B8F9D9137EB16017B1908@COMAIL01.digitalglobe.com>
References: <1FB6937A87F9074C9A2B8F9D9137EB16017B1908@COMAIL01.digitalglobe.com>
Message-ID: <1100720674.419baa225556d@webmail.gva.es>

Hi,
Mensaje citado por Ethan Alpert <ealpert@digitalglobe.com>:
> I'd like to look at what you're working on but I'm an ignorant
> American....got anything written up in English ;)

  Right now the only documentation in english will be a readme.txt file
explaining the status of the development. All javadocs are writen in spanish,
but we've done (IMO) a clean work and with an example current funcioning will
be ease of use (initial version has only a few gdal functionalities).

  Of course, jgdal will be GPL and open to translation/modification.
> 
> -----Original Message-----
> From: gdal-dev-bounces@xserve.flids.com
> [mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Luis W. Sevilla
> Sent: Wednesday, November 17, 2004 9:58 AM
> To: Gabriel Bellido P?rez
> Cc: gdal-dev@xserve.flids.com
> Subject: Re: [Gdal-dev] GDAL JNI wrapper
> 
> 
> Hi Gabriel,
> Mensaje citado por Gabriel Bellido P?rez <g_bellido@yahoo.es>:
> 
> > Hello,
> >  
> > Im working in a GIS program using Java, JTS and Jump.
> > Im interested in using JPEG2000. GDAL seems a good
> > choice. I haven't found any library working with
> > GeoJP2 in JAVA and GDAL seems to work in Linux and
> > Windows, the two plattaforms im interested in.
> > 
> > Has anyone written a GDAL JNI wrapper for Java?
> We're working on it right now. In a few days will be available a preliminary
> work of jgdal, gdal java bindings. At present we're writing some small docs.
> 
> By the way, maybe our GIS project (follow the url at my signature's) will be
> interesting enough to you to collaborate.
> 

  Luis W. Sevilla
  Equipo de desarrollo gvSIG
  http://www.gvsig.gva.es
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Espa?a



From hi_ono2001 at ybb.ne.jp  Wed Nov 17 15:44:11 2004
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
References: <1FB6937A87F9074C9A2B8F9D9137EB16017B1908@COMAIL01.digitalglobe.com>
	<1100720674.419baa225556d@webmail.gva.es>
Message-ID: <000601c4cce6$318a2d20$528001db@webgis>

 Do you use swig?


> Hi,
> Mensaje citado por Ethan Alpert <ealpert@digitalglobe.com>:
>> I'd like to look at what you're working on but I'm an ignorant
>> American....got anything written up in English ;)
>
>  Right now the only documentation in english will be a readme.txt file
> explaining the status of the development. All javadocs are writen in 
> spanish,
> but we've done (IMO) a clean work and with an example current funcioning 
> will
> be ease of use (initial version has only a few gdal functionalities).
>
>  Of course, jgdal will be GPL and open to translation/modification.
>>


From t.r.decarlo at larc.nasa.gov  Wed Nov 17 16:19:34 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Problem compiling under VS.NET
Message-ID: <017f01c4cceb$227b18d0$959877c6@cts1149>

Hi all,
I downloaded last night's tarball and found that I cannot compile using
VS.NET'03. The crash occurs in frmts/gtiff

C:\SVS_DE~1\GDAL-C~2\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc   &&
    cd ..
  cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff 
    -Ilibgeotiff /c geotiff.cpp
geotiff.cpp
libtiff\tiffio.h(498) : fatal error C1083: Cannot open include file:
    'iostream.h': No such file or directory
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

I think the problem is iostream.h is now called iostream (with no
extension). There are many other similar changes. Can someone tell me how to
get this to compile with VS.NET?

Thanks,
Thom



From sevilla_lui at gva.es  Wed Nov 17 16:51:16 2004
From: sevilla_lui at gva.es (Luis W. Sevilla)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL JNI wrapper
In-Reply-To: <000601c4cce6$318a2d20$528001db@webgis>
References: <1FB6937A87F9074C9A2B8F9D9137EB16017B1908@COMAIL01.digitalglobe.com>
	<1100720674.419baa225556d@webmail.gva.es>
	<000601c4cce6$318a2d20$528001db@webgis>
Message-ID: <1100728276.419bc7d43f5ee@webmail.gva.es>

Mensaje citado por Hisaji ONO <hi_ono2001@ybb.ne.jp>:

>  Do you use swig?
No, we're doing from scrach using JNI. We've being evaluating swing, but found
no real benefices. We're doing a 'gdal a la java' object model, more like
python wrapper than following c++ naming and objects conventions.
 
> 
> 
> > Hi,
> > Mensaje citado por Ethan Alpert <ealpert@digitalglobe.com>:
> >> I'd like to look at what you're working on but I'm an ignorant
> >> American....got anything written up in English ;)
> >
> >  Right now the only documentation in english will be a readme.txt file
> > explaining the status of the development. All javadocs are writen in 
> > spanish,
> > but we've done (IMO) a clean work and with an example current funcioning 
> > will
> > be ease of use (initial version has only a few gdal functionalities).
> >
> >  Of course, jgdal will be GPL and open to translation/modification.
> >>
> 
> 


  Luis W. Sevilla
  Equipo de desarrollo gvSIG
  http://www.gvsig.gva.es
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Espa?a



From jason.hughes at elantech-inc.com  Wed Nov 17 18:04:11 2004
From: jason.hughes at elantech-inc.com (Jason Hughes)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: Re: GDALWarp - NO_DATA   Replace?
References: <cn0sp7$t3k$1@sea.gmane.org>
	<41941D7B.5020308@pobox.com><cn2osd$888$1@sea.gmane.org>
	<4194EBCF.6000607@pobox.com>
Message-ID: <cngld9$srr$1@sea.gmane.org>

Frank - To use pfnPreWarpChunkProcessor do I have to set dfWarpMemoryLimit 
in order to know what the chunk size is to process the chunk myself?  Or is 
there another way to get the chunk size without setting it?

Thanks,
Jason

"Frank Warmerdam" <warmerdam@pobox.com> wrote in message 
news:4194EBCF.6000607@pobox.com...
> Jason Hughes wrote:
>> Frank - Basicially I'm redrawing the image pixel by pixel onto a 
>> mapsurface. For example when warping I set the dstnodata = 0.  Then I 
>> paint this onto the map skipping pixels of that value.  As to not get my 
>> image pixels confused with the background before I warp it I create a 
>> copy in which I set every pixel with that value to +1.  I suppose I could 
>> also do this with a 4th raster band but sometimes we work with high 
>> resolution data over a large area which would make for an even bigger 
>> file and slow my processing time when rescaling for the different zoom 
>> levels.
>>
>> I was wondering could there be a way to replace my pixel values that 
>> match the background during the warping operation as to not create a 
>> third file or 4th raster band.  I create the intermediate file so I do 
>> not modfiy the original image.
>
> Jason,
>
> Ah yes, I see.  You would like to set a -dstnodata, but you also want to
> slightly alter any input pixels that would match it so they won't be
> seen as nodata at the end.
>
> On the one hand this seems like a very specialized case, but on the other
> I can imagine it coming up fairly often.
>
> There isn't any way of doing this now with gdalwarp.  Normally I would 
> advise
> you to do the remapping as a preprocessing step, and then run gdalwarp.
>
> However, you could also construct your own version of "gdalwarp" that did
> do this for you if performance is of the essence.
>
> There is a hook in the GDALWarpOptions for a pfnPreWarpChunkProcessor 
> function.
> You could install a function that would make one pass over the incoming 
> image
> data and convert all zeros to ones for instance.
>
> Other than that the program could be the same as gdalwarp.
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent 




From MChapman at sanz.com  Wed Nov 17 19:37:04 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Problem compiling under VS.NET
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFE5D@mailman.san.com>

Download the zip file for windows, unzip to c:\gdal, and change the
GDAL_HOME in the nmake.opt to c:\gdal.  Then run the compiler as
specified in the build instructions for windows on the gdal site.  Let
me know if that works.

Martin 

-----Original Message-----
From: Thom DeCarlo [mailto:t.r.decarlo@larc.nasa.gov] 
Sent: Wednesday, November 17, 2004 2:20 PM
To: 'GDAL developers'
Subject: [Gdal-dev] Problem compiling under VS.NET


Hi all,
I downloaded last night's tarball and found that I cannot compile using
VS.NET'03. The crash occurs in frmts/gtiff

C:\SVS_DE~1\GDAL-C~2\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
&&
    cd ..
  cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff 
    -Ilibgeotiff /c geotiff.cpp
geotiff.cpp
libtiff\tiffio.h(498) : fatal error C1083: Cannot open include file:
    'iostream.h': No such file or directory
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

I think the problem is iostream.h is now called iostream (with no
extension). There are many other similar changes. Can someone tell me
how to get this to compile with VS.NET?

Thanks,
Thom


_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From pgao at esri.com  Wed Nov 17 20:14:58 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re: MrSID Driver performances
References: <6.1.1.1.0.20041006093212.06badde0@pop3>
Message-ID: <loom.20041118T020514-595@post.gmane.org>

Julien Demaria <dem <at> acri-st.fr> writes:

> 
> Hi,
> 
> First, Andrey thanks a lot for implementing block caching in the driver for 
> DSDK 4.xx, now decompress an RGB MrSID file is very faster ! 
> 
> I've made some tests on performances with the 4.xx driver on a big 
> 10000x10000 MrSID RGB file.
> The file has the version 1.0.1 (with mrsidinfo) and I suppose this is an 
> MG2 file ; I haven't got any big MrSID MG3 file for testing...
> 
> I found that the driver can be improved a lot simply by changing the blocks 
> size to 256x256 instead strips calculated with the 
> poImageReader->getStripHeight() DSDK method.
> With this changes my tests seem to be between 2 and 3 times more faster !
> 
> My tests are (on Win32 and Solaris) :
> - gdal_translate execution time
> - OpenEV visualisation (it's faster and more reactive)
> - a sort of gdal_translate in our software
> - visualisation time in our software
> 

Is there any progress made on this? Using a strip may be good for 
format translation,  but not so for viewing where the rectanglar
display is much smaller than the size of the image. I did some
GDAL performance test, it performs well for JP2 and Imagine, but
much slower for MrSID than another package I am using, even after I changed
the block size to the similar rectangler size. Is there any plan for a 
performance tuning?

Thanks,
Gao, Peng


From wlx at mygis.org  Thu Nov 18 03:50:58 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Re:  HDF problems
In-Reply-To: <4199C83C.3090206@fimr.fi>
Message-ID: <20041118085136.2EAB848572E@xserve.flids.com>

 

Your gdal's compile isn't active the hdf4 support, the default compilation
isn't include it.
> I  am new with gdal library and I do not know,if it is 
> working properly. 
> I installed  FWTools-0.9.1 under Fedora C2.
> I have downloaded hdf files from DAAC server 
> http://daac.gsfc.nasa.gov/data/datapool/ and I can open the 
> files with HDFLook software.
> However, for further development I wold like to load HDF 
> files directly to GRASS 5.4 with gdal libraries.
> So for testing I exported the geotif file from GRASS and run
> 
>  >gdalinfo maa1km.tif
> Driver: GTiff/GeoTIFF
> Size is 2169, 1422
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 1422.0)
> Upper Right ( 2169.0,    0.0)
> Lower Right ( 2169.0, 1422.0)
> Center      ( 1084.5,  711.0)
> Band 1 Block=2169x1 Type=Byte, ColorInterp=Red Band 2 
> Block=2169x1 Type=Byte, ColorInterp=Green Band 3 Block=2169x1 
> Type=Byte, ColorInterp=Blue
> 
> So as if it is working properly
> 
> But when I try 
> 
>  >gdalinfo GSUB1.A2001122.1045.003.2002343183413.hdf
> ERROR 4: `GSUB1.A2001122.1045.003.2002343183413.hdf' not 
> recognised as a supported file format.
>  
> GDALOpen failed - 4
> `GSUB1.A2001122.1045.003.2002343183413.hdf' not recognised as 
> a supported file format.
>  >
> 
> With HDFLook it works properly showing the information inter alia:
>  HDFLook_modis  (Version 4.10B [HDF.4.2.r5])
> 
> Do I still miss some libraries, and how I would know that.
> How I could get forward?
> 
> 
> Best regards
> 
> --
> Seppo Kaitala, Scientist, Ph.D.
> 
> Biological Oceanography
> Finnish Institute of Marine Research
> PO Box 33 (Lyypekinkuja 3 A)
> FIN-00931 Helsinki, Finland
> tel. +358-9-613941   fax +358-9-6139 4494
> email: seppo.kaitala@fimr.fi
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 




From pgao at esri.com  Thu Nov 18 09:45:23 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] MrSid Driver performance
Message-ID: <loom.20041118T154101-365@post.gmane.org>

Julien Demaria <dem <at> acri-st.fr> writes:

> 
> Hi,
> 
> First, Andrey thanks a lot for implementing block caching in the driver for 
> DSDK 4.xx, now decompress an RGB MrSID file is very faster ! 
> 
> I've made some tests on performances with the 4.xx driver on a big 
> 10000x10000 MrSID RGB file.
> The file has the version 1.0.1 (with mrsidinfo) and I suppose this is an 
> MG2 file ; I haven't got any big MrSID MG3 file for testing...
> 
> I found that the driver can be improved a lot simply by changing the blocks 
> size to 256x256 instead strips calculated with the 
> poImageReader->getStripHeight() DSDK method.
> With this changes my tests seem to be between 2 and 3 times more faster !
> 
> My tests are (on Win32 and Solaris) :
> - gdal_translate execution time
> - OpenEV visualisation (it's faster and more reactive)
> - a sort of gdal_translate in our software
> - visualisation time in our software
> 

I fisrt posted this as a followup, but it was buried in many old posts.

Is there any progress made on this? Using a strip may be good for 
format translation,  but not so for viewing where the rectanglar
display is much smaller than the size of the image. I did some
GDAL performance test, it performs well for JP2 and Imagine, but
much slower for MrSID than another package I am using, even after I changed
the block size to the similar rectangler size. Is there any plan for a 
performance tuning?

Thanks,
Gao, Peng




From t.r.decarlo at larc.nasa.gov  Thu Nov 18 10:06:57 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Problem compiling under VS.NET
In-Reply-To: <ED3A48B9840E594890A2BC172D11946501CFFE5D@mailman.san.com>
Message-ID: <019e01c4cd80$3f82a110$959877c6@cts1149>

Tried that. I've recently "upgraded" from VS6 to VS.NET and this might be
the first time I've tried to recompile gdal using the new compiler.

It looks like I don't have a full installation of the compiler. The old
iostream libraries and headers (iostream.h, fstream.h, strstream.h, etc.)
don't exist anywhere in my computer. The new, ANSI Standard headers (without
the .h extension) are in the Vc7/include directory. But, of course, it's not
as easy as simply removing the ".h" from the #include line. The compiler
then complains about:
   C++ exception handler used, but unwind semantics are not enabled. Specify
/EHsc

Any other ideas?

Thom

--
Thom DeCarlo
---------------------------------------------------------
If you love sausage or government, you should never 
witness the creation of either.     -Goethe

> -----Original Message-----
> From: Chapman, Martin
> Sent: Wednesday, November 17, 2004 7:37 PM
> To: Thom DeCarlo; GDAL developers
> Subject: RE: [Gdal-dev] Problem compiling under VS.NET
> 
> Download the zip file for windows, unzip to c:\gdal, and change the
> GDAL_HOME in the nmake.opt to c:\gdal.  Then run the compiler as
> specified in the build instructions for windows on the gdal site.  Let
> me know if that works.
> 
> Martin
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Wednesday, November 17, 2004 2:20 PM
> To: 'GDAL developers'
> Subject: [Gdal-dev] Problem compiling under VS.NET
> 
> 
> Hi all,
> I downloaded last night's tarball and found that I cannot compile using
> VS.NET'03. The crash occurs in frmts/gtiff
> 
> C:\SVS_DE~1\GDAL-C~2\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
> &&
>     cd ..
>   cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff
>     -Ilibgeotiff /c geotiff.cpp
> geotiff.cpp
> libtiff\tiffio.h(498) : fatal error C1083: Cannot open include file:
>     'iostream.h': No such file or directory
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
> 
> I think the problem is iostream.h is now called iostream (with no
> extension). There are many other similar changes. Can someone tell me
> how to get this to compile with VS.NET?
> 
> Thanks,
> Thom
> 



From pgao at esri.com  Thu Nov 18 11:00:01 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] prj string problem
Message-ID: <loom.20041118T165358-285@post.gmane.org>

I have a tiff image and gdalinfo returns the following prj string:

PROJCS["unnamed",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26986"]]


ESRI ArcGIS software does not accept the prj string. One reason could be
the PROJECTION parameter is missing from the PROJCS definition. According 
to the WKT spec at 
http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/doc-
files/WKT.html,

PROJECTION is not optional within a PROJCS. How should I fix this?

Thanks,
Gao, Peng


From EZS at Syncera-ITSolutions.NL  Thu Nov 18 11:10:06 2004
From: EZS at Syncera-ITSolutions.NL (Emil Zegers)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] How to work with Intergraph RGB files?
Message-ID: <s19cd77a.039@syncera.nl>

Hello,

I have aerial pix in in RGB format which seem to be Intergraph RGB files.

In the first part of the file (header?) there is a relate to an accompanying DGN file.

Is it possible to convert this file format to another raster format like TIF or JPEG using the GDAL tools?

Best regards,

Emil



From normanb at comsine.co.uk  Thu Nov 18 11:23:24 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] GDAL error diffusion
Message-ID: <419CCC7C.2000205@comsine.co.uk>

Hi,

I am using the python bindings for GDAL.  I am performing correction on 
the image, but I can't
find any way of call an interpolation function on the image to perform 
error diffusion since
the result has gaps. I am thinking of the way you can do bilinear 
interpolation with gdal_translate.

Thanks,
Norman

sorry for the repost, I found I was kicked off the list!!

From jason.hughes at elantech-inc.com  Thu Nov 18 11:37:05 2004
From: jason.hughes at elantech-inc.com (Jason Hughes)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] pfnPreWarpChunkProcessor
Message-ID: <cnij3d$tkc$1@sea.gmane.org>

I was looking into using this hook.  Is there a reason this is called twice 
for large files?  Does that mean I only get part of the image in 
pKern->papabySrcImage?  How should i loop through this data member? I do 
know the papabySrcImage[band][data] 




From t.r.decarlo at larc.nasa.gov  Thu Nov 18 12:07:26 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Problem compiling under VS.NET
In-Reply-To: <019e01c4cd80$3f82a110$959877c6@cts1149>
Message-ID: <01a501c4cd91$14606470$959877c6@cts1149>

Ok, I think I found a problem. Something changed in frmts/gtiff/libtiff
between the time I grabbed the tarball on 12OCT04 and the tarball from
yesterday. The "#include <iostream.h>" was added to tiffio.h during that
month. 

I found <iostream> in 4 different files within gdal, but <iostream.h> is
only in tiffio.h. Isn't mixing ANSI Standard and Non-ANSI libraries
verboten?

Can someone tell me what is needed to get the new version of gtiff to
compile?

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
       The squeaky wheel gets the grease. 
     It is also the first one to be replaced.

> -----Original Message-----
> From: Thom DeCarlo
> Sent: Thursday, November 18, 2004 10:07 AM
> To: 'GDAL developers'
> Subject: RE: [Gdal-dev] Problem compiling under VS.NET
> 
> Tried that. I've recently "upgraded" from VS6 to VS.NET and this might be
> the first time I've tried to recompile gdal using the new compiler.
> 
> It looks like I don't have a full installation of the compiler. The old
> iostream libraries and headers (iostream.h, fstream.h, strstream.h, etc.)
> don't exist anywhere in my computer. The new, ANSI Standard headers
> (without
> the .h extension) are in the Vc7/include directory. But, of course, it's
> not
> as easy as simply removing the ".h" from the #include line. The compiler
> then complains about:
>    C++ exception handler used, but unwind semantics are not enabled.
> Specify
> /EHsc
> 
> Any other ideas?
> 
> Thom
> 
> --
> Thom DeCarlo
> ---------------------------------------------------------
> If you love sausage or government, you should never
> witness the creation of either.     -Goethe
> 
> > -----Original Message-----
> > From: Chapman, Martin
> > Sent: Wednesday, November 17, 2004 7:37 PM
> > To: Thom DeCarlo; GDAL developers
> > Subject: RE: [Gdal-dev] Problem compiling under VS.NET
> >
> > Download the zip file for windows, unzip to c:\gdal, and change the
> > GDAL_HOME in the nmake.opt to c:\gdal.  Then run the compiler as
> > specified in the build instructions for windows on the gdal site.  Let
> > me know if that works.
> >
> > Martin
> >
> > -----Original Message-----
> > From: Thom DeCarlo
> > Sent: Wednesday, November 17, 2004 2:20 PM
> > To: 'GDAL developers'
> > Subject: [Gdal-dev] Problem compiling under VS.NET
> >
> >
> > Hi all,
> > I downloaded last night's tarball and found that I cannot compile using
> > VS.NET'03. The crash occurs in frmts/gtiff
> >
> > C:\SVS_DE~1\GDAL-C~2\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
> > &&
> >     cd ..
> >   cl /nologo /Ox /MD -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff
> >     -Ilibgeotiff /c geotiff.cpp
> > geotiff.cpp
> > libtiff\tiffio.h(498) : fatal error C1083: Cannot open include file:
> >     'iostream.h': No such file or directory
> > NMAKE : fatal error U1077: 'cl' : return code '0x2'
> > Stop.
> >
> > I think the problem is iostream.h is now called iostream (with no
> > extension). There are many other similar changes. Can someone tell me
> > how to get this to compile with VS.NET?
> >
> > Thanks,
> > Thom
> >




From t.r.decarlo at larc.nasa.gov  Thu Nov 18 13:35:30 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Problem compiling under VS.NET
In-Reply-To: <EKEJIKAILPONGGENMBGACENBJHAA.nhv@cape.com>
Message-ID: <01b001c4cd9d$61bf19d0$959877c6@cts1149>

Curiouser and curiouser...

I commented out the offending section of tiffio.h and got gtiff to
successfully compile. But, it hit another snag further along in the build.
Within the frmts/vrt section the vrtwarped.cpp is including gdalwarper.h.
That file isn't in the include paths. It is in gdal/alg.

I added to the EXTRAFLAGS variable in frmts/vrt/makefile.vc 

EXTRAFLAGS = 	-I..\raw -I..\..\alg

And this seems to have worked. (or, at least it compiled.)

Thom

OBTW, I cannot get to the maptools.org website to download a new tarball.
The MapTools.org homepage says they are recovering from an attack this
morning.


--
Thom DeCarlo
-------------------------------------------------------
   Man will occasionally stumble over the truth, 
   but most of the time he will pick himself up and continue.
    -- Winston Chruchill

> -----Original Message-----
> From: Norman Vine [mailto:nhv@cape.com]
> Sent: Thursday, November 18, 2004 12:48 PM
> To: Thom DeCarlo
> Subject: RE: [Gdal-dev] Problem compiling under VS.NET
> 
> Thom DeCarlo writes:
> >
> > Ok, I think I found a problem. Something changed in frmts/gtiff/libtiff
> > between the time I grabbed the tarball on 12OCT04 and the tarball from
> > yesterday. The "#include <iostream.h>" was added to tiffio.h during that
> > month.
> >
> > I found <iostream> in 4 different files within gdal, but <iostream.h> is
> > only in tiffio.h. Isn't mixing ANSI Standard and Non-ANSI libraries
> > verboten?
> >
> > Can someone tell me what is needed to get the new version of gtiff to
> > compile?
> 
> Hmm....
> 
> My code repository is from CVS as of 14-Nov-2004
> 
> and it looks to me as if one can comment out that section of tiffio.h
> 
> as results of grepping my GDAL directory shows
> 
> Found 0 lines with R-E "TIFFStream" in d:\src\gdal\**\*.c*
> 
> Found 2 lines with R-E "TIFFStream" in d:\src\gdal\**\*.h*
> d:\src\gdal\frmts\gtiff\libtiff\tiffio.h: extern	TIFF*
> TIFFStreamOpen(const char*, ostream *);
> d:\src\gdal\frmts\gtiff\libtiff\tiffio.h: extern	TIFF*
> TIFFStreamOpen(const char*, istream *);
> 
> ??????
> 
> Norman
> 
> ===== from end of tiffio.h =====
> 
> #if defined(c_plusplus) || defined(__cplusplus)
> # include <iostream.h>
> extern	TIFF* TIFFStreamOpen(const char*, ostream *);
> extern	TIFF* TIFFStreamOpen(const char*, istream *);
> #endif
> 
> 


From warmerdam at pobox.com  Thu Nov 18 15:40:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] gdal.velocet.ca is no more. 
Message-ID: <419D08D5.7070507@pobox.com>

Folks,

I have switched DSL providers today, so the gdal.velocet.ca address will
not continue to work. That is the name for my home server, and it is the
home for a number of my small projects.  The new preferred address for
this server is http://home.gdal.org/ though this will not work properly for
a few more hours as DNS updates take a while to propagate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From pgao at esri.com  Thu Nov 18 18:40:53 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] BuildOverviews()
Message-ID: <loom.20041119T002909-992@post.gmane.org>

I tried to build the overviews on a tiff image, and it failed because
the format does not support building of overviews. What formats are
currently supporting building the overviews (pyramid)? I understand
the overviews if built, are stored in a tiff image with a special
extension .ovr. Are these overview tiffs tiled or scanline based?

Gao, Peng


From MChapman at sanz.com  Fri Nov 19 00:40:29 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] BuildOverviews()
Message-ID: <ED3A48B9840E594890A2BC172D119465E63BEC@mailman.san.com>

Gao,

I've built overviews successfully before for a tif but I can't remember if it was tiled or stripped.  I think I've done both before though.  See the code snippets below if it's any help:

Let me know if it works.
Martin

// this goes some where in your code...
GDALAllRegister();

GDALDataset* m_pDataset = (GDALDataset*) GDALOpen(m_sFileName.c_str(), GA_ReadOnly);
GDALDefaultOverviews* m_pGDALDefaultOverviews = new GDALDefaultOverviews();

if( m_pDataset == NULL )
{
	const char* pszError = CPLGetLastErrorMsg();
	AfxMessageBox(pszError);
	return false;
}
//........


// I use this function to generate the ovr file

void CImagePortDoc::GenerateOverViewFile()
{
	try
	{
		if (!m_pDataset)
			return;
	
		string ovr_file;
		string ovr_name;
		string file = m_sFileName;
		string::size_type pos = file.find('.');

		if (pos == string::npos)
		{
			ovr_file = file + ".ovr";
			ovr_name = file;
		}
		else
		{
			ovr_file.insert(0, file.begin(), &file[pos]);
			ovr_name = ovr_file;
			ovr_file += ".ovr";
		}

		CMainFrame* pMainFrame = (CMainFrame*) AfxGetMainWnd();
		if (pMainFrame->FileExists(ovr_file))
		{
			CString sMessage = _T("The file ");
			sMessage += ovr_file.c_str();
			sMessage += _T(" exists.\nDo you want to overwrite it?");
			if (AfxMessageBox(sMessage, MB_YESNO|MB_ICONQUESTION) == IDNO)
				return;

			DeleteFile(ovr_file.c_str());
		}
		else
		{
			if (AfxMessageBox("Build the overviews?", MB_YESNO|MB_ICONQUESTION) == IDNO)
				return;
		}

		BeginWaitCursor();

		if (!m_pGDALDefaultOverviews->IsInitialized())
			m_pGDALDefaultOverviews->Initialize(m_pDataset, ovr_file.c_str());

		int nOverviewCount = m_pGDALDefaultOverviews->GetOverviewCount(1);

		int* pOverviewList = NULL;
		nOverviewCount = 12;
		pOverviewList = new int[nOverviewCount];
		int nNumberOfBands = m_vBandList.size();
		
		pOverviewList[0] = 2;
		pOverviewList[1] = 4;
		pOverviewList[2] = 8;
		pOverviewList[3] = 16;
		pOverviewList[4] = 32;
		pOverviewList[5] = 64;
		pOverviewList[6] = 128;
		pOverviewList[7] = 256;
		pOverviewList[8] = 512;
		pOverviewList[9] = 1024;
		pOverviewList[10] = 2048;
		pOverviewList[11] = 4096;

		int* pBandList = new int[nNumberOfBands];
		for (int n = 0; n < nNumberOfBands; n++)
			pBandList[n] = n + 1;

		CPLErr err = m_pGDALDefaultOverviews->BuildOverviews(ovr_name.c_str(), "NEAREST", nOverviewCount, pOverviewList, nNumberOfBands, pBandList, GDALDummyProgress, NULL);

		if (pBandList) delete pBandList;
		if (pOverviewList) delete pOverviewList;

		if (err != CE_None)
			return;

		m_vResLevels.clear();
		for (int k = 0; k < nOverviewCount; k++)
			m_vResLevels.push_back(k);

		UpdateAllViews(NULL);

		EndWaitCursor();
	
	}
	catch(...)
	{
		AfxMessageBox("An unspecified error occurred");
	}
}



-----Original Message-----
From:	Gao, Peng [mailto:pgao@esri.com]
Sent:	Thu 11/18/2004 4:40 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	[Gdal-dev] BuildOverviews()
I tried to build the overviews on a tiff image, and it failed because
the format does not support building of overviews. What formats are
currently supporting building the overviews (pyramid)? I understand
the overviews if built, are stored in a tiff image with a special
extension .ovr. Are these overview tiffs tiled or scanline based?

Gao, Peng

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev




From pgao at esri.com  Fri Nov 19 19:44:30 2004
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] BuildOverviews()
Message-ID: <491DC5F3D279CD4EB4B157DDD62237F40479C003@zipwire.esri.com>

Martin,

Thanks for your help. It worked great. The overviews I created are tiled
with block 
size 128x128.

I was using GDALRasterBand::BuildOverviews() on a band and it always
returned error. When
do I ever need to use this call?

Thanks again,
Gao, Peng

> -----Original Message-----
> From: Chapman, Martin [mailto:MChapman@sanz.com]
> Sent: Thursday, November 18, 2004 9:40 PM
> To: Gao, Peng; gdal-dev@remotesensing.org
> Subject: RE: [Gdal-dev] BuildOverviews()
> 
> 
> Gao,
> 
> I've built overviews successfully before for a tif but I 
> can't remember if it was tiled or stripped.  I think I've 
> done both before though.  See the code snippets below if it's 
> any help:
> 
> Let me know if it works.
> Martin
> 
> // this goes some where in your code...
> GDALAllRegister();
> 
> GDALDataset* m_pDataset = (GDALDataset*) 
> GDALOpen(m_sFileName.c_str(), GA_ReadOnly);
> GDALDefaultOverviews* m_pGDALDefaultOverviews = new 
> GDALDefaultOverviews();
> 
> if( m_pDataset == NULL )
> {
> 	const char* pszError = CPLGetLastErrorMsg();
> 	AfxMessageBox(pszError);
> 	return false;
> }
> //........
> 
> 
> // I use this function to generate the ovr file
> 
> void CImagePortDoc::GenerateOverViewFile()
> {
> 	try
> 	{
> 		if (!m_pDataset)
> 			return;
> 	
> 		string ovr_file;
> 		string ovr_name;
> 		string file = m_sFileName;
> 		string::size_type pos = file.find('.');
> 
> 		if (pos == string::npos)
> 		{
> 			ovr_file = file + ".ovr";
> 			ovr_name = file;
> 		}
> 		else
> 		{
> 			ovr_file.insert(0, file.begin(), &file[pos]);
> 			ovr_name = ovr_file;
> 			ovr_file += ".ovr";
> 		}
> 
> 		CMainFrame* pMainFrame = (CMainFrame*) AfxGetMainWnd();
> 		if (pMainFrame->FileExists(ovr_file))
> 		{
> 			CString sMessage = _T("The file ");
> 			sMessage += ovr_file.c_str();
> 			sMessage += _T(" exists.\nDo you want 
> to overwrite it?");
> 			if (AfxMessageBox(sMessage, 
> MB_YESNO|MB_ICONQUESTION) == IDNO)
> 				return;
> 
> 			DeleteFile(ovr_file.c_str());
> 		}
> 		else
> 		{
> 			if (AfxMessageBox("Build the 
> overviews?", MB_YESNO|MB_ICONQUESTION) == IDNO)
> 				return;
> 		}
> 
> 		BeginWaitCursor();
> 
> 		if (!m_pGDALDefaultOverviews->IsInitialized())
> 			
> m_pGDALDefaultOverviews->Initialize(m_pDataset, ovr_file.c_str());
> 
> 		int nOverviewCount = 
> m_pGDALDefaultOverviews->GetOverviewCount(1);
> 
> 		int* pOverviewList = NULL;
> 		nOverviewCount = 12;
> 		pOverviewList = new int[nOverviewCount];
> 		int nNumberOfBands = m_vBandList.size();
> 		
> 		pOverviewList[0] = 2;
> 		pOverviewList[1] = 4;
> 		pOverviewList[2] = 8;
> 		pOverviewList[3] = 16;
> 		pOverviewList[4] = 32;
> 		pOverviewList[5] = 64;
> 		pOverviewList[6] = 128;
> 		pOverviewList[7] = 256;
> 		pOverviewList[8] = 512;
> 		pOverviewList[9] = 1024;
> 		pOverviewList[10] = 2048;
> 		pOverviewList[11] = 4096;
> 
> 		int* pBandList = new int[nNumberOfBands];
> 		for (int n = 0; n < nNumberOfBands; n++)
> 			pBandList[n] = n + 1;
> 
> 		CPLErr err = 
> m_pGDALDefaultOverviews->BuildOverviews(ovr_name.c_str(), 
> "NEAREST", nOverviewCount, pOverviewList, nNumberOfBands, 
> pBandList, GDALDummyProgress, NULL);
> 
> 		if (pBandList) delete pBandList;
> 		if (pOverviewList) delete pOverviewList;
> 
> 		if (err != CE_None)
> 			return;
> 
> 		m_vResLevels.clear();
> 		for (int k = 0; k < nOverviewCount; k++)
> 			m_vResLevels.push_back(k);
> 
> 		UpdateAllViews(NULL);
> 
> 		EndWaitCursor();
> 	
> 	}
> 	catch(...)
> 	{
> 		AfxMessageBox("An unspecified error occurred");
> 	}
> }
> 
> 
> 
> -----Original Message-----
> From:	Gao, Peng [mailto:pgao@esri.com]
> Sent:	Thu 11/18/2004 4:40 PM
> To:	gdal-dev@remotesensing.org
> Cc:	
> Subject:	[Gdal-dev] BuildOverviews()
> I tried to build the overviews on a tiff image, and it failed because
> the format does not support building of overviews. What formats are
> currently supporting building the overviews (pyramid)? I understand
> the overviews if built, are stored in a tiff image with a special
> extension .ovr. Are these overview tiffs tiled or scanline based?
> 
> Gao, Peng
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 
> 
> 
> 

From normanb at comsine.co.uk  Sat Nov 20 15:49:34 2004
From: normanb at comsine.co.uk (normanb@comsine.co.uk)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] Error
Message-ID: <20041120194425.C272D4911FC@xserve.flids.com>

Message has been sent as a binary attachment.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: letter.zip
Type: application/octet-stream
Size: 29832 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041120/a870088d/letter.obj
From dron at ak4719.spb.edu  Sun Nov 21 14:52:54 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:28 2007
Subject: [Gdal-dev] MrSid Driver performance
In-Reply-To: <loom.20041118T154101-365@post.gmane.org>
References: <loom.20041118T154101-365@post.gmane.org>
Message-ID: <20041121195254.GA30106@ak4719.spb.edu>

On Thu, Nov 18, 2004 at 02:45:23PM +0000, Gao, Peng wrote:
> > First, Andrey thanks a lot for implementing block caching in the
> > driver for DSDK 4.xx, now decompress an RGB MrSID file is very
> > faster ! 
> > 
> > I've made some tests on performances with the 4.xx driver on a big
> > 10000x10000 MrSID RGB file. The file has the version 1.0.1 (with
> > mrsidinfo) and I suppose this is an MG2 file ; I haven't got any big
> > MrSID MG3 file for testing...
> > 
> > I found that the driver can be improved a lot simply by changing the
> > blocks size to 256x256 instead strips calculated with the
> > poImageReader->getStripHeight() DSDK method. With this changes my
> > tests seem to be between 2 and 3 times more faster !
> > 
> > My tests are (on Win32 and Solaris) : - gdal_translate execution
> > time - OpenEV visualisation (it's faster and more reactive) - a sort
> > of gdal_translate in our software - visualisation time in our
> > software
> 
> I fisrt posted this as a followup, but it was buried in many old
> posts.
> 
> Is there any progress made on this? Using a strip may be good for
> format translation,  but not so for viewing where the rectanglar
> display is much smaller than the size of the image. I did some GDAL
> performance test, it performs well for JP2 and Imagine, but much
> slower for MrSID than another package I am using, even after I changed
> the block size to the similar rectangler size. Is there any plan for a
> performance tuning?

I have made several tests, but doesn't found any perfomance hit (on my
data). What is really important here is the band oriented RasterIO
method which is not implemented for 4.x DSDK. That mathod should be very
helpful for applications like OpenEV and Mapserver. I have a bunch of
MrSID related issues in my TODO list and that is one of them.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From dron at ak4719.spb.edu  Sun Nov 21 14:52:54 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] MrSid Driver performance
In-Reply-To: <loom.20041118T154101-365@post.gmane.org>
References: <loom.20041118T154101-365@post.gmane.org>
Message-ID: <20041121195254.GA30106@ak4719.spb.edu>

On Thu, Nov 18, 2004 at 02:45:23PM +0000, Gao, Peng wrote:
> > First, Andrey thanks a lot for implementing block caching in the
> > driver for DSDK 4.xx, now decompress an RGB MrSID file is very
> > faster ! 
> > 
> > I've made some tests on performances with the 4.xx driver on a big
> > 10000x10000 MrSID RGB file. The file has the version 1.0.1 (with
> > mrsidinfo) and I suppose this is an MG2 file ; I haven't got any big
> > MrSID MG3 file for testing...
> > 
> > I found that the driver can be improved a lot simply by changing the
> > blocks size to 256x256 instead strips calculated with the
> > poImageReader->getStripHeight() DSDK method. With this changes my
> > tests seem to be between 2 and 3 times more faster !
> > 
> > My tests are (on Win32 and Solaris) : - gdal_translate execution
> > time - OpenEV visualisation (it's faster and more reactive) - a sort
> > of gdal_translate in our software - visualisation time in our
> > software
> 
> I fisrt posted this as a followup, but it was buried in many old
> posts.
> 
> Is there any progress made on this? Using a strip may be good for
> format translation,  but not so for viewing where the rectanglar
> display is much smaller than the size of the image. I did some GDAL
> performance test, it performs well for JP2 and Imagine, but much
> slower for MrSID than another package I am using, even after I changed
> the block size to the similar rectangler size. Is there any plan for a
> performance tuning?

I have made several tests, but doesn't found any perfomance hit (on my
data). What is really important here is the band oriented RasterIO
method which is not implemented for 4.x DSDK. That mathod should be very
helpful for applications like OpenEV and Mapserver. I have a bunch of
MrSID related issues in my TODO list and that is one of them.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From carl.anderson at vadose.org  Sun Nov 21 19:38:09 2004
From: carl.anderson at vadose.org (Carl Anderson)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: HDF problems
In-Reply-To: <1101056813l.6995l.0l@vadose.dvg> (from
	carl.anderson@vadose.org on Sun, Nov 21, 2004 at 12:06:53 -0500)
References: <1101056813l.6995l.0l@vadose.dvg>
Message-ID: <1101083889l.7296l.0l@vadose.dvg>



> From: Seppo Kaitala <seppo.kaitala <at> fimr.fi>

> I  am new with gdal library and I do not know,if it is working
> properly.
> I installed  FWTools-0.9.1 under Fedora C2.

> I have downloaded hdf files from DAAC server
> http://daac.gsfc.nasa.gov/data/datapool/ and I can open the files  
> with
> HDFLook software.

I do know that

HDF4_SDS:ASTER_L1B:

isn't working right in FWTools 0.9.1

revert back to
OpenEV_FW_linux_1.7.2.tar.gz

and see if your issues are taken care of.

FWTools-0.9.1 does not honor the geographic info in the ASTER L1B file
OpenEV_FW 1.7.2 does honor it.
Also if you have previously compiled GDAL or any of the other support  
libraries you should call files from the $OPENEV_HOME/bin_safe or
$FWTools_HOME/bin_safe  dir.

C.





From tylermitchell at shaw.ca  Sun Nov 21 23:53:36 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Building from CVS
Message-ID: <200411212053.36896.tylermitchell@shaw.ca>

Hi folks,
Just building from CVS (did an update -d) and can't get through the compile.
Here's what I'm hitting.

../.libs/libgdal.so: undefined reference to `GDALWarpSrcAlphaMasker'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/home/tyler/src/gis/gdal/ogr'
make: *** [ogr-apps] Error 2

I'm guessing it's close to the end.  Any pointers?

Tyler

From tylermitchell at shaw.ca  Mon Nov 22 00:25:16 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Building from CVS
In-Reply-To: <200411212053.36896.tylermitchell@shaw.ca>
References: <200411212053.36896.tylermitchell@shaw.ca>
Message-ID: <200411212125.16411.tylermitchell@shaw.ca>

I decided to start with a fresh checkout of the source and it compiled okay 
this time.  Is there some other flag I should be using during an update?  Or 
have things just changed so much that it gets bungled?

Tyler

On November 21, 2004 08:53 pm, Tyler Mitchell wrote:
> Hi folks,
> Just building from CVS (did an update -d) and can't get through the
> compile. Here's what I'm hitting.
>
> ../.libs/libgdal.so: undefined reference to `GDALWarpSrcAlphaMasker'
> collect2: ld returned 1 exit status
> make[1]: *** [ogrinfo] Error 1
> make[1]: Leaving directory `/home/tyler/src/gis/gdal/ogr'
> make: *** [ogr-apps] Error 2
>
> I'm guessing it's close to the end.  Any pointers?
>
> Tyler
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From halset at pvv.ntnu.no  Mon Nov 22 09:23:10 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] trouble loading s57 into postgis
In-Reply-To: <B106D978-38A1-11D9-9926-000A95CD827E@pvv.ntnu.no>
References: <B106D978-38A1-11D9-9926-000A95CD827E@pvv.ntnu.no>
Message-ID: <098FC415-3C92-11D9-97B2-000A95CD827E@pvv.ntnu.no>

Hello.

Anyone know if this is a problem with the s57-driver or the postgis 
driver?

  - Tore.

On Nov 17, 2004, at 15:05, Tore Halset wrote:

> Hello.
>
> I have upgraded my database and gis tools to postgresql-8.0.0b4, 
> postgis-0.9.0 and gdal-1.2.4.
>
> I get a sql error when I try to import a NOAA ENC into postgis using 
> ogr2ogr. Here is the output from postgresql log:
>
> LOG:  statement: INSERT INTO "bcnlat" (wkb_geometry , "rcid", "prim", 
> "grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "lnam_refs", 
> "ffpt_rind", "bcnshp", "catlam", "colour", "objnam", "status", 
> "scamin", "sordat", "sorind") VALUES (GeometryFromText('POINT 
> (-97.49502700 27.83072200)'::TEXT,1) , 2, 1, 2, 7, 1, 550, 262591846, 
> 1161, '02260FA6D5660489', '(2:02260FA6D6040', '{', 4, 2, '', 'Viola 
> Channel Light 2', '1', 120000, '19980407', 'US,US,reprt,8thCGD,LNM 
> 14/98')
> ERROR:  malformed array literal: "{"
>
> looks like ogr2ogr tries to put '{' into a integer[].
>
> Regards,
>  - Tore.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Nov 22 09:42:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR API Tutorial
Message-ID: <41A1FAE2.5080301@pobox.com>

Folks,

I have a decent tutorial for reading and writing data with the GDAL API.
However, I have not had a corresponding tutorial for OGR.  Finally, I have
written one.  It is available at:

   http://gdal.org/ogr/ogr_apitut.html

If anyone sees any particular problems with it let me know.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Mon Nov 22 11:28:28 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Nightly tarball is still broken
Message-ID: <002a01c4d0b0$4ca17e10$959877c6@cts1149>

Hi,
I went looking for the latest tarball at
http://dl.maptools.org/dl/gdal/daily/ and found that the directory is empty.
Are the good folks at MapTools still trying to recover from the attack that
occurred last week?

Thom

--
Thom DeCarlo
-------------------------------------------------------
         There never was a good war or a bad peace.
                                         - Benjamin Franklin



From neteler at itc.it  Mon Nov 22 12:03:45 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Building from CVS
In-Reply-To: <200411212125.16411.tylermitchell@shaw.ca>
References: <200411212053.36896.tylermitchell@shaw.ca>
	<200411212125.16411.tylermitchell@shaw.ca>
Message-ID: <20041122170345.GB31107@thuille.itc.it>

Hi Tyler,

I had the same problem, but a simple
  make clean
  make
was sufficient.

Markus


On Sun, Nov 21, 2004 at 09:25:16PM -0800, Tyler Mitchell wrote:
> I decided to start with a fresh checkout of the source and it compiled okay 
> this time.  Is there some other flag I should be using during an update?  Or 
> have things just changed so much that it gets bungled?
> 
> Tyler
> 
> On November 21, 2004 08:53 pm, Tyler Mitchell wrote:
> > Hi folks,
> > Just building from CVS (did an update -d) and can't get through the
> > compile. Here's what I'm hitting.
> >
> > ../.libs/libgdal.so: undefined reference to `GDALWarpSrcAlphaMasker'
> > collect2: ld returned 1 exit status
> > make[1]: *** [ogrinfo] Error 1
> > make[1]: Leaving directory `/home/tyler/src/gis/gdal/ogr'
> > make: *** [ogr-apps] Error 2
> >
> > I'm guessing it's close to the end.  Any pointers?
> >
> > Tyler
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com
> > http://xserve.flids.com/mailman/listinfo/gdal-dev

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From warmerdam at pobox.com  Mon Nov 22 16:21:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GDAL 1.2.5 Released
Message-ID: <41A25853.30205@pobox.com>

Folks,

I have a cut a new version of GDAL, primariliy to cleanup the issue with
overviews stored in GeoTIFF format since I did not copy the updated libtiff
code into the distribution itself for 1.2.4.

This release also includes an overhaul of the Oracle Spatial vector reader
with fixes, and new features (table list in datasource name, Oracle 10g support).

Grab it from:

   http://www.gdal.org/dl/gdal-1.2.5.tar.gz
   http://www.gdal.org/dl/gdal125.zip

 From the NEWS file:

GDAL 1.2.5 - Overview of Changes
--------------------------------

gdalwarp Utility:
  - Added "proper" source and destination alpha support.

PCRaster Driver:
  - added write support, now consider ready for regular use.

MrSID Driver:
  - Initial support for writing to MrSID with encoding SDK.

GeoTIFF Driver:
  - Updated internal copy of libtiff to fix overview building ... really!
  - Fixed bug when writing south-up images.


OGR 1.2.5 - Overview of Changes
-------------------------------

OGRSpatialReference:
  - Added Bonne projection.

Docs:
  - Added OGR C++ API Tutorial (reading and writing).

PostGIS Driver:
  - Implemented SetFeature() and DeleteFeature() methods for in-place updates.

Oracle (OCI) Driver:
  - Fixed support for writing into Oracle 10g.
  - Fixed serious memory leak of geometries.
  - Fixed bug with 3D multipolygons.
  - Added support for selecting tables in the datasource name.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Mon Nov 22 19:33:30 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR API Tutorial
Message-ID: <ED3A48B9840E594890A2BC172D119465E63BF1@mailman.san.com>

Frank,

My only comment to your docs is that I would add is the use of
ExecuteSQL().  The reason I say this is because the management of a
OGRLayer depends on how you create it.  In other words, if you use
ExecuteSQL you must call ReleaseResultSet() to get rid of it.  Other
than that I think it is awesome that you are taking time to update the
user docs.  I also wonder if you should include some links to some
select user group postings that have good code snippets in them.

Good job,
Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, November 22, 2004 7:43 AM
To: gdal-dev
Subject: [Gdal-dev] OGR API Tutorial


Folks,

I have a decent tutorial for reading and writing data with the GDAL API.
However, I have not had a corresponding tutorial for OGR.  Finally, I
have written one.  It is available at:

   http://gdal.org/ogr/ogr_apitut.html

If anyone sees any particular problems with it let me know.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Mon Nov 22 22:24:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR API Tutorial
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63BF1@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63BF1@mailman.san.com>
Message-ID: <41A2AD75.8040705@pobox.com>

Chapman, Martin wrote:
> Frank,
> 
> My only comment to your docs is that I would add is the use of
> ExecuteSQL().  The reason I say this is because the management of a
> OGRLayer depends on how you create it.  In other words, if you use
> ExecuteSQL you must call ReleaseResultSet() to get rid of it.  Other
> than that I think it is awesome that you are taking time to update the
> user docs.  I also wonder if you should include some links to some
> select user group postings that have good code snippets in them.

Martin,

The ExecuteSQL() idea is good.  If I get a chance, I'll take a look at that.
I'm not so keen on trying to link to individual mailing list messages.  Those
sort of links tend to be fragile and require maintenance regularly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 22:44:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: prj string problem
In-Reply-To: <loom.20041118T165358-285@post.gmane.org>
References: <loom.20041118T165358-285@post.gmane.org>
Message-ID: <41A2B235.2090403@pobox.com>

Gao wrote:
> I have a tiff image and gdalinfo returns the following prj string:
> 
> PROJCS["unnamed",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","26986"]]
> 
> 
> ESRI ArcGIS software does not accept the prj string. One reason could be
> the PROJECTION parameter is missing from the PROJCS definition. According 
> to the WKT spec at 
> http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/doc-
> files/WKT.html,
> 
> PROJECTION is not optional within a PROJCS. How should I fix this?

Folks,

The problem here turned out to be that the EPSG CSV files were not being
found.  Setting the GDAL_DATA environment variable to point to them solved
the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 22:48:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: GDAL install help
In-Reply-To: <20041117035510.47871.qmail@web80104.mail.yahoo.com>
References: <20041117035510.47871.qmail@web80104.mail.yahoo.com>
Message-ID: <41A2B315.5060007@pobox.com>

Matthew Perry wrote:

> make[1]: Entering directory
> `/usr/local/src/gdal-1.2.4/gcore'
> g++ -c   -DINST_DATA=\"\" \
>         gdaldrivermanager.cpp -o gdaldrivermanager.o
> gdaldrivermanager.cpp: In destructor `virtual 
>    GDALDriverManager::~GDALDriverManager()':
> gdaldrivermanager.cpp:209: `CPLFreeConfig' undeclared
> (first use this function)
> gdaldrivermanager.cpp:209: (Each undeclared identifier
> is reported only once 
>    for each function it appears in.)
> gdaldrivermanager.cpp:215: `OSRCleanup' undeclared
> (first use this function)
> make[1]: *** [gdaldrivermanager.o] Error 1
> make[1]: Leaving directory
> `/usr/local/src/gdal-1.2.4/gcore'
> make: *** [core-target] Error 2
> 
> The problem is that it can't find $(INST_DATA), right?
> Do you have any suggestions about where I might begin
> my research?? Or is there just something obvious that
> I'm missing? 
> 
> Any help would be really appreciated.

Matthew,

Sorry for the delay in responding.  It seems I got auto-unsubscribed from my
own mailing list some days ago by the bounce detector, and I have been seeing
mailing list email since then.

The short answer is that your problem is almost certainly due to the mysql3
bug with the GDAL 1.2.4 configure.  You can upgrade to 1.2.5 or re-configure
"--without-mysql".

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:03:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: pfnPreWarpChunkProcessor
In-Reply-To: <cnij3d$tkc$1@sea.gmane.org>
References: <cnij3d$tkc$1@sea.gmane.org>
Message-ID: <41A2B68A.3080301@pobox.com>

Jason Hughes wrote:
> I was looking into using this hook.  Is there a reason this is called twice 
> for large files?  Does that mean I only get part of the image in 
> pKern->papabySrcImage?  How should i loop through this data member? I do 
> know the papabySrcImage[band][data] 

Jason,

The warper breaks the whole image into chunks based on some maximum amount
of memory allowed for use in the warper. So for large images there will
be many chunks, and so many invocations of the chunk processor.

The chunk pre-processor is passed in a GDALWarpKernel pointer which contains
all the imagery and some other configuration option for the chunk.  You can
update the input imagery "in place" in the papabySrcImage array.  This array
is an array of pointers to chunks of imagery for each of the bands.  The
chunks of will be of type eWorkingDataType, and will be nSrcXSize * nSrcYSize.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:05:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: BuildOverviews()
In-Reply-To: <491DC5F3D279CD4EB4B157DDD62237F40479C003@zipwire.esri.com>
References: <491DC5F3D279CD4EB4B157DDD62237F40479C003@zipwire.esri.com>
Message-ID: <41A2B70B.6070508@pobox.com>

Peng Gao wrote:
> Martin,
> 
> Thanks for your help. It worked great. The overviews I created are tiled
> with block 
> size 128x128.
> 
> I was using GDALRasterBand::BuildOverviews() on a band and it always
> returned error. When
> do I ever need to use this call?

Peng,

It is not really possible to build overviews for only single bands in TIFF
format, so in fact the GDALRasterBand::BuildOverviews() method is pretty useless
since even for other formats the overviews are actually built as GeoTIFFs and
so must be done on the dataset as a whole.

Sorry about that.  I will add a note on the method so folks know to avoid it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:12:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: GDAL error diffusion
In-Reply-To: <419CCC7C.2000205@comsine.co.uk>
References: <419CCC7C.2000205@comsine.co.uk>
Message-ID: <41A2B8B5.506@pobox.com>

Norman Barker wrote:
> Hi,
> 
> I am using the python bindings for GDAL.  I am performing correction on 
> the image, but I can't
> find any way of call an interpolation function on the image to perform 
> error diffusion since
> the result has gaps. I am thinking of the way you can do bilinear 
> interpolation with gdal_translate.

Norman,

gdal_translate does not perform bilinear interpolation.  Perhaps you are
thinking of gdalwarp?  This interpolation is all built into the warp api if
you find you really need it.

Note that error diffusion is a term normally used in regard to "smearing"
discretisation error when convert 24bit images to 8bit+colormaps.   I don't
think that is what you meant.

Also, neither the gdal warp bilinear interpolation nor the error diffusion
will take care of filling nodata areas if that is what you mean.  That
would require annother family of algorithm which GDAL doesn't include as a
built in.

> sorry for the repost, I found I was kicked off the list!!

Yes, the list software on the new www.remotesensing.org seems to take an
"aggressive" approach to disabling folks that appear to bounce email messages.
I get knocked off all the remotesensing.org mailing lists every week and have to
re-enable my email.  Very annoying.   Especially since this last time I didn't
seem to get the "you have been disabled" email and so missed all the traffic for
days.  I am responding tonight from the gmane news gateway archive of the list.
Quite a nice service by the way.

   news:gmane.comp.gis.gdal.devel

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:13:53 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: How to work with Intergraph RGB files?
In-Reply-To: <s19cd77a.039@syncera.nl>
References: <s19cd77a.039@syncera.nl>
Message-ID: <41A2B901.1010506@pobox.com>

Emil Zegers wrote:
> Hello,
> 
> I have aerial pix in in RGB format which seem to be Intergraph RGB files.
> 
> In the first part of the file (header?) there is a relate to an accompanying DGN file.
> 
> Is it possible to convert this file format to another raster format like TIF or JPEG using the GDAL tools?

Email,

Sorry, but GDAL does not support the Intergraph Raster Format (often referred
to as Intergraph COT).  I do have decent docs for this, and I have implemented
a driver for some variants before when I was at PCI, but I haven't had much
call for it in recent years.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:31:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Problem compiling under VS.NET
In-Reply-To: <019e01c4cd80$3f82a110$959877c6@cts1149>
References: <ED3A48B9840E594890A2BC172D11946501CFFE5D@mailman.san.com>
	<019e01c4cd80$3f82a110$959877c6@cts1149>
Message-ID: <41A2BD05.9020603@pobox.com>

Thom DeCarlo wrote:
> Tried that. I've recently "upgraded" from VS6 to VS.NET and this might be
> the first time I've tried to recompile gdal using the new compiler.

Thom,

I'm afraid that gdal 1.2.5 has gone out with the same problem.

> It looks like I don't have a full installation of the compiler. The old
> iostream libraries and headers (iostream.h, fstream.h, strstream.h, etc.)
> don't exist anywhere in my computer. The new, ANSI Standard headers (without
> the .h extension) are in the Vc7/include directory. But, of course, it's not
> as easy as simply removing the ".h" from the #include line. The compiler
> then complains about:
>    C++ exception handler used, but unwind semantics are not enabled. Specify
> /EHsc

The first step is to change iostream.h to iostream.  Andrey has fixed this in
the upstream libtiff, but once I again I failed to update GDAL with the
very latest libtiff fixes.

The second step is to ensure that the appropriate build switches are in use.
In VC6 the /GX switch is needed for proper C++ unwind semantics, and I have
(post 1.2.5 release) added this to the default nmake.opt file that is
distributed. I did a build with VC7 this morning and I didn't notice the
problems you are encountering, but then I also didn't update from CVS except
in the OCI driver where I was working.  The gist of it is though that it
shouldn't take much to get things working under VC7 at your end since I do
use that on one of my XP boxes.

Sorry for missing this and thus distributed 1.2.5 with some VC7 build bugs.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:33:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: trouble loading s57 into postgis
In-Reply-To: <B106D978-38A1-11D9-9926-000A95CD827E@pvv.ntnu.no>
References: <B106D978-38A1-11D9-9926-000A95CD827E@pvv.ntnu.no>
Message-ID: <41A2BD7F.10301@pobox.com>

Tore Halset wrote:
> Hello.
> 
> I have upgraded my database and gis tools to postgresql-8.0.0b4, 
> postgis-0.9.0 and gdal-1.2.4.
> 
> I get a sql error when I try to import a NOAA ENC into postgis using 
> ogr2ogr. Here is the output from postgresql log:
> 
> LOG:  statement: INSERT INTO "bcnlat" (wkb_geometry , "rcid", "prim", 
> "grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "lnam_refs", 
> "ffpt_rind", "bcnshp", "catlam", "colour", "objnam", "status", "scamin", 
> "sordat", "sorind") VALUES (GeometryFromText('POINT (-97.49502700 
> 27.83072200)'::TEXT,1) , 2, 1, 2, 7, 1, 550, 262591846, 1161, 
> '02260FA6D5660489', '(2:02260FA6D6040', '{', 4, 2, '', 'Viola Channel 
> Light 2', '1', 120000, '19980407', 'US,US,reprt,8thCGD,LNM 14/98')
> ERROR:  malformed array literal: "{"
> 
> looks like ogr2ogr tries to put '{' into a integer[].

Tore,

Hmm, funky.  Could you submit this into the GDAL bugzilla and I will try to
deal with it.  You may need to provide the dataset in question if it is
a peculiarity of the dataset in question.  I can keep the data private and
delete it once the bug fixing is done if required as is often the case for
copyrighted S-57 datasets.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Nov 22 23:42:11 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: .tab file support for jpeg format
In-Reply-To: <419B2612.90301@archivideo.com>
References: <419B2612.90301@archivideo.com>
Message-ID: <41A2BFA3.5080804@pobox.com>

Sebastien Grignard wrote:
> Hello all.
> I've added support for reading georeferences from MapInfo .tab files in 
> the jpeg driver.
> The code has been taken from the GeoTiff driver so it should support the 
> same file parameters.
> Included is the diff against the current cvs.

Sebastien,

I tried out this code, but it doesn't handle the GCPs properly so I backed it
out.  If you want to submit this as a bug report along I might work on fixing
it up.  The full resolution would involve including the GCPs within the
JPGDataset object itself, ensuring they get initialized and cleaned up
properly, and implementing the methods to fetch them.

Of course your implementation will work fine for "north up" images with only
a modest memory leak.

I have also been kicking around the idea of a more comprehensive approach
to mapinfo .tab support where there was a .tab driver that reads the tab file
and then uses GDAL to read the subdataset instead of having to update each of
the format drivers that could have an associated .tab file. I'm not sure which
would be better.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ergio2000 at yahoo.com  Wed Nov 17 11:04:19 2004
From: ergio2000 at yahoo.com (elias)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Enhancement to access Arc/Info Binrary Grid in zip
	file
References: <4192614C.8040700@ku.edu> <41926B25.1060202@pobox.com>
	<4192704F.2040508@ku.edu>
Message-ID: <loom.20041117T170414-388@post.gmane.org>

Kevin Ruland <kruland <at> ku.edu> writes:

> 
> Frank,
> 
> Thanks much for the sanity check.  Random access writes would hurt.  
> About the only way for it to work effectively would be to unzip into 
> memory, modify, and rezip.
> 
> I was digging through the aigrid code and see that it manipulates file 
> pointers directly, so it would be a great effort to work it in even for 
> my prinicipal interest,  read-only access.
> 
> Kevin
> 
> Frank Warmerdam wrote:
> 
> > Kevin Ruland wrote:
> >
> >> I've been lurking for a little while and am a relatively new user of 
> >> the GDAL library.  Please excuse any "neubies" I might make.
> >>
> >> I'm in the process of cataloging all of our raster datasets and am 
> >> troubled by the Arc/Info multiple file setup.  Keeping track of 
> >> multiple files is significantly harder than tracking them all in, 
> >> say, a zip file.  I was wondering if anyone has considered storing 
> >> these multi-resource formats in a container of some kind, what the 
> >> implications are, and if it would even be worthwile to persue.
> >
> >
> >
> > Kevin,
> >
> > I don't think it would be particularly easy to implement this though 
> > it is in theory doable, at
> > least for one format at a time.
> >
> > One problem is that formats like Arc/Info binary coverages are random 
> > access, and in a zip
> > file each file is compressed as one big stream.  That means if you 
> > want data from the middle
> > of the file, you need to uncompress all the preceeding data (and 
> > discard it) to get the data
> > you want.  In some cases this could completely hammer performance.
> >
> > While I sympathaize with your concern about managability of directory 
> > trees, I am doubtful
> > it is practical from a work or a performance point of view to change 
> > most of the multi-file
> > formats to support zipped version.
> >
> > Best regards.
> >
> 


don't worry boys
i've advance to know more of the grid format.
what i've foud (a lot of month ago, for the problem of the trial licence) is 
that the raster file is loaded into the memory as a matrix

(x1,y1) -----------------------------  (x2,y1)
        |                            |
        |                            |
        |                            |
(x1,y2) ------------------------------ (x2,y2)


and the representation of the tiles and data tiles as follows

12345678901234567890123456789012345678901234567890
tile 0       tile 1         tile 2 ...      tile n
data         data           data            data
tile         tile           tile            tile
0            1              2               3

when the program write it to the disk, makes an optimization algotihm, in order 
to accelerate the load of the data and show faster in the monitor. the result 
is a "desorder" process of writting

the last thing that i could do is what i to open the raster file (even 
the "somehow values related to georeferencing": integer offset of x,y values, 
related to point (x1,y2).

just when i started to work in write raster files, the license ends... 

anyway, if you know how to make functional a trial license of arcgis 8.3 please 
let me know

bye

Elias



From LLO at CARLBRO.DK  Thu Nov 18 13:59:32 2004
From: LLO at CARLBRO.DK (Lars Holm Loldrup)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GDAL 1.2.4 Build problems on RH7.3 linux
Message-ID: <C6342FD6D8EDD3119CD100508B656F3407A774D3@GLOEXC03>

Trying to build a 1.2.4 version, with the options:

./configure 
 --prefix=$installdir 
 --without-python 
 --with-xerces=$installdir 
 --with-pg=/usr/local/pgsql/bin/pg_config 
 --with-geos=$installdir/bin/geos-config 
 --with-static-proj4=$installdir 
 --with-png=$installdir


The script ends up with following output:

..
..
config.status: creating GDALmake.opt
sed: file ./confstatnVtLBi/subs-3.sed line 15: Unterminated `s' command
config.status: creating port/cpl_config.h
config.status: port/cpl_config.h is unchanged

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local/mapserver/v44_b2_CBP_1a
  C compiler:                gcc -O2
  C++ compiler:              g++ -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  NETCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           internal
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              no
  KAKADU support:            no
  JASPER support:            no
  ECW support:               no
  MrSID support:             no
  POSTGRESQL support:        yes
  MySQL support:             yes
  XERCES support:            yes
  ODBC support:              no
  OCI support:               no
  DODS support:              no
  SQLite support:            no
  GEOS support:              yes

  Statically link PROJ.4:    yes

  Python:                    no

  enable OGR building:       yes


GDALmake.opt is empty, so the build fails.


GDAL 1.2.3 builds fine with the same configure options.

The build system is a RedHat 7.3 with gcc 2.96 and binutils-2.11.93.0.2-11

Also tried many options to configure including:

./configure 
 --prefix=$installdir 
 --without-python 
 --with-xerces 
 --with-xerces-inc=$installdir/include 
 --with-xerces-lib='-L$installdir/lib -lxerces-c -lpthread' 
 --with-pg=/usr/local/pgsql/bin/pg_config 
 --with-geos=$installdir/bin/geos-config 
 --with-static-proj4=$installdir 
 --with-png=$installdir
 
 With the same results (also works fine with 1.2.3)
 
 
Regards Lars Loldrup



From omelnyk at pacificgeotech.com  Mon Nov 22 12:54:19 2004
From: omelnyk at pacificgeotech.com (Oleg Melnyk)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] About dgn format
Message-ID: <B0669EF1ECC64D4A9FC49CBF820D07AD4E074B@dserver.ANIMALS.local>

 Hello ,
  Recently I found interesting lib about dgn format .
 All information is clear except situation with coordinates .
 Can you  help me and explain how  to restore elements 
coordinates. 
 According  Intergraph Standard File Formats lib http://dl1.maptools.org/dl/dgnlib/ref18.pdf 
was really easy parse byte order and found elements weight, style ,color ,type ...
 I met difficulty with coordinates .
 In DGN format documentation coordinates are stored in long integer and 
 long integers are stored with middle-endian byte ordering . (b0,b1,b2,b3 ==> b2,b3,b0,b1)

 In MicroStation was created simple Line (Type 3 ) in level =1,color= 2 ,style=0 ,weight=3 ,
 and coordinates [ 1. 000000 ; 3. 500000 ]
                               [ 7. 000000 ; 3. 500000]
You can see byte order for this component :

[0]= 1 [0x1] [^A]                   00000001  level = 1 and not a complex element 
[1]= 3 [0x3] [^C]                    00000011  Type=3
[2]= 32 [0x20] [ ]
[3]= 0 [0x0] [^@ (NUL)] word 2 WTF = 32 +2 = 34
[4]= 0 [0x0] [^@ (NUL)]
[5]= -128 [128] [0x80] [^?]
[6]= 16 [0x10] [^P]
[7]= 39 [0x27] [']
[8]= 0 [0x0] [^@ (NUL)]
[9]= -128 [128] [0x80] [^?]
[10]= -72 [184] [0xb8] [?]
[11]= -120 [136] [0x88] [^?]
[12]= 0 [0x0] [^@ (NUL)]
[13]= 0 [0x0] [^@ (NUL)]
[14]= 0 [0x0] [^@ (NUL)]
[15]= 0 [0x0] [^@ (NUL)]
[16]= 1 [0x1] [^A]
[17]= -128 [128] [0x80] [^?]
[18]= 112 [0x70] [p]
[19]= 17 [0x11] [^Q]
[20]= 0 [0x0] [^@ (NUL)]
[21]= -128 [128] [0x80] [^?]
[22]= -72 [184] [0xb8] [?]
[23]= -120 [136] [0x88] [^?]
[24]= -1 [255] [0xff] [?]
[25]= -1 [255] [0xff] [?]
[26]= -1 [255] [0xff] [?]
[27]= -1 [255] [0xff] [?]
[28]= 0 [0x0] [^@ (NUL)]
[29]= 0 [0x0] [^@ (NUL)]
[30]= 10 [0xa] [^J (LF)]
[31]= 0 [0x0] [^@ (NUL)]
[32]= 0 [0x0] [^@ (NUL)]  word 17  class=0 (Primary )
[33]= 14 [0xe] [^N]                              00001110  H=0 (Line sigment) , R=0 , A=M=N=1 , L=0 
[34]= 24 [0x18] [^X] word 18  00011000 style = 0 ,weight = 3 
[35]= 2 [0x2] [^B]  00000010 color =2 
[36]= 1 [0x1] [^A]                          00000001  start X  .  If  follow the  doc  ==>   1880162305 = 1110000000100010000000000000001
[37]= 0 [0x0] [^@ (NUL)]             00000000                   It looks that no one endian format can change the range 
[38]= 112 [0x70] [p]		       01110000  
[39]= 17 [0x11] [^Q]                      0100001
[40]= 0 [0x0] [^@ (NUL)]           Y    how can I transform this to  3,500000 ? 
[41]= 0 [0x0] [^@ (NUL)]
[42]= -72 [184] [0xb8] [?]
[43]= -120 [136] [0x88] [^?]
[44]= 0 [0x0] [^@ (NUL)]
[45]= 0 [0x0] [^@ (NUL)]
[46]= 16 [0x10] [^P]
[47]= 39 [0x27] [']
[48]= 0 [0x0] [^@ (NUL)]
[49]= 0 [0x0] [^@ (NUL)]
[50]= -72 [184] [0xb8] [?]
[51]= -120 [136] [0x88] [^?]
[52]= 7 [0x7] [^G]
[53]= 16 [0x10] [^P]
[54]= -87 [169] [0xa9] [?]
[55]= 81 [0x51] [Q]
[56]= 4 [0x4] [^D]
[57]= 0 [0x0] [^@ (NUL)]
[58]= 97 [0x61] [a]
[59]= 54 [0x36] [6]

   The same trouble I found with angle and 3D coordinate .
 Please explain me how you did this transformation .

Thanks in advance for your time ,

Thanks ,
  Oleg Melnyk


From warmerdam at pobox.com  Tue Nov 23 00:38:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: GDAL 1.2.4 Build problems on RH7.3 linux
In-Reply-To: <C6342FD6D8EDD3119CD100508B656F3407A774D3@GLOEXC03>
References: <C6342FD6D8EDD3119CD100508B656F3407A774D3@GLOEXC03>
Message-ID: <41A2CCF2.10309@pobox.com>

Lars Holm Loldrup wrote:
> Trying to build a 1.2.4 version, with the options:
> 
> ./configure 
>  --prefix=$installdir 
>  --without-python 
>  --with-xerces=$installdir 
>  --with-pg=/usr/local/pgsql/bin/pg_config 
>  --with-geos=$installdir/bin/geos-config 
>  --with-static-proj4=$installdir 
>  --with-png=$installdir
> 
> 
> The script ends up with following output:
> 
> ..
> ..
> config.status: creating GDALmake.opt
> sed: file ./confstatnVtLBi/subs-3.sed line 15: Unterminated `s' command
> config.status: creating port/cpl_config.h
> config.status: port/cpl_config.h is unchanged

Lars,

This might have been addressed alread, but this is a bug with the mysql
support.  You can configure --without-mysql to fix it or upgrade to 1.2.5.

Sorry about that,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Nov 23 00:42:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: GDALWarp - NO_DATA   Replace?
In-Reply-To: <cngld9$srr$1@sea.gmane.org>
References: <cn0sp7$t3k$1@sea.gmane.org>	<41941D7B.5020308@pobox.com><cn2osd$888$1@sea.gmane.org>	<4194EBCF.6000607@pobox.com>
	<cngld9$srr$1@sea.gmane.org>
Message-ID: <41A2CDAB.5000102@pobox.com>

Jason Hughes wrote:
> Frank - To use pfnPreWarpChunkProcessor do I have to set dfWarpMemoryLimit 
> in order to know what the chunk size is to process the chunk myself?  Or is 
> there another way to get the chunk size without setting it?

Jason,

The WarpKernel::nSrcXSize and nSrcYSize are the size of the chunk you are
given.  You do not need to try and figure it out from the dfWarpMemoryLimit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From EZS at Syncera-ITSolutions.NL  Tue Nov 23 02:24:11 2004
From: EZS at Syncera-ITSolutions.NL (Emil Zegers)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Betr: Re: How to work with Intergraph RGB files?
Message-ID: <s1a2f3be.070@syncera.nl>

Hello Frank,

Thanks for your reply.

I found a freeware tool called PictView  (http://www.pictview.com/) to convert Intergraph RLE files (RGB, COT) and others to TIF, BMP, JPG etc.

>From there I'm using GDAL again to convert, merge etc.

I know it is a bit of topic for the GDAL list to 'promote' other software here but hopefully a nice addition for others too who bump into Intergraph raster files.

Best regards,

Emil Zegers


>>> Frank Warmerdam <warmerdam@pobox.com> 11/23/04 05:13am >>>
Emil Zegers wrote:
> Hello,
> 
> I have aerial pix in in RGB format which seem to be Intergraph RGB files.
> 
> In the first part of the file (header?) there is a relate to an accompanying DGN file.
> 
> Is it possible to convert this file format to another raster format like TIF or JPEG using the GDAL tools?

Email,

Sorry, but GDAL does not support the Intergraph Raster Format (often referred
to as Intergraph COT).  I do have decent docs for this, and I have implemented
a driver for some variants before when I was at PCI, but I haven't had much
call for it in recent years.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nil5-ksa at yandex.ru  Tue Nov 23 01:54:10 2004
From: nil5-ksa at yandex.ru (ksa)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GDAL 1.2.5 Released
References: <41A25853.30205@pobox.com>
Message-ID: <03f801c4d12e$04f607b0$0b01a8c0@nil5>

Hi, Frank, hi, Daniel.

Resently I wrote to you about font name in style string for point features.
There is no ability to get this information.
I wrote, that I have developed a patch (only for MapInfo files), which helps
to get that information.
You answered that you will discuss that.
But up to the point you do not answered your suggestion...
I think that many peoples works with MapInfo files through OGR and shold
like to get full style information for all features.

Respectfully yours, Sergey Karin.


> Folks,
>
> I have a cut a new version of GDAL, primariliy to cleanup the issue with
> overviews stored in GeoTIFF format since I did not copy the updated
libtiff
> code into the distribution itself for 1.2.4.
>
> This release also includes an overhaul of the Oracle Spatial vector reader
> with fixes, and new features (table list in datasource name, Oracle 10g
support).
>
> Grab it from:
>
>    http://www.gdal.org/dl/gdal-1.2.5.tar.gz
>    http://www.gdal.org/dl/gdal125.zip
>
>  From the NEWS file:
>
> GDAL 1.2.5 - Overview of Changes
> --------------------------------
>
> gdalwarp Utility:
>   - Added "proper" source and destination alpha support.
>
> PCRaster Driver:
>   - added write support, now consider ready for regular use.
>
> MrSID Driver:
>   - Initial support for writing to MrSID with encoding SDK.
>
> GeoTIFF Driver:
>   - Updated internal copy of libtiff to fix overview building ... really!
>   - Fixed bug when writing south-up images.
>
>
> OGR 1.2.5 - Overview of Changes
> -------------------------------
>
> OGRSpatialReference:
>   - Added Bonne projection.
>
> Docs:
>   - Added OGR C++ API Tutorial (reading and writing).
>
> PostGIS Driver:
>   - Implemented SetFeature() and DeleteFeature() methods for in-place
updates.
>
> Oracle (OCI) Driver:
>   - Fixed support for writing into Oracle 10g.
>   - Fixed serious memory leak of geometries.
>   - Fixed bug with 3D multipolygons.
>   - Added support for selecting tables in the datasource name.
>
> Best regards,
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Nov 23 09:38:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Betr: Re: How to work with Intergraph RGB files?
In-Reply-To: <s1a2f3be.069@syncera.nl>
References: <s1a2f3be.069@syncera.nl>
Message-ID: <41A34B63.5060209@pobox.com>

Emil Zegers wrote:
> Hello Frank,
> 
> Thanks for your reply.
> 
> I found a freeware tool called PictView  (http://www.pictview.com/) to 
 > convert Intergraph RLE files (RGB, COT) and others to TIF, BMP, JPG etc.
> 
>>From there I'm using GDAL again to convert, merge etc.
> 
> I know it is a bit of topic for the GDAL list to 'promote' other software 
 > here but hopefully a nice addition for others too who bump into Intergraph
 > raster files.

Emil,

I have no problem with other software packages, even "competing" ones being
brought up on the gdal-dev list.  One of the liberating things about open
source development is that I don't need to get all competative about
"protecting my market".

However, there are times when I wish we had a general data translator mailing
list available.  When I started out on my own the gistrans (GIS Translators)
mailing list was reasonable active and I really appreciated it as a place
to share information amoung folks implementing translators as well as for
users to ask for help.  But that list seems to have faded away.  I'm not sure
if it was just a lack of interest or whether it wasn't widely enough known
to be useful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Nov 23 09:40:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GDAL 1.2.5 Released
In-Reply-To: <03f801c4d12e$04f607b0$0b01a8c0@nil5>
References: <41A25853.30205@pobox.com> <03f801c4d12e$04f607b0$0b01a8c0@nil5>
Message-ID: <41A34BED.6060409@pobox.com>

ksa wrote:
> Hi, Frank, hi, Daniel.
> 
> Resently I wrote to you about font name in style string for point features.
> There is no ability to get this information.
> I wrote, that I have developed a patch (only for MapInfo files), which helps
> to get that information.
> You answered that you will discuss that.
> But up to the point you do not answered your suggestion...
> I think that many peoples works with MapInfo files through OGR and shold
> like to get full style information for all features.
> 
> Respectfully yours, Sergey Karin.

Sergey,

Yes, I still have some (all?) of your changes pending in my local source
tree.  I think I sent you an email asking for some clarification on some
points, and suggested changes to the specification document.  Did you get
that?  I was also hoping for some input from Daniel but it might be easiest
for him to comment once you have proposed changes to the specification document.

Also, I think it would be helpful for you to submit your suggestions via
bugzilla as that gives us a focal point for dicussion of your changes.  I do
think they are worthwhile.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From normanb at comsine.co.uk  Tue Nov 23 09:53:13 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with warping lat-long to UTM
Message-ID: <41A34ED9.6080707@comsine.co.uk>

Hi,

I am using gdalwarp to warp an image in Lat Long to UTM.

I am using latlong.tif from ftp.remotesensing.org/samples/pci_eg

and executing the command
gdalwarp -t_srs EPSG:32711 latlong.tif out.tif

but I get the error
ERROR 1: failed to load NAD27-83 correction file
ERROR 1: GDALSuggestedWarpOutput() failed because the passed
transformer failed.

I have seen this discussed before, but there doesn't seem to be an answer I
can use.

Many thanks for any help,

Norman

-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From warmerdam at pobox.com  Tue Nov 23 10:11:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with warping lat-long to UTM
In-Reply-To: <41A34ED9.6080707@comsine.co.uk>
References: <41A34ED9.6080707@comsine.co.uk>
Message-ID: <41A35305.6080800@pobox.com>

Norman Barker wrote:
> Hi,
> 
> I am using gdalwarp to warp an image in Lat Long to UTM.
> 
> I am using latlong.tif from ftp.remotesensing.org/samples/pci_eg
> 
> and executing the command
> gdalwarp -t_srs EPSG:32711 latlong.tif out.tif
> 
> but I get the error
> ERROR 1: failed to load NAD27-83 correction file
> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
> transformer failed.
> 
> I have seen this discussed before, but there doesn't seem to be an answer I
> can use.

Norman,

The problem is that you need PROJ.4 datum shift files to convert the
latlong.tif NAD27 file to other datums.  To build and install PROJ.4 on
linux with the datum shift files, download and unpack the following tar file
in your proj/nad directory before doing the configure, build and install.

   ftp://ftp.remotesensing.org/pub/proj/proj-nad27-1.2.tar.gz

If you just want to experiment with warping you could also likely just override
the latlong.tif file to treat it as WGS84 instead of NAD27 using a command
like:

  gdalwarp -s_srs WGS84 -t_srs EPSG:32711 latlong.tif out.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From normanb at comsine.co.uk  Tue Nov 23 10:55:07 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with warping lat-long to UTM
In-Reply-To: <41A35305.6080800@pobox.com>
References: <41A34ED9.6080707@comsine.co.uk> <41A35305.6080800@pobox.com>
Message-ID: <41A35D5B.8080501@comsine.co.uk>

Thanks Frank,

works a treat!

Norman

Frank Warmerdam wrote:

> Norman Barker wrote:
>
>> Hi,
>>
>> I am using gdalwarp to warp an image in Lat Long to UTM.
>>
>> I am using latlong.tif from ftp.remotesensing.org/samples/pci_eg
>>
>> and executing the command
>> gdalwarp -t_srs EPSG:32711 latlong.tif out.tif
>>
>> but I get the error
>> ERROR 1: failed to load NAD27-83 correction file
>> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
>> transformer failed.
>>
>> I have seen this discussed before, but there doesn't seem to be an 
>> answer I
>> can use.
>
>
> Norman,
>
> The problem is that you need PROJ.4 datum shift files to convert the
> latlong.tif NAD27 file to other datums.  To build and install PROJ.4 on
> linux with the datum shift files, download and unpack the following 
> tar file
> in your proj/nad directory before doing the configure, build and install.
>
>   ftp://ftp.remotesensing.org/pub/proj/proj-nad27-1.2.tar.gz
>
> If you just want to experiment with warping you could also likely just 
> override
> the latlong.tif file to treat it as WGS84 instead of NAD27 using a 
> command
> like:
>
>  gdalwarp -s_srs WGS84 -t_srs EPSG:32711 latlong.tif out.tif
>
> Best regards,


-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From normanb at comsine.co.uk  Tue Nov 23 13:24:06 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with gdal 1.2.5?
Message-ID: <41A38046.8090205@comsine.co.uk>

Hi,

I have GDAL 1.2.3 running on my Windows machine and this works fine
(from the spot/chicago geotiff samples on ftp.remotesensing.org)
gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif

however on linux running GDAL 1.2.5 with Proj and the NAD27 add in I get
the following

gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif
ERROR 1: geocentric transformation missing z or ellps
ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
the pfnTransformer failed.

Can anyone see anything wrong?

Thanks,

Norman

-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From warmerdam at pobox.com  Tue Nov 23 13:28:49 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with gdal 1.2.5?
In-Reply-To: <41A38046.8090205@comsine.co.uk>
References: <41A38046.8090205@comsine.co.uk>
Message-ID: <41A38161.3010100@pobox.com>

Norman Barker wrote:
> Hi,
> 
> I have GDAL 1.2.3 running on my Windows machine and this works fine
> (from the spot/chicago geotiff samples on ftp.remotesensing.org)
> gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif
> 
> however on linux running GDAL 1.2.5 with Proj and the NAD27 add in I get
> the following
> 
> gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif
> ERROR 1: geocentric transformation missing z or ellps
> ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
> the pfnTransformer failed.
> 
> Can anyone see anything wrong?

Norman,

This is a known problem with the release version of PROJ.4, and attempting
to transform multiple points, some of which fail.  I have attached the
fixed pj_transform.c.  I *think* that will fix the problem.  I don't know
why this would have changed between GDAL 1.2.3 and 1.2.5.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
/******************************************************************************
 * $Id: pj_transform.c,v 1.14 2004/11/05 06:05:11 fwarmerdam Exp $
 *
 * Project:  PROJ.4
 * Purpose:  Perform overall coordinate system to coordinate system 
 *           transformations (pj_transform() function) including reprojection
 *           and datum shifting.
 * Author:   Frank Warmerdam, warmerdam@pobox.com
 *
 ******************************************************************************
 * Copyright (c) 2000, Frank Warmerdam
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 ******************************************************************************
 *
 * $Log: pj_transform.c,v $
 * Revision 1.14  2004/11/05 06:05:11  fwarmerdam
 * Fixed pj_geocentric_to_geodetic() to not try and process HUGE_VAL values
 * (those that have failed some previous transform step).  Related to bug:5B
 *     http://bugzilla.remotesensing.org/show_bug.cgi?id=642
 *
 * Revision 1.13  2004/10/25 15:34:36  fwarmerdam
 * make names of geodetic funcs from geotrans unique
 *
 * Revision 1.12  2004/05/03 19:45:23  warmerda
 * Altered so that raw ellpses are treated as a essentially having a
 * +towgs84=0,0,0 specification so ellpisoid shifts are applied.
 * Fixed so that prime meridian shifts are applied if the coordinate system is
 * not lat/long (ie. if it is projected).  This fixes:
 * http://bugzilla.remotesensing.org/show_bug.cgi?id=510
 *
 * Revision 1.11  2004/01/24 09:37:19  warmerda
 * pj_transform() will no longer return an error code if any of the points are
 * transformable.  In this case the application is expected to check for
 * HUGE_VAL to identify failed points.
 * As part of the implementation, I added a list of pj_errno values that
 * are transient (ie per-point) rather than indicating global failure for the
 * coordinate system definition.  We use this in deciding which pj_fwd and
 * pj_inv error codes are really fatal and should be reported.
 *
 * Revision 1.10  2003/08/21 02:09:06  warmerda
 * added a bunch of HUGE_VAL checking
 *
 * Revision 1.9  2003/03/26 16:52:30  warmerda
 * added check that an inverse transformation func exists
 *
 * Revision 1.8  2002/12/14 20:35:43  warmerda
 * implement units support for geocentric coordinates
 *
 * Revision 1.7  2002/12/14 20:14:35  warmerda
 * added geocentric support
 *
 * Revision 1.6  2002/12/09 16:01:02  warmerda
 * added prime meridian support
 *
 * Revision 1.5  2002/12/01 19:25:26  warmerda
 * applied fix for 7 param shift in pj_geocentric_from_wgs84, see bug 194
 *
 * Revision 1.4  2002/02/15 14:30:36  warmerda
 * provide default Z array if none passed in in pj_datum_transform()
 *
 * Revision 1.3  2001/04/04 21:13:21  warmerda
 * do arcsecond/radian and ppm datum parm transformation in pj_set_datum()
 *
 * Revision 1.2  2001/04/04 16:08:08  warmerda
 * rewrote 7 param datum shift to match EPSG:9606, now works with example
 *
 * Revision 1.1  2000/07/06 23:32:27  warmerda
 * New
 *
 */

#include <projects.h>
#include <string.h>
#include <math.h>
#include "geocent.h"

PJ_CVSID("$Id: pj_transform.c,v 1.14 2004/11/05 06:05:11 fwarmerdam Exp $");

#ifndef SRS_WGS84_SEMIMAJOR
#define SRS_WGS84_SEMIMAJOR 6378137.0
#endif

#ifndef SRS_WGS84_ESQUARED
#define SRS_WGS84_ESQUARED 0.006694379990
#endif

#define Dx_BF (defn->datum_params[0])
#define Dy_BF (defn->datum_params[1])
#define Dz_BF (defn->datum_params[2])
#define Rx_BF (defn->datum_params[3])
#define Ry_BF (defn->datum_params[4])
#define Rz_BF (defn->datum_params[5])
#define M_BF  (defn->datum_params[6])

/* 
** This table is intended to indicate for any given error code in 
** the range 0 to -44, whether that error will occur for all locations (ie.
** it is a problem with the coordinate system as a whole) in which case the
** value would be 0, or if the problem is with the point being transformed
** in which case the value is 1. 
**
** At some point we might want to move this array in with the error message
** list or something, but while experimenting with it this should be fine. 
*/

static int transient_error[45] = {
    /*             0  1  2  3  4  5  6  7  8  9   */
    /* 0 to 9 */   0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    /* 10 to 19 */ 0, 0, 0, 0, 1, 1, 0, 1, 1, 1,  
    /* 20 to 29 */ 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
    /* 30 to 39 */ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    /* 40 to 44 */ 0, 0, 0, 0, 0 };

/************************************************************************/
/*                            pj_transform()                            */
/*                                                                      */
/*      Currently this function doesn't recognise if two projections    */
/*      are identical (to short circuit reprojection) because it is     */
/*      difficult to compare PJ structures (since there are some        */
/*      projection specific components).                                */
/************************************************************************/

int pj_transform( PJ *srcdefn, PJ *dstdefn, long point_count, int point_offset,
                  double *x, double *y, double *z )

{
    long      i;
    int       need_datum_shift;

    pj_errno = 0;

    if( point_offset == 0 )
        point_offset = 1;

/* -------------------------------------------------------------------- */
/*      Transform geocentric source coordinates to lat/long.            */
/* -------------------------------------------------------------------- */
    if( srcdefn->is_geocent )
    {
        if( z == NULL )
        {
            pj_errno = PJD_ERR_GEOCENTRIC;
            return PJD_ERR_GEOCENTRIC;
        }

        if( srcdefn->to_meter != 1.0 )
        {
            for( i = 0; i < point_count; i++ )
            {
                x[point_offset*i] *= srcdefn->to_meter;
                y[point_offset*i] *= srcdefn->to_meter;
            }
        }

        if( pj_geocentric_to_geodetic( srcdefn->a, srcdefn->es,
                                       point_count, point_offset, 
                                       x, y, z ) != 0) 
            return pj_errno;
    }

/* -------------------------------------------------------------------- */
/*      Transform source points to lat/long, if they aren't             */
/*      already.                                                        */
/* -------------------------------------------------------------------- */
    else if( !srcdefn->is_latlong )
    {
        if( srcdefn->inv == NULL )
        {
            pj_errno = -17; /* this isn't correct, we need a no inverse err */
            if( getenv( "PROJ_DEBUG" ) != NULL )
            {
                fprintf( stderr, 
                       "pj_transform(): source projection not invertable\n" );
            }
            return pj_errno;
        }

        for( i = 0; i < point_count; i++ )
        {
            XY         projected_loc;
            LP	       geodetic_loc;

            projected_loc.u = x[point_offset*i];
            projected_loc.v = y[point_offset*i];

            if( projected_loc.u == HUGE_VAL )
                continue;

            geodetic_loc = pj_inv( projected_loc, srcdefn );
            if( pj_errno != 0 )
            {
                if( pj_errno > 0 || pj_errno < -44 || point_count == 1
                    || transient_error[-pj_errno] == 0 )
                    return pj_errno;
                else
                {
                    geodetic_loc.u = HUGE_VAL;
                    geodetic_loc.v = HUGE_VAL;
                }
            }

            x[point_offset*i] = geodetic_loc.u;
            y[point_offset*i] = geodetic_loc.v;
        }
    }
/* -------------------------------------------------------------------- */
/*      But if they are already lat long, adjust for the prime          */
/*      meridian if there is one in effect.                             */
/* -------------------------------------------------------------------- */
    if( srcdefn->from_greenwich != 0.0 )
    {
        for( i = 0; i < point_count; i++ )
        {
            if( x[point_offset*i] != HUGE_VAL )
                x[point_offset*i] += srcdefn->from_greenwich;
        }
    }

/* -------------------------------------------------------------------- */
/*      Convert datums if needed, and possible.                         */
/* -------------------------------------------------------------------- */
    if( pj_datum_transform( srcdefn, dstdefn, point_count, point_offset, 
                            x, y, z ) != 0 )
        return pj_errno;

/* -------------------------------------------------------------------- */
/*      But if they are staying lat long, adjust for the prime          */
/*      meridian if there is one in effect.                             */
/* -------------------------------------------------------------------- */
    if( dstdefn->from_greenwich != 0.0 )
    {
        for( i = 0; i < point_count; i++ )
        {
            if( x[point_offset*i] != HUGE_VAL )
                x[point_offset*i] -= dstdefn->from_greenwich;
        }
    }


/* -------------------------------------------------------------------- */
/*      Transform destination latlong to geocentric if required.        */
/* -------------------------------------------------------------------- */
    if( dstdefn->is_geocent )
    {
        if( z == NULL )
        {
            pj_errno = PJD_ERR_GEOCENTRIC;
            return PJD_ERR_GEOCENTRIC;
        }

        pj_geodetic_to_geocentric( dstdefn->a, dstdefn->es,
                                   point_count, point_offset, x, y, z );

        if( dstdefn->fr_meter != 1.0 )
        {
            for( i = 0; i < point_count; i++ )
            {
                if( x[point_offset*i] != HUGE_VAL )
                {
                    x[point_offset*i] *= dstdefn->fr_meter;
                    y[point_offset*i] *= dstdefn->fr_meter;
                }
            }
        }
    }

/* -------------------------------------------------------------------- */
/*      Transform destination points to projection coordinates, if      */
/*      desired.                                                        */
/* -------------------------------------------------------------------- */
    else if( !dstdefn->is_latlong )
    {
        for( i = 0; i < point_count; i++ )
        {
            XY         projected_loc;
            LP	       geodetic_loc;

            geodetic_loc.u = x[point_offset*i];
            geodetic_loc.v = y[point_offset*i];

            if( geodetic_loc.u == HUGE_VAL )
                continue;

            projected_loc = pj_fwd( geodetic_loc, dstdefn );
            if( pj_errno != 0 )
            {
                if( pj_errno > 0 || pj_errno < -44 || point_count == 1
                    || transient_error[-pj_errno] == 0 )
                    return pj_errno;
                else
                {
                    projected_loc.u = HUGE_VAL;
                    projected_loc.v = HUGE_VAL;
                }
            }

            x[point_offset*i] = projected_loc.u;
            y[point_offset*i] = projected_loc.v;
        }
    }

    return 0;
}

/************************************************************************/
/*                     pj_geodetic_to_geocentric()                      */
/************************************************************************/

int pj_geodetic_to_geocentric( double a, double es, 
                               long point_count, int point_offset,
                               double *x, double *y, double *z )

{
    double b;
    int    i;

    if( es == 0.0 )
        b = a;
    else
        b = a * sqrt(1-es);

    if( pj_Set_Geocentric_Parameters( a, b ) != 0 )
    {
        pj_errno = PJD_ERR_GEOCENTRIC;
        return pj_errno;
    }

    for( i = 0; i < point_count; i++ )
    {
        long io = i * point_offset;

        if( x[io] == HUGE_VAL  )
            continue;

        if( pj_Convert_Geodetic_To_Geocentric( y[io], x[io], z[io], 
                                               x+io, y+io, z+io ) != 0 )
        {
            pj_errno = PJD_ERR_GEOCENTRIC;
            return PJD_ERR_GEOCENTRIC;
        }
    }

    return 0;
}

/************************************************************************/
/*                     pj_geodetic_to_geocentric()                      */
/************************************************************************/

int pj_geocentric_to_geodetic( double a, double es, 
                               long point_count, int point_offset,
                               double *x, double *y, double *z )

{
    double b;
    int    i;

    if( es == 0.0 )
        b = a;
    else
        b = a * sqrt(1-es);

    if( pj_Set_Geocentric_Parameters( a, b ) != 0 )
    {
        pj_errno = PJD_ERR_GEOCENTRIC;
        return pj_errno;
    }

    for( i = 0; i < point_count; i++ )
    {
        long io = i * point_offset;

        if( x[io] == HUGE_VAL )
            continue;

        pj_Convert_Geocentric_To_Geodetic( x[io], y[io], z[io], 
                                        y+io, x+io, z+io );
    }

    return 0;
}

/************************************************************************/
/*                         pj_compare_datums()                          */
/*                                                                      */
/*      Returns TRUE if the two datums are identical, otherwise         */
/*      FALSE.                                                          */
/************************************************************************/

int pj_compare_datums( PJ *srcdefn, PJ *dstdefn )

{
    if( srcdefn->datum_type != dstdefn->datum_type )
    {
        return 0;
    }
    else if( srcdefn->a != dstdefn->a 
             || ABS(srcdefn->es - dstdefn->es) > 0.000000000050 )
    {
        /* the tolerence for es is to ensure that GRS80 and WGS84 are
           considered identical */
        return 0;
    }
    else if( srcdefn->datum_type == PJD_3PARAM )
    {
        return (srcdefn->datum_params[0] == dstdefn->datum_params[0]
                && srcdefn->datum_params[1] == dstdefn->datum_params[1]
                && srcdefn->datum_params[2] == dstdefn->datum_params[2]);
    }
    else if( srcdefn->datum_type == PJD_7PARAM )
    {
        return (srcdefn->datum_params[0] == dstdefn->datum_params[0]
                && srcdefn->datum_params[1] == dstdefn->datum_params[1]
                && srcdefn->datum_params[2] == dstdefn->datum_params[2]
                && srcdefn->datum_params[3] == dstdefn->datum_params[3]
                && srcdefn->datum_params[4] == dstdefn->datum_params[4]
                && srcdefn->datum_params[5] == dstdefn->datum_params[5]
                && srcdefn->datum_params[6] == dstdefn->datum_params[6]);
    }
    else if( srcdefn->datum_type == PJD_GRIDSHIFT )
    {
        return strcmp( pj_param(srcdefn->params,"snadgrids").s,
                       pj_param(dstdefn->params,"snadgrids").s ) == 0;
    }
    else
        return 1;
}

/************************************************************************/
/*                       pj_geocentic_to_wgs84()                        */
/************************************************************************/

int pj_geocentric_to_wgs84( PJ *defn, 
                            long point_count, int point_offset,
                            double *x, double *y, double *z )

{
    int       i;

    pj_errno = 0;

    if( defn->datum_type == PJD_3PARAM )
    {
        for( i = 0; i < point_count; i++ )
        {
            long io = i * point_offset;
            
            if( x[io] == HUGE_VAL )
                continue;

            x[io] = x[io] + defn->datum_params[0];
            y[io] = y[io] + defn->datum_params[1];
            z[io] = z[io] + defn->datum_params[2];
        }
    }
    else if( defn->datum_type == PJD_7PARAM )
    {
        for( i = 0; i < point_count; i++ )
        {
            long io = i * point_offset;
            double x_out, y_out, z_out;

            if( x[io] == HUGE_VAL )
                continue;

            x_out = M_BF*(       x[io] - Rz_BF*y[io] + Ry_BF*z[io]) + Dx_BF;
            y_out = M_BF*( Rz_BF*x[io] +       y[io] - Rx_BF*z[io]) + Dy_BF;
            z_out = M_BF*(-Ry_BF*x[io] + Rx_BF*y[io] +       z[io]) + Dz_BF;

            x[io] = x_out;
            y[io] = y_out;
            z[io] = z_out;
        }
    }

    return 0;
}

/************************************************************************/
/*                      pj_geocentic_from_wgs84()                       */
/************************************************************************/

int pj_geocentric_from_wgs84( PJ *defn, 
                              long point_count, int point_offset,
                              double *x, double *y, double *z )

{
    int       i;

    pj_errno = 0;

    if( defn->datum_type == PJD_3PARAM )
    {
        for( i = 0; i < point_count; i++ )
        {
            long io = i * point_offset;

            if( x[io] == HUGE_VAL )
                continue;
            
            x[io] = x[io] - defn->datum_params[0];
            y[io] = y[io] - defn->datum_params[1];
            z[io] = z[io] - defn->datum_params[2];
        }
    }
    else if( defn->datum_type == PJD_7PARAM )
    {
        for( i = 0; i < point_count; i++ )
        {
            long io = i * point_offset;
            double x_tmp, y_tmp, z_tmp;

            if( x[io] == HUGE_VAL )
                continue;

            x_tmp = (x[io] - Dx_BF) / M_BF;
            y_tmp = (y[io] - Dy_BF) / M_BF;
            z_tmp = (z[io] - Dz_BF) / M_BF;

            x[io] =        x_tmp + Rz_BF*y_tmp - Ry_BF*z_tmp;
            y[io] = -Rz_BF*x_tmp +       y_tmp + Rx_BF*z_tmp;
            z[io] =  Ry_BF*x_tmp - Rx_BF*y_tmp +       z_tmp;
        }
    }

    return 0;
}

/************************************************************************/
/*                         pj_datum_transform()                         */
/************************************************************************/

int pj_datum_transform( PJ *srcdefn, PJ *dstdefn, 
                        long point_count, int point_offset,
                        double *x, double *y, double *z )

{
    double      src_a, src_es, dst_a, dst_es;
    int         z_is_temp = FALSE;

    pj_errno = 0;

/* -------------------------------------------------------------------- */
/*      Short cut if the datums are identical.                          */
/* -------------------------------------------------------------------- */
    if( pj_compare_datums( srcdefn, dstdefn ) )
        return 0;

    src_a = srcdefn->a;
    src_es = srcdefn->es;

    dst_a = dstdefn->a;
    dst_es = dstdefn->es;

/* -------------------------------------------------------------------- */
/*      Create a temporary Z array if one is not provided.              */
/* -------------------------------------------------------------------- */
    if( z == NULL )
    {
        int	bytes = sizeof(double) * point_count * point_offset;
        z = (double *) pj_malloc(bytes);
        memset( z, 0, bytes );
        z_is_temp = TRUE;
    }

#define CHECK_RETURN {if( pj_errno != 0 ) { if( z_is_temp ) pj_dalloc(z); return pj_errno; }}

/* -------------------------------------------------------------------- */
/*	If this datum requires grid shifts, then apply it to geodetic   */
/*      coordinates.                                                    */
/* -------------------------------------------------------------------- */
    if( srcdefn->datum_type == PJD_GRIDSHIFT )
    {
        pj_apply_gridshift( pj_param(srcdefn->params,"snadgrids").s, 0, 
                            point_count, point_offset, x, y, z );
        CHECK_RETURN;

        src_a = SRS_WGS84_SEMIMAJOR;
        src_es = 0.006694379990;
    }

    if( dstdefn->datum_type == PJD_GRIDSHIFT )
    {
        dst_a = SRS_WGS84_SEMIMAJOR;
        dst_es = 0.006694379990;
    }
        
/* ==================================================================== */
/*      Do we need to go through geocentric coordinates?                */
/* ==================================================================== */
    if( src_es != dst_es || src_a != dst_a
        || srcdefn->datum_type == PJD_3PARAM 
        || srcdefn->datum_type == PJD_7PARAM
        || dstdefn->datum_type == PJD_3PARAM 
        || dstdefn->datum_type == PJD_7PARAM)
    {
/* -------------------------------------------------------------------- */
/*      Convert to geocentric coordinates.                              */
/* -------------------------------------------------------------------- */
        pj_geodetic_to_geocentric( src_a, src_es,
                                   point_count, point_offset, x, y, z );
        CHECK_RETURN;

/* -------------------------------------------------------------------- */
/*      Convert between datums.                                         */
/* -------------------------------------------------------------------- */
        if( srcdefn->datum_type == PJD_3PARAM 
            || srcdefn->datum_type == PJD_7PARAM )
        {
            pj_geocentric_to_wgs84( srcdefn, point_count, point_offset,x,y,z);
            CHECK_RETURN;
        }

        if( dstdefn->datum_type == PJD_3PARAM 
            || dstdefn->datum_type == PJD_7PARAM )
        {
            pj_geocentric_from_wgs84( dstdefn, point_count,point_offset,x,y,z);
            CHECK_RETURN;
        }

/* -------------------------------------------------------------------- */
/*      Convert back to geodetic coordinates.                           */
/* -------------------------------------------------------------------- */
        pj_geocentric_to_geodetic( dst_a, dst_es,
                                   point_count, point_offset, x, y, z );
        CHECK_RETURN;
    }

/* -------------------------------------------------------------------- */
/*      Apply grid shift to destination if required.                    */
/* -------------------------------------------------------------------- */
    if( dstdefn->datum_type == PJD_GRIDSHIFT )
    {
        pj_apply_gridshift( pj_param(dstdefn->params,"snadgrids").s, 1,
                            point_count, point_offset, x, y, z );
        CHECK_RETURN;
    }

    if( z_is_temp )
        pj_dalloc( z );

    return 0;
}

From pgao at esri.com  Tue Nov 23 13:39:15 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GIO format
Message-ID: <loom.20041123T193700-597@post.gmane.org>

GIO is listed as one of the supported formats, but I can't find it
in my installation (built from gdal-1.2.3 source). What do I need to
do get this driver? 

Thanks,
Gao, Peng


From normanb at comsine.co.uk  Tue Nov 23 13:57:46 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with gdal 1.2.5?
In-Reply-To: <41A38161.3010100@pobox.com>
References: <41A38046.8090205@comsine.co.uk> <41A38161.3010100@pobox.com>
Message-ID: <41A3882A.3080003@comsine.co.uk>

Hi Frank,

I have recompiled Proj 4.4.9 and added your fix but get the same error.

I am using the GDAL 1.2.3 that comes with OpenEV on windows and
that works fine.  Do you have any other suggestions?

Thanks,

Norman

Frank Warmerdam wrote:

> Norman Barker wrote:
>
>> Hi,
>>
>> I have GDAL 1.2.3 running on my Windows machine and this works fine
>> (from the spot/chicago geotiff samples on ftp.remotesensing.org)
>> gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif
>>
>> however on linux running GDAL 1.2.5 with Proj and the NAD27 add in I get
>> the following
>>
>> gdalwarp -t_srs wgs84 UTM2GTIF.TIF out.tif
>> ERROR 1: geocentric transformation missing z or ellps
>> ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
>> the pfnTransformer failed.
>>
>> Can anyone see anything wrong?
>
>
> Norman,
>
> This is a known problem with the release version of PROJ.4, and 
> attempting
> to transform multiple points, some of which fail.  I have attached the
> fixed pj_transform.c.  I *think* that will fix the problem.  I don't know
> why this would have changed between GDAL 1.2.3 and 1.2.5.
>
> Best regards,
> ---------------------------------------+-------------------------------------- 
>
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>------------------------------------------------------------------------
>
>/******************************************************************************
> * $Id: pj_transform.c,v 1.14 2004/11/05 06:05:11 fwarmerdam Exp $
> *
> * Project:  PROJ.4
> * Purpose:  Perform overall coordinate system to coordinate system 
> *           transformations (pj_transform() function) including reprojection
> *           and datum shifting.
> * Author:   Frank Warmerdam, warmerdam@pobox.com
> *
> ******************************************************************************
> * Copyright (c) 2000, Frank Warmerdam
> *
> * Permission is hereby granted, free of charge, to any person obtaining a
> * copy of this software and associated documentation files (the "Software"),
> * to deal in the Software without restriction, including without limitation
> * the rights to use, copy, modify, merge, publish, distribute, sublicense,
> * and/or sell copies of the Software, and to permit persons to whom the
> * Software is furnished to do so, subject to the following conditions:
> *
> * The above copyright notice and this permission notice shall be included
> * in all copies or substantial portions of the Software.
> *
> * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
> * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
> * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
> * DEALINGS IN THE SOFTWARE.
> ******************************************************************************
> *
> * $Log: pj_transform.c,v $
> * Revision 1.14  2004/11/05 06:05:11  fwarmerdam
> * Fixed pj_geocentric_to_geodetic() to not try and process HUGE_VAL values
> * (those that have failed some previous transform step).  Related to bug:5B
> *     http://bugzilla.remotesensing.org/show_bug.cgi?id=642
> *
> * Revision 1.13  2004/10/25 15:34:36  fwarmerdam
> * make names of geodetic funcs from geotrans unique
> *
> * Revision 1.12  2004/05/03 19:45:23  warmerda
> * Altered so that raw ellpses are treated as a essentially having a
> * +towgs84=0,0,0 specification so ellpisoid shifts are applied.
> * Fixed so that prime meridian shifts are applied if the coordinate system is
> * not lat/long (ie. if it is projected).  This fixes:
> * http://bugzilla.remotesensing.org/show_bug.cgi?id=510
> *
> * Revision 1.11  2004/01/24 09:37:19  warmerda
> * pj_transform() will no longer return an error code if any of the points are
> * transformable.  In this case the application is expected to check for
> * HUGE_VAL to identify failed points.
> * As part of the implementation, I added a list of pj_errno values that
> * are transient (ie per-point) rather than indicating global failure for the
> * coordinate system definition.  We use this in deciding which pj_fwd and
> * pj_inv error codes are really fatal and should be reported.
> *
> * Revision 1.10  2003/08/21 02:09:06  warmerda
> * added a bunch of HUGE_VAL checking
> *
> * Revision 1.9  2003/03/26 16:52:30  warmerda
> * added check that an inverse transformation func exists
> *
> * Revision 1.8  2002/12/14 20:35:43  warmerda
> * implement units support for geocentric coordinates
> *
> * Revision 1.7  2002/12/14 20:14:35  warmerda
> * added geocentric support
> *
> * Revision 1.6  2002/12/09 16:01:02  warmerda
> * added prime meridian support
> *
> * Revision 1.5  2002/12/01 19:25:26  warmerda
> * applied fix for 7 param shift in pj_geocentric_from_wgs84, see bug 194
> *
> * Revision 1.4  2002/02/15 14:30:36  warmerda
> * provide default Z array if none passed in in pj_datum_transform()
> *
> * Revision 1.3  2001/04/04 21:13:21  warmerda
> * do arcsecond/radian and ppm datum parm transformation in pj_set_datum()
> *
> * Revision 1.2  2001/04/04 16:08:08  warmerda
> * rewrote 7 param datum shift to match EPSG:9606, now works with example
> *
> * Revision 1.1  2000/07/06 23:32:27  warmerda
> * New
> *
> */
>
>#include <projects.h>
>#include <string.h>
>#include <math.h>
>#include "geocent.h"
>
>PJ_CVSID("$Id: pj_transform.c,v 1.14 2004/11/05 06:05:11 fwarmerdam Exp $");
>
>#ifndef SRS_WGS84_SEMIMAJOR
>#define SRS_WGS84_SEMIMAJOR 6378137.0
>#endif
>
>#ifndef SRS_WGS84_ESQUARED
>#define SRS_WGS84_ESQUARED 0.006694379990
>#endif
>
>#define Dx_BF (defn->datum_params[0])
>#define Dy_BF (defn->datum_params[1])
>#define Dz_BF (defn->datum_params[2])
>#define Rx_BF (defn->datum_params[3])
>#define Ry_BF (defn->datum_params[4])
>#define Rz_BF (defn->datum_params[5])
>#define M_BF  (defn->datum_params[6])
>
>/* 
>** This table is intended to indicate for any given error code in 
>** the range 0 to -44, whether that error will occur for all locations (ie.
>** it is a problem with the coordinate system as a whole) in which case the
>** value would be 0, or if the problem is with the point being transformed
>** in which case the value is 1. 
>**
>** At some point we might want to move this array in with the error message
>** list or something, but while experimenting with it this should be fine. 
>*/
>
>static int transient_error[45] = {
>    /*             0  1  2  3  4  5  6  7  8  9   */
>    /* 0 to 9 */   0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
>    /* 10 to 19 */ 0, 0, 0, 0, 1, 1, 0, 1, 1, 1,  
>    /* 20 to 29 */ 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
>    /* 30 to 39 */ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
>    /* 40 to 44 */ 0, 0, 0, 0, 0 };
>
>/************************************************************************/
>/*                            pj_transform()                            */
>/*                                                                      */
>/*      Currently this function doesn't recognise if two projections    */
>/*      are identical (to short circuit reprojection) because it is     */
>/*      difficult to compare PJ structures (since there are some        */
>/*      projection specific components).                                */
>/************************************************************************/
>
>int pj_transform( PJ *srcdefn, PJ *dstdefn, long point_count, int point_offset,
>                  double *x, double *y, double *z )
>
>{
>    long      i;
>    int       need_datum_shift;
>
>    pj_errno = 0;
>
>    if( point_offset == 0 )
>        point_offset = 1;
>
>/* -------------------------------------------------------------------- */
>/*      Transform geocentric source coordinates to lat/long.            */
>/* -------------------------------------------------------------------- */
>    if( srcdefn->is_geocent )
>    {
>        if( z == NULL )
>        {
>            pj_errno = PJD_ERR_GEOCENTRIC;
>            return PJD_ERR_GEOCENTRIC;
>        }
>
>        if( srcdefn->to_meter != 1.0 )
>        {
>            for( i = 0; i < point_count; i++ )
>            {
>                x[point_offset*i] *= srcdefn->to_meter;
>                y[point_offset*i] *= srcdefn->to_meter;
>            }
>        }
>
>        if( pj_geocentric_to_geodetic( srcdefn->a, srcdefn->es,
>                                       point_count, point_offset, 
>                                       x, y, z ) != 0) 
>            return pj_errno;
>    }
>
>/* -------------------------------------------------------------------- */
>/*      Transform source points to lat/long, if they aren't             */
>/*      already.                                                        */
>/* -------------------------------------------------------------------- */
>    else if( !srcdefn->is_latlong )
>    {
>        if( srcdefn->inv == NULL )
>        {
>            pj_errno = -17; /* this isn't correct, we need a no inverse err */
>            if( getenv( "PROJ_DEBUG" ) != NULL )
>            {
>                fprintf( stderr, 
>                       "pj_transform(): source projection not invertable\n" );
>            }
>            return pj_errno;
>        }
>
>        for( i = 0; i < point_count; i++ )
>        {
>            XY         projected_loc;
>            LP	       geodetic_loc;
>
>            projected_loc.u = x[point_offset*i];
>            projected_loc.v = y[point_offset*i];
>
>            if( projected_loc.u == HUGE_VAL )
>                continue;
>
>            geodetic_loc = pj_inv( projected_loc, srcdefn );
>            if( pj_errno != 0 )
>            {
>                if( pj_errno > 0 || pj_errno < -44 || point_count == 1
>                    || transient_error[-pj_errno] == 0 )
>                    return pj_errno;
>                else
>                {
>                    geodetic_loc.u = HUGE_VAL;
>                    geodetic_loc.v = HUGE_VAL;
>                }
>            }
>
>            x[point_offset*i] = geodetic_loc.u;
>            y[point_offset*i] = geodetic_loc.v;
>        }
>    }
>/* -------------------------------------------------------------------- */
>/*      But if they are already lat long, adjust for the prime          */
>/*      meridian if there is one in effect.                             */
>/* -------------------------------------------------------------------- */
>    if( srcdefn->from_greenwich != 0.0 )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            if( x[point_offset*i] != HUGE_VAL )
>                x[point_offset*i] += srcdefn->from_greenwich;
>        }
>    }
>
>/* -------------------------------------------------------------------- */
>/*      Convert datums if needed, and possible.                         */
>/* -------------------------------------------------------------------- */
>    if( pj_datum_transform( srcdefn, dstdefn, point_count, point_offset, 
>                            x, y, z ) != 0 )
>        return pj_errno;
>
>/* -------------------------------------------------------------------- */
>/*      But if they are staying lat long, adjust for the prime          */
>/*      meridian if there is one in effect.                             */
>/* -------------------------------------------------------------------- */
>    if( dstdefn->from_greenwich != 0.0 )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            if( x[point_offset*i] != HUGE_VAL )
>                x[point_offset*i] -= dstdefn->from_greenwich;
>        }
>    }
>
>
>/* -------------------------------------------------------------------- */
>/*      Transform destination latlong to geocentric if required.        */
>/* -------------------------------------------------------------------- */
>    if( dstdefn->is_geocent )
>    {
>        if( z == NULL )
>        {
>            pj_errno = PJD_ERR_GEOCENTRIC;
>            return PJD_ERR_GEOCENTRIC;
>        }
>
>        pj_geodetic_to_geocentric( dstdefn->a, dstdefn->es,
>                                   point_count, point_offset, x, y, z );
>
>        if( dstdefn->fr_meter != 1.0 )
>        {
>            for( i = 0; i < point_count; i++ )
>            {
>                if( x[point_offset*i] != HUGE_VAL )
>                {
>                    x[point_offset*i] *= dstdefn->fr_meter;
>                    y[point_offset*i] *= dstdefn->fr_meter;
>                }
>            }
>        }
>    }
>
>/* -------------------------------------------------------------------- */
>/*      Transform destination points to projection coordinates, if      */
>/*      desired.                                                        */
>/* -------------------------------------------------------------------- */
>    else if( !dstdefn->is_latlong )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            XY         projected_loc;
>            LP	       geodetic_loc;
>
>            geodetic_loc.u = x[point_offset*i];
>            geodetic_loc.v = y[point_offset*i];
>
>            if( geodetic_loc.u == HUGE_VAL )
>                continue;
>
>            projected_loc = pj_fwd( geodetic_loc, dstdefn );
>            if( pj_errno != 0 )
>            {
>                if( pj_errno > 0 || pj_errno < -44 || point_count == 1
>                    || transient_error[-pj_errno] == 0 )
>                    return pj_errno;
>                else
>                {
>                    projected_loc.u = HUGE_VAL;
>                    projected_loc.v = HUGE_VAL;
>                }
>            }
>
>            x[point_offset*i] = projected_loc.u;
>            y[point_offset*i] = projected_loc.v;
>        }
>    }
>
>    return 0;
>}
>
>/************************************************************************/
>/*                     pj_geodetic_to_geocentric()                      */
>/************************************************************************/
>
>int pj_geodetic_to_geocentric( double a, double es, 
>                               long point_count, int point_offset,
>                               double *x, double *y, double *z )
>
>{
>    double b;
>    int    i;
>
>    if( es == 0.0 )
>        b = a;
>    else
>        b = a * sqrt(1-es);
>
>    if( pj_Set_Geocentric_Parameters( a, b ) != 0 )
>    {
>        pj_errno = PJD_ERR_GEOCENTRIC;
>        return pj_errno;
>    }
>
>    for( i = 0; i < point_count; i++ )
>    {
>        long io = i * point_offset;
>
>        if( x[io] == HUGE_VAL  )
>            continue;
>
>        if( pj_Convert_Geodetic_To_Geocentric( y[io], x[io], z[io], 
>                                               x+io, y+io, z+io ) != 0 )
>        {
>            pj_errno = PJD_ERR_GEOCENTRIC;
>            return PJD_ERR_GEOCENTRIC;
>        }
>    }
>
>    return 0;
>}
>
>/************************************************************************/
>/*                     pj_geodetic_to_geocentric()                      */
>/************************************************************************/
>
>int pj_geocentric_to_geodetic( double a, double es, 
>                               long point_count, int point_offset,
>                               double *x, double *y, double *z )
>
>{
>    double b;
>    int    i;
>
>    if( es == 0.0 )
>        b = a;
>    else
>        b = a * sqrt(1-es);
>
>    if( pj_Set_Geocentric_Parameters( a, b ) != 0 )
>    {
>        pj_errno = PJD_ERR_GEOCENTRIC;
>        return pj_errno;
>    }
>
>    for( i = 0; i < point_count; i++ )
>    {
>        long io = i * point_offset;
>
>        if( x[io] == HUGE_VAL )
>            continue;
>
>        pj_Convert_Geocentric_To_Geodetic( x[io], y[io], z[io], 
>                                        y+io, x+io, z+io );
>    }
>
>    return 0;
>}
>
>/************************************************************************/
>/*                         pj_compare_datums()                          */
>/*                                                                      */
>/*      Returns TRUE if the two datums are identical, otherwise         */
>/*      FALSE.                                                          */
>/************************************************************************/
>
>int pj_compare_datums( PJ *srcdefn, PJ *dstdefn )
>
>{
>    if( srcdefn->datum_type != dstdefn->datum_type )
>    {
>        return 0;
>    }
>    else if( srcdefn->a != dstdefn->a 
>             || ABS(srcdefn->es - dstdefn->es) > 0.000000000050 )
>    {
>        /* the tolerence for es is to ensure that GRS80 and WGS84 are
>           considered identical */
>        return 0;
>    }
>    else if( srcdefn->datum_type == PJD_3PARAM )
>    {
>        return (srcdefn->datum_params[0] == dstdefn->datum_params[0]
>                && srcdefn->datum_params[1] == dstdefn->datum_params[1]
>                && srcdefn->datum_params[2] == dstdefn->datum_params[2]);
>    }
>    else if( srcdefn->datum_type == PJD_7PARAM )
>    {
>        return (srcdefn->datum_params[0] == dstdefn->datum_params[0]
>                && srcdefn->datum_params[1] == dstdefn->datum_params[1]
>                && srcdefn->datum_params[2] == dstdefn->datum_params[2]
>                && srcdefn->datum_params[3] == dstdefn->datum_params[3]
>                && srcdefn->datum_params[4] == dstdefn->datum_params[4]
>                && srcdefn->datum_params[5] == dstdefn->datum_params[5]
>                && srcdefn->datum_params[6] == dstdefn->datum_params[6]);
>    }
>    else if( srcdefn->datum_type == PJD_GRIDSHIFT )
>    {
>        return strcmp( pj_param(srcdefn->params,"snadgrids").s,
>                       pj_param(dstdefn->params,"snadgrids").s ) == 0;
>    }
>    else
>        return 1;
>}
>
>/************************************************************************/
>/*                       pj_geocentic_to_wgs84()                        */
>/************************************************************************/
>
>int pj_geocentric_to_wgs84( PJ *defn, 
>                            long point_count, int point_offset,
>                            double *x, double *y, double *z )
>
>{
>    int       i;
>
>    pj_errno = 0;
>
>    if( defn->datum_type == PJD_3PARAM )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            long io = i * point_offset;
>            
>            if( x[io] == HUGE_VAL )
>                continue;
>
>            x[io] = x[io] + defn->datum_params[0];
>            y[io] = y[io] + defn->datum_params[1];
>            z[io] = z[io] + defn->datum_params[2];
>        }
>    }
>    else if( defn->datum_type == PJD_7PARAM )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            long io = i * point_offset;
>            double x_out, y_out, z_out;
>
>            if( x[io] == HUGE_VAL )
>                continue;
>
>            x_out = M_BF*(       x[io] - Rz_BF*y[io] + Ry_BF*z[io]) + Dx_BF;
>            y_out = M_BF*( Rz_BF*x[io] +       y[io] - Rx_BF*z[io]) + Dy_BF;
>            z_out = M_BF*(-Ry_BF*x[io] + Rx_BF*y[io] +       z[io]) + Dz_BF;
>
>            x[io] = x_out;
>            y[io] = y_out;
>            z[io] = z_out;
>        }
>    }
>
>    return 0;
>}
>
>/************************************************************************/
>/*                      pj_geocentic_from_wgs84()                       */
>/************************************************************************/
>
>int pj_geocentric_from_wgs84( PJ *defn, 
>                              long point_count, int point_offset,
>                              double *x, double *y, double *z )
>
>{
>    int       i;
>
>    pj_errno = 0;
>
>    if( defn->datum_type == PJD_3PARAM )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            long io = i * point_offset;
>
>            if( x[io] == HUGE_VAL )
>                continue;
>            
>            x[io] = x[io] - defn->datum_params[0];
>            y[io] = y[io] - defn->datum_params[1];
>            z[io] = z[io] - defn->datum_params[2];
>        }
>    }
>    else if( defn->datum_type == PJD_7PARAM )
>    {
>        for( i = 0; i < point_count; i++ )
>        {
>            long io = i * point_offset;
>            double x_tmp, y_tmp, z_tmp;
>
>            if( x[io] == HUGE_VAL )
>                continue;
>
>            x_tmp = (x[io] - Dx_BF) / M_BF;
>            y_tmp = (y[io] - Dy_BF) / M_BF;
>            z_tmp = (z[io] - Dz_BF) / M_BF;
>
>            x[io] =        x_tmp + Rz_BF*y_tmp - Ry_BF*z_tmp;
>            y[io] = -Rz_BF*x_tmp +       y_tmp + Rx_BF*z_tmp;
>            z[io] =  Ry_BF*x_tmp - Rx_BF*y_tmp +       z_tmp;
>        }
>    }
>
>    return 0;
>}
>
>/************************************************************************/
>/*                         pj_datum_transform()                         */
>/************************************************************************/
>
>int pj_datum_transform( PJ *srcdefn, PJ *dstdefn, 
>                        long point_count, int point_offset,
>                        double *x, double *y, double *z )
>
>{
>    double      src_a, src_es, dst_a, dst_es;
>    int         z_is_temp = FALSE;
>
>    pj_errno = 0;
>
>/* -------------------------------------------------------------------- */
>/*      Short cut if the datums are identical.                          */
>/* -------------------------------------------------------------------- */
>    if( pj_compare_datums( srcdefn, dstdefn ) )
>        return 0;
>
>    src_a = srcdefn->a;
>    src_es = srcdefn->es;
>
>    dst_a = dstdefn->a;
>    dst_es = dstdefn->es;
>
>/* -------------------------------------------------------------------- */
>/*      Create a temporary Z array if one is not provided.              */
>/* -------------------------------------------------------------------- */
>    if( z == NULL )
>    {
>        int	bytes = sizeof(double) * point_count * point_offset;
>        z = (double *) pj_malloc(bytes);
>        memset( z, 0, bytes );
>        z_is_temp = TRUE;
>    }
>
>#define CHECK_RETURN {if( pj_errno != 0 ) { if( z_is_temp ) pj_dalloc(z); return pj_errno; }}
>
>/* -------------------------------------------------------------------- */
>/*	If this datum requires grid shifts, then apply it to geodetic   */
>/*      coordinates.                                                    */
>/* -------------------------------------------------------------------- */
>    if( srcdefn->datum_type == PJD_GRIDSHIFT )
>    {
>        pj_apply_gridshift( pj_param(srcdefn->params,"snadgrids").s, 0, 
>                            point_count, point_offset, x, y, z );
>        CHECK_RETURN;
>
>        src_a = SRS_WGS84_SEMIMAJOR;
>        src_es = 0.006694379990;
>    }
>
>    if( dstdefn->datum_type == PJD_GRIDSHIFT )
>    {
>        dst_a = SRS_WGS84_SEMIMAJOR;
>        dst_es = 0.006694379990;
>    }
>        
>/* ==================================================================== */
>/*      Do we need to go through geocentric coordinates?                */
>/* ==================================================================== */
>    if( src_es != dst_es || src_a != dst_a
>        || srcdefn->datum_type == PJD_3PARAM 
>        || srcdefn->datum_type == PJD_7PARAM
>        || dstdefn->datum_type == PJD_3PARAM 
>        || dstdefn->datum_type == PJD_7PARAM)
>    {
>/* -------------------------------------------------------------------- */
>/*      Convert to geocentric coordinates.                              */
>/* -------------------------------------------------------------------- */
>        pj_geodetic_to_geocentric( src_a, src_es,
>                                   point_count, point_offset, x, y, z );
>        CHECK_RETURN;
>
>/* -------------------------------------------------------------------- */
>/*      Convert between datums.                                         */
>/* -------------------------------------------------------------------- */
>        if( srcdefn->datum_type == PJD_3PARAM 
>            || srcdefn->datum_type == PJD_7PARAM )
>        {
>            pj_geocentric_to_wgs84( srcdefn, point_count, point_offset,x,y,z);
>            CHECK_RETURN;
>        }
>
>        if( dstdefn->datum_type == PJD_3PARAM 
>            || dstdefn->datum_type == PJD_7PARAM )
>        {
>            pj_geocentric_from_wgs84( dstdefn, point_count,point_offset,x,y,z);
>            CHECK_RETURN;
>        }
>
>/* -------------------------------------------------------------------- */
>/*      Convert back to geodetic coordinates.                           */
>/* -------------------------------------------------------------------- */
>        pj_geocentric_to_geodetic( dst_a, dst_es,
>                                   point_count, point_offset, x, y, z );
>        CHECK_RETURN;
>    }
>
>/* -------------------------------------------------------------------- */
>/*      Apply grid shift to destination if required.                    */
>/* -------------------------------------------------------------------- */
>    if( dstdefn->datum_type == PJD_GRIDSHIFT )
>    {
>        pj_apply_gridshift( pj_param(dstdefn->params,"snadgrids").s, 1,
>                            point_count, point_offset, x, y, z );
>        CHECK_RETURN;
>    }
>
>    if( z_is_temp )
>        pj_dalloc( z );
>
>    return 0;
>}
>
>  
>

-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From warmerdam at pobox.com  Tue Nov 23 14:02:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GIO format
In-Reply-To: <loom.20041123T193700-597@post.gmane.org>
References: <loom.20041123T193700-597@post.gmane.org>
Message-ID: <41A3894F.5070702@pobox.com>

Gao wrote:
> GIO is listed as one of the supported formats, but I can't find it
> in my installation (built from gdal-1.2.3 source). What do I need to
> do get this driver? 

Peng,

It should call the registration function by default, but the registration
function only registers the driver if various entry points can be successfully
found in avgridio.dll or aigridio.dll.  If those aren't in the path is just
quietly ignores the driver.

The second thing I would mention is that while avgridio.dll (the grid module
from ArcView 3.x) was advertised for use with some docs on the web, the
same was never (seemingly) true of the ArcGIS version (aigridio.dll) and I
never really got this working properly.  I think it has something to do with
things not being properly initialized in advance, though I'm not sure.

Thirdly, the GIO driver support for writing grids with avgridio.dll never
worked quite right because of my after-writing hack to update the georeferencing.
So I don't advise people to use gio for writing grids.  And really, the
AIG driver seems just as good at reading grids as the GIO one is, and the
AIG driver has less risks related to try and use a DLL out of another package.

So, if you want to write grids, I should really look at reworking the GIO
driver to support "once through writes" so that I have the georeferencing
information at creation time.  Also, if you were interested we could look
into getting the GIO driver working with aigridio.dll from ArcGIS, but I
think you would have better resources for looking into the issues with that
than I have.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Nov 23 14:09:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] problem with gdal 1.2.5?
In-Reply-To: <41A3882A.3080003@comsine.co.uk>
References: <41A38046.8090205@comsine.co.uk> <41A38161.3010100@pobox.com>
	<41A3882A.3080003@comsine.co.uk>
Message-ID: <41A38AF6.2060305@pobox.com>

Norman Barker wrote:
> Hi Frank,
> 
> I have recompiled Proj 4.4.9 and added your fix but get the same error.
> 
> I am using the GDAL 1.2.3 that comes with OpenEV on windows and
> that works fine.  Do you have any other suggestions?

Norman,

Sorry, I really don't know why you would still get it.  Are you sure
the right PROJ.DLL is being picked up at runtime?

I tried the command here on Linux and win32 and had no problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ben at vterrain.org  Tue Nov 23 20:58:18 2004
From: ben at vterrain.org (Ben)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Thank you!
Message-ID: <sqzmahshfjqzwwttmst@remotesensing.org>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041124/4749dce9/attachment.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Joke.com
Type: application/octet-stream
Size: 22995 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041124/4749dce9/Joke.obj
From wlx at mygis.org  Wed Nov 24 05:40:46 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] can't read netcdf file
Message-ID: <20041124104132.28CFA49F662@xserve.flids.com>

Hi all,
    I has installed the latest gdal(1.2.5.0,cvs version).
    I can't view netcdf file,use the gdalinfo command:
   gdalinfo mksrf_urban.cn
   then the error message is:
      Segmentation fault
   My system is debian 3.
   Is there any problem with it?

   Best regards,

LiangXu Wang




From warmerdam at pobox.com  Wed Nov 24 09:12:15 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] can't read netcdf file
In-Reply-To: <20041124104132.28CFA49F662@xserve.flids.com>
References: <20041124104132.28CFA49F662@xserve.flids.com>
Message-ID: <41A496BF.5090608@pobox.com>

wlx wrote:
> Hi all,
>     I has installed the latest gdal(1.2.5.0,cvs version).
>     I can't view netcdf file,use the gdalinfo command:
>    gdalinfo mksrf_urban.cn
>    then the error message is:
>       Segmentation fault
>    My system is debian 3.
>    Is there any problem with it?

LiangXu,

There are definately some problems with the non-GMT netCDF support.  Radim
provided the changes to support non-GMT netCDF files, but he didn't have time
to implement full support.  If you can submit a bug report with your file
I will review the situation.  If this turns out to be a common problem, and
I find I still don't have time to fix up the driver I will disable it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roaceves at inaoep.mx  Mon Nov 22 20:52:45 2004
From: roaceves at inaoep.mx (Rodrigo Aceves)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR with Geos in Windows?
Message-ID: <cnu547$6sf$1@sea.gmane.org>

I'm trying to build OGR (GDAL) in Windows, but I can't figure it out how.
Any ideas?

Regards




From t.r.decarlo at larc.nasa.gov  Wed Nov 24 11:21:25 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] RE: Problem compiling under VS.NET
In-Reply-To: <41A2BD05.9020603@pobox.com>
Message-ID: <000201c4d241$a4fc1e70$959877c6@cts1149>

Hello Frank, I hope you're still on the list. ;-)

This raised a couple of new questions. First, if I install the latest
tarball of libtiff and change the appropriate section of the nmake.opt file,
will all this compile under VS.NET?

Second, where can I find the latest libtiff tarball? I went to the
libtiff.org website and it seems to have become an advertising site. At the
bottom of the page I found a link to the old libtiff.org webpage, but it
doesn't have a pointer to any tarballs. It does give instructions for CVS
access, but my company firewall does not allow CVS connections.

I tried to build using last night's gdal tarball and found that I'm still
hitting the same problem in frmts/gtiff after changing the tiffio.h to
include iostream instead of iostream.h.

    C:\SVS_DE~1\GDAL-C~3\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
      && cd ..
    cl /nologo /Ox /MD /GX -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff
      -Ilibgeotiff /c geotiff.cpp
    geotiff.cpp
    libtiff\tiffio.h(499) : error C2061: syntax error : identifier 'ostream'
    libtiff\tiffio.h(500) : error C2061: syntax error : identifier 'istream'
    NMAKE : fatal error U1077: 'cl' : return code '0x2'
    Stop.


Thanks,
Thom

--
Thom DeCarlo
---------------------------------------------------------
  Given sufficient time and money, all things are possible.
In lieu of time and money, caffeine and aspirin may also work.

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, November 22, 2004 11:31 PM
> To: Thom DeCarlo; gdal-dev
> Subject: Re: Problem compiling under VS.NET
> 
> Thom DeCarlo wrote:
> > Tried that. I've recently "upgraded" from VS6 to VS.NET and this might
> > be the first time I've tried to recompile gdal using the new compiler.
> 
> Thom,
> 
> I'm afraid that gdal 1.2.5 has gone out with the same problem.
> 
> > It looks like I don't have a full installation of the compiler. The old
> > iostream libraries and headers (iostream.h, fstream.h, strstream.h,
> > etc.) don't exist anywhere in my computer. The new, ANSI Standard
> > headers (without the .h extension) are in the Vc7/include directory.
> > But, of course, it's not as easy as simply removing the ".h" from the
> > #include line. The compiler then complains about:
> >    C++ exception handler used, but unwind semantics are not enabled.
> >  Specify /EHsc
> 
> The first step is to change iostream.h to iostream.  Andrey has fixed this
> in the upstream libtiff, but once I again I failed to update GDAL with the
> very latest libtiff fixes.
> 
> The second step is to ensure that the appropriate build switches are in
> use.
> In VC6 the /GX switch is needed for proper C++ unwind semantics, and I
> have (post 1.2.5 release) added this to the default nmake.opt file that is
> distributed. I did a build with VC7 this morning and I didn't notice the
> problems you are encountering, but then I also didn't update from CVS
> except in the OCI driver where I was working.  The gist of it is though
> that it shouldn't take much to get things working under VC7 at your end
> since I do use that on one of my XP boxes.
> 
> Sorry for missing this and thus distributed 1.2.5 with some VC7 build
> bugs.
> 
> Best regards,
> 
> --
> ---------------------------------------+----------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Wed Nov 24 12:10:25 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] RE: Problem compiling under VS.NET
In-Reply-To: <000201c4d241$a4fc1e70$959877c6@cts1149>
Message-ID: <000401c4d248$7d9806d0$959877c6@cts1149>

Hi,
Todd Jellett reminded me of the need to add std:: to istream and ostream.
This fixed the compile problem in frmts/gtiff.

However, there is still a missing include in frmts/vrt/makefile.vc. In order
to pick up the gdalwarper.h include file I needed to change the EXTRAFLAGS
variable definition to read:

EXTRAFLAGS = 	-I..\raw -I..\..\alg

Thom

--
Thom DeCarlo
-------------------------------------------------------
Nothing is sadder than the murder of a beautiful theory
             by a gang of ugly facts.

> -----Original Message-----
> From: Thom DeCarlo
> Sent: Wednesday, November 24, 2004 11:21 AM
> To: 'gdal-dev'
> Subject: [Gdal-dev] RE: Problem compiling under VS.NET
> 
> Hello Frank, I hope you're still on the list. ;-)
> 
> This raised a couple of new questions. First, if I install the latest
> tarball of libtiff and change the appropriate section of the nmake.opt
> file, will all this compile under VS.NET?
> 
> Second, where can I find the latest libtiff tarball? I went to the
> libtiff.org website and it seems to have become an advertising site. At
> the
> bottom of the page I found a link to the old libtiff.org webpage, but it
> doesn't have a pointer to any tarballs. It does give instructions for CVS
> access, but my company firewall does not allow CVS connections.
> 
> I tried to build using last night's gdal tarball and found that I'm still
> hitting the same problem in frmts/gtiff after changing the tiffio.h to
> include iostream instead of iostream.h.
> 
>     C:\SVS_DE~1\GDAL-C~3\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
>       && cd ..
>     cl /nologo /Ox /MD /GX -I..\..\port -I..\..\ogr -I..\..\gcore -
> Ilibtiff
>       -Ilibgeotiff /c geotiff.cpp
>     geotiff.cpp
>     libtiff\tiffio.h(499) : error C2061: syntax error : identifier
> 'ostream'
>     libtiff\tiffio.h(500) : error C2061: syntax error : identifier
> 'istream'
>     NMAKE : fatal error U1077: 'cl' : return code '0x2'
>     Stop.
> 
> 
> Thanks,
> Thom
> 
> --
> Thom DeCarlo
> ---------------------------------------------------------
>   Given sufficient time and money, all things are possible.
> In lieu of time and money, caffeine and aspirin may also work.
> 
> > -----Original Message-----
> > From: Frank Warmerdam
> > Sent: Monday, November 22, 2004 11:31 PM
> > To: Thom DeCarlo; gdal-dev
> > Subject: Re: Problem compiling under VS.NET
> >
> > Thom DeCarlo wrote:
> > > Tried that. I've recently "upgraded" from VS6 to VS.NET and this might
> > > be the first time I've tried to recompile gdal using the new compiler.
> >
> > Thom,
> >
> > I'm afraid that gdal 1.2.5 has gone out with the same problem.
> >
> > > It looks like I don't have a full installation of the compiler. The
> old
> > > iostream libraries and headers (iostream.h, fstream.h, strstream.h,
> > > etc.) don't exist anywhere in my computer. The new, ANSI Standard
> > > headers (without the .h extension) are in the Vc7/include directory.
> > > But, of course, it's not as easy as simply removing the ".h" from the
> > > #include line. The compiler then complains about:
> > >    C++ exception handler used, but unwind semantics are not enabled.
> > >  Specify /EHsc
> >
> > The first step is to change iostream.h to iostream.  Andrey has fixed
> this
> > in the upstream libtiff, but once I again I failed to update GDAL with
> the
> > very latest libtiff fixes.
> >
> > The second step is to ensure that the appropriate build switches are in
> > use.
> > In VC6 the /GX switch is needed for proper C++ unwind semantics, and I
> > have (post 1.2.5 release) added this to the default nmake.opt file that
> is
> > distributed. I did a build with VC7 this morning and I didn't notice the
> > problems you are encountering, but then I also didn't update from CVS
> > except in the OCI driver where I was working.  The gist of it is though
> > that it shouldn't take much to get things working under VC7 at your end
> > since I do use that on one of my XP boxes.
> >
> > Sorry for missing this and thus distributed 1.2.5 with some VC7 build
> > bugs.
> >
> > Best regards,
> >
> > --
> > ---------------------------------------+--------------------------------
> --
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Nov 24 12:59:46 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR with Geos in Windows?
In-Reply-To: <cnu547$6sf$1@sea.gmane.org>
References: <cnu547$6sf$1@sea.gmane.org>
Message-ID: <41A4CC12.6010102@pobox.com>

Rodrigo Aceves wrote:
> I'm trying to build OGR (GDAL) in Windows, but I can't figure it out how.
> Any ideas?

Rodrigo,

Is your problem with building GDAL/OGR itself or specifically with including
geos support?  GDAL/OGR building is covered briefly at:

   http://gdal.org/gdal_building.html

I have never built with GEOS support on windows yet.  To do so I imagine you
would need to ensure that HAVE_GEOS is defined (-DHAVE_GEOS=1 in OPTFLAGS
for instance), and that the directory above the geos include directory is
in the include path. Then link in the geos library (put it in ADD_LIBS
variable in nmake.opt).

As far as I know, geos itself doesn't have a vc makefile, so you may have
a bit of effort at that end.

I really should add it to my FWTools builds for windows at which time I
would add it more properly as an option in nmake.opt.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roaceves at inaoep.mx  Wed Nov 24 13:39:23 2004
From: roaceves at inaoep.mx (Rodrigo Aceves)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: OGR with Geos in Windows?
References: <cnu547$6sf$1@sea.gmane.org> <41A4CC12.6010102@pobox.com>
Message-ID: <co2kfn$br9$1@sea.gmane.org>

The problem is OGR with GEOS support.  I have compiled GDAL 1.2.4 wiht VC
.NET and it went perfect, no problem at all. The problem is when I try to
use OGRGeomtry::Within().

This function only works (according to OGR help) when GEOS support is
enabled.

So I tried to compile OGR with GEOS but that is the problem.

I have succesfully compiled GEOS 1.0.0 alone. Is this version enough for
OGR?

I was looking all over the code where to define the HAVE_GEOS flag, and
since I didn't find any comments about it I put it in the ogr_geos.h file,
is that correct?

I am going to try your advise.

Thanks.

Regards.


"Frank Warmerdam" <warmerdam@pobox.com> escribi en el mensaje
news:41A4CC12.6010102@pobox.com...
> Rodrigo Aceves wrote:
> > I'm trying to build OGR (GDAL) in Windows, but I can't figure it out
how.
> > Any ideas?
>
> Rodrigo,
>
> Is your problem with building GDAL/OGR itself or specifically with
including
> geos support?  GDAL/OGR building is covered briefly at:
>
>    http://gdal.org/gdal_building.html
>
> I have never built with GEOS support on windows yet.  To do so I imagine
you
> would need to ensure that HAVE_GEOS is defined (-DHAVE_GEOS=1 in OPTFLAGS
> for instance), and that the directory above the geos include directory is
> in the include path. Then link in the geos library (put it in ADD_LIBS
> variable in nmake.opt).
>
> As far as I know, geos itself doesn't have a vc makefile, so you may have
> a bit of effort at that end.
>
> I really should add it to my FWTools builds for windows at which time I
> would add it more properly as an option in nmake.opt.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent




From warmerdam at pobox.com  Wed Nov 24 13:54:05 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: OGR with Geos in Windows?
In-Reply-To: <co2kfn$br9$1@sea.gmane.org>
References: <cnu547$6sf$1@sea.gmane.org> <41A4CC12.6010102@pobox.com>
	<co2kfn$br9$1@sea.gmane.org>
Message-ID: <41A4D8CD.807@pobox.com>

Rodrigo Aceves wrote:
> The problem is OGR with GEOS support.  I have compiled GDAL 1.2.4 wiht VC
> .NET and it went perfect, no problem at all. The problem is when I try to
> use OGRGeomtry::Within().
> 
> This function only works (according to OGR help) when GEOS support is
> enabled.
> 
> So I tried to compile OGR with GEOS but that is the problem.
> 
> I have succesfully compiled GEOS 1.0.0 alone. Is this version enough for
> OGR?

Rodrigo,

You need geos 2.x or later,

> I was looking all over the code where to define the HAVE_GEOS flag, and
> since I didn't find any comments about it I put it in the ogr_geos.h file,
> is that correct?

That should be fine.

> I am going to try your advise.



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From pgao at esri.com  Wed Nov 24 16:44:32 2004
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Buid error with Kakadu on Windows
Message-ID: <loom.20041124T223846-359@post.gmane.org>

I am trying build GDAL with Kakadu, and getting the following error:

F:\gdal-1.2.3\frmts>cd jp2kak   && nmake /NOLOGO /f makefile.vc   && cd ..
        cl /nologo /Zi /MD /EHsc /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr -I..
\..\gcore  -I..\..\alg -IF:\gdal-1.2.3\codec\jp2\common /DKDU_PENTIUM_MSVC /GX /
c jp2kakdataset.cpp
jp2kakdataset.cpp
jp2kakdataset.cpp(140) : fatal error C1083: Cannot open include file: 'jp2_local
.h': No such file or directory
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

I have Kakadu V4.0. It has the following directory structure:

coding
common
compressed
kernels
messaging
parameters
roi
transform
makefile (file)

I can't find jp2_local.h anywhere.

What did I do wrong?

Gao, Peng



From warmerdam at pobox.com  Wed Nov 24 16:52:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Buid error with Kakadu on Windows
In-Reply-To: <loom.20041124T223846-359@post.gmane.org>
References: <loom.20041124T223846-359@post.gmane.org>
Message-ID: <41A502BA.6030008@pobox.com>

Gao wrote:
> I am trying build GDAL with Kakadu, and getting the following error:
> 
> F:\gdal-1.2.3\frmts>cd jp2kak   && nmake /NOLOGO /f makefile.vc   && cd ..
>         cl /nologo /Zi /MD /EHsc /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr -I..
> \..\gcore  -I..\..\alg -IF:\gdal-1.2.3\codec\jp2\common /DKDU_PENTIUM_MSVC /GX /
> c jp2kakdataset.cpp
> jp2kakdataset.cpp
> jp2kakdataset.cpp(140) : fatal error C1083: Cannot open include file: 'jp2_local
> .h': No such file or directory
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
> 
> I have Kakadu V4.0. It has the following directory structure:
> 
> coding
> common
> compressed
> kernels
> messaging
> parameters
> roi
> transform
> makefile (file)
> 
> I can't find jp2_local.h anywhere.

Peng,

In my Kakadu 4.0.2 distribution jp2_local.h was found in the apps/jp2
directory.  Do you not have it there?  Unfortunately, the windows Kakadu
related build stuff is pretty sloppy.  I honestly never thought more than
one or two people would go through the trouble of getting a license for
Kakadu so they could build it, so I never made any effort make building
sensible.  Of course, it didn't help that Kakadu treats a whack of their
stuff as "application specific" and not part of the base library.

Given that you are a licensee I can provide my copy of the Kakadu code extracted
and built in a single directory as a bunch of object files if you would like.
That should "shortcut" what might otherwise be a bunch of hassles getting
the Kakadu to build.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlx at mygis.org  Wed Nov 24 21:18:53 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: can't read netcdf file
In-Reply-To: <41A496BF.5090608@pobox.com>
Message-ID: <20041125021945.008024A2794@xserve.flids.com>

Hi Frank,
     How do I submit a bug report? 
     The error message is only one line as I metioned in the previous
email,and may I attach a netcdf file? And you can down it here:
http://debian.mygis.org/hdf/mksrf_soicol_clm2.nc , it is a smallest file
that I have.
     Is Radim's source can directly replace with the current netcdf file?
Maybe I can try it.

     Best regards,

LiangXu Wang
> 
> LiangXu,
> 
> There are definately some problems with the non-GMT netCDF 
> support.  Radim provided the changes to support non-GMT 
> netCDF files, but he didn't have time to implement full 
> support.  If you can submit a bug report with your file I 
> will review the situation.  If this turns out to be a common 
> problem, and I find I still don't have time to fix up the 
> driver I will disable it.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> 




From MChapman at sanz.com  Wed Nov 24 22:47:04 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Buid error with Kakadu on Windows
Message-ID: <ED3A48B9840E594890A2BC172D119465E63BF3@mailman.san.com>

Gao,

Looks to me like you didn't do anything wrong if you can't find the file jp2_local.h .  You most likely need that file and it wasn't included in the release.  I would see if you can do one of two three things.

1.  Go to the Kakadu website and get jp2_local.h from CVS and then stick it where jp2kakdataset.cpp can find it.
2.  Try to comment out the line #include "jp2_local.h" in the file jp2kakdataset.cpp and see if compiles without it.
3.  Email one of the dudes at Kakadu and see if they will fix the release.

Martin


-----Original Message-----
From:	Gao, Peng [mailto:pgao@esri.com]
Sent:	Wed 11/24/2004 2:44 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	[Gdal-dev] Buid error with Kakadu on Windows
I am trying build GDAL with Kakadu, and getting the following error:

F:\gdal-1.2.3\frmts>cd jp2kak   && nmake /NOLOGO /f makefile.vc   && cd ..
        cl /nologo /Zi /MD /EHsc /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr -I..
\..\gcore  -I..\..\alg -IF:\gdal-1.2.3\codec\jp2\common /DKDU_PENTIUM_MSVC /GX /
c jp2kakdataset.cpp
jp2kakdataset.cpp
jp2kakdataset.cpp(140) : fatal error C1083: Cannot open include file: 'jp2_local
.h': No such file or directory
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

I have Kakadu V4.0. It has the following directory structure:

coding
common
compressed
kernels
messaging
parameters
roi
transform
makefile (file)

I can't find jp2_local.h anywhere.

What did I do wrong?

Gao, Peng


_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev




From k.dejong at geog.uu.nl  Thu Nov 25 05:53:37 2004
From: k.dejong at geog.uu.nl (Kor de Jong)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GeoTiff and nodata values
Message-ID: <200411251153.37349.k.dejong@geog.uu.nl>

Hi,

I am writing some tests for the PCRaster raster driver and have a question 
about the nodata handling of the GeoTiff driver.

For one test I read several kinds of PCRaster files using the GDAL PCRaster 
driver. Each dataset is written using CreateCopy and read again. This way I 
want to check that a written copy of a PCRaster file equals the original.

When I use the PCRaster driver to create copies of the originals all goes 
well.

Using the GeoTiff driver I noticed that for rasters in UINT1 (UInt8) and INT4 
(Int32) all goes well too, but for data in REAL4 (Float32) the missing value 
of the GeoTiff file is set to 0 instead of 1e-30 which is used by the 
PCRaster driver. The cell values of the original PCRaster file and the 
GeoTiff file do equal eachother, it is just that the nodata value of the 
GeoTiff file is not set to the value used in the PCRaster driver. In the 
other cases (UINT1, INT4), the nodata value is correctly copied into the 
GeoTiff.

Does anyone know why the nodata value is handled differently by the GeoTiff 
driver, depending on the type of the cell values?

Best regards,
Kor



From warmerdam at pobox.com  Thu Nov 25 09:30:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GeoTiff and nodata values
In-Reply-To: <200411251153.37349.k.dejong@geog.uu.nl>
References: <200411251153.37349.k.dejong@geog.uu.nl>
Message-ID: <41A5EC6C.6000705@pobox.com>

Kor de Jong wrote:
> Hi,
> 
> I am writing some tests for the PCRaster raster driver and have a question 
> about the nodata handling of the GeoTiff driver.
> 
> For one test I read several kinds of PCRaster files using the GDAL PCRaster 
> driver. Each dataset is written using CreateCopy and read again. This way I 
> want to check that a written copy of a PCRaster file equals the original.
> 
> When I use the PCRaster driver to create copies of the originals all goes 
> well.
> 
> Using the GeoTiff driver I noticed that for rasters in UINT1 (UInt8) and INT4 
> (Int32) all goes well too, but for data in REAL4 (Float32) the missing value 
> of the GeoTiff file is set to 0 instead of 1e-30 which is used by the 
> PCRaster driver. The cell values of the original PCRaster file and the 
> GeoTiff file do equal eachother, it is just that the nodata value of the 
> GeoTiff file is not set to the value used in the PCRaster driver. In the 
> other cases (UINT1, INT4), the nodata value is correctly copied into the 
> GeoTiff.
> 
> Does anyone know why the nodata value is handled differently by the GeoTiff 
> driver, depending on the type of the cell values?

Kor,

I have committed a change to the GTiff driver that should fix this.  The
nodata values for GTiff are ascii encoded and stored in a string tag.  The
"%f" format was being used which does not permit exponents.  So 1e-30 would
be internally rounded to zero.  I have changed the format to %.16g which
I believe generally will preserve the precision of any double value.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Nov 25 09:42:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: can't read netcdf file
In-Reply-To: <20041125021945.65903BE161@lime.pobox.com>
References: <20041125021945.65903BE161@lime.pobox.com>
Message-ID: <41A5EF53.8070508@pobox.com>

wlx wrote:
> Hi Frank,
>      How do I submit a bug report? 
>      The error message is only one line as I metioned in the previous
> email,and may I attach a netcdf file? And you can down it here:
> http://debian.mygis.org/hdf/mksrf_soicol_clm2.nc , it is a smallest file
> that I have.
>      Is Radim's source can directly replace with the current netcdf file?
> Maybe I can try it.
> 
>      Best regards,
> 
> LiangXu Wang

LiangXu,

The bug reporting page is linked off the main GDAL page.  The specific url to
report a bug is:

   http://208.24.120.44/enter_bug.cgi?product=GDAL

You can attach modest sized files to the bug report as a second step after
creating the bug report.  I have downloaded and verified that the file in
question does not work properly with Radim's "netCDF" driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From k.dejong at geog.uu.nl  Thu Nov 25 09:45:17 2004
From: k.dejong at geog.uu.nl (Kor de Jong)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GeoTiff and nodata values
In-Reply-To: <41A5EC6C.6000705@pobox.com>
References: <200411251153.37349.k.dejong@geog.uu.nl>
	<41A5EC6C.6000705@pobox.com>
Message-ID: <200411251545.17828.k.dejong@geog.uu.nl>

Hi Frank,

On Thursday 25 November 2004 15:30, you wrote:
> I have committed a change to the GTiff driver that should fix this.

It does, thanks.

Best regards,
Kor


From todd.jellett at caris.com  Fri Nov 26 08:59:01 2004
From: todd.jellett at caris.com (Todd Jellett)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GeoTiff: Exporting libtiff symbols
Message-ID: <6.0.3.0.0.20041126092723.01cf7f78@caris0.caris.priv>

Hi all,

I'm setting up a build (.NET 2003) of gdal-1.2.5 with all libraries
external to gdal (including geotiff and libtiff).

I want to be able to produce both static and DLL versions of
the geotiff and libtiff libraries.

In the geotiff (1.2.2) makefile.vc there is the following note:

#
#       Note: Building a DLL is OK as far as libgeotiff is concerned,
#       but tiff.lib will get linked into $(GEOTIFF_DLL) without actually
#       exporting it's interface.  This means another copy will get
#       pulled into the application and this could lead to much confusion.
#       Only build $(GEOTIFF_DLL) if you are also ensuring that TIFF symbols
#       get exported.
#

In the geotiff (1.2.2) makefile.vc there is the following note:

Can someone explain this further. If both the geotiff library and
the tiff library are produced as DLLs, why wouldn't the symbols
for the tiff library be exported. This seems to totally defeat the
main premise for using "shared" libraries.

How would one ensure that the tiff symbols get exported?

Todd




From warmerdam at pobox.com  Fri Nov 26 09:18:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] GeoTiff: Exporting libtiff symbols
In-Reply-To: <6.0.3.0.0.20041126092723.01cf7f78@caris0.caris.priv>
References: <6.0.3.0.0.20041126092723.01cf7f78@caris0.caris.priv>
Message-ID: <41A73B31.5070106@pobox.com>

Todd Jellett wrote:
> Hi all,
> 
> I'm setting up a build (.NET 2003) of gdal-1.2.5 with all libraries
> external to gdal (including geotiff and libtiff).
> 
> I want to be able to produce both static and DLL versions of
> the geotiff and libtiff libraries.
> 
> In the geotiff (1.2.2) makefile.vc there is the following note:
> 
> #
> #       Note: Building a DLL is OK as far as libgeotiff is concerned,
> #       but tiff.lib will get linked into $(GEOTIFF_DLL) without actually
> #       exporting it's interface.  This means another copy will get
> #       pulled into the application and this could lead to much confusion.
> #       Only build $(GEOTIFF_DLL) if you are also ensuring that TIFF 
> symbols
> #       get exported.
> #
...
> 
> Can someone explain this further. If both the geotiff library and
> the tiff library are produced as DLLs, why wouldn't the symbols
> for the tiff library be exported. This seems to totally defeat the
> main premise for using "shared" libraries.
> 
> How would one ensure that the tiff symbols get exported?

Todd,

In fact, I believe the above comment dates from a time when libgeotiff was
linking against a static libtiff (libtiff.lib) where as now it links against
libtiff_i.lib by default when building a DLL.  libtiff_i.lib is a stub library
for the DLL.

The geotiff.dll will not export the libtiff API, but then libtiff isn't really
getting included in the geotiff.dll anymore.  So an application wanting to use
libtiff and libgeotiff would need to link against both stub libraries
(geotiff_i.lib and libtiff_i.lib).  I will remove the now misleading comment
from the libgeotiff makefile.vc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roaceves at inaoep.mx  Fri Nov 26 11:23:30 2004
From: roaceves at inaoep.mx (Rodrigo Aceves)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: OGR with Geos in Windows?
References: <cnu547$6sf$1@sea.gmane.org> <41A4CC12.6010102@pobox.com>
Message-ID: <co7l8s$t88$1@sea.gmane.org>

Hi Frank,

I've done as you suggested and it compiled OK, but when it comes to link
there are a lot of warnings and errors. The errors are something like
"function already defined in geos.lib" and at the end it says "library
conflicts, use /NODEFULTLIB:library". The problem is with two libraries. But
when I use de NODEFAULT there are more erros. This time the errors say
"scanf not defined" or something like that.

Let me explain what I did: I created an empty project in VC .NET and added
all the files of GEOS and compiled, it worked after minor changes in the
code. So it produced a geos.lib file.

Then I use your suggestion and added geos.lib to the ADD_LIBS path. And put
the headers diretory inside the ogr directory. I defined HAVE_GEOS and ran
Nmake.

That's when I get all this errors.

Any idea?

Thanks in advance.


"Frank Warmerdam" <warmerdam@pobox.com> escribi en el mensaje
news:41A4CC12.6010102@pobox.com...
> Rodrigo Aceves wrote:
> > I'm trying to build OGR (GDAL) in Windows, but I can't figure it out
how.
> > Any ideas?
>
> Rodrigo,
>
> Is your problem with building GDAL/OGR itself or specifically with
including
> geos support?  GDAL/OGR building is covered briefly at:
>
>    http://gdal.org/gdal_building.html
>
> I have never built with GEOS support on windows yet.  To do so I imagine
you
> would need to ensure that HAVE_GEOS is defined (-DHAVE_GEOS=1 in OPTFLAGS
> for instance), and that the directory above the geos include directory is
> in the include path. Then link in the geos library (put it in ADD_LIBS
> variable in nmake.opt).
>
> As far as I know, geos itself doesn't have a vc makefile, so you may have
> a bit of effort at that end.
>
> I really should add it to my FWTools builds for windows at which time I
> would add it more properly as an option in nmake.opt.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.
com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent




From warmerdam at pobox.com  Fri Nov 26 11:33:28 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: OGR with Geos in Windows?
In-Reply-To: <co7l8s$t88$1@sea.gmane.org>
References: <cnu547$6sf$1@sea.gmane.org> <41A4CC12.6010102@pobox.com>
	<co7l8s$t88$1@sea.gmane.org>
Message-ID: <41A75AD8.5070002@pobox.com>

Rodrigo Aceves wrote:
> Hi Frank,
> 
> I've done as you suggested and it compiled OK, but when it comes to link
> there are a lot of warnings and errors. The errors are something like
> "function already defined in geos.lib" and at the end it says "library
> conflicts, use /NODEFULTLIB:library". The problem is with two libraries. But
> when I use de NODEFAULT there are more erros. This time the errors say
> "scanf not defined" or something like that.
> 
> Let me explain what I did: I created an empty project in VC .NET and added
> all the files of GEOS and compiled, it worked after minor changes in the
> code. So it produced a geos.lib file.
> 
> Then I use your suggestion and added geos.lib to the ADD_LIBS path. And put
> the headers diretory inside the ogr directory. I defined HAVE_GEOS and ran
> Nmake.
> 
> That's when I get all this errors.
> 
> Any idea?

Rodrigo,

You didn't compile GEOS with the same compiler options as GDAL is compiled with.
You likely need /MD instead of /MT or something like that.  You can likely
fiddle about with your geos building project to fix this.  If it were up to
me, i would just make up a quick makefile.vc and include the GDAL nmake.opt
for options, but then I am a bit of a throwback.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Fri Nov 26 14:18:54 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Makefile problem with MingW 
In-Reply-To: <4196E726.8070105@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAGEGDJJAA.nhv@cape.com>

 Hi Frank

Is it possible to add a configure check for whether to use 
  cpl_vsil_win32.o 
instead of 
  cpl_vsil_unix_stdio_64.o

for the MingW build

As it is one has to hand edit the $(GDAL)/port/GNUMakefile
when building with MSYS or MingW

probably easiest to do this by adding a new variable to 
GDALmake.opt

say CPL_VSIL_STDIO

and then in the makefile

OBJ	=	cpl_conv.o cpl_error.o cpl_string.o cpl_vsisimple.o \
		cplgetsymbol.o cpl_dir.o cpl_path.o cpl_csv.o cpl_findfile.o \
		$(CPL_VSIL_STDIO).o cpl_minixml.o cpl_multiproc.o \
		cpl_list.o


note: Cygwin wants to use the unix version

Thanks 

Norman









From warmerdam at pobox.com  Fri Nov 26 15:55:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Makefile problem with MingW
In-Reply-To: <EKEJIKAILPONGGENMBGAGEGDJJAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAGEGDJJAA.nhv@cape.com>
Message-ID: <41A79856.4030602@pobox.com>

Norman Vine wrote:
>  Hi Frank
> 
> Is it possible to add a configure check for whether to use 
>   cpl_vsil_win32.o 
> instead of 
>   cpl_vsil_unix_stdio_64.o
> 
> for the MingW build
> 
> As it is one has to hand edit the $(GDAL)/port/GNUMakefile
> when building with MSYS or MingW
> 
> probably easiest to do this by adding a new variable to 
> GDALmake.opt
> 
> say CPL_VSIL_STDIO
> 
> and then in the makefile
> 
> OBJ	=	cpl_conv.o cpl_error.o cpl_string.o cpl_vsisimple.o \
> 		cplgetsymbol.o cpl_dir.o cpl_path.o cpl_csv.o cpl_findfile.o \
> 		$(CPL_VSIL_STDIO).o cpl_minixml.o cpl_multiproc.o \
> 		cpl_list.o

Norman,

OK, I would be happy to make such a change, but how do we drive it?  That is,
how does configure now when it should set CPL_VSIL_STDIO to tif_vsil_win32.o
instead of tif_vsil_unix_stdio_64.o?   Do I need to watch for a MINGW cannonical
name for the platform or something like that?

Note, I don't use MINGW so a specific patch I can apply would be the safest
way to approach this if you have the time to prepare one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Fri Nov 26 16:33:31 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Makefile problem with MingW
In-Reply-To: <41A79856.4030602@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAEEGHJJAA.nhv@cape.com>

Frank Warmerdam 
> 
> Norman Vine wrote:
> >  Hi Frank
> > 
> > Is it possible to add a configure check for whether to use 
> >   cpl_vsil_win32.o 
> > instead of 
> >   cpl_vsil_unix_stdio_64.o
> > 
> > for the MingW build
> > 
> > As it is one has to hand edit the $(GDAL)/port/GNUMakefile
> > when building with MSYS or MingW
> > 
> > probably easiest to do this by adding a new variable to 
> > GDALmake.opt

> 
> OK, I would be happy to make such a change, but how do we drive it?  That is,
> how does configure now when it should set CPL_VSIL_STDIO to tif_vsil_win32.o
> instead of tif_vsil_unix_stdio_64.o?   Do I need to watch for a MINGW cannonical
> name for the platform or something like that?
> 
> Note, I don't use MINGW so a specific patch I can apply would be the safest
> way to approach this if you have the time to prepare one.

The easiest way is probably to just use a new proxy source file

$GDAL / port / cpl_vsil.cpp

HTH

Norman

==== cut === 

#include "cpl_vsi.h"

#ifdef _WIN32
 #include "cpl_vsil_win32.cpp"
#else
 #include "cpl_vsil_unix_stdio_64.cpp"
#endif



From warmerdam at pobox.com  Fri Nov 26 16:31:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] FWTools 0.9.4 Released
Message-ID: <41A7A0C1.7040504@pobox.com>

Folks,

I have prepared FWTools 0.9.4 binaries for win32 and linux and made them
available for download at:

   http://www.gdal.org/dl/fwtools/

FWTools 0.9.4 essentially corresponds to MapServer 4.4 beta3 and GDAL 1.2.5.
It includes full Python support, and a variety of extras built in.  OpenEV
is also included.  See the FWTools web site for more information on FWTools.

   http://fwtools.maptools.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marazm at navigator.lv  Sat Nov 27 06:37:28 2004
From: marazm at navigator.lv (MZM)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Creating gdal package problem
Message-ID: <200411271137.iARBbSm31159@kenny.delfi.lv>

Hi, 
 
I'm just a newbee in Linux and I wanted to install GDAL clean way. 
(Sorry for my eng.) 
 
I culdn't understand how to create gdal package for Slackware. I 
always install soft only from packages. Normal way of package 
creation: 
./configure --prefix=/usr 
make 
make install DESTDIR=/home/user/pkg/ 
or make install prefix=/home/install/pkg/usr 
Then directory content are packed into package and only then 
installed to /usr.  
Problem is - GDAL ignores DESTDIR or PREFIX.  
Same is on Gentoo - there pakage first is compiled (sugested to 
compile with --prefix=/usr --mandir=/usr/share/man and 
--infodir=/usr/share/info) and then installed to sandbox 
(/var/tmp/package_name/image) and, only if there are no errors, then 
it is moved to /usr. If during make install it tries to do something 
in /usr, then installation is terminated. 
I worked around python with --with-pymoddir, and all seemd fine, 
except: 
 
libtool: install: warning: relinking `_gdalmodule.la' 
(cd /var/tmp/portage/gdal-1.2.5/work/gdal-1.2.5/pymod; /bin/sh ../libtool  
--mode=relink g++ gdal_wrap.lo numpydataset.lo 
gdalnumeric.lo ../libgdal.la -o _gdalmodule.la 
-rpath /var/tmp/portage/gdal-1.2.5/image//usr/lib/python2.3/site-packages 
-no-undefined -avoid-version -module ) 
g++ -shared 
-nostdlib /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/../../../crti.o /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/crtbeginS.o  .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o  
-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4 -L/usr/X11R6/lib 
-L/usr/lib/lib 
-L/usr/lib/gcc-lib/i686-pc-linux-gnu/../../../i686-pc-linux-gnu/lib-L/usr/i686-pc-linux-gnu/lib 
-L/usr/i686-pc-linux-gnu/bin -L/usr/lib -lgdal 
-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/../../../../i686-pc-linux-gnu/lib 
-L/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/../../.. -lstdc++ -lm -lc 
-lgcc_s /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/crtendS.o /usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/../../../crtn.o  
-Wl,-soname -Wl,_gdalmodule.so -o .libs/_gdalmodule.so 
/usr/lib/gcc-lib/i686-pc-linux-gnu/3.3.4/../../../../i686-pc-linux-gnu/bin/ld: 
cannot find -lgdal 
collect2: ld returned 1 exit status 
libtool: install: error: relink `_gdalmodule.la' with the above 
command before installing it 
make[1]: *** [install] Error 1 
make[1]: Leaving directory 
`/var/tmp/portage/gdal-1.2.5/work/gdal-1.2.5/pymod' 
make: *** [install-actions] Error 2 
 
As can see form error - it looks in /usr/lib for some stuff (I'm not 
a coder), buth that stuff isn't there - its in 
some /tempinstalldir/lib. 
 
So - where is my mistake? Is there way how to install gdal to some 
tempdir before moving to /usr? I know about 
--prefix=/tempinstalldir/usr, but it's ugly hack. 
 
Any help welcome :) 
 
TNX,  
MZM. 

-- 
Bezmaksas e-pasta adreses pied?v? http://webmail.delfi.lv/

From fwarmerdam at gmail.com  Sat Nov 27 12:27:10 2004
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] RE: Problem compiling under VS.NET
In-Reply-To: <000201c4d241$a4fc1e70$959877c6@cts1149>
References: <000201c4d241$a4fc1e70$959877c6@cts1149>
Message-ID: <41A8B8EE.7010602@pobox.com>

Thom DeCarlo wrote:

>Hello Frank, I hope you're still on the list. ;-)
>
>This raised a couple of new questions. First, if I install the latest
>tarball of libtiff and change the appropriate section of the nmake.opt file,
>will all this compile under VS.NET?
>
>Second, where can I find the latest libtiff tarball? I went to the
>libtiff.org website and it seems to have become an advertising site. At the
>bottom of the page I found a link to the old libtiff.org webpage, but it
>doesn't have a pointer to any tarballs. It does give instructions for CVS
>access, but my company firewall does not allow CVS connections.
>  
>
Thom,

The http://www.remotesensing.org/libtiff site is the primary home of 
libtiff now. The www.libtiff dot org
web site was taken over by domain pirates and sold to a fellow who uses 
it's positive karma to
manipulate google page ranks.

The libtiff source in CVS is still going through some revision to deal 
with the new C++ stream
interface. It should (hopefully) be portable before 3.7.1 is released.

>I tried to build using last night's gdal tarball and found that I'm still
>hitting the same problem in frmts/gtiff after changing the tiffio.h to
>include iostream instead of iostream.h.
>
>    C:\SVS_DE~1\GDAL-C~3\frmts>cd gtiff   && nmake /NOLOGO /f makefile.vc
>      && cd ..
>    cl /nologo /Ox /MD /GX -I..\..\port -I..\..\ogr -I..\..\gcore -Ilibtiff
>      -Ilibgeotiff /c geotiff.cpp
>    geotiff.cpp
>    libtiff\tiffio.h(499) : error C2061: syntax error : identifier 'ostream'
>    libtiff\tiffio.h(500) : error C2061: syntax error : identifier 'istream'
>    NMAKE : fatal error U1077: 'cl' : return code '0x2'
>    Stop.
>  
>

I believe the above is fixed in GDAL CVS now.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From acrux_it at libero.it  Sat Nov 27 19:37:19 2004
From: acrux_it at libero.it (acrux)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Creating gdal package problem
In-Reply-To: <200411271137.iARBbSm31159@kenny.delfi.lv>
References: <200411271137.iARBbSm31159@kenny.delfi.lv>
Message-ID: <20041128013719.4b8bd7fc.acrux_it@libero.it>

On Sat, 27 Nov 2004 13:37:28 +0200
MZM <marazm@navigator.lv> wrote:

__omissis__  
> I'm just a newbee in Linux and I wanted to install GDAL clean way. 
> (Sorry for my eng.) 
>  
> I culdn't understand how to create gdal package for Slackware. I 
> always install soft only from packages. Normal way of package 
_cut__


you must do the package by hand.

here you can find my port for the distro CRUX :
http://www.crux-it.org/httpup_mirror/merged_crux-it/gdal/Pkgfile
http://www.crux-it.org/httpup_mirror/merged_crux-it/gdal/.footprint

I hope this help you,

greetz,
-- 
vesuvio | LinuxMachine 156116
powered by GNU/Linux Crux
 # GnuPG/PGP Key_ID: 0x378EECB8

From packalen at cs.joensuu.fi  Mon Nov 29 03:19:37 2004
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Modifying OGR geometry in place
Message-ID: <Pine.GSO.4.61.0411291016180.14159@cs>

Hi

I'm switching from shapelib to OGR and I don't understand how geometry can 
be modified in place. My purpose is to modify z-values of the point file.

The current approach is as follows:

   1. I create a copy of input file by using CopyDataSource(). This
      will be the output file where z-value is modified.

   2. I loop through the features by using GetNextFeature() method.

   3. This is unclear for me. How can I fetch the geometry object from
      feature such a way that I can manipulate it and write back to the
      disk? Or is this even possible (or should I create a completely new
      feature)?

It is also unclear for me that what will be the update mode of created
data source after CopyDataSource()?

Thanks in advance,

Petteri

=========================================================================
Petteri Packal?n                   "There are two major products that
University of Joensuu               came out of Berkeley: LSD and UNIX.
Faculty of Forestry                 We don't believe this to be a
P.O. Box 111                        coincidence."  -- J.S. Anderson
80101 Joensuu
Finland                            "There still remains a question: Which
e-mail: packalen@cs.joensuu.fi      caused the other?"
=========================================================================
From warmerdam at pobox.com  Mon Nov 29 09:59:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Modifying OGR geometry in place
In-Reply-To: <Pine.GSO.4.61.0411291016180.14159@cs>
References: <Pine.GSO.4.61.0411291016180.14159@cs>
Message-ID: <41AB3944.8020901@pobox.com>

Petteri Packalen wrote:
> Hi
> 
> I'm switching from shapelib to OGR and I don't understand how geometry 
> can be modified in place. My purpose is to modify z-values of the point 
> file.
> 
> The current approach is as follows:
> 
>   1. I create a copy of input file by using CopyDataSource(). This
>      will be the output file where z-value is modified.
> 
>   2. I loop through the features by using GetNextFeature() method.
> 
>   3. This is unclear for me. How can I fetch the geometry object from
>      feature such a way that I can manipulate it and write back to the
>      disk? Or is this even possible (or should I create a completely new
>      feature)?
> 
> It is also unclear for me that what will be the update mode of created
> data source after CopyDataSource()?

Petteri,

Currently the shapefile driver does not support in-place update of shapes
even though it wouldn't be hard to implement for this ultra-simple case of
updating single point geometries in place.

What you will need to do is create a new output datasource, create a layer,
setup the schema and then start copying features over.  But instead of using
CopyDataSource() you will need to copy over one feature at a time so that you
can manipulate the geometry during the translation.

In general you can use ogr2ogr.cpp as a guide.   The new OGR API tutorial may
also be helpful.   A few special notes:

  o You can't just write an OGRFeature from one datasource to another.  You
    need to instantiate a new OGRFeature using the OGRFeatureDefn of the
    output datasource.  The SetFrom() method on the OGRFeature can be useful
    for copying all the contents of an input feature to a destination feature
    with potentially different field definitions.  It is used in ogr2ogr.cpp.

  o Once you have the destination feature you will need to create a copy of
    it's geometry (with GetGeometryRef() and Clone() on the geometry), and
    then modify the Z elevation with setZ(), then use SetGeometryDirectly()
    to reassign the modified geometry to the output feature, replacing the
    old geometry.  In particular, you aren't supposed to just modify the
    geometry returned by GetGeometryRef() directly though that will mostly
    work.

It is my hope to make the Shapefile driver support various kinds of in-place
update methods at some point. Once that is done, you would read a feature,
go through the geometry manipulation mentinoed above, and then call
SetFeature() with the feature to write it back to disk.  But for now
SetFeature() (and DeleteFeature()) are not implemented on the OGRSpatialReference.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From lumin03 at abyss.iscas.cn  Mon Nov 29 08:33:15 2004
From: lumin03 at abyss.iscas.cn (lumin)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] a small question about CSLFetchBoolean
In-Reply-To: <20041128170003.069234B0917@xserve.flids.com> 
References: <20041128170003.069234B0917@xserve.flids.com>
Message-ID: <20041129133315.28984.qmail@abyss.iscas.cn>

hi,
I am a new user with gdal,
I use the tutorial to test the c++ programes,but
the compiler cann't recgnize the CSLFetchBoolean function.
Will you tell me what's wrong  ????

From warmerdam at pobox.com  Mon Nov 29 10:39:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] a small question about CSLFetchBoolean
In-Reply-To: <20041129133315.28984.qmail@abyss.iscas.cn>
References: <20041128170003.069234B0917@xserve.flids.com>
	<20041129133315.28984.qmail@abyss.iscas.cn>
Message-ID: <41AB42C1.9060200@pobox.com>

lumin wrote:
> hi,
> I am a new user with gdal,
> I use the tutorial to test the c++ programes,but
> the compiler cann't recgnize the CSLFetchBoolean function.
> Will you tell me what's wrong  ????

Lumin,

You may need to include either cpl_conv.h or cpl_string.h to get
the CSLFetchBoolean() prototype.  On second thought, it is certainly
cpl_string.h.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roaceves at inaoep.mx  Mon Nov 29 12:24:24 2004
From: roaceves at inaoep.mx (Rodrigo Aceves)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Re: OGR with Geos in Windows?
References: <cnu547$6sf$1@sea.gmane.org>
	<41A4CC12.6010102@pobox.com><co7l8s$t88$1@sea.gmane.org>
	<41A75AD8.5070002@pobox.com>
Message-ID: <cofn0e$n41$1@sea.gmane.org>

Hi Frank,

You were right again!!

I couldn't make a MAKEFILE because I have VC++ .NET and the generation of
Makefiles is no longer supported, but anyway it finally compiled, OGR whit
GEOS support, but the only operation that seems to work is Intersect. And I
get wrong results.

What I really want to use is Contains (I want to find the object that
contains a single point). Or within which is the opposite of contains, but
neither of them give me any result.

Any ideas??

Best regards.


"Frank Warmerdam" <warmerdam@pobox.com> escribi en el mensaje
news:41A75AD8.5070002@pobox.com...
> Rodrigo Aceves wrote:
> > Hi Frank,
> >
> > I've done as you suggested and it compiled OK, but when it comes to link
> > there are a lot of warnings and errors. The errors are something like
> > "function already defined in geos.lib" and at the end it says "library
> > conflicts, use /NODEFULTLIB:library". The problem is with two libraries.
But
> > when I use de NODEFAULT there are more erros. This time the errors say
> > "scanf not defined" or something like that.
> >
> > Let me explain what I did: I created an empty project in VC .NET and
added
> > all the files of GEOS and compiled, it worked after minor changes in the
> > code. So it produced a geos.lib file.
> >
> > Then I use your suggestion and added geos.lib to the ADD_LIBS path. And
put
> > the headers diretory inside the ogr directory. I defined HAVE_GEOS and
ran
> > Nmake.
> >
> > That's when I get all this errors.
> >
> > Any idea?
>
> Rodrigo,
>
> You didn't compile GEOS with the same compiler options as GDAL is compiled
with.
> You likely need /MD instead of /MT or something like that.  You can likely
> fiddle about with your geos building project to fix this.  If it were up
to
> me, i would just make up a quick makefile.vc and include the GDAL
nmake.opt
> for options, but then I am a bit of a throwback.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent




From ealpert at digitalglobe.com  Mon Nov 29 13:52:53 2004
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Ogr2ogr dbf file extremely large compared to one created
	by pgsql2shp
Message-ID: <1FB6937A87F9074C9A2B8F9D9137EB16017B193D@COMAIL01.digitalglobe.com>


Is there a way to control the precision of floating point numbers
written to dbf files?

My dbf files created using ogr2ogr are almost twice the size of ones
create by pgsql2shp.

Also is there a way to force the field names to be all caps like
pgsql2shp's output? 

Thanks,

-e

From warmerdam at pobox.com  Mon Nov 29 14:02:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] Re: Re: OGR with Geos in Windows?
In-Reply-To: <cofn0e$n41$1@sea.gmane.org>
References: <cnu547$6sf$1@sea.gmane.org>	<41A4CC12.6010102@pobox.com><co7l8s$t88$1@sea.gmane.org>	<41A75AD8.5070002@pobox.com>
	<cofn0e$n41$1@sea.gmane.org>
Message-ID: <41AB724A.9090401@pobox.com>

Rodrigo Aceves wrote:
> Hi Frank,
> 
> You were right again!!
> 
> I couldn't make a MAKEFILE because I have VC++ .NET and the generation of
> Makefiles is no longer supported, but anyway it finally compiled, OGR whit
> GEOS support, but the only operation that seems to work is Intersect. And I
> get wrong results.

Rodrigo,

Well, currently I don't really use the GEOS intersect because it is quite
expensive, and I use intersect frequently in applying spatial filters.
So that would explain why this sort-of-works when nothing else does.
Note that my internal implementation is really just an intersection of
bounding boxes.

> What I really want to use is Contains (I want to find the object that
> contains a single point). Or within which is the opposite of contains, but
> neither of them give me any result.

It would seem that you haven't defined HAVE_GEOS properly or you haven't
done a full rebuild since defining it.   You can add /DHAVE_GEOS=1 right in
the OPTFLAGS in nmake.opt to be sure.  Then do a "nmake /f makefile.vc clean"
in the root of gdal, and then a full build "nmake /f makefile.vc".

I don't have any other advice, though I think I will take a crack at building
geos support into my win32 FWTools builds.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlx at mygis.org  Tue Nov 30 01:58:26 2004
From: wlx at mygis.org (wlx)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] How to show ASTER hdf vnir's bands as a color image?
Message-ID: <20041130065928.CE20A4B6DB7@xserve.flids.com>

Hi all,
      I want to show my ASTER hdf vnir's bands as a color image,but
gdal_translate treat each band as a subdataset,and gdal_translate  deals
with one subdataset one time,so if I don't know how to merge the top three
bands as a rgb imae.
      
      Best regards,

LiangXu Wang




From normanb at comsine.co.uk  Tue Nov 30 05:20:39 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] gdalwarp - again!
Message-ID: <41AC4977.5020605@comsine.co.uk>

Hi,

I have built proj from CVS and got the same error.
I removed all reference to this from my machine and
installed FWTools 0.9.4

but running gdalwarp -t_srs wgs84 latlong.tif out.tif
causes

ERROR 1: geocentric transformation missing z or ellps
ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
the pfnTransformer failed.

So the error is identical with the latest build of FWTools or the CVS 
version of Proj.

I have tried the fix of pj_transform.c as previously suggested when 
building from source.

I am running Fedora Core 2, and though I am not an expert user, I have 
made sure
that I am clean of any previous gdal libraries.

Any help would be appreciated.

Norman

-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From carlos.garcia at sigtech-co.com  Tue Nov 30 10:36:37 2004
From: carlos.garcia at sigtech-co.com (CARLOS GARCIA)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR DLL in Windows?
In-Reply-To: <41AB724A.9090401@pobox.com>
Message-ID: <000001c4d6f2$623114f0$200001c0@colbta.gn>

Hi everyone

Does anybody tried to create a DLL with the ogr C api? For example, to
use it in other languages like Visual Basic
Appreciate any help

Regards

Carlos Garcia


From fwarmerdam at gmail.com  Tue Nov 30 11:04:45 2004
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] OGR DLL in Windows?
In-Reply-To: <000001c4d6f2$623114f0$200001c0@colbta.gn>
References: <41AB724A.9090401@pobox.com>
	<000001c4d6f2$623114f0$200001c0@colbta.gn>
Message-ID: <931f8ea9041130080469682425@mail.gmail.com>

On Tue, 30 Nov 2004 10:36:37 -0500, CARLOS GARCIA
<carlos.garcia@sigtech-co.com> wrote:
> Hi everyone
> 
> Does anybody tried to create a DLL with the ogr C api? For example, to
> use it in other languages like Visual Basic
> Appreciate any help

Carlos, 

The OGR C API is exported from the GDAL DLL using a default build
on win32.  So you should (more or less) be able to import OGR C API
entry points from gdal12.dll in VB.   Access to some types may
be very ackward though.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dron at ak4719.spb.edu  Tue Nov 30 14:10:12 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] How to show ASTER hdf vnir's bands as a color image?
In-Reply-To: <20041130065928.CE20A4B6DB7@xserve.flids.com>
References: <20041130065928.CE20A4B6DB7@xserve.flids.com>
Message-ID: <20041130191012.GA9859@ak4719.spb.edu>

On Tue, Nov 30, 2004 at 02:58:26PM +0800, wlx wrote:
> I want to show my ASTER hdf vnir's bands as a color image,but
> gdal_translate treat each band as a subdataset,and gdal_translate
> deals with one subdataset one time,so if I don't know how to merge the
> top three bands as a rgb imae.

You can extract subdatasets one by one and combine them afterwards using
gdal_merge.py tool and its option '-separate'. With this option input
images will be threated as separate channels of the same scene.

Also you can save one step and do not extract images before merging,
just use subdataset names as input parameters for gdal_merge.py.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5970603  ICQ# 26871517

From mhodder at highermappingsolutions.com  Tue Nov 30 17:27:56 2004
From: mhodder at highermappingsolutions.com (Martin Hodder)
Date: Wed Nov 21 11:49:29 2007
Subject: [Gdal-dev] New user needs helps
Message-ID: <20041130222758.58A894BA25F@xserve.flids.com>

Hi,

 

I hope someone can help me.

 

I am trying to convert some points in Long / lat format to World Equidistant
Cylindrical projection

 

I have the following information on the projection:-

 

 

 

PROJCS["World_Equidistant_Cylindrical",

GEOGCS["GCS_WGS_1984",

DATUM["D_WGS_1984",

SPHEROID["WGS_1984",6378137.0,298.257223563]],

PRIMEM["Greenwich",0.0],

UNIT["Degree",0.0174532925199433]],

PROJECTION["Equidistant_Cylindrical"],

PARAMETER["False_Easting",0.0],

PARAMETER["False_Northing",0.0],

PARAMETER["Central_Meridian",0.0],

PARAMETER["Standard_Parallel_1",60.0],

UNIT["Meter",1.0]]

 

The Long lat points are in MapInfo Format and it can be the same or a shp
file as an output.

 

Can anyone tell how I format the ogr2ogr statement?

 

Many thanks

 

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20041130/ffd4f854/attachment.html
