From warmerdam at pobox.com  Mon Sep  1 00:05:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep  1 00:05:45 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <B1B624F7C110834B96594065A74F3A540916B4BF@gemini.rsinc.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<200808272326.46673.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A540916B4BA@gemini.rsinc.com>
	<200808272359.32297.even.rouault@mines-paris.org>
	<48B6D73E.7000306@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4BF@gemini.rsinc.com>
Message-ID: <48BB6A08.7000401@pobox.com>

Norman Barker wrote:
> Hi Adam, Tamas, Even, all
> 
> I have updated the RFC 
> 
> http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
> 
> And completely changed the pattern used to reflect the general consensus
> to use an asynchronous queue for communication between threads.
> 
> Can you comment on this, and let me know if it is acceptable?
> 
> Can we iterate this is a few times, and then how is this RFC approved
> (or rejected!)?

Norman,

The RFC would be approved or rejected after you (or someone) calls
for a vote by the PSC.  The voting would normally occur over 2 business
days and be done according to:

   http://trac.osgeo.org/gdal/wiki/rfc1_pmc

With regard to the proposal, I'm afraid I'm still not clear on exactly
what you are proposing.

Is GDALAsyncDataset a new class?  Are the methods like Open(),
and ProgressiveRasterIO() methods on this new class.  I don't
understand how this new class relates to GDALDataset.  How does one
know if the dataset you get back from GDALOpen() supports the
async interfaces or not?

I presume I'm getting lost in stuff that is supposed to be obvious,
but for my sake, I'd appreciate your nailing these aspects down fairly
carefully.  For instance, I'd like to see the actual C++ declarations for
all new methods and classes, not an abstract approximation without
argument types.  I'd also essentially like to see the reference docs for
the new methods.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From a.neumann at carto.net  Mon Sep  1 03:07:43 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Sep  1 03:07:47 2008
Subject: [gdal-dev] tiff support: internal or external?
Message-ID: <22415.193.246.86.39.1220252863.squirrel@webmail.customers.iirc.at>

Hi,

I am wondering what are the pros and cons of using tiff support from
internal or external (libtiff, libgeotiff). Are there any limitations with
either approach? I am specifically wondering about the consequences with
the bigtiff support. Do both approaches support bigtiff if I use the most
recent versions?

Thanks for any hints on what is the better option.

Andreas

-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From mhjeong74 at gmail.com  Mon Sep  1 04:05:16 2008
From: mhjeong74 at gmail.com (Myeong Hun Jeong)
Date: Mon Sep  1 04:05:19 2008
Subject: [gdal-dev] How to use gdal_retile?
Message-ID: <6aaec8200809010105g45abb60uc07efb175de47ed4@mail.gmail.com>

Dear lists.
I want TMS service with openlayers and raster data.
I have 136 tif files based on local TM coordination and each file
is about 250 mega.
First, I uesed gdal_retile.py
For instance,
python gdal_retile.py -v -of png -ps 256 256 -tileIndex index.shp
-tileIndexField LOCATION -r bilinear -levels 6 -targetDir C:\tmp\raster
--optfile C:\raster\tilelist.txt
After finishing this script, I can have genereated png images and move these
image files to Tomcat.
Next, how to use these image with openlayers? If I use gdal2tiles.py and
just one tif image file, I can see map images easily with openlayers.
I don't know how to set up openlayers when I use gdal_retile.py.

Another quesion is that when I run  gdal_retile.py script, I set up
tileIndex index.shp -tileIndexField LOCATION. What do tileindex and
tileindexField mean? when I use usually theses index shape file?

Last question is that if gdal_retile.py is not a good way to TMS with
openlayers, How to make hundreds of tif images to tile map image?
First, python gdal_merge.py -o C:\raster\total.tif -v --optfile
C:\raster\tilelist.txt
Next, python gdal2tiles.py -publishurl http://myserver/dir/ -nogooglemaps
-nokml -v C:\raster\total.tif  C:\tmp
Is this process correct?

Please, give me a good advice.
Best regards,
Jeong.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080901/14f04081/attachment.html
From max at geoinova.com  Mon Sep  1 05:24:59 2008
From: max at geoinova.com (Maksim Sestic)
Date: Mon Sep  1 05:25:36 2008
Subject: [gdal-dev] GTiff / gdal_translate / CMYK - problem
In-Reply-To: <1219403398430-751427.post@n2.nabble.com>
Message-ID: <000001c90c14$a2b0e130$0501a8c0@max2>

 
Hi all,

Huh, getting back to this issue since I need more-or-less elegant solution
to RGB->CMYK conversion. BTW, I'm using managed GDAL wrappers (csharp).
Here's the steps I went through, although need some assistance...

Converting RGB GTiff named "INPUT.tif" to CMYK GTiff named "OUTPUT.tif":

1) Use GTiff driver to create 4-band OUTPUT.tif, setting "PHOTOMETRIC=CMYK"
option
2) Copy all 3 bands from INPUT.tif, marking each band as C, M and K on
OUTPUT. Copy source metadata as well.
3) Also copy 1st band from INPUT.tif as 4th band (K = black) on OUTPUT,
filling it uniformly to any color
4) Go through each OUTPUT.tif band (C, M and Y) and get CMYK alpha values
using:

(...here goes GDALReadDirect part that reads band data into Bitmap...)
Dim attr as New ImageAttributes
attr.SetOutputChannelColorProfile("ProfileName.icc",ColorAdjustType.Bitmap)
attr.SetOutputChannel(ColorChannelFlagsC,ColorAdjustType.Bitmap)
(...then use Graphics object to apply resulting alpha channel (C, M or Y)
onto underlying band (R, G or B)...)

5) Using GDALWriteDirect write CMY bands back into OUTPUT.tif

What puzzles me here is how do I get K channel values, and whether
attr.SetOutputChannel(ColorChannelFlagsK,ColorAdjustType.Bitmap) will return
valid K alpha values for underlying RGB? Don't forget step 3) which provides
"empty" K band on output.

P.S.
Regarding the CMYK formula (please see short PHP source from my previous
message), I simply have no idea of how to turn CMYK (double) values into
valid RGB (byte) values to be able to actually write them into Bitmap
object. I'm doing RGB -> CMYK -> RGB then and wondering if that's correct
approach after all.

Regards,
Maksim Sestic 


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Maksim Sestic
Sent: Friday, August 22, 2008 13:10
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] GTiff / gdal_translate / CMYK - problem


Finally, found some PHP code that makes sense :-)
(source: http://forums.digitalpoint.com/showthread.php?t=475864)


Parameters:
        $rgb    -   an array of color information where
                    $rgb[0] == red value
                    $rgb[1] == green value
                    $rgb[2] == blue value
    Returns:
        array containing cmyk color information:
            $array[0] == cyan value
            $array[1] == magenta value
            $array[2] == yellow value
            $array[3] == black value
*/
function RGB_to_CMYK($rgb)
{
    $cyan = 1 - ($rgb[0] / 255);
    $magenta = 1 - ($rgb[1] / 255);
    $yellow = 1 - ($rgb[2] / 255);

    $min = min($cyan, $magenta, $yellow);
    
    if ($min == 1)
        return array(0,0,0,1);

    $K = $min;
    $black = 1 - $K;

    return array
    (
        ($cyan - $K) / $black,
        ($magenta- $K) / $black,
        ($yellow - $K) / $black,
        $K
    );
}


Regards,
Maksim Sestic



Craig Miller-2 wrote:
> 
> I'm no expert on color conversions, but I am reading it as 1 = 100%.  
> So, if you have an RGB image with values ranging from 0 - 255, then 
> convert it to a percent first then subtract it from R.
> 
> For example, if you have RGB values of 200, 100, 255:
> 
> r = 200/255 = .7843
> g = 100/255 = .3921
> b = 255/255 = 1.0
> 
> Then CMY = (1-.7843, 1-.3921, 1-1.0) or (C=0.2157, M=0.6079, Y=0.0)
> 
> Craig
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Maksim Sestic
> Sent: Friday, August 22, 2008 12:40 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [Gdal-dev] GTiff / gdal_translate / CMYK - problem
> 
> Hi Even,
> 
> Thanks for the info, but I need it other way round - RGB to CMYK 
> conversion.
> As Frank said, it's possible to create a CMYK result using 
> gdal_translate giving it an extra band as a parameter (i.e. -b 1 -b 2 
> -b 3 -b 1), but the end result is of no use since that extra band 
> (along with R, G and B) takes some color mangling I'm not very 
> familiar with. And there's not much to read about it, here's what I 
> found (citations ahead):
> 
> http://semmix.pl/color/extrans/etr10.htm
> 
> Transformation RGB, CMY, CMYK
> Formal transformation of the components RGB into the components CMY or 
> inversely is as follows:
> 
> we have color RGB=(r,g,b) then color CMY=(1-r,1-g,1-b) we have color
> CMY=(c,m,y) then color RGB=(1-c,1-m,1-y).
> 
> Transformation of CMY into CMYK is presented as algorithm:
> k=min(c,m,y), CMYK=(c-k,m-k,y-k,k)
> 
> This explanation seems sane enough, but then: "we have color 
> RGB=(r,g,b) then color CMY=(1-r,1-g,1-b)" is giving me a headache with
"1-r" etc.
> part.
> What do they mean by "1-r"? :-)
> 
> Furthermore, RGB to CMYK is supported by .NET 3.5 only, and giving it 
> a shot via GDAL managed wrappers is also viable solution (thanks Tamas 
> for LoadBitmapDirect and SaveBitmapDirect C# examples). I'm working 
> with .NET 2.0 and can't use this approach, but here's the code anyways 
> (author
> unknown):
> 
> using System;
> using System.IO;
> using System.Windows.Forms;
> using System.Windows.Media;
> using System.Windows.Media.Imaging;
> ...
> 
> Stream imageStream = new FileStream(@"C:\temp\mike4.jpg", FileMode.Open,
> FileAccess.Read, FileShare.Read);   
> BitmapSource myBitmapSource = BitmapFrame.Create(imageStream);   
>   
> FormatConvertedBitmap newFormatedBitmapSource = new 
> FormatConvertedBitmap();
> 
> newFormatedBitmapSource.BeginInit();   
> newFormatedBitmapSource.Source = myBitmapSource;   
> newFormatedBitmapSource.DestinationFormat = PixelFormats.Cmyk32;   
> newFormatedBitmapSource.EndInit();   
>   
> BitmapEncoder encoder = new TiffBitmapEncoder();   
> encoder.Frames.Add(BitmapFrame.Create(newFormatedBitmapSource));   
> Stream cmykStream = new FileStream(@"C:\temp\mike4_CMYK.tif",
> FileMode.Create, FileAccess.Write, FileShare.Write);   
> encoder.Save(cmykStream);   
> cmykStream.Close();
> 
> 
> Again, it would be great if someone could explain how to do it via 
> GDAL wrappers running on .NET 2.0 (I'm using GDAL build from FWTools).
> 
> Regards,
> Maksim Sestic
>  
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Thursday, August 21, 2008 20:44
> To: gdal-dev@lists.osgeo.org
> Cc: Maksim Sestic
> Subject: Re: [Gdal-dev] GTiff / gdal_translate / CMYK - problem
> 
> Maksim,
> 
> I've just done a few changes in the GeoTIFF driver to enable basic 
> CMYK support.
> 
> See the log message of http://trac.osgeo.org/gdal/changeset/15178.
> And for examples : http://trac.osgeo.org/gdal/changeset/15179.
> 
> Regards,
> Even
> 
> Le Wednesday 20 August 2008 11:46:06 Maksim Sestic, vous avez ?crit?:
>> Hi all,
>>
>> I'm having troubles with gdal_translate while creating uncompressed 
>> 3-band GTiff with CMYK photometric representation. Well, at least 
>> CMYK representation recognized by Photoshop, which is 
>> PhotometricInterpretation=5. If I use recommended gdal_translate -co 
>> 'PHOTOMETRIC=CMYK' switch I keep getting "grayscale" (!) result, 
>> again, that's what Photoshop says (PhotometricInterpretation=1).
>>
>> What other -co parameters should I set to make it work? I'm using 
>> gdal_translate from FWTools 2.2.3
>>
>>
>> Here's the gdalinfo reports:
>>
>> 1) For RGB raster parsed with gdal_translate -co 'PHOTOMETRIC=CMYK'
>>  switch:
>>
>> Size is 945, 945
>> Coordinate System is `'
>> Metadata:
>>   AREA_OR_POINT=Area
>>   TIFFTAG_SOFTWARE=MyApp
>>   TIFFTAG_DATETIME=20.08.2008 02:51:37
>>   TIFFTAG_XRESOLUTION=240
>>   TIFFTAG_YRESOLUTION=240
>>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch) Image Structure Metadata:
>>   INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  945.0)
>> Upper Right (  945.0,    0.0)
>> Lower Right (  945.0,  945.0)
>> Center      (  472.5,  472.5)
>> Band 1 Block=945x2 Type=Byte, ColorInterp=Gray Band 2 Block=945x2 
>> Type=Byte, ColorInterp=Undefined Band 3 Block=945x2 Type=Byte, 
>> ColorInterp=Undefined
>>
>> Side note: I also tried using -co 'PHOTOMETRIC=YCBCR' and 
>> 'PHOTOMETRIC=CIELAB'switches but then gdal_translate crashes.
>>
>>
>> 2) Photoshopped tiff with CMYK mode set (that's what I need to get):
>>
>> Driver: GTiff/GeoTIFF
>> Files: 080417_75008_000000017_CMYK.tif Size is 945, 945 Coordinate 
>> System is `'
>> Metadata:
>>   TIFFTAG_SOFTWARE=Adobe Photoshop CS3 Windows
>>   TIFFTAG_DATETIME=2008:08:20 02:21:08
>>   TIFFTAG_XRESOLUTION=240
>>   TIFFTAG_YRESOLUTION=240
>>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch) Image Structure Metadata:
>>   INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  945.0)
>> Upper Right (  945.0,    0.0)
>> Lower Right (  945.0,  945.0)
>> Center      (  472.5,  472.5)
>> Band 1 Block=945x2 Type=Byte, ColorInterp=Undefined Band 2 
>> Block=945x2 Type=Byte, ColorInterp=Undefined Band 3 Block=945x2 
>> Type=Byte, ColorInterp=Undefined Band 4 Block=945x2 Type=Byte, 
>> ColorInterp=Undefined
>>
>> Also, there's another Photoshop's TIFF tag, "NativeDigest", which I 
>>don't  really get (it's not recognized by gdalinfo) - here's the xmp
> output:
>> <tiff:NativeDigest
>> 
>>xmlns:tiff="http://ns.adobe.com/tiff/1.0/">256,257,258,259,262,274,277
>>,
>>284,
>>530,531,282,283,296,301,318,319,529,532,306,270,271,272,305,315,33432;
>>4
>>6BB97 3B26CC7DED3A1C59F8F9AC7EC5</tiff:NativeDigest>
>>
>>
>> Regards,
>> Maksim Sestic
> 
> 
> 
> __________ Information from ESET NOD32 Antivirus, version of virus 
> signature database 2888 (20080220) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
> 
>  
> 
> __________ Information from ESET NOD32 Antivirus, version of virus 
> signature database 2888 (20080220) __________
> 
> The message was checked by ESET NOD32 Antivirus.
> 
> http://www.eset.com
>  
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com
> Version: 8.0.138 / Virus Database: 270.6.6/1625 - Release Date: 
> 8/21/2008
> 6:04 AM
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

--
View this message in context:
http://n2.nabble.com/Re%3A-GTiff---gdal_translate---CMYK---problem-tp740987p
751427.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

__________ Information from ESET NOD32 Antivirus, version of virus signature
database 2888 (20080220) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From christian.mueller at nvoe.at  Mon Sep  1 07:55:58 2008
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Mon Sep  1 07:56:43 2008
Subject: [gdal-dev] Re: How to use gdal_retile?
In-Reply-To: <6aaec8200809010105g45abb60uc07efb175de47ed4@mail.gmail.com>
References: <6aaec8200809010105g45abb60uc07efb175de47ed4@mail.gmail.com>
Message-ID: <20080901115558.32760.qmail@mail.linux4all.at>

First, I can only talk about gdal_retile.py, I wrote this utility some times 
ago. 

1) Starting point is a single georeferenced image or a set of georeferenced 
tiles
2) The output is set of tiles and pyramid tiles
3) the -tileIndex and -tileIndexField  options give you the possibilty to
store the georeferencing information of the generated tiles in a shapefile.
 -tileIndex determines the name of the shape file, -tileIndexField determines 
the name of the attribute in the shape file which stores the name of 
corresponding tile.
This shape file can be used to
  a) check your tiles in a shape file viewer
  b) import your tiles into a db (e.g postgis) and import the shape file
     to store the georeferencing info.
  c) whatever you want ...
Here you can find an example:
http://docs.codehaus.org/display/GEOTOOLS/Image+Mosaicing+Pyramidal+JDBC+Plu 
gin 


I think this does not solve your problem because there is no support for
TMS output. This could be done but would be overlapping with the work of
gdal2tiles.py. As far as I see gdal2tiles.py handles only a single 
inputfile. I think you should try to create a big image using gdal_merge.py 
and afterward try using gdal2tiles.py. 

Perhaps it would be a possibility to merge gdal_retile.py and gdal2tiles.py 
to have one powerfull utility, but this depends on the requirements of the 
communitiy. 

I hope I could help you 

christian 


Myeong Hun Jeong writes: 

> Dear lists.
> I want TMS service with openlayers and raster data.
> I have 136 tif files based on local TM coordination and each file
> is about 250 mega.
> First, I uesed gdal_retile.py
> For instance,
> python gdal_retile.py -v -of png -ps 256 256 -tileIndex index.shp
> -tileIndexField LOCATION -r bilinear -levels 6 -targetDir C:\tmp\raster
> --optfile C:\raster\tilelist.txt
> After finishing this script, I can have genereated png images and move these
> image files to Tomcat.
> Next, how to use these image with openlayers? If I use gdal2tiles.py and
> just one tif image file, I can see map images easily with openlayers.
> I don't know how to set up openlayers when I use gdal_retile.py. 
> 
> Another quesion is that when I run  gdal_retile.py script, I set up
> tileIndex index.shp -tileIndexField LOCATION. What do tileindex and
> tileindexField mean? when I use usually theses index shape file? 
> 
> Last question is that if gdal_retile.py is not a good way to TMS with
> openlayers, How to make hundreds of tif images to tile map image?
> First, python gdal_merge.py -o C:\raster\total.tif -v --optfile
> C:\raster\tilelist.txt
> Next, python gdal2tiles.py -publishurl http://myserver/dir/ -nogooglemaps
> -nokml -v C:\raster\total.tif  C:\tmp
> Is this process correct? 
> 
> Please, give me a good advice.
> Best regards,
> Jeong.
 

From klokan at klokan.cz  Mon Sep  1 08:15:54 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Mon Sep  1 08:15:57 2008
Subject: [gdal-dev] How to use gdal_retile?
In-Reply-To: <6aaec8200809010105g45abb60uc07efb175de47ed4@mail.gmail.com>
References: <6aaec8200809010105g45abb60uc07efb175de47ed4@mail.gmail.com>
Message-ID: <6e41d95b0809010515p13cdf5f7mbf11ff513185b9bc@mail.gmail.com>

Dear Jeong,

use gdal_vrtmerge.py to produce one XML file which will merge several
raster files into one...
On the result you should be able to run gdal2tiles.py.

For more info check the archive of gdal-dev conference, this problem
was discussed two weeks ago:
http://www.nabble.com/GSoC-GDAL2Tiles:-MapTiler.org,-Google-Maps-Projection-Web,-Source-Code-td19039320.html

Alternatively you can do dynamic generation of tiles from a WMS server
by TileCache.org project.

Klokan

On Mon, Sep 1, 2008 at 10:05 AM, Myeong Hun Jeong <mhjeong74@gmail.com> wrote:
> Dear lists.
> I want TMS service with openlayers and raster data.
> I have 136 tif files based on local TM coordination and each file
> is about 250 mega.
> First, I uesed gdal_retile.py
> For instance,
> python gdal_retile.py -v -of png -ps 256 256 -tileIndex index.shp
> -tileIndexField LOCATION -r bilinear -levels 6 -targetDir C:\tmp\raster
> --optfile C:\raster\tilelist.txt
> After finishing this script, I can have genereated png images and move these
> image files to Tomcat.
> Next, how to use these image with openlayers? If I use gdal2tiles.py and
> just one tif image file, I can see map images easily with openlayers.
> I don't know how to set up openlayers when I use gdal_retile.py.
>
> Another quesion is that when I run  gdal_retile.py script, I set up
> tileIndex index.shp -tileIndexField LOCATION. What do tileindex and
> tileindexField mean? when I use usually theses index shape file?
>
> Last question is that if gdal_retile.py is not a good way to TMS with
> openlayers, How to make hundreds of tif images to tile map image?
> First, python gdal_merge.py -o C:\raster\total.tif -v --optfile
> C:\raster\tilelist.txt
> Next, python gdal2tiles.py -publishurl http://myserver/dir/ -nogooglemaps
> -nokml -v C:\raster\total.tif  C:\tmp
> Is this process correct?
>
> Please, give me a good advice.
> Best regards,
> Jeong.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From klokan at klokan.cz  Mon Sep  1 09:02:05 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Mon Sep  1 09:02:07 2008
Subject: [gdal-dev] Extending csharp binding for resampling
In-Reply-To: <001201c909e5$7e83afd0$9601a8c0@PC150>
References: <loom.20080804T125825-537@post.gmane.org>
	<200808272326.46673.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A540916B4BA@gemini.rsinc.com>
	<200808272359.32297.even.rouault@mines-paris.org>
	<48B6D73E.7000306@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4BF@gemini.rsinc.com>
	<f3b73b7d0808290511g52de09cdq2fb08be3485cc39e@mail.gmail.com>
	<48B7FE18.1070502@xpam.de> <001201c909e5$7e83afd0$9601a8c0@PC150>
Message-ID: <6e41d95b0809010602o7a069aan66cfae0be260e6f7@mail.gmail.com>

Hi Marc,

GDAL allows you to do resampling (scaling down/up) from SWIG binding quite well.
Check the ScaleQueryToTile() in GDAL2Tiles at my sandbox or similar
code in gdal_retile.py.

Klokan

On Fri, Aug 29, 2008 at 4:42 PM, Marc Jacquin <marc.jacquin@magellium.fr> wrote:
> Hi Gdal folks,
>
> Let's say we would like to use GDAL warping capabilities for resampling a
> dataset (without saving it on a file) at specific xcell and ycell with a
> specific resampling method but in Csharp. What would be the best way to do
> it?
> Let me guess:
> - First maintain our own Gdal build (that's fine)
> - Add the corresponding swig code to some .i files in the swig include
> directory
> - recompile the whole swig csharp stuff
>
> OK, but I'm not familiar with swig. Has anybody some swig code similar on
> the shelf? Wouldn't it be something useful to add to the official Gdal
> release?
>
> Regards,
>
> Marc Jacquin
> +(33) 562 247 023
> marc.jacquin@magellium.fr
>
> Magellium
> 24, rue Herm?s
> BP 12113
> 31521 RAMONVILLE Saint-Agne cedex
> France
> Phone: +(33) 562 247 000
> Fax: +(33) 562 247 001
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From silviamarchesi at gmail.com  Mon Sep  1 09:31:59 2008
From: silviamarchesi at gmail.com (Silvia Marchesi)
Date: Mon Sep  1 09:32:02 2008
Subject: [gdal-dev] Reading image
Message-ID: <b1ccf1c10809010631m54bba403r4d52e924b98f9ee6@mail.gmail.com>

Hi everybody,
 I'm a new user of gdal library and functions and I would like to know how
can I read a multiband image putting in a matrix (i.e. A[x][y][b]) the
values of the DN.

Thanks a lot,
Silvia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080901/e309fa63/attachment.html
From warmerdam at pobox.com  Mon Sep  1 11:19:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep  1 11:19:30 2008
Subject: [gdal-dev] tiff support: internal or external?
In-Reply-To: <22415.193.246.86.39.1220252863.squirrel@webmail.customers.iirc.at>
References: <22415.193.246.86.39.1220252863.squirrel@webmail.customers.iirc.at>
Message-ID: <48BC07E4.60107@pobox.com>

Andreas Neumann wrote:
> Hi,
> 
> I am wondering what are the pros and cons of using tiff support from
> internal or external (libtiff, libgeotiff). Are there any limitations with
> either approach? I am specifically wondering about the consequences with
> the bigtiff support. Do both approaches support bigtiff if I use the most
> recent versions?
> 
> Thanks for any hints on what is the better option.

Andreas,

I think internal and external libtiff+libgeotiff should be equivelent
as long as you are essentially using "cvs head" of libtiff and libgeotiff.

So, the internal copies are generally there for convenient building, but
if you are preparing complex binaries then using external copies of libtiff
and libgeotiff may be more appropriate, such as I do with OSGeo4W and FWTools.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From a.neumann at carto.net  Mon Sep  1 13:43:40 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Sep  1 13:43:53 2008
Subject: [gdal-dev] tiff support: internal or external?
In-Reply-To: <48BC07E4.60107@pobox.com>
References: <22415.193.246.86.39.1220252863.squirrel@webmail.customers.iirc.at>
	<48BC07E4.60107@pobox.com>
Message-ID: <48BC29CC.3030307@carto.net>

Thank you for the clarification, Frank.

Yes, I am using the latest versions of the libraries. Good to know that 
with the internal option I do not have to install the external 
libtiff/libgeotiff libraries.

Andreas

Frank Warmerdam wrote:
> Andreas Neumann wrote:
>> Hi,
>>
>> I am wondering what are the pros and cons of using tiff support from
>> internal or external (libtiff, libgeotiff). Are there any limitations 
>> with
>> either approach? I am specifically wondering about the consequences with
>> the bigtiff support. Do both approaches support bigtiff if I use the most
>> recent versions?
>>
>> Thanks for any hints on what is the better option.
> 
> Andreas,
> 
> I think internal and external libtiff+libgeotiff should be equivelent
> as long as you are essentially using "cvs head" of libtiff and libgeotiff.
> 
> So, the internal copies are generally there for convenient building, but
> if you are preparing complex binaries then using external copies of libtiff
> and libgeotiff may be more appropriate, such as I do with OSGeo4W and 
> FWTools.
> 
> Best regards,

-- 

--
Andreas Neumann
B?schacherstrasse 6
CH-8624 Gr?t (Gossau ZH)
Switzerland
Phone: ++41-44-2736668
Email: a.neumann@carto.net

Web: http://www.carto.net/neumann/
SVG Examples: http://www.carto.net/papers/svg/samples/
SVG.Open: http://www.svgopen.org/
From mauricio.dev at gmail.com  Mon Sep  1 18:50:13 2008
From: mauricio.dev at gmail.com (Mauricio de Paulo)
Date: Mon Sep  1 18:50:22 2008
Subject: [gdal-dev] How to use gdal_retile?
Message-ID: <200809011950.13412.mauricio.dev@gmail.com>

Hum... i just wrote a qgis plugin to create vrt from 3 single bands file.
I don't know if thats what you want, but it's there.
Good luck.
Maur?cio de Paulo
From mhjeong74 at gmail.com  Tue Sep  2 03:04:57 2008
From: mhjeong74 at gmail.com (Myeong Hun Jeong)
Date: Tue Sep  2 03:05:00 2008
Subject: [gdal-dev] How to use gdal_vrtmerge.py ?
Message-ID: <6aaec8200809020004q55fc557fuf45559c679ac4bde@mail.gmail.com>

Dear lists.
I want Tiled Map Service with openlayers.
There are 30 GigaBytes datasets(136 tif files from aerial photos).
For the first time, I use gdal_merge.py in order to make a single merged
file.
Next, I use gdal2tiles.py to generate tiled map images with openlayers.
However, it doesn't seem reasonnable to generate a single merged file.
Thus, I started using  gdal_vrtmerge.py.
In my case, I downloaded FWTools226.exe and installed it in window xp.
but, I can't find gdal_vrtmerge.py file. so I downloaded it from
the Internet.
when I run gdal_vrtmerge.py, I encounter an error.
The error message is that

  Traceback (most recent call last):
    File "gdal_vrtmerge.py", line 27, in ?
      from osgeo import gdal
    ImportError: No module named osgeo

So, I chaned  gdal_vrtmerge.py :from osgeo import gdal =>  import gdal
After changing it, It runs well.
For example, python gdal_vrtmerge.py -o C:\raster\tmp.vrt  -separate
--optfile C:\raster\tilelist.txt
Next, I run gdal2tiles.py with tmp.vrt.
For instance, python gdal2tiles.py -title "test" -publishurl
http://myserver/geo/osmap/ -nogooglemaps -nokml -v C:\raster\tmp.vrt
C:\tmp\raster2

After running gdal2tiles.py, I can get tiled images.
But the problem is that when I look the images, the color of images are
changed from color to black and white.
Why didn't tiled images preserve their orginal color?
How to use gdal_vrtmerge.py?
If I use gdal_vrtmerge.py without -separate parameter,
e.g.  python gdal_vrtmerge.py -o C:\raster\tmp.vrt  -separate --optfile
C:\raster\tilelist.txt
an error take place :
         C:\GEOFOSS\FWTools2.2.6\bin>python gdal_vrtmerge.py -o
C:\raster\tmp.vrt  --optfile C:\raster\tilelist.txt
          Traceback (most recent call last):
            File "gdal_vrtmerge.py", line 293, in ?
            t_fh.write('\t\t<NoDataValue>%f</NoDataValue>\n' %
           TypeError: float argument required

Best regards,
Jeong.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080902/49bc395c/attachment.html
From antonio.valentino at tiscali.it  Tue Sep  2 07:10:55 2008
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Tue Sep  2 07:12:16 2008
Subject: [gdal-dev] module of a complex dataset
Message-ID: <20080902131055.7e7d7083@valentinows>

Is it possible to extract the module (and possibly the phase) of a
complex dataset using GDAL utilities or playing with the virtual driver?

If I use 

  $ gdal_translate -ot Float64 src_dataset dst_dataset

on a complex src_dataset it seems to extract the real part.

Any tip?

Regards

-- 
Antonio Valentino
From ivan.lucena at pmldnet.com  Tue Sep  2 08:46:53 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Sep  2 08:46:56 2008
Subject: [gdal-dev] Reading image
In-Reply-To: <b1ccf1c10809010631m54bba403r4d52e924b98f9ee6@mail.gmail.com>
References: <b1ccf1c10809010631m54bba403r4d52e924b98f9ee6@mail.gmail.com>
Message-ID: <48BD35BD.1010406@pmldnet.com>

Silvia,

As far as I know, the GDAL API doesn't have a function to read direct 
from a multi-band to 3D matrix.

The GDALRasterBand::RasterIO()[1] and GDALRasterBand::ReadBlock()[2] 
reads from one band at the time.

The GDALDataset::RasterIO()[3] does support multi-band reading but I 
believe that it will not going to word generically for whatever input 
you have and that is usually a import goal when programming with GDAL.

That will depend on the interleave mode and the returning buffer is not 
going to be exactly a 3D matrix but it could be interpreted as one with 
simple math. I guess.

But that doesn't mean that you cannot use the GDALRasterBand methods and 
write your on code to mount a 3D matrix. I don't know about the others 
but I feel safer with this approach instead of the GDALDAtaset one.

Anyway, Take a look in some C++ code, that doesn't do multi-band, but a 
least can give you one idea of how you can use GDAL in C++ to manipulate 
pixel values.[4]

1)http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
2)http://www.gdal.org/classGDALRasterBand.html#09e1d83971ddff0b43deffd54ef25eef
3)http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
4)http://perrygeo.googlecode.com/svn/trunk/demtools/

Best regards,

Ivan


Silvia Marchesi wrote:
> Hi everybody,
>  I'm a new user of gdal library and functions and I would like to know how
> can I read a multiband image putting in a matrix (i.e. A[x][y][b]) the
> values of the DN.
> 
> Thanks a lot,
> Silvia
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Sep  2 09:18:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  2 09:19:01 2008
Subject: [gdal-dev] module of a complex dataset
In-Reply-To: <20080902131055.7e7d7083@valentinows>
References: <20080902131055.7e7d7083@valentinows>
Message-ID: <48BD3D24.6070908@pobox.com>

Antonio Valentino wrote:
> Is it possible to extract the module (and possibly the phase) of a
> complex dataset using GDAL utilities or playing with the virtual driver?
> 
> If I use 
> 
>   $ gdal_translate -ot Float64 src_dataset dst_dataset
> 
> on a complex src_dataset it seems to extract the real part.

Antonio,

I am not aware of any way to accomplish this with the virtual driver
or the commandline utilities. But I have added a small sample script doing
this with numpy and python if you would be interested in working from that.

   http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/magphase.py

import gdal
import gdalnumeric
try:
     import numpy
except:
     import Numeric as numpy


src_ds = gdal.Open('complex.tif')
xsize = src_ds.RasterXSize
ysize = src_ds.RasterYSize

src_image = src_ds.GetRasterBand(1).ReadAsArray()
mag_image = pow(numpy.real(src_image)*numpy.real(src_image) \
                 + numpy.imag(src_image)*numpy.imag(src_image),0.5)
gdalnumeric.SaveArray( mag_image, 'magnitude.tif' )

phase_image = numpy.angle(src_image)
gdalnumeric.SaveArray( phase_image, 'phase.tif' )


I was also impressed to discover today that the numpy manual is now
finally free.

   http://www.tramy.us/numpybook.pdf

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Tue Sep  2 11:32:25 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Sep  2 11:32:32 2008
Subject: [gdal-dev] GetExtent method
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCB8@daytonmsg2k3.AERO.BALL.COM>

When I used the debugger to step into the OGRLayer GetExtent method I
noticed that it walks through all of the features in the dataset and
tests the envelope of each feature in the set.

 

Are there any driver specific optimizations (i.e. OCI)  that could be
called instead of this one since it does take a long time for a large
dataset?

 

I realize we can create our own but I would like to use a built in
function if it is available.

 

Frank: Since you are working in the OCI driver would this be a good time
to add something like:

            select min(a1.SHAPE.SDO_POINT.X),

 max(a1.SHAPE.SDO_POINT.X),

 min(a1.SHAPE.SDO_POINT.Y),

 max(a1.SHAPE.SDO_POINT.Y) from DatasetName a1;

 

Of course that falls back on the first question, is there already a
built in method.

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080902/3196d255/attachment-0001.html
From warmerdam at pobox.com  Tue Sep  2 11:55:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  2 11:55:52 2008
Subject: [gdal-dev] GetExtent method
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCB8@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCB8@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <48BD61ED.9080400@pobox.com>

Clay, Bruce wrote:
> When I used the debugger to step into the OGRLayer GetExtent method I 
> noticed that it walks through all of the features in the dataset and 
> tests the envelope of each feature in the set.
> 
>  
> 
> Are there any driver specific optimizations (i.e. OCI)  that could be 
> called instead of this one since it does take a long time for a large 
> dataset?
> 
>  
> 
> I realize we can create our own but I would like to use a built in 
> function if it is available.
> 
>  
> 
> Frank: Since you are working in the OCI driver would this be a good time 
> to add something like:
> 
>             select min(a1.SHAPE.SDO_POINT.X),
> 
>  max(a1.SHAPE.SDO_POINT.X),
> 
>  min(a1.SHAPE.SDO_POINT.Y),
> 
>  max(a1.SHAPE.SDO_POINT.Y) from DatasetName a1;
> 
>  
> 
> Of course that falls back on the first question, is there already a 
> built in method.

Bruce,

We already have a specialized implementation of OGROCITableLayer::GetExtent()
at:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/oci/ogrocitablelayer.cpp#L1072

I wonder if this optimized case is failing for some reason for you?  Or
perhaps you are working with an result from ExecuteSQL()?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Tue Sep  2 12:39:39 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Sep  2 12:39:45 2008
Subject: [gdal-dev] GetExtent method
In-Reply-To: <48BD61ED.9080400@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCB8@daytonmsg2k3.AERO.BALL.COM>
	<48BD61ED.9080400@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCB9@daytonmsg2k3.AERO.BALL.COM>

Frank:
  As best I can tell the data layer is recognized as an OGROCITableLayer
but the call to GetExtent only goes down to the OGRLayer.  It is not
passed down to the specific (OCI) driver.  The calls to ResetReading and
GetNextFeature in the GetExtent method are passed to the OCI driver but
the GetGeometryRef and GetEvelope are not.  The process flows into the
"if (poGeom && !bExtentSet)" and the first getEnvelope inside the while
statement then goes into the else portion for all of the remaining
features in the dataset.

Bruce


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, September 02, 2008 11:55 AM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GetExtent method

Clay, Bruce wrote:
> When I used the debugger to step into the OGRLayer GetExtent method I 
> noticed that it walks through all of the features in the dataset and 
> tests the envelope of each feature in the set.
> 
>  
> 
> Are there any driver specific optimizations (i.e. OCI)  that could be 
> called instead of this one since it does take a long time for a large 
> dataset?
> 
>  
> 
> I realize we can create our own but I would like to use a built in 
> function if it is available.
> 
>  
> 
> Frank: Since you are working in the OCI driver would this be a good
time 
> to add something like:
> 
>             select min(a1.SHAPE.SDO_POINT.X),
> 
>  max(a1.SHAPE.SDO_POINT.X),
> 
>  min(a1.SHAPE.SDO_POINT.Y),
> 
>  max(a1.SHAPE.SDO_POINT.Y) from DatasetName a1;
> 
>  
> 
> Of course that falls back on the first question, is there already a 
> built in method.

Bruce,

We already have a specialized implementation of
OGROCITableLayer::GetExtent()
at:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/oci/ogroci
tablelayer.cpp#L1072

I wonder if this optimized case is failing for some reason for you?  Or
perhaps you are working with an result from ExecuteSQL()?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From nowak at xpam.de  Tue Sep  2 15:40:24 2008
From: nowak at xpam.de (Adam Nowacki)
Date: Tue Sep  2 15:40:18 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
References: <loom.20080804T125825-537@post.gmane.org>	
	<48B7FE18.1070502@xpam.de>	
	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>	
	<200808292137.57087.even.rouault@mines-paris.org>	
	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com>
	<f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
Message-ID: <48BD96A8.9040209@xpam.de>

Tamas Szekeres wrote:
> Hi All,
> 
> Upon thinking about the issues I've been come up with previously, I
> consider the following approach could be implemented easily either at
> driver or at SWIG interface level. Requires a new class to be
> implemented by the async IO supported drivers and a new additional
> method should be added to the GDALDataset and GDALRasterBand.
> The user could implement the async IO by using the following pseudo sequence:
> 
> <Code>
> ...
> </Code>

I like it :)

typedef enum {
     ...,
     CE_Again = 5 // timeout, buffer not updated, call RasterIO() again
} CPLErr;

typedef enum { // Async raster io status
     GRS_Complete = 0, // raster io is complete, call to 
GDALRasterIOContext->RasterIO() will return CE_Failure
     GRS_InProgress = 1, // raster io in progress, call 
GDALRasterIOContext->RasterIO() to get more data
     GRS_Error = 2 // error, call to GDALRasterIOContext->RasterIO() 
will return CE_Failure
} GDALRasterIOStatus;

typedef enum { // Hints for GDALRasterIOContext->RasterIO(), driver 
implementations may ignore any or all
     GRH_SingleBlock = 0x1, // exit after single block update, even if 
there is more data immediately available
     GRH_Progressive = 0x2, // update with lower resolution data / fill 
with interlaced rows
     GRH_WaitForTimeout = 0x4 // wait for timeout even if already 
updated some data
} GDALRasterIOHint;

class GDALRasterIOContext {
public:
     GDALRasterIOContext() {
         eStatus = GRS_Continue;
         pszError = NULL;
     }

public:
// Continue raster io, update pData buffer with new data, nUpdate??? = 
bounding box of all updated blocks
// return CE_None if updated with new data
// return CE_Again on timeout
// return CE_Failure on error
     virtual CPLErr RasterIO(void *pData, int nTimeoutMilliseconds = -1, 
int nHint = 0);

public:
     GDALRasterIOStatus eStatus;
     char *pszError; // if eStatus == GRS_Error this should contain 
human readable error message, NULL otherwise
     int nUpdateXOff;
     int nUpdateYOff;
     int nUpdateXSize;
     int nUpdateYSize;
};

class GDALDataset {
...
public:
     virtual GDALRasterIOContext *StartRasterIO(
         GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize,
         int nBufXSize, int nBufYSize, GDALDataType eBufType,
         int nBandCount, int *panBandMap, int nPixelSpace, int 
nLineSpace, int nBandSpace
     );

     virtual void EndRasterIO(GDALAsyncRasterIOContext *poContext);
};

From nbarker at ittvis.com  Tue Sep  2 15:49:14 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Tue Sep  2 15:49:23 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>	<48B7FE18.1070502@xpam.de>	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>	<200808292137.57087.even.rouault@mines-paris.org>	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com><f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4C4@gemini.rsinc.com>

Adam, all

Thanks for the comments and updates, I am working as fast as I can
(after a long weekend without a computer :-) ) to capture all of your
comments and interface definitions and to produce the documented
interfaces (header definitions) for the RFC.  I am taking the last email
from Tamas, and the enum definition below and will hopefully have an
updated RFC out for comment tomorrow.

Please add your names to the RFC in the author section, this is a
collaborative effort, and after I have put up the code interfaces please
edit directly.

Many thanks,

Norman

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Adam Nowacki
Sent: Tuesday, September 02, 2008 1:40 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

Tamas Szekeres wrote:
> Hi All,
> 
> Upon thinking about the issues I've been come up with previously, I
> consider the following approach could be implemented easily either at
> driver or at SWIG interface level. Requires a new class to be
> implemented by the async IO supported drivers and a new additional
> method should be added to the GDALDataset and GDALRasterBand.
> The user could implement the async IO by using the following pseudo
sequence:
> 
> <Code>
> ...
> </Code>

I like it :)

typedef enum {
     ...,
     CE_Again = 5 // timeout, buffer not updated, call RasterIO() again
} CPLErr;

typedef enum { // Async raster io status
     GRS_Complete = 0, // raster io is complete, call to 
GDALRasterIOContext->RasterIO() will return CE_Failure
     GRS_InProgress = 1, // raster io in progress, call 
GDALRasterIOContext->RasterIO() to get more data
     GRS_Error = 2 // error, call to GDALRasterIOContext->RasterIO() 
will return CE_Failure
} GDALRasterIOStatus;

typedef enum { // Hints for GDALRasterIOContext->RasterIO(), driver 
implementations may ignore any or all
     GRH_SingleBlock = 0x1, // exit after single block update, even if 
there is more data immediately available
     GRH_Progressive = 0x2, // update with lower resolution data / fill 
with interlaced rows
     GRH_WaitForTimeout = 0x4 // wait for timeout even if already 
updated some data
} GDALRasterIOHint;

class GDALRasterIOContext {
public:
     GDALRasterIOContext() {
         eStatus = GRS_Continue;
         pszError = NULL;
     }

public:
// Continue raster io, update pData buffer with new data, nUpdate??? = 
bounding box of all updated blocks
// return CE_None if updated with new data
// return CE_Again on timeout
// return CE_Failure on error
     virtual CPLErr RasterIO(void *pData, int nTimeoutMilliseconds = -1,

int nHint = 0);

public:
     GDALRasterIOStatus eStatus;
     char *pszError; // if eStatus == GRS_Error this should contain 
human readable error message, NULL otherwise
     int nUpdateXOff;
     int nUpdateYOff;
     int nUpdateXSize;
     int nUpdateYSize;
};

class GDALDataset {
...
public:
     virtual GDALRasterIOContext *StartRasterIO(
         GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int
nYSize,
         int nBufXSize, int nBufYSize, GDALDataType eBufType,
         int nBandCount, int *panBandMap, int nPixelSpace, int 
nLineSpace, int nBandSpace
     );

     virtual void EndRasterIO(GDALAsyncRasterIOContext *poContext);
};

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.wilkie at gov.yk.ca  Tue Sep  2 17:37:53 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Sep  2 17:38:28 2008
Subject: [gdal-dev] Amusing use of GDAL API : a GIMP plugin
In-Reply-To: <200808232327.21572.even.rouault@mines-paris.org>
References: <200808232327.21572.even.rouault@mines-paris.org>
Message-ID: <48BDB231.2000303@gov.yk.ca>

Hi Even,

While this particular implementation may only be a toy, there are many 
times when it would be very useful to use an application like gimp for 
editing spatial imagery. Case in point, Avenza Systems sells a plugin 
for photoshop called Geographic Imager to do this for $700usd.

Aside from the all-in-ram limitation you already noted another 
significant problem with using gimp for spatial image processing is the 
fact that it only understands 8bit channels.

My personal research in this area, needing to find a method for fuzzy 
selection and merging of portions of co-incident digital elevation 
models, has led me to VIPS 
(http://www.vips.ecs.soton.ac.uk/index.php?title=VIPS), though as yet 
I've not had the time to explore the possibility.

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Even Rouault wrote:
> At http://trac.osgeo.org/gdal/attachment/wiki/CodeSnippets/gimp-gdal.c, you'll 
> find the source for a GIMP plugin that can open GDAL datasets.
> 
> Instructions how to build (on Unix), install and use are in the header of the 
> file.
> 
> More fun than really usefull though, as (to the extent of my knowledge) GIMP 
> must open entirely the dataset into memory at loading. So unless you have 
> much RAM and patience, you won't be able to open big datasets.
> 
> Enjoy.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From ari.jolma at tkk.fi  Tue Sep  2 17:26:03 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue Sep  2 17:55:31 2008
Subject: [gdal-dev] Countour polygons instead of lines
Message-ID: <48BDAF6B.90009@tkk.fi>

Did you ever want gdal_contour to produce polygons instead of lines?

I made a small Perl program that uses the Perl bindings to GDAL and 
which converts the lines into polygons. The polygons represent "plates" 
of equal elevation and thus overlap. The polygons are stored into a new 
layer in such an order that ordered rendering of them produces a nice 
visualization. Visualization is my main goal here - I want to get a 
similar effect as in some weather forecasts. However, transparency does 
not work as expected in standard viewers because of overlapping 
polygons. Here's an example created from DEM: 
http://map.hut.fi/files/misc/contour_polygons.png

The code is also at http://map.hut.fi/files/misc/

I found this by googling: 
http://lists.maptools.org/pipermail/fwtools/2005-November/000199.html

I wonder what's the current situation. Does GRASS do this?

Cheers,

Ari


From perrygeo at gmail.com  Tue Sep  2 18:19:54 2008
From: perrygeo at gmail.com (Matthew Perry)
Date: Tue Sep  2 18:19:55 2008
Subject: [gdal-dev] Countour polygons instead of lines
In-Reply-To: <48BDAF6B.90009@tkk.fi>
References: <48BDAF6B.90009@tkk.fi>
Message-ID: <5383fa5e0809021519k37ff612ag4392da5511db1d99@mail.gmail.com>

On Tue, Sep 2, 2008 at 2:26 PM, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Did you ever want gdal_contour to produce polygons instead of lines?
...
> I wonder what's the current situation. Does GRASS do this?
>

Indirectly, yes. You can use r.reclass to create areas of similar
elevation from the raster DEM and r.to.vect to covert to polygons.

-- 
Matthew T. Perry
http://www.perrygeo.net
From nbarker at ittvis.com  Tue Sep  2 19:42:49 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Tue Sep  2 19:42:53 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>	<48B7FE18.1070502@xpam.de>	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>	<200808292137.57087.even.rouault@mines-paris.org>	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com><f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>

Hi,

I have updated the RFC 

http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support

To take in all of your comments, and I have added a comment about how
this is a progressive format driver, but is no longer asynchronous, and
I am not sure how it ever could be asynchronous within the driver since
the methods block.  It moves the thread handling to the user, which is a
fair trade-off over simplicity and abstracting some of the nastier
features of the protocol implemented.

I am not really a c++ developer (please do point out any stupid errors I
may have made), but have written JPIP server and clients (in Java) and
think the design (which in the main has come from Adam, Tamas, Even -
not me) is a good (and a simple) one.  It would be relatively easy to
implement, I added the papzOptions to the method call as a general catch
all for format implementations. 

Please direct your comments and improvements to specific items within
the RFC so that it can be shaped to something that can potentially be
approved and hence implemented.

Many thanks,

Norman 

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Adam Nowacki
Sent: Tuesday, September 02, 2008 1:40 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

Tamas Szekeres wrote:
> Hi All,
> 
> Upon thinking about the issues I've been come up with previously, I
> consider the following approach could be implemented easily either at
> driver or at SWIG interface level. Requires a new class to be
> implemented by the async IO supported drivers and a new additional
> method should be added to the GDALDataset and GDALRasterBand.
> The user could implement the async IO by using the following pseudo
sequence:
> 
> <Code>
> ...
> </Code>

I like it :)

typedef enum {
     ...,
     CE_Again = 5 // timeout, buffer not updated, call RasterIO() again
} CPLErr;

typedef enum { // Async raster io status
     GRS_Complete = 0, // raster io is complete, call to 
GDALRasterIOContext->RasterIO() will return CE_Failure
     GRS_InProgress = 1, // raster io in progress, call 
GDALRasterIOContext->RasterIO() to get more data
     GRS_Error = 2 // error, call to GDALRasterIOContext->RasterIO() 
will return CE_Failure
} GDALRasterIOStatus;

typedef enum { // Hints for GDALRasterIOContext->RasterIO(), driver 
implementations may ignore any or all
     GRH_SingleBlock = 0x1, // exit after single block update, even if 
there is more data immediately available
     GRH_Progressive = 0x2, // update with lower resolution data / fill 
with interlaced rows
     GRH_WaitForTimeout = 0x4 // wait for timeout even if already 
updated some data
} GDALRasterIOHint;

class GDALRasterIOContext {
public:
     GDALRasterIOContext() {
         eStatus = GRS_Continue;
         pszError = NULL;
     }

public:
// Continue raster io, update pData buffer with new data, nUpdate??? = 
bounding box of all updated blocks
// return CE_None if updated with new data
// return CE_Again on timeout
// return CE_Failure on error
     virtual CPLErr RasterIO(void *pData, int nTimeoutMilliseconds = -1,

int nHint = 0);

public:
     GDALRasterIOStatus eStatus;
     char *pszError; // if eStatus == GRS_Error this should contain 
human readable error message, NULL otherwise
     int nUpdateXOff;
     int nUpdateYOff;
     int nUpdateXSize;
     int nUpdateYSize;
};

class GDALDataset {
...
public:
     virtual GDALRasterIOContext *StartRasterIO(
         GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int
nYSize,
         int nBufXSize, int nBufYSize, GDALDataType eBufType,
         int nBandCount, int *panBandMap, int nPixelSpace, int 
nLineSpace, int nBandSpace
     );

     virtual void EndRasterIO(GDALAsyncRasterIOContext *poContext);
};

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at tkk.fi  Wed Sep  3 03:40:13 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Sep  3 03:41:57 2008
Subject: [gdal-dev] Countour polygons instead of lines
In-Reply-To: <5383fa5e0809021519k37ff612ag4392da5511db1d99@mail.gmail.com>
References: <48BDAF6B.90009@tkk.fi>
	<5383fa5e0809021519k37ff612ag4392da5511db1d99@mail.gmail.com>
Message-ID: <48BE3F5D.7060308@tkk.fi>

Matthew Perry kirjoitti:
> On Tue, Sep 2, 2008 at 2:26 PM, Ari Jolma <ari.jolma@tkk.fi> wrote:
>   
>> Did you ever want gdal_contour to produce polygons instead of lines?
>>     
> ...
>   
>> I wonder what's the current situation. Does GRASS do this?
>>
>>     
>
> Indirectly, yes. You can use r.reclass to create areas of similar
> elevation from the raster DEM and r.to.vect to covert to polygons.
>   

Thanks for the comment,

Yes, I can do that too: http://map.hut.fi/files/misc/reclassed.png but 
it's uglier than that from the contour, and at least in my 
implementation there's the problem of overlapping polygons not ordered 
correctly (can be seen in that example). That is because of the way the 
vectorization is done. Does GRASS create polygons with holes?

For comparison: http://map.hut.fi/files/misc/from_contours.png which 
shows that there are still bugs in my program :(

I use GEOS methods in the program and it turns out that the contour 
lines gdal_contour creates are not always well-behaving enough. 
Sometimes those lines that start from the image boundary have an extra 
vertice either in the beginning of the line or at the end.

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3812 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi 
http://geoinformatics.tkk.fi/twiki/bin/view/Main/AriJolmaHomePage


From nikos.alexandris at felis.uni-freiburg.de  Wed Sep  3 03:48:44 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Sep  3 03:48:47 2008
Subject: [gdal-dev] Countour polygons instead of lines
In-Reply-To: <48BE3F5D.7060308@tkk.fi>
References: <48BDAF6B.90009@tkk.fi>
	<5383fa5e0809021519k37ff612ag4392da5511db1d99@mail.gmail.com>
	<48BE3F5D.7060308@tkk.fi>
Message-ID: <1220428125.9158.1.camel@vertical>

On Wed, 2008-09-03 at 10:40 +0300, Ari Jolma wrote:
> > Indirectly, yes. You can use r.reclass to create areas of similar
> > elevation from the raster DEM and r.to.vect to covert to polygons.

Also, use the "-s" switch (in r.to.vect) to get smoothed and not edgy
polygons :-)

From a.neumann at carto.net  Wed Sep  3 05:51:18 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Sep  3 05:51:22 2008
Subject: [gdal-dev] gdal_merge and the treatment of nodata value
Message-ID: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>

Hi,

I am using gdal_merge to merge different rasters. The problem is that the
nodata values appear as black and I want to have them white.

Is there an option to set nodata values to white with gdal_merge? Or would
I have to do this as a postprocessing?

The problem is that the images are too large to be opened in an
interactive application like Photoshop and Gimp. Otherwise I would correct
it in there.

Thanks for an idea on how to add nodata as white to my gdal_merge workflow.

Andreas


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From szekerest at gmail.com  Wed Sep  3 07:32:36 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep  3 07:32:38 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<48B7FE18.1070502@xpam.de>
	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>
	<200808292137.57087.even.rouault@mines-paris.org>
	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com>
	<f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>
Message-ID: <f3b73b7d0809030432i7d2db161ka14e2324b9343b16@mail.gmail.com>

2008/9/3 Norman Barker <nbarker@ittvis.com>:
> Hi,
>
> I have updated the RFC
>
> http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> To take in all of your comments, and I have added a comment about how
> this is a progressive format driver, but is no longer asynchronous, and
> I am not sure how it ever could be asynchronous within the driver since
> the methods block.  It moves the thread handling to the user, which is a
> fair trade-off over simplicity and abstracting some of the nastier
> features of the protocol implemented.
>

I guess there's no need to maintain both ReadNextBlock and RasterIO in
parallel only to choose the proper name for this function.
I don't see why this function may not be asynchronous in effect. I
consider the following operations would be implemented at driver level
within this function:

1. Waiting for the next data to arrive, return if the user specified
timeout have elapsed.
2. Update the user buffer and the iocontext according to the incoming
data. If the data is ready to be rendered, then return immediately
otherwise go to 1.


In this regard the user thread is only blocked until a new data will
arrive and the buffer contains valid data. When the caller then
renders the display, new data may also be received at the driver so
the next call to RasteIO may also return immediately. However - for
example - in an 2D interlaced progressive rendering the driver should
wait until the next turnaround of the image will arive completely
before returning to the caller, since it's not too convenient to allow
the user to render intermediary images that are not ready to display
in the screen.

I consider moving the thread handling to the user is more beneficial
than disadvantageous, since the user will have the freedom to choose
the proper threading mode for their application. The user will have
the freedom to spawn new threads if needed to call RasterIO, however I
don't think it'll required in most cases.

I don't think if the driver would be required to copy padding data
into the user buffer since the user will be notified about the update
region that should be copied over.


Best regards,

Tamas
From warmerdam at pobox.com  Wed Sep  3 10:17:42 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep  3 10:18:09 2008
Subject: [gdal-dev] gdal_merge and the treatment of nodata value
In-Reply-To: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>
References: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>
Message-ID: <48BE9C86.3030704@pobox.com>

Andreas Neumann wrote:
> Hi,
> 
> I am using gdal_merge to merge different rasters. The problem is that the
> nodata values appear as black and I want to have them white.
> 
> Is there an option to set nodata values to white with gdal_merge? Or would
> I have to do this as a postprocessing?
> 
> The problem is that the images are too large to be opened in an
> interactive application like Photoshop and Gimp. Otherwise I would correct
> it in there.
> 
> Thanks for an idea on how to add nodata as white to my gdal_merge workflow.

Andreas,

I can't answer this without knowing more about your image configuration
and what applications you are using to judge that the nodata is white.

Does the image have a colormap?

What is the nodata value?

What is the pixel type?

What are typical image values?

If the image does not have a colormap, and the nodata value is larger
than the typical image values, then most applications that don't treat
nodata values specially will just treat them as white or a more intense
value than the rest of the image values.

If the image has a colormap then there may be options available to alter
the colormap, though this will depend on the file format, and perhaps
you capacity to write a small script.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Wed Sep  3 10:43:06 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Sep  3 10:43:36 2008
Subject: [gdal-dev] OCI driver not adding data to Oracle Table
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCBB@daytonmsg2k3.AERO.BALL.COM>

I have been trying to use the OCI driver to create a table and load data
into it.  I have been using the same code loop in the past to create
shapefiles without problems.  No errors are reported during the
CreateFeature and SetField process based on return status but no data
shows up in the table.

 

I added several calls to CPLGetLastErrorMsg and still do not get any
reported errors.  I set a trap in OGROCITableLayer and walked down that
path into FinalizeNewLayer and FlushPendingFeatures and finally got an
error message pn the OCIStmtExecute call indicating that a "value was
larger than specified precision allows for this column".  Unfortuneatly
it did not indicate which column was in error.

 

Is there any way to pin down the exact column?

 

If did notice in the SetField that atof(string) returned more digits to
the right of the decimal point than the precision specified.  Is that
the likely cause of the problem?  The source data only has 8 characters
to the right of the decimal point but the atof call returns more than 8
when it converts the string retrieved from the source table in Oracle.

 

Any thoughts would be greatly appreciated.

 

Bruce




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080903/399e4d32/attachment.html
From a.neumann at carto.net  Wed Sep  3 10:53:55 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Sep  3 10:54:00 2008
Subject: [gdal-dev] gdal_merge and the treatment of nodata value
In-Reply-To: <48BE9C86.3030704@pobox.com>
References: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>
	<48BE9C86.3030704@pobox.com>
Message-ID: <24512.193.246.86.39.1220453635.squirrel@webmail.customers.iirc.at>


Thanks for having a look at my problem. I am adding more information:

I am merging a number of rgb tiff files (scanned city maps), but they
don't align perfectly at the outer edges. This means that on the edges of
the resulting output file, where the tiff files don't align, I get borders
with nodata values.

To display the data, after it was merged, I use either Quantum GIS or UMN
Mapserver. Both display the values as black. However, I want the borders
to appear as white.

Andreas


> Andreas,
>
> I can't answer this without knowing more about your image configuration
> and what applications you are using to judge that the nodata is white.
>
> Does the image have a colormap?
>
> What is the nodata value?
>
> What is the pixel type?
>
> What are typical image values?
>
> If the image does not have a colormap, and the nodata value is larger
> than the typical image values, then most applications that don't treat
> nodata values specially will just treat them as white or a more intense
> value than the rest of the image values.
>
> If the image has a colormap then there may be options available to alter
> the colormap, though this will depend on the file format, and perhaps
> you capacity to write a small script.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From ivan.lucena at pmldnet.com  Wed Sep  3 10:54:00 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Sep  3 10:54:31 2008
Subject: [gdal-dev] OCI driver not adding data to Oracle Table
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCBB@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCBB@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <48BEA508.2070500@pmldnet.com>

Bruce,

I have seem this error message before and I think is it exactly what you 
though but just for troubleshooting, could you try to re-create the 
columns as NUMERIC without (precision,scale) and run it again. That will 
point out where the error occurs. Maybe.

Ivan

Clay, Bruce wrote:
> I have been trying to use the OCI driver to create a table and load data
> into it.  I have been using the same code loop in the past to create
> shapefiles without problems.  No errors are reported during the
> CreateFeature and SetField process based on return status but no data
> shows up in the table.
> 
>  
> 
> I added several calls to CPLGetLastErrorMsg and still do not get any
> reported errors.  I set a trap in OGROCITableLayer and walked down that
> path into FinalizeNewLayer and FlushPendingFeatures and finally got an
> error message pn the OCIStmtExecute call indicating that a "value was
> larger than specified precision allows for this column".  Unfortuneatly
> it did not indicate which column was in error.
> 
>  
> 
> Is there any way to pin down the exact column?
> 
>  
> 
> If did notice in the SetField that atof(string) returned more digits to
> the right of the decimal point than the precision specified.  Is that
> the likely cause of the problem?  The source data only has 8 characters
> to the right of the decimal point but the atof call returns more than 8
> when it converts the string retrieved from the source table in Oracle.
> 
>  
> 
> Any thoughts would be greatly appreciated.
> 
>  
> 
> Bruce
> 
> 
> 
> 
> This message and any enclosures are intended only for the addressee.  Please  
> notify the sender by email if you are not the intended recipient.  If you are  
> not the intended recipient, you may not use, copy, disclose, or distribute this  
> message or its contents or enclosures to any other person and any such actions  
> may be unlawful.  Ball reserves the right to monitor and review all messages  
> and enclosures sent to or from this email address.
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nbarker at ittvis.com  Wed Sep  3 11:25:30 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Sep  3 11:25:38 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>
	<48B7FE18.1070502@xpam.de>
	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>
	<200808292137.57087.even.rouault@mines-paris.org>
	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com>
	<f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>
	<f3b73b7d0809030432i7d2db161ka14e2324b9343b16@mail.gmail.com>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4CE@gemini.rsinc.com>

Hi Tamas,

Looks like we are getting there in terms of defining the interface :-)
My comments are inline.



-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Wednesday, September 03, 2008 5:33 AM
To: Norman Barker
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

2008/9/3 Norman Barker <nbarker@ittvis.com>:
> Hi,
>
> I have updated the RFC
>
> http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> To take in all of your comments, and I have added a comment about how
> this is a progressive format driver, but is no longer asynchronous,
and
> I am not sure how it ever could be asynchronous within the driver
since
> the methods block.  It moves the thread handling to the user, which is
a
> fair trade-off over simplicity and abstracting some of the nastier
> features of the protocol implemented.
>

I guess there's no need to maintain both ReadNextBlock and RasterIO in
parallel only to choose the proper name for this function.
I don't see why this function may not be asynchronous in effect. I
consider the following operations would be implemented at driver level
within this function:

<ncb>
It would be useful to maintain both ReadNextBlock and RasterIO in the
case of JPIP, it can be advantageous (if the client can handle it) to
call regions of a server image on tile boundaries -> ReadNextBlock, but
in most cases I think RasterIO will be called.

If you think it will just be easier to keep RasterIO then I am fine with
that.
</ncb>

1. Waiting for the next data to arrive, return if the user specified
timeout have elapsed.
2. Update the user buffer and the iocontext according to the incoming
data. If the data is ready to be rendered, then return immediately
otherwise go to 1.


In this regard the user thread is only blocked until a new data will
arrive and the buffer contains valid data. When the caller then
renders the display, new data may also be received at the driver so
the next call to RasteIO may also return immediately. However - for
example - in an 2D interlaced progressive rendering the driver should
wait until the next turnaround of the image will arive completely
before returning to the caller, since it's not too convenient to allow
the user to render intermediary images that are not ready to display
in the screen.


<ncb>
In comparison to a callback function, I think this behaviour is
synchronous, we are blocking until a timeout, and then calling again for
another time period even if it returns immediately.  However this isn't
a bad thing.
</ncb>

I consider moving the thread handling to the user is more beneficial
than disadvantageous, since the user will have the freedom to choose
the proper threading mode for their application. The user will have
the freedom to spawn new threads if needed to call RasterIO, however I
don't think it'll required in most cases.

<ncb>
I agree completely with this comment, sorry if I didn't make it clearer
in the RFC.  I think delegating the threading to the user language is a
very good thing, it will certainly help with the Java swig wrappers and
hence ImageIO which I am familiar with.
</ncb>

I don't think if the driver would be required to copy padding data
into the user buffer since the user will be notified about the update
region that should be copied over.

<ncb>
In the case of JPIP (however unfortunate) the server is allowed to
adjust the region of the image returned this may require some padding
the requested client buffer.

Thanks again for the comments.
</ncb>


Best regards,

Tamas
From c.willmes at uni-koeln.de  Wed Sep  3 11:39:36 2008
From: c.willmes at uni-koeln.de (Christian Willmes)
Date: Wed Sep  3 12:18:14 2008
Subject: [gdal-dev] gdal error 4
Message-ID: <48BEAFB8.8050903@uni-koeln.de>

Hello,

I have a problem with the gdal Installation on our webserver. I'm new to 
gdal, to be specific I try to get some raster data into mapserver, but 
there occours the following error according gdal and I could not find 
anything what helped me out on google and other mailinglists.

I get the following Error when I try to access data with gdal:
<--------
cwillmes@lvr18$ gdalinfo SRTM_Elevation.tif
ERROR 4: `SRTM_Elevation.tif' not recognised as a supported file format.

GDALOpen failed - 4
`SRTM_Elevation.tif' not recognised as a supported file format.
--------->

On my local machine gdal can access the same file:
<------
christian@gis-bar-linux1:~/Dokumente/SeismoGIS/WebGIS/data$ gdalinfo 
SRTM_Elevation.tif
Driver: GTiff/GeoTIFF
Size is 5099, 3645
Coordinate System is:
GEOGCS["WGS 84",
 [ ..... ]
---------->

So the data works. I checked the supported formats from the webservers 
gdal installation:
<-------
cwillmes@lvr18$ gdalinfo --formats
Supported Formats:
  VRT (rw+): Virtual Raster
  GTiff (rw+): GeoTIFF
 [....]
--------->
So it seems to support the GTiff format on the server also.

I converted the data also to JPEG and BMP to test it. On my local 
machine the data is recognized fine by gdal, on the server apears the 
same erro (No 4). But according to 'gdalinfo --formats' all the tested 
formats are supported?!

Can somebody please give me a hint for the reason of that error and/or 
how to fix it?

Thanks very much in advance!

Christian

-- 
Christian Willmes
AG GIS & Fernerkundung		| GIS & RS Group
Geographisches Institut		| Institute of Geography
Universit?t K?ln		| University of Cologne
http://www.geographie.uni-koeln.de/gis/
Tel.: +49 (0)221 470 7431

From matt.wilkie at gov.yk.ca  Wed Sep  3 12:31:54 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Sep  3 12:33:37 2008
Subject: [gdal-dev] Shapefile reprojection - copy and update metadata file
In-Reply-To: <OF65A7670F.5D39465F-ON852574B9.0040C6B8-852574B9.00422A9F@fws.gov>
References: <OF65A7670F.5D39465F-ON852574B9.0040C6B8-852574B9.00422A9F@fws.gov>
Message-ID: <48BEBBFA.5080003@gov.yk.ca>

Doug_Newcomb@fws.gov wrote:
> Hmm, The first few lines of the metadata for an older shapefile ( as
>  opposed to personal geodatabase) look a bit different

Without examining things closely, I've seen variance in how ArcGIS 
populates the metadata (which fields it choses to fill out). It seems to 
treat shapes differently from geodatabases feature classes & feature 
datasets differently from coverages.

> A quick visual overview of the metadata .xml file associated with 
> this shape file does not reveal any other differences.  In other 
> words, the act of reprojecting the shapefile does not seem to be
> reflected in any automatic captured history in the shapefile
> metadata.

There is a checkbox in Arccatalog to enable/disable automatic metadata 
update. Perhaps this is why the example you note was not changed? In my 
tests locally the projection is always updated. The attached .xml were 
created by projecting a polygon shapefile from Albers to UTM to WGS84.

cheers,


matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal-meta-update.zip
Type: application/zip
Size: 10997 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080903/7d47b1c4/gdal-meta-update.zip
From antonio.valentino at tiscali.it  Wed Sep  3 12:39:23 2008
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Sep  3 12:39:45 2008
Subject: [gdal-dev] module of a complex dataset
In-Reply-To: <48BD525E.1040904@pobox.com>
References: <20080902131055.7e7d7083@valentinows> <48BD3D24.6070908@pobox.com>
	<20080902161218.699bfd19@valentinows> <48BD525E.1040904@pobox.com>
Message-ID: <20080903183923.00092ff4@valentinows>

Il giorno Tue, 02 Sep 2008 10:49:02 -0400
Frank Warmerdam <warmerdam@pobox.com> ha scritto:

[...]

> > I think that it would be nice to have a base set of *PixelFunctions*
> > (mod, phase, real, imag, sum, diff, etc.) bundled with the GDAL
> > library in order to allow the user to cook its own virtual datasets
> > and then use standard GDAL tools for further processing.
> 
> This is a plausible idea, but it is not entirely obvious what would
> be sufficiently useful to justify inclusion.  A carefully crafted
> patch, including updates to docs, in this direction would likely be
> well received.

Ok,
I'm trying to implement the new feature but I'm having some problem.
I produced a modified gdal_translate program and a couple of test
files (test.tiff and test.vrt):

$ gdalinfo test.tiff
Using HDF5+
Using HDF5Image+
Driver: GTiff/GeoTIFF
Files: test.tiff
Size is 100, 100
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  100.0)
Upper Right (  100.0,    0.0)
Lower Right (  100.0,  100.0)
Center      (   50.0,   50.0)
Band 1 Block=100x20 Type=CInt16, ColorInterp=Gray

$ cat test.vrt 
<VRTDataset rasterXSize="100" rasterYSize="100">
  <VRTRasterBand dataType="Float32" band="1"
subClass="VRTDerivedRasterBand"> <Description>Magnitude</Description>
    <PixelFunctionType>module</PixelFunctionType>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">test.tiff</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="100" ySize="100"/>
      <DstRect xOff="0" yOff="0" xSize="100" ySize="100"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

Frank, please confirm that "module" is associated to

CPLErr ModulePixelFunc(void **papoSources, int nSources, void *pData,
                       int nXSize, int nYSize,
                       GDALDataType eSrcType, GDALDataType eBufType,
                       int nPixelSpace, int nLineSpace)

I should get eSrcType==GDT_CInt16 if I launch

$ ./gdal_translate test.vrt mag.tiff
Input file size is 100, 100
0

At the moment the program exits at the first call to "ModulePixelFunc"
because eSrcType==GDT_Float32 the second check fails

    /* ---- Init ---- */
    if (nSources != 1) return CE_Failure;
    if (!GDALDataTypeIsComplex( eSrcType )) return CE_Failure;


Thanks

-- 
Antonio Valentino
From matt.wilkie at gov.yk.ca  Wed Sep  3 12:40:44 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Sep  3 12:40:57 2008
Subject: [gdal-dev] gdal_merge and the treatment of nodata value
In-Reply-To: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>
References: <12336.193.246.86.39.1220435478.squirrel@webmail.customers.iirc.at>
Message-ID: <48BEBE0C.2000408@gov.yk.ca>

Hi Andreas,

If you use gdalwarp rather than gdal_merge you could use the -srcnodata 
and -dstnodata flags to change the null value:

   gdalwarp in-01.tif in-02.tif outimage.tif -srcnodata 0 -dstnodata 255

This assumes the nodata in all the input images are the identical (0, or 
black).

Since these are scanned maps, the edges may not be pure white or black, 
in which case you may need to pre-process with the nearblack utility: 
http://www.gdal.org/nearblack.html

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Andreas Neumann wrote:
> Hi,
> 
> I am using gdal_merge to merge different rasters. The problem is that the
> nodata values appear as black and I want to have them white.
> 
> Is there an option to set nodata values to white with gdal_merge? Or would
> I have to do this as a postprocessing?
> 
> The problem is that the images are too large to be opened in an
> interactive application like Photoshop and Gimp. Otherwise I would correct
> it in there.
> 
> Thanks for an idea on how to add nodata as white to my gdal_merge workflow.
> 
> Andreas
> 
> 

From szekerest at gmail.com  Wed Sep  3 12:58:47 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep  3 12:59:14 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <B1B624F7C110834B96594065A74F3A540916B4CE@gemini.rsinc.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<48B7FE18.1070502@xpam.de>
	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>
	<200808292137.57087.even.rouault@mines-paris.org>
	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com>
	<f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>
	<f3b73b7d0809030432i7d2db161ka14e2324b9343b16@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4CE@gemini.rsinc.com>
Message-ID: <f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>

2008/9/3 Norman Barker <nbarker@ittvis.com>:
>
> <ncb>
> It would be useful to maintain both ReadNextBlock and RasterIO in the
> case of JPIP, it can be advantageous (if the client can handle it) to
> call regions of a server image on tile boundaries -> ReadNextBlock, but
> in most cases I think RasterIO will be called.
>
> If you think it will just be easier to keep RasterIO then I am fine with
> that.
> </ncb>
>

Norman,

I don't see the difference between the functionality of ReadNextBlock
and RasterIO. I guess it was only a name change when Adam have renamed
my ReadnextBlock to RasterIO and I didn't object to it.
Can you explain a possible difference from the aspect of the JPIP driver.
I admit the rasterIO region have already determined when
CreateRasterIOContext have been called. I think we cannot safely
change these parameters within the same IO context.


>
> <ncb>
> In comparison to a callback function, I think this behaviour is
> synchronous, we are blocking until a timeout, and then calling again for
> another time period even if it returns immediately.  However this isn't
> a bad thing.
> </ncb>
>

I consider the blocking will occur until that time when a valid update
is ready to be rendered by the user. In the meantime the user won't
really be able to render anything so I guess waiting here is not a big
issue. However if you would support the user to do any other thing
within this thread, then implement to return immediately when the
timeout is set to 0. Then status= IO_PENDING will show that there's
nothing new can be found in the buffer and RasterIO should be called
again soon.

>
> I don't think if the driver would be required to copy padding data
> into the user buffer since the user will be notified about the update
> region that should be copied over.
>
> <ncb>
> In the case of JPIP (however unfortunate) the server is allowed to
> adjust the region of the image returned this may require some padding
> the requested client buffer.
>

Hmmm... That's difficult for me to follow. Won't it result in ugly
effects in the image display?


Best regards,

Tamas
From Robert.Beckwith at delorme.com  Wed Sep  3 13:08:33 2008
From: Robert.Beckwith at delorme.com (Robert Beckwith)
Date: Wed Sep  3 13:08:36 2008
Subject: [gdal-dev] Projection information in the aux.xml
Message-ID: <36F531EB4BDB014FBC95C2926E8D0BC60467392C@franklin.earth.delorme.com>

I am currently using GDAL and MrSID DSDK for reading and georeferencing
raster files.

Currently it is using the .aux file for projection information and this
is working fine for .sid and .tiff files.

(I have tried using 1.5.0, 1.5.2 and the current dev branch) 

 

Now it seems like starting with Arc 9.2 this projection data is in the
.aux.xml file. 

As of now I have not been able to get this to work. I think everything
is ok and correctly setup.

Pam builds the correct filename *.sid.aux.xml and does the xml parsing,
but it looks like it might be failing on getting the projection
reference (InitOGRRef) or ?

 

I am still looking into this, does anyone have suggestions or where I
should focus? 

I can see the projection information in ArcMap and it looks good. 

 

..thanks. 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080903/dbf29828/attachment.html
From nbarker at ittvis.com  Wed Sep  3 13:24:40 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Sep  3 13:24:46 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>
	<48B7FE18.1070502@xpam.de>
	<f3b73b7d0808291201p7a56d9a1n30b81507c310a52a@mail.gmail.com>
	<200808292137.57087.even.rouault@mines-paris.org>
	<f3b73b7d0808291425g5b8f243and6c66f1e8b971889@mail.gmail.com>
	<f3b73b7d0808300849q19c61479wff953dff9d388d14@mail.gmail.com>
	<48BD96A8.9040209@xpam.de>
	<B1B624F7C110834B96594065A74F3A540916B4C5@gemini.rsinc.com>
	<f3b73b7d0809030432i7d2db161ka14e2324b9343b16@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4CE@gemini.rsinc.com>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>

Hi Tamas,

Comments inline, thanks again for your thoughts.

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Wednesday, September 03, 2008 10:59 AM
To: Norman Barker
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

2008/9/3 Norman Barker <nbarker@ittvis.com>:
>
> <ncb>
> It would be useful to maintain both ReadNextBlock and RasterIO in the
> case of JPIP, it can be advantageous (if the client can handle it) to
> call regions of a server image on tile boundaries -> ReadNextBlock,
but
> in most cases I think RasterIO will be called.
>
> If you think it will just be easier to keep RasterIO then I am fine
with
> that.
> </ncb>
>

Norman,

I don't see the difference between the functionality of ReadNextBlock
and RasterIO. I guess it was only a name change when Adam have renamed
my ReadnextBlock to RasterIO and I didn't object to it.
Can you explain a possible difference from the aspect of the JPIP
driver.
I admit the rasterIO region have already determined when
CreateRasterIOContext have been called. I think we cannot safely
change these parameters within the same IO context.

<ncb>
Isn't there a function in GDAL to get the most appropriate block size,
it will certainly be possible to advertise this through JPIP. Whereas
with RasterIO you could specify a region that covers many blocks.  Again
I defer to you on this, we can make it simple and just keep the one
function.
</ncb>


>
> <ncb>
> In comparison to a callback function, I think this behaviour is
> synchronous, we are blocking until a timeout, and then calling again
for
> another time period even if it returns immediately.  However this
isn't
> a bad thing.
> </ncb>
>

I consider the blocking will occur until that time when a valid update
is ready to be rendered by the user. In the meantime the user won't
really be able to render anything so I guess waiting here is not a big
issue. However if you would support the user to do any other thing
within this thread, then implement to return immediately when the
timeout is set to 0. Then status= IO_PENDING will show that there's
nothing new can be found in the buffer and RasterIO should be called
again soon.

<ncb>
Ok, I have got it now - we have a polling thread on the status - sounds
good to me.
</ncb>

>
> I don't think if the driver would be required to copy padding data
> into the user buffer since the user will be notified about the update
> region that should be copied over.
>
> <ncb>
> In the case of JPIP (however unfortunate) the server is allowed to
> adjust the region of the image returned this may require some padding
> the requested client buffer.
>

Hmmm... That's difficult for me to follow. Won't it result in ugly
effects in the image display?

<ncb>
It can result in ugly effects on the display, however those 'ugly'
regions will be filled with subsequent requests to the server.  It is
part of the JPIP spec. so I mentioned it.

Many thanks.
</ncb>

Best regards,

Tamas
From Doug_Newcomb at fws.gov  Wed Sep  3 13:23:23 2008
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Sep  3 13:25:11 2008
Subject: [gdal-dev] Shapefile reprojection - copy and update metadata file
In-Reply-To: <48BEBBFA.5080003@gov.yk.ca>
Message-ID: <OF64F12761.330844B3-ON852574B9.005F4B0A-852574B9.005F8652@fws.gov>

Arrgh!   After having some caffeine, I looked at the last line of the
metadata file and saw:


<Esri><CreaDate>20080818</CreaDate><CreaTime>12482200</CreaTime><SyncOnce>FALSE</SyncOnce><SyncDate>20080818</SyncDate><SyncTime>12492900</SyncTime><ModDate>20080818</ModDate><ModTime>12492900</ModTime><DataProperties><lineage><Process
 Name="Project_2" ToolSource="C:\Program
Files\ArcGIS\ArcToolbox\Toolboxes\Data Management Tools.tbx\Project"
Date="20080818" Time="113851">Project
K:\basinpro8\BasinPro8\boundary\cb100sl.shp
K:\basinpro8\BasinPro8\boundary\cb100sl_Project.shp
PROJCS['USA_Contiguous_Albers_Equal_Area_Conic_USGS_version',GEOGCS['GCS_North_American_1983',DATUM['D_North_American_1983',SPHEROID['GRS_1980',6378137.0,298.257222101]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Albers'],PARAMETER['False_Easting',0.0],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',-96.0],PARAMETER['Standard_Parallel_1',29.5],PARAMETER['Standard_Parallel_2',45.5],PARAMETER['Latitude_Of_Origin',23.0],UNIT['Meter',1.0]]
 #
PROJCS['NAD_1983_StatePlane_North_Carolina_FIPS_3200',GEOGCS['GCS_North_American_1983',DATUM['D_North_American_1983',SPHEROID['GRS_1980',6378137.0,298.257222101]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Lambert_Conformal_Conic'],PARAMETER['False_Easting',609601.22],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',-79.0],PARAMETER['Standard_Parallel_1',34.33333333333334],PARAMETER['Standard_Parallel_2',36.16666666666666],PARAMETER['Latitude_Of_Origin',33.75],UNIT['Meter',1.0]]</Process></lineage></DataProperties><MetaID>{053D32E4-73BE-41CF-95B6-3807A00C95F3}</MetaID></Esri><dataIdInfo><envirDesc
 Sync="TRUE">Microsoft Windows XP Version 5.1 (Build 2600) Service Pack 2;
ESRI ArcCatalog 9.2.6.1500</envirDesc><dataLang><languageCode Sync="TRUE"
value="en"></languageCode></dataLang><idCitation><resTitle
Sync="TRUE">cb100sl</resTitle><presForm><PresFormCd Sync="TRUE"
value="005"></PresFormCd></presForm></idCitation><spatRpType><SpatRepTypCd
Sync="TRUE" value="001"></SpatRepTypCd></spatRpType><geoBox
esriExtentType="decdegrees"><westBL Sync="TRUE">-84.387576</westBL><eastBL
Sync="TRUE">-75.193695</eastBL><northBL
Sync="TRUE">37.632602</northBL><southBL
Sync="TRUE">33.431576</southBL><exTypeCode
Sync="TRUE">1</exTypeCode></geoBox><dataExt><geoEle><GeoBndBox
esriExtentType="native"><westBL Sync="TRUE">1054139.550968</westBL><eastBL
Sync="TRUE">1833461.446476</eastBL><northBL
Sync="TRUE">1688800.246248</northBL><southBL
Sync="TRUE">1345099.136175</southBL><exTypeCode
Sync="TRUE">1</exTypeCode></GeoBndBox></geoEle></dataExt></dataIdInfo><mdLang><languageCode
 Sync="TRUE" value="en"></languageCode></mdLang><mdStanName Sync="TRUE">ISO
19115 Geographic Information - Metadata</mdStanName><mdStanVer
Sync="TRUE">DIS_ESRI1.0</mdStanVer><mdChar><CharSetCd Sync="TRUE"
value="004"></CharSetCd></mdChar><mdHrLv><ScopeCd Sync="TRUE"
value="005"></ScopeCd></mdHrLv><mdHrLvName
Sync="TRUE">dataset</mdHrLvName><distInfo><distributor><distorTran><onLineSrc><orDesc
 Sync="TRUE">002</orDesc><linkage
Sync="TRUE">file://\\yoda2\gis2\usgs_albers\boundary\cb100sl.shp</linkage><protocol
 Sync="TRUE">Local Area Network</protocol></onLineSrc><transSize
Sync="TRUE">3.209</transSize></distorTran><distorFormat><formatName
Sync="TRUE">Shapefile</formatName></distorFormat></distributor></distInfo><refSysInfo><RefSystem><refSysID><identCode

Sync="TRUE">USA_Contiguous_Albers_Equal_Area_Conic_USGS_version</identCode></refSysID></RefSystem></refSysInfo><spatRepInfo><VectSpatRep><topLvl><TopoLevCd
 Sync="TRUE" value="001"></TopoLevCd></topLvl><geometObjs
Name="cb100sl"><geoObjTyp><GeoObjTypCd Sync="TRUE"
value="001"></GeoObjTypCd></geoObjTyp><geoObjCnt
Sync="TRUE">347</geoObjCnt></geometObjs></VectSpatRep></spatRepInfo><mdDateSt
 Sync="TRUE">20080818</mdDateSt></metadata>

So it was updating everything with the audit trail.  Sorry for the noise.

Doug




Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.


                                                                           
             Matt Wilkie                                                   
             <matt.wilkie@gov.                                             
             yk.ca>                                                     To 
                                       Doug_Newcomb@fws.gov                
             09/03/2008 12:31                                           cc 
             PM                        Even Rouault                        
                                       <even.rouault@mines-paris.org>,     
                                       gdal-dev@lists.osgeo.org            
                                                                   Subject 
                                       Re: [gdal-dev] Shapefile            
                                       reprojection - copy and update      
                                       metadata file                       
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




Doug_Newcomb@fws.gov wrote:
> Hmm, The first few lines of the metadata for an older shapefile ( as
>  opposed to personal geodatabase) look a bit different

Without examining things closely, I've seen variance in how ArcGIS
populates the metadata (which fields it choses to fill out). It seems to
treat shapes differently from geodatabases feature classes & feature
datasets differently from coverages.

> A quick visual overview of the metadata .xml file associated with
> this shape file does not reveal any other differences.  In other
> words, the act of reprojecting the shapefile does not seem to be
> reflected in any automatic captured history in the shapefile
> metadata.

There is a checkbox in Arccatalog to enable/disable automatic metadata
update. Perhaps this is why the example you note was not changed? In my
tests locally the projection is always updated. The attached .xml were
created by projecting a polygon shapefile from Albers to UTM to WGS84.

cheers,


matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

(See attached file: gdal-meta-update.zip)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal-meta-update.zip
Type: application/zip
Size: 10997 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080903/6bc67403/gdal-meta-update-0001.zip
From warmerdam at pobox.com  Wed Sep  3 13:26:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep  3 13:27:28 2008
Subject: [gdal-dev] gdal error 4
In-Reply-To: <48BEAFB8.8050903@uni-koeln.de>
References: <48BEAFB8.8050903@uni-koeln.de>
Message-ID: <48BEC8E0.5020307@pobox.com>

Christian Willmes wrote:
> Hello,
> 
> I have a problem with the gdal Installation on our webserver. I'm new to 
> gdal, to be specific I try to get some raster data into mapserver, but 
> there occours the following error according gdal and I could not find 
> anything what helped me out on google and other mailinglists.
> 
> I get the following Error when I try to access data with gdal:
> <--------
> cwillmes@lvr18$ gdalinfo SRTM_Elevation.tif
> ERROR 4: `SRTM_Elevation.tif' not recognised as a supported file format.
> 
> GDALOpen failed - 4
> `SRTM_Elevation.tif' not recognised as a supported file format.
> --------->

Christian,

I would carefully review permissions to see if that might be the issue.
I have stepped through the code and confirmed this is the sort of error
you get if you don't have read permissions on a file.  You might want to
file a ticket on this, so we can improve the reporting of errors related
to permissions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craig.miller at spatialminds.com  Wed Sep  3 17:20:48 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Sep  3 17:20:58 2008
Subject: [gdal-dev] Postgis 8.3 support
Message-ID: <03d801c90e0a$efbad330$cf307990$@miller@spatialminds.com>

Does OGR support Postgis 8.3 under Windows?

 

I have the following defined in my nmake.opt but am still getting all sorts
of linker errors:

 

 

# PostGIS Libraries

PG_INC_DIR = C:\pg\include\

PG_LIB = C:\pg\lib\libpq.lib wsock32.lib

 

Craig

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080903/9e3fb36e/attachment.html
From even.rouault at mines-paris.org  Wed Sep  3 18:42:01 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  3 18:42:05 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
Message-ID: <200809040042.01824.even.rouault@mines-paris.org>

Norman,

just a very quick review of the latest state of the RFC after a quick reading 
of it... 

- do we really need to make new classes GDALAsyncDataset and 
GDALAsyncRasterBand. I've raised that point on previous email. --> potential 
problem for the corresponding C API, but, I agree, not critical. We just need 
to be aware of it.
- if we allow classical RasterIO to be mixed with CreateRasterIOContext, or 
not, should be clearly stated. Or maybe just state that it is "left to the 
implementation driver. RTFM of the driver where it is specified and check 
well the returned error codes !"
- same remark with 2 or more CreateRasterIOContext being used "at the same 
time"
- I don't really see how "static GDALDataset *GDALAsyncDatasetOpen" can be 
used by GDALOpen(). The current GDALOpen method iterates on each DRIVER 
object and calls  pfnOpen() pointer function on it. It has only knowledge of 
the driver object, so it couldn't make any use of GDALAsyncDatasetOpen(). Do 
we need to open the dataset in a particular way for the progressive/async 
rendering ? Can't arguments just be provided as the dataset name. Currently 
most drivers opening datasets that are not real files have a syntax 
like "DRIVER_NAME:host=XXXXX:dbname=XXXXX:user=XXXX:". This could be a way of 
initiating async io mode if necessary. Or maybe the papszOptions should be 
used at the CreateRasterIOContext() level. That's a convenient way of 
extending stuff, but we should avoid abusing it too... I guess your knowledge 
and experience of JPIP can guide the choice. My feeling is that it would be 
more appropriate to add it into CreateRasterIOContext(), as this will define 
a new transaction with the server. It seems unlikely that we would need to 
change the parameters of this transaction during it. This is just an 
intuition.
- I don't understand how SetView() interacts with the corresponding parameters 
in the initial CreateRasterIOContext().
- Really detail question... but when and by whom is the GDALRasterIOContext * 
freed ? I think one of my proposal was to add a symetrical method to 
CreateRasterIOContext. Something like
"void the_good_class_name::DeleteRasterIOContext(GDALRasterIOContext *);" Then 
CancelIO() would be unnecessary.
- Do we really need the GDALAsyncRasterBand class or corresponding 
functionnality ? My feeling is that we don't need it. If the user is only 
interested by one band, he can do that with the CreateRasterIOContext() at 
the dataset level.

Even

Le Wednesday 03 September 2008 19:24:40 Norman Barker, vous avez ?crit?:
> Hi Tamas,
>
> Comments inline, thanks again for your thoughts.
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Wednesday, September 03, 2008 10:59 AM
> To: Norman Barker
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] RE: progressive rendering
>
> 2008/9/3 Norman Barker <nbarker@ittvis.com>:
> > <ncb>
> > It would be useful to maintain both ReadNextBlock and RasterIO in the
> > case of JPIP, it can be advantageous (if the client can handle it) to
> > call regions of a server image on tile boundaries -> ReadNextBlock,
>
> but
>
> > in most cases I think RasterIO will be called.
> >
> > If you think it will just be easier to keep RasterIO then I am fine
>
> with
>
> > that.
> > </ncb>
>
> Norman,
>
> I don't see the difference between the functionality of ReadNextBlock
> and RasterIO. I guess it was only a name change when Adam have renamed
> my ReadnextBlock to RasterIO and I didn't object to it.
> Can you explain a possible difference from the aspect of the JPIP
> driver.
> I admit the rasterIO region have already determined when
> CreateRasterIOContext have been called. I think we cannot safely
> change these parameters within the same IO context.
>
> <ncb>
> Isn't there a function in GDAL to get the most appropriate block size,
> it will certainly be possible to advertise this through JPIP. Whereas
> with RasterIO you could specify a region that covers many blocks.  Again
> I defer to you on this, we can make it simple and just keep the one
> function.
> </ncb>
>
> > <ncb>
> > In comparison to a callback function, I think this behaviour is
> > synchronous, we are blocking until a timeout, and then calling again
>
> for
>
> > another time period even if it returns immediately.  However this
>
> isn't
>
> > a bad thing.
> > </ncb>
>
> I consider the blocking will occur until that time when a valid update
> is ready to be rendered by the user. In the meantime the user won't
> really be able to render anything so I guess waiting here is not a big
> issue. However if you would support the user to do any other thing
> within this thread, then implement to return immediately when the
> timeout is set to 0. Then status= IO_PENDING will show that there's
> nothing new can be found in the buffer and RasterIO should be called
> again soon.
>
> <ncb>
> Ok, I have got it now - we have a polling thread on the status - sounds
> good to me.
> </ncb>
>
> > I don't think if the driver would be required to copy padding data
> > into the user buffer since the user will be notified about the update
> > region that should be copied over.
> >
> > <ncb>
> > In the case of JPIP (however unfortunate) the server is allowed to
> > adjust the region of the image returned this may require some padding
> > the requested client buffer.
>
> Hmmm... That's difficult for me to follow. Won't it result in ugly
> effects in the image display?
>
> <ncb>
> It can result in ugly effects on the display, however those 'ugly'
> regions will be filled with subsequent requests to the server.  It is
> part of the JPIP spec. so I mentioned it.
>
> Many thanks.
> </ncb>
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nicholas.g.lawrence at mainroads.qld.gov.au  Wed Sep  3 20:25:21 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Wed Sep  3 20:25:36 2008
Subject: [gdal-dev] example GML v2.
Message-ID: <OF2A3BDFF1.DFD37166-ON4A2574BA.00023F8F-4A2574BA.00025211@transport.qld.gov.au>


Hello list,

I am looking for a GML v2.1 file for testing purposes

It does not have to be very large at all, or of any particular area, just
enough
to test that the import works.

Any suggestions on where I can find one?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From matthew.huck at gmail.com  Wed Sep  3 22:55:04 2008
From: matthew.huck at gmail.com (Matthew Huck)
Date: Wed Sep  3 22:55:07 2008
Subject: [gdal-dev] Clipping shapefiles
Message-ID: <946ed14e0809031955p25d3c4d6k52199b255bef3f39@mail.gmail.com>

  Hi,  I've got a reasonably large shapefile that I wish to break down
into areas that match the topographic maps in NZMG. I've got a python
script that creates a shapefile with each topomap as a polygon in it
(and I can create a shapefile per topo map too if required). What I
can't work out how to do is to clip my master shapefile by the smaller
shapefiles. I've seen ideas of copying across the features if they
intersect with the clipping box, but the data is contour lines so I
want to "cut" the contour lines at the boundry of the clipping boxes.
Any ideas on the best way to do it, I can get MapWindow to do it
(sometimes, but it crashes frequently).
 Cheers
 Matthew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080904/7b7da9a7/attachment-0001.html
From Tom.Kralidis at ec.gc.ca  Wed Sep  3 23:08:32 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Sep  3 23:10:16 2008
Subject: [gdal-dev] KML and custom styles
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F03BCC446@ecburexch1.ontario.int.ec.gc.ca>


Hi: using svn trunk, the KML output has reletively simple style definitions by default.

OGC KML allows for styles to be remotely defined within the <styleURL> element, which refs a local or remote file, and XPointer to a given style def.  For example:

<styleUrl>somefile.kml#mystyle</styleUrl>

...would use the style mystyle in somefile.kml.

I wonder whether this would be a useful -dsco for KML output (default behaviour would be as per the current behaviour).  Something like -dsco LayerStyle=[LayerName,]somefile.kml#mystyle.

the KML driver would then use this to output the style def for the given layer.  If LayerName is not specified, the style is applied to the entire document.

Comments?

..Tom



From schut at sarvision.nl  Thu Sep  4 05:04:40 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Sep  4 05:04:45 2008
Subject: [gdal-dev] gdal & terrasar-x
Message-ID: <48BFA4A8.6040509@sarvision.nl>

I'm having problems warping terrasar data, both strip and spot. 
Everything seems to run smooth, but all resulting pixels are 0. Running 
gdalinfo -mm on the original terrasar xml header file shows a decent 
min/max, and opening the xml with openev shows the characteristic radar 
speckle image. However, somehow gdalwarp seems to convert all values to 0.
I'm running gdal from svn.

This is the gdalinfo -mm on the original:

Driver: TSX/TerraSAR-X Product
Files: TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.xml
Size is 6432, 8123
Coordinate System is `'
GCP Projection =
GCP[  0]: Id=, Info=
           (3186,4061) -> 
(4.58577884873432,-58.7378260671197,88.2895278671792)
GCP[  1]: Id=, Info=
           (1,1) -> (4.62120875202606,-58.6758682205696,88.2895278671792)
GCP[  2]: Id=, Info=
           (6354,1) -> (4.6416261082315,-58.7806954917766,88.2895278671792)
GCP[  3]: Id=, Info=
           (1,8123) -> (4.52969375238776,-58.6937801528285,88.2895278671792)
GCP[  4]: Id=, Info=
           (6353,8123) -> 
(4.5500912421315,-58.7984603452316,88.2895278671792)
Metadata:
   OPERATIONAL_MODE=operational
   ORBIT_CYCLE=22
   ABSOLUTE_ORBIT=3542
   ORBIT_DIRECTION=DESCENDING
   IMAGING_MODE=SL
   PRODUCT_VARIANT=SSC
   IMAGE_TYPE=COMPLEX
   ROW_SPACING=6.06688654869458333E-09
   COL_SPACING=1.78571426658891141E-04
   AZIMUTH_LOOKS=1.00000000000000000E+00
   RANGE_LOOKS=1.00000000000000000E+00
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 8123.0)
Upper Right ( 6432.0,    0.0)
Lower Right ( 6432.0, 8123.0)
Center      ( 3216.0, 4061.5)
Band 1 Block=6432x1 Type=CInt16, ColorInterp=Undefined
     Computed Min/Max=-1329.000,1444.000
   Metadata:
     POLARIMETRIC_INTERP=VV

I then run gdalwarp:

$ gdalwarp 
TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.xml 
TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.tif
Creating output file that is 8144P x 8994L.
Processing input file 
TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.xml.
0...10...20...30...40...50...60...70...80...90...100 - done.

$  gdalinfo -mm 
TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.tif
Driver: GTiff/GeoTIFF
Files: TSX1_SAR__SSC______SL_S_SRA_20080203T094750_20080203T094751.tif
Size is 8144, 8994
Coordinate System is `'
Origin = (4.529703226723088,-58.675978519735985)
Pixel Size = (0.000013777380802,-0.000013777380802)
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   4.5297032, -58.6759785)
Lower Left  (   4.5297032, -58.7998923)
Upper Right (   4.6419062, -58.6759785)
Lower Right (   4.6419062, -58.7998923)
Center      (   4.5858047, -58.7379354)
Band 1 Block=8144x1 Type=CInt16, ColorInterp=Gray
     Computed Min/Max=0.000,0.000

See, I get georeferencing but lost all the data...

Cheers,
Vincent.
From craig.leat at gmail.com  Thu Sep  4 05:09:43 2008
From: craig.leat at gmail.com (Craig Leat)
Date: Thu Sep  4 05:09:46 2008
Subject: [gdal-dev] Clipping shapefiles
Message-ID: <1fef7d9b0809040209r69aa4a8bhc7751d7e551be757@mail.gmail.com>

Hi Matthew

Matthew Huck wrote:
>  Hi,  I've got a reasonably large shapefile that I wish to break down
> into areas that match the topographic maps in NZMG. I've got a python
> script that creates a shapefile with each topomap as a polygon in it
> (and I can create a shapefile per topo map too if required). What I
> can't work out how to do is to clip my master shapefile by the smaller
> shapefiles. I've seen ideas of copying across the features if they
> intersect with the clipping box, but the data is contour lines so I
> want to "cut" the contour lines at the boundry of the clipping boxes.
> Any ideas on the best way to do it, I can get MapWindow to do it
> (sometimes, but it crashes frequently).

I use GRASS for this sort of task. The basic steps are:

1. Import shape files using v.in.ogr
2. Set the region extents (a bounding box for the area of interest)
using g.region
3. Make a vector to be used as a cutter - v.in.region
4. Select within the region box and cut on the boundary using v.overlay

It's quite easy to roll these steps into a script and is definitely
the way to go if you have to do this many times.

Craig

gdal/ogr devs, an ogr2tiles.py would be quite nice.
From schut at sarvision.nl  Thu Sep  4 09:27:41 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Sep  4 09:27:44 2008
Subject: [gdal-dev] openev weird geoconcept error on opening large raster
Message-ID: <48BFE24D.4000205@sarvision.nl>

Hi lists (sorry for cross-posting, it's an openev question but gdal
related and the openev-list is pretty much traffic-less these days, so I
decided to also post to gdal-dev...)

I'm using openev from fwtools-2.0.6 on linux, and have difficulties
opening largish rasters, be it (big)tiff or envi. Largish being around
4.7 Gb. Whenever I try to open such a file (actually, also any 2.3 Gb
file) I get an error that says: "<filename> is neither a file or
directory, geoconcept access failed." I tried with a geotiff file and
also with an ENVI version of the same file.

Any ideas?

Btw I usually use gdal from svn, but for openev it's a bit hard for me
to build it myself because of 32bit/64bit issues and myself using the
python NG bindings, while openev wants the old bindings, so things don't
quite mix well. I know this complicates matters. E.g. I cannot just
replace the fwtools libgdal.so with mine from /usr/local/lib because
that one is 64bit, while fwtools' is 32 bit...

Vincent.

From Aaron.Sutula at noaa.gov  Thu Sep  4 10:42:43 2008
From: Aaron.Sutula at noaa.gov (Aaron Sutula)
Date: Thu Sep  4 10:42:45 2008
Subject: [gdal-dev] gdalwarp color table copy issue
In-Reply-To: <48BF0CF7.5020103@noaa.gov>
References: <48BF0CF7.5020103@noaa.gov>
Message-ID: <48BFF3E3.20909@noaa.gov>

Hi List,

I am using gdalwarp (FWTools 2.0.6) to re-sample a gif+gfw image into a 
higher resolution geoTiff.

The orginal gif has a color table that specifies 0: 255,255,255,0 as one 
color:

$ gdalinfo radar_conus_0.gif
Driver: GIF/Graphics Interchange Format (.gif)
Files: radar_conus_0.gif
Size is 3400, 1600
Coordinate System is `'
Origin = (-127.629361176470582,50.415612019896201)
Pixel Size = (0.017971305190311,-0.017971305190311)
Corner Coordinates:
Upper Left  (-127.6293612,  50.4156120)
Lower Left  (-127.6293612,  21.6615237)
Upper Right ( -66.5269235,  50.4156120)
Lower Right ( -66.5269235,  21.6615237)
Center      ( -97.0781424,  36.0385679)
Band 1 Block=3400x1 Type=Byte, ColorInterp=Palette
 NoData Value=0
 Metadata:
   GIF_BACKGROUND=0
 Color Table (RGB with 32 entries)
   0: 255,255,255,0
   1: 240,240,240,255
   2: 238,238,238,255
   ...

I run gdalwarp as follows:

gdalwarp -tr 0.005 0.005 -srcnodata 10000000 -dstnodata 0 -s_srs 
EPSG:4269 -t_srs EPSG:4269 -r cubicspline -co "TILED=YES" 
radar_conus_0.gif radar_resampled.tif

The resulting tif color table specifies 0: 255,255,255,255:

$ /home/aaron.sutula/FWTools-2.0.6/bin_safe/gdalinfo radar_conus_0.tif
Driver: GTiff/GeoTIFF
Files: radar_conus_0.tif
Size is 12220, 5751
Coordinate System is:
GEOGCS["NAD83",
   DATUM["North_American_Datum_1983",
       SPHEROID["GRS 1980",6378137,298.2572221010042,
           AUTHORITY["EPSG","7019"]],
       AUTHORITY["EPSG","6269"]],
   PRIMEM["Greenwich",0],
   UNIT["degree",0.0174532925199433],
   AUTHORITY["EPSG","4269"]]
Origin = (-127.629361176470582,50.415612019896201)
Pixel Size = (0.005000000000000,-0.005000000000000)
Metadata:
 AREA_OR_POINT=Area
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-127.6293612,  50.4156120) (127d37'45.70"W, 50d24'56.20"N)
Lower Left  (-127.6293612,  21.6606120) (127d37'45.70"W, 21d39'38.20"N)
Upper Right ( -66.5293612,  50.4156120) ( 66d31'45.70"W, 50d24'56.20"N)
Lower Right ( -66.5293612,  21.6606120) ( 66d31'45.70"W, 21d39'38.20"N)
Center      ( -97.0793612,  36.0381120) ( 97d 4'45.70"W, 36d 2'17.20"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
 NoData Value=0
 Color Table (RGB with 256 entries)
   0: 255,255,255,255
   1: 240,240,240,255
   2: 238,238,238,255
   ...

I'd really like to keep color 0 with a completely transparent alpha 
value. I don't understand why gdalwarp is changing it from 0 to 255.

I've played around with the -dstalpha option, but I don't quite 
understand it and I get unexpected results; It generates a tif with two 
bands, one greyscale and one alpha... Not what I need.

Any advice?

Thank you,
Aaron
From warmerdam at pobox.com  Thu Sep  4 11:02:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  4 11:03:25 2008
Subject: [gdal-dev] openev weird geoconcept error on opening large raster
In-Reply-To: <48BFE24D.4000205@sarvision.nl>
References: <48BFE24D.4000205@sarvision.nl>
Message-ID: <48BFF894.70004@pobox.com>

Vincent Schut wrote:
> Hi lists (sorry for cross-posting, it's an openev question but gdal
> related and the openev-list is pretty much traffic-less these days, so I
> decided to also post to gdal-dev...)
> 
> I'm using openev from fwtools-2.0.6 on linux, and have difficulties
> opening largish rasters, be it (big)tiff or envi. Largish being around
> 4.7 Gb. Whenever I try to open such a file (actually, also any 2.3 Gb
> file) I get an error that says: "<filename> is neither a file or
> directory, geoconcept access failed." I tried with a geotiff file and
> also with an ENVI version of the same file.
> 
> Any ideas?
> 
> Btw I usually use gdal from svn, but for openev it's a bit hard for me
> to build it myself because of 32bit/64bit issues and myself using the
> python NG bindings, while openev wants the old bindings, so things don't
> quite mix well. I know this complicates matters. E.g. I cannot just
> replace the fwtools libgdal.so with mine from /usr/local/lib because
> that one is 64bit, while fwtools' is 32 bit...

Vincent,

I suspect this was an incorrect build for fwtools 2.0.6 which is now
hard to correct since I don't have a build environment for linux fwtools.

Perhaps you could go back a few versions and see if the problem persists?
ie. FWTools 2.0.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nbarker at ittvis.com  Thu Sep  4 12:23:11 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Sep  4 12:23:15 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
	<200809040042.01824.even.rouault@mines-paris.org>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4DE@gemini.rsinc.com>

Hi Even,

Firstly, Tamas is right ReadBlock, RasterIO are identical - stupid mistake on my part :-) - a user can still optimize the remote reading by picking the correct view to match the image metadata from the server (if they so wish).  

Comments inline and I have also updated the wiki.

I would like to propose this for a vote, where we are voting to approve the interface for submission into GDAL pending an implementation.  I have initial approval (as in from my employer) to do the implementation - also I am contacting other jpip vendors to make sure we get an interoperable driver; we will of course be testing against kakadu as well.  I wish to get the interface approved before proceeding to code the engine.  

Comments as always appreciated, apologies if I have not done the vote part correctly - it of course has a +1 from me!

My comments inline below;

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, September 03, 2008 4:42 PM
To: Norman Barker
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

Norman,

just a very quick review of the latest state of the RFC after a quick reading 
of it... 

- do we really need to make new classes GDALAsyncDataset and 
GDALAsyncRasterBand. I've raised that point on previous email. --> potential 
problem for the corresponding C API, but, I agree, not critical. We just need 
to be aware of it.

<ncb>
I agree with your comments about the C API, by making GDALAsyncDataset and GDALAsyncRasterBand it just makes the code base cleaner.  I am 50:50 on which way to go.  Am I right in thinking that if we added the virtual methods to GDALDataset then we could still have the same methods declared as virtual on GDALASyncXxxx and everything would work the same?  If so I propose we go as we are, and add the virtual methods later if required for the C API.
</ncb>

- if we allow classical RasterIO to be mixed with CreateRasterIOContext, or 
not, should be clearly stated. Or maybe just state that it is "left to the 
implementation driver. RTFM of the driver where it is specified and check 
well the returned error codes !"
- same remark with 2 or more CreateRasterIOContext being used "at the same 
time"

<ncb>
I think it is going to be RTFM for the user.  JPIP for example does allow single shot stateless requests to the server where you get back an image for a particular view - this would correspond to classical RasterIO.

I think we will be supporting 2 or more CreateRasterIOContext(s), e.g. thumbnail and main image - but this will be per the documentation of the format driver, and if not supported an error code should be raised.
</ncb>

- I don't really see how "static GDALDataset *GDALAsyncDatasetOpen" can be 
used by GDALOpen(). The current GDALOpen method iterates on each DRIVER 
object and calls  pfnOpen() pointer function on it. It has only knowledge of 
the driver object, so it couldn't make any use of GDALAsyncDatasetOpen(). Do 
we need to open the dataset in a particular way for the progressive/async 
rendering ? Can't arguments just be provided as the dataset name. Currently 
most drivers opening datasets that are not real files have a syntax 
like "DRIVER_NAME:host=XXXXX:dbname=XXXXX:user=XXXX:". This could be a way of 
initiating async io mode if necessary. Or maybe the papszOptions should be 
used at the CreateRasterIOContext() level. That's a convenient way of 
extending stuff, but we should avoid abusing it too... I guess your knowledge 
and experience of JPIP can guide the choice. My feeling is that it would be 
more appropriate to add it into CreateRasterIOContext(), as this will define 
a new transaction with the server. It seems unlikely that we would need to 
change the parameters of this transaction during it. This is just an 
intuition.

<ncb>
GDALAsyncDatasetOpen is called at the dataset level to open a session to the JPIP server and gets all the image metadata etc - this metadata is required before CreateRasterIOContext is called.
</ncb>

- I don't understand how SetView() interacts with the corresponding parameters 
in the initial CreateRasterIOContext().

<ncb>
The view and resolution will change a lot during the session initiated in the GDALAsyncDatasetOpen since the data streamed is interactive with the user input.  Currently SetView works for the currently set resolution level in CreateRasterIOContext, I have just updated the code on the wiki to allow setting the window level (resolution) as well with SetView rather than having to create a new context.
</ncb>
- Really detail question... but when and by whom is the GDALRasterIOContext * 
freed ? I think one of my proposal was to add a symetrical method to 
CreateRasterIOContext. Something like
"void the_good_class_name::DeleteRasterIOContext(GDALRasterIOContext *);" Then 
CancelIO() would be unnecessary.


<ncb>
Thanks for that one, Garbage Collectors in Java spoiled me!

I think CancelIO may still be necessary to implement pauses and resumes to the server from user.  

I have added clean up for the contexts to the wiki.
</ncb>

- Do we really need the GDALAsyncRasterBand class or corresponding 
functionnality ? My feeling is that we don't need it. If the user is only 
interested by one band, he can do that with the CreateRasterIOContext() at 
the dataset level.

<ncb>
It is there for completeness at the moment, after comments from Tamas.  I agree that it is perhaps redundant with the new design, at the CreateRasterIOContext level the bands are specified.
</ncb>

Even

Le Wednesday 03 September 2008 19:24:40 Norman Barker, vous avez ?crit?:
> Hi Tamas,
>
> Comments inline, thanks again for your thoughts.
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Wednesday, September 03, 2008 10:59 AM
> To: Norman Barker
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] RE: progressive rendering
>
> 2008/9/3 Norman Barker <nbarker@ittvis.com>:
> > <ncb>
> > It would be useful to maintain both ReadNextBlock and RasterIO in the
> > case of JPIP, it can be advantageous (if the client can handle it) to
> > call regions of a server image on tile boundaries -> ReadNextBlock,
>
> but
>
> > in most cases I think RasterIO will be called.
> >
> > If you think it will just be easier to keep RasterIO then I am fine
>
> with
>
> > that.
> > </ncb>
>
> Norman,
>
> I don't see the difference between the functionality of ReadNextBlock
> and RasterIO. I guess it was only a name change when Adam have renamed
> my ReadnextBlock to RasterIO and I didn't object to it.
> Can you explain a possible difference from the aspect of the JPIP
> driver.
> I admit the rasterIO region have already determined when
> CreateRasterIOContext have been called. I think we cannot safely
> change these parameters within the same IO context.
>
> <ncb>
> Isn't there a function in GDAL to get the most appropriate block size,
> it will certainly be possible to advertise this through JPIP. Whereas
> with RasterIO you could specify a region that covers many blocks.  Again
> I defer to you on this, we can make it simple and just keep the one
> function.
> </ncb>
>
> > <ncb>
> > In comparison to a callback function, I think this behaviour is
> > synchronous, we are blocking until a timeout, and then calling again
>
> for
>
> > another time period even if it returns immediately.  However this
>
> isn't
>
> > a bad thing.
> > </ncb>
>
> I consider the blocking will occur until that time when a valid update
> is ready to be rendered by the user. In the meantime the user won't
> really be able to render anything so I guess waiting here is not a big
> issue. However if you would support the user to do any other thing
> within this thread, then implement to return immediately when the
> timeout is set to 0. Then status= IO_PENDING will show that there's
> nothing new can be found in the buffer and RasterIO should be called
> again soon.
>
> <ncb>
> Ok, I have got it now - we have a polling thread on the status - sounds
> good to me.
> </ncb>
>
> > I don't think if the driver would be required to copy padding data
> > into the user buffer since the user will be notified about the update
> > region that should be copied over.
> >
> > <ncb>
> > In the case of JPIP (however unfortunate) the server is allowed to
> > adjust the region of the image returned this may require some padding
> > the requested client buffer.
>
> Hmmm... That's difficult for me to follow. Won't it result in ugly
> effects in the image display?
>
> <ncb>
> It can result in ugly effects on the display, however those 'ugly'
> regions will be filled with subsequent requests to the server.  It is
> part of the JPIP spec. so I mentioned it.
>
> Many thanks.
> </ncb>
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Thu Sep  4 14:43:49 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  4 14:43:53 2008
Subject: [gdal-dev] gdalwarp color table copy issue
In-Reply-To: <48BFF3E3.20909@noaa.gov>
References: <48BF0CF7.5020103@noaa.gov> <48BFF3E3.20909@noaa.gov>
Message-ID: <200809042043.49843.even.rouault@mines-paris.org>

You're hitting two issues :
- First issue. You shouldn't use gdalwarp on a dataset with a color table and 
try a resampling method that is not nearest neighbour (basically because all 
other resampling methods do some math like averaging with several values of 
pixels. Which doesn't make sense for a color table index) . I've added very 
recently a warning in GDAL 1.6.0dev to warn the user in such cases.
- Second issue. TIFF format (it's really a format limitation) doesn't handle 
the transparency component in a color table. Basically the alpha component is 
always 255.

The solution I see : convert your dataset to a full RGBA image and warp it 
afterwards. You can do that easily with the -expand rgba option of 
gdal_translate from GDAL 1.6.0dev.
From prushfor at NRCan.gc.ca  Thu Sep  4 15:21:37 2008
From: prushfor at NRCan.gc.ca (Rushforth, Peter)
Date: Thu Sep  4 15:21:39 2008
Subject: [gdal-dev] example GML v2.
In-Reply-To: <OF2A3BDFF1.DFD37166-ON4A2574BA.00023F8F-4A2574BA.00025211@transport.qld.gov.au>
References: <OF2A3BDFF1.DFD37166-ON4A2574BA.00023F8F-4A2574BA.00025211@transport.qld.gov.au>
Message-ID: <E3942D3EB127854BBBC18511759DD003013AF53B@S0-OTT-X2.nrn.nrcan.gc.ca>


 Hi Nick,

There are lots of gml 2 files available from here, of varying size:

http://www.statcan.ca/english/mapsgeo/index2.htm

Cheers,
Peter

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of 
> nicholas.g.lawrence@mainroads.qld.gov.au
> Sent: September 3, 2008 20:25
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] example GML v2.
> 
> 
> Hello list,
> 
> I am looking for a GML v2.1 file for testing purposes
> 
> It does not have to be very large at all, or of any 
> particular area, just enough to test that the import works.
> 
> Any suggestions on where I can find one?
> 
> Regards,
> nick
> 
> 
> **************************************************************
> *********
> WARNING: This e-mail (including any attachments) may contain 
> legally privileged, confidential or private information and 
> may be protected by copyright. You may only use it if you are 
> the person(s) it was intended to be sent to and if you use it 
> in an authorised way.  No one is allowed to use, review, 
> alter, transmit, disclose, distribute, print or copy this 
> e-mail without appropriate authority.
> 
> If this e-mail was not intended for you and was sent to you 
> by mistake, please telephone or e-mail me immediately, 
> destroy any hardcopies of this e-mail and delete it and any 
> copies of it from your computer system. Any right which the 
> sender may have under copyright law, and any legal privilege 
> and confidentiality attached to this e-mail is not waived or 
> destroyed by that mistake.
> 
> It is your responsibility to ensure that this e-mail does not 
> contain and is not affected by computer viruses, defects or 
> interference by third parties or replication problems 
> (including incompatibility with your computer system).
> 
> Opinions contained in this e-mail do not necessarily reflect 
> the opinions of the Queensland Department of Main Roads, 
> Queensland Transport or Maritime Safety Queensland, or 
> endorsed organisations utilising the same infrastructure.
> **************************************************************
> *********
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From szekerest at gmail.com  Thu Sep  4 18:12:05 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep  4 18:12:08 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <B1B624F7C110834B96594065A74F3A540916B4DE@gemini.rsinc.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
	<200809040042.01824.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A540916B4DE@gemini.rsinc.com>
Message-ID: <f3b73b7d0809041512i5138838u6c19b09e539ab640@mail.gmail.com>

Norman,

I'd require at least one more roundtrip to reach the final form before
placing a vote on this. I'm afraid not all of the comments have been
taken into account and this one seems more complicated that in could
eventually be.

1. I don't see introducing a new AsyncDataSet call would be more
beneficial than disadvantageous here. It would require some further
action for the user at the C API to decide whether a DataSet supports
this new interface or not. You should refer to GDALOpen which returns
a generic DataSet class to the caller.
I think it's not too bad to allow to implement CreateRasterIO context
for the exising datasets as well. IMO we should simply add
CreateRasterIOContext to the current GDALDataSet class.

2. I'm hesitant to think that adding this SetView method is necessary,
why should we change the raster window within the same iocontext at
all. Is it unconfortable to create a new context in case it the view
is changing?

3. I still see the deprecated ReadNextBlock still exists in the proposal.

4. It seems unreasonable to add DeleteContext as a new method to the
dataset. Why don't we delete the context object itself? The destructor
could call the CancelIO implicitly if needed. With regard to the
garbage collected SWIG bindings like Java and C# they all support a
deterministic finalizer method like finalize(), delete() or Dispose()
to allow the user to clear the things up manually if needed.
We could eventually keep CancelIO however, in order to make sure that
the operation was successfully canceled o not, by setting the state of
the IO accordingly.

By considering these I think it would be in a good shape to start
creating a reference implementation around the concept. I think we all
have some doubts that a real implementation wouldn't bring in further
things that haven't been addressed yet in this RFC.

Best regards,

Tamas



2008/9/4 Norman Barker <nbarker@ittvis.com>:
> Hi Even,
>
> Firstly, Tamas is right ReadBlock, RasterIO are identical - stupid mistake on my part :-) - a user can still optimize the remote reading by picking the correct view to match the image metadata from the server (if they so wish).
>
> Comments inline and I have also updated the wiki.
>
> I would like to propose this for a vote, where we are voting to approve the interface for submission into GDAL pending an implementation.  I have initial approval (as in from my employer) to do the implementation - also I am contacting other jpip vendors to make sure we get an interoperable driver; we will of course be testing against kakadu as well.  I wish to get the interface approved before proceeding to code the engine.
>
> Comments as always appreciated, apologies if I have not done the vote part correctly - it of course has a +1 from me!
>
> My comments inline below;
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Wednesday, September 03, 2008 4:42 PM
> To: Norman Barker
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] RE: progressive rendering
>
> Norman,
>
> just a very quick review of the latest state of the RFC after a quick reading
> of it...
>
> - do we really need to make new classes GDALAsyncDataset and
> GDALAsyncRasterBand. I've raised that point on previous email. --> potential
> problem for the corresponding C API, but, I agree, not critical. We just need
> to be aware of it.
>
> <ncb>
> I agree with your comments about the C API, by making GDALAsyncDataset and GDALAsyncRasterBand it just makes the code base cleaner.  I am 50:50 on which way to go.  Am I right in thinking that if we added the virtual methods to GDALDataset then we could still have the same methods declared as virtual on GDALASyncXxxx and everything would work the same?  If so I propose we go as we are, and add the virtual methods later if required for the C API.
> </ncb>
>
> - if we allow classical RasterIO to be mixed with CreateRasterIOContext, or
> not, should be clearly stated. Or maybe just state that it is "left to the
> implementation driver. RTFM of the driver where it is specified and check
> well the returned error codes !"
> - same remark with 2 or more CreateRasterIOContext being used "at the same
> time"
>
> <ncb>
> I think it is going to be RTFM for the user.  JPIP for example does allow single shot stateless requests to the server where you get back an image for a particular view - this would correspond to classical RasterIO.
>
> I think we will be supporting 2 or more CreateRasterIOContext(s), e.g. thumbnail and main image - but this will be per the documentation of the format driver, and if not supported an error code should be raised.
> </ncb>
>
> - I don't really see how "static GDALDataset *GDALAsyncDatasetOpen" can be
> used by GDALOpen(). The current GDALOpen method iterates on each DRIVER
> object and calls  pfnOpen() pointer function on it. It has only knowledge of
> the driver object, so it couldn't make any use of GDALAsyncDatasetOpen(). Do
> we need to open the dataset in a particular way for the progressive/async
> rendering ? Can't arguments just be provided as the dataset name. Currently
> most drivers opening datasets that are not real files have a syntax
> like "DRIVER_NAME:host=XXXXX:dbname=XXXXX:user=XXXX:". This could be a way of
> initiating async io mode if necessary. Or maybe the papszOptions should be
> used at the CreateRasterIOContext() level. That's a convenient way of
> extending stuff, but we should avoid abusing it too... I guess your knowledge
> and experience of JPIP can guide the choice. My feeling is that it would be
> more appropriate to add it into CreateRasterIOContext(), as this will define
> a new transaction with the server. It seems unlikely that we would need to
> change the parameters of this transaction during it. This is just an
> intuition.
>
> <ncb>
> GDALAsyncDatasetOpen is called at the dataset level to open a session to the JPIP server and gets all the image metadata etc - this metadata is required before CreateRasterIOContext is called.
> </ncb>
>
> - I don't understand how SetView() interacts with the corresponding parameters
> in the initial CreateRasterIOContext().
>
> <ncb>
> The view and resolution will change a lot during the session initiated in the GDALAsyncDatasetOpen since the data streamed is interactive with the user input.  Currently SetView works for the currently set resolution level in CreateRasterIOContext, I have just updated the code on the wiki to allow setting the window level (resolution) as well with SetView rather than having to create a new context.
> </ncb>
> - Really detail question... but when and by whom is the GDALRasterIOContext *
> freed ? I think one of my proposal was to add a symetrical method to
> CreateRasterIOContext. Something like
> "void the_good_class_name::DeleteRasterIOContext(GDALRasterIOContext *);" Then
> CancelIO() would be unnecessary.
>
>
> <ncb>
> Thanks for that one, Garbage Collectors in Java spoiled me!
>
> I think CancelIO may still be necessary to implement pauses and resumes to the server from user.
>
> I have added clean up for the contexts to the wiki.
> </ncb>
>
> - Do we really need the GDALAsyncRasterBand class or corresponding
> functionnality ? My feeling is that we don't need it. If the user is only
> interested by one band, he can do that with the CreateRasterIOContext() at
> the dataset level.
>
> <ncb>
> It is there for completeness at the moment, after comments from Tamas.  I agree that it is perhaps redundant with the new design, at the CreateRasterIOContext level the bands are specified.
> </ncb>
>
> Even
>
> Le Wednesday 03 September 2008 19:24:40 Norman Barker, vous avez ?crit :
>> Hi Tamas,
>>
>> Comments inline, thanks again for your thoughts.
>>
>> -----Original Message-----
>> From: Tamas Szekeres [mailto:szekerest@gmail.com]
>> Sent: Wednesday, September 03, 2008 10:59 AM
>> To: Norman Barker
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] RE: progressive rendering
>>
>> 2008/9/3 Norman Barker <nbarker@ittvis.com>:
>> > <ncb>
>> > It would be useful to maintain both ReadNextBlock and RasterIO in the
>> > case of JPIP, it can be advantageous (if the client can handle it) to
>> > call regions of a server image on tile boundaries -> ReadNextBlock,
>>
>> but
>>
>> > in most cases I think RasterIO will be called.
>> >
>> > If you think it will just be easier to keep RasterIO then I am fine
>>
>> with
>>
>> > that.
>> > </ncb>
>>
>> Norman,
>>
>> I don't see the difference between the functionality of ReadNextBlock
>> and RasterIO. I guess it was only a name change when Adam have renamed
>> my ReadnextBlock to RasterIO and I didn't object to it.
>> Can you explain a possible difference from the aspect of the JPIP
>> driver.
>> I admit the rasterIO region have already determined when
>> CreateRasterIOContext have been called. I think we cannot safely
>> change these parameters within the same IO context.
>>
>> <ncb>
>> Isn't there a function in GDAL to get the most appropriate block size,
>> it will certainly be possible to advertise this through JPIP. Whereas
>> with RasterIO you could specify a region that covers many blocks.  Again
>> I defer to you on this, we can make it simple and just keep the one
>> function.
>> </ncb>
>>
>> > <ncb>
>> > In comparison to a callback function, I think this behaviour is
>> > synchronous, we are blocking until a timeout, and then calling again
>>
>> for
>>
>> > another time period even if it returns immediately.  However this
>>
>> isn't
>>
>> > a bad thing.
>> > </ncb>
>>
>> I consider the blocking will occur until that time when a valid update
>> is ready to be rendered by the user. In the meantime the user won't
>> really be able to render anything so I guess waiting here is not a big
>> issue. However if you would support the user to do any other thing
>> within this thread, then implement to return immediately when the
>> timeout is set to 0. Then status= IO_PENDING will show that there's
>> nothing new can be found in the buffer and RasterIO should be called
>> again soon.
>>
>> <ncb>
>> Ok, I have got it now - we have a polling thread on the status - sounds
>> good to me.
>> </ncb>
>>
>> > I don't think if the driver would be required to copy padding data
>> > into the user buffer since the user will be notified about the update
>> > region that should be copied over.
>> >
>> > <ncb>
>> > In the case of JPIP (however unfortunate) the server is allowed to
>> > adjust the region of the image returned this may require some padding
>> > the requested client buffer.
>>
>> Hmmm... That's difficult for me to follow. Won't it result in ugly
>> effects in the image display?
>>
>> <ncb>
>> It can result in ugly effects on the display, however those 'ugly'
>> regions will be filled with subsequent requests to the server.  It is
>> part of the JPIP spec. so I mentioned it.
>>
>> Many thanks.
>> </ncb>
>>
>> Best regards,
>>
>> Tamas
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From troy at radeuslabs.com  Thu Sep  4 18:16:45 2008
From: troy at radeuslabs.com (Radeus)
Date: Thu Sep  4 18:16:47 2008
Subject: [Gdal-dev] Attaching Text Files in NITF driver
Message-ID: <19321160.post@talk.nabble.com>


Hello,
I'm new to GDAL and have not been able to find any information on whether
the NITF driver allows you to attach a text file (text segment) to the NITF
file on Create or CreateCopy. I have tried with no luck to either attach or
read back a NITF file with Text Segments.
I have seen that the GDALPamDataset will create the aux.xml filler with the
extra data when creating the NITF file, but the information is not actually
writen to the NITF file itself.
I am currently using build 1.5.2 compiled on VC++ 7.1 for Windows.

Is this simply not supported in the NITF driver?

If it is not supported, how hard would it be to add this in to the driver?

Thanks in advance-
-- 
View this message in context: http://www.nabble.com/Attaching-Text-Files-in-NITF-driver-tp19321160p19321160.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Thu Sep  4 18:20:03 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep  4 18:20:06 2008
Subject: [gdal-dev] RE: progressive rendering
In-Reply-To: <f3b73b7d0809041512i5138838u6c19b09e539ab640@mail.gmail.com>
References: <loom.20080804T125825-537@post.gmane.org>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
	<200809040042.01824.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A540916B4DE@gemini.rsinc.com>
	<f3b73b7d0809041512i5138838u6c19b09e539ab640@mail.gmail.com>
Message-ID: <f3b73b7d0809041520r2aa91d58u49c49af85a128385@mail.gmail.com>

Just another note UpdateDisplay should go into the while loop in order
to render the itermediary stages in the sample code, like:

while (ctx-> status != IO_COMPLETE)
   {

     ctx->RasterIO(buffer, options);

     UpdateDisplay(buffer);

      // check has the view updated, is the request cancelled
      if (bCancel || viewChanged)
      {
         update = false;
         ctx -> CancelIO();
         break;
      }
   }



2008/9/5 Tamas Szekeres <szekerest@gmail.com>:
> Norman,
>
> I'd require at least one more roundtrip to reach the final form before
> placing a vote on this. I'm afraid not all of the comments have been
> taken into account and this one seems more complicated that in could
> eventually be.
>
> 1. I don't see introducing a new AsyncDataSet call would be more
> beneficial than disadvantageous here. It would require some further
> action for the user at the C API to decide whether a DataSet supports
> this new interface or not. You should refer to GDALOpen which returns
> a generic DataSet class to the caller.
> I think it's not too bad to allow to implement CreateRasterIO context
> for the exising datasets as well. IMO we should simply add
> CreateRasterIOContext to the current GDALDataSet class.
>
> 2. I'm hesitant to think that adding this SetView method is necessary,
> why should we change the raster window within the same iocontext at
> all. Is it unconfortable to create a new context in case it the view
> is changing?
>
> 3. I still see the deprecated ReadNextBlock still exists in the proposal.
>
> 4. It seems unreasonable to add DeleteContext as a new method to the
> dataset. Why don't we delete the context object itself? The destructor
> could call the CancelIO implicitly if needed. With regard to the
> garbage collected SWIG bindings like Java and C# they all support a
> deterministic finalizer method like finalize(), delete() or Dispose()
> to allow the user to clear the things up manually if needed.
> We could eventually keep CancelIO however, in order to make sure that
> the operation was successfully canceled o not, by setting the state of
> the IO accordingly.
>
> By considering these I think it would be in a good shape to start
> creating a reference implementation around the concept. I think we all
> have some doubts that a real implementation wouldn't bring in further
> things that haven't been addressed yet in this RFC.
>
> Best regards,
>
> Tamas
>
>
>
> 2008/9/4 Norman Barker <nbarker@ittvis.com>:
>> Hi Even,
>>
>> Firstly, Tamas is right ReadBlock, RasterIO are identical - stupid mistake on my part :-) - a user can still optimize the remote reading by picking the correct view to match the image metadata from the server (if they so wish).
>>
>> Comments inline and I have also updated the wiki.
>>
>> I would like to propose this for a vote, where we are voting to approve the interface for submission into GDAL pending an implementation.  I have initial approval (as in from my employer) to do the implementation - also I am contacting other jpip vendors to make sure we get an interoperable driver; we will of course be testing against kakadu as well.  I wish to get the interface approved before proceeding to code the engine.
>>
>> Comments as always appreciated, apologies if I have not done the vote part correctly - it of course has a +1 from me!
>>
>> My comments inline below;
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>> Sent: Wednesday, September 03, 2008 4:42 PM
>> To: Norman Barker
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] RE: progressive rendering
>>
>> Norman,
>>
>> just a very quick review of the latest state of the RFC after a quick reading
>> of it...
>>
>> - do we really need to make new classes GDALAsyncDataset and
>> GDALAsyncRasterBand. I've raised that point on previous email. --> potential
>> problem for the corresponding C API, but, I agree, not critical. We just need
>> to be aware of it.
>>
>> <ncb>
>> I agree with your comments about the C API, by making GDALAsyncDataset and GDALAsyncRasterBand it just makes the code base cleaner.  I am 50:50 on which way to go.  Am I right in thinking that if we added the virtual methods to GDALDataset then we could still have the same methods declared as virtual on GDALASyncXxxx and everything would work the same?  If so I propose we go as we are, and add the virtual methods later if required for the C API.
>> </ncb>
>>
>> - if we allow classical RasterIO to be mixed with CreateRasterIOContext, or
>> not, should be clearly stated. Or maybe just state that it is "left to the
>> implementation driver. RTFM of the driver where it is specified and check
>> well the returned error codes !"
>> - same remark with 2 or more CreateRasterIOContext being used "at the same
>> time"
>>
>> <ncb>
>> I think it is going to be RTFM for the user.  JPIP for example does allow single shot stateless requests to the server where you get back an image for a particular view - this would correspond to classical RasterIO.
>>
>> I think we will be supporting 2 or more CreateRasterIOContext(s), e.g. thumbnail and main image - but this will be per the documentation of the format driver, and if not supported an error code should be raised.
>> </ncb>
>>
>> - I don't really see how "static GDALDataset *GDALAsyncDatasetOpen" can be
>> used by GDALOpen(). The current GDALOpen method iterates on each DRIVER
>> object and calls  pfnOpen() pointer function on it. It has only knowledge of
>> the driver object, so it couldn't make any use of GDALAsyncDatasetOpen(). Do
>> we need to open the dataset in a particular way for the progressive/async
>> rendering ? Can't arguments just be provided as the dataset name. Currently
>> most drivers opening datasets that are not real files have a syntax
>> like "DRIVER_NAME:host=XXXXX:dbname=XXXXX:user=XXXX:". This could be a way of
>> initiating async io mode if necessary. Or maybe the papszOptions should be
>> used at the CreateRasterIOContext() level. That's a convenient way of
>> extending stuff, but we should avoid abusing it too... I guess your knowledge
>> and experience of JPIP can guide the choice. My feeling is that it would be
>> more appropriate to add it into CreateRasterIOContext(), as this will define
>> a new transaction with the server. It seems unlikely that we would need to
>> change the parameters of this transaction during it. This is just an
>> intuition.
>>
>> <ncb>
>> GDALAsyncDatasetOpen is called at the dataset level to open a session to the JPIP server and gets all the image metadata etc - this metadata is required before CreateRasterIOContext is called.
>> </ncb>
>>
>> - I don't understand how SetView() interacts with the corresponding parameters
>> in the initial CreateRasterIOContext().
>>
>> <ncb>
>> The view and resolution will change a lot during the session initiated in the GDALAsyncDatasetOpen since the data streamed is interactive with the user input.  Currently SetView works for the currently set resolution level in CreateRasterIOContext, I have just updated the code on the wiki to allow setting the window level (resolution) as well with SetView rather than having to create a new context.
>> </ncb>
>> - Really detail question... but when and by whom is the GDALRasterIOContext *
>> freed ? I think one of my proposal was to add a symetrical method to
>> CreateRasterIOContext. Something like
>> "void the_good_class_name::DeleteRasterIOContext(GDALRasterIOContext *);" Then
>> CancelIO() would be unnecessary.
>>
>>
>> <ncb>
>> Thanks for that one, Garbage Collectors in Java spoiled me!
>>
>> I think CancelIO may still be necessary to implement pauses and resumes to the server from user.
>>
>> I have added clean up for the contexts to the wiki.
>> </ncb>
>>
>> - Do we really need the GDALAsyncRasterBand class or corresponding
>> functionnality ? My feeling is that we don't need it. If the user is only
>> interested by one band, he can do that with the CreateRasterIOContext() at
>> the dataset level.
>>
>> <ncb>
>> It is there for completeness at the moment, after comments from Tamas.  I agree that it is perhaps redundant with the new design, at the CreateRasterIOContext level the bands are specified.
>> </ncb>
>>
>> Even
>>
>> Le Wednesday 03 September 2008 19:24:40 Norman Barker, vous avez ?crit :
>>> Hi Tamas,
>>>
>>> Comments inline, thanks again for your thoughts.
>>>
>>> -----Original Message-----
>>> From: Tamas Szekeres [mailto:szekerest@gmail.com]
>>> Sent: Wednesday, September 03, 2008 10:59 AM
>>> To: Norman Barker
>>> Cc: gdal-dev@lists.osgeo.org
>>> Subject: Re: [gdal-dev] RE: progressive rendering
>>>
>>> 2008/9/3 Norman Barker <nbarker@ittvis.com>:
>>> > <ncb>
>>> > It would be useful to maintain both ReadNextBlock and RasterIO in the
>>> > case of JPIP, it can be advantageous (if the client can handle it) to
>>> > call regions of a server image on tile boundaries -> ReadNextBlock,
>>>
>>> but
>>>
>>> > in most cases I think RasterIO will be called.
>>> >
>>> > If you think it will just be easier to keep RasterIO then I am fine
>>>
>>> with
>>>
>>> > that.
>>> > </ncb>
>>>
>>> Norman,
>>>
>>> I don't see the difference between the functionality of ReadNextBlock
>>> and RasterIO. I guess it was only a name change when Adam have renamed
>>> my ReadnextBlock to RasterIO and I didn't object to it.
>>> Can you explain a possible difference from the aspect of the JPIP
>>> driver.
>>> I admit the rasterIO region have already determined when
>>> CreateRasterIOContext have been called. I think we cannot safely
>>> change these parameters within the same IO context.
>>>
>>> <ncb>
>>> Isn't there a function in GDAL to get the most appropriate block size,
>>> it will certainly be possible to advertise this through JPIP. Whereas
>>> with RasterIO you could specify a region that covers many blocks.  Again
>>> I defer to you on this, we can make it simple and just keep the one
>>> function.
>>> </ncb>
>>>
>>> > <ncb>
>>> > In comparison to a callback function, I think this behaviour is
>>> > synchronous, we are blocking until a timeout, and then calling again
>>>
>>> for
>>>
>>> > another time period even if it returns immediately.  However this
>>>
>>> isn't
>>>
>>> > a bad thing.
>>> > </ncb>
>>>
>>> I consider the blocking will occur until that time when a valid update
>>> is ready to be rendered by the user. In the meantime the user won't
>>> really be able to render anything so I guess waiting here is not a big
>>> issue. However if you would support the user to do any other thing
>>> within this thread, then implement to return immediately when the
>>> timeout is set to 0. Then status= IO_PENDING will show that there's
>>> nothing new can be found in the buffer and RasterIO should be called
>>> again soon.
>>>
>>> <ncb>
>>> Ok, I have got it now - we have a polling thread on the status - sounds
>>> good to me.
>>> </ncb>
>>>
>>> > I don't think if the driver would be required to copy padding data
>>> > into the user buffer since the user will be notified about the update
>>> > region that should be copied over.
>>> >
>>> > <ncb>
>>> > In the case of JPIP (however unfortunate) the server is allowed to
>>> > adjust the region of the image returned this may require some padding
>>> > the requested client buffer.
>>>
>>> Hmmm... That's difficult for me to follow. Won't it result in ugly
>>> effects in the image display?
>>>
>>> <ncb>
>>> It can result in ugly effects on the display, however those 'ugly'
>>> regions will be filled with subsequent requests to the server.  It is
>>> part of the JPIP spec. so I mentioned it.
>>>
>>> Many thanks.
>>> </ncb>
>>>
>>> Best regards,
>>>
>>> Tamas
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From nbarker at ittvis.com  Thu Sep  4 18:30:06 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Sep  4 18:30:12 2008
Subject: [gdal-dev] RE: progressive rendering
References: <loom.20080804T125825-537@post.gmane.org>
	<f3b73b7d0809030958y9673758wccc7791bb1665f95@mail.gmail.com>
	<B1B624F7C110834B96594065A74F3A540916B4D0@gemini.rsinc.com>
	<200809040042.01824.even.rouault@mines-paris.org>
	<B1B624F7C110834B96594065A74F3A540916B4DE@gemini.rsinc.com>
	<f3b73b7d0809041512i5138838u6c19b09e539ab640@mail.gmail.com>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B4E5@gemini.rsinc.com>

Call to vote withdrawn - too keen on my part.

I will take in all the comments I receive (thanks Even and Tamas for the extra comments) and start coding the format driver.  

I will then pull the interface from the implementation driver and put this in the RFC 24.  I will try to code to the currently proposed interface, and the comments I have just received in response to my earlier mail.

Many thanks for the help in shaping this RFC and I will be in contact shortly.

Norman

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Thursday, September 04, 2008 4:12 PM
To: Norman Barker
Cc: Even Rouault; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: progressive rendering

Norman,

I'd require at least one more roundtrip to reach the final form before
placing a vote on this. I'm afraid not all of the comments have been
taken into account and this one seems more complicated that in could
eventually be.

1. I don't see introducing a new AsyncDataSet call would be more
beneficial than disadvantageous here. It would require some further
action for the user at the C API to decide whether a DataSet supports
this new interface or not. You should refer to GDALOpen which returns
a generic DataSet class to the caller.
I think it's not too bad to allow to implement CreateRasterIO context
for the exising datasets as well. IMO we should simply add
CreateRasterIOContext to the current GDALDataSet class.

2. I'm hesitant to think that adding this SetView method is necessary,
why should we change the raster window within the same iocontext at
all. Is it unconfortable to create a new context in case it the view
is changing?

3. I still see the deprecated ReadNextBlock still exists in the proposal.

4. It seems unreasonable to add DeleteContext as a new method to the
dataset. Why don't we delete the context object itself? The destructor
could call the CancelIO implicitly if needed. With regard to the
garbage collected SWIG bindings like Java and C# they all support a
deterministic finalizer method like finalize(), delete() or Dispose()
to allow the user to clear the things up manually if needed.
We could eventually keep CancelIO however, in order to make sure that
the operation was successfully canceled o not, by setting the state of
the IO accordingly.

By considering these I think it would be in a good shape to start
creating a reference implementation around the concept. I think we all
have some doubts that a real implementation wouldn't bring in further
things that haven't been addressed yet in this RFC.

Best regards,

Tamas



2008/9/4 Norman Barker <nbarker@ittvis.com>:
> Hi Even,
>
> Firstly, Tamas is right ReadBlock, RasterIO are identical - stupid mistake on my part :-) - a user can still optimize the remote reading by picking the correct view to match the image metadata from the server (if they so wish).
>
> Comments inline and I have also updated the wiki.
>
> I would like to propose this for a vote, where we are voting to approve the interface for submission into GDAL pending an implementation.  I have initial approval (as in from my employer) to do the implementation - also I am contacting other jpip vendors to make sure we get an interoperable driver; we will of course be testing against kakadu as well.  I wish to get the interface approved before proceeding to code the engine.
>
> Comments as always appreciated, apologies if I have not done the vote part correctly - it of course has a +1 from me!
>
> My comments inline below;
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Wednesday, September 03, 2008 4:42 PM
> To: Norman Barker
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] RE: progressive rendering
>
> Norman,
>
> just a very quick review of the latest state of the RFC after a quick reading
> of it...
>
> - do we really need to make new classes GDALAsyncDataset and
> GDALAsyncRasterBand. I've raised that point on previous email. --> potential
> problem for the corresponding C API, but, I agree, not critical. We just need
> to be aware of it.
>
> <ncb>
> I agree with your comments about the C API, by making GDALAsyncDataset and GDALAsyncRasterBand it just makes the code base cleaner.  I am 50:50 on which way to go.  Am I right in thinking that if we added the virtual methods to GDALDataset then we could still have the same methods declared as virtual on GDALASyncXxxx and everything would work the same?  If so I propose we go as we are, and add the virtual methods later if required for the C API.
> </ncb>
>
> - if we allow classical RasterIO to be mixed with CreateRasterIOContext, or
> not, should be clearly stated. Or maybe just state that it is "left to the
> implementation driver. RTFM of the driver where it is specified and check
> well the returned error codes !"
> - same remark with 2 or more CreateRasterIOContext being used "at the same
> time"
>
> <ncb>
> I think it is going to be RTFM for the user.  JPIP for example does allow single shot stateless requests to the server where you get back an image for a particular view - this would correspond to classical RasterIO.
>
> I think we will be supporting 2 or more CreateRasterIOContext(s), e.g. thumbnail and main image - but this will be per the documentation of the format driver, and if not supported an error code should be raised.
> </ncb>
>
> - I don't really see how "static GDALDataset *GDALAsyncDatasetOpen" can be
> used by GDALOpen(). The current GDALOpen method iterates on each DRIVER
> object and calls  pfnOpen() pointer function on it. It has only knowledge of
> the driver object, so it couldn't make any use of GDALAsyncDatasetOpen(). Do
> we need to open the dataset in a particular way for the progressive/async
> rendering ? Can't arguments just be provided as the dataset name. Currently
> most drivers opening datasets that are not real files have a syntax
> like "DRIVER_NAME:host=XXXXX:dbname=XXXXX:user=XXXX:". This could be a way of
> initiating async io mode if necessary. Or maybe the papszOptions should be
> used at the CreateRasterIOContext() level. That's a convenient way of
> extending stuff, but we should avoid abusing it too... I guess your knowledge
> and experience of JPIP can guide the choice. My feeling is that it would be
> more appropriate to add it into CreateRasterIOContext(), as this will define
> a new transaction with the server. It seems unlikely that we would need to
> change the parameters of this transaction during it. This is just an
> intuition.
>
> <ncb>
> GDALAsyncDatasetOpen is called at the dataset level to open a session to the JPIP server and gets all the image metadata etc - this metadata is required before CreateRasterIOContext is called.
> </ncb>
>
> - I don't understand how SetView() interacts with the corresponding parameters
> in the initial CreateRasterIOContext().
>
> <ncb>
> The view and resolution will change a lot during the session initiated in the GDALAsyncDatasetOpen since the data streamed is interactive with the user input.  Currently SetView works for the currently set resolution level in CreateRasterIOContext, I have just updated the code on the wiki to allow setting the window level (resolution) as well with SetView rather than having to create a new context.
> </ncb>
> - Really detail question... but when and by whom is the GDALRasterIOContext *
> freed ? I think one of my proposal was to add a symetrical method to
> CreateRasterIOContext. Something like
> "void the_good_class_name::DeleteRasterIOContext(GDALRasterIOContext *);" Then
> CancelIO() would be unnecessary.
>
>
> <ncb>
> Thanks for that one, Garbage Collectors in Java spoiled me!
>
> I think CancelIO may still be necessary to implement pauses and resumes to the server from user.
>
> I have added clean up for the contexts to the wiki.
> </ncb>
>
> - Do we really need the GDALAsyncRasterBand class or corresponding
> functionnality ? My feeling is that we don't need it. If the user is only
> interested by one band, he can do that with the CreateRasterIOContext() at
> the dataset level.
>
> <ncb>
> It is there for completeness at the moment, after comments from Tamas.  I agree that it is perhaps redundant with the new design, at the CreateRasterIOContext level the bands are specified.
> </ncb>
>
> Even
>
> Le Wednesday 03 September 2008 19:24:40 Norman Barker, vous avez ?crit :
>> Hi Tamas,
>>
>> Comments inline, thanks again for your thoughts.
>>
>> -----Original Message-----
>> From: Tamas Szekeres [mailto:szekerest@gmail.com]
>> Sent: Wednesday, September 03, 2008 10:59 AM
>> To: Norman Barker
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] RE: progressive rendering
>>
>> 2008/9/3 Norman Barker <nbarker@ittvis.com>:
>> > <ncb>
>> > It would be useful to maintain both ReadNextBlock and RasterIO in the
>> > case of JPIP, it can be advantageous (if the client can handle it) to
>> > call regions of a server image on tile boundaries -> ReadNextBlock,
>>
>> but
>>
>> > in most cases I think RasterIO will be called.
>> >
>> > If you think it will just be easier to keep RasterIO then I am fine
>>
>> with
>>
>> > that.
>> > </ncb>
>>
>> Norman,
>>
>> I don't see the difference between the functionality of ReadNextBlock
>> and RasterIO. I guess it was only a name change when Adam have renamed
>> my ReadnextBlock to RasterIO and I didn't object to it.
>> Can you explain a possible difference from the aspect of the JPIP
>> driver.
>> I admit the rasterIO region have already determined when
>> CreateRasterIOContext have been called. I think we cannot safely
>> change these parameters within the same IO context.
>>
>> <ncb>
>> Isn't there a function in GDAL to get the most appropriate block size,
>> it will certainly be possible to advertise this through JPIP. Whereas
>> with RasterIO you could specify a region that covers many blocks.  Again
>> I defer to you on this, we can make it simple and just keep the one
>> function.
>> </ncb>
>>
>> > <ncb>
>> > In comparison to a callback function, I think this behaviour is
>> > synchronous, we are blocking until a timeout, and then calling again
>>
>> for
>>
>> > another time period even if it returns immediately.  However this
>>
>> isn't
>>
>> > a bad thing.
>> > </ncb>
>>
>> I consider the blocking will occur until that time when a valid update
>> is ready to be rendered by the user. In the meantime the user won't
>> really be able to render anything so I guess waiting here is not a big
>> issue. However if you would support the user to do any other thing
>> within this thread, then implement to return immediately when the
>> timeout is set to 0. Then status= IO_PENDING will show that there's
>> nothing new can be found in the buffer and RasterIO should be called
>> again soon.
>>
>> <ncb>
>> Ok, I have got it now - we have a polling thread on the status - sounds
>> good to me.
>> </ncb>
>>
>> > I don't think if the driver would be required to copy padding data
>> > into the user buffer since the user will be notified about the update
>> > region that should be copied over.
>> >
>> > <ncb>
>> > In the case of JPIP (however unfortunate) the server is allowed to
>> > adjust the region of the image returned this may require some padding
>> > the requested client buffer.
>>
>> Hmmm... That's difficult for me to follow. Won't it result in ugly
>> effects in the image display?
>>
>> <ncb>
>> It can result in ugly effects on the display, however those 'ugly'
>> regions will be filled with subsequent requests to the server.  It is
>> part of the JPIP spec. so I mentioned it.
>>
>> Many thanks.
>> </ncb>
>>
>> Best regards,
>>
>> Tamas
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From condit at sdsc.edu  Thu Sep  4 18:46:08 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Thu Sep  4 18:46:37 2008
Subject: [gdal-dev] KML and custom styles
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F03BCC446@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F03BCC446@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <845AADAC1106E44996327D62097E4C6B01113BA4@et.ad.sdsc.edu>

Hi Tom-
The KML styling has always been problematic because of course everyone
will want something different. I do think this would be a good idea, but
I'm not sure how many folks / organizations are using this kind of setup
now. At my institution we typically write an XSL stylesheet to
postprocess any KML that needs to look nice. I put an example out on the
http://trac.osgeo.org/gdal under KML, but there seems to be a problem
with the trac server right now.

If you think people would use this feature go ahead and file an
enhancement  ticket (once the trac server gets fixed) for it and I'll
try and take a look soon.

Thanks for the input!
-Chris


> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Kralidis,Tom [Burlington]
> Sent: Wednesday, September 03, 2008 8:09 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] KML and custom styles
> 
> 
> Hi: using svn trunk, the KML output has reletively simple style
> definitions by default.
> 
> OGC KML allows for styles to be remotely defined within the <styleURL>
> element, which refs a local or remote file, and XPointer to a given
> style def.  For example:
> 
> <styleUrl>somefile.kml#mystyle</styleUrl>
> 
> ...would use the style mystyle in somefile.kml.
> 
> I wonder whether this would be a useful -dsco for KML output (default
> behaviour would be as per the current behaviour).  Something like
-dsco
> LayerStyle=[LayerName,]somefile.kml#mystyle.
> 
> the KML driver would then use this to output the style def for the
> given layer.  If LayerName is not specified, the style is applied to
> the entire document.
> 
> Comments?
> 
> ..Tom
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From condit at sdsc.edu  Thu Sep  4 18:55:43 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Thu Sep  4 18:55:50 2008
Subject: [gdal-dev] Postgis 8.3 support
In-Reply-To: <03d801c90e0a$efbad330$cf307990$@miller@spatialminds.com>
References: <03d801c90e0a$efbad330$cf307990$@miller@spatialminds.com>
Message-ID: <845AADAC1106E44996327D62097E4C6B01113BA8@et.ad.sdsc.edu>

Hi Craig-

I haven't had any problems building gdal with postgres 8.3 support.

1)      What code base are you building with?

2)      Can you be more specific about your errors?

 

Your nmake.opt definition is nearly identical to mine (except for the
location of postgres).

-Chris

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Craig Miller
Sent: Wednesday, September 03, 2008 2:21 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Postgis 8.3 support

 

Does OGR support Postgis 8.3 under Windows?

 

I have the following defined in my nmake.opt but am still getting all
sorts of linker errors:

 

 

# PostGIS Libraries

PG_INC_DIR = C:\pg\include\

PG_LIB = C:\pg\lib\libpq.lib wsock32.lib

 

Craig

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080904/986abca7/attachment.html
From richard.greenwood at gmail.com  Thu Sep  4 20:37:58 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu Sep  4 20:38:00 2008
Subject: [gdal-dev] gdal in ESRI products
Message-ID: <ae9185aa0809041737u203deeadqd01f002a91ed0373@mail.gmail.com>

I seem to remember a couple years ago someone saying that ESRI was
going to be using some gdal libraries in one or more of their
products. Does anyone know if this ever happened or provide any
details?

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com
From ivan.lucena at pmldnet.com  Thu Sep  4 23:09:56 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Thu Sep  4 23:09:58 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gZ2RhbCBpbiBFU1JJIHByb2R1Y3Rz?=
Message-ID: <20080905030956.12892.qmail@s466.sureserver.com>

Rich,

Basically all ERSI products are using GDAL since 9.2.

http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supported_raster_dataset_file_formats

And they keep using it in 9.3:

http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?id=3005&pid=3004&topicname=Supported_raster_data_file_types

It is embedded on ArcObject so even if you write your own ArcObject code to deal with Idrisi RST files, for example, you don't need to think about what is going own under the hood. But there are some formats on the list above that they are not supporting through GDAL but by their own code, GeoTiff, img, so I don't think they are supporting Bigtiff yet. Are they?

There was one request started on a discussion on gdal-dev that ESRI should release a free downloadble version of their gdal_i.lib so that programmers would be able to develop driver as GDAL plugins. That is because they added some stuff on the library that makes it binary incompatible with regular GDAL plugins. They were very receptive to the request and we are waiting...

What more do you want to know?

Best regards,

Ivan

>  -------Original Message-------
>  From: Richard Greenwood <richard.greenwood@gmail.com>
>  Subject: [gdal-dev] gdal in ESRI products
>  Sent: Sep 05 '08 00:37
>  
>  I seem to remember a couple years ago someone saying that ESRI was
>  going to be using some gdal libraries in one or more of their
>  products. Does anyone know if this ever happened or provide any
>  details?
>  
>  Thanks,
>  Rich
>  
>  --
>  Richard Greenwood
>  richard.greenwood@gmail.com
>  www.greenwoodmap.com
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From richard.greenwood at gmail.com  Fri Sep  5 09:15:13 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Fri Sep  5 09:15:15 2008
Subject: [gdal-dev] gdal in ESRI products
In-Reply-To: <20080905030956.12892.qmail@s466.sureserver.com>
References: <20080905030956.12892.qmail@s466.sureserver.com>
Message-ID: <ae9185aa0809050615j748d504dm6d7f8340060855c7@mail.gmail.com>

On Thu, Sep 4, 2008 at 9:09 PM, Lucena, Ivan <ivan.lucena@pmldnet.com> wrote:
> Rich,
>
> Basically all ERSI products are using GDAL since 9.2.
>
> http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Supported_raster_dataset_file_formats
>
> And they keep using it in 9.3:
>
> http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?id=3005&pid=3004&topicname=Supported_raster_data_file_types
>
> It is embedded on ArcObject so even if you write your own ArcObject code to deal with Idrisi RST files, for example, you don't need to think about what is going own under the hood. But there are some formats on the list above that they are not supporting through GDAL but by their own code, GeoTiff, img, so I don't think they are supporting Bigtiff yet. Are they?
>
> There was one request started on a discussion on gdal-dev that ESRI should release a free downloadble version of their gdal_i.lib so that programmers would be able to develop driver as GDAL plugins. That is because they added some stuff on the library that makes it binary incompatible with regular GDAL plugins. They were very receptive to the request and we are waiting...
>
> What more do you want to know?
>
> Best regards,
>
> Ivan

Thanks Ivan and Sophia. So ESRI is using GDAL/OGR for some raster
formats, any idea about vector use? And does anyone know if ESRI has
contributed code or money to GDAL?

I am preparing a presentation on Open Source Geospatial software for a
regional ESRI users group. (I don't use ESRI software much, but I
can't make it to Cape Town and I need some continuing education
credits...)

Thanks,
Rich

-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com
From warmerdam at pobox.com  Fri Sep  5 10:32:10 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 10:33:03 2008
Subject: [gdal-dev] gdal in ESRI products
In-Reply-To: <ae9185aa0809050615j748d504dm6d7f8340060855c7@mail.gmail.com>
References: <20080905030956.12892.qmail@s466.sureserver.com>
	<ae9185aa0809050615j748d504dm6d7f8340060855c7@mail.gmail.com>
Message-ID: <48C142EA.9010406@pobox.com>

Richard Greenwood wrote:
> Thanks Ivan and Sophia. So ESRI is using GDAL/OGR for some raster
> formats, any idea about vector use? And does anyone know if ESRI has
> contributed code or money to GDAL?

Richard,

I'm not aware of any use within ESRI of GDAL/OGR vector support.

ESRI is currently one of my major clients, and have funded quite a few
improvements and bug fixes through me for GDAL over the last three years
or so.  They also co-sponsored the bigtiff upgrade for libtiff.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Sep  5 10:56:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 10:56:35 2008
Subject: [Gdal-dev] Attaching Text Files in NITF driver
In-Reply-To: <19321160.post@talk.nabble.com>
References: <19321160.post@talk.nabble.com>
Message-ID: <48C14894.9040905@pobox.com>

Radeus wrote:
> Hello,
> I'm new to GDAL and have not been able to find any information on whether
> the NITF driver allows you to attach a text file (text segment) to the NITF
> file on Create or CreateCopy. I have tried with no luck to either attach or
> read back a NITF file with Text Segments.
> I have seen that the GDALPamDataset will create the aux.xml filler with the
> extra data when creating the NITF file, but the information is not actually
> writen to the NITF file itself.
> I am currently using build 1.5.2 compiled on VC++ 7.1 for Windows.
> 
> Is this simply not supported in the NITF driver?
> 
> If it is not supported, how hard would it be to add this in to the driver?

Radeus,

You are correct that the NITF driver does not currently support writing
text segments.

It would not be particularly hard to add.  That means it might take me
2-3 hours. Someone unfamiliar with the driver might require a day to get
to a stable and safe result.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dylan.beaudette at gmail.com  Fri Sep  5 11:38:13 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri Sep  5 11:38:14 2008
Subject: [gdal-dev] gdal in ESRI products
In-Reply-To: <48C142EA.9010406@pobox.com>
References: <20080905030956.12892.qmail@s466.sureserver.com>
	<ae9185aa0809050615j748d504dm6d7f8340060855c7@mail.gmail.com>
	<48C142EA.9010406@pobox.com>
Message-ID: <3c5546140809050838r6c339975s7e7565eb6013c012@mail.gmail.com>

On Fri, Sep 5, 2008 at 7:32 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Richard Greenwood wrote:
>>
>> Thanks Ivan and Sophia. So ESRI is using GDAL/OGR for some raster
>> formats, any idea about vector use? And does anyone know if ESRI has
>> contributed code or money to GDAL?
>
> Richard,
>
> I'm not aware of any use within ESRI of GDAL/OGR vector support.
>
> ESRI is currently one of my major clients, and have funded quite a few
> improvements and bug fixes through me for GDAL over the last three years
> or so.  They also co-sponsored the bigtiff upgrade for libtiff.
>
> Best regards,
> --

I am glad to hear that you feel they have contributed back to GDAL.
When I first heard that they were using GDAL I was glad, but also
concerned that they were taking your (and others') years of work
without compensation.

Cheers,

Dylan
From ivan.lucena at pmldnet.com  Fri Sep  5 11:49:52 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Sep  5 11:49:54 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gZ2RhbCBpbiBFU1JJIHByb2R1Y3Rz?=
Message-ID: <20080905154952.25498.qmail@s466.sureserver.com>

Frank,

>  or so.??They also co-sponsored the bigtiff upgrade for libtiff.

Funny because it doesn't seams to me that they are using bigtiff in 9.3 yet.

Maybe it will come in a service pack. Let's see.

Ivan
From troy at radeuslabs.com  Fri Sep  5 12:24:49 2008
From: troy at radeuslabs.com (Radeus)
Date: Fri Sep  5 12:24:51 2008
Subject: [Gdal-dev] Attaching Text Files in NITF driver
In-Reply-To: <48C14894.9040905@pobox.com>
References: <19321160.post@talk.nabble.com> <48C14894.9040905@pobox.com>
Message-ID: <19334826.post@talk.nabble.com>




Frank Warmerdam-2 wrote:
> 
> Radeus wrote:
>> Hello,
>> I'm new to GDAL and have not been able to find any information on whether
>> the NITF driver allows you to attach a text file (text segment) to the
>> NITF
>> file on Create or CreateCopy. I have tried with no luck to either attach
>> or
>> read back a NITF file with Text Segments.
>> I have seen that the GDALPamDataset will create the aux.xml filler with
>> the
>> extra data when creating the NITF file, but the information is not
>> actually
>> writen to the NITF file itself.
>> I am currently using build 1.5.2 compiled on VC++ 7.1 for Windows.
>> 
>> Is this simply not supported in the NITF driver?
>> 
>> If it is not supported, how hard would it be to add this in to the
>> driver?
> 
> Radeus,
> 
> You are correct that the NITF driver does not currently support writing
> text segments.
> 
> It would not be particularly hard to add.  That means it might take me
> 2-3 hours. Someone unfamiliar with the driver might require a day to get
> to a stable and safe result.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

Frank,
Other than implementing the SetMetadata() and SetMetadataItem() in the
NITFDataset, what else should I look at changing. I know I should be writing
this information from the GDALMultiDomainMetadata in the destructor (or at
least that is what I think based on GTiff implementation) but I have not
figured out how. Any advice would be greatly appreciated!

Best Regards-
-- 
View this message in context: http://www.nabble.com/Attaching-Text-Files-in-NITF-driver-tp19321160p19334826.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mpg at lizardtech.com  Fri Sep  5 13:02:58 2008
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Fri Sep  5 13:03:01 2008
Subject: [gdal-dev] +1 for JPIP support
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD12CDA3AD@sea-srv-ms3.lizardtech.com>

Just a note of support from the sidelines --

As longtime JP2 and JPIP fans, LizardTech and I are very much in favor
of getting a JPIP driver into GDAL.  While I haven't been contributing
directly to the discussion, I've been following it offline and am in
touch w/ NormanB as to how we might be able to help turn the RFC into
working code.  Keep up the good work, guys..

(and a big thank you to Norman for all the work in pushing this
through!)

-mpg
From warmerdam at pobox.com  Fri Sep  5 13:23:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 13:24:12 2008
Subject: [Gdal-dev] Attaching Text Files in NITF driver
In-Reply-To: <19334826.post@talk.nabble.com>
References: <19321160.post@talk.nabble.com> <48C14894.9040905@pobox.com>
	<19334826.post@talk.nabble.com>
Message-ID: <48C16B27.2030605@pobox.com>

Radeus wrote:
> Frank,
> Other than implementing the SetMetadata() and SetMetadataItem() in the
> NITFDataset, what else should I look at changing. I know I should be writing
> this information from the GDALMultiDomainMetadata in the destructor (or at
> least that is what I think based on GTiff implementation) but I have not
> figured out how. Any advice would be greatly appreciated!

Radeus,

I believe you will need to establish the text segments at the point
the NITF file is created, as it is hard to restructure file size and
offsets after that.  So, the suggested approach would be to add logic
to handle the text segments in NITFCreate() in nitffile.c.

The text contents would presumably have to come from the passed in
options list.

The NITFCreateCopy() method in nitfdataset.cpp would then need to be
modified to pass the metadata from the source dataset into NITFCreate()
through the options list, somewhat similarly to how it handles the TRE
stuff now (search for "Copy TRE definitions as creation options").

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Sep  5 15:11:34 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Sep  5 15:11:37 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
Message-ID: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>

I'm new to GDAL, though I'm looking forward to using it.  I've compiled
1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment with
the library.  In my application that links to the library I'm getting an
unresolved reference (pasted below).  I don't have any ODBC experience and
would appreciate any advice as to how I can resolve this reference (and some
other ODBC unresolved externals that come after this) so I can compile and
use OGR.  Thanks much for any help.


Error 3 error LNK2019: unresolved external symbol
_SQLInstallerError@20referenced in function "public: int __thiscall
CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned
short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z) gdal.lib




-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080905/d36c3355/attachment.html
From joelodom at gmail.com  Fri Sep  5 15:21:20 2008
From: joelodom at gmail.com (Joel Odom)
Date: Fri Sep  5 15:21:22 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
In-Reply-To: <006a01c90f8c$0eed98a0$2cc8c9e0$@com>
References: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
	<006a01c90f8c$0eed98a0$2cc8c9e0$@com>
Message-ID: <d422b4500809051221l12952cdau6d39e7a9d9ccee1e@mail.gmail.com>

Hello, Martin.  I added this library and tried it, but still no luck
linking.  I was looking at the source code, and it appears that all of the
ODBC stuff is using header files distributed with Visual Studio.  Is there a
system dependency where this should be resolved, or is the dependency
somewhere in one of the other .lib outputs of my gdal build?  Thanks.



On Fri, Sep 5, 2008 at 3:17 PM, Martin Chapman <
mchapman@fortifieddatacom.com> wrote:

>  Joel,
>
>
>
> Did you add "gdal_i.lib" to your linker input property in the project
> settings?
>
>
>
> Martin
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Joel Odom
> *Sent:* Friday, September 05, 2008 1:12 PM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] Newbie Developer Question About Linking
>
>
>
> I'm new to GDAL, though I'm looking forward to using it.  I've compiled
> 1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment with
> the library.  In my application that links to the library I'm getting an
> unresolved reference (pasted below).  I don't have any ODBC experience and
> would appreciate any advice as to how I can resolve this reference (and some
> other ODBC unresolved externals that come after this) so I can compile and
> use OGR.  Thanks much for any help.
>
>
>
>
>
>
>
> Error    3          error LNK2019: unresolved external symbol
> _SQLInstallerError@20 referenced in function "public: int __thiscall
> CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned
> short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z)  gdal.lib
>
>
>
>
>
>
>
>
>
> --
> http://giscoder.blogspot.com/
>



-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080905/f261a583/attachment.html
From mchapman at fortifieddatacom.com  Fri Sep  5 15:19:45 2008
From: mchapman at fortifieddatacom.com (mchapman@fortifieddatacom.com)
Date: Fri Sep  5 15:26:45 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
In-Reply-To: <d422b4500809051221l12952cdau6d39e7a9d9ccee1e@mail.gmail.com>
References: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
	<006a01c90f8c$0eed98a0$2cc8c9e0$@com><d422b4500809051221l12952cdau6d39e7a9d9ccee1e@mail.gmail.com>
Message-ID: <1937129002-1220642737-cardhu_decombobulator_blackberry.rim.net-1492932125-@bxe144.bisx.prod.on.blackberry>

Joel,

Look in/gdal/nmake.opt to turn off odbc and then recompile gdal.

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: "Joel Odom" <joelodom@gmail.com>

Date: Fri, 5 Sep 2008 15:21:20 
To: Martin Chapman<mchapman@fortifieddatacom.com>; <gdal-dev@lists.osgeo.org>
Subject: Re: [gdal-dev] Newbie Developer Question About Linking


Hello, Martin.  I added this library and tried it, but still no luck
linking.  I was looking at the source code, and it appears that all of the
ODBC stuff is using header files distributed with Visual Studio.  Is there a
system dependency where this should be resolved, or is the dependency
somewhere in one of the other .lib outputs of my gdal build?  Thanks.



On Fri, Sep 5, 2008 at 3:17 PM, Martin Chapman <
mchapman@fortifieddatacom.com> wrote:

>  Joel,
>
>
>
> Did you add "gdal_i.lib" to your linker input property in the project
> settings?
>
>
>
> Martin
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Joel Odom
> *Sent:* Friday, September 05, 2008 1:12 PM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] Newbie Developer Question About Linking
>
>
>
> I'm new to GDAL, though I'm looking forward to using it.  I've compiled
> 1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment with
> the library.  In my application that links to the library I'm getting an
> unresolved reference (pasted below).  I don't have any ODBC experience and
> would appreciate any advice as to how I can resolve this reference (and some
> other ODBC unresolved externals that come after this) so I can compile and
> use OGR.  Thanks much for any help.
>
>
>
>
>
>
>
> Error    3          error LNK2019: unresolved external symbol
> _SQLInstallerError@20 referenced in function "public: int __thiscall
> CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned
> short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z)  gdal.lib
>
>
>
>
>
>
>
>
>
> --
> http://giscoder.blogspot.com/
>



-- 
http://giscoder.blogspot.com/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080905/f84edc7b/attachment-0001.html
From mchapman at fortifieddatacom.com  Fri Sep  5 15:21:10 2008
From: mchapman at fortifieddatacom.com (mchapman@fortifieddatacom.com)
Date: Fri Sep  5 15:27:10 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
In-Reply-To: <d422b4500809051221l12952cdau6d39e7a9d9ccee1e@mail.gmail.com>
References: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
	<006a01c90f8c$0eed98a0$2cc8c9e0$@com><d422b4500809051221l12952cdau6d39e7a9d9ccee1e@mail.gmail.com>
Message-ID: <314607284-1220642822-cardhu_decombobulator_blackberry.rim.net-319952781-@bxe144.bisx.prod.on.blackberry>

Joel, 

Also you could us depends.exe to see what is missing in the gdal.dll

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: "Joel Odom" <joelodom@gmail.com>

Date: Fri, 5 Sep 2008 15:21:20 
To: Martin Chapman<mchapman@fortifieddatacom.com>; <gdal-dev@lists.osgeo.org>
Subject: Re: [gdal-dev] Newbie Developer Question About Linking


Hello, Martin.  I added this library and tried it, but still no luck
linking.  I was looking at the source code, and it appears that all of the
ODBC stuff is using header files distributed with Visual Studio.  Is there a
system dependency where this should be resolved, or is the dependency
somewhere in one of the other .lib outputs of my gdal build?  Thanks.



On Fri, Sep 5, 2008 at 3:17 PM, Martin Chapman <
mchapman@fortifieddatacom.com> wrote:

>  Joel,
>
>
>
> Did you add "gdal_i.lib" to your linker input property in the project
> settings?
>
>
>
> Martin
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Joel Odom
> *Sent:* Friday, September 05, 2008 1:12 PM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] Newbie Developer Question About Linking
>
>
>
> I'm new to GDAL, though I'm looking forward to using it.  I've compiled
> 1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment with
> the library.  In my application that links to the library I'm getting an
> unresolved reference (pasted below).  I don't have any ODBC experience and
> would appreciate any advice as to how I can resolve this reference (and some
> other ODBC unresolved externals that come after this) so I can compile and
> use OGR.  Thanks much for any help.
>
>
>
>
>
>
>
> Error    3          error LNK2019: unresolved external symbol
> _SQLInstallerError@20 referenced in function "public: int __thiscall
> CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned
> short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z)  gdal.lib
>
>
>
>
>
>
>
>
>
> --
> http://giscoder.blogspot.com/
>



-- 
http://giscoder.blogspot.com/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080905/50391860/attachment.html
From warmerdam at pobox.com  Fri Sep  5 15:27:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 15:27:42 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
In-Reply-To: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
References: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
Message-ID: <48C1881B.4030308@pobox.com>

Joel Odom wrote:
> I'm new to GDAL, though I'm looking forward to using it.  I've compiled 
> 1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment 
> with the library.  In my application that links to the library I'm 
> getting an unresolved reference (pasted below).  I don't have any ODBC 
> experience and would appreciate any advice as to how I can resolve this 
> reference (and some other ODBC unresolved externals that come after 
> this) so I can compile and use OGR.  Thanks much for any help.
> 
> 
> 
> Error 3 error LNK2019: unresolved external symbol _SQLInstallerError@20 
> referenced in function "public: int __thiscall 
> CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned 
> short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z) gdal.lib

Joel,

If you link against gdal_i.lib (the dll stub library) the above should
not be an issue.  But if you want to link against the static library
(gdal.lib), then you need to also pull in any supporting libraries.
 From nmake.opt, for ODBC you need:


!IFDEF ODBC_SUPPORTED
ODBCLIB = odbc32.lib odbccp32.lib user32.lib
!ENDIF

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mchapman at fortifieddatacom.com  Fri Sep  5 15:17:36 2008
From: mchapman at fortifieddatacom.com (Martin Chapman)
Date: Fri Sep  5 15:35:48 2008
Subject: [gdal-dev] Newbie Developer Question About Linking
In-Reply-To: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
References: <d422b4500809051211y67bcc8d6jeed2c20e89e46787@mail.gmail.com>
Message-ID: <006a01c90f8c$0eed98a0$2cc8c9e0$@com>

Joel,

 

Did you add "gdal_i.lib" to your linker input property in the project
settings?

 

Martin

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joel Odom
Sent: Friday, September 05, 2008 1:12 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Newbie Developer Question About Linking

 

I'm new to GDAL, though I'm looking forward to using it.  I've compiled
1.5.2 under Microsoft Visual Studio 2008 and am trying to experiment with
the library.  In my application that links to the library I'm getting an
unresolved reference (pasted below).  I don't have any ODBC experience and
would appreciate any advice as to how I can resolve this reference (and some
other ODBC unresolved externals that come after this) so I can compile and
use OGR.  Thanks much for any help.

 

 

 

Error    3          error LNK2019: unresolved external symbol
_SQLInstallerError@20 referenced in function "public: int __thiscall
CPLODBCDriverInstaller::InstallDriver(char const *,char const *,unsigned
short)" (?InstallDriver@CPLODBCDriverInstaller@@QAEHPBD0G@Z)  gdal.lib


 

 

 


-- 
http://giscoder.blogspot.com/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080905/ce9421f7/attachment.html
From bfraser at geoanalytic.com  Fri Sep  5 17:17:34 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Sep  5 17:17:52 2008
Subject: [gdal-dev] inflateCopy  required?
Message-ID: <48C1A1EE.1070803@geoanalytic.com>


I just did a checkout and build of GDAL, and got the following:

   Creating library gdal_i.lib and object gdal_i.exp
cpl_vsil_gzip.obj : error LNK2019: unresolved external symbol _inflateCopy referenced in function "public: class VSIGZipHandle * __thiscall VSIGZipHandle::Duplicate(void)" (?Duplicate@VSIGZipHandle@@QAEPAV1@XZ)
gdal16dev.dll : fatal error LNK1120: 1 unresolved externals

Where can I find the "inflateCopy " function? Zlib?  Should nmake.opt be updated to include a definition to Zlib?

Thanks!
Brent
From even.rouault at mines-paris.org  Fri Sep  5 17:27:51 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  5 17:27:56 2008
Subject: [gdal-dev] inflateCopy  required?
In-Reply-To: <48C1A1EE.1070803@geoanalytic.com>
References: <48C1A1EE.1070803@geoanalytic.com>
Message-ID: <200809052327.52087.even.rouault@mines-paris.org>

Brent,

I'm not clear why it doesn't work for you. Yes, zlib is needed. But the 
internal copy in GDAL has this symbol. (Building works on Windows GDAL 
slavebots working).

Maybe you're linking against an old external zlib that doesn't export this 
symbol ? If that's the case, could you give its version ?

Le Friday 05 September 2008 23:17:34 Brent Fraser, vous avez ?crit?:
> I just did a checkout and build of GDAL, and got the following:
>
>    Creating library gdal_i.lib and object gdal_i.exp
> cpl_vsil_gzip.obj : error LNK2019: unresolved external symbol _inflateCopy
> referenced in function "public: class VSIGZipHandle * __thiscall
> VSIGZipHandle::Duplicate(void)" (?Duplicate@VSIGZipHandle@@QAEPAV1@XZ)
> gdal16dev.dll : fatal error LNK1120: 1 unresolved externals
>
> Where can I find the "inflateCopy " function? Zlib?  Should nmake.opt be
> updated to include a definition to Zlib?
>
> Thanks!
> Brent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Sep  5 17:29:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 17:29:57 2008
Subject: [gdal-dev] inflateCopy  required?
In-Reply-To: <48C1A1EE.1070803@geoanalytic.com>
References: <48C1A1EE.1070803@geoanalytic.com>
Message-ID: <48C1A4C1.7080307@pobox.com>

Brent Fraser wrote:
> 
> I just did a checkout and build of GDAL, and got the following:
> 
>   Creating library gdal_i.lib and object gdal_i.exp
> cpl_vsil_gzip.obj : error LNK2019: unresolved external symbol 
> _inflateCopy referenced in function "public: class VSIGZipHandle * 
> __thiscall VSIGZipHandle::Duplicate(void)" 
> (?Duplicate@VSIGZipHandle@@QAEPAV1@XZ)
> gdal16dev.dll : fatal error LNK1120: 1 unresolved externals
> 
> Where can I find the "inflateCopy " function? Zlib?  Should nmake.opt be 
> updated to include a definition to Zlib?

Brent,

Normally I think the internal copy of zlib (gdal/frmts/zlib) should
provide that function.  Is it possible you are building in an unconventional
fashion or are using an external zlib of a different version?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Sep  5 17:35:34 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  5 17:35:37 2008
Subject: [gdal-dev] inflateCopy  required?
In-Reply-To: <48C1A1EE.1070803@geoanalytic.com>
References: <48C1A1EE.1070803@geoanalytic.com>
Message-ID: <200809052335.34352.even.rouault@mines-paris.org>

After a bit of googling, I see that 
http://mail.python.org/pipermail/python-dev/2006-May/065081.html

You probably must link against zlib < 1.2.X
The question now is : should we support zlib < 1.2.X and workaround the 
missing symbol ? I could test ZLIB_VERNUM. 
InflateCopy is used to make seeking faster in zlib compressed streams. Thus It 
is not strictly necessary and could be workaround, but I'm wondering if we 
want to support zlib < 1.2.X

Le Friday 05 September 2008 23:17:34 Brent Fraser, vous avez ?crit?:
> I just did a checkout and build of GDAL, and got the following:
>
>    Creating library gdal_i.lib and object gdal_i.exp
> cpl_vsil_gzip.obj : error LNK2019: unresolved external symbol _inflateCopy
> referenced in function "public: class VSIGZipHandle * __thiscall
> VSIGZipHandle::Duplicate(void)" (?Duplicate@VSIGZipHandle@@QAEPAV1@XZ)
> gdal16dev.dll : fatal error LNK1120: 1 unresolved externals
>
> Where can I find the "inflateCopy " function? Zlib?  Should nmake.opt be
> updated to include a definition to Zlib?
>
> Thanks!
> Brent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bfraser at geoanalytic.com  Fri Sep  5 17:51:25 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Sep  5 17:52:06 2008
Subject: [gdal-dev] inflateCopy  required?
In-Reply-To: <48C1A4C1.7080307@pobox.com>
References: <48C1A1EE.1070803@geoanalytic.com> <48C1A4C1.7080307@pobox.com>
Message-ID: <48C1A9DD.3030502@geoanalytic.com>



Frank Warmerdam wrote:
> Brent Fraser wrote:
>>
>> I just did a checkout and build of GDAL, and got the following:
>>
>>   Creating library gdal_i.lib and object gdal_i.exp
>> cpl_vsil_gzip.obj : error LNK2019: unresolved external symbol 
>> _inflateCopy referenced in function "public: class VSIGZipHandle * 
>> __thiscall VSIGZipHandle::Duplicate(void)" 
>> (?Duplicate@VSIGZipHandle@@QAEPAV1@XZ)
>> gdal16dev.dll : fatal error LNK1120: 1 unresolved externals
>>
>> Where can I find the "inflateCopy " function? Zlib?  Should nmake.opt 
>> be updated to include a definition to Zlib?
> 
> Brent,
> 
> Normally I think the internal copy of zlib (gdal/frmts/zlib) should
> provide that function.  Is it possible you are building in an 
> unconventional
> fashion or are using an external zlib of a different version?
> 
> Best regards,

All I did was edit nmake.opt for locations of ECW, OGDI, MrSID, HDF4, and PG libs.  Hmm, there are no .obj files in the frmts\zlib dir...  

And the frmts\makefile.vc has:

!IFDEF OGDIDIR
EXTRAFLAGS	=	$(EXTRAFLAGS) -DFRMT_ogdi
!ELSE
EXTRAFLAGS	=	$(EXTRAFLAGS) -DFRMT_zlib
!ENDIF

I guess the zlib functions in my ogdi build are too old.  I'll look into that...

Thanks!
Brent
From warmerdam at pobox.com  Fri Sep  5 18:00:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  5 18:00:54 2008
Subject: [gdal-dev] inflateCopy  required?
In-Reply-To: <48C1A9DD.3030502@geoanalytic.com>
References: <48C1A1EE.1070803@geoanalytic.com> <48C1A4C1.7080307@pobox.com>
	<48C1A9DD.3030502@geoanalytic.com>
Message-ID: <48C1AC02.4040107@pobox.com>

Brent Fraser wrote:
  > I guess the zlib functions in my ogdi build are too old.  I'll look into
> that...

Brent,

Ah yes, that is quite likely.  You might try commenting out the OGDI
specific logic about zlib in frmts/makefile.vc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From richard.greenwood at gmail.com  Fri Sep  5 18:46:25 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Fri Sep  5 18:46:28 2008
Subject: [gdal-dev] gdal in ESRI products
In-Reply-To: <fc.004c4d1938a699d63b9aca000df20351.38a69b4d@umit.maine.edu>
References: <ae9185aa0809041737u203deeadqd01f002a91ed0373@mail.gmail.com>
	<fc.004c4d1938a699d63b9aca000df20351.38a69b4d@umit.maine.edu>
Message-ID: <ae9185aa0809051546n55dccaaco74bdbc3035a8f518@mail.gmail.com>

Thanks everyone for all the info. I had already planned to start my
presentation of OSGEO tools with GDAL because it's one of my personal
favourites,  and might be one of the most useful to ESRItes also. But
it will be even better to able to introduce GDAL as a member of both
the OSGEO and ESRI families.

Rich


On Fri, Sep 5, 2008 at 1:15 PM, Kenton Williams
<Kenton_Williams@umit.maine.edu> wrote:
> Currently, the ArcGIS Explorer E2 product (free Google Earth style program) is using GDAL as well.  It's in the program files folder for the installed application.
>
> Kenton Williams
> GIS Analyst / Tech Lead
> Penobscot Bay Media, LLC
> Camden, ME
> http://www.penbaymedia.com
>
>



-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com
From ari.jolma at tkk.fi  Sat Sep  6 08:22:47 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Sep  6 08:22:53 2008
Subject: [gdal-dev] Clipping shapefiles
In-Reply-To: <946ed14e0809031955p25d3c4d6k52199b255bef3f39@mail.gmail.com>
References: <946ed14e0809031955p25d3c4d6k52199b255bef3f39@mail.gmail.com>
Message-ID: <48C27617.6040405@tkk.fi>

Matthew Huck kirjoitti:
>   Hi,
>   
> I've got a reasonably large shapefile that I wish to break down
> into areas that match the topographic maps in NZMG. I've got a
> python script that creates a shapefile with each topomap as a
> polygon in it (and I can create a shapefile per topo map too if
> required). What I can't work out how to do is to clip my master
> shapefile by the smaller shapefiles. I've seen ideas of copying
> across the features if they intersect with the clipping box, but
> the data is contour lines so I want to "cut" the contour lines at
> the boundry of the clipping boxes.  Any ideas on the best way to
> do it, I can get MapWindow to do it (sometimes, but it crashes
> frequently).

I would use the GEOS function Intersection to clip to the box. Maybe it 
would be easiest to import the data into PostGIS and do it there. It 
wouldn't be too hard to write a GDAL script for the task either.

I did a similar job with road data of whole Finland in PostGIS and it 
took a while but there were no problems due to the clipping.

Regards,

Ari


From warmerdam at pobox.com  Sat Sep  6 14:42:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Sep  6 14:42:45 2008
Subject: [gdal-dev] SWIG: GetHistogram(), etc
Message-ID: <48C2CEFF.2020503@pobox.com>

Folks,

I have done a bunch of work on http://trac.osgeo.org/gdal/ticket/2477
to get GetHistogram() working in the python bindings.  That should now
be fixed.

I also added the GetDefaultHistogram() and SetHistogram() methods.  This
email is mostly a notice to all the SWIG maintainers that some attention
may be required for them on these new methods in Band.i.

GetDefaultHistogram() now works in Python, but I suspect other bindings
may need to do some stuff to get it working.

The SetDefaultHistogram() method is pretty simple, but requires passing
a variable sized array so some language bindings will likely need to
work on this.  Currently it is not implemented for Python - Howard -
perhaps you could take a look or hold my hand through it?

Note, all works is in trunk. I'm not inclined to backport this work.

I have also added a python test script (autotest/gcore/histogram.py)
where I'm accumulating testing of the histogram interface.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at tkk.fi  Sun Sep  7 09:36:52 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sun Sep  7 09:36:56 2008
Subject: [gdal-dev] SWIG: GetHistogram(), etc
In-Reply-To: <48C2CEFF.2020503@pobox.com>
References: <48C2CEFF.2020503@pobox.com>
Message-ID: <48C3D8F4.4030908@tkk.fi>

Frank Warmerdam kirjoitti:
> Folks,
>
> I have done a bunch of work on http://trac.osgeo.org/gdal/ticket/2477
> to get GetHistogram() working in the python bindings.  That should now
> be fixed.

GetHistogram was already working in Perl.

>
> I also added the GetDefaultHistogram() and SetHistogram() methods.  This
> email is mostly a notice to all the SWIG maintainers that some attention
> may be required for them on these new methods in Band.i.

I'm working on these.

In addition, I found also new Polygonize method! That's great since I'm 
going to need one soon.

Ari

>
> GetDefaultHistogram() now works in Python, but I suspect other bindings
> may need to do some stuff to get it working.
>
> The SetDefaultHistogram() method is pretty simple, but requires passing
> a variable sized array so some language bindings will likely need to
> work on this.  Currently it is not implemented for Python - Howard -
> perhaps you could take a look or hold my hand through it?
>
> Note, all works is in trunk. I'm not inclined to backport this work.
>
> I have also added a python test script (autotest/gcore/histogram.py)
> where I'm accumulating testing of the histogram interface.
>
> Best regards,


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From ari.jolma at tkk.fi  Sun Sep  7 10:42:57 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sun Sep  7 10:43:05 2008
Subject: [gdal-dev] Polygonize
In-Reply-To: <48C3D8F4.4030908@tkk.fi>
References: <48C2CEFF.2020503@pobox.com> <48C3D8F4.4030908@tkk.fi>
Message-ID: <48C3E871.1000202@tkk.fi>

Ari Jolma kirjoitti:
> In addition, I found also new Polygonize method! That's great since 
> I'm going to need one soon.
>

Hmm, seems to need much debugging still. Lots of warnings and lots of 
polygons with two points.

Is the code in polygonize.cpp based on a published algorithm?

Regards,

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From warmerdam at pobox.com  Sun Sep  7 10:53:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Sep  7 10:53:53 2008
Subject: [gdal-dev] Re: Polygonize
In-Reply-To: <48C3E871.1000202@tkk.fi>
References: <48C2CEFF.2020503@pobox.com> <48C3D8F4.4030908@tkk.fi>
	<48C3E871.1000202@tkk.fi>
Message-ID: <48C3EAF0.9070806@pobox.com>

Ari Jolma wrote:
> Ari Jolma kirjoitti:
>> In addition, I found also new Polygonize method! That's great since 
>> I'm going to need one soon.
>>
> 
> Hmm, seems to need much debugging still. Lots of warnings and lots of 
> polygons with two points.
> 
> Is the code in polygonize.cpp based on a published algorithm?

Ari,

It is not based on a published algorithm, and it does still need some work
before it is ready for prime time (though it works well on my original
contrived test image!)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Sep  7 21:32:50 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Sep  7 21:33:01 2008
Subject: [gdal-dev] Algorithm Development
Message-ID: <48C480C2.8070005@pobox.com>

Folks,

Based on a bit of duplication between Ari and I, I thought it might be
helpful for me to summarize a bit of the work I have underway.  For clients
I am developing:

- Support for blend cutlines in the warper.
- An algorithm for computing raster proximity maps.
- An algorithm for interpolation in regions of a raster.
- An algorithm for converting raster images to vector polygon layers.
- An algorithm for filtering small polygons out of a raster layer (a
   sieve filter).
- Improving the support different geometry variations in the OGR Oracle driver

If anyone has specific questions or suggestions about these it might
make sense to contact me.  A significant portion of the above is already
done to some degree, and some of it is available in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From schut at sarvision.nl  Mon Sep  8 05:31:46 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Sep  8 05:31:49 2008
Subject: [gdal-dev] terrasar-x driver swaps gcp lon/lat
Message-ID: <48C4F102.9010005@sarvision.nl>

FYI,

the terrasar-x driver assigned the lat of a gcp as its x coordinate, and 
lon as y, which should obviously by lat -> y and lon -> x. I have 
created a ticket 2565 <http://trac.osgeo.org/gdal/ticket/2565> which 
includes a patch.

Cheers,
VS.
From philippe at cowpig.ca  Mon Sep  8 07:29:23 2008
From: philippe at cowpig.ca (Philippe Vachon)
Date: Mon Sep  8 07:50:56 2008
Subject: [gdal-dev] terrasar-x driver swaps gcp lon/lat
In-Reply-To: <48C4F102.9010005@sarvision.nl>
References: <48C4F102.9010005@sarvision.nl>
Message-ID: <20080908112923.GA16393@cowpig.ca>

Hi Vincent,

I'll fix this one ASAP, don't know how that one got past QA. ;-)

Cheers,
Phil

On Mon, Sep 08, 2008 at 11:31:46AM +0200, Vincent Schut wrote:
> FYI,
> 
> the terrasar-x driver assigned the lat of a gcp as its x coordinate, and 
> lon as y, which should obviously by lat -> y and lon -> x. I have 
> created a ticket 2565 <http://trac.osgeo.org/gdal/ticket/2565> which 
> includes a patch.
> 
> Cheers,
> VS.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From antonio.valentino at tiscali.it  Mon Sep  8 12:26:40 2008
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Sep  8 12:27:12 2008
Subject: [gdal-dev] module of a complex dataset
In-Reply-To: <48BD525E.1040904@pobox.com>
References: <20080902131055.7e7d7083@valentinows> <48BD3D24.6070908@pobox.com>
	<20080902161218.699bfd19@valentinows> <48BD525E.1040904@pobox.com>
Message-ID: <20080908182640.3187c5f1@valentinows>

Il giorno Tue, 02 Sep 2008 10:49:02 -0400
Frank Warmerdam <warmerdam@pobox.com> ha scritto:

> Antonio Valentino wrote:
> > I hoped there was a way to use derived bands described in
> > http://www.gdal.org/gdal_vrttut.html
> > 
> > <VRTRasterBand dataType="Float32" band="1"
> > subClass="VRTDerivedRasterBand">>
> >   <Description>Magnitude</Description>
> >   <PixelFunctionType>MyFirstFunction</PixelFunctionType>
> >   <SourceTransferType>"CFloat64"</SourceTransferType>
> > 
> > ... but is seems that this approach requires C++ coding
> 
> Antonio,
> 
> Ah, I hadn't thought about that approach, but indeed it still
> requires C++ coding.
> 
> >> or the commandline utilities. But I have added a small sample
> >> script doing this with numpy and python if you would be interested
> >> in working from that.
> >>
> >>    http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/magphase.py
> > 
> > thank you Frank.
> > Right now I'm using a similar python script:
> 
> Ah, well you are considerably ahead of me in sophistication
> here already.
> 
> > I think that it would be nice to have a base set of *PixelFunctions*
> > (mod, phase, real, imag, sum, diff, etc.) bundled with the GDAL
> > library in order to allow the user to cook its own virtual datasets
> > and then use standard GDAL tools for further processing.
> 
> This is a plausible idea, but it is not entirely obvious what would
> be sufficiently useful to justify inclusion.  A carefully crafted
> patch, including updates to docs, in this direction would likely be
> well received.

Hi Frank,
please find attached the patch against svn r15340 and a small test
program (using gdal_translate).
The patch provides 6 pixel functions:

- "module": extract module from complex datasets
- "phase": extract phase from complex datasets
- "real": extract real part from complex datasets (OK this is redundant)
- "imag": extract imaginary part from complex datasets
- "sum": sum 2 or more datasets
- "diff": computes the difference between 2 datasets (dataset1-dataset2)

and a function for registering them all:

GDALRegisterDefaultPixelFunc();

to be used at the beginning of GDAL utilities code just like
GDALAllRegister:

--- apps/gdal_translate.cpp	(revisione 15340)
+++ apps/gdal_translate.cpp	(copia locale)
@@ -133,6 +133,7 @@
 /*      command
options.                                                */ /*
-------------------------------------------------------------------- */
GDALAllRegister();
+    GDALRegisterDefaultPixelFunc();
     argc = GDALGeneralCmdLineProcessor( argc, &argv, 0 );
     if( argc < 1 )
         exit( -argc );

Note that I didn't updated bindings related code.

Virtual files in the test directory could be used as examples in the
vrt tutorial if you like.

Best regards

-- 
Antonio Valentino
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pixfun-patch-20080908.tar.gz
Type: application/x-gzip
Size: 30248 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080908/e7f19fe6/pixfun-patch-20080908.tar-0001.gz
From cryan at csse.com.au  Mon Sep  8 22:59:54 2008
From: cryan at csse.com.au (Fodder)
Date: Mon Sep  8 22:59:57 2008
Subject: [Gdal-dev] Algorithm Development
In-Reply-To: <48C480C2.8070005@pobox.com>
References: <48C480C2.8070005@pobox.com>
Message-ID: <19385107.post@talk.nabble.com>




Frank Warmerdam-2 wrote:
> 
> 
> - An algorithm for interpolation in regions of a raster.
> 
> 

Hi Frank,

Happy to hear about your research. I'm interested in the interpolation in
regions of a raster algorithm. In particular:
- What interpolation methods with be supported?
- What vector sources will be supported (if any) (points only, or polyline
polygon etc)?
- Will it be incorporated in Gdal_Grid?
- When you say regions, do you mean vector polygons or raster zones?

Cheers,
Fodder
-- 
View this message in context: http://www.nabble.com/Algorithm-Development-tp19364604p19385107.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Mon Sep  8 23:22:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep  8 23:22:46 2008
Subject: [Gdal-dev] Algorithm Development
In-Reply-To: <19385107.post@talk.nabble.com>
References: <48C480C2.8070005@pobox.com> <19385107.post@talk.nabble.com>
Message-ID: <48C5EBE3.90505@pobox.com>

Fodder wrote:
> 
> 
> Frank Warmerdam-2 wrote:
>>
>> - An algorithm for interpolation in regions of a raster.
>>
>>
> 
> Hi Frank,
> 
> Happy to hear about your research. I'm interested in the interpolation in
> regions of a raster algorithm. In particular:
> - What interpolation methods with be supported?

Fodder,

A simple "four quadrant inverse distance" interpolation is used.  That is,
I find the closest valid pixel for each of the four quadrants and then
mix them based on inverse distance weighting.

Then I apply some number of 3x3 average filtering in the interpolated areas
to smooth out various artifacts somewhat.

While this approach has a number of problems, I feel it is suitable for
use in a variety of circumstances, including sparse data (such as might
be the result of burning a bunch of known sample points into a raster),
holes in data (such as SRTM or interferometry DEM holes), or to interpolate
in data after burning contours into a raster.

This is in contrast to approaches such as the spline interpolation in
GRASS which produces (presumably) superior results when interpolating in
modest sized holes in rasters but that does not scale well to sparse data
or to large empty regions like with contours.

> - What vector sources will be supported (if any) (points only, or polyline
> polygon etc)?

The fill algorithm does not directly use vector data.  If you want to produce
raster data by interpolating from vectors you would need to first use
gdal_rasterize to turn the vectors into a raster, and then use the fill
program/functions to interpolate in the holes.  I believe someone
(Andrey? Even?) has been improving gdal_rasterize to support additional
data types.

> - Will it be incorporated in Gdal_Grid?

No.  I'm only moderately familiar with gdal_grid but my understanding
is that it does not scale particularly well to handling huge numbers of
points to interpolate from.  But generally speaking gdal_grid will still
be much superior for interpolating reasonable amounts of point data
to build a raster.

> - When you say regions, do you mean vector polygons or raster zones?

Raster zones.

Note that this algorithm is already in trunk as the function
GDALFillNodata().  However, I've had some problems with the post
fill smoothing filtering and haven't really finished cleaning things
up and documenting them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Tue Sep  9 00:08:35 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Tue Sep  9 00:08:37 2008
Subject: =?utf-8?B?UmU6IFtHZGFsLWRldl0gQWxnb3JpdGhtIERldmVsb3BtZW50?=
Message-ID: <20080909040835.11171.qmail@s466.sureserver.com>

Frank, Fodder,

There is a nice open source implementation of interpolation on TerraLib.org [1] that takes any vector and produces a raster based on nearest neighbor, average nearest neighbor, distance weigh average nearest neighbor, box interpolation and average box interpolation.

Best regards,

Ivan

[1] http://terralib.org/html/v320/html/class_te_interpolation_algorithms.html

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  Subject: Re: [Gdal-dev] Algorithm Development
>  Sent: Sep 09 '08 03:22
>  
>  Fodder wrote:
>  >
>  >
>  > Frank Warmerdam-2 wrote:
>  >>
>  >> - An algorithm for interpolation in regions of a raster.
>  >>
>  >>
>  >
>  > Hi Frank,
>  >
>  > Happy to hear about your research. I'm interested in the interpolation in
>  > regions of a raster algorithm. In particular:
>  > - What interpolation methods with be supported?
>  
>  Fodder,
>  
>  A simple "four quadrant inverse distance" interpolation is used.  That is,
>  I find the closest valid pixel for each of the four quadrants and then
>  mix them based on inverse distance weighting.
>  
>  Then I apply some number of 3x3 average filtering in the interpolated areas
>  to smooth out various artifacts somewhat.
>  
>  While this approach has a number of problems, I feel it is suitable for
>  use in a variety of circumstances, including sparse data (such as might
>  be the result of burning a bunch of known sample points into a raster),
>  holes in data (such as SRTM or interferometry DEM holes), or to interpolate
>  in data after burning contours into a raster.
>  
>  This is in contrast to approaches such as the spline interpolation in
>  GRASS which produces (presumably) superior results when interpolating in
>  modest sized holes in rasters but that does not scale well to sparse data
>  or to large empty regions like with contours.
>  
>  > - What vector sources will be supported (if any) (points only, or polyline
>  > polygon etc)?
>  
>  The fill algorithm does not directly use vector data.  If you want to produce
>  raster data by interpolating from vectors you would need to first use
>  gdal_rasterize to turn the vectors into a raster, and then use the fill
>  program/functions to interpolate in the holes.  I believe someone
>  (Andrey? Even?) has been improving gdal_rasterize to support additional
>  data types.
>  
>  > - Will it be incorporated in Gdal_Grid?
>  
>  No.  I'm only moderately familiar with gdal_grid but my understanding
>  is that it does not scale particularly well to handling huge numbers of
>  points to interpolate from.  But generally speaking gdal_grid will still
>  be much superior for interpolating reasonable amounts of point data
>  to build a raster.
>  
>  > - When you say regions, do you mean vector polygons or raster zones?
>  
>  Raster zones.
>  
>  Note that this algorithm is already in trunk as the function
>  GDALFillNodata().  However, I've had some problems with the post
>  fill smoothing filtering and haven't really finished cleaning things
>  up and documenting them.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | Geospatial Programmer for Rent
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From lran at unc.edu  Tue Sep  9 11:57:22 2008
From: lran at unc.edu (Limei Ran)
Date: Tue Sep  9 11:58:03 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
 sphere to NAD83 shapefile
Message-ID: <48C69CE2.9020502@unc.edu>

Hi:

I am using ogr2ogr to project a shapefile defined in a sphere to NAD83.  
My command is like the following:

ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 
+x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs " -s_srs 
"+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 
+lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp

Could you tell me which datum transformation method is used during 
projecting?  In arcGIS there are many selections such as geocentric 
method, NADCON method and others.

Thank you,

Limei
From warmerdam at pobox.com  Tue Sep  9 12:18:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  9 12:19:50 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C69CE2.9020502@unc.edu>
References: <48C69CE2.9020502@unc.edu>
Message-ID: <48C6A1F2.9050400@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I am using ogr2ogr to project a shapefile defined in a sphere to NAD83.  
> My command is like the following:
> 
> ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 
> +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs " -s_srs 
> "+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 
> +lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp
> 

Limei,

You have not provided a datum definition for the source coordinate
system, only an ellipsoid definition.

If you are using PROJ 4.6.0 or newer no datum transformation at all
will be applied.  The LCC coordinates will be reprojected to lat/long
on the indicated ellipsoid, and then those lat/long values will
projected into AEA on the NAD83 datum with no attempt to do any
"change of ellipsoid" or datum shift between the LCC and AEA geographic
coordinate system.

If you are using anything older than PROJ 4.6.0, there will be a
change of ellipsoid applied (which will be quite substantial since the
LCC is on a sphere) implemented by converting from lat/long on the
LCC sphere, to geocentric coordinates, and then from geocentric coordinates
to lat/long on the AEA ellipsoid.  This will result in large changes in
latitude.

So, basically, the approach used depends on the software version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From halligan.kerry at gmail.com  Tue Sep  9 12:30:06 2008
From: halligan.kerry at gmail.com (Kerry Halligan)
Date: Tue Sep  9 12:30:08 2008
Subject: [gdal-dev] problem with ERDAS Imagine files in StatePlane projection
Message-ID: <63c145660809090930r71804701l5dc2dbc2665f83c0@mail.gmail.com>

I am using GDAL with C# bindings from gdal_csharp.dll and reading the
projection information from an ERDAS Imagine file in Stateplane Projection
(EPSG 2263).  GDAL doesn't seem to be able to parse the stateplane
projection information in the Imagine file correctly when writing out as a
GeoTIFF.  My assumption is that ERDAS is using a non standard syntax and
this is preventing a match of the PROJCS tag?  Has anyone encountered this
before?  Any clues or ideas at all would be much appreciated.

Thanks,

Kerry Halligan


The gdalinfo result for this file includes:

Coordinate System is:
PROJCS["NAD83 / New York Long Island",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",41.03333333333333],
    PARAMETER["standard_parallel_2",40.66666666666666],
    PARAMETER["latitude_of_origin",40.16666666666666],
    PARAMETER["central_meridian",-74],
    PARAMETER["false_easting",984250],
    PARAMETER["false_northing",0],
    UNIT["us_survey_feet",0.3048006096012192]]
Origin = (983922.937212173830000,197166.639292352130000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Corner Coordinates:
Upper Left  (  983922.937,  197166.639) ( 74d 0'4.25"W, 40d42'28.27"N)
Lower Left  (  983922.937,  185976.639) ( 74d 0'4.24"W, 40d40'37.70"N)
Upper Right (  992382.937,  197166.639) ( 73d58'14.40"W, 40d42'28.26"N)
Lower Right (  992382.937,  185976.639) ( 73d58'14.44"W, 40d40'37.69"N)
Center      (  988152.937,  191571.639) ( 73d59'9.33"W, 40d41'32.98"N)

If I use dataset.GetProjection() on this file, it returns the projection
string as:

PROJCS["NAD83 / New York Long Island",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 80",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]]
    PROJECTION["Lambert_Conformal_Conic_2SP"]
    PARAMETER["standard_parallel_1",41.03333333333333]
    PARAMETER["standard_parallel_2",40.66666666666666]
    PARAMETER["latitude_of_origin",40.16666666666666]
    PARAMETER["central_meridian",-74],
    PARAMETER["false_easting",984250]
    PARAMETER["false_northing",0],
    UNIT["us_survey_feet",0.3048006096012192]]

What I expected to see for this dataset is:

PROJCS["NAD83 / New York Long Island (ftUS)",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",41.03333333333333],
    PARAMETER["standard_parallel_2",40.66666666666666],
    PARAMETER["latitude_of_origin",40.16666666666666],
    PARAMETER["central_meridian",-74],
    PARAMETER["false_easting",984250.0000000002],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","2263"],
    AXIS["X",EAST],
    AXIS["Y",NORTH]]


If I use the string returned by GetProjection() as the projection
information for an output GeoTIFF from GDAL, the image displays with a large
horizontal offset despite having the same origin coordinates.  It appears
that the PROJCS information is not being handled correctly, so it is just
coming up as Lambert Conformal Conic, but not stateplane New York Long
Island.

If I export the data as a GeoTIFF (not as an Imagine file) from ERDAS, then
the projection information is read in / written out just fine by GDAL.
Based on this, I am assuming that GDAL isn't parsing out the PROJCS portion
of the projection string correctly, likely because ERDAS isn't writing it
correctly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080909/379aaa79/attachment.html
From lran at unc.edu  Tue Sep  9 12:57:30 2008
From: lran at unc.edu (Limei Ran)
Date: Tue Sep  9 12:58:04 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C6A1F2.9050400@pobox.com>
References: <48C69CE2.9020502@unc.edu> <48C6A1F2.9050400@pobox.com>
Message-ID: <48C6AAFA.30509@unc.edu>

Hi Frank:

Thank you for your information.  Is any reason that PROJ4.6. or newer 
does not do any datum transformation when going from LCC Sphere to NAD83 
Albers?
We are using many shapefiles generated in arcGIS, GDAL or by other 
tools.  We want to have the consistent shapefiles.  Could you tell me 
which approach is correct or proper?

You are right about the difference.  We have GDAL1.5.0 compiled with 
PROJ4.5 and GDAL1.5.2  compiled with PROJ4.6.  The projected shapefiles 
using ogr2ogr from the two versions of GDAL do have quite big position 
shiftings.

Thank you,

Limei


Frank Warmerdam wrote:

> Limei Ran wrote:
>
>> Hi:
>>
>> I am using ogr2ogr to project a shapefile defined in a sphere to 
>> NAD83.  My command is like the following:
>>
>> ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 
>> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs 
>> " -s_srs "+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45 
>> +lat_0=40 +lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp
>>
>
> Limei,
>
> You have not provided a datum definition for the source coordinate
> system, only an ellipsoid definition.
>
> If you are using PROJ 4.6.0 or newer no datum transformation at all
> will be applied.  The LCC coordinates will be reprojected to lat/long
> on the indicated ellipsoid, and then those lat/long values will
> projected into AEA on the NAD83 datum with no attempt to do any
> "change of ellipsoid" or datum shift between the LCC and AEA geographic
> coordinate system.
>
> If you are using anything older than PROJ 4.6.0, there will be a
> change of ellipsoid applied (which will be quite substantial since the
> LCC is on a sphere) implemented by converting from lat/long on the
> LCC sphere, to geocentric coordinates, and then from geocentric 
> coordinates
> to lat/long on the AEA ellipsoid.  This will result in large changes in
> latitude.
>
> So, basically, the approach used depends on the software version.
>
> Best regards,


From bclay at ball.com  Tue Sep  9 11:13:56 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Sep  9 13:18:04 2008
Subject: [gdal-dev] negative buffer
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCC3@daytonmsg2k3.AERO.BALL.COM>

I am trying to use GDAL to cluster a group of points.  I am creating a
buffer around the points then testing buffered points for intersection.
I am putting those that intersect into a GeometryCollection then
creating a convexHull to smooth the polygon.

 

All of that works ok but the problem is that the resultant polygon is
larger than is desired because of the buffer used to create the
intersections.

 

I tried to use a negative value with the Geometry Buffer method to
shrink the polygon back down to the proper size but Buffer always
returns a NULL pointer.  I stepped down into the call and it looks like
GEOS is returning a valid geometry but OGR rejects the polygon do to the
number of points being too low.  The initial buffer size is 1.5 Km so
smallest cluster has a minimum spatial diameter of 3 km.  I saw point
counts in the debugger of over 2000 so I am not sure why OGR appears to
reject the geometry that GEOS passed back.  I don't have GEOS compiled
with debug turned on so I could not step into that

 

Is there another way to reduce the size of a polygon or a smarter war to
cluster points?

 

Bruce

 

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080909/195d7655/attachment.html
From warmerdam at pobox.com  Tue Sep  9 13:23:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  9 13:28:10 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C6AAFA.30509@unc.edu>
References: <48C69CE2.9020502@unc.edu> <48C6A1F2.9050400@pobox.com>
	<48C6AAFA.30509@unc.edu>
Message-ID: <48C6B12D.2000108@pobox.com>

Limei Ran wrote:
> Hi Frank:
> 
> Thank you for your information.  Is any reason that PROJ4.6. or newer 
> does not do any datum transformation when going from LCC Sphere to NAD83 
> Albers?
> We are using many shapefiles generated in arcGIS, GDAL or by other 
> tools.  We want to have the consistent shapefiles.  Could you tell me 
> which approach is correct or proper?
> 
> You are right about the difference.  We have GDAL1.5.0 compiled with 
> PROJ4.5 and GDAL1.5.2  compiled with PROJ4.6.  The projected shapefiles 
> using ogr2ogr from the two versions of GDAL do have quite big position 
> shiftings.

Limei,

Generally speaking, when going between "real" datums and these spherical
based projections, the right thing to do is to apply no shift which is why
the default behavior was changed in PROJ 4.6.

But to get consistent overlay, you really need to know quite a bit about
your data.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dan.putler at sauder.ubc.ca  Tue Sep  9 13:27:32 2008
From: dan.putler at sauder.ubc.ca (Dan Putler)
Date: Tue Sep  9 13:28:40 2008
Subject: [gdal-dev] negative buffer
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCC3@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCC3@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <1220981253.6803.17.camel@whitebox>

Hi Bruce,

Could you give a sense of what you want to cluster and what your
objective is with respect to the use of the clustering results? There
are a lot of clustering methods out there, so knowing a bit about what
you want to accomplish would help.

Dan

On Tue, 2008-09-09 at 11:13 -0400, Clay, Bruce wrote:
> I am trying to use GDAL to cluster a group of points.  I am creating a
> buffer around the points then testing buffered points for
> intersection.  I am putting those that intersect into a
> GeometryCollection then creating a convexHull to smooth the polygon.
> 
>  
> 
> All of that works ok but the problem is that the resultant polygon is
> larger than is desired because of the buffer used to create the
> intersections.
> 
>  
> 
> I tried to use a negative value with the Geometry Buffer method to
> shrink the polygon back down to the proper size but Buffer always
> returns a NULL pointer.  I stepped down into the call and it looks
> like GEOS is returning a valid geometry but OGR rejects the polygon do
> to the number of points being too low.  The initial buffer size is 1.5
> Km so smallest cluster has a minimum spatial diameter of 3 km.  I saw
> point counts in the debugger of over 2000 so I am not sure why OGR
> appears to reject the geometry that GEOS passed back.  I don?t have
> GEOS compiled with debug turned on so I could not step into that
> 
>  
> 
> Is there another way to reduce the size of a polygon or a smarter war
> to cluster points?
> 
>  
> 
> Bruce
> 
>  
> 
>  
> 
>  
> 
> 
> 
> This message and any enclosures are intended only for the addressee.  Please  
> notify the sender by email if you are not the intended recipient.  If you are  
> not the intended recipient, you may not use, copy, disclose, or distribute this  
> message or its contents or enclosures to any other person and any such actions  
> may be unlawful.  Ball reserves the right to monitor and review all messages  
> and enclosures sent to or from this email address.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Dan Putler
Sauder School of Business
University of British Columbia

From paar at lenne3d.com  Tue Sep  9 13:29:04 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Tue Sep  9 13:44:21 2008
Subject: [gdal-dev] Out of Office
Message-ID: <333b7ea1073e4fd68ced671c4d4972de@c7a556d236da4bff94d72fc54ac89856>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From lran at unc.edu  Tue Sep  9 13:46:39 2008
From: lran at unc.edu (Limei Ran)
Date: Tue Sep  9 13:47:04 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C6B12D.2000108@pobox.com>
References: <48C69CE2.9020502@unc.edu> <48C6A1F2.9050400@pobox.com>
	<48C6AAFA.30509@unc.edu> <48C6B12D.2000108@pobox.com>
Message-ID: <48C6B67F.1060906@unc.edu>

Hi Frank:

You mentioned that I have not provided a datum definition for the source 
coordinate system, only an ellipsoid definition.   Could you tell me how 
I can provide the datum definition to get the same result from PROJ4.5?

The command I used is:

ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 
+x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs " -s_srs 
"+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 
+lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp

Thank you very much,

Limei

 

>
> Limei,
>
> Generally speaking, when going between "real" datums and these spherical
> based projections, the right thing to do is to apply no shift which is 
> why
> the default behavior was changed in PROJ 4.6.
>
> But to get consistent overlay, you really need to know quite a bit about
> your data.
>
> Best regards,


From john.tull at wildnevada.org  Tue Sep  9 14:09:04 2008
From: john.tull at wildnevada.org (John C. Tull)
Date: Tue Sep  9 14:09:10 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C6B67F.1060906@unc.edu>
References: <48C69CE2.9020502@unc.edu> <48C6A1F2.9050400@pobox.com>
	<48C6AAFA.30509@unc.edu> <48C6B12D.2000108@pobox.com>
	<48C6B67F.1060906@unc.edu>
Message-ID: <BA538464-13D6-4456-BD67-50EE096AA732@me.com>

If your projections have epsg codes, you might use those instead. E.g.:
ogr2ogr -t_srs "EPSG:4326" -s_srs "EPSG:26911" outfile.shp infile.shp

You can check for epsg codes (or their equivalent wkt, proj4, etc.) at http://spatialreference.org 
.

Regards,
John

On Sep 9, 2008, at 10:46 AM, Limei Ran wrote:

> Hi Frank:
>
> You mentioned that I have not provided a datum definition for the  
> source coordinate system, only an ellipsoid definition.   Could you  
> tell me how I can provide the datum definition to get the same  
> result from PROJ4.5?
>
> The command I used is:
>
> ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23  
> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs  
> " -s_srs "+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45  
> +lat_0=40 +lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp
>
> Thank you very much,
>
> Limei
>
>
>>
>> Limei,
>>
>> Generally speaking, when going between "real" datums and these  
>> spherical
>> based projections, the right thing to do is to apply no shift which  
>> is why
>> the default behavior was changed in PROJ 4.6.
>>
>> But to get consistent overlay, you really need to know quite a bit  
>> about
>> your data.
>>
>> Best regards,
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Sep  9 14:57:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep  9 14:59:19 2008
Subject: [gdal-dev] Datum transformation method when projecting from a
	sphere to NAD83 shapefile
In-Reply-To: <48C6B67F.1060906@unc.edu>
References: <48C69CE2.9020502@unc.edu> <48C6A1F2.9050400@pobox.com>
	<48C6AAFA.30509@unc.edu> <48C6B12D.2000108@pobox.com>
	<48C6B67F.1060906@unc.edu>
Message-ID: <48C6C703.8000402@pobox.com>

Limei Ran wrote:
> Hi Frank:
> 
> You mentioned that I have not provided a datum definition for the source 
> coordinate system, only an ellipsoid definition.   Could you tell me how 
> I can provide the datum definition to get the same result from PROJ4.5?
> 
> The command I used is:
> 
> ogr2ogr -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 
> +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs " -s_srs 
> "+proj=lcc +a=6370000.0 +b=6370000.0 +lat_1=33 +lat_2=45 +lat_0=40 
> +lon_0=-97" wrf12km_nc_g152.shp wrf12km_nc.shp

Limei,

I believe adding +towgs84=0,0,0 to the lcc definition would result in
a sphere to ellipsoid conversion being applied.  I will stress that this
is generally *not* what you want to do, though it is possible it might make
sense in your specific situation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From timmichelsen at gmx-topmail.de  Tue Sep  9 16:37:19 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Tue Sep  9 16:37:33 2008
Subject: [gdal-dev] Re: Countour polygons instead of lines
In-Reply-To: <48BDAF6B.90009@tkk.fi>
References: <48BDAF6B.90009@tkk.fi>
Message-ID: <48C6DE7F.30707@gmx-topmail.de>

Hello!

Although your message is already some days old I wanna respond.

> Did you ever want gdal_contour to produce polygons instead of lines?
Yes!

> I made a small Perl program that uses the Perl bindings to GDAL and 
> which converts the lines into polygons. The polygons represent "plates" 
> of equal elevation and thus overlap. The polygons are stored into a new 
> layer in such an order that ordered rendering of them produces a nice 
> visualization. Visualization is my main goal here - I want to get a 
> similar effect as in some weather forecasts. However, transparency does 
> not work as expected in standard viewers because of overlapping 
> polygons. Here's an example created from DEM: 
> http://map.hut.fi/files/misc/contour_polygons.png
> 
> The code is also at http://map.hut.fi/files/misc/
> 
> I found this by googling: 
> http://lists.maptools.org/pipermail/fwtools/2005-November/000199.html
> 
> I wonder what's the current situation. Does GRASS do this?
It seems that GRASS cannot do this in a satisfying way. Or at least it 
appears to be (don't wanna offend any GRASS dev/user).

Here I asked fro something similar:
http://thread.gmane.org/gmane.comp.gis.grass.user/24889

The maps I created with the suggested approach looked exactly as your 
screenshots. The converted vectors didn't follow the countourlines 
smouthly. Instead, the borders retraind the pixel-like raster outline.

Matplotlib and other plotting programs (matlab, IDL) can do this (see 
the examples here: ).
So either
* plotting programs do an inaccurate interpolation
or
* the GRASS approach is too complicated that even experience users don't 
find it.

Kind regards,
Timmie

From mhjeong74 at gmail.com  Wed Sep 10 05:11:02 2008
From: mhjeong74 at gmail.com (Myeong Hun Jeong)
Date: Wed Sep 10 05:11:05 2008
Subject: [gdal-dev] How to merge Tiled images and WMS layer with openlayers?
Message-ID: <6aaec8200809100211y24b8a5afsc14e01b415eda1c@mail.gmail.com>

Dear list.First, I made tiled images(png) with gdal2tiles.py.
For example, python gdal2tiles.py -title "tile" -publishurl
http://192.168.1.134:8089/osgeo/geo/tile/ -nogooglemaps -nokml -v
D:\test\raster\image.tif D:\test\raster\tile --config GDAL_CACHEMAX 120
and I  moved the image files into Tomcat and tested
http://localhost:8089/osgeo/geo/tile/openlayers.html.
It runs well.
Next, I want to add a WMS layer which are being serviced in Geoserver &
Postgis.
So, I changed javascript.

       function init(){
            OpenLayers.DOTS_PER_INCH = 90.714;
            var bounds = new OpenLayers.Bounds(
                 199628.88671875, 396702.2890625,
                 239834.30078125, 431934.58125
            );
            var options = {
                controls: [],
                maxExtent: bounds,
                maxScale: 10,
                minScale: 500000,
                maxResolution: "auto",
                projection: "EPSG:4326",
                units: 'm'
            };

            map = new OpenLayers.Map('map', options);
           //WMS base layer
            var base_wms = new OpenLayers.Layer.WMS(
                "topp:bml_gadm_as_w - Untiled",
                "http://localhost:8888/geoserver/wms",
                {layers: 'topp:bml_gadm_as_w'},
                {singleTile: true, ratio: 1}
            );
            map.addLayer(base_wms);

           // OpenLayers 2.5 TMS driver
            var layer = new OpenLayers.Layer.TMS( "TMS",
                "http://192.168.1.134:8089/osgeo/geo/tile/",
                 {layername: '.', serviceVersion: '.', type:'png'} );
            map.addLayer(layer);

           //WMS river layer
            var river_wms = new OpenLayers.Layer.WMS(
                "topp:bml_rivr_as_w - Untiled",
                "http://localhost:8888/geoserver/wms",
                 {
                    layers: "topp:bml_rivr_as_w",
                    transparent: "true", format: "image/png"},
                {singleTile: true, ratio: 1,minScale:"100000"}
            );
            map.addLayer(river_wms);

            map.addControl(new OpenLayers.Control.PanZoomBar());
            map.addControl(new OpenLayers.Control.Navigation());
            map.addControl(new OpenLayers.Control.Scale($('scale')));
            map.addControl(new OpenLayers.Control.MousePosition({element:
$('location')}));
            map.addControl(new OpenLayers.Control.LayerSwitcher());
            map.zoomToMaxExtent();

But, the problem is that tiled images do not match WMS layer. The tiled
images are aerial photos of the same area.
I don't understand exactly the projection. is this projection problem?
Could you give some advice.

Best regards.
Jeong.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080910/94355c0e/attachment-0001.html
From Robert.Beckwith at delorme.com  Wed Sep 10 10:14:14 2008
From: Robert.Beckwith at delorme.com (Robert Beckwith)
Date: Wed Sep 10 10:14:15 2008
Subject: [gdal-dev] cannot seem to get projection data from an aux.xml file
	correctly.
Message-ID: <36F531EB4BDB014FBC95C2926E8D0BC604673CBB@franklin.earth.delorme.com>

I am using GDALPamDataset::GetProjectionRef() to fetch the definition
string for the dataset.

Then use that to importFromWkt with that definition and then CloneGeoCS
to set up a coordinate transformation I need to use.

This works fine for MrSID files that have a .aux file.

 

But,  When I use the same methods with a MrSID file with an aux.xml file
this does not work.

I am thinking that when I call GetProjectionRef() the string is labeled
LOCAL_CS this in turn ends up failing later down the line.

Especially when trying to CloneGeoCS as no  GEOGCS node exists.

 

I am looking for some help to get this working for aux.xml files. 

 

Thanks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080910/90674252/attachment.html
From Robert.Beckwith at delorme.com  Wed Sep 10 11:52:11 2008
From: Robert.Beckwith at delorme.com (Robert Beckwith)
Date: Wed Sep 10 11:52:14 2008
Subject: [gdal-dev] Failing to parse aux.xml file (was: cannot seem to get
	projection data from an aux.xml file correctly)
Message-ID: <36F531EB4BDB014FBC95C2926E8D0BC604673CEA@franklin.earth.delorme.com>

Looking more in depth it looks like the xml parser is failing to parse
the projection information into the tree.

Ie. the <WKT>

 

Is anyone else having this issue?

 

I have tried two different sets of data.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080910/c7850f60/attachment.html
From paar at lenne3d.com  Wed Sep 10 12:00:32 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Wed Sep 10 12:00:54 2008
Subject: [gdal-dev] Out of Office
Message-ID: <aeee1722c75441e0bac23099768cfe7a@5f38cab2080c469b854e071a241db456>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From warmerdam at pobox.com  Wed Sep 10 12:04:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 10 12:05:19 2008
Subject: [gdal-dev] Failing to parse aux.xml file (was: cannot seem to
	get projection data from an aux.xml file correctly)
In-Reply-To: <36F531EB4BDB014FBC95C2926E8D0BC604673CEA@franklin.earth.delorme.com>
References: <36F531EB4BDB014FBC95C2926E8D0BC604673CEA@franklin.earth.delorme.com>
Message-ID: <48C7F020.60503@pobox.com>

Robert Beckwith wrote:
> Looking more in depth it looks like the xml parser is failing to parse 
> the projection information into the tree.
> 
> Ie. the <WKT>
> 
>  
> 
> Is anyone else having this issue?
> 
>  
> 
> I have tried two different sets of data.

Robert,

I think this might be easier to follow up on if you can provide a
specific dataset we can test with.  Ideally a small .sid + .aux.xml
but if you can't practically offer a .sid then just the .aux.xml would
be worth a try.  Please file the issue as a ticket in trac, and I'll try
to dig into it a bit today.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matthew.huck at gmail.com  Wed Sep 10 15:47:20 2008
From: matthew.huck at gmail.com (Matthew Huck)
Date: Wed Sep 10 15:47:24 2008
Subject: [gdal-dev] Clipping shapefiles
In-Reply-To: <1fef7d9b0809040209r69aa4a8bhc7751d7e551be757@mail.gmail.com>
References: <1fef7d9b0809040209r69aa4a8bhc7751d7e551be757@mail.gmail.com>
Message-ID: <946ed14e0809101247k3f20f594g55fdf78f8813f3d4@mail.gmail.com>

Hi,
  Thanks for that, I seem to have something working now (or so I think), my
shape file is the contours lines for a reasonably hilly area (100Mb), and
I'm clipping it to an area of about 1/12.  The only thing is it's still
running about 17 hours later. Is v.overlay slow or have I done something
wrong, here are my steps:

g.region vect=NZMG_s27
v.in.region output=cutter type=line --overwrite
v.overlay ainput=wellington_contours atype=line binput=cutter output=clipped
operator=and

Thanks in advance

Matthew


On Thu, Sep 4, 2008 at 9:09 PM, Craig Leat <craig.leat@gmail.com> wrote:

> Hi Matthew
>
> Matthew Huck wrote:
> >  Hi,  I've got a reasonably large shapefile that I wish to break down
> > into areas that match the topographic maps in NZMG. I've got a python
> > script that creates a shapefile with each topomap as a polygon in it
> > (and I can create a shapefile per topo map too if required). What I
> > can't work out how to do is to clip my master shapefile by the smaller
> > shapefiles. I've seen ideas of copying across the features if they
> > intersect with the clipping box, but the data is contour lines so I
> > want to "cut" the contour lines at the boundry of the clipping boxes.
> > Any ideas on the best way to do it, I can get MapWindow to do it
> > (sometimes, but it crashes frequently).
>
> I use GRASS for this sort of task. The basic steps are:
>
> 1. Import shape files using v.in.ogr
> 2. Set the region extents (a bounding box for the area of interest)
> using g.region
> 3. Make a vector to be used as a cutter - v.in.region
> 4. Select within the region box and cut on the boundary using v.overlay
>
> It's quite easy to roll these steps into a script and is definitely
> the way to go if you have to do this many times.
>
> Craig
>
> gdal/ogr devs, an ogr2tiles.py would be quite nice.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080911/1eb4d77c/attachment.html
From epatton at nrcan.gc.ca  Thu Sep 11 13:17:46 2008
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Thu Sep 11 13:17:48 2008
Subject: [gdal-dev] Error in libjasper.a during 'make' in gdal 1.5.2:
	relocation R_X86_64_32 against `a local symbol' can not be used
Message-ID: <1715AFFECC318F4995A52EEE622FC301063823@s0-ott-x4.nrn.nrcan.gc.ca>

I've recently compiled and installed proj 4.6.1, geos 3.0.0, and jasper 1.900.1 without any errors.

gdal configure progresses cleanly:

./configure \
--with-libz=internal \
--enable-largefile \
--with-pcraster=internal \
--with-png=internal \
--with-libtiff=internal \
--with-geotiff=internal \
--with-jpeg=internal \
--with-gif=internal \
--with-sqlite3=yes \
--with-jasper=/usr/local/

GDAL is now configured for x86_64-unknown-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              internal
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            yes
  LIBPNG support:            internal
  LIBTIFF support:           internal (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            yes (GeoJP2=yes)
  ECW support:               no
  MrSID support:             no
  GRIB support:              no
  cURL support (wms/wcs/...):no
  PostgreSQL support:        yes
  MySQL support:             no
  Xerces-C support:            no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  PANORAMA GIS support:      no
  INFORMIX DataBlade support:no
  GEOS support:              yes


  Old-gen python          no
  SWIG Bindings:          no

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no

However, make fails with the following error:

/usr/bin/ld: /usr/local/lib/libjasper.a(jas_malloc.o): relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libjasper.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.5.2'
make: *** [check-lib] Error 2

Any ideas on what this error means? If I were to recompile with '-fPIC', what would be the correct command invocation for this? 


Thanks,

~ Eric.


From gaffigan at sfos.uaf.edu  Thu Sep 11 14:36:35 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Thu Sep 11 14:36:37 2008
Subject: [gdal-dev] Error in libjasper.a during 'make' in gdal 1.5.2:   
	relocation R_X86_64_32 against `a local symbol' can not be used
Message-ID: <53765.206.174.44.249.1221158195.squirrel@ssl.sfos.uaf.edu>

Try rebuilding jasper as:
  export CFLAGS="-fPIC"
  ./configure --prefix=/usr/local
  make; make install
  unset CFLAGS

Then rebuild gdal as usual.

On our 64-bit systems we also compile gdal and related libraries (geos,
jasper, etc.) with "-m64" in the compiler flags environment variable
(CFLAGS and CXXFLAGS for jasper and geos/gdal, respectively).  Not sure if
you'll need to do this.

Good luck.

Steve
Data Analyst
Alaska Ocean Observing System


> I've recently compiled and installed proj 4.6.1, geos 3.0.0, and jasper
1.900.1 without any errors.
>
> gdal configure progresses cleanly:
>
> ./configure \
> --with-libz=internal \
> --enable-largefile \
> --with-pcraster=internal \
> --with-png=internal \
> --with-libtiff=internal \
> --with-geotiff=internal \
> --with-jpeg=internal \
> --with-gif=internal \
> --with-sqlite3=yes \
> --with-jasper=/usr/local/
>
> GDAL is now configured for x86_64-unknown-linux-gnu
>
>   Installation directory:    /usr/local
>   C compiler:                gcc -g -O2
>   C++ compiler:              g++ -g -O2
>
>   LIBTOOL support:           yes
>
>   LIBZ support:              internal
>   GRASS support:             no
>   CFITSIO support:           no
>   PCRaster support:          internal
>   NetCDF support:            yes
>   LIBPNG support:            internal
>   LIBTIFF support:           internal (BigTIFF=yes)
>   LIBGEOTIFF support:        internal
>   LIBJPEG support:           internal
>   LIBGIF support:            internal
>   OGDI support:              no
>   HDF4 support:              no
>   HDF5 support:              no
>   Kakadu support:            no
>   JasPer support:            yes (GeoJP2=yes)
>   ECW support:               no
>   MrSID support:             no
>   GRIB support:              no
>   cURL support (wms/wcs/...):no
>   PostgreSQL support:        yes
>   MySQL support:             no
>   Xerces-C support:            no
>   Expat support:             yes
>   ODBC support:              no
>   PGeo support:              no
>   OCI support:               no
>   SDE support:               no
>   DODS support:              no
>   SQLite support:            yes
>   DWGdirect support          no
>   PANORAMA GIS support:      no
>   INFORMIX DataBlade support:no
>   GEOS support:              yes
>
>
>   Old-gen python          no
>   SWIG Bindings:          no
>
>   Statically link PROJ.4:    no
>   enable OGR building:       yes
>   enable pthread support:    no
>   hide internal symbols:     no
>
> However, make fails with the following error:
>
> /usr/bin/ld: /usr/local/lib/libjasper.a(jas_malloc.o): relocation
R_X86_64_32 against `a local symbol' can not be used when making a shared
> object; recompile with -fPIC
> /usr/local/lib/libjasper.a: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/usr/local/gdal-1.5.2'
> make: *** [check-lib] Error 2
>
> Any ideas on what this error means? If I were to recompile with '-fPIC',
what would be the correct command invocation for this?
>
>
> Thanks,
>
> ~ Eric.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>






From ari.jolma at tkk.fi  Wed Sep 10 01:54:39 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Sep 11 14:40:33 2008
Subject: [gdal-dev] Re: Countour polygons instead of lines
In-Reply-To: <48C6DE7F.30707@gmx-topmail.de>
References: <48BDAF6B.90009@tkk.fi> <48C6DE7F.30707@gmx-topmail.de>
Message-ID: <48C7611F.9070706@tkk.fi>

Tim,

I got a bit swamped into the polygonize thing, which is at the heart of 
what the GRASS people suggested to me. There's now a polygonize method 
in GDAL too (thanks to Frank), with which one can create those 
pixel-edged polygons of reclassed rasters. I haven't yet looked into the 
smoothing much yet but GRASS seems to have some kind of simple smoothing 
built-in into its polygonize method. GEOS has smoothing and simplifying 
methods, even such that keep topology correct, but I don't believe they 
would be easy to use for the complex polygons one gets from the polygonize.

There are some bugs in my contour -> polygon Perl code and it produces 
overlapping polygons so it's far from perfect, but may produce nicer 
results.

Ari

Tim Michelsen kirjoitti:
> Hello!
>
> Although your message is already some days old I wanna respond.
>
>> Did you ever want gdal_contour to produce polygons instead of lines?
> Yes!
>
>> I made a small Perl program that uses the Perl bindings to GDAL and 
>> which converts the lines into polygons. The polygons represent 
>> "plates" of equal elevation and thus overlap. The polygons are stored 
>> into a new layer in such an order that ordered rendering of them 
>> produces a nice visualization. Visualization is my main goal here - I 
>> want to get a similar effect as in some weather forecasts. However, 
>> transparency does not work as expected in standard viewers because of 
>> overlapping polygons. Here's an example created from DEM: 
>> http://map.hut.fi/files/misc/contour_polygons.png
>>
>> The code is also at http://map.hut.fi/files/misc/
>>
>> I found this by googling: 
>> http://lists.maptools.org/pipermail/fwtools/2005-November/000199.html
>>
>> I wonder what's the current situation. Does GRASS do this?
> It seems that GRASS cannot do this in a satisfying way. Or at least it 
> appears to be (don't wanna offend any GRASS dev/user).
>
> Here I asked fro something similar:
> http://thread.gmane.org/gmane.comp.gis.grass.user/24889
>
> The maps I created with the suggested approach looked exactly as your 
> screenshots. The converted vectors didn't follow the countourlines 
> smouthly. Instead, the borders retraind the pixel-like raster outline.
>
> Matplotlib and other plotting programs (matlab, IDL) can do this (see 
> the examples here: ).
> So either
> * plotting programs do an inaccurate interpolation
> or
> * the GRASS approach is too complicated that even experience users 
> don't find it.
>
> Kind regards,
> Timmie


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From a.p.cassinelli at gmail.com  Thu Sep 11 15:19:17 2008
From: a.p.cassinelli at gmail.com (=?ISO-8859-1?Q?Alberto_P=E9rez_Cassinelli?=)
Date: Thu Sep 11 15:19:19 2008
Subject: [gdal-dev] Accessing OGRStyleTable
Message-ID: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>

Hi, I'm getting an OGRStyleTable from an OGRDataSource.
My problem is that I need to access all members of this OGRStyleTable (that
is all style definitions and names) to store them in a data structure of
type string vector, but I don't find any method to do it sequentially (I
can't read one by one because I don't know their names).

In short I need access to OGRStyleTable::m_papszStyleTable.

Anyone know how to do this?
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080911/4a7cd48a/attachment.html
From mateusz at loskot.net  Thu Sep 11 16:33:57 2008
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Thu Sep 11 16:34:05 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>
Message-ID: <48C980B5.9040509@loskot.net>

Alberto P?rez Cassinelli pisze:
> Hi, I'm getting an OGRStyleTable from an OGRDataSource.
> My problem is that I need to access all members of this OGRStyleTable (that
> is all style definitions and names) to store them in a data structure of
> type string vector,

Alberto,

Why you need to access private elements of class.
You should not even know they exist.

> but I don't find any method to do it sequentially (I
> can't read one by one because I don't know their names).

See section 3 for usage example

http://home.gdal.org/projects/opengis/ogr_feature_style_008.html

It explains how to read styles sequentially.

> In short I need access to OGRStyleTable::m_papszStyleTable.
 > Anyone know how to do this?

I suppose rationale of your concept is bad. You should not neet to 
access it.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From dev at geoaspects.com  Thu Sep 11 17:02:48 2008
From: dev at geoaspects.com (Geo Aspects Development)
Date: Thu Sep 11 17:07:55 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <48C980B5.9040509@loskot.net>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>
	<48C980B5.9040509@loskot.net>
Message-ID: <277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>

Sorry, but I have to agree with Alberto - there is actually no way  
(that I have found) of listing the currently loaded styles (for a UI  
dropdown for example), either with the OGRStyleTable or with the  
OGRStyleMgr.
You have to maintain this list yourself.

Plus the OGRStyleTable is not at all private - you actually need one  
before you can use the OGRStyleMgr, and the style strings are passed  
in and out of both classes quite liberally. An OGRStyleMgr- 
 >getAllStyles() method would actually be quite useful, although I'm  
not sure what it should return (a const char ** ?)

Tim


On Sep 11, 2008, at 10:33 PM, Mateusz ?oskot wrote:

> Alberto P?rez Cassinelli pisze:
>> Hi, I'm getting an OGRStyleTable from an OGRDataSource.
>> My problem is that I need to access all members of this  
>> OGRStyleTable (that
>> is all style definitions and names) to store them in a data  
>> structure of
>> type string vector,
>
> Alberto,
>
> Why you need to access private elements of class.
> You should not even know they exist.
>
>> but I don't find any method to do it sequentially (I
>> can't read one by one because I don't know their names).
>
> See section 3 for usage example
>
> http://home.gdal.org/projects/opengis/ogr_feature_style_008.html
>
> It explains how to read styles sequentially.
>
>> In short I need access to OGRStyleTable::m_papszStyleTable.
> > Anyone know how to do this?
>
> I suppose rationale of your concept is bad. You should not neet to  
> access it.
>
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From battisti at actgate.com  Fri Sep 12 05:52:08 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Fri Sep 12 05:52:17 2008
Subject: [gdal-dev] Using a specific earth model
Message-ID: <48CA3BC8.3020901@actgate.com>

Hi list!


I am testing a geotiff file which is in the following coordinate system
(from gdalinfo...):


Coordinate System is:
PROJCS["SIN         E019",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",-82],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]



The earth model used in the "SIN E019" should be an ideal sphere with
radius (m): 6370997, but it is not recognized and the WGS84 is used instead.
This leads to unwanted offsets on the projected image.

Is there a way to tell GDAL to use a specific model when it encounters a
specific coordinate system?



Thanks in advance!

-- 
Andrea Battisti
Applied Coherent Technology Corp.


From mateusz at loskot.net  Fri Sep 12 06:59:35 2008
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Fri Sep 12 06:59:42 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>	<48C980B5.9040509@loskot.net>
	<277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>
Message-ID: <48CA4B97.9090906@loskot.net>

Geo Aspects Development pisze:
> Sorry, but I have to agree with Alberto - there is actually no way (that 
> I have found) of listing the currently loaded styles (for a UI dropdown 
> for example), either with the OGRStyleTable or with the OGRStyleMgr.
> You have to maintain this list yourself.

Tim,

Now I've got what's the problem.
Yes, looks like this part of API is missing or for some reasons not 
planned. Perhaps Daniel or Frank will explain.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From craig.leat at gmail.com  Fri Sep 12 07:10:53 2008
From: craig.leat at gmail.com (Craig Leat)
Date: Fri Sep 12 07:10:56 2008
Subject: [gdal-dev] Clipping shapefiles
Message-ID: <1fef7d9b0809120410w5d89acedvad2e42328062244b@mail.gmail.com>

Hi Matthew

Matthew Huck wrote:
>  Thanks for that, I seem to have something working now (or so I think), my
> shape file is the contours lines for a reasonably hilly area (100Mb), and
> I'm clipping it to an area of about 1/12.  The only thing is it's still
> running about 17 hours later. Is v.overlay slow or have I done something
> wrong, here are my steps:
>
> g.region vect=NZMG_s27
> v.in.region output=cutter type=line --overwrite
> v.overlay ainput=wellington_contours atype=line binput=cutter output=clipped
> operator=and

Welcome to the world of GRASS! There is a GRASS user list [1] and this
is the best place for GRASS questions.

I see that your vector called cutter is of type line. This may be a
problem, because the manual [2] says that the type for binput can only
be area. I would expect v.overlay to complain if it can't handle the
line type and so there seems to be a conflict with the manual. Could
you move this discussion over to the GRASS list and let's see what the
GRASS experts have to say?

Craig

Ps Please indicate your GRASS version. The manual reference below is
for version 6.3.

[1] http://lists.osgeo.org/mailman/listinfo/grass-user
[2] http://grass.itc.it/grass63/manuals/html63_user/v.overlay.html
From paar at lenne3d.com  Fri Sep 12 07:11:20 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Fri Sep 12 07:11:39 2008
Subject: [gdal-dev] Out of Office
Message-ID: <2514b6a9f3ee46a8bb0810b9a2d26ef7@a43b02d70b5e4e63a41cdfcc4dd72bc3>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From a.p.cassinelli at gmail.com  Fri Sep 12 10:31:34 2008
From: a.p.cassinelli at gmail.com (=?ISO-8859-1?Q?Alberto_P=E9rez_Cassinelli?=)
Date: Fri Sep 12 10:31:37 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <48C980B5.9040509@loskot.net>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>
	<48C980B5.9040509@loskot.net>
Message-ID: <e15363e30809120731x34a1993eo4b9a77732fa8c1cd@mail.gmail.com>

Mateusz,

Thanks for your answer. As Tim said, I need to access all members of the
OGRStyleTable for listing them in a GUI.
I think maybe it should exist an interface for getting a list of all style
names and definitions (a char**, for example).
Best regards,

Alberto

2008/9/11 Mateusz ?oskot <mateusz@loskot.net>

> Alberto P?rez Cassinelli pisze:
>
>> Hi, I'm getting an OGRStyleTable from an OGRDataSource.
>> My problem is that I need to access all members of this OGRStyleTable
>> (that
>> is all style definitions and names) to store them in a data structure of
>> type string vector,
>>
>
> Alberto,
>
> Why you need to access private elements of class.
> You should not even know they exist.
>
>  but I don't find any method to do it sequentially (I
>> can't read one by one because I don't know their names).
>>
>
> See section 3 for usage example
>
> http://home.gdal.org/projects/opengis/ogr_feature_style_008.html
>
> It explains how to read styles sequentially.
>
>  In short I need access to OGRStyleTable::m_papszStyleTable.
>>
> > Anyone know how to do this?
>
> I suppose rationale of your concept is bad. You should not neet to access
> it.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>



-- 
Ing. Alberto P?rez Cassinelli
SUR Emprendimientos Tecnol?gicos

Ing. Huergo 1189 (C1007AOL)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 5811-4552 ext. 107
apc@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080912/e1a171ca/attachment.html
From epatton at nrcan.gc.ca  Fri Sep 12 11:14:05 2008
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Fri Sep 12 11:16:44 2008
Subject: [gdal-dev] Error in libjasper.a during 'make' in gdal 1.5.2:
	relocation R_X86_64_32 against `a local symbol' can not be used
References: <53765.206.174.44.249.1221158195.squirrel@ssl.sfos.uaf.edu>
Message-ID: <1715AFFECC318F4995A52EEE622FC301063826@s0-ott-x4.nrn.nrcan.gc.ca>

>Try rebuilding jasper as:
>  export CFLAGS="-fPIC"
>  ./configure --prefix=/usr/local
>  make; make install
>  unset CFLAGS
>
>Then rebuild gdal as usual.
>
>On our 64-bit systems we also compile gdal and related libraries (geos,
>jasper, etc.) with "-m64" in the compiler flags environment variable
>(CFLAGS and CXXFLAGS for jasper and geos/gdal, respectively).  Not sure if
>you'll need to do this.
>
>Good luck.
>
>Steve

Thanks for the hints. I tried rebuilding jasper with CFLAGS="-fPIC -m64" and rebuilding gdal with CXXFLAGS="-fPIC -m64", with no luck; the failed output from the gdal build is below.

/usr/bin/ld: /usr/lib/libstdc++.a(functexcept.o): relocation R_X86_64_32 against `vtable for std::exception' can not be used when making a shared object; recompile with -fPIC
/usr/lib/libstdc++.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.5.2'
make: *** [check-lib] Error 2

Curious how it is prompting recompiling with -fPIC, as I've done that. Any other ideas?

~ Eric.


From warmerdam at pobox.com  Fri Sep 12 12:10:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 12 12:10:43 2008
Subject: [gdal-dev] Using a specific earth model
In-Reply-To: <48CA3BC8.3020901@actgate.com>
References: <48CA3BC8.3020901@actgate.com>
Message-ID: <48CA9468.7020402@pobox.com>

Andrea Battisti wrote:
> Hi list!
> 
> 
> I am testing a geotiff file which is in the following coordinate system
> (from gdalinfo...):
> 
> 
> Coordinate System is:
> PROJCS["SIN         E019",
>     GEOGCS["unnamed",
>         DATUM["unknown",
>             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Sinusoidal"],
>     PARAMETER["longitude_of_center",-82],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> 
> 
> 
> The earth model used in the "SIN E019" should be an ideal sphere with
> radius (m): 6370997, but it is not recognized and the WGS84 is used instead.
> This leads to unwanted offsets on the projected image.
> 
> Is there a way to tell GDAL to use a specific model when it encounters a
> specific coordinate system?

Andrea,

Briefly, no.  There is no way to have GDAL recognise something like
"SIN     E019" and override the SPHEROID.  But there are ways of manually
overriding the coordinate system on a file.  For instance, create a
well known text file of the coordinate system you want to use and doing:

   gdal_translate in.pix -a_srs fixed.wkt out.tif

The above coordinate system was obviously originally from PCI.  Did you
get it directly from a PCIDSK file, or from an intermediate GeoTIFF file?
the gdal/ogr/ogr_srs_pci.cpp code already knows that E019 is a normal
sphere, so I would expect it to get expanded properly if coming from
a PCIDSK file (or anything else like PAux using pci coordinate system
translation).

If it came from a GeoTIFF file, then I would have expected PCI to write
the proper spheroid info into the geotiff file, and for GDAL to pick it
up.  If this is the situation, I'd appreciate seeing a "listgeo" report
on the file.  Listgeo is part of libgeotiff and should be available in
FWTools distributions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gaffigan at sfos.uaf.edu  Fri Sep 12 12:20:16 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Fri Sep 12 12:20:18 2008
Subject: [gdal-dev] Error in libjasper.a during 'make' in gdal 1.5.2:   
	relocation R_X86_64_32 against `a local symbol' can not be      used
Message-ID: <59165.206.174.44.249.1221236416.squirrel@ssl.sfos.uaf.edu>

You want to build jasper with CFLAGS="-fPIC -m64", as you've done.  But
you just want CXXFLAGS="-m64", without "-fPIC", for the gdal build.  Be
sure to unset CFLAGS, or open a new terminal to get a fresh environment,
before gdal build.  Also, might need to run ldconfig after building
jasper, before gdal build.

  # cd jasper src dir
  export CFLAGS="-fPIC -m64"
  ./configure
  make; make install
  unset CFLAGS
  /sbin/ldconfig

  # cd gdal src dir
  export CXXFLAGS="-m64"
  ./configure ...
  make ...

Steve


>>Try rebuilding jasper as:
>>  export CFLAGS="-fPIC"
>>  ./configure --prefix=/usr/local
>>  make; make install
>>  unset CFLAGS
>>Then rebuild gdal as usual.
>>On our 64-bit systems we also compile gdal and related libraries (geos,
jasper, etc.) with "-m64" in the compiler flags environment variable
(CFLAGS and CXXFLAGS for jasper and geos/gdal, respectively).  Not sure
>> if
>>you'll need to do this.
>>Good luck.
>>Steve
>
> Thanks for the hints. I tried rebuilding jasper with CFLAGS="-fPIC -m64"
and rebuilding gdal with CXXFLAGS="-fPIC -m64", with no luck; the failed
output from the gdal build is below.
>
> /usr/bin/ld: /usr/lib/libstdc++.a(functexcept.o): relocation R_X86_64_32
against `vtable for std::exception' can not be used when making a shared
object; recompile with -fPIC
> /usr/lib/libstdc++.a: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/usr/local/gdal-1.5.2'
> make: *** [check-lib] Error 2
>
> Curious how it is prompting recompiling with -fPIC, as I've done that.
Any
> other ideas?
>
> ~ Eric.
>
>




From battisti at actgate.com  Fri Sep 12 12:47:39 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Fri Sep 12 12:47:48 2008
Subject: [gdal-dev] Using a specific earth model
In-Reply-To: <48CA9468.7020402@pobox.com>
References: <48CA3BC8.3020901@actgate.com> <48CA9468.7020402@pobox.com>
Message-ID: <48CA9D2B.3040905@actgate.com>



> from a GeoTIFF file, then I would have expected PCI to write
> the proper spheroid info into the geotiff file, and for GDAL to pick it
> up.  If this is the situation, I'd appreciate seeing a "listgeo" report
> on the file.  Listgeo is part of libgeotiff and should be available in
> FWTools distributions.
>


The file is generated by other people and unfortunately I have no
control over it.
I guess some PCI software has been used, I am asking for details.
Does it sounds like there is a missing auxiliary file?


The output of listgeo follows:


Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0               
         -781858.244      5464307.74       0               
      ModelPixelScaleTag (1,3):
         1100             1100             0               
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,17): "SIN         E019"
      GeographicTypeGeoKey (Short,1): User-Defined
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_Sinusoidal
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      ProjFalseEastingGeoKey (Double,1): 0               
      ProjFalseNorthingGeoKey (Double,1): 0               
      ProjCenterLongGeoKey (Double,1): -82             
      End_Of_Keys.
   End_Of_Geotiff.

Projection Method: CT_Sinusoidal
   ProjCenterLongGeoKey: -82.000000 ( 82d 0' 0.00"W)
   ProjFalseEastingGeoKey: 0.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9001/metre (1.000000m)

Corner Coordinates:
Upper Left    ( -781858.244, 5464307.737)  ( 92d45' 9.10"W, 49d18'42.61"N)
Lower Left    ( -781858.244, 4585407.737)  ( 91d21' 0.59"W, 41d24'13.33"N)
Upper Right   (  524941.756, 5464307.737)  ( 74d46'50.61"W, 49d18'42.61"N)
Lower Right   (  524941.756, 4585407.737)  ( 75d43'20.19"W, 41d24'13.33"N)
Center        ( -128458.244, 5024857.737)  ( 83d38'22.15"W, 45d21'32.91"N)




Thanks!

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From warmerdam at pobox.com  Fri Sep 12 14:13:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 12 14:14:34 2008
Subject: [gdal-dev] Using a specific earth model
In-Reply-To: <48CA9D2B.3040905@actgate.com>
References: <48CA3BC8.3020901@actgate.com> <48CA9468.7020402@pobox.com>
	<48CA9D2B.3040905@actgate.com>
Message-ID: <48CAB159.6020808@pobox.com>

Andrea Battisti wrote:
> 
>> from a GeoTIFF file, then I would have expected PCI to write
>> the proper spheroid info into the geotiff file, and for GDAL to pick it
>> up.  If this is the situation, I'd appreciate seeing a "listgeo" report
>> on the file.  Listgeo is part of libgeotiff and should be available in
>> FWTools distributions.
>>
> 
> 
> The file is generated by other people and unfortunately I have no
> control over it.
> I guess some PCI software has been used, I am asking for details.
> Does it sounds like there is a missing auxiliary file?
...
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       GTCitationGeoKey (Ascii,17): "SIN         E019"
>       GeographicTypeGeoKey (Short,1): User-Defined
>       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
>       ProjectedCSTypeGeoKey (Short,1): User-Defined
>       ProjectionGeoKey (Short,1): User-Defined
>       ProjCoordTransGeoKey (Short,1): CT_Sinusoidal
>       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
>       ProjFalseEastingGeoKey (Double,1): 0               
>       ProjFalseNorthingGeoKey (Double,1): 0               
>       ProjCenterLongGeoKey (Double,1): -82             
>       End_Of_Keys.
>    End_Of_Geotiff.

Andrea,

This geotiff file is incomplete and has no earth model information.  It
ought to at least define the spheroid.  It would appear to be written by
the PCI software directly.  While I wrote the PCI GeoTIFF exporter originally
while working there, that's no excuse for them not fixing it after I left!

More seriously, this is an incomplete file, and you would need to use
some manual override mechanism to provide the ellipsoid now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Fri Sep 12 14:28:00 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Sep 12 15:17:17 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have installed gdal 1.5.2 on Windows, trying to test the RADARSAT-2
driver.

When loading RSAT-2 "product.xml", a "SubDataset Selection" dialog box
pops up and asks user to select 1) uncalibrated digital numbers, 2)
Sigma nought calibrated, 3) beta nought calibrated, 4) gamma calibrated.

After selection, I got the error:
	Warning 1: TIFFReadDirectory:Unknown field with tag 34595
(0x8723) encountered
and the "SubDataset Selection" dialog box reappears.

2nd question, is there a way to capture which subDataset that user has
selected? i.e., did he select 1) uncalibrated digital numbers, 2) Sigma
nought calibrated, 3) beta nought calibrated, or 4) gamma calibrated or
all of them?


thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080912/10da00e9/attachment.html
From dmorissette at mapgears.com  Fri Sep 12 15:19:19 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Sep 12 15:20:08 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <48CA4B97.9090906@loskot.net>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>	<48C980B5.9040509@loskot.net>	<277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>
	<48CA4B97.9090906@loskot.net>
Message-ID: <48CAC0B7.5080904@mapgears.com>

Mateusz ?oskot wrote:
> 
> Now I've got what's the problem.
> Yes, looks like this part of API is missing or for some reasons not 
> planned. Perhaps Daniel or Frank will explain.
> 

Style tables were part of the initial design, but were never implemented 
for any driver as far as I know. That's why the API may still be incomplete.

Unless I'm mistaken, so far OGR returns styles only at the feature 
level, so if you plan to use the stock OGR in your app you can probably 
ignore the style table stuff for now.

OTOH, if you have implemented drivers that support style tables then 
you're invited to contribute tickets, patches, or perhaps a RFC 
describing what you consider is missing to the API to make it really useful.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From Shawn.Gong at drdc-rddc.gc.ca  Fri Sep 12 15:28:36 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Sep 12 15:28:30 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

 

rephrase my 2nd question, is there a way to skip the "SubDataset
Selection" dialog, and to load uncalibrated digital numbers by default?

 

thanks, 
Shawn 

 

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gong, Shawn
(Contractor)
Sent: Friday, September 12, 2008 2:28 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal 1.5.2's RADARSAT-2 driver

 

hi list,

I have installed gdal 1.5.2 on Windows, trying to test the RADARSAT-2
driver.

When loading RSAT-2 "product.xml", a "SubDataset Selection" dialog box
pops up and asks user to select 1) uncalibrated digital numbers, 2)
Sigma nought calibrated, 3) beta nought calibrated, 4) gamma calibrated.

After selection, I got the error:

Warning 1: TIFFReadDirectory:Unknown field with tag 34595 (0x8723)
encountered

and the "SubDataset Selection" dialog box reappears.

2nd question, is there a way to capture which subDataset that user has
selected? i.e., did he select 1) uncalibrated digital numbers, 2) Sigma
nought calibrated, 3) beta nought calibrated, or 4) gamma calibrated or
all of them?

thanks,

Shawn

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080912/1afd2423/attachment-0001.html
From warmerdam at pobox.com  Fri Sep 12 15:40:49 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 12 15:41:25 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <48CAC5C1.9030500@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
>  
> 
> rephrase my 2nd question, is there a way to skip the "SubDataset 
> Selection" dialog, and to load uncalibrated digital numbers by default?

Shawn,

I think this may be more of an OpenEV question, than it is a GDAL
question.  You can directly select the uncalibrated numbers by
using the appropriate subdatset name with GDAL.  You can use gdalinfo
to see the subdataset names of a dataset.

> *From:* gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Gong, Shawn 
> (Contractor)
> *Sent:* Friday, September 12, 2008 2:28 PM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] gdal 1.5.2's RADARSAT-2 driver
> 
>  
> 
> hi list,
> 
> I have installed gdal 1.5.2 on Windows, trying to test the RADARSAT-2 
> driver.
> 
> When loading RSAT-2 "product.xml", a "SubDataset Selection" dialog box 
> pops up and asks user to select 1) uncalibrated digital numbers, 2) 
> Sigma nought calibrated, 3) beta nought calibrated, 4) gamma calibrated.
> 
> After selection, I got the error:
> 
> Warning 1: TIFFReadDirectory:Unknown field with tag 34595 (0x8723) 
> encountered
> 
> and the "SubDataset Selection" dialog box reappears.

Hmm, this is odd. Would it be possible to make a dataset demonstrating
this problem available?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From philippe at cowpig.ca  Fri Sep 12 15:41:40 2008
From: philippe at cowpig.ca (Philippe Vachon)
Date: Fri Sep 12 15:41:45 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <20080912194140.GA1407@cowpig.ca>

Hi Shawn,

If you're using GDAL directly, and don't select a subdataset AND the
program you're writing ignores subdatasets, you can just read the
digital numbers without any other work. A hidden misfeature of the RS2
driver.

However, if you're using it with OpenEV or something, it might be
possible to just prepend RADARSAT_2_CALIB:UNCALIB: to the filename. This
will tell the RS2 driver to provide only uncalibrated DNs. However, no
guarantees this will work with OpenEV.

As far as the GeoTIFF error goes, I'll have to delegate that to someone
else -- I have heard reports that there are non-standard GeoTIFF tags in
the production RADARSAT-2 datasets, but I don't know if that's the cause
of the warning you're seeing or not.

Cheers,
Phil

On Fri, Sep 12, 2008 at 03:28:36PM -0400, Gong, Shawn (Contractor) wrote:
>    hi list,
> 
>     
> 
>    rephrase my 2nd question, is there a way to skip the "SubDataset
>    Selection" dialog, and to load uncalibrated digital numbers by default?
> 
>     
> 
>    thanks,
>    Shawn 
> 
>     
> 
>    --------------------------------------------------------------------------
> 
>    From: gdal-dev-bounces@lists.osgeo.org
>    [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gong, Shawn
>    (Contractor)
>    Sent: Friday, September 12, 2008 2:28 PM
>    To: gdal-dev@lists.osgeo.org
>    Subject: [gdal-dev] gdal 1.5.2's RADARSAT-2 driver
> 
>     
> 
>    hi list,
> 
>    I have installed gdal 1.5.2 on Windows, trying to test the RADARSAT-2
>    driver.
> 
>    When loading RSAT-2 "product.xml", a "SubDataset Selection" dialog box
>    pops up and asks user to select 1) uncalibrated digital numbers, 2) Sigma
>    nought calibrated, 3) beta nought calibrated, 4) gamma calibrated.
> 
>    After selection, I got the error:
> 
>    Warning 1: TIFFReadDirectory:Unknown field with tag 34595 (0x8723)
>    encountered
> 
>    and the "SubDataset Selection" dialog box reappears.
> 
>    2nd question, is there a way to capture which subDataset that user has
>    selected? i.e., did he select 1) uncalibrated digital numbers, 2) Sigma
>    nought calibrated, 3) beta nought calibrated, or 4) gamma calibrated or
>    all of them?
> 
>    thanks,
> 
>    Shawn
> 
>     

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Shawn.Gong at drdc-rddc.gc.ca  Fri Sep 12 16:26:51 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Sep 12 16:28:41 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
In-Reply-To: <48CAC5C1.9030500@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca><DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<48CAC5C1.9030500@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1201C3@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Frank,

The error (TIFFReadDirectory:Unknown field with tag 34595 (0x8723)
encountered) only shown on the very first batch of test R-2 images.
The official release R-2 data do not show the error.


thanks,
Shawn


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Friday, September 12, 2008 3:41 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.5.2's RADARSAT-2 driver

Gong, Shawn (Contractor) wrote:
> hi list,
> 
>  
> 
> rephrase my 2nd question, is there a way to skip the "SubDataset 
> Selection" dialog, and to load uncalibrated digital numbers by
default?

Shawn,

I think this may be more of an OpenEV question, than it is a GDAL
question.  You can directly select the uncalibrated numbers by
using the appropriate subdatset name with GDAL.  You can use gdalinfo
to see the subdataset names of a dataset.

> *From:* gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Gong, Shawn 
> (Contractor)
> *Sent:* Friday, September 12, 2008 2:28 PM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] gdal 1.5.2's RADARSAT-2 driver
> 
>  
> 
> hi list,
> 
> I have installed gdal 1.5.2 on Windows, trying to test the RADARSAT-2 
> driver.
> 
> When loading RSAT-2 "product.xml", a "SubDataset Selection" dialog box

> pops up and asks user to select 1) uncalibrated digital numbers, 2) 
> Sigma nought calibrated, 3) beta nought calibrated, 4) gamma
calibrated.
> 
> After selection, I got the error:
> 
> Warning 1: TIFFReadDirectory:Unknown field with tag 34595 (0x8723) 
> encountered
> 
> and the "SubDataset Selection" dialog box reappears.

Hmm, this is odd. Would it be possible to make a dataset demonstrating
this problem available?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri Sep 12 16:40:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 12 16:42:41 2008
Subject: [gdal-dev] gdal 1.5.2's  RADARSAT-2 driver
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1201C3@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201C1@ottawaex02.Ottawa.drdc-rddc.gc.ca><DF1471B5C308B346BF5A2AEA00C5615E1201C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<48CAC5C1.9030500@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E1201C3@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <48CAD3D4.1080600@pobox.com>

Gong, Shawn (Contractor) wrote:
> Frank,
> 
> The error (TIFFReadDirectory:Unknown field with tag 34595 (0x8723)
> encountered) only shown on the very first batch of test R-2 images.
> The official release R-2 data do not show the error.

Shawn,

I'd like to stress this is not an error.  It is a warning.  There are lots
of perfectly legitimate reasons TIFF files have unknown fields in them.
Another question is whether libtiff ought to be so vocal in pointing them
out or not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Fri Sep 12 18:14:35 2008
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Fri Sep 12 18:14:44 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <48CAC0B7.5080904@mapgears.com>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>	<48C980B5.9040509@loskot.net>	<277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>	<48CA4B97.9090906@loskot.net>
	<48CAC0B7.5080904@mapgears.com>
Message-ID: <48CAE9CB.7010601@loskot.net>

Daniel Morissette pisze:
> Mateusz ?oskot wrote:
>>
>> Now I've got what's the problem.
>> Yes, looks like this part of API is missing or for some reasons not 
>> planned. Perhaps Daniel or Frank will explain.
>>
> 
> Style tables were part of the initial design, but were never implemented 
> for any driver as far as I know. That's why the API may still be 
> incomplete.

Daniel,

Thanks for clarifying it. OGR styling stuff is still a new beast to me.

> OTOH, if you have implemented drivers that support style tables then 
> you're invited to contribute tickets, patches, or perhaps a RFC 
> describing what you consider is missing to the API to make it really 
> useful.

Yes, I think it's reasonable approach.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From craig.miller at spatialminds.com  Sat Sep 13 03:21:43 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Sat Sep 13 03:23:23 2008
Subject: [gdal-dev] Topological Union?
In-Reply-To: <084a01c91522$bb007310$31015930$@net>
References: <009201c9095a$824caee0$86e60ca0$@miller@spatialminds.com>	<48B724BB.8060503@loskot.net>	<00a001c9095d$41a63570$c4f2a050$@miller@spatialminds.com>	<48B7286B.70104@loskot.net>
	<48B80D5E.8040302@geoanalytic.com>
	<026f01c909f8$337b0750$9a7115f0$@miller@spatialminds.com>
	<084a01c91522$bb007310$31015930$@net>
Message-ID: <BAY120-DS5CABFD48E7B45A5FAB537F9500@phx.gbl>

I wound up using Spatialite (SQLite + WKB/GEOS support) instead of writing my own code.  It was very fast and easy to setup.  It would make a perfect teaching/learning tool for anyone who wants to learn about SQL and spatial operators.

Craig


-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Friday, August 29, 2008 10:22 AM
To: Craig Miller; Craig Miller
Cc: 'Brent Fraser'; gdal-dev@lists.osgeo.org; 'Brent Fraser'; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Topological Union?

Craig Miller wrote:
> Thanks Brent.  I'm looking for a C/C++ solution.  I'll take a look at 
> the other polygon processing libraries as well as the level of effort 
> in porting JTS Cascaded Unions to Geos... that's a conversation for a 
> different mailing list though.

Craig,

I agree with Brent that performance is/may not be very impressive.
In OGR, this is mostly caused by a need to convert OGRGeometry type to GEOS geometry type [1] - allocating & copying coordinates data is expansive.

However, if you are developing your own solution in C++, you can avoid this by defining your geometry in terms of interface of geos::geom::Geometry or - following design pattern called adapter, you can provide a thin wrapper on your geometry type that will make it accessible to GEOS engine. This way you should get rid of major bottleneck of OGR<->GEOS interoperability.

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrgeometry.cpp#L2105

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net Charter Member of OSGeo, http://osgeo.org

From dev at geoaspects.com  Sat Sep 13 07:07:39 2008
From: dev at geoaspects.com (Geo Aspects Development)
Date: Sat Sep 13 07:07:43 2008
Subject: [gdal-dev] Accessing OGRStyleTable
In-Reply-To: <48CAE9CB.7010601@loskot.net>
References: <e15363e30809111219j6546fcb0laf82acebfcc52041@mail.gmail.com>	<48C980B5.9040509@loskot.net>	<277062AB-BE3B-47DB-A240-D2875A9A682E@geoaspects.com>	<48CA4B97.9090906@loskot.net>
	<48CAC0B7.5080904@mapgears.com> <48CAE9CB.7010601@loskot.net>
Message-ID: <6C7B5948-3964-4C29-BAE3-32DD9CD1EB5D@geoaspects.com>

FWIW, here are the code fragments I added (to my copy of GDAL 1.4.0),  
though I have subsequently changed my strategy and don't use it any  
longer. This makes it possible to use the styles in a GUI, where you  
can list available styles and have the user select one.

The DataSource/Layer/Feature hierarchy would definitely be useful (to  
me!) But, long-term, wouldn't a more standards-based system (including  
GDAL and OGR) like SLD be a better idea?

regards
Tim



*******************************************************************************************************



In ogrfeaturestyle.cpp:

/*  
= 
= 
======================================================================  
*/
/*  
OGRStyleMgr 
                                                               */
/*  
= 
= 
======================================================================  
*/

...

/ 
****************************************************************************/
/*      const char  
**OGRStyleMgr::GetStyleCount()                           */
/ 
*                                                                          */
/ 
****************************************************************************/
int OGRStyleMgr::GetStyleCount()
{
     if (m_poDataSetStyleTable)
     {
         return  m_poDataSetStyleTable->Count();
     }
     return NULL;
}

/ 
****************************************************************************/
/*      const char  
**OGRStyleMgr::GetStyleNames()                           */
/ 
*                                                                          */
/ 
****************************************************************************/
char **OGRStyleMgr::GetStyleNames()
{
     if (m_poDataSetStyleTable)
     {
         return  m_poDataSetStyleTable->GetStyleNames();
     }
     return NULL;
}

...

/*  
= 
= 
======================================================================  
*/
/*                 
OGRStyleTable                                             */
/*     Object Used to manage and store a  
styletable                         */
/*  
= 
= 
======================================================================  
*/

...

/ 
****************************************************************************/
/*             int  
OGRStyleTable::Count()                                   */
/ 
*                                                                          */
/*   return the number of styles in the table otherwise return  
-1           */
/ 
****************************************************************************/
int OGRStyleTable::Count()
{
     return (m_papszStyleTable == NULL) ? -1 :  
CSLCount(m_papszStyleTable);
}

/ 
****************************************************************************/
/*             int  
OGRStyleTable::GetStyleNames()                           */
/ 
*                                                                          */
/*   return a index of the style in the table otherwise return  
-1           */
/ 
****************************************************************************/
char **OGRStyleTable::GetStyleNames()
{
     static char **pszNameList = NULL;
     const char *pszName = NULL;
     const char *pszStyleStringBegin = NULL;
     char *pszTmp;

     if (pszNameList)
         CSLDestroy(pszNameList);

     pszNameList = NULL;
     for (int i=0; i<Count(); i++)
     {
         pszStyleStringBegin = strstr(m_papszStyleTable[i],":");

         if (pszStyleStringBegin)
         {
             pszName = CPLStrdup(m_papszStyleTable[i]);
             pszTmp = strstr(pszName,":");
             if (pszTmp)
             {
                 pszTmp[0] = '\0';
                 pszNameList = CSLAddString(pszNameList, pszName);
             }
         }
     }

     return pszNameList;
}

...


In ogr_featurestyle.h:

class CPL_DLL OGRStyleMgr
{
...

     int GetStyleCount();
     char **GetStyleNames();

...
};

class CPL_DLL OGRStyleTable
{
...
     int   Count();
     char **GetStyleNames();
...
};


*******************************************************************************************************




On Sep 13, 2008, at 12:14 AM, Mateusz ?oskot wrote:

> Daniel Morissette pisze:
>> Mateusz ?oskot wrote:
>>>
>>> Now I've got what's the problem.
>>> Yes, looks like this part of API is missing or for some reasons  
>>> not planned. Perhaps Daniel or Frank will explain.
>>>
>> Style tables were part of the initial design, but were never  
>> implemented for any driver as far as I know. That's why the API may  
>> still be incomplete.
>
> Daniel,
>
> Thanks for clarifying it. OGR styling stuff is still a new beast to  
> me.
>
>> OTOH, if you have implemented drivers that support style tables  
>> then you're invited to contribute tickets, patches, or perhaps a  
>> RFC describing what you consider is missing to the API to make it  
>> really useful.
>
> Yes, I think it's reasonable approach.
>
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hamish_b at yahoo.com  Mon Sep 15 04:26:16 2008
From: hamish_b at yahoo.com (Hamish)
Date: Mon Sep 15 04:29:16 2008
Subject: [gdal-dev] Fw: Re: [GRASS-user] Linking error in photo.2image
Message-ID: <889516.96039.qm@web110004.mail.gq1.yahoo.com>

[fwd from the grass list]

> Glynn wrote:
> > > > It's more likely that some other file also contains a symbol named
> > > > "line". But the only one which I can find is the line() function in
> > > > lib/driver/Polygon.c, and that isn't exported.
> Hamish:
> > > led me to determine that the commit in which the problem is first
> > > seen is r33287 (initial r.external backport).
> > > http://trac.osgeo.org/grass/changeset/33187
> > > 
> > > unfortunately it's a complicated commit.
> Glynn: 
> > In that case, it's almost certainly due to the fact that GDAL exports
> > a variable named "line".
> 
> $ nm /usr/lib/libgdal1.5.0.a | grep ' line'
> 00000000 B line
> 
> ?
>  
> > You might want to report this to the GDAL developers; most of the
> > other variables have names which are unlikely to accidentally
> > conflict, but "line" is likely to be quite a common variable name.
> 
> ok
> 
> > > WRT line being used uninitialized in mark.c, I wonder if line is
> > > global there (and not reset to 0) so that the function can be
> > > reentrant and continue (line++) from where it last left off? (say a
> > > list continuing in a second column)
> > 
> > If that's the case, it can be declared
> > "static", which also solves the lack of initialisation.
> 
> I'll have to play with the module to understand that
> better.
> 
> 
> > Also, bear in mind that i.ortho.photo is "dead" in 7.x. 
> 
> noted.
> 
> 
> Hamish
>
> _______________________________________________
> grass-user mailing list
> grass-user&lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/grass-user



      

From antonioparrotta at gmail.com  Mon Sep 15 05:02:47 2008
From: antonioparrotta at gmail.com (Antonio Parrotta)
Date: Mon Sep 15 05:02:50 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
Message-ID: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>

Hi All,

I'm facing in  strange result using gdaltransform. What I'm doing is to try
to trasform coordinates from WGS84 to Gauss-Boaga:

gdaltransform.exe -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0
+lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m
+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
entering lon and lat
>7,69746 45,106977<enter>
it gives
1342393.88434212 4984915.97865081 -47.0342488819733
doing the same transformation with qgis (same parameters), I have
1397559,446 4995677,02
that is quite near to the target expected also checking out in map.

Do we know the reason of this delta? Do I have to set any other correction
parameter?

appreciate
Antonio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/7181904e/attachment.html
From neteler at osgeo.org  Mon Sep 15 05:35:04 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Mon Sep 15 05:35:06 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
Message-ID: <86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>

On Mon, Sep 15, 2008 at 11:02 AM, Antonio Parrotta
<antonioparrotta@gmail.com> wrote:
> Hi All,
>
> I'm facing in  strange result using gdaltransform. What I'm doing is to try
> to trasform coordinates from WGS84 to Gauss-Boaga:
>
> gdaltransform.exe -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0
> +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m
> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
> entering lon and lat
>>7,69746 45,106977<enter>
> it gives
> 1342393.88434212 4984915.97865081 -47.0342488819733
> doing the same transformation with qgis (same parameters), I have
> 1397559,446 4995677,02
> that is quite near to the target expected also checking out in map.
>
> Do we know the reason of this delta? Do I have to set any other correction
> parameter?


Using cs2cs from PROJ4 Rel. 4.6.1, 21 July 2008, I get:

cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
# ---- From Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
# ---- To Coordinate System ----
#Transverse Mercator
#       Cyl, Sph&Ell
# +init=epsg:3003 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
# +no_defs +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
# +ellps=intl +units=m
#--- following specified but NOT used
# +no_defs
7.69746 45.106977
1397556.77      4995679.28 -46.70

Using gdaltransform on Linux (almost current SVN), I get:
gdaltransform -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0 \
  +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m \
  +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
7.69746 45.106977
1397556.76994996 4995679.27916302 -46.6971342787147

which is the same as the cs2cs output.

How old is your gdaltransform.exe and where does it originate from?

Markus
From antonioparrotta at gmail.com  Mon Sep 15 05:44:37 2008
From: antonioparrotta at gmail.com (Antonio Parrotta)
Date: Mon Sep 15 05:44:40 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
	<86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
Message-ID: <93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>

I downloaded the source from http://download.osgeo.org/gdal/gdal152.zip,
built on windows XP with VC2008 with and PROJ4 dll from
http://download.osgeo.org/proj/proj446_win32_bin.zip

any clue

Antonio

2008/9/15 Markus Neteler <neteler@osgeo.org>

> On Mon, Sep 15, 2008 at 11:02 AM, Antonio Parrotta
> <antonioparrotta@gmail.com> wrote:
> > Hi All,
> >
> > I'm facing in  strange result using gdaltransform. What I'm doing is to
> try
> > to trasform coordinates from WGS84 to Gauss-Boaga:
> >
> > gdaltransform.exe -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0
> > +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m
> > +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
> > entering lon and lat
> >>7,69746 45,106977<enter>
> > it gives
> > 1342393.88434212 4984915.97865081 -47.0342488819733
> > doing the same transformation with qgis (same parameters), I have
> > 1397559,446 4995677,02
> > that is quite near to the target expected also checking out in map.
> >
> > Do we know the reason of this delta? Do I have to set any other
> correction
> > parameter?
>
>
> Using cs2cs from PROJ4 Rel. 4.6.1, 21 July 2008, I get:
>
> cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
> # ---- From Coordinate System ----
> #Lat/long (Geodetic alias)
> #
> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> # ---- To Coordinate System ----
> #Transverse Mercator
> #       Cyl, Sph&Ell
> # +init=epsg:3003 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
> # +no_defs +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
> # +ellps=intl +units=m
> #--- following specified but NOT used
> # +no_defs
> 7.69746 45.106977
> 1397556.77      4995679.28 -46.70
>
> Using gdaltransform on Linux (almost current SVN), I get:
> gdaltransform -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0 \
>   +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m \
>  +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
> 7.69746 45.106977
> 1397556.76994996 4995679.27916302 -46.6971342787147
>
> which is the same as the cs2cs output.
>
> How old is your gdaltransform.exe and where does it originate from?
>
> Markus
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/753ef878/attachment.html
From antonioparrotta at gmail.com  Mon Sep 15 06:03:22 2008
From: antonioparrotta at gmail.com (Antonio Parrotta)
Date: Mon Sep 15 06:03:25 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
	<86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
	<93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>
Message-ID: <93299b600809150303h73f135bbk8d68519926a3150c@mail.gmail.com>

I'm trying proj4 too, but after downloaded binary and

set PROJ_LIB=<nad_intallation_dir>
set set PATH=%PATH%;<bin_intallation_path>

>cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68

I obtain :
Using to definition: init=epsg:3003
towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
Rel. 4.4.6, 3 March 2003
<cs2cs>:
projection initialization failure
cause: no options found in 'init' file
program abnormally terminated

maybe I'm missing some file,  is it?

thanks
Antonio

2008/9/15 Antonio Parrotta <antonioparrotta@gmail.com>

> I downloaded the source from http://download.osgeo.org/gdal/gdal152.zip,
> built on windows XP with VC2008 with and PROJ4 dll from
> http://download.osgeo.org/proj/proj446_win32_bin.zip
>
> any clue
>
> Antonio
>
> 2008/9/15 Markus Neteler <neteler@osgeo.org>
>
> On Mon, Sep 15, 2008 at 11:02 AM, Antonio Parrotta
>> <antonioparrotta@gmail.com> wrote:
>> > Hi All,
>> >
>> > I'm facing in  strange result using gdaltransform. What I'm doing is to
>> try
>> > to trasform coordinates from WGS84 to Gauss-Boaga:
>> >
>> > gdaltransform.exe -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl
>> +lat_0=0
>> > +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m
>> > +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
>> > entering lon and lat
>> >>7,69746 45,106977<enter>
>> > it gives
>> > 1342393.88434212 4984915.97865081 -47.0342488819733
>> > doing the same transformation with qgis (same parameters), I have
>> > 1397559,446 4995677,02
>> > that is quite near to the target expected also checking out in map.
>> >
>> > Do we know the reason of this delta? Do I have to set any other
>> correction
>> > parameter?
>>
>>
>> Using cs2cs from PROJ4 Rel. 4.6.1, 21 July 2008, I get:
>>
>> cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
>> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
>> # ---- From Coordinate System ----
>> #Lat/long (Geodetic alias)
>> #
>> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>> # ---- To Coordinate System ----
>> #Transverse Mercator
>> #       Cyl, Sph&Ell
>> # +init=epsg:3003 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
>> # +no_defs +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
>> # +ellps=intl +units=m
>> #--- following specified but NOT used
>> # +no_defs
>> 7.69746 45.106977
>> 1397556.77      4995679.28 -46.70
>>
>> Using gdaltransform on Linux (almost current SVN), I get:
>> gdaltransform -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0 \
>>   +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m \
>>  +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
>> 7.69746 45.106977
>> 1397556.76994996 4995679.27916302 -46.6971342787147
>>
>> which is the same as the cs2cs output.
>>
>> How old is your gdaltransform.exe and where does it originate from?
>>
>> Markus
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/1116e08e/attachment-0001.html
From paar at lenne3d.com  Mon Sep 15 06:03:54 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Mon Sep 15 06:04:08 2008
Subject: [gdal-dev] Out of Office
Message-ID: <0ef10575e77d4aee851e4da181af7d57@1b190b485a9a465a928998b7be0b860e>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From antonioparrotta at gmail.com  Mon Sep 15 06:43:25 2008
From: antonioparrotta at gmail.com (Antonio Parrotta)
Date: Mon Sep 15 06:43:27 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <93299b600809150303h73f135bbk8d68519926a3150c@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
	<86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
	<93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>
	<93299b600809150303h73f135bbk8d68519926a3150c@mail.gmail.com>
Message-ID: <93299b600809150343n293c8128i45127dc727ab8b33@mail.gmail.com>

Hi,

I solved, it was because epsg:3003 was missing in epsg file and proj env
variable were not set. I have add

+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
+ellps=intl +units=m +no_defs

in epsg file
now I have same result as you.

Thanks a lot for the helping me!

cheers
Antonio


2008/9/15 Antonio Parrotta <antonioparrotta@gmail.com>

> I'm trying proj4 too, but after downloaded binary and
>
> set PROJ_LIB=<nad_intallation_dir>
> set set PATH=%PATH%;<bin_intallation_path>
>
> >cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
>
> I obtain :
> Using to definition: init=epsg:3003
> towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
> Rel. 4.4.6, 3 March 2003
> <cs2cs>:
> projection initialization failure
> cause: no options found in 'init' file
> program abnormally terminated
>
> maybe I'm missing some file,  is it?
>
> thanks
> Antonio
>
> 2008/9/15 Antonio Parrotta <antonioparrotta@gmail.com>
>
> I downloaded the source from http://download.osgeo.org/gdal/gdal152.zip,
>> built on windows XP with VC2008 with and PROJ4 dll from
>> http://download.osgeo.org/proj/proj446_win32_bin.zip
>>
>> any clue
>>
>> Antonio
>>
>> 2008/9/15 Markus Neteler <neteler@osgeo.org>
>>
>> On Mon, Sep 15, 2008 at 11:02 AM, Antonio Parrotta
>>> <antonioparrotta@gmail.com> wrote:
>>> > Hi All,
>>> >
>>> > I'm facing in  strange result using gdaltransform. What I'm doing is to
>>> try
>>> > to trasform coordinates from WGS84 to Gauss-Boaga:
>>> >
>>> > gdaltransform.exe -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl
>>> +lat_0=0
>>> > +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m
>>> > +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
>>> > entering lon and lat
>>> >>7,69746 45,106977<enter>
>>> > it gives
>>> > 1342393.88434212 4984915.97865081 -47.0342488819733
>>> > doing the same transformation with qgis (same parameters), I have
>>> > 1397559,446 4995677,02
>>> > that is quite near to the target expected also checking out in map.
>>> >
>>> > Do we know the reason of this delta? Do I have to set any other
>>> correction
>>> > parameter?
>>>
>>>
>>> Using cs2cs from PROJ4 Rel. 4.6.1, 21 July 2008, I get:
>>>
>>> cs2cs -v  +proj=latlong +datum=WGS84 +to +init=epsg:3003
>>> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
>>> # ---- From Coordinate System ----
>>> #Lat/long (Geodetic alias)
>>> #
>>> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>>> # ---- To Coordinate System ----
>>> #Transverse Mercator
>>> #       Cyl, Sph&Ell
>>> # +init=epsg:3003 +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
>>> # +no_defs +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
>>> # +ellps=intl +units=m
>>> #--- following specified but NOT used
>>> # +no_defs
>>> 7.69746 45.106977
>>> 1397556.77      4995679.28 -46.70
>>>
>>> Using gdaltransform on Linux (almost current SVN), I get:
>>> gdaltransform -s_srs "WGS84" -t_srs "+proj=tmerc +ellps=intl +lat_0=0 \
>>>   +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +units=m \
>>>  +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"
>>> 7.69746 45.106977
>>> 1397556.76994996 4995679.27916302 -46.6971342787147
>>>
>>> which is the same as the cs2cs output.
>>>
>>> How old is your gdaltransform.exe and where does it originate from?
>>>
>>> Markus
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/57c41fe7/attachment.html
From aurelien.kamel at magellium.fr  Mon Sep 15 07:23:09 2008
From: aurelien.kamel at magellium.fr (=?iso-8859-1?Q?Aur=E9lien_Kamel?=)
Date: Mon Sep 15 07:23:13 2008
Subject: [gdal-dev] VMAP GDAL driver
Message-ID: <200809151123.m8FBNA24001650@smtp03.msg.oleane.net>

Hi all,

 

For a project I?m working on I?m looking for a GDAL driver that could read
(read only) VMAP files (level 0 and 1). Does such a driver already exist?
The project is quite restrictive, we must use GDAL (and OGR) and we can?t do
any conversion from VMAP to another format before opening it for reading.

 

I?m quite new to VPF format so implementing the driver myself would take
quite some time.

 

Any informations would be very appreciated.

 

Regards,

Aurelien

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/07da1275/attachment.html
From nowak at xpam.de  Mon Sep 15 07:28:43 2008
From: nowak at xpam.de (Adam Nowacki)
Date: Mon Sep 15 07:28:29 2008
Subject: [gdal-dev] VMAP GDAL driver
In-Reply-To: <200809151123.m8FBNA24001650@smtp03.msg.oleane.net>
References: <200809151123.m8FBNA24001650@smtp03.msg.oleane.net>
Message-ID: <48CE46EB.803@xpam.de>

http://gdal.org/ogr/drv_ogdi.html

Aur?lien Kamel wrote:
> Hi all,
> 
>  
> 
> For a project I?m working on I?m looking for a GDAL driver that could 
> read (read only) VMAP files (level 0 and 1). Does such a driver already 
> exist? The project is quite restrictive, we must use GDAL (and OGR) and 
> we can?t do any conversion from VMAP to another format before opening it 
> for reading.
> 
>  
> 
> I?m quite new to VPF format so implementing the driver myself would take 
> quite some time.
> 
>  
> 
> Any informations would be very appreciated.

From neteler at osgeo.org  Mon Sep 15 07:52:54 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Mon Sep 15 07:52:56 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <93299b600809150343n293c8128i45127dc727ab8b33@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
	<86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
	<93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>
	<93299b600809150303h73f135bbk8d68519926a3150c@mail.gmail.com>
	<93299b600809150343n293c8128i45127dc727ab8b33@mail.gmail.com>
Message-ID: <86782b610809150452idc57a41kce25b1ce4d841fd4@mail.gmail.com>

On Mon, Sep 15, 2008 at 12:43 PM, Antonio Parrotta
<antonioparrotta@gmail.com> wrote:
> Hi,
>
> I solved, it was because epsg:3003 was missing in epsg file and proj env
> variable were not set. I have add
>
> +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +ellps=intl
> +units=m +no_defs
>
> in epsg file
> now I have same result as you.
>
> Thanks a lot for the helping me!

.. you are welcome but I would double check the installation if things like this
are missing. You are likely to run into new troubles soon if the epsg file is
broken.

Best
Markus
From antonioparrotta at gmail.com  Mon Sep 15 08:08:24 2008
From: antonioparrotta at gmail.com (Antonio Parrotta)
Date: Mon Sep 15 08:08:26 2008
Subject: [gdal-dev] gdaltransform results differs from qgis
In-Reply-To: <86782b610809150452idc57a41kce25b1ce4d841fd4@mail.gmail.com>
References: <93299b600809150202j5287f888r2a75bbe875e76917@mail.gmail.com>
	<86782b610809150235h523c8cf6n76aba80041207a5e@mail.gmail.com>
	<93299b600809150244p3101bd3ci86ada4bc229ef822@mail.gmail.com>
	<93299b600809150303h73f135bbk8d68519926a3150c@mail.gmail.com>
	<93299b600809150343n293c8128i45127dc727ab8b33@mail.gmail.com>
	<86782b610809150452idc57a41kce25b1ce4d841fd4@mail.gmail.com>
Message-ID: <93299b600809150508p7e90a166vdee1ed66d9df5008@mail.gmail.com>

I have extracted the file and followed the README instructions. The
interesting is that the epgs file that comes with executables differs with
respect to the epgs file that comes with the source pack. In this file it
does exist the epsg:3003. It should be a file version matter.

moreover
from qgis (and verified on map) I have
1397559,446 4995677,02
while with proj4
1397556.76994996 4995679.27916302

more than 3 mt of difference, is there any way to get rid of this delta and
correct the result?

thx
Antonio


2008/9/15 Markus Neteler <neteler@osgeo.org>

> On Mon, Sep 15, 2008 at 12:43 PM, Antonio Parrotta
> <antonioparrotta@gmail.com> wrote:
> > Hi,
> >
> > I solved, it was because epsg:3003 was missing in epsg file and proj env
> > variable were not set. I have add
> >
> > +proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0 +ellps=intl
> > +units=m +no_defs
> >
> > in epsg file
> > now I have same result as you.
> >
> > Thanks a lot for the helping me!
>
> .. you are welcome but I would double check the installation if things like
> this
> are missing. You are likely to run into new troubles soon if the epsg file
> is
> broken.
>
> Best
> Markus
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/d86a632e/attachment-0001.html
From randre at gmail.com  Mon Sep 15 12:13:19 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Mon Sep 15 12:13:21 2008
Subject: [gdal-dev] HowTo open NetCDF SUBDATASET and write to new file
Message-ID: <9c2015090809150913i3999a878jc247513c556fb806@mail.gmail.com>

Hi List,

I'm would like to use the Python bindings to open a specific SUBDATASET in a
NetCDF file and read the contents.  I read in
http://www.gdal.org/gdal_datamodel.html, under the "SUBDATASETS domain"
section, that I should be able to pass the "_NAME" parameter into GDALOpen()
in order to do this, but I'm not exactly sure how.  Could someone pass me a
couple lines of Python that show how this is done?

Thanks in advance.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080915/788c2d8c/attachment.html
From darius.jocius at gmail.com  Tue Sep 16 02:15:40 2008
From: darius.jocius at gmail.com (Darius)
Date: Tue Sep 16 02:15:43 2008
Subject: [gdal-dev] importFromMICoordSys function
Message-ID: <055c7543-d25a-4fab-a9a4-c55d71a5a6d2@e53g2000hsa.googlegroups.com>

Hi,
is this function currently supported in OGR library?
When I'm trying to call it, I'm getting this error (C# in VS 2003):
'OSGeo.OGR.SpatialReference' does not contain a definition for
'importFromMICoordSys'.
I'm missing some additional references? Everything else works fine
(all standart Ogr library
functions).


Thanks
From gaffigan at sfos.uaf.edu  Tue Sep 16 03:05:43 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Tue Sep 16 03:05:46 2008
Subject: [gdal-dev] HowTo open NetCDF SUBDATASET and write to new file
In-Reply-To: <9c2015090809150913i3999a878jc247513c556fb806@mail.gmail.com>
References: <9c2015090809150913i3999a878jc247513c556fb806@mail.gmail.com>
Message-ID: <52803.206.174.33.135.1221548743.squirrel@ssl.sfos.uaf.edu>

Hello.  Here's an example of reading an entire array for a single subdataset.

[gaffigan@dp2 AEFF]$ gdalinfo latest.nc
Driver: netCDF/Network Common Data Format
...
  SUBDATASET_25_NAME=NETCDF:"latest.nc":TMP_GPML
  SUBDATASET_25_DESC=[49x11x78x141]
air_temperature_at_constant_altitude_above_m
ean_sea_level (8-bit integer)
...

[gaffigan@dp2 AEFF]$ python
>>> from osgeo import gdal
>>> ds = gdal.Open('NETCDF:"latest.nc":TMP_GPML')
>>> data = ds.ReadAsArray().reshape(49,11,78,141)

Using a more generic call of the form below you can get at particular
hyperslabs:

>>> data=ds.GetRasterBand(i).ReadAsArray(xoff=x0,yoff=y0,win_xsize=nx,win_ysize=ny)

where, for the above example, i=[1,...,539].

Steve


> Hi List,
>
> I'm would like to use the Python bindings to open a specific SUBDATASET in
> a
> NetCDF file and read the contents.  I read in
> http://www.gdal.org/gdal_datamodel.html, under the "SUBDATASETS domain"
> section, that I should be able to pass the "_NAME" parameter into
> GDALOpen()
> in order to do this, but I'm not exactly sure how.  Could someone pass me
> a
> couple lines of Python that show how this is done?
>
> Thanks in advance.
>
> Roger
> --
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From guillaume.sueur at neogeo-online.net  Tue Sep 16 04:09:05 2008
From: guillaume.sueur at neogeo-online.net (Guillaume Sueur)
Date: Tue Sep 16 04:09:18 2008
Subject: [gdal-dev] ogr and python
Message-ID: <48CF69A1.3090908@neogeo-online.net>

Hi devs,

I'm facing a little problem for which I'm sure to find some clue here...
I'm writing a Python module to automatically import data (shp, tab) to a
postgis table.
I've written it based on the vec_tr.py python example.
But it appears my geometries are not all of the same ogr type. Some are
polygons and others are multipolygon. Is there a way to transform an ogr
geometry on the fly from one type to another to allow to populate the
whole table with multipolygons ?

Thanks !
-- 
Guillaume SUEUR

From aurelien.kamel at magellium.fr  Tue Sep 16 05:43:51 2008
From: aurelien.kamel at magellium.fr (=?iso-8859-1?Q?Aur=E9lien_Kamel?=)
Date: Tue Sep 16 05:43:56 2008
Subject: [gdal-dev] VMAP GDAL driver
Message-ID: <200809160943.m8G9hqOF030548@smtp06.msg.oleane.net>

Thank you very much. It looks like I didn't spend enough time browsing GDAL
website... my mistake.

Do you know if there is a SVG driver for GDAL ? A driver that could render
everything but the animations. It doesn't make a lot of sense to me to open
web-oriented graphics with GDAL but we're asked to do it...

Regards,
aurel

Adam Nowacki wrote
> http://gdal.org/ogr/drv_ogdi.html

> Aur?lien Kamel wrote:
> > Hi all,
> > 
> >  
> > 
> > For a project I?m working on I?m looking for a GDAL driver that could 
> > read (read only) VMAP files (level 0 and 1). Does such a driver already 
> > exist? The project is quite restrictive, we must use GDAL (and OGR) and 
> > we can?t do any conversion from VMAP to another format before opening it

> > for reading.
> > 
> >  
> > 
> > I?m quite new to VPF format so implementing the driver myself would take

> > quite some time.
> > 
> >  
> > 
> > Any informations would be very appreciated.

From mateusz at loskot.net  Tue Sep 16 06:08:22 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Sep 16 06:08:28 2008
Subject: [gdal-dev] VMAP GDAL driver
In-Reply-To: <200809160943.m8G9hqOF030548@smtp06.msg.oleane.net>
References: <200809160943.m8G9hqOF030548@smtp06.msg.oleane.net>
Message-ID: <48CF8596.2020402@loskot.net>

Aur?lien Kamel wrote:
> Thank you very much. It looks like I didn't spend enough time browsing GDAL
> website... my mistake.

Also, don't forget the Wiki and FAQ.

> Do you know if there is a SVG driver for GDAL ? A driver that could render
> everything but the animations. It doesn't make a lot of sense to me to open
> web-oriented graphics with GDAL but we're asked to do it...

There is no SVG driver.
Myself, I generate SVG with PostGIS as a proxy generator.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From szekerest at gmail.com  Tue Sep 16 07:09:33 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Sep 16 07:09:35 2008
Subject: [gdal-dev] importFromMICoordSys function
In-Reply-To: <055c7543-d25a-4fab-a9a4-c55d71a5a6d2@e53g2000hsa.googlegroups.com>
References: <055c7543-d25a-4fab-a9a4-c55d71a5a6d2@e53g2000hsa.googlegroups.com>
Message-ID: <f3b73b7d0809160409x6fad406bkca93c2969be3f2df@mail.gmail.com>

It haven't been exposed to the SWIG API yet.

Best regards,

Tamas


2008/9/16 Darius <darius.jocius@gmail.com>:
> Hi,
> is this function currently supported in OGR library?
> When I'm trying to call it, I'm getting this error (C# in VS 2003):
> 'OSGeo.OGR.SpatialReference' does not contain a definition for
> 'importFromMICoordSys'.
> I'm missing some additional references? Everything else works fine
> (all standart Ogr library
> functions).
>
>
> Thanks
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From aperezcarro at yahoo.es  Tue Sep 16 07:24:49 2008
From: aperezcarro at yahoo.es (Antonio Prez)
Date: Tue Sep 16 07:25:01 2008
Subject: [gdal-dev] About Gdal contour - Opinion
Message-ID: <gao51q$ffn$1@ger.gmane.org>

Hello everybody
I would want to know your opinion about gdal-contour
I dont see messages about it into the list ....
Do you use it ? What grade of results can be got ?

Thanks
--------------------------------------
 Antonio Prez 



From darius.jocius at gmail.com  Tue Sep 16 11:01:33 2008
From: darius.jocius at gmail.com (Darius)
Date: Tue Sep 16 11:01:35 2008
Subject: [gdal-dev] OGR with Expat and Xerces library support
Message-ID: <f902d231-5c76-4ff7-ab66-659e54685dd8@d45g2000hsc.googlegroups.com>

Hi,
I'm trying to compile in OGR/GDAL library KML and GPX support, but I
can't get it working. I'm using "makegdal71.vcproj" with VS 2003 and
edited "nmake.opt" as this:

# Uncomment for Expat support (required for KML read support).

EXPAT_DIR = C:\Expat
EXPAT_INCLUDE = -I$(EXPAT_DIR)\source\lib
EXPAT_LIB = $(EXPAT_DIR)\bin\libexpat.lib
# For example full path to libexpat.lib on my PC is: "C:\Expat\Bin
\libexpat.lib"

# Uncomment for Xerces based GML support.

XERCES_DIR =	D:\PROJEKTAI\ESRI_MDB_Converter\Lib\xerces\xrc
XERCES_INCLUDE = -I$(XERCES_DIR)\include -I$(XERCES_DIR)\include
\xercesc
XERCES_LIB = $(XERCES_DIR)\lib\xerces-c_2.lib
# For example full path to xerces-c_2.lib is "D:\PROJEKTAI
\ESRI_MDB_Converter\Lib\xerces\xrc\lib\xerces-c_2.lib"

Here is what I'm getting in build log about it:

 link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller  /
INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  /
INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll /
INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /
INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /
INCLUDE:_OCTNewCoordinateTransformation@8 /
INCLUDE:_vbSafeArrayToPtr@16 port\*.obj gcore\*.obj alg\*.obj frmts\o
\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
vb6\vb6_support.obj   D:\PROJEKTAI\ESRI_MDB_Converter\Lib\xerces\xrc
\lib\xerces-c_2.lib C:\Expat\bin\libexpat.lib   odbc32.lib
odbccp32.lib user32.lib                            gcore\Version.res  /
out:gdal15.dll /implib:gdal_i.lib
   Creating library gdal_i.lib and object gdal_i.exp
LINK : warning LNK4098: defaultlib 'MSVCRTD' conflicts with use of
other libs; use /NODEFAULTLIB:library

Now about how I'm checking if support has been built. Im using just
built version of "ogrinfo" and trying to open gpx file. Getting error:
"ERROR 6: OGR/GPX driver has not been built with read support. Expat
library required"
And with KML file:
"ERROR 1: Unable to create Xerces C++ based GML reader, Xerces support
not configured into GDAL/OGR.
ERROR 1: File ionic_wfs.gml appears to be GML but the GML reader can't
be instantiated, likely because Xerces support wasn't
configured in."

Where could be the problem? I checked library paths several times,
they should be correct. If anybody have any ideas, you are more than
welcome.

Thank you
From warmerdam at pobox.com  Tue Sep 16 12:11:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 16 12:11:04 2008
Subject: [gdal-dev] About Gdal contour - Opinion
In-Reply-To: <gao51q$ffn$1@ger.gmane.org>
References: <gao51q$ffn$1@ger.gmane.org>
Message-ID: <931f8ea90809160911j16f6c250qfd1867f819c1101a@mail.gmail.com>

2008/9/16 Antonio P?rez <aperezcarro@yahoo.es>:
> Hello everybody
> I would want to know your opinion about gdal-contour
> I dont see messages about it into the list ....
> Do you use it ? What grade of results can be got ?

Antonio,

I know a few people use it though it isn't heavily used.

I'm pretty confident it does what it is supposed to do.

Note that it does *not* attempt to simpilfy the results so
you end up with very dense (points close together) contour
lines with roughly one segment per pixel crossed.

Also, be aware that the countours are just lines, and because
they just end at edges of he raster or nodata areas, they
aren't easy to form into polygons (if that is your goal).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mchapman at fortifieddatacom.com  Tue Sep 16 12:43:41 2008
From: mchapman at fortifieddatacom.com (Martin Chapman)
Date: Tue Sep 16 12:53:49 2008
Subject: [gdal-dev] About Gdal contour - Opinion
In-Reply-To: <931f8ea90809160911j16f6c250qfd1867f819c1101a@mail.gmail.com>
References: <gao51q$ffn$1@ger.gmane.org>
	<931f8ea90809160911j16f6c250qfd1867f819c1101a@mail.gmail.com>
Message-ID: <005201c9181b$620fb530$262f1f90$@com>

FYI...I use gdal contour a lot for placing Tactical Access Points in the
field for our customers.  Works really good in my opinion.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, September 16, 2008 10:11 AM
To: Antonio P?rez
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] About Gdal contour - Opinion

2008/9/16 Antonio P?rez <aperezcarro@yahoo.es>:
> Hello everybody
> I would want to know your opinion about gdal-contour
> I dont see messages about it into the list ....
> Do you use it ? What grade of results can be got ?

Antonio,

I know a few people use it though it isn't heavily used.

I'm pretty confident it does what it is supposed to do.

Note that it does *not* attempt to simpilfy the results so
you end up with very dense (points close together) contour
lines with roughly one segment per pixel crossed.

Also, be aware that the countours are just lines, and because
they just end at edges of he raster or nodata areas, they
aren't easy to form into polygons (if that is your goal).

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mitchelljj98 at gmail.com  Tue Sep 16 15:20:58 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Tue Sep 16 15:21:01 2008
Subject: [gdal-dev] For a raster file header how do I transform the GCP
	Projection and GCP into a format where instead the Coordinate
	System contains corner coordinates?
Message-ID: <fa2ac0580809161220u158efaa9o9f15192735e14b67@mail.gmail.com>

Hi,

For a raster file header how do I transform the GCP Projection and GCP into
a format where instead the Coordinate System contains corner coordinates?

*Below is an example of a portion of a header file containing GCP Projection
and GCP and below the dotted line is how I would like it transformed.*

Driver: GTiff/GeoTIFF
Size is 11601, 9027
Coordinate System is `'
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.2572235630016,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (264,8127) -> (-95.8337916667,28.533825,0)
GCP[  1]: Id=2, Info=
          (264,275) -> (-95.8337916667,29.1006305556,0)
GCP[  2]: Id=3, Info=
          (11245,275) -> (-94.9336861111,29.1006305556,0)
GCP[  3]: Id=4, Info=
          (11245,8127) -> (-94.9336861111,28.533825,0)
GCP[  4]: Id=5, Info=
          (10436,8127) -> (-94.9999972222,28.533825,0)

*
..............................................................................
*

Driver: GTiff/GeoTIFF
Size is 1800, 900
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-99.000000000000000,27.000000000000000)
Pixel Size = (0.001111111111111,-0.001666666666667)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows
  TIFFTAG_DATETIME=2005:12:26 22:09:51
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  ( -99.0000000,  27.0000000) ( 99d 0'0.00"W, 27d 0'0.00"N)
Lower Left  ( -99.0000000,  25.5000000) ( 99d 0'0.00"W, 25d30'0.00"N)
Upper Right ( -97.0000000,  27.0000000) ( 97d 0'0.00"W, 27d 0'0.00"N)
Lower Right ( -97.0000000,  25.5000000) ( 97d 0'0.00"W, 25d30'0.00"N)
Center      ( -98.0000000,  26.2500000) ( 98d 0'0.00"W, 26d15'0.00"N)
Band 1 Block=1800x1 Type=Byte, ColorInterp=Red
Band 2 Block=1800x1 Type=Byte, ColorInterp=Green
Band 3 Block=1800x1 Type=Byte, ColorInterp=Blue

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080916/50aa4fc8/attachment.html
From lists at fuchsschwanzdomain.de  Tue Sep 16 17:38:39 2008
From: lists at fuchsschwanzdomain.de (Sven Geggus)
Date: Tue Sep 16 18:06:09 2008
Subject: [gdal-dev] gdal2tiles.py output files
Message-ID: <20080916213839.GA12106@diesel.geggus.net>

Hi there,

I'm fiddling with gdal2tiles.py (the Version from gdal 1.5.2).
Unfortunately all the generated tiles look inverted or something.
    
See attached file for details.

Any Idea?

Sven

-- 
The source code is not comprehensible
                 (found in bug section of man 8 telnetd on Redhat Linux)

/me is giggls@ircnet, http://sven.gegg.us/ on the Web
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20.png
Type: image/png
Size: 6629 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080916/752d20bd/20.png
From nudtchengguo at gmail.com  Tue Sep 16 23:04:04 2008
From: nudtchengguo at gmail.com (guo cheng)
Date: Tue Sep 16 23:04:06 2008
Subject: [gdal-dev] a question
Message-ID: <438fc1100809162004v118a479ei4529f11447222d74@mail.gmail.com>

how to use dataset.buildoverviews in C#.net.
It seems there are only two parameters that are not enough.
I hope you can give me an example.
Thank you very much!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/666957af/attachment-0001.html
From paar at lenne3d.com  Tue Sep 16 23:04:33 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Tue Sep 16 23:04:50 2008
Subject: [gdal-dev] Out of Office
Message-ID: <63d6c4fc3bd54e9093a4b26660354791@710506d8867c42dcbdfe6e944994cb42>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From legeochen at gmail.com  Wed Sep 17 01:38:22 2008
From: legeochen at gmail.com (legeochen)
Date: Wed Sep 17 01:38:25 2008
Subject: [gdal-dev] can gdal be used under linux arm
Message-ID: <b508b9770809162238o715c591blfdeb447ce18ddc25@mail.gmail.com>

I used to write wince embeded programs with gdal reading image data. but now
i wanna to port them to linux arm. can any tell me, is it possible? How can
I complie gdal for linux arm? t
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/210d01c6/attachment.html
From oliver.eichler at gmx.de  Wed Sep 17 01:47:43 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Sep 17 01:44:48 2008
Subject: [gdal-dev] can gdal be used under linux arm
In-Reply-To: <b508b9770809162238o715c591blfdeb447ce18ddc25@mail.gmail.com>
References: <b508b9770809162238o715c591blfdeb447ce18ddc25@mail.gmail.com>
Message-ID: <200809170747.43208.oliver.eichler@gmx.de>

On Wednesday, 17. September 2008 07:38:22 legeochen wrote:
> I used to write wince embeded programs with gdal reading image data. but
> now i wanna to port them to linux arm. can any tell me, is it possible? How
> can I complie gdal for linux arm? t


http://trac.osgeo.org/gdal/wiki/OpenEmbedded

hth

Oliver
From hamish_b at yahoo.com  Wed Sep 17 02:28:27 2008
From: hamish_b at yahoo.com (Hamish)
Date: Wed Sep 17 02:28:30 2008
Subject: [gdal-dev] can gdal be used under linux arm
In-Reply-To: <b508b9770809162238o715c591blfdeb447ce18ddc25@mail.gmail.com>
Message-ID: <82570.6996.qm@web110001.mail.gq1.yahoo.com>

legeochen:
> I used to write wince embeded programs with gdal reading
> image data. but now i wanna to port them to linux arm. can
> any tell me, is it possible? How can I complie gdal for
> linux arm? t


http://packages.debian.org/search?arch=arm&keywords=gdal-bin


Hamish



      

From darius.jocius at gmail.com  Wed Sep 17 03:09:06 2008
From: darius.jocius at gmail.com (Darius)
Date: Wed Sep 17 03:09:07 2008
Subject: [gdal-dev] Re: OGR with Expat and Xerces library support
In-Reply-To: <f902d231-5c76-4ff7-ab66-659e54685dd8@d45g2000hsc.googlegroups.com>
References: <f902d231-5c76-4ff7-ab66-659e54685dd8@d45g2000hsc.googlegroups.com>
Message-ID: <bf34d340-c1aa-4306-afee-7c048c626b26@l64g2000hse.googlegroups.com>

Hi there,
this morning I solved a problem by uncommenting these lines in
"makefile.vc":

##############################################################################
# The following determines whether we are linking all the OGR formats
# into the DLL, or only the minimum spatial reference related stuff
required
# for a raster-gdal build.

OGR_BASE_INCLUDE = /INCLUDE:_OCTNewCoordinateTransformation@8 \
		/INCLUDE:_OGRFeatureStylePuller@0 \
		/INCLUDE:_OSRValidate@4 \
		/INCLUDE:_OPTGetProjectionMethods@0 \
		/INCLUDE:_OGR_G_GetPointCount@4

I didn't noticed, that I have to edit makefile.vc, because
documentation or library compiling notes has no word about it (it
says, that you have to uncomment some lines in nmake.opt for
additional library support). So, I think would be good idea to include
warning about it in nmake.opt file also.

Thanks
From jukka.rahkonen at mmmtike.fi  Wed Sep 17 04:36:04 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Sep 17 04:36:22 2008
Subject: [gdal-dev] Re: For a raster file header how do I transform the
	GCP	Projection and GCP into a format where instead the
	Coordinate	System contains corner coordinates?
References: <fa2ac0580809161220u158efaa9o9f15192735e14b67@mail.gmail.com>
Message-ID: <loom.20080917T083327-999@post.gmane.org>

John Mitchell <mitchelljj98 <at> gmail.com> writes:

> 
> Hi,For a raster file header how do I transform the GCP Projection and GCP into
a format where instead the Coordinate System contains corner coordinates?Below
is an example of a portion of a header file containing GCP 

I remember I have done something similar with:
gdalwarp -of Gtiff -s_srs epsg:4326 -t_srs epsg:4326 input.tif output.tif.

Have a try, it may work.


From szekerest at gmail.com  Wed Sep 17 05:23:48 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep 17 05:23:50 2008
Subject: [gdal-dev] a question
In-Reply-To: <438fc1100809162004v118a479ei4529f11447222d74@mail.gmail.com>
References: <438fc1100809162004v118a479ei4529f11447222d74@mail.gmail.com>
Message-ID: <f3b73b7d0809170223v4d664961hc306a69a236a925d@mail.gmail.com>

You can refer to the corresponding sample application in the source tree:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALOverviews.cs

Best regards,

Tamas


2008/9/17 guo cheng <nudtchengguo@gmail.com>:
> how to use dataset.buildoverviews in C#.net.
> It seems there are only two parameters that are not enough.
> I hope you can give me an example.
> Thank you very much!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From lists at dipole-consulting.com  Wed Sep 17 09:33:10 2008
From: lists at dipole-consulting.com (Didrik Pinte)
Date: Wed Sep 17 09:40:59 2008
Subject: [gdal-dev] mrsid : coordinate system problem
Message-ID: <1221658390.4255.27.camel@ddp.simpson>

Hi,

I have succesfully build the DSDK 7.0 mrsid extension against gdal-svn
and then mapserver 5.2.0 with gdal.

The problem is that the coordinate system of the mrsid file does not
seem to be recognized.

The output of gdalinfo on the file is :
=========================================================================================
[root@ssc data]# gdalinfo ortho/5227y04.sid 
Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Files: ortho/5227y04.sid
Size is 10000, 10000
Coordinate System is:
PROJCS["Belge_Lambert_1972",
    GEOGCS["GCS_Belge_1972",
        DATUM["Reseau_National_Belge_1972",
            SPHEROID["International_1924",6378388.0,297.0]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["False_Easting",150000.01256],
    PARAMETER["False_Northing",5400088.4378],
    PARAMETER["Central_Meridian",4.367486666666666],
    PARAMETER["Standard_Parallel_1",49.8333339],
    PARAMETER["Standard_Parallel_2",51.16666733333333],
    PARAMETER["Latitude_Of_Origin",90.0],
    UNIT["Meter",1.0]]
Origin = (-0.001049999962561,21.001049251179211)
Pixel Size = (0.002099999925122,-0.002099999925122)
Metadata:
  IMAGE__INPUT_NAME=N:\DLT\2\P10000\5227Y04.tif
  IMAGE__INPUT_FILE_SIZE=300080326.000000
  IMAGE__COMPRESSION_VERSION=1,4,1
  IMAGE__TARGET_COMPRESSION_RATIO=29.999962
  IMAGE__COMPRESSION_NLEV=5
  IMAGE__COMPRESSION_WEIGHT=4.000000
  IMAGE__COMPRESSION_GAMMA=2.000000
  IMAGE__COMPRESSION_BLOCK_SIZE=512
  IMAGE__CREATION_DATE=Wed Jul 14 07:53:51 2004

Corner Coordinates:
Upper Left  (  -0.0010500,  21.0010493) (  2d18'19.78"E, 49d17'38.76"N)
Lower Left  (  -0.0010500,   0.0010500) (  2d18'19.81"E, 49d17'38.08"N)
Upper Right (  20.9989493,  21.0010493) (  2d18'20.82"E, 49d17'38.78"N)
Lower Right (  20.9989493,   0.0010500) (  2d18'20.85"E, 49d17'38.10"N)
Center      (  10.4989496,  10.5010496) (  2d18'20.31"E, 49d17'38.43"N)
Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
  Minimum=40.000, Maximum=247.000, Mean=91.441, StdDev=25.039
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 313x313
  Metadata:
    LAYER_TYPE=athematic
Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
  Minimum=48.000, Maximum=249.000, Mean=94.453, StdDev=23.292
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 313x313
  Metadata:
    LAYER_TYPE=athematic
Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
  Minimum=54.000, Maximum=249.000, Mean=94.428, StdDev=20.477
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 313x313
  Metadata:
    LAYER_TYPE=athematic
=========================================================================================

Thus, the definition of the raster in mapserver is : 

=========================================================================================
MAP
    IMAGECOLOR 255 255 255 #0 0 0
    SIZE 380 380
    STATUS ON
    SHAPEPATH "/var/data/rasters/"
    RESOLUTION 81.28
    UNITS meters
    FONTSET "/var/data/fontset.txt"

    OUTPUTFORMAT
        NAME png24
        DRIVER "GD/PNG"
        MIMETYPE "image/png"
        IMAGEMODE RGBA
        EXTENSION "png"
        TRANSPARENT OFF
    END

    EXTENT 141193 161468 157995 178169 # extent of URBMAP_PB

    PROJECTION
        "+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+units=m +no_defs"
    END

  LAYER
        NAME "ortho"
        DATA "ortho/5227y04.sid"
        TYPE RASTER
        PROCESSING "BANDS=1,2,3"
        DEBUG 5
        PROJECTION
                "+proj=lcc +lat_2=51.16666723333333 +lat_1=49.8333339
+lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438
+ellps=intl +units=m +no_defs"
        END
        STATUS DEFAULT
  END
=========================================================================================

When I ask MapServer to render the raster layer on it's extent :

=========================================================================================
[root@aliwen data]# shp2img  -m mrsid.map  -map_debug 9999 -all_debug
9999 -e 153614 164568 154431 165383 o > img.png
[Wed Sep 17 15:25:57 2008].23287 msLoadMap(): 0.003s
[Wed Sep 17 15:25:57 2008].24736 msDrawRasterLayerLow(ortho): entering.
[Wed Sep 17 15:25:57 2008].35788 msResampleGDALToMap(): no overlap ...
no result.
[Wed Sep 17 15:25:57 2008].37246 msDrawMap(): Layer 0 (ortho), 0.013s
[Wed Sep 17 15:25:57 2008].37420 msDrawMap(): Drawing Label Cache,
0.000s
[Wed Sep 17 15:25:57 2008].37532 msDrawMap() total time: 0.014s
[Wed Sep 17 15:25:57 2008].61124 msSaveImage() total time: 0.023s
[Wed Sep 17 15:25:57 2008].61480 msFreeMap(): freeing map at 0x9591c40.
[Wed Sep 17 15:25:57 2008].60993 shp2img total time: 0.042s
=========================================================================================

It says there is no overlap ...

When trying with the following command, I got the output ... :

=========================================================================================
[root@aliwen data]# shp2img  -m mrsid.map  -map_debug 9999 -all_debug
9999 -e 153614 164568 154431 165383 -layer otrho > img.png
[Wed Sep 17 15:25:57 2008].23287 msLoadMap(): 0.003s
[Wed Sep 17 15:25:57 2008].24736 msDrawRasterLayerLow(ortho): entering.
[Wed Sep 17 15:25:57 2008].35788 msResampleGDALToMap(): no overlap ...
no result.
[Wed Sep 17 15:25:57 2008].37246 msDrawMap(): Layer 0 (ortho), 0.013s
[Wed Sep 17 15:25:57 2008].37420 msDrawMap(): Drawing Label Cache,
0.000s
[Wed Sep 17 15:25:57 2008].37532 msDrawMap() total time: 0.014s
[Wed Sep 17 15:25:57 2008].61124 msSaveImage() total time: 0.023s
[Wed Sep 17 15:25:57 2008].61480 msFreeMap(): freeing map at 0x9591c40.
[Wed Sep 17 15:25:57 2008].60993 shp2img total time: 0.042s
=========================================================================================

I have quickly tried to load the data in qgis and the raster appears at
the right place ... 

Do someone have an idea on the source of the problem ? Is this related
to the "Corner Coordinates" that does not seem to be in the projected
coordinate system ?

Thanks in advance for any help.

Didrik

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/e8074b36/attachment.bin
From lists at dipole-consulting.com  Wed Sep 17 09:58:53 2008
From: lists at dipole-consulting.com (Didrik Pinte)
Date: Wed Sep 17 09:58:56 2008
Subject: [gdal-dev] mrsid : coordinate system problem
In-Reply-To: <1221658390.4255.27.camel@ddp.simpson>
References: <1221658390.4255.27.camel@ddp.simpson>
Message-ID: <1221659933.4255.35.camel@ddp.simpson>

Another interesting information. The output of mrsigeoinfo seems correct
and the output of gdal not.

========================================================================================
did@ddp:~/scripts/mapping/mrsid$ ./mrsidgeoinfo_linux
~/data/raster/5227y04.sid 
mrsidgeoinfo: (c) 2005 LizardTech, Inc. All rights reserved.

basic image info:
  format:            MrSID/MG2
  width:             10000
  height:            10000
  nband:             3
  color space:       RGB
  datatype:          uint8
  precision:         8
  dyn range min:     (natural)
  dyn range max:     (natural)
  background color:  (0, 0, 0)
  nodata color:      (none)
  nominal size:      300000000
  mag range:         0.031250 to 1048576.000000
  metadata records:  20
  num AOI regions:   0

geo coordinate info:
  X UL:              153622.256000
  Y UL:              165381.456000
  X res:             0.080683
  Y res:             -0.081038
  X rot:             0.003738
  Y rot:             0.003774

geo points (pixel centers):
  upper left:        (153622.256000, 165381.456000)
  upper right:       (154429.002317, 165381.456000)
  lower left:        (153622.256000, 164571.158038)
  lower right:       (154429.002317, 164571.158038)
  center:            (154025.629159, 164976.307019)

MrSID image info:
  number of levels:  5
  is locked:         false
  file version:      1.0.1. 

MrSID/MG2-specific image info:
  is dithered:       true
  block size:        512
========================================================================================

See my previous e-mail for gdalinfo outut. Coordinates where : 

Corner Coordinates:
Upper Left  (  -0.0010500,  21.0010493) (  2d18'19.78"E, 49d17'38.76"N)
Lower Left  (  -0.0010500,   0.0010500) (  2d18'19.81"E, 49d17'38.08"N)
Upper Right (  20.9989493,  21.0010493) (  2d18'20.82"E, 49d17'38.78"N)
Lower Right (  20.9989493,   0.0010500) (  2d18'20.85"E, 49d17'38.10"N)
Center      (  10.4989496,  10.5010496) (  2d18'20.31"E, 49d17'38.43"N)

Didrik

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/ceebc51f/attachment-0001.bin
From lists at dipole-consulting.com  Wed Sep 17 10:07:53 2008
From: lists at dipole-consulting.com (Didrik Pinte)
Date: Wed Sep 17 10:07:57 2008
Subject: [gdal-dev] mrsid : coordinate system problem
In-Reply-To: <1221658390.4255.27.camel@ddp.simpson>
References: <1221658390.4255.27.camel@ddp.simpson>
Message-ID: <1221660473.4255.41.camel@ddp.simpson>

I have just found more information on the problem. It seems related to
this thread :

http://www.nabble.com/Georeferencing-Mrsid-raster-file-with-a-world-file-td13700397.html

Gdal seems to prefer the internal georeferencing of the file in place of
the .sdw file.

I've tried the .vrt conversion of the file updating it's GeoTransform
using the .sdw content without success.

What could be wrong ?

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/aba1aed0/attachment.bin
From lists at dipole-consulting.com  Wed Sep 17 10:43:59 2008
From: lists at dipole-consulting.com (Didrik Pinte)
Date: Wed Sep 17 10:44:02 2008
Subject: [gdal-dev] mrsid : coordinate system problem
In-Reply-To: <1221659933.4255.35.camel@ddp.simpson>
References: <1221658390.4255.27.camel@ddp.simpson>
	<1221659933.4255.35.camel@ddp.simpson>
Message-ID: <1221662639.4255.74.camel@ddp.simpson>

Some more information. When using the "-ignorewf" from mrsidgeoinfo, I
get the same result as GDAL :

==========================================================================================
[root@ssc data]# ~/mrsidgeoinfo_linux -ignorewf
raster/ortho/5227y04.sid 
mrsidgeoinfo: (c) 2005 LizardTech, Inc. All rights reserved.

basic image info:
  format:            MrSID/MG2
  width:             10000
  height:            10000
  nband:             3
  color space:       RGB
  datatype:          uint8
  precision:         8
  dyn range min:     (natural)
  dyn range max:     (natural)
  background color:  (0, 0, 0)
  nodata color:      (none)
  nominal size:      300000000
  mag range:         0.031250 to 1048576.000000
  metadata records:  18
  num AOI regions:   0

geo coordinate info:
  X UL:              0.000000
  Y UL:              20.999999
  X res:             0.002100
  Y res:             -0.002100
  X rot:             0.000000
  Y rot:             0.000000

geo points (pixel centers):
  upper left:        (0.000000, 20.999999)
  upper right:       (20.997899, 20.999999)
  lower left:        (0.000000, 0.002100)
  lower right:       (20.997899, 0.002100)
  center:            (10.498950, 10.501050)

MrSID image info:
  number of levels:  5
  is locked:         false
  file version:      1.0.1. 

MrSID/MG2-specific image info:
  is dithered:       true
  block size:        512

==========================================================================================

Is there a way to force GDAL to use the .sdw file ? 

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/f5500247/attachment.bin
From randre at gmail.com  Wed Sep 17 11:35:17 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Sep 17 11:35:19 2008
Subject: [gdal-dev] HowTo open NetCDF SUBDATASET and write to new file
In-Reply-To: <52803.206.174.33.135.1221548743.squirrel@ssl.sfos.uaf.edu>
References: <9c2015090809150913i3999a878jc247513c556fb806@mail.gmail.com>
	<52803.206.174.33.135.1221548743.squirrel@ssl.sfos.uaf.edu>
Message-ID: <9c2015090809170835u62aa46c6qadb3f480f1e32561@mail.gmail.com>

Hi Steve,

Thanks very much for the code snippet.  I figured out the following via
experimentation.

- Open specific layer by using:
layer = gdal.Open('netCDF:"annual_mean.nc":temp')

- Then get at the layer data data using the following:
netcdf_band = layer.GetRasterBand(1)

- Read in the data one row at a time:
    for iY in range(y_size):
      netcdf_data = netcdf_band.ReadAsArray(0, iY, x_size, 1)

It works, but is a complete hack in the sense that I just plugged in stuff
from a bunch of different scripts and banged away at it until it gave me
what I needed.  Glad to see that it is similar to your code.  I'm curious
about the ".reshape()" method that you pass to "ReadAsArray" above.  What
does that do?

Thanks again for the help.

Roger
--

On Tue, Sep 16, 2008 at 12:05 AM, Steve Gaffigan <gaffigan@sfos.uaf.edu>wrote:

> Hello.  Here's an example of reading an entire array for a single
> subdataset.
>
> [gaffigan@dp2 AEFF]$ gdalinfo latest.nc
> Driver: netCDF/Network Common Data Format
> ...
>  SUBDATASET_25_NAME=NETCDF:"latest.nc":TMP_GPML
>  SUBDATASET_25_DESC=[49x11x78x141]
> air_temperature_at_constant_altitude_above_m
> ean_sea_level (8-bit integer)
> ...
>
> [gaffigan@dp2 AEFF]$ python
> >>> from osgeo import gdal
> >>> ds = gdal.Open('NETCDF:"latest.nc":TMP_GPML')
> >>> data = ds.ReadAsArray().reshape(49,11,78,141)
>
> Using a more generic call of the form below you can get at particular
> hyperslabs:
>
> >>>
> data=ds.GetRasterBand(i).ReadAsArray(xoff=x0,yoff=y0,win_xsize=nx,win_ysize=ny)
>
> where, for the above example, i=[1,...,539].
>
> Steve
>
>
> > Hi List,
> >
> > I'm would like to use the Python bindings to open a specific SUBDATASET
> in
> > a
> > NetCDF file and read the contents.  I read in
> > http://www.gdal.org/gdal_datamodel.html, under the "SUBDATASETS domain"
> > section, that I should be able to pass the "_NAME" parameter into
> > GDALOpen()
> > in order to do this, but I'm not exactly sure how.  Could someone pass me
> > a
> > couple lines of Python that show how this is done?
> >
> > Thanks in advance.
> >
> > Roger
> > --
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/5146ef02/attachment.html
From paar at lenne3d.com  Wed Sep 17 12:00:33 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Wed Sep 17 12:00:42 2008
Subject: [gdal-dev] Out of Office
Message-ID: <7ba6c40e91f044d5ba0b4f70ac0fca87@a87039d418754aaa999f72eab0402373>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From even.rouault at mines-paris.org  Wed Sep 17 13:37:25 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 17 13:37:29 2008
Subject: [gdal-dev] For a raster file header how do I transform the GCP
	Projection and GCP into a format where instead the Coordinate
	System contains corner coordinates?
In-Reply-To: <fa2ac0580809161220u158efaa9o9f15192735e14b67@mail.gmail.com>
References: <fa2ac0580809161220u158efaa9o9f15192735e14b67@mail.gmail.com>
Message-ID: <200809171937.26519.even.rouault@mines-paris.org>

gdalwarp is your friend ! See http://gdal.org/gdalwarp.html

Or if I see well from the relationship between the pixel and georeferenced 
coordinatesif your image doesn't really need to be warped, you could also try 
gdal_translate -a_srs srs_def -a_ullr ulx uly lrx lry.

Le Tuesday 16 September 2008 21:20:58 John Mitchell, vous avez ?crit?:
> Hi,
>
> For a raster file header how do I transform the GCP Projection and GCP into
> a format where instead the Coordinate System contains corner coordinates?
>
> *Below is an example of a portion of a header file containing GCP
> Projection and GCP and below the dotted line is how I would like it
> transformed.*
>
> Driver: GTiff/GeoTIFF
> Size is 11601, 9027
> Coordinate System is `'
> GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.2572235630016,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6
>326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EP
>SG","4326"]] GCP[  0]: Id=1, Info=
>           (264,8127) -> (-95.8337916667,28.533825,0)
> GCP[  1]: Id=2, Info=
>           (264,275) -> (-95.8337916667,29.1006305556,0)
> GCP[  2]: Id=3, Info=
>           (11245,275) -> (-94.9336861111,29.1006305556,0)
> GCP[  3]: Id=4, Info=
>           (11245,8127) -> (-94.9336861111,28.533825,0)
> GCP[  4]: Id=5, Info=
>           (10436,8127) -> (-94.9999972222,28.533825,0)
>
> *
> ...........................................................................
>... *
>
> Driver: GTiff/GeoTIFF
> Size is 1800, 900
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.2572235630016,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-99.000000000000000,27.000000000000000)
> Pixel Size = (0.001111111111111,-0.001666666666667)
> Metadata:
>   AREA_OR_POINT=Area
>   TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows
>   TIFFTAG_DATETIME=2005:12:26 22:09:51
>   TIFFTAG_XRESOLUTION=72
>   TIFFTAG_YRESOLUTION=72
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Corner Coordinates:
> Upper Left  ( -99.0000000,  27.0000000) ( 99d 0'0.00"W, 27d 0'0.00"N)
> Lower Left  ( -99.0000000,  25.5000000) ( 99d 0'0.00"W, 25d30'0.00"N)
> Upper Right ( -97.0000000,  27.0000000) ( 97d 0'0.00"W, 27d 0'0.00"N)
> Lower Right ( -97.0000000,  25.5000000) ( 97d 0'0.00"W, 25d30'0.00"N)
> Center      ( -98.0000000,  26.2500000) ( 98d 0'0.00"W, 26d15'0.00"N)
> Band 1 Block=1800x1 Type=Byte, ColorInterp=Red
> Band 2 Block=1800x1 Type=Byte, ColorInterp=Green
> Band 3 Block=1800x1 Type=Byte, ColorInterp=Blue


From mo at discover-aai.com  Wed Sep 17 14:26:39 2008
From: mo at discover-aai.com (Mo Wang)
Date: Wed Sep 17 14:26:42 2008
Subject: [gdal-dev] Problem in viewing NITF images created by GDAL_TRANSLATE
Message-ID: <9E8339A1A958CA43851FF336135F43ADC0755E@admin.discover-aai.office>

Hi all,

 

I used gdal_translate to make a complete copy of a nitf file and it ran
to completion. But the output image file can only be viewed partially on
a IMAGINE Viewer while the whole original image file can be viewed on
the Viewer. I believe that the data is there just it can not be viewed. 

 

I then used gdal_translate to make a subset of the original nitf and it
also ran to completion. And this time the output subset image file can
be viewed by the Viewer.

 

Anyone knows why the entire copied image by gdal_translate can not be
viewed while the subset image (also by gdal_translate) and the original
image can be? Is this a known bug? Thanks in advance. 

 

I used gdalinfo and noticed that the Band 1 Block=6876x1 for the copied
image and 1000x1 for the subset image while it was 1024x1024 for the
original image. Does the block size matter? And is there a way to
control the block size in using gdal_translate so that the problem can
be resolved?

 

Both GDAL 1.5.1 and 1.5.2 have the same viewing problem. I have tried
few other test cases and have the same problem.

 

Mo

 

>gdal_translate -of NITF caf_07jan28.ntf gdal_copy_caf_07jan28.ntf

Input file size is 6876, 4622

Warning 1: FHDR=NITF02.00 not supported, switching to NITF02.10.

0...10...20...30...40...50...60...70...80...90...100 - done.

 

>gdal_translate -of NITF -srcwin 900 3200 1000 800 caf_07jan28.ntf
gdal_subset_caf_07jan28.ntf

Input file size is 6876, 4622

Warning 1: FHDR=NITF02.00 not supported, switching to NITF02.10.

0...10...20...30...40...50...60...70...80...90...100 - done.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080917/2262f5a4/attachment.html
From warmerdam at pobox.com  Wed Sep 17 15:46:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 17 15:46:04 2008
Subject: [gdal-dev] Problem in viewing NITF images created by
	GDAL_TRANSLATE
In-Reply-To: <9E8339A1A958CA43851FF336135F43ADC0755E@admin.discover-aai.office>
References: <9E8339A1A958CA43851FF336135F43ADC0755E@admin.discover-aai.office>
Message-ID: <931f8ea90809171246v339a65f1i4cd5400fa7615785@mail.gmail.com>

On Wed, Sep 17, 2008 at 2:26 PM, Mo Wang <mo@discover-aai.com> wrote:
> Hi all,
>
>
>
> I used gdal_translate to make a complete copy of a nitf file and it ran to
> completion. But the output image file can only be viewed partially on a
> IMAGINE Viewer while the whole original image file can be viewed on the
> Viewer. I believe that the data is there just it can not be viewed.


Mo,

It looks like the NITF writer normally writes the entire
NITF file as a single block image (regardless of the blocking
of the input image).  Possibly a single large block causes
problems for imagine, though I'm not sure why that would
be.

You can force blocking using the BLOCKXSIZE and BLOCKYSIZE
parameters.  So,if you add -co BLOCKXSIZE=1024 -co BLOCKYSIZE=1024
when running gdal_translate you should get 1024x1024 tiles.

Check if that helps.

Note that the GDAL NITF writer is not really very sophisticated, and
will often be inadequate to reproduce an original NITF given as
input.  However, it is certainly my intent that it should produce a
valid file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mo at discover-aai.com  Wed Sep 17 16:16:21 2008
From: mo at discover-aai.com (Mo Wang)
Date: Wed Sep 17 16:16:23 2008
Subject: [gdal-dev] Problem in viewing NITF images created by
	GDAL_TRANSLATE
In-Reply-To: <2781A10E73694B22970693AD9C8957D5@discoveraai.office>
References: <9E8339A1A958CA43851FF336135F43ADC0755E@admin.discover-aai.office>
	<2781A10E73694B22970693AD9C8957D5@discoveraai.office>
Message-ID: <9E8339A1A958CA43851FF336135F43ADC0756E@admin.discover-aai.office>

Frank,

With the specified block size the problem has been resolved. Thank you
very much.

Mo

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Wednesday, September 17, 2008 4:00 PM
To: Mo Wang
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem in viewing NITF images created by
GDAL_TRANSLATE

On Wed, Sep 17, 2008 at 2:26 PM, Mo Wang <mo@discover-aai.com> wrote:
> Hi all,
>
>
>
> I used gdal_translate to make a complete copy of a nitf file and it
ran to
> completion. But the output image file can only be viewed partially on
a
> IMAGINE Viewer while the whole original image file can be viewed on
the
> Viewer. I believe that the data is there just it can not be viewed.


Mo,

It looks like the NITF writer normally writes the entire
NITF file as a single block image (regardless of the blocking
of the input image).  Possibly a single large block causes
problems for imagine, though I'm not sure why that would
be.

You can force blocking using the BLOCKXSIZE and BLOCKYSIZE
parameters.  So,if you add -co BLOCKXSIZE=1024 -co BLOCKYSIZE=1024
when running gdal_translate you should get 1024x1024 tiles.

Check if that helps.

Note that the GDAL NITF writer is not really very sophisticated, and
will often be inadequate to reproduce an original NITF given as
input.  However, it is certainly my intent that it should produce a
valid file.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gaffigan at sfos.uaf.edu  Thu Sep 18 00:29:39 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Thu Sep 18 00:29:42 2008
Subject: [gdal-dev] HowTo open NetCDF SUBDATASET and write to new file
In-Reply-To: <9c2015090809170835u62aa46c6qadb3f480f1e32561@mail.gmail.com>
References: <9c2015090809150913i3999a878jc247513c556fb806@mail.gmail.com>
	<52803.206.174.33.135.1221548743.squirrel@ssl.sfos.uaf.edu>
	<9c2015090809170835u62aa46c6qadb3f480f1e32561@mail.gmail.com>
Message-ID: <56186.206.174.44.249.1221712179.squirrel@ssl.sfos.uaf.edu>

Roger,

Hello.  Our examples differ in that you called the ReadAsArray() on a
single band, which returns an array with dimensions (ny,nx), and I called
it on the subdataset, which returns an array with dimensions
(nbands,ny,nx).  In my example the array returned has size (539,78,141),
where the two outer dimensions are concatenated into the single band
dimension.  The reshape() method is called on the array to get to the 4-d
form that is in the netcdf file.

Note, this works if gdal python bindings use numpy.  If bindings use
Numeric, then instead it should be either ds.ReadAsArray().resize(...) or
Numeric.reshape(ds.ReadAsArray(), ...).

I arrived at my example through the "banging away at it" method, too.

Steve


> Hi Steve,
>
> Thanks very much for the code snippet.  I figured out the following via
> experimentation.
>
> - Open specific layer by using:
> layer = gdal.Open('netCDF:"annual_mean.nc":temp')
>
> - Then get at the layer data data using the following:
> netcdf_band = layer.GetRasterBand(1)
>
> - Read in the data one row at a time:
>     for iY in range(y_size):
>       netcdf_data = netcdf_band.ReadAsArray(0, iY, x_size, 1)
>
> It works, but is a complete hack in the sense that I just plugged in stuff
> from a bunch of different scripts and banged away at it until it gave me
> what I needed.  Glad to see that it is similar to your code.  I'm curious
> about the ".reshape()" method that you pass to "ReadAsArray" above.  What
> does that do?
>
> Thanks again for the help.
>
> Roger
> --
>
> On Tue, Sep 16, 2008 at 12:05 AM, Steve Gaffigan
> <gaffigan@sfos.uaf.edu>wrote:
>
>> Hello.  Here's an example of reading an entire array for a single
>> subdataset.
>>
>> [gaffigan@dp2 AEFF]$ gdalinfo latest.nc
>> Driver: netCDF/Network Common Data Format
>> ...
>>  SUBDATASET_25_NAME=NETCDF:"latest.nc":TMP_GPML
>>  SUBDATASET_25_DESC=[49x11x78x141]
>> air_temperature_at_constant_altitude_above_m
>> ean_sea_level (8-bit integer)
>> ...
>>
>> [gaffigan@dp2 AEFF]$ python
>> >>> from osgeo import gdal
>> >>> ds = gdal.Open('NETCDF:"latest.nc":TMP_GPML')
>> >>> data = ds.ReadAsArray().reshape(49,11,78,141)
>>
>> Using a more generic call of the form below you can get at particular
>> hyperslabs:
>>
>> >>>
>> data=ds.GetRasterBand(i).ReadAsArray(xoff=x0,yoff=y0,win_xsize=nx,win_ysize=ny)
>>
>> where, for the above example, i=[1,...,539].
>>
>> Steve
>>
>>
>> > Hi List,
>> >
>> > I'm would like to use the Python bindings to open a specific
>> SUBDATASET
>> in
>> > a
>> > NetCDF file and read the contents.  I read in
>> > http://www.gdal.org/gdal_datamodel.html, under the "SUBDATASETS
>> domain"
>> > section, that I should be able to pass the "_NAME" parameter into
>> > GDALOpen()
>> > in order to do this, but I'm not exactly sure how.  Could someone pass
>> me
>> > a
>> > couple lines of Python that show how this is done?
>> >
>> > Thanks in advance.
>> >
>> > Roger
>> > --
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>


From legeochen at gmail.com  Thu Sep 18 04:14:41 2008
From: legeochen at gmail.com (legeochen)
Date: Thu Sep 18 04:14:43 2008
Subject: [gdal-dev] can gdal be used under linux arm
In-Reply-To: <82570.6996.qm@web110001.mail.gq1.yahoo.com>
References: <b508b9770809162238o715c591blfdeb447ce18ddc25@mail.gmail.com>
	<82570.6996.qm@web110001.mail.gq1.yahoo.com>
Message-ID: <b508b9770809180114g319144f6sbef39d466b9cd42b@mail.gmail.com>

That's what i want! thank you you  guys. Coooool

2008/9/17 Hamish <hamish_b@yahoo.com>

> legeochen:
>  > I used to write wince embeded programs with gdal reading
> > image data. but now i wanna to port them to linux arm. can
> > any tell me, is it possible? How can I complie gdal for
> > linux arm? t
>
>
> http://packages.debian.org/search?arch=arm&keywords=gdal-bin
>
>
> Hamish
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080918/50c0aa44/attachment-0001.html
From Robert.Beckwith at delorme.com  Thu Sep 18 10:48:20 2008
From: Robert.Beckwith at delorme.com (Robert Beckwith)
Date: Thu Sep 18 10:48:32 2008
Subject: [gdal-dev] projection locating image incorrectly.
Message-ID: <36F531EB4BDB014FBC95C2926E8D0BC6048963B4@franklin.earth.delorme.com>

I downloaded idaho9798landsatencw.sid and its companion files from 

http://www.idwr.idaho.gov/ftp/gisdata/Spatial/Datareq/

 

When using gdal this image is re-projected in the wrong location
(Africa)

Using ArcCatalog it ends up in the correct location.

 

Other MrSid files I have used work correctly using gdal, and I have
tried various methods.

 

Can anyone else confirm this? And any clues to why this is happening?

I looked back a number of versions in gdal and MrSID and it still ends
up incorrectly located.

 

...thanks 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080918/c99884d3/attachment.html
From rigal at rapideye.de  Thu Sep 18 10:42:48 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Thu Sep 18 11:00:18 2008
Subject: [gdal-dev] Fastest way to add the GeoTransform to a raster file
	with Python
Message-ID: <200809181642.48987.rigal@rapideye.de>

Hi all,
Since the method of Create, SetGeoTransform, etc... is "complicated" and 
unefficient from a performance point of view, what is the way to quickly add 
the GeoTransform, taken from a referenced raster to a raster that have lost 
the information.

Best regards,
Matthieu
-- 
Matthieu Rigal
Product Development

RapidEye AG			        Tel: +49-(0)3381-89 04 331
Molkenmarkt 30			Fax: +49-(0)3381-89 04 101
14776 Brandenburg/Havel
Germany				        http://www.rapideye.de

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From michele.sanges at gmail.com  Thu Sep 18 11:32:36 2008
From: michele.sanges at gmail.com (Michele Sanges)
Date: Thu Sep 18 11:32:38 2008
Subject: [gdal-dev] images with different resolution.
Message-ID: <1b62eaf70809180832w23a948e7k7d03ea8ae2417a5d@mail.gmail.com>

Hello all,

what is the best way to represent two raster images with different
resolution?
In other words, how do I calculate the offset respect to the upper left
corner of the region that includes both the images?
Is there a code example?

Thanks.
Michele Sanges
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080918/12017486/attachment.html
From warmerdam at pobox.com  Thu Sep 18 12:04:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 18 12:04:14 2008
Subject: [gdal-dev] images with different resolution.
In-Reply-To: <1b62eaf70809180832w23a948e7k7d03ea8ae2417a5d@mail.gmail.com>
References: <1b62eaf70809180832w23a948e7k7d03ea8ae2417a5d@mail.gmail.com>
Message-ID: <931f8ea90809180904q50ceea7fyd347af398ba8462e@mail.gmail.com>

On 9/18/08, Michele Sanges <michele.sanges@gmail.com> wrote:
> Hello all,
>
> what is the best way to represent two raster images with different
> resolution?
> In other words, how do I calculate the offset respect to the upper left
> corner of the region that includes both the images?
>  Is there a code example?

Michele,

I'm not quite clear on what you are looking for.

Two raster images with different resolutions would normally
be represented as distinct GDAL datasets, each with their
own geotransform indicating their original and pixel size.

You might find it helpful to read over the section on the
geotransform in the data model document:

  http://www.gdal.org/gdal_datamodel.html

If you have the georeferenced origin of a region,and wish
to determine the georeferenced distance from there to the
origin of a particular image you would just subtract the
origin of that images geotransform from the region's origin.
Note that the geotransforms origin is the first and fourth
element of the array for x and y respctively.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From oliver.eichler at gmx.de  Thu Sep 18 12:09:59 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Thu Sep 18 12:07:03 2008
Subject: [gdal-dev] images with different resolution.
In-Reply-To: <1b62eaf70809180832w23a948e7k7d03ea8ae2417a5d@mail.gmail.com>
References: <1b62eaf70809180832w23a948e7k7d03ea8ae2417a5d@mail.gmail.com>
Message-ID: <200809181809.59327.oliver.eichler@gmx.de>

On Thursday, 18. September 2008 17:32:36 Michele Sanges wrote:
> Hello all,
>
> what is the best way to represent two raster images with different
> resolution?
> In other words, how do I calculate the offset respect to the upper left
> corner of the region that includes both the images?
> Is there a code example?
>
> Thanks.
> Michele Sanges

Hi Michele 

Use gdal_translate to equalize the resolution ;) 

Or you equalize the maps on-the-fly by feeding the right parameters to 
RasterIO. The current code in svn of QLandkarte GT (www.qlandkarte.org) does 
what you want. Have a look CMapQMAP::draw(QPainter& p). 

Oliver
From warmerdam at pobox.com  Thu Sep 18 12:09:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 18 12:09:16 2008
Subject: [gdal-dev] Fastest way to add the GeoTransform to a raster file
	with Python
In-Reply-To: <200809181642.48987.rigal@rapideye.de>
References: <200809181642.48987.rigal@rapideye.de>
Message-ID: <931f8ea90809180909t6ca74495v8bc23fe606adb84b@mail.gmail.com>

On 9/18/08, Matthieu Rigal <rigal@rapideye.de> wrote:
> Hi all,
>  Since the method of Create, SetGeoTransform, etc... is "complicated" and
>  unefficient from a performance point of view, what is the way to quickly add
>  the GeoTransform, taken from a referenced raster to a raster that have lost
>  the information.

Matthieu,

I assume the approach that is complicated is to create a
whole new image with Create(), setting the geotransform on
that and then copying over all the image data.  is that what
you mean?

What format of imagery are you working with?  There are
different limitations on different drivers with regard to updating
georeferencing "in place".  For for some formats you can just
open a dataset in update mode, and call SetGeoTransform()
to update the georeferencing.  For other formats this is not
possible.

Some formats support world files with various extensions.  For
these formats the easiest approach might be to just manually
write out a world file.

>From the commandline the easiest way is to use gdal_translate
and the -a_ullr switch though internally this is of course creating
a new dataset and copying everything over.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Thu Sep 18 12:15:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 18 12:15:49 2008
Subject: [gdal-dev] projection locating image incorrectly.
In-Reply-To: <36F531EB4BDB014FBC95C2926E8D0BC6048963B4@franklin.earth.delorme.com>
References: <36F531EB4BDB014FBC95C2926E8D0BC6048963B4@franklin.earth.delorme.com>
Message-ID: <931f8ea90809180915y6d0bf8a2o715e37b1a93b9cbf@mail.gmail.com>

On 9/18/08, Robert Beckwith <Robert.Beckwith@delorme.com> wrote:
>
>
>
>
> I downloaded idaho9798landsatencw.sid and its companion files from
>
> http://www.idwr.idaho.gov/ftp/gisdata/Spatial/Datareq/
>
>
>
> When using gdal this image is re-projected in the wrong location (Africa)

Robert,

I review the .aux.xml file for this dataset and it looks like it has
everything needed by GDAL to correctly place the file.  You
did have this, right?  I can't download the big file (I'm stuck on
dialup currently due to technical problems) so I can't easily
check what is going on.  I *suspect* that there is internal
georeferencing in the .sid and GDAL it using it in preference
to the info the .aux.xml or perhaps giving preference to the
.sdw worldfile.

What does a gdalinfo report on this dataset look like? Does it
change if you delete the .sdw file?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From ivan.lucena at pmldnet.com  Thu Sep 18 12:42:53 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Thu Sep 18 12:42:56 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gRmFzdGVzdCB3YXkgdG8gYWRkIHRoZSBHZW9UcmFuc2Zvcm0gdG8gYSByYXN0ZXIgZmlsZQl3aXRoIFB5dGhvbg==?=
Message-ID: <20080918164254.16745.qmail@s466.sureserver.com>

Frank,

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  Subject: Re: [gdal-dev] Fastest way to add the GeoTransform to a raster file	with Python
>  Sent: Sep 18 '08 16:09
>  
>  On 9/18/08, Matthieu Rigal <rigal@rapideye.de> wrote:
>  > Hi all,
>  >??Since the method of Create, SetGeoTransform, etc... is "complicated" and
>  >??unefficient from a performance point of view, what is the way to quickly add
>  >??the GeoTransform, taken from a referenced raster to a raster that have lost
>  >??the information.
>  
>  Matthieu,
>  
>  I assume the approach that is complicated is to create a
>  whole new image with Create(), setting the geotransform on
>  that and then copying over all the image data.??is that what
>  you mean?
>  
>  What format of imagery are you working with???There are
>  different limitations on different drivers with regard to updating
>  georeferencing "in place".??For for some formats you can just
>  open a dataset in update mode, and call SetGeoTransform()
>  to update the georeferencing.??

Wouldn't be fair to say that some formats also requires a call to FlushCache() afterwards?

>  For other formats this is not
>  possible.
>  
>  Some formats support world files with various extensions.??For
>  these formats the easiest approach might be to just manually
>  write out a world file.
>  
>  >From the commandline the easiest way is to use gdal_translate
>  and the -a_ullr switch though internally this is of course creating
>  a new dataset and copying everything over.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush????| Geospatial Programmer for Rent
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

Best regards,

Ivan

From epatton at nrcan.gc.ca  Thu Sep 18 12:57:29 2008
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Thu Sep 18 12:57:31 2008
Subject: [gdal-dev] Error in libjasper.a during 'make' in gdal 1.5.2:
	relocation R_X86_64_32 against `a local symbol' can not be used
References: <59165.206.174.44.249.1221236416.squirrel@ssl.sfos.uaf.edu>
Message-ID: <1715AFFECC318F4995A52EEE622FC30106382D@s0-ott-x4.nrn.nrcan.gc.ca>

>You want to build jasper with CFLAGS="-fPIC -m64", as you've done.  But
>you just want CXXFLAGS="-m64", without "-fPIC", for the gdal build.  Be
>sure to unset CFLAGS, or open a new terminal to get a fresh environment,
>before gdal build.  Also, might need to run ldconfig after building
>jasper, before gdal build.
>
>  # cd jasper src dir
>  export CFLAGS="-fPIC -m64"
>  ./configure
>  make; make install
>  unset CFLAGS
>  /sbin/ldconfig
>
>  # cd gdal src dir
>  export CXXFLAGS="-m64"
>  ./configure ...
>  make ...
>
>Steve

I configured jasper and gdal as you instructed. Jasper built fine with no
errors, however, gdal still complains about libstdc++:

/usr/bin/ld: /usr/lib/libstdc++.a(functexcept.o): relocation R_X86_64_32 against `vtable for std::exception' can not be used when making a shared object; recompile with -fPIC
/usr/lib/libstdc++.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.5.2'
make: *** [check-lib] Error 2

Is this message saying to recompile libstdc++ with -fPIC? I'm using the standard gcc 4.2.4 
package that is installed via Ubuntu 8.04 package manager Synaptic, so there's nothing to
recompile...?

~ Eric.


From Robert.Beckwith at delorme.com  Thu Sep 18 13:58:00 2008
From: Robert.Beckwith at delorme.com (Robert Beckwith)
Date: Thu Sep 18 13:58:09 2008
Subject: [gdal-dev] projection locating image incorrectly.
In-Reply-To: <931f8ea90809180915y6d0bf8a2o715e37b1a93b9cbf@mail.gmail.com>
References: <36F531EB4BDB014FBC95C2926E8D0BC6048963B4@franklin.earth.delorme.com>
	<931f8ea90809180915y6d0bf8a2o715e37b1a93b9cbf@mail.gmail.com>
Message-ID: <36F531EB4BDB014FBC95C2926E8D0BC6048963E0@franklin.earth.delorme.com>

Yes, had the aux.xml
There is internal referencing in the sid file (I removed all other files
to check) 
I assume this as it was able to build a projection, but the wrong one
(Maybe missing the origin?). 

Gdalinfo for the aux file looks good.

Could not run gdalinfo on the .sid or .aux.xml file. But looking at the
xml it looks fine.
Mrsidinfo gives me some of the information but not quite enough.

Does an easy way exist to force the use of the .aux or aux.xml for
projection over what is in the sid file?

How does it take priority of what projection to use from what file? I am
assuming the first one it finds (sid->aux.xml->aux). 


Thanks...

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, September 18, 2008 12:16 PM
To: Robert Beckwith
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] projection locating image incorrectly.

On 9/18/08, Robert Beckwith <Robert.Beckwith@delorme.com> wrote:
>
>
>
>
> I downloaded idaho9798landsatencw.sid and its companion files from
>
> http://www.idwr.idaho.gov/ftp/gisdata/Spatial/Datareq/
>
>
>
> When using gdal this image is re-projected in the wrong location
(Africa)

Robert,

I review the .aux.xml file for this dataset and it looks like it has
everything needed by GDAL to correctly place the file.  You
did have this, right?  I can't download the big file (I'm stuck on
dialup currently due to technical problems) so I can't easily
check what is going on.  I *suspect* that there is internal
georeferencing in the .sid and GDAL it using it in preference
to the info the .aux.xml or perhaps giving preference to the
.sdw worldfile.

What does a gdalinfo report on this dataset look like? Does it
change if you delete the .sdw file?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From matt.wilkie at gov.yk.ca  Thu Sep 18 15:06:06 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Sep 18 15:06:23 2008
Subject: [gdal-dev] Fastest way to add the GeoTransform to a raster file
	with Python
In-Reply-To: <200809181642.48987.rigal@rapideye.de>
References: <200809181642.48987.rigal@rapideye.de>
Message-ID: <48D2A69E.4090606@gov.yk.ca>

Will this work?

http://maphew.googlecode.com/svn/trunk/gis/gdal_extras/bin/gdalcopyproj.py


matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Matthieu Rigal wrote:
> Hi all,
> Since the method of Create, SetGeoTransform, etc... is "complicated" and 
> unefficient from a performance point of view, what is the way to quickly add 
> the GeoTransform, taken from a referenced raster to a raster that have lost 
> the information.
> 
> Best regards,
> Matthieu

From Steven.Mullins at dmme.virginia.gov  Thu Sep 18 15:37:20 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Thu Sep 18 15:39:17 2008
Subject: [gdal-dev] Add z values to polylines
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8303C23789@exch2k1.dmmenet.mme.state.va.us>

I have a large set of contoured data which has a z value in an attribute field.  I would like to copy this value to the spatial z.  I think this is going to require a bit of python.  Any pointers?

Thanks ahead,

Steve
From warmerdam at pobox.com  Thu Sep 18 16:06:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 18 16:07:00 2008
Subject: [gdal-dev] Fastest way to add the GeoTransform to a raster file
	with Python
In-Reply-To: <20080918164254.16745.qmail@s466.sureserver.com>
References: <20080918164254.16745.qmail@s466.sureserver.com>
Message-ID: <931f8ea90809181306h38c1149ai56d534ede4b6717c@mail.gmail.com>

On 9/18/08, Lucena, Ivan <ivan.lucena@pmldnet.com> wrote:
> Frank,
...
> Wouldn't be fair to say that some formats also requires a call to FlushCache() afterwards?

Ivan,

FlushCache may help push the updated geotransform out to the
file immediately for some formats.  But if you are just going to
close the dataset then that should already do the equivelent of
a FlushCache().  So, FlushCache() is only of use to try and
push updates out to a file without closing the file.

Whether it is implemented or not varies from driver to driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Thu Sep 18 16:20:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 18 16:20:37 2008
Subject: [gdal-dev] Add z values to polylines
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8303C23789@exch2k1.dmmenet.mme.state.va.us>
References: <AckZxfeub2Jwt2C0SDqbrg1EcKDJYw==>
	<1C6192D3F2755C45A2D0658D6FE5ED8303C23789@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <931f8ea90809181320i50606e9dw92fa9060b8a41c18@mail.gmail.com>

On 9/18/08, Mullins, Steven <Steven.Mullins@dmme.virginia.gov> wrote:
> I have a large set of contoured data which has a z value in an attribute field.  I would like to copy this value to the spatial z.  I think this is going to require a bit of python.  Any pointers?

Steve,

I would suggest you look at:

  http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/vec_tr.py

It shows updating the geometries of a set of vectors as part of
copying them.  Then you just need to figure out how to get
the attributes out of th features and passed into the processing
functions.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From hamish_b at yahoo.com  Thu Sep 18 18:53:24 2008
From: hamish_b at yahoo.com (Hamish)
Date: Thu Sep 18 18:53:27 2008
Subject: [gdal-dev] Add z values to polylines
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8303C23789@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <305908.28755.qm@web110009.mail.gq1.yahoo.com>

Steven Mullins wrote:
> I have a large set of contoured data which has a z value in
> an attribute field.  I would like to copy this value to the
> spatial z.  I think this is going to require a bit of
> python.  Any pointers?

this will do it: (hcolumn=)
  http://grass.osgeo.org/grass64/manuals/html64_user/v.extrude.html


Hamish



      

From michele.sanges at gmail.com  Fri Sep 19 04:58:27 2008
From: michele.sanges at gmail.com (Michele Sanges)
Date: Fri Sep 19 04:58:30 2008
Subject: [gdal-dev] images with different resolution.
Message-ID: <1b62eaf70809190158ie9fe454hd97c2d3fc29bb39d@mail.gmail.com>

Hi,

thanks for your replies.

Suppose that in my application the region is empty, there are not maps
loaded.
The user opens a map with a its own resolution; now the region is the whole
map.
Then the user opens another map with resolution different from the previous
one.

In order to represent simultaneously the two maps, I need to set one of the
two resolution as region's resolution (I think the more high) and
subsampling the data of the other map.

As Oliver as said, this is made with the RasterIO function, I think with the
nPixelSpace parameter. But what is the relation between the parameters
nPixelSpace to pass to the the RasterIO function, and the adfGeoTransform[]
of the two maps?

Thanks a lot.
Michele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080919/47666280/attachment.html
From arb at sat.dundee.ac.uk  Fri Sep 19 05:01:02 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Sep 19 05:03:13 2008
Subject: [gdal-dev] gdalwarp crash when reading
Message-ID: <op.uhp0n0jkqw3wu1@titan>

Hello

gdalwarp is crashing and dumping core, my command line is:

gdalwarp -tps -t_srs EPSG:23031 -r bilinear -tr 1000 100 input.vrt output.tif

where the vrt references a raw binary (uint16) array and two raw float arrays
of latitude and longitude.

Maybe the stack backtrace will indicate something obvious to someone?
For example should pBuffer=0 in RawRasterBand::Read ??

#0  0xb731a1ba in memcpy () from /lib/tls/libc.so.6
#1  0xb730dc06 in _IO_file_xsputn () from /lib/tls/libc.so.6
#2  0xb730eac8 in _IO_sgetn () from /lib/tls/libc.so.6
#3  0xb7302f20 in fread () from /lib/tls/libc.so.6
#4  0xb7bf2199 in VSIUnixStdioHandle::Read (this=0xb10d5000, pBuffer=0x0,
     nSize=1, nCount=2) at cpl_vsil_unix_stdio_64.cpp:169
#5  0xb7bf118a in VSIFReadL (pBuffer=0x0, nSize=1, nCount=2, fp=0xb10d5000)
     at cpl_vsil.cpp:423
#6  0xb7b437af in RawRasterBand::Read (this=0xb10d5000, pBuffer=0x0, nSize=0,
     nCount=0) at rawdataset.cpp:842
#7  0xb7b4399e in RawRasterBand::AccessLine (this=0x8075408, iLine=0)
     at rawdataset.cpp:228
#8  0xb7b43ae0 in RawRasterBand::IReadBlock (this=0x8075408, nBlockXOff=0,
     nBlockYOff=0, pImage=0xa0889c8) at rawdataset.cpp:276
#9  0xb7bd94e8 in GDALRasterBand::GetLockedBlockRef (this=0x8075408,
     nXBlockOff=0, nYBlockOff=0, bJustInitialize=0) at gdal_priv.h:335
#10 0xb7be5b40 in GDALRasterBand::IRasterIO (this=0x8075408, eRWFlag=GF_Read,
     nXOff=0, nYOff=0, nXSize=1009, nYSize=1029, pData=0xb10dd008,
     nBufXSize=1009, nBufYSize=1029, eBufType=GDT_UInt16, nPixelSpace=2,
     nLineSpace=2018) at rasterio.cpp:89

Andrew


P.S.  The input VRT is

<VRTDataset rasterXSize="2048" rasterYSize="1021">
   <Metadata domain="GEOLOCATION">
     <MDI key="X_DATASET">input.lon.vrt</MDI>
     <MDI key="X_BAND">1</MDI>
     <MDI key="Y_DATASET">input.lat.vrt</MDI>
     <MDI key="Y_BAND">1</MDI>
     <MDI key="PIXEL_OFFSET">0</MDI>
     <MDI key="LINE_OFFSET">0</MDI>
     <MDI key="PIXEL_STEP">1</MDI>
     <MDI key="LINE_STEP">1</MDI>
   </Metadata>
   <SRS>GEOGCS[&quot;WGS 72&quot;,DATUM[&quot;WGS_1972&quot;,SPHEROID[&quot;WGS 72&quot;,6378135,298.26,AUTHORITY[&quot;EPSG&quot;,&quot;7043&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6322&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4322&quot;]]</SRS>
   <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
     <ColorInterp>Red</ColorInterp>
     <SourceFilename relativetoVRT="1">input.dat.ch1</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>0</PixelOffset>
     <LineOffset>0</LineOffset>
     <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

and the lat/lon VRT is

<VRTDataset rasterXSize="2048" rasterYSize="1021">
   <SRS>GEOGCS[&quot;WGS 72&quot;,DATUM[&quot;WGS_1972&quot;,SPHEROID[&quot;WGS 72&quot;,6378135,298.26,AUTHORITY[&quot;EPSG&quot;,&quot;7043&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6322&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4322&quot;]]</SRS>
   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">input.lat</SourceFilename>
     <ByteOrder>LSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

An strace shows the input files (input.dat.ch1, input.lat, input.lon) are being opened successfully.
From schut at sarvision.nl  Fri Sep 19 05:55:00 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Sep 19 05:55:04 2008
Subject: [gdal-dev] Re: GDAL version for reading TerrasarX data
In-Reply-To: <0981a301-889a-4662-a0d5-63a579864eb9@y21g2000hsf.googlegroups.com>
References: <a59731e7-bc26-4319-b4e9-1d399edc1c66@79g2000hsk.googlegroups.com>
	<48D24BA5.8060607@sarvision.nl>
	<0981a301-889a-4662-a0d5-63a579864eb9@y21g2000hsf.googlegroups.com>
Message-ID: <48D376F4.7020103@sarvision.nl>

Severino,

first: please always include the gdal list in your replies. Others might 
want to follow the discussion, might know answers, and everything will 
be archived and searcheable later when someone has the same problem. You 
don't even need to include my private email address, as I'm following 
gdal-dev pretty closely and will answer on threads that I participated 
in (provided I know an answer).

That being said, I'd say try to tackle one problem at a time. First make 
sure you know your gdal works, and works for terrasar-x data. Try 
running some gdal commandline apps (gdalinfo, gdal_translate) on files 
you know it should be able to read (e.g. geotiff or the like), and check 
whether everything works OK. Then run gdalinfo on a terrasar-x file (use 
the .xml file for that, not the cosar file). it should give you some 
basic info about the terrasar data, probably with lat and lon for the 
corner gcp's flipped when you did not patch your gdal before building 
(see the bug report I mentioned). When you have that working, try otb 
(don't forget: use the terrasar .xml file as input).
When something fails and you don't know why or how to fix it, please 
post to this list again (or, in case of an otb related error, to the otb 
list), including what fails (your command line input, or code) and the 
error if you get one, otherwise it will be very hard for us to know what 
possibly went wrong and how to proceed.

Good luck!
Vincent.

Severino wrote:
> Hi Vincent,
> thank you very much for your information.
> I have compiled GDAL 1.5.0 and also GDAL 1.5.2 but I get a crash with
> both of them. I have to see if I can identify the reason. This happens
> just using otbReadImageInfo.
> Regards
> Severino
> 
> On 18 sep, 14:37, Vincent Schut <sc...@sarvision.nl> wrote:
>> Severino wrote:
>>> which version of GDAL has to be installed with OTB to read TerrasarX
>>> cosar format data?
>> Hi Severino,
>>
>> I don't know for sure if 1) OTB relies on gdal to read terrasar data,
>> and 2) if there is an official gdal release incorporating terrasar-x
>> support. You might want to post that question on the gdal users mailing
>> list.
>> FYI, I am using gdal svn trunk here, and that still contains a bug in
>> gdal reading the terrasar corner gcp's. See this gdal conversation:
>> <http://n2.nabble.com/terrasar-x-driver-swaps-gcp-lon-lat-tp1057723p10...>
>> and this gdal bug: <http://trac.osgeo.org/gdal/ticket/2565>, which
>> includes a patch.
>>
>> Cheers,
>> Vincent.
>>
>>
>>
>> - Ocultar texto de la cita -
>>
>> - Mostrar texto de la cita -
> 

From arb at sat.dundee.ac.uk  Fri Sep 19 06:19:12 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Sep 19 06:19:16 2008
Subject: [gdal-dev] gdalwarp crash when reading
In-Reply-To: <op.uhp0n0jkqw3wu1@titan>
References: <op.uhp0n0jkqw3wu1@titan>
Message-ID: <op.uhp4aapfqw3wu1@titan>

On Fri, 19 Sep 2008 10:01:02 +0100, Andrew Brooks <arb@sat.dundee.ac.uk> wrote:
>
> gdalwarp is crashing and dumping core
>
> <VRTDataset rasterXSize="2048" rasterYSize="1021">
>    <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
>      <SourceFilename relativetoVRT="1">input.dat.ch1</SourceFilename>
>      <ImageOffset>0</ImageOffset>
>      <PixelOffset>0</PixelOffset>
>      <LineOffset>0</LineOffset>
>    </VRTRasterBand>
> </VRTDataset>

It turns out that the PixelOffset value of zero caused the crash.  I set them
to zero for testing something but I am surprised that PixelOffset=0 would cause
such a crash!

Andrew
From lists at dipole-consulting.com  Fri Sep 19 06:57:49 2008
From: lists at dipole-consulting.com (Didrik Pinte)
Date: Fri Sep 19 06:57:42 2008
Subject: [gdal-dev] mrsid : coordinate system problem
In-Reply-To: <1221662639.4255.74.camel@ddp.simpson>
References: <1221658390.4255.27.camel@ddp.simpson>
	<1221659933.4255.35.camel@ddp.simpson>
	<1221662639.4255.74.camel@ddp.simpson>
Message-ID: <1221821869.31518.82.camel@ddp.simpson>

On Wed, 2008-09-17 at 16:43 +0200, Didrik Pinte wrote:
> 
> Is there a way to force GDAL to use the .sdw file ? 

Hi,

The only way seems to change the behaviour in mrsiddataset.cpp as shown
here 

http://www.nabble.com/Georeferencing-Mrsid-raster-file-with-a-world-file-td13700397.html

A dirty workaround but it works ;-)

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080919/3a48d120/attachment.bin
From oliver.eichler at gmx.de  Fri Sep 19 07:27:45 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Fri Sep 19 07:27:48 2008
Subject: [gdal-dev] images with different resolution.
In-Reply-To: <1b62eaf70809190158ie9fe454hd97c2d3fc29bb39d@mail.gmail.com>
References: <1b62eaf70809190158ie9fe454hd97c2d3fc29bb39d@mail.gmail.com>
Message-ID: <20080919112745.275690@gmx.net>


> As Oliver as said, this is made with the RasterIO function, I think with
> the
> nPixelSpace parameter. But what is the relation between the parameters
> nPixelSpace to pass to the the RasterIO function, and the
> adfGeoTransform[]
> of the two maps?

Hi Michele

The trick is to define a common viewport, either in lon/lat or cartesian coordinates of unit meter. Now you can derive the needed offset and size in pixel you need to read from the files to display the visible parts in the viewport rectangle. And you can derive the offset of the left top corner of each tile within the viewport rectangle. 

Please keep in mind that both map tiles need to have the same projection to work with RasterIO. 

As said QLandkarte GT does exactly what you want. You just have to read the code. The adfGeoTransform is read in CMapFile::CMapFile(..). 

All map files are combined by CMapLevel to one layer of same projection. And finally the CMapQMAP object that does the rendering.  

If you have a look at the CMapQMAP::draw() method you will notice that it calculates the viewport rectangle in [m] first. As the next step it will calculate the intersecting rectangle within the map area. This intersecting rectangle is used to calculate the offset and the amount of pixels to read. The scale factors xzoomFactor and yzoomFactor are calculated on the base of the first file and used together with the overall zoom factor to scale the needed output pixel size. 

Oliver



From rigal at rapideye.de  Fri Sep 19 08:43:31 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Fri Sep 19 08:43:40 2008
Subject: [gdal-dev] Fastest way to add the GeoTransform to a raster file
	with Python
In-Reply-To: <48D2A69E.4090606@gov.yk.ca>
References: <200809181642.48987.rigal@rapideye.de> <48D2A69E.4090606@gov.yk.ca>
Message-ID: <200809191443.31922.rigal@rapideye.de>

Thanks to all the three for your quick responses !

I am getting several infos from the mailing list archives since one year, but 
since I couldn't get more infos about that subject, I decided to also ask a 
question here, and I'm happy to have done that !

My first question was to unprecise, sorry. I forgot to mention that I'm 
working with GTiff palette images.

So, dear Matt, your script does not work, since even in update mode, I am not 
able to set a GeoTransform to it. I get this error:
ERROR 6: SetGeoTransform() is only supported on newly created GeoTIFF files.

From what I understand, there is no other way as to Create, set a 
GeoTransform, and copy the layers.

I will precise what I want to do :
After getting an optimized palette version of original R, G, B GeoTiff 
channels, through transformation with the PIL library, this image became 
pixel/line.

I want to reproject this image to a spherical mercator projection. If I use 
the Create way, there will be one step more.

At the beginning I wanted to modify the source dataset, but there might a way 
to add the GeoTransform "on-the-fly", before the Reprojection... but I 
couldn't find one... I'll accept all suggestions !

Frank, if there is no way  to solve the upper "reflexion", and because you 
mentioned the possible use of the gdal utilities, would you recommend to call 
the utility from within the python script or rather to use the module's 
functions (I'll go for the second one naturally).

Best regards,
Matthieu

On Thursday 18 September 2008 21:06:06 you wrote:
> Will this work?
>
> http://maphew.googlecode.com/svn/trunk/gis/gdal_extras/bin/gdalcopyproj.py
>
>
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
> Matthieu Rigal wrote:
> > Hi all,
> > Since the method of Create, SetGeoTransform, etc... is "complicated" and
> > unefficient from a performance point of view, what is the way to quickly
> > add the GeoTransform, taken from a referenced raster to a raster that
> > have lost the information.
> >
> > Best regards,
> > Matthieu

On Thursday 18 September 2008 18:09:13 you wrote:
> Matthieu,
>
> I assume the approach that is complicated is to create a
> whole new image with Create(), setting the geotransform on
> that and then copying over all the image data.  is that what
> you mean?
>
> What format of imagery are you working with?  There are
> different limitations on different drivers with regard to updating
> georeferencing "in place".  For for some formats you can just
> open a dataset in update mode, and call SetGeoTransform()
> to update the georeferencing.  For other formats this is not
> possible.
>
> Some formats support world files with various extensions.  For
> these formats the easiest approach might be to just manually
> write out a world file.
>
> From the commandline the easiest way is to use gdal_translate
> and the -a_ullr switch though internally this is of course creating
> a new dataset and copying everything over.
>
> Best regards,


-- 
Matthieu Rigal
Product Development

RapidEye AG			        Tel: +49-(0)3381-89 04 331
Molkenmarkt 30			Fax: +49-(0)3381-89 04 101
14776 Brandenburg/Havel
Germany				        http://www.rapideye.de

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From lthompson at extendthereach.com  Fri Sep 19 10:52:02 2008
From: lthompson at extendthereach.com (Linda Thompson)
Date: Fri Sep 19 10:53:13 2008
Subject: [gdal-dev] MapInfo error handling
Message-ID: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: mitab_mapfile.zip
Type: application/x-zip-compressed
Size: 488 bytes
Desc: mitab_mapfile.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080919/dd12085c/mitab_mapfile.bin
From mateusz at loskot.net  Fri Sep 19 12:16:23 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Sep 19 12:16:29 2008
Subject: [gdal-dev] MapInfo error handling
In-Reply-To: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
References: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
Message-ID: <48D3D057.3030303@loskot.net>

Linda Thompson wrote:
> We have quite few customers with problems in their Mapinfo .map files.
> We would like to allow the user to see the .dat information and report
> the problem with their .map file.  I have created a patch for the
> problem that allows me to continue displaying data for the customer and
> allows more flexibility in dealing with the error.
> 
> Do you think this may be a benefit to others using MITAB?

Linda,

Best place to submit patches is GDAL Trac system:

http://trac.osgeo.org/gdal/

Attach patch as a plain text file providing also info about GDAL version
you used to generate your patch.

If you generate patch using SVN copy, you can do it this way:

$ cd /path/to/gdal/trunk
$ svn diff > myfile.patch

And attach myfile.patch to a ticket on Trac.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Fri Sep 19 12:29:53 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Sep 19 12:29:59 2008
Subject: [gdal-dev] MapInfo error handling
In-Reply-To: <op.uhqk4eidqw3wu1@titan>
References: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
	<48D3D057.3030303@loskot.net> <op.uhqk4eidqw3wu1@titan>
Message-ID: <48D3D381.8020302@loskot.net>

Andrew Brooks wrote:
> On Fri, 19 Sep 2008 17:16:23 +0100, Mateusz Loskot <mateusz@loskot.net> wrote:
>> Best place to submit patches is GDAL Trac system:
> 
> Hi
> 
> I submitted a patch some time ago, please could someone apply it?
> 
> http://trac.osgeo.org/gdal/ticket/2501

Andrew,

Thanks for the patch. Let's wait for review.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Fri Sep 19 13:22:33 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 19 13:22:35 2008
Subject: [gdal-dev] MapInfo error handling
In-Reply-To: <48D3D381.8020302@loskot.net>
References: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
	<48D3D057.3030303@loskot.net> <op.uhqk4eidqw3wu1@titan>
	<48D3D381.8020302@loskot.net>
Message-ID: <931f8ea90809191022u5f4dfda5v2a80e699641fefc1@mail.gmail.com>

Andrew,

Unfortunately, my brief review of #2501 ran into complications and I
backed away from it and haven't had time to get back to it. I'm afraid
there is no real way to know when the ticket will be addressed.  I'm
unlikely to return to it unless geolocation arrays come back to the top
of my stack for some unrelated reason.

But at least with the ticket in the system, the issue and your suggestions
are not lost.

While we (GDAL) do welcome patches.  The truth is that i have broken
lots of things in the past (sometimes subtle breaks) by applying patches
without decent review and understanding.  So now I'm a bit gunshy about
applying tricky patches without careful review.

Thus, some ticket lie dormant for long periods of time.

Best regards,

On 9/19/08, Mateusz Loskot <mateusz@loskot.net> wrote:
> Andrew Brooks wrote:
>
> > On Fri, 19 Sep 2008 17:16:23 +0100, Mateusz Loskot <mateusz@loskot.net> wrote:
>  >> Best place to submit patches is GDAL Trac system:
>  >
>
> > Hi
>  >
>  > I submitted a patch some time ago, please could someone apply it?
>  >
>  > http://trac.osgeo.org/gdal/ticket/2501
>
>  Andrew,
>
>  Thanks for the patch. Let's wait for review.
>
>
>  Best regards,
>  --
>  Mateusz Loskot, http://mateusz.loskot.net
>  Charter Member of OSGeo, http://osgeo.org
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From paar at lenne3d.com  Sat Sep 20 12:00:58 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Sat Sep 20 12:01:03 2008
Subject: [gdal-dev] Out of Office
Message-ID: <216e69a1bfad4013b6b9bad027b5562a@0519d87aa35449e38545ed9a932ad0f9>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From liu_daojie at 163.com  Sun Sep 21 07:36:26 2008
From: liu_daojie at 163.com (liu_daojie)
Date: Sun Sep 21 07:51:33 2008
Subject: [gdal-dev] how can use gdalce.dll and gdalce_i.lib in vc2005 smart
 device application to open image(tif)?
Message-ID: <16381848.282491221996986557.JavaMail.coremail@app167.163.com>

 
 
 
 
 

 hello:
   I have successfully used gdal in vc6 to  open image(.jpg,.png...) .but in evc platform i have get  gdalce.dll  and gdalce_i.lib in vc2005 smart device application.i can not know how to use them to open image? please tell me
  
   thanks 
 
 
 





[] ""
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080921/ade8aa99/attachment.html
From mateusz at loskot.net  Sun Sep 21 08:34:02 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Sep 21 08:34:08 2008
Subject: [gdal-dev] how can use gdalce.dll and gdalce_i.lib in vc2005
	smart device application to open image(tif)?
In-Reply-To: <16381848.282491221996986557.JavaMail.coremail@app167.163.com>
References: <16381848.282491221996986557.JavaMail.coremail@app167.163.com>
Message-ID: <48D63F3A.70100@loskot.net>

liu_daojie wrote:
> 
> hello: I have successfully used gdal in vc6 to  open 
> image(.jpg,.png...) .but in evc platform i have get  gdalce.dll  and 
> gdalce_i.lib in vc2005 smart device application.i can not know how
> to use them to open image? please tell me


I've already replied to your first e-mail you sent directly to me:

------------------------------------------------------------------
Have you learned how to use GDAL in general on Windows desktop?
How to build client application with Visual Studio 2005?
Have you read GDAL tutorial (http://gdal.org/gdal_tutorial.html) ?

You need to do this first and then you will be prepared to move to
Windows CE platofrm.

Also, best place to ask this kind of questions is gdal-dev mailing list

http://lists.osgeo.org/mailman/listinfo/gdal-dev/

So, other uses have chance to reply and learn from replies.
------------------------------------------------------------------


Now, if you know how to use eVC 4.0 IDE and you are having problems with
using Visual Studio 2005, then you have to learn how to use VS2005.
This is not related to GDAL but to VS2005.

Please, jump into MSDN Library and read about using VS2005, creating new
projects, adding DLL files as Additional Dependencies, etc.

Also, don't forget to ask for help on MSDN forums:

http://forums.microsoft.com/MSDN/default.aspx?siteid=1

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sun Sep 21 12:05:10 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Sep 21 12:05:16 2008
Subject: [gdal-dev] EUMETSAT Wavelet Transform Software 2.04
Message-ID: <48D670B6.5050200@loskot.net>

Folks,

This may be interesting to GDAL MSG driver users:
EUMETSAT has released new version of Public Wavelet Transform
Decompression Library (aka Wavelet Transform Software).

Latest version number is 2.04 and is available to download (after
registration) from the EUMETSAT website:

http://www.eumetsat.int/Home/Main/Access_to_Data/User_Support/SP_1117714787347

The new version includes support for recent line of GCC 4.x

"Modification of the source code to support a newer version of gcc
compiler. gcc 4.2.x and previous versions are now supported."

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From liu_daojie at 163.com  Sun Sep 21 23:31:33 2008
From: liu_daojie at 163.com (liu_daojie)
Date: Sun Sep 21 23:46:52 2008
Subject: [gdal-dev] how can use gdalce.dll and gdalce_i.lib in vc2005	smart
 device application to open image(tif)?
In-Reply-To: <20080921160010.3C622E00CF3@lists.osgeo.org>
References: <20080921160010.3C622E00CF3@lists.osgeo.org>
Message-ID: <7555319.585481222054293316.JavaMail.coremail@bj163app108.163.com>

hello:
  I have tried to use  gdalce.dll and gdalce_i.lib  in vc2005 smart device application to open image(tif)?,but I can not get the best way ,can you help me? 
   thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080922/a54d720c/attachment.html
From schut at sarvision.nl  Mon Sep 22 02:48:21 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Sep 22 02:48:25 2008
Subject: [gdal-dev] small typo in dox for gdal_sieve
Message-ID: <48D73FB5.4010706@sarvision.nl>

Frank,

a small typo has slipped into the gdal_sieve.dox file:

-4:
     Four connectedness should be used when determining polygons. That 
is diagonal pixels are not considered directly connected. This is the 
default.

-4:
     Eight connectedness should be used when determining polygons. That 
is diagonal pixels are considered directly connected.

obviously should be:

-4:
     Four connectedness should be used when determining polygons. That 
is diagonal pixels are not considered directly connected. This is the 
default.

-8:
     Eight connectedness should be used when determining polygons. That 
is diagonal pixels are considered directly connected.

(change second -4 into -8)

Cheers,
Vincent.
From 2voodoo at gmx.de  Mon Sep 22 06:51:43 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Mon Sep 22 06:51:56 2008
Subject: [gdal-dev] how can use gdalce.dll and gdalce_i.lib in vc2005
	smart device application to open image(tif)?
In-Reply-To: <7555319.585481222054293316.JavaMail.coremail@bj163app108.163.com>
References: <20080921160010.3C622E00CF3@lists.osgeo.org>
	<7555319.585481222054293316.JavaMail.coremail@bj163app108.163.com>
Message-ID: <48D778BF.6000806@gmx.de>

Hi there,

I am working with GDAL and WinCE, too. Currently also to display
TIFF-Images. I do it manly how it is described here:
http://www.gdal.org/gdal_tutorial.html
That is:
GDALRegister_GTiff();
GDALDataset *poDataset = (GDALDataset *) GDALOpen(pszFileName,
GA_ReadOnly );

Now you could get a band of the image file - band 1 (indexing starts
with 1 here!) for example:
GDALRasterBand *poBand = poDataset->GetRasterBand( 1 );

After this you could get information about the color table:
GDALColorTable * ct = poBand->GetColorTable();

check for example if it is RGB:
if (ct->GetPaletteInterpretation() != GPI_RGB) { }

or get the size:
int nXSize = poBand->GetXSize();
int nYSize = poBand->GetYSize();

Reading data is accompished with RasterIO - but this is too complex for
a two-line example (at least in my code base :P) - so read the
documentation on this.

Hope this helps.

@Mateusz: Have you found time during the last couple of month to take a
look into the Tiff issue regarding CCITTFax compression? I think the
last discussion about this was on the 18.02.2008 :)
I could, if you want, send you again a test file (if you do not have the
one I mailed to you anmore).

Thanks,
Tom



liu_daojie schrieb:
> *hello*:
> I have tried to use gdalce.dll and gdalce_i.lib in vc2005 smart device
> application to open image(tif)?,but I can not get the best way ,can
> you help me?
> thanks
>
>
> ------------------------------------------------------------------------
> []  
> <http://popme.163.com/link/003984_0919_8949.html>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From fredth at hotmail.com  Mon Sep 22 09:21:59 2008
From: fredth at hotmail.com (=?iso-8859-1?Q?Fr=E9d=E9ric_Therrien?=)
Date: Mon Sep 22 09:22:02 2008
Subject: [gdal-dev] OGR dynamic query
Message-ID: <BAY106-W4986F6E08C30A65E531666C64B0@phx.gbl>

Hey guys, I'm using ogr to perform select statement in a database for a mapserver/gis. I would like to know something. Is it possible to build dynamic query ? Here is an example:

Select * from Table where field1 > X

Where X can vary depending on the query. I would like to use this feature for time display (display information since a date and this date can be feed by the user in the user interface).

Thx for you help.

Fr?d?ric Therrien
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080922/7fbb2c98/attachment.html
From jukka.rahkonen at mmmtike.fi  Mon Sep 22 09:52:01 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Sep 22 09:52:10 2008
Subject: [gdal-dev] Oracle OCI driver and Oracle views
Message-ID: <loom.20080922T134457-905@post.gmane.org>

Hi,

I tried to convert data from Oracle spatial view (not table) with ogr2ogr. 
Result was not successful.  Instead I got this message:

ERROR 1: ORA-04043: object MY_VIEW does not exist
 in OCIDescribeAny

The view exists in the database, it is registered in ALL_SDO_GEOM_METADATA and I
can use it through SQL.  Now I wonder if ogr2ogr OCI driver supports the use of
Oracle views at all. The documentation at http://gdal.org/ogr/drv_oci.html does
not say anything about views.

-Jukka Rahkonen-

From Jim.Klassen at ci.stpaul.mn.us  Mon Sep 22 09:06:44 2008
From: Jim.Klassen at ci.stpaul.mn.us (Jim Klassen)
Date: Mon Sep 22 10:07:32 2008
Subject: [gdal-dev] Oracle OCI driver and Oracle views
Message-ID: <48D7604E0200004F0000B6AA@jeckle>

I have used OGR with oracle views regularly for a few years now. I agree that it works better when the view is registered in with *_sdo_geom_metadata (otherwise you have to mess around with the -sql option). Also, I do recall getting an error message like yours, however, I never paid much attention to it because ogr2ogr successfully performed the translation anyway.

Jim K

>>> Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> 09/22/08 8:52 AM >>>
Hi,

I tried to convert data from Oracle spatial view (not table) with ogr2ogr. 
Result was not successful.  Instead I got this message:

ERROR 1: ORA-04043: object MY_VIEW does not exist
 in OCIDescribeAny

The view exists in the database, it is registered in ALL_SDO_GEOM_METADATA and I
can use it through SQL.  Now I wonder if ogr2ogr OCI driver supports the use of
Oracle views at all. The documentation at http://gdal.org/ogr/drv_oci.html does
not say anything about views.

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jgomezdans at gmail.com  Mon Sep 22 10:35:08 2008
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Mon Sep 22 10:35:11 2008
Subject: [gdal-dev] Best way to test wheter point is contained in Polygon
Message-ID: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>

Hi,
I have a raster file and a vector file. I want to assign to each pixel in my
raster size a value derived from the vector file (which are polygons). To do
this, I want to test that the centroid of my pixel lies within a given
polygon. In the past, I have done this gdal_rasterize-ing the polygon file,
and going through numpy arrays. It is a bit cumbersome, and the
rasterization is not really needed with OGR. However, it seems that if my
pixel centroid is (x,y), I will need to go through all features in my layer,
extract the geometry and do a Contains() test for my (x,y) point. I can cut
the number of iterations (I guess, not tried) by using a SpatialFilter on my
vector layer, so only one (ish) geometry is returned, so I would only need
to do one Contains test (I do have a _lot_ of polygons in this file)

Is there some other (better) way of doing this? I'm using the python ogr
bindings.

Thanks!
Jose

-- 
Centre for Terrestrial Carbon Dynamics
Department of Geography, University College London
Gower Street, London WC1E 6BT, UK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080922/d10f0ef6/attachment.html
From warmerdam at pobox.com  Mon Sep 22 10:46:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 22 10:46:58 2008
Subject: [gdal-dev] OGR dynamic query
In-Reply-To: <BAY106-W4986F6E08C30A65E531666C64B0@phx.gbl>
References: <BAY106-W4986F6E08C30A65E531666C64B0@phx.gbl>
Message-ID: <48D7AFCB.5080508@pobox.com>

Fr?d?ric Therrien wrote:
> Hey guys, I'm using ogr to perform select statement in a database for a 
> mapserver/gis. I would like to know something. Is it possible to build 
> dynamic query ? Here is an example:
> 
> Select * from Table where field1 > X
> 
> Where X can vary depending on the query. I would like to use this 
> feature for time display (display information since a date and this date 
> can be feed by the user in the user interface).
> 
> Thx for you help.

Fr?d?ric,

I don't know anything about your application, but of course it is
generally possible to do dynamic queries.  This would normally be
accomplished by assembling the query string dynamically in your
application before passing it to ExecuteSQL() or SetAttributeFilter().

Note that "OGR SQL" requires that the right side of any comparison be
a constant, so you can't compare two fields in a non-database datasource
(if that is what you were thinking).  You can do anything supported by
SQL in a real RDBMS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fredth at hotmail.com  Mon Sep 22 11:07:11 2008
From: fredth at hotmail.com (=?iso-8859-1?Q?Fr=E9d=E9ric_Therrien?=)
Date: Mon Sep 22 11:07:14 2008
Subject: [gdal-dev] OGR dynamic query
In-Reply-To: <48D7AFCB.5080508@pobox.com>
References: <BAY106-W4986F6E08C30A65E531666C64B0@phx.gbl>
	<48D7AFCB.5080508@pobox.com>
Message-ID: <BAY106-W146EBD76DC8651744A7C8DC64B0@phx.gbl>

Hey, thx for the answer, but maybe I wasn't clear enought. I'm using ogr with a map file for a mapserver (an later on a GIS). My question is, is it possible to pass a parameter from the gis/wms call to the ogr query, passing by openlayer-ms4w then the map file. 

Frank, you said I can use SetAttributeFilter, but how does it work ?

Thx for your help

Fr?d?ric Therrien



> Date: Mon, 22 Sep 2008 10:46:35 -0400
> From: warmerdam@pobox.com
> To: fredth@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR dynamic query
> 
> Fr?d?ric Therrien wrote:
> > Hey guys, I'm using ogr to perform select statement in a database for a 
> > mapserver/gis. I would like to know something. Is it possible to build 
> > dynamic query ? Here is an example:
> > 
> > Select * from Table where field1 > X
> > 
> > Where X can vary depending on the query. I would like to use this 
> > feature for time display (display information since a date and this date 
> > can be feed by the user in the user interface).
> > 
> > Thx for you help.
> 
> Fr?d?ric,
> 
> I don't know anything about your application, but of course it is
> generally possible to do dynamic queries.  This would normally be
> accomplished by assembling the query string dynamically in your
> application before passing it to ExecuteSQL() or SetAttributeFilter().
> 
> Note that "OGR SQL" requires that the right side of any comparison be
> a constant, so you can't compare two fields in a non-database datasource
> (if that is what you were thinking).  You can do anything supported by
> SQL in a real RDBMS.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080922/8702d38c/attachment-0001.html
From warmerdam at pobox.com  Mon Sep 22 11:15:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 22 11:15:34 2008
Subject: [gdal-dev] OGR dynamic query
In-Reply-To: <BAY106-W146EBD76DC8651744A7C8DC64B0@phx.gbl>
References: <BAY106-W4986F6E08C30A65E531666C64B0@phx.gbl>
	<48D7AFCB.5080508@pobox.com>
	<BAY106-W146EBD76DC8651744A7C8DC64B0@phx.gbl>
Message-ID: <48D7B680.2090407@pobox.com>

Fr?d?ric Therrien wrote:
> Hey, thx for the answer, but maybe I wasn't clear enought. I'm using ogr 
> with a map file for a mapserver (an later on a GIS). My question is, is 
> it possible to pass a parameter from the gis/wms call to the ogr query, 
> passing by openlayer-ms4w then the map file.
> 
> Frank, you said I can use SetAttributeFilter, but how does it work ?
> 
> Thx for your help

Fr?d?ric,

Ah, sorry, I missed the MapServer aspect of your question.

That is really a question for the mapserver list, but first review
the documentation for mapserver on passing arbitrary parameters through
the cgi url and having it substituted in the map file.  I'm not exactly
sure where that appears in the docs, but I'd start with the cgi reference
on the mapserver web site.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From paar at lenne3d.com  Mon Sep 22 12:00:54 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Mon Sep 22 12:00:55 2008
Subject: [gdal-dev] Out of Office
Message-ID: <9a2d3424887e4ca586cc84d2b6d1a1c2@abb0eee10c784498b665507667503279>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From sjahputerao at missouri.edu  Mon Sep 22 12:08:17 2008
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Mon Sep 22 12:09:22 2008
Subject: [gdal-dev] MEM size limit
Message-ID: <48D7C2F1.7020109@missouri.edu>

Hello everyone,

According to the documentation in gdal.org, the in-memory file format 
(MEM) has a 2GB size limit. I recently used MEM to process an image 
whose size is larger than 2GB without encountering any error message. 
The output seems to be fine as well. Has the MEM driver been upgraded to 
handle image > 2 GB. I am using GDAL v1.5.2.

Thanks.

Ozy
From warmerdam at pobox.com  Mon Sep 22 12:25:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 22 12:25:38 2008
Subject: [gdal-dev] MEM size limit
In-Reply-To: <48D7C2F1.7020109@missouri.edu>
References: <48D7C2F1.7020109@missouri.edu>
Message-ID: <48D7C6EB.6050109@pobox.com>

Ozy Sjahputera wrote:
> Hello everyone,
> 
> According to the documentation in gdal.org, the in-memory file format 
> (MEM) has a 2GB size limit. I recently used MEM to process an image 
> whose size is larger than 2GB without encountering any error message. 
> The output seems to be fine as well. Has the MEM driver been upgraded to 
> handle image > 2 GB. I am using GDAL v1.5.2.

Ozy,

Yes, it appears that as part of treating bug #1503 this limitation was
removed on 64bit platforms.  I have removed the 2GB limit mention in
the formats_list.html file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From 2voodoo at gmx.de  Mon Sep 22 13:50:22 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Mon Sep 22 13:50:36 2008
Subject: [gdal-dev] how can use gdalce.dll and gdalce_i.lib in vc2005
	smart device application to open image(tif)?
In-Reply-To: <16381848.282491221996986557.JavaMail.coremail@app167.163.com>
References: <16381848.282491221996986557.JavaMail.coremail@app167.163.com>
Message-ID: <48D7DADE.5080104@gmx.de>

Hi liudaojie,

of course you cannot use the same libraries as in the desktop version,
but the includes stay the same. As stated on the website you could
compile the libraries for smart device processors (like ARM for
example). Also, the methods you call and the way things work is the same
- despite the fact that you often have much lesser memory then on desktop.

And please, if you respond to a mail - send the mail to the group (some
e-mail programs have buttuns like "respond" and "respond all")- this way
the mailing list is getting a carbon copy and all could read what you
have written (and respond or benefit to/from it).

bye,
Tom

liu_daojie schrieb:
> hello:
> here I have a question in wince you use the same lib and include as in
> vc6.0 ? or others ? can you list them?the method is same in wince as
> in vc6 to open image(tiff)?
> thanks
> liudaojie
>
>  
>
>
> ------------------------------------------------------------------------
> []  
> <http://popme.163.com/link/003984_0919_8949.html> 
From sjahputerao at missouri.edu  Mon Sep 22 14:02:01 2008
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Mon Sep 22 14:02:08 2008
Subject: [gdal-dev] MEM size limit
In-Reply-To: <48D7C6EB.6050109@pobox.com>
References: <48D7C2F1.7020109@missouri.edu> <48D7C6EB.6050109@pobox.com>
Message-ID: <48D7DD99.8020104@missouri.edu>

Thanks, Frank. That helps a lot.

ozy

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> Hello everyone,
>>
>> According to the documentation in gdal.org, the in-memory file format 
>> (MEM) has a 2GB size limit. I recently used MEM to process an image 
>> whose size is larger than 2GB without encountering any error message. 
>> The output seems to be fine as well. Has the MEM driver been upgraded 
>> to handle image > 2 GB. I am using GDAL v1.5.2.
>
> Ozy,
>
> Yes, it appears that as part of treating bug #1503 this limitation was
> removed on 64bit platforms.  I have removed the 2GB limit mention in
> the formats_list.html file.
>
> Best regards,

From dmorissette at mapgears.com  Mon Sep 22 14:35:54 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Sep 22 14:36:46 2008
Subject: [gdal-dev] MapInfo error handling
In-Reply-To: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
References: <3B6819E719271748B923CE3CDBD4EC9803EC072B@srcmail1.extendthereach.com>
Message-ID: <48D7E58A.4010806@mapgears.com>

Linda Thompson wrote:
> 
> We have quite few customers with problems in their Mapinfo .map files.  
> We would like to allow the user to see the .dat information and report 
> the problem with their .map file.  I have created a patch for the 
> problem that allows me to continue displaying data for the customer and 
> allows more flexibility in dealing with the error.
> 
> Do you think this may be a benefit to others using MITAB?
> 

For the record, we took this off-list with Linda and it turns out that 
the files that lead to this patch are corrupt and can't even be read by 
  MapInfo itself. The proposed patch would effectively disable a 
validation of the source data in MITAB to accomodate for corrupt files 
so we're not going to include it for now.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From bfraser at geoanalytic.com  Mon Sep 22 18:06:15 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Sep 22 18:06:52 2008
Subject: [gdal-dev] Status of RFC 4: Geolocation Arrays especially Envisat
	wrt GCPs
Message-ID: <48D816D7.2070501@geoanalytic.com>

Frank,

The short story:

  I've got some Single Look Complex EnviSat data I need to process.  Will gdalwarp do a piecewise (triangulated) warp using GCPs or only(!) use them to calculate an image-wide polynomial?

The longer story:
	ESA's Best (http://earth.esa.int/services/best/) does an OK job extracting the amplitude from the data, but because it uses tiff files for intermediate storage, and their implementation is limited to 2gb tiffs, it's necessary to tile an input image.  Best assigns a different affine transformation to each output GeoTiff tile, which causes a mis-alignment of the tiles when re-assembling them (using gdalwarp etc).  Best does output an extensive metadata text file with each tile including a geolocation "array" of latitude and longitude.  Unfortunately the "array" is not regular (eg, my test tile has values for lines 1, 811, 812, 1622, 1623, 2240; every 165 pixels except the last interval which is 195 pixels).  If gdalwarp would use this semi-regular array to triangulate the pixel locations, that would be great, otherwise I'll have to use something else...

Thanks!
Brent Fraser
From warmerdam at pobox.com  Mon Sep 22 18:46:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 22 18:47:01 2008
Subject: [gdal-dev] Re: Status of RFC 4: Geolocation Arrays especially
	Envisat wrt GCPs
In-Reply-To: <48D816D7.2070501@geoanalytic.com>
References: <48D816D7.2070501@geoanalytic.com>
Message-ID: <48D82051.80908@pobox.com>

Brent Fraser wrote:
> Frank,
> 
> The short story:
> 
>  I've got some Single Look Complex EnviSat data I need to process.  Will 
> gdalwarp do a piecewise (triangulated) warp using GCPs or only(!) use 
> them to calculate an image-wide polynomial?

Brent,

There are two choices from GCPs. Either polynomial (1st to 3rd order)
or thin plate splines.  Thin Plate Splines are nice in that the
transformation is exact at all GCPs, and it will give similar, but
more continuous results to piecewise triangulated warps which I
don't support.  But TPS is likely to be slow on a large dataset with
a lot of GCPs.

> The longer story:
>     ESA's Best (http://earth.esa.int/services/best/) does an OK job 
> extracting the amplitude from the data, but because it uses tiff files 
> for intermediate storage, and their implementation is limited to 2gb 
> tiffs, it's necessary to tile an input image.  Best assigns a different 
> affine transformation to each output GeoTiff tile, which causes a 
> mis-alignment of the tiles when re-assembling them (using gdalwarp 
> etc).  Best does output an extensive metadata text file with each tile 
> including a geolocation "array" of latitude and longitude.  
> Unfortunately the "array" is not regular (eg, my test tile has values 
> for lines 1, 811, 812, 1622, 1623, 2240; every 165 pixels except the 
> last interval which is 195 pixels).  If gdalwarp would use this 
> semi-regular array to triangulate the pixel locations, that would be 
> great, otherwise I'll have to use something else...

There is no mechanism to use geolocation arrays that are irregular in
this way, and even for regular geolocation arrays the existing code is
a bit questionable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From 2voodoo at gmx.de  Tue Sep 23 06:53:04 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Tue Sep 23 06:53:21 2008
Subject: [gdal-dev] Reading/Interpreting multi band Tiffs
Message-ID: <48D8CA90.4090308@gmx.de>

Hi there,

up to now I only faced Tiff images with palette information. It was
relatively easy to read and display everything - I use RasterIO for the
one available band and the color table.
Now I want to load and display multi band Tiff images - namely the bands
red, green and blue. For what I have understood a pixels RGB value is
then the value from the red band at the pixels position as red value,
the green value from the green band and so on. So do I understand it
right that I have to make three RasterIO calls to get the color of one
pixel - one call for each band? Exists there maybe a more convenient way
like making one call and getting back the color?

Thanks in advance,
Tom
From eloquence2 at gmail.com  Tue Sep 23 06:54:18 2008
From: eloquence2 at gmail.com (D)
Date: Tue Sep 23 06:54:20 2008
Subject: [gdal-dev] 8-bit GeoTIFF and transparency over multiple bands
Message-ID: <860f58590809230354t5e240cbepe6b6efaa1d09c171@mail.gmail.com>

I would need to know, if a three band (RGB) 8-bit GeoTIFF can have
transparency enabled?

I know that it is possible to enable transparency on a singleband TIFF.

Can someone confirm this?

Best regards,
Dejan Gregor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080923/024ce655/attachment.html
From schut at sarvision.nl  Tue Sep 23 07:58:14 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Sep 23 07:58:17 2008
Subject: [gdal-dev] 8-bit GeoTIFF and transparency over multiple bands
In-Reply-To: <860f58590809230354t5e240cbepe6b6efaa1d09c171@mail.gmail.com>
References: <860f58590809230354t5e240cbepe6b6efaa1d09c171@mail.gmail.com>
Message-ID: <48D8D9D6.8010504@sarvision.nl>

D wrote:
> I would need to know, if a three band (RGB) 8-bit GeoTIFF can have 
> transparency enabled?

No, there would be no way to know the transparency for a pixel if there 
are only red/green/blue values available. For that you'll need a 4-band 
(rgba) image.
>  
> I know that it is possible to enable transparency on a singleband TIFF.

In that case you'd have one band containing color indices instead of rgb 
color values. These color indices than map into a rgba colortable which 
defines color and transparency for that color index.
>  
> Can someone confirm this?
>  
> Best regards,
> Dejan Gregor
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mdsumner at utas.edu.au  Tue Sep 23 08:12:29 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue Sep 23 08:16:01 2008
Subject: [gdal-dev] problem with 5D variables in NetCDF
Message-ID: <48D8DD2D.1040900@utas.edu.au>

Hello,

The 5D dataset in this NetCDF file causes an error on Windows but not on 
Linux.

http://staff.acecrc.org.au/~mdsumner/gdal/foo.nc

The Windows FWTools is recent, and the Linux version is old:

Linux: GDAL 1.5dev, FWTools 1.3.2, released 2007/06/01

Windows: GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22

Is this a known problem? Variables of 2D, 3D and 4D all seem fine on 
Windows even
when in a file containing a 5D variable.

I've put details below for (1) the file, (2) the SDS on Linux, (3) the 
SDS on Windows.


Cheers, Mike.

1. gdalinfo for file (Linux and Windows):

Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Files: foo.nc
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"foo.nc":temperature
  SUBDATASET_1_DESC=[2x2x2x10x10] temperature (64-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"foo.nc":xx
  SUBDATASET_2_DESC=[10x10] xx (64-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)



2. gdalinfo for SDS (Linux  ):

 gdalinfo NETCDF:"foo.nc":temperature
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Files: none associated
Size is 10, 10
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   10.0)
Upper Right (   10.0,    0.0)
Lower Right (   10.0,   10.0)
Center      (    5.0,    5.0)
Band 1 Block=10x1 Type=Float64, ColorInterp=Undefined
  NoData Value=9.96920996838687e+36
  Metadata:
    NETCDF_VARNAME=temperature
    NETCDF_DIMENSION_x=1
    NETCDF_DIMENSION_y=1
    NETCDF_DIMENSION_z=1
Band 2 Block=10x1 Type=Float64, ColorInterp=Undefined
. . .
. . .etc. up to Band 8


3. On Windows this fails with error message box:

"gdalinfo.exe has encountered a problem and needs to close"


The "xx" SDS works fine on both platforms:

gdalinfo NETCDF:"foo.nc":xx
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Files: none associated
Size is 10, 10
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   10.0)
Upper Right (   10.0,    0.0)
Lower Right (   10.0,   10.0)
Center      (    5.0,    5.0)
Band 1 Block=10x1 Type=Float64, ColorInterp=Undefined
  NoData Value=9.969209968386869e+036
  Metadata:
    NETCDF_VARNAME=xx

From jgomezdans at gmail.com  Tue Sep 23 08:25:40 2008
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Sep 23 08:25:42 2008
Subject: [gdal-dev] Re: Best way to test wheter point is contained in Polygon
In-Reply-To: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
References: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
Message-ID: <91d218430809230525t1585cf2em1a8bd7655506e409@mail.gmail.com>

I reply to myself, to see if someone has any insights.

2008/9/22 Jose Gomez-Dans <jgomezdans@gmail.com>

> Hi,
> I have a raster file and a vector file. I want to assign to each pixel in
> my raster size a value derived from the vector file (which are polygons). To
> do this, I want to test that the centroid of my pixel lies within a given
> polygon. In the past, I have done this gdal_rasterize-ing the polygon file,
> and going through numpy arrays. It is a bit cumbersome, and the
> rasterization is not really needed with OGR. However, it seems that if my
> pixel centroid is (x,y), I will need to go through all features in my layer,
> extract the geometry and do a Contains() test for my (x,y) point. I can cut
> the number of iterations (I guess, not tried) by using a SpatialFilter on my
> vector layer, so only one (ish) geometry is returned, so I would only need
> to do one Contains test (I do have a _lot_ of polygons in this file)
>

The code I have loops over each pixel, calculates its centroid from the
GeoTransform, and reprojects this to match the OGR's dataset projection. I
then produce a geometry for this centroid, and apply a spatial filter to my
OGR layer so that it encompasses said centroid. It is then a matter of
looping through the geometries until I get a match. The code works, but it
is quite slow. I have speeded it up substantially by creating an spatial
index on my shapefile, but it still takes a long time to go through this
(there are a lot of pixels to go through, and I need to do this for many
raster files!), so I was wondering if anyone has some suggestions on how to
improve this.

here's some relevant snippet of code, just in case someone's interested:
# I am assuming I have a raster_map, it's X and Y size, and its geotransform
# L is my ogr layer
#[...]
 for row in range(g.RasterXSize):
    for col in range(g.RasterYSize):
    if (raster_map[col,row] > 0): #Loop over each pixel, and if the value of
the pixel >0, try to find it's polygon.
        x = geotransform[0] + (row+0.5)*geotransform[1]
        y = geotransform[3] + (col+0.5)*geotransform[5]
        (lon,lat,z) = t.TransformPoint ( x,y ) # I need to transform the
data first.
        geop = ogr.CreateGeometryFromWkt("POINT (%f %f)"%(lon,lat)) # This
is the centroid of my pixel
        feat = L.GetNextFeature()
        filter_layer = L.SetSpatialFilterRect(lon-.5, lat-.5, lon+.5,lat+.5)
# To  minimise searches, do a spatial filter on the layer, so we only have a
handful of geometries to worry about
        while feat is not None:
            geo_grid = feat.GetGeometryRef()
            if geo_grid.Contains( geop ): # Found gridcell
                #Found a match. Do something with it, and stop searching
geometries.
                break
            feat.Destroy()
            feat = L.GetNextFeature()

        L.SetSpatialFilter(None) #Reset the spatial filter
        L.ResetReading() #Go back to the first feature of the layer

Cheers,
Jose

-- 
Centre for Terrestrial Carbon Dynamics
Department of Geography, University College London
Gower Street, London WC1E 6BT, UK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080923/9a8d9dfb/attachment.html
From lists at fuchsschwanzdomain.de  Tue Sep 23 09:39:29 2008
From: lists at fuchsschwanzdomain.de (Sven Geggus)
Date: Tue Sep 23 10:04:36 2008
Subject: [gdal-dev] pct2rgb.py: files >4GB
Message-ID: <gbarih$3mc$1@ultimate100.geggus.net>

Hello,

I've got some trouble using pct2rgb.py:

pct2rgb.py <in>.tif <out>.tif
ERROR 6: A 81408 pixels x 58368 lines x 3 bands Byte image would be
larger than 4GB but this is the largest size a TIFF can be.  Creation failed.

Unfortunately the -of switch does not change this:

pct2rgb.py -of hfa <in>.tif <out>.img
ERROR 6: A 81408 pixels x 58368 lines x 3 bands Byte image would be
larger than 4GB but this is the largest size a TIFF can be.  Creation failed.

Any hint on how to convert the file to rgb in another way?

Sven

-- 
"If you don't make lower-resolution mapping data publicly
available, there will be people with their cars and GPS
devices, driving around with their laptops" (Tim Berners-Lee)
/me is giggls@ircnet, http://sven.gegg.us/ on the Web
From warmerdam at pobox.com  Tue Sep 23 11:19:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 23 11:20:05 2008
Subject: [gdal-dev] pct2rgb.py: files >4GB
In-Reply-To: <gbarih$3mc$1@ultimate100.geggus.net>
References: <gbarih$3mc$1@ultimate100.geggus.net>
Message-ID: <48D9090C.7070102@pobox.com>

Sven Geggus wrote:
> Hello,
> 
> I've got some trouble using pct2rgb.py:
> 
> pct2rgb.py <in>.tif <out>.tif
> ERROR 6: A 81408 pixels x 58368 lines x 3 bands Byte image would be
> larger than 4GB but this is the largest size a TIFF can be.  Creation failed.
> 
> Unfortunately the -of switch does not change this:
> 
> pct2rgb.py -of hfa <in>.tif <out>.img
> ERROR 6: A 81408 pixels x 58368 lines x 3 bands Byte image would be
> larger than 4GB but this is the largest size a TIFF can be.  Creation failed.
> 
> Any hint on how to convert the file to rgb in another way?

Sven,

You might want to edit pct2rgb.py and change this line:

if format == 'GTiff':

to:

if format == 'GTiff' or format == 'HFA':

and see if that works.

Alternatively, get a GDAL build with BigTIFF support.  It would appear
you have either an old GDAL or a new GDAL with an old (pre libtiff4)
version of libtiff that does not support bigtiff.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 23 11:36:33 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 23 11:36:59 2008
Subject: [gdal-dev] 8-bit GeoTIFF and transparency over multiple bands
In-Reply-To: <860f58590809230354t5e240cbepe6b6efaa1d09c171@mail.gmail.com>
References: <860f58590809230354t5e240cbepe6b6efaa1d09c171@mail.gmail.com>
Message-ID: <48D90D01.6060005@pobox.com>

D wrote:
> I would need to know, if a three band (RGB) 8-bit GeoTIFF can have 
> transparency enabled?
>  
> I know that it is possible to enable transparency on a singleband TIFF.
>  
> Can someone confirm this?

Dejan,

Multi-band TIFF files represent transparency using an alpha band.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 23 11:43:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 23 11:44:09 2008
Subject: [gdal-dev] Reading/Interpreting multi band Tiffs
In-Reply-To: <48D8CA90.4090308@gmx.de>
References: <48D8CA90.4090308@gmx.de>
Message-ID: <48D90EB1.7090707@pobox.com>

Tom Kazimiers wrote:
> Hi there,
> 
> up to now I only faced Tiff images with palette information. It was
> relatively easy to read and display everything - I use RasterIO for the
> one available band and the color table.
> Now I want to load and display multi band Tiff images - namely the bands
> red, green and blue. For what I have understood a pixels RGB value is
> then the value from the red band at the pixels position as red value,
> the green value from the green band and so on. So do I understand it
> right that I have to make three RasterIO calls to get the color of one
> pixel - one call for each band? Exists there maybe a more convenient way
> like making one call and getting back the color?

Tom,

There is also a RasterIO() method on the Dataset which allows
fetching all the bands in one request.  In C++ this is:

http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743

In C:

http://www.gdal.org/gdal_8h.html#764cb93a266ada902b13c2bdad3f7037

In Python you would use:

     def ReadRaster(*args, **kwargs):
         """
         ReadRaster(self, int xoff, int yoff, int xsize, int ysize, int buf_len,
             int buf_xsize=0, int buf_ysize=0, GDALDataType buf_type=0,
             int band_list=0) -> CPLErr
         """
         return _gdal.Dataset_ReadRaster(*args, **kwargs)

eg.

rgb_buffer = dataset.ReadRaster(0,0,100,100,gdal.GDT_Byte,[1,2,3])

to read a 3 band buffer for the region 1,2,3 in "Byte" format.

Note that the C/C++ APIs read in band interleave format by default.
So the buffer would be filled with all the red, followed by tall the
green followed by all the blue.  If you want pixel interleaving
you will need to carefully select appropriate nPixelSpace, nLineSpace
and nBandSpace parameters.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From paar at lenne3d.com  Tue Sep 23 12:01:04 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Tue Sep 23 12:02:03 2008
Subject: [gdal-dev] Out of Office
Message-ID: <8dcde12ab4d743b89a362beac3a7974b@05d7e9d3f92749ab9bfad6013cd75bf9>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From 2voodoo at gmx.de  Tue Sep 23 13:10:00 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Tue Sep 23 13:10:17 2008
Subject: [gdal-dev] Reading/Interpreting multi band Tiffs
In-Reply-To: <48D90EB1.7090707@pobox.com>
References: <48D8CA90.4090308@gmx.de> <48D90EB1.7090707@pobox.com>
Message-ID: <48D922E8.4090405@gmx.de>

Frank Warmerdam schrieb:
> Tom Kazimiers wrote:
>> Hi there,
>>
>> up to now I only faced Tiff images with palette information. It was
>> relatively easy to read and display everything - I use RasterIO for the
>> one available band and the color table.
>> Now I want to load and display multi band Tiff images - namely the bands
>> red, green and blue. For what I have understood a pixels RGB value is
>> then the value from the red band at the pixels position as red value,
>> the green value from the green band and so on. So do I understand it
>> right that I have to make three RasterIO calls to get the color of one
>> pixel - one call for each band? Exists there maybe a more convenient way
>> like making one call and getting back the color?
>
> Tom,
>
> There is also a RasterIO() method on the Dataset which allows
> fetching all the bands in one request.  In C++ this is:
>
> http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
>
>
> In C:
>
> http://www.gdal.org/gdal_8h.html#764cb93a266ada902b13c2bdad3f7037
>
> In Python you would use:
>
>     def ReadRaster(*args, **kwargs):
>         """
>         ReadRaster(self, int xoff, int yoff, int xsize, int ysize, int
> buf_len,
>             int buf_xsize=0, int buf_ysize=0, GDALDataType buf_type=0,
>             int band_list=0) -> CPLErr
>         """
>         return _gdal.Dataset_ReadRaster(*args, **kwargs)
>
> eg.
>
> rgb_buffer = dataset.ReadRaster(0,0,100,100,gdal.GDT_Byte,[1,2,3])
>
> to read a 3 band buffer for the region 1,2,3 in "Byte" format.
>
> Note that the C/C++ APIs read in band interleave format by default.
> So the buffer would be filled with all the red, followed by tall the
> green followed by all the blue.  If you want pixel interleaving
> you will need to carefully select appropriate nPixelSpace, nLineSpace
> and nBandSpace parameters.
>
> Best regards,
Frank,

thank you very much - this was what I was looking for. Unfortunately I
need to write Data in the form Band3, Band2, Band1, Band3, Band2, Band1,
... (BGR)
Like you have said, the reading is sequential and it was not very hard
to get it working with a result of the form Band1, Band2, Ban3, Band1,
Band2, Band3, ... (RGB)
Is there a way to change the order of the bands so that I can use this
function (alternatively I could write a fast switch function, sure - but
it would be nicer to have it all in one function)? With three seperate
calls to the per-raster-band-RasterIO I can controle everything pretty
good, but it seems that the per-dataset-RasterIO is faster (maybe
illusion :P).

Thanks,
Tom
From warmerdam at pobox.com  Tue Sep 23 14:28:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 23 14:28:45 2008
Subject: [gdal-dev] Reading/Interpreting multi band Tiffs
In-Reply-To: <48D922E8.4090405@gmx.de>
References: <48D8CA90.4090308@gmx.de> <48D90EB1.7090707@pobox.com>
	<48D922E8.4090405@gmx.de>
Message-ID: <48D9353D.5050100@pobox.com>

Tom Kazimiers wrote:
>> There is also a RasterIO() method on the Dataset which allows
>> fetching all the bands in one request.  In C++ this is:
>>
>> http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743

> thank you very much - this was what I was looking for. Unfortunately I
> need to write Data in the form Band3, Band2, Band1, Band3, Band2, Band1,
> ... (BGR)
> Like you have said, the reading is sequential and it was not very hard
> to get it working with a result of the form Band1, Band2, Ban3, Band1,
> Band2, Band3, ... (RGB)
> Is there a way to change the order of the bands so that I can use this
> function (alternatively I could write a fast switch function, sure - but
> it would be nicer to have it all in one function)? With three seperate
> calls to the per-raster-band-RasterIO I can controle everything pretty
> good, but it seems that the per-dataset-RasterIO is faster (maybe
> illusion :P).

Tom,

To read or write from a BGR buffer you can either passing the band
list reversed (ie. panBandMap is {3,2,1}) or fudze with the
pixelspace, linespace and bandspace values to simulate the reverse.

Sometimes dataset level io will be faster but often it is internally
implemented by calling band level io.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 23 16:16:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 23 16:17:01 2008
Subject: [gdal-dev] problem with 5D variables in NetCDF
In-Reply-To: <48D8DD2D.1040900@utas.edu.au>
References: <48D8DD2D.1040900@utas.edu.au>
Message-ID: <48D94EA5.7080500@pobox.com>

Michael Sumner wrote:
> Hello,
> 
> The 5D dataset in this NetCDF file causes an error on Windows but not on 
> Linux.
> 
> http://staff.acecrc.org.au/~mdsumner/gdal/foo.nc
> 
> The Windows FWTools is recent, and the Linux version is old:
> 
> Linux: GDAL 1.5dev, FWTools 1.3.2, released 2007/06/01
> 
> Windows: GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22
> 
> Is this a known problem? Variables of 2D, 3D and 4D all seem fine on 
> Windows even
> when in a file containing a 5D variable.
> 
> I've put details below for (1) the file, (2) the SDS on Linux, (3) the 
> SDS on Windows.

Mike,

I have confirmed this problem and discovered that gdalinfo on the
same thing reports problems on linux if run under valgrind (but
happened not to crash).  So the bug is not actually new.  I have
filed:

   http://trac.osgeo.org/gdal/ticket/2582

on the issue, and am committing a fix in subversion now.

Thanks for the bug report.

Do you have any objection to foo.nc being incorporated into the GDAL test
suite as public domain data?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mdsumner at utas.edu.au  Tue Sep 23 16:26:59 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue Sep 23 16:27:06 2008
Subject: [gdal-dev] problem with 5D variables in NetCDF
In-Reply-To: <48D94EA5.7080500@pobox.com>
References: <48D8DD2D.1040900@utas.edu.au> <48D94EA5.7080500@pobox.com>
Message-ID: <48D95113.2090202@utas.edu.au>

Hello,

No objections to using the file - I manufactured it to test the higher 
dimension cases.

Cheers, Mike


Frank Warmerdam wrote:
> Michael Sumner wrote:
>> Hello,
>>
>> The 5D dataset in this NetCDF file causes an error on Windows but not 
>> on Linux.
>>
>> http://staff.acecrc.org.au/~mdsumner/gdal/foo.nc
>>
>> The Windows FWTools is recent, and the Linux version is old:
>>
>> Linux: GDAL 1.5dev, FWTools 1.3.2, released 2007/06/01
>>
>> Windows: GDAL 1.6.0dev, FWTools 2.2.6, released 2008/08/22
>>
>> Is this a known problem? Variables of 2D, 3D and 4D all seem fine on 
>> Windows even
>> when in a file containing a 5D variable.
>>
>> I've put details below for (1) the file, (2) the SDS on Linux, (3) 
>> the SDS on Windows.
>
> Mike,
>
> I have confirmed this problem and discovered that gdalinfo on the
> same thing reports problems on linux if run under valgrind (but
> happened not to crash).  So the bug is not actually new.  I have
> filed:
>
>   http://trac.osgeo.org/gdal/ticket/2582
>
> on the issue, and am committing a fix in subversion now.
>
> Thanks for the bug report.
>
> Do you have any objection to foo.nc being incorporated into the GDAL test
> suite as public domain data?
>
> Best regards,
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.169 / Virus Database: 270.7.1/1686 - Release Date: 9/23/2008 7:38 AM
>
>   

From mgleahy at alumni.uwaterloo.ca  Wed Sep 24 01:13:21 2008
From: mgleahy at alumni.uwaterloo.ca (Mike Leahy)
Date: Wed Sep 24 01:17:53 2008
Subject: [gdal-dev] Projecting nzmg/nzgd49 to nzgd2000
Message-ID: <48D9CC71.6020107@alumni.uwaterloo.ca>

Hello list,

I'm trying to figure out some issues I'm having with re-projecting some 
data located on Stewart Island at the south end of New Zealand.  The 
source data are using UTM coordinates projected in New Zealand Map Grid, 
based on the New Zealand Geodedic Datum 1949, and I'm reprojecting them 
to UTM coordinates using New Zealand Geodedic Datum 2000 (which I guess 
is basically WGS84).  The corresponding epsg numbers are 27200 and 2193 
respectively.

The problem I've encountered is that if I let gdalwarp or ogr2ogr 
automatically detect the NZGD49 projection from the dataset, and specify 
the output projection using -t_srs epsg:2193, the output is off by about 
165 metres or so.  If I add the parameter -s_srs epsg:27200 to the 
gdalwarp/ogr2ogr commands, the output seems to be correct (i.e., it 
lines up with coordinates that are similarly reprojected using ESRI's 
ArcGIS).  I have posted a sample image of the output here: 
http://img210.imageshack.us/my.php?image=projectionsmux9.jpg.  In that 
image, the background raster and the red dots were incorrectly projected 
(without specifying -s_srs), while the green dots shows how far off 
these from their correct locations.

I have included below the SRS WKT definitions based on what I get from 
the actual prj file, from ogrinfo, and from what is listed in the 
spatial_ref_sys table in PostGIS.

Now that I know this is happening, it's not a major problem...but what 
could be the cause?  I don't see anything missing in the WKT vs the 
corresponding proj4 text in my epsg file.

I'm using GDAL/OGR 1.5.2 and Proj 4.6.0.

Regards,
Mike

=============================

srs wkt from a prj file:

PROJCS["GD_1949_New_Zealand_Map_Grid",GEOGCS["GCS_New_Zealand_1949",DATUM["D_New_Zealand_1949",SPHEROID["International_1924",6378388.0,297.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["New_Zealand_Map_Grid"],PARAMETER["False_Easting",2510000.0],PARAMETER["False_Northing",6023150.0],PARAMETER["Longitude_Of_Origin",173.0],PARAMETER["Latitude_Of_Origin",-41.0],UNIT["Meter",1.0]]

srs wkt from ogrinfo (for same dataset as above):

PROJCS["GD_1949_New_Zealand_Map_Grid",GEOGCS["GCS_New_Zealand_1949",DATUM["New_Zealand_Geodetic_Datum_1949",SPHEROID["International_1924",6378388.0,297.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["New_Zealand_Map_Grid"],PARAMETER["False_Easting",2510000.0],PARAMETER["False_Northing",6023150.0],PARAMETER["Longitude_Of_Origin",173.0],PARAMETER["Latitude_Of_Origin",-41.0],UNIT["Meter",1.0]]


srs wkt for srid=27200 in PostGIS:

PROJCS["NZGD49 / New Zealand Map 
Grid",GEOGCS["NZGD49",DATUM["New_Zealand_Geodetic_Datum_1949",SPHEROID["International 
1924",6378388,297,AUTHORITY["EPSG","7022"]],TOWGS84[59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993],AUTHORITY["EPSG","6272"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4272"]],PROJECTION["New_Zealand_Map_Grid"],PARAMETER["latitude_of_origin",-41],PARAMETER["central_meridian",173],PARAMETER["false_easting",2510000],PARAMETER["false_northing",6023150],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","27200"]]
From 2voodoo at gmx.de  Wed Sep 24 04:08:13 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Sep 24 04:08:16 2008
Subject: [gdal-dev] Reading/Interpreting multi band Tiffs
In-Reply-To: <48D9353D.5050100@pobox.com>
References: <48D8CA90.4090308@gmx.de> <48D90EB1.7090707@pobox.com>
	<48D922E8.4090405@gmx.de> <48D9353D.5050100@pobox.com>
Message-ID: <48D9F56D.3010706@gmx.de>

Frank Warmerdam schrieb:
> Tom Kazimiers wrote:
>>> There is also a RasterIO() method on the Dataset which allows
>>> fetching all the bands in one request.  In C++ this is:
>>>
>>> http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
>>>
>
>> thank you very much - this was what I was looking for. Unfortunately I
>> need to write Data in the form Band3, Band2, Band1, Band3, Band2, Band1,
>> ... (BGR)
>> Like you have said, the reading is sequential and it was not very hard
>> to get it working with a result of the form Band1, Band2, Ban3, Band1,
>> Band2, Band3, ... (RGB)
>> Is there a way to change the order of the bands so that I can use this
>> function (alternatively I could write a fast switch function, sure - but
>> it would be nicer to have it all in one function)? With three seperate
>> calls to the per-raster-band-RasterIO I can controle everything pretty
>> good, but it seems that the per-dataset-RasterIO is faster (maybe
>> illusion :P).
>
> Tom,
>
> To read or write from a BGR buffer you can either passing the band
> list reversed (ie. panBandMap is {3,2,1}) or fudze with the
> pixelspace, linespace and bandspace values to simulate the reverse.
>
> Sometimes dataset level io will be faster but often it is internally
> implemented by calling band level io.
>
> Best regards,

Thank you very much, Frank. This works perfectly :)

Best regards,
Tom

From schut at sarvision.nl  Wed Sep 24 10:37:27 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Sep 24 10:37:30 2008
Subject: [gdal-dev] mask bands howto
Message-ID: <48DA50A7.1070002@sarvision.nl>

Hi,

is there any up-to-date documentation/tutorial available on the recently 
added mask bands feature? I found 
http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask, but I was hoping 
more on something like an api tutorial. The doxygen generated stuff all 
is empty for mask related functions...

Specifically, I'd like to know if it is possible to (using swig python) 
create a DS (gtiff), and then write boolean data into 
ds.GetRasterBand(1).GetMaskBand()? Or should I call CreateMaskBand 
first? This is not entirely clear to me...

Vincent.
From warmerdam at pobox.com  Wed Sep 24 10:50:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 24 10:51:16 2008
Subject: [gdal-dev] mask bands howto
In-Reply-To: <48DA50A7.1070002@sarvision.nl>
References: <48DA50A7.1070002@sarvision.nl>
Message-ID: <48DA53D3.8040900@pobox.com>

Vincent Schut wrote:
> Hi,
> 
> is there any up-to-date documentation/tutorial available on the recently 
> added mask bands feature? I found 
> http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask, but I was hoping 
> more on something like an api tutorial. The doxygen generated stuff all 
> is empty for mask related functions...

Vincent,

Indeed, the RFC is the majority of the documentation. If you can file
a ticket on specific methods lacking documentation, I'll try and add it.

> Specifically, I'd like to know if it is possible to (using swig python) 
> create a DS (gtiff), and then write boolean data into 
> ds.GetRasterBand(1).GetMaskBand()? Or should I call CreateMaskBand 
> first? This is not entirely clear to me...

Generally you will need to call CreateMaskBand().  The mask you
get back by default will likely be read-only (derived from nodata
values, or the special "all valid" mask).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Sep 24 13:49:24 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 24 13:49:30 2008
Subject: [gdal-dev] mask bands howto
In-Reply-To: <48DA50A7.1070002@sarvision.nl>
References: <48DA50A7.1070002@sarvision.nl>
Message-ID: <200809241949.25447.even.rouault@mines-paris.org>

You can also take inspiration from the python autotest suite : 
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/mask.py

Le Wednesday 24 September 2008 16:37:27 Vincent Schut, vous avez ?crit?:
> Hi,
>
> is there any up-to-date documentation/tutorial available on the recently
> added mask bands feature? I found
> http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask, but I was hoping
> more on something like an api tutorial. The doxygen generated stuff all
> is empty for mask related functions...
>
> Specifically, I'd like to know if it is possible to (using swig python)
> create a DS (gtiff), and then write boolean data into
> ds.GetRasterBand(1).GetMaskBand()? Or should I call CreateMaskBand
> first? This is not entirely clear to me...
>
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bclay at ball.com  Wed Sep 24 14:55:03 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Sep 24 14:55:20 2008
Subject: [gdal-dev] shapefile field size
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCD9@daytonmsg2k3.AERO.BALL.COM>

I have an OGR based application that I am having problems with data
storage

 

Several fields are OFTInteger and several are OFTReal

 

When I write a dataset using the OCI driver the integer fields all store
valid information.

 

When I write a dataset using the Shapefile driver the integer fields
appear to be truncated to shorts. They are defined with a field width of
4 bytes.  It almost looks like the data is stored as ASCII because only
the 4 most significant digits are actually saved in the shapefile.

 

Is this the intended operation or is there some extra flag that I need
to set when I switch between creating an Oracle table and a shapefile?

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080924/4b573bea/attachment.html
From bclay at ball.com  Wed Sep 24 15:14:11 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Sep 24 15:14:14 2008
Subject: [gdal-dev] shapefile field size
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCD9@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCD9@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCDA@daytonmsg2k3.AERO.BALL.COM>

Follow on to earlier message.

 

I removed the SetLength and SetPrecision from the field specification
and things are working now.  ArcMap thinks the integer fields are
Doubles with length of 11 and precision of 11 but the values do not
appear to be truncated so that is a good thing

 

It just seems odd that the OCI driver accepted the size but the
shapefile driver did not.

 

Bruce

 

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Clay, Bruce
Sent: Wednesday, September 24, 2008 2:55 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] shapefile field size

 

I have an OGR based application that I am having problems with data
storage

 

Several fields are OFTInteger and several are OFTReal

 

When I write a dataset using the OCI driver the integer fields all store
valid information.

 

When I write a dataset using the Shapefile driver the integer fields
appear to be truncated to shorts. They are defined with a field width of
4 bytes.  It almost looks like the data is stored as ASCII because only
the 4 most significant digits are actually saved in the shapefile.

 

Is this the intended operation or is there some extra flag that I need
to set when I switch between creating an Oracle table and a shapefile?

 

Bruce

 



This message and any enclosures are intended only for the addressee.
Please  
notify the sender by email if you are not the intended recipient.  If
you are  
not the intended recipient, you may not use, copy, disclose, or
distribute this  
message or its contents or enclosures to any other person and any such
actions  
may be unlawful.  Ball reserves the right to monitor and review all
messages  
and enclosures sent to or from this email address.



This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080924/085b563e/attachment.html
From even.rouault at mines-paris.org  Wed Sep 24 15:31:20 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 24 15:32:04 2008
Subject: [gdal-dev] shapefile field size
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCDA@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCD9@daytonmsg2k3.AERO.BALL.COM>
	<C482FF98AE985A47B8C982FD429C9E34027EBCDA@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <200809242131.21773.even.rouault@mines-paris.org>

A quick reading of your issue let me think you're hitting the "well-known" and 
still unresolved issue, reported as http://trac.osgeo.org/gdal/ticket/2286

Le Wednesday 24 September 2008 21:14:11 Clay, Bruce, vous avez ?crit?:
> Follow on to earlier message.
>
>
>
> I removed the SetLength and SetPrecision from the field specification
> and things are working now.  ArcMap thinks the integer fields are
> Doubles with length of 11 and precision of 11 but the values do not
> appear to be truncated so that is a good thing
>
>
>
> It just seems odd that the OCI driver accepted the size but the
> shapefile driver did not.
>
>
>
> Bruce
>
>
>
> ________________________________
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Clay, Bruce
> Sent: Wednesday, September 24, 2008 2:55 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] shapefile field size
>
>
>
> I have an OGR based application that I am having problems with data
> storage
>
>
>
> Several fields are OFTInteger and several are OFTReal
>
>
>
> When I write a dataset using the OCI driver the integer fields all store
> valid information.
>
>
>
> When I write a dataset using the Shapefile driver the integer fields
> appear to be truncated to shorts. They are defined with a field width of
> 4 bytes.  It almost looks like the data is stored as ASCII because only
> the 4 most significant digits are actually saved in the shapefile.
>
>
>
> Is this the intended operation or is there some extra flag that I need
> to set when I switch between creating an Oracle table and a shapefile?
>
>
>
> Bruce
>
>
>
>
>
> This message and any enclosures are intended only for the addressee.
> Please
> notify the sender by email if you are not the intended recipient.  If
> you are
> not the intended recipient, you may not use, copy, disclose, or
> distribute this
> message or its contents or enclosures to any other person and any such
> actions
> may be unlawful.  Ball reserves the right to monitor and review all
> messages
> and enclosures sent to or from this email address.
>
>
>
> This message and any enclosures are intended only for the addressee. 
> Please notify the sender by email if you are not the intended recipient. 
> If you are not the intended recipient, you may not use, copy, disclose, or
> distribute this message or its contents or enclosures to any other person
> and any such actions may be unlawful.  Ball reserves the right to monitor
> and review all messages and enclosures sent to or from this email address.


From mitchelljj98 at gmail.com  Wed Sep 24 16:03:16 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Sep 24 16:03:19 2008
Subject: [gdal-dev] can't derive the projection for a geotiff in Guatemala
Message-ID: <fa2ac0580809241303o1c17b40fma3c654a6af864950@mail.gmail.com>

Hi,

I am having difficulty deriving the EPSG code/projection/Coordinate System
for a geotiff in Guatemala.

Any help would be appreciated.

Below is the gdalinfo listing:

Driver: GTiff/GeoTIFF
Size is 11214, 7860
Coordinate System is `'
Origin = (317049.000000000000000,1659460.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=ERDAS IMAGINE
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  317049.000, 1659460.000)
Lower Left  (  317049.000, 1655530.000)
Upper Right (  322656.000, 1659460.000)
Lower Right (  322656.000, 1655530.000)
Center      (  319852.500, 1657495.000)
Band 1 Block=11214x8 Type=Byte, ColorInterp=Red
Band 2 Block=11214x8 Type=Byte, ColorInterp=Green
Band 3 Block=11214x8 Type=Byte, ColorInterp=Blue

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080924/42558c51/attachment.html
From sigmazero13 at gmail.com  Wed Sep 24 16:30:26 2008
From: sigmazero13 at gmail.com (sigmazero13)
Date: Wed Sep 24 16:30:28 2008
Subject: [gdal-dev] gdal error 4
In-Reply-To: <48BEAFB8.8050903@uni-koeln.de>
References: <48BEAFB8.8050903@uni-koeln.de>
Message-ID: <1222288226134-1116388.post@n2.nabble.com>


I've had the same problem with another .tif file on my machine, too.  I
checked the permissions, and it's readable by owner, group, and world, so
I'm not sure what else to try.

When I do a gdalinfo --formats, though, there is a GTiff format, but nothing
for just TIF.  I'm not sure what might be wrong here :(

Thanks,

Scott

Christian Willmes wrote:
> 
> Hello,
> 
> I have a problem with the gdal Installation on our webserver. I'm new to 
> gdal, to be specific I try to get some raster data into mapserver, but 
> there occours the following error according gdal and I could not find 
> anything what helped me out on google and other mailinglists.
> 
> I get the following Error when I try to access data with gdal:
> <--------
> cwillmes@lvr18$ gdalinfo SRTM_Elevation.tif
> ERROR 4: `SRTM_Elevation.tif' not recognised as a supported file format.
> 
> GDALOpen failed - 4
> `SRTM_Elevation.tif' not recognised as a supported file format.
> --------->
> 

-- 
View this message in context: http://n2.nabble.com/gdal-error-4-tp836755p1116388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From paar at lenne3d.com  Wed Sep 24 16:31:00 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Wed Sep 24 16:31:10 2008
Subject: [gdal-dev] Out of Office
Message-ID: <85fc61cec3344d7caa9732973de18d0a@607d6216b9f344a18bc943c5065addf2>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From Shawn.Gong at drdc-rddc.gc.ca  Wed Sep 24 16:32:22 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Sep 24 16:32:08 2008
Subject: [gdal-dev] copy GCPs from .xml to GTiff
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1201E8@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

I have two Radarsat-2 files
	File A: product.xml
	File B: single channel GTiff  
I am looking for a simple way to copy file A's GCPs and GCP Projection
to file B, delete 4 existing GCPs in file B, and resave (as GTiff).
Basically replacing the below Blue text with Red text. It will be even
better if Pink text can also be copied over.

The closest code example I found is to create a VRT wrapper around the
dataset:
       self.src_ds = gdal.Open('product.xml') 
       opts = vrtutils.VRTCreationOptions(self.src_ds.RasterCount)
       lines =
gdal.SerializeXMLTree(vrtutils.serializeDataset(self.src_ds, opts))
       vrtstr = string.join(lines,'')
       vrtds = gdal.Open(vrtstr)
       self.new_ds =
gdal.GetDriverByName("GTiff").CreateCopy(tmp_filename, vrtds, 0)
          read in array...
       
       gdalnumeric.BandWriteArray(self.new_ds.GetRasterBand(1),
datablock, x_size, y_size)

However the new file has the same number of bands as product.xml (more
than one band).

I also followed OpenEV's compose.py and got all the GCPs from file A
into a list. But don't know how to save them to file B.


Your help is appreciated.

Shawn



Gdalinfo file A:
Driver: RS2/RadarSat 2 XML Product
Files: product.xml
Size is 12132, 3324
Coordinate System is `'
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,
0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901
"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat
",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (-6.44497337453028,36.2346972769233,41.6078605651855)
GCP[  1]: Id=2, Info=
          (1213.09998,0) ->
(-6.27897074066121,36.2105053710372,41.6078605651855)
GCP[  2]: Id=3, Info=
          (2426.19995,0) ->
(-6.11306984793545,36.1860836654035,41.6078605651855)
GCP[  3]: Id=4, Info=
          (3639.30005,0) ->
(-5.9472716724433,36.1614325255025,41.6078605651855)
...  ...
GCP[118]: Id=119, Info=
          (9704.7998,3323) ->
(-5.20826990376107,35.666853278978,41.6078605651855)
GCP[119]: Id=120, Info=
          (10917.9004,3323) ->
(-5.04390384909976,35.6408291207172,41.6078605651855)
GCP[120]: Id=121, Info=
          (12131,3323) ->
(-4.87964636502838,35.614581497011,41.6078605651855)
Metadata:
  PRODUCT_TYPE=SGF
  PIXEL_SPACING=1.25000000e+01
  LINE_SPACING=1.25000000e+01
  BETA_NOUGHT_LUT=lutBeta.xml
  SIGMA_NOUGHT_LUT=lutSigma.xml
  GAMMA_LUT=lutGamma.xml
  SATELLITE_IDENTIFIER=RADARSAT-2
  SENSOR_IDENTIFIER=SAR
  BEAM_MODE=W2
  ACQUISITION_START_TIME=2008-02-13T06:26:25.356741Z
  NEAR_RANGE_INCIDENCE_ANGLE=3.06394997e+01
  FAR_RANGE_INCIDENCE_ANGLE=3.94798698e+01
  SLANT_RANGE_NEAR_EDGE=9.078054910011414e+05
Subdatasets:
  SUBDATASET_3_NAME=RADARSAT_2_CALIB:BETA0:product.xml
  SUBDATASET_3_DESC=Beta Nought calibrated
  SUBDATASET_2_NAME=RADARSAT_2_CALIB:SIGMA0:product.xml
  SUBDATASET_2_DESC=Sigma Nought calibrated
  SUBDATASET_4_NAME=RADARSAT_2_CALIB:GAMMA:product.xml
  SUBDATASET_4_DESC=Gamma calibrated
  SUBDATASET_1_NAME=RADARSAT_2_CALIB:UNCALIB:product.xml
  SUBDATASET_1_DESC=Uncalibrated digital numbers
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3324.0)
Upper Right (12132.0,    0.0)
Lower Right (12132.0, 3324.0)
Center      ( 6066.0, 1662.0)
Band 1 Block=12132x43 Type=UInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=VV
Band 2 Block=12132x43 Type=UInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=VH


Gdalinfo file B:
Driver: GTiff/GeoTIFF
Files: imagery_VH.tif
Size is 12132, 3324
Coordinate System is `'
GCP Projection =
GEOGCS["User-Defined",DATUM["unknown",SPHEROID["unnamed",6378137,298.257
222932867]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
GCP[  0]: Id=1, Info=
          (0.5,0.5) ->
(-6.44505378645208,36.234651733764,41.6078221084219)
GCP[  1]: Id=2, Info=
          (12131.5,0.5) ->
(-4.78969807179151,35.9824333182103,41.6079517686606)
GCP[  2]: Id=3, Info=
          (12131.5,3323.5) ->
(-4.8797286318157,35.6145371536105,41.607949202978)
GCP[  3]: Id=4, Info=
          (0.5,3323.5) ->
(-6.52707534347629,35.8669100589582,41.6078219661592)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_IMAGEDESCRIPTION={
  bandList = 
  [
    4;
  ]
}
  TIFFTAG_DATETIME=2008:02:13 22:02:16
  TIFFTAG_MINSAMPLEVALUE=24
  TIFFTAG_MAXSAMPLEVALUE=18827
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 3324.0)
Upper Right (12132.0,    0.0)
Lower Right (12132.0, 3324.0)
Center      ( 6066.0, 1662.0)
Band 1 Block=12132x43 Type=UInt16, ColorInterp=Gray


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080924/32f5c7df/attachment-0001.html
From bfraser at geoanalytic.com  Wed Sep 24 17:04:49 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Sep 24 17:05:16 2008
Subject: [gdal-dev] copy GCPs from .xml to GTiff
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1201E8@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1201E8@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <48DAAB71.4020600@geoanalytic.com>

Shawn,

  I had a similar need some time ago.  I hacked gdalinfo to output only the GCPs in a GDAL-friendly format (one "-GCP Pixel Line X Y" per line) and redirected the results to a text file of command-line options:

	my_gdalinfo file1.tif > file1_gcps.opt

Then attached them to my other tiff using stock gdal_translate:

	gdal_translate --optfile file1_gcps.opt file2.tif file2b.tif

Brent

Gong, Shawn (Contractor) wrote:
> Hi list,
> 
> I have two Radarsat-2 files
> 
>       File A: product.xml
> 
>       File B: single channel GTiff 
> 
> I am looking for a simple way to copy file A?s GCPs and GCP Projection 
> to file B, delete 4 existing GCPs in file B, and resave (as GTiff).
> 
> Basically replacing the below Blue text with Red text. It will be even 
> better if Pink text can also be copied over.
> 
> The closest code example I found is to create a VRT wrapper around the 
> dataset:
> 
>        self.src_ds = gdal.Open(?product.xml?)
> 
>        opts = vrtutils.VRTCreationOptions(self.src_ds.RasterCount)
> 
>        lines = 
> gdal.SerializeXMLTree(vrtutils.serializeDataset(self.src_ds, opts))
> 
>        vrtstr = string.join(lines,'')
> 
>        vrtds = gdal.Open(vrtstr)
> 
>        self.new_ds = 
> gdal.GetDriverByName("GTiff").CreateCopy(tmp_filename, vrtds, 0)
> 
>           read in array...
> 
>       
> 
>        gdalnumeric.BandWriteArray(self.new_ds.GetRasterBand(1), 
> datablock, x_size, y_size)
> 
> However the new file has the same number of bands as product.xml (more 
> than one band).
> 
> I also followed OpenEV's compose.py and got all the GCPs from file A 
> into a list. But don't know how to save them to file B.
> 
> Your help is appreciated.
> 
> Shawn
> 
> *Gdalinfo file A:*
> 
> Driver: RS2/RadarSat 2 XML Product
> 
> Files: product.xml
> 
> Size is 12132, 3324
> 
> Coordinate System is `'
> 
> GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]
> 
> GCP[  0]: Id=1, Info=
> 
>           (0,0) -> (-6.44497337453028,36.2346972769233,41.6078605651855)
> 
> GCP[  1]: Id=2, Info=
> 
>           (1213.09998,0) -> 
> (-6.27897074066121,36.2105053710372,41.6078605651855)
> 
> GCP[  2]: Id=3, Info=
> 
>           (2426.19995,0) -> 
> (-6.11306984793545,36.1860836654035,41.6078605651855)
> 
> GCP[  3]: Id=4, Info=
> 
>           (3639.30005,0) -> 
> (-5.9472716724433,36.1614325255025,41.6078605651855)
> 
> ...  ...
> 
> GCP[118]: Id=119, Info=
> 
>           (9704.7998,3323) -> 
> (-5.20826990376107,35.666853278978,41.6078605651855)
> 
> GCP[119]: Id=120, Info=
> 
>           (10917.9004,3323) -> 
> (-5.04390384909976,35.6408291207172,41.6078605651855)
> 
> GCP[120]: Id=121, Info=
> 
>           (12131,3323) -> 
> (-4.87964636502838,35.614581497011,41.6078605651855)
> 
> Metadata:
> 
>   PRODUCT_TYPE=SGF
> 
>   PIXEL_SPACING=1.25000000e+01
> 
>   LINE_SPACING=1.25000000e+01
> 
>   BETA_NOUGHT_LUT=lutBeta.xml
> 
>   SIGMA_NOUGHT_LUT=lutSigma.xml
> 
>   GAMMA_LUT=lutGamma.xml
> 
>   SATELLITE_IDENTIFIER=RADARSAT-2
> 
>   SENSOR_IDENTIFIER=SAR
> 
>   BEAM_MODE=W2
> 
>   ACQUISITION_START_TIME=2008-02-13T06:26:25.356741Z
> 
>   NEAR_RANGE_INCIDENCE_ANGLE=3.06394997e+01
> 
>   FAR_RANGE_INCIDENCE_ANGLE=3.94798698e+01
> 
>   SLANT_RANGE_NEAR_EDGE=9.078054910011414e+05
> 
> Subdatasets:
> 
>   SUBDATASET_3_NAME=RADARSAT_2_CALIB:BETA0:product.xml
> 
>   SUBDATASET_3_DESC=Beta Nought calibrated
> 
>   SUBDATASET_2_NAME=RADARSAT_2_CALIB:SIGMA0:product.xml
> 
>   SUBDATASET_2_DESC=Sigma Nought calibrated
> 
>   SUBDATASET_4_NAME=RADARSAT_2_CALIB:GAMMA:product.xml
> 
>   SUBDATASET_4_DESC=Gamma calibrated
> 
>   SUBDATASET_1_NAME=RADARSAT_2_CALIB:UNCALIB:product.xml
> 
>   SUBDATASET_1_DESC=Uncalibrated digital numbers
> 
> Corner Coordinates:
> 
> Upper Left  (    0.0,    0.0)
> 
> Lower Left  (    0.0, 3324.0)
> 
> Upper Right (12132.0,    0.0)
> 
> Lower Right (12132.0, 3324.0)
> 
> Center      ( 6066.0, 1662.0)
> 
> Band 1 Block=12132x43 Type=UInt16, ColorInterp=Undefined
> 
>   Metadata:
> 
>     POLARIMETRIC_INTERP=VV
> 
> Band 2 Block=12132x43 Type=UInt16, ColorInterp=Undefined
> 
>   Metadata:
> 
>     POLARIMETRIC_INTERP=VH
> 
> 
> *Gdalinfo file B:*
> 
> Driver: GTiff/GeoTIFF
> 
> Files: imagery_VH.tif
> 
> Size is 12132, 3324
> 
> Coordinate System is `'
> 
> GCP Projection = 
> GEOGCS["User-Defined",DATUM["unknown",SPHEROID["unnamed",6378137,298.257222932867]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
> 
> GCP[  0]: Id=1, Info=
> 
>           (0.5,0.5) -> (-6.44505378645208,36.234651733764,41.6078221084219)
> 
> GCP[  1]: Id=2, Info=
> 
>           (12131.5,0.5) -> 
> (-4.78969807179151,35.9824333182103,41.6079517686606)
> 
> GCP[  2]: Id=3, Info=
> 
>           (12131.5,3323.5) -> 
> (-4.8797286318157,35.6145371536105,41.607949202978)
> 
> GCP[  3]: Id=4, Info=
> 
>           (0.5,3323.5) -> 
> (-6.52707534347629,35.8669100589582,41.6078219661592)
> 
> Metadata:
> 
>   AREA_OR_POINT=Area
> 
>   TIFFTAG_IMAGEDESCRIPTION={
> 
>   bandList =
> 
>   [
> 
>     4;
> 
>   ]
> 
> }
> 
>   TIFFTAG_DATETIME=2008:02:13 22:02:16
> 
>   TIFFTAG_MINSAMPLEVALUE=24
> 
>   TIFFTAG_MAXSAMPLEVALUE=18827
> 
> Image Structure Metadata:
> 
>   INTERLEAVE=BAND
> 
> Corner Coordinates:
> 
> Upper Left  (    0.0,    0.0)
> 
> Lower Left  (    0.0, 3324.0)
> 
> Upper Right (12132.0,    0.0)
> 
> Lower Right (12132.0, 3324.0)
> 
> Center      ( 6066.0, 1662.0)
> 
> Band 1 Block=12132x43 Type=UInt16, ColorInterp=Gray
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From liu_daojie at 163.com  Wed Sep 24 21:18:45 2008
From: liu_daojie at 163.com (liu_daojie)
Date: Wed Sep 24 21:34:04 2008
Subject: [gdal-dev] question
Message-ID: <5565492.74121222305525782.JavaMail.coremail@bj163app39.163.com>

 
 hello:
 here I have a question in wince you use the same lib and include as in vc6.0 ? or others ? can you list them?the method is same in wince as
  in vc6 to open image(tiff)?
 thanks
  liudaojie

 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080925/1b9833fa/attachment.html
From warmerdam at pobox.com  Wed Sep 24 22:42:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 24 22:43:13 2008
Subject: [gdal-dev] gdal error 4
In-Reply-To: <1222288226134-1116388.post@n2.nabble.com>
References: <48BEAFB8.8050903@uni-koeln.de>
	<1222288226134-1116388.post@n2.nabble.com>
Message-ID: <48DAFAB0.9040006@pobox.com>

sigmazero13 wrote:
> I've had the same problem with another .tif file on my machine, too.  I
> checked the permissions, and it's readable by owner, group, and world, so
> I'm not sure what else to try.
> 
> When I do a gdalinfo --formats, though, there is a GTiff format, but nothing
> for just TIF.  I'm not sure what might be wrong here :(

Scott,

My next guess would be that it is larger than 2GB and that somehow your
GDAL did not get built properly with "big file" support, or that big
file handling is somehow being botched by the operating system.  Do modest
sized tiff files work fine?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mitchelljj98 at gmail.com  Thu Sep 25 04:10:04 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Thu Sep 25 04:10:06 2008
Subject: [gdal-dev] Re: [mapserver-users] can't derive the projection for a
	geotiff in Guatemala
In-Reply-To: <48DAFAEE.6090709@pobox.com>
References: <fa2ac0580809241303o1c17b40fma3c654a6af864950@mail.gmail.com>
	<48DAFAEE.6090709@pobox.com>
Message-ID: <fa2ac0580809250110x7581fdc3ud85448ec286bbf21@mail.gmail.com>

Frank,

No .aux file was supplied.  They just gave us a .tif and a .tfw which were
in the same directory which means gdalinfo was run against both.  Based on
the limited information that was supplied the only thing that I can think of
doing at this point is to find all the EPSG codes listed under Guatemala and
running gdalwarp against each and then displaying each within a mapping
application to see if it accurately displays within Guatemala.

John

On Wed, Sep 24, 2008 at 10:43 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> John Mitchell wrote:
>
>> Hi,
>>
>> I am having difficulty deriving the EPSG code/projection/Coordinate System
>> for a geotiff in Guatemala.
>>
>> Any help would be appreciated.
>>
>
> John,
>
> By any chance is there an .aux file with this .tif file?  If so, running
> gdalinfo on it might be helpful to get the coordinate system.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080925/858151e6/attachment.html
From schut at sarvision.nl  Thu Sep 25 07:06:51 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Sep 25 07:06:54 2008
Subject: [gdal-dev] mask bands howto
In-Reply-To: <200809241949.25447.even.rouault@mines-paris.org>
References: <48DA50A7.1070002@sarvision.nl>
	<200809241949.25447.even.rouault@mines-paris.org>
Message-ID: <48DB70CB.4060001@sarvision.nl>

Thanks for the info, both.

Major lesson: after ds creation, first close it, than open it GA_Update, 
then CreateMaskBand().

Another question: it seems (geotiff, external) masks are of dtype byte? 
So they are not *bit*masks and will use 8 times more space than strictly 
required (when no compression is used)? I thought the tiff spec allowed 
for 1-bit datatypes (mainly used for fax data probably)...
And, apart from the wasted space (I use compression anyway), I'd like to 
know the mask value conventions. I mean, a pixel in a mask could have 
values from 0-255, not? Which one is True (masked), which one is 
False(unmasked)? 'Cause if I give it a bool numpy array to write to the 
mask (using gdal_array), it complains about incompatible datatypes...

Cheers,
Vincent.


Even Rouault wrote:
> You can also take inspiration from the python autotest suite : 
> http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/mask.py
> 
> Le Wednesday 24 September 2008 16:37:27 Vincent Schut, vous avez ?crit :
>> Hi,
>>
>> is there any up-to-date documentation/tutorial available on the recently
>> added mask bands feature? I found
>> http://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask, but I was hoping
>> more on something like an api tutorial. The doxygen generated stuff all
>> is empty for mask related functions...
>>
>> Specifically, I'd like to know if it is possible to (using swig python)
>> create a DS (gtiff), and then write boolean data into
>> ds.GetRasterBand(1).GetMaskBand()? Or should I call CreateMaskBand
>> first? This is not entirely clear to me...
>>
>> Vincent.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 

From kai.zimmerl at srv.se  Thu Sep 25 07:45:43 2008
From: kai.zimmerl at srv.se (kai.zimmerl@srv.se)
Date: Thu Sep 25 07:44:19 2008
Subject: [gdal-dev] ogr2ogr: How can I get GML output file in 2D?
Message-ID: <A23CC7C61E04EA428933D1322C60CAA4473E9F8F2D@EXMAIL.srv.local>

Hi!

I tried to use ogr2ogr to reproject/transform a gml file from epsg: 3021 to epsg:4326 but I get the output file in 2,5D (z=0) even though both epsg: 3021 and epsg:4326 are 2D.

I need to have the result in 2D (with only x,y values).

I use  FWTools2.2.6 and the command line: ogr2ogr -t_srs EPSG:4326 -s_srs EPSG:3021 -f GML Output.gml Input.gml
My input file content is attached below.

Is there a solution to this?

Best Regards
Kai Zimmerl


<?xml version="1.0" encoding="UTF-8" standalone="no"?><g:TATUKGIS xmlns:gml="http://www.opengis.net/gml" xmlns:g="http://www.tatukgis.com/GML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/gml feature.xsd http://www.tatukgis.com/GML DispersionResult.xsd"><gml:description>Geographic Markup Language (GML)</gml:description><gml:name>Layer</gml:name><gml:boundedBy><gml:Box><gml:coordinates>1623780.59514724,6580981.45879942 1627316.12905318,6583481.45879942</gml:coordinates></gml:Box></gml:boundedBy><gml:featureMember><g:PROPERTIES fid="UID.1"><g:CONC>17,6</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E90FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1623780.59514724,6583481.45879942 1627316.12905318,6583481.45879942 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.2"><g:CONC>61,25</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E90FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624369.85079823,6583064.79213275 1626726.87340219,6583064.79213275 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.3"><g:CONC>105,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFFF00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624664.47862373,6582767.17308513 1626432.24557669,6582767.17308513 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.4"><g:CONC>157,5</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFFF00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624959.10644922,6582496.61031457 1626137.6177512,6582496.61031457 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.5"><g:CONC>210,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFF4500</g:COLOR><g:LEGEND> &gt; IDLH</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1625106.42036197,6582231.45879942 1625990.30383845,6582231.45879942 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember></g:TATUKGIS>

From mateusz at loskot.net  Thu Sep 25 08:26:38 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Sep 25 08:26:45 2008
Subject: [gdal-dev] question
In-Reply-To: <5565492.74121222305525782.JavaMail.coremail@bj163app39.163.com>
References: <5565492.74121222305525782.JavaMail.coremail@bj163app39.163.com>
Message-ID: <55771.195.24.248.244.1222345598.squirrel@loskot.net>

liu_daojie wrote:
>
>  hello:
>  here I have a question in wince you use the same lib and include as in
> vc6.0 ?

You have to build dedicated DLL for Windows CE.
Here is solution/project file for Visual C++ 2005/2008:

https://svn.osgeo.org/gdal/trunk/gdal/wince/msvc80/

> or others ? can you list them?

One DLL and one import library.

> the method is same in wince as in vc6 to open image(tiff)?

Yes, it is.
Tom has already explained it:

http://lists.osgeo.org/pipermail/gdal-dev/2008-September/018390.html

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From 2voodoo at gmx.de  Thu Sep 25 11:00:32 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Thu Sep 25 11:00:39 2008
Subject: [gdal-dev] caching & spatial indexing of shapefiles?
Message-ID: <48DBA790.4050309@gmx.de>

Hi there,

the documentation gave me no real answer to the question if there is
something like a caching mechanism for feature request. If I request a
feature, is this read from disk every time or somehow cached?

Another thing I could not find out is how I can activate spatial
indexing for shape files - the documentation says I should execute the
following SQL command: CREATE SPATIAL INDEX ON tablename [DEPTH N]
But what is tablename and how do I know if the spatial index is created?

Thanks in advance,
Tom
From mateusz at loskot.net  Thu Sep 25 11:15:19 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Sep 25 11:15:27 2008
Subject: [gdal-dev] caching & spatial indexing of shapefiles?
In-Reply-To: <48DBA790.4050309@gmx.de>
References: <48DBA790.4050309@gmx.de>
Message-ID: <57283.195.24.248.244.1222355719.squirrel@loskot.net>

Tom Kazimiers wrote:
> Hi there,
>
> the documentation gave me no real answer to the question if there is
> something like a caching mechanism for feature request. If I request a
> feature, is this read from disk every time or somehow cached?

Tom,

AFAIK, there is no caching mechanism.
I've it on my TODO list to develop a thin wrapper on Shapelib or OGR that
will provide caching support, to minimize disk I/O operations.

> Another thing I could not find out is how I can activate spatial
> indexing for shape files - the documentation says I should execute the
> following SQL command: CREATE SPATIAL INDEX ON tablename [DEPTH N]
> But what is tablename and how do I know if the spatial index is created?

Spatial index is automatically activated if OGR Shapefile driver finds
.qix file for your Shapefile.

Let's say you have Shapefile called roads.shp|.shx|.dbf
Tablename is "roards" - a filename without extension.

Here you can find some real example:

http://mateusz.loskot.net/?p=227

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jgomezdans at gmail.com  Thu Sep 25 12:00:57 2008
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Thu Sep 25 12:00:59 2008
Subject: [gdal-dev] Best way to test wheter point is contained in Polygon
In-Reply-To: <48DBB0EE.7080201@noaa.gov>
References: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
	<48DBB0EE.7080201@noaa.gov>
Message-ID: <91d218430809250900w5899bb3bleacbbdfaee4787b0@mail.gmail.com>

Chris, thanks for your comments

2008/9/25 Christopher Barker <Chris.Barker@noaa.gov>

> Perhaps cumbersome, but in fact, at some level, you are indeed doing a
> rasterization with the P-in-P testing, as you are working with ALL the
> pixels in your raster. I bet it would be a lot faster to rasterize the
> polygons once, rather than doing point-in-polygon tests for every single
> raster point.


You are absolutely right. It's just that you have to call external program
such as gdal_rasterize. Is the rasterization stuff supposed to be available
to the Python GDAL bindings? It would make a lot of sense, I guess.

In the end, I ended up rasterising rather than testing each geometry.
Blindingly fast ;)

Cheer,
Jose


-- 
Centre for Terrestrial Carbon Dynamics
Department of Geography, University College London
Gower Street, London WC1E 6BT, UK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080925/13bd7f18/attachment.html
From paar at lenne3d.com  Thu Sep 25 12:00:54 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Thu Sep 25 12:01:05 2008
Subject: [gdal-dev] Out of Office
Message-ID: <964b4397c324480ba9b2efafa50b5a2e@8b366599d46c4379ac2ae409bb4ec072>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From Chris.Barker at noaa.gov  Thu Sep 25 11:40:30 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Sep 25 12:40:37 2008
Subject: [gdal-dev] Best way to test wheter point is contained in Polygon
In-Reply-To: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
References: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
Message-ID: <48DBB0EE.7080201@noaa.gov>

Jose Gomez-Dans wrote:
> I have a raster file and a vector file. I want to assign to each pixel 
> in my raster size a value derived from the vector file (which are 
> polygons). To do this, I want to test that the centroid of my pixel lies 
> within a given polygon. In the past, I have done this gdal_rasterize-ing 
> the polygon file, and going through numpy arrays. It is a bit 
> cumbersome, and the rasterization is not really needed with OGR. 

Perhaps cumbersome, but in fact, at some level, you are indeed doing a 
rasterization with the P-in-P testing, as you are working with ALL the 
pixels in your raster. I bet it would be a lot faster to rasterize the 
polygons once, rather than doing point-in-polygon tests for every single 
raster point.

Think of it this way:

With rasterize, you are first finding ALL the points in a given polygon. 
With P-in-P testing, you are finding if one point is in a given polygon. 
If you had a few points to do, it would be a waste to find them all, but 
since you are, in fact, doing all the raster points, why not only do it 
all at once?

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From 2voodoo at gmx.de  Thu Sep 25 12:49:39 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Thu Sep 25 12:49:47 2008
Subject: [gdal-dev] caching & spatial indexing of shapefiles?
In-Reply-To: <57283.195.24.248.244.1222355719.squirrel@loskot.net>
References: <48DBA790.4050309@gmx.de>
	<57283.195.24.248.244.1222355719.squirrel@loskot.net>
Message-ID: <48DBC123.609@gmx.de>

Mateusz Loskot schrieb:
> Tom Kazimiers wrote:
>   
>> Hi there,
>>
>> the documentation gave me no real answer to the question if there is
>> something like a caching mechanism for feature request. If I request a
>> feature, is this read from disk every time or somehow cached?
>>     
>
> Tom,
>
> AFAIK, there is no caching mechanism.
> I've it on my TODO list to develop a thin wrapper on Shapelib or OGR that
> will provide caching support, to minimize disk I/O operations.
>
>   
>> Another thing I could not find out is how I can activate spatial
>> indexing for shape files - the documentation says I should execute the
>> following SQL command: CREATE SPATIAL INDEX ON tablename [DEPTH N]
>> But what is tablename and how do I know if the spatial index is created?
>>     
>
> Spatial index is automatically activated if OGR Shapefile driver finds
> .qix file for your Shapefile.
>
> Let's say you have Shapefile called roads.shp|.shx|.dbf
> Tablename is "roards" - a filename without extension.
>
> Here you can find some real example:
>
> http://mateusz.loskot.net/?p=227
>
> Best regards,
>   
Mateusz,

thank you very much :)

Regards,
Tom
From gaffigan at sfos.uaf.edu  Thu Sep 25 14:54:00 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Thu Sep 25 15:06:28 2008
Subject: [gdal-dev] GTiff driver changes datum and spheroid names during
 creation in 1.5.2
Message-ID: <48DBDE48.3080609@sfos.uaf.edu>

Hello,

Below is some python code and output which demonstrates a problem I'm 
having when writing GTiff's under gdal-1.5.2, wherein the DATUM and 
SPHEROID names are changed from what's in the source srs, 
"Not_specified_based_on_Authalic_Sphere" and "Sphere", to "unknown" and 
"unnamed", respectively.

While this is not a problem in Mapserver, it is in ArcGIS, because it 
causes a failure to associate GCS_SPHERE with spatial reference and the 
result is a significant shift when viewing the layer.

#### begin program
try:  from osgeo import gdal
except:  import gdal

src_ds = 
gdal.Open('http://ak.aoos.org/opendap/testing/modis/A20080916_232000_sst.hdf?l3m_data[y][x]')
print src_ds.GetProjectionRef()
print 'Coordinate system from source\n    %s' % src_ds.GetProjectionRef()
driver = gdal.GetDriverByName('GTiff')
dst_ds = driver.CreateCopy('A20080916_232000_sst.tif', src_ds, 1, 
['COMPRESS=LZW'])
print 'Coordinate system from GTiff through CreateCopy()\n    %s' % 
dst_ds.GetProjectionRef()
del dst_ds
#### end program

#### begin output
Coordinate system from source
 
GEOGCS["GCS_Sphere",DATUM["Not_specified_based_on_Authalic_Sphere",SPHEROID["Sphere",6371000,0]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
Coordinate system from GTiff through CreateCopy()
 
GEOGCS["GCS_Sphere",DATUM["unknown",SPHEROID["unnamed",6371000,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
#### end output

Under gdal-1.4.2, the names are not changed.  If I use 1.5.2 gdal to 
open the geotif created with 1.4.2 gdal, which has the unchanged names, 
then the SPHEROID name shows as "unretrievable - using WGS84", as below. 
  Regardless of gdal version, if I create files using the HDF4Image or 
netCDF drivers, instead of GTiff, then the names are not changed.

# Coordinate system of GTiff created by gdal-1.4.2 as shown in gdal-1.5.2
GEOGCS["GCS_Sphere",DATUM["unknown",SPHEROID["unretrievable - using 
WGS84",6378137,298.257223563,AUTHORITY["EPSG","0"]],AUTHORITY["EPSG","6035"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]

It seems to me that there is a bug in the GTiff driver, introduced in 
1.5.  Am I wrong?

Thanks in advance.

Steve
From Chris.Barker at noaa.gov  Thu Sep 25 16:28:42 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Sep 25 16:27:56 2008
Subject: [gdal-dev] Best way to test wheter point is contained in Polygon
In-Reply-To: <91d218430809250900w5899bb3bleacbbdfaee4787b0@mail.gmail.com>
References: <91d218430809220735w72d70568kb6f272b5362a6f5a@mail.gmail.com>
	<48DBB0EE.7080201@noaa.gov>
	<91d218430809250900w5899bb3bleacbbdfaee4787b0@mail.gmail.com>
Message-ID: <48DBF47A.7030707@noaa.gov>

Jose Gomez-Dans wrote:
> You are absolutely right. It's just that you have to call external program
> such as gdal_rasterize.

Ah -- I see what you mean by cumbersome now.

> Is the rasterization stuff supposed to be available
> to the Python GDAL bindings?

That would be nice -- anyone know? I suppose looking at the 
gdal_rasterize code might help you figure it out.

Another option is to rasterize to an in-memory bitmap  with another lib, 
like PIL or pyCairo, or mapnik, or maybe mapserver, though I don't know 
if you could keep it in memory with mapserver.

> In the end, I ended up rasterising rather than testing each geometry.
> Blindingly fast ;)

I"m glad that worked out.

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From neteler at osgeo.org  Thu Sep 25 17:52:28 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Thu Sep 25 17:52:30 2008
Subject: [gdal-dev] http://download.osgeo.org/gdal/data/ogr/ - more data
	sets?
Message-ID: <86782b610809251452y5942f3b1y53995e14cb7c9528@mail.gmail.com>

Hi,

would it be possible to populate
   http://download.osgeo.org/gdal/data/ogr/
with more data sets? I guess that the OGR maintainers have those
for testing - if free/libre, please upload them.

http://download.osgeo.org/gdal/data/
is a great resource for testing... (also for other OSGeo projects).

thanks,
Markus
From Andruit at gmx.de  Fri Sep 26 08:55:48 2008
From: Andruit at gmx.de (Andruit@gmx.de)
Date: Fri Sep 26 08:55:50 2008
Subject: [gdal-dev] query raster values by xy-location 
Message-ID: <20080926125548.112220@gmx.net>

Hello,


I have an ESRI ascii raster and would like to get the raster values at defined x y locations. 
At the moment I am capable to load the Raster Dataset and can perform several operations like querying the  Min/Max values, the origin, the pixelsize and so on....

But is there a function to get the cell value of a raster at a certain location (x y)????

Has anybody done this before?

Thanks

Andi
-- 
GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
Jetzt dabei sein: http://www.shortview.de/wasistshortview.php?mc=sv_ext_mf@gmx
From mike.nidel at lmco.com  Fri Sep 26 08:36:40 2008
From: mike.nidel at lmco.com (Nidel, Mike)
Date: Fri Sep 26 09:02:51 2008
Subject: [gdal-dev] lib questions
Message-ID: <E4692D1DCAD27245866154AF9CE126B10FDBCB38@emss04m02.us.lmco.com>

Two quick questions:

1. What is libgdalconstjni.so? I've been building and using the JNI
interfaces and just blindly including this file, but I can't determine
what this is and whether I need it. Sorry if this is a stupid question,
I couldn't find the answer in any of the build docs.

2. Is there a reason why on linux the build creates a libgdal.so whereas
on Windows it's gdalXX.dll, i.e. the version number is inserted in the
name? I would think you'd want to be consistent across platforms there.

thanks,

Mike Nidel
From jgomezdans at gmail.com  Fri Sep 26 09:26:49 2008
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Fri Sep 26 09:26:51 2008
Subject: [gdal-dev] query raster values by xy-location
In-Reply-To: <20080926125548.112220@gmx.net>
References: <20080926125548.112220@gmx.net>
Message-ID: <91d218430809260626x35fea474p7dab0f251020ffea@mail.gmail.com>

Hi,

2008/9/26 <Andruit@gmx.de>

>
> I have an ESRI ascii raster and would like to get the raster values at
> defined x y locations.
> At the moment I am capable to load the Raster Dataset and can perform
> several operations like querying the  Min/Max values, the origin, the
> pixelsize and so on....
>
> But is there a function to get the cell value of a raster at a certain
> location (x y)????


You can work out the row and column of your pixel from your (x,y) location
using the raster's geotransform. You can then read in the value of that
particular pixel.

Hope that helps,
J


-- 
Centre for Terrestrial Carbon Dynamics
Department of Geography, University College London
Gower Street, London WC1E 6BT, UK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080926/61bf4161/attachment-0001.html
From liu_daojie at 163.com  Fri Sep 26 11:31:10 2008
From: liu_daojie at 163.com (liu_daojie)
Date: Fri Sep 26 11:46:30 2008
Subject: [gdal-dev] help me
Message-ID: <30372269.1346881222443070027.JavaMail.coremail@bj163app38.163.com>

 hello:
  the following code,can not show tif:
void CTrans::DrawImage1(void)
{  
  m_pMemoryDC->SelectObject(m_pMemoryBitMap);
  CRect rc(0,0,m_pViewWidth,m_pViewHeight); 
  CBrush brush(RGB(255,255,255));
     m_pMemoryDC->FillRect(rc,&brush); 
  if( poDataset != NULL ) 
  {
 
   GDALRasterBand *poBand1;   //
   GDALRasterBand *poBand2;
   GDALRasterBand *poBand3;
   int nBandCount;
   nBandCount=poDataset->GetRasterCount();
   poBand1=poDataset->GetRasterBand(1);
   poBand2=poDataset->GetRasterBand(2);
   poBand3=poDataset->GetRasterBand(3);
   
   if (poBand1!=NULL && poBand2 != NULL &&poBand3!=NULL)  
   {
   
   //
   //
    
   
   int nImgSizeX=poDataset->GetRasterXSize();
   int nImgSizeY=poDataset->GetRasterYSize();
   
   int nBufferSizeX,nBufferSizeY;
   
   nBufferSizeX = nImgSizeX;
   nBufferSizeY= nImgSizeY;
   
   
   
   BYTE *pafScanblock1,*TempLock1;
   BYTE *pafScanblock2,*TempLock2;
   BYTE *pafScanblock3,*TempLock3;
   
     pafScanblock1 = (BYTE *) CPLMalloc((nBufferSizeX)*(nBufferSizeY));
   pafScanblock2 = (BYTE *) CPLMalloc((nBufferSizeX)*(nBufferSizeY));
   pafScanblock3 = (BYTE *) CPLMalloc((nBufferSizeX)*(nBufferSizeY));
   
   TempLock1 = pafScanblock1;
   TempLock2 = pafScanblock2;
   TempLock3 = pafScanblock3;
   
   poBand1->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock1,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );
   
   poBand2->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock2,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );
   
   poBand3->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock3,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );  
   //View
   DWORD dwBytes = (nBufferSizeX * 24) / 8; 
   while(((DWORD) dwBytes) % 4) 
   {
    dwBytes++;
   }
   
   BYTE *szBuffer = new BYTE[nBufferSizeY*dwBytes];
   memset(szBuffer,0,nBufferSizeY*dwBytes);
   BYTE *pTemp = szBuffer; 
   int nIndex = 0;
   for (int i=0;i<nBufferSizeY;i++)
   {
    for (int j=0;j<nBufferSizeX;j++)
    {
    
     BYTE dn1=*pafScanblock1;
      BYTE dn2=*pafScanblock2;
         BYTE dn3=*pafScanblock3;
       
     memcpy(szBuffer,(char*)(&dn3),1);
     szBuffer+=1;
     memcpy(szBuffer,(char*)(&dn2),1);
     szBuffer+=1;
     memcpy(szBuffer,(char*)(&dn1),1);
     szBuffer+=1;
     pafScanblock1++;
     pafScanblock2++;
     pafScanblock3++;
     
    }
    
    szBuffer = pTemp+dwBytes*i;
    
   }
   CPLFree(TempLock1);
   CPLFree(TempLock2);
   CPLFree(TempLock3); 
   
   BITMAPINFOHEADER bmiHdr;
         BITMAPINFO MapInfo;
         memset(&bmiHdr, 0, sizeof(BITMAPINFOHEADER));
         bmiHdr.biBitCount = 3*8;
         bmiHdr.biClrImportant = 0;
         bmiHdr.biClrUsed = 0;
         bmiHdr.biCompression = BI_RGB;
         bmiHdr.biHeight = -nBufferSizeY;
         bmiHdr.biPlanes = 1;
         bmiHdr.biSize = sizeof(BITMAPINFOHEADER);
         bmiHdr.biSizeImage = 0;
         bmiHdr.biWidth = nBufferSizeX;
 
         bmiHdr.biXPelsPerMeter = 0;
         bmiHdr.biYPelsPerMeter = 0;
 
         MapInfo.bmiHeader = bmiHdr;
         MapInfo.bmiColors[0].rgbBlue = 0;
         MapInfo.bmiColors[0].rgbGreen = 0;
         MapInfo.bmiColors[0].rgbRed = 0;
         MapInfo.bmiColors[0].rgbReserved = 0;
 
  //dc.SetStretchBltMode(COLORONCOLOR);
         StretchDIBits(m_pMemoryDC->GetSafeHdc(), 0, 0, nBufferSizeX,nBufferSizeY,//nScrrenWidth, nScrrenHeight,
    0, 0, bmiHdr.biWidth, -bmiHdr.biHeight,
    pTemp, (LPBITMAPINFO)(&MapInfo), DIB_RGB_COLORS, SRCCOPY);
    
    GDALClose(poDataset);
   delete []pTemp;  
   }
  }
 
} 
where are wrong?
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080926/5bc03f4d/attachment.html
From paar at lenne3d.com  Fri Sep 26 12:00:47 2008
From: paar at lenne3d.com (paar@lenne3d.com)
Date: Fri Sep 26 12:00:57 2008
Subject: [gdal-dev] Out of Office
Message-ID: <a78016aef3564eebad7f25f209503111@e2b6fdbcbde846eb9bb38ab7b77a3baf>

Vielen Dank f?r Ihre Nachricht.

Ich bin bis einschlie?lich 26.09.2008 nicht im B?ro und kann Ihre Anfrage leider nicht bearbeiten. Ihre Nachricht wird nicht automatisch weitergeleitet.
Ich werde Ihre eMail gerne nach meiner R?ckkehr beantworten.

Thank you very much for your message.

I'm out of office until Sep 26,2008. 
I'll deal with your email when I return.

Mit freundlichen Gr??en / Best regards,
Philip Paar

If you questions concerning 
- Dejavu3D please write to Dr. Liviu Coconu, cococnu@lenne3d.com
- Entree3D and Marche3D please write to Peter Benedix, benedix@lenne3d.com
- Projects please write to Agnes Kirchhoff, kirchhoff@lenne3d.com


From blake at hailmail.net  Fri Sep 26 13:03:25 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Fri Sep 26 13:03:21 2008
Subject: [gdal-dev] query raster values by xy-location 
In-Reply-To: <20080926125548.112220@gmx.net>
References: <20080926125548.112220@gmx.net>
Message-ID: <434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>

Hi Andi,

I had a similar task where I needed to find the elevation value from a  
geotiff at the upstream and downstream points of a river line segment.

This thread sums up my approach, based on a kick start from helpful  
postgis users:

http://postgis.refractions.net/pipermail/postgis-users/2008-August/020869.html

You'll see within the thread that I link to the code in a google code  
svn repo. I think you'll be most interested in the code around line 61  
of the raster lookup script here:

http://code.google.com/p/dbsgeo/source/browse/trunk/postgis/hydro_model/scripts/elevation_lookup.py#61

I'd be interested if there is a simpler and faster way to approach  
this issue of where to put the values once you've read them  
(particularly for the database access since I was needing to go back  
to postgis with the looked-up values), if anyone has ideas. What I  
found was that writing out a sql insert statement was faster than  
hitting the database with updated queries during the lookup routine,  
but I may not have been using the psycopg2 driver in the most optimal  
way.

Anyway, hope that helps.

Cheers,

Dane

On Sep 26, 2008, at 5:55 AM, Andruit@gmx.de wrote:

> Hello,
>
>
> I have an ESRI ascii raster and would like to get the raster values  
> at defined x y locations.
> At the moment I am capable to load the Raster Dataset and can  
> perform several operations like querying the  Min/Max values, the  
> origin, the pixelsize and so on....
>
> But is there a function to get the cell value of a raster at a  
> certain location (x y)????
>
> Has anybody done this before?
>
> Thanks
>
> Andi
> -- 
> GMX startet ShortView.de. Hier findest Du Leute mit Deinen Interessen!
> Jetzt dabei sein: http://www.shortview.de/wasistshortview.php?mc=sv_ext_mf@gmx
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From blake at hailmail.net  Fri Sep 26 13:05:13 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Fri Sep 26 13:05:08 2008
Subject: [gdal-dev] query raster values by xy-location 
In-Reply-To: <434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>
References: <20080926125548.112220@gmx.net>
	<434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>
Message-ID: <797DBA2C-51AE-4419-B734-51D5A307A708@hailmail.net>


On Sep 26, 2008, at 10:03 AM, Dane Springmeyer wrote:

> What I found was that writing out a sql insert statement was faster  
> than hitting the database with updated queries during the lookup  
> routine, but I may not have been using the psycopg2 driver in the  
> most optimal way.


Oh, and I should probably be using the gdal/ogr driver to connect to  
postgres/postgis anyway, I'm just not aware of how to do this with the  
python bindings.


Dane
From bclay at ball.com  Fri Sep 26 13:52:56 2008
From: bclay at ball.com (Clay, Bruce)
Date: Fri Sep 26 13:53:04 2008
Subject: [gdal-dev] KML output fields
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBCDF@daytonmsg2k3.AERO.BALL.COM>

When I use ogr2ogr to convert a shapefile to KML there are no "Name" or
"Description" fields in the output and all attributes are lined up.

 

When I try to create a KML file from my code and populate the data both
"Name" and "Description" fields are included in the output.

 

I have tried not a variety of things in the call to KML's
CreateDataSource

            Not setting any options (i.e. passing a NULL)

            Setting both to empty strings

CSLSetNameValue( ogrOptions, "NameField", "");

CSLSetNameValue( ogrOptions, "DescriptionField", "");

 

      Setting both to "None"

CSLSetNameValue( ogrOptions, "NameField", "None");

CSLSetNameValue( ogrOptions, "DescriptionField", "None");

 

 

None of the above will remove the 2 fields from the output KML as a
result all real attribute values are sifted up 2 places.  

 

I looked in the ogr2ogr.cpp and I do not see any parameters getting
passed into the call.

 

Does anyone have any idea what might be causing this?

 

Bruce

 

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080926/4d008841/attachment.html
From Steven.Mullins at dmme.virginia.gov  Fri Sep 26 14:50:07 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Fri Sep 26 14:50:49 2008
Subject: [gdal-dev] Edit Metadata on MrSID image
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8304C396E0@exch2k1.dmmenet.mme.state.va.us>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

I would like to replace the projection WKT in a group of MrSID files.  I do not need to modify the compressed image itself, only the metadata.  Can I do this in GDAL?

Thanks,

Steve
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (MingW32) - WinPT 1.2.0

iD8DBQFI3S6wqe/QXYqqWdsRAhi9AJ0VrRCE0TgjeV75UqyOXO65dGVKkgCgp/z3
dSCDDMxDSBp6MAVQEFUav+c=
=So6F
-----END PGP SIGNATURE-----
From dylan.beaudette at gmail.com  Fri Sep 26 15:40:00 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri Sep 26 15:38:18 2008
Subject: [gdal-dev] query raster values by xy-location
In-Reply-To: <434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>
References: <20080926125548.112220@gmx.net>
	<434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>
Message-ID: <200809261240.00463.dylan.beaudette@gmail.com>

On Friday 26 September 2008, Dane Springmeyer wrote:
> Hi Andi,
>
> I had a similar task where I needed to find the elevation value from a
> geotiff at the upstream and downstream points of a river line segment.
>

Another idea is a tool called StarSpan.

Cheers,

Dylan


-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From Andruit at gmx.de  Fri Sep 26 18:44:12 2008
From: Andruit at gmx.de (Andruit@gmx.de)
Date: Fri Sep 26 18:44:15 2008
Subject: [gdal-dev] query raster values by xy-location
In-Reply-To: <200809261240.00463.dylan.beaudette@gmail.com>
References: <20080926125548.112220@gmx.net>
	<434C3B1C-C6A2-41F6-ADBE-6415E72C49DD@hailmail.net>
	<200809261240.00463.dylan.beaudette@gmail.com>
Message-ID: <20080926224412.268030@gmx.net>

Thanks for your suggestion,

As Jose proposed, I worked out the row and column of my pixel from my (x,y) location and extracted the value. 

I am using the function RasterIO() to do so.

It works fine. I can read a xy file and a ESRI ASCII Raster. As a result I get an xyz file.

Andi

-- 
GMX Kostenlose Spiele: Einfach online spielen und Spa? haben mit Pastry Passion!
http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196
From condit at sdsc.edu  Fri Sep 26 19:21:09 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Fri Sep 26 19:21:12 2008
Subject: [gdal-dev] KML output fields
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBCDF@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBCDF@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <845AADAC1106E44996327D62097E4C6B01162F42@et.ad.sdsc.edu>

Hi Bruce-

The KML driver should behave as follows:

If you define a field using a creation option for NameField (the default
is "Name") then it will be written out as the "Name" element. Likewise
with "Description". You're saying that everything works fine using
ogr2ogr but when you try to create an OGR dataset programmatically you
get extra, empty "name" and "description" elements in the output? Can
you file a trouble ticket and include your input layer and code snippet
if possible?

-Chris

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Clay, Bruce
Sent: Friday, September 26, 2008 10:53 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] KML output fields

 

When I use ogr2ogr to convert a shapefile to KML there are no "Name" or
"Description" fields in the output and all attributes are lined up.

 

When I try to create a KML file from my code and populate the data both
"Name" and "Description" fields are included in the output.

 

I have tried not a variety of things in the call to KML's
CreateDataSource

            Not setting any options (i.e. passing a NULL)

            Setting both to empty strings

CSLSetNameValue( ogrOptions, "NameField", "");

CSLSetNameValue( ogrOptions, "DescriptionField", "");

 

      Setting both to "None"

CSLSetNameValue( ogrOptions, "NameField", "None");

CSLSetNameValue( ogrOptions, "DescriptionField", "None");

 

 

None of the above will remove the 2 fields from the output KML as a
result all real attribute values are sifted up 2 places.  

 

I looked in the ogr2ogr.cpp and I do not see any parameters getting
passed into the call.

 

Does anyone have any idea what might be causing this?

 

Bruce

 

 

 

 
 
This message and any enclosures are intended only for the addressee.
Please  
notify the sender by email if you are not the intended recipient.  If
you are  
not the intended recipient, you may not use, copy, disclose, or
distribute this  
message or its contents or enclosures to any other person and any such
actions  
may be unlawful.  Ball reserves the right to monitor and review all
messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080926/a4a261de/attachment-0001.html
From flynnt at acm.org  Fri Sep 26 20:15:04 2008
From: flynnt at acm.org (Tom Flynn)
Date: Fri Sep 26 20:15:07 2008
Subject: [gdal-dev] problems reading a .img file containing only elevation
	data
Message-ID: <85fd0e120809261715s6d7b5738p43b534415b9fa00@mail.gmail.com>

Hi there,

First a disclaimer:  I come from a 3d graphics background and am
somewhat of a GIS noob.  Forgive me if I'm doing something blatently
stupid.

I have a 6000x5000 Erdas .img file containing elevation data as
floating point numbers (GDT_Float32).  I can bring up and view this
file in GlobalMapper on Windows and in QGIS on Linux.  However, when
trying to read this file via GDAL in my application, I get all 0s.
I'm using the GDALDataset::RasterIO() method.  I try to read a line at
a time into a buffer that I then process on my own.  All the data i
seem to be getting into my buffer seems to be zero though.  Here are
my arguments to RasterIO():

            poDataset->RasterIO(
                         GF_Read,        // eRWFlag
                         0, yoffset,     // nXOff, nYOff
                         nXSize, 1,      // nXSize, nYSize
                         pData,              // pData
                         nXSize, 1,      // nBufXSize, nBufYSize
                         type,           // eBufType
                         band,         // nBandCount
                         NULL,           // panBandCount
                         0,              // nPixelSpace
                         0,              // nLineSpace
                         0 );            // nBandSpace

nXSize is the size in pixels of the elevation data (6000).
pData is the pointer to my buffer
type is GDT_Float32 in this case
band is 1, there is only one band in this file.
yoffset is the number of lines down in the file where i want to start reading.

I'm expecting this call to put nXSize*4 bytes of data into my buffer
at pData.  That data will contain floating point numbers.
Do my arguments match what I intend?

I compiled gdal debug and did some single-stepping in the debugger.  I
followed it as far as line 240 in rasterio.cpp in gdal-1.5.2/gcore/.
That line is where the memcpy() occurs.  If i take a look at the
buffer it is copying from, it contains all 0s.

If I do a gdal_translate to another format (say 16bit png or geotiff),
i see all black.

I'm not really familiar with this Erdas .img file format.  Some
cursory googling didn't turn up much info that was useful.  All I know
is that the data is supposedly in 64x64 blocks.  My file size is
essentially 6000x5000x4 (for floats) + 1MB + 189 bytes.  I'm guessing
the data is uncompressed since the file is quite a bit larger than
just raw floating point numbers would be.  I'm guessing 189 bytes is
header info (haven't verified yet).  Have no idea what an entire
friggin' MB is being used for....and assuming the rest is elevation
data.  I did some guessing of where the data I want to access should
be and tried writing a simple program to open the file, seek to the
data i want, read and save it out.  While I get elevation numbers in
the range I expect, it's not clear to me how the blocks are arranged.

This is all very frustrating.

Any clues as to what I'm potentially doing wrong in gdal or a pointer
to some docs on how to parse out and read a .img would be greatly
appreciated.

Thanks in advance for any help,
tom
From warmerdam at pobox.com  Sat Sep 27 20:08:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Sep 27 20:09:02 2008
Subject: [gdal-dev] problems reading a .img file containing only elevation
	data
In-Reply-To: <85fd0e120809261715s6d7b5738p43b534415b9fa00@mail.gmail.com>
References: <85fd0e120809261715s6d7b5738p43b534415b9fa00@mail.gmail.com>
Message-ID: <931f8ea90809271708y3cafc405q936155b6e049595f@mail.gmail.com>

On Fri, Sep 26, 2008 at 8:15 PM, Tom Flynn <flynnt@acm.org> wrote:
> I'm expecting this call to put nXSize*4 bytes of data into my buffer
> at pData.  That data will contain floating point numbers.
> Do my arguments match what I intend?

Tom,

I don't see any obvious problems with your call.

It might be helpful if you could do something like
"gdalinfo -mm abc.img" so we can see if GDAL recognises
some of the image data.

It is slightly posible that the file is in compressed format,
and that you are using an older version of the GDAL library
where floating point compressed data was not properly
supported (this has been an area of active work in the
last year or two).

It would be also very helpful if you could put a sample
.img file somewhere for download so that others could
try it too, though a 120MB file might be challenging to
download for only this issue.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Sat Sep 27 20:16:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Sep 27 20:16:12 2008
Subject: [gdal-dev] Edit Metadata on MrSID image
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8304C396E0@exch2k1.dmmenet.mme.state.va.us>
References: <1C6192D3F2755C45A2D0658D6FE5ED8304C396E0@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <931f8ea90809271716u704c69abxd8a06d3258d9f841@mail.gmail.com>

On Fri, Sep 26, 2008 at 2:50 PM, Mullins, Steven
<Steven.Mullins@dmme.virginia.gov> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> I would like to replace the projection WKT in a group of MrSID files.  I do not need to modify the compressed image itself, only the metadata.  Can I do this in GDAL?


Steve,

No, I do not believe you can.  I'm not sure if it can even
be done by the underlying mrsid libraries.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Sat Sep 27 20:23:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Sep 27 20:23:19 2008
Subject: [gdal-dev] lib questions
In-Reply-To: <E4692D1DCAD27245866154AF9CE126B10FDBCB38@emss04m02.us.lmco.com>
References: <E4692D1DCAD27245866154AF9CE126B10FDBCB38@emss04m02.us.lmco.com>
Message-ID: <931f8ea90809271723xcb4a901g1503453753a09e81@mail.gmail.com>

On Fri, Sep 26, 2008 at 8:36 AM, Nidel, Mike <mike.nidel@lmco.com> wrote:
> Two quick questions:
>
> 1. What is libgdalconstjni.so? I've been building and using the JNI
> interfaces and just blindly including this file, but I can't determine
> what this is and whether I need it. Sorry if this is a stupid question,
> I couldn't find the answer in any of the build docs.

Mike,

In theory this contains a bunch of constant defines for GDAL,
stuff like "gdal.GA_ReadOnly".  In practice I do not know if this
resolves to actual code in Java or not.

> 2. Is there a reason why on linux the build creates a libgdal.so whereas
> on Windows it's gdalXX.dll, i.e. the version number is inserted in the
> name? I would think you'd want to be consistent across platforms there.

On linux the version handling is done differently by libtool
in order to be consistent with other linux shared libraries.
I think consistency with how things are done on other platforms
is less important than consistency with the general expectations
on the platform in question.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From liu_daojie at 163.com  Sat Sep 27 23:11:34 2008
From: liu_daojie at 163.com (liu_daojie)
Date: Sat Sep 27 23:11:44 2008
Subject: [gdal-dev] how can I configue which lib and .h files in vc2005
 smart device application to  open img?
Message-ID: <22225202.159851222571494481.JavaMail.coremail@bj163app108.163.com>

 
 hello:
    
    how can I configue which lib and  .h files in vc2005 smart device application to  open img?
   and 
    
 
   m_pMemoryDC->SelectObject(m_pMemoryBitMap);
  CRect rc(0,0,m_pViewWidth,m_pViewHeight); 
  CBrush brush(RGB(255,255,255));
     m_pMemoryDC->FillRect(rc,&brush); 
  GDALAllRegister(); 
  poDataset = (GDALDataset *) GDALOpen(m_strimagePath, GA_ReadOnly );
  if( poDataset != NULL )
  {
 
   GDALRasterBand *poBand1;   //
   GDALRasterBand *poBand2;
   GDALRasterBand *poBand3;
   int nBandCount,i;
   nBandCount=poDataset->GetRasterCount();
   poBand1=poDataset->GetRasterBand(1);
   poBand2=poDataset->GetRasterBand(2);
   poBand3=poDataset->GetRasterBand(3);
   
   if (poBand1!=NULL && poBand2 != NULL &&poBand3!=NULL)  
   {
   
   //
   //
    
   
   int nImgSizeX=poDataset->GetRasterXSize();
   int nImgSizeY=poDataset->GetRasterYSize();
 int nBufferSizeX,nBufferSizeY;
   
   nBufferSizeX = nImgSizeX;
   nBufferSizeY= nImgSizeY;
   
   
   
   byte *pafScanblock1 ;
   byte *pafScanblock2 ;
   byte *pafScanblock3 ;
   
     pafScanblock1 =new byte[(nBufferSizeX)*(nBufferSizeY)];
   pafScanblock2 = new byte[(nBufferSizeX)*(nBufferSizeY)];
   pafScanblock3 =new byte[(nBufferSizeX)*(nBufferSizeY)];
   
   byte *m_ByteBuff = new byte[(nBufferSizeX)*(nBufferSizeY)*3];
     
   
   poBand1->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock1,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );
 poBand2->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock2,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );
   
   poBand3->RasterIO( GF_Read, 0, 0,nBufferSizeX,nBufferSizeY, 
    pafScanblock3,nBufferSizeX,nBufferSizeY, GDT_Byte,0, 0 );  
   //View
    
   for (int x = 0; x < nBufferSizeX; x ++) 
            { 
              for (int  y = 0; y < nBufferSizeY; y ++) 
                 { 
                  m_pMemoryDC->SetPixel(x,y,RGB(pafScanblock1[y*nBufferSizeX+x],pafScanblock2[y*nBufferSizeX+x],pafScanblock3[y*nBufferSizeX+x])); 
                 } 
            }  
    GDALClose(poDataset);
   }
 can not get r g b ?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080928/4ec530e3/attachment.html
From mdsumner at utas.edu.au  Sun Sep 28 20:03:13 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Sun Sep 28 20:03:19 2008
Subject: [gdal-dev] opendap on Windows
Message-ID: <200809290003.m8T03E2k029992@corinna.its.utas.edu.au>

Hello, I've been investigating building GDAL with Opendap support - the
3.8.2 installer for Opendap doesn't have the include subdirectories for
/xdr /pthreads or /curl. 

I'm using this installer: http://www.opendap.org/pub/binary/libdap/win32/libdap_3.8.2.exe
Is there something obvious that I'm missing?  It seems from some recent
tickets that Opendap 3.8.2 has been included successfully on Windows.
Does this only work when building Opendap from source? 

There seems to be a simple error in  [GDAL]/nmake.opt, where the DODS_LIB 
path needs an extra underscore. I assume the version "DODSDIR" is used in 
subsequent make options for referring to the actual frmts/dods directory? 

# Uncomment for DODS / OPeNDAP support
#DODS_DIR = C:\libdap3.6.2
#DODS_LIB = $(DODSDIR)\lib\libdapMD.lib


Cheers, Mike.


From mike.nidel at lmco.com  Mon Sep 29 09:16:32 2008
From: mike.nidel at lmco.com (Nidel, Mike)
Date: Mon Sep 29 09:23:47 2008
Subject: [gdal-dev] lib questions
In-Reply-To: <931f8ea90809271723xcb4a901g1503453753a09e81@mail.gmail.com>
References: <E4692D1DCAD27245866154AF9CE126B10FDBCB38@emss04m02.us.lmco.com>
	<931f8ea90809271723xcb4a901g1503453753a09e81@mail.gmail.com>
Message-ID: <E4692D1DCAD27245866154AF9CE126B10FE141D3@emss04m02.us.lmco.com>

Thanks for the reply, Frank.


> > 1. What is libgdalconstjni.so? I've been building and using the JNI 
> > interfaces and just blindly including this file, but I 
> can't determine 
> > what this is and whether I need it. Sorry if this is a stupid 
> > question, I couldn't find the answer in any of the build docs.
> 
> Mike,
> 
> In theory this contains a bunch of constant defines for GDAL, 
> stuff like "gdal.GA_ReadOnly".  In practice I do not know if 
> this resolves to actual code in Java or not.


OK. After emailing, I tried running my app without it and it failed,
not with the normal UnsatisfiedLinkError on the library, but with
a more specific error that included the name of the symbol that it
was trying to look up (presumably a global variable in gdalconst).

I just wanted to make sure I needed it, and try to understand why,
thanks.


> > 2. Is there a reason why on linux the build creates a libgdal.so 
> > whereas on Windows it's gdalXX.dll, i.e. the version number is 
> > inserted in the name? I would think you'd want to be 
> consistent across platforms there.
> 
> On linux the version handling is done differently by libtool 
> in order to be consistent with other linux shared libraries.
> I think consistency with how things are done on other 
> platforms is less important than consistency with the general 
> expectations on the platform in question.


I'm OK with that, thank you.
From condit at sdsc.edu  Mon Sep 29 12:54:44 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Mon Sep 29 12:54:56 2008
Subject: [gdal-dev] opendap on Windows
In-Reply-To: <200809290003.m8T03E2k029992@corinna.its.utas.edu.au>
References: <200809290003.m8T03E2k029992@corinna.its.utas.edu.au>
Message-ID: <845AADAC1106E44996327D62097E4C6B01163020@et.ad.sdsc.edu>

Hi Michael-
> I'm using this installer:
> http://www.opendap.org/pub/binary/libdap/win32/libdap_3.8.2.exe
> Is there something obvious that I'm missing?  It seems from some
recent
> tickets that Opendap 3.8.2 has been included successfully on Windows.
> Does this only work when building Opendap from source?
There are some pieces that you'll need to grab separately. I think
they're all bundled in:
http://www.opendap.org/pub/binary/libdap/win32/OPeNDAP_Tools_1.1.exe

In particular I think you'll need the include files for xdr, curl, and
pthreads (bundled in the above installer). I ended up copying them to my
libdap\include directory for ease of use.

> There seems to be a simple error in  [GDAL]/nmake.opt, where the
> DODS_LIB
> path needs an extra underscore. I assume the version "DODSDIR" is used
> in
> subsequent make options for referring to the actual frmts/dods
> directory?
Correct. The makefile for the drivers uses "DODSDIR" to refer to the
directory. 

-Chris

Christopher Condit
San Diego Supercomputer Center
858-822-5483
condit@sdsc.edu


From sfkeller at gmail.com  Mon Sep 29 14:24:19 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon Sep 29 14:24:21 2008
Subject: [gdal-dev] ogr2ogr: How can I get GML output file in 2D?
In-Reply-To: <A23CC7C61E04EA428933D1322C60CAA4473E9F8F2D@EXMAIL.srv.local>
References: <A23CC7C61E04EA428933D1322C60CAA4473E9F8F2D@EXMAIL.srv.local>
Message-ID: <25bc040b0809291124r1337e83em256ed9d6f5b6582b@mail.gmail.com>

There is an option for 2.5D ("-nlt polygon25d"), so you can try to add
parameter "-nlt polygon".

-- Stefan

2008/9/25  <kai.zimmerl@srv.se>:
> Hi!
>
> I tried to use ogr2ogr to reproject/transform a gml file from epsg: 3021 to epsg:4326 but I get the output file in 2,5D (z=0) even though both epsg: 3021 and epsg:4326 are 2D.
>
> I need to have the result in 2D (with only x,y values).
>
> I use  FWTools2.2.6 and the command line: ogr2ogr -t_srs EPSG:4326 -s_srs EPSG:3021 -f GML Output.gml Input.gml
> My input file content is attached below.
>
> Is there a solution to this?
>
> Best Regards
> Kai Zimmerl
>
>
> <?xml version="1.0" encoding="UTF-8" standalone="no"?><g:TATUKGIS xmlns:gml="http://www.opengis.net/gml" xmlns:g="http://www.tatukgis.com/GML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/gml feature.xsd http://www.tatukgis.com/GML DispersionResult.xsd"><gml:description>Geographic Markup Language (GML)</gml:description><gml:name>Layer</gml:name><gml:boundedBy><gml:Box><gml:coordinates>1623780.59514724,6580981.45879942 1627316.12905318,6583481.45879942</gml:coordinates></gml:Box></gml:boundedBy><gml:featureMember><g:PROPERTIES fid="UID.1"><g:CONC>17,6</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E90FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1623780.59514724,6583481.45879942 1627316.12905318,6583481.45879942 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.2"><g:CONC>61,25</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E90FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624369.85079823,6583064.79213275 1626726.87340219,6583064.79213275 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.3"><g:CONC>105,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFFF00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624664.47862373,6582767.17308513 1626432.24557669,6582767.17308513 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.4"><g:CONC>157,5</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFFF00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105 mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1624959.10644922,6582496.61031457 1626137.6177512,6582496.61031457 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember><gml:featureMember><g:PROPERTIES fid="UID.5"><g:CONC>210,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFF4500</g:COLOR><g:LEGEND> &gt; IDLH</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>1625548.36210021,6580981.45879942 1625106.42036197,6582231.45879942 1625990.30383845,6582231.45879942 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:featureMember></g:TATUKGIS>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From bryan at ideotrope.org  Mon Sep 29 16:10:24 2008
From: bryan at ideotrope.org (Bryan Keith)
Date: Mon Sep 29 16:34:51 2008
Subject: [gdal-dev] query raster values by xy-location
In-Reply-To: <91d218430809260626x35fea474p7dab0f251020ffea@mail.gmail.com>
References: <20080926125548.112220@gmx.net>
	<91d218430809260626x35fea474p7dab0f251020ffea@mail.gmail.com>
Message-ID: <3460.64.78.232.178.1222719024.squirrel@ideotrope.org>

Attached is some python code you can use to return the value at a cell
given an xy.  It does not interpolate.  I have a different function for
that if that's what you want.

Bryan

> Hi,
>
> 2008/9/26 <Andruit@gmx.de>
>
>>
>> I have an ESRI ascii raster and would like to get the raster values at
>> defined x y locations.
>> At the moment I am capable to load the Raster Dataset and can perform
>> several operations like querying the  Min/Max values, the origin, the
>> pixelsize and so on....
>>
>> But is there a function to get the cell value of a raster at a certain
>> location (x y)????
>
>
> You can work out the row and column of your pixel from your (x,y) location
> using the raster's geotransform. You can then read in the value of that
> particular pixel.
>
> Hope that helps,
> J
>
>
> --
> Centre for Terrestrial Carbon Dynamics
> Department of Geography, University College London
> Gower Street, London WC1E 6BT, UK
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
# returns the cellvalue on the band at (x, y)
def CellValue(dataset, band, x, y):
  #John Cartwright <John.C.Cartwright@noaa.gov> sent this via e-mail
  #3/23/2006 14:17
  #He modified the PointValue routine that I had sent him
  #print 'point (real-world coords): ',x,',',y
  band = dataset.GetRasterBand(band)
  # set a default NDV if none specified
  if (band.GetNoDataValue() == None):
    band.SetNoDataValue(-9999)
  ndv = band.GetNoDataValue()

  cols = band.XSize
  rows = band.YSize
  #print 'cols,rows: ',cols,',',rows

  geotransform = dataset.GetGeoTransform()
  cellSizeX = geotransform[1]
  # Y-cell resolution is reported as negative
  cellSizeY = -1 * geotransform[5]

  minx = geotransform[0]
  maxy = geotransform[3]
  maxx = minx + (cols * cellSizeX)
  miny = maxy - (rows * cellSizeY)
  #print 'bbox(real-world coords):',minx,',',miny,',',maxx,',',maxy
  if ((x < minx) or (x > maxx) or (y < miny) or (y > maxy)):
    #print 'given point does not fall within grid'
    return ndv

  # calc point location in pixels
  xLoc = (x - minx) / cellSizeX
  xLoc = int(xLoc)
  yLoc = (maxy - y) / cellSizeY
  yLoc = int(yLoc)
  #print 'point (pixels): ',xLoc,',',yLoc

  if ((xLoc < 0.5) or (xLoc > cols - 0.5)):
    #print 'xcoordinate out of bounds'
    return ndv

  if ((yLoc < 0.5) or (yLoc > rows - 0.5)):
    #print 'ycoordinate out of bounds'
    return ndv

  strRaster = band.ReadRaster(xLoc, yLoc, 1, 1, 1, 1, band.DataType)
  sDT = gdal.GetDataTypeName(band.DataType)
  if (sDT == 'Int16'):
    dblValue = struct.unpack('h', strRaster)
  elif (sDT == 'Float32'):
    dblValue = struct.unpack('f', strRaster)
  elif (sDT == 'Byte'):
    dblValue = struct.unpack('B', strRaster)
  else:
    print 'unrecognized DataType:', gdal.GetDataTypeName(band.DataType)
    return ndv

  return dblValue[0]
From mdsumner at utas.edu.au  Mon Sep 29 17:37:23 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Mon Sep 29 17:37:29 2008
Subject: [gdal-dev] opendap on Windows
In-Reply-To: <845AADAC1106E44996327D62097E4C6B01163020@et.ad.sdsc.edu>
References: <200809290003.m8T03E2k029992@corinna.its.utas.edu.au>
	<845AADAC1106E44996327D62097E4C6B01163020@et.ad.sdsc.edu>
Message-ID: <48E14A93.3050402@utas.edu.au>

Hi Chris,

Thank you for the feedback - I have tried copying the curl/xdr/pthreads 
headers into the libdap/include folder - and editing the top level 
nmake.opt to DODS_DIR. There just were a number of unclear steps (for 
me) so I'll go back and try again, then report back more completely. I 
will provide the full steps if I ever succeed.

I also gather that the instructions for MSVC  in the GDAL FAQ should be 
completed - I've only done the "atlbase.h" step as that seemed to allow 
the build in general to finish. Any idea if the other steps would impact 
the Opendap build?

I'm using MSVC 1400 (2005).

Cheers, Mike.

Christopher Condit wrote:
> Hi Michael-
>   
>> I'm using this installer:
>> http://www.opendap.org/pub/binary/libdap/win32/libdap_3.8.2.exe
>> Is there something obvious that I'm missing?  It seems from some
>>     
> recent
>   
>> tickets that Opendap 3.8.2 has been included successfully on Windows.
>> Does this only work when building Opendap from source?
>>     
> There are some pieces that you'll need to grab separately. I think
> they're all bundled in:
> http://www.opendap.org/pub/binary/libdap/win32/OPeNDAP_Tools_1.1.exe
>
> In particular I think you'll need the include files for xdr, curl, and
> pthreads (bundled in the above installer). I ended up copying them to my
> libdap\include directory for ease of use.
>
>   
>> There seems to be a simple error in  [GDAL]/nmake.opt, where the
>> DODS_LIB
>> path needs an extra underscore. I assume the version "DODSDIR" is used
>> in
>> subsequent make options for referring to the actual frmts/dods
>> directory?
>>     
> Correct. The makefile for the drivers uses "DODSDIR" to refer to the
> directory. 
>
> -Chris
>
> Christopher Condit
> San Diego Supercomputer Center
> 858-822-5483
> condit@sdsc.edu
>
>
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.173 / Virus Database: 270.7.5/1698 - Release Date: 9/29/2008 7:25 PM
>
>   

From condit at sdsc.edu  Mon Sep 29 18:13:46 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Mon Sep 29 18:13:56 2008
Subject: [gdal-dev] opendap on Windows
In-Reply-To: <48E14A93.3050402@utas.edu.au>
References: <200809290003.m8T03E2k029992@corinna.its.utas.edu.au>
	<845AADAC1106E44996327D62097E4C6B01163020@et.ad.sdsc.edu>
	<48E14A93.3050402@utas.edu.au>
Message-ID: <845AADAC1106E44996327D62097E4C6B0116307F@et.ad.sdsc.edu>

Hi Mike-
> Thank you for the feedback - I have tried copying the
curl/xdr/pthreads
> headers into the libdap/include folder - and editing the top level
> nmake.opt to DODS_DIR. There just were a number of unclear steps (for
> me) so I'll go back and try again, then report back more completely. I
> will provide the full steps if I ever succeed.
Here's my configuration:
DODS_DIR = C:\develop\lib\libdap3.8.2
DODS_LIB = $(DODS_DIR)\lib\libdapMD.lib
$(DODS_DIR)\lib\libdapclientMD.lib

And then I added the includes from the "Tools" distribution to the
include dir (preserving the directory hierarchy). If you're still having
trouble building perhaps attach a copy of the errors from nmake. I'm
also using VS 2005.

> I also gather that the instructions for MSVC  in the GDAL FAQ should
be
> completed - I've only done the "atlbase.h" step as that seemed to
allow
> the build in general to finish. Any idea if the other steps would
> impact the Opendap build?
As far as I know these instructions are for the "Express Edition". I
didn't have to make any changes to my VS installation.

-Chris

From mdsumner at utas.edu.au  Mon Sep 29 19:42:32 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Mon Sep 29 19:42:37 2008
Subject: [gdal-dev] opendap on Windows
Message-ID: <200809292342.m8TNgW7Y003904@corinna.its.utas.edu.au>

Hello, 

Thanks so much for you answers - I used your lib path and it seems to
work fine. 

Cheers, Mike.


==============Original message text===============
On Tue, 30 Sep 2008 8:13:46 +1000 "Christopher Condit" wrote:

Hi Mike-
> Thank you for the feedback - I have tried copying the
curl/xdr/pthreads
> headers into the libdap/include folder - and editing the top level
> nmake.opt to DODS_DIR. There just were a number of unclear steps (for
> me) so I'll go back and try again, then report back more completely. I
> will provide the full steps if I ever succeed.
Here's my configuration:
DODS_DIR = C:\develop\lib\libdap3.8.2
DODS_LIB = $(DODS_DIR)\lib\libdapMD.lib
$(DODS_DIR)\lib\libdapclientMD.lib

And then I added the includes from the "Tools" distribution to the
include dir (preserving the directory hierarchy). If you're still having
trouble building perhaps attach a copy of the errors from nmake. I'm
also using VS 2005.

> I also gather that the instructions for MSVC  in the GDAL FAQ should
be
> completed - I've only done the "atlbase.h" step as that seemed to
allow
> the build in general to finish. Any idea if the other steps would
> impact the Opendap build?
As far as I know these instructions are for the "Express Edition". I
didn't have to make any changes to my VS installation.

-Chris


===========End of original message text===========



If it wasn't backed-up, then it wasn't important. ~ Anon sysadmin

Mike Sumner (Phd. Candidate)
http://www.antcrc.utas.edu.au/~mdsumner/ http://www.zoo.utas.edu.au/awru/  IASOS/AWRU
University of Tasmania
Private Bag 80
Hobart Tasmania 7001
AUSTRALIA
Email: mdsumner@utas.edu.au 
Phone: 03 6226 1752 (W)
       0408599921   (M)
Fax:   03 6226 2745







From randre at gmail.com  Mon Sep 29 22:30:15 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Mon Sep 29 22:30:17 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
Message-ID: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>

Hi List,

I've hit the same problem twice now, and I'm pretty certain after Round 2
that I'm not introducing it.  Basically, I'm using gdal_merge.py to mosaic a
group of low-resolution, 32-bit floating point rasters together, then
running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a higher
resolution image.  I'm finding afterwards that there are linear artifacts in
the mosaic which run vertically through the mosaic, which look like edge
artifacts, but which are not located near the edge of either an original
low-res tile, or the resulting high res one.  I've tested the interpolation
of a single low-res tile in the area where the artifact is present in the
mosaic and I do not get the same results - the interpolated tile is clear of
artifacts.

Is it possible that I'm hitting some sort of memory limit that is causing
only a certain number of columns to be interpolated at one time, rather than
the entire row?

Thanks in advance for any clues or advice you can give.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080929/ca8c775c/attachment-0001.html
From randre at gmail.com  Tue Sep 30 01:18:05 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Sep 30 01:18:08 2008
Subject: [gdal-dev] Re: gdalwarp interpolation artifacts
In-Reply-To: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
Message-ID: <9c2015090809292218u427e0d2bv4d30fe1db8a105bf@mail.gmail.com>

Further testing shows that the artifact seems to show up at consistently at
x=6000 and x=12000 columns.
--



On Mon, Sep 29, 2008 at 7:30 PM, Roger Andr? <randre@gmail.com> wrote:

> Hi List,
>
> I've hit the same problem twice now, and I'm pretty certain after Round 2
> that I'm not introducing it.  Basically, I'm using gdal_merge.py to mosaic a
> group of low-resolution, 32-bit floating point rasters together, then
> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a higher
> resolution image.  I'm finding afterwards that there are linear artifacts in
> the mosaic which run vertically through the mosaic, which look like edge
> artifacts, but which are not located near the edge of either an original
> low-res tile, or the resulting high res one.  I've tested the interpolation
> of a single low-res tile in the area where the artifact is present in the
> mosaic and I do not get the same results - the interpolated tile is clear of
> artifacts.
>
> Is it possible that I'm hitting some sort of memory limit that is causing
> only a certain number of columns to be interpolated at one time, rather than
> the entire row?
>
> Thanks in advance for any clues or advice you can give.
>
> Roger
> --
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080929/28b3e1dd/attachment.html
From warmerdam at pobox.com  Tue Sep 30 01:19:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 30 01:19:46 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
In-Reply-To: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
Message-ID: <931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>

On Tue, Sep 30, 2008 at 4:30 AM, Roger Andr? <randre@gmail.com> wrote:
> Hi List,
>
> I've hit the same problem twice now, and I'm pretty certain after Round 2
> that I'm not introducing it.  Basically, I'm using gdal_merge.py to mosaic a
> group of low-resolution, 32-bit floating point rasters together, then
> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a higher
> resolution image.  I'm finding afterwards that there are linear artifacts in
> the mosaic which run vertically through the mosaic, which look like edge
> artifacts, but which are not located near the edge of either an original
> low-res tile, or the resulting high res one.  I've tested the interpolation
> of a single low-res tile in the area where the artifact is present in the
> mosaic and I do not get the same results - the interpolated tile is clear of
> artifacts.
>
> Is it possible that I'm hitting some sort of memory limit that is causing
> only a certain number of columns to be interpolated at one time, rather than
> the entire row?

Roger,

There have been some fixes to some of the gdalwarp interpolator
code in recent months, so one hint is to ensure you try the latest
"trunk" code to see if perhaps the problem is already fixed.

Second, you may want to investigate the gdal_merge.py product
carefully to ensure there aren't any bad pixels in it along the
boundaries.

Third you might try the cubic (instead of cubicspline) interpolator
to see if it gives cleaner results.

Beyond that a ticket submitted on the smallest test case that
demonstrates the problem would be appreciated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mdsumner at utas.edu.au  Tue Sep 30 01:21:31 2008
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue Sep 30 01:21:38 2008
Subject: [gdal-dev] opendap on Windows
Message-ID: <200809300521.m8U5LVfB026856@corinna.its.utas.edu.au>

Hello, 

I'm afraid that while it seems to build correctly there is a runtime error

"An unhandled Win32 exception occured in gdalinfo.exe" 

I don't know how to proceed to figure this out. I've tried building GDAL
in release mode, and also without the /MD flag - but with the same
result. The access to other formats works fine regardless. 


I'm using these dataset urls, both of which work on Linux: 

gdalinfo "http://www.marine.csiro.au/dods/nph-dods/dods-data/climatology-netcdf/gordon_atlas.nc?temperature[y][x]"
gdalinfo "http://dods.jpl.nasa.gov/opendap/sea_surface_temperature/avhrr/pathfinder/data_v5/8day/descending/04km/2006/bsst/2006001-2006008.s0481pfv50-bsst.hdf?bsst[y][x]"

Thanks for any help, 

Cheers, Mike. 


==============Original message text===============
On Tue, 30 Sep 2008 8:13:46 +1000 "Christopher Condit" wrote:

Hi Mike-
> Thank you for the feedback - I have tried copying the
curl/xdr/pthreads
> headers into the libdap/include folder - and editing the top level
> nmake.opt to DODS_DIR. There just were a number of unclear steps (for
> me) so I'll go back and try again, then report back more completely. I
> will provide the full steps if I ever succeed.
Here's my configuration:
DODS_DIR = C:\develop\lib\libdap3.8.2
DODS_LIB = $(DODS_DIR)\lib\libdapMD.lib
$(DODS_DIR)\lib\libdapclientMD.lib

And then I added the includes from the "Tools" distribution to the
include dir (preserving the directory hierarchy). If you're still having
trouble building perhaps attach a copy of the errors from nmake. I'm
also using VS 2005.

> I also gather that the instructions for MSVC  in the GDAL FAQ should
be
> completed - I've only done the "atlbase.h" step as that seemed to
allow
> the build in general to finish. Any idea if the other steps would
> impact the Opendap build?
As far as I know these instructions are for the "Express Edition". I
didn't have to make any changes to my VS installation.

-Chris


===========End of original message text===========



If it wasn't backed-up, then it wasn't important. ~ Anon sysadmin

Mike Sumner (Phd. Candidate)
http://www.antcrc.utas.edu.au/~mdsumner/ http://www.zoo.utas.edu.au/awru/  IASOS/AWRU
University of Tasmania
Private Bag 80
Hobart Tasmania 7001
AUSTRALIA
Email: mdsumner@utas.edu.au 
Phone: 03 6226 1752 (W)
       0408599921   (M)
Fax:   03 6226 2745







From seth at pricepages.org  Tue Sep 30 01:34:29 2008
From: seth at pricepages.org (Seth Price)
Date: Tue Sep 30 02:09:51 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
In-Reply-To: <931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
	<931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>
Message-ID: <30B91941-D718-424A-A354-90AF8757E6EA@pricepages.org>

I agree with Frank, this sounds like the bug that I reported (and  
fixed) here:
http://trac.osgeo.org/gdal/ticket/2327

(Although it became a log of my alterations to the warper kernel,  
which was well beyond the scope of the original bug.)
~Seth


On Sep 29, 2008, at 11:19 PM, Frank Warmerdam wrote:

> On Tue, Sep 30, 2008 at 4:30 AM, Roger Andr? <randre@gmail.com> wrote:
>> Hi List,
>>
>> I've hit the same problem twice now, and I'm pretty certain after  
>> Round 2
>> that I'm not introducing it.  Basically, I'm using gdal_merge.py to  
>> mosaic a
>> group of low-resolution, 32-bit floating point rasters together, then
>> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get  
>> a higher
>> resolution image.  I'm finding afterwards that there are linear  
>> artifacts in
>> the mosaic which run vertically through the mosaic, which look like  
>> edge
>> artifacts, but which are not located near the edge of either an  
>> original
>> low-res tile, or the resulting high res one.  I've tested the  
>> interpolation
>> of a single low-res tile in the area where the artifact is present  
>> in the
>> mosaic and I do not get the same results - the interpolated tile is  
>> clear of
>> artifacts.
>>
>> Is it possible that I'm hitting some sort of memory limit that is  
>> causing
>> only a certain number of columns to be interpolated at one time,  
>> rather than
>> the entire row?
>
> Roger,
>
> There have been some fixes to some of the gdalwarp interpolator
> code in recent months, so one hint is to ensure you try the latest
> "trunk" code to see if perhaps the problem is already fixed.
>
> Second, you may want to investigate the gdal_merge.py product
> carefully to ensure there aren't any bad pixels in it along the
> boundaries.
>
> Third you might try the cubic (instead of cubicspline) interpolator
> to see if it gives cleaner results.
>
> Beyond that a ticket submitted on the smallest test case that
> demonstrates the problem would be appreciated.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kai.zimmerl at srv.se  Tue Sep 30 03:32:00 2008
From: kai.zimmerl at srv.se (kai.zimmerl@srv.se)
Date: Tue Sep 30 03:30:29 2008
Subject: [gdal-dev] ogr2ogr: How can I get GML output file in 2D?
In-Reply-To: <25bc040b0809291124r1337e83em256ed9d6f5b6582b@mail.gmail.com>
References: <A23CC7C61E04EA428933D1322C60CAA4473E9F8F2D@EXMAIL.srv.local>
	<25bc040b0809291124r1337e83em256ed9d6f5b6582b@mail.gmail.com>
Message-ID: <A23CC7C61E04EA428933D1322C60CAA4473EA852DA@EXMAIL.srv.local>

Thanks, Stefan, I tried it but it didn't help!
(I wonder what the 2.5D option is for since the output seems to default to 2.5D)
/Kai

-----Ursprungligt meddelande-----
Fr?n: Stefan Keller [mailto:sfkeller@gmail.com]
Skickat: den 29 september 2008 20:24
Till: Zimmerl Kai
Kopia: gdal-dev@lists.osgeo.org
?mne: Re: [gdal-dev] ogr2ogr: How can I get GML output file in 2D?

There is an option for 2.5D ("-nlt polygon25d"), so you can try to add parameter "-nlt polygon".

-- Stefan

2008/9/25  <kai.zimmerl@srv.se>:
> Hi!
>
> I tried to use ogr2ogr to reproject/transform a gml file from epsg: 3021 to epsg:4326 but I get the output file in 2,5D (z=0) even though both epsg: 3021 and epsg:4326 are 2D.
>
> I need to have the result in 2D (with only x,y values).
>
> I use  FWTools2.2.6 and the command line: ogr2ogr -t_srs EPSG:4326
> -s_srs EPSG:3021 -f GML Output.gml Input.gml My input file content is attached below.
>
> Is there a solution to this?
>
> Best Regards
> Kai Zimmerl
>
>
> <?xml version="1.0" encoding="UTF-8" standalone="no"?><g:TATUKGIS
> xmlns:gml="http://www.opengis.net/gml"
> xmlns:g="http://www.tatukgis.com/GML"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xsi:schemaLocation="http://www.opengis.net/gml feature.xsd
> http://www.tatukgis.com/GML
> DispersionResult.xsd"><gml:description>Geographic Markup Language
> (GML)</gml:description><gml:name>Layer</gml:name><gml:boundedBy><gml:B
> ox><gml:coordinates>1623780.59514724,6580981.45879942
> 1627316.12905318,6583481.45879942</gml:coordinates></gml:Box></gml:bou
> ndedBy><gml:featureMember><g:PROPERTIES
> fid="UID.1"><g:CONC>17,6</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E90
> FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5
> mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:Li
> nearRing><gml:coordinates>1625548.36210021,6580981.45879942
> 1623780.59514724,6583481.45879942 1627316.12905318,6583481.45879942
> 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></
> gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:fe
> atureMember><gml:featureMember><g:PROPERTIES
> fid="UID.2"><g:CONC>61,25</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FF1E9
> 0FF</g:COLOR><g:LEGEND> &gt; ERPG-1 (17,5
> mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:Li
> nearRing><gml:coordinates>1625548.36210021,6580981.45879942
> 1624369.85079823,6583064.79213275 1626726.87340219,6583064.79213275
> 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></
> gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:fe
> atureMember><gml:featureMember><g:PROPERTIES
> fid="UID.3"><g:CONC>105,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFF
> F00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105
> mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:Li
> nearRing><gml:coordinates>1625548.36210021,6580981.45879942
> 1624664.47862373,6582767.17308513 1626432.24557669,6582767.17308513
> 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></
> gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:fe
> atureMember><gml:featureMember><g:PROPERTIES
> fid="UID.4"><g:CONC>157,5</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFFF
> F00</g:COLOR><g:LEGEND> &gt; ERPG-2 (105
> mg/m?)</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:Li
> nearRing><gml:coordinates>1625548.36210021,6580981.45879942
> 1624959.10644922,6582496.61031457 1626137.6177512,6582496.61031457
> 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></
> gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:fe
> atureMember><gml:featureMember><g:PROPERTIES
> fid="UID.5"><g:CONC>210,1</g:CONC><g:UNIT>mg/m?</g:UNIT><g:COLOR>FFFF4
> 500</g:COLOR><g:LEGEND> &gt;
> IDLH</g:LEGEND><g:GEOMETRY><gml:Polygon><gml:outerBoundaryIs><gml:Line
> arRing><gml:coordinates>1625548.36210021,6580981.45879942
> 1625106.42036197,6582231.45879942 1625990.30383845,6582231.45879942
> 1625548.36210021,6580981.45879942</gml:coordinates></gml:LinearRing></
> gml:outerBoundaryIs></gml:Polygon></g:GEOMETRY></g:PROPERTIES></gml:fe
> atureMember></g:TATUKGIS>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From rsignell at usgs.gov  Tue Sep 30 08:57:12 2008
From: rsignell at usgs.gov (Rich Signell)
Date: Tue Sep 30 08:57:15 2008
Subject: [gdal-dev] Memory allocation for NetCDF driver
Message-ID: <61033b870809300557r4c8785a6j6658ae3dc6ebfaff@mail.gmail.com>

GDAL gang,

Something to put on the wish list for the NetCDF driver: the ability
to write the data in chunks to the NetCDF file to conserve memory.

I've got a big geoTIFF (20,000 x 15,000) that I wanted to convert to
NetCDF, but ran out of memory:

gdal_translate psdem_2005_geo.tif -of netcdf psdem_2005.nc
Input file size is 20000, 15000
0ERROR 2: CPLMalloc(): Out of memory allocating 1200000000 bytes.

The GMT driver (which also produces NetCDF, but with Z as a 1D array)
works fine.    It looks like the NetCDF driver is trying to allocate
the entire array, which is unnecessary -- the data could be written to
the NetCDF file in rows or groups of rows instead.

Thanks,
-Rich
-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598
From randre at gmail.com  Tue Sep 30 12:37:09 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Sep 30 12:37:13 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
In-Reply-To: <30B91941-D718-424A-A354-90AF8757E6EA@pricepages.org>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
	<931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>
	<30B91941-D718-424A-A354-90AF8757E6EA@pricepages.org>
Message-ID: <9c2015090809300937k62bbbaa4w8cb8a0bccc86a232@mail.gmail.com>

Hi Seth and Frank,

Thanks for the feedback.  I just finished reading the changelog link that
Seth sent and all I can say is, "Wow, nice job!"

I did some further testing last night using a single GTOPO30 tile, and doing
a 10x upsample.  The artifacts are present in it at columns 6000 and 12000,
so I think we can rule out that gdal_merge.py is introducing the error.  I'm
testing the cubic resampling operator this morning, in the hopes that it
won't produce the error.  Since it seems to require a very large scaling
difference, it also takes a bit of time to run the test.  I'll let you know
what I find when it's done.

Regarding running the latest code from trunk, I'm not sure if I can do
that.  I'm currently using the gdal implementation in the Linux version of
FWTools-2.0.6 because I am unable to get all of the dependencies installed
that I need for a source-compiled version of gdal to work properly on my
system.  I think I remember seeing some traffic from Mateuz in the recent
past that indicated he used FWTools to build against.  I'll see if I can
figure out what he was doing.  If I recall correctly, Frank wasn't a huge
fan of this technique though. ;)

Thanks again,

Roger
--

On Mon, Sep 29, 2008 at 10:34 PM, Seth Price <seth@pricepages.org> wrote:

> I agree with Frank, this sounds like the bug that I reported (and fixed)
> here:
> http://trac.osgeo.org/gdal/ticket/2327
>
> (Although it became a log of my alterations to the warper kernel, which was
> well beyond the scope of the original bug.)
> ~Seth
>
>
>
> On Sep 29, 2008, at 11:19 PM, Frank Warmerdam wrote:
>
>  On Tue, Sep 30, 2008 at 4:30 AM, Roger Andr? <randre@gmail.com> wrote:
>>
>>> Hi List,
>>>
>>> I've hit the same problem twice now, and I'm pretty certain after Round 2
>>> that I'm not introducing it.  Basically, I'm using gdal_merge.py to
>>> mosaic a
>>> group of low-resolution, 32-bit floating point rasters together, then
>>> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a
>>> higher
>>> resolution image.  I'm finding afterwards that there are linear artifacts
>>> in
>>> the mosaic which run vertically through the mosaic, which look like edge
>>> artifacts, but which are not located near the edge of either an original
>>> low-res tile, or the resulting high res one.  I've tested the
>>> interpolation
>>> of a single low-res tile in the area where the artifact is present in the
>>> mosaic and I do not get the same results - the interpolated tile is clear
>>> of
>>> artifacts.
>>>
>>> Is it possible that I'm hitting some sort of memory limit that is causing
>>> only a certain number of columns to be interpolated at one time, rather
>>> than
>>> the entire row?
>>>
>>
>> Roger,
>>
>> There have been some fixes to some of the gdalwarp interpolator
>> code in recent months, so one hint is to ensure you try the latest
>> "trunk" code to see if perhaps the problem is already fixed.
>>
>> Second, you may want to investigate the gdal_merge.py product
>> carefully to ensure there aren't any bad pixels in it along the
>> boundaries.
>>
>> Third you might try the cubic (instead of cubicspline) interpolator
>> to see if it gives cleaner results.
>>
>> Beyond that a ticket submitted on the smallest test case that
>> demonstrates the problem would be appreciated.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/8ddad4ed/attachment.html
From randre at gmail.com  Tue Sep 30 13:33:27 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Sep 30 13:33:30 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
In-Reply-To: <9c2015090809300937k62bbbaa4w8cb8a0bccc86a232@mail.gmail.com>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
	<931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>
	<30B91941-D718-424A-A354-90AF8757E6EA@pricepages.org>
	<9c2015090809300937k62bbbaa4w8cb8a0bccc86a232@mail.gmail.com>
Message-ID: <9c2015090809301033y12ce8103hf660030a27fafff7@mail.gmail.com>

Well, the good news is that the artifacts don't seem to be present when I
use the plain "cubic" resampling method.  The bad news is that the the
quality of that method isn't good enough for me to use.  I think my solution
is going to have to be that I manually cut pieces out of the low-res mosaic
that overlap one-another, then resample them to a size below what will cause
the artifact (since I *think* it's a size related problem), cut out the edge
artifacts, and then remosaic them into a full data set.

I'm afraid that if I spend a bunch of time now trying to get a newer version
of gdal working, I'm going to get into an install death-spiral that I can't
get out of.

Seth, can you comment as to whether you think the problem should actually
only exist in the cubicspline method?  From reading the changelogs, it
sounds like the error should be present in the other methods as well.

Thanks.
--



On Tue, Sep 30, 2008 at 9:37 AM, Roger Andr? <randre@gmail.com> wrote:

> Hi Seth and Frank,
>
> Thanks for the feedback.  I just finished reading the changelog link that
> Seth sent and all I can say is, "Wow, nice job!"
>
> I did some further testing last night using a single GTOPO30 tile, and
> doing a 10x upsample.  The artifacts are present in it at columns 6000 and
> 12000, so I think we can rule out that gdal_merge.py is introducing the
> error.  I'm testing the cubic resampling operator this morning, in the hopes
> that it won't produce the error.  Since it seems to require a very large
> scaling difference, it also takes a bit of time to run the test.  I'll let
> you know what I find when it's done.
>
> Regarding running the latest code from trunk, I'm not sure if I can do
> that.  I'm currently using the gdal implementation in the Linux version of
> FWTools-2.0.6 because I am unable to get all of the dependencies installed
> that I need for a source-compiled version of gdal to work properly on my
> system.  I think I remember seeing some traffic from Mateuz in the recent
> past that indicated he used FWTools to build against.  I'll see if I can
> figure out what he was doing.  If I recall correctly, Frank wasn't a huge
> fan of this technique though. ;)
>
> Thanks again,
>
> Roger
> --
>
>
> On Mon, Sep 29, 2008 at 10:34 PM, Seth Price <seth@pricepages.org> wrote:
>
>> I agree with Frank, this sounds like the bug that I reported (and fixed)
>> here:
>> http://trac.osgeo.org/gdal/ticket/2327
>>
>> (Although it became a log of my alterations to the warper kernel, which
>> was well beyond the scope of the original bug.)
>> ~Seth
>>
>>
>>
>> On Sep 29, 2008, at 11:19 PM, Frank Warmerdam wrote:
>>
>>  On Tue, Sep 30, 2008 at 4:30 AM, Roger Andr? <randre@gmail.com> wrote:
>>>
>>>> Hi List,
>>>>
>>>> I've hit the same problem twice now, and I'm pretty certain after Round
>>>> 2
>>>> that I'm not introducing it.  Basically, I'm using gdal_merge.py to
>>>> mosaic a
>>>> group of low-resolution, 32-bit floating point rasters together, then
>>>> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a
>>>> higher
>>>> resolution image.  I'm finding afterwards that there are linear
>>>> artifacts in
>>>> the mosaic which run vertically through the mosaic, which look like edge
>>>> artifacts, but which are not located near the edge of either an original
>>>> low-res tile, or the resulting high res one.  I've tested the
>>>> interpolation
>>>> of a single low-res tile in the area where the artifact is present in
>>>> the
>>>> mosaic and I do not get the same results - the interpolated tile is
>>>> clear of
>>>> artifacts.
>>>>
>>>> Is it possible that I'm hitting some sort of memory limit that is
>>>> causing
>>>> only a certain number of columns to be interpolated at one time, rather
>>>> than
>>>> the entire row?
>>>>
>>>
>>> Roger,
>>>
>>> There have been some fixes to some of the gdalwarp interpolator
>>> code in recent months, so one hint is to ensure you try the latest
>>> "trunk" code to see if perhaps the problem is already fixed.
>>>
>>> Second, you may want to investigate the gdal_merge.py product
>>> carefully to ensure there aren't any bad pixels in it along the
>>> boundaries.
>>>
>>> Third you might try the cubic (instead of cubicspline) interpolator
>>> to see if it gives cleaner results.
>>>
>>> Beyond that a ticket submitted on the smallest test case that
>>> demonstrates the problem would be appreciated.
>>>
>>> Best regards,
>>> --
>>>
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
>>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/ce613065/attachment.html
From matt at diglib1.cecs.missouri.edu  Tue Sep 30 14:27:01 2008
From: matt at diglib1.cecs.missouri.edu (Matt Klaric)
Date: Tue Sep 30 14:43:57 2008
Subject: [gdal-dev] PAM & nodata values
Message-ID: <1222799221.26015.6.camel@srs7.cgi.missouri.edu>

I'm attempting to set the nodata value on an NITF image and then
subsequently read this nodata value back out of the image.  However this
read fails to find the newly set nodata value.  See the attached source
code and an example image.  You can see that the nodata value is being
set for (the first band of) the image in the PAM XML file.  

Any ideas?

FYI....I'm using version 1.5.2.  

Thanks,
Matt Klaric

-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.cpp
Type: text/x-c++src
Size: 1563 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/16765a35/test-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mosaic-test-5x5.ntf
Type: application/octet-stream
Size: 879 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/16765a35/mosaic-test-5x5-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mosaic-test-5x5.ntf.aux.xml
Type: application/xml
Size: 2123 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/16765a35/mosaic-test-5x5.ntf.aux-0001.rdf
From seth at pricepages.org  Tue Sep 30 16:36:14 2008
From: seth at pricepages.org (Seth Price)
Date: Tue Sep 30 16:36:21 2008
Subject: [gdal-dev] gdalwarp interpolation artifacts
In-Reply-To: <9c2015090809301033y12ce8103hf660030a27fafff7@mail.gmail.com>
References: <9c2015090809291930nc21aa38l3d15c7a47d18e368@mail.gmail.com>
	<931f8ea90809292219p691609aapf9ad5b7cdd3fc4ac@mail.gmail.com>
	<30B91941-D718-424A-A354-90AF8757E6EA@pricepages.org>
	<9c2015090809300937k62bbbaa4w8cb8a0bccc86a232@mail.gmail.com>
	<9c2015090809301033y12ce8103hf660030a27fafff7@mail.gmail.com>
Message-ID: <08A56BEA-2435-468B-8F25-32B5A82FD842@pricepages.org>

The problem will be in all methods if I recall correctly, but to  
varying degrees. In the original resampling method, they all use  
kernels of varying sizes. When said kernel would sample against the  
edge of the image, it defaults to bilinear resampling (I think).  
Cubicspline has the largest kernel size, so it will have the largest  
artifact line. But cubic will also run up against the edge of the  
image, so it will also have artifacting, but the line will be narrower.

One thing you could try is changing the amount of memory that gdalwarp  
uses. Once it can fit more pixels in RAM, the chunks it works on will  
be larger.
~Seth


On Sep 30, 2008, at 11:33 AM, Roger Andr? wrote:

> Well, the good news is that the artifacts don't seem to be present  
> when I use the plain "cubic" resampling method.  The bad news is  
> that the the quality of that method isn't good enough for me to  
> use.  I think my solution is going to have to be that I manually cut  
> pieces out of the low-res mosaic that overlap one-another, then  
> resample them to a size below what will cause the artifact (since I  
> *think* it's a size related problem), cut out the edge artifacts,  
> and then remosaic them into a full data set.
>
> I'm afraid that if I spend a bunch of time now trying to get a newer  
> version of gdal working, I'm going to get into an install death- 
> spiral that I can't get out of.
>
> Seth, can you comment as to whether you think the problem should  
> actually only exist in the cubicspline method?  From reading the  
> changelogs, it sounds like the error should be present in the other  
> methods as well.
>
> Thanks.
> --
>
>
>
> On Tue, Sep 30, 2008 at 9:37 AM, Roger Andr? <randre@gmail.com> wrote:
> Hi Seth and Frank,
>
> Thanks for the feedback.  I just finished reading the changelog link  
> that Seth sent and all I can say is, "Wow, nice job!"
>
> I did some further testing last night using a single GTOPO30 tile,  
> and doing a 10x upsample.  The artifacts are present in it at  
> columns 6000 and 12000, so I think we can rule out that  
> gdal_merge.py is introducing the error.  I'm testing the cubic  
> resampling operator this morning, in the hopes that it won't produce  
> the error.  Since it seems to require a very large scaling  
> difference, it also takes a bit of time to run the test.  I'll let  
> you know what I find when it's done.
>
> Regarding running the latest code from trunk, I'm not sure if I can  
> do that.  I'm currently using the gdal implementation in the Linux  
> version of FWTools-2.0.6 because I am unable to get all of the  
> dependencies installed that I need for a source-compiled version of  
> gdal to work properly on my system.  I think I remember seeing some  
> traffic from Mateuz in the recent past that indicated he used  
> FWTools to build against.  I'll see if I can figure out what he was  
> doing.  If I recall correctly, Frank wasn't a huge fan of this  
> technique though. ;)
>
> Thanks again,
>
> Roger
> --
>
>
> On Mon, Sep 29, 2008 at 10:34 PM, Seth Price <seth@pricepages.org>  
> wrote:
> I agree with Frank, this sounds like the bug that I reported (and  
> fixed) here:
> http://trac.osgeo.org/gdal/ticket/2327
>
> (Although it became a log of my alterations to the warper kernel,  
> which was well beyond the scope of the original bug.)
> ~Seth
>
>
>
> On Sep 29, 2008, at 11:19 PM, Frank Warmerdam wrote:
>
> On Tue, Sep 30, 2008 at 4:30 AM, Roger Andr? <randre@gmail.com> wrote:
> Hi List,
>
> I've hit the same problem twice now, and I'm pretty certain after  
> Round 2
> that I'm not introducing it.  Basically, I'm using gdal_merge.py to  
> mosaic a
> group of low-resolution, 32-bit floating point rasters together, then
> running "gdalwarp -ts xxx yyy -r cubicspline" on the mosaic to get a  
> higher
> resolution image.  I'm finding afterwards that there are linear  
> artifacts in
> the mosaic which run vertically through the mosaic, which look like  
> edge
> artifacts, but which are not located near the edge of either an  
> original
> low-res tile, or the resulting high res one.  I've tested the  
> interpolation
> of a single low-res tile in the area where the artifact is present  
> in the
> mosaic and I do not get the same results - the interpolated tile is  
> clear of
> artifacts.
>
> Is it possible that I'm hitting some sort of memory limit that is  
> causing
> only a certain number of columns to be interpolated at one time,  
> rather than
> the entire row?
>
> Roger,
>
> There have been some fixes to some of the gdalwarp interpolator
> code in recent months, so one hint is to ensure you try the latest
> "trunk" code to see if perhaps the problem is already fixed.
>
> Second, you may want to investigate the gdal_merge.py product
> carefully to ensure there aren't any bad pixels in it along the
> boundaries.
>
> Third you might try the cubic (instead of cubicspline) interpolator
> to see if it gives cleaner results.
>
> Beyond that a ticket submitted on the smallest test case that
> demonstrates the problem would be appreciated.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080930/daa8fd78/attachment.html
From 2voodoo at gmx.de  Tue Sep 30 16:55:21 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Tue Sep 30 16:55:34 2008
Subject: [gdal-dev] How to add a OGRSpatialReference to an OGRLayer?
Message-ID: <48E29239.6090404@gmx.de>

Hi,

unfortunately I have no experience with OGR and want to display a
SHP-File (on WinCE, but I don't think that matters). The rendering works
well, but is slow - so I will add some caching. One thing of faster
rendering is to use SetSpatialFilterRect() I guess. This works, as
written in the docs, with comparing the coorinates (they must be in the
same coorinate systeme). Sadly, my shp files do not have any
SpatialReference (I get NULL returned from OGRLayer::GetSpatialRef() ).
If I use SetSpatialFilterRect() with this shp file datasource I will get
back absolutely no features. I thought the reason for this could be the
missing spatial referenc. So I wonder how to add/change a spatial
reference (e. g. a coorinate interpretation, right?) to a layer?

I looked through the mailing list, but found nothing that helped me.

Thanks in advance,
Tom

From warmerdam at pobox.com  Tue Sep 30 17:02:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 30 17:09:08 2008
Subject: [gdal-dev] How to add a OGRSpatialReference to an OGRLayer?
In-Reply-To: <48E29239.6090404@gmx.de>
References: <48E29239.6090404@gmx.de>
Message-ID: <931f8ea90809301402n8cd7920i18aab4c19e8ae10c@mail.gmail.com>

On Tue, Sep 30, 2008 at 10:55 PM, Tom Kazimiers <2voodoo@gmx.de> wrote:
> Hi,
>
> unfortunately I have no experience with OGR and want to display a
> SHP-File (on WinCE, but I don't think that matters). The rendering works
> well, but is slow - so I will add some caching. One thing of faster
> rendering is to use SetSpatialFilterRect() I guess. This works, as
> written in the docs, with comparing the coorinates (they must be in the
> same coorinate systeme). Sadly, my shp files do not have any
> SpatialReference (I get NULL returned from OGRLayer::GetSpatialRef() ).
> If I use SetSpatialFilterRect() with this shp file datasource I will get
> back absolutely no features. I thought the reason for this could be the
> missing spatial referenc. So I wonder how to add/change a spatial
> reference (e. g. a coorinate interpretation, right?) to a layer?

Tom,

In fact there is no GDAL way to do this.  You can however manually
put a .prj file with an ArcGIS PE string along side the shapefiles.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From 2voodoo at gmx.de  Tue Sep 30 17:11:54 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Tue Sep 30 17:12:11 2008
Subject: [gdal-dev] How to add a OGRSpatialReference to an OGRLayer?
In-Reply-To: <931f8ea90809301402n8cd7920i18aab4c19e8ae10c@mail.gmail.com>
References: <48E29239.6090404@gmx.de>
	<931f8ea90809301402n8cd7920i18aab4c19e8ae10c@mail.gmail.com>
Message-ID: <48E2961A.1060700@gmx.de>

Frank Warmerdam schrieb:
> On Tue, Sep 30, 2008 at 10:55 PM, Tom Kazimiers <2voodoo@gmx.de> wrote:
>   
>> Hi,
>>
>> unfortunately I have no experience with OGR and want to display a
>> SHP-File (on WinCE, but I don't think that matters). The rendering works
>> well, but is slow - so I will add some caching. One thing of faster
>> rendering is to use SetSpatialFilterRect() I guess. This works, as
>> written in the docs, with comparing the coorinates (they must be in the
>> same coorinate systeme). Sadly, my shp files do not have any
>> SpatialReference (I get NULL returned from OGRLayer::GetSpatialRef() ).
>> If I use SetSpatialFilterRect() with this shp file datasource I will get
>> back absolutely no features. I thought the reason for this could be the
>> missing spatial referenc. So I wonder how to add/change a spatial
>> reference (e. g. a coorinate interpretation, right?) to a layer?
>>     
>
> Tom,
>
> In fact there is no GDAL way to do this.  You can however manually
> put a .prj file with an ArcGIS PE string along side the shapefiles.
>
> Best regards,
>
>   
Frank,

thanks for the answer. So does this actually mean I have to look if
there is a .prj file - if not create one by myself (maybe ask the user
for the parameters) and then load the file with OGR? And if a spatial
reference of a layer is NULL I have to create also a (new) .prj file (in
case of the one provided is damaged).

thanks, regards,
Tom
From warmerdam at pobox.com  Tue Sep 30 17:25:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 30 17:25:53 2008
Subject: [gdal-dev] PAM & nodata values
In-Reply-To: <1222799221.26015.6.camel@srs7.cgi.missouri.edu>
References: <1222799221.26015.6.camel@srs7.cgi.missouri.edu>
Message-ID: <931f8ea90809301425rfae9338ya9c2c6eb7d28d9b2@mail.gmail.com>

Matt,

I have had no problem reproducing your bug.  Could you file a ticket on th
issue.  The following change fixes the bug, but  I need a ticket to push the
fix back into the source tree.

Thanks!

Best regards,

warmerda@iBook% svn diff
Index: nitfdataset.cpp
===================================================================
--- nitfdataset.cpp     (revision 15371)
+++ nitfdataset.cpp     (working copy)
@@ -458,7 +458,7 @@
     if( psImage->bNoDataSet )
         return psImage->nNoDataValue;
     else
-        return -1e10;
+        return GDALPamRasterBand::GetNoDataValue( pbSuccess );
 }

 /************************************************************************/

On Tue, Sep 30, 2008 at 8:27 PM, Matt Klaric
<matt@diglib1.cecs.missouri.edu> wrote:
> I'm attempting to set the nodata value on an NITF image and then
> subsequently read this nodata value back out of the image.  However this
> read fails to find the newly set nodata value.  See the attached source
> code and an example image.  You can see that the nodata value is being
> set for (the first band of) the image in the PAM XML file.
>
> Any ideas?
>
> FYI....I'm using version 1.5.2.
>
> Thanks,
> Matt Klaric
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Tue Sep 30 17:28:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 30 17:28:03 2008
Subject: [gdal-dev] How to add a OGRSpatialReference to an OGRLayer?
In-Reply-To: <48E2961A.1060700@gmx.de>
References: <48E29239.6090404@gmx.de>
	<931f8ea90809301402n8cd7920i18aab4c19e8ae10c@mail.gmail.com>
	<48E2961A.1060700@gmx.de>
Message-ID: <931f8ea90809301428y1c36907diffebc0b38e2ebead@mail.gmail.com>

On Tue, Sep 30, 2008 at 11:11 PM, Tom Kazimiers <2voodoo@gmx.de> wrote:
>
>>
>> Tom,
>>
>> In fact there is no GDAL way to do this.  You can however manually
>> put a .prj file with an ArcGIS PE string along side the shapefiles.
>>
>> Best regards,
>>
>>
> Frank,
>
> thanks for the answer. So does this actually mean I have to look if
> there is a .prj file - if not create one by myself (maybe ask the user
> for the parameters) and then load the file with OGR? And if a spatial
> reference of a layer is NULL I have to create also a (new) .prj file (in
> case of the one provided is damaged).

Tom,

The OGR shapefile driver will read .prj files and return the coordinate
system properly OGR-ified from the layer.  It will also properly write .prj
files, but only if you pass the spatial reference into the CreateLayer() call.
There is no facility for updating the coordinate system of an existing
layer via OGR.

Best regards,

> thanks, regards,
> Tom
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From Cameron.Ackerman at usace.army.mil  Tue Sep 30 19:08:52 2008
From: Cameron.Ackerman at usace.army.mil (Ackerman, Cameron T HEC)
Date: Tue Sep 30 19:09:56 2008
Subject: [gdal-dev] Data Binding dgal Layer in .NET
Message-ID: <9C85452EF241E14EACF1FD68DD26329CC19061@iwr-ml1hec.hec.ds.usace.army.mil>


Hi All:

I'm a noob and trying to bind information from a Layer in GDAL
to a Datagridview in .NET.  Does anyone have experience or
a sample to get me started?  I'm trying to get around NOT
creating a copy of the data into a specialized class object
but use it in it's native form.

Many thanks,
cam

