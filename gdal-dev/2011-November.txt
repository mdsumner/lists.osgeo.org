From yehil at rafael.co.il  Tue Nov  1 07:22:31 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Nov  1 20:17:22 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local>

Hi
Is it possible to build the JP2KAK driver as a plugin?

Thanks
Yehiyam
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111101/adb7242f/attachment.html
From even.rouault at mines-paris.org  Tue Nov  1 07:59:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov  1 20:43:42 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local>
Message-ID: <1320148785.4eafdf31e6d5f@webmail.free.fr>

Selon Livneh Yehiyam <yehil@rafael.co.il>:

> Hi
> Is it possible to build the JP2KAK driver as a plugin?

You didn't mention on which OS you want to build it, but I have had a look at
both makefiles, and I don't see any existing support for building as a plugin.
However, I don't foresee any obvious reason why you this would not doable,
provided that you can tweak the makefile.

>
> Thanks
> Yehiyam
From szekerest at gmail.com  Tue Nov  1 09:08:35 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Nov  1 21:56:17 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
In-Reply-To: <1320148785.4eafdf31e6d5f@webmail.free.fr>
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local>
	<1320148785.4eafdf31e6d5f@webmail.free.fr>
Message-ID: <CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com>

It seems kakadu SDK has an extraordinary license which would call for to
compile this driver as a plugin. I have been asked to compile gdal against
this dependency but I'm hesitant to think I could technically distribute
the gdal binaries in such form without adding the related binaries from the
kakadu SDK.

+1 to modify the makefile to compile as a plugin

Best regards,

Tamas


2011/11/1 Even Rouault <even.rouault@mines-paris.org>

> Selon Livneh Yehiyam <yehil@rafael.co.il>:
>
> > Hi
> > Is it possible to build the JP2KAK driver as a plugin?
>
> You didn't mention on which OS you want to build it, but I have had a look
> at
> both makefiles, and I don't see any existing support for building as a
> plugin.
> However, I don't foresee any obvious reason why you this would not doable,
> provided that you can tweak the makefile.
>
> >
> > Thanks
> > Yehiyam
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111101/75024e84/attachment.html
From iainmalcolm1 at googlemail.com  Tue Nov  1 09:13:02 2011
From: iainmalcolm1 at googlemail.com (Iain)
Date: Tue Nov  1 22:00:59 2011
Subject: [gdal-dev] Re: Using a gdal generated tiff to generate DEM
	tiles - losing registration - finding the answer
In-Reply-To: <1320057837570-6947684.post@n2.nabble.com>
References: <1320002191096-6946188.post@n2.nabble.com>
	<4EAE5469.9000701@gmx.eu>
	<1320057837570-6947684.post@n2.nabble.com>
Message-ID: <1320153182910-6951612.post@n2.nabble.com>

Thanks for the various ideas everyone,  I've now found that the utility
gdallocationinfo gets the right answer for co-ordinates, so I'm just
checking to see how it does it and will incorporate this into my pixel
position calculations.

for example:

gdallocationinfo -xml -wgs84 /mnt/svrstuff/srtmdata/brw.tif -3.400044
56.389528

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-a-gdal-generated-tiff-to-generate-DEM-tiles-losing-registration-tp6946188p6951612.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yehil at rafael.co.il  Tue Nov  1 09:10:26 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Nov  1 22:02:19 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277BB8633@MAILBOXSERVER.rf.local>

Its gdal 1.8.1 windows x64. I will give it a try based on one of the other plugins.

Sent from my mobile


-----------------------------
From: "Even Rouault"
Subject: Re: [gdal-dev] Kakadu Jpeg2000 driver
Date: 01 ?????? 2011 13:58


Selon Livneh Yehiyam <yehil@rafael.co.il>:

> Hi
> Is it possible to build the JP2KAK driver as a plugin?

You didn't mention on which OS you want to build it, but I have had a look at
both makefiles, and I don't see any existing support for building as a plugin.
However, I don't foresee any obvious reason why you this would not doable,
provided that you can tweak the makefile.

>
> Thanks
> Yehiyam


o
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111101/26750270/attachment.html
From aashishcy at gmail.com  Tue Nov  1 12:58:14 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Wed Nov  2 01:58:17 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
Message-ID: <CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>

Hi Mateusz I just realized that somehow my email got stuck in my outbox.

I like  what you have proposed. I just wanted to add one or two points. How
can I get write permissions for the Wiki?

Also as far as dependencies of GDAL driver's  are concerned,  we can
probably manage them using CMake superbuild support.

Also I wanted to point out that, I had started cmake port of gdal last year
which is based on your work:

https://gitorious.org/cmake-gdal

2011/10/24 Jayesh Chaudhary <aashishcy@gmail.com>

> Hi Mateusz,
>
> Thanks for putting this together. I will have a look today and probably
> add things to it today/ tomorrow.
>
> Best,
>
>
> 2011/10/22 Mateusz ?oskot <mateusz@loskot.net>
>
>> Folks
>>
>> I have started brainstorming the CMake for GDAL idea on Wiki:
>>
>> http://trac.osgeo.org/gdal/wiki/CMake
>>
>> Feel free to add your ideas, wishes, proposals, questions, etc.
>> Try to keep it clear and structured if possible.
>>
>> Best regards,
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>> Charter Member of OSGeo, http://osgeo.org
>> Member of ACCU, http://accu.org
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111101/3f7f7d5a/attachment.html
From etourigny.dev at gmail.com  Tue Nov  1 13:05:22 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Nov  2 02:05:45 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
Message-ID: <CA+TxYvNpzonYwS=fkPKpZU+VeLbR521SBBG+TSC+Wt6pYMchhA@mail.gmail.com>

You need an osgeo ID which you can use to login to the trac wiki.

http://www.osgeo.org/osgeo_userid/

2011/11/1 Jayesh Chaudhary <aashishcy@gmail.com>:
> Hi?Mateusz I just realized that somehow my email got stuck in my outbox.
> I like ?what you have proposed. I just wanted to add one or two points. How
> can I get write permissions for the Wiki?
> Also as far as dependencies of GDAL driver's ?are concerned, ?we can
> probably manage them using CMake superbuild support.
> Also I wanted to point out that, I had started cmake port of gdal last year
> which is based on your work:
> https://gitorious.org/cmake-gdal
>
> 2011/10/24 Jayesh Chaudhary <aashishcy@gmail.com>
>>
>> Hi Mateusz,
>> Thanks for putting this together. I will have a look today and probably
>> add things to it today/ tomorrow.
>> Best,
>>
>> 2011/10/22 Mateusz ?oskot <mateusz@loskot.net>
>>>
>>> Folks
>>>
>>> I have started brainstorming the CMake for GDAL idea on Wiki:
>>>
>>> http://trac.osgeo.org/gdal/wiki/CMake
>>>
>>> Feel free to add your ideas, wishes, proposals, questions, etc.
>>> Try to keep it clear and structured if possible.
>>>
>>> Best regards,
>>> --
>>> Mateusz Loskot, http://mateusz.loskot.net
>>> Charter Member of OSGeo, http://osgeo.org
>>> Member of ACCU, http://accu.org
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From lauri.kajan at gmail.com  Tue Nov  1 14:02:48 2011
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Wed Nov  2 03:06:27 2011
Subject: [gdal-dev] plans for Simple feature 1.2 in ogr?
Message-ID: <CAKWoFML9mNq5S0J+FBeHr6wSNG6Yvk=LK+fpeW8hUd5KeZ-yYw@mail.gmail.com>

Hi Frank and others,

Is there currently any plans to adopt simple feature 1.2 standard to ogr?
I found few earlier posts from year 2006 and 2008 discussing this.
Frank said then his planning that but without funding it's not going
to happen.
Is the situation same now days?


Thanks

-Lauri
From mateusz at loskot.net  Tue Nov  1 16:39:34 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov  2 05:54:45 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
Message-ID: <CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>

2011/11/1 Jayesh Chaudhary <aashishcy@gmail.com>:
> Hi?Mateusz I just realized that somehow my email got stuck in my outbox.
> I like ?what you have proposed.

Great. I'd love to receive critique of the proposed approach.
There must be some weakness of it :-)

>  I just wanted to add one or two points. How
> can I get write permissions for the Wiki?

As Etienne pointed, you need OSGeo User ID

> Also as far as dependencies of GDAL driver's ?are concerned, ?we can
> probably manage them using CMake superbuild support.

I have never heard of CMake superbuild support.
Where can I learn more?

> Also I wanted to point out that, I had started cmake port of gdal last year
> which is based on your work:
> https://gitorious.org/cmake-gdal

I see. I have seen this repo and I was wondering what is this about.

The cmake-gdal that used to be hosted at Google Code was a good proof
of concept,
but I wasn't particularly happy about structure of the configuration.
So, I wanted to find out how to make it more manageable - this is
important property
of build configuration of large project. GDAL is large.
So, I went out and looked for examples. I found Boost CMake
(http://gitorious.org/boost/cmake)
I analysed their CMake configuration and code and I replicated the
ideas I'd found
most interesting for my purpose.
That's how I came up with the configuration of SOCI.

By the way, I'm not sure I remember correctly, but Kitware seem to be
interested in supporting
CMake for Boost in frame of Ryppl project
("In a recent meeting between Ryppl developers and Kitware (...)"
http://ryppl.org/milestones/ )

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From patdevelop at gmail.com  Tue Nov  1 21:12:22 2011
From: patdevelop at gmail.com (Patrick Sunter)
Date: Wed Nov  2 10:39:54 2011
Subject: [gdal-dev] Patch submission & development questions
In-Reply-To: <CABUeae-Qq3Tmd1HmOnzJdEORSOWVrjV3XCLT97pVAiScLxMXpw@mail.gmail.com>
References: <CAGVu-jGVXJxocX+Ynv69r8Y=o1WZ1GLE0LDA1DkpmjN8d8cscA@mail.gmail.com>
	<CABUeae-Qq3Tmd1HmOnzJdEORSOWVrjV3XCLT97pVAiScLxMXpw@mail.gmail.com>
Message-ID: <CALOKYXXy7QRhMbaZtU=f7cQJTyhAXxXasr_KsbQYt_m5Xx30+w@mail.gmail.com>

Hi Dan et al,

in addition to the replies below, you might find the following GDAL
Wiki pages useful, I read them when starting to contribute some work
on the NetCDF driver:
http://trac.osgeo.org/gdal/wiki/HowToContribute
http://trac.osgeo.org/gdal/wiki/rfc8_devguide
http://trac.osgeo.org/gdal/wiki/TestingNotes

These are linked from the front page of the GDAL Trac Wiki.

-- Patrick.

On Mon, Oct 31, 2011 at 4:58 AM, Mateusz ?oskot <mateusz@loskot.net> wrote:
> On 30 October 2011 17:24, Dan Homerick <danhomerick@gmail.com> wrote:
>> I have a couple questions about the patch submission process. The main
>> one being, "What is it?"
>
> I know it this way:
>
> - You create a patch
> - You submit new ticket with your patch attached
> - Patch is commented in the ticket
> - Decision is made, patch accepted or rejected
>
>> I assume that patches are best submitted
>> through a Trac ticket. Should we post here for discussion before
>> opening a ticket, if the issue we'd like to patch doesn't have an
>> existing ticket open?
>
> IMHO, new ticket + discussion as comments to ticket.
>
>> Do most changes go through an "official" RFC
>> phase, or just the addition of larger features?
>
> "Significant changes to the main development version should be discussed
> on the gdal-dev list before you make them, and larger changes will
> require a RFC approved by the PSC."
>
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
>> There are a couple things I'd like to submit patches for.
>
> I would create new tickets, one per subject/patch, and discuss it there.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jormarfe at gmail.com  Wed Nov  2 03:54:54 2011
From: jormarfe at gmail.com (Jorge Martin)
Date: Wed Nov  2 17:44:05 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
In-Reply-To: <CAONKBT5BswqHTV6ky80OR1S_qMyVYusutxE1x3VD3KucyS5AFA@mail.gmail.com>
References: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
	<1320088638.4eaef43e5d63e@webmail.free.fr>
	<CAONKBT5BswqHTV6ky80OR1S_qMyVYusutxE1x3VD3KucyS5AFA@mail.gmail.com>
Message-ID: <CADH5xWpHgSWmbvsRVuQNk3xxJsyEnZWbQd99hXXzxzP5K_uxDg@mail.gmail.com>

 Hello,

      I am using an old version of the gdal library: 1.4.4.

      I have include below the code I used to write the tiff image:



 //-------------------------------------------------------------------------------------

    WriteImage(string aPath, int *myBuffer, int myNumLines, int myNumCols)
    {

    GDALRegister_GTiff();
    GDALDataset  *m_poDataset;
    const char *pszFormat = "GTiff";
    GDALDriver *poDriver;

    poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);

    if( poDriver == NULL ) return ( 0 );


    char **papszOptions = NULL;

    m_poDataset = poDriver->Create( aPath.c_str(), myNumColumns,
myNumLines,  1, GDT_Byte,
                                                    papszOptions );


    GDALRasterBand  *poBand = m_poDataset->GetRasterBand(1);

     poBand->RasterIO( GF_Write, 0, 0, myNumColumns, myNumLines,
                      myBuffer, myNumColumns, myNumLines, GDT_Int32, 0, 0 );


    GDALClose(m_poDataset);

    return 1;

   }



 //-------------------------------------------------------------------------------------



Best Regards,

Jorge

2011/10/31 Brian Claywell <bcclaywell@gmail.com>

> Jorge,
>
> On Mon, Oct 31, 2011 at 2:17 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
> > Selon Jorge Martin <jormarfe@gmail.com>:
> >>        I am using RasterIO function to write tiff files. The problem
> >> appears when the image size is aprox. 25000x25000 (500Mb), the last
> lines
> >> of the image are not correctly written. The last lines are written with
> 0
> >> or 255 value. I have checked that if I only write a tiff file with the
> last
> >> lines of the image, this lines are correctly written.
> <snip>
> > You didn't mention your GDAL version. If it is not a recent one, you
> could try
> > upgrading and see if it works better.
>
> If you're seeing this behavior pre-1.8.1, it sounds similar to this
> bug, which has since been fixed:
> http://trac.osgeo.org/gdal/ticket/4090
>
> -b
>
> --
> Brian Claywell
> bcclaywell@gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/493731b2/attachment.html
From even.rouault at mines-paris.org  Wed Nov  2 04:53:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov  2 18:46:15 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
In-Reply-To: <CADH5xWpHgSWmbvsRVuQNk3xxJsyEnZWbQd99hXXzxzP5K_uxDg@mail.gmail.com>
References: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
	<1320088638.4eaef43e5d63e@webmail.free.fr>
	<CAONKBT5BswqHTV6ky80OR1S_qMyVYusutxE1x3VD3KucyS5AFA@mail.gmail.com>
	<CADH5xWpHgSWmbvsRVuQNk3xxJsyEnZWbQd99hXXzxzP5K_uxDg@mail.gmail.com>
Message-ID: <1320224019.4eb10513c4a48@webmail.free.fr>

Selon Jorge Martin <jormarfe@gmail.com>:

>  Hello,
>
>       I am using an old version of the gdal library: 1.4.4.
>
>       I have include below the code I used to write the tiff image:
>

Your code looks OK (provided that the values in your buffer are also OK), so I'd
suspect indeed it is a bug in 1.4.4 that hopefully is fixed by more recent
versions. The latest stable version is 1.8.1
From jormarfe at gmail.com  Wed Nov  2 05:28:21 2011
From: jormarfe at gmail.com (Jorge)
Date: Wed Nov  2 19:23:04 2011
Subject: [gdal-dev] Problems writing big tiff image with RasterIO function
In-Reply-To: <1320224019.4eb10513c4a48@webmail.free.fr>
References: <CADH5xWrgg3D0he+46Kr0gRCBgCy8Fs7U7pKHAsjucTUv9aznmg@mail.gmail.com>
	<1320088638.4eaef43e5d63e@webmail.free.fr>
	<CAONKBT5BswqHTV6ky80OR1S_qMyVYusutxE1x3VD3KucyS5AFA@mail.gmail.com>
	<CADH5xWpHgSWmbvsRVuQNk3xxJsyEnZWbQd99hXXzxzP5K_uxDg@mail.gmail.com>
	<1320224019.4eb10513c4a48@webmail.free.fr>
Message-ID: <9522E172-F4FB-4CC1-A87D-6155E56F4CF0@gmail.com>

Ok, thank you very much!
I have written a little image with only the last lines of the original image and this image does not have the strange values, so the problem should be the bug you have mentioned.

Best regards,

Jorge

El 02/11/2011, a las 09:53, Even Rouault <even.rouault@mines-paris.org> escribi?:

> Selon Jorge Martin <jormarfe@gmail.com>:
> 
>> Hello,
>> 
>>      I am using an old version of the gdal library: 1.4.4.
>> 
>>      I have include below the code I used to write the tiff image:
>> 
> 
> Your code looks OK (provided that the values in your buffer are also OK), so I'd
> suspect indeed it is a bug in 1.4.4 that hopefully is fixed by more recent
> versions. The latest stable version is 1.8.1
From yehil at rafael.co.il  Wed Nov  2 09:42:06 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Nov  2 23:52:30 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
In-Reply-To: <CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local><1320148785.4eafdf31e6d5f@webmail.free.fr><CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D7C1@MAILBOXSERVER.rf.local>

Hi
I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
I'm working on windows7 64 bit with gdal source version 1.8.1

I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal with the driver enabled. I'm using the c# binding.

I can open the dataset, and everything looks ok (size, number of overviews, band count etc.).
When I read data from one of the bands at the base resolution (lets say it is 512x512) I get the correct data.
Band mainBand = dataset.GetRasterBand(1);
mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);

If I get one of the overview bands:
Band overviewBand = mainBand.GetOverview(0);

And I try to read the entire band (lets say it is 256x256):
overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
What I get in the buffer are the first 256x256 pixels of the mainBand.
This is contrary to the behavior I'm used to get when reading GTiff files, or even JPEG2000 with the JP2ECW driver.

Is this behavior by design, or is there another way to achieve what I want.

Thanks
Yehiyam

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/5b8292c8/attachment.html
From yehil at rafael.co.il  Wed Nov  2 10:21:59 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Nov  3 00:34:24 2011
Subject: [gdal-dev] FW: Kakadu Jpeg2000 driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D822@MAILBOXSERVER.rf.local>

One more thing: I used the sample c# app GDALReadDirect.cs to test it.

From: Livneh Yehiyam
Sent: Wednesday, November 02, 2011 3:42 PM
To: gdal-dev
Subject: Kakadu Jpeg2000 driver

Hi
I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
I'm working on windows7 64 bit with gdal source version 1.8.1

I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal with the driver enabled. I'm using the c# binding.

I can open the dataset, and everything looks ok (size, number of overviews, band count etc.).
When I read data from one of the bands at the base resolution (lets say it is 512x512) I get the correct data.
Band mainBand = dataset.GetRasterBand(1);
mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);

If I get one of the overview bands:
Band overviewBand = mainBand.GetOverview(0);

And I try to read the entire band (lets say it is 256x256):
overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
What I get in the buffer are the first 256x256 pixels of the mainBand.
This is contrary to the behavior I'm used to get when reading GTiff files, or even JPEG2000 with the JP2ECW driver.

Is this behavior by design, or is there another way to achieve what I want.

Thanks
Yehiyam

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/5e783b1c/attachment-0001.html
From katrineggert1980 at gmail.com  Wed Nov  2 13:33:40 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Thu Nov  3 03:54:59 2011
Subject: [gdal-dev] Question about Reprojecting a Shapefile
Message-ID: <CAGR7mtBL2qa7my3NassZvKfiaUNK63PkkSf6XkDUiKicBrZOGQ@mail.gmail.com>

Hi I'm trying to reprojec a shapefile using
ogr2ogr -f "esri Shapefile" -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
but I get this error:
FAILURE:
Unable to open datasource `reproj_parcel.shp' with the following drivers.

with:
ogr2ogr -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
I also get the same error.
Any tip on what am I doing wrong? (it seems to be a pretty simple thing to
do)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/f839b17c/attachment.html
From chaitanya.ch at gmail.com  Wed Nov  2 13:40:02 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov  3 04:01:39 2011
Subject: [gdal-dev] Question about Reprojecting a Shapefile
In-Reply-To: <CAGR7mtBL2qa7my3NassZvKfiaUNK63PkkSf6XkDUiKicBrZOGQ@mail.gmail.com>
References: <CAGR7mtBL2qa7my3NassZvKfiaUNK63PkkSf6XkDUiKicBrZOGQ@mail.gmail.com>
Message-ID: <CAMKgpOawWwGDrrAFAq-3GoUkb+PxamuZTJK7ezYf0EPSxRuvZg@mail.gmail.com>

katrin,

Your second command should be enough if you are trying to convert
reproj_parcel.shp to Areas_.shp
Make sure that you have the supporting files such as .dbf .shx ...

On Wed, Nov 2, 2011 at 11:03 PM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi I'm trying to reprojec a shapefile using
> ogr2ogr -f "esri Shapefile" -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
> but I get this error:
> FAILURE:
> Unable to open datasource `reproj_parcel.shp' with the following drivers.
>
> with:
> ogr2ogr -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
> I also get the same error.
> Any tip on what am I doing wrong? (it seems to be a pretty simple thing to
> do)
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/ed1df8fc/attachment.html
From katrineggert1980 at gmail.com  Wed Nov  2 14:36:40 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Thu Nov  3 05:01:25 2011
Subject: [gdal-dev] Extract centroids
Message-ID: <CAGR7mtDpZoSJdrBm0gdyOrBYFFPWHpO_34FstN1X3ivrJHb=ug@mail.gmail.com>

Greetings
Just one question: I tried to find in Google if GDAL could be used to
extract polygons centroids. But I was not able to find anything. Is it
possible?
Kat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/8928ad9e/attachment.html
From chaitanya.ch at gmail.com  Wed Nov  2 14:40:25 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov  3 05:05:24 2011
Subject: [gdal-dev] Extract centroids
In-Reply-To: <CAGR7mtDpZoSJdrBm0gdyOrBYFFPWHpO_34FstN1X3ivrJHb=ug@mail.gmail.com>
References: <CAGR7mtDpZoSJdrBm0gdyOrBYFFPWHpO_34FstN1X3ivrJHb=ug@mail.gmail.com>
Message-ID: <CAMKgpOYDq3Fzy_4M55L89J=7BaQEo3=WYf0wXpGUt9BdRxFDmA@mail.gmail.com>

katrin,

You can programatically extract the centroids. You can use the
OGR_G_Centroid() function on the geometry.

On Thu, Nov 3, 2011 at 12:06 AM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Greetings
> Just one question: I tried to find in Google if GDAL could be used to
> extract polygons centroids. But I was not able to find anything. Is it
> possible?
> Kat
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/af49c31d/attachment.html
From szekerest at gmail.com  Wed Nov  2 14:42:25 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Nov  3 05:07:28 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D7C1@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local>
	<1320148785.4eafdf31e6d5f@webmail.free.fr>
	<CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com>
	<C5D1974ECA44D2429ECBC64B967C34C0A277A7D7C1@MAILBOXSERVER.rf.local>
Message-ID: <CACALY+STr+0ZFPKPEaoMEgnSjrA_0gdS9Mj+afGUYA+qWi3T3w@mail.gmail.com>

This sounds like a driver specific problem. Do you have some test data to
reproduce this?

Best regards,

Tamas



2011/11/2 Livneh Yehiyam <yehil@rafael.co.il>

>   Hi****
>
> I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
> ****
>
> I'm working on windows7 64 bit with gdal source version 1.8.1****
>
> ** **
>
> I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal
> with the driver enabled. I'm using the c# binding.****
>
> ** **
>
> I can open the dataset, and everything looks ok (size, number of
> overviews, band count etc.).****
>
> When I read data from one of the bands at the base resolution (lets say it
> is 512x512) I get the correct data.****
>
> Band mainBand = dataset.GetRasterBand(1);****
>
> mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);*
> ***
>
> ** **
>
> If I get one of the overview bands:****
>
> Band overviewBand = mainBand.GetOverview(0);****
>
> ** **
>
> And I try to read the entire band (lets say it is 256x256):****
>
>
> overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
> ****
>
> What I get in the buffer are the first 256x256 pixels of the mainBand.****
>
> This is contrary to the behavior I'm used to get when reading GTiff files,
> or even JPEG2000 with the JP2ECW driver.****
>
> ** **
>
> Is this behavior by design, or is there another way to achieve what I want.
> ****
>
> ** **
>
> Thanks****
>
> Yehiyam****
>
> ** **
>   ------------------------------
> * This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution
> or forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof. *
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/18f10b6a/attachment.html
From yehil at rafael.co.il  Wed Nov  2 14:56:10 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Nov  3 05:23:42 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277BB8634@MAILBOXSERVER.rf.local>

Hi Tamas
It happened with any jp2 file I could get my hands on. E.g. The small jp2 files that come with the ecw sdk.
If you need, I can search online and send you a link.
Sent from my mobile


-----------------------------
From: "Tamas Szekeres"
Subject: Re: [gdal-dev] Kakadu Jpeg2000 driver
Date: 02 ?????? 2011 20:40

This sounds like a driver specific problem. Do you have some test data to reproduce this?

Best regards,

Tamas



2011/11/2 Livneh Yehiyam <yehil@rafael.co.il<mailto:yehil@rafael.co.il>>
Hi
I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
I'm working on windows7 64 bit with gdal source version 1.8.1

I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal with the driver enabled. I'm using the c# binding.

I can open the dataset, and everything looks ok (size, number of overviews, band count etc.).
When I read data from one of the bands at the base resolution (lets say it is 512x512) I get the correct data.
Band mainBand = dataset.GetRasterBand(1);
mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);

If I get one of the overview bands:
Band overviewBand = mainBand.GetOverview(0);

And I try to read the entire band (lets say it is 256x256):
overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
What I get in the buffer are the first 256x256 pixels of the mainBand.
This is contrary to the behavior I'm used to get when reading GTiff files, or even JPEG2000 with the JP2ECW driver.

Is this behavior by design, or is there another way to achieve what I want.

Thanks
Yehiyam

________________________________
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf@rafael.co.il<mailto:lawraf@rafael.co.il> and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
________________________________

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/0d732dd6/attachment-0001.html
From russo at bogodyn.org  Wed Nov  2 15:05:40 2011
From: russo at bogodyn.org (Tom Russo)
Date: Thu Nov  3 05:45:31 2011
Subject: [gdal-dev] Re: Question about Reprojecting a Shapefile
In-Reply-To: <20111103092342.DB944E008ED@lists.osgeo.org>
References: <20111103092342.DB944E008ED@lists.osgeo.org>
Message-ID: <20111102190540.GA83411@bogodyn.org>

On Thu, Nov 03, 2011 at 05:23:42AM -0400, we recorded a bogon-computron collision of the <gdal-dev-request@lists.osgeo.org> flavor, containing:
> 
> Message: 1
> Date: Wed, 2 Nov 2011 17:33:40 +0000
> From: katrin eggert <katrineggert1980@gmail.com>
> Subject: [gdal-dev] Question about Reprojecting a Shapefile
> To: gdal-dev@lists.osgeo.org
> Message-ID:
> 	<CAGR7mtBL2qa7my3NassZvKfiaUNK63PkkSf6XkDUiKicBrZOGQ@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
> 
> Hi I'm trying to reprojec a shapefile using
> ogr2ogr -f "esri Shapefile" -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
> but I get this error:
> FAILURE:
> Unable to open datasource `reproj_parcel.shp' with the following drivers.
> 
> with:
> ogr2ogr -t_srs EPSG:32736 Areas_.shp reproj_parcel.shp
> I also get the same error.
> Any tip on what am I doing wrong? (it seems to be a pretty simple thing to
> do)


Try: 
ogr2ogr -t_srs EPSG:32736 reproj_parcel.shp Areas_.shp

A somewhat counter-intuitive tidbit about ogr2ogr is that it takes the
destination file as the FIRST argument and the source as second, unlike 
other GDAL tools or most *nix tools.

As ogr2ogr will tell you without any arguments:
Usage: ogr2ogr [--help-general] [-skipfailures] [-append] [-update]
               [-select field_list] [-where restricted_where]
               [-progress] [-sql <sql statement>] [-dialect dialect]
               [-preserve_fid] [-fid FID]
               [-spat xmin ymin xmax ymax]
               [-a_srs srs_def] [-t_srs srs_def] [-s_srs srs_def]
               [-f format_name] [-overwrite] [[-dsco NAME=VALUE] ...]
               dst_datasource_name src_datasource_name
               ^^^                 ^^^
               [-lco NAME=VALUE] [-nln name] [-nlt type] [layer [layer ...]]


This has bitten me from time to time, since 
"programname sourcefile destinationfile" trips off the fingers so lightly.

-- 
Tom Russo    KM5VY   SAR502   DM64ux          http://www.swcp.com/~russo/
Tijeras, NM  QRPL#1592 K2#398  SOC#236        http://kevan.org/brain.cgi?DDTNM
 "One man alone can be pretty dumb sometimes, but for real bona fide
 stupidity, there ain't nothin' can beat teamwork." - Edward Abbey

From jukka.rahkonen at mmmtike.fi  Wed Nov  2 16:01:26 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Nov  3 06:30:56 2011
Subject: [gdal-dev] GML 3.2 conversion error with GDAL 1.8.1
Message-ID: <loom.20111102T205256-216@post.gmane.org>

Hi,

I tried to convert a GML file which contains polygon with ogr2ogr, version 1.8.1.
Conversion fails with a message ERROR 1: Unrecognised geometry type <role>.
ERROR 1: Invalid surfaceMember

Here is an example of the GML (Inspire Administration units feature type). Is
the error in the GML of in GDAL side?

<au:geometry>
<gml:MultiSurface gml:id="ms26118023" srsName="EPSG:3067">
<gml:surfaceMember xlink:role="main">
<gml:Surface gml:id="pg26128258">
<gml:patches>
<gml:PolygonPatch>
<gml:exterior>
<gml:LinearRing>
<gml:posList>6606081.581 222640.662 6628316.514 222476.706 6642057.967 
...truncated...

221108.392 6646423.430 221041.479 6647117.697 220861.647 6647572.778 220157.320 
6642262.002 265381.743 6616098.198 255142.309 6615849.108 253746.902 6606209.473
239601.928 6606081.581 222640.662</gml:posList>
</gml:LinearRing>
</gml:exterior>
</gml:PolygonPatch>
</gml:patches>
</gml:Surface>
</gml:surfaceMember>
</gml:MultiSurface>
</au:geometry>

-Jukka Rahkonen-

From chaitanya.ch at gmail.com  Wed Nov  2 22:42:39 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov  3 13:34:06 2011
Subject: [gdal-dev] Extract centroids
In-Reply-To: <CAGR7mtBC3j40++taE-BpSna7eLc53vmHbTVO2T008pDP7p4PHw@mail.gmail.com>
References: <CAGR7mtDpZoSJdrBm0gdyOrBYFFPWHpO_34FstN1X3ivrJHb=ug@mail.gmail.com>
	<CAMKgpOYDq3Fzy_4M55L89J=7BaQEo3=WYf0wXpGUt9BdRxFDmA@mail.gmail.com>
	<CAGR7mtBC3j40++taE-BpSna7eLc53vmHbTVO2T008pDP7p4PHw@mail.gmail.com>
Message-ID: <CAMKgpOYTgvRVZC6e4JWmw_nXzC9=mSPW=QrY+u2cjCQRb2zF2Q@mail.gmail.com>

That's exactly what I meant. None of the prebuilt utilities do that.
You should try other desktop GIS programs like QGIS.

On Thu, Nov 3, 2011 at 12:12 AM, katrin eggert
<katrineggert1980@gmail.com>wrote:

> Hi (again ! :) )
> Ok you mean developing a function and use OGR library right? so none of
> the pre-built functions (e.g. ogr2ogr) is able to do that ?
> THanks
> Kat
>
>
> 2011/11/2 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> katrin,
>>
>> You can programatically extract the centroids. You can use the
>> OGR_G_Centroid() function on the geometry.
>>
>> On Thu, Nov 3, 2011 at 12:06 AM, katrin eggert <
>> katrineggert1980@gmail.com> wrote:
>>
>>> Greetings
>>> Just one question: I tried to find in Google if GDAL could be used to
>>> extract polygons centroids. But I was not able to find anything. Is it
>>> possible?
>>> Kat
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/c789ee6c/attachment.html
From chaitanya.ch at gmail.com  Wed Nov  2 22:57:39 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov  3 13:49:59 2011
Subject: [gdal-dev] GML 3.2 conversion error with GDAL 1.8.1
In-Reply-To: <loom.20111102T205256-216@post.gmane.org>
References: <loom.20111102T205256-216@post.gmane.org>
Message-ID: <CAMKgpOaNADcCPZ-YvdGWTTKajAE5xo+BUaOk5REY=O3oe+cL7Q@mail.gmail.com>

Hi,

OGR doesn't handle the role element. It should have just skipped it. I'm
looking into it.

On Thu, Nov 3, 2011 at 1:31 AM, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>wrote:

> Hi,
>
> I tried to convert a GML file which contains polygon with ogr2ogr, version
> 1.8.1.
> Conversion fails with a message ERROR 1: Unrecognised geometry type <role>.
> ERROR 1: Invalid surfaceMember
>
> Here is an example of the GML (Inspire Administration units feature type).
> Is
> the error in the GML of in GDAL side?
>
> <au:geometry>
> <gml:MultiSurface gml:id="ms26118023" srsName="EPSG:3067">
> <gml:surfaceMember xlink:role="main">
> <gml:Surface gml:id="pg26128258">
> <gml:patches>
> <gml:PolygonPatch>
> <gml:exterior>
> <gml:LinearRing>
> <gml:posList>6606081.581 222640.662 6628316.514 222476.706 6642057.967
> ...truncated...
>
> 221108.392 6646423.430 221041.479 6647117.697 220861.647 6647572.778
> 220157.320
> 6642262.002 265381.743 6616098.198 255142.309 6615849.108 253746.902
> 6606209.473
> 239601.928 6606081.581 222640.662</gml:posList>
> </gml:LinearRing>
> </gml:exterior>
> </gml:PolygonPatch>
> </gml:patches>
> </gml:Surface>
> </gml:surfaceMember>
> </gml:MultiSurface>
> </au:geometry>
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/fe65670c/attachment.html
From aashishcy at gmail.com  Wed Nov  2 23:11:45 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Thu Nov  3 14:04:43 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
	<CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>
Message-ID: <CAGeT8ynrdjrw_nN4BATCeJQyi1XwpHqfmEKmGKaew7SLsUK4dw@mail.gmail.com>

Great. I'd love to receive critique of the proposed approach.

> There must be some weakness of it :-)
>
> >  I just wanted to add one or two points. How
> > can I get write permissions for the Wiki?
>
> As Etienne pointed, you need OSGeo User ID
>

I created the ID and I was able to login! .. so first step is done.


>
> > Also as far as dependencies of GDAL driver's  are concerned,  we can
> > probably manage them using CMake superbuild support.
>
> I have never heard of CMake superbuild support.
> Where can I learn more?
>

This is a very good question. Actually I realized that not much information
is posted on the cmake documentation. I will talk to CMake lead and find
some good reference. There are projects out there (like ParaView) that uses
superbuild but I will see if I can post a simple example of it. I have been
using this feature now for a about year or so.

>
> > Also I wanted to point out that, I had started cmake port of gdal last
> year
> > which is based on your work:
> > https://gitorious.org/cmake-gdal
>
> I see. I have seen this repo and I was wondering what is this about.
>

Now you know -:) Actually we have been using this port for a different
project. I know that 2-3 people contacted me and now using it as well.


>
> The cmake-gdal that used to be hosted at Google Code was a good proof
> of concept,
> but I wasn't particularly happy about structure of the configuration.
> So, I wanted to find out how to make it more manageable - this is
> important property
> of build configuration of large project. GDAL is large.
> So, I went out and looked for examples. I found Boost CMake
> (http://gitorious.org/boost/cmake)
> I analysed their CMake configuration and code and I replicated the
> ideas I'd found
> most interesting for my purpose.
> That's how I came up with the configuration of SOCI.
>

Sure, we have been using this port of boost for some of our big projects.

>
> By the way, I'm not sure I remember correctly, but Kitware seem to be
> interested in supporting
> CMake for Boost in frame of Ryppl project
> ("In a recent meeting between Ryppl developers and Kitware (...)"
> http://ryppl.org/milestones/ )
>
> Yes, boost developers visited Kitware I believe last year.

Said that, what would be our next step? Should we start from scratch? I
would like to get it started as soon as possible.

Thanks



> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111102/c9aeb3ed/attachment.html
From Jukka.Rahkonen at mmmtike.fi  Thu Nov  3 01:04:29 2011
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Thu Nov  3 16:17:51 2011
Subject: [gdal-dev] GML 3.2 conversion error with GDAL 1.8.1
In-Reply-To: <CAMKgpOaNADcCPZ-YvdGWTTKajAE5xo+BUaOk5REY=O3oe+cL7Q@mail.gmail.com>
References: <loom.20111102T205256-216@post.gmane.org>,
	<CAMKgpOaNADcCPZ-YvdGWTTKajAE5xo+BUaOk5REY=O3oe+cL7Q@mail.gmail.com>
Message-ID: <84446DEF76453C439E9E97E438E13A6303A2AC@suutari.haapa.mmm.fi>

Thanks,

You can find the data here
http://latuviitta.org/documents/inspire_au.xml
http://latuviitta.org/documents/inspire_au.xsd

There are two layers
1: AdministrativeUnit
2: AdministrativeBoundary (Line String)

Ogr2ogr converts the latter one but does not find any geometries from the AdministrativeUnit

-Jukka Rahkonen-

Chaitanya kumar wrote:

Hi,

OGR doesn't handle the role element. It should have just skipped it. I'm looking into it.

On Thu, Nov 3, 2011 at 1:31 AM, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi<mailto:jukka.rahkonen@mmmtike.fi>> wrote:
Hi,

I tried to convert a GML file which contains polygon with ogr2ogr, version 1.8.1.
Conversion fails with a message ERROR 1: Unrecognised geometry type <role>.
ERROR 1: Invalid surfaceMember

Here is an example of the GML (Inspire Administration units feature type). Is
the error in the GML of in GDAL side?

<au:geometry>
<gml:MultiSurface gml:id="ms26118023" srsName="EPSG:3067">
<gml:surfaceMember xlink:role="main">
<gml:Surface gml:id="pg26128258">
<gml:patches>
<gml:PolygonPatch>
<gml:exterior>
<gml:LinearRing>
<gml:posList>6606081.581 222640.662 6628316.514 222476.706 6642057.967
...truncated...

221108.392 6646423.430 221041.479 6647117.697 220861.647 6647572.778 220157.320
6642262.002 265381.743 6616098.198 255142.309 6615849.108 253746.902 6606209.473
239601.928 6606081.581 222640.662</gml:posList>
</gml:LinearRing>
</gml:exterior>
</gml:PolygonPatch>
</gml:patches>
</gml:Surface>
</gml:surfaceMember>
</gml:MultiSurface>
</au:geometry>

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
From tappenbeck at widemann.de  Thu Nov  3 05:45:05 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Thu Nov  3 20:59:55 2011
Subject: [gdal-dev] to make black triangle transparent (gdalwarp)
Message-ID: <4EB262A1.7030705@widemann.de>



    hi !

i had transform some tif-files by epsg-code so the images will rotate 
and at the border now some black triangles.

now i want to merge by gdalwarp and i use following command with the 
dstalpha-option:

C:\Program Files (x86)\FWTools2.4.7>gdalwarp 
-dstalpha[Path]\geotiff\trans_a.tif [Path]OP\geotiff\t
rans_b.tif [Path]OP\geotiff\TEST.tif
Creating output file that is 20382P x 10788L.
Processing input file [Path]OP\geotiff\trans_a.tif.

0...10...20...30...40...50...60...70...80...90...100 - done.
Processing input file [Path]OP\geotiff\trans_b.tif.

0...10...20...30...40...50...60...70...80...90...100 - done.


here are some image-information:

C:\Program Files (x86)\FWTools2.4.7>gdalinfo [Path]
OP\geotiff\trans_a.tif
Driver: GTiff/GeoTIFF
Files: [Path]OP\geotiff\trans_a.tif
Size is 10390, 10390
Coordinate System is:
PROJCS["DHDN / 3-degree Gauss-Kruger zone 2",
     GEOGCS["DHDN",
         DATUM["Deutsches_Hauptdreiecksnetz",
             SPHEROID["Bessel 1841",6377397.155,299.1528128000009,
                 AUTHORITY["EPSG","7004"]],
             AUTHORITY["EPSG","6314"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4314"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",6],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",2500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","31466"]]
Origin = (2601576.178792405400000,5477422.986974134100000)
Pixel Size = (0.200049845331526,-0.200049845331526)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 2601576.179, 5477422.987) (  7d24'1.33"E, 49d25'34.75"N)
Lower Left  ( 2601576.179, 5475344.469) (  7d23'59.41"E, 49d24'27.48"N)
Upper Right ( 2603654.697, 5477422.987) (  7d25'44.45"E, 49d25'33.49"N)
Lower Right ( 2603654.697, 5475344.469) (  7d25'42.50"E, 49d24'26.22"N)
Center      ( 2602615.438, 5476383.728) (  7d24'51.92"E, 49d25'0.49"N)
Band 1 Block=10390x1 Type=Byte, ColorInterp=Red
Band 2 Block=10390x1 Type=Byte, ColorInterp=Green
Band 3 Block=10390x1 Type=Byte, ColorInterp=Blue

could someone tell me how to make the black triangel transparenzy ?

when i move the mousemarker over the black triangle in the OpenEV-Viewer 
in the statusline 0,0,0 will show.

regards Jan :-)

FWTools2.4.7 in use by win7

From jrepetto at free.fr  Thu Nov  3 05:55:59 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Nov  3 21:11:00 2011
Subject: [gdal-dev] to make black triangle transparent (gdalwarp)
In-Reply-To: <4EB262A1.7030705@widemann.de>
References: <4EB262A1.7030705@widemann.de>
Message-ID: <4EB2652F.9010009@free.fr>

Le 03/11/2011 10:45, Jan Tappenbeck a ?crit :
>
> i had transform some tif-files by epsg-code so the images will rotate
> and at the border now some black triangles.
>
> now i want to merge by gdalwarp

Hi,
Wouldn't it be easier to merge the maps before warping ?

Jean-Claude
From tappenbeck at widemann.de  Thu Nov  3 06:23:57 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Thu Nov  3 21:41:02 2011
Subject: [gdal-dev] probles by ecw-convert (gdal_translate and expand)
Message-ID: <4EB26BBD.7050002@widemann.de>



hi !

i had cit-files (microstation) to convert into ecw.

in the first step i transform into tiff by:

gdal_translate -of GTiff  image.cit image.tif

if i get the image-properties by gdalinfo i get following:

C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
"D:\Duelmen\Musterdaten\g8744-1.tif
"
Driver: GTiff/GeoTIFF
Files: [pATH]\g8744-1.tif
Size is 16002, 8619
Coordinate System is `'
Origin = (-947485262.477377770000000,-1221704414.522622100000000)
Pixel Size = (3224.954755655543500,-3224.954755655543500)
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-947485262.477,-1221704414.523)
Lower Left  (-947485262.477,-1249500299.562)
Upper Right (-895879536.477,-1221704414.523)
Lower Right (-895879536.477,-1249500299.562)
Center      (-921682399.477,-1235602357.042)
Band 1 Block=16002x1 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 255,255,255,255
     1: 0,0,0,255
       ....
   255: 0,0,0,255

   the image in preview is ok !

   now i convert into ecw by:

   gdal_translate -of ECW image.tif image.ecw

   after start the command i get the information:

   Input file size is 16002, 8619
Warning 6: ECW driver ignores color table. The source raster band will 
be consid
ered as grey level.
Consider using color table expansion (-expand option in gdal_translate)

0...10...20...30...40...50...60...70...80...90...100 - done.

   but now  !  the image is only BLACK !!!!

   can andyone tell me how the command had to be for
   "Consider using color table expansion (-expand option in 
gdal_translate)" ???

   regards Jan :-)

From jean-charles.quillet at alyotech.fr  Thu Nov  3 06:30:36 2011
From: jean-charles.quillet at alyotech.fr (QUILLET Jean-Charles)
Date: Thu Nov  3 21:49:05 2011
Subject: [gdal-dev] Debug/Release configuration on Visual
Message-ID: <06A7AD4E92172446ADDEB44F8A5D5C1025633EF807@ARE01.alyotech.fr>

Hi,

I'm working on an application linked against GDAL on Visual Studio 9. Everything is working fine in release mode. But in debug mode, gdal fails to load the proj4 library and the VRF driver from OGDI. Indeed, these are compiled in release mode.

For proj4, the easy way out would be to link it statically to GDAL, I did not try this but I've found the option in the config file of the compilation. But for OGDI I've completely no idea.

Does anyone has an idea to get out of this issue ? How do you do to debug your application on windows ?
Thanks for any idea/hint,

Jean-Charles

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/8670dbca/attachment.html
From chaitanya.ch at gmail.com  Thu Nov  3 06:49:24 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov  3 22:07:36 2011
Subject: [gdal-dev] to make black triangle transparent (gdalwarp)
In-Reply-To: <4EB262A1.7030705@widemann.de>
References: <4EB262A1.7030705@widemann.de>
Message-ID: <CAMKgpOajTw6xJqQ5RFs+Gy4FzWOhDTkz45+2LPvqP4fVt6omfw@mail.gmail.com>

Jan,

The -dstalpha option should have created the alpha band. Check the gdalinfo
output of the destination file TEST.tif

On Thu, Nov 3, 2011 at 3:15 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>   hi !
>
> i had transform some tif-files by epsg-code so the images will rotate and
> at the border now some black triangles.
>
> now i want to merge by gdalwarp and i use following command with the
> dstalpha-option:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -dstalpha[Path]\geotiff\trans_
> **a.tif [Path]OP\geotiff\t
> rans_b.tif [Path]OP\geotiff\TEST.tif
> Creating output file that is 20382P x 10788L.
> Processing input file [Path]OP\geotiff\trans_a.tif.
>
> 0...10...20...30...40...50...**60...70...80...90...100 - done.
> Processing input file [Path]OP\geotiff\trans_b.tif.
>
> 0...10...20...30...40...50...**60...70...80...90...100 - done.
>
>
> here are some image-information:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo [Path]
> OP\geotiff\trans_a.tif
> Driver: GTiff/GeoTIFF
> Files: [Path]OP\geotiff\trans_a.tif
> Size is 10390, 10390
> Coordinate System is:
> PROJCS["DHDN / 3-degree Gauss-Kruger zone 2",
>    GEOGCS["DHDN",
>        DATUM["Deutsches_**Hauptdreiecksnetz",
>            SPHEROID["Bessel 1841",6377397.155,299.**1528128000009,
>                AUTHORITY["EPSG","7004"]],
>            AUTHORITY["EPSG","6314"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.**0174532925199433],
>        AUTHORITY["EPSG","4314"]],
>    PROJECTION["Transverse_**Mercator"],
>    PARAMETER["latitude_of_origin"**,0],
>    PARAMETER["central_meridian",**6],
>    PARAMETER["scale_factor",1],
>    PARAMETER["false_easting",**2500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","31466"]]
> Origin = (2601576.178792405400000,**5477422.986974134100000)
> Pixel Size = (0.200049845331526,-0.**200049845331526)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 2601576.179, 5477422.987) (  7d24'1.33"E, 49d25'34.75"N)
> Lower Left  ( 2601576.179, 5475344.469) (  7d23'59.41"E, 49d24'27.48"N)
> Upper Right ( 2603654.697, 5477422.987) (  7d25'44.45"E, 49d25'33.49"N)
> Lower Right ( 2603654.697, 5475344.469) (  7d25'42.50"E, 49d24'26.22"N)
> Center      ( 2602615.438, 5476383.728) (  7d24'51.92"E, 49d25'0.49"N)
> Band 1 Block=10390x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10390x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10390x1 Type=Byte, ColorInterp=Blue
>
> could someone tell me how to make the black triangel transparenzy ?
>
> when i move the mousemarker over the black triangle in the OpenEV-Viewer
> in the statusline 0,0,0 will show.
>
> regards Jan :-)
>
> FWTools2.4.7 in use by win7
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/3533ff9f/attachment.html
From jrepetto at free.fr  Thu Nov  3 07:11:58 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Nov  3 22:31:15 2011
Subject: [gdal-dev] probles by ecw-convert (gdal_translate and expand)
In-Reply-To: <4EB26BBD.7050002@widemann.de>
References: <4EB26BBD.7050002@widemann.de>
Message-ID: <4EB276FE.5020703@free.fr>

Le 03/11/2011 11:23, Jan Tappenbeck a ?crit :

> can andyone tell me how the command had to be for
> "Consider using color table expansion (-expand option in
> gdal_translate)" ???
>

This is explained in the documentation :
http://www.gdal.org/gdal_translate.html

In your case, I think you'll have to use "-expand rgb" .

BTW, if you need to obtain a georeferenced file, don't forget to use the 
"-co DATUM=..." and "-co PROJ=..." options.

Jean-Claude
From Michael.Smith at usace.army.mil  Thu Nov  3 07:33:33 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Nov  3 22:55:21 2011
Subject: [gdal-dev] Extract centroids
In-Reply-To: <CAMKgpOYTgvRVZC6e4JWmw_nXzC9=mSPW=QrY+u2cjCQRb2zF2Q@mail.gmail.com>
Message-ID: <CAD7F3EC.18D7B%michael.smith@usace.army.mil>

This may not be the simplest way but you could use mapserver to draw the polygon layer as a point layer (at the centroids) and then use the wfs export format capability to export back to shapefile.

Mike

--
Michael Smith
US Army Corps
Remote Sensing GIS/Center

From: Chaitanya kumar CH <chaitanya.ch@gmail.com<mailto:chaitanya.ch@gmail.com>>
Date: Thu, 3 Nov 2011 08:12:39 +0530
To: katrin eggert <katrineggert1980@gmail.com<mailto:katrineggert1980@gmail.com>>
Cc: gdal dev <gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>>
Subject: Re: [gdal-dev] Extract centroids

That's exactly what I meant. None of the prebuilt utilities do that.
You should try other desktop GIS programs like QGIS.

On Thu, Nov 3, 2011 at 12:12 AM, katrin eggert <katrineggert1980@gmail.com<mailto:katrineggert1980@gmail.com>> wrote:
Hi (again ! :) )
Ok you mean developing a function and use OGR library right? so none of the pre-built functions (e.g. ogr2ogr) is able to do that ?
THanks
Kat


2011/11/2 Chaitanya kumar CH <chaitanya.ch@gmail.com<mailto:chaitanya.ch@gmail.com>>
katrin,

You can programatically extract the centroids. You can use the OGR_G_Centroid() function on the geometry.

On Thu, Nov 3, 2011 at 12:06 AM, katrin eggert <katrineggert1980@gmail.com<mailto:katrineggert1980@gmail.com>> wrote:
Greetings
Just one question: I tried to find in Google if GDAL could be used to extract polygons centroids. But I was not able to find anything. Is it possible?
Kat

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584<tel:%2B91-9494447584>
17.2416N 80.1426E




--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
_______________________________________________ gdal-dev mailing list gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/f4b4d1d8/attachment.html
From mateusz at loskot.net  Thu Nov  3 08:16:12 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Nov  3 23:39:19 2011
Subject: [gdal-dev] Debug/Release configuration on Visual
In-Reply-To: <06A7AD4E92172446ADDEB44F8A5D5C1025633EF807@ARE01.alyotech.fr>
References: <06A7AD4E92172446ADDEB44F8A5D5C1025633EF807@ARE01.alyotech.fr>
Message-ID: <CABUeae_fg7pBy_Xex5m0Ta3X=V0WM2iJudbHh+my4CpVvtGO1g@mail.gmail.com>

On 3 November 2011 10:30, QUILLET Jean-Charles
<jean-charles.quillet@alyotech.fr> wrote:
> I'm working on an application linked against GDAL on Visual Studio 9.
> Everything is working fine in release mode. But in debug mode, gdal fails

What GDAL binaries do you use in Debug mode?
I suppose I know what is going on (/MD vs /MDd).
I have documented potential issue here:
http://trac.osgeo.org/gdal/ticket/3346

Check if it applies to your case.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From giohappy at gmail.com  Thu Nov  3 08:29:26 2011
From: giohappy at gmail.com (G. Allegri)
Date: Thu Nov  3 23:53:23 2011
Subject: [gdal-dev] Debug/Release configuration on Visual
Message-ID: <CAB4g1=wzA5XY0Sh6gjTGbA1SV64AVa+k+syMm+YMkm=iRDjjFQ@mail.gmail.com>

I find very useful, for common debugging of C++ apps, to build in Release
mode (/MD) but with debugging infos (/Zi) and removing optimization (/Od).
With this flags I'm able to debug my app but I don't need to link against
Debug libraries.

giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/ef6de157/attachment.html
From giohappy at gmail.com  Thu Nov  3 09:49:17 2011
From: giohappy at gmail.com (G. Allegri)
Date: Fri Nov  4 01:17:37 2011
Subject: [gdal-dev] Debug/Release configuration on Visual
In-Reply-To: <06A7AD4E92172446ADDEB44F8A5D5C1025633EF809@ARE01.alyotech.fr>
References: <CAB4g1=wzA5XY0Sh6gjTGbA1SV64AVa+k+syMm+YMkm=iRDjjFQ@mail.gmail.com>
	<06A7AD4E92172446ADDEB44F8A5D5C1025633EF809@ARE01.alyotech.fr>
Message-ID: <CAB4g1=wUyWOkkm3oT8Eh5zHQn_QJ-L20=cLOToZvk0WBsPnDqA@mail.gmail.com>

I don't know exactly what the Debug build does, but AFAIK it incorporates
the symbolic debug information inside the compiled object, layouts a
different assembly, and links against the debug runtime, but from the point
of view of common debugging (breakpoints, inspecting properties, etc.) I
don't see differences with a Release + debug informations (which I suppose
is made available thorugh the .pdb files).

giovanni

2011/11/3 QUILLET Jean-Charles <jean-charles.quillet@alyotech.fr>

>   *De la part de* G. Allegri
> *Envoy? :* jeudi 3 novembre 2011 13:29
>
> ****
>
> I find very useful, for common debugging of C++ apps, to build in Release
> mode (/MD) but with debugging infos (/Zi) and removing optimization (/Od).
> With this flags I'm able to debug my app but I don't need to link against
> Debug libraries.****
>
> ** **
>
> That's very interesting. That would be the way to go for me. It didn't
> know this was possible. I'll try this out. ****
>
> Thanks for the hint ! ****
>
> ** **
>
> What the point of using this debug mode then: I mean this flag /MDd ?****
>
> ** **
>
> Jean-Charles****
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/c5790a19/attachment.html
From m.canty at fz-juelich.de  Thu Nov  3 10:29:27 2011
From: m.canty at fz-juelich.de (Mort Canty)
Date: Fri Nov  4 02:07:26 2011
Subject: [gdal-dev] Problem with rotated satellite images
Message-ID: <4EB2A547.2070907@fz-juelich.de>

Hi everyone,

I've started using the Python GDAL package to convert raster images in
ENVI format to GeoTIFF, ERDAS Imagine, PCI Geomatics and other formats.
My imagery is UTM,  WGS-84 and path-oriented, i.e., rotated away from
north-up. I find that, after conversion with GDAL, the rotation is
always lost and the images are incorrectly oriented north-up. I'm using
the CreateCopy method in Python to do the conversion, e.g.,

imgDataset = driver.CreateCopy(img.name, enviDataset)

Can anyone help?

Sorry if this is a known issue. I'm new here and haven't figured out how
to search the archive.

Thanks,

Mort

------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------
Forschungszentrum Juelich GmbH
52425 Juelich
Sitz der Gesellschaft: Juelich
Eingetragen im Handelsregister des Amtsgerichts Dueren Nr. HR B 3498
Vorsitzender des Aufsichtsrats: MinDirig Dr. Karl Eugen Huthmacher
Geschaeftsfuehrung: Prof. Dr. Achim Bachem (Vorsitzender),
Karsten Beneke (stellv. Vorsitzender), Prof. Dr.-Ing. Harald Bolt,
Prof. Dr. Sebastian M. Schmidt
------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------
From obe at IVV-AACHEN.DE  Thu Nov  3 10:48:43 2011
From: obe at IVV-AACHEN.DE (Felix Obermaier)
Date: Fri Nov  4 02:25:33 2011
Subject: [gdal-dev] NuGet package for GDAL C# bindings
Message-ID: <941E09AD62CA6F41913924A35EA3985E12C4189A69@ivv-mx.ivv-aachen.de>

Hello,

are there any plans to supply a NuGet (www.nuget.org) package for the C# Bindings?
Or is there an interest in me setting one up?

Thanks

Felix Obermaier

------------------------------------------
Ingenieurgruppe IVV GmbH & Co. KG
Dipl.-Ing. Felix Obermaier
Oppenhoffallee 171
52066 Aachen

Telefon: +49 (241) 94691-39
Telefax: +49 (241) 531622
eMail: obe@ivv-aachen.de
Internet: http://www.ivv-aachen.de

Sitz der Gesellschaft: Aachen
Amtsgericht Aachen HRA 6212
GF: Bauassessor Dr.-Ing. Dieter H?lsken? IVV-Management GmbH? Amtsgericht Aachen HRB 12453

From jukka.rahkonen at mmmtike.fi  Thu Nov  3 11:21:21 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Nov  4 02:54:51 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
Message-ID: <loom.20111103T161502-820@post.gmane.org>

Hi,

I am getting tired with GML3 and Northing/Easting coordinate order. There seems
to be just two kind of GML3 available: either it is Easting/Northing but it
should be Northing/Easting, or another way round.

Is there already some hidden switch in ogr2ogr for changing the x and y
coordinate order?

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Thu Nov  3 11:31:30 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Nov  4 03:05:29 2011
Subject: [gdal-dev] Re: to make black triangle transparent (gdalwarp)
References: <4EB262A1.7030705@widemann.de> <4EB2652F.9010009@free.fr>
Message-ID: <loom.20111103T162332-439@post.gmane.org>

Jean-Claude Repetto <jrepetto <at> free.fr> writes:

> 
> Le 03/11/2011 10:45, Jan Tappenbeck a ?crit :
> >
> > i had transform some tif-files by epsg-code so the images will rotate
> > and at the border now some black triangles.
> >
> > now i want to merge by gdalwarp
> 
> Hi,
> Wouldn't it be easier to merge the maps before warping ?

Alternative for alpha is to use nodata value with -dstnodata. At least ddal
based programs will recognise the nodata value and make it transparent.
Mapserver will handle the case if mapfile contains a row OFFSITE. Sometimes
nodata can make also real data transparent, for example water bodies can be
totally black (0 0 0) in  aerial images. Something like totally blue seldomly
appears in real world images and nodata 0 0 255 should be safe. Test it before
use, a long time ago gdal had some bug and it did not support using different R
G B values for offsite but I believe it has been fixed some years ago.

-Jukka Rahkonen-



From szekerest at gmail.com  Thu Nov  3 11:47:21 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Nov  4 03:21:57 2011
Subject: [gdal-dev] NuGet package for GDAL C# bindings
In-Reply-To: <941E09AD62CA6F41913924A35EA3985E12C4189A69@ivv-mx.ivv-aachen.de>
References: <941E09AD62CA6F41913924A35EA3985E12C4189A69@ivv-mx.ivv-aachen.de>
Message-ID: <CACALY+SwXj-QPZ0ynTEYRejb8P1VZ-sT42rQqsKZMKTA7M8N3A@mail.gmail.com>

Felix,

Not sure I clearly understand the benefit, though it may be due to my lack
of knowledge in NuGet.
Is this just another way how to deploy the compiled binaries or something
to be incorporated in the GDAL build process?

Best regards,

Tamas



2011/11/3 Felix Obermaier <obe@ivv-aachen.de>

> Hello,
>
> are there any plans to supply a NuGet (www.nuget.org) package for the C#
> Bindings?
> Or is there an interest in me setting one up?
>
> Thanks
>
> Felix Obermaier
>
> ------------------------------------------
> Ingenieurgruppe IVV GmbH & Co. KG
> Dipl.-Ing. Felix Obermaier
> Oppenhoffallee 171
> 52066 Aachen
>
> Telefon: +49 (241) 94691-39
> Telefax: +49 (241) 531622
> eMail: obe@ivv-aachen.de
> Internet: http://www.ivv-aachen.de
>
> Sitz der Gesellschaft: Aachen
> Amtsgericht Aachen HRA 6212
> GF: Bauassessor Dr.-Ing. Dieter H?lsken  IVV-Management GmbH  Amtsgericht
> Aachen HRB 12453
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/847916da/attachment.html
From even.rouault at mines-paris.org  Thu Nov  3 11:50:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov  4 03:24:56 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <loom.20111103T161502-820@post.gmane.org>
References: <loom.20111103T161502-820@post.gmane.org>
Message-ID: <1320335401.4eb2b8292650a@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
> I am getting tired with GML3 and Northing/Easting coordinate order. There
> seems
> to be just two kind of GML3 available: either it is Easting/Northing but it
> should be Northing/Easting, or another way round.
>
> Is there already some hidden switch in ogr2ogr for changing the x and y
> coordinate order?

You're running into the coordinate order hell introduced with WFS 1.1 and WMS
1.3.0 ...

I'd not say that the config options are "hidden", because they are documented in
the "CRS support" section of http://gdal.org/ogr/drv_gml.html . Hopefully you'll
be able to make some sense of it I've re-read what I've written and I'm aware it
is not obvious to understand it ;-) The situation is really a hell. There are
different conventions and not GML producing software agree on what should be
done unfortunately. For example MapServer and GeoServer don't behave the same
how to write the SRS for WFS 1.1 GML. I had created a ticket in MapServer trac a
few months ago about that.

By the way, for the issue you reported yesterday about xlink:role, please file a
ticket.

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From ivan at sanchezortega.es  Thu Nov  3 11:53:43 2011
From: ivan at sanchezortega.es (=?iso-8859-1?q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Fri Nov  4 03:28:47 2011
Subject: [gdal-dev][OT] Ogr2ogr -flip_coordinates
In-Reply-To: <loom.20111103T161502-820@post.gmane.org>
References: <loom.20111103T161502-820@post.gmane.org>
Message-ID: <201111031653.43506.ivan@sanchezortega.es>

On Jueves, 3 de Noviembre de 2011 16:21:21 Jukka Rahkonen escribi?:
> I am getting tired with GML3 and Northing/Easting coordinate order. There
> seems to be just two kind of GML3 available: either it is Easting/Northing
> but it should be Northing/Easting, or another way round.
> 
> Is there already some hidden switch in ogr2ogr for changing the x and y
> coordinate order?

I bet GML3 is a plot of the evil Dr. Northing to conquer the world :-P

-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es> <ivan@geonerd.org>

From mateusz at loskot.net  Thu Nov  3 12:06:57 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 03:42:35 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <loom.20111103T161502-820@post.gmane.org>
References: <loom.20111103T161502-820@post.gmane.org>
Message-ID: <CABUeae8TsR1E+H3u_t=m0GP8pFcAPDoX993N7i-DJrFVjv_YqQ@mail.gmail.com>

On 3 November 2011 15:21, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> wrote:
> I am getting tired with GML3 and Northing/Easting coordinate order. There seems
> to be just two kind of GML3 available: either it is Easting/Northing but it
> should be Northing/Easting, or another way round.

Two kind? Keep counting.

Check the eyes-opening thread Axis Ordering in GML

http://lists.opengeospatial.org/pipermail/wfs-dev/2005-May/

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From Jukka.Rahkonen at mmmtike.fi  Thu Nov  3 14:07:55 2011
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri Nov  4 05:50:25 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <1320335401.4eb2b8292650a@imp.free.fr>
References: <loom.20111103T161502-820@post.gmane.org>,
	<1320335401.4eb2b8292650a@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6303A449@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

>> Hi,
>>
>> I am getting tired with GML3 and Northing/Easting coordinate order. There
>> seems
>> to be just two kind of GML3 available: either it is Easting/Northing but it
>> should be Northing/Easting, or another way round.
>>
>> Is there already some hidden switch in ogr2ogr for changing the x and y
>> coordinate order?

> You're running into the coordinate order hell introduced with WFS 1.1 and WMS
> 1.3.0 ...

> I'd not say that the config options are "hidden", because they are documented in
> the "CRS support" section of http://gdal.org/ogr/drv_gml.html . Hopefully you'll
> be able to make some sense of it I've re-read what I've written and I'm aware it
> is not obvious to understand it ;-) The situation is really a hell. There are
> different conventions and not GML producing software agree on what should be
> done unfortunately. For example MapServer and GeoServer don't behave the same
> how to write the SRS for WFS 1.1 GML. I had created a ticket in MapServer trac a
> few months ago about that.

But what can I do with this file
http://latuviitta.org/documents/inspire_au.xml with a schema
http://latuviitta.org/documents/inspire_au.xsd ?

It is in EPSG:3067 which in really an Easting-Northing system but the file has written as Northing-Easting as if it were EPSG:25835.  EPSG:3067 and 25835 are just the same ETRS89 / UTM zone 35N but the latter is officially Northing-Easting.

> By the way, for the issue you reported yesterday about xlink:role, please file a
> ticket.

 I'll do it.

-Jukka Rahkonen-
From even.rouault at mines-paris.org  Thu Nov  3 14:38:45 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov  4 06:23:08 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <84446DEF76453C439E9E97E438E13A6303A449@suutari.haapa.mmm.fi>
References: <loom.20111103T161502-820@post.gmane.org>
	<1320335401.4eb2b8292650a@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A6303A449@suutari.haapa.mmm.fi>
Message-ID: <201111031938.45813.even.rouault@mines-paris.org>

> But what can I do with this file
> http://latuviitta.org/documents/inspire_au.xml with a schema
> http://latuviitta.org/documents/inspire_au.xsd ?
> 
> It is in EPSG:3067 which in really an Easting-Northing system but the file
> has written as Northing-Easting as if it were EPSG:25835. 

I'm afraid you can do nothing (apart complaining at the producer). The content 
of the file is just not consistant with its declared CRS. There's often 
confusion when EPSG declares a CRS as being Northing-Easting or Latitude-
Longitude, but when EPSG declares it as Easting-Northing, there's no reason 
why you would put the coordinates in a different order !!!

> EPSG:3067 and
> 25835 are just the same ETRS89 / UTM zone 35N but the latter is officially
> Northing-Easting.

Hum, GDAL (as reported by "gdalsrsinfo EPSG:25835") sees both as Easting-
Northing ordered. What is your reference for EPSG:25835 being ordered as 
Northing-Easting ?

> 
> > By the way, for the issue you reported yesterday about xlink:role, please
> > file a ticket.
> 
>  I'll do it.
> 
> -Jukka Rahkonen-_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Thu Nov  3 16:03:12 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 07:51:57 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <CABUeae8TsR1E+H3u_t=m0GP8pFcAPDoX993N7i-DJrFVjv_YqQ@mail.gmail.com>
References: <loom.20111103T161502-820@post.gmane.org>
	<CABUeae8TsR1E+H3u_t=m0GP8pFcAPDoX993N7i-DJrFVjv_YqQ@mail.gmail.com>
Message-ID: <CABUeae8mq6c1LcwdMqPthQ=WcsGrpCpegVRWNaV05ZrFcWaFaw@mail.gmail.com>

2011/11/3 Mateusz ?oskot <mateusz@loskot.net>:
> On 3 November 2011 15:21, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> wrote:
>> I am getting tired with GML3 and Northing/Easting coordinate order. There seems
>> to be just two kind of GML3 available: either it is Easting/Northing but it
>> should be Northing/Easting, or another way round.
>
> Two kind? Keep counting.
>
> Check the eyes-opening thread Axis Ordering in GML
>
> http://lists.opengeospatial.org/pipermail/wfs-dev/2005-May/

For records, I have added "What Axis Order is used in GDAL/OGR?" to the FAQ

http://trac.osgeo.org/gdal/wiki/FAQCoordinateSystemsAndProjections

Feel free to extend.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From Jukka.Rahkonen at mmmtike.fi  Thu Nov  3 16:06:11 2011
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri Nov  4 07:55:04 2011
Subject: [gdal-dev] Ogr2ogr -flip_coordinates
In-Reply-To: <201111031938.45813.even.rouault@mines-paris.org>
References: <loom.20111103T161502-820@post.gmane.org>
	<1320335401.4eb2b8292650a@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A6303A449@suutari.haapa.mmm.fi>,
	<201111031938.45813.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>

Even Rouault wrote:

>> EPSG:3067 and
>> 25835 are just the same ETRS89 / UTM zone 35N but the latter is officially
>> Northing-Easting.

> Hum, GDAL (as reported by "gdalsrsinfo EPSG:25835") sees both as Easting-
> Northing ordered. What is your reference for EPSG:25835 being ordered as
> Northing-Easting ?

Right, EPSG:25835 is Easting-Northing. I was naturally meaning either EPSG:3047 or EPSG:5048 which are both Northing-Easting and presenting ETRS89 / UTM zone 35N. Very enjoyable.

-Jukka-
From jukka.rahkonen at mmmtike.fi  Thu Nov  3 16:21:11 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Nov  4 08:11:06 2011
Subject: [gdal-dev] Re: Ogr2ogr -flip_coordinates
References: <loom.20111103T161502-820@post.gmane.org>
	<1320335401.4eb2b8292650a@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A6303A449@suutari.haapa.mmm.fi>,
	<201111031938.45813.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>
Message-ID: <loom.20111103T211422-671@post.gmane.org>

Rahkonen Jukka <Jukka.Rahkonen <at> mmmtike.fi> writes:

> 
> Even Rouault wrote:
> 
> >> EPSG:3067 and
> >> 25835 are just the same ETRS89 / UTM zone 35N but the latter is officially
> >> Northing-Easting.
> 
> > Hum, GDAL (as reported by "gdalsrsinfo EPSG:25835") sees both as Easting-
> > Northing ordered. What is your reference for EPSG:25835 being ordered as
> > Northing-Easting ?
> 
> Right, EPSG:25835 is Easting-Northing. I was naturally meaning either
EPSG:3047 or EPSG:5048 which are
> both Northing-Easting and presenting ETRS89 / UTM zone 35N. Very enjoyable.

I already thought that I could get a valid shapefile with ogr2ogr by replacing
EPSG:3067 with EPSG:3047 everywhere in the XML document. However, ogr2ogr was
creating a similar flipped shapefile. Is this a gdal bug?  EPSG:3047 is
definitely Northing-Easting
 http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3047&reportDetail=short&style=urn:uuid:report-style:default-with-urn&style_name=OGP%20Default%20With%20Urn&title=3047
Gdal 1.8.1 does not know EPSG:5048 yet.

-Jukka-

From even.rouault at mines-paris.org  Thu Nov  3 16:28:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov  4 08:19:06 2011
Subject: [gdal-dev] Re: Ogr2ogr -flip_coordinates
In-Reply-To: <loom.20111103T211422-671@post.gmane.org>
References: <loom.20111103T161502-820@post.gmane.org>
	<84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>
	<loom.20111103T211422-671@post.gmane.org>
Message-ID: <201111032128.54880.even.rouault@mines-paris.org>


> I already thought that I could get a valid shapefile with ogr2ogr by
> replacing EPSG:3067 with EPSG:3047 everywhere in the XML document.
> However, ogr2ogr was creating a similar flipped shapefile. Is this a gdal
> bug?  EPSG:3047 is definitely Northing-Easting

The EPSG:XXXX notation is ambiguous : we don't know if it means that the EPSG 
axis convention must be applied or not, because it was the notation that was 
used before OGC "clarifications" on EPSG axis ordering.

To have unambiguous SRS naming, use rather urn:ogc:def:crs:EPSG::3047 which 
really means "use EPSG axis ordering" . Unfortunately I think it won't work 
with the OGR GML driver because the EPSGTreatsAsLatLong() method in OSR is 
only desinged to work with geographic SRS, and not projected ones :-( Would be 
worth filing a ticket I guess


> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Thu Nov  3 16:38:53 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Nov  4 08:29:36 2011
Subject: [gdal-dev] Re: Ogr2ogr -flip_coordinates
References: <loom.20111103T161502-820@post.gmane.org>
	<84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>
	<loom.20111103T211422-671@post.gmane.org>
	<201111032128.54880.even.rouault@mines-paris.org>
Message-ID: <loom.20111103T213135-171@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> 
> > I already thought that I could get a valid shapefile with ogr2ogr by
> > replacing EPSG:3067 with EPSG:3047 everywhere in the XML document.
> > However, ogr2ogr was creating a similar flipped shapefile. Is this a gdal
> > bug?  EPSG:3047 is definitely Northing-Easting
> 
> The EPSG:XXXX notation is ambiguous : we don't know if it means that the EPSG 
> axis convention must be applied or not, because it was the notation that was 
> used before OGC "clarifications" on EPSG axis ordering.
> 
> To have unambiguous SRS naming, use rather urn:ogc:def:crs:EPSG::3047 which 
> really means "use EPSG axis ordering" . Unfortunately I think it won't work 
> with the OGR GML driver because the EPSGTreatsAsLatLong() method in OSR is 
> only desinged to work with geographic SRS, and not projected ones  Would be 
> worth filing a ticket I guess

All right. Thereafter I will try if I can just turn the coordinates from these 
<gml:lowerCorner>6605838.360 61685.735</gml:lowerCorner>
into these 
<gml:lowerCorner>61685.735 6605838.360</gml:lowerCorner>
in the whole xml file with awk or something else as horrible. I have been
proudly saying that I have never programmed anything in my life except video
tape recorder so I am not so sure about my success.

Jukka

From dburken at comcast.net  Thu Nov  3 17:24:11 2011
From: dburken at comcast.net (David Burken)
Date: Fri Nov  4 09:17:16 2011
Subject: [gdal-dev] include paths and cmake
Message-ID: <4EB3067B.5080205@comcast.net>

Mateusz,

Just wondering if you've thought about namespacing the include paths?  
That is:

#include "cpl_config.h"
#include "gdal_frmts.h"

Becomes:
#include <gdal/port/cpl_config.h>
#include <gdal/gcore/gdal_frmts.h>

Or (flattened):
#include <gdal/cpl_config.h>
#include <gdal/gdal_frmts.h>

This would make installs / uninstalls cleaner.  Say your install prefix is:

/usr/local

Then your includes go to:

/usr/local/include/gdal

Instead of straight to:
/usr/local/include

I realize this would be a big change.  Just thought since you're taking 
the plunge on cmake it's something to consider.

Take care,
Dave






From KShannon at gcs-research.com  Thu Nov  3 17:26:29 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov  4 09:20:40 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB3067B.5080205@comcast.net>
References: <4EB3067B.5080205@comcast.net>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA54C2@MAIL.gcs-research.net>

I believe that is on the 2.0 changes list, or something along those lines.  See:

http://trac.osgeo.org/gdal/wiki/GDAL20Changes

under House Keeping issues

kss

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of David Burken
Sent: Thursday, November 03, 2011 3:24 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] include paths and cmake

Mateusz,

Just wondering if you've thought about namespacing the include paths?  
That is:

#include "cpl_config.h"
#include "gdal_frmts.h"

Becomes:
#include <gdal/port/cpl_config.h>
#include <gdal/gcore/gdal_frmts.h>

Or (flattened):
#include <gdal/cpl_config.h>
#include <gdal/gdal_frmts.h>

This would make installs / uninstalls cleaner.  Say your install prefix is:

/usr/local

Then your includes go to:

/usr/local/include/gdal

Instead of straight to:
/usr/local/include

I realize this would be a big change.  Just thought since you're taking the plunge on cmake it's something to consider.

Take care,
Dave






_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Thu Nov  3 17:31:05 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 09:24:33 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB3067B.5080205@comcast.net>
References: <4EB3067B.5080205@comcast.net>
Message-ID: <CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>

On 3 November 2011 21:24, David Burken <dburken@comcast.net> wrote:
>
> Just wondering if you've thought about namespacing the include paths? ?That
> is:
>
> #include "cpl_config.h"
> #include "gdal_frmts.h"
>
> Becomes:
> #include <gdal/port/cpl_config.h>
> #include <gdal/gcore/gdal_frmts.h>
>
> Or (flattened):
> #include <gdal/cpl_config.h>
> #include <gdal/gdal_frmts.h>

David,

I thoroughly agree.
Here is related ticket: http://trac.osgeo.org/gdal/ticket/3435

IMHO, current way of installing headers is becoming inconvenient and
unacceptable...

> I realize this would be a big change. ?Just thought since you're taking the
> plunge on cmake it's something to consider.

Yes, but I'm not a decision maker.
I can only encourage to collect more critical mass and nudge GDAL PSC
about this idea.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Thu Nov  3 17:33:38 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 09:27:15 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA54C2@MAIL.gcs-research.net>
References: <4EB3067B.5080205@comcast.net>
	<2DD24CD6225DC04C81CF12523261F4B90EFA54C2@MAIL.gcs-research.net>
Message-ID: <CABUeae-dmKx7ejsSX0Lx-ELJXBb50V5_WO9msoyWsjGLpFDx7w@mail.gmail.com>

On 3 November 2011 21:26, Kyle Shannon <KShannon@gcs-research.com> wrote:
> I believe that is on the 2.0 changes list, or something along those lines. ?See:
>
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> under House Keeping issues

Great news!

Frank, Even,
Can I set http://trac.osgeo.org/gdal/ticket/3435 with 2.0 milestone?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From even.rouault at mines-paris.org  Thu Nov  3 18:05:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov  4 10:00:46 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <CABUeae-dmKx7ejsSX0Lx-ELJXBb50V5_WO9msoyWsjGLpFDx7w@mail.gmail.com>
References: <4EB3067B.5080205@comcast.net>
	<2DD24CD6225DC04C81CF12523261F4B90EFA54C2@MAIL.gcs-research.net>
	<CABUeae-dmKx7ejsSX0Lx-ELJXBb50V5_WO9msoyWsjGLpFDx7w@mail.gmail.com>
Message-ID: <201111032305.00791.even.rouault@mines-paris.org>

Le jeudi 03 novembre 2011 22:33:38, Mateusz ?oskot a ?crit :
> On 3 November 2011 21:26, Kyle Shannon <KShannon@gcs-research.com> wrote:
> > I believe that is on the 2.0 changes list, or something along those
> > lines.  See:
> > 
> > http://trac.osgeo.org/gdal/wiki/GDAL20Changes
> > 
> > under House Keeping issues
> 
> Great news!
> 
> Frank, Even,
> Can I set http://trac.osgeo.org/gdal/ticket/3435 with 2.0 milestone?

There's was no 2.0 milestone created yet in Trac, so I've just created it.
By the way, it's not clear (to me) if 2.0 will be the next version or if there 
will be a 1.10 before.

I think that the ideas mentionned in GDAL20Changes are only brainstorming 
material for now that anyone can contribute to, but they should not be 
considered as officially approved until they will be seriously discussed. I can 
imagine that feedback, not only from developers, but also for the large crowd 
of users will be needed, so that each breaking change is pondered.

The main issue with 2.0 is that it should be the opportunity to do most 
breaking changes that can be anticipated for the next few years. But that also 
means that people that can contribute to it will need to have enough 
time/motivation/funding at the time that the works start, so that it ends up 
to be releasable in a reasonable amount of time (I'm just thinking to the 
libtiff 4.0 situation...).

There's also the risk of a fork of the community between users strongly 
attached to the old 1.X series (and potentially wishing improvements in the 
frame of this series) and users who will join the 2.X train. I'm thinking to 
the Python 2 vs Python 3 situation here.

Looking at http://trac.osgeo.org/gdal/wiki/SoftwareUsingGdal makes you feel 
how many projects can be affected by the decisions that will be taken. And 
that's just the verbose crowd, not to mention the crowd of silent users that 
is likely much larger...

> 
> Best regards,
From arb at sat.dundee.ac.uk  Thu Nov  3 18:53:58 2011
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Nov  4 10:52:29 2011
Subject: [gdal-dev] Re: Ogr2ogr -flip_coordinates
In-Reply-To: <loom.20111103T213135-171@post.gmane.org>
References: <loom.20111103T161502-820@post.gmane.org>
	<84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>
	<loom.20111103T211422-671@post.gmane.org>
	<201111032128.54880.even.rouault@mines-paris.org>
	<loom.20111103T213135-171@post.gmane.org>
Message-ID: <CAHOfOo3edj8YeTQY-YCYr6OMBeN0tqCQx9qd-MQnP-K0U2istQ@mail.gmail.com>

On 3 November 2011 20:38, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> wrote:

>
> Thereafter I will try if I can just turn the coordinates from these
> <gml:lowerCorner>6605838.360 61685.735</gml:lowerCorner>
> into these
> <gml:lowerCorner>61685.735 6605838.360</gml:lowerCorner>
> in the whole xml file with awk or something else as horrible.


Maybe something like this?

perl -ne 's,<gml:lowerCorner>([-+e\.0-9]+)
+([-+e\.0-9]+)</gml:lowerCorner>,<gml:lowerCorner>\2
\1</gml:lowerCorner>,;print;'
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111103/a896db9e/attachment.html
From mateusz at loskot.net  Thu Nov  3 20:25:12 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 12:28:12 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <201111032305.00791.even.rouault@mines-paris.org>
References: <4EB3067B.5080205@comcast.net>
	<2DD24CD6225DC04C81CF12523261F4B90EFA54C2@MAIL.gcs-research.net>
	<CABUeae-dmKx7ejsSX0Lx-ELJXBb50V5_WO9msoyWsjGLpFDx7w@mail.gmail.com>
	<201111032305.00791.even.rouault@mines-paris.org>
Message-ID: <CABUeae-jhFF5+Sa4KY4nXudBtVcmpwMnkZLnf_uJij5ps9oGzQ@mail.gmail.com>

On 3 November 2011 22:05, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le jeudi 03 novembre 2011 22:33:38, Mateusz ?oskot a ?crit :
>> On 3 November 2011 21:26, Kyle Shannon <KShannon@gcs-research.com> wrote:
>> > I believe that is on the 2.0 changes list, or something along those
>> > lines. ?See:
>> >
>> > http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>> >
>> > under House Keeping issues
>>
>> Great news!
>>
>> Frank, Even,
>> Can I set http://trac.osgeo.org/gdal/ticket/3435 with 2.0 milestone?
>
> There's was no 2.0 milestone created yet in Trac, so I've just created it.
> By the way, it's not clear (to me) if 2.0 will be the next version or if there
> will be a 1.10 before.

I was confused seeing "Related Tickets", I assumed it's query based on
milestone 2.0.

> I think that the ideas mentionned in GDAL20Changes are only brainstorming
> material for now that anyone can contribute to, but they should not be
> considered as officially approved until they will be seriously discussed. I can
> imagine that feedback, not only from developers, but also for the large crowd
> of users will be needed, so that each breaking change is pondered.

Sure. I guess some ideas may need to be supported with RFC.

> The main issue with 2.0 is that it should be the opportunity to do most
> breaking changes that can be anticipated for the next few years. But that also
> means that people that can contribute to it will need to have enough
> time/motivation/funding at the time that the works start, so that it ends up
> to be releasable in a reasonable amount of time (I'm just thinking to the
> libtiff 4.0 situation...).

OK

> There's also the risk of a fork of the community between users strongly
> attached to the old 1.X series (and potentially wishing improvements in the
> frame of this series) and users who will join the 2.X train. I'm thinking to
> the Python 2 vs Python 3 situation here.

Why it is a risk?
Freedom lies on both sides of the fence: on user's as well as on developer's.

> Looking at http://trac.osgeo.org/gdal/wiki/SoftwareUsingGdal makes you feel
> how many projects can be affected by the decisions that will be taken. And
> that's just the verbose crowd, not to mention the crowd of silent users that
> is likely much larger...

I dare to repeat myself: this is slogan.
It is cheaper to adapt client software to new version of library and
updated API,
than to maintain support library that doesn't follow new patterns,
techniques and technologies.
The alleged users/projects affection can be proved with arguments of the same
quality as my opinion.
Linux does not promise API/ABI stability between versions and it rules
the world.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Thu Nov  3 20:48:19 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 12:52:35 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CAGeT8ynrdjrw_nN4BATCeJQyi1XwpHqfmEKmGKaew7SLsUK4dw@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
	<CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>
	<CAGeT8ynrdjrw_nN4BATCeJQyi1XwpHqfmEKmGKaew7SLsUK4dw@mail.gmail.com>
Message-ID: <CABUeae9NROP25Gm8WbVxfWuviY5UEKpKbyZC5Buf1DbP_ksX=A@mail.gmail.com>

2011/11/3 Jayesh Chaudhary <aashishcy@gmail.com>:
>
>> > Also as far as dependencies of GDAL driver's ?are concerned, ?we can
>> > probably manage them using CMake superbuild support.
>>
>> I have never heard of CMake superbuild support.
>> Where can I learn more?
>
> This is a very good question. Actually I realized that not much information
> is posted on the cmake documentation. I will talk to CMake lead and find
> some good reference. There are projects out there (like ParaView) that uses
> superbuild but I will see if I can post a simple example of it. I have been
> using this feature now for a about year or so.

Great, looking forward to learning about it.
I guess it may be off-topic on gdal-dev, so please push any links to
me on mateusz@loskot.net.

>> > Also I wanted to point out that, I had started cmake port of gdal last
>> > year which is based on your work:
>> > https://gitorious.org/cmake-gdal
>>
>> I see. I have seen this repo and I was wondering what is this about.
>
> Now you know -:) Actually we have been using this port for a different
> project. I know that 2-3 people contacted me and now using it as well.
> [...]
> Sure, we have been using this port of boost for some of our big projects.
> [...]
> Yes, boost developers visited Kitware I believe last year.

This is the experience I have mentioned in my previous
messages that I believe would be extremely useful here.

> Said that, what would be our next step?

Given the experience you have at Kitware with big CMake-driven projects,
it would be very useful if you can evaluate for example Boost CMake.
Is this a good piece of CMake configuration?
What are its weaknesses?
If we need to discuss it, then I'd suggest to do it outside gdal-dev
list to avoid off-topic here.

Next, I will ask GDAL PSC for permission to create sandbox repository for us.
I think it would be good to host it in GDAL's spike, e.g.

http://svn.osgeo.org/gdal/spike/cmake

or may be as an official branch in

http://svn.osgeo.org/gdal/branches/cmake

You will have to obtain access to SVN too.
Once we have the home ready, we start scripting.

> Should we start from scratch?

I think we start from scratch anyway.
Previous gdal-cmake attempt would not be a good foundation.

> I would like to get it started as soon as possible.

Sure, here we come.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Thu Nov  3 20:51:22 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 12:55:49 2011
Subject: [gdal-dev] [PSC] Branch for CMake configuration
Message-ID: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>

Dear PSC,

Following my brainstorm with Jayesh about CMake,
I would like to ask for home for CMake related works.

I think it would be good to host it in GDAL's spike, e.g.

http://svn.osgeo.org/gdal/spike/cmake

or may be as an official branch in

http://svn.osgeo.org/gdal/branches/cmake

Obviously, Jayesh would need to be granted commit rights in these locations.

Shall I RFC or this form of request is sufficient?

[1] http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030738.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From warmerdam at pobox.com  Thu Nov  3 21:07:58 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov  4 13:13:22 2011
Subject: [gdal-dev] [PSC] Branch for CMake configuration
In-Reply-To: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>
References: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>
Message-ID: <CA+YzLBcz0ffJq7M0bsm1Si8_No0dhfpX+rLXmAY0CaqUR9NtuQ@mail.gmail.com>

2011/11/3 Mateusz ?oskot <mateusz@loskot.net>:
> Dear PSC,
>
> Following my brainstorm with Jayesh about CMake,
> I would like to ask for home for CMake related works.
>
> I think it would be good to host it in GDAL's spike, e.g.
>
> http://svn.osgeo.org/gdal/spike/cmake

Mateusz,

/spike is for stuff being deprecated.

> or may be as an official branch in
>
> http://svn.osgeo.org/gdal/branches/cmake

/branches is for official releases.

> Obviously, Jayesh would need to be granted commit rights in these locations.


My suggestion is that Jayesh prototype in /sandbox.

> Shall I RFC or this form of request is sufficient?

I would be receptive to a motion to grant Jayesh
full commit privileges.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mateusz at loskot.net  Thu Nov  3 21:14:46 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 13:20:32 2011
Subject: [gdal-dev] [PSC] Branch for CMake configuration
In-Reply-To: <CA+YzLBcz0ffJq7M0bsm1Si8_No0dhfpX+rLXmAY0CaqUR9NtuQ@mail.gmail.com>
References: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>
	<CA+YzLBcz0ffJq7M0bsm1Si8_No0dhfpX+rLXmAY0CaqUR9NtuQ@mail.gmail.com>
Message-ID: <CABUeae-T3jhtUNG51PpdsNfbmpSx=535JKBQCeLwWwj2WpJFgQ@mail.gmail.com>

2011/11/4 Frank Warmerdam <warmerdam@pobox.com>:
> 2011/11/3 Mateusz ?oskot <mateusz@loskot.net>:
>> Dear PSC,
>>
>> Following my brainstorm with Jayesh about CMake,
>> I would like to ask for home for CMake related works.
>>
>> I think it would be good to host it in GDAL's spike, e.g.
>>
>> http://svn.osgeo.org/gdal/spike/cmake
>
> Mateusz,
>
> /spike is for stuff being deprecated.
> /branches is for official releases.

Frank,

Understood.

>> Obviously, Jayesh would need to be granted commit rights in these locations.
>
> My suggestion is that Jayesh prototype in /sandbox.

I think I meant /sandbox but /spike somehow made it to my post.
Yes, /sandbox is perfect.

>> Shall I RFC or this form of request is sufficient?
>
> I would be receptive to a motion to grant Jayesh
> full commit privileges.

Thanks!

I guess Jayesh will need to agree on the RFC3
plus, Jayesh's OSGeo User ID is required, right?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From dmorissette at mapgears.com  Thu Nov  3 21:15:02 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Nov  4 13:20:53 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
Message-ID: <4EB33C96.4070209@mapgears.com>

Personally I like the idea. I'd probably go for the flattened version 
unless there is a good reason to carry a bunch of sub-directories around.

If there are any serious arguments against doing this then I'd like to 
hear them.

Daniel


On 11-11-03 05:31 PM, Mateusz ?oskot wrote:
> On 3 November 2011 21:24, David Burken<dburken@comcast.net>  wrote:
>>
>> Just wondering if you've thought about namespacing the include paths?  That
>> is:
>>
>> #include "cpl_config.h"
>> #include "gdal_frmts.h"
>>
>> Becomes:
>> #include<gdal/port/cpl_config.h>
>> #include<gdal/gcore/gdal_frmts.h>
>>
>> Or (flattened):
>> #include<gdal/cpl_config.h>
>> #include<gdal/gdal_frmts.h>
>
> David,
>
> I thoroughly agree.
> Here is related ticket: http://trac.osgeo.org/gdal/ticket/3435
>
> IMHO, current way of installing headers is becoming inconvenient and
> unacceptable...
>
>> I realize this would be a big change.  Just thought since you're taking the
>> plunge on cmake it's something to consider.
>
> Yes, but I'm not a decision maker.
> I can only encourage to collect more critical mass and nudge GDAL PSC
> about this idea.
>
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From warmerdam at pobox.com  Thu Nov  3 21:21:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov  4 13:27:12 2011
Subject: [gdal-dev] [PSC] Branch for CMake configuration
In-Reply-To: <CABUeae-T3jhtUNG51PpdsNfbmpSx=535JKBQCeLwWwj2WpJFgQ@mail.gmail.com>
References: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>
	<CA+YzLBcz0ffJq7M0bsm1Si8_No0dhfpX+rLXmAY0CaqUR9NtuQ@mail.gmail.com>
	<CABUeae-T3jhtUNG51PpdsNfbmpSx=535JKBQCeLwWwj2WpJFgQ@mail.gmail.com>
Message-ID: <CA+YzLBeTh84POLPqTR638q5YqgJUJmjna5KUF1xSy=37c6UDBQ@mail.gmail.com>

2011/11/3 Mateusz ?oskot <mateusz@loskot.net>:
>> I would be receptive to a motion to grant Jayesh
>> full commit privileges.
>
> Thanks!
>
> I guess Jayesh will need to agree on the RFC3
> plus, Jayesh's OSGeo User ID is required, right?

Mateusz,

Yes to both, and someone (ie. you) should make a
motion.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mateusz at loskot.net  Thu Nov  3 21:23:37 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov  4 13:29:53 2011
Subject: [gdal-dev] [PSC] Branch for CMake configuration
In-Reply-To: <CA+YzLBeTh84POLPqTR638q5YqgJUJmjna5KUF1xSy=37c6UDBQ@mail.gmail.com>
References: <CABUeae9a6b6jL5WQ6AHgjwJfJaYC_sgoxHEFS3NOCc+iEdRoPQ@mail.gmail.com>
	<CA+YzLBcz0ffJq7M0bsm1Si8_No0dhfpX+rLXmAY0CaqUR9NtuQ@mail.gmail.com>
	<CABUeae-T3jhtUNG51PpdsNfbmpSx=535JKBQCeLwWwj2WpJFgQ@mail.gmail.com>
	<CA+YzLBeTh84POLPqTR638q5YqgJUJmjna5KUF1xSy=37c6UDBQ@mail.gmail.com>
Message-ID: <CABUeae9D3dKE+pxq7y_vXU_XqQR22OOTCooU==+pcV=QzvYW+Q@mail.gmail.com>

2011/11/4 Frank Warmerdam <warmerdam@pobox.com>:
> 2011/11/3 Mateusz ?oskot <mateusz@loskot.net>:
>>> I would be receptive to a motion to grant Jayesh
>>> full commit privileges.
>>
>> Thanks!
>>
>> I guess Jayesh will need to agree on the RFC3
>> plus, Jayesh's OSGeo User ID is required, right?
>
> Mateusz,
>
> Yes to both, and someone (ie. you) should make a
> motion.

Frank,

Clear. I will take care of it.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From luqi.cg at gmail.com  Fri Nov  4 04:11:53 2011
From: luqi.cg at gmail.com (sjtuDNA)
Date: Fri Nov  4 20:41:15 2011
Subject: [gdal-dev] OGR to access s57 file, missing attributes issue
Message-ID: <1320394313084-6961974.post@n2.nabble.com>

Hi all,

    I'm now interesting in displaying ENCs. I've also read lots of ideas
from this site.

    Now, I got some promising results but not enough for displaying an ENC.

    I got info from :     
http://osgeo-org.1803224.n2.nabble.com/OGR-about-s-57-td3561320.html
http://osgeo-org.1803224.n2.nabble.com/OGR-about-s-57-td3561320.html 

    and from 
http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-td2026900.html
http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-td2026900.html 

    This is exactly the problem I met. Sr. Frank Warmerdam dump an layer
named WRECKS in an S-57 dataset.
And the features look like :
*****************************
OGRFeature(WRECKS):2163 
   RCID (Integer) = 2164 
   PRIM (Integer) = 1 
   GRUP (Integer) = 2 
   OBJL (Integer) = 159 
   RVER (Integer) = 1 
   AGEN (Integer) = 540 
   FIDN (Integer) = 2135161787 
   FIDS (Integer) = 688 
   LNAM (String) = 021C7F43FBBB02B0 
   LNAM_REFS (StringList) = (null) 
   FFPT_RIND (IntegerList) = (null) 

*--------------------------------------*
   CATWRK (Integer) = 1 
   CONRAD (Integer) = (null) 
   CONVIS (Integer) = (null) 
   EXPSOU (Integer) = (null) 
   HEIGHT (Real) = (null) 
   NOBJNM (String) = (null) 
   OBJNAM (String) = (null) 
   QUASOU (String) = 2 
   SOUACC (Real) = (null) 
   STATUS (String) = (null) 
   TECSOU (String) = (null) 
   VALSOU (Real) = (null) 
   VERACC (Real) = (null) 
   VERDAT (Integer) = (null) 
   VERLEN (Real) = (null) 
   WATLEV (Integer) = 3 
   INFORM (String) = (null) 
   NINFOM (String) = (null) 
   NTXTDS (String) = (null) 
   SCAMAX (Integer) = (null) 
   SCAMIN (Integer) = (null) 
   TXTDSC (String) = (null) 
   RECDAT (String) = (null) 
   RECIND (String) = (null) 
   SORDAT (String) = (null) 
   SORIND (String) = (null) 
   POINT (61.1031909 -32.4450159) 
************************************
    My problem is when i use the following code to dump an layer's feature i
cannot get the attributes under the "-----" line.
    I've also turned on the environment variables like RETURN_LINKAGES,
RETURN_PRIMITIVES and etc. Thus, I got the attributes:
  ORNT (IntegerList) = (1:255) 
  USAG (IntegerList) = (1:255) 
  MASK (IntegerList) = (1:255) 

    However, I just cannot get the attributes below MASK. I'm this close to
link the OGR/S57 data with S52 for rendering.
    Can I get some help with this?  Thanks in advance!

rgds,

Qi.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-missing-attributes-issue-tp6961974p6961974.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dburken at comcast.net  Fri Nov  4 09:06:43 2011
From: dburken at comcast.net (David Burken)
Date: Sat Nov  5 01:53:03 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB33C96.4070209@mapgears.com>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
	<4EB33C96.4070209@mapgears.com>
Message-ID: <4EB3E363.5070702@comcast.net>



On 11/03/2011 09:15 PM, Daniel Morissette wrote:
> Personally I like the idea. I'd probably go for the flattened version 
> unless there is a good reason to carry a bunch of sub-directories around.
>
> If there are any serious arguments against doing this then I'd like to 
> hear them.
>
> Daniel
>
Keeping the sub directories allows you to develop off checked out code 
base with one include path.  You could do that with flattened path but 
you would have to move the headers in your code tree.  I'm all for that 
but it's really not up to me.   If you move the includes around on the 
install then it complicates the include paths when building against the 
code tree versus building against an installed version.  I hope that 
makes sense.  Many packages separate the includes in their source tree, 
e.g. geos, ossim, opencv.  The source tree includes mirror the installed 
include tree.  So it's less complicated and this makes for easy installs 
/ uninstalls.

Dave

>
> On 11-11-03 05:31 PM, Mateusz ?oskot wrote:
>> On 3 November 2011 21:24, David Burken<dburken@comcast.net>  wrote:
>>>
>>> Just wondering if you've thought about namespacing the include 
>>> paths?  That
>>> is:
>>>
>>> #include "cpl_config.h"
>>> #include "gdal_frmts.h"
>>>
>>> Becomes:
>>> #include<gdal/port/cpl_config.h>
>>> #include<gdal/gcore/gdal_frmts.h>
>>>
>>> Or (flattened):
>>> #include<gdal/cpl_config.h>
>>> #include<gdal/gdal_frmts.h>
>>
>> David,
>>
>> I thoroughly agree.
>> Here is related ticket: http://trac.osgeo.org/gdal/ticket/3435
>>
>> IMHO, current way of installing headers is becoming inconvenient and
>> unacceptable...
>>
>>> I realize this would be a big change.  Just thought since you're 
>>> taking the
>>> plunge on cmake it's something to consider.
>>
>> Yes, but I'm not a decision maker.
>> I can only encourage to collect more critical mass and nudge GDAL PSC
>> about this idea.
>>
>> Best regards,
>
>
From potts at cfl.rr.com  Fri Nov  4 10:20:20 2011
From: potts at cfl.rr.com (Garrett Potts)
Date: Sat Nov  5 03:09:40 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB3067B.5080205@comcast.net>
References: <4EB3067B.5080205@comcast.net>
Message-ID: <B604AF78-D081-4FFE-AEF1-A3ED7A3B8AA4@cfl.rr.com>

Hello All:

For include paths of the form gdal/cpl_config.h would lead easier to do MAC Framworks where one can create a gdal.framework and use the gdal/ convention.

Take care

Garrett

On Nov 3, 2011, at 5:24 PM, David Burken wrote:

> Mateusz,
> 
> Just wondering if you've thought about namespacing the include paths?  That is:
> 
> #include "cpl_config.h"
> #include "gdal_frmts.h"
> 
> Becomes:
> #include <gdal/port/cpl_config.h>
> #include <gdal/gcore/gdal_frmts.h>
> 
> Or (flattened):
> #include <gdal/cpl_config.h>
> #include <gdal/gdal_frmts.h>
> 
> This would make installs / uninstalls cleaner.  Say your install prefix is:
> 
> /usr/local
> 
> Then your includes go to:
> 
> /usr/local/include/gdal
> 
> Instead of straight to:
> /usr/local/include
> 
> I realize this would be a big change.  Just thought since you're taking the plunge on cmake it's something to consider.
> 
> Take care,
> Dave
> 
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From danhomerick at gmail.com  Fri Nov  4 11:18:45 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Sat Nov  5 04:11:28 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB3E363.5070702@comcast.net>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
	<4EB33C96.4070209@mapgears.com> <4EB3E363.5070702@comcast.net>
Message-ID: <CAGVu-jFPZDzgWKjU2akieMoBzZu15pkpKFGbsTWqq4FLd2LLPQ@mail.gmail.com>

On Fri, Nov 4, 2011 at 6:06 AM, David Burken <dburken@comcast.net> wrote:
> Keeping the sub directories allows you to develop off checked out code base
> with one include path. ?You could do that with flattened path but you would
> have to move the headers in your code tree. ?I'm all for that but it's
> really not up to me. ? If you move the includes around on the install then
> it complicates the include paths when building against the code tree versus
> building against an installed version. ?I hope that makes sense. ?Many
> packages separate the includes in their source tree, e.g. geos, ossim,
> opencv. ?The source tree includes mirror the installed include tree. ?So
> it's less complicated and this makes for easy installs / uninstalls.
>
> Dave

I'm in favor of not flattening the include paths in the installed
version, for just the reasons that Dave listed. In my experience,
making the installed paths different than the source tree has little
added value for the user, while adding developer headache. The user
doesn't generally need to include very many files, and those files
tend to be near the root of the tree anyways.

Cheers,
- Dan
From sylvain_duclos at yahoo.com  Fri Nov  4 12:05:24 2011
From: sylvain_duclos at yahoo.com (s duclos)
Date: Sat Nov  5 05:03:18 2011
Subject: [gdal-dev] OGR to access s57 file, missing attributes issue
In-Reply-To: <1320394313084-6961974.post@n2.nabble.com>
References: <1320394313084-6961974.post@n2.nabble.com>
Message-ID: <1320422724.15679.YahooMailNeo@web110812.mail.gq1.yahoo.com>

sjtuDNA,

I gather that you want to render your ENC in S52

The S52 code live at http://openev.cvs.sourceforge.net/viewvc/openev/contrib/S52/

Try to build s52glx target (minimal deps).


rgds,

Sylvain.



----- Original Message -----
> From: sjtuDNA <luqi.cg@gmail.com>
> To: gdal-dev@lists.osgeo.org
> Cc: 
> Sent: Friday, November 4, 2011 4:11:53 AM
> Subject: [gdal-dev] OGR to access s57 file, missing attributes issue
> 
> Hi all,
> 
> ? ? I'm now interesting in displaying ENCs. I've also read lots of ideas
> from this site.
> 
> ? ? Now, I got some promising results but not enough for displaying an ENC.
> 
> ? ? I got info from :? ? 
> http://osgeo-org.1803224.n2.nabble.com/OGR-about-s-57-td3561320.html
> http://osgeo-org.1803224.n2.nabble.com/OGR-about-s-57-td3561320.html 
> 
> ? ? and from 
> http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-td2026900.html
> http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-td2026900.html 
> 
> ? ? This is exactly the problem I met. Sr. Frank Warmerdam dump an layer
> named WRECKS in an S-57 dataset.
> And the features look like :
> *****************************
> OGRFeature(WRECKS):2163 
> ?  RCID (Integer) = 2164 
> ?  PRIM (Integer) = 1 
> ?  GRUP (Integer) = 2 
> ?  OBJL (Integer) = 159 
> ?  RVER (Integer) = 1 
> ?  AGEN (Integer) = 540 
> ?  FIDN (Integer) = 2135161787 
> ?  FIDS (Integer) = 688 
> ?  LNAM (String) = 021C7F43FBBB02B0 
> ?  LNAM_REFS (StringList) = (null) 
> ?  FFPT_RIND (IntegerList) = (null) 
> 
> *--------------------------------------*
> ?  CATWRK (Integer) = 1 
> ?  CONRAD (Integer) = (null) 
> ?  CONVIS (Integer) = (null) 
> ?  EXPSOU (Integer) = (null) 
> ?  HEIGHT (Real) = (null) 
> ?  NOBJNM (String) = (null) 
> ?  OBJNAM (String) = (null) 
> ?  QUASOU (String) = 2 
> ?  SOUACC (Real) = (null) 
> ?  STATUS (String) = (null) 
> ?  TECSOU (String) = (null) 
> ?  VALSOU (Real) = (null) 
> ?  VERACC (Real) = (null) 
> ?  VERDAT (Integer) = (null) 
> ?  VERLEN (Real) = (null) 
> ?  WATLEV (Integer) = 3 
> ?  INFORM (String) = (null) 
> ?  NINFOM (String) = (null) 
> ?  NTXTDS (String) = (null) 
> ?  SCAMAX (Integer) = (null) 
> ?  SCAMIN (Integer) = (null) 
> ?  TXTDSC (String) = (null) 
> ?  RECDAT (String) = (null) 
> ?  RECIND (String) = (null) 
> ?  SORDAT (String) = (null) 
> ?  SORIND (String) = (null) 
> ?  POINT (61.1031909 -32.4450159) 
> ************************************
> ? ? My problem is when i use the following code to dump an layer's feature i
> cannot get the attributes under the "-----" line.
> ? ? I've also turned on the environment variables like RETURN_LINKAGES,
> RETURN_PRIMITIVES and etc. Thus, I got the attributes:
> ? ORNT (IntegerList) = (1:255) 
> ? USAG (IntegerList) = (1:255) 
> ? MASK (IntegerList) = (1:255) 
> 
> ? ? However, I just cannot get the attributes below MASK. I'm this close to
> link the OGR/S57 data with S52 for rendering.
> ? ? Can I get some help with this?? Thanks in advance!
> 
> rgds,
> 
> Qi.
> 
> --
> View this message in context: 
> http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-missing-attributes-issue-tp6961974p6961974.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From elliott at cpi.com  Fri Nov  4 13:41:05 2011
From: elliott at cpi.com (elliott)
Date: Sat Nov  5 07:15:22 2011
Subject: [gdal-dev] GDAL Installation Question
Message-ID: <4EB423B1.2000709@cpi.com>

Hi Everyone,

I recently rebuilt my gdal-1.8.0 directory to include the HDF4 format.  
If I run the gdal-1.8.0/apps/gdalinfo, it recognizes the HDF4 files.  
However, if I just run ./gdalinfo it does not recognize the new format.  
I noticed that there is a sub directory gdal-1.8.0/apps/.libs that 
contains the gdalinfo executable as well.  This gdalinfo executable is a 
different size than the one in the gdal-1.8.0/apps directory and it does 
not recognize the new format either.  It appears that the install is 
done using the executables in the ./libs directory and that is why the 
./gdalinfo does not work.

Why are there two directories with the same executables and why are they 
different even though they were both rebuilt at the same time?
Also, is there a way to tell python scripts where to look for the 
bindings?  The PYHTONPATH environment variable does not seem to work.  I 
am trying to run a PostGIS python script and it is not recognizing the 
new HDF4 format probably because of the above.

Thanks!
From warmerdam at pobox.com  Fri Nov  4 14:20:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Nov  5 07:23:31 2011
Subject: [gdal-dev] GDAL Installation Question
In-Reply-To: <4EB423B1.2000709@cpi.com>
References: <4EB423B1.2000709@cpi.com>
Message-ID: <4EB42CFB.9020908@pobox.com>

On 11-11-04 10:41 AM, elliott wrote:
> Hi Everyone,
>
> I recently rebuilt my gdal-1.8.0 directory to include the HDF4 format. If I run
> the gdal-1.8.0/apps/gdalinfo, it recognizes the HDF4 files. However, if I just
> run ./gdalinfo it does not recognize the new format. I noticed that there is a
> sub directory gdal-1.8.0/apps/.libs that contains the gdalinfo executable as
> well. This gdalinfo executable is a different size than the one in the
> gdal-1.8.0/apps directory and it does not recognize the new format either. It
> appears that the install is done using the executables in the ./libs directory
> and that is why the ./gdalinfo does not work.
>
> Why are there two directories with the same executables and why are they
> different even though they were both rebuilt at the same time?

Elliott,

One gdalinfo is a script which runs the real executable after setting
up environment settings appropriate to ensure the local development
build of the shared library is used instead of the global system libgdal.so.
This infrastructure is provided by something called "libtool".  If you want
to avoid it you can configure GDAL using the --without-libtool switch.  But
then you will have to carefully ensure you are using the libgdal.so you want
when you run the executable yourself.  I accomplish this by putting my
development gdal directory ahead of global locations in my LD_LIBRARY_PATH.

Note that libtool is widely used on Linux, not just by GDAL.

Alternatively, if you are able to install your development gdal over the
system GDAL your changes should be picked up automatically.

It is often *not* a good idea to install a development GDAL over a
prepackaged GDAL if they are different versions.  There are various
workarounds for this but they get messy.  I honestly just avoid installing
prepackaged versions of GDAL to avoid conflicts.

> Also, is there a way to tell python scripts where to look for the bindings? The
> PYHTONPATH environment variable does not seem to work. I am trying to run a
> PostGIS python script and it is not recognizing the new HDF4 format probably
> because of the above.

The issues are likely related.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From mrxonx at hotmail.com  Fri Nov  4 14:27:57 2011
From: mrxonx at hotmail.com (mrxonx@hotmail.com)
Date: Sat Nov  5 07:37:35 2011
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <4CE2CD9A.6090402@pobox.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>
	<4CE2CD9A.6090402@pobox.com>
Message-ID: <4EB42EAD.8050303@hotmail.com>

Dear all,

Included is a patch for s57reader.cpp that properly applies updates for
certain types of charts.

The essence of this patch is that SG2D field may not be present in
original record, and must be added if update is trying to insert SG2D
fields.

The patch was made against our modified version of OGR, so line numbers
likely do not match and certain function signatures may need to be
updated. If you'd like to apply it - make sure it goes in the
S57Reader::ApplyRecordUpdate.

Best,
--
Mike


-------------- next part --------------
Index: s57reader.cpp
===================================================================
--- s57reader.cpp	(revision 0000)
+++ s57reader.cpp	(working copy)
@@ -2635,16 +2635,30 @@
         /* If we don't have SG2D, check for SG3D */
         if( poDstSG2D == NULL )
         {
-            poSrcSG2D = poUpdate->FindField("SG3D");
             poDstSG2D = poTarget->FindField("SG3D");
+            if (poDstSG2D != NULL) {
+               poSrcSG2D = poUpdate->FindField("SG3D");
+            }
         }
 
-        if( (poSrcSG2D == NULL && nCCUI != 2) || poDstSG2D == NULL )
+        if( (poSrcSG2D == NULL && nCCUI != 2) || (poDstSG2D == NULL && nCCUI != 1) )
         {
             CPLAssert( FALSE );
             return FALSE;
         }
 
+        if (poDstSG2D == NULL) {
+          poTarget->AddField(poTarget->GetModule()->FindFieldDefn("SG2D"));
+          poDstSG2D = poTarget->FindField("SG2D");
+          if (poDstSG2D == NULL) {
+            CPLAssert( FALSE );
+            return FALSE;
+          }
+
+          // Delete null default data that was created
+          poTarget->SetFieldRaw( poDstSG2D, 0, NULL, 0 );
+        }
+
         nCoordSize = poDstSG2D->GetFieldDefn()->GetFixedWidth();
 
         if( nCCUI == 1 ) /* INSERT */
From potts at cfl.rr.com  Fri Nov  4 14:39:30 2011
From: potts at cfl.rr.com (Garrett Potts)
Date: Sat Nov  5 07:43:22 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <CAGVu-jFPZDzgWKjU2akieMoBzZu15pkpKFGbsTWqq4FLd2LLPQ@mail.gmail.com>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
	<4EB33C96.4070209@mapgears.com> <4EB3E363.5070702@comcast.net>
	<CAGVu-jFPZDzgWKjU2akieMoBzZu15pkpKFGbsTWqq4FLd2LLPQ@mail.gmail.com>
Message-ID: <844BAD19-5787-4BF8-B827-0A0DEB7A6377@cfl.rr.com>

Hello All:

Either way should work with frameworks.  The typical is something of the form:

collapsed:

gdal/<headers>

but this is fine as well


not collapsed:

gdal/<path>?./someheader.h

the one that is not collapsed will require a custom cmake process to make the directory structure in the gdal.framworks.  If it's collapsed then cmake's framework support will handle it more easily when doing a framework layout on MACs.


Take care

Garrett
 
On Nov 4, 2011, at 11:18 AM, Dan Homerick wrote:

> On Fri, Nov 4, 2011 at 6:06 AM, David Burken <dburken@comcast.net> wrote:
>> Keeping the sub directories allows you to develop off checked out code base
>> with one include path.  You could do that with flattened path but you would
>> have to move the headers in your code tree.  I'm all for that but it's
>> really not up to me.   If you move the includes around on the install then
>> it complicates the include paths when building against the code tree versus
>> building against an installed version.  I hope that makes sense.  Many
>> packages separate the includes in their source tree, e.g. geos, ossim,
>> opencv.  The source tree includes mirror the installed include tree.  So
>> it's less complicated and this makes for easy installs / uninstalls.
>> 
>> Dave
> 
> I'm in favor of not flattening the include paths in the installed
> version, for just the reasons that Dave listed. In my experience,
> making the installed paths different than the source tree has little
> added value for the user, while adding developer headache. The user
> doesn't generally need to include very many files, and those files
> tend to be near the root of the tree anyways.
> 
> Cheers,
> - Dan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Fri Nov  4 14:54:09 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Nov  5 07:58:58 2011
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <4EB42EAD.8050303@hotmail.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>
	<4CE2CD9A.6090402@pobox.com> <4EB42EAD.8050303@hotmail.com>
Message-ID: <CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>

Dear  Mike,

Please add this to a relevant ticket, or create one and add it there.

http://trac.osgeo.org/gdal/report

thanks, Etienne

On Fri, Nov 4, 2011 at 4:27 PM,  <mrxonx@hotmail.com> wrote:
> Dear all,
>
> Included is a patch for s57reader.cpp that properly applies updates for
> certain types of charts.
>
> The essence of this patch is that SG2D field may not be present in
> original record, and must be added if update is trying to insert SG2D
> fields.
>
> The patch was made against our modified version of OGR, so line numbers
> likely do not match and certain function signatures may need to be
> updated. If you'd like to apply it - make sure it goes in the
> S57Reader::ApplyRecordUpdate.
>
> Best,
> --
> Mike
>
>
>
> Index: s57reader.cpp
> ===================================================================
> --- s57reader.cpp ? ? ? (revision 0000)
> +++ s57reader.cpp ? ? ? (working copy)
> @@ -2635,16 +2635,30 @@
> ? ? ? ? /* If we don't have SG2D, check for SG3D */
> ? ? ? ? if( poDstSG2D == NULL )
> ? ? ? ? {
> - ? ? ? ? ? ?poSrcSG2D = poUpdate->FindField("SG3D");
> ? ? ? ? ? ? poDstSG2D = poTarget->FindField("SG3D");
> + ? ? ? ? ? ?if (poDstSG2D != NULL) {
> + ? ? ? ? ? ? ? poSrcSG2D = poUpdate->FindField("SG3D");
> + ? ? ? ? ? ?}
> ? ? ? ? }
>
> - ? ? ? ?if( (poSrcSG2D == NULL && nCCUI != 2) || poDstSG2D == NULL )
> + ? ? ? ?if( (poSrcSG2D == NULL && nCCUI != 2) || (poDstSG2D == NULL && nCCUI != 1) )
> ? ? ? ? {
> ? ? ? ? ? ? CPLAssert( FALSE );
> ? ? ? ? ? ? return FALSE;
> ? ? ? ? }
>
> + ? ? ? ?if (poDstSG2D == NULL) {
> + ? ? ? ? ?poTarget->AddField(poTarget->GetModule()->FindFieldDefn("SG2D"));
> + ? ? ? ? ?poDstSG2D = poTarget->FindField("SG2D");
> + ? ? ? ? ?if (poDstSG2D == NULL) {
> + ? ? ? ? ? ?CPLAssert( FALSE );
> + ? ? ? ? ? ?return FALSE;
> + ? ? ? ? ?}
> +
> + ? ? ? ? ?// Delete null default data that was created
> + ? ? ? ? ?poTarget->SetFieldRaw( poDstSG2D, 0, NULL, 0 );
> + ? ? ? ?}
> +
> ? ? ? ? nCoordSize = poDstSG2D->GetFieldDefn()->GetFixedWidth();
>
> ? ? ? ? if( nCCUI == 1 ) /* INSERT */
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mrxonx at hotmail.com  Fri Nov  4 15:12:51 2011
From: mrxonx at hotmail.com (M S)
Date: Sat Nov  5 08:19:53 2011
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>,
	<4CE2CD9A.6090402@pobox.com>, <4EB42EAD.8050303@hotmail.com>,
	<CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>
Message-ID: <COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>

Unfortunately, I really don't have the time.

I am glad to provide the fix, but whether you choose to apply it or keep a broken implementation is up to you. 

> Date: Fri, 4 Nov 2011 16:54:09 -0200
> Subject: Re: [gdal-dev] Patch for s57reader.cpp
> From: etourigny.dev@gmail.com
> To: mrxonx@hotmail.com
> CC: gdal-dev@lists.osgeo.org
> 
> Dear  Mike,
> 
> Please add this to a relevant ticket, or create one and add it there.
> 
> http://trac.osgeo.org/gdal/report
> 
> thanks, Etienne
> 
> On Fri, Nov 4, 2011 at 4:27 PM,  <mrxonx@hotmail.com> wrote:
> > Dear all,
> >
> > Included is a patch for s57reader.cpp that properly applies updates for
> > certain types of charts.
> >
> > The essence of this patch is that SG2D field may not be present in
> > original record, and must be added if update is trying to insert SG2D
> > fields.
> >
> > The patch was made against our modified version of OGR, so line numbers
> > likely do not match and certain function signatures may need to be
> > updated. If you'd like to apply it - make sure it goes in the
> > S57Reader::ApplyRecordUpdate.
> >
> > Best,
> > --
> > Mike
> >
> >
> >
> > Index: s57reader.cpp
> > ===================================================================
> > --- s57reader.cpp       (revision 0000)
> > +++ s57reader.cpp       (working copy)
> > @@ -2635,16 +2635,30 @@
> >         /* If we don't have SG2D, check for SG3D */
> >         if( poDstSG2D == NULL )
> >         {
> > -            poSrcSG2D = poUpdate->FindField("SG3D");
> >             poDstSG2D = poTarget->FindField("SG3D");
> > +            if (poDstSG2D != NULL) {
> > +               poSrcSG2D = poUpdate->FindField("SG3D");
> > +            }
> >         }
> >
> > -        if( (poSrcSG2D == NULL && nCCUI != 2) || poDstSG2D == NULL )
> > +        if( (poSrcSG2D == NULL && nCCUI != 2) || (poDstSG2D == NULL && nCCUI != 1) )
> >         {
> >             CPLAssert( FALSE );
> >             return FALSE;
> >         }
> >
> > +        if (poDstSG2D == NULL) {
> > +          poTarget->AddField(poTarget->GetModule()->FindFieldDefn("SG2D"));
> > +          poDstSG2D = poTarget->FindField("SG2D");
> > +          if (poDstSG2D == NULL) {
> > +            CPLAssert( FALSE );
> > +            return FALSE;
> > +          }
> > +
> > +          // Delete null default data that was created
> > +          poTarget->SetFieldRaw( poDstSG2D, 0, NULL, 0 );
> > +        }
> > +
> >         nCoordSize = poDstSG2D->GetFieldDefn()->GetFixedWidth();
> >
> >         if( nCCUI == 1 ) /* INSERT */
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111104/fc1e91ae/attachment.html
From mateusz at loskot.net  Fri Nov  4 16:10:41 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat Nov  5 09:19:25 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <4EB3E363.5070702@comcast.net>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
	<4EB33C96.4070209@mapgears.com> <4EB3E363.5070702@comcast.net>
Message-ID: <CABUeae97hD3jvuvVV0b_t-t5rAEmTE1nGOjyeHFCeVsCFS7zRA@mail.gmail.com>

On 4 November 2011 13:06, David Burken <dburken@comcast.net> wrote:
> If you move the includes around on the install then
> it complicates the include paths when building against the code tree versus
> building against an installed version

The headers location is already different for installed and repo source tree.
One location for the former, at least four locations passed with -I/...
for the latter.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From even.rouault at mines-paris.org  Fri Nov  4 16:58:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov  5 10:10:05 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <CABUeae97hD3jvuvVV0b_t-t5rAEmTE1nGOjyeHFCeVsCFS7zRA@mail.gmail.com>
References: <4EB3067B.5080205@comcast.net> <4EB3E363.5070702@comcast.net>
	<CABUeae97hD3jvuvVV0b_t-t5rAEmTE1nGOjyeHFCeVsCFS7zRA@mail.gmail.com>
Message-ID: <201111042158.58864.even.rouault@mines-paris.org>

Le vendredi 04 novembre 2011 21:10:41, Mateusz ?oskot a ?crit :
> On 4 November 2011 13:06, David Burken <dburken@comcast.net> wrote:
> > If you move the includes around on the install then
> > it complicates the include paths when building against the code tree
> > versus building against an installed version
> 
> The headers location is already different for installed and repo source
> tree. One location for the former, at least four locations passed with
> -I/... for the latter.

As announced in its subject, this discussion is obviously mixing 2 different 
topics :
* cmake-based build system for GDAL
* changing include paths

This raises the questions of what aims and constraints the cmake effort will 
have. Some obvious observations based on this thread :
1) If you move header files in the source tree, this would certainly break the 
current build system with its hand-made makefiles, unless changes are made to 
fix it.
2) If you install the public header files elsewhere in the "install" target of 
the cmake build, then, depending on how GDAL has been built, the installed 
layout will be different. Which would be nightmarish for users if both build 
system co-exist for some time.

To sum it up, the addition of the cmake build system alone can be a non-
breaking and self-contained effort, whereas the topic of changing include paths 
is potentially a "breaking" change that would impact all build systems. Of 
course, this can be a non-issue if both efforts are targetted for a mythical 
GDAL 2.0 that would also throw away the current build system to replace it 
with the cmake one.

> 
> Best regards,
From danhomerick at gmail.com  Fri Nov  4 16:59:08 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Sat Nov  5 10:10:20 2011
Subject: [gdal-dev] include paths and cmake
In-Reply-To: <CABUeae97hD3jvuvVV0b_t-t5rAEmTE1nGOjyeHFCeVsCFS7zRA@mail.gmail.com>
References: <4EB3067B.5080205@comcast.net>
	<CABUeae8Mz84SaG4hJMrZ0J1C=HYUP8NM1UqzRLYWs-wkn+=R1A@mail.gmail.com>
	<4EB33C96.4070209@mapgears.com> <4EB3E363.5070702@comcast.net>
	<CABUeae97hD3jvuvVV0b_t-t5rAEmTE1nGOjyeHFCeVsCFS7zRA@mail.gmail.com>
Message-ID: <CAGVu-jH1Tte_mJgEQBidaM0uBH0G+DzqDMqCSxUd5E2r6Rm+BQ@mail.gmail.com>

2011/11/4 Mateusz ?oskot <mateusz@loskot.net>:
> On 4 November 2011 13:06, David Burken <dburken@comcast.net> wrote:
>> If you move the includes around on the install then
>> it complicates the include paths when building against the code tree versus
>> building against an installed version
>
> The headers location is already different for installed and repo source tree.
> One location for the former, at least four locations passed with -I/...
> for the latter.

But wouldn't it be nice if it weren't like that? =)

If there was only one include location for both development and
release, and the relative paths from that location were the same, then
it makes setting up project/configuration files easier and it makes it
easier for IDE's to understand the code (especially for supporting
autocompletion).

To be explicit, you would add a directory called "gdal" to the main
SVN checkout directory. All the source code makes up the gdal library
would be moved into that "gdal" directory, e.g:

myGdalCheckout
    gdal
        alg
        frmts
        gcore
        ogr
        port
    apps
    bridge
    ... etc

All header files have their #includes altered to be relative to the
root directory (the SVN source checkout, for development), e.g:

#include "gdal/gcore/gdal.h"
#include "gdal/ogr/ogrsf_frmts/generic/ogr_gensql.h"

(Noting again that although the gdal implementation files tend to
include files deep in the directory tree, the includes for interfaces
tend to be near the root of the tree.)

When compiling, only one include directory needs to be supplied
whether you're a gdal developer (the SVN checkout dir), or a user of
the library (the system's regular include directory). The changeover
is a hassle, but once done it makes your development environment much
easier to set up, and configuration files easier to maintain.

Cheers,
- Dan

P.S. If you really want the interface headers to be easy to include,
move the commonly used interface headers into the new gdal directory.
Since the *.cpp files will all use relative paths from the source
tree's root for their #includes, their associated header files are
easy to find, even if they're not in the same directory. Thus, a user
of the library could have:

#include "gdal/gdal.h"
#include "gdal/cpl_port.h"

rather than

#include "gdal/gcore/gdal.h"
#include "gdal/ports/cpl_port.h"
From talent_sxl at 126.com  Fri Nov  4 17:07:07 2011
From: talent_sxl at 126.com (=?GBK?B?y87Qoei0?=)
Date: Sat Nov  5 10:51:42 2011
Subject: [gdal-dev] How to add OpenMP to GDAL?
Message-ID: <6704f612.267.13370680ee2.Coremail.talent_sxl@126.com>

Dear sir,


I've  used GDALWarper to develop a program for image resampling, resolution of 10m up to 2.5m. In this process I found that the ChunkAndWarpImage( ) in GDALWarpOperation was too slow that it almost took me an hour to get a sence of QuickBird image. After checking source codes, I would like to promote two ways to get this process faster.


1. Set the dfWarpMemoryLimit larger than 64. Since the computer I am using has a RAM of 12GB, 64M is a little smaller under this condition. Besides, the smaller dfWarpMemoryLimit is, the more chunks will be creat. That means we have to do lots of RasterIO( ), which takes a long time to complete. ( Thanks for your advice in the declaration before the definition, in which you have advice that we should try various schemes to query physical RAM. I just wanna offer some help to somebody who has the same confusion with me, in case they could find a solution here by google or something else.)


2. Add parallelization support to GDAL build options, such as OpenMP or CUDA. (I've been able to use CUDA along with GDAL.) Then question comes: how can I add OpenMP to GDAL? I konw nothing about Cmake or gcc. After googling I tried the following metrods:


In nmake.opt, add:
# Any extra libraries needed on this platform?
# Basic Makefile for OpenMP
OMP_CFLAGS = -fopenmp


In alg\makefile.vc, add:
!IFDEF OMP_CFLAGS
OMP_CFLAGS = $(OMP_CFLAGS) -DOMP_SUPPORT
!ENDIF


Finally a little test for OpenMP in alg\gdalwarpkernel.cpp:
#include <omp.h>
...Ln2706:
int ncore = omp_get_num_procs();
#pragma omp parallel for num_threads(ncore*2)
for(...)...


I put vcomp90.dll and Microsoft.VC90.OpenMP.manifest in the same path as makegdal90.sln, rebuilded the makegdal solution and re-made a brand new gdal18.dll with no error appearing. However, when I tried to run my program for image resampling, only 4 of the 8 cores of my cpu were running effectively, and it still took a long time, just as no OpenMP used.


Since OpenMP could speed up codes so easily, would you please help me to add it into GDAL? I'm using GDAL1.8.0 and VS2009, Win7 Ultimate.


Thank you!


 Xiaolu Song 
2011-11-05 
 -- 
Xiaolu Song 
Center for Earth Observation and Digital Earth Chinese Academy of Sciences 
No.9 Dengzhuang South Road, Haidian District, Beijing 100094, China 
Tel: +86-010-82178188 +86-18610335605 
Email:talent_sxl@126.com 
 
9
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111105/0784d47e/attachment.html
From even.rouault at mines-paris.org  Fri Nov  4 18:08:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov  5 11:24:04 2011
Subject: [gdal-dev] How to add OpenMP to GDAL?
In-Reply-To: <6704f612.267.13370680ee2.Coremail.talent_sxl@126.com>
References: <6704f612.267.13370680ee2.Coremail.talent_sxl@126.com>
Message-ID: <201111042308.59029.even.rouault@mines-paris.org>

Le vendredi 04 novembre 2011 22:07:07, ??? a ?crit :
> Dear sir,
> 
> 
> I've  used GDALWarper to develop a program for image resampling, resolution
> of 10m up to 2.5m. In this process I found that the ChunkAndWarpImage( )
> in GDALWarpOperation was too slow that it almost took me an hour to get a
> sence of QuickBird image. After checking source codes, I would like to
> promote two ways to get this process faster.
> 
> 
> 1. Set the dfWarpMemoryLimit larger than 64. Since the computer I am using
> has a RAM of 12GB, 64M is a little smaller under this condition. Besides,
> the smaller dfWarpMemoryLimit is, the more chunks will be creat. That
> means we have to do lots of RasterIO( ), which takes a long time to
> complete. ( Thanks for your advice in the declaration before the
> definition, in which you have advice that we should try various schemes to
> query physical RAM. I just wanna offer some help to somebody who has the
> same confusion with me, in case they could find a solution here by google
> or something else.)

Increasing dfWarpMemoryLimit will generally help performance, but read 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp because there are non 
obvious cases where it doesn't.

> 
> 
> 2. Add parallelization support to GDAL build options, such as OpenMP or
> CUDA. (I've been able to use CUDA along with GDAL.) Then question comes:
> how can I add OpenMP to GDAL? I konw nothing about Cmake or gcc. After
> googling I tried the following metrods:
> 
> 
> Since OpenMP could speed up codes so easily, would you please help me to
> add it into GDAL? I'm using GDAL1.8.0 and VS2009, Win7 Ultimate.

First, I just want to make you aware that there's an accelerated 
implementation of the warping algorithm that is  OpenCL-based, and which was 
integrated with GDAL 1.8.0.

Then, on your attempt to use OpenMP the way you did, I think you have run into 
a issue because the PROJ based transformer (ogrct.cpp) uses a big mutex with 
PROJ < 4.8. So the parallelization is pretty useless if you let the 
transformer part into the parallelized loop. But if you PROJ >= 4.8dev, you 
would have potentially thread-safety issue if the same transformer object is 
used by different threads. You would need to instanciate it as many times as 
you have openmp threads. An alternative would be to do as the OpenCL-based 
implementation and do the reprojection before. It really depends on what 
bottlenecks you have identified in your use cases : reprojection or resampling.

> 
> 
> Thank you!
> 
> 
>  Xiaolu Song
> 2011-11-05
> Xiaolu Song
> Center for Earth Observation and Digital Earth Chinese Academy of Sciences
> No.9 Dengzhuang South Road, Haidian District, Beijing 100094, China
> Tel: +86-010-82178188 +86-18610335605
> Email:talent_sxl@126.com
> ??????????????????
> ??????????9?
From mira.mikes at seznam.cz  Sat Nov  5 05:26:30 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Sat Nov  5 23:20:21 2011
Subject: [gdal-dev] Aster tif files to hgt
Message-ID: <190316.26140.42703-6385-1902410970-1320485190@seznam.cz>

Hi list,

I recently downloaded Aster v2 tif files which I would like convert
hgt file to be used by Srtm2osm program.
Gdal looks like right tools for doing this.

Can somebody here advise me how to do this?

best regards

mira
From jukka.rahkonen at mmmtike.fi  Sat Nov  5 05:48:28 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat Nov  5 23:42:35 2011
Subject: [gdal-dev] Re: Ogr2ogr -flip_coordinates
References: <loom.20111103T161502-820@post.gmane.org>
	<84446DEF76453C439E9E97E438E13A6303A719@suutari.haapa.mmm.fi>
	<loom.20111103T211422-671@post.gmane.org>
	<201111032128.54880.even.rouault@mines-paris.org>
	<loom.20111103T213135-171@post.gmane.org>
	<CAHOfOo3edj8YeTQY-YCYr6OMBeN0tqCQx9qd-MQnP-K0U2istQ@mail.gmail.com>
Message-ID: <loom.20111105T103759-9@post.gmane.org>

Andrew Brooks <arb <at> sat.dundee.ac.uk> writes:

> 
> 
> On 3 November 2011 20:38, Jukka Rahkonen  wrote:
> 
> 
> 
> Thereafter I will try if I can just turn the coordinates from these
> <gml:lowerCorner>6605838.360 61685.735</gml:lowerCorner>
> into these
> <gml:lowerCorner>61685.735 6605838.360</gml:lowerCorner>
> in the whole xml file with awk or something else as horrible.
> 
> Maybe something like this?
> 
> perl -ne 's,<gml:lowerCorner>([-+e\.0-9]+)
+([-+e\.0-9]+)</gml:lowerCorner>,
<gml:lowerCorner>\2 \1</gml:lowerCorner>,;print;'

Thanks for the suggestion. I did not try it, though, because I already had three
solutions. The first and best was that data provider corrected the data. I still
continued a bit further and found that PostGIS 2.0 has a function
ST_FlipCoordinates for this purpose, and Spatialite has similar function
SwapCoordinates. I'd guess that it would be a bit harder to handle a list of
coordinates in linestrings and polygons.

-Jukka Rahkonen-


From saarko at alaska.edu  Sat Nov  5 19:25:43 2011
From: saarko at alaska.edu (Scott Arko)
Date: Sun Nov  6 13:04:41 2011
Subject: [gdal-dev] Aster tif files to hgt
In-Reply-To: <190316.26140.42703-6385-1902410970-1320485190@seznam.cz>
References: <190316.26140.42703-6385-1902410970-1320485190@seznam.cz>
Message-ID: <CAFCnYQNbKT=w7tD7_a6hYUGgjAXpYRC2RPncw5+CVL4dsVooyw@mail.gmail.com>

Hello Mira,


You should be able to convert directly to this format with gdal_translate.
Something like

gdal_translate -of SRTMHGT input.tif output.hgt

I have done this in the past to convert to the SRTM format and it has
worked fine.



On Sat, Nov 5, 2011 at 1:26 AM, Jarom?r Mike? <mira.mikes@seznam.cz> wrote:

> Hi list,
>
> I recently downloaded Aster v2 tif files which I would like convert
> hgt file to be used by Srtm2osm program.
> Gdal looks like right tools for doing this.
>
> Can somebody here advise me how to do this?
>
> best regards
>
> mira
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Scott Arko
Alaska Satellite Facility Deputy Director
University of Alaska Fairbanks

903 Koyukuk Drive
Fairbanks, AK 99775
Phone: (907) 474 - 5570
email:  saarko@alaska.edu
http://www.asf.alaska.edu/aadn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111105/849ad7a7/attachment.html
From yehil at rafael.co.il  Sun Nov  6 04:25:03 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun Nov  6 23:38:59 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
In-Reply-To: <CACALY+STr+0ZFPKPEaoMEgnSjrA_0gdS9Mj+afGUYA+qWi3T3w@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local><1320148785.4eafdf31e6d5f@webmail.free.fr><CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com><C5D1974ECA44D2429ECBC64B967C34C0A277A7D7C1@MAILBOXSERVER.rf.local><CACALY+STr+0ZFPKPEaoMEgnSjrA_0gdS9Mj+afGUYA+qWi3T3w@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A277D8A712@MAILBOXSERVER.rf.local>

Hi Tamas
To replicate you can use the GDALReadDirect c# sample with the test data file:
http://download.osgeo.org/gdal/data/jpeg2000/utm.jp2

The command I use is:
GDALReadDirect utm.jp2 overview0.png 0

Thanks
Yehiyam

From: Tamas Szekeres [mailto:szekerest@gmail.com]
Sent: Wednesday, November 02, 2011 8:42 PM
To: Livneh Yehiyam
Cc: gdal-dev
Subject: Re: [gdal-dev] Kakadu Jpeg2000 driver

This sounds like a driver specific problem. Do you have some test data to reproduce this?

Best regards,

Tamas



2011/11/2 Livneh Yehiyam <yehil@rafael.co.il<mailto:yehil@rafael.co.il>>
Hi
I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
I'm working on windows7 64 bit with gdal source version 1.8.1

I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal with the driver enabled. I'm using the c# binding.

I can open the dataset, and everything looks ok (size, number of overviews, band count etc.).
When I read data from one of the bands at the base resolution (lets say it is 512x512) I get the correct data.
Band mainBand = dataset.GetRasterBand(1);
mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);

If I get one of the overview bands:
Band overviewBand = mainBand.GetOverview(0);

And I try to read the entire band (lets say it is 256x256):
overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
What I get in the buffer are the first 256x256 pixels of the mainBand.
This is contrary to the behavior I'm used to get when reading GTiff files, or even JPEG2000 with the JP2ECW driver.

Is this behavior by design, or is there another way to achieve what I want.

Thanks
Yehiyam

________________________________
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf@rafael.co.il<mailto:lawraf@rafael.co.il> and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
________________________________

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111106/d48ea581/attachment.html
From mira.mikes at seznam.cz  Sun Nov  6 10:46:41 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Mon Nov  7 06:19:20 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <CAFCnYQNbKT=w7tD7_a6hYUGgjAXpYRC2RPncw5+CVL4dsVooyw@mail.gmail.com>
Message-ID: <190366.26101.42650-15210-1222044003-1320594401@seznam.cz>

> Od: Scott Arko <saarko@alaska.edu>

Hello Scott

> You should be able to convert directly to this format with gdal_translate.
> Something like
> 
> gdal_translate -of SRTMHGT input.tif output.hgt
> 
> I have done this in the past to convert to the SRTM format and it has
> worked fine.

Conversion works fine, thank you.
Only issue is that srmt2osm program generate highest peaks 7500m for area where is max high 2500m ;(
Maybe problem with different resolution between srtm and aster data?
Or some weird artifacts?

I will finish map this night so I will see more then

regards

mira
From aashishcy at gmail.com  Sun Nov  6 13:21:09 2011
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Mon Nov  7 09:01:56 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CABUeae9NROP25Gm8WbVxfWuviY5UEKpKbyZC5Buf1DbP_ksX=A@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
	<CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>
	<CAGeT8ynrdjrw_nN4BATCeJQyi1XwpHqfmEKmGKaew7SLsUK4dw@mail.gmail.com>
	<CABUeae9NROP25Gm8WbVxfWuviY5UEKpKbyZC5Buf1DbP_ksX=A@mail.gmail.com>
Message-ID: <CAGeT8y=Lffx4PLfFjOJbEs6URozkBKLzKG82oPv72thgoeXJFg@mail.gmail.com>

Hi Mateusz,


> Given the experience you have at Kitware with big CMake-driven projects,
> it would be very useful if you can evaluate for example Boost CMake.
> Is this a good piece of CMake configuration?
> What are its weaknesses?
> If we need to discuss it, then I'd suggest to do it outside gdal-dev
> list to avoid off-topic here.
>
> Next, I will ask GDAL PSC for permission to create sandbox repository for
> us.
> I think it would be good to host it in GDAL's spike, e.g.
>
> http://svn.osgeo.org/gdal/spike/cmake
>
> or may be as an official branch in
>
> http://svn.osgeo.org/gdal/branches/cmake
>
> You will have to obtain access to SVN too.
> Once we have the home ready, we start scripting.
>
> Sure, but I was thinking git, because that would make
our development faster and easier. git is pretty cool in a way that it
really allows collaboration
between developers.  What you think?


> > Should we start from scratch?
>
> I think we start from scratch anyway.
> Previous gdal-cmake attempt would not be a good foundation.
>

Sounds good.

>
> > I would like to get it started as soon as possible.
>
> Sure, here we come.
>

!!  Thanks

>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111106/35eb0b24/attachment.html
From mateusz at loskot.net  Sun Nov  6 15:20:24 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Mon Nov  7 11:07:57 2011
Subject: [gdal-dev] Re: Wiki page about CMake for GDAL
In-Reply-To: <CAGeT8y=Lffx4PLfFjOJbEs6URozkBKLzKG82oPv72thgoeXJFg@mail.gmail.com>
References: <CABUeae8Uch0hCi4uMcM1vy2noFo+D6QZj-p5F4VPML5Jo5ZVMA@mail.gmail.com>
	<CAGeT8ynggVwrLAcNEQdBBagRbhpK53u2A4HJFPde1MMQzw4jkA@mail.gmail.com>
	<CAGeT8ynwNnj4QPWZrK7xUsE2s0oc4Wvp2qWH+cFArW=wdeLXxA@mail.gmail.com>
	<CABUeae_Ue2iNDGNuqJaVAj=gm10D5bX1ozuHx83e44AXwOoROA@mail.gmail.com>
	<CAGeT8ynrdjrw_nN4BATCeJQyi1XwpHqfmEKmGKaew7SLsUK4dw@mail.gmail.com>
	<CABUeae9NROP25Gm8WbVxfWuviY5UEKpKbyZC5Buf1DbP_ksX=A@mail.gmail.com>
	<CAGeT8y=Lffx4PLfFjOJbEs6URozkBKLzKG82oPv72thgoeXJFg@mail.gmail.com>
Message-ID: <CABUeae-te0fEr-GX=1V1HrTuCFraUZ3vffQNsG_VzeTXsFvv_A@mail.gmail.com>

2011/11/6 Jayesh Chaudhary <aashishcy@gmail.com>:
>> Given the experience you have at Kitware with big CMake-driven projects,
>> it would be very useful if you can evaluate for example Boost CMake.
>> Is this a good piece of CMake configuration?
>> What are its weaknesses?
>> If we need to discuss it, then I'd suggest to do it outside gdal-dev
>> list to avoid off-topic here.
>>
>> Next, I will ask GDAL PSC for permission to create sandbox repository for
>> us.
>> I think it would be good to host it in GDAL's spike, e.g.
>>
>> http://svn.osgeo.org/gdal/spike/cmake
>>
>> or may be as an official branch in
>>
>> http://svn.osgeo.org/gdal/branches/cmake
>>
>> You will have to obtain access to SVN too.
>> Once we have the home ready, we start scripting.
>
> Sure, but I was thinking git, because that would make our?development?faster
> and easier. git is pretty cool in a way that it really allows collaboration
> between developers. ?What you think?

Git works for me perfectly.
So, feel free to setup repo and I'll join.
My github is account https://github.com/mloskot.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From luqi.cg at gmail.com  Mon Nov  7 02:47:46 2011
From: luqi.cg at gmail.com (sjtuDNA)
Date: Mon Nov  7 23:13:15 2011
Subject: [gdal-dev] Re: OGR to access s57 file, missing attributes issue
In-Reply-To: <1320422724.15679.YahooMailNeo@web110812.mail.gq1.yahoo.com>
References: <1320394313084-6961974.post@n2.nabble.com>
	<1320422724.15679.YahooMailNeo@web110812.mail.gq1.yahoo.com>
Message-ID: <1320652066820-6969449.post@n2.nabble.com>

Hi Sylvain,

Yes I want to render ENC in S52. But my first question is how can I get the
rest attributes like ATTV, ATTL etc.

I'm now reviewing the ogr code to get the information i need.

rgds,

Qi

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-missing-attributes-issue-tp6961974p6969449.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tappenbeck at widemann.de  Mon Nov  7 07:03:43 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Tue Nov  8 03:43:10 2011
Subject: [gdal-dev] add tranperency
Message-ID: <4EB7C91F.2070104@widemann.de>



  Hi !

i have a image with following data:

C:\Program Files (x86)\FWTools2.4.7>gdalinfo "[Path]\trans_a.tif"
Driver: GTiff/GeoTIFF
Files: D:\brumi\VG_Bruchmuehlbach-Miesau_DOP\geotiff\trans_a.tif
Size is 10390, 10390
Coordinate System is:
PROJCS["DHDN / 3-degree Gauss-Kruger zone 2",
     GEOGCS["DHDN",
         DATUM["Deutsches_Hauptdreiecksnetz",
             SPHEROID["Bessel 1841",6377397.155,299.1528128000009,
                 AUTHORITY["EPSG","7004"]],
             AUTHORITY["EPSG","6314"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4314"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",6],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",2500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","31466"]]
Origin = (2601576.178792405400000,5477422.986974134100000)
Pixel Size = (0.200049845331526,-0.200049845331526)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 2601576.179, 5477422.987) (  7d24'1.33"E, 49d25'34.75"N)
Lower Left  ( 2601576.179, 5475344.469) (  7d23'59.41"E, 49d24'27.48"N)
Upper Right ( 2603654.697, 5477422.987) (  7d25'44.45"E, 49d25'33.49"N)
Lower Right ( 2603654.697, 5475344.469) (  7d25'42.50"E, 49d24'26.22"N)
Center      ( 2602615.438, 5476383.728) (  7d24'51.92"E, 49d25'0.49"N)
Band 1 Block=10390x1 Type=Byte, ColorInterp=Red
Band 2 Block=10390x1 Type=Byte, ColorInterp=Green
Band 3 Block=10390x1 Type=Byte, ColorInterp=Blue

there are black arrows at the border (by transformation) - is it 
possible to make i transparency ?

how?

gdal_translate -of ECW old_image.tif new_image.ecw

tells that is unpossible !!!

can you help me ?

regards Jan :-)


From mira.mikes at seznam.cz  Mon Nov  7 11:42:46 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Tue Nov  8 08:39:23 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <190366.26101.42650-15210-1222044003-1320594401@seznam.cz>
Message-ID: <190441.26038.42461-14372-247284315-1320684166@seznam.cz>

> Od: Jarom?r Mike? <mira.mikes@seznam.cz>

Hi list

> > gdal_translate -of SRTMHGT input.tif output.hgt

Now I need resample files from 1 arc-second (30m) resolution to 3 arc-second (90m).
Can this be done with gdal?

best regards

mira
From chaitanya.ch at gmail.com  Mon Nov  7 13:36:22 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov  8 10:37:03 2011
Subject: [gdal-dev] add tranperency
In-Reply-To: <4EB7C91F.2070104@widemann.de>
References: <4EB7C91F.2070104@widemann.de>
Message-ID: <CAMKgpOYrcnR2+BRLu9iHtbDc0+NAdZKZqwvwJG5RwksT-n_ytQ@mail.gmail.com>

Jan,

You can use the -srcnodata and -dstalpha options of gdalwarp[1] to set
nodata values and create an alpha band to the image. You will have to give
the value of the black borders with the -srcnodata option.

[1]: http://www.gdal.org/gdalwarp.html

On Mon, Nov 7, 2011 at 5:33 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  Hi !
>
> i have a image with following data:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo "[Path]\trans_a.tif"
> Driver: GTiff/GeoTIFF
> Files: D:\brumi\VG_Bruchmuehlbach-**Miesau_DOP\geotiff\trans_a.tif
> Size is 10390, 10390
> Coordinate System is:
> PROJCS["DHDN / 3-degree Gauss-Kruger zone 2",
>    GEOGCS["DHDN",
>        DATUM["Deutsches_**Hauptdreiecksnetz",
>            SPHEROID["Bessel 1841",6377397.155,299.**1528128000009,
>                AUTHORITY["EPSG","7004"]],
>            AUTHORITY["EPSG","6314"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.**0174532925199433],
>        AUTHORITY["EPSG","4314"]],
>    PROJECTION["Transverse_**Mercator"],
>    PARAMETER["latitude_of_origin"**,0],
>    PARAMETER["central_meridian",**6],
>    PARAMETER["scale_factor",1],
>    PARAMETER["false_easting",**2500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","31466"]]
> Origin = (2601576.178792405400000,**5477422.986974134100000)
> Pixel Size = (0.200049845331526,-0.**200049845331526)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 2601576.179, 5477422.987) (  7d24'1.33"E, 49d25'34.75"N)
> Lower Left  ( 2601576.179, 5475344.469) (  7d23'59.41"E, 49d24'27.48"N)
> Upper Right ( 2603654.697, 5477422.987) (  7d25'44.45"E, 49d25'33.49"N)
> Lower Right ( 2603654.697, 5475344.469) (  7d25'42.50"E, 49d24'26.22"N)
> Center      ( 2602615.438, 5476383.728) (  7d24'51.92"E, 49d25'0.49"N)
> Band 1 Block=10390x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10390x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10390x1 Type=Byte, ColorInterp=Blue
>
> there are black arrows at the border (by transformation) - is it possible
> to make i transparency ?
>
> how?
>
> gdal_translate -of ECW old_image.tif new_image.ecw
>
> tells that is unpossible !!!
>
> can you help me ?
>
> regards Jan :-)
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111108/0894cdcd/attachment.html
From warmerdam at pobox.com  Mon Nov  7 13:44:55 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov  8 10:46:03 2011
Subject: [gdal-dev] JP2KAK Resilience Mode
Message-ID: <CA+YzLBeHhZJELfx2eT-1UZVA-R0fOXOYViyL3DCVx1749J6m2g@mail.gmail.com>

Folks,

If you never use the JP2KAK driver you can stop reading now.

>From time to time over the years I and others have had problems
reading some JPEG2000 files with the JP2KAK driver.  In some cases
the same files would work fine with the JP2ECW driver or with other
JPEG2000 products.  This issue came up again for me, and I took
some time to dive deep into the jpeg2000 code stream and the Kakadu
code, and I think I have come up with a useful improvement.

The change (in trunk) is to force sequential, non-persistant
resilient mode if the JP2KAK_RESILIENT config option is set
to TRUE.  This is an extension to the previous meaning of this
option.  In the past it just forced resilient mode but it turns out
this wasn't enough for many problems.

So, if you have JPEG2000 files that did not work with JP2KAK
in the past, I'd appreciate your trying them again with trunk, something
like:

  gdal_translate --config JP2KAK_RESILIENT YES your_problem.jp2 out.tif

Please note success or failure in:

  http://trac.osgeo.org/gdal/ticket/4336

I'm open to the possibility of backporting this change to 1.8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From traviskirstine at gmail.com  Mon Nov  7 13:48:09 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue Nov  8 10:49:28 2011
Subject: [gdal-dev] add tranperency
In-Reply-To: <CAMKgpOYrcnR2+BRLu9iHtbDc0+NAdZKZqwvwJG5RwksT-n_ytQ@mail.gmail.com>
References: <4EB7C91F.2070104@widemann.de>
	<CAMKgpOYrcnR2+BRLu9iHtbDc0+NAdZKZqwvwJG5RwksT-n_ytQ@mail.gmail.com>
Message-ID: <CALtm4h3H=fm6+L6kZ3MaXaUZGsCTcnjS+HByB6RsXkL=7uaC8Q@mail.gmail.com>

Jan,

You may have some difficulties with creating a ECW output format with
gdalwarp, I would try GeoTiff first.  Also 3 band ECW have issues with
creation of compression artifacts in nodata areas so translating the
GeoTiff to ECW may not work as expected.

Regards

On 7 November 2011 13:36, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> Jan,
>
> You can use the -srcnodata and -dstalpha options of gdalwarp[1] to set
> nodata values and create an alpha band to the image. You will have to give
> the value of the black borders with the -srcnodata option.
>
> [1]: http://www.gdal.org/gdalwarp.html
>
> On Mon, Nov 7, 2011 at 5:33 PM, Jan Tappenbeck <tappenbeck@widemann.de>
> wrote:
>>
>>
>> ?Hi !
>>
>> i have a image with following data:
>>
>> C:\Program Files (x86)\FWTools2.4.7>gdalinfo "[Path]\trans_a.tif"
>> Driver: GTiff/GeoTIFF
>> Files: D:\brumi\VG_Bruchmuehlbach-Miesau_DOP\geotiff\trans_a.tif
>> Size is 10390, 10390
>> Coordinate System is:
>> PROJCS["DHDN / 3-degree Gauss-Kruger zone 2",
>> ? ?GEOGCS["DHDN",
>> ? ? ? ?DATUM["Deutsches_Hauptdreiecksnetz",
>> ? ? ? ? ? ?SPHEROID["Bessel 1841",6377397.155,299.1528128000009,
>> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7004"]],
>> ? ? ? ? ? ?AUTHORITY["EPSG","6314"]],
>> ? ? ? ?PRIMEM["Greenwich",0],
>> ? ? ? ?UNIT["degree",0.0174532925199433],
>> ? ? ? ?AUTHORITY["EPSG","4314"]],
>> ? ?PROJECTION["Transverse_Mercator"],
>> ? ?PARAMETER["latitude_of_origin",0],
>> ? ?PARAMETER["central_meridian",6],
>> ? ?PARAMETER["scale_factor",1],
>> ? ?PARAMETER["false_easting",2500000],
>> ? ?PARAMETER["false_northing",0],
>> ? ?UNIT["metre",1,
>> ? ? ? ?AUTHORITY["EPSG","9001"]],
>> ? ?AUTHORITY["EPSG","31466"]]
>> Origin = (2601576.178792405400000,5477422.986974134100000)
>> Pixel Size = (0.200049845331526,-0.200049845331526)
>> Metadata:
>> ?AREA_OR_POINT=Area
>> Image Structure Metadata:
>> ?INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left ?( 2601576.179, 5477422.987) ( ?7d24'1.33"E, 49d25'34.75"N)
>> Lower Left ?( 2601576.179, 5475344.469) ( ?7d23'59.41"E, 49d24'27.48"N)
>> Upper Right ( 2603654.697, 5477422.987) ( ?7d25'44.45"E, 49d25'33.49"N)
>> Lower Right ( 2603654.697, 5475344.469) ( ?7d25'42.50"E, 49d24'26.22"N)
>> Center ? ? ?( 2602615.438, 5476383.728) ( ?7d24'51.92"E, 49d25'0.49"N)
>> Band 1 Block=10390x1 Type=Byte, ColorInterp=Red
>> Band 2 Block=10390x1 Type=Byte, ColorInterp=Green
>> Band 3 Block=10390x1 Type=Byte, ColorInterp=Blue
>>
>> there are black arrows at the border (by transformation) - is it possible
>> to make i transparency ?
>>
>> how?
>>
>> gdal_translate -of ECW old_image.tif new_image.ecw
>>
>> tells that is unpossible !!!
>>
>> can you help me ?
>>
>> regards Jan :-)
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Mon Nov  7 15:02:00 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Nov  8 12:07:24 2011
Subject: [gdal-dev] Re: JP2KAK Resilience Mode
References: <CA+YzLBeHhZJELfx2eT-1UZVA-R0fOXOYViyL3DCVx1749J6m2g@mail.gmail.com>
Message-ID: <loom.20111107T204954-5@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Folks,
> 
> If you never use the JP2KAK driver you can stop reading now.

What is the method for us poor Windows users for getting JP2KAK support
nowadays? We have a license and Kakadu SDK but no tools nor knowledge for doing
anything difficult. However, we have terabytes of JPEG2000 images to play with.
Just last week I came back to some of our 7, 8 and 9 channel Landsat images
including channels with 15, 30 and 60 m resolution and the only way to handle
those was to use Kakadu utility programs. Also some of my odd jpf experiments
could only be decoded by kdu_expand and I would like to have a try with gdal and
JP2KAK.
Alternatively I can make a few test images available for download.

-Jukka Rahkonen-



From warmerdam at pobox.com  Mon Nov  7 16:29:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov  8 13:39:48 2011
Subject: [gdal-dev] Re: JP2KAK Resilience Mode
In-Reply-To: <loom.20111107T204954-5@post.gmane.org>
References: <CA+YzLBeHhZJELfx2eT-1UZVA-R0fOXOYViyL3DCVx1749J6m2g@mail.gmail.com>
	<loom.20111107T204954-5@post.gmane.org>
Message-ID: <CA+YzLBeSV=VurDnwNZ=C_ZoG+xQSGQf6qWq70jwyUZGanBwy6Q@mail.gmail.com>

Jukka,

It can be fairly challenging to build the JP2KAK driver, particularly
on Windows and with it being distinctly not open source it is hard
for me to distribute binaries.

I have made a calendar item for myself tonight to backport the
fixes to 1.8 and to build a JP2KAK plugin I can privately distribute
to Kakadu license holders.  Poke me tomorrow if you don't hear
from me.

Best regards,
Frank

On Mon, Nov 7, 2011 at 12:02 PM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi> wrote:
> Frank Warmerdam <warmerdam <at> pobox.com> writes:
>
>>
>> Folks,
>>
>> If you never use the JP2KAK driver you can stop reading now.
>
> What is the method for us poor Windows users for getting JP2KAK support
> nowadays? We have a license and Kakadu SDK but no tools nor knowledge for doing
> anything difficult. However, we have terabytes of JPEG2000 images to play with.
> Just last week I came back to some of our 7, 8 and 9 channel Landsat images
> including channels with 15, 30 and 60 m resolution and the only way to handle
> those was to use Kakadu utility programs. Also some of my odd jpf experiments
> could only be decoded by kdu_expand and I would like to have a try with gdal and
> JP2KAK.
> Alternatively I can make a few test images available for download.
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mira.mikes at seznam.cz  Mon Nov  7 18:09:44 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Tue Nov  8 15:25:38 2011
Subject: =?us-ascii?Q?Re=3A=20Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <4EB84FEA.4060703@gmx.eu>
Message-ID: <190462.26016.42424-29411-904411385-1320707384@seznam.cz>

> Od: Hermann Peifer <peifer@gmx.eu>

> >> Od: Jarom?r Mike?<mira.mikes@seznam.cz>

> > Now I need resample files from 1 arc-second (30m) resolution to 3 arc-second
> (90m).
> > Can this be done with gdal?

> Did you try an Internet search with "gdal resample" as search words?

Hello Hermann,

I found this example while ago:
http://wiki.openstreetmap.org/wiki/HikingBikingMaps
(section "Hill shading")

Now I trying do something like this in my perl script:
	`gdalwarp -of GTiff -srcnodata 32767 -t_srs "+proj=merc +ellps=sphere +R=6378137 +a=6378137 +units=m"-rcs -order 3 -tr 90 90 -multi ASTGTM2_${tile}_dem.tif ${tile}.tif` ;


	`gdal_translate -of SRTMHGT ${tile}.tif ${tile}.hgt` ;
_________________________________

I am getting errors on creating hgt files:
Warning 1: The source projection coordinate system is PROJCS["unnamed",GEOGCS["unnamed ellipse",DATUM["unknown",SPHEROID["unnamed",6378137,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]. Only WGS 84 is supported.
The SRTMHGT driver will generate a file as if the source was WGS 84 projection coordinate system.
Warning 1: The corner coordinates of the source are not properly aligned on plain latitude/longitude boundaries.
ERROR 1: Image dimensions should be 1201x1201 or 3601x3601.

Looks like problem is in -t_srs option, gdalwarp is not work if I remove this option totally.

I tried also +proj=WGS84, but it wasn't recognized as right option.

Also this "+proj=utm +datum=WGS84" I tried with error:
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.

Any hint where I can find more info about -t_srs options?
BTW I am doing map for southern hemisphere, not shure if this matter. 

regards

mira 



From mira.mikes at seznam.cz  Mon Nov  7 20:24:38 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Tue Nov  8 17:48:00 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <CAFCnYQP3=Au4L6yQiVJDjwvrLc=knMO8N5XyY_fqBXU-ui52ZA@mail.gmail.com>
Message-ID: <190472.26024.42420-16994-1421630568-1320715478@seznam.cz>

> Od: Scott Arko <saarko@alaska.edu>

Hello Scott,

> To resample your data, you will need to call gdalwarp with the -tr option.
>  This is specified in whatever the native units are for your projection.
>  In the case of UTM, meters.  So, something like:
> 
> gdalwarp -of SRTMHGT -tr 30 30 -r bilinear input.hgt output.hgt
> 
> I see you also are using the -t_srs option.  I find it best if you can use
> the EPSG codes when using -t_srs.  Something like
> 
> gdalwarp -t_srs EPSG:13606 .....
> 
> 13606 is for UTM Zone 6N.  Codes vary by zone.

I can't find EPSG code for area I building map (18F, 19F - Patagonia)
So I am doing this now in my script:

gdalwarp -of GTiff -srcnodata 32767 -t_srs "+proj=utm +zone=18F +datum=WGS84" -rcs -order 3 -tr 30 30 -multi ASTGTM2_${tile}_dem.tif ${tile}.tif

this goes fine, but when I am trying then convert to hgt having errors:

gdal_translate -of SRTMHGT ${tile}.tif ${tile}.hgt

Warning 1: The corner coordinates of the source are not properly aligned on plain latitude/longitude boundaries.
ERROR 1: Image dimensions should be 1201x1201 or 3601x3601.

Any suggestion?

Thank you

mira
From mira.mikes at seznam.cz  Mon Nov  7 23:36:35 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Tue Nov  8 21:10:36 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <190472.26024.42420-16994-1421630568-1320715478@seznam.cz>
Message-ID: <190480.26011.42417-23305-400958769-1320726995@seznam.cz>

> Od: Jarom?r Mike? <mira.mikes@seznam.cz>

> gdal_translate -of SRTMHGT ${tile}.tif ${tile}.hgt
> 
> Warning 1: The corner coordinates of the source are not properly aligned on
> plain latitude/longitude boundaries.
> ERROR 1: Image dimensions should be 1201x1201 or 3601x3601.

$ gdalwarp -of GTiff -srcnodata 32767 -t_srs "+proj=utm +zone=18F +datum=WGS84" -rcs -order 3 -tr 90 90 -multi ASTGTM2_S50W068_dem.tif S50W068.tif
Creating output file that is 927P x 1314L.
[snip]

$ gdal_translate -of SRTMHGT S50W068.tif S50W068.hgt
Input file size is 927, 1314
0Warning 1: The corner coordinates of the source are not properly aligned on plain latitude/longitude boundaries.
ERROR 1: Image dimensions should be 1201x1201 or 3601x3601.

So I think instead of -tr 90 90 should be used -ts 1201 1201 for re-sampling in this case, because image dimensions  1201x1201 is expected from gdal_translate -of SRTMHGT

$ gdalwarp -of GTiff  -srcnodata 32767 -t_srs "+proj=utm +zone=18F +datum=WGS84" -rcs -order 3 -ts 1201 1201 -multi ASTGTM2_S50W068_dem.tif S50W068.tif
Creating output file that is 1201P x 1201L.
[snip]

$ gdal_translate -of SRTMHGT  S50W068.tif  S50W068.hgt
Input file size is 1201, 1201
0Warning 1: The corner coordinates of the source are not properly aligned on plain latitude/longitude boundaries.
Warning 1: Expected output filename is S5569384E10.

I still need get rid of this 0Warning.

thank you

mira
From luqi.cg at gmail.com  Tue Nov  8 00:46:33 2011
From: luqi.cg at gmail.com (sjtuDNA)
Date: Tue Nov  8 22:24:39 2011
Subject: [gdal-dev] Re: OGR to access s57 file, missing attributes issue
In-Reply-To: <1320422724.15679.YahooMailNeo@web110812.mail.gq1.yahoo.com>
References: <1320394313084-6961974.post@n2.nabble.com>
	<1320422724.15679.YahooMailNeo@web110812.mail.gq1.yahoo.com>
Message-ID: <1320731193658-6973258.post@n2.nabble.com>

Finally I got whats wrong with my code.

The problem is :

The S-57 reader depends on having two supporting files,
s57objectclasses.csv, and s57attributes.csv available at runtime in order to
translate features in an object class specific manner. These should be in
the directory pointed to by the environment variable S57_CSV, or in the
current working directory.

By setting environment variable S57_CSV, i get the additional layers.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-to-access-s57-file-missing-attributes-issue-tp6961974p6973258.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yjacolin at free.fr  Tue Nov  8 05:40:33 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov  9 06:17:11 2011
Subject: [gdal-dev] Optimisation of ECW files
Message-ID: <201111081140.33409.yjacolin@free.fr>

Hello,

I have an issue with one of my project which need some frequent update and I 
need some advice.

We have a dataset of small ECW files (5 300 files from 30 to 300 ko). This is 
not the way I want to manage my data to get good performance with MapServer. 
Too much file, too smal.

All this tiles don't form a regular single tile. I mean some part are hole.

Here is my issues after merging all the tiles:
* we lose extent in the final ECW file
* we have some black background which is not what expected
* we need to update this final tiles frequently, and so we need fast process :)

ECW format doesn't manage nodata so do it mean that I can't have alphaband and 
so I have no solution to get another background color (white or transparent)?

Does exist some flag to save extent in the final ECW ?

Have you some advice in order to get what I want (alphaband, good perfomance)? 
I can change file format if needed. We though to use TIFF files with a merge of 
some of them to get bigger tiles. We can either merge all the tiles, and then 
merge new tile with this final files or create tileindex for the bigger tiles.

Any hints, advices?

Thanks!

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From saarko at alaska.edu  Tue Nov  8 12:43:37 2011
From: saarko at alaska.edu (Scott Arko)
Date: Wed Nov  9 11:01:24 2011
Subject: [gdal-dev] Aster tif files to hgt
In-Reply-To: <190472.26024.42420-16994-1421630568-1320715478@seznam.cz>
References: <CAFCnYQP3=Au4L6yQiVJDjwvrLc=knMO8N5XyY_fqBXU-ui52ZA@mail.gmail.com>
	<190472.26024.42420-16994-1421630568-1320715478@seznam.cz>
Message-ID: <CAFCnYQNDb9fC3_-U7oWK=O=dhOzxj29wCrpYgCow5CTtxsXdeQ@mail.gmail.com>

Hello Mira,


The error you are getting is because for the SRTM height format you need to
have very specific coordinates for the tiles.  I'm not sure I can exactly
explain why this is, but you need to have 1201x1201 for the 1 degree tiles.
 Also, you need to use the -projwin option to have the corners line up
properly.  Here is a command I used to generate 1 degree tiles for a
similar problem as yours (i.e. taking another format DEM and making it look
like SRTM)

gdal_translate -of SRTMHGT -projwin 72 30 73.000139 28.9998611
SRTM_30m_ELLIPSOID_HGT_EXPANDED_MOSAIC_GEO N29E072.hgt

You can see that the LR corner extends past 73/29 by one half an arc-second
(.000139 degrees).  This worked for my application and properly formatted
the tiles.  Hope this helps you sort out your problem.


Thanks,
Scott

On Mon, Nov 7, 2011 at 4:24 PM, Jarom?r Mike? <mira.mikes@seznam.cz> wrote:

> > Od: Scott Arko <saarko@alaska.edu>
>
> Hello Scott,
>
> > To resample your data, you will need to call gdalwarp with the -tr
> option.
> >  This is specified in whatever the native units are for your projection.
> >  In the case of UTM, meters.  So, something like:
> >
> > gdalwarp -of SRTMHGT -tr 30 30 -r bilinear input.hgt output.hgt
> >
> > I see you also are using the -t_srs option.  I find it best if you can
> use
> > the EPSG codes when using -t_srs.  Something like
> >
> > gdalwarp -t_srs EPSG:13606 .....
> >
> > 13606 is for UTM Zone 6N.  Codes vary by zone.
>
> I can't find EPSG code for area I building map (18F, 19F - Patagonia)
> So I am doing this now in my script:
>
> gdalwarp -of GTiff -srcnodata 32767 -t_srs "+proj=utm +zone=18F
> +datum=WGS84" -rcs -order 3 -tr 30 30 -multi ASTGTM2_${tile}_dem.tif
> ${tile}.tif
>
> this goes fine, but when I am trying then convert to hgt having errors:
>
> gdal_translate -of SRTMHGT ${tile}.tif ${tile}.hgt
>
> Warning 1: The corner coordinates of the source are not properly aligned
> on plain latitude/longitude boundaries.
> ERROR 1: Image dimensions should be 1201x1201 or 3601x3601.
>
> Any suggestion?
>
> Thank you
>
> mira
>



-- 
Scott Arko
Alaska Satellite Facility Deputy Director
University of Alaska Fairbanks

903 Koyukuk Drive
Fairbanks, AK 99775
Phone: (907) 474 - 5570
email:  saarko@alaska.edu
http://www.asf.alaska.edu/aadn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111108/55de0f7c/attachment-0001.html
From alexander.bruy at gmail.com  Tue Nov  8 13:07:11 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Nov  9 11:26:19 2011
Subject: [gdal-dev] Strange behavior of gdalwarp with -overwrite option
Message-ID: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>

Hi all,

in gdalwarp documentation [0] listed option "-overwrite" with next description:
-overwrite:
    (GDAL >= 1.8.0) Overwrite the target dataset if it already exists.

But when I try to reproject image using next command

gdalwarp -t_srs EPSG:4326 -overwrite mosaic.tif mosaic.tif

i get next error

Creating output file that is 9122P x 2341L.
ERROR 4: `mosaic.tif' not recognised as a supported file format.

and mosaic.tif becomes 8 bytes size file (seems only tif header).
Is this bug or I misunderstand -overwrite option usage?
Tested on Slackware 13.37, GDAL 1.8.1, released 2011/07/09.


[0] http://www.gdal.org/gdalwarp.html

Thanks

-- 
Alexander Bruy
From jukka.rahkonen at mmmtike.fi  Tue Nov  8 13:18:19 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov  9 11:38:08 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
Message-ID: <loom.20111108T190909-304@post.gmane.org>

Alexander Bruy <alexander.bruy <at> gmail.com> writes:

> 
> Hi all,
> 
> in gdalwarp documentation [0] listed option "-overwrite" with next description:
> -overwrite:
>     (GDAL >= 1.8.0) Overwrite the target dataset if it already exists.
> 
> But when I try to reproject image using next command
> 
> gdalwarp -t_srs EPSG:4326 -overwrite mosaic.tif mosaic.tif
> 
> i get next error
> 
> Creating output file that is 9122P x 2341L.
> ERROR 4: `mosaic.tif' not recognised as a supported file format.
> 
> and mosaic.tif becomes 8 bytes size file (seems only tif header).
> Is this bug or I misunderstand -overwrite option usage?
> Tested on Slackware 13.37, GDAL 1.8.1, released 2011/07/09.
> 
> [0] http://www.gdal.org/gdalwarp.html

I bet you do not really want to overwrite the source image with the target image
because it will make you sad. Once gdal has written a beginning of the target
"mosaic.tif" you have deleted the original "mosaic.tif" and there is nothing
more to convert. Put that command into a patch file and you can wipe a few
hundred originals in some seconds so effectively that even data recovery
companies cannot get them back. I've tried it and I do not recommend it for
anybody else.
Gdalwarp -overwrite source.tif target.tif should overwrite the old existing
target.tif and that is a reasonable command sometimes.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Tue Nov  8 14:28:40 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov  9 12:52:10 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <loom.20111108T190909-304@post.gmane.org>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
Message-ID: <201111082028.40890.even.rouault@mines-paris.org>

Le mardi 08 novembre 2011 19:18:19, Jukka Rahkonen a ?crit :
> Alexander Bruy <alexander.bruy <at> gmail.com> writes:
> > Hi all,
> > 
> > in gdalwarp documentation [0] listed option "-overwrite" with next
> > description:
> > 
> > -overwrite:
> >     (GDAL >= 1.8.0) Overwrite the target dataset if it already exists.
> > 
> > But when I try to reproject image using next command
> > 
> > gdalwarp -t_srs EPSG:4326 -overwrite mosaic.tif mosaic.tif
> > 
> > i get next error
> > 
> > Creating output file that is 9122P x 2341L.
> > ERROR 4: `mosaic.tif' not recognised as a supported file format.
> > 
> > and mosaic.tif becomes 8 bytes size file (seems only tif header).
> > Is this bug or I misunderstand -overwrite option usage?
> > Tested on Slackware 13.37, GDAL 1.8.1, released 2011/07/09.
> > 
> > [0] http://www.gdal.org/gdalwarp.html

I'm not a native English speaker, but up to now, the meaning of "overwrite" 
has always been "delete and recreate". If you have a better wording for the 
doc to make it more explicit, you're welcome.

The point of overwrite is that it is a common source of confusion for users 
(including me!) when you do :

gdalwarp src.tif dest.tif -t_srs EPSG:XXXX

and then you realize that XXXX is not what you want. So you try:

gdalwarp src.tif dest.tif -t_srs EPSG:YYYY

And you spend half and hour understanding why it has not been reprojected in 
EPSG:YYYY. The default behaviour being that once the target dataset exists, it 
is only updated, but not modified in depth.

gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense, with or 
without -overwrite (and -overwrite will actually kill your target, ahem, 
source - since source=target - as you have seen !). Reprojection in place 
cannot work. You must specify a different target dataset. I can imagine that a 
safety check would make sense to detect such obvious error...

> 
> I bet you do not really want to overwrite the source image with the target
> image because it will make you sad. Once gdal has written a beginning of
> the target "mosaic.tif" you have deleted the original "mosaic.tif" and
> there is nothing more to convert. Put that command into a patch file and
> you can wipe a few hundred originals in some seconds so effectively that
> even data recovery companies cannot get them back. I've tried it and I do
> not recommend it for anybody else.
> Gdalwarp -overwrite source.tif target.tif should overwrite the old existing
> target.tif and that is a reasonable command sometimes.
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Nov  8 14:36:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov  9 13:00:01 2011
Subject: [gdal-dev] Optimisation of ECW files
In-Reply-To: <201111081140.33409.yjacolin@free.fr>
References: <201111081140.33409.yjacolin@free.fr>
Message-ID: <201111082036.06594.even.rouault@mines-paris.org>

Le mardi 08 novembre 2011 11:40:33, Yves Jacolin a ?crit :
> Hello,
> 
> I have an issue with one of my project which need some frequent update and
> I need some advice.
> 
> We have a dataset of small ECW files (5 300 files from 30 to 300 ko). This
> is not the way I want to manage my data to get good performance with
> MapServer. Too much file, too smal.

You didn't really say what was the problem with many small files... Why not 
putting them in a tileindex, possibly with an additionnal .qix spatial index ?

That will be the by far the easier solution to manage the update which is a 
big constraint in your process.

If you have specific performance problem with the ECW format you could probably 
translate those individual files into anothe format (uncompressed tiff, tiff with 
jpeg compression for example)

> 
> All this tiles don't form a regular single tile. I mean some part are hole.
> 
> Here is my issues after merging all the tiles:
> * we lose extent in the final ECW file
> * we have some black background which is not what expected
> * we need to update this final tiles frequently, and so we need fast
> process :)
> 
> ECW format doesn't manage nodata so do it mean that I can't have alphaband
> and so I have no solution to get another background color (white or
> transparent)?
> 
> Does exist some flag to save extent in the final ECW ?
> 
> Have you some advice in order to get what I want (alphaband, good
> perfomance)? I can change file format if needed. We though to use TIFF
> files with a merge of some of them to get bigger tiles. We can either
> merge all the tiles, and then merge new tile with this final files or
> create tileindex for the bigger tiles.
> 
> Any hints, advices?
> 
> Thanks!
> 
> Y.
From warmerdam at pobox.com  Tue Nov  8 14:49:33 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov  9 13:14:09 2011
Subject: [gdal-dev] Optimisation of ECW files
In-Reply-To: <201111081140.33409.yjacolin@free.fr>
References: <201111081140.33409.yjacolin@free.fr>
Message-ID: <CA+YzLBfg0=Bhjm94re1Q5NoOPNNyc88iPAU_T9tMNmnXp6Jv5Q@mail.gmail.com>

On Tue, Nov 8, 2011 at 2:40 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> Here is my issues after merging all the tiles:
> * we lose extent in the final ECW file

Yves,

You don't mention how you are merging the files, but generally speaking
GDAL should be able to capture the extents and coordinate system when
writing to ECW.  ECW coordinate system handling can be somewhat flaky
and it is possible that if the coordinate system mapping fails even the
extents are not written (or read) though I'm not sure about that.  You may
need to pick a specific ECW coordinate system and specify it with
creation options if this is the source of the issue.

> * we have some black background which is not what expected
> * we need to update this final tiles frequently, and so we need fast process :)
>
> ECW format doesn't manage nodata so do it mean that I can't have alphaband and
> so I have no solution to get another background color (white or transparent)?
>
> Does exist some flag to save extent in the final ECW ?
>
> Have you some advice in order to get what I want (alphaband, good perfomance)?
> I can change file format if needed. We though to use TIFF files with a merge of
> some of them to get bigger tiles. We can either merge all the tiles, and then
> merge new tile with this final files or create tileindex for the bigger tiles.

In theory you could maintain a separate alpha/mask file and associate
it using a wrapping VRT file around the ECW and alpha band.  But this
is a somewhat complicated approach and it may also result in ECW
reads being done in chunks for MapServer which could substantially
impact performance.

Also, in general, ECW is not updatable-in-place, so I don't see how
it could be suitable as a format for frequent updates.  You basically
would need to regenerate it from the source tiles for each update.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From yjacolin at free.fr  Tue Nov  8 16:23:34 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Nov  9 14:53:40 2011
Subject: [gdal-dev] Optimisation of ECW files
In-Reply-To: <CA+YzLBfg0=Bhjm94re1Q5NoOPNNyc88iPAU_T9tMNmnXp6Jv5Q@mail.gmail.com>
References: <201111081140.33409.yjacolin@free.fr>
	<CA+YzLBfg0=Bhjm94re1Q5NoOPNNyc88iPAU_T9tMNmnXp6Jv5Q@mail.gmail.com>
Message-ID: <201111082223.34112.yjacolin@free.fr>

Hello,

Le mardi 8 novembre 2011 20:49:33, Frank Warmerdam a ?crit :
> On Tue, Nov 8, 2011 at 2:40 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> > Here is my issues after merging all the tiles:
> > * we lose extent in the final ECW file
> 
> Yves,
> 
> You don't mention how you are merging the files, but generally speaking
> GDAL should be able to capture the extents and coordinate system when
> writing to ECW.  ECW coordinate system handling can be somewhat flaky
> and it is possible that if the coordinate system mapping fails even the
> extents are not written (or read) though I'm not sure about that.  You may
> need to pick a specific ECW coordinate system and specify it with
> creation options if this is the source of the issue.

I used gdal_merge.py from a vrt file. I will test to assign a ECW coordinate 
system.

> > * we have some black background which is not what expected
> > * we need to update this final tiles frequently, and so we need fast
> > process :)
> > 
> > ECW format doesn't manage nodata so do it mean that I can't have
> > alphaband and so I have no solution to get another background color
> > (white or transparent)?
> > 
> > Does exist some flag to save extent in the final ECW ?
> > 
> > Have you some advice in order to get what I want (alphaband, good
> > perfomance)? I can change file format if needed. We though to use TIFF
> > files with a merge of some of them to get bigger tiles. We can either
> > merge all the tiles, and then merge new tile with this final files or
> > create tileindex for the bigger tiles.
> 
> In theory you could maintain a separate alpha/mask file and associate
> it using a wrapping VRT file around the ECW and alpha band.  But this
> is a somewhat complicated approach and it may also result in ECW
> reads being done in chunks for MapServer which could substantially
> impact performance.
> 
> Also, in general, ECW is not updatable-in-place, so I don't see how
> it could be suitable as a format for frequent updates.  You basically
> would need to regenerate it from the source tiles for each update.
ok it was my conclusion also but I was not sure.

Thanks,

Y.
-- 
Yves Jacolin
From yjacolin at free.fr  Tue Nov  8 16:27:30 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Nov  9 14:57:46 2011
Subject: [gdal-dev] Optimisation of ECW files
In-Reply-To: <201111082036.06594.even.rouault@mines-paris.org>
References: <201111081140.33409.yjacolin@free.fr>
	<201111082036.06594.even.rouault@mines-paris.org>
Message-ID: <201111082227.30849.yjacolin@free.fr>

Le mardi 8 novembre 2011 20:36:06, Even Rouault a ?crit :
> Le mardi 08 novembre 2011 11:40:33, Yves Jacolin a ?crit :
> > Hello,
> > 
> > I have an issue with one of my project which need some frequent update
> > and I need some advice.
> > 
> > We have a dataset of small ECW files (5 300 files from 30 to 300 ko).
> > This is not the way I want to manage my data to get good performance
> > with MapServer. Too much file, too smal.
> 
> You didn't really say what was the problem with many small files... Why not
> putting them in a tileindex, possibly with an additionnal .qix spatial
> index ?

It seems there was a performance issue with this files. I though using a lot of 
small ECW files was not a good practice. Am I wrong?

> That will be the by far the easier solution to manage the update which is a
> big constraint in your process.
> 
> If you have specific performance problem with the ECW format you could
> probably translate those individual files into anothe format (uncompressed
> tiff, tiff with jpeg compression for example)
ok may be I need to check our performance issue.

Thanks,

Y.
> > All this tiles don't form a regular single tile. I mean some part are
> > hole.
> > 
> > Here is my issues after merging all the tiles:
> > * we lose extent in the final ECW file
> > * we have some black background which is not what expected
> > * we need to update this final tiles frequently, and so we need fast
> > process :)
> > 
> > ECW format doesn't manage nodata so do it mean that I can't have
> > alphaband and so I have no solution to get another background color
> > (white or transparent)?
> > 
> > Does exist some flag to save extent in the final ECW ?
> > 
> > Have you some advice in order to get what I want (alphaband, good
> > perfomance)? I can change file format if needed. We though to use TIFF
> > files with a merge of some of them to get bigger tiles. We can either
> > merge all the tiles, and then merge new tile with this final files or
> > create tileindex for the bigger tiles.
> > 
> > Any hints, advices?
> > 
> > Thanks!
> > 
> > Y.

-- 
Yves Jacolin
From mira.mikes at seznam.cz  Tue Nov  8 22:42:11 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Wed Nov  9 21:33:04 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <CAFCnYQNDb9fC3_-U7oWK=O=dhOzxj29wCrpYgCow5CTtxsXdeQ@mail.gmail.com>
Message-ID: <190550.25960.42315-20701-1153104846-1320810131@seznam.cz>

> Od: Scott Arko <saarko@alaska.edu>

Hello Scott,

> The error you are getting is because for the SRTM height format you need to
> have very specific coordinates for the tiles.  I'm not sure I can exactly
> explain why this is, but you need to have 1201x1201 for the 1 degree tiles.
>  Also, you need to use the -projwin option to have the corners line up
> properly.  Here is a command I used to generate 1 degree tiles for a
> similar problem as yours (i.e. taking another format DEM and making it look
> like SRTM)
> 
> gdal_translate -of SRTMHGT -projwin 72 30 73.000139 28.9998611
> SRTM_30m_ELLIPSOID_HGT_EXPANDED_MOSAIC_GEO N29E072.hgt
> 
> You can see that the LR corner extends past 73/29 by one half an arc-second
> (.000139 degrees).  This worked for my application and properly formatted
> the tiles.  Hope this helps you sort out your problem.

This can be quite complicated to do for 58 tiles as I do...

I checked gdalinfo for hgt file which I try to "imitate" and file I created ... they are identical.
$ gdalinfo
[snip]
Size is 1201, 1201
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Origin = (-72.000416666666666,-54.999583333333334)
Pixel Size = (0.000833333333333,-0.000833333333333)
Metadata:
  AREA_OR_POINT=Point
Corner Coordinates:
Upper Left  ( -72.0004167, -54.9995833) ( 72d 0'1.50"W, 54d59'58.50"S)
Lower Left  ( -72.0004167, -56.0004167) ( 72d 0'1.50"W, 56d 0'1.50"S)
Upper Right ( -70.9995833, -54.9995833) ( 70d59'58.50"W, 54d59'58.50"S)
Lower Right ( -70.9995833, -56.0004167) ( 70d59'58.50"W, 56d 0'1.50"S)
Center      ( -71.5000000, -55.5000000) ( 71d30'0.00"W, 55d30'0.00"S)
Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
  NoData Value=-32768
  Unit Type: m


`gdalwarp -of GTiff -srcnodata 32767  -rcs -order 3 -ts 1201 1201 -multi ASTGTM2_${tile}_dem.tif ${tile}.tif` ;


`gdal_translate -of SRTMHGT ${tile}.tif ${tile}.hgt` ;

So maybe there is no need for other alignment even there is a warning.
And srmt2osm program my hgt files accepts.
Or am I wrong and -projwin option and proper alignment is needed for proper accuracy?

regards

mira
From yehil at rafael.co.il  Wed Nov  9 01:01:09 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Nov 10 00:04:05 2011
Subject: [gdal-dev] Kakadu Jpeg2000 driver
References: <C5D1974ECA44D2429ECBC64B967C34C0A277A7D0AB@MAILBOXSERVER.rf.local><1320148785.4eafdf31e6d5f@webmail.free.fr><CACALY+SoLAw=ejC4UEjOGnwOehimH0qSVXtmcqm6CnqUbrS72Q@mail.gmail.com><C5D1974ECA44D2429ECBC64B967C34C0A277A7D7C1@MAILBOXSERVER.rf.local><CACALY+STr+0ZFPKPEaoMEgnSjrA_0gdS9Mj+afGUYA+qWi3T3w@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A27C6EFBD0@MAILBOXSERVER.rf.local>


Tamas,
Did you have a chance to check this problem? If so do you consider this a bug, or am I using it wrong?

Thanks
Yehiyam


From: Livneh Yehiyam
Sent: Sunday, November 06, 2011 11:25 AM
To: 'Tamas Szekeres'
Cc: gdal-dev
Subject: RE: [gdal-dev] Kakadu Jpeg2000 driver

Hi Tamas
To replicate you can use the GDALReadDirect c# sample with the test data file:
http://download.osgeo.org/gdal/data/jpeg2000/utm.jp2

The command I use is:
GDALReadDirect utm.jp2 overview0.png 0

Thanks
Yehiyam

From: Tamas Szekeres [mailto:szekerest@gmail.com]
Sent: Wednesday, November 02, 2011 8:42 PM
To: Livneh Yehiyam
Cc: gdal-dev
Subject: Re: [gdal-dev] Kakadu Jpeg2000 driver

This sounds like a driver specific problem. Do you have some test data to reproduce this?

Best regards,

Tamas



2011/11/2 Livneh Yehiyam <yehil@rafael.co.il<mailto:yehil@rafael.co.il>>
Hi
I'm trying to use the Kakadu Jpeg2000 (JP2KAK) driver to read raster data.
I'm working on windows7 64 bit with gdal source version 1.8.1

I've compiled the Kakadu SDK version v6.0 (v6_0-00828N), and compiled Gdal with the driver enabled. I'm using the c# binding.

I can open the dataset, and everything looks ok (size, number of overviews, band count etc.).
When I read data from one of the bands at the base resolution (lets say it is 512x512) I get the correct data.
Band mainBand = dataset.GetRasterBand(1);
mainBand.ReadRaster(0,0,512,512,buffer,512,512,DataType.GDT_Byte,4,2048);

If I get one of the overview bands:
Band overviewBand = mainBand.GetOverview(0);

And I try to read the entire band (lets say it is 256x256):
overviewBand.ReadRaster(0,0,256,256,buffer,256,256,DataType.GDT_Byte,4,1024);
What I get in the buffer are the first 256x256 pixels of the mainBand.
This is contrary to the behavior I'm used to get when reading GTiff files, or even JPEG2000 with the JP2ECW driver.

Is this behavior by design, or is there another way to achieve what I want.

Thanks
Yehiyam

________________________________
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf@rafael.co.il<mailto:lawraf@rafael.co.il> and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
________________________________

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111109/2c68711b/attachment-0001.html
From alexander.bruy at gmail.com  Wed Nov  9 01:59:29 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Nov 10 01:01:36 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <201111082028.40890.even.rouault@mines-paris.org>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
	<201111082028.40890.even.rouault@mines-paris.org>
Message-ID: <CALuHMPCjg4EuX8FoaAtmqpY1vo=U2nGgyCMzG5DO1ieK5Yh_iA@mail.gmail.com>

Hi,

2011/11/8 Even Rouault <even.rouault@mines-paris.org>:
> And you spend half and hour understanding why it has not been reprojected in
> EPSG:YYYY. The default behaviour being that once the target dataset exists, it
> is only updated, but not modified in depth.
>
> gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense, with or
> without -overwrite (and -overwrite will actually kill your target, ahem,
> source - since source=target - as you have seen !). Reprojection in place
> cannot work. You must specify a different target dataset. I can imagine that a
> safety check would make sense to detect such obvious error...
Thanks for clarification. So answer on my question is: in place reprojection not
working and -overwrite option only necessary if I want to recreate output image
(not usefull IMHO, because I can specify another one output).

-- 
Alexander Bruy
From peifer at gmx.eu  Wed Nov  9 03:18:50 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Nov 10 02:25:19 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <201111082028.40890.even.rouault@mines-paris.org>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
	<201111082028.40890.even.rouault@mines-paris.org>
Message-ID: <4EBA376A.8070603@gmx.eu>

On 08/11/2011 20:28, Even Rouault wrote:
>
> gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense...

Indeed: typing 'something.tif' twice should not be necessary. But the 
following could theoretically make sense (in analogy to GNU sed's 
-i/--in-place switch (which creates a temporary file and later 
*overwrites* the original file):

gdalwarp -i something.tif -t_srs EPSG:XXXX

However, as one hardly get things right in the first run: there is a 
good chance that the result is not what you want -- and the original 
file is gone :-(. At least this happens to me whenever I use sed's -i 
switch. So I wouldn't see a need for introducing this behaviour in GDAL 
command line utilitiies.

Hermann
From even.rouault at mines-paris.org  Wed Nov  9 06:55:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 10 06:13:44 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <4EBA376A.8070603@gmx.eu>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
	<201111082028.40890.even.rouault@mines-paris.org>
	<4EBA376A.8070603@gmx.eu>
Message-ID: <1320839716.4eba6a2450f9b@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

> On 08/11/2011 20:28, Even Rouault wrote:
> >
> > gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense...
>
> Indeed: typing 'something.tif' twice should not be necessary. But the
> following could theoretically make sense (in analogy to GNU sed's
> -i/--in-place switch (which creates a temporary file and later
> *overwrites* the original file):
>
> gdalwarp -i something.tif -t_srs EPSG:XXXX
>
> However, as one hardly get things right in the first run: there is a
> good chance that the result is not what you want -- and the original
> file is gone :-(. At least this happens to me whenever I use sed's -i
> switch. So I wouldn't see a need for introducing this behaviour in GDAL
> command line utilitiies.

There's no risk to see that in the case of gdalwarp. GDAL has no infrastructure
to do in place reprojection and it would be really challenging to do that
without a temporary file.

>
> Hermann
>


From KShannon at gcs-research.com  Wed Nov  9 10:45:09 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Thu Nov 10 10:17:01 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <1320839716.4eba6a2450f9b@webmail.free.fr>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
	<201111082028.40890.even.rouault@mines-paris.org>	<4EBA376A.8070603@gmx.eu>
	<1320839716.4eba6a2450f9b@webmail.free.fr>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA5CB1@MAIL.gcs-research.net>

It seems to me the result of the command:

gdalwarp -t_srs EPSG:4326 -overwrite mosaic.tif mosaic.tif

would never be desired, and maybe not allowed?  Is there any case where this makes any sense?

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Wednesday, November 09, 2011 4:55 AM
To: Hermann Peifer
Cc: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option

Selon Hermann Peifer <peifer@gmx.eu>:

> On 08/11/2011 20:28, Even Rouault wrote:
> >
> > gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense...
>
> Indeed: typing 'something.tif' twice should not be necessary. But the 
> following could theoretically make sense (in analogy to GNU sed's 
> -i/--in-place switch (which creates a temporary file and later
> *overwrites* the original file):
>
> gdalwarp -i something.tif -t_srs EPSG:XXXX
>
> However, as one hardly get things right in the first run: there is a 
> good chance that the result is not what you want -- and the original 
> file is gone :-(. At least this happens to me whenever I use sed's -i 
> switch. So I wouldn't see a need for introducing this behaviour in 
> GDAL command line utilitiies.

There's no risk to see that in the case of gdalwarp. GDAL has no infrastructure to do in place reprojection and it would be really challenging to do that without a temporary file.

>
> Hermann
>


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Nov  9 11:09:17 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 10 10:41:12 2011
Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA5CB1@MAIL.gcs-research.net>
References: <CALuHMPDsYRozKkTVTcjfNe4bbMbVb8wMC3=W=jpqhUnsHxiWNA@mail.gmail.com>
	<loom.20111108T190909-304@post.gmane.org>
	<201111082028.40890.even.rouault@mines-paris.org>
	<4EBA376A.8070603@gmx.eu>
	<1320839716.4eba6a2450f9b@webmail.free.fr>
	<2DD24CD6225DC04C81CF12523261F4B90EFA5CB1@MAIL.gcs-research.net>
Message-ID: <1320854957.4ebaa5ad28b26@imp.free.fr>

Selon Kyle Shannon <KShannon@gcs-research.com>:

> It seems to me the result of the command:
>
> gdalwarp -t_srs EPSG:4326 -overwrite mosaic.tif mosaic.tif
>
> would never be desired, and maybe not allowed?  Is there any case where this
> makes any sense?

As I said in my previous email, I can't see any case where it would be valid.
With -overwrite, it is suicide. Without -overwrite, it is useless at best. So in
my opinion, this should not be allowed

>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
> Sent: Wednesday, November 09, 2011 4:55 AM
> To: Hermann Peifer
> Cc: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Re: Strange behavior of gdalwarp with -overwrite option
>
> Selon Hermann Peifer <peifer@gmx.eu>:
>
> > On 08/11/2011 20:28, Even Rouault wrote:
> > >
> > > gdalwarp something.tif something.tif -t_srs EPSG:XXXX makes no sense...
> >
> > Indeed: typing 'something.tif' twice should not be necessary. But the
> > following could theoretically make sense (in analogy to GNU sed's
> > -i/--in-place switch (which creates a temporary file and later
> > *overwrites* the original file):
> >
> > gdalwarp -i something.tif -t_srs EPSG:XXXX
> >
> > However, as one hardly get things right in the first run: there is a
> > good chance that the result is not what you want -- and the original
> > file is gone :-(. At least this happens to me whenever I use sed's -i
> > switch. So I wouldn't see a need for introducing this behaviour in
> > GDAL command line utilitiies.
>
> There's no risk to see that in the case of gdalwarp. GDAL has no
> infrastructure to do in place reprojection and it would be really challenging
> to do that without a temporary file.
>
> >
> > Hermann
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From armin.burger at gmx.net  Wed Nov  9 14:37:29 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Nov 10 14:20:47 2011
Subject: [gdal-dev] Optimisation of ECW files
In-Reply-To: <201111082227.30849.yjacolin@free.fr>
References: <201111081140.33409.yjacolin@free.fr>	<201111082036.06594.even.rouault@mines-paris.org>
	<201111082227.30849.yjacolin@free.fr>
Message-ID: <4EBAD679.5040309@gmx.net>

On 08/11/2011 22:27, Yves Jacolin (free) wrote:

>
> It seems there was a performance issue with this files. I though using a lot of
> small ECW files was not a good practice. Am I wrong?


Yves

my experience is that making Mapserver (via GDAL) reading lots of small 
ECW files becomes quite inefficient. I would say having more than maybe 
50 or 100 files to be read for one Mapserver request starts to slow down 
the response time of Mapserver. Geotiff with overview files I found a 
bit better in this respect, but still suboptimal. ECW works well for 
very large single files, having them even with several 10's of GB will 
not cause any problems.

If you have frequent updates of the single files then merging the files 
into few large ones might not be a feasible option. I would then try to 
use Geotiff with overviews, it should be at least a bit better than the 
ECW. Automatically converting the ECW files to Geotiff is done quickley. 
Regarding the required space, Geotiff with overviews need ~5 to 15 times 
more disc space, depending on the ECW compression rate.

If you need to display the image layer already at very low scales (hence 
requiring many files to read) then a single merged low-resolution file 
with ~10-20% resolution (and with overviews) as active layer for low 
scales would help quite much. Then only when the request is at higher 
scales, the small images are read, but the number of files will be much 
lower.

OK, this low-resolution files needs to be updated every time you replace 
some of the ECW files, but it should be much faster to create a 10% 
resolution file than a full-resolution one. Using high values for 
"--config GDAL_CACHEMAX" with "gdal_translate" can speed up quite much 
merging the small files.


armin

From ealpert at digitalglobe.com  Wed Nov  9 16:04:14 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Thu Nov 10 15:57:37 2011
Subject: [gdal-dev] Anyone compile the ruby bindings for Ruby 1.9.x?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330808540C@COMAIL01.digitalglobe.com>

It seems in Ruby 1.9.x the way of determining where the ruby.h file has
changed. 

 

I ran into an identical problem trying to build Geos yesterday and now
I've hit it in GDAL.

 

In swig/ruby/RubyMakefile.mk

 

There's the following line;

 

RubyMakefile.mk:RUBY_INCLUDE_DIR := $(shell ruby -rrbconfig -e "puts
Config::CONFIG['archdir']")

 

 

The ruby config now uses the class RbConfig and the attribute rubyhdrdir
is now used in stead of archdir.

 

I changed the line to the following

 

RUBY_INCLUDE_DIR := $(shell ruby -rrbconfig -e "puts
RbConfig::CONFIG['rubyhdrdir']")

 

But it appears that more has changed with the include file structure in
Ruby 1.9.x

 

Has anyone successfully build the ruby bindings?

 

 


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 4573 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111109/d5c61ff8/attachment.bin
From mira.mikes at seznam.cz  Wed Nov  9 21:31:03 2011
From: mira.mikes at seznam.cz (=?iso-8859-2?Q?Jarom=EDr=20Mike=B9?=)
Date: Thu Nov 10 21:36:53 2011
Subject: =?us-ascii?Q?Re=3A=20=5Bgdal=2Ddev=5D=20Aster=20tif=20files=20to=20hgt?=
In-Reply-To: <CAFCnYQPgzvrSaG-MCTHEZs796Au5sEBk6qHaxTR0EpJwU0k=xw@mail.gmail.com>
Message-ID: <190643.25878.42057-19092-1333521518-1320892263@seznam.cz>

> Od: Scott Arko <saarko@alaska.edu>

Hello Scott,

> I wouldn't worry about it the files look identical and the file is working
> in your application.  If you have a program that can load both formats you
> should be able to do a direct comparison to see if there is a shift. 

Actually I don't have a program to compare GeoTIFF and my hgt file at the moment.
 
> At most, it sounds like the shift you would encounter is 1/2 pixel or about 15
> meters.  

15m is not issue for me. I haven't idea how big shift it can be.

>I would try the files in your application and see if the results
> look reasonable.

I made comparison between map build from original SRTM files and map build from files I converted from Aster.

Aster based map

pros
* there are not holes at all for my area.

cons
* there are contours in sea ( they are not on original SRTM) 20m 40m.
there is not too much places like this, but they are.
* there are peaks in some areas which shouldn't be there 
they are on places where SRTM having holes, but some most SRTM holes are covered well by ASTER
Some of the peaks are over 4000m but there is highest point about 2600m in this area. 

---------------------------------

Is it possible remove at least some of these artifacts?
e.g. setting threshold for highest point on map?

regards

mira
From saarko at alaska.edu  Wed Nov  9 21:47:11 2011
From: saarko at alaska.edu (Scott Arko)
Date: Thu Nov 10 21:53:56 2011
Subject: [gdal-dev] Aster tif files to hgt
In-Reply-To: <190643.25878.42057-19092-1333521518-1320892263@seznam.cz>
References: <CAFCnYQPgzvrSaG-MCTHEZs796Au5sEBk6qHaxTR0EpJwU0k=xw@mail.gmail.com>
	<190643.25878.42057-19092-1333521518-1320892263@seznam.cz>
Message-ID: <CAFCnYQNxUYtsukCmfpfDeiBzyZ1sep6YokrcD8BzCMecU3MN8Q@mail.gmail.com>

Hi Mira,

I suspect you are finding what many have, that there are some artifacts in
the ASTER GDEM that make it not well suited to certain applications.
 Having blunders that are 1500m higher than true is a bit unusual in my use
of this data set, but probably not unheard of.  But, as you say it does not
have the holes that you will have to deal with using SRTM.  You may find
that the best option is to use ASTER GDEM to fill the holes in your SRTM
data.  This should be possible and you can perhaps even use gdalmerge.py to
accomplish this.  Just make sure you set the nodata value properly and that
your SRTM DEM is the last file that you merge.  This should place the GDEM
down first and then the SRTM data on top of it.  If you have your nodata
value set properly, then the GDEM will fill the holes of the SRTM.  I'm not
certain this will work, but is worth a try.  There are more rigorous ways
of combining data sets, but this should give you an excellent indication of
whether this approach is feasible at all.

Thanks,
Scott

On Wed, Nov 9, 2011 at 5:31 PM, Jarom?r Mike? <mira.mikes@seznam.cz> wrote:

> > Od: Scott Arko <saarko@alaska.edu>
>
> Hello Scott,
>
> > I wouldn't worry about it the files look identical and the file is
> working
> > in your application.  If you have a program that can load both formats
> you
> > should be able to do a direct comparison to see if there is a shift.
>
> Actually I don't have a program to compare GeoTIFF and my hgt file at the
> moment.
>
> > At most, it sounds like the shift you would encounter is 1/2 pixel or
> about 15
> > meters.
>
> 15m is not issue for me. I haven't idea how big shift it can be.
>
> >I would try the files in your application and see if the results
> > look reasonable.
>
> I made comparison between map build from original SRTM files and map build
> from files I converted from Aster.
>
> Aster based map
>
> pros
> * there are not holes at all for my area.
>
> cons
> * there are contours in sea ( they are not on original SRTM) 20m 40m.
> there is not too much places like this, but they are.
> * there are peaks in some areas which shouldn't be there
> they are on places where SRTM having holes, but some most SRTM holes are
> covered well by ASTER
> Some of the peaks are over 4000m but there is highest point about 2600m in
> this area.
>
> ---------------------------------
>
> Is it possible remove at least some of these artifacts?
> e.g. setting threshold for highest point on map?
>
> regards
>
> mira
>



-- 
Scott Arko
Alaska Satellite Facility Deputy Director
University of Alaska Fairbanks

903 Koyukuk Drive
Fairbanks, AK 99775
Phone: (907) 474 - 5570
email:  saarko@alaska.edu
http://www.asf.alaska.edu/aadn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111109/75525169/attachment.html
From mapoubelle22 at gmail.com  Thu Nov 10 07:40:16 2011
From: mapoubelle22 at gmail.com (fred p)
Date: Fri Nov 11 08:19:22 2011
Subject: [gdal-dev] lost GeoTiff file metadata with gdalwarp
Message-ID: <CADzX+2V_2fpr+xb4r3vDaqeDHqCBcj8eQ7JQoNzUpEJR3gXG8A@mail.gmail.com>

Hello list !

I use the gdalwarp tool to change the projection of a GeoTiff file but the
most of the metadata of the source file are lost, which is not the case
with the gdal_translate tool.
Particularly, the following metadata are lost :
  TIFFTAG_DOCUMENTNAME
  TIFFTAG_IMAGEDESCRIPTION
  TIFFTAG_SOFTWARE
  TIFFTAG_DATETIME
  TIFFTAG_ARTIST
  TIFFTAG_HOSTCOMPUTER

Do I miss something ?


The command :

gdalwarp -t_srs EPSG:4326 srcfile.tif outfile.tif


The gdalinfo output on the source file, followed by the gdalinfo output on
the output file :

Driver: GTiff/GeoTIFF
Files: srcfile.tif
Size is 2500, 2500
Coordinate System is:
PROJCS["Geostationary_Satellite",
    GEOGCS["GCS_unnamed ellipse",
        DATUM["D_unknown",
            SPHEROID["Unknown",6378160,298.2539162964669]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Geostationary_Satellite"],
    PARAMETER["central_meridian",57],
    PARAMETER["satellite_height",35785846.6396],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (-5620805.668447489850223,5620805.668447489850223)
Pixel Size = (4496.644534757992005,-4496.644534757992005)
Metadata:
  TIFFTAG_DOCUMENTNAME=documentname
  TIFFTAG_IMAGEDESCRIPTION=productidentification={
        "observedProperty":"observedProperty",
        "process":"process",
}
  TIFFTAG_SOFTWARE=software
  TIFFTAG_DATETIME=2011:11:10 11:00:00
  TIFFTAG_ARTIST=artist
  TIFFTAG_HOSTCOMPUTER=computer
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=JPEG
  INTERLEAVE=BAND
Corner Coordinates:
ERROR 1: tolerance condition error
Upper Left  (-5620805.668, 5620805.668)
ERROR 1: tolerance condition error
Lower Left  (-5620805.668,-5620805.668)
ERROR 1: tolerance condition error
Upper Right ( 5620805.668, 5620805.668)
ERROR 1: tolerance condition error
Lower Right ( 5620805.668,-5620805.668)
Center      (   0.0000000,   0.0000000) ( 57d 0'0.00"E,  0d 0'0.01"N)
Band 1 Block=2500x1 Type=Byte, ColorInterp=Gray


The gdalinfo output on the output file :

Driver: GTiff/GeoTIFF
Files: outfile.tif
Size is 1673, 1673
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (0.000000000000000,70.000000000000000)
Pixel Size = (0.059772863120143,-0.059772863120143)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   0.0000000,  70.0000000) (  0d 0'0.01"E, 70d 0'0.00"N)
Lower Left  (   0.0000000, -30.0000000) (  0d 0'0.01"E, 30d 0'0.00"S)
Upper Right ( 100.0000000,  70.0000000) (100d 0'0.00"E, 70d 0'0.00"N)
Lower Right ( 100.0000000, -30.0000000) (100d 0'0.00"E, 30d 0'0.00"S)
Center      (  50.0000000,  20.0000000) ( 50d 0'0.00"E, 20d 0'0.00"N)
Band 1 Block=1673x4 Type=Byte, ColorInterp=Gray

<http://int.ask.com/web?siteid=10000861&webqsrc=999&l=dis&q=dust%20RGB%20composite>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111110/5e207812/attachment-0001.html
From bidandou at yahoo.fr  Thu Nov 10 10:35:35 2011
From: bidandou at yahoo.fr (momo bad)
Date: Fri Nov 11 11:27:10 2011
Subject: [gdal-dev] want to contribute with a driver for SXF files format
Message-ID: <1320939335.75343.YahooMailNeo@web24603.mail.ird.yahoo.com>

The goal of the work is to add a GDAL driver supporting the SXF (Storage and eXchange Format).
This file format is largely used in the eastern europe, and is primarly produced by a GIS software Called Panorama GIS MAP developped by the Russian KB Panorama Entreprise 
?
informationon :
?
http://www.gisinfo.net/
?
Specification on (in Russian Language) : 
?
http://gistoolkit.ru/download/doc/sxf4bin.pdf
?
I publicly declare that my contribution matches the requirements of the "Legal" paragraph of http://trac.osgeo.org/gdal/wiki/rfc3_commiters 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111110/112036b2/attachment.html
From mapoubelle22 at gmail.com  Thu Nov 10 11:45:44 2011
From: mapoubelle22 at gmail.com (fred p)
Date: Fri Nov 11 12:38:20 2011
Subject: [gdal-dev] Re: lost GeoTiff file metadata with gdalwarp
In-Reply-To: <CADzX+2V_2fpr+xb4r3vDaqeDHqCBcj8eQ7JQoNzUpEJR3gXG8A@mail.gmail.com>
References: <CADzX+2V_2fpr+xb4r3vDaqeDHqCBcj8eQ7JQoNzUpEJR3gXG8A@mail.gmail.com>
Message-ID: <CADzX+2X91ud56MsuDG5wN-2VkZEmv=i7gXKFCoVejRRawfk7gg@mail.gmail.com>

I have applied the following patch for my own needs to gdalwarp.cpp (from
release 1.8.1). Maybe could it be applied in the next release with the
appropriate changes?
Thanks for your answers.


791a792,818
> /*      Get the metadata of the first source file if it is a GeoTiff    */
> /*      and apply them to the destination file.                         */
> /* -------------------------------------------------------------------- */
>         if ( iSrc==0 && pszFormat == "GTiff")
>         {
>             char **metadataSet=NULL;
>             metadataSet = GDALGetMetadata(hSrcDS, "");
>
>             if( CSLCount(metadataSet) > 0 )
>             {
>                 for( i = 0; metadataSet[i] != NULL; i++ )
>                 {
>                     char *val = CPLStrdup(strstr(metadataSet[i],"=")+1);
>                     size_t lenkey = strlen(metadataSet[i])-strlen(val);
>                     char *key = (char*)malloc(lenkey);
>                     strncpy(key, metadataSet[i], lenkey);
>                     key[lenkey-1] = '\0';
>
>                     if( GDALSetMetadataItem(hDstDS, key, val, NULL) !=
CE_None ){
>                         fprintf( stderr, "Ecriture du tag %s impossible",
key);
>                     }
>
>                 }
>             }
>         }
>
> /* -------------------------------------------------------------------- */






Le 10 novembre 2011 13:40, fred p <mapoubelle22@gmail.com> a ?crit :

> Hello list !
>
> I use the gdalwarp tool to change the projection of a GeoTiff file but the
> most of the metadata of the source file are lost, which is not the case
> with the gdal_translate tool.
> Particularly, the following metadata are lost :
>   TIFFTAG_DOCUMENTNAME
>   TIFFTAG_IMAGEDESCRIPTION
>   TIFFTAG_SOFTWARE
>   TIFFTAG_DATETIME
>   TIFFTAG_ARTIST
>   TIFFTAG_HOSTCOMPUTER
>
> Do I miss something ?
>
>
> The command :
>
> gdalwarp -t_srs EPSG:4326 srcfile.tif outfile.tif
>
>
> The gdalinfo output on the source file, followed by the gdalinfo output on
> the output file :
>
> Driver: GTiff/GeoTIFF
> Files: srcfile.tif
> Size is 2500, 2500
> Coordinate System is:
> PROJCS["Geostationary_Satellite",
>     GEOGCS["GCS_unnamed ellipse",
>         DATUM["D_unknown",
>             SPHEROID["Unknown",6378160,298.2539162964669]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Geostationary_Satellite"],
>     PARAMETER["central_meridian",57],
>     PARAMETER["satellite_height",35785846.6396],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1]]
> Origin = (-5620805.668447489850223,5620805.668447489850223)
> Pixel Size = (4496.644534757992005,-4496.644534757992005)
> Metadata:
>   TIFFTAG_DOCUMENTNAME=documentname
>   TIFFTAG_IMAGEDESCRIPTION=productidentification={
>         "observedProperty":"observedProperty",
>         "process":"process",
> }
>   TIFFTAG_SOFTWARE=software
>   TIFFTAG_DATETIME=2011:11:10 11:00:00
>   TIFFTAG_ARTIST=artist
>   TIFFTAG_HOSTCOMPUTER=computer
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=JPEG
>   INTERLEAVE=BAND
> Corner Coordinates:
> ERROR 1: tolerance condition error
> Upper Left  (-5620805.668, 5620805.668)
> ERROR 1: tolerance condition error
> Lower Left  (-5620805.668,-5620805.668)
> ERROR 1: tolerance condition error
> Upper Right ( 5620805.668, 5620805.668)
> ERROR 1: tolerance condition error
> Lower Right ( 5620805.668,-5620805.668)
> Center      (   0.0000000,   0.0000000) ( 57d 0'0.00"E,  0d 0'0.01"N)
> Band 1 Block=2500x1 Type=Byte, ColorInterp=Gray
>
>
> The gdalinfo output on the output file :
>
> Driver: GTiff/GeoTIFF
> Files: outfile.tif
> Size is 1673, 1673
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (0.000000000000000,70.000000000000000)
> Pixel Size = (0.059772863120143,-0.059772863120143)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (   0.0000000,  70.0000000) (  0d 0'0.01"E, 70d 0'0.00"N)
> Lower Left  (   0.0000000, -30.0000000) (  0d 0'0.01"E, 30d 0'0.00"S)
> Upper Right ( 100.0000000,  70.0000000) (100d 0'0.00"E, 70d 0'0.00"N)
> Lower Right ( 100.0000000, -30.0000000) (100d 0'0.00"E, 30d 0'0.00"S)
> Center      (  50.0000000,  20.0000000) ( 50d 0'0.00"E, 20d 0'0.00"N)
> Band 1 Block=1673x4 Type=Byte, ColorInterp=Gray
>
> <http://int.ask.com/web?siteid=10000861&webqsrc=999&l=dis&q=dust%20RGB%20composite>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111110/7851fdcd/attachment.html
From Steve.Toutant at inspq.qc.ca  Thu Nov 10 11:41:59 2011
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant@inspq.qc.ca)
Date: Fri Nov 11 12:50:16 2011
Subject: [gdal-dev] Linux installation
Message-ID: <OFACB56B0C.B52245C5-ON85257944.005BBBF6-85257944.005BBC04@isn.rtss.qc.ca>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111110/c57aa41b/attachment.html
From chaitanya.ch at gmail.com  Thu Nov 10 13:26:55 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Nov 11 14:24:59 2011
Subject: [gdal-dev] Re: lost GeoTiff file metadata with gdalwarp
In-Reply-To: <CADzX+2X91ud56MsuDG5wN-2VkZEmv=i7gXKFCoVejRRawfk7gg@mail.gmail.com>
References: <CADzX+2V_2fpr+xb4r3vDaqeDHqCBcj8eQ7JQoNzUpEJR3gXG8A@mail.gmail.com>
	<CADzX+2X91ud56MsuDG5wN-2VkZEmv=i7gXKFCoVejRRawfk7gg@mail.gmail.com>
Message-ID: <CAMKgpOYyNNj4dLHMSNwvOnhh4LVuf0naH1Z-aCqO4VjfvTwWZQ@mail.gmail.com>

fred,

IMO, it would be better if we transfer the metadata items when only one
source dataset is present. Better yet, we could check if the metadata item
matches when there are multiple sources.
Also, I don't see the need to do this only in case of GTiff format.

On Thu, Nov 10, 2011 at 4:45 PM, fred p <mapoubelle22@gmail.com> wrote:

> I have applied the following patch for my own needs to gdalwarp.cpp (from
> release 1.8.1). Maybe could it be applied in the next release with the
> appropriate changes?
> Thanks for your answers.
>
>
> 791a792,818
> > /*      Get the metadata of the first source file if it is a GeoTiff
> */
> > /*      and apply them to the destination file.
> */
> > /* --------------------------------------------------------------------
> */
> >         if ( iSrc==0 && pszFormat == "GTiff")
> >         {
> >             char **metadataSet=NULL;
> >             metadataSet = GDALGetMetadata(hSrcDS, "");
> >
> >             if( CSLCount(metadataSet) > 0 )
> >             {
> >                 for( i = 0; metadataSet[i] != NULL; i++ )
> >                 {
> >                     char *val = CPLStrdup(strstr(metadataSet[i],"=")+1);
> >                     size_t lenkey = strlen(metadataSet[i])-strlen(val);
> >                     char *key = (char*)malloc(lenkey);
> >                     strncpy(key, metadataSet[i], lenkey);
> >                     key[lenkey-1] = '\0';
> >
> >                     if( GDALSetMetadataItem(hDstDS, key, val, NULL) !=
> CE_None ){
> >                         fprintf( stderr, "Ecriture du tag %s
> impossible", key);
> >                     }
> >
> >                 }
> >             }
> >         }
> >
> > /* --------------------------------------------------------------------
> */
>
>
>
>
>
>
> Le 10 novembre 2011 13:40, fred p <mapoubelle22@gmail.com> a ?crit :
>
> Hello list !
>>
>> I use the gdalwarp tool to change the projection of a GeoTiff file but
>> the most of the metadata of the source file are lost, which is not the case
>> with the gdal_translate tool.
>> Particularly, the following metadata are lost :
>>   TIFFTAG_DOCUMENTNAME
>>   TIFFTAG_IMAGEDESCRIPTION
>>   TIFFTAG_SOFTWARE
>>   TIFFTAG_DATETIME
>>   TIFFTAG_ARTIST
>>   TIFFTAG_HOSTCOMPUTER
>>
>> Do I miss something ?
>>
>>
>> The command :
>>
>> gdalwarp -t_srs EPSG:4326 srcfile.tif outfile.tif
>>
>>
>> The gdalinfo output on the source file, followed by the gdalinfo output
>> on the output file :
>>
>> Driver: GTiff/GeoTIFF
>> Files: srcfile.tif
>> Size is 2500, 2500
>> Coordinate System is:
>> PROJCS["Geostationary_Satellite",
>>     GEOGCS["GCS_unnamed ellipse",
>>         DATUM["D_unknown",
>>             SPHEROID["Unknown",6378160,298.2539162964669]],
>>         PRIMEM["Greenwich",0],
>>         UNIT["Degree",0.017453292519943295]],
>>     PROJECTION["Geostationary_Satellite"],
>>     PARAMETER["central_meridian",57],
>>     PARAMETER["satellite_height",35785846.6396],
>>     PARAMETER["false_easting",0],
>>     PARAMETER["false_northing",0],
>>     UNIT["Meter",1]]
>> Origin = (-5620805.668447489850223,5620805.668447489850223)
>> Pixel Size = (4496.644534757992005,-4496.644534757992005)
>> Metadata:
>>   TIFFTAG_DOCUMENTNAME=documentname
>>   TIFFTAG_IMAGEDESCRIPTION=productidentification={
>>         "observedProperty":"observedProperty",
>>         "process":"process",
>> }
>>   TIFFTAG_SOFTWARE=software
>>   TIFFTAG_DATETIME=2011:11:10 11:00:00
>>   TIFFTAG_ARTIST=artist
>>   TIFFTAG_HOSTCOMPUTER=computer
>>   AREA_OR_POINT=Area
>> Image Structure Metadata:
>>   COMPRESSION=JPEG
>>   INTERLEAVE=BAND
>> Corner Coordinates:
>> ERROR 1: tolerance condition error
>> Upper Left  (-5620805.668, 5620805.668)
>> ERROR 1: tolerance condition error
>> Lower Left  (-5620805.668,-5620805.668)
>> ERROR 1: tolerance condition error
>> Upper Right ( 5620805.668, 5620805.668)
>> ERROR 1: tolerance condition error
>> Lower Right ( 5620805.668,-5620805.668)
>> Center      (   0.0000000,   0.0000000) ( 57d 0'0.00"E,  0d 0'0.01"N)
>> Band 1 Block=2500x1 Type=Byte, ColorInterp=Gray
>>
>>
>> The gdalinfo output on the output file :
>>
>> Driver: GTiff/GeoTIFF
>> Files: outfile.tif
>> Size is 1673, 1673
>> Coordinate System is:
>> GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["degree",0.0174532925199433],
>>     AUTHORITY["EPSG","4326"]]
>> Origin = (0.000000000000000,70.000000000000000)
>> Pixel Size = (0.059772863120143,-0.059772863120143)
>> Metadata:
>>   AREA_OR_POINT=Area
>> Image Structure Metadata:
>>   INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (   0.0000000,  70.0000000) (  0d 0'0.01"E, 70d 0'0.00"N)
>> Lower Left  (   0.0000000, -30.0000000) (  0d 0'0.01"E, 30d 0'0.00"S)
>> Upper Right ( 100.0000000,  70.0000000) (100d 0'0.00"E, 70d 0'0.00"N)
>> Lower Right ( 100.0000000, -30.0000000) (100d 0'0.00"E, 30d 0'0.00"S)
>> Center      (  50.0000000,  20.0000000) ( 50d 0'0.00"E, 20d 0'0.00"N)
>> Band 1 Block=1673x4 Type=Byte, ColorInterp=Gray
>>
>> <http://int.ask.com/web?siteid=10000861&webqsrc=999&l=dis&q=dust%20RGB%20composite>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111110/b05b9de4/attachment-0001.html
From geep999 at yahoo.co.uk  Thu Nov 10 15:38:58 2011
From: geep999 at yahoo.co.uk (geep999)
Date: Fri Nov 11 16:44:05 2011
Subject: [gdal-dev] Aster tif files to hgt
In-Reply-To: <190316.26140.42703-6385-1902410970-1320485190@seznam.cz>
References: <190316.26140.42703-6385-1902410970-1320485190@seznam.cz>
Message-ID: <1320957538495-6983231.post@n2.nabble.com>

Just a comment - I recently tried using the latest ASTER data and was pretty
disappointed with my results in making
colour relief map underlays. Lots of anomalies and artifacts.
If you google "aster mole runs anomalies artifacts pits" you'll find some
discussion. 
Cheers,
Peter

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Aster-tif-files-to-hgt-tp6965451p6983231.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From geep999 at yahoo.co.uk  Thu Nov 10 15:58:01 2011
From: geep999 at yahoo.co.uk (geep999)
Date: Fri Nov 11 17:04:06 2011
Subject: [gdal-dev] gdal2tiles: tiles in wrong hemisphere,
	and/or Openlayers problem
Message-ID: <1320958680946-6983306.post@n2.nabble.com>

Hi,
I'm having big problems understanding what's happening with tiles created
by gdal2tiles.py --version GDAL 1.8.1, released 2011/07/09
Running on Slackware 13.37 64 bit.

The results of tiling a colour relief look OK:
http://pgg999.freehostingcloud.com/tiles4_srtm/openlayers.html
http://pgg999.freehostingcloud.com/tiles4_srtm/openlayers.html 
(The file openlayers.html was also created by gdal2tiles.py)

But I can't understand the naming of the tiles created by gdal2tiles.py.

For example - consider a couple of tiles created by other folk for Harlow,
Essex,UK at zoom 11
http://tile.openstreetmap.org/11/1024/678.png
http://tile.openstreetmap.org/11/1024/678.png 
http://steve8.dev.openstreetmap.org/railway_tiles/11/1024/678.png
http://steve8.dev.openstreetmap.org/railway_tiles/11/1024/678.png 

For these I can understand the z/x/y of 11/1024/678 
and http://almien.co.uk/OSM/Tools/Coord/?x=1024&y=678&z=11
gives:
Latitude: 51.726959 to 51.835708	Longitude: 0.000000 to 0.175781
Size: 0.175781 x 0.108749		Centre: 51.781333, 0.087891

But my gdal2tiles.py has named the same area 11/1024/1369
http://pgg999.freehostingcloud.com/tiles4_srtm/11/1024/1369.png
http://pgg999.freehostingcloud.com/tiles4_srtm/11/1024/1369.png 
I attach, below at the bottom, the gdal2tiles.py command I used and details
of the source geotiff image.

For z/x/y of 11/1024/1369
  http://almien.co.uk/OSM/Tools/Coord/?x=1024&y=1369&z=11
http://almien.co.uk/OSM/Tools/Coord/?x=1024&y=1369&z=11 
gives:
Latitude: -51.835708 to -51.726959	Longitude: 0.000000 to 0.175781
Size: 0.175781 x 0.108749		Centre: -51.781333, 0.087891

Seems the tile is being created in the southern hemisphere in the South
Atlantic.
The geotiff image used to create the tiles is definitely in the Northen
Hemisphere - Eastern England.

Yet as you can see everything looks OK in
http://pgg999.freehostingcloud.com/tiles4_srtm/openlayers.html

I created a stripped down version of the tile pyramid that only contains one
tile.

http://pgg999.freehostingcloud.com/tiles4_srtm_1tile/openlayers.zoom11.html
http://pgg999.freehostingcloud.com/tiles4_srtm_1tile/openlayers.zoom11.html 
http://pgg999.freehostingcloud.com/tiles4_srtm_1tile/11/1024/1369.png
http://pgg999.freehostingcloud.com/tiles4_srtm_1tile/11/1024/1369.png 

/Can anybody help me to understand:
1/ Why is gdalstiles.py apparently creating tiles in the Southern Hemisphere
which should be in the Northern?
Specificially - 11/1024/1369.png should be 11/1024/678.png
2/ Why is a tile that, according to its name, should be displayed in the
South Atlantic appearing in Essex, England? 
Or should I ask this question to the Openlayers folks?/

This is causing me lots of problems when I try to use my tiles along with
other tiles.
Then my tiles are appearing in the "wrong" place - i.e. the Southern
Atlantic.
I don't have a presentable example of this yet. It's taken me long enough to
get this far!
At the moment I'm wondering if there are bugs in both gdal2tiles.py and 
http://www.openlayers.org/api/2.7/OpenLayers.js
http://www.openlayers.org/api/2.7/OpenLayers.js 

Cheers,
Peter

Command used to create tile:
gdal2tiles.py --zoom=0-14
--url=http://pgg999.freehostingcloud.com/tiles_srtm/ \
-v N5xE000.srtm.colourrelief.tif tiles4_srtm

Details of the colour relief file that was tiled.
(It is actually 9 SRTM tiles stitched together with gdal_merge.py).
gdalinfo -stats
/media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief.tif
Driver: GTiff/GeoTIFF
Files:
/media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief.tif
      
/media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief.tif.aux.xml
Size is 3601, 3601
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-1.000416666666667,53.000416666666666)
Pixel Size = (0.000833333333333,-0.000833333333333)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  -1.0004167,  53.0004167) (  1d 0' 1.50"W, 53d 0' 1.50"N)
Lower Left  (  -1.0004167,  49.9995833) (  1d 0' 1.50"W, 49d59'58.50"N)
Upper Right (   2.0004167,  53.0004167) (  2d 0' 1.50"E, 53d 0' 1.50"N)
Lower Right (   2.0004167,  49.9995833) (  2d 0' 1.50"E, 49d59'58.50"N)
Center      (   0.5000000,  51.5000000) (  0d30' 0.00"E, 51d30' 0.00"N)
Band 1 Block=3601x1 Type=Byte, ColorInterp=Red
  Min=46.000 Max=251.000 
  Minimum=46.000, Maximum=251.000, Mean=111.271, StdDev=75.256
  Metadata:
    STATISTICS_MINIMUM=46
    STATISTICS_MAXIMUM=251
    STATISTICS_MEAN=111.2714725406
    STATISTICS_STDDEV=75.256273643809
Band 2 Block=3601x1 Type=Byte, ColorInterp=Green                                                   
  Min=55.000 Max=255.000                                                                           
  Minimum=55.000, Maximum=255.000, Mean=175.914, StdDev=36.022                                     
  Metadata:                                                                                        
    STATISTICS_MINIMUM=55
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=175.91388581082
    STATISTICS_STDDEV=36.021876564052
Band 3 Block=3601x1 Type=Byte, ColorInterp=Blue
  Min=31.000 Max=238.000 
  Minimum=31.000, Maximum=238.000, Mean=94.943, StdDev=16.832
  Metadata:
    STATISTICS_MINIMUM=31
    STATISTICS_MAXIMUM=238
    STATISTICS_MEAN=94.942947441009
    STATISTICS_STDDEV=16.832038042577


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal2tiles-tiles-in-wrong-hemisphere-and-or-Openlayers-problem-tp6983306p6983306.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Nov 10 18:49:31 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 11 20:05:15 2011
Subject: [gdal-dev] gdal2tiles: tiles in wrong hemisphere,
	and/or Openlayers problem
In-Reply-To: <1320958680946-6983306.post@n2.nabble.com>
References: <1320958680946-6983306.post@n2.nabble.com>
Message-ID: <201111110049.31416.even.rouault@mines-paris.org>


> At the moment I'm wondering if there are bugs in both gdal2tiles.py and
> http://www.openlayers.org/api/2.7/OpenLayers.js

I think there's a bug in none of them ;-)

You just have run into this embarrassing mess where OpenStreetMap and TMS tile 
numbering convention are different. In TMS, tile 0 is in the south pole, 
whereas in OSM it is the north-pole. See the note at the bottom of 
http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames

So provided you integrate your gdal2tiles-generated tiles in a TMS layer of 
OpenLayers, this should work fine.

> 
> Cheers,
> Peter
> 
> Command used to create tile:
> gdal2tiles.py --zoom=0-14
> --url=http://pgg999.freehostingcloud.com/tiles_srtm/ \
> -v N5xE000.srtm.colourrelief.tif tiles4_srtm
> 
> Details of the colour relief file that was tiled.
> (It is actually 9 SRTM tiles stitched together with gdal_merge.py).
> gdalinfo -stats
> /media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief
> .tif Driver: GTiff/GeoTIFF
> Files:
> /media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief
> .tif
> 
> /media/space5/ordnance_survey_data/bdline_gb/data/N5xE000.srtm.colourrelief
> .tif.aux.xml Size is 3601, 3601
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-1.000416666666667,53.000416666666666)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  -1.0004167,  53.0004167) (  1d 0' 1.50"W, 53d 0' 1.50"N)
> Lower Left  (  -1.0004167,  49.9995833) (  1d 0' 1.50"W, 49d59'58.50"N)
> Upper Right (   2.0004167,  53.0004167) (  2d 0' 1.50"E, 53d 0' 1.50"N)
> Lower Right (   2.0004167,  49.9995833) (  2d 0' 1.50"E, 49d59'58.50"N)
> Center      (   0.5000000,  51.5000000) (  0d30' 0.00"E, 51d30' 0.00"N)
> Band 1 Block=3601x1 Type=Byte, ColorInterp=Red
>   Min=46.000 Max=251.000
>   Minimum=46.000, Maximum=251.000, Mean=111.271, StdDev=75.256
>   Metadata:
>     STATISTICS_MINIMUM=46
>     STATISTICS_MAXIMUM=251
>     STATISTICS_MEAN=111.2714725406
>     STATISTICS_STDDEV=75.256273643809
> Band 2 Block=3601x1 Type=Byte, ColorInterp=Green
>   Min=55.000 Max=255.000
>   Minimum=55.000, Maximum=255.000, Mean=175.914, StdDev=36.022
>   Metadata:
>     STATISTICS_MINIMUM=55
>     STATISTICS_MAXIMUM=255
>     STATISTICS_MEAN=175.91388581082
>     STATISTICS_STDDEV=36.021876564052
> Band 3 Block=3601x1 Type=Byte, ColorInterp=Blue
>   Min=31.000 Max=238.000
>   Minimum=31.000, Maximum=238.000, Mean=94.943, StdDev=16.832
>   Metadata:
>     STATISTICS_MINIMUM=31
>     STATISTICS_MAXIMUM=238
>     STATISTICS_MEAN=94.942947441009
>     STATISTICS_STDDEV=16.832038042577
> 
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal2tiles-tiles-in-wrong-hemispher
> e-and-or-Openlayers-problem-tp6983306p6983306.html Sent from the GDAL - Dev
> mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From christian.mueller at nvoe.at  Fri Nov 11 00:46:15 2011
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Sat Nov 12 02:41:39 2011
Subject: [gdal-dev] Linux installation
In-Reply-To: <OFACB56B0C.B52245C5-ON85257944.005BBBF6-85257944.005BBC04@isn.rtss.qc.ca>
References: <OFACB56B0C.B52245C5-ON85257944.005BBBF6-85257944.005BBC04@isn.rtss.qc.ca>
Message-ID: <20111111064615.984230xsuvssveef@webmail.nvoe.at>

Hi Steve, one of my customers is working with SLES11 on IBM z/Series  
and p/Series (NO Intel architecture). I have to administer some of  
these logical partitions.

First, what hardware do you plan to use. Intel/AMD makes life easier.

Second, SLES 11 is an enterprise edition with support you have to pay  
for. The online updates you get are bug fixes, no new features. The  
target is to have the system stable, not to have the newest versions.

My experience:

As an example,  there is no tomcat available. To get tomcat or other  
software  you have to install it from here
http://download.novell.com/Download?buildid=fQKpDcAhPVY~

You should check if your needed software is contained, otherwise you  
have to do an individual build. If you want to become a Novell  
customer, ask them directly.

You can send me a list of your needed packages next week, I could  
check on sles11 ppc.

SLES11 itself runs rock solid on my customers site. (There are about  
30 Systems running). And dont forget, we are talking about a server  
linux. The best setup is to install a bare linux without features and  
add the needed software incrementally. No need for a browser or a gui.  
You can use yast as an admin utility.
http://www-uxsup.csx.cam.ac.uk/pub/doc/suse/sles9/adminguide-sles9/ch02s10.html

I will stop here, if you have further questions, please ask. And btw,  
you cannot compare performance/stability with a windows server, your  
decision to migrate is a good one :-)

Cheers
Christian














Zitat von Steve.Toutant@inspq.qc.ca:

>
> Hi,
> Sorry for cross-posting on several lists, but we are in the process
> of taking some important decisions, on the OS to use...
> For several years we have mapserver, gdal and Postgis, etc... running
> on a Windows server.
> We plan to migrate our GIS tools from the Windows server to SUSE
> Linux Enterprise Server 11.
> I heard bad comments on using SLES with mapserver, postgres/postgis,
> gdal, etc...Taht the installation of these tools was a pain compare
> to OpenSUSE or UBUNTU.
>
> Comments on using and maintaining GIS infrastructure with SLES 11
> would be very appreciated.
> Thanks for your help,
> Steve
>
> Si vous n'?tes pas le destinataire de ce message, veuillez le
> d?truire pr?s avoir inform? l'exp?diteur de son erreur.  Par
> ailleurs, il est interdit de copier ou de modifier ce courriel sans
> l'autorisation de l'auteur.
>
> L'Institut national de sant? publique du Qu?bec n'assume aucune
> responsabilit? ? l'?gard du contenu des messages personnels envoy?s
> par ses employ?s.
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From zoltans at geograph.co.za  Fri Nov 11 03:11:13 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Nov 12 05:14:08 2011
Subject: [gdal-dev] Help from MapInfo users, please
Message-ID: <4EBCD8A1.6050206@geograph.co.za>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: xxx.mid
Type: audio/mid
Size: 1508 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111111/12ab19ba/xxx-0001.bin
-------------- next part --------------
Version 450
Charset	"WindowsLatin1"
Delimiter	","
'Please include coordinate system information below if coordinates are not in degrees. 
'E.g. if the coordinates are in meters, the coordinate system is projected, and the projection algorithm is 
'State Plane Coordinate System 1983 (102 - Alabama West)' using the datum 
'North American 1983', then the coordinate system information should be set to 
'CoordSys Earth Projection 8, 74, 'm', -87.5, 30.0, 0.9999333333, 600000, 0'
Columns	25
FEAT_TYPE_ID	Smallint
OPERATIONAL_STATUS_ID	Smallint
JOB_NR	Char(30)
EST_REVISION_DATE	Date
GID	Integer
CUID	Char(35)
FEATURE_RELIABILITY_DATE	Date
ATTR_RELIABILITY_DATE	Date
CAPTURE_SOURCE_TYPE_ID	Smallint
CAPTURE_METHOD_ID	Smallint
SOURCE_DESCRIPTION	Char(254)
SOURCE_CURRENCY	Date
SOURCE_ACCURACY	Decimal(20,6)
ENTITY_NAME	Char(50)
GEOMETRY_TYPE	Char(5)
OLD_GDO_GID	Decimal(20,6)
WHEN_UPDATED	Date
LOCKED_FLAG	Decimal(20,6)
AUD_LAST_USER	Char(30)
AUD_LAST_DATE	Date
SDO_GTYPE	Smallint
LTT_FEATURE_ID	Integer
LTT_STATUS	Char(2)
LTT_CURRENT_REVSET_ID	Integer
ID1	Integer
Data
Pline  11
29.95673988356700	-28.40662240625970
29.95718006098160	-28.40676240209660
29.95738632434000	-28.40699700213080
29.95750121201020	-28.40744778705080
29.95755122269710	-28.40787061539590
29.95743034048500	-28.40839910570730
29.95685343230360	-28.40886137413540
29.95624411438540	-28.40921278552040
29.95535250168890	-28.40960783056550
29.95480735870450	-28.41011152351530
29.95440862252880	-28.41047465801490
Pline  14
29.94791348401000	-28.39460556404870
29.94812021583970	-28.39634236132940
29.94819167371380	-28.39731383634100
29.94840531609780	-28.39838151857050
29.94871243378850	-28.39936523739210
29.94931728142230	-28.40027745421180
29.95020602100940	-28.40132654109880
29.95256989308940	-28.40401766428030
29.95395257704750	-28.40585473125110
29.95447388876510	-28.40619821125670
29.95521479863610	-28.40651237871620
29.95581251468760	-28.40661926777250
29.95642493731230	-28.40661496866170
29.95673988356700	-28.40662240625970
Pline  4
29.95588629185810	-28.36591087565610
29.95486714313270	-28.36920007631010
29.95407020134700	-28.37164047368990
29.95381863287230	-28.37260402110590
Pline  18
29.95946013804040	-28.36527843417480
29.95886809165890	-28.36586351814610
29.95834424438700	-28.36644654696300
29.95800630885070	-28.36682265458400
29.95759038735280	-28.36727009069640
29.95724084004630	-28.36764611869310
29.95697455568600	-28.36793257363900
29.95679694242540	-28.36812363861830
29.95614101746890	-28.36864169598870
29.95560391419150	-28.36901727455570
29.95516626773080	-28.36912586232030
29.95486714313270	-28.36920007631010
29.95453114846690	-28.36930132506310
29.95390665656540	-28.36948950114380
29.95304880482830	-28.36981419786710
29.95246896357760	-28.36988907199650
29.95180510003340	-28.36982212508620
29.95100774366000	-28.36975742601870
Pline  6
29.12476628859820	-28.27807061006060
29.12480510594160	-28.27819041418410
29.12484669621600	-28.27831877624470
29.12492981285320	-28.27852047178270
29.12517882149610	-28.27883207254410
29.12678314661520	-28.28047533426220
Pline  14
28.58087062665140	-28.16269837916770
28.58107708705200	-28.16298637740100
28.58217056709700	-28.16498059154860
28.58262453450370	-28.16551456508010
28.58325062905670	-28.16593351129640
28.58389828080670	-28.16635240628750
28.58458889405150	-28.16671388145060
28.58573256029060	-28.16724629107390
28.58695152242550	-28.16772120040120
28.58803015273880	-28.16810088476720
28.58904390648340	-28.16839472859060
28.58961568282590	-28.16863225622640
28.59019879297620	-28.16907992943740
28.59101272641170	-28.16987350203940
Pline  12
28.59605881212900	-28.17219032878120
28.59651254394560	-28.17260006384220
28.59709197462500	-28.17281264042990
28.59791894652810	-28.17298359829700
28.59866875865470	-28.17291026951640
28.59920056918660	-28.17263275004420
28.59933556806550	-28.17241192435970
28.60000003744070	-28.17232436794210
28.60061800390460	-28.17240889526910
28.60115752347240	-28.17265600487680
28.60168650485250	-28.17298911770340
28.60185037288910	-28.17317975797910
Pline  5
28.60400239061700	-28.17403877450730
28.60515943201090	-28.17398393137320
28.60603260324480	-28.17406781361880
28.60683079103270	-28.17431427848050
28.60722617371920	-28.17456095854860
Pline  12
28.61198021188660	-28.17536850101250
28.61291387643880	-28.17600952742560
28.61364786861120	-28.17640896450960
28.61424151622120	-28.17672276242600
28.61592386175370	-28.17710074009850
28.61687228771210	-28.17710794009210
28.61761171443440	-28.17688293720800
28.61854971184800	-28.17682445509060
28.61910284632930	-28.17698773882500
28.61951293799340	-28.17717778013130
28.62014024915420	-28.17794047828920
28.62043319198540	-28.17834726017830
Pline  18
28.64433617580620	-28.19021051651410
28.64511774991000	-28.19017076409270
28.64566769879090	-28.19024571093070
28.64618561443910	-28.19041627588320
28.64659014895610	-28.19060433034640
28.64686584615940	-28.19078702155010
28.64734156009650	-28.19124429792320
28.64771033941850	-28.19196935724540
28.64802851697540	-28.19257220657610
28.64808082294770	-28.19322940070520
28.64838445421270	-28.19380178052880
28.64868754153490	-28.19420220017030
28.64957658090140	-28.19493025365620
28.65011348184630	-28.19517276650540
28.65121383702840	-28.19544681121120
28.65228980378780	-28.19544354703810
28.65297021774710	-28.19525093084740
28.65375329536070	-28.19495972700620
Pline  20
28.65838070574550	-28.19491129360770
28.65908199894890	-28.19524356394260
28.65981566840350	-28.19545168895340
28.66050572100400	-28.19550707789090
28.66138938895730	-28.19543772564490
28.66201391489090	-28.19523534917520
28.66288448267640	-28.19484539160430
28.66375377423120	-28.19475181578640
28.66461981741540	-28.19443506266680
28.66570766921630	-28.19418358936840
28.66659084342060	-28.19397091077870
28.66714028302790	-28.19388335813460
28.66777611391190	-28.19384333081300
28.66866807106590	-28.19392190606700
28.66946957257580	-28.19418240756520
28.66987988483980	-28.19439140654610
28.67048486821210	-28.19479091203270
28.67103630192320	-28.19527328227360
28.67206409974840	-28.19640088965280
28.67275433228880	-28.19719467903150
Pline  8
28.75200962199540	-28.19890646703120
28.75309484899770	-28.19881937501560
28.75428099499770	-28.19880073601560
28.75490631099770	-28.19889673201560
28.75622154399770	-28.19918452201570
28.75699762999770	-28.19947207901570
28.75759219504580	-28.19976578508370
28.75817029892640	-28.20001410362790
Pline  6
28.76779914900000	-28.20218927700000
28.76896448900000	-28.20211912900000
28.76976236700000	-28.20221510000000
28.77017202600000	-28.20234926200000
28.77099131600000	-28.20263674500000
28.77188714699120	-28.20311729506520
Pline  26
28.77188714699120	-28.20311729506520
28.77245654699120	-28.20416907506600
28.77282264099130	-28.20482022106640
28.77323195299160	-28.20537564406680
28.77346899399160	-28.20560548706680
28.77398633499160	-28.20595031506720
28.77467627299160	-28.20621859106720
28.77506442599160	-28.20629529806730
28.77577608399160	-28.20637210306760
28.77625062599160	-28.20631483206750
28.77717820599160	-28.20610445306720
28.77944749728850	-28.20529231558090
28.78086726599160	-28.20478418106640
28.78470730899200	-28.20332982106540
28.78580754399200	-28.20290880106520
28.78630363599200	-28.20281315706520
28.78686438299200	-28.20281326406520
28.78742506999200	-28.20288994706520
28.78809343899200	-28.20319644306520
28.78983950899200	-28.20442224306600
28.79023490313980	-28.20470707523340
28.79063712899200	-28.20499682606640
28.79086302214400	-28.20510832124750
28.79092122525300	-28.20513704874090
28.79160733699200	-28.20547569206680
28.79233197999200	-28.20582688906720
Pline  9
28.79260688699600	-28.20615058403360
28.79283599232770	-28.20724495805370
28.79285199146190	-28.20732138073780
28.79287853199600	-28.20744815603400
28.79302920599600	-28.20792686603420
28.79330928799600	-28.20838647403440
28.79389121199610	-28.20903758503460
28.79490443199620	-28.20980365503480
28.79594643699620	-28.21051682503520
Pline  17
28.79594643699620	-28.21051682503520
28.79609141743940	-28.21132309652780
28.79632941930890	-28.21209668888330
28.79649034411250	-28.21278120957030
28.79669037518150	-28.21321260409920
28.79718828299620	-28.21376760003620
28.79748807871080	-28.21399184698440
28.79759791499620	-28.21407400403640
28.79802919899620	-28.21422724903640
28.79861153699620	-28.21430391103640
28.79921548099620	-28.21428485803640
28.80031557199620	-28.21418924503640
28.80102735399620	-28.21420841903640
28.80169594599620	-28.21430422503640
28.80264498399620	-28.21434258603640
28.80314108899620	-28.21430437703640
28.80369762599620	-28.21424266803640
Pline  11
28.81728831399660	-28.21605275403700
28.81757751752300	-28.21612505903630
28.81895060199660	-28.21646834003720
28.82453714799660	-28.21662076503720
28.82453714499660	-28.21662125403720
28.82507637399660	-28.21665947603720
28.82663196115560	-28.21674526329180
28.82838827498820	-28.21684178167210
28.83133155399680	-28.21700346203730
28.83366110699680	-28.21704141703740
28.83424396799680	-28.21705924003740
Pline  8
28.83831887999700	-28.22089290603860
28.83924686799700	-28.22157848003880
28.84203710791790	-28.22460908741710
28.84322348443480	-28.22589759601680
28.84435841399700	-28.22713019004070
28.84770169599710	-28.23080569004200
28.84895281099720	-28.23220312704240
28.84963238999720	-28.23302557604260
Pline  14
28.87062754100000	-28.23844921500000
28.87132505300000	-28.23882027700000
28.87192915100000	-28.23899234700000
28.87259797700000	-28.23906863500000
28.87309423800000	-28.23903017300000
28.87361194700000	-28.23893420900000
28.87518683300000	-28.23835907000000
28.87883259700000	-28.23672984500000
28.88491580600000	-28.23396955900000
28.88780635700000	-28.23278088600000
28.88843192100000	-28.23258906200000
28.89091272100000	-28.23218558800000
28.89548598500000	-28.23139786400000
28.89703696541050	-28.23108043946540
From zoltans at geograph.co.za  Fri Nov 11 04:08:38 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Nov 12 05:55:13 2011
Subject: [gdal-dev] Help from MapInfo users, please
In-Reply-To: <1321001599.2223.3.camel@GOLEM>
References: <4EBCD8A1.6050206@geograph.co.za> <1321001599.2223.3.camel@GOLEM>
Message-ID: <4EBCE616.4000307@geograph.co.za>

Koszonom nagyon szepen.

(and that's the limit of my written Hungarian - I was 3 years old when 
we came to South Africa)

Big thanks,
Zoltan


On 2011/11/11 10:53, Luca Sigfrido Percich wrote:
> Hi Zoltan,
>
> tessek. (If i remember the little hungarian I used to know)
>
> Converted with MapInfo 7.5 Table|Import command
>
> All the best
>
> Sig
>
> Il giorno ven, 11/11/2011 alle 10.11 +0200, Zoltan Szecsei ha scritto:
>> Hi,
>> I am trying to get some ogr2ogr and mitab issues regarding NULL values
>> in MID&  TAB files, resolved.
>> My (no longer so trusty) MapInfo v4.52 doesn't seem to recognize the
>> dongle in Windows 7 (I have tried different Sentinal drivers, but no
>> luck).
>>
>> The thread of the problem can be found at:
>> http://trac.osgeo.org/gdal/ticket/4337#comment:9
>>
>> Please  can a MapInfo user convert the attached files to Mapinfo TAB
>> format and email it back to me, so that we can use it for test data.
>>
>> Please do NOT use ogr2ogr or tab2tab - these are the products that
>> handle this data incorrectly !!!!
>>
>> Please state the version of MapInfo you have used for the conversion
>> to TAB.
>>
>> Big thanks&  kind regards,
>> Zoltan
>>
>>
>>
>> -- 
>>
>> ===========================================
>> Zoltan Szecsei PrGISc [PGP0031]
>> Geograph (Pty) Ltd.
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> 65 Main Road, Muizenberg 7945
>> Western Cape, South Africa.
>>
>> 34? 6'16.35"S 18?28'5.62"E
>>
>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>> Fax: +27-86-6115323     www.geograph.co.za
>> ===========================================
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From fabian.schindler at eox.at  Fri Nov 11 05:58:47 2011
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Sat Nov 12 08:16:38 2011
Subject: [gdal-dev] Bug in rasdaman dataset
Message-ID: <4EBCFFE7.8030108@eox.at>

Dear devs,

I'd like to draw attention to a bug in the rasdaman dataset (to be more 
specific: its GetGeoTransform method). I created a new ticket [1] and 
also added a resolving patch. I hope it will be applied to the trunk soon.

Thanks,
Fabian

[1] http://trac.osgeo.org/gdal/ticket/4341
From szabobaa at gmail.com  Fri Nov 11 07:18:03 2011
From: szabobaa at gmail.com (=?ISO-8859-1?Q?Balazs_Szab=F3?=)
Date: Sat Nov 12 09:14:42 2011
Subject: [gdal-dev] Help from MapInfo users, please
In-Reply-To: <4EBCD8A1.6050206@geograph.co.za>
References: <4EBCD8A1.6050206@geograph.co.za>
Message-ID: <CAOfwSLcD2epPziZoxVg=QFYy1HDJrQLWHy+Ekn+mNtAjkg27QA@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: xxx.zip
Type: application/zip
Size: 3397 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111111/4ed26fd7/xxx.zip
From bertelli at charta.acme.com  Fri Nov 11 12:21:47 2011
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Sat Nov 12 14:35:39 2011
Subject: [gdal-dev] Help from MapInfo users, please
Message-ID: <CALc8-VLWX2guk6oYcjef5OiF2XqKBkAB-qRD-oCWU1j2AazXFw@mail.gmail.com>

I don't understand the question (you didn't put any question in your
message), but I tried the mif/mid files provided. The first time I got
an error:
"Not enough CoordSys parameters specified for projection 8." (which
means State plane 1983).
You provided this:
CoordSys Earth Projection 8, 74, 'm', -87.5, 30.0, 0.9999333333, 600000, 0
but you should also put the coordinate bounds.
This is the string that MapInfo puts in the header of a mif file with
the same coordinate system:
CoordSys Earth Projection 8, 33, "m", -87.5, 30, 0.9999333333, 600000,
0 Bounds (-7648594.01042, -13321190.9883) (8848594.01042,
6681406.87453)
When you add bounds to your file, it can be imported without any fault.
Almost all necessary for any coordinate system is found inside a file
(MAPINFO.PRJ) provided with MapInfo, You could get a copy installing
the latest version of MI from testdrive.mapinfo.com.
Just let me know if this is the question and my answer fits it.
c
From thare at usgs.gov  Fri Nov 11 20:48:16 2011
From: thare at usgs.gov (Trent M Hare)
Date: Sat Nov 12 23:49:14 2011
Subject: [gdal-dev] NoData value used during unscale in gdal_translate
Message-ID: <OFA4DCB7C0.36A42A05-ON07257946.0009E9B3-07257946.0009E9B7@usgs.gov>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111111/8ced999e/attachment.html
From even.rouault at mines-paris.org  Sat Nov 12 08:26:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 13 11:46:41 2011
Subject: [gdal-dev] NoData value used during unscale in gdal_translate
In-Reply-To: <OFA4DCB7C0.36A42A05-ON07257946.0009E9B3-07257946.0009E9B7@usgs.gov>
References: <OFA4DCB7C0.36A42A05-ON07257946.0009E9B3-07257946.0009E9B7@usgs.gov>
Message-ID: <201111121426.59844.even.rouault@mines-paris.org>

Le samedi 12 novembre 2011 02:48:16, Trent M Hare a ?crit :
> Group,
>     It appears when using "-unscale" during a gdal_translate conversion,
> the defined NoData value is used when the offset/scale are applied. Not
> sure if this is intentional?

Trent,
I also do not consider the current behaviour as the most intuitive one. 
There's an old ticket http://trac.osgeo.org/gdal/ticket/3085 that deals with 
that issue. I would be very tempted to apply (a variation of) the patch I had 
attached to the ticket, that would honour the nodata value of the source band 
if it exists. Perhaps only restricted to the -scale / -unscale case where this 
is the most problematic, in order to limit backward compatibility issues when 
only -a_nodata is used (pure remapping of nodata values can be done with 
gdalwarp). The -srcnodata option I had proposed in the patch could also be 
removed : if people have a dataset with a nodata value set that they want to 
be considered as a regular value, they can preprocess it with a 
"gdal_translate src.tif without_no_data.vrt -a_nodata none -of VRT" to unset 
it, and use that intermediate dataset as the source for the gdal_translate -
scale/-unscale.

Frank,
What is your current opinion on this issue ?


Best regards,

Even

From amigoface at gmail.com  Sat Nov 12 15:54:18 2011
From: amigoface at gmail.com (amigoface)
Date: Sun Nov 13 19:38:21 2011
Subject: [gdal-dev] export Srtm data to float32 raw
Message-ID: <1321131258510-6988690.post@n2.nabble.com>

Hi, 

is it possible to export srtm UInt16 to a raw file (float32)? 

if yes how please 

i need this to use with a terrain engine that take this type of files as
heightmap 

thanks and good day

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/export-Srtm-data-to-float32-raw-tp6988690p6988690.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Nov 12 15:57:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 13 19:41:47 2011
Subject: [gdal-dev] export Srtm data to float32 raw
In-Reply-To: <1321131258510-6988690.post@n2.nabble.com>
References: <1321131258510-6988690.post@n2.nabble.com>
Message-ID: <201111122157.37283.even.rouault@mines-paris.org>

Le samedi 12 novembre 2011 21:54:18, amigoface a ?crit :
> Hi,
> 
> is it possible to export srtm UInt16 to a raw file (float32)?
> 
> if yes how please

You can translate into ESRI Hdr format for example

gdal_translate -of EHdr srcdataset out.flt -ot Float32

The out.flt file will contain raw float32.

> 
> i need this to use with a terrain engine that take this type of files as
> heightmap
> 
> thanks and good day
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/export-Srtm-data-to-float32-raw-tp6
> 988690p6988690.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From geep999 at yahoo.co.uk  Sun Nov 13 07:04:18 2011
From: geep999 at yahoo.co.uk (geep999)
Date: Mon Nov 14 11:39:10 2011
Subject: [gdal-dev] Re: gdal2tiles: tiles in wrong hemisphere,
 and/or Openlayers problem
In-Reply-To: <201111110049.31416.even.rouault@mines-paris.org>
References: <1320958680946-6983306.post@n2.nabble.com>
	<201111110049.31416.even.rouault@mines-paris.org>
Message-ID: <1321185858766-6989780.post@n2.nabble.com>

Even & Klokan,
1/ Thanks for your comments and link. The light has dawned, and I've now
understood the differences in tile naming between
TMS and XYZ tilsets.

I edited the overlays.html created by gdal2tiles.py to use both
OpenLayers.Layer.TMS and OpenLayers.Layer.XYZ.
Rather than create a 'proper' XYZ tileset, I created a function
xyz_getTileURL to allow OpenLayers.Layer.XYZ 
to read from a TMS tileset.

As it might be of interest for others struggling to understand this stuff, I
attach it below.
Or look at the source on:
http://pgg999.freehostingcloud.com/tiles4_srtm/openlayers.xyz.html

xyz_getTileURL is just a modification of the existing osm_getTileURL &
overlay_getTileURL, 
with Klokan's formula y = (2^z - 1) - y used to convert the TMS Y to the XYZ
Y

2/ I noted that overlays.html calls:
http://www.openlayers.org/api/2.7/OpenLayers.js
This doesn't seem to support Openlayers.Layer.XYZ
Maybe a future version of gdaltiles.py could instead reference a newer
version of Openlayers.
e.g. http://www.openlayers.org/api/2.11/OpenLayers.js


Cheers,
Peter

		    // create XYZ Overlay layer
		    // This is an exercise for me to use Openlayers.Layer.XYZ, and write
my own getURL function.
		    // (The TMS tileset was created by gdal2tiles.py. 
		    //  So need to convert from the TMS URL to XYZ URL with
xyz_getTileURL) 
		    // Using a ZXY tileset then "getURL: xyz_getTileURL" is not needed and
		    //  the URL would be simply
"http://pgg999.freehostingcloud.com/tiles4_srtm/${z}/${x}/${y}.png"
		    var tiles4_srtm = new OpenLayers.Layer.XYZ("OpenLayers.Layer.XYZ",
			"http://pgg999.freehostingcloud.com/tiles4_srtm/",
			{ type: 'png', getURL: xyz_getTileURL, alpha: true, isBaseLayer: false
});


		//This function allows a TMS tileset to be used with OpenLayers.Layer.XYZ
	        function xyz_getTileURL(bounds) {
	            var res = this.map.getResolution();
	            var x = Math.round((bounds.left - this.maxExtent.left) / (res *
this.tileSize.w));
	            var y = Math.round((this.maxExtent.top - bounds.top) / (res *
this.tileSize.h));
	            var z = this.map.getZoom();
	            var limit = Math.pow(2, z);

		        if (mapBounds.intersectsBounds( bounds ) && z >= mapMinZoom && z
<= mapMaxZoom ) {
			  x = ((x % limit) + limit) % limit;
			  y = Math.pow(2,z) - y - 1;
			  return this.url + z + "/" + x + "/" + y + "." + this.type;
			} else {
			  return "http://www.maptiler.org/img/none.png";
			}

	        }


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal2tiles-tiles-in-wrong-hemisphere-and-or-Openlayers-problem-tp6983306p6989780.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Jukka.Rahkonen at mmmtike.fi  Mon Nov 14 04:21:35 2011
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Nov 15 10:06:55 2011
Subject: [gdal-dev] GDAL GML driver and .xsd schema mapping
Message-ID: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>

Hi,

It is not totally clear for me to what extent GDAL GML driver is utilising the .xsd schema if it is present.  I have an example where the schema obviously in not utilised or respected. In the schema the nationalCode element is defined as
          </element>
          <element name="nationalCode" type="string">
            <annotation>
              <documentation>-- Definition --&#13;
Thematic identifier corresponding to the national administrative codes defined in each country.&#13;

In the GML file the nationalCode attribute has values which are strings but they contain always only numeric characters. The .gfs file created by GDAL is interpreting the attribute data type as Integer.
<PropertyDefn>
      <Name>nationalCode</Name>
      <ElementPath>nationalCode</ElementPath>
      <Type>Integer</Type>
    </PropertyDefn>

Ogr2ogr conversion to other formats gives a correct data type for this attribute if I edit first manually the .gfs file to use String type for nationalCode. I would like to know if this is how it is planned to be and users just need to remember to correct all the strings-with-only-numeric-characters attribute types manually.

Perhaps this behaviour has something to do with the data which is using an Inspire schema that cannot be totally converted into ogr model?  Comments of ticket 4328 http://trac.osgeo.org/gdal/ticket/4328 especially  http://trac.osgeo.org/gdal/changeset/23315  seem to suggest so.

If that is a case, could it be possible to make ogr2ogr to print the message /* Too complex schema for us. Aborts parsing */  also on screen as a warning?  Otherwise users can believe that the .xsd schema file is used even it is not.

I am using the gdal-dev version from this morning (November 14) downloaded from gisinternals.

-Jukka Rahkonen-
From suithedoc at arcor.de  Mon Nov 14 06:26:26 2011
From: suithedoc at arcor.de (dennis)
Date: Tue Nov 15 12:18:46 2011
Subject: [gdal-dev] about the license
Message-ID: <4EC0FAE2.7000802@arcor.de>

Hi everyone,

I am developing a free software that works with the awesome java 
bindings of gdal and I have a question about the license and how to use 
it correctly.
This is the first time that I develop a software which is available for 
download and I want to do this correctly.

This is what I have so far.
1.) I have included the gdal.jar, all the required .dll files and the 
data directory in the program folder.
2.) I put a copy of the license into the program folder.
3.) In the program, you can press a button "about" go to "third-party 
libraries" and read about gdal, the license and links to www.gdal.org

Is this enough to meet the requirements of the license?

I know this is not really a technical question, but I read a lot of 
different things about this topic and I am feeling pretty insecure.

Greetings
Dennis



From brfr at metrico.lu  Mon Nov 14 07:44:42 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Nov 15 14:01:53 2011
Subject: [gdal-dev] VSIF and Python
Message-ID: <4EC10D3A.4000308@metrico.lu>

Hi,

I wanted to try the VSIF* functions that are mentioned in the docs [1]. 
I am using gdal (and python-gdal) from debian testing, which is version 
1.7.?. The VSIF* functions are "not found", so I presume they are 
available with gdal >= 1.8 only?

I found [2], which is pretty much what I want to do: read geodata with 
ogr, do some work with it and dump the result, in case of a text file 
format, to string instead to file. Right now I am doing the same with an 
extra step (save the result to file and read it again with python).
There's no way to inject a file like object (file, stringio) to gdal 
instead of path names, isn't there?

Thanks

Frank


[1] http://gdal.org/python/
[2] 
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-NET-and-OGR-writing-to-stream-td6638444.html#a6648549

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From etourigny.dev at gmail.com  Mon Nov 14 09:39:22 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Nov 15 15:41:55 2011
Subject: [gdal-dev] VSIF and Python
In-Reply-To: <4EC10D3A.4000308@metrico.lu>
References: <4EC10D3A.4000308@metrico.lu>
Message-ID: <CA+TxYvNQfuBfnVK_i2wE=JRx=DzFNDp4F6ZP0g+EBXTBpeNJYw@mail.gmail.com>

Yes, VSI* has been implemented in gdal 1.8.0, you should use the
latest stable 1.8.1.

You have this in debian experimental, but I don't use debian so can't
comment on how "experimental" the debian gdal 1.8 builds are.
You can also build gdal yourself from source.

Provided you upgrade to 1.8.1, you should be able to reproduce [2]
using the vsimem interface.

Etienne

On Mon, Nov 14, 2011 at 10:44 AM, Frank Broniewski <brfr@metrico.lu> wrote:
> Hi,
>
> I wanted to try the VSIF* functions that are mentioned in the docs [1]. I am
> using gdal (and python-gdal) from debian testing, which is version 1.7.?.
> The VSIF* functions are "not found", so I presume they are available with
> gdal >= 1.8 only?
>
> I found [2], which is pretty much what I want to do: read geodata with ogr,
> do some work with it and dump the result, in case of a text file format, to
> string instead to file. Right now I am doing the same with an extra step
> (save the result to file and read it again with python).
> There's no way to inject a file like object (file, stringio) to gdal instead
> of path names, isn't there?
>
> Thanks
>
> Frank
>
>
> [1] http://gdal.org/python/
> [2]
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-NET-and-OGR-writing-to-stream-td6638444.html#a6648549
>
> --
> Frank BRONIEWSKI
>
> METRICO s.? r.l.
> g?om?tres
> technologies d'information g?ographique
> rue des Romains 36
> L-5433 NIEDERDONVEN
>
> t?l.: +352 26 74 94 - 28
> fax.: +352 26 74 94 99
> http://www.metrico.lu
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ari.jolma at gmail.com  Mon Nov 14 09:55:43 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Nov 15 15:59:11 2011
Subject: [gdal-dev] VSIF and Python
In-Reply-To: <4EC10D3A.4000308@metrico.lu>
References: <4EC10D3A.4000308@metrico.lu>
Message-ID: <4EC12BEF.2040501@gmail.com>

On 11/14/2011 02:44 PM, Frank Broniewski wrote:
>
> I want to do: read geodata with ogr, do some work with it and dump the 
> result, in case of a text file format, to string instead to file. 
> Right now I am doing the same with an extra step (save the result to 
> file and read it again with python).
> There's no way to inject a file like object (file, stringio) to gdal 
> instead of path names, isn't there?

This is not an answer and I don't speak for the Python bindings. Instead 
I'm looking at this from the
point of view of Perl bindings.

Latest Perl bindings do have the VSIF{Open,Close,Seek,Tell,Write}L API 
but they are not documented[1]. Mostly because I haven't used/tried 
them. The following is some quick thoughts on how they might be used.

This prints out a shapefile in GML (works now)

use Geo::GDAL;
$datasource = Geo::OGR::Open('/home/ajolma/shapefile.shp');
Geo::OGR::Driver('GML')->Copy($datasource, '/dev/stdout');

The problem with this is I seem to be unable to use any Perl XML/GML 
processing tools. It might be useful to do something like this:

use Geo::GDAL;
use XML::Parser;
$datasource = Geo::OGR::Open('/home/ajolma/shapefile.shp');
$handle = Geo::OGR::Driver('GML')->Copy($datasource);
$p = new XML::Parser();
$p->parse($handle);

It seems to me that I'm at least missing a method to get the VSILFILE 
name to be able to build the support for the latter. The $handle should 
also be something like a standard Perl IO::Handle object. The point here 
is to avoid writing to and reading from a file. I think I don't even 
have to possibility to write to a string .. maybe though a memory file yes.

Just thinking,

Ari

[1] http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/

From ealpert at digitalglobe.com  Mon Nov 14 12:10:51 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Tue Nov 15 18:25:08 2011
Subject: [gdal-dev] Spatial Indexes for Memory Layers?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23308232F6B@COMAIL01.digitalglobe.com>

Curious if there's any way to create spatial indexes for in memory
layers?


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111114/9ea82c7c/attachment.html
From ealpert at digitalglobe.com  Mon Nov 14 12:17:38 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Tue Nov 15 18:29:03 2011
Subject: [gdal-dev] Does SetSpatialFilter use spatial indexes (.qix) for
	shapefiles
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23308232F75@COMAIL01.digitalglobe.com>

 

Curious if the Shapefile driver uses .qix files if they're available
when performing SetSpatialFitler.

 

 

 

Thanks,

 

-e


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111114/7dd77759/attachment.html
From jluis at ualg.pt  Mon Nov 14 12:23:23 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Nov 15 18:35:12 2011
Subject: [gdal-dev] Reading SRTM30 grids 'at distance'
Message-ID: <4EC14E8B.5010307@ualg.pt>

Hi,

I made a nice little tool for Mirone where one can very easily mosaic 
either several flavors of SRTM grids or satellite images from Bing servers.
My question is about the SRTM30 grids (30 arc minutes) that are 
available here (SRTM plus)
ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/
which I would like to be able to access directly with the vsicurl 
mechanism. The trouble in this case is that those grids are raw files 
without any header file. When we have them on disk the simple solution 
is to create a esri .hdr header from the information extracted from the 
file name. However, this logic does not work for files seating in the 
Web because the file and the header won't be located next to each other. 
The same occurs if one has those files compressed. In this case the 
header file cannot be assumed to be stored inside the .zip file and the 
vsizip mechanism will fail for exactly the same reason.
My question is than, if there is a mechanism to send the header info to 
the GDAL library and thus pretend that file and header leave side by 
side? Note that I want to do this programmatically so need for an 
already existing ready to use solution.

Thanks

Joaquim
From even.rouault at mines-paris.org  Mon Nov 14 13:23:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 15 19:38:08 2011
Subject: [gdal-dev] Does SetSpatialFilter use spatial indexes (.qix) for
	shapefiles
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23308232F75@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23308232F75@COMAIL01.digitalglobe.com>
Message-ID: <201111141923.06896.even.rouault@mines-paris.org>

Le lundi 14 novembre 2011 18:17:38, Ethan Alpert a ?crit :
> Curious if the Shapefile driver uses .qix files if they're available
> when performing SetSpatialFitler.

Ethan,

Quoting http://gdal.org/ogr/drv_shapefile.html :

"""
The spatial indexing uses the same .qix quadtree spatial index files that are 
used by UMN MapServer. [...]. Spatial indexing can accelerate spatially 
filtered passes through large datasets to pick out a small area quite 
dramatically.
"""

Best regards,

Even
From even.rouault at mines-paris.org  Mon Nov 14 13:25:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 15 19:40:20 2011
Subject: [gdal-dev] Spatial Indexes for Memory Layers?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23308232F6B@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23308232F6B@COMAIL01.digitalglobe.com>
Message-ID: <201111141925.15199.even.rouault@mines-paris.org>

Le lundi 14 novembre 2011 18:10:51, Ethan Alpert a ?crit :
> Curious if there's any way to create spatial indexes for in memory
> layers?
> 

Ethan

No, they are not supported by the OGR Memory driver.

But... if you use the very latest trunk with spatialite support, the OGR 
SQLite driver now supports the VSI virtual file API, which enable you to create 
a spatialite DB in "/vsimem/foo.db" for example and thus taking advantage of 
spatial index.

Best regards,

Even
From warmerdam at pobox.com  Mon Nov 14 13:47:54 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 15 20:04:04 2011
Subject: [gdal-dev] Reading SRTM30 grids 'at distance'
In-Reply-To: <4EC14E8B.5010307@ualg.pt>
References: <4EC14E8B.5010307@ualg.pt>
Message-ID: <CA+YzLBc0-oMwKD-4uNdOjO1R1pDTfRN1sThvoLWg1s3sAyiWkQ@mail.gmail.com>

Joaquim,

I can't think of a way to do this with an ESRI .hdr and raw file.
However, you could create a VRT file for each tile with the .VRT
file living locally, having the georeferencing and raw data layout
and referring to the actual raw data via a /vsicurl filename.  The
VRT docs cover how to describe a raw file in VRT.

Best regards,


On Mon, Nov 14, 2011 at 9:23 AM, Joaquim Luis <jluis@ualg.pt> wrote:
> Hi,
>
> I made a nice little tool for Mirone where one can very easily mosaic either
> several flavors of SRTM grids or satellite images from Bing servers.
> My question is about the SRTM30 grids (30 arc minutes) that are available
> here (SRTM plus)
> ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/
> which I would like to be able to access directly with the vsicurl mechanism.
> The trouble in this case is that those grids are raw files without any
> header file. When we have them on disk the simple solution is to create a
> esri .hdr header from the information extracted from the file name. However,
> this logic does not work for files seating in the Web because the file and
> the header won't be located next to each other. The same occurs if one has
> those files compressed. In this case the header file cannot be assumed to be
> stored inside the .zip file and the vsizip mechanism will fail for exactly
> the same reason.
> My question is than, if there is a mechanism to send the header info to the
> GDAL library and thus pretend that file and header leave side by side? Note
> that I want to do this programmatically so need for an already existing
> ready to use solution.
>
> Thanks
>
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Mon Nov 14 13:54:07 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 15 20:10:41 2011
Subject: [gdal-dev] Reading SRTM30 grids 'at distance'
In-Reply-To: <4EC14E8B.5010307@ualg.pt>
References: <4EC14E8B.5010307@ualg.pt>
Message-ID: <201111141954.07793.even.rouault@mines-paris.org>

Le lundi 14 novembre 2011 18:23:23, Joaquim Luis a ?crit :
> Hi,
> 
> I made a nice little tool for Mirone where one can very easily mosaic
> either several flavors of SRTM grids or satellite images from Bing servers.
> My question is about the SRTM30 grids (30 arc minutes) that are
> available here (SRTM plus)
> ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/
> which I would like to be able to access directly with the vsicurl
> mechanism. The trouble in this case is that those grids are raw files
> without any header file. When we have them on disk the simple solution
> is to create a esri .hdr header from the information extracted from the
> file name. However, this logic does not work for files seating in the
> Web because the file and the header won't be located next to each other.
> The same occurs if one has those files compressed. In this case the
> header file cannot be assumed to be stored inside the .zip file and the
> vsizip mechanism will fail for exactly the same reason.
> My question is than, if there is a mechanism to send the header info to
> the GDAL library and thus pretend that file and header leave side by
> side? Note that I want to do this programmatically so need for an
> already existing ready to use solution.

One way to do this is to use the capability of VRT files to describe raw files ( 
http://www.gdal.org/gdal_vrttut.html ), that offer similar capabilities than 
the EHdr header.

For e020n40.Bathymetry.srtm, a quick test shows that the following should do :

<VRTDataset rasterXSize="4800" rasterYSize="6000">
  <SRS>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 
84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</SRS>
  <GeoTransform>20, 0.008333333333333,  0.0,  40,  0.0, 
-0.008333333333333</GeoTransform>
  <VRTRasterBand dataType="Int16" band="1" subClass="VRTRawRasterBand">
    <SourceFilename 
relativetoVRT="0">/vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/e020n40.Bathymetry.srtm</SourceFilename>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>2</PixelOffset>
    <LineOffset>9600</LineOffset>
    <ByteOrder>MSB</ByteOrder>
  </VRTRasterBand>
</VRTDataset>

(I've attached it to avoid line wrapping problems)



> 
> Thanks
> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
<VRTDataset rasterXSize="4800" rasterYSize="6000">
  <SRS>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</SRS>
  <GeoTransform>20, 0.008333333333333,  0.0,  40,  0.0, -0.008333333333333</GeoTransform>
  <VRTRasterBand dataType="Int16" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativetoVRT="0">/vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/e020n40.Bathymetry.srtm</SourceFilename>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>2</PixelOffset>
    <LineOffset>9600</LineOffset>
    <ByteOrder>MSB</ByteOrder>
  </VRTRasterBand>
</VRTDataset>
From jluis at ualg.pt  Mon Nov 14 14:15:02 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Nov 15 20:33:00 2011
Subject: [gdal-dev] Reading SRTM30 grids 'at distance'
In-Reply-To: <201111141954.07793.even.rouault@mines-paris.org>
References: <4EC14E8B.5010307@ualg.pt>
	<201111141954.07793.even.rouault@mines-paris.org>
Message-ID: <4EC168B6.2040906@ualg.pt>

Evan, Frank

Thanks very much. I keep insisting on the esri .hdr because I have a 
function to do all the work but it's definitively time to write one to 
do the same for .vrt (and learn more about it a same time).

Joaquim

> Le lundi 14 novembre 2011 18:23:23, Joaquim Luis a ?crit :
>> Hi,
>>
>> I made a nice little tool for Mirone where one can very easily mosaic
>> either several flavors of SRTM grids or satellite images from Bing servers.
>> My question is about the SRTM30 grids (30 arc minutes) that are
>> available here (SRTM plus)
>> ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/
>> which I would like to be able to access directly with the vsicurl
>> mechanism. The trouble in this case is that those grids are raw files
>> without any header file. When we have them on disk the simple solution
>> is to create a esri .hdr header from the information extracted from the
>> file name. However, this logic does not work for files seating in the
>> Web because the file and the header won't be located next to each other.
>> The same occurs if one has those files compressed. In this case the
>> header file cannot be assumed to be stored inside the .zip file and the
>> vsizip mechanism will fail for exactly the same reason.
>> My question is than, if there is a mechanism to send the header info to
>> the GDAL library and thus pretend that file and header leave side by
>> side? Note that I want to do this programmatically so need for an
>> already existing ready to use solution.
> One way to do this is to use the capability of VRT files to describe raw files (
> http://www.gdal.org/gdal_vrttut.html ), that offer similar capabilities than
> the EHdr header.
>
> For e020n40.Bathymetry.srtm, a quick test shows that the following should do :
>
> <VRTDataset rasterXSize="4800" rasterYSize="6000">
>    <SRS>GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS
> 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.0174532925199433,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</SRS>
>    <GeoTransform>20, 0.008333333333333,  0.0,  40,  0.0,
> -0.008333333333333</GeoTransform>
>    <VRTRasterBand dataType="Int16" band="1" subClass="VRTRawRasterBand">
>      <SourceFilename
> relativetoVRT="0">/vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/data/e020n40.Bathymetry.srtm</SourceFilename>
>      <ImageOffset>0</ImageOffset>
>      <PixelOffset>2</PixelOffset>
>      <LineOffset>9600</LineOffset>
>      <ByteOrder>MSB</ByteOrder>
>    </VRTRasterBand>
> </VRTDataset>
>
> (I've attached it to avoid line wrapping problems)
>
>
>
>> Thanks
>>
>> Joaquim
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Nov 14 14:25:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 15 20:43:32 2011
Subject: [gdal-dev] GDAL GML driver and .xsd schema mapping
In-Reply-To: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>
References: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>
Message-ID: <201111142025.10056.even.rouault@mines-paris.org>

Jukka,

> 
> It is not totally clear for me to what extent GDAL GML driver is utilising
> the .xsd schema if it is present.  I have an example where the schema
> obviously in not utilised or respected. In the schema the nationalCode
> element is defined as </element>
>           <element name="nationalCode" type="string">
>             <annotation>
>               <documentation>-- Definition --&#13;
> Thematic identifier corresponding to the national administrative codes
> defined in each country.&#13;
> 
> In the GML file the nationalCode attribute has values which are strings but
> they contain always only numeric characters. The .gfs file created by GDAL
> is interpreting the attribute data type as Integer. <PropertyDefn>
>       <Name>nationalCode</Name>
>       <ElementPath>nationalCode</ElementPath>
>       <Type>Integer</Type>
>     </PropertyDefn>

In fact, the issuse is not with the nationalCode because OGR knows the 
"string" type. The issue is with the following elements, like inspireId whose 
type "base:IdentifierPropertyType" is not understood. When the XSD parser 
doesn't understand an element, it is preferable for it to completely give up, 
instead of only keeping the fields it understands and loosing the others one, 
which would lead to information loss. When the XSD parser fails, or the XSD 
doesn't exist, a full scan of the GML is triggered to make an auto-discovery 
of its structure that will be recorded in a .gfs file. Of course, as a side-
effect, this auto-discovery cannot guess that a field should be considered as 
string when all values found in the file are in fact integers.

> 
> Ogr2ogr conversion to other formats gives a correct data type for this
> attribute if I edit first manually the .gfs file to use String type for
> nationalCode. I would like to know if this is how it is planned to be and
> users just need to remember to correct all the
> strings-with-only-numeric-characters attribute types manually.
> 
> Perhaps this behaviour has something to do with the data which is using an
> Inspire schema that cannot be totally converted into ogr model?  Comments
> of ticket 4328 http://trac.osgeo.org/gdal/ticket/4328 especially 
> http://trac.osgeo.org/gdal/changeset/23315  seem to suggest so.

Yes, this schema is too complex for the OGR XSD parser (and beyond the 
capabilities of the parser itself, it doesn't feed into the Simple Feature 
model). The parser basically only understoods a subset of the possible 
schemas. It should match pretty much what is described as the "Compliance 
level SF-0" of "GML 3.1.1 simple features profile - OGC(R) 06-049r1" : 
http://portal.opengeospatial.org/files/?artifact_id=15201
Which, in a single sentence, basically means only simple fields with a single 
occurrence each.

> 
> If that is a case, could it be possible to make ogr2ogr to print the
> message /* Too complex schema for us. Aborts parsing */  also on screen as
> a warning?  Otherwise users can believe that the .xsd schema file is used
> even it is not.

Hopefully the following should be enough :

r23378 /trunk/gdal/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp: GML: add debug 
information to know if we use/generate .gfs file while there's a .xsd we ignore

I'm not sure it is a good idea to make it more verbose than a debug trace.

Best regards,

Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111114/fb3860b4/attachment-0001.html
From eadam at co.lincoln.or.us  Mon Nov 14 14:44:35 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue Nov 15 21:03:58 2011
Subject: [gdal-dev] access attribute (non-spatial) data in .mdb with PGeo
	Driver
Message-ID: <CACqBkM9vVSKy_wxVPMhZUba-a_3Khmh449p7GUuJkrv8FsNyHw@mail.gmail.com>

Hi all,

On Windows, I'm trying to access non-spatial tables in an .mdb file.
With --debug on I see that the absence of a 'GDB_GeomColumns' table is
the problem.

>ogrinfo --debug on Surveys.mdb
PGeo: EstablishSession(DRIVER=Microsoft Access Driver (*.mdb);DBQ=Surveys.mdb)
ODBC: SQLDriverConnect(DRIVER=Microsoft Access Driver (*.mdb);DBQ=Surveys.mdb)
PGEO: SELECT on GDB_GeomColumns fails, perhaps not a personal geodatabase?
[Microsoft][ODBC Microsoft Access Driver] The Microsoft Jet database engine cann
ot find the input table or query 'GDB_GeomColumns'.  Make sure it exists and tha
t its name is spelled correctly.
ODBC: SQLDisconnect()

I noticed this fairly recent commit, which seems to indicate that this
is the desired behavior, http://trac.osgeo.org/gdal/changeset/21550

I was able to access the non-spatial attributes by making a
'GDB_GeomColumns' table and falsely populating it (and ignoring the
missing 'GDB_SpatialRefs' table errors).

TableName	FieldName	ShapeType	ExtentLeft	ExtentBottom	ExtentRight	ExtentTop	IdxOriginX	IdxOriginY	IdxGridSize	SRID	HasZ	HasM
Survey	Shape	4	7255394.59721669	241841.239197335	7396378.9177745	524650.461230004	0	0	141508.958339791	1	0	0

>ogrinfo -so Surveys.mdb Survey
ERROR 1: 'SELECT srtext FROM GDB_SpatialRefs WHERE srid = 1' failed.
[Microsoft][ODBC Microsoft Access Driver] The Microsoft Jet database engine cann
ot find the input table or query 'GDB_SpatialRefs'.  Make sure it exists and tha
t its name is spelled correctly.
INFO: Open of `Surveys.mdb'
      using driver `PGeo' successful.

Layer name: Survey
Geometry: Unknown (any)
Feature Count: 20790
Extent: (7255394.597217, 241841.239197) - (7396378.917775, 524650.461230)
Layer SRS WKT:
(unknown)
Geometry Column = Shape
DocumentName: String (25.0)
SurveyDate: DateTime (19.0)
...


If the general case requires a 'GDB_GeomColumns' table, could no
'GDB_GeomColumns' table be made a driver config option?

I noticed that the new Access MDB driver,
http://gdal.org/ogr/drv_mdb.html , does not require a GDB_GeomColumns
table (tested on ubuntu 10.04 and gdal trunk).


Thanks, Eli
From even.rouault at mines-paris.org  Mon Nov 14 15:02:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 15 21:22:53 2011
Subject: [gdal-dev] access attribute (non-spatial) data in .mdb with PGeo
	Driver
In-Reply-To: <CACqBkM9vVSKy_wxVPMhZUba-a_3Khmh449p7GUuJkrv8FsNyHw@mail.gmail.com>
References: <CACqBkM9vVSKy_wxVPMhZUba-a_3Khmh449p7GUuJkrv8FsNyHw@mail.gmail.com>
Message-ID: <201111142102.30345.even.rouault@mines-paris.org>

Le lundi 14 novembre 2011 20:44:35, Eli Adam a ?crit :
> Hi all,
> 
> On Windows, I'm trying to access non-spatial tables in an .mdb file.
> With --debug on I see that the absence of a 'GDB_GeomColumns' table is
> the problem.
> 
> >ogrinfo --debug on Surveys.mdb
> 
> PGeo: EstablishSession(DRIVER=Microsoft Access Driver
> (*.mdb);DBQ=Surveys.mdb) ODBC: SQLDriverConnect(DRIVER=Microsoft Access
> Driver (*.mdb);DBQ=Surveys.mdb) PGEO: SELECT on GDB_GeomColumns fails,
> perhaps not a personal geodatabase? [Microsoft][ODBC Microsoft Access
> Driver] The Microsoft Jet database engine cann ot find the input table or
> query 'GDB_GeomColumns'.  Make sure it exists and tha t its name is
> spelled correctly.
> ODBC: SQLDisconnect()
> 
> I noticed this fairly recent commit, which seems to indicate that this
> is the desired behavior, http://trac.osgeo.org/gdal/changeset/21550

I'm confused because if you get to the point of having the trace " PGEO: 
SELECT on GDB_GeomColumns fails, perhaps not a personal geodatabase?" it means 
that you got after the test of r21550 (which should have discared this mdb as 
having no GDB_GeomColumns table), so I highly suspect you are not using trunk 
version for this test.

r21550 only enforces what existed before : the PGeo driver can only handle 
PGeo MDBs. The new test was introduced specifically to avoid the PGeo driver to 
try opening a MDB that should be recognized by the Geomedia driver (new in 
trunk).

> 
> I was able to access the non-spatial attributes by making a
> 'GDB_GeomColumns' table and falsely populating it (and ignoring the
> missing 'GDB_SpatialRefs' table errors).
> 
> TableName	FieldName	ShapeType	ExtentLeft	ExtentBottom	ExtentRight	
ExtentTop
> 	IdxOriginX	IdxOriginY	IdxGridSize	SRID	HasZ	HasM
> Survey	Shape	4	7255394.59721669	241841.239197335	7396378.9177745	
524650.46
> 1230004	0	0	141508.958339791	1	0	0
> 
> >ogrinfo -so Surveys.mdb Survey
> 
> ERROR 1: 'SELECT srtext FROM GDB_SpatialRefs WHERE srid = 1' failed.
> [Microsoft][ODBC Microsoft Access Driver] The Microsoft Jet database engine
> cann ot find the input table or query 'GDB_SpatialRefs'.  Make sure it
> exists and tha t its name is spelled correctly.
> INFO: Open of `Surveys.mdb'
>       using driver `PGeo' successful.
> 
> Layer name: Survey
> Geometry: Unknown (any)
> Feature Count: 20790
> Extent: (7255394.597217, 241841.239197) - (7396378.917775, 524650.461230)
> Layer SRS WKT:
> (unknown)
> Geometry Column = Shape
> DocumentName: String (25.0)
> SurveyDate: DateTime (19.0)
> ...
> 
> 
> If the general case requires a 'GDB_GeomColumns' table, could no
> 'GDB_GeomColumns' table be made a driver config option?

Why not using the generic ODBC driver for that use case ?

> 
> I noticed that the new Access MDB driver,
> http://gdal.org/ogr/drv_mdb.html , does not require a GDB_GeomColumns
> table (tested on ubuntu 10.04 and gdal trunk).

Yes, it can understand PGeo MDBs, Geomedia MDBs and generic MDBs.

> 
> 
> Thanks, Eli
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From eadam at co.lincoln.or.us  Mon Nov 14 15:29:58 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue Nov 15 21:51:49 2011
Subject: [gdal-dev] access attribute (non-spatial) data in .mdb with PGeo
	Driver
In-Reply-To: <201111142102.30345.even.rouault@mines-paris.org>
References: <CACqBkM9vVSKy_wxVPMhZUba-a_3Khmh449p7GUuJkrv8FsNyHw@mail.gmail.com>
	<201111142102.30345.even.rouault@mines-paris.org>
Message-ID: <CACqBkM-QpCEtuGRFvjUw-64=ywCrAXKiCwfXjFzyXswHAeuw0g@mail.gmail.com>

Thanks Even.

> I'm confused because if you get to the point of having the trace " PGEO:
> SELECT on GDB_GeomColumns fails, perhaps not a personal geodatabase?" it means
> that you got after the test of r21550 (which should have discared this mdb as
> having no GDB_GeomColumns table), so I highly suspect you are not using trunk
> version for this test.

Correct.  I'm using an old OSGeo4W 1.8dev.  Yes, I should have noticed
that I was not using the results of that r21550.

>
> r21550 only enforces what existed before : the PGeo driver can only handle
> PGeo MDBs. The new test was introduced specifically to avoid the PGeo driver to
> try opening a MDB that should be recognized by the Geomedia driver (new in
> trunk).

I confirmed that I don't get that trace with the gisinternals
release-1600-gdal-mapserver (from about 2 weeks ago).  I also checked
with this before writing the list, but just checked that trunk also
didn't open the file.  I didn't redo the --debug on portion.

>
> Why not using the generic ODBC driver for that use case ?

This is apparently what I should have been doing.  I'll try that now.

Thanks, Eli
From etourigny.dev at gmail.com  Mon Nov 14 16:29:48 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Nov 15 22:54:56 2011
Subject: [gdal-dev] autotests for specific formats in autotest/gcore
	folder???
Message-ID: <CA+TxYvPne_YAhMN3CTSSVZG9yMXagGeqAWn=SKAam8GYthvBZg@mail.gmail.com>

Hi devs,

I have noticed today that there are a few format-specific tests in the
autotest/gcore folder:

aaigrid_read.py  bmp_read.py  envi_read.py  hdf4_read.py  hfa_read.py
pnm_read.py  tiff_read.py
aaigrid_write.py  bmp_write.py  gtiff_write.py  hdf4_write.py
hfa_write.py  netcdf_write.py  pnm_write.py  tiff_write.py

They should probably be in the autotest/gdrivers folder instead,
right? Are they in the gcore folder for purely historic reasons or
another reason?


regards,
Etienne
From warmerdam at pobox.com  Mon Nov 14 16:36:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 15 23:02:27 2011
Subject: [gdal-dev] autotests for specific formats in autotest/gcore
	folder???
In-Reply-To: <CA+TxYvPne_YAhMN3CTSSVZG9yMXagGeqAWn=SKAam8GYthvBZg@mail.gmail.com>
References: <CA+TxYvPne_YAhMN3CTSSVZG9yMXagGeqAWn=SKAam8GYthvBZg@mail.gmail.com>
Message-ID: <CA+YzLBdr3cDJ06NgnG9E+2kbA1RwaNiYBBjm4Km5Ut9VARBUuA@mail.gmail.com>

Etienne,

This is partly a historical artifact, but it never seemed
worth the disruption to move things around.  Note that
some of these test scripts are primarily intended to test
core capabilities and they just happen to do it with
particular formats.  I think that applies to some of the hfa
and tiff scripts.

Best regards,

On Mon, Nov 14, 2011 at 1:29 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Hi devs,
>
> I have noticed today that there are a few format-specific tests in the
> autotest/gcore folder:
>
> aaigrid_read.py ?bmp_read.py ?envi_read.py ?hdf4_read.py ?hfa_read.py
> pnm_read.py ?tiff_read.py
> aaigrid_write.py ?bmp_write.py ?gtiff_write.py ?hdf4_write.py
> hfa_write.py ?netcdf_write.py ?pnm_write.py ?tiff_write.py
>
> They should probably be in the autotest/gdrivers folder instead,
> right? Are they in the gcore folder for purely historic reasons or
> another reason?
>
>
> regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jukka.rahkonen at mmmtike.fi  Mon Nov 14 16:46:49 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Nov 15 23:13:03 2011
Subject: [gdal-dev] Re: GDAL GML driver and .xsd schema mapping
References: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>
	<201111142025.10056.even.rouault@mines-paris.org>
Message-ID: <loom.20111114T224104-692@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> 
> Jukka,

....

> Hopefully the following should be enough :
> 
> r23378 /trunk/gdal/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp: GML: add debug
information to know if we use/generate .gfs file while there's a .xsd we ignore
> 
> I'm not sure it is a good idea to make it more verbose than a debug trace.

Thanks, it will be enough for me. I am awaiting samples of other ready defined
Inspire data products, they can be more painful than this authorative units
dataset which has after all rather simple structure. 

-Jukka Rahkonen-




From mpg at flaxen.com  Tue Nov 15 12:26:48 2011
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Wed Nov 16 19:57:22 2011
Subject: [gdal-dev] 2012 North American OSGeo Codesprint - sign up now!
Message-ID: <021f01cca3bb$c325ada0$497108e0$@flaxen.com>

The fourth annual North American codesprint is only 3 months away!

This is an important annual event for the GDAL community, since GDAL is at the heart of so many open source geospatial projects.  Please consider joining us!

	** Space is limited, so you need to register in advance.  **

The sprint will be February 5-9, 2012, at IslandWood -- a small retreat center in the Pacific Northwest.  This sprint has always attracted a great mix of people from a number of different OSGeo-related projects, and it serves as a great opportunity for some dedicated face time for project collaboration, from bug stomping to future release planning.

Wiki page:  http://wiki.osgeo.org/wiki/IslandWood_Code_Sprint_2012
Contact: email mpg@flaxen.com for more info or to register.

-mpg


From etourigny.dev at gmail.com  Tue Nov 15 17:25:49 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Nov 17 01:13:08 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
Message-ID: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>

Hi all,

I am working with data in the SAD69 Datum (EPSG:4618) from Brazil's
IBGE and when I convert any data to/from WGS84 (EPSG:4362) it appears
that there is absolutely no shift in the coordinates.

I understand that they are similar datums, but one would expect a visible shift.
The only changes are in the files are the .prj file which contain the
SAD69 or WGS84 GEOGCS.

I use the following command:

$ ogr2ogr --debug on -t_srs EPSG:4326 LC_CIDADE_wgs84.shp LC_CIDADE.shp

OGR: OGROpen(LC_CIDADE.shp/0x1384170) succeeded as ESRI Shapefile.
OGRCT: Source: +proj=longlat +ellps=aust_SA +no_defs
OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs
Shape: DBF Codepage = LDID/87 for LC_CIDADE_wgs84
Shape: Treating as encoding 'ISO-8859-1'.
Shape: 5806 features read on layer 'LC_CIDADE'.


I also tried the same command with an UTM projection, and again the
only thing that changes is the .prj file.  I have also tried it with
other shapefiles, with the same result.

Is this the expected behavior, or am I doing something wrong? I would
expect the geometries to be transformed, but apparently they are not.

thanks,
Etienne
From even.rouault at mines-paris.org  Tue Nov 15 17:36:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 01:24:54 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
Message-ID: <201111152336.53092.even.rouault@mines-paris.org>

Etienne,
> 
> I am working with data in the SAD69 Datum (EPSG:4618) from Brazil's
> IBGE and when I convert any data to/from WGS84 (EPSG:4362) it appears
> that there is absolutely no shift in the coordinates.

4326 you meant ?

> 
> I understand that they are similar datums, but one would expect a visible
> shift. The only changes are in the files are the .prj file which contain
> the SAD69 or WGS84 GEOGCS.
> 
> I use the following command:
> 
> $ ogr2ogr --debug on -t_srs EPSG:4326 LC_CIDADE_wgs84.shp LC_CIDADE.shp
> 
> OGR: OGROpen(LC_CIDADE.shp/0x1384170) succeeded as ESRI Shapefile.
> OGRCT: Source: +proj=longlat +ellps=aust_SA +no_defs
> OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs
> Shape: DBF Codepage = LDID/87 for LC_CIDADE_wgs84
> Shape: Treating as encoding 'ISO-8859-1'.
> Shape: 5806 features read on layer 'LC_CIDADE'.

The issue is that the .prj format (ESRI WKT) doesn't store the TOWGS84 
parameters. So you have to manually specify the source SRS so that GDAL can 
fetch it from the EPSG database.

Try :

ogr2ogr --debug on -s_srs EPSG:4618 -t_srs EPSG:4326 LC_CIDADE_wgs84.shp 
LC_CIDADE.shp

Perhaps the shapefile driver could call AutoIdentifyEPSG() to fill the part 
losts in .prj format, but it wouldn't help for your case, because just a few 
SRS are autodetected currently.

Best regards,

Even
From etourigny.dev at gmail.com  Tue Nov 15 18:02:24 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Nov 17 01:57:15 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <201111152336.53092.even.rouault@mines-paris.org>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
	<201111152336.53092.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPLYMVrS018q08c5p4vf=93pFM4uys0RF=E0_ixYAL1+g@mail.gmail.com>

Even,

I had tried that as I thought it could be the cause, however:

I get the same result, although the +towgs84 parameters are set in the
source OGRCT.

You can see the shapes are identical in size:
-rw------- 1 tourigny tourigny 371684 2011-11-15 20:52 LC_CIDADE_32722.shp
-rw------- 1 tourigny tourigny 371684 2011-11-15 19:35 LC_CIDADE_sad69.shp
-rw------- 1 tourigny tourigny 371684 2011-11-15 19:33 LC_CIDADE.shp
-rw------- 1 tourigny tourigny 371684 2011-11-15 20:46 LC_CIDADE_wgs84-2.shp

$ ogr2ogr --debug on -s_srs EPSG:4618 -t_srs EPSG:4326
LC_CIDADE_wgs84-2.shp LC_CIDADE.shpOGR:
OGROpen(LC_CIDADE.shp/0x9b5170) succeeded as ESRI Shapefile.OGRCT:
Source: +proj=longlat +ellps=aust_SA +towgs84=-57,1,-41,0,0,0,0
+no_defs?OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs?Shape:
5806 features read on layer 'LC_CIDADE'.
When I try to transform to UTM, same things happens (shp file is not
modified). That is even more puzzling.

 $  ogr2ogr --debug on -s_srs EPSG:4618 -t_srs EPSG:32722
LC_CIDADE_32722.shp LC_CIDADE.shp
OGR: OGROpen(LC_CIDADE.shp/0xdd0650) succeeded as ESRI Shapefile.
OGRCT: Source: +proj=longlat +ellps=aust_SA +towgs84=-57,1,-41,0,0,0,0 +no_defs
OGRCT: Target: +proj=utm +zone=22 +south +datum=WGS84 +units=m +no_defs
Shape: DBF Codepage = LDID/87 for LC_CIDADE_32722
Shape: Treating as encoding 'ISO-8859-1'.
Shape: 5806 features read on layer 'LC_CIDADE'.


Posted 2 files at
http://dl.dropbox.com/u/15998214/LC_CIDADE.zip
http://dl.dropbox.com/u/15998214/brazil.zip


Thanks,
Etienne

On Tue, Nov 15, 2011 at 8:36 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Etienne,
>>
>> I am working with data in the SAD69 Datum (EPSG:4618) from Brazil's
>> IBGE and when I convert any data to/from WGS84 (EPSG:4362) it appears
>> that there is absolutely no shift in the coordinates.
>
> 4326 you meant ?
>
>>
>> I understand that they are similar datums, but one would expect a visible
>> shift. The only changes are in the files are the .prj file which contain
>> the SAD69 or WGS84 GEOGCS.
>>
>> I use the following command:
>>
>> $ ogr2ogr --debug on -t_srs EPSG:4326 LC_CIDADE_wgs84.shp LC_CIDADE.shp
>>
>> OGR: OGROpen(LC_CIDADE.shp/0x1384170) succeeded as ESRI Shapefile.
>> OGRCT: Source: +proj=longlat +ellps=aust_SA +no_defs
>> OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs
>> Shape: DBF Codepage = LDID/87 for LC_CIDADE_wgs84
>> Shape: Treating as encoding 'ISO-8859-1'.
>> Shape: 5806 features read on layer 'LC_CIDADE'.
>
> The issue is that the .prj format (ESRI WKT) doesn't store the TOWGS84
> parameters. So you have to manually specify the source SRS so that GDAL can
> fetch it from the EPSG database.
>
> Try :
>
> ogr2ogr --debug on -s_srs EPSG:4618 -t_srs EPSG:4326 LC_CIDADE_wgs84.shp
> LC_CIDADE.shp
>
> Perhaps the shapefile driver could call AutoIdentifyEPSG() to fill the part
> losts in .prj format, but it wouldn't help for your case, because just a few
> SRS are autodetected currently.
>
> Best regards,
>
> Even
>
From even.rouault at mines-paris.org  Tue Nov 15 18:16:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 02:06:58 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <CA+TxYvPLYMVrS018q08c5p4vf=93pFM4uys0RF=E0_ixYAL1+g@mail.gmail.com>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
	<201111152336.53092.even.rouault@mines-paris.org>
	<CA+TxYvPLYMVrS018q08c5p4vf=93pFM4uys0RF=E0_ixYAL1+g@mail.gmail.com>
Message-ID: <201111160016.49767.even.rouault@mines-paris.org>

Le mercredi 16 novembre 2011 00:02:24, Etienne Tourigny a ?crit :
> Even,
> 
> I had tried that as I thought it could be the cause, however:
> 
> I get the same result, although the +towgs84 parameters are set in the
> source OGRCT.
> 
> You can see the shapes are identical in size:
> -rw------- 1 tourigny tourigny 371684 2011-11-15 20:52 LC_CIDADE_32722.shp
> -rw------- 1 tourigny tourigny 371684 2011-11-15 19:35 LC_CIDADE_sad69.shp
> -rw------- 1 tourigny tourigny 371684 2011-11-15 19:33 LC_CIDADE.shp
> -rw------- 1 tourigny tourigny 371684 2011-11-15 20:46
> LC_CIDADE_wgs84-2.shp

Ah, and you didn't check the result with ogrinfo ? I can a difference when 
looking at the geometries.

There's no reason that the .shp would have different sizes. Reprojection only 
affects the value of coordinate values, which in .shp are binary double. So 
whatever its value, a double value uses 8 bytes ;-)
From etourigny.dev at gmail.com  Tue Nov 15 19:29:37 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Nov 17 03:23:47 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <201111160016.49767.even.rouault@mines-paris.org>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
	<201111152336.53092.even.rouault@mines-paris.org>
	<CA+TxYvPLYMVrS018q08c5p4vf=93pFM4uys0RF=E0_ixYAL1+g@mail.gmail.com>
	<201111160016.49767.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvOO3KxVrjnkqHLi6zC+2cnpEOYNOHQEc+KH8nT4yTpWrw@mail.gmail.com>

Even,

Yes you are right! sorry about that.
I removed the .prj file from the and there is a small shift between the results.

It seems that setting source srs is needed when using shapefiles, as
you said.  This should be documented somewhere (probably on the
ogr2ogr page and/or shapefile driver page).

The more I use shapefiles the more I see the limitation in this file
format, and am quite puzzled as to why it is still so widespread...


Any other ideas on how we can fix this?
Here is how I think it could be done:

1- for all EPSG projections, generate its ESRI WKT (and perhaps a few
variations)
2- make a mapping from ESRI WKT (or its hash) to EPSG codes
3- use the hash mapping to find the EPSG code from a given WKT.

Does this make sense?

An obvious hurdle is that WKTs can have small variations.

For example,

EPSG:4618 as output by GDAL:
$ gdalsrsinfo -o wkt_esri EPSG:4618
GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

whereas an example file (brazil.prj) has:
GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Modified",6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

however, GDAL can deal with these variations:
$ gdalsrsinfo -o wkt_esri ESRI::brazil.prj
GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

cheers,
Etienne

On Tue, Nov 15, 2011 at 9:16 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mercredi 16 novembre 2011 00:02:24, Etienne Tourigny a ?crit :
>> Even,
>>
>> I had tried that as I thought it could be the cause, however:
>>
>> I get the same result, although the +towgs84 parameters are set in the
>> source OGRCT.
>>
>> You can see the shapes are identical in size:
>> -rw------- 1 tourigny tourigny 371684 2011-11-15 20:52 LC_CIDADE_32722.shp
>> -rw------- 1 tourigny tourigny 371684 2011-11-15 19:35 LC_CIDADE_sad69.shp
>> -rw------- 1 tourigny tourigny 371684 2011-11-15 19:33 LC_CIDADE.shp
>> -rw------- 1 tourigny tourigny 371684 2011-11-15 20:46
>> LC_CIDADE_wgs84-2.shp
>
> Ah, and you didn't check the result with ogrinfo ? I can a difference when
> looking at the geometries.
>
> There's no reason that the .shp would have different sizes. Reprojection only
> affects the value of coordinate values, which in .shp are binary double. So
> whatever its value, a double value uses 8 bytes ;-)
>
From xenon at alphapixel.com  Tue Nov 15 21:28:15 2011
From: xenon at alphapixel.com (Chris 'Xenon' Hanson)
Date: Thu Nov 17 05:35:55 2011
Subject: [gdal-dev] Windows FWTools GDAL built with GEOS intersection
	support?
Message-ID: <4EC31FBF.6030701@alphapixel.com>


  I'm using the latest FWTools Windows binaries, and I see they include a geos lib file,
which I have linked with.

  Is the gdal library rigged to utilize the included geos so that
OGRGeometry::Intersection() is implemented and functional?

http://www.gdal.org/ogr/classOGRGeometry.html#202ad4c29487ca046c4a2b055042cb6a

-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon@AlphaPixel.com http://www.alphapixel.com/
  Digital Imaging. OpenGL. Scene Graphs. GIS. GPS. Training. Consulting. Contracting.
    "There is no Truth. There is only Perception. To Perceive is to Exist." - Xen
From chaitanya.ch at gmail.com  Tue Nov 15 22:48:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov 17 06:52:56 2011
Subject: [gdal-dev] Windows FWTools GDAL built with GEOS intersection
	support?
In-Reply-To: <4EC31FBF.6030701@alphapixel.com>
References: <4EC31FBF.6030701@alphapixel.com>
Message-ID: <CAMKgpObXPACwmLJuHePK2MCwPPLQ4HF4nseNAL6z822dW1Ap3A@mail.gmail.com>

Chris,

FWTools for Windows had not been maintained for quite a while. But the
Intersection() function should work with the latest. It uses gdal1.5
You should consider using OSGeo4W [1]. It can maintain a broad set of open
source GIS tools, including GEOS, on your Windows machine.

[1]: http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#OSGeo4W

On Wed, Nov 16, 2011 at 7:58 AM, Chris 'Xenon' Hanson
<xenon@alphapixel.com>wrote:

>
>  I'm using the latest FWTools Windows binaries, and I see they include a
> geos lib file,
> which I have linked with.
>
>  Is the gdal library rigged to utilize the included geos so that
> OGRGeometry::Intersection() is implemented and functional?
>
>
> http://www.gdal.org/ogr/classOGRGeometry.html#202ad4c29487ca046c4a2b055042cb6a
>
> --
> Chris 'Xenon' Hanson, omo sanza lettere. Xenon@AlphaPixel.com
> http://www.alphapixel.com/
>  Digital Imaging. OpenGL. Scene Graphs. GIS. GPS. Training. Consulting.
> Contracting.
>    "There is no Truth. There is only Perception. To Perceive is to Exist."
> - Xen
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111116/e7374069/attachment.html
From fredjonze at gmail.com  Tue Nov 15 23:59:28 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 08:08:11 2011
Subject: [gdal-dev] Ogr2ogr
Message-ID: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>

I'm new to OGR and am having difficulty creating a command. I have GDAL v1.8. 

I have x/y points in Montana State Plane NAD 27 central in a SQL 2008 database. I'm trying to use the SQLSpatial driver to grab the x/y from SQL, project the points to either geometry or geography, and direct the output to a SQL spatial database as a new table. Al that I've managed to do so far is copy the table...don't know the syntax to do the initial projection. I have examples to do something like this from original long/lat, but not state plane.

Any help is appreciated.

Thx

Fred
From jrepetto at free.fr  Wed Nov 16 03:31:45 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Nov 17 11:51:28 2011
Subject: [gdal-dev] Windows FWTools GDAL built with GEOS intersection
	support?
In-Reply-To: <CAMKgpObXPACwmLJuHePK2MCwPPLQ4HF4nseNAL6z822dW1Ap3A@mail.gmail.com>
References: <4EC31FBF.6030701@alphapixel.com>
	<CAMKgpObXPACwmLJuHePK2MCwPPLQ4HF4nseNAL6z822dW1Ap3A@mail.gmail.com>
Message-ID: <4EC374F1.3030406@free.fr>

Le 16/11/2011 04:48, Chaitanya kumar CH a ?crit :
> Chris,
>
> FWTools for Windows had not been maintained for quite a while. But the
> Intersection() function should work with the latest. It uses gdal1.5

Hi,

Since FwTools is not maintained, I think the FwTools paragraph on the 
page http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries should be 
removed, or at least put at the bottom of the page. Presently, it is 
misleading.

Regards,
Jean-Claude
From sigfrido at tiscali.it  Wed Nov 16 03:32:12 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu Nov 17 11:59:16 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
Message-ID: <1321432332.2365.12.camel@GOLEM>

Hi Fred,

first of all check if there is an EPSG entry for your coordinate system.
Googlin' "Montana State Plane NAD 27 EPSG" pointed me to the several
pages, among with, for example:

http://www.eye4software.com/resources/stateplane/

which states:

2500 NAD83 / Montana 32100

So the EPSG code you're looking for is seems to be 32100. Assuming you
want to reproject to Lon/Lat WGS84 (EPSG 4326), you need to use the
-s_srs and -t_srs parameters:

ogr2ogr -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL:..." input.csv



Sig


Il giorno mar, 15/11/2011 alle 21.59 -0700, Fred Jones ha scritto:
> I'm new to OGR and am having difficulty creating a command. I have GDAL v1.8. 
> 
> I have x/y points in Montana State Plane NAD 27 central in a SQL 2008 database. I'm trying to use the SQLSpatial driver to grab the x/y from SQL, project the points to either geometry or geography, and direct the output to a SQL spatial database as a new table. Al that I've managed to do so far is copy the table...don't know the syntax to do the initial projection. I have examples to do something like this from original long/lat, but not state plane.
> 
> Any help is appreciated.
> 
> Thx
> 
> Fred_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Wed Nov 16 06:25:32 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 16 06:32:32 2011
Subject: [gdal-dev] Windows FWTools GDAL built with GEOS intersection
	support?
In-Reply-To: <4EC374F1.3030406@free.fr>
References: <4EC31FBF.6030701@alphapixel.com>
	<CAMKgpObXPACwmLJuHePK2MCwPPLQ4HF4nseNAL6z822dW1Ap3A@mail.gmail.com>
	<4EC374F1.3030406@free.fr>
Message-ID: <CABUeae8qnYr-Ud76p81HxJH=M0yPmKEZnX5fO3AZ8w+x22M7qQ@mail.gmail.com>

On 16 November 2011 08:31, Jean-Claude Repetto <jrepetto@free.fr> wrote:
> Le 16/11/2011 04:48, Chaitanya kumar CH a ?crit :
>>
>> Chris,
>>
>> FWTools for Windows had not been maintained for quite a while. But the
>> Intersection() function should work with the latest. It uses gdal1.5
>
> Hi,
>
> Since FwTools is not maintained, I think the FwTools paragraph on the page
> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries should be removed,
> or at least put at the bottom of the page. Presently, it is misleading.

If a reader hangs on reading until the second paragraph, she will know
clearly what is the status of FWTools and what is recommended option:

"The latest FWtools version for Windows, 2.4.7, dates back to a pre-1.6 GDAL
version. In order to benefit from the latest and greatest, you can
refer to the other
binary builds mentionned in the here-after Windows section. "

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From meryemvrl at gmail.com  Wed Nov 16 06:47:00 2011
From: meryemvrl at gmail.com (mrym)
Date: Wed Nov 16 06:55:18 2011
Subject: [gdal-dev] can not debug gdal1.8.1 at visual studio 2008
Message-ID: <1321444020359-7000116.post@n2.nabble.com>

Hi,
i've downloaded gdal1.8.1 and builded it with
nmake /f makefile.vc DEBUG=1
nmake /f makefile.vc install
nmake /f makefile.vc devinstall 

everything was fine till trying to debug gdal functions. i can't debug any
gdal function. i tried lots of thing(in fact everything in google) to fix
it, but it's still same. i see this message at output window "
'C:\Windows\SysWOW64\odbcint.dll', Binary was not built with debug
information. " . i got stuck:( please i need your help.
Thanks..


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/can-not-debug-gdal1-8-1-at-visual-studio-2008-tp7000116p7000116.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From danhomerick at gmail.com  Wed Nov 16 09:46:10 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 16 10:04:16 2011
Subject: [gdal-dev] can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <1321444020359-7000116.post@n2.nabble.com>
References: <1321444020359-7000116.post@n2.nabble.com>
Message-ID: <CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>

The message you're seeing is because Microsoft doesn't include debug
information for their ODBC driver. This should not prevent you from
debugging entirely, it should just mean that you can't step into ODBC
function calls. If you can't debug at all, then the cause is almost
certainly something besides that message.

 - Dan

On Wed, Nov 16, 2011 at 3:47 AM, mrym <meryemvrl@gmail.com> wrote:
> Hi,
> i've downloaded gdal1.8.1 and builded it with
> nmake /f makefile.vc DEBUG=1
> nmake /f makefile.vc install
> nmake /f makefile.vc devinstall
>
> everything was fine till trying to debug gdal functions. i can't debug any
> gdal function. i tried lots of thing(in fact everything in google) to fix
> it, but it's still same. i see this message at output window "
> 'C:\Windows\SysWOW64\odbcint.dll', Binary was not built with debug
> information. " . i got stuck:( please i need your help.
> Thanks..
>
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/can-not-debug-gdal1-8-1-at-visual-studio-2008-tp7000116p7000116.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From danhomerick at gmail.com  Wed Nov 16 10:01:11 2011
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 16 10:20:06 2011
Subject: [gdal-dev] can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
Message-ID: <CAGVu-jHBfGnyGn_k6vBtk=hcAFynOzDwSJgPzw=ODkn20O6f=g@mail.gmail.com>

Sorry, that should really be, "If you can't step into gdal functions
at all, then the cause is something besides that message."

What happens when you try to step into a gdal function?

Are you statically linking (gdal.lib) or dynamically linking
(gdal_i.lib + gdal18.dll)?

If you're using the gdal dll, could you provide the entire output
window contents? I would want to check that gdal isn't also reporting
that the binary was not built with debug information.

One other thing to try is running "nmake /f makefile.vc clean" prior
to the commands you listed. Under some circumstances, I think that
cleaning may be required if going from a non-debug build to a debug
build.

- Dan

On Wed, Nov 16, 2011 at 6:46 AM, Dan Homerick <danhomerick@gmail.com> wrote:
> The message you're seeing is because Microsoft doesn't include debug
> information for their ODBC driver. This should not prevent you from
> debugging entirely, it should just mean that you can't step into ODBC
> function calls. If you can't debug at all, then the cause is almost
> certainly something besides that message.
>
> ?- Dan
>
> On Wed, Nov 16, 2011 at 3:47 AM, mrym <meryemvrl@gmail.com> wrote:
>> Hi,
>> i've downloaded gdal1.8.1 and builded it with
>> nmake /f makefile.vc DEBUG=1
>> nmake /f makefile.vc install
>> nmake /f makefile.vc devinstall
>>
>> everything was fine till trying to debug gdal functions. i can't debug any
>> gdal function. i tried lots of thing(in fact everything in google) to fix
>> it, but it's still same. i see this message at output window "
>> 'C:\Windows\SysWOW64\odbcint.dll', Binary was not built with debug
>> information. " . i got stuck:( please i need your help.
>> Thanks..
>>
>>
>> --
>> View this message in context: http://osgeo-org.1803224.n2.nabble.com/can-not-debug-gdal1-8-1-at-visual-studio-2008-tp7000116p7000116.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From meryemvrl at gmail.com  Wed Nov 16 10:02:31 2011
From: meryemvrl at gmail.com (mrym)
Date: Wed Nov 16 10:21:28 2011
Subject: [gdal-dev] Re: can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
Message-ID: <1321455751839-7000647.post@n2.nabble.com>

Ok. i see this message too "gdal18.dll, Binary was not built with debug
information." i've replaced /MD with /MDd in flags for debug and build gdal
again, but i still cannot debug gdal functions. and i don't know what to
do..:(

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/can-not-debug-gdal1-8-1-at-visual-studio-2008-tp7000116p7000647.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Wed Nov 16 10:14:48 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 16 10:34:21 2011
Subject: [gdal-dev] Re: can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <1321455751839-7000647.post@n2.nabble.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
	<1321455751839-7000647.post@n2.nabble.com>
Message-ID: <CABUeae9_r=PRqLcERdg=P37BZVjteTWoZgKbP=0jyrVtquFs2Q@mail.gmail.com>

On 16 November 2011 15:02, mrym <meryemvrl@gmail.com> wrote:
> Ok. i see this message too "gdal18.dll, Binary was not built with debug
> information." i've replaced /MD with /MDd in flags for debug and build gdal
> again, but i still cannot debug gdal functions.

1) Not build but rebuild GDAL with correct flags

OPTFLAGS=$(OPTFLAGS) /MDd /DDEBUG /D_DEBUG

2) Rebuild your program linking against GDAL
3) Check if you have symbols database generated (gdal18.pdb file size >20-30MB)
4) Check if GDAL links against Debug C/C++ Run-Tim

dumpbin /ALL python32_d.dll | find /i "msvcr"

5) Execute your program under debugger, try to step in GDALAllRegister()
6) Check if you step into your own program at all

> and i don't know what to do..:(

I'd start with writing clear posts, describing in details steps what you do:
IOW, http://catb.org/~esr/faqs/smart-questions.html#beprecise

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mateusz at loskot.net  Wed Nov 16 10:16:14 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 16 10:35:52 2011
Subject: [gdal-dev] Re: can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <CABUeae9_r=PRqLcERdg=P37BZVjteTWoZgKbP=0jyrVtquFs2Q@mail.gmail.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
	<1321455751839-7000647.post@n2.nabble.com>
	<CABUeae9_r=PRqLcERdg=P37BZVjteTWoZgKbP=0jyrVtquFs2Q@mail.gmail.com>
Message-ID: <CABUeae_MAhUiOKu8TWTV_jDdPgs4PyCtcH9crAVPiqfGvcGCoQ@mail.gmail.com>

2011/11/16 Mateusz ?oskot <mateusz@loskot.net>:
> 4) Check if GDAL links against Debug C/C++ Run-Tim
>
> dumpbin /ALL python32_d.dll | find /i "msvcr"

Obviously, I made mistake when copying this from my .bat script.
It should read:

dumpbin /ALL gdal18.dll | find /i "msvcr"

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From ijturton at gmail.com  Wed Nov 16 10:42:16 2011
From: ijturton at gmail.com (Ian Turton)
Date: Wed Nov 16 11:03:22 2011
Subject: [gdal-dev] building and using an OGR plugin
Message-ID: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>

I've been developing an OGR format to read in my employers' file
format. All works fine when I build the new format in directly but it
would probably make sense to provide the code as a plugin rather than
having to build and link our own dll's for the whole library. So I
followed the instructions at
http://trac.osgeo.org/gdal/wiki/BuildingOnWindows#Pluginbuildingexample
(and the fgdb example) and I have a plugin dll that according to
dependency walker seems to refer to all the right things. But when I
run ogrinfo (for example) it doesn't see my format any longer. I've
set GDAL_DRIVER_PATH to point to the folder containing the plugin, is
there some other step I should be looking for?

Thanks in advance

Ian
(Just a lost Java programmer in C-tribe land)

-- 
Ian Turton
From hobu.inc at gmail.com  Wed Nov 16 10:44:58 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 16 11:06:20 2011
Subject: [gdal-dev] building and using an OGR plugin
In-Reply-To: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>
References: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>
Message-ID: <38AE173F-C101-4C63-928F-7C80F82559E2@gmail.com>


On Nov 16, 2011, at 9:42 AM, Ian Turton wrote:

> I've been developing an OGR format to read in my employers' file
> format. All works fine when I build the new format in directly but it
> would probably make sense to provide the code as a plugin rather than
> having to build and link our own dll's for the whole library. So I
> followed the instructions at
> http://trac.osgeo.org/gdal/wiki/BuildingOnWindows#Pluginbuildingexample
> (and the fgdb example) and I have a plugin dll that according to
> dependency walker seems to refer to all the right things. But when I
> run ogrinfo (for example) it doesn't see my format any longer. I've
> set GDAL_DRIVER_PATH to point to the folder containing the plugin, is
> there some other step I should be looking for?

set CPL_DEBUG=on to watch it try to register the drivers. This might provide some insight.

Also, there is OGR_DRIVER_PATH that might need to be set instead (I thought both were tested, but I'd have to look to make sure.)

> 
> (Just a lost Java programmer in C-tribe land)

Welcome to the dark side.
From meryemvrl at gmail.com  Wed Nov 16 10:52:06 2011
From: meryemvrl at gmail.com (mrym)
Date: Wed Nov 16 11:13:43 2011
Subject: [gdal-dev] Re: can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <CABUeae_MAhUiOKu8TWTV_jDdPgs4PyCtcH9crAVPiqfGvcGCoQ@mail.gmail.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
	<1321455751839-7000647.post@n2.nabble.com>
	<CABUeae9_r=PRqLcERdg=P37BZVjteTWoZgKbP=0jyrVtquFs2Q@mail.gmail.com>
	<CABUeae_MAhUiOKu8TWTV_jDdPgs4PyCtcH9crAVPiqfGvcGCoQ@mail.gmail.com>
Message-ID: <1321458726862-7000821.post@n2.nabble.com>

Thanks, i've done all of the things you wrote,but i'm still can't debug..

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/can-not-debug-gdal1-8-1-at-visual-studio-2008-tp7000116p7000821.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ijturton at gmail.com  Wed Nov 16 11:12:44 2011
From: ijturton at gmail.com (Ian Turton)
Date: Wed Nov 16 11:35:32 2011
Subject: [gdal-dev] building and using an OGR plugin
In-Reply-To: <38AE173F-C101-4C63-928F-7C80F82559E2@gmail.com>
References: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>
	<38AE173F-C101-4C63-928F-7C80F82559E2@gmail.com>
Message-ID: <CA+=cGJkjW7BXKg5VLWySVwDE1RA-01f3mdVbTobJeoRJzvGXiw@mail.gmail.com>

On 16 November 2011 15:44, Howard Butler <hobu.inc@gmail.com> wrote:
>
> On Nov 16, 2011, at 9:42 AM, Ian Turton wrote:
>
>> I've been developing an OGR format to read in my employers' file
>> format. All works fine when I build the new format in directly but it
>> would probably make sense to provide the code as a plugin rather than
>> having to build and link our own dll's for the whole library. So I
>> followed the instructions at
>> http://trac.osgeo.org/gdal/wiki/BuildingOnWindows#Pluginbuildingexample
>> (and the fgdb example) and I have a plugin dll that according to
>> dependency walker seems to refer to all the right things. But when I
>> run ogrinfo (for example) it doesn't see my format any longer. I've
>> set GDAL_DRIVER_PATH to point to the folder containing the plugin, is
>> there some other step I should be looking for?
>
> set CPL_DEBUG=on to watch it try to register the drivers. This might provide some insight.
>

I think I must be missing something as setting that (or --debug=on)
seems to make no difference to the output

C:\Users\ian.turton\src-msvc2010\gdal>apps\ogrinfo.exe --debug=on --formats
Supported Formats:
  -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
  -> "UK .NTF" (readonly)
  -> "SDTS" (readonly)
  -> "TIGER" (read/write)
  -> "S57" (read/write)
...

Ian

-- 
Ian Turton
From ijturton at gmail.com  Wed Nov 16 11:59:58 2011
From: ijturton at gmail.com (Ian Turton)
Date: Wed Nov 16 12:25:23 2011
Subject: [gdal-dev] Re: building and using an OGR plugin
In-Reply-To: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>
References: <CA+=cGJnsTh9+F=hJ3HORhixYWRnDdxai6hW-bVOF+HiGCe7pOQ@mail.gmail.com>
Message-ID: <CA+=cGJm+HzHzvdJN_tUXWF9SwprQUubWc0HkBDGb=mNy1HZYqQ@mail.gmail.com>

OK I think I've solved this -

I've managed to find the code that does the search and I need to call
my dll ogr_xxx.dll not gdal_xxx.dll. OGR_DRIVER_PATH and
GDAL_DRIVER_PATH are searched in that order.

Ian
-- 
Ian Turton
From even.rouault at mines-paris.org  Wed Nov 16 13:43:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 16 14:14:31 2011
Subject: [gdal-dev] Windows FWTools GDAL built with GEOS intersection
	support?
In-Reply-To: <CABUeae8qnYr-Ud76p81HxJH=M0yPmKEZnX5fO3AZ8w+x22M7qQ@mail.gmail.com>
References: <4EC31FBF.6030701@alphapixel.com> <4EC374F1.3030406@free.fr>
	<CABUeae8qnYr-Ud76p81HxJH=M0yPmKEZnX5fO3AZ8w+x22M7qQ@mail.gmail.com>
Message-ID: <201111161943.14812.even.rouault@mines-paris.org>

> > Since FwTools is not maintained, I think the FwTools paragraph on the
> > page http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries should be
> > removed, or at least put at the bottom of the page. Presently, it is
> > misleading.
> 
> If a reader hangs on reading until the second paragraph, she will know
> clearly what is the status of FWTools and what is recommended option:
> 
> "The latest FWtools version for Windows, 2.4.7, dates back to a pre-1.6
> GDAL version. In order to benefit from the latest and greatest, you can
> refer to the other
> binary builds mentionned in the here-after Windows section. "

But I know that people only read up to the point where they have a link to a 
downloadable item ;-) I've moved the FWTools section at the bottom of the page

> 
> Best regards,
From even.rouault at mines-paris.org  Wed Nov 16 14:09:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 16 14:41:51 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <CA+TxYvOO3KxVrjnkqHLi6zC+2cnpEOYNOHQEc+KH8nT4yTpWrw@mail.gmail.com>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
	<201111160016.49767.even.rouault@mines-paris.org>
	<CA+TxYvOO3KxVrjnkqHLi6zC+2cnpEOYNOHQEc+KH8nT4yTpWrw@mail.gmail.com>
Message-ID: <201111162009.19669.even.rouault@mines-paris.org>

Etienne,

> 
> It seems that setting source srs is needed when using shapefiles, as
> you said.  This should be documented somewhere (probably on the
> ogr2ogr page and/or shapefile driver page).

Feel free to add a warning. Logically, this should be more in the shapefile 
driver page. But this assumes that people actually read docs, which is dubious 
;-)

> 
> The more I use shapefiles the more I see the limitation in this file
> format, and am quite puzzled as to why it is still so widespread...

Yes shapefiles suffers from a lot of deficiencies (limitations of dbf format, no 
native - documented - spatial indexing, prj files, ...) You might experiment 
with spatialite which is far more capable, but still less widespread.

> 
> Any other ideas on how we can fix this?
> Here is how I think it could be done:
> 
> 1- for all EPSG projections, generate its ESRI WKT (and perhaps a few
> variations)
> 2- make a mapping from ESRI WKT (or its hash) to EPSG codes
> 3- use the hash mapping to find the EPSG code from a given WKT.
> 
> Does this make sense?
> 
> An obvious hurdle is that WKTs can have small variations.
> 
> For example,
> 
> EPSG:4618 as output by GDAL:
> $ gdalsrsinfo -o wkt_esri EPSG:4618
> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",
> 6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
> 
> whereas an example file (brazil.prj) has:
> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Modified",6
> 378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
> 
> however, GDAL can deal with these variations:
> $ gdalsrsinfo -o wkt_esri ESRI::brazil.prj
> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",
> 6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

The conversion between GDAL WKT and ESRI WKT belongs to the field of 
experimental science certainly. There are some known rules, but a lot of 
particular cases, some still remaining to be unearthed. The version of 
ogr_srs_esri.cpp in 1.8-esri branch is far more complicated than the one in 
trunk.

As far as your above algorithm is concerned, I'm wondering how it could work, 
with the variations you gave above. Perhaps a statistical approach with fuzzy 
string matching would give better results than something based on hashing ;-) 
More seriously, I think that a campaign of collecting a lot of .PRJ files 
(ideally coming from ESRI software, and not produced by GDAL) would be needed 
first to see which rules can work in practice.

Another point to keep in mind is that the TOWGS84 parameters proposed by GDAL 
do not always make concensus. The GRASS developers are not particularly happy 
with that : they would prefer that a list of possible transformations would be 
proposed when EPSG lists several of them, instead of just one picked up. See 
http://lists.osgeo.org/pipermail/gdal-dev/2011-September/030280.html

Best regards,

Even
From fredjonze at gmail.com  Wed Nov 16 19:21:42 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Wed Nov 16 20:11:28 2011
Subject: [gdal-dev] Re: OGR2OGR and SQL Spatial
Message-ID: <CAN4UY41=XTaQ5ofT1Z3th2qu2ce_aF8oKFpDm3ygJV89XEj7=A@mail.gmail.com>

Hi Sig,

This is the command I have so far. When I execute it, I just get the help
returned, no error and no table created:

ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
"MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"

What am I doing wrong?

Thx,
- Hide quoted text -

On Wed, Nov 16, 2011 at 1:32 AM, Luca Sigfrido Percich <sigfrido@tiscali.it>
wrote:

Hi Fred,

first of all check if there is an EPSG entry for your coordinate system.
Googlin' "Montana State Plane NAD 27 EPSG" pointed me to the several
pages, among with, for example:

http://www.eye4software.com/resources/stateplane/

which states:

2500 NAD83 / Montana 32100

So the EPSG code you're looking for is seems to be 32100. Assuming you
want to reproject to Lon/Lat WGS84 (EPSG 4326), you need to use the
-s_srs and -t_srs parameters:

ogr2ogr -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL:..." input.csv
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111116/b89a08fe/attachment.html
From mateusz at loskot.net  Wed Nov 16 19:41:46 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 16 20:32:44 2011
Subject: [gdal-dev] Re: can not debug gdal1.8.1 at visual studio 2008
In-Reply-To: <1321458726862-7000821.post@n2.nabble.com>
References: <1321444020359-7000116.post@n2.nabble.com>
	<CAGVu-jFFW_bgYtAddL52q0LQ6_h-1NChO2NJ9xkXBpKg6akSJQ@mail.gmail.com>
	<1321455751839-7000647.post@n2.nabble.com>
	<CABUeae9_r=PRqLcERdg=P37BZVjteTWoZgKbP=0jyrVtquFs2Q@mail.gmail.com>
	<CABUeae_MAhUiOKu8TWTV_jDdPgs4PyCtcH9crAVPiqfGvcGCoQ@mail.gmail.com>
	<1321458726862-7000821.post@n2.nabble.com>
Message-ID: <CABUeae9Vg4=0gbihQU75=JTFB7mzeZLpOB+=b-RDzuLdNZHp2A@mail.gmail.com>

On 16 November 2011 15:52, mrym <meryemvrl@gmail.com> wrote:
> Thanks, i've done all of the things you wrote,but i'm still can't debug..

My palant?r has broken, I can't help.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From eadam at co.lincoln.or.us  Wed Nov 16 19:42:18 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed Nov 16 20:33:18 2011
Subject: [gdal-dev] Re: OGR2OGR and SQL Spatial
In-Reply-To: <CAN4UY41=XTaQ5ofT1Z3th2qu2ce_aF8oKFpDm3ygJV89XEj7=A@mail.gmail.com>
References: <CAN4UY41=XTaQ5ofT1Z3th2qu2ce_aF8oKFpDm3ygJV89XEj7=A@mail.gmail.com>
Message-ID: <CACqBkM8pnNhkSG-0-M3nU1HT=ry2kWeFnoReqzDgXmdStuCDZw@mail.gmail.com>

Fred,

      You may need to use -f with the Code from this page:
http://gdal.org/ogr/ogr_formats.html  (-f MSSQLSpatial)

HTH, Eli

On Wed, Nov 16, 2011 at 4:21 PM, Fred Jones <fredjonze@gmail.com> wrote:
> Hi Sig,
>
> This is the command I have so far. When I execute it, I just get the help
> returned, no error and no table created:
>
> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>
> What am I doing wrong?
>
> Thx,
> - Hide quoted text -
>
> On Wed, Nov 16, 2011 at 1:32 AM, Luca Sigfrido Percich <sigfrido@tiscali.it>
> wrote:
>
> Hi Fred,
>
> first of all check if there is an EPSG entry for your coordinate system.
> Googlin' "Montana State Plane NAD 27 EPSG" pointed me to the several
> pages, among with, for example:
>
> http://www.eye4software.com/resources/stateplane/
>
> which states:
>
> 2500 NAD83 / Montana 32100
>
> So the EPSG code you're looking for is seems to be 32100. Assuming you
> want to reproject to Lon/Lat WGS84 (EPSG 4326), you need to use the
> -s_srs and -t_srs parameters:
>
> ogr2ogr -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL:..." input.csv
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From sigfrido at tiscali.it  Thu Nov 17 03:48:50 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu Nov 17 05:07:56 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
Message-ID: <1321519730.2191.14.camel@GOLEM>

Hi Fred,

Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto: 
> Hi Sig,
>  
> I have a SQL table temp_sublocs_btc with the MT State Plane x and y as
> the first columns in the table. CENSUS_2010 is a sql spatial database.
>  
> This is the command I have so far. When I execute it, I just get the
> help returned, no error:
>  
> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>  
> What am I doing wrong?

Please remember to always post the error messages otherwise we won't be
able to understand. Before the usege text you should see an error
message.

I never worked with ogr and MSSQL, but I guess that the problem is that
you should separate the output format specification (-f "MSSQL")  and
the server connection string.

Try:

ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
"MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"

assuming that tables=temp_sublocs_btc allows you to select the input
layer.

Regarding the creation of point, in PostGIS I would simply insert the X
and Y coords in two float fields of the target table, and issue a 

update CENSUS_2010.temp_sublocs_btc set geom =
ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)

Which means create a point with x, y, set its SRID to state plane, then
transform it into WGS84, then store it in the geom column of your table
(the geometry column of which should have been created in WGS84 SRS).

I don't know the corresponding function in MSSQL for ST_MakePoint etc...
you should refer to the documentation

I never tried this! I don't know if you can do the transformation
directly with the -sql clause of ogr2ogr or with other options, please
try and let us know.

Sig








_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From thomas.hirsch at statkart.no  Thu Nov 17 07:00:04 2011
From: thomas.hirsch at statkart.no (relet)
Date: Thu Nov 17 08:29:21 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1318422893791-6884804.post@n2.nabble.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
Message-ID: <1321531204125-7003850.post@n2.nabble.com>

Update:

The source code to FYBA is available at 
http://bitbucket.org/relet/fyba

Some binaries for FYBA and ogr+sosi are also available in the releases
directory. 
I would still strongly vouch for integrating with ogr, as third applications
like QuantumGIS or mapserver would depend on libraries that include the
driver.

Is anyone interested in helping me with that? 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p7003850.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Nov 17 07:37:18 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 09:08:48 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1321531204125-7003850.post@n2.nabble.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
Message-ID: <1321533438.4ec4fffed60ca@imp.free.fr>

Thomas,

I can see 2 levels of integration :

1) Using FYBA as an external library, and adding the support to link to it in
GDAL makefiles/configure
2) Incorporating FYBA source code directly in GDAL SVN like done for MITAB,
AVCE00, PCIDSK SDK, etc..

Which one are you targetting ?

As I wrote in http://trac.osgeo.org/gdal/ticket/3638#comment:18 , option 2) has
of course a few extra requirements.

Best regards,

Even


> Update:
>
> The source code to FYBA is available at
> http://bitbucket.org/relet/fyba
>
> Some binaries for FYBA and ogr+sosi are also available in the releases
> directory.
> I would still strongly vouch for integrating with ogr, as third applications
> like QuantumGIS or mapserver would depend on libraries that include the
> driver.
>
> Is anyone interested in helping me with that?
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p7003850.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From thomas.hirsch at statkart.no  Thu Nov 17 08:24:01 2011
From: thomas.hirsch at statkart.no (relet)
Date: Thu Nov 17 09:57:47 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1321533438.4ec4fffed60ca@imp.free.fr>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
Message-ID: <1321536241516-7004096.post@n2.nabble.com>

Thank you Even,

I would want to try and go for the second option. 
My motivation is mainly that a majority of users will be using packaged
software like osgeo4w or qgis - if SOSI support is enabled by default, it
would be available in these packages. 
My main question is in how far the included code has to follow RFC 8. It
would be quite a task to make it follow the gdal-Hungarian prefix dialect,
or even to translate variables and method names to plain English.  

You said,

Even Rouault wrote:
> 
> I'm now convinced that including this code in GDAL would require
> discussion and agreement of the PSC. It is obvious that no-one apart you
> or your team would be able to maintain it, so I think that it would
> require you to be a GDAL commiter to do the integration and maintenance
> work. Perhaps in a first step, it could be done in a sandbox.
> 

I think the sandbox is a good approach. I understand the terms of RFC 3 and
RFC 8, but I'm not too familiar with the sum of community guidelines around
gdal. I hope not to remain the only maintainer, but in order to achieve
that, the driver has to become more available and create a user/developer
base. 
(The users exist, but they are currently used to convert SOSI to Shape files
using commercial tools before further processing, losing most of the
metadata that is available in the original format.)

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p7004096.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Nov 17 09:28:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 11:05:31 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1321536241516-7004096.post@n2.nabble.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
Message-ID: <1321540099.4ec51a032079d@imp.free.fr>

Thomas,

> I would want to try and go for the second option.
> My motivation is mainly that a majority of users will be using packaged
> software like osgeo4w or qgis - if SOSI support is enabled by default, it
> would be available in these packages.

Yes that's understandable. That goal could be achieved with option 1) though,
but that would require proper packaging of FYBA as a standalone library. From
what I've seen, its build system is currently a bit simplistic ;-)

> My main question is in how far the included code has to follow RFC 8. It
> would be quite a task to make it follow the gdal-Hungarian prefix dialect,
> or even to translate variables and method names to plain English.

Those requirements apply certainly for the core of GDAL, but they can be relaxed
for drivers. I also don't believe that it would be reasonable to ask for
rewriting all variable names and translating them.

> I think the sandbox is a good approach. I understand the terms of RFC 3 and
> RFC 8, but I'm not too familiar with the sum of community guidelines around
> gdal. I hope not to remain the only maintainer, but in order to achieve
> that, the driver has to become more available and create a user/developer
> base.
> (The users exist, but they are currently used to convert SOSI to Shape files
> using commercial tools before further processing, losing most of the
> metadata that is available in the original format.)

Well, that's the key point. I'm not that worried by integrating the code : it
should not be too hard to integrate it into GDAL build system, if it already
compiles under Linux and Windows.

I think we might be open to host the FYBA code but being not easily maintanable
by most GDAL core developers, we would need to be sure of some commitment of you
or other people to help maintening it in the future, and managing its
synchronisation with the upstream git FYBA code. It's not good to have a huge
code dump without the associated maintenance for it...

Even
From mateusz at loskot.net  Thu Nov 17 10:07:22 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Nov 17 11:46:42 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1321540099.4ec51a032079d@imp.free.fr>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
	<1321540099.4ec51a032079d@imp.free.fr>
Message-ID: <CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>

On 17 November 2011 14:28, Even Rouault <even.rouault@mines-paris.org> wrote:
>> My main question is in how far the included code has to follow RFC 8. It
>> would be quite a task to make it follow the gdal-Hungarian prefix dialect,
>> or even to translate variables and method names to plain English.
>
> Those requirements apply certainly for the core of GDAL, but they can be relaxed
> for drivers. I also don't believe that it would be reasonable to ask for
> rewriting all variable names and translating them.

IMHO, it should be strict and should require English only names in code.
It's important for maintenance in future.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From even.rouault at mines-paris.org  Thu Nov 17 10:32:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 12:13:26 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
	<1321540099.4ec51a032079d@imp.free.fr>
	<CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>
Message-ID: <1321543961.4ec52919f3c71@imp.free.fr>

Selon Mateusz ??oskot <mateusz@loskot.net>:

> On 17 November 2011 14:28, Even Rouault <even.rouault@mines-paris.org> wrote:
> >> My main question is in how far the included code has to follow RFC 8. It
> >> would be quite a task to make it follow the gdal-Hungarian prefix dialect,
> >> or even to translate variables and method names to plain English.
> >
> > Those requirements apply certainly for the core of GDAL, but they can be
> relaxed
> > for drivers. I also don't believe that it would be reasonable to ask for
> > rewriting all variable names and translating them.
>
> IMHO, it should be strict and should require English only names in code.
> It's important for maintenance in future.

I've checked, but current RFC's don't mandate use of English (perhaps they
should be updated), but that would help indeed... That said, maintenance is not
only about which language is used (*), it's also about knowledge of how the code
works and the details of the file format, hence my remark of bringing in people
with the code.

Drivers are a bit of particular case. If at some point they become an
unmanageable pain, we can just disable them without affecting the working of the
rest of the software. However, I'm definitely not for starting on the basis of
only a big code drop without the associated support behind it.

(*) I daily read code with function names, variable names and comments in my
native language, and it doesn't make it intrinsically maintenable !

>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> Member of ACCU, http://accu.org
>


From fredjonze at gmail.com  Thu Nov 17 10:58:49 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 12:40:48 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <1321519730.2191.14.camel@GOLEM>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
Message-ID: <CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>

This is what I have so far. Back to where I started. The table is created
in CENSUS_2010 spatial database, but the ogr_geometry column is null. No
error.

ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
"MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
"SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
The geometry_columns table is:

f_table_catalog f_table_schema f_table_name f_geometry_column
coord_dimension srid geometry_type
CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
4326        GEOMETRY

Fred

On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich
<sigfrido@tiscali.it>wrote:

> Hi Fred,
>
> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
> > Hi Sig,
> >
> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y as
> > the first columns in the table. CENSUS_2010 is a sql spatial database.
> >
> > This is the command I have so far. When I execute it, I just get the
> > help returned, no error:
> >
> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
> >
> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
> >
> > What am I doing wrong?
>
> Please remember to always post the error messages otherwise we won't be
> able to understand. Before the usege text you should see an error
> message.
>
> I never worked with ogr and MSSQL, but I guess that the problem is that
> you should separate the output format specification (-f "MSSQL")  and
> the server connection string.
>
> Try:
>
> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>
> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>
> assuming that tables=temp_sublocs_btc allows you to select the input
> layer.
>
> Regarding the creation of point, in PostGIS I would simply insert the X
> and Y coords in two float fields of the target table, and issue a
>
> update CENSUS_2010.temp_sublocs_btc set geom =
> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>
> Which means create a point with x, y, set its SRID to state plane, then
> transform it into WGS84, then store it in the geom column of your table
> (the geometry column of which should have been created in WGS84 SRS).
>
> I don't know the corresponding function in MSSQL for ST_MakePoint etc...
> you should refer to the documentation
>
> I never tried this! I don't know if you can do the transformation
> directly with the -sql clause of ogr2ogr or with other options, please
> try and let us know.
>
> Sig
>
>
>
>
>
>
>
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/bd094ddc/attachment.html
From chaitanya.ch at gmail.com  Thu Nov 17 11:35:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov 17 13:19:06 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
Message-ID: <CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>

Fred,

Check if your source table is being read correctly.
Use ogrinfo.
ogrinfo -al "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"

OGR doesn't read the MSSQL geometries if the source table doesn't have an
entry in the geometry_columns table. You can bypass this by using the
'Tables' parameter in the connection string[1].

[1]: http://www.gdal.org/ogr/drv_mssqlspatial.html

On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com> wrote:

> This is what I have so far. Back to where I started. The table is created
> in CENSUS_2010 spatial database, but the ogr_geometry column is null. No
> error.
>
> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>  The geometry_columns table is:
>
>
> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
> 4326        GEOMETRY
>
> Fred
>
> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
> sigfrido@tiscali.it> wrote:
>
>> Hi Fred,
>>
>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>> > Hi Sig,
>> >
>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y as
>> > the first columns in the table. CENSUS_2010 is a sql spatial database.
>> >
>> > This is the command I have so far. When I execute it, I just get the
>> > help returned, no error:
>> >
>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>> >
>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>> >
>> > What am I doing wrong?
>>
>> Please remember to always post the error messages otherwise we won't be
>> able to understand. Before the usege text you should see an error
>> message.
>>
>> I never worked with ogr and MSSQL, but I guess that the problem is that
>> you should separate the output format specification (-f "MSSQL")  and
>> the server connection string.
>>
>> Try:
>>
>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>
>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>
>> assuming that tables=temp_sublocs_btc allows you to select the input
>> layer.
>>
>> Regarding the creation of point, in PostGIS I would simply insert the X
>> and Y coords in two float fields of the target table, and issue a
>>
>> update CENSUS_2010.temp_sublocs_btc set geom =
>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>
>> Which means create a point with x, y, set its SRID to state plane, then
>> transform it into WGS84, then store it in the geom column of your table
>> (the geometry column of which should have been created in WGS84 SRS).
>>
>> I don't know the corresponding function in MSSQL for ST_MakePoint etc...
>> you should refer to the documentation
>>
>> I never tried this! I don't know if you can do the transformation
>> directly with the -sql clause of ogr2ogr or with other options, please
>> try and let us know.
>>
>> Sig
>>
>>
>>
>>
>>
>>
>>
>>
>> _____________
>> PRIVACY
>> Le informazioni contenute in questo messaggio sono riservate e
>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>> legislazione europea (Direttiva 2002/58/CE).
>>
>> PRIVACY
>> Le informazioni contenute in questo messaggio sono riservate e
>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>> legislazione europea (Direttiva 2002/58/CE).
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/9e5f373c/attachment.html
From fredjonze at gmail.com  Thu Nov 17 12:34:37 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 14:21:47 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
	<CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
Message-ID: <CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>

Here is ogrinfo returned:
INFO: Open of
`MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes'
      using driver `MSSQLSpatial' successful.

Here is my revised command:
ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
"MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
-sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"

And here are the errors produced:
ERROR 1: Column type float is not supported for geometry column.
ERROR 1: Column type float is not supported for geometry column.

Thx for your help. I've read every article I can google, but just haven't
found the right combination of flags to get this to work.

Fred

On Thu, Nov 17, 2011 at 9:35 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Fred,
>
> Check if your source table is being read correctly.
> Use ogrinfo.
> ogrinfo -al "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"
>
> OGR doesn't read the MSSQL geometries if the source table doesn't have an
> entry in the geometry_columns table. You can bypass this by using the
> 'Tables' parameter in the connection string[1].
>
> [1]: http://www.gdal.org/ogr/drv_mssqlspatial.html
>
>   On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com> wrote:
>
>>   This is what I have so far. Back to where I started. The table is
>> created in CENSUS_2010 spatial database, but the ogr_geometry column is
>> null. No error.
>>
>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>> The geometry_columns table is:
>>
>>
>> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
>> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
>> 4326        GEOMETRY
>>
>> Fred
>>
>> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
>> sigfrido@tiscali.it> wrote:
>>
>>> Hi Fred,
>>>
>>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>>> > Hi Sig,
>>> >
>>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y as
>>> > the first columns in the table. CENSUS_2010 is a sql spatial database.
>>> >
>>> > This is the command I have so far. When I execute it, I just get the
>>> > help returned, no error:
>>> >
>>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>> >
>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>> >
>>> > What am I doing wrong?
>>>
>>> Please remember to always post the error messages otherwise we won't be
>>> able to understand. Before the usege text you should see an error
>>> message.
>>>
>>> I never worked with ogr and MSSQL, but I guess that the problem is that
>>> you should separate the output format specification (-f "MSSQL")  and
>>> the server connection string.
>>>
>>> Try:
>>>
>>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>
>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>
>>> assuming that tables=temp_sublocs_btc allows you to select the input
>>> layer.
>>>
>>> Regarding the creation of point, in PostGIS I would simply insert the X
>>> and Y coords in two float fields of the target table, and issue a
>>>
>>> update CENSUS_2010.temp_sublocs_btc set geom =
>>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>>
>>> Which means create a point with x, y, set its SRID to state plane, then
>>> transform it into WGS84, then store it in the geom column of your table
>>> (the geometry column of which should have been created in WGS84 SRS).
>>>
>>> I don't know the corresponding function in MSSQL for ST_MakePoint etc...
>>> you should refer to the documentation
>>>
>>> I never tried this! I don't know if you can do the transformation
>>> directly with the -sql clause of ogr2ogr or with other options, please
>>> try and let us know.
>>>
>>> Sig
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> _____________
>>> PRIVACY
>>> Le informazioni contenute in questo messaggio sono riservate e
>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>> legislazione europea (Direttiva 2002/58/CE).
>>>
>>> PRIVACY
>>> Le informazioni contenute in questo messaggio sono riservate e
>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>> legislazione europea (Direttiva 2002/58/CE).
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/645fd586/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Nov 17 12:58:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Nov 17 14:46:40 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
	<CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
	<CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>
Message-ID: <CAMKgpOYk2T7Wn2sUX-TBymWa8_z4-jt56kZQb_tUHc6Vs81aSw@mail.gmail.com>

Fred,

Now I see the problem.
Your columns xloc and yloc are not really geometry columns. They are just a
part of the point geometry. We need to make a geometry out of them.

If it was PostGIS, I would have just used the ST_GeomFromText() function to
combine those two columns into a point geometry.

I don't know if such a function exists in MSSQL. So I suggest you convert
the whole database into another format like CSV, tweak it to make
geometries from the points, and finally load it into a new table. The CSV
driver page[1] shows how to convert the x and y values into point
geometries.

First run the following command.
ogr2ogr -f CSV qaBtcSubLocs.csv
"MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
-sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs"

Now create qaBtcSubLocs.vrt as described in the driver page but without the
LayerSRS element.
Finally run the following command.
ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
"MSSQL:server=ELMER;database=
CENSUS_2010;trusted_connection=yes" qaBtcSubLocs.vrt -nln "btcSubLocs"

[1]: http://www.gdal.org/ogr/drv_csv.html

On Thu, Nov 17, 2011 at 11:04 PM, Fred Jones <fredjonze@gmail.com> wrote:

> Here is ogrinfo returned:
> INFO: Open of
> `MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes'
>       using driver `MSSQLSpatial' successful.
>
> Here is my revised command:
> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>
> And here are the errors produced:
> ERROR 1: Column type float is not supported for geometry column.
> ERROR 1: Column type float is not supported for geometry column.
>
> Thx for your help. I've read every article I can google, but just haven't
> found the right combination of flags to get this to work.
>
> Fred
>
> On Thu, Nov 17, 2011 at 9:35 AM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Fred,
>>
>> Check if your source table is being read correctly.
>> Use ogrinfo.
>> ogrinfo -al
>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"
>>
>> OGR doesn't read the MSSQL geometries if the source table doesn't have an
>> entry in the geometry_columns table. You can bypass this by using the
>> 'Tables' parameter in the connection string[1].
>>
>> [1]: http://www.gdal.org/ogr/drv_mssqlspatial.html
>>
>>   On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com>wrote:
>>
>>>   This is what I have so far. Back to where I started. The table is
>>> created in CENSUS_2010 spatial database, but the ogr_geometry column is
>>> null. No error.
>>>
>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>>> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>  The geometry_columns table is:
>>>
>>>
>>> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
>>> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
>>> 4326        GEOMETRY
>>>
>>> Fred
>>>
>>> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
>>> sigfrido@tiscali.it> wrote:
>>>
>>>> Hi Fred,
>>>>
>>>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>>>> > Hi Sig,
>>>> >
>>>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y as
>>>> > the first columns in the table. CENSUS_2010 is a sql spatial database.
>>>> >
>>>> > This is the command I have so far. When I execute it, I just get the
>>>> > help returned, no error:
>>>> >
>>>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>>>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>> >
>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>> >
>>>> > What am I doing wrong?
>>>>
>>>> Please remember to always post the error messages otherwise we won't be
>>>> able to understand. Before the usege text you should see an error
>>>> message.
>>>>
>>>> I never worked with ogr and MSSQL, but I guess that the problem is that
>>>> you should separate the output format specification (-f "MSSQL")  and
>>>> the server connection string.
>>>>
>>>> Try:
>>>>
>>>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>
>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>
>>>> assuming that tables=temp_sublocs_btc allows you to select the input
>>>> layer.
>>>>
>>>> Regarding the creation of point, in PostGIS I would simply insert the X
>>>> and Y coords in two float fields of the target table, and issue a
>>>>
>>>> update CENSUS_2010.temp_sublocs_btc set geom =
>>>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>>>
>>>> Which means create a point with x, y, set its SRID to state plane, then
>>>> transform it into WGS84, then store it in the geom column of your table
>>>> (the geometry column of which should have been created in WGS84 SRS).
>>>>
>>>> I don't know the corresponding function in MSSQL for ST_MakePoint etc...
>>>> you should refer to the documentation
>>>>
>>>> I never tried this! I don't know if you can do the transformation
>>>> directly with the -sql clause of ogr2ogr or with other options, please
>>>> try and let us know.
>>>>
>>>> Sig
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> _____________
>>>> PRIVACY
>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>
>>>> PRIVACY
>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/85dae0ee/attachment.html
From fredjonze at gmail.com  Thu Nov 17 13:33:50 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 15:24:15 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAMKgpOYk2T7Wn2sUX-TBymWa8_z4-jt56kZQb_tUHc6Vs81aSw@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
	<CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
	<CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>
	<CAMKgpOYk2T7Wn2sUX-TBymWa8_z4-jt56kZQb_tUHc6Vs81aSw@mail.gmail.com>
Message-ID: <CAN4UY42f=JMxHQZwnthkzU4uQ1dL8EEp25PTLCeQE8vv3YQDLw@mail.gmail.com>

There is a GEOGRAPHY::STGeomFromText('POINT(x,y)', srid) function in sql
server spatial. However, when I issue the command:

ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
"MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
"SELECT geometry::STGeomFromText('POINT(xloc,yloc)',0) as ogr_geometry,
xloc,yloc, spid  FROM dbo.qaBtcSubLocs" -nln "btcSubLocs"


 I get the error:
ERROR 1: [Microsoft][ODBC SQL Server Driver][SQL Server]A .NET Framework
error occurred during execution of user-defined routine or aggregate
"geometry":
System.FormatException: 24141: A number is expected at position 10 of the
input.
 The input has xloc.
System.FormatException: at
Microsoft.SqlServer.Types.OpenGisWktReader.RecognizeDouble()
   at Microsoft.SqlServer.Types.OpenGisWktReader.ParsePointText(Boolean
parseParentheses)
   at Microsoft.SqlServer.Types.OpenGisWktReader.ParseTaggedText(OpenGisType

I'd like to keep this as a single command becuase this will be issued on a
server and I don't have local access to write files out under the sql agent
perms (long story about IT security restrictions).

Any ideas?

Fred

On Thu, Nov 17, 2011 at 10:58 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Fred,
>
> Now I see the problem.
> Your columns xloc and yloc are not really geometry columns. They are just
> a part of the point geometry. We need to make a geometry out of them.
>
> If it was PostGIS, I would have just used the ST_GeomFromText() function
> to combine those two columns into a point geometry.
>
> I don't know if such a function exists in MSSQL. So I suggest you convert
> the whole database into another format like CSV, tweak it to make
> geometries from the points, and finally load it into a new table. The CSV
> driver page[1] shows how to convert the x and y values into point
> geometries.
>
> First run the following command.
> ogr2ogr -f CSV qaBtcSubLocs.csv
> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs"
>
> Now create qaBtcSubLocs.vrt as described in the driver page but without
> the LayerSRS element.
> Finally run the following command.
>
> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
> "MSSQL:server=ELMER;database=
> CENSUS_2010;trusted_connection=yes" qaBtcSubLocs.vrt -nln "btcSubLocs"
>
> [1]: http://www.gdal.org/ogr/drv_csv.html
>
>
> On Thu, Nov 17, 2011 at 11:04 PM, Fred Jones <fredjonze@gmail.com> wrote:
>
>> Here is ogrinfo returned:
>> INFO: Open of
>> `MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes'
>>       using driver `MSSQLSpatial' successful.
>>
>> Here is my revised command:
>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
>> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>
>> And here are the errors produced:
>> ERROR 1: Column type float is not supported for geometry column.
>> ERROR 1: Column type float is not supported for geometry column.
>>
>> Thx for your help. I've read every article I can google, but just haven't
>> found the right combination of flags to get this to work.
>>
>> Fred
>>
>> On Thu, Nov 17, 2011 at 9:35 AM, Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> wrote:
>>
>>> Fred,
>>>
>>> Check if your source table is being read correctly.
>>> Use ogrinfo.
>>> ogrinfo -al
>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"
>>>
>>> OGR doesn't read the MSSQL geometries if the source table doesn't have
>>> an entry in the geometry_columns table. You can bypass this by using the
>>> 'Tables' parameter in the connection string[1].
>>>
>>> [1]: http://www.gdal.org/ogr/drv_mssqlspatial.html
>>>
>>>   On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com>wrote:
>>>
>>>>   This is what I have so far. Back to where I started. The table is
>>>> created in CENSUS_2010 spatial database, but the ogr_geometry column is
>>>> null. No error.
>>>>
>>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>>> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>>>> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>> The geometry_columns table is:
>>>>
>>>>
>>>> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
>>>> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
>>>> 4326        GEOMETRY
>>>>
>>>> Fred
>>>>
>>>> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
>>>> sigfrido@tiscali.it> wrote:
>>>>
>>>>> Hi Fred,
>>>>>
>>>>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>>>>> > Hi Sig,
>>>>> >
>>>>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y
>>>>> as
>>>>> > the first columns in the table. CENSUS_2010 is a sql spatial
>>>>> database.
>>>>> >
>>>>> > This is the command I have so far. When I execute it, I just get the
>>>>> > help returned, no error:
>>>>> >
>>>>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>>>>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>> >
>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>> >
>>>>> > What am I doing wrong?
>>>>>
>>>>> Please remember to always post the error messages otherwise we won't be
>>>>> able to understand. Before the usege text you should see an error
>>>>> message.
>>>>>
>>>>> I never worked with ogr and MSSQL, but I guess that the problem is that
>>>>> you should separate the output format specification (-f "MSSQL")  and
>>>>> the server connection string.
>>>>>
>>>>> Try:
>>>>>
>>>>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>>>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>>
>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>>
>>>>> assuming that tables=temp_sublocs_btc allows you to select the input
>>>>> layer.
>>>>>
>>>>> Regarding the creation of point, in PostGIS I would simply insert the X
>>>>> and Y coords in two float fields of the target table, and issue a
>>>>>
>>>>> update CENSUS_2010.temp_sublocs_btc set geom =
>>>>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>>>>
>>>>> Which means create a point with x, y, set its SRID to state plane, then
>>>>> transform it into WGS84, then store it in the geom column of your table
>>>>> (the geometry column of which should have been created in WGS84 SRS).
>>>>>
>>>>> I don't know the corresponding function in MSSQL for ST_MakePoint
>>>>> etc...
>>>>> you should refer to the documentation
>>>>>
>>>>> I never tried this! I don't know if you can do the transformation
>>>>> directly with the -sql clause of ogr2ogr or with other options, please
>>>>> try and let us know.
>>>>>
>>>>> Sig
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> _____________
>>>>> PRIVACY
>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>
>>>>> PRIVACY
>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/feb3560b/attachment-0001.html
From fredjonze at gmail.com  Thu Nov 17 13:49:45 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 15:40:58 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAN4UY42f=JMxHQZwnthkzU4uQ1dL8EEp25PTLCeQE8vv3YQDLw@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
	<CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
	<CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>
	<CAMKgpOYk2T7Wn2sUX-TBymWa8_z4-jt56kZQb_tUHc6Vs81aSw@mail.gmail.com>
	<CAN4UY42f=JMxHQZwnthkzU4uQ1dL8EEp25PTLCeQE8vv3YQDLw@mail.gmail.com>
Message-ID: <CAN4UY40gJtvt-yibP09WSuDiMygJOzOSrHcPSdUpDutuj9Ls+Q@mail.gmail.com>

I think I was using the wrong spatial function. There is a STPointFromText
function. However, when I try the following from SQL test (without OGR and
using plug values for Montana State Plane NAD 27, and no SRID since I
understand it should be zero) :


select geography::STPointFromText('POINT(' + CAST(1020517.37616684 AS
VARCHAR(20)) + ' ' +

CAST(512438.56956808 AS VARCHAR(20)) + ')', 0)
I get an error:


A .NET Framework error occurred during execution of user-defined routine or
aggregate "geography":

System.FormatException: 24204: The spatial reference identifier (SRID) is
not valid. The specified SRID must match one of the supported SRIDs
displayed in the sys.spatial_reference_systems catalog view.

System.FormatException:


On Thu, Nov 17, 2011 at 11:33 AM, Fred Jones <fredjonze@gmail.com> wrote:

> There is a GEOGRAPHY::STGeomFromText('POINT(x,y)', srid) function in sql
> server spatial. However, when I issue the command:
>
> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
> "SELECT geometry::STGeomFromText('POINT(xloc,yloc)',0) as ogr_geometry,
> xloc,yloc, spid  FROM dbo.qaBtcSubLocs" -nln "btcSubLocs"
>
>
>  I get the error:
> ERROR 1: [Microsoft][ODBC SQL Server Driver][SQL Server]A .NET Framework
> error occurred during execution of user-defined routine or aggregate
> "geometry":
> System.FormatException: 24141: A number is expected at position 10 of the
> input.
>  The input has xloc.
> System.FormatException: at
> Microsoft.SqlServer.Types.OpenGisWktReader.RecognizeDouble()
>    at Microsoft.SqlServer.Types.OpenGisWktReader.ParsePointText(Boolean
> parseParentheses)
>    at
> Microsoft.SqlServer.Types.OpenGisWktReader.ParseTaggedText(OpenGisType
>
> I'd like to keep this as a single command becuase this will be issued on a
> server and I don't have local access to write files out under the sql agent
> perms (long story about IT security restrictions).
>
> Any ideas?
>
> Fred
>
> On Thu, Nov 17, 2011 at 10:58 AM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Fred,
>>
>> Now I see the problem.
>> Your columns xloc and yloc are not really geometry columns. They are just
>> a part of the point geometry. We need to make a geometry out of them.
>>
>> If it was PostGIS, I would have just used the ST_GeomFromText() function
>> to combine those two columns into a point geometry.
>>
>> I don't know if such a function exists in MSSQL. So I suggest you convert
>> the whole database into another format like CSV, tweak it to make
>> geometries from the points, and finally load it into a new table. The CSV
>> driver page[1] shows how to convert the x and y values into point
>> geometries.
>>
>> First run the following command.
>> ogr2ogr -f CSV qaBtcSubLocs.csv
>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
>> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs"
>>
>> Now create qaBtcSubLocs.vrt as described in the driver page but without
>> the LayerSRS element.
>> Finally run the following command.
>>
>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>> "MSSQL:server=ELMER;database=
>> CENSUS_2010;trusted_connection=yes" qaBtcSubLocs.vrt -nln "btcSubLocs"
>>
>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>
>>
>> On Thu, Nov 17, 2011 at 11:04 PM, Fred Jones <fredjonze@gmail.com> wrote:
>>
>>> Here is ogrinfo returned:
>>> INFO: Open of
>>> `MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes'
>>>       using driver `MSSQLSpatial' successful.
>>>
>>> Here is my revised command:
>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
>>> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>
>>> And here are the errors produced:
>>> ERROR 1: Column type float is not supported for geometry column.
>>> ERROR 1: Column type float is not supported for geometry column.
>>>
>>> Thx for your help. I've read every article I can google, but just
>>> haven't found the right combination of flags to get this to work.
>>>
>>> Fred
>>>
>>> On Thu, Nov 17, 2011 at 9:35 AM, Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> wrote:
>>>
>>>> Fred,
>>>>
>>>> Check if your source table is being read correctly.
>>>> Use ogrinfo.
>>>> ogrinfo -al
>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"
>>>>
>>>> OGR doesn't read the MSSQL geometries if the source table doesn't have
>>>> an entry in the geometry_columns table. You can bypass this by using the
>>>> 'Tables' parameter in the connection string[1].
>>>>
>>>> [1]: http://www.gdal.org/ogr/drv_mssqlspatial.html
>>>>
>>>>   On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com>wrote:
>>>>
>>>>>   This is what I have so far. Back to where I started. The table is
>>>>> created in CENSUS_2010 spatial database, but the ogr_geometry column is
>>>>> null. No error.
>>>>>
>>>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>>>> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
>>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>>>>> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>>> The geometry_columns table is:
>>>>>
>>>>>
>>>>> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
>>>>> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
>>>>> 4326        GEOMETRY
>>>>>
>>>>> Fred
>>>>>
>>>>> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
>>>>> sigfrido@tiscali.it> wrote:
>>>>>
>>>>>> Hi Fred,
>>>>>>
>>>>>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>>>>>> > Hi Sig,
>>>>>> >
>>>>>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and y
>>>>>> as
>>>>>> > the first columns in the table. CENSUS_2010 is a sql spatial
>>>>>> database.
>>>>>> >
>>>>>> > This is the command I have so far. When I execute it, I just get the
>>>>>> > help returned, no error:
>>>>>> >
>>>>>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>>>>>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>>> >
>>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>>> >
>>>>>> > What am I doing wrong?
>>>>>>
>>>>>> Please remember to always post the error messages otherwise we won't
>>>>>> be
>>>>>> able to understand. Before the usege text you should see an error
>>>>>> message.
>>>>>>
>>>>>> I never worked with ogr and MSSQL, but I guess that the problem is
>>>>>> that
>>>>>> you should separate the output format specification (-f "MSSQL")  and
>>>>>> the server connection string.
>>>>>>
>>>>>> Try:
>>>>>>
>>>>>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>>>>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>>>
>>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>>>
>>>>>> assuming that tables=temp_sublocs_btc allows you to select the input
>>>>>> layer.
>>>>>>
>>>>>> Regarding the creation of point, in PostGIS I would simply insert the
>>>>>> X
>>>>>> and Y coords in two float fields of the target table, and issue a
>>>>>>
>>>>>> update CENSUS_2010.temp_sublocs_btc set geom =
>>>>>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>>>>>
>>>>>> Which means create a point with x, y, set its SRID to state plane,
>>>>>> then
>>>>>> transform it into WGS84, then store it in the geom column of your
>>>>>> table
>>>>>> (the geometry column of which should have been created in WGS84 SRS).
>>>>>>
>>>>>> I don't know the corresponding function in MSSQL for ST_MakePoint
>>>>>> etc...
>>>>>> you should refer to the documentation
>>>>>>
>>>>>> I never tried this! I don't know if you can do the transformation
>>>>>> directly with the -sql clause of ogr2ogr or with other options, please
>>>>>> try and let us know.
>>>>>>
>>>>>> Sig
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> _____________
>>>>>> PRIVACY
>>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>>
>>>>>> PRIVACY
>>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/e00fa828/attachment.html
From haileyeckstrand at gmail.com  Thu Nov 17 15:48:52 2011
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Thu Nov 17 17:46:29 2011
Subject: [gdal-dev] gdaldem color-relief geotiff alpha band nv value not
	working
Message-ID: <CABCgRVG3LCR2Mkof_-aX-zVRd=g4WLjUbbZ3TrAQ9Y1P7fjnyQ@mail.gmail.com>

Hi All,

I am trying to create an RGBA geotiff using gdaldem color-relief. When I
load the output geotiff into QGIS, all the NoData values appear black, so I
loaded the geotiff into R (using rgdal) and all the values in the the alpha
band are 255, none are 0.
What am I doing wrong? Thanks in advance,
Hailey

Here are my steps:

$ gdaldem color-relief test.tif colors.txt test2.tif -alpha -co ALPHA=YES

where colors.txt:

6010    255     255     255     255
2700    247     229     200     255
2200    224     192     164     255
2000    150     101     48      255
1800    168     134     64      255
1600    204     170     102     255
1400    219     198     129     255
1200    206     206     126     255
1000    168     186     114     255
750     130     157     85      255
500     105     134     79      255
300     82      120     71      255
0       82      120     71      255
nv      0       0       0       0


$ gdalinfo test.tif
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 8545, 6741
Coordinate System is:
PROJCS["NAD_1983_CSRS_BC_Environment_Albers",
    GEOGCS["GCS_North_American_1983_CSRS",
        DATUM["North_American_1983_CSRS",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",50],
    PARAMETER["standard_parallel_2",58.5],
    PARAMETER["latitude_of_center",45],
    PARAMETER["longitude_of_center",-126],
    PARAMETER["false_easting",1000000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-3267710.539297561161220,4568786.377016356214881)
Pixel Size = (758.984955600446028,-758.984955600446028)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-3267710.539, 4568786.377) (140d 2'31.59"E, 56d 4'47.55"N)
Lower Left  (-3267710.539, -547531.209) (168d48' 5.40"W, 27d27'32.14"N)
Upper Right ( 3217815.906, 4568786.377) ( 46d22'30.99"W, 74d 3'20.87"N)
Lower Right ( 3217815.906, -547531.209) (101d35'47.90"W, 36d25'26.60"N)
Center      (  -24947.316, 2010627.584) (145d32'21.90"W, 61d48' 4.50"N)
Band 1 Block=8545x1 Type=Int32, ColorInterp=Gray
  Min=1.000 Max=6009.000
  Minimum=1.000, Maximum=6009.000, Mean=757.173, StdDev=613.626
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=6009
    STATISTICS_MEAN=757.17319855878
    STATISTICS_MINIMUM=1
    STATISTICS_STDDEV=613.62557570411



$ gdalinfo test2.tif
Driver: GTiff/GeoTIFF
Files: test2.tif
Size is 8545, 6741
Coordinate System is:
PROJCS["NAD_1983_CSRS_BC_Environment_Albers",
    GEOGCS["GCS_North_American_1983_CSRS",
        DATUM["North_American_1983_CSRS",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",50],
    PARAMETER["standard_parallel_2",58.5],
    PARAMETER["latitude_of_center",45],
    PARAMETER["longitude_of_center",-126],
    PARAMETER["false_easting",1000000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-3267710.539297561161220,4568786.377016356214881)
Pixel Size = (758.984955600446028,-758.984955600446028)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-3267710.539, 4568786.377) (140d 2'31.59"E, 56d 4'47.55"N)
Lower Left  (-3267710.539, -547531.209) (168d48' 5.40"W, 27d27'32.14"N)
Upper Right ( 3217815.906, 4568786.377) ( 46d22'30.99"W, 74d 3'20.87"N)
Lower Right ( 3217815.906, -547531.209) (101d35'47.90"W, 36d25'26.60"N)
Center      (  -24947.316, 2010627.584) (145d32'21.90"W, 61d48' 4.50"N)
Band 1 Block=8545x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=8545x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=8545x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=8545x1 Type=Byte, ColorInterp=Alpha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/87df45e1/attachment-0001.html
From fredjonze at gmail.com  Thu Nov 17 15:53:39 2011
From: fredjonze at gmail.com (Fred Jones)
Date: Thu Nov 17 17:51:30 2011
Subject: [gdal-dev] Ogr2ogr
In-Reply-To: <CAN4UY40gJtvt-yibP09WSuDiMygJOzOSrHcPSdUpDutuj9Ls+Q@mail.gmail.com>
References: <1780307D-654A-48A1-8482-B2A41F361F30@gmail.com>
	<1321432332.2365.12.camel@GOLEM>
	<CAN4UY42xO+6ji6Y4QiZbPg6KTsKvHWou8CYsRnZdAz5XWc63KA@mail.gmail.com>
	<1321519730.2191.14.camel@GOLEM>
	<CAN4UY42Jw6e0vyNnb4300GXr0ev6gU3BTMBCYHCu-fcS7WwxPA@mail.gmail.com>
	<CAMKgpOYu8OcsHoo-pphDBjhvarvWGgX-DAP8xq5kipH9_icwmQ@mail.gmail.com>
	<CAN4UY43DaC+FjuYwSN7bWPeu4mV1RVeB-hKDKSf=gTgJJkP-bw@mail.gmail.com>
	<CAMKgpOYk2T7Wn2sUX-TBymWa8_z4-jt56kZQb_tUHc6Vs81aSw@mail.gmail.com>
	<CAN4UY42f=JMxHQZwnthkzU4uQ1dL8EEp25PTLCeQE8vv3YQDLw@mail.gmail.com>
	<CAN4UY40gJtvt-yibP09WSuDiMygJOzOSrHcPSdUpDutuj9Ls+Q@mail.gmail.com>
Message-ID: <CAN4UY41tn6xF4WgRca5=Mi435MELmwgqa=haVA4bC7Bv80pu4w@mail.gmail.com>

Whew...finally got it to work. Had to really unbend my mind to think
through all of the great advice you folks have given me. Here's the OGR
command that creates the point projection in mssql spatial:

ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
"MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
"MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
"SELECT geometry::STGeomFromText('POINT ('+str(xloc,20,20) + ' ' +
str(yloc,20,20) + ')',0) as ogr_geometry, xloc,yloc, spid  FROM
dbo.qaBtcSubLocs" -nln "btcSubLocs" -nlt POINT

It may still need some tweaking. I haven't layered it on other maps to see
if the points are in the proper locations. However, I think I'm a lot
closer.

Thanks to everyone who helped me!

I may have more questions. ;-)

Fred




On Thu, Nov 17, 2011 at 11:49 AM, Fred Jones <fredjonze@gmail.com> wrote:

> I think I was using the wrong spatial function. There is a STPointFromText
> function. However, when I try the following from SQL test (without OGR and
> using plug values for Montana State Plane NAD 27, and no SRID since I
> understand it should be zero) :
>
>
> select
> geography::STPointFromText('POINT(' + CAST(1020517.37616684 AS VARCHAR(20
> )) + ' ' +
>
> CAST(512438.56956808 AS VARCHAR(20)) + ')', 0)
> I get an error:
>
>
> A .NET Framework error occurred during execution of user-defined routine
> or aggregate "geography":
>
> System.FormatException: 24204: The spatial reference identifier (SRID) is
> not valid. The specified SRID must match one of the supported SRIDs
> displayed in the sys.spatial_reference_systems catalog view.
>
> System.FormatException:
>
>
>   On Thu, Nov 17, 2011 at 11:33 AM, Fred Jones <fredjonze@gmail.com>wrote:
>
>> There is a GEOGRAPHY::STGeomFromText('POINT(x,y)', srid) function in sql
>> server spatial. However, when I issue the command:
>>
>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>> "SELECT geometry::STGeomFromText('POINT(xloc,yloc)',0) as ogr_geometry,
>> xloc,yloc, spid  FROM dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>
>>
>>  I get the error:
>> ERROR 1: [Microsoft][ODBC SQL Server Driver][SQL Server]A .NET Framework
>> error occurred during execution of user-defined routine or aggregate
>> "geometry":
>> System.FormatException: 24141: A number is expected at position 10 of the
>> input.
>>  The input has xloc.
>> System.FormatException: at
>> Microsoft.SqlServer.Types.OpenGisWktReader.RecognizeDouble()
>>    at Microsoft.SqlServer.Types.OpenGisWktReader.ParsePointText(Boolean
>> parseParentheses)
>>    at
>> Microsoft.SqlServer.Types.OpenGisWktReader.ParseTaggedText(OpenGisType
>>
>> I'd like to keep this as a single command becuase this will be issued on
>> a server and I don't have local access to write files out under the sql
>> agent perms (long story about IT security restrictions).
>>
>> Any ideas?
>>
>> Fred
>>
>> On Thu, Nov 17, 2011 at 10:58 AM, Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> wrote:
>>
>>> Fred,
>>>
>>> Now I see the problem.
>>> Your columns xloc and yloc are not really geometry columns. They are
>>> just a part of the point geometry. We need to make a geometry out of them.
>>>
>>> If it was PostGIS, I would have just used the ST_GeomFromText() function
>>> to combine those two columns into a point geometry.
>>>
>>> I don't know if such a function exists in MSSQL. So I suggest you
>>> convert the whole database into another format like CSV, tweak it to make
>>> geometries from the points, and finally load it into a new table. The CSV
>>> driver page[1] shows how to convert the x and y values into point
>>> geometries.
>>>
>>> First run the following command.
>>> ogr2ogr -f CSV qaBtcSubLocs.csv
>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
>>> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs"
>>>
>>> Now create qaBtcSubLocs.vrt as described in the driver page but without
>>> the LayerSRS element.
>>> Finally run the following command.
>>>
>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>> "MSSQL:server=ELMER;database=
>>> CENSUS_2010;trusted_connection=yes" qaBtcSubLocs.vrt -nln "btcSubLocs"
>>>
>>> [1]: http://www.gdal.org/ogr/drv_csv.html
>>>
>>>
>>> On Thu, Nov 17, 2011 at 11:04 PM, Fred Jones <fredjonze@gmail.com>wrote:
>>>
>>>> Here is ogrinfo returned:
>>>> INFO: Open of
>>>> `MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes'
>>>>       using driver `MSSQLSpatial' successful.
>>>>
>>>> Here is my revised command:
>>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes;tables=dbo.qaBtcSubLocs(xloc),dbo.qaBtcSubLocs(yloc)"
>>>> -sql "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>>
>>>> And here are the errors produced:
>>>> ERROR 1: Column type float is not supported for geometry column.
>>>> ERROR 1: Column type float is not supported for geometry column.
>>>>
>>>> Thx for your help. I've read every article I can google, but just
>>>> haven't found the right combination of flags to get this to work.
>>>>
>>>> Fred
>>>>
>>>> On Thu, Nov 17, 2011 at 9:35 AM, Chaitanya kumar CH <
>>>> chaitanya.ch@gmail.com> wrote:
>>>>
>>>>> Fred,
>>>>>
>>>>> Check if your source table is being read correctly.
>>>>> Use ogrinfo.
>>>>> ogrinfo -al
>>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes"
>>>>>
>>>>> OGR doesn't read the MSSQL geometries if the source table doesn't have
>>>>> an entry in the geometry_columns table. You can bypass this by using the
>>>>> 'Tables' parameter in the connection string[1].
>>>>>
>>>>> [1]: http://www.gdal.org/ogr/drv_mssqlspatial.html
>>>>>
>>>>>   On Thu, Nov 17, 2011 at 9:28 PM, Fred Jones <fredjonze@gmail.com>wrote:
>>>>>
>>>>>>   This is what I have so far. Back to where I started. The table is
>>>>>> created in CENSUS_2010 spatial database, but the ogr_geometry column is
>>>>>> null. No error.
>>>>>>
>>>>>> ogr2ogr -overwrite -s_srs EPSG:32002 -t_srs EPSG:4326 -f MSSQLSpatial
>>>>>> "MSSQL:server=ELMER;database=CENSUS_2010;;trusted_connection=yes"
>>>>>> "MSSQL:server=ELMER;database=HT_2011_10;trusted_connection=yes" -sql
>>>>>> "SELECT xloc,yloc, spid FROM  dbo.qaBtcSubLocs" -nln "btcSubLocs"
>>>>>> The geometry_columns table is:
>>>>>>
>>>>>>
>>>>>> f_table_catalog f_table_schema f_table_name f_geometry_column coord_dimension srid geometry_type
>>>>>> CENSUS_2010     dbo      btcsublocs      ogr_geometry      2
>>>>>> 4326        GEOMETRY
>>>>>>
>>>>>> Fred
>>>>>>
>>>>>> On Thu, Nov 17, 2011 at 1:48 AM, Luca Sigfrido Percich <
>>>>>> sigfrido@tiscali.it> wrote:
>>>>>>
>>>>>>> Hi Fred,
>>>>>>>
>>>>>>> Il giorno mer, 16/11/2011 alle 10.11 -0700, Fred Jones ha scritto:
>>>>>>> > Hi Sig,
>>>>>>> >
>>>>>>> > I have a SQL table temp_sublocs_btc with the MT State Plane x and
>>>>>>> y as
>>>>>>> > the first columns in the table. CENSUS_2010 is a sql spatial
>>>>>>> database.
>>>>>>> >
>>>>>>> > This is the command I have so far. When I execute it, I just get
>>>>>>> the
>>>>>>> > help returned, no error:
>>>>>>> >
>>>>>>> > ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f
>>>>>>> > "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>>>> >
>>>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>>>> >
>>>>>>> > What am I doing wrong?
>>>>>>>
>>>>>>> Please remember to always post the error messages otherwise we won't
>>>>>>> be
>>>>>>> able to understand. Before the usege text you should see an error
>>>>>>> message.
>>>>>>>
>>>>>>> I never worked with ogr and MSSQL, but I guess that the problem is
>>>>>>> that
>>>>>>> you should separate the output format specification (-f "MSSQL")  and
>>>>>>> the server connection string.
>>>>>>>
>>>>>>> Try:
>>>>>>>
>>>>>>> ogr2ogr -overwrite -s_srs EPSG:32100 -t_srs EPSG:4326 -f "MSSQL"
>>>>>>> "MSSQL:server=ELMER;database=CENSUS_2010;trusted_connection=yes"
>>>>>>>
>>>>>>> "MSSQL:server=ELMER;database=HT_2010_10;tables=temp_sublocs_btc;trusted_connection=yes"
>>>>>>>
>>>>>>> assuming that tables=temp_sublocs_btc allows you to select the input
>>>>>>> layer.
>>>>>>>
>>>>>>> Regarding the creation of point, in PostGIS I would simply insert
>>>>>>> the X
>>>>>>> and Y coords in two float fields of the target table, and issue a
>>>>>>>
>>>>>>> update CENSUS_2010.temp_sublocs_btc set geom =
>>>>>>> ST_Transform(ST_SetSRID(ST_MakePoint(x, y), 32100), 4326)
>>>>>>>
>>>>>>> Which means create a point with x, y, set its SRID to state plane,
>>>>>>> then
>>>>>>> transform it into WGS84, then store it in the geom column of your
>>>>>>> table
>>>>>>> (the geometry column of which should have been created in WGS84 SRS).
>>>>>>>
>>>>>>> I don't know the corresponding function in MSSQL for ST_MakePoint
>>>>>>> etc...
>>>>>>> you should refer to the documentation
>>>>>>>
>>>>>>> I never tried this! I don't know if you can do the transformation
>>>>>>> directly with the -sql clause of ogr2ogr or with other options,
>>>>>>> please
>>>>>>> try and let us know.
>>>>>>>
>>>>>>> Sig
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> _____________
>>>>>>> PRIVACY
>>>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>>>
>>>>>>> PRIVACY
>>>>>>> Le informazioni contenute in questo messaggio sono riservate e
>>>>>>> confidenziali. Il loro utilizzo e' consentito esclusivamente al
>>>>>>> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
>>>>>>> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
>>>>>>> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
>>>>>>> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
>>>>>>> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
>>>>>>> legislazione europea (Direttiva 2002/58/CE).
>>>>>>>
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/b0f5b8d5/attachment-0001.html
From even.rouault at mines-paris.org  Thu Nov 17 15:56:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov 17 17:54:57 2011
Subject: [gdal-dev] gdaldem color-relief geotiff alpha band nv value not
	working
In-Reply-To: <CABCgRVG3LCR2Mkof_-aX-zVRd=g4WLjUbbZ3TrAQ9Y1P7fjnyQ@mail.gmail.com>
References: <CABCgRVG3LCR2Mkof_-aX-zVRd=g4WLjUbbZ3TrAQ9Y1P7fjnyQ@mail.gmail.com>
Message-ID: <201111172156.49506.even.rouault@mines-paris.org>

Le jeudi 17 novembre 2011 21:48:52, Hailey Eckstrand a ?crit :
> Hi All,
> 
> I am trying to create an RGBA geotiff using gdaldem color-relief. When I
> load the output geotiff into QGIS, all the NoData values appear black, so I
> loaded the geotiff into R (using rgdal) and all the values in the the alpha
> band are 255, none are 0.
> What am I doing wrong? Thanks in advance,
> Hailey
> 

I don't see anything that would be obviously wrong. Sorry for the question, 
but are you sure that your input dataset has indeed pixels at the nodata value 
? Otherwise could you share your input dataset or a link to it ?
From warmerdam at pobox.com  Thu Nov 17 16:31:05 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 17 18:30:59 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <1321543961.4ec52919f3c71@imp.free.fr>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
	<1321540099.4ec51a032079d@imp.free.fr>
	<CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>
	<1321543961.4ec52919f3c71@imp.free.fr>
Message-ID: <CA+YzLBffO0VTr4Rg8Q2mEAZ8M7_LWPuZrR=Pd3bC-tthMLqXYA@mail.gmail.com>

Folks,

Even asked me to speak up if I had any thoughts on the issues
raised in this thread.  I had not been following it closely.  I will
note that:

 o RFC 8 on coding guidelines and such is *not* adopted and
    in any event it would be advisory and I would not try to apply
    it to essentially external code.

 o Code with names and comments in Norwegian, or any
    non-English language is going to be harder to support.  If
    it just works this might not matter, and if there is a developer
    who does understand it who is willing to support it that is great.
    I would not be inclined to exclude code just because the
    comments and variables are in a different language  -
    particularly in a driver where expectations are often more relaxed
    than in the core.

 o I was unable to determine very quickly how large the FYBA
   code is.  Pulling sublibraries directly into GDAL have upsides
   and downsides, but I'm less inclined to do so for a relatively
   niche format or if the amount of code being pulled in is large,
   or if some apps are likely to also link to external versions.
   Assuming the FYBA code is modest is size I'd be ok with
   pulling it into the GDAL code base.

>From my perspective, I'm inclined to take a fairly relaxed
view of code standards and other requirements on driver
code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From roland.duhaime at gmail.com  Thu Nov 17 16:36:27 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Thu Nov 17 18:42:32 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
Message-ID: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>

Has anyone else experienced the latest version of Google Earth (6.1.0.5001)
or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs created using
gdal_translate?  The same KMZ files worked in the past.

Thanks,
Roland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/ea424073/attachment.html
From randre at gmail.com  Thu Nov 17 17:21:34 2011
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Nov 17 19:24:06 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
Message-ID: <CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>

What is the output of gdalinfo on one of the PNG's in the superoverlay?



On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com>wrote:

>
> Has anyone else experienced the latest version of Google Earth
> (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs
> created using gdal_translate?  The same KMZ files worked in the past.
>
> Thanks,
> Roland
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/3be7a4a5/attachment.html
From scott at agi.com  Thu Nov 17 17:47:12 2011
From: scott at agi.com (Reynolds, Scott)
Date: Thu Nov 17 19:52:17 2011
Subject: [gdal-dev] GMLJP2 question
Message-ID: <29474044C503AA40A6D6403925FB04EB0AE48E2A@mail02.stk.com>

Hi,

 

I have a JP2 image whose extent is supposed to be from (0E deg , 0N deg)
to (10E deg, 10N deg) but gdalinfo (from FWTools 2.4.7) is reporting
extents that are off by 0.5 pixel north and west.  The GML identifies
the origin of the image as (0E deg, 10N deg).  My understanding is that
GDAL automatically adjusts to account for pixel center vs. pixel corner
format differences and always reports pixel corners.  What I'm not sure
of is whether GML thinks the origin is centered on the top left pixel or
at the top left corner of the top left pixel.

 

Can someone tell me whether I need to submit a bug against:

 

1)      GDAL

2)      JP2 writer

3)      Me

 

Thanks,

Scott

 

Driver: JP2ECW/ERMapper JPEG2000

Files: e:\TestData\junk.jp2

Size is 256, 256

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.257223563,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0,

        AUTHORITY["EPSG","8901"]],

    UNIT["degree",0.01745329251994328,

        AUTHORITY["EPSG","9122"]],

    AUTHORITY["EPSG","4326"],

    AXIS["Latitude",NORTH],

    AXIS["Longitude",EAST]]

GeoTransform =

  10.01953125, 0, -0.0390625

  -0.01953125, 0.0390625, 0

Corner Coordinates:

Upper Left  (  10.0195313,  -0.0195313) ( 10d 1'10.31"E,  0d 1'10.31"S)

Lower Left  (   0.0195313,  -0.0195313) (  0d 1'10.31"E,  0d 1'10.31"S)

Upper Right (  10.0195313,   9.9804688) ( 10d 1'10.31"E,  9d58'49.69"N)

Lower Right (   0.0195313,   9.9804688) (  0d 1'10.31"E,  9d58'49.69"N)

Center      (   5.0195313,   4.9804688) (  5d 1'10.31"E,  4d58'49.69"N)

Band 1 Block=256x1 Type=Byte, ColorInterp=Red

  Overviews: arbitrary

Band 2 Block=256x1 Type=Byte, ColorInterp=Green

  Overviews: arbitrary

Band 3 Block=256x1 Type=Byte, ColorInterp=Blue

  Overviews: arbitrary

Band 4 Block=256x1 Type=Byte, ColorInterp=Undefined

  Overviews: arbitrary

 

The GML embedded in the file is

 

<gml:FeatureCollection

xmlns:gml="http://www.opengis.net/gml"

xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

xsi:schemaLocation="http://www.opengis.net/gml
http://www.math.ubc.ca/~burggraf/gml/gml4jp2.xsd">

<gml:boundedBy>

  <gml:Null>withheld</gml:Null>

</gml:boundedBy>

<gml:featureMember>

  <gml:RectifiedGridCoverage dimension="2" gml:id="RGC0001">

   <gml:rectifiedGridDomain>

    <gml:RectifiedGrid dimension="2">

     <gml:limits>

     <gml:GridEnvelope>

       <gml:low>0 0</gml:low>

       <gml:high>255 255</gml:high>

      </gml:GridEnvelope>

     </gml:limits>

     <gml:axisName>x</gml:axisName>

     <gml:axisName>y</gml:axisName>

     <gml:origin>

      <gml:Point gml:id="P0001" srsName="urn:ogc:def:crs:EPSG::4326">

       <gml:pos>0.0000000000000 10.0000000000000</gml:pos>

      </gml:Point>

     </gml:origin>

     <gml:offsetVector
srsName="urn:ogc:def:crs:EPSG::4326">0.0390625000000
-0.0000000000000</gml:offsetVector>

     <gml:offsetVector
srsName="urn:ogc:def:crs:EPSG::4326">-0.0000000000000
-0.0390625000000</gml:offsetVector>

    </gml:RectifiedGrid>

   </gml:rectifiedGridDomain>

  </gml:RectifiedGridCoverage>

</gml:featureMember>

</gml:FeatureCollection>

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111117/de27551c/attachment-0001.html
From warmerdam at pobox.com  Thu Nov 17 18:03:15 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 17 20:08:02 2011
Subject: [gdal-dev] GMLJP2 question
In-Reply-To: <29474044C503AA40A6D6403925FB04EB0AE48E2A@mail02.stk.com>
References: <29474044C503AA40A6D6403925FB04EB0AE48E2A@mail02.stk.com>
Message-ID: <CA+YzLBcmO0jkFOSS63ngPfUtDdZ0U7466wCFYHGV9jq4nc4iMg@mail.gmail.com>

Scott,

Examining gdal/gcore/gdaljp2metadata.cpp it is clear the code
believe that the GML rectified grid origin is the center of the top
left pixel and adjusts accordingly.  This is something we worked on
pretty carefully during the GMLJP2 interoperability experiment with
OGC a few years ago so I find it hard to believe that GDAL is
wrote relative to what I and Lizardtech understood the specifiction
to be at the time.

I would suggest you ask the producer to justify their approach.

Best regards,

On Thu, Nov 17, 2011 at 2:47 PM, Reynolds, Scott <scott@agi.com> wrote:
> Hi,
>
>
>
> I have a JP2 image whose extent is supposed to be from (0E deg , 0N deg) to
> (10E deg, 10N deg) but gdalinfo (from FWTools 2.4.7) is reporting extents
> that are off by 0.5 pixel north and west.? The GML identifies the origin of
> the image as (0E deg, 10N deg).? My understanding is that GDAL automatically
> adjusts to account for pixel center vs. pixel corner format differences and
> always reports pixel corners.? What I?m not sure of is whether GML thinks
> the origin is centered on the top left pixel or at the top left corner of
> the top left pixel.
>
>
>
> Can someone tell me whether I need to submit a bug against:
>
>
>
> 1)????? GDAL
>
> 2)????? JP2 writer
>
> 3)????? Me
>
>
>
> Thanks,
>
> Scott
>
>
>
> Driver: JP2ECW/ERMapper JPEG2000
>
> Files: e:\TestData\junk.jp2
>
> Size is 256, 256
>
> Coordinate System is:
>
> GEOGCS["WGS 84",
>
> ??? DATUM["WGS_1984",
>
> ??????? SPHEROID["WGS 84",6378137,298.257223563,
>
> ??????????? AUTHORITY["EPSG","7030"]],
>
> ??????? AUTHORITY["EPSG","6326"]],
>
> ??? PRIMEM["Greenwich",0,
>
> ??????? AUTHORITY["EPSG","8901"]],
>
> ??? UNIT["degree",0.01745329251994328,
>
> ??????? AUTHORITY["EPSG","9122"]],
>
> ??? AUTHORITY["EPSG","4326"],
>
> ??? AXIS["Latitude",NORTH],
>
> ??? AXIS["Longitude",EAST]]
>
> GeoTransform =
>
> ? 10.01953125, 0, -0.0390625
>
> ? -0.01953125, 0.0390625, 0
>
> Corner Coordinates:
>
> Upper Left? (? 10.0195313,? -0.0195313) ( 10d 1'10.31"E,? 0d 1'10.31"S)
>
> Lower Left? (?? 0.0195313,? -0.0195313) (? 0d 1'10.31"E,? 0d 1'10.31"S)
>
> Upper Right (? 10.0195313,?? 9.9804688) ( 10d 1'10.31"E,? 9d58'49.69"N)
>
> Lower Right (?? 0.0195313,?? 9.9804688) (? 0d 1'10.31"E,? 9d58'49.69"N)
>
> Center????? (?? 5.0195313,?? 4.9804688) (? 5d 1'10.31"E,? 4d58'49.69"N)
>
> Band 1 Block=256x1 Type=Byte, ColorInterp=Red
>
> ? Overviews: arbitrary
>
> Band 2 Block=256x1 Type=Byte, ColorInterp=Green
>
> ? Overviews: arbitrary
>
> Band 3 Block=256x1 Type=Byte, ColorInterp=Blue
>
> ? Overviews: arbitrary
>
> Band 4 Block=256x1 Type=Byte, ColorInterp=Undefined
>
> ? Overviews: arbitrary
>
>
>
> The GML embedded in the file is
>
>
>
> <gml:FeatureCollection
>
> xmlns:gml="http://www.opengis.net/gml"
>
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>
> xsi:schemaLocation="http://www.opengis.net/gml
> http://www.math.ubc.ca/~burggraf/gml/gml4jp2.xsd">
>
> <gml:boundedBy>
>
> ? <gml:Null>withheld</gml:Null>
>
> </gml:boundedBy>
>
> <gml:featureMember>
>
> ? <gml:RectifiedGridCoverage dimension="2" gml:id="RGC0001">
>
> ?? <gml:rectifiedGridDomain>
>
> ??? <gml:RectifiedGrid dimension="2">
>
> ???? <gml:limits>
>
> ?????<gml:GridEnvelope>
>
> ?????? <gml:low>0 0</gml:low>
>
> ?????? <gml:high>255 255</gml:high>
>
> ????? </gml:GridEnvelope>
>
> ???? </gml:limits>
>
> ???? <gml:axisName>x</gml:axisName>
>
> ???? <gml:axisName>y</gml:axisName>
>
> ???? <gml:origin>
>
> ????? <gml:Point gml:id="P0001" srsName="urn:ogc:def:crs:EPSG::4326">
>
> ?????? <gml:pos>0.0000000000000 10.0000000000000</gml:pos>
>
> ????? </gml:Point>
>
> ???? </gml:origin>
>
> ???? <gml:offsetVector srsName="urn:ogc:def:crs:EPSG::4326">0.0390625000000
> -0.0000000000000</gml:offsetVector>
>
> ???? <gml:offsetVector srsName="urn:ogc:def:crs:EPSG::4326">-0.0000000000000
> -0.0390625000000</gml:offsetVector>
>
> ??? </gml:RectifiedGrid>
>
> ?? </gml:rectifiedGridDomain>
>
> ? </gml:RectifiedGridCoverage>
>
> </gml:featureMember>
>
> </gml:FeatureCollection>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Thu Nov 17 18:09:39 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Nov 17 20:14:53 2011
Subject: [gdal-dev] ogr2ogr reprojection, features are not transformed
In-Reply-To: <201111162009.19669.even.rouault@mines-paris.org>
References: <CA+TxYvO+uZ-2fVSY0FnvBMR=ob+BvwxY_BxagxE+2arS37+Wkw@mail.gmail.com>
	<201111160016.49767.even.rouault@mines-paris.org>
	<CA+TxYvOO3KxVrjnkqHLi6zC+2cnpEOYNOHQEc+KH8nT4yTpWrw@mail.gmail.com>
	<201111162009.19669.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPJYZmVP5zonCAQY4RKi+u9_w897tMso4uX_Kp9bUGA8w@mail.gmail.com>

Hello

On Wed, Nov 16, 2011 at 5:09 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Etienne,
>
>>
>> It seems that setting source srs is needed when using shapefiles, as
>> you said. ?This should be documented somewhere (probably on the
>> ogr2ogr page and/or shapefile driver page).
>
> Feel free to add a warning. Logically, this should be more in the shapefile
> driver page. But this assumes that people actually read docs, which is dubious
> ;-)

It would be nice to put it in the ogr2ogr page too, but I understand
you wouldn't want to put format-specific stuff in there.
I'll update the shapefile driver docs.

>
>>
>> The more I use shapefiles the more I see the limitation in this file
>> format, and am quite puzzled as to why it is still so widespread...
>
> Yes shapefiles suffers from a lot of deficiencies (limitations of dbf format, no
> native - documented - spatial indexing, prj files, ...) You might experiment
> with spatialite which is far more capable, but still less widespread.
>
>>
>> Any other ideas on how we can fix this?
>> Here is how I think it could be done:
>>
>> 1- for all EPSG projections, generate its ESRI WKT (and perhaps a few
>> variations)
>> 2- make a mapping from ESRI WKT (or its hash) to EPSG codes
>> 3- use the hash mapping to find the EPSG code from a given WKT.
>>
>> Does this make sense?
>>
>> An obvious hurdle is that WKTs can have small variations.
>>
>> For example,
>>
>> EPSG:4618 as output by GDAL:
>> $ gdalsrsinfo -o wkt_esri EPSG:4618
>> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",
>> 6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
>>
>> whereas an example file (brazil.prj) has:
>> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Modified",6
>> 378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
>>
>> however, GDAL can deal with these variations:
>> $ gdalsrsinfo -o wkt_esri ESRI::brazil.prj
>> GEOGCS["SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",
>> 6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]
>
> The conversion between GDAL WKT and ESRI WKT belongs to the field of
> experimental science certainly. There are some known rules, but a lot of
> particular cases, some still remaining to be unearthed. The version of
> ogr_srs_esri.cpp in 1.8-esri branch is far more complicated than the one in
> trunk.

Is this going to be merged into trunk eventually?

>
> As far as your above algorithm is concerned, I'm wondering how it could work,
> with the variations you gave above. Perhaps a statistical approach with fuzzy
> string matching would give better results than something based on hashing ;-)
> More seriously, I think that a campaign of collecting a lot of .PRJ files
> (ideally coming from ESRI software, and not produced by GDAL) would be needed
> first to see which rules can work in practice.

I have been playing around a bit and here is what I did that works (first try):

- take a given CRS definition (from say EPSG or .prj file) and find
it's ESRI WKT or "simple" WKT.
- for all the EPSG codes in pcs.csv and gcs.csv, get it's ESRI (or
simple WKT), and compare that to the target WKT
- if you've a matching WKT, then get the full WKT corresponding to the
EPSG code that matches.

The problem is that it's pretty inefficient as you can imagine, taking
a few seconds to find one single target.

A second iteration:

- generate full WKT, ESRI WKT and "simple" (StripCT) WKT for all EPSG
codes in pcs.csv and gcs.csv
- save these to a flat (gzipped) file in csv form
- use these tables to find the EPSG code that matches a given WKT (in
whatever WKT flavor you need)

This is rather efficient in terms of processing time.

I thought that a hashing method could decrease the time to find a
matching string, but probably not because you have to load
the entire dataset anyway, and it doesn't make sense when you are scanning once.

This works for all EPSG codes I tried (think of it as a reverse EPSG
lookup), and also a few .prj files.
A problem I encountered was the differences in significant digits in
the ESRI-WKT and OGC-WKT, so for now it works best if warping to ESRI
WKT.

I will file a bug about this, concerning the shapefile driver, and
also incorporate this into the gdalsrsinfo utility (with a new "EPSG"
output).
Should I create a sandbox for an experimental gdalsrsinfo util
implementing this idea?

I found a few "fuzzy string" algorithms floating around, the idea is
not bad but could be expensive computationally.  It could serve as a
backup if direct string matching fails.

>
> Another point to keep in mind is that the TOWGS84 parameters proposed by GDAL
> do not always make concensus. The GRASS developers are not particularly happy
> with that : they would prefer that a list of possible transformations would be
> proposed when EPSG lists several of them, instead of just one picked up. See
> http://lists.osgeo.org/pipermail/gdal-dev/2011-September/030280.html

That's interesting also.  So what is best, using the TOWS84 params
that GDAL chooses, or using none at all (as happens in this case)?

merci,
Etienne
>
> Best regards,
>
> Even
>
From thomas.hirsch at statkart.no  Fri Nov 18 03:34:31 2011
From: thomas.hirsch at statkart.no (relet)
Date: Fri Nov 18 06:10:53 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <CA+YzLBffO0VTr4Rg8Q2mEAZ8M7_LWPuZrR=Pd3bC-tthMLqXYA@mail.gmail.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
	<1321540099.4ec51a032079d@imp.free.fr>
	<CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>
	<1321543961.4ec52919f3c71@imp.free.fr>
	<CA+YzLBffO0VTr4Rg8Q2mEAZ8M7_LWPuZrR=Pd3bC-tthMLqXYA@mail.gmail.com>
Message-ID: <1321605271313-7007514.post@n2.nabble.com>

Thank you all for your comments --

Even:
* I think the build system is easy to do. The library does not have any
significant external dependencies so wrapping it into a circle of auto* was
not my top priority.
* I would of course be available to maintain the synchronization. If the
library/driver would be co-hosted with gdal, I would not use the bitbucket
as ticket system. In that case, sync will happen between the ogr/public
version as public code (portability, interfacing, bug fixes) and internal
development (updates wrt newer versions of the SOSI standard). It remains to
see which side is "upstream".  

Mateusz: 
* I understand your concern. I'm not a native speaker of Norwegian myself.
Translation however would break the sync, even if I had the resources to do
it. 
* I am also a bit worried about the public version of the driver being
neglected in a few years if it does not manage to create an user base to
create pressure on the authorities who should be publishing it. ;)

Frank:
* Fyba is a 500KB standalone binary from a gcc build, or roughly 30K lines
including extensive comment blocks on every method. Sorting out the most
common commenter ids gets me to 15K lines.
* Depending on your perspective, SOSI may be a niche format, but it is also
a national standard used by most geospatial actors of an European country on
a daily basis. They just haven't got to see it integrated in their open
source utilities.

So much for my arguments. ;) I'll leave the decision to you.
I'll be happy to provide the support I can provide to either a standalone or
an integrated library. 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p7007514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From schut at sarvision.nl  Fri Nov 18 04:57:57 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Nov 18 07:38:41 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
Message-ID: <4EC62C25.9070404@sarvision.nl>

On 11/17/2011 10:36 PM, Roland Duhaime wrote:
>
> Has anyone else experienced the latest version of Google Earth 
> (6.1.0.5001) or the G.E. API not loading PNG formatted 
> KMLSUPEROVERLAYs created using gdal_translate?  The same KMZ files 
> worked in the past.
Yes, I can confirm this.

Vincent.
>
> Thanks,
> Roland
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/395f855d/attachment.html
From ari.jolma at gmail.com  Fri Nov 18 09:04:55 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Nov 18 11:59:11 2011
Subject: [gdal-dev] VSI issue
Message-ID: <4EC66607.3070802@gmail.com>

Hi,

A few days ago on this list I mentioned that the following works using a 
recent version from trunk (and Perl bindings):

use Geo::GDAL;
$datasource = Geo::OGR::Open('/home/ajolma/data/parks.shp');
Geo::OGR::Driver('GML')->Copy($datasource, '/dev/stdout');

I'm testing a simple WFS written in Perl and basically the above is the 
contents of the GetFeature subroutine (the datasource name comes of 
course from a configuration file). However, using this in a Perl CGI 
program leads to "RuntimeError Failed to create GML file /dev/stdout." - 
it seems like the VSI does not work when the Perl program is run as a 
CGI program. I may investigate the issue more but maybe somebody has an 
answer right away. - I can forward the output to a file and then send 
the file but it would be nice to feed it directly to the client.

Regards,

Ari

From roland.duhaime at gmail.com  Fri Nov 18 09:13:48 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Fri Nov 18 12:08:28 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
Message-ID: <CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>

Roger,

The PNG gdalinfo details are:

Driver: PNG/Portable Network Graphics
Files: 7.png
Size is 218, 218
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  218.0)
Upper Right (  218.0,    0.0)
Lower Right (  218.0,  218.0)
Center      (  109.0,  109.0)
Band 1 Block=218x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=218x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=218x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=218x1 Type=Byte, ColorInterp=Alpha

Thanks,
Roland


On Thu, Nov 17, 2011 at 5:21 PM, Roger Andr? <randre@gmail.com> wrote:

> What is the output of gdalinfo on one of the PNG's in the superoverlay?
>
>
>
> On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com>wrote:
>
>>
>> Has anyone else experienced the latest version of Google Earth
>> (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs
>> created using gdal_translate?  The same KMZ files worked in the past.
>>
>> Thanks,
>> Roland
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/37cf58fa/attachment.html
From KShannon at gcs-research.com  Fri Nov 18 11:14:25 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov 18 14:16:30 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
	<CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>

Possible issue with output (from http://earth.google.com/support/bin/answer.py?answer=40901):

To conform more closely with the OGC KML 2.2 standard, we've made the parsing of the <coordinates> tag more strict in version 6.1. Spaces must only be used to separate the (longitude,latitude,altitude) triplets which specify the coordinates of a single point. It is invalid to add spaces between individual coordinates. We understand that previous versions of the client were more lenient, so if your KML files contain spaces beween coordinates in coordinate triplets, an easy workaround is to remove all whitespace located immediately before or after commas inside a <coordinates> tag.

I checked one file, and there were spaces after the commas:

<kml xmlns="http://earth.google.com/kml/2.1" xmlns:gx="http://www.google.com/kml/ext/2.2">
     <Document>
           <name>1/1/1.kml</name>
           <Style>
                <ListStyle id="hideChildren">
                     <listItemType>checkHideChildren</listItemType>
                </ListStyle>
           </Style>
           <Region>
                <Lod>
                     <minLodPixels>128</minLodPixels>
                     <maxLodPixels>2048</maxLodPixels>
                </Lod>
                <LatLonAltBox>
                     <north>41.900791</north>
                     <south>41.890160</south>
                     <east>12.505676</east>
                     <west>12.492253</west>
                </LatLonAltBox>
           </Region>
           <GroundOverlay>
                <drawOrder>1</drawOrder>
                <Icon>
                     <href>1.jpg</href>
                </Icon>
                <gx:LatLonQuad>
                     <coordinates>
                           12.492253, 41.890160, 0
                           12.506078, 41.890461, 0
                           12.505676, 41.900791, 0
                           12.491848, 41.900490, 0
                     </coordinates>
                </gx:LatLonQuad>
           </GroundOverlay>
...

Seems like a quick fix.  Someone should probably file a ticket for documentation, I can do that if need be.

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roland Duhaime
Sent: Friday, November 18, 2011 7:14 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Roger,

The PNG gdalinfo details are:

Driver: PNG/Portable Network Graphics
Files: 7.png
Size is 218, 218
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  218.0)
Upper Right (  218.0,    0.0)
Lower Right (  218.0,  218.0)
Center      (  109.0,  109.0)
Band 1 Block=218x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=218x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=218x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=218x1 Type=Byte, ColorInterp=Alpha

Thanks,
Roland


On Thu, Nov 17, 2011 at 5:21 PM, Roger Andr? <randre@gmail.com<mailto:randre@gmail.com>> wrote:
What is the output of gdalinfo on one of the PNG's in the superoverlay?


On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com<mailto:roland.duhaime@gmail.com>> wrote:

Has anyone else experienced the latest version of Google Earth (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs created using gdal_translate?  The same KMZ files worked in the past.

Thanks,
Roland


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/753a39c3/attachment-0001.html
From KShannon at gcs-research.com  Fri Nov 18 11:37:04 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov 18 14:40:19 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
	<CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA6342@MAIL.gcs-research.net>

Strange that turning on "Tools->Options->General->KML Error Handling->Show prompts for all errors" doesn't report anything.

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Kyle Shannon
Sent: Friday, November 18, 2011 9:14 AM
To: Roland Duhaime; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Possible issue with output (from http://earth.google.com/support/bin/answer.py?answer=40901):

To conform more closely with the OGC KML 2.2 standard, we've made the parsing of the <coordinates> tag more strict in version 6.1. Spaces must only be used to separate the (longitude,latitude,altitude) triplets which specify the coordinates of a single point. It is invalid to add spaces between individual coordinates. We understand that previous versions of the client were more lenient, so if your KML files contain spaces beween coordinates in coordinate triplets, an easy workaround is to remove all whitespace located immediately before or after commas inside a <coordinates> tag.

I checked one file, and there were spaces after the commas:

<kml xmlns="http://earth.google.com/kml/2.1" xmlns:gx="http://www.google.com/kml/ext/2.2">
     <Document>
           <name>1/1/1.kml</name>
           <Style>
                <ListStyle id="hideChildren">
                     <listItemType>checkHideChildren</listItemType>
                </ListStyle>
           </Style>
           <Region>
                <Lod>
                     <minLodPixels>128</minLodPixels>
                     <maxLodPixels>2048</maxLodPixels>
                </Lod>
                <LatLonAltBox>
                     <north>41.900791</north>
                     <south>41.890160</south>
                     <east>12.505676</east>
                     <west>12.492253</west>
                </LatLonAltBox>
           </Region>
           <GroundOverlay>
                <drawOrder>1</drawOrder>
                <Icon>
                     <href>1.jpg</href>
                </Icon>
                <gx:LatLonQuad>
                     <coordinates>
                           12.492253, 41.890160, 0
                           12.506078, 41.890461, 0
                           12.505676, 41.900791, 0
                           12.491848, 41.900490, 0
                     </coordinates>
                </gx:LatLonQuad>
           </GroundOverlay>
...

Seems like a quick fix.  Someone should probably file a ticket for documentation, I can do that if need be.

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roland Duhaime
Sent: Friday, November 18, 2011 7:14 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Roger,

The PNG gdalinfo details are:

Driver: PNG/Portable Network Graphics
Files: 7.png
Size is 218, 218
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  218.0)
Upper Right (  218.0,    0.0)
Lower Right (  218.0,  218.0)
Center      (  109.0,  109.0)
Band 1 Block=218x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=218x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=218x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=218x1 Type=Byte, ColorInterp=Alpha

Thanks,
Roland


On Thu, Nov 17, 2011 at 5:21 PM, Roger Andr? <randre@gmail.com<mailto:randre@gmail.com>> wrote:
What is the output of gdalinfo on one of the PNG's in the superoverlay?


On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com<mailto:roland.duhaime@gmail.com>> wrote:

Has anyone else experienced the latest version of Google Earth (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs created using gdal_translate?  The same KMZ files worked in the past.

Thanks,
Roland


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   ??
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/dd393eaf/attachment.html
From roland.duhaime at gmail.com  Fri Nov 18 11:59:08 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Fri Nov 18 15:02:56 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
	<CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>
Message-ID: <CAKr0gVRogxTR7jCW7epdZ6kApEQo_3AADzDL83mDkFtyovBqfA@mail.gmail.com>

Kyle,

Yes, I just removed the spaces after the commas in the <coordinates> tag
and was then able to open one of the kml files in G.E.  I suspect that
there are m(b)illions? of kmz files in cyberspace that won't meet the 2.2
standard because of this.  I am not sure of the most effective solution.
 In addition to documentation, perhaps we need a conversion tool for legacy
2.1 kml superoverlays.  Perhaps getting the 2.2 KML standard to lighten-up
a tad would be complicated.

Thanks Again,
Roland


On Fri, Nov 18, 2011 at 11:14 AM, Kyle Shannon <KShannon@gcs-research.com>wrote:

>  Possible issue with output (from
> http://earth.google.com/support/bin/answer.py?answer=40901):****
>
> ** **
>
> *To conform more closely with the OGC KML 2.2 standard, we've made the
> parsing of the <coordinates> tag more strict in version 6.1. Spaces must
> only be used to separate the (longitude,latitude,altitude) triplets which
> specify the coordinates of a single point. It is invalid to add spaces
> between individual coordinates. We understand that previous versions of the
> client were more lenient, so if your KML files contain spaces beween
> coordinates in coordinate triplets, an easy workaround is to remove all
> whitespace located immediately before or after commas inside a
> <coordinates> tag.*
>
> * *
>
> I checked one file, and there were spaces after the commas:****
>
> ** **
>
> <kml xmlns="http://earth.google.com/kml/2.1" xmlns:gx="
> http://www.google.com/kml/ext/2.2">****
>
>      <Document>****
>
>            <name>1/1/1.kml</name>****
>
>            <Style>****
>
>                 <ListStyle id="hideChildren">****
>
>                      <listItemType>checkHideChildren</listItemType>****
>
>                 </ListStyle>****
>
>            </Style>****
>
>            <Region>****
>
>                 <Lod>****
>
>                      <minLodPixels>128</minLodPixels>****
>
>                      <maxLodPixels>2048</maxLodPixels>****
>
>                 </Lod>****
>
>                 <LatLonAltBox>****
>
>                      <north>41.900791</north>****
>
>                      <south>41.890160</south>****
>
>                      <east>12.505676</east>****
>
>                      <west>12.492253</west>****
>
>                 </LatLonAltBox>****
>
>            </Region>****
>
>            <GroundOverlay>****
>
>                 <drawOrder>1</drawOrder>****
>
>                 <Icon>****
>
>                      <href>1.jpg</href>****
>
>                 </Icon>****
>
>                 <gx:LatLonQuad>****
>
>                      <coordinates>****
>
>                            12.492253, 41.890160, 0****
>
>                            12.506078, 41.890461, 0****
>
>                            12.505676, 41.900791, 0****
>
>                            12.491848, 41.900490, 0****
>
>                      </coordinates>****
>
>                 </gx:LatLonQuad>****
>
>            </GroundOverlay>****
>
> ...****
>
> ** **
>
> Seems like a quick fix.  Someone should probably file a ticket for
> documentation, I can do that if need be.****
>
> ** **
>
> kss****
>
> ** **
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Roland Duhaime
> *Sent:* Friday, November 18, 2011 7:14 AM
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001****
>
> ** **
>
> Roger,****
>
> ** **
>
> The PNG gdalinfo details are:****
>
> ** **
>
> Driver: PNG/Portable Network Graphics****
>
> Files: 7.png****
>
> Size is 218, 218****
>
> Coordinate System is `'****
>
> Image Structure Metadata:****
>
>   INTERLEAVE=PIXEL****
>
> Corner Coordinates:****
>
> Upper Left  (    0.0,    0.0)****
>
> Lower Left  (    0.0,  218.0)****
>
> Upper Right (  218.0,    0.0)****
>
> Lower Right (  218.0,  218.0)****
>
> Center      (  109.0,  109.0)****
>
> Band 1 Block=218x1 Type=Byte, ColorInterp=Red****
>
>   Mask Flags: PER_DATASET ALPHA****
>
> Band 2 Block=218x1 Type=Byte, ColorInterp=Green****
>
>   Mask Flags: PER_DATASET ALPHA****
>
> Band 3 Block=218x1 Type=Byte, ColorInterp=Blue****
>
>   Mask Flags: PER_DATASET ALPHA****
>
> Band 4 Block=218x1 Type=Byte, ColorInterp=Alpha****
>
> ** **
>
> Thanks,****
>
> Roland****
>
> ** **
>
> ** **
>
> On Thu, Nov 17, 2011 at 5:21 PM, Roger Andr? <randre@gmail.com> wrote:****
>
> What is the output of gdalinfo on one of the PNG's in the superoverlay?***
> *
>
> ** **
>
> ** **
>
> On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com>
> wrote:****
>
>  ** **
>
> Has anyone else experienced the latest version of Google Earth
> (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs
> created using gdal_translate?  The same KMZ files worked in the past.****
>
> ** **
>
> Thanks,****
>
> Roland****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>  ** **
>
> ** **
>
> This email message is for the sole use of the intended recipient(s) and
> may contain confidential and privileged information. Any unauthorized
> review, use, disclosure or distribution is prohibited. If you are not the
> intended recipient, please contact the sender by reply email and delete the
> original message.   ??
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/6a70f270/attachment-0001.html
From even.rouault at mines-paris.org  Fri Nov 18 14:02:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 18 17:13:32 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC66607.3070802@gmail.com>
References: <4EC66607.3070802@gmail.com>
Message-ID: <201111182002.53286.even.rouault@mines-paris.org>

Le vendredi 18 novembre 2011 15:04:55, Ari Jolma a ?crit :
> Hi,
> 
> A few days ago on this list I mentioned that the following works using a
> recent version from trunk (and Perl bindings):
> 
> use Geo::GDAL;
> $datasource = Geo::OGR::Open('/home/ajolma/data/parks.shp');
> Geo::OGR::Driver('GML')->Copy($datasource, '/dev/stdout');
> 
> I'm testing a simple WFS written in Perl and basically the above is the
> contents of the GetFeature subroutine (the datasource name comes of
> course from a configuration file). However, using this in a Perl CGI
> program leads to "RuntimeError Failed to create GML file /dev/stdout." -
> it seems like the VSI does not work when the Perl program is run as a
> CGI program. I may investigate the issue more but maybe somebody has an
> answer right away. - I can forward the output to a file and then send
> the file but it would be nice to feed it directly to the client.

The most obvious idea I have is that something closes the stdout of the forked 
CGI ?

> 
> Regards,
> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From KShannon at gcs-research.com  Fri Nov 18 14:04:13 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov 18 17:15:34 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAKr0gVRogxTR7jCW7epdZ6kApEQo_3AADzDL83mDkFtyovBqfA@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAOL+ROH223oRsNcSn6A88izrnS-fNtZqXpfJNXbgY=nJOrKf3Q@mail.gmail.com>
	<CAKr0gVRQUVTn_5BLnHPf71LaykYW0NxfDZQsUKsfdEDL68bs8A@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA6314@MAIL.gcs-research.net>
	<CAKr0gVRogxTR7jCW7epdZ6kApEQo_3AADzDL83mDkFtyovBqfA@mail.gmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA6410@MAIL.gcs-research.net>

I doubt they will change the spec, and I am sure you are right about the many bad files.  I imagine that most people just checked the output from his or her program in google earth and said "Good enough".  If no one gets around to it before I get off work and to a *nix workstation, I will file a ticket and a patch.  It is probably safe to backport to 1.8 as well.

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roland Duhaime
Sent: Friday, November 18, 2011 9:59 AM
To: gdal-dev@lists.osgeo.org"
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Kyle,

Yes, I just removed the spaces after the commas in the <coordinates> tag and was then able to open one of the kml files in G.E.  I suspect that there are m(b)illions? of kmz files in cyberspace that won't meet the 2.2 standard because of this.  I am not sure of the most effective solution.  In addition to documentation, perhaps we need a conversion tool for legacy 2.1 kml superoverlays.  Perhaps getting the 2.2 KML standard to lighten-up a tad would be complicated.

Thanks Again,
Roland

On Fri, Nov 18, 2011 at 11:14 AM, Kyle Shannon <KShannon@gcs-research.com<mailto:KShannon@gcs-research.com>> wrote:
Possible issue with output (from http://earth.google.com/support/bin/answer.py?answer=40901):

To conform more closely with the OGC KML 2.2 standard, we've made the parsing of the <coordinates> tag more strict in version 6.1. Spaces must only be used to separate the (longitude,latitude,altitude) triplets which specify the coordinates of a single point. It is invalid to add spaces between individual coordinates. We understand that previous versions of the client were more lenient, so if your KML files contain spaces beween coordinates in coordinate triplets, an easy workaround is to remove all whitespace located immediately before or after commas inside a <coordinates> tag.

I checked one file, and there were spaces after the commas:

<kml xmlns="http://earth.google.com/kml/2.1" xmlns:gx="http://www.google.com/kml/ext/2.2">
     <Document>
           <name>1/1/1.kml</name>
           <Style>
                <ListStyle id="hideChildren">
                     <listItemType>checkHideChildren</listItemType>
                </ListStyle>
           </Style>
           <Region>
                <Lod>
                     <minLodPixels>128</minLodPixels>
                     <maxLodPixels>2048</maxLodPixels>
                </Lod>
                <LatLonAltBox>
                     <north>41.900791</north>
                     <south>41.890160</south>
                     <east>12.505676</east>
                     <west>12.492253</west>
                </LatLonAltBox>
           </Region>
           <GroundOverlay>
                <drawOrder>1</drawOrder>
                <Icon>
                     <href>1.jpg</href>
                </Icon>
                <gx:LatLonQuad>
                     <coordinates>
                           12.492253, 41.890160, 0
                           12.506078, 41.890461, 0
                           12.505676, 41.900791, 0
                           12.491848, 41.900490, 0
                     </coordinates>
                </gx:LatLonQuad>
           </GroundOverlay>
...

Seems like a quick fix.  Someone should probably file a ticket for documentation, I can do that if need be.

kss

From: gdal-dev-bounces@lists.osgeo.org<mailto:gdal-dev-bounces@lists.osgeo.org> [mailto:gdal-dev-bounces@lists.osgeo.org<mailto:gdal-dev-bounces@lists.osgeo.org>] On Behalf Of Roland Duhaime
Sent: Friday, November 18, 2011 7:14 AM
To: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Roger,

The PNG gdalinfo details are:

Driver: PNG/Portable Network Graphics
Files: 7.png
Size is 218, 218
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  218.0)
Upper Right (  218.0,    0.0)
Lower Right (  218.0,  218.0)
Center      (  109.0,  109.0)
Band 1 Block=218x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=218x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=218x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=218x1 Type=Byte, ColorInterp=Alpha

Thanks,
Roland


On Thu, Nov 17, 2011 at 5:21 PM, Roger Andr? <randre@gmail.com<mailto:randre@gmail.com>> wrote:
What is the output of gdalinfo on one of the PNG's in the superoverlay?


On Thu, Nov 17, 2011 at 1:36 PM, Roland Duhaime <roland.duhaime@gmail.com<mailto:roland.duhaime@gmail.com>> wrote:

Has anyone else experienced the latest version of Google Earth (6.1.0.5001) or the G.E. API not loading PNG formatted KMLSUPEROVERLAYs created using gdal_translate?  The same KMZ files worked in the past.

Thanks,
Roland


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   ??

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/16341c10/attachment-0001.html
From even.rouault at mines-paris.org  Fri Nov 18 14:11:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 18 17:22:31 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA6410@MAIL.gcs-research.net>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAKr0gVRogxTR7jCW7epdZ6kApEQo_3AADzDL83mDkFtyovBqfA@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA6410@MAIL.gcs-research.net>
Message-ID: <201111182011.28611.even.rouault@mines-paris.org>

Le vendredi 18 novembre 2011 20:04:13, Kyle Shannon a ?crit :
> I doubt they will change the spec, and I am sure you are right about the
> many bad files.  I imagine that most people just checked the output from
> his or her program in google earth and said "Good enough".  If no one gets
> around to it before I get off work and to a *nix workstation, I will file
> a ticket and a patch.  It is probably safe to backport to 1.8 as well.
> 
I was just looking at this. I'll notify you of the ticket when done. Testing 
will be welcome because I have a much older GE version.
From KShannon at gcs-research.com  Fri Nov 18 14:12:27 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov 18 17:24:08 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <201111182011.28611.even.rouault@mines-paris.org>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<CAKr0gVRogxTR7jCW7epdZ6kApEQo_3AADzDL83mDkFtyovBqfA@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B90EFA6410@MAIL.gcs-research.net>
	<201111182011.28611.even.rouault@mines-paris.org>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>

Thanks Even, I have a patch, but I can't test it here.  It is probably faster and easier for you anyway.  Thanks again.

kss


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, November 18, 2011 12:11 PM
To: gdal-dev@lists.osgeo.org
Cc: Kyle Shannon
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

Le vendredi 18 novembre 2011 20:04:13, Kyle Shannon a ?crit :
> I doubt they will change the spec, and I am sure you are right about 
> the many bad files.  I imagine that most people just checked the 
> output from his or her program in google earth and said "Good enough".  
> If no one gets around to it before I get off work and to a *nix 
> workstation, I will file a ticket and a patch.  It is probably safe to backport to 1.8 as well.
> 
I was just looking at this. I'll notify you of the ticket when done. Testing will be welcome because I have a much older GE version.
From boesiii at yahoo.com  Fri Nov 18 14:14:42 2011
From: boesiii at yahoo.com (boesiii)
Date: Fri Nov 18 17:25:52 2011
Subject: [gdal-dev] Problem joining a shapefile and MDB
Message-ID: <1321643682308-7009404.post@n2.nabble.com>

I am trying to join a shapefile and MDB using the following command:

ogrinfo -sql  "SELECT * FROM PLOTS LEFT JOIN
'ODBC:geoplan,County_Taxid_Parcels'.County_Taxid_Parcels ON
PLOTS.SHRT_TXID=County_Taxid_Parcels.SHRT_TXID" 
D:\ms4w\apps\ftmagisapp_v2\maps\background\PLOTS.shp

The ogrinfo command says it opens the shapefile but then it immediately
crashes.

What could be causing it to crash?

I ultimately will be using this inside a MapServer map file to display owner
names from the MDB.

Thanks.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB-tp7009404p7009404.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Nov 18 14:17:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 18 17:28:22 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<201111182011.28611.even.rouault@mines-paris.org>
	<2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>
Message-ID: <201111182017.01098.even.rouault@mines-paris.org>

Le vendredi 18 novembre 2011 20:12:27, Kyle Shannon a ?crit :
> Thanks Even, I have a patch, but I can't test it here.  It is probably
> faster and easier for you anyway.  Thanks again.

Filed and fixes commited : http://trac.osgeo.org/gdal/ticket/4347#comment:1
From even.rouault at mines-paris.org  Fri Nov 18 14:19:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 18 17:31:17 2011
Subject: [gdal-dev] Problem joining a shapefile and MDB
In-Reply-To: <1321643682308-7009404.post@n2.nabble.com>
References: <1321643682308-7009404.post@n2.nabble.com>
Message-ID: <201111182019.49177.even.rouault@mines-paris.org>

Le vendredi 18 novembre 2011 20:14:42, boesiii a ?crit :
> I am trying to join a shapefile and MDB using the following command:
> 
> ogrinfo -sql  "SELECT * FROM PLOTS LEFT JOIN
> 'ODBC:geoplan,County_Taxid_Parcels'.County_Taxid_Parcels ON
> PLOTS.SHRT_TXID=County_Taxid_Parcels.SHRT_TXID"
> D:\ms4w\apps\ftmagisapp_v2\maps\background\PLOTS.shp
> 
> The ogrinfo command says it opens the shapefile but then it immediately
> crashes.
> 
> What could be causing it to crash?
> 
> I ultimately will be using this inside a MapServer map file to display
> owner names from the MDB.

You didn't mention which GDAL version you are using. But if it is 1.8.0, then 
you probably have hit http://trac.osgeo.org/gdal/ticket/4112 that has been 
fixed in 1.8.1

> 
> Thanks.
> 
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB
> -tp7009404p7009404.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From randre at gmail.com  Fri Nov 18 15:22:39 2011
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Fri Nov 18 18:37:29 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <201111182017.01098.even.rouault@mines-paris.org>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<201111182011.28611.even.rouault@mines-paris.org>
	<2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>
	<201111182017.01098.even.rouault@mines-paris.org>
Message-ID: <CAOL+ROGbxbjeGdanBtADRdLm2tMsdSTr+z1rg3+gFkKK1mM3SQ@mail.gmail.com>

If you change the namespace declaration in the KML from "2.2" to "2.1",
does it still work?



On Fri, Nov 18, 2011 at 11:17 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le vendredi 18 novembre 2011 20:12:27, Kyle Shannon a ?crit :
> > Thanks Even, I have a patch, but I can't test it here.  It is probably
> > faster and easier for you anyway.  Thanks again.
>
> Filed and fixes commited :
> http://trac.osgeo.org/gdal/ticket/4347#comment:1
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/72db5a39/attachment.html
From boesiii at yahoo.com  Fri Nov 18 16:00:55 2011
From: boesiii at yahoo.com (boesiii)
Date: Fri Nov 18 19:17:53 2011
Subject: [gdal-dev] Re: Problem joining a shapefile and MDB
In-Reply-To: <201111182019.49177.even.rouault@mines-paris.org>
References: <1321643682308-7009404.post@n2.nabble.com>
	<201111182019.49177.even.rouault@mines-paris.org>
Message-ID: <1321650055614-7009680.post@n2.nabble.com>

Even,

What is the correct procedure to upgrade a MS4W installation?  I downloaded
release-1310-gdal-1-8-1-mapserver-6-0-1.zip and I copied OGRINFO.EXE to the
current location.  After I did this OGRINFO still crashed.  Do I need to
copy other files?

Thanks,

Ed

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB-tp7009404p7009680.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Nov 18 16:03:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 18 19:20:45 2011
Subject: [gdal-dev] Re: Problem joining a shapefile and MDB
In-Reply-To: <1321650055614-7009680.post@n2.nabble.com>
References: <1321643682308-7009404.post@n2.nabble.com>
	<201111182019.49177.even.rouault@mines-paris.org>
	<1321650055614-7009680.post@n2.nabble.com>
Message-ID: <201111182203.33733.even.rouault@mines-paris.org>

Le vendredi 18 novembre 2011 22:00:55, boesiii a ?crit :
> Even,
> 
> What is the correct procedure to upgrade a MS4W installation?  I downloaded
> release-1310-gdal-1-8-1-mapserver-6-0-1.zip and I copied OGRINFO.EXE to the
> current location.  After I did this OGRINFO still crashed.  Do I need to
> copy other files?

I'm not sure you can mix stuff like that. You should ask for confirmation from 
the MS4W packagers, but perhaps they have already an updated version of MS4W 
with GDAL 1.8.1

> 
> Thanks,
> 
> Ed
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB
> -tp7009404p7009680.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Fri Nov 18 16:15:07 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Nov 18 19:32:52 2011
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <CA+YzLBffO0VTr4Rg8Q2mEAZ8M7_LWPuZrR=Pd3bC-tthMLqXYA@mail.gmail.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<1318422893791-6884804.post@n2.nabble.com>
	<1321531204125-7003850.post@n2.nabble.com>
	<1321533438.4ec4fffed60ca@imp.free.fr>
	<1321536241516-7004096.post@n2.nabble.com>
	<1321540099.4ec51a032079d@imp.free.fr>
	<CABUeae8wAv3EaHzC4qeJA41Dfwbr_v3NsdbasDgfAYfT5hd_=g@mail.gmail.com>
	<1321543961.4ec52919f3c71@imp.free.fr>
	<CA+YzLBffO0VTr4Rg8Q2mEAZ8M7_LWPuZrR=Pd3bC-tthMLqXYA@mail.gmail.com>
Message-ID: <CABUeae9cDgkD-QrVrmH+AmD9PGWZFUj4V2HBqSMmPc=tNoa-gw@mail.gmail.com>

On 17 November 2011 21:31, Frank Warmerdam <warmerdam@pobox.com> wrote:
> ?o RFC 8 on coding guidelines and such is *not* adopted and
> ? ?in any event it would be advisory and I would not try to apply
> ? ?it to essentially external code.

I assumed the issue is with driver code, which is proposed to be
included in GDAL.

> ?o Code with names and comments in Norwegian, or any
> ? ?non-English language is going to be harder to support.

That's what I meant.

> ?  If?it just works this might not matter, and if there is a developer
> ? ?who does understand it who is willing to support it that is great.

...people come and go, but code stays.

> ? ?I would not be inclined to exclude code just because the
> ? ?comments and variables are in a different language ?-
> ? ?particularly in a driver where expectations are often more relaxed
> ? ?than in the core.

Understood.

> From my perspective, I'm inclined to take a fairly relaxed
> view of code standards and other requirements on driver
> code.

Thanks for clarification

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From bfraser at geoanalytic.com  Fri Nov 18 16:11:00 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Nov 18 19:34:02 2011
Subject: [gdal-dev] Re: Problem joining a shapefile and MDB
In-Reply-To: <1321650055614-7009680.post@n2.nabble.com>
References: <1321643682308-7009404.post@n2.nabble.com>
	<201111182019.49177.even.rouault@mines-paris.org>
	<1321650055614-7009680.post@n2.nabble.com>
Message-ID: <4EC6C9E4.7050601@geoanalytic.com>

A response from the mapserver list:

http://forums.devarticles.com/microsoft-sql-server-5/data-source-name-not-found-and-no-default-driver-specified-8346.html

When you use a 64bits Windows, ODBC manager at Control Panel will only
create 64bits connection.
I had problems with that in the past and had to force 32bits
connections using 32bits ODBC manager at
C:\Windows\SysWOW64\odbcad32.exe


Best Regards,
Brent Fraser


On 11/18/2011 2:00 PM, boesiii wrote:
> Even,
>
> What is the correct procedure to upgrade a MS4W installation?  I downloaded
> release-1310-gdal-1-8-1-mapserver-6-0-1.zip and I copied OGRINFO.EXE to the
> current location.  After I did this OGRINFO still crashed.  Do I need to
> copy other files?
>
> Thanks,
>
> Ed
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB-tp7009404p7009680.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From roland.duhaime at gmail.com  Fri Nov 18 16:24:28 2011
From: roland.duhaime at gmail.com (Roland Duhaime)
Date: Fri Nov 18 19:42:43 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAOL+ROGbxbjeGdanBtADRdLm2tMsdSTr+z1rg3+gFkKK1mM3SQ@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<201111182011.28611.even.rouault@mines-paris.org>
	<2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>
	<201111182017.01098.even.rouault@mines-paris.org>
	<CAOL+ROGbxbjeGdanBtADRdLm2tMsdSTr+z1rg3+gFkKK1mM3SQ@mail.gmail.com>
Message-ID: <CAKr0gVTwTCjD9yH7OiRX1mEKc33qCEBOM79-P17irrZ+G0pL9g@mail.gmail.com>

No, but that would be nice if it did. - Roland

On Fri, Nov 18, 2011 at 3:22 PM, Roger Andr? <randre@gmail.com> wrote:

> If you change the namespace declaration in the KML from "2.2" to "2.1",
> does it still work?
>
>
>
> On Fri, Nov 18, 2011 at 11:17 AM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
>> Le vendredi 18 novembre 2011 20:12:27, Kyle Shannon a ?crit :
>> > Thanks Even, I have a patch, but I can't test it here.  It is probably
>> > faster and easier for you anyway.  Thanks again.
>>
>> Filed and fixes commited :
>> http://trac.osgeo.org/gdal/ticket/4347#comment:1
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/0a2c977e/attachment-0001.html
From KShannon at gcs-research.com  Fri Nov 18 16:27:53 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri Nov 18 19:46:57 2011
Subject: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001
In-Reply-To: <CAKr0gVTwTCjD9yH7OiRX1mEKc33qCEBOM79-P17irrZ+G0pL9g@mail.gmail.com>
References: <CAKr0gVQtBWN77DG4uRqHgm8P=_g4FEBPiSfahzHmhwAJUoTq=A@mail.gmail.com>
	<201111182011.28611.even.rouault@mines-paris.org>
	<2DD24CD6225DC04C81CF12523261F4B90EFA644C@MAIL.gcs-research.net>
	<201111182017.01098.even.rouault@mines-paris.org>
	<CAOL+ROGbxbjeGdanBtADRdLm2tMsdSTr+z1rg3+gFkKK1mM3SQ@mail.gmail.com>
	<CAKr0gVTwTCjD9yH7OiRX1mEKc33qCEBOM79-P17irrZ+G0pL9g@mail.gmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B90EFA64CB@MAIL.gcs-research.net>

I looked in 2.1, the spec is the same, google was just being lenient on parsing.

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roland Duhaime
Sent: Friday, November 18, 2011 2:24 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] KMLSuperOverlay in Google Earth 6.1.0.5001

No, but that would be nice if it did. - Roland
On Fri, Nov 18, 2011 at 3:22 PM, Roger Andr? <randre@gmail.com<mailto:randre@gmail.com>> wrote:
If you change the namespace declaration in the KML from "2.2" to "2.1", does it still work?


On Fri, Nov 18, 2011 at 11:17 AM, Even Rouault <even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>> wrote:
Le vendredi 18 novembre 2011 20:12:27, Kyle Shannon a ?crit :
> Thanks Even, I have a patch, but I can't test it here.  It is probably
> faster and easier for you anyway.  Thanks again.
Filed and fixes commited : http://trac.osgeo.org/gdal/ticket/4347#comment:1
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111118/5ee030f1/attachment.html
From ari.jolma at gmail.com  Sat Nov 19 04:40:09 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Nov 19 08:37:44 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <201111182002.53286.even.rouault@mines-paris.org>
References: <4EC66607.3070802@gmail.com>
	<201111182002.53286.even.rouault@mines-paris.org>
Message-ID: <4EC77979.9030205@gmail.com>

On 11/18/2011 09:02 PM, Even Rouault wrote:
> Le vendredi 18 novembre 2011 15:04:55, Ari Jolma a ?crit :
>> Hi,
>>
>> A few days ago on this list I mentioned that the following works using a
>> recent version from trunk (and Perl bindings):
>>
>> use Geo::GDAL;
>> $datasource = Geo::OGR::Open('/home/ajolma/data/parks.shp');
>> Geo::OGR::Driver('GML')->Copy($datasource, '/dev/stdout');
>>
>> I'm testing a simple WFS written in Perl and basically the above is the
>> contents of the GetFeature subroutine (the datasource name comes of
>> course from a configuration file). However, using this in a Perl CGI
>> program leads to "RuntimeError Failed to create GML file /dev/stdout." -
>> it seems like the VSI does not work when the Perl program is run as a
>> CGI program. I may investigate the issue more but maybe somebody has an
>> answer right away. - I can forward the output to a file and then send
>> the file but it would be nice to feed it directly to the client.
> The most obvious idea I have is that something closes the stdout of the forked
> CGI ?

The standard way to send text (HTML, XML, ..) to the client in a Perl 
CGI process is to print to stdout (exactly the same way as one does in a 
command line Perl program). Thus it seems that the VSI stdout is somehow 
not a standard stdout - I'll take a deeper look into what goes on.

Another thing is that in mod_perl sending to client is through a handle 
(use the print method of an object) - it would be nice to be able to 
give that handle to the GDAL copy method.

Ari


>
>> Regards,
>>
>> Ari
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Sat Nov 19 09:12:51 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Nov 19 13:25:29 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC77979.9030205@gmail.com>
References: <4EC66607.3070802@gmail.com>
	<201111182002.53286.even.rouault@mines-paris.org>
	<4EC77979.9030205@gmail.com>
Message-ID: <4EC7B963.2040600@gmail.com>

On 11/19/2011 11:40 AM, Ari Jolma wrote:
> On 11/18/2011 09:02 PM, Even Rouault wrote:
>> Le vendredi 18 novembre 2011 15:04:55, Ari Jolma a ?crit :
>>> Hi,
>>>
>>> A few days ago on this list I mentioned that the following works 
>>> using a
>>> recent version from trunk (and Perl bindings):
>>>
>>> use Geo::GDAL;
>>> $datasource = Geo::OGR::Open('/home/ajolma/data/parks.shp');
>>> Geo::OGR::Driver('GML')->Copy($datasource, '/dev/stdout');
>>>
>>> I'm testing a simple WFS written in Perl and basically the above is the
>>> contents of the GetFeature subroutine (the datasource name comes of
>>> course from a configuration file). However, using this in a Perl CGI
>>> program leads to "RuntimeError Failed to create GML file 
>>> /dev/stdout." -
>>> it seems like the VSI does not work when the Perl program is run as a
>>> CGI program. I may investigate the issue more but maybe somebody has an
>>> answer right away. - I can forward the output to a file and then send
>>> the file but it would be nice to feed it directly to the client.
>> The most obvious idea I have is that something closes the stdout of 
>> the forked
>> CGI ?
>
> The standard way to send text (HTML, XML, ..) to the client in a Perl 
> CGI process is to print to stdout (exactly the same way as one does in 
> a command line Perl program). Thus it seems that the VSI stdout is 
> somehow not a standard stdout - I'll take a deeper look into what goes 
> on.

I found the problem. It is changeset 23022 (by you, Even :), which 
removes support for "stdout" and adds "/dev/stdout" as an alias to 
"/vsistdout/". Simple, but took me a while to find out especially as the 
log message begins "mentions in the doc".

>
> Another thing is that in mod_perl sending to client is through a 
> handle (use the print method of an object) - it would be nice to be 
> able to give that handle to the GDAL copy method.

mod_perl is probably not a problem. However, Perl supports memory files 
too and it would be interesting to be able to use VSI memory files and 
Perl memory files interchangeably.

Ari

>
> Ari
>
>
>>
>>> Regards,
>>>
>>> Ari
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Sat Nov 19 09:24:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov 19 13:37:16 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC7B963.2040600@gmail.com>
References: <4EC66607.3070802@gmail.com> <4EC77979.9030205@gmail.com>
	<4EC7B963.2040600@gmail.com>
Message-ID: <201111191524.03960.even.rouault@mines-paris.org>

> I found the problem. It is changeset 23022 (by you, Even :), which
> removes support for "stdout" and adds "/dev/stdout" as an alias to
> "/vsistdout/". Simple, but took me a while to find out especially as the
> log message begins "mentions in the doc".

Hum, so it means that under your CGI the stdout file is actually closed. 
Because before r23022 /dev/stdout was considered as a regular file and was 
opened, but now that /vsistdout/ is used, it directly writes to FILE* stdout.

I don't know Apache but perhaps there's an option to leave stdout opened for 
the forked process ?

> 
> > Another thing is that in mod_perl sending to client is through a
> > handle (use the print method of an object) - it would be nice to be
> > able to give that handle to the GDAL copy method.
> 
> mod_perl is probably not a problem. However, Perl supports memory files
> too and it would be interesting to be able to use VSI memory files and
> Perl memory files interchangeably.
> 
> Ari
> 
> > Ari
> > 
> >>> Regards,
> >>> 
> >>> Ari
> >>> 
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Sun Nov 20 04:04:50 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Nov 20 09:19:28 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <201111191524.03960.even.rouault@mines-paris.org>
References: <4EC66607.3070802@gmail.com> <4EC77979.9030205@gmail.com>
	<4EC7B963.2040600@gmail.com>
	<201111191524.03960.even.rouault@mines-paris.org>
Message-ID: <4EC8C2B2.1020209@gmail.com>

On 11/19/2011 04:24 PM, Even Rouault wrote:
>> I found the problem. It is changeset 23022 (by you, Even :), which
>> removes support for "stdout" and adds "/dev/stdout" as an alias to
>> "/vsistdout/". Simple, but took me a while to find out especially as the
>> log message begins "mentions in the doc".
> Hum, so it means that under your CGI the stdout file is actually closed.
> Because before r23022 /dev/stdout was considered as a regular file and was
> opened, but now that /vsistdout/ is used, it directly writes to FILE* stdout.
>
> I don't know Apache but perhaps there's an option to leave stdout opened for
> the forked process ?

I think the correct thing to do is to use "/vsistdout/" in CGI programs,
since it works both in older (1.8.0) and newer GDAL (next release).

Ari

From even.rouault at mines-paris.org  Sun Nov 20 05:50:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 20 11:11:00 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC8C2B2.1020209@gmail.com>
References: <4EC66607.3070802@gmail.com>
	<201111191524.03960.even.rouault@mines-paris.org>
	<4EC8C2B2.1020209@gmail.com>
Message-ID: <201111201150.10983.even.rouault@mines-paris.org>

Le dimanche 20 novembre 2011 10:04:50, Ari Jolma a ?crit :
> On 11/19/2011 04:24 PM, Even Rouault wrote:
> >> I found the problem. It is changeset 23022 (by you, Even :), which
> >> removes support for "stdout" and adds "/dev/stdout" as an alias to
> >> "/vsistdout/". Simple, but took me a while to find out especially as the
> >> log message begins "mentions in the doc".
> > 
> > Hum, so it means that under your CGI the stdout file is actually closed.
> > Because before r23022 /dev/stdout was considered as a regular file and
> > was opened, but now that /vsistdout/ is used, it directly writes to
> > FILE* stdout.
> > 
> > I don't know Apache but perhaps there's an option to leave stdout opened
> > for the forked process ?
> 
> I think the correct thing to do is to use "/vsistdout/" in CGI programs,
> since it works both in older (1.8.0) and newer GDAL (next release).

Hum, I'm lost. In your first message, you write that using "/dev/stdout" no 
longer works with trunk. But since r23022, "/dev/stdout" is redirected to 
"/vsistdout/", which works. Sounds like there is a contradiction somewhere.

> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Sun Nov 20 06:06:07 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Nov 20 11:27:27 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <201111201150.10983.even.rouault@mines-paris.org>
References: <4EC66607.3070802@gmail.com>
	<201111191524.03960.even.rouault@mines-paris.org>
	<4EC8C2B2.1020209@gmail.com>
	<201111201150.10983.even.rouault@mines-paris.org>
Message-ID: <4EC8DF1F.7050503@gmail.com>

On 11/20/2011 12:50 PM, Even Rouault wrote:
> Le dimanche 20 novembre 2011 10:04:50, Ari Jolma a ?crit :
>> On 11/19/2011 04:24 PM, Even Rouault wrote:
>>>> I found the problem. It is changeset 23022 (by you, Even :), which
>>>> removes support for "stdout" and adds "/dev/stdout" as an alias to
>>>> "/vsistdout/". Simple, but took me a while to find out especially as the
>>>> log message begins "mentions in the doc".
>>> Hum, so it means that under your CGI the stdout file is actually closed.
>>> Because before r23022 /dev/stdout was considered as a regular file and
>>> was opened, but now that /vsistdout/ is used, it directly writes to
>>> FILE* stdout.
>>>
>>> I don't know Apache but perhaps there's an option to leave stdout opened
>>> for the forked process ?
>> I think the correct thing to do is to use "/vsistdout/" in CGI programs,
>> since it works both in older (1.8.0) and newer GDAL (next release).
> Hum, I'm lost. In your first message, you write that using "/dev/stdout" no
> longer works with trunk. But since r23022, "/dev/stdout" is redirected to
> "/vsistdout/", which works. Sounds like there is a contradiction somewhere.

For CGI "/dev/stdout" works with trunk but it does not work with 
released versions.
I was confused (I was using two different computers with two different 
setups) and
as a result my mails were confused, sorry.

After some more careful testing my final conclusion is the above. The 
only case
which does not work as expected is "/dev/stdout" with released versions 
(pre r23022) as they
expect /dev/stdout to be open as you say. In CGI this is not the case.

But it turns out that while this works, it is not optimal, since in a 
WFS case there may be
errors during the production of the GML and it should be buffered before 
sending to
the client - otherwise the error message XML gets mixed up with the GML. I'm
looking at using VSI memory files for that purpose. If there are no 
errors, then
the VSI memory file can be flushed to stdout. Probably it is easiest 
done somehow like this:

create a VSI memory file (does this return a filename?)
create a GML datasource using that memory file (what's the filename?)
flush the memory file into VSI stdout (how?)
delete the memory file

Ari

>
>> Ari
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sun Nov 20 06:34:22 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 20 11:57:40 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC8DF1F.7050503@gmail.com>
References: <4EC66607.3070802@gmail.com>
	<201111201150.10983.even.rouault@mines-paris.org>
	<4EC8DF1F.7050503@gmail.com>
Message-ID: <201111201234.22577.even.rouault@mines-paris.org>

> For CGI "/dev/stdout" works with trunk but it does not work with
> released versions.
> I was confused (I was using two different computers with two different
> setups) and
> as a result my mails were confused, sorry.
> 
> After some more careful testing my final conclusion is the above. The
> only case
> which does not work as expected is "/dev/stdout" with released versions
> (pre r23022) as they
> expect /dev/stdout to be open as you say. In CGI this is not the case.

OK.
> 
> But it turns out that while this works, it is not optimal, since in a
> WFS case there may be
> errors during the production of the GML and it should be buffered before
> sending to
> the client - otherwise the error message XML gets mixed up with the GML.
> I'm looking at using VSI memory files for that purpose. If there are no
> errors, then
> the VSI memory file can be flushed to stdout

Errors will go to the stderr flow, not stdout. Errors are likely redirected to 
the log file of the http server. So I don't think you will have a mix of GML 
output and error messages.

> Probably it is easiest
> done somehow like this:
> 
> create a VSI memory file (does this return a filename?)
> create a GML datasource using that memory file (what's the filename?)

You can combine that step in a single one. Just generate a GML file with a 
"/vsimem/somename.gml". It will be implicitely created.

> flush the memory file into VSI stdout (how?)

You can read the content of the file with VSIFOpenL() / VSIFReadL() / 
VSIFCloseL() and output it to stdout with whatever Perl offers for that 
("print" or something close I'd imagine)

> delete the memory file

gdal.Unlink("/vsimem/somename.gml")
gdal.Unlink("/vsimem/somename.xsd")

> 
> Ari
> 
> >> Ari
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Sun Nov 20 06:48:42 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Nov 20 12:12:21 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <201111201234.22577.even.rouault@mines-paris.org>
References: <4EC66607.3070802@gmail.com>
	<201111201150.10983.even.rouault@mines-paris.org>
	<4EC8DF1F.7050503@gmail.com>
	<201111201234.22577.even.rouault@mines-paris.org>
Message-ID: <4EC8E91A.1000307@gmail.com>

On 11/20/2011 01:34 PM, Even Rouault wrote:
> But it turns out that while this works, it is not optimal, since in a
> WFS case there may be
> errors during the production of the GML and it should be buffered before
> sending to
> the client - otherwise the error message XML gets mixed up with the GML.
> I'm looking at using VSI memory files for that purpose. If there are no
> errors, then
> the VSI memory file can be flushed to stdout
> Errors will go to the stderr flow, not stdout. Errors are likely redirected to
> the log file of the http server. So I don't think you will have a mix of GML
> output and error messages.

I meant the WFS error XML that is sent to the client. That needs to go 
through the stdout.

>
>> Probably it is easiest
>> done somehow like this:
>>
>> create a VSI memory file (does this return a filename?)
>> create a GML datasource using that memory file (what's the filename?)
> You can combine that step in a single one. Just generate a GML file with a
> "/vsimem/somename.gml". It will be implicitely created.
>
>> flush the memory file into VSI stdout (how?)
> You can read the content of the file with VSIFOpenL() / VSIFReadL() /
> VSIFCloseL() and output it to stdout with whatever Perl offers for that
> ("print" or something close I'd imagine)

VSIFReadL is missing from the Perl bindings - I think it is only in 
Python bindings and without any code in the shared interface. I'll add that.

I'll need to review all the VSIF* bindings for the Perl case as I 
haven't done that and they are probably unusable now.

>
>> delete the memory file
> gdal.Unlink("/vsimem/somename.gml")
> gdal.Unlink("/vsimem/somename.xsd")

Thanks,

Ari

From ari.jolma at gmail.com  Sun Nov 20 09:15:07 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Nov 20 14:46:50 2011
Subject: [gdal-dev] VSI* functions in Perl bindings
Message-ID: <4EC90B6B.7080800@gmail.com>

Folks,

I've added the VSIFReadL function and updated the VSIFWriteL function in 
the Perl bindings. I added simple tests for those and for VSIFOpenL and 
VSIFCLoseL functions to the Perl binding tests.

I added VSIFReadL and VSIFWriteL function prototypes to cpl.i as they 
are in the GDAL source code. They needed new typemaps. I don't 
understand why size_t is often changed to int in the bindings, I used 
size_t.

Probably I will later add an OO interface to the stuff to make the VSI 
filehandles objects.

These are especially useful avoiding disk writes. I'm going to use these 
for CGI programs such as WFS, where I will write the GML to a memory 
file, then take it from there into a Perl variable for possible changes 
(namespaces for example) and sending to the client without storing into 
the disk.

Cheers,

Ari

From brfr at metrico.lu  Mon Nov 21 03:28:56 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon Nov 21 10:00:07 2011
Subject: [gdal-dev] VSI issue
In-Reply-To: <4EC8C2B2.1020209@gmail.com>
References: <4EC66607.3070802@gmail.com> <4EC77979.9030205@gmail.com>
	<4EC7B963.2040600@gmail.com>
	<201111191524.03960.even.rouault@mines-paris.org>
	<4EC8C2B2.1020209@gmail.com>
Message-ID: <4ECA0BC8.4040903@metrico.lu>

Am 20.11.2011 10:04, schrieb Ari Jolma:
> On 11/19/2011 04:24 PM, Even Rouault wrote:
>>> I found the problem. It is changeset 23022 (by you, Even :), which
>>> removes support for "stdout" and adds "/dev/stdout" as an alias to
>>> "/vsistdout/". Simple, but took me a while to find out especially as the
>>> log message begins "mentions in the doc".
>> Hum, so it means that under your CGI the stdout file is actually closed.
>> Because before r23022 /dev/stdout was considered as a regular file and
>> was
>> opened, but now that /vsistdout/ is used, it directly writes to FILE*
>> stdout.
>>
>> I don't know Apache but perhaps there's an option to leave stdout
>> opened for
>> the forked process ?
>
> I think the correct thing to do is to use "/vsistdout/" in CGI programs,
> since it works both in older (1.8.0) and newer GDAL (next release).
>
> Ari
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

I can only speak for python, but I agree with Ari here. Mod_wsgi, the 
python - apache module advises also not to use /dev/stdout because it is 
used internally to communicate with the webserver, [1] holds more 
explanation on the issue.
And I don't know, how far you could use /dev/stdout in threaded 
environments like a webserver without having more than one thread 
writing to the same /dev/stdout.

Just my additional 2 cents on the stdout - issue ;-)

Frank


[1] 
http://code.google.com/p/modwsgi/wiki/ApplicationIssues#Writing_To_Standard_Output

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From ari.jolma at gmail.com  Mon Nov 21 05:20:33 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon Nov 21 11:58:04 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
Message-ID: <4ECA25F1.8040000@gmail.com>

Hi,

I'm making a new GML layer from an existing layer. For some reason the 
CopyLayer method leaves adjusted fields out but CreateField, 
CreateFeature sequence does not. I guess they should be identical?

i.e.

my $datasource = Geo::OGR::Open('Pg:...');
my $l = $datasource->ExecuteSQL('...');
my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
$gml->CopyLayer($l, 'a');

leaves fields like "a b" out, while

my $datasource = Geo::OGR::Open('Pg:...');
my $l = $datasource->ExecuteSQL('...');
my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
my $l2 = $gml->CreateLayer('test');

my $d = $l->GetLayerDefn;
for (0..$d->GetFieldCount-1) {
     my $f = $d->GetFieldDefn($_);
     $l2->CreateField($f);
}

$l->ResetReading;
while (my $f = $l->GetNextFeature) {
     $l2->CreateFeature($f);
}

works ok (and prints out warnings about the field name adjustments)

I tried to look into what the CopyLayer method generic driver does 
differently but could not tell.

Any ideas?

Ari

From boesiii at yahoo.com  Mon Nov 21 08:46:08 2011
From: boesiii at yahoo.com (boesiii)
Date: Mon Nov 21 15:35:06 2011
Subject: [gdal-dev] Re: Problem joining a shapefile and MDB
In-Reply-To: <4EC6C9E4.7050601@geoanalytic.com>
References: <1321643682308-7009404.post@n2.nabble.com>
	<201111182019.49177.even.rouault@mines-paris.org>
	<1321650055614-7009680.post@n2.nabble.com>
	<4EC6C9E4.7050601@geoanalytic.com>
Message-ID: <1321883168434-7016385.post@n2.nabble.com>

I was able to get it working by upgrading MS4W to the new version on a 32bit
PC, today I will try and get it to work on a 64bit PC, although I don't
forsee any problems.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-joining-a-shapefile-and-MDB-tp7009404p7016385.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jachym.cepicky at gmail.com  Mon Nov 21 11:31:41 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Mon Nov 21 18:29:41 2011
Subject: [gdal-dev] wms driver and support for more parameters in the URL -
	bug in curl?
Message-ID: <CAAZUH4FkTQJyukHEr_LJ8oh3=+dGn82Ys6Ud95itCEDBY=-0Eg@mail.gmail.com>

Hi,

several installations of GDAL (1.8, 1.9) are having troubles acting as
WMS clients. It seems to be bug in some external library (curl?).

I need to configure the XML file for WMS input for GDAL. The URL of
the server needs to have more parameters. The resulting request  has
on some GDAL installations only *one* parameter in the URL.

Example of the WMS file:

<GDAL_WMS>
    <Service name="WMS">
    <Version>1.1.1</Version>
    <ServerUrl>http://www.habitats.cz/cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&OWSSERVICE=WMS&OWSURL=http%3A%2F%2Fgeoportal2.uhul.cz%2Fwms_oprl&</ServerUrl>
    <SRS>EPSG:3035</SRS>
    <ImageFormat>image/png</ImageFormat>
    <Transparent>TRUE</Transparent>
    <Styles>default</Styles>
    <Layers>Lesni_typ</Layers>
    </Service>
    <DataWindow>
    <UpperLeftX>4559666.0</UpperLeftX>
    <UpperLeftY>2946494.33333</UpperLeftY>
    <LowerRightX>4566270.0</LowerRightX>
    <LowerRightY>2941837.66667</LowerRightY>
    <SizeX>936</SizeX>
    <SizeY>660</SizeY>
    </DataWindow>
    <BlockSizeX>1024</BlockSizeX>
    <BlockSizeY>1024</BlockSizeY>
    <BandsCount>4</BandsCount>
</GDAL_WMS>


See, there are 3 default aditional parameters to the ServerUrl:
FROMCRS, OWSService, OWSUrl.

I try

gdalwarp in.wms in.tiff

On my localhost, correst request with all 3 parameters arrives:
/cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&OWSSERVICE=WMS&OWSURL=http%3A%2F%2Fgeoportal2.uhul.cz%2Fwms_oprl&request=GetMap&version=1.1.1&layers=Lesni_typ&styles=default&srs=EPSG:3035&transparent=TRUE&format=image/png&width=936&height=660&bbox=4559666.00000000,2941837.66667000,4566270.00000000,2946494.33333000

But the our server or on other computer with *same* version of GDAL as
on my localhost, only the *first* one arrives:

 /cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&service=WMS&request=GetMap&version=1.1.1&layers=Lesni_typ&styles=default&srs=EPSG:3035&transparent=TRUE&format=image/png&width=936&height=660&bbox=4559666.00000000,2941837.66667000,4566270.00000000,2946494.33333000

So, is there some strange bug in GDAL? In some dependence library
(like curl?) Any other way, how to pass more aditional parameters to
the server with GDAL as client?

Thanks

Jachym


-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
From even.rouault at mines-paris.org  Mon Nov 21 13:57:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 21 21:03:34 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <4ECA25F1.8040000@gmail.com>
References: <4ECA25F1.8040000@gmail.com>
Message-ID: <201111211957.23547.even.rouault@mines-paris.org>

Le lundi 21 novembre 2011 11:20:33, Ari Jolma a ?crit :
> Hi,
> 
> I'm making a new GML layer from an existing layer. For some reason the
> CopyLayer method leaves adjusted fields out but CreateField,
> CreateFeature sequence does not. I guess they should be identical?
> 
> i.e.
> 
> my $datasource = Geo::OGR::Open('Pg:...');
> my $l = $datasource->ExecuteSQL('...');
> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
> $gml->CopyLayer($l, 'a');
> 
> leaves fields like "a b" out, while

I guess it is because the GML driver transforms "a b" into "a_b" to make it a 
valid XML name. But the implementation of CopyLayer() uses SetFrom(), which 
cannot guess that "a b" values from source feature should be mapped to "a_b" 
of target feature.

> 
> my $datasource = Geo::OGR::Open('Pg:...');
> my $l = $datasource->ExecuteSQL('...');
> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
> my $l2 = $gml->CreateLayer('test');
> 
> my $d = $l->GetLayerDefn;
> for (0..$d->GetFieldCount-1) {
>      my $f = $d->GetFieldDefn($_);
>      $l2->CreateField($f);
> }
> 
> $l->ResetReading;
> while (my $f = $l->GetNextFeature) {
>      $l2->CreateFeature($f);
> }
> 
> works ok (and prints out warnings about the field name adjustments)

Works ok perhaps, but it is potentially risky. You should not use $l2-
>CreateFeature($f) with $f being a feature that has the feature definition of 
$l and not $l2. That could crash in some situations... You're lucky here that 
it works for you because you have the same number of fields and same type.

> 
> I tried to look into what the CopyLayer method generic driver does
> differently but could not tell.

CopyLayer() should likely implement the more advanced tricks that ogr2ogr.cpp 
uses to do the proprer mapping of field names, even when renames occur.

> 
> Any ideas?
> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Nov 21 14:07:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 21 21:14:35 2011
Subject: [gdal-dev] wms driver and support for more parameters in the URL
	- bug in curl?
In-Reply-To: <CAAZUH4FkTQJyukHEr_LJ8oh3=+dGn82Ys6Ud95itCEDBY=-0Eg@mail.gmail.com>
References: <CAAZUH4FkTQJyukHEr_LJ8oh3=+dGn82Ys6Ud95itCEDBY=-0Eg@mail.gmail.com>
Message-ID: <201111212007.43860.even.rouault@mines-paris.org>

> I try
> 
> gdalwarp in.wms in.tiff
> 
> On my localhost, correst request with all 3 parameters arrives:
> /cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&OWSSERVICE=WMS&OWSURL=http%3A%2F%
> 2Fgeoportal2.uhul.cz%2Fwms_oprl&request=GetMap&version=1.1.1&layers=Lesni_t
> yp&styles=default&srs=EPSG:3035&transparent=TRUE&format=image/png&width=936
> &height=660&bbox=4559666.00000000,2941837.66667000,4566270.00000000,2946494
> .33333000
> 
> But the our server or on other computer with *same* version of GDAL as
> on my localhost, only the *first* one arrives:
> 
>  /cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&service=WMS&request=GetMap&versi
> on=1.1.1&layers=Lesni_typ&styles=default&srs=EPSG:3035&transparent=TRUE&for
> mat=image/png&width=936&height=660&bbox=4559666.00000000,2941837.66667000,4
> 566270.00000000,2946494.33333000
> 
> So, is there some strange bug in GDAL? In some dependence library
> (like curl?) Any other way, how to pass more aditional parameters to
> the server with GDAL as client?

I don't understand the different of behaviour you observe, but the cause of 
your issue is that the URL you put inside <ServerUrl> is not proper XML 
content. You should replace the & characters by &amp;

> 
> Thanks
> 
> Jachym
From brfr at metrico.lu  Tue Nov 22 02:57:09 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Nov 22 10:45:55 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <201111211957.23547.even.rouault@mines-paris.org>
References: <4ECA25F1.8040000@gmail.com>
	<201111211957.23547.even.rouault@mines-paris.org>
Message-ID: <4ECB55D5.7010206@metrico.lu>

Am 21.11.2011 19:57, schrieb Even Rouault:
> Le lundi 21 novembre 2011 11:20:33, Ari Jolma a ?crit :
>> Hi,
>>
>> I'm making a new GML layer from an existing layer. For some reason the
>> CopyLayer method leaves adjusted fields out but CreateField,
>> CreateFeature sequence does not. I guess they should be identical?
>>
>> i.e.
>>
>> my $datasource = Geo::OGR::Open('Pg:...');
>> my $l = $datasource->ExecuteSQL('...');
>> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
>> $gml->CopyLayer($l, 'a');
>>
>> leaves fields like "a b" out, while
>
> I guess it is because the GML driver transforms "a b" into "a_b" to make it a
> valid XML name. But the implementation of CopyLayer() uses SetFrom(), which
> cannot guess that "a b" values from source feature should be mapped to "a_b"
> of target feature.
>
>>
>> my $datasource = Geo::OGR::Open('Pg:...');
>> my $l = $datasource->ExecuteSQL('...');
>> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
>> my $l2 = $gml->CreateLayer('test');
>>
>> my $d = $l->GetLayerDefn;
>> for (0..$d->GetFieldCount-1) {
>>       my $f = $d->GetFieldDefn($_);
>>       $l2->CreateField($f);
>> }
>>
>> $l->ResetReading;
>> while (my $f = $l->GetNextFeature) {
>>       $l2->CreateFeature($f);
>> }
>>
>> works ok (and prints out warnings about the field name adjustments)
>
> Works ok perhaps, but it is potentially risky. You should not use $l2-
>> CreateFeature($f) with $f being a feature that has the feature definition of
> $l and not $l2. That could crash in some situations... You're lucky here that
> it works for you because you have the same number of fields and same type.
>
>>
>> I tried to look into what the CopyLayer method generic driver does
>> differently but could not tell.
>
> CopyLayer() should likely implement the more advanced tricks that ogr2ogr.cpp
> uses to do the proprer mapping of field names, even when renames occur.
>
>>
>> Any ideas?
>>
>> Ari
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Hi,

another thing I noticed while using CopyDataSource, which might be 
related to CopyLayer, that's why I am posting this here: the driver is 
lost, don't know if this is intentional ... see the short code example below

Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
 >>> from osgeo import ogr
 >>> in_ds = ogr.Open('points.shp')
 >>> in_ds.GetDriver()
<osgeo.ogr.Driver; proxy of <Swig Object of type 'OGRDriverShadow *' at 
0x7f919c6f7fc0> >
 >>> in_drv = in_ds.GetDriver()
 >>> out_ds  = in_drv.CopyDataSource(in_ds, 'cp.shp')
 >>> out_ds.GetDriver()
 >>> out_drv = out_ds.GetDriver()
 >>> out_drv is None
True
 >>>

Greetings

Frank



-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Tue Nov 22 07:20:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 22 15:24:00 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <4ECB55D5.7010206@metrico.lu>
References: <4ECA25F1.8040000@gmail.com>
	<201111211957.23547.even.rouault@mines-paris.org>
	<4ECB55D5.7010206@metrico.lu>
Message-ID: <1321964443.4ecb939bf3af2@imp.free.fr>


> Hi,
>
> another thing I noticed while using CopyDataSource, which might be
> related to CopyLayer, that's why I am posting this here: the driver is
> lost, don't know if this is intentional ... see the short code example below

Frank,

No, this is not intentional. CopyDataSource() should assign the driver to the
output dataset. Could you file a ticket about this ?

Thanks,

Even
From ari.jolma at gmail.com  Tue Nov 22 08:06:49 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Nov 22 16:12:31 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <201111211957.23547.even.rouault@mines-paris.org>
References: <4ECA25F1.8040000@gmail.com>
	<201111211957.23547.even.rouault@mines-paris.org>
Message-ID: <4ECB9E69.6050706@gmail.com>

On 11/21/2011 08:57 PM, Even Rouault wrote:
> Le lundi 21 novembre 2011 11:20:33, Ari Jolma a ?crit :
>> Hi,
>>
>> I'm making a new GML layer from an existing layer. For some reason the
>> CopyLayer method leaves adjusted fields out but CreateField,
>> CreateFeature sequence does not. I guess they should be identical?
>>
>> i.e.
>>
>> my $datasource = Geo::OGR::Open('Pg:...');
>> my $l = $datasource->ExecuteSQL('...');
>> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
>> $gml->CopyLayer($l, 'a');
>>
>> leaves fields like "a b" out, while
> I guess it is because the GML driver transforms "a b" into "a_b" to make it a
> valid XML name. But the implementation of CopyLayer() uses SetFrom(), which
> cannot guess that "a b" values from source feature should be mapped to "a_b"
> of target feature.
>
>> my $datasource = Geo::OGR::Open('Pg:...');
>> my $l = $datasource->ExecuteSQL('...');
>> my $gml = Geo::OGR::Driver('GML')->Create('/vsistdout/');
>> my $l2 = $gml->CreateLayer('test');
>>
>> my $d = $l->GetLayerDefn;
>> for (0..$d->GetFieldCount-1) {
>>       my $f = $d->GetFieldDefn($_);
>>       $l2->CreateField($f);
>> }
>>
>> $l->ResetReading;
>> while (my $f = $l->GetNextFeature) {
>>       $l2->CreateFeature($f);
>> }
>>
>> works ok (and prints out warnings about the field name adjustments)
> Works ok perhaps, but it is potentially risky. You should not use $l2-CreateFeature($f) with $f being a feature that has the feature definition of $l and not $l2. That could crash in some situations... You're lucky here that it works for you because you have the same number of fields and same type.

Hm, after some thinking I think the best approach is to construct the 
original SQL to assign XML-valid column names. The same change 
can/should be done in for the WFS DescribeFeature response. The the 
CopyLayer method should work ok (seems so after initial tests).

Cheers,

Ari

From nmayer31000 at gmail.com  Tue Nov 22 10:48:35 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Tue Nov 22 19:03:19 2011
Subject: [gdal-dev] Quality boundaries for JPEG driver
Message-ID: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>

Hello everybody,

I have a question about the JPEG driver.
The documentation says that the quality "must be in the range 10-100".

Must this value be an integer ?
Are the 10 and/or 100 boundaries included in the definition range ?

Thank you in advance
Nicolas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111122/176e0eeb/attachment.html
From Jennings.Jay at geoeye.com  Tue Nov 22 11:22:41 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Tue Nov 22 19:39:36 2011
Subject: [gdal-dev] Making a "hole" in existing image
Message-ID: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>

Hi List,
I'm looking for a slick way, using GDAL utilities, to make a NoData "hole" in an existing image :  I'd like to set value 0 (which is this image's NoData value) for each band of the image within the rectangle denoted by minX, minY, maxX, maxY.  I looked at 'gdal_translate' and 'gdalwarp' but I didn't see any obvious way to get there.

.........................................................
Jay Jennings
Senior Software Developer
GeoEye, Inc. (NASDAQ: GEOY)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111122/938bf9ca/attachment.html
From mateusz at loskot.net  Tue Nov 22 11:30:00 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Nov 22 19:46:26 2011
Subject: [gdal-dev] Quality boundaries for JPEG driver
In-Reply-To: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>
References: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>
Message-ID: <CABUeae-S4K78zKVLgR5Cb3V4t0no0oYtrarVFAAJ2Q6xxFHAbA@mail.gmail.com>

On 22 November 2011 15:48, Nicolas Mayer <nmayer31000@gmail.com> wrote:
> Hello everybody,
>
> I have a question about the JPEG driver.
> The documentation says that the quality "must be in the range 10-100".
>
> Must this value be an integer ?

Yes, quality is a discrete value.

> Are the 10 and/or 100 boundaries included in the definition range ?

Yes, the valid range is [10, 100]

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From chaitanya.ch at gmail.com  Tue Nov 22 11:34:59 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 22 19:51:42 2011
Subject: [gdal-dev] Quality boundaries for JPEG driver
In-Reply-To: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>
References: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>
Message-ID: <CAMKgpOYx21RcZaLdNCiLHYboGUrQdmqScOXQFTn1yXAQ73qA+w@mail.gmail.com>

Nicolas,

The values must be integers. They will be rounded off otherwise. In any
case, the value is just a rough indication.

10 and 100 are included.

On Tue, Nov 22, 2011 at 9:18 PM, Nicolas Mayer <nmayer31000@gmail.com>wrote:

> Hello everybody,
>
> I have a question about the JPEG driver.
> The documentation says that the quality "must be in the range 10-100".
>
> Must this value be an integer ?
> Are the 10 and/or 100 boundaries included in the definition range ?
>
> Thank you in advance
> Nicolas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111122/ab270048/attachment.html
From chaitanya.ch at gmail.com  Tue Nov 22 12:06:40 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 22 20:25:04 2011
Subject: [gdal-dev] Making a "hole" in existing image
In-Reply-To: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>
References: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>
Message-ID: <CAMKgpOas4aww+0u84DFayMJsSMPV5ZW_HdApodrBeOm4kBGQ2A@mail.gmail.com>

Jay,

You can use the VRT format to do this. Create patches of the image
surrounding the hole. Make sure the nodata is set to zero.
Your VRT file should contain four SimpleSource elements for each band.

First create a simple vrt file using gdalbuildvrt, edit it and then use
gdal_translate to create a new file.

http://www.gdal.org/gdalbuildvrt.html
http://www.gdal.org/gdal_vrttut.html

On Tue, Nov 22, 2011 at 9:52 PM, Jay Jennings <Jennings.Jay@geoeye.com>wrote:

>  Hi List,****
>
> I?m looking for a slick way, using GDAL utilities, to make a NoData ?hole?
> in an existing image :  I?d like to set value 0 (which is this image?s
> NoData value) for each band of the image within the rectangle denoted by
> minX, minY, maxX, maxY.  I looked at ?gdal_translate? and ?gdalwarp? but I
> didn?t see any obvious way to get there.****
>
> ** **
>
> .........................................................**
>
> *Jay Jennings***
>
> Senior Software Developer ****
>
> GeoEye, Inc. (NASDAQ: GEOY) ****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111122/1370e43f/attachment-0001.html
From traviskirstine at gmail.com  Tue Nov 22 13:16:25 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue Nov 22 21:38:12 2011
Subject: [gdal-dev] Making a "hole" in existing image
In-Reply-To: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>
References: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>
Message-ID: <CALtm4h1akmT+T7sy=awd+oFWJHqezzfOLom0HAnJMt3ODR3j0Q@mail.gmail.com>

gdal_rasterize can be used to create a hole using a polygon from a
vector datasource.

gdal_rasterize -burn 0 -b 1 -b 2 -b 3 -l my_polygon my_image.tif my_polygon.shp

regards

On 22 November 2011 11:22, Jay Jennings <Jennings.Jay@geoeye.com> wrote:
> Hi List,
>
> I?m looking for a slick way, using GDAL utilities, to make a NoData ?hole?
> in an existing image : ?I?d like to set value 0 (which is this image?s
> NoData value) for each band of the image within the rectangle denoted by
> minX, minY, maxX, maxY.? I looked at ?gdal_translate? and ?gdalwarp? but I
> didn?t see any obvious way to get there.
>
>
>
> .........................................................
>
> Jay Jennings
>
> Senior Software Developer
>
> GeoEye, Inc. (NASDAQ: GEOY)
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Jennings.Jay at geoeye.com  Tue Nov 22 15:01:23 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Tue Nov 22 23:28:36 2011
Subject: [gdal-dev] Making a "hole" in existing image
In-Reply-To: <CALtm4h1akmT+T7sy=awd+oFWJHqezzfOLom0HAnJMt3ODR3j0Q@mail.gmail.com>
References: <ADE7627990BC2E4AB2112FF812FB5C8E07B0FA@EEXCHMB01THN.geoeye.com>
	<CALtm4h1akmT+T7sy=awd+oFWJHqezzfOLom0HAnJMt3ODR3j0Q@mail.gmail.com>
Message-ID: <ADE7627990BC2E4AB2112FF812FB5C8E07B179@EEXCHMB01THN.geoeye.com>

Thanks, that suggestion worked great.  For simplicity, I used KML instead of shapefile, as follows:

gdal_rasterize -burn 0 -b 1 -b 2 -b 3 -l TestLayerName HoleExtent.kml OriginalRGB.tif

And my KML file looks like this, with 'coordinates' in longitude/latitude:

<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document><Folder><name>TestLayerName</name>
  <Placemark>
     <Style><LineStyle><color>ff0000ff</color></LineStyle><PolyStyle><fill>0</fill></PolyStyle></Style>
     <Polygon>
       <outerBoundaryIs>
        <LinearRing>
         <coordinates>-101.00,30.00 -100.00,30.00 -100.00,29.50 -101.00,29.50 -101.00,30.00</coordinates>
        </LinearRing>
       </outerBoundaryIs>
     </Polygon>
  </Placemark>
</Folder></Document>
</kml>


-----Original Message-----
From: Travis Kirstine [mailto:traviskirstine@gmail.com] 
Sent: Tuesday, November 22, 2011 1:16 PM
To: Jay Jennings
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Making a "hole" in existing image

gdal_rasterize can be used to create a hole using a polygon from a
vector datasource.

gdal_rasterize -burn 0 -b 1 -b 2 -b 3 -l my_polygon my_polygon.shp my_image.tif 

regards

On 22 November 2011 11:22, Jay Jennings <Jennings.Jay@geoeye.com> wrote:
> Hi List,
>
> I'm looking for a slick way, using GDAL utilities, to make a NoData "hole"
> in an existing image : ?I'd like to set value 0 (which is this image's
> NoData value) for each band of the image within the rectangle denoted by
> minX, minY, maxX, maxY.? I looked at 'gdal_translate' and 'gdalwarp' but I
> didn't see any obvious way to get there.
>
>
>
> .........................................................
>
> Jay Jennings
>
> Senior Software Developer
>
> GeoEye, Inc. (NASDAQ: GEOY)
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Tue Nov 22 17:57:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 23 02:33:55 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <4ECB9E69.6050706@gmail.com>
References: <4ECA25F1.8040000@gmail.com>
	<201111211957.23547.even.rouault@mines-paris.org>
	<4ECB9E69.6050706@gmail.com>
Message-ID: <201111222357.00641.even.rouault@mines-paris.org>

> 
> Hm, after some thinking I think the best approach is to construct the
> original SQL to assign XML-valid column names. The same change
> can/should be done in for the WFS DescribeFeature response. The the
> CopyLayer method should work ok (seems so after initial tests).

My initial thought was : "let's fix/improve CopyLayer() to deal with field 
renaming as ogr2ogr is able to do". But for your use case, it is clear that 
you want to control precisely what is done, so that GetFeature and 
DescribeFeature are consistant. And it is clear that we might expect 
CopyLayer() to able to do all what ogr2ogr is able to do, which would be a lot 
of long and duplicated efforts.

What follows doesn't directly address your problem, but all the above is an 
opportunity to write down an idea I had mentionned very quickly some time ago 
on IRC. Basically, it would consist in making a library (a new one 
"libgdalutils" or directly integretated in the core GDAL lib) from all the 
source code of our C/C++ utilities that other code could call without spawning 
a process, and benefit from progress callbacks more easily.

So for the case being discussed above, you would have (very rough idea!) the 
following function :

OGRDataSource* GDALUtils_ogr2ogr(const char* pszCommandLine, OGRDataSource* 
inDS, GDALProgressFunc pfnProgress, void* pProgressData);

where the pszCommandLine argument would have the same syntax as the current 
C++ utility, plus some bonuses like being able to pass directly the input 
datasource instead of a real file. In that case, it would be decided as a 
convention that [INDS] would be substituted with the provided inDS argument.

outDS = GDALUtils_ogr2ogr("-f \"GML\" /vsimem/out.gml [INDS] ...", inDS, NULL, 
NULL)

Several advantages :
* You can operate on in-memory datasources.
* Such an approach would also be quite suited to be easily incorporated to our 
python/java/c#/perl bindings.
* Generally, new options could be added to utilities without affecting the API 
(but perhaps we have already too many options!). But if you want to add new 
"[MAGIC_KEY]" options, you have a problem. Not sure there's a perfect solution 
for that. A workaround I had imagined would consist in passing a list of 
strings like "INDS=0x12345678" where 0x1234578 is a pointer to the datasource. 
But this approach it quite unsafe and unusual (although we have a precedant 
with http://gdal.org/frmt_mem.html ), and not easily usable by binding 
languages. 

As I said, this is a rough idea that has likely a few shortcomings. But I feel 
(perhaps that's just my own imagination) there's often a need for integrating 
the capabilities of the current set of utilities into more complex processes. 
You generally don't want to :
* reinvent the wheel and copy the source of the utility into your own code. 
Which admitedly can be a non trivial task for people not very familiar with 
the GDAL/OGR API, and not necessarily feasable for integration into binding 
languages as some part of the C++ API are not mapped (*)
* or spawn an external process, for various reasons : no progress bar, no way 
of managing transient data you only want in memory, you need to make sure that 
PATH is correctly set up, etc ... (On the other hand, in some scenarios, an 
external process is a must if you want to be able to stop something that goes 
out of control without bringing down the whole app...)

Best regards,

Even


(*) For example, some key parts of gdal_translate.cpp directly call specific 
methods of the implementation of VRT driver, so it makes it impossible to 
transpose it directly to non-C++ code.

On the other hand, you can actually reimplement 99% of ogr2ogr in other 
languages, like the swig/python/samples/ogr2ogr.py exercice. But this is more 
a way of testing and checking the completness and good working of the swig 
bindings. And a bit of a joke too : you can merely open the ogr2ogr.cpp and 
ogr2ogr.py side by side and merge code between them. See disclaimer at the 
beginning of the code ;-)
From warmerdam at pobox.com  Wed Nov 23 01:53:02 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 23 10:56:36 2011
Subject: [gdal-dev] ogr.Feature field access
Message-ID: <4ECC984E.3010409@pobox.com>

Folks,

Tonight I have made some changes to the OGR Python bindings such that
there is a SetField2() method that tries to support a wider variety of
value types that can be assigned to a field, including the list types.

I also implemented __setattr__, __getitem__ and __setitem__ so that you
can do things like:

   feat.area = 123
   feat['area'] = 123
   print feat['area']

Note that __getattr__ was already implemented so you could already use
feat.area if there was a field called 'area'.

I did the new accessors mostly so that I can have them call SetField2()
and take advantage of the new value semantics in a clean way.  With this
is it now possible to do something like:

   feat.my_list_field = [1,2,3]

assuming 'my_list_field' is a field of type ogr.OFTInteger.

I have also added a new test file (autotest/ogr/ogr_feature.py) that checks
how different types of field values are assigned by SetFrom().  This is
preliminary to my trying to improve how the C++ OGRFeature::SetFrom() method
assigns between different field types. I want to improve it so that some
obvious things are possible.  For instance assigning an integer to an
integer list should create a one length list.

This work will likely take me a while.  Even - I know you could leap out
and finish that work before wake up, but I'd appreciate it if you could give
me a couple weeks to do it at my pace. :-)

Feedback on whether the Python changes are causing problems or are expected
to are welcome.  They are:

   http://trac.osgeo.org/gdal/changeset/23416
   http://trac.osgeo.org/gdal/changeset/23417

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From nmayer31000 at gmail.com  Wed Nov 23 02:40:18 2011
From: nmayer31000 at gmail.com (Nicolas Mayer)
Date: Wed Nov 23 11:46:46 2011
Subject: [gdal-dev] Quality boundaries for JPEG driver
In-Reply-To: <CAMKgpOYx21RcZaLdNCiLHYboGUrQdmqScOXQFTn1yXAQ73qA+w@mail.gmail.com>
References: <CABd8C-BTbd9tSQgSRDp+Hm=xQ033Qc9u2upvFPTLXDb+B2kyjw@mail.gmail.com>
	<CAMKgpOYx21RcZaLdNCiLHYboGUrQdmqScOXQFTn1yXAQ73qA+w@mail.gmail.com>
Message-ID: <CABd8C-CcN=dmWyOE-M86TAZubLnqs+iX4fcq_1hno2DXPq3ueA@mail.gmail.com>

Thanks a lot for your answers.
Nicolas


2011/11/22 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Nicolas,
>
> The values must be integers. They will be rounded off otherwise. In any
> case, the value is just a rough indication.
>
> 10 and 100 are included.
>
> On Tue, Nov 22, 2011 at 9:18 PM, Nicolas Mayer <nmayer31000@gmail.com>wrote:
>
>> Hello everybody,
>>
>> I have a question about the JPEG driver.
>> The documentation says that the quality "must be in the range 10-100".
>>
>> Must this value be an integer ?
>> Are the 10 and/or 100 boundaries included in the definition range ?
>>
>> Thank you in advance
>> Nicolas
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111123/7f46b097/attachment.html
From francesco.pirotti at unipd.it  Wed Nov 23 08:00:31 2011
From: francesco.pirotti at unipd.it (francesco)
Date: Wed Nov 23 17:32:34 2011
Subject: [gdal-dev] esri hdr format header
Message-ID: <4ECCEE6F.2040307@unipd.it>

Hello,
I looked all day for information regarding the following problem, but 
found none, so maybe the list can give me a hand:

When using GDAL C API reading and writing ESRI hdr files (floating point 
binaries), the output header is very different from the header of the 
input file (see examples below).
 From GDAL documentation ESRI files should be written using the first 
header example.  Am I missing some very obvious thing here? -Problem is 
that some GIS programs do not recognize the header in output from GDAL.
Thank you for you time!
Cheers,
Francesco Pirotti

Header in INPUT:
ncols         2000
nrows         2000
xllcorner     424000
yllcorner     4550000
cellsize      1
NODATA_value  -9999
byteorder     LSBFIRST
NODATA         -9999

Header in OUTPUT:

    BYTEORDER      I
    LAYOUT         BIL
    NROWS          2000
    NCOLS          2000
    NBANDS         1
    NBITS          32
    BANDROWBYTES   8000
    TOTALROWBYTES  8000
    PIXELTYPE      FLOAT
    ULXMAP         424000.5
    ULYMAP         4551999.5
    XDIM           1
    YDIM           1
    NODATA         -9999



-- 
**************************************************
*Francesco Pirotti*
Dep. TESAF
CIRGEO -- Interdepartmental Research Center on Cartography Photogrammetry
Remote Sensing and G.I.S.
University of Padova
Web: http://www.cirgeo.unipd.it/cirgeo/francescopirotti.htm
Email: francesco.pirotti@unipd.it <mailto:francesco.pirotti@unipd.it>
Work Phone: +39 049 827 2710
Work Cell.: +39 392 395 2067
**************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111123/e5e64662/attachment.html
From traviskirstine at gmail.com  Wed Nov 23 10:01:40 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Nov 23 19:32:07 2011
Subject: [gdal-dev] esri hdr format header
In-Reply-To: <4ECCEE6F.2040307@unipd.it>
References: <4ECCEE6F.2040307@unipd.it>
Message-ID: <CALtm4h3zUcFOgb4c=DjMFTaPp7D3XDGnRVSO7ddov__YzYJUeA@mail.gmail.com>

Francesco

Information regarding the format can be found under the EHdr -- ESRI
.hdr Labelled section in

http://www.gdal.org/frmt_various.html

We have had issues inhouse dealing with hdr files - you must add the
nbits / pixeltype to the correctly read the files with GDAL.  The only
solution that we have found to deal with GDAL created hdr files is to
parse out values that are causing problems.

It is my recollection that most GIS applications can read hdr files
created by GDAL including most versions of ArcGIS




On 23 November 2011 08:00, francesco <francesco.pirotti@unipd.it> wrote:
> Hello,
> I looked all day for information regarding the following problem, but found
> none, so maybe the list can give me a hand:
>
> When using GDAL C API reading and writing ESRI hdr files (floating point
> binaries), the output header is very different from the header of the input
> file (see examples below).
> From GDAL documentation ESRI files should be written using the first header
> example.? Am I missing some very obvious thing here? -Problem is that some
> GIS programs do not recognize the header in output from GDAL.
> Thank you for you time!
> Cheers,
> Francesco Pirotti
>
> Header in INPUT:
> ncols???????? 2000
> nrows???????? 2000
> xllcorner???? 424000
> yllcorner???? 4550000
> cellsize????? 1
> NODATA_value? -9999
> byteorder???? LSBFIRST
> NODATA???????? -9999
>
> Header in OUTPUT:
>
> BYTEORDER????? I
> LAYOUT???????? BIL
> NROWS????????? 2000
> NCOLS????????? 2000
> NBANDS???????? 1
> NBITS????????? 32
> BANDROWBYTES?? 8000
> TOTALROWBYTES? 8000
> PIXELTYPE????? FLOAT
> ULXMAP???????? 424000.5
> ULYMAP???????? 4551999.5
> XDIM?????????? 1
> YDIM?????????? 1
> NODATA???????? -9999
>
>
> --
> **************************************************
> Francesco Pirotti
> Dep. TESAF
> CIRGEO ? Interdepartmental Research Center on Cartography Photogrammetry
> Remote Sensing and G.I.S.
> University of Padova
> Web: http://www.cirgeo.unipd.it/cirgeo/francescopirotti.htm
> Email: francesco.pirotti@unipd.it
> Work Phone: +39 049 827 2710
> Work Cell.: +39 392 395 2067
> **************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ari.jolma at gmail.com  Wed Nov 23 13:28:56 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Nov 23 23:10:29 2011
Subject: [gdal-dev] CopyLayer oddity using GML driver
In-Reply-To: <201111222357.00641.even.rouault@mines-paris.org>
References: <4ECA25F1.8040000@gmail.com>
	<201111211957.23547.even.rouault@mines-paris.org>
	<4ECB9E69.6050706@gmail.com>
	<201111222357.00641.even.rouault@mines-paris.org>
Message-ID: <4ECD3B68.8020509@gmail.com>

In general, from my point-of-view limiting the growth of utility code, 
which is not available to bindings, or making some of that code 
available to bindings is a good thing.

Ari

On 11/23/2011 12:57 AM, Even Rouault wrote:
>> Hm, after some thinking I think the best approach is to construct the
>> original SQL to assign XML-valid column names. The same change
>> can/should be done in for the WFS DescribeFeature response. The the
>> CopyLayer method should work ok (seems so after initial tests).
> My initial thought was : "let's fix/improve CopyLayer() to deal with field
> renaming as ogr2ogr is able to do". But for your use case, it is clear that
> you want to control precisely what is done, so that GetFeature and
> DescribeFeature are consistant. And it is clear that we might expect
> CopyLayer() to able to do all what ogr2ogr is able to do, which would be a lot
> of long and duplicated efforts.
>
> What follows doesn't directly address your problem, but all the above is an
> opportunity to write down an idea I had mentionned very quickly some time ago
> on IRC. Basically, it would consist in making a library (a new one
> "libgdalutils" or directly integretated in the core GDAL lib) from all the
> source code of our C/C++ utilities that other code could call without spawning
> a process, and benefit from progress callbacks more easily.
>
> So for the case being discussed above, you would have (very rough idea!) the
> following function :
>
> OGRDataSource* GDALUtils_ogr2ogr(const char* pszCommandLine, OGRDataSource*
> inDS, GDALProgressFunc pfnProgress, void* pProgressData);
>
> where the pszCommandLine argument would have the same syntax as the current
> C++ utility, plus some bonuses like being able to pass directly the input
> datasource instead of a real file. In that case, it would be decided as a
> convention that [INDS] would be substituted with the provided inDS argument.
>
> outDS = GDALUtils_ogr2ogr("-f \"GML\" /vsimem/out.gml [INDS] ...", inDS, NULL,
> NULL)
>
> Several advantages :
> * You can operate on in-memory datasources.
> * Such an approach would also be quite suited to be easily incorporated to our
> python/java/c#/perl bindings.
> * Generally, new options could be added to utilities without affecting the API
> (but perhaps we have already too many options!). But if you want to add new
> "[MAGIC_KEY]" options, you have a problem. Not sure there's a perfect solution
> for that. A workaround I had imagined would consist in passing a list of
> strings like "INDS=0x12345678" where 0x1234578 is a pointer to the datasource.
> But this approach it quite unsafe and unusual (although we have a precedant
> with http://gdal.org/frmt_mem.html ), and not easily usable by binding
> languages.
>
> As I said, this is a rough idea that has likely a few shortcomings. But I feel
> (perhaps that's just my own imagination) there's often a need for integrating
> the capabilities of the current set of utilities into more complex processes.
> You generally don't want to :
> * reinvent the wheel and copy the source of the utility into your own code.
> Which admitedly can be a non trivial task for people not very familiar with
> the GDAL/OGR API, and not necessarily feasable for integration into binding
> languages as some part of the C++ API are not mapped (*)
> * or spawn an external process, for various reasons : no progress bar, no way
> of managing transient data you only want in memory, you need to make sure that
> PATH is correctly set up, etc ... (On the other hand, in some scenarios, an
> external process is a must if you want to be able to stop something that goes
> out of control without bringing down the whole app...)
>
> Best regards,
>
> Even
>
>
> (*) For example, some key parts of gdal_translate.cpp directly call specific
> methods of the implementation of VRT driver, so it makes it impossible to
> transpose it directly to non-C++ code.
>
> On the other hand, you can actually reimplement 99% of ogr2ogr in other
> languages, like the swig/python/samples/ogr2ogr.py exercice. But this is more
> a way of testing and checking the completness and good working of the swig
> bindings. And a bit of a joke too : you can merely open the ogr2ogr.cpp and
> ogr2ogr.py side by side and merge code between them. See disclaimer at the
> beginning of the code ;-)

From ari.jolma at gmail.com  Wed Nov 23 13:33:12 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Nov 23 23:14:49 2011
Subject: [gdal-dev] ogr.Feature field access
In-Reply-To: <4ECC984E.3010409@pobox.com>
References: <4ECC984E.3010409@pobox.com>
Message-ID: <4ECD3C68.2080702@gmail.com>

On 11/23/2011 08:53 AM, Frank Warmerdam wrote:
> Folks,
>
> Tonight I have made some changes to the OGR Python bindings such that
> there is a SetField2() method that tries to support a wider variety of
> value types that can be assigned to a field, including the list types.
>
> I also implemented __setattr__, __getitem__ and __setitem__ so that you
> can do things like:
>
>   feat.area = 123
>   feat['area'] = 123
>   print feat['area']
>
> Note that __getattr__ was already implemented so you could already use
> feat.area if there was a field called 'area'.
>
> I did the new accessors mostly so that I can have them call SetField2()
> and take advantage of the new value semantics in a clean way.  With this
> is it now possible to do something like:
>
>   feat.my_list_field = [1,2,3]
>
> assuming 'my_list_field' is a field of type ogr.OFTInteger.

Interesting. This kind of access to various types of attributes has been 
in Perl bindings (SetField/GetField or simply Field methods) a long 
time. I just added the support for FETCH and STORE, i.e., 
$feature->{field} syntax - which is not as pretty as Python's but is 
useful in some cases.

Ari

>
> I have also added a new test file (autotest/ogr/ogr_feature.py) that 
> checks
> how different types of field values are assigned by SetFrom().  This is
> preliminary to my trying to improve how the C++ OGRFeature::SetFrom() 
> method
> assigns between different field types. I want to improve it so that some
> obvious things are possible.  For instance assigning an integer to an
> integer list should create a one length list.
>
> This work will likely take me a while.  Even - I know you could leap out
> and finish that work before wake up, but I'd appreciate it if you 
> could give
> me a couple weeks to do it at my pace. :-)
>
> Feedback on whether the Python changes are causing problems or are 
> expected
> to are welcome.  They are:
>
>   http://trac.osgeo.org/gdal/changeset/23416
>   http://trac.osgeo.org/gdal/changeset/23417
>
> Best regards,

From jdmorgan at unca.edu  Wed Nov 23 15:02:10 2011
From: jdmorgan at unca.edu (jdmorgan)
Date: Thu Nov 24 00:57:06 2011
Subject: [gdal-dev] Getting data values from a first GeoTIFF and do some map
 algebra type operations with a second GeoTIFF
Message-ID: <4ECD5142.6060907@gmail.com>

Hello,

I am new to GDAL and raster programming in general and hoping that I can 
get some guidance. I have GeoTIFF which are projected in WGS84 and a 
single band.I am trying to start simply with the concept of getting out 
the data values from the GeoTIFF from one file so that I compare them to 
another.However, I am a bit stuck at the point of getting out data 
values from a first GeoTIFF and do some map algebra type operations with 
a second GeoTIFF.Here is what I have so far:

from osgeo import gdal, gdalconst

import os, sys, time

import numpy

ds = gdal.Open('C:\\Data\\GIS\\python\\gdal\\CMIP3-tb1_2021_2050.tif', 
gdal.GA_ReadOnly)

cols = ds.RasterXSize

rows = ds.RasterYSize

bands = ds.RasterCount

print cols, rows, bands

gdal.AllRegister()

gt = ds.GetGeoTransform()

print gt

xOrigin = gt[0]

yOrigin = gt[3]

pixWidth = gt[1]

print "pixWidth " + str(pixWidth)

pixHeight = gt[5]

print "pixHeight " + str(pixHeight)

for r in range(rows):

data = ds.GetRasterBand(1).ReadAsArray(0, r, cols, 1)

print str(data)

Is this the correct way to be going about this?Any guidance or best 
practices/algorithms would be greatly appreciated.

Thanks,

Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111123/0ae28142/attachment-0001.html
From traviskirstine at gmail.com  Wed Nov 23 15:35:24 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu Nov 24 01:23:47 2011
Subject: [gdal-dev] Getting data values from a first GeoTIFF and do some
	map algebra type operations with a second GeoTIFF
In-Reply-To: <4ECD5142.6060907@gmail.com>
References: <4ECD5142.6060907@gmail.com>
Message-ID: <CALtm4h3545LyyDNggOqiScDZ=DY5=dcRb=a7BX52F2eCWy=rMQ@mail.gmail.com>

Have you looked at the samples at:
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/

The val_repl.py script show how to utilize numpy with gdal


On 23 November 2011 15:02, jdmorgan <jdmorgan@unca.edu> wrote:
> Hello,
>
> I am new to GDAL and raster programming in general and hoping that I can get
> some guidance. I have GeoTIFF which are projected in WGS84 and a single
> band.? I am trying to start simply with the concept of getting out the data
> values from the GeoTIFF from one file so that I compare them to another.
> However, I am a bit stuck at the point of getting out data values from a
> first GeoTIFF and do some map algebra type operations with a second
> GeoTIFF.? Here is what I have so far:
>
> from osgeo import gdal, gdalconst
>
> import os, sys, time
>
> import numpy
>
> ds = gdal.Open('C:\\Data\\GIS\\python\\gdal\\CMIP3-tb1_2021_2050.tif',
> gdal.GA_ReadOnly)
>
> cols = ds.RasterXSize
>
> rows = ds.RasterYSize
>
> bands = ds.RasterCount
>
> print cols, rows, bands
>
> gdal.AllRegister()
>
> gt = ds.GetGeoTransform()
>
> print gt
>
> xOrigin = gt[0]
>
> yOrigin = gt[3]
>
> pixWidth = gt[1]
>
> print "pixWidth " + str(pixWidth)
>
> pixHeight = gt[5]
>
> print "pixHeight " + str(pixHeight)
>
> for r in range(rows):
>
> ????????????? data = ds.GetRasterBand(1).ReadAsArray(0, r, cols, 1)
>
> ????????????? print str(data)
>
>
>
> Is this the correct way to be going about this?? Any guidance or best
> practices/algorithms would be greatly appreciated.
>
>
>
> Thanks,
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jluis at ualg.pt  Wed Nov 23 15:48:04 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Nov 24 01:38:53 2011
Subject: [gdal-dev] Getting data values from a first GeoTIFF and do some
	map algebra type operations with a second GeoTIFF
In-Reply-To: <4ECD5142.6060907@gmail.com>
References: <4ECD5142.6060907@gmail.com>
Message-ID: <4ECD5C04.3030508@ualg.pt>

Derek,

These are the type of operations that I recommend GMT (built with GDAL 
off course). With GMT5 ii as simple as

grd2xyz yourGeotiff > outfile

this saves  x,y,z triplets. Add -ZTLa to write only the z values (many 
other options available)

Joaquim

> Hello,
>
> I am new to GDAL and raster programming in general and hoping that I 
> can get some guidance. I have GeoTIFF which are projected in WGS84 and 
> a single band.I am trying to start simply with the concept of getting 
> out the data values from the GeoTIFF from one file so that I compare 
> them to another.However, I am a bit stuck at the point of getting out 
> data values from a first GeoTIFF and do some map algebra type 
> operations with a second GeoTIFF.Here is what I have so far:
>
> from osgeo import gdal, gdalconst
>
> import os, sys, time
>
> import numpy
>
> ds = gdal.Open('C:\\Data\\GIS\\python\\gdal\\CMIP3-tb1_2021_2050.tif', 
> gdal.GA_ReadOnly)
>
> cols = ds.RasterXSize
>
> rows = ds.RasterYSize
>
> bands = ds.RasterCount
>
> print cols, rows, bands
>
> gdal.AllRegister()
>
> gt = ds.GetGeoTransform()
>
> print gt
>
> xOrigin = gt[0]
>
> yOrigin = gt[3]
>
> pixWidth = gt[1]
>
> print "pixWidth " + str(pixWidth)
>
> pixHeight = gt[5]
>
> print "pixHeight " + str(pixHeight)
>
> for r in range(rows):
>
> data = ds.GetRasterBand(1).ReadAsArray(0, r, cols, 1)
>
> print str(data)
>
> Is this the correct way to be going about this?Any guidance or best 
> practices/algorithms would be greatly appreciated.
>
> Thanks,
>
> Derek
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111123/3ce45d4e/attachment-0001.html
From even.rouault at mines-paris.org  Thu Nov 24 16:47:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 25 03:57:29 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant with
	other SQL implementations ?
Message-ID: <201111242247.05114.even.rouault@mines-paris.org>

Hi,

The implementation of the OGR SQL SUBSTR(string, offset[, length]) function 
considers that the character offset is like the convention of the C language, 
that is to say that the first character is offset 0, the second one is offset 1, 
etc... All other SQL implementations I've found consider 1 as the first 
character, 2 as the second one.

For details and patch, see http://trac.osgeo.org/gdal/ticket/4348

The only reason I'm reporting publicly here is that fixing that could break 
existing applications/scripts. The risk seems limited however because this 
function was introduced in 1.8.0 and happens not to be documented in 
http://gdal.org/ogr/ogr_sql.html

So I think I'll apply the fix in trunk, and likely in 1.8 branch too. With a 
notice in the backward compatibility section of the NEWS file.

Even
From hobu.inc at gmail.com  Thu Nov 24 16:50:36 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Nov 25 04:01:12 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant with
	other SQL implementations ?
In-Reply-To: <201111242247.05114.even.rouault@mines-paris.org>
References: <201111242247.05114.even.rouault@mines-paris.org>
Message-ID: <F1C76B32-A195-4F40-9533-FC70A809936D@gmail.com>



On Nov 24, 2011, at 3:47 PM, Even Rouault <even.rouault@mines-paris.org> wrote:

> Hi,
> 
> The implementation of the OGR SQL SUBSTR(string, offset[, length]) function 
> considers that the character offset is like the convention of the C language, 
> that is to say that the first character is offset 0, the second one is offset 1, 
> etc... All other SQL implementations I've found consider 1 as the first 
> character, 2 as the second one.
> 
> For details and patch, see http://trac.osgeo.org/gdal/ticket/4348
> 
> The only reason I'm reporting publicly here is that fixing that could break 
> existing applications/scripts. The risk seems limited however because this 
> function was introduced in 1.8.0 and happens not to be documented in 
> http://gdal.org/ogr/ogr_sql.html
> 
> So I think I'll apply the fix in trunk, and likely in 1.8 branch too. With a 
> notice in the backward compatibility section of the NEWS file.
> 

+1 to fixing it to be conformant.

Howard
From dmorissette at mapgears.com  Thu Nov 24 17:15:45 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Nov 25 04:33:43 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant
	with	other SQL implementations ?
In-Reply-To: <201111242247.05114.even.rouault@mines-paris.org>
References: <201111242247.05114.even.rouault@mines-paris.org>
Message-ID: <4ECEC211.3050907@mapgears.com>

On 11-11-24 04:47 PM, Even Rouault wrote:
> Hi,
>
> The implementation of the OGR SQL SUBSTR(string, offset[, length]) function
> considers that the character offset is like the convention of the C language,
> that is to say that the first character is offset 0, the second one is offset 1,
> etc... All other SQL implementations I've found consider 1 as the first
> character, 2 as the second one.
>
> For details and patch, see http://trac.osgeo.org/gdal/ticket/4348
>
> The only reason I'm reporting publicly here is that fixing that could break
> existing applications/scripts. The risk seems limited however because this
> function was introduced in 1.8.0 and happens not to be documented in
> http://gdal.org/ogr/ogr_sql.html
>
> So I think I'll apply the fix in trunk, and likely in 1.8 branch too. With a
> notice in the backward compatibility section of the NEWS file.
>

No objection here since this seems to be better than carrying an 
incompatibility for ever.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From etourigny.dev at gmail.com  Thu Nov 24 17:28:43 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Nov 25 04:41:14 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant with
	other SQL implementations ?
In-Reply-To: <4ECEC211.3050907@mapgears.com>
References: <201111242247.05114.even.rouault@mines-paris.org>
	<4ECEC211.3050907@mapgears.com>
Message-ID: <CA+TxYvO5crdB+O4BnE7qnHrYF1pE4g1ShE9DtFs+6qDbe0zKqg@mail.gmail.com>

+1, but maybe add a short note in the ogr sql doc ?

On Thu, Nov 24, 2011 at 8:15 PM, Daniel Morissette
<dmorissette@mapgears.com> wrote:
> On 11-11-24 04:47 PM, Even Rouault wrote:
>>
>> Hi,
>>
>> The implementation of the OGR SQL SUBSTR(string, offset[, length])
>> function
>> considers that the character offset is like the convention of the C
>> language,
>> that is to say that the first character is offset 0, the second one is
>> offset 1,
>> etc... All other SQL implementations I've found consider 1 as the first
>> character, 2 as the second one.
>>
>> For details and patch, see http://trac.osgeo.org/gdal/ticket/4348
>>
>> The only reason I'm reporting publicly here is that fixing that could
>> break
>> existing applications/scripts. The risk seems limited however because this
>> function was introduced in 1.8.0 and happens not to be documented in
>> http://gdal.org/ogr/ogr_sql.html
>>
>> So I think I'll apply the fix in trunk, and likely in 1.8 branch too. With
>> a
>> notice in the backward compatibility section of the NEWS file.
>>
>
> No objection here since this seems to be better than carrying an
> incompatibility for ever.
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Thu Nov 24 17:34:07 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 25 04:46:59 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant with
	other SQL implementations ?
In-Reply-To: <CA+TxYvO5crdB+O4BnE7qnHrYF1pE4g1ShE9DtFs+6qDbe0zKqg@mail.gmail.com>
References: <201111242247.05114.even.rouault@mines-paris.org>
	<4ECEC211.3050907@mapgears.com>
	<CA+TxYvO5crdB+O4BnE7qnHrYF1pE4g1ShE9DtFs+6qDbe0zKqg@mail.gmail.com>
Message-ID: <201111242334.07618.even.rouault@mines-paris.org>

Le jeudi 24 novembre 2011 23:28:43, Etienne Tourigny a ?crit :
> +1, but maybe add a short note in the ogr sql doc ?
> 

I think I'll just document the correct behaviour, and overall the existence of 
the function itself. I don't think it is worth documenting ... the old 
undocumented behaviour ;-)
From tappenbeck at widemann.de  Fri Nov 25 05:49:00 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Nov 25 17:42:21 2011
Subject: [gdal-dev] Problems with transform raster image - try again !
In-Reply-To: <CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
References: <4EA6896D.8090603@widemann.de>	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>	<4EAEBA15.3020302@tappenbeck.net>	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
Message-ID: <4ECF729C.1070208@widemann.de>



HI !

i try my translation in use of an other tif-source files!

here even in the tif-header are informations about the reference - worst 
coordintes:

C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
"D:\City\raster\gas\500\g8746-1_
cit.tif"
Driver: GTiff/GeoTIFF
Files: D:\City\raster\gas\500\g8746-1_cit.tif
Size is 16215, 8904
Coordinate System is `'
Origin = (-948545665.889520530000000,-1021132473.110479500000000)
Pixel Size = (3209.779041131308100,-3209.779041131308100)
Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-948545665.890,-1021132473.110)
Lower Left  (-948545665.890,-1049712345.693)
Upper Right (-896499098.738,-1021132473.110)
Lower Right (-896499098.738,-1049712345.693)
Center      (-922522382.314,-1035422409.402)
Band 1 Block=16215x1 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 255,255,255,255


i create following twf-file manuell:

0.032098
0.000000
0.000000
-0.032098
2586989.395890
5746263.495720


but when i now try to translate by

C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:31466 -t_srs 
EPSG:25832 "D:\City\raster\gas\500\g8746-1_cit.tif" 
"D:\City\raster\gas\500\g8746-1_cit_epsg_utm.tif"

i get following message:

Copying color table from D:\City\raster\gas\500\g8746-1_cit.tif to new file.
Creating output file that is 0P x 0L.
ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger 
than zero
.

did anyone / you have a idea how to translate successfully?

alternative to edit the coordinates manuell in the tif-file?

it is very important for me.

reagrads Jan :-)

From traviskirstine at gmail.com  Fri Nov 25 09:16:54 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Nov 25 21:21:19 2011
Subject: [gdal-dev] Problems with transform raster image - try again !
In-Reply-To: <4ECF729C.1070208@widemann.de>
References: <4EA6896D.8090603@widemann.de>
	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>
	<4EAEBA15.3020302@tappenbeck.net>
	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>
	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4ECF729C.1070208@widemann.de>
Message-ID: <CALtm4h3FBoSKLW7G_d2cm78Q7VrTKSXeTe_6j+E3n69VS4Hhrw@mail.gmail.com>

Jan,

Something does not look right with the coordinates / bbox of the
source g8746-1_cit.tif file.

Data should be within the DHDN / 3-degree Gauss-Kruger zone 2 bbox
2490547.1867, 5440321.7879, 2609576.6008, 5958700.0208

The gdalinfo indicates that dataset bbox is
-948545665.890,-1049712345.693, -896499098.738,-1021132473.110.

Are you trying to override the internal header values using the tfw?

My guess is that when you run the gdalwarp it tries to transform the
data using the bogus coordinates resulting in a error.

If you know that the coordinates / pixel size is correct in the tfw I
would strip out the header values by creating a new file.

gdal_translate -of GTiff -co PROFILE=BASELINE -co TFW=YES
g8746-1_cit.tif baseline.tif

This command will generate a tiff with no coordinate information
within the tif header along with a new "baseline.tfw" worldfile.  You
then can edit this worldfile using the values you had indicated.  You
then can try warping this file.

Good Luck







On 25 November 2011 05:49, Jan Tappenbeck <tappenbeck@widemann.de> wrote:
>
>
> HI !
>
> i try my translation in use of an other tif-source files!
>
> here even in the tif-header are informations about the reference - worst
> coordintes:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo
> "D:\City\raster\gas\500\g8746-1_
> cit.tif"
> Driver: GTiff/GeoTIFF
> Files: D:\City\raster\gas\500\g8746-1_cit.tif
> Size is 16215, 8904
> Coordinate System is `'
> Origin = (-948545665.889520530000000,-1021132473.110479500000000)
> Pixel Size = (3209.779041131308100,-3209.779041131308100)
> Image Structure Metadata:
> ?COMPRESSION=LZW
> ?INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left ?(-948545665.890,-1021132473.110)
> Lower Left ?(-948545665.890,-1049712345.693)
> Upper Right (-896499098.738,-1021132473.110)
> Lower Right (-896499098.738,-1049712345.693)
> Center ? ? ?(-922522382.314,-1035422409.402)
> Band 1 Block=16215x1 Type=Byte, ColorInterp=Palette
> ?Color Table (RGB with 256 entries)
> ? ?0: 255,255,255,255
>
>
> i create following twf-file manuell:
>
> 0.032098
> 0.000000
> 0.000000
> -0.032098
> 2586989.395890
> 5746263.495720
>
>
> but when i now try to translate by
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:31466 -t_srs
> EPSG:25832 "D:\City\raster\gas\500\g8746-1_cit.tif"
> "D:\City\raster\gas\500\g8746-1_cit_epsg_utm.tif"
>
> i get following message:
>
> Copying color table from D:\City\raster\gas\500\g8746-1_cit.tif to new file.
> Creating output file that is 0P x 0L.
> ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger than
> zero
> .
>
> did anyone / you have a idea how to translate successfully?
>
> alternative to edit the coordinates manuell in the tif-file?
>
> it is very important for me.
>
> reagrads Jan :-)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From mike at stamen.com  Fri Nov 25 14:22:57 2011
From: mike at stamen.com (Michal Migurski)
Date: Sat Nov 26 02:43:45 2011
Subject: [gdal-dev] Re: Bug? Gdalwarp produces images with dark blocks at
	certain scale
In-Reply-To: <D8E5A684-ABD1-4420-B039-2D4A8CA0A8FA@stamen.com>
References: <D8E5A684-ABD1-4420-B039-2D4A8CA0A8FA@stamen.com>
Message-ID: <9AAB6E98-12FC-41C2-A0FD-BB462203C2CC@stamen.com>

(neglected to include one link below)

On Nov 25, 2011, at 11:20 AM, Michal Migurski wrote:

> When I convert the VRT to tiles using GDAL's python bindings, I get darkened tiles but only at one specific scale that's close to the original scale of the image. The output looks like this at zoom=7:
> 	http://mike.teczno.com/img/gdalwarp-darkness/landcover-tiles.jpg

Here is the Python code:
	https://github.com/migurski/TileStache/blob/master/TileStache/Goodies/Providers/GDAL.py#L54

-mike.

----------------------------------------------------------------
michal migurski- mike@stamen.com
                 415.558.1610



From mike at stamen.com  Fri Nov 25 14:20:56 2011
From: mike at stamen.com (Michal Migurski)
Date: Sat Nov 26 03:10:18 2011
Subject: [gdal-dev] Bug? Gdalwarp produces images with dark blocks at
	certain scale
Message-ID: <D8E5A684-ABD1-4420-B039-2D4A8CA0A8FA@stamen.com>

I think I'm experiencing a gdalwarp bug. Maybe two gdal bugs? Dark-colored blocks and misregistered output from a VRT with about a dozen or so ground control points. The problem looks like this:
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-1km-merc-z7.jpg
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-tiles.jpg

Sample files linked below.

Possible Bug #1: Dark blocks in gdalwarp output.

I have a TIFF of landcover for North America, downloaded from nationalatlas.gov. The original is in a Lambert projection that's slightly off by a few km and I need it in spherical mercator for tiling, so I've created a VRT file with ground control points expressed in the projection of the original.

Original data from here:
	http://nationalatlas.gov/mld/landcvi.html

Both of my files linked here:
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-1km-rgb.tif (8MB TIFF)
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-1km-to-merc.vrt

When I convert the VRT to tiles using GDAL's python bindings, I get darkened tiles but only at one specific scale that's close to the original scale of the image. The output looks like this at zoom=7:
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-tiles.jpg

The color in the top-left corner of the image is correct, while the color in the bottom right corner of the image is darkened but fades out to normal as you pan south and east. If you zoom out to z6 or in to z8, the problem disappears - it exists *only* at z7, a scale very close to the native scale of the source image.

I thought that I could get around all this by pre-projecting the image in one shot to a spherical mercator TIFF and then having the tiles cut from that image. When I warp it to an image at zoom=7, the dark, block-shaped areas appear again:
	http://mike.teczno.com/img/gdalwarp-darkness/landcover-1km-merc-z7.jpg

Warping to z8 or z6 does not show this problem.

I used these commands to do the warp:
	gdalwarp -t_srs EPSG:900913 -te -18701674 2264982 -5788613 10750786 -tr 1222.992 1222.992 -r cubicspline -tps   landcover-1km-to-merc.vrt   z7.tif
	gdalwarp -t_srs EPSG:900913 -te -18701674 2264982 -5788613 10750786 -tr 611.496 611.496 -r cubicspline -tps   landcover-1km-to-merc.vrt   z8.tif

Possible Bug #2: Misregistered gdalwarp output from VRT.

I figured that I could cut tiles from a non-blocky, zoom=8 spherical mercator image. Thanks to the ground control points in the VRT and visual evidence from the tiles I've been working with, I assumed that simply running gdalwarp would result in a correctly-registered output file. However, when I took the zoom=8 TIFF generated above and tiled it, I was seeing the area around San Francisco projected too far north by about 20km, and the area around New York too far south by about 10-20km. The whole map appeared to have been rotated or distorted. Why would gdalwarp be unable to create a correctly-registered image that the python bindings seemingly had no trouble with?

I realize this is a big question, and I hope that the various provided files help.

-mike.

----------------------------------------------------------------
michal migurski- mike@stamen.com
                 415.558.1610



From even.rouault at mines-paris.org  Fri Nov 25 17:14:31 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov 26 05:44:38 2011
Subject: [gdal-dev] OGR SQL, COUNT([DISTINCT] xx)  and NULL values
Message-ID: <201111252314.31222.even.rouault@mines-paris.org>

Hi,

http://trac.osgeo.org/gdal/ticket/4354 :

"""Currently, OGR SQL considers COUNT(a_column) as a synonym of COUNT(*). 
However the standard mandates that COUNT(a_column) only count non-NULL values, 
whereas COUNT(*) count all rows (after the effect of WHERE clause of course). 
So COUNT(a_column) should not be considered as equivalent to COUNT(*) 
The same applies for COUNT(DISTINCT a_column): it should only count unique 
non-NULL values. 
What is a bit annoying here is that ogr_sql.html says that : "As a special 
case, the COUNT() operator can be given a "*" argument instead of a field name 
which is a short form for count all the records though it would get the same 
result as giving it any of the column names [...]" 
If we fix the current behaviour to be conformant with the standard, it can 
break assumptions made by users. But currently, there's an inconsistency if 
you look at the result of -sql "select sum(foo), count(foo), avg(foo) from 
bar" when there are null values.
"""
Perhaps only fix that in trunk (the current behaviour existed in 1.7 and likely 
previous versions, not only in 1.8) ? and in the doc, add a note about the 
difference between new and old behaviour ?
From etourigny.dev at gmail.com  Fri Nov 25 18:46:38 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat Nov 26 07:21:36 2011
Subject: [gdal-dev] WKT EXTENSION - any docs or reference
Message-ID: <CA+TxYvMxF5tVzEvWUfJK2isj+GBcijs0H2ZPj3xW_NWK=oLyWw@mail.gmail.com>

Hi all,

The WKT EXTENSION nodes are used in a few contexts, however I have not
been able to find any documentation, aside from random web pages and
mailing list comments about them.

Could anyone point me to any existing documentation, and inform me on
any other EXTENSION parameters that are supported by OGR?

1)
PROJ inside GEOGCS nodes

for example, Google mercator:

PROJCS["Google Maps Global Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_2SP"],
    PARAMETER["standard_parallel_1",0],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
+no_defs"],
    AUTHORITY["EPSG","900913"]]

2)
PROJ4_GRIDS inside DATUM nodes

for example:

$gdalsrsinfo IGNF:LAMBE

PROJ.4 : '+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742
+x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356514.999978254
+nadgrids=ntf_r93.gsb,null +pm=2.337229167 +units=m +no_defs '

OGC WKT :
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6378249.2,293.466021],
            EXTENSION["PROJ4_GRIDS","ntf_r93.gsb,null"]],
        PRIMEM["unnamed",2.337229167],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_1SP"],
    PARAMETER["latitude_of_origin",46.8],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",0.99987742],
    PARAMETER["false_easting",600000],
    PARAMETER["false_northing",2200000],
    UNIT["Meter",1]]

other example from
http://www.osgeo.org/pipermail/gdal-dev/2011-August/029856.html

    VERT_CS["NAVD88 height",
        VERT_DATUM["North American Vertical Datum 1988",2005,
            EXTENSION["PROJ4_GRIDS","g2009conus.gtx"]],
        AXIS["Up",UP]]	

which is generated by the following PROJ.4 string
"+proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx"

Also, the +geoidgrids PROJ.4 ?arameter is not documented...

thanks
Etienne
From peifer at gmx.eu  Fri Nov 25 22:27:05 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Nov 26 11:14:29 2011
Subject: [gdal-dev] Re: Problems with transform raster image - try again !
In-Reply-To: <4ECF729C.1070208@widemann.de>
References: <4EA6896D.8090603@widemann.de>	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>	<4EAEBA15.3020302@tappenbeck.net>	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4ECF729C.1070208@widemann.de>
Message-ID: <4ED05C89.6050103@gmx.eu>


Another option would be to gdal_translate to a .vrt by using

-a_srs srs_def EPSG:31466
-a_nodata value # in case you happen to know
-a_ullr ulx uly lrx lry # coordinates at pixel edges, not their centre 
points

Think about the .vrt as being the big brother of a world file. You might 
want to spend some time reading the documentation at [1], [2] and [3].

[1] http://www.gdal.org/gdal_translate.html
[2] http://www.gdal.org/gdal_vrttut.html
[3] http://www.gdal.org/frmt_various.html#WLD

Hermann


On 25/11/2011 11:49, Jan Tappenbeck wrote:
>
>
> HI !
>
> i try my translation in use of an other tif-source files!
>
> here even in the tif-header are informations about the reference - worst
> coordintes:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo
> "D:\City\raster\gas\500\g8746-1_
> cit.tif"
> Driver: GTiff/GeoTIFF
> Files: D:\City\raster\gas\500\g8746-1_cit.tif
> Size is 16215, 8904
> Coordinate System is `'
> Origin = (-948545665.889520530000000,-1021132473.110479500000000)
> Pixel Size = (3209.779041131308100,-3209.779041131308100)
> Image Structure Metadata:
> COMPRESSION=LZW
> INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left (-948545665.890,-1021132473.110)
> Lower Left (-948545665.890,-1049712345.693)
> Upper Right (-896499098.738,-1021132473.110)
> Lower Right (-896499098.738,-1049712345.693)
> Center (-922522382.314,-1035422409.402)
> Band 1 Block=16215x1 Type=Byte, ColorInterp=Palette
> Color Table (RGB with 256 entries)
> 0: 255,255,255,255
>
>
> i create following twf-file manuell:
>
> 0.032098
> 0.000000
> 0.000000
> -0.032098
> 2586989.395890
> 5746263.495720
>
>
> but when i now try to translate by
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:31466 -t_srs
> EPSG:25832 "D:\City\raster\gas\500\g8746-1_cit.tif"
> "D:\City\raster\gas\500\g8746-1_cit_epsg_utm.tif"
>
> i get following message:
>
> Copying color table from D:\City\raster\gas\500\g8746-1_cit.tif to new
> file.
> Creating output file that is 0P x 0L.
> ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger
> than zero
> .
>
> did anyone / you have a idea how to translate successfully?
>
> alternative to edit the coordinates manuell in the tif-file?
>
> it is very important for me.
>
> reagrads Jan :-)

From peifer at gmx.eu  Fri Nov 25 23:11:27 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Nov 26 12:01:18 2011
Subject: [gdal-dev] A gdal-users mailing list?
Message-ID: <4ED066EF.5050809@gmx.eu>


Hi all,

Could it (perhaps) make sense to have a gdal-users mailing list, in 
analogy to grass-users, qgis-users, etc. ?

I assume that, according to some logic, GDAL/OGR is considered to be a 
library from/for developers, not a GIS application for end-users. On the 
other hand, there are quite some documented utilities around [1], 
utilised by gdal-users like me. Actually, if I compare [1] with [2], I 
see that my "make install" installs many more utilities/scripts than 
mentioned on the GDAL Utilities page.

Users might have (..hmm..) simple questions that real developers might 
consider to be (..hmm..) not so interesting. gdal-users could be a list 
where experienced users reply to newcomers, with the side-effect of 
reducing some traffic on gdal-dev.

Hermann

[1] http://www.gdal.org/gdal_utilities.html

[2] $ make install

      1  libtool: install: (...) gdalinfo
      2  libtool: install: (...) gdal_translate
      3  libtool: install: (...) gdaladdo
      4  libtool: install: (...) gdalwarp
      5  libtool: install: (...) nearblack
      6  libtool: install: (...) gdalmanage
      7  libtool: install: (...) gdalenhance
      8  libtool: install: (...) gdaltransform
      9  libtool: install: (...) gdaldem
     10  libtool: install: (...) gdallocationinfo
     11  libtool: install: (...) gdalsrsinfo
     12  libtool: install: (...) gdal_contour
     13  libtool: install: (...) gdaltindex
     14  libtool: install: (...) gdal_rasterize
     15  libtool: install: (...) gdal_grid
     16  libtool: install: (...) ogrinfo
     17  libtool: install: (...) ogr2ogr
     18  libtool: install: (...) ogrtindex
     19  libtool: install: (...) testepsg
     20  libtool: install: (...) gdalbuildvrt

     21  libtool: install: (...) scripts/epsg_tr.py
     22  libtool: install: (...) scripts/esri2wkt.py
     23  libtool: install: (...) scripts/gcps2vec.py
     24  libtool: install: (...) scripts/gcps2wld.py
     25  libtool: install: (...) scripts/gdal2tiles.py
     26  libtool: install: (...) scripts/gdal2xyz.py
     27  libtool: install: (...) scripts/gdal_calc.py
     28  libtool: install: (...) scripts/gdalchksum.py
     29  libtool: install: (...) scripts/gdal_fillnodata.py
     30  libtool: install: (...) scripts/gdalident.py
     31  libtool: install: (...) scripts/gdalimport.py
     32  libtool: install: (...) scripts/gdal_merge.py
     33  libtool: install: (...) scripts/gdal_polygonize.py
     34  libtool: install: (...) scripts/gdal_proximity.py
     35  libtool: install: (...) scripts/gdal_retile.py
     36  libtool: install: (...) scripts/gdal_sieve.py
     37  libtool: install: (...) scripts/mkgraticule.py
     38  libtool: install: (...) scripts/pct2rgb.py
     39  libtool: install: (...) scripts/rgb2pct.py
From eadam at co.lincoln.or.us  Sat Nov 26 00:39:35 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Sat Nov 26 13:34:17 2011
Subject: [gdal-dev] A gdal-users mailing list?
In-Reply-To: <4ED066EF.5050809@gmx.eu>
References: <4ED066EF.5050809@gmx.eu>
Message-ID: <CACqBkM_eooBw5xUCNXBor+sxBmwdU07k=Yq40SoKEpKWrK+eug@mail.gmail.com>

Hermann,

Just a note that this topic has been on the list before,
http://lists.osgeo.org/pipermail/gdal-dev/2010-March/023779.html

Bests, Eli

>
> Hi all,
>
> Could it (perhaps) make sense to have a gdal-users mailing list, in analogy
> to grass-users, qgis-users, etc. ?
>
> I assume that, according to some logic, GDAL/OGR is considered to be a
> library from/for developers, not a GIS application for end-users. On the
> other hand, there are quite some documented utilities around [1], utilised
> by gdal-users like me. Actually, if I compare [1] with [2], I see that my
> "make install" installs many more utilities/scripts than mentioned on the
> GDAL Utilities page.
>
> Users might have (..hmm..) simple questions that real developers might
> consider to be (..hmm..) not so interesting. gdal-users could be a list
> where experienced users reply to newcomers, with the side-effect of reducing
> some traffic on gdal-dev.
>
> Hermann
>
> [1] http://www.gdal.org/gdal_utilities.html
>
> [2] $ make install
>
> ? ? 1 ?libtool: install: (...) gdalinfo
> ? ? 2 ?libtool: install: (...) gdal_translate
> ? ? 3 ?libtool: install: (...) gdaladdo
> ? ? 4 ?libtool: install: (...) gdalwarp
> ? ? 5 ?libtool: install: (...) nearblack
> ? ? 6 ?libtool: install: (...) gdalmanage
> ? ? 7 ?libtool: install: (...) gdalenhance
> ? ? 8 ?libtool: install: (...) gdaltransform
> ? ? 9 ?libtool: install: (...) gdaldem
> ? ?10 ?libtool: install: (...) gdallocationinfo
> ? ?11 ?libtool: install: (...) gdalsrsinfo
> ? ?12 ?libtool: install: (...) gdal_contour
> ? ?13 ?libtool: install: (...) gdaltindex
> ? ?14 ?libtool: install: (...) gdal_rasterize
> ? ?15 ?libtool: install: (...) gdal_grid
> ? ?16 ?libtool: install: (...) ogrinfo
> ? ?17 ?libtool: install: (...) ogr2ogr
> ? ?18 ?libtool: install: (...) ogrtindex
> ? ?19 ?libtool: install: (...) testepsg
> ? ?20 ?libtool: install: (...) gdalbuildvrt
>
> ? ?21 ?libtool: install: (...) scripts/epsg_tr.py
> ? ?22 ?libtool: install: (...) scripts/esri2wkt.py
> ? ?23 ?libtool: install: (...) scripts/gcps2vec.py
> ? ?24 ?libtool: install: (...) scripts/gcps2wld.py
> ? ?25 ?libtool: install: (...) scripts/gdal2tiles.py
> ? ?26 ?libtool: install: (...) scripts/gdal2xyz.py
> ? ?27 ?libtool: install: (...) scripts/gdal_calc.py
> ? ?28 ?libtool: install: (...) scripts/gdalchksum.py
> ? ?29 ?libtool: install: (...) scripts/gdal_fillnodata.py
> ? ?30 ?libtool: install: (...) scripts/gdalident.py
> ? ?31 ?libtool: install: (...) scripts/gdalimport.py
> ? ?32 ?libtool: install: (...) scripts/gdal_merge.py
> ? ?33 ?libtool: install: (...) scripts/gdal_polygonize.py
> ? ?34 ?libtool: install: (...) scripts/gdal_proximity.py
> ? ?35 ?libtool: install: (...) scripts/gdal_retile.py
> ? ?36 ?libtool: install: (...) scripts/gdal_sieve.py
> ? ?37 ?libtool: install: (...) scripts/mkgraticule.py
> ? ?38 ?libtool: install: (...) scripts/pct2rgb.py
> ? ?39 ?libtool: install: (...) scripts/rgb2pct.py
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From radim.blazek at gmail.com  Sat Nov 26 05:33:05 2011
From: radim.blazek at gmail.com (Radim Blazek)
Date: Sat Nov 26 18:44:20 2011
Subject: [gdal-dev] Rasterlite / WSGI problem
Message-ID: <CAEMrtYp3BNDWHYs3XFUxOxLyZFiS5WRrMXuZXRFWJudrj+6Ehw@mail.gmail.com>

Hi.

We cannot get Mapserver python mapscript running as WSGI with
Rasterlite data working. Only a black rectangle is drawn instead of
the raster. The rectangle is drawn on the right place however.
Rendering takes very little time, so it seems that no image processing
is done.  Spatialite/OGR works correctly (using geometry column from
raster _metadata table). All other raster/vector data work well.

The strange thing is, that everything works well, if exactly the same
configuration is run as CGI.

I thougt that threads could be a problem, so I disabled treads where
possible, but no effect.

Rasterlite data: JPEG or EPSILON, JPEG or EPSILON overviews, SRID correctly set
GDAL 1.8.1 --with-threads=no
Mapserver 6.0.1  patched to use GDALOpen instead of GDALOpenShared
WSGI: processes=1 threads=1

Radim
From fjitiaux at gmail.com  Sat Nov 26 08:21:35 2011
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Sat Nov 26 21:42:37 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
Message-ID: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>

Hi,

first thanks for all tools and bidings.

I have a question about Gdalinfo.exe and gdal binding programs.
I have an USRP map but with some fields errors. When i try to load it with
the java Gdalinfo, the open failed (the dataset is null). When i use
gdalinfo.exe to read the map, the error mesage is the same but after
gdalinfo succeeds to identify the driver and get informations about the map.
I found the IdentyDriver method of Gdal class which is able to read the
driver of my map but impossible to find a way to read informations with the
java binding. That's why i say gdalinfo.exe is magic.
That's the same with Gdalbuildvrt. With the java binding it's impossible to
create a vrt because the dataset is null but it works with the .exe.

Is there a solution with the java binding ? I'd prefferd to do it with the
binding than launch a process.

Thanks.

Florent.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111126/828fc761/attachment.html
From even.rouault at mines-paris.org  Sat Nov 26 11:55:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 27 01:28:22 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
Message-ID: <201111261755.26748.even.rouault@mines-paris.org>

Le samedi 26 novembre 2011 14:21:35, Florent JITIAUX a ?crit :
> Hi,
> 
> first thanks for all tools and bidings.
> 
> I have a question about Gdalinfo.exe and gdal binding programs.
> I have an USRP map but with some fields errors. When i try to load it with
> the java Gdalinfo, the open failed (the dataset is null). When i use
> gdalinfo.exe to read the map, the error mesage is the same but after
> gdalinfo succeeds to identify the driver and get informations about the
> map. I found the IdentyDriver method of Gdal class which is able to read
> the driver of my map but impossible to find a way to read informations
> with the java binding. That's why i say gdalinfo.exe is magic.
> That's the same with Gdalbuildvrt. With the java binding it's impossible to
> create a vrt because the dataset is null but it works with the .exe.

There's no magic here, but it is true that Java, Python and perhaps other 
bindings will return none/null if an error is emitted in the Open() method of 
the driver, even if it  returned a non-null dataset. There was a rationale for 
this. See http://trac.osgeo.org/gdal/changeset/11529 / 
http://trac.osgeo.org/gdal/ticket/1635

What should be done probably is turn the CE_Failure into a CE_Warning if the 
dataset opened by gdalinfo is readable. What is the *exact* error message you 
are seing ?
From jachym.cepicky at gmail.com  Sat Nov 26 18:15:08 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Sun Nov 27 08:07:57 2011
Subject: [gdal-dev] wms driver and support for more parameters in the URL
	- bug in curl?
In-Reply-To: <201111212007.43860.even.rouault@mines-paris.org>
References: <CAAZUH4FkTQJyukHEr_LJ8oh3=+dGn82Ys6Ud95itCEDBY=-0Eg@mail.gmail.com>
	<201111212007.43860.even.rouault@mines-paris.org>
Message-ID: <CAAZUH4Fuwk7HWyHt9Uw9C1Y_TBcGMXWK4NpABKs4RvMqjfayHg@mail.gmail.com>

That was it!

Thanks a lot!

Jachym

2011/11/21 Even Rouault <even.rouault@mines-paris.org>:
>> I try
>>
>> gdalwarp in.wms in.tiff
>>
>> On my localhost, correst request with all 3 parameters arrives:
>> /cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&OWSSERVICE=WMS&OWSURL=http%3A%2F%
>> 2Fgeoportal2.uhul.cz%2Fwms_oprl&request=GetMap&version=1.1.1&layers=Lesni_t
>> yp&styles=default&srs=EPSG:3035&transparent=TRUE&format=image/png&width=936
>> &height=660&bbox=4559666.00000000,2941837.66667000,4566270.00000000,2946494
>> .33333000
>>
>> But the our server or on other computer with *same* version of GDAL as
>> on my localhost, only the *first* one arrives:
>>
>> ?/cgi-bin/owsproxy.cgi?FROMCRS=epsg%3A4326&service=WMS&request=GetMap&versi
>> on=1.1.1&layers=Lesni_typ&styles=default&srs=EPSG:3035&transparent=TRUE&for
>> mat=image/png&width=936&height=660&bbox=4559666.00000000,2941837.66667000,4
>> 566270.00000000,2946494.33333000
>>
>> So, is there some strange bug in GDAL? In some dependence library
>> (like curl?) Any other way, how to pass more aditional parameters to
>> the server with GDAL as client?
>
> I don't understand the different of behaviour you observe, but the cause of
> your issue is that the URL you put inside <ServerUrl> is not proper XML
> content. You should replace the & characters by &amp;
>
>>
>> Thanks
>>
>> Jachym
>



-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
From chapmanm at pixia.com  Sat Nov 26 19:07:11 2011
From: chapmanm at pixia.com (Martin Chapman)
Date: Sun Nov 27 09:09:41 2011
Subject: [gdal-dev] Compile GDAL for x86 on an x64 machine
Message-ID: <0e396634.000006ec.00000002@CHAPMANM7S>

All,

 

I am using a Windows 7 x64 machine with VS 2010 with both x86 and x64
compile tools.  When I try to build gdal for x64 using the make file from
the Win64 command prompt and WIN64 = YES in the nmake.opt file everything
compiles fine.  (using gdal 181 by the way).  If I try to compile it for
x86 using the Win86 command prompt and comment out WIN64 in nmake.opt file
I always get a linker error where the compiler complains that the target
machine doesn't match.  I haven't tried this on my Linux box but now I'm
wondering if I am going to have the same issue there as well.

 

My question is:  Why can't I compile gdal for x86 on my x64 box?  Am I
missing something stupid?  Do you think it's my environment?  Is it
supposed to work?  Has anyone else tried to do this?  I think I've done
this before with other versions but maybe I am mistaken.

 

On another note.  It would be awesome to have gdal use cmake.  Just a
thought.

 

Best regards,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111126/b84254db/attachment.html
From jluis at ualg.pt  Sat Nov 26 19:28:50 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Nov 27 09:26:05 2011
Subject: [gdal-dev] Compile GDAL for x86 on an x64 machine
In-Reply-To: <0e396634.000006ec.00000002@CHAPMANM7S>
References: <0e396634.000006ec.00000002@CHAPMANM7S>
Message-ID: <4ED18442.9020404@ualg.pt>

On 27-11-2011 00:07, Martin Chapman wrote:
>
> All,
>
> I am using a Windows 7 x64 machine with VS 2010 with both x86 and x64 
> compile tools.  When I try to build gdal for x64 using the make file 
> from the Win64 command prompt and WIN64 = YES in the nmake.opt file 
> everything compiles fine.  (using gdal 181 by the way).  If I try to 
> compile it for x86 using the Win86 command prompt and comment out 
> WIN64 in nmake.opt file I always get a linker error where the compiler 
> complains that the target machine doesn't match.  I haven't tried this 
> on my Linux box but now I'm wondering if I am going to have the same 
> issue there as well.
>
> My question is:  Why can't I compile gdal for x86 on my x64 box?  Am I 
> missing something stupid?  Do you think it's my environment?  Is it 
> supposed to work?  Has anyone else tried to do this?  I think I've 
> done this before with other versions but maybe I am mistaken.
>

I do build 32 & 64 on my machine that is also Win7 64 and use VC10. You 
probably did the same mistake I often do. Using the VS vcvarsall.bat for 
32 and trying to build the GDAL64 or vice versa.

> On another note.  It would be awesome to have gdal use cmake.  Just a 
> thought.
>

There are people currently putting that thought to practice.

Joaquim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111127/cc322f41/attachment-0001.html
From mateusz at loskot.net  Sat Nov 26 20:02:08 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sun Nov 27 10:01:03 2011
Subject: [gdal-dev] Compile GDAL for x86 on an x64 machine
In-Reply-To: <0e396634.000006ec.00000002@CHAPMANM7S>
References: <0e396634.000006ec.00000002@CHAPMANM7S>
Message-ID: <CABUeae9qukxUHjChjCFj2=odbYCQ_hMf=4QhERSZPa+sx1fRcg@mail.gmail.com>

On 27 November 2011 00:07, Martin Chapman <chapmanm@pixia.com> wrote:
> I am using a Windows 7 x64 machine with VS 2010 with both x86 and x64
> compile tools.
> [...]
> My question is:? Why can?t I compile gdal for x86 on my x64 box?? Am I
> missing something stupid?? Do you think it?s my environment?? Is it supposed
> to work?? Has anyone else tried to do this?? I think I?ve done this before
> with other versions but maybe I am mistaken.

I frequently build GDAL from current trank on Windows 7 64-bit using
Visual Studio 11 (DP) for both, 32-bit and 64-bit.
I haven't noticed any problems.

http://www.flickr.com/photos/mloskot/6408340877

(Note, PE32+ denotes 64-bit.)


To be on safe side, I always build in separate source trees
trunk/ for 32-bit
trunk.x64/ for 64-bit

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From ari.jolma at gmail.com  Sun Nov 27 05:26:46 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Nov 27 20:02:16 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <201111261755.26748.even.rouault@mines-paris.org>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
Message-ID: <4ED21066.4040902@gmail.com>

On 11/26/2011 06:55 PM, Even Rouault wrote:
> Le samedi 26 novembre 2011 14:21:35, Florent JITIAUX a ?crit :
>> Hi,
>>
>> first thanks for all tools and bidings.
>>
>> I have a question about Gdalinfo.exe and gdal binding programs.
>> I have an USRP map but with some fields errors. When i try to load it with
>> the java Gdalinfo, the open failed (the dataset is null). When i use
>> gdalinfo.exe to read the map, the error mesage is the same but after
>> gdalinfo succeeds to identify the driver and get informations about the
>> map. I found the IdentyDriver method of Gdal class which is able to read
>> the driver of my map but impossible to find a way to read informations
>> with the java binding. That's why i say gdalinfo.exe is magic.
>> That's the same with Gdalbuildvrt. With the java binding it's impossible to
>> create a vrt because the dataset is null but it works with the .exe.
> There's no magic here, but it is true that Java, Python and perhaps other
> bindings will return none/null if an error is emitted in the Open() method of
> the driver, even if it  returned a non-null dataset. There was a rationale for
> this. See http://trac.osgeo.org/gdal/changeset/11529 /
> http://trac.osgeo.org/gdal/ticket/1635

It seems to me that a datasource can be opened using a datasource 
(class) method or driver (object) method. Only the first tests for the 
case ds not null and error, but usually the error state is always 
checked after a call to GDAL internals in the bindings. The 
UseExceptions/DontUseExceptions methods can perhaps be used to change 
that (I'm not sure as I always have the UseExceptions on).

Change 11529 did not touch the case when such a dataset is opened with 
OGR_Dr_Open. That might still be a bug.

In general I don't think it is a good practice to return a valid pointer 
when there is an error, and it seems impossible to get a valid object 
when using the bindings in such a case.

Ari

>
> What should be done probably is turn the CE_Failure into a CE_Warning if the
> dataset opened by gdalinfo is readable. What is the *exact* error message you
> are seing ?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From fjitiaux at gmail.com  Sun Nov 27 05:54:03 2011
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Sun Nov 27 20:25:20 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <201111261755.26748.even.rouault@mines-paris.org>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
Message-ID: <CAL81ghBpV2Rt7BZbZCt7bu02x25o6_iBma+Y9breGBrmAeUx-g@mail.gmail.com>

n fact in the Gdalinfo.java program or in the Gdalinfo.c, if the dataset is
null the program print the message error and call the system.exit().
The message says there is a problem with a value (if i remember error 4)
and the last error is "open failed -1". The message is exactly the same
with Gdalinfo.exe
I will check the file, maybe it's come from a wrong value in a
controlrecord.

I also tried to understand why this map works with Qgis but it's because
they use the Gdalinfo.exe and get the ouput.

As you say Ari, read files with errors is not a good thing. But the
question for the programmer (like me) is : don't read a map if there is
just a litlle error in one file or read a map even if there is an error but
the raster and data like width, height and georeferencing are readable.
In my case i have to read these maps. And i'd preffered to load it in the
dataset java class than get informations with the gdalinfo.exe and build a
vrt with Gdalbuildvrt.exe

2011/11/26 Even Rouault <even.rouault@mines-paris.org>

> Le samedi 26 novembre 2011 14:21:35, Florent JITIAUX a ?crit :
> > Hi,
> >
> > first thanks for all tools and bidings.
> >
> > I have a question about Gdalinfo.exe and gdal binding programs.
> > I have an USRP map but with some fields errors. When i try to load it
> with
> > the java Gdalinfo, the open failed (the dataset is null). When i use
> > gdalinfo.exe to read the map, the error mesage is the same but after
> > gdalinfo succeeds to identify the driver and get informations about the
> > map. I found the IdentyDriver method of Gdal class which is able to read
> > the driver of my map but impossible to find a way to read informations
> > with the java binding. That's why i say gdalinfo.exe is magic.
> > That's the same with Gdalbuildvrt. With the java binding it's impossible
> to
> > create a vrt because the dataset is null but it works with the .exe.
>
> There's no magic here, but it is true that Java, Python and perhaps other
> bindings will return none/null if an error is emitted in the Open() method
> of
> the driver, even if it  returned a non-null dataset. There was a rationale
> for
> this. See http://trac.osgeo.org/gdal/changeset/11529 /
> http://trac.osgeo.org/gdal/ticket/1635
>
> What should be done probably is turn the CE_Failure into a CE_Warning if
> the
> dataset opened by gdalinfo is readable. What is the *exact* error message
> you
> are seing ?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111127/a249d95e/attachment.html
From even.rouault at mines-paris.org  Sun Nov 27 05:58:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 27 20:30:12 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <4ED21066.4040902@gmail.com>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
	<4ED21066.4040902@gmail.com>
Message-ID: <201111271158.46967.even.rouault@mines-paris.org>

> 
> It seems to me that a datasource can be opened using a datasource
> (class) method or driver (object) method. Only the first tests for the
> case ds not null and error, but usually the error state is always
> checked after a call to GDAL internals in the bindings. The
> UseExceptions/DontUseExceptions methods can perhaps be used to change
> that (I'm not sure as I always have the UseExceptions on).

Indeed, the rationale for r11529 was that if UseExceptions() is on, and a 
CPLError(CE_Failure, ...) is emitted during the open procedure, SWIG will 
eventually throw a Java/Python/Perl exception but will forget to destroy the 
datasource object. Hence the need for that early cleanup.

> 
> Change 11529 did not touch the case when such a dataset is opened with
> OGR_Dr_Open. That might still be a bug.

Yes it was. Fixed in r23428.

> 
> In general I don't think it is a good practice to return a valid pointer
> when there is an error, and it seems impossible to get a valid object
> when using the bindings in such a case.

The issue is that the drivers might emit CE_Failure and still return a non-
NULL valid object. Perhaps a saner policy would be that if they emit 
CE_Failure, they should return a NULL pointer. And if they are able to return 
a valid non-NULL object, then the error should be just a CE_Warning. However, 
that can be fixed only by reviewing each driver code ...

Even
From even.rouault at mines-paris.org  Sun Nov 27 06:05:35 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 27 20:37:21 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <CAL81ghBpV2Rt7BZbZCt7bu02x25o6_iBma+Y9breGBrmAeUx-g@mail.gmail.com>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
	<CAL81ghBpV2Rt7BZbZCt7bu02x25o6_iBma+Y9breGBrmAeUx-g@mail.gmail.com>
Message-ID: <201111271205.35088.even.rouault@mines-paris.org>

Le dimanche 27 novembre 2011 11:54:03, Florent JITIAUX a ?crit :
> n fact in the Gdalinfo.java program or in the Gdalinfo.c, if the dataset is
> null the program print the message error and call the system.exit().
> The message says there is a problem with a value (if i remember error 4)
> and the last error is "open failed -1". The message is exactly the same
> with Gdalinfo.exe
> I will check the file, maybe it's come from a wrong value in a
> controlrecord.

Hum, when I say *exact*, I really mean *exact* ... And what is interesting is 
the first error emitted by the SRP driver, not the last one in higher layers.

> 
> I also tried to understand why this map works with Qgis but it's because
> they use the Gdalinfo.exe and get the ouput.

Not really but you're close. Qgis uses the C API directly, like gdalinfo, so 
it has not to deal with the behaviour of the Java/Python/Perl bindings that 
can turn GDAL errors into their own exception mechanism.

> 
> As you say Ari, read files with errors is not a good thing. But the
> question for the programmer (like me) is : don't read a map if there is
> just a litlle error in one file or read a map even if there is an error but
> the raster and data like width, height and georeferencing are readable.
> In my case i have to read these maps. And i'd preffered to load it in the
> dataset java class than get informations with the gdalinfo.exe and build a
> vrt with Gdalbuildvrt.exe

Yes if the file is visually OK (is it the case here ?), then errors should 
probably reclassified as warnings.
From fjitiaux at gmail.com  Sun Nov 27 06:38:02 2011
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Sun Nov 27 21:11:50 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <201111271205.35088.even.rouault@mines-paris.org>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
	<CAL81ghBpV2Rt7BZbZCt7bu02x25o6_iBma+Y9breGBrmAeUx-g@mail.gmail.com>
	<201111271205.35088.even.rouault@mines-paris.org>
Message-ID: <CAL81ghA7rW3nfEsyyKu33__xyoN94Rfp3gbgxrFOBDjBx73cDA@mail.gmail.com>

2011/11/27 Even Rouault <even.rouault@mines-paris.org>

>
> Hum, when I say *exact*, I really mean *exact* ... And what is interesting
> is
> the first error emitted by the SRP driver, not the last one in higher
> layers.
>
> I don't remember all errors but the the first two errors from gdalinfo are
wrong value G and wrong value E. Names of my files are ok but i didn't
check if names was correctly put as data into files. I will get errors
tomorrow.

>

> >
> > As you say Ari, read files with errors is not a good thing. But the
> > question for the programmer (like me) is : don't read a map if there is
> > just a litlle error in one file or read a map even if there is an error
> but
> > the raster and data like width, height and georeferencing are readable.
> > In my case i have to read these maps. And i'd preffered to load it in the
> > dataset java class than get informations with the gdalinfo.exe and build
> a
> > vrt with Gdalbuildvrt.exe
>
> Yes if the file is visually OK (is it the case here ?), then errors should
> probably reclassified as warnings.
>

The visual is ok with Qgis. And it works perfectly when i build a vrt file
with Gdalbuildvrt from my *.img and make tiles with Gdal_translate.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111127/45eb6c8c/attachment.html
From chapmanm at pixia.com  Sun Nov 27 13:57:57 2011
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Nov 28 04:55:35 2011
Subject: [gdal-dev] Compile GDAL for x86 on an x64 machine
In-Reply-To: <4ED18442.9020404@ualg.pt>
References: <0e396634.000006ec.00000002@CHAPMANM7S> <4ED18442.9020404@ualg.pt>
Message-ID: <246c9b42.00000cf4.00000002@CHAPMANM7S>

Thanks Joaquim.  You are correct, I am using that bat file to configure
the VC environment.  I did a search and found the 32.bat file so I will
try and use that.  I'm glad to know someone else can do it which means I
am doing something wrong which is what I figured.  Thanks for your
response.

 

Best regards,

Marty

 

From: Joaquim Luis [mailto:jluis@ualg.pt] 
Sent: Saturday, November 26, 2011 5:29 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Compile GDAL for x86 on an x64 machine

 

On 27-11-2011 00:07, Martin Chapman wrote: 

All,

 

I am using a Windows 7 x64 machine with VS 2010 with both x86 and x64
compile tools.  When I try to build gdal for x64 using the make file from
the Win64 command prompt and WIN64 = YES in the nmake.opt file everything
compiles fine.  (using gdal 181 by the way).  If I try to compile it for
x86 using the Win86 command prompt and comment out WIN64 in nmake.opt file
I always get a linker error where the compiler complains that the target
machine doesn't match.  I haven't tried this on my Linux box but now I'm
wondering if I am going to have the same issue there as well.

 

My question is:  Why can't I compile gdal for x86 on my x64 box?  Am I
missing something stupid?  Do you think it's my environment?  Is it
supposed to work?  Has anyone else tried to do this?  I think I've done
this before with other versions but maybe I am mistaken.


I do build 32 & 64 on my machine that is also Win7 64 and use VC10. You
probably did the same mistake I often do. Using the VS vcvarsall.bat for
32 and trying to build the GDAL64 or vice versa.




On another note.  It would be awesome to have gdal use cmake.  Just a
thought.


There are people currently putting that thought to practice.

Joaquim

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111127/2eaa6556/attachment-0001.html
From chapmanm at pixia.com  Sun Nov 27 13:59:16 2011
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Nov 28 04:56:58 2011
Subject: [gdal-dev] Compile GDAL for x86 on an x64 machine
In-Reply-To: <CABUeae9qukxUHjChjCFj2=odbYCQ_hMf=4QhERSZPa+sx1fRcg@mail.gmail.com>
References: <0e396634.000006ec.00000002@CHAPMANM7S>
	<CABUeae9qukxUHjChjCFj2=odbYCQ_hMf=4QhERSZPa+sx1fRcg@mail.gmail.com>
Message-ID: <7b6ad71d.00000cf4.00000004@CHAPMANM7S>

Thanks Mateusz.  I figured I was doing something wrong.  Your feedback is 
much appreciated.

Marty

-----Original Message-----
From: Mateusz ?oskot [mailto:mateusz@loskot.net]
Sent: Saturday, November 26, 2011 6:02 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Compile GDAL for x86 on an x64 machine

On 27 November 2011 00:07, Martin Chapman <chapmanm@pixia.com> wrote:
> I am using a Windows 7 x64 machine with VS 2010 with both x86 and x64
> compile tools.
> [...]
> My question is:  Why can?t I compile gdal for x86 on my x64 box?  Am I
> missing something stupid?  Do you think it?s my environment?  Is it
> supposed to work?  Has anyone else tried to do this?  I think I?ve
> done this before with other versions but maybe I am mistaken.

I frequently build GDAL from current trank on Windows 7 64-bit using Visual 
Studio 11 (DP) for both, 32-bit and 64-bit.
I haven't noticed any problems.

http://www.flickr.com/photos/mloskot/6408340877

(Note, PE32+ denotes 64-bit.)


To be on safe side, I always build in separate source trees trunk/ for 
32-bit trunk.x64/ for 64-bit

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net Charter Member of OSGeo, 
http://osgeo.org Member of ACCU, http://accu.org
From graeme at inetix.com.au  Sun Nov 27 20:10:21 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Mon Nov 28 11:29:01 2011
Subject: [gdal-dev] Clipping an image via Python API problems
Message-ID: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>

The smallest almost working code chunk I have right now is below.  This is
taaking a 40k by 40k and pulling out the top left quarter.  The original
has 4 bands - RGBA

from osgeo import gdal
import numpy
img = gdal.Open("original.tif")
geotransform = img.GetGeoTransform()
band1 = img.GetRasterBand(1)

driver = gdal.GetDriverByName("GTiff)
# coordinates will be calculated but hardcoded for now
dst = driver.Create('sliver.tif', 20000, 20000, 1, gdal.GDT_Byte)
dst.SetProjection(img.GetProjection())
scanline1 = band1.ReadAsArray(0, 0,  20000, 20000)
dst.GetRasterBand(1).WriteArray(scanline1)

Should I be looping through each band and reading/writing to the image? I'm
assuming yes

Also. band 1 of the original image is red but in the new image the band
color is grey. I've tried a few variations with
GDALRasterBand.SetColorInterpretation() with no luck.  What have I missed?

Cheers,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/1fe62e5d/attachment.html
From jdmorgan at unca.edu  Sun Nov 27 21:38:57 2011
From: jdmorgan at unca.edu (jdmorgan)
Date: Mon Nov 28 13:02:48 2011
Subject: [gdal-dev] gdalinfo on win 7 64-bit
Message-ID: <4ED2F441.7090500@gmail.com>

Hello,

I am running gdal on windows 7 64-bit which I installed via OSGeo4W.  
When I run gdalinfo on a raster GeoTiff file I get the following runtime 
error: RS6034 An application has made an attempt to load the C runtime 
library incorrectly.  Any ideas one why this might be occuring, or how I 
can fix it.

Thanks,
Derek


From chaitanya.ch at gmail.com  Sun Nov 27 23:40:37 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Nov 28 15:10:38 2011
Subject: [gdal-dev] Clipping an image via Python API problems
In-Reply-To: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
References: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
Message-ID: <CAMKgpObk0uqvbJrYBNmUsoP2AY4fAK0ZuhcVyjH6qsSsk+Z9Bw@mail.gmail.com>

Graeme,

You do need to copy all bands. Also, make sure you set the correct number
of bands while creating the destination dataset.

Color interpretation is useful when you have multiple bands. If you want to
show your image in red, set it to GCI_PaletteIndex and set a colortable.

On Mon, Nov 28, 2011 at 6:40 AM, Graeme Merrall <graeme@inetix.com.au>wrote:

> The smallest almost working code chunk I have right now is below.  This is
> taaking a 40k by 40k and pulling out the top left quarter.  The original
> has 4 bands - RGBA
>
> from osgeo import gdal
> import numpy
> img = gdal.Open("original.tif")
> geotransform = img.GetGeoTransform()
> band1 = img.GetRasterBand(1)
>
> driver = gdal.GetDriverByName("GTiff)
> # coordinates will be calculated but hardcoded for now
> dst = driver.Create('sliver.tif', 20000, 20000, 1, gdal.GDT_Byte)
> dst.SetProjection(img.GetProjection())
> scanline1 = band1.ReadAsArray(0, 0,  20000, 20000)
> dst.GetRasterBand(1).WriteArray(scanline1)
>
> Should I be looping through each band and reading/writing to the image?
> I'm assuming yes
>
> Also. band 1 of the original image is red but in the new image the band
> color is grey. I've tried a few variations with
> GDALRasterBand.SetColorInterpretation() with no luck.  What have I missed?
>
> Cheers,
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/8dbe1d4a/attachment.html
From graeme at inetix.com.au  Mon Nov 28 01:05:23 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Mon Nov 28 16:39:54 2011
Subject: [gdal-dev] Clipping an image via Python API problems
In-Reply-To: <CAMKgpObk0uqvbJrYBNmUsoP2AY4fAK0ZuhcVyjH6qsSsk+Z9Bw@mail.gmail.com>
References: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
	<CAMKgpObk0uqvbJrYBNmUsoP2AY4fAK0ZuhcVyjH6qsSsk+Z9Bw@mail.gmail.com>
Message-ID: <CAG5_Ya21AiviVBr=xgaWeqttuwVx6nswMZe6RQq7XApw=ge0WQ@mail.gmail.com>

I've discovered that he bands are determined by the args to driver.Create()
that is if I create a 4 band image then the bands are correct, however if
I'm going to copy the image chunk around using ReadAsArray and WriteArray,
doesn't it mean I need to retreive each band in turn?
Or have I missed something and there's an easier way to extract a portion
of an image and write it out?

Cheers,
 Graeme

On Mon, Nov 28, 2011 at 3:40 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Graeme,
>
> You do need to copy all bands. Also, make sure you set the correct number
> of bands while creating the destination dataset.
>
> Color interpretation is useful when you have multiple bands. If you want
> to show your image in red, set it to GCI_PaletteIndex and set a colortable.
>
> On Mon, Nov 28, 2011 at 6:40 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>
>> The smallest almost working code chunk I have right now is below.  This
>> is taaking a 40k by 40k and pulling out the top left quarter.  The original
>> has 4 bands - RGBA
>>
>> from osgeo import gdal
>> import numpy
>> img = gdal.Open("original.tif")
>> geotransform = img.GetGeoTransform()
>> band1 = img.GetRasterBand(1)
>>
>> driver = gdal.GetDriverByName("GTiff)
>> # coordinates will be calculated but hardcoded for now
>> dst = driver.Create('sliver.tif', 20000, 20000, 1, gdal.GDT_Byte)
>> dst.SetProjection(img.GetProjection())
>> scanline1 = band1.ReadAsArray(0, 0,  20000, 20000)
>> dst.GetRasterBand(1).WriteArray(scanline1)
>>
>> Should I be looping through each band and reading/writing to the image?
>> I'm assuming yes
>>
>> Also. band 1 of the original image is red but in the new image the band
>> color is grey. I've tried a few variations with
>> GDALRasterBand.SetColorInterpretation() with no luck.  What have I missed?
>>
>> Cheers,
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/91ef5188/attachment.html
From chaitanya.ch at gmail.com  Mon Nov 28 01:44:26 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Nov 28 17:20:56 2011
Subject: [gdal-dev] Clipping an image via Python API problems
In-Reply-To: <CAG5_Ya21AiviVBr=xgaWeqttuwVx6nswMZe6RQq7XApw=ge0WQ@mail.gmail.com>
References: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
	<CAMKgpObk0uqvbJrYBNmUsoP2AY4fAK0ZuhcVyjH6qsSsk+Z9Bw@mail.gmail.com>
	<CAG5_Ya21AiviVBr=xgaWeqttuwVx6nswMZe6RQq7XApw=ge0WQ@mail.gmail.com>
Message-ID: <CAMKgpOZmQhvgDSWMLunRHo6duFxdzCwD-gjvL1gZmXqRpc4+3A@mail.gmail.com>

I should have said that you need to copy all bands 'individually'.

On Mon, Nov 28, 2011 at 11:35 AM, Graeme Merrall <graeme@inetix.com.au>wrote:

> I've discovered that he bands are determined by the args to
> driver.Create() that is if I create a 4 band image then the bands are
> correct, however if I'm going to copy the image chunk around using
> ReadAsArray and WriteArray, doesn't it mean I need to retreive each band in
> turn?
> Or have I missed something and there's an easier way to extract a portion
> of an image and write it out?
>
> Cheers,
>  Graeme
>
>
> On Mon, Nov 28, 2011 at 3:40 PM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Graeme,
>>
>> You do need to copy all bands. Also, make sure you set the correct number
>> of bands while creating the destination dataset.
>>
>> Color interpretation is useful when you have multiple bands. If you want
>> to show your image in red, set it to GCI_PaletteIndex and set a colortable.
>>
>> On Mon, Nov 28, 2011 at 6:40 AM, Graeme Merrall <graeme@inetix.com.au>wrote:
>>
>>> The smallest almost working code chunk I have right now is below.  This
>>> is taaking a 40k by 40k and pulling out the top left quarter.  The original
>>> has 4 bands - RGBA
>>>
>>> from osgeo import gdal
>>> import numpy
>>> img = gdal.Open("original.tif")
>>> geotransform = img.GetGeoTransform()
>>> band1 = img.GetRasterBand(1)
>>>
>>> driver = gdal.GetDriverByName("GTiff)
>>> # coordinates will be calculated but hardcoded for now
>>> dst = driver.Create('sliver.tif', 20000, 20000, 1, gdal.GDT_Byte)
>>> dst.SetProjection(img.GetProjection())
>>> scanline1 = band1.ReadAsArray(0, 0,  20000, 20000)
>>> dst.GetRasterBand(1).WriteArray(scanline1)
>>>
>>> Should I be looping through each band and reading/writing to the image?
>>> I'm assuming yes
>>>
>>> Also. band 1 of the original image is red but in the new image the band
>>> color is grey. I've tried a few variations with
>>> GDALRasterBand.SetColorInterpretation() with no luck.  What have I missed?
>>>
>>> Cheers,
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/c562e3f4/attachment.html
From tappenbeck at widemann.de  Mon Nov 28 06:07:12 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Mon Nov 28 21:57:36 2011
Subject: [gdal-dev] Freischaltung Widemann Systeme Hamburg
In-Reply-To: <4ED05C89.6050103@gmx.eu>
References: <4EA6896D.8090603@widemann.de>	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>	<4EAEBA15.3020302@tappenbeck.net>	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4ECF729C.1070208@widemann.de> <4ED05C89.6050103@gmx.eu>
Message-ID: <4ED36B60.4020806@widemann.de>



  Am 26.11.2011 04:27, schrieb Hermann Peifer:
>
> Another option would be to gdal_translate to a .vrt by using
>
> -a_srs srs_def EPSG:31466
> -a_nodata value # in case you happen to know
> -a_ullr ulx uly lrx lry # coordinates at pixel edges, not their centre 
> points
>
> Think about the .vrt as being the big brother of a world file. You 
> might want to spend some time reading the documentation at [1], [2] 
> and [3].
>
> [1] http://www.gdal.org/gdal_translate.html
> [2] http://www.gdal.org/gdal_vrttut.html
> [3] http://www.gdal.org/frmt_various.html#WLD
>
> Hermann
>
>
> On 25/11/2011 11:49, Jan Tappenbeck wrote:
>>
>>
>> HI !
>>
>> i try my translation in use of an other tif-source files!
>>
>> here even in the tif-header are informations about the reference - worst
>> coordintes:
>>
>> C:\Program Files (x86)\FWTools2.4.7>gdalinfo
>> "D:\City\raster\gas\500\g8746-1_
>> cit.tif"
>> Driver: GTiff/GeoTIFF
>> Files: D:\City\raster\gas\500\g8746-1_cit.tif
>> Size is 16215, 8904
>> Coordinate System is `'
>> Origin = (-948545665.889520530000000,-1021132473.110479500000000)
>> Pixel Size = (3209.779041131308100,-3209.779041131308100)
>> Image Structure Metadata:
>> COMPRESSION=LZW
>> INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left (-948545665.890,-1021132473.110)
>> Lower Left (-948545665.890,-1049712345.693)
>> Upper Right (-896499098.738,-1021132473.110)
>> Lower Right (-896499098.738,-1049712345.693)
>> Center (-922522382.314,-1035422409.402)
>> Band 1 Block=16215x1 Type=Byte, ColorInterp=Palette
>> Color Table (RGB with 256 entries)
>> 0: 255,255,255,255
>>
>>
>> i create following twf-file manuell:
>>
>> 0.032098
>> 0.000000
>> 0.000000
>> -0.032098
>> 2586989.395890
>> 5746263.495720
>>
>>
>> but when i now try to translate by
>>
>> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -s_srs EPSG:31466 -t_srs
>> EPSG:25832 "D:\City\raster\gas\500\g8746-1_cit.tif"
>> "D:\City\raster\gas\500\g8746-1_cit_epsg_utm.tif"
>>
>> i get following message:
>>
>> Copying color table from D:\City\raster\gas\500\g8746-1_cit.tif to new
>> file.
>> Creating output file that is 0P x 0L.
>> ERROR 1: Attempt to create 0x0 dataset is illegal,sizes must be larger
>> than zero
>> .
>>
>> did anyone / you have a idea how to translate successfully?
>>
>> alternative to edit the coordinates manuell in the tif-file?
>>
>> it is very important for me.
>>
>> reagrads Jan :-)
>
>
>
>
Moin aus Hamburg,

ich m?chte Sie bitten nachfolgendes Produkt freizuschalten:

[__] Widemann Systeme intern

[__] f?r nachfolgenden Kunden:

Produkt:

Seriennummer:

MAC-Adresse:

Server-Name:

Seats: [ ___]

F?r eventuelle R?ckfragen stehe ich Ihnen gerne zur Verf?gung.



-- 

Freundliche Gr??e
i.A. Jan Tappenbeck

Dipl. Vermessungsingenieur
CAD-Systemberater&  AutoCAD-Support

Widemann Systeme GmbH
CAD- und GIS-Systemhaus
Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf

Ackermannstra?e 21, 22087 Hamburg
Fon: 040 / 229477-22
Fax: 040 / 229477-29 	
tappenbeck@widemann.de    www.widemann.de

Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345

Zu jedem Produkt das passende Forum unter http://www.widemann.de/wisysforen/


Widemann Systeme - aktuell:

geosi.DE - Vermessungssoftware ...
... f?r Stra?enbau, Bauwesen, ....

- weitere Infos unter:
http://www.widemann.de/produkte/geoside/geosi.htm


Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte
sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren
dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen
ist nicht gestattet.

The information contained in this message is confidential or protected by
law. If you are not the intended recipient, please contact the sender and
delete this message. Any unauthorised copying of this message or unauthorised
distribution of the information contained herein is prohibited.


From fjitiaux at gmail.com  Mon Nov 28 06:09:13 2011
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Mon Nov 28 21:59:37 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <CAL81ghA7rW3nfEsyyKu33__xyoN94Rfp3gbgxrFOBDjBx73cDA@mail.gmail.com>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<201111261755.26748.even.rouault@mines-paris.org>
	<CAL81ghBpV2Rt7BZbZCt7bu02x25o6_iBma+Y9breGBrmAeUx-g@mail.gmail.com>
	<201111271205.35088.even.rouault@mines-paris.org>
	<CAL81ghA7rW3nfEsyyKu33__xyoN94Rfp3gbgxrFOBDjBx73cDA@mail.gmail.com>
Message-ID: <CAL81ghDz6COqJO1e6ZjUw8YR7anQDduU+wQsDs=ugGFS5QMiag@mail.gmail.com>

Hi all,

well i found the little error from my files. In fact blanks before the name
of type of the file in the header (GENERAL_INFORMATION_FILE for example)
missed. That's why i had :
ERROR 1: Unrecognised data_struct_code value G.
Field 000 initialization incorrect.
ERROR 1: Unrecognised data_type_code value E.
Field 000 initialization incorrect.

But the size of the control record was correct and size and offset of
subfields too. Then it's possible to read data after the control record.

I still have a problem to understand how gdalinfo.exe works.
In the Gdalinfo.class, if the dataset can't be read the dataset = null.
Getting the driver is done by calling the method ".GetDriver()" from the
Dataset class. Well if the dataset is null it's impossible to get the
driver. And in the Gdalinfo.class (in the Gdalinfo.c too) if the dataset is
null the program exit.
But as I say I can get the driver with "gdal.IdentifyDriver(pszFilename)".

Then, for me gdalinfo.exe is still magic.

About Qgis, I download the source to understand how it works. I found in
the GdalTools_utils.py functions that call gdalinfo with Qprocess. If I
understand correctly, this is a Qt class "used to start external programs
and to communicate with them". After Qgis get the output and splits it to
get information like information giving by gdalinfo.exe.
That's why I said Qgis use gdalinfo.exe.

There's no way to get information with bindings like gdalinfo.exe when
files contains errors ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/0ad3f6c9/attachment.html
From tappenbeck at widemann.de  Mon Nov 28 06:10:19 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Mon Nov 28 22:00:49 2011
Subject: [gdal-dev] Problems to define trancparency
Message-ID: <4ED36C1B.6040609@widemann.de>



  HI !

after my problems to transform rasterimage now i have a problem to make 
the white background tranparency.

After the translation the new image had following status:

C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
"D:\City\raster\gas\500\twf_chec
k\baseline_etrs.tif"
Driver: GTiff/GeoTIFF
Files: D:\City\raster\gas\500\twf_check\baseline_etrs.tif
Size is 16568, 9564
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","25832"]]
Origin = (380297.397497169380000,5745229.623735004100000)
Pixel Size = (0.032091644585721,-0.032091644585721)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  380297.397, 5745229.624) (  7d15'44.21"E, 51d50'42.10"N)
Lower Left  (  380297.397, 5744922.699) (  7d15'44.59"E, 51d50'32.17"N)
Upper Right (  380829.092, 5745229.624) (  7d16'11.98"E, 51d50'42.51"N)
Lower Right (  380829.092, 5744922.699) (  7d16'12.36"E, 51d50'32.58"N)
Center      (  380563.245, 5745076.161) (  7d15'58.29"E, 51d50'37.34"N)
Band 1 Block=16568x1 Type=Byte, ColorInterp=Palette
   Color Table (RGB with 256 entries)
     0: 255,255,255,255
     1: 0,0,0,255
     2: 0,0,0,255
     3: 0,0,0,255
     4: 0,0,0,255
     5: 0,0,0,255
     6: 0,0,0,255
     7: 0,0,0,255
     8: 0,0,0,255
     9: 0,0,0,255
    10: 0,0,0,255
    11: 0,0,0,255
    12: 0,0,0,255
    13: 0,0,0,255
    14: 0,0,0,255
....

i try to make the image transparency by

C:\Program Files (x86)\FWTools2.4.7>gdalwarp -srcnodata 0 -dstalpha 
"D:\City\
raster\gas\500\twf_check\baseline_etrs.tif" 
"D:\City\raster\gas\500\twf_check
\baseline_etrs_t.tif"
Copying color table from 
D:\City\raster\gas\500\twf_check\baseline_etrs.tif t
o new file.
Creating output file that is 16568P x 9564L.
ERROR 6: SetColorTable() not supported for multi-sample TIFF files.
Processing input file D:\City\raster\gas\500\twf_check\baseline_etrs.tif.

but there comes the message "ERROR 6: SetColorTable() not supported for 
multi-sample TIFF files." and the result image is only 1 Color !!!!!!!!

the status now is
C:\Program Files (x86)\FWTools2.4.7>gdalinfo 
"D:\City\raster\gas\500\twf_chec
k\baseline_etrs_t.tif"
Driver: GTiff/GeoTIFF
Files: D:\City\raster\gas\500\twf_check\baseline_etrs_t.tif
Size is 16568, 9564
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","25832"]]
Origin = (380297.397497169380000,5745229.623735004100000)
Pixel Size = (0.032091644585733,-0.032091644585733)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  380297.397, 5745229.624) (  7d15'44.21"E, 51d50'42.10"N)
Lower Left  (  380297.397, 5744922.699) (  7d15'44.59"E, 51d50'32.17"N)
Upper Right (  380829.092, 5745229.624) (  7d16'11.98"E, 51d50'42.51"N)
Lower Right (  380829.092, 5744922.699) (  7d16'12.36"E, 51d50'32.58"N)
Center      (  380563.245, 5745076.161) (  7d15'58.29"E, 51d50'37.34"N)
Band 1 Block=16568x1 Type=Byte, ColorInterp=Gray
   Mask Flags: PER_DATASET ALPHA
Band 2 Block=16568x1 Type=Byte, ColorInterp=Alpha

Can anyone help me ??

reagards Jan :-)




From tappenbeck at widemann.de  Mon Nov 28 06:19:23 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Mon Nov 28 22:10:24 2011
Subject: [gdal-dev] Re: Problems with transform raster image - try again !
In-Reply-To: <4ED05C89.6050103@gmx.eu>
References: <4EA6896D.8090603@widemann.de>	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>	<4EAEBA15.3020302@tappenbeck.net>	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4ECF729C.1070208@widemann.de> <4ED05C89.6050103@gmx.eu>
Message-ID: <4ED36E3B.2040002@widemann.de>



  Hi !

i have transform successfully !!

thanks for help !!

regards Jan .-)

my next problem i post by "Problems to define trancparency" .-)

From tappenbeck at widemann.de  Mon Nov 28 07:06:23 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Mon Nov 28 23:00:10 2011
Subject: [gdal-dev] Re: Problems with transform raster image - try again !
In-Reply-To: <4ED05C89.6050103@gmx.eu>
References: <4EA6896D.8090603@widemann.de>	<CAMKgpOayF39Myqz9ef+6RYt3HxKmxRijMYg5BX2MR-MnRddHJg@mail.gmail.com>	<4EAEBA15.3020302@tappenbeck.net>	<CAMKgpOZ2A0zEDHs_JmAnDVSkPqiewWTpAnyNzQOW3UpkgQQJpA@mail.gmail.com>	<4EAEC19D.10504@tappenbeck.net>
	<CAMKgpOZUVg2hOz2pDqv0Wn0H3AkiN3wgQyBsOixYAem8U8yD4g@mail.gmail.com>
	<4ECF729C.1070208@widemann.de> <4ED05C89.6050103@gmx.eu>
Message-ID: <4ED3793F.4020209@widemann.de>



  Hi !

i have transform successfully !!

thanks for help !!

regards Jan .-)

my next problem i post by "Problems to define trancparency" .-)

From chaitanya.ch at gmail.com  Mon Nov 28 08:16:03 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 29 00:13:17 2011
Subject: [gdal-dev] Problems to define trancparency
In-Reply-To: <4ED36C1B.6040609@widemann.de>
References: <4ED36C1B.6040609@widemann.de>
Message-ID: <CAMKgpOaUvKrGCuimqwG=Vwa8X82zrV8W_qy64N7qCfk_+Pqmxw@mail.gmail.com>

Jan,

Your original image has a color table with RGBA values. Since it includes
the alpha channel, you can just modify the color table to set the entry for
0 to (0,0,0,0). With a 0 value for alpha, the pixels with 0 value will be
transparent.

But you can set it using the VRT format. This method has been discussed in
this list earlier[1]. However, you have to reapply the whole table's
entries.

It might be easier to change the color table using a desktop GIS
application.

[1]: http://lists.osgeo.org/pipermail/gdal-dev/2011-May/028854.html

On Mon, Nov 28, 2011 at 4:40 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  HI !
>
> after my problems to transform rasterimage now i have a problem to make
> the white background tranparency.
>
> After the translation the new image had following status:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo "D:\City\raster\gas\500\twf_*
> *chec
> k\baseline_etrs.tif"
> Driver: GTiff/GeoTIFF
> Files: D:\City\raster\gas\500\twf_**check\baseline_etrs.tif
> Size is 16568, 9564
> Coordinate System is:
> PROJCS["ETRS89 / UTM zone 32N",
>    GEOGCS["ETRS89",
>        DATUM["European_Terrestrial_**Reference_System_1989",
>            SPHEROID["GRS 1980",6378137,298.**2572221010002,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6258"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.**0174532925199433],
>        AUTHORITY["EPSG","4258"]],
>    PROJECTION["Transverse_**Mercator"],
>    PARAMETER["latitude_of_origin"**,0],
>    PARAMETER["central_meridian",**9],
>    PARAMETER["scale_factor",0.**9996],
>    PARAMETER["false_easting",**500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","25832"]]
> Origin = (380297.397497169380000,**5745229.623735004100000)
> Pixel Size = (0.032091644585721,-0.**032091644585721)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  380297.397, 5745229.624) (  7d15'44.21"E, 51d50'42.10"N)
> Lower Left  (  380297.397, 5744922.699) (  7d15'44.59"E, 51d50'32.17"N)
> Upper Right (  380829.092, 5745229.624) (  7d16'11.98"E, 51d50'42.51"N)
> Lower Right (  380829.092, 5744922.699) (  7d16'12.36"E, 51d50'32.58"N)
> Center      (  380563.245, 5745076.161) (  7d15'58.29"E, 51d50'37.34"N)
> Band 1 Block=16568x1 Type=Byte, ColorInterp=Palette
>  Color Table (RGB with 256 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
>    2: 0,0,0,255
>    3: 0,0,0,255
>    4: 0,0,0,255
>    5: 0,0,0,255
>    6: 0,0,0,255
>    7: 0,0,0,255
>    8: 0,0,0,255
>    9: 0,0,0,255
>   10: 0,0,0,255
>   11: 0,0,0,255
>   12: 0,0,0,255
>   13: 0,0,0,255
>   14: 0,0,0,255
> ....
>
> i try to make the image transparency by
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -srcnodata 0 -dstalpha
> "D:\City\
> raster\gas\500\twf_check\**baseline_etrs.tif" "D:\City\raster\gas\500\twf_
> **check
> \baseline_etrs_t.tif"
> Copying color table from D:\City\raster\gas\500\twf_**check\baseline_etrs.tif
> t
> o new file.
> Creating output file that is 16568P x 9564L.
> ERROR 6: SetColorTable() not supported for multi-sample TIFF files.
> Processing input file D:\City\raster\gas\500\twf_**
> check\baseline_etrs.tif.
>
> but there comes the message "ERROR 6: SetColorTable() not supported for
> multi-sample TIFF files." and the result image is only 1 Color !!!!!!!!
>
> the status now is
> C:\Program Files (x86)\FWTools2.4.7>gdalinfo "D:\City\raster\gas\500\twf_*
> *chec
> k\baseline_etrs_t.tif"
> Driver: GTiff/GeoTIFF
> Files: D:\City\raster\gas\500\twf_**check\baseline_etrs_t.tif
> Size is 16568, 9564
> Coordinate System is:
> PROJCS["ETRS89 / UTM zone 32N",
>    GEOGCS["ETRS89",
>        DATUM["European_Terrestrial_**Reference_System_1989",
>            SPHEROID["GRS 1980",6378137,298.**2572221010002,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6258"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.**0174532925199433],
>        AUTHORITY["EPSG","4258"]],
>    PROJECTION["Transverse_**Mercator"],
>    PARAMETER["latitude_of_origin"**,0],
>    PARAMETER["central_meridian",**9],
>    PARAMETER["scale_factor",0.**9996],
>    PARAMETER["false_easting",**500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","25832"]]
> Origin = (380297.397497169380000,**5745229.623735004100000)
> Pixel Size = (0.032091644585733,-0.**032091644585733)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  380297.397, 5745229.624) (  7d15'44.21"E, 51d50'42.10"N)
> Lower Left  (  380297.397, 5744922.699) (  7d15'44.59"E, 51d50'32.17"N)
> Upper Right (  380829.092, 5745229.624) (  7d16'11.98"E, 51d50'42.51"N)
> Lower Right (  380829.092, 5744922.699) (  7d16'12.36"E, 51d50'32.58"N)
> Center      (  380563.245, 5745076.161) (  7d15'58.29"E, 51d50'37.34"N)
> Band 1 Block=16568x1 Type=Byte, ColorInterp=Gray
>  Mask Flags: PER_DATASET ALPHA
> Band 2 Block=16568x1 Type=Byte, ColorInterp=Alpha
>
> Can anyone help me ??
>
> reagards Jan :-)
>
>
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/b7e77feb/attachment-0001.html
From jdmorgan at unca.edu  Mon Nov 28 09:45:48 2011
From: jdmorgan at unca.edu (jdmorgan)
Date: Tue Nov 29 01:48:06 2011
Subject: [gdal-dev] gdalinfo on win 7 64-bit
Message-ID: <4ED39E9C.3000305@gmail.com>

Please disregard my question on this topic.  I was able to resolve this 
issue on my own.  For the record what I did was open the OSGeo4W 
installer and re-install all of the libraries which seems to have 
cleaned on some dll conflict I am guessing.

Thanks and I am digging this forum.
-- JD Morgan @ NEMAC
From tappenbeck at widemann.de  Mon Nov 28 10:55:15 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Tue Nov 29 03:01:03 2011
Subject: [gdal-dev] error by starting gdal_merge.bat (win7, fwtools 2.4.7)
Message-ID: <4ED3AEE3.9060203@widemann.de>



  Hi !

i try to start a gdal_merge by win7 64 bit and the fwtools 2.4.7

gdal_merge.bat -ul_lr 2601660.7343  5477349.8203  2607572.5742  
5475273.3574 -of GTiff -o %output%_number.tif %input%

but i get the message


C:\Program Files (x86)\FWTools2.4.7>echo off
Traceback (most recent call last):
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 463, in ?
     sys.exit(main())
   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 433, in main
     if quiet == 0 and verbose == 0:
UnboundLocalError: local variable 'quiet' referenced before assignment
C:\Program Files (x86)\FWTools2.4.7>

could everyone tell me the reason for this message ?

reagards Jan :-)

From chaitanya.ch at gmail.com  Mon Nov 28 12:53:47 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 29 05:06:11 2011
Subject: [gdal-dev] error by starting gdal_merge.bat (win7, fwtools 2.4.7)
In-Reply-To: <4ED3AEE3.9060203@widemann.de>
References: <4ED3AEE3.9060203@widemann.de>
Message-ID: <CAMKgpOb48GhN0tRKGZqaw6BHiYCgpeO2jGsAiqRYAOC=e_4k2g@mail.gmail.com>

Jan,

A problem like this could be caused by any number of reasons.
FWTools-2.4.7 for windows is pretty outdated. It's better to uninstall it
and use the binaries from OSGeo4W [1].
See if the error is resolved when using it.

[1]: http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#OSGeo4W

On Mon, Nov 28, 2011 at 9:25 PM, Jan Tappenbeck <tappenbeck@widemann.de>wrote:

>
>
>  Hi !
>
> i try to start a gdal_merge by win7 64 bit and the fwtools 2.4.7
>
> gdal_merge.bat -ul_lr 2601660.7343  5477349.8203  2607572.5742
>  5475273.3574 -of GTiff -o %output%_number.tif %input%
>
> but i get the message
>
>
> C:\Program Files (x86)\FWTools2.4.7>echo off
> Traceback (most recent call last):
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 463, in ?
>    sys.exit(main())
>  File "C:\PROGRA~2\FWTOOL~1.7\bin\**gdal_merge.py", line 433, in main
>    if quiet == 0 and verbose == 0:
> UnboundLocalError: local variable 'quiet' referenced before assignment
> C:\Program Files (x86)\FWTools2.4.7>
>
> could everyone tell me the reason for this message ?
>
> reagards Jan :-)
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111128/dd7bbbdc/attachment.html
From even.rouault at mines-paris.org  Mon Nov 28 13:58:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 29 06:13:46 2011
Subject: [gdal-dev] Gdalinfo.exe is magic, why not bindings ?
In-Reply-To: <CAL81ghDz6COqJO1e6ZjUw8YR7anQDduU+wQsDs=ugGFS5QMiag@mail.gmail.com>
References: <CAL81ghAt-ZYC9MsYqdNxcEhV=ifKnSJ4bXY6cXNekhR8QTY_eA@mail.gmail.com>
	<CAL81ghA7rW3nfEsyyKu33__xyoN94Rfp3gbgxrFOBDjBx73cDA@mail.gmail.com>
	<CAL81ghDz6COqJO1e6ZjUw8YR7anQDduU+wQsDs=ugGFS5QMiag@mail.gmail.com>
Message-ID: <201111281958.09295.even.rouault@mines-paris.org>

Le lundi 28 novembre 2011 12:09:13, Florent JITIAUX a ?crit :
> Hi all,
> 
> well i found the little error from my files. In fact blanks before the name
> of type of the file in the header (GENERAL_INFORMATION_FILE for example)
> missed. That's why i had :
> ERROR 1: Unrecognised data_struct_code value G.
> Field 000 initialization incorrect.
> ERROR 1: Unrecognised data_type_code value E.
> Field 000 initialization incorrect.
> 
> But the size of the control record was correct and size and offset of
> subfields too. Then it's possible to read data after the control record.

OK, exact error messages do help ! So the error is in the generic iso8211 lib, 
not in the SRP driver. If you are in position of compiling GDAL yourself, you 
can try the following patch that turns the error into a warning :

Index: frmts/iso8211/ddffielddefn.cpp
===================================================================
--- frmts/iso8211/ddffielddefn.cpp	(r?vision 23420)
+++ frmts/iso8211/ddffielddefn.cpp	(copie de travail)
@@ -281,7 +281,7 @@
         break;
 
       default:
-        CPLError( CE_Failure, CPLE_AppDefined, 
+        CPLError( CE_Warning, CPLE_AppDefined,
                   "Unrecognised data_struct_code value %c.\n"
                   "Field %s initialization incorrect.",
                   pachFieldArea[0], pszTag );
@@ -320,7 +320,7 @@
         break;
 
       default:
-        CPLError( CE_Failure, CPLE_AppDefined, 
+        CPLError( CE_Warning, CPLE_AppDefined,
                   "Unrecognised data_type_code value %c.\n"
                   "Field %s initialization incorrect.",
                   pachFieldArea[1], pszTag );



It would be interesting if you could share the .gen file so we can better 
investigate.

In any case a ticket in Trac would be welcome so that action can follow.

> 
> I still have a problem to understand how gdalinfo.exe works.
> In the Gdalinfo.class, if the dataset can't be read the dataset = null.
> Getting the driver is done by calling the method ".GetDriver()" from the
> Dataset class. Well if the dataset is null it's impossible to get the
> driver. And in the Gdalinfo.class (in the Gdalinfo.c too) if the dataset is
> null the program exit.
> But as I say I can get the driver with "gdal.IdentifyDriver(pszFilename)".

The IdentifyDriver() doesn't check for the error status, so if the dataset 
return is non null, it will work.

> 
> Then, for me gdalinfo.exe is still magic.

Well, as I said previously, the Open() method of the Java/Python/... bindings 
has extra logic to check for the error status, that a GDALOpen() doesn't do. 
Hence the difference of behaviour between the C/C++ utilities and the Java 
code.

> 
> About Qgis, I download the source to understand how it works. I found in
> the GdalTools_utils.py functions that call gdalinfo with Qprocess. If I
> understand correctly, this is a Qt class "used to start external programs
> and to communicate with them". After Qgis get the output and splits it to
> get information like information giving by gdalinfo.exe.
> That's why I said Qgis use gdalinfo.exe.

The GdalTools do indeed fork GDAL command line utilities. But the core of qgis 
directly uses the GDAL C API. In both cases, the GDAL python bindings are not 
used.

> 
> There's no way to get information with bindings like gdalinfo.exe when
> files contains errors ?

Not without changing code.

I'm wondering if a more general alternative to the ad-hoc fix I proposed above 
would be to alter the binding code to just reset the error status flag if the 
dataset is not null.

Index: swig/include/gdal.i
===================================================================
--- swig/include/gdal.i	(r?vision 23420)
+++ swig/include/gdal.i	(copie de travail)
@@ -670,9 +670,7 @@
   GDALDatasetShadow *ds = GDALOpen( utf8_path, eAccess );
   if( ds != NULL && CPLGetLastErrorType() == CE_Failure )
   {
-      if ( GDALDereferenceDataset( ds ) <= 0 )
-          GDALClose(ds);
-      ds = NULL;
+      CPLErrorReset();
   }
   return (GDALDatasetShadow*) ds;
 }
@@ -692,9 +690,7 @@
   GDALDatasetShadow *ds = GDALOpen( utf8_path, eAccess );
   if( ds != NULL && CPLGetLastErrorType() == CE_Failure )
   {
-      if ( GDALDereferenceDataset( ds ) <= 0 )
-          GDALClose(ds);
-      ds = NULL;
+      CPLErrorReset();
   }
   return (GDALDatasetShadow*) ds;
 }
@@ -708,9 +704,7 @@
   GDALDatasetShadow *ds = GDALOpenShared( utf8_path, eAccess );
   if( ds != NULL && CPLGetLastErrorType() == CE_Failure )
   {
-      if ( GDALDereferenceDataset( ds ) <= 0 )
-          GDALClose(ds);
-      ds = NULL;
+      CPLErrorReset();
   }
   return (GDALDatasetShadow*) ds;
 }



From even.rouault at mines-paris.org  Mon Nov 28 14:01:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 29 06:17:00 2011
Subject: [gdal-dev] Clipping an image via Python API problems
In-Reply-To: <CAMKgpOZmQhvgDSWMLunRHo6duFxdzCwD-gjvL1gZmXqRpc4+3A@mail.gmail.com>
References: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
	<CAG5_Ya21AiviVBr=xgaWeqttuwVx6nswMZe6RQq7XApw=ge0WQ@mail.gmail.com>
	<CAMKgpOZmQhvgDSWMLunRHo6duFxdzCwD-gjvL1gZmXqRpc4+3A@mail.gmail.com>
Message-ID: <201111282001.19483.even.rouault@mines-paris.org>

Le lundi 28 novembre 2011 07:44:26, Chaitanya kumar CH a ?crit :
> I should have said that you need to copy all bands 'individually'.

Well, ReadAsArary() and WriteArray() also exist at the dataset level and will 
read/write all bands.

See :

$ python
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
d = gdal.Open('../autotest/gcore/data/rgbsmall.tif')
>>> d.ReadAsArray()
array([[[  0,   0,   0, ...,  84,  89,  92],
        [  0,   0,   0, ..., 104,  94,  90],
        [  0,   0,   0, ...,  95,  96,  81],
        ..., 
        [  0,   0,   1, ...,  18,  43,  34],
        [  0,   0,   0, ...,  18,  22,  21],
        [  0,   0,   0, ...,  12,  15,  14]],

       [[  0,   0,   0, ..., 124, 138, 146],
        [  0,   0,   0, ..., 145, 141, 139],
        [  0,   0,   0, ..., 136, 140, 125],
        ..., 
        [  0,   0,   1, ...,  46,  67,  54],
        [  0,   0,   0, ...,  43,  42,  39],
        [  0,   0,   0, ...,  37,  35,  32]],

       [[  0,   0,   0, ...,  28,  31,  34],
        [  0,   0,   0, ...,  49,  39,  32],
        [  0,   0,   0, ...,  42,  43,  27],
        ..., 
        [  0,   0,   1, ...,  50,  71,  61],
        [  0,   0,   0, ...,  48,  51,  51],
        [  0,   0,   0, ...,  44,  46,  46]]], dtype=uint8)
From robbkwright at gmail.com  Mon Nov 28 13:23:43 2011
From: robbkwright at gmail.com (Robb Wright)
Date: Tue Nov 29 06:41:03 2011
Subject: [gdal-dev] .ovr files and Lanczos
Message-ID: <4ED3D1AF.5040308@gmail.com>


I'm working with indexed color types of raster data (charts).  The data 
is in RGB geotiffs and I'm using gdaladdo to create pyramid layers for 
them.  Unfortunately, the best method for this raster type available 
using gdaladdo is still pretty bad - much of the linework becomes 
garbled when viewing the pyramids.  The best-looking method that I've 
been able to come up with is:
gdaladdo.exe --config COMPRESS_OVERVIEW DEFLATE -r average

The Lanczos algorithm method works beautifully when used with other 
programs - but I need to create .ovr files.  gdal_retile.py output looks 
great - but I can't figure out how to create .ovr files from that output.

Does anybody know of the availability of the Lanczos resampling method 
for gdaladdo - or of another way to create .ovr files with Lanczos?

Robb
From even.rouault at mines-paris.org  Mon Nov 28 15:29:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 29 07:50:16 2011
Subject: [gdal-dev] Anyone against making OGR SQL 'SUBSTR' conformant with
	other SQL implementations ?
In-Reply-To: <201111242247.05114.even.rouault@mines-paris.org>
References: <201111242247.05114.even.rouault@mines-paris.org>
Message-ID: <201111282129.37055.even.rouault@mines-paris.org>

Le jeudi 24 novembre 2011 22:47:04, Even Rouault a ?crit :
> Hi,
> 
> The implementation of the OGR SQL SUBSTR(string, offset[, length]) function
> considers that the character offset is like the convention of the C
> language, that is to say that the first character is offset 0, the second
> one is offset 1, etc... All other SQL implementations I've found consider
> 1 as the first character, 2 as the second one.
> 
> For details and patch, see http://trac.osgeo.org/gdal/ticket/4348
> 
> The only reason I'm reporting publicly here is that fixing that could break
> existing applications/scripts. The risk seems limited however because this
> function was introduced in 1.8.0 and happens not to be documented in
> http://gdal.org/ogr/ogr_sql.html
> 
> So I think I'll apply the fix in trunk, and likely in 1.8 branch too. With
> a notice in the backward compatibility section of the NEWS file.

Committed in trunk and 1.8 branch.

> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Nov 28 15:46:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 29 08:08:30 2011
Subject: [gdal-dev] OGR SQL, COUNT([DISTINCT] xx)  and NULL values
In-Reply-To: <201111252314.31222.even.rouault@mines-paris.org>
References: <201111252314.31222.even.rouault@mines-paris.org>
Message-ID: <201111282146.52668.even.rouault@mines-paris.org>

Le vendredi 25 novembre 2011 23:14:31, Even Rouault a ?crit :
> Hi,
> 
> http://trac.osgeo.org/gdal/ticket/4354 :
> 
> """Currently, OGR SQL considers COUNT(a_column) as a synonym of COUNT(*).
> However the standard mandates that COUNT(a_column) only count non-NULL
> values, whereas COUNT(*) count all rows (after the effect of WHERE clause
> of course). So COUNT(a_column) should not be considered as equivalent to
> COUNT(*) The same applies for COUNT(DISTINCT a_column): it should only
> count unique non-NULL values.
> What is a bit annoying here is that ogr_sql.html says that : "As a special
> case, the COUNT() operator can be given a "*" argument instead of a field
> name which is a short form for count all the records though it would get
> the same result as giving it any of the column names [...]"
> If we fix the current behaviour to be conformant with the standard, it can
> break assumptions made by users. But currently, there's an inconsistency if
> you look at the result of -sql "select sum(foo), count(foo), avg(foo) from
> bar" when there are null values.
> """
> Perhaps only fix that in trunk (the current behaviour existed in 1.7 and
> likely previous versions, not only in 1.8) ? and in the doc, add a note
> about the difference between new and old behaviour ?

Commited in trunk only

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From graeme at inetix.com.au  Mon Nov 28 18:52:10 2011
From: graeme at inetix.com.au (Graeme Merrall)
Date: Tue Nov 29 11:24:15 2011
Subject: [gdal-dev] Clipping an image via Python API problems
In-Reply-To: <201111282001.19483.even.rouault@mines-paris.org>
References: <CAG5_Ya2_PEVf0sJ_gW6m1GSqKujNAPSPvRtz5RGPrUGOKntgGA@mail.gmail.com>
	<CAG5_Ya21AiviVBr=xgaWeqttuwVx6nswMZe6RQq7XApw=ge0WQ@mail.gmail.com>
	<CAMKgpOZmQhvgDSWMLunRHo6duFxdzCwD-gjvL1gZmXqRpc4+3A@mail.gmail.com>
	<201111282001.19483.even.rouault@mines-paris.org>
Message-ID: <CAG5_Ya09NB0LeNKmGfZa3AUz1nqN6F_k1RQHh8e8KC054g2E0g@mail.gmail.com>

Excellent. Thanks folks for your helpful replies

Cheers,
 Graeme

On Tue, Nov 29, 2011 at 6:01 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le lundi 28 novembre 2011 07:44:26, Chaitanya kumar CH a ?crit :
> > I should have said that you need to copy all bands 'individually'.
>
> Well, ReadAsArary() and WriteArray() also exist at the dataset level and
> will
> read/write all bands.
>
> See :
>
> $ python
> Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41)
> [GCC 4.4.3] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> from osgeo import gdal
> d = gdal.Open('../autotest/gcore/data/rgbsmall.tif')
> >>> d.ReadAsArray()
> array([[[  0,   0,   0, ...,  84,  89,  92],
>        [  0,   0,   0, ..., 104,  94,  90],
>        [  0,   0,   0, ...,  95,  96,  81],
>        ...,
>        [  0,   0,   1, ...,  18,  43,  34],
>        [  0,   0,   0, ...,  18,  22,  21],
>        [  0,   0,   0, ...,  12,  15,  14]],
>
>       [[  0,   0,   0, ..., 124, 138, 146],
>        [  0,   0,   0, ..., 145, 141, 139],
>        [  0,   0,   0, ..., 136, 140, 125],
>        ...,
>        [  0,   0,   1, ...,  46,  67,  54],
>        [  0,   0,   0, ...,  43,  42,  39],
>        [  0,   0,   0, ...,  37,  35,  32]],
>
>       [[  0,   0,   0, ...,  28,  31,  34],
>        [  0,   0,   0, ...,  49,  39,  32],
>        [  0,   0,   0, ...,  42,  43,  27],
>        ...,
>        [  0,   0,   1, ...,  50,  71,  61],
>        [  0,   0,   0, ...,  48,  51,  51],
>        [  0,   0,   0, ...,  44,  46,  46]]], dtype=uint8)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111129/653bb328/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Nov 29 00:58:01 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 29 17:49:52 2011
Subject: [gdal-dev] .ovr files and Lanczos
In-Reply-To: <4ED3D1AF.5040308@gmail.com>
References: <4ED3D1AF.5040308@gmail.com>
Message-ID: <CAMKgpObPr98HPFaXOC4yP22R9K2C5Crwiq3xfWhgDp5pJQLy6Q@mail.gmail.com>

Robb,

If you are using gdal version 1.6 or later, you can use the -ro option[1].
It opens the tiff file in read-only mode and creates external overview.

[1]: http://www.gdal.org/gdaladdo.html

On Mon, Nov 28, 2011 at 11:53 PM, Robb Wright <robbkwright@gmail.com> wrote:

>
> I'm working with indexed color types of raster data (charts).  The data is
> in RGB geotiffs and I'm using gdaladdo to create pyramid layers for them.
>  Unfortunately, the best method for this raster type available using
> gdaladdo is still pretty bad - much of the linework becomes garbled when
> viewing the pyramids.  The best-looking method that I've been able to come
> up with is:
> gdaladdo.exe --config COMPRESS_OVERVIEW DEFLATE -r average
>
> The Lanczos algorithm method works beautifully when used with other
> programs - but I need to create .ovr files.  gdal_retile.py output looks
> great - but I can't figure out how to create .ovr files from that output.
>
> Does anybody know of the availability of the Lanczos resampling method for
> gdaladdo - or of another way to create .ovr files with Lanczos?
>
> Robb
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111129/4b7e1c3e/attachment.html
From robbkwright at gmail.com  Tue Nov 29 01:30:29 2011
From: robbkwright at gmail.com (Robb Wright)
Date: Tue Nov 29 18:26:01 2011
Subject: [gdal-dev] .ovr files and Lanczos
In-Reply-To: <CAMKgpObPr98HPFaXOC4yP22R9K2C5Crwiq3xfWhgDp5pJQLy6Q@mail.gmail.com>
References: <4ED3D1AF.5040308@gmail.com>
	<CAMKgpObPr98HPFaXOC4yP22R9K2C5Crwiq3xfWhgDp5pJQLy6Q@mail.gmail.com>
Message-ID: <4ED47C05.6020609@gmail.com>

Thanks Chaitanya.  Unfortunately gdaladdo doesn't support the Lanczos 
resampling type.  Lanczos creates - by far - the best looking 
downsampled images for my type of rasters.  What I'm looking for is a 
way to create pyramid layers/.ovr files using the Lanczos resampling method.

Robb

On 11/29/2011 12:58 AM, Chaitanya kumar CH wrote:
> Robb,
>
> If you are using gdal version 1.6 or later, you can use the -ro 
> option[1]. It opens the tiff file in read-only mode and creates 
> external overview.
>
> [1]: http://www.gdal.org/gdaladdo.html
>
> On Mon, Nov 28, 2011 at 11:53 PM, Robb Wright <robbkwright@gmail.com 
> <mailto:robbkwright@gmail.com>> wrote:
>
>
>     I'm working with indexed color types of raster data (charts).  The
>     data is in RGB geotiffs and I'm using gdaladdo to create pyramid
>     layers for them.  Unfortunately, the best method for this raster
>     type available using gdaladdo is still pretty bad - much of the
>     linework becomes garbled when viewing the pyramids.  The
>     best-looking method that I've been able to come up with is:
>     gdaladdo.exe --config COMPRESS_OVERVIEW DEFLATE -r average
>
>     The Lanczos algorithm method works beautifully when used with
>     other programs - but I need to create .ovr files.  gdal_retile.py
>     output looks great - but I can't figure out how to create .ovr
>     files from that output.
>
>     Does anybody know of the availability of the Lanczos resampling
>     method for gdaladdo - or of another way to create .ovr files with
>     Lanczos?
>
>     Robb
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111129/6732edd7/attachment.html
From chaitanya.ch at gmail.com  Tue Nov 29 01:57:33 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Nov 29 18:52:44 2011
Subject: [gdal-dev] .ovr files and Lanczos
In-Reply-To: <4ED47C05.6020609@gmail.com>
References: <4ED3D1AF.5040308@gmail.com>
	<CAMKgpObPr98HPFaXOC4yP22R9K2C5Crwiq3xfWhgDp5pJQLy6Q@mail.gmail.com>
	<4ED47C05.6020609@gmail.com>
Message-ID: <CAMKgpOYTSdoju-QXKqnkKsyxvkL=CykLKw48tJmKby0gwo5M3w@mail.gmail.com>

Robb,

Note that the quality is effected by the levels you choose.
Can you provide a small part of the image where the overview is garbled the
most.

On Tue, Nov 29, 2011 at 12:00 PM, Robb Wright <robbkwright@gmail.com> wrote:

>  Thanks Chaitanya.  Unfortunately gdaladdo doesn't support the Lanczos
> resampling type.  Lanczos creates - by far - the best looking downsampled
> images for my type of rasters.  What I'm looking for is a way to create
> pyramid layers/.ovr files using the Lanczos resampling method.
>
> Robb
>
>
> On 11/29/2011 12:58 AM, Chaitanya kumar CH wrote:
>
> Robb,
>
> If you are using gdal version 1.6 or later, you can use the -ro option[1].
> It opens the tiff file in read-only mode and creates external overview.
>
> [1]: http://www.gdal.org/gdaladdo.html
>
> On Mon, Nov 28, 2011 at 11:53 PM, Robb Wright <robbkwright@gmail.com>wrote:
>
>>
>> I'm working with indexed color types of raster data (charts).  The data
>> is in RGB geotiffs and I'm using gdaladdo to create pyramid layers for
>> them.  Unfortunately, the best method for this raster type available using
>> gdaladdo is still pretty bad - much of the linework becomes garbled when
>> viewing the pyramids.  The best-looking method that I've been able to come
>> up with is:
>> gdaladdo.exe --config COMPRESS_OVERVIEW DEFLATE -r average
>>
>> The Lanczos algorithm method works beautifully when used with other
>> programs - but I need to create .ovr files.  gdal_retile.py output looks
>> great - but I can't figure out how to create .ovr files from that output.
>>
>> Does anybody know of the availability of the Lanczos resampling method
>> for gdaladdo - or of another way to create .ovr files with Lanczos?
>>
>> Robb
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111129/a8b0afc2/attachment.html
From schut at sarvision.nl  Tue Nov 29 04:44:39 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Nov 29 21:49:17 2011
Subject: [gdal-dev] python bindings: 2x ds.WriteRaster?
Message-ID: <4ED4A987.20700@sarvision.nl>

Hi list,

Remembering a recent message mentioning the existence of both 
'ReadArray' and 'WriteArray' on the dataset level of the python swig 
bindings, I opened up my gdal.py (svn rev. 23438), and found this:

There is a ds.ReadAsArray()
There is no ds.WriteArray()
There are *2* defined functions ds.WriteRaster() (line 730, and line 767 
in gdal.py).

Especially the last point is bothering me... What is the intention of 
that? Afaik one of those will probably never be called? Should one of 
those have had a different name? Is my gdal.py bad?

Cheers,
Vincent.
From even.rouault at mines-paris.org  Tue Nov 29 05:57:19 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 29 23:06:00 2011
Subject: [gdal-dev] python bindings: 2x ds.WriteRaster?
In-Reply-To: <4ED4A987.20700@sarvision.nl>
References: <4ED4A987.20700@sarvision.nl>
Message-ID: <1322564239.4ed4ba8feb2da@webmail.free.fr>

Selon Vincent Schut <schut@sarvision.nl>:

> Hi list,
>
> Remembering a recent message mentioning the existence of both
> 'ReadArray' and 'WriteArray' on the dataset level of the python swig
> bindings, I opened up my gdal.py (svn rev. 23438), and found this:
>
> There is a ds.ReadAsArray()

line 730

> There is no ds.WriteArray()

actually, there's no WriteArray() at dataset level. It exists only at band
level.

> There are *2* defined functions ds.WriteRaster() (line 730, and line 767
> in gdal.py).
>
> Especially the last point is bothering me... What is the intention of
> that? Afaik one of those will probably never be called? Should one of
> those have had a different name? Is my gdal.py bad?

Your gdal.py is fine, but yes, it is a bit confusing to have 2 definitions. The
last one that overrides the first one will be used. But I agree this could be
fixed to avoid the confusion.

>
> Cheers,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From schut at sarvision.nl  Tue Nov 29 06:03:26 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Nov 29 23:12:18 2011
Subject: [gdal-dev] python bindings: 2x ds.WriteRaster?
In-Reply-To: <1322564239.4ed4ba8feb2da@webmail.free.fr>
References: <4ED4A987.20700@sarvision.nl>
	<1322564239.4ed4ba8feb2da@webmail.free.fr>
Message-ID: <4ED4BBFE.8020203@sarvision.nl>

On 11/29/2011 11:57 AM, Even Rouault wrote:
> Selon Vincent Schut<schut@sarvision.nl>:
>
>> Hi list,
>>
>> Remembering a recent message mentioning the existence of both
>> 'ReadArray' and 'WriteArray' on the dataset level of the python swig
>> bindings, I opened up my gdal.py (svn rev. 23438), and found this:
>>
>> There is a ds.ReadAsArray()
> line 730
>
>> There is no ds.WriteArray()
> actually, there's no WriteArray() at dataset level. It exists only at band
> level.

Ah. It was your own replay in the recent thread 'clipping an image via 
python api problems' that made me thinks this. I quote:
"/Le lundi 28 novembre 2011 07:44:26, Chaitanya kumar CH a ?crit : /
> /I should have said that you need to copy all bands 'individually'.
> /
/Well, ReadAsArary() and WriteArray() also exist at the dataset level and will
read/write all bands./
"

I suppose you meant something different then, no problem.

>
>> There are *2* defined functions ds.WriteRaster() (line 730, and line 767
>> in gdal.py).
>>
>> Especially the last point is bothering me... What is the intention of
>> that? Afaik one of those will probably never be called? Should one of
>> those have had a different name? Is my gdal.py bad?
> Your gdal.py is fine, but yes, it is a bit confusing to have 2 definitions. The
> last one that overrides the first one will be used. But I agree this could be
> fixed to avoid the confusion.
OK, so the last one is the 'valid' one. Good to know.

Thank for the reply.

Vincent Schut.
>
>> Cheers,
>> Vincent.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111129/eaff0389/attachment-0001.html
From eadam at co.lincoln.or.us  Tue Nov 29 12:42:27 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed Nov 30 06:13:33 2011
Subject: [gdal-dev] .ovr files and Lanczos
In-Reply-To: <CAMKgpOYTSdoju-QXKqnkKsyxvkL=CykLKw48tJmKby0gwo5M3w@mail.gmail.com>
References: <4ED3D1AF.5040308@gmail.com>
	<CAMKgpObPr98HPFaXOC4yP22R9K2C5Crwiq3xfWhgDp5pJQLy6Q@mail.gmail.com>
	<4ED47C05.6020609@gmail.com>
	<CAMKgpOYTSdoju-QXKqnkKsyxvkL=CykLKw48tJmKby0gwo5M3w@mail.gmail.com>
Message-ID: <CACqBkM_06fw2T7cuyuUvfRfg+uCeORrWX2=j_pt-yJ8q1Au6KA@mail.gmail.com>

Are .ovr files just tifs with a different file extension?

If so, could you use, gdalwarp -tr # # -r lanczos output.ovr?

Eli

On Mon, Nov 28, 2011 at 10:57 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Robb,
>
> Note that the quality is effected by the levels you choose.
> Can you provide a small part of the image where the overview is garbled the
> most.
>
>
> On Tue, Nov 29, 2011 at 12:00 PM, Robb Wright <robbkwright@gmail.com> wrote:
>>
>> Thanks Chaitanya.? Unfortunately gdaladdo doesn't support the Lanczos
>> resampling type.? Lanczos creates - by far - the best looking downsampled
>> images for my type of rasters.? What I'm looking for is a way to create
>> pyramid layers/.ovr files using the Lanczos resampling method.
>>
>> Robb
>>
>>
>> On 11/29/2011 12:58 AM, Chaitanya kumar CH wrote:
>>
>> Robb,
>>
>> If you are using gdal version 1.6 or later, you can use the -ro option[1].
>> It opens the tiff file in read-only mode and creates external overview.
>>
>> [1]: http://www.gdal.org/gdaladdo.html
>>
>> On Mon, Nov 28, 2011 at 11:53 PM, Robb Wright <robbkwright@gmail.com>
>> wrote:
>>>
>>>
>>> I'm working with indexed color types of raster data (charts). ?The data
>>> is in RGB geotiffs and I'm using gdaladdo to create pyramid layers for them.
>>> ?Unfortunately, the best method for this raster type available using
>>> gdaladdo is still pretty bad - much of the linework becomes garbled when
>>> viewing the pyramids. ?The best-looking method that I've been able to come
>>> up with is:
>>> gdaladdo.exe --config COMPRESS_OVERVIEW DEFLATE -r average
>>>
>>> The Lanczos algorithm method works beautifully when used with other
>>> programs - but I need to create .ovr files. ?gdal_retile.py output looks
>>> great - but I can't figure out how to create .ovr files from that output.
>>>
>>> Does anybody know of the availability of the Lanczos resampling method
>>> for gdaladdo - or of another way to create .ovr files with Lanczos?
>>>
>>> Robb
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Nov 29 13:14:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 30 06:47:05 2011
Subject: [gdal-dev] python bindings: 2x ds.WriteRaster?
In-Reply-To: <4ED4BBFE.8020203@sarvision.nl>
References: <4ED4A987.20700@sarvision.nl>
	<1322564239.4ed4ba8feb2da@webmail.free.fr>
	<4ED4BBFE.8020203@sarvision.nl>
Message-ID: <201111291914.30396.even.rouault@mines-paris.org>

Le mardi 29 novembre 2011 12:03:26, Vincent Schut a ?crit :
> On 11/29/2011 11:57 AM, Even Rouault wrote:
> > Selon Vincent Schut<schut@sarvision.nl>:
> >> Hi list,
> >> 
> >> Remembering a recent message mentioning the existence of both
> >> 'ReadArray' and 'WriteArray' on the dataset level of the python swig
> >> bindings, I opened up my gdal.py (svn rev. 23438), and found this:
> >> 
> >> There is a ds.ReadAsArray()
> > 
> > line 730
> > 
> >> There is no ds.WriteArray()
> > 
> > actually, there's no WriteArray() at dataset level. It exists only at
> > band level.
> 
> Ah. It was your own replay in the recent thread 'clipping an image via
> python api problems' that made me thinks this. I quote:
> "/Le lundi 28 novembre 2011 07:44:26, Chaitanya kumar CH a ?crit : /
> 
> > /I should have said that you need to copy all bands 'individually'.
> > /
> 
> /Well, ReadAsArary() and WriteArray() also exist at the dataset level and
> will read/write all bands./
> "
> 
> I suppose you meant something different then, no problem.

No, in my first replay, as I knew that ReadAsArray() existed, I also naively 
assumed that WriteArray() existed at the dataset level, but did not check... 
Sorry for the confusion
From even.rouault at mines-paris.org  Tue Nov 29 13:43:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 30 07:18:12 2011
Subject: [gdal-dev] .ovr files and Lanczos
In-Reply-To: <CACqBkM_06fw2T7cuyuUvfRfg+uCeORrWX2=j_pt-yJ8q1Au6KA@mail.gmail.com>
References: <4ED3D1AF.5040308@gmail.com>
	<CAMKgpOYTSdoju-QXKqnkKsyxvkL=CykLKw48tJmKby0gwo5M3w@mail.gmail.com>
	<CACqBkM_06fw2T7cuyuUvfRfg+uCeORrWX2=j_pt-yJ8q1Au6KA@mail.gmail.com>
Message-ID: <201111291943.30794.even.rouault@mines-paris.org>

Le mardi 29 novembre 2011 18:42:27, Eli Adam a ?crit :
> Are .ovr files just tifs with a different file extension?
> 
> If so, could you use, gdalwarp -tr # # -r lanczos output.ovr?

Yes, basically .ovr files are just tifs file (actually, I believe it could be 
any raster type recognized by GDAL). There can have some special metadata for 
particular cases like building overviews of 1-bit imagery (black&white), where 
the result of the overview is 8-bit grey level to be nice-looking. But that's 
all.

However note that generally the resampling algorithm of gdalwarp have not been 
coded to be applied to subsampling (they are adapted to reprojection where the 
number of pixels isn't dramatically changed by the operation). So depending on 
which one is used, the result might not be satisfactory.

From radim.blazek at gmail.com  Wed Nov 30 02:14:37 2011
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed Nov 30 20:30:33 2011
Subject: [gdal-dev] Re: Rasterlite / WSGI problem
In-Reply-To: <CAEMrtYphiaaH4zuqtsBjZu39uEYZGXDU37p9vNqoVdkqQcAZhQ@mail.gmail.com>
References: <CAEMrtYphiaaH4zuqtsBjZu39uEYZGXDU37p9vNqoVdkqQcAZhQ@mail.gmail.com>
Message-ID: <CAEMrtYrYdNE19K1e31JL2egB4MXqj7JYtxW1M6wc34RPGkveQQ@mail.gmail.com>

I'll reply to myself in case anyone have the same problem.

Apache is linked to SQLite. SQLite from deb is not compiled with
rtree. WSGI is started as Apache fork, so the process has SQLite (from
/usr/lib/) already loaded and later explicit loading of SQLite lib
with rtree cannot help.

I solved it setting LD_LIBRARY_PATH to point to SQLite with rtree in
/etc/apache2/envvars. I had also tried to compile GDAL staticaly
linked to SpatiaLite but it was not working.

BTW, if RasterliteBand::IReadBlock fails, it does not return an error
and silently sets image to black (rasterlitedataset.cpp:98):

    OGRLayerH hSQLLyr = OGR_DS_ExecuteSQL(poGDS->hDS, osSQL.c_str(),
NULL, NULL);
    if (hSQLLyr == NULL)
    {
        memset(pImage, 0, nBlockXSize * nBlockYSize * nDataTypeSize);
        return CE_None;
    }

Is it OK?

Radim

On Sat, Nov 26, 2011 at 11:45 AM, Radim Blazek <radim.blazek@gmail.com> wrote:
> Hi.
>
> We cannot get Mapserver python mapscript running as WSGI with
> Rasterlite data working. Only a black rectangle is drawn instead of
> the raster. The rectangle is drawn on the right place however.
> Rendering takes very little time, so it seems that no image processing
> is done. ?Spatialite/OGR works correctly (using geometry column from
> raster _metadata table). All other raster/vector data work well.
>
> The strange thing is, that everything works well, if exactly the same
> configuration is run as CGI.
>
> I thougt that threads could be a problem, so I disabled treads where
> possible, but no effect.
>
> Rasterlite data: JPEG or EPSILON, JPEG or EPSILON overviews, SRID correctly set
> GDAL 1.8.1 --with-threads=no
> Mapserver 6.0.1 ?patched to use GDALOpen instead of GDALOpenShared
> WSGI: processes=1 threads=1
>
> Radim
From even.rouault at mines-paris.org  Wed Nov 30 05:28:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 30 05:35:10 2011
Subject: [gdal-dev] Re: Rasterlite / WSGI problem
In-Reply-To: <CAEMrtYrYdNE19K1e31JL2egB4MXqj7JYtxW1M6wc34RPGkveQQ@mail.gmail.com>
References: <CAEMrtYphiaaH4zuqtsBjZu39uEYZGXDU37p9vNqoVdkqQcAZhQ@mail.gmail.com>
	<CAEMrtYrYdNE19K1e31JL2egB4MXqj7JYtxW1M6wc34RPGkveQQ@mail.gmail.com>
Message-ID: <1322648928.4ed60560ee78f@webmail.free.fr>

Selon Radim Blazek <radim.blazek@gmail.com>:

> I'll reply to myself in case anyone have the same problem.
>
> Apache is linked to SQLite. SQLite from deb is not compiled with
> rtree. WSGI is started as Apache fork, so the process has SQLite (from
> /usr/lib/) already loaded and later explicit loading of SQLite lib
> with rtree cannot help.
>
> I solved it setting LD_LIBRARY_PATH to point to SQLite with rtree in
> /etc/apache2/envvars. I had also tried to compile GDAL staticaly
> linked to SpatiaLite but it was not working.

I've never tried static linking with spatialite. Perhaps some configure.in
tweaking required here

>
> BTW, if RasterliteBand::IReadBlock fails, it does not return an error
> and silently sets image to black (rasterlitedataset.cpp:98):
>
>     OGRLayerH hSQLLyr = OGR_DS_ExecuteSQL(poGDS->hDS, osSQL.c_str(),
> NULL, NULL);
>     if (hSQLLyr == NULL)
>     {
>         memset(pImage, 0, nBlockXSize * nBlockYSize * nDataTypeSize);
>         return CE_None;
>     }
>
> Is it OK?

Perhaps CE_Failure would be more appropriate indeed. In the event of an empty
result set, this should return a valid layer, so NULL is definitely when
something is wrong. You can try returning CE_Failure and if it works as you
expect, feel free to commit the change.

>
> Radim
>
> On Sat, Nov 26, 2011 at 11:45 AM, Radim Blazek <radim.blazek@gmail.com>
> wrote:
> > Hi.
> >
> > We cannot get Mapserver python mapscript running as WSGI with
> > Rasterlite data working. Only a black rectangle is drawn instead of
> > the raster. The rectangle is drawn on the right place however.
> > Rendering takes very little time, so it seems that no image processing
> > is done. ?Spatialite/OGR works correctly (using geometry column from
> > raster _metadata table). All other raster/vector data work well.
> >
> > The strange thing is, that everything works well, if exactly the same
> > configuration is run as CGI.
> >
> > I thougt that threads could be a problem, so I disabled treads where
> > possible, but no effect.
> >
> > Rasterlite data: JPEG or EPSILON, JPEG or EPSILON overviews, SRID correctly
> set
> > GDAL 1.8.1 --with-threads=no
> > Mapserver 6.0.1 ?patched to use GDALOpen instead of GDALOpenShared
> > WSGI: processes=1 threads=1
> >
> > Radim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From radim.blazek at gmail.com  Wed Nov 30 07:34:45 2011
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed Nov 30 07:53:37 2011
Subject: [gdal-dev] Re: Rasterlite / WSGI problem
In-Reply-To: <1322648928.4ed60560ee78f@webmail.free.fr>
References: <CAEMrtYphiaaH4zuqtsBjZu39uEYZGXDU37p9vNqoVdkqQcAZhQ@mail.gmail.com>
	<CAEMrtYrYdNE19K1e31JL2egB4MXqj7JYtxW1M6wc34RPGkveQQ@mail.gmail.com>
	<1322648928.4ed60560ee78f@webmail.free.fr>
Message-ID: <CAEMrtYrWptObzBg+W2tiS+YnzWZCjaJ5=_X4TEi2xaNHdfyW9A@mail.gmail.com>

On Wed, Nov 30, 2011 at 11:28 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> BTW, if RasterliteBand::IReadBlock fails, it does not return an error
>> and silently sets image to black (rasterlitedataset.cpp:98):
>>
>> ? ? OGRLayerH hSQLLyr = OGR_DS_ExecuteSQL(poGDS->hDS, osSQL.c_str(),
>> NULL, NULL);
>> ? ? if (hSQLLyr == NULL)
>> ? ? {
>> ? ? ? ? memset(pImage, 0, nBlockXSize * nBlockYSize * nDataTypeSize);
>> ? ? ? ? return CE_None;
>> ? ? }
>>
>> Is it OK?
>
> Perhaps CE_Failure would be more appropriate indeed. In the event of an empty
> result set, this should return a valid layer, so NULL is definitely when
> something is wrong. You can try returning CE_Failure and if it works as you
> expect, feel free to commit the change.

I have tried to set error message with CPLError and return CE_Failure,
but the error message set here is lost and mapserver gets something
like "error reading block 0 0 ..".

Sorry, I have lost already too much time on this, so I am not going to
work on it more.

Radim
From even.rouault at mines-paris.org  Wed Nov 30 08:13:32 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 30 08:28:50 2011
Subject: [gdal-dev] Re: Rasterlite / WSGI problem
In-Reply-To: <CAEMrtYrWptObzBg+W2tiS+YnzWZCjaJ5=_X4TEi2xaNHdfyW9A@mail.gmail.com>
References: <CAEMrtYphiaaH4zuqtsBjZu39uEYZGXDU37p9vNqoVdkqQcAZhQ@mail.gmail.com>
	<CAEMrtYrYdNE19K1e31JL2egB4MXqj7JYtxW1M6wc34RPGkveQQ@mail.gmail.com>
	<1322648928.4ed60560ee78f@webmail.free.fr>
	<CAEMrtYrWptObzBg+W2tiS+YnzWZCjaJ5=_X4TEi2xaNHdfyW9A@mail.gmail.com>
Message-ID: <1322658812.4ed62bfc908fe@webmail.free.fr>


> I have tried to set error message with CPLError and return CE_Failure,
> but the error message set here is lost and mapserver gets something
> like "error reading block 0 0 ..".

Yes, the generic raster layer will also reports an error as soon CE_Failure is
returned, so mapserver will just get the last one that has been emitted, unless
stderr is logged and you watch the logs.

From elliott at cpi.com  Wed Nov 30 09:41:09 2011
From: elliott at cpi.com (elliott)
Date: Wed Nov 30 10:01:15 2011
Subject: [gdal-dev] Covert MODIS Land Temperatures Sinusoidal to Lat Lon
Message-ID: <4ED64085.1060408@cpi.com>

Hello,

I have been searching for a way to convert the MODIS Land Temperature 
data that is in a sinusoidal projection into WSG84 lat/lon but have not 
found any definitive answers.

Any help would be greatly appreciated.

Thanks!
From schut at sarvision.nl  Wed Nov 30 10:26:14 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 30 10:49:09 2011
Subject: [gdal-dev] Covert MODIS Land Temperatures Sinusoidal to Lat Lon
In-Reply-To: <4ED64085.1060408@cpi.com>
References: <4ED64085.1060408@cpi.com>
Message-ID: <4ED64B16.7070409@sarvision.nl>

On 11/30/2011 03:41 PM, elliott wrote:
> Hello,
>
> I have been searching for a way to convert the MODIS Land Temperature 
> data that is in a sinusoidal projection into WSG84 lat/lon but have 
> not found any definitive answers.
>
> Any help would be greatly appreciated.

I've been using this gdalwarp line, though for modis land spectral data 
and not temperature:

gdalwarp -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext' 
-t_srs EPSG:4326 -srcnodata 0 -dstnodata 0 -r cubic -co "TILED=YES" -co 
"TFW=YES"  ${INFILE} ${OUTFILE}

nb it's from a bash script so change the INFILE and OUTFILE stuff, and 
if you want to you can remove the -co tiled and tfw creation options.
ymmv.

Vincent.

>
> Thanks!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Nov 30 11:02:38 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Nov 30 11:27:21 2011
Subject: [gdal-dev] Covert MODIS Land Temperatures Sinusoidal to Lat Lon
In-Reply-To: <4ED64B16.7070409@sarvision.nl>
References: <4ED64085.1060408@cpi.com>
	<4ED64B16.7070409@sarvision.nl>
Message-ID: <CA+TxYvMYNQwzDhTvtPeM8evNUZZs-LiFshTeXo5L88-csShB3A@mail.gmail.com>

Thant works for me too.

A related question, does anyone know of an EPSG code to match this
sinusoidal projection used by MODIS?

Etienne

On Wed, Nov 30, 2011 at 1:26 PM, Vincent Schut <schut@sarvision.nl> wrote:
> On 11/30/2011 03:41 PM, elliott wrote:
>>
>> Hello,
>>
>> I have been searching for a way to convert the MODIS Land Temperature data
>> that is in a sinusoidal projection into WSG84 lat/lon but have not found any
>> definitive answers.
>>
>> Any help would be greatly appreciated.
>
>
> I've been using this gdalwarp line, though for modis land spectral data and
> not temperature:
>
> gdalwarp -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext' -t_srs
> EPSG:4326 -srcnodata 0 -dstnodata 0 -r cubic -co "TILED=YES" -co "TFW=YES"
> ?${INFILE} ${OUTFILE}
>
> nb it's from a bash script so change the INFILE and OUTFILE stuff, and if
> you want to you can remove the -co tiled and tfw creation options.
> ymmv.
>
> Vincent.
>
>
>>
>> Thanks!
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Nov 30 15:20:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 30 15:59:07 2011
Subject: [gdal-dev] Add an option to allow opening datasets/datasources from
	SWIG bindings even in case of error ?
Message-ID: <201111302120.46446.even.rouault@mines-paris.org>

Hi SWIG binding users/devs,

Any opinion on http://trac.osgeo.org/gdal/ticket/4360 ?

"""After the changes done in http://trac.osgeo.org/gdal/changeset/11529 / 
http://trac.osgeo.org/gdal/ticket/1635 , any CE_Failure error emitted by 
CPLError() in the Open() method of GDAL and OGR drivers, and not cleared, will 
cause the swig bindings to return a null dataset, even if the driver returned 
a valid one. 
Sometimes those errors are not critical, and users regularly complain (last 
occurrence is  http://lists.osgeo.org/pipermail/gdal-dev/2011-
November/030960.html ) that they can open them successfully with C/C++ API, 
but not from Java/Python/etc, so I'd suggest the following patch that adds a 
bIgnoreErrors option, that if turned on will reset the error flag in the case 
discussed here. By default, the new option is not turned on. """
Best regards,

Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111130/8ac653a6/attachment.html
