From gane.prog at gmail.com  Thu Oct  1 00:31:33 2015
From: gane.prog at gmail.com (Gane R)
Date: Thu, 1 Oct 2015 13:01:33 +0530
Subject: [gdal-dev] gdalwarp fails to warp for this GeoPDF
Message-ID: <CALMrLdCoJo_c7mpaTnJZPLuraAZS_2QUuVLmVO8LoDeD4__mkA@mail.gmail.com>

Hi,

https://drive.google.com/file/d/0B4shTM1bPS5TZ3psWTFpU1ZuV2c/view?usp=sharing

gdalwarp -t_srs EPSG:3857 "file04.pdf" "file04.tif"

ERROR 6: Failed to initialize PROJ.4 with `+proj=merc +lon_0=0 +k=0 +x_0=0
+y_0=
0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '.
k <= 0

Is this due to PDF driver ?, gdalinfo of this file follows

gdalinfo file04.pdf

Projection: PROJCS["unnamed",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84
",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORI
TY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",
0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTIO
N["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",0],PA
RAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]
  RasterCount: 3
  RasterSize (5388,3341)
Using driver Geospatial PDF
  Metadata:
    0:  AUTHOR=anonymous
    1:  CREATION_DATE=D:20150626141600Z
    2:  NEATLINE=POLYGON ((-9778005.7471570373
5257640.588139087,-9778432.250753
6598 5258664.8154589375,-9776778.2288263608
5259347.8824177133,-9776351.72522973
83 5258323.6550978627,-9778005.7471570373 5257640.588139087))
    3:  PRODUCER=

Corner Coordinates:
  Upper Left (-9778858.754336, 5259689.04274448)
  Lower Left (-9778432.25075366, 5258664.81545894)
  Upper Right (-9777204.73240246, 5260372.10970584)
  Lower Right (-9776778.22882012, 5259347.88242029)
  Center (-9777818.55540679, 5259518.61586393)

Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Band 1 :
   DataType: Byte
   ColorInterpretation: Red
   Description:
   Size (5388,3341)
   BlockSize (5388,1)
   Offset: 0
   Scale: 1
Band 2 :
   DataType: Byte
   ColorInterpretation: Green
   Description:
   Size (5388,3341)
   BlockSize (5388,1)
   Offset: 0
   Scale: 1
Band 3 :
   DataType: Byte
   ColorInterpretation: Blue
   Description:
   Size (5388,3341)
   BlockSize (5388,1)
   Offset: 0
   Scale: 1

Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151001/8b167da3/attachment.html>

From even.rouault at spatialys.com  Thu Oct  1 01:42:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Oct 2015 10:42:36 +0200
Subject: [gdal-dev] gdalwarp fails to warp for this GeoPDF
In-Reply-To: <CALMrLdCoJo_c7mpaTnJZPLuraAZS_2QUuVLmVO8LoDeD4__mkA@mail.gmail.com>
References: <CALMrLdCoJo_c7mpaTnJZPLuraAZS_2QUuVLmVO8LoDeD4__mkA@mail.gmail.com>
Message-ID: <201510011042.36160.even.rouault@spatialys.com>

Le jeudi 01 octobre 2015 09:31:33, Gane R a ?crit :
> Hi,
> 
> https://drive.google.com/file/d/0B4shTM1bPS5TZ3psWTFpU1ZuV2c/view?usp=shari
> ng
> 
> gdalwarp -t_srs EPSG:3857 "file04.pdf" "file04.tif"
> 
> ERROR 6: Failed to initialize PROJ.4 with `+proj=merc +lon_0=0 +k=0 +x_0=0
> +y_0=
> 0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '.
> k <= 0
> 
> Is this due to PDF driver ?, 

I don't think so. Looks like an issue with your GDAL and/or proj.4 install.
The proj.4 string for EPSG:3857 reported above is wrong. It should be (as reported by gdalsrsinfo "EPSG:3857"):

+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jrepetto at free.fr  Thu Oct  1 02:28:49 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 1 Oct 2015 11:28:49 +0200
Subject: [gdal-dev] gdalwarp fails to warp for this GeoPDF
In-Reply-To: <201510011042.36160.even.rouault@spatialys.com>
References: <CALMrLdCoJo_c7mpaTnJZPLuraAZS_2QUuVLmVO8LoDeD4__mkA@mail.gmail.com>
	<201510011042.36160.even.rouault@spatialys.com>
Message-ID: <560CFCD1.8000708@free.fr>

Le 01/10/2015 10:42, Even Rouault a ?crit :
> 
> I don't think so. Looks like an issue with your GDAL and/or proj.4 install.
> The proj.4 string for EPSG:3857 reported above is wrong. It should be (as reported by gdalsrsinfo "EPSG:3857"):
> 
> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs
> 

It fails also here. I think that the problem comes from the projection
parameters stored in the PDF file (the scale factor is null).



From even.rouault at spatialys.com  Thu Oct  1 05:04:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Oct 2015 14:04:50 +0200
Subject: [gdal-dev] Motion: Adopt RFC 59.1: GDAL/OGR utilities as a
	library
In-Reply-To: <201509291245.43181.even.rouault@spatialys.com>
References: <201509291245.43181.even.rouault@spatialys.com>
Message-ID: <201510011404.50263.even.rouault@spatialys.com>

Le mardi 29 septembre 2015 12:45:43, Even Rouault a ?crit :
> Hi,
> 
> Since no remarks have been done on the latest proposal, I move to adopt RFC
> 59.1: GDAL/OGR utilities as a library
> 
> https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library
> 
> Starting with my +1,

Hi,

This motion has passed with +1 from DanielM and myself.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lks64 at mail.ru  Thu Oct  1 04:39:57 2015
From: lks64 at mail.ru (=?UTF-8?B?0JrQvtC90YHRgtCw0L3RgtC40L0g0JvQsNC/0LjQvQ==?=)
Date: Thu, 01 Oct 2015 14:39:57 +0300
Subject: [gdal-dev] (no subject)
Message-ID: <1443699597.744436213@f120.i.mail.ru>


Hi,
CPLSetConfigOption( "GDAL_HTTP_PROXY",proxy.toLocal8Bit().data());
CPLSetConfigOption( "GDAL_PROXY_AUTH", "NTLM" );
CPLSetConfigOption( "GDAL_HTTP_PROXYUSERPWD", " : " );
how to make "bypass proxi for local adresses" ?
? ?????????,
?????????? ?????
lks64 at mail.ru
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151001/73782550/attachment.html>

From bishop.dev at gmail.com  Thu Oct  1 08:36:59 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 1 Oct 2015 18:36:59 +0300
Subject: [gdal-dev] (no subject)
In-Reply-To: <1443699597.744436213@f120.i.mail.ru>
References: <1443699597.744436213@f120.i.mail.ru>
Message-ID: <560D531B.9070903@gmail.com>

Hi Konstantin,

Can you explain your case. For example for WMS driver (TMS) 
GDAL_HTTP_PROXY config option works for me.

Best regards,
     Dmitry

01.10.2015 14:39, ?????????? ????? ?????:
>
> Hi,
>
> CPLSetConfigOption( "GDAL_HTTP_PROXY",proxy.toLocal8Bit().data());
> CPLSetConfigOption( "GDAL_PROXY_AUTH", "NTLM" );
> CPLSetConfigOption( "GDAL_HTTP_PROXYUSERPWD", " : " );
>
> how to make "bypass proxi for local adresses" ?
>
>
> ? ?????????,
> ?????????? ?????
> lks64 at mail.ru
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151001/79ff3e27/attachment.html>

From alexzhdanov1003 at gmail.com  Thu Oct  1 12:18:33 2015
From: alexzhdanov1003 at gmail.com (fazotron)
Date: Thu, 1 Oct 2015 12:18:33 -0700 (PDT)
Subject: [gdal-dev] Allocate large memory space with CPLMalloc(). Bug or not?
Message-ID: <1443727113353-5227443.post@n6.nabble.com>

Hello!

Take a look on the following code:

*...
size_t w = 10000, h = 5000, d = 150;
size_t sz = w * h * d * sizeof(float); // ~27.94 Gb

float *volume = (float*)CPLMalloc(sz);
...*

In this case GDAL throws error in runtime: "ERROR 1: CPLMalloc(-664771072):
Silly size requested."
But I think that it's not silly, because such amount of free RAM is
available on my system. For example I can successfully allocate it calling
standart malloc().

I have opened CPLMalloc() source code and seen the following lines:

*void *CPLMalloc( size_t nSize ) 
...
    if( long(nSize) < 0 )
    {
        CPLError( CE_Failure, CPLE_AppDefined,
                  "CPLMalloc(%ld): Silly size requested.\n",
                  (long) nSize );
        return NULL;
    }
...*

In my case long( size_t nSize ) returns negative value and it leads to
error. 
As far as I understand converting one integer type to another smaller
integer type (e.g. long long/size_t to long) is implementation-defined, so
it's not safe to use CPLMalloc() with 64-bit integers.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Allocate-large-memory-space-with-CPLMalloc-Bug-or-not-tp5227443.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Oct  1 12:37:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Oct 2015 21:37:12 +0200
Subject: [gdal-dev] Allocate large memory space with CPLMalloc(). Bug or
	not?
In-Reply-To: <1443727113353-5227443.post@n6.nabble.com>
References: <1443727113353-5227443.post@n6.nabble.com>
Message-ID: <201510012137.12749.even.rouault@spatialys.com>

Le jeudi 01 octobre 2015 21:18:33, fazotron a ?crit :
> Hello!
> 
> Take a look on the following code:
> 
> *...
> size_t w = 10000, h = 5000, d = 150;
> size_t sz = w * h * d * sizeof(float); // ~27.94 Gb
> 
> float *volume = (float*)CPLMalloc(sz);
> ...*
> 
> In this case GDAL throws error in runtime: "ERROR 1: CPLMalloc(-664771072):
> Silly size requested."
> But I think that it's not silly, because such amount of free RAM is
> available on my system. For example I can successfully allocate it calling
> standart malloc().
> 
> I have opened CPLMalloc() source code and seen the following lines:
> 
> *void *CPLMalloc( size_t nSize )
> ...
>     if( long(nSize) < 0 )
>     {
>         CPLError( CE_Failure, CPLE_AppDefined,
>                   "CPLMalloc(%ld): Silly size requested.\n",
>                   (long) nSize );
>         return NULL;
>     }
> ...*
> 
> In my case long( size_t nSize ) returns negative value and it leads to
> error.
> As far as I understand converting one integer type to another smaller
> integer type (e.g. long long/size_t to long) is implementation-defined, so
> it's not safe to use CPLMalloc() with 64-bit integers.

CPLMalloc() is not meant at being used for big allocations since it aborts if 
the allocation fails. Use VSIMalloc() instead that will return NULL in case of 
failed alloc

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Allocate-large-memory-space-with-CPLMa
> lloc-Bug-or-not-tp5227443.html Sent from the GDAL - Dev mailing list
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kyle at pobox.com  Thu Oct  1 12:36:51 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 1 Oct 2015 13:36:51 -0600
Subject: [gdal-dev] Allocate large memory space with CPLMalloc(). Bug or
	not?
In-Reply-To: <1443727113353-5227443.post@n6.nabble.com>
References: <1443727113353-5227443.post@n6.nabble.com>
Message-ID: <CAJ0mEz1NXtrE1k0-WOfM7QrDnA43nGB3-NxiieHGSi1JhpQv7w@mail.gmail.com>

On Thu, Oct 1, 2015 at 1:18 PM, fazotron <alexzhdanov1003 at gmail.com> wrote:
>
> Hello!
>
> Take a look on the following code:
>
> *...
> size_t w = 10000, h = 5000, d = 150;
> size_t sz = w * h * d * sizeof(float); // ~27.94 Gb
>
> float *volume = (float*)CPLMalloc(sz);
> ...*
>
> In this case GDAL throws error in runtime: "ERROR 1: CPLMalloc(-664771072):
> Silly size requested."
> But I think that it's not silly, because such amount of free RAM is
> available on my system. For example I can successfully allocate it calling
> standart malloc().
>
> I have opened CPLMalloc() source code and seen the following lines:
>
> *void *CPLMalloc( size_t nSize )
> ...
>     if( long(nSize) < 0 )
>     {
>         CPLError( CE_Failure, CPLE_AppDefined,
>                   "CPLMalloc(%ld): Silly size requested.\n",
>                   (long) nSize );
>         return NULL;
>     }
> ...*
>
> In my case long( size_t nSize ) returns negative value and it leads to
> error.
> As far as I understand converting one integer type to another smaller
> integer type (e.g. long long/size_t to long) is implementation-defined, so
> it's not safe to use CPLMalloc() with 64-bit integers.
>

According to the documentation, CPLMalloc is a convenience for
'smaller' allocations where the caller is 'unwilling to test for out
of memory conditions':

/**
 * Safe version of malloc().
 *
 * This function is like the C library malloc(), but raises a CE_Fatal
 * error with CPLError() if it fails to allocate the desired memory.  It
 * should be used for small memory allocations that are unlikely to fail
 * and for which the application is unwilling to test for out of memory
 * conditions.  It uses VSIMalloc() to get the memory, so any hooking of
 * VSIMalloc() will apply to CPLMalloc() as well.  CPLFree() or VSIFree()
 * can be used free memory allocated by CPLMalloc().
 *
 * @param nSize size (in bytes) of memory block to allocate.
 * @return pointer to newly allocated memory, only NULL if nSize is zero.
 */


Use the VSIMalloc*() family, it is just a wrapper for malloc, but
checks for overflow in VSIMalloc2(), VSIMalloc3().

>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Allocate-large-memory-space-with-CPLMalloc-Bug-or-not-tp5227443.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Kyle

From alexzhdanov1003 at gmail.com  Thu Oct  1 13:00:38 2015
From: alexzhdanov1003 at gmail.com (fazotron)
Date: Thu, 1 Oct 2015 13:00:38 -0700 (PDT)
Subject: [gdal-dev] Allocate large memory space with CPLMalloc(). Bug or
	not?
In-Reply-To: <201510012137.12749.even.rouault@spatialys.com>
References: <1443727113353-5227443.post@n6.nabble.com>
	<201510012137.12749.even.rouault@spatialys.com>
Message-ID: <1443729638472-5227452.post@n6.nabble.com>

Thanks for reply, I'll try VSIMalloc().
But can you explain the goal of check *if( long(nSize) < 0 ) {...}* in
CPLMalloc()? Cast size_t to long leads to implicit result.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Allocate-large-memory-space-with-CPLMalloc-Bug-or-not-tp5227443p5227452.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From alexzhdanov1003 at gmail.com  Thu Oct  1 13:02:53 2015
From: alexzhdanov1003 at gmail.com (fazotron)
Date: Thu, 1 Oct 2015 13:02:53 -0700 (PDT)
Subject: [gdal-dev] Allocate large memory space with CPLMalloc(). Bug or
	not?
In-Reply-To: <201510012137.12749.even.rouault@spatialys.com>
References: <1443727113353-5227443.post@n6.nabble.com>
	<201510012137.12749.even.rouault@spatialys.com>
Message-ID: <1443729773691-5227453.post@n6.nabble.com>

Thanks for reply, I'll try VSIMalloc().
But can you explain the goal of check if( long(nSize) < 0 ) {...} in
CPLMalloc()? Cast size_t to long leads to implicit result.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Allocate-large-memory-space-with-CPLMalloc-Bug-or-not-tp5227443p5227453.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From sfkeller at gmail.com  Fri Oct  2 06:38:34 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 2 Oct 2015 15:38:34 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <CAHXrU-J1qqEKsofPCn1A5txK1946ZUS+5XOviO1r99B40vUx8g@mail.gmail.com>
References: <4F7318E0.5020109@geograph.co.za>
	<CAHXrU-J1qqEKsofPCn1A5txK1946ZUS+5XOviO1r99B40vUx8g@mail.gmail.com>
Message-ID: <CAFcOn2800rxSmgihsUjYAaWp1v2hx9p5crBct+Zk5mE2Bq2Ogg@mail.gmail.com>

I have a similar issue and supposedly a very simple question:
Given a file Geomedia .mdb file I'm getting a similar error on Windows.
% ogrinfo myfile.mdb -al -so
How does OGR recognize if it's a Personal Geodatabase or a Geomedia file?

:Stefan

2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei <zoltans at geograph.co.za> wrote:
>> Hi All,
>>
>> I am trying to find a way to list the data type of each field in all tables
>> in a GeoMedia MDB databse.
>>
>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not found!
>>
>> so, sudo apt-get install mdbtools, and tried again and got same error.
>>
>> so, sudo apt-get install gdal-bin and that gave me a newer version than that
>> I did have.
>> Interestingly apt-get returned:    Setting up gdal-bin (1.9.0-1~exp5~lucid4)
>> ...... etc etc
>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
>> 2011/07/09
>>
>
> As you are on Linux, you should avoid the rely on ODBC, and use the
> Geomedia driver [1], only available from gdal 1.9.
> I would test it for you, but I have no Geomedia sample data for testing
>
> p
>
> [1] http://www.gdal.org/ogr/drv_geomedia.html
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From zoltans at geograph.co.za  Fri Oct  2 06:48:09 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 2 Oct 2015 15:48:09 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <CAFcOn2800rxSmgihsUjYAaWp1v2hx9p5crBct+Zk5mE2Bq2Ogg@mail.gmail.com>
References: <4F7318E0.5020109@geograph.co.za>
	<CAHXrU-J1qqEKsofPCn1A5txK1946ZUS+5XOviO1r99B40vUx8g@mail.gmail.com>
	<CAFcOn2800rxSmgihsUjYAaWp1v2hx9p5crBct+Zk5mE2Bq2Ogg@mail.gmail.com>
Message-ID: <560E8B19.9090802@geograph.co.za>

Hi,
Look at http://www.gdal.org/ogr_formats.html

IIRC ogr2ogr needed that - but ogrinfo?  not sure - maybe the -oo param?

You could also use ogrinfo --formats
to see what's available on your system.

Hopefully others will chip in too.
Regards,
Zoltan

On 2015-10-02 15:38, Stefan Keller wrote:
> I have a similar issue and supposedly a very simple question:
> Given a file Geomedia .mdb file I'm getting a similar error on Windows.
> % ogrinfo myfile.mdb -al -so
> How does OGR recognize if it's a Personal Geodatabase or a Geomedia file?
>
> :Stefan
>
> 2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
>> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei <zoltans at geograph.co.za> wrote:
>>> Hi All,
>>>
>>> I am trying to find a way to list the data type of each field in all tables
>>> in a GeoMedia MDB databse.
>>>
>>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not found!
>>>
>>> so, sudo apt-get install mdbtools, and tried again and got same error.
>>>
>>> so, sudo apt-get install gdal-bin and that gave me a newer version than that
>>> I did have.
>>> Interestingly apt-get returned:    Setting up gdal-bin (1.9.0-1~exp5~lucid4)
>>> ...... etc etc
>>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
>>> 2011/07/09
>>>
>> As you are on Linux, you should avoid the rely on ODBC, and use the
>> Geomedia driver [1], only available from gdal 1.9.
>> I would test it for you, but I have no Geomedia sample data for testing
>>
>> p
>>
>> [1] http://www.gdal.org/ogr/drv_geomedia.html
>>
>> --
>> Paolo Corti
>> Geospatial software developer
>> web: http://www.paolocorti.net
>> twitter: @capooti
>> skype: capooti
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From sfkeller at gmail.com  Fri Oct  2 07:35:33 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 2 Oct 2015 16:35:33 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <560E8B19.9090802@geograph.co.za>
References: <4F7318E0.5020109@geograph.co.za>
	<CAHXrU-J1qqEKsofPCn1A5txK1946ZUS+5XOviO1r99B40vUx8g@mail.gmail.com>
	<CAFcOn2800rxSmgihsUjYAaWp1v2hx9p5crBct+Zk5mE2Bq2Ogg@mail.gmail.com>
	<560E8B19.9090802@geograph.co.za>
Message-ID: <CAFcOn2-qdkXTiZw7VmcEMA4KF6esYp6Muume7zr+d9=Q9B2=ZQ@mail.gmail.com>

Zoltan

Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
supports PGeo and Geomedia.
My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
Geomedia and not PGeo (since both have fileextension .mdb)?

:Stefan


2015-10-02 15:48 GMT+02:00 Zoltan Szecsei <zoltans at geograph.co.za>:
> Hi,
> Look at http://www.gdal.org/ogr_formats.html
>
> IIRC ogr2ogr needed that - but ogrinfo?  not sure - maybe the -oo param?
>
> You could also use ogrinfo --formats
> to see what's available on your system.
>
> Hopefully others will chip in too.
> Regards,
> Zoltan
>
>
> On 2015-10-02 15:38, Stefan Keller wrote:
>>
>> I have a similar issue and supposedly a very simple question:
>> Given a file Geomedia .mdb file I'm getting a similar error on Windows.
>> % ogrinfo myfile.mdb -al -so
>> How does OGR recognize if it's a Personal Geodatabase or a Geomedia file?
>>
>> :Stefan
>>
>> 2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
>>>
>>> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei <zoltans at geograph.co.za>
>>> wrote:
>>>>
>>>> Hi All,
>>>>
>>>> I am trying to find a way to list the data type of each field in all
>>>> tables
>>>> in a GeoMedia MDB databse.
>>>>
>>>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not
>>>> found!
>>>>
>>>> so, sudo apt-get install mdbtools, and tried again and got same error.
>>>>
>>>> so, sudo apt-get install gdal-bin and that gave me a newer version than
>>>> that
>>>> I did have.
>>>> Interestingly apt-get returned:    Setting up gdal-bin
>>>> (1.9.0-1~exp5~lucid4)
>>>> ...... etc etc
>>>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
>>>> 2011/07/09
>>>>
>>> As you are on Linux, you should avoid the rely on ODBC, and use the
>>> Geomedia driver [1], only available from gdal 1.9.
>>> I would test it for you, but I have no Geomedia sample data for testing
>>>
>>> p
>>>
>>> [1] http://www.gdal.org/ogr/drv_geomedia.html
>>>
>>> --
>>> Paolo Corti
>>> Geospatial software developer
>>> web: http://www.paolocorti.net
>>> twitter: @capooti
>>> skype: capooti
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> GIS and Photogrammetric Services
>
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> Mobile: +27-83-6004028
> Fax:    +27-86-6115323     www.geograph.co.za
> ===========================================
>

From doug_newcomb at fws.gov  Fri Oct  2 09:59:33 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Fri, 2 Oct 2015 12:59:33 -0400
Subject: [gdal-dev] FLIF format?
Message-ID: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>

Hi Folks,
has anyone heard of the Flif FORMAT?

http://flif.info/

Github site looks like it's only been up a short time.

https://github.com/jonsneyers/FLIF

Doug

-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151002/3f7de7a7/attachment-0001.html>

From sfkeller at gmail.com  Fri Oct  2 10:54:12 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 2 Oct 2015 19:54:12 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <CAFcOn2-qdkXTiZw7VmcEMA4KF6esYp6Muume7zr+d9=Q9B2=ZQ@mail.gmail.com>
References: <4F7318E0.5020109@geograph.co.za>
	<CAHXrU-J1qqEKsofPCn1A5txK1946ZUS+5XOviO1r99B40vUx8g@mail.gmail.com>
	<CAFcOn2800rxSmgihsUjYAaWp1v2hx9p5crBct+Zk5mE2Bq2Ogg@mail.gmail.com>
	<560E8B19.9090802@geograph.co.za>
	<CAFcOn2-qdkXTiZw7VmcEMA4KF6esYp6Muume7zr+d9=Q9B2=ZQ@mail.gmail.com>
Message-ID: <CAFcOn28oTgoTLU1Z1Qye7m0t0bkMC+yxbg9_n154bztyDePBQg@mail.gmail.com>

2015-10-02 16:35 GMT+02:00 I wrote
> Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
> supports PGeo and Geomedia.
> My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
> Geomedia and not PGeo (since both have fileextension .mdb)?

That's the command and the error messages I get:

C:\Users\sfkeller\Downloads>ogrinfo fussgaengerstreifen.mdb -al -so
ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft Access
 Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
[Microsoft][ODBC Driver Manager] Data source name not found and no default drive
r specified
ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft Access
 Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
[Microsoft][ODBC Driver Manager] Data source name not found and no default drive
r specified
FAILURE:
Unable to open datasource `fussgaengerstreifen.mdb' with the following drivers.
  -> OCI
  -> ...

:Stefan


2015-10-02 16:35 GMT+02:00 Stefan Keller <sfkeller at gmail.com>:
> Zoltan
>
> Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
> supports PGeo and Geomedia.
> My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
> Geomedia and not PGeo (since both have fileextension .mdb)?
>
> :Stefan
>
>
> 2015-10-02 15:48 GMT+02:00 Zoltan Szecsei <zoltans at geograph.co.za>:
>> Hi,
>> Look at http://www.gdal.org/ogr_formats.html
>>
>> IIRC ogr2ogr needed that - but ogrinfo?  not sure - maybe the -oo param?
>>
>> You could also use ogrinfo --formats
>> to see what's available on your system.
>>
>> Hopefully others will chip in too.
>> Regards,
>> Zoltan
>>
>>
>> On 2015-10-02 15:38, Stefan Keller wrote:
>>>
>>> I have a similar issue and supposedly a very simple question:
>>> Given a file Geomedia .mdb file I'm getting a similar error on Windows.
>>> % ogrinfo myfile.mdb -al -so
>>> How does OGR recognize if it's a Personal Geodatabase or a Geomedia file?
>>>
>>> :Stefan
>>>
>>> 2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
>>>>
>>>> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei <zoltans at geograph.co.za>
>>>> wrote:
>>>>>
>>>>> Hi All,
>>>>>
>>>>> I am trying to find a way to list the data type of each field in all
>>>>> tables
>>>>> in a GeoMedia MDB databse.
>>>>>
>>>>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not
>>>>> found!
>>>>>
>>>>> so, sudo apt-get install mdbtools, and tried again and got same error.
>>>>>
>>>>> so, sudo apt-get install gdal-bin and that gave me a newer version than
>>>>> that
>>>>> I did have.
>>>>> Interestingly apt-get returned:    Setting up gdal-bin
>>>>> (1.9.0-1~exp5~lucid4)
>>>>> ...... etc etc
>>>>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
>>>>> 2011/07/09
>>>>>
>>>> As you are on Linux, you should avoid the rely on ODBC, and use the
>>>> Geomedia driver [1], only available from gdal 1.9.
>>>> I would test it for you, but I have no Geomedia sample data for testing
>>>>
>>>> p
>>>>
>>>> [1] http://www.gdal.org/ogr/drv_geomedia.html
>>>>
>>>> --
>>>> Paolo Corti
>>>> Geospatial software developer
>>>> web: http://www.paolocorti.net
>>>> twitter: @capooti
>>>> skype: capooti
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> --
>>
>> ===========================================
>> Zoltan Szecsei PrGISc [PGP0031]
>> Geograph (Pty) Ltd.
>> GIS and Photogrammetric Services
>>
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> Mobile: +27-83-6004028
>> Fax:    +27-86-6115323     www.geograph.co.za
>> ===========================================
>>

From even.rouault at spatialys.com  Fri Oct  2 10:58:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 2 Oct 2015 19:58:18 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <CAFcOn28oTgoTLU1Z1Qye7m0t0bkMC+yxbg9_n154bztyDePBQg@mail.gmail.com>
References: <4F7318E0.5020109@geograph.co.za>
	<CAFcOn2-qdkXTiZw7VmcEMA4KF6esYp6Muume7zr+d9=Q9B2=ZQ@mail.gmail.com>
	<CAFcOn28oTgoTLU1Z1Qye7m0t0bkMC+yxbg9_n154bztyDePBQg@mail.gmail.com>
Message-ID: <201510021958.18994.even.rouault@spatialys.com>

Le vendredi 02 octobre 2015 19:54:12, Stefan Keller a ?crit :
> 2015-10-02 16:35 GMT+02:00 I wrote
> 
> > Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
> > supports PGeo and Geomedia.
> > My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
> > Geomedia and not PGeo (since both have fileextension .mdb)?
> 
> That's the command and the error messages I get:
> 
> C:\Users\sfkeller\Downloads>ogrinfo fussgaengerstreifen.mdb -al -so
> ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft
> Access Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
> [Microsoft][ODBC Driver Manager] Data source name not found and no default
> drive r specified
> ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft
> Access Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
> [Microsoft][ODBC Driver Manager] Data source name not found and no default
> drive r specified
> FAILURE:
> Unable to open datasource `fussgaengerstreifen.mdb' with the following
> drivers. -> OCI
>   -> ...

Perhaps you hit https://trac.osgeo.org/gdal/ticket/5594 ?

> 
> :Stefan
> 
> 2015-10-02 16:35 GMT+02:00 Stefan Keller <sfkeller at gmail.com>:
> > Zoltan
> > 
> > Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
> > supports PGeo and Geomedia.
> > My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
> > Geomedia and not PGeo (since both have fileextension .mdb)?
> > 
> > :Stefan
> > 
> > 2015-10-02 15:48 GMT+02:00 Zoltan Szecsei <zoltans at geograph.co.za>:
> >> Hi,
> >> Look at http://www.gdal.org/ogr_formats.html
> >> 
> >> IIRC ogr2ogr needed that - but ogrinfo?  not sure - maybe the -oo param?
> >> 
> >> You could also use ogrinfo --formats
> >> to see what's available on your system.
> >> 
> >> Hopefully others will chip in too.
> >> Regards,
> >> Zoltan
> >> 
> >> On 2015-10-02 15:38, Stefan Keller wrote:
> >>> I have a similar issue and supposedly a very simple question:
> >>> Given a file Geomedia .mdb file I'm getting a similar error on Windows.
> >>> % ogrinfo myfile.mdb -al -so
> >>> How does OGR recognize if it's a Personal Geodatabase or a Geomedia
> >>> file?
> >>> 
> >>> :Stefan
> >>> 
> >>> 2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
> >>>> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei
> >>>> <zoltans at geograph.co.za>
> >>>> 
> >>>> wrote:
> >>>>> Hi All,
> >>>>> 
> >>>>> I am trying to find a way to list the data type of each field in all
> >>>>> tables
> >>>>> in a GeoMedia MDB databse.
> >>>>> 
> >>>>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not
> >>>>> found!
> >>>>> 
> >>>>> so, sudo apt-get install mdbtools, and tried again and got same
> >>>>> error.
> >>>>> 
> >>>>> so, sudo apt-get install gdal-bin and that gave me a newer version
> >>>>> than that
> >>>>> I did have.
> >>>>> Interestingly apt-get returned:    Setting up gdal-bin
> >>>>> (1.9.0-1~exp5~lucid4)
> >>>>> ...... etc etc
> >>>>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
> >>>>> 2011/07/09
> >>>> 
> >>>> As you are on Linux, you should avoid the rely on ODBC, and use the
> >>>> Geomedia driver [1], only available from gdal 1.9.
> >>>> I would test it for you, but I have no Geomedia sample data for
> >>>> testing
> >>>> 
> >>>> p
> >>>> 
> >>>> [1] http://www.gdal.org/ogr/drv_geomedia.html
> >>>> 
> >>>> --
> >>>> Paolo Corti
> >>>> Geospatial software developer
> >>>> web: http://www.paolocorti.net
> >>>> twitter: @capooti
> >>>> skype: capooti
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev at lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> 
> >> --
> >> 
> >> ===========================================
> >> Zoltan Szecsei PrGISc [PGP0031]
> >> Geograph (Pty) Ltd.
> >> GIS and Photogrammetric Services
> >> 
> >> P.O. Box 7, Muizenberg 7950, South Africa.
> >> 
> >> Mobile: +27-83-6004028
> >> Fax:    +27-86-6115323     www.geograph.co.za
> >> ===========================================
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sfkeller at gmail.com  Fri Oct  2 12:16:23 2015
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri, 2 Oct 2015 21:16:23 +0200
Subject: [gdal-dev] MDB tools
In-Reply-To: <201510021958.18994.even.rouault@spatialys.com>
References: <4F7318E0.5020109@geograph.co.za>
	<CAFcOn2-qdkXTiZw7VmcEMA4KF6esYp6Muume7zr+d9=Q9B2=ZQ@mail.gmail.com>
	<CAFcOn28oTgoTLU1Z1Qye7m0t0bkMC+yxbg9_n154bztyDePBQg@mail.gmail.com>
	<201510021958.18994.even.rouault@spatialys.com>
Message-ID: <CAFcOn2-LwOWz2+LXvzb7dasCJhmj_36nifuwPuTpjqFOdu9C0w@mail.gmail.com>

Even, tu es le meilleur...
:Stefan

2015-10-02 19:58 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le vendredi 02 octobre 2015 19:54:12, Stefan Keller a ?crit :
>> 2015-10-02 16:35 GMT+02:00 I wrote
>>
>> > Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
>> > supports PGeo and Geomedia.
>> > My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
>> > Geomedia and not PGeo (since both have fileextension .mdb)?
>>
>> That's the command and the error messages I get:
>>
>> C:\Users\sfkeller\Downloads>ogrinfo fussgaengerstreifen.mdb -al -so
>> ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft
>> Access Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
>> [Microsoft][ODBC Driver Manager] Data source name not found and no default
>> drive r specified
>> ERROR 1: Unable to initialize ODBC connection to DSN for DRIVER=Microsoft
>> Access Driver (*.mdb);DBQ=fussgaengerstreifen.mdb,
>> [Microsoft][ODBC Driver Manager] Data source name not found and no default
>> drive r specified
>> FAILURE:
>> Unable to open datasource `fussgaengerstreifen.mdb' with the following
>> drivers. -> OCI
>>   -> ...
>
> Perhaps you hit https://trac.osgeo.org/gdal/ticket/5594 ?
>
>>
>> :Stefan
>>
>> 2015-10-02 16:35 GMT+02:00 Stefan Keller <sfkeller at gmail.com>:
>> > Zoltan
>> >
>> > Yes, I'm testing GDAL 1.11.2, released 2015/02/10, in Windows which
>> > supports PGeo and Geomedia.
>> > My problem is, how can I tell ogrinfo's and ogr2ogr that myfile.mdb is
>> > Geomedia and not PGeo (since both have fileextension .mdb)?
>> >
>> > :Stefan
>> >
>> > 2015-10-02 15:48 GMT+02:00 Zoltan Szecsei <zoltans at geograph.co.za>:
>> >> Hi,
>> >> Look at http://www.gdal.org/ogr_formats.html
>> >>
>> >> IIRC ogr2ogr needed that - but ogrinfo?  not sure - maybe the -oo param?
>> >>
>> >> You could also use ogrinfo --formats
>> >> to see what's available on your system.
>> >>
>> >> Hopefully others will chip in too.
>> >> Regards,
>> >> Zoltan
>> >>
>> >> On 2015-10-02 15:38, Stefan Keller wrote:
>> >>> I have a similar issue and supposedly a very simple question:
>> >>> Given a file Geomedia .mdb file I'm getting a similar error on Windows.
>> >>> % ogrinfo myfile.mdb -al -so
>> >>> How does OGR recognize if it's a Personal Geodatabase or a Geomedia
>> >>> file?
>> >>>
>> >>> :Stefan
>> >>>
>> >>> 2012-03-28 16:19 GMT+02:00 Paolo Corti <pcorti at gmail.com>:
>> >>>> On Wed, Mar 28, 2012 at 3:57 PM, Zoltan Szecsei
>> >>>> <zoltans at geograph.co.za>
>> >>>>
>> >>>> wrote:
>> >>>>> Hi All,
>> >>>>>
>> >>>>> I am trying to find a way to list the data type of each field in all
>> >>>>> tables
>> >>>>> in a GeoMedia MDB databse.
>> >>>>>
>> >>>>> I tried ogrinfo mdbname and got:  ERROR 1: PGeo: MDB Tools driver not
>> >>>>> found!
>> >>>>>
>> >>>>> so, sudo apt-get install mdbtools, and tried again and got same
>> >>>>> error.
>> >>>>>
>> >>>>> so, sudo apt-get install gdal-bin and that gave me a newer version
>> >>>>> than that
>> >>>>> I did have.
>> >>>>> Interestingly apt-get returned:    Setting up gdal-bin
>> >>>>> (1.9.0-1~exp5~lucid4)
>> >>>>> ...... etc etc
>> >>>>> but afterwards:  ogrinfo --version still returns GDAL 1.8.1, released
>> >>>>> 2011/07/09
>> >>>>
>> >>>> As you are on Linux, you should avoid the rely on ODBC, and use the
>> >>>> Geomedia driver [1], only available from gdal 1.9.
>> >>>> I would test it for you, but I have no Geomedia sample data for
>> >>>> testing
>> >>>>
>> >>>> p
>> >>>>
>> >>>> [1] http://www.gdal.org/ogr/drv_geomedia.html
>> >>>>
>> >>>> --
>> >>>> Paolo Corti
>> >>>> Geospatial software developer
>> >>>> web: http://www.paolocorti.net
>> >>>> twitter: @capooti
>> >>>> skype: capooti
>> >>>> _______________________________________________
>> >>>> gdal-dev mailing list
>> >>>> gdal-dev at lists.osgeo.org
>> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>
>> >> --
>> >>
>> >> ===========================================
>> >> Zoltan Szecsei PrGISc [PGP0031]
>> >> Geograph (Pty) Ltd.
>> >> GIS and Photogrammetric Services
>> >>
>> >> P.O. Box 7, Muizenberg 7950, South Africa.
>> >>
>> >> Mobile: +27-83-6004028
>> >> Fax:    +27-86-6115323     www.geograph.co.za
>> >> ===========================================
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From schwehr at gmail.com  Fri Oct  2 15:19:19 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 2 Oct 2015 15:19:19 -0700
Subject: [gdal-dev] FLIF format?
In-Reply-To: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
References: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
Message-ID: <1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>

Why yes :). Slashdot...

I left them two feature requests already.

> On Oct 2, 2015, at 9:59 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
> 
> Hi Folks,
> has anyone heard of the Flif FORMAT?  
> 
> http://flif.info/
> 
> Github site looks like it's only been up a short time.
> 
> https://github.com/jonsneyers/FLIF
> 
> Doug
> 
> -- 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151002/bdf7666c/attachment.html>

From csbruce at cubewerx.com  Sat Oct  3 15:07:37 2015
From: csbruce at cubewerx.com (Craig Bruce)
Date: Sat, 3 Oct 2015 19:07:37 -0300
Subject: [gdal-dev] FLIF format?
In-Reply-To: <1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>
References: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
	<1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>
Message-ID: <561051A9.9000807@cubewerx.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151003/f39bf08d/attachment.html>

From mateusz at loskot.net  Sun Oct  4 12:18:06 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 4 Oct 2015 21:18:06 +0200
Subject: [gdal-dev] FLIF format?
In-Reply-To: <561051A9.9000807@cubewerx.com>
References: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
	<1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>
	<561051A9.9000807@cubewerx.com>
Message-ID: <CABUeae-c+P5hyHCsCEcOJdqPCnnrbVZJ9qAJAJ20T85vxBQ2Xg@mail.gmail.com>

On 4 October 2015 at 00:07, Craig Bruce <csbruce at cubewerx.com> wrote:
> On 2015-10-02 19:19, Kurt Schwehr wrote:
>
> Why yes :). Slashdot...
>
> The scuttlebutt on Slashdot was about how this format is D.O.A. because the
> reference library is GPLv3-only, which is incompatible with everything else.


They have a reason/plan for that:

"FLIF is currently licensed under the GNU GPL v3+. However, when the
project is more mature, we
(Jon Sneyers and Pieter Wuille, the primary authors of FLIF)
will want to release it under a more permissive license."

https://github.com/jonsneyers/FLIF/blob/master/CONTRIBUTING.md

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From rsignell at usgs.gov  Mon Oct  5 04:54:36 2015
From: rsignell at usgs.gov (Signell, Richard)
Date: Mon, 5 Oct 2015 07:54:36 -0400
Subject: [gdal-dev] FLIF format?
In-Reply-To: <CABUeae-c+P5hyHCsCEcOJdqPCnnrbVZJ9qAJAJ20T85vxBQ2Xg@mail.gmail.com>
References: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
	<1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>
	<561051A9.9000807@cubewerx.com>
	<CABUeae-c+P5hyHCsCEcOJdqPCnnrbVZJ9qAJAJ20T85vxBQ2Xg@mail.gmail.com>
Message-ID: <CAFhraUwMfyWbt_ga4AVDFdbnyWK26OEiC1naTQ2K6zNqduKdWQ@mail.gmail.com>

Check this commit 8 minutes ago:
https://github.com/jonsneyers/FLIF/commit/0c27016a775b5f01f3feb901874a5a45ed9aab1a

On Sun, Oct 4, 2015 at 3:18 PM, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 4 October 2015 at 00:07, Craig Bruce <csbruce at cubewerx.com> wrote:
>> On 2015-10-02 19:19, Kurt Schwehr wrote:
>>
>> Why yes :). Slashdot...
>>
>> The scuttlebutt on Slashdot was about how this format is D.O.A. because the
>> reference library is GPLv3-only, which is incompatible with everything else.
>
>
> They have a reason/plan for that:
>
> "FLIF is currently licensed under the GNU GPL v3+. However, when the
> project is more mature, we
> (Jon Sneyers and Pieter Wuille, the primary authors of FLIF)
> will want to release it under a more permissive license."
>
> https://github.com/jonsneyers/FLIF/blob/master/CONTRIBUTING.md
>
> Best regards,
> --
> Mateusz  Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From doug_newcomb at fws.gov  Mon Oct  5 05:12:51 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Mon, 5 Oct 2015 08:12:51 -0400
Subject: [gdal-dev] FLIF format?
In-Reply-To: <CAFhraUwMfyWbt_ga4AVDFdbnyWK26OEiC1naTQ2K6zNqduKdWQ@mail.gmail.com>
References: <CALQGVr3Z8r3Gf-qgm=GAVR+iLUE9H4tVWh18N99KGc4ncykXow@mail.gmail.com>
	<1CF48EED-CDEB-46BE-84C0-B11FF0BC535F@gmail.com>
	<561051A9.9000807@cubewerx.com>
	<CABUeae-c+P5hyHCsCEcOJdqPCnnrbVZJ9qAJAJ20T85vxBQ2Xg@mail.gmail.com>
	<CAFhraUwMfyWbt_ga4AVDFdbnyWK26OEiC1naTQ2K6zNqduKdWQ@mail.gmail.com>
Message-ID: <CALQGVr0D0JO=qCHc4Avv9yDSJs4WoLWEWyVVdS3ptpnYss8wTA@mail.gmail.com>

Well, explicitly naming the LGPL and any other GPL compatible license
pretty much opens things up.
https://gnu.org/licenses/license-list.html#GPLCompatibleLicenses

Doug

On Mon, Oct 5, 2015 at 7:54 AM, Signell, Richard <rsignell at usgs.gov> wrote:

> Check this commit 8 minutes ago:
>
> https://github.com/jonsneyers/FLIF/commit/0c27016a775b5f01f3feb901874a5a45ed9aab1a
>
> On Sun, Oct 4, 2015 at 3:18 PM, Mateusz Loskot <mateusz at loskot.net> wrote:
> > On 4 October 2015 at 00:07, Craig Bruce <csbruce at cubewerx.com> wrote:
> >> On 2015-10-02 19:19, Kurt Schwehr wrote:
> >>
> >> Why yes :). Slashdot...
> >>
> >> The scuttlebutt on Slashdot was about how this format is D.O.A. because
> the
> >> reference library is GPLv3-only, which is incompatible with everything
> else.
> >
> >
> > They have a reason/plan for that:
> >
> > "FLIF is currently licensed under the GNU GPL v3+. However, when the
> > project is more mature, we
> > (Jon Sneyers and Pieter Wuille, the primary authors of FLIF)
> > will want to release it under a more permissive license."
> >
> > https://github.com/jonsneyers/FLIF/blob/master/CONTRIBUTING.md
> >
> > Best regards,
> > --
> > Mateusz  Loskot, http://mateusz.loskot.net
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Dr. Richard P. Signell   (508) 457-2229
> USGS, 384 Woods Hole Rd.
> Woods Hole, MA 02543-1598
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151005/5c694419/attachment.html>

From pedrongvenancio at gmail.com  Mon Oct  5 15:37:41 2015
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Mon, 5 Oct 2015 23:37:41 +0100
Subject: [gdal-dev] Deviation with gdalwarp
Message-ID: <CAMCJChv3nD8QstZohOw7Fv6Kt1rc40x+zkDGbK=giD112qCMnw@mail.gmail.com>

Hi all,

I have a raster file (ascii) created through an IDW interpolation, with
spatial resolution of 12.5m. I'm using gdalwarp to clip the raster with a
polygon mask. I use the parameter "-tr 12.5 12.5" to keep the original
resolution.

However, the clipped raster is not with the pixels aligned to the original
raster pixels. It's like being moved slightly to one side (a distance less
than the size of a pixel).

Making the cut with Clip grid with polygon of SAGA GIS, the resulting
raster pixels keeps perfectly aligned to the original raster.

How can this deviation be explained with gdalwarp? In this case I have not
used any resampling or coordinate transformation, I just made the clip,
with the command:
gdalwarp -tr 12.5 12.5 -q -cutline D:\Testes\concelho.shp -crop_to_cutline
-of GTiff D:\Testes\idw.asc D:\Testes\idw_clip_gdalwarp.tif

I leave my tests data so you can see the shift that I'm talking about:

https://cld.pt/dl/download/2af4cb16-319f-4b43-988a-a529a9dc9806/Testes.zip

I'm using GDAL 1.11.2.

Thank you very much!

Best regards,
Pedro Ven?ncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151005/f86e2f57/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Oct  5 23:15:03 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 6 Oct 2015 06:15:03 +0000 (UTC)
Subject: [gdal-dev] Deviation with gdalwarp
References: <CAMCJChv3nD8QstZohOw7Fv6Kt1rc40x+zkDGbK=giD112qCMnw@mail.gmail.com>
Message-ID: <loom.20151006T081127-606@post.gmane.org>

Pedro Ven?ncio <pedrongvenancio <at> gmail.com> writes:

> I leave my tests data so you can see the shift that I'm talking
about:https://cld.pt/dl/download/2af4cb16-319f-4b43-988a-a529a9dc9806/Testes.zip


Could you make a new zip with some other program or settings? This one gets
blocked at least by Firefox as potential malware.

-Jukka Rahkonen-

From even.rouault at spatialys.com  Tue Oct  6 00:32:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Oct 2015 09:32:00 +0200
Subject: [gdal-dev] Deviation with gdalwarp
In-Reply-To: <CAMCJChv3nD8QstZohOw7Fv6Kt1rc40x+zkDGbK=giD112qCMnw@mail.gmail.com>
References: <CAMCJChv3nD8QstZohOw7Fv6Kt1rc40x+zkDGbK=giD112qCMnw@mail.gmail.com>
Message-ID: <201510060932.00753.even.rouault@spatialys.com>

Le mardi 06 octobre 2015 00:37:41, Pedro Ven?ncio a ?crit :
> Hi all,
> 
> I have a raster file (ascii) created through an IDW interpolation, with
> spatial resolution of 12.5m. I'm using gdalwarp to clip the raster with a
> polygon mask. I use the parameter "-tr 12.5 12.5" to keep the original
> resolution.
> 
> However, the clipped raster is not with the pixels aligned to the original
> raster pixels. It's like being moved slightly to one side (a distance less
> than the size of a pixel).
> 
> Making the cut with Clip grid with polygon of SAGA GIS, the resulting
> raster pixels keeps perfectly aligned to the original raster.
> 
> How can this deviation be explained with gdalwarp? In this case I have not
> used any resampling or coordinate transformation, I just made the clip,
> with the command:
> gdalwarp -tr 12.5 12.5 -q -cutline D:\Testes\concelho.shp -crop_to_cutline
> -of GTiff D:\Testes\idw.asc D:\Testes\idw_clip_gdalwarp.tif

Pedro,

This a known behaviour of gdalwarp. See 
https://trac.osgeo.org/gdal/ticket/4344

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Oct  6 02:03:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 6 Oct 2015 11:03:24 +0200
Subject: [gdal-dev] How to read ElasticSearch filters from file?
In-Reply-To: <201508271443.39427.even.rouault@spatialys.com>
References: <loom.20150827T135353-815@post.gmane.org>
	<201508271443.39427.even.rouault@spatialys.com>
Message-ID: <201510061103.25270.even.rouault@spatialys.com>

Le jeudi 27 ao?t 2015 14:43:39, Even Rouault a ?crit :
> Le jeudi 27 ao?t 2015 14:26:00, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > I was trying the new read capabilities of the ElasticSearch driver
> > http://www.gdal.org/drv_elasticsearch.html and I found it extraordinary
> > hard to use the json filters from the command line on Windows. It is hard
> > also with curl so I saved the filters on disk and read them as -d
> > @file.json and that worked well for me.
> > 
> > I tried if I could re-use those proved filters with ogrinfo and ogr2ogr
> > by using --optfile but with poor success.
> > 
> > Could it be possible to add a new --config option or perhaps -oo open
> > option "ES_QUERY" for reading the json query/filter from a file just like
> > curl does with -d @file.json? The same file should work unmodified for
> > both software. I think especially newlines which make the filters more
> > readable and also most  filter examples in the net are formatted with
> > newlines. See the examples at
> > https://www.elastic.co/guide/en/elasticsearch/guide/current/search-in-dep
> > th .html
> 
> Hi Jukka,
> 
> Ah, might be true. The Unix shell allows to paste things like:
> 
> $ ogrinfo es: poly2 -where '{ "filter" :
>   { "term" :
>     {
>        "EAS_ID": 166
>     }
>   }
> }'
> 
> And --optfile indeed will consider stuff on several lines as different
> options.
> 
> What about "ogrinfo ES: the_layer -where @filter.json" ?

FYI, I've just implemented this syntax for -where and -sql in ogrinfo and 
ogr2ogr.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pedrongvenancio at gmail.com  Tue Oct  6 04:29:03 2015
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Tue, 6 Oct 2015 12:29:03 +0100
Subject: [gdal-dev] Deviation with gdalwarp
In-Reply-To: <201510060932.00753.even.rouault@spatialys.com>
References: <CAMCJChv3nD8QstZohOw7Fv6Kt1rc40x+zkDGbK=giD112qCMnw@mail.gmail.com>
	<201510060932.00753.even.rouault@spatialys.com>
Message-ID: <CAMCJChu0vZMvLEVWrcZuCXvPUOWHs07xxRU44qV62o-kUrvezw@mail.gmail.com>

Hi Jukka,

I think it is a problem with the hosting service... Sorry...

https://dl.dropboxusercontent.com/u/5772257/qgis/Testes.zip



Hi Even,


> This a known behaviour of gdalwarp. See
> https://trac.osgeo.org/gdal/ticket/4344
>
>
Yes, it is exactly this problem!

-crop_to_cutline (Crop the extent of the target dataset to the extent of
the cutline) adjusts the output raster to the cutting polygon limit, which
maybe why gdalwarp is using that 50% of the pixel to establish the limit.
So, seen from this perspective, I do not know if this is actually a GDAL
bug, because in reality it does what the parameter says, right?

gdalwarp tool used in QGIS is adding -crop_to_cutline parameter by default,
and it leads to the problem.

Thanks!

Best regards,
Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151006/fc55a5d0/attachment.html>

From schwehr at gmail.com  Tue Oct  6 14:07:41 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 6 Oct 2015 14:07:41 -0700
Subject: [gdal-dev] Dropping Windows-CE support?
Message-ID: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>

Hi all,

Any objections to me removing Windows-CE support from GDAL svn-trunk head?

-kurt

https://trac.osgeo.org/gdal/ticket/6133 For removal of MacOS 9 and older.
Even Mentioned WinCE.

find . -name \*.cpp -o -name \*.c -o -name \*.h | egrep -v 'zlib|png|svn' |
xargs egrep -i 'WIN32_WCE|windows ce|wince'
./port/cpl_win32ce_api.h: * Purpose:  ASCII wrappers around only Unicode
Windows CE API.
./port/cpl_win32ce_api.h:#ifndef _CPL_WINCEAPI_H_INCLUDED
./port/cpl_win32ce_api.h:#define _CPL_WINCEAPI_H_INCLUDED    1
./port/cpl_win32ce_api.h: * Windows CE API non-Unicode Wrappers
./port/cpl_win32ce_api.h:/* Replace Windows CE API calls with our own
non-Unicode equivalents. */
./port/cpl_win32ce_api.h:#endif /* #ifndef _CPL_WINCEAPI_H_INCLUDED */
./port/cpl_port.h:#if defined(_WIN32) && !defined(WIN32) &&
!defined(_WIN32_WCE)
./port/cpl_port.h:#if defined(_WINDOWS) && !defined(WIN32) &&
!defined(_WIN32_WCE)
./port/cpl_port.h:/*      We will use WIN32CE as a standard Windows CE
(Mobile) define.   */
./port/cpl_port.h:#if defined(_WIN32_WCE)
./port/cpl_error.cpp:#  include "cpl_wince.h"
./port/cpl_vsi_virtual.h:#  include "cpl_wince.h"
./port/cpl_wince.h: * $Id: cpl_wince.h 10645 2007-01-18 02:22:39Z warmerdam
$
./port/cpl_wince.h: * Purpose:  Windows CE specific declarations.
./port/cpl_wince.h:#ifndef _CPL_WINCE_H_INCLUDED
./port/cpl_wince.h:#define _CPL_WINCE_H_INCLUDED
./port/cpl_wince.h:#endif /* #ifndef _CPL_WINCE_H_INCLUDED */
./port/cpl_vsil_win32.cpp:/*      On WinCE we only support plain ascii
filenames.                 */
./port/cpl_vsisimple.cpp:/* Windows CE or other platforms */
./port/cpl_odbc.cpp:#ifndef WIN32CE /* ODBC is not supported on Windows CE.
*/
./port/cpl_conv.cpp:#  include "cpl_wince.h"
./port/cpl_odbc.h:#ifndef WIN32CE /* ODBC is not supported on Windows CE. */
./port/cpl_win32ce_api.cpp: * Purpose:  ASCII wrappers around only Unicode
Windows CE API.
./port/cplgetsymbol.cpp:/*                 Windows CE Implementation
                        */
./port/cpl_vsi.h:#if !defined(_WIN32) && !defined(_WIN32_WCE)
./port/cpl_vsi.h:#if !defined(_WIN32_WCE)
./port/cpl_vsi.h:/* Windows CE */
./port/cpl_vsi.h:#if defined(_WIN32_WCE)
./ogr/swq.h:#if defined(_WIN32) && !defined(_WIN32_WCE)
./ogr/swq.h:#elif defined(_WIN32_WCE)
./ogr/ogrsf_frmts/ods/ods_formula.h:#if defined(_WIN32) &&
!defined(_WIN32_WCE)
./ogr/ogrsf_frmts/ods/ods_formula.h:#elif defined(_WIN32_WCE)
./ogr/ogrsf_frmts/shape/ogrshapelayer.cpp:#if defined(_WIN32_WCE)
./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToKML() not
supported in the WinCE build." );
./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToJson() not
supported in the WinCE build." );
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151006/2180a1b2/attachment.html>

From mateusz at loskot.net  Tue Oct  6 14:14:37 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 6 Oct 2015 23:14:37 +0200
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
Message-ID: <CABUeae9kA1VuUkjJUjeDYvrjrpTLVRZSHHU5hhe_xmDYm1fhaQ@mail.gmail.com>

On 6 Oct 2015 23:07, "Kurt Schwehr" <schwehr at gmail.com> wrote:
>
> Hi all,
>
> Any objections to me removing Windows-CE support from GDAL svn-trunk head?

A long while ago I called for maintainers as I have no means to keep it up.
I no longer use it myself and I don't think there is active user base, so
+1 from me.

Mateusz ?oskot
(Sent from mobile)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151006/4a26fbf8/attachment.html>

From lucadeluge at gmail.com  Wed Oct  7 03:51:05 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 7 Oct 2015 12:51:05 +0200
Subject: [gdal-dev] postgis OGRFeature crash QGIS
Message-ID: <CAK4m-3z1hojde17cc7eBp0OEYWypJm9YHHKem=3p5iQEQ4aU3Q@mail.gmail.com>

Hi everybody,

I'm fixing some problem with a QGIS plugin, and I'm fighting with a
problem with postgis OGRFeature that it crash QGIS for a
__GI___libc_free problem. The log of gdb is available here [0].

The error appear at the end of write_layer_single function (line 204)
during the return of this file [1]. I tried to fix in several way, but
I'm not able to understand. The error appear only with
postgresql/postgis datasource, not with other.

Thanks a lot for any suggestion


[0] http://pastebin.com/LnjCwsXW
[1] http://pastebin.com/gvsYYwUz

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at spatialys.com  Wed Oct  7 04:18:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Oct 2015 13:18:22 +0200
Subject: [gdal-dev] postgis OGRFeature crash QGIS
In-Reply-To: <CAK4m-3z1hojde17cc7eBp0OEYWypJm9YHHKem=3p5iQEQ4aU3Q@mail.gmail.com>
References: <CAK4m-3z1hojde17cc7eBp0OEYWypJm9YHHKem=3p5iQEQ4aU3Q@mail.gmail.com>
Message-ID: <201510071318.22701.even.rouault@spatialys.com>

Le mercredi 07 octobre 2015 12:51:05, Luca Delucchi a ?crit :
> Hi everybody,
> 
> I'm fixing some problem with a QGIS plugin, and I'm fighting with a
> problem with postgis OGRFeature that it crash QGIS for a
> __GI___libc_free problem. The log of gdb is available here [0].
> 
> The error appear at the end of write_layer_single function (line 204)
> during the return of this file [1]. I tried to fix in several way, but
> I'm not able to understand. The error appear only with
> postgresql/postgis datasource, not with other.
> 
> Thanks a lot for any suggestion

Luca,

I'm not completely sure if this is the reason, but there's at least something 
to correct related to the use of:

self.feat_defn.AddFieldDefn(style_field)

Quoting OGRFeatureDefn::AddFieldDefn() documentation  
http://gdal.org/classOGRFeatureDefn.html#a40e681d8464b42f1a1fac655f16ac3dd :

"To add a new field definition to a layer definition, do not use this function 
directly, but use OGRLayer::CreateField() instead."

Hum actually looking more closely, I think the issue is that you modify the 
layer definition after having accumulated features in the "features" 
dictionary.

Still quoting OGRFeatureDefn::AddFieldDefn() documentation 
"This method should only be called while there are no OGRFeature objects in 
existance based on this OGRFeatureDefn."

So you should probably call outLayer.CreateField() before reading the postgres 
features.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lucadeluge at gmail.com  Wed Oct  7 05:57:55 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 7 Oct 2015 14:57:55 +0200
Subject: [gdal-dev] postgis OGRFeature crash QGIS
In-Reply-To: <201510071318.22701.even.rouault@spatialys.com>
References: <CAK4m-3z1hojde17cc7eBp0OEYWypJm9YHHKem=3p5iQEQ4aU3Q@mail.gmail.com>
	<201510071318.22701.even.rouault@spatialys.com>
Message-ID: <CAK4m-3z-a_nxWP98HeCisxXZegCsD5UQA1fUZ4GvFni3s1RJKg@mail.gmail.com>

On 7 October 2015 at 13:18, Even Rouault <even.rouault at spatialys.com> wrote:

>
> Luca,
>

Hi Even,

> I'm not completely sure if this is the reason, but there's at least something
> to correct related to the use of:
>
> self.feat_defn.AddFieldDefn(style_field)
>
> Quoting OGRFeatureDefn::AddFieldDefn() documentation
> http://gdal.org/classOGRFeatureDefn.html#a40e681d8464b42f1a1fac655f16ac3dd :
>
> "To add a new field definition to a layer definition, do not use this function
> directly, but use OGRLayer::CreateField() instead."
>
> Hum actually looking more closely, I think the issue is that you modify the
> layer definition after having accumulated features in the "features"
> dictionary.
>
> Still quoting OGRFeatureDefn::AddFieldDefn() documentation
> "This method should only be called while there are no OGRFeature objects in
> existance based on this OGRFeatureDefn."
>
> So you should probably call outLayer.CreateField() before reading the postgres
> features.
>

CreateField works perfectly, I also removed the workaround for postgresql

Thanks a lot

> Even
>


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From lucadeluge at gmail.com  Wed Oct  7 06:15:20 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 7 Oct 2015 15:15:20 +0200
Subject: [gdal-dev] Python gdal catch ERROR 6
Message-ID: <CAK4m-3wJjPT_cLJZuBYmCZ1_qwCO81sdD53r9ZGi30hyDJqrLA@mail.gmail.com>

Hi devs,

PDF driver is actually supporting only 8 bit band, and if I try to
create a layer using CreateCopy function with a dataset different from
8 bit I get "ERROR 6: PDF driver doesn't support data type UInt16.
Only eight bit byte bands supported."

I try to catch this error using try/except but it doesn't work, should
I test if the result of CreateCopy is not None? Is there any other
better way to catch this error?

thanks

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at spatialys.com  Wed Oct  7 06:29:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Oct 2015 15:29:29 +0200
Subject: [gdal-dev] Python gdal catch ERROR 6
In-Reply-To: <CAK4m-3wJjPT_cLJZuBYmCZ1_qwCO81sdD53r9ZGi30hyDJqrLA@mail.gmail.com>
References: <CAK4m-3wJjPT_cLJZuBYmCZ1_qwCO81sdD53r9ZGi30hyDJqrLA@mail.gmail.com>
Message-ID: <201510071529.29709.even.rouault@spatialys.com>

Le mercredi 07 octobre 2015 15:15:20, Luca Delucchi a ?crit :
> Hi devs,
> 
> PDF driver is actually supporting only 8 bit band, and if I try to
> create a layer using CreateCopy function with a dataset different from
> 8 bit I get "ERROR 6: PDF driver doesn't support data type UInt16.
> Only eight bit byte bands supported."
> 
> I try to catch this error using try/except but it doesn't work, should
> I test if the result of CreateCopy is not None? Is there any other
> better way to catch this error?

Yes, either test for None return, or call gdal.UseExceptions() and then Python 
exceptions will be thrown when a GDAL error occurs.

> 
> thanks

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Oct  7 10:05:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Oct 2015 19:05:13 +0200
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
Message-ID: <201510071905.13467.even.rouault@spatialys.com>

Le mardi 06 octobre 2015 23:07:41, Kurt Schwehr a ?crit :
> Hi all,
> 
> Any objections to me removing Windows-CE support from GDAL svn-trunk head?

No objections from me.

There are also traces of WIN32CE in other files (such as port/cpl_strtod.cpp)

> 
> -kurt
> 
> https://trac.osgeo.org/gdal/ticket/6133 For removal of MacOS 9 and older.
> Even Mentioned WinCE.
> 
> find . -name \*.cpp -o -name \*.c -o -name \*.h | egrep -v 'zlib|png|svn' |
> xargs egrep -i 'WIN32_WCE|windows ce|wince'
> ./port/cpl_win32ce_api.h: * Purpose:  ASCII wrappers around only Unicode
> Windows CE API.
> ./port/cpl_win32ce_api.h:#ifndef _CPL_WINCEAPI_H_INCLUDED
> ./port/cpl_win32ce_api.h:#define _CPL_WINCEAPI_H_INCLUDED    1
> ./port/cpl_win32ce_api.h: * Windows CE API non-Unicode Wrappers
> ./port/cpl_win32ce_api.h:/* Replace Windows CE API calls with our own
> non-Unicode equivalents. */
> ./port/cpl_win32ce_api.h:#endif /* #ifndef _CPL_WINCEAPI_H_INCLUDED */
> ./port/cpl_port.h:#if defined(_WIN32) && !defined(WIN32) &&
> !defined(_WIN32_WCE)
> ./port/cpl_port.h:#if defined(_WINDOWS) && !defined(WIN32) &&
> !defined(_WIN32_WCE)
> ./port/cpl_port.h:/*      We will use WIN32CE as a standard Windows CE
> (Mobile) define.   */
> ./port/cpl_port.h:#if defined(_WIN32_WCE)
> ./port/cpl_error.cpp:#  include "cpl_wince.h"
> ./port/cpl_vsi_virtual.h:#  include "cpl_wince.h"
> ./port/cpl_wince.h: * $Id: cpl_wince.h 10645 2007-01-18 02:22:39Z warmerdam
> $
> ./port/cpl_wince.h: * Purpose:  Windows CE specific declarations.
> ./port/cpl_wince.h:#ifndef _CPL_WINCE_H_INCLUDED
> ./port/cpl_wince.h:#define _CPL_WINCE_H_INCLUDED
> ./port/cpl_wince.h:#endif /* #ifndef _CPL_WINCE_H_INCLUDED */
> ./port/cpl_vsil_win32.cpp:/*      On WinCE we only support plain ascii
> filenames.                 */
> ./port/cpl_vsisimple.cpp:/* Windows CE or other platforms */
> ./port/cpl_odbc.cpp:#ifndef WIN32CE /* ODBC is not supported on Windows CE.
> */
> ./port/cpl_conv.cpp:#  include "cpl_wince.h"
> ./port/cpl_odbc.h:#ifndef WIN32CE /* ODBC is not supported on Windows CE.
> */ ./port/cpl_win32ce_api.cpp: * Purpose:  ASCII wrappers around only
> Unicode Windows CE API.
> ./port/cplgetsymbol.cpp:/*                 Windows CE Implementation
>                         */
> ./port/cpl_vsi.h:#if !defined(_WIN32) && !defined(_WIN32_WCE)
> ./port/cpl_vsi.h:#if !defined(_WIN32_WCE)
> ./port/cpl_vsi.h:/* Windows CE */
> ./port/cpl_vsi.h:#if defined(_WIN32_WCE)
> ./ogr/swq.h:#if defined(_WIN32) && !defined(_WIN32_WCE)
> ./ogr/swq.h:#elif defined(_WIN32_WCE)
> ./ogr/ogrsf_frmts/ods/ods_formula.h:#if defined(_WIN32) &&
> !defined(_WIN32_WCE)
> ./ogr/ogrsf_frmts/ods/ods_formula.h:#elif defined(_WIN32_WCE)
> ./ogr/ogrsf_frmts/shape/ogrshapelayer.cpp:#if defined(_WIN32_WCE)
> ./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
> ./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
> ./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
> ./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToKML() not
> supported in the WinCE build." );
> ./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
> ./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToJson() not
> supported in the WinCE build." );

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawatw at Princeton.EDU  Wed Oct  7 13:12:04 2015
From: shawatw at Princeton.EDU (Tsering W. Shawa)
Date: Wed, 7 Oct 2015 20:12:04 +0000
Subject: [gdal-dev] combine two raster data
Message-ID: <9A6EAABF3B08204F8E6CD2F68B7F51366B667E11@CSGMBX205W.pu.win.princeton.edu>

I am looking for a script to combine two raster data that have unique values. For example, one raster has administrative unit name and another has land cover data. I want to combine these two raster data to find a relationship between two data. I can do the same process in another GIS software but wanted to find an option to do this using gdal. 

Any suggestion or help will be appreciated.

Thanks,
-Wangyal

From even.rouault at spatialys.com  Wed Oct  7 13:54:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 7 Oct 2015 22:54:09 +0200
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
Message-ID: <201510072254.09408.even.rouault@spatialys.com>

Hi,

I propose to add Kurt Schwehr to the GDAL project steering committee. 

Kurt has been a committer for 2 years, and over the last few months has 
substantially increased his level of involvment, mainly in the area of 
improving code quality, going through the Coverity Scan database of code 
defects, other code cleanups, test suite improvements, ... He has also confirm 
his interest in long term involvment in the project. I believe he would be a 
good asset for the project.

Motion: To add Kurt Schwehr to the GDAL PSC.

+1 from me.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Wed Oct  7 14:15:38 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 8 Oct 2015 00:15:38 +0300
Subject: [gdal-dev] combine two raster data
In-Reply-To: <9A6EAABF3B08204F8E6CD2F68B7F51366B667E11@CSGMBX205W.pu.win.princeton.edu>
References: <9A6EAABF3B08204F8E6CD2F68B7F51366B667E11@CSGMBX205W.pu.win.princeton.edu>
Message-ID: <56158B7A.9080603@gmail.com>

Dear Wangyal,

Well, with the Perl bindings you could do something like this (note: not 
tested code!). I'm assuming many things: the rasters are similar size, 
they are not too big so they fit into memory, etc.

use Modern::Perl;
use Geo::GDAL;

my ($admin,$lu) = @ARGV;

my $ds_admin = Geo::GDAL::Open($admin);
die "can't open $admin as a raster dataset" unless $ds_admin;

my $ds_lu = Geo::GDAL::Open($lu);
die "can't open $lu as a raster dataset" unless $ds_lu;

my $data_admin = $ds_admin->Band(1)->ReadTile;
my $data_lu = $ds_admin->Band(1)->ReadTile;

my %lu_at_admin; # will contain the number of cells of each land use in 
each admin area
for (my $y = 0; $y < @$data_admin-1; $y++) {
     my $row_admin = $data_admin->[$y];
     my $row_lu = $lu_admin->[$y];
     for (my $x = 0; $x < @$row_admin-1; $x++) {
         $lu_at_admin{$row_admin->[$x]}{$row_lu->[$x]}++;
     }
}

for my $admin (sort keys %lu_at_admin) {
     for my $lu (sort keys %{$lu_at_admin{$admin}}) {
         say "There are $lu_at_admin{$admin}{$lu} cells of land use $lu 
in admin area $admin.";
     }
}

Best,

Ari Jolma

On 07.10.2015 23:12, Tsering W. Shawa wrote:
> I am looking for a script to combine two raster data that have unique values. For example, one raster has administrative unit name and another has land cover data. I want to combine these two raster data to find a relationship between two data. I can do the same process in another GIS software but wanted to find an option to do this using gdal.
>
> Any suggestion or help will be appreciated.
>
> Thanks,
> -Wangyal
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Wed Oct  7 15:37:59 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 8 Oct 2015 00:37:59 +0200
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <201510072254.09408.even.rouault@spatialys.com>
References: <201510072254.09408.even.rouault@spatialys.com>
Message-ID: <CACALY+SYNcyMK4QOn0YefRSyu_6Jt_bCQ1761ogZYj+xVkkYjw@mail.gmail.com>

+1

Tamas

2015-10-07 22:54 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> I propose to add Kurt Schwehr to the GDAL project steering committee.
>
> Kurt has been a committer for 2 years, and over the last few months has
> substantially increased his level of involvment, mainly in the area of
> improving code quality, going through the Coverity Scan database of code
> defects, other code cleanups, test suite improvements, ... He has also
> confirm
> his interest in long term involvment in the project. I believe he would be
> a
> good asset for the project.
>
> Motion: To add Kurt Schwehr to the GDAL PSC.
>
> +1 from me.
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/5456124c/attachment.html>

From warmerdam at pobox.com  Wed Oct  7 20:52:54 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 7 Oct 2015 23:52:54 -0400
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <201510072254.09408.even.rouault@spatialys.com>
References: <201510072254.09408.even.rouault@spatialys.com>
Message-ID: <CA+YzLBcZ+_N9-Rwe7FkKCWa3aEc91dksg+uHTRfCOy9DjL6SDg@mail.gmail.com>

Folks,

I worked closely with Kurt at Google, and I am very supportive of
adding him to the GDAL PSC.

+1 Frank

Best regards,
Frank


On Wed, Oct 7, 2015 at 4:54 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> Hi,
>
> I propose to add Kurt Schwehr to the GDAL project steering committee.
>
> Kurt has been a committer for 2 years, and over the last few months has
> substantially increased his level of involvment, mainly in the area of
> improving code quality, going through the Coverity Scan database of code
> defects, other code cleanups, test suite improvements, ... He has also confirm
> his interest in long term involvment in the project. I believe he would be a
> good asset for the project.
>
> Motion: To add Kurt Schwehr to the GDAL PSC.
>
> +1 from me.
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From dmorissette at mapgears.com  Thu Oct  8 04:43:33 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 8 Oct 2015 07:43:33 -0400
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <201510072254.09408.even.rouault@spatialys.com>
References: <201510072254.09408.even.rouault@spatialys.com>
Message-ID: <561656E5.4060609@mapgears.com>

+1

Daniel

On 2015-10-07 4:54 PM, Even Rouault wrote:
> Hi,
>
> I propose to add Kurt Schwehr to the GDAL project steering committee.
>
> Kurt has been a committer for 2 years, and over the last few months has
> substantially increased his level of involvment, mainly in the area of
> improving code quality, going through the Coverity Scan database of code
> defects, other code cleanups, test suite improvements, ... He has also confirm
> his interest in long term involvment in the project. I believe he would be a
> good asset for the project.
>
> Motion: To add Kurt Schwehr to the GDAL PSC.
>
> +1 from me.
>
> Best regards,
>
> Even
>


-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From Ori.Bar at elbitsystems.com  Thu Oct  8 06:16:17 2015
From: Ori.Bar at elbitsystems.com (Bar Ori)
Date: Thu, 8 Oct 2015 13:16:17 +0000
Subject: [gdal-dev] NITF - EDIT TRE
Message-ID: <538E9F517DECA94A86A940F00577EACDF83412FA@MXHFA01.esl.corp.elbit.co.il>

Hi all,
I created a NITF file with my own TRE (not registered). Until here, everything is alright and I also getting the content of it using GetMetadataItem().
The problem is when I create a copy of the file on purpose to edit the data of the TRE.
I tried, as I do with the metadata, to use the creation options for it. The problem is that it makes a duplication of the TRE and I have the old and the new.
I understood from it that it is part of the dataset and the CreateCopy() cause it, so I tried not to add it to the creation options and to use the SetMetadataItem() instead, before calling the CreateCopy(), but I see no change is done.
Does someone have an idea how to solve it?


Ori Bar | Software Developer

T +972-9-8898900 | M +972-504-734296

@ Ori.Bar at Elbitsystems.com<mailto:Ori.Bar at Elbitsystems.com>


[Description: Description: Logo]


The information in this e-mail transmission contains proprietary and business 
sensitive information.  Unauthorized interception of this e-mail may constitute 
a violation of law. If you are not the intended recipient, you are hereby 
notified that any review, dissemination, distribution or duplication of this 
communication is strictly prohibited. You are also asked to contact the sender 
by reply email and immediately destroy all copies of the original message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/03d7e60a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 16487 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/03d7e60a/attachment-0001.png>

From gane.prog at gmail.com  Thu Oct  8 06:30:47 2015
From: gane.prog at gmail.com (Gane R)
Date: Thu, 8 Oct 2015 19:00:47 +0530
Subject: [gdal-dev] Looking for FileGeoDB Writer
Message-ID: <CALMrLdAD8P+RD8APocMwAFN=NbqYWB2T_OF3Ew8B=whH5kAvRw@mail.gmail.com>

Hi all,

I see the OpenFileGDB supports only reading. Is any driver supporting write
filegeodb other than ESRI FileGeoDB driver ?


Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/1afb4f89/attachment.html>

From even.rouault at spatialys.com  Thu Oct  8 06:39:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 8 Oct 2015 15:39:01 +0200
Subject: [gdal-dev] Looking for FileGeoDB Writer
In-Reply-To: <CALMrLdAD8P+RD8APocMwAFN=NbqYWB2T_OF3Ew8B=whH5kAvRw@mail.gmail.com>
References: <CALMrLdAD8P+RD8APocMwAFN=NbqYWB2T_OF3Ew8B=whH5kAvRw@mail.gmail.com>
Message-ID: <201510081539.02140.even.rouault@spatialys.com>

Le jeudi 08 octobre 2015 15:30:47, Gane R a ?crit :
> Hi all,
> 
> I see the OpenFileGDB supports only reading. Is any driver supporting write
> filegeodb other than ESRI FileGeoDB driver ?

Gane,

no, for write support, you need currently to sue the (ESRI SDK based) FileGDB 
driver.

Write support in OpenFileGDB could potentially be added, with the exception of 
spatial indexes whose format hasn't been successfully reverse engineered up to 
now.

Even

> 
> 
> Gane

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gane.prog at gmail.com  Thu Oct  8 07:37:55 2015
From: gane.prog at gmail.com (Gane R)
Date: Thu, 8 Oct 2015 20:07:55 +0530
Subject: [gdal-dev] FileGeoDB using ESRI FileGeoDB
Message-ID: <CALMrLdBkw-aZshZwzQ2=1yqR-HZZVP0=rtgSQzpCN9D2jwpyOg@mail.gmail.com>

Hi all,

Its about redistributing the ESRI FileGeoDB binary with an application,
what are
the conditions enforced for a free application and a paid application
closed source application.

I see post and blogs and I am not still clear.

Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/77d6d771/attachment.html>

From schwehr at gmail.com  Thu Oct  8 11:46:32 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 8 Oct 2015 11:46:32 -0700
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <201510071905.13467.even.rouault@spatialys.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
	<201510071905.13467.even.rouault@spatialys.com>
Message-ID: <CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>

WindowsCE/WinCE/WIN32_WCE has been removed (except in third party libs).

See https://trac.osgeo.org/gdal/ticket/6133 for the 6 changes that remove
it.

People who can build on (non-WinCE) Windows, please build from head if you
can.  I would appreciate knowing if I somehow broke Windows builds so I can
get it fixed ASAP.  I don't think I did, but all I have to go on is the
MingW Travis-CI builds.

Cheers,
-kurt

On Wed, Oct 7, 2015 at 10:05 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 06 octobre 2015 23:07:41, Kurt Schwehr a ?crit :
> > Hi all,
> >
> > Any objections to me removing Windows-CE support from GDAL svn-trunk
> head?
>
> No objections from me.
>
> There are also traces of WIN32CE in other files (such as
> port/cpl_strtod.cpp)
>
> >
> > -kurt
> >
> > https://trac.osgeo.org/gdal/ticket/6133 For removal of MacOS 9 and
> older.
> > Even Mentioned WinCE.
> >
> > find . -name \*.cpp -o -name \*.c -o -name \*.h | egrep -v
> 'zlib|png|svn' |
> > xargs egrep -i 'WIN32_WCE|windows ce|wince'
> > ./port/cpl_win32ce_api.h: * Purpose:  ASCII wrappers around only Unicode
> > Windows CE API.
> > ./port/cpl_win32ce_api.h:#ifndef _CPL_WINCEAPI_H_INCLUDED
> > ./port/cpl_win32ce_api.h:#define _CPL_WINCEAPI_H_INCLUDED    1
> > ./port/cpl_win32ce_api.h: * Windows CE API non-Unicode Wrappers
> > ./port/cpl_win32ce_api.h:/* Replace Windows CE API calls with our own
> > non-Unicode equivalents. */
> > ./port/cpl_win32ce_api.h:#endif /* #ifndef _CPL_WINCEAPI_H_INCLUDED */
> > ./port/cpl_port.h:#if defined(_WIN32) && !defined(WIN32) &&
> > !defined(_WIN32_WCE)
> > ./port/cpl_port.h:#if defined(_WINDOWS) && !defined(WIN32) &&
> > !defined(_WIN32_WCE)
> > ./port/cpl_port.h:/*      We will use WIN32CE as a standard Windows CE
> > (Mobile) define.   */
> > ./port/cpl_port.h:#if defined(_WIN32_WCE)
> > ./port/cpl_error.cpp:#  include "cpl_wince.h"
> > ./port/cpl_vsi_virtual.h:#  include "cpl_wince.h"
> > ./port/cpl_wince.h: * $Id: cpl_wince.h 10645 2007-01-18 02:22:39Z
> warmerdam
> > $
> > ./port/cpl_wince.h: * Purpose:  Windows CE specific declarations.
> > ./port/cpl_wince.h:#ifndef _CPL_WINCE_H_INCLUDED
> > ./port/cpl_wince.h:#define _CPL_WINCE_H_INCLUDED
> > ./port/cpl_wince.h:#endif /* #ifndef _CPL_WINCE_H_INCLUDED */
> > ./port/cpl_vsil_win32.cpp:/*      On WinCE we only support plain ascii
> > filenames.                 */
> > ./port/cpl_vsisimple.cpp:/* Windows CE or other platforms */
> > ./port/cpl_odbc.cpp:#ifndef WIN32CE /* ODBC is not supported on Windows
> CE.
> > */
> > ./port/cpl_conv.cpp:#  include "cpl_wince.h"
> > ./port/cpl_odbc.h:#ifndef WIN32CE /* ODBC is not supported on Windows CE.
> > */ ./port/cpl_win32ce_api.cpp: * Purpose:  ASCII wrappers around only
> > Unicode Windows CE API.
> > ./port/cplgetsymbol.cpp:/*                 Windows CE Implementation
> >                         */
> > ./port/cpl_vsi.h:#if !defined(_WIN32) && !defined(_WIN32_WCE)
> > ./port/cpl_vsi.h:#if !defined(_WIN32_WCE)
> > ./port/cpl_vsi.h:/* Windows CE */
> > ./port/cpl_vsi.h:#if defined(_WIN32_WCE)
> > ./ogr/swq.h:#if defined(_WIN32) && !defined(_WIN32_WCE)
> > ./ogr/swq.h:#elif defined(_WIN32_WCE)
> > ./ogr/ogrsf_frmts/ods/ods_formula.h:#if defined(_WIN32) &&
> > !defined(_WIN32_WCE)
> > ./ogr/ogrsf_frmts/ods/ods_formula.h:#elif defined(_WIN32_WCE)
> > ./ogr/ogrsf_frmts/shape/ogrshapelayer.cpp:#if defined(_WIN32_WCE)
> > ./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
> > ./ogr/ogrsf_frmts/geojson/libjson/config.h:#ifdef _WIN32_WCE
> > ./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
> > ./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToKML() not
> > supported in the WinCE build." );
> > ./ogr/ogrgeometry.cpp:#ifndef _WIN32_WCE
> > ./ogr/ogrgeometry.cpp:              "OGRGeometry::exportToJson() not
> > supported in the WinCE build." );
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/8161c750/attachment.html>

From even.rouault at spatialys.com  Thu Oct  8 12:01:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 8 Oct 2015 21:01:57 +0200
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
	<201510071905.13467.even.rouault@spatialys.com>
	<CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>
Message-ID: <201510082101.57853.even.rouault@spatialys.com>

Le jeudi 08 octobre 2015 20:46:32, Kurt Schwehr a ?crit :
> WindowsCE/WinCE/WIN32_WCE has been removed (except in third party libs).
> 
> See https://trac.osgeo.org/gdal/ticket/6133 for the 6 changes that remove
> it.
> 
> People who can build on (non-WinCE) Windows, please build from head if you
> can.  I would appreciate knowing if I somehow broke Windows builds so I can
> get it fixed ASAP. 

Just reminding everyone that there are AppVeyor Windows builds running each 
time SVN changes are mirrored to GIT ( every 15 minutes ) :

https://ci.appveyor.com/project/rouault/gdal-coverage/history

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Thu Oct  8 13:18:13 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 8 Oct 2015 13:18:13 -0700 (PDT)
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
	<201510071905.13467.even.rouault@spatialys.com>
	<CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>
Message-ID: <1444335493397-5228858.post@n6.nabble.com>

Kurt,

I have checked building latest trunk on Windows 8.1 with VS2015 and 32-bit
build seems fine.

Regards,
Mateusz



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Dropping-Windows-CE-support-tp5228341p5228858.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schwehr at gmail.com  Thu Oct  8 13:33:03 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 8 Oct 2015 13:33:03 -0700
Subject: [gdal-dev] Dropping Windows-CE support?
In-Reply-To: <1444335493397-5228858.post@n6.nabble.com>
References: <CACmBxyssp2iKzd_asYFbkN43eqDiYQEgrx2OqjEwV+Xjn2iDbg@mail.gmail.com>
	<201510071905.13467.even.rouault@spatialys.com>
	<CACmBxyvhygarCDokmEX-YJg+=F36GS1Pqnh98HO6GqG_9-RH5w@mail.gmail.com>
	<1444335493397-5228858.post@n6.nabble.com>
Message-ID: <CACmBxytHE8f=x6j3FFAXDdDNsaM+M0p+dpooeH9f_iJGATL9-g@mail.gmail.com>

Mateusz, Thanks for the build test.  Even, thanks for the pointer to the
Appveyor builds.

On Thu, Oct 8, 2015 at 1:18 PM, Mateusz Loskot <mateusz at loskot.net> wrote:

> Kurt,
>
> I have checked building latest trunk on Windows 8.1 with VS2015 and 32-bit
> build seems fine.
>
> Regards,
> Mateusz
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Dropping-Windows-CE-support-tp5228341p5228858.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151008/c735ee94/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct  9 01:25:20 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 9 Oct 2015 08:25:20 +0000 (UTC)
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
References: <201510072254.09408.even.rouault@spatialys.com>
Message-ID: <loom.20151009T102455-591@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> I propose to add Kurt Schwehr to the GDAL project steering committee. 

+1

-Jukka Rahkonen-





From howard at hobu.co  Fri Oct  9 07:08:28 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 9 Oct 2015 09:08:28 -0500
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <loom.20151009T102455-591@post.gmane.org>
References: <201510072254.09408.even.rouault@spatialys.com>
 <loom.20151009T102455-591@post.gmane.org>
Message-ID: <A86639C2-2038-45CD-9E18-2BD8CB13EAD3@hobu.co>


> On Oct 9, 2015, at 3:25 AM, Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi> wrote:
> 
> Even Rouault <even.rouault <at> spatialys.com> writes:
> 
>> 
>> Hi,
>> 
>> I propose to add Kurt Schwehr to the GDAL project steering committee. 
> 
> +1

+1

Howard

From rainer.woitok at gmail.com  Fri Oct  9 09:47:42 2015
From: rainer.woitok at gmail.com (Dr Rainer Woitok)
Date: Fri, 9 Oct 2015 18:47:42 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
Message-ID: <22039.61358.657000.718699@woitok.gmail.com>

Greetings,

yesterday I cloned the Gdal source repository from

   https://github.com/OSGeo/gdal.git

and converted  it to a Mercurial repository,  simply  because that's the
version control software I'm at home with.  In Mercurial the most recent
commit of the repository looks like this

   2015-10-08 13:48:32 +0000 even.rouault at mines-paris.org

   test_gdal_grid_lib_1(): fix failure when GEOS not available

   git-svn-id: https://svn.osgeo.org/gdal/trunk at 30908 f0d54148-0727-0410-94bb-9a71ac55c965

   M autotest/utilities/test_gdal_grid_lib.py

and the corresponding Git revision of this commit most probably is

   592b969358dba7119acb24bdac2a204808ff96d4

I then tried to compile Gdal  under a reasonably current version of Cyg-
win as a non-privileged user running

   ./configure --mandir=$REPO/share/man  \
               --prefix=$REPO            \
               --with-geotiff=internal   \
               --with-gif=internal       \
               --with-jpeg=internal      \
               --with-libjson-c=internal \
               --with-libtiff=internal   \
               --with-libz=internal      \
               --with-pcidsk=internal    \
               --with-pcraster=internal  \
               --with-perl=no            \
               --with-png=internal       \
               --with-python=yes         \
               --with-qhull=internal
   make clean
   make install        # This automatically also makes target "default".

Things went well until  "make" entered directory "swig/python/" where it
produced plenty of warnings (which may or may not be relevant to my cur-
rent problem) and terminated with the error message "collect2: error: ld
returned 1 exit status".  I have included the log from where "make" ent-
ers directory "swig/python/" up to the final error below.

On the Gdal webpage at  "http://trac.osgeo.org/gdal/wiki/BuildingOnUnix"
I found  the hint to  use the "configure" option "--with-pymodir=direct-
ory", but this is rejected with

   configure: WARNING: unrecognized options: --with-pymodir

What am I missing?  Any pointers welcome.

A few additional remarks:

"configure" is issuing a message saying "checking for shared library run
path origin... /bin/sh: ./config.rpath:  No such file or directory", but
a script "config.rpath" is not (and never was) contained in the reposit-
ory I cloned.

"config.status" is issuing a  warning saying "'GDALmake.opt.in' seems to
ignore the --datarootdir setting",  and according to my own observations
either "configure" or "GDALmake.opt"  ignore the "--mandir" setting  and
just use "PREFIX/man", regardless.

The webpage  already mentioned  above is also  saying that  under Cygwin
"shared libraries are not supported", which is sort of wrong, since Cyg-
win uses Windows DLLs which should just be stored in "PREFIX/bin".

Sincerely,
  Rainer

 ----------------------------------------------------------------------
| Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
| Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
| D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
| Germany                        |                                     |
 ----------------------------------------------------------------------

make[2]: Entering directory '/home/Rainer/repo/gdal/swig/python' python
setup.py build running build running build_py creating build creating
build/lib.cygwin-2.2.1-i686-2.7 copying gdal.py ->
build/lib.cygwin-2.2.1-i686-2.7 copying ogr.py ->
build/lib.cygwin-2.2.1-i686-2.7 copying osr.py ->
build/lib.cygwin-2.2.1-i686-2.7 copying gdalconst.py ->
build/lib.cygwin-2.2.1-i686-2.7 copying gnm.py ->
build/lib.cygwin-2.2.1-i686-2.7 creating
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdal.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdalconst.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdalnumeric.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdal_array.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gnm.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/ogr.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/osr.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/__init__.py ->
build/lib.cygwin-2.2.1-i686-2.7/osgeo running build_ext building
'osgeo._gdal' extension creating build/temp.cygwin-2.2.1-i686-2.7
creating build/temp.cygwin-2.2.1-i686-2.7/extensions gcc
-fno-strict-aliasing -ggdb -O2 -pipe -Wimplicit-function-declaration
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/src/debug/python-2.7.10-1
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2.7.10=/usr/src/debug/python-2.7.10-1
-DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
-I../../gnm -I../../apps -I/usr/include/python2.7
-I. -I/home/Rainer/repo/gdal/include -c extensions/gdal_wrap.cpp -o
build/temp.cygwin-2.2.1-i686-2.7/extensions/gdal_wrap.o cc1plus:
warning: command line option -Wimplicit-function-declaration is
valid for C/ObjC but not for C++ cc1plus: warning: command line option
-Wstrict-prototypes is valid for C/ObjC but not for C++ In file
included from /usr/include/python2.7/Python.h:133:0,
                 from extensions/gdal_wrap.cpp:154:
extensions/gdal_wrap.cpp: In function PyObject* _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
/usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
 #define PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
                                                              ^
extensions/gdal_wrap.cpp:8611:31: note: in expansion of macro PyMapping_Items
         PyObject *item_list = PyMapping_Items( obj1 );
                               ^
extensions/gdal_wrap.cpp: In function PyObject* _wrap_VirtualMem_GetAddr(PyObject*, PyObject*):
extensions/gdal_wrap.cpp:11596:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "B";
                   ^
extensions/gdal_wrap.cpp:11601:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "h";
                   ^
extensions/gdal_wrap.cpp:11606:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "H";
                   ^
extensions/gdal_wrap.cpp:11611:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "i";
                   ^
extensions/gdal_wrap.cpp:11616:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "I";
                   ^
extensions/gdal_wrap.cpp:11621:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "f";
                   ^
extensions/gdal_wrap.cpp:11626:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "F";
                   ^
extensions/gdal_wrap.cpp:11631:19: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
       buf->format = "B";
                   ^
extensions/gdal_wrap.cpp: In function PyObject* _wrap_Band_ComputeStatistics(PyObject*, PyObject*):
extensions/gdal_wrap.cpp:16433:10: warning: variable result set but not used [-Wunused-but-set-variable]
   CPLErr result;
          ^ g++ -shared -Wl,--enable-auto-image-base
-L. build/temp.cygwin-2.2.1-i686-2.7/extensions/gdal_wrap.o
-L../../.libs -L../../ -L/usr/lib/python2.7/config -L/usr/lib
-L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gdal.dll building
'osgeo._gdalconst' extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
-Wimplicit-function-declaration
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/src/debug/python-2.7.10-1
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2.7.10=/usr/src/debug/python-2.7.10-1
-DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
-I../../gnm -I../../apps -I/usr/include/python2.7
-I. -I/home/Rainer/repo/gdal/include -c extensions/gdalconst_wrap.c -o
build/temp.cygwin-2.2.1-i686-2.7/extensions/gdalconst_wrap.o gcc -shared
-Wl,--enable-auto-image-base
-L. build/temp.cygwin-2.2.1-i686-2.7/extensions/gdalconst_wrap.o
-L../../.libs -L../../ -L/usr/lib/python2.7/config -L/usr/lib
-L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gdalconst.dll building
'osgeo._osr' extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
-Wimplicit-function-declaration
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/src/debug/python-2.7.10-1
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2.7.10=/usr/src/debug/python-2.7.10-1
-DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
-I../../gnm -I../../apps -I/usr/include/python2.7
-I. -I/home/Rainer/repo/gdal/include -c extensions/osr_wrap.cpp -o
build/temp.cygwin-2.2.1-i686-2.7/extensions/osr_wrap.o cc1plus: warning:
command line option -Wimplicit-function-declaration is valid for
C/ObjC but not for C++ cc1plus: warning: command line option
-Wstrict-prototypes is valid for C/ObjC but not for C++
extensions/osr_wrap.cpp:3199:14: warning: char*
GDALPythonObjectToCStr(PyObject*, int*) defined but not used
[-Wunused-function]
 static char* GDALPythonObjectToCStr(PyObject* pyObject, int* pbToFree)
              ^
extensions/osr_wrap.cpp:3229:13: warning: void GDALPythonFreeCStr(void*, int) defined but not used [-Wunused-function]
 static void GDALPythonFreeCStr(void* ptr, int bToFree)
             ^ g++ -shared -Wl,--enable-auto-image-base
-L. build/temp.cygwin-2.2.1-i686-2.7/extensions/osr_wrap.o -L../../.libs
-L../../ -L/usr/lib/python2.7/config -L/usr/lib
-L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
build/lib.cygwin-2.2.1-i686-2.7/osgeo/_osr.dll building 'osgeo._ogr'
extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
-Wimplicit-function-declaration
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/src/debug/python-2.7.10-1
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2.7.10=/usr/src/debug/python-2.7.10-1
-DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
-I../../gnm -I../../apps -I/usr/include/python2.7
-I. -I/home/Rainer/repo/gdal/include -c extensions/ogr_wrap.cpp -o
build/temp.cygwin-2.2.1-i686-2.7/extensions/ogr_wrap.o cc1plus: warning:
command line option -Wimplicit-function-declaration is valid for
C/ObjC but not for C++ cc1plus: warning: command line option
-Wstrict-prototypes is valid for C/ObjC but not for C++ In file
included from /usr/include/python2.7/Python.h:133:0,
                 from extensions/ogr_wrap.cpp:154:
extensions/ogr_wrap.cpp: In function PyObject* _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
/usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
 #define PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
                                                              ^
extensions/ogr_wrap.cpp:5403:31: note: in expansion of macro PyMapping_Items
         PyObject *item_list = PyMapping_Items( obj1 );
                               ^ g++ -shared
-Wl,--enable-auto-image-base
-L. build/temp.cygwin-2.2.1-i686-2.7/extensions/ogr_wrap.o -L../../.libs
-L../../ -L/usr/lib/python2.7/config -L/usr/lib
-L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
build/lib.cygwin-2.2.1-i686-2.7/osgeo/_ogr.dll building 'osgeo._gnm'
extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
-Wimplicit-function-declaration
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/src/debug/python-2.7.10-1
-fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2.7.10=/usr/src/debug/python-2.7.10-1
-DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
-I../../gnm -I../../apps -I/usr/include/python2.7
-I. -I/home/Rainer/repo/gdal/include -c extensions/gnm_wrap.cpp -o
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o cc1plus: warning:
command line option -Wimplicit-function-declaration is valid for
C/ObjC but not for C++ cc1plus: warning: command line option
-Wstrict-prototypes is valid for C/ObjC but not for C++ In file
included from /usr/include/python2.7/Python.h:133:0,
                 from extensions/gnm_wrap.cpp:154:
extensions/gnm_wrap.cpp: In function PyObject* _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
/usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion from string constant to char* [-Wwrite-strings]
 #define PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
                                                              ^
extensions/gnm_wrap.cpp:4014:31: note: in expansion of macro PyMapping_Items
         PyObject *item_list = PyMapping_Items( obj1 );
                               ^
g++ -shared -Wl,--enable-auto-image-base -L. build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o -L../../.libs -L../../ -L/usr/lib/python2.7/config -L/usr/lib -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gnm.dll
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMNetworkShadow_GetName':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3369: undefined reference to `GNMGetName'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMNetworkShadow_GetFeatureByGlobalFID':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3372: undefined reference to `GNMGetFeatureByGlobalFID'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMNetworkShadow_GetPath':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3520: undefined reference to `GNMGetPath'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMNetworkShadow_DisconnectAll':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3523: undefined reference to `GNMDisconnectAll'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_DisconnectFeatures':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3627: undefined reference to `GNMDisconnectFeatures'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_DisconnectFeaturesWithId':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3630: undefined reference to `GNMDisconnectFeaturesWithId'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_DeleteAllRules':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3639: undefined reference to `GNMDeleteAllRules'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_GetRules':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3645: undefined reference to `GNMGetRules'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_ChangeBlockState':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3662: undefined reference to `GNMChangeBlockState'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_ChangeAllBlockState':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3665: undefined reference to `GNMChangeAllBlockState'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_DeleteRule':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3642: undefined reference to `GNMDeleteRule'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_CreateRule':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3636: undefined reference to `GNMCreateRule'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_ConnectPointsByLines':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3648: undefined reference to `GNMConnectPointsByLines'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMNetworkShadow_GetVersion':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3366: undefined reference to `GNMGetVersion'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_ConnectFeatures':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3623: undefined reference to `GNMConnectFeatures'
build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function `GNMGenericNetworkShadow_ReconnectFeatures':
/home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3633: undefined reference to `GNMReconnectFeatures'
collect2: error: ld returned 1 exit status
error: command 'g++' failed with exit status 1
GNUmakefile:64: recipe for target 'build' failed
make[2]: *** [build] Error 1
make[2]: Leaving directory '/home/Rainer/repo/gdal/swig/python'
GNUmakefile:30: recipe for target 'build' failed
make[1]: *** [build] Error 2
make[1]: Leaving directory '/home/Rainer/repo/gdal/swig'
GNUmakefile:102: recipe for target 'swig-modules' failed
make: *** [swig-modules] Error 2

From even.rouault at spatialys.com  Fri Oct  9 10:10:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Oct 2015 19:10:53 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
In-Reply-To: <22039.61358.657000.718699@woitok.gmail.com>
References: <22039.61358.657000.718699@woitok.gmail.com>
Message-ID: <201510091910.53837.even.rouault@spatialys.com>

Dmitry,

It seems the error is linked to the Python GNM module when GDAL is not 
configured --with-gnm.

On Linux, this seems to compile, although at runtime, I can see that 
https://s3.amazonaws.com/archive.travis-ci.org/jobs/84538954/log.txt shows 
errors like :

... failed to load gnm_test.py ... skipping.
Traceback (most recent call last):
  File "pymod/gdaltest.py", line 244, in run_all
    exec("import " + module)
  File "<string>", line 1, in <module>
  File "./gnm_test.py", line 43, in <module>
  File "/usr/lib/python2.7/dist-packages/osgeo/gnm.py", line 28, in <module>
    _gnm = swig_import_helper()
  File "/usr/lib/python2.7/dist-packages/osgeo/gnm.py", line 24, in 
swig_import_helper
    _mod = imp.load_module('_gnm', fp, pathname, description)
ImportError: /usr/lib/python2.7/dist-packages/osgeo/_gnm.so: undefined symbol: 
_ZTI10GNMNetwork

I guess that on Cygwin symbol resolution is done at linking time, hence the 
error. Perhaps the building of the Python gnm module should be 
conditionnalized to GNM_ENABLED ?

Even


> Greetings,
> 
> yesterday I cloned the Gdal source repository from
> 
>    https://github.com/OSGeo/gdal.git
> 
> and converted  it to a Mercurial repository,  simply  because that's the
> version control software I'm at home with.  In Mercurial the most recent
> commit of the repository looks like this
> 
>    2015-10-08 13:48:32 +0000 even.rouault at mines-paris.org
> 
>    test_gdal_grid_lib_1(): fix failure when GEOS not available
> 
>    git-svn-id: https://svn.osgeo.org/gdal/trunk at 30908
> f0d54148-0727-0410-94bb-9a71ac55c965
> 
>    M autotest/utilities/test_gdal_grid_lib.py
> 
> and the corresponding Git revision of this commit most probably is
> 
>    592b969358dba7119acb24bdac2a204808ff96d4
> 
> I then tried to compile Gdal  under a reasonably current version of Cyg-
> win as a non-privileged user running
> 
>    ./configure --mandir=$REPO/share/man  \
>                --prefix=$REPO            \
>                --with-geotiff=internal   \
>                --with-gif=internal       \
>                --with-jpeg=internal      \
>                --with-libjson-c=internal \
>                --with-libtiff=internal   \
>                --with-libz=internal      \
>                --with-pcidsk=internal    \
>                --with-pcraster=internal  \
>                --with-perl=no            \
>                --with-png=internal       \
>                --with-python=yes         \
>                --with-qhull=internal
>    make clean
>    make install        # This automatically also makes target "default".
> 
> Things went well until  "make" entered directory "swig/python/" where it
> produced plenty of warnings (which may or may not be relevant to my cur-
> rent problem) and terminated with the error message "collect2: error: ld
> returned 1 exit status".  I have included the log from where "make" ent-
> ers directory "swig/python/" up to the final error below.
> 
> On the Gdal webpage at  "http://trac.osgeo.org/gdal/wiki/BuildingOnUnix"
> I found  the hint to  use the "configure" option "--with-pymodir=direct-
> ory", but this is rejected with
> 
>    configure: WARNING: unrecognized options: --with-pymodir
> 
> What am I missing?  Any pointers welcome.
> 
> A few additional remarks:
> 
> "configure" is issuing a message saying "checking for shared library run
> path origin... /bin/sh: ./config.rpath:  No such file or directory", but
> a script "config.rpath" is not (and never was) contained in the reposit-
> ory I cloned.
> 
> "config.status" is issuing a  warning saying "'GDALmake.opt.in' seems to
> ignore the --datarootdir setting",  and according to my own observations
> either "configure" or "GDALmake.opt"  ignore the "--mandir" setting  and
> just use "PREFIX/man", regardless.
> 
> The webpage  already mentioned  above is also  saying that  under Cygwin
> "shared libraries are not supported", which is sort of wrong, since Cyg-
> win uses Windows DLLs which should just be stored in "PREFIX/bin".
> 
> Sincerely,
>   Rainer
> 
>  ----------------------------------------------------------------------
> 
> | Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
> | Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
> | D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
> | Germany                        |                                     |
> 
>  ----------------------------------------------------------------------
> 
> make[2]: Entering directory '/home/Rainer/repo/gdal/swig/python' python
> setup.py build running build running build_py creating build creating
> build/lib.cygwin-2.2.1-i686-2.7 copying gdal.py ->
> build/lib.cygwin-2.2.1-i686-2.7 copying ogr.py ->
> build/lib.cygwin-2.2.1-i686-2.7 copying osr.py ->
> build/lib.cygwin-2.2.1-i686-2.7 copying gdalconst.py ->
> build/lib.cygwin-2.2.1-i686-2.7 copying gnm.py ->
> build/lib.cygwin-2.2.1-i686-2.7 creating
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdal.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdalconst.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdalnumeric.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gdal_array.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/gnm.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/ogr.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/osr.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo copying osgeo/__init__.py ->
> build/lib.cygwin-2.2.1-i686-2.7/osgeo running build_ext building
> 'osgeo._gdal' extension creating build/temp.cygwin-2.2.1-i686-2.7
> creating build/temp.cygwin-2.2.1-i686-2.7/extensions gcc
> -fno-strict-aliasing -ggdb -O2 -pipe -Wimplicit-function-declaration
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/sr
> c/debug/python-2.7.10-1
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2
> .7.10=/usr/src/debug/python-2.7.10-1 -DNDEBUG -g -fwrapv -O3 -Wall
> -Wstrict-prototypes -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm -I../../apps -I/usr/include/python2.7
> -I. -I/home/Rainer/repo/gdal/include -c extensions/gdal_wrap.cpp -o
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gdal_wrap.o cc1plus:
> warning: command line option -Wimplicit-function-declaration is
> valid for C/ObjC but not for C++ cc1plus: warning: command line option
> -Wstrict-prototypes is valid for C/ObjC but not for C++ In file
> included from /usr/include/python2.7/Python.h:133:0,
>                  from extensions/gdal_wrap.cpp:154:
> extensions/gdal_wrap.cpp: In function PyObject*
> _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
> /usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion
> from string constant to char* [-Wwrite-strings] #define
> PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
>                                                               ^
> extensions/gdal_wrap.cpp:8611:31: note: in expansion of macro
> PyMapping_Items PyObject *item_list = PyMapping_Items( obj1 );
>                                ^
> extensions/gdal_wrap.cpp: In function PyObject*
> _wrap_VirtualMem_GetAddr(PyObject*, PyObject*):
> extensions/gdal_wrap.cpp:11596:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "B";
>                    ^
> extensions/gdal_wrap.cpp:11601:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "h";
>                    ^
> extensions/gdal_wrap.cpp:11606:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "H";
>                    ^
> extensions/gdal_wrap.cpp:11611:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "i";
>                    ^
> extensions/gdal_wrap.cpp:11616:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "I";
>                    ^
> extensions/gdal_wrap.cpp:11621:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "f";
>                    ^
> extensions/gdal_wrap.cpp:11626:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "F";
>                    ^
> extensions/gdal_wrap.cpp:11631:19: warning: deprecated conversion from
> string constant to char* [-Wwrite-strings] buf->format = "B";
>                    ^
> extensions/gdal_wrap.cpp: In function PyObject*
> _wrap_Band_ComputeStatistics(PyObject*, PyObject*):
> extensions/gdal_wrap.cpp:16433:10: warning: variable result set but
> not used [-Wunused-but-set-variable] CPLErr result;
>           ^ g++ -shared -Wl,--enable-auto-image-base
> -L. build/temp.cygwin-2.2.1-i686-2.7/extensions/gdal_wrap.o
> -L../../.libs -L../../ -L/usr/lib/python2.7/config -L/usr/lib
> -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
> build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gdal.dll building
> 'osgeo._gdalconst' extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
> -Wimplicit-function-declaration
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/sr
> c/debug/python-2.7.10-1
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2
> .7.10=/usr/src/debug/python-2.7.10-1 -DNDEBUG -g -fwrapv -O3 -Wall
> -Wstrict-prototypes -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm -I../../apps -I/usr/include/python2.7
> -I. -I/home/Rainer/repo/gdal/include -c extensions/gdalconst_wrap.c -o
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gdalconst_wrap.o gcc -shared
> -Wl,--enable-auto-image-base
> -L. build/temp.cygwin-2.2.1-i686-2.7/extensions/gdalconst_wrap.o
> -L../../.libs -L../../ -L/usr/lib/python2.7/config -L/usr/lib
> -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
> build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gdalconst.dll building
> 'osgeo._osr' extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
> -Wimplicit-function-declaration
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/sr
> c/debug/python-2.7.10-1
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2
> .7.10=/usr/src/debug/python-2.7.10-1 -DNDEBUG -g -fwrapv -O3 -Wall
> -Wstrict-prototypes -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm -I../../apps -I/usr/include/python2.7
> -I. -I/home/Rainer/repo/gdal/include -c extensions/osr_wrap.cpp -o
> build/temp.cygwin-2.2.1-i686-2.7/extensions/osr_wrap.o cc1plus: warning:
> command line option -Wimplicit-function-declaration is valid for
> C/ObjC but not for C++ cc1plus: warning: command line option
> -Wstrict-prototypes is valid for C/ObjC but not for C++
> extensions/osr_wrap.cpp:3199:14: warning: char*
> GDALPythonObjectToCStr(PyObject*, int*) defined but not used
> [-Wunused-function]
>  static char* GDALPythonObjectToCStr(PyObject* pyObject, int* pbToFree)
>               ^
> extensions/osr_wrap.cpp:3229:13: warning: void GDALPythonFreeCStr(void*,
> int) defined but not used [-Wunused-function] static void
> GDALPythonFreeCStr(void* ptr, int bToFree)
>              ^ g++ -shared -Wl,--enable-auto-image-base
> -L. build/temp.cygwin-2.2.1-i686-2.7/extensions/osr_wrap.o -L../../.libs
> -L../../ -L/usr/lib/python2.7/config -L/usr/lib
> -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
> build/lib.cygwin-2.2.1-i686-2.7/osgeo/_osr.dll building 'osgeo._ogr'
> extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
> -Wimplicit-function-declaration
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/sr
> c/debug/python-2.7.10-1
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2
> .7.10=/usr/src/debug/python-2.7.10-1 -DNDEBUG -g -fwrapv -O3 -Wall
> -Wstrict-prototypes -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm -I../../apps -I/usr/include/python2.7
> -I. -I/home/Rainer/repo/gdal/include -c extensions/ogr_wrap.cpp -o
> build/temp.cygwin-2.2.1-i686-2.7/extensions/ogr_wrap.o cc1plus: warning:
> command line option -Wimplicit-function-declaration is valid for
> C/ObjC but not for C++ cc1plus: warning: command line option
> -Wstrict-prototypes is valid for C/ObjC but not for C++ In file
> included from /usr/include/python2.7/Python.h:133:0,
>                  from extensions/ogr_wrap.cpp:154:
> extensions/ogr_wrap.cpp: In function PyObject*
> _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
> /usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion
> from string constant to char* [-Wwrite-strings] #define
> PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
>                                                               ^
> extensions/ogr_wrap.cpp:5403:31: note: in expansion of macro
> PyMapping_Items PyObject *item_list = PyMapping_Items( obj1 );
>                                ^ g++ -shared
> -Wl,--enable-auto-image-base
> -L. build/temp.cygwin-2.2.1-i686-2.7/extensions/ogr_wrap.o -L../../.libs
> -L../../ -L/usr/lib/python2.7/config -L/usr/lib
> -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
> build/lib.cygwin-2.2.1-i686-2.7/osgeo/_ogr.dll building 'osgeo._gnm'
> extension gcc -fno-strict-aliasing -ggdb -O2 -pipe
> -Wimplicit-function-declaration
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/build=/usr/sr
> c/debug/python-2.7.10-1
> -fdebug-prefix-map=/usr/src/ports/python/python-2.7.10-1.i686/src/Python-2
> .7.10=/usr/src/debug/python-2.7.10-1 -DNDEBUG -g -fwrapv -O3 -Wall
> -Wstrict-prototypes -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm -I../../apps -I/usr/include/python2.7
> -I. -I/home/Rainer/repo/gdal/include -c extensions/gnm_wrap.cpp -o
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o cc1plus: warning:
> command line option -Wimplicit-function-declaration is valid for
> C/ObjC but not for C++ cc1plus: warning: command line option
> -Wstrict-prototypes is valid for C/ObjC but not for C++ In file
> included from /usr/include/python2.7/Python.h:133:0,
>                  from extensions/gnm_wrap.cpp:154:
> extensions/gnm_wrap.cpp: In function PyObject*
> _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*):
> /usr/include/python2.7/abstract.h:1354:62: warning: deprecated conversion
> from string constant to char* [-Wwrite-strings] #define
> PyMapping_Items(O) PyObject_CallMethod(O,"items",NULL)
>                                                               ^
> extensions/gnm_wrap.cpp:4014:31: note: in expansion of macro
> PyMapping_Items PyObject *item_list = PyMapping_Items( obj1 );
>                                ^
> g++ -shared -Wl,--enable-auto-image-base -L.
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o -L../../.libs
> -L../../ -L/usr/lib/python2.7/config -L/usr/lib
> -L/home/Rainer/repo/gdal/lib -lpython2.7 -lgdal -o
> build/lib.cygwin-2.2.1-i686-2.7/osgeo/_gnm.dll
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMNetworkShadow_GetName':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3369: undefined
> reference to `GNMGetName'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMNetworkShadow_GetFeatureByGlobalFID':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3372: undefined
> reference to `GNMGetFeatureByGlobalFID'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMNetworkShadow_GetPath':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3520: undefined
> reference to `GNMGetPath'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMNetworkShadow_DisconnectAll':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3523: undefined
> reference to `GNMDisconnectAll'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_DisconnectFeatures':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3627: undefined
> reference to `GNMDisconnectFeatures'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_DisconnectFeaturesWithId':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3630: undefined
> reference to `GNMDisconnectFeaturesWithId'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_DeleteAllRules':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3639: undefined
> reference to `GNMDeleteAllRules'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_GetRules':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3645: undefined
> reference to `GNMGetRules'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_ChangeBlockState':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3662: undefined
> reference to `GNMChangeBlockState'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_ChangeAllBlockState':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3665: undefined
> reference to `GNMChangeAllBlockState'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_DeleteRule':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3642: undefined
> reference to `GNMDeleteRule'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_CreateRule':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3636: undefined
> reference to `GNMCreateRule'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_ConnectPointsByLines':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3648: undefined
> reference to `GNMConnectPointsByLines'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMNetworkShadow_GetVersion':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3366: undefined
> reference to `GNMGetVersion'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_ConnectFeatures':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3623: undefined
> reference to `GNMConnectFeatures'
> build/temp.cygwin-2.2.1-i686-2.7/extensions/gnm_wrap.o: In function
> `GNMGenericNetworkShadow_ReconnectFeatures':
> /home/Rainer/repo/gdal/swig/python/extensions/gnm_wrap.cpp:3633: undefined
> reference to `GNMReconnectFeatures' collect2: error: ld returned 1 exit
> status
> error: command 'g++' failed with exit status 1
> GNUmakefile:64: recipe for target 'build' failed
> make[2]: *** [build] Error 1
> make[2]: Leaving directory '/home/Rainer/repo/gdal/swig/python'
> GNUmakefile:30: recipe for target 'build' failed
> make[1]: *** [build] Error 2
> make[1]: Leaving directory '/home/Rainer/repo/gdal/swig'
> GNUmakefile:102: recipe for target 'swig-modules' failed
> make: *** [swig-modules] Error 2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From larrys at dakotacarto.com  Fri Oct  9 10:24:27 2015
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Fri, 9 Oct 2015 11:24:27 -0600
Subject: [gdal-dev] Creating plugins for most formats
Message-ID: <CA+nQOR--u0XPMBKhxvGcjaoh46hPoGgC_MW8_RshKB6_yk9=nw@mail.gmail.com>

Hi,

I am curious how hard it would be to build the core GDAL/OGR libs, then
have most formats created as driver plugins, instead of directly linked
from the main libs?

Reason: at Homebrew (and in other situations) every time one of the linked
libs is updated then GDAL/OGR has to be rebuilt as well. An ideal situation
is where the core libs do not need rebuilt except upon patches or updates
to non-format-specific portions of the code base. Then, format plugins are
rebuilt as necessary, relative to their external dependencies; and, all
plugins rebuilt when a core libs update requires it.

Currently I find compiling driver plugins tedious, at least for
1.x versions, has this changed with 2.x versions? Is there an easier way to
compile a format as a .so driver plugin than the following 'manual'
example, or am I just doing it in a tedious manner?

https://github.com/OSGeo/homebrew-osgeo4mac/blob/master/Formula/gdal-sosi.rb


Regards,

Larry Shaffer
Dakota Cartography
Black Hills, South Dakota
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151009/83d8803b/attachment.html>

From jgrn at illinois.edu  Fri Oct  9 10:43:28 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri, 09 Oct 2015 17:43:28 +0000
Subject: [gdal-dev] gdalUtils (GDAL/OGR for R) now on CRAN
Message-ID: <CABG0rfuwEf-jMfdk8hvfCqRbcz9cB+CqW5459xXL+Med3DeZdw@mail.gmail.com>

Folks:

I wanted to let you know I've pushed a major release of my gdalUtils
package to CRAN in the last week.  This wraps all non-python GDAL/OGR
utilities as of GDAL 2.0.1 for use in R, and provides some value-added
functions as well.

install.packages("gdalUtils")
should work for all OSs, or if you want the bleeding edge version, use:
install.packages("gdalUtils", repos="http://R-Forge.R-project.org")

Note this is not the same as rgdal -- my package simply wraps the gdal
binaries, which must be pre-installed by the user.

Cheers!

--jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151009/550de2df/attachment-0001.html>

From even.rouault at spatialys.com  Fri Oct  9 11:27:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Oct 2015 20:27:31 +0200
Subject: [gdal-dev] gdalUtils (GDAL/OGR for R) now on CRAN
In-Reply-To: <CABG0rfuwEf-jMfdk8hvfCqRbcz9cB+CqW5459xXL+Med3DeZdw@mail.gmail.com>
References: <CABG0rfuwEf-jMfdk8hvfCqRbcz9cB+CqW5459xXL+Med3DeZdw@mail.gmail.com>
Message-ID: <201510092027.31979.even.rouault@spatialys.com>

Le vendredi 09 octobre 2015 19:43:28, Jonathan Greenberg a crit :
> Folks:
> 
> I wanted to let you know I've pushed a major release of my gdalUtils
> package to CRAN in the last week.  This wraps all non-python GDAL/OGR
> utilities as of GDAL 2.0.1 for use in R, and provides some value-added
> functions as well.
> 
> install.packages("gdalUtils")
> should work for all OSs, or if you want the bleeding edge version, use:
> install.packages("gdalUtils", repos="http://R-Forge.R-project.org")
> 
> Note this is not the same as rgdal -- my package simply wraps the gdal
> binaries, which must be pre-installed by the user.

Jonathan,

You might take advantage of the librarification of those utilities that is 
currently taking place for GDAL 2.1 (work in progress) :

https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library

Even

> 
> Cheers!
> 
> --jonathan

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Oct  9 11:32:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Oct 2015 20:32:54 +0200
Subject: [gdal-dev] Creating plugins for most formats
In-Reply-To: <CA+nQOR--u0XPMBKhxvGcjaoh46hPoGgC_MW8_RshKB6_yk9=nw@mail.gmail.com>
References: <CA+nQOR--u0XPMBKhxvGcjaoh46hPoGgC_MW8_RshKB6_yk9=nw@mail.gmail.com>
Message-ID: <201510092032.54541.even.rouault@spatialys.com>

Larry,

> 
> I am curious how hard it would be to build the core GDAL/OGR libs, then
> have most formats created as driver plugins, instead of directly linked
> from the main libs?
> 
> Reason: at Homebrew (and in other situations) every time one of the linked
> libs is updated then GDAL/OGR has to be rebuilt as well. An ideal situation
> is where the core libs do not need rebuilt except upon patches or updates
> to non-format-specific portions of the code base. Then, format plugins are
> rebuilt as necessary, relative to their external dependencies; and, all
> plugins rebuilt when a core libs update requires it.
> 
> Currently I find compiling driver plugins tedious, at least for
> 1.x versions, has this changed with 2.x versions?

No. Just a few more drivers can be compiled as plugins in trunk (HDF4, HDF5, 
GeoRaster, FileGDB, OCI and PG)

> Is there an easier way to
> compile a format as a .so driver plugin than the following 'manual'
> example, or am I just doing it in a tedious manner?

No easy way. You can still do it manually by linking to the required libraries 
and GDAL core.

Perhaps that could be an interesting objective if a CMake build system comes 
true (although can be tricky since there are sometimes interdependencies 
between drivers).

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pierre.soille at jrc.ec.europa.eu  Fri Oct  9 11:26:34 2015
From: pierre.soille at jrc.ec.europa.eu (Pierre Soille)
Date: Fri, 09 Oct 2015 20:26:34 +0200
Subject: [gdal-dev] decoding consistency between JPEG2000 drivers
Message-ID: <561806DA.6070608@jrc.ec.europa.eu>

Dear GDLALers,

recently we tested the following 3 JPEG2000 drivers: JP2ECW, JPEG2000,
and JP2OpenJPEG.  A jp2 file was opened by all three drivers and we
tested whether the decoded image were equal. To our suprise they are
not: theJPEG2000 and JP2OpenJPEG lead to the same decoded image but they
differ from the one obtained with JP2ECW.  Is this a bug in the
implementation of the JP2ECW driver or is there any rationale explanation?

Thanks a lot in advance,

Pierre

From even.rouault at spatialys.com  Fri Oct  9 11:56:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Oct 2015 20:56:22 +0200
Subject: [gdal-dev] decoding consistency between JPEG2000 drivers
In-Reply-To: <561806DA.6070608@jrc.ec.europa.eu>
References: <561806DA.6070608@jrc.ec.europa.eu>
Message-ID: <201510092056.22949.even.rouault@spatialys.com>

Le vendredi 09 octobre 2015 20:26:34, Pierre Soille a crit :
> Dear GDLALers,
> 
> recently we tested the following 3 JPEG2000 drivers: JP2ECW, JPEG2000,
> and JP2OpenJPEG.  A jp2 file was opened by all three drivers and we
> tested whether the decoded image were equal. To our suprise they are
> not: theJPEG2000 and JP2OpenJPEG lead to the same decoded image but they
> differ from the one obtained with JP2ECW.  Is this a bug in the
> implementation of the JP2ECW driver or is there any rationale explanation?

Pierre,

I don't think the differences come from the GDAL drivers, but rather from 
differences/bugs/features of the underlying libraries. Regarding JP2ECW, I 
recall to have observed differences depending if you read component per 
component or all components together. The version of the JP2 ECW SDK might 
also have some influence.

Even

> 
> Thanks a lot in advance,
> 
> Pierre
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Oct  9 14:11:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 9 Oct 2015 23:11:04 +0200
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <201510072254.09408.even.rouault@spatialys.com>
References: <201510072254.09408.even.rouault@spatialys.com>
Message-ID: <201510092311.05108.even.rouault@spatialys.com>

Le mercredi 07 octobre 2015 22:54:09, Even Rouault a crit :
> Hi,
> 
> I propose to add Kurt Schwehr to the GDAL project steering committee.
> 
> Kurt has been a committer for 2 years, and over the last few months has
> substantially increased his level of involvment, mainly in the area of
> improving code quality, going through the Coverity Scan database of code
> defects, other code cleanups, test suite improvements, ... He has also
> confirm his interest in long term involvment in the project. I believe he
> would be a good asset for the project.
> 
> Motion: To add Kurt Schwehr to the GDAL PSC.
> 
> +1 from me.

Hi,

I declare this motion passed with support of myself, Tamas, Frank, Daniel, 
Jukka and Howard. Welcome to the PSC Kurt !

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Fri Oct  9 14:48:16 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 9 Oct 2015 14:48:16 -0700
Subject: [gdal-dev] Motion: Add Kurt Schwehr to GDAL PSC
In-Reply-To: <201510092311.05108.even.rouault@spatialys.com>
References: <201510072254.09408.even.rouault@spatialys.com>
 <201510092311.05108.even.rouault@spatialys.com>
Message-ID: <CACmBxyv24Zi4=sXgYH4JqL=95P5QqDLpW43hZV8+yOWvNwVySw@mail.gmail.com>

Thanks!

On Fri, Oct 9, 2015 at 2:11 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 07 octobre 2015 22:54:09, Even Rouault a crit :
> > Hi,
> >
> > I propose to add Kurt Schwehr to the GDAL project steering committee.
> >
> > Kurt has been a committer for 2 years, and over the last few months has
> > substantially increased his level of involvment, mainly in the area of
> > improving code quality, going through the Coverity Scan database of code
> > defects, other code cleanups, test suite improvements, ... He has also
> > confirm his interest in long term involvment in the project. I believe he
> > would be a good asset for the project.
> >
> > Motion: To add Kurt Schwehr to the GDAL PSC.
> >
> > +1 from me.
>
> Hi,
>
> I declare this motion passed with support of myself, Tamas, Frank, Daniel,
> Jukka and Howard. Welcome to the PSC Kurt !
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151009/9ca2c6a8/attachment.html>

From dimis at di.uoa.gr  Sat Oct 10 04:45:05 2015
From: dimis at di.uoa.gr (Dimitrianos Savva)
Date: Sat, 10 Oct 2015 14:45:05 +0300
Subject: [gdal-dev] GDAL precision for Geometry object
Message-ID: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>

Hi all,

Recently I noticed that the ExportToWKT <http://gdal.org/java/org/gdal/ogr/Geometry.html#ExportToWkt()> function of a Geometry object that has been read from a Shapefile, generates the well known text representation without any compromise on the precision of the coordinates values.

I wonder how these coordinates are represented in memory. A double precision floating type is not enough to represent some coordinates.

For example the geometry POINT (4799826.09861662145704 2773995.445373429451138) cannot be represented by two double types. But still the ExportToWKT function produces the correct result with full precision for the values.

Thnks,
Dimis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151010/7b9ee495/attachment.html>

From even.rouault at spatialys.com  Sat Oct 10 05:06:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 10 Oct 2015 14:06:30 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
Message-ID: <201510101406.30331.even.rouault@spatialys.com>

Le samedi 10 octobre 2015 13:45:05, Dimitrianos Savva a crit :
> Hi all,
> 
> Recently I noticed that the ExportToWKT
> <http://gdal.org/java/org/gdal/ogr/Geometry.html#ExportToWkt()> function
> of a Geometry object that has been read from a Shapefile, generates the
> well known text representation without any compromise on the precision of
> the coordinates values.
> 
> I wonder how these coordinates are represented in memory. A double
> precision floating type is not enough to represent some coordinates.
> 
> For example the geometry POINT (4799826.09861662145704
> 2773995.445373429451138) cannot be represented by two double types. But
> still the ExportToWKT function produces the correct result with full
> precision for the values.

Dimitrianos,

The implementation of ExportToWKT() in GDAL uses 15 decimal figures ("%.15f" 
printf formatting) whatever the source precision was, and as you point, 
whatever the intrinsic precision of the double value is.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rainer.woitok at gmail.com  Sat Oct 10 07:31:50 2015
From: rainer.woitok at gmail.com (Dr Rainer Woitok)
Date: Sat, 10 Oct 2015 16:31:50 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
In-Reply-To: Msg <201510091910.53837.even.rouault@spatialys.com> of 2015-10-09
 19:10:53 +0200 from even.rouault@spatialys.com
References: <22039.61358.657000.718699@woitok.gmail.com>
 <201510091910.53837.even.rouault@spatialys.com>
Message-ID: <22041.8534.752000.78825@woitok.gmail.com>

Even,

On Friday, 2015-10-09 19:10:53 +0200, you wrote:

> ...
> It seems the error is linked to the Python GNM module when GDAL is not 
> configured --with-gnm.

Ok, I thought, if the missing "--with-gnm" option spoils my compilation,
I could as well add it.  And lo and behold! the compilation succeeded.

But what,  apart from a successful compilation,  does this option really
buy me?  The command "configure --help" only tells me

   --with-gnm            Build GNM into shared library

which doesn't really convey any information.

Sincerely,
  Rainer

 ----------------------------------------------------------------------
| Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
| Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
| D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
| Germany                        |                                     |
 ----------------------------------------------------------------------

From even.rouault at spatialys.com  Sat Oct 10 07:36:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 10 Oct 2015 16:36:24 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
In-Reply-To: <22041.8534.752000.78825@woitok.gmail.com>
References: <22039.61358.657000.718699@woitok.gmail.com>
 <201510091910.53837.even.rouault@spatialys.com>
 <22041.8534.752000.78825@woitok.gmail.com>
Message-ID: <201510101636.24421.even.rouault@spatialys.com>

Le samedi 10 octobre 2015 16:31:50, Dr Rainer Woitok a crit :
> Even,
> 
> On Friday, 2015-10-09 19:10:53 +0200, you wrote:
> > ...
> > It seems the error is linked to the Python GNM module when GDAL is not
> > configured --with-gnm.
> 
> Ok, I thought, if the missing "--with-gnm" option spoils my compilation,
> I could as well add it.  And lo and behold! the compilation succeeded.

I should have suggested the workaround, sorry.

I've created https://trac.osgeo.org/gdal/ticket/6144 to track the issue.

> 
> But what,  apart from a successful compilation,  does this option really
> buy me?  The command "configure --help" only tells me
> 
>    --with-gnm            Build GNM into shared library
> 
> which doesn't really convey any information.

See https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support

> 
> Sincerely,
>   Rainer
> 
>  ----------------------------------------------------------------------
> 
> | Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
> | Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
> | D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
> | Germany                        |                                     |
> 
>  ----------------------------------------------------------------------

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peifer at gmx.eu  Sat Oct 10 08:56:24 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 10 Oct 2015 17:56:24 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <201510101406.30331.even.rouault@spatialys.com>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510101406.30331.even.rouault@spatialys.com>
Message-ID: <mvbcf8$kva$1@ger.gmane.org>

On 2015-10-10 14:06, Even Rouault wrote:
>
> The implementation of ExportToWKT() in GDAL uses 15 decimal figures ("%.15f"
> printf formatting) whatever the source precision was, and as you point,
> whatever the intrinsic precision of the double value is.
>

Does "%.15f" have any added value over "%.15g" (in the usual real-life 
GIS situations, I mean). I also vaguely remember some posting/ticket 
about "%.15f" versus "%.15g", including a request to partially revert a 
changeset. This was years ago, and I can't find at the moment.

Hermann



From peifer at gmx.eu  Sat Oct 10 09:07:09 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 10 Oct 2015 18:07:09 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <mvbcf8$kva$1@ger.gmane.org>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510101406.30331.even.rouault@spatialys.com> <mvbcf8$kva$1@ger.gmane.org>
Message-ID: <mvbd3d$tom$1@ger.gmane.org>

On 2015-10-10 17:56, Hermann Peifer wrote:
> On 2015-10-10 14:06, Even Rouault wrote:
>>
>> The implementation of ExportToWKT() in GDAL uses 15 decimal figures
>> ("%.15f"
>> printf formatting) whatever the source precision was, and as you point,
>> whatever the intrinsic precision of the double value is.
>>
>
> Does "%.15f" have any added value over "%.15g" (in the usual real-life
> GIS situations, I mean). I also vaguely remember some posting/ticket
> about "%.15f" versus "%.15g", including a request to partially revert a
> changeset. This was years ago, and I can't find at the moment.
>

The earlier issue was related to some change in the AAIGrid writer, 
http://trac.osgeo.org/gdal/ticket/3732. As hamish (from the GRASS 
community) wrote at the end of the ticket: "I'd point out that for IEEE 
double precision floating point you don't gain anything by going past 
%.17g."

Hermann



From even.rouault at spatialys.com  Sat Oct 10 09:10:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 10 Oct 2015 18:10:44 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <mvbcf8$kva$1@ger.gmane.org>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510101406.30331.even.rouault@spatialys.com> <mvbcf8$kva$1@ger.gmane.org>
Message-ID: <201510101810.45059.even.rouault@spatialys.com>

Le samedi 10 octobre 2015 17:56:24, Hermann Peifer a crit :
> On 2015-10-10 14:06, Even Rouault wrote:
> > The implementation of ExportToWKT() in GDAL uses 15 decimal figures
> > ("%.15f" printf formatting) whatever the source precision was, and as
> > you point, whatever the intrinsic precision of the double value is.
> 
> Does "%.15f" have any added value over "%.15g" (in the usual real-life
> GIS situations, I mean). I also vaguely remember some posting/ticket
> about "%.15f" versus "%.15g", including a request to partially revert a
> changeset. This was years ago, and I can't find at the moment.

Hum I thought that WKT didn't allow scientific notation for coordinates, but 
actually checking at http://portal.opengeospatial.org/files/?artifact_id=25355 
(SFA 1.2.1), page 52, it seems legal. So perhaps this could be changed. 

> 
> Hermann
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sun Oct 11 04:31:16 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 11 Oct 2015 11:31:16 +0000 (UTC)
Subject: [gdal-dev] GDAL precision for Geometry object
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510101406.30331.even.rouault@spatialys.com> <mvbcf8$kva$1@ger.gmane.org>
 <201510101810.45059.even.rouault@spatialys.com>
Message-ID: <loom.20151011T132536-109@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> Hum I thought that WKT didn't allow scientific notation for coordinates, but 
> actually checking at
http://portal.opengeospatial.org/files/?artifact_id=25355 
> (SFA 1.2.1), page 52, it seems legal. So perhaps this could be changed. 

A quick test with OpenJUMP proofs that JTS can handle WKT like "POINT
(1.01E1 2.01E1)".

-Jukka Rahkonen-



From jukka.rahkonen at maanmittauslaitos.fi  Sun Oct 11 04:51:09 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 11 Oct 2015 11:51:09 +0000 (UTC)
Subject: [gdal-dev] decoding consistency between JPEG2000 drivers
References: <561806DA.6070608@jrc.ec.europa.eu>
 <201510092056.22949.even.rouault@spatialys.com>
Message-ID: <loom.20151011T133132-432@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Le vendredi 09 octobre 2015 20:26:34, Pierre Soille a crit :
> > Dear GDLALers,
> > 
> > recently we tested the following 3 JPEG2000 drivers: JP2ECW, JPEG2000,
> > and JP2OpenJPEG.  A jp2 file was opened by all three drivers and we
> > tested whether the decoded image were equal. To our suprise they are
> > not: theJPEG2000 and JP2OpenJPEG lead to the same decoded image but they
> > differ from the one obtained with JP2ECW.  Is this a bug in the
> > implementation of the JP2ECW driver or is there any rationale explanation?
> 
> Pierre,
> 
> I don't think the differences come from the GDAL drivers, but rather from 
> differences/bugs/features of the underlying libraries. Regarding JP2ECW, I 
> recall to have observed differences depending if you read component per 
> component or all components together. The version of the JP2 ECW SDK might 
> also have some influence.

Hi,

Were the original JPEG2000 files lossy or lossless? Getting slightly
different results from lossy files does not feel critical but lossless
conversion should naturally be lossless. It looks like I have seen an issue
with ECWJP2 driver (SDK 3.x) a few years ago
https://lists.osgeo.org/pipermail/gdal-dev/2009-January/019588.html

I suppose that with the SDK v. 3.x the irreversible 9/7 trasformation was
used also for reversible compression and/or decompression instead of the 5/3
transformation. I am not sure if the bug was ever corrected for SDK 3.x.
Please make a test and report the results. If the bug is still there I
suppose that it will never be fixed but at least we could document it
because SDK 3.x is still used due to its more allowing license.

-Jukka Rahkonen-

From dimis at di.uoa.gr  Sun Oct 11 05:09:41 2015
From: dimis at di.uoa.gr (Dimitrianos Savva)
Date: Sun, 11 Oct 2015 15:09:41 +0300
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <201510101406.30331.even.rouault@spatialys.com>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510101406.30331.even.rouault@spatialys.com>
Message-ID: <CCBBA492-9095-4E8B-A00F-DAA16DEA5330@di.uoa.gr>


> On Oct 10, 2015, at 3:06 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Le samedi 10 octobre 2015 13:45:05, Dimitrianos Savva a crit :
>> Hi all,
>> 
>> Recently I noticed that the ExportToWKT
>> <http://gdal.org/java/org/gdal/ogr/Geometry.html#ExportToWkt()> function
>> of a Geometry object that has been read from a Shapefile, generates the
>> well known text representation without any compromise on the precision of
>> the coordinates values.
>> 
>> I wonder how these coordinates are represented in memory. A double
>> precision floating type is not enough to represent some coordinates.
>> 
>> For example the geometry POINT (4799826.09861662145704
>> 2773995.445373429451138) cannot be represented by two double types. But
>> still the ExportToWKT function produces the correct result with full
>> precision for the values.
> 
> Dimitrianos,
> 
> The implementation of ExportToWKT() in GDAL uses 15 decimal figures ("%.15f" 
> printf formatting) whatever the source precision was, and as you point, 
> whatever the intrinsic precision of the double value is.
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>

Thanks you for the quick answer!
Actually I was confused at some point, because some geometries had the exact precision as in the Shapefile,
and some other not. 

Thanks again,
Dimitrianos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151011/0625d155/attachment.html>

From rainer.woitok at gmail.com  Sun Oct 11 07:17:28 2015
From: rainer.woitok at gmail.com (Dr Rainer Woitok)
Date: Sun, 11 Oct 2015 16:17:28 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
In-Reply-To: Msg <22041.8534.752000.78825@woitok.gmail.com> of 2015-10-10
 16:31:50 +0200 from Rainer.Woitok@Gmail.Com
References: <22039.61358.657000.718699@woitok.gmail.com>
 <201510091910.53837.even.rouault@spatialys.com>
 <22041.8534.752000.78825@woitok.gmail.com>
Message-ID: <22042.28536.637000.837154@woitok.gmail.com>

Hi,

On Saturday, 2015-10-10 16:31:50 +0200, I myself wrote:

> ...
>                          And lo and behold! the compilation succeeded.

Now on to testing: plenty of tests failing due to

   ERROR 6: Unable to load PROJ.4 library (cygproj-0.dll)

Well, the real  PROJ.4 library  is meanwhile named  "cygproj-10.dll" and
resides in a directory mentioned in  environment variable "PATH".  Where
does the name "cygproj-0.dll" come from?   Can I do something about that
(other than linking statically via "--with-static-proj4=...")?

Somehow I  don't quite  like the idea  of renaming my  PROJ.4 library to
what Gdal currently thinks is the right name :-(

Sincerely,
  Rainer

 ----------------------------------------------------------------------
| Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
| Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
| D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
| Germany                        |                                     |
 ----------------------------------------------------------------------

From even.rouault at spatialys.com  Sun Oct 11 07:57:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 11 Oct 2015 16:57:05 +0200
Subject: [gdal-dev] Unable to compile Gdal under Cygwin
In-Reply-To: <22042.28536.637000.837154@woitok.gmail.com>
References: <22039.61358.657000.718699@woitok.gmail.com>
 <22041.8534.752000.78825@woitok.gmail.com>
 <22042.28536.637000.837154@woitok.gmail.com>
Message-ID: <201510111657.05772.even.rouault@spatialys.com>

Le dimanche 11 octobre 2015 16:17:28, Dr Rainer Woitok a crit :
> Hi,
> 
> On Saturday, 2015-10-10 16:31:50 +0200, I myself wrote:
> > ...
> > 
> >                          And lo and behold! the compilation succeeded.
> 
> Now on to testing: plenty of tests failing due to
> 
>    ERROR 6: Unable to load PROJ.4 library (cygproj-0.dll)
> 
> Well, the real  PROJ.4 library  is meanwhile named  "cygproj-10.dll" and
> resides in a directory mentioned in  environment variable "PATH".  Where
> does the name "cygproj-0.dll" come from?   Can I do something about that
> (other than linking statically via "--with-static-proj4=...")?
> 
> Somehow I  don't quite  like the idea  of renaming my  PROJ.4 library to
> what Gdal currently thinks is the right name :-(

Ah, yes I guess it comes from latest proj version where the soname was bumped. 
Well you can safely rename/copy cygproj-10.dll as cygproj-0.dll to please what 
is currently hardcoded in ogr/ogrct.cpp

--with-static-proj4 is probably the cleanest alternative rather than dynamic 
loading.

> 
> Sincerely,
>   Rainer
> 
>  ----------------------------------------------------------------------
> 
> | Rainer M Woitok                | Phone : (+49 60 93) 487 95 95       |
> | Kolpingstrae 3                | Mobile: (+49 172) 813 6 831         |
> | D-63846 Laufach                | Mail  : Rainer.Woitok at Gmail.Com     |
> | Germany                        |                                     |
> 
>  ----------------------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jgrn at illinois.edu  Sun Oct 11 08:54:13 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Sun, 11 Oct 2015 15:54:13 +0000
Subject: [gdal-dev] gdalUtils (GDAL/OGR for R) now on CRAN
In-Reply-To: <201510092027.31979.even.rouault@spatialys.com>
References: <CABG0rfuwEf-jMfdk8hvfCqRbcz9cB+CqW5459xXL+Med3DeZdw@mail.gmail.com>
 <201510092027.31979.even.rouault@spatialys.com>
Message-ID: <CABG0rfsDdAN=5aqGRfUJWB-ZBaVpswvYOZmDSkWUgDu-3nWFsQ@mail.gmail.com>

Will the "old way" be removed from future updates?  Or will the binary
utilities be retained?

--j

On Fri, Oct 9, 2015 at 1:27 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 09 octobre 2015 19:43:28, Jonathan Greenberg a crit :
> > Folks:
> >
> > I wanted to let you know I've pushed a major release of my gdalUtils
> > package to CRAN in the last week.  This wraps all non-python GDAL/OGR
> > utilities as of GDAL 2.0.1 for use in R, and provides some value-added
> > functions as well.
> >
> > install.packages("gdalUtils")
> > should work for all OSs, or if you want the bleeding edge version, use:
> > install.packages("gdalUtils", repos="http://R-Forge.R-project.org")
> >
> > Note this is not the same as rgdal -- my package simply wraps the gdal
> > binaries, which must be pre-installed by the user.
>
> Jonathan,
>
> You might take advantage of the librarification of those utilities that is
> currently taking place for GDAL 2.1 (work in progress) :
>
> https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library
>
> Even
>
> >
> > Cheers!
> >
> > --jonathan
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151011/2b09023e/attachment.html>

From even.rouault at spatialys.com  Sun Oct 11 09:00:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 11 Oct 2015 18:00:28 +0200
Subject: [gdal-dev] gdalUtils (GDAL/OGR for R) now on CRAN
In-Reply-To: <CABG0rfsDdAN=5aqGRfUJWB-ZBaVpswvYOZmDSkWUgDu-3nWFsQ@mail.gmail.com>
References: <CABG0rfuwEf-jMfdk8hvfCqRbcz9cB+CqW5459xXL+Med3DeZdw@mail.gmail.com>
 <201510092027.31979.even.rouault@spatialys.com>
 <CABG0rfsDdAN=5aqGRfUJWB-ZBaVpswvYOZmDSkWUgDu-3nWFsQ@mail.gmail.com>
Message-ID: <201510111800.29395.even.rouault@spatialys.com>

Le dimanche 11 octobre 2015 17:54:13, Jonathan Greenberg a crit :
> Will the "old way" be removed from future updates?  Or will the binary
> utilities be retained?

<joke>Nobody use command line utilities, so they will be removed of 
course</joke>

> 
> --j
> 
> On Fri, Oct 9, 2015 at 1:27 PM Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le vendredi 09 octobre 2015 19:43:28, Jonathan Greenberg a crit :
> > > Folks:
> > > 
> > > I wanted to let you know I've pushed a major release of my gdalUtils
> > > package to CRAN in the last week.  This wraps all non-python GDAL/OGR
> > > utilities as of GDAL 2.0.1 for use in R, and provides some value-added
> > > functions as well.
> > > 
> > > install.packages("gdalUtils")
> > > should work for all OSs, or if you want the bleeding edge version, use:
> > > install.packages("gdalUtils", repos="http://R-Forge.R-project.org")
> > > 
> > > Note this is not the same as rgdal -- my package simply wraps the gdal
> > > binaries, which must be pre-installed by the user.
> > 
> > Jonathan,
> > 
> > You might take advantage of the librarification of those utilities that
> > is currently taking place for GDAL 2.1 (work in progress) :
> > 
> > https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library
> > 
> > Even
> > 
> > > Cheers!
> > > 
> > > --jonathan
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From peifer at gmx.eu  Sun Oct 11 09:27:12 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 11 Oct 2015 18:27:12 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
Message-ID: <561A8DE0.8020903@gmx.eu>

On 2015-10-10 13:45, Dimitrianos Savva wrote:
>
> For example the geometry POINT (4799826.09861662145704
> 2773995.445373429451138) cannot be represented by two double types. But
> still the ExportToWKT function produces the correct result with full
> precision for the values.

While thinking twice about the issue (I might be wrong, though): Isn't 
it more of a generic problem that by far most reals (of which there are 
infinite many) cannot be *exactly* represented by half, single, double, 
quadruple-precision, or by whatever other floating-point format that 
could ever be invented in the future? In these cases, the "most accurate 
representation" must simply be good enough, as one can't do much about it?

Your sample value above is 4799826.09861662145704 (decimal):
The most accurate representation as double is: 
4.79982609861662145704030990601E6 (decimal), 0x41524F54864FBC17 (hex) 
and : 01000001 01010010 01001111 01010100 10000110 01001111 10111100 
00010111 (binary). That's just how it is, or is there another problem, 
of which I wouldn't be aware?

I took the "most accurate" values from 
http://www.binaryconvert.com/result_double.html

@Even: I also tried to imagine a reasonable real-life coordinate value 
that would generate scientific notation when printed with "%.15g" or: 
"%.17g" (as hamish mentioned in this old ticket). Can you point me to one?

Hermann



From dimis at di.uoa.gr  Sun Oct 11 10:20:17 2015
From: dimis at di.uoa.gr (Dimitrianos Savva)
Date: Sun, 11 Oct 2015 20:20:17 +0300
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <561A8DE0.8020903@gmx.eu>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <561A8DE0.8020903@gmx.eu>
Message-ID: <5CA70764-09E9-4516-98B4-7D267FBEE34B@di.uoa.gr>


> On Oct 11, 2015, at 7:27 PM, Hermann Peifer <peifer at gmx.eu> wrote:
> 
> On 2015-10-10 13:45, Dimitrianos Savva wrote:
>> 
>> For example the geometry POINT (4799826.09861662145704
>> 2773995.445373429451138) cannot be represented by two double types. But
>> still the ExportToWKT function produces the correct result with full
>> precision for the values.
> 
> While thinking twice about the issue (I might be wrong, though): Isn't it more of a generic problem that by far most reals (of which there are infinite many) cannot be *exactly* represented by half, single, double, quadruple-precision, or by whatever other floating-point format that could ever be invented in the future? In these cases, the "most accurate representation" must simply be good enough, as one can't do much about it?
> 
> Your sample value above is 4799826.09861662145704 (decimal):
> The most accurate representation as double is: 4.79982609861662145704030990601E6 (decimal), 0x41524F54864FBC17 (hex) and : 01000001 01010010 01001111 01010100 10000110 01001111 10111100 00010111 (binary).

You are right.

> That's just how it is, or is there another problem, of which I wouldn't be aware?
> 

I just wondering if GDAL make use of any kind of custom-user-defined type that provides higher precision from a double. 
My question wasnt so clear. The problem started comparing GDALs and GeoTools (Java) WKT representations of the same geometries that has been read from the same Shapefile.
I noticed that GDAL provides higher accuracy than GeoTools. So I asked this question here, wondering whether GDAL is using something else than just doubles in memory. 
But I also concluded that in fact JAVA  and C doubles have the same representation in memory by running some minimal tests. 
However in Java, when converting a double into string, it even with (.15f) format, it does not give the same string value as doing so in C.

> I took the "most accurate" values from http://www.binaryconvert.com/result_double.html
> 
> @Even: I also tried to imagine a reasonable real-life coordinate value that would generate scientific notation when printed with "%.15g" or: "%.17g" (as hamish mentioned in this old ticket). Can you point me to one?
> 
> Hermann
> 
> 
 
Regards,
Dimis


From peifer at gmx.eu  Sun Oct 11 11:04:13 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 11 Oct 2015 20:04:13 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <5CA70764-09E9-4516-98B4-7D267FBEE34B@di.uoa.gr>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <561A8DE0.8020903@gmx.eu> <5CA70764-09E9-4516-98B4-7D267FBEE34B@di.uoa.gr>
Message-ID: <561AA49D.8090602@gmx.eu>

On 2015-10-11 19:20, Dimitrianos Savva wrote:
>
> I just wondering if GDAL make use of any kind of custom-user-defined type that provides higher precision from a double.
> My question wasnt so clear. The problem started comparing GDALs and GeoTools (Java) WKT representations of the same geometries that has been read from the same Shapefile.
> I noticed that GDAL provides higher accuracy than GeoTools. So I asked this question here, wondering whether GDAL is using something else than just doubles in memory.
> But I also concluded that in fact JAVA  and C doubles have the same representation in memory by running some minimal tests.
> However in Java, when converting a double into string, it even with (.15f) format, it does not give the same string value as doing so in C.
>

Hmm. I'm not a programmer of any kind and only know doubles and their 
siblings as defined by IEEE 754. I doubt that any serious programming 
language could have an interest in ignoring this standard.

 > GDAL provides higher accuracy..

Hmm. My observation is rather that when exporting into text formats 
(AAIGrid, WKT, etc.), GDAL seems to print more "numbers" (actually: 
longer string values) than meaningful in the given context. A double is 
a double is a double, and can only be as accurate as defined by IEEE 
754. I am quoting hamish once again: "I'd point out that for IEEE double 
precision floating point you don't gain anything by going past %.17g."

Just to quote another source (Wikipedia): If an IEEE 754 double 
precision is converted to a decimal string with at least 17 significant 
digits and then converted back to double, then the final number must 
match the original.[1]

I assume it is clear now that the conclusion "I see many numbers", so 
this format "must have higher accuracy" can indeed be wrong.

Hermann

From rayg at daylongraphics.com  Sun Oct 11 12:09:52 2015
From: rayg at daylongraphics.com (Ray Gardener)
Date: Sun, 11 Oct 2015 12:09:52 -0700
Subject: [gdal-dev] List of reasonable default parameters for each projection
In-Reply-To: <D222C956.11BF5%alistair.young@uhi.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
 <5866510.lRALPFp2vA@saxicola> <D222C956.11BF5%alistair.young@uhi.ac.uk>
Message-ID: <561AB400.80208@daylongraphics.com>

I was wondering if there is a list, for each projection supported by 
OGR, reasonable default values for each projection parameter. For 
example, if the user is switching projections in an app, a small table 
listing the projection parameters appears, but they need to be populated 
with reasonable default values.

e.g. for the New Zealand Mining Grid, one could do
spatialRef.SetNZMG(centerLat = 41, centerLong = 173, 
falseEasting=2510000, falseNorthing=6023150);

Ray


From peifer at gmx.eu  Sun Oct 11 19:40:03 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon, 12 Oct 2015 04:40:03 +0200
Subject: [gdal-dev] List of reasonable default parameters for each
	projection
In-Reply-To: <561AB400.80208@daylongraphics.com>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
 <5866510.lRALPFp2vA@saxicola> <D222C956.11BF5%alistair.young@uhi.ac.uk>
 <561AB400.80208@daylongraphics.com>
Message-ID: <561B1D83.3080702@gmx.eu>

On 2015-10-11 21:09, Ray Gardener wrote:
> I was wondering if there is a list, for each projection supported by
> OGR, reasonable default values for each projection parameter. For
> example, if the user is switching projections in an app, a small table
> listing the projection parameters appears, but they need to be populated
> with reasonable default values.
>
> e.g. for the New Zealand Mining Grid, one could do
> spatialRef.SetNZMG(centerLat = 41, centerLong = 173,
> falseEasting=2510000, falseNorthing=6023150);
>

[peifer at moby:gdal]> pwd
/path/to/local/share/gdal

[peifer at moby:gdal]> grep 6023150 *.csv
pcs.csv:27200,"NZGD49 / New Zealand Map 
Grid",9001,4272,19917,9811,1,0,4400,8801,-41,9102,8802,173,9102,8806,2510000,9001,8807,6023150,9001,,,,,,,,,
projop_wparm.csv:19917,New Zealand Map 
Grid,9811,8801,-41,9102,8802,173,9102,8806,2510000,9001,8807,6023150,9001,,,,,,,,,

Seems easy, Hermann


From giantchen2010 at gmail.com  Mon Oct 12 00:43:58 2015
From: giantchen2010 at gmail.com (Jhon Chin)
Date: Mon, 12 Oct 2015 15:43:58 +0800
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
	Problem
Message-ID: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>

Hi, everybody:

I'm now trying to write polygonized result into an esri shapefile, and I
tried

to add some field to the attribute table in the shapefile. But it corrupted

when i was trying to create an *ogrfielddefn* instance.The code goes

like this:
           OGRFieldDefn oField("",OFTInteger);
           if(poLayer->CreateField(&oField) != OGRERR_NONE)
           {
                printf("create  failed!");
                exit(1);
           }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151012/56794056/attachment.html>

From ivan at sanchezortega.es  Mon Oct 12 00:50:23 2015
From: ivan at sanchezortega.es (=?ISO-8859-1?Q?Iv=E1n_S=E1nchez?= Ortega)
Date: Mon, 12 Oct 2015 09:50:23 +0200
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
	Problem
In-Reply-To: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
References: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
Message-ID: <2358456.6kxQbElaiu@hiigara>

El Lunes 12. octubre 2015 15.43.58 Jhon Chin escribi:
> Hi, everybody:
> 
> I'm now trying to write polygonized result into an esri shapefile, and I
> tried to add some field to the attribute table in the shapefile. But it 
> corrupted when i was trying to create an *ogrfielddefn* instance.The code 
> goes like this:
>            OGRFieldDefn oField("",OFTInteger);


Are you using the "ENCODING" option as described here?

http://www.gdal.org/drv_shapefile.html
https://trac.osgeo.org/gdal/ticket/4359

And double-check that you're using the same encoding in your source code 
files.

-- 
Ivn Snchez Ortega <ivan at sanchezortega.es> <ivan at geonerd.org> 
<ivan at mazemap.no>

From giantchen2010 at gmail.com  Mon Oct 12 01:31:39 2015
From: giantchen2010 at gmail.com (Jhon Chin)
Date: Mon, 12 Oct 2015 16:31:39 +0800
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
	Problem
In-Reply-To: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
References: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
Message-ID: <CAKKorM=89dC-DXRKaHAOeKicGjixa9tFRkrCuxivHtKLbVywWQ@mail.gmail.com>

Hi, everybody:

add one more question :

the field name can be read 10 ascii characters, the last characters would
be

trimmed, is there anyone encounter this problem?

any help would be appreciated!

               Jhon Chen


On Mon, Oct 12, 2015 at 3:43 PM, Jhon Chin <giantchen2010 at gmail.com> wrote:

> Hi, everybody:
>
> I'm now trying to write polygonized result into an esri shapefile, and I
> tried
>
> to add some field to the attribute table in the shapefile. But it
> corrupted
>
> when i was trying to create an *ogrfielddefn* instance.The code goes
>
> like this:
>            OGRFieldDefn oField("",OFTInteger);
>            if(poLayer->CreateField(&oField) != OGRERR_NONE)
>            {
>                 printf("create  failed!");
>                 exit(1);
>            }
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151012/646aa4d0/attachment.html>

From even.rouault at spatialys.com  Mon Oct 12 02:01:43 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Oct 2015 11:01:43 +0200
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
	Problem
In-Reply-To: <CAKKorM=89dC-DXRKaHAOeKicGjixa9tFRkrCuxivHtKLbVywWQ@mail.gmail.com>
References: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
 <CAKKorM=89dC-DXRKaHAOeKicGjixa9tFRkrCuxivHtKLbVywWQ@mail.gmail.com>
Message-ID: <201510121101.43981.even.rouault@spatialys.com>

Jhon Chin,
> Hi, everybody:
> 
> add one more question :
> 
> the field name can be read 10 ascii characters, the last characters would
> be trimmed, 

Not necessarily 10 ascii characters, but 10 bytes. The number of characters 
that can fit on 10 bytes depends on the encoding. 1 ASCII character = 1 byte. 
But for non ASCII characters such as Chinese characters, one character fits on 
several bytes.

> is there anyone encounter this problem?

Yes, everybody ! This is a limitation of the > 30 year old DBF format.

I've tried the following Python script that creates a shapefile with the CP936 
encoding.

{{{
# -*- coding: utf-8 -*-

from osgeo import ogr

ds = ogr.GetDriverByName('ESRI Shapefile').CreateDataSource('test_cp936.dbf')
lyr = ds.CreateLayer('test_cp936', options = ['ENCODING=CP936'])
lyr.CreateField(ogr.FieldDefn("",ogr.OFTInteger))
}}}

It emits a warning about truncation since the field name cannot fit on 10 bytes 
once recoded in CP936.

Here's the result:

$ ogrinfo cp936.dbf -al
INFO: Open of `cp936.dbf'
      using driver `ESRI Shapefile' successful.

Layer name: cp936
Metadata:
  DBF_DATE_LAST_UPDATE=2015-10-12
Geometry: Line String
Feature Count: 0
Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
Layer SRS WKT:
(unknown)
: Integer (9.0)

So the last 2 characters are lost.

> 
> any help would be appreciated!
> 
>                Jhon Chen
> 
> On Mon, Oct 12, 2015 at 3:43 PM, Jhon Chin <giantchen2010 at gmail.com> wrote:
> > Hi, everybody:
> > 
> > I'm now trying to write polygonized result into an esri shapefile, and I
> > tried
> > 
> > to add some field to the attribute table in the shapefile. But it
> > corrupted
> > 
> > when i was trying to create an *ogrfielddefn* instance.The code goes
> > 
> > like this:
> >            OGRFieldDefn oField("",OFTInteger);
> >            if(poLayer->CreateField(&oField) != OGRERR_NONE)
> >            {
> >            
> >                 printf("create  failed!");
> >                 exit(1);
> >            
> >            }

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Oct 12 02:19:25 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Oct 2015 11:19:25 +0200
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
	Problem
In-Reply-To: <CAKKorMnMAesup4j3jpPmfiYBJn7aZ5iORn_uUJY3xAnpAS1MXA@mail.gmail.com>
References: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
 <201510121101.43981.even.rouault@spatialys.com>
 <CAKKorMnMAesup4j3jpPmfiYBJn7aZ5iORn_uUJY3xAnpAS1MXA@mail.gmail.com>
Message-ID: <201510121119.25994.even.rouault@spatialys.com>

Le lundi 12 octobre 2015 11:12:37, Jhon Chin a crit :
> Thks a lot!!! Even, so I should avoid using Field name that counts more
> than 10 bytes, and there is no workaround ?

Yes.

Do you really need shapefile though ? If not, you could use more modern formats 
like GeoPackage or Spatialite that don't suffer from shapefile limitations : 
http://www.gdal.org/drv_geopackage.html , http://www.gdal.org/drv_sqlite.html

Potential idea if you need to stick with shapefiles: according to Google 
Translate this field name is translated in to English as Normalized Difference 
Vegetation Index, and in English it is often just abbreviated with its well-
known acronym NDVI. Perhaps there's the equivalent of acronyms in Chinese ?

Even

> 
>        your sincerely,
> 
>               Jhon Chin
> 
> On Mon, Oct 12, 2015 at 5:01 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Jhon Chin,
> > 
> > > Hi, everybody:
> > > 
> > > add one more question :
> > > 
> > > the field name can be read 10 ascii characters, the last characters
> > > would be trimmed,
> > 
> > Not necessarily 10 ascii characters, but 10 bytes. The number of
> > characters that can fit on 10 bytes depends on the encoding. 1 ASCII
> > character = 1 byte.
> > But for non ASCII characters such as Chinese characters, one character
> > fits on
> > several bytes.
> > 
> > > is there anyone encounter this problem?
> > 
> > Yes, everybody ! This is a limitation of the > 30 year old DBF format.
> > 
> > I've tried the following Python script that creates a shapefile with the
> > CP936
> > encoding.
> > 
> > {{{
> > # -*- coding: utf-8 -*-
> > 
> > from osgeo import ogr
> > 
> > ds = ogr.GetDriverByName('ESRI
> > Shapefile').CreateDataSource('test_cp936.dbf')
> > lyr = ds.CreateLayer('test_cp936', options = ['ENCODING=CP936'])
> > lyr.CreateField(ogr.FieldDefn("",ogr.OFTInteger))
> > }}}
> > 
> > It emits a warning about truncation since the field name cannot fit on 10
> > bytes
> > once recoded in CP936.
> > 
> > Here's the result:
> > 
> > $ ogrinfo cp936.dbf -al
> > INFO: Open of `cp936.dbf'
> > 
> >       using driver `ESRI Shapefile' successful.
> > 
> > Layer name: cp936
> > 
> > Metadata:
> >   DBF_DATE_LAST_UPDATE=2015-10-12
> > 
> > Geometry: Line String
> > Feature Count: 0
> > Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
> > Layer SRS WKT:
> > (unknown)
> > : Integer (9.0)
> > 
> > So the last 2 characters are lost.
> > 
> > > any help would be appreciated!
> > > 
> > >                Jhon Chen
> > > 
> > > On Mon, Oct 12, 2015 at 3:43 PM, Jhon Chin <giantchen2010 at gmail.com>
> > 
> > wrote:
> > > > Hi, everybody:
> > > > 
> > > > I'm now trying to write polygonized result into an esri shapefile,
> > > > and
> > 
> > I
> > 
> > > > tried
> > > > 
> > > > to add some field to the attribute table in the shapefile. But it
> > > > corrupted
> > > > 
> > > > when i was trying to create an *ogrfielddefn* instance.The code goes
> > > > 
> > > > like this:
> > > >            OGRFieldDefn oField("",OFTInteger);
> > > >            if(poLayer->CreateField(&oField) != OGRERR_NONE)
> > > >            {
> > > >            
> > > >                 printf("create  failed!");
> > > >                 exit(1);
> > > >            
> > > >            }
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Oct 12 02:28:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Oct 2015 11:28:17 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <561A8DE0.8020903@gmx.eu>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <561A8DE0.8020903@gmx.eu>
Message-ID: <201510121128.17770.even.rouault@spatialys.com>

> @Even: I also tried to imagine a reasonable real-life coordinate value
> that would generate scientific notation when printed with "%.15g" or:
> "%.17g" (as hamish mentioned in this old ticket). Can you point me to one?

No, it is unlikely that coordinates go that big in any reasonable projected 
coordinate system. Unless perhaps if you are far away from the validity area 
of the PCS.

I've changed to '%.15g' formatting for WKT in 
https://trac.osgeo.org/gdal/ticket/6145

> 
> Hermann
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From brfr at metrico.lu  Mon Oct 12 01:38:30 2015
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon, 12 Oct 2015 10:38:30 +0200
Subject: [gdal-dev] Chinese Character for field name in ESRI Shapefile
 Problem
In-Reply-To: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
References: <CAKKorMnsi6DHnbWDRUVsdhiiDeKQQ3JRHnnayGfqdjSRHR2yKQ@mail.gmail.com>
Message-ID: <561B7186.4040709@metrico.lu>

Hi,

the DBASE field name is restricted to ANSI characters, see [1] 
(Attribute limitations), [2]

HTH

Frank

[1] 
http://resources.esri.com/help/9.3/ArcGISDesktop/com/Gp_ToolRef/geoprocessing_tool_reference/geoprocessing_considerations_for_shapefile_output.htm
[2] https://msdn.microsoft.com/en-us/library/aa245259%28v=vs.60%29.aspx

Am 12.10.2015 um 09:43 schrieb Jhon Chin:
> Hi, everybody:
>
> I'm now trying to write polygonized result into an esri shapefile, and I
> tried
>
> to add some field to the attribute table in the shapefile. But it corrupted
>
> when i was trying to create an *ogrfielddefn* instance.The code goes
>
> like this:
>             OGRFieldDefn oField("",OFTInteger);
>             if(poLayer->CreateField(&oField) != OGRERR_NONE)
>             {
>                  printf("create  failed!");
>                  exit(1);
>             }
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Frank BRONIEWSKI, gographe

METRICO s. r.l.
gomtres
technologies d'information gographique
rue des Romains 36
L-5433 NIEDERDONVEN

tl.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu

From pierre.soille at jrc.ec.europa.eu  Mon Oct 12 07:01:23 2015
From: pierre.soille at jrc.ec.europa.eu (Pierre Soille)
Date: Mon, 12 Oct 2015 16:01:23 +0200
Subject: [gdal-dev] decoding consistency between JPEG2000 drivers
In-Reply-To: <201510092056.22949.even.rouault@spatialys.com>
References: <561806DA.6070608@jrc.ec.europa.eu>
 <201510092056.22949.even.rouault@spatialys.com>
Message-ID: <561BBD33.2020906@jrc.ec.europa.eu>

On 09/10/2015 20:56, Even Rouault wrote:
> Le vendredi 09 octobre 2015 20:26:34, Pierre Soille a crit :
>> Dear GDLALers,
>>
>> recently we tested the following 3 JPEG2000 drivers: JP2ECW, JPEG2000,
>> and JP2OpenJPEG.  A jp2 file was opened by all three drivers and we
>> tested whether the decoded image were equal. To our suprise they are
>> not: theJPEG2000 and JP2OpenJPEG lead to the same decoded image but they
>> differ from the one obtained with JP2ECW.  Is this a bug in the
>> implementation of the JP2ECW driver or is there any rationale explanation?
> Pierre,
>
> I don't think the differences come from the GDAL drivers, but rather from 
> differences/bugs/features of the underlying libraries. Regarding JP2ECW, I 
> recall to have observed differences depending if you read component per 
> component or all components together. The version of the JP2 ECW SDK might 
> also have some influence.
>
> Even

Even,

thanks for your reply.  The tested version of the JP2 ECW SDK is 3.3. 
Regarding the comment by Jukka, I ran jhove on the jp2 file and got
(among many other infos) the following:
    CodingStyleDefault:
      CodingStyle: 0
      ProgressionOrder: 0
      NumberOfLayers: 1
      MultipleComponentTransformation: 0
      NumberDecompositionLevels: 5
      CodeBlockWidth: 4
      CodeBlockHeight: 4
      CodeBlockStyle: 0
      Transformation: 1

My understanding is that 'Transformation: 1' refers to a lossless
representation.  If this is confirmed, the JP2 ECW SDK driver v.3.3
should be used with care since it returns values that are not correct. 
Actually, even in the case of lossy compression, I would expect
different drivers to return exactly the same result (as it happens for
the JEG2000 and JP2OpenJPEG drivers in our test).

Many thanks,

Pierre


>
>> Thanks a lot in advance,
>>
>> Pierre
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Mon Oct 12 07:21:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Oct 2015 16:21:00 +0200
Subject: [gdal-dev] decoding consistency between JPEG2000 drivers
In-Reply-To: <561BBD33.2020906@jrc.ec.europa.eu>
References: <561806DA.6070608@jrc.ec.europa.eu>
 <201510092056.22949.even.rouault@spatialys.com>
 <561BBD33.2020906@jrc.ec.europa.eu>
Message-ID: <201510121621.01189.even.rouault@spatialys.com>

Le lundi 12 octobre 2015 16:01:23, Pierre Soille a crit :
> On 09/10/2015 20:56, Even Rouault wrote:
> > Le vendredi 09 octobre 2015 20:26:34, Pierre Soille a crit :
> >> Dear GDLALers,
> >> 
> >> recently we tested the following 3 JPEG2000 drivers: JP2ECW, JPEG2000,
> >> and JP2OpenJPEG.  A jp2 file was opened by all three drivers and we
> >> tested whether the decoded image were equal. To our suprise they are
> >> not: theJPEG2000 and JP2OpenJPEG lead to the same decoded image but they
> >> differ from the one obtained with JP2ECW.  Is this a bug in the
> >> implementation of the JP2ECW driver or is there any rationale
> >> explanation?
> > 
> > Pierre,
> > 
> > I don't think the differences come from the GDAL drivers, but rather from
> > differences/bugs/features of the underlying libraries. Regarding JP2ECW,
> > I recall to have observed differences depending if you read component
> > per component or all components together. The version of the JP2 ECW SDK
> > might also have some influence.
> > 
> > Even
> 
> Even,
> 
> thanks for your reply.  The tested version of the JP2 ECW SDK is 3.3.
> Regarding the comment by Jukka, I ran jhove on the jp2 file and got
> (among many other infos) the following:
>     CodingStyleDefault:
>       CodingStyle: 0
>       ProgressionOrder: 0
>       NumberOfLayers: 1
>       MultipleComponentTransformation: 0
>       NumberDecompositionLevels: 5
>       CodeBlockWidth: 4
>       CodeBlockHeight: 4
>       CodeBlockStyle: 0
>       Transformation: 1
> 
> My understanding is that 'Transformation: 1' refers to a lossless
> representation.

Yes, if they have output the values of the SPcod field, 1 means 5-3 reversible.

Alternatively you can use the dump_jp2.py script mentionned at 
https://trac.osgeo.org/gdal/wiki/UserDocs/JPEG2000Utils

Actually, having the 5-3  reverse transformation is a necessary condition for 
lossless conversion, but not a sufficient one : you also need to have enough 
quality layers encoded, but AFAIK that cannot be trivially checked from 
looking at the codestream parameters.

> If this is confirmed, the JP2 ECW SDK driver v.3.3
> should be used with care since it returns values that are not correct.
> Actually, even in the case of lossy compression, I would expect
> different drivers to return exactly the same result (as it happens for
> the JEG2000 and JP2OpenJPEG drivers in our test).

Yes, the ECW SDK v3.3 has a number of more or less known issues. Most of them 
have likely be fixed by later versions (that are binary only)
For completness, I think I've also seen issues where decoding (or perhaps 
encoding? I don't remember) of lossless images with 12 bit depth with openjpeg 
that didn't lead to original values.

> 
> Many thanks,
> 
> Pierre
> 
> >> Thanks a lot in advance,
> >> 
> >> Pierre
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dylan.beaudette at gmail.com  Mon Oct 12 14:04:32 2015
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Mon, 12 Oct 2015 14:04:32 -0700
Subject: [gdal-dev] Error reading raster data for row xxx (only when using
	r.series and t.rast.series)
Message-ID: <CAOGWcHJZqKmZ1NmXg=rPdr6y-NvdYgNgD-ww-TR3VNJm4CYWoA@mail.gmail.com>

Hi,

Over the last couple of years I have noticed a very strange raster
corruption (?) issues when using r.series, and now more recently,
t.rast.series. Typically, I'll generate a large number of maps with
r.sun or t.rast.mapcalc and then aggregate the series with r.series or
t.rast.series. About 50% of the time the command runs as expected, the
other half of the time r.series or t.rast.series gives me an error
like this:

Error reading raster data for row xxx (testmap)

After this error, I can no longer perform any kind of operation on map
"testmap" without the dreaded Error reading raster data for row xxx...

The situation was worse when using a MASK map, possibly related to a
similar (fixed?) issue discussed in this thread:

http://lists.osgeo.org/pipermail/grass-dev/2015-July/075627.html

Within that thread, Glynn mentioned that this type of error was
probably related to pthreads and concurrent processes. The temporary
fix entailed:

export WORKERS=0

I have tried this on my machine but the results are the same,
non-deterministic corruption (?) of one input to r.series or
t.rast.series.

I have encountered this error on several disks, mirrored HDDs, single
HDD, and now on an SSD. I don't think that this is a disk problem,
rather, something that r.series or t.rast.series is "doing" to the
files it operates on.

Is there some possibility that one of these commands is leaving a file
"open" or in some kind of intermediate state that prevents subsequent
commands from accessing the file?

I'll try to create a sample dataset to send over. In the meantime is
there any kind of diagnostic information that I can report back with?

Thanks,
Dylan

From gane.prog at gmail.com  Tue Oct 13 00:42:24 2015
From: gane.prog at gmail.com (Gane R)
Date: Tue, 13 Oct 2015 13:12:24 +0530
Subject: [gdal-dev] enable POSIX iconv support
Message-ID: <CALMrLdCGBAdovkqfAC79+9mj1xNftuQG=5-ddiP21_ZDF7GN3A@mail.gmail.com>

I am working with the lastest stable build of GDAL source 2.0.1.

In Mac when I run configure I get this enabled,
what is the use of this.
How to disable this like --with-libiconv and start building gdal ?

Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151013/2071336b/attachment.html>

From even.rouault at spatialys.com  Tue Oct 13 00:55:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 09:55:36 +0200
Subject: [gdal-dev] enable POSIX iconv support
In-Reply-To: <CALMrLdCGBAdovkqfAC79+9mj1xNftuQG=5-ddiP21_ZDF7GN3A@mail.gmail.com>
References: <CALMrLdCGBAdovkqfAC79+9mj1xNftuQG=5-ddiP21_ZDF7GN3A@mail.gmail.com>
Message-ID: <201510130955.36270.even.rouault@spatialys.com>

Le mardi 13 octobre 2015 09:42:24, Gane R a crit :
> I am working with the lastest stable build of GDAL source 2.0.1.
> 
> In Mac when I run configure I get this enabled,
> what is the use of this.
> How to disable this like --with-libiconv and start building gdal ?

Gane,

I'm not sure to understand if you want to enable or disable building GDAL with 
iconv support

iconv is needed when translating between "exotic" encodings and UTF-8. You may 
need it for shapefiles with non ASCII characters for example. Other drivers may 
require it as well.

Looking at our MacOSX continuous integration instance ( 
https://s3.amazonaws.com/archive.travis-ci.org/jobs/85047538/log.txt ), it 
seems that you don't need to do anything to have GDAL to build and run 
properly with iconv support.

If you want to disable iconv support, as far as I can see, there's no 
./configure switch to do that if it is detected. You have to edit manually 
port/cpl_config.h after configure has run to remove "#define HAVE_ICONV 1" and 
look for the line "LIBICONV        =" in GDALmake.opt to ensure there's 
nothing after the equal sign.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Oct 13 01:56:42 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 13 Oct 2015 10:56:42 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
Message-ID: <5900180.ctt6vb03Wt@tatras>

Hello,

Sorry for the long mail. I test jpg2 reading with GDAL for a small piece of 
file (12M).

# first test :

$ gdalinfo --version
GDAL 1.10.1, released 2013/08/26

$ gdalinfo file.jp2
Driver: JPEG2000/JPEG-2000 part 1 (ISO/IEC 15444-1)                                                                                                                                                                                                                            
Files: UnKiloDeJP2000-Ratio25-Pixel-10cm.jp2                                                                                                                                                                                                                                   
       UnKiloDeJP2000-Ratio25-Pixel-10cm.j2w                                                                                                                                                                                                                                   
Size is 10000, 10000                                                                                                                                                                                                                                                           
Coordinate System is:                                                                                                                                                                                                                                                          
LOCAL_CS["This file was created with the ECW JPEG 2000 SDK build 3.3.0.160 
copyright 1998-2005 by ER Mapper.  This GeoJP2 header was translated from the 
following ER Mapper style registration information:                                                                   
        fOriginX:                       1840000.000000                                                                                                                                                                                                                         
        fOriginY:                       5178000.000000                                                                                                                                                                                                                         
        fCellIncrementX:                0.100000                                                                                                                                                                                                                               
        fCellIncrementY",                                                                                                                                                                                                                                                      
    UNIT["unknown",1]]                                                                                                                                                                                                                                                         
Origin = (1840000.000000000000000,5178000.000000000000000)                                                                                                                                                                                                                     
Pixel Size = (0.100000000000000,-0.100000000000000)                                                                                                                                                                                                                            
Corner Coordinates:                                                                                                                                                                                                                                                            
Upper Left  ( 1840000.000, 5178000.000) 
Lower Left  ( 1840000.000, 5177000.000) 
Upper Right ( 1841000.000, 5178000.000) 
Lower Right ( 1841000.000, 5177000.000) 
Center      ( 1840500.000, 5177500.000) 
[Here it hangs and Swap then crash]

ok, let's add 4 Go of RAM (*2 from the first test)) : I get 8 Go RAM full + 
~3.5 swap but I get now all the metadata.

# second test
$ gdalinfo --version
GDAL 2.1.0dev, released 2015/99/99

$ gdalinfo file.jp2
Driver: JP2ECW/ERDAS JPEG2000 (SDK 5.2)
Files: 
/home/yjacolin/Documents/Projets/grandlyon_geosupport/01_working_papers/migration_jessie/Ortho_jpg2/UnKiloDeJP2000-
Ratio25-Pixel-10cm.jp2
Size is 10000, 10000
Coordinate System is:
LOCAL_CS["This file was created with the ECW JPEG 2000 SDK build 3.3.0.160 
copyright 1998-2005 by ER Mapper.  This GeoJP2 header was translated from the 
following ER Mapper style registration information:
        fOriginX:                       1840000.000000
        fOriginY:                       5178000.000000
        fCellIncrementX:                0.100000
        fCellIncrementY",
    UNIT["unknown",1]]
Origin = (1840000.000000000000000,5178000.000000000000000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Metadata:
  ALL_COMMENTS=ECW JPEG 2000 SDK v3.3.0.160
  COLORSPACE=RGB
  COMPRESSION_RATE_TARGET=33
Corner Coordinates:
Upper Left  ( 1840000.000, 5178000.000) 
Lower Left  ( 1840000.000, 5177000.000) 
Upper Right ( 1841000.000, 5178000.000) 
Lower Right ( 1841000.000, 5177000.000) 
Center      ( 1840500.000, 5177500.000) 
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Description = Red
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 156x156
  Mask Flags: PER_DATASET ALPHA 
  Overviews of mask band: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 
156x156
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Description = Green
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 156x156
  Mask Flags: PER_DATASET ALPHA 
  Overviews of mask band: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 
156x156
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Description = Blue
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 156x156
  Mask Flags: PER_DATASET ALPHA 
  Overviews of mask band: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 
156x156
Band 4 Block=256x256 Type=Byte, ColorInterp=Alpha
  Description = AllOpacity
  Overviews: 5000x5000, 2500x2500, 1250x1250, 625x625, 312x312, 156x156

No hang, no swap, no ram used

# Questions :)

* is it possible to choose the driver used by gdal? For instance, in my second 
test, my gdal install have two driver; ECW SDK and OpenJpeg. Currently, I am 
building several gdal instance to test each driver :/
* the difference between the two test, is it a problem from the driver used of 
from gdal release?

Thanks,

Y.

From even.rouault at spatialys.com  Tue Oct 13 02:25:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 11:25:47 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <5900180.ctt6vb03Wt@tatras>
References: <5900180.ctt6vb03Wt@tatras>
Message-ID: <201510131125.48085.even.rouault@spatialys.com>

Salut Yves,

> 
> * is it possible to choose the driver used by gdal? For instance, in my
> second test, my gdal install have two driver; ECW SDK and OpenJpeg.
> Currently, I am building several gdal instance to test each driver :/

Yes, see https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_SKIP

For example if you want to exclude the JPEG2000 and JP2OpenJPEG drivers and 
only use JP2ECW:

GDAL_SKIP="JPEG2000,JP2OpenJPEG" gdalinfo foo.jp2

> * the difference between the two test, is it a problem from the driver used
> of from gdal release?

It is (mainly) a problem of the underlying library.
The JPEG2000 driver uses the jasper library which needs to decompress the 
whole imagine into memory. For some reason due to how jasper works, to get the 
infos displayed by gdalinfo, we also need to decompress the imagery. Could 
perhaps be made smarter, but as soon as you would need to query the value of a 
single pixel, the whole image would be uncompressed, so...
Other JPEG2000 drivers (and underlying libraries) are smarter and will only 
decompress(*) the requested area (and nothing for just a simple gdalinfo).

Even

(*) in the case of JP2OpenJPEG, this is only true if the JPEG2000 image is 
tiled. If it is made of a single tile, requesting just a few pixels will be 
slow (but will not need a lot of RAM as far as I remember)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Oct 13 02:55:14 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 13 Oct 2015 11:55:14 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <201510131125.48085.even.rouault@spatialys.com>
References: <5900180.ctt6vb03Wt@tatras>
 <201510131125.48085.even.rouault@spatialys.com>
Message-ID: <2344876.c8skHBiUoV@tatras>

On Tuesday, October 13, 2015 11:25:47 Even Rouault wrote:
> Salut Yves,
> 
> > * is it possible to choose the driver used by gdal? For instance, in my
> > second test, my gdal install have two driver; ECW SDK and OpenJpeg.
> > Currently, I am building several gdal instance to test each driver :/
> 
> Yes, see https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_SKIP
> 
> For example if you want to exclude the JPEG2000 and JP2OpenJPEG drivers and
> only use JP2ECW:
> 
> GDAL_SKIP="JPEG2000,JP2OpenJPEG" gdalinfo foo.jp2

Exactly what I need, I should read this page one of this day because I know 
that it exists but never read it :)


> > * the difference between the two test, is it a problem from the driver
> > used
> > of from gdal release?
> 
> It is (mainly) a problem of the underlying library.
> The JPEG2000 driver uses the jasper library which needs to decompress the
> whole imagine into memory. For some reason due to how jasper works, to get
> the infos displayed by gdalinfo, we also need to decompress the imagery.
> Could perhaps be made smarter, but as soon as you would need to query the
> value of a single pixel, the whole image would be uncompressed, so...
> Other JPEG2000 drivers (and underlying libraries) are smarter and will only
> decompress(*) the requested area (and nothing for just a simple gdalinfo).
> 
> Even
> 
> (*) in the case of JP2OpenJPEG, this is only true if the JPEG2000 image is
> tiled. If it is made of a single tile, requesting just a few pixels will be
> slow (but will not need a lot of RAM as far as I remember)
Interesting, so my thought to try with openjpg2000 is correct.

Thanks Even!

Y.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 13 04:10:04 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Oct 2015 11:10:04 +0000 (UTC)
Subject: [gdal-dev] The new @filename syntax and UTF-8 with BOM
Message-ID: <loom.20151013T125917-340@post.gmane.org>

Hi,

While testing the new ogr2ogr and ogrinfo option that was introduced in
https://trac.osgeo.org/gdal/changeset/30859 for reading contents for the
-where and -sql parameters from a file by using the @filename syntax I
noticed that system fails if the option file is saved with the Byte order
mark (BOM)

ERROR 1: SQL Expression Parsing Error: syntax error, unexpected end of
string. Occured around :
{"query":

If I save the option file as UTF-8 without BOM then the file is read
correctly. Could GDAL be made to clarify the BOM if it exists, or should we
document that BOM is banned?

And now I understand why some of my mapfiles which I had to convert into
UTF-8 for Mapserver v. 7.0 did not work - the same BOM issue there.

-Jukka Rahkonen-

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 13 04:19:50 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Oct 2015 11:19:50 +0000 (UTC)
Subject: [gdal-dev] How to find image footprints instead of envelopes?
Message-ID: <loom.20151013T131129-211@post.gmane.org>

Hi,

This question appears every now and then in the gis.stackexchange and I have
been wondering about it by myself as well: How to generate a footprint
polygon of the real image data area so that the possible nodata areas would
not be included?

I have been thinking that I could convert the original image into a new
image with alpha channel or a one-bit image with nodata=0 and yesdata=1 and
then polygonize the alpha band or the 1-bit image with gdal_polygonize.py. I
guess that it would work but it feels a bit complicated. Is there any more
direct way for doing this task with GDAL? I bet that at least someone has
written a python script for it because the need is so obvious.

-Jukka Rahkonen-


From yjacolin at free.fr  Tue Oct 13 04:23:05 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 13 Oct 2015 13:23:05 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <201510131125.48085.even.rouault@spatialys.com>
References: <5900180.ctt6vb03Wt@tatras>
 <201510131125.48085.even.rouault@spatialys.com>
Message-ID: <5668965.EIBEn5uWAR@tatras>

Even,

On Tuesday, October 13, 2015 11:25:47 Even Rouault wrote:
> > * is it possible to choose the driver used by gdal? For instance, in my
> > second test, my gdal install have two driver; ECW SDK and OpenJpeg.
> > Currently, I am building several gdal instance to test each driver :/
> 
> Yes, see https://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_SKIP
> 
> For example if you want to exclude the JPEG2000 and JP2OpenJPEG drivers and 
> only use JP2ECW:
> 
> GDAL_SKIP="JPEG2000,JP2OpenJPEG" gdalinfo foo.jp2
It seems that GDAL_SKIP="JPEG2000,JP2OpenJPEG" is not working for gdal 1.11 I 
should use ' ' rather than ",".

Do you know any build issue on trunk or 1.10? I can't build this release from 
git repository.

Do you know any limitation on jp2OpenJpeg? I get a segmentation fault with 
this driver:

Here is the bt (from gdal 1.11, but get almost the same from trunk, line 
number is different):

#0  VSIFTellL (fp=0x0) at cpl_vsil.cpp:604
#1  0x00007ffff7453354 in JP2OpenJPEGDataset_Skip (nBytes=6412192, 
pUserData=0x0) at openjpegdataset.cpp:139
#2  0x00007ffff52ed7a0 in opj_stream_destroy () from 
/usr/local/lib/libopenjp2.so.7
#3  0x00007ffff74544e1 in JP2OpenJPEGDataset::Open (poOpenInfo=0x7fffffff37c0) at 
openjpegdataset.cpp:1079
#4  0x00007ffff7528608 in GDALOpenInternal (oOpenInfo=..., 
papszAllowedDrivers=papszAllowedDrivers at entry=0x0) at gdaldataset.cpp:2314
#5  0x00007ffff7528838 in GDALOpenInternal 
(pszFilename=pszFilename at entry=0x61fc00 
"/home/yjacolin/Documents/Projets/grandlyon_geosupport/01_working_papers/migration_jessie/Ortho_jpg2/UnKiloDeJP2000-
Ratio25-Pixel-10cm.jp2", eAccess=eAccess at entry=GA_ReadOnly, 
    papszAllowedDrivers=papszAllowedDrivers at entry=0x0) at gdaldataset.cpp:2263
#6  0x00007ffff7528877 in GDALOpen (pszFilename=pszFilename at entry=0x61fc00 
"/home/yjacolin/Documents/Projets/grandlyon_geosupport/01_working_papers/migration_jessie/Ortho_jpg2/UnKiloDeJP2000-
Ratio25-Pixel-10cm.jp2", eAccess=eAccess at entry=GA_ReadOnly)
    at gdaldataset.cpp:2254
#7  0x0000000000402da3 in main (argc=2, argv=0x62e1d0) at gdalinfo.c:183

Thanks again,

Y.

From even.rouault at spatialys.com  Tue Oct 13 08:25:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 17:25:50 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <2630152.rLrJCcTWBp@tatras>
References: <5900180.ctt6vb03Wt@tatras> <5668965.EIBEn5uWAR@tatras>
 <2630152.rLrJCcTWBp@tatras>
Message-ID: <201510131725.51008.even.rouault@spatialys.com>

Le mardi 13 octobre 2015 17:04:19, Yves Jacolin a crit :
> Hello,
> 
> On Tuesday, October 13, 2015 13:23:05 Yves Jacolin wrote:
> > [..]
> > 
> > Do you know any limitation on jp2OpenJpeg? I get a segmentation fault
> > with this driver:
> > 
> > Here is the bt (from gdal 1.11, but get almost the same from trunk, line
> > number is different):
> > [..]
> 
> Sorry to spam you :)
> 
> We tested with a jp2 file from autotest directory: 3_13bit_and_1bit.jp2,
> OpenJpeg lib 2.0 and GDAL 1.11.
> 
> We had the same problem. Building gdal with debug mode we had the following
> debug info:
> 
> GDAL: AutoSkipDriver(JP2ECW)
> OPENJPEG: info: Start to read j2k main header (1427).
> OPENJPEG: info: Main header has been correctly decoded.
> OPENJPEG: nX0 = 0
> OPENJPEG: nY0 = 0
> OPENJPEG: nTileW = 202
> OPENJPEG: nTileH = 308
> OPENJPEG: psImage->x0 = 0
> OPENJPEG: psImage->y0 = 0
> OPENJPEG: psImage->x1 = 202
> OPENJPEG: psImage->y1 = 308
> OPENJPEG: psImage->numcomps = 4
> OPENJPEG: psImage->color_space = 0
> OPENJPEG: numResolutions = 3
> OPENJPEG: psImage->comps[0].dx = 1
> OPENJPEG: psImage->comps[0].dy = 1
> OPENJPEG: psImage->comps[0].x0 = 0
> OPENJPEG: psImage->comps[0].y0 = 0
> OPENJPEG: psImage->comps[0].w = 202
> OPENJPEG: psImage->comps[0].h = 308
> OPENJPEG: psImage->comps[0].resno_decoded = 0
> OPENJPEG: psImage->comps[0].factor = 0
> OPENJPEG: psImage->comps[0].prec = 13
> OPENJPEG: psImage->comps[0].sgnd = 0
> OPENJPEG: psImage->comps[1].dx = 0
> OPENJPEG: psImage->comps[1].dy = 0
> OPENJPEG: psImage->comps[1].x0 = 202
> OPENJPEG: psImage->comps[1].y0 = 308
> OPENJPEG: psImage->comps[1].w = 1
> OPENJPEG: psImage->comps[1].h = 1
> OPENJPEG: psImage->comps[1].resno_decoded = 0
> OPENJPEG: psImage->comps[1].factor = 0
> OPENJPEG: psImage->comps[1].prec = 0
> OPENJPEG: psImage->comps[1].sgnd = 13
> OPENJPEG: psImage->comps[2].dx = 0
> OPENJPEG: psImage->comps[2].dy = 0
> OPENJPEG: psImage->comps[2].x0 = 1
> OPENJPEG: psImage->comps[2].y0 = 1
> OPENJPEG: psImage->comps[2].w = 0
> OPENJPEG: psImage->comps[2].h = 0
> OPENJPEG: psImage->comps[2].resno_decoded = 0
> OPENJPEG: psImage->comps[2].factor = 13
> OPENJPEG: psImage->comps[2].prec = 202
> OPENJPEG: psImage->comps[2].sgnd = 0
> OPENJPEG: psImage->comps[3].dx = 0
> OPENJPEG: psImage->comps[3].dy = 0
> OPENJPEG: psImage->comps[3].x0 = 0
> OPENJPEG: psImage->comps[3].y0 = 0
> OPENJPEG: psImage->comps[3].w = 0
> OPENJPEG: psImage->comps[3].h = 0
> OPENJPEG: psImage->comps[3].resno_decoded = 308
> OPENJPEG: psImage->comps[3].factor = 0
> OPENJPEG: psImage->comps[3].prec = 1
> OPENJPEG: psImage->comps[3].sgnd = 202
> OPENJPEG: Unable to handle that image (2)
> 
> Program received signal SIGSEGV, Segmentation fault.
> 0x000000000062faf0 in ?? ()
> 
> So gdal or the openjpeg lib mix information (check width and height for
> each bands).
> 
> We updated openjpeg lib to 2.1 and gdalinfo worked as expected.
> 
> We will test gdal 1.10 with OpenJpeg 2.0 to check that the problem is
> already there as we would like to use GDAL 1.10 but I am afraid we should
> use gdal 1.11 and OpenJpeg 2.1.

Yves,

I think someone has already had that issue. I think you're compiling against 
OpenJPEG 2.0 header and are linking against OpenJPEG 2.1 (or the reverse). 
Some structures of openjpeg have changed sizes between both versions and 
result in such a typical mess at runtime.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yjacolin at free.fr  Tue Oct 13 08:29:49 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 13 Oct 2015 17:29:49 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <201510131725.51008.even.rouault@spatialys.com>
References: <5900180.ctt6vb03Wt@tatras> <2630152.rLrJCcTWBp@tatras>
 <201510131725.51008.even.rouault@spatialys.com>
Message-ID: <1675501.ZOxu4iMGlZ@tatras>

On Tuesday, October 13, 2015 17:25:50 Even Rouault wrote:
> [..]
> 
> Yves,
> 
> I think someone has already had that issue. I think you're compiling against
> OpenJPEG 2.0 header and are linking against OpenJPEG 2.1 (or the reverse).
> Some structures of openjpeg have changed sizes between both versions and
> result in such a typical mess at runtime.
> 
Even,

Strange. GDAL 1.10 + OpenJPEG2000 2.0 worked as expected but I am rather sure 
that I build OpenJpeg 2.1 just before the test.

Is it possible that there is a problem between GDAL 2.11 and OpenJPEG2000 
v2.0? I will test it again.

Last question for today: do you know any limitation with this lib (any 
release) and image size:

ERROR 1: Cannot handle box sizes higher than 2^32

OPENJPEG: info: Start to read j2k main header (349).
ERROR 1: Prevent buffer overflow (x1: 200000, y1: 225000)

Y.


From even.rouault at spatialys.com  Tue Oct 13 08:38:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 17:38:31 +0200
Subject: [gdal-dev] The new @filename syntax and UTF-8 with BOM
In-Reply-To: <loom.20151013T125917-340@post.gmane.org>
References: <loom.20151013T125917-340@post.gmane.org>
Message-ID: <201510131738.31884.even.rouault@spatialys.com>

Le mardi 13 octobre 2015 13:10:04, Jukka Rahkonen a crit :
> Hi,
> 
> While testing the new ogr2ogr and ogrinfo option that was introduced in
> https://trac.osgeo.org/gdal/changeset/30859 for reading contents for the
> -where and -sql parameters from a file by using the @filename syntax I
> noticed that system fails if the option file is saved with the Byte order
> mark (BOM)
> 
> ERROR 1: SQL Expression Parsing Error: syntax error, unexpected end of
> string. Occured around :
> {"query":
> 
> If I save the option file as UTF-8 without BOM then the file is read
> correctly. Could GDAL be made to clarify the BOM if it exists, or should we
> document that BOM is banned?

Oh well, just added the code to remove the UTF-8 BOM marker if found... 

> 
> And now I understand why some of my mapfiles which I had to convert into
> UTF-8 for Mapserver v. 7.0 did not work - the same BOM issue there.
> 
> -Jukka Rahkonen-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Oct 13 08:48:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 17:48:05 +0200
Subject: [gdal-dev] How to find image footprints instead of envelopes?
In-Reply-To: <loom.20151013T131129-211@post.gmane.org>
References: <loom.20151013T131129-211@post.gmane.org>
Message-ID: <201510131748.05649.even.rouault@spatialys.com>

Le mardi 13 octobre 2015 13:19:50, Jukka Rahkonen a crit :
> Hi,
> 
> This question appears every now and then in the gis.stackexchange and I
> have been wondering about it by myself as well: How to generate a
> footprint polygon of the real image data area so that the possible nodata
> areas would not be included?
> 
> I have been thinking that I could convert the original image into a new
> image with alpha channel or a one-bit image with nodata=0 and yesdata=1 and
> then polygonize the alpha band or the 1-bit image with gdal_polygonize.py.

You can get the image to polygonize with :
gdal_translate in.tif mask.tif -b mask

That should work with images with nodata or alpha channel.

> I guess that it would work but it feels a bit complicated. Is there any
> more direct way for doing this task with GDAL?

None that I can think of.

gdal_polygonize.py would possibly do a bit more work than really needed in 
case there are holes of nodata inside the raster and you're not interested in 
such holes.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Oct 13 09:00:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Oct 2015 18:00:16 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <1675501.ZOxu4iMGlZ@tatras>
References: <5900180.ctt6vb03Wt@tatras>
 <201510131725.51008.even.rouault@spatialys.com> <1675501.ZOxu4iMGlZ@tatras>
Message-ID: <201510131800.16655.even.rouault@spatialys.com>

Le mardi 13 octobre 2015 17:29:49, Yves Jacolin a crit :
> On Tuesday, October 13, 2015 17:25:50 Even Rouault wrote:
> > [..]
> > 
> > Yves,
> > 
> > I think someone has already had that issue. I think you're compiling
> > against OpenJPEG 2.0 header and are linking against OpenJPEG 2.1 (or the
> > reverse). Some structures of openjpeg have changed sizes between both
> > versions and result in such a typical mess at runtime.
> 
> Even,
> 
> Strange. GDAL 1.10 + OpenJPEG2000 2.0 worked as expected but I am rather
> sure that I build OpenJpeg 2.1 just before the test.

(OpenJPEG 2.1 support is new in GDAL 2.0)

> 
> Is it possible that there is a problem between GDAL 2.11 and OpenJPEG2000
> v2.0? I will test it again.

It ought to work fine. This is the setup tested on Travis CI :  
https://github.com/rouault/gdal_coverage/blob/trunk_with_coverage/.travis.yml

> 
> Last question for today: do you know any limitation with this lib (any
> release) and image size:
> 
> ERROR 1: Cannot handle box sizes higher than 2^32

This error message comes from openjpeg itself. Is it really a huge JPEG2000 
files, ie more than 4 GB ? Not sure if I tried files that big with OpenJPEG.

> 
> OPENJPEG: info: Start to read j2k main header (349).
> ERROR 1: Prevent buffer overflow (x1: 200000, y1: 225000)

This error messages comes from OpenJPEG 2.1 lib. Hum it would seem that the 
lib cannot handle images bigger than 4 billion pixels...

> 
> Y.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From junt0015 at umn.edu  Tue Oct 13 08:57:51 2015
From: junt0015 at umn.edu (Thomas Juntunen)
Date: Tue, 13 Oct 2015 10:57:51 -0500
Subject: [gdal-dev] How to find image footprints instead of envelopes?
In-Reply-To: <201510131748.05649.even.rouault@spatialys.com>
References: <loom.20151013T131129-211@post.gmane.org>
 <201510131748.05649.even.rouault@spatialys.com>
Message-ID: <CAF028HVbaJTvNZpzeXeuf07pWHy1SPxJ9CeMdBq-60wHCNavBQ@mail.gmail.com>

Jukka,

Have a look at Dan Stahlke's code he wrote when at GINA, I think
gdal_trace_ooutline will do what you want:
https://github.com/gina-alaska/dans-gdal-scripts

Thomas

On Tue, Oct 13, 2015 at 10:48 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 13 octobre 2015 13:19:50, Jukka Rahkonen a crit :
> > Hi,
> >
> > This question appears every now and then in the gis.stackexchange and I
> > have been wondering about it by myself as well: How to generate a
> > footprint polygon of the real image data area so that the possible nodata
> > areas would not be included?
> >
> > I have been thinking that I could convert the original image into a new
> > image with alpha channel or a one-bit image with nodata=0 and yesdata=1
> and
> > then polygonize the alpha band or the 1-bit image with
> gdal_polygonize.py.
>
> You can get the image to polygonize with :
> gdal_translate in.tif mask.tif -b mask
>
> That should work with images with nodata or alpha channel.
>
> > I guess that it would work but it feels a bit complicated. Is there any
> > more direct way for doing this task with GDAL?
>
> None that I can think of.
>
> gdal_polygonize.py would possibly do a bit more work than really needed in
> case there are holes of nodata inside the raster and you're not interested
> in
> such holes.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
*The right coordinate system can turn an impossible problem into two really
hard problems. -- Charlie Pellerin*

Thomas Juntunen
GIS Specialist
Polar Geospatial Center
R280 Learning and Environmental Science
1954 Buford Ave
University of Minnesota
St. Paul, MN 55108
612-626-0505
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151013/9a23f3ac/attachment-0001.html>

From gane.prog at gmail.com  Tue Oct 13 09:19:54 2015
From: gane.prog at gmail.com (Gane R)
Date: Tue, 13 Oct 2015 21:49:54 +0530
Subject: [gdal-dev] gdal dll depedencies
Message-ID: <CALMrLdCG5pJkNn9+hEM16pZnWvURrGgiQf2-Zs+4fTBRpV9GVQ@mail.gmail.com>

I have build gdal from source of the lastet stable release gdal-2.0.1. Does
all the drivers code go within gdal200.dll or any dependency exists ?

Thanks
Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151013/9276d012/attachment.html>

From yjacolin at free.fr  Tue Oct 13 08:04:19 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 13 Oct 2015 17:04:19 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <5668965.EIBEn5uWAR@tatras>
References: <5900180.ctt6vb03Wt@tatras>
 <201510131125.48085.even.rouault@spatialys.com> <5668965.EIBEn5uWAR@tatras>
Message-ID: <2630152.rLrJCcTWBp@tatras>

Hello,

On Tuesday, October 13, 2015 13:23:05 Yves Jacolin wrote:
> [..]
> 
> Do you know any limitation on jp2OpenJpeg? I get a segmentation fault with
> this driver:
> 
> Here is the bt (from gdal 1.11, but get almost the same from trunk, line
> number is different):
> [..]

Sorry to spam you :)

We tested with a jp2 file from autotest directory: 3_13bit_and_1bit.jp2, 
OpenJpeg lib 2.0 and GDAL 1.11.

We had the same problem. Building gdal with debug mode we had the following 
debug info:

GDAL: AutoSkipDriver(JP2ECW)
OPENJPEG: info: Start to read j2k main header (1427).
OPENJPEG: info: Main header has been correctly decoded.
OPENJPEG: nX0 = 0
OPENJPEG: nY0 = 0
OPENJPEG: nTileW = 202
OPENJPEG: nTileH = 308
OPENJPEG: psImage->x0 = 0
OPENJPEG: psImage->y0 = 0
OPENJPEG: psImage->x1 = 202
OPENJPEG: psImage->y1 = 308
OPENJPEG: psImage->numcomps = 4
OPENJPEG: psImage->color_space = 0
OPENJPEG: numResolutions = 3
OPENJPEG: psImage->comps[0].dx = 1
OPENJPEG: psImage->comps[0].dy = 1
OPENJPEG: psImage->comps[0].x0 = 0
OPENJPEG: psImage->comps[0].y0 = 0
OPENJPEG: psImage->comps[0].w = 202
OPENJPEG: psImage->comps[0].h = 308
OPENJPEG: psImage->comps[0].resno_decoded = 0
OPENJPEG: psImage->comps[0].factor = 0
OPENJPEG: psImage->comps[0].prec = 13
OPENJPEG: psImage->comps[0].sgnd = 0
OPENJPEG: psImage->comps[1].dx = 0
OPENJPEG: psImage->comps[1].dy = 0
OPENJPEG: psImage->comps[1].x0 = 202
OPENJPEG: psImage->comps[1].y0 = 308
OPENJPEG: psImage->comps[1].w = 1
OPENJPEG: psImage->comps[1].h = 1
OPENJPEG: psImage->comps[1].resno_decoded = 0
OPENJPEG: psImage->comps[1].factor = 0
OPENJPEG: psImage->comps[1].prec = 0
OPENJPEG: psImage->comps[1].sgnd = 13
OPENJPEG: psImage->comps[2].dx = 0
OPENJPEG: psImage->comps[2].dy = 0
OPENJPEG: psImage->comps[2].x0 = 1
OPENJPEG: psImage->comps[2].y0 = 1
OPENJPEG: psImage->comps[2].w = 0
OPENJPEG: psImage->comps[2].h = 0
OPENJPEG: psImage->comps[2].resno_decoded = 0
OPENJPEG: psImage->comps[2].factor = 13
OPENJPEG: psImage->comps[2].prec = 202
OPENJPEG: psImage->comps[2].sgnd = 0
OPENJPEG: psImage->comps[3].dx = 0
OPENJPEG: psImage->comps[3].dy = 0
OPENJPEG: psImage->comps[3].x0 = 0
OPENJPEG: psImage->comps[3].y0 = 0
OPENJPEG: psImage->comps[3].w = 0
OPENJPEG: psImage->comps[3].h = 0
OPENJPEG: psImage->comps[3].resno_decoded = 308
OPENJPEG: psImage->comps[3].factor = 0
OPENJPEG: psImage->comps[3].prec = 1
OPENJPEG: psImage->comps[3].sgnd = 202
OPENJPEG: Unable to handle that image (2)

Program received signal SIGSEGV, Segmentation fault.
0x000000000062faf0 in ?? ()

So gdal or the openjpeg lib mix information (check width and height for each 
bands).

We updated openjpeg lib to 2.1 and gdalinfo worked as expected.

We will test gdal 1.10 with OpenJpeg 2.0 to check that the problem is already 
there as we would like to use GDAL 1.10 but I am afraid we should use gdal 
1.11 and OpenJpeg 2.1.

Y.

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 13 13:32:15 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 13 Oct 2015 20:32:15 +0000 (UTC)
Subject: [gdal-dev] gdal dll depedencies
References: <CALMrLdCG5pJkNn9+hEM16pZnWvURrGgiQf2-Zs+4fTBRpV9GVQ@mail.gmail.com>
Message-ID: <loom.20151013T222930-149@post.gmane.org>

Gane R <gane.prog <at> gmail.com> writes:

> 
> 
> I have build gdal from source of the lastet stable release gdal-2.0.1.
Does all the drivers code go within gdal200.dll or any dependency exists ?

I would use Dependency walker for checking that. You will find loads of
dependencies.

-Jukka Rahkonen-


From julien.michel at cnes.fr  Tue Oct 13 23:45:17 2015
From: julien.michel at cnes.fr (Julien Michel)
Date: Wed, 14 Oct 2015 08:45:17 +0200
Subject: [gdal-dev] Gdal 2.0 vs Gdal 1.x : Testing driver capabilities
Message-ID: <561DF9FD.1070901@cnes.fr>

Hi all,

I am currently trying to make our software (Orfeo ToolBox) both 
compatible with Gdal 1.x (> 1.10) and gdal 2.x. I am almost done but I 
am having a hard time figuring out how to test capabilities on a (former 
OGR) driver.

Indeed, I can see in ogrsf_frmts.h that OGRSFDriver::TestCapability() is 
deprecated :

virtual int            TestCapability( const char *pszCap ) 
OGR_DEPRECATED("Use GDALDriver class instead") = 0;

However, I can not find such a service in GDALDriver class ... The only 
TestCapability I found is the one of GDALDataset.

I am specifically trying to test the ODrCDeleteDataSource capability on 
the driver, and I can not use the GDALDataset::TestCapability() for that 
(or at least it is not listed in supported capabilities in doxygen of 
this method [1]).

What am I missing here ?

Thanks a lot for your replies,

Regards,

Julien

[1] http://gdal.org/classGDALDataset.html#ae2eee7686621c516581a415822d83b2a

-- 
Julien MICHEL
CNES - DCT/SI/AP


From aperi2007 at gmail.com  Wed Oct 14 00:33:28 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 14 Oct 2015 09:33:28 +0200
Subject: [gdal-dev] How connect to a remote oracle with spatial
Message-ID: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>

Hi,
I'm trying to test using gdal the access to an oracle dbms.

To do this I use the ogrinfo and try this sintax but without success.

ogrinfo OCI:username:password@"(DESCRIPTION = (ADDRESS_LIST = (ADDRESS
= (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"

The server return

ERROR 1: ORA-01005: null password given; logon denied
 in <unnamed>

I guess the sintax is wrong , but don't know how otherwise pass to the
connection the url and the SID to the dbms

Any help is welcome.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty 
-----------------

From aperi2007 at gmail.com  Wed Oct 14 00:51:10 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 14 Oct 2015 09:51:10 +0200
Subject: [gdal-dev] How connect to a remote oracle with spatial
In-Reply-To: <DB5PR01MB1400925B5A8C780F8831FFDD9A3F0@DB5PR01MB1400.eurprd01.prod.exchangelabs.com>
References: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>
 <DB5PR01MB1400925B5A8C780F8831FFDD9A3F0@DB5PR01MB1400.eurprd01.prod.exchangelabs.com>
Message-ID: <CABqTJk-dfK6HuuBMhsogvsjmX0ttzk9kvYL6fXkdM==pG7=aOg@mail.gmail.com>

Hi,

thx for help.

The solution reported me from Rmy work good.
My error was to use the ":" instead of "/" to separate username and password.
So the right sintax is:

ogrinfo OCI:username/password@"(DESCRIPTION = (ADDRESS_LIST = (ADDRESS
= (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"

Regards.


2015-10-14 9:36 GMT+02:00 Rmy Gourrat <rgourrat at ag-carto.fr>:
> Hi,
>
> You put a : instead /
>
> You must use this syntax :
>
> ogrinfo OCI:username/password@
>
>
>
> -----Message d'origine-----
> De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Andrea Peri
> Envoy : mercredi 14 octobre 2015 09:33
>  : gdal-dev at lists.osgeo.org
> Objet : [gdal-dev] How connect to a remote oracle with spatial
>
> Hi,
> I'm trying to test using gdal the access to an oracle dbms.
>
> To do this I use the ogrinfo and try this sintax but without success.
>
> ogrinfo OCI:username:password@"(DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
> port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"
>
> The server return
>
> ERROR 1: ORA-01005: null password given; logon denied  in <unnamed>
>
> I guess the sintax is wrong , but don't know how otherwise pass to the connection the url and the SID to the dbms
>
> Any help is welcome.
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty 
> -----------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty 
-----------------

From jukka.rahkonen at maanmittauslaitos.fi  Wed Oct 14 00:56:54 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 14 Oct 2015 07:56:54 +0000 (UTC)
Subject: [gdal-dev] How connect to a remote oracle with spatial
References: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>
Message-ID: <loom.20151014T095053-447@post.gmane.org>

Andrea Peri <aperi2007 <at> gmail.com> writes:

> 
> Hi,
> I'm trying to test using gdal the access to an oracle dbms.
> 
> To do this I use the ogrinfo and try this sintax but without success.
> 
> ogrinfo OCI:username:password <at> "(DESCRIPTION = (ADDRESS_LIST = (ADDRESS
> = (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
> port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"
> 
> The server return
> 
> ERROR 1: ORA-01005: null password given; logon denied
>  in <unnamed>
> 

Don'n you have a record for your connection in the tnsnames.ora
http://orafaq.com/wiki/Tnsnames.ora? If you have, use @SERVICE_NAME with ogrinfo

Read also carefully the manual page http://www.gdal.org/drv_oci.html
You wrote OCI:username:password  but it should be
OCI:username/password at database_instance:table,table

As documented "ogrinfo OCI:username/password at database_instance" is enough
but at least in our environment it can take several minutes to read the
metadata from Oracle if table list is not given for limiting the search.

-Jukka Rahkonen-



From even.rouault at spatialys.com  Wed Oct 14 01:41:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Oct 2015 10:41:44 +0200
Subject: [gdal-dev] Gdal 2.0 vs Gdal 1.x : Testing driver capabilities
In-Reply-To: <561DF9FD.1070901@cnes.fr>
References: <561DF9FD.1070901@cnes.fr>
Message-ID: <201510141041.44354.even.rouault@spatialys.com>

Hi Julien,
> 
> I am currently trying to make our software (Orfeo ToolBox) both
> compatible with Gdal 1.x (> 1.10) and gdal 2.x. I am almost done but I
> am having a hard time figuring out how to test capabilities on a (former
> OGR) driver.
> 
> Indeed, I can see in ogrsf_frmts.h that OGRSFDriver::TestCapability() is
> deprecated :
> 
> virtual int            TestCapability( const char *pszCap )
> OGR_DEPRECATED("Use GDALDriver class instead") = 0;
> 
> However, I can not find such a service in GDALDriver class ... The only
> TestCapability I found is the one of GDALDataset.
> 
> I am specifically trying to test the ODrCDeleteDataSource capability on
> the driver, and I can not use the GDALDataset::TestCapability() for that
> (or at least it is not listed in supported capabilities in doxygen of
> this method [1]).
> 
> What am I missing here ?

Nothing. There's no equivalent for ODrCDeleteDataSource indeed. In GDAL 
drivers (and thus vector drivers that have been converted to GDAL drivers), 
the Delete() capability is implemented in a generic way by querying the list 
of files that make the dataset and delete them. Drivers may provide a dedicated 
implementation instead of that generic one.
Without a dataset, there's no way to know in advance if calling Delete() is 
going to do something or not. That's perhaps missing indeed.

A potential workaround is to query drivers for GDAL_DMD_CONNECTION_PREFIX 
metadata item that is set for (hopefully most) drivers that are not file based, 
and for which Delete() is generally going to raise an error at runtime.

>>> from osgeo import gdal
>>> gdal.GetDriverByName('MYSQL').Delete('MYSQL:autotest')
ERROR 6: Unable to determine files associated with MYSQL:autotest,
delete fails.
3
>>> gdal.GetDriverByName('MYSQL').GetMetadataItem(gdal.DMD_CONNECTION_PREFIX)
'MYSQL:'
>>> 


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastienmartin at netcourrier.com  Wed Oct 14 01:38:55 2015
From: sebastienmartin at netcourrier.com (sebastienmartin at netcourrier.com)
Date: Wed, 14 Oct 2015 10:38:55 +0200 (CEST)
Subject: [gdal-dev] Cross platform gdal.jar
Message-ID: <ea-mime-561e149f-4351-4a27d1cb@www-1.netcourrier.com>

Hi there,


I want to use the version 2.0.1 of gdal via the swig java bindings. I downloaded the windows version and install it on my machine and made my developments. I deployed my program on a Fedora machine. As there is no way (or I haven't found it) to download any Fedora binaries in 2.0.1 version, I compiled it. But when I run my program with windows version of the gdal.jar, I have some errors Unsatisfiedlinkerror. So I built the gdal.jar on the Fedora machine and it works, but I am not satisfied with this as I have to play with 2 versions of gdal.jar.



So my question is, is it possible to have the same gdal.jar for windows and linux platform ? Can I compile the linux version so the binairies will be the same as the windows one and swig interfaces could be the same, which are the compile options ?



Thanks for any reply,



Sebastien

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/d0b2b2df/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Oct 14 01:55:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 14 Oct 2015 08:55:31 +0000 (UTC)
Subject: [gdal-dev] How to find image footprints instead of envelopes?
References: <loom.20151013T131129-211@post.gmane.org>
 <201510131748.05649.even.rouault@spatialys.com>
 <CAF028HVbaJTvNZpzeXeuf07pWHy1SPxJ9CeMdBq-60wHCNavBQ@mail.gmail.com>
Message-ID: <loom.20151014T104805-332@post.gmane.org>

Thomas Juntunen <junt0015 <at> umn.edu> writes:

> 
> 
> 
> Jukka,
> 
> Have a look at Dan Stahlke's code he wrote when at GINA, I think
gdal_trace_ooutline will do what you
want:https://github.com/gina-alaska/dans-gdal-scripts
> 
> Thomas

Thanks Thomas,

By looking at the number of different options and comments in the code this
tool is very feature rich and obviously used for real production. The
license seems to be BSD http://www.freebsd.org/copyright/license.html. I
wonder if this tool could be reviewed and possibly added to GDAL utilities.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Wed Oct 14 02:09:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Oct 2015 11:09:48 +0200
Subject: [gdal-dev] How to find image footprints instead of envelopes?
In-Reply-To: <loom.20151014T104805-332@post.gmane.org>
References: <loom.20151013T131129-211@post.gmane.org>
 <CAF028HVbaJTvNZpzeXeuf07pWHy1SPxJ9CeMdBq-60wHCNavBQ@mail.gmail.com>
 <loom.20151014T104805-332@post.gmane.org>
Message-ID: <201510141109.48913.even.rouault@spatialys.com>

Le mercredi 14 octobre 2015 10:55:31, Jukka Rahkonen a crit :
> Thomas Juntunen <junt0015 <at> umn.edu> writes:
> > Jukka,
> > 
> > Have a look at Dan Stahlke's code he wrote when at GINA, I think
> 
> gdal_trace_ooutline will do what you
> want:https://github.com/gina-alaska/dans-gdal-scripts
> 
> > Thomas
> 
> Thanks Thomas,
> 
> By looking at the number of different options and comments in the code this
> tool is very feature rich and obviously used for real production. The
> license seems to be BSD http://www.freebsd.org/copyright/license.html. I
> wonder if this tool could be reviewed and possibly added to GDAL utilities.

Jukka,

I guess that it could make sense for some of them, but that would require a 
champion to integrate them, document them, add tests, possibly turn them as 
library functions per RFC 59.1, make sure they compile and run fine on all our 
targets, etc... and maintain them in the long run. I also see a dependency to 
boost (http://www.boost.org/) that we've avoided up to now in GDAL core.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Michael.Smith at erdc.dren.mil  Wed Oct 14 06:01:56 2015
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 14 Oct 2015 13:01:56 +0000
Subject: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with
 spatial
In-Reply-To: <loom.20151014T095053-447@post.gmane.org>
References: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>
 <loom.20151014T095053-447@post.gmane.org>
Message-ID: <D243CA2F.B9159%michael.smith@erdc.dren.mil>

Note that you can also use what Oracle calls the ezconnect syntax which is
user/pass at host:port/service_name. Then no TNS is needed. Also note that
port only needs to be specified if its not 1521.

Mike

-- 
Michael Smith

Remote Sensing/GIS Center
US Army Corps of Engineers



On 10/14/15,  3:56 AM, "gdal-dev on behalf of Jukka Rahkonen"
<gdal-dev-bounces at lists.osgeo.org on behalf of
jukka.rahkonen at maanmittauslaitos.fi> wrote:

>Andrea Peri <aperi2007 <at> gmail.com> writes:
>
>> 
>> Hi,
>> I'm trying to test using gdal the access to an oracle dbms.
>> 
>> To do this I use the ogrinfo and try this sintax but without success.
>> 
>> ogrinfo OCI:username:password <at> "(DESCRIPTION = (ADDRESS_LIST =
>>(ADDRESS
>> = (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
>> port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"
>> 
>> The server return
>> 
>> ERROR 1: ORA-01005: null password given; logon denied
>>  in <unnamed>
>> 
>
>Don'n you have a record for your connection in the tnsnames.ora
>BlockedBlockedhttp://orafaq.com/wiki/Tnsnames.oraBlocked? If you have,
>use @SERVICE_NAME with ogrinfo
>
>Read also carefully the manual page
>BlockedBlockedhttp://www.gdal.org/drv_oci.htmlBlocked
>You wrote OCI:username:password  but it should be
>OCI:username/password at database_instance:table,table
>
>As documented "ogrinfo OCI:username/password at database_instance" is enough
>but at least in our environment it can take several minutes to read the
>metadata from Oracle if table list is not given for limiting the search.
>
>-Jukka Rahkonen-
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>BlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/gdal-devBlocked


From Michael.Smith at erdc.dren.mil  Wed Oct 14 06:45:54 2015
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 14 Oct 2015 13:45:54 +0000
Subject: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with
 spatial
In-Reply-To: <BLU173-W26412306EE2A1A3D145C29903F0@phx.gbl>
References: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>
 <loom.20151014T095053-447@post.gmane.org>
 <D243CA2F.B9159%michael.smith@erdc.dren.mil>
 <BLU173-W26412306EE2A1A3D145C29903F0@phx.gbl>
Message-ID: <D243D4B8.B918D%michael.smith@erdc.dren.mil>

Ivan,

I've never tried OS authentication.

Mike

--
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers

From: Ivan Lucena <lucena_ivan at hotmail.com<mailto:lucena_ivan at hotmail.com>>
Date: Wednesday, October 14, 2015 at 9:44 AM
To: Michael Smith <michael.smith at erdc.dren.mil<mailto:michael.smith at erdc.dren.mil>>, Jukka Rahkonen <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>, "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: RE: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with spatial

Mike,

I think I also implemented OS authentication for both driver, OCI and GeoRaster. Have you used that?

Regards,

Ivan

> From: Michael.Smith at erdc.dren.mil<mailto:Michael.Smith at erdc.dren.mil>
> To: jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Date: Wed, 14 Oct 2015 13:01:56 +0000
> Subject: Re: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with spatial
>
> Note that you can also use what Oracle calls the ezconnect syntax which is
> user/pass at host:port/service_name. Then no TNS is needed. Also note that
> port only needs to be specified if its not 1521.
>
> Mike
>
> --
> Michael Smith
>
> Remote Sensing/GIS Center
> US Army Corps of Engineers
>
>
>
> On 10/14/15, 3:56 AM, "gdal-dev on behalf of Jukka Rahkonen"
> <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of
> jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
>
> >Andrea Peri <aperi2007 <at> gmail.com> writes:
> >
> >>
> >> Hi,
> >> I'm trying to test using gdal the access to an oracle dbms.
> >>
> >> To do this I use the ogrinfo and try this sintax but without success.
> >>
> >> ogrinfo OCI:username:password <at> "(DESCRIPTION = (ADDRESS_LIST =
> >>(ADDRESS
> >> = (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
> >> port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"
> >>
> >> The server return
> >>
> >> ERROR 1: ORA-01005: null password given; logon denied
> >> in <unnamed>
> >>
> >
> >Don'n you have a record for your connection in the tnsnames.ora
> >BlockedBlockedBlockedhttp://orafaq.com/wiki/Tnsnames.oraBlockedBlocked? If you have,
> >use @SERVICE_NAME with ogrinfo
> >
> >Read also carefully the manual page
> >BlockedBlockedBlockedhttp://www.gdal.org/drv_oci.htmlBlockedBlocked
> >You wrote OCI:username:password but it should be
> >OCI:username/password at database_instance:table,table
> >
> >As documented "ogrinfo OCI:username/password at database_instance" is enough
> >but at least in our environment it can take several minutes to read the
> >metadata from Oracle if table list is not given for limiting the search.
> >
> >-Jukka Rahkonen-
> >
> >
> >_______________________________________________
> >gdal-dev mailing list
> >gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> >BlockedBlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/gdal-devBlockedBlocked
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Blockedhttp://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/3667175d/attachment.html>

From lucena_ivan at hotmail.com  Wed Oct 14 06:44:30 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 14 Oct 2015 09:44:30 -0400
Subject: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with
 spatial
In-Reply-To: <D243CA2F.B9159%michael.smith@erdc.dren.mil>
References: <CABqTJk-G9Wzzic27+DF2+LzhSrNUeOmsaN5GQUyu5iQtFymNxw@mail.gmail.com>,
 <loom.20151014T095053-447@post.gmane.org>,
 <D243CA2F.B9159%michael.smith@erdc.dren.mil>
Message-ID: <BLU173-W26412306EE2A1A3D145C29903F0@phx.gbl>

Mike,

I think I also implemented OS authentication for both driver, OCI and GeoRaster. Have you used that?

Regards,

Ivan

> From: Michael.Smith at erdc.dren.mil
> To: jukka.rahkonen at maanmittauslaitos.fi; gdal-dev at lists.osgeo.org
> Date: Wed, 14 Oct 2015 13:01:56 +0000
> Subject: Re: [gdal-dev] [EXTERNAL] Re: How connect to a remote oracle with spatial
> 
> Note that you can also use what Oracle calls the ezconnect syntax which is
> user/pass at host:port/service_name. Then no TNS is needed. Also note that
> port only needs to be specified if its not 1521.
> 
> Mike
> 
> -- 
> Michael Smith
> 
> Remote Sensing/GIS Center
> US Army Corps of Engineers
> 
> 
> 
> On 10/14/15,  3:56 AM, "gdal-dev on behalf of Jukka Rahkonen"
> <gdal-dev-bounces at lists.osgeo.org on behalf of
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
> 
> >Andrea Peri <aperi2007 <at> gmail.com> writes:
> >
> >> 
> >> Hi,
> >> I'm trying to test using gdal the access to an oracle dbms.
> >> 
> >> To do this I use the ogrinfo and try this sintax but without success.
> >> 
> >> ogrinfo OCI:username:password <at> "(DESCRIPTION = (ADDRESS_LIST =
> >>(ADDRESS
> >> = (PROTOCOL = TCP)(HOST = <IP server dbms>)(PORT = <listener
> >> port>)))(CONNECT_DATA = (SID =<the sid of dbms>))):<schema>.<table>"
> >> 
> >> The server return
> >> 
> >> ERROR 1: ORA-01005: null password given; logon denied
> >>  in <unnamed>
> >> 
> >
> >Don'n you have a record for your connection in the tnsnames.ora
> >BlockedBlockedhttp://orafaq.com/wiki/Tnsnames.oraBlocked? If you have,
> >use @SERVICE_NAME with ogrinfo
> >
> >Read also carefully the manual page
> >BlockedBlockedhttp://www.gdal.org/drv_oci.htmlBlocked
> >You wrote OCI:username:password  but it should be
> >OCI:username/password at database_instance:table,table
> >
> >As documented "ogrinfo OCI:username/password at database_instance" is enough
> >but at least in our environment it can take several minutes to read the
> >metadata from Oracle if table list is not given for limiting the search.
> >
> >-Jukka Rahkonen-
> >
> >
> >_______________________________________________
> >gdal-dev mailing list
> >gdal-dev at lists.osgeo.org
> >BlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/6d9f8c49/attachment.html>

From sean at mapbox.com  Wed Oct 14 08:07:46 2015
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 14 Oct 2015 09:07:46 -0600
Subject: [gdal-dev] How to find image footprints instead of envelopes?
In-Reply-To: <loom.20151013T131129-211@post.gmane.org>
References: <loom.20151013T131129-211@post.gmane.org>
Message-ID: <CADPhZXzyXoNK_PpmJgG9TLnHeSKad7FtLbcDSyXrQXo4FjKOkw@mail.gmail.com>

Jukka,

Yes, I've written the Python script to do this. If you're willing to
install Rasterio (which is GDAL and underneath, but new bindings and not
osgeo.gdal) you can use its rio-shapes command (based on GDAL's
polygonizer):

https://github.com/mapbox/rasterio/blob/master/docs/cli.rst#shapes

The script's entry point is at
https://github.com/mapbox/rasterio/blob/master/rasterio/rio/features.py#L197.
You're welcome to port it to GDAL's Python bindings; swapping out rasterio
and swapping in osgeo.gdal wouldn't be terribly hard.


On Tue, Oct 13, 2015 at 5:19 AM, Jukka Rahkonen <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> This question appears every now and then in the gis.stackexchange and I
> have
> been wondering about it by myself as well: How to generate a footprint
> polygon of the real image data area so that the possible nodata areas would
> not be included?
>
> I have been thinking that I could convert the original image into a new
> image with alpha channel or a one-bit image with nodata=0 and yesdata=1 and
> then polygonize the alpha band or the 1-bit image with gdal_polygonize.py.
> I
> guess that it would work but it feels a bit complicated. Is there any more
> direct way for doing this task with GDAL? I bet that at least someone has
> written a python script for it because the need is so obvious.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/1e34e612/attachment.html>

From yjacolin at free.fr  Wed Oct 14 08:08:34 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed, 14 Oct 2015 17:08:34 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <201510131800.16655.even.rouault@spatialys.com>
References: <5900180.ctt6vb03Wt@tatras> <1675501.ZOxu4iMGlZ@tatras>
 <201510131800.16655.even.rouault@spatialys.com>
Message-ID: <1671738.1XQhORIZ69@tatras>

On Tuesday, October 13, 2015 18:00:16 Even Rouault wrote:
> > 
> >
> > Last question for today: do you know any limitation with this lib (any
> >
> > release) and image size:
> > 
> >
> > ERROR 1: Cannot handle box sizes higher than 2^32
> 
> This error message comes from openjpeg itself. Is it really a huge JPEG2000 
> files, ie more than 4 GB ? Not sure if I tried files that big with
> OpenJPEG.
> > 
> >
> > OPENJPEG: info: Start to read j2k main header (349).
> > ERROR 1: Prevent buffer overflow (x1: 200000, y1: 225000)
> 
> This error messages comes from OpenJPEG 2.1 lib. Hum it would seem that the 
> lib cannot handle images bigger than 4 billion pixels...

Yes it is a huge file (25 Go), I find the error message in the code of OpenJpeg:
https://github.com/uclouvain/openjpeg/blob/f8c822266043a689055b44274c0bf4dc34d4c8ba/src/lib/openjp2/jp2.c#L509

I find a ticket also: https://github.com/uclouvain/openjpeg/issues/92

FYI, gdalinfo on the same jp2 with openjpeg and ECW SDK shows better 
performance with openjpeg driver.

Reading the same file with QGIS with both drivers shows a huge difference (read 
really better performance) for ECW SDK.

I need to do some test with MapServer but currently I can't be sure that GDAL 
use the correct driver.

Y.

From yjacolin at free.fr  Wed Oct 14 08:17:25 2015
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed, 14 Oct 2015 17:17:25 +0200
Subject: [gdal-dev] Reading JPEG2000 file related to drivers
In-Reply-To: <1671738.1XQhORIZ69@tatras>
References: <5900180.ctt6vb03Wt@tatras>
 <201510131800.16655.even.rouault@spatialys.com> <1671738.1XQhORIZ69@tatras>
Message-ID: <3961791.tIblqarBIh@tatras>

On Wednesday, October 14, 2015 17:08:34 Yves Jacolin wrote:
> I need to do some test with MapServer but currently I can't be sure that
> GDAL  use the correct driver.
done, performance are really poor with OpenJpeg driver. There is an issue with 
index in openjpeg lib. I don't how much it can be related to this.

Thanks Even for your help! You win a beer next time I see you.

Y.

From randre at gmail.com  Wed Oct 14 09:59:18 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Wed, 14 Oct 2015 09:59:18 -0700
Subject: [gdal-dev] How to write WKB as string?
Message-ID: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>

Hi All,

I have a tool which currently exports geometry using the ExportToWkt()
function.  It works great, but I'd like to try reducing the size of my
output files by using a format like the string representation of WKB that
shp2pgsql produsces when creating SQL insert files.  Is there a export
function available in GDAL that I could use for this?

I'm looking at http://www.gdal.org/classOGRGeometry.html currently, but
have not yet spotted what I'm looking for.

Thanks,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/9b73abe2/attachment.html>

From even.rouault at spatialys.com  Wed Oct 14 10:06:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Oct 2015 19:06:53 +0200
Subject: [gdal-dev] How to write WKB as string?
In-Reply-To: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
References: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
Message-ID: <201510141906.53592.even.rouault@spatialys.com>

Le mercredi 14 octobre 2015 18:59:18, Roger Andr a crit :
> Hi All,
> 
> I have a tool which currently exports geometry using the ExportToWkt()
> function.  It works great, but I'd like to try reducing the size of my
> output files by using a format like the string representation of WKB that
> shp2pgsql produsces when creating SQL insert files.  Is there a export
> function available in GDAL that I could use for this?
> 
> I'm looking at http://www.gdal.org/classOGRGeometry.html currently, but
> have not yet spotted what I'm looking for.

Wasn't OGRGeometry::exportToWkb() obvious enough ;-) ?

http://www.gdal.org/classOGRGeometry.html#a9a3ad2f9b55285be500ca6ac5dc75d1d


> 
> Thanks,
> 
> Roger
> --

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Wed Oct 14 10:07:09 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 14 Oct 2015 13:07:09 -0400
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
Message-ID: <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>

Just gave RFC 60 a quick look.  In general, I think we absolutely need
this.  Some thoughts:

- There are users who need the old behavior.  We need an easy way to get
that.  I think the default should be the more functional RFC 60 way.  I see
the -noNativeData flag, so I think this is well covered.
- What is the likely performance impact +/-?
- It would be nice to base a could use cases described in the RFC so we are
not totally counting on the links.  They don't have to be super detailed.
- Do we need to add anything to the JSON to flag which conversion method
was used?

-kurt

On Fri, Sep 25, 2015 at 1:23 PM, Sean Gillies <sean at mapbox.com> wrote:

> Dear all,
>
> This feature is a boost for GeoJSON users who are extending the format and
> users of those extensions. JSON is a naturally extensible format but the
> GeoJSON OGR driver stifles development of extensions by passing only the
> fully standardized GeoJSON items.
>
> Let's say I want to use ogr2ogr to spatially filter some GeoJSON coming
> from the OSM Overpass API [1] or the Mapbox Geocoding API [2]. Here's what
> the response of the latter looks like, abbreviated:
>
> $ curl
> https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
> | python -mjson.tool
> {
>     "attribution": "NOTICE: \u00a9 2015 Mapbox and its suppliers. All
> rights reserved. Use of this data is subject to the Mapbox Terms of Service
> (https://www.mapbox.com/about/maps/). This response and the information
> it contains may not be retained.",
>     "features": [
>         {
>             "address": "1600",
>             "bbox": [
>                 -77.05781199999998,
>                 38.89252299999999,
>                 -77.01844799999999,
>                 38.905058999999994
>             ],
>             "center": [
>                 -77.034389,
>                 38.897693
>             ],
>             "context": [
>                 {
>                     "id": "place.57972",
>                     "text": "Washington"
>                 },
>                 {
>                     "id": "postcode.858369517",
>                     "text": "20004"
>                 },
>                 {
>                     "id": "region.1190806886",
>                     "text": "District of Columbia"
>                 },
>                 {
>                     "id": "country.4150104525",
>                     "text": "United States"
>                 }
>             ],
>             "geometry": {
>                 "coordinates": [
>                     -77.034389,
>                     38.897693
>                 ],
>                 "type": "Point"
>             },
>             "id": "address.39053333360279",
>             "place_name": "1600 Pennsylvania Ave NW, Washington, 20004,
> District of Columbia, United States",
>             "properties": {},
>             "relevance": 0.99,
>             "text": "Pennsylvania Ave NW",
>             "type": "Feature"
>         },
>         ...
>     ],
>     "query": [
>         "1600",
>         "pennsylvania",
>         "ave",
>         "nw"
>     ],
>     "type": "FeatureCollection"
> }
>
> The Features and FeatureCollection have extension items expressing rights,
> the original query, and more.
>
> When I pipe this through ogr2ogr to spatially filter, here are the results:
>
> $ curl
> https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
> | ogr2ogr -clipsrc -100 30 -70 60 -f GeoJSON /vsistdout/ /vsistdin/
> {
> "type": "FeatureCollection",
> "crs": { "type": "name", "properties": { "name":
> "urn:ogc:def:crs:OGC:1.3:CRS84" } },
> "features": [
> { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> "coordinates": [ -77.034389, 38.897693 ] } },
> { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> "coordinates": [ -76.634388, 39.30307 ] } },
> { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> "coordinates": [ -80.272062, 40.687045 ] } },
> { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> "coordinates": [ -95.54508, 34.841595 ] } }
> ]
> }
>
> The extensions are lost. This means that ogr2ogr can't be used in
> pipelines that process extended GeoJSON.
>
> If you want your GeoJSON to pass through OGR in high fidelity, you have to
> put everything in the Feature.properties object no matter whether that's
> the best place for it or not. In practice, the Feature.properties object
> becomes a grey goo of feature attributes, styling properties, and you name
> it.
>
> The implementation of RFC 60 would pass through GeoJSON extensions in full
> hi-fi. OGR will no longer be an impediment to extension developers.
>
> [1] http://wiki.openstreetmap.org/wiki/Overpass_turbo/GeoJSON
> [2] https://github.com/mapbox/carmen/blob/master/carmen-geojson.md
>
> Yours,
>
>
> On Wed, Sep 23, 2015 at 9:29 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Hi,
>>
>> This is a call for discussion on "RFC 60: Improved round-tripping in OGR".
>>
>> https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr
>>
>> This RFC defines how to improve better round-tripping in conversion of
>> vector
>> formats, in particular for GeoJSON extensions.
>>
>> Best regards,
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/e72ed232/attachment.html>

From randre at gmail.com  Wed Oct 14 10:18:20 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Wed, 14 Oct 2015 10:18:20 -0700
Subject: [gdal-dev] How to write WKB as string?
In-Reply-To: <3A80046C-BB0C-4352-8E8C-DF2614EF0659@cape.com>
References: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
 <3A80046C-BB0C-4352-8E8C-DF2614EF0659@cape.com>
Message-ID: <CAOL+ROEn55VtgAW=jX22RqE2DcQbQ27k10eLixJgsVTmn7EsuA@mail.gmail.com>

<grin>  Yes Even, exportToWkb() was something I tried, but I thought there
might be an easy way to get the ASCII form of the WKB, rather than the
straight binary that I got when I wrote out to a text file.

Norman, thanks for the links. I'll go peruse them.

On Wed, Oct 14, 2015 at 10:10 AM, Norman Vine <nhv at cape.com> wrote:

>
> On Oct 14, 2015, at 12:59 PM, Roger Andr <randre at gmail.com> wrote:
>
> Hi All,
>
> I have a tool which currently exports geometry using the ExportToWkt()
> function.  It works great, but I'd like to try reducing the size of my
> output files by using a format like the string representation of WKB that
> shp2pgsql produsces when creating SQL insert files.  Is there a export
> function available in GDAL that I could use for this?
>
> I'm looking at http://www.gdal.org/classOGRGeometry.html currently, but
> have not yet spotted what I'm looking for.
>
> Thanks,
>
>
> see
> http://www.gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6
> or
> http://www.gdal.org/classOGRGeometry.html#a9a3ad2f9b55285be500ca6ac5dc75d1d
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/d475c096/attachment-0001.html>

From nhv at cape.com  Wed Oct 14 10:10:22 2015
From: nhv at cape.com (Norman Vine)
Date: Wed, 14 Oct 2015 13:10:22 -0400
Subject: [gdal-dev] How to write WKB as string?
In-Reply-To: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
References: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
Message-ID: <3A80046C-BB0C-4352-8E8C-DF2614EF0659@cape.com>


On Oct 14, 2015, at 12:59 PM, Roger Andr <randre at gmail.com> wrote:

> Hi All,
> 
> I have a tool which currently exports geometry using the ExportToWkt() function.  It works great, but I'd like to try reducing the size of my output files by using a format like the string representation of WKB that shp2pgsql produsces when creating SQL insert files.  Is there a export function available in GDAL that I could use for this?
> 
> I'm looking at http://www.gdal.org/classOGRGeometry.html currently, but have not yet spotted what I'm looking for.
> 
> Thanks,

see
http://www.gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6
or
http://www.gdal.org/classOGRGeometry.html#a9a3ad2f9b55285be500ca6ac5dc75d1d
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/9a28cd67/attachment.html>

From even.rouault at spatialys.com  Wed Oct 14 10:21:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Oct 2015 19:21:22 +0200
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
	round-tripping in OGR
In-Reply-To: <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
Message-ID: <201510141921.22549.even.rouault@spatialys.com>

Hi Kurt,

> Just gave RFC 60 a quick look.  In general, I think we absolutely need
> this.  Some thoughts:

thanks for the comments (by the way, anyone reading this mailing list is 
welcomed to comment not just PSC members)

> 
> - There are users who need the old behavior.  We need an easy way to get
> that.  I think the default should be the more functional RFC 60 way.  I see
> the -noNativeData flag, so I think this is well covered.
> - What is the likely performance impact +/-?

Theoretically, as that adds some new code, there could be some potential 
impact since we are going to always store the nativeData when reading, even if 
discarding it later. Hard to quantify at that point. If that were going to be 
a real problem (but anyone wanting performance shouldn't use geojson to start 
with), we could have an open option in the geojson driver to request it not to 
populate nativeData.

> - It would be nice to base a could use cases described in the RFC so we are
> not totally counting on the links.  They don't have to be super detailed.

OK

> - Do we need to add anything to the JSON to flag which conversion method
> was used?

I don't understand what you mean here.

Even

> 
> -kurt
> 
> On Fri, Sep 25, 2015 at 1:23 PM, Sean Gillies <sean at mapbox.com> wrote:
> > Dear all,
> > 
> > This feature is a boost for GeoJSON users who are extending the format
> > and users of those extensions. JSON is a naturally extensible format but
> > the GeoJSON OGR driver stifles development of extensions by passing only
> > the fully standardized GeoJSON items.
> > 
> > Let's say I want to use ogr2ogr to spatially filter some GeoJSON coming
> > from the OSM Overpass API [1] or the Mapbox Geocoding API [2]. Here's
> > what the response of the latter looks like, abbreviated:
> > 
> > $ curl
> > https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.
> > json?access_token=$MAPBOX_ACCESS_TOKEN
> > 
> > | python -mjson.tool
> > 
> > {
> > 
> >     "attribution": "NOTICE: \u00a9 2015 Mapbox and its suppliers. All
> > 
> > rights reserved. Use of this data is subject to the Mapbox Terms of
> > Service (https://www.mapbox.com/about/maps/). This response and the
> > information it contains may not be retained.",
> > 
> >     "features": [
> >     
> >         {
> >         
> >             "address": "1600",
> >             "bbox": [
> >             
> >                 -77.05781199999998,
> >                 38.89252299999999,
> >                 -77.01844799999999,
> >                 38.905058999999994
> >             
> >             ],
> >             "center": [
> >             
> >                 -77.034389,
> >                 38.897693
> >             
> >             ],
> >             "context": [
> >             
> >                 {
> >                 
> >                     "id": "place.57972",
> >                     "text": "Washington"
> >                 
> >                 },
> >                 {
> >                 
> >                     "id": "postcode.858369517",
> >                     "text": "20004"
> >                 
> >                 },
> >                 {
> >                 
> >                     "id": "region.1190806886",
> >                     "text": "District of Columbia"
> >                 
> >                 },
> >                 {
> >                 
> >                     "id": "country.4150104525",
> >                     "text": "United States"
> >                 
> >                 }
> >             
> >             ],
> >             "geometry": {
> >             
> >                 "coordinates": [
> >                 
> >                     -77.034389,
> >                     38.897693
> >                 
> >                 ],
> >                 "type": "Point"
> >             
> >             },
> >             "id": "address.39053333360279",
> >             "place_name": "1600 Pennsylvania Ave NW, Washington, 20004,
> > 
> > District of Columbia, United States",
> > 
> >             "properties": {},
> >             "relevance": 0.99,
> >             "text": "Pennsylvania Ave NW",
> >             "type": "Feature"
> >         
> >         },
> >         ...
> >     
> >     ],
> >     "query": [
> >     
> >         "1600",
> >         "pennsylvania",
> >         "ave",
> >         "nw"
> >     
> >     ],
> >     "type": "FeatureCollection"
> > 
> > }
> > 
> > The Features and FeatureCollection have extension items expressing
> > rights, the original query, and more.
> > 
> > When I pipe this through ogr2ogr to spatially filter, here are the
> > results:
> > 
> > $ curl
> > https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.
> > json?access_token=$MAPBOX_ACCESS_TOKEN
> > 
> > | ogr2ogr -clipsrc -100 30 -70 60 -f GeoJSON /vsistdout/ /vsistdin/
> > 
> > {
> > "type": "FeatureCollection",
> > "crs": { "type": "name", "properties": { "name":
> > "urn:ogc:def:crs:OGC:1.3:CRS84" } },
> > "features": [
> > { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> > "coordinates": [ -77.034389, 38.897693 ] } },
> > { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> > "coordinates": [ -76.634388, 39.30307 ] } },
> > { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> > "coordinates": [ -80.272062, 40.687045 ] } },
> > { "type": "Feature", "properties": { }, "geometry": { "type": "Point",
> > "coordinates": [ -95.54508, 34.841595 ] } }
> > ]
> > }
> > 
> > The extensions are lost. This means that ogr2ogr can't be used in
> > pipelines that process extended GeoJSON.
> > 
> > If you want your GeoJSON to pass through OGR in high fidelity, you have
> > to put everything in the Feature.properties object no matter whether
> > that's the best place for it or not. In practice, the Feature.properties
> > object becomes a grey goo of feature attributes, styling properties, and
> > you name it.
> > 
> > The implementation of RFC 60 would pass through GeoJSON extensions in
> > full hi-fi. OGR will no longer be an impediment to extension developers.
> > 
> > [1] http://wiki.openstreetmap.org/wiki/Overpass_turbo/GeoJSON
> > [2] https://github.com/mapbox/carmen/blob/master/carmen-geojson.md
> > 
> > Yours,
> > 
> > 
> > On Wed, Sep 23, 2015 at 9:29 AM, Even Rouault
> > <even.rouault at spatialys.com>
> > 
> > wrote:
> >> Hi,
> >> 
> >> This is a call for discussion on "RFC 60: Improved round-tripping in
> >> OGR".
> >> 
> >> https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr
> >> 
> >> This RFC defines how to improve better round-tripping in conversion of
> >> vector
> >> formats, in particular for GeoJSON extensions.
> >> 
> >> Best regards,
> >> 
> >> Even
> >> 
> >> --
> >> Spatialys - Geospatial professional services
> >> http://www.spatialys.com
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Sean Gillies
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Oct 14 10:24:19 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Oct 2015 19:24:19 +0200
Subject: [gdal-dev] How to write WKB as string?
In-Reply-To: <CAOL+ROEn55VtgAW=jX22RqE2DcQbQ27k10eLixJgsVTmn7EsuA@mail.gmail.com>
References: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
 <3A80046C-BB0C-4352-8E8C-DF2614EF0659@cape.com>
 <CAOL+ROEn55VtgAW=jX22RqE2DcQbQ27k10eLixJgsVTmn7EsuA@mail.gmail.com>
Message-ID: <201510141924.19135.even.rouault@spatialys.com>

Le mercredi 14 octobre 2015 19:18:20, Roger Andr a crit :
> <grin>  Yes Even, exportToWkb() was something I tried, but I thought there
> might be an easy way to get the ASCII form of the WKB, rather than the
> straight binary that I got when I wrote out to a text file.

Ah I missed that part.

The following should help:

http://www.gdal.org/cpl__string_8h.html:

char * 	CPLBinaryToHex (int nBytes, const GByte *pabyData) 
CPL_WARN_UNUSED_RESULT
 	Binary to hexadecimal translation. More...
 
GByte * 	CPLHexToBinary (const char *pszHex, int *pnBytes) 
CPL_WARN_UNUSED_RESULT

Even more compact with base64 encoding:

char * 	CPLBase64Encode (int nBytes, const GByte *pabyData) 
CPL_WARN_UNUSED_RESULT
 
int 	CPLBase64DecodeInPlace (GByte *pszBase64)

> 
> Norman, thanks for the links. I'll go peruse them.
> 
> On Wed, Oct 14, 2015 at 10:10 AM, Norman Vine <nhv at cape.com> wrote:
> > On Oct 14, 2015, at 12:59 PM, Roger Andr <randre at gmail.com> wrote:
> > 
> > Hi All,
> > 
> > I have a tool which currently exports geometry using the ExportToWkt()
> > function.  It works great, but I'd like to try reducing the size of my
> > output files by using a format like the string representation of WKB that
> > shp2pgsql produsces when creating SQL insert files.  Is there a export
> > function available in GDAL that I could use for this?
> > 
> > I'm looking at http://www.gdal.org/classOGRGeometry.html currently, but
> > have not yet spotted what I'm looking for.
> > 
> > Thanks,
> > 
> > 
> > see
> > http://www.gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6
> > or
> > http://www.gdal.org/classOGRGeometry.html#a9a3ad2f9b55285be500ca6ac5dc75d
> > 1d

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From randre at gmail.com  Wed Oct 14 10:28:49 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Wed, 14 Oct 2015 10:28:49 -0700
Subject: [gdal-dev] How to write WKB as string?
In-Reply-To: <201510141924.19135.even.rouault@spatialys.com>
References: <CAOL+ROGbx261Myz_kepN6udxuo_5RLGSpgvmog=jjbtNPF2B8A@mail.gmail.com>
 <3A80046C-BB0C-4352-8E8C-DF2614EF0659@cape.com>
 <CAOL+ROEn55VtgAW=jX22RqE2DcQbQ27k10eLixJgsVTmn7EsuA@mail.gmail.com>
 <201510141924.19135.even.rouault@spatialys.com>
Message-ID: <CAOL+ROHwe=FbZbbr_FitFr3CRnmff+o4s6WvpAvaTxOqOOEOLg@mail.gmail.com>

Ahh, thanks!  It helps to frame the question correctly.  I see now that
what I am trying to do is create the hex-encoded form of WKB.

On Wed, Oct 14, 2015 at 10:24 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 14 octobre 2015 19:18:20, Roger Andr a crit :
> > <grin>  Yes Even, exportToWkb() was something I tried, but I thought
> there
> > might be an easy way to get the ASCII form of the WKB, rather than the
> > straight binary that I got when I wrote out to a text file.
>
> Ah I missed that part.
>
> The following should help:
>
> http://www.gdal.org/cpl__string_8h.html:
>
> char *  CPLBinaryToHex (int nBytes, const GByte *pabyData)
> CPL_WARN_UNUSED_RESULT
>         Binary to hexadecimal translation. More...
>
> GByte *         CPLHexToBinary (const char *pszHex, int *pnBytes)
> CPL_WARN_UNUSED_RESULT
>
> Even more compact with base64 encoding:
>
> char *  CPLBase64Encode (int nBytes, const GByte *pabyData)
> CPL_WARN_UNUSED_RESULT
>
> int     CPLBase64DecodeInPlace (GByte *pszBase64)
>
> >
> > Norman, thanks for the links. I'll go peruse them.
> >
> > On Wed, Oct 14, 2015 at 10:10 AM, Norman Vine <nhv at cape.com> wrote:
> > > On Oct 14, 2015, at 12:59 PM, Roger Andr <randre at gmail.com> wrote:
> > >
> > > Hi All,
> > >
> > > I have a tool which currently exports geometry using the ExportToWkt()
> > > function.  It works great, but I'd like to try reducing the size of my
> > > output files by using a format like the string representation of WKB
> that
> > > shp2pgsql produsces when creating SQL insert files.  Is there a export
> > > function available in GDAL that I could use for this?
> > >
> > > I'm looking at http://www.gdal.org/classOGRGeometry.html currently,
> but
> > > have not yet spotted what I'm looking for.
> > >
> > > Thanks,
> > >
> > >
> > > see
> > > http://www.gdal.org/ogr__api_8h.html#ad5c94ae76c09774dba8725c24daeefd6
> > > or
> > >
> http://www.gdal.org/classOGRGeometry.html#a9a3ad2f9b55285be500ca6ac5dc75d
> > > 1d
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/05f1cb27/attachment.html>

From sean at mapbox.com  Wed Oct 14 15:02:17 2015
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 14 Oct 2015 16:02:17 -0600
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <201510141921.22549.even.rouault@spatialys.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <201510141921.22549.even.rouault@spatialys.com>
Message-ID: <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>

Kurt, Even:

thanks for continuing the discussion. A couple of comments below.

On Wed, Oct 14, 2015 at 11:21 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Kurt,
>
> > Just gave RFC 60 a quick look.  In general, I think we absolutely need
> > this.  Some thoughts:
>
> thanks for the comments (by the way, anyone reading this mailing list is
> welcomed to comment not just PSC members)
>
> >
> > - There are users who need the old behavior.  We need an easy way to get
> > that.  I think the default should be the more functional RFC 60 way.  I
> see
> > the -noNativeData flag, so I think this is well covered.
> > - What is the likely performance impact +/-?
>
> Theoretically, as that adds some new code, there could be some potential
> impact since we are going to always store the nativeData when reading,
> even if
> discarding it later. Hard to quantify at that point. If that were going to
> be
> a real problem (but anyone wanting performance shouldn't use geojson to
> start
> with), we could have an open option in the geojson driver to request it
> not to
> populate nativeData.


> > - It would be nice to base a could use cases described in the RFC so we
> are
> > not totally counting on the links.  They don't have to be super detailed.
>
> OK
>

I'll be happy to round up a few extension datasets.


>
> > - Do we need to add anything to the JSON to flag which conversion method
> > was used?
>
> I don't understand what you mean here.
>

Kurt, do you mean that the output JSON would have a item indicating whether
it was a high fidelity or lossy translation of the input?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/9bb504ec/attachment.html>

From schwehr at gmail.com  Wed Oct 14 15:20:16 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 14 Oct 2015 18:20:16 -0400
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <201510141921.22549.even.rouault@spatialys.com>
 <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>
Message-ID: <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>

Sean got what I was meaning to say.  Do we want the output to have some
record of which mode was used.  I think the answer is likely no.  And it
reminds me that I need to think about a driver for writing ISO metadata
files.  (bleck)  The processing steps would go in an xml iso metadata
sidecar.



>> > - Do we need to add anything to the JSON to flag which conversion method
>> > was used?
>>
>> I don't understand what you mean here.
>>
>
> Kurt, do you mean that the output JSON would have a item indicating
> whether it was a high fidelity or lossy translation of the input?
>
> --
> Sean Gillies
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151014/d3085aeb/attachment.html>

From doug_newcomb at fws.gov  Thu Oct 15 04:46:08 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 15 Oct 2015 07:46:08 -0400
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <201510141921.22549.even.rouault@spatialys.com>
 <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>
 <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>
Message-ID: <CALQGVr3P8nKFiDQ5Y6Vnb4DgEhA+5VJZVwj1xCqMJc+oxmrHnA@mail.gmail.com>

Kurt,
A driver for writing ISO metadata files would be quite welcome. Anything to
make compiling and writing metadata less painful is always a good thing.
:-)

Doug

On Wed, Oct 14, 2015 at 6:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Sean got what I was meaning to say.  Do we want the output to have some
> record of which mode was used.  I think the answer is likely no.  And it
> reminds me that I need to think about a driver for writing ISO metadata
> files.  (bleck)  The processing steps would go in an xml iso metadata
> sidecar.
>
>
>
>>> > - Do we need to add anything to the JSON to flag which conversion
>>> method
>>> > was used?
>>>
>>> I don't understand what you mean here.
>>>
>>
>> Kurt, do you mean that the output JSON would have a item indicating
>> whether it was a high fidelity or lossy translation of the input?
>>
>> --
>> Sean Gillies
>>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
As a federal employee, my email may be subject to FOIA request.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151015/6f204387/attachment.html>

From schwehr at gmail.com  Thu Oct 15 07:11:00 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 15 Oct 2015 10:11:00 -0400
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CALQGVr3P8nKFiDQ5Y6Vnb4DgEhA+5VJZVwj1xCqMJc+oxmrHnA@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <201510141921.22549.even.rouault@spatialys.com>
 <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>
 <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>
 <CALQGVr3P8nKFiDQ5Y6Vnb4DgEhA+5VJZVwj1xCqMJc+oxmrHnA@mail.gmail.com>
Message-ID: <CACmBxysJ1W_CktRbjFV0D1W2YZ+=C4gFZOiiuswr24Jwy6MEVA@mail.gmail.com>

Placeholder for we I or anybody else gets time to work on metadata
driver(s).

https://trac.osgeo.org/gdal/ticket/6154

Doug,

If you have any key example files that would work well for test coverage,
feel free to attach them to the ticket.  I know we need a pretty wide range
or a driver will just frustrate people.  BAGs are all I'm really familiar
with, and I know their embedded iso xml is very different than others I was
shown when I when to a metadata workshop back 5 ish years ago.

-kurt (goatbar)

On Thu, Oct 15, 2015 at 7:46 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:

> Kurt,
> A driver for writing ISO metadata files would be quite welcome. Anything
> to make compiling and writing metadata less painful is always a good thing.
> :-)
>
> Doug
>
> On Wed, Oct 14, 2015 at 6:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> Sean got what I was meaning to say.  Do we want the output to have some
>> record of which mode was used.  I think the answer is likely no.  And it
>> reminds me that I need to think about a driver for writing ISO metadata
>> files.  (bleck)  The processing steps would go in an xml iso metadata
>> sidecar.
>>
>>
>>
>>>> > - Do we need to add anything to the JSON to flag which conversion
>>>> method
>>>> > was used?
>>>>
>>>> I don't understand what you mean here.
>>>>
>>>
>>> Kurt, do you mean that the output JSON would have a item indicating
>>> whether it was a high fidelity or lossy translation of the input?
>>>
>>> --
>>> Sean Gillies
>>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
> As a federal employee, my email may be subject to FOIA request.
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151015/076cb5b8/attachment-0001.html>

From sean at mapbox.com  Thu Oct 15 08:44:39 2015
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 15 Oct 2015 09:44:39 -0600
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <201510141921.22549.even.rouault@spatialys.com>
 <CADPhZXwBPK8b9JpzDyRtzf-9_jcmAvJ5OeKcXKQtFkwSghuw-Q@mail.gmail.com>
 <CACmBxyseXsOYT01mMXb4tB2XfAXkm1kafnJ4Ww69jHBwD8K9PQ@mail.gmail.com>
Message-ID: <CADPhZXwHkPEz5_Aw05TL159dgj7iZXL+UOyaBQO-9noD5T9inw@mail.gmail.com>

Kurt,

On Wed, Oct 14, 2015 at 4:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Sean got what I was meaning to say.  Do we want the output to have some
> record of which mode was used.  I think the answer is likely no.
>

I agree, no. Without a larger provenance framework of some kind there's not
much to be done with that information. And such a provenance framework (
http://www.w3.org/TR/prov-o/ for example) covers this kind of thing already.


> And it reminds me that I need to think about a driver for writing ISO
> metadata files.  (bleck)  The processing steps would go in an xml iso
> metadata sidecar.
>

Let's discuss ISO metadata in a different thread :)

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151015/c973532a/attachment.html>

From mateusz at loskot.net  Thu Oct 15 13:12:45 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 15 Oct 2015 22:12:45 +0200
Subject: [gdal-dev] A question related to your recent post "Dropping
	Windows-CE support?"
In-Reply-To: <0E2B13239BB94F818B411638E79E4CA9@TimCrookLaptop>
References: <0E2B13239BB94F818B411638E79E4CA9@TimCrookLaptop>
Message-ID: <CABUeae9K+fdns4xEthxMAqaCVt-B7BLgaLuL3r8oPmRn=LzJOw@mail.gmail.com>

On 15 October 2015 at 20:57, Tim Crook <tim.crook at sympatico.ca> wrote:
> Hello there Mateusz.
>
> I am trying to set up a GDAL build environment using Visual Studio 2015 for
> development, not nightly builds. Are there a bunch of project files and a
> solution file archived somewhere that I can use?

Do you mean you are trying to build GDAL for Windows CE
or Windows desktop?

Old Windows CE projects are still available here
https://svn.osgeo.org/gdal/tags/2.0.1/gdal/wince/


If you are asking about Windows desktop, here is script that can generate
VS solution/project files:
https://svn.osgeo.org/gdal/trunk/gdal/makegdal_gen.bat
Notice, generated project still uses NMAKE and makefiles.

p.s. Please, post to gdal-dev so others have access to any solutions we discuss.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Thu Oct 15 13:54:24 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 15 Oct 2015 22:54:24 +0200
Subject: [gdal-dev] A question related to your recent post "Dropping
	Windows-CE support?"
In-Reply-To: <108298822F7A4884851DE035CD7599A7@TimCrookLaptop>
References: <0E2B13239BB94F818B411638E79E4CA9@TimCrookLaptop>
 <CABUeae9K+fdns4xEthxMAqaCVt-B7BLgaLuL3r8oPmRn=LzJOw@mail.gmail.com>
 <108298822F7A4884851DE035CD7599A7@TimCrookLaptop>
Message-ID: <CABUeae-yZr_UUE1tvgYnfrkEiTna_OZT5BGDptfiaX1rJLpi_A@mail.gmail.com>

On 15 October 2015 at 22:33, Tim Crook <tim.crook at sympatico.ca> wrote:
> I am trying to build a development environment for Windows desktop. I have
> already run makegdal_gen.bat and the created project files don't load/get
> converted with Visual Studio 2015.

I have just checked:

1) Launch cmd.exe and run makegdal_gen.bat 10.00 > makegdal14.vcproj
2) Load makegdal14.vcproj into VS2015 IDE
3) Confirm you want to upgrade and makegdal14.vcxproj + makegdal14.sln
are generated

Works for me.

> Inside the generated .vcproj files are a bunch of wrapped NMAKE commands -
> this isn't useful for development.

It is just a convenience proxy for NMAKE /f makefile.vc

> I will be working on bugs (and eventually
> features) of GDAL, so I want to do things like set breakpoints, maybe do
> profiling of GDAL.

You still can do it.
The only invoncenience is that you will have to set executable target
of your choice in
Project > Properties > Debugging > Command
Project > Properties > Debugging > Command Arguments
i.e. gdalinfo


Alternatively, join Dmitry & Maxim efforts to bring CMake into GDAL
http://wiki.osgeo.org/wiki/FOSS4G_2015_Code_Sprint#GDAL

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From schwehr at gmail.com  Thu Oct 15 14:07:10 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 15 Oct 2015 17:07:10 -0400
Subject: [gdal-dev] ISO Metadata
Message-ID: <CACmBxysRk0H1FVME6SASbiJXDY_XBGyhQGDBt+HBSwacAxWLbQ@mail.gmail.com>

If anyone wants to follow up on metadata, Sean is right... here is a
different subject thread for metadata.

On Thu, Oct 15, 2015 at 11:44 AM, Sean Gillies <sean at mapbox.com> wrote:

> Kurt,
>
> On Wed, Oct 14, 2015 at 4:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> Sean got what I was meaning to say.  Do we want the output to have some
>> record of which mode was used.  I think the answer is likely no.
>>
>
> I agree, no. Without a larger provenance framework of some kind there's
> not much to be done with that information. And such a provenance framework (
> http://www.w3.org/TR/prov-o/ for example) covers this kind of thing
> already.
>
>
>> And it reminds me that I need to think about a driver for writing ISO
>> metadata files.  (bleck)  The processing steps would go in an xml iso
>> metadata sidecar.
>>
>
> Let's discuss ISO metadata in a different thread :)
>
> --
> Sean Gillies
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151015/5254fd10/attachment.html>

From ryandammrose at gmail.com  Thu Oct 15 18:33:28 2015
From: ryandammrose at gmail.com (Ryan Dammrose)
Date: Thu, 15 Oct 2015 19:33:28 -0600
Subject: [gdal-dev] Seeking assistance with an OGR2OGR => SQL Server (esri
	geodatabase) Issue
Message-ID: <CAO93NG0anCinZM0m4vsUEQe1QpZcQg4h_wxv86dPVL4FsjKG8A@mail.gmail.com>

Hi there,

The Issue:
I am trying to use ogr2ogr to put a shapefile into a SQL Server table that
is also an esri geodatabase.  I have done this successfully before in the
past with SQL Server 2012 and esri 10.2, running from C#.

I am now attempting to do it with SQL Server 2014 and esri 10.2.2, running
from Python, and am running into a confounding and frustrating issue.  If I
run the following command on a regular SQL database, it works just fine:

'ogr2ogr -f "MSSQLSpatial"
"MSSQL:server=server;database=database;trusted_connection=yes;"
"C:/Users/username/Desktop/Test_Shapefile.shp" -lco "SRID=4326" -lco
"GEOM_TYPE=GEOMETRY" -lco "SCHEMA=DBO" -lco "OVERWRITE=YES" -nln
"TEST_TABLE" -overwrite'

If I point it to an esri geodatabase, however, I get this error:

ERROR 1: Error initializing the metadata tables : [Microsoft][ODBC SQL
Server Driver][SQL Server]There is already an object named
'geometry_columns' in the database.
ERROR 1: Error initializing the metadata tables : [Microsoft][ODBC SQL
Server Driver][SQL Server]There is already an object named
'geometry_columns' in the database.
ERROR 1: Terminating translation prematurely after failed
translation of layer Test_Shapefile (use -skipfailures to skip errors)

Interestingly, if I make an ogrinfo connection to the same database, I get:

ERROR 1: Error initializing the metadata tables : [Microsoft][ODBC SQL
Server Driver][SQL Server]There is already an object named
'geometry_columns' in the database.

INFO: Open of `MSSQL:server=MAPLION-PC;database=GIS;trusted_connection=yes;'
      using driver `MSSQLSpatial' successful.

followed by a listing of my tables in the database.  This happens for every
SDE/geodatabase-enabled database I have tried it on.

Does anyone have any ideas what may be causing this issue?  Thank you.

-Ryan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151015/021c9024/attachment.html>

From damian.dixon at gmail.com  Fri Oct 16 02:42:09 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Fri, 16 Oct 2015 10:42:09 +0100
Subject: [gdal-dev] ISO Metadata
In-Reply-To: <CACmBxysRk0H1FVME6SASbiJXDY_XBGyhQGDBt+HBSwacAxWLbQ@mail.gmail.com>
References: <CACmBxysRk0H1FVME6SASbiJXDY_XBGyhQGDBt+HBSwacAxWLbQ@mail.gmail.com>
Message-ID: <CAJjdW1zSWAxtr=gt_rmKiLxZYcGCanDK=zA0u4ESjQyyghZZHg@mail.gmail.com>

Hi,

When ever anyone mentions ISO metadata I think of:

ISO 19103
ISO 19115

Are we talking about these?

If we are then I would just like to mention that both of these standards
lose information and context when you attempt to populate the fields from
actual data products.

There is also the issue of interpretation as to what data fields to copy to
which metadata fields.

Because of this I would suggest that each data format should store it's
metadata in a lossless form.

An xlst should be provided to convert each data-format metadata to the
appropriate ISO metadata format.

Regards
Damian

PS. Metadata for data does not excite me, but it is a necessary evil that
is becoming very important.


On 15 October 2015 at 22:07, Kurt Schwehr <schwehr at gmail.com> wrote:

> If anyone wants to follow up on metadata, Sean is right... here is a
> different subject thread for metadata.
>
> On Thu, Oct 15, 2015 at 11:44 AM, Sean Gillies <sean at mapbox.com> wrote:
>
>> Kurt,
>>
>> On Wed, Oct 14, 2015 at 4:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
>>
>>> Sean got what I was meaning to say.  Do we want the output to have some
>>> record of which mode was used.  I think the answer is likely no.
>>>
>>
>> I agree, no. Without a larger provenance framework of some kind there's
>> not much to be done with that information. And such a provenance framework (
>> http://www.w3.org/TR/prov-o/ for example) covers this kind of thing
>> already.
>>
>>
>>> And it reminds me that I need to think about a driver for writing ISO
>>> metadata files.  (bleck)  The processing steps would go in an xml iso
>>> metadata sidecar.
>>>
>>
>> Let's discuss ISO metadata in a different thread :)
>>
>> --
>> Sean Gillies
>>
>
>
>
> --
> --
> http://schwehr.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151016/157ee22f/attachment.html>

From mateusz at loskot.net  Fri Oct 16 03:01:12 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Oct 2015 03:01:12 -0700 (PDT)
Subject: [gdal-dev] GDAL testing
In-Reply-To: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
Message-ID: <1444989672755-5230596.post@n6.nabble.com>

Hi Kurt,

I'm interested in this topic, so I'd like to pull some more details to
better
understand the idea, if you don't mind.


Kurt Schwehr-2 wrote
> For my production work, I'm not able to use the autotest python code
> because of its non-unittest architecture.

Could you elaborate more on what properties exactly are missing
from the current autotest suite?
IOW, what kind of gap autotest2 fills.

Yes, autotest is not a unit testing suite.
To me, it combines functional/integration/blackbox/system/regression
testing.


Kurt Schwehr-2 wrote
> So... I started creating python
> unittest and C++ gunit based tests. 

Since you mention unittest, then gmock too?


Kurt Schwehr-2 wrote
> The tests are more focused on test isolation than autotest.  This allows
> for a lot more parallelism in testing.

Isolation at what level?
I suppose, you mean test case isolation, but not isolation of code/unit
under test.

So, the former means each test case runs in isolated environment,
with exclusive access to files/databases/memory/resources required by
particular test.
For example, each run of ogr_mysql.py, also in parallel, exclusively targets
a 'unique' database.

Correct?


Kurt Schwehr-2 wrote
> Here are some samples:
> 
> C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for C++14
> soon.. e.g. make_unique)
> - autotest2/cpp/port/cpl_conv_test.cc
> &lt;https://gist.github.com/schwehr/13137d826763763fb031&gt; (Yes, this is
> massively boring code)

AFAIS, architecture of tests won't change much, typically, test cases will
target functional modules (drivers).
Or, do you plan for proper unit tests targeting individual
interfaces/classes
in internal implementation of drivers, etc.?


Kurt Schwehr-2 wrote
> I'm (mostly) following Google's style guides.
> All C++ should be formatted with "clang-format --style=Google"

Unless it is not planned to include autotest2 into GDAL source code,
shouldn't it follow GDAL style?


Kurt Schwehr-2 wrote
> Would like to eventually do (unsorted):
> - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some MSAN
> &
> heap checkers by hand)
> - Performance testing - time and memory usage

IMHO, those belong to separate suites.


- Test the C API at the C level
</qoute>

If plain unittests are planned, mocking might be possible.

Best regards,
Mateusz



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-GDAL-testing-tp5222783p5230596.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From doug_newcomb at fws.gov  Fri Oct 16 04:19:36 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Fri, 16 Oct 2015 07:19:36 -0400
Subject: [gdal-dev] ISO Metadata
In-Reply-To: <CAJjdW1zSWAxtr=gt_rmKiLxZYcGCanDK=zA0u4ESjQyyghZZHg@mail.gmail.com>
References: <CACmBxysRk0H1FVME6SASbiJXDY_XBGyhQGDBt+HBSwacAxWLbQ@mail.gmail.com>
 <CAJjdW1zSWAxtr=gt_rmKiLxZYcGCanDK=zA0u4ESjQyyghZZHg@mail.gmail.com>
Message-ID: <CALQGVr2b4M+H+_kTjTdbxSAeFUcvi-eKaCQQjMp3OXc8r=1jag@mail.gmail.com>

Hi Damian

On Fri, Oct 16, 2015 at 5:42 AM, Damian Dixon <damian.dixon at gmail.com>
wrote:

> Hi,
>
> When ever anyone mentions ISO metadata I think of:
>
> ISO 19103
> ISO 19115
>
> Are we talking about these?
>

I am thinking ISO 19115 and ISO 19115-1



>
> If we are then I would just like to mention that both of these standards
> lose information and context when you attempt to populate the fields from
> actual data products.
>
> There is also the issue of interpretation as to what data fields to copy
> to which metadata fields.
>
> Because of this I would suggest that each data format should store it's
> metadata in a lossless form.
>
> An xlst should be provided to convert each data-format metadata to the
> appropriate ISO metadata format.
>
> Regards
> Damian
>
> PS. Metadata for data does not excite me, but it is a necessary evil that
> is becoming very important.
>
>
Metadata only excites me when I get someone else's data and I need to know
how it was created.  At which point it has my full attention :-)

Doug




>
> On 15 October 2015 at 22:07, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> If anyone wants to follow up on metadata, Sean is right... here is a
>> different subject thread for metadata.
>>
>> On Thu, Oct 15, 2015 at 11:44 AM, Sean Gillies <sean at mapbox.com> wrote:
>>
>>> Kurt,
>>>
>>> On Wed, Oct 14, 2015 at 4:20 PM, Kurt Schwehr <schwehr at gmail.com> wrote:
>>>
>>>> Sean got what I was meaning to say.  Do we want the output to have some
>>>> record of which mode was used.  I think the answer is likely no.
>>>>
>>>
>>> I agree, no. Without a larger provenance framework of some kind there's
>>> not much to be done with that information. And such a provenance framework (
>>> http://www.w3.org/TR/prov-o/ for example) covers this kind of thing
>>> already.
>>>
>>>
>>>> And it reminds me that I need to think about a driver for writing ISO
>>>> metadata files.  (bleck)  The processing steps would go in an xml iso
>>>> metadata sidecar.
>>>>
>>>
>>> Let's discuss ISO metadata in a different thread :)
>>>
>>> --
>>> Sean Gillies
>>>
>>
>>
>>
>> --
>> --
>> http://schwehr.org
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
As a federal employee, my email may be subject to FOIA request.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151016/331f6834/attachment.html>

From mateusz at loskot.net  Fri Oct 16 08:13:45 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Oct 2015 08:13:45 -0700 (PDT)
Subject: [gdal-dev] A question related to your recent post "Dropping
 Windows-CE support?"
In-Reply-To: <CABUeae-yZr_UUE1tvgYnfrkEiTna_OZT5BGDptfiaX1rJLpi_A@mail.gmail.com>
References: <CABUeae9K+fdns4xEthxMAqaCVt-B7BLgaLuL3r8oPmRn=LzJOw@mail.gmail.com>
 <CABUeae-yZr_UUE1tvgYnfrkEiTna_OZT5BGDptfiaX1rJLpi_A@mail.gmail.com>
Message-ID: <1445008425846-5230664.post@n6.nabble.com>

Mateusz Loskot wrote
> On 15 October 2015 at 22:33, Tim Crook &lt;

> tim.crook@

> &gt; wrote:
>> I will be working on bugs (and eventually
>> features) of GDAL, so I want to do things like set breakpoints, maybe do
>> profiling of GDAL.
> 
> You still can do it.
> ...

I have enabled the "jump to warning|error" from the Visual Studio IDE,
Output|Error List window
https://trac.osgeo.org/gdal/changeset/31019

Should be more covenient.

Regards,
Mateusz



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-A-question-related-to-your-recent-post-Dropping-Windows-CE-support-tp5230480p5230664.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dmorissette at mapgears.com  Fri Oct 16 08:45:56 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 16 Oct 2015 11:45:56 -0400
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
Message-ID: <56211BB4.9010106@mapgears.com>

Just a quick note to say that I reviewed the RFC and like the idea.

I can see this being used someday by the MapInfo TAB/MIF drivers to 
carry the native MapInfo styling info, as well as geometry in some cases 
(rectangle, roundedrect, text object, etc.) to maintain them between TAB 
and MIF files as this conversion can be lossy at the moment.

I also saw a suggestion that it should be possible to disable loading 
the native data when we open a layer and I think that's important if we 
intend to use this for more than just GeoJSON. For instance, when 
loading layers in an application (QGIS, MapServer, etc.) that ignores 
the native data, then it should be possible to have this overhead disabled.

We definitely need a generic option for enabling/disabling this and not 
a driver-specific option. Perhaps the native data should be disabled by 
default for all drivers, and be explicitly turned on by ogr2ogr and by 
apps that know how to use the native info?

No other comments on my part.

Daniel


On 2015-10-14 1:07 PM, Kurt Schwehr wrote:
> Just gave RFC 60 a quick look.  In general, I think we absolutely need
> this.  Some thoughts:
>
> - There are users who need the old behavior.  We need an easy way to get
> that.  I think the default should be the more functional RFC 60 way.  I
> see the -noNativeData flag, so I think this is well covered.
> - What is the likely performance impact +/-?
> - It would be nice to base a could use cases described in the RFC so we
> are not totally counting on the links.  They don't have to be super
> detailed.
> - Do we need to add anything to the JSON to flag which conversion method
> was used?
>
> -kurt
>
> On Fri, Sep 25, 2015 at 1:23 PM, Sean Gillies <sean at mapbox.com
> <mailto:sean at mapbox.com>> wrote:
>
>     Dear all,
>
>     This feature is a boost for GeoJSON users who are extending the
>     format and users of those extensions. JSON is a naturally extensible
>     format but the GeoJSON OGR driver stifles development of extensions
>     by passing only the fully standardized GeoJSON items.
>
>     Let's say I want to use ogr2ogr to spatially filter some GeoJSON
>     coming from the OSM Overpass API [1] or the Mapbox Geocoding API
>     [2]. Here's what the response of the latter looks like, abbreviated:
>
>     $ curl
>     https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
>     | python -mjson.tool
>     {
>          "attribution": "NOTICE: \u00a9 2015 Mapbox and its suppliers.
>     All rights reserved. Use of this data is subject to the Mapbox Terms
>     of Service (https://www.mapbox.com/about/maps/). This response and
>     the information it contains may not be retained.",
>          "features": [
>              {
>                  "address": "1600",
>                  "bbox": [
>                      -77.05781199999998,
>                      38.89252299999999,
>                      -77.01844799999999,
>                      38.905058999999994
>                  ],
>                  "center": [
>                      -77.034389,
>                      38.897693
>                  ],
>                  "context": [
>                      {
>                          "id": "place.57972",
>                          "text": "Washington"
>                      },
>                      {
>                          "id": "postcode.858369517",
>                          "text": "20004"
>                      },
>                      {
>                          "id": "region.1190806886",
>                          "text": "District of Columbia"
>                      },
>                      {
>                          "id": "country.4150104525",
>                          "text": "United States"
>                      }
>                  ],
>                  "geometry": {
>                      "coordinates": [
>                          -77.034389,
>                          38.897693
>                      ],
>                      "type": "Point"
>                  },
>                  "id": "address.39053333360279",
>                  "place_name": "1600 Pennsylvania Ave NW, Washington,
>     20004, District of Columbia, United States",
>                  "properties": {},
>                  "relevance": 0.99,
>                  "text": "Pennsylvania Ave NW",
>                  "type": "Feature"
>              },
>              ...
>          ],
>          "query": [
>              "1600",
>              "pennsylvania",
>              "ave",
>              "nw"
>          ],
>          "type": "FeatureCollection"
>     }
>
>     The Features and FeatureCollection have extension items expressing
>     rights, the original query, and more.
>
>     When I pipe this through ogr2ogr to spatially filter, here are the
>     results:
>
>     $ curl
>     https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
>     | ogr2ogr -clipsrc -100 30 -70 60 -f GeoJSON /vsistdout/ /vsistdin/
>     {
>     "type": "FeatureCollection",
>     "crs": { "type": "name", "properties": { "name":
>     "urn:ogc:def:crs:OGC:1.3:CRS84" } },
>     "features": [
>     { "type": "Feature", "properties": { }, "geometry": { "type":
>     "Point", "coordinates": [ -77.034389, 38.897693 ] } },
>     { "type": "Feature", "properties": { }, "geometry": { "type":
>     "Point", "coordinates": [ -76.634388, 39.30307 ] } },
>     { "type": "Feature", "properties": { }, "geometry": { "type":
>     "Point", "coordinates": [ -80.272062, 40.687045 ] } },
>     { "type": "Feature", "properties": { }, "geometry": { "type":
>     "Point", "coordinates": [ -95.54508, 34.841595 ] } }
>     ]
>     }
>
>     The extensions are lost. This means that ogr2ogr can't be used in
>     pipelines that process extended GeoJSON.
>
>     If you want your GeoJSON to pass through OGR in high fidelity, you
>     have to put everything in the Feature.properties object no matter
>     whether that's the best place for it or not. In practice, the
>     Feature.properties object becomes a grey goo of feature attributes,
>     styling properties, and you name it.
>
>     The implementation of RFC 60 would pass through GeoJSON extensions
>     in full hi-fi. OGR will no longer be an impediment to extension
>     developers.
>
>     [1] http://wiki.openstreetmap.org/wiki/Overpass_turbo/GeoJSON
>     [2] https://github.com/mapbox/carmen/blob/master/carmen-geojson.md
>
>     Yours,
>
>
>     On Wed, Sep 23, 2015 at 9:29 AM, Even Rouault
>     <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>         Hi,
>
>         This is a call for discussion on "RFC 60: Improved
>         round-tripping in OGR".
>
>         https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr
>
>         This RFC defines how to improve better round-tripping in
>         conversion of vector
>         formats, in particular for GeoJSON extensions.
>
>         Best regards,
>
>         Even
>
>         --
>         Spatialys - Geospatial professional services
>         http://www.spatialys.com
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>     --
>     Sean Gillies
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> --
> http://schwehr.org
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From mateusz at loskot.net  Fri Oct 16 09:11:17 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Oct 2015 18:11:17 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
Message-ID: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>

Hi,

I noticed Kurt has been applying lots of non-functional code improvements,
refactoring, and cleaning compilation warnings, etc.

I have been considering similar clean-up also to unify class member names
which often lead to compilation warnings due to declaration hiding.

I committed a short example of such refactoring:
https://trac.osgeo.org/gdal/changeset/31023

Would that be something acceptable across the whole source code?

>From my experience, cleaning up such trivias sometimes reveals very
subtle bugs, so it has potential to improve functional quality as well.

I'm willing to join Kurt's efforts.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Fri Oct 16 09:20:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Oct 2015 18:20:37 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <56211E56.4050709@gmx.eu>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510121128.17770.even.rouault@spatialys.com> <56211E56.4050709@gmx.eu>
Message-ID: <201510161820.37373.even.rouault@spatialys.com>

Le vendredi 16 octobre 2015 17:57:10, Hermann Peifer a crit :
> On 2015-10-12 11:28, Even Rouault wrote:
> > I've changed to '%.15g' formatting for WKT in
> > https://trac.osgeo.org/gdal/ticket/6145
> 
> Hi Even,
> 
> Why did you choose '%.15g', rather than '%.17g'? The latter format
> should guarantee a lossless binary->decimal->binary round-trip, whereas
> the former one might also do -- or not. I don't think that any precision
> loss between '%.15g', and '%.17g' would result into "a real life
> problem", I am asking just out of curiosity.

Hi Hermann,

re'adding the list in CC.

Your point is valid. My idea was to avoid making WKT returned by the modified 
version potentially longer than it is currently

This should perhaps be configurable to accomodate for different use cases.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Oct 16 10:30:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Oct 2015 19:30:55 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
Message-ID: <201510161930.55249.even.rouault@spatialys.com>

Le vendredi 16 octobre 2015 18:11:17, Mateusz Loskot a crit :
> Hi,
> 
> I noticed Kurt has been applying lots of non-functional code improvements,
> refactoring, and cleaning compilation warnings, etc.
> 
> I have been considering similar clean-up also to unify class member names
> which often lead to compilation warnings due to declaration hiding.
> 
> I committed a short example of such refactoring:
> https://trac.osgeo.org/gdal/changeset/31023
> 
> Would that be something acceptable across the whole source code?

I guess Kurt will point to
https://google-styleguide.googlecode.com/svn/trunk/cppguide.html#Variable_Names
with the blabla_ convention ;-)

This underscore suffix convention is used in very few places, mainly the (old) KML driver AFAIK

The m_ convention is used a bit more often in the GDAL code base.

If we adopt any convention, this should be added to https://trac.osgeo.org/gdal/wiki/rfc8_devguide

Personnaly I find the m_ convention more readable as the trailing underscore
is easy to miss, but perhaps that is the intention ?

Whatever convention would be used, I'd advise not to apply it to public or
protected members of GDAL exported classes (like the ones of gcore/gdal_priv.h),
because that could break external plugins. Or that would require more advertizing of the change.

> 
> From my experience, cleaning up such trivias sometimes reveals very
> subtle bugs, so it has potential to improve functional quality as well.
> 
> I'm willing to join Kurt's efforts.

Some coordination might be required to avoid stepping on each other toes.

> 
> Best regards,

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Fri Oct 16 10:50:47 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Oct 2015 19:50:47 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <201510161930.55249.even.rouault@spatialys.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <201510161930.55249.even.rouault@spatialys.com>
Message-ID: <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>

On 16 Oct 2015 19:30, "Even Rouault" <even.rouault at spatialys.com> wrote:
> Le vendredi 16 octobre 2015 18:11:17, Mateusz Loskot a crit :
> > Hi,
> >
> > I noticed Kurt has been applying lots of non-functional code
improvements,
> > refactoring, and cleaning compilation warnings, etc.
> >
> > I have been considering similar clean-up also to unify class member
names
> > which often lead to compilation warnings due to declaration hiding.
> >
> > I committed a short example of such refactoring:
> > https://trac.osgeo.org/gdal/changeset/31023
> >
> > Would that be something acceptable across the whole source code?
>
> I guess Kurt will point to
>
https://google-styleguide.googlecode.com/svn/trunk/cppguide.html#Variable_Names
> with the blabla_ convention ;-)
>
> This underscore suffix convention is used in very few places, mainly the
(old) KML driver AFAIK
>
> The m_ convention is used a bit more often in the GDAL code base.

I'm not proposing any changes to naming convention. AFAICT, currently GDAL
either uses m_ prefix or nothing.
I will keep using g the m_ prefix, so the trailing underscore is out of
discussion from my point.

> If we adopt any convention, this should be added to
https://trac.osgeo.org/gdal/wiki/rfc8_devguide

I haven't checked the page but I assume it should be m_

> Personnaly I find the m_ convention more readable as the trailing
underscore
> is easy to miss, but perhaps that is the intention ?

My personal preference is the trailing underscore, but that is irrelevant
as I'm going to follow the code base.

> Whatever convention would be used, I'd advise not to apply it to public or
> protected members of GDAL exported classes (like the ones of
gcore/gdal_priv.h),
> because that could break external plugins. Or that would require more
advertizing of the change.

Good point. OK.

> > I'm willing to join Kurt's efforts.
>
> Some coordination might be required to avoid stepping on each other toes.

Sure. That's why I mentioned Kurt hoping he will chime in.

Mateusz oskot
(Sent from mobile)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151016/24bb5791/attachment.html>

From peifer at gmx.eu  Fri Oct 16 11:14:44 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri, 16 Oct 2015 20:14:44 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <201510161820.37373.even.rouault@spatialys.com>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510121128.17770.even.rouault@spatialys.com> <56211E56.4050709@gmx.eu>
 <201510161820.37373.even.rouault@spatialys.com>
Message-ID: <56213E94.30307@gmx.eu>

On 2015-10-16 18:20, Even Rouault wrote:
> Le vendredi 16 octobre 2015 17:57:10, Hermann Peifer a crit :
>> On 2015-10-12 11:28, Even Rouault wrote:
>>> I've changed to '%.15g' formatting for WKT in
>>> https://trac.osgeo.org/gdal/ticket/6145
>>
>> Hi Even,
>>
>> Why did you choose '%.15g', rather than '%.17g'? The latter format
>> should guarantee a lossless binary->decimal->binary round-trip, whereas
>> the former one might also do -- or not. I don't think that any precision
>> loss between '%.15g', and '%.17g' would result into "a real life
>> problem", I am asking just out of curiosity.
>
> Hi Hermann,
>
> re'adding the list in CC.
>
> Your point is valid. My idea was to avoid making WKT returned by the modified
> version potentially longer than it is currently
>

I am pretty sure you know: '%.17g' could also result into shorter string 
values, compared to the earlier '%.15f', as in the below (admittedly 
unfair) example.

Hermann

$ printf "%.15f\n" 50.375
50.375000000000000
$
$ printf "%.17g\n" 50.375
50.375


From even.rouault at spatialys.com  Fri Oct 16 11:21:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Oct 2015 20:21:28 +0200
Subject: [gdal-dev] GDAL precision for Geometry object
In-Reply-To: <56213E94.30307@gmx.eu>
References: <2A147272-1CC3-43A0-B5D0-38AAA5436C8A@di.uoa.gr>
 <201510161820.37373.even.rouault@spatialys.com> <56213E94.30307@gmx.eu>
Message-ID: <201510162021.28948.even.rouault@spatialys.com>

Le vendredi 16 octobre 2015 20:14:44, Hermann Peifer a crit :
> On 2015-10-16 18:20, Even Rouault wrote:
> > Le vendredi 16 octobre 2015 17:57:10, Hermann Peifer a crit :
> >> On 2015-10-12 11:28, Even Rouault wrote:
> >>> I've changed to '%.15g' formatting for WKT in
> >>> https://trac.osgeo.org/gdal/ticket/6145
> >> 
> >> Hi Even,
> >> 
> >> Why did you choose '%.15g', rather than '%.17g'? The latter format
> >> should guarantee a lossless binary->decimal->binary round-trip, whereas
> >> the former one might also do -- or not. I don't think that any precision
> >> loss between '%.15g', and '%.17g' would result into "a real life
> >> problem", I am asking just out of curiosity.
> > 
> > Hi Hermann,
> > 
> > re'adding the list in CC.
> > 
> > Your point is valid. My idea was to avoid making WKT returned by the
> > modified version potentially longer than it is currently
> 
> I am pretty sure you know: '%.17g' could also result into shorter string
> values, compared to the earlier '%.15f', as in the below (admittedly
> unfair) example.

Yes, that's intended that the output is potentially now shorter than before. 
Previous formatting outputed too many figures, especially for projected 
coordinates.

> 
> Hermann
> 
> $ printf "%.15f\n" 50.375
> 50.375000000000000
> $
> $ printf "%.17g\n" 50.375
> 50.375

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Oct 16 13:47:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 16 Oct 2015 22:47:18 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <201510161930.55249.even.rouault@spatialys.com>
 <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>
Message-ID: <201510162247.18194.even.rouault@spatialys.com>


> I'm not proposing any changes to naming convention. AFAICT, currently GDAL
> either uses m_ prefix or nothing.

Well, I think you'll agree that using m_foo or bla_ is a naming convention, 
and there's nothing specified in  
https://trac.osgeo.org/gdal/wiki/rfc8_devguide related to that.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Fri Oct 16 13:50:43 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 16 Oct 2015 22:50:43 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <201510162247.18194.even.rouault@spatialys.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <201510161930.55249.even.rouault@spatialys.com>
 <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>
 <201510162247.18194.even.rouault@spatialys.com>
Message-ID: <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>

On 16 October 2015 at 22:47, Even Rouault <even.rouault at spatialys.com> wrote:
>
>> I'm not proposing any changes to naming convention. AFAICT, currently GDAL
>> either uses m_ prefix or nothing.
>
> Well, I think you'll agree that using m_foo or bla_ is a naming convention,

Right, I meant, to actually apply unified convention: some classes use
no prefix,
others use m_. Let's choose m_ and stick to it.

> and there's nothing specified in
> https://trac.osgeo.org/gdal/wiki/rfc8_devguide related to that.

Then, it's gonna be updated, I think.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From schwehr at gmail.com  Fri Oct 16 15:25:45 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 16 Oct 2015 18:25:45 -0400
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <201510161930.55249.even.rouault@spatialys.com>
 <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>
 <201510162247.18194.even.rouault@spatialys.com>
 <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>
Message-ID: <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>

I personally like foo_, but m_ is fine.  I worry about unexpected side
effects of changing member naming with private members.  I don't think
there will be any if everything builds, but I still worry.  If we go for
changing publics, we should pick a time and go for a major version number
bump and expect a lot of peopIe using GDAL to go through a lot of pain.  I
see a lot of stuff generally like this...

class Foo
{
public:
  Foo(int blahIn) { this->blah = blahIn; };
  int blah;
}

After looking at a lot of GDAL code, it seems that we should go with:

class Foo
{
  int m_blah;
public:
 Foo( int blah ) : m_blah(blah) {}
 int blah() { return m_blah; }
}

On Fri, Oct 16, 2015 at 4:50 PM, Mateusz Loskot <mateusz at loskot.net> wrote:

> On 16 October 2015 at 22:47, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> >> I'm not proposing any changes to naming convention. AFAICT, currently
> GDAL
> >> either uses m_ prefix or nothing.
> >
> > Well, I think you'll agree that using m_foo or bla_ is a naming
> convention,
>
> Right, I meant, to actually apply unified convention: some classes use
> no prefix,
> others use m_. Let's choose m_ and stick to it.
>
> > and there's nothing specified in
> > https://trac.osgeo.org/gdal/wiki/rfc8_devguide related to that.
>
> Then, it's gonna be updated, I think.
>
> Best regards,
> --
> Mateusz  Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151016/69a01e06/attachment.html>

From schwehr at gmail.com  Fri Oct 16 21:14:37 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 17 Oct 2015 00:14:37 -0400
Subject: [gdal-dev] GDAL testing
In-Reply-To: <1444989672755-5230596.post@n6.nabble.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
 <1444989672755-5230596.post@n6.nabble.com>
Message-ID: <CACmBxyv1O+YOa3_pf1ZYCW2LAEPqbLVUqEjf=N2iaN232y4iXg@mail.gmail.com>

Mateusz,

I'll try to do my best to answer inline.  What we have with autotest is
super important.  I've been trying to figure out how we take the first 17
years of knowledge built up in GDAL and make keep going forward over the
next couple decades.  What will help people contribute to GDAL in the
future?  I started autotest2 with the assumption that the GDAL community
might not be interested in including it in the main GDAL tree, may want to
restructure it and include it, or might only want some pieces.  I'm fine
with any of that.  It's been really helpful for me so far.

Not sure these are the best answers, but here is what I've written off the
top of my head.  I think I'm being a bit redundant.

However, above everything else, we can't give up the coverage that we
currently have.  It's a lot and it's taken a huge effort to get to this
point, but I think it is not nearly enough.  I think that means that
autotest in it's current form will be with us for the foreseeable future.
Nor is it enough to just get the Coverity issue count to 0.

-kurt

On Fri, Oct 16, 2015 at 6:01 AM, Mateusz Loskot <mateusz at loskot.net> wrote:

> Hi Kurt,
>
> I'm interested in this topic, so I'd like to pull some more details to
> better
> understand the idea, if you don't mind.
>
>
> Kurt Schwehr-2 wrote
> > For my production work, I'm not able to use the autotest python code
> > because of its non-unittest architecture.
>
> Could you elaborate more on what properties exactly are missing
> from the current autotest suite?
> IOW, what kind of gap autotest2 fills.
>
>
Things that are missing from autotest python code:

- By not being python unittest/unittest2/mock based, a lot of tools don't
know how to discover the tests.  nose <https://pypi.python.org/pypi/nose/>,
pytest <http://pytest.org/>, and lots of folks have their own test runners.
 e.g. Google has the internal version of Blaze: Bazel.  I tried writing a
thin unittest wrapper and it turned into a mess.  I'm sure it can be done,
but the env I work in is super constrained.  And the test reporting with
unittest is a lot stronger than what we have with autotest.
- It has a syntax that is unfamiliar to the average python coder.  The
junit style is super common, so there are more folks available who really
know unittest based tools.
- There is a lot of well developed utility in the the unittest/unittest2
infrastructure that is very robust
- Isolated tests.  There are a lot of tests that cascade.  That makes
running tests in parallel much more difficult
- The python mocks library is pretty great for making tests of things like
databases.  We could have standard mocks for database interactions that
would help folks test their python code that uses
gdal+{mysql,postgis,mssql,oracle,etc}.  That could really accelerate
development for many people.
- unittest and other related tools have nice ways to allow running subsets
of tests

Python unittest is often all of the things you describe.  It doesn't do
well with UI and integration testing of super different libraries, but it
is just as capable as what is currently in autotest.

It's worth taking a look at some examples.  e.g. Fiona's tests
<https://github.com/Toblerity/Fiona/tree/master/tests>



> Yes, autotest is not a unit testing suite.
> To me, it combines functional/integration/blackbox/system/regression
> testing.
>
>
> Kurt Schwehr-2 wrote
> > So... I started creating python
> > unittest and C++ gunit based tests.
>
> Since you mention unittest, then gmock too?
>
>
Yes, gunit and gmock are usually used together.


> Kurt Schwehr-2 wrote
> > The tests are more focused on test isolation than autotest.  This allows
> > for a lot more parallelism in testing.
>
> Isolation at what level?
> I suppose, you mean test case isolation, but not isolation of code/unit
> under test.
>

Both types of isolation would be nice.  GDAL isn't designed for isolated
component testing of the drivers.  I've mostly been able to do isolated
testing on ports/cpl_*.  The biggest isolation issue is between each test
function/method.  Using the same filenames or using global variables and
having one test create a file and then follow on tests use that file.  Some
of these show up like this:

cd autotest
egrep 'gdaltest.[a-z]+_ds =' */*.py | grep -v None | head
gdrivers/fast.py:    gdaltest.fast_ds = gdal.Open(
'data/L71118038_03820020111_HPN.FST' )
gdrivers/georaster.py:    gdaltest.oci_ds = ogr.Open(
os.environ.get('OCI_DSNAME') )
gdrivers/mem.py:    gdaltest.mem_ds = drv.Create( 'mem_1.mem', 50, 3 )
gdrivers/pcidsk.py:    gdaltest.pcidsk_ds = driver.Create(
'tmp/pcidsk_5.pix', 400, 600, 1,
gdrivers/pcidsk.py:    gdaltest.pcidsk_ds = gdal.Open( 'tmp/pcidsk_5.pix',
gdal.GA_Update )
gdrivers/pcidsk.py:    gdaltest.pcidsk_ds = gdal.Open( 'tmp/pcidsk_5.pix',
gdal.GA_Update )
gdrivers/pcidsk.py:    gdaltest.pcidsk_ds = gdal.Open( 'tmp/pcidsk_5.pix',
gdal.GA_Update )
gdrivers/vrtrawlink.py:    gdaltest.rawlink_ds = gdal.Open(
'tmp/rawlink.vrt', gdal.GA_Update )
gdrivers/vrtrawlink.py:    gdaltest.rawlink_ds = gdal.Open(
'tmp/rawlink.vrt', gdal.GA_Update )
gdrivers/vrtwarp.py:    gdaltest.vrtwarp_ds = gdal.AutoCreateWarpedVRT(
gcp_ds )

egrep 'gdaltest.[a-z]+_ds =' */*.py | grep -v None | tail
ogr/ogr_sqlite.py:    gdaltest.sl_ds = ogr.Open( 'tmp/sqlite_test.db',
update = 1  )
ogr/ogr_sqlite.py:    gdaltest.sl_ds = ogr.Open( 'tmp/sqlite_test.db'  )
ogr/ogr_sqlite.py:    gdaltest.sl_ds = ogr.Open( 'tmp/sqlite_test.db',
update = 1  )
ogr/ogr_sqlite.py:    gdaltest.sl_ds = ogr.Open( 'tmp/sqlite_test.db',
update = 1 )
ogr/ogr_svg.py:        gdaltest.svg_ds = ogr.Open( 'data/test.svg' )
ogr/ogr_sxf.py:        gdaltest.sxf_ds = ogr.Open( 'data/100_test.sxf' )
ogr/ogr_vfk.py:    gdaltest.vfk_ds = ogr.Open('data/bylany.vfk')
ogr/ogr_vfk.py:    gdaltest.vfk_ds = ogr.Open('data/bylany.vfk')
ogr/ogr_vrt.py:        gdaltest.vrt_ds = ogr.Open( 'data/vrt_test.vrt' )
ogr/ogr_wasp.py:    gdaltest.wasp_ds = wasp_drv.CreateDataSource( 'tmp.map'
)




>
> So, the former means each test case runs in isolated environment,
> with exclusive access to files/databases/memory/resources required by
> particular test.
> For example, each run of ogr_mysql.py, also in parallel, exclusively
> targets
> a 'unique' database.
>
> Correct?
>
>
Correct.  Or that it is possible to enable isolation.


>
> Kurt Schwehr-2 wrote
> > Here are some samples:
> >
> > C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for C++14
> > soon.. e.g. make_unique)
> > - autotest2/cpp/port/cpl_conv_test.cc
> > &lt;https://gist.github.com/schwehr/13137d826763763fb031&gt; (Yes, this
> is
> > massively boring code)
>
> AFAIS, architecture of tests won't change much, typically, test cases will
> target functional modules (drivers).
> Or, do you plan for proper unit tests targeting individual
> interfaces/classes
> in internal implementation of drivers, etc.?
>

Looking at drivers, I think the level and type of testing that is
appropriate varies quite a bit.  Some drivers are super simple and some are
very complex.  In general, extensive testing of internals isn't super
important.  What we do need a ton more of is testing the failure paths.
 e.g. I took AFL and ran it against ogr2ogr and a custom little loader
program to read geojson.  GDAL code should never crash or hang, but it most
definitely does.  We need to turn those input files into test cases.

We also can use AFL to generate test cases that cover more of the failure
modes.   I did that with minixml:  r30854
<https://trac.osgeo.org/gdal/changeset/30854/>




>
>
> Kurt Schwehr-2 wrote
> > I'm (mostly) following Google's style guides.
> > All C++ should be formatted with "clang-format --style=Google"
>
> Unless it is not planned to include autotest2 into GDAL source code,
> shouldn't it follow GDAL style?
>
>
Not necessarily.   I'm working for Google and starting from scratch with
Google engineers doing the reviews, so I'm using the Google Style Guides.
The style for GDAL isn't what users of the library are likely to do.  A
part of what I'm trying to do with autotest2 is also give examples of what
I think are good ways to use GDAL.  People are likely going to use C++11/14
and Hungarian-ish notation is not something I've seen in any other project
I've worked on.  The Google style guide is pretty well flushed out, where
as RFC 8 for GDAL is very minimalistic.  I prefer to work in a space where
I can just follow.




> Kurt Schwehr-2 wrote
> > Would like to eventually do (unsorted):
> > - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some MSAN
> > &
> > heap checkers by hand)
> > - Performance testing - time and memory usage
>
> IMHO, those belong to separate suites.
>
>
Why separate the memory and thread tests?  If you write really solid
unittests in C++, you can flip on or off those modes.  As long as your
unittests properly cleanup, then they are great code to use for
ASAN/MSAN/etc.  For fuzzing, it is definitely helpful to isolate things
like the geojson driver from all the mechanics of which driver to use.
We'd like to be able to pass anything to the driver directly to trigger
code paths.  For performance, it really is a challenge and likely going to
be challenging to figure out what is worth doing.



>
> - Test the C API at the C level
> </qoute>
>

> If plain unittests are planned, mocking might be possible.
>

What do you mean by this?


>
> Best regards,
> Mateusz
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Re-GDAL-testing-tp5222783p5230596.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151017/2686d728/attachment-0001.html>

From gghiggini at gec-it.com  Sat Oct 17 01:50:58 2015
From: gghiggini at gec-it.com (Giorgio Ghiggini)
Date: Sat, 17 Oct 2015 10:50:58 +0200
Subject: [gdal-dev] gdal_polygonize.py not running
Message-ID: <018601d108b8$f1a98b40$d4fca1c0$@com>

Hi,

 

I am using the GISInternals release-1800-x64-gdal-1-11-1-mapserver-6-4-1
and I run the SDKShell.bat.

Then I tried running the gdal_polygonize.py as is and I got the following
message:

----------------------------------------------------------------------------
-----------------

C:\GEC\Software\GDAL\gisinternals>gdal_polygonize.py

"gdal_polygonize.py" non  riconosciuto come comando interno o esterno,

 un programma eseguibile o un file batch.

----------------------------------------------------------------------------
-----------------

In Italian, that means command not recognized so I thought the SDKShell is
not setting the path for this script.

 

I tried then running the command from the script folder as follow, but got
several errors:

----------------------------------------------------------------------------
-----------------

C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\scripts>gdal_polygonize.py
C:\GEC\Data\Slopes\testgdaldem-combined.tif -f "ESRI Shapefile"
C:\GEC\Data\Slopes\testgdalpolygonize.shp

Traceback (most recent call last):

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\scripts\gdal_polygoniz

e.py", line 34, in <module>

    from osgeo import gdal, ogr, osr

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\osgeo\__init__.py", li

ne 21, in <module>

    _gdal = swig_import_helper()

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\osgeo\__init__.py", li

ne 17, in swig_import_helper

    _mod = imp.load_module('_gdal', fp, pathname, description)

  File "C:\Python34\lib\imp.py", line 243, in load_module

    return load_dynamic(name, filename, file)

ImportError: DLL load failed: Impossibile trovare il modulo specificato.

----------------------------------------------------------------------------
-----------------

 

 

To me it looks like the script is not able to load other external files
(gdal, ogr, osr
), so I still think it is a matter of PATH setting.

 

Any help is very much appreciated.

 

Best regards,

Giorgio

 

 

Giorgio Ghiggini

 

GEC di Ghiggini Giorgio

Via Monte Matanna 1/C

55049 Viareggio (LU)

Italy

P.Iva: 01381570116

cell.: +39 331 141 9315

email: gghiggini at gec-it.com

www.gec-it.com

 <http://www.globalterramaps.com/> www.globalterramaps.com

www.globalaquamaps.com <http://www.globalaquamaps.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151017/41c44b99/attachment.html>

From mateusz at loskot.net  Sat Oct 17 03:14:44 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 17 Oct 2015 12:14:44 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <201510161930.55249.even.rouault@spatialys.com>
 <CABUeae_-8bCG4KRVYG0GX8fT8=B52nfiFeNihVcUTLSU58qZFg@mail.gmail.com>
 <201510162247.18194.even.rouault@spatialys.com>
 <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>
 <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>
Message-ID: <CABUeae8hJW-dDJxM=g2jw+ezsP7Hv3SGiA5uGOufzLqiMJhPNQ@mail.gmail.com>

On 17 October 2015 at 00:25, Kurt Schwehr <schwehr at gmail.com> wrote:
> I personally like foo_, but m_ is fine.

I personally too, but we should stick to what has already been used in GDAL.

> I worry about unexpected side
> effects of changing member naming with private members.

I don't suggest changing members visibility.

> If we go for changing
> publics, we should pick a time and go for a major version number bump and
> expect a lot of peopIe using GDAL to go through a lot of pain.  I see a lot
> of stuff generally like this...
> ...

Public members should stay as they are, not renamed.
That is also Even's suggestion.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Sat Oct 17 03:54:46 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 17 Oct 2015 12:54:46 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>
 <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>
Message-ID: <201510171254.46371.even.rouault@spatialys.com>

Le samedi 17 octobre 2015 00:25:45, Kurt Schwehr a crit :
> I personally like foo_, but m_ is fine.  I worry about unexpected side
> effects of changing member naming with private members.  I don't think
> there will be any if everything builds, but I still worry.

There can be subtle effects indeed, so care should be taken.

Consider the following example (just for the fun) :

#include <stdio.h>
#include <strings.h>  /* const char *index(const char *s, int c); */

class foo
{
        typedef const char* (*ptrfnc)(const char*, int);
        ptrfnc index;

    public:

        foo() : index(0) {}

        ptrfnc getIndex()
        {
            return index;
        }
};

int main(int argc, char** argv)
{
    printf("%p\n", foo().getIndex());
    return 0;
}

==> Displays (nil)

Now let's rename index to m_index, but forget to change getIndex():

#include <stdio.h>
#include <strings.h>  /* const char *index(const char *s, int c); */

class foo
{
        typedef const char* (*ptrfnc)(const char*, int);
        ptrfnc m_index;

    public:

        foo() : m_index(0) {}

        ptrfnc getIndex()
        {
            return index;
        }
};

int main(int argc, char** argv)
{
    printf("%p\n", foo().getIndex());
    return 0;
}

This still compiles without warning but displays 0x400548 ...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Sat Oct 17 04:34:33 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 17 Oct 2015 13:34:33 +0200
Subject: [gdal-dev] Refactoring: class members clean-up
In-Reply-To: <201510171254.46371.even.rouault@spatialys.com>
References: <CABUeae_MXfCT1-=pBYDV=GeH-xtHmqvGNGyBDEQWPrNnEzD03g@mail.gmail.com>
 <CABUeae-27X2RnuB1jZD6HFZOR-QT=fH7x_F=1oWEueUkALfQmQ@mail.gmail.com>
 <CACmBxys7qMYwiF8tW-o6o41hN49isj3gifzVNZ0VOkwTHH+pjQ@mail.gmail.com>
 <201510171254.46371.even.rouault@spatialys.com>
Message-ID: <CABUeae_y9G=_BTzcTtJcspVTROikZ91wBacxuZwHSQXxvuZr3A@mail.gmail.com>

On 17 October 2015 at 12:54, Even Rouault <even.rouault at spatialys.com> wrote:
> Le samedi 17 octobre 2015 00:25:45, Kurt Schwehr a crit :
>> I personally like foo_, but m_ is fine.  I worry about unexpected side
>> effects of changing member naming with private members.  I don't think
>> there will be any if everything builds, but I still worry.
>
> There can be subtle effects indeed, so care should be taken.
>
> Consider the following example (just for the fun) :
>
> [...]


I'm not going to argue if it si common or a bit convoluted case
with limtied scope, it is a good example.

To avoid introducing new bugs, I suggest to use refactoring tools offered by
any modern IDE. VS2015 handles your case flawlessly. I'd expect the same
from Qt Creator or Clion and others.

Potential of such problems is a good reason to use namespaces,
include common C98/C++ headers via C++ equivalents , #include <c*>,
i.e. <cstring>,
and import C stuff via std namespace. Then, such bugs are caught by compiler.

<strings.h> is part of POSIX, means it delivers C definitions,
so there is no std namespace there, but majority of GDAL is C++.

I'm not sure if such clean up is also on Kurt's list, but again, I can help.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sat Oct 17 14:32:55 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 17 Oct 2015 23:32:55 +0200
Subject: [gdal-dev] GDAL testing
In-Reply-To: <CACmBxyv1O+YOa3_pf1ZYCW2LAEPqbLVUqEjf=N2iaN232y4iXg@mail.gmail.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
 <1444989672755-5230596.post@n6.nabble.com>
 <CACmBxyv1O+YOa3_pf1ZYCW2LAEPqbLVUqEjf=N2iaN232y4iXg@mail.gmail.com>
Message-ID: <CABUeae-ihWS+jYMBMEPtF1jKWEdK_fOSsyPx-32MtS8SJ97HiQ@mail.gmail.com>

On 17 October 2015 at 06:14, Kurt Schwehr <schwehr at gmail.com> wrote:
> What we have with autotest is super important.

No doubt.

> I've been trying to figure out how we take the first 17
> years of knowledge built up in GDAL and make keep going forward over the
> next couple decades.

A very interesting question.

> What will help people contribute to GDAL in the future?

I assume, you mean to identify and remove objective barriers at levels of
source code, build configuration, test suite, documentation.

> However, above everything else, we can't give up the coverage that we
> currently have.

No doubt.

>  It's a lot and it's taken a huge effort to get to this
> point, but I think it is not nearly enough.  I think that means that
> autotest in it's current form will be with us for the foreseeable future.
> Nor is it enough to just get the Coverity issue count to 0.

Right.
I think it is important to clarify the term coverage here.
It is meant in terms of coverity, static analysis, but not necessarily as
code coverage vs our test suite. I hope I get it right myself too.

> On Fri, Oct 16, 2015 at 6:01 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>> Kurt Schwehr-2 wrote:
>> > For my production work, I'm not able to use the autotest python code
>> > because of its non-unittest architecture.
>>
>> Could you elaborate more on what properties exactly are missing
>> from the current autotest suite?
>> IOW, what kind of gap autotest2 fills.
>
> Things that are missing from autotest python code:
>
> - By not being python unittest/unittest2/mock based (...)
> - It has a syntax that is unfamiliar to the average python coder.  The junit
> style is super common, so there are more folks available who really know
> unittest based tools.

I agree, it is a barrier for potential contributions who know Python
native testing package(s).
Since the autotest package is a complex piece of software, but not based on
standard Python tools, it does not allow knowledge transfer/re-use.

> - There is a lot of well developed utility in the the unittest/unittest2
> infrastructure that is very robust

I second that.

> - Isolated tests.  There are a lot of tests that cascade.  That makes
> running tests in parallel much more difficult

I wasn't aware of cascading requirement or inter-dependencies in current tests.
It would be good to solve such issues, indeed.

> - The python mocks library is pretty great for making tests of things like
> databases. (...)

I second that too.
So, you are considering to use fakes for infrastructure.
Apart from simplifying testing environment, speeding things up,
it would also enable development of proper unit tests.

> - unittest and other related tools have nice ways to allow running subsets
> of tests

Yes. I'm huge fan of nose and its tests tagging feature.

> It's worth taking a look at some examples.  e.g. Fiona's tests

I have and I do.

I'd add couple of points to your list:
- test single thing per test method, it means one assertion per test method
- make test methods 5 lines long max
- use long descriptive names for test methods, not Python comments!
(ogr_csv_5 and alike is not a good name)

(Note, I don't say test case, as test case is a class in unittest, so better
speak of test methods.)

Added value is that such tests become great set of examples and tutorials.


>> Kurt Schwehr-2 wrote
>> > So... I started creating python
>> > unittest and C++ gunit based tests.
>>
>> Since you mention unittest, then gmock too?
>
> Yes, gunit and gmock are usually used together.

Good idea.

>> Kurt Schwehr-2 wrote
>> > The tests are more focused on test isolation than autotest.  This allows
>> > for a lot more parallelism in testing.
>>
>> Isolation at what level?
>> I suppose, you mean test case isolation, but not isolation of code/unit
>> under test.
>
>
> Both types of isolation would be nice.  GDAL isn't designed for isolated
> component testing of the drivers.

You're right.

> I've mostly been able to do isolated testing on ports/cpl_*.

Yes, CPL should be nice for unit testing with fakes.

> The biggest isolation issue is between each test
> function/method. Using the same filenames or using global variables and
> having one test create a file and then follow on tests use that file.

Yes, that is an issue indeed.

>> Kurt Schwehr-2 wrote
>> > Here are some samples:
>> >
>> > C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for C++14
>> > soon.. e.g. make_unique)
>> > - autotest2/cpp/port/cpl_conv_test.cc
>> > &lt;https://gist.github.com/schwehr/13137d826763763fb031&gt; (Yes, this
>> > is massively boring code)
>>
>> AFAIS, architecture of tests won't change much, typically, test cases will
>> target functional modules (drivers).
>> Or, do you plan for proper unit tests targeting individual
>> interfaces/classes in internal implementation of drivers, etc.?
>
>
> Looking at drivers, I think the level and type of testing that is
> appropriate varies quite a bit.  Some drivers are super simple and some are
> very complex.  In general, extensive testing of internals isn't super
> important.  What we do need a ton more of is testing the failure paths.
> e.g. I took AFL and ran it against ogr2ogr and a custom little loader
> program to read geojson.  GDAL code should never crash or hang, but it most
> definitely does.  We need to turn those input files into test cases.

I see.
I doubt it is practical to try to mock anything in drivers.
The gmock could be used to test some gcore interfaces though.

>> Kurt Schwehr-2 wrote
>> > I'm (mostly) following Google's style guides.
>> > All C++ should be formatted with "clang-format --style=Google"
>>
>> Unless it is not planned to include autotest2 into GDAL source code,
>> shouldn't it follow GDAL style?
>
> Not necessarily.   I'm working for Google and starting from scratch with
> Google engineers doing the reviews, so I'm using the Google Style Guides.

Ok, I understand.

> The style for GDAL isn't what users of the library are likely to do.

I can also imagine, Python users may expect Pythonic way of
writing Python tests for GDAL.

> A part of what I'm trying to do with autotest2 is also give examples of what I
> think are good ways to use GDAL.  People are likely going to use C++11/14
> and Hungarian-ish notation is not something I've seen in any other project
> I've worked on.

It is hard to disagree.

> The Google style guide is pretty well flushed out, where as
> RFC 8 for GDAL is very minimalistic.  I prefer to work in a space where I
> can just follow.

Right. Even if autotest2 makes it into GDAL codebase, it would be developed as
separate module, so not following GDAL style legacy shouldn't be an issue.
On the contrary, it could promote some more C++11/14 idiomatic code leaks into
GDAL core base...while GDAL is gradually dropping support for
non-C++11/14-compliant compilers :P

>> Kurt Schwehr-2 wrote
>> > Would like to eventually do (unsorted):
>> > - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some
>> > MSAN
>> > &
>> > heap checkers by hand)
>> > - Performance testing - time and memory usage
>>
>> IMHO, those belong to separate suites.
>>
>
> Why separate the memory and thread tests?

I meant, separate from unit or integration testing.

> If you write really solid unittests in C++, you can flip on or off those modes.
> As long as your unittests properly cleanup, then they are great code to use for
> ASAN/MSAN/etc.

My point was this:
You don't write unit or integration tests with performance as a goal.
Technically, you can, but that imposes too many goals for your unit tests -
while a good  unit test should tests single thing, assert single aspect, without
killing too may ducks with one shot.

Chances are, we understand the term "unit test" differently.

>> - Test the C API at the C level
>>
>> If plain unittests are planned, mocking might be possible.
>
> What do you mean by this?

C API is a public interface easily accessible.
You can unit test single C API function (or aspect of it)
by mocking related/dependency calls (i.e. https://cmocka.org).


I like your ideas and approach which are aligned with my own "wishes"
I've had collected about GDAL tests.
Once you properly public with your project, I may be able to help.

Best regards,
--
Mateusz  Loskot, http://mateusz.loskot.net

From graeme.bell at nibio.no  Mon Oct 19 02:12:49 2015
From: graeme.bell at nibio.no (Graeme B. Bell)
Date: Mon, 19 Oct 2015 09:12:49 +0000
Subject: [gdal-dev] The "Magic" kernel
Message-ID: <9C8BA846-D7CB-494C-BF75-170A9DB05AAD@skogoglandskap.no>

http://johncostella.webs.com/magic/

I came across this article recently. Is this available as a resampling kernel in GDAL? It looks very interesting. 

We have been processing landscape height GeoTIFFs with GDAL and in recent projects we found anything beyond the bilinear mode in GDAL had a tendency to introduce problematic artefacts. (With height data, 2D visual artefacts effectively become small artificial landscape structures that can interfere with modelling of e.g. slopes, soil erosion, contours, terrain driving costs).

Graeme Bell

From hrz at geodata.soton.ac.uk  Mon Oct 19 06:12:28 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon, 19 Oct 2015 14:12:28 +0100
Subject: [gdal-dev] The "Magic" kernel
In-Reply-To: <9C8BA846-D7CB-494C-BF75-170A9DB05AAD@skogoglandskap.no>
References: <9C8BA846-D7CB-494C-BF75-170A9DB05AAD@skogoglandskap.no>
Message-ID: <5624EC3C.3000109@geodata.soton.ac.uk>

Hello Graeme,

I agree that looks interesting - it would be good to see the results of 
some empirical tests on height data.  I have had similar problems to you 
with some resampling algorithms 
(https://github.com/geo-data/cesium-terrain-builder/issues/4): 'average' 
seemed to produce good results with height data for our use case.

Best regards,

Homme.

On 19/10/15 10:12, Graeme B. Bell wrote:
> http://johncostella.webs.com/magic/
>
> I came across this article recently. Is this available as a resampling kernel in GDAL? It looks very interesting.
>
> We have been processing landscape height GeoTIFFs with GDAL and in recent projects we found anything beyond the bilinear mode in GDAL had a tendency to introduce problematic artefacts. (With height data, 2D visual artefacts effectively become small artificial landscape structures that can interfere with modelling of e.g. slopes, soil erosion, contours, terrain driving costs).
>
> Graeme Bell
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Mon Oct 19 07:44:13 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 19 Oct 2015 14:44:13 +0000 (UTC)
Subject: [gdal-dev] The "Magic" kernel
References: <9C8BA846-D7CB-494C-BF75-170A9DB05AAD@skogoglandskap.no>
Message-ID: <loom.20151019T163128-922@post.gmane.org>

Graeme B. Bell <graeme.bell <at> nibio.no> writes:

> 
> http://johncostella.webs.com/magic/
> 
> I came across this article recently. Is this available as a resampling
kernel in GDAL? It looks very
> interesting. 

Unfortunately I do not understand the mathematics of the {1/4, 3/4, 3/4,
1/4} kernel but if there is a way to turn this "magic" kernel into odd
kernel (odd as an opposite to even) you can use GDAL VRT.
http://cbloomrants.blogspot.fi/2011/03/03-24-11-image-filters-and-gradients.html
perhaps suggests that it is possible. GDAL KernelFilteredSource accepts only
odd filters.

I copy here an example about how to make GDAL to support the 5x5 unsharp
kernel https://en.wikipedia.org/wiki/Kernel_%28image_processing%29 

</VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <ColorInterp>Green</ColorInterp>
    <KernelFilteredSource>
      <SourceFilename relativeToVRT="1">unsharp_filter_test.tif</SourceFilename>
      <SourceBand>2</SourceBand>
        <Kernel normalized="1">
          <Size>5</Size>
          <Coefs>1 4 6 4 1 4 16 24 16 4 6 24 -476 24 6 4 16 24 16 4 1 4 6 4
1</Coefs>
        </Kernel>
    </KernelFilteredSource>
</VRTRasterBand>

VRT works fine in QGIS and I can't notice any speed difference with
unfiltered image.


-Jukka Rahkonen-





From pascoal.egeo at gmail.com  Mon Oct 19 08:37:49 2015
From: pascoal.egeo at gmail.com (ePascoal)
Date: Mon, 19 Oct 2015 08:37:49 -0700 (PDT)
Subject: [gdal-dev] ARCSDE
Message-ID: <1445269069961-5231174.post@n6.nabble.com>

Hi  gdal-dev,

*INTRODUCTION*
i'm pretty newbie in gdal. This question follows another issue  which as to
do with " How to migrate data from ArcSDE to PostGIS?
<http://gis.stackexchange.com/questions/12989/how-to-migrate-data-from-arcsde-to-postgis> 
" And besides of my doubt about how to configure OGR SDE driver, i would
like to know your opinion about the process of migrate a ARCSDE database to
Postgis.

*
CONTEXT:*
So, in first place i have a Oracle 10g database with ArcSDE but
unfortunately i don't have access to SHAPELIB and other packages from ArcSDE
which would allow me to convert ESRI geom into string or another format that
PostGIS could understand as geometry type.

*SELECT* sde.ST_AsText(shape) as wkt *FROM* EXAMPLE_POLYGON_TABLE
So, this wouldn't be possible 


*QUESTION*
1. Supposing that i have the following two jar files required according
geotools: *jsde_sdk.jar* and *jpe_sdk.jar*.* How can i configure this SDE
driver? *

2.After that, would be possible using gdal lib to read shape and convert
shape to wkt, so i can save this information on my postgis getting the
correct geometry?

Thanks in advance.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ARCSDE-tp5231174.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pascoal.egeo at gmail.com  Mon Oct 19 08:41:01 2015
From: pascoal.egeo at gmail.com (MrMartin)
Date: Mon, 19 Oct 2015 08:41:01 -0700 (PDT)
Subject: [gdal-dev] Migrate ARCSDE to Postgis using OGR
Message-ID: <1445269261290-5231179.post@n6.nabble.com>

Hi  gdal-dev,

*INTRODUCTION*
i'm pretty newbie in gdal. This question follows another issue  which as to
do with " How to migrate data from ArcSDE to PostGIS?
<http://gis.stackexchange.com/questions/12989/how-to-migrate-data-from-arcsde-to-postgis> 
" And besides of my doubt about how to configure OGR SDE driver, i would
like to know your opinion about the process of migrate a ARCSDE database to
Postgis.

*
CONTEXT:*
So, in first place i have a Oracle 10g database with ArcSDE but
unfortunately i don't have access to SHAPELIB and other packages from ArcSDE
which would allow me to convert ESRI geom into string or another format that
PostGIS could understand as geometry type.

*SELECT* sde.ST_AsText(shape) as wkt *FROM* EXAMPLE_POLYGON_TABLE
So, this wouldn't be possible 


*QUESTION*
1. Supposing that i have the following two jar files required according
geotools: *jsde_sdk.jar* and *jpe_sdk.jar*.* How can i configure this SDE
driver? *

2.After that, would be possible using gdal lib to read shape and convert
shape to wkt, so i can save this information on my postgis getting the
correct geometry?

Thanks advance,

PS: sorry, for the duplicate question..



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Migrate-ARCSDE-to-Postgis-using-OGR-tp5231179.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Al.Niessner at gmx.net  Mon Oct 19 11:41:12 2015
From: Al.Niessner at gmx.net (Al Niessner)
Date: Mon, 19 Oct 2015 11:41:12 -0700
Subject: [gdal-dev] CS transformations
Message-ID: <1445280072.3726.19.camel@charon>


I am a newbie at osgeo and gdal and have done the obligatory googling
and reading of tutorials and documentation. I have made it pretty far
before I found my way here so thanks to everyone for all of the good
documentation and references online already.

language: Python 3.4
OS: Ubuntu 14.04 (up to date)

Task:
Read in various georef PDF files, make a bounding box of the valid data
in the pixel or image coordinate system (CS) and WGS84. The data
somewhat mimics the USGS in that there is a metadata item called
NEATLINE that describes the valid data polygon. So, I thought I would
use a USGS historical quad to build up my software decoding of the maps.
I made it this far...

# read the PDF
ds = gdal.Open('Madulce_Peak_O34119F5_geo.pdf')

# get the affine to transform to pixel CS
at = ds.GetGeoTransform()

# get the dataset projection and wrap it with spatial reference
source = osgeo.osr.SpatialReference()
source.SetProjection (ds.GetProjection())

# build the spatial reference for WGS84
target = osgeo.osr.SpatialReference()
target.SetWellKnownGeogCS('WGS84')

# make the transform to go between the CS
transform = osgeo.osr.CoordinateTransformation(source, target)

# take the first point of the map's NEATLINE and transform
p = osgeo.ogr.CreateGeometryFromWkt ('POINT (34277.755142044210515
-376750.367268434783909')
p.Transform (transform)
TypeError                                 Traceback (most recent call
last)
<ipython-input-75-05269f067010> in <module>()
---> 13     p.Transform (transform)
     14     print (p)
     15     # convert to pixel

/usr/lib/python3/dist-packages/osgeo/ogr.py in Transform(self, *args)
   4619         OGRERR_NONE on success or an error code.
   4620         """
-> 4621         return _ogr.Geometry_Transform(self, *args)
   4622 
   4623     def GetSpatialReference(self, *args):

TypeError: in method 'Geometry_Transform', argument 2 of type
'OSRCoordinateTransformationShadow *'

I cannot find anything to help me out at this point -- I am probably not
searching for the right keywords more than anything. Did I mess up the
transform? Did I mess up defining the source projection? I figure these
are the two most likely problems that I have, but I am all ears for any
other problems.

I am worried that all of the suggestions will be to use warp or
transform at the command line, but for complicated reasons using those
tools is undesirable. It is more important that I learn how to do such a
seemingly obvious task in the Python environment.

Thanks in advance for any and all help.

Here are my source and target spatial references:

PROJCS["unnamed",

PROJECTION["PROJCS["unnamed",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4269"]],PROJECTION["Albers_Conic_Equal_Area"],PARAMETER["standard_parallel_1",34],PARAMETER["standard_parallel_2",40.5],PARAMETER["latitude_of_center",0],PARAMETER["longitude_of_center",-120],PARAMETER["false_easting",0],PARAMETER["false_northing",-4000000],UNIT["Meter",1]]"]]

GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]

-- 
Al Niessner

I have never found the companion that was so companionable as solitude.
- From Walden by Henry David Thoreau

The universe is indifferent, and life is brutal; however, it is man's
choice of behavior that makes them malevolent rather than benevolent.

Some will fall in love with life and drink it from a fountain
That is pouring like an avalanche coming down the mountain.
- From the song Pepper by the Butthole Surfers



From even.rouault at spatialys.com  Mon Oct 19 11:54:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Oct 2015 20:54:04 +0200
Subject: [gdal-dev] CS transformations
In-Reply-To: <1445280072.3726.19.camel@charon>
References: <1445280072.3726.19.camel@charon>
Message-ID: <201510192054.04936.even.rouault@spatialys.com>

Al,

> 
> # get the dataset projection and wrap it with spatial reference
> source = osgeo.osr.SpatialReference()
> source.SetProjection (ds.GetProjection())

--> This is not the right method to call. SetProjection(string) is for 
projection names like 'Transverse_Mercator', etc... but not full WKT 
definitions

You want to use instead source.ImportFromWkt(ds.GetProjection())

> 
> # build the spatial reference for WGS84
> target = osgeo.osr.SpatialReference()
> target.SetWellKnownGeogCS('WGS84')
> 
> # make the transform to go between the CS
> transform = osgeo.osr.CoordinateTransformation(source, target)

--> You should have received an error message at that point saying there's no 
translation for '.. a wrong WKT string ...' to PROJ.4

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Al.Niessner at gmx.net  Mon Oct 19 14:02:52 2015
From: Al.Niessner at gmx.net (Al Niessner)
Date: Mon, 19 Oct 2015 14:02:52 -0700
Subject: [gdal-dev] CS transformations
In-Reply-To: <201510192054.04936.even.rouault@spatialys.com>
References: <1445280072.3726.19.camel@charon>
 <201510192054.04936.even.rouault@spatialys.com>
Message-ID: <1445288572.3057.0.camel@charon>


Thanks. Works perfect.

On Mon, 2015-10-19 at 20:54 +0200, Even Rouault wrote:
> Al,
> 
> > 
> > # get the dataset projection and wrap it with spatial reference
> > source = osgeo.osr.SpatialReference()
> > source.SetProjection (ds.GetProjection())
> 
> --> This is not the right method to call. SetProjection(string) is for 
> projection names like 'Transverse_Mercator', etc... but not full WKT 
> definitions
> 
> You want to use instead source.ImportFromWkt(ds.GetProjection())
> 
> > 
> > # build the spatial reference for WGS84
> > target = osgeo.osr.SpatialReference()
> > target.SetWellKnownGeogCS('WGS84')
> > 
> > # make the transform to go between the CS
> > transform = osgeo.osr.CoordinateTransformation(source, target)
> 
> --> You should have received an error message at that point saying there's no 
> translation for '.. a wrong WKT string ...' to PROJ.4
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com

-- 
Al Niessner

I have never found the companion that was so companionable as solitude.
- From Walden by Henry David Thoreau

The universe is indifferent, and life is brutal; however, it is man's
choice of behavior that makes them malevolent rather than benevolent.

Some will fall in love with life and drink it from a fountain
That is pouring like an avalanche coming down the mountain.
- From the song Pepper by the Butthole Surfers



From howard at hobu.co  Mon Oct 19 17:25:57 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 19 Oct 2015 19:25:57 -0500
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
	round-tripping in OGR
In-Reply-To: <56211BB4.9010106@mapgears.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>
 <CACmBxysMPbZ6HBUCVHu9inV_TYrDc4HO54oJjhGZ370hk+Btig@mail.gmail.com>
 <56211BB4.9010106@mapgears.com>
Message-ID: <B665B68B-83D0-4EA7-B37A-BF6A3384EDFC@hobu.co>

I agree about the need for the feature, and I think it is a useful addition, but I'll admit to being a bit concerned about the "native" nomenclature.  It allows us to incrementally add capability for stuff like GeoJSON extensions without having to disrupt the entire API to support it. 

Because every OGR Feature implementation potentially has a native representation, this API addition brings up some questions:

1) Would it be an ideal that every OGR feature carry around a blob of its native representation to answer this API? 
2) "Native" sounds faster or better in some unspecified qualitative way, and this name might cause people to go peeking into rabbit holes of the API that they might best stay out of.  
3) Is there to be an ODCNative capability test for drivers?

Howard
 
> On Oct 16, 2015, at 10:45 AM, Daniel Morissette <dmorissette at mapgears.com> wrote:
> 
> Just a quick note to say that I reviewed the RFC and like the idea.
> 
> I can see this being used someday by the MapInfo TAB/MIF drivers to carry the native MapInfo styling info, as well as geometry in some cases (rectangle, roundedrect, text object, etc.) to maintain them between TAB and MIF files as this conversion can be lossy at the moment.
> 
> I also saw a suggestion that it should be possible to disable loading the native data when we open a layer and I think that's important if we intend to use this for more than just GeoJSON. For instance, when loading layers in an application (QGIS, MapServer, etc.) that ignores the native data, then it should be possible to have this overhead disabled.
> 
> We definitely need a generic option for enabling/disabling this and not a driver-specific option. Perhaps the native data should be disabled by default for all drivers, and be explicitly turned on by ogr2ogr and by apps that know how to use the native info?
> 
> No other comments on my part.
> 
> Daniel
> 
> 
> On 2015-10-14 1:07 PM, Kurt Schwehr wrote:
>> Just gave RFC 60 a quick look.  In general, I think we absolutely need
>> this.  Some thoughts:
>> 
>> - There are users who need the old behavior.  We need an easy way to get
>> that.  I think the default should be the more functional RFC 60 way.  I
>> see the -noNativeData flag, so I think this is well covered.
>> - What is the likely performance impact +/-?
>> - It would be nice to base a could use cases described in the RFC so we
>> are not totally counting on the links.  They don't have to be super
>> detailed.
>> - Do we need to add anything to the JSON to flag which conversion method
>> was used?
>> 
>> -kurt
>> 
>> On Fri, Sep 25, 2015 at 1:23 PM, Sean Gillies <sean at mapbox.com
>> <mailto:sean at mapbox.com>> wrote:
>> 
>>    Dear all,
>> 
>>    This feature is a boost for GeoJSON users who are extending the
>>    format and users of those extensions. JSON is a naturally extensible
>>    format but the GeoJSON OGR driver stifles development of extensions
>>    by passing only the fully standardized GeoJSON items.
>> 
>>    Let's say I want to use ogr2ogr to spatially filter some GeoJSON
>>    coming from the OSM Overpass API [1] or the Mapbox Geocoding API
>>    [2]. Here's what the response of the latter looks like, abbreviated:
>> 
>>    $ curl
>>    https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
>>    | python -mjson.tool
>>    {
>>         "attribution": "NOTICE: \u00a9 2015 Mapbox and its suppliers.
>>    All rights reserved. Use of this data is subject to the Mapbox Terms
>>    of Service (https://www.mapbox.com/about/maps/). This response and
>>    the information it contains may not be retained.",
>>         "features": [
>>             {
>>                 "address": "1600",
>>                 "bbox": [
>>                     -77.05781199999998,
>>                     38.89252299999999,
>>                     -77.01844799999999,
>>                     38.905058999999994
>>                 ],
>>                 "center": [
>>                     -77.034389,
>>                     38.897693
>>                 ],
>>                 "context": [
>>                     {
>>                         "id": "place.57972",
>>                         "text": "Washington"
>>                     },
>>                     {
>>                         "id": "postcode.858369517",
>>                         "text": "20004"
>>                     },
>>                     {
>>                         "id": "region.1190806886",
>>                         "text": "District of Columbia"
>>                     },
>>                     {
>>                         "id": "country.4150104525",
>>                         "text": "United States"
>>                     }
>>                 ],
>>                 "geometry": {
>>                     "coordinates": [
>>                         -77.034389,
>>                         38.897693
>>                     ],
>>                     "type": "Point"
>>                 },
>>                 "id": "address.39053333360279",
>>                 "place_name": "1600 Pennsylvania Ave NW, Washington,
>>    20004, District of Columbia, United States",
>>                 "properties": {},
>>                 "relevance": 0.99,
>>                 "text": "Pennsylvania Ave NW",
>>                 "type": "Feature"
>>             },
>>             ...
>>         ],
>>         "query": [
>>             "1600",
>>             "pennsylvania",
>>             "ave",
>>             "nw"
>>         ],
>>         "type": "FeatureCollection"
>>    }
>> 
>>    The Features and FeatureCollection have extension items expressing
>>    rights, the original query, and more.
>> 
>>    When I pipe this through ogr2ogr to spatially filter, here are the
>>    results:
>> 
>>    $ curl
>>    https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
>>    | ogr2ogr -clipsrc -100 30 -70 60 -f GeoJSON /vsistdout/ /vsistdin/
>>    {
>>    "type": "FeatureCollection",
>>    "crs": { "type": "name", "properties": { "name":
>>    "urn:ogc:def:crs:OGC:1.3:CRS84" } },
>>    "features": [
>>    { "type": "Feature", "properties": { }, "geometry": { "type":
>>    "Point", "coordinates": [ -77.034389, 38.897693 ] } },
>>    { "type": "Feature", "properties": { }, "geometry": { "type":
>>    "Point", "coordinates": [ -76.634388, 39.30307 ] } },
>>    { "type": "Feature", "properties": { }, "geometry": { "type":
>>    "Point", "coordinates": [ -80.272062, 40.687045 ] } },
>>    { "type": "Feature", "properties": { }, "geometry": { "type":
>>    "Point", "coordinates": [ -95.54508, 34.841595 ] } }
>>    ]
>>    }
>> 
>>    The extensions are lost. This means that ogr2ogr can't be used in
>>    pipelines that process extended GeoJSON.
>> 
>>    If you want your GeoJSON to pass through OGR in high fidelity, you
>>    have to put everything in the Feature.properties object no matter
>>    whether that's the best place for it or not. In practice, the
>>    Feature.properties object becomes a grey goo of feature attributes,
>>    styling properties, and you name it.
>> 
>>    The implementation of RFC 60 would pass through GeoJSON extensions
>>    in full hi-fi. OGR will no longer be an impediment to extension
>>    developers.
>> 
>>    [1] http://wiki.openstreetmap.org/wiki/Overpass_turbo/GeoJSON
>>    [2] https://github.com/mapbox/carmen/blob/master/carmen-geojson.md
>> 
>>    Yours,
>> 
>> 
>>    On Wed, Sep 23, 2015 at 9:29 AM, Even Rouault
>>    <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>> 
>>        Hi,
>> 
>>        This is a call for discussion on "RFC 60: Improved
>>        round-tripping in OGR".
>> 
>>        https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr
>> 
>>        This RFC defines how to improve better round-tripping in
>>        conversion of vector
>>        formats, in particular for GeoJSON extensions.
>> 
>>        Best regards,
>> 
>>        Even
>> 
>>        --
>>        Spatialys - Geospatial professional services
>>        http://www.spatialys.com
>>        _______________________________________________
>>        gdal-dev mailing list
>>        gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> 
>> 
>>    --
>>    Sean Gillies
>> 
>>    _______________________________________________
>>    gdal-dev mailing list
>>    gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
>> 
>> 
>> --
>> --
>> http://schwehr.org
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> 
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> T: +1 418-696-5056 #201
> 
> http://evouala.com/ - Location Intelligence Made Easy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Tue Oct 20 01:59:43 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Oct 2015 10:59:43 +0200
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
	round-tripping in OGR
In-Reply-To: <B665B68B-83D0-4EA7-B37A-BF6A3384EDFC@hobu.co>
References: <201509231729.50153.even.rouault@spatialys.com>
 <56211BB4.9010106@mapgears.com>
 <B665B68B-83D0-4EA7-B37A-BF6A3384EDFC@hobu.co>
Message-ID: <201510201059.43510.even.rouault@spatialys.com>

Hi Howard,

> I agree about the need for the feature, and I think it is a useful
> addition, but I'll admit to being a bit concerned about the "native"
> nomenclature.  It allows us to incrementally add capability for stuff like
> GeoJSON extensions without having to disrupt the entire API to support it.
> 
> Because every OGR Feature implementation potentially has a native
> representation, this API addition brings up some questions:
> 
> 1) Would it be an ideal that every OGR feature carry around a blob of its
> native representation to answer this API?

Not all formats have necessary a more expressive "native" representation than 
the one given by their OGRFeature. And this only makes sense when doing 
conversions between the same format.

> 2) "Native" sounds faster or
> better in some unspecified qualitative way, and this name might cause
> people to go peeking into rabbit holes of the API that they might best
> stay out of. 

I'm very well open to suggestions for a better naming... from English native 
speakers ;-) Sean initially proposed the note/annotation terminology.
Your concerns can also perhaps be addressed by adding to the documentation of 
the related methods that this isn't intended for general use and only to gain 
access to details that cannot be expressed otherwise through the rest of the 
API ?

> 3) Is there to be an ODCNative capability test for drivers?

As Daniel suggested, maybe we need to be able to enable on purpose that 
capability as an open option. So the open option list could have a 
NATIVE_REPRESENTATION=YES/NO toggle (default NO). And perhaps have also a 
GDAL_DCAP_NATIVE_VECTOR metadata item at the driver level.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre.vautour at caris.com  Tue Oct 20 12:20:58 2015
From: andre.vautour at caris.com (Andre Vautour)
Date: Tue, 20 Oct 2015 16:20:58 -0300
Subject: [gdal-dev] OGR error handling
Message-ID: <5626941A.8030104@caris.com>

Hi all,

We are using OGRSFDriver::CopyDataSource() to copy a GML data source to a memory data source on v1.11.x.

We have encountered a problem where one of the feature tags of a particular GML file we are trying to read is malformed. What we are seeing is that an error occurs in OGRGMLLayer::GetNextFeature(), which gets reported as expected via CPLError().

The problem we are faced with is that that error seems to be reset using CPLErrorReset() before control returns to the caller of CopyDataSource(), specifically in OGRDataSource::CopyLayer(). The result is that the copying silently skips over problematic features.


Is that the expected behavior of copying a data source? Given that GDAL isn't necessarily exception safe, we've typically used CPLGetLastErrorNo after control returns to get at such errors that occur in functions that do not return an error directly in the method signature. Is there a better approach to error handling that we could/should be using?

Thanks,
Andr


From even.rouault at spatialys.com  Tue Oct 20 12:58:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Oct 2015 21:58:37 +0200
Subject: [gdal-dev] OGR error handling
In-Reply-To: <5626941A.8030104@caris.com>
References: <5626941A.8030104@caris.com>
Message-ID: <201510202158.37066.even.rouault@spatialys.com>

Andr,

> Hi all,
> 
> We are using OGRSFDriver::CopyDataSource() to copy a GML data source to a
> memory data source on v1.11.x.
> 
> We have encountered a problem where one of the feature tags of a particular
> GML file we are trying to read is malformed. What we are seeing is that an
> error occurs in OGRGMLLayer::GetNextFeature(), which gets reported as
> expected via CPLError().
> 
> The problem we are faced with is that that error seems to be reset using
> CPLErrorReset() before control returns to the caller of CopyDataSource(),
> specifically in OGRDataSource::CopyLayer(). The result is that the copying
> silently skips over problematic features.

I'm not clear of the reason for those CPLErrorReset() in CopyLayer(). I guess 
you could remove them without trouble.

If you don't want to modify GDAL sources, a workaround would be to install 
your own error handler with CPLSetErrorHandler() or CPLPushErrorHandler() so 
as to note the error.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Wed Oct 21 00:13:27 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 21 Oct 2015 10:13:27 +0300
Subject: [gdal-dev] OGR error handling
In-Reply-To: <5626941A.8030104@caris.com>
References: <5626941A.8030104@caris.com>
Message-ID: <56273B17.8080505@gmail.com>



On 20.10.2015 22:20, Andre Vautour wrote:
> Hi all,
>
> We are using OGRSFDriver::CopyDataSource() to copy a GML data source 
> to a memory data source on v1.11.x.
>
> We have encountered a problem where one of the feature tags of a 
> particular GML file we are trying to read is malformed. What we are 
> seeing is that an error occurs in OGRGMLLayer::GetNextFeature(), which 
> gets reported as expected via CPLError().
>
> The problem we are faced with is that that error seems to be reset 
> using CPLErrorReset() before control returns to the caller of 
> CopyDataSource(), specifically in OGRDataSource::CopyLayer(). The 
> result is that the copying silently skips over problematic features.
>
>
> Is that the expected behavior of copying a data source? Given that 
> GDAL isn't necessarily exception safe, we've typically used 
> CPLGetLastErrorNo after control returns to get at such errors that 
> occur in functions that do not return an error directly in the method 
> signature. Is there a better approach to error handling that we 
> could/should be using?

If CPLError gets called then the issue is reported and it is not 
silently skipped. I believe the driver writer has judged the issue not 
an error but only worth of a warning, thus the GetNextFeature does not 
return a NULL, which would lead to immediate return without error reset.

As Even wrote I guess you should make your code to keep an eye on 
warnings and not accept the copy if there are any you deem too serious.

Ari

>
> Thanks,
> Andr
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From randre at gmail.com  Wed Oct 21 12:03:11 2015
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Wed, 21 Oct 2015 12:03:11 -0700
Subject: [gdal-dev] Weird OpenFileGDB error
Message-ID: <CAOL+ROGosYFsXPYj9=v2ym4uGOdGXGTEv2uhv4JHBbwP3bHKKg@mail.gmail.com>

Hi All,

I've been trying unsuccessfully to extract a feature class from a large
file geodatabase.  While many of the other feature classes in it are read
properly, on this one I get the following error:

$ ogrinfo -summary file.gdb Streets
Had to open data source read-only.
INFO: Open of `file.gdb'
      using driver `OpenFileGDB' successful.

Layer name: Streets
Geometry: Multi Line String
ERROR 1: Error occured in filegdbtable.cpp at line 768

Line 768 is part of this block of code:

     if( byFieldType > FGFT_XML)
        {
            CPLDebug("OpenFileGDB", "Unhandled field type : %d",
byFieldType);
            returnError();   <---- line 768
        }

Can any of you provide me some suggestions for how I can trace the specific
cause of this problem more precisely?  Unfortunately, this is commercial
data which I can't share with you, but I'd be happy to try to diagnose the
problem more thoroughly.

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151021/2fb232af/attachment.html>

From sean at mapbox.com  Wed Oct 21 13:25:39 2015
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 21 Oct 2015 14:25:39 -0600
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <201510201059.43510.even.rouault@spatialys.com>
References: <201509231729.50153.even.rouault@spatialys.com>
 <56211BB4.9010106@mapgears.com>
 <B665B68B-83D0-4EA7-B37A-BF6A3384EDFC@hobu.co>
 <201510201059.43510.even.rouault@spatialys.com>
Message-ID: <CADPhZXztSWWOF4O7cv_1bm7dvpiygNQTn4QzjZmtV_SNJG3QgA@mail.gmail.com>

Howard, Even,

On Tue, Oct 20, 2015 at 2:59 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Howard,
>
> > I agree about the need for the feature, and I think it is a useful
> > addition, but I'll admit to being a bit concerned about the "native"
> > nomenclature.  It allows us to incrementally add capability for stuff
> like
> > GeoJSON extensions without having to disrupt the entire API to support
> it.
> >
> > Because every OGR Feature implementation potentially has a native
> > representation, this API addition brings up some questions:
> >
> > 1) Would it be an ideal that every OGR feature carry around a blob of its
> > native representation to answer this API?
>
> Not all formats have necessary a more expressive "native" representation
> than
> the one given by their OGRFeature. And this only makes sense when doing
> conversions between the same format.
>
> > 2) "Native" sounds faster or
> > better in some unspecified qualitative way, and this name might cause
> > people to go peeking into rabbit holes of the API that they might best
> > stay out of.
>
> I'm very well open to suggestions for a better naming... from English
> native
> speakers ;-) Sean initially proposed the note/annotation terminology.
> Your concerns can also perhaps be addressed by adding to the documentation
> of
> the related methods that this isn't intended for general use and only to
> gain
> access to details that cannot be expressed otherwise through the rest of
> the
> API ?
>

I like the format-native data concept, but agree that there's some
potential for confusion. For GeoJSON, the native data could also be
accurately called "extension data". How about that?

...

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151021/5948e645/attachment.html>

From lauri.kajan at gmail.com  Thu Oct 22 00:36:09 2015
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Thu, 22 Oct 2015 10:36:09 +0300
Subject: [gdal-dev] encoding in custom python functions
Message-ID: <CAKWoFMLd-OcuEnooZj7S0_kT1ty87Fpso2RJ=Xxwp3pOn=X6dw@mail.gmail.com>

Hi all,

I'm trying to figure out some encoding problems when using custom python
expression functions.

I'm using python functions for defining some label texts. I need use some
special characters like  and .

When a new file is created in function editor the file is encoded in my
system encoding cp1252. At least the  is coded to 0xe4 if I check that
with hex-editor.
Let the custom function just be
@qgsfunction(args='auto', group='Custom')
def encodingtest(feature, parent):
return ''

This displays on a map like ''
It seems that the file is converted to utf-8 before execution and the  is
then coded to 0xc3 0xa4. Now QGIS still tries to interpret this as cp1252
and then displays this as ''.

It doesn't help to define the  as unicode like u'' because QGIS still
sees the  as 0xc3 0xa4 and think that it is in cp1252.

The only way to resolve this in the code at least that I have found is to
use
return ''.decode('utf-8')
This works on QGIS but the file can't be executed elsewhere (IDE) since the
file is truly in cp1252 and 0xe4 can't be decoded using utf-8.


Does anyone else confirm this and have I understood right the problem?
Should I file a bug report?


Thanks,

-Lauri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151022/340006c3/attachment.html>

From lauri.kajan at gmail.com  Thu Oct 22 00:41:05 2015
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Thu, 22 Oct 2015 10:41:05 +0300
Subject: [gdal-dev] encoding in custom python functions
In-Reply-To: <CAKWoFMLd-OcuEnooZj7S0_kT1ty87Fpso2RJ=Xxwp3pOn=X6dw@mail.gmail.com>
References: <CAKWoFMLd-OcuEnooZj7S0_kT1ty87Fpso2RJ=Xxwp3pOn=X6dw@mail.gmail.com>
Message-ID: <CAKWoFM+3hJqpn8q=tULhtpeWrpg6MtZQQjSyniQ5Rj_TfhTQAQ@mail.gmail.com>

Sorry wrong list!
Could this be deleted in any way?

-Lauri

On Thu, Oct 22, 2015 at 10:36 AM, Lauri Kajan <lauri.kajan at gmail.com> wrote:

> Hi all,
>
> I'm trying to figure out some encoding problems when using custom python
> expression functions.
>
> I'm using python functions for defining some label texts. I need use some
> special characters like  and .
>
> When a new file is created in function editor the file is encoded in my
> system encoding cp1252. At least the  is coded to 0xe4 if I check that
> with hex-editor.
> Let the custom function just be
> @qgsfunction(args='auto', group='Custom')
> def encodingtest(feature, parent):
> return ''
>
> This displays on a map like ''
> It seems that the file is converted to utf-8 before execution and the  is
> then coded to 0xc3 0xa4. Now QGIS still tries to interpret this as cp1252
> and then displays this as ''.
>
> It doesn't help to define the  as unicode like u'' because QGIS still
> sees the  as 0xc3 0xa4 and think that it is in cp1252.
>
> The only way to resolve this in the code at least that I have found is to
> use
> return ''.decode('utf-8')
> This works on QGIS but the file can't be executed elsewhere (IDE) since
> the file is truly in cp1252 and 0xe4 can't be decoded using utf-8.
>
>
> Does anyone else confirm this and have I understood right the problem?
> Should I file a bug report?
>
>
> Thanks,
>
> -Lauri
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151022/4782a0e5/attachment.html>

From sbasos at yahoo.com  Thu Oct 22 01:14:33 2015
From: sbasos at yahoo.com (Basos Syrris)
Date: Thu, 22 Oct 2015 08:14:33 +0000 (UTC)
Subject: [gdal-dev] Configuring JP2OpenJPEG attributes
References: <1080621905.1573597.1445501673977.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <1080621905.1573597.1445501673977.JavaMail.yahoo@mail.yahoo.com>

Dear list members,I would like you to help me with two issues I have while trying to set/get the attributes of the JP2OpenJPEG driver through the GDAL API in Python:
1) When I run the commands:Raster = gdal.Open(tiffile)jpg_driver = gdal.GetDriverByName('JP2OpenJPEG')
jpg_driver.Register()jpg_file = jpg_driver.CreateCopy(outjp2file, Raster, options = ['QUALITY=100', 'REVERSIBLE=YES'])
the attributes are set without problem (tiffilerefers to a Geotiff image and outjp2file is the name of the new jp2 file); when I try to retrieve them the only thing I manage to do is to read the main keys:Raster = gdal.Open(outjp2file)
driver = Raster.GetDriver()
metadata = driver.GetMetadata()metadata{'DMD_EXTENSION': 'jp2', 'DMD_CREATIONOPTIONLIST': "<CreationOptionList>  <Option name='CODEC' type='string-select' default='according to file extension. If unknown, default to J2K'>    <Value>JP2</Value>    <Value>J2K</Value>  </Option>  <Option name='GeoJP2' type='boolean' description='Whether to emit a GeoJP2 box' default='YES'/>  <Option name='GMLJP2' type='boolean' description='Whether to emit a GMLJP2 v1 box' default='YES'/>  <Option name='GMLJP2V2_DEF' type='string' description='Definition file to describe how a GMLJP2 v2 box should be generated. If set to YES, a minimal instance will be created'/>  <Option name='QUALITY' type='string' description='Single quality value or comma separated list of increasing quality values for several layers, each in the 0-100 range' default='25'/>  <Option name='REVERSIBLE' type='boolean' description='True if the compression is reversible' default='false'/>  <Option name='RESOLUTIONS' type='int' description='Number of resolutions.' min='1' max='30'/>  <Option name='BLOCKXSIZE' type='int' description='Tile Width' default='1024'/>  <Option name='BLOCKYSIZE' type='int' description='Tile Height' default='1024'/>  <Option name='PROGRESSION' type='string-select' default='LRCP'>    <Value>LRCP</Value>    <Value>RLCP</Value>    <Value>RPCL</Value>    <Value>PCRL</Value>    <Value>CPRL</Value>  </Option>  <Option name='SOP' type='boolean' description='True to insert SOP markers' default='false'/>  <Option name='EPH' type='boolean' description='True to insert EPH markers' default='false'/>  <Option name='YCBCR420' type='boolean' description='if RGB must be resampled to YCbCr 4:2:0' default='false'/>  <Option name='YCC' type='boolean' description='if RGB must be transformed to YCC color space (lossless MCT transform)' default='YES'/>  <Option name='NBITS' type='int' description='Bits (precision) for sub-byte files (1-7), sub-uint16 (9-15), sub-uint32 (17-31)'/>  <Option name='1BIT_ALPHA' type='boolean' description='Whether to encode the alpha channel as a 1-bit channel' default='NO'/>  <Option name='ALPHA' type='boolean' description='Whether to force encoding last channel as alpha channel' default='NO'/>  <Option name='PROFILE' type='string-select' description='Which codestream profile to use' default='AUTO'>    <Value>AUTO</Value>    <Value>UNRESTRICTED</Value>    <Value>PROFILE_1</Value>  </Option>  <Option name='INSPIRE_TG' type='boolean' description='Whether to use features that comply with Inspire Orthoimagery Technical Guidelines' default='NO'/>  <Option name='JPX' type='boolean' description='Whether to advertize JPX features when a GMLJP2 box is written' default='YES'/>  <Option name='GEOBOXES_AFTER_JP2C' type='boolean' description='Whether to place GeoJP2/GMLJP2 boxes after the code-stream' default='NO'/>  <Option name='PRECINCTS' type='string' description='Precincts size as a string of the form {w,h},{w,h},... with power-of-two values'/>  <Option name='TILEPARTS' type='string-select' description='Whether to generate tile-parts and according to which criterion' default='DISABLED'>    <Value>DISABLED</Value>    <Value>RESOLUTIONS</Value>    <Value>LAYERS</Value>    <Value>COMPONENTS</Value>  </Option>  <Option name='CODEBLOCK_WIDTH' type='int' description='Codeblock width' default='64' min='4' max='1024'/>  <Option name='CODEBLOCK_HEIGHT' type='int' description='Codeblock height' default='64' min='4' max='1024'/>  <Option name='CT_COMPONENTS' type='int' min='3' max='4' description='If there is one color table, number of color table components to write. Autodetected if not specified.'/>  <Option name='WRITE_METADATA' type='boolean' description='Whether metadata should be written, in a dedicated JP2 XML box' default='NO'/>  <Option name='MAIN_MD_DOMAIN_ONLY' type='boolean' description='(Only if WRITE_METADATA=YES) Whether only metadata from the main domain should be written' default='NO'/>  <Option name='USE_SRC_CODESTREAM' type='boolean' description='When source dataset is JPEG2000, whether to reuse the codestream of the source dataset unmodified' default='NO'/></CreationOptionList>", 'DMD_HELPTOPIC': 'frmt_jp2openjpeg.html', 'DCAP_VECTOR': 'YES', 'DMD_OPENOPTIONLIST': "<OpenOptionList>  <Option name='1BIT_ALPHA_PROMOTION' type='boolean' description='Whether a 1-bit alpha channel should be promoted to 8-bit' default='YES'/>  <Option name='OPEN_REMOTE_GML' type='boolean' description='Whether to load remote vector layers referenced by a link in a GMLJP2 v2 box' default='NO'/></OpenOptionList>", 'DCAP_OPEN': 'YES', 'DCAP_RASTER': 'YES', 'DCAP_VIRTUALIO': 'YES', 'DMD_MIMETYPE': 'image/jp2', 'DMD_CREATIONDATATYPES': 'Byte Int16 UInt16 Int32 UInt32', 'DMD_EXTENSIONS': 'jp2 j2k', 'DCAP_CREATECOPY': 'YES', 'DMD_LONGNAME': 'JPEG-2000 driver based on OpenJPEG library'}

print driver.GetMetadataItem('QUALITY')None
print driver.GetMetadataItem('QUALITY', 'IMAGE_STRUCTURE')None
print driver.GetMetadataItem('DMD_CREATIONOPTIONLIST')<CreationOptionList>  <Option name='CODEC' type='string-select' default='according to file extension. If unknown, default to J2K'> ......

How can I retrieve the attributes 'QUALITY' and 'REVERSIBLE'?

2) If instead of using the command:jpg_file = jpg_driver.CreateCopy(outjp2file, Raster, options = ['QUALITY=100', 'REVERSIBLE=YES'])

I use the following:jpg_driver.SetMetadataItem('QUALITY','100','IMAGE_STRUCTURE')jpg_driver.SetMetadataItem('REVERSIBLE','YES','IMAGE_STRUCTURE')jpg_driver.Register()jpg_file = jpg_driver.CreateCopy(outjp2file, Raster)

why these two attributes are set as primary keys and not in the options list?
Thank you in advance.Basos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151022/773cf842/attachment-0001.html>

From even.rouault at spatialys.com  Thu Oct 22 01:24:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Oct 2015 10:24:24 +0200
Subject: [gdal-dev] Configuring JP2OpenJPEG attributes
In-Reply-To: <1080621905.1573597.1445501673977.JavaMail.yahoo@mail.yahoo.com>
References: <1080621905.1573597.1445501673977.JavaMail.yahoo@mail.yahoo.com>
 <1080621905.1573597.1445501673977.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <201510221024.24250.even.rouault@spatialys.com>

Basos,

> 1) When I run the commands:Raster =
> gdal.Open(tiffile)jpg_driver = gdal.GetDriverByName('JP2OpenJPEG')
> jpg_driver.Register()jpg_file = jpg_driver.CreateCopy(outjp2file, Raster,
> options = ['QUALITY=100', 'REVERSIBLE=YES']) the attributes are set
> without problem (tiffile refers to a Geotiff image and outjp2file is the
> name of the new jp2 file); when I try to retrieve them the only thing I
> manage to do is to read the main keys:Raster = gdal.Open(outjp2file)
> driver = Raster.GetDriver()
> metadata = driver.GetMetadata()

You get driver metadata here, that is to say the capabilities of the driver, 
not the charactersitics of a particular dataset.

> print driver.GetMetadataItem('QUALITY')None
> print driver.GetMetadataItem('QUALITY', 'IMAGE_STRUCTURE')None

If they were available as metadata (but they are not), that should be queried 
on the dataset, not the driver.

> 
> How can I retrieve the attributes 'QUALITY' and 'REVERSIBLE'?

You can't. At least not that easily. They aren't exposed as metadata when 
reading a dataset.
You can have a look at the dump_jp2 utility mentionned in 
https://trac.osgeo.org/gdal/wiki/UserDocs/JPEG2000Utils to get the 
reversive/reversible parameter, but I don't think it is possibly to recover 
quality (might be, but I'm not knowleadgable enough)

> 
> 2) If instead of using the command:jpg_file =
> jpg_driver.CreateCopy(outjp2file, Raster, options = ['QUALITY=100',
> 'REVERSIBLE=YES'])
> 
> I use the
> following:jpg_driver.SetMetadataItem('QUALITY','100','IMAGE_STRUCTURE')jpg
> _driver.SetMetadataItem('REVERSIBLE','YES','IMAGE_STRUCTURE')

No, that will not have the effect you want. Setting metadata on drivers is 
without effect. Using creation options like you did initially is the right way 
to do it.

> jpg_driver.Reg
> ister()jpg_file = jpg_driver.CreateCopy(outjp2file, Raster)
> 
> why these two attributes are set as primary keys and not in the options
> list? Thank you in advance.Basos
>  

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pascoal.egeo at gmail.com  Thu Oct 22 01:51:49 2015
From: pascoal.egeo at gmail.com (MrMartin)
Date: Thu, 22 Oct 2015 01:51:49 -0700 (PDT)
Subject: [gdal-dev] Build OGR with ESRI SDE
In-Reply-To: <490087FD.7010703@pobox.com>
References: <1C6192D3F2755C45A2D0658D6FE5ED8303C237A7@exch2k1.dmmenet.mme.state.va.us>
 <490087FD.7010703@pobox.com>
Message-ID: <1445503909892-5231900.post@n6.nabble.com>

Hi,
i have this same issue but  "in order to deploy ArcSDE technology as an
enterprise geodatabase you must have, or be prepared to purchase, an ArcGIS
Server license"
<http://gis.stackexchange.com/questions/124256/where-to-download-arcsde>  ,
is this a must? 

Since that geotools has  " ArcSDE plugin allows the GeoTools developer to
work with the ArcSDE middle ware"
<http://gis.stackexchange.com/questions/124256/where-to-download-arcsde>   i
wounder if it is possible to use this plugin to build a OGR SDE Driver?

Any suggestion or opinion about this issue would be great.

Thanks in advance.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Build-OGR-with-ESRI-SDE-tp3757320p5231900.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From tim.crook at sympatico.ca  Thu Oct 22 05:29:09 2015
From: tim.crook at sympatico.ca (Tim Crook)
Date: Thu, 22 Oct 2015 08:29:09 -0400
Subject: [gdal-dev] Follow on to the "ISO Metadata" post
Message-ID: <FAAF6EDEF3754BA091ED8F4BDA4F7781@TimCrookLaptop>

Hello Doug and Damian.

I saw your post about ISO 19103, ISO 19115 and  ISO 19115-1. I am starting 
to look at ticket #3549 (https://trac.osgeo.org/gdal/ticket/3549). This 
ticket is a specific problem for metadata translation for image 
transformations to the PCIDSK format. The ticket references JPEG and TIFF.

The first thing I thought of was when I saw your posts was mapping the XML 
metadata from different sources into an internal format to GDAL, then 
passing through the information for mapping to the destination format. I 
suppose there are some image source formats that don't use XML to store 
their metadata, so this would require additional handling.

I suppose the internal format to GDAL could be XML in the ISO 19115-1 
format.

Am I completely off base here? 


From bradh at frogmouth.net  Thu Oct 22 14:16:34 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Fri, 23 Oct 2015 08:16:34 +1100
Subject: [gdal-dev] Build OGR with ESRI SDE
In-Reply-To: <1445503909892-5231900.post@n6.nabble.com>
References: <1C6192D3F2755C45A2D0658D6FE5ED8303C237A7@exch2k1.dmmenet.mme.state.va.us>
 <490087FD.7010703@pobox.com> <1445503909892-5231900.post@n6.nabble.com>
Message-ID: <2552441.hPCFIlL7Mk@saxicola>

On Thu, 22 Oct 2015 01:51:49 AM MrMartin wrote:
> Since that geotools has  " ArcSDE plugin allows the GeoTools developer to
> work with the ArcSDE middle ware"
> <http://gis.stackexchange.com/questions/124256/where-to-download-arcsde>   i
> wounder if it is possible to use this plugin to build a OGR SDE Driver?
Are you asking if using geotools could somehow avoid the need for arcsde 
client libraries? If so, no.

Reasons:
 - Geotools uses the arcsde SDK (just via Java)
 - Even if that wasn't the case, calling java (geotools) from C/C++ (gdal) 
would be fairly difficult and not very portable.

Why would you need ArcSDE support if you don't have an ESRI server license? If 
you have the server license, you should be able to download the client side 
libraries to match.

Brad



From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct 23 01:46:49 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 23 Oct 2015 08:46:49 +0000 (UTC)
Subject: [gdal-dev] Question about ES SQL dialect
Message-ID: <loom.20151023T103016-721@post.gmane.org>

Hi,

I am reading the ElasticSearch manual page
http://www.gdal.org/drv_elasticsearch.html and I wonder what does this mean
for an end user of ogrinfo and ogr2ogr

"If specifying "ES" as the dialect of ExecuteSQL(), a JSon string with a
serialized Elastic Search filter can be passed"

Are ogrinfo and ogr2ogr analyzing automatically without any user input what
is coming after "-where" or "-sql" and if it is json then it will be passed on?

Should ElasticSearch be included in the Non-OGR SQL section of
http://www.gdal.org/ogr_sql.html?

-Jukka Rahkonen-


From gane.prog at gmail.com  Fri Oct 23 02:04:37 2015
From: gane.prog at gmail.com (Gane R)
Date: Fri, 23 Oct 2015 14:34:37 +0530
Subject: [gdal-dev] GDAL_DATA
Message-ID: <CALMrLdBkgxUtOHyeS=F6+fH+rnN-8rq4T2GTqg592Qn+ckfR5w@mail.gmail.com>

I have two applications (postgres with postgis) one running with gdal
1.10.1 and other in gdal 2.0.1 but I see
gdal-data files are different in gdal 1.10.1 and gdal 2.0.1

So Will the GDAL_DATA point gdal 2.0.1 file or how to solve this ?


Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151023/f816ae08/attachment.html>

From hellik at web.de  Fri Oct 23 02:26:11 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 23 Oct 2015 02:26:11 -0700 (PDT)
Subject: [gdal-dev] ecw - file: wrong extent/corner coordinates
Message-ID: <1445592371167-5232129.post@n6.nabble.com>

hi,

tested with 

OSGeo4W: gdalinfo --version
GDAL 1.11.3, released 2015/09/16

I have several raster ecw files; gdalinfo shows for all the files the same
extent/corner coordinates, although the ecw files are some kind of mosaic
over a larger area. (Also QGIS and GRASS GIS show them in one place
(overlayed one to another)).

example:

the content of the world file: 6617-04.eww

0.2
0.0
0.0
-0.2
653750.1
169999.9

gdalinfo says:

Driver: ECW/ERDAS Compressed Wavelets (SDK 5.0)
Files: 6617-04.ecw
       6617-04.eww
       6617-04.ecw.aux.xml
Size is 6250, 5000
Coordinate System is:
PROJCS["MGI_BMNM34",
    GEOGCS["GCS_MGI",
        DATUM["Militar_Geographische_Institute",
            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",750000.0],
    PARAMETER["False_Northing",-5000000.0],
    PARAMETER["Central_Meridian",16.333333333333],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
Origin = (0.000000000000000,69.444444444444443)
Pixel Size = (0.013888888888889,-0.013888888888889)
Metadata:
  COLORSPACE=RGB
  COMPRESSION_RATE_TARGET=10
  VERSION=2
Corner Coordinates:
Upper Left  (   0.0000000,  69.4444444) (  6d51'43.49"E, 44d44'46.05"N)
Lower Left  (   0.0000000,   0.0000000) (  6d51'43.85"E, 44d44'43.83"N)
Upper Right (  86.8055556,  69.4444444) (  6d51'47.38"E, 44d44'46.37"N)
Lower Right (  86.8055556,   0.0000000) (  6d51'47.75"E, 44d44'44.15"N)
Center      (  43.4027778,  34.7222222) (  6d51'45.62"E, 44d44'45.10"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Description = Red
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Description = Green
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Description = Blue
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156

and the layer properties in Arcgis says:

<TreeList>
 <Raster_Information>
  <Columns_and_Rows>6250, 5000</Columns_and_Rows>
  <Number_of_Bands>3</Number_of_Bands>
  <Cell_Size__X._Y_>0,2, 0,2</Cell_Size__X._Y_>
  <Uncompressed_Size>89,41 MB</Uncompressed_Size>
  <Format>ECW</Format>
  <Source_Type>Generic</Source_Type>
  <Pixel_Type>unsigned integer</Pixel_Type>
  <Pixel_Depth>8 Bit</Pixel_Depth>
  <NoData_Value></NoData_Value>
  <Colormap>absent</Colormap>
  <Pyramids>level: arbitrary, resampling: Nearest Neighbor</Pyramids>
  <Compression>ECW</Compression>
  <Mensuration_Capabilities>Basic</Mensuration_Capabilities>
  <Status>Permanent</Status>
 </Raster_Information>
 <Extent>
  <Top>170000</Top>
  <Left>653750</Left>
  <Right>655000</Right>
  <Bottom>169000</Bottom>
 </Extent>
 <Spatial_Reference>MGI_BMNM34
  <Linear_Unit>Meter (1,000000)</Linear_Unit>
  <Angular_Unit>Degree (0,0174532925199433)</Angular_Unit>
  <False_Easting>750000</False_Easting>
  <False_Northing>-5000000</False_Northing>
  <Central_Meridian>16,333333333333</Central_Meridian>
  <Scale_Factor>1</Scale_Factor>
  <Latitude_Of_Origin>0</Latitude_Of_Origin>
  <Datum>D_MGI</Datum><
 /Spatial_Reference>
</TreeList>

any ideas?

thanks



-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ecw-file-wrong-extent-corner-coordinates-tp5232129.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Fri Oct 23 02:38:04 2015
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 23 Oct 2015 11:38:04 +0200
Subject: [gdal-dev] GDAL_DATA
In-Reply-To: <CALMrLdBkgxUtOHyeS=F6+fH+rnN-8rq4T2GTqg592Qn+ckfR5w@mail.gmail.com>
References: <CALMrLdBkgxUtOHyeS=F6+fH+rnN-8rq4T2GTqg592Qn+ckfR5w@mail.gmail.com>
Message-ID: <CABUeae_Rrxsw3Bmz3rbG+z8wfytWYrzA8ypGAxKZ=E_+ihkorQ@mail.gmail.com>

On 23 October 2015 at 11:04, Gane R <gane.prog at gmail.com> wrote:
> I have two applications (postgres with postgis) one running with gdal 1.10.1
> and other in gdal 2.0.1 but I see
> gdal-data files are different in gdal 1.10.1 and gdal 2.0.1
>
> So Will the GDAL_DATA point gdal 2.0.1 file or how to solve this ?

I think you should be able to solve it this way:

1) For PostgreSQL/PostGIS do not set GDAL_DATA as environment variable
but as postgresql.gdal_datapath option
Read here http://postgis.net/docs/manual-dev/postgis_gdal_datapath.html

2) Set GDAL_DATA env var for GDAL 2.0.1 apps

If postgresql.gdal_datapath is defined, PostGIS should prefer it.
without trying GDAL_DATA env variable.

Best regards,
-- 
Mateusz  Loskot, http://mateusz.loskot.net

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct 23 07:13:38 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 23 Oct 2015 14:13:38 +0000 (UTC)
Subject: [gdal-dev] Question about ES SQL dialect
References: <loom.20151023T103016-721@post.gmane.org>
Message-ID: <loom.20151023T160938-146@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> maanmittauslaitos.fi> writes:

> 
> Hi,
> 
> I am reading the ElasticSearch manual page
> http://www.gdal.org/drv_elasticsearch.html and I wonder what does this mean
> for an end user of ogrinfo and ogr2ogr
> 
> "If specifying "ES" as the dialect of ExecuteSQL(), a JSon string with a
> serialized Elastic Search filter can be passed"
> 
> Are ogrinfo and ogr2ogr analyzing automatically without any user input what
> is coming after "-where" or "-sql" and if it is json then it will be
passed on?
> 
> Should ElasticSearch be included in the Non-OGR SQL section of
> http://www.gdal.org/ogr_sql.html?

I have learned that users should know about the existence of the ES SQL
dialect if they want to use ES filters inside GDAL VRT data source. This VTR
works fine for me, notice the use of <SrcSQL dialect="ES">

<OGRVRTDataSource>
    <OGRVRTLayer name="ES_with_filter">
        <SrcDataSource>ES:http://localhost:9200 allcountries</SrcDataSource>
        <SrcSQL dialect="ES">
        {
    "query": {
        "geo_shape": {
            "geometry": {
                "shape": {
                    "type": "envelope",
                    "coordinates": [[14, 52],[14.1, 52.2]]
                }
            }
        }
    }
}
</SrcSQL>
    </OGRVRTLayer>
</OGRVRTDataSource>


-Jukka Rahkonen-


From even.rouault at spatialys.com  Fri Oct 23 07:30:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Oct 2015 16:30:37 +0200
Subject: [gdal-dev] Question about ES SQL dialect
In-Reply-To: <loom.20151023T103016-721@post.gmane.org>
References: <loom.20151023T103016-721@post.gmane.org>
Message-ID: <201510231630.37276.even.rouault@spatialys.com>

Hi Jukka,

> 
> I am reading the ElasticSearch manual page
> http://www.gdal.org/drv_elasticsearch.html and I wonder what does this mean
> for an end user of ogrinfo and ogr2ogr
> 
> "If specifying "ES" as the dialect of ExecuteSQL(), a JSon string with a
> serialized Elastic Search filter can be passed"
> 
> Are ogrinfo and ogr2ogr analyzing automatically without any user input what
> is coming after "-where" or "-sql" and if it is json then it will be passed
> on?

For -sql, you need to specify -dialect ES
For -where, there's no way in the API for specifying a dialect. So the driver 
sees if { is the first character, in which case it infers this is JSon filter.

> 
> Should ElasticSearch be included in the Non-OGR SQL section of
> http://www.gdal.org/ogr_sql.html?

Perhaps, although that when dealing with the particulars of each driver, the 
better reference is the doc page of the driver. This is kind of a hack of 
passing ES JSon filters in an interface called ExecuteSQL, so advertizing it in 
a generic page might bring more confusion to the general public.
I let the doc team do what they think is appropriate ;-)

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Oct 23 07:51:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Oct 2015 16:51:00 +0200
Subject: [gdal-dev] ecw - file: wrong extent/corner coordinates
In-Reply-To: <1445592371167-5232129.post@n6.nabble.com>
References: <1445592371167-5232129.post@n6.nabble.com>
Message-ID: <201510231651.00461.even.rouault@spatialys.com>

Le vendredi 23 octobre 2015 11:26:11, Helmut Kudrnovsky a crit :
> hi,
> 
> tested with
> 
> OSGeo4W: gdalinfo --version
> GDAL 1.11.3, released 2015/09/16
> 
> I have several raster ecw files; gdalinfo shows for all the files the same
> extent/corner coordinates, although the ecw files are some kind of mosaic
> over a larger area. (Also QGIS and GRASS GIS show them in one place
> (overlayed one to another)).
> 
> example:
> 
> the content of the world file: 6617-04.eww
> 
> 0.2
> 0.0
> 0.0
> -0.2
> 653750.1
> 169999.9
> 
> gdalinfo says:
> 
> Driver: ECW/ERDAS Compressed Wavelets (SDK 5.0)
> Files: 6617-04.ecw
>        6617-04.eww
>        6617-04.ecw.aux.xml
> Size is 6250, 5000
> Coordinate System is:
> PROJCS["MGI_BMNM34",
>     GEOGCS["GCS_MGI",
>         DATUM["Militar_Geographische_Institute",
>             SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["False_Easting",750000.0],
>     PARAMETER["False_Northing",-5000000.0],
>     PARAMETER["Central_Meridian",16.333333333333],
>     PARAMETER["Scale_Factor",1.0],
>     PARAMETER["Latitude_Of_Origin",0.0],
>     UNIT["Meter",1.0]]
> Origin = (0.000000000000000,69.444444444444443)
> Pixel Size = (0.013888888888889,-0.013888888888889)
> Metadata:
>   COLORSPACE=RGB
>   COMPRESSION_RATE_TARGET=10
>   VERSION=2
> Corner Coordinates:
> Upper Left  (   0.0000000,  69.4444444) (  6d51'43.49"E, 44d44'46.05"N)
> Lower Left  (   0.0000000,   0.0000000) (  6d51'43.85"E, 44d44'43.83"N)
> Upper Right (  86.8055556,  69.4444444) (  6d51'47.38"E, 44d44'46.37"N)
> Lower Right (  86.8055556,   0.0000000) (  6d51'47.75"E, 44d44'44.15"N)
> Center      (  43.4027778,  34.7222222) (  6d51'45.62"E, 44d44'45.10"N)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
>   Description = Red
>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
>   Description = Green
>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>   Description = Blue
>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156

Helmut,

Looking at the ECW driver code, if the .ecw file itself has an internal 
georeferencing, then the world file .eww is ignored, which looks consistent 
with the above report. This is a debatable behaviour. I think this has been 
discussed quite a few times. Maybe a config option to override the behaviour 
would be useful.

A potential workaround is to edit 6617-04.ecw.aux.xml with the following 
content derived from the .eww.
.aux.xml overrides the internal georeferencing of the .ecw.

<PAMDataset>
  <GeoTransform>653750,0.2,0,440720,0,-0.2</GeoTransform>
</PAMDataset>


Even

> 
> and the layer properties in Arcgis says:
> 
> <TreeList>
>  <Raster_Information>
>   <Columns_and_Rows>6250, 5000</Columns_and_Rows>
>   <Number_of_Bands>3</Number_of_Bands>
>   <Cell_Size__X._Y_>0,2, 0,2</Cell_Size__X._Y_>
>   <Uncompressed_Size>89,41 MB</Uncompressed_Size>
>   <Format>ECW</Format>
>   <Source_Type>Generic</Source_Type>
>   <Pixel_Type>unsigned integer</Pixel_Type>
>   <Pixel_Depth>8 Bit</Pixel_Depth>
>   <NoData_Value></NoData_Value>
>   <Colormap>absent</Colormap>
>   <Pyramids>level: arbitrary, resampling: Nearest Neighbor</Pyramids>
>   <Compression>ECW</Compression>
>   <Mensuration_Capabilities>Basic</Mensuration_Capabilities>
>   <Status>Permanent</Status>
>  </Raster_Information>
>  <Extent>
>   <Top>170000</Top>
>   <Left>653750</Left>
>   <Right>655000</Right>
>   <Bottom>169000</Bottom>
>  </Extent>
>  <Spatial_Reference>MGI_BMNM34
>   <Linear_Unit>Meter (1,000000)</Linear_Unit>
>   <Angular_Unit>Degree (0,0174532925199433)</Angular_Unit>
>   <False_Easting>750000</False_Easting>
>   <False_Northing>-5000000</False_Northing>
>   <Central_Meridian>16,333333333333</Central_Meridian>
>   <Scale_Factor>1</Scale_Factor>
>   <Latitude_Of_Origin>0</Latitude_Of_Origin>
>   <Datum>D_MGI</Datum><
>  /Spatial_Reference>
> </TreeList>
> 
> any ideas?
> 
> thanks
> 
> 
> 
> -----
> best regards
> Helmut
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/ecw-file-wrong-extent-corner-coordinat
> es-tp5232129.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hellik at web.de  Fri Oct 23 11:11:18 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 23 Oct 2015 11:11:18 -0700 (PDT)
Subject: [gdal-dev] ecw - file: wrong extent/corner coordinates
In-Reply-To: <201510231651.00461.even.rouault@spatialys.com>
References: <1445592371167-5232129.post@n6.nabble.com>
 <201510231651.00461.even.rouault@spatialys.com>
Message-ID: <1445623878085-5232256.post@n6.nabble.com>

Hi Even,


Even Rouault-2 wrote
> Le vendredi 23 octobre 2015 11:26:11, Helmut Kudrnovsky a crit :
>> hi,
>> 
>> tested with
>> 
>> OSGeo4W: gdalinfo --version
>> GDAL 1.11.3, released 2015/09/16
>> 
>> I have several raster ecw files; gdalinfo shows for all the files the
>> same
>> extent/corner coordinates, although the ecw files are some kind of mosaic
>> over a larger area. (Also QGIS and GRASS GIS show them in one place
>> (overlayed one to another)).
>> 
>> example:
>> 
>> the content of the world file: 6617-04.eww
>> 
>> 0.2
>> 0.0
>> 0.0
>> -0.2
>> 653750.1
>> 169999.9
>> 
>> gdalinfo says:
>> 
>> Driver: ECW/ERDAS Compressed Wavelets (SDK 5.0)
>> Files: 6617-04.ecw
>>        6617-04.eww
>>        6617-04.ecw.aux.xml
>> Size is 6250, 5000
>> Coordinate System is:
>> PROJCS["MGI_BMNM34",
>>     GEOGCS["GCS_MGI",
>>         DATUM["Militar_Geographische_Institute",
>>             SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>>         PRIMEM["Greenwich",0.0],
>>         UNIT["Degree",0.0174532925199433]],
>>     PROJECTION["Transverse_Mercator"],
>>     PARAMETER["False_Easting",750000.0],
>>     PARAMETER["False_Northing",-5000000.0],
>>     PARAMETER["Central_Meridian",16.333333333333],
>>     PARAMETER["Scale_Factor",1.0],
>>     PARAMETER["Latitude_Of_Origin",0.0],
>>     UNIT["Meter",1.0]]
>> Origin = (0.000000000000000,69.444444444444443)
>> Pixel Size = (0.013888888888889,-0.013888888888889)
>> Metadata:
>>   COLORSPACE=RGB
>>   COMPRESSION_RATE_TARGET=10
>>   VERSION=2
>> Corner Coordinates:
>> Upper Left  (   0.0000000,  69.4444444) (  6d51'43.49"E, 44d44'46.05"N)
>> Lower Left  (   0.0000000,   0.0000000) (  6d51'43.85"E, 44d44'43.83"N)
>> Upper Right (  86.8055556,  69.4444444) (  6d51'47.38"E, 44d44'46.37"N)
>> Lower Right (  86.8055556,   0.0000000) (  6d51'47.75"E, 44d44'44.15"N)
>> Center      (  43.4027778,  34.7222222) (  6d51'45.62"E, 44d44'45.10"N)
>> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
>>   Description = Red
>>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
>> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
>>   Description = Green
>>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
>> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>>   Description = Blue
>>   Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
> 
> Helmut,
> 
> Looking at the ECW driver code, if the .ecw file itself has an internal 
> georeferencing, then the world file .eww is ignored, which looks
> consistent 
> with the above report. This is a debatable behaviour. I think this has
> been 
> discussed quite a few times. Maybe a config option to override the
> behaviour 
> would be useful.
> 
> A potential workaround is to edit 6617-04.ecw.aux.xml with the following 
> content derived from the .eww.
> .aux.xml overrides the internal georeferencing of the .ecw.
> <PAMDataset>
>   
> <GeoTransform>
> 653750,0.2,0,440720,0,-0.2
> </GeoTransform>
> </PAMDataset>
> 
> Even
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev

thanks for the hints!

content of 6617-04.eww:

0.2
0.0
0.0
-0.2
653750.1
169999.9

following geotransform item added to 6617-04.ecw.aux.xml:

<PAMDataset>
 
<SRS>PROJCS[&quot;MGI_BMNM34&quot;,GEOGCS[&quot;GCS_MGI&quot;,DATUM[&quot;Militar_Geographische_Institute&quot;,SPHEROID[&quot;Bessel_1841&quot;,6377397.155,299.1528128]],PRIMEM[&quot;Greenwich&quot;,0.0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;False_Easting&quot;,750000.0],PARAMETER[&quot;False_Northing&quot;,-5000000.0],PARAMETER[&quot;Central_Meridian&quot;,16.333333333333],PARAMETER[&quot;Scale_Factor&quot;,1.0],PARAMETER[&quot;Latitude_Of_Origin&quot;,0.0],UNIT[&quot;Meter&quot;,1.0]]</SRS>
  <GeoTransform>653750.1,0.2,0,169999.9,0,-0.2</GeoTransform>  
</PAMDataset>

gdalinfo output:

Driver: ECW/ERDAS Compressed Wavelets (SDK 5.0)
Files: 6617-04.ecw
       6617-04.eww
       6617-04.ecw.aux.xml
Size is 6250, 5000
Coordinate System is:
PROJCS["MGI_BMNM34",
    GEOGCS["GCS_MGI",
        DATUM["Militar_Geographische_Institute",
            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",750000.0],
    PARAMETER["False_Northing",-5000000.0],
    PARAMETER["Central_Meridian",16.333333333333],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
Origin = (653750.099999999980000,169999.899999999990000)
Pixel Size = (0.200000000000000,-0.200000000000000)
Metadata:
  COLORSPACE=RGB
  COMPRESSION_RATE_TARGET=10
  VERSION=2
Corner Coordinates:
Upper Left  (  653750.100,  169999.900) ( 15d 4'31.99"E, 46d39'45.94"N)
Lower Left  (  653750.100,  168999.900) ( 15d 4'32.74"E, 46d39'13.56"N)
Upper Right (  655000.100,  169999.900) ( 15d 5'30.78"E, 46d39'46.59"N)
Lower Right (  655000.100,  168999.900) ( 15d 5'31.52"E, 46d39'14.21"N)
Center      (  654375.100,  169499.900) ( 15d 5' 1.76"E, 46d39'30.08"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Description = Red
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Description = Green
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Description = Blue
  Overviews: 3125x2500, 1562x1250, 781x625, 390x312, 195x156

.aux.xml overriding seems to work. the raster are now correctly displayed in
QGIS etc.

a config option to override would be helpful.

thanks.



-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ecw-file-wrong-extent-corner-coordinates-tp5232129p5232256.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Oct 23 11:28:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 23 Oct 2015 20:28:08 +0200
Subject: [gdal-dev] ecw - file: wrong extent/corner coordinates
In-Reply-To: <1445623878085-5232256.post@n6.nabble.com>
References: <1445592371167-5232129.post@n6.nabble.com>
 <201510231651.00461.even.rouault@spatialys.com>
 <1445623878085-5232256.post@n6.nabble.com>
Message-ID: <201510232028.08141.even.rouault@spatialys.com>

> 
> content of 6617-04.eww:
> 
> 0.2
> 0.0
> 0.0
> -0.2
> 653750.1
> 169999.9
> 
> following geotransform item added to 6617-04.ecw.aux.xml:
> 
> <PAMDataset>
> 
> <SRS>PROJCS[&quot;MGI_BMNM34&quot;,GEOGCS[&quot;GCS_MGI&quot;,DATUM[&quot;M
> ilitar_Geographische_Institute&quot;,SPHEROID[&quot;Bessel_1841&quot;,63773
> 97.155,299.1528128]],PRIMEM[&quot;Greenwich&quot;,0.0],UNIT[&quot;Degree&qu
> ot;,0.0174532925199433]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAME
> TER[&quot;False_Easting&quot;,750000.0],PARAMETER[&quot;False_Northing&quot
> ;,-5000000.0],PARAMETER[&quot;Central_Meridian&quot;,16.333333333333],PARAM
> ETER[&quot;Scale_Factor&quot;,1.0],PARAMETER[&quot;Latitude_Of_Origin&quot;
> ,0.0],UNIT[&quot;Meter&quot;,1.0]]</SRS>
> <GeoTransform>653750.1,0.2,0,169999.9,0,-0.2</GeoTransform>

--> This is not the more accurate translation from worldfile convention to GDAL 
convention. The coordinates of the top-left pixel in worldfiles are the center 
of pixel. In GDAL convention, it is the top-left corner of the top-left pixel, 
hence a half-pixel shift. So in GDAL, the GeoTransform should be:

<GeoTransform>653750,0.2,0,170000,0,-0.2</GeoTransform>

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hellik at web.de  Fri Oct 23 11:27:07 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 23 Oct 2015 11:27:07 -0700 (PDT)
Subject: [gdal-dev] ecw - file: wrong extent/corner coordinates
In-Reply-To: <201510232028.08141.even.rouault@spatialys.com>
References: <1445592371167-5232129.post@n6.nabble.com>
 <201510231651.00461.even.rouault@spatialys.com>
 <1445623878085-5232256.post@n6.nabble.com>
 <201510232028.08141.even.rouault@spatialys.com>
Message-ID: <1445624827769-5232261.post@n6.nabble.com>

Even Rouault-2 wrote
>> 
>> content of 6617-04.eww:
>> 
>> 0.2
>> 0.0
>> 0.0
>> -0.2
>> 653750.1
>> 169999.9
>> 
>> following geotransform item added to 6617-04.ecw.aux.xml:
>> 
>> 
> <PAMDataset>
>> 
> <GeoTransform>
> 653750.1,0.2,0,169999.9,0,-0.2
> </GeoTransform>
> --> This is not the more accurate translation from worldfile convention to
> GDAL 
> convention. The coordinates of the top-left pixel in worldfiles are the
> center 
> of pixel. In GDAL convention, it is the top-left corner of the top-left
> pixel, 
> hence a half-pixel shift. So in GDAL, the GeoTransform should be:
> <GeoTransform>
> 653750,0.2,0,170000,0,-0.2
> </GeoTransform>

thanks again for the hint about the center/top-left pixel issue.



-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ecw-file-wrong-extent-corner-coordinates-tp5232129p5232261.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From apacker at biosonicsinc.com  Fri Oct 23 16:12:20 2015
From: apacker at biosonicsinc.com (Asa Packer)
Date: Fri, 23 Oct 2015 16:12:20 -0700
Subject: [gdal-dev] Delaunay Triangulation
Message-ID: <008701d10de8$45119910$cf34cb30$@biosonicsinc.com>

Hello,

 

I am very excited about the Delaunay Triangulation and linear gridding code
that is on the SVN trunk for GDAL, and wondering when that might make it
into a released version.  Is that slated for inclusion in 2.1?  Is there an
estimated release timeline for 2.1?  Is there anything I can do to help with
that code?

 

Thanks!

 

Asa

 

Asa Packer  | Lead Systems Engineer

BioSonics, Inc.  |  4027 Leary Way NW, Seattle WA 98107 USA
tel 206.782.2211  |  fax 206.782.2244  |   <http://www.biosonicsinc.com>
biosonicsinc.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151023/dd68951f/attachment.html>

From even.rouault at spatialys.com  Sat Oct 24 00:52:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 24 Oct 2015 09:52:32 +0200
Subject: [gdal-dev] Delaunay Triangulation
In-Reply-To: <008701d10de8$45119910$cf34cb30$@biosonicsinc.com>
References: <008701d10de8$45119910$cf34cb30$@biosonicsinc.com>
Message-ID: <201510240952.32826.even.rouault@spatialys.com>

Asa,

> 
> I am very excited about the Delaunay Triangulation and linear gridding code
> that is on the SVN trunk for GDAL, and wondering when that might make it
> into a released version.  Is that slated for inclusion in 2.1?  

Yes, the trunk branch is 2.1.0dev

> Is there an
> estimated release timeline for 2.1?

Probably around May 2016

> Is there anything I can do to help
> with that code?

You're welcome to test trunk and report if there are issues.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bojan.surma at gmail.com  Sun Oct 25 01:46:41 2015
From: bojan.surma at gmail.com (surma)
Date: Sun, 25 Oct 2015 01:46:41 -0700 (PDT)
Subject: [gdal-dev] Problem with using ogr2ogr to migrate data from Postgis
 to TSQL/Oracle Spatial
Message-ID: <1445762801775-5232425.post@n6.nabble.com>

Hello guys,

I'm learning about ogr2ogr and have encountered a problem.

So I have some data isnide my postgis database that Im trying to migrate to
the tsql and oracle spatial databases.

My postgres config:
###################################################
create sequence my_geometry_table_id_SEQ;
CREATE TABLE public.my_geometry_table
(
  id integer NOT NULL DEFAULT nextval('my_geometry_table_id_SEQ'::regclass),
  date_modified timestamp with time zone,
  geom geometry(Polygon,3765),
  CONSTRAINT my_geometry_table_id PRIMARY KEY (id)
);

insert into public.my_geometry_table(id, date_modified, geom)
values(nextval('my_geometry_table_id_SEQ'),'2013-02-11 09:43:00+01',
ST_GeomFromText('POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))', 3765));
###################################################


ogr2ogr script Im using:
###################################################
ogr2ogr --debug -overwrite -s_srs EPSG:3765 -t_srs EPSG:3765-f 
"MSSQLSpatial"  MSSQL:server=xy;database=xy;uid=xy;pwd=xy "PG:host=xy
user=xy dbname=xy password=xy port=5432" -lco PRECISION=NO -nlt POLYGON -nln
my_geometry_table -sql "select * from public.my_geometry_table"
###################################################


Error when sending to ORACLE SPATIAL:
###################################################
ERROR 1: ORA-01830: date format picture ends before converting entire input
string
 in OCIStmtExecute
###################################################

 
Error when sending to TSQL:
###################################################
ERROR: Cannot convert varchar to datetime. Conversion failed when converting
date and/or time from character string.
###################################################

When I remove the timezone column from the POSTGIS source, or convert the
column type to varchar via ogr the data gets transfered. 

So it seems that the ogr2ogr cannot handle postgres timezone info from a
timestamp column. Is there a known workaround around this, or must I use
python bindings to trim the timezone portion for each row?

I don't want to convert the column to varchar.

Used versions:
oracle spatial: 11g
tsql: 11.0
postgis: POSTGIS="2.1.7 r13414" 
ogr2ogr version: using 2.0.1, tried with 1.11, 1.13

Thanks.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-with-using-ogr2ogr-to-migrate-data-from-Postgis-to-TSQL-Oracle-Spatial-tp5232425.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bo.victor.thomsen at gmail.com  Sun Oct 25 02:19:45 2015
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Sun, 25 Oct 2015 10:19:45 +0100
Subject: [gdal-dev] Problem with using ogr2ogr to migrate data from
 Postgis to TSQL/Oracle Spatial
In-Reply-To: <1445762801775-5232425.post@n6.nabble.com>
References: <1445762801775-5232425.post@n6.nabble.com>
Message-ID: <562C9EB1.4020908@gmail.com>

Have you tried typecasting your "timestamp with time zone" to a 
"timestamp witout time zone" as a workaround ?

*ogr2ogr ... -sql "select id, date_modified::timestamp, geom from 
public.my_geometry_table" ...*


Regards

Bo Victor Thomsen
AestasGIS
Denmark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151025/30718f51/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sun Oct 25 02:42:21 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 25 Oct 2015 09:42:21 +0000 (UTC)
Subject: [gdal-dev] Bad design in -clipsrs?
Message-ID: <loom.20151025T103338-884@post.gmane.org>

Hi,

I wonder if this gis.stackexchange question
http://gis.stackexchange.com/questions/167584/clipping-vs-intersecting could
indicate that GDAL is doing clipping in a sub-optimal way, perhaps without
utilizing spatial index or something like that. ArcGIS and OpenJUMP are
claimed to clip linestrings 100 times faster than GDAL.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Sun Oct 25 03:02:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 25 Oct 2015 11:02:21 +0100
Subject: [gdal-dev] Bad design in -clipsrs?
In-Reply-To: <loom.20151025T103338-884@post.gmane.org>
References: <loom.20151025T103338-884@post.gmane.org>
Message-ID: <201510251102.21802.even.rouault@spatialys.com>

Le dimanche 25 octobre 2015 10:42:21, Jukka Rahkonen a crit :
> Hi,
> 
> I wonder if this gis.stackexchange question
> http://gis.stackexchange.com/questions/167584/clipping-vs-intersecting
> could indicate that GDAL is doing clipping in a sub-optimal way, perhaps
> without utilizing spatial index 

Yes, it doesn't use spatial index if you don't specify one explictly with -
spat. Was discussed recently I believe.
Could/should be improved. Patch welcome if someone wants to have a try.

> or something like that. ArcGIS and
> OpenJUMP are claimed to clip linestrings 100 times faster than GDAL.
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sun Oct 25 03:30:37 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Sun, 25 Oct 2015 10:30:37 +0000
Subject: [gdal-dev] Bad design in -clipsrs?
In-Reply-To: <201510251102.21802.even.rouault@spatialys.com>
References: <loom.20151025T103338-884@post.gmane.org>,
 <201510251102.21802.even.rouault@spatialys.com>
Message-ID: <27ac3bcf593449dcace2090b8dd78b2c@C119S212VM022.msvyvi.vaha.local>

And probably with -spat the spatial index is only used for discarding features which are outside the area of interest but not for analyzing if they are candidates for clipping or not. With complicated features it might be good to compare first if the boundary of clipping polygon crosses the bbox of a feature - no cross - for sure no need to clip.

-Jukka-
________________________________
Lhettj: Even Rouault<mailto:even.rouault at spatialys.com>
Lhetetty: 25.10.2015 12:02
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Kopio: Rahkonen Jukka (MML)<mailto:jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Bad design in -clipsrs?

Le dimanche 25 octobre 2015 10:42:21, Jukka Rahkonen a crit :
> Hi,
>
> I wonder if this gis.stackexchange question
> http://gis.stackexchange.com/questions/167584/clipping-vs-intersecting
> could indicate that GDAL is doing clipping in a sub-optimal way, perhaps
> without utilizing spatial index

Yes, it doesn't use spatial index if you don't specify one explictly with -
spat. Was discussed recently I believe.
Could/should be improved. Patch welcome if someone wants to have a try.

> or something like that. ArcGIS and
> OpenJUMP are claimed to clip linestrings 100 times faster than GDAL.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151025/bfbc5ae0/attachment.html>

From bojan.surma at gmail.com  Sun Oct 25 10:04:14 2015
From: bojan.surma at gmail.com (surma)
Date: Sun, 25 Oct 2015 10:04:14 -0700 (PDT)
Subject: [gdal-dev] Problem with using ogr2ogr to migrate data from
 Postgis to TSQL/Oracle Spatial
In-Reply-To: <562C9EB1.4020908@gmail.com>
References: <1445762801775-5232425.post@n6.nabble.com>
 <562C9EB1.4020908@gmail.com>
Message-ID: <1445792654597-5232463.post@n6.nabble.com>

Oh, cheers man, this does the trick. Totally forgot that I could cast the
column.

Thank you.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-with-using-ogr2ogr-to-migrate-data-from-Postgis-to-TSQL-Oracle-Spatial-tp5232425p5232463.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ari.jolma at gmail.com  Mon Oct 26 00:15:07 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 26 Oct 2015 09:15:07 +0200
Subject: [gdal-dev] Transactional GDAL WFS client
Message-ID: <562DD2FB.5050704@gmail.com>

Hi,

I'm developing a WFS server in Perl based on GDAL (i.e., GDAL is 
generating the GML the server sends to the client) and I'm testing it 
using the GDAL WFS client.

I'm obviously ignorant on some basic issues since I'm getting an error

"Cannot insert feature because we didn't manage to parse the .XSD schema"

which comes from WFSLayer::ICreateFeature.

The test code is very simple:

my $ds = Geo::OGR::DataSource::Open('WFS:http://localhost/TestApp', 1);
my $layer = $ds->GetLayer('local.mittauskohteet2.geom');
my $feature = Geo::OGR::Feature->new($layer->Schema);
$feature->Geometry(Geo::OGR::Geometry->new(WKT=>'POINT (1 2)'));
$feature->Field('koodi' => 'fake');
$layer->CreateFeature($f);

What am I missing?

Best regards,

Ari


From ari.jolma at gmail.com  Mon Oct 26 01:19:09 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 26 Oct 2015 10:19:09 +0200
Subject: [gdal-dev] Transactional GDAL WFS client
In-Reply-To: <562DD2FB.5050704@gmail.com>
References: <562DD2FB.5050704@gmail.com>
Message-ID: <562DE1FD.2040207@gmail.com>

Sorted this out myself.

The problem was the "type" property of "element"  elements in 
DescribeFeatureType. It was not recognized by GDAL. GDAL makes them ok, 
but for PostgreSQL data sources I'm using Perl database tools and 
obviously need to pay a bit more attention to setting the type.

Ari

On 26.10.2015 09:15, Ari Jolma wrote:
> Hi,
>
> I'm developing a WFS server in Perl based on GDAL (i.e., GDAL is 
> generating the GML the server sends to the client) and I'm testing it 
> using the GDAL WFS client.
>
> I'm obviously ignorant on some basic issues since I'm getting an error
>
> "Cannot insert feature because we didn't manage to parse the .XSD schema"
>
> which comes from WFSLayer::ICreateFeature.
>
> The test code is very simple:
>
> my $ds = Geo::OGR::DataSource::Open('WFS:http://localhost/TestApp', 1);
> my $layer = $ds->GetLayer('local.mittauskohteet2.geom');
> my $feature = Geo::OGR::Feature->new($layer->Schema);
> $feature->Geometry(Geo::OGR::Geometry->new(WKT=>'POINT (1 2)'));
> $feature->Field('koodi' => 'fake');
> $layer->CreateFeature($f);
>
> What am I missing?
>
> Best regards,
>
> Ari
>


From schwehr at gmail.com  Mon Oct 26 05:00:04 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 26 Oct 2015 05:00:04 -0700
Subject: [gdal-dev] Use cases for the old PCIDSK driver?
Message-ID: <CACmBxyt1x9AUDmuptTycVWr_LLB9uusEqEa5qTxL7Mb2WLr95Q@mail.gmail.com>

Hi all,

For the head of svn trunk....

Anyone have use cases that only work with the old PCIDSK driver?  If so,
let me know and I'll see if I can add some documentation.  Otherwise, I
propose removing the old driver and the autoconf/make tests and
conditionals that support it.

https://trac.osgeo.org/gdal/ticket/6172

Thanks,
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/8f2ad01f/attachment.html>

From damian.dixon at gmail.com  Mon Oct 26 05:36:29 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Mon, 26 Oct 2015 12:36:29 +0000
Subject: [gdal-dev] Follow on to the "ISO Metadata" post
In-Reply-To: <FAAF6EDEF3754BA091ED8F4BDA4F7781@TimCrookLaptop>
References: <FAAF6EDEF3754BA091ED8F4BDA4F7781@TimCrookLaptop>
Message-ID: <CAJjdW1wSNvDmpTWw3mEmvkNKEkfjsMu1qV7myNrx0GUdQOwKog@mail.gmail.com>

Hi Tim,

Personally I would not use ISO 19115-1 as an internal format.

There are not a huge number of data formats/products that store metadata as
XML out of the box. When they do store metadata it is usually specific to
the data and data product (regardless of how the metadata is stored).

There have been attempts at adding metadata alongside data products such as
UK MOD profile of IS0 19115 (MOD profile has problems). The French
equivalent of the MOD have for a number of years mandated a metadata format
alongside all data products used by them (wish I could find the actual
standard for the metadata).

The biggest problem is actually mapping from data/'data product' metadata
to the target metadata specification.

Just to highlight how much a problem the mapping of fields from one
metadata format to another is; we have been arguing off and on for more
than a year internally about the meaning of dates and which date should be
in which field. Two of our big customers do not agree on the meaning of
some of the source data date fields and the mappings we have done.

I believe ESRI have their own internal metadata format that they provide a
tool to translate to other XML metadata specifications.

Where I work I have been pushing a per data/'data product' format that is
XML based that uses tag value pairs. The tags would basically be a dump of
all available information and specific to each data/'data product'. A set
of XSLT scripts would then translate the information to what ever metadata
standard you wanted to use and if you needed to modify the mapping you
could change the XSLT script for that data/'data product'.

We have found that hard-coding the mapping is too costly to maintain and
very difficult to get right.

Probably not the answer you are looking for.

Regards
Damian


On 22 October 2015 at 13:29, Tim Crook <tim.crook at sympatico.ca> wrote:

> Hello Doug and Damian.
>
> I saw your post about ISO 19103, ISO 19115 and  ISO 19115-1. I am starting
> to look at ticket #3549 (https://trac.osgeo.org/gdal/ticket/3549). This
> ticket is a specific problem for metadata translation for image
> transformations to the PCIDSK format. The ticket references JPEG and TIFF.
>
> The first thing I thought of was when I saw your posts was mapping the XML
> metadata from different sources into an internal format to GDAL, then
> passing through the information for mapping to the destination format. I
> suppose there are some image source formats that don't use XML to store
> their metadata, so this would require additional handling.
>
> I suppose the internal format to GDAL could be XML in the ISO 19115-1
> format.
>
> Am I completely off base here?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/5ffd4e23/attachment.html>

From tim.crook at sympatico.ca  Mon Oct 26 05:59:30 2015
From: tim.crook at sympatico.ca (Tim Crook)
Date: Mon, 26 Oct 2015 08:59:30 -0400
Subject: [gdal-dev] Follow on to the "ISO Metadata" post
In-Reply-To: <CAJjdW1wSNvDmpTWw3mEmvkNKEkfjsMu1qV7myNrx0GUdQOwKog@mail.gmail.com>
References: <FAAF6EDEF3754BA091ED8F4BDA4F7781@TimCrookLaptop>
 <CAJjdW1wSNvDmpTWw3mEmvkNKEkfjsMu1qV7myNrx0GUdQOwKog@mail.gmail.com>
Message-ID: <4A482CC5B8FE45B8AE7443795DDCC5A6@TimCrookLaptop>

Yes, it had occurred to me that XSLT would be a flexible way of handling a lot of the metadata mappings.

From: Damian Dixon 
Sent: Monday, October 26, 2015 8:36 AM
To: Tim Crook 
Cc: doug_newcomb at fws.gov ; gdal dev 
Subject: Re: Follow on to the "ISO Metadata" post

Hi Tim,

Personally I would not use ISO 19115-1 as an internal format.

There are not a huge number of data formats/products that store metadata as XML out of the box. When they do store metadata it is usually specific to the data and data product (regardless of how the metadata is stored).

There have been attempts at adding metadata alongside data products such as UK MOD profile of IS0 19115 (MOD profile has problems). The French equivalent of the MOD have for a number of years mandated a metadata format alongside all data products used by them (wish I could find the actual standard for the metadata).

The biggest problem is actually mapping from data/'data product' metadata to the target metadata specification.

Just to highlight how much a problem the mapping of fields from one metadata format to another is; we have been arguing off and on for more than a year internally about the meaning of dates and which date should be in which field. Two of our big customers do not agree on the meaning of some of the source data date fields and the mappings we have done.

I believe ESRI have their own internal metadata format that they provide a tool to translate to other XML metadata specifications.

Where I work I have been pushing a per data/'data product' format that is XML based that uses tag value pairs. The tags would basically be a dump of all available information and specific to each data/'data product'. A set of XSLT scripts would then translate the information to what ever metadata standard you wanted to use and if you needed to modify the mapping you could change the XSLT script for that data/'data product'.

We have found that hard-coding the mapping is too costly to maintain and very difficult to get right.

Probably not the answer you are looking for.

Regards
Damian


On 22 October 2015 at 13:29, Tim Crook <tim.crook at sympatico.ca> wrote:

  Hello Doug and Damian.

  I saw your post about ISO 19103, ISO 19115 and  ISO 19115-1. I am starting to look at ticket #3549 (https://trac.osgeo.org/gdal/ticket/3549). This ticket is a specific problem for metadata translation for image transformations to the PCIDSK format. The ticket references JPEG and TIFF.

  The first thing I thought of was when I saw your posts was mapping the XML metadata from different sources into an internal format to GDAL, then passing through the information for mapping to the destination format. I suppose there are some image source formats that don't use XML to store their metadata, so this would require additional handling.

  I suppose the internal format to GDAL could be XML in the ISO 19115-1 format.

  Am I completely off base here? 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/73092ae0/attachment-0001.html>

From dmiller at JFTI.com  Mon Oct 26 09:58:01 2015
From: dmiller at JFTI.com (Miller, Doug)
Date: Mon, 26 Oct 2015 16:58:01 +0000
Subject: [gdal-dev] Retrieving Sub Datasets from an RPF's A.TOC file
In-Reply-To: <DA0197C5FAB70B45A5C65D26D9CF9A1E1B4D3E7A@NAEAPAXRXM01V.nadsusea.nads.navy.mil>
References: <DA0197C5FAB70B45A5C65D26D9CF9A1E1B4D3E7A@NAEAPAXRXM01V.nadsusea.nads.navy.mil>
Message-ID: <7ebc48212d764548b5f87c75b1a6e8a5@NT10-MAIL13.jfti.com>

When retrieving a sub dataset from GDAL using GDALOpen() and expressing the file path as  "NITF_TOC_ENTRY:CADRG_TLM50_50K_2_18:C:/rpf/a.toc "  there is a considerable delay.  This delay is acceptable if the RFP's coverage is for the United States, but if the coverage is for the world then it becomes a problem.

Is there a different way that I should be working with RPF (CADRG) within the GDAL framework or should I move on to something like OSSIM?

Thanks for any help you can give,

Doug

From even.rouault at spatialys.com  Mon Oct 26 10:28:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Oct 2015 18:28:36 +0100
Subject: [gdal-dev] Retrieving Sub Datasets from an RPF's A.TOC file
In-Reply-To: <7ebc48212d764548b5f87c75b1a6e8a5@NT10-MAIL13.jfti.com>
References: <DA0197C5FAB70B45A5C65D26D9CF9A1E1B4D3E7A@NAEAPAXRXM01V.nadsusea.nads.navy.mil>
 <7ebc48212d764548b5f87c75b1a6e8a5@NT10-MAIL13.jfti.com>
Message-ID: <201510261828.36849.even.rouault@spatialys.com>

Doug,

you might try defining the RPFTOC_FORCE_RGBA envirnoment variable/config option 
to YES. This should avoid GDALOpen'ing all the tiles at dataset creation. 
However the presence of all tiles will be checked via a 'stat' call, which can 
still be a potential bottleneck. That could probably be disabled with some 
code changes (the code would then assume that all declared tiles are 
effectively present on the disk).

Even

> When retrieving a sub dataset from GDAL using GDALOpen() and expressing the
> file path as  "NITF_TOC_ENTRY:CADRG_TLM50_50K_2_18:C:/rpf/a.toc "  there
> is a considerable delay.  This delay is acceptable if the RFP's coverage
> is for the United States, but if the coverage is for the world then it
> becomes a problem.
> 
> Is there a different way that I should be working with RPF (CADRG) within
> the GDAL framework or should I move on to something like OSSIM?
> 
> Thanks for any help you can give,
> 
> Doug
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dadler at adtechgeospatial.com  Mon Oct 26 10:48:47 2015
From: dadler at adtechgeospatial.com (David Adler)
Date: Mon, 26 Oct 2015 13:48:47 -0400
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <201506122350.46646.even.rouault@spatialys.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <CAJ0mEz0Bq9+P8M0XD_1jZUEMunKUQh+Y_2c3_aHdKhFiNPO58Q@mail.gmail.com>
 <201506122350.46646.even.rouault@spatialys.com>
Message-ID: <562E677F.2030608@adtechgeospatial.com>

I am close to finished with this driver which was delayed significantly 
getting access to a DB2 for z/OS test environment to verify that it 
works across IBM DB2 platforms.

What is the proper way to handle authorship in the source code? The DB2 
driver is based on the MS SQL driver with significant changes to support 
the DB2 environment. Current prologues have information like:

* * Author:   Tamas Szekeres, szekerest at gmail.com
  *
  ******************************************************************************
  * Copyright (c) 2010, Tamas Szekeres
  * Copyright (c) 2010-2012, Even Rouault <even dot rouault at 
mines-paris dot org>*

I've mostly been testing using the apps test_ogrsf, ogr2ogr and ogrinfo.

Is there any documentation on the autotest system? It was interesting to 
find that there was a 2003 DB2 test driver for DB2 V7 - we are now at V10.5.

Regards,
David

On 6/12/2015 5:50 PM, Even Rouault wrote:
>>> 3. What is the plan for the transition to GDAL 2.0?  My driver was
>>> developed against GDAL 1.11.2 and parallels similar drivers for MSSQL,
>>> PostGIS, Oracle, etc.
>> Current trunk is 2.0,
> 2.1dev actually ;-)
>
>> with a release candidate out.  You may have to
>> do a little work to update the driver.
> Should be covered by https://svn.osgeo.org/gdal/trunk/gdal/MIGRATION_GUIDE.TXT
>
>>> ---
>>> This email has been checked for viruses by Avast antivirus software.
>>> https://www.avast.com/antivirus
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/cf9f0fd5/attachment.html>

From even.rouault at spatialys.com  Mon Oct 26 11:12:25 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Oct 2015 19:12:25 +0100
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <562E677F.2030608@adtechgeospatial.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201506122350.46646.even.rouault@spatialys.com>
 <562E677F.2030608@adtechgeospatial.com>
Message-ID: <201510261912.26336.even.rouault@spatialys.com>

Le lundi 26 octobre 2015 18:48:47, David Adler a crit :
> I am close to finished with this driver which was delayed significantly
> getting access to a DB2 for z/OS test environment to verify that it
> works across IBM DB2 platforms.
> 
> What is the proper way to handle authorship in the source code? The DB2
> driver is based on the MS SQL driver with significant changes to support
> the DB2 environment. Current prologues have information like:
> 
> * * Author:   Tamas Szekeres, szekerest at gmail.com
>   *
>  
> **************************************************************************
> **** * Copyright (c) 2010, Tamas Szekeres
>   * Copyright (c) 2010-2012, Even Rouault <even dot rouault at
> mines-paris dot org>*

Put yourself as author, add yourself (or your company depending on in which 
context you contribute this) in copyright and retain copyright attributions of 
portions of code you derive from. Which can be hard to determine in practice. 
So I'd say retain Tamas ones and you can probably remove mine, which must be 
anectodical in the case of the MSSQL driver.

> 
> I've mostly been testing using the apps test_ogrsf, ogr2ogr and ogrinfo.
> 
> Is there any documentation on the autotest system?

Well, itself is assumed to be self documented ;-) look at a few existing 
scripts close to what you want to do and do the same...

> It was interesting to
> find that there was a 2003 DB2 test driver for DB2 V7

You mean the ogr/ogr_db2_hack.py file ? I'm not sure if/which was the 
corresponding driver. Perhaps the generic OBDC one.

> - we are now at
> V10.5.
> 
> Regards,
> David
> 
> On 6/12/2015 5:50 PM, Even Rouault wrote:
> >>> 3. What is the plan for the transition to GDAL 2.0?  My driver was
> >>> developed against GDAL 1.11.2 and parallels similar drivers for MSSQL,
> >>> PostGIS, Oracle, etc.
> >> 
> >> Current trunk is 2.0,
> > 
> > 2.1dev actually ;-)
> > 
> >> with a release candidate out.  You may have to
> >> do a little work to update the driver.
> > 
> > Should be covered by
> > https://svn.osgeo.org/gdal/trunk/gdal/MIGRATION_GUIDE.TXT
> > 
> >>> ---
> >>> This email has been checked for viruses by Avast antivirus software.
> >>> https://www.avast.com/antivirus
> >>> 
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> https://www.avast.com/antivirus

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Oct 26 11:15:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Oct 2015 19:15:00 +0100
Subject: [gdal-dev] Retrieving Sub Datasets from an RPF's A.TOC file
In-Reply-To: <c20044035970420da92f9a86bcbdb67f@NT10-MAIL13.jfti.com>
References: <DA0197C5FAB70B45A5C65D26D9CF9A1E1B4D3E7A@NAEAPAXRXM01V.nadsusea.nads.navy.mil>
 <201510261828.36849.even.rouault@spatialys.com>
 <c20044035970420da92f9a86bcbdb67f@NT10-MAIL13.jfti.com>
Message-ID: <201510261915.00168.even.rouault@spatialys.com>

Le lundi 26 octobre 2015 19:11:02, Miller, Doug a crit :
> Even,
> 
> Thanks for the response.  How is that set programmatically?  Is it with
> CPLSetConfigOption?

Yes

> 
> Thanks,
> 
> Doug
> ________________________________________
> From: Even Rouault <even.rouault at spatialys.com>
> Sent: Monday, October 26, 2015 1:28 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Miller, Doug
> Subject: Re: [gdal-dev] Retrieving Sub Datasets from an RPF's A.TOC file
> 
> Doug,
> 
> you might try defining the RPFTOC_FORCE_RGBA envirnoment variable/config
> option to YES. This should avoid GDALOpen'ing all the tiles at dataset
> creation. However the presence of all tiles will be checked via a 'stat'
> call, which can still be a potential bottleneck. That could probably be
> disabled with some code changes (the code would then assume that all
> declared tiles are effectively present on the disk).
> 
> Even
> 
> > When retrieving a sub dataset from GDAL using GDALOpen() and expressing
> > the file path as  "NITF_TOC_ENTRY:CADRG_TLM50_50K_2_18:C:/rpf/a.toc " 
> > there is a considerable delay.  This delay is acceptable if the RFP's
> > coverage is for the United States, but if the coverage is for the world
> > then it becomes a problem.
> > 
> > Is there a different way that I should be working with RPF (CADRG) within
> > the GDAL framework or should I move on to something like OSSIM?
> > 
> > Thanks for any help you can give,
> > 
> > Doug
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From damian.dixon at gmail.com  Mon Oct 26 12:04:38 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Mon, 26 Oct 2015 19:04:38 +0000
Subject: [gdal-dev] Follow on to the "ISO Metadata" post
In-Reply-To: <4A482CC5B8FE45B8AE7443795DDCC5A6@TimCrookLaptop>
References: <FAAF6EDEF3754BA091ED8F4BDA4F7781@TimCrookLaptop>
 <CAJjdW1wSNvDmpTWw3mEmvkNKEkfjsMu1qV7myNrx0GUdQOwKog@mail.gmail.com>
 <4A482CC5B8FE45B8AE7443795DDCC5A6@TimCrookLaptop>
Message-ID: <CAJjdW1zKV146q+Shh7p2zQK_-1H3k+A5PfgmB5h2VefNQnF=_g@mail.gmail.com>

My thoughts on an XML encapsulation of metadata would be (I'll leave the
exact layout and details to the experts):


<product>

   <name>name of product</name>

   <data>

     <format>vpf/shape etc...</format>

     <item key="k1" value="val1" />

     <item key="k2" value="val2" />

     <item key="kN" value="valN" />

   </data>

</product>


Problems I can see with this:


   - Should the data wrap the product?
   - How do you encapsulate XML metadata?
   - What information should be captured?

*Product*

GDAL/OGR reads data and does not identify product.


A product tends to use a carrier format such as shape, S57, VPF, GML,
etc... If you know what the product is you can derive additional
information that can be very useful in automatic styling or handling of the
data.


*Encapsulating XML metadata*

Some data formats may contain a mixture of binary and XML. Take for example
JPEG which contains both binary information and XML data such as Geo
Spatial information.


I see no point translating native XML metadata to a different XML format.
You risk losing information.


*What information should be captured?*

Some of the information can be derived from the data or the way the data is
stored on the media.


Information that can be derived from the data can be just as important as
the metadata stored in the data.


This in part refers to identifying the product, scale of the data, intended
us, provenance, use restrictions, modification dates, creation dates,
expiry dates, who created the data, etc...


The information may not be in the data itself but alongside the data in
additional files.


Derived metadata should be created at the point that the data is read to
generate the metadata. Sounds odd but consider, metadata is used in the
process of cataloging data so that you can find the data you need for your
GIS application.


*Key/Value pairs*

The keys are unique to the data and potentially to the product.


The aim should be to not lose information that is read from the data.




On 26 October 2015 at 12:59, Tim Crook <tim.crook at sympatico.ca> wrote:

> Yes, it had occurred to me that XSLT would be a flexible way of handling a
> lot of the metadata mappings.
>
> *From:* Damian Dixon <damian.dixon at gmail.com>
> *Sent:* Monday, October 26, 2015 8:36 AM
> *To:* Tim Crook <tim.crook at sympatico.ca>
> *Cc:* doug_newcomb at fws.gov ; gdal dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: Follow on to the "ISO Metadata" post
>
> Hi Tim,
>
> Personally I would not use ISO 19115-1 as an internal format.
>
> There are not a huge number of data formats/products that store metadata
> as XML out of the box. When they do store metadata it is usually specific
> to the data and data product (regardless of how the metadata is stored).
>
> There have been attempts at adding metadata alongside data products such
> as UK MOD profile of IS0 19115 (MOD profile has problems). The French
> equivalent of the MOD have for a number of years mandated a metadata format
> alongside all data products used by them (wish I could find the actual
> standard for the metadata).
>
> The biggest problem is actually mapping from data/'data product' metadata
> to the target metadata specification.
>
> Just to highlight how much a problem the mapping of fields from one
> metadata format to another is; we have been arguing off and on for more
> than a year internally about the meaning of dates and which date should be
> in which field. Two of our big customers do not agree on the meaning of
> some of the source data date fields and the mappings we have done.
>
> I believe ESRI have their own internal metadata format that they provide a
> tool to translate to other XML metadata specifications.
>
> Where I work I have been pushing a per data/'data product' format that is
> XML based that uses tag value pairs. The tags would basically be a dump of
> all available information and specific to each data/'data product'. A set
> of XSLT scripts would then translate the information to what ever metadata
> standard you wanted to use and if you needed to modify the mapping you
> could change the XSLT script for that data/'data product'.
>
> We have found that hard-coding the mapping is too costly to maintain and
> very difficult to get right.
>
> Probably not the answer you are looking for.
>
> Regards
> Damian
>
>
> On 22 October 2015 at 13:29, Tim Crook <tim.crook at sympatico.ca> wrote:
>
>> Hello Doug and Damian.
>>
>> I saw your post about ISO 19103, ISO 19115 and  ISO 19115-1. I am
>> starting to look at ticket #3549 (https://trac.osgeo.org/gdal/ticket/3549).
>> This ticket is a specific problem for metadata translation for image
>> transformations to the PCIDSK format. The ticket references JPEG and TIFF.
>>
>> The first thing I thought of was when I saw your posts was mapping the
>> XML metadata from different sources into an internal format to GDAL, then
>> passing through the information for mapping to the destination format. I
>> suppose there are some image source formats that don't use XML to store
>> their metadata, so this would require additional handling.
>>
>> I suppose the internal format to GDAL could be XML in the ISO 19115-1
>> format.
>>
>> Am I completely off base here?
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/5da952d7/attachment.html>

From dadler at adtechgeospatial.com  Mon Oct 26 12:32:12 2015
From: dadler at adtechgeospatial.com (David Adler)
Date: Mon, 26 Oct 2015 15:32:12 -0400
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <201510261912.26336.even.rouault@spatialys.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201506122350.46646.even.rouault@spatialys.com>
 <562E677F.2030608@adtechgeospatial.com>
 <201510261912.26336.even.rouault@spatialys.com>
Message-ID: <562E7FBC.4000505@adtechgeospatial.com>

Thank you for the quick response.

I've not used Python before so I'm stumbling getting the environment to 
work. Python 2.7 is installed and I am running from the autotest 
directory. It isn't obvious to me how the PYTHONPATH variable is 
supposed to be set, but I pointed it to the python directory in the gdal 
installation.

run_all.py is failing with the following:

*E:\dwacode\gdal\gdalautotest-2.0.1>set 
PYTHONPATH=e:\dwacode\gdal\swig\python

E:\dwacode\gdal\gdalautotest-2.0.1>python run_all.py -l
Traceback (most recent call last):
   File "run_all.py", line 37, in <module>
     import gdaltest
   File "pymod\gdaltest.py", line 36, in <module>
     from osgeo import gdal
   File "e:\dwacode\gdal\swig\python\osgeo\__init__.py", line 21, in 
<module>
     _gdal = swig_import_helper()
   File "e:\dwacode\gdal\swig\python\osgeo\__init__.py", line 13, in 
swig_import_
helper
     import _gdal
ImportError: No module named _gdal*


On 10/26/2015 2:12 PM, Even Rouault wrote:
> Le lundi 26 octobre 2015 18:48:47, David Adler a crit :
>> I am close to finished with this driver which was delayed significantly
>> getting access to a DB2 for z/OS test environment to verify that it
>> works across IBM DB2 platforms.
>>
>> What is the proper way to handle authorship in the source code? The DB2
>> driver is based on the MS SQL driver with significant changes to support
>> the DB2 environment. Current prologues have information like:
>>
>> * * Author:   Tamas Szekeres, szekerest at gmail.com
>>    *
>>   
>> **************************************************************************
>> **** * Copyright (c) 2010, Tamas Szekeres
>>    * Copyright (c) 2010-2012, Even Rouault <even dot rouault at
>> mines-paris dot org>*
> Put yourself as author, add yourself (or your company depending on in which
> context you contribute this) in copyright and retain copyright attributions of
> portions of code you derive from. Which can be hard to determine in practice.
> So I'd say retain Tamas ones and you can probably remove mine, which must be
> anectodical in the case of the MSSQL driver.
>
>> I've mostly been testing using the apps test_ogrsf, ogr2ogr and ogrinfo.
>>
>> Is there any documentation on the autotest system?
> Well, itself is assumed to be self documented ;-) look at a few existing
> scripts close to what you want to do and do the same...
>
>> It was interesting to
>> find that there was a 2003 DB2 test driver for DB2 V7
> You mean the ogr/ogr_db2_hack.py file ? I'm not sure if/which was the
> corresponding driver. Perhaps the generic OBDC one.
>
>> - we are now at
>> V10.5.
>>
>> Regards,
>> David



---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/fde8fe17/attachment-0001.html>

From tim.crook at sympatico.ca  Mon Oct 26 12:40:58 2015
From: tim.crook at sympatico.ca (Tim Crook)
Date: Mon, 26 Oct 2015 15:40:58 -0400
Subject: [gdal-dev] Follow on to the "ISO Metadata" post
Message-ID: <vq59inbdkvp4c7knqgp4jv32.1445888458925@email.android.com>

Yes, I understand this. Namespaces use can go a long way to prevent loss of source information while presenting information in the new target format. It can be verbose, though.

-------- Original message --------
From: Damian Dixon <damian.dixon at gmail.com> 
Date: 26-10-2015  3:04 PM  (GMT-05:00) 
To: Tim Crook <tim.crook at sympatico.ca> 
Cc: doug_newcomb at fws.gov,gdal dev <gdal-dev at lists.osgeo.org> 
Subject: Re: Follow on to the "ISO Metadata" post 
 

My thoughts on an XML encapsulation of metadata would be (I'll leave the exact layout and details to the experts):

<product>
 <name>name of product</name>
 <data>
  <format>vpf/shape etc...</format>
  <item key="k1" value="val1" />
  <item key="k2" value="val2" />
  <item key="kN" value="valN" />
 </data>
</product>

Problems I can see with this:
Should the data wrap the product?
How do you encapsulate XML metadata?
What information should be captured?
Product
GDAL/OGR reads data and does not identify product.

A product tends to use a carrier format such as shape, S57, VPF, GML, etc... If you know what the product is you can derive additional information that can be very useful in automatic styling or handling of the data.

Encapsulating XML metadata
Some data formats may contain a mixture of binary and XML. Take for example JPEG which contains both binary information and XML data such as Geo Spatial information.

I see no point translating native XML metadata to a different XML format. You risk losing information.

What information should be captured?
Some of the information can be derived from the data or the way the data is stored on the media.

Information that can be derived from the data can be just as important as the metadata stored in the data.

This in part refers to identifying the product, scale of the data, intended us, provenance, use restrictions, modification dates, creation dates, expiry dates, who created the data, etc...

The information may not be in the data itself but alongside the data in additional files.

Derived metadata should be created at the point that the data is read to generate the metadata. Sounds odd but consider, metadata is used in the process of cataloging data so that you can find the data you need for your GIS application.

Key/Value pairs
The keys are unique to the data and potentially to the product.

The aim should be to not lose information that is read from the data.



On 26 October 2015 at 12:59, Tim Crook <tim.crook at sympatico.ca> wrote:
Yes, it had occurred to me that XSLT would be a flexible way of handling a lot of the metadata mappings.

From: Damian Dixon
Sent: Monday, October 26, 2015 8:36 AM
To: Tim Crook
Cc: doug_newcomb at fws.gov ; gdal dev
Subject: Re: Follow on to the "ISO Metadata" post

Hi Tim,

Personally I would not use ISO 19115-1 as an internal format.

There are not a huge number of data formats/products that store metadata as XML out of the box. When they do store metadata it is usually specific to the data and data product (regardless of how the metadata is stored).

There have been attempts at adding metadata alongside data products such as UK MOD profile of IS0 19115 (MOD profile has problems). The French equivalent of the MOD have for a number of years mandated a metadata format alongside all data products used by them (wish I could find the actual standard for the metadata).

The biggest problem is actually mapping from data/'data product' metadata to the target metadata specification.

Just to highlight how much a problem the mapping of fields from one metadata format to another is; we have been arguing off and on for more than a year internally about the meaning of dates and which date should be in which field. Two of our big customers do not agree on the meaning of some of the source data date fields and the mappings we have done.

I believe ESRI have their own internal metadata format that they provide a tool to translate to other XML metadata specifications.

Where I work I have been pushing a per data/'data product' format that is XML based that uses tag value pairs. The tags would basically be a dump of all available  information and specific to each data/'data product'. A set of XSLT scripts would then translate the information to what ever metadata standard you wanted to use and if you needed to modify the mapping you could change the XSLT script for that data/'data product'.

We have found that hard-coding the mapping is too costly to maintain and very difficult to get right.

Probably not the answer you are looking for.

Regards
Damian


On 22 October 2015 at 13:29, Tim Crook <tim.crook at sympatico.ca> wrote:
Hello Doug and Damian.

I saw your post about ISO 19103, ISO 19115 and ISO 19115-1. I am starting to look at ticket #3549 (https://trac.osgeo.org/gdal/ticket/3549). This ticket is a    specific problem for metadata translation for image transformations to the PCIDSK format. The ticket references JPEG and TIFF.

The first thing I thought of was when I saw your posts was mapping the XML metadata from    different sources into an internal format to GDAL, then passing through the information for mapping to the destination format. I suppose there are some    image source formats that don't use XML to store their metadata, so this would require additional handling.

I suppose the internal format to GDAL could be XML in the ISO 19115-1 format.

Am I completely off base here? 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/83cd6e79/attachment-0001.html>

From even.rouault at spatialys.com  Mon Oct 26 12:54:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Oct 2015 20:54:15 +0100
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <562E7FBC.4000505@adtechgeospatial.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201510261912.26336.even.rouault@spatialys.com>
 <562E7FBC.4000505@adtechgeospatial.com>
Message-ID: <201510262054.15485.even.rouault@spatialys.com>

Le lundi 26 octobre 2015 20:32:12, David Adler a crit :
> Thank you for the quick response.
> 
> I've not used Python before so I'm stumbling getting the environment to
> work. Python 2.7 is installed and I am running from the autotest
> directory. It isn't obvious to me how the PYTHONPATH variable is
> supposed to be set, but I pointed it to the python directory in the gdal
> installation.
> 
> run_all.py is failing with the following:
> 
> *E:\dwacode\gdal\gdalautotest-2.0.1>set
> PYTHONPATH=e:\dwacode\gdal\swig\python

Should rather be PYTHONPATH=e:\dwacode\gdal\swig\python\build\lib-XXXXXXX

(replace XXXX by actual name)

This assumes you have built the bindings with "python setup.py build" in the 
e:\dwacode\gdal\swig\python directory

> 
> E:\dwacode\gdal\gdalautotest-2.0.1>python run_all.py -l
> Traceback (most recent call last):
>    File "run_all.py", line 37, in <module>
>      import gdaltest
>    File "pymod\gdaltest.py", line 36, in <module>
>      from osgeo import gdal
>    File "e:\dwacode\gdal\swig\python\osgeo\__init__.py", line 21, in
> <module>
>      _gdal = swig_import_helper()
>    File "e:\dwacode\gdal\swig\python\osgeo\__init__.py", line 13, in
> swig_import_
> helper
>      import _gdal
> ImportError: No module named _gdal*
> 
> On 10/26/2015 2:12 PM, Even Rouault wrote:
> > Le lundi 26 octobre 2015 18:48:47, David Adler a crit :
> >> I am close to finished with this driver which was delayed significantly
> >> getting access to a DB2 for z/OS test environment to verify that it
> >> works across IBM DB2 platforms.
> >> 
> >> What is the proper way to handle authorship in the source code? The DB2
> >> driver is based on the MS SQL driver with significant changes to support
> >> the DB2 environment. Current prologues have information like:
> >> 
> >> * * Author:   Tamas Szekeres, szekerest at gmail.com
> >> 
> >>    *
> >> 
> >> ************************************************************************
> >> ** **** * Copyright (c) 2010, Tamas Szekeres
> >> 
> >>    * Copyright (c) 2010-2012, Even Rouault <even dot rouault at
> >> 
> >> mines-paris dot org>*
> > 
> > Put yourself as author, add yourself (or your company depending on in
> > which context you contribute this) in copyright and retain copyright
> > attributions of portions of code you derive from. Which can be hard to
> > determine in practice. So I'd say retain Tamas ones and you can probably
> > remove mine, which must be anectodical in the case of the MSSQL driver.
> > 
> >> I've mostly been testing using the apps test_ogrsf, ogr2ogr and ogrinfo.
> >> 
> >> Is there any documentation on the autotest system?
> > 
> > Well, itself is assumed to be self documented ;-) look at a few existing
> > scripts close to what you want to do and do the same...
> > 
> >> It was interesting to
> >> find that there was a 2003 DB2 test driver for DB2 V7
> > 
> > You mean the ogr/ogr_db2_hack.py file ? I'm not sure if/which was the
> > corresponding driver. Perhaps the generic OBDC one.
> > 
> >> - we are now at
> >> V10.5.
> >> 
> >> Regards,
> >> David
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> https://www.avast.com/antivirus

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dadler at adtechgeospatial.com  Mon Oct 26 14:35:48 2015
From: dadler at adtechgeospatial.com (David Adler)
Date: Mon, 26 Oct 2015 17:35:48 -0400
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <201510262054.15485.even.rouault@spatialys.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201510261912.26336.even.rouault@spatialys.com>
 <562E7FBC.4000505@adtechgeospatial.com>
 <201510262054.15485.even.rouault@spatialys.com>
Message-ID: <562E9CB4.4090506@adtechgeospatial.com>

I'm getting closer after installing the MS compiler for Python and 
running "python setup.py build" successfully but still get a failure.

Does the usual GDAL Python user need to go through all this? I see lots 
of information and tutorials about using the GDAL Python API but haven't 
found much about setting up the environment in order to get started.

*E:\dwacode\gdal\gdalautotest-2.0.1>python run_all.py
Traceback (most recent call last):
   File "run_all.py", line 37, in <module>
     import gdaltest
   File "pymod\gdaltest.py", line 36, in <module>
     from osgeo import gdal
   File 
"e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo\__init__.py", line
  21, in <module>
     _gdal = swig_import_helper()
   File 
"e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo\__init__.py", line
  17, in swig_import_helper
     _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: DLL load failed: The specified module could not be found.

E:\dwacode\gdal\gdalautotest-2.0.1>dir %pythonpath%
  Volume in drive E is EDrive
  Volume Serial Number is 17F6-8B91

  Directory of e:\dwacode\gdal\swig\python\build\lib.win32-2.7

10/26/2015  05:24 PM    <DIR>          .
10/26/2015  05:24 PM    <DIR>          ..
06/12/2015  03:27 PM               133 gdal.py
06/12/2015  03:27 PM               148 gdalconst.py
06/12/2015  03:27 PM               130 ogr.py
10/26/2015  05:28 PM    <DIR>          osgeo
06/12/2015  03:27 PM               130 osr.py
                4 File(s)            541 bytes
                3 Dir(s)  50,715,795,456 bytes free

  Directory of e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo

10/26/2015  05:28 PM    <DIR>          .
10/26/2015  05:28 PM    <DIR>          ..
06/12/2015  03:27 PM            73,360 gdal.py
06/12/2015  03:27 PM             7,570 gdalconst.py
06/12/2015  03:27 PM                53 gdalnumeric.py
06/12/2015  03:27 PM            18,843 gdal_array.py
06/12/2015  03:27 PM           185,934 ogr.py
06/12/2015  03:27 PM            34,532 osr.py
10/26/2015  05:24 PM           308,736 _gdal.pyd
10/26/2015  05:24 PM            24,064 _gdalconst.pyd
10/26/2015  05:25 PM           394,752 _ogr.pyd
10/26/2015  05:24 PM           176,640 _osr.pyd
06/12/2015  03:27 PM               778 __init__.py
10/26/2015  05:28 PM               931 __init__.pyc
               12 File(s)      1,226,193 bytes
                2 Dir(s)  50,715,795,456 bytes free
*


---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151026/5c1cca7f/attachment.html>

From even.rouault at spatialys.com  Mon Oct 26 14:39:40 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 26 Oct 2015 22:39:40 +0100
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <562E9CB4.4090506@adtechgeospatial.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201510262054.15485.even.rouault@spatialys.com>
 <562E9CB4.4090506@adtechgeospatial.com>
Message-ID: <201510262239.41015.even.rouault@spatialys.com>

Le lundi 26 octobre 2015 22:35:48, David Adler a crit :
> I'm getting closer after installing the MS compiler for Python and
> running "python setup.py build" successfully but still get a failure.
> 
> Does the usual GDAL Python user need to go through all this? I see lots
> of information and tutorials about using the GDAL Python API but haven't
> found much about setting up the environment in order to get started.
> 
> *E:\dwacode\gdal\gdalautotest-2.0.1>python run_all.py
> Traceback (most recent call last):
>    File "run_all.py", line 37, in <module>
>      import gdaltest
>    File "pymod\gdaltest.py", line 36, in <module>
>      from osgeo import gdal
>    File
> "e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo\__init__.py", line
>   21, in <module>
>      _gdal = swig_import_helper()
>    File
> "e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo\__init__.py", line
>   17, in swig_import_helper
>      _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: DLL load failed: The specified module could not be found.

You also need to put in the PATH the directory where gdalXXX.dll is located

> 
> E:\dwacode\gdal\gdalautotest-2.0.1>dir %pythonpath%
>   Volume in drive E is EDrive
>   Volume Serial Number is 17F6-8B91
> 
>   Directory of e:\dwacode\gdal\swig\python\build\lib.win32-2.7
> 
> 10/26/2015  05:24 PM    <DIR>          .
> 10/26/2015  05:24 PM    <DIR>          ..
> 06/12/2015  03:27 PM               133 gdal.py
> 06/12/2015  03:27 PM               148 gdalconst.py
> 06/12/2015  03:27 PM               130 ogr.py
> 10/26/2015  05:28 PM    <DIR>          osgeo
> 06/12/2015  03:27 PM               130 osr.py
>                 4 File(s)            541 bytes
>                 3 Dir(s)  50,715,795,456 bytes free
> 
>   Directory of e:\dwacode\gdal\swig\python\build\lib.win32-2.7\osgeo
> 
> 10/26/2015  05:28 PM    <DIR>          .
> 10/26/2015  05:28 PM    <DIR>          ..
> 06/12/2015  03:27 PM            73,360 gdal.py
> 06/12/2015  03:27 PM             7,570 gdalconst.py
> 06/12/2015  03:27 PM                53 gdalnumeric.py
> 06/12/2015  03:27 PM            18,843 gdal_array.py
> 06/12/2015  03:27 PM           185,934 ogr.py
> 06/12/2015  03:27 PM            34,532 osr.py
> 10/26/2015  05:24 PM           308,736 _gdal.pyd
> 10/26/2015  05:24 PM            24,064 _gdalconst.pyd
> 10/26/2015  05:25 PM           394,752 _ogr.pyd
> 10/26/2015  05:24 PM           176,640 _osr.pyd
> 06/12/2015  03:27 PM               778 __init__.py
> 10/26/2015  05:28 PM               931 __init__.pyc
>                12 File(s)      1,226,193 bytes
>                 2 Dir(s)  50,715,795,456 bytes free
> *
> 
> 
> ---
> This email has been checked for viruses by Avast antivirus software.
> https://www.avast.com/antivirus

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From silyko at gmail.com  Mon Oct 26 16:04:28 2015
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Tue, 27 Oct 2015 00:04:28 +0100
Subject: [gdal-dev] netCDF signed nodata value
Message-ID: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>

Hello list,

   Just observed a puzzling behaviour of the netCDF driver. When creating a
netCDF dataset of Byte type, the netCDF driver seems to interpret the
nodata value as a signed byte.
 For example a nodata value assigned with -a_nodata 200, will become -56.
Of course one can work around this by simply casting the nodata value (as
e.g. returned by band.GetNoDataValue()) to an unsigned byte.

A simple example:

>gdalinfo --version
GDAL 1.11.2, released 2015/02/10
>gdal_translate -of netCDF -a_nodata 200 something.tif something.nc
>gdalinfo something.nc
Driver: netCDF/Network Common Data Format
Files: something.nc
Size is 10, 10
Coordinate System is `'
Origin = (0.000000000000000,10.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  Band1#_FillValue=-56
  Band1#_Unsigned=true
  Band1#long_name=GDAL Band Number 1
  Band1#valid_range={0,255}
  lat#long_name=latitude
  lat#standard_name=latitude
  lat#units=degrees_north
  lon#long_name=longitude
  lon#standard_name=longitude
  lon#units=degrees_east
  NC_GLOBAL#Conventions=CF-1.5
  NC_GLOBAL#GDAL=GDAL 1.11.2, released 2015/02/10
  NC_GLOBAL#history=Mon Oct 26 23:58:09 2015: GDAL CreateCopy( something.nc,
... )
Corner Coordinates:
Upper Left  (   0.0000000,  10.0000000)
Lower Left  (   0.0000000,   0.0000000)
Upper Right (  10.0000000,  10.0000000)
Lower Right (  10.0000000,   0.0000000)
Center      (   5.0000000,   5.0000000)
Band 1 Block=10x1 Type=Byte, ColorInterp=Undefined
  NoData Value=-56
  Metadata:
    _FillValue=-56
    _Unsigned=true
    long_name=GDAL Band Number 1
    NETCDF_VARNAME=Band1
    valid_range={0,255}

Cheers,
Simon Kokkendorff, DMI
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151027/b18bbbe5/attachment.html>

From issworld2000 at yahoo.com  Tue Oct 27 08:19:30 2015
From: issworld2000 at yahoo.com (Djordje Spasic)
Date: Tue, 27 Oct 2015 15:19:30 +0000 (UTC)
Subject: [gdal-dev] using gdal on ironpython 2.7
References: <2129996913.3859546.1445959170452.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <2129996913.3859546.1445959170452.JavaMail.yahoo@mail.yahoo.com>

Hello to GDAL community,

Lately I have been trying to use the SRTM 3 arc second elevation data in a form of ASCII grid (.asc file) downloaded freely from opentopography.org.

The problem is that, decimal degrees for .asc files downloaded from opentopography.org are unprojected.
I have been told that with GDAL python module it is very easy to project the decimal degrees to Mercator:

gdalwarp -s_srs EPSG:4326 -t_srs EPSG:32631 -r cubic Barcelona_original.asc Barcelona_projected_to_Mercator.tif

Then we just need to convert the .tif file to .asc:
gdal_translate -of AAIGrid Barcelona_projected_to_Mercator.tif Barcelona_projected_to_Mercator.asc

Maybe there is a way of doing this in just one line instead of two, I do no not know.

There is a problem: I am using a Rhino 5 application, which is shipped with IronPython 2.7, not cPython. I did not succeed in installing the GDAL python module into my IronPython.

Is there a way to install GDAL into the IronPython?I googled andfound this topic, where it says I need to use C# bindings to import GDAL into IronPython. Can anyone show an example of this?

If not, can in some way the upper two "gdalwarp" and "gdal_translate" methods be replicated in IronPython?
Thank you.

Kind regards,
Djordje Spasic
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151027/e4df353d/attachment-0001.html>

From nicolas.cadieux at archeotec.ca  Tue Oct 27 08:36:33 2015
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Tue, 27 Oct 2015 11:36:33 -0400
Subject: [gdal-dev] using gdal on ironpython 2.7
In-Reply-To: <2129996913.3859546.1445959170452.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <48366c7a-ae48-4e49-854a-43ee59e5b33e@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151027/e9f42e67/attachment.html>

From kyle at pobox.com  Tue Oct 27 08:54:56 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 27 Oct 2015 09:54:56 -0600
Subject: [gdal-dev] netCDF signed nodata value
In-Reply-To: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>
References: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>
Message-ID: <CAJ0mEz3A8hJ_ikcegytoZM3AY1Y98jC_sRaC=9SQqudUQWAd0Q@mail.gmail.com>

Simon,

On Mon, Oct 26, 2015 at 5:04 PM, Simon Lyngby Kokkendorff
<silyko at gmail.com> wrote:
> Hello list,
>
>    Just observed a puzzling behaviour of the netCDF driver. When creating a
> netCDF dataset of Byte type, the netCDF driver seems to interpret the nodata
> value as a signed byte.
>  For example a nodata value assigned with -a_nodata 200, will become -56. Of
> course one can work around this by simply casting the nodata value (as e.g.
> returned by band.GetNoDataValue()) to an unsigned byte.

It appears the driver has a sort of data type mis-match with no data
and the band type.  A work around, if available, is to set FORMAT=NC4
as a creation option.  I am not sure if it is in gdal or the netcdf
library at this point.

>
> A simple example:
>
>>gdalinfo --version
> GDAL 1.11.2, released 2015/02/10
>>gdal_translate -of netCDF -a_nodata 200 something.tif something.nc
>>gdalinfo something.nc
> Driver: netCDF/Network Common Data Format
> Files: something.nc
> Size is 10, 10
> Coordinate System is `'
> Origin = (0.000000000000000,10.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   Band1#_FillValue=-56
>   Band1#_Unsigned=true
>   Band1#long_name=GDAL Band Number 1
>   Band1#valid_range={0,255}
>   lat#long_name=latitude
>   lat#standard_name=latitude
>   lat#units=degrees_north
>   lon#long_name=longitude
>   lon#standard_name=longitude
>   lon#units=degrees_east
>   NC_GLOBAL#Conventions=CF-1.5
>   NC_GLOBAL#GDAL=GDAL 1.11.2, released 2015/02/10
>   NC_GLOBAL#history=Mon Oct 26 23:58:09 2015: GDAL CreateCopy( something.nc,
> ... )
> Corner Coordinates:
> Upper Left  (   0.0000000,  10.0000000)
> Lower Left  (   0.0000000,   0.0000000)
> Upper Right (  10.0000000,  10.0000000)
> Lower Right (  10.0000000,   0.0000000)
> Center      (   5.0000000,   5.0000000)
> Band 1 Block=10x1 Type=Byte, ColorInterp=Undefined
>   NoData Value=-56
>   Metadata:
>     _FillValue=-56
>     _Unsigned=true
>     long_name=GDAL Band Number 1
>     NETCDF_VARNAME=Band1
>     valid_range={0,255}
>
> Cheers,
> Simon Kokkendorff, DMI
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From even.rouault at spatialys.com  Tue Oct 27 10:08:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Oct 2015 18:08:50 +0100
Subject: [gdal-dev] netCDF signed nodata value
In-Reply-To: <CAJ0mEz3A8hJ_ikcegytoZM3AY1Y98jC_sRaC=9SQqudUQWAd0Q@mail.gmail.com>
References: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>
 <CAJ0mEz3A8hJ_ikcegytoZM3AY1Y98jC_sRaC=9SQqudUQWAd0Q@mail.gmail.com>
Message-ID: <201510271808.50806.even.rouault@spatialys.com>

Le mardi 27 octobre 2015 16:54:56, Kyle Shannon a crit :
> Simon,
> 
> On Mon, Oct 26, 2015 at 5:04 PM, Simon Lyngby Kokkendorff
> 
> <silyko at gmail.com> wrote:
> > Hello list,
> > 
> >    Just observed a puzzling behaviour of the netCDF driver. When creating
> >    a
> > 
> > netCDF dataset of Byte type, the netCDF driver seems to interpret the
> > nodata value as a signed byte.
> > 
> >  For example a nodata value assigned with -a_nodata 200, will become -56.
> >  Of
> > 
> > course one can work around this by simply casting the nodata value (as
> > e.g. returned by band.GetNoDataValue()) to an unsigned byte.
> 
> It appears the driver has a sort of data type mis-match with no data
> and the band type.  A work around, if available, is to set FORMAT=NC4
> as a creation option.  I am not sure if it is in gdal or the netcdf
> library at this point.

My understanding is netCDF 3 only supports signed byte and GDAL uses a special 
metadata item _Unsigned=True to correct the interpretation. But it failed to 
use it to interpret correctly the nodata value. Should be fixed by 
https://trac.osgeo.org/gdal/ticket/6175 (happy to have feedback from anyone 
more knowleagable)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Oct 27 11:23:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 27 Oct 2015 19:23:57 +0100
Subject: [gdal-dev] Amazon S3 virtual file system /vsis3/ and
	/vsis3_streaming/
Message-ID: <201510271923.57888.even.rouault@spatialys.com>

Hi,

Just to mention that trunk has received 2 new virtual file systems
/vsis3/ and /vsis3_streaming/ to handle files stored on Amazon S3.

They are specializations of well known /vsicurl/ and /vsicurl_streaming/
to deal with S3 authentication and other particularities. In addition to
reading, /vsis3/ supports sequential writing.

For more details, quoting the docs:

/**
 * \brief Install /vsis3/ Amazon S3 file system handler (requires libcurl)
 *
 * A special file handler is installed that allows on-the-fly random reading of files
 * available in AWS S3 buckets, without prior download of the entire file.
 * It also allows sequential writing of files (no seeks or read operations are then
 * allowed).
 *
 * Recognized filenames are of the form /vsis3/bucket/key where
 * bucket is the name of the S3 bucket and key the S3 object "key", i.e.
 * a filename potentially containing subdirectories.
 *
 * Partial downloads are done with a 16 KB granularity by default.
 * If the driver detects sequential reading
 * it will progressively increase the chunk size up to 2 MB to improve download
 * performance.
 *
 * The AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID configuration options *must* be
 * set.
 * The AWS_REGION configuration option may be set to one of the supported
 * <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region">S3 regions</a>
 * and defaults to 'us-east-1'
 * The AWS_S3_ENDPOINT configuration option defaults to s3.amazonaws.com.
 *
 * The GDAL_HTTP_PROXY, GDAL_HTTP_PROXYUSERPWD and GDAL_PROXY_AUTH configuration options can be
 * used to define a proxy server. The syntax to use is the one of Curl CURLOPT_PROXY,
 * CURLOPT_PROXYUSERPWD and CURLOPT_PROXYAUTH options.
 *
 * On reading, the file can be cached in RAM by setting the configuration option
 * VSI_CACHE to TRUE. The cache size defaults to 25 MB, but can be modified by setting
 * the configuration option VSI_CACHE_SIZE (in bytes).
 *
 * On writing, the file is uploaded using the S3 <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/mpUploadInitiate.html">multipart upload API</a>.
 * The size of chunks is set to 50 MB by default, allowing creating files up to
 * 500 GB (10000 parts of 50 MB each). If larger files are needed, then increase the
 * value of the VSIS3_CHUNK_SIZE config option to a larger value (expressed in MB).
 * In case the process is killed and the file not properly closed, the multipart upload
 * will remain open, causing Amazon to charge you for the parts storage. You'll have to
 * abort yourself with other means such "ghost" uploads
 * (e.g. with the <a href="http://s3tools.org/s3cmd">s3cmd</a> utility)
 * For files smaller than the chunk size, a simple PUT request is used instead
 * of the multipart upload API.



/**
 * \brief Install /vsis3_streaming/ Amazon S3 file system handler (requires libcurl)
 *
 * A special file handler is installed that allows on-the-fly sequential reading of files
 * streamed from AWS S3 buckets without prior download of the entire file.
 *
 * Recognized filenames are of the form /vsis3_streaming/bucket/key where
 * bucket is the name of the S3 bucket and resource the S3 object "key", i.e.
 * a filename potentially containing subdirectories.
 *
 * The AWS_SECRET_ACCESS_KEY and AWS_ACCESS_KEY_ID configuration options *must* be
 * set.
 * The AWS_REGION configuration option may be set to one of the supported
 * <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#s3_region">S3 regions</a>
 * and defaults to 'us-east-1'
 * The AWS_S3_ENDPOINT configuration option defaults to s3.amazonaws.com.
 *
 * The GDAL_HTTP_PROXY, GDAL_HTTP_PROXYUSERPWD and GDAL_PROXY_AUTH configuration options can be
 * used to define a proxy server. The syntax to use is the one of Curl CURLOPT_PROXY,
 * CURLOPT_PROXYUSERPWD and CURLOPT_PROXYAUTH options.
 *
 * The file can be cached in RAM by setting the configuration option
 * VSI_CACHE to TRUE. The cache size defaults to 25 MB, but can be modified by setting
 * the configuration option VSI_CACHE_SIZE (in bytes).
 *


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From silyko at gmail.com  Tue Oct 27 13:03:12 2015
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Tue, 27 Oct 2015 21:03:12 +0100
Subject: [gdal-dev] netCDF signed nodata value
In-Reply-To: <201510271808.50806.even.rouault@spatialys.com>
References: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>
 <CAJ0mEz3A8hJ_ikcegytoZM3AY1Y98jC_sRaC=9SQqudUQWAd0Q@mail.gmail.com>
 <201510271808.50806.even.rouault@spatialys.com>
Message-ID: <CANzGYpSGGn9vTt_YaRjwUCZZOrgoL1nJkJJqp4i60ysW77zCYA@mail.gmail.com>

Thanks for the tips Kyle and Even and for the quick fix!
Not a big netCDF user myself, but have noticed that it seems to be the
standard format for many of my colleagues who work in climatology. So good
to get this fixed!

Cheers,
Simon


On Tue, Oct 27, 2015 at 6:08 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 27 octobre 2015 16:54:56, Kyle Shannon a crit :
> > Simon,
> >
> > On Mon, Oct 26, 2015 at 5:04 PM, Simon Lyngby Kokkendorff
> >
> > <silyko at gmail.com> wrote:
> > > Hello list,
> > >
> > >    Just observed a puzzling behaviour of the netCDF driver. When
> creating
> > >    a
> > >
> > > netCDF dataset of Byte type, the netCDF driver seems to interpret the
> > > nodata value as a signed byte.
> > >
> > >  For example a nodata value assigned with -a_nodata 200, will become
> -56.
> > >  Of
> > >
> > > course one can work around this by simply casting the nodata value (as
> > > e.g. returned by band.GetNoDataValue()) to an unsigned byte.
> >
> > It appears the driver has a sort of data type mis-match with no data
> > and the band type.  A work around, if available, is to set FORMAT=NC4
> > as a creation option.  I am not sure if it is in gdal or the netcdf
> > library at this point.
>
> My understanding is netCDF 3 only supports signed byte and GDAL uses a
> special
> metadata item _Unsigned=True to correct the interpretation. But it failed
> to
> use it to interpret correctly the nodata value. Should be fixed by
> https://trac.osgeo.org/gdal/ticket/6175 (happy to have feedback from
> anyone
> more knowleagable)
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151027/ccb6c0d6/attachment.html>

From ari.jolma at gmail.com  Wed Oct 28 02:07:09 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 28 Oct 2015 11:07:09 +0200
Subject: [gdal-dev] GDALGrid
Message-ID: <5630903D.8020504@gmail.com>

The documentation of GDALGrid in gdal_utils.h claims it to

" Converts raster data between different formats."

Although it is the same as gdal_grid, which creates regular grid from 
the scattered data, i.e., vector data source.

It seems to work, also from the bindings, if one uses a vector data 
source as the source dataset. That requires using OGRDataSourceShadow in 
the definition of the method in gdal.i & definition of 
OGRDataSourceShadow with typedef.

I can fix the bindings but I rather not touch gdal_grid_lib.cpp - it 
also has the ugly ^M since it is in DOS text format. I think its 
svn:mime-type needs to be set or something.

Best,

Ari

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151028/ebc130f3/attachment.html>

From even.rouault at spatialys.com  Wed Oct 28 02:40:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Oct 2015 10:40:29 +0100
Subject: [gdal-dev] GDALGrid
In-Reply-To: <5630903D.8020504@gmail.com>
References: <5630903D.8020504@gmail.com>
Message-ID: <201510281040.29347.even.rouault@spatialys.com>

Le mercredi 28 octobre 2015 10:07:09, Ari Jolma a crit :
> The documentation of GDALGrid in gdal_utils.h claims it to
> 
> " Converts raster data between different formats."

Copy&paste from GDALTranslate(). Fixed

> 
> Although it is the same as gdal_grid, which creates regular grid from
> the scattered data, i.e., vector data source.
> 
> It seems to work, also from the bindings, if one uses a vector data
> source as the source dataset. That requires using OGRDataSourceShadow in
> the definition of the method in gdal.i & definition of
> OGRDataSourceShadow with typedef.

Following the unification, I decided to use only GDALDatasetH even when a 
vector datasource is expected/output. So you may have to use GDALOpenEx() to 
open the vector dataset so as to get a GDALDatasetH instead of the legacy 
OGRDataSourceH.

Or perhaps we could have some tricks at the SWIG level so as to have the 
possibility to use a OGRDataSourceShadow as well, but I wasn't brave enough to 
try that so I happily let it to you if you want.

> 
> I can fix the bindings but I rather not touch gdal_grid_lib.cpp - it
> also has the ugly ^M since it is in DOS text format. I think its
> svn:mime-type needs to be set or something.

Just converted it to Unix eol.

> 
> Best,
> 
> Ari

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Wed Oct 28 02:51:52 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 28 Oct 2015 11:51:52 +0200
Subject: [gdal-dev] GDALGrid
In-Reply-To: <201510281040.29347.even.rouault@spatialys.com>
References: <5630903D.8020504@gmail.com>
 <201510281040.29347.even.rouault@spatialys.com>
Message-ID: <56309AB8.2080900@gmail.com>

On 28.10.2015 11:40, Even Rouault wrote:
>
> Following the unification, I decided to use only GDALDatasetH even when a
> vector datasource is expected/output. So you may have to use GDALOpenEx() to
> open the vector dataset so as to get a GDALDatasetH instead of the legacy
> OGRDataSourceH.
>
> Or perhaps we could have some tricks at the SWIG level so as to have the
> possibility to use a OGRDataSourceShadow as well, but I wasn't brave enough to
> try that so I happily let it to you if you want.

The same thing is in Rasterize, which is clearly also only for vector 
datasources.

I know the unification below but it is not in the bindings. To me it 
looks very simple and working solution to just add

typedef void OGRDataSourceShadow;

into gdal.i - similarly as there is already

typedef void OGRLayerShadow;

etc.

and then use OGRDataSourceShadow in those methods, which clearly expect 
vector datasources.

Making the unification in bindings seems much bigger task and I'd 
postpone it.

How is it in Python bindings? I don't understand how they can be used to 
run Grid without this change.

BTW, I'm making these utilities as methods in the Perl bindings since 
Rasterize is clearly a method for OGR DataSource class and not a 
non-object-oriented subroutine.

Best,

Ari


From even.rouault at spatialys.com  Wed Oct 28 03:00:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 28 Oct 2015 11:00:26 +0100
Subject: [gdal-dev] GDALGrid
In-Reply-To: <56309AB8.2080900@gmail.com>
References: <5630903D.8020504@gmail.com>
 <201510281040.29347.even.rouault@spatialys.com> <56309AB8.2080900@gmail.com>
Message-ID: <201510281100.26832.even.rouault@spatialys.com>

Le mercredi 28 octobre 2015 10:51:52, Ari Jolma a crit :
> On 28.10.2015 11:40, Even Rouault wrote:
> > Following the unification, I decided to use only GDALDatasetH even when a
> > vector datasource is expected/output. So you may have to use GDALOpenEx()
> > to open the vector dataset so as to get a GDALDatasetH instead of the
> > legacy OGRDataSourceH.
> > 
> > Or perhaps we could have some tricks at the SWIG level so as to have the
> > possibility to use a OGRDataSourceShadow as well, but I wasn't brave
> > enough to try that so I happily let it to you if you want.
> 
> The same thing is in Rasterize, which is clearly also only for vector
> datasources.
> 
> I know the unification below but it is not in the bindings. 

Well, GDALDatasetShadow has all methods related to Layers, so you can use it 
as a complete replacement of OGRDatasetShadow

> To me it
> looks very simple and working solution to just add
> 
> typedef void OGRDataSourceShadow;
> 
> into gdal.i - similarly as there is already
> 
> typedef void OGRLayerShadow;
> 
> etc.
> 
> and then use OGRDataSourceShadow in those methods, which clearly expect
> vector datasources.

Introducing more - exclusive - uses of OGRDataSource wouldn't really be 
consistant with the unification.
Perhaps as additional possibilities if there's a way of doing so.

> 
> Making the unification in bindings seems much bigger task and I'd
> postpone it.
> 
> How is it in Python bindings? I don't understand how they can be used to
> run Grid without this change.

Well, just use gdal.OpenEx('bla', gdal.OF_VECTOR) and you're done : see 
https://svn.osgeo.org/gdal/trunk/autotest/utilities/test_ogr2ogr_lib.py or  
https://svn.osgeo.org/gdal/trunk/autotest/utilities/test_gdal_rasterize_lib.py

> 
> BTW, I'm making these utilities as methods in the Perl bindings since
> Rasterize is clearly a method for OGR DataSource class and not a
> non-object-oriented subroutine.
> 
> Best,
> 
> Ari

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Wed Oct 28 04:12:26 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 28 Oct 2015 13:12:26 +0200
Subject: [gdal-dev] GDALGrid
In-Reply-To: <201510281100.26832.even.rouault@spatialys.com>
References: <5630903D.8020504@gmail.com>
 <201510281040.29347.even.rouault@spatialys.com> <56309AB8.2080900@gmail.com>
 <201510281100.26832.even.rouault@spatialys.com>
Message-ID: <5630AD9A.1010209@gmail.com>


On 28.10.2015 12:00, Even Rouault wrote:
> Introducing more - exclusive - uses of OGRDataSource wouldn't really be
> consistant with the unification.
> Perhaps as additional possibilities if there's a way of doing so.

ok, I'll add a method to force a OGR data source object into a GDAL 
dataset into the Perl bindings, which I can use in cases like this.

I guess unifying the classes in the bindings is something to be done in 
the future.

Ari


From silyko at gmail.com  Wed Oct 28 04:35:01 2015
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed, 28 Oct 2015 12:35:01 +0100
Subject: [gdal-dev] netCDF signed nodata value
In-Reply-To: <CANzGYpSGGn9vTt_YaRjwUCZZOrgoL1nJkJJqp4i60ysW77zCYA@mail.gmail.com>
References: <CANzGYpQJMarbJtEqRT76OKD2pqvLFUDAwCM8NA63yW6rYvS32A@mail.gmail.com>
 <CAJ0mEz3A8hJ_ikcegytoZM3AY1Y98jC_sRaC=9SQqudUQWAd0Q@mail.gmail.com>
 <201510271808.50806.even.rouault@spatialys.com>
 <CANzGYpSGGn9vTt_YaRjwUCZZOrgoL1nJkJJqp4i60ysW77zCYA@mail.gmail.com>
Message-ID: <CANzGYpS4VY5HNiWptBvaQYYbQgi4Jtong0-Fw=Taw8LMZ-SmKg@mail.gmail.com>

I can also confirm that with -co FORMAT=NC4 everything seems to work as
expected, also with other netCDF readers...
Thanks again,
Simon


On Tue, Oct 27, 2015 at 9:03 PM, Simon Lyngby Kokkendorff <silyko at gmail.com>
wrote:

> Thanks for the tips Kyle and Even and for the quick fix!
> Not a big netCDF user myself, but have noticed that it seems to be the
> standard format for many of my colleagues who work in climatology. So good
> to get this fixed!
>
> Cheers,
> Simon
>
>
> On Tue, Oct 27, 2015 at 6:08 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Le mardi 27 octobre 2015 16:54:56, Kyle Shannon a crit :
>> > Simon,
>> >
>> > On Mon, Oct 26, 2015 at 5:04 PM, Simon Lyngby Kokkendorff
>> >
>> > <silyko at gmail.com> wrote:
>> > > Hello list,
>> > >
>> > >    Just observed a puzzling behaviour of the netCDF driver. When
>> creating
>> > >    a
>> > >
>> > > netCDF dataset of Byte type, the netCDF driver seems to interpret the
>> > > nodata value as a signed byte.
>> > >
>> > >  For example a nodata value assigned with -a_nodata 200, will become
>> -56.
>> > >  Of
>> > >
>> > > course one can work around this by simply casting the nodata value (as
>> > > e.g. returned by band.GetNoDataValue()) to an unsigned byte.
>> >
>> > It appears the driver has a sort of data type mis-match with no data
>> > and the band type.  A work around, if available, is to set FORMAT=NC4
>> > as a creation option.  I am not sure if it is in gdal or the netcdf
>> > library at this point.
>>
>> My understanding is netCDF 3 only supports signed byte and GDAL uses a
>> special
>> metadata item _Unsigned=True to correct the interpretation. But it failed
>> to
>> use it to interpret correctly the nodata value. Should be fixed by
>> https://trac.osgeo.org/gdal/ticket/6175 (happy to have feedback from
>> anyone
>> more knowleagable)
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151028/41f34a3b/attachment-0001.html>

From even.rouault at spatialys.com  Thu Oct 29 09:51:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Oct 2015 17:51:17 +0100
Subject: [gdal-dev] Warning-free builds :-)
Message-ID: <201510291751.17604.even.rouault@spatialys.com>

Hi,

We've achieved an important and symbolic milestone that will mean something to 
developers: most of our (Unix) builds are warning free (for the library + 
utilities) ! That is they pass with -Wall -Wextra -Werror compiler options. 
Not bad for a ~ 400 K effective line of code project ( ~ 800 K, with white 
lines + comments).

So celebrate that and please keep it that way now ! And thanks to all those 
who have helped achieving this.

More specifically ./configure will enable -Wall -Wextra and other warnings (-
Winit-self -Wunused-parameter -Wmissing-prototypes -Wmissing-declarations -
Wformat -Werror=format-security -Wno-format-nonliteral -Werror=vla -
Werror=declaration-after-statement  -Wno-clobbered -Wunused-private-field), but 
*not* with -Werror (-Werror means that any warning will be interpreted as an 
error and fail the build).

I haven't dared enabling -Werror by default due to the almost infinite possible 
configurations (choice of dependencies x choice of compilers) that make it 
impossible to be sure there isn't one that will throw some warning. I was 
wondering if we couldn't have a --enable-werror option that could default to 
yes for --enable-debug builds (and no for regular builds), so that developers 
have no excuse to commit warnings ?

Trick to use -Werror: "make USER_DEFS=-Werror". You can also do CPPFLAGS=-
Werror ./configure , but that may interfere with the detection of some 
libraries.

Most Travis CI builds have already -Werror enabled :
- the default one : https://travis-ci.org/OSGeo/gdal (thus github pull 
requests will be affected by that too)
- and at https://travis-ci.org/rouault/gdal_coverage/builds :
	* trunk_with_coverage
	* python3
	* trunk_travis_macosx
	* trunk_mingw
	* trunk_mingw_w64
	* trunk_android
	* trunk_gcc4.8_stdc11
   so everything but trunk_gcc5.2_sanitize since gcc 5.2 warns about our own 
deprecated symbols for some reason

So even if your configuration is warning free, it is important to keep an eye 
on the above links (or IRC bot messages).

Making sure we don't hit warnings is important since it can save bugs in 
practice. For example, the class of bugs to which one reported yesterday 
(https://trac.osgeo.org/gdal/ticket/6183) belongs to will no longer be 
possible with the added -Wmissing-prototypes and -Wmissing-declarations.

Even

PS: I had issues with most proprietary SDK whose headers are not warning free. 
A trick is to create a .h wrapper on top of which you put this before 
including the SDK headers, so as to shut all warnings for the rest of the file 
:

#ifdef HAVE_GCC_SYSTEM_HEADER
#pragma GCC system_header
#endif

(will work too with clang)

See 
https://svn.osgeo.org/gdal/trunk/gdal/ogr/ogrsf_frmts/filegdb/filegdbsdk_headers.h

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdt at ir.bbn.com  Thu Oct 29 09:59:52 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Thu, 29 Oct 2015 12:59:52 -0400
Subject: [gdal-dev] Warning-free builds :-)
In-Reply-To: <201510291751.17604.even.rouault@spatialys.com> (Even Rouault's
 message of "Thu, 29 Oct 2015 17:51:17 +0100")
References: <201510291751.17604.even.rouault@spatialys.com>
Message-ID: <rmioafhehkn.fsf@fnord.ir.bbn.com>


Even Rouault <even.rouault at spatialys.com> writes:

> Hi,
>
> We've achieved an important and symbolic milestone that will mean something to 
> developers: most of our (Unix) builds are warning free (for the library + 
> utilities) ! That is they pass with -Wall -Wextra -Werror compiler options. 
> Not bad for a ~ 400 K effective line of code project ( ~ 800 K, with white 
> lines + comments).

On which platforms and which CPU types?  Hopefully this includes a build
on each of the 4 common BSDs and Illumos and perhaps OS X, and not only
i386 and amd64 but also a few things like sparc64 and arm.

(The general notion of cleaning up code that causes warnings is great; I
don't mean to suggest otherwise.)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20151029/afebe953/attachment.sig>

From even.rouault at spatialys.com  Thu Oct 29 10:08:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Oct 2015 18:08:12 +0100
Subject: [gdal-dev] Warning-free builds :-)
In-Reply-To: <rmioafhehkn.fsf@fnord.ir.bbn.com>
References: <201510291751.17604.even.rouault@spatialys.com>
 <rmioafhehkn.fsf@fnord.ir.bbn.com>
Message-ID: <201510291808.12742.even.rouault@spatialys.com>

Le jeudi 29 octobre 2015 17:59:52, Greg Troxel a crit :
> Even Rouault <even.rouault at spatialys.com> writes:
> > Hi,
> > 
> > We've achieved an important and symbolic milestone that will mean
> > something to developers: most of our (Unix) builds are warning free (for
> > the library + utilities) ! That is they pass with -Wall -Wextra -Werror
> > compiler options. Not bad for a ~ 400 K effective line of code project (
> > ~ 800 K, with white lines + comments).
> 
> On which platforms and which CPU types?  

Some answers at the bottom of my first email

> Hopefully this includes a build
> on each of the 4 common BSDs and Illumos and perhaps OS X, and not only
> i386 and amd64 but also a few things like sparc64 and arm.

OS X as mentionned in my email, but I haven't tested other BSDs or Illumos (do 
people actually still use that beast...). Anyway people are welcome to test 
and provide fixes if there found issues. The Android build is a ARM one.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jcristofoletti at diamondvisionics.com  Thu Oct 29 12:36:19 2015
From: jcristofoletti at diamondvisionics.com (jcristofoletti)
Date: Thu, 29 Oct 2015 12:36:19 -0700 (PDT)
Subject: [gdal-dev] Setting vertical units in a raster
Message-ID: <1446147379131-5233414.post@n6.nabble.com>

Hey,
So I am exporting a raster and would like to set the VerticalUnitsGeoKey to
feet. I have tried to use the SetUnitType( const char * ) member function of
GDALRasterBand without success. I have looked at the internal code the
driver uses to set this flag, but would like to avoid having to reopen the
file to do this after I have finished the export. Is there any standard
wayto set GeoTIFF tags?
-Jack



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Setting-vertical-units-in-a-raster-tp5233414.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Oct 29 13:03:20 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 29 Oct 2015 21:03:20 +0100
Subject: [gdal-dev] Setting vertical units in a raster
In-Reply-To: <1446147379131-5233414.post@n6.nabble.com>
References: <1446147379131-5233414.post@n6.nabble.com>
Message-ID: <201510292103.20108.even.rouault@spatialys.com>

Jack,

> Hey,
> So I am exporting a raster and would like to set the VerticalUnitsGeoKey to
> feet. I have tried to use the SetUnitType( const char * ) member function
> of GDALRasterBand without success.

SetUnitType() will write a GDAL metadata in the TIFFTAG_GDAL_METADATA XML tag

> I have looked at the internal code the
> driver uses to set this flag, but would like to avoid having to reopen the
> file to do this after I have finished the export. Is there any standard
> wayto set GeoTIFF tags?

See the following Python script for an example :

from osgeo import gdal,osr

sr = osr.SpatialReference()
sr.SetFromUserInput("""COMPD_CS["unknown",
PROJCS["WGS 84 / UTM zone 11N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","32611"]],
VERT_CS["Unnamed",
    VERT_DATUM["North American Vertical Datum 1988",2005,
        AUTHORITY["EPSG","5103"]],
    UNIT["foot",0.3048,AUTHORITY["EPSG","9002"]],
    AXIS["Up",UP]]]""")

ds = gdal.GetDriverByName('GTiff').Create('/vsimem/tiff_srs_compd_cs.tif',1,1)
ds.SetProjection(sr.ExportToWkt())
ds = None

# Check back
gdal.SetConfigOption('GTIFF_REPORT_COMPD_CS','YES')
ds = gdal.Open('/vsimem/tiff_srs_compd_cs.tif')
wkt = ds.GetProjectionRef()
gdal.SetConfigOption('GTIFF_REPORT_COMPD_CS',None)
print(wkt)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jcristofoletti at diamondvisionics.com  Thu Oct 29 12:59:58 2015
From: jcristofoletti at diamondvisionics.com (jcristofoletti)
Date: Thu, 29 Oct 2015 12:59:58 -0700 (PDT)
Subject: [gdal-dev] Setting vertical units in a raster
In-Reply-To: <201510292103.20108.even.rouault@spatialys.com>
References: <1446147379131-5233414.post@n6.nabble.com>
 <201510292103.20108.even.rouault@spatialys.com>
Message-ID: <1446148798977-5233416.post@n6.nabble.com>

Probably should have specified that I'm working in c++. Would the SetMetaData
function call accomplish this goal (with VERT_DATUM as the pszName) ? Thanks
for the help.
-Jack



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Setting-vertical-units-in-a-raster-tp5233414p5233416.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Oct 30 06:46:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Oct 2015 14:46:05 +0100
Subject: [gdal-dev] Check your email is valid in Trac preferences
Message-ID: <201510301446.05703.even.rouault@spatialys.com>

Hi,

Just a reminder as a number of people with a Trac account have apparently not  
yet updated their preferences to register their email (especially I think for 
people with accounts older than a few months, before the Trac software 
upgrade)

So check https://trac.osgeo.org/gdal/prefs

If you don't do it, you will not get notified on comments in tickets.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dadler at adtechgeospatial.com  Fri Oct 30 07:01:39 2015
From: dadler at adtechgeospatial.com (David Adler)
Date: Fri, 30 Oct 2015 10:01:39 -0400
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <201510262239.41015.even.rouault@spatialys.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201510262054.15485.even.rouault@spatialys.com>
 <562E9CB4.4090506@adtechgeospatial.com>
 <201510262239.41015.even.rouault@spatialys.com>
Message-ID: <56337843.1050701@adtechgeospatial.com>

The development and testing of this is complete as far as I am aware.

Should the "svn diff" just be zipped and attached to a post to this group?


---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus


From even.rouault at spatialys.com  Fri Oct 30 07:12:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 30 Oct 2015 15:12:50 +0100
Subject: [gdal-dev] New OGR driver for DB2 Spatial support
In-Reply-To: <56337843.1050701@adtechgeospatial.com>
References: <557B17E8.9020100@adtechgeospatial.com>
 <201510262239.41015.even.rouault@spatialys.com>
 <56337843.1050701@adtechgeospatial.com>
Message-ID: <201510301512.51098.even.rouault@spatialys.com>

Le vendredi 30 octobre 2015 15:01:39, David Adler a crit :
> The development and testing of this is complete as far as I am aware.
> 
> Should the "svn diff" just be zipped and attached to a post to this group?

David,

I'd advise creating a Trac ticket with it as an attachemnt :

https://trac.osgeo.org/gdal/newticket

And notify the list so that people that want to review it are aware.

If the code doesn't depend on new dependencies (which must be the case if it 
is based on ODBC support), you might also try to submit it as a pull request 
against the git mirror at https://github.com/OSGeo/gdal, so as to check there 
are not compiler warnings against this target at least (since warning are not 
going to be treated as errors.)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dadler at adtechgeospatial.com  Fri Oct 30 14:22:11 2015
From: dadler at adtechgeospatial.com (David Adler)
Date: Fri, 30 Oct 2015 17:22:11 -0400
Subject: [gdal-dev] Ticket to add IBM DB2 spatial support to GDAL/OGR
Message-ID: <5633DF83.9030505@adtechgeospatial.com>

I created the following ticket
https://trac.osgeo.org/gdal/ticket/6191
which includes some information about the DB2 spatial driver we created 
and also includes an 'svn diff' of all the code changes/additions.

This is based on the current GDAL 2.1 trunk as of 10/29/2015.

What is the next step?

---
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus


From even.rouault at spatialys.com  Sat Oct 31 08:45:13 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 31 Oct 2015 16:45:13 +0100
Subject: [gdal-dev] Refreshing commiter list
Message-ID: <201510311645.13532.even.rouault@spatialys.com>

Hi all and PSC especially,

Our COMMITERS file currently list 57 people with SVN commit rights. The truth 
is that only a portion of them make use of them (one of them has apparently 
never used them according to svn log!, a bunch not in the last 10 years...). 
So I was wondering if we shouldn't check with them to make sure they are still 
interested in the project, and in keeping their commit rights so we can 
maintain a more up-to-date list of committers/maintainers and have 3 
categories :
- Active : use their commit rights regularly
- Occasionally active: might only use them unfrequently, but could still be 
interested in committing changes from time to time
- Past : no longer interested in committing code.

We could give figures to what active or occasionally active means, but the 
intent is not "punishing" anyone, just making sure people haven't shifted 
completly to other interests. This could be give a better picture to casual 
contributors of who is responsible/interested in what.

Opionions ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

