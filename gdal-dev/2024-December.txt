From even.rouault at spatialys.com  Mon Dec  2 06:23:36 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Dec 2024 15:23:36 +0100
Subject: [gdal-dev] Motion: adopt RFC 103 - OGR_SCHEMA open option
In-Reply-To: <0d606ba5-8182-43de-8eb3-70d03c9f59a8@itopen.it>
References: <0d606ba5-8182-43de-8eb3-70d03c9f59a8@itopen.it>
Message-ID: <c5c14917-6c91-44b3-9e20-5a18722a0856@spatialys.com>

I declare this motion passed with +1 from PSC members JukkaR, JavierJS, 
HowardB and me.

Le 26/11/2024 ? 17:18, ElPaso via gdal-dev a ?crit?:
> Hi,
>
> Motion:
>
> Adopt RFC 103: OGR_SCHEMA open option[1]
>
> I have updated the RFC [1] with:
>
> - updated JSON schema with field rename support
>
> - removed GDAL_DMD_OGR_SCHEMA_OPEN_OPTION_FLAGS (after talking to Even 
> about using DMD_OPEN_OPTION_LIST instead)
>
>
> There is also a complete candidate implementation for the GML driver 
> at [2]
>
>
> Kind regards.
>
>
> [1] https://github.com/OSGeo/gdal/pull/11071 and formatted: 
> https://gdal--11071.org.readthedocs.build/en/11071/development/rfc/rfc103_schema_open_option.html
>
> [2] https://github.com/OSGeo/gdal/pull/11334
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From even.rouault at spatialys.com  Mon Dec  2 08:13:30 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Dec 2024 17:13:30 +0100
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end command
 line interface
Message-ID: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>

Hi,

I move to adopt RFC 104: Adding a "gdal" front-end command line 
interface : https://github.com/OSGeo/gdal/pull/11216

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From jukka.rahkonen at maanmittauslaitos.fi  Mon Dec  2 09:18:03 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 2 Dec 2024 17:18:03 +0000
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
Message-ID: <DB9PR09MB68874752F3528D6D7163F8C2FD352@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: maanantai 2. joulukuuta 2024 18.14
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end command line interface

Hi,

I move to adopt RFC 104: Adding a "gdal" front-end command line interface : https://github.com/OSGeo/gdal/pull/11216

Starting with my +1,

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Mon Dec  2 09:27:43 2024
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 2 Dec 2024 12:27:43 -0500
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
Message-ID: <97ca1c0e-2781-4f75-bebe-c58cbdbefa5c@mapgears.com>

+1

Daniel


On 2024-12-02 11:13, Even Rouault via gdal-dev wrote:
> Hi,
>
> I move to adopt RFC 104: Adding a "gdal" front-end command line 
> interface : https://github.com/OSGeo/gdal/pull/11216
>
> Starting with my +1,
>
> Even
>

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241202/42e482ba/attachment.htm>

From howard at hobu.co  Mon Dec  2 12:59:21 2024
From: howard at hobu.co (Howard Butler)
Date: Mon, 2 Dec 2024 14:59:21 -0600
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <C8310A98-A67C-42EA-A91E-C2B031E74BF9@hobu.co>

Howard Butler, Even Rouault, Dan Baston, Alessandro Pasotti, and Javier Jimenez Shaw held the monthly GDAL Maintainers Meeting on 11/28/2024. The following items were discussed and reported upon:

Sponsorship Activity
----------------------------

* Planet has renewed for 2024 as a Gold sponsor. Thanks again Planet for your organization's continued sustaining support of the GDAL Maintenance Program!
* Microsoft has renewed for 2024 as a Gold sponsor. Thanks again Microsoft for your organization's continued sustaining support of the GDAL Maintenance Program!

Users Survey
----------------------------

The first GDAL Users Survey was circulated last month. Dan Baston has written up a nice summary of the findings of the survey at https://gdal.org/en/stable/community/user_survey_2024.html 

The key findings:

* Moar docs!
* GeoTIFF dominates raster usage, but vector formats are not dominated by one format
* Command line is the primary usage interface for most people to GDAL, but it is time for a refactor. See https://gdal--11216.org.readthedocs.build/en/11216/development/rfc/rfc104_gdal_cli.html  for the start on that effort.
* Binary builds and packaging are a consistent challenge
* Two people claimed to have Frank Warmerdam -level experience with GDAL :) 

Thank you so much if you took the time to contribute. Expect another survey next year.

Maintenance activities update
------------------------------------------

Alessandro

* PR reviews
* RFC 103 ? OGR_SCHEMA field definition overrides for vector schemas https://github.com/OSGeo/gdal/pull/11071 

Dan

* Managed pointer (shared_ptr, unique_ptr) implementations in parts of the codebase where they can improve memory management behavior
* VRT expression implementation prototype, including VRT pixel function and processed VRT capabilities https://github.com/OSGeo/gdal/pull/11209
* Sphinx extension to organize and cross-reference usage examples
* User survey summary https://gdal.org/en/stable/community/user_survey_2024.html#survey-2024

Even

* 90+ ticket activity and reviews
* GDAL 3.10.0 released November 6th, 2024 https://github.com/OSGeo/gdal/releases/tag/v3.10.0
* GDAL 3.10.1 expected January or Feburary 2025
* Updated CI to track master branches of key dependencies like SWIG to provide surveillance of upcoming impacts
* Enhanced documentation of how to provide an RFC https://gdal.org/en/latest/development/rfc_process.html 
* MyST https://myst-parser.readthedocs.io/en/latest/ now possible with GDAL docs including Jupyterbook 
* RFC 104 the 'gdal' CLI https://gdal--11216.org.readthedocs.build/en/11216/development/rfc/rfc104_gdal_cli.html 
* Docs now track the 'stable' tag, which is automatically updated to the latest release branch commit.
* Discussion about potential Phase One driver submission and inclusion
* FOSS4GE talk, State of GDAL, now up on Youtube https://www.youtube.com/watch?v=d0S2ooogwMM 


Javier

* FOSS4GE talk, Introduction to Vertical Coordinate Systems now up on Youtube https://www.youtube.com/watch?v=tELPb9G64zU 


The next GDAL Maintainers Meeting is 12/19/2024 at 13:00 UTC (one week earlier than typical schedule to move it ahead of the holidays). Any GDAL PR contributors are welcome to join by reaching out to me for an invite.

Howard



From andrew at aitchison.me.uk  Mon Dec  2 14:57:29 2024
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 2 Dec 2024 22:57:29 +0000 (GMT)
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <C8310A98-A67C-42EA-A91E-C2B031E74BF9@hobu.co>
References: <C8310A98-A67C-42EA-A91E-C2B031E74BF9@hobu.co>
Message-ID: <36124fc4-0d38-0e46-e490-61322e63d066@aitchison.me.uk>

On Mon, 2 Dec 2024, Howard Butler via gdal-dev wrote:

> * Two people claimed to have Frank Warmerdam -level experience with GDAL :)

If Even claims that level of experience with *current* GDAL,
I think only Frank can dispute it, so two sounds right.

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From aborruso at gmail.com  Tue Dec  3 01:34:58 2024
From: aborruso at gmail.com (andy)
Date: Tue, 3 Dec 2024 10:34:58 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
Message-ID: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>

Hi,
I have a NetCDF file that I cannot share here.

Using gdalinfo I have the below output.

Is there any way to tell gdal to read coordinates from the ?lon? and ?lat?
variables/subdatasets, and thus have the coordinates of the vertices not in
pixels?

Thank you very much


Driver: netCDF/Network Common Data Format
Files: none associated
Size is 512, 512
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"out.input.nc":NO2
  SUBDATASET_1_DESC=[25x1x229x174] NO2 (32-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"out.input.nc":O3
  SUBDATASET_2_DESC=[25x1x229x174] O3 (32-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"out.input.nc":PM10
  SUBDATASET_3_DESC=[25x1x229x174] PM10 (32-bit floating-point)
  SUBDATASET_4_NAME=NETCDF:"out.input.nc":PM25
  SUBDATASET_4_DESC=[25x1x229x174] PM25 (32-bit floating-point)
  SUBDATASET_5_NAME=NETCDF:"out.input.nc":Times
  SUBDATASET_5_DESC=[25x19] Times (8-bit character)
  SUBDATASET_6_NAME=NETCDF:"out.input.nc":lat
  SUBDATASET_6_DESC=[229x174] lat (64-bit floating-point)
  SUBDATASET_7_NAME=NETCDF:"out.input.nc":lon
  SUBDATASET_7_DESC=[229x174] lon (64-bit floating-point)
  SUBDATASET_8_NAME=NETCDF:"out.input.nc":pDUST
  SUBDATASET_8_DESC=[25x1x229x174] pDUST (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)



-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/7ab328d6/attachment.htm>

From mdsumner at gmail.com  Tue Dec  3 03:01:50 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 3 Dec 2024 22:01:50 +1100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
Message-ID: <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>

Try

gdalinfo NETCDF:"out.input.nc":NO2

If you see those lon and lat subdatasets listed under "geolocation" then
you can use gdalwarp to create a georeferenced dataset, automatically with
gdalwarp sds.in out.tif or by specifying a grid with some of
-tr,-te,-t_srs,-ts.

If they don't appear they can can be arranged via VRT.

HTH

On Tue, 3 Dec 2024, 21:52 andy via gdal-dev, <gdal-dev at lists.osgeo.org>
wrote:

> Hi,
> I have a NetCDF file that I cannot share here.
>
> Using gdalinfo I have the below output.
>
> Is there any way to tell gdal to read coordinates from the ?lon? and ?lat?
> variables/subdatasets, and thus have the coordinates of the vertices not in
> pixels?
>
> Thank you very much
>
>
> Driver: netCDF/Network Common Data Format
> Files: none associated
> Size is 512, 512
> Subdatasets:
>   SUBDATASET_1_NAME=NETCDF:"out.input.nc":NO2
>   SUBDATASET_1_DESC=[25x1x229x174] NO2 (32-bit floating-point)
>   SUBDATASET_2_NAME=NETCDF:"out.input.nc":O3
>   SUBDATASET_2_DESC=[25x1x229x174] O3 (32-bit floating-point)
>   SUBDATASET_3_NAME=NETCDF:"out.input.nc":PM10
>   SUBDATASET_3_DESC=[25x1x229x174] PM10 (32-bit floating-point)
>   SUBDATASET_4_NAME=NETCDF:"out.input.nc":PM25
>   SUBDATASET_4_DESC=[25x1x229x174] PM25 (32-bit floating-point)
>   SUBDATASET_5_NAME=NETCDF:"out.input.nc":Times
>   SUBDATASET_5_DESC=[25x19] Times (8-bit character)
>   SUBDATASET_6_NAME=NETCDF:"out.input.nc":lat
>   SUBDATASET_6_DESC=[229x174] lat (64-bit floating-point)
>   SUBDATASET_7_NAME=NETCDF:"out.input.nc":lon
>   SUBDATASET_7_DESC=[229x174] lon (64-bit floating-point)
>   SUBDATASET_8_NAME=NETCDF:"out.input.nc":pDUST
>   SUBDATASET_8_DESC=[25x1x229x174] pDUST (32-bit floating-point)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
>
> --
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
>  in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/fb6dd606/attachment.htm>

From aborruso at gmail.com  Tue Dec  3 03:09:17 2024
From: aborruso at gmail.com (andy)
Date: Tue, 3 Dec 2024 12:09:17 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
Message-ID: <CAHEdGZMq1Z-8eVNW0YGWpxDrUDvskEEJHTYWAX0B_+knYdAOgA@mail.gmail.com>

Hi Michael and thank you.

I do not have lon and lat subdatasets listed under "geolocation" and I
wrote here for that reason.
I also tried doing a VRT, but I am doing something wrong, because I always
see the coordinates in pixels

Thank you again


<VRTDataset rasterXSize="174" rasterYSize="229">
  <SRS>EPSG:4326</SRS>

  <VRTRasterBand dataType="Float32" band="1">
    <GeoLocationInfo>
      <GeoLocXDataSet>NETCDF:"out.input.nc":lon</GeoLocXDataSet>
      <GeoLocYDataSet>NETCDF:"out.input.nc":lat</GeoLocYDataSet>
      <GeoLocXBand>1</GeoLocXBand>
      <GeoLocYBand>1</GeoLocYBand>
      <GeoLocPixelOffset>0</GeoLocPixelOffset>
      <GeoLocLineOffset>0</GeoLocLineOffset>
      <GeoLocPixelStep>1</GeoLocPixelStep>
      <GeoLocLineStep>1</GeoLocLineStep>
    </GeoLocationInfo>

    <Metadata>
      <MDI key="long_name">NO2 Concentration</MDI>
      <MDI key="units">ppb vol</MDI>
    </Metadata>

    <ComplexSource>
      <SourceFilename relativeToVRT="1">NETCDF:"out.input.nc
":NO2[0][0]</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="174" RasterYSize="229"
DataType="Float32" BlockXSize="174" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="174" ySize="229" />
      <DstRect xOff="0" yOff="0" xSize="174" ySize="229" />
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>



-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/eee37278/attachment-0001.htm>

From andrew.terry at centremaps.co.uk  Tue Dec  3 03:14:44 2024
From: andrew.terry at centremaps.co.uk (Andrew Terry)
Date: Tue, 3 Dec 2024 11:14:44 +0000
Subject: [gdal-dev] ogr2ogr export DXF label spaces
Message-ID: <CWLP123MB6459000ACE8DEA7771E17FC3A1362@CWLP123MB6459.GBRP123.PROD.OUTLOOK.COM>

Hi,

Using GDAL 3.9.3, I'm running a DXF output and creating an OGR_STYLE column for a point geometry label such as:

LABEL(f:"Romans",s:"1400",t:"HIGH STREET",a:"322.1",p:"10")

When I view the output label, it has no visible space, in a text editor I can see the label is:

"HIGH\~STREET"

How might I stop the commenting out of the "~"?

Thanks

Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/49e6f661/attachment.htm>

From j1 at jimenezshaw.com  Tue Dec  3 04:54:24 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 3 Dec 2024 13:54:24 +0100
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <97ca1c0e-2781-4f75-bebe-c58cbdbefa5c@mapgears.com>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
 <97ca1c0e-2781-4f75-bebe-c58cbdbefa5c@mapgears.com>
Message-ID: <CADRrdKuWJzksyOPgXEob4yTPFzScmu--0OeF++297ARUdi_Oxw@mail.gmail.com>

+1 Javier

On Mon, 2 Dec 2024 at 18:27, Daniel Morissette via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> Daniel
>
>
> On 2024-12-02 11:13, Even Rouault via gdal-dev wrote:
>
> Hi,
>
> I move to adopt RFC 104: Adding a "gdal" front-end command line interface
> : https://github.com/OSGeo/gdal/pull/11216
>
> Starting with my +1,
>
> Even
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/80f498d1/attachment.htm>

From aborruso at gmail.com  Tue Dec  3 05:51:23 2024
From: aborruso at gmail.com (andy)
Date: Tue, 3 Dec 2024 14:51:23 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
Message-ID: <CAHEdGZPwfic6JEbcqLt+am3_PVVYcx9bAmSTCMD9HXsmfDwUaQ@mail.gmail.com>

Hi Michael,
It seems to work.

Is there no way not to hard-code the GeoTransform, SrcRect, etc.
parameters?

Thank you

<VRTDataset rasterXSize="174" rasterYSize="229">
  <SRS>EPSG:4326</SRS>
  <GeoTransform>4.36, 0.0894, 0.0, 48.88, 0.0, -0.0597</GeoTransform>
  <VRTRasterBand dataType="Float32" band="1">
    <Metadata>
      <MDI key="long_name">NO2 Concentration</MDI>
      <MDI key="units">ppb vol</MDI>
    </Metadata>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">NETCDF:"out.input.nc
":NO2</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="174" RasterYSize="229"
DataType="Float32" BlockXSize="174" BlockYSize="1" />
      <SrcRect xOff="0" yOff="0" xSize="174" ySize="229" />
      <DstRect xOff="0" yOff="0" xSize="174" ySize="229" />
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>

On Tue, 3 Dec 2024 at 12:02, Michael Sumner <mdsumner at gmail.com> wrote:

> Try
>
> gdalinfo NETCDF:"out.input.nc":NO2
>
> If you see those lon and lat subdatasets listed under "geolocation" then
> you can use gdalwarp to create a georeferenced dataset, automatically with
> gdalwarp sds.in out.tif or by specifying a grid with some of
> -tr,-te,-t_srs,-ts.
>
> If they don't appear they can can be arranged via VRT.
>
> HTH
>
> On Tue, 3 Dec 2024, 21:52 andy via gdal-dev, <gdal-dev at lists.osgeo.org>
> wrote:
>
>> Hi,
>> I have a NetCDF file that I cannot share here.
>>
>> Using gdalinfo I have the below output.
>>
>> Is there any way to tell gdal to read coordinates from the ?lon? and
>> ?lat? variables/subdatasets, and thus have the coordinates of the vertices
>> not in pixels?
>>
>> Thank you very much
>>
>>
>> Driver: netCDF/Network Common Data Format
>> Files: none associated
>> Size is 512, 512
>> Subdatasets:
>>   SUBDATASET_1_NAME=NETCDF:"out.input.nc":NO2
>>   SUBDATASET_1_DESC=[25x1x229x174] NO2 (32-bit floating-point)
>>   SUBDATASET_2_NAME=NETCDF:"out.input.nc":O3
>>   SUBDATASET_2_DESC=[25x1x229x174] O3 (32-bit floating-point)
>>   SUBDATASET_3_NAME=NETCDF:"out.input.nc":PM10
>>   SUBDATASET_3_DESC=[25x1x229x174] PM10 (32-bit floating-point)
>>   SUBDATASET_4_NAME=NETCDF:"out.input.nc":PM25
>>   SUBDATASET_4_DESC=[25x1x229x174] PM25 (32-bit floating-point)
>>   SUBDATASET_5_NAME=NETCDF:"out.input.nc":Times
>>   SUBDATASET_5_DESC=[25x19] Times (8-bit character)
>>   SUBDATASET_6_NAME=NETCDF:"out.input.nc":lat
>>   SUBDATASET_6_DESC=[229x174] lat (64-bit floating-point)
>>   SUBDATASET_7_NAME=NETCDF:"out.input.nc":lon
>>   SUBDATASET_7_DESC=[229x174] lon (64-bit floating-point)
>>   SUBDATASET_8_NAME=NETCDF:"out.input.nc":pDUST
>>   SUBDATASET_8_DESC=[25x1x229x174] pDUST (32-bit floating-point)
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  512.0)
>> Upper Right (  512.0,    0.0)
>> Lower Right (  512.0,  512.0)
>> Center      (  256.0,  256.0)
>>
>>
>>
>> --
>> ___________________
>>
>> Andrea Borruso
>> website: https://medium.com/tantotanto
>> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
>> ___________________
>>
>> "cercare e saper riconoscere chi e cosa,
>>  in mezzo all?inferno, non ? inferno,
>> e farlo durare, e dargli spazio"
>>
>> Italo Calvino
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/e575284e/attachment-0001.htm>

From howard at hobu.co  Tue Dec  3 06:28:02 2024
From: howard at hobu.co (Howard Butler)
Date: Tue, 3 Dec 2024 08:28:02 -0600
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <CADRrdKuWJzksyOPgXEob4yTPFzScmu--0OeF++297ARUdi_Oxw@mail.gmail.com>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
 <97ca1c0e-2781-4f75-bebe-c58cbdbefa5c@mapgears.com>
 <CADRrdKuWJzksyOPgXEob4yTPFzScmu--0OeF++297ARUdi_Oxw@mail.gmail.com>
Message-ID: <247FC7B8-FD6D-4062-92BB-1AE64072E00F@hobu.co>

+1 Howard

I think it would be prudent for the documentation and communication about the 'gdal' command to state something like the following:

> The 'gdal' command is provisionally provided as an alternative interface to GDAL and OGR command line utilities. The project reserves the right to modify, rename, reorganize, and change the behavior of the utility until it is officially frozen via PSC vote in a future major GDAL release. The utility needs time to mature, benefit from incremental feedback, and explore enhancements without carrying the burden of full backward compatibility. Your usage of it should have no expectation of compatibility until that time.


From even.rouault at spatialys.com  Tue Dec  3 06:42:45 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Dec 2024 15:42:45 +0100
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <247FC7B8-FD6D-4062-92BB-1AE64072E00F@hobu.co>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
 <97ca1c0e-2781-4f75-bebe-c58cbdbefa5c@mapgears.com>
 <CADRrdKuWJzksyOPgXEob4yTPFzScmu--0OeF++297ARUdi_Oxw@mail.gmail.com>
 <247FC7B8-FD6D-4062-92BB-1AE64072E00F@hobu.co>
Message-ID: <67c64dee-99dd-4c13-a56f-fe7de0135d91@spatialys.com>


Le 03/12/2024 ? 15:28, Howard Butler via gdal-dev a ?crit?:
> +1 Howard
>
> I think it would be prudent for the documentation and communication about the 'gdal' command to state something like the following:

agreed. Added in candidate implementation per 
https://github.com/OSGeo/gdal/pull/11303/commits/93cbcce042faae839d76a729784c8c59affd8c7d

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/aa3faf54/attachment.htm>

From mdsumner at gmail.com  Tue Dec  3 10:06:18 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 4 Dec 2024 05:06:18 +1100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAHEdGZPwfic6JEbcqLt+am3_PVVYcx9bAmSTCMD9HXsmfDwUaQ@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
 <CAHEdGZPwfic6JEbcqLt+am3_PVVYcx9bAmSTCMD9HXsmfDwUaQ@mail.gmail.com>
Message-ID: <CAAcGz9-TU=dUSr2RkfbzzNewLmBC5zkkYJuepOVGY4uzQPkTxQ@mail.gmail.com>

You can't use a geotransform unless the data are actually regular. There's
no saying whether the lon lat arrays describe a regular grid redundantly
without inspecting them (it's also very common for formats to deliver lon
lat coords when the data is actually a regular grid in a different crs, but
it's not easy to automatically determine that situation which is the entire
entropy-increasing problem with the degenerate coordinate model of
netcdf-alikes. There's hope though, see xarray PR 9543 for a crack of light
in the gloom).

Cheers, Mike

On Wed, 4 Dec 2024, 00:52 andy, <aborruso at gmail.com> wrote:

> Hi Michael,
> It seems to work.
>
> Is there no way not to hard-code the GeoTransform, SrcRect, etc.
> parameters?
>
> Thank you
>
> <VRTDataset rasterXSize="174" rasterYSize="229">
>   <SRS>EPSG:4326</SRS>
>   <GeoTransform>4.36, 0.0894, 0.0, 48.88, 0.0, -0.0597</GeoTransform>
>   <VRTRasterBand dataType="Float32" band="1">
>     <Metadata>
>       <MDI key="long_name">NO2 Concentration</MDI>
>       <MDI key="units">ppb vol</MDI>
>     </Metadata>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">NETCDF:"out.input.nc
> ":NO2</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="174" RasterYSize="229"
> DataType="Float32" BlockXSize="174" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="174" ySize="229" />
>       <DstRect xOff="0" yOff="0" xSize="174" ySize="229" />
>     </ComplexSource>
>   </VRTRasterBand>
> </VRTDataset>
>
> On Tue, 3 Dec 2024 at 12:02, Michael Sumner <mdsumner at gmail.com> wrote:
>
>> Try
>>
>> gdalinfo NETCDF:"out.input.nc":NO2
>>
>> If you see those lon and lat subdatasets listed under "geolocation" then
>> you can use gdalwarp to create a georeferenced dataset, automatically with
>> gdalwarp sds.in out.tif or by specifying a grid with some of
>> -tr,-te,-t_srs,-ts.
>>
>> If they don't appear they can can be arranged via VRT.
>>
>> HTH
>>
>> On Tue, 3 Dec 2024, 21:52 andy via gdal-dev, <gdal-dev at lists.osgeo.org>
>> wrote:
>>
>>> Hi,
>>> I have a NetCDF file that I cannot share here.
>>>
>>> Using gdalinfo I have the below output.
>>>
>>> Is there any way to tell gdal to read coordinates from the ?lon? and
>>> ?lat? variables/subdatasets, and thus have the coordinates of the vertices
>>> not in pixels?
>>>
>>> Thank you very much
>>>
>>>
>>> Driver: netCDF/Network Common Data Format
>>> Files: none associated
>>> Size is 512, 512
>>> Subdatasets:
>>>   SUBDATASET_1_NAME=NETCDF:"out.input.nc":NO2
>>>   SUBDATASET_1_DESC=[25x1x229x174] NO2 (32-bit floating-point)
>>>   SUBDATASET_2_NAME=NETCDF:"out.input.nc":O3
>>>   SUBDATASET_2_DESC=[25x1x229x174] O3 (32-bit floating-point)
>>>   SUBDATASET_3_NAME=NETCDF:"out.input.nc":PM10
>>>   SUBDATASET_3_DESC=[25x1x229x174] PM10 (32-bit floating-point)
>>>   SUBDATASET_4_NAME=NETCDF:"out.input.nc":PM25
>>>   SUBDATASET_4_DESC=[25x1x229x174] PM25 (32-bit floating-point)
>>>   SUBDATASET_5_NAME=NETCDF:"out.input.nc":Times
>>>   SUBDATASET_5_DESC=[25x19] Times (8-bit character)
>>>   SUBDATASET_6_NAME=NETCDF:"out.input.nc":lat
>>>   SUBDATASET_6_DESC=[229x174] lat (64-bit floating-point)
>>>   SUBDATASET_7_NAME=NETCDF:"out.input.nc":lon
>>>   SUBDATASET_7_DESC=[229x174] lon (64-bit floating-point)
>>>   SUBDATASET_8_NAME=NETCDF:"out.input.nc":pDUST
>>>   SUBDATASET_8_DESC=[25x1x229x174] pDUST (32-bit floating-point)
>>> Corner Coordinates:
>>> Upper Left  (    0.0,    0.0)
>>> Lower Left  (    0.0,  512.0)
>>> Upper Right (  512.0,    0.0)
>>> Lower Right (  512.0,  512.0)
>>> Center      (  256.0,  256.0)
>>>
>>>
>>>
>>> --
>>> ___________________
>>>
>>> Andrea Borruso
>>> website: https://medium.com/tantotanto
>>> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
>>> ___________________
>>>
>>> "cercare e saper riconoscere chi e cosa,
>>>  in mezzo all?inferno, non ? inferno,
>>> e farlo durare, e dargli spazio"
>>>
>>> Italo Calvino
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
> --
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
>  in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/1ae9a42a/attachment.htm>

From aborruso at gmail.com  Tue Dec  3 10:16:37 2024
From: aborruso at gmail.com (andy)
Date: Tue, 3 Dec 2024 19:16:37 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAAcGz9-TU=dUSr2RkfbzzNewLmBC5zkkYJuepOVGY4uzQPkTxQ@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
 <CAHEdGZPwfic6JEbcqLt+am3_PVVYcx9bAmSTCMD9HXsmfDwUaQ@mail.gmail.com>
 <CAAcGz9-TU=dUSr2RkfbzzNewLmBC5zkkYJuepOVGY4uzQPkTxQ@mail.gmail.com>
Message-ID: <CAHEdGZPkJhrOHMfbZQAnOvHdxG-t358EAfF=HrD=+306iHCDSA@mail.gmail.com>

Hi Michael,
and thank you.

On Tue, 3 Dec 2024 at 19:06, Michael Sumner <mdsumner at gmail.com> wrote:

> You can't use a geotransform unless the data are actually regular. There's
> no saying whether the lon lat arrays describe a regular grid redundantly
> without inspecting them (it's also very common for formats to deliver lon
> lat coords when the data is actually a regular grid in a different crs, but
> it's not easy to automatically determine that situation which is the entire
> entropy-increasing problem with the degenerate coordinate model of
> netcdf-alikes. There's hope though, see xarray PR 9543 for a crack of light
> in the gloom).
>

However, I did not understand one thing. Is my vrt wrong and should I not
use ?geotransform,? and is there a more correct way to write it?
Or is this type of netcdf not well readable with gdal (at least until PR
9543 closes)?

Best regards


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/4ee3e755/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Dec  3 10:21:46 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Dec 2024 19:21:46 +0100
Subject: [gdal-dev] Does writing GeoJSON need to be so slow?
In-Reply-To: <DB9PR09MB688781DA1B7635789F11A853FD292@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB688781DA1B7635789F11A853FD292@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <2fa98bce-90db-4814-98c3-731e0f25a4b9@spatialys.com>

Jukka,

well, we have used up to now the same trick as a famous vendor did with 
their flagship text processing editor for Mac decades ago: add explicit 
sleep() to make the process slower, to discourage users from creating 
too large GeoJSON files, which are difficult to read if too big.

More seriously, some modest enhancements for GML and GeoJSON in 
https://github.com/OSGeo/gdal/pull/11428

With them, I get 1m56s for whole file GeoJSON conversion (2m20s before) 
and 1m36s for GML (1m45s before).

I found on my Linux system that MIF export was the fastest of the 4 text 
formats, not sure why that isn't the case on Windows.

Why is ExportGeoJSON so fast? Completely hand-written compared to the 
OGR GeoJSON driver which constructs a json_object* hierarchical 
representation of each feature before serializing it to string,? the 
fact that the OGR GeoJSON driver implements "smart" rounding/truncation 
logic, and possibly (didn't check) the fact the the sqlite3_mprintf() 
routine is faster than standard library printf().

Even

Le 28/11/2024 ? 14:43, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> I was comparing some alternative scenarios for data exports, and I was 
> a bit surprised when I noticed that GeoJSON output from ogr2ogr is 
> really slow.
>
> I used these lake polygons as test data 
> https://wwwd3.ymparisto.fi/d3/gis_data/spesific/ranta10jarvet.zip and 
> I tested on Windows with GDAL 3.11.0dev-181b6b9991, released 2024/11/21.
>
> I was thinking that maybe it is slow to write JSON just because it is 
> text based format so I made tests also with other text formats (GML, 
> MapInfo MIF, and CSV). My commands and timings:
>
> ogr2ogr -f geojson lakes.json jarvi10.shp --config cpl_debug on 
> --config cpl_timestamp on
>
> 220 sec - 1000 features/sec
>
> ogr2ogr -f "mapinfo file" lakes.mif jarvi10.shp --config cpl_debug on 
> --config cpl_timestamp on
>
> 110 sec ? 2000 features/sec
>
> ogr2ogr -f gml lakes.gml jarvi10.shp --config cpl_debug on --config 
> cpl_timestamp on
>
> 92 sec - 2300 features/sec
>
> ogr2ogr -f csv lakes.csv jarvi10.shp -lco geometry=as_wkt --config 
> cpl_debug on --config cpl_timestamp on
>
> 77 sec - 2800 featurs/sec
>
> Then I pondered if I know any other tools for exporting GeoJSON, and 
> SpatiaLite came into my mind. ExportGeoJSON 
> https://www.gaia-gis.it/gaia-sins/spatialite-sql-5.1.0.html from 
> GeoPackage into GeoJSON file was 4 times faster than ogr2ogr.
>
> select 
> exportgeojson('vgpkg_jarvi10','geom','c:\data\jarvet\fromspatialite.json');
>
> 54 sec - 4000 features/sec
>
> For calibrating the speedometer, I converted data also from shapefile 
> into GeoPackage
>
> ogr2ogr -f gpkg lakes.gpkg jarvi10.shp --config cpl_debug on --config 
> cpl_timestamp on
>
> 12 sec - 18000 features/sec
>
> I made also a couple of tests with geojsonseq output but I did not 
> notice much difference. Does writing GeoJSON require some tricks that 
> other formats do not require, or why it is so slow?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/a54d8665/attachment.htm>

From even.rouault at spatialys.com  Tue Dec  3 10:27:12 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Dec 2024 19:27:12 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAHEdGZMq1Z-8eVNW0YGWpxDrUDvskEEJHTYWAX0B_+knYdAOgA@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
 <CAHEdGZMq1Z-8eVNW0YGWpxDrUDvskEEJHTYWAX0B_+knYdAOgA@mail.gmail.com>
Message-ID: <fc99be52-e9c0-4a3c-b832-e87e2a0f110b@spatialys.com>


Le 03/12/2024 ? 12:09, andy via gdal-dev a ?crit?:
> Hi Michael and thank you.
>
> I do not have lon and lat subdatasets listed under "geolocation" and I 
> wrote here for that reason.

Please post the output of "ncdump -h out.intput.nc" to understand why 
the driver doesn't automatically detect the lon and lat arrays.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/c56c4f6b/attachment.htm>

From aborruso at gmail.com  Tue Dec  3 10:33:26 2024
From: aborruso at gmail.com (andy)
Date: Tue, 3 Dec 2024 19:33:26 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <fc99be52-e9c0-4a3c-b832-e87e2a0f110b@spatialys.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
 <CAHEdGZMq1Z-8eVNW0YGWpxDrUDvskEEJHTYWAX0B_+knYdAOgA@mail.gmail.com>
 <fc99be52-e9c0-4a3c-b832-e87e2a0f110b@spatialys.com>
Message-ID: <CAHEdGZP7cUpb4AmROtHnt3r_LFgpwHeEJr9ge2HgNtsDBxYGRw@mail.gmail.com>

Hi Even,
thank you.

I have this

{
dimensions:
        Time = UNLIMITED ; // (25 currently)
        bottom_top = 1 ;
        south_north = 229 ;
        west_east = 174 ;
        DateStrLen = 19 ;
variables:
        float NO2(Time, bottom_top, south_north, west_east) ;
                NO2:units = "ppb vol" ;
                NO2:long_name = "NO2 Concentration" ;
        float O3(Time, bottom_top, south_north, west_east) ;
                O3:units = "ppb vol" ;
                O3:long_name = "O3 Concentration" ;
        float PM10(Time, bottom_top, south_north, west_east) ;
                PM10:units = "ug/m3" ;
                PM10:long_name = "PM10 Concentration" ;
        float PM25(Time, bottom_top, south_north, west_east) ;
                PM25:units = "ug/m3" ;
                PM25:long_name = "PM25 Concentration" ;
        char Times(Time, DateStrLen) ;
                Times:units = "Date string" ;
                Times:long_name = "WRF-style Times" ;
        double lat(south_north, west_east) ;
                lat:units = "degrees_north" ;
                lat:long_name = "Latitude" ;
        double lon(south_north, west_east) ;
                lon:units = "degrees_east" ;
                lon:long_name = "Longitude" ;
        float pDUST(Time, bottom_top, south_north, west_east) ;
                pDUST:units = "ug/m3" ;
                pDUST:long_name = "pDUST Concentration" ;
        double time(Time) ;
                time:units = "hours since 2000-01-01 00:00:00" ;
        float level(bottom_top) ;
                level:units = "level" ;

// global attributes:
                :Title = "SUITE" ;
                :Sub-title = "Hourly output concentrations file" ;
                :Suite_type = "out" ;
                :Generating_process = "Generated by SUITE" ;
                :Conventions = "None" ;
                :Domain = "BTA7" ;
                :Suite_version = "chimere2017r4v1_maialinux" ;
                :history = "File /fs/out.intput.nc was generated on Sun Jun
16 03:53:11 2024" ;
}


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/625880ea/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Dec  3 10:41:20 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 3 Dec 2024 18:41:20 +0000
Subject: [gdal-dev] Does writing GeoJSON need to be so slow?
In-Reply-To: <2fa98bce-90db-4814-98c3-731e0f25a4b9@spatialys.com>
References: <DB9PR09MB688781DA1B7635789F11A853FD292@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <2fa98bce-90db-4814-98c3-731e0f25a4b9@spatialys.com>
Message-ID: <DB9PR09MB68875D8A6225B05D6AF3C4A1FD362@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi

20% more speed into GeoJSON writing is notable. I do not use GeoJSON so much but some other people in the community may be happy. Thanks for having a look.

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com>
L?hetetty: tiistai 3. joulukuuta 2024 20.22
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Does writing GeoJSON need to be so slow?


Jukka,

well, we have used up to now the same trick as a famous vendor did with their flagship text processing editor for Mac decades ago: add explicit sleep() to make the process slower, to discourage users from creating too large GeoJSON files, which are difficult to read if too big.

More seriously, some modest enhancements for GML and GeoJSON in https://github.com/OSGeo/gdal/pull/11428

With them, I get 1m56s for whole file GeoJSON conversion (2m20s before) and 1m36s for GML (1m45s before).

I found on my Linux system that MIF export was the fastest of the 4 text formats, not sure why that isn't the case on Windows.

Why is ExportGeoJSON so fast? Completely hand-written compared to the OGR GeoJSON driver which constructs a json_object* hierarchical representation of each feature before serializing it to string,  the fact that the OGR GeoJSON driver implements "smart" rounding/truncation logic, and possibly (didn't check) the fact the the sqlite3_mprintf() routine is faster than standard library printf().

Even
Le 28/11/2024 ? 14:43, Rahkonen Jukka via gdal-dev a ?crit :
Hi,

I was comparing some alternative scenarios for data exports, and I was a bit surprised when I noticed that GeoJSON output from ogr2ogr is really slow.
I used these lake polygons as test data https://wwwd3.ymparisto.fi/d3/gis_data/spesific/ranta10jarvet.zip and I tested on Windows with GDAL 3.11.0dev-181b6b9991, released 2024/11/21.

I was thinking that maybe it is slow to write JSON just because it is text based format so I made tests also with other text formats (GML, MapInfo MIF, and CSV). My commands and timings:

ogr2ogr -f geojson lakes.json jarvi10.shp --config cpl_debug on --config cpl_timestamp on
220 sec - 1000 features/sec
ogr2ogr -f "mapinfo file" lakes.mif jarvi10.shp --config cpl_debug on --config cpl_timestamp on
110 sec - 2000 features/sec
ogr2ogr -f gml lakes.gml jarvi10.shp --config cpl_debug on --config cpl_timestamp on
92 sec - 2300 features/sec
ogr2ogr -f csv lakes.csv jarvi10.shp -lco geometry=as_wkt --config cpl_debug on --config cpl_timestamp on
77 sec - 2800 featurs/sec

Then I pondered if I know any other tools for exporting GeoJSON, and SpatiaLite came into my mind. ExportGeoJSON https://www.gaia-gis.it/gaia-sins/spatialite-sql-5.1.0.html from GeoPackage into GeoJSON file was 4 times faster than ogr2ogr.
select exportgeojson('vgpkg_jarvi10','geom','c:\data\jarvet\fromspatialite.json');
54 sec - 4000 features/sec

For calibrating the speedometer, I converted data also from shapefile into GeoPackage
ogr2ogr -f gpkg lakes.gpkg jarvi10.shp --config cpl_debug on --config cpl_timestamp on
12 sec - 18000 features/sec

I made also a couple of tests with geojsonseq output but I did not notice much difference. Does writing GeoJSON require some tricks that other formats do not require, or why it is so slow?

-Jukka Rahkonen-



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241203/3cc379f4/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Dec  3 11:02:24 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Dec 2024 20:02:24 +0100
Subject: [gdal-dev] NetCDF: how to read coordinates from "lon" and "lat"
 variables?
In-Reply-To: <CAHEdGZP7cUpb4AmROtHnt3r_LFgpwHeEJr9ge2HgNtsDBxYGRw@mail.gmail.com>
References: <CAHEdGZMXob6FKdABUVGQxFwJVDG9zSZy4qy4P2_MGMD1FN5-MQ@mail.gmail.com>
 <CAAcGz9-jNe_9Ziun8+t4SkKH+uqpz-10DxzbqsSsiG5NG5avTg@mail.gmail.com>
 <CAHEdGZMq1Z-8eVNW0YGWpxDrUDvskEEJHTYWAX0B_+knYdAOgA@mail.gmail.com>
 <fc99be52-e9c0-4a3c-b832-e87e2a0f110b@spatialys.com>
 <CAHEdGZP7cUpb4AmROtHnt3r_LFgpwHeEJr9ge2HgNtsDBxYGRw@mail.gmail.com>
Message-ID: <1d8cfbdc-6ec0-41aa-a0c7-75150db4e39c@spatialys.com>

should be fixed per https://github.com/OSGeo/gdal/pull/11429


-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From zhangyijunmetro at hotmail.com  Tue Dec  3 18:46:26 2024
From: zhangyijunmetro at hotmail.com (shark shark)
Date: Wed, 4 Dec 2024 02:46:26 +0000
Subject: [gdal-dev] How gdal_translate scale the value,
 like from a larger range to a smaller range?
Message-ID: <ME3P282MB32262B881F25F060F4D1DDF0B5372@ME3P282MB3226.AUSP282.PROD.OUTLOOK.COM>

Hi guys. Have a nice day.

I?m curious how gdal scales the values when converting from a larger range to a smaller range,like from u32 to u8, u16 to u8, f32 to u8 etc..
I made a test:
gdal_translate -ot Byte -of GTiff  gray_u32.tif gray_u8.tif
All the u32 value in every sample of my gray_u32.tif is 10050
And All the value in result file is 255.
This seems to be a boundary case where the maximum and minimum values are both 10050 but I?m curious the behavior here and I didn?t find a doc about this.

I hope this question is not too suptid or weired.

Best, Lucas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/5ea090cd/attachment.htm>

From lnicola at dend.ro  Tue Dec  3 19:41:45 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 04 Dec 2024 05:41:45 +0200
Subject: [gdal-dev] How gdal_translate scale the value,
 like from a larger range to a smaller range?
In-Reply-To: <ME3P282MB32262B881F25F060F4D1DDF0B5372@ME3P282MB3226.AUSP282.PROD.OUTLOOK.COM>
References: <ME3P282MB32262B881F25F060F4D1DDF0B5372@ME3P282MB3226.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <e4283087-1af8-499c-9f57-d37744942a9f@app.fastmail.com>

Hi Lucas,

GDAL will keep the input values unchanged when possible, and saturate (use the maximum or minimum representable value) when not. So 10050 will be transformed to 255 when you're converting to Byte, and -40000 will be saved as -32768 for Int16. NaN nodata values will be converted to 0 with a warning.

You might want to check out the -scale and -exponent parameters of gdal_translate.

Laurentiu

On Wed, Dec 4, 2024, at 04:46, shark shark via gdal-dev wrote:
> Hi guys. Have a nice day.
>  
> I?m curious how gdal scales the values when converting from a larger range to a smaller range,like from u32 to u8, u16 to u8, f32 to u8 etc..
> I made a test:
> gdal_translate -ot Byte -of GTiff  gray_u32.tif gray_u8.tif
> All the u32 value in every sample of my gray_u32.tif is 10050
> And All the value in result file is 255.
> This seems to be a boundary case where the maximum and minimum values are both 10050 but I?m curious the behavior here and I didn?t find a doc about this.
>  
> I hope this question is not too suptid or weired.
>  
> Best, Lucas
>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/5e701f44/attachment.htm>

From jose.m.rodriguez220.ctr at us.navy.mil  Wed Dec  4 08:14:07 2024
From: jose.m.rodriguez220.ctr at us.navy.mil (Rodriguez, Jose M CTR (USA))
Date: Wed, 4 Dec 2024 16:14:07 +0000
Subject: [gdal-dev] Help with overlapping images in tiles generated by
 gdal2tiles.py
Message-ID: <BN8P111MB21272AF5E232CD8B702F0DB7FE37A@BN8P111MB2127.NAMP111.PROD.OUTLOOK.COM>

Hello,

I have been using GDAL to process a large collection of images of the Moon with the ultimate goal of generating a tile set for use in CesiumJS.

I use gdalbuildvrt to build of virtual mosaic of the images in question and then use gdal2tiles.py to generate the tile set. All these steps work and I have a working tile set of the Moon. But I am not happy with one result: the edges of the images, when zoomed in, can easily be seen as darker pixels (for images that overlap).

I have tried different values for the --resampling parameter of gdal2tiles.py and the -resolution parameter of gdalbuildvrt with no effect. Am I missing something that could help here? Any suggestions on how can this be addressed?

(Also is there a recommended way to attaching images to this list? If I attach a small screen capture to this email what happens?)

VR
Jose Rodriguez
jose.m.rodriguez220.ctr at us.navy.mil<mailto:jose.m.rodriguez220.ctr at us.navy.mil>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/41d868af/attachment-0001.htm>

From lnicola at dend.ro  Wed Dec  4 09:58:13 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 04 Dec 2024 19:58:13 +0200
Subject: [gdal-dev] Help with overlapping images in tiles generated by
 gdal2tiles.py
In-Reply-To: <BN8P111MB21272AF5E232CD8B702F0DB7FE37A@BN8P111MB2127.NAMP111.PROD.OUTLOOK.COM>
References: <BN8P111MB21272AF5E232CD8B702F0DB7FE37A@BN8P111MB2127.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <b26a5caa-338a-415a-87e2-430ca7ae72ec@app.fastmail.com>

Hi Jose,

I'm not sure if this is happening in your case, but I've seen something similar with rotated rasters that used 0 or a negative value for the outside pixels. If you're doing interpolation or reprojection, those values will be used in the computation and affect neighboring pixels. But if you set the nodata value on the inputs, GDAL will (usually?) mask out those pixels so they don't affect the output.

Laurentiu

On Wed, Dec 4, 2024, at 18:14, Rodriguez, Jose M CTR (USA) via gdal-dev wrote:
> Hello,
>  
> I have been using GDAL to process a large collection of images of the Moon with the ultimate goal of generating a tile set for use in CesiumJS.
>  
> I use gdalbuildvrt to build of virtual mosaic of the images in question and then use gdal2tiles.py to generate the tile set. All these steps work and I have a working tile set of the Moon. But I am not happy with one result: the edges of the images, when zoomed in, can easily be seen as darker pixels (for images that overlap).
>  
> I have tried different values for the --resampling parameter of gdal2tiles.py and the -resolution parameter of gdalbuildvrt with no effect. Am I missing something that could help here? Any suggestions on how can this be addressed?
>  
> (Also is there a recommended way to attaching images to this list? If I attach a small screen capture to this email what happens?)
>  
> VR
> Jose Rodriguez
> jose.m.rodriguez220.ctr at us.navy.mil
>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/398c8cd4/attachment.htm>

From jose.m.rodriguez220.ctr at us.navy.mil  Wed Dec  4 13:37:59 2024
From: jose.m.rodriguez220.ctr at us.navy.mil (Rodriguez, Jose M CTR (USA))
Date: Wed, 4 Dec 2024 21:37:59 +0000
Subject: [gdal-dev] Help with overlapping images in tiles generated by
 gdal2tiles.py
Message-ID: <BN8P111MB21272AE9072ABDCB57317E37FE37A@BN8P111MB2127.NAMP111.PROD.OUTLOOK.COM>

Hello,



Yes my images (single band greyscale) come from the Clementine mission and are processed first with a) four corner points as gcps are inserted in the TIF file and b) warped so that the image's upper raster is aligned west to east:



gdal_translate -q -of GTiff -gcp 1 1 $UL_LON $UL_LAT -gcp $image_width 1 $UR_LON $UR_LAT -gcp 1 $image_height $LL_LON $LL_LAT -gcp $image_width $image_height $LR_LON $LR_LAT $tif_file $geo_file



gdalwarp -r near -tps -t_srs EPSG:4326 -dstalpha $geo_file $warp_file



The warping introduces new pixels which are black (value 0) but this I am handling through the "-dstalpha" flag that adds a second band of pixel alpha values: 0 for invisible pixels, 255 for visible.



The blank pixels are not seen. This works well when a background image is used to cover the empty areas in the mission's imagery. The problem is with two images that are aligned (and they align great), and just the boundary pixels. And it is really noticeable in images aligned side-by-side.



Now my question:



I have seen the "nodata" flags in the gdalbuildvrt command but I just don't understand how to use them. For example in the man page for gdalbuildvrt



-srcnodata "<value>[ <value>]..."

              Set nodata values for input bands...



What does this mean? My input "data" values - pixels in a greyscale band - range from 0 to 255. Using the value for the pixels added by  the warp command does not make sense to me as the original raster could also be using that value.



Anyway, thanks for the help.



Jose Rodriguez

jose.m.rodriguez220.ctr at us.navy.mil<mailto:jose.m.rodriguez220.ctr at us.navy.mil>





> Hi Jose,



> I'm not sure if this is happening in your case, but I've seen something similar with rotated rasters that used 0 or a negative value for the outside pixels. If you're doing interpolation or reprojection, those values will be used in the computation and affect neighboring > pixels. But if you set the nodata value on the inputs, GDAL will (usually?) mask out those pixels so they don't affect the output.



> Laurentiu



> On Wed, Dec 4, 2024, at 18:14, Rodriguez, Jose M CTR (USA) via gdal-dev wrote:

> > Hello,

> >

> > I have been using GDAL to process a large collection of images of the Moon with the ultimate goal of generating a tile set for use in CesiumJS.

> >

> I use gdalbuildvrt to build of virtual mosaic of the images in question and then use gdal2tiles.py to generate the tile set. All these steps work and I have a working tile set of the Moon. But I am not happy with one result: the edges of the images, when zoomed in, can easily be seen as darker pixels (for images that overlap).

> >

> > I have tried different values for the --resampling parameter of gdal2tiles.py and the -resolution parameter of gdalbuildvrt with no effect. Am I missing something that could help here? Any suggestions on how can this be addressed?

> >

> > (Also is there a recommended way to attaching images to this list? If

> > I attach a small screen capture to this email what happens?)

> >

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241204/d6ea43e3/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Dec  5 06:55:02 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 5 Dec 2024 14:55:02 +0000
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
Message-ID: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

There is a FlatGeobuf test in here https://github.com/OSGeo/gdal/blob/436ae05694cf52526ef606853828b5ec9300d50d/autotest/ogr/ogr_flatgeobuf.py#L182
but I cannot find the file "data/testfgb/poly_no_index.fgb" anywhere. Is it created on-the-fly or what?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241205/0abc6c8a/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Dec  5 07:34:32 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Dec 2024 16:34:32 +0100
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>

Jukka,

in autotest/ relative file paths are relative to where the .py file is 
located, so here the test file is at 
https://github.com/OSGeo/gdal/tree/master/autotest/ogr/data/testfgb

Even

Le 05/12/2024 ? 15:55, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> There is a FlatGeobuf test in here 
> https://github.com/OSGeo/gdal/blob/436ae05694cf52526ef606853828b5ec9300d50d/autotest/ogr/ogr_flatgeobuf.py#L182
>
> but I cannot find the file "data/testfgb/poly_no_index.fgb" anywhere. 
> Is it created on-the-fly or what?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241205/fd21a163/attachment.htm>

From even.rouault at spatialys.com  Thu Dec  5 08:05:12 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Dec 2024 17:05:12 +0100
Subject: [gdal-dev] Motion: adopt RFC 104: Adding a "gdal" front-end
 command line interface
In-Reply-To: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
References: <b2f38cb8-d60d-4227-bd13-926a39749669@spatialys.com>
Message-ID: <44438ddc-4da3-4df3-a0f9-362d85e67a17@spatialys.com>

Motion adopted with +1 from PSC members JukkaR, DanielM, JavierJS, 
HowardB and me.

Le 02/12/2024 ? 17:13, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I move to adopt RFC 104: Adding a "gdal" front-end command line 
> interface : https://github.com/OSGeo/gdal/pull/11216
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec  6 02:13:50 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 6 Dec 2024 10:13:50 +0000
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
Message-ID: <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>

Next question: Why this gives true for me?

Create test data

ogr2ogr -f flatgeobuf test.fgb -lco SPATIAL_INDEX=NO kiinteistorekisterikartta.gpkg PalstanSijaintitiedot

Python:

from osgeo import ogr
fgb_ds = ogr.Open("test.fgb")
fgb_lyr = fgb_ds.GetLayer(0)
fgb_lyr.TestCapability(ogr.OLCFastGetExtent)
True

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com>
L?hetetty: torstai 5. joulukuuta 2024 17.35
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Where to find a FlatGeobuf test file?


Jukka,

in autotest/ relative file paths are relative to where the .py file is located, so here the test file is at https://github.com/OSGeo/gdal/tree/master/autotest/ogr/data/testfgb

Even
Le 05/12/2024 ? 15:55, Rahkonen Jukka via gdal-dev a ?crit :
Hi,

There is a FlatGeobuf test in here https://github.com/OSGeo/gdal/blob/436ae05694cf52526ef606853828b5ec9300d50d/autotest/ogr/ogr_flatgeobuf.py#L182
but I cannot find the file "data/testfgb/poly_no_index.fgb" anywhere. Is it created on-the-fly or what?

-Jukka Rahkonen-



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241206/71573340/attachment.htm>

From even.rouault at spatialys.com  Fri Dec  6 02:37:13 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Dec 2024 11:37:13 +0100
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
 <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <5bb31995-4a21-4dc2-be25-6515ce1a9c01@spatialys.com>

Hi Jukka,

Le 06/12/2024 ? 11:13, Rahkonen Jukka a ?crit?:
>
> Next question: Why this gives true for me?
>
OLCFastGetExtent != OLCFastSpatialFilter

The layer extent is written in the FlatGeoBuf layer even in the 
SPATIAL_INDEX=NO case, so retrieving the extent is fast.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241206/e07726e7/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec  6 05:12:24 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 6 Dec 2024 13:12:24 +0000
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <5bb31995-4a21-4dc2-be25-6515ce1a9c01@spatialys.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
 <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <5bb31995-4a21-4dc2-be25-6515ce1a9c01@spatialys.com>
Message-ID: <DB9PR09MB6887F77BC9F9781176C72C3AFD312@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Has there been a change in writing the layer extent?
I thought that the test https://github.com/OSGeo/gdal/blob/e4d1f7ff474ceeffd69b1ceef3fa635428788e8c/autotest/ogr/ogr_flatgeobuf.py#L182 is testing with TestCapability(ogr.OLCFastGetExtent) if spatial index exists. At least the test file  data/testfgb/poly_no_index.fgb shows false for this capability.

I am not really interested in the layer extent, what I want to know is how can I check if an existing FlatGeobuf file has spatial index or not.

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com>
L?hetetty: perjantai 6. joulukuuta 2024 12.37
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Where to find a FlatGeobuf test file?


Hi Jukka,
Le 06/12/2024 ? 11:13, Rahkonen Jukka a ?crit :
Next question: Why this gives true for me?

OLCFastGetExtent != OLCFastSpatialFilter

The layer extent is written in the FlatGeoBuf layer even in the SPATIAL_INDEX=NO case, so retrieving the extent is fast.

Even



--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241206/7bd812ee/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec  6 05:23:09 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 6 Dec 2024 13:23:09 +0000
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <DB9PR09MB6887F77BC9F9781176C72C3AFD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
 <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <5bb31995-4a21-4dc2-be25-6515ce1a9c01@spatialys.com>
 <DB9PR09MB6887F77BC9F9781176C72C3AFD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <DB9PR09MB6887433D7EFB75D1F1EDB098FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

All right, TestCapability(ogr.OLCFastSpatialFilter) is the answer gdal - How to check if FlatGeobuf layer has a spatial index? - Geographic Information Systems Stack Exchange<https://gis.stackexchange.com/questions/488511/how-to-check-if-flatgeobuf-layer-has-a-spatial-index>.

-Jukka Rahkonen-



L?hett?j?: Rahkonen Jukka
L?hetetty: perjantai 6. joulukuuta 2024 15.12
Vastaanottaja: Even Rouault <even.rouault at spatialys.com>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Where to find a FlatGeobuf test file?

Hi,

Has there been a change in writing the layer extent?
I thought that the test https://github.com/OSGeo/gdal/blob/e4d1f7ff474ceeffd69b1ceef3fa635428788e8c/autotest/ogr/ogr_flatgeobuf.py#L182 is testing with TestCapability(ogr.OLCFastGetExtent) if spatial index exists. At least the test file  data/testfgb/poly_no_index.fgb shows false for this capability.

I am not really interested in the layer extent, what I want to know is how can I check if an existing FlatGeobuf file has spatial index or not.

-Jukka-

L?hett?j?: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
L?hetetty: perjantai 6. joulukuuta 2024 12.37
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>) <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Aihe: Re: [gdal-dev] Where to find a FlatGeobuf test file?


Hi Jukka,
Le 06/12/2024 ? 11:13, Rahkonen Jukka a ?crit :
Next question: Why this gives true for me?

OLCFastGetExtent != OLCFastSpatialFilter

The layer extent is written in the FlatGeoBuf layer even in the SPATIAL_INDEX=NO case, so retrieving the extent is fast.

Even



--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241206/67d4d64a/attachment.htm>

From even.rouault at spatialys.com  Fri Dec  6 05:24:35 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Dec 2024 14:24:35 +0100
Subject: [gdal-dev] Where to find a FlatGeobuf test file?
In-Reply-To: <DB9PR09MB6887F77BC9F9781176C72C3AFD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB68870A32BD51046F8BF487F2FD302@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <22801e74-209a-4e13-b0a0-f011b0bc1081@spatialys.com>
 <DB9PR09MB6887C550F37BB533682E4E83FD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <5bb31995-4a21-4dc2-be25-6515ce1a9c01@spatialys.com>
 <DB9PR09MB6887F77BC9F9781176C72C3AFD312@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <f80e3eca-07c0-4dc7-920f-ee2f6855d32a@spatialys.com>

Jukka,

I'm not sure how poly_no_index.fgb was generated. Perhaps no with OGR or 
perhaps with an earlier version that didn't write the layer extent in 
the FlatGeobuf header. The extent is optional, and this file doesn't 
have one.

To test the presence of the spatial index use 
TestCapability(ogr.OLCFastSpatialFilter)

$ python3 -c "from osgeo import ogr; ogr.UseExceptions(); ds = 
ogr.Open('autotest/ogr/data/testfgb/poly_no_index.fgb'); lyr = 
ds.GetLayer(0); print(lyr.TestCapability(ogr.OLCFastSpatialFilter))"
False

$ python3 -c "from osgeo import ogr; ogr.UseExceptions(); ds = 
ogr.Open('autotest/ogr/data/testfgb/poly.fgb'); lyr = ds.GetLayer(0); 
print(lyr.TestCapability(ogr.OLCFastSpatialFilter))"
True

Le 06/12/2024 ? 14:12, Rahkonen Jukka a ?crit?:
>
> Hi,
>
> Has there been a change in writing the layer extent?
>
> I thought that the test 
> https://github.com/OSGeo/gdal/blob/e4d1f7ff474ceeffd69b1ceef3fa635428788e8c/autotest/ogr/ogr_flatgeobuf.py#L182 
> is testing with TestCapability(ogr.OLCFastGetExtent) if spatial index 
> exists. At least the test file data/testfgb/poly_no_index.fgb shows 
> false for this capability.
>
> I am not really interested in the layer extent, what I want to know is 
> how can I check if an existing FlatGeobuf file has spatial index or not.
>
> -Jukka-
>
> *L?hett?j?:*Even Rouault <even.rouault at spatialys.com>
> *L?hetetty:* perjantai 6. joulukuuta 2024 12.37
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; 
> 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) 
> <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] Where to find a FlatGeobuf test file?
>
> Hi Jukka,
>
> Le 06/12/2024 ? 11:13, Rahkonen Jukka a ?crit?:
>
>     Next question: Why this gives true for me?
>
> OLCFastGetExtent != OLCFastSpatialFilter
>
> The layer extent is written in the FlatGeoBuf layer even in the 
> SPATIAL_INDEX=NO case, so retrieving the extent is fast.
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241206/5a3af751/attachment.htm>

From lve0200 at gmail.com  Sun Dec  8 11:24:34 2024
From: lve0200 at gmail.com (Hans Kurscheidt)
Date: Sun, 8 Dec 2024 20:24:34 +0100
Subject: [gdal-dev] linker error after upgrade to Debian Bookworm
In-Reply-To: <25de8ae6-1412-4087-b6fd-a2292c9d71b4@gmail.com>
References: <25de8ae6-1412-4087-b6fd-a2292c9d71b4@gmail.com>
Message-ID: <5af8f7d6-b094-4906-be75-278efb95e8a5@gmail.com>

> To whom it may concern
>
> After upgrading to Debian Bookworm I get the following linker errors:
>
> /usr/lib/gcc/aarch64-linux-gnu/10/../../../../lib/libgdal.so: 
> undefined reference to `libdap::DDS::var_end()'
>
> /usr/lib/gcc/aarch64-linux-gnu/10/../../../../lib/libgdal.so: 
> undefined reference to `libdap::DDS::var_begin()'
>
>
> I'm linking w/ gdal
>
> I've installed
>
> gdal-bin/now 3.2.2+dfsg-2+deb11u2 arm64 [installed,upgradable to: 
> 3.6.2+dfsg-1+b2]
> gdal-data/stable,stable,now 3.6.2+dfsg-1 all [installed,automatic]
> libgdal-dev/now 3.2.2+dfsg-2+deb11u2 arm64 [installed,upgradable to: 
> 3.6.2+dfsg-1+b2]
> libgdal-doc/now 2.4.0+dfsg-1 all [installed,local]
> libgdal20/now 2.4.0+dfsg-1+b1 arm64 [installed,local]
> libgdal28/now 3.2.2+dfsg-2+deb11u2 arm64 [installed,local]
> python3-gdal/now 3.2.2+dfsg-2+deb11u2 arm64 [installed,upgradable to: 
> 3.6.2+dfsg-1+b2]
>
>
> No clue! please help
>
> Best Regards
>
> hk
>
>

From even.rouault at spatialys.com  Mon Dec  9 03:30:17 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Dec 2024 12:30:17 +0100
Subject: [gdal-dev] Motion: approve funding for Breathe project
Message-ID: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>

Hi PSC,

The Breathe project (https://github.com/breathe-doc/breathe) that GDAL 
and PROJ depends on to format their C++ Doxygen documentation into 
Sphinx compatible documentation is currently seeking for funding to help 
for its maintenance (dealing with deprecation in Sphinx related 
projects, cutting new releases, processing the pull request queue, 
etc.). Given the focus for better documentation expressed by respondents 
to our user survey, it seems to be a good investment for the GDAL 
project to make sure its documentation framework remains in a healthy shape.

Motion: approve the use of up to 2,500 USD by the Breathe project for 
their maintenance activities until end of year 2025, funded through the 
GDAL Sponsorhip program.

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From jukka.rahkonen at maanmittauslaitos.fi  Mon Dec  9 04:04:49 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 9 Dec 2024 12:04:49 +0000
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
Message-ID: <DB9PR09MB68876EFA4FA48CDCBA1AB251FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: maanantai 9. joulukuuta 2024 13.30
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: approve funding for Breathe project

Hi PSC,

The Breathe project (https://github.com/breathe-doc/breathe) that GDAL and PROJ depends on to format their C++ Doxygen documentation into Sphinx compatible documentation is currently seeking for funding to help for its maintenance (dealing with deprecation in Sphinx related projects, cutting new releases, processing the pull request queue, etc.). Given the focus for better documentation expressed by respondents to our user survey, it seems to be a good investment for the GDAL project to make sure its documentation framework remains in a healthy shape.

Motion: approve the use of up to 2,500 USD by the Breathe project for their maintenance activities until end of year 2025, funded through the GDAL Sponsorhip program.

Starting with my +1,

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From j1 at jimenezshaw.com  Mon Dec  9 04:09:03 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 9 Dec 2024 13:09:03 +0100
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <DB9PR09MB68876EFA4FA48CDCBA1AB251FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
 <DB9PR09MB68876EFA4FA48CDCBA1AB251FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <CADRrdKvcNnOvc4g2aVEbzM4hH3Yj4tXYYQy0AOUFzq9wJMC_iA@mail.gmail.com>

+1 Javier

On Mon, 9 Dec 2024 at 13:05, Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> L?hetetty: maanantai 9. joulukuuta 2024 13.30
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: approve funding for Breathe project
>
> Hi PSC,
>
> The Breathe project (https://github.com/breathe-doc/breathe) that GDAL
> and PROJ depends on to format their C++ Doxygen documentation into Sphinx
> compatible documentation is currently seeking for funding to help for its
> maintenance (dealing with deprecation in Sphinx related projects, cutting
> new releases, processing the pull request queue, etc.). Given the focus for
> better documentation expressed by respondents to our user survey, it seems
> to be a good investment for the GDAL project to make sure its documentation
> framework remains in a healthy shape.
>
> Motion: approve the use of up to 2,500 USD by the Breathe project for
> their maintenance activities until end of year 2025, funded through the
> GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/9fbd1571/attachment.htm>

From even.rouault at spatialys.com  Mon Dec  9 06:10:34 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Dec 2024 15:10:34 +0100
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
Message-ID: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>

Hi PSC (again),

I would like to nominate Dan Baston to become a member of the GDAL 
Project Steering Committee.

Dan has been contributing to the project since 2019, and more 
significantly since end of 2022, and his funding to work on the project 
extends for the next 3 years. Dan's contributions touch various areas of 
the project: modernization of the test suite, documentation improvements 
(both on the framework and content), Python bindings improvements, 
utilities, C++ sanitation, etc. He attends our regular contributor 
meetings, and was also present at the last OSGeo code sprint to work on 
GDAL. He's also a GEOS project steering committee member and a PostGIS 
core developer. It would make a lot of sense that he can have a vote for 
project decisions.

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From j1 at jimenezshaw.com  Mon Dec  9 06:13:02 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 9 Dec 2024 15:13:02 +0100
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
Message-ID: <CADRrdKsgdqhgwAoiJOeZD=b1m0oDbJgr7rh972LegvAG4a9JQA@mail.gmail.com>

+1 Javier

On Mon, 9 Dec 2024 at 15:10, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi PSC (again),
>
> I would like to nominate Dan Baston to become a member of the GDAL
> Project Steering Committee.
>
> Dan has been contributing to the project since 2019, and more
> significantly since end of 2022, and his funding to work on the project
> extends for the next 3 years. Dan's contributions touch various areas of
> the project: modernization of the test suite, documentation improvements
> (both on the framework and content), Python bindings improvements,
> utilities, C++ sanitation, etc. He attends our regular contributor
> meetings, and was also present at the last OSGeo code sprint to work on
> GDAL. He's also a GEOS project steering committee member and a PostGIS
> core developer. It would make a lot of sense that he can have a vote for
> project decisions.
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/8d9aacbe/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Dec  9 06:26:54 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 9 Dec 2024 14:26:54 +0000
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
Message-ID: <DB9PR09MB6887BB3036EA2FCDF6411719FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: maanantai 9. joulukuuta 2024 16.11
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: add Dan Baston to GDAL PSC

Hi PSC (again),

I would like to nominate Dan Baston to become a member of the GDAL Project Steering Committee.

Dan has been contributing to the project since 2019, and more significantly since end of 2022, and his funding to work on the project extends for the next 3 years. Dan's contributions touch various areas of the project: modernization of the test suite, documentation improvements (both on the framework and content), Python bindings improvements, utilities, C++ sanitation, etc. He attends our regular contributor meetings, and was also present at the last OSGeo code sprint to work on GDAL. He's also a GEOS project steering committee member and a PostGIS core developer. It would make a lot of sense that he can have a vote for project decisions.

Starting with my +1,

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Mon Dec  9 06:34:47 2024
From: howard at hobu.co (Howard Butler)
Date: Mon, 9 Dec 2024 08:34:47 -0600
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <DB9PR09MB6887BB3036EA2FCDF6411719FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
 <DB9PR09MB6887BB3036EA2FCDF6411719FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <DAFC69C4-0067-4F56-A899-E186E4664D98@hobu.co>

An emphatic +1!

Howard

> On Dec 9, 2024, at 8:26?AM, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
> L?hetetty: maanantai 9. joulukuuta 2024 16.11
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: add Dan Baston to GDAL PSC
> 
> Hi PSC (again),
> 
> I would like to nominate Dan Baston to become a member of the GDAL Project Steering Committee.
> 
> Dan has been contributing to the project since 2019, and more significantly since end of 2022, and his funding to work on the project extends for the next 3 years. Dan's contributions touch various areas of the project: modernization of the test suite, documentation improvements (both on the framework and content), Python bindings improvements, utilities, C++ sanitation, etc. He attends our regular contributor meetings, and was also present at the last OSGeo code sprint to work on GDAL. He's also a GEOS project steering committee member and a PostGIS core developer. It would make a lot of sense that he can have a vote for project decisions.
> 
> Starting with my +1,
> 
> Even
> 
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From howard at hobu.co  Mon Dec  9 06:35:18 2024
From: howard at hobu.co (Howard Butler)
Date: Mon, 9 Dec 2024 08:35:18 -0600
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <CADRrdKvcNnOvc4g2aVEbzM4hH3Yj4tXYYQy0AOUFzq9wJMC_iA@mail.gmail.com>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
 <DB9PR09MB68876EFA4FA48CDCBA1AB251FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CADRrdKvcNnOvc4g2aVEbzM4hH3Yj4tXYYQy0AOUFzq9wJMC_iA@mail.gmail.com>
Message-ID: <CCBDE0F3-9D8F-4ADE-B80F-6F6562911EFB@hobu.co>

+1 Howard

> On Dec 9, 2024, at 6:09?AM, Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1 Javier
> 
> On Mon, 9 Dec 2024 at 13:05, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:
>> +1
>> 
>> -Jukka Rahkonen-
>> 
>> -----Alkuper?inen viesti-----
>> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org <mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Even Rouault via gdal-dev
>> L?hetetty: maanantai 9. joulukuuta 2024 13.30
>> Vastaanottaja: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> Aihe: [gdal-dev] Motion: approve funding for Breathe project
>> 
>> Hi PSC,
>> 
>> The Breathe project (https://github.com/breathe-doc/breathe) that GDAL and PROJ depends on to format their C++ Doxygen documentation into Sphinx compatible documentation is currently seeking for funding to help for its maintenance (dealing with deprecation in Sphinx related projects, cutting new releases, processing the pull request queue, etc.). Given the focus for better documentation expressed by respondents to our user survey, it seems to be a good investment for the GDAL project to make sure its documentation framework remains in a healthy shape.
>> 
>> Motion: approve the use of up to 2,500 USD by the Breathe project for their maintenance activities until end of year 2025, funded through the GDAL Sponsorhip program.
>> 
>> Starting with my +1,
>> 
>> Even
>> 
>> --
>> http://www.spatialys.com/
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/241f4117/attachment.htm>

From warmerdam at pobox.com  Mon Dec  9 07:10:54 2024
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 9 Dec 2024 10:10:54 -0500
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <DAFC69C4-0067-4F56-A899-E186E4664D98@hobu.co>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
 <DB9PR09MB6887BB3036EA2FCDF6411719FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <DAFC69C4-0067-4F56-A899-E186E4664D98@hobu.co>
Message-ID: <CA+YzLBcu3-WnpPwSk34D4wd_UTo+fwk+UfuBAteh4T3Qj_qHqg@mail.gmail.com>

+1 Frank


On Mon, Dec 9, 2024 at 9:35?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> An emphatic +1!
>
> Howard
>
> > On Dec 9, 2024, at 8:26?AM, Rahkonen Jukka via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
> >
> > +1
> >
> > -Jukka Rahkonen-
> >
> > -----Alkuper?inen viesti-----
> > L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
> Rouault via gdal-dev
> > L?hetetty: maanantai 9. joulukuuta 2024 16.11
> > Vastaanottaja: gdal-dev at lists.osgeo.org
> > Aihe: [gdal-dev] Motion: add Dan Baston to GDAL PSC
> >
> > Hi PSC (again),
> >
> > I would like to nominate Dan Baston to become a member of the GDAL
> Project Steering Committee.
> >
> > Dan has been contributing to the project since 2019, and more
> significantly since end of 2022, and his funding to work on the project
> extends for the next 3 years. Dan's contributions touch various areas of
> the project: modernization of the test suite, documentation improvements
> (both on the framework and content), Python bindings improvements,
> utilities, C++ sanitation, etc. He attends our regular contributor
> meetings, and was also present at the last OSGeo code sprint to work on
> GDAL. He's also a GEOS project steering committee member and a PostGIS core
> developer. It would make a lot of sense that he can have a vote for project
> decisions.
> >
> > Starting with my +1,
> >
> > Even
> >
> > --
> > http://www.spatialys.com/
> > My software is free, but my time generally not.
> > Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/c71a509d/attachment.htm>

From warmerdam at pobox.com  Mon Dec  9 07:12:11 2024
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 9 Dec 2024 10:12:11 -0500
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <CCBDE0F3-9D8F-4ADE-B80F-6F6562911EFB@hobu.co>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
 <DB9PR09MB68876EFA4FA48CDCBA1AB251FD3C2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CADRrdKvcNnOvc4g2aVEbzM4hH3Yj4tXYYQy0AOUFzq9wJMC_iA@mail.gmail.com>
 <CCBDE0F3-9D8F-4ADE-B80F-6F6562911EFB@hobu.co>
Message-ID: <CA+YzLBe8NOZokTBpaM7DttQE3De6Nj_ncoBzJsUTuWR5e3bqkw@mail.gmail.com>

+1 Frank

On Mon, Dec 9, 2024 at 9:35?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 Howard
>
> On Dec 9, 2024, at 6:09?AM, Javier Jimenez Shaw via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
> +1 Javier
>
> On Mon, 9 Dec 2024 at 13:05, Rahkonen Jukka via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> +1
>>
>> -Jukka Rahkonen-
>>
>> -----Alkuper?inen viesti-----
>> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even
>> Rouault via gdal-dev
>> L?hetetty: maanantai 9. joulukuuta 2024 13.30
>> Vastaanottaja: gdal-dev at lists.osgeo.org
>> Aihe: [gdal-dev] Motion: approve funding for Breathe project
>>
>> Hi PSC,
>>
>> The Breathe project (https://github.com/breathe-doc/breathe) that GDAL
>> and PROJ depends on to format their C++ Doxygen documentation into Sphinx
>> compatible documentation is currently seeking for funding to help for its
>> maintenance (dealing with deprecation in Sphinx related projects, cutting
>> new releases, processing the pull request queue, etc.). Given the focus for
>> better documentation expressed by respondents to our user survey, it seems
>> to be a good investment for the GDAL project to make sure its documentation
>> framework remains in a healthy shape.
>>
>> Motion: approve the use of up to 2,500 USD by the Breathe project for
>> their maintenance activities until end of year 2025, funded through the
>> GDAL Sponsorhip program.
>>
>> Starting with my +1,
>>
>> Even
>>
>> --
>> http://www.spatialys.com/
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end,
>> this is just about bytes.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/066f4867/attachment-0001.htm>

From dmorissette at mapgears.com  Mon Dec  9 07:33:18 2024
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 9 Dec 2024 10:33:18 -0500
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
Message-ID: <e0ffdbaa-b3d5-4c59-b875-477780033451@mapgears.com>

+1

Daniel

On 2024-12-09 09:10, Even Rouault via gdal-dev wrote:
> Hi PSC (again),
>
> I would like to nominate Dan Baston to become a member of the GDAL 
> Project Steering Committee.
>
> Dan has been contributing to the project since 2019, and more 
> significantly since end of 2022, and his funding to work on the 
> project extends for the next 3 years. Dan's contributions touch 
> various areas of the project: modernization of the test suite, 
> documentation improvements (both on the framework and content), Python 
> bindings improvements, utilities, C++ sanitation, etc. He attends our 
> regular contributor meetings, and was also present at the last OSGeo 
> code sprint to work on GDAL. He's also a GEOS project steering 
> committee member and a PostGIS core developer. It would make a lot of 
> sense that he can have a vote for project decisions.
>
> Starting with my +1,
>
> Even
>

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/d32988a5/attachment.htm>

From dmorissette at mapgears.com  Mon Dec  9 07:44:53 2024
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 9 Dec 2024 10:44:53 -0500
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
Message-ID: <ed128ef7-ce04-4996-bdb4-3ee27ff728f7@mapgears.com>

+1

Daniel


On 2024-12-09 06:30, Even Rouault via gdal-dev wrote:
> Hi PSC,
>
> The Breathe project (https://github.com/breathe-doc/breathe) that GDAL 
> and PROJ depends on to format their C++ Doxygen documentation into 
> Sphinx compatible documentation is currently seeking for funding to 
> help for its maintenance (dealing with deprecation in Sphinx related 
> projects, cutting new releases, processing the pull request queue, 
> etc.). Given the focus for better documentation expressed by 
> respondents to our user survey, it seems to be a good investment for 
> the GDAL project to make sure its documentation framework remains in a 
> healthy shape.
>
> Motion: approve the use of up to 2,500 USD by the Breathe project for 
> their maintenance activities until end of year 2025, funded through 
> the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/c19ea2e7/attachment.htm>

From even.rouault at spatialys.com  Mon Dec  9 08:52:28 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Dec 2024 17:52:28 +0100
Subject: [gdal-dev] OpenJPEG 2.5.3 has been released
Message-ID: <e3f949c4-da99-4a30-89fa-45b510d05d5a@spatialys.com>

Hi,

OpenJPEG 2.5.3 has been released: 
https://www.openjpeg.org/2024/12/09/OpenJPEG-2.5.3-released

This is mainly a bugfix release, as detailed in the Changelog hereunder, 
with a few new features:

  * Use TLM (Tile Length Marker) segments to optimize decoding:
    https://github.com/uclouvain/openjpeg/pull/1538
  * Add AVX2 and AVX512 optimization:
    https://github.com/uclouvain/openjpeg/pull/1552
  * Support setting enumcs for CMYK and EYCC color space:
    https://github.com/uclouvain/openjpeg/pull/1529

More info:
- NEWS.md: https://github.com/uclouvain/openjpeg/blob/v2.5.3/NEWS.md
- Changelog: https://github.com/uclouvain/openjpeg/blob/v2.5.3/CHANGELOG.md
- Full Changelog: 
https://github.com/uclouvain/openjpeg/compare/v2.5.2...v2.5.3

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241209/2f29e41b/attachment.htm>

From michkowalczuk at gmail.com  Tue Dec 10 05:48:31 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Tue, 10 Dec 2024 14:48:31 +0100
Subject: [gdal-dev] WMTS ResourceURL
Message-ID: <CAP+FqQCYTFqOzSpCkdyV4yOi39A9en8moRfrufVpgL2xREr1UQ@mail.gmail.com>

Dear GDAL friends,

The following WMTS server:
*https://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.xml
<https://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.xml>*
for layer *fmzk3dviewer*
provides 5 resource URLS:




*<ResourceURL format="image/png"
template="http://maps1.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png
<http://maps1.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png>"
resourceType="tile"/><ResourceURL format="image/png"
template="http://maps2.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png
<http://maps2.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png>"
resourceType="tile"/><ResourceURL format="image/png"
template="http://maps3.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png
<http://maps3.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png>"
resourceType="tile"/><ResourceURL format="image/png"
template="http://maps4.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png
<http://maps4.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png>"
resourceType="tile"/><ResourceURL format="image/png"
template="http://maps.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png
<http://maps.wien.gv.at/wmts/fmzk3dviewer/{Style}/google3857/{TileMatrix}/{TileRow}/{TileCol}.png>"
resourceType="tile"/>*

GDAL uses the first from the list:
*http://maps1.wien.gv.at/wmts/fmzk3dviewer.
<http://wien.gv.at/wmts/fmzk3dviewer.>..*
which from unknown reasons fails.

For the same server QGIS choses the right (the last from the list):
*http://maps.wien.gv.at/wmts/fmzk3dviewer.
<http://wien.gv.at/wmts/fmzk3dviewer.>..*
which works.

Does GDAL try to change the resource URL if another fails?
Is there a possibility to control it?

https://maps.wien.gv.at/wmts/fmzk3dviewer/pastell/google3857/13/2837/4472.png
https://maps1.wien.gv.at/wmts/fmzk3dviewer/pastell/google3857/13/2837/4472.png

Best regards,
Micha? Kowalczuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241210/ab7d6444/attachment.htm>

From even.rouault at spatialys.com  Tue Dec 10 06:02:24 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Dec 2024 15:02:24 +0100
Subject: [gdal-dev] WMTS ResourceURL
In-Reply-To: <CAP+FqQCYTFqOzSpCkdyV4yOi39A9en8moRfrufVpgL2xREr1UQ@mail.gmail.com>
References: <CAP+FqQCYTFqOzSpCkdyV4yOi39A9en8moRfrufVpgL2xREr1UQ@mail.gmail.com>
Message-ID: <f0a23c39-2c9c-40ef-8570-bd1aa704e8b7@spatialys.com>

Short and long answers:
>
> Does GDAL try to change the resource URL if another fails?
No
> Is there a possibility to control it?

No

The fix is that the service administrator removes broken URLs, or you 
download the GetCapabilities XML file and remove them.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From michkowalczuk at gmail.com  Tue Dec 10 13:51:41 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Tue, 10 Dec 2024 22:51:41 +0100
Subject: [gdal-dev] WMTS Possible rounding error
Message-ID: <CAP+FqQCCi9wY2E5F1FwoB=-TJu8njK4NvODG25cLU_U-aX-L1g@mail.gmail.com>

Hi,
Consider the following WMTS service:
*WMTS:https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm>*

and try to get whole extent:
*gdal_translate -srcwin 0 0 1852166785 1511812353 -outsize 570 465
"WMTS:https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm>"
tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
(where 1852166785 1511812353  is a raster size)

GDAL creates 4 requests:




*HTTP: Requesting [1/4]
https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/0
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/0>HTTP:
Requesting [2/4]
https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/1
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/1>HTTP:
Requesting [3/4]
https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/2
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/2>HTTP:
Requesting [4/4]
https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/3
<https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/3>*

where the last tile does not exist. So it probably should stop at /1/0/2.
Isn't it a rounding error?

Best regards
Micha? Kowalczuk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241210/a7b830d2/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Dec 10 14:10:54 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 10 Dec 2024 22:10:54 +0000
Subject: [gdal-dev] WMTS Possible rounding error
In-Reply-To: <CAP+FqQCCi9wY2E5F1FwoB=-TJu8njK4NvODG25cLU_U-aX-L1g@mail.gmail.com>
References: <CAP+FqQCCi9wY2E5F1FwoB=-TJu8njK4NvODG25cLU_U-aX-L1g@mail.gmail.com>
Message-ID: <DB9PR09MB6887CEA67BF8912515824FAAFD3D2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

I read from the GetCapabilities that the URL template is like .../{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}

The size of tile matrix 1 "<ows:Identifier>1</ows:Identifier>" is
<MatrixWidth>4</MatrixWidth>
<MatrixHeight>3</MatrixHeight>

The WMTS standard tells about TileCol
"...else SHALL be any integer value between 0 and
MatrixWidth - 1, see Table 14, (both included)"

Thus TileCol 3 SHALL exist, but on that server it does not seem to exist. I think it is clearly a server error. If the server does not have TileCol=3 intentionally, it should advertise that with TileMatrixSetLimits in the GetCapabilities.

I may be wrong, I have not been reading and interpreting the WMTS standard super much.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Michal Kowalczuk via gdal-dev
L?hetetty: tiistai 10. joulukuuta 2024 23.52
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] WMTS Possible rounding error

Hi,
Consider the following WMTS service:
WMTS:https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm

and try to get whole extent:
gdal_translate -srcwin 0 0 1852166785 1511812353 -outsize 570 465 "WMTS:https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/1.0.0/WMTSCapabilities.xml?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=USGSHydroCached,tilematrixset=default028mm" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO
(where 1852166785 1511812353  is a raster size)

GDAL creates 4 requests:

HTTP: Requesting [1/4] https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/0
HTTP: Requesting [2/4] https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/1
HTTP: Requesting [3/4] https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/2
HTTP: Requesting [4/4] https://basemap.nationalmap.gov/arcgis/rest/services/USGSHydroCached/MapServer/WMTS/tile/1.0.0/USGSHydroCached/default/default028mm/1/0/3

where the last tile does not exist. So it probably should stop at /1/0/2.
Isn't it a rounding error?

Best regards
Micha? Kowalczuk


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241210/c73fe523/attachment.htm>

From even.rouault at spatialys.com  Wed Dec 11 07:53:26 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Dec 2024 16:53:26 +0100
Subject: [gdal-dev] Motion: approve funding for Breathe project
In-Reply-To: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
References: <fdaccbbf-b8aa-4cfa-a51d-f34a8653772a@spatialys.com>
Message-ID: <38fe3237-db29-4eed-b2c2-56e5d158cf1b@spatialys.com>

Motion passed with +1 from PSC members JukkaR, JavierJS, HowardB, FrankW 
and me

Le 09/12/2024 ? 12:30, Even Rouault via gdal-dev a ?crit?:
> Hi PSC,
>
> The Breathe project (https://github.com/breathe-doc/breathe) that GDAL 
> and PROJ depends on to format their C++ Doxygen documentation into 
> Sphinx compatible documentation is currently seeking for funding to 
> help for its maintenance (dealing with deprecation in Sphinx related 
> projects, cutting new releases, processing the pull request queue, 
> etc.). Given the focus for better documentation expressed by 
> respondents to our user survey, it seems to be a good investment for 
> the GDAL project to make sure its documentation framework remains in a 
> healthy shape.
>
> Motion: approve the use of up to 2,500 USD by the Breathe project for 
> their maintenance activities until end of year 2025, funded through 
> the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From even.rouault at spatialys.com  Wed Dec 11 07:54:34 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Dec 2024 16:54:34 +0100
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
Message-ID: <57d456b7-a983-4b5d-95ef-189eb9440fbe@spatialys.com>

Motion passed with +1 from PSC members JavierJS, JukkaR, HowardB, 
FrankW, DanielM and me

Dan, welcome on board!

Le 09/12/2024 ? 15:10, Even Rouault via gdal-dev a ?crit?:
> Hi PSC (again),
>
> I would like to nominate Dan Baston to become a member of the GDAL 
> Project Steering Committee.
>
> Dan has been contributing to the project since 2019, and more 
> significantly since end of 2022, and his funding to work on the 
> project extends for the next 3 years. Dan's contributions touch 
> various areas of the project: modernization of the test suite, 
> documentation improvements (both on the framework and content), Python 
> bindings improvements, utilities, C++ sanitation, etc. He attends our 
> regular contributor meetings, and was also present at the last OSGeo 
> code sprint to work on GDAL. He's also a GEOS project steering 
> committee member and a PostGIS core developer. It would make a lot of 
> sense that he can have a vote for project decisions.
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From dbaston at gmail.com  Wed Dec 11 08:16:43 2024
From: dbaston at gmail.com (Daniel Baston)
Date: Wed, 11 Dec 2024 11:16:43 -0500
Subject: [gdal-dev] Motion: add Dan Baston to GDAL PSC
In-Reply-To: <57d456b7-a983-4b5d-95ef-189eb9440fbe@spatialys.com>
References: <d5f0c7cf-bacc-4001-a3a3-63fd935fc865@spatialys.com>
 <57d456b7-a983-4b5d-95ef-189eb9440fbe@spatialys.com>
Message-ID: <CA+K_q_q1hQTb9P2zVSBPwsejPskGy16mU5QTW7Fq3_8_Q1rYgA@mail.gmail.com>

Thank you!

Dan

On Wed, Dec 11, 2024 at 10:54?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Motion passed with +1 from PSC members JavierJS, JukkaR, HowardB,
> FrankW, DanielM and me
>
> Dan, welcome on board!
>
> Le 09/12/2024 ? 15:10, Even Rouault via gdal-dev a ?crit :
> > Hi PSC (again),
> >
> > I would like to nominate Dan Baston to become a member of the GDAL
> > Project Steering Committee.
> >
> > Dan has been contributing to the project since 2019, and more
> > significantly since end of 2022, and his funding to work on the
> > project extends for the next 3 years. Dan's contributions touch
> > various areas of the project: modernization of the test suite,
> > documentation improvements (both on the framework and content), Python
> > bindings improvements, utilities, C++ sanitation, etc. He attends our
> > regular contributor meetings, and was also present at the last OSGeo
> > code sprint to work on GDAL. He's also a GEOS project steering
> > committee member and a PostGIS core developer. It would make a lot of
> > sense that he can have a vote for project decisions.
> >
> > Starting with my +1,
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241211/16e58e8f/attachment.htm>

From even.rouault at spatialys.com  Wed Dec 11 16:37:54 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Dec 2024 01:37:54 +0100
Subject: [gdal-dev] Memory safe GDAL experiment using Fil-C
Message-ID: <bfd172c8-5771-4f0f-9d45-8d2ab906427d@spatialys.com>

Hi,

I've discovered the Fil-C project, hosted at 
https://github.com/pizlonator/llvm-project-deluge, which offers a 
modified clang toolchain and instrumented libc that brings memory safety 
to the C/C++ ecosystem with little changes in source code and build 
scripts. I've given it a try and that seems promising. With a few small 
patches here and there to remove some iffy / unusual uses of C in PROJ 
and GDAL that Fil-C doesn't understand well yet, or adapt build scripts 
of libzstd (although it seems broken at runtime) and libtiff, I've 
managed to get a GDAL build functional enough to read & write GeoTIFF 
and GeoPackage, and presumably more. Obviously there's a price to pay, 
and I did notice the x2 to x4 runtime slowdown mentioned by the project. 
But that could still be of interest for the most security minded people 
who haven't yet had the time to rewrite the whole stack in Rust :-)

How to build such hardened GDAL? Rough procedure (which is probably 
slightly broken since I didn't repeat it from scratch):

git clone https://github.com/rouault/llvm-project-deluge --branch gdal
cd llvm-project-deluge
docker run --rm -it -v $PWD:/work ubuntu:24.04
cd /work
./build_gdal_all.sh? # and wait for a few hours

You should get your binaries in /work/pizfix/bin

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From mdsumner at gmail.com  Wed Dec 11 21:40:15 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 12 Dec 2024 16:40:15 +1100
Subject: [gdal-dev] convert raster to raw table ?
Message-ID: <CAAcGz9-Pfciv0eaEnviON8460FSjhJGiCtrsmUS=_MC7J4VOyw@mail.gmail.com>

Hi, I'd like to be able to create a tabular version efficiently directly
from a raster. I can do this in scripting but is there a utility- or api-
way to do this?

I literally just want a Parquet file with a column for each band from a
raster, with raw pixel values, no index, no coordinates, no rat or anything
like that. I have very common workflows for this where the georeferencing
(bbox, shape, crs) is just used manually.

If this doesn't exist a barebones outline would be amazing (!), and (I)
could add features like column names, cell index or row/col index,
coordinates, sparse representation for missing values etc etc.

An imagined -info output would look like this for a 2x3 raster with 2 bands
and values 1:6 in band 1, and values 7:12 in band 2 described  below.

thanks so much, Mike




gdalinfo file.tif
Driver: GTiff/GeoTIFF
Files: file.tif
Size is 3, 2
Origin = (0.000000000000000,2.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (   0.0000000,   2.0000000)
Lower Left  (   0.0000000,   0.0000000)
Upper Right (   3.0000000,   2.0000000)
Lower Right (   3.0000000,   0.0000000)
Center      (   1.5000000,   1.0000000)
Band 1 Block=3x2 Type=UInt32, ColorInterp=Gray
  Description = a
  Min=1.000 Max=6.000
  Minimum=1.000, Maximum=6.000, Mean=-9999.000, StdDev=-9999.000
  NoData Value=4294967295
  Metadata:
    STATISTICS_MINIMUM=1
    STATISTICS_MAXIMUM=6
    STATISTICS_MEAN=-9999
    STATISTICS_STDDEV=-9999
Band 2 Block=3x2 Type=UInt32, ColorInterp=Undefined
  Description = b
  Min=7.000 Max=12.000
  Minimum=7.000, Maximum=12.000, Mean=-9999.000, StdDev=-9999.000
  NoData Value=4294967295
  Metadata:
    STATISTICS_MINIMUM=7
    STATISTICS_MAXIMUM=12
    STATISTICS_MEAN=-9999
    STATISTICS_STDDEV=-9999



INFO: Open of `file.parquet'
      using driver `Parquet' successful.

Layer name: file
Geometry: None
Feature Count: 6
Layer SRS WKT:
(unknown)
a: Integer (0.0)
b: Integer (0.0)
OGRFeature(file):0
  a (Integer) = 1
  b (Integer) = 7

OGRFeature(file):1
  a (Integer) = 3
  b (Integer) = 9

OGRFeature(file):2
  a (Integer) = 5
  b (Integer) = 11

OGRFeature(file):3
  a (Integer) = 2
  b (Integer) = 8

OGRFeature(file):4
  a (Integer) = 4
  b (Integer) = 10

OGRFeature(file):5
  a (Integer) = 6
  b (Integer) = 12


-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241212/ec826d00/attachment.htm>

From even.rouault at spatialys.com  Thu Dec 12 03:41:44 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Dec 2024 12:41:44 +0100
Subject: [gdal-dev] convert raster to raw table ?
In-Reply-To: <CAAcGz9-Pfciv0eaEnviON8460FSjhJGiCtrsmUS=_MC7J4VOyw@mail.gmail.com>
References: <CAAcGz9-Pfciv0eaEnviON8460FSjhJGiCtrsmUS=_MC7J4VOyw@mail.gmail.com>
Message-ID: <5663fc03-4bec-4dfc-8f98-0ee26bdc769f@spatialys.com>

Michael,

doesn't do exactly what you want, but should be easy to modify to 
satisfy your requirements: 
https://github.com/OSGeo/gdal/blob/master/apps/gdal2ogr.c

Even

Le 12/12/2024 ? 06:40, Michael Sumner via gdal-dev a ?crit?:
> Hi, I'd like to be able to create a tabular version efficiently 
> directly from a raster. I can do this in scripting but is there a 
> utility- or api- way to do this?
>
> I literally just want a Parquet file with a column for each band from 
> a raster, with raw pixel values, no index, no coordinates, no rat or 
> anything like that. I have very common workflows for this where the 
> georeferencing (bbox, shape, crs) is just used manually.
>
> If this doesn't exist a barebones outline would be amazing (!), and 
> (I) could add features like column names, cell index or row/col index, 
> coordinates, sparse representation for missing values etc etc.
>
> An imagined -info output would look like this for a 2x3 raster with 2 
> bands and values 1:6 in band 1, and values 7:12 in band 2 described? 
> below.
>
> thanks so much, Mike
>
>
>
>
> gdalinfo file.tif
> Driver: GTiff/GeoTIFF
> Files: file.tif
> Size is 3, 2
> Origin = (0.000000000000000,2.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Image Structure Metadata:
> ? COMPRESSION=LZW
> ? INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left ?( ? 0.0000000, ? 2.0000000)
> Lower Left ?( ? 0.0000000, ? 0.0000000)
> Upper Right ( ? 3.0000000, ? 2.0000000)
> Lower Right ( ? 3.0000000, ? 0.0000000)
> Center ? ? ?( ? 1.5000000, ? 1.0000000)
> Band 1 Block=3x2 Type=UInt32, ColorInterp=Gray
> ? Description = a
> ? Min=1.000 Max=6.000
> ? Minimum=1.000, Maximum=6.000, Mean=-9999.000, StdDev=-9999.000
> ? NoData Value=4294967295
> ? Metadata:
> ? ? STATISTICS_MINIMUM=1
> ? ? STATISTICS_MAXIMUM=6
> ? ? STATISTICS_MEAN=-9999
> ? ? STATISTICS_STDDEV=-9999
> Band 2 Block=3x2 Type=UInt32, ColorInterp=Undefined
> ? Description = b
> ? Min=7.000 Max=12.000
> ? Minimum=7.000, Maximum=12.000, Mean=-9999.000, StdDev=-9999.000
> ? NoData Value=4294967295
> ? Metadata:
> ? ? STATISTICS_MINIMUM=7
> ? ? STATISTICS_MAXIMUM=12
> ? ? STATISTICS_MEAN=-9999
> ? ? STATISTICS_STDDEV=-9999
>
>
>
> INFO: Open of `file.parquet'
> ? ? ? using driver `Parquet' successful.
>
> Layer name: file
> Geometry: None
> Feature Count: 6
> Layer SRS WKT:
> (unknown)
> a: Integer (0.0)
> b: Integer (0.0)
> OGRFeature(file):0
> ? a (Integer) = 1
> ? b (Integer) = 7
>
> OGRFeature(file):1
> ? a (Integer) = 3
> ? b (Integer) = 9
>
> OGRFeature(file):2
> ? a (Integer) = 5
> ? b (Integer) = 11
>
> OGRFeature(file):3
> ? a (Integer) = 2
> ? b (Integer) = 8
>
> OGRFeature(file):4
> ? a (Integer) = 4
> ? b (Integer) = 10
>
> OGRFeature(file):5
> ? a (Integer) = 6
> ? b (Integer) = 12
>
>
> -- 
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241212/8543367a/attachment.htm>

From mdsumner at gmail.com  Thu Dec 12 04:59:32 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 12 Dec 2024 23:59:32 +1100
Subject: [gdal-dev] convert raster to raw table ?
In-Reply-To: <5663fc03-4bec-4dfc-8f98-0ee26bdc769f@spatialys.com>
References: <CAAcGz9-Pfciv0eaEnviON8460FSjhJGiCtrsmUS=_MC7J4VOyw@mail.gmail.com>
 <5663fc03-4bec-4dfc-8f98-0ee26bdc769f@spatialys.com>
Message-ID: <CAAcGz9950GC84=U45YOfDh0MMW6mL-ftM34mcB4vPA4yjNgT3w@mail.gmail.com>

Ah sweet, yes that's exactly it  I remember reading about this new
interface you wrote.

Thanks!!!!

Cheers, Mike

On Thu, 12 Dec 2024, 22:41 Even Rouault, <even.rouault at spatialys.com> wrote:

> Michael,
>
> doesn't do exactly what you want, but should be easy to modify to satisfy
> your requirements:
> https://github.com/OSGeo/gdal/blob/master/apps/gdal2ogr.c
>
> Even
> Le 12/12/2024 ? 06:40, Michael Sumner via gdal-dev a ?crit :
>
> Hi, I'd like to be able to create a tabular version efficiently directly
> from a raster. I can do this in scripting but is there a utility- or api-
> way to do this?
>
> I literally just want a Parquet file with a column for each band from a
> raster, with raw pixel values, no index, no coordinates, no rat or anything
> like that. I have very common workflows for this where the georeferencing
> (bbox, shape, crs) is just used manually.
>
> If this doesn't exist a barebones outline would be amazing (!), and (I)
> could add features like column names, cell index or row/col index,
> coordinates, sparse representation for missing values etc etc.
>
> An imagined -info output would look like this for a 2x3 raster with 2
> bands and values 1:6 in band 1, and values 7:12 in band 2 described  below.
>
> thanks so much, Mike
>
>
>
>
> gdalinfo file.tif
> Driver: GTiff/GeoTIFF
> Files: file.tif
> Size is 3, 2
> Origin = (0.000000000000000,2.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (   0.0000000,   2.0000000)
> Lower Left  (   0.0000000,   0.0000000)
> Upper Right (   3.0000000,   2.0000000)
> Lower Right (   3.0000000,   0.0000000)
> Center      (   1.5000000,   1.0000000)
> Band 1 Block=3x2 Type=UInt32, ColorInterp=Gray
>   Description = a
>   Min=1.000 Max=6.000
>   Minimum=1.000, Maximum=6.000, Mean=-9999.000, StdDev=-9999.000
>   NoData Value=4294967295
>   Metadata:
>     STATISTICS_MINIMUM=1
>     STATISTICS_MAXIMUM=6
>     STATISTICS_MEAN=-9999
>     STATISTICS_STDDEV=-9999
> Band 2 Block=3x2 Type=UInt32, ColorInterp=Undefined
>   Description = b
>   Min=7.000 Max=12.000
>   Minimum=7.000, Maximum=12.000, Mean=-9999.000, StdDev=-9999.000
>   NoData Value=4294967295
>   Metadata:
>     STATISTICS_MINIMUM=7
>     STATISTICS_MAXIMUM=12
>     STATISTICS_MEAN=-9999
>     STATISTICS_STDDEV=-9999
>
>
>
> INFO: Open of `file.parquet'
>       using driver `Parquet' successful.
>
> Layer name: file
> Geometry: None
> Feature Count: 6
> Layer SRS WKT:
> (unknown)
> a: Integer (0.0)
> b: Integer (0.0)
> OGRFeature(file):0
>   a (Integer) = 1
>   b (Integer) = 7
>
> OGRFeature(file):1
>   a (Integer) = 3
>   b (Integer) = 9
>
> OGRFeature(file):2
>   a (Integer) = 5
>   b (Integer) = 11
>
> OGRFeature(file):3
>   a (Integer) = 2
>   b (Integer) = 8
>
> OGRFeature(file):4
>   a (Integer) = 4
>   b (Integer) = 10
>
> OGRFeature(file):5
>   a (Integer) = 6
>   b (Integer) = 12
>
>
> --
> Michael Sumner
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241212/1b6621c5/attachment-0001.htm>

From abdulraheemsiddiqui at gmail.com  Thu Dec 12 12:23:29 2024
From: abdulraheemsiddiqui at gmail.com (Abdul Raheem Siddiqui)
Date: Thu, 12 Dec 2024 15:23:29 -0500
Subject: [gdal-dev] Install GDAL with gdal_ls available in PATH
Message-ID: <CACh_PwNhQJOoeOQySwXzZNpGVw338T0AHF6VGYzPY3a=acoUWg@mail.gmail.com>

Hello,

I am developing a compiled program in Golang that calls GDAL through
subprocess calls. In one of the program's features that I am developing, I
want to call *gdal_ls*. However, I see that gdal_ls is not available in
PATH by default and hence can't be called directly in a terminal without
specifying the full path or moving `gdal_ls.py` script to the path.

My program will be shipped as a binary, and GDAL is expected to be
available on the machine where the binary is executed. This has worked well
so far but now that I want to call *gdal_ls *in the new feature, the new
feature will not work out of the box.

Is there a way to install GDAL with gdal_ls available in Path (so that I
can ask my users to do this) or is there a better solution for my problem?

Thanks,

Abdul Siddiqui

ERT Corp.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241212/9000ef35/attachment.htm>

From even.rouault at spatialys.com  Thu Dec 12 13:58:29 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Dec 2024 22:58:29 +0100
Subject: [gdal-dev] Install GDAL with gdal_ls available in PATH
In-Reply-To: <CACh_PwNhQJOoeOQySwXzZNpGVw338T0AHF6VGYzPY3a=acoUWg@mail.gmail.com>
References: <CACh_PwNhQJOoeOQySwXzZNpGVw338T0AHF6VGYzPY3a=acoUWg@mail.gmail.com>
Message-ID: <15b69690-09f1-4d4e-99b2-2d674e2ec727@spatialys.com>

Abul,

gdal_ls.py is a non officially promoted script that isn't installed with 
GDAL. Your best luck is just to fetch it from 
https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_ls.py 
, ship it with your program, and directly points at it.? It obviously 
requires users to have the GDAL Python bindings installed.

Your other alternative could be to "port" it to Go using Go bindings, 
but I don't know much about the distribution story of go bindings, so 
don't ask me more about that part. I see that lukeroth/gdal has 
VSIReadDirRecursive() which is essentially what you need: 
https://github.com/search?q=repo%3Alukeroth%2Fgdal%20VSIReadDir&type=code

Even

Le 12/12/2024 ? 21:23, Abdul Raheem Siddiqui via gdal-dev a ?crit?:
> Hello,
>
> I am developing a compiled program in Golang that calls GDAL through 
> subprocess calls. In one of the program's features that?I am 
> developing, I want to call *gdal_ls*. However, I see that gdal_ls is 
> not available in PATH by default and hence can't be called directly in 
> a terminal without specifying the full path or moving `gdal_ls.py` 
> script to the path.
>
> My program will be shipped as a binary, and GDAL is expected to be 
> available on the machine where the binary is executed. This has worked 
> well so far but now that I want to call *gdal_ls *in the new feature, 
> the new feature will not work out of the box.
>
> Is there a way to install GDAL with gdal_ls available in Path (so that 
> I can ask my users to do this) or is there a better solution for my 
> problem?
>
> Thanks,
>
> Abdul Siddiqui
>
> ERT Corp.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241212/95b69965/attachment.htm>

From mdsumner at gmail.com  Thu Dec 12 17:05:31 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 13 Dec 2024 12:05:31 +1100
Subject: [gdal-dev] convert raster to raw table ?
In-Reply-To: <CAAcGz9950GC84=U45YOfDh0MMW6mL-ftM34mcB4vPA4yjNgT3w@mail.gmail.com>
References: <CAAcGz9-Pfciv0eaEnviON8460FSjhJGiCtrsmUS=_MC7J4VOyw@mail.gmail.com>
 <5663fc03-4bec-4dfc-8f98-0ee26bdc769f@spatialys.com>
 <CAAcGz9950GC84=U45YOfDh0MMW6mL-ftM34mcB4vPA4yjNgT3w@mail.gmail.com>
Message-ID: <CAAcGz9-L0cp4bCnP6MV5HEh2G2yUcLDbg1bxY9ZMag0q4A5z5w@mail.gmail.com>

Hmm,  I see CSV special-case is close to what I need so I'll try modifying
this along those lines.

We could have -type "none", and a null value for "all bands" - and use the
CSV special-case logic to write to other tabular formats.

Cheers, Mike




On Thu, Dec 12, 2024 at 11:59?PM Michael Sumner <mdsumner at gmail.com> wrote:

> Ah sweet, yes that's exactly it  I remember reading about this new
> interface you wrote.
>
> Thanks!!!!
>
> Cheers, Mike
>
> On Thu, 12 Dec 2024, 22:41 Even Rouault, <even.rouault at spatialys.com>
> wrote:
>
>> Michael,
>>
>> doesn't do exactly what you want, but should be easy to modify to satisfy
>> your requirements:
>> https://github.com/OSGeo/gdal/blob/master/apps/gdal2ogr.c
>>
>> Even
>> Le 12/12/2024 ? 06:40, Michael Sumner via gdal-dev a ?crit :
>>
>> Hi, I'd like to be able to create a tabular version efficiently directly
>> from a raster. I can do this in scripting but is there a utility- or api-
>> way to do this?
>>
>> I literally just want a Parquet file with a column for each band from a
>> raster, with raw pixel values, no index, no coordinates, no rat or anything
>> like that. I have very common workflows for this where the georeferencing
>> (bbox, shape, crs) is just used manually.
>>
>> If this doesn't exist a barebones outline would be amazing (!), and (I)
>> could add features like column names, cell index or row/col index,
>> coordinates, sparse representation for missing values etc etc.
>>
>> An imagined -info output would look like this for a 2x3 raster with 2
>> bands and values 1:6 in band 1, and values 7:12 in band 2 described  below.
>>
>> thanks so much, Mike
>>
>>
>>
>>
>> gdalinfo file.tif
>> Driver: GTiff/GeoTIFF
>> Files: file.tif
>> Size is 3, 2
>> Origin = (0.000000000000000,2.000000000000000)
>> Pixel Size = (1.000000000000000,-1.000000000000000)
>> Image Structure Metadata:
>>   COMPRESSION=LZW
>>   INTERLEAVE=PIXEL
>> Corner Coordinates:
>> Upper Left  (   0.0000000,   2.0000000)
>> Lower Left  (   0.0000000,   0.0000000)
>> Upper Right (   3.0000000,   2.0000000)
>> Lower Right (   3.0000000,   0.0000000)
>> Center      (   1.5000000,   1.0000000)
>> Band 1 Block=3x2 Type=UInt32, ColorInterp=Gray
>>   Description = a
>>   Min=1.000 Max=6.000
>>   Minimum=1.000, Maximum=6.000, Mean=-9999.000, StdDev=-9999.000
>>   NoData Value=4294967295
>>   Metadata:
>>     STATISTICS_MINIMUM=1
>>     STATISTICS_MAXIMUM=6
>>     STATISTICS_MEAN=-9999
>>     STATISTICS_STDDEV=-9999
>> Band 2 Block=3x2 Type=UInt32, ColorInterp=Undefined
>>   Description = b
>>   Min=7.000 Max=12.000
>>   Minimum=7.000, Maximum=12.000, Mean=-9999.000, StdDev=-9999.000
>>   NoData Value=4294967295
>>   Metadata:
>>     STATISTICS_MINIMUM=7
>>     STATISTICS_MAXIMUM=12
>>     STATISTICS_MEAN=-9999
>>     STATISTICS_STDDEV=-9999
>>
>>
>>
>> INFO: Open of `file.parquet'
>>       using driver `Parquet' successful.
>>
>> Layer name: file
>> Geometry: None
>> Feature Count: 6
>> Layer SRS WKT:
>> (unknown)
>> a: Integer (0.0)
>> b: Integer (0.0)
>> OGRFeature(file):0
>>   a (Integer) = 1
>>   b (Integer) = 7
>>
>> OGRFeature(file):1
>>   a (Integer) = 3
>>   b (Integer) = 9
>>
>> OGRFeature(file):2
>>   a (Integer) = 5
>>   b (Integer) = 11
>>
>> OGRFeature(file):3
>>   a (Integer) = 2
>>   b (Integer) = 8
>>
>> OGRFeature(file):4
>>   a (Integer) = 4
>>   b (Integer) = 10
>>
>> OGRFeature(file):5
>>   a (Integer) = 6
>>   b (Integer) = 12
>>
>>
>> --
>> Michael Sumner
>> Research Software Engineer
>> Australian Antarctic Division
>> Hobart, Australia
>> e-mail: mdsumner at gmail.com
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>>
>>

-- 
Michael Sumner
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/3c16b5eb/attachment.htm>

From michkowalczuk at gmail.com  Fri Dec 13 04:15:51 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Fri, 13 Dec 2024 13:15:51 +0100
Subject: [gdal-dev] WMTS generating GET URL problem
Message-ID: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>

Hi,
Consider the following WMTS server:
*https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts
<https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts>*

One of the subdataset path generated by GDAL is
*WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
<https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>*

When I try to download a map I notice URL issue/error.
*gdalinfo
"WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
<https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*

from debug:
*HTTP: Requesting [1/4]
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho
<https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho>//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg*
look at the double slash (//) chars in the above URL

When you go to service Capabilities you can find the following resource URL:
* <ResourceURL format="image/jpeg" resourceType="tile"
template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/
<https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/>{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>*

but in the layer definition *Style* tag is empty:


*<Style isDefault="true"><ows:Identifier/></Style>*

This is probably the reason that GDAL make path using an empty string and
this generate double slash chars.

If you remove redundant slash the server responses and returns a tile, the
example:
*https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg
<https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg>*

And the question is: is this service or GDAL bug?  :-)

Wouldn't it be a good idea for GDAL to check the URL path for correctness
before sending the request?

Regards,
Micha?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/b5b53b47/attachment-0001.htm>

From michkowalczuk at gmail.com  Fri Dec 13 04:43:08 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Fri, 13 Dec 2024 13:43:08 +0100
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
Message-ID: <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>

Sorry for the mistake in the last email. Instead of pasting *gfdalinfo *command
i should paste this:
*gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512
"WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
<https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*

pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com>
napisa?(a):

> Hi,
> Consider the following WMTS server:
> *https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts>*
>
> One of the subdataset path generated by GDAL is
> *WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>*
>
> When I try to download a map I notice URL issue/error.
> *gdalinfo
> "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
> tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
>
> from debug:
> *HTTP: Requesting [1/4]
> https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho>//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg*
> look at the double slash (//) chars in the above URL
>
> When you go to service Capabilities you can find the following resource
> URL:
> * <ResourceURL format="image/jpeg" resourceType="tile"
> template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/>{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>*
>
> but in the layer definition *Style* tag is empty:
>
>
> *<Style isDefault="true"><ows:Identifier/></Style>*
>
> This is probably the reason that GDAL make path using an empty string and
> this generate double slash chars.
>
> If you remove redundant slash the server responses and returns a tile, the
> example:
> *https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg>*
>
> And the question is: is this service or GDAL bug?  :-)
>
> Wouldn't it be a good idea for GDAL to check the URL path for correctness
> before sending the request?
>
> Regards,
> Micha?
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/5e2f2a2f/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec 13 05:32:41 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 13 Dec 2024 13:32:41 +0000
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
 <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
Message-ID: <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

By the standard Web Map Tile Service - Open Geospatial Consortium<https://www.ogc.org/publications/standard/wmts/> "style" seems to be mandatory in the layer data "One or more (mandatory)".
And within "style", the identifier is mandatory "An unambiguous reference to this style, identifying a specific version when needed, normally used by software"; multiplicity: One (mandatory).
I would say that this is a server side misconfiguration. Each style must have an identifier, even the default style. But the server does still understand the style named as "default":
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/default/EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Michal Kowalczuk via gdal-dev
L?hetetty: perjantai 13. joulukuuta 2024 14.43
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

Sorry for the mistake in the last email. Instead of pasting gfdalinfo command i should paste this:
gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512 "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com<mailto:michkowalczuk at gmail.com>> napisa?(a):
Hi,
Consider the following WMTS server:
https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts

One of the subdataset path generated by GDAL is
WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326

When I try to download a map I notice URL issue/error.
gdalinfo "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

from debug:
HTTP: Requesting [1/4] https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg
look at the double slash (//) chars in the above URL

When you go to service Capabilities you can find the following resource URL:
 <ResourceURL format="image/jpeg" resourceType="tile" template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>

but in the layer definition Style tag is empty:
<Style isDefault="true">
<ows:Identifier/>
</Style>

This is probably the reason that GDAL make path using an empty string and this generate double slash chars.

If you remove redundant slash the server responses and returns a tile, the example:
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg

And the question is: is this service or GDAL bug?  :-)

Wouldn't it be a good idea for GDAL to check the URL path for correctness before sending the request?

Regards,
Micha?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/7e68d51f/attachment-0001.htm>

From michkowalczuk at gmail.com  Fri Dec 13 05:38:21 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Fri, 13 Dec 2024 14:38:21 +0100
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
 <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
 <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <CAP+FqQAYPo_EsoOT7Hg6z1PYZwz-XxWLoy+0MNFSSAvScJ8y8A@mail.gmail.com>

so maybe this little fix for this should be mad? in gdal.
if style isEmpty:
    style=?default?

W dniu pt., 13 gru 2024 o 14:32 Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi> napisa?(a):

> Hi,
>
>
>
> By the standard Web Map Tile Service - Open Geospatial Consortium
> <https://www.ogc.org/publications/standard/wmts/> ?style? seems to be
> mandatory in the layer data ?One or more (mandatory)?.
>
> And within ?style?, the identifier is mandatory ?An unambiguous reference
> to this style, identifying a specific version when needed, normally used by
> software?; multiplicity: One (mandatory).
>
> I would say that this is a server side misconfiguration. Each style must
> have an identifier, even the default style. But the server does still
> understand the style named as ?default?:
>
> https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/default/EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Michal
> Kowalczuk via gdal-dev
> *L?hetetty:* perjantai 13. joulukuuta 2024 14.43
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] WMTS generating GET URL problem
>
>
>
> Sorry for the mistake in the last email. Instead of pasting * gfdalinfo *command
> i should paste this:
> *gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512
> "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
> tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
>
>
>
> pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com>
> napisa?(a):
>
> Hi,
>
> Consider the following WMTS server:
> *https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts>*
>
>
>
> One of the subdataset path generated by GDAL is
>
> *WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>*
>
>
>
> When I try to download a map I notice URL issue/error.
>
> *gdalinfo
> "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
> tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
>
>
>
> from debug:
> *HTTP: Requesting [1/4]
> https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho>//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg*
>
> look at the double slash (//) chars in the above URL
>
>
>
> When you go to service Capabilities you can find the following resource
> URL:
>
> * <ResourceURL format="image/jpeg" resourceType="tile"
> template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/>{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>*
>
>
>
> but in the layer definition *Style* tag is empty:
>
>
>
> *<Style isDefault="true"> <ows:Identifier/> </Style>*
>
>
>
> This is probably the reason that GDAL make path using an empty string and
> this generate double slash chars.
>
>
>
> If you remove redundant slash the server responses and returns a tile, the
> example:
>
> *https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg>*
>
>
>
> And the question is: is this service or GDAL bug?  :-)
>
>
>
> Wouldn't it be a good idea for GDAL to check the URL path for correctness
> before sending the request?
>
>
>
> Regards,
>
> Micha?
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/a28a7dff/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec 13 05:52:21 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 13 Dec 2024 13:52:21 +0000
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <CAP+FqQAYPo_EsoOT7Hg6z1PYZwz-XxWLoy+0MNFSSAvScJ8y8A@mail.gmail.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
 <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
 <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAP+FqQAYPo_EsoOT7Hg6z1PYZwz-XxWLoy+0MNFSSAvScJ8y8A@mail.gmail.com>
Message-ID: <DB9PR09MB68870DDC230E907ABA631D1EFD382@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

The idea behind all standardization work is not that every single client must be made to deal with servers which break the standard. Contact the server provided and ask them to fix their configuration. There seems to be a contact address in GetCapabilities <ows:ElectronicMailAddress>irisline at paradigm.brussels</ows:ElectronicMailAddress<mailto:irisline at paradigm.brussels%3c/ows:ElectronicMailAddress>>

-Jukka Rahkonen-

L?hett?j?: Micha? Kowalczuk <michkowalczuk at gmail.com>
L?hetetty: perjantai 13. joulukuuta 2024 15.38
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

so maybe this little fix for this should be mad? in gdal.
if style isEmpty:
    style="default"

W dniu pt., 13 gru 2024 o 14:32 Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> napisa?(a):
Hi,

By the standard Web Map Tile Service - Open Geospatial Consortium<https://www.ogc.org/publications/standard/wmts/> "style" seems to be mandatory in the layer data "One or more (mandatory)".
And within "style", the identifier is mandatory "An unambiguous reference to this style, identifying a specific version when needed, normally used by software"; multiplicity: One (mandatory).
I would say that this is a server side misconfiguration. Each style must have an identifier, even the default style. But the server does still understand the style named as "default":
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/default/EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Michal Kowalczuk via gdal-dev
L?hetetty: perjantai 13. joulukuuta 2024 14.43
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

Sorry for the mistake in the last email. Instead of pasting gfdalinfo command i should paste this:
gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512 "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com<mailto:michkowalczuk at gmail.com>> napisa?(a):
Hi,
Consider the following WMTS server:
https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts

One of the subdataset path generated by GDAL is
WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326

When I try to download a map I notice URL issue/error.
gdalinfo "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

from debug:
HTTP: Requesting [1/4] https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg
look at the double slash (//) chars in the above URL

When you go to service Capabilities you can find the following resource URL:
 <ResourceURL format="image/jpeg" resourceType="tile" template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>

but in the layer definition Style tag is empty:
<Style isDefault="true">
<ows:Identifier/>
</Style>

This is probably the reason that GDAL make path using an empty string and this generate double slash chars.

If you remove redundant slash the server responses and returns a tile, the example:
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg

And the question is: is this service or GDAL bug?  :-)

Wouldn't it be a good idea for GDAL to check the URL path for correctness before sending the request?

Regards,
Micha?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/800c10c6/attachment-0001.htm>

From michkowalczuk at gmail.com  Fri Dec 13 06:02:29 2024
From: michkowalczuk at gmail.com (=?UTF-8?Q?Micha=C5=82_Kowalczuk?=)
Date: Fri, 13 Dec 2024 15:02:29 +0100
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <DB9PR09MB68870DDC230E907ABA631D1EFD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
 <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
 <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAP+FqQAYPo_EsoOT7Hg6z1PYZwz-XxWLoy+0MNFSSAvScJ8y8A@mail.gmail.com>
 <DB9PR09MB68870DDC230E907ABA631D1EFD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <CAP+FqQCr0DGvRfmXycOAQDmLjNn=6PR+vibjVJKRCj5u8JYxjA@mail.gmail.com>

I did it before I wrote here :-)
Thank you for your time.

Regards,
Micha? Kowalczuk

pt., 13 gru 2024 o 14:52 Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
napisa?(a):

> Hi,
>
>
>
> The idea behind all standardization work is not that every single client
> must be made to deal with servers which break the standard. Contact the
> server provided and ask them to fix their configuration. There seems to be
> a contact address in GetCapabilities <ows:ElectronicMailAddress>
> irisline at paradigm.brussels</ows:ElectronicMailAddress>
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* Micha? Kowalczuk <michkowalczuk at gmail.com>
> *L?hetetty:* perjantai 13. joulukuuta 2024 15.38
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] WMTS generating GET URL problem
>
>
>
> so maybe this little fix for this should be mad? in gdal.
>
> if style isEmpty:
>
>     style=?default?
>
>
>
> W dniu pt., 13 gru 2024 o 14:32 Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi> napisa?(a):
>
> Hi,
>
>
>
> By the standard Web Map Tile Service - Open Geospatial Consortium
> <https://www.ogc.org/publications/standard/wmts/> ?style? seems to be
> mandatory in the layer data ?One or more (mandatory)?.
>
> And within ?style?, the identifier is mandatory ?An unambiguous reference
> to this style, identifying a specific version when needed, normally used by
> software?; multiplicity: One (mandatory).
>
> I would say that this is a server side misconfiguration. Each style must
> have an identifier, even the default style. But the server does still
> understand the style named as ?default?:
>
> https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/default/EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Michal
> Kowalczuk via gdal-dev
> *L?hetetty:* perjantai 13. joulukuuta 2024 14.43
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] WMTS generating GET URL problem
>
>
>
> Sorry for the mistake in the last email. Instead of pasting *gfdalinfo *command
> i should paste this:
> *gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512
> "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
> tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
>
>
>
> pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com>
> napisa?(a):
>
> Hi,
>
> Consider the following WMTS server:
> *https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts>*
>
>
>
> One of the subdataset path generated by GDAL is
>
> *WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>*
>
>
>
> When I try to download a map I notice URL issue/error.
>
> *gdalinfo
> "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326
> <https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326>"
> tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO*
>
>
>
> from debug:
> *HTTP: Requesting [1/4]
> https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho>//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg*
>
> look at the double slash (//) chars in the above URL
>
>
>
> When you go to service Capabilities you can find the following resource
> URL:
>
> * <ResourceURL format="image/jpeg" resourceType="tile"
> template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/>{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>*
>
>
>
> but in the layer definition *Style* tag is empty:
>
>
>
> *<Style isDefault="true"> <ows:Identifier/> </Style>*
>
>
>
> This is probably the reason that GDAL make path using an empty string and
> this generate double slash chars.
>
>
>
> If you remove redundant slash the server responses and returns a tile, the
> example:
>
> *https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg
> <https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg>*
>
>
>
> And the question is: is this service or GDAL bug?  :-)
>
>
>
> Wouldn't it be a good idea for GDAL to check the URL path for correctness
> before sending the request?
>
>
>
> Regards,
>
> Micha?
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/1914aa04/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Dec 13 06:43:14 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 13 Dec 2024 14:43:14 +0000
Subject: [gdal-dev] WMTS generating GET URL problem
In-Reply-To: <CAP+FqQCr0DGvRfmXycOAQDmLjNn=6PR+vibjVJKRCj5u8JYxjA@mail.gmail.com>
References: <CAP+FqQDESGbwFDymzF7cAKOabhtSmEhirGpGvg6eZ9JeU=uW-A@mail.gmail.com>
 <CAP+FqQCTY-9+19zBuBh2tXPrJvh+yw=RiPLuz2p70B8YAjyzoA@mail.gmail.com>
 <DB9PR09MB6887D890EDFE0FF9D6B51844FD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAP+FqQAYPo_EsoOT7Hg6z1PYZwz-XxWLoy+0MNFSSAvScJ8y8A@mail.gmail.com>
 <DB9PR09MB68870DDC230E907ABA631D1EFD382@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAP+FqQCr0DGvRfmXycOAQDmLjNn=6PR+vibjVJKRCj5u8JYxjA@mail.gmail.com>
Message-ID: <DB9PR09MB6887BD14D8A64A8ED45BB37EFD382@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

While waiting their reaction, download the GetCapabilities into a local file, for example "wmts.xml". Edit the 24 occasions of style into
<Style isDefault="true">
        <ows:Identifier>default</ows:Identifier>>
      </Style>

Then you can do:
gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512 WMTS:wmts.xml,layer=Ortho,tilematrixset=EPSG:4326 tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

The WMTS service comea from a GeoWebCache software and it seems that it is possible to configure GWC so that the style has no identifier. It is a GeoWebCache bug. I will make some more tests and create a ticket once I have understood how such GWC misconfiguration can be done and corrected. Perhaps it can happen only if the layer in the GWC cache comes from a layer  group from the WMS side. Maybe the service provider has not done anything wrong.

-Jukka Rahkonen-


L?hett?j?: Micha? Kowalczuk <michkowalczuk at gmail.com>
L?hetetty: perjantai 13. joulukuuta 2024 16.02
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

I did it before I wrote here :-)
Thank you for your time.

Regards,
Micha? Kowalczuk

pt., 13 gru 2024 o 14:52 Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> napisa?(a):
Hi,

The idea behind all standardization work is not that every single client must be made to deal with servers which break the standard. Contact the server provided and ask them to fix their configuration. There seems to be a contact address in GetCapabilities <ows:ElectronicMailAddress>irisline at paradigm.brussels</ows:ElectronicMailAddress<mailto:irisline at paradigm.brussels%3c/ows:ElectronicMailAddress>>

-Jukka Rahkonen-

L?hett?j?: Micha? Kowalczuk <michkowalczuk at gmail.com<mailto:michkowalczuk at gmail.com>>
L?hetetty: perjantai 13. joulukuuta 2024 15.38
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Kopio: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

so maybe this little fix for this should be mad? in gdal.
if style isEmpty:
    style="default"

W dniu pt., 13 gru 2024 o 14:32 Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> napisa?(a):
Hi,

By the standard Web Map Tile Service - Open Geospatial Consortium<https://www.ogc.org/publications/standard/wmts/> "style" seems to be mandatory in the layer data "One or more (mandatory)".
And within "style", the identifier is mandatory "An unambiguous reference to this style, identifying a specific version when needed, normally used by software"; multiplicity: One (mandatory).
I would say that this is a server side misconfiguration. Each style must have an identifier, even the default style. But the server does still understand the style named as "default":
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/default/EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Michal Kowalczuk via gdal-dev
L?hetetty: perjantai 13. joulukuuta 2024 14.43
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] WMTS generating GET URL problem

Sorry for the mistake in the last email. Instead of pasting gfdalinfo command i should paste this:
gdal_translate -srcwin 0 0 12235811 6137602 -outsize 512 512 "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

pt., 13 gru 2024 o 13:15 Micha? Kowalczuk <michkowalczuk at gmail.com<mailto:michkowalczuk at gmail.com>> napisa?(a):
Hi,
Consider the following WMTS server:
https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts

One of the subdataset path generated by GDAL is
WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326

When I try to download a map I notice URL issue/error.
gdalinfo "WMTS:https://geoservices-urbis.irisnet.be/geoserver/gwc/service/wmts?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=1.0.0,layer=Ortho,tilematrixset=EPSG:4326" tile.png --debug on --config GDAL_ENABLE_WMS_CACHE NO

from debug:
HTTP: Requesting [1/4] https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho//EPSG:4326/EPSG:4326:7/27/129?format=image/jpeg
look at the double slash (//) chars in the above URL

When you go to service Capabilities you can find the following resource URL:
 <ResourceURL format="image/jpeg" resourceType="tile" template="https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/urbisNL/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}?format=image/jpeg"/>

but in the layer definition Style tag is empty:
<Style isDefault="true">
<ows:Identifier/>
</Style>

This is probably the reason that GDAL make path using an empty string and this generate double slash chars.

If you remove redundant slash the server responses and returns a tile, the example:
https://geoservices-urbis.irisnet.be/geowebcache/service/wmts/rest/Ortho/EPSG:4326/EPSG:4326:14/3567/16784?format=image/jpeg

And the question is: is this service or GDAL bug?  :-)

Wouldn't it be a good idea for GDAL to check the URL path for correctness before sending the request?

Regards,
Micha?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/4db040cb/attachment-0001.htm>

From angerj.dev at gmail.com  Fri Dec 13 07:50:05 2024
From: angerj.dev at gmail.com (=?UTF-8?B?SsOpcsOpbXkgQW5nZXI=?=)
Date: Fri, 13 Dec 2024 16:50:05 +0100
Subject: [gdal-dev] Idea: support JP2 TLM as sidecar in GDAL/OpenJPEG
Message-ID: <CALEzY_s8rr2d+TisT6a9KxCcGCQT3bYyPo_Y7nAw-6y+4Btobg@mail.gmail.com>

Dear GDAL maintainers,

Thank you for the release of OpenJPEG 2.5.3, with the support of TLM
markers!
Following up on [1], Sentinel-2 JP2 files currently do not have TLM
markers. However, it is theoretically possible to generate an external
index file for each JP2 raster, and the index could be formatted exactly as
a JP2 TLM marker. Such sidecar file is not part of the JPEG2000 standard,
but given the gains that are achievable with TLM markers, this strategy
sounds reasonable. The entirety of the Sentinel-2 collection (archive and
live) is concerned.

GDAL could be modified to look for these sidecar .tlm files (although I'm
not too familiar with the sidecar system), and give the TLM marker content
to JP2 implementations (OpenJPEG in particular, after changes).

Do you think this approach is reasonable? Would it be reasonable to
implement such a feature in GDAL and OpenJPEG?
Do you have ideas for a better solution?

Best regards,
J?r?my

[1]: https://lists.osgeo.org/pipermail/gdal-dev/2024-November/059805.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/80a202e7/attachment.htm>

From even.rouault at spatialys.com  Fri Dec 13 08:08:37 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Dec 2024 17:08:37 +0100
Subject: [gdal-dev] Idea: support JP2 TLM as sidecar in GDAL/OpenJPEG
In-Reply-To: <CALEzY_s8rr2d+TisT6a9KxCcGCQT3bYyPo_Y7nAw-6y+4Btobg@mail.gmail.com>
References: <CALEzY_s8rr2d+TisT6a9KxCcGCQT3bYyPo_Y7nAw-6y+4Btobg@mail.gmail.com>
Message-ID: <e1d651db-fbcb-49e8-8184-8d88a7cd33a0@spatialys.com>

Hi,

Someone should just tell the team at ESA (are you reading us ESA by the 
way?) in charge of producing those JPEG2000 files to turn on the Kakadu 
switch to generate TLM markers. A 5 minute change on their side, ok 
maybe 1 hour to update unit tests.

What you suggest about sidecar .tlm sidecar could certainly be 
implemented, but one would have to rescan the archive to generate them. 
At that point, you'd probably just want to insert the TLM marker inside 
existing files with a dedicated utility that wouldn't need to decompress 
the pixel values.

See also https://mastodon.social/@EvenRouault/113556023446290151 for an 
alternate idea (not necessarily better).

Even


Le 13/12/2024 ? 16:50, J?r?my Anger via gdal-dev a ?crit?:
> Dear GDAL maintainers,
>
> Thank you for the release of OpenJPEG 2.5.3, with the support of TLM 
> markers!
> Following up on [1], Sentinel-2 JP2 files currently do not have TLM 
> markers. However, it is theoretically possible to generate an external 
> index file for each JP2 raster, and the index could be formatted 
> exactly as a JP2 TLM marker. Such sidecar file is not part of the 
> JPEG2000 standard, but given the gains that are achievable with TLM 
> markers, this strategy sounds reasonable. The entirety of the 
> Sentinel-2 collection (archive and live) is concerned.
>
> GDAL could be modified to look for these sidecar .tlm files (although 
> I'm not too familiar with the sidecar system), and give the TLM marker 
> content to JP2 implementations (OpenJPEG in particular, after changes).
>
> Do you think this approach is reasonable? Would it be reasonable to 
> implement such a feature in GDAL and OpenJPEG?
> Do you have ideas for a better solution?
>
> Best regards,
> J?r?my
>
> [1]: https://lists.osgeo.org/pipermail/gdal-dev/2024-November/059805.html
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From angerj.dev at gmail.com  Fri Dec 13 08:27:37 2024
From: angerj.dev at gmail.com (=?UTF-8?B?SsOpcsOpbXkgQW5nZXI=?=)
Date: Fri, 13 Dec 2024 17:27:37 +0100
Subject: [gdal-dev] Idea: support JP2 TLM as sidecar in GDAL/OpenJPEG
In-Reply-To: <e1d651db-fbcb-49e8-8184-8d88a7cd33a0@spatialys.com>
References: <CALEzY_s8rr2d+TisT6a9KxCcGCQT3bYyPo_Y7nAw-6y+4Btobg@mail.gmail.com>
 <e1d651db-fbcb-49e8-8184-8d88a7cd33a0@spatialys.com>
Message-ID: <CALEzY_sgysHr6r69qXA_nrt1XoUPiV+Uy5LvR=xvLfnKOw1Ceg@mail.gmail.com>

Yes, enabling TLM generation for future products would already be an
important first step, and we have asked ESA about this recently.
Given that the full archive of Sentinel-2 was reprocessed recently
(Collection-1), we can assume that we won't get a full reprocessing before
a few years, which is why we are looking for alternatives to make
Sentinel-2 more accessible.

Modifying the JP2 files in-place would be preferable for everyone compared
to adding .tlm files, but it would incur additional cost to perform those
disk writes, and update checksums. Maybe it's not such an issue.

If you are not against the .tlm sidecar idea in GDAL/OpenJPEG, that's good
enough for me for now, and it might allow further discussions with ESA.

J?r?my

Le ven. 13 d?c. 2024 ? 17:08, Even Rouault <even.rouault at spatialys.com> a
?crit :

> Hi,
>
> Someone should just tell the team at ESA (are you reading us ESA by the
> way?) in charge of producing those JPEG2000 files to turn on the Kakadu
> switch to generate TLM markers. A 5 minute change on their side, ok
> maybe 1 hour to update unit tests.
>
> What you suggest about sidecar .tlm sidecar could certainly be
> implemented, but one would have to rescan the archive to generate them.
> At that point, you'd probably just want to insert the TLM marker inside
> existing files with a dedicated utility that wouldn't need to decompress
> the pixel values.
>
> See also https://mastodon.social/@EvenRouault/113556023446290151 for an
> alternate idea (not necessarily better).
>
> Even
>
>
> Le 13/12/2024 ? 16:50, J?r?my Anger via gdal-dev a ?crit :
> > Dear GDAL maintainers,
> >
> > Thank you for the release of OpenJPEG 2.5.3, with the support of TLM
> > markers!
> > Following up on [1], Sentinel-2 JP2 files currently do not have TLM
> > markers. However, it is theoretically possible to generate an external
> > index file for each JP2 raster, and the index could be formatted
> > exactly as a JP2 TLM marker. Such sidecar file is not part of the
> > JPEG2000 standard, but given the gains that are achievable with TLM
> > markers, this strategy sounds reasonable. The entirety of the
> > Sentinel-2 collection (archive and live) is concerned.
> >
> > GDAL could be modified to look for these sidecar .tlm files (although
> > I'm not too familiar with the sidecar system), and give the TLM marker
> > content to JP2 implementations (OpenJPEG in particular, after changes).
> >
> > Do you think this approach is reasonable? Would it be reasonable to
> > implement such a feature in GDAL and OpenJPEG?
> > Do you have ideas for a better solution?
> >
> > Best regards,
> > J?r?my
> >
> > [1]:
> https://lists.osgeo.org/pipermail/gdal-dev/2024-November/059805.html
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/5d763221/attachment.htm>

From even.rouault at spatialys.com  Fri Dec 13 08:47:48 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Dec 2024 17:47:48 +0100
Subject: [gdal-dev] Idea: support JP2 TLM as sidecar in GDAL/OpenJPEG
In-Reply-To: <CALEzY_sgysHr6r69qXA_nrt1XoUPiV+Uy5LvR=xvLfnKOw1Ceg@mail.gmail.com>
References: <CALEzY_s8rr2d+TisT6a9KxCcGCQT3bYyPo_Y7nAw-6y+4Btobg@mail.gmail.com>
 <e1d651db-fbcb-49e8-8184-8d88a7cd33a0@spatialys.com>
 <CALEzY_sgysHr6r69qXA_nrt1XoUPiV+Uy5LvR=xvLfnKOw1Ceg@mail.gmail.com>
Message-ID: <75443eb7-af86-4bbf-854e-cd612dfa51d1@spatialys.com>


>
> If you are not against the .tlm sidecar idea in GDAL/OpenJPEG, that's 
> good enough for me for now, and it might allow further discussions 
> with ESA.

Well, you should tell them I'm actively *against* the sidecar idea to 
motivate them doing the proper thing, otherwise they'll have little 
incentive to move :-)

I just said it can be technically done (what can't ?), not that I'm a 
big fan of it. That would be purely a openjpeg change.

Actually, if you only target GDAL, you could do something that requires 
no change neither in GDAL or openjpeg, which would be a variation of 
rewriting a new .jp2 file with the TLM marker without actually rewriting 
them. GDAL has a rather little-known /vsisparse/ virtual file system (Cf 
https://gdal.org/en/stable/user/virtual_file_systems.html#vsisparse-sparse-files) 
where you can point at a XML file that concatenates portions of various 
files into a virtual file. So you would have a XML file that would point 
to the beginning of the .jp2 file, then an auxiliary file with the TLM 
marker, and then the rest of the .jp2 file, and then you open 
/vsisparse/my_patched_jp2.xml . I believe that should work because there 
are no absolute offsets in JP2 files.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From abdulraheemsiddiqui at gmail.com  Fri Dec 13 13:00:46 2024
From: abdulraheemsiddiqui at gmail.com (Abdul Raheem Siddiqui)
Date: Fri, 13 Dec 2024 16:00:46 -0500
Subject: [gdal-dev] Install GDAL with gdal_ls available in PATH
In-Reply-To: <15b69690-09f1-4d4e-99b2-2d674e2ec727@spatialys.com>
References: <CACh_PwNhQJOoeOQySwXzZNpGVw338T0AHF6VGYzPY3a=acoUWg@mail.gmail.com>
 <15b69690-09f1-4d4e-99b2-2d674e2ec727@spatialys.com>
Message-ID: <CACh_PwODMDezeFAN7LUJqT0TZYonEtDh=vg8q=d9uhEOgQW4Sg@mail.gmail.com>

Thanks for insights. I will try the lukeroth/gdal repo.

On Thu, Dec 12, 2024, 4:58?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Abul,
>
> gdal_ls.py is a non officially promoted script that isn't installed with
> GDAL. Your best luck is just to fetch it from
> https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/samples/gdal_ls.py
> , ship it with your program, and directly points at it.  It obviously
> requires users to have the GDAL Python bindings installed.
>
> Your other alternative could be to "port" it to Go using Go bindings, but
> I don't know much about the distribution story of go bindings, so don't ask
> me more about that part. I see that lukeroth/gdal has VSIReadDirRecursive()
> which is essentially what you need:
> https://github.com/search?q=repo%3Alukeroth%2Fgdal%20VSIReadDir&type=code
>
> Even
> Le 12/12/2024 ? 21:23, Abdul Raheem Siddiqui via gdal-dev a ?crit :
>
> Hello,
>
> I am developing a compiled program in Golang that calls GDAL through
> subprocess calls. In one of the program's features that I am developing, I
> want to call *gdal_ls*. However, I see that gdal_ls is not available in
> PATH by default and hence can't be called directly in a terminal without
> specifying the full path or moving `gdal_ls.py` script to the path.
>
> My program will be shipped as a binary, and GDAL is expected to be
> available on the machine where the binary is executed. This has worked well
> so far but now that I want to call *gdal_ls *in the new feature, the new
> feature will not work out of the box.
>
> Is there a way to install GDAL with gdal_ls available in Path (so that I
> can ask my users to do this) or is there a better solution for my problem?
>
> Thanks,
>
> Abdul Siddiqui
>
> ERT Corp.
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20241213/cee3cd28/attachment.htm>

