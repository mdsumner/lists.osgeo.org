From woodbri at swoodbridge.com  Mon Jan  1 12:00:23 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:33 2007
Subject: [Gdal-dev] New to GDAL Utilities
Message-ID: <45993E27.6070205@swoodbridge.com>

Hi all,

I found the Soviet Topo Maps and thought: Hey how hard could it be to 
stitch these together into a seamless mapserver layer. And so started my 
journey ...

I wrote some code that attempts to locate the corners of the map on the 
Soviet Topo images and then use gdal to georeference the image and clip 
the collar. Many thanks to Brent Fraser assistance and help.

I think I am missing some fundamental knowledge or concepts about 
gdal_translate and gdalwarp, that I'm hoping the list can clear up for 
me. Here is what I've done so far:

woodbri@carto:~/work/collarclip$ ./collarclip -w -v -i 
050k--h36-012-1.gif -d
Corner at:   74,   72
Corner at: 2858,   67
Corner at: 2865, 2259
Corner at:   74, 2266
getMapBBox: init=epsg:28406
   bb->ul  = (35.500000, 32.000000)
   bb->ur  = (35.750000, 32.000000)
   bb->lr  = (35.750000, 31.833333)
   bb->ll  = (35.500000, 31.833333)
projected as:
   bb->pul = (6736269.9, 3544647.9)
   bb->pur = (6759904.6, 3545222.1)
   bb->plr = (6760374.1, 3526731.5)
   bb->pll = (6736696.7, 3526158.9)

gdal_translate -gcp 74 72 6736269.9 3544647.9 -gcp 2858 67 6759904.6 
3545222.1 -gcp 2865 2259 6760374.1 3526731.5 -gcp 74 2266 6736696.7 
3526158.9 -a_srs EPSG:28405 tmp.gif tmp2.tif
Input file size is 2935, 2338
0...10...20...30...40...50...60...70...80...90...100 - done.

gdalwarp -rc -t_srs EPSG:28405 tmp2.tif tmp3.tif
:0...10...20...30...40...50...60...70...80...90...100 - done.

gdalwarp -rc -t_srs EPSG:4284 -te 35.50000000 31.83333333 35.75000000 
32.00000000 tmp3.tif tmp4.tif
Creating output file that is 3078P x 2052L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

So, I think I get the gdal_translate step. This is basically 
georeferencing the image, converting it to a GeoTiff and assigning the 
source srs to the image.

I'm more confused about the two gdalwarp commands. My understanding 
(probably wrong) is that the first gdalwarp is just transforming the 
image into its projection that was assigned in the gdal_translate. This 
seems wrong because it is already in that transform so this should be a 
noop, but it warps the image into a parallelgram.

The 2nd gdalwarp, I think should be doing the collar clipping and 
transformation into geographic projection. I have tried this with and 
without the 1st gdalwarp command, but I always get a blank image as output.

The images are at:
http://swoodbridge.com/~woodbri/tmp.gif
http://swoodbridge.com/~woodbri/tmp2.tif
http://swoodbridge.com/~woodbri/tmp3.tif
http://swoodbridge.com/~woodbri/tmp4.tif

woodbri@carto:~/work/collarclip$ gdalinfo --version
GDAL 1.2.6.0, released 2005/03/13

I would appreaciate any enlightenment you can offer.

Happy New Year,
   -Steve

From tutey at o2.pl  Mon Jan  1 12:28:34 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:33 2007
Subject: [Gdal-dev] gdal-grass plugin fails during ./configure with GRASS
	6.3 CVS
Message-ID: <459944C2.70201@o2.pl>

Hi,

With current GRASS 6.3 CVS gdal-grass 1.3.1.2 and 1.3.2 fail during
configure:

$ ./configure --with-grass=/usr/local/grass-6.3.cvs/
[...]
checking for gdal-config... /usr/local/bin/gdal-config
using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/usr/local/grass-6.3.cvs/ requested, but
libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
include /usr/local/grass-6.3.cvs//lib?

GRASS is installed /usr/local/grass-6.3.cvs/, the
/usr/local/grass-6.3.cvs/lib is present in the /etc/ld.so.conf and I
remembered to run ldconfig.

Did something change in GRASS between 6.2 and 6.3, or in GDAL, that
gdal-grass plugin won't build with GRASS 6.3? Both gdal-grass versions
configure fine with GRASS 6.2.2 (CVS 23.12.2006).

Using GDAL 1.4 CVS 25.12.2006.

Any hints appreciated!

Thanks.

Maciek

From paul-grass at stjohnspoint.co.uk  Mon Jan  1 12:57:21 2007
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:50:33 2007
Subject: [Gdal-dev] Re: [GRASS-dev] gdal-grass plugin fails during
 ./configure with GRASS	6.3 CVS
In-Reply-To: <459944C2.70201@o2.pl>
References: <459944C2.70201@o2.pl>
Message-ID: <Pine.LNX.4.62.0701011751380.27777@agrippa.ukshells.co.uk>

You probably need to check config.log to see what the actual error is.

But as a sidenote, in some circumstances G_asprintf is/was/will be 
implemented as a macro (replaced by a call to the system asprintf()) and 
not a function in libgrass_gis.so, so it is not a very good choice as a 
typical GRASS function to test for in the configure script. Perhaps 
G_gisinit() would be better, or some function that the GDAL GRASS plugin 
directly uses.

Paul

On Mon, 1 Jan 2007, Maciej Sieczka wrote:

> Hi,
>
> With current GRASS 6.3 CVS gdal-grass 1.3.1.2 and 1.3.2 fail during
> configure:
>
> $ ./configure --with-grass=/usr/local/grass-6.3.cvs/
> [...]
> checking for gdal-config... /usr/local/bin/gdal-config
> using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-6.3.cvs/ requested, but
> libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
> include /usr/local/grass-6.3.cvs//lib?
>
> GRASS is installed /usr/local/grass-6.3.cvs/, the
> /usr/local/grass-6.3.cvs/lib is present in the /etc/ld.so.conf and I
> remembered to run ldconfig.
>
> Did something change in GRASS between 6.2 and 6.3, or in GDAL, that
> gdal-grass plugin won't build with GRASS 6.3? Both gdal-grass versions
> configure fine with GRASS 6.2.2 (CVS 23.12.2006).
>
> Using GDAL 1.4 CVS 25.12.2006.
>
> Any hints appreciated!
>
> Thanks.
>
> Maciek
>
> _______________________________________________
> grass-dev mailing list
> grass-dev@grass.itc.it
> http://grass.itc.it/mailman/listinfo/grass-dev
>

From tutey at o2.pl  Mon Jan  1 13:33:34 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: [GRASS-dev] gdal-grass plugin fails during
 ./configure with GRASS 6.3 CVS
In-Reply-To: <Pine.LNX.4.62.0701011751380.27777@agrippa.ukshells.co.uk>
References: <459944C2.70201@o2.pl>
	<Pine.LNX.4.62.0701011751380.27777@agrippa.ukshells.co.uk>
Message-ID: <459953FE.4000801@o2.pl>

Paul Kelly wrote:
> You probably need to check config.log to see what the actual error is.

Tried that but no enlightment. I'm attaching it if anybody would like
to have a look.

Cheers,
Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: config.log.bz2
Type: application/x-bzip
Size: 3507 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070101/dd4c26cd/config.log.bin
From woodbri at swoodbridge.com  Mon Jan  1 15:48:18 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <.70.73.22.137.1167675170.squirrel@70.73.22.137>
References: <45898C68.4030402@swoodbridge.com>
	<0c4601c72491$6218aa70$160002c0@shark>
	<458A0F71.8080403@swoodbridge.com>
	<017b01c72515$92d98ba0$160002c0@shark>
	<458BEACD.4090905@swoodbridge.com>
	<013101c725da$ee0c7300$160002c0@shark>
	<458BFC54.9030408@swoodbridge.com>
	<015c01c725e5$5fc6efc0$160002c0@shark>
	<45983970.1070708@swoodbridge.com>
	<.70.73.22.137.1167617601.squirrel@70.73.22.137>
	<45988484.4090704@swoodbridge.com>
	<.70.73.22.137.1167675170.squirrel@70.73.22.137>
Message-ID: <45997392.8060909@swoodbridge.com>

Awesome Brent,

That fixed it. That was a stupid off by one calculation to generate the 
epsg code. I also added an imagemagick convert command into the sequence 
to convert the gif to a truecolor tif. For this sample of one the collar 
gets nicely clipped except for a pixel border on the top and left edges 
that I can probably live with.

Next I will batch process a bunch of images and see how they line up in 
a tileindex. I probably also need to add -co TILED=YES to the last 
gdalwarp and then also add some overviews.

woodbri@carto:~/work/collarclip$ ./collarclip -w -v -i 
050k--h36-012-1.gif -d
Corner at:   74,   72
Corner at: 2858,   67
Corner at: 2865, 2259
Corner at:   74, 2266

convert tmp.gif -type TrueColor tmp.tif

getMapBBox: init=epsg:28406
   bb->ul  = (35.500000, 32.000000)
   bb->ur  = (35.750000, 32.000000)
   bb->lr  = (35.750000, 31.833333)
   bb->ll  = (35.500000, 31.833333)
projected as:
   bb->pul = (6736269.9, 3544647.9)
   bb->pur = (6759904.6, 3545222.1)
   bb->plr = (6760374.1, 3526731.5)
   bb->pll = (6736696.7, 3526158.9)

gdal_translate -gcp 74 72 6736269.9 3544647.9 -gcp 2858 67 6759904.6 
3545222.1 -gcp 2865 2259 6760374.1 3526731.5 -gcp 74 2266 6736696.7 
3526158.9 -a_srs EPSG:28406 tmp.tif tmp2.tif
Input file size is 2935, 2338
0...10...20...30...40...50...60...70...80...90...100 - done.

gdalwarp -rc -t_srs EPSG:28406 tmp2.tif tmp3.tif
Creating output file that is 2994P x 2392L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

gdalwarp -rc -t_srs EPSG:4284 -te 35.50000000 31.83333333 35.75000000 
32.00000000 tmp3.tif 050k--h36-012-1.tif
Creating output file that is 2966P x 1977L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

Here is just the image coming through mapserver:
http://swoodbridge.com/cgi-bin/mapserv-4.10?scale=80000&mapxy=35.6250062+31.9166766&mapsize=1200+1200&mode=map&layers=all&map=/home/woodbri/public_html/tmp4.map

Here it is draped with hillshade generated from SRTM 90M DEMs:
http://swoodbridge.com/cgi-bin/mapserv-4.10?scale=60000&mapxy=35.6250062+31.9166766&mapsize=1200+1200&mode=map&layers=all&map=/home/woodbri/public_html/tmp5.map

gdal is very cool! Thanks Frank.

Thank you Brent for the help.
   -Steve

Brent Fraser wrote:
> Steve,
> 
>   Some comments below:
> 
>> gdal_translate -gcp 74 72 6736269.9 3544647.9 -gcp 2858 67 6759904.6
>> 3545222.1 -gcp 2865 2259 6760374.1 3526731.5 -gcp 74 2266 6736696.7
>> 3526158.9 -a_srs EPSG:28405 tmp.gif tmp2.tif
>> Input file size is 2935, 2338
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> The above (and below) SRS should be 28406....
> 
>> # What is this command doing? or if I change the -t_srs EPSG:4285?
>>
> 
> The following command WARPS the raster using the affine transformation:
> 
>> gdalwarp -rc -t_srs EPSG:28405 tmp2.tif tmp3.tif
>> :0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> # Maybe I should be using this command INSTEAD of the command above? Is
>> # this command supposed to clip the collar also? In a prior email you
>> # mentioned it along with clipping the collar, and I thought it might be
>> # doing that also, or is the collar clipping done with another utility?
>>
> The following command PROJECTS the raster (and clips? I'm not sure that's
> possible):
> 
>> gdalwarp -rc -t_srs EPSG:4284 -te 35.50000000 31.83333333 35.75000000
>> 32.00000000 tmp3.tif 050k--h36-012-1.tif
>> Creating output file that is 3078P x 2052L.
>> :0...10...20...30...40...50...60...70...80...90...100 - done.
>>
> Brent
> 


From paul-grass at stjohnspoint.co.uk  Mon Jan  1 16:22:34 2007
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: [GRASS-dev] gdal-grass plugin fails during
 ./configure with GRASS 6.3 CVS
In-Reply-To: <459953FE.4000801@o2.pl>
References: <459944C2.70201@o2.pl>
	<Pine.LNX.4.62.0701011751380.27777@agrippa.ukshells.co.uk>
	<459953FE.4000801@o2.pl>
Message-ID: <Pine.LNX.4.62.0701012120550.9578@agrippa.ukshells.co.uk>

Hello Maciek

On Mon, 1 Jan 2007, Maciej Sieczka wrote:

> Paul Kelly wrote:
>> You probably need to check config.log to see what the actual error is.
>
> Tried that but no enlightment. I'm attaching it if anybody would like
> to have a look.

Here is the relevant output:

configure:2840: found /usr/local/bin/gdal-config
configure:2853: result: /usr/local/bin/gdal-config
configure:2912: result: using /usr/local/lib/gdalplugins as GDAL shared library
autoload directory
configure:2939: checking for G_asprintf in -lgrass_gis
configure:2969: gcc -o conftest -O2    conftest.c -lgrass_gis -L/usr/local/grass
-6.3.cvs/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -
lgrass_gproj -lgrass_vect -lgrass_dbmibase -lgrass_dbmiclient -lgrass_dgl -lgras
s_dig2 -lgrass_rtree -lgrass_linkm -L/usr/local/lib -lgdal  >&5
/usr/local/lib/libgeos_c.so.1: undefined reference to `geos::WKBReader::read(std
::basic_istream<char, std::char_traits<char> >&)'
/usr/local/lib/libgeos_c.so.1: undefined reference to `geos::WKBWriter::write(ge
os::Geometry const&, std::basic_ostream<char, std::char_traits<char> >&)'
/usr/local/lib/libgeos_c.so.1: undefined reference to `geos::Point::getCoordinat
esRO() const'
/usr/local/lib/libgeos_c.so.1: undefined reference to `geos::WKBWriter::WKBWrite
r(int, int)'
collect2: ld returned 1 exit status

So the problem is something to do with geos. What has changed appears to 
be something to do with GDAL now depending on GEOS in some way?

This e-mail from Glynn may be related:
http://grass.itc.it/pipermail/grass-dev/2006-November/027546.html

Hope this is some help. GDAL and Geos-related stuff has started coming up 
a bit in the last month or two so it looks like something is perhaps not 
right somewhere but I don't know what needs fixed exactly.

Paul


From Martin.Spott at mgras.net  Tue Jan  2 07:22:33 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Web page typo
Message-ID: <endiq9$sq0$1@osprey.mgras.de>

On the

  http://www.gdal.org/

page there's a typo in the link to

  http://gdal.osgeo.org/

Accidentially the URL includes the comma which is supposed to reside
_after_ the link,

	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From mateusz at loskot.net  Tue Jan  2 07:45:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Web page typo
In-Reply-To: <endiq9$sq0$1@osprey.mgras.de>
References: <endiq9$sq0$1@osprey.mgras.de>
Message-ID: <459A53E5.1070803@loskot.net>

Martin Spott wrote:
> On the
> 
>   http://www.gdal.org/
> 
> page there's a typo in the link to
> 
>   http://gdal.osgeo.org/
> 
> Accidentially the URL includes the comma which is supposed to reside
> _after_ the link,

Thanks for pointing this issue.
I've fixed it and the correct form should be visible in an hour or so.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Martin.Spott at mgras.net  Tue Jan  2 08:27:56 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
Message-ID: <endmks$q0e$1@osprey.mgras.de>

I get very similar errors while compiling GDAL on IRIX/MIPSPro (I'm
trying to build QGIS at my workplace):

GDAL-1.3.2:

(cd port; make)
make[1]: Entering directory `/usr/local/src/gdal-1.3.2/port'
/bin/sh /usr/local/src/gdal-1.3.2/libtool --mode=compile CC -O2
  -use_readonly_const -rdata_shared -woff
  1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
  1460,1551,1552,1681
  -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
  -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
  -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
  -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,.  -DOGR_ENABLED
  -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.3.2/port -c
  -o cpl_conv.o cpl_conv.cpp
 CC -O2 -use_readonly_const -rdata_shared -woff
   1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
   1460,1551,1552,1681
   -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
   -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
   -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
   -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -DOGR_ENABLED
   -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.3.2/port
   -c cpl_conv.cpp -o cpl_conv.o
cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 280
  An unsigned integer is being compared to zero.

      if( nSize < 0 )
                ^

cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 334
  An unsigned integer is being compared to zero.

      if( nNewSize < 0 )
                   ^

cc-1020 CC: ERROR File = cpl_conv.cpp, Line = 912
  The identifier "atoll" is undefined.

      iValue = atoll( pszValue );
               ^

1 error detected in the compilation of "cpl_conv.cpp".
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/local/src/gdal-1.3.2/port'
make: *** [port-target] Error 2


GDAL-1.4.0beta2:

(cd port; make)
make[1]: Entering directory `/usr/local/src/gdal-1.4.0beta2/port'
/bin/sh /usr/local/src/gdal-1.4.0beta2/libtool --mode=compile CC -O2
  -use_readonly_const -rdata_shared -woff
  1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
  1460,1551,1552,1681
  -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
  -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
  -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
  -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,.  -DOGR_ENABLED
  -I/usr/freeware/include -Xcpluscomm
  -I/usr/local/src/gdal-1.4.0beta2/port -c -o cpl_conv.o cpl_conv.cpp
 CC -O2 -use_readonly_const -rdata_shared -woff
   1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
   1460,1551,1552,1681
   -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
   -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
   -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
   -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -DOGR_ENABLED
   -I/usr/freeware/include -Xcpluscomm
   -I/usr/local/src/gdal-1.4.0beta2/port -c cpl_conv.cpp -o cpl_conv.o
cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 302
  An unsigned integer is being compared to zero.

      if( nSize < 0 )
                ^

cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 356
  An unsigned integer is being compared to zero.

      if( nNewSize < 0 )
                   ^

cc-1020 CC: ERROR File = cpl_conv.cpp, Line = 965
  The identifier "atoll" is undefined.

      iValue = atoll( pszValue );
               ^

cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 2187
  An unsigned integer is being compared to zero.

          if( nBytesRead < 0 )
                         ^

1 error detected in the compilation of "cpl_conv.cpp".
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/local/src/gdal-1.4.0beta2/port'
make: *** [port-target] Error 2


Any chance to get this sorted out ?

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From Martin.Spott at mgras.net  Tue Jan  2 09:30:20 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
References: <endmks$q0e$1@osprey.mgras.de>
Message-ID: <endq9s$stq$1@osprey.mgras.de>

Martin Spott wrote:

> GDAL-1.4.0beta2:
> 
> (cd port; make)
> make[1]: Entering directory `/usr/local/src/gdal-1.4.0beta2/port'

>  CC -O2 -use_readonly_const -rdata_shared -woff
>    1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
>    1460,1551,1552,1681
>    -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
>    -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
>    -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
>    -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -DOGR_ENABLED
>    -I/usr/freeware/include -Xcpluscomm
>    -I/usr/local/src/gdal-1.4.0beta2/port -c cpl_conv.cpp -o cpl_conv.o
> cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 302
>   An unsigned integer is being compared to zero.
> 
>       if( nSize < 0 )
>                 ^
> 
> cc-1183 CC: WARNING File = cpl_conv.cpp, Line = 356
>   An unsigned integer is being compared to zero.
> 
>       if( nNewSize < 0 )
>                    ^
> 
> cc-1020 CC: ERROR File = cpl_conv.cpp, Line = 965
>   The identifier "atoll" is undefined.
> 
>       iValue = atoll( pszValue );

Ok, apparently the 'configure' test for 'atoll' works different from
what's expected in the source code of GDAL, the same is with
'copysignf' (which triggers difficulties in 'port/cpl_strtod.cpp'),

Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From warmerdam at pobox.com  Tue Jan  2 12:21:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
Message-ID: <459A9481.3070408@pobox.com>

Folks,

I have prepared a GDAL release candidate - 1.4.0 RC1.  I would appreciate
testing for critical errors that should be corrected before the release.
My hope is to promote RC1 to be the actual release this Friday.

   http://www.gdal.org/dl/gdal-1.4.0RC1.tar.gz
   http://www.gdal.org/dl/gdal140RC1.zip

I have also published 1.4.0 autotest and doc files at:

   http://www.gdal.org/dl/gdal140doc.zip
   http://www.gdal.org/dl/gdalautotest-1.4.0.tar.gz

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From izzybitsie at gmail.com  Tue Jan  2 13:03:46 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Bug 1384 on FWTools release 1.1.2 (GDAL 1.4.0beta2)
Message-ID: <23e208430701021003h2c488269iddce387f034e1c81@mail.gmail.com>

Hi,


I have already tried to use gdal by downloading FWTools updated with beta2
and a problem I experienced with previous gdal version is still there(pls.
see below description of original problem).

ORIGINAL PROBLEM: running gdal_merge.py -pct -o output.tif -pct in1.tif
in2.tif where in*tif = geotiff images with one band and same color table,
gave me a full black out.tif.
This was reported as a bug and it was fixed according to bugzilla report for
1.4.0beta2.

You can find the input images here if you would like to give it a try:
http://www.mediamax.com/izzybitsie/Hosted/AS_GMSSO_00_20061122205634.tif
http://www.mediamax.com/izzybitsie/Hosted/AS_GMSNO_00_20061122205548.tif.gz




BUGZILLA REPORT

Updated colortable reading to look guess about the scaling problem, and
fix up on the fly if encountered.  Like this:

       int     nColorCount, nMaxColor = 0;
       GDALColorEntry oEntry;

       poColorTable = new GDALColorTable();

       nColorCount = 1 << nBitsPerSample;

       for( int iColor = nColorCount - 1; iColor >= 0; iColor-- )
       {
           oEntry.c1 = panRed[iColor] / 256;
           oEntry.c2 = panGreen[iColor] / 256;
           oEntry.c3 = panBlue[iColor] / 256;
           oEntry.c4 = 255;

           poColorTable->SetColorEntry( iColor, &oEntry );

           nMaxColor = MAX(nMaxColor,panRed[iColor]);
           nMaxColor = MAX(nMaxColor,panGreen[iColor]);
           nMaxColor = MAX(nMaxColor,panBlue[iColor]);
       }

       // Bug 1384 - Some TIFF files are generated with color map entry
       // values in range 0-255 instead of 0-65535 - try to handle these
       // gracefully.
       if( nMaxColor > 0 && nMaxColor < 256 )
       {
           CPLDebug( "GTiff", "TIFF ColorTable seems to be improperly
scaled,
fixing up." );

           for( int iColor = nColorCount - 1; iColor >= 0; iColor-- )
           {
               oEntry.c1 = panRed[iColor];
               oEntry.c2 = panGreen[iColor];
               oEntry.c3 = panBlue[iColor];
               oEntry.c4 = 255;

               poColorTable->SetColorEntry( iColor, &oEntry );
           }
       }

The problem file has been archived in data/geotiff/misc as:

  Bug1384_8bit_colortable.tif


=====================================================================


I checked geotiff.cpp downloaded with gdal1.4.0beta2 that includes code that
looks like the one above, but I don't see this fix in this code.  Am I
looking at the wrong code?

Does anyone know if fix for this bug was really included in FWTools1.1.2?
If so, does anyone have an idea on why I am still getting a black output
image?
Is there any other way to compose these 2 images keeping the color table?


BIG TX
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070102/76053683/attachment.html
From Martin.Spott at mgras.net  Tue Jan  2 13:21:37 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
References: <endmks$q0e$1@osprey.mgras.de> <endq9s$stq$1@osprey.mgras.de>
Message-ID: <ene7rh$p1q$1@osprey.mgras.de>

Martin Spott wrote:

> Ok, apparently the 'configure' test for 'atoll' works different from
> what's expected in the source code of GDAL, the same is with
> 'copysignf' (which triggers difficulties in 'port/cpl_strtod.cpp'),

While it's easy to work around these simply by changing some defines in
port/cpl_config.h, I now run into trouble while compiling the included
TIFF library (with beta2 as well as RC1). I'm pretty much surprised
because I thought the TIFF library should be expected to be "portable
by design" (....  or by history  ;-)

Am I being blocked by incorrect compiler behaviour ?

make[3]: Entering directory `/usr/local/src/gdal-1.4.0/frmts/gtiff/libtiff'
/bin/sh /usr/local/src/gdal-1.4.0/libtool --mode=compile cc -c
  -I../../port -Xcpluscomm -O2 -use_readonly_const -rdata_shared -woff
  1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
  1460,1551,1552,1681
  -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
  -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
  -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
  -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,.  -DOGR_ENABLED
  -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.4.0/port
  -DZIP_SUPPORT -DPIXARLOG_SUPPORT -I../../zlib -DJPEG_SUPPORT
  -I../../jpeg/libjpeg tif_fax3.c -o ../../o/tif_fax3.o
 cc -c -I../../port -Xcpluscomm -O2 -use_readonly_const -rdata_shared
   -woff 1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
   1460,1551,1552,1681
   -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
   -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
   -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
   -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -DOGR_ENABLED
   -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.4.0/port
   -DZIP_SUPPORT -DPIXARLOG_SUPPORT -I../../zlib -DJPEG_SUPPORT
   -I../../jpeg/libjpeg tif_fax3.c -o ../../o/tif_fax3.o
cc-1077 cc: ERROR File = tif_fax3.c, Line = 779
  The indicated declaration has no storage class or type specifier.

  inline static int32
  ^

cc-1065 cc: ERROR File = tif_fax3.c, Line = 779
  A semicolon is expected at this point.

  inline static int32
         ^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 806
  Expected a declaration.

  		while (!isAligned(bp, long)) {
  		^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 813
  Expected a declaration.

  		while ((bits >= (int32)(8 * sizeof(long))) && (0 == *lp)) {
  		^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 818
  Expected a declaration.

  	}
  	^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 836
  Expected a declaration.

  }
  ^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 865
  Expected a declaration.

  		while (!isAligned(bp, long)) {
  		^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 872
  Expected a declaration.

  		while ((bits >= (int32)(8 * sizeof(long))) && (~0 == *lp)) {
  		^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 877
  Expected a declaration.

  	}
  	^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 895
  Expected a declaration.

  }
  ^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 942
  Expected a declaration.

  	}
  	^

cc-1166 cc: ERROR File = tif_fax3.c, Line = 944
  Expected a declaration.

  }
  ^

cc-1020 cc: ERROR File = tif_fax3.c, Line = 979
  The identifier "horizcode" is undefined.

  				putcode(tif, &horizcode);
  				^

13 errors detected in the compilation of "tif_fax3.c".
make[3]: *** [../../o/tif_fax3.o] Error 1



	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From warmerdam at pobox.com  Tue Jan  2 13:33:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
In-Reply-To: <endq9s$stq$1@osprey.mgras.de>
References: <endmks$q0e$1@osprey.mgras.de> <endq9s$stq$1@osprey.mgras.de>
Message-ID: <459AA581.5020903@pobox.com>

Martin Spott wrote:
>> cc-1020 CC: ERROR File = cpl_conv.cpp, Line = 965
>>   The identifier "atoll" is undefined.
>>
>>       iValue = atoll( pszValue );
> 
> Ok, apparently the 'configure' test for 'atoll' works different from
> what's expected in the source code of GDAL, the same is with
> 'copysignf' (which triggers difficulties in 'port/cpl_strtod.cpp'),

Martin,

What does "man atoll" report on your IRIX system?  The GNU C library
version is declared in stdlib.h.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Tue Jan  2 13:58:00 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Mailing List Changes
In-Reply-To: <45958127.1080004@pobox.com>
References: <45958127.1080004@pobox.com>
Message-ID: <6.2.3.4.2.20070102125644.02ea90b8@hobu.mail.iastate.edu>



At 02:57 PM 12/29/2006, Frank Warmerdam wrote:
>Motion:
>  1) To create a gdal-announce@lists.osgeo.org mailing list which is moderated
>     and only used for infrequent GDAL/OGR related announcements such as
>     releases, major bugs, and other major events.

+1.  Would we subscribe all current gdal-dev members to this maillist too?

>  2) To migrate the gdal-dev@lists.maptools.org mailing list to 
> lists.osgeo.org
>     in such a way to preserve existing members, and hopefully preserve
>     settings.

+1

>  3) To create a gdal-commits@lists.osgeo.org mailing list which will be used
>     for SVN commit messages once the SVN transition is complete.

+1

>  4) To appoint Frank Warmerdam as lists administrator for the 
> GDAL/OGR mailing
>     lists.

+1.

>---
>
>Folks,
>
>I think a gdal announcements lists is necessary.  The gdal-dev mailing list
>is quite high traffic, and I think many users of GDAL who would like to keep
>track of the project at a high level are not willing to subscribe to such
>a high volume list.  This makes it hard to reach such users for review of
>new releases, sponsorship, conference events and so forth.
>
>I have explicitly not yet suggested a split into gdal-users and gdal-dev
>though that might also be a reasonable action.
>
>I think migration of gdal-dev to lists.osgeo.org should wait for a few
>weeks to ensure the new lists management is stabilized, but after that I
>think it helps make the affiliation with OSGeo clear.   It will hopefully
>also upgrade us to the version of mailman which has the "discard all
>pending email" option on the administrative page.  Currently it is very hard
>to keep ahead of the administrative load reviewing spams, and emails from
>unsubscribed users - many dozens of messages per day per list I manage.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Tue Jan  2 15:17:42 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <459A9481.3070408@pobox.com>
References: <459A9481.3070408@pobox.com>
Message-ID: <FF0730E5-9AC2-45C0-AC6A-1146238E6FA5@kyngchaos.com>

On Jan 2, 2007, at 11:21 AM, Frank Warmerdam wrote:

> Folks,
>
> I have prepared a GDAL release candidate - 1.4.0 RC1.  I would  
> appreciate
> testing for critical errors that should be corrected before the  
> release.
> My hope is to promote RC1 to be the actual release this Friday.
>
>   http://www.gdal.org/dl/gdal-1.4.0RC1.tar.gz
>   http://www.gdal.org/dl/gdal140RC1.zip
>
Still having a problem with my Idrisi/NetCDF bug:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1176

> I have also published 1.4.0 autotest and doc files at:
>
>   http://www.gdal.org/dl/gdal140doc.zip
>   http://www.gdal.org/dl/gdalautotest-1.4.0.tar.gz
>
Good.  I've been meaning to ask about an updated autotest.

One test I've wondered about - DODS OGR, the test never worked and  
still doesn't.  The error I get isn't very helpful as to why it's  
failing:

   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 170, in run_tests
     result = func()
   File "./ogr_dods.py", line 71, in ogr_dods_1
     gdaltest.dods_ds = ogr.Open( 'DODS:http://www.epic.noaa.gov: 
10100/dods/wod2001/natl_prof_bot.cdp?&_id=1' )
   File "/Library/Frameworks/Python.framework/Versions/2.4/lib/ 
python2.4/site-packages/ogr.py", line 338, in Open
     raise OGRError, 'Unable to open: ' + filename
OGRError: Unable to open: DODS:http://www.epic.noaa.gov:10100/dods/ 
wod2001/natl_prof_bot.cdp?&_id=1

"Unable to open" doesn't really tell me if the NOAA server is not  
responding or my DAP library is broken or the OGR DODS driver is  
broken.  Previously I used DAP 3.6.2, updated to 3.7.3 now, same  
problem on both.

The GDAL DODS driver seems to be working - I get a warning about no  
DAP 3 version, but it says it succeeds.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From ari.jolma at tkk.fi  Tue Jan  2 15:35:48 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <459A9481.3070408@pobox.com>
References: <459A9481.3070408@pobox.com>
Message-ID: <459AC224.5090703@tkk.fi>

Frank Warmerdam kirjoitti:
>
> I have prepared a GDAL release candidate - 1.4.0 RC1. 

I have a strange problem with RC1 and beta2 but _not_ with beta1 in 
MinGW (MSYS) but not in Linux. At the point in which ld.exe is making 
libgdal.la-4.o (1, 2 and 3 appear in .libs) ld.exe segfaults or 
something and creates a "Program Error". I guess this isn't an error in 
GDAL but anyway I'd like to fix it. It just seems hard to debug. Why 
these many temporary reloadable object files?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dmorissette at mapgears.com  Tue Jan  2 17:06:11 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Mailing List Changes
In-Reply-To: <45958127.1080004@pobox.com>
References: <45958127.1080004@pobox.com>
Message-ID: <459AD753.80309@mapgears.com>

+1

Daniel

Frank Warmerdam wrote:
> Motion:
>  1) To create a gdal-announce@lists.osgeo.org mailing list which is 
> moderated
>     and only used for infrequent GDAL/OGR related announcements such as
>     releases, major bugs, and other major events.
> 
>  2) To migrate the gdal-dev@lists.maptools.org mailing list to 
> lists.osgeo.org
>     in such a way to preserve existing members, and hopefully preserve
>     settings.
> 
>  3) To create a gdal-commits@lists.osgeo.org mailing list which will be 
> used
>     for SVN commit messages once the SVN transition is complete.
> 
>  4) To appoint Frank Warmerdam as lists administrator for the GDAL/OGR 
> mailing
>     lists.
> 
> ---
> 
> Folks,
> 
> I think a gdal announcements lists is necessary.  The gdal-dev mailing list
> is quite high traffic, and I think many users of GDAL who would like to 
> keep
> track of the project at a high level are not willing to subscribe to such
> a high volume list.  This makes it hard to reach such users for review of
> new releases, sponsorship, conference events and so forth.
> 
> I have explicitly not yet suggested a split into gdal-users and gdal-dev
> though that might also be a reasonable action.
> 
> I think migration of gdal-dev to lists.osgeo.org should wait for a few
> weeks to ensure the new lists management is stabilized, but after that I
> think it helps make the affiliation with OSGeo clear.   It will hopefully
> also upgrade us to the version of mailman which has the "discard all
> pending email" option on the administrative page.  Currently it is very 
> hard
> to keep ahead of the administrative load reviewing spams, and emails from
> unsubscribed users - many dozens of messages per day per list I manage.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Tue Jan  2 17:10:20 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Ogrinfo and MapInfo "view" TAB files
In-Reply-To: <459437E6.20003@gisnet.com>
References: <459437E6.20003@gisnet.com>
Message-ID: <459AD84C.2050403@mapgears.com>

Bill Thoen wrote:
> It doesn't look like the ogr MapInfo File driver can open a "view" type 
> tab file, or am I missing something? The view format is typically how MI 
> stores street files, and is essentially a join between a table of street 
> names and a table of the street segments. So is there a way to get 
> ogrinfo to read these or do I have to make a single tab file out of these?
> 

MITAB supports "view" TAB datasets, so ogrinfo should support them too. 
Perhaps your dataset uses a variation that is not supported yet, I would 
suggest that you first try reading your files using MITAB's tab2tab, see 
if that works, and if not we'd need to have a look at your dataset and 
see how hard it would be to add support for the missing features in MITAB.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From izzybitsie at gmail.com  Tue Jan  2 17:53:22 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdal1.4.0RC1 vs gdal1.4.0beta2
Message-ID: <23e208430701021453w7364a88cpbe2e1cb548f52597@mail.gmail.com>

Hi,

does anybody know if the bug 1384 reported for beta1 and still not working
on beta2 is fixed on gdal1.4.0RC1?
This bug was related to geotiff maps whose color tables only contained 256
entries.  This caused generation of black maps whenever input maps with this
type of color table were composed using gdal_merge.py.



Tx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070102/7a3568e9/attachment.html
From bthoen at gisnet.com  Tue Jan  2 18:18:45 2007
From: bthoen at gisnet.com (Bill Thoen)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Ogrinfo and MapInfo "view" TAB files
In-Reply-To: <459AD84C.2050403@mapgears.com>
References: <459437E6.20003@gisnet.com> <459AD84C.2050403@mapgears.com>
Message-ID: <459AE855.30504@gisnet.com>

Hmm... now it works. I must have messed something up the first time.

Daniel Morissette wrote:
> Bill Thoen wrote:
>> It doesn't look like the ogr MapInfo File driver can open a "view" 
>> type tab file, or am I missing something? The view format is 
>> typically how MI stores street files, and is essentially a join 
>> between a table of street names and a table of the street segments. 
>> So is there a way to get ogrinfo to read these or do I have to make a 
>> single tab file out of these?
>>
>
> MITAB supports "view" TAB datasets, so ogrinfo should support them 
> too. Perhaps your dataset uses a variation that is not supported yet, 
> I would suggest that you first try reading your files using MITAB's 
> tab2tab, see if that works, and if not we'd need to have a look at 
> your dataset and see how hard it would be to add support for the 
> missing features in MITAB.
>
> Daniel


From mateusz at loskot.net  Tue Jan  2 21:42:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
In-Reply-To: <endmks$q0e$1@osprey.mgras.de>
References: <endmks$q0e$1@osprey.mgras.de>
Message-ID: <459B1801.5010405@loskot.net>

Martin Spott wrote:
> Any chance to get this sorted out ?

Martin,

What is the compile exactly you use on your IRIX machine?

All those errors you're reporting sounds like a lack of C99 support.
Missing long long and functions handling this type, errors about C99's
"static inline" feature, etc.
All these are features introduced in C99 (ISO/IEC 9899:1999) - C
language and library extensions for C89.
So, I suspect your compile doesn't support C langauge defined in C99.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan  2 22:12:31 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
In-Reply-To: <459B1801.5010405@loskot.net>
References: <endmks$q0e$1@osprey.mgras.de> <459B1801.5010405@loskot.net>
Message-ID: <459B1F1F.9070705@loskot.net>

Mateusz Loskot wrote:
> Martin Spott wrote:
>> Any chance to get this sorted out ?
> 
> Martin,
> 
> What is the compile exactly you use on your IRIX machine?

Certainly, I'm asking about the *compiler*, not compile.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Jan  3 01:26:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <FF0730E5-9AC2-45C0-AC6A-1146238E6FA5@kyngchaos.com>
References: <459A9481.3070408@pobox.com>
	<FF0730E5-9AC2-45C0-AC6A-1146238E6FA5@kyngchaos.com>
Message-ID: <459B4C9F.2080903@pobox.com>

William Kyngesburye wrote:
> On Jan 2, 2007, at 11:21 AM, Frank Warmerdam wrote:
> 
>> Folks,
>>
>> I have prepared a GDAL release candidate - 1.4.0 RC1.  I would appreciate
>> testing for critical errors that should be corrected before the release.
>> My hope is to promote RC1 to be the actual release this Friday.
>>
>>   http://www.gdal.org/dl/gdal-1.4.0RC1.tar.gz
>>   http://www.gdal.org/dl/gdal140RC1.zip
>>
> Still having a problem with my Idrisi/NetCDF bug:
> 
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1176

William,

I have finally investigated, and it seems to be that the netcdf
library ncopen() isn't too safe in the face of arbitrary non-netcdf
files.  I intend to modify the netcdf driver to test files for a
netcdf magic code before passing to ncopen() to work around this.
However, the change is sufficiently involved that I don't want to
do it just now.

>> I have also published 1.4.0 autotest and doc files at:
>>
>>   http://www.gdal.org/dl/gdal140doc.zip
>>   http://www.gdal.org/dl/gdalautotest-1.4.0.tar.gz
>>
> Good.  I've been meaning to ask about an updated autotest.
> 
> One test I've wondered about - DODS OGR, the test never worked and still 
> doesn't.  The error I get isn't very helpful as to why it's failing:


>   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
...

> "Unable to open" doesn't really tell me if the NOAA server is not 
> responding or my DAP library is broken or the OGR DODS driver is 
> broken.  Previously I used DAP 3.6.2, updated to 3.7.3 now, same problem 
> on both.

The "couldn't connect to host" is the real error message.  Apparently the
server I was testing against has changed or moved or something and I
haven't had the inclination to adjust the script.  I likely ought to setup
my own DODS server for testing against, but this could easily be a bit
of work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Martin.Spott at mgras.net  Wed Jan  3 03:30:58 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
References: <endmks$q0e$1@osprey.mgras.de> <459B1801.5010405@loskot.net>
Message-ID: <enfpk2$tf8$1@osprey.mgras.de>

Hi Mateusz,

Mateusz Loskot wrote:

> All those errors you're reporting sounds like a lack of C99 support.
> Missing long long and functions handling this type, errors about C99's
> "static inline" feature, etc.

This is MIPSpro 7.41 ....:

  http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=relnotes&fname=/usr/relnotes/c_dev#New%20Features

I added "-c99" to my CFLAGS for "cc", but actually this didn't change
anything. "CC" on the other hand does not know about C99 instructions.
So there appears to be no solution for 'atoll' and 'copysignf' on
IRIX, I can live with the fallbacks.
Building the included GeoTIFF library was easy once I knew what
actually happend ....  I simply removed the include path to the
system-installed TIFF library from the compiler flags and the TIFF
issue was done.


Now I'm running into different trouble - any idea ?

make[2]: Entering directory `/usr/local/src/gdal-1.4.0/frmts/nitf'
[...]
 cc -Xcpluscomm -O2 -use_readonly_const -rdata_shared -woff
   1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
   1460,1551,1552,1681
   -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
   -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
   -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
   -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -c99
   -I/usr/local/src/gdal-1.4.0/port -I/usr/local/src/gdal-1.4.0/gcore
   -I/usr/local/src/gdal-1.4.0/alg -I/usr/local/src/gdal-1.4.0/ogr
   -I/usr/local/src/gdal-1.4.0/ogr/ogrsf_frmts -DOGR_ENABLED
   -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.4.0/port
   -c nitfimage.c -o ../o/nitfimage.o
cc-1196 cc: WARNING File = nitfimage.c, Line = 1964
  The indicated function is declared implicitly.

          pachTRE = NITFFindTREByIndex( psImage->pachTRE, psImage->nTREBytes, 
                    ^

cc-1515 cc: ERROR File = nitfimage.c, Line = 1964
  A value of type "int" cannot be assigned to an entity of type "const char *".

          pachTRE = NITFFindTREByIndex( psImage->pachTRE, psImage->nTREBytes, 
                  ^

1 error detected in the compilation of "nitfimage.c".
make[2]: *** [../o/nitfimage.o] Error 1


Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From mateusz at loskot.net  Wed Jan  3 04:28:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] An unsigned integer is being compared to zero.
In-Reply-To: <enfpk2$tf8$1@osprey.mgras.de>
References: <endmks$q0e$1@osprey.mgras.de> <459B1801.5010405@loskot.net>
	<enfpk2$tf8$1@osprey.mgras.de>
Message-ID: <459B774A.9020409@loskot.net>

Martin Spott wrote:
> Hi Mateusz,
> 
> Mateusz Loskot wrote:
> 
>> All those errors you're reporting sounds like a lack of C99 support.
>> Missing long long and functions handling this type, errors about C99's
>> "static inline" feature, etc.
> 
> This is MIPSpro 7.41 ....:
> 
>   http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi?coll=0650&db=relnotes&fname=/usr/relnotes/c_dev#New%20Features
> 
> I added "-c99" to my CFLAGS for "cc", but actually this didn't change
> anything. "CC" on the other hand does not know about C99 instructions.
> So there appears to be no solution for 'atoll' and 'copysignf' on
> IRIX, I can live with the fallbacks.

OK, so there is C99 mode for MIPSpro.
As I see in the link above, there is long long support,
so there the strtoll() function should be available.
This can safely replace atoll() call.

However, I suppose GDAL is compiled in C++ mode using your compiler,
and AFAIK there is *no* C99 support for C++ mode, so the long long
and *ll() functions won't be available. That's what I suppose.

> Building the included GeoTIFF library was easy once I knew what
> actually happend ....  I simply removed the include path to the
> system-installed TIFF library from the compiler flags and the TIFF
> issue was done.

This library can be compiled in plain ANSI C mode, so here -c99 option
should work well.

> Now I'm running into different trouble - any idea ?
> 
> make[2]: Entering directory `/usr/local/src/gdal-1.4.0/frmts/nitf'
> [...]
>  cc -Xcpluscomm -O2 -use_readonly_const -rdata_shared -woff
>    1001,1012,1014,1110,1116,1155,1172,1174,1234,1401 -woff
>    1460,1551,1552,1681
>    -OPT:roundoff=0:Olimit=0:div_split=ON:alias=typed:fast_io=ON
>    -OPT:got_call_conversion=ON:reorg_common=ON:rsqrt=ON:swp=ON
>    -LANG:exceptions=ON -I/opt/include -I/usr/freeware/include -Wl,-rpath
>    -Wl,/usr/freeware/lib32 -Wl,-rpath -Wl,. -c99
>    -I/usr/local/src/gdal-1.4.0/port -I/usr/local/src/gdal-1.4.0/gcore
>    -I/usr/local/src/gdal-1.4.0/alg -I/usr/local/src/gdal-1.4.0/ogr
>    -I/usr/local/src/gdal-1.4.0/ogr/ogrsf_frmts -DOGR_ENABLED
>    -I/usr/freeware/include -Xcpluscomm -I/usr/local/src/gdal-1.4.0/port
>    -c nitfimage.c -o ../o/nitfimage.o
> cc-1196 cc: WARNING File = nitfimage.c, Line = 1964
>   The indicated function is declared implicitly.
> 
>           pachTRE = NITFFindTREByIndex( psImage->pachTRE, psImage->nTREBytes, 
>                     ^
> 
> cc-1515 cc: ERROR File = nitfimage.c, Line = 1964
>   A value of type "int" cannot be assigned to an entity of type "const char *".
> 
>           pachTRE = NITFFindTREByIndex( psImage->pachTRE, psImage->nTREBytes, 

Here, I suppose, your MIPSpro recognizes that:

1) declaration of the the dNITFFindTREByIndex() is missing
2) then, compiler accepts it as an implicitly declared function
3) by default, the return type of implicitly declared function is int.

So, in following line:

pachTRE = NITFFindTREByIndex(...),

return value from the function which is assumed to be int is assigned to
pachTRE that is declared as char*.

Now, the question is why declaration of the NITFFindTREByIndex() is
missing. Some headers seems to be missing, unable to locate.
That's all about the problem itself, but I have no idea about
dependencies of the NITF driver.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From xuliwei at nudt.edu.cn  Wed Jan  3 07:10:06 2007
From: xuliwei at nudt.edu.cn (=?gb2312?B?0OzA8s6w?=)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Can't find GDAL source files for WinCE
Message-ID: <367826206.26698@nudt.edu.cn>

Hi all:
   I'm trying to build gdal for Windows CE. I was reading the information on http://www.gdal.org/wince.html
 It said that I can download the official CVS repository. Follow instructions in
 CVS section on the GDAL download page. I tried to connect to the gdal server
under
 linux according to the instructions on the download page. But it lose connection
 after I type Enter for password.  And I cann't find the gdal source files for
 WinCE on the http://www.gdal.org/dl 
 I don't konw why? Anyone can help me? Thx~~~~~~~:)
 
                                              Star



From jean-claude.repetto at worldonline.fr  Wed Jan  3 08:16:42 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Patch for GDAL bug#1416
Message-ID: <459BACBA.6000604@worldonline.fr>

Hello,

I suggest this patch to solve bug #1416 :

--- gdal-1.4.0.orig/ogr/ogrsf_frmts/mitab/mitab_coordsys.cpp
2006-03-10 20:55:00.000000000 +0100
+++ gdal-1.4.0/ogr/ogrsf_frmts/mitab/mitab_coordsys.cpp 2007-01-03
14:07:24.000000000 +0100
@@ -786,7 +786,7 @@
  /* -------------------------------------------------------------------- */
  /*      Set prime meridian for 9999 datums.                             */
  /* -------------------------------------------------------------------- */
-    if( nDatum == 9999 )
+    if( nDatum == 9999 || adfDatumParm[7] != 0.0 )
      {
          pszPrimeM = "non-Greenwich";
          dfPMLongToGreenwich = adfDatumParm[7];


Best regards,
Jean-Claude



From bclay at ball.com  Wed Jan  3 09:11:31 2007
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] ssf file format
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFA08@daytonmsg2k3.AERO.BALL.COM>

Does anyone have any information on Trimble's ssf file format?  I have
not seen anything in GDAL to handle it but Trimble's software is toooooo
expensive and I need to convert some GPS data to something usable by
GIS.  Also, does anyone now how to geo-correct  GPS data with COORS
data.  That would be another useful extension to acquiring real world
data for GIS.

 

Thanks for your thoughts.

 

Bruce

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/0233becb/attachment.html
From ILucena at clarku.edu  Wed Jan  3 09:24:00 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45502542F9A@Iris.ad.clarku.edu>

William,

Because Idrisi is a raw binary format it usually gets into trouble with
other formats drivers like Frank mentioned. We saw that happens before.

The reason for that is because raw binary does not have header the
initial pixels values can be interpreted as false match for driver that
checks for header information. 

I suggest placing GDALRegister_IDRISI first in the GDALAllRegister() and
I think that will be safe because this format is file-extension
dependent, and checks for it:

GDALDataset *IdrisiDataset::Open(GDALOpenInfo *poOpenInfo)
{
  if ((poOpenInfo->fp == NULL) || 
    (EQUAL(CPLGetExtension(poOpenInfo->pszFilename), ".RST") == FALSE))
    return NULL;
...

So, William, can you make that change in GDALAllRegister() and do some
test to check this theory?

That will be great. Thank you very much,

Ivan


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Wednesday, January 03, 2007 1:27 AM
To: William Kyngesburye
Cc: gdal-dev
Subject: Re: [Gdal-dev] GDAL 1.4.0 RC1 Available

William Kyngesburye wrote:
> On Jan 2, 2007, at 11:21 AM, Frank Warmerdam wrote:
> 
>> Folks,
>>
>> I have prepared a GDAL release candidate - 1.4.0 RC1.  I would
appreciate
>> testing for critical errors that should be corrected before the
release.
>> My hope is to promote RC1 to be the actual release this Friday.
>>
>>   http://www.gdal.org/dl/gdal-1.4.0RC1.tar.gz
>>   http://www.gdal.org/dl/gdal140RC1.zip
>>
> Still having a problem with my Idrisi/NetCDF bug:
> 
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1176

William,

I have finally investigated, and it seems to be that the netcdf
library ncopen() isn't too safe in the face of arbitrary non-netcdf
files.  I intend to modify the netcdf driver to test files for a
netcdf magic code before passing to ncopen() to work around this.
However, the change is sufficiently involved that I don't want to
do it just now.

>> I have also published 1.4.0 autotest and doc files at:
>>
>>   http://www.gdal.org/dl/gdal140doc.zip
>>   http://www.gdal.org/dl/gdalautotest-1.4.0.tar.gz
>>
> Good.  I've been meaning to ask about an updated autotest.
> 
> One test I've wondered about - DODS OGR, the test never worked and
still 
> doesn't.  The error I get isn't very helpful as to why it's failing:


>   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
...

> "Unable to open" doesn't really tell me if the NOAA server is not 
> responding or my DAP library is broken or the OGR DODS driver is 
> broken.  Previously I used DAP 3.6.2, updated to 3.7.3 now, same
problem 
> on both.

The "couldn't connect to host" is the real error message.  Apparently
the
server I was testing against has changed or moved or something and I
haven't had the inclination to adjust the script.  I likely ought to
setup
my own DODS server for testing against, but this could easily be a bit
of work.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Wed Jan  3 10:51:47 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Can't find GDAL source files for WinCE
In-Reply-To: <367826206.26698@nudt.edu.cn>
References: <367826206.26698@nudt.edu.cn>
Message-ID: <459BD113.3080306@loskot.net>

??? wrote:
> Hi all:
>    I'm trying to build gdal for Windows CE. I was reading the information on http://www.gdal.org/wince.html
>  It said that I can download the official CVS repository. Follow instructions in
>  CVS section on the GDAL download page. I tried to connect to the gdal server
> under
>  linux according to the instructions on the download page. But it lose connection
>  after I type Enter for password.  And I cann't find the gdal source files for
>  WinCE on the http://www.gdal.org/dl 
>  I don't konw why? Anyone can help me? Thx~~~~~~~:)

Yesterda, I removed all those files and I'm reconstructing the port
structure for 1.4.0.
As you can read in README file, the IMPORTANT note says "please don't
use them ATM."

http://www.gdal.org/srctree/wince/README

The 1.4.0 release will be back working.

I appologize for inconvenience.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From woklist at kyngchaos.com  Wed Jan  3 11:19:42 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45502542F9A@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45502542F9A@Iris.ad.clarku.edu>
Message-ID: <38A2AF2F-C12B-41F4-95D9-0E8DB0CF953E@kyngchaos.com>

On Jan 3, 2007, at 8:24 AM, Ivan Lucena wrote:

> William,
>
> I suggest placing GDALRegister_IDRISI first in the GDALAllRegister 
> () and
> I think that will be safe because this format is file-extension
> dependent, and checks for it:
>
Makes sense, but won't work in my situation.  To make my Xcode  
project more configurable for formats that require optional external  
libraries (on OS X), I do these formats as plugins.  I know Frank has  
told me that this is an unsupported use of plugins, and partly for  
this very reason - format loading order.

For a quick immediate fix for the bug, this sounds like a reasonable  
workaround.  I can adjust my Xcode project somehow.  For a 'normal'  
configure-make-install build on OSX it wouldn't be a problem.

Frank, when I was thinking about this, and my excessive use of  
plugins, I wondered if GDALAllRegister() could be changed a bit: do  
some of the plugin checking and loading there directly instead of at  
the start in AutoLoadDrivers().  Then, whether it's a plugin or  
builtin, formats could still be loaded in a particular order.   
Something like:

#ifdef FRMT_netcdf
     GDALRegister_GMT();
     GDALRegister_netCDF();
#else
     // check for existence of plugin version of it
     // load it if found
#endif

Just a thought.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/5762a1f3/attachment.html
From woklist at kyngchaos.com  Wed Jan  3 11:21:07 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <459B4C9F.2080903@pobox.com>
References: <459A9481.3070408@pobox.com>
	<FF0730E5-9AC2-45C0-AC6A-1146238E6FA5@kyngchaos.com>
	<459B4C9F.2080903@pobox.com>
Message-ID: <C0EFEF29-A30E-45EA-892E-48E446D06D48@kyngchaos.com>

On Jan 3, 2007, at 12:26 AM, Frank Warmerdam wrote:

>>   TEST: ogr_dods_1 ... ERROR 4: couldn't connect to host
> ...
>
>> "Unable to open" doesn't really tell me if the NOAA server is not  
>> responding or my DAP library is broken or the OGR DODS driver is  
>> broken.  Previously I used DAP 3.6.2, updated to 3.7.3 now, same  
>> problem on both.
>
> The "couldn't connect to host" is the real error message.   
> Apparently the
> server I was testing against has changed or moved or something and I
> haven't had the inclination to adjust the script.  I likely ought  
> to setup
> my own DODS server for testing against, but this could easily be a bit
> of work.
>
I wonder if the host used for the GDAL DODS test has vector layers to  
test OGR DODS with?

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From zhonghaiw at gmail.com  Wed Jan  3 11:24:34 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL1.4.0RC1 test result: 'sn' is not recognized as an
	internal or external command
Message-ID: <2534c4120701030824w67114191o5fc792f8c0d69122@mail.gmail.com>

Hallo there,

first of all, thank you guys for the efforts on the new GDAL package.

I've tried today to compile the package under .NET 2.0 following these
steps:
1. compile GDAL;
2. cd to swig\csharp to compile the C# wrapper, at this step i got an error
message when performing the command namke /f makefile.vc:

Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
Copyright (C) Microsoft Corp 1988-1998. All rights reserved.

        sn -k gdal.snk

The command "sn" is not recognized as an internal or external command
NMAKE : fatal error U1077: 'sn' : return code '0x1'
Stop.

is the GDAL package not compatible with .NET 2.0?

thanks for any information.

Regards

Zhonghai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/08e96a6c/attachment.html
From ari.jolma at tkk.fi  Wed Jan  3 11:28:13 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: [geos-devel] Patch: Fixing GEOS HEAD compilation
	under MingW
In-Reply-To: <1167830626.6306.5.camel@mca-desktop>
References: <1167814849.5617.22.camel@mca-desktop>
	<1167830626.6306.5.camel@mca-desktop>
Message-ID: <459BD99D.4090106@tkk.fi>

Mark Cave-Ayland kirjoitti:
> I've just discovered that the issue with ld.exe crashing was a problem
> with my MingW setup - I've fixed this, and just completed a clean GEOS
> build under MingW by downloading a fresh source and applying the patch
> from my previous email :D
>   

Could you tell us what the problem was? I'm having similar problems with 
MinGW/MSYS when building GDAL. I changed the max_cmd_len to 50000 and it 
fixed the problem, but according to you my MinGW setup is faulty.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From hobu at iastate.edu  Wed Jan  3 11:31:00 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL1.4.0RC1 test result: 'sn' is not
	recognized as an internal or external command
In-Reply-To: <2534c4120701030824w67114191o5fc792f8c0d69122@mail.gmail.co
 m>
References: <2534c4120701030824w67114191o5fc792f8c0d69122@mail.gmail.com>
Message-ID: <6.2.3.4.2.20070103103018.03319220@hobu.mail.iastate.edu>

At 10:24 AM 1/3/2007, Zhonghai Wang wrote:
>Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0

.NET requires MSVC 7.1 and above.  You are using MSVC 6.  There is no 
.NET in 6.

Howard 


From dany.geotools at gmail.com  Wed Jan  3 11:48:10 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: GDAL data writing problems (using Java SWIG bindings)
In-Reply-To: <7221db410612270722q12d14428o26e87e1c1c67d99@mail.gmail.com>
References: <7221db410612270722q12d14428o26e87e1c1c67d99@mail.gmail.com>
Message-ID: <7221db410701030848x6f49385bn9e3802399cbfb670@mail.gmail.com>

Hi list,
I solved my problem debugging gdalJNI.dll.

Since the SWIG Java Bindings use the method "GetDirectBufferAddress(...)"
which requires a direct buffer,
I fixed the code:
------------------------------------------------------------------------------------------------------------------------------------------
...
byte [] byteRaster =
((DataBufferByte)b0.getData().getDataBuffer()).getData();
ByteBuffer bb=ByteBuffer.allocateDirect(byteRaster.length);
bb.put(byteRaster);
...
------------------------------------------------------------------------------------------------------------------------------------------

The old code was:
------------------------------------------------------------------------------------------------------------------------------------------
...
ByteBuffer bb0 = ByteBuffer.wrap(((DataBufferByte)
b0.getData().getDataBuffer()).getData(0));

...

which uses a HeapByteBuffer. In such a case, GetDirectBufferAddress returns
NULL.
------------------------------------------------------------------------------------------------------------------------------------------


With these changes, the final code becomes:
------------------------------------------------------------------------------------------------------------------------------------------
        final File outFile = new
File("D:\\DatiPlugin\\geotiff\\mysample.tif");
        final BufferedImage im = ImageIO.read(new
File("D:\\DatiPlugin\\bogota.tif"));
        Driver gtiffDriver = gdal.GetDriverByName("GTiff");
        final int width = im.getWidth();
        final int height = im.getHeight();

        Dataset ds = gtiffDriver.Create(outFile.getAbsolutePath(), width,
height, 1, gdalconstConstants.GDT_Byte,null);
        RenderedOp b0 = BandSelectDescriptor.create(im, new int[] { 0 },
null);

        byte [] byteRaster =
((DataBufferByte)b0.getData().getDataBuffer()).getData();
        ByteBuffer bb=ByteBuffer.allocateDirect(byteRaster.length);
        bb.put(byteRaster);
        ds.GetRasterBand
(1).WriteRaster_Direct(0,0,width,height,width,height,
gdalconstConstants.GDT_Byte,bb);

        ds.FlushCache();
        ds.delete();
------------------------------------------------------------------------------------------------------------------------------------------







On 12/27/06, Daniele Romagnoli < dany.geotools@gmail.com> wrote:
>
> Hi list,
>
> I'm unsuccessfully trying to write some raster data using  GDAL Java
> Bindings, by mean of the writeRaster_Direct method.
>
> This is my code:
> ------------------------------------------------------------
> final File outFile = new File("d:\\DatiPlugin\\geotiff\\mysample22.tif");
> final BufferedImage im = ImageIO.read(new
> File("D:\\DatiPlugin\\bogota.tif"));
>
> Driver gtiffDriver = gdal.GetDriverByName("GTiff");
> final int width = im.getWidth();
> final int height = im.getHeight ();
>
> Dataset ds = gtiffDriver.Create(outFile.getAbsolutePath(), width,
> height, 1, gdalconstConstants.GDT_Byte,null);
>
> RenderedOp b0 = BandSelectDescriptor.create(im, new int[] { 0 }, null);
>
> ByteBuffer bb0 = ByteBuffer.wrap(((DataBufferByte)
> b0.getData().getDataBuffer()).getData(0));
>
> ByteBuffer scanline;
> byte  miniBuffer[] = new byte [width];
>
> for (int i=0; i<height;i++){
>    bb0.get(miniBuffer, width*i, width);
>    scanline = ByteBuffer.wrap(miniBuffer);
>    ds.GetRasterBand (1).WriteRaster_Direct(0,height*i,width,1,width,1,
> gdalconstConstants.GDT_Byte,scanline);
> }
>
>
> ds.FlushCache();
> ds.delete();
> ------------------------------------------------------------
>
>
>
> This code, generates this exception:
> -------------------------------------------------------
> An unexpected exception has been detected in native code outside the VM.
> Unexpected Signal : EXCEPTION_ACCESS_VIOLATION (0xc0000005) occurred
> at PC=0x7C342EEE
> Function=memcpy+0x33
> Library=C:\WINDOWS\system32\MSVCR71.dll
> Source file = F:\VS70Builds\3052\vc\crtbld\crt\src\intel\memcpy.asm : 171
>
>
> Current Java thread:
>    at org.gdal.gdal.gdalJNI.Band_WriteRaster_Direct (Native Method)
>    at org.gdal.gdal.Band.WriteRaster_Direct(Band.java:127)
>    at javax.imageio.plugins.jp2k.TestJaiRead.testWrite(TestJaiRead.java
> :178)
>    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>    at sun.reflect.NativeMethodAccessorImpl.invoke(
> NativeMethodAccessorImpl.java:39)
>    at sun.reflect.DelegatingMethodAccessorImpl.invoke(
> DelegatingMethodAccessorImpl.java:25)
>    at java.lang.reflect.Method.invoke (Method.java:324)
>    at junit.framework.TestCase.runTest(TestCase.java:154)
>    at junit.framework.TestCase.runBare(TestCase.java:127)
>    at junit.framework.TestResult$1.protect(TestResult.java:106)
>    at junit.framework.TestResult.runProtected (TestResult.java:124)
>    at junit.framework.TestResult.run(TestResult.java:109)
>    at junit.framework.TestCase.run(TestCase.java:118)
>    at junit.framework.TestSuite.runTest (TestSuite.java:208)
>    at junit.framework.TestSuite.run (TestSuite.java:203)
>    at junit.textui.TestRunner.doRun(TestRunner.java:116)
>    at junit.textui.TestRunner.doRun(TestRunner.java:109)
>    at junit.textui.TestRunner.run (TestRunner.java:72)
>    at junit.textui.TestRunner.run (TestRunner.java:57)
>    at javax.imageio.plugins.jp2k.TestJaiRead.main(TestJaiRead.java:76)
> ------------------------------------------
>
>
> Does anybody have any clues about what I'm doing wrong?
>
> Moreover, I have one question. Did anybody tried to write data using
> the java bindings directly?  I mean without using DataSet CreateCopy or
> the
> like but feeding data directly into a RasterBand?
>
>
> Best regards,
> Daniele
>
>
>
>
>
>
>
>
>
> --
> Best Regards,
> Daniele




-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/781a406a/attachment.html
From mitchelljj98 at gmail.com  Wed Jan  3 12:01:18 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdalwarp -rc -tr 250 250 ortho_*.tif overview.tif error
Message-ID: <fa2ac0580701030901t29f09a0di3e5d92d5edc1070d@mail.gmail.com>

Hi,

I run the following command:

gdalwarp -rc -tr 250 250 ortho.tif overview.tif

and I get the following error:

Error 1:Attempt to create 0X0X3 TIFF, but width, height and bands must
be positive.

What do I need to add to my gdalwarp command?

Thanks,

John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/9aa4b8e5/attachment.html
From zhonghaiw at gmail.com  Wed Jan  3 12:10:43 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL1.4.0RC1 test result: 'sn' is not recognized as an
	internal or external command
In-Reply-To: <2534c4120701030839v1109486eo5bc498b87b111be9@mail.gmail.com>
References: <2534c4120701030824w67114191o5fc792f8c0d69122@mail.gmail.com>
	<6.2.3.4.2.20070103103018.03319220@hobu.mail.iastate.edu>
	<2534c4120701030839v1109486eo5bc498b87b111be9@mail.gmail.com>
Message-ID: <2534c4120701030910kb7a11d1u8eac5b4da08a5fb5@mail.gmail.com>

Sorry for the post, I made a mistake here. Thanks for your information,
Howard.

the answer to that is: open the command prompt from visual stiudio 2005.

Regards

Zhonghai

On 1/3/07, Zhonghai Wang <zhonghaiw@gmail.com> wrote:
>
> I am confused, I open the command window using the Microsoft .NET
> Framework SDK v2.0>SDK Command Prompt, surely that is under the .NET 2.0framework.
>
> any more suggestion?
>
> thanks for your answer.
>
> Zhonghai
>
>
>  On 1/3/07, Howard Butler <hobu@iastate.edu> wrote:
> >
> > At 10:24 AM 1/3/2007, Zhonghai Wang wrote:
> > >Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
> >
> > .NET requires MSVC 7.1 and above.  You are using MSVC 6.  There is no
> > .NET in 6.
> >
> > Howard
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/44f1592f/attachment.html
From ILucena at clarku.edu  Wed Jan  3 13:32:31 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45502543052@Iris.ad.clarku.edu>

Hi William,

 

Since you have the NetCDF working in your GDAL build and you have the
raster files that produced the error could do us a favor and test if
changing the order in GDALALLRegister() works? That will help a lot.

 

I am not saying that you should take this as a quick fix or workaround I
just need your help to test it. :-) 

 

I think that a definitive solution will come from Frank as long we are
giving him more information and suggestion. So we are getting there.  

 

What I am saying is that the RST driver checks for file extension, check
for the presence of a companion header text file and the content of the
header text file, so I think that if a file is a real RST it will be
detected fast and safely and stop the driver-detection-loop. If we keep
RST in the back of the list, another binary combination could lead to
misinterpretation in another driver.

 

So William, do you still have the same file that produced the error? Can
you do the test? Thank you very much.

 

Best regards,

 

Ivan Lucena

 

 

________________________________

From: William Kyngesburye [mailto:woklist@kyngchaos.com] 
Sent: Wednesday, January 03, 2007 11:20 AM
To: Ivan Lucena
Cc: Frank Warmerdam; gdal-dev
Subject: Re: [Gdal-dev] GDAL 1.4.0 RC1 Available

 

On Jan 3, 2007, at 8:24 AM, Ivan Lucena wrote:





William,

 

I suggest placing GDALRegister_IDRISI first in the GDALAllRegister() and

I think that will be safe because this format is file-extension

dependent, and checks for it:

 

Makes sense, but won't work in my situation.  To make my Xcode project
more configurable for formats that require optional external libraries
(on OS X), I do these formats as plugins.  I know Frank has told me that
this is an unsupported use of plugins, and partly for this very reason -
format loading order.

 

For a quick immediate fix for the bug, this sounds like a reasonable
workaround.  I can adjust my Xcode project somehow.  For a 'normal'
configure-make-install build on OSX it wouldn't be a problem.

 

Frank, when I was thinking about this, and my excessive use of plugins,
I wondered if GDALAllRegister() could be changed a bit: do some of the
plugin checking and loading there directly instead of at the start in
AutoLoadDrivers().  Then, whether it's a plugin or builtin, formats
could still be loaded in a particular order.  Something like:

 

#ifdef FRMT_netcdf

    GDALRegister_GMT();

    GDALRegister_netCDF();

#else

    // check for existence of plugin version of it

    // load it if found

#endif

 

Just a thought.

 

-----

William Kyngesburye <kyngchaos@kyngchaos.com>

http://www.kyngchaos.com/

 

[Trillian]  What are you supposed to do WITH a maniacally depressed
robot?

 

[Marvin]  You think you have problems?  What are you supposed to do if
you ARE a maniacally depressed robot?  No, don't try and answer, I'm
50,000 times more intelligent than you and even I don't know the
answer...

 

- HitchHiker's Guide to the Galaxy





 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/36bcd6b7/attachment.html
From brent_m_edwards at yahoo.com  Wed Jan  3 15:15:49 2007
From: brent_m_edwards at yahoo.com (Brent Edwards)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL
Message-ID: <20070103201550.2077.qmail@web32505.mail.mud.yahoo.com>

Why won't this work?:
  
  ogr2ogr -f KML kmltest.kml "PG:dbname=postg
  is username=postgres password=pword" -sql "SELECT * FROM district;"
  
  ERROR 1: PQconnectdb failed.
  invalid connection option "username"
  
  FAILURE:
  Unable to open datasource `PG:dbname=postgis username=postgres password=pword' w
  ith the following drivers.
    -> ESRI Shapefile
    -> MapInfo File
    -> UK .NTF
    -> SDTS
    -> TIGER
    -> S57
    -> DGN
    -> VRT
    -> AVCBin
    -> REC
    -> Memory
    -> CSV
    -> GML
    -> KML
    -> Interlis 1
    -> Interlis 2
    -> SQLite
    -> ODBC
    -> PGeo
    -> OGDI
    -> PostgreSQL
    -> MySQL
  
  
 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/504ee63b/attachment.html
From richard.matsunaga at waypointinfo.com  Wed Jan  3 16:13:12 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL
In-Reply-To: <20070103201550.2077.qmail@web32505.mail.mud.yahoo.com>
Message-ID: <009501c72f7b$fb015580$c0012b0a@Richard>

Try 'user=postgres' instead. You may need a 'host=' in there as well.
 
Richard

  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brent Edwards
Sent: January 3, 2007 3:16 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL


Why won't this work?:

ogr2ogr -f KML kmltest.kml "PG:dbname=postg
is username=postgres password=pword" -sql "SELECT * FROM district;"

ERROR 1: PQconnectdb failed.
invalid connection option "username"

FAILURE:
Unable to open datasource `PG:dbname=postgis username=postgres
password=pword' w
ith the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> KML
  -> Interlis 1
  -> Interlis 2
  -> SQLite
  -> ODBC
  -> PGeo
  -> OGDI
  -> PostgreSQL
  -> MySQL



__________________________________________________
Do You Yahoo!?
Tired of spam? Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070103/f9c606ac/attachment.html
From brent_m_edwards at yahoo.com  Thu Jan  4 09:18:54 2007
From: brent_m_edwards at yahoo.com (Brent Edwards)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL
In-Reply-To: <009501c72f7b$fb015580$c0012b0a@Richard>
Message-ID: <547791.50395.qm@web32505.mail.mud.yahoo.com>

Cheers Richard! Your two suggestions fixed the problem. Here is the resultant working command:
  
  ogr2ogr -f KML kmltest.kml "PG:dbname=postgis user=postgres password=pword host=localhost" -sql "SELECT * FROM district;"
  
  Brent Edwards
  Montreal, QC
  
  

Richard Matsunaga <richard.matsunaga@waypointinfo.com> wrote:          Try 'user=postgres' instead. You may need a 'host=' in   there as well.
   
  Richard

    
---------------------------------
  From: gdal-dev-bounces@lists.maptools.org   [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brent   Edwards
Sent: January 3, 2007 3:16 PM
To:   gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Newbie queston   concerning ogr2ogr for PostgreSQL


  
Why won't this work?:

ogr2ogr -f KML kmltest.kml   "PG:dbname=postg
is username=postgres password=pword" -sql "SELECT * FROM   district;"

ERROR 1: PQconnectdb failed.
invalid connection option   "username"

FAILURE:
Unable to open datasource `PG:dbname=postgis   username=postgres password=pword' w
ith the following drivers.
    -> ESRI Shapefile
  -> MapInfo File
  -> UK   .NTF
  -> SDTS
  -> TIGER
  -> S57
    -> DGN
  -> VRT
  -> AVCBin
  ->   REC
  -> Memory
  -> CSV
  -> GML
    -> KML
  -> Interlis 1
  -> Interlis 2
  ->   SQLite
  -> ODBC
  -> PGeo
  -> OGDI
    -> PostgreSQL
  -> MySQL

  __________________________________________________
Do You Yahoo!?
Tired   of spam? Yahoo! Mail has the best spam protection around   
http://mail.yahoo.com 


 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070104/099c932c/attachment.html
From mateusz at loskot.net  Thu Jan  4 09:41:01 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL
In-Reply-To: <20070103201550.2077.qmail@web32505.mail.mud.yahoo.com>
References: <20070103201550.2077.qmail@web32505.mail.mud.yahoo.com>
Message-ID: <459D11FD.2060206@loskot.net>

Brent Edwards wrote:
> Why won't this work?:
> 
> ogr2ogr -f KML kmltest.kml "PG:dbname=postg is username=postgres
> password=pword" -sql "SELECT * FROM district;"

PostgreSQL driver in OGR recognizes the same connection string format as
used by PostgreSQL API. Here is list of supported keys with explanation
of possible values:

http://www.postgresql.org/docs/8.1/interactive/libpq.html#LIBPQ-CONNECT

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Jan  4 11:13:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Newbie queston concerning ogr2ogr for PostgreSQL
In-Reply-To: <459D11FD.2060206@loskot.net>
References: <20070103201550.2077.qmail@web32505.mail.mud.yahoo.com>
	<459D11FD.2060206@loskot.net>
Message-ID: <459D27AD.3060804@pobox.com>

Mateusz Loskot wrote:
> Brent Edwards wrote:
>> Why won't this work?:
>>
>> ogr2ogr -f KML kmltest.kml "PG:dbname=postg is username=postgres
>> password=pword" -sql "SELECT * FROM district;"
> 
> PostgreSQL driver in OGR recognizes the same connection string format as
> used by PostgreSQL API. Here is list of supported keys with explanation
> of possible values:
> 
> http://www.postgresql.org/docs/8.1/interactive/libpq.html#LIBPQ-CONNECT

I would add that some versions of OGR do not support the default geometry
verison of some PostGIS versions.  So:

  ogr2ogr -f KML kmltest.kml "PG:..." district

might work better than an explicit SQL statement.  This issue should be
resolved with GDAL/OGR 1.4.0 (at RC1 current).

Also, you don't need to include a semi-colon in your SQL statement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From izzybitsie at gmail.com  Thu Jan  4 11:21:36 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdal1.4.0beta2.tar.gz contains gdal1.4.0beta1 code???
In-Reply-To: <45957B7B.3070400@pobox.com>
References: <23e208430612291030md89b572p7e5e54a888917576@mail.gmail.com>
	<45957B7B.3070400@pobox.com>
Message-ID: <23e208430701040821m673eb5d2tf2cdda1f9e0df51@mail.gmail.com>

Frank,

I have tried to get an answer as to whether or not the bug 1384 reported for
gdal1.4.0beta1 and supposedly fixed with 1.4.0beta2 was actually included in
such version or it will be included in the next release with no response so
far. This bug causes geotiff images with color table including only 256
colors to be converted to full black images when composed using
gdal_merge.py and gdalinfo shows color black for all entries in the color
table for this type of images even for FWTools 1.1.2 that was supposed to
include gdal1.4.0beta2.

If I set the color table of the composed image to the proper entries then, I
get an image with the right colors. i.e. I hard code the color entries on my
own script using gdal.

Will this bug be fixed in gdal 1.4.0 release?

Tx



On 12/29/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Dori wrote:
> > Hi,
> >
> >
> > I have already tried to use gdal by downloading FWTools updated with
> > beta2 and a problem I experienced with previous gdal version is still
> > there(pls. see below description of original problem).  So, I decided to
> > try on a different computer with gdal package.
> > I downloaded gdal1.4.0beta2.tar.gz package from gdal.org
> > <http://gdal.org> yesterday.  I compile the source code and install gdal
> > on a Ubuntu Linux PC.  All seemed to be OK.  However, when I tried to
> > find out if the proper version was installed by running: "gdalinfo
> > --version" , I got version 1.4.0beta1 version installed.
> > I didn't install beta1 before in this PC.  Does anyone have an idea if
> > this is just a bug and the version is beta2 although the --version says
> > is beta1?
>
> Dori,
>
> I accidentally neglected to update the internal version info in Beta2, so
> it still reports beta1.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070104/a2137a41/attachment.html
From warmerdam at pobox.com  Thu Jan  4 11:35:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdal1.4.0beta2.tar.gz contains gdal1.4.0beta1 code???
In-Reply-To: <23e208430701040821m673eb5d2tf2cdda1f9e0df51@mail.gmail.com>
References: <23e208430612291030md89b572p7e5e54a888917576@mail.gmail.com>
	<45957B7B.3070400@pobox.com>
	<23e208430701040821m673eb5d2tf2cdda1f9e0df51@mail.gmail.com>
Message-ID: <459D2CCA.1070403@pobox.com>

Dori wrote:
> Frank,
> 
> I have tried to get an answer as to whether or not the bug 1384 reported 
> for gdal1.4.0beta1 and supposedly fixed with 1.4.0beta2 was actually 
> included in such version or it will be included in the next release with 
> no response so far. This bug causes geotiff images with color table 
> including only 256 colors to be converted to full black images when 
> composed using gdal_merge.py and gdalinfo shows color black for all 
> entries in the color table for this type of images even for FWTools 
> 1.1.2 that was supposed to include gdal1.4.0beta2. 
> 
> If I set the color table of the composed image to the proper entries 
> then, I get an image with the right colors. i.e. I hard code the color 
> entries on my own script using gdal.
> 
> Will this bug be fixed in gdal 1.4.0 release? 

Dori,

I have seen your messages on this issue, and I do hope to have time to
look into it.  But (without understanding the nature of the bug) I don't
think it is release critical so it is not my intention to hold back the
final release for this bug.

This problem is one of those where I am intimidated by the amount of
previous correspondence I feel I ought to review before digging into it.
And so it slips by the wayside...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Thu Jan  4 12:00:52 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL 1.4.0 RC1 Available
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D45502542F9A@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D45502542F9A@Iris.ad.clarku.edu>
Message-ID: <C31FEE4E-0089-4CF3-B129-9B5BF20034BE@kyngchaos.com>

I got a chance to work on this again.  I built netcdf into GDAL  
instead of as a plugin, and now the reordering works.  Idrisi format  
tests now succeed.  This should be a usable workaround until Frank  
has a chance to do something with the netcdf empty file problem.

On Jan 3, 2007, at 8:24 AM, Ivan Lucena wrote:

> I suggest placing GDALRegister_IDRISI first in the GDALAllRegister 
> () and
> I think that will be safe because this format is file-extension
> dependent, and checks for it:
>
> GDALDataset *IdrisiDataset::Open(GDALOpenInfo *poOpenInfo)
> {
>   if ((poOpenInfo->fp == NULL) ||
>     (EQUAL(CPLGetExtension(poOpenInfo->pszFilename), ".RST") ==  
> FALSE))
>     return NULL;
> ...
>
> So, William, can you make that change in GDALAllRegister() and do some
> test to check this theory?
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From warmerdam at pobox.com  Thu Jan  4 12:17:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdalwarp -rc -tr 250 250 ortho_*.tif overview.tif error
In-Reply-To: <fa2ac0580701030901t29f09a0di3e5d92d5edc1070d@mail.gmail.com>
References: <fa2ac0580701030901t29f09a0di3e5d92d5edc1070d@mail.gmail.com>
Message-ID: <459D36B2.4080602@pobox.com>

John Mitchell wrote:
> Hi,
> 
> I run the following command:
> 
> gdalwarp -rc -tr 250 250 ortho.tif overview.tif
> 
> and I get the following error:
> 
> Error 1:Attempt to create 0X0X3 TIFF, but width, height and bands must be positive.
> 
> 
> What do I need to add to my gdalwarp command?

John,

It would be helpful to give a gdalinfo report on the input file.  You
also might want to try it without the -tr switch.  I suspect the
input file is in geographic coordinates and so you are requesting
an output with 250 degree x 250 degree pixels which results in a 0x0
file producing the error message.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jan  4 13:27:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
Message-ID: <459D4704.8030506@pobox.com>

Motion:

That the GDAL 1.4.0RC1 release candidate be promoted to being the official
GDAL 1.4.0 release.

---

GDAL PSC members (myself, Howard, Andrey and Daniel) should vote on the above
motion.  All gdal-dev committers and users are welcome to comment on the motion
if they have input.

I haven't seen any serious problems with the GDAL 1.4.0 RC1 release, so I'm
floating the idea of promoting it to be 1.4.0 final.  There have been some
issues discovered:

  o The netcdf driver Open() method can fail with an assert in some cases
    (such as trying to open a zero length .rst file).  This isn't fixed in
    CVS but could be before an RC2.

  o Dori's bug is still apparently not fixed though I haven't investigated
    nor can I promise it would be.

  o Ari has committed a change with the description " gdal.pm, gdalconst.pm,
    ogr.pm, osr.pm: gdal.pm etc. have been replaced with lib/Geo/GDAL.pm etc."

  o Tamas has made some changes in the csharp bindings, apparently related to
    building on unix / linux.

  o There is a tentative fix for MITAB/mapinfo prime meridian support that could
    be applied for an RC2 if there was one (not currently in CVS).

There are of course many other outstanding bugs, but there is not reason
to believe a new RC will resolve them.   I

Contrary to our standing rules for 2 business days notice, I would like to
close this motion on Saturday and issue the final release on the weekend
if there is adequate support and no objections.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Thu Jan  4 13:29:51 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdalwarp -rc -tr 250 250 ortho_*.tif overview.tif error
In-Reply-To: <459D36B2.4080602@pobox.com>
References: <fa2ac0580701030901t29f09a0di3e5d92d5edc1070d@mail.gmail.com>
	<459D36B2.4080602@pobox.com>
Message-ID: <fa2ac0580701041029x3f8df4e0ic325e55c7c9e664e@mail.gmail.com>

Frank,

If I can't use the *-tr* *xres yres then how do I set the resolution to be
250 meters?*
Below is the results from gdalinfo:
Driver: GTiff/GeoTIFF
Size is 18308, 16757
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-90.086129408167338,29.957590557694168)
Pixel Size = (0.000001458940448,-0.000001458940448)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -90.0861294,  29.9575906) ( 90d 5'10.07"W, 29d57'27.33"N)
Lower Left  ( -90.0861294,  29.9331431) ( 90d 5'10.07"W, 29d55'59.32"N)
Upper Right ( -90.0594191,  29.9575906) ( 90d 3'33.91"W, 29d57'27.33"N)
Lower Right ( -90.0594191,  29.9331431) ( 90d 3'33.91"W, 29d55'59.32"N)
Center      ( -90.0727743,  29.9453668) ( 90d 4'21.99"W, 29d56'43.32"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 9154x8379, 4577x4190, 2289x2095, 1145x1048, 573x524, 287x262,
144x131
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 9154x8379, 4577x4190, 2289x2095, 1145x1048, 573x524, 287x262,
144x131
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 9154x8379, 4577x4190, 2289x2095, 1145x1048, 573x524, 287x262,
144x131

On 1/4/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> John Mitchell wrote:
> > Hi,
> >
> > I run the following command:
> >
> > gdalwarp -rc -tr 250 250 ortho.tif overview.tif
> >
> > and I get the following error:
> >
> > Error 1:Attempt to create 0X0X3 TIFF, but width, height and bands must
> be positive.
> >
> >
> > What do I need to add to my gdalwarp command?
>
> John,
>
> It would be helpful to give a gdalinfo report on the input file.  You
> also might want to try it without the -tr switch.  I suspect the
> input file is in geographic coordinates and so you are requesting
> an output with 250 degree x 250 degree pixels which results in a 0x0
> file producing the error message.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070104/d50d10f9/attachment.html
From warmerdam at pobox.com  Thu Jan  4 14:01:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdalwarp -rc -tr 250 250 ortho_*.tif overview.tif error
In-Reply-To: <fa2ac0580701041029x3f8df4e0ic325e55c7c9e664e@mail.gmail.com>
References: <fa2ac0580701030901t29f09a0di3e5d92d5edc1070d@mail.gmail.com>
	<459D36B2.4080602@pobox.com>
	<fa2ac0580701041029x3f8df4e0ic325e55c7c9e664e@mail.gmail.com>
Message-ID: <459D4EF5.3050301@pobox.com>

John Mitchell wrote:
> Frank,
> 
> If I can't use the *-tr* /xres yres then how do I set the resolution to 
> be 250 meters?/
> Below is the results from gdalinfo:
> Driver: GTiff/GeoTIFF
> Size is 18308, 16757
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.2572235630016,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-90.086129408167338,29.957590557694168)
> Pixel Size = (0.000001458940448 ,-0.000001458940448)

John,

OK, so my guess was right.  The problem is that -tr needs to be
expressed in the output coordinate system which is currently geographic
decimal degrees.  If you want to stick with that then you will need
to work out an approximate decimal degree size that corresponds with
a 250 m pixel size.

According to my computations 250m x 250m is roughly 0.00225 degrees by
0.00225 degrees.  So try "-tr 0.00225 0.00225" instead.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Thu Jan  4 14:06:24 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <459D4704.8030506@pobox.com>
References: <459D4704.8030506@pobox.com>
Message-ID: <6.2.3.4.2.20070104130431.032d9ce0@hobu.mail.iastate.edu>

+1 Assuming we are happy with buildbot results, 
etc.  <http://buildbot.osgeo.org:8500/>



At 12:27 PM 1/4/2007, Frank Warmerdam wrote:
>Motion:
>
>That the GDAL 1.4.0RC1 release candidate be promoted to being the official
>GDAL 1.4.0 release.
>
>---
>
>GDAL PSC members (myself, Howard, Andrey and Daniel) should vote on the above
>motion.  All gdal-dev committers and users are welcome to comment on 
>the motion
>if they have input.
>
>I haven't seen any serious problems with the GDAL 1.4.0 RC1 release, so I'm
>floating the idea of promoting it to be 1.4.0 final.  There have been some
>issues discovered:
>
>  o The netcdf driver Open() method can fail with an assert in some cases
>    (such as trying to open a zero length .rst file).  This isn't fixed in
>    CVS but could be before an RC2.
>
>  o Dori's bug is still apparently not fixed though I haven't investigated
>    nor can I promise it would be.
>
>  o Ari has committed a change with the description " gdal.pm, gdalconst.pm,
>    ogr.pm, osr.pm: gdal.pm etc. have been replaced with lib/Geo/GDAL.pm etc."
>
>  o Tamas has made some changes in the csharp bindings, apparently related to
>    building on unix / linux.
>
>  o There is a tentative fix for MITAB/mapinfo prime meridian 
> support that could
>    be applied for an RC2 if there was one (not currently in CVS).
>
>There are of course many other outstanding bugs, but there is not reason
>to believe a new RC will resolve them.   I
>
>Contrary to our standing rules for 2 business days notice, I would like to
>close this motion on Saturday and issue the final release on the weekend
>if there is adequate support and no objections.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Thu Jan  4 14:12:03 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <459D4704.8030506@pobox.com>
References: <459D4704.8030506@pobox.com>
Message-ID: <459D5183.5070208@tkk.fi>

Frank Warmerdam kirjoitti:
>
>  o Ari has committed a change with the description " gdal.pm, 
> gdalconst.pm,
>    ogr.pm, osr.pm: gdal.pm etc. have been replaced with 
> lib/Geo/GDAL.pm etc."

Just cosmetics.

I removed the old naming style modules that have been replaced with new 
ones (they were still hanging there for some reason) - the removal 
shouldn't have any effect. The other thing I did was edit MANIFEST (a 
required file in Perl modules in CPAN) a bit  - it had a reference to an 
old pod-file which made perl Makefile.PL issue a warning.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dmorissette at mapgears.com  Thu Jan  4 14:51:07 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <459D4704.8030506@pobox.com>
References: <459D4704.8030506@pobox.com>
Message-ID: <459D5AAB.30902@mapgears.com>

I'll vote +0 since I didn't manage to test RC1 much myself so I can't 
give a full +1, but based on your feedback I believe it's safe to go ahead.

Daniel

Frank Warmerdam wrote:
> Motion:
> 
> That the GDAL 1.4.0RC1 release candidate be promoted to being the official
> GDAL 1.4.0 release.
> 
> ---
> 
> GDAL PSC members (myself, Howard, Andrey and Daniel) should vote on the 
> above
> motion.  All gdal-dev committers and users are welcome to comment on the 
> motion
> if they have input.
> 
> I haven't seen any serious problems with the GDAL 1.4.0 RC1 release, so I'm
> floating the idea of promoting it to be 1.4.0 final.  There have been some
> issues discovered:
> 
>  o The netcdf driver Open() method can fail with an assert in some cases
>    (such as trying to open a zero length .rst file).  This isn't fixed in
>    CVS but could be before an RC2.
> 
>  o Dori's bug is still apparently not fixed though I haven't investigated
>    nor can I promise it would be.
> 
>  o Ari has committed a change with the description " gdal.pm, gdalconst.pm,
>    ogr.pm, osr.pm: gdal.pm etc. have been replaced with lib/Geo/GDAL.pm 
> etc."
> 
>  o Tamas has made some changes in the csharp bindings, apparently 
> related to
>    building on unix / linux.
> 
>  o There is a tentative fix for MITAB/mapinfo prime meridian support 
> that could
>    be applied for an RC2 if there was one (not currently in CVS).
> 
> There are of course many other outstanding bugs, but there is not reason
> to believe a new RC will resolve them.   I
> 
> Contrary to our standing rules for 2 business days notice, I would like to
> close this motion on Saturday and issue the final release on the weekend
> if there is adequate support and no objections.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From szekerest at gmail.com  Thu Jan  4 15:21:40 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <459D4704.8030506@pobox.com>
References: <459D4704.8030506@pobox.com>
Message-ID: <f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>

All of the changes I have made was reverted so GDAL 1.4.0 RC1 contains
the current c# version. The primary intention of the recent activity
was to track down some problems at the buildbot but the issues were
solved by environmental changes (Special thanks to Mateusz) .

Some kind of C# specific documentation should also be added, but it
does not affect the current release.

+1

Tamas

PS: I wonder currently why we have errors at the buildbot, a few hours
ago everything was green.




2007/1/4, Frank Warmerdam <warmerdam@pobox.com>:
> Motion:
>
> That the GDAL 1.4.0RC1 release candidate be promoted to being the official
> GDAL 1.4.0 release.
>
> ---
>
> GDAL PSC members (myself, Howard, Andrey and Daniel) should vote on the above
> motion.  All gdal-dev committers and users are welcome to comment on the motion
> if they have input.
>
> I haven't seen any serious problems with the GDAL 1.4.0 RC1 release, so I'm
> floating the idea of promoting it to be 1.4.0 final.  There have been some
> issues discovered:
>
>   o The netcdf driver Open() method can fail with an assert in some cases
>     (such as trying to open a zero length .rst file).  This isn't fixed in
>     CVS but could be before an RC2.
>
>   o Dori's bug is still apparently not fixed though I haven't investigated
>     nor can I promise it would be.
>
>   o Ari has committed a change with the description " gdal.pm, gdalconst.pm,
>     ogr.pm, osr.pm: gdal.pm etc. have been replaced with lib/Geo/GDAL.pm etc."
>
>   o Tamas has made some changes in the csharp bindings, apparently related to
>     building on unix / linux.
>
>   o There is a tentative fix for MITAB/mapinfo prime meridian support that could
>     be applied for an RC2 if there was one (not currently in CVS).
>
> There are of course many other outstanding bugs, but there is not reason
> to believe a new RC will resolve them.   I
>
> Contrary to our standing rules for 2 business days notice, I would like to
> close this motion on Saturday and issue the final release on the weekend
> if there is adequate support and no objections.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Thu Jan  4 15:37:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>
References: <459D4704.8030506@pobox.com>
	<f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>
Message-ID: <459D658D.5030304@loskot.net>

Tamas Szekeres wrote:
> PS: I wonder currently why we have errors at the buildbot, a few
> hours ago everything was green.

Nothing serious or GDAL related.
It's a problem on two build slaves machines with environment
configuration. It should be fixed soon. For now, please imagine those
red boxes are green :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Jan  4 15:46:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Mailing List Changes
In-Reply-To: <6.2.3.4.2.20070102125644.02ea90b8@hobu.mail.iastate.edu>
References: <45958127.1080004@pobox.com>
	<6.2.3.4.2.20070102125644.02ea90b8@hobu.mail.iastate.edu>
Message-ID: <459D679B.1030901@pobox.com>

Howard Butler wrote:
> 
> 
> At 02:57 PM 12/29/2006, Frank Warmerdam wrote:
>> Motion:
>>  1) To create a gdal-announce@lists.osgeo.org mailing list which is 
>> moderated
>>     and only used for infrequent GDAL/OGR related announcements such as
>>     releases, major bugs, and other major events.
> 
> +1.  Would we subscribe all current gdal-dev members to this maillist too?

Howard,

I'm not sure.  I think I will take the path of least complexity for now, and
*not* autosubscribe existing gdal-dev members.  In this case we will need to
have a policy to make announcements to gdal-dev and gdal-announce.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jan  4 15:48:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: Motion: Mailing List Changes
In-Reply-To: <45958127.1080004@pobox.com>
References: <45958127.1080004@pobox.com>
Message-ID: <459D6824.3050506@pobox.com>

Frank Warmerdam wrote:
> Motion:
>  1) To create a gdal-announce@lists.osgeo.org mailing list which is 
> moderated
>     and only used for infrequent GDAL/OGR related announcements such as
>     releases, major bugs, and other major events.
> 
>  2) To migrate the gdal-dev@lists.maptools.org mailing list to 
> lists.osgeo.org
>     in such a way to preserve existing members, and hopefully preserve
>     settings.
> 
>  3) To create a gdal-commits@lists.osgeo.org mailing list which will be 
> used
>     for SVN commit messages once the SVN transition is complete.
> 
>  4) To appoint Frank Warmerdam as lists administrator for the GDAL/OGR 
> mailing
>     lists.
> 

Folks,

I declare this motion passed with +1 support from myself, Daniel and Howard.
I have submitted the request for the gdal-announce mailing list.  The gdal-dev
list migration will likely be put off at least a week or two to ensure that
lists.osgeo.org has settled down.  I'll create the gdal-commits list once
the svn migration takes place - hopefully this coming week.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Jan  4 22:57:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] gdal1.4.0RC1 vs gdal1.4.0beta2
In-Reply-To: <23e208430701021453w7364a88cpbe2e1cb548f52597@mail.gmail.com>
References: <23e208430701021453w7364a88cpbe2e1cb548f52597@mail.gmail.com>
Message-ID: <459DCC8D.3040008@pobox.com>

Dori wrote:
> Hi,
> 
> does anybody know if the bug 1384 reported for beta1 and still not 
> working on beta2 is fixed on gdal1.4.0RC1?
> This bug was related to geotiff maps whose color tables only contained 
> 256 entries.  This caused generation of black maps whenever input maps 
> with this type of color table were composed using gdal_merge.py.

Dori,

I am very embarrassed to discover the fix for bug 1384 was just sitting
around in my local development tree.  It appears that for some reason I
neglected to commit it.

This means the fix was not in GDAL 1.4.0 RC1 which will likely become
GDAL 1.4.0.  I don't consider this fix release critical since it was
really a defective input file, and GDAL has never handled such files.

I will try and produce an FWTools 1.1.3 with the fix tonight.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Thu Jan  4 17:39:42 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>
References: <459D4704.8030506@pobox.com>
	<f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>
Message-ID: <f3b73b7d0701041439o1e1f5875xa23975875935bd55@mail.gmail.com>

2007/1/4, Tamas Szekeres <szekerest@gmail.com>:
> All of the changes I have made was reverted so GDAL 1.4.0 RC1 contains
> the current c# version.


I would revoke this statement because I have just fixed a problem in
the csharp/makefile.vc
causing that the manifest has not been embedded to
gdal_gdalconst_wrap.dll. Without this fix using the gdalconst assembly
module causes an application error (for the VS2005 builds). In
addition some of the sample apps will not run.

Is it crucial?


Tamas

From warmerdam at pobox.com  Thu Jan  4 23:15:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <f3b73b7d0701041439o1e1f5875xa23975875935bd55@mail.gmail.com>
References: <459D4704.8030506@pobox.com>
	<f3b73b7d0701041221xde2bee6g8b32b043dbcda432@mail.gmail.com>
	<f3b73b7d0701041439o1e1f5875xa23975875935bd55@mail.gmail.com>
Message-ID: <459DD0F7.6080702@pobox.com>

Tamas Szekeres wrote:
> 2007/1/4, Tamas Szekeres <szekerest@gmail.com>:
>> All of the changes I have made was reverted so GDAL 1.4.0 RC1 contains
>> the current c# version.
> 
> 
> I would revoke this statement because I have just fixed a problem in
> the csharp/makefile.vc
> causing that the manifest has not been embedded to
> gdal_gdalconst_wrap.dll. Without this fix using the gdalconst assembly
> module causes an application error (for the VS2005 builds). In
> addition some of the sample apps will not run.
> 
> Is it crucial?

Tamas,

To me this doesn't sound release critical as it affects a very small subset
of GDAL users, and it is not essentially a regression since the last release
since previously the csharp stuff was unuseful.   Others may have a different
opinion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From craig.miller at spatialminds.com  Fri Jan  5 02:17:17 2007
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp color corruption
Message-ID: <006a01c73099$883f2e40$3301a8c0@vaio>

I've been using gdalwarp to reproject USGS quads (single band geotif images
with color table) from UTM zone 10/11 to geographic (EPSG:4326).  If I use
nearest neighbor sampling (-rn) the color table gets translated correctly,
but if I use bilinear, cubic, or cubic spline resampling the color table is
corrupted.  For example, blue water turns brown.  As nearest neighbor
sampling doesn't always offer up the smoothest results I'm hoping to get
cubic spline resampling working.  Any suggestions on how to get this working
w/o corrupting my color table?

I'm using gdal out of CVS from a couple of weeks ago.

Gdalwarp -rcs -co "COMPRESS=LZW" -co "TILED=YES" -wo "INIT_DEST=NO_DATA"
-t_srs EPSG:4326 infile.tif ..\geo\outfile.tif

I'd be happy to provide sample images, but they are a bit large so I didn't
want to send them to the list.

Thanks for the help,
Craig




From dron at ak4719.spb.edu  Fri Jan  5 08:37:09 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Motion: Promote GDAL 1.4.0 RC1 to be GDAL 1.4.0 Final
In-Reply-To: <459D4704.8030506@pobox.com>
References: <459D4704.8030506@pobox.com>
Message-ID: <20070105133709.GA20602@ak4719.spb.edu>

On Thu, Jan 04, 2007 at 01:27:16PM -0500, Frank Warmerdam wrote:
> That the GDAL 1.4.0RC1 release candidate be promoted to being the official
> GDAL 1.4.0 release.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Fri Jan  5 11:00:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp color corruption
In-Reply-To: <006a01c73099$883f2e40$3301a8c0@vaio>
References: <006a01c73099$883f2e40$3301a8c0@vaio>
Message-ID: <459E761B.8090207@pobox.com>

Craig Miller wrote:
> I've been using gdalwarp to reproject USGS quads (single band geotif images
> with color table) from UTM zone 10/11 to geographic (EPSG:4326).  If I use
> nearest neighbor sampling (-rn) the color table gets translated correctly,
> but if I use bilinear, cubic, or cubic spline resampling the color table is
> corrupted.  For example, blue water turns brown.  As nearest neighbor
> sampling doesn't always offer up the smoothest results I'm hoping to get
> cubic spline resampling working.  Any suggestions on how to get this working
> w/o corrupting my color table?
> 
> I'm using gdal out of CVS from a couple of weeks ago.
> 
> Gdalwarp -rcs -co "COMPRESS=LZW" -co "TILED=YES" -wo "INIT_DEST=NO_DATA"
> -t_srs EPSG:4326 infile.tif ..\geo\outfile.tif
> 
> I'd be happy to provide sample images, but they are a bit large so I didn't
> want to send them to the list.

Craig,

The actual resampling algorithms don't (and can't really be expected) to
operate in colormap color space.  Instead they just operate on the raw
pixel values.  If you want to use a "non-ramp" color table with resampling
types other than nearest neighbour you will really need to first convert
your image to 24bit RGB.

eg.

pct2rgb.py infile.tif infile_rgb.tif

Then operate on that with other resampling techniques.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Fri Jan  5 11:28:27 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp color corruption
In-Reply-To: <459E761B.8090207@pobox.com>
References: <006a01c73099$883f2e40$3301a8c0@vaio> <459E761B.8090207@pobox.com>
Message-ID: <fa2ac0580701050828l4220d83eg773ce999dc3b5736@mail.gmail.com>

Does cubic spline resampling give the best quality?  I know that it is the
slowest.

Thanks,

John Mitchell

On 1/5/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Craig Miller wrote:
> > I've been using gdalwarp to reproject USGS quads (single band geotif
> images
> > with color table) from UTM zone 10/11 to geographic (EPSG:4326).  If I
> use
> > nearest neighbor sampling (-rn) the color table gets translated
> correctly,
> > but if I use bilinear, cubic, or cubic spline resampling the color table
> is
> > corrupted.  For example, blue water turns brown.  As nearest neighbor
> > sampling doesn't always offer up the smoothest results I'm hoping to get
> > cubic spline resampling working.  Any suggestions on how to get this
> working
> > w/o corrupting my color table?
> >
> > I'm using gdal out of CVS from a couple of weeks ago.
> >
> > Gdalwarp -rcs -co "COMPRESS=LZW" -co "TILED=YES" -wo "INIT_DEST=NO_DATA"
> > -t_srs EPSG:4326 infile.tif ..\geo\outfile.tif
> >
> > I'd be happy to provide sample images, but they are a bit large so I
> didn't
> > want to send them to the list.
>
> Craig,
>
> The actual resampling algorithms don't (and can't really be expected) to
> operate in colormap color space.  Instead they just operate on the raw
> pixel values.  If you want to use a "non-ramp" color table with resampling
> types other than nearest neighbour you will really need to first convert
> your image to 24bit RGB.
>
> eg.
>
> pct2rgb.py infile.tif infile_rgb.tif
>
> Then operate on that with other resampling techniques.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070105/c0d2add0/attachment.html
From warmerdam at pobox.com  Fri Jan  5 11:47:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp color corruption
In-Reply-To: <fa2ac0580701050828l4220d83eg773ce999dc3b5736@mail.gmail.com>
References: <006a01c73099$883f2e40$3301a8c0@vaio> <459E761B.8090207@pobox.com>
	<fa2ac0580701050828l4220d83eg773ce999dc3b5736@mail.gmail.com>
Message-ID: <459E8110.4020109@pobox.com>

John Mitchell wrote:
> Does cubic spline resampling give the best quality?  I know that it is 
> the slowest.

John,

Quality is in the eye of the beholder.  Generally speaking cubic convolution
will produce the most attractive results.  Note that there are two cubic
convolution kernels (-rc and -rcs).  The -rc is what I consider the
"traditional" implementation meaning it is what I used at PCI.  -rcs is
a variation Andrey Kiselev implemented, and which he considers better for at
least some purposes.  You should try both (and -rb) and see which you prefer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From perrygeo at gmail.com  Fri Jan  5 14:23:47 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] error in csharp bindings for ogr/gdal
Message-ID: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>

Hey folks,

 Checking out the latest cvs head, I'm having troubles getting the
csharp bindings working. I'm using the Mono 1.2.2.1_1 installer on
linux.

I ran the following steps OK:
make veryclean
make interface
make

But 'make test' fails with this error:

LC_ALL=C mono createdata.exe Data pointlayer

Unhandled Exception: System.TypeInitializationException: An exception
was thrown by the type initializer for OGR.ogr --->
System.TypeInitializationException: An exception was thrown by the
type initializer for OGR.ogrPINVOKE --->
System.TypeInitializationException: An exception was thrown by the
type initializer for SWIGExceptionHelper --->
System.DllNotFoundException: libogrcsharp.la
  at (wrapper managed-to-native)
SWIGExceptionHelper:SWIGRegisterExceptionCallbacks_ogr
(OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate)
  at OGR.ogrPINVOKE+SWIGExceptionHelper..cctor () [0x00000] --- End of
inner exception stack trace ---

  at <0x00000> <unknown method>
  at OGR.ogrPINVOKE..cctor () [0x00000] --- End of inner exception
stack trace ---

  at <0x00000> <unknown method>
  at OGR.ogr..cctor () [0x00000] --- End of inner exception stack trace ---

make: *** [test] Error 1

Indeed "libogrcsharp.la" does not exist nor do the other *.la files
refered to in the dll config files.

Any ideas?

-- 
Matthew T. Perry
http://www.perrygeo.net

From warmerdam at pobox.com  Fri Jan  5 15:18:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] error in csharp bindings for ogr/gdal
In-Reply-To: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
References: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
Message-ID: <459EB29D.2060201@pobox.com>

Matthew Perry wrote:
> Hey folks,
> 
> Checking out the latest cvs head, I'm having troubles getting the
> csharp bindings working. I'm using the Mono 1.2.2.1_1 installer on
> linux.
> 
> I ran the following steps OK:
> make veryclean
> make interface
> make
>...
> Indeed "libogrcsharp.la" does not exist nor do the other *.la files
> refered to in the dll config files.

Matthew,

I ran into the same problem.  It seems the csharp build stuff as setup
currently is incompatible with use of libtool.  I'd suggest configuring
--without-libtool.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Fri Jan  5 15:24:44 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] error in csharp bindings for ogr/gdal
In-Reply-To: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
References: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
Message-ID: <f3b73b7d0701051224u35dc6a3j8c7ca24632187e8a@mail.gmail.com>

Hi Matthew,

You should export the GDAL_ROOT and a valid path for libproj.so to
LD_LIBRARY_PATH
in order to run the test.

In this case the sample app. was not able to load libgdal.so.

Best Regards,

Tamas



2007/1/5, Matthew Perry <perrygeo@gmail.com>:
> Hey folks,
>
>  Checking out the latest cvs head, I'm having troubles getting the
> csharp bindings working. I'm using the Mono 1.2.2.1_1 installer on
> linux.
>
> I ran the following steps OK:
> make veryclean
> make interface
> make
>
> But 'make test' fails with this error:
>
> LC_ALL=C mono createdata.exe Data pointlayer
>
> Unhandled Exception: System.TypeInitializationException: An exception
> was thrown by the type initializer for OGR.ogr --->
> System.TypeInitializationException: An exception was thrown by the
> type initializer for OGR.ogrPINVOKE --->
> System.TypeInitializationException: An exception was thrown by the
> type initializer for SWIGExceptionHelper --->
> System.DllNotFoundException: libogrcsharp.la
>   at (wrapper managed-to-native)
> SWIGExceptionHelper:SWIGRegisterExceptionCallbacks_ogr
> (OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate,OGR.ogrPINVOKE/SWIGExceptionHelper/ExceptionDelegate)
>   at OGR.ogrPINVOKE+SWIGExceptionHelper..cctor () [0x00000] --- End of
> inner exception stack trace ---
>
>   at <0x00000> <unknown method>
>   at OGR.ogrPINVOKE..cctor () [0x00000] --- End of inner exception
> stack trace ---
>
>   at <0x00000> <unknown method>
>   at OGR.ogr..cctor () [0x00000] --- End of inner exception stack trace ---
>
> make: *** [test] Error 1
>
> Indeed "libogrcsharp.la" does not exist nor do the other *.la files
> refered to in the dll config files.
>
> Any ideas?
>
> --
> Matthew T. Perry
> http://www.perrygeo.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From szekerest at gmail.com  Fri Jan  5 15:34:49 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] error in csharp bindings for ogr/gdal
In-Reply-To: <459EB29D.2060201@pobox.com>
References: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
	<459EB29D.2060201@pobox.com>
Message-ID: <f3b73b7d0701051234v53d6e8a3xbbf05cc840143806@mail.gmail.com>

2007/1/5, Frank Warmerdam <warmerdam@pobox.com>:

>
> It seems the csharp build stuff as setup
> currently is incompatible with use of libtool.  I'd suggest configuring
> --without-libtool.
>

Exactly. As I can see, using the libtool build, the values of
LD_SHARED and SO_EXT would force to build the unmanaged part of the
wrapper to be statically linked that is definitely unsupported.

Best Regards,

From mateusz at loskot.net  Fri Jan  5 16:09:24 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] error in csharp bindings for ogr/gdal
In-Reply-To: <f3b73b7d0701051224u35dc6a3j8c7ca24632187e8a@mail.gmail.com>
References: <5383fa5e0701051123l50eee2afwed35c37fdd5a9b23@mail.gmail.com>
	<f3b73b7d0701051224u35dc6a3j8c7ca24632187e8a@mail.gmail.com>
Message-ID: <459EBE84.9080205@loskot.net>

Tamas Szekeres wrote:
> Hi Matthew,
> 
> You should export the GDAL_ROOT and a valid path for libproj.so to
> LD_LIBRARY_PATH
> in order to run the test.
> 
> In this case the sample app. was not able to load libgdal.so.

Tamas,

I'd suggest to replace 'make test' with GNU automake unified target
called 'check' and next build the test application in libtool-aware mode.

Here is an example how Unit Test program is compiled for GEOS:

http://svn.refractions.net/geos/trunk/tests/unit/Makefile.am

This way, libtool takes care about setting paths to dependencies
properly while running tests. So, no manual hacking is needed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Jan  5 18:52:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
Message-ID: <459EE4CE.3080705@pobox.com>

Folks,

I have prepared a draft RFC 9 intended to cover how maintainers hired with
GDAL sponsorship money will be administered.

   http://www.gdal.org/rfc9_maintainer.html

I'd appreciate feedback before I formally propose it.

Note that actual hiring/contacting of a maintain would be covered by a
motion to the PSC which would specify financial details, term, and any
special issues.  But this RFC is intended to serve as a framework.  My
hope is collect enough sponsorship for continuously staff the maintainer
role.

I would add that we have four committed sponsors, and once the money has
arrived I plan to propose contracting Mateusz Loskot to work for 100
hours/month for six months as GDAL maintainer for $9000 USD.  No need to
comment on these specific arrangements yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Jan  6 13:10:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
Message-ID: <459FE60D.1070001@pobox.com>

The GDAL development team is pleased to announce the release of
GDAL/OGR 1.4.0.  This new release includes many new features and
bug fixes since the 1.3.2 release nine months ago.  These are
described at:

   http://www.gdal.org/NEWS.html

The new release source may be downloaded from:

   http://www.gdal.org/dl/gdal-1.4.0.tar.gz
   http://www.gdal.org/dl/gdal140.zip

Binaries corresponding to the GDAL/OGR 1.4.0 release can be found
included in the FWTools 1.1.3 release for Windows and Linux at:

   http://www.gdal.org/dl/fwtools/FWTools113.exe (windows)
   http://www.gdal.org/dl/fwtools/FWTools-linux-1.1.3.tar.gz (linux)

The GDAL project has also introduced the new gdal-announce list, hosted
by OSGeo.  Those interested in just occasional notices of GDAL/OGR project
progress are encouraged to join this mailing list.

   http://lists.osgeo.org/mailman/listinfo/gdal-announce

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From mateusz at loskot.net  Sat Jan  6 13:34:38 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Red box for OSX builder
Message-ID: <459FEBBE.1090200@loskot.net>

Hi,

Please, ignore the red box for ppc_osx_quick and ppc_osx_full builders.
The problem is that the these builders use GDAL library (libgdal.dylib)
from somewhere outside of their GDAL source trees.
Probably, test uses system-wide version of GDAL installed on this builder.

So, please assume the Buildbot passes all buildes and all
boxes are green ;-)

Hobu, could you check this problem on your builders (sorry for
delegating). I removed the libgdal.dylib built by quick builder on your
osx and ogr/ogrinfo still runs without any problem.
I suppose, the problem is with LD_LIBRARY_GDAL because it points to some
old location:

echo $LD_LIBRARY_PATH
/local/buildbot/gdal.slav2/full-linux/build/.libs

but it should point to:

/Data/buildbot/osgeo/slaves/gdal/hobu-osx-quick/build

or I might be wrong, because I can't find ldd command on the OSX -
sorry, I'm OSX newbie :-)
Thanks in advance!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From hobu at iastate.edu  Sat Jan  6 14:36:28 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Red box for OSX builder
In-Reply-To: <459FEBBE.1090200@loskot.net>
References: <459FEBBE.1090200@loskot.net>
Message-ID: <D532433A-BDB4-4A46-9852-6C64DCB5D95D@iastate.edu>

The magic variable is DYLD_LIBRARY_PATH on osx.  I have updated the  
test running scripts and added a default one to the .bash_profile of  
the buildbot user

Also, the osx equivalent of ldd is otool

All green now.

Howard

On Jan 6, 2007, at 12:34 PM, Mateusz Loskot wrote:

> Hi,
>
> Please, ignore the red box for ppc_osx_quick and ppc_osx_full  
> builders.
> The problem is that the these builders use GDAL library  
> (libgdal.dylib)
> from somewhere outside of their GDAL source trees.
> Probably, test uses system-wide version of GDAL installed on this  
> builder.
>
> So, please assume the Buildbot passes all buildes and all
> boxes are green ;-)
>
> Hobu, could you check this problem on your builders (sorry for
> delegating). I removed the libgdal.dylib built by quick builder on  
> your
> osx and ogr/ogrinfo still runs without any problem.
> I suppose, the problem is with LD_LIBRARY_GDAL because it points to  
> some
> old location:
>
> echo $LD_LIBRARY_PATH
> /local/buildbot/gdal.slav2/full-linux/build/.libs
>
> but it should point to:
>
> /Data/buildbot/osgeo/slaves/gdal/hobu-osx-quick/build
>
> or I might be wrong, because I can't find ldd command on the OSX -
> sorry, I'm OSX newbie :-)
> Thanks in advance!
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Sat Jan  6 14:43:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Red box for OSX builder
In-Reply-To: <D532433A-BDB4-4A46-9852-6C64DCB5D95D@iastate.edu>
References: <459FEBBE.1090200@loskot.net>
	<D532433A-BDB4-4A46-9852-6C64DCB5D95D@iastate.edu>
Message-ID: <459FFBE9.1000809@loskot.net>

Howard Butler wrote:
> The magic variable is DYLD_LIBRARY_PATH on osx.  I have updated the test
> running scripts and added a default one to the .bash_profile of the
> buildbot user
> 
> Also, the osx equivalent of ldd is otool

Hobu, thank you very much for the fix and for OSX lessons!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Jan  6 15:13:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <459EE4CE.3080705@pobox.com>
References: <459EE4CE.3080705@pobox.com>
Message-ID: <45A002E3.7090800@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a draft RFC 9 intended to cover how maintainers hired
>  with GDAL sponsorship money will be administered.
> 
> http://www.gdal.org/rfc9_maintainer.html
> 
> I'd appreciate feedback before I formally propose it.

The list of responsibilities is clear to me.
Also, the concept of prioritizing tasks by the supervisor or
PSC body is well defined and clear.

One note to the following statement:

"Substantial new development projects will only be taken on by the
maintainer with the direction of a PSC motion (or possibly an RFC
designating the maintainer to work on a change)."

I understand, it regulates potential tasks the maintainer
can take from external entities. Is my understanding correct?

Asumming it is, so, the maintainer is obliged to inform the
PSC/supervisor about new project and he should ask for permission, to
avoid time conflicts, etc.
Is this correct?

A question about reporting, I'd suggest to include a note to the
guidelines that the maintainer is obliged to spend substantial amount of
hours on tasks weekly, to avoid empty reports :-)

I mean, if the maintainer is contracted to spend 100 hours/month,
then, technically, it's possible to work out this amount of hours
in 2 weeks, so next 2 weeks will bring empty reports.
If such situations should be avoided, then the guidelines
should include a note about that to give general regulations of monthly
timetable.

Also, I think weekly reports are fine.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Jan  6 15:31:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <45A002E3.7090800@loskot.net>
References: <459EE4CE.3080705@pobox.com> <45A002E3.7090800@loskot.net>
Message-ID: <45A0072A.1070103@pobox.com>

Mateusz Loskot wrote:
> One note to the following statement:
> 
> "Substantial new development projects will only be taken on by the
> maintainer with the direction of a PSC motion (or possibly an RFC
> designating the maintainer to work on a change)."
> 
> I understand, it regulates potential tasks the maintainer
> can take from external entities. Is my understanding correct?

Mateusz,

Sorry, it was not my intention that this have anything to do with
work the maintainer would do outside the maintenance contract.
Instead it is an effort to avoid having the maintainer end up
spending most of their time on new development without the
agreement of the PSC.  That is, I hope the "maintainer" role to be
primarily focused on stuff that isn't brand new development, and
this clause is in support of that notion.

I don't wish to interfere in any way with what the maintainer does
"on their own time".  That is, outside the bounds of the contracted
maintainer time.

> A question about reporting, I'd suggest to include a note to the
> guidelines that the maintainer is obliged to spend substantial amount of
> hours on tasks weekly, to avoid empty reports :-)
> 
> I mean, if the maintainer is contracted to spend 100 hours/month,
> then, technically, it's possible to work out this amount of hours
> in 2 weeks, so next 2 weeks will bring empty reports.
> If such situations should be avoided, then the guidelines
> should include a note about that to give general regulations of monthly
> timetable.

Good point.  Well, in particular i'd like to see the maintainer being
the first level of review for new bug reports so they are being treated
more quickly and consistently than is now the case.  And for this (and
mailing list support) to work well it implies the maintainer is at least
monitoring and responding to new items on an ongoing basis.

I'll try to write in something to cover the above without being draconian.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sat Jan  6 15:34:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <45A0072A.1070103@pobox.com>
References: <459EE4CE.3080705@pobox.com> <45A002E3.7090800@loskot.net>
	<45A0072A.1070103@pobox.com>
Message-ID: <45A007EE.5070603@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> One note to the following statement:
>>
>> "Substantial new development projects will only be taken on by the
>> maintainer with the direction of a PSC motion (or possibly an RFC
>> designating the maintainer to work on a change)."
>>
>> I understand, it regulates potential tasks the maintainer
>> can take from external entities. Is my understanding correct?
> 
> Mateusz,
> 
> Sorry, it was not my intention that this have anything to do with
> work the maintainer would do outside the maintenance contract.

Frank,

Apparently, I misunderstood the "new development projects" statement.

> Instead it is an effort to avoid having the maintainer end up
> spending most of their time on new development without the
> agreement of the PSC.  That is, I hope the "maintainer" role to be
> primarily focused on stuff that isn't brand new development, and
> this clause is in support of that notion.

Yes, this is clear now.

> I don't wish to interfere in any way with what the maintainer does
> "on their own time".  That is, outside the bounds of the contracted
> maintainer time.

Understood.

>> A question about reporting, I'd suggest to include a note to the
>> guidelines that the maintainer is obliged to spend substantial amount of
>> hours on tasks weekly, to avoid empty reports :-)
>>
>> I mean, if the maintainer is contracted to spend 100 hours/month,
>> then, technically, it's possible to work out this amount of hours
>> in 2 weeks, so next 2 weeks will bring empty reports.
>> If such situations should be avoided, then the guidelines
>> should include a note about that to give general regulations of monthly
>> timetable.
> 
> Good point.  Well, in particular i'd like to see the maintainer being
> the first level of review for new bug reports so they are being treated
> more quickly and consistently than is now the case.  And for this (and
> mailing list support) to work well it implies the maintainer is at least
> monitoring and responding to new items on an ongoing basis.

Right, for every projects it's better to maintain continuously,
ie. 3 hours for 30 days, than ad-hoc like 9 hours for 10 days and
leave the remaining 20 days not covered.

> I'll try to write in something to cover the above without being draconian.

:-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From oiok at brinkster.net  Sun Jan  7 07:38:23 2007
From: oiok at brinkster.net (Grzegorz Wiktorowski)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] DXF to raster conversion
Message-ID: <000701c73258$ba713280$0201a8c0@oiokratr6dmly7>

I received DXF file and I need to convert to TIFF format. From description
of gdal_rasterize it seems to me it does not read DXF file. I didn't find
any tool to convert from DXF to OGR vector formats also. Any hint will be
appreciated.

-- 
Grzegorz Wiktorowski

From tutey at o2.pl  Sun Jan  7 10:52:22 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Oblique_ vs Double_Stereographic
Message-ID: <45A11736.8050401@o2.pl>

Frank

GIS data created in ESRI software, projected in EPSG 3120,2172-2174,
have their PROJECTION specified as Double_Stereographic (eg. [1]).
However, GDAL and dependent software use
PROJECTION["Oblique_Stereographic"] for these systems. This leads to
mismatches during data exchange, eg. v.in.ogr claims the shapefile
projected in 2174, created with ESRI software, does not match a GRASS
location set up using the same code - due to unknown projection name
Double_Stereographic [2].

I don't know for other 13 sterea projections [3], but according to [4]
ESRI's Double_Stereographic is the same as GDAL's
Oblique_Steregraphic, and that seems to make sense for 3120,2171-2174.

Should Double_Stereographic be intepreted as Oblique_Steregraphic by
GDAL and friends?

Please read Paul Kelly's comments on grass-dev:
http://www.nabble.com/Re%3A--GRASS-user--problem-with-vi.in.ogr-tf2934543.html

The discussion started on grass-user:
http://www.nabble.com/problem-with-vi.in.ogr-tf2931526.html

[1]
Layer SRS WKT:
PROJCS["PUWG_65_Strefa_IV",
    GEOGCS["GCS_Pulkovo_1942",
        DATUM["Pulkovo_1942",
            SPHEROID["Krasovsky_1940",6378245.0,298.3]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Double_Stereographic"],
    PARAMETER["False_Easting",3703000.0],
    PARAMETER["False_Northing",5627000.0],
    PARAMETER["Central_Meridian",16.67222222222222],
    PARAMETER["Scale_Factor",0.9998],
    PARAMETER["Latitude_Of_Origin",51.67083333333333],
    UNIT["Meter",1.0]]

[2]
No projection name! Projection parameters likely to be meaningless.
A datum name S-42 (Pulkovo_1942) was specified without transformation
parameters.

[3]
$ grep -c "proj=sterea " /usr/local/share/proj/epsg
18
(substract 4 deprecated of them)

[4]
http://udig.refractions.net/docs/api-geotools/org/geotools/ct/proj/Stereographic.html

From dron at ak4719.spb.edu  Sun Jan  7 10:53:34 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp color corruption
In-Reply-To: <459E8110.4020109@pobox.com>
References: <006a01c73099$883f2e40$3301a8c0@vaio> <459E761B.8090207@pobox.com>
	<fa2ac0580701050828l4220d83eg773ce999dc3b5736@mail.gmail.com>
	<459E8110.4020109@pobox.com>
Message-ID: <20070107155334.GC31893@ak4719.spb.edu>

On Fri, Jan 05, 2007 at 11:47:12AM -0500, Frank Warmerdam wrote:
> >Does cubic spline resampling give the best quality?  I know that it
> >is the slowest.
> 
> Quality is in the eye of the beholder.  Generally speaking cubic
> convolution will produce the most attractive results.  Note that there
> are two cubic convolution kernels (-rc and -rcs).  The -rc is what I
> consider the "traditional" implementation meaning it is what I used at
> PCI.  -rcs is a variation Andrey Kiselev implemented, and which he
> considers better for at least some purposes.  You should try both (and
> -rb) and see which you prefer.

Spline interpolation (-rcs) is good for upsampling, especially for
significant enlargements (e.g., when you prepare image for printing). If
the output pixel size is the same as the input one, cubic convolution
may be a better choice (but that depends on your preferences, of
course).

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Sun Jan  7 10:48:14 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] JasPer UUID enabled library updated to version 1.900.0
Message-ID: <20070107154814.GB31893@ak4719.spb.edu>

Folks,

I just ported the UUID patch (required to read and write georeferenced
JPEG2000 files) to latest version of the JasPer library (1.900.0). The
new version available here:

 ftp://ftp.remotesensing.org/gdal/jasper-1.900.0.uuid.tar.gz

IMPORTANT NOTE:
This is only for those who use CVS version of GDAL. Users of 1.4.0 GDAL
release should continue with old JasPer:

 ftp://ftp.remotesensing.org/gdal/jasper-1.701.0.uuid.tar.gz

Sorry for inconvenience, I just realized that there is a new JasPer
available, so there was no time to do this before 1.4.0.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From woklist at kyngchaos.com  Sun Jan  7 12:23:13 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] JasPer UUID enabled library updated to version 1.900.0
In-Reply-To: <20070107154814.GB31893@ak4719.spb.edu>
References: <20070107154814.GB31893@ak4719.spb.edu>
Message-ID: <3231F5FE-D650-4A48-8D81-9E4092548DEE@kyngchaos.com>

On Jan 7, 2007, at 9:48 AM, Andrey Kiselev wrote:

> IMPORTANT NOTE:
> This is only for those who use CVS version of GDAL. Users of 1.4.0  
> GDAL
> release should continue with old JasPer:
>
Is 1.900.0 a major API change that breaks GDAL, or are you talking  
about a specific binary release of GDAL?  The JasPer docs don't say  
anything about that, just mention bug fixes and internal optimization  
and fixes.

> Sorry for inconvenience, I just realized that there is a new JasPer
> available, so there was no time to do this before 1.4.0.
>
Hm, JasPer is one of those you'd think would never change ^_^  I  
stopped checking for JasPer updates a while back, thanks for the  
heads up.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do  
if you ARE a maniacally depressed robot?  No, don't try and answer,  
I'm 50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy



From jluis at ualg.pt  Sun Jan  7 13:07:07 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] DXF to raster conversion
In-Reply-To: <000701c73258$ba713280$0201a8c0@oiokratr6dmly7>
References: <000701c73258$ba713280$0201a8c0@oiokratr6dmly7>
Message-ID: <45A136CB.50904@ualg.pt>

Grzegorz Wiktorowski wrote:
> I received DXF file and I need to convert to TIFF format. From 
> description
> of gdal_rasterize it seems to me it does not read DXF file. I didn't find
> any tool to convert from DXF to OGR vector formats also. Any hint will 
> be appreciated.
Grzegorz ,
Check this site.
http://www.guthcad.com.au/cad2shape.htm

J. Luis


From Martin.Spott at mgras.net  Sun Jan  7 13:29:21 2007
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Man page fix
Message-ID: <enre61$nhc$3@osprey.mgras.de>

To my experience the man page of gdal_contour should see a little fix:

--- gdal_contour.1~	2007-01-07 19:26:48.049597139 +0100
+++ gdal_contour.1	2007-01-07 19:26:48.049597139 +0100
@@ -55,7 +55,7 @@
 .PP
 .PP
 .nf
-gdal_contour -a elev dem.tif contour.shp 10.0
+gdal_contour -a elev dem.tif contour.shp -i 10.0
 .fi
 .PP
 .SH "AUTHORS"

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From warmerdam at pobox.com  Sun Jan  7 17:23:40 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Man page fix
In-Reply-To: <enre61$nhc$3@osprey.mgras.de>
References: <enre61$nhc$3@osprey.mgras.de>
Message-ID: <45A172EC.200@pobox.com>

Martin Spott wrote:
> To my experience the man page of gdal_contour should see a little fix:
> 
> --- gdal_contour.1~	2007-01-07 19:26:48.049597139 +0100
> +++ gdal_contour.1	2007-01-07 19:26:48.049597139 +0100
> @@ -55,7 +55,7 @@
>  .PP
>  .PP
>  .nf
> -gdal_contour -a elev dem.tif contour.shp 10.0
> +gdal_contour -a elev dem.tif contour.shp -i 10.0
>  .fi

Martin,

The man pages are generated from doc/gdal_utilities.dox and this seems
to have already been corrected for 1.4.0.  It reads:

This would create 10meter contours from the DEM data in dem.tif and produce
a shapefile in contour.shp/shx/dbf with the contour elevations in the "elev"
attribute.

\verbatim
gdal_contour -a elev dem.tif contour.shp -i 10.0
\endverbatim

\if man
\section iauthor AUTHORS
Frank Warmerdam <warmerdam@pobox.com>, Silke Reimer <silke@intevation.de>
\endif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Jan  7 17:31:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: Oblique_ vs Double_Stereographic
In-Reply-To: <45A11736.8050401@o2.pl>
References: <45A11736.8050401@o2.pl>
Message-ID: <45A174BA.1030906@pobox.com>

Maciej Sieczka wrote:
  > Should Double_Stereographic be intepreted as Oblique_Steregraphic by
> GDAL and friends?

Maciej,

Please submit this into the GDAL bugzilla and we can try to address it.
There are many differences between ESRI Well Known Text and OGR Well Known
Text coordinate systems.  Generally I try to have the morphToESRI() and
morphFromESRI() methods take care of conversions but there are sometimes
missing translations that need to be added.  There may also be cases where
we can't easily maintain distinctions that exist in ESRI or OGR in the
other representation.  I don't know if that applies here.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Mon Jan  8 01:39:50 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] JasPer UUID enabled library updated to version 1.900.0
In-Reply-To: <3231F5FE-D650-4A48-8D81-9E4092548DEE@kyngchaos.com>
References: <20070107154814.GB31893@ak4719.spb.edu>
	<3231F5FE-D650-4A48-8D81-9E4092548DEE@kyngchaos.com>
Message-ID: <20070108063950.GA3331@ak4719.spb.edu>

On Sun, Jan 07, 2007 at 11:23:13AM -0600, William Kyngesburye wrote:
> >This is only for those who use CVS version of GDAL. Users of 1.4.0
> >GDAL release should continue with old JasPer:
> >
> Is 1.900.0 a major API change that breaks GDAL, or are you talking
> about a specific binary release of GDAL?  The JasPer docs don't say
> anything about that, just mention bug fixes and internal optimization
> and fixes.

William,

GDAL driver uses the internal non-public API of JasPer which was changed
a bit in this release. JasPer author never applied my patches upstream
(that is why we are keeping separate version), but now I found one of
the problems solved and part of my patch gone away.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dackavi at gmail.com  Mon Jan  8 04:19:40 2007
From: dackavi at gmail.com (Avi)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Fwd: confirm 293458f9f5dafd2f34ecf42606076a671364c064
In-Reply-To: <mailman.0.1168247683.18282.gdal-dev@lists.maptools.org>
References: <mailman.0.1168247683.18282.gdal-dev@lists.maptools.org>
Message-ID: <d8b8d6400701080119x6bb78018i432fa80acc314a37@mail.gmail.com>

---------- Forwarded message ----------
From: gdal-dev-request@lists.maptools.org <
gdal-dev-request@lists.maptools.org>
Date: 08-ene-2007 10:14
Subject: confirm 293458f9f5dafd2f34ecf42606076a671364c064
To: dackavi@gmail.com

Mailing list subscription confirmation notice for mailing list
Gdal-dev

We have received a request from 213.0.30.217 for subscription of your
email address, "dackavi@gmail.com", to the gdal-dev@lists.maptools.org
mailing list.  To confirm that you want to be added to this mailing
list, simply reply to this message, keeping the Subject: header
intact.  Or visit this web page:


http://lists.maptools.org/mailman/confirm/gdal-dev/293458f9f5dafd2f34ecf42606076a671364c064


Or include the following line -- and only the following line -- in a
message to gdal-dev-request@lists.maptools.org:

    confirm 293458f9f5dafd2f34ecf42606076a671364c064

Note that simply sending a `reply' to this message should work from
most mail readers, since that usually leaves the Subject: line in the
right form (additional "Re:" text in the Subject: is okay).

If you do not wish to be subscribed from this list, please simply
disregard this message.  If you think you are being maliciously
subscribed to the list, or have any other questions, send them to
gdal-dev-owner@lists.maptools.org.


-- 
Av| Rules
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070108/9677497a/attachment.html
From dackavi at gmail.com  Mon Jan  8 04:33:04 2007
From: dackavi at gmail.com (Avi)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Problem compiling with VS 8
Message-ID: <d8b8d6400701080133s72a0506dh1e1827efced521f7@mail.gmail.com>

Hello,

I'm compiling with VS 8 "msvc8_gdalce_lib" project and cannot open include
file 'cpl_config.h'. Where is the problem?

With "msvc8_gdalce_lib_test" project happens the same.

-- 
Av| Rules
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070108/182fc174/attachment.html
From mateusz at loskot.net  Mon Jan  8 04:50:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Problem compiling with VS 8
In-Reply-To: <d8b8d6400701080133s72a0506dh1e1827efced521f7@mail.gmail.com>
References: <d8b8d6400701080133s72a0506dh1e1827efced521f7@mail.gmail.com>
Message-ID: <45A213E4.1030703@loskot.net>

Avi wrote:
> Hello,
> 
> I'm compiling with VS 8 "msvc8_gdalce_lib" project and cannot open
> include file 'cpl_config.h'. Where is the problem?
> 
> With "msvc8_gdalce_lib_test" project happens the same.

Avi,

First, *ALL* following projects are deprecated and shouldn't be used:

evc4_gdalce_dll/
evc4_gdalce_dll_test/
evc4_gdalce_lib/
evc4_gdalce_lib_test/
msvc8_gdalce_lib/
msvc8_gdalce_lib_test/
wce_test_dll/
wce_test_lib/


They are present in 1.4.0 package because I missed the moment of RC1
synchronization and CVS directories removal doesn't work as I'd wish.

Today, I'm updating building and usage instructions which will be
available on the Windows CE web page:

http://www.gdal.org/wince.html

Second, the *ONLY* available project for VC++ in 1.4.0 which should
be used to build GDAL for Windows CE is located here:

<GDAL>/wince/msvc80/gdalce_dll/gdalce_dll.sln

Also, you need to checkout WCELIBCEX library from the SVN:

http://sourceforge.net/projects/wcelibcex

and there you will find project file for VC++ 2005:

http://wcelibcex.svn.sourceforge.net/viewvc/wcelibcex/trunk/msvc80/

which should be added to the gdalce_dll.sln as a dependency for
gdalce_dll.vcproj.


BTW, you should be aware all this is about building GDAL for Windows CE,
but not for desktop Windows.
I'm not sure if you are, because you've not mentioned it in the post
subject or body.


Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dolf.andringa at elcyion.nl  Mon Jan  8 05:23:26 2007
From: dolf.andringa at elcyion.nl (Dolf Andringa)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
In-Reply-To: <459FE60D.1070001@pobox.com>
References: <459FE60D.1070001@pobox.com>
Message-ID: <45A21B9E.60308@elcyion.nl>

Hey Frank

I read in the OGR 1.4.0 iverview of changes:

Postgres/PostGIS Driver:
  - Added schema support.

What is supported which wasn't before? It was possible to access layers 
from different schema's by using the schemaname.tablename right? What 
has been added?

Dolf.


Frank Warmerdam schreef:
> The GDAL development team is pleased to announce the release of
> GDAL/OGR 1.4.0.  This new release includes many new features and
> bug fixes since the 1.3.2 release nine months ago.  These are
> described at:
> 
>   http://www.gdal.org/NEWS.html
> 
> The new release source may be downloaded from:
> 
>   http://www.gdal.org/dl/gdal-1.4.0.tar.gz
>   http://www.gdal.org/dl/gdal140.zip
> 
> Binaries corresponding to the GDAL/OGR 1.4.0 release can be found
> included in the FWTools 1.1.3 release for Windows and Linux at:
> 
>   http://www.gdal.org/dl/fwtools/FWTools113.exe (windows)
>   http://www.gdal.org/dl/fwtools/FWTools-linux-1.1.3.tar.gz (linux)
> 
> The GDAL project has also introduced the new gdal-announce list, hosted
> by OSGeo.  Those interested in just occasional notices of GDAL/OGR project
> progress are encouraged to join this mailing list.
> 
>   http://lists.osgeo.org/mailman/listinfo/gdal-announce
> 
> Best regards,

From bartvde at osgis.nl  Mon Jan  8 06:21:15 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
Message-ID: <80a155985d665268ee9e51284164bf7f@145.50.39.11>

This probably applies to creating datasets (e.g. with ogr2ogr). Previously
it would always end up in the public schema. Now you can probably specify
the schema in which the table is to be created.

See:
http://www.gdal.org/ogr/drv_pg.html

there is now a new LCO (Layer Creation Option) called SCHEMA.

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


--------- Oorspronkelijk bericht --------
Van: Dolf Andringa <dolf.andringa@elcyion.nl>
Naar: gdal-dev <gdal-dev@lists.maptools.org>
Onderwerp: Re: [Gdal-dev] GDAL/OGR 1.4.0 Released
Datum: 08/01/07 08:38

> Hey Frank
> 
> I read in the OGR 1.4.0 iverview of changes:
> 
> Postgres/PostGIS Driver:
>   - Added schema support.
> 
> What is supported which wasn't before? It was possible to access layers 
> from different schema's by using the schemaname.tablename right? What 
> has been added?
> 
> Dolf.
> 
> 
> Frank Warmerdam schreef:
> &gt; The GDAL development team is pleased to announce the release of
> &gt; GDAL/OGR 1.4.0.  This new release includes many new features and
> &gt; bug fixes since the 1.3.2 release nine months ago.  These are
> &gt; described at:
> &gt; 
> &gt;   http://www.gdal.org/NEWS.html
> &gt; 
> &gt; The new release source may be downloaded from:
> &gt; 
> &gt;   http://www.gdal.org/dl/gdal-1.4.0.tar.gz
> &gt;   http://www.gdal.org/dl/gdal140.zip
> &gt; 
> &gt; Binaries corresponding to the GDAL/OGR 1.4.0 release can be found
> &gt; included in the FWTools 1.1.3 release for Windows and Linux at:
> &gt; 
> &gt;   http://www.gdal.org/dl/fwtools/FWTools113.exe (windows)
> &gt;   http://www.gdal.org/dl/fwtools/FWTools-linux-1.1.3.tar.gz (linux)
> &gt; 
> &gt; The GDAL project has also introduced the new gdal-announce list,
hosted
> &gt; by OSGeo.  Those interested in just occasional notices of GDAL/OGR
project
> &gt; progress are encouraged to join this mailing list.
> &gt; 
> &gt;   http://lists.osgeo.org/mailman/listinfo/gdal-announce
> &gt; 
> &gt; Best regards,
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 




From tutey at o2.pl  Mon Jan  8 11:49:12 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] DXF to raster conversion
In-Reply-To: <000701c73258$ba713280$0201a8c0@oiokratr6dmly7>
References: <000701c73258$ba713280$0201a8c0@oiokratr6dmly7>
Message-ID: <45A27608.2070805@o2.pl>

Grzegorz Wiktorowski wrote:
> I received DXF file and I need to convert to TIFF format. From description
> of gdal_rasterize it seems to me it does not read DXF file.

You can convert to eg. PS with 'pstoedit', then rasterize this in GIMP
or with ImageMagick's 'convert'.

If you want to edit the data first, there are eg. OO.org Draw or QCAD
that read DXF.

> I didn't find any tool to convert from DXF to OGR vector formats also.

GRASS GIS has v.in.dxf module for DXF import and it can output to any
OGR supported vector with v.out.ogr.

If you go for GRASS, note there it has it's own tool for rasterising -
v.to.rast. Next use r.out.gdal to export into any GDAL supported format.

Cheers,
Maciek

From mitchelljj98 at gmail.com  Mon Jan  8 14:34:00 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Gdalwarp Error: unable to compute a transformation
	between pixel/line and georeferenced coordinates for sourcefile
Message-ID: <fa2ac0580701081134t2aa61fbdo245427b7d4eb4771@mail.gmail.com>

Hi,

When trying to run the following:
gdalwarp -s_srs EPSG:4269 -t_srs EPSG:4326 -rc -of HFA sourcefile destfile
I get the following error:
Error 1: Unable to compute a transformation between pixel/line and
georeferenced coordinates for sourcefile.  There is no affine transformation
and no GCP's.

When running gdalinfo no coordinate system is listed but I was told it is
NAD83, also I was also given a .sdw file in addition to the .sid file

gdalinfo below:

Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Size is 52736, 85504
Coordinate System is `'
Origin = (11827711.500000000000000,7066112.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  IMAGE__WIDTH=52736
  IMAGE__HEIGHT=85504
  IMAGE__COLOR_SCHEME=0
  IMAGE__DATA_TYPE=0
  IMAGE__XY_ORIGIN=0.000000,85503.000000
  IMAGE__X_RESOLUTION=1.000000
  IMAGE__Y_RESOLUTION=1.000000
Corner Coordinates:
Upper Left  (11827711.500, 7066112.000)
Lower Left  (11827711.500, 6980608.000)
Upper Right (11880447.500, 7066112.000)
Lower Right (11880447.500, 6980608.000)
Center      (11854079.500, 7023360.000)
Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
  Overviews: 26368x42752, 13184x21376, 6592x10688, 3296x5344, 1648x2672,
824x1336, 412x668, 206x334
Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
  Overviews: 26368x42752, 13184x21376, 6592x10688, 3296x5344, 1648x2672,
824x1336, 412x668, 206x334
Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
  Overviews: 26368x42752, 13184x21376, 6592x10688, 3296x5344, 1648x2672,
824x1336, 412x668, 206x334

Thanks,
-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070108/477793ab/attachment.html
From mateusz at loskot.net  Mon Jan  8 15:36:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Problem compiling with VS 8
In-Reply-To: <d8b8d6400701080409q7d3e38b8m5b2354e15aa48379@mail.gmail.com>
References: <d8b8d6400701080133s72a0506dh1e1827efced521f7@mail.gmail.com>	
	<45A213E4.1030703@loskot.net>
	<d8b8d6400701080409q7d3e38b8m5b2354e15aa48379@mail.gmail.com>
Message-ID: <45A2AB34.4040805@loskot.net>

Avi wrote:
> Hi,
> 
> sorry, I'm building GDAL for Windows CE.
> 
> I download the latest version of GDAL 1.4.0 on 
> http://www.gdal.org/download.html "Source" and download the WCELIBCEX
>  library from the SVN. I add this proyect to the gdalce_dll.sln, but
> cannot open source files "..\src\wce_abort.c","..\src\wce_access.c",
> etc...
> 
> The double click on this files in the "solutions explorer" cannot
> open this.
> 
> I don?t known if I make the step "you need to checkout WCELIBCEX
> library from the SVN:" well.

Avi,

This sounds strange.
Today, I updated instructions for Windows CE and here they are:

http://www.gdal.org/wince.html

I tested with the complete path steps of of configuration and
compilation based on packages gdal-1.4.0 and wcelibcex-1.0 (today I
released version 1.0 of WCELIBCEX, so users won't need to checkout
sources from SVN).

Please, follow this instructions again and give me a note if it works
for you.

FYI, the same instructions apply to current CVS versions and similar
guide is included in wince/README file.


Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jan  8 15:40:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
In-Reply-To: <459FE60D.1070001@pobox.com>
References: <459FE60D.1070001@pobox.com>
Message-ID: <45A2AC4C.5020607@loskot.net>

Frank Warmerdam wrote:
> The GDAL development team is pleased to announce the release of
> GDAL/OGR 1.4.0.  This new release includes many new features and
> bug fixes since the 1.3.2 release nine months ago.  These are
> described at:
> 
>   http://www.gdal.org/NEWS.html
> 
> The new release source may be downloaded from:
> 
>   http://www.gdal.org/dl/gdal-1.4.0.tar.gz
>   http://www.gdal.org/dl/gdal140.zip
> 
> Binaries corresponding to the GDAL/OGR 1.4.0 release can be found
> included in the FWTools 1.1.3 release for Windows and Linux at:
> 
>   http://www.gdal.org/dl/fwtools/FWTools113.exe (windows)
>   http://www.gdal.org/dl/fwtools/FWTools-linux-1.1.3.tar.gz (linux)
> 
> The GDAL project has also introduced the new gdal-announce list, hosted
> by OSGeo.  Those interested in just occasional notices of GDAL/OGR project
> progress are encouraged to join this mailing list.
> 
>   http://lists.osgeo.org/mailman/listinfo/gdal-announce

I'd like to give an additional note related to Windows CE.
Today, I publish new version of GDAL for Windows CE guide
with *many* updates:

http://www.gdal.org/wince.html

It is recommended to check at least follosing section:

 http://www.gdal.org/wince.html#wince_directory

Due to fact I missed the RC synchronization date, there are some
deprecated stuff inside the gdal-1.4.0/wince directory which
should *NOT* be used.

Don't hesitate to contact me in case of problems, ideally post
them on the gdal-dev list so others can read them and solutions too.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jan  8 15:42:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Can't find GDAL source files for WinCE
In-Reply-To: <459BD113.3080306@loskot.net>
References: <367826206.26698@nudt.edu.cn> <459BD113.3080306@loskot.net>
Message-ID: <45A2AC9C.8040504@loskot.net>

Mateusz Loskot wrote:
> ??? wrote:
>> Hi all:
>>    I'm trying to build gdal for Windows CE. I was reading the information on http://www.gdal.org/wince.html
>>  It said that I can download the official CVS repository. Follow instructions in
>>  CVS section on the GDAL download page. I tried to connect to the gdal server
>> under
>>  linux according to the instructions on the download page. But it lose connection
>>  after I type Enter for password.  And I cann't find the gdal source files for
>>  WinCE on the http://www.gdal.org/dl 
>>  I don't konw why? Anyone can help me? Thx~~~~~~~:)
> 
> Yesterda, I removed all those files and I'm reconstructing the port
> structure for 1.4.0.
> As you can read in README file, the IMPORTANT note says "please don't
> use them ATM."
> 
> http://www.gdal.org/srctree/wince/README
> 
> The 1.4.0 release will be back working.
> 
> I appologize for inconvenience.


???,

FYI,  updated version of the guide for GDAL for Windows CE is available:

http://www.gdal.org/wince.html

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Mon Jan  8 15:46:28 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Re: Oblique_ vs Double_Stereographic
In-Reply-To: <45A174BA.1030906@pobox.com>
References: <45A11736.8050401@o2.pl> <45A174BA.1030906@pobox.com>
Message-ID: <45A2ADA4.1050206@o2.pl>

Frank Warmerdam wrote:

> Please submit this into the GDAL bugzilla and we can try to address it.

Done: http://bugzilla.remotesensing.org/show_bug.cgi?id=1428

Regards,
Maciek

From dylan.beaudette at gmail.com  Mon Jan  8 16:23:17 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
In-Reply-To: <459FE60D.1070001@pobox.com>
References: <459FE60D.1070001@pobox.com>
Message-ID: <200701081323.17336.dylan.beaudette@gmail.com>

On Saturday 06 January 2007 10:10, Frank Warmerdam wrote:
> The GDAL development team is pleased to announce the release of
> GDAL/OGR 1.4.0.  This new release includes many new features and
> bug fixes since the 1.3.2 release nine months ago.  These are
> described at:
>
>    http://www.gdal.org/NEWS.html
>
> The new release source may be downloaded from:
>
>    http://www.gdal.org/dl/gdal-1.4.0.tar.gz
>    http://www.gdal.org/dl/gdal140.zip
>
> Binaries corresponding to the GDAL/OGR 1.4.0 release can be found
> included in the FWTools 1.1.3 release for Windows and Linux at:
>
>    http://www.gdal.org/dl/fwtools/FWTools113.exe (windows)
>    http://www.gdal.org/dl/fwtools/FWTools-linux-1.1.3.tar.gz (linux)
>
> The GDAL project has also introduced the new gdal-announce list, hosted
> by OSGeo.  Those interested in just occasional notices of GDAL/OGR project
> progress are encouraged to join this mailing list.
>
>    http://lists.osgeo.org/mailman/listinfo/gdal-announce
>
> Best regards,

Great new Frank.

I just noticed that something does not work when trying to include MrSid 
support with the lizzardTech DSDK:

use the archive from lizzardTech: 
/Geo_DSDK-6.0.7.1407/

my configure line:
./configure --with-png=internal --with-jpeg=internal \
--with-gif=internal --with-libtiff=internal \
--with-geotiff=internal --with-libz=internal --with-netcdf \
--without-ogdi --with-python --with-sqlite --with-mysql \
--with-threads=yes --without-grass \
--with-mrsid=~/src/Geo_DSDK-6.0.7.1407/

the error that I now receive:
checking for lt_base.h in ~/src/Geo_DSDK-6.0.7.1407/include/support... not 
found.
configure: error:   MrSID requested, but components not found.

This file *does* exist, and this DSDK worked with GDAL-1.3.2 ... hmm ?

Any ideas on why  this might be happening?

Cheers,

Dylan



-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From mhanson at photon.com  Mon Jan  8 17:41:34 2007
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] Link Error in 1.4 with MSVC8
Message-ID: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>

Hi, I'm getting a linking error when compiling in MSVC8 (using nmake)
 
Any suggestions?  
 
matt
 
 
   Creating library gdal_i.lib and object gdal_i.exp
isis2dataset.obj : error LNK2019: unresolved external symbol "public: __thiscall NASAKeywordHandler::~NASAKeywordHandler(void)" (??1NASAKeywordHandler@@QAE@XZ) referenced in function "public: virtual __thiscall ISIS2Dataset::~ISIS2Dataset(void)" (??1ISIS2Dataset@@UAE@XZ)
isis2dataset.obj : error LNK2019: unresolved external symbol "public: __thiscall NASAKeywordHandler::NASAKeywordHandler(void)" (??0NASAKeywordHandler@@QAE@XZ) referenced in function "public: __thiscall ISIS2Dataset::ISIS2Dataset(void)" (??0ISIS2Dataset@@QAE@XZ)
isis2dataset.obj : error LNK2019: unresolved external symbol "public: int __thiscall NASAKeywordHandler::Ingest(struct _iobuf *,int)" (?Ingest@NASAKeywordHandler@@QAEHPAU_iobuf@@H@Z) referenced in function "public: static class GDALDataset * __cdecl ISIS2Dataset::Open(class GDALOpenInfo *)" (?Open@ISIS2Dataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
isis2dataset.obj : error LNK2019: unresolved external symbol "public: char const * __thiscall NASAKeywordHandler::GetKeyword(char const *,char const *)" (?GetKeyword@NASAKeywordHandler@@QAEPBDPBD0@Z) referenced in function "private: char const * __thiscall ISIS2Dataset::GetKeyword(char const *,char const *)" (?GetKeyword@ISIS2Dataset@@AAEPBDPBD0@Z)
gdal14.dll : fatal error LNK1120: 4 unresolved externals
NMAKE : fatal error U1077: '"c:\Program Files\Microsoft Visual Studio 8\VC\BIN\link.EXE"' : return code '0x460'
Stop.



From hobu at iastate.edu  Mon Jan  8 17:49:58 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:34 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
In-Reply-To: <200701081323.17336.dylan.beaudette@gmail.com>
References: <459FE60D.1070001@pobox.com>
	<200701081323.17336.dylan.beaudette@gmail.com>
Message-ID: <EDC49C26-6237-447A-BE53-CEE2EA7E5239@iastate.edu>

On Jan 8, 2007, at 3:23 PM, Dylan Beaudette wrote:

>
> I just noticed that something does not work when trying to include  
> MrSid
> support with the lizzardTech DSDK:
>
> use the archive from lizzardTech:
> /Geo_DSDK-6.0.7.1407/
>
> my configure line:
> ./configure --with-png=internal --with-jpeg=internal \
> --with-gif=internal --with-libtiff=internal \
> --with-geotiff=internal --with-libz=internal --with-netcdf \
> --without-ogdi --with-python --with-sqlite --with-mysql \
> --with-threads=yes --without-grass \
> --with-mrsid=~/src/Geo_DSDK-6.0.7.1407/
>
> the error that I now receive:
> checking for lt_base.h in ~/src/Geo_DSDK-6.0.7.1407/include/ 
> support... not
> found.
> configure: error:   MrSID requested, but components not found.
>
> This file *does* exist, and this DSDK worked with GDAL-1.3.2 ... hmm ?
>
> Any ideas on why  this might be happening?

Over IRC, Dylan and I figured out that the ~/src is not being  
properly expanded.  I don't know if shell expansion works for any of  
the configure parameters and if it ever was expected/supposed to.

Howard

From ben at vterrain.org  Tue Jan  9 00:54:35 2007
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Save/restore Geo from a TIFF with GDAL?
Message-ID: <00a001c733b2$a4ae4c70$6401a8c0@DellWork>

In the GeoTIFF FAQ (http://remotesensing.org/geotiff/faq.html) under the
entry "How do I preserve GeoTIFF info when editing my image?", it explains
you can do this:

  listgeo -no_norm original.tif > original.geo
  geotifcp -g original.geo modified.tif modified_geotiff.tif 

For those of us with command-line tools from gdal but not from libgeotiff,
is it possible to do the same?  I tried to figure out how to do it with
gdal_translate, but it was not at all clear.

Thanks,
Ben


From mateusz at loskot.net  Tue Jan  9 01:37:48 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Save/restore Geo from a TIFF with GDAL?
In-Reply-To: <00a001c733b2$a4ae4c70$6401a8c0@DellWork>
References: <00a001c733b2$a4ae4c70$6401a8c0@DellWork>
Message-ID: <45A3383C.4080400@loskot.net>

Ben Discoe wrote:
> In the GeoTIFF FAQ (http://remotesensing.org/geotiff/faq.html) under 
> the entry "How do I preserve GeoTIFF info when editing my image?", it
>  explains you can do this:
> 
> listgeo -no_norm original.tif > original.geo geotifcp -g original.geo
>  modified.tif modified_geotiff.tif
> 
> For those of us with command-line tools from gdal but not from 
> libgeotiff, is it possible to do the same?  I tried to figure out how
>  to do it with gdal_translate, but it was not at all clear.

I've not seen any such tool in GDAL itself.
However, FWTools package - a user-friendly GDAL distribution - includes
listgeo and geotifcp utilities, so may be it's enough to consider these
tools as included :-)

Another option I can see is to write a simple script that does the job.
Check pymod/samples/gdalcopyproj.py which copies geotransform metadata
from one dataset to another. I think it's a good base to start.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ar at navpoch.com  Tue Jan  9 04:35:13 2007
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem compiling with VS 8
In-Reply-To: <45A2AB34.4040805@loskot.net>
Message-ID: <003301c733d1$790f3650$0202a8c0@AlainMobile>

Hi Mateusz,

 

Great work !

 

I confirm that gdalce_dll.sln is not clickable with VS2005 SP1, but it opens
from the Open Project menu.

 

When compiling for PPC2003 debug some annoying linker warnings:

 

ogrspatialreference.obj : warning LNK1166: cannot adjust code at
offset=0x00001000, rva=0x00071A38

mitab_feature.obj : warning LNK1166: cannot adjust code at
offset=0x00001000, rva=0x0009AA9C

mitab_feature_mif.obj : warning LNK1166: cannot adjust code at
offset=0x00001000, rva=0x000B26CC

geotiff.obj : warning LNK1166: cannot adjust code at offset=0x00001000,
rva=0x00148720

tif_getimage.obj : warning LNK1166: cannot adjust code at offset=0x00001000,
rva=0x00174B78

gdalwarpkernel.obj : warning LNK1166: cannot adjust code at
offset=0x00001000, rva=0x001CD2D8


Linker Tools Error LNK1166 Error Message 


cannot adjust code at offset=offset, va=value

LINK was unable to pad the code as required.

Certain instructions are not allowed to cross page boundaries on some
processors. LINK attempts to add pads to correct this situation. In this
case, LINK could not work around the problem.

Looks like alignment problems.

 

No such warning in release mode or WM2005 settings.

 

cheers,

AR

 

-----Message d'origine-----
De : gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] De la part de Mateusz Loskot
Envoy? : lundi 8 janvier 2007 21:36
? : gdal
Objet : Re: [Gdal-dev] Problem compiling with VS 8

 

Avi wrote:

> Hi,

> 

> sorry, I'm building GDAL for Windows CE.

> 

> I download the latest version of GDAL 1.4.0 on 

> http://www.gdal.org/download.html "Source" and download the WCELIBCEX

>  library from the SVN. I add this proyect to the gdalce_dll.sln, but

> cannot open source files "..\src\wce_abort.c","..\src\wce_access.c",

> etc...

> 

> The double click on this files in the "solutions explorer" cannot

> open this.

> 

> I don?t known if I make the step "you need to checkout WCELIBCEX

> library from the SVN:" well.

 

Avi,

 

This sounds strange.

Today, I updated instructions for Windows CE and here they are:

 

http://www.gdal.org/wince.html

 

I tested with the complete path steps of of configuration and

compilation based on packages gdal-1.4.0 and wcelibcex-1.0 (today I

released version 1.0 of WCELIBCEX, so users won't need to checkout

sources from SVN).

 

Please, follow this instructions again and give me a note if it works

for you.

 

FYI, the same instructions apply to current CVS versions and similar

guide is included in wince/README file.

 

 

Best regards

-- 

Mateusz Loskot

http://mateusz.loskot.net

_______________________________________________

Gdal-dev mailing list

Gdal-dev@lists.maptools.org

http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070109/f67a92a7/attachment.html
From oiok at brinkster.net  Tue Jan  9 04:39:29 2007
From: oiok at brinkster.net (Grzegorz Wiktorowski)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: DXF to raster conversion
Message-ID: <000c01c733d2$1267a6c0$0201a8c0@oiokratr6dmly7>

>> I received DXF file and I need to convert to TIFF format. From 
>> description
>> of gdal_rasterize it seems to me it does not read DXF file.
>
> You can convert to eg. PS with 'pstoedit', then rasterize this in GIMP
> or with ImageMagick's 'convert'.

As far as I found on pstoedit's web site it converts PS to DXF. My source is 
DXF do I don't think pstoedit helps here.


>> I didn't find any tool to convert from DXF to OGR vector formats also.
>
> GRASS GIS has v.in.dxf module for DXF import and it can output to any
> OGR supported vector with v.out.ogr.
>
> If you go for GRASS, note there it has it's own tool for rasterising -
> v.to.rast. Next use r.out.gdal to export into any GDAL supported format.
>

OK. But GRASS does not runs on Windows OS, I'm affraid.

Thanks.

-----
Grzegorz Wiktorowski 


From mbaye1234 at yahoo.fr  Tue Jan  9 05:02:40 2007
From: mbaye1234 at yahoo.fr (mbaye)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem for build overviews
Message-ID: <8234819.post@talk.nabble.com>


I have problem ito build overviews in vs2003 with gdal-1.4.0 
when i do this

GDAL.gdal.AllRegister();
			GDAL.Dataset ds = GDAL.gdal.Open("jp2.jpg", GDAL.gdalconst.GA_ReadOnly);
			Console.Out.WriteLine("Nombre de bandes avant creation doverviews :
"+ds.RasterCount);
			ds.BuildOverviews("MODE",2);
			Console.Out.WriteLine("Nombre de bandes avant creation doverviews :
"+ds.RasterCount);
			int over=ds.GetRasterBand(1).GetOverviewCount();
			Console.Out.WriteLine("Le nombre d overviews : "+over)

I have this error


Une exception non g?r?e du type 'System.ApplicationException' s'est produite
dans gdal_gdal_csharp.dll

Informations suppl?mentaires?: The JPEG driver does not support update
access to existing datasets.

Thanks for help me 

-- 
View this message in context: http://www.nabble.com/Problem-for-build-overviews-tf2944831.html#a8234819
Sent from the GDAL - Dev mailing list archive at Nabble.com.



From mateusz at loskot.net  Tue Jan  9 05:05:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem compiling with VS 8
In-Reply-To: <003301c733d1$790f3650$0202a8c0@AlainMobile>
References: <003301c733d1$790f3650$0202a8c0@AlainMobile>
Message-ID: <45A368DF.9010509@loskot.net>

Alain Rist wrote:
> Hi Mateusz,
> 
> Great work !

Alain,

Thanks!

> I confirm that gdalce_dll.sln is not clickable with VS2005 SP1, but it
> opens from the Open Project menu.

Yes, I've noticed the same problem.
After you open the gdalce_dll.sln from File -> Open -> Project/Solution,
and save, then the "clickability" comes back :-)

I suppose it's a problem with CVS and EOF in .sln file.
I'll try to fix it when we move GDAL to SVN.

> When compiling for PPC2003 /debug/ some annoying linker warnings:
> 
> ogrspatialreference.obj : warning LNK1166: cannot adjust code at
> offset=0x00001000, rva=0x00071A38
> [...] 
> Looks like alignment problems.

Yes, but this is a well-known and often-occuring problem
with this platform. It also occurs with eMbedded Visual C++ 4.0.
I've not noticed any problems caused by those warnings, in any software
I wrote for Windows CE, so I'm sure you can ignore them.

> No such warning in release mode or WM2005 settings.

Yup.


I'm glad it's working for you.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan  9 05:13:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem for build overviews
In-Reply-To: <8234819.post@talk.nabble.com>
References: <8234819.post@talk.nabble.com>
Message-ID: <45A36ABF.2070000@loskot.net>

mbaye wrote:
> I have problem ito build overviews in vs2003 with gdal-1.4.0 
> when i do this
> 
> GDAL.gdal.AllRegister();
> GDAL.Dataset ds = GDAL.gdal.Open("jp2.jpg", GDAL.gdalconst.GA_ReadOnly);

Try to replace GA_ReadOnly with GA_Update.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan  9 06:31:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem for build overviews
In-Reply-To: <20070109104536.50919.qmail@web86905.mail.ukl.yahoo.com>
References: <20070109104536.50919.qmail@web86905.mail.ukl.yahoo.com>
Message-ID: <45A37D05.1010403@loskot.net>

mouhamad mbaye wrote:
> When i replace GA_ReadOnly with GA_Update
> i have this error
>  
> Une exception non g?r?e du type 'System.ApplicationException' s'est
> produite dans gdal_gdal_csharp.dll
> Informations suppl?mentaires : The JPEG driver does not support update
> access to existing datasets.

I missed the detail explained in JPEG driver docs.
GDAL doesn't support embedded overviews for JPEG format.

For JPEG format you can only build overviews in external .ovr file:

http://www.gdal.org/frmt_jpeg.html

This is automatically handled by GDALDataset::BuildOverviews() for
JPEG driver. You can see apps/gdaladdo.cpp sources to see how it's
build. Also, using gdaladdo utility should be good for testing.

Note, .ovr files creation is a default method for drivers which do not
support embedded overviews natively.

If you're playing with JPEG2000, check note at the bottom of this page:

http://www.gdal.org/frmt_jp2ecw.html


p.s. Thanks to Andrey for teaching me about overviews support :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From dackavi at gmail.com  Tue Jan  9 06:54:51 2007
From: dackavi at gmail.com (Avi)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] "gdalce.dll" & "gdalce_i.lib" for CE
Message-ID: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>

Hi,

I compiled great the GDAL for Windows CE in VS8. I have these files
gdalce.dll and gdalce_i.lib and all the other files in the

C:\dev\proj\wince\msvc80\projce_dll\Pocket PC 2003 (ARMV4)\Debug

1) For work with these libraries  I add a reference to this .dll but doesn?t
add  to my new project. Is the way to do it?

2) What?s necessary for work with C#?


Greetings!!


-- 
Av| Rules
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070109/b1ce3ab3/attachment.html
From mateusz at loskot.net  Tue Jan  9 08:04:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] "gdalce.dll" & "gdalce_i.lib" for CE
In-Reply-To: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>
References: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>
Message-ID: <45A392D1.5040601@loskot.net>

Avi wrote:
> Hi,
> 
> I compiled great the GDAL for Windows CE in VS8. I have these files
> gdalce.dll and gdalce_i.lib and all the other files in the
> 
> C:\dev\proj\wince\msvc80\projce_dll\Pocket PC 2003 (ARMV4)\Debug
> 
> 1) For work with these libraries  I add a reference to this .dll but
> doesn?t add  to my new project. Is the way to do it?

Avi,

There are two options:

1. You can add gdalce_dll.vcproj + all its dependency projects to
solution of your application, in Visual C++ 2005 IDE, configure Project
Dependencies for your application adding gdalce_dll.vcproj as a
dependency. Then build all stuff together.

2. You can build gdalce.dll separately, as you've done it already.
Next, gdalce_i.lib to linker input of your application in which you are
going to use gdalce.dll. Also, put gdalce.dll on device or emulator to
the same folder as your application.

For example:

1. Copy gdalce.dll and gdalce_i.lib to C:\lib\gdalce
2. Open properties of your application project.
3. Go to Configuration Properties -> Linker
4. Add the C:\lib\gdalce path to Additional Library Directories
5. Go to Configuration Properties -> Linker -> Input
6. Add gdalce_i.lib to Additional Dependencies

Now, your application should be able to import gdalce.dll exports
properly.

> 2) What?s necessary for work with C#?

You need to write P/Invoke wrapper for GDAL C API calls.
	
Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan  9 08:13:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem for build overviews
In-Reply-To: <20070109130148.71460.qmail@web86913.mail.ukl.yahoo.com>
References: <20070109130148.71460.qmail@web86913.mail.ukl.yahoo.com>
Message-ID: <45A394E4.6080908@loskot.net>

mouhamad mbaye wrote:
> Thanks
> Can i do the same for the tiff format ?
> excuse for my poor english

Tiff does support internal/embedded overviews.
So, there is need to generate .ovr file.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan  9 08:34:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Problem for build overviews
In-Reply-To: <45A394E4.6080908@loskot.net>
References: <20070109130148.71460.qmail@web86913.mail.ukl.yahoo.com>
	<45A394E4.6080908@loskot.net>
Message-ID: <45A399E1.3020907@loskot.net>

Mateusz Loskot wrote:
> mouhamad mbaye wrote:
>> Thanks
>> Can i do the same for the tiff format ?
>> excuse for my poor english
> 
> Tiff does support internal/embedded overviews.
> So, there is need to generate .ovr file.

Argh, small mistake, certainly I wanted to write:

"there is *NO* need to generate .ovr file"

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dany.geotools at gmail.com  Tue Jan  9 11:13:46 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Strange error during Driver.Create(String filename,...)
Message-ID: <7221db410701090813l7d4438f1v8d3eb289d3b8698f@mail.gmail.com>

Hi list,
In the context of the GDAL ImageIO integration proposal I'm actually
building the framework which will add writing capabilities to the project.

Today I'm fighting against a strange error with Driver.Create (...) method.

>From a stand-alone testCase (I'm using Junit) the following code works
successfully:
------------------------------------------------------------------------------------------------
final File outputFile = new File
("d:\\DatiPlugin\\samples\\writingAttempt.jp2");
final BufferedImage im = ImageIO.read(new
File("D:\\DatiPlugin\\bogota.tif"));
Driver driver = gdal.GetDriverByName("JP2ECW");
final int width = im.getWidth();
final int height = im.getHeight();
Dataset ds = driver.Create (outFile.getAbsolutePath(), width, height, 1,
gdalconstConstants.GDT_Byte,null);

... some code ...

ds.GetRasterBand(1).WriteRaster_Direct(0,0,width,height,width,height,
gdalconstConstants.GDT_Byte,myByteBuffer);
ds.FlushCache();
ds.delete();
------------------------------------------------------------------------------------------------

However, using the SAME code within the body of the "write" method of the
MyJP2KImageWriter class (which extends ImageWriter), it does not work.
(Such a method will be called during an ImageWrite operation performed using
JAI-ImageIO toolkit).

I noticed that the code only works if I chose a filename with a path
containing no subdirectory... As an instance, using "D:\\sample.jp2" instead
of "D:\\DatiPlugin\\samples\\sample.jp2".
(Out of curiosity, I tried using a BMP driver and the problem still exist)

After a deep debug, I finally noticed that the problem could be attributable
to the GDAL methods:

FILE *VSIFOpenL( const char * pszFilename, const char * pszAccess ) [from
cpl_vsil.cpp]

which calls

VSIVirtualHandle *VSIWin32FilesystemHandler::Open( const char *pszFilename,
const char *pszAccess ) [from cpl_vsil_win32.cpp]

containing the code

hFile = CreateFile( pszFilename, dwDesiredAccess, FILE_SHARE_READ |
FILE_SHARE_WRITE, NULL, dwCreationDisposition,  dwFlagsAndAttributes, NULL
);

which makes hFile equal to INVALID_HANDLE_VALUE (By this reason, the Open
method returns NULL).


Could someone provide me some suggestions?

Thanks a lot.

Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070109/803746d8/attachment.html
From Jean-Philippe.Gauthier at ec.gc.ca  Tue Jan  9 11:45:06 2007
From: Jean-Philippe.Gauthier at ec.gc.ca (Gauthier,Jean-Philippe [CMC])
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Shapefile and SpatialRef problem
Message-ID: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E71@eccmcmail1.cmc.int.ec.gc.ca>


	Just tried gdal 1.4.0 and a problem arise when using OGR_L_GetSpatialRef to get the spatial reference of a previously opened shapefile datasource. It returns NULL whathever
	the shapefile. It does work for other file type like mid/mif.

	Used to work with gdal 1.3.2

	Any Idea ?

	================================================================
	Jean-Philippe Gauthier Bilodeau		Direction des op?rations
	Analyste Programmeur Scientifique	Centre M?t?orologique Canadien
	Tel : (514) 421-4642				2121 Route Transcanadienne
	Fax: (514) 421-4679				Dorval,Qu?bec
	Email: Jean-Philippe.Gauthier@ec.gc.ca	H9P 1J3



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070109/f8884fc6/attachment.html
From warmerdam at pobox.com  Tue Jan  9 11:51:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Strange error during Driver.Create(String filename,
	...)
In-Reply-To: <7221db410701090813l7d4438f1v8d3eb289d3b8698f@mail.gmail.com>
References: <7221db410701090813l7d4438f1v8d3eb289d3b8698f@mail.gmail.com>
Message-ID: <45A3C80D.2070801@pobox.com>

Daniele Romagnoli wrote:
> However, using the SAME code within the body of the "write" method of 
> the MyJP2KImageWriter class (which extends ImageWriter), it does not work.
> (Such a method will be called during an ImageWrite operation performed 
> using JAI-ImageIO toolkit).

Daniele,

I'm afraid I am unclear of the differences between the standalone JUnit
test, and the MyJP2KImageWriter case.  Is, by any chance, the second running
as a web service with different permissions than when run directly by you
under your user account?

> containing the code
> 
> hFile = CreateFile( pszFilename, dwDesiredAccess, FILE_SHARE_READ | 
> FILE_SHARE_WRITE, NULL, dwCreationDisposition,  dwFlagsAndAttributes, 
> NULL );
 >
> which makes hFile equal to INVALID_HANDLE_VALUE (By this reason, the 
> Open method returns NULL).

You might want to copy some error reporting code similar to what is
in the ::Seek() method (ifdef'ed out) into the ::Open() method in
an attempt to see what errors windows is encountering.  Really the
cpl_vsil_win32.cpp code should be querying win32 errors, and attempting
to translate them into corresponding settings of the errno global so that
higher up functions can try and report the errors.

I will file a bug against GDAL about this, though it won't solve your
problem.  At best it would help diagnose it more easily.

I suspect the file creation is failing either:
  o Because your failing case has different permissions.
  o In your failing case the file already exists and is held open by something
    so it cannot be overwritten/replaced.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan  9 12:17:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Shapefile and SpatialRef problem
In-Reply-To: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E71@eccmcmail1.cmc.int.ec.gc.ca>
References: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E71@eccmcmail1.cmc.int.ec.gc.ca>
Message-ID: <45A3CE46.10408@pobox.com>

Gauthier,Jean-Philippe [CMC] wrote:
> 
>         Just tried gdal 1.4.0 and a problem arise when using 
> OGR_L_GetSpatialRef to get the spatial reference of a previously opened 
> shapefile datasource. It returns NULL whathever
> 
>         the shapefile. It does work for other file type like mid/mif.
> 
>         Used to work with gdal 1.3.2
> 
>          Any Idea ?

Jean-Philippe,

Can you be specific?  Perhaps file a bug including a dataset demonstrating
the problem, and indications of your platform, etc.

Note, there was a problem introduced just after the 1.4.0 release was snapped
that made it into the FWTools 1.1.3 release that resulted in .prj files
with no newline not being read properly.  There was also a bug fixed
before 1.4.0 was snapped with .prj files of a particular length.  So I'm
very nervous about this area of code, but I was under the impression the
release itself was clean.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Jean-Philippe.Gauthier at ec.gc.ca  Tue Jan  9 12:41:07 2007
From: Jean-Philippe.Gauthier at ec.gc.ca (Gauthier,Jean-Philippe [CMC])
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Shapefile and SpatialRef problem
Message-ID: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E72@eccmcmail1.cmc.int.ec.gc.ca>


	You're right, I just added the \n in the .prj file and it works.
I did use gdal from fwtool 1.1.3 that I got this morning. Seems it going
to hev to be rebuilt.

	Thanks

	JP 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 09 January, 2007 12:18
To: Gauthier,Jean-Philippe [CMC]
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Shapefile and SpatialRef problem

Gauthier,Jean-Philippe [CMC] wrote:
> 
>         Just tried gdal 1.4.0 and a problem arise when using 
> OGR_L_GetSpatialRef to get the spatial reference of a previously 
> opened shapefile datasource. It returns NULL whathever
> 
>         the shapefile. It does work for other file type like mid/mif.
> 
>         Used to work with gdal 1.3.2
> 
>          Any Idea ?

Jean-Philippe,

Can you be specific?  Perhaps file a bug including a dataset
demonstrating the problem, and indications of your platform, etc.

Note, there was a problem introduced just after the 1.4.0 release was
snapped that made it into the FWTools 1.1.3 release that resulted in
.prj files with no newline not being read properly.  There was also a
bug fixed before 1.4.0 was snapped with .prj files of a particular
length.  So I'm very nervous about this area of code, but I was under
the impression the release itself was clean.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org





From warmerdam at pobox.com  Tue Jan  9 12:45:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Link Error in 1.4 with MSVC8
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>
Message-ID: <45A3D49E.4050107@pobox.com>

Matt Hanson wrote:
> Hi, I'm getting a linking error when compiling in MSVC8 (using nmake)
> 
> Any suggestions?
> 
> matt
> 
> 
> Creating library gdal_i.lib and object gdal_i.exp isis2dataset.obj : error
> LNK2019: unresolved external symbol "public: __thiscall
> NASAKeywordHandler::~NASAKeywordHandler(void)"
> (??1NASAKeywordHandler@@QAE@XZ) referenced in function "public: virtual
> __thiscall ISIS2Dataset::~ISIS2Dataset(void)" (??1ISIS2Dataset@@UAE@XZ) 
> isis2dataset.obj : error LNK2019: unresolved external symbol "public:
> __thiscall NASAKeywordHandler::NASAKeywordHandler(void)"
> (??0NASAKeywordHandler@@QAE@XZ) referenced in function "public: __thiscall
> ISIS2Dataset::ISIS2Dataset(void)" (??0ISIS2Dataset@@QAE@XZ) isis2dataset.obj
> : error LNK2019: unresolved external symbol "public: int __thiscall
> NASAKeywordHandler::Ingest(struct _iobuf *,int)"
> (?Ingest@NASAKeywordHandler@@QAEHPAU_iobuf@@H@Z) referenced in function
> "public: static class GDALDataset * __cdecl ISIS2Dataset::Open(class
> GDALOpenInfo *)" (?Open@ISIS2Dataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
>  isis2dataset.obj : error LNK2019: unresolved external symbol "public: char
> const * __thiscall NASAKeywordHandler::GetKeyword(char const *,char const
> *)" (?GetKeyword@NASAKeywordHandler@@QAEPBDPBD0@Z) referenced in function
> "private: char const * __thiscall ISIS2Dataset::GetKeyword(char const *,char
> const *)" (?GetKeyword@ISIS2Dataset@@AAEPBDPBD0@Z) gdal14.dll : fatal error
> LNK1120: 4 unresolved externals NMAKE : fatal error U1077: '"c:\Program
> Files\Microsoft Visual Studio 8\VC\BIN\link.EXE"' : return code '0x460' 
> Stop.

Matt,

I took me four hours, but was unable to reproduce this problem with VC8.

Well, ok, the four hours really was 2 minutes to reboot to windows,
10 minutes to try out my VC8 build, and then 3 hours and 48 minutes
playing Colonization - but proximity to games is one of the reasons
I hesitate to work on windows!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan  9 12:53:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Shapefile and SpatialRef problem
In-Reply-To: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E72@eccmcmail1.cmc.int.ec.gc.ca>
References: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E72@eccmcmail1.cmc.int.ec.gc.ca>
Message-ID: <45A3D6B6.20607@pobox.com>

Gauthier,Jean-Philippe [CMC] wrote:
> 	You're right, I just added the \n in the .prj file and it works.
> I did use gdal from fwtool 1.1.3 that I got this morning. Seems it going
> to hev to be rebuilt.

Whew!

I can issue a 1.1.4 if this is a big hassle for you, or you could revert
to FWTools 1.1.2 which shouldn't have the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Jean-Philippe.Gauthier at ec.gc.ca  Tue Jan  9 13:04:21 2007
From: Jean-Philippe.Gauthier at ec.gc.ca (Gauthier,Jean-Philippe [CMC])
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Shapefile and SpatialRef problem
Message-ID: <DC5EBDBC1F9D2E40AF4BDF9FFFA2EFDF689E73@eccmcmail1.cmc.int.ec.gc.ca>


	I will revert to 1.1.2 until you issue a 1.1.4, guess it should
not be a mather of months

	Thanks. 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 09 January, 2007 12:54
To: Gauthier,Jean-Philippe [CMC]
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Shapefile and SpatialRef problem

Gauthier,Jean-Philippe [CMC] wrote:
> 	You're right, I just added the \n in the .prj file and it works.
> I did use gdal from fwtool 1.1.3 that I got this morning. Seems it 
> going to hev to be rebuilt.

Whew!

I can issue a 1.1.4 if this is a big hassle for you, or you could revert
to FWTools 1.1.2 which shouldn't have the problem.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org





From bfraser at geoanalytic.com  Tue Jan  9 13:22:59 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Save/restore Geo from a TIFF with GDAL?
References: <00a001c733b2$a4ae4c70$6401a8c0@DellWork>
Message-ID: <023201c7341b$313cfbb0$160002c0@shark>

Ben,

  I think the closest you could get with GDAL would be:

    1.  use gdalinfo before the edit to see the srs definition (e.g.
EPSG:32608):
            gdalinfo original.tif
    2. edit the tif file, save it as modified.tif
    3. use gdal_translate to assign the original srs:
            gdal_translate -a_srs EPSG:32608 modified.tif
modified_geotiff.tif

Not quite as script-able as the geotiff tools....

Brent Fraser
GeoAnalytic Inc
Calgary, Alberta, Canada

----- Original Message ----- 
From: "Ben Discoe" <ben@vterrain.org>
To: "'gdal-dev'" <gdal-dev@lists.maptools.org>
Sent: Monday, January 08, 2007 10:54 PM
Subject: [Gdal-dev] Save/restore Geo from a TIFF with GDAL?


> In the GeoTIFF FAQ (http://remotesensing.org/geotiff/faq.html) under the
> entry "How do I preserve GeoTIFF info when editing my image?", it explains
> you can do this:
>
>   listgeo -no_norm original.tif > original.geo
>   geotifcp -g original.geo modified.tif modified_geotiff.tif
>
> For those of us with command-line tools from gdal but not from libgeotiff,
> is it possible to do the same?  I tried to figure out how to do it with
> gdal_translate, but it was not at all clear.
>
> Thanks,
> Ben
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From fniles at mitre.org  Tue Jan  9 14:44:45 2007
From: fniles at mitre.org (Frederick (Rick) A Niles)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Package review submitted for Fedora & NetCDF include path
Message-ID: <45A3F0AD.8080007@mitre.org>

OK, I got tried of waiting for someone else to do it.  I re-built SRPMS 
for GDAL and OGDI and posted them here: http://www.gnupooh.org/RPM

Then I requested package review in Red Hat's Bugzilla to have them added 
to Fedora.  

I just slightly modified SPEC files I got from one of the binary RPM 
sites listed on the GDAL page so I hope no-one will feel I'm stealing 
credit for them.  I just wanted to get it done.

Previously, Fedora didn't accept GDAL because there was a shared object 
conflict with GRASS.  Hopefully we can work past that.

Also, I couldn't build with "netcdf" because Fedora puts the CDF include 
files in "/usr/include/netcdf-3" and GDAL doesn't look there.  I could 
have put in a little hack patch to add "-I/usr/include/netcdf-3" to the 
Makefile, but I was hoping it could somehow be fixed upstream.   Can you 
have autoconf check for NETCDF in that location and have the Makefile 
modified to work with that include path?

Thanks,
Rick Niles.


From dany.geotools at gmail.com  Tue Jan  9 15:51:08 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Strange error during Driver.Create(String filename,
	...)
In-Reply-To: <45A3C80D.2070801@pobox.com>
References: <7221db410701090813l7d4438f1v8d3eb289d3b8698f@mail.gmail.com>
	<45A3C80D.2070801@pobox.com>
Message-ID: <7221db410701091251q5d67d73fh421ac5b004c09400@mail.gmail.com>

Thank you Frank.
I will investigate more deeply using your suggestion.

Just a simple question:
what do you think about the strange "filename" behaviour? (A file named
"D:\\blabla.ext" works while "D:\\myFolder\\blabla.ext" does not)

Thanks a lot.

Best regards,
Daniele



On 1/9/07, Frank Warmerdam < warmerdam@pobox.com> wrote:
>
> Daniele Romagnoli wrote:
> > However, using the SAME code within the body of the "write" method of
> > the MyJP2KImageWriter class (which extends ImageWriter), it does not
> work.
> > (Such a method will be called during an ImageWrite operation performed
> > using JAI-ImageIO toolkit).
>
> Daniele,
>
> I'm afraid I am unclear of the differences between the standalone JUnit
> test, and the MyJP2KImageWriter case.  Is, by any chance, the second
> running
> as a web service with different permissions than when run directly by you
> under your user account?
>
> > containing the code
> >
> > hFile = CreateFile( pszFilename, dwDesiredAccess, FILE_SHARE_READ |
> > FILE_SHARE_WRITE, NULL, dwCreationDisposition,  dwFlagsAndAttributes,
> > NULL );
> >
> > which makes hFile equal to INVALID_HANDLE_VALUE (By this reason, the
> > Open method returns NULL).
>
> You might want to copy some error reporting code similar to what is
> in the ::Seek() method (ifdef'ed out) into the ::Open() method in
> an attempt to see what errors windows is encountering.  Really the
> cpl_vsil_win32.cpp code should be querying win32 errors, and attempting
> to translate them into corresponding settings of the errno global so that
> higher up functions can try and report the errors.
>
> I will file a bug against GDAL about this, though it won't solve your
> problem.  At best it would help diagnose it more easily.
>
> I suspect the file creation is failing either:
>   o Because your failing case has different permissions.
>   o In your failing case the file already exists and is held open by
> something
>     so it cannot be overwritten/replaced.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
>
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070109/85f68d15/attachment.html
From dmorissette at mapgears.com  Tue Jan  9 16:16:16 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <459EE4CE.3080705@pobox.com>
References: <459EE4CE.3080705@pobox.com>
Message-ID: <45A40620.5080101@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a draft RFC 9 intended to cover how maintainers hired with
> GDAL sponsorship money will be administered.
> 
>   http://www.gdal.org/rfc9_maintainer.html
> 
> I'd appreciate feedback before I formally propose it.
> 

Perhaps one comment about the requirement for the maintainer to submit a 
detailed bi-weekly report on a public list. That sounds a bit annoying 
for the individual having to disclose his time usage in public without 
any real benefit for the list members. Would it not be enough to have 
the maintainer report directly to the supervisor? I think the sponsors 
and the PSC members are the only people who need to see that report and 
they could request a copy from the supervisor if/when they need one (or 
they could be automatically CC'd). The rest of the people on the list 
don't need to see that information.

Other than that the RFC looks great to me.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Tue Jan  9 17:24:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <45A40620.5080101@mapgears.com>
References: <459EE4CE.3080705@pobox.com> <45A40620.5080101@mapgears.com>
Message-ID: <45A41633.9060204@pobox.com>

Daniel Morissette wrote:
> Perhaps one comment about the requirement for the maintainer to submit a 
> detailed bi-weekly report on a public list. That sounds a bit annoying 
> for the individual having to disclose his time usage in public without 
> any real benefit for the list members. Would it not be enough to have 
> the maintainer report directly to the supervisor? I think the sponsors 
> and the PSC members are the only people who need to see that report and 
> they could request a copy from the supervisor if/when they need one (or 
> they could be automatically CC'd). The rest of the people on the list 
> don't need to see that information.
> 
> Other than that the RFC looks great to me.

Daniel,

My wish was to make the activities of the maintainer fairly clear to the
PSC and sponsors.  If it was by-request only I doubt it would often get
requested, and no one but the supervisor would really know what is going
on.

At least one report every other week won't add much to the traffic load
on gdal-dev.  Do you think it might be embarrasing or something to disclose
the timesheet?  That people might say "why doesn't it take this person so
to fix such a simple bug?" or something like that?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From webb.sprague at gmail.com  Tue Jan  9 17:36:42 2007
From: webb.sprague at gmail.com (Webb Sprague)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Gdal + python for map algebra script?
Message-ID: <b11ea23c0701091436q64f26e95q8f96f64a29a6ad28@mail.gmail.com>

Hi all,

I would like to use python gdal to write some simple raster analysis
scripts, but I am having a hard time getting started or knowing where
to get started.

My basic idea:  (1) delimit a single band raster file with a vector
polygon, (2) calculate the mean ("m") and stdev ("s") for the pixels
the area, (3) normalize each pixel within the polygon by subtracting m
and dviding by s, (4) writing out the new raster file, with
modifications within the delimiting polygon.

I would like a command line tool with filename as input (that is easy).

If someone could point me to a tutorial or something that would be great.

From dmorissette at mapgears.com  Tue Jan  9 17:52:48 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] RFC 9:  Paid Maintainer Guidelines
In-Reply-To: <45A41633.9060204@pobox.com>
References: <459EE4CE.3080705@pobox.com> <45A40620.5080101@mapgears.com>
	<45A41633.9060204@pobox.com>
Message-ID: <45A41CC0.1050308@mapgears.com>

Frank Warmerdam wrote:
> 
> My wish was to make the activities of the maintainer fairly clear to the
> PSC and sponsors.  If it was by-request only I doubt it would often get
> requested, and no one but the supervisor would really know what is going
> on.
> 

I agree that we need to keep the PSC and sponsors well informed and that 
providing the report only by request is not the best option. Perhaps a 
non-archived private list including the sponsors and PSC could be used 
for that kind of stuff?

> At least one report every other week won't add much to the traffic load
> on gdal-dev. 

Agreed.

> Do you think it might be embarrasing or something to disclose
> the timesheet?  That people might say "why doesn't it take this person so
> to fix such a simple bug?" or something like that?
> 

Yes, this kind of stuff, or any misuse of the information that could 
disadvantage the maintainer in his work with other clients unrelated to 
OSGeo. I know we have nothing to hide, but I just don't feel that 
disclosing that info on a public list brings any value to the community 
other than potentially hurting the contractor down the road if the 
information is misused.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From matt.gregory at oregonstate.edu  Tue Jan  9 18:57:48 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] newbie: Python issues with gdal-1.4.0/VC8/Python24
Message-ID: <EA53646512D0ED48AC1673034B861EE0AEC2B5@thuja>

I'm trying to compile GDAL with Python support on Windows using Visual C++ 8 (2005) and am banging my head against the wall.

In the nmake.opt file, I have set the following variables:
  
GDAL_HOME = C:\gdal-1.4.0
PY_INST_DIR = $(GDAL_HOME)\pymod
PYDIR = C:\Python24
VCDIR = C:\Program Files\Microsoft Visual Studio 8\VC

When I build, everything goes fine and I get what I would expect in the pymod directory (_gdal.dll, _gdal.exp, _gdal.lib).  I then include C:\Python24 in my PATH and C:\gdal-1.4.0\pymod in my PYTHONPATH.

When I try to run a sample Python script (e.g. "python rgb2pct.py"), I get the error message:

  Traceback (most recent call last):
    File "rgb2pct.py", line 50, in ?
      import gdal
    File "C:\gdal-1.4.0\pymod\gdal.py", line 191, in ?
      import _gdal
  ImportError: DLL load failed: The specified module could not be found.

I've compared _gdal.dll to the one found in a version that works (ie. the FWTools distribution) using "dumpbin /exports" and they look to have the same symbols.  This may be a na?ve way of comparison, I'm guessing.

Note that my Python distribution came shipped with ArcGIS 9.2.  I don't think that would cause any issues, though.

I'm likely doing something very stupid, but I'm stumped.

thanks, matt

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From simboss1 at gmail.com  Tue Jan  9 20:08:51 2007
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG:32111
Message-ID: <961f4d9e0701091708g35712b63x3fb843e394fc1f43@mail.gmail.com>

Hi all,
a quick curiosity.
I have a geotiff that claims to be in EPSG:32111 crs. The out put of
gdalinfo on it is as follows:

Driver: GTiff/GeoTIFF
Size is 8745, 5055
Coordinate System is:
PROJCS["NAD83 / New Jersey",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",38.83333333333334],
    PARAMETER["central_meridian",-74.5],
    PARAMETER["scale_factor",0.9999],
    PARAMETER["false_easting",492125],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]],
    AUTHORITY["EPSG","32111"]]
Origin = (343005.000000000000000,435015.000000000000000)
Pixel Size = (1.000000000000000,-0.999999999000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=0
  TIFFTAG_YRESOLUTION=0
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  343005.000,  435015.000) ( 75d 1'57.07"W, 40d 1'35.41"N)
Lower Left  (  343005.000,  429960.000) ( 75d 1'56.68"W, 40d 0'45.46"N)
Upper Right (  351750.000,  435015.000) ( 75d 0'4.65"W, 40d 1'35.92"N)
Lower Right (  351750.000,  429960.000) ( 75d 0'4.28"W, 40d 0'45.96"N)
Center      (  347377.500,  432487.500) ( 75d 1'0.67"W, 40d 1'10.69"N)
Band 1 Block=8745x1 Type=Byte, ColorInterp=Red
Band 2 Block=8745x1 Type=Byte, ColorInterp=Green
Band 3 Block=8745x1 Type=Byte, ColorInterp=Blue

Anyway if I check the EPSG SQL db I have in postgresql I see that the
definition of the unit of measure is meters.

I assume there has to be one and oly one EPSG:32111, hence how it
comes that I get two different definitions each claiming to be 32111?

I am using fwtools 1.1.3.

Thx,
Simone.

-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions

http://www.geo-solutions.it

-------------------------------------------------------

From dylan.beaudette at gmail.com  Tue Jan  9 20:49:43 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Gdal + python for map algebra script?
In-Reply-To: <b11ea23c0701091436q64f26e95q8f96f64a29a6ad28@mail.gmail.com>
References: <b11ea23c0701091436q64f26e95q8f96f64a29a6ad28@mail.gmail.com>
Message-ID: <200701091749.43373.dylan.beaudette@gmail.com>

On Tuesday 09 January 2007 14:36, Webb Sprague wrote:
> Hi all,
>
> I would like to use python gdal to write some simple raster analysis
> scripts, but I am having a hard time getting started or knowing where
> to get started.
>
> My basic idea:  (1) delimit a single band raster file with a vector
> polygon, (2) calculate the mean ("m") and stdev ("s") for the pixels
> the area, (3) normalize each pixel within the polygon by subtracting m
> and dviding by s, (4) writing out the new raster file, with
> modifications within the delimiting polygon.
>
> I would like a command line tool with filename as input (that is easy).
>
> If someone could point me to a tutorial or something that would be great.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

Hi again Webb,

I highly recommend GRASS and starspan for these types of analysis. Check 
around in the archives for the GDAL and GRASS lists for some fun examples.

cheers,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From dpinte at itae.be  Wed Jan 10 03:38:14 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] newbie: Python issues with gdal-1.4.0/VC8/Python24
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0AEC2B5@thuja>
References: <EA53646512D0ED48AC1673034B861EE0AEC2B5@thuja>
Message-ID: <1168418294.30935.5.camel@geru-itae>

Le mardi 09 janvier 2007 ? 15:57 -0800, Gregory, Matthew a ?crit :
> I'm trying to compile GDAL with Python support on Windows using Visual C++ 8 (2005) and am banging my head against the wall.
> 
> In the nmake.opt file, I have set the following variables:
>   
> GDAL_HOME = C:\gdal-1.4.0
> PY_INST_DIR = $(GDAL_HOME)\pymod
> PYDIR = C:\Python24
> VCDIR = C:\Program Files\Microsoft Visual Studio 8\VC
> 
> When I build, everything goes fine and I get what I would expect in the pymod directory (_gdal.dll, _gdal.exp, _gdal.lib).  I then include C:\Python24 in my PATH and C:\gdal-1.4.0\pymod in my PYTHONPATH.
> 
> When I try to run a sample Python script (e.g. "python rgb2pct.py"), I get the error message:
> 
>   Traceback (most recent call last):
>     File "rgb2pct.py", line 50, in ?
>       import gdal
>     File "C:\gdal-1.4.0\pymod\gdal.py", line 191, in ?
>       import _gdal
>   ImportError: DLL load failed: The specified module could not be found.

I guess you have to add the C:\gdal-1.4.0\pymod to your PATH too.

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070110/6c590034/attachment.bin
From mateusz at loskot.net  Wed Jan 10 03:44:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] "gdalce.dll" & "gdalce_i.lib" for CE
In-Reply-To: <d8b8d6400701100029t48611be1xae93f5c27f4385d3@mail.gmail.com>
References: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>	
	<45A392D1.5040601@loskot.net>
	<d8b8d6400701100029t48611be1xae93f5c27f4385d3@mail.gmail.com>
Message-ID: <45A4A786.2090600@loskot.net>

Avi wrote:
> 
> Ok,
> 
> before choose any option I must put a "include <gdal_priv.h>" (for
> example) to use GDALDataset (for example)??

For every DLL library, there is header file provided.
The header brings function prototypes and types definition.
DLL binary brings only implementation stuff.
So, in your application, you need first to include the header somewhere
to tell your code where particular declaration is from.
Next, you link your application with DLL (in fact, import library) to
tell where are function implemenations etc.


> I can?t use the library.

Why?

> (Sorry, but I never build a dll, always I added a reference).

What do you mean as a reference?
I only know 'reference' as for .NET projects.
In C++, there are dependencies between projects and libraries.

OT: I wonder why Microsoft introduced new and confusing
name - reference - as logically it represents a dependency.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dpinte at itae.be  Wed Jan 10 03:38:14 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] newbie: Python issues with gdal-1.4.0/VC8/Python24
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0AEC2B5@thuja>
References: <EA53646512D0ED48AC1673034B861EE0AEC2B5@thuja>
Message-ID: <1168418294.30935.5.camel@geru-itae>

Le mardi 09 janvier 2007 ? 15:57 -0800, Gregory, Matthew a ?crit :
> I'm trying to compile GDAL with Python support on Windows using Visual C++ 8 (2005) and am banging my head against the wall.
> 
> In the nmake.opt file, I have set the following variables:
>   
> GDAL_HOME = C:\gdal-1.4.0
> PY_INST_DIR = $(GDAL_HOME)\pymod
> PYDIR = C:\Python24
> VCDIR = C:\Program Files\Microsoft Visual Studio 8\VC
> 
> When I build, everything goes fine and I get what I would expect in the pymod directory (_gdal.dll, _gdal.exp, _gdal.lib).  I then include C:\Python24 in my PATH and C:\gdal-1.4.0\pymod in my PYTHONPATH.
> 
> When I try to run a sample Python script (e.g. "python rgb2pct.py"), I get the error message:
> 
>   Traceback (most recent call last):
>     File "rgb2pct.py", line 50, in ?
>       import gdal
>     File "C:\gdal-1.4.0\pymod\gdal.py", line 191, in ?
>       import _gdal
>   ImportError: DLL load failed: The specified module could not be found.

I guess you have to add the C:\gdal-1.4.0\pymod to your PATH too.

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070110/6c590034/attachment-0001.bin
From mateusz at loskot.net  Wed Jan 10 05:57:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: Fwd: [Gdal-dev] "gdalce.dll" & "gdalce_i.lib" for CE
In-Reply-To: <d8b8d6400701100245i64116014m1c67c6dc9f7304a5@mail.gmail.com>
References: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>	
	<45A392D1.5040601@loskot.net>	
	<d8b8d6400701100029t48611be1xae93f5c27f4385d3@mail.gmail.com>	
	<45A4A786.2090600@loskot.net>	
	<d8b8d6400701100155m37c0c4e4wd80dc6020e077ecb@mail.gmail.com>	
	<d8b8d6400701100159r442d2a4ds64eb21f482cacc8e@mail.gmail.com>	
	<d8b8d6400701100205w5b34909al654320135f673dda@mail.gmail.com>
	<d8b8d6400701100245i64116014m1c67c6dc9f7304a5@mail.gmail.com>
Message-ID: <45A4C6B2.2070606@loskot.net>

Avi wrote:
> My purpose is to create a new project in C# for pocket PC2003 in VS8
> using GDAL, the confusion comes from there.(reference-dependency).

A reference is a name of dependency used in .NET world.
Dependency is used in all other worlds :-)

For example,

library A is a dependency for client application B.

When both projects for A and B are added to the same solution in Visual
C++, then you need to check A as a dependency for project B.
Then, the project A will be built first, before B,
so B will get ready to use library A.

> I build gdalce.dll separately and add gdalce_i.lib to linker
> input(Additional Library Directories/ Additional Dependencies) in my new
> project C++.
> 
> In this new project, I include the header files ".h" in the main cpp
> file. I believe that I would have to be able to use GDAL. Cannot open
> include file.

For headers, you need to configure include directories path so,
Visual C++ can locate header files.

Go to Project -> Properties -> Configuration Properties -> C/C++
Here, add paths Additional Include Directories.

What paths to add?

The best way to get them is to look at this property of
gdalce_dll.vcproj. Check value of Additional Include Directories for
gdalce_dll project. There you will find:

$(GDAL_DIR)\port, $(GDAL_DIR)\core, etc.

$(GDAL_DIR) is a macro which expands to the full path to the gdal-1.4.0
sources. NOTE: This macro is *ONLY* available for gdalce_dll project.
So, for your new project, for your application, replace it with full
path to the gdal-1.4.0 sources.

For example, your Additional Include Directories will get:

C:\sdk\gdal-1.4.0\port;C:\sdk\gdal-1.4.0\gcore;....

assuming you have GDAL in C:\sdk\gdal-1.4.0


I'm sorry, but I'm not able to include more complete manual about how to
use Visual C++ and how to configure Visual C++ projects, in the GDAL for
Windows CE guide.
So, for more details about using VC++, please refer MSDN, for example:

http://msdn2.microsoft.com/en-us/library/ms235422(VS.80).aspx


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From simboss1 at gmail.com  Wed Jan 10 07:58:40 2007
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Linear units problem,
	feets or meters? (sorry for cross-posting)
Message-ID: <961f4d9e0701100458y7ebf5a70u273ca50c3ce71139@mail.gmail.com>

Hi list,
I am writing because I would like to have some feedback on an issue I
ran into yesterday.

I was supplied with a GeoTiff file whose tiff tags are dumped here below.


    <TIFFField number="34735" name="GeoKeyDirectory">
      <TIFFShorts>
        <TIFFShort value="1"/>
        <TIFFShort value="1"/>
        <TIFFShort value="0"/>
        <TIFFShort value="12"/>
        <TIFFShort value="1024"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="1"/>
        <TIFFShort value="1025"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="1"/>
        <TIFFShort value="2050"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="6269"/>
        <TIFFShort value="2056"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="7019"/>
        <TIFFShort value="3072"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="32111"/>
        <TIFFShort value="3073"/>
        <TIFFShort value="34737"/>
        <TIFFShort value="80"/>
        <TIFFShort value="0"/>
        <TIFFShort value="3076"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="9003"/>
        <TIFFShort value="3080"/>
        <TIFFShort value="34736"/>
        <TIFFShort value="1"/>
        <TIFFShort value="0"/>
        <TIFFShort value="3081"/>
        <TIFFShort value="34736"/>
        <TIFFShort value="1"/>
        <TIFFShort value="1"/>
        <TIFFShort value="3082"/>
        <TIFFShort value="34736"/>
        <TIFFShort value="1"/>
        <TIFFShort value="2"/>
        <TIFFShort value="3083"/>
        <TIFFShort value="34736"/>
        <TIFFShort value="1"/>
        <TIFFShort value="3"/>
        <TIFFShort value="3092"/>
        <TIFFShort value="34736"/>
        <TIFFShort value="1"/>
        <TIFFShort value="4"/>
      </TIFFShorts>
    </TIFFField>
    <TIFFField number="34736" name="GeoDoubleParams">
      <TIFFDoubles>
        <TIFFDouble value="-74.5"/>
        <TIFFDouble value="38.8333333"/>
        <TIFFDouble value="1614580.1"/>
        <TIFFDouble value="0.0"/>
        <TIFFDouble value="0.9999"/>
      </TIFFDoubles>
    </TIFFField>
    <TIFFField number="34737" name="GeoAsciiParams">
      <TIFFAsciis>
        <TIFFAscii value="State Plane Coordinate System 1983; North
American 1983; GRS80; Zone New Jersey|"/>
      </TIFFAsciis>
    </TIFFField>

What seems strange to me about these tags is that it is clearly
declared that this image is using EPSG:32111 whose standard
description is as follows:

PROJCS["NAD83 / New Jersey",
  GEOGCS["NAD83",
    DATUM["North American Datum 1983",
      SPHEROID["GRS 1980", 6378137.0, 298.257222101, AUTHORITY["EPSG","7019"]],
      TOWGS84[1.0, 1.0, -1.0, 0.0, 0.0, 0.0, 0.0],
      AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]],
    UNIT["degree", 0.017453292519943295],
    AXIS["Geodetic longitude", EAST],
    AXIS["Geodetic latitude", NORTH],
    AUTHORITY["EPSG","4269"]],
  PROJECTION["Transverse Mercator", AUTHORITY["EPSG","9807"]],
  PARAMETER["central_meridian", -74.5],
  PARAMETER["latitude_of_origin", 38.833333333333336],
  PARAMETER["scale_factor", 0.9999],
  PARAMETER["false_easting", 150000.0],
  PARAMETER["false_northing", 0.0],
  UNIT["m", 1.0],
  AXIS["Easting", EAST],
  AXIS["Northing", NORTH],
  AUTHORITY["EPSG","32111"]]

while if I check the tags in the geodir I see that a bunch of
information in addition to the CRS itself are provided, like as an
instance:

GeogGeodeticDatumGeoKey
        <TIFFShort value="2050"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="6269"/>


GeogEllipsoidGeoKey
        <TIFFShort value="2056"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="7019"/>

ProjLinearUnitsGeoKey
        <TIFFShort value="3076"/>
        <TIFFShort value="0"/>
        <TIFFShort value="1"/>
        <TIFFShort value="9003"/>

I checked the geotiff with gdal (the one shipped with fwtools 1.1.3)
and I got the following WKT

PROJCS["NAD83 / New Jersey",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",38.83333333333334],
    PARAMETER["central_meridian",-74.5],
    PARAMETER["scale_factor",0.9999],
    PARAMETER["false_easting",492125],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]],
    AUTHORITY["EPSG","32111"]]

while the EPSG file contains the following line for the proj params:
<32111> +proj=tmerc +lat_0=38.83333333333334 +lon_0=-74.5 +k=0.999900
+x_0=150000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs  <>


Note that the proj params are equivalent to the EPSG WKT while the WKT
I get fom GDAL has a different unit of measure definition.

I am wondering what is the right way to manage such geodirectory. Here
you have some thoughts:

>I always thought that when a GCS or a PCS is explicitly defined (like
we do here for EPSG:32111) we should go with it
>I could interpret this case as "modify the EPSG:32111" PCS with the
provided params" hence change the unit of measure. Anyway, IMHO, if I
do this (like I guess GDAL is doing) I think I should not state
anymore that this CRS is EPSG:32111 but I should be creating a
user-define PCS.
>Is this issue related to the old thread from early 2006 in the
geotiff ml with regard to handling feet UoM?


Sorry again for cross-posting, I am hoping to get some information on
this issue.
Regards,
Simone.

-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions

http://www.geo-solutions.it

-------------------------------------------------------

From Colin.Gowens at CH2M.com  Wed Jan 10 08:13:03 2007
From: Colin.Gowens at CH2M.com (Colin.Gowens@CH2M.com)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] RE: Package review submitted for Fedora & NetCDF
In-Reply-To: <200701092116.l09LGgfW024087@duke.maptools.org>
Message-ID: <4F3EC7C88BBA04409E2B5B1D0D1639E10137D8AE@CATSKILL.amr.ch2m.com>

Is GDAL not packaged with Fedora?  So what is the preferred free OS for
use with GDAL / GRASS / Mapserver configuration?

Colin

-------------
Date: Tue, 09 Jan 2007 14:44:45 -0500
From: "Frederick (Rick) A Niles" <fniles@mitre.org>
Subject: [Gdal-dev] Package review submitted for Fedora & NetCDF
	include path
To: gdal-dev@lists.maptools.org
Message-ID: <45A3F0AD.8080007@mitre.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

OK, I got tried of waiting for someone else to do it.  I re-built SRPMS 
for GDAL and OGDI and posted them here: http://www.gnupooh.org/RPM

Then I requested package review in Red Hat's Bugzilla to have them added

to Fedora.  

I just slightly modified SPEC files I got from one of the binary RPM 
sites listed on the GDAL page so I hope no-one will feel I'm stealing 
credit for them.  I just wanted to get it done.

Previously, Fedora didn't accept GDAL because there was a shared object 
conflict with GRASS.  Hopefully we can work past that.

Also, I couldn't build with "netcdf" because Fedora puts the CDF include

files in "/usr/include/netcdf-3" and GDAL doesn't look there.  I could 
have put in a little hack patch to add "-I/usr/include/netcdf-3" to the 
Makefile, but I was hoping it could somehow be fixed upstream.   Can you

have autoconf check for NETCDF in that location and have the Makefile 
modified to work with that include path?

Thanks,
Rick Niles.



------------------------------



From mateusz at loskot.net  Wed Jan 10 08:55:15 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: Fwd: [Gdal-dev] "gdalce.dll" & "gdalce_i.lib" for CE
In-Reply-To: <d8b8d6400701100529p63a3e8b2ga7f4f41afcd6ffac@mail.gmail.com>
References: <d8b8d6400701090354k4b2a2c2as6b766a3e066f1204@mail.gmail.com>	
	<45A392D1.5040601@loskot.net>	
	<d8b8d6400701100029t48611be1xae93f5c27f4385d3@mail.gmail.com>	
	<45A4A786.2090600@loskot.net>	
	<d8b8d6400701100155m37c0c4e4wd80dc6020e077ecb@mail.gmail.com>	
	<d8b8d6400701100159r442d2a4ds64eb21f482cacc8e@mail.gmail.com>	
	<d8b8d6400701100205w5b34909al654320135f673dda@mail.gmail.com>	
	<d8b8d6400701100245i64116014m1c67c6dc9f7304a5@mail.gmail.com>	
	<45A4C6B2.2070606@loskot.net>
	<d8b8d6400701100529p63a3e8b2ga7f4f41afcd6ffac@mail.gmail.com>
Message-ID: <45A4F043.1090005@loskot.net>

Avi wrote:
> The additional include directories had already modified them to
> found this headers.

Avi,

Cool!

> Also, I had modified the path environment variable. 

This step is not needed, because project settings are enough to make it
working.

>  All the dependences are all right.  "Myproject" to "gdalce_dll".
> "gdalce_dll" to "wcelibcex_lib".

Yes, exactly.

> I will continue looking for.
> 
> Thanks for your time. Excuse me the troubles.

No troubles, no problem.

ASAP, I'll try to update the guide and add some example of simple
application using GDAL.

Thanks a lot for trying the GDAL for Windows CE!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mhanson at photon.com  Wed Jan 10 11:34:32 2007
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:35 2007
Subject: Error when embedding Manifest? (Was RE: [Gdal-dev] Link Error in 1.4
	with MSVC8)
References: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>
	<45A3D49E.4050107@pobox.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D702786C9@pj-exchange.photon.com>

Frank, glad I could serve as the impetus for you to take some game-time.
 
It occured to me the linking problem was most likely due to our own format I included....is the ISIS2 dataset a new one?   If so that would explain it as I had modified versions of makefiles to include our own format.
 
 
So I went back to the original GDAL package, but am getting another error.   I seem to recall someone saying the manifest was going to be embedded in the DLL now - is this the step it occurs at?   Hmmm, could this be another case where it's looking for the MS version of mt and getting confused by my cygwin install?   (like it does with link).
 
The error:
 
   Creating library gdal_i.lib and object gdal_i.exp
        if exist gdal14.dll.manifest mt -manifest gdal14.dll.manifest -outputresource:gdal14.dll;2
mt: unknown option -- m
usage: mt [-V] [-f device] operation [count]
NMAKE : fatal error U1077: 'if' : return code '0x1'
Stop.

 
matt
 
 

________________________________

From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tue 1/9/2007 12:45 PM
To: Matt Hanson
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Link Error in 1.4 with MSVC8



Matt Hanson wrote:
> Hi, I'm getting a linking error when compiling in MSVC8 (using nmake)
>
> Any suggestions?
>
> matt
>
>
> Creating library gdal_i.lib and object gdal_i.exp isis2dataset.obj : error
> LNK2019: unresolved external symbol "public: __thiscall
> NASAKeywordHandler::~NASAKeywordHandler(void)"
> (??1NASAKeywordHandler@@QAE@XZ) referenced in function "public: virtual
> __thiscall ISIS2Dataset::~ISIS2Dataset(void)" (??1ISIS2Dataset@@UAE@XZ)
> isis2dataset.obj : error LNK2019: unresolved external symbol "public:
> __thiscall NASAKeywordHandler::NASAKeywordHandler(void)"
> (??0NASAKeywordHandler@@QAE@XZ) referenced in function "public: __thiscall
> ISIS2Dataset::ISIS2Dataset(void)" (??0ISIS2Dataset@@QAE@XZ) isis2dataset.obj
> : error LNK2019: unresolved external symbol "public: int __thiscall
> NASAKeywordHandler::Ingest(struct _iobuf *,int)"
> (?Ingest@NASAKeywordHandler@@QAEHPAU_iobuf@@H@Z) referenced in function
> "public: static class GDALDataset * __cdecl ISIS2Dataset::Open(class
> GDALOpenInfo *)" (?Open@ISIS2Dataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
>  isis2dataset.obj : error LNK2019: unresolved external symbol "public: char
> const * __thiscall NASAKeywordHandler::GetKeyword(char const *,char const
> *)" (?GetKeyword@NASAKeywordHandler@@QAEPBDPBD0@Z) referenced in function
> "private: char const * __thiscall ISIS2Dataset::GetKeyword(char const *,char
> const *)" (?GetKeyword@ISIS2Dataset@@AAEPBDPBD0@Z) gdal14.dll : fatal error
> LNK1120: 4 unresolved externals NMAKE : fatal error U1077: '"c:\Program
> Files\Microsoft Visual Studio 8\VC\BIN\link.EXE"' : return code '0x460'
> Stop.

Matt,

I took me four hours, but was unable to reproduce this problem with VC8.

Well, ok, the four hours really was 2 minutes to reboot to windows,
10 minutes to try out my VC8 build, and then 3 hours and 48 minutes
playing Colonization - but proximity to games is one of the reasons
I hesitate to work on windows!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org <http://osgeo.org/> 





From mhanson at photon.com  Wed Jan 10 11:44:37 2007
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:35 2007
Subject: Error when embedding Manifest? (Was RE: [Gdal-dev] Link Error in
	1.4 with MSVC8)
References: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>
	<45A3D49E.4050107@pobox.com>
	<0719BE42F22E0A46857DF72644EC5D702786C9@pj-exchange.photon.com>
Message-ID: <0719BE42F22E0A46857DF72644EC5D702786CA@pj-exchange.photon.com>

Strike that last email.  I was obviously on the right track and should have tested them out before posting.   It really should have struck me right away that I was on cygwin and why would nmake require access to a magnetic tape drive??!    ha, it's been some years since using mt.     GDAL compiled fine now.   Just need to get it running with our new driver.   So is ISIS2 a new format?  That would explain my problems before, just need to update some makefiles I think.

________________________________

From: Matt Hanson
Sent: Wed 1/10/2007 11:34 AM
To: Gdal-dev@lists.maptools.org
Subject: Error when embedding Manifest? (Was RE: [Gdal-dev] Link Error in 1.4 with MSVC8)


Frank, glad I could serve as the impetus for you to take some game-time.
 
It occured to me the linking problem was most likely due to our own format I included....is the ISIS2 dataset a new one?   If so that would explain it as I had modified versions of makefiles to include our own format.
 
 
So I went back to the original GDAL package, but am getting another error.   I seem to recall someone saying the manifest was going to be embedded in the DLL now - is this the step it occurs at?   Hmmm, could this be another case where it's looking for the MS version of mt and getting confused by my cygwin install?   (like it does with link).
 
The error:
 
   Creating library gdal_i.lib and object gdal_i.exp
        if exist gdal14.dll.manifest mt -manifest gdal14.dll.manifest -outputresource:gdal14.dll;2
mt: unknown option -- m
usage: mt [-V] [-f device] operation [count]
NMAKE : fatal error U1077: 'if' : return code '0x1'
Stop.

 
matt
 
 

________________________________

From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tue 1/9/2007 12:45 PM
To: Matt Hanson
Cc: Gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Link Error in 1.4 with MSVC8



Matt Hanson wrote:
> Hi, I'm getting a linking error when compiling in MSVC8 (using nmake)
>
> Any suggestions?
>
> matt
>
>
> Creating library gdal_i.lib and object gdal_i.exp isis2dataset.obj : error
> LNK2019: unresolved external symbol "public: __thiscall
> NASAKeywordHandler::~NASAKeywordHandler(void)"
> (??1NASAKeywordHandler@@QAE@XZ) referenced in function "public: virtual
> __thiscall ISIS2Dataset::~ISIS2Dataset(void)" (??1ISIS2Dataset@@UAE@XZ)
> isis2dataset.obj : error LNK2019: unresolved external symbol "public:
> __thiscall NASAKeywordHandler::NASAKeywordHandler(void)"
> (??0NASAKeywordHandler@@QAE@XZ) referenced in function "public: __thiscall
> ISIS2Dataset::ISIS2Dataset(void)" (??0ISIS2Dataset@@QAE@XZ) isis2dataset.obj
> : error LNK2019: unresolved external symbol "public: int __thiscall
> NASAKeywordHandler::Ingest(struct _iobuf *,int)"
> (?Ingest@NASAKeywordHandler@@QAEHPAU_iobuf@@H@Z) referenced in function
> "public: static class GDALDataset * __cdecl ISIS2Dataset::Open(class
> GDALOpenInfo *)" (?Open@ISIS2Dataset@@SAPAVGDALDataset@@PAVGDALOpenInfo@@@Z)
>  isis2dataset.obj : error LNK2019: unresolved external symbol "public: char
> const * __thiscall NASAKeywordHandler::GetKeyword(char const *,char const
> *)" (?GetKeyword@NASAKeywordHandler@@QAEPBDPBD0@Z) referenced in function
> "private: char const * __thiscall ISIS2Dataset::GetKeyword(char const *,char
> const *)" (?GetKeyword@ISIS2Dataset@@AAEPBDPBD0@Z) gdal14.dll : fatal error
> LNK1120: 4 unresolved externals NMAKE : fatal error U1077: '"c:\Program
> Files\Microsoft Visual Studio 8\VC\BIN\link.EXE"' : return code '0x460'
> Stop.

Matt,

I took me four hours, but was unable to reproduce this problem with VC8.

Well, ok, the four hours really was 2 minutes to reboot to windows,
10 minutes to try out my VC8 build, and then 3 hours and 48 minutes
playing Colonization - but proximity to games is one of the reasons
I hesitate to work on windows!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org <http://osgeo.org/> 





From mateusz at loskot.net  Wed Jan 10 12:02:57 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: Error when embedding Manifest? (Was RE: [Gdal-dev] Link Error
	in 1.4	with MSVC8)
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D702786C9@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>	<45A3D49E.4050107@pobox.com>
	<0719BE42F22E0A46857DF72644EC5D702786C9@pj-exchange.photon.com>
Message-ID: <45A51C41.3070607@loskot.net>

Matt Hanson wrote:
> 
> Creating library gdal_i.lib and object gdal_i.exp if exist
> gdal14.dll.manifest mt -manifest gdal14.dll.manifest
> -outputresource:gdal14.dll;2 mt: unknown option -- m
> usage: mt [-V]
> [-f device] operation [count] NMAKE : fatal error U1077: 'if' :
> return code '0x1' Stop.

Matt,

I suppose wrong 'mt' command is called.
For manifest action Microsoft's 'mt' is required, so try to run in
command line following command and compare the first lines of the output:

C:\>mt /?
Microsoft (R) Manifest Tool version 5.2.3790.2014
Copyright (c) Microsoft Corporation 2005.
...


>From the "usage" info in the error message above, I assume Unix 'mt'
command is called taht's actually a utility to control magnetic tape drive.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Jan 10 12:14:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: Error when embedding Manifest? (Was RE: [Gdal-dev] Link Error
	in 1.4 with MSVC8)
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D702786CA@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D702786C6@pj-exchange.photon.com>
	<45A3D49E.4050107@pobox.com>
	<0719BE42F22E0A46857DF72644EC5D702786C9@pj-exchange.photon.com>
	<0719BE42F22E0A46857DF72644EC5D702786CA@pj-exchange.photon.com>
Message-ID: <45A51EEE.1040200@pobox.com>

Matt Hanson wrote:
> Strike that last email.  I was obviously on the right track and should have
> tested them out before posting.   It really should have struck me right away
> that I was on cygwin and why would nmake require access to a magnetic tape
> drive??!    ha, it's been some years since using mt.     GDAL compiled fine
> now.   Just need to get it running with our new driver.   So is ISIS2 a new
> format?  That would explain my problems before, just need to update some
> makefiles I think. ev mailing list Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev

Matt,

ISIS2 was a new format in GDAL 1.3.2 but it is partnered with the very new
PDS format with which it shares some code.  However these should already be
reflected in the Makefile.vc in the gdal/frmts/raw directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.gregory at oregonstate.edu  Wed Jan 10 14:15:18 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: newbie: Python issues with gdal-1.4.0/VC8/Python24
In-Reply-To: <200701101059.l0AAx07e002577@duke.maptools.org>
Message-ID: <EA53646512D0ED48AC1673034B861EE0AEC2B8@thuja>

Didrik wrote:

> I guess you have to add the C:\gdal-1.4.0\pymod to your PATH too.

Hi Didrik,

Thanks for your reply.

I apologize that I forgot to mention that I had tried this as well, but
without success.  And judging by the way Frank has set up the setfw.bat
in FWTOOLS, it didn't look like this was a needed path inclusion.

Since I last posted, I have tried to compile with Python 2.5, also
without success.  

Could someone clarify where the _gdal module is supposed to be found?  I
was under the impression that it was in _gdal.dll, but perhaps I'm
totally clueless.

matt




From Chris.Barker at noaa.gov  Wed Jan 10 17:39:48 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Gdal + python for map algebra script?
In-Reply-To: <b11ea23c0701091436q64f26e95q8f96f64a29a6ad28@mail.gmail.com>
References: <b11ea23c0701091436q64f26e95q8f96f64a29a6ad28@mail.gmail.com>
Message-ID: <45A56B34.9000006@noaa.gov>

Python should work well for this, but I do have question:

> My basic idea:  (1) delimit a single band raster file with a vector
> polygon, 

What does it mean to delimit a raster file with a polygon?

Anyway, you'll probably want to use numpy to help with this kind of 
number crunching. I'm not sure the status of the gdal Python bindings 
and numpy, but you can get the raster data into a numpy array one way or 
another.

Here's some example code that might help:

This puts the RBG data in a numpy array
        ## XY is the coords of the corner of the part of the image you
        ## want, (0,0) if you want the whole thing
        ## WH is the size of the piece of the image you want:
        ##   (Width, Height)
        ## NewWH is the size you want the output image at:
        ##   (Width, Height)
        DataRect = N.zeros((NewWH[0],NewWH[1],3), N.uint8)
        for i in range(3):
             Band = self.Dataset.GetRasterBand(i+1)
             color = Band.ReadRaster( XY[0], # nXOff
                                      XY[1], # nYOff
                                      WH[0], # nXSize
                                      WH[1], # nYSize
                                      NewWH[0], #nBufXSize
                                      NewWH[1], #nBufYSize
                                      GDT_Byte, # data type
                                      )
             # put it in the numpy array:
             DataRect[:,:,i] = N.fromstring(color,N.uint8).reshape(NewWH)


-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From Chris.Barker at noaa.gov  Wed Jan 10 17:41:00 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: newbie: Python issues with gdal-1.4.0/VC8/Python24
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0AEC2B8@thuja>
References: <EA53646512D0ED48AC1673034B861EE0AEC2B8@thuja>
Message-ID: <45A56B7C.8050701@noaa.gov>


>> I guess you have to add the C:\gdal-1.4.0\pymod to your PATH too.

wouldn't that be PYTHONPATH?

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From mitchelljj98 at gmail.com  Wed Jan 10 19:17:15 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
Message-ID: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>

Hi,

What is the EPSG for Virginia State Plane North NAD83 Units: feet.

I tried EPSG:102746 within gdalwarp and it said that the SRS failed.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070110/b1f28e95/attachment.html
From bryan at geomega.com  Wed Jan 10 19:32:59 2007
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
Message-ID: <45A585BB.9060102@geomega.com>

John Mitchell wrote:
> Hi,
> 
> What is the EPSG for Virginia State Plane North NAD83 Units: feet.
> 
> I tried EPSG:102746 within gdalwarp and it said that the SRS failed.
> 
> Thanks,

John,

Try EPSG:2283

I found that by looking at the epsg file:

 >grep -i -n virginia epsg
1381:# NAD83 / Virginia North (ftUS)
1383:# NAD83 / Virginia South (ftUS)
2531:# NAD83(HARN) / Virginia North
... clip ...

 >head -n 1382 epsg | tail -n 2
# NAD83 / Virginia North (ftUS)
<2283> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333 
+lat_0=37.66666666666666 +
lon_0=-78.5 +x_0=3500000.0001016 +y_0=2000000.0001016 +ellps=GRS80 
+datum=NAD83
+to_meter=0.3048006096012192 +no_defs  <>

Bryan

> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From aaronr at z-pulley.com  Wed Jan 10 19:43:00 2007
From: aaronr at z-pulley.com (Aaron Racicot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <fa2ac0580701101631g27145f7ek8a4c839417f06d49@mail.gmail.com>
Message-ID: <000f01c73519$72a94960$6501a8c0@bernie>

Yep.

 

On a linux install of proj you can find the master list at
/usr/local/share/proj/epsg.

 

With a simple grep you can find all codes dealing with Virginia:

 

[aaronr@pearl sca_mapserver]$ grep -i -A 1 virginia
/usr/local/share/proj/epsg

 

Hope this helps.

 

A

+----------------------------------------+
 Aaron Racicot - GIS Programmer  
 360.221.2441 - aaronr@ecotrust.org         
+----------------------------------------+
 e c o t r u s t                       
 pobox 1614
 langley wa 98260
 www.ecotrust.org                      
+----------------------------------------+ 

-----Original Message-----
From: John Mitchell [mailto:mitchelljj98@gmail.com] 
Sent: Wednesday, January 10, 2007 4:31 PM
To: Aaron Racicot
Subject: Re: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units:
feet

 

Aaron, so the EPSG code is 2283?

On 1/10/07, Aaron Racicot <aaronr@z-pulley.com> wrote:

>From the Proj4 EPSG file:

 

# NAD83 / Virginia North (ftUS)

<2283> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
+lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000.0001016
+y_0=2000000.0001016 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192
+no_defs  <>

 

A

+----------------------------------------+
 Aaron Racicot - GIS Programmer  
 360.221.2441 - aaronr@ecotrust.org         
+----------------------------------------+
 e c o t r u s t                       
 pobox 1614 
 langley wa 98260
 www.ecotrust.org                      
+----------------------------------------+ 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Mitchell
Sent: Wednesday, January 10, 2007 4:17 PM 
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet

 

Hi,

What is the EPSG for Virginia State Plane North NAD83 Units: feet.

I tried EPSG:102746 within gdalwarp and it said that the SRS failed.

Thanks,

-- 
John J. Mitchell 




-- 
John J. Mitchell 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070110/afe994a8/attachment.html
From mitchelljj98 at gmail.com  Wed Jan 10 19:49:14 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <45A585BB.9060102@geomega.com>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
	<45A585BB.9060102@geomega.com>
Message-ID: <fa2ac0580701101649t92f0847m1b48b126249fff19@mail.gmail.com>

I tried 2283 within gdalwarp and now I get the error "too many points (441
out of 441) failed to transform".
gdalwarp -s_srs 2283 -t_srs 4326

below is a gdalinfo dump:

Driver: GTiff/GeoTIFF
Size is 52736, 10000
Coordinate System is `'
Origin = (11827711.500000000000000,7066112.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  IMAGE__WIDTH=52736
  IMAGE__HEIGHT=85504
  IMAGE__COLOR_SCHEME=0
  IMAGE__DATA_TYPE=0
  IMAGE__XY_ORIGIN=0.000000,85503.000000
  IMAGE__X_RESOLUTION=1.000000
  IMAGE__Y_RESOLUTION=1.000000
Corner Coordinates:
Upper Left  (11827711.500, 7066112.000)
Lower Left  (11827711.500, 7056112.000)
Upper Right (11880447.500, 7066112.000)
Lower Right (11880447.500, 7056112.000)
Center      (11854079.500, 7061112.000)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 26368x5000, 13184x2500, 6592x1250, 3296x625, 1648x313,
824x157, 412x79
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 26368x5000, 13184x2500, 6592x1250, 3296x625, 1648x313,
824x157, 412x79
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 26368x5000, 13184x2500, 6592x1250, 3296x625, 1648x313,
824x157, 412x79


Thanks,

John Mitchell

On 1/10/07, Bryan Keith <bryan@geomega.com> wrote:
>
> John Mitchell wrote:
> > Hi,
> >
> > What is the EPSG for Virginia State Plane North NAD83 Units: feet.
> >
> > I tried EPSG:102746 within gdalwarp and it said that the SRS failed.
> >
> > Thanks,
>
> John,
>
> Try EPSG:2283
>
> I found that by looking at the epsg file:
>
> >grep -i -n virginia epsg
> 1381:# NAD83 / Virginia North (ftUS)
> 1383:# NAD83 / Virginia South (ftUS)
> 2531:# NAD83(HARN) / Virginia North
> ... clip ...
>
> >head -n 1382 epsg | tail -n 2
> # NAD83 / Virginia North (ftUS)
> <2283> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
> +lat_0=37.66666666666666 +
> lon_0=-78.5 +x_0=3500000.0001016 +y_0=2000000.0001016 +ellps=GRS80
> +datum=NAD83
> +to_meter=0.3048006096012192 +no_defs  <>
>
> Bryan
>
> >
> >
> >
> > ------------------------------------------------------------------------
>
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070110/9d2dd633/attachment.html
From warmerdam at pobox.com  Wed Jan 10 20:22:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
Message-ID: <45A59172.6020307@pobox.com>

John Mitchell wrote:
> Hi,
> 
> What is the EPSG for Virginia State Plane North NAD83 Units: feet.
> 
> I tried EPSG:102746 within gdalwarp and it said that the SRS failed.

John,

The EPSG code is 2283.  It is relatively new.  102746 would be an ESRI
code, not a real EPSG code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From perrygeo at gmail.com  Wed Jan 10 20:38:01 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
Message-ID: <5383fa5e0701101738x6850c869x76de4bb801fc601f@mail.gmail.com>

John,

 You can try searching the epsg database at http://ocean.csl.co.uk/;
Browse for Virigina in Coordinate Reference Systems and you should get
the relevant epsg codes.

I think you may need 2283 ?

- matt

On 1/10/07, John Mitchell <mitchelljj98@gmail.com> wrote:
> Hi,
>
> What is the EPSG for Virginia State Plane North NAD83 Units: feet.
>
> I tried EPSG:102746 within gdalwarp and it said that the SRS failed.
>
> Thanks,
>
> --
> John J. Mitchell
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 
Matthew T. Perry
http://www.perrygeo.net

From tim.bowden at westnet.com.au  Wed Jan 10 21:12:37 2007
From: tim.bowden at westnet.com.au (Tim Bowden)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
Message-ID: <1168481557.5181.11.camel@localhost>

On Wed, 2007-01-10 at 19:17 -0500, John Mitchell wrote:
> Hi,
> 
> What is the EPSG for Virginia State Plane North NAD83 Units: feet.
> 
> I tried EPSG:102746 within gdalwarp and it said that the SRS failed.
> 
> Thanks,
> 
> -- 
> John J. Mitchell 

There is no 102746 epsg code. You may be looking for one of the
following:

$grep -A1 Virginia epsg |grep -A1 NAD83|grep -A1 North
# NAD83 / Virginia North (ftUS)
<2283> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
+lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000.0001016
+y_0=2000000.0001016 +ellps=GRS80 +datum=NAD83
+to_meter=0.3048006096012192 +no_defs  <>
--
# NAD83(HARN) / Virginia North
<2853> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
+lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000 +y_0=2000000
+ellps=GRS80 +units=m +no_defs  <>
--
# NAD83(HARN) / West Virginia North
<2857> +proj=lcc +lat_1=40.25 +lat_2=39 +lat_0=38.5 +lon_0=-79.5
+x_0=600000 +y_0=0 +ellps=GRS80 +units=m +no_defs  <>
--
# NAD83(HARN) / Virginia North (ftUS)
<2924> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
+lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000.0001016
+y_0=2000000.0001016 +ellps=GRS80 +to_meter=0.3048006096012192 +no_defs
<>
--
# NAD83 / Virginia North
<32146> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
+lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000 +y_0=2000000
+ellps=GRS80 +datum=NAD83 +units=m +no_defs  <>
--
# NAD83 / West Virginia North
<32150> +proj=lcc +lat_1=40.25 +lat_2=39 +lat_0=38.5 +lon_0=-79.5
+x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs  <>


From tim.bowden at westnet.com.au  Wed Jan 10 22:36:54 2007
From: tim.bowden at westnet.com.au (Tim Bowden)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG for Virginia State Plane North NAD83 Units: feet
In-Reply-To: <45A5AD4A.2060300@vadose.org>
References: <fa2ac0580701101617x98d8268ra8873111114d3ecb@mail.gmail.com>
	<1168481557.5181.11.camel@localhost>  <45A5AD4A.2060300@vadose.org>
Message-ID: <1168486614.5181.48.camel@localhost>

On Wed, 2007-01-10 at 22:21 -0500, Carl Anderson wrote:
> This issue is likely to repeat.... often
> 
> ESRI extended (inproperly) the EPSG codes. 
> 
> Things coded EPSG:102XXX  should really be ESRI:102XXX
> It seems that lots and lots of US centric projections were redefined 
> with new EPSG codes and very slightly different projective parameters.
> Instead of using the 32XXX code as reserved for custom use, and instead 
> of using their  own namespace (ie ESRI: ) the just blundered ahead 
> picking unused codes.
> 
> I do know that ESRI ArcGIS 9.0 and prior ESRI software releases, used 
> these bad/locally defined codes (the EPSG codes are not in the official 
> EPSG databases).
> 
> for a list of these ESRI codes see
> http://lists.maptools.org/pipermail/proj/2003-March/000663.html
> 
> You should conform to the official EPSG codes to allow for maximum 
> system interoperability.
> A decent resource for valid EPSG codes is at
> http://www.epsg.org/Geodetic.html
> or
> http://mapserver.gis.umn.edu/docs/faq/epsg_codes
> 
> C.
> 
> 

Ouch,  looks to me like either bloody minded arrogance or embrace and
extend...  Now where have I seen that before?

John, Take Carl's advice, not mine.

You may want to add this to your epsg file:
# NAD 1983 StatePlane Virginia North FIPS 4501 Feet
<102746> +proj=lcc +lat_1=38.03333333333333 +lat_2=39.2 +lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3499999.999999999 +y_0=2000000 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192  no_defs <>

Regards,
Tim Bowden


> Tim Bowden wrote:
> > On Wed, 2007-01-10 at 19:17 -0500, John Mitchell wrote:
> >   
> >> Hi,
> >>
> >> What is the EPSG for Virginia State Plane North NAD83 Units: feet.
> >>
> >> I tried EPSG:102746 within gdalwarp and it said that the SRS failed.
> >>
> >> Thanks,
> >>
> >> -- 
> >> John J. Mitchell 
> >>     
> >
> > There is no 102746 epsg code. You may be looking for one of the
> > following:
> >
> > $grep -A1 Virginia epsg |grep -A1 NAD83|grep -A1 North
> > # NAD83 / Virginia North (ftUS)
> > <2283> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
> > +lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000.0001016
> > +y_0=2000000.0001016 +ellps=GRS80 +datum=NAD83
> > +to_meter=0.3048006096012192 +no_defs  <>
> > --
> > # NAD83(HARN) / Virginia North
> > <2853> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
> > +lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000 +y_0=2000000
> > +ellps=GRS80 +units=m +no_defs  <>
> > --
> > # NAD83(HARN) / West Virginia North
> > <2857> +proj=lcc +lat_1=40.25 +lat_2=39 +lat_0=38.5 +lon_0=-79.5
> > +x_0=600000 +y_0=0 +ellps=GRS80 +units=m +no_defs  <>
> > --
> > # NAD83(HARN) / Virginia North (ftUS)
> > <2924> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
> > +lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000.0001016
> > +y_0=2000000.0001016 +ellps=GRS80 +to_meter=0.3048006096012192 +no_defs
> > <>
> > --
> > # NAD83 / Virginia North
> > <32146> +proj=lcc +lat_1=39.2 +lat_2=38.03333333333333
> > +lat_0=37.66666666666666 +lon_0=-78.5 +x_0=3500000 +y_0=2000000
> > +ellps=GRS80 +datum=NAD83 +units=m +no_defs  <>
> > --
> > # NAD83 / West Virginia North
> > <32150> +proj=lcc +lat_1=40.25 +lat_2=39 +lat_0=38.5 +lon_0=-79.5
> > +x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs  <>
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >   
> 


From mateusz at loskot.net  Wed Jan 10 22:58:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: [Fdo_dev] About RDBI's get_gen_id() function
In-Reply-To: <4187BAA24A3D094F925AEE0BE39B70770506EDEF@msgusaemb01.autodesk.com>
References: <4187BAA24A3D094F925AEE0BE39B70770506EDEF@msgusaemb01.autodesk.com>
Message-ID: <45A5B5DB.60003@loskot.net>

Greg, Badreddine,

Yes, that's perfectly clear to me that I'm working on my
private branch now, so all changes on other components than PostGIS
provider go there too and should be reviewed.

Also, I've not yet started to use the new FDO repositories after the
migration, as I'd prefer to wait until everything works well.
Do you recommend to start committing now (to my private branch) ?

Mat



Greg Boone wrote:
> Any changes would have to go into the PostGIS branch only. Once the
> change has been reviewed it can be integrated into the GenericRDBMS
> trunk. This change should not be integrated into the 3.2.x branch.
> 
> -----Original Message-----
> From: fdo_dev-bounces@lists.osgeo.org
> [mailto:fdo_dev-bounces@lists.osgeo.org] On Behalf Of Badreddine Karoui
> Sent: Wednesday, January 10, 2007 12:32 PM
> To: fdo_dev
> Subject: RE: [Fdo_dev] About RDBI's get_gen_id() function
> 
> Go ahead. But can you hold off changing subversion until tomorrow?
> 
> Badreddine
> 
> -----Original Message-----
> From: fdo_dev-bounces@lists.osgeo.org
> [mailto:fdo_dev-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
> Sent: Wednesday, January 10, 2007 12:17 PM
> To: fdo_dev
> Subject: Re: [Fdo_dev] About RDBI's get_gen_id() function
> 
> Badreddine Karoui wrote:
>> Hi,
>>
>>  The GDBI/RDBI interface is not cast in stone. Option 1 seems the
>> reasonable solution to me.
>> MySql driver just have to be fixed up in this
>> case and no need for the kludge of option 2.
> 
> OK, so I'm waiting for answer on my question who is going to fix it.
> I can do it too.
> 
> Cheers


-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Jan 10 23:18:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: [Fdo_dev] About RDBI's get_gen_id() function
In-Reply-To: <45A5B5DB.60003@loskot.net>
References: <4187BAA24A3D094F925AEE0BE39B70770506EDEF@msgusaemb01.autodesk.com>
	<45A5B5DB.60003@loskot.net>
Message-ID: <45A5BA91.8050504@loskot.net>

Oh Mom!

I appologize for this e-mail.
It seems gdal-dev list address is on top of e-mails stack in my brain :-)
This message should go to the fdo_dev list.

Sorry for unnecessary traffic.

Mateusz


Mateusz Loskot wrote:
> Greg, Badreddine,
> 
> Yes, that's perfectly clear to me that I'm working on my
> private branch now, so all changes on other components than PostGIS
> provider go there too and should be reviewed.
> 
> Also, I've not yet started to use the new FDO repositories after the
> migration, as I'd prefer to wait until everything works well.
> Do you recommend to start committing now (to my private branch) ?
> 
> Mat
> 
> 
> 
> Greg Boone wrote:
>> Any changes would have to go into the PostGIS branch only. Once the
>> change has been reviewed it can be integrated into the GenericRDBMS
>> trunk. This change should not be integrated into the 3.2.x branch.
>>
>> -----Original Message-----
>> From: fdo_dev-bounces@lists.osgeo.org
>> [mailto:fdo_dev-bounces@lists.osgeo.org] On Behalf Of Badreddine Karoui
>> Sent: Wednesday, January 10, 2007 12:32 PM
>> To: fdo_dev
>> Subject: RE: [Fdo_dev] About RDBI's get_gen_id() function
>>
>> Go ahead. But can you hold off changing subversion until tomorrow?
>>
>> Badreddine
>>
>> -----Original Message-----
>> From: fdo_dev-bounces@lists.osgeo.org
>> [mailto:fdo_dev-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
>> Sent: Wednesday, January 10, 2007 12:17 PM
>> To: fdo_dev
>> Subject: Re: [Fdo_dev] About RDBI's get_gen_id() function
>>
>> Badreddine Karoui wrote:
>>> Hi,
>>>
>>>  The GDBI/RDBI interface is not cast in stone. Option 1 seems the
>>> reasonable solution to me.
>>> MySql driver just have to be fixed up in this
>>> case and no need for the kludge of option 2.
>> OK, so I'm waiting for answer on my question who is going to fix it.
>> I can do it too.
>>
>> Cheers
> 
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Jan 11 01:29:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] EPSG:32111
In-Reply-To: <961f4d9e0701091708g35712b63x3fb843e394fc1f43@mail.gmail.com>
References: <961f4d9e0701091708g35712b63x3fb843e394fc1f43@mail.gmail.com>
Message-ID: <45A5D94B.4010600@pobox.com>

Simone Giannecchini wrote:
> Hi all,
> a quick curiosity.
> I have a geotiff that claims to be in EPSG:32111 crs. The out put of
> gdalinfo on it is as follows:
...
> Anyway if I check the EPSG SQL db I have in postgresql I see that the
> definition of the unit of measure is meters.
> 
> I assume there has to be one and oly one EPSG:32111, hence how it
> comes that I get two different definitions each claiming to be 32111?
> 
> I am using fwtools 1.1.3.

Simone,

A GeoTIFF file can declare itself to use EPSG:32111 but also include a
linear units override.  In this case GDAL will report the file as EPSG:32111
but updating the definition with the override linear units.  I assume this
is what is occuring in your case.

This is really a bug in the sense that GDAL should clear the authority
code for a coordinate system if any values have been overridden in this
fashion.  If you like, you could file an appropriate bug against GDAL.

Of course, it could be something else, but it is hard to know without the
file.  If you were to provide a listgeo output for the file, I could verify
that this is what is happening.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Kai-Behncke at gmx.de  Thu Jan 11 03:25:49 2007
From: Kai-Behncke at gmx.de (Kai Behncke)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Making tiles automatically?
Message-ID: <20070111082549.87440@gmx.net>

Dear list,

I would like to tile a tiff-image (with tfw file) in 16 tiles.
I wonder if there is a possibility to avoid manual tiling for every tile like:

gdal_translate ?projwin 3429886 5799741 3435890 5794667
...path_to\landsat7.tiff path_to\landsat7_tile1.tiff

...this would be so much typing.  

Is there anywhere a possibility to tile the image with a script?
Does the possibily exist to tile it automatically in the shell?

Another question: After tiling: Will for every tile a tfw-file be produced?

Thank you very much, Kai 
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From guillaume.huby.lists at gmail.com  Thu Jan 11 09:11:56 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:35 2007
Subject: RE. : [Gdal-dev] Making tiles automatically?
Message-ID: <ddc797c30701110611p405bc192q1285e4b08e3e6a62@mail.gmail.com>

>
> Dear list,
>
> I would like to tile a tiff-image (with tfw file) in 16 tiles.
> I wonder if there is a possibility to avoid manual tiling for every tile like:
>
> gdal_translate ?projwin 3429886 5799741 3435890 5794667
> ...path_to\landsat7.tiff path_to\landsat7_tile1.tiff
>
> ...this would be so much typing.
>
> Is there anywhere a possibility to tile the image with a script?
> Does the possibily exist to tile it automatically in the shell?
>
> The tiling process is more simple when thinking in number of pixels
instead of referenced coordinates.
Some kind of pseudo-code for exemple.

# xOff and yOff are the upper left pixel of tile not in referenced
coordinates but in matrix coordinates.
# nPixelsXImage and nPixelsYImage are the dimensions of the full image.
# You can get them parsing the output of gdalinfo for exemple.
# xSize and ySize are the dimensions in number of pixels of the tiles.
# You can compute them using nPixelsXImage and nPixelsYImage and the number
of tiles you expect :
$xSize = $nPixelsXImage / $nTilesX
$ySize = $nPixelsYImage / $nTilesY
for $xOff = 1 to $nPixelsXImage step $xSize
  for $yOff = 1 to $nPixelsYImage step ySize
    call gdal_translate -co "TFW=YES" -srcwin $xOff $yOff $xSize $ySize
input.tif output_$xOff_$yOff.tif
  end for $yOff
end for $xOff

Note that the last line and the last raw of tiles might not have the
expected $xSize $ySize.

Another question: After tiling: Will for every tile a tfw-file be produced?
>
>
For this add  the gdal_translate option -co  "TFW=YES".

I hope this will help you.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070111/995fe91a/attachment.html
From warmerdam at pobox.com  Thu Jan 11 11:50:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Making tiles automatically?
In-Reply-To: <20070111082549.87440@gmx.net>
References: <20070111082549.87440@gmx.net>
Message-ID: <45A66AE1.7060005@pobox.com>

Kai Behncke wrote:
> Dear list,
> 
> I would like to tile a tiff-image (with tfw file) in 16 tiles.
> I wonder if there is a possibility to avoid manual tiling for every tile like:
> 
> gdal_translate ?projwin 3429886 5799741 3435890 5794667
> ...path_to\landsat7.tiff path_to\landsat7_tile1.tiff
> 
> ...this would be so much typing.  
> 
> Is there anywhere a possibility to tile the image with a script?
> Does the possibily exist to tile it automatically in the shell?


Kai,

I think a few GDAL users have written tiling scripts.  You could do it
as a batch wrapper for gdal_translate, or write it as a standalone script
using one of the bindings (like the python bindings).  However, there is no
such canned script in GDAL currently.

 > Another question: After tiling: Will for every tile a tfw-file be produced?

Note that to get a TFW file you will need the creation option TFW=YES, like:

gdal_translate ?projwin 3429886 5799741 3435890 5794667 -co TFW=YES \
  ...path_to\landsat7.tiff path_to\landsat7_tile1.tiff

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Thu Jan 11 14:32:02 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <45A44740.50304@swoodbridge.com>
References: <45898C68.4030402@swoodbridge.com>	<0c4601c72491$6218aa70$160002c0@shark>	<458A0F71.8080403@swoodbridge.com>	<017b01c72515$92d98ba0$160002c0@shark>	<458BEACD.4090905@swoodbridge.com>	<013101c725da$ee0c7300$160002c0@shark>	<458BFC54.9030408@swoodbridge.com>	<015c01c725e5$5fc6efc0$160002c0@shark>	<45983970.1070708@swoodbridge.com>	<.70.73.22.137.1167617601.squirrel@70.73.22.137>	<45988484.4090704@swoodbridge.com>	<.70.73.22.137.1167675170.squirrel@70.73.22.137>
	<45997392.8060909@swoodbridge.com> <45A41258.5090102@gov.yk.ca>
	<45A44740.50304@swoodbridge.com>
Message-ID: <45A690B2.3050109@gov.yk.ca>

Hi Stephen, thank you for describing the approach you are using.

> Where can you get the Canadian NTS maps from? Are they a free download?

No not free, unfortunately. The product is called CanMatrix and can be 
purchased from Natural Resources Canada Centre for Topographic 
Information, 
http://www.cits.rncan.gc.ca/cit/servlet/CIT/site_id=01&page_id=1-005-002-003.html

On the bright side, if the resolution is reduced to 150dpi and the image 
size does not exceed 16,000,000px there are no restrictions on 
redistribution. Anyone who wants the sixty-six 1:250,000 maps which 
cover the Yukon Territory can drop me a line (250mb).

Although CanMatrix are 300dpi the quality in my opinion is not so hot. A 
test scan here in our office at the same resolution yielded much better 
results. However, they've already done it, the images are georeferenced, 
and our scanner bed is not big enough. :)


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From alexandre.leroux at ec.gc.ca  Thu Jan 11 15:50:55 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <45A690B2.3050109@gov.yk.ca>
References: <45898C68.4030402@swoodbridge.com>	<0c4601c72491$6218aa70$160002c0@shark>	<458A0F71.8080403@swoodbridge.com>	<017b01c72515$92d98ba0$160002c0@shark>	<458BEACD.4090905@swoodbridge.com>	<013101c725da$ee0c7300$160002c0@shark>	<458BFC54.9030408@swoodbridge.com>	<015c01c725e5$5fc6efc0$160002c0@shark>	<45983970.1070708@swoodbridge.com>	<.70.73.22.137.1167617601.squirrel@70.73.22.137>	<45988484.4090704@swoodbridge.com>	<.70.73.22.137.1167675170.squirrel@70.73.22.137>	<45997392.8060909@swoodbridge.com>
	<45A41258.5090102@gov.yk.ca>	<45A44740.50304@swoodbridge.com>
	<45A690B2.3050109@gov.yk.ca>
Message-ID: <45A6A32F.1060805@ec.gc.ca>


Hi,

Matt's right. CanMatrix ain't free for the public, however, Toporama is:
*http://toporama*.*cits*.rncan.gc.ca/*toporama*_en.html

It's very similar to CanMatrix but offering much less details. Toporama 
is also available at the 1:50,000 scale in not-geocoded gif format.

Cheers,

Alex
http://slashgeo.org


Matt Wilkie wrote:
> Hi Stephen, thank you for describing the approach you are using.
>
>> Where can you get the Canadian NTS maps from? Are they a free download?
>
> No not free, unfortunately. The product is called CanMatrix and can be 
> purchased from Natural Resources Canada Centre for Topographic 
> Information, 
> http://www.cits.rncan.gc.ca/cit/servlet/CIT/site_id=01&page_id=1-005-002-003.html 
>
>
> On the bright side, if the resolution is reduced to 150dpi and the 
> image size does not exceed 16,000,000px there are no restrictions on 
> redistribution. Anyone who wants the sixty-six 1:250,000 maps which 
> cover the Yukon Territory can drop me a line (250mb).
>
> Although CanMatrix are 300dpi the quality in my opinion is not so hot. 
> A test scan here in our office at the same resolution yielded much 
> better results. However, they've already done it, the images are 
> georeferenced, and our scanner bed is not big enough. :)

-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070111/3466250f/attachment.html
From sylvain.rioux at softmaptech.com  Thu Jan 11 16:17:47 2007
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <45A690B2.3050109@gov.yk.ca>
Message-ID: <NEBBJBLMOMCEDMBAMIFACEOMEBAA.sylvain.rioux@softmaptech.com>

Hi Stephen,

Sorry to bother you but we are a reseller of the CanMatrix product and we're
much cheaper. We deliver by download or on cd-rom. The maps are also
collarless (so you can navigate seamlessly on software that allows it).

If you want, just have a look at :
http://www.softmaptech.com/en/pages/geotiff_EN.html

Sylvain.


-----Message d'origine-----
De : gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org]De la part de Matt Wilkie
Envoy? : 11 janvier 2007 2:32 pm
? : Stephen Woodbridge
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] Re: Raster Soviet Topo Maps


Hi Stephen, thank you for describing the approach you are using.

> Where can you get the Canadian NTS maps from? Are they a free download?

No not free, unfortunately. The product is called CanMatrix and can be
purchased from Natural Resources Canada Centre for Topographic
Information,
http://www.cits.rncan.gc.ca/cit/servlet/CIT/site_id=01&page_id=1-005-002-003
.html

On the bright side, if the resolution is reduced to 150dpi and the image
size does not exceed 16,000,000px there are no restrictions on
redistribution. Anyone who wants the sixty-six 1:250,000 maps which
cover the Yukon Territory can drop me a line (250mb).

Although CanMatrix are 300dpi the quality in my opinion is not so hot. A
test scan here in our office at the same resolution yielded much better
results. However, they've already done it, the images are georeferenced,
and our scanner bed is not big enough. :)


--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

From mhanson at photon.com  Thu Jan 11 18:25:11 2007
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] VRT SimpleSource problem
Message-ID: <0719BE42F22E0A46857DF72644EC5D702786D6@pj-exchange.photon.com>

I'm having problems getting bands correct when creating a VRT file.  In the code below I have an XML stringstream and loop through each band that I am copying.   For each band I create the <SimpleSource> XML with the correct band number and regions of interest.    However in the resulting VRT file for all the bands the <SourceBand> tag is the exact same band number for all bands.   The band metadata is copying over correctly, it is just as if when I set the source_0 MetadataItem it is setting it for all bands, or using the first band for all bands.    
 
Might this be a bug or am I doing something incorrectly?
 
 
********************************************************************

for (iIndex=Indexes.begin(); iIndex!=Indexes.end(); iIndex++) {

XML << "<SimpleSource><SourceFilename relativeToVRT=\"1\">" << ImageSet.Filename() << "</SourceFilename>"

<< "<SourceBand>" << (*iIndex)+1 << "</SourceBand>"

<< "<SrcRect xOff=\"" << ROI.x0() << "\" yOff=\"" << ROI.y0() << "\" xSize=\"" << ROI.width() << "\" ySize=\"" << ROI.height() << "\"/>"

<< "<DstRect xOff=\"0\" yOff=\"0\" xSize=\"" << ROI.width() << "\" ySize=\"" << ROI.height() << "\"/>"

<< "</SimpleSource>";

// Copy band metadata from source band

NewImage[iNewIndex].GetGDALRasterBand()->SetMetadataItem("source_0",XML.str().c_str(),"new_vrt_sources");

NewImage[iNewIndex++].GetGDALRasterBand()->SetMetadata( ImageSet[*iIndex].GetGDALRasterBand()->GetMetadata() );

}

NewImage.GetGDALDataset()->FlushCache();



From matt.wilkie at gov.yk.ca  Thu Jan 11 19:04:14 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <NEBBJBLMOMCEDMBAMIFACEOMEBAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFACEOMEBAA.sylvain.rioux@softmaptech.com>
Message-ID: <45A6D07E.5020503@gov.yk.ca>

Hi Sylvain, boy I wish I'd known about Softmap 3 months ago before we 
bought the 250k set and I set to work building scripts to remove the 
collars!  What kind of arrangement did you have to make with NRCAN to 
bypass the 150dpi redistribution restriction? What license are the 
softmap canmatrix files under? If we buy the set listed above, can 
anybody in our department use the image? What about other departments? 
Other affiliated organisations?

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Thu Jan 11 19:19:31 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <45A6A32F.1060805@ec.gc.ca>
References: <45898C68.4030402@swoodbridge.com>	<0c4601c72491$6218aa70$160002c0@shark>	<458A0F71.8080403@swoodbridge.com>	<017b01c72515$92d98ba0$160002c0@shark>	<458BEACD.4090905@swoodbridge.com>	<013101c725da$ee0c7300$160002c0@shark>	<458BFC54.9030408@swoodbridge.com>	<015c01c725e5$5fc6efc0$160002c0@shark>	<45983970.1070708@swoodbridge.com>	<.70.73.22.137.1167617601.squirrel@70.73.22.137>	<45988484.4090704@swoodbridge.com>	<.70.73.22.137.1167675170.squirrel@70.73.22.137>	<45997392.8060909@swoodbridge.com>
	<45A41258.5090102@gov.yk.ca>	<45A44740.50304@swoodbridge.com>
	<45A690B2.3050109@gov.yk.ca> <45A6A32F.1060805@ec.gc.ca>
Message-ID: <45A6D413.6010604@gov.yk.ca>

Hi Alex, thanks for bringing toporama into the discussion. It helps to 
have related material in the same thread.

> Matt's right. CanMatrix ain't free for the public, however, Toporama is:
> http://toporama.cits.rncan.gc.ca/toporama_en.htm
> 
> It's very similar to CanMatrix but offering much less details. Toporama 
> is also available at the 1:50,000 scale in not-geocoded gif format.

georeferenced toporama is available from
http://members.shaw.ca/davepatton/maps.html
they're not free but reasonably priced at $375 for the whole country.

If price is an issue, Dave also has a shareware program called DRGMapCal 
so you can do the georeferencing yourself
http://members.shaw.ca/davepatton/drgmapcal/

If you use ArcInfo I have a humble AML which generates worldfiles from 
an NTS polygon cover (some things hardcoded)
http://yukongis.ca/bin/view/Main/TopoRama

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From eeigyl2002 at hotmail.com  Fri Jan 12 03:47:37 2007
From: eeigyl2002 at hotmail.com (=?gb2312?B?tKsg06U=?=)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] how to read hdf4 file using gdal140
Message-ID: <BAY112-F632F8C71A95A393E0F32FD4B00@phx.gbl>

hi:
    i download gdal140 and compiled to support hdf4,but i didn't know how 
to read hdf4 file data.can you give me a simple example?
thanks

  best regards.

_________________________________________________________________
 MSN Messenger:  http://messenger.msn.com/cn  


From mateusz at loskot.net  Fri Jan 12 04:58:32 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] how to read hdf4 file using gdal140
In-Reply-To: <BAY112-F632F8C71A95A393E0F32FD4B00@phx.gbl>
References: <BAY112-F632F8C71A95A393E0F32FD4B00@phx.gbl>
Message-ID: <45A75BC8.6090307@loskot.net>

  wrote:
> hi:
>    i download gdal140 and compiled to support hdf4,but i didn't know how
> to read hdf4 file data.can you give me a simple example?
> thanks

Have checked if examples on the HDF4 driver web page work for you?

http://www.gdal.org/frmt_hdf4.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sylvain.rioux at softmaptech.com  Fri Jan 12 09:46:40 2007
From: sylvain.rioux at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <45A6D07E.5020503@gov.yk.ca>
Message-ID: <NEBBJBLMOMCEDMBAMIFAMEPCEBAA.sylvain.rioux@softmaptech.com>

Matt,

You can find the license you get when buying from us which is exactly the
same as the one you get when getting maps from NRCan :
http://www.softmaptech.com/download/canmatrix/License_eng.pdf

We are a reseller of the canmatrix products. We are not under this license.
But don't worry, we made arrangements with NRCan (by the way, we're working
with them for more than 10 years) and everyone is happy (including the final
customer).

Sylvain.
http://www.softmaptech.com


-----Message d'origine-----
De : Matt Wilkie [mailto:matt.wilkie@gov.yk.ca]
Envoy? : 11 janvier 2007 7:04 pm
? : Sylvain Rioux
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] Re: Raster Soviet Topo Maps


Hi Sylvain, boy I wish I'd known about Softmap 3 months ago before we
bought the 250k set and I set to work building scripts to remove the
collars!  What kind of arrangement did you have to make with NRCAN to
bypass the 150dpi redistribution restriction? What license are the
softmap canmatrix files under? If we buy the set listed above, can
anybody in our department use the image? What about other departments?
Other affiliated organisations?

thanks,

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From dany.geotools at gmail.com  Fri Jan 12 09:53:43 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] GDAL Java Binding generation troubles. (missing typemap?)
Message-ID: <7221db410701120653h1f6baa3m4536d12338e9d4@mail.gmail.com>

Hi list,
I downloaded and build GDAL 1.4 from the daily CVS.

Actually, the getBlockSize method is contained in the interface file
band.i(gdal/swig/include).
The necessary binding is also contained in the swig's generated wrapper
gdal_wrap.cpp (gdal/swig/java).

However, the produced java proxy class
Band.java(gdal/swig/java/org/gdal/gdal) contains no binding for the
getBlockSize
method. (Maybe Swig was not correctly executed). By this way, a Java program
cannot access to getBlockSize.

Thus, I'm providing to generate JAVA SWIG wrappers but I have some trouble.

When executing SWIG, it returns this error:
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Microsoft (R) Program Maintenance Utility Version 7.10.3077
Copyright (C) Microsoft Corporation.  All rights reserved.

swig -Wall -Iinclude -Iinclude/java  -ID:\AllData\gdal-2007 -c++ -java -o
gdalconst_wrap.c -package org/gdal/gdal gdal.i
include\Band.i(215): Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No
typemaps are defined.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



I'm searching this text within the files of the whole swig folder but I
cannot find the IF_ERROR_RETURN_NONE typemap.
It is possible that IF_ERROR_RETURN_NONE was recently defined but not yet
included in the GDAL CVS repository?

Does anybody have any clues about what I'm doing wrong?
Thank you very much
-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070112/4eda6c46/attachment.html
From matt.wilkie at gov.yk.ca  Fri Jan 12 11:54:22 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Raster Soviet Topo Maps
In-Reply-To: <NEBBJBLMOMCEDMBAMIFAMEPCEBAA.sylvain.rioux@softmaptech.com>
References: <NEBBJBLMOMCEDMBAMIFAMEPCEBAA.sylvain.rioux@softmaptech.com>
Message-ID: <45A7BD3E.6090502@gov.yk.ca>


> You can find the license you get when buying from us which is exactly
> the same as the one you get when getting maps from NRCan : 
> http://www.softmaptech.com/download/canmatrix/License_eng.pdf


Thank you for the clarification. :)




From szekerest at gmail.com  Fri Jan 12 17:48:15 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] GDAL Java Binding generation troubles. (missing
	typemap?)
In-Reply-To: <7221db410701120653h1f6baa3m4536d12338e9d4@mail.gmail.com>
References: <7221db410701120653h1f6baa3m4536d12338e9d4@mail.gmail.com>
Message-ID: <f3b73b7d0701121448r4e312206r7c93bb2c710dd0f3@mail.gmail.com>

Hi,

A typemap is missing at the java binding for the integer output
parameters. Therefore SWIG  does not generate this member.

Additionally there is another missing typemap

%typemap(out) IF_ERROR_RETURN_NONE

that causes the warning, but it only affects the behaviour of the
corresponding GetStatistics method and does not affect the
getBlockSize.

Best Regards,




2007/1/12, Daniele Romagnoli <dany.geotools@gmail.com>:
> Hi list,
> I downloaded and build GDAL 1.4 from the daily CVS.
>
> Actually, the getBlockSize method is contained in the interface file band.i
> (gdal/swig/include).
> The necessary binding is also contained in the swig's generated wrapper
> gdal_wrap.cpp (gdal/swig/java).
>
> However, the produced java proxy class Band.java
> (gdal/swig/java/org/gdal/gdal) contains no binding for the getBlockSize
> method. (Maybe Swig was not correctly executed). By this way, a Java program
> cannot access to getBlockSize.
>
> Thus, I'm providing to generate JAVA SWIG wrappers but I have some trouble.
>
> When executing SWIG, it returns this error:
> --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> Microsoft (R) Program Maintenance Utility Version 7.10.3077
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
> swig -Wall -Iinclude -Iinclude/java  -ID:\AllData\gdal-2007 -c++ -java -o
> gdalconst_wrap.c -package org/gdal/gdal gdal.i
> include\Band.i(215): Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No
> typemaps are defined.
> --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
>
> I'm searching this text within the files of the whole swig folder but I
> cannot find the IF_ERROR_RETURN_NONE typemap.
> It is possible that IF_ERROR_RETURN_NONE was recently defined but not yet
> included in the GDAL CVS repository?
>
>  Does anybody have any clues about what I'm doing wrong?
> Thank you very much
> --
> Best Regards,
> Daniele
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From matt.wilkie at gov.yk.ca  Fri Jan 12 19:05:27 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] adding compress to pct2rgb, rgb2pct
Message-ID: <45A82247.4020106@gov.yk.ca>

hello all,

Wannabee coder here would like some help learning how to extend the 
pct2rgb, rgb2pct python scripts to include -co options, compression 
specifically. Can anyone point me to some docs or examples which might 
help me on my way?

thanks!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Fri Jan 12 23:46:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] adding compress to pct2rgb, rgb2pct
In-Reply-To: <45A82247.4020106@gov.yk.ca>
References: <45A82247.4020106@gov.yk.ca>
Message-ID: <45A86428.8020902@pobox.com>

Matt Wilkie wrote:
> hello all,
> 
> Wannabee coder here would like some help learning how to extend the 
> pct2rgb, rgb2pct python scripts to include -co options, compression 
> specifically. Can anyone point me to some docs or examples which might 
> help me on my way?

Matt,

You will want to include the creation option in the CreateCopy() call.
Something like this:

     tif_ds = gdal.Open( tif_filename )
     dst_driver.CreateCopy( dst_filename, tif_ds, options = [ "COMPRESS=LZW" ] )
     tif_ds = None

You will also need to force force the CreateCopy() step to happen even if
the output format is GTiff.  This could be accomplished by changing this:

if format == 'GTiff':
     tif_filename = dst_filename
else:
     tif_filename = 'temp.tif'

To this:

tif_filename = 'temp.tif'

If you wanted to be able to pass creation options on the commandline a bit
of extra work would also be required.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Sat Jan 13 05:00:46 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: DXF to raster conversion
In-Reply-To: <000c01c733d2$1267a6c0$0201a8c0@oiokratr6dmly7>
References: <000c01c733d2$1267a6c0$0201a8c0@oiokratr6dmly7>
Message-ID: <45A8ADCE.8080407@o2.pl>

Grzegorz Wiktorowski wrote:
>>> I received DXF file and I need to convert to TIFF format. From
>>> description
>>> of gdal_rasterize it seems to me it does not read DXF file.

>> You can convert to eg. PS with 'pstoedit', then rasterize this in GIMP
>> or with ImageMagick's 'convert'.

> As far as I found on pstoedit's web site it converts PS to DXF. My
> source is DXF do I don't think pstoedit helps here.

You are correct. My bad.

>>> I didn't find any tool to convert from DXF to OGR vector formats also.

>> GRASS GIS has v.in.dxf module for DXF import and it can output to any
>> OGR supported vector with v.out.ogr.
>>
>> If you go for GRASS, note there it has it's own tool for rasterising -
>> v.to.rast. Next use r.out.gdal to export into any GDAL supported format.

> OK. But GRASS does not runs on Windows OS, I'm affraid.

Please try the QGIS+GRASS package http://download.qgis.org/qgis/win32/

There are also updated builds available at
http://qgis.org/uploadfiles/testbuilds

It contains the vast majority of GRASS modules. QGIS is used for the GUI.

Maciek

From warmerdam at pobox.com  Sat Jan 13 14:46:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
Message-ID: <45A93719.30502@pobox.com>

Folks,

I've made a few adjustments based on various suggestions, and now I'd like
to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.

   http://www.gdal.org/rfc9_maintainer.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Jan 13 14:56:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Six month maintenance contract with Matuesz
	Loskot
Message-ID: <45A9397C.1040904@pobox.com>


Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a contract
with Mateusz Loskot for 600 hours of GDAL maintenance over six months for
$9000.00 USD.  The maintenance work will be governed by RFC 9 with an added
focus on resolving GDAL provenance issues in order to graduate OSGeo
incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).

---

Folks,

I've received indications that we have our first 9K "in the bank" from
sponsors, representing four silver sponsors less the 25% held for general
OSGeo purposes.  On the basis of that, I would like to proceed with my
"master plan" to contract Mateusz.  I would appreciate PSC votes on the
above motion.  Voting should close Tuesday evening.

I am very excited to have finally reached this point.  OSGeo serving as
a vehicle for maintenance funding has always been a big goal of mine, and
I hope this will be a model for other projects.

I'd like to offer special thanks to our first four sponsors who made this
possible.  They are Cadcorp, Safe Software, SRC and Applied Coherent
Technology.  Hopefully we will have them all on the credits page soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hernan.deangelis at glocalnet.net  Sat Jan 13 19:29:19 2007
From: hernan.deangelis at glocalnet.net (=?iso-8859-1?q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] negative nodata value loaded as positive in gdal 1.4.0
Message-ID: <200701140129.19846.hernan.deangelis@glocalnet.net>

Dear all,

I am having a weird problem when importing SRTM data using gdal_translate or 
r.in.srtm in GRASS (which also uses gdal_translate): nodata values are loaded 
as 32768 (positive) even when -32768 is explicitly set in the script. After 
import gdalinfo reports nodata as -32768, but r.info (in GRASS), cmm (in 
OSSIM) and OpeneEV all report these cells as 32768 (positive). I am using 
gdal 1.4.0. Is anyone else having this problem as well?

Thanks 

Hern?n
 

-- 
Hern?n De Angelis
Linux user # 397217


From hobu at iastate.edu  Sat Jan 13 22:19:13 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
In-Reply-To: <45A93719.30502@pobox.com>
References: <45A93719.30502@pobox.com>
Message-ID: <22D3E23E-DB0B-464C-A207-2DAA3EE5C3F8@iastate.edu>

+1
On Jan 13, 2007, at 1:46 PM, Frank Warmerdam wrote:

> Folks,
>
> I've made a few adjustments based on various suggestions, and now  
> I'd like
> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
>
>   http://www.gdal.org/rfc9_maintainer.html
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From hobu at iastate.edu  Sat Jan 13 22:23:44 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45A9397C.1040904@pobox.com>
References: <45A9397C.1040904@pobox.com>
Message-ID: <023888D3-73C2-40F8-A7D5-B1323A148356@iastate.edu>

+1 and congratulations.  I think this is a great step forward for  
GDAL and OSGeo.  It is excellent that the sponsors and OSGeo have  
given us the capability to keep someone as helpful and dedicated as  
Mateusz working on the "libc of GIS".

Howard

On Jan 13, 2007, at 1:56 PM, Frank Warmerdam wrote:

>
> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a  
> contract
> with Mateusz Loskot for 600 hours of GDAL maintenance over six  
> months for
> $9000.00 USD.  The maintenance work will be governed by RFC 9 with  
> an added
> focus on resolving GDAL provenance issues in order to graduate OSGeo
> incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).
>
> ---
>
> Folks,
>
> I've received indications that we have our first 9K "in the bank" from
> sponsors, representing four silver sponsors less the 25% held for  
> general
> OSGeo purposes.  On the basis of that, I would like to proceed with my
> "master plan" to contract Mateusz.  I would appreciate PSC votes on  
> the
> above motion.  Voting should close Tuesday evening.
>
> I am very excited to have finally reached this point.  OSGeo  
> serving as
> a vehicle for maintenance funding has always been a big goal of  
> mine, and
> I hope this will be a model for other projects.
>
> I'd like to offer special thanks to our first four sponsors who  
> made this
> possible.  They are Cadcorp, Safe Software, SRC and Applied Coherent
> Technology.  Hopefully we will have them all on the credits page soon.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From tutey at o2.pl  Sun Jan 14 04:41:06 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] negative nodata value loaded as positive in gdal 1.4.0
In-Reply-To: <200701140129.19846.hernan.deangelis@glocalnet.net>
References: <200701140129.19846.hernan.deangelis@glocalnet.net>
Message-ID: <45A9FAB2.3050102@o2.pl>

Hern?n De Angelis wrote:

> I am having a weird problem when importing SRTM data using gdal_translate or 
> r.in.srtm in GRASS (which also uses gdal_translate)

FWIW, this is not correct. r.in.srtm is a script which uses r.in.gdal,
not gdal_translate.

However, both r.in.gdal and gdal_translate have the problem Hern?n
describes, so propapably this is an issue with GDAL itself; unless an
issue with some problematic SRTM tiles, ?. I'm not up to tracing it
down exactly, but anybody who can please read below.

> nodata values are loaded 
> as 32768 (positive) even when -32768 is explicitly set in the script. After 
> import gdalinfo reports nodata as -32768, but r.info (in GRASS), cmm (in 
> OSSIM) and OpeneEV all report these cells as 32768 (positive). I am using 
> gdal 1.4.0. Is anyone else having this problem as well?

I confirm. I can reproduce this with some 3" tiles, eg:
ftp://e0srp01u.ecs.nasa.gov/srtm/version2/SRTM3/Eurasia/N49E023.hgt.zip

I checked whether this is related to the SRTM version - it's not; same
problem with the version 1 at:
ftp://e0srp01u.ecs.nasa.gov/srtm/version1/Eurasia/N49E023.hgt.zip

After importing the tile into GRASS with r.in.srtm (ie. r.in.gdal), the
max value of the output raster is 32768 - wrong. Should be circa 1200.
Min is OK - 153.

I have also checked with gdal_translate, and the same issue remains.
The value range is reported as 153-32768, see:

$ gdalinfo N49E023.bil -mm
Driver: EHdr/ESRI .hdr Labelled
Size is 1201, 1201
Coordinate System is `'
Origin = (22.999583333333334,50.000416666666666)
Pixel Size = (0.000833333333333,-0.000833333333333)
Corner Coordinates:
Upper Left  (  22.9995833,  50.0004167)
Lower Left  (  22.9995833,  48.9995833)
Upper Right (  24.0004167,  50.0004167)
Lower Right (  24.0004167,  48.9995833)
Center      (  23.5000000,  49.5000000)
Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
    Computed Min/Max=153.000,32768.000
  NoData Value=-32768

I have put the problematic SRTM V2 tile N49E023 (converted into
bil+hdr) for download here:

http://kufaya.googlepages.com/srtm_v2_N49E023_bil_hdr.tar.bz2

Using GDAL 1.4 CVS 2007-01-14 (today).

Maciek

From tutey at o2.pl  Sun Jan 14 04:58:04 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] GDAL/OGR 1.4.0 Released
In-Reply-To: <459FE60D.1070001@pobox.com>
References: <459FE60D.1070001@pobox.com>
Message-ID: <45A9FEAC.9090305@o2.pl>

gdalinfo in GDAL in 1.4.0 crashes on GRASS rasters:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1439

Maciek

From warmerdam at pobox.com  Sun Jan 14 16:20:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] GDAL CVS to SVN Transition Begins
Message-ID: <45AA9E9A.8010600@pobox.com>

Folks,

The migration from CVS to SVN for GDAL has begun.  To that end, the GDAL
CVS tree is now hidden (really just renamed gdal_hidden in the usual place).

Howard, the CVS snapshot is available at:

   http://www.gdal.org/tmp/gdal_cvs.tar.gz

Once we have GDAL imported into SVN (hopefully some time tomorrow), we will
also have to do some fooling around to setup LDAP identities for commiters.
This may add some additional delay.

It is my intention to only provide SVN commiter access to those who have
formally agreed to RFC 3 terms.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Jan 14 16:30:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Commit Access for Martin Chapman
Message-ID: <45AAA0F3.1050800@pobox.com>

Motion: To give Martin Chapman commit access on GDAL/OGR.

---

Folks,

Martin Chapman of SANZ is a skilled developer, and is currently working on
improvements to the Postgres, and MySQL drivers (implementing GetFeature()
for ExecuteSQL() resultsets) and is also working on Raster Product Format
(RPF) driver for GDAL.  He has reviewed and agreed with the conditions in
RFC 3, and will be thrilled to have him as a member of the GDAL development
team.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Mon Jan 15 06:35:59 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45A9397C.1040904@pobox.com>
References: <45A9397C.1040904@pobox.com>
Message-ID: <20070115113559.GB11998@ak4719.spb.edu>

On Sat, Jan 13, 2007 at 02:56:44PM -0500, Frank Warmerdam wrote:
> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a
> contract with Mateusz Loskot for 600 hours of GDAL maintenance over
> six months for $9000.00 USD.  The maintenance work will be governed by
> RFC 9 with an added focus on resolving GDAL provenance issues in order
> to graduate OSGeo incubation.  Frank Warmerdam is designated as
> supervisor (per RFC 9).

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Jan 15 06:37:15 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Commit Access for Martin Chapman
In-Reply-To: <45AAA0F3.1050800@pobox.com>
References: <45AAA0F3.1050800@pobox.com>
Message-ID: <20070115113715.GC11998@ak4719.spb.edu>

On Sun, Jan 14, 2007 at 04:30:27PM -0500, Frank Warmerdam wrote:
> Motion: To give Martin Chapman commit access on GDAL/OGR.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Jan 15 06:33:47 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
In-Reply-To: <45A93719.30502@pobox.com>
References: <45A93719.30502@pobox.com>
Message-ID: <20070115113347.GA11998@ak4719.spb.edu>

On Sat, Jan 13, 2007 at 02:46:33PM -0500, Frank Warmerdam wrote:
> I've made a few adjustments based on various suggestions, and now I'd like
> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
> 
>   http://www.gdal.org/rfc9_maintainer.html

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dmorissette at mapgears.com  Mon Jan 15 10:08:45 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
In-Reply-To: <45A93719.30502@pobox.com>
References: <45A93719.30502@pobox.com>
Message-ID: <45AB98FD.7060901@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Folks,
> 
> I've made a few adjustments based on various suggestions, and now I'd like
> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
> 
>   http://www.gdal.org/rfc9_maintainer.html
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Mon Jan 15 10:09:18 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45A9397C.1040904@pobox.com>
References: <45A9397C.1040904@pobox.com>
Message-ID: <45AB991E.3070007@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> 
> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a contract
> with Mateusz Loskot for 600 hours of GDAL maintenance over six months for
> $9000.00 USD.  The maintenance work will be governed by RFC 9 with an added
> focus on resolving GDAL provenance issues in order to graduate OSGeo
> incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).
> 
> ---
> 
> Folks,
> 
> I've received indications that we have our first 9K "in the bank" from
> sponsors, representing four silver sponsors less the 25% held for general
> OSGeo purposes.  On the basis of that, I would like to proceed with my
> "master plan" to contract Mateusz.  I would appreciate PSC votes on the
> above motion.  Voting should close Tuesday evening.
> 
> I am very excited to have finally reached this point.  OSGeo serving as
> a vehicle for maintenance funding has always been a big goal of mine, and
> I hope this will be a model for other projects.
> 
> I'd like to offer special thanks to our first four sponsors who made this
> possible.  They are Cadcorp, Safe Software, SRC and Applied Coherent
> Technology.  Hopefully we will have them all on the credits page soon.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Mon Jan 15 10:22:42 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Motion: Commit Access for Martin Chapman
In-Reply-To: <45AAA0F3.1050800@pobox.com>
References: <45AAA0F3.1050800@pobox.com>
Message-ID: <45AB9C42.5020407@mapgears.com>

+1

Daniel


Frank Warmerdam wrote:
> Motion: To give Martin Chapman commit access on GDAL/OGR.
> 
> ---
> 
> Folks,
> 
> Martin Chapman of SANZ is a skilled developer, and is currently working on
> improvements to the Postgres, and MySQL drivers (implementing GetFeature()
> for ExecuteSQL() resultsets) and is also working on Raster Product Format
> (RPF) driver for GDAL.  He has reviewed and agreed with the conditions in
> RFC 3, and will be thrilled to have him as a member of the GDAL development
> team.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From mitchelljj98 at gmail.com  Mon Jan 15 11:27:45 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] running gdal_translate, gdaladdo,
	and gdaltindex simultaneously
Message-ID: <fa2ac0580701150827s7de883c0xb779efb267152de9@mail.gmail.com>

Hi,

I have set up 4 .bat files each which run the following over and over again:
file1.bat                        file2.bat
file3.bat
                  file4.bat
gdal_translate               gdal_translate
gdal_translate                  gdal_translate
gdaladdo                      gdaladdo
gdaladdo                          gdaladdo
gdaltindex                    gdaltindex
gdaltindex                        gdaltindex

What I would like to do is run all 4 .bat files at the same time so as to
save time, but I am concerned that their may be a conflict since all 4 files
will be running gdaltindex to the same .shp file.  What if say file1.bat and
file3.bat happen to call gdaltindex at the same time will they both fail to
update the .shp file; will only one update the .shp or will both of them
successfully update the .shp file.  Is their any parameter that I should add
when running gdal_translate, gdaladdo or gdaltindex to make it more
efficient or stable?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070115/68b9fbc7/attachment.html
From warmerdam at pobox.com  Mon Jan 15 13:26:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] running gdal_translate, gdaladdo,
	and gdaltindex simultaneously
In-Reply-To: <fa2ac0580701150827s7de883c0xb779efb267152de9@mail.gmail.com>
References: <fa2ac0580701150827s7de883c0xb779efb267152de9@mail.gmail.com>
Message-ID: <45ABC75B.5000209@pobox.com>

John Mitchell wrote:
> Hi,
> 
> I have set up 4 .bat files each which run the following over and over again:
> file1.bat                        file2.bat                          
> file3.bat                           file4.bat
> gdal_translate               gdal_translate                
> gdal_translate                  gdal_translate
> gdaladdo                      gdaladdo                       
> gdaladdo                          gdaladdo
> gdaltindex                    gdaltindex                      
> gdaltindex                        gdaltindex
> 
> What I would like to do is run all 4 .bat files at the same time so as 
> to save time, but I am concerned that their may be a conflict since all 
> 4 files will be running gdaltindex to the same .shp file.  What if say 
> file1.bat and file3.bat happen to call gdaltindex at the same time will 
> they both fail to update the .shp file; will only one update the .shp or 
> will both of them successfully update the .shp file.  Is their any 
> parameter that I should add when running gdal_translate, gdaladdo or 
> gdaltindex to make it more efficient or stable?

John,

This is indeed unsafe and could result in corruption of the index.  I
would suggest doing the gdal_translate, and gdaladdo "in parallel", but
doing the index creation in a single run afterwards. Index creation is
very fast compared to translation and adding overviews.

Note, if you are seeing surprisingly slow performance in gdal_translate
or gdaladdo it may be suffering from "cache thrashing", in which case
setting the GDAL_CACHEMAX environment variable to a reasonable size may
help.

eg
set GDAL_CACHEMAX=200

(for 200MB).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hernan.deangelis at glocalnet.net  Mon Jan 15 15:31:32 2007
From: hernan.deangelis at glocalnet.net (=?iso-8859-2?q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] negative nodata value loaded as positive in gdal 1.4.0
In-Reply-To: <45A9FAB2.3050102@o2.pl>
References: <200701140129.19846.hernan.deangelis@glocalnet.net>
	<45A9FAB2.3050102@o2.pl>
Message-ID: <200701152131.32904.hernan.deangelis@glocalnet.net>

Maciek,

> FWIW, this is not correct. r.in.srtm is a script which uses r.in.gdal,
> not gdal_translate.
Thanks for responding and thanks for pointing out this mistake.

Today I tried a large number of SRTM tiles, including 1" and 3" as well as  
versions 1 and 2 and the problem is still present, so I also came to the 
conclusion that it is likely a bug in GDAL. I hope some one else can comfirm 
this.

Thanks

Hern?n


> However, both r.in.gdal and gdal_translate have the problem Hern?n
> describes, so propapably this is an issue with GDAL itself; unless an
> issue with some problematic SRTM tiles, ?. I'm not up to tracing it
> down exactly, but anybody who can please read below.

> > nodata values are loaded
> > as 32768 (positive) even when -32768 is explicitly set in the script.
> > After import gdalinfo reports nodata as -32768, but r.info (in GRASS),
> > cmm (in OSSIM) and OpeneEV all report these cells as 32768 (positive). I
> > am using gdal 1.4.0. Is anyone else having this problem as well?
>
> I confirm. I can reproduce this with some 3" tiles, eg:
> ftp://e0srp01u.ecs.nasa.gov/srtm/version2/SRTM3/Eurasia/N49E023.hgt.zip
>
> I checked whether this is related to the SRTM version - it's not; same
> problem with the version 1 at:
> ftp://e0srp01u.ecs.nasa.gov/srtm/version1/Eurasia/N49E023.hgt.zip
>
> After importing the tile into GRASS with r.in.srtm (ie. r.in.gdal), the
> max value of the output raster is 32768 - wrong. Should be circa 1200.
> Min is OK - 153.
>
> I have also checked with gdal_translate, and the same issue remains.
> The value range is reported as 153-32768, see:
>
> $ gdalinfo N49E023.bil -mm
> Driver: EHdr/ESRI .hdr Labelled
> Size is 1201, 1201
> Coordinate System is `'
> Origin = (22.999583333333334,50.000416666666666)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Corner Coordinates:
> Upper Left  (  22.9995833,  50.0004167)
> Lower Left  (  22.9995833,  48.9995833)
> Upper Right (  24.0004167,  50.0004167)
> Lower Right (  24.0004167,  48.9995833)
> Center      (  23.5000000,  49.5000000)
> Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
>     Computed Min/Max=153.000,32768.000
>   NoData Value=-32768
>
> I have put the problematic SRTM V2 tile N49E023 (converted into
> bil+hdr) for download here:
>
> http://kufaya.googlepages.com/srtm_v2_N49E023_bil_hdr.tar.bz2
>
> Using GDAL 1.4 CVS 2007-01-14 (today).
>
> Maciek

-- 
Hern?n De Angelis
Linux user # 397217


From warmerdam at pobox.com  Mon Jan 15 16:34:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Motion: Commit Access for Martin Chapman
In-Reply-To: <45AAA0F3.1050800@pobox.com>
References: <45AAA0F3.1050800@pobox.com>
Message-ID: <45ABF34B.3030301@pobox.com>

Frank Warmerdam wrote:
> Motion: To give Martin Chapman commit access on GDAL/OGR.

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Jan 15 16:34:17 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45A9397C.1040904@pobox.com>
References: <45A9397C.1040904@pobox.com>
Message-ID: <45ABF359.3010403@pobox.com>

Frank Warmerdam wrote:
> 
> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a contract
> with Mateusz Loskot for 600 hours of GDAL maintenance over six months for
> $9000.00 USD.  The maintenance work will be governed by RFC 9 with an added
> focus on resolving GDAL provenance issues in order to graduate OSGeo
> incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).

+1


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Jan 15 16:34:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
In-Reply-To: <45A93719.30502@pobox.com>
References: <45A93719.30502@pobox.com>
Message-ID: <45ABF365.8090402@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> I've made a few adjustments based on various suggestions, and now I'd like
> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
> 
>   http://www.gdal.org/rfc9_maintainer.html

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Mon Jan 15 17:44:57 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] gdal_translate 1.4.0 problem
Message-ID: <3054411AF4728548AD6D7137190D56B302B5787C@admin1.aeromap.com>

Hello.
I got a problem with gdal_translate utility. Using simplest form:
gdal_translate rgb32.tif rgb32_copyGdal.tif
produced distorted output image so some sw can not open it. 
The same distorted image I got from fwTools112 (File/Export option).
Original image is 8 bits/sample, 3 samples/pixel, RGB color model, no compression.
The tiffcp 3.8.2 works fine. 
Platform: winXP + msvc8.0
Test image is here: ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com, go to gok/imageProcessing folder.
Could somebody help to figure out which part of translate process is wrong?
Thanks,
Gennady


From rayg at daylongraphics.com  Mon Jan 15 18:24:44 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Re: Motion: Pass RFC 9 - GDAL Paid Maintainer
	Guidelines
In-Reply-To: <45ABF365.8090402@pobox.com>
References: <45A93719.30502@pobox.com> <45ABF365.8090402@pobox.com>
Message-ID: <45AC0D3C.7040700@daylongraphics.com>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> I've made a few adjustments based on various suggestions, and now I'd 
>> like
>> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
>>
>>   http://www.gdal.org/rfc9_maintainer.html
> 
> +1
> 

fwiw, I just wanted to mention something about RFC 9.

The thing with software development is maintanance and therefore 
experience. I'm not talking about experience in the sense of being 
qualified -- that's a given. What I mean is that, somebody works on an 
area, they're going to increase their experience of it, and that's where 
the long-term value lies. Once you "GDAL-ify" a person, that's valuable. 
And you want to reduce the time it takes to GDAL-ify people whenever 
possible.

Responsibility #3 is there, but I'm saying, maybe that should be 
mandatory when doing any source code work. Of course, a lot of devs hate 
writing docs (I even met some who deliberately didn't do it because they 
were trying to make their clients more dependant on them), so you might 
want to qualify based on that metric.

Ray


From warmerdam at pobox.com  Mon Jan 15 19:04:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] gdal_translate 1.4.0 problem
In-Reply-To: <3054411AF4728548AD6D7137190D56B302B5787C@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B302B5787C@admin1.aeromap.com>
Message-ID: <45AC167F.4040106@pobox.com>

Gennady Khokhorin wrote:
> Hello.
> I got a problem with gdal_translate utility. Using simplest form:
> gdal_translate rgb32.tif rgb32_copyGdal.tif
> produced distorted output image so some sw can not open it. 
> The same distorted image I got from fwTools112 (File/Export option).
> Original image is 8 bits/sample, 3 samples/pixel, RGB color model, no compression.
> The tiffcp 3.8.2 works fine. 
> Platform: winXP + msvc8.0
> Test image is here: ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com, go to gok/imageProcessing folder.
> Could somebody help to figure out which part of translate process is wrong?

Gennady,

By default GDAL produces planar configuration "seperate" files - essentially
band sequential organization.  But the more common organization of TIFF files
is "single plane" or which is pixel interleaved.  Some applications only
support pixel interleaved.

If you add "-co INTERLEAVE=PIXEL" in the gdal_translate command, then the
more widely accepted form of the file will be produced.

I checked your files, and they seem to confirm the above problem.  The output
file looks fine in OpenEV.

The default to INTERLEAVE=BAND in the geotiff driver is quite dubious given
the compatability problems is has raised in the past.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 16 01:18:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] SVN Transition
Message-ID: <45AC6E50.1060309@pobox.com>

Folks,

With the help of Howard Butler and Shawn Barnes the migration of the GDAL
repository to SVN hosted at OSGeo has been successful.  However, I have yet
to address "commiter authorization" on the new system for anyone except Howard,
Mateusz and I.  I hope to resolve this tomorrow (Tuesday).

So far:
  o The repository lives at: http://svn.osgeo.org/svn/gdal and can be browsed
    using this url.
  o The respository includes images for the various tagged versions (1.4.0,
    1.3.2, etc) under the tags directory.
  o The repository includes gdalautotest (now named autotest) though the history
    for the autotests was lost in the transition (it was not lost for GDAL
    itself)
  o The www.gdal.org web site is being rebuilt from the subversion respository.
  o I have changed the gdal.maptools.org and www.remotesensing.org/gdal mirrors
    to just redirect to www.gdal.org for now.
  o A gdal-commits mailing list has been established and is working at
    http://lists.osgeo.org/mailman/listinfo/gdal-commits
  o The nightly snapshots should be working, and available at:
    http://www.gdal.org/dl/daily
  o Howard has the CIA-bot in the #gdal IRC channel also reporting commits
    to subversion.
  o I have created the 1.4 branch in Subversion.  So now any bug fix that
    needs to apply in 1.4.1 as opposed to just 1.5.0 will need to be back
    ported, or merged into the 1.4 branch.
  o I have stripped the $Log$ logs from most files as they cannot be
    maintained properly in subversion.  If you happen to be modifying a file
    (such as .py scripts and some other files) with a log in it, please clip
    it out.

Right now a read-only copy of the repository can be fetched with the command:

  svn checkout http://svn.osgeo.org/svn/gdal/trunk/gdal gdal

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mbaye1234 at yahoo.fr  Tue Jan 16 05:17:13 2007
From: mbaye1234 at yahoo.fr (mbaye)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] OGR reading vector
Message-ID: <8387596.post@talk.nabble.com>


I want to make the reading of file vector out of C # with ogr on the tutorial
C ++ I saw 
wkbFlatten (poGeometry->getGeometryType ()) == wkbPoint) 
and 
OGRPoint 
I wanted to have the equivalents in c# thank you for your assistance 
-- 
View this message in context: http://www.nabble.com/OGR-reading-vector-tf3020084.html#a8387596
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From szekerest at gmail.com  Tue Jan 16 06:27:57 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] OGR reading vector
In-Reply-To: <8387596.post@talk.nabble.com>
References: <8387596.post@talk.nabble.com>
Message-ID: <f3b73b7d0701160327n4981acb1o4931241547eaa4a0@mail.gmail.com>

Hi,

You should use the generic Geometry class instead of OGRPoint. In
addition wkbFlatten is currently not exposed to the SWIG interface.
Here is a raw C# equivalent of the sampe mentioned at the tutorial
(not tested):

Feature feat;
layer.ResetReading();
while( (feat = layer.GetNextFeature()) != null )
{
	Geometry geom = feat.GetGeometryRef();
	if( geom != null && geom.GetGeometryType() == ogr.wkbPoint)
	{
		Trace.WriteLine(geom.GetX().ToString() + "," + geom.GetY().ToString());
	}
	else
	{
		Trace.WriteLine("no point geometry");
	}
	feat.Dispose();
}

For more examples about the OGR C# usage, see the createdata.cs and
the ogrinfo.cs examples at the csharp/apps directory.


Best Regards,

Tamas Szekeres


2007/1/16, mbaye <mbaye1234@yahoo.fr>:
>
> I want to make the reading of file vector out of C # with ogr on the tutorial
> C ++ I saw
> wkbFlatten (poGeometry->getGeometryType ()) == wkbPoint)
> and
> OGRPoint
> I wanted to have the equivalents in c# thank you for your assistance
> --
> View this message in context: http://www.nabble.com/OGR-reading-vector-tf3020084.html#a8387596
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From neteler at itc.it  Tue Jan 16 08:30:12 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] r.out.gdal: SetColorInterpretation() not supported
Message-ID: <20070116133011.GH6232@bartok.itc.it>

Hi,

for some weeks we have a nice C implementation of r.out.gdal
in GRASS, but a color table problem remains:

GRASS 6.3.cvs (spearfish60): > r.out.gdal fields out=fields.tif
ERROR 6: SetColorInterpretation() not supported for this dataset.
 100%
Done!

GRASS 6.3.cvs (spearfish60): > r.info -t fields
datatype=CELL

GRASS 6.3.cvs (spearfish60): > r.info -r fields
min=1
max=63

The (probably) relevant line in the main.c file is:
    /* Set color interpretation. TODO: Implement this better ... */
    GDALSetRasterColorInterpretation(hBand, ((band + 3) % 4 + GCI_RedBand));

Maybe it fails on an 8 bit range?

Suggestion are welcome as colorized export is an important thing,
thanks
Markus

From whughes at nb.sympatico.ca  Tue Jan 16 09:40:29 2007
From: whughes at nb.sympatico.ca (William Hughes)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Question about gdal_contour
Message-ID: <45ACE3DD.8090307@nb.sympatico.ca>

Hi:

      I am trying to use gdal_contour.  When I call it with a couple
of simple options the lines produced have nodes with coordinates
in raw pixel, line space.  Is there an easy way to change these
to georeferenced?

                                       - William Hughes

From warmerdam at pobox.com  Tue Jan 16 11:33:35 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Question about gdal_contour
In-Reply-To: <45ACE3DD.8090307@nb.sympatico.ca>
References: <45ACE3DD.8090307@nb.sympatico.ca>
Message-ID: <45ACFE5F.9060908@pobox.com>

William Hughes wrote:
> Hi:
> 
>      I am trying to use gdal_contour.  When I call it with a couple
> of simple options the lines produced have nodes with coordinates
> in raw pixel, line space.  Is there an easy way to change these
> to georeferenced?

William,

If the source file has a meaningful geotransform, then it should be used
to convert the locations into georeferenced coordinates as the contour
generation runs.  However, if you only have GCPs then there is currently
no mechanism to use those to establish georeferencing for the contours.

There is one funny aspect to the way the contour algorithm gets the
geotransform.  It has to ask for the dataset from the band object
internally, and it is vaguely possible this could be linking back to a
dummy band in some cases (some format drivers).  So if you believe you
have a geotransform but you aren't getting georeferenced vectors let me
know the details of the input format - perhaps a gdalinfo report.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 16 11:42:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] r.out.gdal: SetColorInterpretation() not supported
In-Reply-To: <20070116133011.GH6232@bartok.itc.it>
References: <20070116133011.GH6232@bartok.itc.it>
Message-ID: <45AD0087.6090409@pobox.com>

Markus Neteler wrote:
> Hi,
> 
> for some weeks we have a nice C implementation of r.out.gdal
> in GRASS, but a color table problem remains:
> 
> GRASS 6.3.cvs (spearfish60): > r.out.gdal fields out=fields.tif
> ERROR 6: SetColorInterpretation() not supported for this dataset.
>  100%
> Done!
> 
> GRASS 6.3.cvs (spearfish60): > r.info -t fields
> datatype=CELL
> 
> GRASS 6.3.cvs (spearfish60): > r.info -r fields
> min=1
> max=63
> 
> The (probably) relevant line in the main.c file is:
>     /* Set color interpretation. TODO: Implement this better ... */
>     GDALSetRasterColorInterpretation(hBand, ((band + 3) % 4 + GCI_RedBand));
> 
> Maybe it fails on an 8 bit range?
> 
> Suggestion are welcome as colorized export is an important thing,

Markus,

The GeoTIFF driver provides very little post-creation control over band
color interpretations.  The actual implementation only supports marking
band 2 or 4 of a greyscale or rgb file as alpha.  All other efforts are
essentially passed on to the generic implementation which produces the
error you see.

That doesn't necessarily mean the color interpretation is set wrong, though
it could.

I would add that most other drivers also have no meaningful implementation
of this method.

My suggestion is to call:

   CPLPushErrorHandler( CPLQuietErrorHandler );

just before calling GDALSetRasterColorInterpretation() and then:

   CPLPopErrorHandler();

just afterwards.  This will at least supress the confusing message.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Martel at drdc-rddc.gc.ca  Tue Jan 16 12:03:16 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Dataset instance has no attribute 'GetMetadataItem'
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

With fwtools 1.1.3 on XP, I wrote this python script :

import gdal
gdal.AllRegister()
dataset =
gdal.Open('d:/geodata/digest/cib/cb05NJ1701_2/rpf/GJKJI22/00A56324.I22')
fdt = dataset.GetMetadataItem("NITF_FDT")
print fdt

I get 
AttributeError: Dataset instance has no attribute 'GetMetadataItem'

I get the same answer with a tiff file.
Plain GetMetadata() works great but I'd like to get specific item.

I found no sample python script using GetMetadataItem. How should I call
it ?

Thanks,
Christian


From mateusz at loskot.net  Tue Jan 16 12:19:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Dataset instance has no attribute 'GetMetadataItem'
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45AD0925.8030206@loskot.net>

Martel, Christian wrote:
> Hi,
> 
> With fwtools 1.1.3 on XP, I wrote this python script :
> 
> import gdal
> gdal.AllRegister()
> dataset =
> gdal.Open('d:/geodata/digest/cib/cb05NJ1701_2/rpf/GJKJI22/00A56324.I22')
> fdt = dataset.GetMetadataItem("NITF_FDT")
> print fdt
> 
> I get 
> AttributeError: Dataset instance has no attribute 'GetMetadataItem'
> 
> I get the same answer with a tiff file.
> Plain GetMetadata() works great but I'd like to get specific item.
> 
> I found no sample python script using GetMetadataItem. How should I call
> it ?

Martel,

Under Python, there is no need for GetMetadataItem(), becasue
GetMetadata returns dictionary, so here is how you can access its elements:

fdt = dataset.GetMEtadata()
print fdt['NITF_FDT']


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From neteler at itc.it  Tue Jan 16 12:22:57 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] r.out.gdal: SetColorInterpretation() not supported
In-Reply-To: <45AD0087.6090409@pobox.com>
References: <20070116133011.GH6232@bartok.itc.it> <45AD0087.6090409@pobox.com>
Message-ID: <20070116172256.GM6232@bartok.itc.it>

On Tue, Jan 16, 2007 at 11:42:47AM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >Hi,
> >
> >for some weeks we have a nice C implementation of r.out.gdal
> >in GRASS, but a color table problem remains:
> >
> >GRASS 6.3.cvs (spearfish60): > r.out.gdal fields out=fields.tif
> >ERROR 6: SetColorInterpretation() not supported for this dataset.
> > 100%
> >Done!
> >
> >GRASS 6.3.cvs (spearfish60): > r.info -t fields
> >datatype=CELL
> >
> >GRASS 6.3.cvs (spearfish60): > r.info -r fields
> >min=1
> >max=63
> >
> >The (probably) relevant line in the main.c file is:
> >    /* Set color interpretation. TODO: Implement this better ... */
> >    GDALSetRasterColorInterpretation(hBand, ((band + 3) % 4 + 
> >    GCI_RedBand));
> >
> >Maybe it fails on an 8 bit range?
> >
> >Suggestion are welcome as colorized export is an important thing,
> 
> Markus,
> 
> The GeoTIFF driver provides very little post-creation control over band
> color interpretations.  The actual implementation only supports marking
> band 2 or 4 of a greyscale or rgb file as alpha.  All other efforts are
> essentially passed on to the generic implementation which produces the
> error you see.
> 
> That doesn't necessarily mean the color interpretation is set wrong, though
> it could.
> 
> I would add that most other drivers also have no meaningful implementation
> of this method.
> 
> My suggestion is to call:
> 
>   CPLPushErrorHandler( CPLQuietErrorHandler );
> 
> just before calling GDALSetRasterColorInterpretation() and then:
> 
>   CPLPopErrorHandler();
> 
> just afterwards.  This will at least supress the confusing message.
> 

Frank,

in fact the message is right since the result does not contain
color (which is essentially my problem). I also tried the HFA
driver to no avail.

In summary: the resulting file becomes grey scale.

Best,
Markus

PS: Using today's SVN

From warmerdam at pobox.com  Tue Jan 16 12:27:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Dataset instance has no attribute 'GetMetadataItem'
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45AD0B14.1080507@pobox.com>

Martel, Christian wrote:
> Hi,
> 
> With fwtools 1.1.3 on XP, I wrote this python script :
> 
> import gdal
> gdal.AllRegister()
> dataset =
> gdal.Open('d:/geodata/digest/cib/cb05NJ1701_2/rpf/GJKJI22/00A56324.I22')
> fdt = dataset.GetMetadataItem("NITF_FDT")
> print fdt
> 
> I get 
> AttributeError: Dataset instance has no attribute 'GetMetadataItem'
> 
> I get the same answer with a tiff file.
> Plain GetMetadata() works great but I'd like to get specific item.
> 
> I found no sample python script using GetMetadataItem. How should I call
> it ?

Christian,

I see that neither the old nor the new python bindings have a getmetadataitem
operation.  You basically have to fetch all the metadata, and then check for
the individual item.

eg.

   md = dataset.GetMetadata()
   if md.has_key('NITF_FDT'):
     print md['NITF_FDT']

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 16 13:00:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] r.out.gdal: SetColorInterpretation() not supported
In-Reply-To: <20070116172256.GM6232@bartok.itc.it>
References: <20070116133011.GH6232@bartok.itc.it> <45AD0087.6090409@pobox.com>
	<20070116172256.GM6232@bartok.itc.it>
Message-ID: <45AD12BE.6090603@pobox.com>

Markus Neteler wrote:
> Frank,
> 
> in fact the message is right since the result does not contain
> color (which is essentially my problem). I also tried the HFA
> driver to no avail.
> 
> In summary: the resulting file becomes grey scale.

Markus,

What *should* the file be?  Is it supposed to have a color table?

Generally speaking to produce a GeoTIFF file with a color table after using
Create() to create it, you need to do the SetColorTable() *before* writing
any raster data.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Tue Jan 16 15:30:50 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] gdalwarp: what is wrong with unit foot?
Message-ID: <3054411AF4728548AD6D7137190D56B30C459E@admin1.aeromap.com>

Was testing gdalwarp converting images from one coord. system to another and found that using WKT
in form of esri' .prj file is producing Unknown units on result image if .prj contains UNIT["Foot_US", 0.3048].
As a result it is interpreted as a meters and output image seats in wrong position.
Using projections with units Meter is fine.

Command line for the test:
gdalwarp.exe -rn -co "INTERLEAVE=PIXEL" -co "COMPRESS=LZW" -t_srs "ESRI::c:\shared\NAD 1983 StatePlane Alaska 4 FIPS 5004 (Feet).prj" -dstnodata 255 i61147a1_utm.tif i61147a1_asp.tif

Test image i61147a1_utm.tif (36Mb): ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com (gok/ImageProcessing folder)

Could somebody help to setup right flags, please. Or is it PROJ.4 fault?

Thanks in advance,
Gennady


From Christian.Martel at drdc-rddc.gc.ca  Tue Jan 16 15:52:47 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:35 2007
Subject: [Gdal-dev] Dataset instance has no attribute 'GetMetadataItem'
In-Reply-To: <45AD0B14.1080507@pobox.com>
References: <D8AD814B3EB3A945B7F149E41240DB6D1037DB@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<45AD0B14.1080507@pobox.com>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1037DE@valcartierex01.valcartier.drdc-rddc.gc.ca>

------This message was previously sent only to Frank (reply instead of
reply to all). My apologizes to all list members.------

Mateusz,
Frank,

Thanks for the quick answer.
I was aware of that solution. I though GetMetadataItem would be faster
because I want to extract the same metadata from hundreds of files (a
whole CIB CD). 

Thanks,
Christian

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: 16 janvier 2007 12:28
> To: Martel, Christian
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Dataset instance has no attribute 
> 'GetMetadataItem'
> 
> Martel, Christian wrote:
> > Hi,
> > 
> > With fwtools 1.1.3 on XP, I wrote this python script :
> > 
> > import gdal
> > gdal.AllRegister()
> > dataset =
> > 
> gdal.Open('d:/geodata/digest/cib/cb05NJ1701_2/rpf/GJKJI22/00A56324.I22
> > ') fdt = dataset.GetMetadataItem("NITF_FDT")
> > print fdt
> > 
> > I get
> > AttributeError: Dataset instance has no attribute 'GetMetadataItem'
> > 
> > I get the same answer with a tiff file.
> > Plain GetMetadata() works great but I'd like to get specific item.
> > 
> > I found no sample python script using GetMetadataItem. How should I 
> > call it ?
> 
> Christian,
> 
> I see that neither the old nor the new python bindings have a 
> getmetadataitem operation.  You basically have to fetch all 
> the metadata, and then check for the individual item.
> 
> eg.
> 
>    md = dataset.GetMetadata()
>    if md.has_key('NITF_FDT'):
>      print md['NITF_FDT']
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
> http://osgeo.org
> 
> 


From petermorgan at grapevine.net.au  Tue Jan 16 16:07:53 2007
From: petermorgan at grapevine.net.au (Peter Morgan)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] using gdal_translate -of GMT
Message-ID: <45AD3EA9.1090905@grapevine.net.au>

Dear GDAL
recently in the GMT users group the GDAL translator was mentioned as a 
way of importing into GMT data from the USGS seamless server.

I went away and installed GDAL on my Centos 4.4 operating system hoping 
to test this appealing approach.
I use a 32 bit AMD chip on my machine.

I then went to the USGS seamless server and extracted an image.
running gdalinfo on the data set produces a nice lot of meta data.
Here is a copy

[peterm@currawong 76906435]$ /usr/local/bin/gdalinfo w001001.adf
Driver: AIG/Arc/Info Binary Grid
Size is 2345, 1753
Coordinate System is:
GEOGCS["WGS 84",
   DATUM["WGS_1984",
       SPHEROID["WGS 84",6378137,298.257223563,
           AUTHORITY["EPSG","7030"]],
       TOWGS84[0,0,0,0,0,0,0],
       AUTHORITY["EPSG","6326"]],
   PRIMEM["Greenwich",0,
       AUTHORITY["EPSG","8901"]],
   UNIT["degree",0.0174532925199433,
       AUTHORITY["EPSG","9108"]],
   AXIS["Lat",NORTH],
   AXIS["Long",EAST],
   AUTHORITY["EPSG","4326"]]
Origin = (113.557499994722235,5.295000001108752)
Pixel Size = (0.000833333333300,-0.000833333333300)
Corner Coordinates:
Upper Left  ( 113.5575000,   5.2950000)
Lower Left  ( 113.5575000,   3.8341667)
Upper Right ( 115.5116667,   5.2950000)
Lower Right ( 115.5116667,   3.8341667)
Center      ( 114.5345833,   4.5645833)
Band 1 Block=512x4 Type=Float32, ColorInterp=Undefined
 Min=-15.000 Max=2415.000
 NoData Value=-3.40282346638529e+38

The pixel size is consistent with 3 arc seconds. The width is 1.954167 
degrees which generates 2345 pixels as stated above.

I then ran
gdal_translate [peterm@currawong 76906435]$ gdal_translate w001001.adf 
-of GMT w001001.grd
Input file size is 2345, 1753
[peterm@currawong 76906435]$

The size is correct

now using grdinfo on the GMR grid file I get

[peterm@currawong 76906435]$ grdinfo w001001.grd
w001001.grd: Title:
w001001.grd: Command:
w001001.grd: Remark:
w001001.grd: Normal node registration used
w001001.grd: grdfile format: cf (# 10)
w001001.grd: x_min: 113.557 x_max: 115.512 x_inc: 0.000833333 name: 
meters nx: 2345
w001001.grd: y_min: 3.83417 y_max: 5.295 y_inc: 0.000833333 name: meters 
ny: 1753
w001001.grd: z_min: -15 z_max: 2415 name: meters
w001001.grd: scale_factor: 1 add_offset: 0
[peterm@currawong 76906435]$

Again the sizes are correct.
Initially I didn't pay too much attention to the grid sizes as I thought 
that it was "conventional" truncation as the
number of grids is what is necessary. However using the GMT info you get 
a longitude difference of 1.955 degrees which equates to 2346 pixels. 
One additional pixel.

Now testing with a simple GMT script which is as follows

#! /bin/tcsh -f
echo "test on Brunei data from USGS seamless"
#set up contouring
makecpt -Cjet  -T-50/1950/25  > topo.cpt
set region =  -R114./115.50/4./5.10
set map = -Jm15c
set base = -Ba15mf5mg5m/a15mf5mg5m
psbasemap $region $map $base                              -K      >  
test01.ps
pscoast   $region $map $base  -Df -Na -G230               -K -O   >> 
test01.ps
grdview   $region $map  w001001.grd  -Ctopo.cpt   -Qs   -Wc   -O  >> 
test01.ps
echo "done"


produces the following

test on Brunei data from USGS seamless
grdview: GMT Fatal Error: x-values are not monotonically 
increasing/decreasing!
grdview: GMT Fatal Error: x-values are not monotonically 
increasing/decreasing!
Segmentation fault
done

Hope that you can help me understand these issues
regards Peter

-- 
***************************************
*                                     *
*  Peter and Carol Morgan             *
*  20 Goodparla St                    *
*  Hawker, ACT, 2614                  *
*  Australia                          *
*                                     *
* Home Phone      +61 (0)2 6254 0137  *
* Peter's Mobile  +61 (0)4 1854 0137  *
*                                     *
***************************************


From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 16 16:27:41 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdalwarp -t_srs -s_srs 
Message-ID: <2E58C246F17003499C141D334794D049D587C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

Here are a few questions regarding gdalwarp.  Thanks in advance.

Q1: why do I need -s_srs (source spatial reference) ? I know this is
optional.  But can't this be extract from srcfile?

Q2: -t_srs (target spatial reference) for example -t_srs "+proj=utm
+zone=50 +datum=WGS84" What if the zone is in southern hemisphere? 
I used something like:
    gdalwarp -t_srs "+proj=utm +zone=50K +datum=WGS84" -ts 1500 900
src.tif dst.tif
gdalinfo displays that dst.tif's northing as negative numbers (says it
is in northern hemisphere).
How can I specify -t_srs for southern hemisphere?

Q3: is there any detailed documentation for gdalwarp, with more
examples, instead of the 1-2 pages usage intro?

Q4: Where can I get documentation for OGR Well Known Text?

Shawn Gong


From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 16 17:01:58 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Question- fit to gvviewwindow/opevEV viewarea 
Message-ID: <2E58C246F17003499C141D334794D049D587C1@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

        # the following code opens a new opevEV window, size (620, 680)
as set by gvviewwindow.py
        preview_win = self.gviewapp.new_view(title='preview
window',menufile= 'DefaultMenuFile.xml',iconfile= 'DefaultIconFile.xml')

        # the following code enlarges the opevEV window size
        preview_win.set_usize(1142,901)

However the viewarea remain small (as same as the (620, 680) window)
I want to expand the viewarea to fit the enlarged opevEV window, as if I
click the "fit all layers" icon.
I used the following methods, but none worked:
        preview_win.viewarea.size(1124, 815)
        preview_win.viewarea.fit_all_layers()
        preview_win.viewarea.fit_extents(320134, 5087589, 321294-320134,
5088229-5087589)

Thanks,
Shawn Gong




From matt.wilkie at gov.yk.ca  Tue Jan 16 19:58:09 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Gdalwarp color corruption
In-Reply-To: <006a01c73099$883f2e40$3301a8c0@vaio>
References: <006a01c73099$883f2e40$3301a8c0@vaio>
Message-ID: <45AD74A1.3000003@gov.yk.ca>

Hi Craig,

After last talking to you on friday I pushed my discomfort with gdalwarp 
out of the way and tackled learning it earnestly. I'm very happy to 
report I've found a workflow which works well for us, unlike the 
tortuous spaghetti route I told you about. :) So now I have output 
images which are both colour-faithul and edge-sharp, unlike the ones I 
put up for you to see last week.

The method is simple, but not very efficient:
- Convert 256 colour image to RGB,
- restore georeferencing,
- project and resample,
- convert back to 256c,
- restore georeferencing.

Command sequence:

   :: convert to rgb
   pal2rgb -c lzw orig.tif orig-rgb.tif

   :: restore lost georeferencing
   listgeo -proj4 orig.tif orig.prj
   geotifcp -g orig.prj orig-rgb.tif orig-rgb-geo.tif

   :: project to albers
   gdalwarp --optfile=utm2alb.opt orig-rgb-geo.tif out-rgb.tif

#optfile
-co compress=lzw
-rc
-wm 1500
-t_srs "+proj=aea +lat_1=61.666666667 +lat_2=68.000000000 
+lat_0=59.000000000 +lon_0=-132.500000000 +x_0=500000.000 
+y_0=500000.000 +ellps=GRS80 +units=m"

   :: convert back to 256 colours
   rgb2pct -n 256 out-rgb.tif xx-out-256c.tif

   :: compress 256c
   gdal_translate -co compress=lzw xx-out-256c.tif out-256c.tif

   :: delete intermediate files
   del orig-rgb.tif orig-rgb-geo.tif orig.prj xx-orig-256c.tif


The final 256c images do have dithering artifacts at high zoom levels 
and bright white is now a dim white (RGB:248,248,248).


If I use nconvert instead of pct2rgb to get back to 256c the colour 
fidelity is perfect, although the index order changes. My nconvert 
command is below. I don't know if all the options are needed, probably not:

   :: use nconvert to get back to 256c instead of rgb2pct
   nconvert -npcd 2 -ctype grey -corder inter -ratio -rtype lanczos \
    -c 3 -colours 256 -out tiff -o xx-out-256c.tif out-rgb.tif

   :: restore lost georefencing
   listgeo -proj4 out-rgb.tif  > out-rgb.prj
   geotifcp -g out-rgb.prj out-256c.tif out-256c-geo.tif


I've asked nconvert author Pierre Gougelet about making it geotiff aware 
and he's going to look into it. To keep the whole toolchain open source 
though would require adding lanczos or some other colour reduction 
algorithm to rgb2pct (I think).





Craig Miller wrote:
> I've been using gdalwarp to reproject USGS quads (single band geotif images
> with color table) from UTM zone 10/11 to geographic (EPSG:4326).  If I use
> nearest neighbor sampling (-rn) the color table gets translated correctly,
> but if I use bilinear, cubic, or cubic spline resampling the color table is
> corrupted.  For example, blue water turns brown.  As nearest neighbor
> sampling doesn't always offer up the smoothest results I'm hoping to get
> cubic spline resampling working.  Any suggestions on how to get this working
> w/o corrupting my color table?
> 
> I'm using gdal out of CVS from a couple of weeks ago.
> 
> Gdalwarp -rcs -co "COMPRESS=LZW" -co "TILED=YES" -wo "INIT_DEST=NO_DATA"
> -t_srs EPSG:4326 infile.tif ..\geo\outfile.tif
> 
> I'd be happy to provide sample images, but they are a bit large so I didn't
> want to send them to the list.
> 
> Thanks for the help,
> Craig
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From chaumic at netvigator.com  Mon Jan 15 07:50:17 2007
From: chaumic at netvigator.com (Michael Chau)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile S-57 reader in ogrst_frmts
Message-ID: <8371096.post@talk.nabble.com>


Dear All,

   I'm new to c++ programming. 

I would like to compile the S57reader.cpp inside the ogrsf_frmts folder but
in vain.
Could some one suggest the proper makefile.vc for that.

Thank you

Michael

-- 
View this message in context: http://www.nabble.com/compile-S-57-reader-in-ogrst_frmts-tf3014479.html#a8371096
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Tue Jan 16 23:50:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDAL Commiters Enabled
Message-ID: <45ADAB14.9000507@pobox.com>

Folks,

I have sent out private messages to all GDAL commiters with details about
subversion access.  If you didn't get an email then I either forgot you,
or you were not listed as having agreed to RFC 3 in the COMMITERS files.
If so, please get in contact with me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 16 23:55:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45A9397C.1040904@pobox.com>
References: <45A9397C.1040904@pobox.com>
Message-ID: <45ADAC5F.5090909@pobox.com>

Frank Warmerdam wrote:
> 
> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a contract
> with Mateusz Loskot for 600 hours of GDAL maintenance over six months for
> $9000.00 USD.  The maintenance work will be governed by RFC 9 with an added
> focus on resolving GDAL provenance issues in order to graduate OSGeo
> incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).

Folks,

I declare this motion passed with the support of the entire PSC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 16 23:58:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: Motion: Pass RFC 9 - GDAL Paid Maintainer Guidelines
In-Reply-To: <45A93719.30502@pobox.com>
References: <45A93719.30502@pobox.com>
Message-ID: <45ADACE3.1070306@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> I've made a few adjustments based on various suggestions, and now I'd like
> to call for a vote on RFC 9 - GDAL Paid Maintainer Guidelines.
> 
>   http://www.gdal.org/rfc9_maintainer.html
> 
> Best regards,

Folks,

I declare RFC 9 - GDAL Paid Maintainer Guidelines passed with support
from Howard, Andrey, Daniel and myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jan 17 00:00:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: Motion: Commit Access for Martin Chapman
In-Reply-To: <45AAA0F3.1050800@pobox.com>
References: <45AAA0F3.1050800@pobox.com>
Message-ID: <45ADAD5E.2080601@pobox.com>

Frank Warmerdam wrote:
> Motion: To give Martin Chapman commit access on GDAL/OGR.

Folks,

I declare this motion passed with support from Daniel, Andrey and myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Wed Jan 17 00:42:18 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal reading dwg/dxf
Message-ID: <3054411AF4728548AD6D7137190D56B30C45A0@admin1.aeromap.com>

Frank,
I did build ogr2ogr able to create .dxf from other vector data (tested dgn, shp).
On reading cad data got an "ERROR 6: DXF/DWG reading not yet implemented".
Wonder what is the future of reading feature? Is it feasible in this year?

With respect,
Gennady


From ari.jolma at tkk.fi  Wed Jan 17 01:55:18 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: Any suggestions for someone who can't upgrade perl
	to 5.8.5?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233D152F3@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233D152F3@COMAIL01.digitalglobe.com>
Message-ID: <45ADC856.3060408@tkk.fi>

Ethan Alpert kirjoitti:
> 
> So I'm stuck with Solaris 10's 5.8.4 and I'm stuck with RH ES3's perl
> 5.8.0 but I want to use GDAL 1.4
> 
> Any suggestions on what I might try to do to get 1.4 with perl install?
> 
> Sorry to bother you but I got caught off guard by the 5.8.5 requirement
> for the perl bindings.


Where does it say that 5.8.5 is required (that's not the case at least
in the .pm's)? Is it implicitly required because of something? Sorry,
but I'm ignorant on the issue.

I'm cc'ing this to the geo-perl and the gdal-dev, please send follow-ups
only to the geo-perl list.

Ari

> 
> -e


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From schut at sarvision.nl  Wed Jan 17 02:38:22 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] python import error: undefined symbol: SWIG_MakePtr
Message-ID: <45ADD26E.4050604@sarvision.nl>

Hi all,

with a fresh svn checkout of gdal and using the oldfashioned python 
bindings, I get the following error:

Python 2.5 (r25:51908, Oct 27 2006, 11:17:07)
[GCC 4.1.1 (Gentoo 4.1.1-r1)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
 >>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.5/site-packages/gdal.py", line 191, in <module>
    import _gdal
ImportError: /usr/lib64/python2.5/site-packages/_gdalmodule.so: 
undefined symbol: SWIG_MakePtr
 >>>

Btw subversion is working, I could do an anonymous checkout without any 
problems.

Vincent.

From SriRam.PrasadBhasker at rmsi.com  Wed Jan 17 02:55:48 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDAL RGB PIXEL READING
Message-ID: <OFCCD729DF.6423A63B-ON65257266.002B72A7-65257266.002B901D@rmsi.com>

hi.

has anyone got some source code to print the RGB values from an RGB Image.

I have an RGB Image (3 Band Image)

i need to programaticlaly create a new Image (swapping the Values of RGB 
as BGR) 

any help is welcome

cheers
s.p.bhasker

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070117/7827d071/attachment.html
From mateusz at loskot.net  Wed Jan 17 06:08:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: Motion: Six month maintenance contract with Matuesz
	Loskot
In-Reply-To: <45ADAC5F.5090909@pobox.com>
References: <45A9397C.1040904@pobox.com> <45ADAC5F.5090909@pobox.com>
Message-ID: <45AE03B7.7090603@loskot.net>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>>
>> Motion: The GDAL PSC authorizes Frank Warmerdam to negotiate a contract
>> with Mateusz Loskot for 600 hours of GDAL maintenance over six months for
>> $9000.00 USD.  The maintenance work will be governed by RFC 9 with an
>> added
>> focus on resolving GDAL provenance issues in order to graduate OSGeo
>> incubation.  Frank Warmerdam is designated as supervisor (per RFC 9).
> 
> Folks,
> 
> I declare this motion passed with the support of the entire PSC.

Folks,

Thank you very much!
It's been my pleasure and honor to work with you for GDAL and
I'm very happy of this opportunity of continuation.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Jan 17 07:26:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile S-57 reader in ogrst_frmts
In-Reply-To: <8371096.post@talk.nabble.com>
References: <8371096.post@talk.nabble.com>
Message-ID: <45AE15EF.7080904@loskot.net>

Michael Chau wrote:
> Dear All,
> 
>    I'm new to c++ programming. 
> 
> I would like to compile the S57reader.cpp inside the ogrsf_frmts folder but
> in vain.
> Could some one suggest the proper makefile.vc for that.

S57 build is on by default.
Run nmake /f makefile.vc in the main gdal directory and should work.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From whughes at nb.sympatico.ca  Wed Jan 17 08:40:11 2007
From: whughes at nb.sympatico.ca (William Hughes)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDAL RGB PIXEL READING
In-Reply-To: <OFCCD729DF.6423A63B-ON65257266.002B72A7-65257266.002B901D@rmsi.com>
References: <OFCCD729DF.6423A63B-ON65257266.002B72A7-65257266.002B901D@rmsi.com>
Message-ID: <45AE273B.7080207@nb.sympatico.ca>

SriRam Prasad Bhasker wrote:

>hi.
>
>has anyone got some source code to print the RGB values from an RGB Image.
>
>I have an RGB Image (3 Band Image)
>
>i need to programaticlaly create a new Image (swapping the Values of RGB 
>as BGR) 
>
>any help is welcome
>
>cheers
>s.p.bhasker
>
>
>  
>


I would do this by

       breaking up the image into three bands A, B and C.
       creating a new image with the bands C, B and A
       (add projection and georeferencing if needed)

To get the bands I would use dataset.GetRasterBand( 1 | 2 | 3 )

To create the new image I would write these bands to disk
as temporary files and use vrtutils from OpenEV to
create a virtual three band image and open this as
a gdal dataset.

I suspect

      -you do not want to import the whole of OpenEV
       to do this (on the other hand, if OpenEV is
       available (e.g. you are working in python and
       import vrtutils works), this may be of some use).

     -I am doing things the hard way  (even taking into
      account that I already have OpenEV available)

I don't have any code that does exactly what you
want. but the functions I use are
    vrtutils.VRTDatasetConstructor
    .AddSimpleBand

                                - William Hughes


    







>------------------------------------------------------------------------
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070117/354b3d27/attachment.html
From hannes.reuter at jrc.it  Wed Jan 17 08:36:57 2007
From: hannes.reuter at jrc.it (Hannes Isaak Reuter)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Maximum number of GCP at gdal_translate
Message-ID: <459C056800038837@cheetah-1.jrc.it> (added by postmaster@jrc.it)

Dear Gdal people,

anyone experience with the maximum number of GCPS one can specify at 
the commandline ?

Hannes
  


From neteler at itc.it  Wed Jan 17 10:43:57 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] r.out.gdal: SetColorInterpretation() not supported
In-Reply-To: <45AD12BE.6090603@pobox.com>
References: <20070116133011.GH6232@bartok.itc.it> <45AD0087.6090409@pobox.com>
	<20070116172256.GM6232@bartok.itc.it> <45AD12BE.6090603@pobox.com>
Message-ID: <20070117154357.GD22844@bartok.itc.it>

On Tue, Jan 16, 2007 at 01:00:30PM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >Frank,
> >
> >in fact the message is right since the result does not contain
> >color (which is essentially my problem). I also tried the HFA
> >driver to no avail.
> >
> >In summary: the resulting file becomes grey scale.
> 
> Markus,
> 
> What *should* the file be?  Is it supposed to have a color table?

Frank,

yes.
 
> Generally speaking to produce a GeoTIFF file with a color table after using
> Create() to create it, you need to do the SetColorTable() *before* writing
> any raster data.

I have added some code to r.out.gdal. It seems to generate the
color rules, but insists on ColorInterp=gray. Anyway, maybe
we figure it out on the GRASS-dev list.

thanks,
Markus


From tutey at o2.pl  Wed Jan 17 11:36:39 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:36 2007
Subject: [GRASS-dev] Re: [Gdal-dev] GDAL/OGR 1.4.0 Released [SOLVED}
In-Reply-To: <45AE4D44.20902@o2.pl>
References: <459FE60D.1070001@pobox.com>
	<45A9FEAC.9090305@o2.pl>	<20070114193921.GB24022@bartok.itc.it>
	<45AA96D6.5020909@o2.pl>	<20070116135215.GI6232@bartok.itc.it>
	<45AD10AA.6020808@o2.pl>	<20070116205432.GB17578@bartok.itc.it>
	<45AE4206.3060605@o2.pl>	<20070117153956.GB22844@bartok.itc.it>
	<45AE4D44.20902@o2.pl>
Message-ID: <45AE5097.7030306@o2.pl>

Maciej Sieczka wrote:
> Markus Neteler wrote:

>> Or that you have two GEOS libs in parallel?

> Nope. Only one. Built myself. Installed into /usr/local.

But yes I have *two*, damn it! And that was the problem!

I have removed the conflicting, second GEOS instalation and now
gdal-grass configures and builds also with GRASS 6.3 CVS, not only with
6.2.

Sorry to Everyone for the fuss and many thanks for this tip, Markus!

Maciek

From warmerdam at pobox.com  Wed Jan 17 17:12:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Maximum number of GCP at gdal_translate
In-Reply-To: <459C056800038837@cheetah-1.jrc.it> (added by postmaster@jrc.it)
References: <459C056800038837@cheetah-1.jrc.it> (added by postmaster@jrc.it)
Message-ID: <45AE9F55.6030508@pobox.com>

Hannes Isaak Reuter wrote:
> Dear Gdal people,
> 
> anyone experience with the maximum number of GCPS one can specify at the 
> commandline ?

Hannes,

In theory there is no practical limit.  In practice you are limited by
whatever the maximum commandline length is on your system (or you can
use the --optfile switch to get some options from a file) and by the
limits on the number of gcps that will fit in a GeoTIFF tag if you are
copying to geotiff.  I think geotiff will allow only something like
1000 gcps (64K / 48 bytes per gcp).

So, if you really want to have a lot of gcps, use --optfile to read them
from a file, and use an output format with no limit, like VRT.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jan 17 17:20:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal reading dwg/dxf
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45A0@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45A0@admin1.aeromap.com>
Message-ID: <45AEA149.5090200@pobox.com>

Gennady Khokhorin wrote:
> Frank,
> I did build ogr2ogr able to create .dxf from other vector data (tested dgn, shp).
> On reading cad data got an "ERROR 6: DXF/DWG reading not yet implemented".
> Wonder what is the future of reading feature? Is it feasible in this year?

Gennady,

I have no particular plans to implementing reading dxf and dwg, though
obviously it would be desirable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Wed Jan 17 17:30:07 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] RE: Any suggestions for someone who can't upgrade perl
	to 5.8.5?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233D1549D@COMAIL01.digitalglobe.com>

Ari the readme says 5.8.5.

Anyhow if I regenerate the wrappers from .i's and compile I can build
into 5.8.0.

Ari any chance you can drop into IRC I have a couple issues to run by
you.

-e

-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Tuesday, January 16, 2007 11:55 PM
To: Ethan Alpert
Cc: geo-perl@list.hut.fi; gdal-dev@lists.maptools.org
Subject: Re: Any suggestions for someone who can't upgrade perl to
5.8.5?

Ethan Alpert kirjoitti:
> 
> So I'm stuck with Solaris 10's 5.8.4 and I'm stuck with RH ES3's perl
> 5.8.0 but I want to use GDAL 1.4
> 
> Any suggestions on what I might try to do to get 1.4 with perl
install?
> 
> Sorry to bother you but I got caught off guard by the 5.8.5
requirement
> for the perl bindings.


Where does it say that 5.8.5 is required (that's not the case at least
in the .pm's)? Is it implicitly required because of something? Sorry,
but I'm ignorant on the issue.

I'm cc'ing this to the geo-perl and the gdal-dev, please send follow-ups
only to the geo-perl list.

Ari

> 
> -e


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Thu Jan 18 06:11:34 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Buildbot reconfiguration
Message-ID: <45AF55E6.4080701@loskot.net>

Hi,

FYI, I've started reconfiguring our buildbot instance.
Currently, only working slaves (ATM, one) are available
on the status waterfall.
I'll add rest of them when they are reconfigured.
All slaves should be back online till Monday.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dpinte at itae.be  Thu Jan 18 08:37:24 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] building gdal 1.4.0 with msvc toolkit 2003,
	geos 3 and python ng-bindings
Message-ID: <1169127444.11483.31.camel@geru-itae>

Skipped content of type multipart/mixed-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070118/d6327202/attachment.bin
From dpinte at itae.be  Thu Jan 18 08:38:00 2007
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ng-python and makefile.vc
Message-ID: <1169127480.11483.34.camel@geru-itae>

Hi,

I have two suggestions related to the ng-python bindings.

[1] Concerning HAVE_NUMPY variable in GDAL_SOURCE\makefile.vc.

Today it seems to be a workaround for people that don't have Numeric and
want to compile the old generation bindings with Numeric support. It has
not any link with the numpy package.

Shouldn't this behaviour be changed to :

HAVE_NUMPY=0 : means compiling the old generation python bindings
HAVE_NUMPY=1 : means compiling the new-generation bindings with numpy

This could also provide a way to compile the new bindings and install
them in the GDAL_HOME\pymod directory in place of the old-generation
bindings

[2] Is there any interest in adding a line to the python target in
GDAL_SOURCE\swig\makefile.vc so that it installs the python package
after having the package ?

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070118/2ce86387/attachment.bin
From dolf.andringa at elcyion.nl  Thu Jan 18 09:26:41 2007
From: dolf.andringa at elcyion.nl (Dolf Andringa)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile problem gdal 1.4 on windows with postgresql
	support
Message-ID: <45AF83A1.3060604@elcyion.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 
Hello Everybody,

I am trying to compile gdal on windows XP. I have MS Visual studio
2005 pro and the windows sdk installed.
Compiling goes fine with the standard nmake.opt file. I want to
include PostgreSQL support though, so I specified the location of the
PostgreSQL 8.1 include and lib dirs. I have the PostgreSQL 8.1
development stuff installed.
During compilation though, I get the error that libpq-fe.h could not
be found.
I checked the include dir, and indeed I do not have libpq-fe.h but
libpq-fs.h
If I change the filename from libpq-fs.h to libpq-fe.h I get syntax
errors though during compilation.
The syntax errors are reported to be in
<gdalsourcedir>\ogr\ogrsf_frmts\pg\ogr_pg.h on line 159
"missing ; before identifier GeometryToOID". There are many more
syntax errors after that but no errors before this error.
Does anybody know why I am getting this error?  Does it have anything
to do with the postgresql version? Hope somebody can shed some light
in it.
Thanks,

Dolf.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
 
iD8DBQFFr4Og4jCQQ91QiKgRAqjiAKCmVBl7/9/rQbbCSXwJYbssC64Q7wCgoRBo
nAF9GoJdLL2Zw2iX6MIagrI=
=9Veq
-----END PGP SIGNATURE-----


From schut at sarvision.nl  Thu Jan 18 09:51:30 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] python import error: undefined symbol: SWIG_MakePtr
In-Reply-To: <45ADD26E.4050604@sarvision.nl>
References: <45ADD26E.4050604@sarvision.nl>
Message-ID: <45AF8972.6030006@sarvision.nl>

Never mind, apparently my svn checkout wasn't complete. Did an update 
today and everything is working again.

Vincent Schut wrote:
> Hi all,
>
> with a fresh svn checkout of gdal and using the oldfashioned python 
> bindings, I get the following error:
>
> Python 2.5 (r25:51908, Oct 27 2006, 11:17:07)
> [GCC 4.1.1 (Gentoo 4.1.1-r1)] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import gdal
> Traceback (most recent call last):
>  File "<stdin>", line 1, in <module>
>  File "/usr/lib64/python2.5/site-packages/gdal.py", line 191, in <module>
>    import _gdal
> ImportError: /usr/lib64/python2.5/site-packages/_gdalmodule.so: 
> undefined symbol: SWIG_MakePtr
> >>>
>
> Btw subversion is working, I could do an anonymous checkout without 
> any problems.
>
> Vincent.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Jan 18 10:07:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ng-python and makefile.vc
In-Reply-To: <1169127480.11483.34.camel@geru-itae>
References: <1169127480.11483.34.camel@geru-itae>
Message-ID: <45AF8D1C.3060503@pobox.com>

Didrik Pinte wrote:
> Hi,
> 
> I have two suggestions related to the ng-python bindings.
> 
> [1] Concerning HAVE_NUMPY variable in GDAL_SOURCE\makefile.vc.
> 
> Today it seems to be a workaround for people that don't have Numeric and
> want to compile the old generation bindings with Numeric support. It has
> not any link with the numpy package.
> 
> Shouldn't this behaviour be changed to :
> 
> HAVE_NUMPY=0 : means compiling the old generation python bindings
> HAVE_NUMPY=1 : means compiling the new-generation bindings with numpy

Didrik,

In the old generation python bindings, the HAVE_NUMPY controlled whether
the code looked for numeric include files to define the layout of numeric
structures, or if a "built in" version of these was used that might or
might not be right depending on the numeric version you were actually
building with.  I have modified the HAVE_NUMPY docs to reflect it only
applies to the old generation bindings:

# Comment out the following if you want to build with Python support, but
# you don't have Numeric Python installed (with include files).  Numeric
# integration may not work.  This only appears to the old generation
# bindings.
#HAVE_NUMPY=1

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Jan 18 10:44:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile problem gdal 1.4 on windows with postgresql
	support
In-Reply-To: <45AF83A1.3060604@elcyion.nl>
References: <45AF83A1.3060604@elcyion.nl>
Message-ID: <45AF95C0.1050005@loskot.net>

Dolf Andringa wrote:
> I want to include PostgreSQL support though, so I specified the location
> of the PostgreSQL 8.1 include and lib dirs. I have the PostgreSQL 8.1
> development stuff installed.

Dolf,

Please, show us the exact path you set for PG_INC_DIR.

> During compilation though, I get the error that libpq-fe.h could not
> be found.
> I checked the include dir, and indeed I do not have libpq-fe.h but
> libpq-fs.h
> If I change the filename from libpq-fs.h to libpq-fe.h I get syntax
> errors though during compilation.

You DON NOT need to rename this file.
libpq-fs.h and libpq-fe.h are different files. The former is for large
objects support, the latter brings in ligpq client library API to client
programs.
Shortly, you need to use libpq-fe.h, but not anything other.

> Does anybody know why I am getting this error? 

The problem is likely with incorrect PG_INC_DIR path.
I suppose you set it as follows:

C:\Program Files\PostgreSQL\8.1\include\libpq

but the correct path should read as:

C:\Program Files\PostgreSQL\8.1\include

> Does it have anything to do with the postgresql version?

I'm not aware of any such reason, about differences between versions.
In December/January I was building GDAL with PostgreSQL 8.1, 8.2 Beta
and 8.2 with success and taking the same steps.

Usually, from PgSQL version to version, the only different part of
default installation path is version number (X.Y), all other path
components are constant:

C:\Program Files\PostgreSQL\X.Y

ie.

C:\Program Files\PostgreSQL\8.1
C:\Program Files\PostgreSQL\8.2


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dolf.andringa at elcyion.nl  Thu Jan 18 11:42:31 2007
From: dolf.andringa at elcyion.nl (Dolf Andringa)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile problem gdal 1.4 on windows with postgresql
	support
In-Reply-To: <45AF95C0.1050005@loskot.net>
References: <45AF83A1.3060604@elcyion.nl> <45AF95C0.1050005@loskot.net>
Message-ID: <45AFA377.7060201@elcyion.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1
 
Ok, it was an error on my side :) I found the libpq-fs.h file and
assumed that should be the folder in the PG_INC_DIR, but it isn't. It
is the parent folder.
Using the following two lines, the compilation works:
PG_INC_DIR = "c:\Program Files\PostgreSQL\8.1\include"
PG_LIB = "c:\Program Files\PostgreSQL\8.1\lib\ms\libpq.lib" wsock32.lib
Thanks for the help Mateusz (and Frank through IRC).

Dolf.
Mateusz Loskot schreef:
> Dolf Andringa wrote:
>> I want to include PostgreSQL support though, so I specified the
>> location of the PostgreSQL 8.1 include and lib dirs. I have the
>> PostgreSQL 8.1 development stuff installed.
>
> Dolf,
>
> Please, show us the exact path you set for PG_INC_DIR.
>
>> During compilation though, I get the error that libpq-fe.h could
>> not be found. I checked the include dir, and indeed I do not have
>> libpq-fe.h but libpq-fs.h If I change the filename from
>> libpq-fs.h to libpq-fe.h I get syntax errors though during
>> compilation.
>
> You DON NOT need to rename this file. libpq-fs.h and libpq-fe.h are
> different files. The former is for large objects support, the
> latter brings in ligpq client library API to client programs.
> Shortly, you need to use libpq-fe.h, but not anything other.
>
>> Does anybody know why I am getting this error?
>
> The problem is likely with incorrect PG_INC_DIR path. I suppose you
> set it as follows:
>
> C:\Program Files\PostgreSQL\8.1\include\libpq
>
> but the correct path should read as:
>
> C:\Program Files\PostgreSQL\8.1\include
>
>> Does it have anything to do with the postgresql version?
>
> I'm not aware of any such reason, about differences between
> versions. In December/January I was building GDAL with PostgreSQL
> 8.1, 8.2 Beta and 8.2 with success and taking the same steps.
>
> Usually, from PgSQL version to version, the only different part of
> default installation path is version number (X.Y), all other path
> components are constant:
>
> C:\Program Files\PostgreSQL\X.Y
>
> ie.
>
> C:\Program Files\PostgreSQL\8.1 C:\Program Files\PostgreSQL\8.2
>
>
> Cheers
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
 
iD8DBQFFr6N24jCQQ91QiKgRAmBJAJ485ffBmIAoRp+u8112hbAWYrOHVACggoIp
w9VKRyzOI5UCz4RvHMxkpnc=
=og9K
-----END PGP SIGNATURE-----


From mateusz at loskot.net  Thu Jan 18 11:54:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] compile problem gdal 1.4 on windows with postgresql
	support
In-Reply-To: <45AFA377.7060201@elcyion.nl>
References: <45AF83A1.3060604@elcyion.nl> <45AF95C0.1050005@loskot.net>
	<45AFA377.7060201@elcyion.nl>
Message-ID: <45AFA632.3010005@loskot.net>

Dolf Andringa wrote:
> Ok, it was an error on my side :) I found the libpq-fs.h file and
> assumed that should be the folder in the PG_INC_DIR, but it isn't. It
> is the parent folder.
> Using the following two lines, the compilation works:
> PG_INC_DIR = "c:\Program Files\PostgreSQL\8.1\include"
> PG_LIB = "c:\Program Files\PostgreSQL\8.1\lib\ms\libpq.lib" wsock32.lib

Dolf,

Yes, these paths are correct now.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Jan 18 16:42:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Buildbot reconfiguration
In-Reply-To: <45AF55E6.4080701@loskot.net>
References: <45AF55E6.4080701@loskot.net>
Message-ID: <45AFE9B0.6050201@loskot.net>

Hi,

I'm going to submit libpng/zlib updates, so first I wanted to have
buildbot running with tests, at least one builder.

It seems everything is OK, except suspicious results for OSR:

http://buildbot.osgeo.org:8500/athlonxp_linux_quick/builds/77/step-test/0

Running tests from osr/osr_ct_proj.py
  TEST: Proj: UTM_WGS84 ... skip
    PROJ.4 missing, transforms not available.
  TEST: Proj: NGO_Oslo_zone1_NGO ... skip
    PROJ.4 missing, transforms not available.
  TEST: Proj: MMRome1_MMGreenwich ... skip
    PROJ.4 missing, transforms not available.
  TEST: Proj: Bonne_WGS84 ... skip
    PROJ.4 missing, transforms not available.
  TEST: Proj: TPED_Mars ... skip
    PROJ.4 missing, transforms not available.


Frank, hobu, could you verify if it?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Jan 18 17:50:15 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Buildbot reconfiguration
In-Reply-To: <45AFE9B0.6050201@loskot.net>
References: <45AF55E6.4080701@loskot.net> <45AFE9B0.6050201@loskot.net>
Message-ID: <45AFF9A7.1060503@pobox.com>

Mateusz Loskot wrote:
> Hi,
> 
> I'm going to submit libpng/zlib updates, so first I wanted to have
> buildbot running with tests, at least one builder.
> 
> It seems everything is OK, except suspicious results for OSR:
> 
> http://buildbot.osgeo.org:8500/athlonxp_linux_quick/builds/77/step-test/0
> 
> Running tests from osr/osr_ct_proj.py
>   TEST: Proj: UTM_WGS84 ... skip
>     PROJ.4 missing, transforms not available.
>   TEST: Proj: NGO_Oslo_zone1_NGO ... skip
>     PROJ.4 missing, transforms not available.
>   TEST: Proj: MMRome1_MMGreenwich ... skip
>     PROJ.4 missing, transforms not available.
>   TEST: Proj: Bonne_WGS84 ... skip
>     PROJ.4 missing, transforms not available.
>   TEST: Proj: TPED_Mars ... skip
>     PROJ.4 missing, transforms not available.
> 
> 
> Frank, hobu, could you verify if it?

Mateusz,

I believe this is because PROJ.4 is not installed on the buildbot system.
You could add it, but it is also helpful to have at least one builtbot
instance running without it.  Generally "skips" are ok in the test suite.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Jan 18 17:35:57 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Buildbot reconfiguration
In-Reply-To: <45AFF9A7.1060503@pobox.com>
References: <45AF55E6.4080701@loskot.net> <45AFE9B0.6050201@loskot.net>
	<45AFF9A7.1060503@pobox.com>
Message-ID: <45AFF64D.9000505@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Hi,
>>
>> I'm going to submit libpng/zlib updates, so first I wanted to have
>> buildbot running with tests, at least one builder.
>>
>> It seems everything is OK, except suspicious results for OSR:
>>
>> http://buildbot.osgeo.org:8500/athlonxp_linux_quick/builds/77/step-test/0
>>
>> Running tests from osr/osr_ct_proj.py
>>   TEST: Proj: UTM_WGS84 ... skip
>>     PROJ.4 missing, transforms not available.
>>   TEST: Proj: NGO_Oslo_zone1_NGO ... skip
>>     PROJ.4 missing, transforms not available.
>>   TEST: Proj: MMRome1_MMGreenwich ... skip
>>     PROJ.4 missing, transforms not available.
>>   TEST: Proj: Bonne_WGS84 ... skip
>>     PROJ.4 missing, transforms not available.
>>   TEST: Proj: TPED_Mars ... skip
>>     PROJ.4 missing, transforms not available.
>>
>>
>> Frank, hobu, could you verify if it?
> 
> Mateusz,
> 
> I believe this is because PROJ.4 is not installed on the buildbot system.
> You could add it, but it is also helpful to have at least one builtbot
> instance running without it.  Generally "skips" are ok in the test suite.

Frank,

Thanks for the explanation.
I wasn't sure if something is wrong with GDAL_DATA or other stuff.

OK, I'll leave this one without PROJ.4.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mbaye1234 at yahoo.fr  Fri Jan 19 07:39:34 2007
From: mbaye1234 at yahoo.fr (mbaye)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr getnextfeature
Message-ID: <8448313.post@talk.nabble.com>


Wath are doing  Geometry.GetNextFeature in the following cases 
Geometry  = polygon 
and
Geometry = multipolygon 

thanks foor your help
-- 
View this message in context: http://www.nabble.com/ogr-getnextfeature-tf3039642.html#a8448313
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Fri Jan 19 08:51:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr getnextfeature
In-Reply-To: <8448313.post@talk.nabble.com>
References: <8448313.post@talk.nabble.com>
Message-ID: <45B0CCC8.5050705@loskot.net>

mbaye wrote:
> Wath are doing  Geometry.GetNextFeature in the following cases 
> Geometry  = polygon 
> and
> Geometry = multipolygon 

mbaye,

I'm sorry I don't understand your question.

1. What do you mean as "Geometry.GetNextFeature"?

There is no GetNextFeature() member function in Geometry class, as well
as there is no Geometry class in OGR.

http://www.gdal.org/ogr/classOGRGeometry.html

2. There is OGRLayer::GetNextFeature() and here you can read
how it works:

http://www.gdal.org/ogr/classOGRLayer.html#47d21ff33b32d14fa4e9885b9edecad6

3. Please, check the OGR tutorial, section "Reading from OGR" and check
what GetNextFeature() returns and how to use it to iterate through
features in data sources.

http://www.gdal.org/ogr/ogr_apitut.html

4. As it's described in resoruces I'm giving above, the GetNextFeature()
returns reference (pointer, in C/C++) to object of type of OGRFeature.

http://www.gdal.org/ogr/classOGRFeature.html

Next, you can ask for reference to geometry stored in fetched
feature using GetGeometryRef()

http://www.gdal.org/ogr/classOGRFeature.html#cc966ce8c10ae3ddf9f14c2736fdce9a

As the GetGeometryRef() returns pointer to base class of geometries
hierarchy, you need to cast it to one of specialized type - *based* on
type of geometries stored in the data soure using
OGRGeometry::getGeometryType() function:

http://www.gdal.org/ogr/classOGRGeometry.html#26fef0fc5e95c9e8e526922476c778bd

Check the OGR tutorial for example.


If the type of geometry is Polygon, the pointer returned by
GetGeometryRef() points in fact to OGRPolygon, so you need to cast it:


OGRPolygon *poPoly = (OGRPolygon *) poGeometry;

or if you prefer C++ casting operators:

OGRPolygon *poPoly = static_cast<OGRPolygon *>(poGeometry);

After this operation, you can use poPoly pointer to access interface of
OGRPolygon class which is described here:

http://www.gdal.org/ogr/classOGRPolygon.html


You can take similar steps for geometries of type of
OGRMultiPolygon class.


I'm still not sure if you're asking for explanation as given above,
but I hope it helps.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Jan 19 09:30:47 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr getnextfeature
In-Reply-To: <20070119142735.86524.qmail@web86904.mail.ukl.yahoo.com>
References: <20070119142735.86524.qmail@web86904.mail.ukl.yahoo.com>
Message-ID: <45B0D617.7000807@loskot.net>

mouhamad mbaye wrote:
> OGRLayer::GetNextFeature( );
> I have a shape file and I want to know how I must proceed for the reading

Have you checked the "Reading from OGR" section in the OGR tutorial?

http://www.gdal.org/ogr/ogr_apitut.html

It presents how to read features from shapefile of points.
Next, if you have shapefile with other types of geometries,
for instance polygons, you can follow steps I described in point 4,
in my previous reply.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From epatton at nrcan.gc.ca  Fri Jan 19 11:15:26 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Error reading jp2: 'terminate called after throwing an
	instance of 'std::bad_alloc'
Message-ID: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>

Hi,

I've just installed gdal-1.4.0. I gettgin errors trying to read and translate jp2 files. I have compiled the ER Mapper ECW SDK, and JPEG2000 support shows  up in my configure output:

...
<snip>
JASPER support:            yes (GeoJP2=no)
ECW support:               yes
<snip>

gdalinfo --formats confirms that the support is enabled:

...
<snip>
JPEG (rw): JPEG JFIF
JPEG2000 (rw): JPEG-2000 part 1 (ISO/IEC 15444-1)
ECW (rw): ERMapper Compressed Wavelets
JP2ECW (rw+): ERMapper JPEG2000
<snip>

No errors occurred during make or make install. I'm trying to open a 291MB jp2 file that represents 1m LIDAR dataset. Here's the output when I try to read it with gdalinfo/translate:

$ gdalinfo csr.jp2
terminate called after throwing an instance of 'std::bad_alloc'
  what():  St9bad_alloc
Aborted

Any ideas on where to proceed from here? I've explored every other avenue for opening these files short of logging into Windows; even Imagemagick choked on these files.

Thanks,

~ Eric.


From ivan at ilucena.net  Fri Jan 19 12:31:38 2007
From: ivan at ilucena.net (Ivan Lucena)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Visual Studio "Makefile" Project
Message-ID: <20070119173138.0009610A13B@ws6-4.us4.outblaze.com>

Folks,

A Visual Studio Project for GDAL is now available in the SVN repository.

It is a "Makefile Project" that is set to make calls to "nmake -f makefiel.vc".

The settings are:

- Build Command Line is :      "cd apps && nmake -f makefile.vc"
- Rebuild All Command Line is: "nmake -f makefile.vc"
- Clean Command Line is        "nmake -f makefile.vc"

But you can change the way you like.

Please, do a "Rebuild Solution" Ctrl+Alt+F7 at first time.

Have fun,

Ivan Lucena





From warmerdam at pobox.com  Fri Jan 19 12:45:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Error reading jp2: 'terminate called after throwing
	an instance of 'std::bad_alloc'
In-Reply-To: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <45B103C1.1040002@pobox.com>

Patton, Eric wrote:
> Hi,
> 
> I've just installed gdal-1.4.0. I gettgin errors trying to read and translate jp2 files. I have compiled the ER Mapper ECW SDK, and JPEG2000 support shows  up in my configure output:
> 
> ...
> <snip>
> JASPER support:            yes (GeoJP2=no)
> ECW support:               yes
> <snip>
> 
> gdalinfo --formats confirms that the support is enabled:
> 
> ...
> <snip>
> JPEG (rw): JPEG JFIF
> JPEG2000 (rw): JPEG-2000 part 1 (ISO/IEC 15444-1)
> ECW (rw): ERMapper Compressed Wavelets
> JP2ECW (rw+): ERMapper JPEG2000
> <snip>
> 
> No errors occurred during make or make install. I'm trying to open a 291MB jp2 file that represents 1m LIDAR dataset. Here's the output when I try to read it with gdalinfo/translate:
> 
> $ gdalinfo csr.jp2
> terminate called after throwing an instance of 'std::bad_alloc'
>   what():  St9bad_alloc
> Aborted
>
Eric,

One important question is which driver is actually getting used.
The JasPer based JPEG2000 driver or the ECW SDK based JP2ECW
driver.  The JasPer driver uses huge amounts of memory for large
images, which might explain the allocation failure.

Try:

   gdalinfo --debug on --config GDAL_SKIP JPEG2000 csr.jp2

That should use the JP2ECW driver, and perhaps report some
information as it goes.   If the JP2ECW driver doesn't work then it
is possible the file is corrupt in some fashion.  You might want to try
it with FWTools which uses Kakadu for jpeg2000.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Fri Jan 19 13:24:27 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:36 2007
Subject: FW: [Gdal-dev] gdalwarp: what is wrong with unit foot?
Message-ID: <3054411AF4728548AD6D7137190D56B302B578AE@admin1.aeromap.com>

Hello.
I'm not sure my message passed to the list in the first time so I'm resending it again.

Was testing gdalwarp converting images from one coord. system to another and found that using WKT
in form of esri' .prj file is producing Unknown units on result image if .prj contains UNIT["Foot_US", 0.3048].
As a result it is interpreted as a meters and output image seats in wrong position.
Using projections with units Meter is fine.

Command line for the test:
gdalwarp.exe -rn -co "INTERLEAVE=PIXEL" -co "COMPRESS=LZW" -t_srs "ESRI::c:\shared\NAD 1983 StatePlane Alaska 4 FIPS 5004 (Feet).prj" -dstnodata 255 i61147a1_utm.tif i61147a1_asp.tif

Test image i61147a1_utm.tif (36Mb): ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com (gok/ImageProcessing folder)

Could somebody help to setup right flags, please. Or is it PROJ.4 fault?

Thanks in advance,
Gennady

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sy at perkins.net  Fri Jan 19 15:15:07 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Visual Studio "Makefile" Project
In-Reply-To: <20070119173138.0009610A13B@ws6-4.us4.outblaze.com>
References: <20070119173138.0009610A13B@ws6-4.us4.outblaze.com>
Message-ID: <45B126CB.1080302@perkins.net>

Ivan Lucena wrote:
> Folks,
>
> A Visual Studio Project for GDAL is now available in the SVN repository.
>
> It is a "Makefile Project" that is set to make calls to "nmake -f makefiel.vc".
>
> The settings are:
>
> - Build Command Line is :      "cd apps && nmake -f makefile.vc"
> - Rebuild All Command Line is: "nmake -f makefile.vc"
> - Clean Command Line is        "nmake -f makefile.vc"
>   
I think that should be "nmake -f makefile.vc clean"...


I guess this project file is relatively harmless, but I wonder if we're 
putting too many different parallel build systems into the GDAL source 
tree. There are already unix makefiles, Visual Studio makefiles, WinCE 
projects files, and now this one. In addition, there are externally 
maintained VS 2003 project files to build GDAL directly. And of course 
if you run VS 2005 (hey, this is 2007 after all...), then these project 
files all have to be converted to the new VS 2005 to use them, and then 
changes can't be committed back to the repository. Apart from the 
aesthetically unpleasing clutter, there's all the effort that goes into 
maintaining these distinct build systems and keeping them in sync with 
the source code.

Possible alternatives to storing these multiple build systems in the 
main GDAL tree:

- Creating a contrib or extras directory in the GDAL main directory 
where people can feel free to add builds scripts (and whatever else) for 
as many different systems as they like.

- Creating a separate gdal-contrib SVN directory in parallel with gdal 
directory where extras can go.

- Putting the effort into getting a true general purpose build system in 
place such as cmake, which could then ultimately replace all the other 
build scripts.


Any thoughts?

Cheers,

Sy


From epatton at nrcan.gc.ca  Fri Jan 19 15:36:20 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Error reading jp2: 'terminate called after throwing an
	instance of 'std::bad_alloc'
In-Reply-To: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <CA803441152AAE40935609509953BAD20F10F1@s0-ott-x4.nrn.nrcan.gc.ca>

Frank,

Running the command you suggested seems to only use the JPEG2000 driver. I get lines and lines of the following:

<snip>
...
JPEG2000: Component 41921: bpp=4, signedness=0
JPEG2000: Component 41922: bpp=4, signedness=0
JPEG2000: Component 41923: bpp=4, signedness=0
JPEG2000: Component 41924: bpp=4, signedness=0
JPEG2000: Component 41925: bpp=4, signedness=0
terminate called after throwing an instance of 'std::bad_alloc'
  what():  St9bad_alloc
Aborted

Only the last few lines of output are shown. Does it matter what order I compiled jasper-1.900.0.uuid vs. libecwj2-3.3? I believe I complied jasper first, if it matters.

Thanks for the suggestion for FWTools. I installed it under Windows, and imported a 9.5MB jp2 file as a test - OpenEV exported this jp2 to an 800MB tiff! I wonder how big the 291MB jp2 file  would expand to.

~ Eric.

-----Original Message-----
From: Frank Warmerdam
To: Patton, Eric
Cc: gdal-dev@lists.maptools.org
Sent: 1/19/2007 12:45 PM
Subject: Re: [Gdal-dev] Error reading jp2: 'terminate called after throwing an instance of 'std::bad_alloc'

Patton, Eric wrote:
> Hi,
> 
> I've just installed gdal-1.4.0. I gettgin errors trying to read and
translate jp2 files. I have compiled the ER Mapper ECW SDK, and JPEG2000
support shows  up in my configure output:
> 
> ...
> <snip>
> JASPER support:            yes (GeoJP2=no)
> ECW support:               yes
> <snip>
> 
> gdalinfo --formats confirms that the support is enabled:
> 
> ...
> <snip>
> JPEG (rw): JPEG JFIF
> JPEG2000 (rw): JPEG-2000 part 1 (ISO/IEC 15444-1)
> ECW (rw): ERMapper Compressed Wavelets
> JP2ECW (rw+): ERMapper JPEG2000
> <snip>
> 
> No errors occurred during make or make install. I'm trying to open a
291MB jp2 file that represents 1m LIDAR dataset. Here's the output when
I try to read it with gdalinfo/translate:
> 
> $ gdalinfo csr.jp2
> terminate called after throwing an instance of 'std::bad_alloc'
>   what():  St9bad_alloc
> Aborted
>
Eric,

One important question is which driver is actually getting used.
The JasPer based JPEG2000 driver or the ECW SDK based JP2ECW
driver.  The JasPer driver uses huge amounts of memory for large
images, which might explain the allocation failure.

Try:

   gdalinfo --debug on --config GDAL_SKIP JPEG2000 csr.jp2

That should use the JP2ECW driver, and perhaps report some
information as it goes.   If the JP2ECW driver doesn't work then it
is possible the file is corrupt in some fashion.  You might want to try
it with FWTools which uses Kakadu for jpeg2000.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From warmerdam at pobox.com  Fri Jan 19 16:28:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Error reading jp2: 'terminate called after throwing
	an instance of 'std::bad_alloc'
In-Reply-To: <CA803441152AAE40935609509953BAD20F10F1@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F10F1@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <45B137EA.1020306@pobox.com>

Patton, Eric wrote:
> Frank,
> 
> Running the command you suggested seems to only use the JPEG2000 driver. I
> get lines and lines of the following:
> 
> <snip> ... JPEG2000: Component 41921: bpp=4, signedness=0 JPEG2000:
> Component 41922: bpp=4, signedness=0 JPEG2000: Component 41923: bpp=4,
> signedness=0 JPEG2000: Component 41924: bpp=4, signedness=0 JPEG2000:
> Component 41925: bpp=4, signedness=0 terminate called after throwing an
> instance of 'std::bad_alloc' what():  St9bad_alloc Aborted
> 
> Only the last few lines of output are shown. Does it matter what order I
> compiled jasper-1.900.0.uuid vs. libecwj2-3.3? I believe I complied jasper
> first, if it matters.

Eric,

I think the --config option takes effect after registration which is likely
why it is having no effect.  Setting GDAL_SKIP ahead of time as an
environment variable, or building without JasPer should ensure GDAL
uses the JP2ECW driver instead of the JPEG2000 driver.

> Thanks for the suggestion for FWTools. I installed it under Windows, and
> imported a 9.5MB jp2 file as a test - OpenEV exported this jp2 to an 800MB
> tiff! I wonder how big the 291MB jp2 file  would expand to.

1:10 expansion is common, 1:100 less so.  Note that TIFF only supports up to
4GB files, so if it is going to be very large you will need to use
a different format, like HFA (erdas imagine).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Jan 19 16:49:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Visual Studio "Makefile" Project
In-Reply-To: <45B126CB.1080302@perkins.net>
References: <20070119173138.0009610A13B@ws6-4.us4.outblaze.com>
	<45B126CB.1080302@perkins.net>
Message-ID: <45B13CE7.6010808@pobox.com>

Simon Perkins wrote:
  > I guess this project file is relatively harmless, but I wonder if we're
> putting too many different parallel build systems into the GDAL source 
> tree. There are already unix makefiles, Visual Studio makefiles, WinCE 
> projects files, and now this one. In addition, there are externally 
> maintained VS 2003 project files to build GDAL directly. And of course 
> if you run VS 2005 (hey, this is 2007 after all...), then these project 
> files all have to be converted to the new VS 2005 to use them, and then 
> changes can't be committed back to the repository. Apart from the 
> aesthetically unpleasing clutter, there's all the effort that goes into 
> maintaining these distinct build systems and keeping them in sync with 
> the source code.

Simon,

I'll say this in favor of this addition, at least it is just a small parent
project file and it will keep "up to date" as long as the standard
makefile.vc files work.

I think the windows ce build stuff has been segregated off in their own
directory

> - Creating a contrib or extras directory in the GDAL main directory 
> where people can feel free to add builds scripts (and whatever else) for 
> as many different systems as they like.
 >
> - Creating a separate gdal-contrib SVN directory in parallel with gdal 
> directory where extras can go.

I'm not adverse to either of the above, though it won't make it any
more likely that they are kept up to date.

> - Putting the effort into getting a true general purpose build system in 
> place such as cmake, which could then ultimately replace all the other 
> build scripts.

This would be nice, if it worked out smoothly and there was someone to
do it.  But I am dubious about both of those.  And a complete rework of
the build system is going to cause a lot of churn and pain.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ivan at ilucena.net  Fri Jan 19 16:38:30 2007
From: ivan at ilucena.net (Ivan Lucena)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Visual Studio "Makefile" Project
Message-ID: <20070119213830.EEEC12F9CF@ws6-3.us4.outblaze.com>

Hi Symon,

You are right "clean" is absent on my message but it is there in the project.

And you are also right, that it is harmless. Not a big deal at all. 

Ivan

> ----- Original Message -----
> From: "Simon Perkins" <sy@perkins.net>
> To: "Ivan Lucena" <ivan@ilucena.net>
> Subject: Re: [Gdal-dev] Visual Studio "Makefile" Project
> Date: Fri, 19 Jan 2007 13:15:07 -0700
> 
> 
> Ivan Lucena wrote:
> > Folks,
> >
> > A Visual Studio Project for GDAL is now available in the SVN repository.
> >
> > It is a "Makefile Project" that is set to make calls to "nmake -f 
> > makefiel.vc".
> >
> > The settings are:
> >
> > - Build Command Line is :      "cd apps && nmake -f makefile.vc"
> > - Rebuild All Command Line is: "nmake -f makefile.vc"
> > - Clean Command Line is        "nmake -f makefile.vc"
> >
> I think that should be "nmake -f makefile.vc clean"...
> 
> 
> I guess this project file is relatively harmless, but I wonder if we're 
> putting too many different parallel build systems into the GDAL source tree. 
> There are already unix makefiles, Visual Studio makefiles, WinCE projects 
> files, and now this one. In addition, there are externally maintained VS 2003 
> project files to build GDAL directly. And of course if you run VS 2005 (hey, 
> this is 2007 after all...), then these project files all have to be converted 
> to the new VS 2005 to use them, and then changes can't be committed back to 
> the repository. Apart from the aesthetically unpleasing clutter, there's all 
> the effort that goes into maintaining these distinct build systems and 
> keeping them in sync with the source code.
> 
> Possible alternatives to storing these multiple build systems in the main 
> GDAL tree:
> 
> - Creating a contrib or extras directory in the GDAL main directory where 
> people can feel free to add builds scripts (and whatever else) for as many 
> different systems as they like.
> 
> - Creating a separate gdal-contrib SVN directory in parallel with gdal 
> directory where extras can go.
> 
> - Putting the effort into getting a true general purpose build system in 
> place such as cmake, which could then ultimately replace all the other build 
> scripts.
> 
> 
> Any thoughts?
> 
> Cheers,
> 
> Sy

>



From achase at mbari.org  Fri Jan 19 21:58:10 2007
From: achase at mbari.org (Chase, Andrew)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Problem using gdal_translate on netcdf file
Message-ID: <C7B4D2761C705C44BEE5F4E4F13CF6F099D21A@frost.shore.mbari.org>

Hi All,

I'm trying to convert a netcdf file to some an image format that I can use with imagemagick (tiff, jpg, png, anything will do). Unfortunately, I'm having some troubles getting the job done. When I try gdal_translate with any format other than Gtiff I get a completely black image. When I use the Gtiff format, I get a weird grayscale mutated version of my source file, with strange grainy vertical bands. When I open the netcdf file in OpenEV it looks perfectly normal, and I use the netcdf file for a lot of different data processing, so I feel confident that the data itself is good (if not the formatting of the data).

I've placed a subsetted version of the translated image online to show what the resulting geotiff looks like, it's here:
http://www.mbari.org/staff/achase/vdm/hrbath.tif
Maybe someone else has seen this same type of image problem?

Here's the gdalinfo output:

C:\workspace\vdm\resources\grids>gdalinfo NETCDF:"hrbath.nc":elevation
Driver: netCDF/Network Common Data Format
Size is 5001, 4001
Coordinate System is `'
Origin = (-125.000000000000000,38.000999999999998)
Pixel Size = (0.000999800039992,-0.000999750062484)
Metadata:
  NC_GLOBAL#creationDate=01/19/2007
  NC_GLOBAL#lastModified=01/19/2007
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
  NC_GLOBAL#title=DEM Grid from hrbath.asc
  NC_GLOBAL#institution=MBARI
  NC_GLOBAL#creator_name=Andrew Chase
  NC_GLOBAL#keywords=dem bathymetry grid
  elevation#positive=up
  elevation#long_name=Elevation
  elevation#missing_value=-9.999900e+004
  elevation#units=meters
  latitude#units=degrees_north (+N/-S)
  longitude#units=degrees_east (+E/-W)
Corner Coordinates:
Upper Left  (-125.0000000,  38.0010000)
Lower Left  (-125.0000000,  34.0010000)
Upper Right (-120.0000000,  38.0010000)
Lower Right (-120.0000000,  34.0010000)
Center      (-122.5000000,  36.0010000)
Band 1 Block=5001x1 Type=Float32, ColorInterp=Undefined
  NoData Value=-99999
  Metadata:
    NETCDF_VARNAME=elevation
----------------------------------------------------------------------------------------------------------

And here's the translation I'm trying:

C:\workspace\vdm\resources\grids>gdal_translate -of GTiff -a_nodata -99999 NETCD
F:"hrbath.nc":elevation hrbath.tif
Input file size is 5001, 4001
0...10...20...30...40...50...60...70...80...90...100 - done.
----------------------------------------------------------------------------------------------------------

And the resulting gdalinfo output:

C:\workspace\vdm\resources\grids>gdalinfo hrbath.tif
Driver: GTiff/GeoTIFF
Size is 5001, 4001
Coordinate System is `'
Origin = (-125.000000000000000,38.000999999999998)
Pixel Size = (0.000999800039992,-0.000999750062484)
Metadata:
  NC_GLOBAL#creationDate=01/19/2007
  NC_GLOBAL#lastModified=01/19/2007
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
  NC_GLOBAL#title=DEM Grid from hrbath.asc
  NC_GLOBAL#institution=MBARI
  NC_GLOBAL#creator_name=Andrew Chase
  NC_GLOBAL#keywords=dem bathymetry grid
  elevation#positive=up
  elevation#long_name=Elevation
  elevation#missing_value=-9.999900e+004
  elevation#units=meters
  latitude#units=degrees_north (+N/-S)
  longitude#units=degrees_east (+E/-W)
Corner Coordinates:
Upper Left  (-125.0000000,  38.0010000)
Lower Left  (-125.0000000,  34.0010000)
Upper Right (-120.0000000,  38.0010000)
Lower Right (-120.0000000,  34.0010000)
Center      (-122.5000000,  36.0010000)
Band 1 Block=5001x1 Type=Float32, ColorInterp=Gray
  NoData Value=-99999
  Metadata:
    NETCDF_VARNAME=elevation



Any ideas of what to try would be appreciated.

-Andrew


Andrew C. Chase
Software Engineer
Monterey Bay Aquarium Research Institute
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070119/f7795c6d/attachment.html
From dhdeangelis.listas at gmail.com  Sat Jan 20 04:20:47 2007
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Problem using gdal_translate on netcdf file
In-Reply-To: <C7B4D2761C705C44BEE5F4E4F13CF6F099D21A@frost.shore.mbari.org>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F099D21A@frost.shore.mbari.org>
Message-ID: <a498cee90701200120m7c3e8991q6b0b95fe13eb44d2@mail.gmail.com>

Your files are in Float32 format, try rescaling them to 8bit:
gdal_translate -ot Byte

2007/1/20, Chase, Andrew <achase@mbari.org>:
>
>  Hi All,
>
> I'm trying to convert a netcdf file to some an image format that I can use
> with imagemagick (tiff, jpg, png, anything will do). Unfortunately, I'm
> having some troubles getting the job done. When I try gdal_translate with
> any format other than Gtiff I get a completely black image. When I use the
> Gtiff format, I get a weird grayscale mutated version of my source file,
> with strange grainy vertical bands. When I open the netcdf file in OpenEV it
> looks perfectly normal, and I use the netcdf file for a lot of different
> data processing, so I feel confident that the data itself is good (if not
> the formatting of the data).
>
> I've placed a subsetted version of the translated image online to show
> what the resulting geotiff looks like, it's here:
>
> *http://www.mbari.org/staff/achase/vdm/hrbath.tif*<http://www.mbari.org/staff/achase/vdm/hrbath.tif>
> Maybe someone else has seen this same type of image problem?
>
> Here's the gdalinfo output:
>
> C:\workspace\vdm\resources\grids>gdalinfo NETCDF:"hrbath.nc":elevation
> Driver: netCDF/Network Common Data Format
> Size is 5001, 4001
> Coordinate System is `'
> Origin = (-125.000000000000000,38.000999999999998)
> Pixel Size = (0.000999800039992,-0.000999750062484)
> Metadata:
>   NC_GLOBAL#creationDate=01/19/2007
>   NC_GLOBAL#lastModified=01/19/2007
>   NC_GLOBAL#Conventions=CF-1.0
>   NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
>   NC_GLOBAL#title=DEM Grid from hrbath.asc
>   NC_GLOBAL#institution=MBARI
>   NC_GLOBAL#creator_name=Andrew Chase
>   NC_GLOBAL#keywords=dem bathymetry grid
>   elevation#positive=up
>   elevation#long_name=Elevation
>   elevation#missing_value=-9.999900e+004
>   elevation#units=meters
>   latitude#units=degrees_north (+N/-S)
>   longitude#units=degrees_east (+E/-W)
> Corner Coordinates:
> Upper Left  (-125.0000000,  38.0010000)
> Lower Left  (-125.0000000,  34.0010000)
> Upper Right (-120.0000000,  38.0010000)
> Lower Right (-120.0000000,  34.0010000)
> Center      (-122.5000000,  36.0010000)
> Band 1 Block=5001x1 Type=Float32, ColorInterp=Undefined
>   NoData Value=-99999
>   Metadata:
>     NETCDF_VARNAME=elevation
>
> ----------------------------------------------------------------------------------------------------------
>
> And here's the translation I'm trying:
>
> C:\workspace\vdm\resources\grids>gdal_translate -of GTiff -a_nodata -99999
> NETCD
> F:"hrbath.nc":elevation hrbath.tif
> Input file size is 5001, 4001
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> ----------------------------------------------------------------------------------------------------------
>
> And the resulting gdalinfo output:
>
> C:\workspace\vdm\resources\grids>gdalinfo hrbath.tif
> Driver: GTiff/GeoTIFF
> Size is 5001, 4001
> Coordinate System is `'
> Origin = (-125.000000000000000,38.000999999999998)
> Pixel Size = (0.000999800039992,-0.000999750062484)
> Metadata:
>   NC_GLOBAL#creationDate=01/19/2007
>   NC_GLOBAL#lastModified=01/19/2007
>   NC_GLOBAL#Conventions=CF-1.0
>   NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
>   NC_GLOBAL#title=DEM Grid from hrbath.asc
>   NC_GLOBAL#institution=MBARI
>   NC_GLOBAL#creator_name=Andrew Chase
>   NC_GLOBAL#keywords=dem bathymetry grid
>   elevation#positive=up
>   elevation#long_name=Elevation
>   elevation#missing_value=-9.999900e+004
>   elevation#units=meters
>   latitude#units=degrees_north (+N/-S)
>   longitude#units=degrees_east (+E/-W)
> Corner Coordinates:
> Upper Left  (-125.0000000,  38.0010000)
> Lower Left  (-125.0000000,  34.0010000)
> Upper Right (-120.0000000,  38.0010000)
> Lower Right (-120.0000000,  34.0010000)
> Center      (-122.5000000,  36.0010000)
> Band 1 Block=5001x1 Type=Float32, ColorInterp=Gray
>   NoData Value=-99999
>   Metadata:
>     NETCDF_VARNAME=elevation
>
>
> Any ideas of what to try would be appreciated.
>
> -Andrew
>
> Andrew C. Chase
> Software Engineer
> Monterey Bay Aquarium Research Institute
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 

Hern?n De Angelis
Linux user # 397217
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070120/8018ef78/attachment.html
From mitchelljj98 at gmail.com  Sat Jan 20 10:50:57 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Is their a way to derive the size of a Mr. Sid file
	without expanding it?
Message-ID: <fa2ac0580701200750i327fb3cbhf724f4a06f0a36f@mail.gmail.com>

Hi,

Is their a way to derive the size within GDAL of a Mr. Sid file without
expanding it?
I would like to know in advance the size of a Mr. Sid file before I split up
and convert into GeoTiff format.  The reason why I need this information in
advance is so that I can plan on how many chunks of GeoTiff's are necessary
so that each GeoTiff is about 100 megs in Size.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070120/493667b7/attachment.html
From warmerdam at pobox.com  Sat Jan 20 13:42:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Is their a way to derive the size of a Mr. Sid file
	without expanding it?
In-Reply-To: <fa2ac0580701200750i327fb3cbhf724f4a06f0a36f@mail.gmail.com>
References: <fa2ac0580701200750i327fb3cbhf724f4a06f0a36f@mail.gmail.com>
Message-ID: <45B26282.9000203@pobox.com>

John Mitchell wrote:
> Hi,
> 
> Is their a way to derive the size within GDAL of a Mr. Sid file without 
> expanding it?
> I would like to know in advance the size of a Mr. Sid file before I 
> split up and convert into GeoTiff format.  The reason why I need this 
> information in advance is so that I can plan on how many chunks of 
> GeoTiff's are necessary so that each GeoTiff is about 100 megs in Size.

John,

You can get the number of pixels, lines and bands from a mrsid with gdalinfo.
Then  you can compute the approximate size a corresponding uncompressed
file would be by multiplying them.  So a MrSID file that is 10000 pixels
by 10000 lines by 3 bands would be 10000 x 10000 x 3 = 300000000 or 300MB.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mapLabs at screenlight.com  Sun Jan 21 12:29:43 2007
From: mapLabs at screenlight.com (Brian Hamlin)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] OS X Builds of just ogr?
Message-ID: <20070121172943.442992816@smtp.woodynet.net>

  I've just built ogr for MacOS X, using default options, and ran a
shapes file conversion. That all worked fine. However, I would like to
do a few things beyond the defaults. Two questions

- where do I enable PostgreSQL drivers ? then rebuild...

- does anyone have an xcode project that will build ogr tools, or just
ogr2ogr?  I worked on that for a while last night, but do not have the
link right yet...

  (I found the GDALmake.opt file, but am not familiar enough with the
unix make tools to tell where I manually change a line of configuration,
and where things are machine generated...)

  thanks for any pointers
  best regards from Berkeley, CA
   -Brian



From woklist at kyngchaos.com  Sun Jan 21 13:00:01 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] OS X Builds of just ogr?
In-Reply-To: <20070121172943.442992816@smtp.woodynet.net>
References: <20070121172943.442992816@smtp.woodynet.net>
Message-ID: <E5F4935B-845E-41A2-B7EA-E451E8981054@kyngchaos.com>

I have an Xcode project to build GDAL/OGR as a framework.  It's a  
little heavy-handed in that it also has subprojects for some format  
dependencies like HDF and NetCDF and others, and most of it is  
required, but if you have a good grasp of Xcode, you could disable  
formats you don't need.

I also have a full GDAL framework binary available, inlcuding all the  
tools.

On Jan 21, 2007, at 11:29 AM, Brian Hamlin wrote:

>   I've just built ogr for MacOS X, using default options, and ran a
> shapes file conversion. That all worked fine. However, I would like to
> do a few things beyond the defaults. Two questions
>
> - where do I enable PostgreSQL drivers ? then rebuild...
>
> - does anyone have an xcode project that will build ogr tools, or just
> ogr2ogr?  I worked on that for a while last night, but do not have the
> link right yet...
>
>   (I found the GDALmake.opt file, but am not familiar enough with the
> unix make tools to tell where I manually change a line of  
> configuration,
> and where things are machine generated...)
>
>   thanks for any pointers
>   best regards from Berkeley, CA
>    -Brian
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From mapLabs at screenlight.com  Sun Jan 21 12:22:45 2007
From: mapLabs at screenlight.com (Brian Hamlin)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] OS X Builds of just ogr?
Message-ID: <20070121172245.21708554@smtp.woodynet.net>

  I've just built ogr for MacOS X, using default options, and ran a
shapes file conversion. That all worked fine. However, I would like to
do a few things beyond the defaults. Two questions

- where do I enable PostgreSQL drivers ? then rebuild...

- does anyone have an xcode project that will build ogr tools, or just
ogr2ogr?  I worked on that for a while last night, but do not have the
link right yet...

  (I found the GDALmake.opt file, but am not familiar enough with the
unix make tools to tell where I manually change a line of configuration,
and where things are machine generated...)

  thanks for any pointers
  best regards from Berkeley, CA
   -Brian



From frederic.claudel at magellium.fr  Mon Jan 22 11:14:30 2007
From: frederic.claudel at magellium.fr (Frederic Claudel)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] PAM and minimum/maximum values
In-Reply-To: <20070121172245.21708554@smtp.woodynet.net>
Message-ID: <003d01c73e40$665257d0$a401a8c0@pc164>


Hi all,
Is there a good reason why the PAM mode doesn't provide info. about the band
minimum and maximum values?

More specifically :
GDALPamRasterBand actually loads the <Minimum> and <Maximum> values from the
.aux.xml PAM file in the XMLInit() method, but GDALRasterBand methods
GetMinimum() and GetMaximum() have not been re-implemented in
GDALPamRasterBand, so there's no way to access the member data (dfMin and
dfMAx, in GDALRasterBandPamInfo).

thanks,
Frederic Claudel

PS: there's also a different way to get min/max (as well as mean/std) info :
via the GetStatistics() method, but I don't need mean and std.


From warmerdam at pobox.com  Mon Jan 22 12:01:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] PAM and minimum/maximum values
In-Reply-To: <003d01c73e40$665257d0$a401a8c0@pc164>
References: <003d01c73e40$665257d0$a401a8c0@pc164>
Message-ID: <45B4EDFE.50206@pobox.com>

Frederic Claudel wrote:
> Hi all,
> Is there a good reason why the PAM mode doesn't provide info. about the band
> minimum and maximum values?
> 
> More specifically :
> GDALPamRasterBand actually loads the <Minimum> and <Maximum> values from the
> .aux.xml PAM file in the XMLInit() method, but GDALRasterBand methods
> GetMinimum() and GetMaximum() have not been re-implemented in
> GDALPamRasterBand, so there's no way to access the member data (dfMin and
> dfMAx, in GDALRasterBandPamInfo).

Frederic,

I believe this is just an omission.  If you would file a bug report on it,
I will have Mateusz fix it as time permits.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From achase at mbari.org  Mon Jan 22 13:24:19 2007
From: achase at mbari.org (Chase, Andrew)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Problem using gdal_translate on netcdf file
In-Reply-To: <a498cee90701200120m7c3e8991q6b0b95fe13eb44d2@mail.gmail.com>
Message-ID: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>

Thanks for the suggestion Hern?n, I've already tried this (and tried it again just now to double check). When I set "-ot Byte" I still get a black image, this time in all formats including Gtiff, whereas before I got the vertical banding in Gtiff.

Still searching...

-Andrew


________________________________

	From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Hern?n De Angelis
	Sent: Saturday, January 20, 2007 1:21 AM
	To: gdal-dev@lists.maptools.org
	Subject: Re: [Gdal-dev] Problem using gdal_translate on netcdf file
	
	
	Your files are in Float32 format, try rescaling them to 8bit:   gdal_translate -ot Byte
	
	
	2007/1/20, Chase, Andrew <achase@mbari.org>: 

		Hi All, 

		I'm trying to convert a netcdf file to some an image format that I can use with imagemagick (tiff, jpg, png, anything will do). Unfortunately, I'm having some troubles getting the job done. When I try gdal_translate with any format other than Gtiff I get a completely black image. When I use the Gtiff format, I get a weird grayscale mutated version of my source file, with strange grainy vertical bands. When I open the netcdf file in OpenEV it looks perfectly normal, and I use the netcdf file for a lot of different data processing, so I feel confident that the data itself is good (if not the formatting of the data). 

		I've placed a subsetted version of the translated image online to show what the resulting geotiff looks like, it's here:

		http://www.mbari.org/staff/achase/vdm/hrbath.tif <http://www.mbari.org/staff/achase/vdm/hrbath.tif> 
		Maybe someone else has seen this same type of image problem? 

		Here's the gdalinfo output: 

		C:\workspace\vdm\resources\grids>gdalinfo NETCDF:"hrbath.nc":elevation 
		Driver: netCDF/Network Common Data Format 
		Size is 5001, 4001 
		Coordinate System is `' 
		Origin = (-125.000000000000000,38.000999999999998) 
		Pixel Size = (0.000999800039992,-0.000999750062484) 
		Metadata: 
		  NC_GLOBAL#creationDate=01/19/2007 
		  NC_GLOBAL#lastModified=01/19/2007 
		  NC_GLOBAL#Conventions=CF-1.0 
		  NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI 
		  NC_GLOBAL#title=DEM Grid from hrbath.asc 
		  NC_GLOBAL#institution=MBARI 
		  NC_GLOBAL#creator_name=Andrew Chase 
		  NC_GLOBAL#keywords=dem bathymetry grid 
		  elevation#positive=up 
		  elevation#long_name=Elevation 
		  elevation#missing_value=-9.999900e+004 
		  elevation#units=meters 
		  latitude#units=degrees_north (+N/-S) 
		  longitude#units=degrees_east (+E/-W) 
		Corner Coordinates: 
		Upper Left  (-125.0000000,  38.0010000) 
		Lower Left  (-125.0000000,  34.0010000) 
		Upper Right (-120.0000000,  38.0010000) 
		Lower Right (-120.0000000,  34.0010000) 
		Center      (-122.5000000,  36.0010000) 
		Band 1 Block=5001x1 Type=Float32, ColorInterp=Undefined 
		  NoData Value=-99999 
		  Metadata: 
		    NETCDF_VARNAME=elevation 
		---------------------------------------------------------------------------------------------------------- 

		And here's the translation I'm trying: 

		C:\workspace\vdm\resources\grids>gdal_translate -of GTiff -a_nodata -99999 NETCD 
		F:"hrbath.nc":elevation hrbath.tif 
		Input file size is 5001, 4001 
		0...10...20...30...40...50...60...70...80...90...100 - done. 
		---------------------------------------------------------------------------------------------------------- 

		And the resulting gdalinfo output: 

		C:\workspace\vdm\resources\grids>gdalinfo hrbath.tif 
		Driver: GTiff/GeoTIFF 
		Size is 5001, 4001 
		Coordinate System is `' 
		Origin = (-125.000000000000000,38.000999999999998) 
		Pixel Size = (0.000999800039992,-0.000999750062484) 
		Metadata: 
		  NC_GLOBAL#creationDate=01/19/2007 
		  NC_GLOBAL#lastModified=01/19/2007 
		  NC_GLOBAL#Conventions=CF-1.0 
		  NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI 
		  NC_GLOBAL#title=DEM Grid from hrbath.asc 
		  NC_GLOBAL#institution=MBARI 
		  NC_GLOBAL#creator_name=Andrew Chase 
		  NC_GLOBAL#keywords=dem bathymetry grid 
		  elevation#positive=up 
		  elevation#long_name=Elevation 
		  elevation#missing_value=-9.999900e+004 
		  elevation#units=meters 
		  latitude#units=degrees_north (+N/-S) 
		  longitude#units=degrees_east (+E/-W) 
		Corner Coordinates: 
		Upper Left  (-125.0000000,  38.0010000) 
		Lower Left  (-125.0000000,  34.0010000) 
		Upper Right (-120.0000000,  38.0010000) 
		Lower Right (-120.0000000,  34.0010000) 
		Center      (-122.5000000,  36.0010000) 
		Band 1 Block=5001x1 Type=Float32, ColorInterp=Gray 
		  NoData Value=-99999 
		  Metadata: 
		    NETCDF_VARNAME=elevation 



		Any ideas of what to try would be appreciated. 

		-Andrew 


		Andrew C. Chase 
		Software Engineer 
		Monterey Bay Aquarium Research Institute 


		_______________________________________________
		Gdal-dev mailing list
		Gdal-dev@lists.maptools.org
		http://lists.maptools.org/mailman/listinfo/gdal-dev
		
		




	-- 
	
	Hern?n De Angelis
	Linux user # 397217 



From ollerery at engr.orst.edu  Mon Jan 22 15:04:23 2007
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal install
In-Reply-To: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
Message-ID: <45B518C7.3000301@engr.orst.edu>

I am trying to install gdal-1.4.0 on FC5 and i keep getting the 
following errors during the make process:

geotiff.cpp:102:21: error: xtiffio.h: No such file or directory
geotiff.cpp:103:21: error: geotiff.h: No such file or directory
geotiff.cpp:104:27: error: geo_normalize.h: No such file or directory
geotiff.cpp:105:23: error: geovalues.h: No such file or directory
geotiff.cpp:114: error: 'GTIF' was not declared in this scope
geotiff.cpp:114: error: expected primary-expression before ',' token
geotiff.cpp:114: error: 'GTIFDefn' was not declared in this scope
geotiff.cpp:114: error: expected primary-expression before ')' token
geotiff.cpp:114: error: initializer expression list treated as compound 
expression
geotiff.cpp:115: error: 'GTIF' was not declared in this scope
......


Here is the configure command that i am using:
./configure --with-png --with-libtiff  --with-jpeg --with-gif  
--with-pg=/usr/local/pgsql/bin/pg_config --with-geos --with-local=/usr/local

Any help would be great,
Thanks,
-Ryan

From warmerdam at pobox.com  Mon Jan 22 16:53:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal install
In-Reply-To: <45B518C7.3000301@engr.orst.edu>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
	<45B518C7.3000301@engr.orst.edu>
Message-ID: <45B53254.2000603@pobox.com>

Ryan Ollerenshaw wrote:
> I am trying to install gdal-1.4.0 on FC5 and i keep getting the 
> following errors during the make process:
> 
> geotiff.cpp:102:21: error: xtiffio.h: No such file or directory
> geotiff.cpp:103:21: error: geotiff.h: No such file or directory
> geotiff.cpp:104:27: error: geo_normalize.h: No such file or directory
> geotiff.cpp:105:23: error: geovalues.h: No such file or directory
> geotiff.cpp:114: error: 'GTIF' was not declared in this scope
> geotiff.cpp:114: error: expected primary-expression before ',' token
> geotiff.cpp:114: error: 'GTIFDefn' was not declared in this scope
> geotiff.cpp:114: error: expected primary-expression before ')' token
> geotiff.cpp:114: error: initializer expression list treated as compound 
> expression
> geotiff.cpp:115: error: 'GTIF' was not declared in this scope
> ......
> 
> 
> Here is the configure command that i am using:
> ./configure --with-png --with-libtiff  --with-jpeg --with-gif  
> --with-pg=/usr/local/pgsql/bin/pg_config --with-geos 
> --with-local=/usr/local

Ryan,

Do you have /usr/local/include/xtiffio.h or /usr/include/xtiffio.h?

Possibly you have the libgeotiff shared library installed, but not
the include files (as can occur when installing from packages).  That
would give this behavior.

You might try adding --with-geotiff=internal

This will force use of the internal libgeotiff library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Shawn.Gong at drdc-rddc.gc.ca  Mon Jan 22 16:56:36 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdaldataset writeraster
Message-ID: <2E58C246F17003499C141D334794D049D587CC@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

I open a gdaldataset, have done manipulation to r,g,b and nir bands.
Now I'd like to save the 4 bands back to original gdaldataset or a new
dataset.
Can't seem to get gdaldataset's WriteRaster() working, or is it the
right method?
Please help.

        fname1 = 'file3.tif'
        msi_dataset = gdal.Open(fname1)
        msi_array = msi_dataset.ReadAsArray()

        r = msi_array[:][:][0]
        g = msi_array[:][:][1]
        b = msi_array[:][:][2]
        nir = msi_array[:][:][3]

        row = msi_dataset.RasterYSize
        col = msi_dataset.RasterXSize

the following I am not sure:
        msi_dataset.WriteRaster(0, 0, col, row, r, col, row,
Numeric.Float16, [0])
        msi_dataset.WriteRaster(0, 0, col, row, g, col, row,
Numeric.Float16, [1])
        msi_dataset.WriteRaster(0, 0, col, row, b, col, row,
Numeric.Float16, [2])
        msi_dataset.WriteRaster(0, 0, col, row, nir, col, row,
Numeric.Float16, [3])

Thanks,
Shawn Gong

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070122/2eedee5c/attachment.html
From whughes at nb.sympatico.ca  Mon Jan 22 18:21:54 2007
From: whughes at nb.sympatico.ca (William Hughes)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdaldataset writeraster
In-Reply-To: <2E58C246F17003499C141D334794D049D587CC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049D587CC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45B54712.1040106@nb.sympatico.ca>

Gong, Shawn wrote:

>Hi list,
>
>I open a gdaldataset, have done manipulation to r,g,b and nir bands.
>Now I'd like to save the 4 bands back to original gdaldataset or a new
>dataset.
>Can't seem to get gdaldataset's WriteRaster() working, or is it the
>right method?
>Please help.
>
>        fname1 = 'file3.tif'
>        msi_dataset = gdal.Open(fname1)
>        msi_array = msi_dataset.ReadAsArray()
>
>        r = msi_array[:][:][0]
>        g = msi_array[:][:][1]
>        b = msi_array[:][:][2]
>        nir = msi_array[:][:][3]
>
>        row = msi_dataset.RasterYSize
>        col = msi_dataset.RasterXSize
>
>the following I am not sure:
>        msi_dataset.WriteRaster(0, 0, col, row, r, col, row,
>Numeric.Float16, [0])
>        msi_dataset.WriteRaster(0, 0, col, row, g, col, row,
>Numeric.Float16, [1])
>        msi_dataset.WriteRaster(0, 0, col, row, b, col, row,
>Numeric.Float16, [2])
>        msi_dataset.WriteRaster(0, 0, col, row, nir, col, row,
>Numeric.Float16, [3])
>
>Thanks,
>Shawn Gong
>
>
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>

Untested, and as usual take with a grain of salt.
I think this is what is happening

The member function .ReadAsArray() returns an
array.  As far as I can tell the function WriteRaster() takes a string 
as the forth
argument and does not understand Numeric Types.
The function .BandWriteArray() in gdalnumeric.py takes
care of both these problems. 

                                                - William Hughes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070122/cb3344df/attachment.html
From ollerery at engr.orst.edu  Mon Jan 22 19:32:41 2007
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal install gdaladdo IReadBlock failed 
In-Reply-To: <45B53254.2000603@pobox.com>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
	<45B518C7.3000301@engr.orst.edu> <45B53254.2000603@pobox.com>
Message-ID: <45B557A9.2040406@engr.orst.edu>

Frank Warmerdam wrote:
> Ryan Ollerenshaw wrote:
>> I am trying to install gdal-1.4.0 on FC5 and i keep getting the 
>> following errors during the make process:
>>
>> geotiff.cpp:102:21: error: xtiffio.h: No such file or directory
>> geotiff.cpp:103:21: error: geotiff.h: No such file or directory
>> geotiff.cpp:104:27: error: geo_normalize.h: No such file or directory
>> geotiff.cpp:105:23: error: geovalues.h: No such file or directory
>> geotiff.cpp:114: error: 'GTIF' was not declared in this scope
>> geotiff.cpp:114: error: expected primary-expression before ',' token
>> geotiff.cpp:114: error: 'GTIFDefn' was not declared in this scope
>> geotiff.cpp:114: error: expected primary-expression before ')' token
>> geotiff.cpp:114: error: initializer expression list treated as 
>> compound expression
>> geotiff.cpp:115: error: 'GTIF' was not declared in this scope
>> ......
>>
>>
>> Here is the configure command that i am using:
>> ./configure --with-png --with-libtiff  --with-jpeg --with-gif  
>> --with-pg=/usr/local/pgsql/bin/pg_config --with-geos 
>> --with-local=/usr/local
>
> Ryan,
>
> Do you have /usr/local/include/xtiffio.h or /usr/include/xtiffio.h?
>
no
> Possibly you have the libgeotiff shared library installed, but not
> the include files (as can occur when installing from packages).  That
> would give this behavior.
>
> You might try adding --with-geotiff=internal
>

So i was able to get gdal installed with the following configure command:
 ./configure --with-png --with-libtiff  --with-jpeg --with-gif  
--with-pg=/usr/local/pgsql/bin/pg_config --with-geos 
--with-local=/usr/local --with-geotiff=internal   --with-ecw=no 
--with-ogdi=no  --with-grass=no --with-libgrass=no

But when running gdaladdo i still get the following error:

...
ERROR 1: IReadBlock failed at X offset 0, Y offset 29
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 29
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.
...

any ideas on what could be going wrong.  I thought a reinstall of a 
newer version of gdal would fix this, but that does not seem to be the case.



From cportka at newwireless.com  Mon Jan 22 21:12:12 2007
From: cportka at newwireless.com (Chris Portka)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
Message-ID: <45B56EFC.2030108@newwireless.com>

I can't seem to get GDAL warp to work on a gif image when converting 
from one UTM zone to another.  If anyone could give me any help at all 
that would be much appreciated.  I've worked on this a long time and 
can't find any documentation that shows I'm doing anything incorrect.  
The exception I get is in this part of the GDAL code (my code follows):

int GDALGenImgProjTransform( void *pTransformArg, int bDstToSrc,
                             int nPointCount,
                             double *padfX, double *padfY, double *padfZ,
                             int *panSuccess )
{
    GDALGenImgProjTransformInfo *psInfo =
        (GDALGenImgProjTransformInfo *) pTransformArg;
    int   i;
    double *padfGeoTransform;
    void *pGCPTransformArg;
    void *pRPCTransformArg;
    void *pTPSTransformArg;
    void *pGeoLocTransformArg;

    if( bDstToSrc )
    {
        padfGeoTransform = psInfo->adfDstGeoTransform;
        pGCPTransformArg = psInfo->pDstGCPTransformArg;
        pRPCTransformArg = NULL;
        pTPSTransformArg = NULL;
        pGeoLocTransformArg = NULL;
    }
    else
    {
        padfGeoTransform = psInfo->adfSrcGeoTransform;
        pGCPTransformArg = psInfo->pSrcGCPTransformArg;    
<-----EXCEPTION HERE
    ...

My code is very similar to the GDAL warp tutorial (the exception I get 
is labeled in the middle of the code):
    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    GDALAllRegister();

    hSrcDS = GDALOpen(fileName.toAscii(), GA_ReadOnly);
    CPLAssert(hSrcDS != NULL);

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    hDriver = GDALGetDriverByName("GIF");
    CPLAssert(hDriver != NULL);

    char *pszSrcWKT = NULL;
    char *pszDstWKT = NULL;

    OGRSpatialReference srcSR;
    srcSR.SetUTM(18, TRUE);
    srcSR.SetWellKnownGeogCS("WGS84");
    srcSR.exportToWkt(&pszSrcWKT);

    CPLAssert(pszSrcWKT != NULL && strlen(pszSrcWKT) > 0);

    OGRSpatialReference dstSR;
    dstSR.SetUTM(17, TRUE);
    dstSR.SetWellKnownGeogCS("WGS84");
    dstSR.exportToWkt(&pszDstWKT);
 
    void *hTransformArg;
    hTransformArg = GDALCreateGenImgProjTransformer(hSrcDS, pszSrcWKT, 
NULL, pszDstWKT, FALSE, 0, 1);
    CPLAssert(hTransformArg != NULL);

    double adfDstGeoTransform[6];
    int nPixels = 0;
    int nLines = 0;
    CPLErr eErr;
EXCEPTION HAPPENS HERE--->    eErr = GDALSuggestedWarpOutput(hSrcDS, 
GDALGenImgProjTransform,
        hTransformArg, adfDstGeoTransform, &nPixels, &nLines);
    CPLAssert(eErr == CE_None);

    qDebug() << "E";

    GDALDestroyGenImgProjTransformer(hTransformArg);
   
    hDstDS = GDALCreate(hDriver, outputFileName.toAscii(), nPixels, 
nLines, GDALGetRasterCount(hSrcDS), eDT, NULL);

    CPLAssert(hDstDS != NULL);
    GDALSetProjection(hDstDS, pszDstWKT);
    GDALSetGeoTransform(hDstDS, adfDstGeoTransform);

    GDALColorTableH hCT;
    hCT = GDALGetRasterColorTable(GDALGetRasterBand(hSrcDS, 1));
    if(hCT != NULL) {
        GDALSetRasterColorTable(GDALGetRasterBand(hDstDS, 1), hCT);
    }
   
    GDALWarpOptions *warpOptions = GDALCreateWarpOptions();
    warpOptions->hSrcDS = hSrcDS;
    warpOptions->hDstDS = hDstDS;

    warpOptions->nBandCount = 1;
    warpOptions->panSrcBands = (int *) malloc(sizeof(int) * 
warpOptions->nBandCount);
    warpOptions->panSrcBands[0] = 1;

    warpOptions->panDstBands = (int *) malloc(sizeof(int) * 
warpOptions->nBandCount);
    warpOptions->panDstBands[0] = 1;
   
    warpOptions->pfnProgress = GDALTermProgress;

    warpOptions->pTransformerArg = 
GDALCreateGenImgProjTransformer(hSrcDS, pszSrcWKT, NULL, pszDstWKT, 
FALSE, 0.0, 1);
    warpOptions->pfnTransformer = GDALGenImgProjTransform;

    GDALWarpOperation operation;
    operation.Initialize(warpOptions);
    operation.ChunkAndWarpImage(0, 0, GDALGetRasterXSize(hDstDS), 
GDALGetRasterYSize(hDstDS));

    GDALDestroyGenImgProjTransformer(warpOptions->pTransformerArg);
    GDALDestroyWarpOptions(warpOptions);
    GDALClose(hSrcDS);
    GDALClose(hDstDS);



Thanks for any help you can give me,
Chris


From warmerdam at pobox.com  Mon Jan 22 23:59:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
In-Reply-To: <45B56EFC.2030108@newwireless.com>
References: <45B56EFC.2030108@newwireless.com>
Message-ID: <45B5962D.2050505@pobox.com>

Chris Portka wrote:
> I can't seem to get GDAL warp to work on a gif image when converting 
> from one UTM zone to another.  If anyone could give me any help at all 
> that would be much appreciated.  I've worked on this a long time and 
> can't find any documentation that shows I'm doing anything incorrect.  
> The exception I get is in this part of the GDAL code (my code follows):
> 
> int GDALGenImgProjTransform( void *pTransformArg, int bDstToSrc,
>                             int nPointCount,
>                             double *padfX, double *padfY, double *padfZ,
>                             int *panSuccess )
> {
>    GDALGenImgProjTransformInfo *psInfo =
>        (GDALGenImgProjTransformInfo *) pTransformArg;
>    int   i;
>    double *padfGeoTransform;
>    void *pGCPTransformArg;
>    void *pRPCTransformArg;
>    void *pTPSTransformArg;
>    void *pGeoLocTransformArg;
> 
>    if( bDstToSrc )
>    {
>        padfGeoTransform = psInfo->adfDstGeoTransform;
>        pGCPTransformArg = psInfo->pDstGCPTransformArg;
>        pRPCTransformArg = NULL;
>        pTPSTransformArg = NULL;
>        pGeoLocTransformArg = NULL;
>    }
>    else
>    {
>        padfGeoTransform = psInfo->adfSrcGeoTransform;
>        pGCPTransformArg = psInfo->pSrcGCPTransformArg;    
> <-----EXCEPTION HERE

Chris,

Your code looks ok to me.  It might help to have a gdalinfo report on the
input file to see if it has GCPs.

But if I where you, I'd examine the psInfo structure very carefully in
the debugger to see if there is anything peculiar about it.

If you have no luck, feel free to boil this down to a minimal program,
and submit a bug report with the input file or a small variation that
demonstrates the problem.

By the way, the GIF format is a "CreateCopy" format so you won't be
able to do a warp directly to a gif file.  You will need to do it
to an intermediate file in a randomly writable format, and then
use CreateCopy() from that to produce the GIF file.  The intermediate
file could be in memory (using MEM format driver) if you know you
aren't working with particularly large images.  However, assuming your
report of where the problem is manifesting is correct, I can't see
that this has anything to do with your current problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 23 00:02:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal install gdaladdo IReadBlock failed
In-Reply-To: <45B557A9.2040406@engr.orst.edu>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
	<45B518C7.3000301@engr.orst.edu> <45B53254.2000603@pobox.com>
	<45B557A9.2040406@engr.orst.edu>
Message-ID: <45B596FB.6030503@pobox.com>

Ryan Ollerenshaw wrote:
> But when running gdaladdo i still get the following error:
> 
> ...
> ERROR 1: IReadBlock failed at X offset 0, Y offset 29
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 29
> ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
> ...
> 
> any ideas on what could be going wrong.  I thought a reinstall of a 
> newer version of gdal would fix this, but that does not seem to be the 
> case.

Ryan,

It might well be an improperly written TIFF file that is causing the
problem.  It might be helpful to have a "tiffinfo -m 10000 " report on
the file for which this problem is reported.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Tue Jan 23 00:16:53 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_translate failed in debug
Message-ID: <3054411AF4728548AD6D7137190D56B30C45AC@admin1.aeromap.com>

Hello, all.
Debugging gdal_translate got a "User breakpoint" dialog box with diagnostic:
HEAP[gdal_translate.exe]: Invalid Address specified to RtlFreeHeap( 2f0000, bf10c8 )

It happens at this call:
GDALClose( (GDALDatasetH) poVDS ); (line 937, gdal_translate.cpp)

Looks like VRTSimpleSource::~VRTSimpleSource() is dereferencing 3 bands in GDALClose() 
and fails on delete poDS (line 1847, gdaldataset.cpp).
Should it be used VSIFree(papoBands[i]) method instead of delete papoBands[i]; ?

Output result is fine. Release version works fine.
Image is rgb 3 bands 8 bits/sample. Below is output from gdalinfo
I'm with gdal 1.4.0, no dwg/dxf support, msvc60 + win2K

Thanks in advance for suggestions.
Gennady


Driver: GTiff/GeoTIFF
Size is 3579, 4657
Coordinate System is:
PROJCS["Alaska_Albers_Equal_Area_Conic",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",55],
    PARAMETER["standard_parallel_2",65],
    PARAMETER["latitude_of_center",50],
    PARAMETER["longitude_of_center",-154],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (353453.269789261690000,1271805.737959691100000)
Pixel Size = (6.437376000043360,-6.437376000043360)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  353453.270, 1271805.738) (147d22'35.78"W, 61d16'6.59"N)
Lower Left  (  353453.270, 1241826.878) (147d25'55.14"W, 61d 0'6.41"N)
Upper Right (  376492.638, 1271805.738) (146d56'52.83"W, 61d14'50.37"N)
Lower Right (  376492.638, 1241826.878) (147d 0'24.90"W, 60d58'50.83"N)
Center      (  364972.954, 1256816.308) (147d11'27.34"W, 61d 7'29.15"N)
Band 1 Block=3579x1 Type=Byte, ColorInterp=Red
  NoData Value=255
Band 2 Block=3579x1 Type=Byte, ColorInterp=Green
  NoData Value=255
Band 3 Block=3579x1 Type=Byte, ColorInterp=Blue
  NoData Value=255


From frederic.claudel at magellium.fr  Tue Jan 23 03:44:31 2007
From: frederic.claudel at magellium.fr (Frederic Claudel)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] PAM and minimum/maximum values
In-Reply-To: <45B4EDFE.50206@pobox.com>
Message-ID: <007701c73eca$b387b600$a401a8c0@pc164>

Thanks Frank and Mateusz. 
I commited a bug entry for the min/max (#1454). The code is available if
needed (but I'm sure you dont' need it)
regards,
Frederic

-----Message d'origine-----
De : Frank Warmerdam [mailto:warmerdam@pobox.com] 
Envoy? : lundi 22 janvier 2007 18:02
? : Frederic Claudel
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] PAM and minimum/maximum values

Frederic Claudel wrote:
> Hi all,
> Is there a good reason why the PAM mode doesn't provide info. about 
> the band minimum and maximum values?
> 
> More specifically :
> GDALPamRasterBand actually loads the <Minimum> and <Maximum> values 
> from the .aux.xml PAM file in the XMLInit() method, but GDALRasterBand 
> methods
> GetMinimum() and GetMaximum() have not been re-implemented in 
> GDALPamRasterBand, so there's no way to access the member data (dfMin 
> and dfMAx, in GDALRasterBandPamInfo).

Frederic,

I believe this is just an omission.  If you would file a bug report on it, I
will have Mateusz fix it as time permits.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From josegomez at gmx.net  Tue Jan 23 04:22:42 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Masking rasters with gdal_rasterize
Message-ID: <20070123092242.105550@gmx.net>


Hi!
I use gdal_rasterize a lot. There is one thing which would be great, which tothe best of my knowledge, isn't yet possible without iddling with things. This is to simply mask areas in a raster which are outside polygons. Is there a way of doing this with gdal_resize (other than rasterize the vector and implement the masking elsewhere)?

Also, is there a file limit for gdal_rasterize? I have a pretty large polygon file (>900k polygons) which fails with an out of memory error (this is with gdal 1.3.2, I am yet to try the newer version).

Cheers,
Jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From dhdeangelis.listas at gmail.com  Tue Jan 23 04:26:41 2007
From: dhdeangelis.listas at gmail.com (=?ISO-8859-1?Q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Problem using gdal_translate on netcdf file
In-Reply-To: <C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
References: <a498cee90701200120m7c3e8991q6b0b95fe13eb44d2@mail.gmail.com>
	<C7B4D2761C705C44BEE5F4E4F13CF6F099D241@frost.shore.mbari.org>
Message-ID: <a498cee90701230126m18f379b8we4c706fae8aac94c@mail.gmail.com>

Andrew,

I tried this morning with one of the netCDF grids that come with the
GMT examples (ex02/HI_topo2.nc). I did:

gdal_translate -scale -7438 2804 0 255 -ot Byte netCDF:"HI_topo2.nc":z test.jpg

and works good for me. This command exported to a 8bit image while
rescaling to the max and min of the netCDF grid to 0 and 255. One must
be careful in selecting the appropriate netCDF dataset.  You can
afterwards modify the colours in GIMP to make the image look nicer.

Cheers

Hern?n


2007/1/22, Chase, Andrew <achase@mbari.org>:
> Thanks for the suggestion Hern?n, I've already tried this (and tried it again just now to double check). When I set "-ot Byte" I still get a black image, this time in all formats including Gtiff, whereas before I got the vertical banding in Gtiff.
>
> Still searching...
>
> -Andrew
>
>
> ________________________________
>
>         From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Hern?n De Angelis
>         Sent: Saturday, January 20, 2007 1:21 AM
>         To: gdal-dev@lists.maptools.org
>         Subject: Re: [Gdal-dev] Problem using gdal_translate on netcdf file
>
>
>         Your files are in Float32 format, try rescaling them to 8bit:   gdal_translate -ot Byte
>
>
>         2007/1/20, Chase, Andrew <achase@mbari.org>:
>
>                 Hi All,
>
>                 I'm trying to convert a netcdf file to some an image format that I can use with imagemagick (tiff, jpg, png, anything will do). Unfortunately, I'm having some troubles getting the job done. When I try gdal_translate with any format other than Gtiff I get a completely black image. When I use the Gtiff format, I get a weird grayscale mutated version of my source file, with strange grainy vertical bands. When I open the netcdf file in OpenEV it looks perfectly normal, and I use the netcdf file for a lot of different data processing, so I feel confident that the data itself is good (if not the formatting of the data).
>
>                 I've placed a subsetted version of the translated image online to show what the resulting geotiff looks like, it's here:
>
>                 http://www.mbari.org/staff/achase/vdm/hrbath.tif <http://www.mbari.org/staff/achase/vdm/hrbath.tif>
>                 Maybe someone else has seen this same type of image problem?
>
>                 Here's the gdalinfo output:
>
>                 C:\workspace\vdm\resources\grids>gdalinfo NETCDF:"hrbath.nc":elevation
>                 Driver: netCDF/Network Common Data Format
>                 Size is 5001, 4001
>                 Coordinate System is `'
>                 Origin = (-125.000000000000000,38.000999999999998)
>                 Pixel Size = (0.000999800039992,-0.000999750062484)
>                 Metadata:
>                   NC_GLOBAL#creationDate=01/19/2007
>                   NC_GLOBAL#lastModified=01/19/2007
>                   NC_GLOBAL#Conventions=CF-1.0
>                   NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
>                   NC_GLOBAL#title=DEM Grid from hrbath.asc
>                   NC_GLOBAL#institution=MBARI
>                   NC_GLOBAL#creator_name=Andrew Chase
>                   NC_GLOBAL#keywords=dem bathymetry grid
>                   elevation#positive=up
>                   elevation#long_name=Elevation
>                   elevation#missing_value=-9.999900e+004
>                   elevation#units=meters
>                   latitude#units=degrees_north (+N/-S)
>                   longitude#units=degrees_east (+E/-W)
>                 Corner Coordinates:
>                 Upper Left  (-125.0000000,  38.0010000)
>                 Lower Left  (-125.0000000,  34.0010000)
>                 Upper Right (-120.0000000,  38.0010000)
>                 Lower Right (-120.0000000,  34.0010000)
>                 Center      (-122.5000000,  36.0010000)
>                 Band 1 Block=5001x1 Type=Float32, ColorInterp=Undefined
>                   NoData Value=-99999
>                   Metadata:
>                     NETCDF_VARNAME=elevation
>                 ----------------------------------------------------------------------------------------------------------
>
>                 And here's the translation I'm trying:
>
>                 C:\workspace\vdm\resources\grids>gdal_translate -of GTiff -a_nodata -99999 NETCD
>                 F:"hrbath.nc":elevation hrbath.tif
>                 Input file size is 5001, 4001
>                 0...10...20...30...40...50...60...70...80...90...100 - done.
>                 ----------------------------------------------------------------------------------------------------------
>
>                 And the resulting gdalinfo output:
>
>                 C:\workspace\vdm\resources\grids>gdalinfo hrbath.tif
>                 Driver: GTiff/GeoTIFF
>                 Size is 5001, 4001
>                 Coordinate System is `'
>                 Origin = (-125.000000000000000,38.000999999999998)
>                 Pixel Size = (0.000999800039992,-0.000999750062484)
>                 Metadata:
>                   NC_GLOBAL#creationDate=01/19/2007
>                   NC_GLOBAL#lastModified=01/19/2007
>                   NC_GLOBAL#Conventions=CF-1.0
>                   NC_GLOBAL#CreatedBy=VARS Data Mining Software - MBARI
>                   NC_GLOBAL#title=DEM Grid from hrbath.asc
>                   NC_GLOBAL#institution=MBARI
>                   NC_GLOBAL#creator_name=Andrew Chase
>                   NC_GLOBAL#keywords=dem bathymetry grid
>                   elevation#positive=up
>                   elevation#long_name=Elevation
>                   elevation#missing_value=-9.999900e+004
>                   elevation#units=meters
>                   latitude#units=degrees_north (+N/-S)
>                   longitude#units=degrees_east (+E/-W)
>                 Corner Coordinates:
>                 Upper Left  (-125.0000000,  38.0010000)
>                 Lower Left  (-125.0000000,  34.0010000)
>                 Upper Right (-120.0000000,  38.0010000)
>                 Lower Right (-120.0000000,  34.0010000)
>                 Center      (-122.5000000,  36.0010000)
>                 Band 1 Block=5001x1 Type=Float32, ColorInterp=Gray
>                   NoData Value=-99999
>                   Metadata:
>                     NETCDF_VARNAME=elevation
>
>
>
>                 Any ideas of what to try would be appreciated.
>
>                 -Andrew
>
>
>                 Andrew C. Chase
>                 Software Engineer
>                 Monterey Bay Aquarium Research Institute
>
>
>                 _______________________________________________
>                 Gdal-dev mailing list
>                 Gdal-dev@lists.maptools.org
>                 http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>
>
>
>
>         --
>
>         Hern?n De Angelis
>         Linux user # 397217
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 

Hern?n De Angelis
Linux user # 397217


From szekerest at gmail.com  Tue Jan 23 08:31:34 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
Message-ID: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>

Dear All,

It seems to me that many of the developers would favour adding the
SWIG generated files to the SVN repository. Currently for some of the
bindings the generated files are already inside, but  the others like
C# doesn't have these files version controlled.

The primary benefit of this solution that it would eliminate the need
to have the SWIG installed for those who want to compile the binaries
from the source. In addition the interface maintainer could choose the
most appropriate SWIG version to generate the files.

However there are some disdvantages when applying this concept, as:

1. For some of the bindings SWIG generates high number of the files.
For the C# interface currently the following files should be added:

 Directory of \gdal\swig\csharp\const

gdalconst.cs
gdalconstPINVOKE.cs
gdalconst_wrap.c

 Directory of \gdal\swig\csharp\gdal

Band.cs
ColorEntry.cs
ColorTable.cs
Dataset.cs
Driver.cs
GCP.cs
gdal.cs
gdalPINVOKE.cs
gdal_wrap.cpp
MajorObject.cs
SWIGTYPE_p_CPLErrorHandler.cs
SWIGTYPE_p_FALSE_IS_ERR.cs
SWIGTYPE_p_GByte.cs
SWIGTYPE_p_int.cs
SWIGTYPE_p_p_char.cs
SWIGTYPE_p_p_GDAL_GCP.cs
XMLNode.cs
XMLNodeType.cs

 Directory of \gdal\swig\csharp\ogr

CoordinateTransformation.cs
DataSource.cs
Driver.cs
Envelope.cs
Feature.cs
FeatureDefn.cs
FieldDefn.cs
Geometry.cs
Layer.cs
ogr.cs
ogrPINVOKE.cs
ogr_wrap.cpp
osr.cs
osrPINVOKE.cs
osr_wrap.cpp
SpatialReference.cs
SWIGTYPE_p_p_char.cs

 Directory of \gdal\swig\csharp\osr

CoordinateTransformation.cs
osr.cs
osrPINVOKE.cs
osr_wrap.cpp
SpatialReference.cs
SWIGTYPE_p_p_char.cs


Upon modifying the C# interface files (.i) sometimes all of the
generated files may vary, some of the files might be deleted renamed
or added.  Therefore the maintainability of these files might bring in
some additional complexity.


2. If different people with different swigs generate these files they
will potentially clobber each other in the repository and even
generate conflicts. Here is an example taken out of a post in the
geos-dev list:

A checks out
B checks out
A generates and updates and commits
B generates and updates, conflict!



Before applying such changes I would like to know how the folks can
live with this idea. When I get some positive confirmation I'm ready
to make it for the SWIG C# binding.

I would start a vote on this approval with a +0 on my side.


Best Regards,

From mateusz at loskot.net  Tue Jan 23 08:44:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
Message-ID: <45B61131.5090903@loskot.net>

Tamas Szekeres wrote:
> Before applying such changes I would like to know how the folks can 
> live with this idea. When I get some positive confirmation I'm ready 
> to make it for the SWIG C# binding.

My personal preference is that SVN/CVS is for developers not for users.
So, I prefer to not to have there any generated files, like
configure or SWIG interfaces.

The main problem I can see is that having generated files makes the
working copy marked as M - modified too often and it's easy to commit
such modified file back to SVN.

ie. if I run ./autogen.sh I get new ./configure, now before every commit
I have to keep in mind to delete the ./configure to not to overwrite the
"official" version living in the SVN.

Now, if there are more such generated files, the problem is much bigger,
because you have to check & clean many places before doing commit from
highest level directory of the source tree

> I would start a vote on this approval with a +0 on my side.

I'm not sure who is supposed to vote, because usually motions are posted
by and to GDAL PSC. But if this motion is to all committers,
My vote is -1 for all generated and intermediate files in SVN

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Christian.Martel at drdc-rddc.gc.ca  Tue Jan 23 10:40:08 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdalinfo returns wrong bounding box with DTED level 1
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1037E2@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

When I run gdalinfo with the OGDI driver on a DTED directory of dt1
files, I get an erronous north bound.
Example : A DTED CD contains files from 42 to 52 degrees north and
gdalinfo returns a north limit of 56.
-I tested three sets of DTED 1 files.
-The problems appens only with DTED level 1, not level 0 or lever 2.
-The problems appens also with GetGeoTransform() in a python script.
-I use fwtools 1.1.3 on windows.

Any idea ?
Thanks
Christian


From milo at 3dsite.nl  Tue Jan 23 10:55:01 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Bessel to wgs84
Message-ID: <45B62FD5.9050701@3dsite.nl>

    Hello list,

I have read the thread on converting Bessel based GeoTiff to wgs84. I
tried the mentioned solution on my Windows machine with FW tools, but it
fails.

Anyone has an idea on this matter?

I am referring to the thread on:
http://lists.maptools.org/pipermail/gdal-dev/2005-May/005742.html

Kind regards,

Milo van der Linden


From bryan at geomega.com  Tue Jan 23 10:59:52 2007
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr2ogr create 25d shapefile
Message-ID: <45B630F8.9050208@geomega.com>

Hello,

Does ogr2ogr have command options that allow you to make a 2.5d 
shapefile from a 2d shapefile while obtaining the z value from a 
specific attribute?

For example:

ogr2ogr out.shp in.shp -nlt linestring25d -??fieldnameforzvalue?? ELEV

Bryan

From warmerdam at pobox.com  Tue Jan 23 11:31:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdalinfo returns wrong bounding box with DTED level 1
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D1037E2@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D1037E2@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45B6387D.8070308@pobox.com>

Martel, Christian wrote:
> Hi,
> 
> When I run gdalinfo with the OGDI driver on a DTED directory of dt1
> files, I get an erronous north bound.
> Example : A DTED CD contains files from 42 to 52 degrees north and
> gdalinfo returns a north limit of 56.
> -I tested three sets of DTED 1 files.
> -The problems appens only with DTED level 1, not level 0 or lever 2.
> -The problems appens also with GetGeoTransform() in a python script.
> -I use fwtools 1.1.3 on windows.

Christian,

FWTools also includes the ogdi_info utility which will report various
information about an ogdi datasource.  Hopefully the commandline usage
messages is enough to figure out how to use it.  I would suggest testing
with that to see if it has the same issue.

If so, then file a bug against the OGDI library though to be honest I
have little interest in digging into the DTED driver since it is so easy
to access DTED files directly with GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 23 11:48:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr2ogr create 25d shapefile
In-Reply-To: <45B630F8.9050208@geomega.com>
References: <45B630F8.9050208@geomega.com>
Message-ID: <45B63C7A.7020705@pobox.com>

Bryan Keith wrote:
> Hello,
> 
> Does ogr2ogr have command options that allow you to make a 2.5d 
> shapefile from a 2d shapefile while obtaining the z value from a 
> specific attribute?
> 
> For example:
> 
> ogr2ogr out.shp in.shp -nlt linestring25d -??fieldnameforzvalue?? ELEV

Bryan,

No, I'm afraid it does not.  You would need to write a script or program
to do this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Martel at drdc-rddc.gc.ca  Tue Jan 23 11:56:05 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdalinfo returns wrong bounding box with DTED level 1
In-Reply-To: <45B6387D.8070308@pobox.com>
References: <D8AD814B3EB3A945B7F149E41240DB6D1037E2@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<45B6387D.8070308@pobox.com>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D1037E3@valcartierex01.valcartier.drdc-rddc.gc.ca>

Frank,

ogdi_info returns the same error. 
I filed a bug to document it but I plan to create a small script to loop
over all dt1 to calculate the whole bbox.

Thanks,
Christian

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: 23 janvier 2007 11:32
> To: Martel, Christian
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] gdalinfo returns wrong bounding box 
> with DTED level 1
> 
> Martel, Christian wrote:
> > Hi,
> > 
> > When I run gdalinfo with the OGDI driver on a DTED directory of dt1 
> > files, I get an erronous north bound.
> > Example : A DTED CD contains files from 42 to 52 degrees north and 
> > gdalinfo returns a north limit of 56.
> > -I tested three sets of DTED 1 files.
> > -The problems appens only with DTED level 1, not level 0 or lever 2.
> > -The problems appens also with GetGeoTransform() in a python script.
> > -I use fwtools 1.1.3 on windows.
> 
> Christian,
> 
> FWTools also includes the ogdi_info utility which will report 
> various information about an ogdi datasource.  Hopefully the 
> commandline usage messages is enough to figure out how to use 
> it.  I would suggest testing with that to see if it has the 
> same issue.
> 
> If so, then file a bug against the OGDI library though to be 
> honest I have little interest in digging into the DTED driver 
> since it is so easy to access DTED files directly with GDAL.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
> http://osgeo.org
> 
> 


From warmerdam at pobox.com  Tue Jan 23 12:05:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Masking rasters with gdal_rasterize
In-Reply-To: <20070123092242.105550@gmx.net>
References: <20070123092242.105550@gmx.net>
Message-ID: <45B6403C.7030201@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi! I use gdal_rasterize a lot. There is one thing which would be great,
> which tothe best of my knowledge, isn't yet possible without iddling with
> things. This is to simply mask areas in a raster which are outside polygons.
> Is there a way of doing this with gdal_resize (other than rasterize the
> vector and implement the masking elsewhere)?

Jose,

It's great to hear it is getting good use!  And yes, a the option you request
would be very very useful for masking - a very common use.  In the past I've
had to add an extra "world ring" around polygons to get this effect.

If you file a feature request for this feature in bugzilla I'll try and
implement it.

> Also, is there a file limit for gdal_rasterize? I have a pretty large
> polygon file (>900k polygons) which fails with an out of memory error (this
> is with gdal 1.3.2, I am yet to try the newer version).

The algorithm is setup such that all all the features from one input layer
are read into memory and then the raster is processed in chunks.  So it
should handle very large rasters reasonably well, but it won't scale up to
truely huge vector layers.

However, 900k of vector data is not alot.  Ah, perhaps you mean > 900000
polygons ... that is quite a few!  It might help if the algorithm discarded
polygons outside the area of the raster.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bryan at geomega.com  Tue Jan 23 12:07:29 2007
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] ogr2ogr create 25d shapefile
In-Reply-To: <45B63C7A.7020705@pobox.com>
References: <45B630F8.9050208@geomega.com> <45B63C7A.7020705@pobox.com>
Message-ID: <45B640D1.50409@geomega.com>

Frank Warmerdam wrote:
> Bryan Keith wrote:
>> Hello,
>>
>> Does ogr2ogr have command options that allow you to make a 2.5d 
>> shapefile from a 2d shapefile while obtaining the z value from a 
>> specific attribute?
>>
>> For example:
>>
>> ogr2ogr out.shp in.shp -nlt linestring25d -??fieldnameforzvalue?? ELEV
> 
> Bryan,
> 
> No, I'm afraid it does not.  You would need to write a script or program
> to do this.
> 

Thanks, Frank.  That's exactly what I did.  If anyone wants a copy (not 
pretty but it works for me), let me know.

Bryan

From warmerdam at pobox.com  Tue Jan 23 12:19:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
Message-ID: <45B643B8.60103@pobox.com>

Tamas Szekeres wrote:
> Dear All,
> 
> It seems to me that many of the developers would favour adding the
> SWIG generated files to the SVN repository. Currently for some of the
> bindings the generated files are already inside, but  the others like
> C# doesn't have these files version controlled.
...
> 1. For some of the bindings SWIG generates high number of the files.
> For the C# interface currently the following files should be added:
...
> Upon modifying the C# interface files (.i) sometimes all of the
> generated files may vary, some of the files might be deleted renamed
> or added.  Therefore the maintainability of these files might bring in
> some additional complexity.

Tamas,

I must say I'm surprised at the number of generated files for C#
compared to other interfaces, but I don't see a fundamental problem
with this.  Presumably new files are only added or removed occasionally
now that things are stable?

I would also add that generally speaking I think only the "chief
maintainer" for a binding should be commiting updates to the generated
files.  Furthermore, it isn't critical that they be updated in SVN
every time a change is made, but it is important that the committed
files always be in good working condition.

> 2. If different people with different swigs generate these files they
> will potentially clobber each other in the repository and even
> generate conflicts. Here is an example taken out of a post in the
> geos-dev list:
...
> Before applying such changes I would like to know how the folks can
> live with this idea. When I get some positive confirmation I'm ready
> to make it for the SWIG C# binding.

Note that there are already derived csharp files in subversion, they
just haven't been maintained (apparently) and these files are what
goes out in nightly snapshots and releases.

> I would start a vote on this approval with a +0 on my side.

I am +1 on keeping autoconf, libtool, and swig generated files in
subversion.

I find it hugely frustrating trying to build some projects from
source control when I end up spending the first hour or two of
misery trying to get just the right version of autoconf, automake,
libtool, swig, bison, flex, etc installed.  This has contributed to
a disinterest on my part in being a developer for some projects
(such as GEOS).  I don't want to drive developers away from GDAL
with to high a bar to participate.  I'd add the required versions
of some of these tools varies from project to project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 23 12:29:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_translate failed in debug
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45AC@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45AC@admin1.aeromap.com>
Message-ID: <45B645F7.6060800@pobox.com>

Gennady Khokhorin wrote:
> Hello, all.
> Debugging gdal_translate got a "User breakpoint" dialog box with diagnostic:
> HEAP[gdal_translate.exe]: Invalid Address specified to RtlFreeHeap( 2f0000, bf10c8 )
> 
> It happens at this call:
> GDALClose( (GDALDatasetH) poVDS ); (line 937, gdal_translate.cpp)
> 
> Looks like VRTSimpleSource::~VRTSimpleSource() is dereferencing 3 bands in GDALClose() 
> and fails on delete poDS (line 1847, gdaldataset.cpp).
> Should it be used VSIFree(papoBands[i]) method instead of delete papoBands[i]; ?

Gennady,

Delete is the appropriate operator for papoBands[i] - these are C++ objects
of base type GDALRasterBand and are allocated with new.

I believe you are seeing this problem because the VRTDataset() is created
with "new" in gdal_translate.cpp, but release with delete inside the
GDAL DLL.  The problem is that in some ways of building on windows you
end up with distinct heaps for the .exe and the GDAL DLL.

I think the solution would be to modify gdal_translate.cpp to call
"delete poVDS" instead of GDALClose().

I'd appreciate it if you could file a bug with your finds, and
my analysis and we will fix this for GDAL 1.4.1.  I may take
a slightly different approach to avoid even calling "new VRTDataset()"
in gdal_translate since this "direct access" is inherently dangerous
due to it being very different from normal operations with GDAL.

Best regards,

> Output result is fine. Release version works fine.
> Image is rgb 3 bands 8 bits/sample. Below is output from gdalinfo
> I'm with gdal 1.4.0, no dwg/dxf support, msvc60 + win2K
> 



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From j.l.h.hartmann at uva.nl  Tue Jan 23 13:01:08 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Bessel to wgs84
In-Reply-To: <45B62FD5.9050701@3dsite.nl>
References: <45B62FD5.9050701@3dsite.nl>
Message-ID: <45B64D64.90109@uva.nl>

Hi Milo,

There have been several postings on the "Proj4" mailing list about this 
subject. You can find the correct parameters at:

http://lists.maptools.org/pipermail/proj/2006-March/002168.html

Jan

Dr. J. Hartmann
Department of Geography
University of Amsterdam

Milo van der Linden wrote:
>    Hello list,
> 
> I have read the thread on converting Bessel based GeoTiff to wgs84. I
> tried the mentioned solution on my Windows machine with FW tools, but it
> fails.
> 
> Anyone has an idea on this matter?
> 
> I am referring to the thread on:
> http://lists.maptools.org/pipermail/gdal-dev/2005-May/005742.html
> 
> Kind regards,
> 
> Milo van der Linden
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 23 13:14:33 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdaldataset writeraster
Message-ID: <2E58C246F17003499C141D334794D049D587CD@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thank you, William.

I used your clue as follows and it worked.

        gdalnumeric.BandWriteArray(msi_dataset.GetRasterBand(1), r) 
        ......
        gdal.GetDriverByName("GTiff").CreateCopy(outfile_name, msi_dataset)


Shawn Gong

________________________________________
From: William Hughes [mailto:whughes@nb.sympatico.ca] 
Sent: Monday, January 22, 2007 6:22 PM
To: Gong, Shawn
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] gdaldataset writeraster

Gong, Shawn wrote: 
Hi list,

I open a gdaldataset, have done manipulation to r,g,b and nir bands.
Now I'd like to save the 4 bands back to original gdaldataset or a new
dataset.
Can't seem to get gdaldataset's WriteRaster() working, or is it the
right method?
Please help.

        fname1 = 'file3.tif'
        msi_dataset = gdal.Open(fname1)
        msi_array = msi_dataset.ReadAsArray()

        r = msi_array[:][:][0]
        g = msi_array[:][:][1]
        b = msi_array[:][:][2]
        nir = msi_array[:][:][3]

        row = msi_dataset.RasterYSize
        col = msi_dataset.RasterXSize

the following I am not sure:
        msi_dataset.WriteRaster(0, 0, col, row, r, col, row,
Numeric.Float16, [0])
        msi_dataset.WriteRaster(0, 0, col, row, g, col, row,
Numeric.Float16, [1])
        msi_dataset.WriteRaster(0, 0, col, row, b, col, row,
Numeric.Float16, [2])
        msi_dataset.WriteRaster(0, 0, col, row, nir, col, row,
Numeric.Float16, [3])

Thanks,
Shawn Gong


  

________________________________________

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

Untested, and as usual take with a grain of salt.
I think this is what is happening

The member function .ReadAsArray() returns an
array.? As far as I can tell the function WriteRaster() takes a string as the forth
argument and does not understand Numeric Types.
The function .BandWriteArray() in gdalnumeric.py takes
care of both these problems.? 

??????????????????????????????????????????????? - William Hughes


From dmorissette at mapgears.com  Tue Jan 23 13:18:12 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
Message-ID: <45B65164.7060305@mapgears.com>

I'll vote -0 on this for similar reasons as what Mateusz explained.

I understand Frank's concerns that GDAL should be as easy as possible to 
build, but the SWIG C# stuff is a wrapper on top of GDAL, it's not part 
of the core, so I would argue that those files will be useful only for 
someone who needs to work on the development version of GDAL from SVN 
and needs to work with C# and doesn't have SWIG available, that's a 
fairly specialized case and that doesn't justify all the trouble that 
Mateusz explained.

A less intrusive solution could be to have an automated script build a 
daily snapshot of the SWIG wrappers and make them available on the 
download site. Then the makefiles could spit out an error if the 
wrappers are missing and SWIG is not available, telling the developer to 
either install SWIG or download the wrappers in order to build the C# 
interface.

My 0.02$

Daniel

Tamas Szekeres wrote:
> Dear All,
> 
> It seems to me that many of the developers would favour adding the
> SWIG generated files to the SVN repository. Currently for some of the
> bindings the generated files are already inside, but  the others like
> C# doesn't have these files version controlled.
> 
> The primary benefit of this solution that it would eliminate the need
> to have the SWIG installed for those who want to compile the binaries
> from the source. In addition the interface maintainer could choose the
> most appropriate SWIG version to generate the files.
> 
> However there are some disdvantages when applying this concept, as:
> 
> 1. For some of the bindings SWIG generates high number of the files.
> For the C# interface currently the following files should be added:
> 
> Directory of \gdal\swig\csharp\const
> 
> gdalconst.cs
> gdalconstPINVOKE.cs
> gdalconst_wrap.c
> 
> Directory of \gdal\swig\csharp\gdal
> 
> Band.cs
> ColorEntry.cs
> ColorTable.cs
> Dataset.cs
> Driver.cs
> GCP.cs
> gdal.cs
> gdalPINVOKE.cs
> gdal_wrap.cpp
> MajorObject.cs
> SWIGTYPE_p_CPLErrorHandler.cs
> SWIGTYPE_p_FALSE_IS_ERR.cs
> SWIGTYPE_p_GByte.cs
> SWIGTYPE_p_int.cs
> SWIGTYPE_p_p_char.cs
> SWIGTYPE_p_p_GDAL_GCP.cs
> XMLNode.cs
> XMLNodeType.cs
> 
> Directory of \gdal\swig\csharp\ogr
> 
> CoordinateTransformation.cs
> DataSource.cs
> Driver.cs
> Envelope.cs
> Feature.cs
> FeatureDefn.cs
> FieldDefn.cs
> Geometry.cs
> Layer.cs
> ogr.cs
> ogrPINVOKE.cs
> ogr_wrap.cpp
> osr.cs
> osrPINVOKE.cs
> osr_wrap.cpp
> SpatialReference.cs
> SWIGTYPE_p_p_char.cs
> 
> Directory of \gdal\swig\csharp\osr
> 
> CoordinateTransformation.cs
> osr.cs
> osrPINVOKE.cs
> osr_wrap.cpp
> SpatialReference.cs
> SWIGTYPE_p_p_char.cs
> 
> 
> Upon modifying the C# interface files (.i) sometimes all of the
> generated files may vary, some of the files might be deleted renamed
> or added.  Therefore the maintainability of these files might bring in
> some additional complexity.
> 
> 
> 2. If different people with different swigs generate these files they
> will potentially clobber each other in the repository and even
> generate conflicts. Here is an example taken out of a post in the
> geos-dev list:
> 
> A checks out
> B checks out
> A generates and updates and commits
> B generates and updates, conflict!
> 
> 
> 
> Before applying such changes I would like to know how the folks can
> live with this idea. When I get some positive confirmation I'm ready
> to make it for the SWIG C# binding.
> 
> I would start a vote on this approval with a +0 on my side.
> 
> 
> Best Regards,
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From hobu at iastate.edu  Tue Jan 23 14:08:01 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the
	SVN repository
In-Reply-To: <45B65164.7060305@mapgears.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
	<45B65164.7060305@mapgears.com>
Message-ID: <6.2.3.4.2.20070123125629.02c58ca0@hobu.mail.iastate.edu>

I'm in Frank's camp.  I want generated stuff in the repository as a 
"last known good" sort of solution.  GEOS has taken this strategy of 
updating snapshots instead of keeping generated stuff in SVN and it 
has for all practical purposes killed my involvement with it as a 
Windows maintainer/developer.

Would it be possible to svn-hook the generation and commit of 
interface files whenever ./swig is commited on?  This might not take 
away the conflict problem, however.  This is probably too fragile.

Howard



At 12:18 PM 1/23/2007, Daniel Morissette wrote:
>I'll vote -0 on this for similar reasons as what Mateusz explained.
>
>I understand Frank's concerns that GDAL should be as easy as 
>possible to build, but the SWIG C# stuff is a wrapper on top of 
>GDAL, it's not part of the core, so I would argue that those files 
>will be useful only for someone who needs to work on the development 
>version of GDAL from SVN and needs to work with C# and doesn't have 
>SWIG available, that's a fairly specialized case and that doesn't 
>justify all the trouble that Mateusz explained.
>
>A less intrusive solution could be to have an automated script build 
>a daily snapshot of the SWIG wrappers and make them available on the 
>download site. Then the makefiles could spit out an error if the 
>wrappers are missing and SWIG is not available, telling the 
>developer to either install SWIG or download the wrappers in order 
>to build the C# interface.
>
>My 0.02$
>
>Daniel
>
>Tamas Szekeres wrote:
>>Dear All,
>>It seems to me that many of the developers would favour adding the
>>SWIG generated files to the SVN repository. Currently for some of the
>>bindings the generated files are already inside, but  the others like
>>C# doesn't have these files version controlled.
>>The primary benefit of this solution that it would eliminate the need
>>to have the SWIG installed for those who want to compile the binaries
>>from the source. In addition the interface maintainer could choose the
>>most appropriate SWIG version to generate the files.
>>However there are some disdvantages when applying this concept, as:
>>1. For some of the bindings SWIG generates high number of the files.
>>For the C# interface currently the following files should be added:
>>Directory of \gdal\swig\csharp\const
>>gdalconst.cs
>>gdalconstPINVOKE.cs
>>gdalconst_wrap.c
>>Directory of \gdal\swig\csharp\gdal
>>Band.cs
>>ColorEntry.cs
>>ColorTable.cs
>>Dataset.cs
>>Driver.cs
>>GCP.cs
>>gdal.cs
>>gdalPINVOKE.cs
>>gdal_wrap.cpp
>>MajorObject.cs
>>SWIGTYPE_p_CPLErrorHandler.cs
>>SWIGTYPE_p_FALSE_IS_ERR.cs
>>SWIGTYPE_p_GByte.cs
>>SWIGTYPE_p_int.cs
>>SWIGTYPE_p_p_char.cs
>>SWIGTYPE_p_p_GDAL_GCP.cs
>>XMLNode.cs
>>XMLNodeType.cs
>>Directory of \gdal\swig\csharp\ogr
>>CoordinateTransformation.cs
>>DataSource.cs
>>Driver.cs
>>Envelope.cs
>>Feature.cs
>>FeatureDefn.cs
>>FieldDefn.cs
>>Geometry.cs
>>Layer.cs
>>ogr.cs
>>ogrPINVOKE.cs
>>ogr_wrap.cpp
>>osr.cs
>>osrPINVOKE.cs
>>osr_wrap.cpp
>>SpatialReference.cs
>>SWIGTYPE_p_p_char.cs
>>Directory of \gdal\swig\csharp\osr
>>CoordinateTransformation.cs
>>osr.cs
>>osrPINVOKE.cs
>>osr_wrap.cpp
>>SpatialReference.cs
>>SWIGTYPE_p_p_char.cs
>>
>>Upon modifying the C# interface files (.i) sometimes all of the
>>generated files may vary, some of the files might be deleted renamed
>>or added.  Therefore the maintainability of these files might bring in
>>some additional complexity.
>>
>>2. If different people with different swigs generate these files they
>>will potentially clobber each other in the repository and even
>>generate conflicts. Here is an example taken out of a post in the
>>geos-dev list:
>>A checks out
>>B checks out
>>A generates and updates and commits
>>B generates and updates, conflict!
>>
>>Before applying such changes I would like to know how the folks can
>>live with this idea. When I get some positive confirmation I'm ready
>>to make it for the SWIG C# binding.
>>I would start a vote on this approval with a +0 on my side.
>>
>>Best Regards,
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>--
>Daniel Morissette
>http://www.mapgears.com/
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From epatton at nrcan.gc.ca  Tue Jan 23 14:19:28 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Error reading jp2: 'terminate called after throwing an
	instance of 'std::bad_alloc'
In-Reply-To: <CA803441152AAE40935609509953BAD20F10F1@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F10EF@s0-ott-x4.nrn.nrcan.gc.ca>
	<CA803441152AAE40935609509953BAD20F10F1@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <CA803441152AAE40935609509953BAD20F10F6@s0-ott-x4.nrn.nrcan.gc.ca>

Perfect, thanks Frank! Compiling without Jasper worked without a hitch.

~ Eric. 

-----Original Message-----
From: Frank Warmerdam
To: Patton, Eric
Cc: gdal-dev@lists.maptools.org
Sent: 1/19/2007 4:28 PM
Subject: Re: [Gdal-dev] Error reading jp2: 'terminate called after throwing an instance of 'std::bad_alloc'

Patton, Eric wrote:
> Frank,
> 
> Running the command you suggested seems to only use the JPEG2000
driver. I
> get lines and lines of the following:
> 
> <snip> ... JPEG2000: Component 41921: bpp=4, signedness=0 JPEG2000:
> Component 41922: bpp=4, signedness=0 JPEG2000: Component 41923: bpp=4,
> signedness=0 JPEG2000: Component 41924: bpp=4, signedness=0 JPEG2000:
> Component 41925: bpp=4, signedness=0 terminate called after throwing
an
> instance of 'std::bad_alloc' what():  St9bad_alloc Aborted
> 
> Only the last few lines of output are shown. Does it matter what order
I
> compiled jasper-1.900.0.uuid vs. libecwj2-3.3? I believe I complied
jasper
> first, if it matters.

Eric,

I think the --config option takes effect after registration which is
likely
why it is having no effect.  Setting GDAL_SKIP ahead of time as an
environment variable, or building without JasPer should ensure GDAL
uses the JP2ECW driver instead of the JPEG2000 driver.

> Thanks for the suggestion for FWTools. I installed it under Windows,
and
> imported a 9.5MB jp2 file as a test - OpenEV exported this jp2 to an
800MB
> tiff! I wonder how big the 291MB jp2 file  would expand to.

1:10 expansion is common, 1:100 less so.  Note that TIFF only supports
up to
4GB files, so if it is going to be very large you will need to use
a different format, like HFA (erdas imagine).

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From cportka at newwireless.com  Tue Jan 23 14:35:33 2007
From: cportka at newwireless.com (Chris Portka)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
In-Reply-To: <45B5962D.2050505@pobox.com>
References: <45B56EFC.2030108@newwireless.com> <45B5962D.2050505@pobox.com>
Message-ID: <45B66385.8000701@newwireless.com>

Frank Warmerdam wrote:
> Chris Portka wrote:
>> I can't seem to get GDAL warp to work on a gif image when converting 
>> from one UTM zone to another.  If anyone could give me any help at 
>> all that would be much appreciated.  I've worked on this a long time 
>> and can't find any documentation that shows I'm doing anything 
>> incorrect.  The exception I get is in this part of the GDAL code (my 
>> code follows):
>>
>> int GDALGenImgProjTransform( void *pTransformArg, int bDstToSrc,
>>                             int nPointCount,
>>                             double *padfX, double *padfY, double *padfZ,
>>                             int *panSuccess )
>> {
>>    GDALGenImgProjTransformInfo *psInfo =
>>        (GDALGenImgProjTransformInfo *) pTransformArg;
>>    int   i;
>>    double *padfGeoTransform;
>>    void *pGCPTransformArg;
>>    void *pRPCTransformArg;
>>    void *pTPSTransformArg;
>>    void *pGeoLocTransformArg;
>>
>>    if( bDstToSrc )
>>    {
>>        padfGeoTransform = psInfo->adfDstGeoTransform;
>>        pGCPTransformArg = psInfo->pDstGCPTransformArg;
>>        pRPCTransformArg = NULL;
>>        pTPSTransformArg = NULL;
>>        pGeoLocTransformArg = NULL;
>>    }
>>    else
>>    {
>>        padfGeoTransform = psInfo->adfSrcGeoTransform;
>>        pGCPTransformArg = psInfo->pSrcGCPTransformArg;    
>> <-----EXCEPTION HERE
>
> Chris,
>
> Your code looks ok to me.  It might help to have a gdalinfo report on the
> input file to see if it has GCPs.
>
> But if I where you, I'd examine the psInfo structure very carefully in
> the debugger to see if there is anything peculiar about it.
>
> If you have no luck, feel free to boil this down to a minimal program,
> and submit a bug report with the input file or a small variation that
> demonstrates the problem.
>
> By the way, the GIF format is a "CreateCopy" format so you won't be
> able to do a warp directly to a gif file.  You will need to do it
> to an intermediate file in a randomly writable format, and then
> use CreateCopy() from that to produce the GIF file.  The intermediate
> file could be in memory (using MEM format driver) if you know you
> aren't working with particularly large images.  However, assuming your
> report of where the problem is manifesting is correct, I can't see
> that this has anything to do with your current problem.
>
> Best regards,
Thanks for your feedback.  I think I may have narrowed down the problem, 
but I'm confused on one point that I can't find documentation for.  In 
the warp tutorial there is the following line for getting the suggested 
output:

eErr = GDALSuggestedWarpOutput <http://gdal.org/gdal__alg_8h.html#816819e7495bfce06dbd110f7c57af65>( hSrcDS, 
                                    GDALGenImgProjTransform, hTransformArg, 
                                    adfDstGeoTransform, &nPixels, &nLines );


I understand what all these arguments are except 
GDALGenImgProjTransform, which I believe to be the transformer 
function's signature, but I'm unclear.  Where is this defined?  How does 
this interact or differ from hTransformArg?  I'm pretty sure it is 
something to do with this interaction that is acting funny.  Are there 
alternatives to this such as a GDALReprojectionTransform?  Is there a 
list of all possible alternatives or a way to construct one myself?  Thanks,
Chris

From warmerdam at pobox.com  Tue Jan 23 15:16:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
In-Reply-To: <45B66385.8000701@newwireless.com>
References: <45B56EFC.2030108@newwireless.com> <45B5962D.2050505@pobox.com>
	<45B66385.8000701@newwireless.com>
Message-ID: <45B66D31.6010500@pobox.com>

Chris Portka wrote:
> Thanks for your feedback.  I think I may have narrowed down the problem, 
> but I'm confused on one point that I can't find documentation for.  In 
> the warp tutorial there is the following line for getting the suggested 
> output:
> 
> eErr = GDALSuggestedWarpOutput 
> <http://gdal.org/gdal__alg_8h.html#816819e7495bfce06dbd110f7c57af65>( 
> hSrcDS,                                    GDALGenImgProjTransform, 
> hTransformArg,                                    adfDstGeoTransform, 
> &nPixels, &nLines );
> 
> I understand what all these arguments are except 
> GDALGenImgProjTransform, which I believe to be the transformer 
> function's signature, but I'm unclear.  Where is this defined?  How does 
> this interact or differ from hTransformArg?  I'm pretty sure it is 
> something to do with this interaction that is acting funny.  Are there 
> alternatives to this such as a GDALReprojectionTransform?  Is there a 
> list of all possible alternatives or a way to construct one myself?  

Chris,

The transformer is an actual function while the transformarg is the
private data used by the transformer to keep track of what it is
supposed to do.  The GDALTransformerFunc concept is documented at:

   http://gdal.org/gdal__alg_8h.html#9ad4227ec5fd5b70637eeb6996172318

You can also get there by following the GDALTransformerFunc link from the
GDALSuggestedWarpOutput() documentation you referenced.

You can implement your own transformation function though that should
rarely be needed.  The GDALTransformFunc docs list some of the common
implementations.  But for your case you will presumably want to use
GDALGenImgProjTransform.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Tue Jan 23 16:36:10 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <45B643B8.60103@pobox.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
	<45B643B8.60103@pobox.com>
Message-ID: <f3b73b7d0701231336i7958ae33r2e37e46c13ccefc2@mail.gmail.com>

2007/1/23, Frank Warmerdam <warmerdam@pobox.com>:

> I must say I'm surprised at the number of generated files for C#
> compared to other interfaces, but I don't see a fundamental problem
> with this.  Presumably new files are only added or removed occasionally
> now that things are stable?

Normally a common development task doesn't require taking care of
which files are created, altered, renamed and removed. I'm a bit
scared of the fact, that after making some changes in the interface
files or the makefiles I have to go through the 40-50 files in 4
directories and discover the changes.
Currently it is enough to clean the old files and have the new files
generated by SWIG. But now I'll have to:

1. save the old files somewhere
2. Removing the old files and creating the new ones in the original places
3. Make a diff amongst the old and the new directories
4. Applying a SVN add for the new files.
5. Copying back the old files and applying a SVN remove on them
6. Commit the modified files and the directories
7. Removing the unwanted files.

Probably some steps might be simplified but the overall process is complex.

> I would also add that generally speaking I think only the "chief
> maintainer" for a binding should be commiting updates to the generated
> files.  Furthermore, it isn't critical that they be updated in SVN
> every time a change is made, but it is important that the committed
> files always be in good working condition.
>

It sounds like we would want to keep 2 versions of the code in the
same repository. Currently I cannot see a real benefit of this
solution as taking a snapshot on the working SVN creating the derived
files and store them in a suitable place.
Apparently, if we find our interface files or makefiles messed up, we
cannot recreate the good version from the derived files.

>
> Note that there are already derived csharp files in subversion, they
> just haven't been maintained (apparently) and these files are what
> goes out in nightly snapshots and releases.
>

After reviewing the SVN I couldn't find such files in the csharp
directory. Are you referring to the csharp samples in the /apps
directory?

>
> I find it hugely frustrating trying to build some projects from
> source control when I end up spending the first hour or two of
> misery trying to get just the right version of autoconf, automake,
> libtool, swig, bison, flex, etc installed.  This has contributed to
> a disinterest on my part in being a developer for some projects
> (such as GEOS).  I don't want to drive developers away from GDAL
> with to high a bar to participate.  I'd add the required versions
> of some of these tools varies from project to project.
>

This is the area that I cannot feel in my bones and that't why I've
started this thread. However setting up a proper environment once
seems to be a smaller deal than making a number of post development
steps every time.
At this phase of the discussion the automated creation of the derived
files in the release/daily snapshot seems to be more reasonable to me.

Best Regards,

Tamas

From szekerest at gmail.com  Tue Jan 23 16:40:40 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <6.2.3.4.2.20070123125629.02c58ca0@hobu.mail.iastate.edu>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
	<45B65164.7060305@mapgears.com>
	<6.2.3.4.2.20070123125629.02c58ca0@hobu.mail.iastate.edu>
Message-ID: <f3b73b7d0701231340v277c5aa6k28dd2cbae5d159b7@mail.gmail.com>

2007/1/23, Howard Butler <hobu@iastate.edu>:
> I'm in Frank's camp.  I want generated stuff in the repository as a
> "last known good" sort of solution.  GEOS has taken this strategy of
> updating snapshots instead of keeping generated stuff in SVN and it
> has for all practical purposes killed my involvement with it as a
> Windows maintainer/developer.
>

Howard,

Could you describe in more detail what problems may arise when using
this solution?

Thanks,


Tamas

From warmerdam at pobox.com  Tue Jan 23 18:09:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <f3b73b7d0701231336i7958ae33r2e37e46c13ccefc2@mail.gmail.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
	<45B643B8.60103@pobox.com>
	<f3b73b7d0701231336i7958ae33r2e37e46c13ccefc2@mail.gmail.com>
Message-ID: <45B695C3.3010204@pobox.com>

Tamas Szekeres wrote:
>> Note that there are already derived csharp files in subversion, they
>> just haven't been maintained (apparently) and these files are what
>> goes out in nightly snapshots and releases.
>>
> 
> After reviewing the SVN I couldn't find such files in the csharp
> directory. Are you referring to the csharp samples in the /apps
> directory?

Tamas,

I appear to have been mistaken.  The only .cs files I see now
are the examples in the apps directory.  This is a relief.  At
least there aren't out of date files floating around in the release.

>> I find it hugely frustrating trying to build some projects from
>> source control when I end up spending the first hour or two of
>> misery trying to get just the right version of autoconf, automake,
>> libtool, swig, bison, flex, etc installed.  This has contributed to
>> a disinterest on my part in being a developer for some projects
>> (such as GEOS).  I don't want to drive developers away from GDAL
>> with to high a bar to participate.  I'd add the required versions
>> of some of these tools varies from project to project.
>>
> 
> This is the area that I cannot feel in my bones and that't why I've
> started this thread. However setting up a proper environment once
> seems to be a smaller deal than making a number of post development
> steps every time.
> At this phase of the discussion the automated creation of the derived
> files in the release/daily snapshot seems to be more reasonable to me.

Well, keep in mind it involves setting up a proper environment everywhere
a person works.  I, for one, find myself setting up gdal builds on new
machines fairly frequently, or "damaging" old ones to the point I need to
re-setup some things.

Nevertheless, if it is too messy to keep swig output files for csharp
in svn then you don't need to.  It isn't my intention to create work
for volunteers beyond what they are interested in taking on.

At some point we should look into ensuring the swig generated files do
get into the snapshots.  Basically this means something has to be done
to the mkgdaldist.sh script, and we have to make sure the appropriate
version of swig is on systems where it is run (such as www.gdal.org).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Tue Jan 23 18:03:41 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_rasterize for World Vector Shoreline (WVS) data
Message-ID: <fa2ac0580701231503n4d91b735n44ca60257bd8f933@mail.gmail.com>

Hi,

I would like to try gdal_rasterize to convert World Vector Shoreline (WVS)
data into raster data.  I am hoping that this will speed up performance when
viewing this data within MapServer.  In the documentation is says "Currently
gdal_rasterize cannot create new output files though that may be added
eventually".  I don't want to merge WVS with an existing raster layer, but
have its own layer.  How can I create a blank geotiff that I can use as
output for this rasterized WVS data?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070123/6943829a/attachment.html
From warmerdam at pobox.com  Tue Jan 23 18:40:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_rasterize for World Vector Shoreline (WVS) data
In-Reply-To: <fa2ac0580701231503n4d91b735n44ca60257bd8f933@mail.gmail.com>
References: <fa2ac0580701231503n4d91b735n44ca60257bd8f933@mail.gmail.com>
Message-ID: <45B69CDA.2080500@pobox.com>

John Mitchell wrote:
> Hi,
> 
> I would like to try gdal_rasterize to convert World Vector Shoreline 
> (WVS) data into raster data.  I am hoping that this will speed up 
> performance when viewing this data within MapServer.  In the 
> documentation is says "Currently gdal_rasterize cannot create new output 
> files though that may be added eventually".  I don't want to merge WVS 
> with an existing raster layer, but have its own layer.  How can I create 
> a blank geotiff that I can use as output for this rasterized WVS data?

John,

This may seem odd, but I've often created a blank file to work in
with gdal_translate from some existing file.  I use "-scale 0 100 0 0.01"
to essentially force all the pixels to zero and switches like -a_ullr
and -a_srs to set the bounds and coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From cportka at newwireless.com  Tue Jan 23 20:10:19 2007
From: cportka at newwireless.com (Chris Portka)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
In-Reply-To: <45B66D31.6010500@pobox.com>
References: <45B56EFC.2030108@newwireless.com> <45B5962D.2050505@pobox.com>
	<45B66385.8000701@newwireless.com> <45B66D31.6010500@pobox.com>
Message-ID: <45B6B1FB.1000300@newwireless.com>

Frank Warmerdam wrote:
> Chris Portka wrote:
>> Thanks for your feedback.  I think I may have narrowed down the 
>> problem, but I'm confused on one point that I can't find 
>> documentation for.  In the warp tutorial there is the following line 
>> for getting the suggested output:
>>
>> eErr = GDALSuggestedWarpOutput 
>> <http://gdal.org/gdal__alg_8h.html#816819e7495bfce06dbd110f7c57af65>( 
>> hSrcDS,                                    GDALGenImgProjTransform, 
>> hTransformArg,                                    adfDstGeoTransform, 
>> &nPixels, &nLines );
>>
>> I understand what all these arguments are except 
>> GDALGenImgProjTransform, which I believe to be the transformer 
>> function's signature, but I'm unclear.  Where is this defined?  How 
>> does this interact or differ from hTransformArg?  I'm pretty sure it 
>> is something to do with this interaction that is acting funny.  Are 
>> there alternatives to this such as a GDALReprojectionTransform?  Is 
>> there a list of all possible alternatives or a way to construct one 
>> myself?  
>
> Chris,
>
> The transformer is an actual function while the transformarg is the
> private data used by the transformer to keep track of what it is
> supposed to do.  The GDALTransformerFunc concept is documented at:
>
>   http://gdal.org/gdal__alg_8h.html#9ad4227ec5fd5b70637eeb6996172318
>
> You can also get there by following the GDALTransformerFunc link from the
> GDALSuggestedWarpOutput() documentation you referenced.
>
> You can implement your own transformation function though that should
> rarely be needed.  The GDALTransformFunc docs list some of the common
> implementations.  But for your case you will presumably want to use
> GDALGenImgProjTransform.
>
> Best regards,
Thanks for all your help so far.  I can now "successfully" warp without 
an exception occurring.  However, now when I try to actually read the 
data it is corrupted, or entirely blank (every pixel of the output file 
is black).  I think I'm having a problem getting  all the bands copied 
out of the raster file.  I want every band from the source raster to be 
copied and transformed to the destination, is there an easy way to 
specify this?  I'm also unclear on the type for the buffer I should be 
passing to WarpRegionToBuffer - I'm assuming an nPixels * nLines * 
nBands unsigned char array (the source raster is a 24-bit gif or jpg, so 
nBands gives me 3).  Here's my code (I've labeled where the band code 
starts):

    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    GDALAllRegister();

    hSrcDS = GDALOpen(fileName.toAscii(), GA_ReadOnly);
    if (hSrcDS == NULL) {
        qDebug() << "Problem opening dataset";
    }

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    hDriver = GDALGetDriverByName("MEM");
    if (hDriver == NULL) {
        qDebug() << "Problem creating driver";
    }

    char *pszSrcWKT = NULL;
    char *pszDstWKT = NULL;

    OGRSpatialReference srcSR;
    srcSR.SetWellKnownGeogCS("WGS84");
    srcSR.SetUTM(18, TRUE);
    srcSR.exportToWkt(&pszSrcWKT);
    if (pszSrcWKT == NULL || strlen(pszSrcWKT) <= 0) {
        qDebug() << "Problem creating pszSrcWKT";
    }

    OGRSpatialReference dstSR;
    dstSR.SetWellKnownGeogCS("WGS84");
    dstSR.SetUTM(17, TRUE);
    dstSR.exportToWkt(&pszDstWKT);
    if (pszDstWKT == NULL || strlen(pszDstWKT) <= 0) {
        qDebug() << "Problem creating pszDstWKT";
    }

    void *hTransformArg = NULL;
    hTransformArg = GDALCreateReprojectionTransformer(pszSrcWKT, 
pszDstWKT);
    if (hTransformArg == NULL) {
        qDebug() << "Problems creating the transformer";
    }

    double adfDstGeoTransform[6];
    int nPixels = 0;
    int nLines = 0;
    CPLErr eErr;
    eErr = GDALSuggestedWarpOutput(hSrcDS, GDALReprojectionTransform,
        hTransformArg, adfDstGeoTransform, &nPixels, &nLines);
    if (eErr != CE_None) {
        qDebug() << "Problem getting suggested warp output";
    }

    GDALDestroyReprojectionTransformer(hTransformArg);

    hDstDS = GDALCreate(hDriver, outputFileName.toAscii(), nPixels, nLines,
        GDALGetRasterCount(hSrcDS), eDT, NULL);
    if (hDstDS == NULL) {
        qDebug() << "Problem creating destination";
    }

    GDALSetProjection(hDstDS, pszDstWKT);
    GDALSetGeoTransform(hDstDS, adfDstGeoTransform);

    GDALColorTableH hCT;
    hCT = GDALGetRasterColorTable(GDALGetRasterBand(hSrcDS, 1));
    if(hCT != NULL) {
        GDALSetRasterColorTable(GDALGetRasterBand(hDstDS, 1), hCT);
    }

    GDALWarpOptions *warpOptions = GDALCreateWarpOptions();
    warpOptions->hSrcDS = hSrcDS;
    warpOptions->hDstDS = hDstDS;


    //HERES WHERE THE BAND CODE STARTS

    warpOptions->nBandCount = GDALGetRasterCount(hSrcDS);
    warpOptions->panSrcBands = (int *) CPLMalloc(sizeof(int) * 
warpOptions->nBandCount);
    for (int x = 0; x < warpOptions->nBandCount; x++) {
        warpOptions->panSrcBands[x] = x+1;
    }

    warpOptions->panDstBands = (int *) CPLMalloc(sizeof(int) * 
warpOptions->nBandCount);
    for (int x = 0; x < warpOptions->nBandCount; x++) {
        warpOptions->panDstBands[x] = x+1;
    }

    //HERES WHERE THE BAND CODE ENDS

    warpOptions->pfnProgress = GDALTermProgress;

    warpOptions->pTransformerArg = 
GDALCreateReprojectionTransformer(pszSrcWKT, pszDstWKT);
    if (warpOptions->pTransformerArg == NULL) {
        qDebug() << "Problem creating transformer for warp options";
    }
    warpOptions->pfnTransformer = GDALReprojectionTransform;


    GDALWarpOperation operation;
    unsigned char *destination = (unsigned char *) new char[nPixels * 
nLines * warpOptions->nBandCount];

    operation.Initialize(warpOptions);
    operation.WarpRegionToBuffer(0, 0, nPixels, nLines,    destination, 
GDT_Unknown);

    GDALDestroyReprojectionTransformer(warpOptions->pTransformerArg);
    GDALDestroyWarpOptions(warpOptions);
    GDALClose(hSrcDS);
    GDALClose(hDstDS);

    image.loadFromData(destination, nPixels * nLines * 
warpOptions->nBandCount);
    ...displayimage...

Thanks,
Chris

From warmerdam at pobox.com  Tue Jan 23 20:46:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] GDALWarp Gif Problems
In-Reply-To: <45B6B1FB.1000300@newwireless.com>
References: <45B56EFC.2030108@newwireless.com> <45B5962D.2050505@pobox.com>
	<45B66385.8000701@newwireless.com> <45B66D31.6010500@pobox.com>
	<45B6B1FB.1000300@newwireless.com>
Message-ID: <45B6BA6C.9070201@pobox.com>

Chris Portka wrote:
> Thanks for all your help so far.  I can now "successfully" warp without 
> an exception occurring.  However, now when I try to actually read the 
> data it is corrupted, or entirely blank (every pixel of the output file 
> is black).  I think I'm having a problem getting  all the bands copied 
> out of the raster file.  I want every band from the source raster to be 
> copied and transformed to the destination, is there an easy way to 
> specify this?  I'm also unclear on the type for the buffer I should be 
> passing to WarpRegionToBuffer - I'm assuming an nPixels * nLines * 
> nBands unsigned char array (the source raster is a 24-bit gif or jpg, so 
> nBands gives me 3).  Here's my code (I've labeled where the band code 
> starts):

Chris,

The band selection logic seems ok.

>    GDALWarpOperation operation;
>    unsigned char *destination = (unsigned char *) new char[nPixels * 
> nLines * warpOptions->nBandCount];
> 
>    operation.Initialize(warpOptions);
>    operation.WarpRegionToBuffer(0, 0, nPixels, nLines,    destination, 
> GDT_Unknown);

You should be passing GDT_Byte for pixel values that are unsigned
bytes (ie. unsigned char).   Hopefully this fixes things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bartvde at osgis.nl  Wed Jan 24 06:31:52 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] --formats
Message-ID: <22a49d5b631c1d45f7592dcca206f1bc@145.50.39.11>

Hi list,

using gdalinfo --formats, you get a title of the driver as well as
information on whether the driver is read-only, or read-write etc.

Using ogrinfo you don't get this information, just the driver code. It would
be good to synchronize the two. Especially since there are drivers which are
write-only in OGR.

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl






From warmerdam at pobox.com  Wed Jan 24 11:24:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] --formats
In-Reply-To: <22a49d5b631c1d45f7592dcca206f1bc@145.50.39.11>
References: <22a49d5b631c1d45f7592dcca206f1bc@145.50.39.11>
Message-ID: <45B78820.7030901@pobox.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi list,
> 
> using gdalinfo --formats, you get a title of the driver as well as
> information on whether the driver is read-only, or read-write etc.
> 
> Using ogrinfo you don't get this information, just the driver code. It would
> be good to synchronize the two. Especially since there are drivers which are
> write-only in OGR.

Bart,

When I do "ogrinfo --formats" I get:

warmerda@amd64[6]% ogrinfo --formats
Supported Formats:
   -> "ESRI Shapefile" (read/write)
   -> "MapInfo File" (read/write)
   -> "UK .NTF" (readonly)
   -> "SDTS" (readonly)
   -> "TIGER" (read/write)
   -> "S57" (read/write)
   -> "DGN" (read/write)
   -> "VRT" (readonly)
   -> "AVCBin" (readonly)
   -> "REC" (readonly)
   -> "Memory" (read/write)
   -> "CSV" (read/write)
   -> "GML" (read/write)
   -> "KML" (read/write)
   -> "Interlis 1" (read/write)
   -> "Interlis 2" (read/write)
   -> "SQLite" (read/write)
   -> "PostgreSQL" (read/write)
   -> "MySQL" (read/write)

I think this was added post GDAL 1.3.2.  Was this inadequate in
some fashion?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bartvde at osgis.nl  Wed Jan 24 10:26:22 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] --formats
Message-ID: <bc379001b6a2ec1c4ec80429b06b19f7@145.50.39.11>

Ah, sometimes open source development goes faster than the software upgrade
process in an organization :-). We are still running 1.3.2 ...

Thanks Frank.

Best regards,
Bart
--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


--------- Oorspronkelijk bericht --------
Van: Frank Warmerdam <warmerdam@pobox.com>
Naar: Bart van den Eijnden OSGIS <bartvde@osgis.nl>
Cc: gdal-dev@lists.maptools.org
Onderwerp: Re: [Gdal-dev] --formats
Datum: 24/01/07 13:23

> Bart van den Eijnden (OSGIS) wrote:
> &gt; Hi list,
> &gt; 
> &gt; using gdalinfo --formats, you get a title of the driver as well as
> &gt; information on whether the driver is read-only, or read-write etc.
> &gt; 
> &gt; Using ogrinfo you don't get this information, just the driver code.
It would
> &gt; be good to synchronize the two. Especially since there are drivers
which are
> &gt; write-only in OGR.
> 
> Bart,
> 
> When I do &quot;ogrinfo --formats&quot; I get:
> 
> warmerda@amd64[6]% ogrinfo --formats
> Supported Formats:
>    -&gt; &quot;ESRI Shapefile&quot; (read/write)
>    -&gt; &quot;MapInfo File&quot; (read/write)
>    -&gt; &quot;UK .NTF&quot; (readonly)
>    -&gt; &quot;SDTS&quot; (readonly)
>    -&gt; &quot;TIGER&quot; (read/write)
>    -&gt; &quot;S57&quot; (read/write)
>    -&gt; &quot;DGN&quot; (read/write)
>    -&gt; &quot;VRT&quot; (readonly)
>    -&gt; &quot;AVCBin&quot; (readonly)
>    -&gt; &quot;REC&quot; (readonly)
>    -&gt; &quot;Memory&quot; (read/write)
>    -&gt; &quot;CSV&quot; (read/write)
>    -&gt; &quot;GML&quot; (read/write)
>    -&gt; &quot;KML&quot; (read/write)
>    -&gt; &quot;Interlis 1&quot; (read/write)
>    -&gt; &quot;Interlis 2&quot; (read/write)
>    -&gt; &quot;SQLite&quot; (read/write)
>    -&gt; &quot;PostgreSQL&quot; (read/write)
>    -&gt; &quot;MySQL&quot; (read/write)
> 
> I think this was added post GDAL 1.3.2.  Was this inadequate in
> some fashion?
> 
> Best regards,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> 
> 




From mitchelljj98 at gmail.com  Wed Jan 24 10:46:32 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_rasterize for World Vector Shoreline (WVS) data
In-Reply-To: <45B69CDA.2080500@pobox.com>
References: <fa2ac0580701231503n4d91b735n44ca60257bd8f933@mail.gmail.com>
	<45B69CDA.2080500@pobox.com>
Message-ID: <fa2ac0580701240746g60ba1d7bsb5ad72335d0ccc0b@mail.gmail.com>

Frank,

I created a blank file to work in with gdal_translate from an existing file:

gdal_translate -scale 0 100 0 0.01 -a_ullr -180 90 180 -90 -a_srs EPSG:4326
source.tif blank.tif

running gdalinfo I get:

Driver: GTiff/GeoTIFF
Size is 10000, 10000
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,90.000000000000000)
Pixel Size = (0.036000000000000,-0.018000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows
  TIFFTAG_DATETIME=2005:12:29 11:49:37
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

I then run:

gdal_rasterize -b 1 -b 2 -b 3 -burn 0 -burn 0 -burn 255 -l WVSPLUS_polyline
WVSPLUS_polyline.shp blank.tif

gdal_rasterize successfully processes, but when I look at the blank.tif file
within openEV_FW it still appears to be blank when I was expecting blue to
appears for the shoreline in fact if I put blank.tif on top of the
WVSPLUS_polyline.shp layer within openEV_FW it completely covers it up.

John

On 1/23/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> John Mitchell wrote:
> > Hi,
> >
> > I would like to try gdal_rasterize to convert World Vector Shoreline
> > (WVS) data into raster data.  I am hoping that this will speed up
> > performance when viewing this data within MapServer.  In the
> > documentation is says "Currently gdal_rasterize cannot create new output
> > files though that may be added eventually".  I don't want to merge WVS
> > with an existing raster layer, but have its own layer.  How can I create
> > a blank geotiff that I can use as output for this rasterized WVS data?
>
> John,
>
> This may seem odd, but I've often created a blank file to work in
> with gdal_translate from some existing file.  I use "-scale 0 100 0 0.01"
> to essentially force all the pixels to zero and switches like -a_ullr
> and -a_srs to set the bounds and coordinate system.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070124/3354a257/attachment.html
From bryan at geomega.com  Wed Jan 24 10:47:40 2007
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] --formats
In-Reply-To: <45B78820.7030901@pobox.com>
References: <22a49d5b631c1d45f7592dcca206f1bc@145.50.39.11>
	<45B78820.7030901@pobox.com>
Message-ID: <45B77F9C.5090602@geomega.com>

On the subject of formats, I find it useful to use, for example:

gdalinfo --format gtiff

to get the -co options.  Is there an equivalent with ogrinfo?  Like 
Bart, I'm also still running 1.3.2

Bryan


Frank Warmerdam wrote:
> Bart van den Eijnden (OSGIS) wrote:
>> Hi list,
>>
>> using gdalinfo --formats, you get a title of the driver as well as
>> information on whether the driver is read-only, or read-write etc.
>>
>> Using ogrinfo you don't get this information, just the driver code. It would
>> be good to synchronize the two. Especially since there are drivers which are
>> write-only in OGR.
> 
> Bart,
> 
> When I do "ogrinfo --formats" I get:
> 
> warmerda@amd64[6]% ogrinfo --formats
> Supported Formats:
>    -> "ESRI Shapefile" (read/write)
>    -> "MapInfo File" (read/write)
>    -> "UK .NTF" (readonly)
>    -> "SDTS" (readonly)
>    -> "TIGER" (read/write)
>    -> "S57" (read/write)
>    -> "DGN" (read/write)
>    -> "VRT" (readonly)
>    -> "AVCBin" (readonly)
>    -> "REC" (readonly)
>    -> "Memory" (read/write)
>    -> "CSV" (read/write)
>    -> "GML" (read/write)
>    -> "KML" (read/write)
>    -> "Interlis 1" (read/write)
>    -> "Interlis 2" (read/write)
>    -> "SQLite" (read/write)
>    -> "PostgreSQL" (read/write)
>    -> "MySQL" (read/write)
> 
> I think this was added post GDAL 1.3.2.  Was this inadequate in
> some fashion?
> 



From warmerdam at pobox.com  Wed Jan 24 12:01:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] --formats
In-Reply-To: <45B77F9C.5090602@geomega.com>
References: <22a49d5b631c1d45f7592dcca206f1bc@145.50.39.11>
	<45B78820.7030901@pobox.com> <45B77F9C.5090602@geomega.com>
Message-ID: <45B790D6.7080309@pobox.com>

Bryan Keith wrote:
> On the subject of formats, I find it useful to use, for example:
> 
> gdalinfo --format gtiff
> 
> to get the -co options.  Is there an equivalent with ogrinfo?  Like 
> Bart, I'm also still running 1.3.2

Bryan,

No, there is no equivelent for OGR.  Unfortunately the OGR driver model
is somewhat different and generally less sophisticated than GDAL.  I hope
one day to do a "grand unification" of GDAL and OGR to a common driver and
metadata model but it is unclear if or when that will happen.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jan 24 12:09:21 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] gdal_rasterize for World Vector Shoreline (WVS) data
In-Reply-To: <fa2ac0580701240746g60ba1d7bsb5ad72335d0ccc0b@mail.gmail.com>
References: <fa2ac0580701231503n4d91b735n44ca60257bd8f933@mail.gmail.com>
	<45B69CDA.2080500@pobox.com>
	<fa2ac0580701240746g60ba1d7bsb5ad72335d0ccc0b@mail.gmail.com>
Message-ID: <45B792C1.6070603@pobox.com>

John Mitchell wrote:
> I then run:
> 
> gdal_rasterize -b 1 -b 2 -b 3 -burn 0 -burn 0 -burn 255 -l 
> WVSPLUS_polyline WVSPLUS_polyline.shp blank.tif
> 
> gdal_rasterize successfully processes, but when I look at the blank.tif 
> file within openEV_FW it still appears to be blank when I was expecting 
> blue to appears for the shoreline in fact if I put blank.tif on top of 
> the WVSPLUS_polyline.shp layer within openEV_FW it completely covers it up.

John,

If you can provide me with the shapefile, I could try and reproduce
this problem here and see what is going on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From xi at tamu.edu  Wed Jan 24 12:33:41 2007
From: xi at tamu.edu (Weimin Xi)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: LANDISVIEW: A Free Visualization & Analytical Tool
	Using GDAL
Message-ID: <45B79875.4090206@tamu.edu>

Dear list,

I am very pleased to announce that LANDISVIEW Beta 1.0 (with a User 
Guide) is now available for you to free download at our website:

http://kelab.tamu.edu/standard/restoration/restoration_tools.htm

*LANDISVIEW* is a tool, developed at the  Knowledge Engineering 
Laboratory at Texas A&M University, to visualize and animate 
8-bit/16-bit ERDAS GIS format. It can also convert 8-bit/16-bit ERDAS 
GIS format maps into ASCII and batch files.

LANDISVIEW* provides two major functions:

1) File Viewer: Files can be viewed sequentially and an output can be 
generated as a movie file or as an image file.
2) File converter: It will convert the loaded  files for compatibility 
with 3^rd  party software, such as Fragstats.

Some available features of *LANDISVIEW* include: 1) Display cell 
coordinates and values.
2) Apply user-defined color palette to visualize files.
3) Save maps as pictures and animations as video files (*.avi).
4) Convert ERDAS files into ASCII grids for compatibility with 
Fragstats, a widely used spatial analysis tool.

Please feel free to check it out. We plan to continue to improve 
LANDISVIEW based on your feedback. We look forward to learning your 
thoughts about it.
Please email me (xi@tamu.edu) with your comments and suggestions (or any 
bugs you find)! Thank you.

Cheers,
Weimin Xi, Ph.D.
Texas A&M U.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070124/5ea3362b/attachment.html
From mhanson at photon.com  Wed Jan 24 12:37:29 2007
From: mhanson at photon.com (Matt Hanson)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Copying over ProjectionRef as Subset
Message-ID: <0719BE42F22E0A46857DF72644EC5D70278722@pj-exchange.photon.com>

Hi,   I've read through the Warp API tutorial and am having trouble on how to it apply it to my problem.
 
I'm taking a subset of an image, and writing it to a VRT file, before it gets processed by some future algorithm.    I'm copying the rest of the metadata, but need to now change the ProjectionRef string to match the new coordinates.   
 
Is this something that is going to be driver dependent?


From warmerdam at pobox.com  Wed Jan 24 14:12:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Copying over ProjectionRef as Subset
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278722@pj-exchange.photon.com>
References: <0719BE42F22E0A46857DF72644EC5D70278722@pj-exchange.photon.com>
Message-ID: <45B7AF96.3060807@pobox.com>

Matt Hanson wrote:
> Hi,   I've read through the Warp API tutorial and am having trouble on how
> to it apply it to my problem.
> 
> I'm taking a subset of an image, and writing it to a VRT file, before it
> gets processed by some future algorithm.    I'm copying the rest of the
> metadata, but need to now change the ProjectionRef string to match the new
> coordinates.
> 
> Is this something that is going to be driver dependent?

Matt,

I don't see this as being driver dependent.

To recap you are wanting to produce a "warped vrt" that represents
a reprojected view of a subarea of an original image.  Is that right?

This can be accomplished with gdalwarp using a command like:

   gdalwarp -of VRT in.tif out.vrt -t_srs WGS84 -te -117 33 -116 34

If you are trying to manually create the .vrt then looking at the output
of a command like the above should be educational.  If you want to see how
to create the VRT programmatically then looking at the gdalwarp code
should be useful.

Note that the warp api tutorial doesn't touch on some specific issues
with producing warped vrts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Jan 24 16:31:08 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Motion: Adding the SWIG generated files to the SVN
	repository
In-Reply-To: <45B695C3.3010204@pobox.com>
References: <f3b73b7d0701230531h56be5860r3bb1c786ffeb6159@mail.gmail.com>
	<45B643B8.60103@pobox.com>
	<f3b73b7d0701231336i7958ae33r2e37e46c13ccefc2@mail.gmail.com>
	<45B695C3.3010204@pobox.com>
Message-ID: <f3b73b7d0701241331w45737696l4d5d8e671b234dd4@mail.gmail.com>

Hi Folks,

As reading back of this thread, it turns out that the best compromise
is adding a post update step to the mkgdaldist.sh so as to complete
the the created snapshot with the SWIG generated files for the csharp
binding. This is the solution that I favour most of all.

In this regard Mateusz has taken over the task of installing SWIG
1.3.29 to the corresponding server and modifying mkgdaldist.sh
accordingly.These changes will not affect the other bindings at this
phase. However if the maintainer of some other binding would want to
follow this concept, the desired steps can possibly added at any time.

Currently, as I can see, the java binding suffers from similar
problems since high number of the files are generated. Although the
files have already been added to the SVN, those are slightly outdated
and some of them are in a wrong place.

Anyway, I appreciate the efforts of everyone who has helped me out
with the consideration and implementation :-)

Best Regards,

Tamas

From Doug_Newcomb at fws.gov  Wed Jan 24 17:01:13 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Copying over ProjectionRef as Subset
In-Reply-To: <0719BE42F22E0A46857DF72644EC5D70278722@pj-exchange.photon.com>
Message-ID: <OFCD30E35D.5E6523A3-ON8525726D.0078B426-8525726D.0078F662@fws.gov>

Hi folks,
      Anyone having any luck compiling the ecw sdk 3.3  on debian etch
AMD64?

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


From tutey at o2.pl  Wed Jan 24 17:32:41 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:36 2007
Subject: [Gdal-dev] Re: [GRASS-dev] gdal-grass plugin fails during
 ./configure with GRASS 6.3 CVS [SOLVED]
In-Reply-To: <Pine.LNX.4.62.0701012120550.9578@agrippa.ukshells.co.uk>
References: <459944C2.70201@o2.pl>
	<Pine.LNX.4.62.0701011751380.27777@agrippa.ukshells.co.uk>
	<459953FE.4000801@o2.pl>
	<Pine.LNX.4.62.0701012120550.9578@agrippa.ukshells.co.uk>
Message-ID: <45B7DE89.4030208@o2.pl>

Hi,

For thread completeness:

The reason for gdal-grass 1.3.2 failing at ./configure was two
instances of GEOS installed. After removing one conflicting instalation
the configure and build went smooth.

More details:

http://www.nabble.com/Re%3A--Gdal-dev--GDAL-OGR-1.4.0-Released-tf3027971.html#a8412512

Thanks to Paul and Markus for help!

Maciek

From warmerdam at pobox.com  Wed Jan 24 18:54:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Copying over ProjectionRef as Subset
In-Reply-To: <OFCD30E35D.5E6523A3-ON8525726D.0078B426-8525726D.0078F662@fws.gov>
References: <OFCD30E35D.5E6523A3-ON8525726D.0078B426-8525726D.0078F662@fws.gov>
Message-ID: <45B7F1C4.6000401@pobox.com>

Doug_Newcomb@fws.gov wrote:
> Hi folks,
>       Anyone having any luck compiling the ecw sdk 3.3  on debian etch
> AMD64?

Doug,

I've built and been using it with reasonable success on an AMD64 X2
Ubuntu system.  I don't recall running into any build problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From trale at centrum.cz  Wed Jan 24 21:00:19 2007
From: trale at centrum.cz (trale@centrum.cz)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Arc-second units?
Message-ID: <200701250300.4914@centrum.cz>

Hello,

It would appear that GDAL14 does not understand arc-second units. ?I created
an elevation file (GeoTIFF) using Global Mapper. ?When I look at it with
gdalinfo I get:

Driver: GTiff/GeoTIFF
Size is 777, 657
Coordinate System is:
GEOGCS["WGS 84",
 ? ?DATUM["WGS_1984",
 ? ? ? ?SPHEROID["WGS 84",6378137,298.2572235630016,
 ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
 ? ? ? ?AUTHORITY["EPSG","6326"]],
 ? ?PRIMEM["Greenwich",0],
 ? ?UNIT[,0.0174532925199433],
 ? ?AUTHORITY["EPSG","4326"]]
Origin = (-399424.610220731760000,116211.336444500940000)
Pixel Size = (0.647917999999991,-0.647917999999996)
Metadata:
 ?AREA_OR_POINT=Point
Corner Coordinates:
Upper Left ?( -399424.610, ?116211.336)
(399424d36'36.79"W,116211d20'11.20"N)
Lower Left ?( -399424.610, ?115785.654)
(399424d36'36.79"W,115785d39'15.55"N)
Upper Right ( -398921.178, ?116211.336)
(398921d10'40.57"W,116211d20'11.20"N)
Lower Right ( -398921.178, ?115785.654)
(398921d10'40.57"W,115785d39'15.55"N)
Center ? ? ?( -399172.894, ?115998.495)
(399172d53'38.68"W,115998d29'43.37"N)
Band 1 Block=777x1 Type=Float32, ColorInterp=Gray

<!--
D(["mb","The UNIT is empty, but it clearly thinks the unit is DEGREES as the corner<br />coordinates are obviously completely wrong.<br /><br />When looking at the same file with a different reader (a GeoTIFF tag<br />reader), the information returned is:<br /><br />Elevation file:<br />Geotiff_Information:<br /> &amp;nbsp; &amp;nbsp;Version: 1<br /> &amp;nbsp; &amp;nbsp;Key_Revision: 1.0<br /> &amp;nbsp; &amp;nbsp;Tagged_Information:<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; ModelTiepointTag (2,3):<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;-399424.61 &amp;nbsp; &amp;nbsp; &amp;nbsp; 116211.336 &amp;nbsp; &amp;nbsp; &amp;nbsp; 0<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; ModelPixelScaleTag (1,3):<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.647918 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.647918 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 1<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; End_Of_Tags.<br /> &amp;nbsp; &amp;nbsp;Keyed_Information:<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; GTModelTypeGeoKey (Short,1): ModelTypeGeographic<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; GTRasterTypeGeoKey (Short,1): RasterPixelIsPoint<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; GeographicTypeGeoKey (Short,1): GCS_WGS_84<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; GeogAngularUnitsGeoKey (Short,1): Angular_Arc_Second<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; VerticalUnitsGeoKey (Short,1): Unknown-9001<br /> &amp;nbsp; &amp;nbsp; &amp;nbsp; End_Of_Keys.<br /> &amp;nbsp; &amp;nbsp;End_Of_Geotiff.<br /><br />The units are clearly set to Angular_Arc_Second. &amp;nbsp;If the coordinates above<br />are interpreted as arc-seconds then the corner coordinates are correct.<br /><br />First, am I understanding things correctly, and is my interpretation that<br />GDAL14 is not handling this correc
tly, correct? &amp;nbsp;Or am I missing something?<br />I\'m new to GDAL and certainly could easily be overlooking something very<br />basic.<br /><br />If GDAL does in fact not handle this type of coordinate correctly, can<br />someone point me to where in the sources I would need to make a patch? &amp;nbsp;I\'m<br />more than willing to go in and extend things as necessary.<br /><br />Thanks in advance,<br /></div>",1]
);

//-->The UNIT is empty, but it clearly thinks the unit is DEGREES as the corner
coordinates are obviously completely wrong.

When looking at the same file with a different reader (a GeoTIFF tag
reader), the information returned is:

Elevation file:
Geotiff_Information:
 ? ?Version: 1
 ? ?Key_Revision: 1.0
 ? ?Tagged_Information:
 ? ? ? ModelTiepointTag (2,3):
 ? ? ? ? ?0 ? ? ? ? ? ? ? ?0 ? ? ? ? ? ? ? ?0
 ? ? ? ? ?-399424.61 ? ? ? 116211.336 ? ? ? 0
 ? ? ? ModelPixelScaleTag (1,3):
 ? ? ? ? ?0.647918 ? ? ? ? 0.647918 ? ? ? ? 1
 ? ? ? End_Of_Tags.
 ? ?Keyed_Information:
 ? ? ? GTModelTypeGeoKey (Short,1): ModelTypeGeographic
 ? ? ? GTRasterTypeGeoKey (Short,1): RasterPixelIsPoint
 ? ? ? GeographicTypeGeoKey (Short,1): GCS_WGS_84
 ? ? ? GeogAngularUnitsGeoKey (Short,1): Angular_Arc_Second
 ? ? ? VerticalUnitsGeoKey (Short,1): Unknown-9001
 ? ? ? End_Of_Keys.
 ? ?End_Of_Geotiff.

The units are clearly set to Angular_Arc_Second. ?If the coordinates above
are interpreted as arc-seconds then the corner coordinates are correct.

First, am I understanding things correctly, and is my interpretation that
GDAL14 is not handling this correctly, correct? ?Or am I missing something?
I'm new to GDAL and certainly could easily be overlooking something very
basic.

If GDAL does in fact not handle this type of coordinate correctly, can
someone point me to where in the sources I would need to make a patch? ?I'm
more than willing to go in and extend things as necessary.

Thanks in advance,

Nick


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070125/f7b0aa01/attachment.html
From warmerdam at pobox.com  Wed Jan 24 23:06:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Arc-second units?
In-Reply-To: <200701250300.4914@centrum.cz>
References: <200701250300.4914@centrum.cz>
Message-ID: <45B82CDA.1050207@pobox.com>

trale@centrum.cz wrote:
> Hello,
> 
> It would appear that GDAL14 does not understand arc-second units.  I created
> an elevation file (GeoTIFF) using Global Mapper.  When I look at it with
> gdalinfo I get:
...
> The units are clearly set to Angular_Arc_Second.  If the coordinates above
> are interpreted as arc-seconds then the corner coordinates are correct.
> 
> First, am I understanding things correctly, and is my interpretation that
> GDAL14 is not handling this correctly, correct?  Or am I missing something?
> I'm new to GDAL and certainly could easily be overlooking something very
> basic.
> 
> If GDAL does in fact not handle this type of coordinate correctly, can
> someone point me to where in the sources I would need to make a patch?  I'm
> more than willing to go in and extend things as necessary.

Nick,

Your analysis is correct.  GDAL assumes all geographic coordinate systems
are using degrees as a unit and ignores any indication otherwise in the
WKT.  There may also be an issue that the GDAL GeoTIFF driver isn't
handling the tags properly.  This seems to be suggested by the lack of a
unit name and the fact that the degree to radian ratio is in the Units
field.

My usual approach to handling arc-seconds in the few cases they come up
has (in the ESRI .prj file handler I think) been to transform the values
into degrees before returning the values from the driver.

A more proper approach would be to get serious about angular units
handling through GDAL and GDAL based applications ... but that seems
like a lot to ask for very little real value.

So, if you want to hack on the GeoTIFF driver, then you would need to
hack around in gdal/frmts/gtiff/geotiff.cpp.  Likely you would want
to address it after the comment "Get the transform or gcps from the GeoTIFF
file".

Alternatively you could file it is a bug with an attached smallish
example file and the GDAL team might at some point get around to addressing
it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Wed Jan 24 22:25:09 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ogr2ogr
Message-ID: <3054411AF4728548AD6D7137190D56B30C45B5@admin1.aeromap.com>

Frank,
I'm debuging ogr2ogr and have couple questions about program structure.

1. Should --config "GDAL_DATA" be applyed in ogr2ogr command? If so I dont see
args handling --config in ogr2ogr.cpp. How this variable gets into the code?
2. What the story with OGR_DRIVER_PATH, GDAL_DRIVER_PATH in OGRSFDriverREgistrar::AutoLoadDrivers()?
Should I set it up at run time?

Thanks,
gennady


From mateusz at loskot.net  Thu Jan 25 06:40:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45B5@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45B5@admin1.aeromap.com>
Message-ID: <45B89734.2030504@loskot.net>

Gennady Khokhorin wrote:
> Frank,
> I'm debuging ogr2ogr and have couple questions about program structure.
> 
> 1. Should --config "GDAL_DATA" be applyed in ogr2ogr command? If so I dont see
> args handling --config in ogr2ogr.cpp. How this variable gets into the code?
>
> 2. What the story with OGR_DRIVER_PATH, GDAL_DRIVER_PATH
> in OGRSFDriverREgistrar::AutoLoadDrivers()?
> Should I set it up at run time?


Gennady,

Generally, AFAIK all these options in GDAL/OGR can be set as:
- environment variable
- from command line using common --config option

Options passed with --config override those currently set as environment
variable.

All the set/get magic is implemented in CPLGetConfigOption() and
CPLSetConfigOption(). The CPLSetConfigOption() sets options on GDAL's
stack - not as environment variables.
The CPLGetConfigOption() behaves a bit differently because it tries to
read an option from GDAL's private collection and if it fails,
it tries to find given option in environment variables.

In OGR utilities, the --config option is processed by
OGRGeneralCmdLineProcessor() function defined in ogr/ogrutils.cpp.
As you can see, it's called from ogrinfo.cpp and ogr2ogr.cpp utilities.

User can use it passing option key and value as follows:

ogrinfo --config CPL_DEBUG ON ~/data/test/point.shp

In this example, if I have CPL_DEBUG=OFF set in my environment, I can
easily override it, switching OGR debug messages printing on,
using --config option as presented above.

Hope it helps.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Jan 25 08:22:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45B5@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45B5@admin1.aeromap.com>
Message-ID: <45B8AEFC.3080901@pobox.com>

Gennady Khokhorin wrote:
> Frank,
> I'm debuging ogr2ogr and have couple questions about program structure.
> 
> 1. Should --config "GDAL_DATA" be applyed in ogr2ogr command? If so I dont see
> args handling --config in ogr2ogr.cpp. How this variable gets into the code?
> 2. What the story with OGR_DRIVER_PATH, GDAL_DRIVER_PATH in OGRSFDriverREgistrar::AutoLoadDrivers()?
> Should I set it up at run time?

Gennady,

I see Mateusz has covered off config variables in some detail.

Normally you should not need OGR_DRIVER_PATH and GDAL_DRIVER_PATH.  They
are really for the special circumstance where some drivers are being
handled as plugins.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Doug_Newcomb at fws.gov  Thu Jan 25 10:14:31 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ECW on Debain Etch AMD64 solution 
In-Reply-To: <45B7F1C4.6000401@pobox.com>
Message-ID: <OF436273AD.9A004EAB-ON8525726E.004DDA0A-8525726E.0053BA08@fws.gov>

Frank,

      I had earlier success on a 32 bit etch machine, before the merge of
the gcc 4.1 compiler.  This was a fresh install last week on a Intel Core
Duo 2 box.

      Originally, I had installed the FWtools-1.1.3 32 bit binary package
on the Debian etch box and it did a great job converting several Gigabytes
of SID files to Imagine format.

      However, when I went to chop out quarter quad sized tiffs from the
imagine files and convert them to ecw format, I would get the following
message:
Input file size is 6427, 7587
0...10...20...30...40...50...60...70...80...90...libgcc_s.so.1 must be
installed for pthread_cancel to work

      It did generate ecw files, which had the interesting side effect of
crashing ArcGIS 9.1 when trying to view the files.  I did try fiddling with
the LD_LIBRARY_PATH a bit, but I figured that I was planning on compiling
gdal natively anyway :-).  So I went ahead and started the process of
compiling gdal and ecw from source, using the 3.3-RC2(?) ecw SDK source.


This is where I ran into the make problems with the ecw SDK ( Please pardon
the error text mangling, somehow the text got mangled transferring between
platforms)

/home/dnewcomb/gissoft/libecwj2-3.3/Source/include/NCSJPCBuffer.h:178:
error: extra qualification $(B!F(BCNCSJPCBuffer::$(B!G(B on member $(B!F
(BCNCSJPCBuffer$(B!G(B
/home/dnewcomb/gissoft/libecwj2-3.3/Source/include/NCSJPCBuffer.h:191:
error: extra qualification $(B!F(BCNCSJPCBuffer::$(B!G(B on member $(B!F
(Boperator=$(B!G(B


Since this seemed to be the same problem described in
http://lists.maptools.org/pipermail/gdal-dev/2006-October/010244.html , (
Many thanks! ) I followed Mr. Johnson's guidance to alter the ecw SDK
source in the following ways:

to change Line 178 in NCSJPCBuffer.h to:
      CNCSJPCBuffer( const class CNCSJPCBuffer& src );
to change Line 191 in NCSJPCBuffer.h to:
      class CNCSJPCBuffer& operator=( const class CNCSJPCBuffer& src );

to change Line 101 in NCSJPCMarker.h to:
      void operator=( const class CNCSJPCMarker& src );

to change Line84 in NCSJPCPLTMarker.h to:
      void operator=( const class CNCSJPCPLTMarker& src );


These changes allowed the ecw sdk toolkit to compile  and the native
compiled gdal with the ecw libraries seems to be merrily chugging away as I
type, generating  ecw files that no longer slay the ArcGIS 9.1 client.
One of these days, I'm going to have to learn C.

Sorry for this digression from mainline gdal development.

Doug



Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             Frank Warmerdam                                               
             <warmerdam@pobox.                                             
             com>                                                       To 
             Sent by:                  Doug_Newcomb@fws.gov                
             gdal-dev-bounces@                                          cc 
             lists.maptools.or         gdal-dev@lists.maptools.org         
             g                                                     Subject 
                                       Re: [Gdal-dev] Copying over         
                                       ProjectionRef as Subset             
             01/24/2007 06:54                                              
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




Doug_Newcomb@fws.gov wrote:
> Hi folks,
>       Anyone having any luck compiling the ecw sdk 3.3  on debian etch
> AMD64?

Doug,

I've built and been using it with reasonable success on an AMD64 X2
Ubuntu system.  I don't recall running into any build problems.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev




From warmerdam at pobox.com  Thu Jan 25 10:52:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Re: ECW on Debain Etch AMD64 solution
In-Reply-To: <OF436273AD.9A004EAB-ON8525726E.004DDA0A-8525726E.0053BA08@fws.gov>
References: <OF436273AD.9A004EAB-ON8525726E.004DDA0A-8525726E.0053BA08@fws.gov>
Message-ID: <45B8D22B.8030807@pobox.com>

Doug_Newcomb@fws.gov wrote:
> Frank,
> 
>       I had earlier success on a 32 bit etch machine, before the merge of
> the gcc 4.1 compiler.  This was a fresh install last week on a Intel Core
> Duo 2 box.
> 
>       Originally, I had installed the FWtools-1.1.3 32 bit binary package
> on the Debian etch box and it did a great job converting several Gigabytes
> of SID files to Imagine format.
> 
>       However, when I went to chop out quarter quad sized tiffs from the
> imagine files and convert them to ecw format, I would get the following
> message:
> Input file size is 6427, 7587
> 0...10...20...30...40...50...60...70...80...90...libgcc_s.so.1 must be
> installed for pthread_cancel to work

Doug,

I'm pleased you were successful.  The above problem with FWTools happens to
me too sometimes.  I don't quite understand the issue ... some sort of
subtle pthreads/clib versioning issue I suspect.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jean-claude.repetto at worldonline.fr  Thu Jan 25 11:42:40 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ECW on Debain Etch AMD64 solution
In-Reply-To: <OF436273AD.9A004EAB-ON8525726E.004DDA0A-8525726E.0053BA08@fws.gov>
References: <OF436273AD.9A004EAB-ON8525726E.004DDA0A-8525726E.0053BA08@fws.gov>
Message-ID: <45B8DE00.4010506@worldonline.fr>

Doug_Newcomb@fws.gov a ?crit :
 So I went ahead and started the process of
> compiling gdal and ecw from source, using the 3.3-RC2(?) ecw SDK source.
> 

Hi Doug,

Why don't you use the final 3.3 release ? It is available since last
summer, and I had no problem to compile it on Gentoo Linux for AMD64,
with GCC 4.1.

Jean-Claude



From Doug_Newcomb at fws.gov  Thu Jan 25 11:52:49 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ECW on Debian Etch AMD64 solution
In-Reply-To: <45B8DE00.4010506@worldonline.fr>
Message-ID: <OFBCE9E33D.6FF557CA-ON8525726E.005C297C-8525726E.005CB9DC@fws.gov>

Jean,

      I had tried both , had similar problems compiling both ( at least
that's what I remember from yesterday).   I'll go back and double check
Monday, I don't want to interrupt the processing right now.  There are
drawbacks to caffine-free days.


Doug


Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             Jean-Claude                                                   
             Repetto                                                       
             <jean-claude.repe                                          To 
             tto@worldonline.f         Doug_Newcomb@fws.gov                
             r>                                                         cc 
                                       gdal-dev@lists.maptools.org         
             01/25/2007 11:42                                      Subject 
             AM                        Re: [Gdal-dev] ECW on Debain Etch   
                                       AMD64 solution                      
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




Doug_Newcomb@fws.gov a ?crit :
 So I went ahead and started the process of
> compiling gdal and ecw from source, using the 3.3-RC2(?) ecw SDK source.
>

Hi Doug,

Why don't you use the final 3.3 release ? It is available since last
summer, and I had no problem to compile it on Gentoo Linux for AMD64,
with GCC 4.1.

Jean-Claude






From Doug_Newcomb at fws.gov  Thu Jan 25 12:53:44 2007
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] ECW on Debain Etch AMD64 solution
Message-ID: <OFF1EC2971.9863BBCB-ON8725726E.00624DC1-8725726E.00624DCC@fws.gov>


Jean-Claude,
It turns out that I had mislabeled a download.  What I thought was the
final, was a build earlier than the RC2.  My comments referred to the RC2
code.


I cannot find the source of the 3.3 final on the Ermapper website, just the
RC2 and 3.3 binary SDK for windows.  Where might the final source for the
3.3 sdk reside?

Doug


Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null

-----gdal-dev-bounces@lists.maptools.org wrote: -----

To: Doug_Newcomb@fws.gov
From: Jean-Claude Repetto <jean-claude.repetto@worldonline.fr>
Sent by: gdal-dev-bounces@lists.maptools.org
Date: 01/25/2007 11:42AM
cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ECW on Debain Etch AMD64 solution

Doug_Newcomb@fws.gov a ?crit :
 So I went ahead and started the process of
> compiling gdal and ecw from source, using the 3.3-RC2(?) ecw SDK source.
>

Hi Doug,

Why don't you use the final 3.3 release ? It is available since last
summer, and I had no problem to compile it on Gentoo Linux for AMD64,
with GCC 4.1.

Jean-Claude


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From ealpert at digitalglobe.com  Thu Jan 25 14:50:11 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] perldocs not being built and installed with 1.4.0?
References: <OFF1EC2971.9863BBCB-ON8725726E.00624DC1-8725726E.00624DCC@fws.gov>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA357A@COMAIL01.digitalglobe.com>


I'm not seeing anything in the Makefile that converts the .dox docs into
perldoc pods. The .dox files are being installed instead of .pod files
into the perl directory structure.

Is this a configuration problem on my side or a build bug?

-e


From ILucena at clarku.edu  Thu Jan 25 15:33:50 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] RFC 4: Geolocation Arrays
Message-ID: <6FD7C9DB26540B42A1207C69BF92D4550274F307@Iris.ad.clarku.edu>

Hi there,

 

If I understand correctly RFC 4, you can use the Geolocation bands to
warp the image bands when they exists in the same input file (in a
HDF-EOS Swath for example).

 

This is possible only because the AVHRR, Envisat, HDF and netCDF drivers
have add to the Metadata the fields: "GEOLOCATION", "PIXEL_OFFSET",
"LINE_OFFSET", "PIXEL_STEP", "LINE_STEP", "X_BAND", "Y_BAND".

 

But I have someone here with lots of similar kind of information but in
separated Envi file and he want to do the same process... :-)

 

For each par of files there is one with a bunch of hyperspectral bands
and the other with just two bands with Latitude and Longitude.

 

The question is: If one invests time developing a python script to
gather those bands in a HDF4 and set the appropriate metadata is
gdalwarp going to work? I mean, the metadata will stick to the file and
will be interpreted by gdalwarp accordantly? 

 

Does anybody have done something like that before?

 

Any thoughts are well come,

 

Thanks,

 

Ivan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070125/34313f7d/attachment.html
From warmerdam at pobox.com  Thu Jan 25 20:37:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] RFC 4: Geolocation Arrays
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D4550274F307@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D4550274F307@Iris.ad.clarku.edu>
Message-ID: <45B95B74.2020004@pobox.com>

Ivan Lucena wrote:
> Hi there,
> 
> If I understand correctly RFC 4, you can use the Geolocation bands to 
> warp the image bands when they exists in the same input file (in a 
> HDF-EOS Swath for example).
> 
> This is possible only because the AVHRR, Envisat, HDF and netCDF drivers 
> have add to the Metadata the fields: ?GEOLOCATION?, "PIXEL_OFFSET", 
> "LINE_OFFSET", "PIXEL_STEP", "LINE_STEP", "X_BAND", "Y_BAND".

Ivan,

I have some good news.  Per RFC 4 you can also have X_DATASET and
Y_DATASET metadata pointing to another file for the X and Y bands.

   http://www.gdal.org/rfc4_geolocate.html

So you don't really need to reassemble things into an HDF file or
something similar.

> But I have someone here with lots of similar kind of information but in 
> separated Envi file and he want to do the same process... :-)
> 
> For each par of files there is one with a bunch of hyperspectral bands 
> and the other with just two bands with Latitude and Longitude.
> 
> The question is: If one invests time developing a python script to 
> gather those bands in a HDF4 and set the appropriate metadata is 
> gdalwarp going to work? I mean, the metadata will stick to the file and 
> will be interpreted by gdalwarp accordantly?

Unfortunately, I also have some bad news.  The gdalwarp support for
geolocation arrays does not really work.  It is basically partially
implemented but I gave up on it because I could see how to make it work
without quite a bit more work.  So, you cannot use geolocation arrays
with gdalwarp currently.

If I could get this implemented I would finalize RFC 4 and try to get it
passed, but currently I'm stymied.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From funfacts2001 at yahoo.com  Thu Jan 25 20:03:37 2007
From: funfacts2001 at yahoo.com (Steve Schneider)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] osgDEM, GDAL and defenestration
Message-ID: <674211.23695.qm@web31703.mail.mud.yahoo.com>

I'm pulling my hair out trying to get osgdem or gdal or rudolf the red nosed reindeer to successfully add a texture into something that looks like dirt.  I'm not a 3D programmer or a GIS spatial type - so if I use the wrong technical terms in the wrong place it's not because I'm trying to look smarter than I am, it's because I'm dumber than I look.
   
  I can create a very cool looking (and thanks to all who have gone before me to make it work) terrain mesh in OSG.  But the ONLY texture file that seems to work is the geoTIFF DEM file itself.  Can someone _please_ outline a process - command line options or utility programs or whatever - to combine the two files into a terrain mesh that looks like dirt.  Please use small words - to borrow a phrase - I'm a bear of very tiny brain.
   
  What follows is the technical mumbo-jumbo of the two files in question:
   
  C:\Source\Map\GDAL\FWTools1.1.3\bin>gdalinfo C:\Source\Map\SmallSalem.tif
Driver: GTiff/GeoTIFF
Size is 743, 629
Coordinate System is:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.2572221010002,
            AUTHORITY["EPSG","7019"]],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4269"]]
Origin = (-123.097222000000000,44.967592600000003)
Pixel Size = (0.000092592592600,-0.000092592592600)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.11 $ $Date$
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (-123.0972220,  44.9675926) (123d 5'50.00"W, 44d58'3.33"N)
Lower Left  (-123.0972220,  44.9093519) (123d 5'50.00"W, 44d54'33.67"N)
Upper Right (-123.0284257,  44.9675926) (123d 1'42.33"W, 44d58'3.33"N)
Lower Right (-123.0284257,  44.9093519) (123d 1'42.33"W, 44d54'33.67"N)
Center      (-123.0628239,  44.9384722) (123d 3'46.17"W, 44d56'18.50"N)
Band 1 Block=743x2 Type=Float32, ColorInterp=Gray
   
  C:\Source\Map\GDAL\FWTools1.1.3\bin>gdalinfo C:\Source\Map\SmallSat.png
Driver: PNG/Portable Network Graphics
Size is 34, 39
Coordinate System is `'
Metadata:
  Creation_Time=01/25/07
  Software=Macromedia Fireworks 8
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   39.0)
Upper Right (   34.0,    0.0)
Lower Right (   34.0,   39.0)
Center      (   17.0,   19.5)
Band 1 Block=34x1 Type=Byte, ColorInterp=Red
Band 2 Block=34x1 Type=Byte, ColorInterp=Green
Band 3 Block=34x1 Type=Byte, ColorInterp=Blue
Band 4 Block=34x1 Type=Byte, ColorInterp=Alpha
  C:\Source\Map\GDAL\FWTools1.1.3\bin>pause
   
  
Main Entry: de?fen?es?tra?tion 
Pronunciation: (")dE-"fe-n&-'strA-sh&n
Function: noun
Etymology: de- + Latin fenestra window
1 : a throwing of a person or thing out of a window
2 : a usually swift dismissal or expulsion
   


-Steve Schneider
 
---------------------------------
 Get your own web address.
 Have a HUGE year through Yahoo! Small Business.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070125/1b463d4a/attachment.html
From jonnybbb at gmail.com  Fri Jan 26 02:28:21 2007
From: jonnybbb at gmail.com (Johannes Buehler)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Rasterdata reproject EPSG:31467 to EPSG:4326
Message-ID: <a1c514bf0701252328v6cb25f9ax39250b12bd020afe@mail.gmail.com>

Hello,
i tried to reproject a set of raster data from originally Gauss-Krueger
EPSG:31467 to latlong EPSG:4326 using gdalwarp.

gdalwarp -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
COMPRESS=LZW -s_srs '+proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000
+x_0=3500000 +y_0=0 +ellps=bessel +datum=potsdam +units=m +no_defs '
-t_srs '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs '
z2_45_18_l0.tif z2_45_18_l0_wgs84.tif

i also tried

gdalwarp -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
COMPRESS=LZW -s_srs EPSG:31467 -t_srs EPSG:4326 z2_45_18_l0.tif
z2_45_18_l0_wgs84.tif

But doing so i get the following error.

Copying color table from z2_45_18_l0.tif to new file.
ERROR 1: geocentric transformation missing z or ellps
ERROR 1: GDALSuggestedWarpOutput() failed because the passed
transformer failed.

Does anyone have an idea how to solve this problem.

Kind regards
Johannes B?hler
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070126/e9c2135d/attachment.html
From ILucena at clarku.edu  Fri Jan 26 09:33:43 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] RFC 4: Geolocation Arrays
In-Reply-To: <45B95B74.2020004@pobox.com>
References: <6FD7C9DB26540B42A1207C69BF92D4550274F307@Iris.ad.clarku.edu>
	<45B95B74.2020004@pobox.com>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D4550274F3F1@Iris.ad.clarku.edu>

Ok Frank,

That is good news for me in the sense that you are reformulating the RFC
4 and make the process less format/driver specific. 

> So you don't really need to reassemble things into an HDF file or
> something similar.

I might try to create the HDF4 and then I use MRTSwath to project it as
long as the metadata info is OK.

Thanks,

Ivan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Thursday, January 25, 2007 8:38 PM
To: Ivan Lucena
Cc: gdal-dev
Subject: Re: [Gdal-dev] RFC 4: Geolocation Arrays

Ivan Lucena wrote:
> Hi there,
> 
> If I understand correctly RFC 4, you can use the Geolocation bands to 
> warp the image bands when they exists in the same input file (in a 
> HDF-EOS Swath for example).
> 
> This is possible only because the AVHRR, Envisat, HDF and netCDF
drivers 
> have add to the Metadata the fields: "GEOLOCATION", "PIXEL_OFFSET", 
> "LINE_OFFSET", "PIXEL_STEP", "LINE_STEP", "X_BAND", "Y_BAND".

Ivan,

I have some good news.  Per RFC 4 you can also have X_DATASET and
Y_DATASET metadata pointing to another file for the X and Y bands.

   http://www.gdal.org/rfc4_geolocate.html

So you don't really need to reassemble things into an HDF file or
something similar.

> But I have someone here with lots of similar kind of information but
in 
> separated Envi file and he want to do the same process... :-)
> 
> For each par of files there is one with a bunch of hyperspectral bands

> and the other with just two bands with Latitude and Longitude.
> 
> The question is: If one invests time developing a python script to 
> gather those bands in a HDF4 and set the appropriate metadata is 
> gdalwarp going to work? I mean, the metadata will stick to the file
and 
> will be interpreted by gdalwarp accordantly?

Unfortunately, I also have some bad news.  The gdalwarp support for
geolocation arrays does not really work.  It is basically partially
implemented but I gave up on it because I could see how to make it work
without quite a bit more work.  So, you cannot use geolocation arrays
with gdalwarp currently.

If I could get this implemented I would finalize RFC 4 and try to get it
passed, but currently I'm stymied.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From nbest at forestone.com  Fri Jan 26 12:01:40 2007
From: nbest at forestone.com (Neil Best)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] mapserver ogr connection to tile index
Message-ID: <20070126100140.0f153dd008ed4f403b9327bba0b7b7a8.1ccac2c3f1.wbe@email.secureserver.net>

In the OGR In Mapserver How-To section 4.5 [1] talks about using a tile
index for vector layers.  I have been able to add a collection of
shapefiles with differing attribute schemas to my map and they render
correctly but the attributes are not available for querying, as in an
on-screen identification.  

LAYER
    NAME "ogrtile"
    TYPE POLYGON
    CONNECTIONTYPE OGR
    TILEINDEX "tileindex.shp,0"
    STATUS ON
    TEMPLATE "query"
    CLASS
        NAME "all"
        STYLE
            COLOR 200 255 0
            OUTLINECOLOR 120 120 120
        END
    END
END

The statements in the how-to gave me some optimism that it might work by
saying "OGR tileindex layers should support all normal query and
attribute fetching mechanisms" with the qualification that "problems
may (or may not) be encountered if the component tiles have differing
schemas (different sets of attributes)," which should have dampened my
optimism.  Anyhow I have tested it out and it seems like I need another
approach, but I am wondering if anyone has successfully done this and I
have missed something.  Could this possibly be a useful feature? 
Thanks.

Neil


[1]
http://mapserver.gis.umn.edu/docs/howto/ogr_howto/#tileindex-with-ogr


From matt.wilkie at gov.yk.ca  Fri Jan 26 14:19:13 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] src/dstnodata not effective for indexed colour
Message-ID: <45BA5431.8070907@gov.yk.ca>

Hi GDAL,

When using gdalwarp source and destination nodata parameters on an RGB 
image one can remap the values (e.g. change nodata from 255,255,255 to 
0,0,0 or 255,0,0 or ...). This doesn't appear to work with indexed 
colour images. Is this by design, a bug, or just not implemented?


# this works, pixels which are 255 (white) in input
# will be 150 (grey) in output
gdalwarp -srcnodata "255 255 255" -dstnodata 150 rgb.tif grey-nodata.tif

# doesn't work, source values of 255 (white) remain unchanged in output
gdalwarp -srcnodata "255 255 255" -dstnodata 150 indexed.tif grey-nodata.tif


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From ed at topozone.com  Fri Jan 26 14:46:31 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] src/dstnodata not effective for indexed colour
In-Reply-To: <45BA5431.8070907@gov.yk.ca>
References: <45BA5431.8070907@gov.yk.ca>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801987DE1@ptolemy.topozone.com>

Matt -

It isn't possible for me to test this right now, but I would expect that
for your indexed input file your -srcnodata value would be the INDEX
value you want to be treated as "no data", rather than the RGB value
associated with that index value.

     - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Wilkie
Sent: Friday, January 26, 2007 2:19 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] src/dstnodata not effective for indexed colour

Hi GDAL,

When using gdalwarp source and destination nodata parameters on an RGB
image one can remap the values (e.g. change nodata from 255,255,255 to
0,0,0 or 255,0,0 or ...). This doesn't appear to work with indexed
colour images. Is this by design, a bug, or just not implemented?


# this works, pixels which are 255 (white) in input # will be 150 (grey)
in output gdalwarp -srcnodata "255 255 255" -dstnodata 150 rgb.tif
grey-nodata.tif

# doesn't work, source values of 255 (white) remain unchanged in output
gdalwarp -srcnodata "255 255 255" -dstnodata 150 indexed.tif
grey-nodata.tif


cheers,

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Fri Jan 26 15:26:12 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] src/dstnodata not effective for indexed colour
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801987DE1@ptolemy.topozone.com>
References: <45BA5431.8070907@gov.yk.ca>
	<4BF377919225F449BB097CB76FFE9BC801987DE1@ptolemy.topozone.com>
Message-ID: <45BA63E4.80208@gov.yk.ca>

> It isn't possible for me to test this right now, but I would expect that
> for your indexed input file your -srcnodata value would be the INDEX
> value you want to be treated as "no data", rather than the RGB value
> associated with that index value.

Right you are Ed. Thanks!

At one point I did try using the index # with no apparent effect. 
However on taking a close look, I found there are 2 index entries for 
255,255,255, and in my tests I was specifying an index which is not used 
  in the image by any pixels.


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From ari.jolma at tkk.fi  Sat Jan 27 08:21:55 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] perldocs not being built and installed with 1.4.0?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233DA357A@COMAIL01.digitalglobe.com>
References: <OFF1EC2971.9863BBCB-ON8725726E.00624DC1-8725726E.00624DCC@fws.gov>
	<8B319E5A30FF4A48BE7EEAAF609DB233DA357A@COMAIL01.digitalglobe.com>
Message-ID: <45BB51F3.4020508@tkk.fi>

Ethan Alpert kirjoitti:
> I'm not seeing anything in the Makefile that converts the .dox docs into
> perldoc pods. The .dox files are being installed instead of .pod files
> into the perl directory structure.
>
> Is this a configuration problem on my side or a build bug?
>   

You may classify it as you wish but the docs are in the dox files. dox 
files are Doxygen files, doxygen is a source code documentation 
generator tool (http://www.stack.nl/~dimitri/doxygen/) which is used by 
other GDAL documentation. It can generate man pages but also HTML, 
LaTeX, etc. Doxygen does not directly support Perl but there is a Perl 
Doxygen Filter at http://www.bigsister.ch/doxygenfilter/ but to make 
life interesting, that filter is not directly usable in our case when we 
have Swig generated Perl modules. For that purpose I modified 
doxygenfilter to add the capability to grab the docs for a module from 
an external file. The modified doxygenfilter is at 
http://map.hut.fi/files/doxygenfilter/ (I should perhaps advertise that 
a bit better somewhere). The HTML docs that I have generated from the 
dox are at http://map.hut.fi/doc/Geo-GDAL/html/ I haven't tried to 
generate the man pages.

I have informed the developers of doxygenfilter of my modifications.

There are no pod files anymore.

I recognise that the things are not very easy right now regarding the 
GDAL Perl docs, but at the same time I think that Doxygen is much better 
than pod. If you have suggestions please let me know.

Ari

> -e
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ealpert at digitalglobe.com  Sat Jan 27 12:12:18 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] perldocs not being built and installed with 1.4.0?
References: <OFF1EC2971.9863BBCB-ON8725726E.00624DC1-8725726E.00624DCC@fws.gov>
	<8B319E5A30FF4A48BE7EEAAF609DB233DA357A@COMAIL01.digitalglobe.com>
	<45BB51F3.4020508@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA3746@COMAIL01.digitalglobe.com>

Thanks for the information I'll take a look this weekend. Is there a
version of perldoc that works with .dox files? If not it seems that lack
of .pods could be an issue for a lot of perl programmers as perldoc is
ubiquitously used and referenced.

-e

-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Saturday, January 27, 2007 6:22 AM
To: Ethan Alpert
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] perldocs not being built and installed with
1.4.0?

Ethan Alpert kirjoitti:
> I'm not seeing anything in the Makefile that converts the .dox docs
into
> perldoc pods. The .dox files are being installed instead of .pod files
> into the perl directory structure.
>
> Is this a configuration problem on my side or a build bug?
>   

You may classify it as you wish but the docs are in the dox files. dox 
files are Doxygen files, doxygen is a source code documentation 
generator tool (http://www.stack.nl/~dimitri/doxygen/) which is used by 
other GDAL documentation. It can generate man pages but also HTML, 
LaTeX, etc. Doxygen does not directly support Perl but there is a Perl 
Doxygen Filter at http://www.bigsister.ch/doxygenfilter/ but to make 
life interesting, that filter is not directly usable in our case when we

have Swig generated Perl modules. For that purpose I modified 
doxygenfilter to add the capability to grab the docs for a module from 
an external file. The modified doxygenfilter is at 
http://map.hut.fi/files/doxygenfilter/ (I should perhaps advertise that 
a bit better somewhere). The HTML docs that I have generated from the 
dox are at http://map.hut.fi/doc/Geo-GDAL/html/ I haven't tried to 
generate the man pages.

I have informed the developers of doxygenfilter of my modifications.

There are no pod files anymore.

I recognise that the things are not very easy right now regarding the 
GDAL Perl docs, but at the same time I think that Doxygen is much better

than pod. If you have suggestions please let me know.

Ari

> -e
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From tutey at o2.pl  Sat Jan 27 12:17:36 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] negative nodata value loaded as positive in gdal 1.4.0
In-Reply-To: <200701152131.32904.hernan.deangelis@glocalnet.net>
References: <200701140129.19846.hernan.deangelis@glocalnet.net>	<45A9FAB2.3050102@o2.pl>
	<200701152131.32904.hernan.deangelis@glocalnet.net>
Message-ID: <45BB8930.3000509@o2.pl>

Hern?n De Angelis wrote:

> Today I tried a large number of SRTM tiles, including 1" and 3" as well as  
> versions 1 and 2 and the problem is still present, so I also came to the 
> conclusion that it is likely a bug in GDAL. I hope some one else can comfirm 
> this.

Hi,

I think I have found the reason and solution.

GDAL requires explicitely set "PIXELTYPE SIGNEDINT" in the hdr file to
treat the EHdr as a singed integer.

r.in.srtm follows the guideline at [1] which doesn't mention this keyword.

After adding the "PIXELTYPE SIGNEDINT" into the hdr created by
r.in.srtm GDAL recognizes the value range properly. See:

without "PIXELTYPE SIGNEDINT" - bad:

$ gdalinfo tmp/srtm_v1_N51E016/N51E016.hgt -mm
Driver: EHdr/ESRI .hdr Labelled

<snip>

Band 1 Block=1201x1 Type=UInt16, ColorInterp=Undefined
    Computed Min/Max=37.000,32768.000
  NoData Value=-32768



with "PIXELTYPE SIGNEDINT" - good:

gdalinfo tmp/srtm_v1_N51E016/N51E016.hgt -mm
Driver: EHdr/ESRI .hdr Labelled

<snip>

Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
    Computed Min/Max=37.000,484.000
  NoData Value=-32768


Markus,

Should I apply this fix?

Frank,

GDAL-created hdr files don't include the BANDGAPBYTES parameter
mentioned in [1]. Is that OK?

Maciek

[1]
ftp://e0srp01u.ecs.nasa.gov/srtm/version1/Documentation/Notes_for_ARCInfo_users.txt

From jmp at geosys.com  Sun Jan 28 05:23:16 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] [C# bindings] TIF Point or Area
Message-ID: <000601c742c6$530f2dd0$2201a8c0@pcjmp>

Hi,

 

How I can do in c#  (gdal) to know if a TIF image is point or area, and how
I can create a new image in point or area. 

 

Thanks.

 

PIERRET Jean michel. 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070128/0d04fe23/attachment.html
From kwl7 at cornell.edu  Sun Jan 28 10:11:25 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
Message-ID: <20070128151124.GA5955@kevinzilla>

Hello All,

I have recently written drivers for the Golden Software ASCII and
Binary Grid formats that includes read, write, create, delete, and
copy capabilities.  I was hoping to get some constructive criticism
and, if no major problems are present, that it could be considered for
inclusion in future releases of GDAL.

I have attached the diff against revision 10704 with my
changes/additions.  If this is not the preferred form for submissions,
please let me know.  [Correction:  Message got stuck waiting for
moderator approval so now the patch is downloadable from
http://kevinlocke.name/gdal/gdal-driver_for_gsg.patch ]

I have also accumulated a few questions during development that I
would very much appreciate input on from those who have the time.

First, is there a portable file truncate function?  I didn't see any
VSIFTruncate() or a commonly used alternative in existing drivers.  I
was envisioning something that would call fileno() then ftruncate() or
ftruncate64() on *nix systems and fileno() then _chsize() or
_chsize_s() on Windows systems, but I didn't see anything similar in
the source.  Also, is there a VSIFPrintfL() or similar function?

Next, I am concerned about how to best handle negative values in
positions 1 or 5 of the GeoTransform.  The grid formats that I am
working with always keep grid values in the same alignment (min X, min
Y in the upper left corner), so when SetGeoTransform() is called with
a negative value in these positions, what should be done?  At the
moment I just push it to the PAM SetGeoTransform() if possible and
error otherwise.  Would it make more sense to flip the rows and/or
columns in the file; in which case the data would have the arrangement
requested but the next call to GetGeoTransform() would still return
positive numbers for positions 1 and 5 of the transform?  This makes a
lot of sense to me (especially in order to translate from the Arc grid
formats), but would this break anything expecting successful
SetGeoTransform()s to mean that subsequent GetGeoTransform()s will
return those values?

The last question is somewhat less technical; both of these grid
formats record a minimum and maximum data value as part of the format.
This requires some solution for what to do when writing to the grid
file in cases where the minimum or maximum may be overwritten.  My
solution was to store the minimum and maximum value for each row
(since blocks correspond to grid rows) in memory.  This avoids any
need for file scans during writes that overwrite minimum or maximum
values, but it does consume a bit of memory and require an initial
scan of the file (which I delay until the first write operation).  Is
this acceptable or is there some other preferred method of handling
such values?

Thanks for your time and input,
Kevin

From MChapman at sanz.com  Sun Jan 28 14:03:03 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] [C# bindings] TIF Point or Area
Message-ID: <ED3A48B9840E594890A2BC172D1194650A20B9D3@mailman.san.com>

Jean,

 

Here is a function I use to get a bunch of metadata from any image.  If
the image has the value AREA_OR_POINT in a tiff file then it will be in
the list output by the first for loop in the function below and the
value will be "Point" or "Area".  To do it in c# just use the __unsafe
{} block in your code and use the c++ code below.  The classes that
start with IVP... and CVP... are my own classes.  Let me know if you
have questions.

 

Best regards,

 

Martin chapman

 

vector< string>* CVPGdalRasterSet::GetMetaData()

{

      try

      {

            if (m_pMetaData) return (vector< string>*) m_pMetaData;

            m_pMetaData = new vector< string>;

 

            if (!((CVPGdalConnection*)m_spConnection.p)->m_pDataSource)
return m_pMetaData;

 

            GDALDataset* pDataSource =
((CVPGdalConnection*)m_spConnection.p)->m_pDataSource;

            char** ppszMetadata = pDataSource->GetMetadata();

            if (ppszMetadata)

            {

                  for (int i = 0; ppszMetadata[i] != NULL; i++)

                  {

                        string sMetaItem = (string) (char*)
ppszMetadata[i];

 

                        if (sMetaItem.size() == 0)

                              continue;

 

                        string sLastChar =
sMetaItem.substr(sMetaItem.size() - 1, 1);

                        if (sLastChar == "=")

                              sMetaItem += "Undefined";

 

                        m_pMetaData->push_back(sMetaItem);

                  }

            }

 

            for (int iBand = 0; iBand < pDataSource->GetRasterCount();
iBand++)

            {

                  double dfMin, dfMax, dfNoData;

                  int bGotMin, bGotMax, bGotNodata;

                  int nBlockXSize, nBlockYSize;

 

                  GDALRasterBand* pBand =
pDataSource->GetRasterBand(iBand+1);

 

                  /*float afSample[10000];

                  int nCount = GDALGetRandomRasterSample(pBand, 10000,
afSample);

                  stringstream sSamples;

                  sSamples << "BAND " << iBand + 1 << " SAMPLES=" <<
nCount;

                  m_pMetaData->push_back(sSamples.str());*/

                

                  pBand->GetBlockSize(&nBlockXSize, &nBlockYSize);

                  stringstream sBlock;

                  sBlock << "BAND " << iBand + 1 << " BLOCK=" <<
nBlockXSize << "x" << nBlockYSize;

                  m_pMetaData->push_back(sBlock.str());

 

                  string sDataTypeName = (string) (char*)
GDALGetDataTypeName(pBand->GetRasterDataType());

                  stringstream sDataTypeNameStream;

                  sDataTypeNameStream << "BAND " << iBand + 1 << " DATA
TYPE=" << sDataTypeName.c_str();

                  m_pMetaData->push_back(sDataTypeNameStream.str());

 

                  string sColorInterpret = (string) (char*)
GDALGetColorInterpretationName(pBand->GetColorInterpretation());

                  stringstream sColorInterpretStream;

                  sColorInterpretStream << "BAND " << iBand + 1 << "
COLOR INTERPRETATION=" << sColorInterpret.c_str();

                  m_pMetaData->push_back(sColorInterpretStream.str());

 

                  string sDescription = (char*) pBand->GetDescription();

                  if (sDescription.size() > 0)

                  {

                        if (sDescription == "") sDescription = " ";

                        stringstream sStream;

                        sStream << "BAND " << iBand + 1 << "
DESCRIPTION=" << (char*) sDescription.c_str();

                        m_pMetaData->push_back(sStream.str());

                  }

 

                  dfMin = pBand->GetMinimum(&bGotMin);

                  dfMax = pBand->GetMaximum(&bGotMax);

                  stringstream sStreamMin;

                  sStreamMin << "BAND " << iBand + 1 << " MINIMUM=" <<
dfMin;

                  m_pMetaData->push_back(sStreamMin.str());

 

                  stringstream sStreamMax;

                  sStreamMax << "BAND " << iBand + 1 << " MAXIMUM=" <<
dfMax;

                  m_pMetaData->push_back(sStreamMax.str());

 

                  dfNoData = pBand->GetNoDataValue(&bGotNodata);

                  stringstream sStreamNoData;

                  sStreamNoData << "BAND " << iBand + 1 << " NO DATA
VALUE=" << dfNoData;

                  m_pMetaData->push_back(sStreamNoData.str());

            }

 

            return (vector< string>*) m_pMetaData;

      }

      catch(exception e)      

            {throw e;}

      catch(char* e)    

            {throw e;}

      catch(...)  

            {throw "An unexpected error occurred in
CVPGdalRasterSet::GetMetaData().";}

}

 

 

Martin Chapman

SANZ Inc.

Software Developer

http://www.earthwhere.com

W - 303.495.6326

C  - 303.898.0397

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070128/9475e02e/attachment.html
From szekerest at gmail.com  Sun Jan 28 18:10:39 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] [C# bindings] TIF Point or Area
In-Reply-To: <ED3A48B9840E594890A2BC172D1194650A20B9D3@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D1194650A20B9D3@mailman.san.com>
Message-ID: <f3b73b7d0701281510m3b49d35w1ab9f3bba0124f80@mail.gmail.com>

Hi All,

This kind of information can now be obtained by using the GDAL SWIG C#
interface as well. And there's no need to compile project with /unsafe
in this case.
I've committed a sample (/csharp/apps/GDALInfo.cs) to show how to
display various information about the raster data.
To use this functionality the latest SVN trunk should be checked out.

Best Regards,


Tamas



2007/1/28, Chapman, Martin <MChapman@sanz.com>:
>
>
>
>
> Jean,
>
>
>
> Here is a function I use to get a bunch of metadata from any image.  If the
> image has the value AREA_OR_POINT in a tiff file then it will be in the list
> output by the first for loop in the function below and the value will be
> "Point" or "Area".  To do it in c# just use the __unsafe {} block in your
> code and use the c++ code below.  The classes that start with IVP? and CVP?
> are my own classes.  Let me know if you have questions.
>
>
>
> Best regards,
>
>
>
> Martin chapman
>
>
>
> vector< string>* CVPGdalRasterSet::GetMetaData()
>
> {
>
>       try
>
>       {
>
>             if (m_pMetaData) return (vector< string>*) m_pMetaData;
>
>             m_pMetaData = new vector< string>;
>
>
>
>             if
> (!((CVPGdalConnection*)m_spConnection.p)->m_pDataSource)
> return m_pMetaData;
>
>
>
>             GDALDataset* pDataSource =
> ((CVPGdalConnection*)m_spConnection.p)->m_pDataSource;
>
>             char** ppszMetadata = pDataSource->GetMetadata();
>
>             if (ppszMetadata)
>
>             {
>
>                   for (int i = 0; ppszMetadata[i] != NULL; i++)
>
>                   {
>
>                         string sMetaItem = (string) (char*) ppszMetadata[i];
>
>
>
>                         if (sMetaItem.size() == 0)
>
>                               continue;
>
>
>
>                         string sLastChar = sMetaItem.substr(sMetaItem.size()
> - 1, 1);
>
>                         if (sLastChar == "=")
>
>                               sMetaItem += "Undefined";
>
>
>
>                         m_pMetaData->push_back(sMetaItem);
>
>                   }
>
>             }
>
>
>
>             for (int iBand = 0; iBand < pDataSource->GetRasterCount();
> iBand++)
>
>             {
>
>                   double dfMin, dfMax, dfNoData;
>
>                   int bGotMin, bGotMax, bGotNodata;
>
>                   int nBlockXSize, nBlockYSize;
>
>
>
>                   GDALRasterBand* pBand =
> pDataSource->GetRasterBand(iBand+1);
>
>
>
>                   /*float afSample[10000];
>
>                   int nCount =
> GDALGetRandomRasterSample(pBand, 10000, afSample);
>
>                   stringstream sSamples;
>
>                   sSamples << "BAND " << iBand + 1 << " SAMPLES=" << nCount;
>
>                   m_pMetaData->push_back(sSamples.str());*/
>
>
>
>                   pBand->GetBlockSize(&nBlockXSize,
> &nBlockYSize);
>
>                   stringstream sBlock;
>
>                   sBlock << "BAND " << iBand + 1 << " BLOCK=" << nBlockXSize
> << "x" << nBlockYSize;
>
>                   m_pMetaData->push_back(sBlock.str());
>
>
>
>                   string sDataTypeName = (string) (char*)
> GDALGetDataTypeName(pBand->GetRasterDataType());
>
>                   stringstream sDataTypeNameStream;
>
>                   sDataTypeNameStream << "BAND " << iBand + 1 << " DATA
> TYPE=" << sDataTypeName.c_str();
>
>                   m_pMetaData->push_back(sDataTypeNameStream.str());
>
>
>
>                   string sColorInterpret = (string) (char*)
> GDALGetColorInterpretationName(pBand->GetColorInterpretation());
>
>                   stringstream sColorInterpretStream;
>
>                   sColorInterpretStream << "BAND " << iBand + 1 << " COLOR
> INTERPRETATION=" << sColorInterpret.c_str();
>
>                   m_pMetaData->push_back(sColorInterpretStream.str());
>
>
>
>                   string sDescription = (char*) pBand->GetDescription();
>
>                   if (sDescription.size() > 0)
>
>                   {
>
>                         if (sDescription == "") sDescription = " ";
>
>                         stringstream sStream;
>
>                         sStream << "BAND " << iBand + 1 << " DESCRIPTION="
> << (char*) sDescription.c_str();
>
>                         m_pMetaData->push_back(sStream.str());
>
>                   }
>
>
>
>                   dfMin = pBand->GetMinimum(&bGotMin);
>
>                   dfMax = pBand->GetMaximum(&bGotMax);
>
>                   stringstream sStreamMin;
>
>                   sStreamMin << "BAND " << iBand + 1 << " MINIMUM=" <<
> dfMin;
>
>                   m_pMetaData->push_back(sStreamMin.str());
>
>
>
>                   stringstream sStreamMax;
>
>                   sStreamMax << "BAND " << iBand + 1 << " MAXIMUM=" <<
> dfMax;
>
>                   m_pMetaData->push_back(sStreamMax.str());
>
>
>
>                   dfNoData =
> pBand->GetNoDataValue(&bGotNodata);
>
>                   stringstream sStreamNoData;
>
>                   sStreamNoData << "BAND " << iBand + 1 << " NO DATA VALUE="
> << dfNoData;
>
>                   m_pMetaData->push_back(sStreamNoData.str());
>
>             }
>
>
>
>             return (vector< string>*) m_pMetaData;
>
>       }
>
>       catch(exception e)
>
>             {throw e;}
>
>       catch(char* e)
>
>             {throw e;}
>
>       catch(...)
>
>             {throw "An unexpected error occurred in
> CVPGdalRasterSet::GetMetaData().";}
>
> }
>
>
>
>
>
> Martin Chapman
>
> SANZ Inc.
>
> Software Developer
>
> http://www.earthwhere.com
>
> W - 303.495.6326
>
> C  - 303.898.0397
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From dron at ak4719.spb.edu  Mon Jan 29 06:52:37 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070128151124.GA5955@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>
Message-ID: <20070129115237.GB30356@ak4719.spb.edu>

Hi, Kevin,

On Sun, Jan 28, 2007 at 10:11:25AM -0500, Kevin Locke wrote:
> I have recently written drivers for the Golden Software ASCII and
> Binary Grid formats that includes read, write, create, delete, and
> copy capabilities.  I was hoping to get some constructive criticism
> and, if no major problems are present, that it could be considered for
> inclusion in future releases of GDAL.
> 
> I have attached the diff against revision 10704 with my
> changes/additions.  If this is not the preferred form for submissions,
> please let me know.  [Correction:  Message got stuck waiting for
> moderator approval so now the patch is downloadable from
> http://kevinlocke.name/gdal/gdal-driver_for_gsg.patch ]

The patch looks fine to me, I just have few notes.

1. The binary driver could be derived from the RAWDataset class, just
   like the PNM driver. It prevents code duplication and provides us
   with free of charge Create() method. Also RAWDataset has several
   optimizations for speed. But the min/max collecting ability will be
   lost here, of course.

2. Ther are people which can be allergic to things like
   'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)
   (BTW, why do you need dynamic_cast here?). Also we have CPLString
   class which is derived from std::string and properly wrapped to be
   portable. Please, use that one instead of std::string.

3. You don't need EXTRAFLAGS parameter in makefile.vc.

4. It is better to place both ASCII and binary modules in the same
   directory, just to be more compact.

5. RCS Id tag should look like $Id:$, otherwise it won't be recognized
   as tag.

> First, is there a portable file truncate function?  I didn't see any
> VSIFTruncate() or a commonly used alternative in existing drivers.  I
> was envisioning something that would call fileno() then ftruncate() or
> ftruncate64() on *nix systems and fileno() then _chsize() or
> _chsize_s() on Windows systems, but I didn't see anything similar in
> the source.  Also, is there a VSIFPrintfL() or similar function?

It seems we do not have the one, though it can be added.

> Next, I am concerned about how to best handle negative values in
> positions 1 or 5 of the GeoTransform.  The grid formats that I am
> working with always keep grid values in the same alignment (min X, min
> Y in the upper left corner), so when SetGeoTransform() is called with
> a negative value in these positions, what should be done?  At the
> moment I just push it to the PAM SetGeoTransform() if possible and
> error otherwise.  Would it make more sense to flip the rows and/or
> columns in the file; in which case the data would have the arrangement
> requested but the next call to GetGeoTransform() would still return
> positive numbers for positions 1 and 5 of the transform?  This makes a
> lot of sense to me (especially in order to translate from the Arc grid
> formats), but would this break anything expecting successful
> SetGeoTransform()s to mean that subsequent GetGeoTransform()s will
> return those values?

I do not think that driver itself should reorder data in any way, it is
a task for gdalwarp to change transformation matrix. I think your
current approach is fine.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From kwl7 at cornell.edu  Mon Jan 29 09:50:52 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129115237.GB30356@ak4719.spb.edu>
References: <20070128151124.GA5955@kevinzilla>
	<20070129115237.GB30356@ak4719.spb.edu>
Message-ID: <20070129145052.GA5813@kevinzilla>

Hi Andrey,

Thanks very much for your input.  New version is at
http://kevinlocke.name/gdal/gdal-driver_for_gsg-r2.patch

On Mon, 2007-01-29 at 14:52 +0300, Andrey Kiselev wrote:
> On Sun, Jan 28, 2007 at 10:11:25AM -0500, Kevin Locke wrote:
>> I have recently written drivers for the Golden Software ASCII and
>> Binary Grid formats that includes read, write, create, delete, and
>> copy capabilities.  I was hoping to get some constructive criticism
>> and, if no major problems are present, that it could be considered for
>> inclusion in future releases of GDAL.
> 
> The patch looks fine to me, I just have few notes.
> 
> 1. The binary driver could be derived from the RAWDataset class, just
>    like the PNM driver. It prevents code duplication and provides us
>    with free of charge Create() method. Also RAWDataset has several
>    optimizations for speed. But the min/max collecting ability will be
>    lost here, of course.

That's a good idea, I hadn't even noticed that class.  The only
drawbacks of not updating the min/max that I have observed is that
Surfer (v8) uses these values to set contour interval and a few other
measurement presets (I'll check more thoroughly this afternoon).  So
it may not be a big problem to leave them untouched, as long as the
data does not change significantly.  Do you think it is worth the
speed/elegance improvements to have the driver subclass RawDataset at
the risk of some incompatibility with other programs?  If you do,
should I have the GetMinimum()/GetMaximum() functions return the value
in the header?

> 2. Ther are people which can be allergic to things like
>    'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)

I've removed the dynamic_casts.  The numeric_limits stuff will take
some thought in a few places, but I should be able to get it done
shortly.

>    (BTW, why do you need dynamic_cast here?).

Nah, not really.  It was just a sanity check (and really unnecessary
in most places).

>    Also we have CPLString
>    class which is derived from std::string and properly wrapped to be
>    portable. Please, use that one instead of std::string.

Done.

> 3. You don't need EXTRAFLAGS parameter in makefile.vc.

Done.

> 4. It is better to place both ASCII and binary modules in the same
>    directory, just to be more compact.

Done.

> 5. RCS Id tag should look like $Id:$, otherwise it won't be recognized
>    as tag.

Done.

>> First, is there a portable file truncate function? [...]
> 
> It seems we do not have the one, though it can be added.

That would be appreciated.  For the ASCII format, grid lines are
likely to change length on every write and setting min/max at the end
of copy() can also require some shifting.  My approach of padding the
end with spaces seems to work, but it is less than elegant.

-- 
Thanks again,   |      kwl7@cornell.edu     |    kevinoid@jabber.org
Kevin           |   http://kevinlocke.name  |   kevinoid on freenode

From jluis at ualg.pt  Mon Jan 29 10:50:54 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129145052.GA5813@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla>
Message-ID: <45BE17DE.4050104@ualg.pt>

Kevin,
Are you supporting both version 6 and version 7 binary formats?
V6 format are normally all we want. V7 stores the grids with double 
precision
only.

Joaquim Luis

From mattb at spatialdynamics.com  Mon Jan 29 11:27:11 2007
From: mattb at spatialdynamics.com (Matt Barney)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] OGR support for KML reading?
Message-ID: <D72B3ED07435CA4AA91E660FBAA33B931E3E95@cayanne.Spatial.local>

Hello,
 
I'm new to GDAL and OGR, and can't locate the answer to my question in
the Archives.
 
When I issue the 'ogrinfo --formats' command, it indicates read/write
capability for the KML format, but this page contradicts that, saying
KML support is write-only:
http://www.gdal.org/ogr/drv_kml.html
 
Can anyone clarify this?
 
Thank you,
Matt Barney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070129/1378e7cf/attachment.html
From Roger.Bivand at nhh.no  Mon Jan 29 11:59:09 2007
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] OGR support for KML reading?
In-Reply-To: <D72B3ED07435CA4AA91E660FBAA33B931E3E95@cayanne.Spatial.local>
Message-ID: <Pine.LNX.4.44.0701291754310.2715-100000@reclus.nhh.no>

On Mon, 29 Jan 2007, Matt Barney wrote:

> Hello,
>  
> I'm new to GDAL and OGR, and can't locate the answer to my question in
> the Archives.
>  
> When I issue the 'ogrinfo --formats' command, it indicates read/write
> capability for the KML format, but this page contradicts that, saying
> KML support is write-only:
> http://www.gdal.org/ogr/drv_kml.html
>  
> Can anyone clarify this?

It does mean what it says on the KML help page, but because the output
part of ogrinfo was written before any write only drivers were included, 
you see the effect you report (that is that any driver present is assumed 
to support reading, even if it doesn't).

Roger

>  
> Thank you,
> Matt Barney
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From ealpert at digitalglobe.com  Mon Jan 29 12:37:32 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] OGR support for KML reading?
References: <D72B3ED07435CA4AA91E660FBAA33B931E3E95@cayanne.Spatial.local>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA37CA@COMAIL01.digitalglobe.com>

KML is write only. The fact that it says read/write is a bug afaict.

 

-e

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Barney
Sent: Monday, January 29, 2007 9:27 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] OGR support for KML reading?

 

Hello,

 

I'm new to GDAL and OGR, and can't locate the answer to my question in
the Archives.

 

When I issue the 'ogrinfo --formats' command, it indicates read/write
capability for the KML format, but this page contradicts that, saying
KML support is write-only:

http://www.gdal.org/ogr/drv_kml.html

 

Can anyone clarify this?

 

Thank you,

Matt Barney

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070129/99eb554f/attachment.html
From hannes.reuter at jrc.it  Mon Jan 29 13:29:06 2007
From: hannes.reuter at jrc.it (Hannes Isaak Reuter)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] projection with GEOS
In-Reply-To: <200701291704.l0TH4Kav022465@duke.maptools.org>
References: <200701291704.l0TH4Kav022465@duke.maptools.org>
Message-ID: <459C05680006FF44@cheetah-1.jrc.it> (added by postmaster@jrc.it)

Hallo Gdals,

After experimenting around now the second day and not reaching close 
to a solution, here the question..

I have a hdf file which is supposed to be in the GEOS projection, 
which I would like to have in WGS84

So, what I do is creating a tif with GCPS

gdal_translate -gcp 1 29 -45,06 76,49 -gcp 1 229 -15,29 53,95 -gcp 1 
429 -12,08 43,56 -gcp 1 651 -10,44 34,60 -gcp 101 15 -33,11 78,23 
-gcp 101 229 -10,17 53,75 -gcp 101 429 -8,08 43,46 -gcp 101 651 -7,00 
34,54 -gcp 201 7 -17,42 78,94 -gcp 201 229 -5,21 53,63 -gcp 201 429 
-4,16 43,40 -gcp 201 651 -3,61 34,50 -gcp 301 3 -1,34 80,71 -gcp 301 
229 -0,4 53,59 -gcp 301 429 -0,7 43,37 -gcp 301 651 -0,4 34,49 -gcp 
401 6 15,60 79,29 -gcp 401 229 4,53 53,62 -gcp 401 429 3,61 43,39 
-gcp 401 651 3,14 34,50 -gcp 501 14 29,69 77,92 -gcp 501 229 6,47 
53,73 -gcp 501 429 7,53 43,45 -gcp 501 651 6,53 34,53 -gcp 601 27 
42,16 76,42 -gcp 601 229 14,56 53,92 -gcp 601 429 11,52 43,54 -gcp 
601 651 9,96 34,59 -gcp 701 46 50,92 74,18 -gcp 701 229 19,92 54,20 
-gcp 701 429 15,61 43,68 -gcp 701 651 13,45 34,67 -gcp 801 71 57,03 
71,55 -gcp 801 229 25,69 54,59 -gcp 801 429 19,86 43,87 -gcp 801 651 
17,04 34,79 -gcp 901 102 62,17 68,82 -gcp 901 229 32,13 55,12 -gcp 
901 429 24,34 44,11 -gcp 901 651 20,75 34,93 -gcp 1001 140 64,66 
65,61 -gcp 1001 329 32,86 49,54 -gcp 1001 529 26,68 39,97 -gcp 1001 
651 24,62 35,10 -gcp 1101 185 66,80 62,33 -gcp 1101 329 39,32 50,12 
-gcp 1101 651 28,72 35,32 -gcp 1201 237 69,52 59,09 -gcp 1201 329 
47,24 50,93 -gcp 1201 651 33,10 35,58 -gcp 1301 297 72,54 55,79 -gcp 
1301 329 58,94 52,27 -gcp 1301 651 37,91 35,90 -gcp 1401 367 74,10 
52,10 -gcp 1401 651 43,31 36,29 -gcp 1501 448 75,27 48,16 -gcp 1501 
651 49,71 36,81 -gcp 1601 542 76,37 43,94 -gcp 1601 651 58,07 37,54 
-gcp 1700 651 77,40 39,39 HDF5:"HDF5_FVC200612020000.hdf"://FVC testdd.tif

this seems to work..

Next step would be to reporject that tif to WGS84 with the following line

gdalwarp -s_srs "+proj=geos  +lon_0=10 +h=35785831m +x_0=0 +y_0=0" 
-t_srs WGS84 testdd.tif test270106.tif

However this delivers a tif which is completly out of the data range 
( from 9 to 10 degress in x extent)

If I apply

gdalwarp -s_srs WGS84  -t_srs WGS84 testdd.tif testutm.tif

at least the image comes closer to the desired location, still up to 
2 degress off.. so no real solution ..


Last think i tried was to warp the image without GCPs to WGS84, still 
thats not working .. see below..
gdalwarp -s_srs "+proj=GEOS  +lon_0=10 +h=35785831km +x_0=0 +y_0=0" 
-t_srs WGS84 testdd5.tif testdd6.tif
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for testdd5.tif.
There is no affine transformation and no GCPs.



Can anyone shed a little bit more light on how to reproject GEOS 
imagery using GDAL ?


Hannes


From Allan.Meek at drdc-rddc.gc.ca  Mon Jan 29 15:19:16 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] CPG Format
Message-ID: <2E58C246F17003499C141D334794D0490209E78F@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I'm working with the Convair PolGASP driver (frmts/raw/cpgdataset.cpp),
as well as a custom driver I've written for a format similar to CPG.

As I understand it, the CPG driver cannot open image files larger than 2
GB. I'm trying to extend the driver to support larger files. I made the
following changes in the AdjustFilename function:

Line 252
VSIStatBuf sStatBuf; becomes 
VSIStatBufL sStatBuf;

Line 291
return VSIStat( ... ) == 0; becomes
return VSIStatL( ... ) == 0;

This change allows me to read larger files in Linux with gdalinfo.
However, when I try to read larger files in Solaris, gdalinfo gives me a
segmentation fault (with no core dump). I am able to read smaller files
with this version of gdalinfo.

Is there a particular reason why VSIStatL is causing these crashes in
Solaris? Is there any way to increase the filesize limit for the CPG
driver that would work in both Linux and Solaris?

Thanks,
Allan Meek
MDA, on contract to DRDC Ottawa


From dron at ak4719.spb.edu  Mon Jan 29 15:22:23 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129145052.GA5813@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>
	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla>
Message-ID: <20070129202223.GB455@ak4719.spb.edu>

On Mon, Jan 29, 2007 at 09:50:52AM -0500, Kevin Locke wrote:
> > 1. The binary driver could be derived from the RAWDataset class, just
> >    like the PNM driver. It prevents code duplication and provides us
> >    with free of charge Create() method. Also RAWDataset has several
> >    optimizations for speed. But the min/max collecting ability will be
> >    lost here, of course.
> 
> That's a good idea, I hadn't even noticed that class.  The only
> drawbacks of not updating the min/max that I have observed is that
> Surfer (v8) uses these values to set contour interval and a few other
> measurement presets (I'll check more thoroughly this afternoon).  So
> it may not be a big problem to leave them untouched, as long as the
> data does not change significantly.  Do you think it is worth the
> speed/elegance improvements to have the driver subclass RawDataset at
> the risk of some incompatibility with other programs?

Well, I do not have any strong opinion on this. I think that particular
driver can be implemented in any way.

> > 2. Ther are people which can be allergic to things like
> >    'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)
> 
> I've removed the dynamic_casts.  The numeric_limits stuff will take
> some thought in a few places, but I should be able to get it done
> shortly.

I am not sure whether it is portable enough. Mateusz may have more clues
related to MSVC embedded and MSVC 6 compilers.

> >> First, is there a portable file truncate function? [...]
> > 
> > It seems we do not have the one, though it can be added.
> 
> That would be appreciated.  For the ASCII format, grid lines are
> likely to change length on every write and setting min/max at the end
> of copy() can also require some shifting.  My approach of padding the
> end with spaces seems to work, but it is less than elegant.

Huh, I did padding in my code to wrote GRD files! I wil think how
truncate function could be implemented.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Mon Jan 29 15:23:48 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070128151124.GA5955@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>
Message-ID: <20070129202348.GC455@ak4719.spb.edu>

Folks,

Any objections if I will commit patch from Kevin?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From mateusz at loskot.net  Mon Jan 29 15:40:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129145052.GA5813@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla>
Message-ID: <45BE5BA0.8030501@loskot.net>

Kevin Locke wrote:
>> 2. Ther are people which can be allergic to things like
>>    'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)
> 
> I've removed the dynamic_casts.  The numeric_limits stuff will take
> some thought in a few places, but I should be able to get it done
> shortly.

Kevin,

In the std::numeric_limits specialization for double type, the max()
function is usually based on __DBL_MAX__ constant defined by C Language
Standard, header float.h.
So, you can safely replace the std::numeric_limits<double>::max()
with __DBL_MAX__.

Unfortunately, there is no a non-C++ solution to replace
dynamic_cast<T> with.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jan 29 15:49:59 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129202223.GB455@ak4719.spb.edu>
References: <20070128151124.GA5955@kevinzilla>	<20070129115237.GB30356@ak4719.spb.edu>	<20070129145052.GA5813@kevinzilla>
	<20070129202223.GB455@ak4719.spb.edu>
Message-ID: <45BE5DF7.70006@loskot.net>

Andrey Kiselev wrote:
> On Mon, Jan 29, 2007 at 09:50:52AM -0500, Kevin Locke wrote:
>>> 2. Ther are people which can be allergic to things like 
>>> 'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)
>> I've removed the dynamic_casts.  The numeric_limits stuff will take
>>  some thought in a few places, but I should be able to get it done 
>> shortly.
> 
> I am not sure whether it is portable enough. Mateusz may have more
> clues related to MSVC embedded and MSVC 6 compilers.


Visual C++ 6.0 provide correct support of all native C++ cast operators.
The only non-standard behavior in Visual C++ 6.0  (and earlier versions)
related to dynamic_cast is that the VC++ 6.0 allows runtime checks
where  compile-time checks are required by C++ Standard.
This was fixed in Visual C++ 7.0 (Visual C++ .NET 2002).

Generally, regarding the GDAL portability and old versions of
Visual C++, I don't see any problems with using C++ cast operators.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From kwl7 at cornell.edu  Mon Jan 29 17:17:49 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <45BE17DE.4050104@ualg.pt>
References: <20070128151124.GA5955@kevinzilla>
	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla> <45BE17DE.4050104@ualg.pt>
Message-ID: <20070129221749.GA5276@kevinzilla>

On Mon, 2007-01-29 at 15:50 +0000, Joaquim Luis wrote:
> Are you supporting both version 6 and version 7 binary formats?
> V6 format are normally all we want. V7 stores the grids with double 
> precision only.

I think you are talking about the Surfer Grid File Format, which is
different from the Golden Software Grid Formats (although Surfer is a
Golden Software product).  I am working from Appendix C of the Surfer
8 User's Guide (which describes all three formats, and some others).
The only version information they have for the GS Grids is the
signature ('DSAA' for ASCII, 'DSBB' for binary).

I have been thinking about implementing the Surfer format as well, but
haven't gotten around to it yet.  Now I'm glad I hadn't, since I might
have implemented v7 only.  Thanks for the heads up.

-- 
Cheers,      |      kwl7@cornell.edu     |    kevinoid@jabber.org
Kevin        |   http://kevinlocke.name  |   kevinoid on freenode

From warmerdam at pobox.com  Mon Jan 29 17:50:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] CPG Format
In-Reply-To: <2E58C246F17003499C141D334794D0490209E78F@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D0490209E78F@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45BE7A2E.4010504@pobox.com>

Meek, Allan wrote:
> This change allows me to read larger files in Linux with gdalinfo.
> However, when I try to read larger files in Solaris, gdalinfo gives me a
> segmentation fault (with no core dump). I am able to read smaller files
> with this version of gdalinfo.
> 
> Is there a particular reason why VSIStatL is causing these crashes in
> Solaris? Is there any way to increase the filesize limit for the CPG
> driver that would work in both Linux and Solaris?

Allan,

There are some additional changes to cpgdataset.cpp that would be
required for proper support for large files.  Basically all the VSI*
functions should be VSI*L, and there is a flag to the RawRasterBand
constructor indicating whether the file handle is "large" or not.

I have no idea why you are having a crash in the VSIStatL() call, but
I do vaguely recall some sort of issue with large files on Solaris in
December, and some sort of fix was applied.  But I can't work out now
where that change was or if it might apply to your problem.  Are you
doing this work on GDAL 1.4.0?

I'd encourage you to submit a bug report for the large PolGASP files
and either attach your patch, or if not I'll prepare a patch and you
can test it.

Tracking down the Solaris problem could be ... harder.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From kwl7 at cornell.edu  Mon Jan 29 18:13:20 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <45BE5BA0.8030501@loskot.net>
References: <20070128151124.GA5955@kevinzilla>
	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla> <45BE5BA0.8030501@loskot.net>
Message-ID: <20070129231320.GB5276@kevinzilla>

On Mon, 2007-01-29 at 21:40 +0100, Mateusz Loskot wrote:
> Kevin Locke wrote:
>>> 2. Ther are people which can be allergic to things like
>>>    'std::numeric_limits<double>::max()' or 'dynamic_cast' :-)
>> 
>> I've removed the dynamic_casts.  The numeric_limits stuff will take
>> some thought in a few places, but I should be able to get it done
>> shortly.
> 
> In the std::numeric_limits specialization for double type, the max()
> function is usually based on __DBL_MAX__ constant defined by C Language
> Standard, header float.h.
> So, you can safely replace the std::numeric_limits<double>::max()
> with __DBL_MAX__.

Thanks Mateusz, I was completely overlooking defined macros to
accomplish the same purpose.  I have now replaced all of the
numeric_limits stuff with appropriate *_MAX macros (and in the process
realized that I was misusing numeric_limits<>:min()).  The new version
of the patch is at
http://kevinlocke.name/gdal/gdal-driver_for_gsg-r3.patch

-- 
Thanks,      |      kwl7@cornell.edu     |    kevinoid@jabber.org
Kevin        |   http://kevinlocke.name  |   kevinoid on freenode

From jluis at ualg.pt  Mon Jan 29 18:27:09 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070129221749.GA5276@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>	<20070129115237.GB30356@ak4719.spb.edu>	<20070129145052.GA5813@kevinzilla>
	<45BE17DE.4050104@ualg.pt> <20070129221749.GA5276@kevinzilla>
Message-ID: <45BE82CD.2030907@ualg.pt>

Kevin Locke wrote:
> On Mon, 2007-01-29 at 15:50 +0000, Joaquim Luis wrote:
>   
>> Are you supporting both version 6 and version 7 binary formats?
>> V6 format are normally all we want. V7 stores the grids with double 
>> precision only.
>>     
>
> I think you are talking about the Surfer Grid File Format, which is
> different from the Golden Software Grid Formats (although Surfer is a
> Golden Software product).  I am working from Appendix C of the Surfer
> 8 User's Guide (which describes all three formats, and some others).
> The only version information they have for the GS Grids is the
> signature ('DSAA' for ASCII, 'DSBB' for binary).
>   

I'm lost here. Yes I'm talking about Surfer Grid Formats, and there 3 of 
them (I'm pretty sure on this)

'DSAA' for ASCII
'DSBB' for what the now call GS Binary (*.grd) format <../topics/surfer_6_grid_file_format.htm> and used to be the grid format up to version 6
'DSRB' for the default (complicated and un-necessary large) Surfer 7 (*.grd) format <../topics/surfer_7_grid_file_format.htm>

Joaquim Luis





From kwl7 at cornell.edu  Mon Jan 29 18:40:53 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <45BE82CD.2030907@ualg.pt>
References: <20070128151124.GA5955@kevinzilla>
	<20070129115237.GB30356@ak4719.spb.edu>
	<20070129145052.GA5813@kevinzilla> <45BE17DE.4050104@ualg.pt>
	<20070129221749.GA5276@kevinzilla> <45BE82CD.2030907@ualg.pt>
Message-ID: <20070129234053.GA30572@kevinzilla>

On Mon, 2007-01-29 at 23:27 +0000, Joaquim Luis wrote:
> Kevin Locke wrote:
>> On Mon, 2007-01-29 at 15:50 +0000, Joaquim Luis wrote:
>>> Are you supporting both version 6 and version 7 binary formats?
>>> V6 format are normally all we want. V7 stores the grids with double 
>>> precision only.
>>
>> I think you are talking about the Surfer Grid File Format, which is
>> different from the Golden Software Grid Formats (although Surfer is a
>> Golden Software product).  I am working from Appendix C of the Surfer
>> 8 User's Guide (which describes all three formats, and some others).
>> The only version information they have for the GS Grids is the
>> signature ('DSAA' for ASCII, 'DSBB' for binary).
> 
> I'm lost here. Yes I'm talking about Surfer Grid Formats, and there 3 of 
> them (I'm pretty sure on this)
> 
> 'DSAA' for ASCII
> 'DSBB' for what the now call GS Binary (*.grd) format 
> <../topics/surfer_6_grid_file_format.htm> and used to be the grid format up 
> to version 6
> 'DSRB' for the default (complicated and un-necessary large) Surfer 7 
> (*.grd) format <../topics/surfer_7_grid_file_format.htm>

I see.  For some reason it was not connecting in my brain (I was
thinking that the "Surfer" grid format was versioned and had always
been distinct from the "Golden Software" grid format, but now that I
understand you I think I was just confused).  To answer your question,
I am indeed only implementing version 6 at this point.

-- 
Cheers,      |      kwl7@cornell.edu     |    kevinoid@jabber.org
Kevin        |   http://kevinlocke.name  |   kevinoid on freenode

From michael.timo.welsch at gmx.de  Tue Jan 30 02:43:49 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Does gdalinfo Bounding Box Information really match DTED
	/ SRTM ?
Message-ID: <8705213.post@talk.nabble.com>


I use gdalinfo to extract bounding box information of DTED L0&L1 (dt0, dt1)
as well as SRTM (hgt over bil+hdr+proj solution) data.
In both cases the reported corner points are not integer values as supposed. 

Corner Coordinates: (DTED)
Upper Left  (  -0.0041667,  49.0041667) (  0d 0'15.00"W, 49d 0'15.00"N)
Lower Left  (  -0.0041667,  47.9958333) (  0d 0'15.00"W, 47d59'45.00"N)
Upper Right (   1.0041667,  49.0041667) (  1d 0'15.00"E, 49d 0'15.00"N)
Lower Right (   1.0041667,  47.9958333) (  1d 0'15.00"E, 47d59'45.00"N)
Center      (   0.5000000,  48.5000000) (  0d30'0.00"E, 48d30'0.00"N)

Is this is a roundig bug of gdal or are the data sources just coded like
this ?
-- 
View this message in context: http://www.nabble.com/Does-gdalinfo-Bounding-Box-Information-really-match-DTED---SRTM---tf3140934.html#a8705213
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Tue Jan 30 04:24:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Does gdalinfo Bounding Box Information really match
	DTED / SRTM ?
In-Reply-To: <8705213.post@talk.nabble.com>
References: <8705213.post@talk.nabble.com>
Message-ID: <45BF0EC9.1080200@pobox.com>

Michael84 wrote:
> I use gdalinfo to extract bounding box information of DTED L0&L1 (dt0, dt1)
> as well as SRTM (hgt over bil+hdr+proj solution) data.
> In both cases the reported corner points are not integer values as supposed. 
> 
> Corner Coordinates: (DTED)
> Upper Left  (  -0.0041667,  49.0041667) (  0d 0'15.00"W, 49d 0'15.00"N)
> Lower Left  (  -0.0041667,  47.9958333) (  0d 0'15.00"W, 47d59'45.00"N)
> Upper Right (   1.0041667,  49.0041667) (  1d 0'15.00"E, 49d 0'15.00"N)
> Lower Right (   1.0041667,  47.9958333) (  1d 0'15.00"E, 47d59'45.00"N)
> Center      (   0.5000000,  48.5000000) (  0d30'0.00"E, 48d30'0.00"N)
> 
> Is this is a roundig bug of gdal or are the data sources just coded like
> this ?

Michael,

GDAL treats pixels are representing an area, and the bounds of a raster
are the bounds of the outer edges of the pixel region.

DTEDs however are normally thought of as samples at points (with a pixel
sometimes drawn around that point to represent it).  When thought of as
point data DTED corners are right on 1 degree cell boundaries.

So this is the class "pixel as area" vs. "pixel as point" discrepency
which results in an off-by-one-half-pixel difference under various
circumstances.

So, there is no bug, only differences in interpretation of what the
bounds of a raster are.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From guillaume.huby.lists at gmail.com  Tue Jan 30 03:09:06 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] OGR support for KML reading?
Message-ID: <ddc797c30701300009p30ccc940occ5e6be8cf5f2ef8@mail.gmail.com>

>
> Hello,
>
> I'm new to GDAL and OGR, and can't locate the answer to my question in the
> Archives.
>
> When I issue the 'ogrinfo --formats' command, it indicates read/write
> capability for the KML format, but this page contradicts that, saying KML
> support is write-only:
> http://www.gdal.org/ogr/drv_kml.html
>
> Can anyone clarify this?
>


One turn around to read KML is to use GML files, for more information read :
http://www.perrygeo.net/wordpress/?p=3
since it uses ogr2ogr, the script can be used to generate all data with
writing support.

I hope it will help !

Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/82da6861/attachment.html
From SriRam.PrasadBhasker at rmsi.com  Tue Jan 30 03:19:48 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] max size of image using gdaltranslate and gdalwarp
Message-ID: <OFE3FB5210.5A91CB06-ON65257273.002DA5C6-65257273.002DB382@rmsi.com>

hi.

gdaltranslate and gdalwarp are used to geo-reference a raster imagery.

can anyone tell me what is the maximum size of the imagery that it can 
handle..

can this handle images upto 4 GB in Size.. 

please confirm.

cheers
s.p.bhasker

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/3a8f7b82/attachment.html
From schut at sarvision.nl  Tue Jan 30 03:26:36 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] projection with GEOS
In-Reply-To: <459C05680006FF44@cheetah-1.jrc.it>
References: <200701291704.l0TH4Kav022465@duke.maptools.org>
	<459C05680006FF44@cheetah-1.jrc.it>
Message-ID: <20070130092636.13cba562@localhost>

Hi,

I think you mix up gcp based warping, and reprojection.

If your input image is already in GEOS projection, you shouldn't need
any gcp's. Declare the correct projection, UL corner coordinates and
pixel spacing should suffice. You can do that with gdal_translate
-a_srs "proj=...." and creating an additional .tfw file. For the values
you should put in the tfw file, search on this list or google a bit, I
don't know their order by heart. You can even skip the gdal_translate
a_srs part by using gdalwarp -s_srs <geos projection> -t_srs <wgs84
latlong>.

GCP's are usually used to match *unprojected* imagery (xy pixel space)
to some projection, or even unprojected latlong. Each gcp defines the
pixel x and y (no projection here, just raster indexing) and the
coordinates in geographic space for that pixel. Ideally you then also
should declare the projection system for your gcp points (NB this is
not the projection of your image!), but I don't know if you can do that
with gdal_translate. However, once you have declared your gcp's you
should be able to warp your image to projected space by using gdalwarp
<image> result.tif without any additional arguments. gdalwarp should
detect the gcp's and use them for the warp.

Because your input image is already projected, you probably should not
use gcp's because then the result will be less accurate then when using
the direct reprojection from GEOS to WGS84 latlong. Check if your image
already has reference coordinates and pixel spacing defined with
gdalinfo, if not create a worldfile with the ul coordinates and pixel
spacing, and use gdalwarp -s_srs "proj=geos etc" -t_srs "EPSG:4326"
<infile> <outfile>.

Cheers,
Vincent.


On Mon, 29 Jan 2007 19:29:06 +0100
Hannes Isaak Reuter <hannes.reuter@jrc.it> wrote:

> Hallo Gdals,
> 
> After experimenting around now the second day and not reaching close 
> to a solution, here the question..
> 
> I have a hdf file which is supposed to be in the GEOS projection, 
> which I would like to have in WGS84
> 
> So, what I do is creating a tif with GCPS
> 
> gdal_translate -gcp 1 29 -45,06 76,49 -gcp 1 229 -15,29 53,95 -gcp 1 
> 429 -12,08 43,56 -gcp 1 651 -10,44 34,60 -gcp 101 15 -33,11 78,23 
> -gcp 101 229 -10,17 53,75 -gcp 101 429 -8,08 43,46 -gcp 101 651 -7,00 
> 34,54 -gcp 201 7 -17,42 78,94 -gcp 201 229 -5,21 53,63 -gcp 201 429 
> -4,16 43,40 -gcp 201 651 -3,61 34,50 -gcp 301 3 -1,34 80,71 -gcp 301 
> 229 -0,4 53,59 -gcp 301 429 -0,7 43,37 -gcp 301 651 -0,4 34,49 -gcp 
> 401 6 15,60 79,29 -gcp 401 229 4,53 53,62 -gcp 401 429 3,61 43,39 
> -gcp 401 651 3,14 34,50 -gcp 501 14 29,69 77,92 -gcp 501 229 6,47 
> 53,73 -gcp 501 429 7,53 43,45 -gcp 501 651 6,53 34,53 -gcp 601 27 
> 42,16 76,42 -gcp 601 229 14,56 53,92 -gcp 601 429 11,52 43,54 -gcp 
> 601 651 9,96 34,59 -gcp 701 46 50,92 74,18 -gcp 701 229 19,92 54,20 
> -gcp 701 429 15,61 43,68 -gcp 701 651 13,45 34,67 -gcp 801 71 57,03 
> 71,55 -gcp 801 229 25,69 54,59 -gcp 801 429 19,86 43,87 -gcp 801 651 
> 17,04 34,79 -gcp 901 102 62,17 68,82 -gcp 901 229 32,13 55,12 -gcp 
> 901 429 24,34 44,11 -gcp 901 651 20,75 34,93 -gcp 1001 140 64,66 
> 65,61 -gcp 1001 329 32,86 49,54 -gcp 1001 529 26,68 39,97 -gcp 1001 
> 651 24,62 35,10 -gcp 1101 185 66,80 62,33 -gcp 1101 329 39,32 50,12 
> -gcp 1101 651 28,72 35,32 -gcp 1201 237 69,52 59,09 -gcp 1201 329 
> 47,24 50,93 -gcp 1201 651 33,10 35,58 -gcp 1301 297 72,54 55,79 -gcp 
> 1301 329 58,94 52,27 -gcp 1301 651 37,91 35,90 -gcp 1401 367 74,10 
> 52,10 -gcp 1401 651 43,31 36,29 -gcp 1501 448 75,27 48,16 -gcp 1501 
> 651 49,71 36,81 -gcp 1601 542 76,37 43,94 -gcp 1601 651 58,07 37,54 
> -gcp 1700 651 77,40 39,39 HDF5:"HDF5_FVC200612020000.hdf"://FVC
> testdd.tif
> 
> this seems to work..
> 
> Next step would be to reporject that tif to WGS84 with the following
> line
> 
> gdalwarp -s_srs "+proj=geos  +lon_0=10 +h=35785831m +x_0=0 +y_0=0" 
> -t_srs WGS84 testdd.tif test270106.tif
> 
> However this delivers a tif which is completly out of the data range 
> ( from 9 to 10 degress in x extent)
> 
> If I apply
> 
> gdalwarp -s_srs WGS84  -t_srs WGS84 testdd.tif testutm.tif
> 
> at least the image comes closer to the desired location, still up to 
> 2 degress off.. so no real solution ..
> 
> 
> Last think i tried was to warp the image without GCPs to WGS84, still 
> thats not working .. see below..
> gdalwarp -s_srs "+proj=GEOS  +lon_0=10 +h=35785831km +x_0=0 +y_0=0" 
> -t_srs WGS84 testdd5.tif testdd6.tif
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for testdd5.tif.
> There is no affine transformation and no GCPs.
> 
> 
> 
> Can anyone shed a little bit more light on how to reproject GEOS 
> imagery using GDAL ?
> 
> 
> Hannes
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From schut at sarvision.nl  Tue Jan 30 03:29:04 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Does gdalinfo Bounding Box Information really match
	DTED / SRTM ?
In-Reply-To: <8705213.post@talk.nabble.com>
References: <8705213.post@talk.nabble.com>
Message-ID: <20070130092904.0dfe29ec@localhost>

On Mon, 29 Jan 2007 23:43:49 -0800 (PST)
Michael84 <michael.timo.welsch@gmx.de> wrote:

> 
> I use gdalinfo to extract bounding box information of DTED L0&L1
> (dt0, dt1) as well as SRTM (hgt over bil+hdr+proj solution) data.
> In both cases the reported corner points are not integer values as
> supposed. 
> 
> Corner Coordinates: (DTED)
> Upper Left  (  -0.0041667,  49.0041667) (  0d 0'15.00"W, 49d
> 0'15.00"N) Lower Left  (  -0.0041667,  47.9958333) (  0d 0'15.00"W,
> 47d59'45.00"N) Upper Right (   1.0041667,  49.0041667) (  1d
> 0'15.00"E, 49d 0'15.00"N) Lower Right (   1.0041667,  47.9958333)
> (  1d 0'15.00"E, 47d59'45.00"N) Center      (   0.5000000,
> 48.5000000) (  0d30'0.00"E, 48d30'0.00"N)
> 
> Is this is a roundig bug of gdal or are the data sources just coded
> like this ?

Possibly because gdal uses the corner of the pixels as reference, and
the DTED and SRTM spec use the center of the pixels? They seem to be
just half a pixel off...

Cheers,
Vincent.

From mateusz at loskot.net  Tue Jan 30 07:03:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] max size of image using gdaltranslate and gdalwarp
In-Reply-To: <OFE3FB5210.5A91CB06-ON65257273.002DA5C6-65257273.002DB382@rmsi.com>
References: <OFE3FB5210.5A91CB06-ON65257273.002DA5C6-65257273.002DB382@rmsi.com>
Message-ID: <45BF33F6.2030706@loskot.net>

SriRam Prasad Bhasker wrote:
> gdaltranslate and gdalwarp are used to geo-reference a raster imagery.
> 
> can anyone tell me what is the maximum size of the imagery that it can
> handle..
> 
> can this handle images upto 4 GB in Size..
> 
> please confirm.

Hi,

Please, check "Large File Support" section of the following document:

http://www.gdal.org/gdal_building.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Jan 30 07:09:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] OGR support for KML reading?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233DA37CA@COMAIL01.digitalglobe.com>
References: <D72B3ED07435CA4AA91E660FBAA33B931E3E95@cayanne.Spatial.local>
	<8B319E5A30FF4A48BE7EEAAF609DB233DA37CA@COMAIL01.digitalglobe.com>
Message-ID: <45BF3573.1060709@loskot.net>

Ethan Alpert wrote:
> KML is write only. The fact that it says read/write is a bug afaict.

Ethan,

I wouldn't call it a bug but an inconsistency.
GDAL recognizes two types of data sets capabilities support:
- write + read
- read

If a driver supports write operations, then it's automatically
assumed the read is also supported.

In KML driver, the situation is different and doesn't match types of
capabilities used in GDAL, because there is no 'write-only' type recognized.

Therefore, the driver documentation page is recommended to read
because it provides most accurate details:

http://www.gdal.org/ogr/drv_kml.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jmp at geosys.com  Tue Jan 30 08:04:45 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] [C# bindings] TIF Point or Area
In-Reply-To: <f3b73b7d0701281510m3b49d35w1ab9f3bba0124f80@mail.gmail.com>
Message-ID: <009e01c7446f$373fdfa0$2201a8c0@pcjmp>

Hi, 

It works now using the function getMetadata,
Thanks for your help.

Best Regards

PIERRET Jean michel.

-----Message d'origine-----
De?: Tamas Szekeres [mailto:szekerest@gmail.com] 
Envoy??: lundi 29 janvier 2007 00:11
??: Chapman, Martin
Cc?: Jean Michel PIERRET; gdal-dev@lists.maptools.org
Objet?: Re: [Gdal-dev] [C# bindings] TIF Point or Area

Hi All,

This kind of information can now be obtained by using the GDAL SWIG C#
interface as well. And there's no need to compile project with /unsafe
in this case.
I've committed a sample (/csharp/apps/GDALInfo.cs) to show how to
display various information about the raster data.
To use this functionality the latest SVN trunk should be checked out.

Best Regards,


Tamas



2007/1/28, Chapman, Martin <MChapman@sanz.com>:
>
>
>
>
> Jean,
>
>
>
> Here is a function I use to get a bunch of metadata from any image.  If
the
> image has the value AREA_OR_POINT in a tiff file then it will be in the
list
> output by the first for loop in the function below and the value will be
> "Point" or "Area".  To do it in c# just use the __unsafe {} block in your
> code and use the c++ code below.  The classes that start with IVP
 and
CVP

> are my own classes.  Let me know if you have questions.
>
>
>
> Best regards,
>
>
>
> Martin chapman
>
>
>
> vector< string>* CVPGdalRasterSet::GetMetaData()
>
> {
>
>       try
>
>       {
>
>             if (m_pMetaData) return (vector< string>*) m_pMetaData;
>
>             m_pMetaData = new vector< string>;
>
>
>
>             if
> (!((CVPGdalConnection*)m_spConnection.p)->m_pDataSource)
> return m_pMetaData;
>
>
>
>             GDALDataset* pDataSource =
> ((CVPGdalConnection*)m_spConnection.p)->m_pDataSource;
>
>             char** ppszMetadata = pDataSource->GetMetadata();
>
>             if (ppszMetadata)
>
>             {
>
>                   for (int i = 0; ppszMetadata[i] != NULL; i++)
>
>                   {
>
>                         string sMetaItem = (string) (char*)
ppszMetadata[i];
>
>
>
>                         if (sMetaItem.size() == 0)
>
>                               continue;
>
>
>
>                         string sLastChar =
sMetaItem.substr(sMetaItem.size()
> - 1, 1);
>
>                         if (sLastChar == "=")
>
>                               sMetaItem += "Undefined";
>
>
>
>                         m_pMetaData->push_back(sMetaItem);
>
>                   }
>
>             }
>
>
>
>             for (int iBand = 0; iBand < pDataSource->GetRasterCount();
> iBand++)
>
>             {
>
>                   double dfMin, dfMax, dfNoData;
>
>                   int bGotMin, bGotMax, bGotNodata;
>
>                   int nBlockXSize, nBlockYSize;
>
>
>
>                   GDALRasterBand* pBand =
> pDataSource->GetRasterBand(iBand+1);
>
>
>
>                   /*float afSample[10000];
>
>                   int nCount =
> GDALGetRandomRasterSample(pBand, 10000, afSample);
>
>                   stringstream sSamples;
>
>                   sSamples << "BAND " << iBand + 1 << " SAMPLES=" <<
nCount;
>
>                   m_pMetaData->push_back(sSamples.str());*/
>
>
>
>                   pBand->GetBlockSize(&nBlockXSize,
> &nBlockYSize);
>
>                   stringstream sBlock;
>
>                   sBlock << "BAND " << iBand + 1 << " BLOCK=" <<
nBlockXSize
> << "x" << nBlockYSize;
>
>                   m_pMetaData->push_back(sBlock.str());
>
>
>
>                   string sDataTypeName = (string) (char*)
> GDALGetDataTypeName(pBand->GetRasterDataType());
>
>                   stringstream sDataTypeNameStream;
>
>                   sDataTypeNameStream << "BAND " << iBand + 1 << " DATA
> TYPE=" << sDataTypeName.c_str();
>
>                   m_pMetaData->push_back(sDataTypeNameStream.str());
>
>
>
>                   string sColorInterpret = (string) (char*)
> GDALGetColorInterpretationName(pBand->GetColorInterpretation());
>
>                   stringstream sColorInterpretStream;
>
>                   sColorInterpretStream << "BAND " << iBand + 1 << " COLOR
> INTERPRETATION=" << sColorInterpret.c_str();
>
>                   m_pMetaData->push_back(sColorInterpretStream.str());
>
>
>
>                   string sDescription = (char*) pBand->GetDescription();
>
>                   if (sDescription.size() > 0)
>
>                   {
>
>                         if (sDescription == "") sDescription = " ";
>
>                         stringstream sStream;
>
>                         sStream << "BAND " << iBand + 1 << " DESCRIPTION="
> << (char*) sDescription.c_str();
>
>                         m_pMetaData->push_back(sStream.str());
>
>                   }
>
>
>
>                   dfMin = pBand->GetMinimum(&bGotMin);
>
>                   dfMax = pBand->GetMaximum(&bGotMax);
>
>                   stringstream sStreamMin;
>
>                   sStreamMin << "BAND " << iBand + 1 << " MINIMUM=" <<
> dfMin;
>
>                   m_pMetaData->push_back(sStreamMin.str());
>
>
>
>                   stringstream sStreamMax;
>
>                   sStreamMax << "BAND " << iBand + 1 << " MAXIMUM=" <<
> dfMax;
>
>                   m_pMetaData->push_back(sStreamMax.str());
>
>
>
>                   dfNoData =
> pBand->GetNoDataValue(&bGotNodata);
>
>                   stringstream sStreamNoData;
>
>                   sStreamNoData << "BAND " << iBand + 1 << " NO DATA
VALUE="
> << dfNoData;
>
>                   m_pMetaData->push_back(sStreamNoData.str());
>
>             }
>
>
>
>             return (vector< string>*) m_pMetaData;
>
>       }
>
>       catch(exception e)
>
>             {throw e;}
>
>       catch(char* e)
>
>             {throw e;}
>
>       catch(...)
>
>             {throw "An unexpected error occurred in
> CVPGdalRasterSet::GetMetaData().";}
>
> }
>
>
>
>
>
> Martin Chapman
>
> SANZ Inc.
>
> Software Developer
>
> http://www.earthwhere.com
>
> W - 303.495.6326
>
> C  - 303.898.0397
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>



From jmp at geosys.com  Tue Jan 30 08:11:30 2007
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Gdal Warp in C#
Message-ID: <009f01c74470$2a63d4c0$2201a8c0@pcjmp>

Hi,

 

How can i reproject images in BNG (British National Grid : epsgcode = 27700)
to Geographic (epsgcode 4326) using gdal in c#. 

Else how can i user gdal warp in c#.

 

Many thanks.

 

PIERRET Jean michel.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/ba7f6433/attachment.html
From alexandre.leroux at ec.gc.ca  Tue Jan 30 09:49:10 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GDAL and TIN formats update?
Message-ID: <45BF5AE6.5070400@ec.gc.ca>


Hi list,

I've been looking for reading TIN data. In that case, it's from 
Bentley's Geopack. This is probably a proprietary format :-/

When I searched for GDAL support of TIN formats, all I could find was 
this 2004 post to the list:
http://lists.maptools.org/pipermail/gdal-dev/2004-November/004552.html
has anything changed on this issue since then?

I also asked the geowanking list and posted some related links to TIN 
data structures and my initial search over Slashgeo:
http://technology.slashgeo.org/article.pl?sid=07/01/25/1931255
this includes a link to code and algorith for TINs (of unknown quality).


Thanks and cheers,

Alex :-)
-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

From ari.jolma at tkk.fi  Tue Jan 30 09:48:49 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Using WCS driver with servers that require authentication
Message-ID: <45BF5AD1.4040404@tkk.fi>

Hello,

I've got no experience with GDAL's WCS driver yet but our scenario in
general is that we'd be using it with a server that requires
authentication and cookies to maintain the authenticated connection. How
would this work with GDAL (and apps that use GDAL for accessing data)?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From warmerdam at pobox.com  Tue Jan 30 11:44:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GDAL and TIN formats update?
In-Reply-To: <45BF5AE6.5070400@ec.gc.ca>
References: <45BF5AE6.5070400@ec.gc.ca>
Message-ID: <45BF75F9.4030706@pobox.com>

Alexandre Leroux wrote:
> 
> Hi list,
> 
> I've been looking for reading TIN data. In that case, it's from 
> Bentley's Geopack. This is probably a proprietary format :-/
> 
> When I searched for GDAL support of TIN formats, all I could find was 
> this 2004 post to the list:
> http://lists.maptools.org/pipermail/gdal-dev/2004-November/004552.html
> has anything changed on this issue since then?
> 
> I also asked the geowanking list and posted some related links to TIN 
> data structures and my initial search over Slashgeo:
> http://technology.slashgeo.org/article.pl?sid=07/01/25/1931255
> this includes a link to code and algorith for TINs (of unknown quality).

Alex,

I noticed the discussion on Slashgeo and thought of contributing, but I
didn't have too much to say.  There was a specific ASCII TIN format for
Arc/Info 7.x but I don't know that it is significant anymore.  Shapefiles
can be used for TINs, but OGR doesn't support the special types for that
very well (if at all), though shapelib can access them.  I don't believe
OGR supports any specific TIN formats.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 30 11:46:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Using WCS driver with servers that require
	authentication
In-Reply-To: <45BF5AD1.4040404@tkk.fi>
References: <45BF5AD1.4040404@tkk.fi>
Message-ID: <45BF7671.4060201@pobox.com>

Ari Jolma wrote:
> Hello,
> 
> I've got no experience with GDAL's WCS driver yet but our scenario in
> general is that we'd be using it with a server that requires
> authentication and cookies to maintain the authenticated connection. How
> would this work with GDAL (and apps that use GDAL for accessing data)?

Ari,

We would need to do some extensions to the driver to preserve cookies
or do other authentication.  The underlying libcurl can do all this so it
is mostly about building glue to store cookies in the wcs service xml file,
and send it following times, or to use authentication info from the service
file when connecting.

I'd be happy to collaborate with you on such improvements.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Jan 30 11:52:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Gdal Warp in C#
In-Reply-To: <009f01c74470$2a63d4c0$2201a8c0@pcjmp>
References: <009f01c74470$2a63d4c0$2201a8c0@pcjmp>
Message-ID: <45BF77B5.30203@pobox.com>

Jean Michel PIERRET wrote:
> Hi,
> 
>  
> 
> How can i reproject images in BNG (British National Grid : epsgcode = 
> 27700) to Geographic (epsgcode 4326) using gdal in c#.
> 
> Else how can i user gdal warp in c#.

Jean Michel,

The warp api per-se is not wrapped in c# and other non-C++ languages.

But I do see the AutoCreateWarpedVRT() function is wrapped though I'm
not sure if it works fully.  For this you would roughly call the
AutoCreateWarpedVRT() function in the gdal package with the arguments:


GDALDatasetShadow *AutoCreateWarpedVRT( GDALDatasetShadow *src_ds,
                                         const char *src_wkt = 0,
                                         const char *dst_wkt = 0,
                                         GDALResampleAlg eResampleAlg = 
GRA_NearestNeighbour,
                                         double maxerror = 0.0 ) {

So you give it a source dataset the coordinate system of the source,
the coordinate system you want to warp to, the resampling type, and
the approximation error that is acceptable, and it returns a handle
to a "virtual warped dataset" that you could pass to CreateCopy() to
write to disk as a warped image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From izzybitsie at gmail.com  Tue Jan 30 11:33:07 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal_translate misbehaving case???
Message-ID: <23e208430701300833u67b00c19q3855d560b0fd9503@mail.gmail.com>

Hi,

I have used gdal_translate to crop sectors of a world satellite GTiff image
into individual images.  For the most part, I got what I wanted with the
exception of two areas. In both cases 180 degrees of longitude is crossed by
the area whose left border is East longitude and whose right border is West
longitude.

These are the commands I used:
ulx=100.0   # 100 degrees East
uly=50       # 50 degress North
lrx=-110.0   # 110 degrees West
lry=-52.0    # 52 degrees South

gdal_translate -projwin $ulx $uly $lrx $lry world.tif area.tif

The error I get is:
Creating area.tif ..
-srcwin 5819 478 -4364 2120 falls outside raster size of 7482x3035
or is otherwise illegal.

I thought I could resolve the issue avoiding crossin the 180 degrees line.
So, I decided to create 2 smaller areas one from 100 to 180 E and the other
one from 180 to 110 West and then merge them.  To my distraught, I obtained
an image with a white band in between the 2 input images.

Does anyone know of a work around this issue?

Tx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/75774d32/attachment.html
From warmerdam at pobox.com  Tue Jan 30 15:54:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GDAL Trunk somewhat broken
Message-ID: <45BFB0A2.10404@pobox.com>

Folks,

Just a warning that currently GDAL trunk has been changed to use the CPLAtof()
function for lots of processing of spatial reference systems and it turns
out this is somewhat bugger.  So till further notice trunk should be considered
semi-broken.  If we can't fix CPLAtof() soon do something to work around this.

   http://bugzilla.remotesensing.org/show_bug.cgi?id=1464

I'm hoping Andrey will have a suggestion in the morning St. Petersburg time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Tue Jan 30 15:14:36 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] decimal degrees coordinates don't match degrees minutes
	seconds coordinates
Message-ID: <fa2ac0580701301214h2543138es69b9a5976fdec57a@mail.gmail.com>

Within gdalinfo I noticed that the decimal degrees corner coordinates are
rectangular but to the right the degrees minutes seconds corner coordinates
are not rectangular.

Below is a gdalinfo dump:

Driver: GTiff/GeoTIFF
Size is 10000, 10000
Coordinate System is:
PROJCS["NAD83 / UTM zone 15N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-93],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26915"]]
Origin = (742500.000000000000000,4275000.000000000000000)
Pixel Size = (0.150000000000000,-0.150000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows
  TIFFTAG_DATETIME=2005:12:29 11:49:37
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  742500.000, 4275000.000) ( 90d12'56.63"W, 38d35'25.40"N)
Lower Left  (  742500.000, 4273500.000) ( 90d12'58.51"W, 38d34'36.79"N)
Upper Right (  744000.000, 4275000.000) ( 90d11'54.70"W, 38d35'23.92"N)
Lower Right (  744000.000, 4273500.000) ( 90d11'56.59"W, 38d34'35.31"N)
Center      (  743250.000, 4274250.000) ( 90d12'26.61"W, 38d35'0.36"N)
Band 1 Block=10000x5 Type=Byte, ColorInterp=Red
Band 2 Block=10000x5 Type=Byte, ColorInterp=Green
Band 3 Block=10000x5 Type=Byte, ColorInterp=Blue


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/b5afbab4/attachment.html
From ed at topozone.com  Tue Jan 30 15:33:48 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] decimal degrees coordinates don't match degrees
	minutes seconds coordinates
In-Reply-To: <fa2ac0580701301214h2543138es69b9a5976fdec57a@mail.gmail.com>
Message-ID: <C1E515DC.1CF23%ed@topozone.com>

John -

Where are you seeing decimal degrees?  The first corner coordinate is:

Upper Left  (  742500.000, 4275000.000) ( 90d12' 56.63"W, 38d35'25.40"N)

Which is telling you the corner coordinates in the image?s native projection
(UTM Zone 15N) in the first pair (742500.000, 4275000.000) and then giving
you that point in degrees/minutes/seconds.  There are no decimal degrees
displayed.

A rectangle in UTM space/coordinates is not a rectangle in lat/lon
coordinates, so the upper left latitude and the upper right latitude should
not be expected to be the same.

     - Ed

-- 
Ed McNierney
President and Chief Mapmaker
Maps a la carte, Inc. / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com


From: John Mitchell <mitchelljj98@gmail.com>
Date: Tue, 30 Jan 2007 15:14:36 -0500
To: Gdal-Dev <gdal-dev@lists.maptools.org>
Cc: <mitchelljj98@gmail.com>
Subject: [Gdal-dev] decimal degrees coordinates don't match degrees minutes
seconds coordinates

Within gdalinfo I noticed that the decimal degrees corner coordinates are
rectangular but to the right the degrees minutes seconds corner coordinates
are not rectangular.

Below is a gdalinfo dump:

Driver: GTiff/GeoTIFF
Size is 10000, 10000
Coordinate System is:
PROJCS["NAD83 / UTM zone 15N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137, 298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree", 0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-93],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26915"]]
Origin = (742500.000000000000000,4275000.000000000000000)
Pixel Size = (0.150000000000000,-0.150000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows
  TIFFTAG_DATETIME=2005:12:29 11:49:37
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  742500.000, 4275000.000) ( 90d12' 56.63"W, 38d35'25.40"N)
Lower Left  (  742500.000, 4273500.000) ( 90d12'58.51"W, 38d34'36.79"N)
Upper Right (  744000.000, 4275000.000) ( 90d11'54.70"W, 38d35'23.92"N)
Lower Right (  744000.000, 4273500.000) ( 90d11'56.59"W, 38d34'35.31"N)
Center      (  743250.000, 4274250.000) ( 90d12'26.61"W, 38d35'0.36"N)
Band 1 Block=10000x5 Type=Byte, ColorInterp=Red
Band 2 Block=10000x5 Type=Byte, ColorInterp=Green
Band 3 Block=10000x5 Type=Byte, ColorInterp=Blue


-- 
John J. Mitchell

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/23942ccc/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 30 16:34:32 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal 1.3.2 build error
Message-ID: <2E58C246F17003499C141D334794D049D587EC@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi Frank and list,

I downloaded gdal 1.3.2 from web and this is build error
Note that I have copied three files (cpl_odbc.h, cpl_odbc.cpp,
IdrisiDataset.cpp) from http://www.gdal.org/srctree 
following the lead from
http://lists.umn.edu/cgi-bin/wa?A2=ind0605&L=mapserver-users&D=0&T=0&P=3
2523

why am I still getting idrisiDataset.cpp error?  Are there more files I
should copy from the www.gdal.org/srctree?


Thanks,
Shawn Gong

ERROR message:
--------------------------
...
vsis.obj
vsvers.obj
wattrblk.obj
_getcell.obj
_getrow.obj
_gsomece.obj
_putcell.obj
_rputrow.obj
       70 file(s) copied.
        cd ..

C:\build161\gdal132\frmts>cd leveller   && nmake /NOLOGO /f makefile.vc
&& cd
      cl /nologo /MD /EHsc /Zi /Fd..\..\gdal.pdb -I..\..\port
-I..\..\ogr -I..
\..\gcore  -I..\..\alg  /c levellerdataset.cpp
levellerdataset.cpp
        copy *.obj ..\o
levellerdataset.obj
        1 file(s) copied.

C:\build161\gdal132\frmts>cd sgi   && nmake /NOLOGO /f makefile.vc   &&
cd ..
     cl /nologo /MD /EHsc /Zi /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr
-I..
\..\gcore  -I..\..\alg -I./ /c sgidataset.cpp
sgidataset.cpp
        copy *.obj ..\o
sgidataset.obj
        1 file(s) copied.

C:\build161\gdal132\frmts>cd idrisi   && nmake /NOLOGO /f makefile.vc
&& cd ..

    cl /nologo /MD /EHsc /Zi /Fd..\..\gdal.pdb -I..\..\port -I..\..\ogr
-I..
\..\gcore  -I..\..\alg -D_USE_MATH_DEFINES /c idrisiDataset.cpp
idrisiDataset.cpp
idrisiDataset.cpp(1574) : error C2065: 'CPLStrlwr' : undeclared
identifier
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.

C:\build161\gdal132\frmts\idrisi>cd jpeg   && nmake /NOLOGO /f
makefile.vc   && cd ..
The system cannot find the path specified.

C:\build161\gdal132\frmts\idrisi>cd bsb   && nmake /NOLOGO /f
makefile.vc   && cd ..
The system cannot find the path specified.

C:\build161\gdal132\frmts\idrisi>cd zlib   && nmake /NOLOGO /f
makefile.vc   && cd ..
The system cannot find the path specified.

C:\build161\gdal132\frmts\idrisi>cd hdf4   && nmake /NOLOGO /f
makefile.vc   && cd ..
The system cannot find the path specified.

C:\build161\gdal132\frmts\idrisi>cd hdf5   && nmake /NOLOGO /f
makefile.vc   && cd ..
The system cannot find the path specified.
NMAKE : fatal error U1077: 'for' : return code '0x1'
Stop.
NMAKE : fatal error U1077: 'C:\PROGRA~1\MICROS~3\VC__6~1\BIN\NMAKE.EXE'
: return
 code '0x2'
Stop.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070130/851975db/attachment.html
From jmckenna at dmsolutions.ca  Tue Jan 30 17:27:51 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdaladdo and MapServer's OFFSITE parameter
Message-ID: <45BFC667.5020907@dmsolutions.ca>

I have a test case that produces odd results:

I have 2 geotiffs that have to reproject, add overviews, and tile. Here 
is what I found:

1. raw data tiled looks fine: 
http://www2.dmsolutions.ca/netbin/premiere/340401/original.gif

2. reprojected with gdalwarp, overviews with gdaladdo, and tiled, shows 
a sliver between the 2 images:

 > gdalwarp -s_srs EPSG:26916 -t_srs EPSG:102736 -of GTiff file1.tif 
./new/file1.tif

http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-no-offsite-sliver.gif 
http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-no-offsite-zoomed-into-line.gif

3. reprojected with gdalwarp, overviews with gdaladdo, tiled, using 
OFFSITE in mapfile:

 > gdaladdo -r average ./new/file1.tif 2 4 8 16

thinner sliver still exists at full extents (and several zooms after 
this): 
http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-with-offsite-sliver.gif

sliver does not exist when zoomed far in: 
http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-with-offsite-zoomed-into-line.gif

4. reprojected with gdalwarp, without overviews, tiled, and using 
OFFSITE in mapfile looks perfect:

http://www2.dmsolutions.ca/netbin/premiere/340401/warped-no-overviews-with-offsite.gif
http://www2.dmsolutions.ca/netbin/premiere/340401/warped-no-overviews-with-offsite-zoomed-in.gif

****

So there seems to be a problem with using gdaladdo and MapServer's 
OFFSITE parameter.

Am I doing something wrong, or am I missing a commandline switch somewhere?

I have the 2 test images and test mapfile for whoever wants to try this 
as well (I just can't distribute the images over this list).

thanks.

jeff


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From jmckenna at dmsolutions.ca  Tue Jan 30 17:55:20 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdaladdo and MapServer's OFFSITE parameter
In-Reply-To: <45BFC667.5020907@dmsolutions.ca>
References: <45BFC667.5020907@dmsolutions.ca>
Message-ID: <45BFCCD8.4040200@dmsolutions.ca>

Through IRC (#gdal-dev on irc.freenode.net) Howard Butler solved my problem:

- i was using OFFSITE 0 0 0, and that value was apparently changing 
through gdaladdo's averaging
- so using 'gdaladdo -r nearest' resampling instead solved the problem

thanks hobu!

jeff



Jeff McKenna wrote:
> I have a test case that produces odd results:
> 
> I have 2 geotiffs that have to reproject, add overviews, and tile. Here 
> is what I found:
> 
> 1. raw data tiled looks fine: 
> http://www2.dmsolutions.ca/netbin/premiere/340401/original.gif
> 
> 2. reprojected with gdalwarp, overviews with gdaladdo, and tiled, shows 
> a sliver between the 2 images:
> 
>  > gdalwarp -s_srs EPSG:26916 -t_srs EPSG:102736 -of GTiff file1.tif 
> ./new/file1.tif
> 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-no-offsite-sliver.gif 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-no-offsite-zoomed-into-line.gif 
> 
> 
> 3. reprojected with gdalwarp, overviews with gdaladdo, tiled, using 
> OFFSITE in mapfile:
> 
>  > gdaladdo -r average ./new/file1.tif 2 4 8 16
> 
> thinner sliver still exists at full extents (and several zooms after 
> this): 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-with-offsite-sliver.gif 
> 
> 
> sliver does not exist when zoomed far in: 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-with-overviews-with-offsite-zoomed-into-line.gif 
> 
> 
> 4. reprojected with gdalwarp, without overviews, tiled, and using 
> OFFSITE in mapfile looks perfect:
> 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-no-overviews-with-offsite.gif 
> 
> http://www2.dmsolutions.ca/netbin/premiere/340401/warped-no-overviews-with-offsite-zoomed-in.gif 
> 
> 
> ****
> 
> So there seems to be a problem with using gdaladdo and MapServer's 
> OFFSITE parameter.
> 
> Am I doing something wrong, or am I missing a commandline switch somewhere?
> 
> I have the 2 test images and test mapfile for whoever wants to try this 
> as well (I just can't distribute the images over this list).
> 
> thanks.
> 
> jeff
> 
> 


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From warmerdam at pobox.com  Tue Jan 30 20:16:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal 1.3.2 build error
In-Reply-To: <2E58C246F17003499C141D334794D049D587EC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049D587EC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45BFEDDA.2090108@pobox.com>

Gong, Shawn wrote:
> Hi Frank and list,
> 
> I downloaded gdal 1.3.2 from web and this is build error
> 
> Note that I have copied three files (cpl_odbc.h, cpl_odbc.cpp, 
> IdrisiDataset.cpp) from ___http://www.gdal.org/srctree_ 
> <http://www.gdal.org/srctree>
> 
> following the lead from 
> ___http://lists.umn.edu/cgi-bin/wa?A2=ind0605&L=mapserver-users&D=0&T=0&P=32523_ 
> <http://lists.umn.edu/cgi-bin/wa?A2=ind0605&L=mapserver-users&D=0&T=0&P=32523>
> 
> why am I still getting idrisiDataset.cpp error?  Are there more files I 
> should copy from the ___www.gdal.org/srctree_ <http://www.gdal.org/srctree>?

Shawn,

I don't think that solution applies any more since the www.gdal.org/srctree
points to the current development version and it has continued to evolve.
Is there a reason you aren't just using GDAL 1.4.0?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From br at forstware.de  Wed Jan 31 06:19:51 2007
From: br at forstware.de (br)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal_transform converting jpg to tiff
Message-ID: <200701311117.l0VBGwOQ004154@forstw.forstware.de>

Hello,

having .jpg files along with equal named world files .jgw (same format as
.tfw) I try to convert these jpg's to tiff

gdal_transform x.jpg x.tif

(using gdal 1.4)
the result is a 192 MB .tif file (from a 10 MB .jpg)

but the most annoying thing is that the result is grayscaled and the content
is warped into a rectangle at the left border of the square.

Is the command line just to simple for doing the job?

Thanks for listening,
Bjoern


Bjoern Ruff
br@forstware.de 


From jonnybbb at gmail.com  Wed Jan 31 09:02:04 2007
From: jonnybbb at gmail.com (Johannes Buehler)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Reproject from UTM 32N (EPSG:25832) to WGS 86 (EPSG:4326)
Message-ID: <a1c514bf0701310602t295262a1vdcd9e5a30c830e63@mail.gmail.com>

Hello,
trying to reproject a GeoTIFF file  from UTM 32N (EPSG:25832) to WGS 86
(EPSG:4326) i get the following error

gdalwarp -co TFW=YES -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 -co
COMPRESS=LZW -s_srs EPSG:25832 -t_srs EPSG:4326 l0.tif l_wgs.tif

ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.


i used a testdataset from the bkg
http://www.geodatenzentrum.de/gdz1/abgabe/testdaten/raster/dtk50-utm32w-a10-tif-lzw.zip

Thanks  for any help
Johannes B?hler
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070131/c2048a14/attachment.html
From dron at ak4719.spb.edu  Wed Jan 31 09:10:44 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GDAL Trunk somewhat broken
In-Reply-To: <45BFB0A2.10404@pobox.com>
References: <45BFB0A2.10404@pobox.com>
Message-ID: <20070131141044.GA9976@ak4719.spb.edu>

On Tue, Jan 30, 2007 at 03:54:58PM -0500, Frank Warmerdam wrote:
> Just a warning that currently GDAL trunk has been changed to use the
> CPLAtof() function for lots of processing of spatial reference systems
> and it turns out this is somewhat bugger.  So till further notice
> trunk should be considered semi-broken.  If we can't fix CPLAtof()
> soon do something to work around this.
> 
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=1464

That bug should be fixed now both in trunk and in 1.4 branch. Shame on
me, the problem was missed during testing of the function.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Wed Jan 31 09:12:40 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070128151124.GA5955@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>
Message-ID: <20070131141240.GB9976@ak4719.spb.edu>

On Sun, Jan 28, 2007 at 10:11:25AM -0500, Kevin Locke wrote:
> I have recently written drivers for the Golden Software ASCII and
> Binary Grid formats that includes read, write, create, delete, and
> copy capabilities.  I was hoping to get some constructive criticism
> and, if no major problems are present, that it could be considered for
> inclusion in future releases of GDAL.

I have checked in this new driver (with small changes).
Kevin, thanks for your contribution!

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From alexandre.leroux at ec.gc.ca  Wed Jan 31 10:21:29 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GDAL and TIN formats update?
In-Reply-To: <45BF75F9.4030706@pobox.com>
References: <45BF5AE6.5070400@ec.gc.ca> <45BF75F9.4030706@pobox.com>
Message-ID: <45C0B3F9.2060903@ec.gc.ca>



Thanks Frank for your answer.

A colleague made me stumble on this.
This is an interesting related file format,
http://local.wasp.uwa.edu.au/~pbourke/dataformats/ply/
"This document presents the PLY polygon file format, a format for 
storing graphical objects that are described as a collection of 
polygons. Our goal is to provide a format that is simple and easy to 
implement but that is general enough to be useful for a wide range of 
models. The file format has two sub-formats: an ASCII representation for 
easily getting started, and a binary version for compact storage and for 
rapid saving and loading. We hope that this format will promote the 
exchange of graphical object between programs and also between groups of 
people."

The interesting part as a TIN format is:
"The typical information in a PLY file contains just two elements, the 
(x,y,z) triples for vertices and the vertex indices for each face."

Regards,

Alex


Frank Warmerdam wrote:
> Alexandre Leroux wrote:
>>
>> Hi list,
>>
>> I've been looking for reading TIN data. In that case, it's from 
>> Bentley's Geopack. This is probably a proprietary format :-/
>>
>> When I searched for GDAL support of TIN formats, all I could find was 
>> this 2004 post to the list:
>> http://lists.maptools.org/pipermail/gdal-dev/2004-November/004552.html
>> has anything changed on this issue since then?
>>
>> I also asked the geowanking list and posted some related links to TIN 
>> data structures and my initial search over Slashgeo:
>> http://technology.slashgeo.org/article.pl?sid=07/01/25/1931255
>> this includes a link to code and algorith for TINs (of unknown quality).
> 
> Alex,
> 
> I noticed the discussion on Slashgeo and thought of contributing, but I
> didn't have too much to say.  There was a specific ASCII TIN format for
> Arc/Info 7.x but I don't know that it is significant anymore.  Shapefiles
> can be used for TINs, but OGR doesn't support the special types for that
> very well (if at all), though shapelib can access them.  I don't believe
> OGR supports any specific TIN formats.
> 
> Best regards,

-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

From rkgeorge at cadmaps.com  Wed Jan 31 10:33:21 2007
From: rkgeorge at cadmaps.com (Randy George)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
Message-ID: <20070131153324.1E7A653BC3A@mpls-qmqp-02.inet.qwest.net>

This question didn't seem go through to the list. Here's a second try.

 

Hi,

 

            I am attempting to translate some NHD data from
ftp://nhdftp.usgs.gov/SubRegions/ using ogr2ogr 1.4.0 in FWTools 1.1.3, but
having some problems.

 

The NHD data comes as ESRI geodatabase .mdb files. I was excited to see that
ogr2ogr now supportsESRI geodatabase mdb format and ran the following:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=NHD host=localhost
password=password port=5432" D:\NHD\NHDH0101\NHDH0101.mdb

 

The translation went smoothly without apparent error resulting in a set of
tables with geometry_columns entries:

"8012398";"''";"public";"Basin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012493";"''";"public";"HYDRO_NET_Junctions";"wkb_geometry";"2";"32767";"GE
OMETRY"

"8009168";"''";"public";"NHDArea";"wkb_geometry";"2";"32767";"GEOMETRY"

"8009194";"''";"public";"NHDFlowline";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012333";"''";"public";"NHDLine";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012359";"''";"public";"NHDLineEventFC";"wkb_geometry";"2";"32767";"GEOMETR
Y"

"8012346";"''";"public";"NHDPoint";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012372";"''";"public";"NHDPointEventFC";"wkb_geometry";"2";"32767";"GEOMET
RY"

"8009181";"''";"public";"NHDWaterbody";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012385";"''";"public";"Region";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012436";"''";"public";"Subbasin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012417";"''";"public";"Subregion";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012480";"''";"public";"Subwatershed";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012467";"''";"public";"Watershed";"wkb_geometry";"2";"32767";"GEOMETRY"

 

However, several of the tables, not all, have empty wkb_geometry columns. In
addition a couple of tables have incompletely translated wkb_geometry with
only some rows containing data.

 

I then tried using an ODBC DSN:

ogr2ogr -f PostgreSQL -update -overwrite PG:"user=user dbname=NHD
host=localhost password=password port=5432" PGeo:NHD Basin 

but the Basin.wkb_geometry was still empty. The Access mdb file appears to
have long binary data in a Shape column.

 

Perhaps individual tables need to be translated with a specified geom
column? 

 

Is a log generated by an ogr2ogr translation?

 

Thanks

randy

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070131/de21492e/attachment.html
From Daniel.Gillespie at noaa.gov  Wed Jan 31 10:59:32 2007
From: Daniel.Gillespie at noaa.gov (Daniel.Gillespie@noaa.gov)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] need help compiling GDAL with HDF5 support
Message-ID: <dfc874dff791.dff791dfc874@noaa.gov>

Hello.  I am trying to ultimately trying to build Grass with the ability
to readHDF5 files.  I tried to compile GDAL with HDF5 support and ran
into problems in the compilation process.  I believe that the HDF5 build
process was successful, because the HDF5 utilities like gif2h5 are now
available on my system.  

Any advice would be greatly appreciated!

Many thanks,

Dan Gillespie

.......................

Here are some specifics:

Red Hat Linux
GDAL:		gdal-cvs-2006.03.29
HDF5:		hdf5-1.6.5

Here is the configuration file:

./configure --with-hdf5=/usr/local/hdf5/hdf5-1.6.5/hdf/bin --with-php

Here is some of the output items from the configure step that appears to
relate
to HDF5:

checking for SDreaddata in -lmfhdf... no
checking for H5Fopen in -lhdf5... no

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -O2
  C++ compiler:              g++ -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           external
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              yes
  KAKADU support:            no
  JASPER support:            no
  ECW support:               no
  MrSID support:             no
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            no
  ODBC support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            no
  DWGdirect support          no
  PANORAMA GIS support:      no
  GEOS support:              no

  Statically link PROJ.4:    no

  Traditional Python:        yes
  NG SWIG Bindings:          php

  enable OGR building:       yes


When I got to the make step, there were lots of errors relating to HDF5:

hdf5dataset.cpp:58:18: hdf5.h: No such file or directory
In file included from hdf5dataset.cpp:62:
hdf5dataset.h:59: error: ISO C++ forbids declaration of `hsize_t' with
no type
hdf5dataset.h:59: error: expected `;' before '*' token
hdf5dataset.h:60: error: `hid_t' does not name a type
hdf5dataset.h:61: error: `hid_t' does not name a type
hdf5dataset.h:67: error: `herr_t' does not name a type
hdf5dataset.h:80: error: `hid_t' does not name a type
hdf5dataset.h:81: error: `hid_t' does not name a type
hdf5dataset.h:82: error: `hid_t' does not name a type
hdf5dataset.h:101: error: `hid_t' has not been declared
hdf5dataset.h:101: error: ISO C++ forbids declaration of `parameter'
with no type
hdf5dataset.h:102: error: expected `;' before '(' token
hdf5dataset.cpp: In constructor `HDF5Dataset::HDF5Dataset()':
hdf5dataset.cpp:109: error: `hHDF5' was not declared in this scope
hdf5dataset.cpp:110: error: `hDatasetID' was not declared in this scope
hdf5dataset.cpp:111: error: `hGroupID' was not declared in this scope
hdf5dataset.cpp:109: warning: unused variable 'hHDF5'
hdf5dataset.cpp:110: warning: unused variable 'hDatasetID'
hdf5dataset.cpp:111: warning: unused variable 'hGroupID'
hdf5dataset.cpp: In destructor `virtual HDF5Dataset::~HDF5Dataset()':
hdf5dataset.cpp:123: error: `hHDF5' was not declared in this scope
hdf5dataset.cpp:124: error: `H5Fclose' was not declared in this scope
hdf5dataset.cpp:124: warning: unused variable 'H5Fclose'
hdf5dataset.cpp:125: error: `hGroupID' was not declared in this scope
hdf5dataset.cpp:126: error: `H5Gclose' was not declared in this scope
hdf5dataset.cpp:126: warning: unused variable 'H5Gclose'
hdf5dataset.cpp: At global scope:
hdf5dataset.cpp:146: error: `GDALDataType HDF5Dataset::GetDataType' is
not a static member of `class HDF5Dataset'
hdf5dataset.cpp:146: error: `hid_t' was not declared in this scope
hdf5dataset.cpp:147: error: expected `,' or `;' before '{' token
hdf5dataset.cpp:183: error: `const char*HDF5Dataset::GetDataTypeName' is
not a static member of `class HDF5Dataset'
hdf5dataset.cpp:183: error: `hid_t' was not declared in this scope
hdf5dataset.cpp:184: error: expected `,' or `;' before '{' token
hdf5dataset.cpp: In static member function `static GDALDataset*
HDF5Dataset::Open(GDALOpenInfo*)':
hdf5dataset.cpp:244: error: `H5Fis_hdf5' was not declared in this scope
hdf5dataset.cpp:244: warning: unused variable 'H5Fis_hdf5'
hdf5dataset.cpp:261: error: 'class HDF5Dataset' has no member named 'hHDF5'
hdf5dataset.cpp:262: error: `H5F_ACC_RDONLY' was not declared in this scope
hdf5dataset.cpp:263: error: `H5P_DEFAULT' was not declared in this scope
hdf5dataset.cpp:263: error: `H5Fopen' was not declared in this scope
hdf5dataset.cpp:264: error: 'class HDF5Dataset' has no member named 'hHDF5'
hdf5dataset.cpp:269: error: 'class HDF5Dataset' has no member named
'hGroupID'
hdf5dataset.cpp:269: error: 'class HDF5Dataset' has no member named 'hHDF5'
hdf5dataset.cpp:269: error: `H5Gopen' was not declared in this scope
hdf5dataset.cpp:270: error: 'class HDF5Dataset' has no member named
'hGroupID'
hdf5dataset.cpp:262: warning: unused variable 'H5F_ACC_RDONLY'
hdf5dataset.cpp:263: warning: unused variable 'H5P_DEFAULT'
hdf5dataset.cpp:263: warning: unused variable 'H5Fopen'
hdf5dataset.cpp:269: warning: unused variable 'H5Gopen'
hdf5dataset.cpp: In member function `void
HDF5Dataset::DestroyH5Objects(HDF5GroupObjects*)':
hdf5dataset.cpp:308: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:309: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp: At global scope:
hdf5dataset.cpp:396: error: `herr_t' does not name a type
hdf5dataset.cpp:554: error: `herr_t' does not name a type
hdf5dataset.cpp: In member function `CPLErr
HDF5Dataset::CreateMetadata(HDF5GroupObjects*, int)':
hdf5dataset.cpp:683: error: `hid_t' was not declared in this scope
hdf5dataset.cpp:683: error: expected `;' before "hGroupID"
hdf5dataset.cpp:684: error: expected `;' before "hDatasetID"
hdf5dataset.cpp:686: error: `herr_t' was not declared in this scope
hdf5dataset.cpp:686: error: expected `;' before "ret"
hdf5dataset.cpp:700: error: `H5G_GROUP' was not declared in this scope
hdf5dataset.cpp:702: error: `hGroupID' was not declared in this scope
hdf5dataset.cpp:702: error: `hHDF5' was not declared in this scope
hdf5dataset.cpp:702: error: `H5Gopen' was not declared in this scope
hdf5dataset.cpp:704: error: `ret' was not declared in this scope
hdf5dataset.cpp:705: error: `HDF5AttrIterate' was not declared in this scope
hdf5dataset.cpp:705: error: `H5Aiterate' was not declared in this scope
hdf5dataset.cpp:706: error: `H5Gclose' was not declared in this scope
hdf5dataset.cpp:705: warning: unused variable 'HDF5AttrIterate'
hdf5dataset.cpp:705: warning: unused variable 'H5Aiterate'
hdf5dataset.cpp:706: warning: unused variable 'H5Gclose'
hdf5dataset.cpp:711: error: `H5G_DATASET' was not declared in this scope
hdf5dataset.cpp:713: error: `hDatasetID' was not declared in this scope
hdf5dataset.cpp:713: error: `H5Dopen' was not declared in this scope
hdf5dataset.cpp:716: error: `ret' was not declared in this scope
hdf5dataset.cpp:717: error: `HDF5AttrIterate' was not declared in this scope
hdf5dataset.cpp:717: error: `H5Aiterate' was not declared in this scope
hdf5dataset.cpp:718: error: `H5Dclose' was not declared in this scope
hdf5dataset.cpp:717: warning: unused variable 'HDF5AttrIterate'
hdf5dataset.cpp:717: warning: unused variable 'H5Aiterate'
hdf5dataset.cpp:718: warning: unused variable 'H5Dclose'
hdf5dataset.cpp:700: warning: unused variable 'H5G_GROUP'
hdf5dataset.cpp:702: warning: unused variable 'H5Gopen'
hdf5dataset.cpp:711: warning: unused variable 'H5G_DATASET'
hdf5dataset.cpp:713: warning: unused variable 'H5Dopen'
hdf5dataset.cpp:686: warning: unused variable 'herr_t'
hdf5dataset.cpp: In member function `HDF5GroupObjects*
HDF5Dataset::HDF5FindDatasetObjectsbyPath(HDF5GroupObjects*, char*)':
hdf5dataset.cpp:742: error: `H5G_DATASET' was not declared in this scope
hdf5dataset.cpp:742: warning: unused variable 'H5G_DATASET'
hdf5dataset.cpp: In member function `HDF5GroupObjects*
HDF5Dataset::HDF5FindDatasetObjects(HDF5GroupObjects*, char*)':
hdf5dataset.cpp:778: error: `H5G_DATASET' was not declared in this scope
hdf5dataset.cpp:778: warning: unused variable 'H5G_DATASET'
hdf5dataset.cpp: In member function `CPLErr
HDF5Dataset::HDF5ListGroupObjects(HDF5GroupObjects*, int)':
hdf5dataset.cpp:823: error: `H5G_GROUP' was not declared in this scope
hdf5dataset.cpp:830: error: `H5G_DATASET' was not declared in this scope
hdf5dataset.cpp:836: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:837: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:838: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:843: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:844: error: 'struct HDF5GroupObjects' has no member
named 'paDims'
hdf5dataset.cpp:868: error: 'class HDF5Dataset' has no member named
'GetDataTypeName'
hdf5dataset.cpp:869: error: 'struct HDF5GroupObjects' has no member
named 'native'
hdf5dataset.cpp:830: warning: unused variable 'H5G_DATASET'
hdf5dataset.cpp: In member function `CPLErr
HDF5Dataset::ReadGlobalAttributes(int)':
hdf5dataset.cpp:889: error: `H5G_GROUP' was not declared in this scope
hdf5dataset.cpp:893: error: `hHDF5' was not declared in this scope
hdf5dataset.cpp:893: warning: unused variable 'hHDF5'
hdf5dataset.cpp:898: error: `hGroupID' was not declared in this scope
hdf5dataset.cpp:898: error: `hHDF5' was not declared in this scope
hdf5dataset.cpp:898: error: `H5Gopen' was not declared in this scope
hdf5dataset.cpp:904: error: `H5Aget_num_attrs' was not declared in this
scope
hdf5dataset.cpp:906: error: `hsize_t' was not declared in this scope
hdf5dataset.cpp:906: error: expected primary-expression before ')' token
hdf5dataset.cpp:906: error: `H5Gget_num_objs' was not declared in this scope
hdf5dataset.cpp:913: error: `HDF5CreateGroupObjs' was not declared in
this scope
hdf5dataset.cpp:913: error: `H5Giterate' was not declared in this scope
hdf5dataset.cpp:913: warning: unused variable 'HDF5CreateGroupObjs'
hdf5dataset.cpp:913: warning: unused variable 'H5Giterate'
hdf5dataset.cpp:889: warning: unused variable 'H5G_GROUP'
hdf5dataset.cpp:898: warning: unused variable 'hHDF5'
hdf5dataset.cpp:898: warning: unused variable 'H5Gopen'
hdf5dataset.cpp:904: warning: unused variable 'H5Aget_num_attrs'
hdf5dataset.cpp:906: warning: unused variable 'hsize_t'
hdf5dataset.cpp:906: warning: unused variable 'H5Gget_num_objs'
make[2]: *** [../o/hdf5dataset.o] Error 1
make[2]: Leaving directory
`/root/grassinst/software/gdal-stuff/gdal-cvs-2006.03.29/frmts/hdf5'
make[1]: *** [hdf5-install-obj] Error 2
make[1]: Leaving directory
`/root/grassinst/software/gdal-stuff/gdal-cvs-2006.03.29/frmts'
make: *** [frmts-target] Error 2





From matt.wilkie at gov.yk.ca  Wed Jan 31 11:23:35 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] does HFA driver decrease performance?
Message-ID: <45C0C287.8060202@gov.yk.ca>

Hello GDAL,

I recently tried to use gdalwarp to mosaick a bunch of CDED 16 bit 
rasters into a larger tiff and smacked headlong into the 4gb file size 
limit. I read somewhere that the HFA driver could be used instead, 
however when I try that performance goes through the floor. In my first 
attempt using gtiff it took about 3 hours to reach the 4gb mark. In my 
second attempt using hfa after 23 hours the output mosaick is only 445mb 
and only 2/3rd of the input files have been processed (204 of 304).

Any idea what's going on?

My command lines used are:

# First attempt with GTIFF
gdalwarp --optfile %workRoot%\gdalwarp.opt *.dem %dstDir%\dem_115.img

# Second attempt with HFA
gdalwarp --optfile %workRoot%\gdalwarp.opt -of HFA *.dem 
%dstDir%\dem_115.img


gdalwarp.opt:
	-srcnodata -32767 -dstnodata -32767 -t_srs nad83
	-co compress=lzw -wm 1500 -rc -multi
	-wo skip_nosource=yes


The source rasters are 304 CDED 1:50,000 tiles for the NTS 115 series 
available from geobase.ca.

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Wed Jan 31 11:33:00 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] does HFA driver decrease performance?
In-Reply-To: <45C0C287.8060202@gov.yk.ca>
References: <45C0C287.8060202@gov.yk.ca>
Message-ID: <45C0C4BC.2000908@gov.yk.ca>

Oops! I forgot to say I'm using fwtools 1.1.4 on Windows XP, and that 
the output image is 24001P x 19201L

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed Jan 31 14:01:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal_transform converting jpg to tiff
In-Reply-To: <200701311117.l0VBGwOQ004154@forstw.forstware.de>
References: <200701311117.l0VBGwOQ004154@forstw.forstware.de>
Message-ID: <45C0E76F.1030802@pobox.com>

br wrote:
> Hello,
> 
> having .jpg files along with equal named world files .jgw (same format as
> .tfw) I try to convert these jpg's to tiff
> 
> gdal_transform x.jpg x.tif
> 
> (using gdal 1.4)
> the result is a 192 MB .tif file (from a 10 MB .jpg)
> 
> but the most annoying thing is that the result is grayscaled and the content
> is warped into a rectangle at the left border of the square.
> 
> Is the command line just to simple for doing the job?

Bjoern,

I'm surprised at the results you are seeing.  Can you provide the gdalinfo
report for the input file, and the output file?  Perhaps also a tiffinfo
report for the output file?

Depending on what I see, I might like to get the jpeg file to experiment
myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jan 31 14:15:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] does HFA driver decrease performance?
In-Reply-To: <45C0C287.8060202@gov.yk.ca>
References: <45C0C287.8060202@gov.yk.ca>
Message-ID: <45C0EAC8.20900@pobox.com>

Matt Wilkie wrote:
> Hello GDAL,
> 
> I recently tried to use gdalwarp to mosaick a bunch of CDED 16 bit 
> rasters into a larger tiff and smacked headlong into the 4gb file size 
> limit. I read somewhere that the HFA driver could be used instead, 
> however when I try that performance goes through the floor. In my first 
> attempt using gtiff it took about 3 hours to reach the 4gb mark. In my 
> second attempt using hfa after 23 hours the output mosaick is only 445mb 
> and only 2/3rd of the input files have been processed (204 of 304).
> 
> Any idea what's going on?
> 
> My command lines used are:
> 
> # First attempt with GTIFF
> gdalwarp --optfile %workRoot%\gdalwarp.opt *.dem %dstDir%\dem_115.img
> 
> # Second attempt with HFA
> gdalwarp --optfile %workRoot%\gdalwarp.opt -of HFA *.dem 
> %dstDir%\dem_115.img
> 
> 
> gdalwarp.opt:
>     -srcnodata -32767 -dstnodata -32767 -t_srs nad83
>     -co compress=lzw -wm 1500 -rc -multi
>     -wo skip_nosource=yes
> 
> 
> The source rasters are 304 CDED 1:50,000 tiles for the NTS 115 series 
> available from geobase.ca.

Matt,

I think there is a problem with the HFA driver doing flushes to disk alot
and that this really hammers performance on windows in some circumstances.
Could you boil this down to a somewhat minimal demonstration and file it as
a bug?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Jan 31 14:49:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Some Locale Work
Message-ID: <45C0F2B8.9080006@pobox.com>

Folks,

At the request of a client, I have done some work to improve locale support
in GDAL.  In particular:

  o to make the world file parser support a mixture of locale use in the
    numbers.
  o to ensure the well known text parsing and composition work properly
    regardless of locale, including the EPSG file reading.

I think these particulars are working pretty well.  I also fixed a variety
of similar issues with regard to OGRSpatialReference.

To help test, I have extended the GDAL test suite python scripts to support
the --locale commandline switch.  So for instance doing:

  run_test.py --locale de_DE.utf8

will run the test suite in the german locale.  This currently shows problems
with PROJ.4 (due to proj.4 not having non-locale specific parsing), in some
ogr formats (especially related to wkt geometry, and gml geometry), and
some problems in gdrivers - especially with the WCS driver.

I'm going to continue to wittle away at these as time permits, and I hope
to setup a buildbot instance at some point that actually runs the test suite
in a "numerically dangerous" locale in the future.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From kwl7 at cornell.edu  Wed Jan 31 12:23:55 2007
From: kwl7 at cornell.edu (Kevin Locke)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070131141240.GB9976@ak4719.spb.edu>
References: <20070128151124.GA5955@kevinzilla>
	<20070131141240.GB9976@ak4719.spb.edu>
Message-ID: <20070131172355.GA5486@kevinzilla>

On Wed, 2007-01-31 at 17:12 +0300, Andrey Kiselev wrote:
> On Sun, Jan 28, 2007 at 10:11:25AM -0500, Kevin Locke wrote:
> > I have recently written drivers for the Golden Software ASCII and
> > Binary Grid formats that includes read, write, create, delete, and
> > copy capabilities.  I was hoping to get some constructive criticism
> > and, if no major problems are present, that it could be considered for
> > inclusion in future releases of GDAL.
> 
> I have checked in this new driver (with small changes).
> Kevin, thanks for your contribution!

It was my pleasure.  Thanks a lot for your time and effort (both in
looking at my patch and to all for the project in general).  I really
appreciate it.

-- 
Cheers,      |      kwl7@cornell.edu     |    kevinoid@jabber.org
Kevin        |   http://kevinlocke.name  |   kevinoid on freenode

From warmerdam at pobox.com  Wed Jan 31 15:08:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Reproject from UTM 32N (EPSG:25832) to WGS 86
	(EPSG:4326)
In-Reply-To: <a1c514bf0701310602t295262a1vdcd9e5a30c830e63@mail.gmail.com>
References: <a1c514bf0701310602t295262a1vdcd9e5a30c830e63@mail.gmail.com>
Message-ID: <45C0F727.7040904@pobox.com>

Johannes Buehler wrote:
> Hello,
> trying to reproject a GeoTIFF file  from UTM 32N (EPSG:25832) to WGS 86 
> (EPSG:4326) i get the following error
> 
> gdalwarp -co TFW=YES -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 
> -co COMPRESS=LZW -s_srs EPSG:25832 -t_srs EPSG:4326 l0.tif l_wgs.tif

Johannes,

I took a look at l0.tif and the gdalinfo report gives these bounds:

Upper Left  (32629997.500, 5794997.500)
Lower Left  (32629997.500, 5789997.500)
Upper Right (32634997.500, 5794997.500)
Lower Right (32634997.500, 5789997.500)
Center      (32632497.500, 5792497.500)

Eastings of 32629997m do not look like plausible UTM eastings to me.

It seems that the projection transformation fails on these locations
because they are invalid.

I'd suggest looking into the accuracy of the world files, or whether
you are really using the right coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Wed Jan 31 13:25:13 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Drivers for Golden Software Grid Formats (long)
In-Reply-To: <20070131172355.GA5486@kevinzilla>
References: <20070128151124.GA5955@kevinzilla>	<20070131141240.GB9976@ak4719.spb.edu>
	<20070131172355.GA5486@kevinzilla>
Message-ID: <45C0DF09.3040503@o2.pl>

Kevin Locke wrote:
> On Wed, 2007-01-31 at 17:12 +0300, Andrey Kiselev wrote:
>> On Sun, Jan 28, 2007 at 10:11:25AM -0500, Kevin Locke wrote:
>>> I have recently written drivers for the Golden Software ASCII and
>>> Binary Grid formats that includes read, write, create, delete, and
>>> copy capabilities.  I was hoping to get some constructive criticism
>>> and, if no major problems are present, that it could be considered for
>>> inclusion in future releases of GDAL.
>> I have checked in this new driver (with small changes).
>> Kevin, thanks for your contribution!
> 
> It was my pleasure.  Thanks a lot for your time and effort (both in
> looking at my patch and to all for the project in general).  I really
> appreciate it.

Kevin,

Great to see support for Surfer grids in GDAL! Thanks!

FWIW (and if not too late), there is support for writing and reading
Surfer grids in GRASS. I thought you might be interested in this to
re-use some code:

http://freegis.org/cgi-bin/viewcvs.cgi/grass6/raster/r.in.ascii/
http://freegis.org/cgi-bin/viewcvs.cgi/grass6/raster/r.out.ascii/

Regards,
Maciek


From Shawn.Gong at drdc-rddc.gc.ca  Wed Jan 31 13:29:54 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] gdal 1.3.2 build error
Message-ID: <2E58C246F17003499C141D334794D049D587ED@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thank Frank and William for your advices.
The build on gdal 1.4 was successful.

Shawn Gong


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, January 30, 2007 8:16 PM
To: Gong, Shawn
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] gdal 1.3.2 build error

Gong, Shawn wrote:
> Hi Frank and list,
> 
> I downloaded gdal 1.3.2 from web and this is build error
> 
> Note that I have copied three files (cpl_odbc.h, cpl_odbc.cpp, 
> IdrisiDataset.cpp) from ___http://www.gdal.org/srctree_ 
> <http://www.gdal.org/srctree>
> 
> following the lead from 
>
___http://lists.umn.edu/cgi-bin/wa?A2=ind0605&L=mapserver-users&D=0&T=0&
P=32523_ 
>
<http://lists.umn.edu/cgi-bin/wa?A2=ind0605&L=mapserver-users&D=0&T=0&P=
32523>
> 
> why am I still getting idrisiDataset.cpp error?  Are there more files
I 
> should copy from the ___www.gdal.org/srctree_
<http://www.gdal.org/srctree>?

Shawn,

I don't think that solution applies any more since the
www.gdal.org/srctree
points to the current development version and it has continued to
evolve.
Is there a reason you aren't just using GDAL 1.4.0?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From cportka at newwireless.com  Wed Jan 31 14:55:31 2007
From: cportka at newwireless.com (Chris Portka)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Converting Mercator Meters to Degrees
Message-ID: <45C0F433.4060400@newwireless.com>

I'm trying to convert a UTM easting value to a value an easting in 
mercator meters and then to its correct longitude.  The conversion from 
UTM to mercator is fine and defined in the following way (I'm given a 
proper UTM easting, northing, and zone):

    OGRSpatialReference utm;
    OGRSpatialReference mm;
    OGRCoordinateTransformation *transform;

    utm.SetProjCS("UTM / WGS84");
    utm.SetWellKnownGeogCS("WGS84");
    utm.SetUTM(UTMzone, TRUE);

    mm.SetMercator(0, 0, 1, 0, 0);
    mm.SetWellKnownGeogCS("WGS84");

    transform = OGRCreateCoordinateTransformation(&utm, &mm);
    if (transform == NULL) ...

    double x = UTMEasting;
    double y = UTMNorthing;
    if (!transform->Transform(1, &x, &y))  ...

However, now I want to convert the easting (only the easting) to its 
appropriate longitude value.  Looking up the conversion from mercator 
meters easting to longitude I get the following conversion:

    longitude = (MMEasting / 6356752.3142) * 57.295779513082322;
    OR longitude = (easting / earthRadius) * RadToDeg;

But this gives me a slightly different value (about .1 degrees smaller) 
than if did the conversion with OGR like this:

    OGRSpatialReference mm;
    OGRSpatialReference latlon;
    OGRCoordinateTransformation *transform;

    mm.SetMercator(0, 0, 1, 0, 0);
    mm.SetWellKnownGeogCS("WGS84");
    
    latlon.SetWellKnownGeogCS("WGS84");

    transform = OGRCreateCoordinateTransformation(&mm, &latlon);
    if (transform == NULL) ...

    double x = MMEasting;
    double y = MMNorthing;
    if (!transform->Transform(1, &x, &y)) ...

I don't want to do this whole conversion though because I only need the 
longitude.  Does anyone have an idea what I could be doing wrong in my 
longitude conversion?  Is there some kind of false easting or something 
that gets set in SetMercator that could be giving me differing values? I 
tried looking at the source for SetMercator, but it doesn't look like it 
sets anything differently.  Any help would be greatly appreciated.

Chris


From warmerdam at pobox.com  Wed Jan 31 18:54:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] need help compiling GDAL with HDF5 support
In-Reply-To: <dfc874dff791.dff791dfc874@noaa.gov>
References: <dfc874dff791.dff791dfc874@noaa.gov>
Message-ID: <45C12C41.1030601@pobox.com>

Daniel.Gillespie@noaa.gov wrote:
> Hello.  I am trying to ultimately trying to build Grass with the ability
> to readHDF5 files.  I tried to compile GDAL with HDF5 support and ran
> into problems in the compilation process.  I believe that the HDF5 build
> process was successful, because the HDF5 utilities like gif2h5 are now
> available on my system.  
...
> Here is the configuration file:
> 
> ./configure --with-hdf5=/usr/local/hdf5/hdf5-1.6.5/hdf/bin --with-php
...
> hdf5dataset.cpp:58:18: hdf5.h: No such file or directory

Dan,

I believe the --with-hdf5 configuration is supposed to take as an argument
the base directory of the hdf5 installation.  In your case that might
be /usr/local/hdf5/hdf5-1.6.5/hdf.  In particular, I would expect the
given directory to have a /lib subdirectory and a /include subdirectory
with the hdf5.h file in /include/hdf5.

I'd encourage you to figure out where hdf5.h is, and where the HDF5_INCLUDE
setting points in GDALmake.opt.  If they don't match you will have problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Jan 31 19:42:31 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Gdal Warp in C#
In-Reply-To: <45BF77B5.30203@pobox.com>
References: <009f01c74470$2a63d4c0$2201a8c0@pcjmp> <45BF77B5.30203@pobox.com>
Message-ID: <f3b73b7d0701311642n7be60b79nede6bfcde14a7c13@mail.gmail.com>

Frank,

This approach is not working properly with the current implementation
since AutoCreateWarpedVRT does not set up the warped extent and the
ReprojectionTransformer.

I've attached my patch against vrtwarped.cpp to make this feature work.
When the fix is applied I will also commit my corresponding C# example.


Best Regards,

Tamas Szekeres



2007/1/30, Frank Warmerdam <warmerdam@pobox.com>:
> Jean Michel PIERRET wrote:
> > Hi,
> >
> >
> >
> > How can i reproject images in BNG (British National Grid : epsgcode =
> > 27700) to Geographic (epsgcode 4326) using gdal in c#.
> >
> > Else how can i user gdal warp in c#.
>
> Jean Michel,
>
> The warp api per-se is not wrapped in c# and other non-C++ languages.
>
> But I do see the AutoCreateWarpedVRT() function is wrapped though I'm
> not sure if it works fully.  For this you would roughly call the
> AutoCreateWarpedVRT() function in the gdal package with the arguments:
>
>
> GDALDatasetShadow *AutoCreateWarpedVRT( GDALDatasetShadow *src_ds,
>                                          const char *src_wkt = 0,
>                                          const char *dst_wkt = 0,
>                                          GDALResampleAlg eResampleAlg =
> GRA_NearestNeighbour,
>                                          double maxerror = 0.0 ) {
>
> So you give it a source dataset the coordinate system of the source,
> the coordinate system you want to warp to, the resampling type, and
> the approximation error that is acceptable, and it returns a handle
> to a "virtual warped dataset" that you could pass to CreateCopy() to
> write to disk as a warped image.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vrtwarped.cpp.patch
Type: application/octet-stream
Size: 3187 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/c9fe8ce5/vrtwarped.cpp.obj
