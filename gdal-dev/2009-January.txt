From szekerest at gmail.com  Thu Jan  1 19:05:43 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  1 19:05:47 2009
Subject: [gdal-dev] GDAL/OSGeo buildbot resurrection
Message-ID: <f3b73b7d0901011605l98a7ccbp4f2d9f946d7ac674@mail.gmail.com>

As having the first post on this list in 2009, let me wish a Happy New Year
to all of the list members!


I'd wonder if we could galvanize life into our buildbot configuration hosted
at http://buildbot.osgeo.org/.
Is anyone aware of where the backup of the original config files in
/osgeo/buildbot located on the server?

The documentation related to the original configuration is
http://wiki.osgeo.org/wiki/BuildBot_Configuration

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090102/0c04ade0/attachment.html
From Chris.Barker at noaa.gov  Thu Jan  1 19:04:53 2009
From: Chris.Barker at noaa.gov (Chris.Barker)
Date: Thu Jan  1 20:05:00 2009
Subject: [gdal-dev] Puzzling results from gdalinfo with BSB nautical charts
In-Reply-To: <200812302057.10042.even.rouault@mines-paris.org>
References: <2ACAFE66051448078E8162DA3FDC9850@DELL8300>
	<200812302057.10042.even.rouault@mines-paris.org>
Message-ID: <495D5A25.2050407@noaa.gov>

Even Rouault wrote:
> But I've no idea if there are BSB datasets that are not NAD83 or WGS84. In 
> which case, the BSB driver would have to be improved to parse the appropriate 
> line.

If anyone opens up that code, it would be great if they could do a bit 
more -- BSB defines the projection completely( At least I think it 
does), in addition to providing the GRPs. It would be nice if that 
information was not lost.

What I don't know, is how GDAL can/should deal with having both GRPs and 
complete projection information.

Otherwise, it should be a fairly simple matter of parsing the text header.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From j.kirkpatrick at bigpond.com  Thu Jan  1 20:59:21 2009
From: j.kirkpatrick at bigpond.com (Jack Kirkpatrick)
Date: Thu Jan  1 21:05:11 2009
Subject: [gdal-dev] Re: Puzzling results from gdalinfo with BSB nautical
	charts
References: <2ACAFE66051448078E8162DA3FDC9850@DELL8300>
	<200812302057.10042.even.rouault@mines-paris.org>
	<495D5A25.2050407@noaa.gov>
Message-ID: <loom.20090102T013240-272@post.gmane.org>

Chris.Barker <Chris.Barker <at> noaa.gov> writes:

> 
> Even Rouault wrote:
> > But I've no idea if there are BSB datasets that are not NAD83 or WGS84. In 
> > which case, the BSB driver would have to be improved to parse the 
appropriate 
> > line.
> 
> If anyone opens up that code, it would be great if they could do a bit 
> more -- BSB defines the projection completely( At least I think it 
> does), in addition to providing the GRPs. It would be nice if that 
> information was not lost.
> 
> What I don't know, is how GDAL can/should deal with having both GRPs and 
> complete projection information.
> 
> Otherwise, it should be a fairly simple matter of parsing the text header.
> 
> -Chris
> 


Chris,

I have been googling around this issue trying to establish if there are in fact 
BSB charts published with "non-WGS84 compatible" datums. 

------------------------

I found the email address of a Kirk Waters in documentation associated with the 
freely available NOAA BSB reprojector (I used xxxkwaters@csc.noaa.gov but he 
replied on xxxKirk.Waters@noaa.gov - the leading xxx I have added in the hope 
it will avoid any spamming) and asked him:

Kirk,
 
I came across your email address while googling a problem I have - you could 
click on the following URL if you would like all the gory detail:
 
http://thread.gmane.org/gmane.comp.gis.gdal.devel/17921
 
Essentially I would be interested in knowing if, to your knowledge, there are 
any BSB charts published that use datums that are not WGS84 or near enough 
to "WGS84 compatible" (e.g. NAD83).
 
Thanking you in anticipation...

------------------------

Kirk's response was (and I hope he doesn't object to my forwarding it):

Jack,
I haven't actually seen one that wasn't NAD83 or WGS84.  Those two are 
only different by about 2 meters, so for most purposes they are the same 
(but not all purposes).  When I wrote the chart reprojector I was only 
looking at NOAA charts and it is likely I did the same thing as the gdal 
utility.  It may well be that the early spec I wrote to had NAD83 and 
WGS84 as the only choices (I'd have to do some digging for the specs at 
work).
It's been a few years since I've looked at the gdal utility for BSB.  I 
know it came out after what I made and they didn't have the luxury of 
having the specification, so they had to guess a few things about the 
header.  At the time there were a couple wrong guesses, but I can't 
remember if they were things that mattered.  I suspect if they did 
matter, they have been fixed by now.

Kirk

------------------------

Seems to me that as you and Kirk work for the same organisation it might make 
sense for you and he to discuss the matter - maybe with a view to supplying 
Frank and co with a copy of the BSB header spec.

I know there were a few copyright issues floating around at one stage that 
Frank has documented elsewhere but maybe these have faded with the passage of 
time. It seems somewhat incongruous that NOAA makes freely available a BSB 
reprojector but an open source project such as GDAL can't get a copy of the 
spec.

If Frank and co were given the spec maybe they would be encouraged to tidy the 
issue up.

Regards...



From mdsumner at utas.edu.au  Sun Jan  4 01:44:57 2009
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Sun Jan  4 01:44:59 2009
Subject: [gdal-dev] Compile GDAL With WMS Support (Win32)
In-Reply-To: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>
References: <d422b4500812181215v72812af5x1b3d3e2576733be4@mail.gmail.com>
Message-ID: <81227758B5511F7B7A9C9B01@azimuth.utas.edu.au>

I had no problem with this in VC++ Express with 1.6.0 RC4. If I remember 
correctly all I need was the libcurl download as described here:

and this in nmake.opt

CURL_DIR=C:\inst\libcurl
CURL_INC = -I$(CURL_DIR)/include
# Uncoment following line to use libcurl as dynamic library
CURL_LIB = $(CURL_DIR)/libcurl_imp.lib wsock32.lib wldap32.lib winmm.lib

Cheers, Mike.


--On Thursday, 18 December 2008 3:15 PM -0500 Joel Odom 
<joelodom@gmail.com> wrote:

> I'm trying to use GDAL to pull down WMS images.  I installed curl and
> built with it.  (I can see that libcurl.dll is being loaded.)  When I
> pass in my XML service descriptor file to GDALOpen, I get, "ERROR 4:
> `C:\Documents and Settings\jo44\Desktop\ogr_data\wms.xml' not
> recognised as a supported file format."  I ran "gdalinfo --formats"
> and found that WMS is *not* listed among the supported formats, so I
> assume that I have left something out of my build.  Does anyone have
> any hints as to where to go from here?  Thanks!
>
>
> --
> http://giscoder.blogspot.com/
>




From schwehr at ccom.unh.edu  Sun Jan  4 12:10:49 2009
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Sun Jan  4 12:32:22 2009
Subject: [gdal-dev] gdal.m4?
Message-ID: <4960ED99.5050504@ccom.unh.edu>

Hi All,

Does anybody have a gdal.m4 or equivalent for autoconf that uses 
gdal-config that they would be share?  I'd like to get something better 
for the visionworkbench folks so that it can handle the various 
directories not all being together (e.g. fink has the includes in 
/sw/include/gdal1

Thanks,
-kurt
http://schwehr.org

From hobu.inc at gmail.com  Sun Jan  4 12:49:16 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun Jan  4 12:49:23 2009
Subject: [gdal-dev] gdal.m4?
In-Reply-To: <4960ED99.5050504@ccom.unh.edu>
References: <4960ED99.5050504@ccom.unh.edu>
Message-ID: <0E895F6F-54C1-4A32-BF42-4EED9697AE0C@gmail.com>

Kurt,

You might find http://liblas.org/browser/trunk/configure.ac#L95  
helpful.  Not super sophisticated, but it could be expanded.  There's  
not too much we can do about packagers stuffing things in different  
directories if they don't update the gdal-config script though.


Howard

On Jan 4, 2009, at 11:10 AM, Kurt Schwehr wrote:

> Hi All,
>
> Does anybody have a gdal.m4 or equivalent for autoconf that uses  
> gdal-config that they would be share?  I'd like to get something  
> better for the visionworkbench folks so that it can handle the  
> various directories not all being together (e.g. fink has the  
> includes in /sw/include/gdal1
>
> Thanks,
> -kurt
> http://schwehr.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From schwehr at ccom.unh.edu  Sun Jan  4 13:17:25 2009
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Sun Jan  4 13:17:33 2009
Subject: [gdal-dev] gdal.m4?
In-Reply-To: <0E895F6F-54C1-4A32-BF42-4EED9697AE0C@gmail.com>
References: <4960ED99.5050504@ccom.unh.edu>
	<0E895F6F-54C1-4A32-BF42-4EED9697AE0C@gmail.com>
Message-ID: <4960FD35.9090608@ccom.unh.edu>

That looks pretty good.  Thanks!

I'm setting gdal-conf to the right places so that should work.

-kurt

Howard Butler wrote:
> Kurt,
>
> You might find http://liblas.org/browser/trunk/configure.ac#L95 
> helpful.  Not super sophisticated, but it could be expanded.  There's 
> not too much we can do about packagers stuffing things in different 
> directories if they don't update the gdal-config script though.
>
>
> Howard
>
> On Jan 4, 2009, at 11:10 AM, Kurt Schwehr wrote:
>
>> Hi All,
>>
>> Does anybody have a gdal.m4 or equivalent for autoconf that uses 
>> gdal-config that they would be share?  I'd like to get something 
>> better for the visionworkbench folks so that it can handle the 
>> various directories not all being together (e.g. fink has the 
>> includes in /sw/include/gdal1
>>
>> Thanks,
>> -kurt
>> http://schwehr.org
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
aim: goatbar
skype: goatbar
yahoo: kurtschwehr
http://schwehr.org
NASA: JPL Solar System Visualization group for Phoenix
UNH:  Research Assist. Professor in Ocean Engineering
      Center for Coastal and Ocean Mapping (CCOM)/
      NOAA Joint Hydrographic Center (JHC)

From pofig37 at gmail.com  Sun Jan  4 14:44:26 2009
From: pofig37 at gmail.com (Alex Bernstein)
Date: Sun Jan  4 14:44:30 2009
Subject: [gdal-dev] help with gdalwarp
Message-ID: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>

Hi all,

Sorry for a newbie question. I've been reading this list and searching
elsewhere for a few days now to try to figure this out, but I'm still
missing something. I need to reproject a map from Plate Caree
projection to Lambert Azimuthal Equal Area projection centered on
0N,15E with gdalwarp. I'm using a Natural Earth II map from
<http://www.shadedrelief.com/natural2/>. The map
<http://www.nacis.org/data/NE2/NE2_land_only.jpg> is 16200x8100
pixels, plate caree, WGS84. It also has a world file
<http://www.shadedrelief.com/natural2/images/world_16000.zip> with
following information.
          0.02222222222222
          0.00000000000000
          0.00000000000000
          -0.02222222222222
          -180.00000000000000
          90.00000000000000

I run gdalwarp with following parameters:
gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +datum=WGS84" -t_srs
"+proj=laea +lat_0=0 +lon_0=15 +x_0=0 +y_0=0 +datum=WGS84" -co
INTERLEAVE=PIXEL -co TFW=YES -of GTiff
c:\dgwarp\source_images\NE2_land_only.jpg
c:\dgwarp\NE2_land_only_laea.tif

But the resulting image looks basically the same as the input,
definitely not like LAEA should look. gdalinfo on the output image
shows strange corner coordinates:
Driver: GTiff/GeoTIFF
Files: NE2_land_only_laea.tif
Size is 16166, 8168
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",0],
    PARAMETER["longitude_of_center",15],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-1665206.343060958000000,90.180212867784576)
Pixel Size = (0.022078666990796,-0.022078666990796)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-1665206.343,      90.180) (  0d 0'5.82"W,  0d 0'2.91"N)
Lower Left  (-1665206.343,     -90.158) (  0d 0'5.82"W,  0d 0'2.91"S)
Upper Right (-1664849.419,      90.180) (  0d 0'5.82"E,  0d 0'2.91"N)
Lower Right (-1664849.419,     -90.158) (  0d 0'5.82"E,  0d 0'2.91"S)
Center      (-1665027.881,       0.011) (  0d 0'0.00"W,  0d 0'0.00"N)
Band 1 Block=16166x1 Type=Byte, ColorInterp=Red
Band 2 Block=16166x1 Type=Byte, ColorInterp=Green
Band 3 Block=16166x1 Type=Byte, ColorInterp=Blue

What am I missing?
From jluis at ualg.pt  Sun Jan  4 16:00:50 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan  4 16:00:57 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>
Message-ID: <49612382.8040801@ualg.pt>

Alex Bernstein wrote:
> Hi all,
> 
> Sorry for a newbie question. I've been reading this list and searching
> elsewhere for a few days now to try to figure this out, but I'm still
> missing something. I need to reproject a map from Plate Caree
> projection to Lambert Azimuthal Equal Area projection centered on
> 0N,15E with gdalwarp. I'm using a Natural Earth II map from
> <http://www.shadedrelief.com/natural2/>. The map
> <http://www.nacis.org/data/NE2/NE2_land_only.jpg> is 16200x8100
> pixels, plate caree, WGS84. It also has a world file
> <http://www.shadedrelief.com/natural2/images/world_16000.zip> with
> following information.
>           0.02222222222222
>           0.00000000000000
>           0.00000000000000
>           -0.02222222222222
>           -180.00000000000000
>           90.00000000000000

Alex,

The world file name must follow the conventions. If your file is called NE2_land_only.jpg
than the world file name must be either NE2_land_only.jgw or NE2_land_only.wld

And, humm, there is much sea water on that "..._land_only" image

Joaquim Luis
From pofig37 at gmail.com  Sun Jan  4 16:36:48 2009
From: pofig37 at gmail.com (Alex Bernstein)
Date: Sun Jan  4 16:36:50 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <49612382.8040801@ualg.pt>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>
	<49612382.8040801@ualg.pt>
Message-ID: <bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>

On Sun, Jan 4, 2009 at 11:00 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> Alex,
>
> The world file name must follow the conventions. If your file is called
> NE2_land_only.jpg
> than the world file name must be either NE2_land_only.jgw or
> NE2_land_only.wld

Joaquim, renaming the world file to NE2_land_only.jgw was one of first
things I've done, sorry I forgot to mention that. So it's not reason
for the problems I'm having with reprojection.

The coordinates in world file are specified in degrees, is this how it
supposed to be, or do I need to pass any switches to gdalwarp to
indicate that?
From jluis at ualg.pt  Sun Jan  4 18:05:09 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan  4 18:05:14 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>	
	<49612382.8040801@ualg.pt>
	<bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>
Message-ID: <496140A5.3050801@ualg.pt>

Alex Bernstein wrote:
> On Sun, Jan 4, 2009 at 11:00 PM, Joaquim Luis <jluis@ualg.pt> wrote:

> Joaquim, renaming the world file to NE2_land_only.jgw was one of first
> things I've done, sorry I forgot to mention that. So it's not reason
> for the problems I'm having with reprojection.
> 
> The coordinates in world file are specified in degrees, is this how it
> supposed to be, or do I need to pass any switches to gdalwarp to
> indicate that?

Alex,

Sorry, I don't know. Normally "Lambert Azimuthal Equal Area" should take two
standard parallels, but it makes no difference here. I tried

gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +datum=WGS84"
-t_srs "+proj=laea +lat_1=20n +lat_2=60n" -co TFW=YES NE2_land_only.jpg NE2_land_only_laea.tif

which reports
...
Upper Left  (-180.0111111,  89.4085425) (  0d 0'5.82"W,  0d 0'2.91"N)
Lower Left  (-180.0111111, -89.3968263) (  0d 0'5.82"W,  0d 0'2.91"S)
Upper Right ( 179.9964220,  89.4085425) (  0d 0'5.82"E,  0d 0'2.91"N)
Lower Right ( 179.9964220, -89.3968263) (  0d 0'5.82"E,  0d 0'2.91"S)
Center      (  -0.0073446,   0.0058581) (  0d 0'0.00"W,  0d 0'0.00"N)

but the file is not reprojected either.

I don't know if it is related but I found many instances where gdalwarp fails
on global files. I reported that twice, last one on ticket
http://trac.osgeo.org/gdal/ticket/2305
but unfortunately it didn't deserve any attention.

From pofig37 at gmail.com  Sun Jan  4 18:25:17 2009
From: pofig37 at gmail.com (Alex Bernstein)
Date: Sun Jan  4 18:25:20 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <496140A5.3050801@ualg.pt>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>
	<49612382.8040801@ualg.pt>
	<bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>
	<496140A5.3050801@ualg.pt>
Message-ID: <bf69017a0901041525r5c8c9b04r22041b9c5d91ec4@mail.gmail.com>

Joaquim,

Thanks for trying to help. I'm actually just interested in the map of
Africa from this global map. May be I'll try to figure out gdal
commands to crop and transform just the relevant region.

--Alex

On Mon, Jan 5, 2009 at 1:05 AM, Joaquim Luis <jluis@ualg.pt> wrote:
> Alex Bernstein wrote:
>>
>> On Sun, Jan 4, 2009 at 11:00 PM, Joaquim Luis <jluis@ualg.pt> wrote:
>
>> Joaquim, renaming the world file to NE2_land_only.jgw was one of first
>> things I've done, sorry I forgot to mention that. So it's not reason
>> for the problems I'm having with reprojection.
>>
>> The coordinates in world file are specified in degrees, is this how it
>> supposed to be, or do I need to pass any switches to gdalwarp to
>> indicate that?
>
> Alex,
>
> Sorry, I don't know. Normally "Lambert Azimuthal Equal Area" should take two
> standard parallels, but it makes no difference here. I tried
>
> gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +datum=WGS84"
> -t_srs "+proj=laea +lat_1=20n +lat_2=60n" -co TFW=YES NE2_land_only.jpg
> NE2_land_only_laea.tif
>
> which reports
> ...
> Upper Left  (-180.0111111,  89.4085425) (  0d 0'5.82"W,  0d 0'2.91"N)
> Lower Left  (-180.0111111, -89.3968263) (  0d 0'5.82"W,  0d 0'2.91"S)
> Upper Right ( 179.9964220,  89.4085425) (  0d 0'5.82"E,  0d 0'2.91"N)
> Lower Right ( 179.9964220, -89.3968263) (  0d 0'5.82"E,  0d 0'2.91"S)
> Center      (  -0.0073446,   0.0058581) (  0d 0'0.00"W,  0d 0'0.00"N)
>
> but the file is not reprojected either.
>
> I don't know if it is related but I found many instances where gdalwarp
> fails
> on global files. I reported that twice, last one on ticket
> http://trac.osgeo.org/gdal/ticket/2305
> but unfortunately it didn't deserve any attention.
>
>
From jluis at ualg.pt  Sun Jan  4 18:44:25 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan  4 18:44:30 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <bf69017a0901041525r5c8c9b04r22041b9c5d91ec4@mail.gmail.com>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>	
	<49612382.8040801@ualg.pt>	
	<bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>	
	<496140A5.3050801@ualg.pt>
	<bf69017a0901041525r5c8c9b04r22041b9c5d91ec4@mail.gmail.com>
Message-ID: <496149D9.2080408@ualg.pt>

Alex Bernstein wrote:
> Joaquim,
> 
> Thanks for trying to help. I'm actually just interested in the map of
> Africa from this global map. May be I'll try to figure out gdal
> commands to crop and transform just the relevant region.

That will work fine. I just tried with Mirone and checked against GMT
coastlines and the result is quite satisfactory.
From pofig37 at gmail.com  Sun Jan  4 19:06:29 2009
From: pofig37 at gmail.com (Alex Bernstein)
Date: Sun Jan  4 19:06:31 2009
Subject: [gdal-dev] help with gdalwarp
In-Reply-To: <496149D9.2080408@ualg.pt>
References: <bf69017a0901041144n56062ed5q968496ac0373cef@mail.gmail.com>
	<49612382.8040801@ualg.pt>
	<bf69017a0901041336o3800a00ej96dacc1991518d7e@mail.gmail.com>
	<496140A5.3050801@ualg.pt>
	<bf69017a0901041525r5c8c9b04r22041b9c5d91ec4@mail.gmail.com>
	<496149D9.2080408@ualg.pt>
Message-ID: <bf69017a0901041606r43610758u567315fd75fdc1ec@mail.gmail.com>

Seems to have worked! I used:

>gdal_translate -a_srs "+proj=longlat +datum=wgs84" -projwin -30 45 60 -45 -co TFW=YES -co INTERLEAVE=PIXEL -of Gtiff source_images\NE2_land_only.jpg test.tif
>gdalwarp -t_srs "+proj=laea +lat_0=0 +lon_0=15 +x_0=0 +y_0=0" -r lanczos -co INTERLEAVE=PIXEL -co TFW=YES -of GTiff test.tif test2.tif

The result looks like LAEA. I needed to change projection to make it
match another map that I had. Will check how good the map is now.

--Alex
From m_p_wilcox at yahoo.co.uk  Mon Jan  5 12:01:31 2009
From: m_p_wilcox at yahoo.co.uk (Mark Wilcox)
Date: Mon Jan  5 12:01:35 2009
Subject: [gdal-dev] Symbian Porting Issues
References: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
	<494BC687.5050207@pobox.com>
Message-ID: <822818.52548.qm@web25003.mail.ukl.yahoo.com>

Hi,

First off, I must congratulate Frank and all the GDAL contributors on producing a fantastically portable library!  With just 2 days of effort starting from basically zero knowledge of GDAL I've got the core running and many of the raster formats building for Symbian OS.  I've even tested JPEGs and GeoTIFFs with a simple viewer application in the Symbian emulator.

A lot of tidying and testing is still required plus the vector formats for OGR (although the core OGR functionality is building already) and maybe the utilities and python bindings.  I took a look at the code and decided the fastest approach would probably be to try to build everything directory by directory, excluding things with external dependencies and non-trivial errors for future examination.  As such I'm probably building some things I shouldn't be but I'll look at a proper configuration once I've got my new laptop setup to dual-boot Linux with Vista (I'm much more familiar with the Linux build environment, despite being forced to use Windows for Symbian stuff at the moment).

Python is available on Symbian and Nokia have just released a new version (upgrading to 2.5.2 from 2.2) so I'll look and see if it's feasible to build and run the autotest stuff too as soon as I have time - is there much C/C++ test code other than that though?

Most of the issues I came across were related to the Nokia compiler (ex-Metrowerks) for the windows emulator environment being more fussy about implicit casts than anything else GDAL is built with.  However, in the process of porting I've come across some issues that may be worth further investigation by those more knowledgeable about the code base:

1) For some reason inflateCopy() is missing from the Symbian zlib port, even though it claims to be version 1.2.3 (existing library shipped in device firmware, not the internal copy in GDAL) at the moment I'm just excluding cpl_vsil_gzip.cpp from my build.  I'll try to get Nokia/Symbian to fix this and include the function in future releases.  I've seen some archive post that suggests maybe the same functionality could have been achieved without this dependency to support older versions of zlib though... is it worth reconsidering that option for Symbian support or is the gzip support not so commonly used?

2) /frmts/hfa/addtiffo_src/rawblockedimage.cpp contains:
#ifndef _WIN32
#  include <unistd.h>
#endif
should this be #ifndef WIN32 or possibly better yet #ifdef HAVE_UNISTD_H?
Currently the build will fail for a Symbian emulator because _WIN32 is defined but you're effectively cross-compiling to an odd hybrid environment.

3) The zlib library also uses a WIN32 define for portablility, this caused clashes in several places which I've temporarily fixed by changing the order of the includes (so that zlib.h comes after any gdal headers).  This is very unsatisfactory but I'm not sure what the real solution is.  One option would be to get the Symbian port of zlib fixed so it doesn't export this definition to the world in it's public header, another would be to change the cpl_port.h to undef WIN32 before re-checking for itself.  I thought possibly the latter since zlib isn't updated so often?


4) There are a couple of symbol clashes at link time between /frmts/hfa/geoextra.c & /frmts/gtiff/libgeotiff/geo_extra.c.  I assume that one of them is not normally built?  I've excluded the hfa version from the build for now but is there a case for removing one permanently, or moving the functions to a common location shared by both drivers?  The implementations are slightly different.

5) Symbian doesn't have an lfind() implementation at the moment.  I've borrowed the one from the full version of libtiff's port directory but wondered if there might be a case for including a version more permanently in GDAL, either with the internal copy of libtiff or perhaps in the porting layer?

Does anyone have any comments or suggestions on any of the above issues?

Does anyone have any experience using the autotest in a cross-compilation environment? (Maybe I need to talk to Mateusz about that?)

Apologies for the long mail.

Best regards,
Mark


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090105/0a4f6691/attachment.html
From warmerdam at pobox.com  Mon Jan  5 14:02:34 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  5 14:02:54 2009
Subject: [gdal-dev] Symbian Porting Issues
In-Reply-To: <822818.52548.qm@web25003.mail.ukl.yahoo.com>
References: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
	<494BC687.5050207@pobox.com>
	<822818.52548.qm@web25003.mail.ukl.yahoo.com>
Message-ID: <4962594A.90002@pobox.com>

Mark Wilcox wrote:
> 1) For some reason inflateCopy() is missing from the Symbian zlib port, 
> even though it claims to be version 1.2.3 (existing library shipped in 
> device firmware, not the internal copy in GDAL) at the moment I'm just 
> excluding cpl_vsil_gzip.cpp from my build.  I'll try to get 
> Nokia/Symbian to fix this and include the function in future releases.  
> I've seen some archive post that suggests maybe the same functionality 
> could have been achieved without this dependency to support older 
> versions of zlib though... is it worth reconsidering that option for 
> Symbian support or is the gzip support not so commonly used?

Mark,

I have no strong opinion on this.  I presume things work fine if the
internal gdal/frmts/zlib is used, right?

> 2) /frmts/hfa/addtiffo_src/rawblockedimage.cpp contains:
> #ifndef _WIN32
> #  include <unistd.h>
> #endif
> should this be #ifndef WIN32 or possibly better yet #ifdef HAVE_UNISTD_H?
> Currently the build will fail for a Symbian emulator because _WIN32 is 
> defined but you're effectively cross-compiling to an odd hybrid environment.

The addtiffo_src stuff is not used except by img2tif.  It should not be
included in normal GDAL builds.

> 3) The zlib library also uses a WIN32 define for portablility, this 
> caused clashes in several places which I've temporarily fixed by 
> changing the order of the includes (so that zlib.h comes after any gdal 
> headers).  This is very unsatisfactory but I'm not sure what the real 
> solution is.  One option would be to get the Symbian port of zlib fixed 
> so it doesn't export this definition to the world in it's public header, 
> another would be to change the cpl_port.h to undef WIN32 before 
> re-checking for itself.  I thought possibly the latter since zlib isn't 
> updated so often?

I'm not sure I understand this issue.  If zlib.h defines WIN32 on a
platform that GDAL does not really consider WIN32 then I suppose we
ought to correct the definition right after including zlib.h everywhere
it is included (hopefully not too many places).

> 4) There are a couple of symbol clashes at link time between 
> /frmts/hfa/geoextra.c & /frmts/gtiff/libgeotiff/geo_extra.c.  I assume 
> that one of them is not normally built?  I've excluded the hfa version 
> from the build for now but is there a case for removing one permanently, 
> or moving the functions to a common location shared by both drivers?  
> The implementations are slightly different.

gdal/frmts/hfa/geoextra.c is not normally built into GDAL.  It is present only
for use with the img2tif utility.  I will take the liberty of clearing away
the img2tiff stuff which is no longer well maintained, and is not really used.

> 5) Symbian doesn't have an lfind() implementation at the moment.  I've 
> borrowed the one from the full version of libtiff's port directory but 
> wondered if there might be a case for including a version more 
> permanently in GDAL, either with the internal copy of libtiff or perhaps 
> in the porting layer?

I'm ambivelent on this.  I think it is sufficient to conditionally compile
in an lfind() implementation for the Symbian and I wouldn't mind this
living somewhere appropriate in the GDAL tree (perhaps gdal/port).

Congratulations on the Symbian work.  Feel free to submit tickets with
suggested changes in support of the platform.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Jan  5 14:30:30 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  5 14:30:41 2009
Subject: [gdal-dev] Symbian Porting Issues
In-Reply-To: <822818.52548.qm@web25003.mail.ukl.yahoo.com>
References: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
	<494BC687.5050207@pobox.com>
	<822818.52548.qm@web25003.mail.ukl.yahoo.com>
Message-ID: <200901052030.31571.even.rouault@mines-paris.org>

Le Monday 05 January 2009 18:01:31 Mark Wilcox, vous avez ?crit?:
> Hi,
>
> First off, I must congratulate Frank and all the GDAL contributors on
> producing a fantastically portable library!  With just 2 days of effort
> starting from basically zero knowledge of GDAL I've got the core running
> and many of the raster formats building for Symbian OS.  I've even tested
> JPEGs and GeoTIFFs with a simple viewer application in the Symbian
> emulator.
>

Good to hear!

>
> Python is available on Symbian and Nokia have just released a new version
> (upgrading to 2.5.2 from 2.2) so I'll look and see if it's feasible to
> build and run the autotest stuff too as soon as I have time - is there much
> C/C++ test code other than that though?

There is some C/C++ code that lies in autotest/cpp directory, but it is not 
much maintened and used AFAIK. I would consider the python autotests as the 
reference test system for GDAL. They are a test for the python bindings of 
course, but also for the core functionnality and the drivers. Last time I 
measured, their coverage rate was 42.8% of the compiled code of my build 
(getting an extra .1% requires a non trivial amount of work ;-)). For GDAL 
and OGR core, port library, and tested drivers, it is typically between 60% 
and 80%. Non-tested drivers make the overall figure drop.

>
> 1) For some reason inflateCopy() is missing from the Symbian zlib port,
> even though it claims to be version 1.2.3 (existing library shipped in
> device firmware, not the internal copy in GDAL) at the moment I'm just
> excluding cpl_vsil_gzip.cpp from my build.  I'll try to get Nokia/Symbian
> to fix this and include the function in future releases.  I've seen some
> archive post that suggests maybe the same functionality could have been
> achieved without this dependency to support older versions of zlib
> though... is it worth reconsidering that option for Symbian support or is
> the gzip support not so commonly used?

./configure should normally default to internal zlib if it doesn't find 
inflateCopy symbol. But you could also discard cpl_vsil_gzip.cpp as it is a 
new functionnality to GDAL 1.6 and is somehow optionnal. (People can always 
uncompress their data at hand before running GDAL on them)
As far as not requiring inflateCopy() for the cpl_vsil_gzip functionnality, 
that could have been achieved, but the functionnality would not operate in a 
very efficient way then, so I've not strong motivation to support that.

Best regards,
Even
From jluis at ualg.pt  Mon Jan  5 17:12:50 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan  5 17:12:56 2009
Subject: [gdal-dev] Memory fragmentation and memory consumption when
	warping with GCPs
In-Reply-To: <493E8670.2090006@ualg.pt>
References: <493E8670.2090006@ualg.pt>
Message-ID: <496285E2.8060902@ualg.pt>

Joaquim Luis wrote:

> After that I wrote a MEX version of gdaltransform to be able to 
> reproject points using GCPs.
> This MEX works but it revealed serious problems. At least under Matlab.
> Matlab requires not only LOTS of memory but also that the available 
> memory is continuous.
> For example, if one needs a variable of 100 Mb the system needs to have 
> a chunk of free memory
> not less than 100 Mb. Two chunks of 99 and 1 Mb are not enough as we'll 
> have an out memory error.
> 
> Now, I just realize that when I call a MEX that links against gdal.dll 
> the memory immediately becomes
> highly fragmented. As an example of my current case, I had the largest 
> chunk of free memory
> of 1070 Mb and after loading gdal.dll the largest chunk become 540 Mb

Hello,

I follow up on the memory fragmentation issue.
I found that the fragmentation is caused by the ECW driver. If compiled without
that driver, GDAL doesn't provoke any sensible fragmentation.

Joaquim Luis
From m_p_wilcox at yahoo.co.uk  Tue Jan  6 13:06:12 2009
From: m_p_wilcox at yahoo.co.uk (Mark Wilcox)
Date: Tue Jan  6 13:06:15 2009
Subject: [gdal-dev] Symbian Porting Issues
References: <851526.98259.qm@web25007.mail.ukl.yahoo.com>
	<494BC687.5050207@pobox.com>
	<822818.52548.qm@web25003.mail.ukl.yahoo.com>
	<4962594A.90002@pobox.com>
Message-ID: <275416.17272.qm@web25006.mail.ukl.yahoo.com>

Thanks Frank & Even,

Following Even's comments I think I'll just leave the gzip functionality out until we get the platform zlib fixed.  I'll also ignore the img2tif stuff assuming it will disappear in a future release anyway.  A conditionally compiled lfind in gdal/port sounds ideal.  I've got a crazy schedule for the next few weeks but as soon as I get the chance I'll submit some tickets.

For the issue where zlib.h defines WIN32 I can do:
#ifdef SYMBIAN
#  undef WIN32
#endif
in the 2 or 3 places where this is an issue at present if that's what you'd prefer?  My thought was just that this doesn't actually resolve the root of the problem and it might be better to do something more central.

Symbian has a windows based emulator that actually uses windows threads to emulate Symbian processes and runs native x86 instructions.  The proper simulator environments like qemu that run ARM code in a virtual machine on an x86 processor were too slow when this was created.  A qemu-based simulator is in the works as an alternative/replacement.  Until then, we need to run emulator builds on windows and in this environment _WIN32 is defined by the compiler and may be used by some of the low-level code, this causes zlib.h to define WIN32 and the same used to happen in cpl_port.h except that I've extended the _WIN32_WCE exception to include Symbian as well:

/* ==================================================================== */
/*      We will use SYMBIAN as a standard Symbian OS define.            */
/* ==================================================================== */
#ifdef __SYMBIAN32__
#  define SYMBIAN
/* could add #undef WIN32 here to be safe */
#endif

/* ==================================================================== */
/*      We will use WIN32 as a standard windows define.                 */
/* ==================================================================== */
/* very tempting to clean this section up by doing #undef WIN32 here and merging the others */
#if defined(_WIN32) && !defined(WIN32) && !defined(_WIN32_WCE) && !defined(SYMBIAN)
#  define WIN32
#endif

#if defined(_WINDOWS) && !defined(WIN32) && !defined(_WIN32_WCE) && !defined(SYMBIAN)
#  define WIN32
#endif


The only thing I'm unsure about is whether there could be a case where we legitimately want to define WIN32 and _WIN32 or _WINDOWS will not be defined?

@Even, Symbian doesn't have any kind of autotools, autoconf, cmake etc.  There's no support for configure scripts, it's all pretty manual - hence not getting appropriate build flags by default and building things that shouldn't be included on my first go. :-(   I'll definitely do all I can to get the python bindings and autotest running though as that seems like the only viable option for validating my port without writing a whole new test suite!

Best regards,
Mark


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090106/99d187bd/attachment.html
From pcreso at pcreso.com  Tue Jan  6 16:09:55 2009
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Tue Jan  6 16:16:39 2009
Subject: [gdal-dev] ogr2ogr problem
Message-ID: <244169.65556.qm@web33204.mail.mud.yahoo.com>

Hi,

My apologies for introducing problems from an old version, but it is what is installed & I can't have it changed for weeks at least....

The problem is with ogr2ogr in version 1.3.1 of GDAL under FreeBSD.

I need to generate GMT files for an online mapping application generating publication ready maps from data held in a Postgis database. This version of ogr predates GMT support. I figured therefore that the simple needs of this application could be met by generating Mapinfo MID/MIF files with ogr2ogr instead, and then conver these to GMT, which is pretty simple in this instance.

My problem now is that the coordinate list in my MIF file bears no resemblance to the data in the database.

Sample data is:

db_trawl=# select station_no, astext(trackline) from station;

station_no |                       astext
------------+-----------------------------------------------------
         16 | LINESTRING(174.37767 -73.0465,174.358 -73.0535)
         32 | LINESTRING(170.1775 -74.5895,168.96917 -74.64633)
         37 | LINESTRING(166.98883 -74.746,166.99367 -74.74633)
         41 | LINESTRING(167.01317 -74.72617,167.025 -74.7105)
         73 | LINESTRING(170.33333 -76.59233,176.4625 -76.18183)
         84 | LINESTRING(176.802 -76.60233,176.79417 -76.60217)



An example ogr2ogr command is:

ogr2ogr -f "Mapinfo File" -dsco "FORMAT=MIF" -nln sql ttt 'PG:host=wms dbname=db_trawl user=woodb' -sql "select station_no, trackline from station"   

The MIF file looks like:


more ./ttt/sql.mif
Version 300
Charset "Neutral"
Delimiter ","
Columns 1
  station_no Integer
Data

Pline 4326
-3.491895524626381e+151 -1.043410953990767e+131
-1.149081422917241e-17 -2.086868818946656e-254
1.594160455862601e-314 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
....


The trackline colummn comprises linestrings with only start & end points, not the thousands of vertices ogr2ogr outputs, and the values of the coordinates are also nowhere near the correct ones.


So, some questions, can anyone suggest a way forward here? Is the problem known, & if so, is it with the Postgres driver retrieving bad data, or the Mapinfo driver writing bad data?

(short of the obvious upgrade GDAL - I prototyped on v1.5.1 under Linux & all this works perfectly, both the GMT write & the MID/MIF workaround)


Thanks,

  Brent Wood
From warmerdam at pobox.com  Tue Jan  6 16:50:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  6 16:50:58 2009
Subject: [gdal-dev] ogr2ogr problem
In-Reply-To: <244169.65556.qm@web33204.mail.mud.yahoo.com>
References: <244169.65556.qm@web33204.mail.mud.yahoo.com>
Message-ID: <4963D231.7070409@pobox.com>

pcreso@pcreso.com wrote:
> An example ogr2ogr command is:
> 
> ogr2ogr -f "Mapinfo File" -dsco "FORMAT=MIF" -nln sql ttt 'PG:host=wms dbname=db_trawl user=woodb' -sql "select station_no, trackline from station"   
> 

Brent,

I'm not sure what is going on, but I'd suggest you try :

   ogrinfo 'PG:...' -sql "select station_no, trackline from station"

to see how OGR sees the result from the SQL statement.  If it is all
goofed up, then try just using the table directly, instead of issuing
custom SQL and see if that helps at all.

If the PG results are coming back fine, then it must be an issue with the
mapinfo writer but this is pretty hard to imagine.  I do wonder if your
2.5D geometries might be throwing something for a loop.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pcreso at pcreso.com  Tue Jan  6 17:27:21 2009
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Tue Jan  6 17:27:23 2009
Subject: [gdal-dev] ogr2ogr problem
In-Reply-To: <4963D231.7070409@pobox.com>
Message-ID: <606644.38339.qm@web33206.mail.mud.yahoo.com>

Hi Frank,

My current workaround is to use the GML driver instead of Mapinfo (don't extract the geometries as geometries), then grep/sed/tr the GML file to get a GMT one. This does not actually use ogr2ogr to get the geometries, but returns them as a field with the X & Y coords in a space separated string.

As this works for now, and later versions of ogr work perfectly, pending an upgrade to the whole server (hardware/OS/apps, etc) I don't want to waste too much on this issue.


This would be similar to using your suggested ogrinfo option, which could be parsed much as the GML:

ogrinfo 'PG:host=wms dbname=db_trawl user=woodb' -sql "select station_no as fielda, x(startpoint(trackline))||' '||y(startpoint(trackline)) as fieldb, x(endpoint(trackline))||' '||y(endpoint(trackline)) as fieldc from station" 

gives:
INFO: Open of `PG:host=wms dbname=db_trawl user=woodb'
using driver `PostgreSQL' successful.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 315
Layer SRS WKT:
(unknown)
fielda: Integer (0.0)
fieldb: String (0.0)
fieldc: String (0.0)
OGRFeature(sql_statement):0
  fielda (Integer) = 16
  fieldb (String) = 174.37767 -73.0465
  fieldc (String) = 174.358 -73.0535

OGRFeature(sql_statement):1
  fielda (Integer) = 32
  fieldb (String) = 170.1775 -74.5895
  fieldc (String) = 168.96917 -74.64633

...


I think my geometries are all 2D, not 2.5D; from /d of the underlying table (unless I'm misunderstanding something):

Check constraints:
    "enforce_dims_endp" CHECK (ndims(endp) = 2)
    "enforce_dims_fulltrack" CHECK (ndims(fulltrack) = 2)
    "enforce_dims_startp" CHECK (ndims(startp) = 2)
    "enforce_dims_trackline" CHECK (ndims(trackline) = 2)



If I use your ogrinfo suggestion with a geometry column, it gets very lost & core dumps, suggesting the problem is with ogr reading the Postgis geometries somewhere, as below:

> ogrinfo 'PG:host=wms dbname=db_trawl user=woodb' -sql "select station_no, trackline from station"
INFO: Open of `PG:host=wms dbname=db_trawl user=woodb'
using driver `PostgreSQL' successful.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 315
Extent: (-5717190450301640785970682800244215736945715316512428951197211575738106802013888901421664366269233555558457342954974172221687531082569199376261222136447409698108740094360547229053971119731381878561004632469852618902278828573782927974207336510241341037769478970725094098994178086652986735885695745332871168.000000, -9871135095353366917847063186847407682388671842598713063065415824075662651770097930171516163014958694292472190782907640136317191274480220040216468228691291341349835566608217461232482779370461343605893205826545378596837338667087445935757592416299456975387985504062928627793559412582260514381297518650664681472.000000) - (1277337798102220679460078536343576682283168806678692826561630235159815610796137002102373097915286848697179165980283196956142360312571899942873069950902292109004803630688694832971224141724392311796898148316508111355731718691277357048888867371806748260804557380400483866651109436947420166353846272.000000,
 5486124089231092234727215697548580807398821068064494117442730014066340285828415568284781387371069552055991069241456364266374806234938889971978269653828033691802760405705186914144995030772391558383082593756024124155774550718318308840030730608253965942872972835827726072782531552189201291990798214723796992.000000)
Layer SRS WKT:
(unknown)
station_no: Integer (0.0)
OGRFeature(sql_statement):0
  station_no (Integer) = 16
Bus error (core dumped)
>                        


Thanks,

   Brent



--- On Wed, 1/7/09, Frank Warmerdam <warmerdam@pobox.com> wrote:

> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: Re: [gdal-dev] ogr2ogr problem
> To: pcreso@pcreso.com
> Cc: gdal-dev@lists.osgeo.org
> Date: Wednesday, January 7, 2009, 10:50 AM
> pcreso@pcreso.com wrote:
> > An example ogr2ogr command is:
> > 
> > ogr2ogr -f "Mapinfo File" -dsco
> "FORMAT=MIF" -nln sql ttt 'PG:host=wms
> dbname=db_trawl user=woodb' -sql "select
> station_no, trackline from station"   
> 
> Brent,
> 
> I'm not sure what is going on, but I'd suggest you
> try :
> 
>   ogrinfo 'PG:...' -sql "select station_no,
> trackline from station"
> 
> to see how OGR sees the result from the SQL statement.  If
> it is all
> goofed up, then try just using the table directly, instead
> of issuing
> custom SQL and see if that helps at all.
> 
> If the PG results are coming back fine, then it must be an
> issue with the
> mapinfo writer but this is pretty hard to imagine.  I do
> wonder if your
> 2.5D geometries might be throwing something for a loop.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
From randre at gmail.com  Tue Jan  6 18:33:28 2009
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Jan  6 18:33:30 2009
Subject: [gdal-dev] gdal2tiles.py and dateline gap
Message-ID: <9c2015090901061533u7f144602qafd492c67dbbc2a0@mail.gmail.com>

I've gotten the map tile output from gdal2tiles.py to work properly with
Tilecache and the results look pretty good.  However, I'm seeing a fairly
large gap in data at the international dateline.  I recall seeing some
discussion about this between Frank and Klokan on the list previously, and
recompiled gdal after editing gdal/alg/gdalwarpoperation.cpp and adding a
larger size to the sampling edge buffer.  This doesn't seem to have helped
though.

Is it possible to create a global tileset with gdal2tiles.py without having
a gap at the dateline?

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090106/56327c3c/attachment-0001.html
From klokan at klokan.cz  Wed Jan  7 02:52:52 2009
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Jan  7 02:52:55 2009
Subject: [gdal-dev] gdal2tiles.py and dateline gap
In-Reply-To: <9c2015090901061533u7f144602qafd492c67dbbc2a0@mail.gmail.com>
References: <9c2015090901061533u7f144602qafd492c67dbbc2a0@mail.gmail.com>
Message-ID: <6e41d95b0901062352g24a18950w7eb8444bcf0a2f6d@mail.gmail.com>

Hi Roger,

the problem is related to the default behavior of GDAL warping core,
which sometimes does not have enough input pixels or has a problem to
calculate correct target extent.

What you can do is to warp your input data into EPSG:900913 by
gdalwarp utility before tiling by gdal2tiles utility.
GDAL2Tiles will not warp the input again, so you have all the warping
totally under your control in such case.

Typically you should use a command like:

gdalwarp -of vrt -t_srs epsg:900913 -wo SOURCE_EXTRA=120 input.tif output.vrt
gdal2tiles output.vrt

The trick is to use correct SOURCE_EXTRA value, which is documented here:
http://www.gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08

I realized that for images which are going out of the bounds of
Spherical Meractor it is better to specify also the cropping  bounds,
for example:

gdalwarp -t_srs epsg:900913 -te -20037508.34 -20037508.34 20037508.34
20037508.34 -wo SOURCE_EXTRA=120 small_world.tif
small_world.google.tif

BTW For anybody interested in seeing the tile bounds of Spherical
Meracator Tiles (Google Maps, etc.) I created a simple mashup with the
documentation. Tile bounds appear when you click the map:
http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/

It would be nice to have an algorithm for calculating how many input
pixels are missing (so how big the SOURCE_EXTRA value should be) -
probably with help of Proj4/OGR.
I can then automatically add such calculated value to the internal
warping functionality of GDAL2Tiles (in the postprocessing of VRT file
which is coming from AutoCreateWarpedVRT function).

FrankW or anybody else: any tips?

More clean of course would be to have it correctly set by default in
the C++ warping core, so the gaps does not appear at all (it appears
also on the command line with gdalwarp utility). But I guess it is
quite problematic to make an general algorithm.
I have found a patch trying to solve this issue for some polar
projections: http://trac.osgeo.org/mapserver/ticket/2765.
Is there any progress in this direction?

Best regards

Klokan

P.S.
The discussion between me and Frank related to this is archived here:
http://openlayers.org/pipermail/tilecache/2008-November/001445.html

On Wed, Jan 7, 2009 at 12:33 AM, Roger Andr? <randre@gmail.com> wrote:
> I've gotten the map tile output from gdal2tiles.py to work properly with
> Tilecache and the results look pretty good.  However, I'm seeing a fairly
> large gap in data at the international dateline.  I recall seeing some
> discussion about this between Frank and Klokan on the list previously, and
> recompiled gdal after editing gdal/alg/gdalwarpoperation.cpp and adding a
> larger size to the sampling edge buffer.  This doesn't seem to have helped
> though.
>
> Is it possible to create a global tileset with gdal2tiles.py without having
> a gap at the dateline?
>
> Thanks,
>
> Roger
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Wed Jan  7 12:35:12 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  7 12:35:25 2009
Subject: [gdal-dev] Motion: GDAL/OGR 1.5.4 Release
Message-ID: <4964E7D0.6090601@pobox.com>

Folks,

I have prepared a 1.5.4 release candidate and posted it to the download area:

   http://download.osgeo.org/gdal/gdal-1.5.4RC1.tar.gz
   http://download.osgeo.org/gdal/gdal154RC1.zip

The release NEWS is:

= GDAL/OGR 1.5.4 =

  * #2462 (HDF5): Fix SUBDATSET numbering from zero to from one.
  * #???? (PG): Fix crash on GetFeature(fid) where fid is invalid.
  * #2732 (JP2KAK): fix ycbcr to rgb converted images in DirectRasterIO
  * #2399 (JPEG2000): Fix handling of images with dimensions not multiple of 256
  * #2757 (CSV): Ignore .csvt files when opening a CSV datasource.
  * #2741 (gdaltindex): Fix handle, memory leak for skipped files.
  * #2724 (VRT): Honour INIT_DEST warp option for warped VRT files.
  * #2724 (VRT): Fix reading of nodata values from XML.
  * #2716 (HFA): Support reading 3rd order XFORMs.
  * #1242 (OGDI): Improve finding PROJ.4 include files for OGDI driver.
  * #2709 (GML): Treat feature class name tests as case sensitive.
  * #2708 (GML): Fix potential buffer overflow in parser.
  * #2688 (python): Fix win32 error handling crash.
  * #2445 (warper): Avoid divide by zero if source size is zero.
  * #2040 (NITF): Add support for RPC00A ordering.
  * #1866 (GPX/KML): Add support for building against expat 1.95.0 to 1.95.7
  * #2699 (GTiff): Avoid calling TIFFFreeDirectory() with old libtiffs.
  * #2690 (Interlis): Support GCC 4.4.
  * #2689 (MRSID): Fix overflow in window calc for very large files.
  * #2659 (SRS): Support Cylindrical Equal Area projections from EPSG.
  * #2474 (Shape): Support writing datetime fields in .dbf
  * #2681 (SRS): Support Mercator_2SP in ValidateProjection().
  * #2679 (JPEG2000): Fix FORMAT option support.
  * #2678 (SRS): Support EXTENSION nodes in WKT.
  * #2645 (GTiff): Fix creation of YCbCr JPEG compressed files.
  * #1484 (PGeo): treat type 50 geometries as SHPT_ARC.
  * #2642 (GTiff): Ensure zip/jpeg quality preserved over crystalize().
  * #1526 (S57): Corrections to handle double type 8211 attributes better.
  * #2629 (MRSID): 64 bit fix in metadata formatting.
  * #1983 (GRASS): Use G_free() instead of free.
  * #2237 (gdalgrid): fix nearest neighbour interpolation regression.
  * #2622 (GTiff): Add mechanism to split up large one block one bit files.
  * #2619 (PG): Allow VACUUM in ExecuteSQL() without a transaction.
  * #2609 (HDF4): Support building with HDF4.2r3.
  * #2615 (warper): Fix support for TPS transformer with negative coordinates.
  * #2428 (shape): Performan fix for organizePolygon() in one outer ring case.


Motion: To promote the GDAL 1.5.4 RC1 release candidate to be our official
GDAL 1.5.4 release.

Everyone is encouraged to test the release candidate and provide feedback.
I'd appreciate votes from PSC members after some testing.  If all goes well
the release could become official Friday afternoon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edomazlicky at gmail.com  Wed Jan  7 18:48:05 2009
From: edomazlicky at gmail.com (Eric Domazlicky)
Date: Wed Jan  7 18:48:08 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
Message-ID: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>

I am developing a tiling application and I was hoping to up the speed a bit
by doing some multithreading. What I want to do is start each of 3
ReadRaster calls in seperate threads (using BeginInvoke delegates), then
wait for them to complete and build my RGB image (using EndInvoke). I am
using the C# wrapper to the GDAL library. This multithreaded approach is
showing clear signs of race conditions, with some of the channels not
appearing, random crashes etc. If I ensure each thread completes before I go
on to read the next Raster Band it works fine.

Is there anyway to make ReadRaster thread-safe? Maybe by disabling caching
which I suspect is the problem.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090107/4aa144e3/attachment.html
From szekerest at gmail.com  Wed Jan  7 19:12:13 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan  7 19:12:17 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
Message-ID: <f3b73b7d0901071612n731bec0oe202d8487fcb78f8@mail.gmail.com>

Eric,

The most performant option I'm aware of is reading the dataset directly into
a bitmap buffer something like:

try
{
        int stride = bitmapData.Stride;
        IntPtr buf = bitmapData.Scan0;

        ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth,
imageHeight, dataType,
        channelCount, bandMap, pixelSpace, stride, 1);
}
finally
{
        bitmap.UnlockBits(bitmapData);
}

In this case there's no internal buffers in the marshalling code used by the
C# wrappers. The only challenge here is to ensure that the bitmap buffer
should have the same structure as the gdal dataset represents. You could
refer to the complete example in the C# wrapper for the details:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetRasterIO.cs
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs

I don't think if triggering multiple reads for different sections in
multiple threads is currently supported by gdal, it might also be driver
dependent how the reads are actually implemented by the drivers, however you
might anyway try defining separate Dataset objects for the different when
performing the read operations, but there might be locks in different places
causing the operations to be serialized in effect.

Best regards,

Tamas



2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>

> I am developing a tiling application and I was hoping to up the speed a bit
> by doing some multithreading. What I want to do is start each of 3
> ReadRaster calls in seperate threads (using BeginInvoke delegates), then
> wait for them to complete and build my RGB image (using EndInvoke). I am
> using the C# wrapper to the GDAL library. This multithreaded approach is
> showing clear signs of race conditions, with some of the channels not
> appearing, random crashes etc. If I ensure each thread completes before I go
> on to read the next Raster Band it works fine.
>
> Is there anyway to make ReadRaster thread-safe? Maybe by disabling caching
> which I suspect is the problem.
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/118b6122/attachment.html
From ben.s.carlson at gmail.com  Thu Jan  8 01:28:06 2009
From: ben.s.carlson at gmail.com (santoshamb)
Date: Thu Jan  8 01:28:08 2009
Subject: [gdal-dev] ogr2ogr shape file extent reprojection
Message-ID: <b7368824-3966-4edd-aff8-1dcd949a73e3@r10g2000prf.googlegroups.com>

Hi, I hope this is the right forum to post questions about ogr2ogr.

I'm currently working with shape file data sets that require me to
convert from NAD83 12N (26912) to WGS84 (4326).

At first I used ogr2ogr to convert my data, but eventually I started
using the .Net ProjNET library.  That is when I noticed something
interesting. When converting LineStrings, ogr2ogr and ProjNet yield
basically the same results up to 9 or so decimal places which is just
fine for accuracy.  Where I began to see a lot of differences between
the two was when I looked at the extent fields in the shapefile
header.

I compared the conversion from the original using ogr2ogr, projNet,
and an online utility. Lets look at my first dataset, hiking trails at
Glacier National Park.  As you can see, projNet and the applet agree
on the conversion, but ogr2ogr does not.  Any idea what might be going
on?

original
extent_minXY: POINT(246070.71157537602 5348294.8992404966)
extent_maxXY: POINT(335299.17115368985 5433384.3857774651)

Converted by ogr2ogr
extent_minXY: POINT(-114.47207378171277 48.2590055638581)
extent_maxXY: POINT(-113.22704302237705 49.001065911553816)

Converted by projNet
extent_minXY: POINT(-114.42000093021804 48.236968455873082)
extent_maxXY: POINT(-113.25327377636528 49.031328561125349)

Converted by applet
extent_minXY: POINT(-114.420001               48.236968 )
extent_maxXY: POINT(-113.253274		 49.031329 )

I'm seeing similar results with other shape files, I'll post the
details if anybody is interested.

The data set can be found here:
http://science.nature.nps.gov/nrdata/datastore.cfm?ID=45586

The online utility can found here:
http://home.hiwaay.net/~taylorc/toolbox/geodesy/datumtrans/

NettopologySuite (which uses ProjNet) can be found here:
http://code.google.com/p/nettopologysuite/

Thanks for the help,

Ben
From mail at carl-johansson.com  Thu Jan  8 06:05:11 2009
From: mail at carl-johansson.com (carlj88)
Date: Thu Jan  8 06:05:13 2009
Subject: [Gdal-dev] Using mgrs.h in NITF
Message-ID: <1231412711884-2127339.post@n2.nabble.com>


I want to convert geodetic coordinates to MGRS using the code from
frmts/nitf/mgrs.c in my QT-application. How do I access these functions from
my c++ code? Tried to use 'include "mgrs.h"' but then I don't know how to
reference to the function.

I would be most greatful since the web has about nothing to offer on this
issue.

Carl Johansson
-- 
View this message in context: http://n2.nabble.com/Using-mgrs.h-in-NITF-tp2127339p2127339.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From cui_chan at hotmail.com  Thu Jan  8 07:47:03 2009
From: cui_chan at hotmail.com (chen cui)
Date: Thu Jan  8 07:48:05 2009
Subject: [gdal-dev] used the GDAL/GEOS libraries (.dll and .lib) in my
 visual studio .net C++ project
Message-ID: <BLU149-W691F2339940DA19FAF1413EBDC0@phx.gbl>


Hello,
I have successfully used the GDAL/GEOS libraries (.dll and .lib) in my VC++ project. I just set the directory of where the gdal libraries are saved under the project property setting page - Additional Library Directories' and include directories. But when i run the debugging mode of my project,the libraries are not found: gdal15.dll, geos_c.dll,geos_c_fw.dll even those files are saved under the library directory. After i copied those file into Windows/system32, then it worked well. Is there any other way to solve this problem without saving the .dll files in the directory windows/system32?my computer operation system is windowsxp.thank you for your kind help! best regards! Cui
_________________________________________________________________
More than messages?check out the rest of the Windows Live?.
http://www.microsoft.com/windows/windowslive/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/ea8ce585/attachment.html
From 2voodoo at gmx.de  Thu Jan  8 08:52:19 2009
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Thu Jan  8 08:52:31 2009
Subject: [gdal-dev] used the GDAL/GEOS libraries (.dll and .lib) in my
	visual studio .net C++ project
In-Reply-To: <BLU149-W691F2339940DA19FAF1413EBDC0@phx.gbl>
References: <BLU149-W691F2339940DA19FAF1413EBDC0@phx.gbl>
Message-ID: <49660513.4080304@gmx.de>

Hi Chen,
> I just set the directory of where the gdal libraries are saved under
> the project property setting page - Additional Library Directories'
> and include directories. 
This correct, but the directories are stored there per configuration. So
make sure you put in the directory for release AND for debug build or
make set the configuration for "all configurations". But since it seems
that you can compile, but not successfully run, your app this might not
be an issue here.

What exactly do you imply when telling us that it does not work in debug
mode? Does it mean in Release mode does it work?
> But when i run the debugging mode of my project, the libraries are not
> found: gdal15.dll, geos_c.dll,geos_c_fw.dll even those files are saved
> under the library directory. After i copied those file into
> Windows/system32, then it worked well.
As far as I know you could also place the libraries in the path of your
executable. I don't know any other possibilities, but would be also
interested if one could set additional search paths for runime lookup.
Does it work if you do this?

Regards,
Tom
From Sjur.A.Kolberg at sintef.no  Thu Jan  8 10:14:57 2009
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Thu Jan  8 10:16:04 2009
Subject: [gdal-dev] used the GDAL/GEOS libraries (.dll and .lib) in my
	visual studio .net C++ project
In-Reply-To: <BLU149-W691F2339940DA19FAF1413EBDC0@phx.gbl>
References: <BLU149-W691F2339940DA19FAF1413EBDC0@phx.gbl>
Message-ID: <72251B925CE10A478606EEAC6AA683BE06BACE3206@SINTEFEXMBX01.sintef.no>


Cui,

While you need to tell Visual Studio where to find the GDAL .h files (for compilation) and the .lib files (for linking), it is Windows you need to tell where to find the .dll files for running your executable.

Since it is Windows that needs to find the dll's, setting their address in VS doesn't help much. Windows will look for the necessary dll's in the location of your executable (by default \Debug and \Release, respectively), the system32 directory, or any directory that is mentioned in your PATH variable (Control Panel - System - Advanced - Environment Variables). Any other computer running your program must also have the GDAL dll's either together with the executable, in System32, or in a PATH'ed location.

With the PATH option, you can choose to extend the PATH variable either for yourself only, or for all users (System variables). I am never sure if a PATH update is effective until I've had the computer restarted. If you choose to keep the dll's with your executable, you'll need to copy them to both the debug and the release location. If you have the fwtools version of GDAL, this will typically be some 20 dll's.

There is no need to put the .lib (or .h) files in System32 or a PATH folder.

(By the way - if the GDAL library is something you use in several VS projects, it's easier to store the .h and .lib locations under Tools-Options-Projects and solutions-VC++ Directories, where the settings are not specific to configuration, project or solution. Only if you have both debug and release versions of GDAL it'll be necessary to use configuration specific .lib and .dll files. But this is the part of the problem you've already solved).

Good luck!
Sjur K :-)



Sjur Kolberg
SINTEF Energiforskning A/S
Sem S?lands vei 11
7465 Trondheim
tlf. 73 59 72 78
fax  73 59 72 50

________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of chen cui
Sent: 8 januar 2009 13:47
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] used the GDAL/GEOS libraries (.dll and .lib) in my visual studio .net C++ project

Hello,
I have successfully used the GDAL/GEOS libraries (.dll and .lib) in my VC++ project.
I just set the directory of where the gdal libraries are saved under the project property setting page - Additional Library Directories' and include directories. But when i run the debugging mode of my project,
the libraries are not found: gdal15.dll, geos_c.dll,geos_c_fw.dll even those files are saved under the library directory. After i copied those file into Windows/system32, then it worked well.
Is there any other way to solve this problem without saving the .dll files in the directory windows/system32?
my computer operation system is windowsxp.
thank you for your kind help!

best regards!

Cui

________________________________
check out the rest of the Windows Live(tm). More than mail-Windows Live(tm) goes way beyond your inbox. More than messages<http://www.microsoft.com/windows/windowslive/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/6ac31383/attachment-0001.html
From craigrthunter at gmail.com  Thu Jan  8 11:26:58 2009
From: craigrthunter at gmail.com (Craig Hunter)
Date: Thu Jan  8 11:27:01 2009
Subject: [gdal-dev] Measure Value and SDE Read/Write
Message-ID: <1ae7be230901080826w4e2d6824v7ead919f0c5c270@mail.gmail.com>

Hi,

We have implemented m-value functionality for the shapefile and sde drivers.
This implementation parallels the z-value implementation that already
existed in ogr.  In addition, we have a working read/write functionality for
(non-versioned) SDE implemented. These enhancements are built on the 1.4.2
release of ogr.  Would this be of interest to anyone?

Thanks,

Craig Hunter.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/9979af0d/attachment.html
From warmerdam at pobox.com  Thu Jan  8 11:51:54 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  8 11:52:23 2009
Subject: [Gdal-dev] Using mgrs.h in NITF
In-Reply-To: <1231412711884-2127339.post@n2.nabble.com>
References: <1231412711884-2127339.post@n2.nabble.com>
Message-ID: <49662F2A.5050902@pobox.com>

carlj88 wrote:
> I want to convert geodetic coordinates to MGRS using the code from
> frmts/nitf/mgrs.c in my QT-application. How do I access these functions from
> my c++ code? Tried to use 'include "mgrs.h"' but then I don't know how to
> reference to the function.
> 
> I would be most greatful since the web has about nothing to offer on this
> issue.
> 
> Carl Johansson

Carl,

First, the MGRS support code in gdal/frmts/nitf is intended primariliy for
use with the NITF driver internals, not for public use.  You *can* use
it publically, but it isn't supported and might be fragile.

The function you would apparently want to call is Convert_Geodetic_To_MGRS()
but it seems this function does not exist in mgrs.c.  I'm not sure if I removed
it to simplfy things - since I didn't need it, or what.

Well, on reflection, I guess you should go back to the original geotrans
source to get the MGRS conversion code.  If you can't find the GeoTrans
source via a google search let me know know and I'll provide a stashed copy
I must have somewhere.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Jan  8 12:09:02 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  8 12:09:24 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
Message-ID: <4966332E.4050405@pobox.com>

Eric Domazlicky wrote:
> I am developing a tiling application and I was hoping to up the speed a 
> bit by doing some multithreading. What I want to do is start each of 3 
> ReadRaster calls in seperate threads (using BeginInvoke delegates), then 
> wait for them to complete and build my RGB image (using EndInvoke). I am 
> using the C# wrapper to the GDAL library. This multithreaded approach is 
> showing clear signs of race conditions, with some of the channels not 
> appearing, random crashes etc. If I ensure each thread completes before 
> I go on to read the next Raster Band it works fine.
>  
> Is there anyway to make ReadRaster thread-safe? Maybe by disabling 
> caching which I suspect is the problem.

Eric,

GDAL is intended to support multi-threading for the case where each thread
is accessing a distinct dataset object.  It is certainly not safe to have
more than one thread accessing a single dataset object at the same time.
If nothing else, there is generally only one underlying FILE * for accessing
the physical file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From edomazlicky at gmail.com  Thu Jan  8 12:23:15 2009
From: edomazlicky at gmail.com (Eric Domazlicky)
Date: Thu Jan  8 12:23:18 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <7c3270ef0901080922s6642a615jec62e921e0a7a4dc@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
	<f3b73b7d0901071612n731bec0oe202d8487fcb78f8@mail.gmail.com>
	<7c3270ef0901080922s6642a615jec62e921e0a7a4dc@mail.gmail.com>
Message-ID: <7c3270ef0901080923l7bc59290wbab6be84945c8f07@mail.gmail.com>

This looks like a great way to go but can anyone explain exactly what the
bandmap and bandspace parameters are? I know BandMap is an array but what is
it supposed to represent? I want the image data to be read and put into my
destination buffer in ARGB format, the source data is in RGBA format. I
tried making an array with elements in order: 4,1,2,3 but the destination
data is transparent so I'm thinking the alpha value isn't getting read
right.

On Wed, Jan 7, 2009 at 4:12 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Eric,
>
> The most performant option I'm aware of is reading the dataset directly
> into a bitmap buffer something like:
>
> try
> {
>         int stride = bitmapData.Stride;
>         IntPtr buf = bitmapData.Scan0;
>
>         ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth,
> imageHeight, dataType,
>         channelCount, bandMap, pixelSpace, stride, 1);
> }
> finally
> {
>         bitmap.UnlockBits(bitmapData);
> }
>
> In this case there's no internal buffers in the marshalling code used by
> the C# wrappers. The only challenge here is to ensure that the bitmap buffer
> should have the same structure as the gdal dataset represents. You could
> refer to the complete example in the C# wrapper for the details:
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetRasterIO.cs
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs
>
> I don't think if triggering multiple reads for different sections in
> multiple threads is currently supported by gdal, it might also be driver
> dependent how the reads are actually implemented by the drivers, however you
> might anyway try defining separate Dataset objects for the different when
> performing the read operations, but there might be locks in different places
> causing the operations to be serialized in effect.
>
> Best regards,
>
> Tamas
>
>
>
> 2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>
>
>>  I am developing a tiling application and I was hoping to up the speed a
>> bit by doing some multithreading. What I want to do is start each of 3
>> ReadRaster calls in seperate threads (using BeginInvoke delegates), then
>> wait for them to complete and build my RGB image (using EndInvoke). I am
>> using the C# wrapper to the GDAL library. This multithreaded approach is
>> showing clear signs of race conditions, with some of the channels not
>> appearing, random crashes etc. If I ensure each thread completes before I go
>> on to read the next Raster Band it works fine.
>>
>> Is there anyway to make ReadRaster thread-safe? Maybe by disabling caching
>> which I suspect is the problem.
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/cbd56f85/attachment.html
From warmerdam at pobox.com  Thu Jan  8 12:59:00 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  8 12:59:21 2009
Subject: [gdal-dev] ogr2ogr shape file extent reprojection
In-Reply-To: <b7368824-3966-4edd-aff8-1dcd949a73e3@r10g2000prf.googlegroups.com>
References: <b7368824-3966-4edd-aff8-1dcd949a73e3@r10g2000prf.googlegroups.com>
Message-ID: <49663EE4.8000903@pobox.com>

santoshamb wrote:
> At first I used ogr2ogr to convert my data, but eventually I started
> using the .Net ProjNET library.  That is when I noticed something
> interesting. When converting LineStrings, ogr2ogr and ProjNet yield
> basically the same results up to 9 or so decimal places which is just
> fine for accuracy.  Where I began to see a lot of differences between
> the two was when I looked at the extent fields in the shapefile
> header.

Ben,

To me this suggests that ProjNet may be reprojecting the extents while
ogr2ogr is reprojecting the geometries, and recomputing the extents in the
new coordinate system.  I haven't verified ... just a guess.

I do know that ogr2ogr recomputes the extents written to a shapefile based
on the geometry ... extents are not carried along through a translation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Thu Jan  8 13:09:09 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Jan  8 13:09:17 2009
Subject: [gdal-dev] Measure Value and SDE Read/Write
In-Reply-To: <1ae7be230901080826w4e2d6824v7ead919f0c5c270@mail.gmail.com>
References: <1ae7be230901080826w4e2d6824v7ead919f0c5c270@mail.gmail.com>
Message-ID: <DACB3E61-DC35-480D-BD34-3BF8958D089F@gmail.com>


On Jan 8, 2009, at 10:26 AM, Craig Hunter wrote:

> Hi,
>
> We have implemented m-value functionality for the shapefile and sde  
> drivers. This implementation parallels the z-value implementation  
> that already existed in ogr.  In addition, we have a working read/ 
> write functionality for (non-versioned) SDE implemented. These  
> enhancements are built on the 1.4.2 release of ogr.  Would this be  
> of interest to anyone?
>

SDE versioned vector write was implemented in 1.6, but no measures  
support is currently available. You built against 1.4?  Did you  
rewrite the SDE driver from scratch?

I'd be interested in seeing stuff, but I don't know that we'd do  
measures until we moved OGR to the new OGC simple features model.   
Such changes would be highly disruptive.  Maybe it would be best to  
file a ticket as an enhancement with the patches zipped up for now.

Howard 
  
From greg at ergonosis.com  Thu Jan  8 14:14:08 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Jan  8 14:14:12 2009
Subject: [gdal-dev] Unknown file type
Message-ID: <49665080.40508@ergonosis.com>

Hi,

I am a GDAL newbie.  I just got handed a group of files with the 
following description:

description of the data
   
    1)  content:
        rain  ==   10 day precipitation analysis by merging      
                   GTS gauge observations and  3 kinds of satellite 
estimates
                   (GPI,SSM/I, and AMSU)
    
    2)  coverage:
        -40.00S -- 40.00N Northward;
         20.00W -- 55.00E Eastward 
        751 grid points in east - west direction
        801 grid points in south - north direction

    3)  resolution:
        0.1 deg lat x 0.1 deg lon
        dekad 
 
    4)  missing values
        -999.0

I'd like to read and manipulate these files using GDAL.  When I run 
gdalinfo, I get something like the following:

Macintosh-4:RFE_dekedal gregederer$ gdalinfo 10day_precip.bin.1999121
ERROR 4: `10day_precip.bin.1999121' not recognised as a supported file 
format.

gdalinfo failed - unable to open '10day_precip.bin.1999121'.

I suspect that GDAL requires some additional metadata in order to read 
these files.  Any suggestions?

Thanks!

Greg

-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From warmerdam at pobox.com  Thu Jan  8 14:56:32 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  8 14:56:53 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <49665080.40508@ergonosis.com>
References: <49665080.40508@ergonosis.com>
Message-ID: <49665A70.5090903@pobox.com>

Greg Ederer wrote:
> Hi,
> 
> I am a GDAL newbie.  I just got handed a group of files with the 
> following description:
> 
> description of the data
>      1)  content:
>        rain  ==   10 day precipitation analysis by merging      
>                   GTS gauge observations and  3 kinds of satellite 
> estimates
>                   (GPI,SSM/I, and AMSU)
>       2)  coverage:
>        -40.00S -- 40.00N Northward;
>         20.00W -- 55.00E Eastward        751 grid points in east - west 
> direction
>        801 grid points in south - north direction
> 
>    3)  resolution:
>        0.1 deg lat x 0.1 deg lon
>        dekad
>    4)  missing values
>        -999.0
> 
> I'd like to read and manipulate these files using GDAL.  When I run 
> gdalinfo, I get something like the following:
> 
> Macintosh-4:RFE_dekedal gregederer$ gdalinfo 10day_precip.bin.1999121
> ERROR 4: `10day_precip.bin.1999121' not recognised as a supported file 
> format.
> 
> gdalinfo failed - unable to open '10day_precip.bin.1999121'.
> 
> I suspect that GDAL requires some additional metadata in order to read 
> these files.  Any suggestions?

Greg,

Assuming this is a raw binary file you can write a VRT "raw" description
for it based on:


   http://www.gdal.org/gdal_vrttut.html

Read down in particular to the ".vrt Descriptions for Raw Files" section.

There are also several other methods for accomplishing something similar.

In your case I'd assume the file is 751x801 x 1band x Float32 with
ImageOffset=0, PixelOffset=4, LineOffset = 3004 and ByteOrder LSB.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From greg at ergonosis.com  Thu Jan  8 15:16:14 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Thu Jan  8 15:16:18 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <49665A70.5090903@pobox.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
Message-ID: <49665F0E.8060101@ergonosis.com>

This looks like it will be useful.

Thanks!

Greg

Frank Warmerdam wrote:
> Greg Ederer wrote:
>> Hi,
>>
>> I am a GDAL newbie.  I just got handed a group of files with the 
>> following description:
>>
>> description of the data
>>      1)  content:
>>        rain  ==   10 day precipitation analysis by merging      
>>                   GTS gauge observations and  3 kinds of satellite 
>> estimates
>>                   (GPI,SSM/I, and AMSU)
>>       2)  coverage:
>>        -40.00S -- 40.00N Northward;
>>         20.00W -- 55.00E Eastward        751 grid points in east - 
>> west direction
>>        801 grid points in south - north direction
>>
>>    3)  resolution:
>>        0.1 deg lat x 0.1 deg lon
>>        dekad
>>    4)  missing values
>>        -999.0
>>
>> I'd like to read and manipulate these files using GDAL.  When I run 
>> gdalinfo, I get something like the following:
>>
>> Macintosh-4:RFE_dekedal gregederer$ gdalinfo 10day_precip.bin.1999121
>> ERROR 4: `10day_precip.bin.1999121' not recognised as a supported 
>> file format.
>>
>> gdalinfo failed - unable to open '10day_precip.bin.1999121'.
>>
>> I suspect that GDAL requires some additional metadata in order to 
>> read these files.  Any suggestions?
>
> Greg,
>
> Assuming this is a raw binary file you can write a VRT "raw" description
> for it based on:
>
>
>   http://www.gdal.org/gdal_vrttut.html
>
> Read down in particular to the ".vrt Descriptions for Raw Files" section.
>
> There are also several other methods for accomplishing something similar.
>
> In your case I'd assume the file is 751x801 x 1band x Float32 with
> ImageOffset=0, PixelOffset=4, LineOffset = 3004 and ByteOrder LSB.
>
> Best regards,


-- 
| E R G O N O S I S
| Greg Ederer
| Lead Developer
| greg@ergonosis.com
| 360.774.6848
|

From szekerest at gmail.com  Thu Jan  8 16:26:34 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan  8 16:26:37 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <7c3270ef0901080923l7bc59290wbab6be84945c8f07@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
	<f3b73b7d0901071612n731bec0oe202d8487fcb78f8@mail.gmail.com>
	<7c3270ef0901080922s6642a615jec62e921e0a7a4dc@mail.gmail.com>
	<7c3270ef0901080923l7bc59290wbab6be84945c8f07@mail.gmail.com>
Message-ID: <f3b73b7d0901081326k489c7db4pdaf6412f5ebf67cc@mail.gmail.com>

Eric,

You could refer to the RasterIO documentation regarding to these parameters:
http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743

If you provide your source data then I could try reading it into a GDI+
bitmap object.

Best regards,

Tamas



2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>

> This looks like a great way to go but can anyone explain exactly what the
> bandmap and bandspace parameters are? I know BandMap is an array but what is
> it supposed to represent? I want the image data to be read and put into my
> destination buffer in ARGB format, the source data is in RGBA format. I
> tried making an array with elements in order: 4,1,2,3 but the destination
> data is transparent so I'm thinking the alpha value isn't getting read
> right.
>
> On Wed, Jan 7, 2009 at 4:12 PM, Tamas Szekeres <szekerest@gmail.com>wrote:
>
>> Eric,
>>
>> The most performant option I'm aware of is reading the dataset directly
>> into a bitmap buffer something like:
>>
>> try
>> {
>>         int stride = bitmapData.Stride;
>>         IntPtr buf = bitmapData.Scan0;
>>
>>         ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth,
>> imageHeight, dataType,
>>         channelCount, bandMap, pixelSpace, stride, 1);
>> }
>> finally
>> {
>>         bitmap.UnlockBits(bitmapData);
>> }
>>
>> In this case there's no internal buffers in the marshalling code used by
>> the C# wrappers. The only challenge here is to ensure that the bitmap buffer
>> should have the same structure as the gdal dataset represents. You could
>> refer to the complete example in the C# wrapper for the details:
>>
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetRasterIO.cs
>>
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs
>>
>> I don't think if triggering multiple reads for different sections in
>> multiple threads is currently supported by gdal, it might also be driver
>> dependent how the reads are actually implemented by the drivers, however you
>> might anyway try defining separate Dataset objects for the different when
>> performing the read operations, but there might be locks in different places
>> causing the operations to be serialized in effect.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>
>>
>>>  I am developing a tiling application and I was hoping to up the speed a
>>> bit by doing some multithreading. What I want to do is start each of 3
>>> ReadRaster calls in seperate threads (using BeginInvoke delegates), then
>>> wait for them to complete and build my RGB image (using EndInvoke). I am
>>> using the C# wrapper to the GDAL library. This multithreaded approach is
>>> showing clear signs of race conditions, with some of the channels not
>>> appearing, random crashes etc. If I ensure each thread completes before I go
>>> on to read the next Raster Band it works fine.
>>>
>>> Is there anyway to make ReadRaster thread-safe? Maybe by disabling
>>> caching which I suspect is the problem.
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/4303b4ed/attachment-0001.html
From cchung at draper.com  Thu Jan  8 18:31:41 2009
From: cchung at draper.com (Charles Chung)
Date: Thu Jan  8 18:31:43 2009
Subject: [Gdal-dev] gdal_merge: merge/mosaic NITF files
Message-ID: <1231457501565-2130852.post@n2.nabble.com>


Hi all, I am new using GDAL and raster format. Here is my situation.

With GDAL 1.6.0dev, I want to merge or mosaic many NITF files into one NITF
or GeoTIFF file.

Each NITF file is about 284 KB and its characterists are:

Driver: NITF/National Imagery Transmission Format
Files: ???????.???
Size is 1536, 1536
...
Pixel Size = (0.000059486040609,-0.000044956841432)
...
Band 1 Block=256x256 Type=Byte, ColorInterp=Palette

If I use "gdal_merge" with one NITF input file and default settings, the
default output is GeoTIFF and the size is 2,316 KB.  That's 8 times bigger
in size even though I used only one input file.  If I output to NITF format,
the size is also 8 times bigger.  If I merge two NITF files the output is
about 16 times bigger.

Why the output file size is so much bigger than the input file?  Is there
settings to make it smaller?
Basically I want the size of merged files to be about the same size as the
sum of input file size.

Thank you.

Charles


-- 
View this message in context: http://n2.nabble.com/gdal_merge%3A-merge-mosaic-NITF-files-tp2130852p2130852.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From edomazlicky at gmail.com  Thu Jan  8 19:24:42 2009
From: edomazlicky at gmail.com (Eric Domazlicky)
Date: Thu Jan  8 19:24:44 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <f3b73b7d0901081326k489c7db4pdaf6412f5ebf67cc@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
	<f3b73b7d0901071612n731bec0oe202d8487fcb78f8@mail.gmail.com>
	<7c3270ef0901080922s6642a615jec62e921e0a7a4dc@mail.gmail.com>
	<7c3270ef0901080923l7bc59290wbab6be84945c8f07@mail.gmail.com>
	<f3b73b7d0901081326k489c7db4pdaf6412f5ebf67cc@mail.gmail.com>
Message-ID: <7c3270ef0901081624m27c5cf8bu5ded8e39d4437243@mail.gmail.com>

After fixing a bug on my part I was able to figure it out. The only strange
this was that the BandMap array had to declared in reverse order from what
one would expect. This may be a GDI+ issue but here is my code snippet for
the record:

            Dim bd As BitmapData = TileBmp.LockBits(New Rectangle(0, 0,
TileCropW, TileCropH), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb)
            Try
                Dim stride As Integer = bd.Stride
                Dim bandmap(3) As Integer
' destination is ARGB but this is BGRA go figure
                bandmap(0) = 3
                bandmap(1) = 2
                bandmap(2) = 1
                bandmap(3) = 4
                Dim buf As IntPtr = bd.Scan0
                GdalDataSet.ReadRaster(curRasterX, curRasterY, CropW, CropH,
buf, TileCropW, TileCropH, DataType.GDT_Byte, GdalDataSet.RasterCount,
bandmap, 4, stride, 1)
                allblack = False
            Finally
                TileBmp.UnlockBits(bd)
            End Try

On Thu, Jan 8, 2009 at 1:26 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Eric,
>
> You could refer to the RasterIO documentation regarding to these
> parameters:
> http://www.gdal.org/classGDALDataset.html#e077c53268d2272eebed10b891a05743
>
> If you provide your source data then I could try reading it into a GDI+
> bitmap object.
>
>
> Best regards,
>
> Tamas
>
>
>
> 2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>
>
>>   This looks like a great way to go but can anyone explain exactly what
>> the bandmap and bandspace parameters are? I know BandMap is an array but
>> what is it supposed to represent? I want the image data to be read and put
>> into my destination buffer in ARGB format, the source data is in RGBA
>> format. I tried making an array with elements in order: 4,1,2,3 but the
>> destination data is transparent so I'm thinking the alpha value isn't
>> getting read right.
>>
>> On Wed, Jan 7, 2009 at 4:12 PM, Tamas Szekeres <szekerest@gmail.com>wrote:
>>
>>> Eric,
>>>
>>> The most performant option I'm aware of is reading the dataset directly
>>> into a bitmap buffer something like:
>>>
>>> try
>>> {
>>>         int stride = bitmapData.Stride;
>>>         IntPtr buf = bitmapData.Scan0;
>>>
>>>         ds.ReadRaster(xOff, yOff, width, height, buf, imageWidth,
>>> imageHeight, dataType,
>>>         channelCount, bandMap, pixelSpace, stride, 1);
>>> }
>>> finally
>>> {
>>>         bitmap.UnlockBits(bitmapData);
>>> }
>>>
>>> In this case there's no internal buffers in the marshalling code used by
>>> the C# wrappers. The only challenge here is to ensure that the bitmap buffer
>>> should have the same structure as the gdal dataset represents. You could
>>> refer to the complete example in the C# wrapper for the details:
>>>
>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALDatasetRasterIO.cs
>>>
>>> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/GDALReadDirect.cs
>>>
>>> I don't think if triggering multiple reads for different sections in
>>> multiple threads is currently supported by gdal, it might also be driver
>>> dependent how the reads are actually implemented by the drivers, however you
>>> might anyway try defining separate Dataset objects for the different when
>>> performing the read operations, but there might be locks in different places
>>> causing the operations to be serialized in effect.
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>>
>>> 2009/1/8 Eric Domazlicky <edomazlicky@gmail.com>
>>>
>>>>  I am developing a tiling application and I was hoping to up the speed
>>>> a bit by doing some multithreading. What I want to do is start each of 3
>>>> ReadRaster calls in seperate threads (using BeginInvoke delegates), then
>>>> wait for them to complete and build my RGB image (using EndInvoke). I am
>>>> using the C# wrapper to the GDAL library. This multithreaded approach is
>>>> showing clear signs of race conditions, with some of the channels not
>>>> appearing, random crashes etc. If I ensure each thread completes before I go
>>>> on to read the next Raster Band it works fine.
>>>>
>>>> Is there anyway to make ReadRaster thread-safe? Maybe by disabling
>>>> caching which I suspect is the problem.
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090108/1daa0106/attachment.html
From warmerdam at pobox.com  Thu Jan  8 19:28:18 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  8 19:28:36 2009
Subject: [Gdal-dev] gdal_merge: merge/mosaic NITF files
In-Reply-To: <1231457501565-2130852.post@n2.nabble.com>
References: <1231457501565-2130852.post@n2.nabble.com>
Message-ID: <49669A22.3050306@pobox.com>

Charles Chung wrote:
> Hi all, I am new using GDAL and raster format. Here is my situation.
> 
> With GDAL 1.6.0dev, I want to merge or mosaic many NITF files into one NITF
> or GeoTIFF file.
> 
> Each NITF file is about 284 KB and its characterists are:
> 
> Driver: NITF/National Imagery Transmission Format
> Files: ???????.???
> Size is 1536, 1536
> ...
> Pixel Size = (0.000059486040609,-0.000044956841432)
> ...
> Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
> 
> If I use "gdal_merge" with one NITF input file and default settings, the
> default output is GeoTIFF and the size is 2,316 KB.  That's 8 times bigger
> in size even though I used only one input file.  If I output to NITF format,
> the size is also 8 times bigger.  If I merge two NITF files the output is
> about 16 times bigger.
> 
> Why the output file size is so much bigger than the input file?  Is there
> settings to make it smaller?
> Basically I want the size of merged files to be about the same size as the
> sum of input file size.

Charles,

I suspect the input NITF files are compressed, and for the most part GDAL
does not support producing compressed files.  If you run gdalinfo on the
input file, and check the IC (compression) field, I presume it will be
set.

If you were to convert ultimately to a compressed format like PNG or
Deflate compressed TIFF you should get similar or better results.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Fri Jan  9 04:27:37 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan  9 04:27:40 2009
Subject: [gdal-dev] GDAL ReadRaster thread-safe?
In-Reply-To: <7c3270ef0901081624m27c5cf8bu5ded8e39d4437243@mail.gmail.com>
References: <7c3270ef0901071548jd79e5bcy97069000592d3995@mail.gmail.com>
	<f3b73b7d0901071612n731bec0oe202d8487fcb78f8@mail.gmail.com>
	<7c3270ef0901080922s6642a615jec62e921e0a7a4dc@mail.gmail.com>
	<7c3270ef0901080923l7bc59290wbab6be84945c8f07@mail.gmail.com>
	<f3b73b7d0901081326k489c7db4pdaf6412f5ebf67cc@mail.gmail.com>
	<7c3270ef0901081624m27c5cf8bu5ded8e39d4437243@mail.gmail.com>
Message-ID: <f3b73b7d0901090127t45ba5e7fs42119fc07742bf9e@mail.gmail.com>

2009/1/9 Eric Domazlicky <edomazlicky@gmail.com>

> After fixing a bug on my part I was able to figure it out. The only strange
> this was that the BandMap array had to declared in reverse order from what
> one would expect. This may be a GDI+ issue but here is my code snippet for
> the record:
>

It depends on the physical order of the band data in your dataset. I've
never used any data having BGRA layout so I'm not sure whether this one is
an issue on not. It's cool you finally got it working though  :-)

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090109/5dcb0812/attachment.html
From gregor.fikoczek at wheregroup.com  Fri Jan  9 09:51:50 2009
From: gregor.fikoczek at wheregroup.com (Gregor Fikoczek)
Date: Fri Jan  9 09:51:58 2009
Subject: [gdal-dev] Error (Not enough data for scanline) by using gdaladdo
	with geotiff
Message-ID: <200901091551.51357.gregor.fikoczek@wheregroup.com>



Hi, 

i am using 'GDAL 1.6.0, released 2008/12/04' on (K)Ubuntu 'Linux 
2.6.22-16-generic i686 GNU/Linux'. By using gdaladdo with a geotiff i get the 
following Result/Error:

gdaladdo -r nearest test.tif 2 4 8 16

Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field, ignoring 
and calculating from imagelength
0Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field, 
ignoring and calculating from imagelength
ERROR 1: /home/fikoczek/projekte/bentheim/testbild/8015.9B.tif:DumpModeDecode: 
Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
...10...20...30...40...50...60...70...80...90...100 - done.
Overview building failed.


Anybody an idea ?????
Something with the libtiff ???

Best Regards, 
Greg




Some Information (Tiff-Image 300MB):
------------------------------------------------------------
gdalinfo /home/fikoczek/projekte/bentheim/testbild/orginal/8015.9B.tif
Driver: GTiff/GeoTIFF
Files: /home/fikoczek/projekte/bentheim/testbild/orginal/8015.9B.tif
Size is 10000, 10000
Coordinate System is `'
Origin = (2580500.000000000000000,5816000.000000000000000)
Pixel Size = (0.050000000000000,-0.050000000000000)
Metadata:
  TIFFTAG_SOFTWARE=Adobe Photoshop 7.0
  TIFFTAG_DATETIME=2007:07:10 14:38:18
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 2580500.000, 5816000.000)
Lower Left  ( 2580500.000, 5815500.000)
Upper Right ( 2581000.000, 5816000.000)
Lower Right ( 2581000.000, 5815500.000)
Center      ( 2580750.000, 5815750.000)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue

Some Information (GDAL 1.6.0)./configure --with-xerces
-----------------------------------------------------------------------------------------
[sudo] password for fikoczek:
checking build system type... i686-pc-linux-gnu
checking host system type... i686-pc-linux-gnu
checking target system type... i686-pc-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking C_WFLAGS for maximum warnings... -Wall -Wdeclaration-after-statement
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking CXX_WFLAGS for maximum warnings... -Wall
checking for gcc... (cached) gcc
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking whether we are using the GNU C++ compiler... (cached) yes
checking whether g++ accepts -g... (cached) yes
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 32768
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking whether we are using the GNU C++ compiler... (cached) yes
checking whether g++ accepts -g... (cached) yes
checking how to run the C++ preprocessor... g++ -E
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... yes
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for ld used by g++... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fPIC -DPIC
checking if g++ PIC flag -fPIC -DPIC works... yes
checking if g++ static flag -static works... yes
checking if g++ supports -c -o file.o... yes
checking if g++ supports -c -o file.o... (cached) yes
checking whether the g++ linker (/usr/bin/ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for dlopen in -ldl... yes
checking for nanosleep in -lrt... yes
checking for sin in -lm... yes
checking for ANSI C header files... (cached) yes
checking assert.h usability... yes
checking assert.h presence... yes
checking for assert.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking dbmalloc.h usability... no
checking dbmalloc.h presence... no
checking for dbmalloc.h... no
checking for dlfcn.h... (cached) yes
checking for stdint.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking values.h usability... yes
checking values.h presence... yes
checking for values.h... yes
checking float.h usability... yes
checking float.h presence... yes
checking for float.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking whether byte ordering is bigendian... no
checking for 64bit integer type... long long
checking for 64bit file io... yes
checking for stat64... yes
checking for fopen64... yes
checking for int... yes
checking size of int... 4
checking for long... yes
checking size of long... 4
checking for unsigned long... yes
checking size of unsigned long... 4
checking for void*... yes
checking size of void*... 4
checking for int8... no
checking for int16... no
checking for int32... no
checking native cpu bit order... lsb2msb
checking for vprintf... yes
checking for _doprnt... no
checking for snprintf... yes
checking for vsnprintf... yes
checking for atoll... yes
checking for strtof... yes
checking for getcwd... yes
checking whether strtof is declared... no
checking for gmtime_r... yes
checking for localtime_r... yes
checking for setlocale... yes
checking to enable debug build... no, CFLAGS="-g -O2"
checking whether we should hide internal symbols... no
checking for local include/lib path... none
configure: checking whether we should include thread/mutex support......
        thread safe support disabled.
checking for deflateInit_ in -lz... yes
checking for inflateCopy in -lz... yes
using pre-installed libz
checking for pg_config... /usr/bin/pg_config
checking for PostgreSQL... yes
checking for PQconnectdb in -lpq... yes
checking for PQputCopyData in -lpq... yes
checking for PQescapeStringConn in -lpq... yes
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for Mopen in -lcsf... no
checking csf.h usability... no
checking csf.h presence... no
checking for csf.h... no
using internal csf code.
checking for nc_open in -lnetcdf... yes
using pre-installed libnetcdf.
checking for png_set_IHDR in -lpng... yes
checking png.h usability... yes
checking png.h presence... yes
checking for png.h... yes
using pre-installed libpng.
checking for TIFFGetTagListCount in -ltiff... yes
checking for _TIFFsetDoubleArray in -ltiff... yes
checking for TIFFScanlineSize64 in -ltiff... no
using pre-installed libtiff.
checking for XTIFFClientOpen in -lgeotiff... no
using internal GeoTIFF code.
checking for jpeg_read_scanlines in -ljpeg... yes
checking jpeglib.h usability... yes
checking jpeglib.h presence... yes
checking for jpeglib.h... yes
using pre-installed libjpeg.
checking for DGifOpenFileName in -lgif... yes
using pre-installed libgif.
checking for cln_GetLayerCapabilities in -logdi31... no
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... yes
checking for H5Fopen in -lhdf5... yes
checking for jpc_decode in -ljasper... yes
checking for jp2_decode in -ljasper... yes
checking for pgx_decode in -ljasper... yes
checking for jp2_encode_uuid in -ljasper... no
configure: hacked JasPer version not found, GeoJP2 disabled.
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
checking for MSG... not requested
checking for BSB... enabled
checking for Oracle OCI headers 
in /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/rdbms/public... yes
checking for Oracle OCI libraries 
in /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/lib... not found
checking if Oracle support is enabled... no
checking for GRIB... enabled
checking for OGR ... enabled
checking for MySQL... no
checking for Ingres... no
checking for Xerces C++ Parser headers in /usr/include 
and /usr/include/xercesc... found
checking for Xerces C++ Parser libraries... found
checking for Xerces C++ Parser... yes
checking if Xerces C++ Parser version is >= 2.7.0... yes
checking for Expat XML Parser headers in /usr/include... found
checking for Expat XML Parser libraries... found
checking for Expat XML Parser... yes
checking if Expat XML Parser version is >= 1.95.0... yes
checking for SQLConnect in -lodbc... yes
checking for SQLInstallDriverEx in -lodbcinst... yes
checking for Oracle OCI headers 
in /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/rdbms/public... yes
checking for Oracle OCI libraries 
in /usr/lib/oracle/xe/app/oracle/product/10.2.0/server/lib... not found
checking if Oracle support is enabled... no
checking Checking for DODS... disabled
checking for curl-config... /usr/bin/curl-config
        found libcurl version 7.16.4
checking for SQLite3 library >= 3.0.0... yes
checking Checking for DWGdirect... disabled
configure: IBM Informix DataBlade not supported.
configure: checking whether we should include ESRI SDE support...
        ESRI SDE support not requested.
checking for geos-config... /usr/bin/geos-config
checking for GEOS version >= 2.2.0... yes
checking for GEOSversion in -lgeos_c... yes
configure: Using C API from GEOS 2.2.3
checking whether to enable PAM... yes
checking how to link PROJ.4 library... link dynamically.
checking GDAL version information from gdal_version.h: 1.6.0
checking for perl bindings... disabled
checking for php bindings... disabled
checking for ruby bindings... disabled
checking for python bindings... disabled
checking for old-gen python bindings... disabled
configure: creating ./config.status
config.status: creating GDALmake.opt
config.status: WARNING:  GDALmake.opt.in seems to ignore the --datarootdir 
setting
config.status: creating port/cpl_config.h
config.status: port/cpl_config.h is unchanged
config.status: executing libtool commands

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            yes
  LIBPNG support:            external
  LIBTIFF support:           external (BigTIFF=no)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              yes
  HDF5 support:              yes
  Kakadu support:            no
  JasPer support:            yes (GeoJP2=no)
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        yes
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          yes
  NAS support:               yes
  Expat support:             yes
  ODBC support:              yes
  PGeo support:              yes
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              yes


  Old-gen python          no
  SWIG Bindings:          no

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no
:






-- 
Mit freundlichen Gr??en

Gregor Fikoczek



---------------------------------------
WhereGroup GmbH & Co. KG
Siemensstra?e 8
53121 Bonn
Germany

Gregor Fikoczek
Email: gregor.fikoczek@wheregroup.com
Fon: +49 (0)228 / 90 90 38 - 25
Fax: +49 (0)228 / 90 90 38 - 11

info@wheregroup.com
www.wheregroup.com
Amtsgericht Bonn, HRA 6788
-------------------------------
Komplement?rin:
WhereGroup Verwaltungs GmbH
vertreten durch:
Olaf Knopp, Peter Stamm
---------------------------------------
From Shawn.Gong at drdc-rddc.gc.ca  Fri Jan  9 09:55:56 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Jan  9 09:54:11 2009
Subject: [gdal-dev] how to convert netCDF image 
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6A4@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have some netCDF images that are in lat/lon. But they are flipped
upside down, and longitude is around 300 deg instead of -60 deg (West).

What gdal function can I use to convert/flip it to lat/lon and into
[-180, 180]? 

thanks,
Shawn

gdalinfo owsofa.nc
Driver: netCDF/Network Common Data Format
Files: owsofa.nc
Size is 512, 512
Coordinate System is `'
Metadata:
  NC_GLOBAL#Title=OWS gridded fields
  NC_GLOBAL#Conventions=CF-1.3
Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"owsofa.nc":SST
  SUBDATASET_1_DESC=[105x189] SST (32-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"owsofa.nc":SST1
  SUBDATASET_2_DESC=[105x189] SST1 (32-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"owsofa.nc":T150
  SUBDATASET_3_DESC=[105x189] T150 (32-bit floating-point)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

gdalinfo NETCDF:"owsofa.nc":SST
Driver: netCDF/Network Common Data Format
Files: none associated
Size is 189, 105
Coordinate System is `'
Origin = (284.875000000000000,60.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
  NC_GLOBAL#Title=OWS gridded fields
  NC_GLOBAL#Conventions=CF-1.3
  SST#units=degree_C
  SST#long_name=SST
  SST#start_time=2008-DEC-02 0936
  SST#end_time=2008-DEC-05 0936
  SST#grid_mapping=crs
  SST#_FillValue=1.000000e+35
  lon#units=degrees_east
  lon#long_name=longitude
  lon#standard_name=longitude
  lat#units=degrees_north
  lat#long_name=latitude
  lat#standard_name=latitude
  crs#grid_mapping_name=latitude_longitude
  crs#longitude_of_prime_meridian=0
  crs#semi_major_axis=6.37814e+06
  crs#inverse_flattening=298.257
Corner Coordinates:
Upper Left  (     284.875,      60.125)
Lower Left  (     284.875,      33.875)
Upper Right (     332.125,      60.125)
Lower Right (     332.125,      33.875)
Center      (     308.500,      47.000)
Band 1 Block=189x1 Type=Float32, ColorInterp=Undefined
  NoData Value=1.00000004091847876e+35
  Metadata:
    NETCDF_VARNAME=SST



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090109/f5cc9e8e/attachment.html
From neteler at osgeo.org  Fri Jan  9 09:56:17 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Fri Jan  9 09:56:20 2009
Subject: [gdal-dev] how to convert netCDF image
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E6A4@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E6A4@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <86782b610901090656p73ae0a3bv70cb06e33cf446d5@mail.gmail.com>

On Fri, Jan 9, 2009 at 3:55 PM, Gong, Shawn (Contractor)
<Shawn.Gong@drdc-rddc.gc.ca> wrote:
> hi list,
>
> I have some netCDF images that are in lat/lon. But they are flipped upside
> down, and longitude is around 300 deg instead of -60 deg (West).

This sounds like
http://trac.osgeo.org/gdal/ticket/2654
or
http://trac.osgeo.org/gdal/ticket/2584

Which GDAL version do you use? *Something* was fixed (possibly also
your problem).

Markus



> What gdal function can I use to convert/flip it to lat/lon and into [-180, 180]?
>
> thanks,
>
> Shawn
>
> gdalinfo owsofa.nc
>
> Driver: netCDF/Network Common Data Format
>
> Files: owsofa.nc
>
> Size is 512, 512
>
> Coordinate System is `'
>
> Metadata:
>
>   NC_GLOBAL#Title=OWS gridded fields
>
>   NC_GLOBAL#Conventions=CF-1.3
>
> Subdatasets:
>
>   SUBDATASET_1_NAME=NETCDF:"owsofa.nc":SST
>
>   SUBDATASET_1_DESC=[105x189] SST (32-bit floating-point)
>
>   SUBDATASET_2_NAME=NETCDF:"owsofa.nc":SST1
>
>   SUBDATASET_2_DESC=[105x189] SST1 (32-bit floating-point)
>
>   SUBDATASET_3_NAME=NETCDF:"owsofa.nc":T150
>
>   SUBDATASET_3_DESC=[105x189] T150 (32-bit floating-point)
>
> Corner Coordinates:
>
> Upper Left  (    0.0,    0.0)
>
> Lower Left  (    0.0,  512.0)
>
> Upper Right (  512.0,    0.0)
>
> Lower Right (  512.0,  512.0)
>
> Center      (  256.0,  256.0)
>
> gdalinfo NETCDF:"owsofa.nc":SST
>
> Driver: netCDF/Network Common Data Format
>
> Files: none associated
>
> Size is 189, 105
>
> Coordinate System is `'
>
> Origin = (284.875000000000000,60.125000000000000)
>
> Pixel Size = (0.250000000000000,-0.250000000000000)
>
> Metadata:
>
>   NC_GLOBAL#Title=OWS gridded fields
>
>   NC_GLOBAL#Conventions=CF-1.3
>
>   SST#units=degree_C
>
>   SST#long_name=SST
>
>   SST#start_time=2008-DEC-02 0936
>
>   SST#end_time=2008-DEC-05 0936
>
>   SST#grid_mapping=crs
>
>   SST#_FillValue=1.000000e+35
>
>   lon#units=degrees_east
>
>   lon#long_name=longitude
>
>   lon#standard_name=longitude
>
>   lat#units=degrees_north
>
>   lat#long_name=latitude
>
>   lat#standard_name=latitude
>
>   crs#grid_mapping_name=latitude_longitude
>
>   crs#longitude_of_prime_meridian=0
>
>   crs#semi_major_axis=6.37814e+06
>
>   crs#inverse_flattening=298.257
>
> Corner Coordinates:
>
> Upper Left  (     284.875,      60.125)
>
> Lower Left  (     284.875,      33.875)
>
> Upper Right (     332.125,      60.125)
>
> Lower Right (     332.125,      33.875)
>
> Center      (     308.500,      47.000)
>
> Band 1 Block=189x1 Type=Float32, ColorInterp=Undefined
>
>   NoData Value=1.00000004091847876e+35
>
>   Metadata:
>
>     NETCDF_VARNAME=SST
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Shawn.Gong at drdc-rddc.gc.ca  Fri Jan  9 10:01:48 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Jan  9 09:59:57 2009
Subject: [gdal-dev] how to convert netCDF image
In-Reply-To: <86782b610901090656p73ae0a3bv70cb06e33cf446d5@mail.gmail.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E6A4@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<86782b610901090656p73ae0a3bv70cb06e33cf446d5@mail.gmail.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>

thanks Markus.
I use gdal 1.6.0


Shawn



-----Original Message-----
From: neteler.osgeo@gmail.com [mailto:neteler.osgeo@gmail.com] On Behalf
Of Markus Neteler
Sent: Friday, January 09, 2009 9:56 AM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] how to convert netCDF image

On Fri, Jan 9, 2009 at 3:55 PM, Gong, Shawn (Contractor)
<Shawn.Gong@drdc-rddc.gc.ca> wrote:
> hi list,
>
> I have some netCDF images that are in lat/lon. But they are flipped
upside
> down, and longitude is around 300 deg instead of -60 deg (West).

This sounds like
http://trac.osgeo.org/gdal/ticket/2654
or
http://trac.osgeo.org/gdal/ticket/2584

Which GDAL version do you use? *Something* was fixed (possibly also
your problem).

Markus



> What gdal function can I use to convert/flip it to lat/lon and into
[-180, 180]?
>
> thanks,
>
> Shawn
>
> gdalinfo owsofa.nc
>
> Driver: netCDF/Network Common Data Format
>
> Files: owsofa.nc
>
> Size is 512, 512
>
> Coordinate System is `'
>
> Metadata:
>
>   NC_GLOBAL#Title=OWS gridded fields
>
>   NC_GLOBAL#Conventions=CF-1.3
>
> Subdatasets:
>
>   SUBDATASET_1_NAME=NETCDF:"owsofa.nc":SST
>
>   SUBDATASET_1_DESC=[105x189] SST (32-bit floating-point)
>
>   SUBDATASET_2_NAME=NETCDF:"owsofa.nc":SST1
>
>   SUBDATASET_2_DESC=[105x189] SST1 (32-bit floating-point)
>
>   SUBDATASET_3_NAME=NETCDF:"owsofa.nc":T150
>
>   SUBDATASET_3_DESC=[105x189] T150 (32-bit floating-point)
>
> Corner Coordinates:
>
> Upper Left  (    0.0,    0.0)
>
> Lower Left  (    0.0,  512.0)
>
> Upper Right (  512.0,    0.0)
>
> Lower Right (  512.0,  512.0)
>
> Center      (  256.0,  256.0)
>
> gdalinfo NETCDF:"owsofa.nc":SST
>
> Driver: netCDF/Network Common Data Format
>
> Files: none associated
>
> Size is 189, 105
>
> Coordinate System is `'
>
> Origin = (284.875000000000000,60.125000000000000)
>
> Pixel Size = (0.250000000000000,-0.250000000000000)
>
> Metadata:
>
>   NC_GLOBAL#Title=OWS gridded fields
>
>   NC_GLOBAL#Conventions=CF-1.3
>
>   SST#units=degree_C
>
>   SST#long_name=SST
>
>   SST#start_time=2008-DEC-02 0936
>
>   SST#end_time=2008-DEC-05 0936
>
>   SST#grid_mapping=crs
>
>   SST#_FillValue=1.000000e+35
>
>   lon#units=degrees_east
>
>   lon#long_name=longitude
>
>   lon#standard_name=longitude
>
>   lat#units=degrees_north
>
>   lat#long_name=latitude
>
>   lat#standard_name=latitude
>
>   crs#grid_mapping_name=latitude_longitude
>
>   crs#longitude_of_prime_meridian=0
>
>   crs#semi_major_axis=6.37814e+06
>
>   crs#inverse_flattening=298.257
>
> Corner Coordinates:
>
> Upper Left  (     284.875,      60.125)
>
> Lower Left  (     284.875,      33.875)
>
> Upper Right (     332.125,      60.125)
>
> Lower Right (     332.125,      33.875)
>
> Center      (     308.500,      47.000)
>
> Band 1 Block=189x1 Type=Float32, ColorInterp=Undefined
>
>   NoData Value=1.00000004091847876e+35
>
>   Metadata:
>
>     NETCDF_VARNAME=SST
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Fri Jan  9 13:13:08 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  9 13:13:31 2009
Subject: [gdal-dev] Error (Not enough data for scanline) by using
	gdaladdo with geotiff
In-Reply-To: <200901091551.51357.gregor.fikoczek@wheregroup.com>
References: <200901091551.51357.gregor.fikoczek@wheregroup.com>
Message-ID: <496793B4.80601@pobox.com>

Gregor Fikoczek wrote:
> 
> Hi, 
> 
> i am using 'GDAL 1.6.0, released 2008/12/04' on (K)Ubuntu 'Linux 
> 2.6.22-16-generic i686 GNU/Linux'. By using gdaladdo with a geotiff i get the 
> following Result/Error:
> 
> gdaladdo -r nearest test.tif 2 4 8 16
> 
> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field, ignoring 
> and calculating from imagelength
> 0Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field, 
> ignoring and calculating from imagelength
> ERROR 1: /home/fikoczek/projekte/bentheim/testbild/8015.9B.tif:DumpModeDecode: 
> Not enough data for scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> ...10...20...30...40...50...60...70...80...90...100 - done.
> Overview building failed.
> 
> 
> Anybody an idea ?????
> Something with the libtiff ???

Greg,

Generally this indicates use of an older libtiff.  If you want to avoid
this, I'd suggest configuring --with-libtiff=internal.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From greg at ergonosis.com  Fri Jan  9 13:22:22 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Jan  9 13:22:31 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <49665A70.5090903@pobox.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
Message-ID: <F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>

Hi Frank,

Thanks you very much for your help.  I think I'm close.  I have  
created a .vrt file with:

<VRTDataset rasterXSize="751" rasterYSize="801">
   <SRS>
   GEOGCS[&quot;WGS 84&quot;,
     DATUM[&quot;WGS_1984&quot;,
         SPHEROID[&quot;WGS 84&quot;,6378137,298.2572235630016,
             AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
         AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
     PRIMEM[&quot;Greenwich&quot;,0],
     UNIT[&quot;degree&quot;,0.0174532925199433],
     AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
   </SRS>
   <VRTRasterBand dataType="Float32" band="1"  
subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">10day_precip.bin.1999121</ 
SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>4</PixelOffset>
     <LineOffset>3004</LineOffset>
     <ByteOrder>LSB</ByteOrder>
     <NoDataValue>-999.0</NoDataValue>
   </VRTRasterBand>
</VRTDataset>


I then run:

   gdal_translate -of GTiff 10day_precip.bin.1999121.vrt  
10day_precip.bin.1999121.tif

and this produces a GeoTIFF, as expected.  Running:

   gdalinfo 10day_precip.bin.1999121.tif

gives:

Driver: GTiff/GeoTIFF
Files: 10day_precip.bin.1999121.tif
Size is 751, 801
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235630016,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  801.0)
Upper Right (  751.0,    0.0)
Lower Right (  751.0,  801.0)
Center      (  375.5,  400.5)
Band 1 Block=751x2 Type=Float32, ColorInterp=Gray
   NoData Value=-999

However, when I attempt to load this GeoTIFF into GeoServer, my  
ultimate goal, I get:

class org.vfny.geoserver.global.ConfigurationException: Could not  
obtain a reader for the CoverageDataSet. Please check the  
CoverageDataSet configuration!

I have successfully loaded other GeoTIFFs into GeoServer that were  
prepared by another member of our team from the same raw binary data  
using IDL  So, I suspect that there is something amiss with my GeoTIFF.

Here's the gdalinfo output for a GeoTIFF that loads properly:

Driver: GTiff/GeoTIFF
Files: /Users/gregederer/tmp/starspan_tests/rfe_2005_07_mm.tif
Size is 751, 801
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235630016,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-20.050000000000001,40.049999999999997)
Pixel Size = (0.100000000000000,-0.100000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -20.0500000,  40.0500000) ( 20d 3'0.00"W, 40d 3'0.00"N)
Lower Left  ( -20.0500000, -40.0500000) ( 20d 3'0.00"W, 40d 3'0.00"S)
Upper Right (  55.0500000,  40.0500000) ( 55d 3'0.00"E, 40d 3'0.00"N)
Lower Right (  55.0500000, -40.0500000) ( 55d 3'0.00"E, 40d 3'0.00"S)
Center      (  17.5000000,  -0.0000000) ( 17d30'0.00"E,  0d 0'0.00"S)
Band 1 Block=751x2 Type=Float32, ColorInterp=Gray

Any further suggestions?

Thanks, again!

Greg


On Jan 8, 2009, at 11:56 AM, Frank Warmerdam wrote:

> Greg Ederer wrote:
>> Hi,
>> I am a GDAL newbie.  I just got handed a group of files with the  
>> following description:
>> description of the data
>>     1)  content:
>>       rain  ==   10 day precipitation analysis by  
>> merging                        GTS gauge observations and  3 kinds  
>> of satellite estimates
>>                  (GPI,SSM/I, and AMSU)
>>      2)  coverage:
>>       -40.00S -- 40.00N Northward;
>>        20.00W -- 55.00E Eastward        751 grid points in east -  
>> west direction
>>       801 grid points in south - north direction
>>   3)  resolution:
>>       0.1 deg lat x 0.1 deg lon
>>       dekad
>>   4)  missing values
>>       -999.0
>> I'd like to read and manipulate these files using GDAL.  When I run  
>> gdalinfo, I get something like the following:
>> Macintosh-4:RFE_dekedal gregederer$ gdalinfo 10day_precip.bin.1999121
>> ERROR 4: `10day_precip.bin.1999121' not recognised as a supported  
>> file format.
>> gdalinfo failed - unable to open '10day_precip.bin.1999121'.
>> I suspect that GDAL requires some additional metadata in order to  
>> read these files.  Any suggestions?
>
> Greg,
>
> Assuming this is a raw binary file you can write a VRT "raw"  
> description
> for it based on:
>
>
>  http://www.gdal.org/gdal_vrttut.html
>
> Read down in particular to the ".vrt Descriptions for Raw Files"  
> section.
>
> There are also several other methods for accomplishing something  
> similar.
>
> In your case I'd assume the file is 751x801 x 1band x Float32 with
> ImageOffset=0, PixelOffset=4, LineOffset = 3004 and ByteOrder LSB.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From even.rouault at mines-paris.org  Fri Jan  9 13:41:45 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  9 13:41:59 2009
Subject: [Gdal-dev] gdal_merge: merge/mosaic NITF files
In-Reply-To: <1231457501565-2130852.post@n2.nabble.com>
References: <1231457501565-2130852.post@n2.nabble.com>
Message-ID: <200901091941.47828.even.rouault@mines-paris.org>

Charles,

from the dimensions and size of your NITF tiles, I suppose they belong to a 
CADRG or CIB dataset. You will certainly find a file named A.TOC in an upper 
directory of your tiles. GDAL contains a driver called RPFTOC that is able to 
deal with such files. You can do a gdalinfo on it and it will report a list 
of subdatasets. (see http://gdal.org/frmt_various.html#RPFTOC). Each 
subdataset can be seen as the mosaicing of a subset of the NITF tile and can 
be used easily to mosaic them into a GeoTIFF like

gdal_translate NITF_TOC_ENTRY:CADRG_GNC_5M_1_1:GNCJNCN/rpf/a.toc dest.tif

CADRG products use a very particular compression scheme, named vector 
quantization, that is very efficient (a block of 4x4 pixels is compressed 
into 12 bits) but at the expense of the usual poor quality of CADRG products.
It is not supported by the GDAL NITF driver in creation mode.

With GeoTIFF DEFLATE compression, you will get images about 4 times larger 
than the NITF original tile.

Best regards,
Even

Le Friday 09 January 2009 00:31:41 Charles Chung, vous avez ?crit?:
> Hi all, I am new using GDAL and raster format. Here is my situation.
>
> With GDAL 1.6.0dev, I want to merge or mosaic many NITF files into one NITF
> or GeoTIFF file.
>
> Each NITF file is about 284 KB and its characterists are:
>
> Driver: NITF/National Imagery Transmission Format
> Files: ???????.???
> Size is 1536, 1536
> ...
> Pixel Size = (0.000059486040609,-0.000044956841432)
> ...
> Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
>
> If I use "gdal_merge" with one NITF input file and default settings, the
> default output is GeoTIFF and the size is 2,316 KB.  That's 8 times bigger
> in size even though I used only one input file.  If I output to NITF
> format, the size is also 8 times bigger.  If I merge two NITF files the
> output is about 16 times bigger.
>
> Why the output file size is so much bigger than the input file?  Is there
> settings to make it smaller?
> Basically I want the size of merged files to be about the same size as the
> sum of input file size.
>
> Thank you.
>
> Charles


From warmerdam at pobox.com  Fri Jan  9 13:45:23 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  9 13:45:42 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
	<F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
Message-ID: <49679B43.4020008@pobox.com>

Greg Ederer wrote:
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  801.0)
> Upper Right (  751.0,    0.0)
> Lower Right (  751.0,  801.0)
> Center      (  375.5,  400.5)
> Band 1 Block=751x2 Type=Float32, ColorInterp=Gray
>   NoData Value=-999
> 
> However, when I attempt to load this GeoTIFF into GeoServer, my ultimate 
> goal, I get:
> 
> class org.vfny.geoserver.global.ConfigurationException: Could not obtain 
> a reader for the CoverageDataSet. Please check the CoverageDataSet 
> configuration!
> 
> I have successfully loaded other GeoTIFFs into GeoServer that were 
> prepared by another member of our team from the same raw binary data 
> using IDL  So, I suspect that there is something amiss with my GeoTIFF.

Greg,

I notice you did not include a GeoTransform tag to indicate the georeferenced
location.  Without this you are not getting valid corner coordninates and
this may be what is preventing GeoServer from reading the file.

Keep in mind that the origin in the geotransform should be the top left corner
of the top left pixel treated as an area.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From greg at ergonosis.com  Fri Jan  9 14:26:56 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Jan  9 14:27:09 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <49679B43.4020008@pobox.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
	<F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
	<49679B43.4020008@pobox.com>
Message-ID: <5D36EFE7-9318-4D60-8E60-9697557BA350@ergonosis.com>

Hi Frank,

I see:

   <GeoTransform>440720.0, 60.0, 0.0, 3751320.0, 0.0, -60.0</ 
GeoTransform>

given as an example in the Virtual Format Tutorial.  And, I have been  
looking at the GDAL Data Model documentation trying to figure out how  
to compute these values for my input files.  The docs say:

<begin docs>
Affine GeoTransform
GDAL datasets have two ways of describing the relationship between  
raster positions (in pixel/line coordinates) and georeferenced  
coordinates. The first, and most commonly used is the affine transform  
(the other is GCPs).

The affine transform consists of six coefficients returned by  
GDALDataset::GetGeoTransform() which map pixel/line coordinates into  
georeferenced space using the following relationship:

     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)

In case of north up images, the GT(2) and GT(4) coefficients are zero,  
and the GT(1) is pixel width, and GT(5) is pixel height. The  
(GT(0),GT(3)) position is the top left corner of the top left pixel of  
the raster.

Note that the pixel/line coordinates in the above are from (0.0,0.0)  
at the top left corner of the top left pixel to  
(width_in_pixels,height_in_pixels) at the bottom right corner of the  
bottom right pixel. The pixel/line location of the center of the top  
left pixel would therefore be (0.5,0.5).
</end docs>

But, I'm still unsure how to compute the required values.  The docs  
don't give units for GT(1) and GT(5), and for GT(0) and GT(3).  My  
data have a resolution of 0.1 deg lat X 0.1 deg lon, and the upper  
left lat/lon is 40N,20W.  Could you give me some pointers on how to  
compute the transform values?

Thanks, again!

Greg

On Jan 9, 2009, at 10:45 AM, Frank Warmerdam wrote:

> Greg Ederer wrote:
>> Metadata:
>>  AREA_OR_POINT=Area
>> Image Structure Metadata:
>>  INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  801.0)
>> Upper Right (  751.0,    0.0)
>> Lower Right (  751.0,  801.0)
>> Center      (  375.5,  400.5)
>> Band 1 Block=751x2 Type=Float32, ColorInterp=Gray
>>  NoData Value=-999
>> However, when I attempt to load this GeoTIFF into GeoServer, my  
>> ultimate goal, I get:
>> class org.vfny.geoserver.global.ConfigurationException: Could not  
>> obtain a reader for the CoverageDataSet. Please check the  
>> CoverageDataSet configuration!
>> I have successfully loaded other GeoTIFFs into GeoServer that were  
>> prepared by another member of our team from the same raw binary  
>> data using IDL  So, I suspect that there is something amiss with my  
>> GeoTIFF.
>
> Greg,
>
> I notice you did not include a GeoTransform tag to indicate the  
> georeferenced
> location.  Without this you are not getting valid corner  
> coordninates and
> this may be what is preventing GeoServer from reading the file.
>
> Keep in mind that the origin in the geotransform should be the top  
> left corner
> of the top left pixel treated as an area.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From warmerdam at pobox.com  Fri Jan  9 15:21:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  9 15:22:06 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <5D36EFE7-9318-4D60-8E60-9697557BA350@ergonosis.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
	<F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
	<49679B43.4020008@pobox.com>
	<5D36EFE7-9318-4D60-8E60-9697557BA350@ergonosis.com>
Message-ID: <4967B1D5.8050400@pobox.com>

Greg Ederer wrote:
...
> Note that the pixel/line coordinates in the above are from (0.0,0.0) at 
> the top left corner of the top left pixel to 
> (width_in_pixels,height_in_pixels) at the bottom right corner of the 
> bottom right pixel. The pixel/line location of the center of the top 
> left pixel would therefore be (0.5,0.5).
> </end docs>
> 
> But, I'm still unsure how to compute the required values.  The docs 
> don't give units for GT(1) and GT(5), and for GT(0) and GT(3).  My data 
> have a resolution of 0.1 deg lat X 0.1 deg lon, and the upper left 
> lat/lon is 40N,20W.  Could you give me some pointers on how to compute 
> the transform values?

Greg,

The geotransform coordinate system is whatever is defined by the <SRS>
tag.  So in your case I believe long/lat WGS84.

I imagine your GeoTransform would be:

   -20.05, 0.1, 0.0, 40.05, 0, 0.1

This is assuming that the upper left corner really reflects the center
of the top left pixel in which case a half pixel offset is needed.  I'm
also assuming north up image orientation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From greg at ergonosis.com  Fri Jan  9 15:31:56 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Jan  9 15:32:06 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <4967B1D5.8050400@pobox.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
	<F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
	<49679B43.4020008@pobox.com>
	<5D36EFE7-9318-4D60-8E60-9697557BA350@ergonosis.com>
	<4967B1D5.8050400@pobox.com>
Message-ID: <134B662E-B800-46AE-9FBE-9CDFDEADE318@ergonosis.com>

That did the trick.  Thanks!

Greg


On Jan 9, 2009, at 12:21 PM, Frank Warmerdam wrote:

> Greg Ederer wrote:
> ...
>> Note that the pixel/line coordinates in the above are from  
>> (0.0,0.0) at the top left corner of the top left pixel to  
>> (width_in_pixels,height_in_pixels) at the bottom right corner of  
>> the bottom right pixel. The pixel/line location of the center of  
>> the top left pixel would therefore be (0.5,0.5).
>> </end docs>
>> But, I'm still unsure how to compute the required values.  The docs  
>> don't give units for GT(1) and GT(5), and for GT(0) and GT(3).  My  
>> data have a resolution of 0.1 deg lat X 0.1 deg lon, and the upper  
>> left lat/lon is 40N,20W.  Could you give me some pointers on how to  
>> compute the transform values?
>
> Greg,
>
> The geotransform coordinate system is whatever is defined by the <SRS>
> tag.  So in your case I believe long/lat WGS84.
>
> I imagine your GeoTransform would be:
>
>  -20.05, 0.1, 0.0, 40.05, 0, 0.1
>
> This is assuming that the upper left corner really reflects the center
> of the top left pixel in which case a half pixel offset is needed.   
> I'm
> also assuming north up image orientation.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From greg at ergonosis.com  Fri Jan  9 16:20:25 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Jan  9 16:20:35 2009
Subject: [gdal-dev] Unknown file type
In-Reply-To: <4967B1D5.8050400@pobox.com>
References: <49665080.40508@ergonosis.com> <49665A70.5090903@pobox.com>
	<F85BA941-C104-4832-B770-4FB3A1D7B723@ergonosis.com>
	<49679B43.4020008@pobox.com>
	<5D36EFE7-9318-4D60-8E60-9697557BA350@ergonosis.com>
	<4967B1D5.8050400@pobox.com>
Message-ID: <DD70D025-D42C-4ED4-8399-09C6467CD518@ergonosis.com>

Hi Frank,

Just FYI, I had to flip the sign on the pixel height parameter:

   -20.05, 0.1, 0.0, 40.05, 0.0, -0.1

Many thanks!

Greg


On Jan 9, 2009, at 12:21 PM, Frank Warmerdam wrote:

> Greg Ederer wrote:
> ...
>> Note that the pixel/line coordinates in the above are from  
>> (0.0,0.0) at the top left corner of the top left pixel to  
>> (width_in_pixels,height_in_pixels) at the bottom right corner of  
>> the bottom right pixel. The pixel/line location of the center of  
>> the top left pixel would therefore be (0.5,0.5).
>> </end docs>
>> But, I'm still unsure how to compute the required values.  The docs  
>> don't give units for GT(1) and GT(5), and for GT(0) and GT(3).  My  
>> data have a resolution of 0.1 deg lat X 0.1 deg lon, and the upper  
>> left lat/lon is 40N,20W.  Could you give me some pointers on how to  
>> compute the transform values?
>
> Greg,
>
> The geotransform coordinate system is whatever is defined by the <SRS>
> tag.  So in your case I believe long/lat WGS84.
>
> I imagine your GeoTransform would be:
>
>  -20.05, 0.1, 0.0, 40.05, 0, 0.1
>
> This is assuming that the upper left corner really reflects the center
> of the top left pixel in which case a half pixel offset is needed.   
> I'm
> also assuming north up image orientation.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From gregcoats at mac.com  Fri Jan  9 17:07:58 2009
From: gregcoats at mac.com (Greg Coats)
Date: Fri Jan  9 17:08:03 2009
Subject: [gdal-dev] gdal_translate syntax input separate R, G,
	B output combined RGB
Message-ID: <76C08ABF-4EF5-41E5-B00A-07DA4853DFEE@mac.com>

I have 3 single band GeoTIF images of the same geographic area: one  
for the Red band, one for the Green band, and one for the Blue band,  
gtif_R.tif, gtif_G.tif, gtif_B.tif.  Please, what is the  
gdal_translate syntax http://www.gdal.org/gdal_translate.html to  
combine these 3 single band GeoTIF images into 1 three band RGB  
GeoTIF image, gtif_RGB.tif?
From gregcoats at mac.com  Fri Jan  9 16:12:58 2009
From: gregcoats at mac.com (Greg Coats)
Date: Fri Jan  9 17:13:01 2009
Subject: [gdal-dev] gdal_translate input separate R,G,B output combined RGB
Message-ID: <BD745AD8-0AAF-4A41-B4C5-00751F12BCDF@mac.com>

I have 3 single band GeoTIF images of the same geographic area: one  
for the Red band, one for the Green band, and one for the Blue band,  
gtif_R.tif, gtif_G.tif, gtif_B.tif.  Please, what is the  
gdal_translate syntax http://www.gdal.org/gdal_translate.html to  
combine these 3 single band GeoTIF images into 1 three band RGB GeoTIF  
image, gtif_RGB.tif?  Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090109/ad90cb02/attachment.html
From mail at carl-johansson.com  Fri Jan  9 17:47:15 2009
From: mail at carl-johansson.com (carlj88)
Date: Fri Jan  9 17:47:16 2009
Subject: [Gdal-dev] Using mgrs.h in NITF
In-Reply-To: <49662F2A.5050902@pobox.com>
References: <1231412711884-2127339.post@n2.nabble.com>
	<49662F2A.5050902@pobox.com>
Message-ID: <1231541235312-2135714.post@n2.nabble.com>


You're right, thank you!

Again, I have exhausted every other possibility and got stuck after building
the sources for mgrs etc.

In the dt_cc/redhat_linux (I run ubuntu) directory I successfully build the
sources. I then try to create a small program from within that folder like
this:

#include <stdio.h>
#include "mgrs.h"

int main() {
        printf("MGRS Converter Tests Mark I\n");

        double lat;
        double lon;
        long prec;
        char *mgrsstr;
        long status;

        lon = -75.0;
        lat = 35.0;

       status = Convert_Geodetic_To_MGRS(lat, lon, prec, mgrsstr);

        return 0;
}

And compile with

gcc -L. -I../mgrs main.c

Which renders the following exception

/tmp/ccu04U0m.o: In function `main':
main.c:(.text+0x52): undefined reference to `Convert_Geodetic_To_MGRS'
collect2: ld returned 1 exit status

I'm still learning C/C++ but from what I read it is missing some library. It
doesn't complain about missing mgrs.h.

Most greatful, threre isn't really any one else


Frank Warmerdam wrote:
> 
> carlj88 wrote:
>> I want to convert geodetic coordinates to MGRS using the code from
>> frmts/nitf/mgrs.c in my QT-application. How do I access these functions
>> from
>> my c++ code? Tried to use 'include "mgrs.h"' but then I don't know how to
>> reference to the function.
>> 
>> I would be most greatful since the web has about nothing to offer on this
>> issue.
>> 
>> Carl Johansson
> 
> Carl,
> 
> First, the MGRS support code in gdal/frmts/nitf is intended primariliy for
> use with the NITF driver internals, not for public use.  You *can* use
> it publically, but it isn't supported and might be fragile.
> 
> The function you would apparently want to call is
> Convert_Geodetic_To_MGRS()
> but it seems this function does not exist in mgrs.c.  I'm not sure if I
> removed
> it to simplfy things - since I didn't need it, or what.
> 
> Well, on reflection, I guess you should go back to the original geotrans
> source to get the MGRS conversion code.  If you can't find the GeoTrans
> source via a google search let me know know and I'll provide a stashed
> copy
> I must have somewhere.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://n2.nabble.com/Using-mgrs.h-in-NITF-tp2127339p2135714.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Jan  9 18:02:20 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  9 18:02:32 2009
Subject: [gdal-dev] Motion: GDAL/OGR 1.5.4 Release
In-Reply-To: <4964E7D0.6090601@pobox.com>
References: <4964E7D0.6090601@pobox.com>
Message-ID: <200901100002.21589.even.rouault@mines-paris.org>

Le Wednesday 07 January 2009 18:35:12, vous avez ?crit?:
>   * #???? (PG): Fix crash on GetFeature(fid) where fid is invalid.

#???? is #2767

>
> Motion: To promote the GDAL 1.5.4 RC1 release candidate to be our official
> GDAL 1.5.4 release.

+ 1

Even
From frdcn at hotmail.com  Fri Jan  9 20:54:05 2009
From: frdcn at hotmail.com (godofredo contreras)
Date: Fri Jan  9 20:55:08 2009
Subject: [gdal-dev] ogrinfo and ogr2ogr are unable to open AVCE00 files
Message-ID: <COL103-W790E174E79D5B74043144EB2DA0@phx.gbl>


Hi:

I?m trying to open e00 files using ogr but it fails with the
message "unable to open datasource file.e00 with the following
 drivers" and the list of driver in ogrinfo --formats show
AVCE00 driver.

I`m using the ogr files bundled with fwtools, the version of
ogrinfo --version shows GDAL 1.6.0.

Is this a bug in ogr? or it can`t open e00 files?

Regards
Godofredo Contreras


_________________________________________________________________
Windows Live? Hotmail?: Chat. Store. Share. Do more with mail. 
http://windowslive.com/explore?ocid=TXT_TAGLM_WL_t1_hm_justgotbetter_explore_012009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090110/6ddbb501/attachment.html
From yann.chemin at gmail.com  Sat Jan 10 02:16:18 2009
From: yann.chemin at gmail.com (Yann Chemin)
Date: Sat Jan 10 02:16:25 2009
Subject: [gdal-dev] reproject points using raster info
Message-ID: <4f37eb890901092316v1cb18845nbedf9872e91ede1d@mail.gmail.com>

Hello,

(C API)

The aim is to get a (lat,long) pair
into (projX,projY) pair from hDataset1 projection info.

Lat/long projection was defined with:

char    *pszProj4 = "+proj=ll +ellps=wgs84 +datum=wgs84";
OGRSpatialReferenceH hSRS;
OSRImportFromProj4(hSRS, pszProj4);
printf( "%s\n", pszProj4 );

Using GDALGetProjectionRef( hDataset1 ),
the raster projection info is extracted.

Here somehow the extracted projection information
should be imported into a second OGRSpatialReferenceH,
called hSRS1 for example. But I don't know how to do that.

I am confused by the C++ examples actually,
and have difficulties to find a proper C example somewhere to do that.

thanks for any help/suggestion,
Yann
From mail at carl-johansson.com  Sat Jan 10 18:44:19 2009
From: mail at carl-johansson.com (carlj88)
Date: Sat Jan 10 18:44:20 2009
Subject: [Gdal-dev] Using mgrs.h in NITF
In-Reply-To: <1231541235312-2135714.post@n2.nabble.com>
References: <1231412711884-2127339.post@n2.nabble.com>
	<49662F2A.5050902@pobox.com>
	<1231541235312-2135714.post@n2.nabble.com>
Message-ID: <1231631059185-2139695.post@n2.nabble.com>


Nope, I got it! Thank you again!


carlj88 wrote:
> 
> You're right, thank you!
> 
> Again, I have exhausted every other possibility and got stuck after
> building the sources for mgrs etc.
> 
> In the dt_cc/redhat_linux (I run ubuntu) directory I successfully build
> the sources. I then try to create a small program from within that folder
> like this:
> 
> #include <stdio.h>
> #include "mgrs.h"
> 
> int main() {
>         printf("MGRS Converter Tests Mark I\n");
> 
>         double lat;
>         double lon;
>         long prec;
>         char *mgrsstr;
>         long status;
> 
>         lon = -75.0;
>         lat = 35.0;
> 
>        status = Convert_Geodetic_To_MGRS(lat, lon, prec, mgrsstr);
> 
>         return 0;
> }
> 
> And compile with
> 
> gcc -L. -I../mgrs main.c
> 
> Which renders the following exception
> 
> /tmp/ccu04U0m.o: In function `main':
> main.c:(.text+0x52): undefined reference to `Convert_Geodetic_To_MGRS'
> collect2: ld returned 1 exit status
> 
> I'm still learning C/C++ but from what I read it is missing some library.
> It doesn't complain about missing mgrs.h.
> 
> Most greatful, threre isn't really any one else
> 
> 
> Frank Warmerdam wrote:
>> 
>> carlj88 wrote:
>>> I want to convert geodetic coordinates to MGRS using the code from
>>> frmts/nitf/mgrs.c in my QT-application. How do I access these functions
>>> from
>>> my c++ code? Tried to use 'include "mgrs.h"' but then I don't know how
>>> to
>>> reference to the function.
>>> 
>>> I would be most greatful since the web has about nothing to offer on
>>> this
>>> issue.
>>> 
>>> Carl Johansson
>> 
>> Carl,
>> 
>> First, the MGRS support code in gdal/frmts/nitf is intended primariliy
>> for
>> use with the NITF driver internals, not for public use.  You *can* use
>> it publically, but it isn't supported and might be fragile.
>> 
>> The function you would apparently want to call is
>> Convert_Geodetic_To_MGRS()
>> but it seems this function does not exist in mgrs.c.  I'm not sure if I
>> removed
>> it to simplfy things - since I didn't need it, or what.
>> 
>> Well, on reflection, I guess you should go back to the original geotrans
>> source to get the MGRS conversion code.  If you can't find the GeoTrans
>> source via a google search let me know know and I'll provide a stashed
>> copy
>> I must have somewhere.
>> 
>> Best regards,
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for Rent
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> 

-- 
View this message in context: http://n2.nabble.com/Using-mgrs.h-in-NITF-tp2127339p2139695.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Sun Jan 11 00:51:16 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 11 00:51:36 2009
Subject: [gdal-dev] ogrinfo and ogr2ogr are unable to open AVCE00 files
In-Reply-To: <COL103-W790E174E79D5B74043144EB2DA0@phx.gbl>
References: <COL103-W790E174E79D5B74043144EB2DA0@phx.gbl>
Message-ID: <496988D4.6060809@pobox.com>

godofredo contreras wrote:
> Hi:
> 
> I?m trying to open e00 files using ogr but it fails with the
> message "unable to open datasource file.e00 with the following
>  drivers" and the list of driver in ogrinfo --formats show
> AVCE00 driver.
> 
> I`m using the ogr files bundled with fwtools, the version of
> ogrinfo --version shows GDAL 1.6.0.
> 
> Is this a bug in ogr? or it can`t open e00 files?

Godofredo,

Can you provide a pointer to the file?  OGR can read some E00 files,
but cannot read raster e00 files.  There may be other particular e00
type files that are also unreadable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Jan 11 00:53:06 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 11 00:53:20 2009
Subject: [gdal-dev] Memory issues when using OGR S57 driver
Message-ID: <49698942.2060603@pobox.com>

gene wrote:
> Good day everyone :)
> 
> I am a new OGR user,  using S57 driver to read ENC chart data. It
> appears that I am having a serious issue with memory not being freed as
> expected. I.e. - I create and initialize an S57Reader (pretty much
> following the example from the source tree), read features, do a bit of
> work (work includes using Clone() method to clone some of the features),
> and then delete all features (using the provided Destroy method for
> safety sake). At this point, it appears that there are still multiple
> objects on the heap that were allocated by OGR at some point. They seem
> to be in direct proportion to the number of features used. I am using
> MacOS and malloc_history shows a number of different items as being
> still allocated, this is also supported by memory size (both RSIZE and
> VSIZE) going up as features are allocated and never decreasing much.
> 
> Is there anything I am overlooking in the way I use the driver or the
> feature data? The issue seems to be too obvious to be an actual problem
> with the library.

Gene,

Is there any particular reason you are using the S57Reader directly
instead of using it through OGR?

I have run valgrind, a memory leak tester, against an ogrinfo dump
of all the features in an S57 dataset and there were no apparent
leaks.  So I imagine if you are seeing a leak, it is likely due
to failure to free something at the application level.

If you want more feedback you should provide a simplified example
of your code that suffers the leakage.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Sun Jan 11 01:29:22 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan 11 01:29:25 2009
Subject: [gdal-dev] gdal_translate syntax input separate R, G,
	B output combined RGB
Message-ID: <eb502d880901102229v2728bc7y7c7893a4899f55b8@mail.gmail.com>

Dear Greg,

I am new here. So correct me if I am wrong.
Try using Virtual Format files. More info at
http://www.gdal.org/gdal_vrttut.html

You should be able to create a VRTRasterBand for each band with the
corresponding source.
gtif_RGB.vrt would look something like this...

<VRTDataset rasterXSize="1172" rasterYSize="1864">
  <VRTRasterBand dataType="Byte" band="1">
    <SourceFilename relativetoVRT="1">gtif_R.tif</SourceFilename>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <SourceFilename relativetoVRT="1">gtif_G.tif</SourceFilename>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <SourceFilename relativetoVRT="1">gtif_B.tif</SourceFilename>
  </VRTRasterBand>
</VRTDataset>

--
Chaitanya kumar CH.

Greg Coats wrote:
> I have 3 single band GeoTIF images of the same geographic area: one
> for the Red band, one for the Green band, and one for the Blue band,
> gtif_R.tif, gtif_G.tif, gtif_B.tif.  Please, what is the
> gdal_translate syntax http://www.gdal.org/gdal_translate.html to
> combine these 3 single band GeoTIF images into 1 three band RGB
> GeoTIF image, gtif_RGB.tif?
From warmerdam at pobox.com  Sun Jan 11 01:42:22 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 11 01:42:37 2009
Subject: [gdal-dev] gdal_translate syntax input separate R, G, B output
	combined RGB
In-Reply-To: <eb502d880901102229v2728bc7y7c7893a4899f55b8@mail.gmail.com>
References: <eb502d880901102229v2728bc7y7c7893a4899f55b8@mail.gmail.com>
Message-ID: <496994CE.70000@pobox.com>

Chaitanya,

Yes, this method would certainly work!  My private suggestion
to Greg was that he use the gdal_merge.py script with the -separate
switch which stacks input files as bands in a merged file.

But the VRT method would also work well.

Best regards,

Chaitanya kumar CH wrote:
> Dear Greg,
> 
> I am new here. So correct me if I am wrong.
> Try using Virtual Format files. More info at
> http://www.gdal.org/gdal_vrttut.html
> 
> You should be able to create a VRTRasterBand for each band with the
> corresponding source.
> gtif_RGB.vrt would look something like this...
> 
> <VRTDataset rasterXSize="1172" rasterYSize="1864">
>   <VRTRasterBand dataType="Byte" band="1">
>     <SourceFilename relativetoVRT="1">gtif_R.tif</SourceFilename>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="2">
>     <SourceFilename relativetoVRT="1">gtif_G.tif</SourceFilename>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Byte" band="3">
>     <SourceFilename relativetoVRT="1">gtif_B.tif</SourceFilename>
>   </VRTRasterBand>
> </VRTDataset>
> 
> --
> Chaitanya kumar CH.
> 
> Greg Coats wrote:
>> I have 3 single band GeoTIF images of the same geographic area: one
>> for the Red band, one for the Green band, and one for the Blue band,
>> gtif_R.tif, gtif_G.tif, gtif_B.tif.  Please, what is the
>> gdal_translate syntax http://www.gdal.org/gdal_translate.html to
>> combine these 3 single band GeoTIF images into 1 three band RGB
>> GeoTIF image, gtif_RGB.tif?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at cleverelephant.ca  Sun Jan 11 17:00:53 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sun Jan 11 17:00:57 2009
Subject: [gdal-dev] Toronto Code Sprint: March 7-10
Message-ID: <30fe546d0901111400i4b192724w439de72641c91e79@mail.gmail.com>

Community members,

Reminder, there is a Code Sprint event occurring this spring that
members of the "C tribe" of open source GIS projects might be
interested in attending.

  http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

We have space for only about five more attendees, and a couple more
sponsors, so don't be shy (sponsors please contact me directly). Those
who have already signed up, please finalize your travel plans and mark
your attendance confirmed ASAP in case we have to cap attendance at
the event as we approach the date.

Thanks,

Paul
From DCarreira at edia.pt  Mon Jan 12 04:54:49 2009
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon Jan 12 05:57:47 2009
Subject: [gdal-dev] arcsde plugins for 1.6
Message-ID: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AB15B7@beja012.edia.pt>

Hi.

I'm looking for 1.6 binaries for gdal and ogr plugins for ArcSDE and can't find any in FWTools nor OSGeo distributions... is there anywhere I could get these?

Thanks.
Duarte Carreira
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090112/41677334/attachment.html
From warmerdam at pobox.com  Mon Jan 12 13:53:34 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 12 13:53:58 2009
Subject: [gdal-dev] ECW Plugin for GDAL 1.6 Available
Message-ID: <496B91AE.407@pobox.com>

Folks,

I have built the ECW Plugin for GDAL 1.6.  I have packaged it as an
OSGeo4W package (gdal16-ecw), and as a zip for the standard GDAL binaries
directory.

   http://trac.osgeo.org/osgeo4w/wiki/pkg-gdal16-ecw

and

   http://download.osgeo.org/gdal/win32/1.6/

Note that either depends on the user downloading and installing the appropriate
DLLs from the Erdas web site themselves as described in the OSGeo4W package
description.

I'd appreciate hearing about any problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Mon Jan 12 14:05:12 2009
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Mon Jan 12 14:05:15 2009
Subject: [gdal-dev] GDAL JAVA problem
Message-ID: <20090112190512.23669.qmail@s466.sureserver.com>

Hi there,

I was able to run the gdalinfo.java demo source both in Linux and Windows by setting up a NetBeans Java App. I 
just needed to add gdal.jar to the projects "libraries" and add the "gdaljni.dll" folder path to the VM Options like 
that: "-Djava.library.path=E:\<path>". Now I am trying to replicate the same success history to a Java Web App but 
I am getting a this run time error:

{{{
root cause 

javax.servlet.ServletException: java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.AllRegister()V
	org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:852)
	org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:781)
	org.apache.jsp.response_jsp._jspService(response_jsp.java:109)
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:390)

}}}

It seams to me that when the JSP calls my Java class, on the "gdal.AllRegister()", it cannot find or it cannot load the 
gdaljni.dll even though the JVM is using the same -Djava.library.path as in the Java App.

I confess that I don't have a lot of experience with that environment so it could be that I am missing something 
very simple.

Any advise would be welcome.

Ivan





From ivan.lucena at pmldnet.com  Mon Jan 12 14:26:28 2009
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Mon Jan 12 14:26:30 2009
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gR0RBTCBKQVZBIHByb2JsZW0=?=
Message-ID: <20090112192628.32037.qmail@s466.sureserver.com>

Never mind.

I just copied osrjni.dll, gdalsontjni.dll, gdaljni.dll and ogrjni.dll to ../Java/jre/bin and it worked just fine. 

There must be another way to keep those dll in another place. :(

Regards,

Ivan


>  -------Original Message-------
>  From: Lucena, Ivan <ivan.lucena@pmldnet.com>
>  Subject: [gdal-dev] GDAL JAVA problem
>  Sent: Jan 12 '09 19:05
>  
>  Hi there,
>  
>  I was able to run the gdalinfo.java demo source both in Linux and Windows by setting up a NetBeans Java App. I
>  just needed to add gdal.jar to the projects "libraries" and add the "gdaljni.dll" folder path to the VM Options like
>  that: "-Djava.library.path=E:\<path>". Now I am trying to replicate the same success history to a Java Web App 
but
>  I am getting a this run time error:
>  
>  {{{
>  root cause
>  
>  javax.servlet.ServletException: java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.AllRegister()V
>  org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:852)
>  org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:781)
>  org.apache.jsp.response_jsp._jspService(response_jsp.java:109)
>  org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
>  javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
>  org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
>  org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
>  org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
>  javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
>  org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:390)
>  
>  }}}
>  
>  It seams to me that when the JSP calls my Java class, on the "gdal.AllRegister()", it cannot find or it cannot load 
the
>  gdaljni.dll even though the JVM is using the same -Djava.library.path as in the Java App.
>  
>  I confess that I don't have a lot of experience with that environment so it could be that I am missing something
>  very simple.
>  
>  Any advise would be welcome.
>  
>  Ivan
>  
>  
>  
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From frdcn at hotmail.com  Mon Jan 12 15:04:54 2009
From: frdcn at hotmail.com (godofredo contreras)
Date: Mon Jan 12 15:04:56 2009
Subject: [gdal-dev] ogrinfo and ogr2ogr are unable to open AVCE00 files
In-Reply-To: <496988D4.6060809@pobox.com>
References: <COL103-W790E174E79D5B74043144EB2DA0@phx.gbl>
	<496988D4.6060809@pobox.com>
Message-ID: <COL103-W1B82EB22B15D768832AE4B2D80@phx.gbl>


> godofredo contreras wrote:> > Hi:> > > > I?m trying to open e00 files using ogr but it fails with the> > message "unable to open datasource file.e00 with the following> > drivers" and the list of driver in ogrinfo --formats show> > AVCE00 driver.> > > > I`m using the ogr files bundled with fwtools, the version of> > ogrinfo --version shows GDAL 1.6.0.> > > > Is this a bug in ogr? or it can`t open e00 files?> > Godofredo,> > Can you provide a pointer to the file? OGR can read some E00 files,> but cannot read raster e00 files. There may be other particular e00> type files that are also unreadable.> 
Hi Frank,
 
I downloaded the e00 files from this url http://www.mass.gov/mgis/ftpgnm.htm
I also made a test translating the file to binary and ogr tools works correctly
with the binary version of the file.
 
Regards Godofredo Contreras
 
_________________________________________________________________
Windows Live?: Keep your life in sync. 
http://windowslive.com/howitworks?ocid=TXT_TAGLM_WL_t1_allup_howitworks_012009
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090112/785e6114/attachment.html
From bclay at ball.com  Mon Jan 12 17:22:09 2009
From: bclay at ball.com (Clay, Bruce)
Date: Mon Jan 12 17:22:13 2009
Subject: [gdal-dev] Get pixel value by lat and long
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402ABF548@daytonmsg2k3.AERO.BALL.COM>

I have searched the web and not found any methods to call so I thought I
would check before writing one.

 

I need to get the pixel value of a land use raster based on a user
selected latitude and longitude.

I know I can get the spatial reference of raster and the pixel size to
calculate the right band but this seems like a function that would
already be some level of the library already.

 

Is there a method that I missed somewhere?

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090112/bb7d8abf/attachment.html
From warmerdam at pobox.com  Mon Jan 12 17:48:15 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 12 17:48:38 2009
Subject: [gdal-dev] ogrinfo and ogr2ogr are unable to open AVCE00 files
In-Reply-To: <COL103-W1B82EB22B15D768832AE4B2D80@phx.gbl>
References: <COL103-W790E174E79D5B74043144EB2DA0@phx.gbl>
	<496988D4.6060809@pobox.com>
	<COL103-W1B82EB22B15D768832AE4B2D80@phx.gbl>
Message-ID: <496BC8AF.9020106@pobox.com>

godofredo contreras wrote:
> Hi Frank,
>  
> I downloaded the e00 files from this url http://www.mass.gov/mgis/ftpgnm.htm
> I also made a test translating the file to binary and ogr tools works 
> correctly
> with the binary version of the file.

Godofredo,

I have confirmed your report and filed this as ticket:

   http://trac.osgeo.org/gdal/ticket/2776

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 12 17:55:44 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 12 17:56:02 2009
Subject: [gdal-dev] Get pixel value by lat and long
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402ABF548@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402ABF548@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <496BCA70.4010403@pobox.com>

Clay, Bruce wrote:
> I have searched the web and not found any methods to call so I thought I 
> would check before writing one.
> 
>  
> 
> I need to get the pixel value of a land use raster based on a user 
> selected latitude and longitude.
> 
> I know I can get the spatial reference of raster and the pixel size to 
> calculate the right band but this seems like a function that would 
> already be some level of the library already. 
> 
> Is there a method that I missed somewhere?

Bruce,

I am not aware of any convenience function for this sort of task in GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tosborn at sbcglobal.net  Mon Jan 12 22:55:04 2009
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Mon Jan 12 22:55:06 2009
Subject: [Gdal-dev] Supressing aux.xml file generation from gdal_translate
Message-ID: <1231818904580-2149430.post@n2.nabble.com>


Is there a way to supress aux.xml file generation when using gdal_translate? 
Thanks.
-- 
View this message in context: http://n2.nabble.com/Supressing-aux.xml-file-generation-from-gdal_translate-tp2149430p2149430.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Mon Jan 12 23:26:37 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 12 23:26:50 2009
Subject: [Gdal-dev] Supressing aux.xml file generation from gdal_translate
In-Reply-To: <1231818904580-2149430.post@n2.nabble.com>
References: <1231818904580-2149430.post@n2.nabble.com>
Message-ID: <496C17FD.9030407@pobox.com>

Tim Osborn wrote:
> Is there a way to supress aux.xml file generation when using gdal_translate? 
> Thanks.

Tim,

Set the GDAL_PAM_ENABLED configuration variable to the value OFF.  The
easiest way to do this is to set it in the environment.

eg.

set GDAL_PAM_ENABLED=NO

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 12 23:33:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 12 23:33:15 2009
Subject: [gdal-dev] reproject points using raster info
In-Reply-To: <4f37eb890901092316v1cb18845nbedf9872e91ede1d@mail.gmail.com>
References: <4f37eb890901092316v1cb18845nbedf9872e91ede1d@mail.gmail.com>
Message-ID: <496C197D.4010002@pobox.com>

Yann Chemin wrote:
> Hello,
> 
> (C API)
> 
> The aim is to get a (lat,long) pair
> into (projX,projY) pair from hDataset1 projection info.
> 
> Lat/long projection was defined with:
> 
> char    *pszProj4 = "+proj=ll +ellps=wgs84 +datum=wgs84";

Yann,

For a geographic (long/lat) coordinate system you should be
using +proj=longlat, not +proj=ll.

> OGRSpatialReferenceH hSRS;
> OSRImportFromProj4(hSRS, pszProj4);
> printf( "%s\n", pszProj4 );

The Import call looks fine.

> Using GDALGetProjectionRef( hDataset1 ),
> the raster projection info is extracted.
> 
> Here somehow the extracted projection information
> should be imported into a second OGRSpatialReferenceH,
> called hSRS1 for example. But I don't know how to do that.


> I am confused by the C++ examples actually,
> and have difficulties to find a proper C example somewhere to do that.
> 
> thanks for any help/suggestion,
> Yann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

You might find the code from gdalinfo.c which does roughly the opposite
(projected dataset corners to lat/long) helpful.  Some key parts are:

/* -------------------------------------------------------------------- */
/*      Setup projected to lat/long transform if appropriate.           */
/* -------------------------------------------------------------------- */
     if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
         pszProjection = GDALGetProjectionRef(hDataset);

     if( pszProjection != NULL && strlen(pszProjection) > 0 )
     {
         OGRSpatialReferenceH hProj, hLatLong = NULL;

         hProj = OSRNewSpatialReference( pszProjection );
         if( hProj != NULL )
             hLatLong = OSRCloneGeogCS( hProj );

         if( hLatLong != NULL )
         {
             CPLPushErrorHandler( CPLQuietErrorHandler );
             hTransform = OCTNewCoordinateTransformation( hProj, hLatLong );
             CPLPopErrorHandler();

             OSRDestroySpatialReference( hLatLong );
         }

         if( hProj != NULL )
             OSRDestroySpatialReference( hProj );
     }

...
/************************************************************************/
/*                        GDALInfoReportCorner()                        */
/************************************************************************/

static int
GDALInfoReportCorner( GDALDatasetH hDataset,
                       OGRCoordinateTransformationH hTransform,
                       const char * corner_name,
                       double x, double y )

{
     double	dfGeoX, dfGeoY;
     double	adfGeoTransform[6];

     printf( "%-11s ", corner_name );

/* -------------------------------------------------------------------- */
/*      Transform the point into georeferenced coordinates.             */
/* -------------------------------------------------------------------- */
     if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
     {
         dfGeoX = adfGeoTransform[0] + adfGeoTransform[1] * x
             + adfGeoTransform[2] * y;
         dfGeoY = adfGeoTransform[3] + adfGeoTransform[4] * x
             + adfGeoTransform[5] * y;
     }

     else
     {
         printf( "(%7.1f,%7.1f)\n", x, y );
         return FALSE;
     }

/* -------------------------------------------------------------------- */
/*      Report the georeferenced coordinates.                           */
/* -------------------------------------------------------------------- */
     if( ABS(dfGeoX) < 181 && ABS(dfGeoY) < 91 )
     {
         printf( "(%12.7f,%12.7f) ", dfGeoX, dfGeoY );

     }
     else
     {
         printf( "(%12.3f,%12.3f) ", dfGeoX, dfGeoY );
     }

/* -------------------------------------------------------------------- */
/*      Transform to latlong and report.                                */
/* -------------------------------------------------------------------- */
     if( hTransform != NULL
         && OCTTransform(hTransform,1,&dfGeoX,&dfGeoY,NULL) )
     {

         printf( "(%s,", GDALDecToDMS( dfGeoX, "Long", 2 ) );
         printf( "%s)", GDALDecToDMS( dfGeoY, "Lat", 2 ) );
     }

     printf( "\n" );

     return TRUE;
}


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jan 13 00:03:39 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 13 00:03:50 2009
Subject: [gdal-dev] Motion: GDAL/OGR 1.5.4 Release
In-Reply-To: <200901100002.21589.even.rouault@mines-paris.org>
References: <4964E7D0.6090601@pobox.com>
	<200901100002.21589.even.rouault@mines-paris.org>
Message-ID: <496C20AB.6020204@pobox.com>

>> Motion: To promote the GDAL 1.5.4 RC1 release candidate to be our official
>> GDAL 1.5.4 release.

Folks,

I also declare +1 for this based on my limited testing after packaging it
for OSGeo4W.

I declare the motion passes with support from EvenR, DanielM (privately)
and FrankW.

I will promote to release final and issue an announcement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jan 13 01:02:08 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 13 01:02:20 2009
Subject: [gdal-dev] GDAL/OGR 1.5.4 Released
Message-ID: <496C2E60.2030507@pobox.com>

The GDAL/OGR Project Steering Committee is pleased to announce the release
of GDAL/OGR 1.5.4.  This is the latest (and likely second last) release
in the 1.5.x stable series.  It is a bug fix release, with no new features.
The details are described at:

   http://trac.osgeo.org/gdal/wiki/Release/1.5.4-News

The GDAL/OGR 1.5.4 source can be found at:

   http://download.osgeo.org/gdal/gdal-1.5.4.tar.gz
   http://download.osgeo.org/gdal/gdal154.zip

This release is also available as the default GDAL in the OSGeo4W Win32
packaging environment.

   http://osgeo4w.osgeo.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tosborn at sbcglobal.net  Tue Jan 13 01:04:47 2009
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Tue Jan 13 01:04:49 2009
Subject: [Gdal-dev] Supressing aux.xml file generation from gdal_translate
In-Reply-To: <496C17FD.9030407@pobox.com>
References: <1231818904580-2149430.post@n2.nabble.com>
	<496C17FD.9030407@pobox.com>
Message-ID: <1231826687900-2149770.post@n2.nabble.com>


Thanks Frank!

Tim
-- 
View this message in context: http://n2.nabble.com/Supressing-aux.xml-file-generation-from-gdal_translate-tp2149430p2149770.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gregor.fikoczek at wheregroup.com  Tue Jan 13 02:47:01 2009
From: gregor.fikoczek at wheregroup.com (Gregor Fikoczek)
Date: Tue Jan 13 02:47:08 2009
Subject: [gdal-dev] Error (Not enough data for scanline) by using gdaladdo
	with geotiff
In-Reply-To: <44087.212.79.172.164.1231607684.squirrel@vogon.ccgis.de>
References: <200901091551.51357.gregor.fikoczek@wheregroup.com>
	<496793B4.80601@pobox.com>
	<44087.212.79.172.164.1231607684.squirrel@vogon.ccgis.de>
Message-ID: <200901130847.01088.gregor.fikoczek@wheregroup.com>

Am Samstag 10 Januar 2009 18:14:44 schrieb gfikoczek@wheregroup.com:
> > Gregor Fikoczek wrote:
> >> Hi,
> >>
> >> i am using 'GDAL 1.6.0, released 2008/12/04' on (K)Ubuntu 'Linux
> >> 2.6.22-16-generic i686 GNU/Linux'. By using gdaladdo with a geotiff i
> >> get the
> >> following Result/Error:
> >>
> >> gdaladdo -r nearest test.tif 2 4 8 16
> >>
> >> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,
> >> ignoring
> >> and calculating from imagelength
> >> 0Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,
> >> ignoring and calculating from imagelength
> >> ERROR 1:
> >> /home/fikoczek/projekte/bentheim/testbild/8015.9B.tif:DumpModeDecode:
> >> Not enough data for scanline 0
> >> ERROR 1: TIFFReadEncodedTile() failed.
> >> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> >> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> >> ...10...20...30...40...50...60...70...80...90...100 - done.
> >> Overview building failed.
> >>
> >>
> >> Anybody an idea ?????
> >> Something with the libtiff ???
> >
> > Greg,
> >
> > Generally this indicates use of an older libtiff.  If you want to avoid
> > this, I'd suggest configuring --with-libtiff=internal.
> >
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> >----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> Thanks for the answer Frank,
>
> i configured/compiled gdal with "--with-libtiff=internal" but now i'am
> still getting the following Result/Error:
>
> gdaladdo -r nearest 6906.0A.tif 2 4 8 16
>
> 0ERROR 1: DumpModeDecode:Not enough data for scanline 0, expected a
> request for at most 45000 bytes, got a request for 49152 bytes
> ERROR 1: TIFFReadEncodedTile() failed.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> ...10...20...30...40...50...60...70...80...90...100 - done.
> Overview building failed.
>
> Maybe the tiff-file is corrupt, cause the tiff-file 'cea.tif'
> (ftp://ftp.remotesensing.org/pub/geotiff/samples/gdal_eg/cea.tif) works
> fine.
>
> Some information about the not working tiff:
> gdalinfo 6906.0A.tif
>
> Driver: GTiff/GeoTIFF
> Files: 6906.0A.tif
> Size is 10000, 10000
> Coordinate System is `'
> Origin = (2569000.000000000000000,5806500.000000000000000)
> Pixel Size = (0.050000000000000,-0.050000000000000)
> Metadata:
>   TIFFTAG_SOFTWARE=Adobe Photoshop 7.0
>   TIFFTAG_DATETIME=2007:07:10 14:54:00
>   TIFFTAG_XRESOLUTION=508
>   TIFFTAG_YRESOLUTION=508
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 2569000.000, 5806500.000)
> Lower Left  ( 2569000.000, 5806000.000)
> Upper Right ( 2569500.000, 5806500.000)
> Lower Right ( 2569500.000, 5806000.000)
> Center      ( 2569250.000, 5806250.000)
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>
> Hope you or anybody can help me.
>
> Best regards,
> Greg

Hi Frank, 

you were right, with your suggest to compile gdal 
with 'configuring --with-libtiff=internal'. It works now fine. 

My fault was it to use gdaladddo with a geotiff which got already corrupt 
overviews.

Best regards, 
Greg




---------------------------------------
WhereGroup GmbH & Co. KG
Siemensstra?e 8
53121 Bonn
Germany

Gregor Fikoczek
Email: gregor.fikoczek@wheregroup.com
Fon: +49 (0)228 / 90 90 38 - 25
Fax: +49 (0)228 / 90 90 38 - 11

info@wheregroup.com
www.wheregroup.com
Amtsgericht Bonn, HRA 6788
-------------------------------
Komplement?rin:
WhereGroup Verwaltungs GmbH
vertreten durch:
Olaf Knopp, Peter Stamm
---------------------------------------
From ludovic.mercier at gmail.com  Tue Jan 13 03:49:02 2009
From: ludovic.mercier at gmail.com (Ludovic Mercier)
Date: Tue Jan 13 03:49:10 2009
Subject: [gdal-dev] how to acces to PDS meta data
In-Reply-To: <mailman.9063.1231833763.23808.gdal-dev@lists.osgeo.org>
References: <mailman.9063.1231833763.23808.gdal-dev@lists.osgeo.org>
Message-ID: <82aba06c0901130049s662d30f8q730d3699721b3cf8@mail.gmail.com>

Hi all,

I try to use gdal and otb (http://smsc.cnes.fr/PLEIADES/lien3_vm.htm)
with pds file.
I try to get value associated to a key (meta-data).
for an exemple the file : Index of /gdal/data/mc02.img contain :
SPACECRAFT_NAME                = "MARS GLOBAL SURVEYOR"
INSTRUMENT_NAME                = "MARS ORBITER CAMERA"
INSTRUMENT_ID                  = "MOC-WA"
TARGET_NAME                    = "MARS"
FILTER_NAME                    = "RED"

I would like to access to the key/value FILTER_NAME. But the function
GetMetadata return nothing !
I look in the source code (file pdsdataset.cpp) and the interresting
method is "GetKeyword()" but it is a private method.

Is someone have an idea how to get all meta data or specific meta-
data ?

I think is it impossible in fact.. but perhaps is it possible if i add new
functionnality
in the pds driver....


regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090113/cf4eb1b2/attachment.html
From felix.pedrera at deimos-space.com  Tue Jan 13 04:56:41 2009
From: felix.pedrera at deimos-space.com (=?ISO-8859-1?Q?F=E9lix_Pedrera_Garc=EDa?=)
Date: Tue Jan 13 05:03:23 2009
Subject: [gdal-dev] Generate GeoTiff raster file from scattered data with
	concrete colours
Message-ID: <496C6559.80308@deimos-space.com>

Hello,

I would be very thankful to have some guidelines on how to generate a 
GeoTiff raster file from data in a CSV file. The data has this format:

505750,4249750,0
506000,4249750,0
508000,4249750,0
508250,4249750,1
508500,4249750,1
510000,4249750,2
510250,4249750,0
510500,4249750,0
511000,4249750,0
511250,4249750,0
511500,4249750,1
511750,4249750,3
512250,4249750,3
512500,4249750,3
512750,4249750,3
513000,4249750,3
...

The coordinates are expressed in UTM (EPSG:23030), the grid size is 250 
x 250 m, and the extents of the data file is known.

I would like to generate the raster file (GeoTiff) with a pixel 
resolution of  7 px/m. I've managed to generate a single color raster 
(grey scale) with the gdal_grid command, but it would be desirable to 
have the raster file generated with the following colour distribution:

- Transparent if the third field is "0"
- Red, RGB(255;0;0), if the third field is "1"
- Yellow, RGB(255;255;0), if the third field is "2"
- Green, RGB(0;255;0), if the third field is "3".

I don't want the values to be interpolated at all, the unique possible 
values are "0, 1, 2, 3".

Is it possible to have such raster generated using GDAL tools?

The same data is available also in vector format (Mapinfo MIF),  in 
polygons of 250 x 250 m; in case a vector to raster approach is 
preferable.  In this case I've being giving "gdal_rasterize" a try, but 
I'm having problems compiling the code to generate a blank raster with 
the Python and C# GDAL bindings.

Any help on how to focus the solution will be highly appreciated.

Thanks,

-- 
F?lix



From otto.dassau at gmx.de  Tue Jan 13 09:19:54 2009
From: otto.dassau at gmx.de (Otto Dassau)
Date: Tue Jan 13 09:23:37 2009
Subject: [gdal-dev] oci libraries to connect ogr and oracle spatial
Message-ID: <20090113151954.311ea88a@nature>

Hi, 

I want to build gdal with oracle oci support and would like to know, if there is
a list of oracle library packages I need for that. I found this page in the
internet for oracle 11.1.0.7.0:

http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html

with following packages:

Instant Client Package - Basic
Instant Client Package - Basic Lite
Instant Client Package - JDBC Supplement
Instant Client Package - SQL*Plus
Instant Client Package - SDK
Instant Client Package - ODBC
Instant Client Package - WRC
Instant Client Package - Precompiler

Maybe somebody experienced with oracle can give me a hint. Are these client
library packages correct and sufficient or what do I need to be able to connect
to Oracle e.g to export vector layers via ogr?

thanks a lot
 Otto  
From warmerdam at pobox.com  Tue Jan 13 12:43:18 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 13 12:43:36 2009
Subject: [gdal-dev] oci libraries to connect ogr and oracle spatial
In-Reply-To: <20090113151954.311ea88a@nature>
References: <20090113151954.311ea88a@nature>
Message-ID: <496CD2B6.4030505@pobox.com>

Otto Dassau wrote:
> Hi, 
> 
> I want to build gdal with oracle oci support and would like to know, if there is
> a list of oracle library packages I need for that. I found this page in the
> internet for oracle 11.1.0.7.0:
> 
> http://www.oracle.com/technology/software/tech/oci/instantclient/htdocs/linuxsoft.html
> 
> with following packages:
> 
> Instant Client Package - Basic
> Instant Client Package - Basic Lite
> Instant Client Package - JDBC Supplement
> Instant Client Package - SQL*Plus
> Instant Client Package - SDK
> Instant Client Package - ODBC
> Instant Client Package - WRC
> Instant Client Package - Precompiler
> 
> Maybe somebody experienced with oracle can give me a hint. Are these client
> library packages correct and sufficient or what do I need to be able to connect
> to Oracle e.g to export vector layers via ogr?

Otto,

I don't know for sure - SDK sounds promising.

I would encourage you to add any helpful notes after getting through this
to the Oracle build hints page at:

   http://trac.osgeo.org/gdal/wiki/Oracle

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jan 13 13:46:36 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 13 13:46:57 2009
Subject: [gdal-dev] how to acces to PDS meta data
In-Reply-To: <82aba06c0901130049s662d30f8q730d3699721b3cf8@mail.gmail.com>
References: <mailman.9063.1231833763.23808.gdal-dev@lists.osgeo.org>
	<82aba06c0901130049s662d30f8q730d3699721b3cf8@mail.gmail.com>
Message-ID: <496CE18C.1000303@pobox.com>

Ludovic Mercier wrote:
> Hi all,
> 
> I try to use gdal and otb (http://smsc.cnes.fr/PLEIADES/lien3_vm.htm)
> with pds file.
> I try to get value associated to a key (meta-data).
> for an exemple the file : Index of /gdal/data/mc02.img contain :
> SPACECRAFT_NAME                = "MARS GLOBAL SURVEYOR"
> INSTRUMENT_NAME                = "MARS ORBITER CAMERA"
> INSTRUMENT_ID                  = "MOC-WA"
> TARGET_NAME                    = "MARS"
> FILTER_NAME                    = "RED"
> 
> I would like to access to the key/value FILTER_NAME. But the function
> GetMetadata return nothing !
> I look in the source code (file pdsdataset.cpp) and the interresting
> method is "GetKeyword()" but it is a private method.
> 
> Is someone have an idea how to get all meta data or specific meta-
> data ?
> 
> I think is it impossible in fact.. but perhaps is it possible if i add 
> new functionnality
> in the pds driver....

Ludovic,

You are correct that none of these header fields are currently exposed
by the PDS (or ISIS2, and ISIS3) drivers as metadata.  It would be
quite easy to modify the driver to transfer specific keywords and their
associated value to the metadata object, but it is unclear which ones would
be useful.

I have gone ahead and added support in the PDS driver to transfer a bunch
of keywords over.  The gdalinfo results now look like:

...
Origin = (-10668384.903788566589355,3852176.483988761901855)
Pixel Size = (926.115274429321289,-926.115274429321289)
Metadata:
   FILTER_NAME="RED"
   DATA_SET_ID="MGS-M-MOC-4-WAMOS-V1.0"
   PRODUCT_ID="MC02"
   PRODUCER_INSTITUTION_NAME="MALIN SPACE SCIENCE SYSTEMS"
   PRODUCT_TYPE="MOSAIC"
   MISSION_NAME="MARS GLOBAL SURVEYOR"
   SPACECRAFT_NAME="MARS GLOBAL SURVEYOR"
   INSTRUMENT_NAME="MARS ORBITER CAMERA"
   INSTRUMENT_ID="MOC-WA"
   TARGET_NAME="MARS"
   CENTER_FILTER_WAVELENGTH=600.0000
   BANDWIDTH=50.0000
   PRODUCT_CREATION_TIME=2001-11-28T00:00:00
   NOTE="GEODESY CAMPAIGN MOSAIC"
Corner Coordinates:
...

The new support is only in trunk and new keywords can be added quite
easily.

   http://trac.osgeo.org/gdal/changeset/16077

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tripplowe at gmail.com  Tue Jan 13 15:24:22 2009
From: tripplowe at gmail.com (Tripp Lowe)
Date: Tue Jan 13 15:24:26 2009
Subject: [gdal-dev] Write 8-bit image...
Message-ID: <8f0c8ded0901131224l906a6e7oe8e838b57c09b20f@mail.gmail.com>

Hey Folks,

I'm trying to write a perl script to write an 8-bit image.  I've been able
to modify the "Creating a raster dataset" example using Geo::GDAL (
http://map.hut.fi/doc/Geo-GDAL/html/create_raster.html ) to output float32
and U16 images, but I can't figure out how to output an 8-bit image.

I see in the docs that
*"GDAL<http://map.hut.fi/doc/Geo-GDAL/html/class_geo_1_1_g_d_a_l.html>raster
data types are Byte UInt16 Int16 UInt32 Int32 Float32 Float64 CInt16
CInt32 CFloat32 CFloat64"*.

How do I specify an 8-bit data type?

Thanks.
-- 
Tripp Lowe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090113/f988d803/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 13 15:32:23 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Jan 13 15:30:23 2009
Subject: FW: [gdal-dev] how to convert netCDF image 
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6B4@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I use gdal 1.6.0 to ingest netCDF images that are in lat/lon. But they are flipped upside down, and longitude is displayed as around +300E (should be -60E Cdn East shoreline)

I have followed the ticket #2654 and checked the last night's SVN but it was not updated.  So I made changes the netcdfdataset.cpp and netcdfdataset.h according to the patch.

My question is: where do I make another change so that 
if longitude>180 {
  longitude-=360
} ?

thanks,
Shawn

============================================================
gdalinfo owsofa.nc
Driver: netCDF/Network Common Data Format
Files: owsofa.nc
Size is 512, 512
Coordinate System is `'
Metadata:
? NC_GLOBAL#Title=OWS gridded fields
? NC_GLOBAL#Conventions=CF-1.3
Subdatasets:
? SUBDATASET_1_NAME=NETCDF:"owsofa.nc":SST
? SUBDATASET_1_DESC=[105x189] SST (32-bit floating-point)
? SUBDATASET_2_NAME=NETCDF:"owsofa.nc":SST1
? SUBDATASET_2_DESC=[105x189] SST1 (32-bit floating-point)
? SUBDATASET_3_NAME=NETCDF:"owsofa.nc":T150
? SUBDATASET_3_DESC=[105x189] T150 (32-bit floating-point)
Corner Coordinates:
Upper Left? (??? 0.0,??? 0.0)
Lower Left? (??? 0.0,? 512.0)
Upper Right (? 512.0,??? 0.0)
Lower Right (? 512.0,? 512.0)
Center????? (? 256.0,? 256.0)
gdalinfo NETCDF:"owsofa.nc":SST
Driver: netCDF/Network Common Data Format
Files: none associated
Size is 189, 105
Coordinate System is `'
Origin = (284.875000000000000,60.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
? NC_GLOBAL#Title=OWS gridded fields
? NC_GLOBAL#Conventions=CF-1.3
? SST#units=degree_C
? SST#long_name=SST
? SST#start_time=2008-DEC-02 0936
? SST#end_time=2008-DEC-05 0936
? SST#grid_mapping=crs
? SST#_FillValue=1.000000e+35
? lon#units=degrees_east
? lon#long_name=longitude
? lon#standard_name=longitude
? lat#units=degrees_north
? lat#long_name=latitude
? lat#standard_name=latitude
? crs#grid_mapping_name=latitude_longitude
? crs#longitude_of_prime_meridian=0
? crs#semi_major_axis=6.37814e+06
? crs#inverse_flattening=298.257
Corner Coordinates:
Upper Left? (???? 284.875,????? 60.125)
Lower Left? (???? 284.875,????? 33.875)
Upper Right (???? 332.125,????? 60.125)
Lower Right (???? 332.125,????? 33.875)
Center????? (???? 308.500,????? 47.000)
Band 1 Block=189x1 Type=Float32, ColorInterp=Undefined
? NoData Value=1.00000004091847876e+35
? Metadata:
??? NETCDF_VARNAME=SST
From Chris.Barker at noaa.gov  Tue Jan 13 15:33:28 2009
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 13 15:33:31 2009
Subject: [gdal-dev] Write 8-bit image...
In-Reply-To: <8f0c8ded0901131224l906a6e7oe8e838b57c09b20f@mail.gmail.com>
References: <8f0c8ded0901131224l906a6e7oe8e838b57c09b20f@mail.gmail.com>
Message-ID: <496CFA98.1050400@noaa.gov>

Tripp Lowe wrote:
> I see in the docs that /"GDAL 
> <http://map.hut.fi/doc/Geo-GDAL/html/class_geo_1_1_g_d_a_l.html> raster 
> data types are Byte UInt16 Int16 UInt32 Int32 Float32 Float64 CInt16 
> CInt32 CFloat32 CFloat64"/. 
> 
> How do I specify an 8-bit data type?

That would be "Byte" on any machine you're likely to encounter.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From mrxonx at hotmail.com  Tue Jan 13 23:35:44 2009
From: mrxonx at hotmail.com (ogr user)
Date: Tue Jan 13 23:35:47 2009
Subject: [gdal-dev] S57 field definition incorrect
Message-ID: <496D6BA0.7040200@hotmail.com>

I am using OGR to load S57 format files and it appears that at least for
some fields the field type is incorrectly returned by OGR. Fields of
type "integer list" (denoted L in s57attributes.csv,  enumeration list)
are identified as string type by OGRField::GetType(). The problem with
that is that OGRFeature::GetFieldAsIntegerList then refuses to return a
list of integer values for these fields (returns NULL).

Is this a bug, feature or am I doing something incorrectly?

Thanks all!

From warmerdam at pobox.com  Wed Jan 14 02:06:00 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 02:06:11 2009
Subject: [gdal-dev] S57 field definition incorrect
In-Reply-To: <496D6BA0.7040200@hotmail.com>
References: <496D6BA0.7040200@hotmail.com>
Message-ID: <496D8ED8.1000002@pobox.com>

ogr user wrote:
> I am using OGR to load S57 format files and it appears that at least for
> some fields the field type is incorrectly returned by OGR. Fields of
> type "integer list" (denoted L in s57attributes.csv,  enumeration list)
> are identified as string type by OGRField::GetType(). The problem with
> that is that OGRFeature::GetFieldAsIntegerList then refuses to return a
> list of integer values for these fields (returns NULL).
> 
> Is this a bug, feature or am I doing something incorrectly?

Dear OGR User,

It appears the S57 code deliberately treats list attributes as simple
strings.  While this may have been a poor choice, I hesitate to change it
at this point for fear of breaking fragile software built on this driver
(notably the FME S-57 reader).

My suggestion is that you fetch it as a string, and parse the integers
out yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 14 02:10:51 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 02:11:10 2009
Subject: [gdal-dev] /vsisubfile/ and using MrSID SDK for JPEG2000 in NITF
Message-ID: <496D8FFB.3010705@pobox.com>

Folks,

I have implemented a new VSI driver allowing subregions of any file to
be treated as a file object.  The syntax is:

  /vsisubfile/<offset>_<size>,<filename>

So, for instance, to read a jpeg2000 datastream in a file named /data/abc.ntf
with the data stream starting at byte 1000 and being 5000 bytes long you would
use:

   /vsisubfile/1000_5000,/data/abc.ntf

The primary goal of this was allowing the JP2MrSID driver to be used to read
jpeg2000 data from NITF files.  To that end I have modified the NITF driver
in trunk to use this syntax instead of the J2K_SUBFILE: syntax that was
used previously, and depended on special handling in each jpeg2000 driver.

I also discovered a couple quirks in the mrsid driver - in particular
with the custom stream implementation that had been making it's use fail
in some cases with the v7 MrSID SDK.  I have corrected those.

It is now possible, in trunk, to read jpeg2000 nitf files with the MrSID
driver.

I have not yet confirmed the ECW and JP2KAK drivers are still working
properly in this situation, but they ought to be since both supported
VSI*L file streams.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From klokan at klokan.cz  Wed Jan 14 03:11:37 2009
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Jan 14 03:11:40 2009
Subject: [gdal-dev] Auto-clip collar for DRGs/DOQQs/BSBs
Message-ID: <6e41d95b0901140011j3be63158se70eba8e71b1fede@mail.gmail.com>

Hello!

I wonder if there is a script for image analyze and automatic clipping
for the freely available USGS DRGs and NOAA BSBs map sheets...

I guess it is quite often requested functionality and I am sure there
are some implementations for that already available, maybe even
open-source.

Do you know about such script?
Were there some diploma/PhD thesis about this problem (directly
related to DRGs and BSB maps)?
Or are there some already pre-calculated masks/bounding boxes or
polygons for the DRGs and BSBs popular sheets on the net?
What kind of image analyze should be used for this processing
according your idea?

I can imagine that to write an universal function would be hard, but
something what will be able to auto-clip for example NOAA BSBs should
not be as hard, as those maps are using similar palette and are well
aligned to the raster grid as (I think) they were rasterized from the
vector data - not scanned.

I thought about some palette shifts and then detection of the edges,
but I guess it could be done a better way - and maybe somebody already
did it...

It would be nice to present some stitched maps and remove the borders
in the examples of rendering capabilities of GDAL2Tiles at
http://examples.maptiler.org/.

Best reagards

Klokan Petr Pridal

P.S.
I know GlobalMapper software has an implementation of this
functionality, but how to do the same with GDAL to be able to automate
the process?
From ludovic.mercier at gmail.com  Wed Jan 14 03:20:49 2009
From: ludovic.mercier at gmail.com (lidiriel)
Date: Wed Jan 14 03:20:52 2009
Subject: [gdal-dev] Re: how to acces to PDS meta data
In-Reply-To: <496CE18C.1000303@pobox.com>
References: <mailman.9063.1231833763.23808.gdal-dev@lists.osgeo.org> 
	<82aba06c0901130049s662d30f8q730d3699721b3cf8@mail.gmail.com> 
	<496CE18C.1000303@pobox.com>
Message-ID: <ec862410-7e32-42ea-8ba2-db27f9b24018@v13g2000vbb.googlegroups.com>

Thanks for your response. I will look your changeset and try for my
requirements.

On 13 jan, 19:46, Frank Warmerdam <warmer...@pobox.com> wrote:
> Ludovic Mercier wrote:
> > Hi all,
>
> > I try to use gdal and otb (http://smsc.cnes.fr/PLEIADES/lien3_vm.htm)
> > with pds file.
> > I try to get value associated to a key (meta-data).
> > for an exemple the file : Index of /gdal/data/mc02.img contain :
> > SPACECRAFT_NAME ? ? ? ? ? ? ? ?= "MARS GLOBAL SURVEYOR"
> > INSTRUMENT_NAME ? ? ? ? ? ? ? ?= "MARS ORBITER CAMERA"
> > INSTRUMENT_ID ? ? ? ? ? ? ? ? ?= "MOC-WA"
> > TARGET_NAME ? ? ? ? ? ? ? ? ? ?= "MARS"
> > FILTER_NAME ? ? ? ? ? ? ? ? ? ?= "RED"
>
> > I would like to access to the key/value FILTER_NAME. But the function
> > GetMetadata return nothing !
> > I look in the source code (file pdsdataset.cpp) and the interresting
> > method is "GetKeyword()" but it is a private method.
>
> > Is someone have an idea how to get all meta data or specific meta-
> > data ?
>
> > I think is it impossible in fact.. but perhaps is it possible if i add
> > new functionnality
> > in the pds driver....
>
> Ludovic,
>
> You are correct that none of these header fields are currently exposed
> by the PDS (or ISIS2, and ISIS3) drivers as metadata. ?It would be
> quite easy to modify the driver to transfer specific keywords and their
> associated value to the metadata object, but it is unclear which ones would
> be useful.
>
> I have gone ahead and added support in the PDS driver to transfer a bunch
> of keywords over. ?The gdalinfo results now look like:
>
> ...
> Origin = (-10668384.903788566589355,3852176.483988761901855)
> Pixel Size = (926.115274429321289,-926.115274429321289)
> Metadata:
> ? ?FILTER_NAME="RED"
> ? ?DATA_SET_ID="MGS-M-MOC-4-WAMOS-V1.0"
> ? ?PRODUCT_ID="MC02"
> ? ?PRODUCER_INSTITUTION_NAME="MALIN SPACE SCIENCE SYSTEMS"
> ? ?PRODUCT_TYPE="MOSAIC"
> ? ?MISSION_NAME="MARS GLOBAL SURVEYOR"
> ? ?SPACECRAFT_NAME="MARS GLOBAL SURVEYOR"
> ? ?INSTRUMENT_NAME="MARS ORBITER CAMERA"
> ? ?INSTRUMENT_ID="MOC-WA"
> ? ?TARGET_NAME="MARS"
> ? ?CENTER_FILTER_WAVELENGTH=600.0000
> ? ?BANDWIDTH=50.0000
> ? ?PRODUCT_CREATION_TIME=2001-11-28T00:00:00
> ? ?NOTE="GEODESY CAMPAIGN MOSAIC"
> Corner Coordinates:
> ...
>
> The new support is only in trunk and new keywords can be added quite
> easily.
>
> ? ?http://trac.osgeo.org/gdal/changeset/16077
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, warmer...@pobox.com
> light and sound - activate the windows |http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Wed Jan 14 04:15:37 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Jan 14 04:15:49 2009
Subject: [gdal-dev] BigTIFF overview with gdaladdo?
Message-ID: <loom.20090114T090921-434@post.gmane.org>

Hi,

Is there a switch for telling gdaladdo to create external overview in BigTIFF
format?  Would BigTIFF overviews even work?  I tried to create external
overviews for such a big BigTIFF image that even jpeg compressed .ovr file
exceeded the 4 GB limit and creation failed therefore.

Regards,

-Jukka Rahkonen-

From mrxonx at hotmail.com  Wed Jan 14 07:40:24 2009
From: mrxonx at hotmail.com (ogr user)
Date: Wed Jan 14 07:40:31 2009
Subject: [gdal-dev] S57 field definition incorrect
In-Reply-To: <496D8ED8.1000002@pobox.com>
References: <496D6BA0.7040200@hotmail.com> <496D8ED8.1000002@pobox.com>
Message-ID: <496DDD38.5050809@hotmail.com>

I see that now in code. I added my own wrapper to parse the list, but
there are two issues remaining:
1) efficiency - if a field must be read multiple times, string will have
to be parsed multiple times, whereas if it were treated as integer list
from the start, string parsing would be done once. This may not be much,
but it adds up when thousands of features are processed.
2) it is impossible to define default behavior for integer list fields,
because they self-identify as strings - i.e. even if I were to parse it
in my code (which I do now), I have to know from another source whether
the field is an integer list.

May be it coud be done as an option, controlled by flag to a class
registrar (and default behavior be made as it was previously)?


Frank Warmerdam wrote:
>
> Dear OGR User,
>
> It appears the S57 code deliberately treats list attributes as simple
> strings.  While this may have been a poor choice, I hesitate to change it
> at this point for fear of breaking fragile software built on this driver
> (notably the FME S-57 reader).
>
> My suggestion is that you fetch it as a string, and parse the integers
> out yourself.
>
> Best regards,

From k.dejong at geo.uu.nl  Wed Jan 14 07:50:38 2009
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Wed Jan 14 08:18:49 2009
Subject: [gdal-dev] Destroying OGRGeometry objects
Message-ID: <200901141350.38638.k.dejong@geo.uu.nl>

Hi all,

In my code I am stealing the OGRFeature's OGRGeometry objects
(OGRFeature::StealGeometry). Am I correct that there currently is
not a safe way for me to destroy these geometry objects (within the
context of the GDAL/OGR heap)? I am looking for an equivalent of
OGRDataSource::DestroyDataSource and OGRFeature::DestroyFeature.
Or maybe I just missed it?

BTW, although OGRDataSource::DestroyDataSource is mentioned in the
"OGR API Tutorial", it is not doc-ed on the "OGRDataSource Class
Reference" page.

Thanks,
Kor

From DCarreira at edia.pt  Wed Jan 14 09:11:26 2009
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Jan 14 09:30:04 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
Message-ID: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>

Can OGR convert 2 shapefiles to a single GPX?

The objective is to add tracks from a line shapefile and waypoints from a point shapefile...

Thanks,
Duarte Carreira
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090114/85a0ae21/attachment.html
From jrepetto at free.fr  Wed Jan 14 09:43:37 2009
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jan 14 09:51:47 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
In-Reply-To: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
Message-ID: <496DFA19.1080302@free.fr>

Duarte Carreira a ?crit :
> Can OGR convert 2 shapefiles to a single GPX?
> 
> The objective is to add tracks from a line shapefile and waypoints from 
> a point shapefile?
> 

Hello,

I don't know the answer to your question, but since GPX files are text 
files, it is very easy to merge two GPX files with a text editor.

HTH !
Jean-Claude



From warmerdam at pobox.com  Wed Jan 14 10:56:22 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 10:56:37 2009
Subject: [gdal-dev] Destroying OGRGeometry objects
In-Reply-To: <200901141350.38638.k.dejong@geo.uu.nl>
References: <200901141350.38638.k.dejong@geo.uu.nl>
Message-ID: <496E0B26.8030004@pobox.com>

Kor de Jong wrote:
> Hi all,
> 
> In my code I am stealing the OGRFeature's OGRGeometry objects
> (OGRFeature::StealGeometry). Am I correct that there currently is
> not a safe way for me to destroy these geometry objects (within the
> context of the GDAL/OGR heap)? I am looking for an equivalent of
> OGRDataSource::DestroyDataSource and OGRFeature::DestroyFeature.
> Or maybe I just missed it?

Kor,

This can be done with OGRGeometryFactor::destroyGeometry().

> BTW, although OGRDataSource::DestroyDataSource is mentioned in the
> "OGR API Tutorial", it is not doc-ed on the "OGRDataSource Class
> Reference" page.

I have added it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 14 10:58:52 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 10:59:12 2009
Subject: [gdal-dev] S57 field definition incorrect
In-Reply-To: <496DDD38.5050809@hotmail.com>
References: <496D6BA0.7040200@hotmail.com> <496D8ED8.1000002@pobox.com>
	<496DDD38.5050809@hotmail.com>
Message-ID: <496E0BBC.9080803@pobox.com>

ogr user wrote:
> I see that now in code. I added my own wrapper to parse the list, but
> there are two issues remaining:
> 1) efficiency - if a field must be read multiple times, string will have
> to be parsed multiple times, whereas if it were treated as integer list
> from the start, string parsing would be done once. This may not be much,
> but it adds up when thousands of features are processed.
> 2) it is impossible to define default behavior for integer list fields,
> because they self-identify as strings - i.e. even if I were to parse it
> in my code (which I do now), I have to know from another source whether
> the field is an integer list.

OGR User,

I will say I find the second issue stronger than the first.

> May be it coud be done as an option, controlled by flag to a class
> registrar (and default behavior be made as it was previously)?

This is possible, but to me it seems like additional complication with
relatively little value.  The existing number of S57 processing options
is mostly due to the need to provide the funding client with some very
specific abilities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 14 11:09:14 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 11:09:30 2009
Subject: [gdal-dev] BigTIFF overview with gdaladdo?
In-Reply-To: <loom.20090114T090921-434@post.gmane.org>
References: <loom.20090114T090921-434@post.gmane.org>
Message-ID: <496E0E2A.2020501@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> Is there a switch for telling gdaladdo to create external overview in BigTIFF
> format?  Would BigTIFF overviews even work?  I tried to create external
> overviews for such a big BigTIFF image that even jpeg compressed .ovr file
> exceeded the 4 GB limit and creation failed therefore.

Jukka,

Currently there is no way to force the overviews to be created as bigtiff.
They should be created as bigtiff by default if the normal rules imply the
need (for instance if the overviews are uncompressed and the base level would
be over 4GB).

I suspect we ought to handle this via an additional configuration option.
Possibly one which would be used as a default value for the BIGTIFF
creation option to the GTiff driver.  So you could set it to YES or
IF_SAFER to be fairly confident of bigtiff creation when needed.

If this is important to you please file a ticket and I'll add it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ludovic.mercier at gmail.com  Wed Jan 14 11:24:31 2009
From: ludovic.mercier at gmail.com (lidiriel)
Date: Wed Jan 14 11:24:32 2009
Subject: [gdal-dev] Re: how to acces to PDS meta data
In-Reply-To: <ec862410-7e32-42ea-8ba2-db27f9b24018@v13g2000vbb.googlegroups.com>
References: <mailman.9063.1231833763.23808.gdal-dev@lists.osgeo.org> 
	<82aba06c0901130049s662d30f8q730d3699721b3cf8@mail.gmail.com> 
	<496CE18C.1000303@pobox.com>
	<ec862410-7e32-42ea-8ba2-db27f9b24018@v13g2000vbb.googlegroups.com>
Message-ID: <1f78ab96-92dc-4474-ba04-127cb6c4d24f@v5g2000prm.googlegroups.com>

Ok it work thanks.
But i have cheked the three drivers (PDS, Isisi2 and Isis3) and for
each drivers there are several lacks :
(filename, nnn <Bytes>) is not implemented.
i think i will  try to implement this.
I will open a new message thread in this list for discuss of it.

regards


On 14 jan, 09:20, lidiriel <ludovic.merc...@gmail.com> wrote:
> Thanks for your response. I will look your changeset and try for my
> requirements.
>
> On 13 jan, 19:46, Frank Warmerdam <warmer...@pobox.com> wrote:
>
> > Ludovic Mercier wrote:
> > > Hi all,
>
> > > I try to use gdal and otb (http://smsc.cnes.fr/PLEIADES/lien3_vm.htm)
> > > with pds file.
> > > I try to get value associated to a key (meta-data).
> > > for an exemple the file : Index of /gdal/data/mc02.img contain :
> > > SPACECRAFT_NAME ? ? ? ? ? ? ? ?= "MARS GLOBAL SURVEYOR"
> > > INSTRUMENT_NAME ? ? ? ? ? ? ? ?= "MARS ORBITER CAMERA"
> > > INSTRUMENT_ID ? ? ? ? ? ? ? ? ?= "MOC-WA"
> > > TARGET_NAME ? ? ? ? ? ? ? ? ? ?= "MARS"
> > > FILTER_NAME ? ? ? ? ? ? ? ? ? ?= "RED"
>
> > > I would like to access to the key/value FILTER_NAME. But the function
> > > GetMetadata return nothing !
> > > I look in the source code (file pdsdataset.cpp) and the interresting
> > > method is "GetKeyword()" but it is a private method.
>
> > > Is someone have an idea how to get all meta data or specific meta-
> > > data ?
>
> > > I think is it impossible in fact.. but perhaps is it possible if i add
> > > new functionnality
> > > in the pds driver....
>
> > Ludovic,
>
> > You are correct that none of these header fields are currently exposed
> > by the PDS (or ISIS2, and ISIS3) drivers as metadata. ?It would be
> > quite easy to modify the driver to transfer specific keywords and their
> > associated value to the metadata object, but it is unclear which ones would
> > be useful.
>
> > I have gone ahead and added support in the PDS driver to transfer a bunch
> > of keywords over. ?The gdalinfo results now look like:
>
> > ...
> > Origin = (-10668384.903788566589355,3852176.483988761901855)
> > Pixel Size = (926.115274429321289,-926.115274429321289)
> > Metadata:
> > ? ?FILTER_NAME="RED"
> > ? ?DATA_SET_ID="MGS-M-MOC-4-WAMOS-V1.0"
> > ? ?PRODUCT_ID="MC02"
> > ? ?PRODUCER_INSTITUTION_NAME="MALIN SPACE SCIENCE SYSTEMS"
> > ? ?PRODUCT_TYPE="MOSAIC"
> > ? ?MISSION_NAME="MARS GLOBAL SURVEYOR"
> > ? ?SPACECRAFT_NAME="MARS GLOBAL SURVEYOR"
> > ? ?INSTRUMENT_NAME="MARS ORBITER CAMERA"
> > ? ?INSTRUMENT_ID="MOC-WA"
> > ? ?TARGET_NAME="MARS"
> > ? ?CENTER_FILTER_WAVELENGTH=600.0000
> > ? ?BANDWIDTH=50.0000
> > ? ?PRODUCT_CREATION_TIME=2001-11-28T00:00:00
> > ? ?NOTE="GEODESY CAMPAIGN MOSAIC"
> > Corner Coordinates:
> > ...
>
> > The new support is only in trunk and new keywords can be added quite
> > easily.
>
> > ? ?http://trac.osgeo.org/gdal/changeset/16077
>
> > Best regards,
> > --
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up ? | Frank Warmerdam, warmer...@pobox.com
> > light and sound - activate the windows |http://pobox.com/~warmerdam
> > and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From ludovic.mercier at gmail.com  Wed Jan 14 11:41:14 2009
From: ludovic.mercier at gmail.com (lidiriel)
Date: Wed Jan 14 11:41:15 2009
Subject: [gdal-dev] improve PDS and Isis drivers
Message-ID: <f403b70a-2280-4d7d-aa8a-5fb4d157ba1d@r15g2000prd.googlegroups.com>

hi,

I work with several pds files and i have many idea for improve
driver :

Add several domaine (for obtain a classification) with standard
Metadata like describe in "PDS standars reference" document (chapter5
v3.7) each domain can contains a minimum number of keys.

domaine name (dn): LABEL_STANDARDS
keys : PDS_VERSION_ID, DD_VERSION_ID, LABEL_REVISION_NOTE

dn : FILE_CHARACTERISTICS
keys: RECORD_TYPE, RECORD_BYTES, ...

dn : IDENTIFICATION_DATA_ELEMENTS
keys: DATA_SET_ID ...


implementation of reading a detached data in first time for ISIS2
driver :
("filename", nnn) (chapter 5 page 13 of PDS specification v3.7)
Many of my data use this last notation and for using gdal i will must
implemented this in priority.

What are your opinion on this ideas ?

regards
From warmerdam at pobox.com  Wed Jan 14 12:55:26 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 14 12:55:38 2009
Subject: [gdal-dev] improve PDS and Isis drivers
In-Reply-To: <f403b70a-2280-4d7d-aa8a-5fb4d157ba1d@r15g2000prd.googlegroups.com>
References: <f403b70a-2280-4d7d-aa8a-5fb4d157ba1d@r15g2000prd.googlegroups.com>
Message-ID: <496E270E.5090804@pobox.com>

lidiriel wrote:
> hi,
> 
> I work with several pds files and i have many idea for improve
> driver :
> 
> Add several domaine (for obtain a classification) with standard
> Metadata like describe in "PDS standars reference" document (chapter5
> v3.7) each domain can contains a minimum number of keys.
> 
> domaine name (dn): LABEL_STANDARDS
> keys : PDS_VERSION_ID, DD_VERSION_ID, LABEL_REVISION_NOTE
> 
> dn : FILE_CHARACTERISTICS
> keys: RECORD_TYPE, RECORD_BYTES, ...
> 
> dn : IDENTIFICATION_DATA_ELEMENTS
> keys: DATA_SET_ID ...
> 
> 
> implementation of reading a detached data in first time for ISIS2
> driver :
> ("filename", nnn) (chapter 5 page 13 of PDS specification v3.7)
> Many of my data use this last notation and for using gdal i will must
> implemented this in priority.

Lidiriel,

I am reasonably supportive of adding capture and exposure of metadata
from PDS, ISIS2 and ISIS3 datasets in some appropriate fashion. I'd
be open to appropriate patches though I'm not inclined to do much more
directly as implementation than I have already done, unless my original
client (USGS) demonstrated an interest.

I believe we do have some support for detached datasets.  Perhaps that
is only in ISIS3?  I would be happy to have detached support also added
in ISIS2.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Wed Jan 14 14:29:38 2009
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan 14 14:29:41 2009
Subject: [gdal-dev] Auto-clip collar for DRGs/DOQQs/BSBs
In-Reply-To: <6e41d95b0901140011j3be63158se70eba8e71b1fede@mail.gmail.com>
References: <6e41d95b0901140011j3be63158se70eba8e71b1fede@mail.gmail.com>
Message-ID: <496E3D22.3020602@noaa.gov>

Klokan Petr P?idal wrote:
> I wonder if there is a script for image analyze and automatic clipping
> for the freely available USGS DRGs and NOAA BSBs map sheets...

I have no idea, but...

> Or are there some already pre-calculated masks/bounding boxes or
> polygons for the DRGs and BSBs popular sheets on the net?

I haven't looked closely, but from a quick glance, it looks like the 
GRPs in the NOAA bsb charts may define the bounding box of the charts -- 
  it's worth looking at.

If you're lucky, the color used for the collar may not be used in the 
charts anywhere but I haven't looked at that.

> It would be nice to present some stitched maps and remove the borders
> in the examples of rendering capabilities of GDAL2Tiles at
> http://examples.maptiler.org/.

well, these folks have done it -- I don't know how, or if they are 
willing to share what they did, but it's pretty nice:

http://demo.geogarage.com/noaa/

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From Shawn.Gong at drdc-rddc.gc.ca  Wed Jan 14 15:52:22 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Jan 14 15:50:23 2009
Subject: [gdal-dev] gdal 1.6.0 successfully built on Linux,
	Windows XP and Solaris 9
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6BA@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

gdal 1.6.0 has been successfully built on Linux, Windows XP and Solaris
9

Linux: 
  OS - Redhat
  gcc - 4.2.2
  frmts: netcdf-3.6.3, hdf5-1.8.2, HDF4.2r3
  python 2.4.6 (for OpenEV)

Solaris 9: 
  gcc - 3.4.6
  frmts: netcdf-3.6.3, hdf5-1.6.7 (because hdf5-1.8.2 did not work),
HDF4.2r3
  python 2.4.6 (for OpenEV)

Windows XP
  compiler - Microsoft VC++ 6
  frmts: netcdf-3.5.0, hdf5-1.6.6 (because hdf5-1.8.2 did not work),
HDF4.1r5 (because HDF4.2r3 did not work)
  python 2.4.6 (for OpenEV)


I also modified netcdfdataset.cpp and .h for lat flip and lon warp
problem.

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090114/c4b7dc47/attachment.html
From sfkeller at gmail.com  Wed Jan 14 17:39:55 2009
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Jan 14 17:39:58 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
In-Reply-To: <496DFA19.1080302@free.fr>
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
	<496DFA19.1080302@free.fr>
Message-ID: <25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>

A merge of two shapefiles 'file1.shp' and 'file2.shp' into a new file
'file_merged.shp' is performed like this (See
http://www.gdal.org/ogr/drv_shapefile.html):

% ogr2ogr file_merged.shp file1.shp
% ogr2ogr -update -append file_merged.shp file2.shp -nln file_merged

Then convert to GPX:
% ogr2ogr -f "GPX" out.gpx file_merged.shp

Stefan
http://geoconverter.hsr.ch

2009/1/14 Jean-Claude Repetto <jrepetto@free.fr>

> Duarte Carreira a ?crit :
>
>> Can OGR convert 2 shapefiles to a single GPX?
>>
>> The objective is to add tracks from a line shapefile and waypoints from a
>> point shapefile?
>>
>>
> Hello,
>
> I don't know the answer to your question, but since GPX files are text
> files, it is very easy to merge two GPX files with a text editor.
>
> HTH !
> Jean-Claude
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090114/b302a3ca/attachment.html
From jukka.rahkonen at mmmtike.fi  Thu Jan 15 04:43:28 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jan 15 04:43:43 2009
Subject: [gdal-dev] Re: convert 2 shapefiles to a single GPX?
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
	<496DFA19.1080302@free.fr>
	<25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>
Message-ID: <loom.20090115T093713-743@post.gmane.org>

Stefan Keller <sfkeller <at> gmail.com> writes:

> 
> 
> A merge of two shapefiles 'file1.shp' and 'file2.shp' into a new file
'file_merged.shp' is performed like this (See
http://www.gdal.org/ogr/drv_shapefile.html):
> 
> % ogr2ogr file_merged.shp file1.shp% ogr2ogr -update -append file_merged.shp
file2.shp -nln file_merged
> Then convert to GPX:% ogr2ogr -f "GPX" out.gpx file_merged.shp
> Stefanhttp://geoconverter.hsr.ch
> 2009/1/14 Jean-Claude Repetto <jrepetto <at> free.fr>Duarte Carreira a ?crit : 

Hi,

Original question was about combining line shapefile and point shapefile into
one gpx file that can hold features of both types.  It is impossible to combine
them to one shapefile. If it does not go directly to gpx them perhaps it would
succeed by using some other interim format that supports mixed feature types in
between, MapInfo tab for example?

From DCarreira at edia.pt  Thu Jan 15 06:03:27 2009
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu Jan 15 07:48:37 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
In-Reply-To: <25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
	<496DFA19.1080302@free.fr>
	<25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>
Message-ID: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE592D@beja012.edia.pt>

Maybe the same approach can be used with 2 gpx files? That would be very good. I cannot merge 2 shapefiles with different geometry types. I could convert line shape>gpx1 and point shape->gpx2 and then merge gpx2+gpx2->gpx3...


Thanks,
Duarte

De: Stefan Keller [mailto:sfkeller@gmail.com]
Enviada: quarta-feira, 14 de Janeiro de 2009 22:40
Para: Jean-Claude Repetto
Cc: Duarte Carreira; gdal-dev@lists.osgeo.org
Assunto: Re: [gdal-dev] convert 2 shapefiles to a single GPX?


A merge of two shapefiles 'file1.shp' and 'file2.shp' into a new file 'file_merged.shp' is performed like this (See http://www.gdal.org/ogr/drv_shapefile.html):

% ogr2ogr file_merged.shp file1.shp
% ogr2ogr -update -append file_merged.shp file2.shp -nln file_merged

Then convert to GPX:
% ogr2ogr -f "GPX" out.gpx file_merged.shp

Stefan
http://geoconverter.hsr.ch<http://geoconverter.hsr.ch/>
2009/1/14 Jean-Claude Repetto <jrepetto@free.fr<mailto:jrepetto@free.fr>>
Duarte Carreira a ?crit :

Can OGR convert 2 shapefiles to a single GPX?

The objective is to add tracks from a line shapefile and waypoints from a point shapefile...

Hello,

I don't know the answer to your question, but since GPX files are text files, it is very easy to merge two GPX files with a text editor.

HTH !
Jean-Claude



_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090115/8c68aeaa/attachment-0001.html
From ludovic.mercier at gmail.com  Thu Jan 15 09:26:51 2009
From: ludovic.mercier at gmail.com (lidiriel)
Date: Thu Jan 15 09:26:53 2009
Subject: [gdal-dev] Re: improve PDS and Isis drivers
In-Reply-To: <496E270E.5090804@pobox.com>
References: <f403b70a-2280-4d7d-aa8a-5fb4d157ba1d@r15g2000prd.googlegroups.com>
	<496E270E.5090804@pobox.com>
Message-ID: <e48d3e58-4c89-419d-8086-1d167c9e741f@z27g2000prd.googlegroups.com>

Thanks Frank, for your response.

I have uploaded a patch for isi2dataset.cpp

http://gdal.googlegroups.com/web/isis2dataset.patch

this patch add new functionalities :
detached dataset with using the pointer object key :
^QUBE = "data.xxx"
^QUBE = ("data.xxx")
^QUBE = ("data.xxx", nnn)
^QUBE = ("data.xxx", nnn <BYTES>)

regards
From h_bred01 at uni-muenster.de  Thu Jan 15 15:45:19 2009
From: h_bred01 at uni-muenster.de (Henning Bredel)
Date: Thu Jan 15 16:07:11 2009
Subject: [gdal-dev] Writing a tiff
Message-ID: <1232052319.13179.4.camel@phoenix-work>

Hi there,

I have read http://www.gdal.org/frmt_gtiff.html and I am
wondering if I have to build GDAL on my own to get the
possibility writing tiffs ..

I try something like

,-----------------------------------.
bm.writeTiff <- function(bm,filename) {
	
	# GTiff ist standard but show it here, though
	driver <- new('GDALDriver', 'JPEG2000')
	
	tiff <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
			type="Int32")

	for (row in 1:rowlength) {
		putRasterData(tiff,bm[row,1:ncol(bm)],offset=c(row,1))
	}
	
	saveDataset(tiff,filename)
	closeDataset(tiff)
}
`------------------------------------'

The code above runs into

Error in .local(.Object, ...) : 
  
	GDAL Error 6: GDALDriver::Create() ... no create method implemented for
this format.

unfortunately.

Am I doing something wrong? Do you have got an alternative
for me? :)

Best regards

  Henning

-- 
 . . . no signature
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090115/f3870a38/attachment.bin
From henning.bredel at uni-muenster.de  Thu Jan 15 16:01:38 2009
From: henning.bredel at uni-muenster.de (Henning Bredel)
Date: Thu Jan 15 16:23:51 2009
Subject: [gdal-dev] Writing a Tiff
Message-ID: <1232053298.13179.6.camel@phoenix-work>

Hi there,

(not sure if my last mail came through)

I have read http://www.gdal.org/frmt_gtiff.html and I am
wondering if I have to build GDAL on my own to get the
possibility writing tiffs ..

I tried something like

,-----------------------------------.
bm.writeTiff <- function(bm,filename) {
        
        # GTiff ist standard but show it here, though
        driver <- new('GDALDriver', 'GTiff')
        
        t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
                        type="Int32")

        for (row in 1:nrow(bm)-1) {
                putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
        }
        
        saveDataset(t,filename)
        closeDataset(t)
}
`------------------------------------'

The code above runs into

Error in .local(.Object, ...) : 
  
        GDAL Error 6: GDALDriver::Create() ... no create method
implemented for
this format.

unfortunately.

Am I doing something wrong? Do you have got an alternative
for me? :)

Best regards

  Henning

-- 
 . . . no signature


Valid signature


-- 
 . . . no signature
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090115/6e771d80/attachment.bin
From warmerdam at pobox.com  Thu Jan 15 16:57:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 15 16:57:24 2009
Subject: [gdal-dev] Writing a Tiff
In-Reply-To: <1232053298.13179.6.camel@phoenix-work>
References: <1232053298.13179.6.camel@phoenix-work>
Message-ID: <496FB12D.2040407@pobox.com>

Henning Bredel wrote:
> Hi there,
> 
> (not sure if my last mail came through)
> 
> I have read http://www.gdal.org/frmt_gtiff.html and I am
> wondering if I have to build GDAL on my own to get the
> possibility writing tiffs ..
> 
> I tried something like
> 
> ,-----------------------------------.
> bm.writeTiff <- function(bm,filename) {
>         
>         # GTiff ist standard but show it here, though
>         driver <- new('GDALDriver', 'GTiff')
>         
>         t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
>                         type="Int32")
> 
>         for (row in 1:nrow(bm)-1) {
>                 putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
>         }
>         
>         saveDataset(t,filename)
>         closeDataset(t)
> }

Henning,

I am embarrassed to admit I don't even know what language the above is!
Perl?  Ruby?

Normally there is a function to be called to register all the drivers
with the drivermanager instance.  I think all the swig bindings call
this automatically at load time.

Then you could normally call GetDriverByName() in the gdal "module" however
that gets bound into your language.

In Python the above would be something like:

driver = gdal.GetDriverByName('GTiff')
dataset = driver.Create('file.tif', rows, columns, bands, gdal.Int32, None )
...

The main point I want to make is you don't actually create a driver object.
You just get a reference to an existing one from the driver manager which
is usually hidden by the global GetDriverByName() function
(GDALGetDriverByName() in C).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mrxonx at hotmail.com  Thu Jan 15 19:56:15 2009
From: mrxonx at hotmail.com (ogr user)
Date: Thu Jan 15 19:56:19 2009
Subject: [gdal-dev] S57 field definition incorrect
In-Reply-To: <496D8ED8.1000002@pobox.com>
References: <496D6BA0.7040200@hotmail.com> <496D8ED8.1000002@pobox.com>
Message-ID: <496FDB2F.9070707@hotmail.com>

In case anyone is interested, here is a patch that adds appropriate
handling of IntegerList field types to S57 parser. For backwards
compatibility it is only activated if specific option is passed to the
reader (actually to class registrar). This is for 1.5.3.

Frank Warmerdam wrote:
>
> Dear OGR User,
>
> It appears the S57 code deliberately treats list attributes as simple
> strings.  While this may have been a poor choice, I hesitate to change it
> at this point for fear of breaking fragile software built on this driver
> (notably the FME S-57 reader).
>
> My suggestion is that you fetch it as a string, and parse the integers
> out yourself.
>
> Best regards,


-------------- next part --------------
Index: gdal-1.5.3/ogr/ogrutils.cpp
===================================================================
--- gdal-1.5.3/ogr/ogrutils.cpp	
+++ gdal-1.5.3/ogr/ogrutils.cpp	
@@ -817,3 +817,41 @@
 
     return TRUE;
 }
+
+
+#define P_DELIM   " ,"
+int OGRParseIntegerList(const char *pszInput, OGRField *psField)
+{
+   const char *p;
+   int nCount, nLen, sLen;
+   int *pVals;
+
+   p = pszInput;
+   nCount = 0;
+   while ((nLen = strcspn(p, P_DELIM)) > 0) {
+      nCount++;
+      p += nLen;
+      sLen = strspn(p, P_DELIM);
+      p += sLen;
+   }
+
+   if (nCount == 0)
+      return 0;
+
+   pVals = (int *)CPLMalloc(sizeof(int) * nCount);
+
+   p = pszInput;
+   nCount = 0;
+   while ((nLen = strcspn(p, P_DELIM)) > 0) {
+      pVals[nCount] = atoi(p);
+      nCount++;
+      p += nLen;
+      sLen = strspn(p, P_DELIM);
+      p += sLen;
+   }
+
+   psField->IntegerList.paList = pVals;
+   psField->IntegerList.nCount = nCount;
+
+   return 1;
+}
Index: gdal-1.5.3/ogr/ogrsf_frmts/s57/s57reader.cpp
===================================================================
--- gdal-1.5.3/ogr/ogrsf_frmts/s57/s57reader.cpp	
+++ gdal-1.5.3/ogr/ogrsf_frmts/s57/s57reader.cpp	
@@ -246,6 +246,14 @@
 /*                             SetOptions()                             */
 /************************************************************************/
 
+void S57Reader::SetOptions( int nFlagsOn, int nFlagsOff )
+{
+   nOptionFlags |= nFlagsOn;
+   if (nFlagsOff)
+      nOptionFlags &= ~nFlagsOff;
+}
+
+
 void S57Reader::SetOptions( char ** papszOptionsIn )
 
 {
@@ -254,6 +262,12 @@
     CSLDestroy( papszOptions );
     papszOptions = CSLDuplicate( papszOptionsIn );
 
+    pszOptionValue = CSLFetchNameValue( papszOptions, S57O_PARSE_INTEGERLIST );
+    if( pszOptionValue != NULL && !EQUAL(pszOptionValue,"OFF") )
+        nOptionFlags |= S57M_PARSE_INTEGERLIST;
+    else
+        nOptionFlags &= ~S57M_PARSE_INTEGERLIST;
+
     pszOptionValue = CSLFetchNameValue( papszOptions, S57O_SPLIT_MULTIPOINT );
     if( pszOptionValue != NULL && !EQUAL(pszOptionValue,"OFF") )
         nOptionFlags |= S57M_SPLIT_MULTIPOINT;
Index: gdal-1.5.3/ogr/ogrsf_frmts/s57/s57featuredefns.cpp
===================================================================
--- gdal-1.5.3/ogr/ogrsf_frmts/s57/s57featuredefns.cpp	
+++ gdal-1.5.3/ogr/ogrsf_frmts/s57/s57featuredefns.cpp	
@@ -416,7 +416,10 @@
             break;
 
           case SAT_LIST:
-            oField.SetType( OFTString );
+            if (nOptionFlags & S57M_PARSE_INTEGERLIST)
+               oField.SetType( OFTIntegerList );
+            else
+               oField.SetType( OFTString );
             break;
         }
 
Index: gdal-1.5.3/ogr/ogrsf_frmts/s57/s57.h
===================================================================
--- gdal-1.5.3/ogr/ogrsf_frmts/s57/s57.h	
+++ gdal-1.5.3/ogr/ogrsf_frmts/s57/s57.h	
@@ -52,6 +52,7 @@
 #define S57O_RETURN_PRIMITIVES "RETURN_PRIMITIVES"
 #define S57O_RETURN_LINKAGES "RETURN_LINKAGES"
 #define S57O_RETURN_DSID     "RETURN_DSID"
+#define S57O_PARSE_INTEGERLIST   "PARSE_INTEGERLIST"
 
 #define S57M_UPDATES                    0x01
 #define S57M_LNAM_REFS                  0x02
@@ -61,6 +62,7 @@
 #define S57M_RETURN_PRIMITIVES          0x20
 #define S57M_RETURN_LINKAGES            0x40
 #define S57M_RETURN_DSID                0x80
+#define S57M_PARSE_INTEGERLIST        0x0100
 
 /* -------------------------------------------------------------------- */
 /*      RCNM values.                                                    */
@@ -291,6 +293,7 @@
 
     void                SetClassBased( S57ClassRegistrar * );
     void                SetOptions( char ** );
+    void                SetOptions( int nFlagsOn, int nFlagsOff );
     int                 GetOptionFlags() { return nOptionFlags; }
 
     int                 Open( int bTestOpen );
Index: gdal-1.5.3/ogr/ogrfeature.cpp
===================================================================
--- gdal-1.5.3/ogr/ogrfeature.cpp	
+++ gdal-1.5.3/ogr/ogrfeature.cpp	
@@ -1860,6 +1860,16 @@
         if( OGRParseDate( pszValue, &sWrkField, 0 ) )
             memcpy( pauFields+iField, &sWrkField, sizeof(sWrkField));
     }
+    else if (poFDefn->GetType() == OFTIntegerList) {
+        OGRField sWrkField;
+
+        if (OGRParseIntegerList(pszValue, &sWrkField)) {
+            if (IsFieldSet(iField))
+               CPLFree(pauFields[iField].IntegerList.paList);
+
+            memcpy(pauFields+iField, &sWrkField, sizeof(sWrkField));
+        }
+    }
     else
         /* do nothing for other field types */;
 }
Index: gdal-1.5.3/ogr/ogr_core.h
===================================================================
--- gdal-1.5.3/ogr/ogr_core.h	
+++ gdal-1.5.3/ogr/ogr_core.h	
@@ -292,6 +292,8 @@
 int CPL_DLL OGRParseDate( const char *pszInput, OGRField *psOutput, 
                           int nOptions );
 
+int CPL_DLL OGRParseIntegerList(const char *pszInput, OGRField *psField);
+
 /* -------------------------------------------------------------------- */
 /*      Constants from ogrsf_frmts.h for capabilities.                  */
 /* -------------------------------------------------------------------- */

From matt.gregory at oregonstate.edu  Thu Jan 15 20:08:59 2009
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Thu Jan 15 20:30:08 2009
Subject: [gdal-dev] swig error on SVN trunk in python
Message-ID: <451453C181B199458A55B2B1723FAC00014E1088@SAGE.forestry.oregonstate.edu>

Hi all,

I updated trunk (revision 16087) and rebuilt GDAL.  My configuration is
Windows XP/VC7/Python24/swigwin-1.3.33.  I rebuilt the core using
makegdal71 without issues, but when I do 'nmake /f makefile.vc python'
from within the swig directory, I get an error message:

  ../include/python\ogr_python.i(999999): Error: Missing #endif for 
  conditional starting on line 225
  NMAKE : fatal error U1077: 'C:\swig\swigwin-1.3.33\swig.exe' : return
code '0x1'

I note that ../include/python/ogr_python.i was updated on January 9.  If
I 
uncomment lines 225 and 226 (as it was in the prevision revision),
everything builds fine.  

Given that the error message doesn't seem to fit the python code, I'm
guessing that I'm doing something incorrectly in my setup.  I tried this
with Python25 with similar results.  Any help is appreciated.

Matt Gregory
Department of Forest Science
Oregon State University
From warmerdam at pobox.com  Thu Jan 15 22:37:12 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 15 22:37:26 2009
Subject: [gdal-dev] swig error on SVN trunk in python
In-Reply-To: <451453C181B199458A55B2B1723FAC00014E1088@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC00014E1088@SAGE.forestry.oregonstate.edu>
Message-ID: <497000E8.1000100@pobox.com>

Gregory, Matthew wrote:
> Hi all,
> 
> I updated trunk (revision 16087) and rebuilt GDAL.  My configuration is
> Windows XP/VC7/Python24/swigwin-1.3.33.  I rebuilt the core using
> makegdal71 without issues, but when I do 'nmake /f makefile.vc python'
> from within the swig directory, I get an error message:
> 
>   ../include/python\ogr_python.i(999999): Error: Missing #endif for 
>   conditional starting on line 225
>   NMAKE : fatal error U1077: 'C:\swig\swigwin-1.3.33\swig.exe' : return
> code '0x1'
> 
> I note that ../include/python/ogr_python.i was updated on January 9.  If
> I 
> uncomment lines 225 and 226 (as it was in the prevision revision),
> everything builds fine.  
> 
> Given that the error message doesn't seem to fit the python code, I'm
> guessing that I'm doing something incorrectly in my setup.  I tried this
> with Python25 with similar results.  Any help is appreciated.

Matt,

I believe the "# if" was being treated as a C preprocessor #if directive.
I have committed an extra # in ogr_python.i and this seems to correct the
problem.  Thanks for the report.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nicholas.g.lawrence at mainroads.qld.gov.au  Fri Jan 16 00:18:57 2009
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Fri Jan 16 00:34:14 2009
Subject: [gdal-dev] Intersect of two shapefiles
Message-ID: <OFFBC41C7F.6E1267C4-ON4A257540.001D1D19-4A257540.001D3362@transport.qld.gov.au>


I have two shapefiles containing polygons.

Can OGR derive an intersection of these two layers?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From nicholas.g.lawrence at mainroads.qld.gov.au  Fri Jan 16 01:26:18 2009
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Fri Jan 16 01:26:25 2009
Subject: [gdal-dev] OGR error
Message-ID: <OF2331854E.1A79D5C2-ON4A257540.002312E6-4A257540.00235DBA@transport.qld.gov.au>


I am using ogr2ogr to append several shapefiles into one shapefile.

The command

ogr2ogr -update -append C:\DATA\neville\fire.shp
C:\DATA\neville\bundaberg.shp -nln fire

which is repeated many times in a batch file to append more and more
shapefiles to
the destination file.

After about a dozen successful appends, I get this error message

ERROR 1: Error in psSHP->sHooks.FSeek() or fwrite() writing object to .shp
file.

which is repeated a 1000 times until ogr2ogr decides to stop giving
warnings.

what does this error mean?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From henning.bredel at uni-muenster.de  Fri Jan 16 04:27:29 2009
From: henning.bredel at uni-muenster.de (Henning Bredel)
Date: Fri Jan 16 04:27:34 2009
Subject: [gdal-dev] Writing a Tiff
In-Reply-To: <496FB12D.2040407@pobox.com>
References: <1232053298.13179.6.camel@phoenix-work>
	<496FB12D.2040407@pobox.com>
Message-ID: <1232098049.6373.45.camel@phoenix-work>

On Thu, 2009-01-15 at 16:57 -0500, Frank Warmerdam wrote:
> > ,-----------------------------------.
> > bm.writeTiff <- function(bm,filename) {
> >         
> >         # GTiff ist standard but show it here, though
> >         driver <- new('GDALDriver', 'GTiff')
> >         
> >         t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
> >                         type="Int32")
> > 
> >         for (row in 1:nrow(bm)-1) {
> >                 putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
> >         }
> >         
> >         saveDataset(t,filename)
> >         closeDataset(t)
> > }
> 
> Henning,
> 
> I am embarrassed to admit I don't even know what language the above is!
> Perl?  Ruby?

ups .. sorry, I was on the R-sig mailinglist before, so I forget to
point the language out explicitely. It's R -- I'm using GDAL with a
wrapper package called `rgdal' (Roger Bivand is involved in its 
development).

> 
> Normally there is a function to be called to register all the drivers
> with the drivermanager instance.  I think all the swig bindings call
> this automatically at load time.
> 
> Then you could normally call GetDriverByName() in the gdal "module" however
> that gets bound into your language.
> 

Well, rgdal offers also a `getGDALDriverByName() method. The output
says that there is GeoTiff creation support. 

> In Python the above would be something like:
> 
> driver = gdal.GetDriverByName('GTiff')
> dataset = driver.Create('file.tif', rows, columns, bands, gdal.Int32, None )
> ...
> 
> The main point I want to make is you don't actually create a driver object.
> You just get a reference to an existing one from the driver manager which
> is usually hidden by the global GetDriverByName() function
> (GDALGetDriverByName() in C).

I have read a satellite image into a matrix and now I would like
to write it into an image file again (maybe this sounds strange.
If you are interested in the background, I could tell ..).
The thing is, that I want to write into another file format than
the file I have read in, so how could I get the driver, if not
creating a new one?

My first try to write a GTiff with 

,--------------------------
bm.writeTiff <- function(bm,filename) {
        
        # GTiff ist standard but show it here, though
        driver <- new('GDALDriver', 'GTiff')
        
        t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
                        type="Int32")

        for (row in 1:nrow(bm)-1) {
                putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
        }
        
        saveDataset(t,filename)
        closeDataset(
`--------------------------

runs into the error (after approx. 30 sec.)

,--------------------------
 Wrong "StripByteCounts" field, ignoring and calculating from imagelength
`--------------------------

What does this error mean??

Another strange thing is, that there is no GTiff support after
that error anymore! The 2nd call of `getGDALDriverNames()' out-
put is missing the GTiff entry at all. Could this be a GDAL 
error or do I have to ask at the RGDAL mailinglist as well?

Thx for your help

  Henning

-- 
 . . . no signature
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/240c6ec3/attachment.bin
From r.hogendoorn at hitt.nl  Fri Jan 16 07:31:01 2009
From: r.hogendoorn at hitt.nl (Hogendoorn, Rene)
Date: Fri Jan 16 07:56:59 2009
Subject: [gdal-dev] How to use TransformPoints in python?
Message-ID: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>


The following simple python script

import os, osgeo, numpy
from osgeo import ogr, osr


def getProjection( EPSGcode ):
    """ set a projection from ... to lat-long """

    srs = osgeo.osr.SpatialReference()
    srs.ImportFromEPSG( 4326 ) # WGS84
    ll = srs.CloneGeogCS()

    srs.ImportFromEPSG( EPSGcode )
    # RD-NL lacks TOWGS84
    if EPSGcode == 28992:
        srs.SetTOWGS84( 565.237, 50.0087, 465.658, -0.406857, 0.350733, -1.87035, 4.0812 )

    return osr.CoordinateTransformation( srs, ll )


if __name__ == '__main__':

    proj = getProjection( 28992 )

    polygon =[[132817.006604435708141, 550302.852720651309937, 0.],
              [131182.28895997320069, 558340.214472591876984, 0.],
              [132578.61028128489852, 558748.893883707583882, 0.],
              [136631.347774848196423, 553436.061539204441942, 0.],
              [136631.347774848196423, 553436.061539204441942, 0.],
              [132817.006604435708141, 550302.852720651309937, 0.]]

    x = numpy.array( [p[0] for p in polygon] )
    y = numpy.array( [p[1] for p in polygon] )
    z = numpy.array( [p[2] for p in polygon] )

    print proj.TransformPoints( len(polygon), x, y, z)

returns:

Traceback (most recent call last):
  File "<stdin>", line 37, in <module>
  File "/var/tmp/libgdal0-1.6.0-build/usr/lib64/python2.6/site-packages/osgeo/osr.py", line 622, in TransformPoints
    
TypeError: in method 'CoordinateTransformation_TransformPoints', argument 3 of type 'double *'

I also tried straight python lists of doubles.
So what type of arguments does TransformPoints expect (as there is obviously nothing like double* in python)?

Regards

Rene
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/da2f8cec/attachment.html
From warmerdam at pobox.com  Fri Jan 16 09:07:37 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 09:07:59 2009
Subject: [gdal-dev] How to use TransformPoints in python?
In-Reply-To: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
References: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
Message-ID: <497094A9.80601@pobox.com>

Hogendoorn, Rene wrote:
>     x = numpy.array( [p[0] for p in polygon] )
>     y = numpy.array( [p[1] for p in polygon] )
>     z = numpy.array( [p[2] for p in polygon] )
> 
>     print proj.TransformPoints( len(polygon), x, y, z)
> 
> returns:
> 
> Traceback (most recent call last):
>   File "<stdin>", line 37, in <module>
>   File 
> "/var/tmp/libgdal0-1.6.0-build/usr/lib64/python2.6/site-packages/osgeo/osr.py", 
> line 622, in TransformPoints
>    
> TypeError: in method 'CoordinateTransformation_TransformPoints', 
> argument 3 of type 'double *'
> 
> I also tried straight python lists of doubles.
> So what type of arguments does TransformPoints expect (as there is 
> obviously nothing like double* in python)?

Rene,

To the best of my knowledge TransformPoints() is not currently working smoothly
with Python.  I have just been using TransformPoint().  You might want to file
a ticket on this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jgomezdans at gmail.com  Fri Jan 16 09:10:15 2009
From: jgomezdans at gmail.com (Jose =?utf-8?q?G=C3=B3mez-Dans?=)
Date: Fri Jan 16 09:10:19 2009
Subject: [gdal-dev] How to use TransformPoints in python?
In-Reply-To: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
References: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
Message-ID: <200901161410.15710.jgomezdans@gmail.com>

Hi,
On Friday 16 January 2009 12:31:01 Hogendoorn, Rene wrote:
> TypeError: in method 'CoordinateTransformation_TransformPoints', argument 3
> of type 'double *'
>
> I also tried straight python lists of doubles.
> So what type of arguments does TransformPoints expect (as there is
> obviously nothing like double* in python)?


I don't know what's up with TransformPoints, I suspect a bug here,  but you 
can do what you want point by point, or by bundling all your points into an 
ogr geometry and the transforming the whole geometry (and you can output it 
as a KML file or whatever). An example with your data is in 
<http://pastebin.com/f686f8e69>

Jose

-- 
Remote Sensing Unit           | Env. Monitoring and Modelling Group
Dept. of Geography            | Dept. of Geography
University College London     | King's College London
From warmerdam at pobox.com  Fri Jan 16 09:17:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 09:17:33 2009
Subject: [gdal-dev] Writing a Tiff
In-Reply-To: <1232098049.6373.45.camel@phoenix-work>
References: <1232053298.13179.6.camel@phoenix-work>
	<496FB12D.2040407@pobox.com> <1232098049.6373.45.camel@phoenix-work>
Message-ID: <497096E7.2090508@pobox.com>

Henning Bredel wrote:
> ups .. sorry, I was on the R-sig mailinglist before, so I forget to
> point the language out explicitely. It's R -- I'm using GDAL with a
> wrapper package called `rgdal' (Roger Bivand is involved in its 
> development).

Henning,

Gotcha.

I will note that the R bindings are not generated using SWIG so some
of my assumptions in the previous email can be wrong.

> runs into the error (after approx. 30 sec.)
> 
> ,--------------------------
>  Wrong "StripByteCounts" field, ignoring and calculating from imagelength
> `--------------------------
> 
> What does this error mean??
> 
> Another strange thing is, that there is no GTiff support after
> that error anymore! The 2nd call of `getGDALDriverNames()' out-
> put is missing the GTiff entry at all. Could this be a GDAL 
> error or do I have to ask at the RGDAL mailinglist as well?

My guess is that there has been some sort of heap corruption.

Normally you would only get the "Wrong StripByteCounts" message when reading
a poorly generated TIFF file from an underlying library other than libtiff.
If you are getting it while operating on a TIFF file being generated with
libtiff (and GDAL) it likely means that the file was corrupted or that
the heap was somehow corrupted.   There could be quite a number of possible
reasons for this.

I will note that the GDAL geotiff writer in some cases stresses the limits
of libtiff and it can be important to have a very recent version (such as
the CVS head from the libtiff repository).  The version included with GDAL
internally is generally suitable.  Versions of libtiff provided with
software distributions are generally somewhat antique.

Nevertheless, your simple write through case is not a complicated one and
would not normally trigger problems.

Is it possible your TIFF file is growing to be larger than 4GB?  If you
are using an older non-BigTIFF version of libtiff this could cause issues.
Recent versions of GDAL will generally warn if this is likely to be a problem
but I don't recall your quoting the GDAL version number.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 16 09:41:05 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 09:41:26 2009
Subject: [gdal-dev] OGR error
In-Reply-To: <OF2331854E.1A79D5C2-ON4A257540.002312E6-4A257540.00235DBA@transport.qld.gov.au>
References: <OF2331854E.1A79D5C2-ON4A257540.002312E6-4A257540.00235DBA@transport.qld.gov.au>
Message-ID: <49709C81.1070501@pobox.com>

nicholas.g.lawrence@mainroads.qld.gov.au wrote:
> I am using ogr2ogr to append several shapefiles into one shapefile.
> 
> The command
> 
> ogr2ogr -update -append C:\DATA\neville\fire.shp
> C:\DATA\neville\bundaberg.shp -nln fire
> 
> which is repeated many times in a batch file to append more and more
> shapefiles to
> the destination file.
> 
> After about a dozen successful appends, I get this error message
> 
> ERROR 1: Error in psSHP->sHooks.FSeek() or fwrite() writing object to .shp
> file.
> 
> which is repeated a 1000 times until ogr2ogr decides to stop giving
> warnings.

Nick,

It basically means that writes to the .shp file are failing.  The most
likely reason is that your disk is full or the .shp file grew to be
larger than 2GB/4GB.  Are either of those possible?  If not, we would
need to pursue normal bug reporting approaches.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 16 09:44:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 09:44:33 2009
Subject: [gdal-dev] Intersect of two shapefiles
In-Reply-To: <OFFBC41C7F.6E1267C4-ON4A257540.001D1D19-4A257540.001D3362@transport.qld.gov.au>
References: <OFFBC41C7F.6E1267C4-ON4A257540.001D1D19-4A257540.001D3362@transport.qld.gov.au>
Message-ID: <49709D3B.8020907@pobox.com>

nicholas.g.lawrence@mainroads.qld.gov.au wrote:
> I have two shapefiles containing polygons.
> 
> Can OGR derive an intersection of these two layers?

Nick,

The OGR commandline tools do not include anything to do this.  You could
do it using the library or write a script in one of the supporting bindings
languages.  The key method is OGRGeometry::Intersection() which when invoked
on one geometry with another geometry will return a new geometry which is
their intersection.

http://www.gdal.org/ogr/classOGRGeometry.html#202ad4c29487ca046c4a2b055042cb6a

Note that this method depends on GDAL/OGR having been built against the GEOS
geometry library which really does the work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at tkk.fi  Fri Jan 16 10:32:18 2009
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Jan 16 10:32:21 2009
Subject: [gdal-dev] How to use TransformPoints in python?
In-Reply-To: <497094A9.80601@pobox.com>
References: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
	<497094A9.80601@pobox.com>
Message-ID: <4970A882.5090708@tkk.fi>

Frank Warmerdam kirjoitti:
> Hogendoorn, Rene wrote:
>>
>>     print proj.TransformPoints( len(polygon), x, y, z)
>>
>
> Rene,
>
> To the best of my knowledge TransformPoints() is not currently working 
> smoothly
> with Python.

But it works in Perl:

use Geo::GDAL;

$to = Geo::OSR::SpatialReference->create( EPSG=>28992 );
$to->SetTOWGS84(565.237, 50.0087, 465.658, -0.406857, 0.350733, 
-1.87035, 4.0812);

$t = Geo::OSR::CoordinateTransformation->new( $to,
    Geo::OSR::SpatialReference->create( EPSG=>4326 ) );

$polygon = [[132817.006604435708141, 550302.852720651309937, 0.],
        [131182.28895997320069, 558340.214472591876984, 0.],
        [132578.61028128489852, 558748.893883707583882, 0.],
        [136631.347774848196423, 553436.061539204441942, 0.],
        [136631.347774848196423, 553436.061539204441942, 0.],
        [132817.006604435708141, 550302.852720651309937, 0.]];

$t->TransformPoints($polygon);

for (@$polygon) { print "@$_\n"; }

this returns:

5.0572412099288 52.9393242597464 41.9509746224735
5.03233800529761 53.011479011305 41.8140474820234
5.05311376900775 53.0152112890499 41.8069483591898
5.11380123061856 52.967623034953 41.8972087137249
5.11380123061856 52.967623034953 41.8972087137249
5.0572412099288 52.9393242597464 41.9509746224735

It looks like you'd like to convert from 28992 to 4326 and not vice 
versa. Does the result look ok?

Cheers ;)

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3812 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi 
http://geoinformatics.tkk.fi/bin/view/Main/AriJolmaHomePage


From cui_chan at hotmail.com  Fri Jan 16 11:18:00 2009
From: cui_chan at hotmail.com (chen cui)
Date: Fri Jan 16 11:18:02 2009
Subject: [gdal-dev] read non spatial tables using OGR driver
Message-ID: <BLU149-W83507869257C38B170DB03EBD40@phx.gbl>


hello, 
 
I know that using 
OGRSFDriverRegistrar::Open() we can access and open personal geodatabase .mdb file.
The table with geometry_column will be returned as Layers. But how about non spatial tables inside this
personal geodatabase .mdb file? Or we should use ODBC provider to access those non spatial tables? OGR API does not provide this interface function to access the non spatial tables. I need to read information out of those tables.
thank you in advance for your help.
 
best regards,
Cui 
_________________________________________________________________
Show them the way! Add maps and directions to your party invites. 
http://www.microsoft.com/windows/windowslive/events.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/252d71a7/attachment.html
From warmerdam at pobox.com  Fri Jan 16 11:33:15 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 11:33:38 2009
Subject: [gdal-dev] read non spatial tables using OGR driver
In-Reply-To: <BLU149-W83507869257C38B170DB03EBD40@phx.gbl>
References: <BLU149-W83507869257C38B170DB03EBD40@phx.gbl>
Message-ID: <4970B6CB.7090502@pobox.com>

chen cui wrote:
> hello,
>  
> I know that using
> OGRSFDriverRegistrar::Open() we can access and open personal geodatabase 
> .mdb file.
> The table with geometry_column will be returned as Layers. But how about 
> non spatial tables inside this
> personal geodatabase .mdb file? Or we should use ODBC provider to access 
> those non spatial tables? OGR API does not provide this interface 
> function to access the non spatial tables. I need to read information 
> out of those tables.
> thank you in advance for your help.

Cui,

Your analysis is exactly right.  The PGeo (Personal Geodatabase) driver
will attempt to only present what it identifies as spatial layers in the
personal geodatabase as "OGR layers".  If you want raw access to all the
tables just use the ODBC driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Albrecht.Weiser at hzd.hessen.de  Fri Jan 16 11:20:48 2009
From: Albrecht.Weiser at hzd.hessen.de (Albrecht.Weiser@hzd.hessen.de)
Date: Fri Jan 16 11:46:51 2009
Subject: [gdal-dev] using GDAL in a java-program
Message-ID: <CE18753D388B804D89BEF318AA1554DC698BD8@SRVSHPCL03EX2.itshessen.hessen.de>

Hi list,
i'm developing a tool which has to convert all tiff-files in a directory. I'm doing it with java. The tool should create some overview images (image pyramid) for the tiffs like we used to do manually with gdaladdo before. Therefore i compiled the gdal 1.5.2 librarys with swig-support for java. The result was a gdal.jar that i imported to my project. But because of missing documentation (even no javadoc) i'm totally lost in using the classes. I need the similar class.method which does the same like the script driven gdaladdo. Example:
gdaladdo -r average abc.tif 2 4 8 16
Should be done by a java-class/method. Does anybody have a documentation, example or even a hint for me?
Thanks
Albrecht

--
Albrecht Weiser, 
E6, GIS Center

Hessische Zentrale f?r Datenverarbeitung (HZD)
Mainzer Stra?e 29, 65185 Wiesbaden
Tel.:  0611 340-3113
Fax:  0611 340-5113
E-Mail: albrecht.weiser@hzd.hessen.de

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/5db798ad/attachment.html
From ivan.lucena at pmldnet.com  Fri Jan 16 12:05:59 2009
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Jan 16 12:06:02 2009
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gdXNpbmcgR0RBTCBpbiBhIGphdmEtcHJvZ3JhbQ==?=
Message-ID: <20090116170559.24483.qmail@s466.sureserver.com>

Albrecht,

On the code that I am working right now I can see that there is a BuildOverviews on the GDAL Java API:

"dataset.BuildOverviews(result, overviewlist, callback, callback_data)"

So it should use the same logic as in:

http://www.gdal.org/classGDALDataset.html#2aa6f88b3bbc840a5696236af11dde15

Best regards,

Ivan

>  -------Original Message-------
>  From: Albrecht.Weiser@hzd.hessen.de
>  Subject: [gdal-dev] using GDAL in a java-program
>  Sent: Jan 16 '09 16:20
>  
>  Hi list,
>  i'm developing a tool which has to convert all tiff-files in a directory.
>  I'm doing it with java. The tool should create some overview images (image
>  pyramid) for the tiffs like we used to do manually with gdaladdo before.
>  Therefore i compiled the gdal 1.5.2 librarys with swig-support for java.
>  The result was a gdal.jar that i imported to my project. But because of
>  missing documentation (even no javadoc) i'm totally lost in using the
>  classes. I need the similar class.method which does the same like the
>  script driven gdaladdo. Example:
>  
>  gdaladdo -r average abc.tif 2 4 8 16
>  Should be done by a java-class/method. Does anybody have a documentation,
>  example or even a hint for me?
>  Thanks
>  Albrecht
>  
>  --
>  Albrecht Weiser,
>  E6, GIS Center
>  
>  Hessische Zentrale f?r Datenverarbeitung (HZD)
>  Mainzer Stra?e 29, 65185 Wiesbaden
>  Tel.:  0611 340-3113
>  Fax:  0611 340-5113
>  E-Mail: albrecht.weiser@hzd.hessen.de
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Fri Jan 16 12:14:00 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 12:14:19 2009
Subject: [gdal-dev] using GDAL in a java-program
In-Reply-To: <CE18753D388B804D89BEF318AA1554DC698BD8@SRVSHPCL03EX2.itshessen.hessen.de>
References: <CE18753D388B804D89BEF318AA1554DC698BD8@SRVSHPCL03EX2.itshessen.hessen.de>
Message-ID: <4970C058.1040902@pobox.com>

Albrecht.Weiser@hzd.hessen.de wrote:
> Hi list,
> i'm developing a tool which has to convert all tiff-files in a 
> directory. I'm doing it with java. The tool should create some overview 
> images (image pyramid) for the tiffs like we used to do manually with 
> gdaladdo before. Therefore i compiled the gdal 1.5.2 librarys with 
> swig-support for java. The result was a gdal.jar that i imported to my 
> project. But because of missing documentation (even no javadoc) i'm 
> totally lost in using the classes. I need the similar class.method which 
> does the same like the script driven gdaladdo. Example:
> 
> gdaladdo -r average abc.tif 2 4 8 16
> Should be done by a java-class/method. Does anybody have a 
> documentation, example or even a hint for me?

Albrecht,

The key function is GDALDataset::BuildOverviews().

   http://www.gdal.org/classGDALDataset.html#2aa6f88b3bbc840a5696236af11dde15

 From the Dataset.java file (in trunk - possibly matching 1.5.2) I see
this declaration:

   public int BuildOverviews(String resampling, int[] overviewlist, 
ProgressCallback callback) {
     return gdalJNI.Dataset_BuildOverviews(swigCPtr, this, resampling, 
overviewlist, callback);
   }

I'm not exactly sure how to make the callback work for reporting progress.
Hopefully you can just pass null for that.  There are a couple very brief
examples of Java use in gdal/swig/java/apps though they don't cover
building overviews.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From thare at usgs.gov  Fri Jan 16 12:31:45 2009
From: thare at usgs.gov (Trent M Hare)
Date: Fri Jan 16 12:47:20 2009
Subject: [gdal-dev] improve PDS and Isis drivers
In-Reply-To: <496E270E.5090804@pobox.com>
Message-ID: <OF26EF88B8.6F08A134-ON07257540.005C7CF8-07257540.00604ACE@usgs.gov>

Lidiriel,
        All PDS, ISIS2, and ISIS3 drivers should support detached labels 
for the simple raw (or ISIS3 tiled) formats (now the PDS reader doesn't 
support detached JP2 images yet).  There have been a few fixes in the last 
few months for these planetary readers so try to stick with 1.6.x.

The minimal PDS driver was implemented because it was similar to ISIS2 
thus it is not very robust. The goal for all these drivers was to mainly 
capture the projection information for GIS/RS applications thus it is not 
meant for non-projected or raw PDS (EDR) images. There are MANY 
non-standard PDS images in the wild (e.g. missing projection parameters, 
incorrect offsets for X,Y corners, odd labels), so it can be very hard to 
generate a generic PDS reader which checks for all the known issues. One 
future goals I had was to utilize an existing PDS library to enhance the 
currently used very simple label parser that we wrote and Frank fixed up 
for us. There are a few good library examples discussed here: 
http://www.orrery.us/node/44 . However, PDS3 has a short life span ahead 
of it.  There are talks of a new PDS2010 standard to replace PDS3. This 
will probably be available in 2010 or 2011. 

Simple fixes for current PDS label that would be great for one, like 
yourself, or other to implement. 
1.) PDS detached label that points to JP2 image. Currently the PDS reader 
only support raw images
2.) Band name propagation (or other metadata? that can be easily mapped 
into GDAL).

But any changes or enhancements would be welcome. I really hope the PDS 
itself will get behind this driver and help to support its ongoing 
development. I think they (PDS at JPL) are using to create browse jpeg 
images for the new Mercury images. There are just not many good readers 
out there for PDS (Nasaview has it place but is not very useful). And 
really hope they will consider GDAL support for the new PDS2010 format - 
whatever that will be. Maybe they will even choose to be compatible to an 
existing format! I can only hope.

Again, I never meant for this reader to support raw EDR images because 
those come in many different styles of compressions (e.g. MOC can have 
none, discrete cosine transform or  Walsh-Hadamard transform compression). 
It is currently intended for only map-projected raw PDS3 images.

Regards,
Trent







Frank Warmerdam <warmerdam@pobox.com> 
Sent by: gdal-dev-bounces@lists.osgeo.org
01/14/2009 10:55 AM

To
lidiriel <ludovic.mercier@gmail.com>
cc
gdal-dev@lists.osgeo.org
Subject
Re: [gdal-dev] improve PDS and Isis drivers






lidiriel wrote:
> hi,
> 
> I work with several pds files and i have many idea for improve
> driver :
> 
> Add several domaine (for obtain a classification) with standard
> Metadata like describe in "PDS standars reference" document (chapter5
> v3.7) each domain can contains a minimum number of keys.
> 
> domaine name (dn): LABEL_STANDARDS
> keys : PDS_VERSION_ID, DD_VERSION_ID, LABEL_REVISION_NOTE
> 
> dn : FILE_CHARACTERISTICS
> keys: RECORD_TYPE, RECORD_BYTES, ...
> 
> dn : IDENTIFICATION_DATA_ELEMENTS
> keys: DATA_SET_ID ...
> 
> 
> implementation of reading a detached data in first time for ISIS2
> driver :
> ("filename", nnn) (chapter 5 page 13 of PDS specification v3.7)
> Many of my data use this last notation and for using gdal i will must
> implemented this in priority.

Lidiriel,

I am reasonably supportive of adding capture and exposure of metadata
from PDS, ISIS2 and ISIS3 datasets in some appropriate fashion. I'd
be open to appropriate patches though I'm not inclined to do much more
directly as implementation than I have already done, unless my original
client (USGS) demonstrated an interest.

I believe we do have some support for detached datasets.  Perhaps that
is only in ISIS3?  I would be happy to have detached support also added
in ISIS2.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/c4e96bd5/attachment.html
From gaffigan at sfos.uaf.edu  Fri Jan 16 12:54:56 2009
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Fri Jan 16 13:06:48 2009
Subject: [gdal-dev] How to use TransformPoints in python?
In-Reply-To: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
References: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
Message-ID: <4970C9F0.8080605@sfos.uaf.edu>

Rene,

You could also use the pyproj module (http://code.google.com/p/pyproj/).

> import os, osgeo, numpy
import pyproj
> from osgeo import ogr, osr
> 
> 
> def getProjection( EPSGcode ):
>     """ set a projection from ... to lat-long """
> 
>     srs = osgeo.osr.SpatialReference()
>     srs.ImportFromEPSG( EPSGcode )
>     # RD-NL lacks TOWGS84
>     if EPSGcode == 28992:
>         srs.SetTOWGS84( 565.237, 50.0087, 465.658, -0.406857, 0.350733, 
> -1.87035, 4.0812 )
> 
       return pyproj.Proj(srs.ExportToProj4())
> 
> 
> if __name__ == '__main__':
> 
>     proj = getProjection( 28992 )
> 
>     polygon =[[132817.006604435708141, 550302.852720651309937, 0.],
>               [131182.28895997320069, 558340.214472591876984, 0.],
>               [132578.61028128489852, 558748.893883707583882, 0.],
>               [136631.347774848196423, 553436.061539204441942, 0.],
>               [136631.347774848196423, 553436.061539204441942, 0.],
>               [132817.006604435708141, 550302.852720651309937, 0.]]
> 
>     x = numpy.array( [p[0] for p in polygon] )
>     y = numpy.array( [p[1] for p in polygon] )
>     z = numpy.array( [p[2] for p in polygon] )
> 
       print proj(x, y, inverse=True)
> 
> returns:
> 
(array([ 5.05762415,  5.03271685,  5.05349572,  5.11419251,  5.11419251,
         5.05762415]), array([ 52.94040396,  53.01256714,  53.01629989, 
  52.96870616,
         52.96870616,  52.94040396]))

Steve
From tripplowe at gmail.com  Fri Jan 16 14:02:17 2009
From: tripplowe at gmail.com (Tripp Lowe)
Date: Fri Jan 16 14:02:19 2009
Subject: [gdal-dev] GDAL & FORTRAN...
Message-ID: <8f0c8ded0901161102of436502m730ff3d844febaa5@mail.gmail.com>

Are there any gdal libraries for fortran?  .

Currently, my fortran programs read in a BSQ satellite image, do something,
and output the pixel values as a text file (that's read into a perl/gdal
program that creates the .img).  It would be nice to eliminate some of the
steps.

Thanks.
-- 
Tripp
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/c6477f77/attachment.html
From warmerdam at pobox.com  Fri Jan 16 14:04:31 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 14:04:53 2009
Subject: [gdal-dev] GDAL & FORTRAN...
In-Reply-To: <8f0c8ded0901161102of436502m730ff3d844febaa5@mail.gmail.com>
References: <8f0c8ded0901161102of436502m730ff3d844febaa5@mail.gmail.com>
Message-ID: <4970DA3F.6080501@pobox.com>

Tripp Lowe wrote:
> Are there any gdal libraries for fortran?  .
> 
> Currently, my fortran programs read in a BSQ satellite image, do 
> something, and output the pixel values as a text file (that's read into 
> a perl/gdal program that creates the .img).  It would be nice to 
> eliminate some of the steps.

Tripp,

I vaguely recall someone making some custom fortran bindings a few years
ago but I don't believe that was released publically.  I imagine it would
not be that hard to prepare simplified FORTRAN bindings for raster access
but it isn't something I'm keen on pursuing myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From stevensw at erau.edu  Fri Jan 16 15:03:53 2009
From: stevensw at erau.edu (Wendy Fay Stevenson)
Date: Fri Jan 16 15:03:54 2009
Subject: [gdal-dev] Specifying Extents in GDAL Warp API
Message-ID: <20090116150353.AKT91697@mymail.erau.edu>

Hi

I notice that in the Gdal Warp Utility, it is possible to specify the extent of the source image that you would like warped.  Is there an easy way to do this using the gdal warp API?  

For example, I have an image in LCC projection covering the whole of the United States.  I would like to warp that image into a Mercator projection and have the resulting image contain only a portion of the original image.

regards
Wendy
From Shawn.Gong at drdc-rddc.gc.ca  Fri Jan 16 15:21:47 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Jan 16 15:19:44 2009
Subject: [gdal-dev] gdalnumeric.BandWriteArray  gdalnumeric.Int8
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6CA@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have used datablock.astype(gdalnumeric.Int16) in
gdalnumeric.BandWriteArray()

Is there a gdalnumeric.Int8 to write an 8-bit band/image?

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/015f7b29/attachment.html
From greg at ergonosis.com  Fri Jan 16 15:37:56 2009
From: greg at ergonosis.com (Greg Ederer)
Date: Fri Jan 16 15:38:04 2009
Subject: [gdal-dev] gdal_translate upside down image
Message-ID: <26BEE98F-EBF8-42FE-B395-431AAF8D8477@ergonosis.com>

Hi,

I'm running gdal_translate against a VRT file:

<VRTDataset rasterXSize="751" rasterYSize="801">
   <GeoTransform>-20.05, 0.1, 0.0, 40.05, 0.0, -0.1</GeoTransform>
   <SRS>
		GEOGCS[&quot;WGS 84&quot;,
			DATUM[&quot;WGS_1984&quot;,
					SPHEROID[&quot;WGS 84&quot;,6378137,298.2572235630016,
							AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
					AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
			PRIMEM[&quot;Greenwich&quot;,0],
			UNIT[&quot;degree&quot;,0.0174532925199433],
			AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
   </SRS>
   <VRTRasterBand dataType="Float32" band="1"  
subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">10day_precip.bin.1999121</ 
SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>4</PixelOffset>
     <LineOffset>3004</LineOffset>
     <ByteOrder>MSB</ByteOrder>
     <NoDataValue>-999.0</NoDataValue>
   </VRTRasterBand>
</VRTDataset>

I just noticed that the resulting GeoTIFF is upside down.  Is this a  
problem with my GeoTransform values?  If so, what values would produce  
the image right side up?

Thanks!

Greg
From warmerdam at pobox.com  Fri Jan 16 15:52:10 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 16 15:52:34 2009
Subject: [gdal-dev] gdal_translate upside down image
In-Reply-To: <26BEE98F-EBF8-42FE-B395-431AAF8D8477@ergonosis.com>
References: <26BEE98F-EBF8-42FE-B395-431AAF8D8477@ergonosis.com>
Message-ID: <4970F37A.7010200@pobox.com>

Greg Ederer wrote:
> Hi,
> 
> I'm running gdal_translate against a VRT file:
> 
> <VRTDataset rasterXSize="751" rasterYSize="801">
>   <GeoTransform>-20.05, 0.1, 0.0, 40.05, 0.0, -0.1</GeoTransform>
>   <SRS>
>         GEOGCS[&quot;WGS 84&quot;,
>             DATUM[&quot;WGS_1984&quot;,
>                     SPHEROID[&quot;WGS 84&quot;,6378137,298.2572235630016,
>                             AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
>                     AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
>             PRIMEM[&quot;Greenwich&quot;,0],
>             UNIT[&quot;degree&quot;,0.0174532925199433],
>             AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
>   </SRS>
>   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
>     <SourceFilename 
> relativetoVRT="1">10day_precip.bin.1999121</SourceFilename>
>     <ImageOffset>0</ImageOffset>
>     <PixelOffset>4</PixelOffset>
>     <LineOffset>3004</LineOffset>
>     <ByteOrder>MSB</ByteOrder>
>     <NoDataValue>-999.0</NoDataValue>
>   </VRTRasterBand>
> </VRTDataset>
> 
> I just noticed that the resulting GeoTIFF is upside down.  Is this a 
> problem with my GeoTransform values?  If so, what values would produce 
> the image right side up?

Greg,

I don't see any obvious problem with the geotransform values.

Perhaps the image really is upside on disk.  If so, you could flip it as
it is read by changing your values to

<ImageOffset>2403200</ImageOffset>
<PixelOffset>4</PixelOffset>
<LineOffset>-3004</LineOffset>

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Fri Jan 16 16:39:01 2009
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri Jan 16 16:39:02 2009
Subject: [gdal-dev] gdal_translate input separate R,G,B output combined 
	RGB
In-Reply-To: <BD745AD8-0AAF-4A41-B4C5-00751F12BCDF@mac.com>
References: <BD745AD8-0AAF-4A41-B4C5-00751F12BCDF@mac.com>
Message-ID: <9c2015090901161339t596024d4h9ba7c08a24aba025@mail.gmail.com>

Hi Greg,

I don't know of a gdal_translate command for this, but you can use the
gdal_merge.py tool to do this.

gdal_merge.py - o <outfile> -separate gtif_R.tif gtif_G.tif gtif_B.tif

Roger
--

2009/1/9 Greg Coats <gregcoats@mac.com>

> I have 3 single band GeoTIF images of the same geographic area: one for the
> Red band, one for the Green band, and one for the Blue
> band, gtif_R.tif, gtif_G.tif, gtif_B.tif.  Please, what is the
> gdal_translate syntax http://www.gdal.org/gdal_translate.html <http://www.gdal.org/gdal_translate.html>to
> combine these 3 single band GeoTIF images into 1 three band RGB GeoTIF
> image, gtif_RGB.tif?  Greg
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090116/f354099b/attachment.html
From landa.martin at gmail.com  Sat Jan 17 10:25:30 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Sat Jan 17 10:25:32 2009
Subject: [gdal-dev] python bindings in 1.6
Message-ID: <f8fe65c40901170725m466765fejc7f69e9a22d79456@mail.gmail.com>

Hi,

I have problem with the GDAL/OGR python bindings (trunk and branches/1.6).

Traceback (most recent call last):
  File "./geocent2ll.py", line 14, in ?
    from osgeo import ogr
  File "/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-i686.egg/osgeo/ogr.py",
line 108, in ?
    import osr
  File "/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-i686.egg/osgeo/osr.py",
line 7, in ?
    import _osr
ImportError: /usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-i686.egg/osgeo/_osr.so:
undefined symbol: OSRSetGaussSchreiberTMercator

Using GDAL 1.5 I have problem with the TransformPoint() method.

  File "./geocent2ll.py", line 184, in ?
    sys.exit(main())
  File "./geocent2ll.py", line 181, in main
    Proj(idata).Convert(fs = None)
  File "./geocent2ll.py", line 147, in Convert
    trans.TransformPoint(xi, yi, zi)
  File "/usr/lib/python2.4/site-packages/GDAL-1.5.3-py2.4-linux-i686.egg/osgeo/osr.py",
line 602, in TransformPoint
    return _osr.CoordinateTransformation_TransformPoint(*args)
NotImplementedError: Wrong number of arguments for overloaded function
'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    TransformPoint(double [3])
    TransformPoint(double [3],double,double,double)

Thanks in advance, Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa *
From even.rouault at mines-paris.org  Sat Jan 17 11:05:48 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 17 11:06:01 2009
Subject: [gdal-dev] /vsisubfile/ and using MrSID SDK for JPEG2000 in NITF
In-Reply-To: <496D8FFB.3010705@pobox.com>
References: <496D8FFB.3010705@pobox.com>
Message-ID: <200901171705.49022.even.rouault@mines-paris.org>

> I have not yet confirmed the ECW and JP2KAK drivers are still working
> properly in this situation, but they ought to be since both supported
> VSI*L file streams.
>

I've made some necessary changes (r16092) in the JP2ECW driver to make it work 
with the /vsisubfile/ syntax, or any other virtual file system, 
like /vsimem, /vsigzip, etc... Previously, it used VSI*L file streams only 
with the J2K_SUBFILE: syntax.

Best regards
From even.rouault at mines-paris.org  Sat Jan 17 14:11:47 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 17 14:12:00 2009
Subject: [gdal-dev] using GDAL in a java-program
In-Reply-To: <4970C058.1040902@pobox.com>
References: <CE18753D388B804D89BEF318AA1554DC698BD8@SRVSHPCL03EX2.itshessen.hessen.de>
	<4970C058.1040902@pobox.com>
Message-ID: <200901172011.48889.even.rouault@mines-paris.org>

Le Friday 16 January 2009 18:14:00 Frank Warmerdam, vous avez ?crit?:
> I'm not exactly sure how to make the callback work for reporting progress.
> Hopefully you can just pass null for that. ?There are a couple very brief
> examples of Java use in gdal/swig/java/apps though they don't cover
> building overviews.

I should mention that I'm currently working on improving the Java bindings.

In fact, the BuildOverviews() is one of the methods whose signature has 
changed in trunk.

Previously (1.5.X and 1.6.0), the signature was :

  public int BuildOverviews(String resampling, int[] overviewlist,
                                         SWIGTYPE_p_GDALProgressFunc callback,
                                         java.nio.ByteBuffer callback_data)

which was obviously wrong (wrong and missing typemaps for the callback).


In trunk, we now have :
? ?public int BuildOverviews(String resampling, int[] overviewlist,
                                          ProgressCallback callback);

where callback :
- can be passed as null,
- or used like this for the standard GDAL progress on the terminal:

	BuildOverviews(resampling, overviewlist, new TermProgressCallback());

- or for a custom progress method:

	BuildOverviews(resampling, overviewlist,
                        new ProgressCallback()  {
                           public int run(double dfProgress, String message) {
                              System.out.println(message + " " +
                                                      100 * dfProgress + "%");
                                return 1;
                            }
                        });

And (not commited yet), the callback argument will be an optional argument.


Do people think that these changes (only made when previous typemaps were 
wrong or missing) will be too disruptive ? If so, we could imagine adding 
compatibilty methods, to keep the same number of arguments. For example:

  public int BuildOverviews(String resampling, int[] overviewlist,
                                         Object unused1, Object unused2)
  {
     return BuildOverviews(resampling, overviewlist, null);
  }

but even if the number of argument is the same, the binary signature of the 
method would be different and people would have to recompile their Java code 
to run against the new GDAL .jar file. In any event, if people really need 
such a compatibilty layer, we'd need to know which methods they are using.

I should also mention that the API for many methods (like 
Dataset.ReadRaster(), Dataset.WriteRaster(), Dataset.SetGCP(), anything 
related to ColorTable) was so broken that they probably could not be used.

Any thought ?

Even

From even.rouault at mines-paris.org  Sat Jan 17 15:43:18 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 17 15:43:30 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
In-Reply-To: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE592D@beja012.edia.pt>
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
	<25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>
	<A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE592D@beja012.edia.pt>
Message-ID: <200901172143.19682.even.rouault@mines-paris.org>

Here's one solution :

1) create a directory, for example "merge_shp"
2) copy in merge_shp the shapefile that is going to be put in the waypoints 
layer as "waypoints.shp" (rename the .dbf and .shx accordingly)
3) copy in merge_shp the shapefile that is going to be put in the tracks layer 
as "tracks.shp" (rename the .dbf and .shx accordingly)
4) run "ogr2ogr -f GPX merged.gpx merge_shp waypoints tracks" (the order of 
the layers is important)

A solution based on an OGR VRT file defining the two layers from the 2 
shapefiles would also probably work.

Le Thursday 15 January 2009 12:03:27 Duarte Carreira, vous avez ?crit?:
> Maybe the same approach can be used with 2 gpx files? That would be very
> good. I cannot merge 2 shapefiles with different geometry types. I could
> convert line shape>gpx1 and point shape->gpx2 and then merge
> gpx2+gpx2->gpx3...
>
>
> Thanks,
> Duarte
>
> De: Stefan Keller [mailto:sfkeller@gmail.com]
> Enviada: quarta-feira, 14 de Janeiro de 2009 22:40
> Para: Jean-Claude Repetto
> Cc: Duarte Carreira; gdal-dev@lists.osgeo.org
> Assunto: Re: [gdal-dev] convert 2 shapefiles to a single GPX?
>
>
> A merge of two shapefiles 'file1.shp' and 'file2.shp' into a new file
> 'file_merged.shp' is performed like this (See
> http://www.gdal.org/ogr/drv_shapefile.html):
>
> % ogr2ogr file_merged.shp file1.shp
> % ogr2ogr -update -append file_merged.shp file2.shp -nln file_merged
>
> Then convert to GPX:
> % ogr2ogr -f "GPX" out.gpx file_merged.shp
>
> Stefan
> http://geoconverter.hsr.ch<http://geoconverter.hsr.ch/>
> 2009/1/14 Jean-Claude Repetto <jrepetto@free.fr<mailto:jrepetto@free.fr>>
> Duarte Carreira a ?crit :
>
> Can OGR convert 2 shapefiles to a single GPX?
>
> The objective is to add tracks from a line shapefile and waypoints from a
> point shapefile...
>
> Hello,
>
> I don't know the answer to your question, but since GPX files are text
> files, it is very easy to merge two GPX files with a text editor.
>
> HTH !
> Jean-Claude
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jordi.inglada at cnes.fr  Sun Jan 18 11:34:48 2009
From: jordi.inglada at cnes.fr (jordi inglada)
Date: Sun Jan 18 11:40:33 2009
Subject: [gdal-dev] OTB 2.8 available
Message-ID: <c90dd6a90901180834h5a06ad3ag5b9a8682492ed5c3@mail.gmail.com>

 Dear all,

CNES is happy to announce the release of OTB 2.8, code name "" (Gong Xi
Fa Cai).

The main additions to this version are both on the library and the
applications.

End users will be happy to find 3 very useful new applications:
1. Object Counting <
http://blog.orfeo-toolbox.org/uncategorized/counting-objects>
2. Fine Registration <
http://blog.orfeo-toolbox.org/uncategorized/fine-registration>
3. Road Extraction <
http://blog.orfeo-toolbox.org/preview/road-extraction-revamped>

A very user-friendly installer for the whole set of applications is provided
for Windows users.

Library users will be interested about:
1. A new implementation (faster, more robust) of the SIFT algorithm
2. The Speed-Up Robust Features (SURF) kindly contributed by
Communications & Systmes
3. The Mean Shift filtering and clustering algorithm
4. The out-of-the-box support for KML and OpenStreetMaps
5. The support for lidar data using libLAS <http://liblas.org/>

As usual, you can go to <http://www.orfeo-toolbox.org/> and follow the
download link or get directly to Sourceforge
<http://sourceforge.net/projects/orfeo-toolbox/> and get the packages
there. Full source code, Software Guide and Windows binaries are
available.

OTB is the only open source library which makes available a full set of
building blocks for implementing remote sensing image processing going
from low level to advanced map applications. All this thanks to, among
others,
ITK, GDAL and OSSIM.

>From sensor models to GoogleEarth format compatibility, from image
filtering to Support Vector Machine classification and regression, from
binary mathematical morphology to SIFT matching, from rigid registration
to PDE-based disparity map estimation, and much more.

Subscribe to <http://blog.orfeo-toolbox.org/feed> if you want to get
periodic updates about OTB.

Best regards,

J. Inglada

--
CNES - DCT/SI/AP - BPI 1219
18, avenue Edouard Belin
31401 Toulouse Cedex 09 - France
Tel. +33.(0)5.61.27.33.97 - Fax. +33.(0)5.61.28.31.09
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090118/25c6e1ac/attachment.html
From nicholas.g.lawrence at mainroads.qld.gov.au  Sun Jan 18 21:02:37 2009
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Sun Jan 18 21:18:02 2009
Subject: [gdal-dev] OGR error
In-Reply-To: <49709C81.1070501@pobox.com>
Message-ID: <OF0060BD60.B5CF5814-ON4A257543.000B00AB-4A257543.000B37B2@transport.qld.gov.au>

> > I am using ogr2ogr to append several shapefiles into one shapefile.
> >
> > The command
> >
> > ogr2ogr -update -append C:\DATA\neville\fire.shp
> > C:\DATA\neville\bundaberg.shp -nln fire
> >
> > which is repeated many times in a batch file to append more and more
> > shapefiles to
> > the destination file.
> >
> > After about a dozen successful appends, I get this error message
> >
> > ERROR 1: Error in psSHP->sHooks.FSeek() or fwrite() writing object to
.shp
> > file.
> >
> > which is repeated a 1000 times until ogr2ogr decides to stop giving
> > warnings.

> Nick,

> It basically means that writes to the .shp file are failing.  The most
> likely reason is that your disk is full or the .shp file grew to be
> larger than 2GB/4GB.  Are either of those possible?  If not, we would
> need to pursue normal bug reporting approaches.

I have 60 GB free of hard disc space.

The shapefile I was creating was just over 2 GB when it crashed.
The total size of the shapefiles I am trying to append is about
2.7 GB.

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From buslers at gmail.com  Sun Jan 18 23:43:37 2009
From: buslers at gmail.com (Shaun & Melissa Busler)
Date: Sun Jan 18 23:43:41 2009
Subject: [gdal-dev] Update on OGR DXF Driver?
Message-ID: <c2935d6b0901182043x11733134y927d168a5f24b615@mail.gmail.com>

I was wondering if any progress has been made on the development of an
OGR DXF Driver.  I saw some discussion in the archives back in 10/2008
but have not seen any postings since.

Thanks!

Shaun Busler
From mdsumner at utas.edu.au  Mon Jan 19 04:57:45 2009
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Mon Jan 19 04:57:54 2009
Subject: [gdal-dev] Writing a Tiff
In-Reply-To: <20090116153222.DB2F2E01632@lists.osgeo.org>
References: <20090116153222.DB2F2E01632@lists.osgeo.org>
Message-ID: <49744E99.3050307@utas.edu.au>

Hello,

Note this recent R-Sig-Geo post about the "in-development" nature of the 
latest builds of rgdal - you need to let us know what versions you are 
using. Also, view the definition of writeGDAL() to see how the lower 
level functions are used.

https://stat.ethz.ch/pipermail/r-sig-geo/2009-January/004830.html

I think your question properly belongs on R-Sig-Geo, but this might be 
of interest to others here using R. Please report the results of 
sessionInfo() from R.  I've included an R session below using your 
function, but only with a tiny input dataset.

BTW, you can simplify the writing of GTiffs with writeGDAL() -unless you 
are intending to develop your function to write to the file in smaller 
pieces. The code to do that can be as simple as this:
library(rgdal)
## read in matrix to bm
## . . .
## generate X/Y coordinates - assuming your matrix is aligned as image() 
expects (replace 0 and 1 as needed)
xx <- seq(0, length = nrow(bm), by = 1)
yy <- seq(0, length = ncol(bm), by = 1)
##
writeGDAL(image2Grid(list(x = xx, y = yy, z = bm))

But, your R function works for me for the following simple test. As 
Frank mentioned, it probably comes down to a version problem or a file 
size limit (although that seems unlikely since your input matrix "bm" 
must be completely loaded in memory).

 library(rgdal)
#Loading required package: sp
#Geospatial Data Abstraction Library extensions to R successfully loaded
#Loaded GDAL runtime: GDAL 1.6.0, released 2008/12/04
#Path to GDAL shared files: C:\inst\R\library/rgdal/gdal
#Loaded PROJ.4 runtime: Rel. 4.6.1, 21 August 2008
#Path to PROJ.4 shared files: C:\inst\R\library/rgdal/proj

data(volcano)  # matrix 87x61
bm.writeTiff(volcano, "volc.tif")
#         used (Mb) gc trigger (Mb) max used (Mb)
#Ncells 305831  8.2     597831   16   407500 10.9
#Vcells 149194  1.2     786432    6   467409  3.6
tst <- readGDAL("volc.tif")

#volc.tif has GDAL driver ltalk X6
#and has 87 rows and 61 columns


I'm not at all sure what "ltalk X6" is about, also see "pt..." in the 
GDALinfo() call:

 > GDALinfo("volc.tif")
rows        87
columns     61
bands       1
origin.x        0
origin.y        1
res.x       1
res.y       1
oblique.x   0
oblique.y   0
driver      pt...
projection  NA
file        volc.tif



This gives the right information, but  my build of GDAL is different 
from that used by rgdal.

 > system("gdalinfo volc.tif")
Driver: GTiff/GeoTIFF
Files: volc.tif
Size is 61, 87
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   87.0)
Upper Right (   61.0,    0.0)
Lower Right (   61.0,   87.0)
Center      (   30.5,   43.5)
Band 1 Block=61x33 Type=Int32, ColorInterp=Gray

 > system("gdalinfo --version")
GDAL 1.6.0, released 2008/12/04

sessionInfo()
R version 2.8.1 (2008-12-22)
i386-pc-mingw32

locale:
LC_COLLATE=English_Australia.1252;LC_CTYPE=English_Australia.1252;LC_MONETARY=English_Australia.1252;LC_NUMERIC=C;LC_TIME=English_Australia.1252

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base    

other attached packages:
[1] rgdal_0.6-1     sp_0.9-28       rcom_2.0-4      rscproxy_1.0-12

loaded via a namespace (and not attached):
[1] grid_2.8.1      lattice_0.17-17 tools_2.8.1   

HTH,
Regards, Mike.

>
> ------------------------------------------------------------------------
>
> Subject:
> Re: [gdal-dev] Writing a Tiff
> From:
> Henning Bredel <henning.bredel@uni-muenster.de>
> Date:
> Fri, 16 Jan 2009 10:27:29 +0100
> To:
> Frank Warmerdam <warmerdam@pobox.com>
>
> To:
> Frank Warmerdam <warmerdam@pobox.com>
> CC:
> "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
>
>
> On Thu, 2009-01-15 at 16:57 -0500, Frank Warmerdam wrote:
>   
>>> ,-----------------------------------.
>>> bm.writeTiff <- function(bm,filename) {
>>>         
>>>         # GTiff ist standard but show it here, though
>>>         driver <- new('GDALDriver', 'GTiff')
>>>         
>>>         t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
>>>                         type="Int32")
>>>
>>>         for (row in 1:nrow(bm)-1) {
>>>                 putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
>>>         }
>>>         
>>>         saveDataset(t,filename)
>>>         closeDataset(t)
>>> }
>>>       
>> Henning,
>>
>> I am embarrassed to admit I don't even know what language the above is!
>> Perl?  Ruby?
>>     
>
> ups .. sorry, I was on the R-sig mailinglist before, so I forget to
> point the language out explicitely. It's R -- I'm using GDAL with a
> wrapper package called `rgdal' (Roger Bivand is involved in its 
> development).
>
>   
>> Normally there is a function to be called to register all the drivers
>> with the drivermanager instance.  I think all the swig bindings call
>> this automatically at load time.
>>
>> Then you could normally call GetDriverByName() in the gdal "module" however
>> that gets bound into your language.
>>
>>     
>
> Well, rgdal offers also a `getGDALDriverByName() method. The output
> says that there is GeoTiff creation support. 
>
>   
>> In Python the above would be something like:
>>
>> driver = gdal.GetDriverByName('GTiff')
>> dataset = driver.Create('file.tif', rows, columns, bands, gdal.Int32, None )
>> ...
>>
>> The main point I want to make is you don't actually create a driver object.
>> You just get a reference to an existing one from the driver manager which
>> is usually hidden by the global GetDriverByName() function
>> (GDALGetDriverByName() in C).
>>     
>
> I have read a satellite image into a matrix and now I would like
> to write it into an image file again (maybe this sounds strange.
> If you are interested in the background, I could tell ..).
> The thing is, that I want to write into another file format than
> the file I have read in, so how could I get the driver, if not
> creating a new one?
>
> My first try to write a GTiff with 
>
> ,--------------------------
> bm.writeTiff <- function(bm,filename) {
>         
>         # GTiff ist standard but show it here, though
>         driver <- new('GDALDriver', 'GTiff')
>         
>         t <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm),
>                         type="Int32")
>
>         for (row in 1:nrow(bm)-1) {
>                 putRasterData(t,bm[row,1:(ncol(bm)-1)],offset=c(row,1))
>         }
>         
>         saveDataset(t,filename)
>         closeDataset(
> `--------------------------
>
> runs into the error (after approx. 30 sec.)
>
> ,--------------------------
>  Wrong "StripByteCounts" field, ignoring and calculating from imagelength
> `--------------------------
>
> What does this error mean??
>
> Another strange thing is, that there is no GTiff support after
> that error anymore! The 2nd call of `getGDALDriverNames()' out-
> put is missing the GTiff entry at all. Could this be a GDAL 
> error or do I have to ask at the RGDAL mailinglist as well?
>
> Thx for your help
>
>   Henning
>
>
>   
>
> ------------------------------------------------------------------------
>
> Subject:
> Re: [gdal-dev] Writing a Tiff
> From:
> Frank Warmerdam <warmerdam@pobox.com>
> Date:
> Fri, 16 Jan 2009 09:17:11 -0500
> To:
> Henning Bredel <henning.bredel@uni-muenster.de>
>
> To:
> Henning Bredel <henning.bredel@uni-muenster.de>
> CC:
> "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
>
>
> Henning Bredel wrote:
>> ups .. sorry, I was on the R-sig mailinglist before, so I forget to
>> point the language out explicitely. It's R -- I'm using GDAL with a
>> wrapper package called `rgdal' (Roger Bivand is involved in its 
>> development).
>
> Henning,
>
> Gotcha.
>
> I will note that the R bindings are not generated using SWIG so some
> of my assumptions in the previous email can be wrong.
>
>> runs into the error (after approx. 30 sec.)
>>
>> ,--------------------------
>>  Wrong "StripByteCounts" field, ignoring and calculating from 
>> imagelength
>> `--------------------------
>>
>> What does this error mean??
>>
>> Another strange thing is, that there is no GTiff support after
>> that error anymore! The 2nd call of `getGDALDriverNames()' out-
>> put is missing the GTiff entry at all. Could this be a GDAL error or 
>> do I have to ask at the RGDAL mailinglist as well?
>
> My guess is that there has been some sort of heap corruption.
>
> Normally you would only get the "Wrong StripByteCounts" message when 
> reading
> a poorly generated TIFF file from an underlying library other than 
> libtiff.
> If you are getting it while operating on a TIFF file being generated with
> libtiff (and GDAL) it likely means that the file was corrupted or that
> the heap was somehow corrupted.   There could be quite a number of 
> possible
> reasons for this.
>
> I will note that the GDAL geotiff writer in some cases stresses the 
> limits
> of libtiff and it can be important to have a very recent version (such as
> the CVS head from the libtiff repository).  The version included with 
> GDAL
> internally is generally suitable.  Versions of libtiff provided with
> software distributions are generally somewhat antique.
>
> Nevertheless, your simple write through case is not a complicated one and
> would not normally trigger problems.
>
> Is it possible your TIFF file is growing to be larger than 4GB?  If you
> are using an older non-BigTIFF version of libtiff this could cause 
> issues.
> Recent versions of GDAL will generally warn if this is likely to be a 
> problem
> but I don't recall your quoting the GDAL version number.
>
> Best regards,
>
> ------------------------------------------------------------------------
>
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.176 / Virus Database: 270.10.8/1898 - Release Date: 16/01/2009 3:09 PM
>
>   

From DCarreira at edia.pt  Mon Jan 19 04:44:29 2009
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon Jan 19 05:04:24 2009
Subject: [gdal-dev] convert 2 shapefiles to a single GPX?
In-Reply-To: <200901172143.19682.even.rouault@mines-paris.org>
References: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE573D@beja012.edia.pt>
	<25bc040b0901141439p13a29a4cja03dc369fd7a49d5@mail.gmail.com>
	<A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE592D@beja012.edia.pt>
	<200901172143.19682.even.rouault@mines-paris.org>
Message-ID: <A8D08CD1C4D9AB4B8FBBE3B5D3B0092801E7AE5E10@beja012.edia.pt>

Now this I've got to try!

The VRT file idea is intriguing. I didn't know it had this much flexibility...

Thanks,
Duarte

-----Mensagem original-----
De: Even Rouault [mailto:even.rouault@mines-paris.org]
Enviada: s?bado, 17 de Janeiro de 2009 20:43
Para: gdal-dev@lists.osgeo.org
Cc: Duarte Carreira; Stefan Keller; Jean-Claude Repetto
Assunto: Re: [gdal-dev] convert 2 shapefiles to a single GPX?

Here's one solution :

1) create a directory, for example "merge_shp"
2) copy in merge_shp the shapefile that is going to be put in the waypoints
layer as "waypoints.shp" (rename the .dbf and .shx accordingly)
3) copy in merge_shp the shapefile that is going to be put in the tracks layer
as "tracks.shp" (rename the .dbf and .shx accordingly)
4) run "ogr2ogr -f GPX merged.gpx merge_shp waypoints tracks" (the order of
the layers is important)

A solution based on an OGR VRT file defining the two layers from the 2
shapefiles would also probably work.

Le Thursday 15 January 2009 12:03:27 Duarte Carreira, vous avez ?crit :
> Maybe the same approach can be used with 2 gpx files? That would be very
> good. I cannot merge 2 shapefiles with different geometry types. I could
> convert line shape>gpx1 and point shape->gpx2 and then merge
> gpx2+gpx2->gpx3...
>
>
> Thanks,
> Duarte
>
> De: Stefan Keller [mailto:sfkeller@gmail.com]
> Enviada: quarta-feira, 14 de Janeiro de 2009 22:40
> Para: Jean-Claude Repetto
> Cc: Duarte Carreira; gdal-dev@lists.osgeo.org
> Assunto: Re: [gdal-dev] convert 2 shapefiles to a single GPX?
>
>
> A merge of two shapefiles 'file1.shp' and 'file2.shp' into a new file
> 'file_merged.shp' is performed like this (See
> http://www.gdal.org/ogr/drv_shapefile.html):
>
> % ogr2ogr file_merged.shp file1.shp
> % ogr2ogr -update -append file_merged.shp file2.shp -nln file_merged
>
> Then convert to GPX:
> % ogr2ogr -f "GPX" out.gpx file_merged.shp
>
> Stefan
> http://geoconverter.hsr.ch<http://geoconverter.hsr.ch/>
> 2009/1/14 Jean-Claude Repetto <jrepetto@free.fr<mailto:jrepetto@free.fr>>
> Duarte Carreira a ?crit :
>
> Can OGR convert 2 shapefiles to a single GPX?
>
> The objective is to add tracks from a line shapefile and waypoints from a
> point shapefile...
>
> Hello,
>
> I don't know the answer to your question, but since GPX files are text
> files, it is very easy to merge two GPX files with a text editor.
>
> HTH !
> Jean-Claude
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From antonio.valentino at tiscali.it  Mon Jan 19 06:38:17 2009
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jan 19 06:39:33 2009
Subject: [gdal-dev] Phase image overlay
Message-ID: <20090119123817.02981266@valentinows>

Hi list,
I have two (8 bit) geo-tiff files containing the amplitude and phase of
a complex dataset.  Amplitude is grayscale and phase has a "jet"
color-table associated.

I would like to produce a single file with the phase transparently
overlayed on the magnitude.

Which is the best way to do it? 

Is it possible to do this using GDAL command line tools?


Thanks in advance.

-- 
Antonio Valentino
From henning.bredel at uni-muenster.de  Mon Jan 19 09:48:08 2009
From: henning.bredel at uni-muenster.de (Henning Bredel)
Date: Mon Jan 19 09:48:12 2009
Subject: [gdal-dev] Writing a Tiff
In-Reply-To: <49744E99.3050307@utas.edu.au>
References: <20090116153222.DB2F2E01632@lists.osgeo.org>
	<49744E99.3050307@utas.edu.au>
Message-ID: <1232376488.6370.42.camel@phoenix-work>

On Mon, 2009-01-19 at 20:57 +1100, Michael Sumner wrote:
> Hello,
> 

Hey Mike,

thanks for your exhaustive answere :-)

> Note this recent R-Sig-Geo post about the "in-development" nature of the 
> latest builds of rgdal - you need to let us know what versions you are 
> using. Also, view the definition of writeGDAL() to see how the lower 
> level functions are used.
> 
> https://stat.ethz.ch/pipermail/r-sig-geo/2009-January/004830.html
> 

I have read that message, but my version is not affected be the one
Roger refers to:

,----------------------------------
> library(rgdal)
Loading required package: sp
Geospatial Data Abstraction Library extensions to R successfully loaded
Loaded GDAL runtime: GDAL 1.5.2, released 2008/05/29
GDAL_DATA: /usr/local/lib/R/site-library/rgdal/gdal
Loaded PROJ.4 runtime: Rel. 4.6.0, 21 Dec 2007
PROJ_LIB: /usr/local/lib/R/site-library/rgdal/proj
> sessionInfo()
R version 2.7.1 (2008-06-23) 
i486-pc-linux-gnu 

locale:
LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;\
LC_COLLATE=en_US.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_US.UTF-8;\
LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;\
LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
base     

other attached packages:
[1] rgdal_0.5-33 sp_0.9-29   

loaded via a namespace (and not attached):
[1] grid_2.7.1      lattice_0.17-20
`----------------------------------

> BTW, you can simplify the writing of GTiffs with writeGDAL() -unless you 
> are intending to develop your function to write to the file in smaller 
> pieces. The code to do that can be as simple as this:


> library(rgdal)
> ## read in matrix to bm
> ## . . .
> ## generate X/Y coordinates - assuming your matrix is aligned as image() 
> expects (replace 0 and 1 as needed)
> xx <- seq(0, length = nrow(bm), by = 1)
> yy <- seq(0, length = ncol(bm), by = 1)
> ##
> writeGDAL(image2Grid(list(x = xx, y = yy, z = bm))
> 

That snipped brought my machine ?to its knees? .. but that is
a problem of R itself (actually, I'm currently exploring).

> 
> But, your R function works for me for the following simple test. As 
> Frank mentioned, it probably comes down to a version problem or a file 
> size limit (although that seems unlikely since your input matrix "bm" 
> must be completely loaded in memory).
> 
>  library(rgdal)
> #Loading required package: sp
> #Geospatial Data Abstraction Library extensions to R successfully loaded
> #Loaded GDAL runtime: GDAL 1.6.0, released 2008/12/04
> #Path to GDAL shared files: C:\inst\R\library/rgdal/gdal
> #Loaded PROJ.4 runtime: Rel. 4.6.1, 21 August 2008
> #Path to PROJ.4 shared files: C:\inst\R\library/rgdal/proj
> 
> data(volcano)  # matrix 87x61
> bm.writeTiff(volcano, "volc.tif")
> #         used (Mb) gc trigger (Mb) max used (Mb)
> #Ncells 305831  8.2     597831   16   407500 10.9
> #Vcells 149194  1.2     786432    6   467409  3.6
> tst <- readGDAL("volc.tif")
> 
> #volc.tif has GDAL driver ltalk X6
> #and has 87 rows and 61 columns
> 

My image got dimension 8950 9790    7, could that dimension
be the problem?

Regards

  Henning

-- 
 . . . no signature
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090119/3d08d8b7/attachment-0001.bin
From ludovic.mercier at gmail.com  Mon Jan 19 10:08:09 2009
From: ludovic.mercier at gmail.com (lidiriel)
Date: Mon Jan 19 10:08:12 2009
Subject: [gdal-dev] Re: improve PDS and Isis drivers
In-Reply-To: <OF26EF88B8.6F08A134-ON07257540.005C7CF8-07257540.00604ACE@usgs.gov>
References: <OF26EF88B8.6F08A134-ON07257540.005C7CF8-07257540.00604ACE@usgs.gov>
Message-ID: <c009ff6b-9b97-4144-b40e-ce9c17074094@f40g2000pri.googlegroups.com>

Thanks Trent for your reply.
I'm not sure to have completly understand your reponse (i don't speek
english fluently :( ).
But i have notice the interresting link http://www.orrery.us/node/44
for PDS Meta parser.
I think that i will kept to use gdal and if is necessary for my work i
will created several patch.
I work on a software that it must load PDS file (mainly Isis2 EDR with
separate binary data).
Now i will upload a new patch for get metadata : isis2dataset.patch2
three domains :  "LabelStandards", "FileCharacteristic",
"Identification"
and all other keyword are load in main domain : "".

regards

On 16 jan, 18:31, Trent M Hare <th...@usgs.gov> wrote:
> Lidiriel,
> ? ? ? ? All PDS, ISIS2, and ISIS3 drivers should support detached labels
> for the simple raw (or ISIS3 tiled) formats (now the PDS reader doesn't
> support detached JP2 images yet). ?There have been a few fixes in the last
> few months for these planetary readers so try to stick with 1.6.x.
>
> The minimal PDS driver was implemented because it was similar to ISIS2
> thus it is not very robust. The goal for all these drivers was to mainly
> capture the projection information for GIS/RS applications thus it is not
> meant for non-projected or raw PDS (EDR) images. There are MANY
> non-standard PDS images in the wild (e.g. missing projection parameters,
> incorrect offsets for X,Y corners, odd labels), so it can be very hard to
> generate a generic PDS reader which checks for all the known issues. One
> future goals I had was to utilize an existing PDS library to enhance the
> currently used very simple label parser that we wrote and Frank fixed up
> for us. There are a few good library examples discussed here:http://www.orrery.us/node/44. However, PDS3 has a short life span ahead
> of it. ?There are talks of a new PDS2010 standard to replace PDS3. This
> will probably be available in 2010 or 2011.
>
> Simple fixes for current PDS label that would be great for one, like
> yourself, or other to implement.
> 1.) PDS detached label that points to JP2 image. Currently the PDS reader
> only support raw images
> 2.) Band name propagation (or other metadata? that can be easily mapped
> into GDAL).
>
> But any changes or enhancements would be welcome. I really hope the PDS
> itself will get behind this driver and help to support its ongoing
> development. I think they (PDS at JPL) are using to create browse jpeg
> images for the new Mercury images. There are just not many good readers
> out there for PDS (Nasaview has it place but is not very useful). And
> really hope they will consider GDAL support for the new PDS2010 format -
> whatever that will be. Maybe they will even choose to be compatible to an
> existing format! I can only hope.
>
> Again, I never meant for this reader to support raw EDR images because
> those come in many different styles of compressions (e.g. MOC can have
> none, discrete cosine transform or ?Walsh-Hadamard transform compression).
> It is currently intended for only map-projected raw PDS3 images.
>
> Regards,
> Trent
>
> Frank Warmerdam <warmer...@pobox.com>
> Sent by: gdal-dev-boun...@lists.osgeo.org
> 01/14/2009 10:55 AM
>
> To
> lidiriel <ludovic.merc...@gmail.com>
> cc
> gdal-...@lists.osgeo.org
> Subject
> Re: [gdal-dev] improve PDS and Isis drivers
>
>
>
> lidiriel wrote:
> > hi,
>
> > I work with several pds files and i have many idea for improve
> > driver :
>
> > Add several domaine (for obtain a classification) with standard
> > Metadata like describe in "PDS standars reference" document (chapter5
> > v3.7) each domain can contains a minimum number of keys.
>
> > domaine name (dn): LABEL_STANDARDS
> > keys : PDS_VERSION_ID, DD_VERSION_ID, LABEL_REVISION_NOTE
>
> > dn : FILE_CHARACTERISTICS
> > keys: RECORD_TYPE, RECORD_BYTES, ...
>
> > dn : IDENTIFICATION_DATA_ELEMENTS
> > keys: DATA_SET_ID ...
>
> > implementation of reading a detached data in first time for ISIS2
> > driver :
> > ("filename", nnn) (chapter 5 page 13 of PDS specification v3.7)
> > Many of my data use this last notation and for using gdal i will must
> > implemented this in priority.
>
> Lidiriel,
>
> I am reasonably supportive of adding capture and exposure of metadata
> from PDS, ISIS2 and ISIS3 datasets in some appropriate fashion. I'd
> be open to appropriate patches though I'm not inclined to do much more
> directly as implementation than I have already done, unless my original
> client (USGS) demonstrated an interest.
>
> I believe we do have some support for detached datasets. ?Perhaps that
> is only in ISIS3? ?I would be happy to have detached support also added
> in ISIS2.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmer...@pobox.com
> light and sound - activate the windows |http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From antonio.valentino at tiscali.it  Mon Jan 19 10:22:39 2009
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jan 19 10:22:45 2009
Subject: [gdal-dev] Phase image overlay
In-Reply-To: <eb502d880901190707q6c5bae90m2732d22a64934854@mail.gmail.com>
References: <20090119123817.02981266@valentinows>
	<eb502d880901190707q6c5bae90m2732d22a64934854@mail.gmail.com>
Message-ID: <20090119162239.77b5a0a4@valentinows>

Il giorno Mon, 19 Jan 2009 20:37:17 +0530
"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ha scritto:

> Dear Antonio,
> 
> I too want to know how to add transparency to a band. Please let me
> know when you found a way. By the way, did you try adding an alpha
> value to the phase file using a GDAL virtual file.
> 
> Regards,

OK, I suppose I could edit the color-table of the phase dataset to set
an alpha value different from 255.

But I can't figure out how to "merge" (??) magnitude and phase datasets
together in a single output file (using command line GDAL tools).

Thanks

-- 
Antonio Valentino
From warmerdam at pobox.com  Mon Jan 19 10:31:24 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 19 10:31:45 2009
Subject: [gdal-dev] Update on OGR DXF Driver?
In-Reply-To: <c2935d6b0901182043x11733134y927d168a5f24b615@mail.gmail.com>
References: <c2935d6b0901182043x11733134y927d168a5f24b615@mail.gmail.com>
Message-ID: <49749CCC.7080103@pobox.com>

Shaun & Melissa Busler wrote:
> I was wondering if any progress has been made on the development of an
> OGR DXF Driver.  I saw some discussion in the archives back in 10/2008
> but have not seen any postings since.

Shaun,

This effort appears to be stalled currently (to the best of my knowledge).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 19 10:37:15 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 19 10:37:34 2009
Subject: [gdal-dev] OGR error
In-Reply-To: <OF0060BD60.B5CF5814-ON4A257543.000B00AB-4A257543.000B37B2@transport.qld.gov.au>
References: <OF0060BD60.B5CF5814-ON4A257543.000B00AB-4A257543.000B37B2@transport.qld.gov.au>
Message-ID: <49749E2B.9010508@pobox.com>

nicholas.g.lawrence@mainroads.qld.gov.au wrote:
> I have 60 GB free of hard disc space.
> 
> The shapefile I was creating was just over 2 GB when it crashed.
> The total size of the shapefiles I am trying to append is about
> 2.7 GB.

Nick,

Well, I believe the "2GB barrier" is the issue then.  Generally speaking
you should avoid trying to create .shp files larger than 2GB.  Shapefiles are
indexed with 32bit values which can at most address 4GB (well I suppose since
2byte word indexes are used - up to 8GB maximum), but many libraries -
including shapelib - use 32bit signed values for file offsets which cannot
address past 2GB.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Mon Jan 19 15:44:51 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon Jan 19 15:42:48 2009
Subject: [gdal-dev] BandWriteArray and FlushCache question
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6CD@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I recently upgraded to gdal 1.6.0 and found that one Python function
that used to work in 1.4.4 no longer works.
The purpose of function was to read in a band, perform matrix
manipulation (in this case, subtract a baseline) and resave.

The error that I am getting is that in the new dataset the last hundreds
of lines DN are written zero. If I take out the last line
"self.balanced_ds.FlushCache()" then the entire dataset is written as
zeros.  None of errors would happen in gdal 1.4.4.

Is there any changes in gdal 1.6.0 w.r.t. FlushCache() ?  What is the
right way to perform this?


thanks,
Shawn



===================================
RCS_PROC_STEP = 300

src_ds = gdal.Open(src_filename)
self.balanced_ds =
gdal.GetDriverByName("GTiff").CreateCopy(tmp_filename, src_ds, 0)
        
bandobj = self.balanced_ds.GetRasterBand(1)
xsize, ysize = self.balanced_ds.RasterXSize,self.balanced_ds.RasterYSize

output_datatype = gdalnumeric.GDALTypeCodeToNumericTypeCode(
bandobj.DataType )

nblocks = ysize / RCS_PROC_STEP + 1
nlines = RCS_PROC_STEP
        
for block in range( nblocks ):

    first_line = RCS_PROC_STEP*block 
    if block == nblocks - 1:
        nlines = ysize - first_line
           
    datablock = gdalnumeric.BandReadAsArray( bandobj, 0, first_line,
xsize, nlines )
    datablock = datablock - baseline
    gdalnumeric.BandWriteArray( bandobj,
datablock.astype(gdalnumeric.Int16), 0, first_line )

bandobj.FlushCache()
self.balanced_ds.FlushCache()

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090119/fd3e3718/attachment.html
From warmerdam at pobox.com  Mon Jan 19 16:02:53 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 19 16:03:15 2009
Subject: [gdal-dev] BandWriteArray and FlushCache question
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E6CD@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E6CD@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4974EA7D.2080505@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I recently upgraded to gdal 1.6.0 and found that one Python function 
> that used to work in 1.4.4 no longer works.
> 
> The purpose of function was to read in a band, perform matrix 
> manipulation (in this case, subtract a baseline) and resave.
> 
> The error that I am getting is that in the new dataset the last hundreds 
> of lines DN are written zero. If I take out the last line 
> ?self.balanced_ds.FlushCache()? then the entire dataset is written as 
> zeros.  None of errors would happen in gdal 1.4.4.
> 
> Is there any changes in gdal 1.6.0 w.r.t. FlushCache() ?  What is the 
> right way to perform this?
...
> for block in range( nblocks ):
> 
>     first_line = RCS_PROC_STEP*block
> 
>     if block == nblocks - 1:
> 
>         nlines = ysize - first_line
> 
>           
> 
>     datablock = gdalnumeric.BandReadAsArray( bandobj, 0, first_line, 
> xsize, nlines )
> 
>     datablock = datablock - baseline
> 
>     gdalnumeric.BandWriteArray( bandobj, 
> datablock.astype(gdalnumeric.Int16), 0, first_line )
> 
> bandobj.FlushCache()
> 
> self.balanced_ds.FlushCache()

Shawn,

I'm not sure of any reason the script shouldn't work properly.  But I
will note that aspects of the TIFF file are only written out when the
file is closed.  You may find it helpful to do "self.balanced_ds = None"
at the end so that python will release the dataset and it can be closed.

I'm not sure of what environment you are running your script in.  Normally
at script end this would happen anyways.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From a.neumann at carto.net  Mon Jan 19 16:05:17 2009
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jan 19 16:37:24 2009
Subject: [gdal-dev] Update on OGR DXF Driver?
In-Reply-To: <49749CCC.7080103@pobox.com>
References: <c2935d6b0901182043x11733134y927d168a5f24b615@mail.gmail.com>
	<49749CCC.7080103@pobox.com>
Message-ID: <4974EB0D.4030907@carto.net>

we have a meeting next week (January 28) and I will discuss the issue 
there again. I hope that we find someone who will finance it. After all, 
Franks offer seems to be affordable.

I will report back in a few days.

Andreas

Frank Warmerdam wrote:
> Shaun & Melissa Busler wrote:
>> I was wondering if any progress has been made on the development of an
>> OGR DXF Driver.  I saw some discussion in the archives back in 10/2008
>> but have not seen any postings since.
>
> Shaun,
>
> This effort appears to be stalled currently (to the best of my 
> knowledge).
>
> Best regards,


-- 
--
Andreas Neumann
B?schacherstrasse 6
CH-8624 Gr?t (Gossau ZH)
Switzerland
Phone: ++41-44-2736668
Email: a.neumann@carto.net

Web: http://www.carto.net/neumann/
SVG Examples: http://www.carto.net/papers/svg/samples/
SVG.Open: http://www.svgopen.org/

From Shawn.Gong at drdc-rddc.gc.ca  Mon Jan 19 16:44:33 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon Jan 19 16:42:28 2009
Subject: [gdal-dev] BandWriteArray and FlushCache question
In-Reply-To: <4974EA7D.2080505@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E6CD@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4974EA7D.2080505@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6CE@ottawaex02.Ottawa.drdc-rddc.gc.ca>

thanks Frank.

adding "self.balanced_ds = None" seems to do the trick.


Shawn



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, January 19, 2009 4:03 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] BandWriteArray and FlushCache question

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I recently upgraded to gdal 1.6.0 and found that one Python function 
> that used to work in 1.4.4 no longer works.
> 
> The purpose of function was to read in a band, perform matrix 
> manipulation (in this case, subtract a baseline) and resave.
> 
> The error that I am getting is that in the new dataset the last
hundreds 
> of lines DN are written zero. If I take out the last line 
> "self.balanced_ds.FlushCache()" then the entire dataset is written as 
> zeros.  None of errors would happen in gdal 1.4.4.
> 
> Is there any changes in gdal 1.6.0 w.r.t. FlushCache() ?  What is the 
> right way to perform this?
...
> for block in range( nblocks ):
> 
>     first_line = RCS_PROC_STEP*block
> 
>     if block == nblocks - 1:
> 
>         nlines = ysize - first_line
> 
>           
> 
>     datablock = gdalnumeric.BandReadAsArray( bandobj, 0, first_line, 
> xsize, nlines )
> 
>     datablock = datablock - baseline
> 
>     gdalnumeric.BandWriteArray( bandobj, 
> datablock.astype(gdalnumeric.Int16), 0, first_line )
> 
> bandobj.FlushCache()
> 
> self.balanced_ds.FlushCache()

Shawn,

I'm not sure of any reason the script shouldn't work properly.  But I
will note that aspects of the TIFF file are only written out when the
file is closed.  You may find it helpful to do "self.balanced_ds = None"
at the end so that python will release the dataset and it can be closed.

I'm not sure of what environment you are running your script in.
Normally
at script end this would happen anyways.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From pramsey at cleverelephant.ca  Mon Jan 19 18:07:19 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Jan 19 18:07:23 2009
Subject: [gdal-dev] 2009 Code Sprint Agenda
Message-ID: <30fe546d0901191507x593fb836j73e47478bbcf5c15@mail.gmail.com>

I've started with some higher level ideas for an agenda. Individual
teams might want to start breaking out their plans into work-by-day as
we get closer.

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009_Agenda

P.

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009
From rb at gras.ku.dk  Tue Jan 20 04:55:06 2009
From: rb at gras.ku.dk (=?UTF-8?Q?rasmus_borgstr=C3=B8m?=)
Date: Tue Jan 20 04:55:07 2009
Subject: [Gdal-dev] Gdalinfo to textfile
Message-ID: <1232445306429-2185759.post@n2.nabble.com>


Hi All

Maybe a simple question:
I would like to export the information from GDALINFO to a textfile, is that
possible within the FWTools Shell?

regards
Rasmus
-- 
View this message in context: http://n2.nabble.com/Gdalinfo-to-textfile-tp2185759p2185759.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From rb at gras.ku.dk  Tue Jan 20 05:05:54 2009
From: rb at gras.ku.dk (=?UTF-8?Q?rasmus_borgstr=C3=B8m?=)
Date: Tue Jan 20 05:05:56 2009
Subject: [Gdal-dev] Clip raster by percentage?
In-Reply-To: <null>
References: <null> <47DFC98C.2040207@pobox.com> <null>
Message-ID: <1232445954559-2185782.post@n2.nabble.com>


Hi P?l

Im very interested to know if you succeded with the mentioned method and
with the creation of a python script.

regards
Rasmus Borgstr?m

Hi!

Thanks for helping! I will use the method you described them. Maybe I'll try
to  make a small python script that calculates the values for each raster
and runs the command in batch.

Regards,
P?l Kristensen


paalkr wrote:
> 
> Hi!
> 
> Thanks for helping! I will use the method you described them. Maybe I'll
> try to  make a small python script that calculates the values for each
> raster and runs the command in batch.
> 
> Regards,
> P?l Kristensen
> 
> 
> Frank Warmerdam-2 wrote:
>> 
>> P?l Kristensen wrote:
>>> Hi!
>>> 
>>> I it possible to clip a GeoTiff by a given percentage from each side (ie
>>> 5%
>>> from top, 2% from bottom, and so on) with GDAL, and if so, how is it
>>> done?
>> 
>> P?l,
>> 
>> This is not directly provided for - no.   You would basically need to
>> figure
>> out what pixel-line window it amounts to and use that with gdal_translate
>> and
>> the -srcwin switch.
>> 
>> For example for a 1000x1000 image you might use:
>> 
>>    gdal_translate -srcwin 50 50 930 930 in.tif out.tif
>> 
>> would be 5% off the top and left, and 2% off the right and bottom.
>> 
>> Best regards,
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo,
>> http://osgeo.org
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> 

-- 
View this message in context: http://n2.nabble.com/Clip-raster-by-percentage--tp2033850p2185782.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Sjur.A.Kolberg at sintef.no  Tue Jan 20 05:10:51 2009
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Tue Jan 20 05:10:55 2009
Subject: [Gdal-dev] Gdalinfo to textfile
In-Reply-To: <1232445306429-2185759.post@n2.nabble.com>
References: <1232445306429-2185759.post@n2.nabble.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE06E6110950@SINTEFEXMBX01.sintef.no>


Hei Rasmus, 

This is simple: 

>gdalinfo datasetfile.grb > textfile.txt

Sjur  :-)


> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of rasmus 
> borgstr?m
> Sent: 20 januar 2009 10:55
> To: gdal-dev@lists.osgeo.org
> Subject: [Gdal-dev] Gdalinfo to textfile
> 
> 
> Hi All
> 
> Maybe a simple question:
> I would like to export the information from GDALINFO to a 
> textfile, is that possible within the FWTools Shell?
> 
> regards
> Rasmus
> --
> View this message in context: 
> http://n2.nabble.com/Gdalinfo-to-textfile-tp2185759p2185759.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From mdsumner at utas.edu.au  Tue Jan 20 06:46:49 2009
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue Jan 20 06:47:03 2009
Subject: [gdal-dev] Writing a Tiff from R (was Writing a Tiff)
In-Reply-To: <1232376488.6370.42.camel@phoenix-work>
References: <20090116153222.DB2F2E01632@lists.osgeo.org>	
	<49744E99.3050307@utas.edu.au>
	<1232376488.6370.42.camel@phoenix-work>
Message-ID: <4975B9A9.5070001@utas.edu.au>

Hi,

This should work better. I'm not greatly familiar with the lower-level R 
functions for GDAL, but the following should be closer to what you wanted.

This assumes that "bm" is defined in the top level workspace, and the 
function can access it via R's scoping rules. You could use a similar 
approach to read the source in small pieces as well if need be. Please 
consult the rgdal documentation. I believe further discussion belongs on 
R-Sig-Geo as your problem likely has nothing to do with GDAL.

You may need to work with a column-wise version of indexing from your 
source matrix, depending on whether "bm" is aligned according to the 
image() conventions.

Cheers, Mike.

library(rgdal)
data(volcano)
bm <- volcano

##bm <- matrix(rnorm(1e6), nrow = 1000)  ## larger example

bm.writeTiff <- function(filename) {
       
        ## search for "bm" matrix in workspace (simplistic way to avoid 
copying)
        if (!(exists("bm") | is.matrix(bm)) ) stop("bm matrix not found ")
       
        # GTiff driver
        driver <- new('GDALDriver', 'GTiff')
       
       
        tds <- new("GDALTransientDataset",driver,nrow(bm),ncol(bm), 
type="Int32")

        for (row in 1:nrow(bm)) {
            ## note that leaving one index empty equates to specifying 
"all indices"
                putRasterData(tds, bm[row, ], offset= c(row - 1, 0)) ## 
R is 1-based, GDAL rows are 0-based
        }
       
        saveDataset(tds,filename)
       
        GDAL.close(tds)
}

bm.writeTiff("test.tif")


Henning Bredel wrote:
> On Mon, 2009-01-19 at 20:57 +1100, Michael Sumner wrote:
>   
>> Hello,
>>
>>     
>
> Hey Mike,
>
> thanks for your exhaustive answere :-)
>
>   
>> Note this recent R-Sig-Geo post about the "in-development" nature of the 
>> latest builds of rgdal - you need to let us know what versions you are 
>> using. Also, view the definition of writeGDAL() to see how the lower 
>> level functions are used.
>>
>> https://stat.ethz.ch/pipermail/r-sig-geo/2009-January/004830.html
>>
>>     
>
> I have read that message, but my version is not affected be the one
> Roger refers to:
>
> ,----------------------------------
>   
>> library(rgdal)
>>     
> Loading required package: sp
> Geospatial Data Abstraction Library extensions to R successfully loaded
> Loaded GDAL runtime: GDAL 1.5.2, released 2008/05/29
> GDAL_DATA: /usr/local/lib/R/site-library/rgdal/gdal
> Loaded PROJ.4 runtime: Rel. 4.6.0, 21 Dec 2007
> PROJ_LIB: /usr/local/lib/R/site-library/rgdal/proj
>   
>> sessionInfo()
>>     
> R version 2.7.1 (2008-06-23) 
> i486-pc-linux-gnu 
>
> locale:
> LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;\
> LC_COLLATE=en_US.UTF-8;LC_MONETARY=C;LC_MESSAGES=en_US.UTF-8;\
> LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;\
> LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods
> base     
>
> other attached packages:
> [1] rgdal_0.5-33 sp_0.9-29   
>
> loaded via a namespace (and not attached):
> [1] grid_2.7.1      lattice_0.17-20
> `----------------------------------
>
>   
>> BTW, you can simplify the writing of GTiffs with writeGDAL() -unless you 
>> are intending to develop your function to write to the file in smaller 
>> pieces. The code to do that can be as simple as this:
>>     
>
>
>   
>> library(rgdal)
>> ## read in matrix to bm
>> ## . . .
>> ## generate X/Y coordinates - assuming your matrix is aligned as image() 
>> expects (replace 0 and 1 as needed)
>> xx <- seq(0, length = nrow(bm), by = 1)
>> yy <- seq(0, length = ncol(bm), by = 1)
>> ##
>> writeGDAL(image2Grid(list(x = xx, y = yy, z = bm))
>>
>>     
>
> That snipped brought my machine ?to its knees? .. but that is
> a problem of R itself (actually, I'm currently exploring).
>
>   
>> But, your R function works for me for the following simple test. As 
>> Frank mentioned, it probably comes down to a version problem or a file 
>> size limit (although that seems unlikely since your input matrix "bm" 
>> must be completely loaded in memory).
>>
>>  library(rgdal)
>> #Loading required package: sp
>> #Geospatial Data Abstraction Library extensions to R successfully loaded
>> #Loaded GDAL runtime: GDAL 1.6.0, released 2008/12/04
>> #Path to GDAL shared files: C:\inst\R\library/rgdal/gdal
>> #Loaded PROJ.4 runtime: Rel. 4.6.1, 21 August 2008
>> #Path to PROJ.4 shared files: C:\inst\R\library/rgdal/proj
>>
>> data(volcano)  # matrix 87x61
>> bm.writeTiff(volcano, "volc.tif")
>> #         used (Mb) gc trigger (Mb) max used (Mb)
>> #Ncells 305831  8.2     597831   16   407500 10.9
>> #Vcells 149194  1.2     786432    6   467409  3.6
>> tst <- readGDAL("volc.tif")
>>
>> #volc.tif has GDAL driver ltalk X6
>> #and has 87 rows and 61 columns
>>
>>     
>
> My image got dimension 8950 9790    7, could that dimension
> be the problem?
>
> Regards
>
>   Henning
>
>   

From otto.dassau at gmx.de  Tue Jan 20 10:55:29 2009
From: otto.dassau at gmx.de (Otto Dassau)
Date: Tue Jan 20 10:59:22 2009
Subject: [gdal-dev] gdal 1.6 build on redhat Linux,	missing gdal.py
	_gdalmodule.so
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E66D@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E66B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<6e41d95b0812190008i2a3850edy1bc195e2b85dd681@mail.gmail.com>
	<DF1471B5C308B346BF5A2AEA00C5615E26E66D@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <20090120165529.3d8b68d5@nature>

On Fri, 19 Dec 2008 09:29:42 -0500
"Gong, Shawn (Contractor)" <Shawn.Gong@drdc-rddc.gc.ca> wrote:

> Thanks Klokan,
> 
> I added --with-python 
> 	  ./configure --prefix=/home/sgong/dev181/dist --with-png=internal
--with-libtiff=internal --with-gif=internal --with-geotiff=internal
--with-libz=/home/sgong/dev181/dist --with-jpeg=/home/sgong/dev181/dist
--with-hdf4=/home/sgong/dev181/dist --with-hdf5=/home/sgong/dev181/dist
--without-ogdi --without-jasper --without-ecw --without-curl --without-expat
--without-dwgdirect --without-mrsid --without-jp2mrsid --without-mysql
--without-odbc --without-grib --without-pg --with-python 
> 
> And got error:  /bin/sh: -d: invalid option
> 	libtool: compile:  gcc -fno-strict-aliasing -DNDEBUG -g -O3 -Wall
-Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/
-I/home/sgong/dev181/dist/include/python2.5
-I/home/sgong/dev181/dist/lib/python2.5/site-packages/numpy/core/include
-I/home/sgong/dev181/gdal-1.6.0/include -c extensions/gdal_wrap.cpp  -fPIC -DPIC
-o build/temp.linux-i686-2.5/extensions/.libs/gdal_wrap.o
> 	extensions/gdal_wrap.cpp: In function `PyObject*
> 	   _wrap_RegenerateOverviews(PyObject*, PyObject*, PyObject*)':
> 	extensions/gdal_wrap.cpp:13663: warning: unused variable `int v'
> 	extensions/gdal_wrap.cpp:13606: warning: `int arg2' might be used
uninitialized
> 	   in this function
> 	libtool: compile:  gcc -fno-strict-aliasing -DNDEBUG -g -O3 -Wall
-Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/
-I/home/sgong/dev181/dist/include/python2.5
-I/home/sgong/dev181/dist/lib/python2.5/site-packages/numpy/core/include
-I/home/sgong/dev181/gdal-1.6.0/include -c extensions/gdal_wrap.cpp -o
build/temp.linux-i686-2.5/extensions/gdal_wrap.o >/dev/null 2>&1/bin/sh -pthread
-shared build/temp.linux-i686-2.5/extensions/gdal_wrap.o -L../../.libs -L../../
-L/home/sgong/dev181/gdal-1.6.0/lib -lgdal -o
build/lib.linux-i686-2.5/osgeo/_gdal.so
> 	/bin/sh: -d: invalid option
> 	error: command '/bin/sh' failed with exit status 1
> 	make[2]: *** [build] Error 1
> 	make[2]: Leaving directory `/home/sgong/dev181/gdal-1.6.0/swig/python'
> 	make[1]: *** [build] Error 2
> 	make[1]: Leaving directory `/home/sgong/dev181/gdal-1.6.0/swig'
> 	make: *** [swig-modules] Error 2
> 
> 
> Would someone help? Thanks, 

Maybe still useful. I just compiled gdal 1.6.0 on debian etch and had the same
problem. I had to update swig from 1.3.29 to 1.3.36 to make GDAL compile and
read somewhere else that at least swig >= 1.3.31 is needed.

regards,
 Otto








From cpadwick at digitalglobe.com  Tue Jan 20 10:59:30 2009
From: cpadwick at digitalglobe.com (Chris Padwick)
Date: Tue Jan 20 11:22:30 2009
Subject: [gdal-dev] aux.xml files
Message-ID: <61695F5D53E0A74AA5A70E93BC9C256A05288DFD@COMAIL01.digitalglobe.com>

Howdy,

 

I'm using gdal 1.5.2.  Every time I call GDALRasterBand::GetHistogram()
gdal generates a file with the same name as the image and the extension
.aux.xml.  This file appears to contain a band by band image histogram
along with some other information.  On subsequent calls, using the same
image, gdal appears to be finding the .aux.xml file and reading the
stats from the file rather than computing them from scratch.

 

I understand the rationale for the behavior but it is causing problems
for me.  How can I disable creation of these files, and/or force
computation of the stats from scratch every time?

 

Thanks!

 

Chris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090120/cf282088/attachment.html
From warmerdam at pobox.com  Tue Jan 20 11:28:30 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 20 11:28:56 2009
Subject: [gdal-dev] aux.xml files
In-Reply-To: <61695F5D53E0A74AA5A70E93BC9C256A05288DFD@COMAIL01.digitalglobe.com>
References: <61695F5D53E0A74AA5A70E93BC9C256A05288DFD@COMAIL01.digitalglobe.com>
Message-ID: <4975FBAE.2090105@pobox.com>

Chris Padwick wrote:
> Howdy,
> 
>  
> 
> I?m using gdal 1.5.2.  Every time I call GDALRasterBand::GetHistogram() 
> gdal generates a file with the same name as the image and the extension 
> .aux.xml.  This file appears to contain a band by band image histogram 
> along with some other information.  On subsequent calls, using the same 
> image, gdal appears to be finding the .aux.xml file and reading the 
> stats from the file rather than computing them from scratch.
> 
> I understand the rationale for the behavior but it is causing problems 
> for me.  How can I disable creation of these files, and/or force 
> computation of the stats from scratch every time?

Chris,

You can disable creation of .aux.xml files entirely by setting the
GDAL_PAM_ENABLED configuration variable to the value NO.  The most
common way to do this is in the environment.

eg.

set GDAL_PAM_ENABLED=NO

(on windows)

There are Compute function variants for getting band statistics, and
min/max but I can't seem to find one for histograms.  There ought to
be one.  If you file a ticket, I can add one in trunk if that is helpful.

Of course, you can just write your own histogram computation code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From russell at flora.ca  Tue Jan 20 11:49:58 2009
From: russell at flora.ca (Russell McOrmond)
Date: Tue Jan 20 11:52:44 2009
Subject: [gdal-dev] gdal / ESRI SDE / mapserver
Message-ID: <alpine.LFD.2.00.0901201124440.17422@calcutta.flora.ca>


   As many of you likely already know (and I just found out), there are 
incompatabilities between ESRI's libsde and the zlib library that many 
tools we use need.   I can stop the various core dumps by compiling and 
making available the same version of zlib that is inside libsde (which for 
ArcSDE 9.2sp5 is zlib 1.1.3).

Notes about the bug here: 
http://forums.esri.com/Thread.asp?c=2&f=1718&t=212867


   Gdal has an internal version of zlib, used when the otherwise provided 
zlib doesn't have all the functionality needed.  The current configure 
script includes the include path provided by ./configure command line 
parameters before this local zlib directory.  This means the wrong zlib.h 
gets include and the compile complains on the missing function 
inflateCopy().

   Is it possible for this order to be patched up, or a ./configure line 
parameter created?  What I am doing currently is renaming the zconf.h and 
zlib.h out of the way for the build of gdal, renaming back after.

   I am wondering.  Given gdal includes this functionality, I'm wondering 
if it is possible to export this functionality.  Mapserver needs these 
functions, and could also be configured to use the gdal version rather 
than the one provided by zlib.  This might avoid the compatability 
problems with libsde and zlib -- at least for mapserver and other tools 
which are built upon gdal.

Thank you.

-- 
  Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
  Please help us tell the Canadian Parliament to protect our property
  rights as owners of Information Technology. Sign the petition!
  http://digital-copyright.ca/petition/ict/     http://KillBillC61.ca

  "The government, lobbied by legacy copyright holders and hardware
   manufacturers, can pry control over my camcorder, computer,
   home theatre, or portable media player from my cold dead hands!"
From hobu.inc at gmail.com  Tue Jan 20 13:18:16 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jan 20 13:18:21 2009
Subject: [gdal-dev] gdal / ESRI SDE / mapserver
In-Reply-To: <alpine.LFD.2.00.0901201124440.17422@calcutta.flora.ca>
References: <alpine.LFD.2.00.0901201124440.17422@calcutta.flora.ca>
Message-ID: <A452A3CB-EF89-44DD-8FDE-37E9CAD6A66C@gmail.com>


On Jan 20, 2009, at 10:49 AM, Russell McOrmond wrote:

>
>  As many of you likely already know (and I just found out), there  
> are incompatabilities between ESRI's libsde and the zlib library  
> that many tools we use need.   I can stop the various core dumps by  
> compiling and making available the same version of zlib that is  
> inside libsde (which for ArcSDE 9.2sp5 is zlib 1.1.3).
>
> Notes about the bug here: http://forums.esri.com/Thread.asp?c=2&f=1718&t=212867
>
>
>  Gdal has an internal version of zlib, used when the otherwise  
> provided zlib doesn't have all the functionality needed.  The  
> current configure script includes the include path provided by ./ 
> configure command line parameters before this local zlib directory.   
> This means the wrong zlib.h gets include and the compile complains  
> on the missing function inflateCopy().
>
>  Is it possible for this order to be patched up, or a ./configure  
> line parameter created?  What I am doing currently is renaming the  
> zconf.h and zlib.h out of the way for the build of gdal, renaming  
> back after.
>
>  I am wondering.  Given gdal includes this functionality, I'm  
> wondering if it is possible to export this functionality.  Mapserver  
> needs these functions, and could also be configured to use the gdal  
> version rather than the one provided by zlib.  This might avoid the  
> compatability problems with libsde and zlib -- at least for  
> mapserver and other tools which are built upon gdal.


Russell,

The situation totally sucks and I'm glad that you've been so  
persistent in pushing things through to make it work for you.  When I  
was encountering the problems as I was developing the SDE raster  
driver, my client mainly needed windows where this wasn't a problem.   
I only ran into stuff when testing on my own, and I only went as far  
to hack the makefiles and complain on my weblog and on that ESRI thread.

I think the way forward is if you could document this misery on the  
wiki http://trac.osgeo.org/gdal It's a hard sell for us to complicate  
our already messy configure logic to work around their bug that they  
stubbornly won't fix.  In the end, spending a day or so getting the  
configure logic to work correctly isn't going to be worth it  
considering the few users who need this functionality, and it can be  
obtained with some minor surgery and simple instructions (figuring out  
what parts to cut without killing the patient is the work you did :).   
Especially if the fix is "soon", we'll have to complicate the logic  
even more afterward to deal with versions of this and that.

Please make an ArcSDE wiki page off of http://trac.osgeo.org/gdal/wiki/BuildHints 
  and document the issues and how you resolved them as best you can  
with pertinent version information.  I think that will be the most  
fruitful way forward.

Howard
From russell at flora.ca  Tue Jan 20 14:21:02 2009
From: russell at flora.ca (Russell McOrmond)
Date: Tue Jan 20 14:21:03 2009
Subject: [gdal-dev] gdal / ESRI SDE / mapserver
In-Reply-To: <A452A3CB-EF89-44DD-8FDE-37E9CAD6A66C@gmail.com>
References: <alpine.LFD.2.00.0901201124440.17422@calcutta.flora.ca>
	<A452A3CB-EF89-44DD-8FDE-37E9CAD6A66C@gmail.com>
Message-ID: <alpine.LFD.2.00.0901201411520.17422@calcutta.flora.ca>


On Tue, 20 Jan 2009, Howard Butler wrote:

> I think the way forward is if you could document this misery on the wiki 
> http://trac.osgeo.org/gdal It's a hard sell for us to complicate our already 
> messy configure logic to work around their bug that they stubbornly won't 
> fix.

  It looks like someone (possibly you) already has part of the fix there, 
which is changing the order of the linking.

   The most recent issue is similar as it relates to the order of the 
include path.  I suspect it wouldn't harm anyone to have the internal gdal 
.h files included before any third party includes. That way the logic that 
switches to the internal zlib will always work, regardless of any other 
zlib related .h files which may be installed in other include directories.

   My guess is the current include path order will cause other people 
problems who have multiple versions of zlib .h files, even those who 
aren't dealing with the libsde bug.

   I will take your advise and add some documentation.  In my case this is 
all stuff my customer wants to work, but that they may not want me 
spending their time to document it for others.  Will verify, but will be 
willing to document off-hours otherwise.


   I'm told I should have the 9.3 SDE SDK soon, so will be able to report 
on that.

-- 
  Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
  Please help us tell the Canadian Parliament to protect our property
  rights as owners of Information Technology. Sign the petition!
  http://digital-copyright.ca/petition/ict/     http://KillBillC61.ca

  "The government, lobbied by legacy copyright holders and hardware
   manufacturers, can pry control over my camcorder, computer,
   home theatre, or portable media player from my cold dead hands!"
From Chris.Barker at noaa.gov  Tue Jan 20 15:04:55 2009
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 20 15:04:57 2009
Subject: [gdal-dev] How to use TransformPoints in python?
In-Reply-To: <4970C9F0.8080605@sfos.uaf.edu>
References: <1979C52B2C1C234183439454C1599C7D65FA97@massenet.hitt.home>
	<4970C9F0.8080605@sfos.uaf.edu>
Message-ID: <49762E67.4050205@noaa.gov>

This doesn't address the issue, but:

>>     x = numpy.array( [p[0] for p in polygon] )
>>     y = numpy.array( [p[1] for p in polygon] )
>>     z = numpy.array( [p[2] for p in polygon] )

these list comprehensions are unnecessary -- numpy understands nested lists:

poly_array = numpy.array(polygon)

x = poly_array[:,0]
y = poly_array[:,1]
z = poly_array[:,2]

It would be nice if the gdal bindings understood NX3 numpy arrays 
directly. If the C code can accept a C NX3 *double, then the numpy.i 
swig interface files that come with numpy would make it easy to do. Some 
day!

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ortelius at gmail.com  Tue Jan 20 16:52:26 2009
From: ortelius at gmail.com (Jeffrey Johnson)
Date: Tue Jan 20 16:52:30 2009
Subject: [gdal-dev] Problems using JP2KAK library with Python Bindings
Message-ID: <e01a5a00901201352p3413d482v1d616984eabca1d4@mail.gmail.com>

Hi All,

I am attempting to read JPEG 2000 compressed data inside NITF files
using the python bindings.

My test python script is as follows

import os
os.environ['CPL_DEBUG'] = r'on'
os.environ['GDAL_DRIVER_PATH'] = r'c:\gdal\bin\gdalplugins'
print os.environ['GDAL_DRIVER_PATH']
from osgeo import gdal
gdal.AllRegister()
gdal.Open(r'c:\wis_images\005740758010_08\005740758010_08_P001_PAN\08SEP18064000-P1BS-005740758010_08_P001.NTF')


And the output is as follows.

c:\>python test.py
c:\gdal\bin\gdalplugins
GDAL: Auto register c:\gdal\bin\gdalplugins\gdal_JP2KAK.dll using
GDALRegister_JP2KAK.
GDAL: Auto register c:\gdal\bin\gdalplugins\gdal_JP2KAK.dll using
GDALRegister_JP2KAK.
ERROR 4: `J2K_SUBFILE:3884,478667830,c:\wis_images\005740758010_08\005740758010_08_P001_PAN\08SEP18064000-P1BS-005740758010_08_P001.NTF'
does not exist in the file system,
and is not recognised as a supported dataset name.

ERROR 1: Unable to open JPEG2000 image within NITF file.
Is the JP2KAK driver available?

It appears as if the dll is being loaded properly, but I still receive
this error. I have tried setting the environment variables like this
in the script, as well as with a normal set command on the command
like, and also with windows GUI tools. Anything I am doing wrong?

FWIW, I have no problem reading this same image with something like
gdal_translate.

Thanks,

Jeff
From paul.malm at saabgroup.com  Wed Jan 21 02:51:28 2009
From: paul.malm at saabgroup.com (Malm Paul)
Date: Wed Jan 21 03:03:27 2009
Subject: [gdal-dev] VPF parsing
In-Reply-To: <19321160.post@talk.nabble.com>
References: <19321160.post@talk.nabble.com>
Message-ID: <9CE1BBC0D3132A43A391263616F51E7D5F3F0D2F22@corpappl079.corp.saab.se>

 
Hi list,
Is it possible to convert all "layers" in a VPF database to shapefiles without knowing about the layers included, in Windows with ogr2ogr?
From jukka.rahkonen at mmmtike.fi  Wed Jan 21 03:59:51 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Jan 21 04:00:06 2009
Subject: [gdal-dev] JP2ECW driver fails with lossless JPEG2000 images
Message-ID: <loom.20090121T084236-859@post.gmane.org>

Hi,

I have been suspecting that JP2ECW driver does not handle lossless jpeg2000
images correctly and now I am pretty sure that it is true at least with images
compressed with Kakadu.

I made a test by using FWTools 2.2.8 on Windows. I took a 100x100 pixel sized
test image in tif format and compressed in with Kakaku tool 'kdu_compress'

Command:
kdu_compress -i JP2ECW_test_original.tif -o kakadu.jp2 Creversible=yes

Then I decompressed the image with kdu_expand
Command:
kdu_expand -i kakadu.jp2 -o kakadu.tif

Then I converted kakadu.jp2 to tif with gdal_translate that has JP2ECW driver as
default JPEG2000 driver.
Command:
gdal_translate -of gtiff kakadu.jp2 ecw.tif

Tiff image translated with kdu_expand is identical with the original but the one
translated with gdal_translate for sure is not.

I would say that right now nobody should use JP2ECW driver for handling lossless
JPEG2000 images.

From tschilling at omw-gmbh.de  Wed Jan 21 08:23:08 2009
From: tschilling at omw-gmbh.de (TSchilling OMW)
Date: Wed Jan 21 08:25:52 2009
Subject: [gdal-dev] Save/Update ENVI files
Message-ID: <3BC135E2F75746DDB3853A384D78608A@omw>

Hello,


Iam new to GDAL and Iam writing actually a test application to get familiar
with this library. In general Iam using GDAL only for reading and writing
ENVI files.

Iam reading ENVI files via:
Dataset ds = Gdal.Open(EnviPath, Access.GA_Update);

My question is now: How to write back (update) the changes I made
in the dataset into the ENVI (and .hdr) file ?

Thanks in advance
Torsten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090121/ff9483fd/attachment.html
From gregcoats at mac.com  Wed Jan 21 10:05:27 2009
From: gregcoats at mac.com (Greg Coats)
Date: Wed Jan 21 10:05:30 2009
Subject: [gdal-dev] JP2ECW driver fails with lossless JPEG2000 images
In-Reply-To: <loom.20090121T084236-859@post.gmane.org>
References: <loom.20090121T084236-859@post.gmane.org>
Message-ID: <E2C88829-D4BE-484E-B735-E8C0DCFB87B2@mac.com>

geojasper includes a utility that conveniently compares a GeoTif  
image to a GeoJp2 image.  Greg Coats

$ geoimgcmp
Image Comparison Utility (Version 1.900.1).
usage:
geoimgcmp -f reference_image_file -F other_image_file [-m metric]
The metric argument may assume one of the following values:
     psnr .... peak signal to noise ratio
     mse ..... mean squared error
     rmse .... root mean squared error
     pae ..... peak absolute error
     mae ..... mean absolute error
     equal ... equality (boolean)
$ geoimgcmp -f 18stj940125.tif -F 18stj940125_kdu_reversible.jp2 -m rmse
geojasper info: GeoTiff found, size: 471
geojasper info: TIFF file decoded!
geojasper info: GeoJp2 info found...
0.000000
0.000000
0.000000
$ geoimgcmp -f 18stj940125.tif -F  
18stj940125_kdu_irreversible10to1.jp2 -m rmse
geojasper info: GeoTiff found, size: 471
geojasper info: TIFF file decoded!
geojasper info: GeoJp2 info found...
3.706568
3.730488
4.409576


On Jan 21, 2009, at 3:59 AM, Jukka Rahkonen wrote:
> Hi,
>
> I have been suspecting that JP2ECW driver does not handle lossless  
> jpeg2000
> images correctly and now I am pretty sure that it is true at least  
> with images
> compressed with Kakadu.
>
> I made a test by using FWTools 2.2.8 on Windows. I took a 100x100  
> pixel sized
> test image in tif format and compressed in with Kakaku tool  
> 'kdu_compress'
>
> Command:
> kdu_compress -i JP2ECW_test_original.tif -o kakadu.jp2 Creversible=yes
>
> Then I decompressed the image with kdu_expand
> Command:
> kdu_expand -i kakadu.jp2 -o kakadu.tif
>
> Then I converted kakadu.jp2 to tif with gdal_translate that has  
> JP2ECW driver as
> default JPEG2000 driver.
> Command:
> gdal_translate -of gtiff kakadu.jp2 ecw.tif
>
> Tiff image translated with kdu_expand is identical with the  
> original but the one
> translated with gdal_translate for sure is not.
>
> I would say that right now nobody should use JP2ECW driver for  
> handling lossless
> JPEG2000 images.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090121/54798570/attachment-0001.html
From warmerdam at pobox.com  Wed Jan 21 10:44:37 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 21 10:44:54 2009
Subject: [gdal-dev] Save/Update ENVI files
In-Reply-To: <3BC135E2F75746DDB3853A384D78608A@omw>
References: <3BC135E2F75746DDB3853A384D78608A@omw>
Message-ID: <497742E5.4050308@pobox.com>

TSchilling OMW wrote:
> Hello,
> 
> 
> Iam new to GDAL and Iam writing actually a test application to get familiar
> with this library. In general Iam using GDAL only for reading and 
> writing ENVI files.
> 
> Iam reading ENVI files via:
> Dataset ds = Gdal.Open(EnviPath, Access.GA_Update);
> 
> My question is now: How to write back (update) the changes I made
> in the dataset into the ENVI (and .hdr) file ?

Torsten,

It is helpful to indicate your language of implementation if it is not
the default (C/C++).  I am guessing the above is c#, is that right?

Generally speaking you just need to release the dataset handle to close
it, and flush out any changes.   I would guess you can release the dataset
in C# by assigning null to the dataset.

eg.
   ds = null;

I would note that the ENVI format only supports in place update of the
image data.  Attempts to change the header using things like
SetGeoTransform(), and SetProjection() will not have any effect.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexandre.gacon+gdal at gmail.com  Wed Jan 21 10:47:14 2009
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Wed Jan 21 10:47:16 2009
Subject: [gdal-dev] OGR : problem with the OGDI driver
Message-ID: <45f3b7570901210747y1f219c2dl6029b88656831878@mail.gmail.com>

Hi,

We are trying to build OGR with the OGDI driver enabled, on Windows with
Visual Studio 2005.

We have modified the nmake.opt file to enable the OGDI driver (precising the
OGDI directory where to find the headers and the libraries) and the
compilation works fine (the install and dev-install steps work fine too).

The OGDI driver is listed under the gdal utilities (gdalinfo --formats) but
it doesn't appear with ogrinfo --formats.

What is wrong ?

Best regards,

Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090121/132d4f5f/attachment.html
From gfiske at whrc.org  Wed Jan 21 11:42:31 2009
From: gfiske at whrc.org (Greg Fiske)
Date: Wed Jan 21 11:58:39 2009
Subject: [gdal-dev] accessing the histogram
Message-ID: <005301c97be7$40dce510$c296af30$@org>

Hello folks,

Can somebody demonstrate how I can access the histogram of a
raster image.  Ultimately, I'd like to dump it to a text file as
well (I have many images to assess).

Thanks for any advice,

Greg


Gregory J. Fiske
GIS Manager/Research Associate
The Woods Hole Research Center
149 Woods Hole Road
Falmouth, Massachusetts 02540
508-540-9900 x139
http://whrc.org
gfiske@whrc.org 



From warmerdam at pobox.com  Wed Jan 21 12:10:21 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 21 12:10:40 2009
Subject: [gdal-dev] JP2ECW driver fails with lossless JPEG2000 images
In-Reply-To: <loom.20090121T084236-859@post.gmane.org>
References: <loom.20090121T084236-859@post.gmane.org>
Message-ID: <497756FD.80909@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> I have been suspecting that JP2ECW driver does not handle lossless jpeg2000
> images correctly and now I am pretty sure that it is true at least with images
> compressed with Kakadu.

Jukka,

I have also observed that the JP2ECW driver does not appear to read losslessly
compressed jpeg2000 files with the expected image values, though I had not
spent time verifying it.  I am not sure if this is an ECW SDK issue or
something I do (or don't do) in the driver code.

It might be good for you to file a ticket on this issue, if you have a small
lossless file to demonstrate the issue.  I am not sure if/when anyone would
look into it though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 21 12:15:59 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 21 12:16:17 2009
Subject: [gdal-dev] VPF parsing
In-Reply-To: <9CE1BBC0D3132A43A391263616F51E7D5F3F0D2F22@corpappl079.corp.saab.se>
References: <19321160.post@talk.nabble.com>
	<9CE1BBC0D3132A43A391263616F51E7D5F3F0D2F22@corpappl079.corp.saab.se>
Message-ID: <4977584F.1070503@pobox.com>

Malm Paul wrote:
> 
> Hi list, Is it possible to convert all "layers" in a VPF database to
> shapefiles without knowing about the layers included, in Windows with
> ogr2ogr? 

Paul,

In theory that is what ogr2ogr should do by default but it will produce
shapefiles with awful names due to the messy names of the layers in VPF
as exposed through OGDI.


eg.

ogr2ogr shape_out_dir gltp:/vrf/usr3/mpp1/v0noa/vmaplv0/noamer

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mathieu at inventis.ca  Wed Jan 21 11:45:06 2009
From: mathieu at inventis.ca (Mathieu Lahaye)
Date: Wed Jan 21 12:21:51 2009
Subject: [gdal-dev] ogr2gui version 0.5 released
Message-ID: <20090121164501.A319F1F94@fep3.cogeco.net>

A new version of ogr2gui ? the graphical user interface for ogr2ogr is now
available.

What?s new in the 0.5 version ?

- ogr2gui is now a stand-alone application
- it supports BNA file format
- it supports batch processing
?
The source code as well as the binary executable for Windows and Linux can
be downloaded at inventis.ca

Thanks for your support!

Mathieu Lahaye


From edomazlicky at tacomacc.edu  Wed Jan 21 12:13:56 2009
From: edomazlicky at tacomacc.edu (Domazlicky, Eric)
Date: Wed Jan 21 12:25:31 2009
Subject: FW: [gdal-dev] accessing the histogram
Message-ID: <B7F858CF2D73F6459DDD8F14F68019D40CB14A90@XMail.tccnet.edu>

There is no histogram in raster files sitting there for you to access.
You have to calculate it yourself using the pixel data. Here is a good
example of doing it in C#
http://www.codeproject.com/KB/cs/Image_Histograms.aspx

I would familiarize yourself with the ReadRaster functions so you know
how to actually access the pixel data of GDAL raster file so you can
calculate the histogram.
http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpRaster


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Greg Fiske
Sent: Wednesday, January 21, 2009 8:43 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] accessing the histogram

Hello folks,

Can somebody demonstrate how I can access the histogram of a
raster image.  Ultimately, I'd like to dump it to a text file as
well (I have many images to assess).

Thanks for any advice,

Greg


Gregory J. Fiske
GIS Manager/Research Associate
The Woods Hole Research Center
149 Woods Hole Road
Falmouth, Massachusetts 02540
508-540-9900 x139
http://whrc.org
gfiske@whrc.org 



_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Wed Jan 21 13:11:57 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 21 13:12:12 2009
Subject: FW: [gdal-dev] accessing the histogram
In-Reply-To: <B7F858CF2D73F6459DDD8F14F68019D40CB14A90@XMail.tccnet.edu>
References: <B7F858CF2D73F6459DDD8F14F68019D40CB14A90@XMail.tccnet.edu>
Message-ID: <4977656D.3040307@pobox.com>

Domazlicky, Eric wrote:
> There is no histogram in raster files sitting there for you to access.
> You have to calculate it yourself using the pixel data. Here is a good
> example of doing it in C#
> http://www.codeproject.com/KB/cs/Image_Histograms.aspx
> 
> I would familiarize yourself with the ReadRaster functions so you know
> how to actually access the pixel data of GDAL raster file so you can
> calculate the histogram.
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpRaster

Folks,

As I noted on the fwtools list, there is a method in GDAL to get
histograms, though it normally just computes the histogram, more or
less as Eric notes above.  Before I wrote:

"""
Greg,

You can get gdalinfo to report the histogram details using the -hist
option.

The results (mixed into the gdalinfo report) look like:

   256 buckets from -0.5 to 255.5:
   5824 0 0 0 0 0 0 0 4892 0 0 0 0 0 0 0 6665 0 0 0 0 0 0 0 0 8432 0 0 0 0 0 0 
0 9026 0 0 0 0 0 0 0 8988 0 0 0 0 0 0 0 9651 0 0 0 0 0 0 0 0 11196 0 0 0 0 0 0 
0 13316 0 0 0 0 0 0 0 14152 0 0 0 0 0 0 0 13986 0 0 0 0 0 0 0 14118 0 0 0 0 0 0 
0 0 15181 0 0 0 0 0 0 0 15247 0 0 0 0 0 0 0 14278 0 0 0 0 0 0 0 13076 0 0 0 0 0 
0 0 0 12244 0 0 0 0 0 0 0 11412 0 0 0 0 0 0 0 10168 0 0 0 0 0 0 0 8505 0 0 0 0 
0 0 0 0 6909 0 0 0 0 0 0 0 5860 0 0 0 0 0 0 0 4797 0 0 0 0 0 0 0 3864 0 0 0 0 0 
0 0 3348 0 0 0 0 0 0 0 0 2774 0 0 0 0 0 0 0 2368 0 0 0 0 0 0 0 2027 0 0 0 0 0 0 
0 1611 0 0 0 0 0 0 0 0 1306 0 0 0 0 0 0 0 1080 0 0 0 0 0 0 0 5843

If you need more control, and are willing to write a python script you
can adapt the one at:

   http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/histrep.py

Underlying this is the C++ method GDALRasterBand::GetHistogram():

http://www.gdal.org/classGDALRasterBand.html#3f8889607d3b2294f7e0f11181c201c8
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexandre.gacon+gdal at gmail.com  Thu Jan 22 11:16:47 2009
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Thu Jan 22 11:16:49 2009
Subject: [gdal-dev] [OGR] Build GDAL 1.6 with OGDI enabled
Message-ID: <45f3b7570901220816ibdac676p459806ede99e42fb@mail.gmail.com>

Hi,

We had some problems to enable the OGDI driver in the 1.6.0 version of
GDAL/OGR, with Windows.

The OGDI library uses the zlib library in version 1.1.4 as a dynamic
library, whereas GDAL uses the same library in version 1.2.? as a static
library. Thus there is name conflicts in the linking of the GDAL dll with
the zlib related functions.

In order to make the driver works, we had to do the following things in the
file port/makefile.vc :

- Remove the -DHAVE_ZLIB from the EXTRAFLAGS variable.
- Remove the cpl_vsil_gzip.obj entry from the OBJ list.

With this we manage to compile and link GDAL with the OGDI driver (But we
lost the abality of GDAL 1.6 to read files inside zip/gzip files).

Could you think of a better solution ? Perhaps encapsulating the
cpl_vsil_gzip methods code in #ifdef HAVE_ZLIB would be a first solution.

Best regards,

Alexandre Gacon

PS : this problem was the reason why I couldn't see the OGDI driver in my
ogrinfo --formats list yesterday.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090122/4ffe183a/attachment.html
From warmerdam at pobox.com  Thu Jan 22 11:28:49 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 22 11:29:02 2009
Subject: [gdal-dev] [OGR] Build GDAL 1.6 with OGDI enabled
In-Reply-To: <45f3b7570901220816ibdac676p459806ede99e42fb@mail.gmail.com>
References: <45f3b7570901220816ibdac676p459806ede99e42fb@mail.gmail.com>
Message-ID: <49789EC1.5060907@pobox.com>

Alexandre Gacon wrote:
> Hi,
> 
> We had some problems to enable the OGDI driver in the 1.6.0 version of 
> GDAL/OGR, with Windows.
> 
> The OGDI library uses the zlib library in version 1.1.4 as a dynamic 
> library, whereas GDAL uses the same library in version 1.2.? as a static 
> library. Thus there is name conflicts in the linking of the GDAL dll 
> with the zlib related functions.
> 
> In order to make the driver works, we had to do the following things in 
> the file port/makefile.vc <http://makefile.vc> :
> 
> - Remove the -DHAVE_ZLIB from the EXTRAFLAGS variable.
> - Remove the cpl_vsil_gzip.obj entry from the OBJ list.
> 
> With this we manage to compile and link GDAL with the OGDI driver (But 
> we lost the abality of GDAL 1.6 to read files inside zip/gzip files).
> 
> Could you think of a better solution ? Perhaps encapsulating the 
> cpl_vsil_gzip methods code in #ifdef HAVE_ZLIB would be a first solution.

Alexandre,

I would note it should also be possible to build OGDI with more recent
zlib's with some adjustments in it's build.   I presume that is what I
did for the OGDI package in OSGeo4W.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kfaschoway at dbxgeomatics.com  Thu Jan 22 14:00:37 2009
From: kfaschoway at dbxgeomatics.com (Kevin Faschoway)
Date: Thu Jan 22 15:00:58 2009
Subject: [gdal-dev] GDAL with ECW on windows
Message-ID: <E2D805A8E0CDFE4D97DBC60F3A899D1F1A8246@mercator.dbx.local>

I'm trying to build MapServer/GDAL with ECW support on windows but from the following link: http://trac.osgeo.org/gdal/wiki/ECW

 

It says:

 

Building GDAL with ECW support on Windows TO BE DONE

 

Does anyone know if GDAL supports ECW yet on Windows? If so can you send me the build instructions?

 

Thanks

Kevin F.

 

Kevin Faschoway

Web Developer

DBx GEOMATICS inc.

37 Boul. St-Joseph, 2e ?tage

Gatineau, Qu?bec, CANADA J8Y 3V8

Tel : 819.772.2000 + 23

Fax : 819.772.2001

Email: kfaschoway@dbxgeomatics.com

Website : www.dbxgeomatics.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090122/ebdb5de7/attachment.html
From warmerdam at pobox.com  Thu Jan 22 16:26:14 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 22 16:26:24 2009
Subject: [gdal-dev] GDAL with ECW on windows
In-Reply-To: <E2D805A8E0CDFE4D97DBC60F3A899D1F1A8246@mercator.dbx.local>
References: <E2D805A8E0CDFE4D97DBC60F3A899D1F1A8246@mercator.dbx.local>
Message-ID: <4978E476.6080107@pobox.com>

Kevin Faschoway wrote:
> I'm trying to build MapServer/GDAL with ECW support on windows but from 
> the following link: http://trac.osgeo.org/gdal/wiki/ECW
> 
> It says:
> 
> Building GDAL with ECW support on Windows TO BE DONE
> 
> Does anyone know if GDAL supports ECW yet on Windows? If so can you send 
> me the build instructions?

Kevin,

The "TO BE DONE" really just means filling in the details on the page.
You should edit your nmake.opt and search for ECW, and set the variables
there appropriately.  I think it is pretty easy to build in ECW support
using the stock ECW SDK stuff from Erdas.   I would encourage *you* to
fill in the details in trac for windows once you have done it.  This is
an example of a way that a relatively new GDAL user can contribute
back to the project easily.

If you run into specific problems, you can contact me privately, and
I'll try to answer.

PS. I hope to see you at an OSGeo Ottawa meeting sometime!

   http://wiki.osgeo.org/wiki/Ottawa_Chapter

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From paul.malm at saabgroup.com  Fri Jan 23 01:17:08 2009
From: paul.malm at saabgroup.com (Malm Paul)
Date: Fri Jan 23 01:17:21 2009
Subject: [gdal-dev] VPF parsing
In-Reply-To: <4977584F.1070503@pobox.com>
References: <19321160.post@talk.nabble.com>
	<9CE1BBC0D3132A43A391263616F51E7D5F3F0D2F22@corpappl079.corp.saab.se>
	<4977584F.1070503@pobox.com>
Message-ID: <9CE1BBC0D3132A43A391263616F51E7D5F3F0D3154@corpappl079.corp.saab.se>

 
Frank, 
How do I get past the inabilito of (MS Windows) to create file names including '*'? 

Paul

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: den 21 januari 2009 18:16
To: Malm Paul
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] VPF parsing

Malm Paul wrote:
> 
> Hi list, Is it possible to convert all "layers" in a VPF database to 
> shapefiles without knowing about the layers included, in Windows with 
> ogr2ogr?

Paul,

In theory that is what ogr2ogr should do by default but it will produce shapefiles with awful names due to the messy names of the layers in VPF as exposed through OGDI.


eg.

ogr2ogr shape_out_dir gltp:/vrf/usr3/mpp1/v0noa/vmaplv0/noamer

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 23 10:20:49 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 23 10:21:15 2009
Subject: [gdal-dev] VPF parsing
In-Reply-To: <9CE1BBC0D3132A43A391263616F51E7D5F3F0D3154@corpappl079.corp.saab.se>
References: <19321160.post@talk.nabble.com>
	<9CE1BBC0D3132A43A391263616F51E7D5F3F0D2F22@corpappl079.corp.saab.se>
	<4977584F.1070503@pobox.com>
	<9CE1BBC0D3132A43A391263616F51E7D5F3F0D3154@corpappl079.corp.saab.se>
Message-ID: <4979E051.4070505@pobox.com>

Malm Paul wrote:
>  
> Frank, 
> How do I get past the inabilito of (MS Windows) to create file names including '*'? 

Paul,

No idea.  I wasn't aware of this limitation.  I mostly work on linux.

I would suggest just translating one layer at a time (explicitly) and
renaming it with -nln which assigns a new layer name during the translation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pascal.darre at laposte.net  Fri Jan 23 16:29:52 2009
From: pascal.darre at laposte.net (darrepac)
Date: Fri Jan 23 16:29:53 2009
Subject: [Gdal-dev] Changing a color in palette
Message-ID: <1232746192462-2205904.post@n2.nabble.com>


Hello

I have a set of geotiff 8bits file.
I would like to change 1 color of the palette: puting the color 255,255,255
in the index 123 instead of color  255,0,255. While not touching anything
else.

Is there a way to do this? because I have a big set of files and I did not
find any tool which permit batch processing and keep the geo information.

thanks for help


-- 
View this message in context: http://n2.nabble.com/Changing-a-color-in-palette-tp2205904p2205904.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Fri Jan 23 16:43:24 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 23 16:43:47 2009
Subject: [Gdal-dev] Changing a color in palette
In-Reply-To: <1232746192462-2205904.post@n2.nabble.com>
References: <1232746192462-2205904.post@n2.nabble.com>
Message-ID: <497A39FC.8080002@pobox.com>

darrepac wrote:
> Hello
> 
> I have a set of geotiff 8bits file.
> I would like to change 1 color of the palette: puting the color 255,255,255
> in the index 123 instead of color  255,0,255. While not touching anything
> else.
> 
> Is there a way to do this? because I have a big set of files and I did not
> find any tool which permit batch processing and keep the geo information.

Darre,

It should be quite practical to do this with a small python script, but, you
may need to use the trunk version of GDAL to get this functionality.  There
was recently a bunch of work done to support more dynamic altering of tiff
colormaps that you might require.

I could provide a sample script to do this if you are interested.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pascal.darre at laposte.net  Fri Jan 23 16:49:47 2009
From: pascal.darre at laposte.net (darrepac)
Date: Fri Jan 23 16:49:48 2009
Subject: [Gdal-dev] Changing a color in palette
In-Reply-To: <497A39FC.8080002@pobox.com>
References: <1232746192462-2205904.post@n2.nabble.com>
	<497A39FC.8080002@pobox.com>
Message-ID: <1232747387661-2206046.post@n2.nabble.com>


If I have to do a script in Python, I will do it!
So yes please, I would like to see an example

thanks


Frank Warmerdam wrote:
> 
> darrepac wrote:
>> Hello
>> 
>> I have a set of geotiff 8bits file.
>> I would like to change 1 color of the palette: puting the color
>> 255,255,255
>> in the index 123 instead of color  255,0,255. While not touching anything
>> else.
>> 
>> Is there a way to do this? because I have a big set of files and I did
>> not
>> find any tool which permit batch processing and keep the geo information.
> 
> Darre,
> 
> It should be quite practical to do this with a small python script, but,
> you
> may need to use the trunk version of GDAL to get this functionality. 
> There
> was recently a bunch of work done to support more dynamic altering of tiff
> colormaps that you might require.
> 
> I could provide a sample script to do this if you are interested.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://n2.nabble.com/Changing-a-color-in-palette-tp2205904p2206046.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Fri Jan 23 17:06:42 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 23 17:07:02 2009
Subject: [Gdal-dev] Changing a color in palette
In-Reply-To: <1232747387661-2206046.post@n2.nabble.com>
References: <1232746192462-2205904.post@n2.nabble.com>
	<497A39FC.8080002@pobox.com> <1232747387661-2206046.post@n2.nabble.com>
Message-ID: <497A3F72.7030900@pobox.com>

darrepac wrote:
> If I have to do a script in Python, I will do it!
> So yes please, I would like to see an example

Darre,

With GDAL "trunk" the following seems to do the trick, and could
be easily extended to loop over many files.


import gdal


def update_ct( file ):

     ds = gdal.Open( file, gdal.GA_Update )

     ct = ds.GetRasterBand(1).GetRasterColorTable()

     ct.SetColorEntry( 123, (255,255,255) )

     ds.GetRasterBand(1).SetRasterColorTable( ct )

     ds = None



update_ct( 'test.tif' )


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jumpjack at libero.it  Sun Jan 25 09:49:02 2009
From: jumpjack at libero.it (jumpjack)
Date: Sun Jan 25 09:49:04 2009
Subject: [Gdal-dev] Creating Lambert Azimutal projection
Message-ID: <1232894942085-2213261.post@n2.nabble.com>


Hi,
I'd need to convert some images into Lambert Azimuthal projection:
http://www.evl.uic.edu/pape/data/Earth/

What I want to obtain is something like this:
http://astrogeology.usgs.gov/Gallery/MapsAndGlobes/mars.html#MarsViking

I have been told this the procedure I have to use:
"Create a series of 12 Transverse Mercator projections that are 32 degrees
in longitude and 91 degrees in latitude to form a "flower petal" projection
for making globes. If the northern hemisphere is being created, the latitude
range is -1 to +90. If the southern hemisphere is being created, the
latitude range is -90 to 1. The petals are formed by changing the center
longitude and map rotation in steps of 30 degrees for each Transverse
Mercator projection. Each section is put into the mosaic. The final center
of the projection is a Lambert Azimuthal Equal-area centered on the pole and
covers from -90 to -75 or 75 to 90 degrees latitude and 360 degrees in
longitude. This is the last cube that is placed in the mosaic."

Can I accomplish this with GDALWARP?
Which commandline should I use?

-- 
View this message in context: http://n2.nabble.com/Creating-Lambert-Azimutal-projection-tp2213261p2213261.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jluis at ualg.pt  Sun Jan 25 16:24:31 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan 25 16:24:33 2009
Subject: [gdal-dev] gdalwarp on a file + world file - different limits
Message-ID: <497CD88F.7080904@ualg.pt>

Hi,

For the next version of GMT we have extended the ability of the ps2raster program
to take a postscript file generated by GMT either create a world file, or even further,
to call gdalwarp to create a true geotiff file.

Next is an example on how it will work

pscoast -JS-55/-60/15c -R-77/-55/-57.5/-48r -Df -Gred -P -Bg2 --BASEMAP_TYPE=plain --FRAME_PEN=0.1p > out.ps
ps2raster out.ps -Tt -W+ -V

(which executes this command)
gdalwarp -s_srs "+proj=stere +lat_0=-60 +lon_0=-55 +k=1 +x_0=0 +y_0=0 +a=6378137.000 +b=6356752.314245" out.tif out.tiff


But when I compare the gdalinfo output of the two files they do not agree.
Why are the LR coords from the geotiff file different from the tif + .tfw?
And where do they come from?

Thanks

Joaquim Luis

# ----------  THE .TFW CONTENTS
677.678633953751	# x_inc
0.0
0.0
-677.201365837256	# y_inc
-1389588.373683023000	# X-UL
1335922.909317081300	# Y-UL

# -------------------------------------------
# WHAT DOES GDALINFO SAY ABOUT THE .TIF + .TFW
gdalinfo out.tif
Upper Left  (-1389927.213, 1336261.510)
Lower Left  (-1389927.213,  329263.079)
Upper Right ( -188402.995, 1336261.510)
Lower Right ( -188402.995,  329263.079)

# -------------------------------------------
# WHAT DOES GDALINFO SAY ABOUT THE (GEO).TIFF
gdalinfo out.tiff
Upper Left  (-1389927.213, 1336261.510)
Lower Left  (-1389927.213,  329523.865)
Upper Right ( -188074.869, 1336261.510)
Lower Right ( -188074.869,  329523.865)
From j.l.h.hartmann at uva.nl  Mon Jan 26 05:27:02 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Jan 26 06:23:56 2009
Subject: [gdal-dev] Warping an already georeferenced image with control
	points
In-Reply-To: <4970DA3F.6080501@pobox.com>
References: <8f0c8ded0901161102of436502m730ff3d844febaa5@mail.gmail.com>
	<4970DA3F.6080501@pobox.com>
Message-ID: <497D8FF6.30600@uva.nl>

Hi,

I am trying to georeference old maps in two steps: first georeferencing 
them from the old projection to a modern one, and then ameliorating the 
georeferenced image by rubber-sheeting it on the base of control points, 
mostly triangulation points for which the coordinates in the old and new 
maps are known.

The second step causes trouble: if I add  control points to the 
georeferenced image with gdal_translate -gcp , the projection 
information gets lost.

Yet, AFAICS it should be possible: if I use gdaltransform -s_srs 
EPSG:28992 -t_srs EPSG:28992 -gcp ... , I can use control points with 
coordinates in EPSG:28992 and get a correct transformation.

So: regarding this behavior  of gdal_translate, to discard projection 
information when control points are added: is it a bug or is it the 
expected behavior? In the last case, how can I rubber-sheet an already 
georeferenced map?

Jan
From Michael.Smith at maine.gov  Mon Jan 26 09:01:29 2009
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Mon Jan 26 09:01:33 2009
Subject: [gdal-dev] Help with Maine state plane US feet
Message-ID: <4EFF8BB964547748A07CA32961810C041362A8EE@SOM-TEAQASMAIL1.som.w2k.state.me.us>

I am trying to work with several aerial photos which are in Maine State
Plane West, NAD83, US feet.  This is a commonly-used projection in Maine
(along with Maine East), yet it is not found in the pcs.csv file that
comes with FWTools/GDAL.  In fact although there are several iterations
of state plane for Maine in that file, none are in feet.

I have hacked around a bit without success.  The two EPSG codes I am
trying to add are 26847 http://spatialreference.org/ref/epsg/26847/  and
26848 http://spatialreference.org/ref/epsg/26848/.  I added the values
below to the table based on what I saw as examples in other entries:
COORD_REF_SYS_CODE	COORD_REF_SYS_NAME	UOM_CODE
SOURCE_GEOGCRS_CODE	COORD_OP_CODE	COORD_OP_METHOD_CODE	SHOW_CRS
DEPRECATED	PARAMETER_CODE_1	PARAMETER_VALUE_1
PARAMETER_UOM_1	PARAMETER_CODE_2	PARAMETER_VALUE_2
PARAMETER_UOM_2	PARAMETER_CODE_3	PARAMETER_VALUE_3
PARAMETER_UOM_3	PARAMETER_CODE_4	PARAMETER_VALUE_4
PARAMETER_UOM_4	PARAMETER_CODE_5	PARAMETER_VALUE_5
PARAMETER_UOM_5	

26847	NAD83 / Maine East (ftUS)	9003	4269	11831	9807
1	0	8801	43.4	9110	8802	-68.3	9110	8805
0.9999	9201	8806	300000	9001	8807	0	9001	
26848	NAD83 / Maine West (ftUS)	9003	4269	11832	9807
1	0	8801	42.5	9110	8802	-70.1	9110	8805
0.999967	9201	8806	900000	9001	8807	0	9001	

Yet when I use those EPSG codes the imagery does not align correctly
(way way off) in GIS software including ArcGIS.

I tried two other methods, one using the PROJ4 description and secondly
using the ESRI projection file for
NAD_1983_StatePlane_Maine_West_FIPS_1802_Feet.  In all cases the imagery
is way way way out of Maine.  Examining the image in ArcGIS shows it is
Transverse Mercator and has the same parameters as State Plane feet, but
it's screwed up.

Yet if I'm in ArcGIS and I assign the projection file to the image
manually, it works fine.  I intend to put the imagery in MapServer WMS,
so I need to get this worked out in GDAL first.

Any suggestions?

**********
Michael Smith
State GIS Manager
Maine Office of GIS 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/29a6dd96/attachment.html
From Michael.Smith at maine.gov  Mon Jan 26 09:05:29 2009
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Mon Jan 26 09:05:33 2009
Subject: [gdal-dev] Use an existing image for projection
Message-ID: <4EFF8BB964547748A07CA32961810C041362A8F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>

Related to my previous post, is there simply a way to specify an
existing image as the template for projection?  My problem is that the
SID files I received are all in the same projection, yet some have the
projection info encoded and others don't.  This causes problems as I
make mosaics with gdalwarp.  If I could do something like  "-t_srs
image1.sid" that would be great.  Can I get projection out of gdalinfo
somehow and into a file?

**********
Michael Smith
State GIS Manager
Maine Office of GIS 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/e9f0e053/attachment.html
From moliveira at GEOSTATS.com  Mon Jan 26 09:25:54 2009
From: moliveira at GEOSTATS.com (Marcelo Oliveira)
Date: Mon Jan 26 09:26:57 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
Message-ID: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>

Hi There,

I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
C# bindings for GDAL and it throws the following exception:

<<<<
GDALWMS: Bad projection specified.
>>>>

The source code that causes the exception to be thrown is :

<<<<
	String filename = "http://openaerialmap.org/static/ww.xml";
	Gdal.AllRegister();
	Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
>>>>>

However,  I can open and extract pieces of this dataset using gdalinfo
and gdal_translate via the command line.  Is this a know limitation of
the C# bindings or am I doing something wrong?

Thanks, M

--------------
Marcelo Simas Oliveira
GeoStats LP
530 Means St., Ste. 310
Atlanta, Georgia 30318
(404) 588-1004
www.geostats.com

From gdal at archivideo.com  Mon Jan 26 09:17:10 2009
From: gdal at archivideo.com (Johan Nouvel)
Date: Mon Jan 26 09:37:06 2009
Subject: [gdal-dev] ticket 1017
Message-ID: <497DC5E6.6080604@archivideo.com>

Hello Frank,

We are on the road to update from gdal 1.40 to gdal 1.6.0 and we want to 
integrate some of our modifications into gdal source. Ticket 1017 is one 
of them.
Have you planned to insert this modification  into gdal trunk ? Did you 
need more informations ? We need gml driver to read fids as we use these 
fids to access our data .

Regards,
Johan.

-- 
Johan Nouvel, R&D Engineer
http://www.archivideo.com
tel : +33 (0)2 99 86 30 20
ARCHIVIDEO, 40 rue des Veyettes, 35000 RENNES, FRANCE

From szekerest at gmail.com  Mon Jan 26 10:23:54 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 26 10:23:58 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
In-Reply-To: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
References: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
Message-ID: <f3b73b7d0901260723q319567ffoed63a237fcdf8ce8@mail.gmail.com>

Marcelo,

How is your <GDAL_WMS>.. service configuration looking like?

Best regards,

Tamas




2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

> Hi There,
>
> I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
> to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
> C# bindings for GDAL and it throws the following exception:
>
> <<<<
> GDALWMS: Bad projection specified.
> >>>>
>
> The source code that causes the exception to be thrown is :
>
> <<<<
>        String filename = "http://openaerialmap.org/static/ww.xml";
>        Gdal.AllRegister();
>        Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
> >>>>>
>
> However,  I can open and extract pieces of this dataset using gdalinfo
> and gdal_translate via the command line.  Is this a know limitation of
> the C# bindings or am I doing something wrong?
>
> Thanks, M
>
> --------------
> Marcelo Simas Oliveira
> GeoStats LP
> 530 Means St., Ste. 310
> Atlanta, Georgia 30318
> (404) 588-1004
> www.geostats.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/5a02f7d3/attachment-0001.html
From moliveira at GEOSTATS.com  Mon Jan 26 10:30:27 2009
From: moliveira at GEOSTATS.com (Marcelo Oliveira)
Date: Mon Jan 26 10:30:30 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
References: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
	<f3b73b7d0901260723q319567ffoed63a237fcdf8ce8@mail.gmail.com>
Message-ID: <106F9C96E2CC5D4382760C42E3751A9652D008@drake.GEOSTATS.com>

Here is what the URL returns:

 

<<<< 

<LayerSet Name="OAM" ShowAtStartup="true" ShowOnlyOneLayers="false">

?

<ChildLayerSet Name="openaerialmap" ShowAtStartup="false" ShowOnlyOneLayer="true">

?

<QuadTileSet ShowAtStartup="true">

<Name>openaerialmap</Name>

<Description>OpenAerialMap data.</Description>

<DistanceAboveSurface>0</DistanceAboveSurface>

?

<BoundingBox>

?

<West>

<Value>-180.0</Value>

</West>

?

<South>

<Value>-90.0</Value>

</South>

?

<East>

<Value>180.0</Value>

</East>

?

<North>

<Value>90.0</Value>

</North>

</BoundingBox>

<TerrainMapped>false</TerrainMapped>

?

<ImageAccessor>

<LevelZeroTileSizeDegrees>180.0</LevelZeroTileSizeDegrees>

<NumberLevels>20</NumberLevels>

<TextureSizePixels>256</TextureSizePixels>

<ImageFileExtension>jpeg</ImageFileExtension>

?

<ImageTileService>

<ServerUrl>http://tile.openaerialmap.org/tiles/</ServerUrl>

<DataSetName>openaerialmap</DataSetName>

</ImageTileService>

</ImageAccessor>

?

<ExtendedInformation>

<Abstract>SRS:EPSG:4326</Abstract>

</ExtendedInformation>

</QuadTileSet>

</ChildLayerSet>

</LayerSet>

>>>> 

 

--------------

Marcelo Simas Oliveira

GeoStats LP

530 Means St., Ste. 310

Atlanta, Georgia 30318

(404) 588-1004

www.geostats.com

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, January 26, 2009 10:24 AM
To: Marcelo Oliveira
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Open Aerial Map Access via C#

 

Marcelo,

How is your <GDAL_WMS>.. service configuration looking like?

Best regards,

Tamas





2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

Hi There,

I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
C# bindings for GDAL and it throws the following exception:

<<<<
GDALWMS: Bad projection specified.
>>>>

The source code that causes the exception to be thrown is :

<<<<
       String filename = "http://openaerialmap.org/static/ww.xml";
       Gdal.AllRegister();
       Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
>>>>>

However,  I can open and extract pieces of this dataset using gdalinfo
and gdal_translate via the command line.  Is this a know limitation of
the C# bindings or am I doing something wrong?

Thanks, M

--------------
Marcelo Simas Oliveira
GeoStats LP
530 Means St., Ste. 310
Atlanta, Georgia 30318
(404) 588-1004
www.geostats.com

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/aae1e872/attachment.html
From szekerest at gmail.com  Mon Jan 26 10:36:05 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 26 10:36:15 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
In-Reply-To: <106F9C96E2CC5D4382760C42E3751A9652D008@drake.GEOSTATS.com>
References: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
	<f3b73b7d0901260723q319567ffoed63a237fcdf8ce8@mail.gmail.com>
	<106F9C96E2CC5D4382760C42E3751A9652D008@drake.GEOSTATS.com>
Message-ID: <f3b73b7d0901260736k3638c8e4n759bfd7521824bb4@mail.gmail.com>

I just wanted to know how did you specify the <GDAL_WMS> service description
XML when opening the dataset. Because the error you mentioned sounds like
you have an invalid Projection tag in this file.

Best regards,

Tamas


2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

>  Here is what the URL returns:
>
>
>
> <<<<
>
> <LayerSet Name="OAM" ShowAtStartup="true" ShowOnlyOneLayers="false">
>
> -
>
> <ChildLayerSet Name="openaerialmap" ShowAtStartup="false"
> ShowOnlyOneLayer="true">
>
> -
>
> <QuadTileSet ShowAtStartup="true">
>
> <Name>openaerialmap</Name>
>
> <Description>OpenAerialMap data.</Description>
>
> <DistanceAboveSurface>0</DistanceAboveSurface>
>
> -
>
> <BoundingBox>
>
> -
>
> <West>
>
> <Value>-180.0</Value>
>
> </West>
>
> -
>
> <South>
>
> <Value>-90.0</Value>
>
> </South>
>
> -
>
> <East>
>
> <Value>180.0</Value>
>
> </East>
>
> -
>
> <North>
>
> <Value>90.0</Value>
>
> </North>
>
> </BoundingBox>
>
> <TerrainMapped>false</TerrainMapped>
>
> -
>
> <ImageAccessor>
>
> <LevelZeroTileSizeDegrees>180.0</LevelZeroTileSizeDegrees>
>
> <NumberLevels>20</NumberLevels>
>
> <TextureSizePixels>256</TextureSizePixels>
>
> <ImageFileExtension>jpeg</ImageFileExtension>
>
> -
>
> <ImageTileService>
>
> <ServerUrl>http://tile.openaerialmap.org/tiles/</ServerUrl>
>
> <DataSetName>openaerialmap</DataSetName>
>
> </ImageTileService>
>
> </ImageAccessor>
>
> -
>
> <ExtendedInformation>
>
> <Abstract>SRS:EPSG:4326</Abstract>
>
> </ExtendedInformation>
>
> </QuadTileSet>
>
> </ChildLayerSet>
>
> </LayerSet>
>
> >>>>
>
>
>
> --------------
>
> Marcelo Simas Oliveira
>
> GeoStats LP
>
> 530 Means St., Ste. 310
>
> Atlanta, Georgia 30318
>
> (404) 588-1004
>
> www.geostats.com
>
>
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, January 26, 2009 10:24 AM
> *To:* Marcelo Oliveira
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Open Aerial Map Access via C#
>
>
>
> Marcelo,
>
> How is your <GDAL_WMS>.. service configuration looking like?
>
> Best regards,
>
> Tamas
>
>
>
>  2009/1/26 Marcelo Oliveira <moliveira@geostats.com>
>
> Hi There,
>
> I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
> to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
> C# bindings for GDAL and it throws the following exception:
>
> <<<<
> GDALWMS: Bad projection specified.
> >>>>
>
> The source code that causes the exception to be thrown is :
>
> <<<<
>        String filename = "http://openaerialmap.org/static/ww.xml";
>        Gdal.AllRegister();
>        Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
> >>>>>
>
> However,  I can open and extract pieces of this dataset using gdalinfo
> and gdal_translate via the command line.  Is this a know limitation of
> the C# bindings or am I doing something wrong?
>
> Thanks, M
>
> --------------
> Marcelo Simas Oliveira
> GeoStats LP
> 530 Means St., Ste. 310
> Atlanta, Georgia 30318
> (404) 588-1004
> www.geostats.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/07fe193d/attachment-0001.html
From moliveira at GEOSTATS.com  Mon Jan 26 10:46:51 2009
From: moliveira at GEOSTATS.com (Marcelo Oliveira)
Date: Mon Jan 26 10:46:53 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
References: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
	<f3b73b7d0901260723q319567ffoed63a237fcdf8ce8@mail.gmail.com>
	<106F9C96E2CC5D4382760C42E3751A9652D008@drake.GEOSTATS.com>
	<f3b73b7d0901260736k3638c8e4n759bfd7521824bb4@mail.gmail.com>
Message-ID: <106F9C96E2CC5D4382760C42E3751A9652D00F@drake.GEOSTATS.com>

Tamas,

 

Here is how I specified the source when opening the dataset:

 

<<<< 

       String filename = "http://openaerialmap.org/static/ww.xml";

       Gdal.AllRegister();

       Dataset  dataSet = Gdal.OpenShared(fileName, 0); 

>>>>> 

 

Thanks, M

 

--------------

Marcelo Simas Oliveira

GeoStats LP

530 Means St., Ste. 310

Atlanta, Georgia 30318

(404) 588-1004

www.geostats.com

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, January 26, 2009 10:36 AM
To: Marcelo Oliveira
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Open Aerial Map Access via C#

 

I just wanted to know how did you specify the <GDAL_WMS> service description XML when opening the dataset. Because the error you mentioned sounds like you have an invalid Projection tag in this file.

Best regards,

Tamas



2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

Here is what the URL returns:

 

<<<< 

<LayerSet Name="OAM" ShowAtStartup="true" ShowOnlyOneLayers="false">

?

<ChildLayerSet Name="openaerialmap" ShowAtStartup="false" ShowOnlyOneLayer="true">

?

<QuadTileSet ShowAtStartup="true">

<Name>openaerialmap</Name>

<Description>OpenAerialMap data.</Description>

<DistanceAboveSurface>0</DistanceAboveSurface>

?

<BoundingBox>

?

<West>

<Value>-180.0</Value>

</West>

?

<South>

<Value>-90.0</Value>

</South>

?

<East>

<Value>180.0</Value>

</East>

?

<North>

<Value>90.0</Value>

</North>

</BoundingBox>

<TerrainMapped>false</TerrainMapped>

?

<ImageAccessor>

<LevelZeroTileSizeDegrees>180.0</LevelZeroTileSizeDegrees>

<NumberLevels>20</NumberLevels>

<TextureSizePixels>256</TextureSizePixels>

<ImageFileExtension>jpeg</ImageFileExtension>

?

<ImageTileService>

<ServerUrl>http://tile.openaerialmap.org/tiles/</ServerUrl>

<DataSetName>openaerialmap</DataSetName>

</ImageTileService>

</ImageAccessor>

?

<ExtendedInformation>

<Abstract>SRS:EPSG:4326</Abstract>

</ExtendedInformation>

</QuadTileSet>

</ChildLayerSet>

</LayerSet>

>>>> 

 

--------------

Marcelo Simas Oliveira

GeoStats LP

530 Means St., Ste. 310

Atlanta, Georgia 30318

(404) 588-1004

www.geostats.com

 

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, January 26, 2009 10:24 AM
To: Marcelo Oliveira
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Open Aerial Map Access via C#

 

Marcelo,

How is your <GDAL_WMS>.. service configuration looking like?

Best regards,

Tamas




2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

Hi There,

I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
C# bindings for GDAL and it throws the following exception:

<<<<
GDALWMS: Bad projection specified.
>>>>

The source code that causes the exception to be thrown is :

<<<<
       String filename = "http://openaerialmap.org/static/ww.xml";
       Gdal.AllRegister();
       Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
>>>>>

However,  I can open and extract pieces of this dataset using gdalinfo
and gdal_translate via the command line.  Is this a know limitation of
the C# bindings or am I doing something wrong?

Thanks, M

--------------
Marcelo Simas Oliveira
GeoStats LP
530 Means St., Ste. 310
Atlanta, Georgia 30318
(404) 588-1004
www.geostats.com

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/355b3e84/attachment.html
From szekerest at gmail.com  Mon Jan 26 11:45:19 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 26 11:45:23 2009
Subject: [gdal-dev] Open Aerial Map Access via C#
In-Reply-To: <106F9C96E2CC5D4382760C42E3751A9652D00F@drake.GEOSTATS.com>
References: <106F9C96E2CC5D4382760C42E3751A9652CFE8@drake.GEOSTATS.com>
	<f3b73b7d0901260723q319567ffoed63a237fcdf8ce8@mail.gmail.com>
	<106F9C96E2CC5D4382760C42E3751A9652D008@drake.GEOSTATS.com>
	<f3b73b7d0901260736k3638c8e4n759bfd7521824bb4@mail.gmail.com>
	<106F9C96E2CC5D4382760C42E3751A9652D00F@drake.GEOSTATS.com>
Message-ID: <f3b73b7d0901260845l61959fevcf607d1040784744@mail.gmail.com>

I wonder how this URL is mapped to the WMS driver by default.
For a valid WMS connection string please refer to:
http://www.gdal.org/frmt_wms.html

This URL is reported by gdalinfo as:

gdalinfo http://openaerialmap.org/static/ww.xml
ERROR 4: `/vsimem/http/02802DC8.dat' not recognised as a supported file
format.

ERROR 4: `/tmp/02802DC8.dat' not recognised as a supported file format.

gdalinfo failed - unable to open 'http://openaerialmap.org/static/ww.xml'.




Best regards,

Tamas



2009/1/26 Marcelo Oliveira <moliveira@geostats.com>

>  Tamas,
>
>
>
> Here is how I specified the source when opening the dataset:
>
>
>
> <<<<
>
>        String filename = "http://openaerialmap.org/static/ww.xml";
>
>        Gdal.AllRegister();
>
>        Dataset  dataSet = Gdal.OpenShared(fileName, 0);
>
> >>>>>
>
>
>
> Thanks, M
>
>
>
> --------------
>
> Marcelo Simas Oliveira
>
> GeoStats LP
>
> 530 Means St., Ste. 310
>
> Atlanta, Georgia 30318
>
> (404) 588-1004
>
> www.geostats.com
>
>
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, January 26, 2009 10:36 AM
>
> *To:* Marcelo Oliveira
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Open Aerial Map Access via C#
>
>
>
> I just wanted to know how did you specify the <GDAL_WMS> service
> description XML when opening the dataset. Because the error you mentioned
> sounds like you have an invalid Projection tag in this file.
>
> Best regards,
>
> Tamas
>
>  2009/1/26 Marcelo Oliveira <moliveira@geostats.com>
>
> Here is what the URL returns:
>
>
>
> <<<<
>
> <LayerSet Name="OAM" ShowAtStartup="true" ShowOnlyOneLayers="false">
>
> -
>
> <ChildLayerSet Name="openaerialmap" ShowAtStartup="false"
> ShowOnlyOneLayer="true">
>
> -
>
> <QuadTileSet ShowAtStartup="true">
>
> <Name>openaerialmap</Name>
>
> <Description>OpenAerialMap data.</Description>
>
> <DistanceAboveSurface>0</DistanceAboveSurface>
>
> -
>
> <BoundingBox>
>
> -
>
> <West>
>
> <Value>-180.0</Value>
>
> </West>
>
> -
>
> <South>
>
> <Value>-90.0</Value>
>
> </South>
>
> -
>
> <East>
>
> <Value>180.0</Value>
>
> </East>
>
> -
>
> <North>
>
> <Value>90.0</Value>
>
> </North>
>
> </BoundingBox>
>
> <TerrainMapped>false</TerrainMapped>
>
> -
>
> <ImageAccessor>
>
> <LevelZeroTileSizeDegrees>180.0</LevelZeroTileSizeDegrees>
>
> <NumberLevels>20</NumberLevels>
>
> <TextureSizePixels>256</TextureSizePixels>
>
> <ImageFileExtension>jpeg</ImageFileExtension>
>
> -
>
> <ImageTileService>
>
> <ServerUrl>http://tile.openaerialmap.org/tiles/</ServerUrl>
>
> <DataSetName>openaerialmap</DataSetName>
>
> </ImageTileService>
>
> </ImageAccessor>
>
> -
>
> <ExtendedInformation>
>
> <Abstract>SRS:EPSG:4326</Abstract>
>
> </ExtendedInformation>
>
> </QuadTileSet>
>
> </ChildLayerSet>
>
> </LayerSet>
>
> >>>>
>
>
>
> --------------
>
> Marcelo Simas Oliveira
>
> GeoStats LP
>
> 530 Means St., Ste. 310
>
> Atlanta, Georgia 30318
>
> (404) 588-1004
>
> www.geostats.com
>
>
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, January 26, 2009 10:24 AM
> *To:* Marcelo Oliveira
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Open Aerial Map Access via C#
>
>
>
> Marcelo,
>
> How is your <GDAL_WMS>.. service configuration looking like?
>
> Best regards,
>
> Tamas
>
>
>  2009/1/26 Marcelo Oliveira <moliveira@geostats.com>
>
> Hi There,
>
> I am using the GDAL build that comes with FWTools2.2.6 (GDAL 1.6.0dev)
> to try to open OAM ("http://openaerialmap.org/static/ww.xml") using the
> C# bindings for GDAL and it throws the following exception:
>
> <<<<
> GDALWMS: Bad projection specified.
> >>>>
>
> The source code that causes the exception to be thrown is :
>
> <<<<
>        String filename = "http://openaerialmap.org/static/ww.xml";
>        Gdal.AllRegister();
>        Dataset  dataSet = Gdal.OpenShared(fileName, 0); <----
> >>>>>
>
> However,  I can open and extract pieces of this dataset using gdalinfo
> and gdal_translate via the command line.  Is this a know limitation of
> the C# bindings or am I doing something wrong?
>
> Thanks, M
>
> --------------
> Marcelo Simas Oliveira
> GeoStats LP
> 530 Means St., Ste. 310
> Atlanta, Georgia 30318
> (404) 588-1004
> www.geostats.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/0080e201/attachment-0001.html
From warmerdam at pobox.com  Mon Jan 26 11:51:18 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 26 11:51:45 2009
Subject: [gdal-dev] Use an existing image for projection
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A8F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A8F0@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <497DEA06.5050100@pobox.com>

Smith, Michael wrote:
> Related to my previous post, is there simply a way to specify an 
> existing image as the template for projection?  My problem is that the 
> SID files I received are all in the same projection, yet some have the 
> projection info encoded and others don't.  This causes problems as I 
> make mosaics with gdalwarp.  If I could do something like  "-t_srs 
> image1.sid" that would be great.  Can I get projection out of gdalinfo 
> somehow and into a file?

Michael,

I do not plan to extend the -t_srs and related switch to support using
a raster file as a template.  However, you can cut and paste the coordinate
system reported by gdalinfo and put it in a text file, then use the name of
this text file as an argument to -t_srs and other similar commandline
switches.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 26 12:25:14 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 26 12:25:37 2009
Subject: [gdal-dev] ticket 1017
In-Reply-To: <497DC5E6.6080604@archivideo.com>
References: <497DC5E6.6080604@archivideo.com>
Message-ID: <497DF1FA.9030808@pobox.com>

Johan Nouvel wrote:
> Hello Frank,
> 
> We are on the road to update from gdal 1.40 to gdal 1.6.0 and we want to 
> integrate some of our modifications into gdal source. Ticket 1017 is one 
> of them.
> Have you planned to insert this modification  into gdal trunk ? Did you 
> need more informations ? We need gml driver to read fids as we use these 
> fids to access our data .

Johan,

I will ask our new maintainer candidate to update the patch for trunk and to
attempt to address a few concerns I have with regard to it.   If the changes
do not seem unduely dangerous it should be practical to back port into 1.6
branch.

   http://trac.osgeo.org/gdal/ticket/1017

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jaadfoo at gmail.com  Mon Jan 26 12:26:00 2009
From: jaadfoo at gmail.com (Jamie Adams)
Date: Mon Jan 26 12:26:03 2009
Subject: [gdal-dev] Help with Maine state plane US feet
In-Reply-To: <4EFF8BB964547748A07CA32961810C041362A8EE@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041362A8EE@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <f4339510901260926g4321e1e1t9e8e08f46b23ea62@mail.gmail.com>

Hey Michael,

Have you tried EPSG 102684?  There's a esri_extra file in the FWTools/share
dir that has additional definitions, including Maine Stateplane West Nad83
Feet.

Cheers,

Jamie Adams

On Mon, Jan 26, 2009 at 6:01 AM, Smith, Michael <Michael.Smith@maine.gov>wrote:

>  I am trying to work with several aerial photos which are in Maine State
> Plane West, NAD83, US feet.  This is a commonly-used projection in Maine
> (along with Maine East), yet it is not found in the pcs.csv file that comes
> with FWTools/GDAL.  In fact although there are several iterations of state
> plane for Maine in that file, none are in feet.
>
> I have hacked around a bit without success.  The two EPSG codes I am trying
> to add are 26847 *http://spatialreference.org/ref/epsg/26847/*<http://spatialreference.org/ref/epsg/26847/>
> and 26848 *http://spatialreference.org/ref/epsg/26848/*<http://spatialreference.org/ref/epsg/26848/>.
> I added the values below to the table based on what I saw as examples in
> other entries:
>
> COORD_REF_SYS_CODE      COORD_REF_SYS_NAME      UOM_CODE
> SOURCE_GEOGCRS_CODE     COORD_OP_CODE   COORD_OP_METHOD_CODE
> SHOW_CRS        DEPRECATED      PARAMETER_CODE_1
> PARAMETER_VALUE_1       PARAMETER_UOM_1 PARAMETER_CODE_2
> PARAMETER_VALUE_2       PARAMETER_UOM_2 PARAMETER_CODE_3
> PARAMETER_VALUE_3       PARAMETER_UOM_3 PARAMETER_CODE_4
> PARAMETER_VALUE_4       PARAMETER_UOM_4 PARAMETER_CODE_5
> PARAMETER_VALUE_5       PARAMETER_UOM_5
>
> 26847   NAD83 / Maine East (ftUS)       9003    4269    11831   9807
> 1       0       8801    43.4    9110    8802    -68.3   9110    8805
> 0.9999  9201    8806    300000  9001    8807    0       9001
> 26848   NAD83 / Maine West (ftUS)       9003    4269    11832   9807
> 1       0       8801    42.5    9110    8802    -70.1   9110    8805
> 0.999967        9201    8806    900000  9001    8807    0       9001
>
> Yet when I use those EPSG codes the imagery does not align correctly (way
> way off) in GIS software including ArcGIS.
>
> I tried two other methods, one using the PROJ4 description and secondly
> using the ESRI projection file for
> NAD_1983_StatePlane_Maine_West_FIPS_1802_Feet.  In all cases the imagery is
> way way way out of Maine.  Examining the image in ArcGIS shows it is
> Transverse Mercator and has the same parameters as State Plane feet, but
> it's screwed up.
>
> Yet if I'm in ArcGIS and I assign the projection file to the image
> manually, it works fine.  I intend to put the imagery in MapServer WMS, so I
> need to get this worked out in GDAL first.
>
> Any suggestions?
>
> **********
> Michael Smith
> State GIS Manager
> Maine Office of GIS
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090126/131c0395/attachment.html
From felix.pedrera at deimos-space.com  Mon Jan 26 12:54:01 2009
From: felix.pedrera at deimos-space.com (=?ISO-8859-1?Q?F=E9lix_Pedrera_Garc=EDa?=)
Date: Mon Jan 26 12:54:04 2009
Subject: [gdal-dev] Merge features from two different files.
Message-ID: <497DF8B9.7050906@deimos-space.com>

Hello,

We have several Mapinfo Files with the same geometry information but 
with different features associated:

1.TAB
2.TAB
...
N.TAB
COMMON.TAB

COMMON.TAB covers all the surface from 1.TAB to N.TAB, and are made of 
polygons, so a polygon present in 1.TAB has an associated polygon with 
the same coordinates in COMMON.TAB, and the same for the files from 1 to N.

1 to N files have one feature named "Value" and in COMMON the feature is 
named "Text".

We want to append the "Text" feature in COMMON to every file 1,2,..N, 
for each polygon in 1,2,..,N file which overlaps with the polygon with 
the same coordinates in COMMON.

Is there a way to achieve this with the OGR tools (ogr2ogr) or a better 
approach is to load the files in PostGIS and deal with spatial queries?
Maybe using the OGR API or other programming APIs?

Thanks in advance,

-- 
F?lix


From lran at unc.edu  Mon Jan 26 14:13:36 2009
From: lran at unc.edu (Limei Ran)
Date: Mon Jan 26 14:51:22 2009
Subject: [gdal-dev] grib format in the gdal 1.6.0
In-Reply-To: <497DF1FA.9030808@pobox.com>
References: <497DC5E6.6080604@archivideo.com> <497DF1FA.9030808@pobox.com>
Message-ID: <20090126141336.73ld75jpk4k0swkk@webmail3.isis.unc.edu>



Hi Frank:

We want to upgrade our GDAL from 1.5 to 1.6.  We got the daily trunk 
version with the grib format.  Does GDAL 1.6.0 release have the grib 
format inside or should we download the new daily trunk version as 
before to have the grib format?

Thank you,


Limei


-- 
Limei Ran, Research Associate
Center for Environmental Modeling for Policy Development
the Institute for the Environment University of North Carolina at Chapel Hill
Bank of American Plaza - CB#6116
137 E. Franklin, Room 661
Chapel Hill, NC 27599-6116

Email: lran@unc.edu
Phone:  919-966-2245
Fax:    919-843-3113





From warmerdam at pobox.com  Mon Jan 26 14:59:52 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 26 15:00:12 2009
Subject: [gdal-dev] gdalwarp on a file + world file - different limits
In-Reply-To: <497CD88F.7080904@ualg.pt>
References: <497CD88F.7080904@ualg.pt>
Message-ID: <497E1638.7070306@pobox.com>

Joaquim Luis wrote:
> (which executes this command)
> gdalwarp -s_srs "+proj=stere +lat_0=-60 +lon_0=-55 +k=1 +x_0=0 +y_0=0 
> +a=6378137.000 +b=6356752.314245" out.tif out.tiff

Joaquim,

I'm curious why you use the above command.  What is it intended to do?
If it is just to assign the coordinate system you could use gdal_translate
with -a_srs.  Perhaps the goal is also to rotate non-north up files to be
north up?

> But when I compare the gdalinfo output of the two files they do not agree.
> Why are the LR coords from the geotiff file different from the tif + .tfw?
> And where do they come from?
  ...
> # ----------  THE .TFW CONTENTS
> 677.678633953751    # x_inc
> 0.0
> 0.0
> -677.201365837256    # y_inc
> -1389588.373683023000    # X-UL
> 1335922.909317081300    # Y-UL

I see the file represented by the TFW does not exactly have
square pixels.  I presume gdalwarp has developed a square pixel
size, and the resulting file had to have it's extents extended a
bit to account for the altered pixel size.

Perhaps the gdalwarp was actually done to "square" the pixels? Or
perhaps the tfw was improperly computed and the pixels were never
really intended to be non-square?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mickewiki at gmail.com  Mon Jan 26 16:09:29 2009
From: mickewiki at gmail.com (Micke Nordin)
Date: Mon Jan 26 16:28:47 2009
Subject: [gdal-dev] Using code from the tutorials
Message-ID: <497E2689.9010506@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

This is my first post to this mailing list, so I'd first like to take
the opportunity to say hello to everyone (and I do hope I'm sending
this to the right list)!

My question is this:

I'd like to use some source code from this tutorial:

http://www.gdal.org/ogr/ogr_apitut.html

as the starting point for a program I'm writing which will convert
comma separated text files with coordinates from a total station into
ESRI shapefiles. Is this all right? And if so, who should be credited
for writing that piece of code?

I will release the source code of the finished program under the GPL.

Best wishes,
Micke Nordin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iEYEARECAAYFAkl+JiwACgkQ8W9qdrD6yOhLlQCbBnrMSb+KLNo1dNQicJCBOXYU
xMAAn1Os5aImFEU/riaZIYa0j1ScKQJb
=jJax
-----END PGP SIGNATURE-----

From jluis at ualg.pt  Mon Jan 26 16:42:34 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan 26 16:42:48 2009
Subject: [gdal-dev] gdalwarp on a file + world file - different limits
In-Reply-To: <497E1638.7070306@pobox.com>
References: <497CD88F.7080904@ualg.pt> <497E1638.7070306@pobox.com>
Message-ID: <497E2E4A.1010009@ualg.pt>

Frank,

I'm afraid there was nothing so thought in the use of gdalwarp.
Yes, the idea is to assign a coordinate system. Since the world file is meant
for referencing linear referencing, it could not correctly describe (for instance)
a Mercator projected image. So I thought in using gdalwarp.
The fact that the pixels in the TFW are not exactly square is beyond our control.
Recall that we start with a postscript image and want to end up with an
as-good-as-possible geotiff image.

Thanks

Joaquim


> Joaquim Luis wrote:
>> (which executes this command)
>> gdalwarp -s_srs "+proj=stere +lat_0=-60 +lon_0=-55 +k=1 +x_0=0 +y_0=0 
>> +a=6378137.000 +b=6356752.314245" out.tif out.tiff
> 
> Joaquim,
> 
> I'm curious why you use the above command.  What is it intended to do?
> If it is just to assign the coordinate system you could use gdal_translate
> with -a_srs.  Perhaps the goal is also to rotate non-north up files to be
> north up?
> 
>> But when I compare the gdalinfo output of the two files they do not 
>> agree.
>> Why are the LR coords from the geotiff file different from the tif + 
>> .tfw?
>> And where do they come from?
>  ...
>> # ----------  THE .TFW CONTENTS
>> 677.678633953751    # x_inc
>> 0.0
>> 0.0
>> -677.201365837256    # y_inc
>> -1389588.373683023000    # X-UL
>> 1335922.909317081300    # Y-UL
> 
> I see the file represented by the TFW does not exactly have
> square pixels.  I presume gdalwarp has developed a square pixel
> size, and the resulting file had to have it's extents extended a
> bit to account for the altered pixel size.
> 
> Perhaps the gdalwarp was actually done to "square" the pixels? Or
> perhaps the tfw was improperly computed and the pixels were never
> really intended to be non-square?
> 
> Best regards,

From warmerdam at pobox.com  Mon Jan 26 17:40:59 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 26 17:41:20 2009
Subject: [gdal-dev] Using code from the tutorials
In-Reply-To: <497E2689.9010506@gmail.com>
References: <497E2689.9010506@gmail.com>
Message-ID: <497E3BFB.9040106@pobox.com>

Micke Nordin wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> This is my first post to this mailing list, so I'd first like to take
> the opportunity to say hello to everyone (and I do hope I'm sending
> this to the right list)!
> 
> My question is this:
> 
> I'd like to use some source code from this tutorial:
> 
> http://www.gdal.org/ogr/ogr_apitut.html
> 
> as the starting point for a program I'm writing which will convert
> comma separated text files with coordinates from a total station into
> ESRI shapefiles. Is this all right? And if so, who should be credited
> for writing that piece of code?
> 
> I will release the source code of the finished program under the GPL.

Micke,

I believe I am the author of almost all, or all of the code and text in that
document.  I grant you rights to use and relicense any and all of the
materials in that page as you see fit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Mon Jan 26 17:23:28 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Jan 26 18:03:56 2009
Subject: [gdal-dev] Using code from the tutorials
In-Reply-To: <497E2689.9010506@gmail.com>
References: <497E2689.9010506@gmail.com>
Message-ID: <60630.94.193.98.140.1233008608.squirrel@loskot.net>

Micke Nordin wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> This is my first post to this mailing list, so I'd first like to take
> the opportunity to say hello to everyone (and I do hope I'm sending
> this to the right list)!
>
> My question is this:
>
> I'd like to use some source code from this tutorial:
>
> http://www.gdal.org/ogr/ogr_apitut.html
>
> as the starting point for a program I'm writing which will convert
> comma separated text files with coordinates from a total station into
> ESRI shapefiles. Is this all right? And if so, who should be credited
> for writing that piece of code?
>
> I will release the source code of the finished program under the GPL.


Micke,

I've never seen any copying information for the tutorial codes.
I think you should be safe considering the tutorial sources as in public
domain and there should not be any need for credits or explicit
permission.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From schut at sarvision.nl  Tue Jan 27 05:20:10 2009
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Jan 27 05:27:56 2009
Subject: [gdal-dev] gdalnumeric.BandWriteArray  gdalnumeric.Int8
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E26E6CA@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E26E6CA@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <497EDFDA.4060702@sarvision.nl>

use 'Byte' instead of Int8.

Gong, Shawn (Contractor) wrote:
>
> hi list,
>
> I have used datablock.astype(gdalnumeric.Int16) in 
> gdalnumeric.BandWriteArray()
>
> Is there a gdalnumeric.Int8 to write an 8-bit band/image?
>
> thanks,
>
> Shawn
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jluis at ualg.pt  Tue Jan 27 11:34:05 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan 27 11:34:07 2009
Subject: [gdal-dev] Non documented (nice, uf) behaviour
Message-ID: <497F377D.9080804@ualg.pt>

Hi,

Still on the ps2raster issue that I mentioned 2 days ago, I was getting a mysterious crashing
in Windows when executing a system call with a gdal_translate command. The is not related to
GDAL at all but maybe to the quotes needed to wrap the +proj=... arguments.
I finally managed to solve the issue by writing the proj string into a file and use that
file as argument to -a_srs

But the man page states that " ... or a file WKT"

-a_srs srs_def:
Override the projection for the output file. The srs_def may be any of the usual GDAL/OGR forms, complete WKT, PROJ.4, EPSG:n or a file containing the 
WKT.


I'm not complaining (well on the contrary), but we may need to document this.
Since what version is it possible to provide a Proj4 string in a file for -a_srs?

(I'm using the GDAL trunk)

Thanks

Joaquim Luis
From warmerdam at pobox.com  Tue Jan 27 11:51:44 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 27 11:52:09 2009
Subject: [gdal-dev] Non documented (nice, uf) behaviour
In-Reply-To: <497F377D.9080804@ualg.pt>
References: <497F377D.9080804@ualg.pt>
Message-ID: <497F3BA0.3070208@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> Still on the ps2raster issue that I mentioned 2 days ago, I was getting 
> a mysterious crashing
> in Windows when executing a system call with a gdal_translate command. 
> The is not related to
> GDAL at all but maybe to the quotes needed to wrap the +proj=... arguments.
> I finally managed to solve the issue by writing the proj string into a 
> file and use that
> file as argument to -a_srs
> 
> But the man page states that " ... or a file WKT"
> 
> -a_srs srs_def:
> Override the projection for the output file. The srs_def may be any of 
> the usual GDAL/OGR forms, complete WKT, PROJ.4, EPSG:n or a file 
> containing the WKT.
> 
> 
> I'm not complaining (well on the contrary), but we may need to document 
> this.
> Since what version is it possible to provide a Proj4 string in a file 
> for -a_srs?

Joaquim,

Underlying the -a_srs function is the OGRSpatialReference::SetFromUserInput()
method which does mention that proj.4 strings are accepted from a file.  The
problem is that it is not really practical to describe all coordinate
system specification methods everywhere they are used.

I have added a brief note in the introductory material on the utilities pages
indicating files with several formats are supported.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jluis at ualg.pt  Tue Jan 27 13:11:47 2009
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan 27 13:11:50 2009
Subject: [gdal-dev] Non documented (nice, uf) behaviour
In-Reply-To: <497F3BA0.3070208@pobox.com>
References: <497F377D.9080804@ualg.pt> <497F3BA0.3070208@pobox.com>
Message-ID: <497F4E63.3030400@ualg.pt>


>> I'm not complaining (well on the contrary), but we may need to 
>> document this.
>> Since what version is it possible to provide a Proj4 string in a file 
>> for -a_srs?
> 
> Joaquim,
> 
> Underlying the -a_srs function is the 
> OGRSpatialReference::SetFromUserInput()
> method which does mention that proj.4 strings are accepted from a file.  
> The
> problem is that it is not really practical to describe all coordinate
> system specification methods everywhere they are used.
> 
> I have added a brief note in the introductory material on the utilities 
> pages
> indicating files with several formats are supported.

Frank,

Thanks and sorry for not be clear enough. When I said "we" I was thinking on the
GMT, because if it was a very new thing we could have to warn users to have
"a such" GDAL version.

Joaquim
From Shawn.Gong at drdc-rddc.gc.ca  Tue Jan 27 13:15:18 2009
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Jan 27 13:13:07 2009
Subject: [gdal-dev] can RSAT-2 product.xml be reprojected?
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E26E6FD@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

Can RSAT-2's product.xml be reprojected using gdal functions? 
I was able to reproject RSAT-2's GTiff, but the product.xml (lat/lon)
reproject to a vrt (UTM) was not successful.

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090127/08ce1055/attachment.html
From kopilists at googlemail.com  Tue Jan 27 13:19:06 2009
From: kopilists at googlemail.com (Ung)
Date: Tue Jan 27 13:19:09 2009
Subject: [gdal-dev] Geocentric system in OGR
Message-ID: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>

Hi All,

I am a new user to GDAL/OGR, and am looking for conversion methods between
geographic systems, projection systems, and the geocentric 3D cartesian
system. The OGRSpatialReference class seems to only create geographic, but
not geocentric systems. A few searches on the web revealed that the
geocentric system was not implement on OGR (
http://lists.osgeo.org/pipermail/gdal-dev/2006-April/008630.html). But that
was an old thread.

So, is the geocentric system supported now on GDAL1.6.0? And if so, how may
I create a geocentric reference? And if not, are there any extensions to
GDAL/OGR or PROJ that may have implemented it?

I have also looked into PROJ, there are a couple of functions to do
geocentric-geodetic conversions. Are there functions to convert from a
projective reference to either geodetic or geocentric systems? Is there an
API reference to PROJ?

Would prefer to use OGR than PROJ as it is object oriented. Any pointers
would be much appreciated!

Thanks.

-ung
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090127/7f3fe5cd/attachment.html
From gregcoats at mac.com  Tue Jan 27 14:18:39 2009
From: gregcoats at mac.com (Greg Coats)
Date: Tue Jan 27 14:18:45 2009
Subject: [gdal-dev] Enhancing JP2KAK
In-Reply-To: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>
References: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>
Message-ID: <37C3CD23-620F-4FAA-945C-7178CBA9DEB5@mac.com>

The code in 1.6/gdal/frmts/jp2kak/jp2kakdataset.cpp calls upon the  
http://www.kakadusoftware.com/ JPEG2000 software to display, read,  
and write .jp2 files.  This code has not been updated since 2002, and  
does not take advantage of any of the major advances in the Kakadu  
JPEG2000 software, including hardware based acceleration from  
multiple threads.  As a result, the GDAL JP2KAK plug in is 4 to 10  
times slower than the free Kakadu applications available for Linux,  
Mac OS X, Solaris, and Windows.  Professor Taubman, the author of  
Kakadu, has written that a restructuring of the old jp2kakdataset.cpp  
would allow the new, hardware accelerated Kakadu code to be copied  
and pasted in.  I am offering $5,000. for an updated  
jp2kakdataset.cpp delivered no later then 14 Feb 2009.
Greg
From warmerdam at pobox.com  Tue Jan 27 14:28:00 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 27 14:28:18 2009
Subject: [gdal-dev] Geocentric system in OGR
In-Reply-To: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>
References: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>
Message-ID: <497F6040.6010009@pobox.com>

Ung wrote:
> So, is the geocentric system supported now on GDAL1.6.0? And if so, how 
> may I create a geocentric reference? And if not, are there any 
> extensions to GDAL/OGR or PROJ that may have implemented it?

Ung,

No, geocentric coordinate systems are not supported by OGRSpatialReference
and OGRCoordinateTransformation classes.

There are no immediately plans to implement this since there is relatively
little interest, though if someone wanted to implement and support this
capability I'd be open to it, as long as it follows OGC's mechanism to
described geocentric coordinate systems in WKT.

> I have also looked into PROJ, there are a couple of functions to do 
> geocentric-geodetic conversions. Are there functions to convert from a 
> projective reference to either geodetic or geocentric systems? 

The pj_transform() function can be used to convert to/from geocentric.
A geocentric coordinate system can be described to PROJ like:

   +proj=geocent

for historical reasons it may still be necessary to describe an ellipse
for geocentric coordinate systems even though it is not meaningful.

eg.
cs2cs +proj=latlong +datum=WGS84 +to +proj=geocent +ellps=WGS84

 > Is there an API reference to PROJ?

If you have man pages it is "man pj_init" or:

   http://trac.osgeo.org/proj/wiki/man_pj_init

This doesn't help you a great deal though since it does not address the
supported coordinate system descriptions.

> Would prefer to use OGR than PROJ as it is object oriented. Any pointers 
> would be much appreciated!

I can think of more compelling reasons for wanting to do this through
OGR's facilities!

Really, pj_init() and pj_transform() aren't so scary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jan 27 14:36:02 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 27 14:36:14 2009
Subject: [gdal-dev] Enhancing JP2KAK
In-Reply-To: <37C3CD23-620F-4FAA-945C-7178CBA9DEB5@mac.com>
References: <54d543eb0901271019l4cba2c8dh4cd6ec3068fe6be@mail.gmail.com>
	<37C3CD23-620F-4FAA-945C-7178CBA9DEB5@mac.com>
Message-ID: <497F6222.7060901@pobox.com>

Greg Coats wrote:
> The code in 1.6/gdal/frmts/jp2kak/jp2kakdataset.cpp calls upon the 
> http://www.kakadusoftware.com/ JPEG2000 software to display, read, and 
> write .jp2 files.  This code has not been updated since 2002, and does 
> not take advantage of any of the major advances in the Kakadu JPEG2000 
> software, including hardware based acceleration from multiple threads.  
> As a result, the GDAL JP2KAK plug in is 4 to 10 times slower than the 
> free Kakadu applications available for Linux, Mac OS X, Solaris, and 
> Windows.  Professor Taubman, the author of Kakadu, has written that a 
> restructuring of the old jp2kakdataset.cpp would allow the new, hardware 
> accelerated Kakadu code to be copied and pasted in.  I am offering 
> $5,000. for an updated jp2kakdataset.cpp delivered no later then 14 Feb 
> 2009.

Folks,

For those interested in this offer there is some more supporting
information at:

   http://trac.osgeo.org/gdal/ticket/2769

I would note that the JP2KAK driver has been actively developed over the
years, but it does continue to use an antique way of calling the Kakadu
libraries which makes it hard to take advantage of some facilities.

I have done significant work on various boundary cases for the JP2KAK
driver for clients, and I wouldn't be pleased to have it broken by a
careless reimplementation.  I would suggest that any wholesale
reimplementation be implemented as as side-by-side driver with the old
driver being the configuration default for some period until a new
version has been vetted in broad use.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ednardof at yahoo.com  Tue Jan 27 14:41:45 2009
From: ednardof at yahoo.com (Ednardo Ferreira)
Date: Tue Jan 27 14:48:27 2009
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
Message-ID: <877502.76129.qm@web37104.mail.mud.yahoo.com>

Hello!

I'm testing ogr2ogr solution. It's really great.

But I have a problem. The situation is:

1) I have a Map Info Line layer. It has 7 descripition fields. 

2) Using ogr2ogr tool, I generated a KML file from this Map Info layer. It's ok. 

3) When I use this KML in google earth, the informations are all there.

4) But, If I try to convert this KML to any other format (as SHP or TAB), the 7 fields are all put together in one single field. 

5) how can I convert from KML to, for example, SHP or TAB, keeping all fields?



 

 At? mais!
Jesus te ama e Ele vai voltar! 


Ednardo de Oliveira Ferreira
Analista de Sistemas e Mestre em Transportes
+55(61)8128-7950 
Blog: http://vilaperi.blogspot.com/


Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643


?Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)


?Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)


"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090127/4f998357/attachment.html
From condit at sdsc.edu  Tue Jan 27 16:08:42 2009
From: condit at sdsc.edu (Christopher Condit)
Date: Tue Jan 27 16:18:54 2009
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
In-Reply-To: <877502.76129.qm@web37104.mail.mud.yahoo.com>
References: <877502.76129.qm@web37104.mail.mud.yahoo.com>
Message-ID: <845AADAC1106E44996327D62097E4C6B01243475@et.ad.sdsc.edu>

Hi Ednardo-

Is there a particular reason that you don't want to go directly from the original MapInfo to SHP? I would suggest that first, that way you don't lose field information. At this point the KML reader is not aware of KML Schemas, so you'll always get a big mashup of fields... This is being worked on.

 

-Chris

 

Christopher Condit

condit@sdsc.edu

(858) 822-5483

 

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ednardo Ferreira
Sent: Tuesday, January 27, 2009 11:42 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields

 

Hello!

I'm testing ogr2ogr solution. It's really great.

But I have a problem. The situation is:

1) I have a Map Info Line layer. It has 7 descripition fields. 

2) Using ogr2ogr tool, I generated a KML file from this Map Info layer. It's ok. 

3) When I use this KML in google earth, the informations are all there.

4) But, If I try to convert this KML to any other format (as SHP or TAB), the 7 fields are all put together in one single field. 

5) how can I convert from KML to, for example, SHP or TAB, keeping all fields?



 

 

At? mais!
Jesus te ama e Ele vai voltar! 

Ednardo de Oliveira Ferreira
Analista de Sistemas e Mestre em Transportes
+55(61)8128-7950 
Blog: http://vilaperi.blogspot.com/

 

Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643

 

"Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)

 

"Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)

 

"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090127/47b5d471/attachment-0001.html
From Luke.Pinner at environment.gov.au  Tue Jan 27 17:15:59 2009
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Tue Jan 27 17:15:47 2009
Subject: [gdal-dev] ECW/ERS projections
Message-ID: <64102B2FB850C345B04D09C82018F45F221FAD@ACT01VEXCCL04.internal.govt>

Hi

What is the best way to enable support for ECW/ERS projections that do
not have an entry in the GDAL_DATA/ecw_cs.wkt dictionary?

This projection definition is used by multiple people in my area, either
using the gdal utilities or as part of scripts coded using the gdal
python api.

I can manually update the ecw_cs.wkt file on my own installation and add
the name & wkt (which works fine) but I'd not have to maintain
modifications to core files over multiple installs. 

Any other suggestions?

Regards

Luke Pinner


------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From warmerdam at pobox.com  Wed Jan 28 00:47:25 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 28 00:47:37 2009
Subject: [gdal-dev] ECW/ERS projections
In-Reply-To: <64102B2FB850C345B04D09C82018F45F221FAD@ACT01VEXCCL04.internal.govt>
References: <64102B2FB850C345B04D09C82018F45F221FAD@ACT01VEXCCL04.internal.govt>
Message-ID: <497FF16D.60803@pobox.com>

Pinner, Luke wrote:
> Hi
> 
> What is the best way to enable support for ECW/ERS projections that do
> not have an entry in the GDAL_DATA/ecw_cs.wkt dictionary?
> 
> This projection definition is used by multiple people in my area, either
> using the gdal utilities or as part of scripts coded using the gdal
> python api.
> 
> I can manually update the ecw_cs.wkt file on my own installation and add
> the name & wkt (which works fine) but I'd not have to maintain
> modifications to core files over multiple installs. 

Luke,

That is pretty much my suggestion for how to handle it. Is this a
coordinate system that you added locally to ERMapper too?  Or is it
something supported by more recent ERMapper releases, but missing in GDAL?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Wed Jan 28 10:26:24 2009
From: joelodom at gmail.com (Joel Odom)
Date: Wed Jan 28 10:26:26 2009
Subject: [gdal-dev] Can I create a GDAL data set from bytes in memory?
Message-ID: <d422b4500901280726s5de9eca5rf389a4545c6d0ad1@mail.gmail.com>

I've got a situation where I'm trying to use GDAL to read image files
contained within a KMZ archive.  (My project uses both GDAL and libkml.)
 Libkml can easily read the image file into memory out of the KMZ archive,
but I'd like to pass it to GDAL without having to write it to a temporary
file on disk.  I haven't figured out if this can be done yet.  Thanks for
any answers.

-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090128/017f1763/attachment.html
From warmerdam at pobox.com  Wed Jan 28 11:36:13 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 28 11:36:26 2009
Subject: [gdal-dev] Can I create a GDAL data set from bytes in memory?
In-Reply-To: <d422b4500901280726s5de9eca5rf389a4545c6d0ad1@mail.gmail.com>
References: <d422b4500901280726s5de9eca5rf389a4545c6d0ad1@mail.gmail.com>
Message-ID: <4980897D.3080807@pobox.com>

Joel Odom wrote:
> I've got a situation where I'm trying to use GDAL to read image files 
> contained within a KMZ archive.  (My project uses both GDAL and libkml.) 
>  Libkml can easily read the image file into memory out of the KMZ 
> archive, but I'd like to pass it to GDAL without having to write it to a 
> temporary file on disk.  I haven't figured out if this can be done yet. 
>  Thanks for any answers.

Joel,

Yes, from C/C++ you can generally utilize the VSI*L facilities to wrap
a memory buffer and have it treated by GDAL as a file.  It does not work
for every image driver, but it works for most common ones.  The documentation
is available with the VSIInstallMemFileHandler() function:

   http://www.gdal.org/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bryan at ideotrope.org  Wed Jan 28 11:11:11 2009
From: bryan at ideotrope.org (Bryan Keith)
Date: Wed Jan 28 11:40:12 2009
Subject: [gdal-dev] how to find gdal_fillnodata
Message-ID: <1983.64.78.232.178.1233159071.squirrel@ideotrope.org>

Hello,

I combined two DEM datasets with gdal_merge, and there's a broken strip of
nodata between the two.  What gdal utility can I use to fix this?  I found
references to gdal_fillnodata on the web, but I don't have it.  I
installed FWTools 2.2.8 on windows, but that doesn't seem to include
gdal_fillnodata either.  On Linux I have GDAL 1.4.4.0, released
2007/11/23.  I looked at the source code (from the daily svn snapshot),
and it looks I need gdal.FillNoData but that's not part of the bindings
that I have on either Windows or Linux.  How can I get this utility or is
there another utility that I can use?

Bryan

From warmerdam at pobox.com  Wed Jan 28 12:15:04 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 28 12:15:21 2009
Subject: [gdal-dev] how to find gdal_fillnodata
In-Reply-To: <1983.64.78.232.178.1233159071.squirrel@ideotrope.org>
References: <1983.64.78.232.178.1233159071.squirrel@ideotrope.org>
Message-ID: <49809298.8030007@pobox.com>

Bryan Keith wrote:
> Hello,
> 
> I combined two DEM datasets with gdal_merge, and there's a broken strip of
> nodata between the two.  What gdal utility can I use to fix this?  I found
> references to gdal_fillnodata on the web, but I don't have it.  I
> installed FWTools 2.2.8 on windows, but that doesn't seem to include
> gdal_fillnodata either.  On Linux I have GDAL 1.4.4.0, released
> 2007/11/23.  I looked at the source code (from the daily svn snapshot),
> and it looks I need gdal.FillNoData but that's not part of the bindings
> that I have on either Windows or Linux.  How can I get this utility or is
> there another utility that I can use?

Bryan,

This utility only exists in the most recent builds from trunk.  I see it
was not in FWTools 2.3.0, but it is in the gdal-dev package of OSGeo4W.
On linux you could build from svn with python support and you should have it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From condit at sdsc.edu  Wed Jan 28 12:54:08 2009
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Jan 28 12:54:08 2009
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
In-Reply-To: <521622.34886.qm@web37106.mail.mud.yahoo.com>
References: <877502.76129.qm@web37104.mail.mud.yahoo.com>
	<845AADAC1106E44996327D62097E4C6B01243475@et.ad.sdsc.edu>
	<521622.34886.qm@web37106.mail.mud.yahoo.com>
Message-ID: <845AADAC1106E44996327D62097E4C6B012434AC@et.ad.sdsc.edu>

Hi Ednardo-
>Now, I'm testing options. I'd like to convert from .TAB to KML, 
>and then KML to .TAB because my enterprise is on transition 
>situation. We want to use KML files, not .TAB anymore. But for 
>a time, we have to use both formats. 
I'm not sure what your particular data looks like, but I would encourage you not to use KML as a primary format. XML is not well suited to large datasets and at this point doesn't translate well into other formats. I think PostGIS is a better bet as a primary source for your vector data, and from there translate into any other format you need (including KML). On the other hand, if your data sets are small and you have little interest in producing them in other formats, go with KML.

In your transition situation I would maintain everything in .TAB for the time being and write a script to generate KML from the .TAB.

-Chris

>I think that I'll kill the 7 fields that I mentioned. In fact, they are not used. But if I could mantain them, I 
>would do it.
>
>Thank you!
>?
>At? mais!
>Jesus te ama e Ele vai voltar! 
>Ednardo de Oliveira Ferreira
>Analista de Sistemas e Mestre em Transportes
>+55(61)8128-7950 
>Blog: http://vilaperi.blogspot.com/
>
>Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
>Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643
>
>"Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)
>
>"Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)
>
>"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)
>

________________________________________
From: Christopher Condit <condit@sdsc.edu>
To: Ednardo Ferreira <ednardof@yahoo.com>; gdal-dev@lists.osgeo.org
Sent: Tuesday, January 27, 2009 7:08:42 PM
Subject: RE: [gdal-dev] ogr2ogr: KML to any format - export fields
Hi Ednardo-
Is there a particular reason that you don't want to go directly from the original MapInfo to SHP? I would suggest that first, that way you don't lose field information. At this point the KML reader is not aware of KML Schemas, so you'll always get a big mashup of fields... This is being worked on.
?
-Chris
?
Christopher Condit
condit@sdsc.edu
(858) 822-5483
?
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ednardo Ferreira
Sent: Tuesday, January 27, 2009 11:42 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
?
Hello!

I'm testing ogr2ogr solution. It's really great.

But I have a problem. The situation is:

1) I have a Map Info Line layer. It has 7 descripition fields. 

2) Using ogr2ogr tool, I generated a KML file from this Map Info layer. It's ok. 

3) When I use this KML in google earth, the informations are all there.

4) But, If I try to convert this KML to any other format (as SHP or TAB), the 7 fields are all put together in one single field. 

5) how can I convert from KML to, for example, SHP or TAB, keeping all fields?



?
?
At? mais!
Jesus te ama e Ele vai voltar! 
Ednardo de Oliveira Ferreira
Analista de Sistemas e Mestre em Transportes
+55(61)8128-7950 
Blog: http://vilaperi.blogspot.com/
?
Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643
?
"Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)
?
"Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)
?
"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)
?
?
?

From pramsey at cleverelephant.ca  Wed Jan 28 13:19:22 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Jan 28 13:25:06 2009
Subject: [gdal-dev] Fwd: [postgis-devel] WKTRaster: RFC1: serialized form
In-Reply-To: <20090128113953.GB31668@keybit.net>
References: <20090128113953.GB31668@keybit.net>
Message-ID: <30fe546d0901281019y18d265dexd153584cb7369191@mail.gmail.com>

GDAL folks might be interested in reviewing this, to ensure it can
support raster goodness well.

P.


---------- Forwarded message ----------
From: strk <strk@keybit.net>
Date: Wed, Jan 28, 2009 at 3:39 AM
Subject: [postgis-devel] WKTRaster: RFC1: serialized form
To: postgis-devel@postgis.refractions.net
Cc: Pierre Racine <Pierre.Racine@sbf.ulaval.ca>


I've been approved fundings for second phase of first step
for WKTRaster project, which involves definition of the on-disk
format for it.

If anyone is interested, the RFC is here:

http://svn.refractions.net/postgis/spike/wktraster/doc/RFC1-SerializedFormat

It might be of interest for GEOMETRY as well in that
it defines a "version" field in the format, which would be
useful in case you'll change the on-disk format too, to reduce
problems deriving from further changing of the format
(hwgeom to lwgeom wasn't a walk in the park)

Comments welcome.

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
_______________________________________________
postgis-devel mailing list
postgis-devel@postgis.refractions.net
http://postgis.refractions.net/mailman/listinfo/postgis-devel
From condit at sdsc.edu  Wed Jan 28 13:28:16 2009
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Jan 28 13:28:16 2009
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
In-Reply-To: <201154.94613.qm@web37105.mail.mud.yahoo.com>
References: <877502.76129.qm@web37104.mail.mud.yahoo.com>
	<845AADAC1106E44996327D62097E4C6B01243475@et.ad.sdsc.edu>
	<521622.34886.qm@web37106.mail.mud.yahoo.com>
	<845AADAC1106E44996327D62097E4C6B012434AC@et.ad.sdsc.edu>
	<201154.94613.qm@web37105.mail.mud.yahoo.com>
Message-ID: <845AADAC1106E44996327D62097E4C6B012434B1@et.ad.sdsc.edu>

Hi Ednardo-

I'm sure you're aware of this, but just in case:

http://www.gdal.org/ogr/drv_oci.html

and

http://www.gdal.org/ogr/drv_pg.html

Since your data will be in one or the other you can continue to use ogr2ogr to generate KML directly from the database.

-Chris

 

From: Ednardo Ferreira [mailto:ednardof@yahoo.com] 
Sent: Wednesday, January 28, 2009 10:20 AM
To: Christopher Condit
Subject: Re: [gdal-dev] ogr2ogr: KML to any format - export fields

 

Hi!

I really apreciate your attention.

My database will be oracle or postgres. The information in this fields can be found in other tables. Now, what we have is the same data in 2 places: database and in .TAB files.

As you mentioned, we intend to migrate everything, including the maps, to postgis/oracle. Kml will be just to distribute maps for our customer. and this kml will be generated from postgis.

Thank you! 

From: Christopher Condit <condit@sdsc.edu>
To: Ednardo Ferreira <ednardof@yahoo.com>; gdal-dev@lists.osgeo.org
Sent: Wednesday, January 28, 2009 2:54:08 PM
Subject: RE: [gdal-dev] ogr2ogr: KML to any format - export fields

Hi Ednardo-
>Now, I'm testing options. I'd like to convert from .TAB to KML, 
>and then KML to .TAB because my enterprise is on transition 
>situation. We want to use KML files, not .TAB anymore. But for 
>a time, we have to use both formats. 
I'm not sure what your particular data looks like, but I would encourage you not to use KML as a primary format. XML is not well suited to large datasets and at this point doesn't translate well into other formats. I think PostGIS is a better bet as a primary source for your vector data, and from there translate into any other format you need (including KML). On the other hand, if your data sets are small and you have little interest in producing them in other formats, go with KML.

In your transition situation I would maintain everything in .TAB for the time being and write a script to generate KML from the .TAB.

-Chris

>I think that I'll kill the 7 fields that I mentioned. In fact, they are not used. But if I could mantain them, I 
>would do it.
>
>Thank you!
> 
>At? mais!
>Jesus te ama e Ele vai voltar! 
>Ednardo de Oliveira Ferreira
>Analista de Sistemas e Mestre em Transportes
>+55(61)8128-7950 
>Blog: http://vilaperi.blogspot.com/
>
>Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
>Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643
>
>"Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)
>
>"Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)
>
>"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)
>

________________________________________
From: Christopher Condit <condit@sdsc.edu>
To: Ednardo Ferreira <ednardof@yahoo.com>; gdal-dev@lists.osgeo.org
Sent: Tuesday, January 27, 2009 7:08:42 PM
Subject: RE: [gdal-dev] ogr2ogr: KML to any format - export fields
Hi Ednardo-
Is there a particular reason that you don't want to go directly from the original MapInfo to SHP? I would suggest that first, that way you don't lose field information. At this point the KML reader is not aware of KML Schemas, so you'll always get a big mashup of fields... This is being worked on.
 
-Chris
 
Christopher Condit
condit@sdsc.edu
(858) 822-5483
 
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ednardo Ferreira
Sent: Tuesday, January 27, 2009 11:42 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ogr2ogr: KML to any format - export fields
 
Hello!

I'm testing ogr2ogr solution. It's really great.

But I have a problem. The situation is:

1) I have a Map Info Line layer. It has 7 descripition fields. 

2) Using ogr2ogr tool, I generated a KML file from this Map Info layer. It's ok. 

3) When I use this KML in google earth, the informations are all there.

4) But, If I try to convert this KML to any other format (as SHP or TAB), the 7 fields are all put together in one single field. 

5) how can I convert from KML to, for example, SHP or TAB, keeping all fields?



 
 
At? mais!
Jesus te ama e Ele vai voltar! 
Ednardo de Oliveira Ferreira
Analista de Sistemas e Mestre em Transportes
+55(61)8128-7950 
Blog: http://vilaperi.blogspot.com/
 
Desmascarando o panfleto Veja: http://luis.nassif.googlepages.com/home
Caso Daniel Dantas: ttp://www.cartacapital.com.br/app/materia.jsp?a=2&a2=6&i=1643
 
"Suspeitavam que eu vivia intensamente e num livre abandono ? felicidade; isto n?o se perdoa." (Albert Camus)
 
"Quem confia em traidores a si pr?prio atrai?oa." (Mariano da Fonseca)
 
"H? o suficiente no mundo para todas as necessidades humanas, n?o h? o suficiente para a cobi?a humana." (Mahatma Gandhi)
 
 
 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090128/a91c86b0/attachment.html
From vali_poncos at yahoo.ca  Wed Jan 28 13:22:12 2009
From: vali_poncos at yahoo.ca (Vali Poncos)
Date: Wed Jan 28 13:28:54 2009
Subject: [gdal-dev] Terra-SAR COSAR data ingestion
Message-ID: <654667.71385.qm@web57805.mail.re3.yahoo.com>

Hello folks,

I am starting a development project that involves Terra-SAR X High Resolution Spotlight data. I used Frank's FWTools and I can load the data but it doesn't seem to contain the georeference information. Also I tried the OpenEV from Vexcel which doesn't recognize Terra-SAR data at all. I'll try to recompile OpenEV with the latest GDAL in order to be able to load the TSX data but I'm concerned about the missing georeferencing information. I've seen a posting in this list that indicates GDAL reading the XML file coming with TSX. 
My question: is GDAL capable of reading the georeference info for TSX? If yes, that means both the FWTools and OpenEV should be updated to load and display georeferenced TSX data?
Thanks,
Vali


      __________________________________________________________________
Instant Messaging, free SMS, sharing photos and more... Try the new Yahoo! Canada Messenger at http://ca.beta.messenger.yahoo.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090128/4c727755/attachment-0001.html
From vali_poncos at yahoo.ca  Wed Jan 28 13:33:40 2009
From: vali_poncos at yahoo.ca (Vali Poncos)
Date: Wed Jan 28 13:33:42 2009
Subject: [gdal-dev] GDAL in Netbeans IDE
Message-ID: <904938.79145.qm@web57801.mail.re3.yahoo.com>

Hello,

Does anybody know how to import the GDAL projects?in Netbeans IDE 6.1? Is there another IDE used to compile GDAL?
Thanks,
Vali


      __________________________________________________________________
Yahoo! Canada Toolbar: Search from anywhere on the web, and bookmark your favourite sites. Download it now at
http://ca.toolbar.yahoo.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090128/f611ea60/attachment.html
From philippe at cowpig.ca  Wed Jan 28 14:05:21 2009
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Jan 28 14:37:25 2009
Subject: [gdal-dev] Terra-SAR COSAR data ingestion
In-Reply-To: <654667.71385.qm@web57805.mail.re3.yahoo.com>
References: <654667.71385.qm@web57805.mail.re3.yahoo.com>
Message-ID: <20090128190521.GA28254@cowpig.ca>

Hi Vali,

Have you tested this using GDAL trunk? I only had access to a limited
number of TerraSAR-X scenes when writing the GDAL file reader for it, so
it's possible that the high resolution spotlight imagery is structured
differently and thus can't be read by GDAL.

Could you run the gdalinfo tool on the image you're trying to open and
send me a log? That'd give me a better feel for what is going on.

Cheers,
Phil

On Wed, Jan 28, 2009 at 10:22:12AM -0800, Vali Poncos wrote:
>    Hello folks,
>     
>    I am starting a development project that involves Terra-SAR X High
>    Resolution Spotlight data. I used Frank's FWTools and I can load the data
>    but it doesn't seem to contain the georeference information. Also I tried
>    the OpenEV from Vexcel which doesn't recognize Terra-SAR data at all. I'll
>    try to recompile OpenEV with the latest GDAL in order to be able to load
>    the TSX data but I'm concerned about the missing georeferencing
>    information. I've seen a posting in this list that indicates GDAL reading
>    the XML file coming with TSX.
>    My question: is GDAL capable of reading the georeference info for TSX? If
>    yes, that means both the FWTools and OpenEV should be updated to load and
>    display georeferenced TSX data?
>    Thanks,
>    Vali
>     
>     
> 
>    --------------------------------------------------------------------------
> 
>    Yahoo! Canada Toolbar : Search from anywhere on the web and bookmark your
>    favourite sites. Download it now!

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Luke.Pinner at environment.gov.au  Wed Jan 28 17:43:05 2009
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Jan 28 17:42:41 2009
Subject: [gdal-dev] ECW/ERS projections
References: <64102B2FB850C345B04D09C82018F45F221FAD@ACT01VEXCCL04.internal.govt>
	<497FF16D.60803@pobox.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F221FB4@ACT01VEXCCL04.internal.govt>

Thanks for the response Frank.  The coord system is NSWLAM94
http://spatialreference.org/ref/epsg/3308/ and is supported in more
recent ERMapper releases. I realise that GDAL can't support every
projection under the sun so I'll just work around it. Probably by having
a single GDAL install that I manage and if users want to access that
proj then they can use that install or manage their own.

Regards
Luke

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, 28 January 2009 4:47 PM
To: Pinner, Luke
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ECW/ERS projections

Pinner, Luke wrote:
> Hi
> 
> What is the best way to enable support for ECW/ERS projections that do
> not have an entry in the GDAL_DATA/ecw_cs.wkt dictionary?
> 
> This projection definition is used by multiple people in my area,
either
> using the gdal utilities or as part of scripts coded using the gdal
> python api.
> 
> I can manually update the ecw_cs.wkt file on my own installation and
add
> the name & wkt (which works fine) but I'd not have to maintain
> modifications to core files over multiple installs. 

Luke,

That is pretty much my suggestion for how to handle it. Is this a
coordinate system that you added locally to ERMapper too?  Or is it
something supported by more recent ERMapper releases, but missing in
GDAL?

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From ivan.lucena at pmldnet.com  Thu Jan 29 00:40:02 2009
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Thu Jan 29 00:40:01 2009
Subject: [gdal-dev] GDAL in Netbeans IDE
In-Reply-To: <904938.79145.qm@web57801.mail.re3.yahoo.com>
References: <904938.79145.qm@web57801.mail.re3.yahoo.com>
Message-ID: <49814132.4000009@pmldnet.com>

Hi Vali,

On NetBeans 6.5 you select:

Main Form:
    File/New Project

New Project wizard dialog:

    1. Choose Project
       Category: C/C++
       Projects: C/C++ Project From Existing Code
       Click on "Next>"

    2. Build Tool:
       Select "Using existing makefile"
       Browse or type the full path for the main GNUmakefile
       or:
       Select "Using a makefile generate by a 'configure' script
       Note: I never used that options since I already run ./configure
             from the command line but that could a a good way to go too.

    3. Build actions:
       Working Directory: <main GDAL folder path>
       Build command: make
       Clean command: make clean

    4. Source files:
       Click on "Add Folder: <main GDAL folder path>

    5. Code assistance configuration:
       Select "Automatic configuration"

    6. Project Name and location
       Note: Those path doesn't need to be GDAL folder path

That is it.

Best regards,

Ivan


Vali Poncos wrote:
> Hello,
>  
> Does anybody know how to import the GDAL projects in Netbeans IDE 6.1? 
> Is there another IDE used to compile GDAL?
> Thanks,
> Vali
>  
>  
> 
> ------------------------------------------------------------------------
> Now with a new friend-happy design! Try the new *Yahoo! Canada 
> Messenger* <http://ca.beta.messenger.yahoo.com/>
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Jan 29 00:50:59 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 29 00:51:04 2009
Subject: [gdal-dev] ECW/ERS projections
In-Reply-To: <64102B2FB850C345B04D09C82018F45F221FB4@ACT01VEXCCL04.internal.govt>
References: <64102B2FB850C345B04D09C82018F45F221FAD@ACT01VEXCCL04.internal.govt>
	<497FF16D.60803@pobox.com>
	<64102B2FB850C345B04D09C82018F45F221FB4@ACT01VEXCCL04.internal.govt>
Message-ID: <498143C3.7040702@pobox.com>

Pinner, Luke wrote:
> Thanks for the response Frank.  The coord system is NSWLAM94
> http://spatialreference.org/ref/epsg/3308/ and is supported in more
> recent ERMapper releases. I realise that GDAL can't support every
> projection under the sun so I'll just work around it. Probably by having
> a single GDAL install that I manage and if users want to access that
> proj then they can use that install or manage their own.

Luke,

If this is a coordinate system supported by recent ERMapper releases,
then I'd encourage you to file a ticket in the GDAL trac, and I'll
add it in upstream so it makes it into 1.6.1.  In fact, if you can
provide the newer ERMapper coordinate system definition files I can
translate them to update to the full set of recent coordinate
system definitions.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From strk at keybit.net  Thu Jan 29 04:31:43 2009
From: strk at keybit.net (strk)
Date: Thu Jan 29 04:32:38 2009
Subject: [gdal-dev] Re: [postgis-devel] WKTRaster: RFC1: serialized form
In-Reply-To: <20090128225138.GD46558@keybit.net>
References: <20090128113953.GB31668@keybit.net>
	<20090128225138.GD46558@keybit.net>
Message-ID: <20090129093143.GA50412@keybit.net>

On Wed, Jan 28, 2009 at 11:51:38PM +0100, strk wrote:
> On Wed, Jan 28, 2009 at 12:39:53PM +0100, strk wrote:
> 
> > http://svn.refractions.net/postgis/spike/wktraster/doc/RFC1-SerializedFormat
> 
> RFC updated to take into account off-db storage and bigger precision
> on insertion points. 

I fluffed the header some more, so to have all doubles
for georeference. After all what does it pay to have a mixed
float/double georef ? (and GDAL uses double precision for that).

Also added example total sizes of single band on-disk rasters.
A 64x64 16bit band won't fit in a default potgresql page size,
an 8bit band of that dimension would.

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From guillaume.huby.lists at gmail.com  Thu Jan 29 04:54:21 2009
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Thu Jan 29 04:54:23 2009
Subject: [gdal-dev] Is it possible to change block size of a VRT file ?
Message-ID: <ddc797c30901290154s3d0edefbnc39dc91fbeff9ae4@mail.gmail.com>

Hi everyone,

I'm using GDAL 1.6.0. I observed that by default, VRT Block size is 128x128,
whatever the inputs datas block size is.
Is it possible to change block size of a VRT file ? And how ?

For exemple, if my VRT file is made of 2 tif files that have a block size of
1000x1. The VRT file have a block size of 128x128. Do this different block
size have an impact on the performance of processings (warping the VRT file
for exemple) ? I would have think that a block size of 1000x1 for the VRT
file would have improved the performance of the process, but maybe I'm
wrong.

Thank you for your replies !

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090129/b5a9a2d7/attachment.html
From joelodom at gmail.com  Thu Jan 29 09:01:31 2009
From: joelodom at gmail.com (Joel Odom)
Date: Thu Jan 29 09:01:34 2009
Subject: [gdal-dev] Can I create a GDAL data set from bytes in memory?
In-Reply-To: <4980897D.3080807@pobox.com>
References: <d422b4500901280726s5de9eca5rf389a4545c6d0ad1@mail.gmail.com>
	<4980897D.3080807@pobox.com>
Message-ID: <d422b4500901290601j791e72aaj78d3b22771a4ea1c@mail.gmail.com>

Frank, it's working great.  Thanks for pointing these functions out.


On Wed, Jan 28, 2009 at 11:36 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Joel Odom wrote:
>
>> I've got a situation where I'm trying to use GDAL to read image files
>> contained within a KMZ archive.  (My project uses both GDAL and libkml.)
>>  Libkml can easily read the image file into memory out of the KMZ archive,
>> but I'd like to pass it to GDAL without having to write it to a temporary
>> file on disk.  I haven't figured out if this can be done yet.  Thanks for
>> any answers.
>>
>
> Joel,
>
> Yes, from C/C++ you can generally utilize the VSI*L facilities to wrap
> a memory buffer and have it treated by GDAL as a file.  It does not work
> for every image driver, but it works for most common ones.  The
> documentation
> is available with the VSIInstallMemFileHandler() function:
>
>  http://www.gdal.org/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090129/af89db2a/attachment-0001.html
From even.rouault at mines-paris.org  Thu Jan 29 14:27:08 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 29 14:27:21 2009
Subject: [gdal-dev] Is it possible to change block size of a VRT file ?
In-Reply-To: <ddc797c30901290154s3d0edefbnc39dc91fbeff9ae4@mail.gmail.com>
References: <ddc797c30901290154s3d0edefbnc39dc91fbeff9ae4@mail.gmail.com>
Message-ID: <200901292027.10639.even.rouault@mines-paris.org>

Hi Guillaume,

This is a good point and I've also experienced suboptimal performance because 
of this. The answer is : no, you can't change the block size of a 
VRTSourcedRasterBand in a VRTDataset. But this can be currently done for a 
VRTWarpedDataset.

Clearly for a scanline oriented underlying raster with big width, a 128x128 
tiling will not be ideal for performance.

The main issue is that it is not easy in the general case to determine the 
optimal block size as you can add in a VRT several underlying raster datasets 
that have different block size.

But in some scenarios, you just reference one single raster into a 
VRT. 'gdal_translate -of VRT -expand rgb' comes to my mind, but any 
gdal_translate command that uses a VRT dataset as a temporary source dataset 
(because of quite a few options, like -a_srs, -a_ullr, etc etc) before 
translation to the final format might also been affected.

In your scenario of a VRT file made of 2 tif files that have a block size of 
1000x1, it might also  be interesting to be able to specify the block 
dimensions so that nBlockYSize == 1.

This would be feasible by moving code from VRTWarpedDataset to its base class 
VRTDataset. The 2 elements already exist <BlockXSize> and <BlockYSize>
They would be used if found, otherwise the default would be used. 

As for setting those values is concerned, I can imagine a 
VRTDatasetSetBlockSize() method that should be called before the first band 
is added to the dataset. This would be used by gdal_translate, or by any code 
that has some clues on a better block size than the default when building a 
VRT.

It might be interesting that you create a trac ticket for that enhancement 
request.

Even.

PS: The block size is actually determined by the following formula :
    nBlockXSize = MIN(128,nXSize);
    nBlockYSize = MIN(128,nYSize);
where nXSize, nYSize are the raster dimensions


Le Thursday 29 January 2009 10:54:21 guillaume huby, vous avez ?crit?:
> Hi everyone,
>
> I'm using GDAL 1.6.0. I observed that by default, VRT Block size is
> 128x128, whatever the inputs datas block size is.
> Is it possible to change block size of a VRT file ? And how ?
>
> For exemple, if my VRT file is made of 2 tif files that have a block size
> of 1000x1. The VRT file have a block size of 128x128. Do this different
> block size have an impact on the performance of processings (warping the
> VRT file for exemple) ? I would have think that a block size of 1000x1 for
> the VRT file would have improved the performance of the process, but maybe
> I'm wrong.
>
> Thank you for your replies !
>
> Regards,
> Guillaume.


From warmerdam at pobox.com  Thu Jan 29 16:26:02 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 29 16:26:22 2009
Subject: [gdal-dev] Warping an already georeferenced image with control
	points
In-Reply-To: <497D8FF6.30600@uva.nl>
References: <8f0c8ded0901161102of436502m730ff3d844febaa5@mail.gmail.com>
	<4970DA3F.6080501@pobox.com> <497D8FF6.30600@uva.nl>
Message-ID: <49821EEA.9030702@pobox.com>

Jan Hartmann wrote:
> Hi,
> 
> I am trying to georeference old maps in two steps: first georeferencing 
> them from the old projection to a modern one, and then ameliorating the 
> georeferenced image by rubber-sheeting it on the base of control points, 
> mostly triangulation points for which the coordinates in the old and new 
> maps are known.
> 
> The second step causes trouble: if I add  control points to the 
> georeferenced image with gdal_translate -gcp , the projection 
> information gets lost.
> 
> Yet, AFAICS it should be possible: if I use gdaltransform -s_srs 
> EPSG:28992 -t_srs EPSG:28992 -gcp ... , I can use control points with 
> coordinates in EPSG:28992 and get a correct transformation.
> 
> So: regarding this behavior  of gdal_translate, to discard projection 
> information when control points are added: is it a bug or is it the 
> expected behavior? In the last case, how can I rubber-sheet an already 
> georeferenced map?

Jan,

If you use the -a_srs switch of gdal_translate in combination with the
-gcp switch to add gcps, the GCPs should be recorded as being in the
coordinate system described by -a_srs.  Because there is no reason to
believe that the current image coordinate system is related to the
coordinate system of the GCPs, no effort is made to use the existing image
coordinate system as the default GCP coordinate system.

By the way, setting GCPs with a GCP coordinate system on an image is likely
to not work with most GDAL supported formats, and the coordinate system
related aspect may also be supported in a variable fashion depending on the
format driver's implementation.

Hopefully things work well with the GeoTIFF format, which I assume you have
been using.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From vali_poncos at yahoo.ca  Fri Jan 30 14:44:42 2009
From: vali_poncos at yahoo.ca (Vali Poncos)
Date: Fri Jan 30 14:44:44 2009
Subject: [gdal-dev] Buildig OpenEV with GDAL 1.6.0
Message-ID: <265100.68575.qm@web57807.mail.re3.yahoo.com>

Hi folks,

I built GDAL 1.6.0 then I tried to build OpenEV.
OpenEV seem to find GDAL but not GDALOpen. I checked Internet and I see
that there is a GDALOpen.cpp file which it seems to be missing in the
latest GDAL build. I found though the GDALOpen as a method in
gdaldataset.cpp in version 1.6.0.
What would be the problem here?
Thanks,
Vali


configure: Found local GDAL_HOME=/media/Data/Work/K-SAR/openev_source/../gdal
checking for GDALOpen in -lgdal... no
checking for GDALOpen in -lgdal... (cached) no
checking for GDALOpen in -lgdal... (cached) no
configure: error: 
OpenEV requires GDAL library, but it was not found.  Please download
and install it.  See http://www.remotesensing.org/gdal


      __________________________________________________________________
Get a sneak peak at messages with a handy reading pane with All new Yahoo! Mail: http://ca.promos.yahoo.com/newmail/overview2/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20090130/fd0833ff/attachment.html
From mateusz at loskot.net  Sat Jan 31 14:17:43 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan 31 14:18:02 2009
Subject: [gdal-dev] GDAL in Netbeans IDE
In-Reply-To: <49814132.4000009@pmldnet.com>
References: <904938.79145.qm@web57801.mail.re3.yahoo.com>
	<49814132.4000009@pmldnet.com>
Message-ID: <53995.94.193.98.140.1233429463.squirrel@loskot.net>

Iva,

I've taken the liberty to post your notes on the Wiki:

http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithNetBeansIDE

I hope you don't mind.

Best regards,
Mateusz

Ivan Lucena wrote:
> Hi Vali,
>
> On NetBeans 6.5 you select:
>
> Main Form:
>     File/New Project
>
> New Project wizard dialog:
>
>     1. Choose Project
>        Category: C/C++
>        Projects: C/C++ Project From Existing Code
>        Click on "Next>"
>
>     2. Build Tool:
>        Select "Using existing makefile"
>        Browse or type the full path for the main GNUmakefile
>        or:
>        Select "Using a makefile generate by a 'configure' script
>        Note: I never used that options since I already run ./configure
>              from the command line but that could a a good way to go too.
>
>     3. Build actions:
>        Working Directory: <main GDAL folder path>
>        Build command: make
>        Clean command: make clean
>
>     4. Source files:
>        Click on "Add Folder: <main GDAL folder path>
>
>     5. Code assistance configuration:
>        Select "Automatic configuration"
>
>     6. Project Name and location
>        Note: Those path doesn't need to be GDAL folder path
>
> That is it.
>
> Best regards,
>
> Ivan
>
>
> Vali Poncos wrote:
>> Hello,
>>
>> Does anybody know how to import the GDAL projects in Netbeans IDE 6.1?
>> Is there another IDE used to compile GDAL?
>> Thanks,
>> Vali
>>
>>
>>
>> ------------------------------------------------------------------------
>> Now with a new friend-happy design! Try the new *Yahoo! Canada
>> Messenger* <http://ca.beta.messenger.yahoo.com/>
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Mateusz Loskot
http://mateusz.loskot.net

From ivan.lucena at pmldnet.com  Sat Jan 31 18:28:35 2009
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Sat Jan 31 18:28:36 2009
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gR0RBTCBpbiBOZXRiZWFucyBJREU=?=
Message-ID: <20090131232835.22571.qmail@s466.sureserver.com>

Mateusz.

I don't mind at all. That is great.

Ivan

>  -------Original Message-------
>  From: Mateusz Loskot <mateusz@loskot.net>
>  Subject: Re: [gdal-dev] GDAL in Netbeans IDE
>  Sent: Jan 31 '09 19:17
>  
>  Iva,
>  
>  I've taken the liberty to post your notes on the Wiki:
>  
>  http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithNetBeansIDE
>  
>  I hope you don't mind.
>  
>  Best regards,
>  Mateusz
>  
>  Ivan Lucena wrote:
>  > Hi Vali,
>  >
>  > On NetBeans 6.5 you select:
>  >
>  > Main Form:
>  >???? File/New Project
>  >
>  > New Project wizard dialog:
>  >
>  >???? 1. Choose Project
>  >????????Category: C/C++
>  >????????Projects: C/C++ Project From Existing Code
>  >????????Click on "Next>"
>  >
>  >???? 2. Build Tool:
>  >????????Select "Using existing makefile"
>  >????????Browse or type the full path for the main GNUmakefile
>  >????????or:
>  >????????Select "Using a makefile generate by a 'configure' script
>  >????????Note: I never used that options since I already run ./configure
>  >??????????????from the command line but that could a a good way to go too.
>  >
>  >???? 3. Build actions:
>  >????????Working Directory: <main GDAL folder path>
>  >????????Build command: make
>  >????????Clean command: make clean
>  >
>  >???? 4. Source files:
>  >????????Click on "Add Folder: <main GDAL folder path>
>  >
>  >???? 5. Code assistance configuration:
>  >????????Select "Automatic configuration"
>  >
>  >???? 6. Project Name and location
>  >????????Note: Those path doesn't need to be GDAL folder path
>  >
>  > That is it.
>  >
>  > Best regards,
>  >
>  > Ivan
>  >
>  >
>  > Vali Poncos wrote:
>  >> Hello,
>  >>
>  >> Does anybody know how to import the GDAL projects in Netbeans IDE 6.1?
>  >> Is there another IDE used to compile GDAL?
>  >> Thanks,
>  >> Vali
>  >>
>  >>
>  >>
>  >> ------------------------------------------------------------------------
>  >> Now with a new friend-happy design! Try the new *Yahoo! Canada
>  >> Messenger* <http://ca.beta.messenger.yahoo.com/>
>  >>
>  >>
>  >> ------------------------------------------------------------------------
>  >>
>  >> _______________________________________________
>  >> gdal-dev mailing list
>  >> gdal-dev@lists.osgeo.org
>  >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  
>  
>  --
>  Mateusz Loskot
>  http://mateusz.loskot.net
>  
>  

